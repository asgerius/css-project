[{"tags": ["c"], "comments": [{"owner": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 3, "creation_date": 1538004557, "post_id": 52527340, "comment_id": 91994311, "body": "Because <code>a[j-1]</code> is undefined when <code>j</code> is zero. You should start with <code>j</code> at one (instead of zero)."}, {"owner": {"reputation": 23, "user_id": 9485364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CtWvz.jpg?s=128&g=1", "display_name": "Skydance", "link": "https://stackoverflow.com/users/9485364/skydance"}, "reply_to_user": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1538005840, "post_id": 52527340, "comment_id": 91994541, "body": "OHHHHH thank you !! I&#39;ll try it out"}, {"owner": {"reputation": 23, "user_id": 9485364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CtWvz.jpg?s=128&g=1", "display_name": "Skydance", "link": "https://stackoverflow.com/users/9485364/skydance"}, "reply_to_user": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1538005942, "post_id": 52527340, "comment_id": 91994559, "body": "@ElliottFrisch i still get a seg fault though?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1538007264, "post_id": 52527340, "comment_id": 91994875, "body": "post the new code"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1538011024, "post_id": 52527340, "comment_id": 91995700, "body": "the code you post has <code>for(j = n-1</code>, answers say to use <code>for(j = 1</code>"}, {"owner": {"reputation": 23, "user_id": 9485364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CtWvz.jpg?s=128&g=1", "display_name": "Skydance", "link": "https://stackoverflow.com/users/9485364/skydance"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1538012073, "post_id": 52527340, "comment_id": 91995917, "body": "@pm100 whoops typo i was trying other things, it still says seg fault"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538012353, "post_id": 52527340, "comment_id": 91995983, "body": "Why did you post updated code with no explanation?  If that is an answer to your own question, post it as an answer instead."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1538064975, "post_id": 52527340, "comment_id": 92022272, "body": "shouldnt that be <code>for ...  j &lt; i</code>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9485364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CtWvz.jpg?s=128&g=1", "display_name": "Skydance", "link": "https://stackoverflow.com/users/9485364/skydance"}, "edited": false, "score": 0, "creation_date": 1538005993, "post_id": 52527366, "comment_id": 91994567, "body": "thank you ! I tried making it j = 1 it still gives me a seg fault?"}], "tags": [], "owner": {"reputation": 12006, "user_id": 1102056, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d3b5ee75a670827289364ba8dc89ed4?s=128&d=identicon&r=PG", "display_name": "Sufian Latif", "link": "https://stackoverflow.com/users/1102056/sufian-latif"}, "is_accepted": false, "score": 2, "last_activity_date": 1538004653, "creation_date": 1538004653, "answer_id": 52527366, "question_id": 52527340, "link": "https://stackoverflow.com/questions/52527340/unsure-why-does-bubble-sort-code-have-a-segmentation-fault/52527366#52527366", "title": "Unsure why does Bubble sort code have a segmentation fault", "body": "<p>In the first iteration of the outer loop (when value of <code>i</code> is 0), the inner loop becomes an infinite loop, because value of <code>j</code> starts from 0 and keeps increasing. Eventually <code>j</code> becomes large enough for your program to access some unallocated memory, hence causing a segmentation fault.</p>\n\n<p>Also, in the first iteration of the inner loop, value of <code>j</code> is 0, so <code>a[j - 1]</code> will try to access a memory location out of bound for your program.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1538012212, "last_edit_date": 1538012212, "creation_date": 1538006943, "answer_id": 52527613, "question_id": 52527340, "link": "https://stackoverflow.com/questions/52527340/unsure-why-does-bubble-sort-code-have-a-segmentation-fault/52527613#52527613", "title": "Unsure why does Bubble sort code have a segmentation fault", "body": "<p><code>j &gt; i</code> is false on the first iteration, so <code>if(nswaps == 0)</code> is true and the loops break, no sorting occurs.</p>\n\n<hr>\n\n<p>Instead of iterating the outside loop <code>n</code> times, iterate <code>n-1</code> times.</p>\n\n<p>No need to count swaps, a simply boolean is sufficient.</p>\n\n<p>After the first inner loop iteration, the lowest element of the array is found and in place at the end.  The next inner loop only needs to iterate to next-last element, etc.</p>\n\n<p><code>size_t</code> is the Goldilocks type for array indexing, neither too narrow, nor too wide.  Better than using <code>int</code> for indexing.  Remember that is is an_unsigned type_.</p>\n\n<p>No need to declare a variable until needed.</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid bubble_sort(int a[], size_t n) {\n  while (n &gt; 1) {\n    bool swapped = false;\n    for (size_t j = 1; j &lt; n; j++) {\n      if (a[j-1] &lt; a[j]) {\n        int tmp = a[j];\n        a[j] = a[j - 1];\n        a[j - 1] = tmp;\n        swapped = true;\n      }\n    }\n    if (!swapped) {\n      break;\n    }\n    n--;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9485364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CtWvz.jpg?s=128&g=1", "display_name": "Skydance", "link": "https://stackoverflow.com/users/9485364/skydance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1538017205, "creation_date": 1538004459, "last_edit_date": 1538017205, "question_id": 52527340, "link": "https://stackoverflow.com/questions/52527340/unsure-why-does-bubble-sort-code-have-a-segmentation-fault", "title": "Unsure why does Bubble sort code have a segmentation fault", "body": "<p>Hi I'm using gdb to debug my bubble sort code but I don't get why it keeps breaking at <code>if(a[j] &lt; a[j-1]</code></p>\n\n<p>here is my bubble sort function </p>\n\n<pre><code>void sort(int a[], int n) {\n    int i, j, nswaps, tmp;\n    for(i = 0; i &lt; n; i++) {\n       nswaps = 0;\n       for(j = 0; j &gt; i; j++) {\n           if(a[j] &lt; a[j-1]) {\n               tmp = a[j];\n               a[j] = a[j-1];\n               a[j-1] = tmp;\n               nswaps++;\n            }\n       }\n       if(nswaps == 0) break;\n    }\n}\n</code></pre>\n\n<p>Please do help me thanks!!</p>\n\n<p>updated code: still has a segmentation fault </p>\n\n<pre><code>void sort(int a[], int n) {\nint i, j, nswaps;\nfor (i = 0; i &lt; n; i++) {\n    nswaps = 0;\n    for (j = 1; j &gt; i; j++) {\n        if (a[j] &lt; a[j-1]) {\n            int tmp;\n            tmp = a[j];\n            a[j] = a[j-1];\n            a[j-1] = tmp;\n            nswaps++;\n        }\n    }\n    if (nswaps == 0) break;\n }\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 125, "user_id": 6478630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4w8Zn4M4slk/AAAAAAAAAAI/AAAAAAAAIkA/opAjewjdyYA/photo.jpg?sz=128", "display_name": "Prathu Baronia", "link": "https://stackoverflow.com/users/6478630/prathu-baronia"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1538002110, "post_id": 52526938, "comment_id": 91993702, "body": "@M.M fixed it to work as a small working example."}, {"owner": {"reputation": 125, "user_id": 6478630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4w8Zn4M4slk/AAAAAAAAAAI/AAAAAAAAIkA/opAjewjdyYA/photo.jpg?sz=128", "display_name": "Prathu Baronia", "link": "https://stackoverflow.com/users/6478630/prathu-baronia"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1538002286, "post_id": 52526938, "comment_id": 91993736, "body": "@M.M The above code works perfectly <a href=\"https://onlinegdb.com/SyNHpFKF7\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 125, "user_id": 6478630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4w8Zn4M4slk/AAAAAAAAAAI/AAAAAAAAIkA/opAjewjdyYA/photo.jpg?sz=128", "display_name": "Prathu Baronia", "link": "https://stackoverflow.com/users/6478630/prathu-baronia"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1538002382, "post_id": 52526938, "comment_id": 91993756, "body": "@M.M Yes my bad, a bracket was missing. Fixed it."}, {"owner": {"reputation": 125, "user_id": 6478630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4w8Zn4M4slk/AAAAAAAAAAI/AAAAAAAAIkA/opAjewjdyYA/photo.jpg?sz=128", "display_name": "Prathu Baronia", "link": "https://stackoverflow.com/users/6478630/prathu-baronia"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1538002603, "post_id": 52526938, "comment_id": 91993829, "body": "Done, I was in a bit of hurry so messed up a little bit."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1538003500, "post_id": 52526938, "comment_id": 91994054, "body": "the problem is due to the fact that the ternary operator <code>?</code> has lower precedence than the relational operators, in this case <code>&gt;</code>, and when the macros are expended at compile time, the <code>&gt;</code> is getting evaluated sooner than you expect.  So, when you add the parentheses as in @chux answer, the operators will get evaluated in the order that you expect."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1538048952, "post_id": 52526938, "comment_id": 92011937, "body": "There is no such thing as a macro call. A preprocessor macro operates by substituting the macro name and parameters with source code from the macro definition. The result is actual source code where the macro is used, not any sort of run-time call. (It is often misstated that preprocessor macros perform text substitution, but that is incorrect. They substitute preprocessor tokens, which are essentially text that has been grouped into identifiers, C operators such as <code>++</code>, and other units.)"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 6478630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4w8Zn4M4slk/AAAAAAAAAAI/AAAAAAAAIkA/opAjewjdyYA/photo.jpg?sz=128", "display_name": "Prathu Baronia", "link": "https://stackoverflow.com/users/6478630/prathu-baronia"}, "edited": false, "score": 0, "creation_date": 1538002486, "post_id": 52526991, "comment_id": 91993793, "body": "Can you please explain why this works and my code doesn&#39;t? The parenthesis solution does not seem to be really intuitive to me as of now."}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "reply_to_user": {"reputation": 125, "user_id": 6478630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4w8Zn4M4slk/AAAAAAAAAAI/AAAAAAAAIkA/opAjewjdyYA/photo.jpg?sz=128", "display_name": "Prathu Baronia", "link": "https://stackoverflow.com/users/6478630/prathu-baronia"}, "edited": false, "score": 1, "creation_date": 1538002789, "post_id": 52526991, "comment_id": 91993877, "body": "<code>,max(2, max(1,4))</code> expands to <code>(2&gt; (1&gt;4)?(1):(4)  )?(2):(  (1&gt;4)?(1):(4)  )</code> <b>NOTICE</b> <code>2&gt; (1&gt;4)?</code> is <code>2 &gt; false == 2 &gt; 0</code> which is true. So 2 is the value. @PrathuBaronia"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1538003370, "post_id": 52526991, "comment_id": 91994025, "body": "The outer <code>()</code> are a good first step, yet <code>(a&gt;b)</code> deserves <code>()</code> about <code>a,b</code> before the compare occurs --&gt; <code>((a)&gt;(b))</code>"}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1538003678, "post_id": 52526991, "comment_id": 91994099, "body": "@chux Thats a good catch, it just happens to work for this example without them. Ill add that fix, thx"}], "tags": [], "owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "is_accepted": false, "score": 1, "last_activity_date": 1538003706, "last_edit_date": 1538003706, "creation_date": 1538001913, "answer_id": 52526991, "question_id": 52526938, "link": "https://stackoverflow.com/questions/52526938/calling-macro-from-a-macro-call/52526991#52526991", "title": "Calling macro from a macro call", "body": "<p><code>max(2, max(1,4))</code> expands to <code>(2&gt; (1&gt;4)?(1):(4)  )?(2):(  (1&gt;4)?(1):(4)  )</code> <strong>NOTICE</strong> <code>2&gt; (1&gt;4)?</code> is <code>2 &gt; false == 2 &gt; 0</code> which is true. So 2 is the value. </p>\n\n<p>to fix this, add some parentheses :)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define max(a,b) (((a)&gt;(b))?(a):(b))\n#define min(a,b) (((b)&gt;(a))?(a):(b))\n\nint main()\n{\n    printf(\"%d\",max(2, max(1,4)));\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1538002160, "creation_date": 1538002160, "answer_id": 52527025, "question_id": 52526938, "link": "https://stackoverflow.com/questions/52526938/calling-macro-from-a-macro-call/52527025#52527025", "title": "Calling macro from a macro call", "body": "<blockquote>\n  <p>Is calling a macro within a macro call not possible?</p>\n</blockquote>\n\n<p>It is possible to nest macro calls</p>\n\n<hr>\n\n<p>To get the desire functionality, place a <code>()</code> around each parameter and a <code>()</code> around the entire expression.</p>\n\n<pre><code>// #define max(a,b) (a&gt;b)?(a):(b)\n#define max(a,b) (((a)&gt;(b)) ? (a) : (b))\n</code></pre>\n\n<hr>\n\n<p>Without judicious use of <code>()</code>, code may not evaluate as expected when the argument is non-trivial as is <code>b</code> in the outer call of <code>max(a,b)</code> in  <code>max(2,max(1,4))</code></p>\n"}], "owner": {"reputation": 125, "user_id": 6478630, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4w8Zn4M4slk/AAAAAAAAAAI/AAAAAAAAIkA/opAjewjdyYA/photo.jpg?sz=128", "display_name": "Prathu Baronia", "link": "https://stackoverflow.com/users/6478630/prathu-baronia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 52527025, "answer_count": 2, "score": 2, "last_activity_date": 1538003706, "creation_date": 1538001527, "last_edit_date": 1538002549, "question_id": 52526938, "link": "https://stackoverflow.com/questions/52526938/calling-macro-from-a-macro-call", "title": "Calling macro from a macro call", "body": "<p>Why doesn't the following code output the maximum of three numbers?<br/></p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\n#define max(a,b) (a&gt;b)?(a):(b)\n#define min(a,b) (b&gt;a)?(a):(b)\n\nint main()\n{\n    printf(\"%d\",max(2,max(1,4)));\n    return 0;\n}\n</code></pre>\n\n<p>This results in: <br/></p>\n\n<pre><code>Output: 2\n</code></pre>\n\n<p>Is calling a macro within a macro call not possible?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 4, "creation_date": 1537998734, "post_id": 52526447, "comment_id": 91992791, "body": "At first glance <code>for(i=0; i &lt;= count; i++)</code> should probably  <code>for(i=0; i &lt; count; i++) </code> and    <code>for(j=i+1;j&lt;=count;j++)</code> likely         <code>for(j=i;j&lt;count;j++)</code>"}, {"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "edited": false, "score": 1, "creation_date": 1537998746, "post_id": 52526447, "comment_id": 91992796, "body": "From a quick glance, the <code>&lt;=</code> in your for-loops should be <code>&lt;</code>, to fix an off-by-one bug."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1537998914, "post_id": 52526447, "comment_id": 91992840, "body": "Your memory handling is all over the place. Freeing memory and then using it (free before sortNum) Allocating 4 ints for each integer (and why realloc every time? That is just bad)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1537999454, "post_id": 52526447, "comment_id": 91992998, "body": "Also, our old friend: <a href=\"https://stackoverflow.com/q/5431941/758133\">stackoverflow.com/q/5431941/758133</a>"}], "owner": {"user_type": "does_not_exist", "display_name": "user7939273"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537998389, "creation_date": 1537998389, "question_id": 52526447, "link": "https://stackoverflow.com/questions/52526447/c-programming-linux-incorrect-output-when-reading-in-and-writing-files", "title": "C programming/Linux - incorrect output when reading in and writing files?", "body": "<p>I'm writing a C program in Linux that will read in a list of numbers, sort them, and then output them in a text file. My program compiles well enough, but my output is... a bit strange. I've just begun coding in C, so I'm a little overwhelmed with where this error could be coming from. </p>\n\n<p>My input text file that I wrote:</p>\n\n<p><code>4 3 2 1</code></p>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid sortNum(int *num, int count){\n    int i,j;\n    for(i=0;i&lt;=count;i++){\n        int minIndex=i;\n        for(j=i+1;j&lt;=count;j++){\n            if(num[j] &lt; num[minIndex]){\n                minIndex=j;\n            }\n        }\n        int temp = num[minIndex];\n        num[minIndex]=num[i];\n        num[i]=temp;\n    }\n}\n\nint main(int argc, char *argv[]){\n    int *numbers;\n    int count=0;\n    int i=0;\n    char input[20], output[20];\n    FILE *fileIn, *fileOut;\n\n    numbers = (int *)malloc(sizeof(int));\n    if(argc != 3){\n        printf(\"Please provide the input and output text file names as %s name1 name2\\n\", argv[0]);\n        return 0;\n    }\n    else{\n        sscanf(argv[1], \"%s\", input);\n        sscanf(argv[2], \"%s\", output);\n    }\n\n    fileIn = fopen(input, \"r\");\n    fileOut = fopen(output, \"w\");\n\n    if(!fileIn){\n        printf(\"Input file %s cannot be opened.\\n\", input);\n        return 0;\n    }\n    else if(!fileOut){\n        printf(\"Output file %s cannot be written.\\n\", output);\n        return 0;\n    }\n    else{\n        while(!feof(fileIn)){\n            i++;\n            numbers = (int *)realloc(numbers, 4 * sizeof(int));\n            fscanf(fileIn, \"%d\", &amp;numbers[i]);\n            printf(\"%d \", numbers[i]);\n        }\n    }\n    count = i;\n    free(numbers);\n    fclose(fileIn);\n    printf(\"\\n\");\n    sortNum(numbers, count);\n    printf(\"\\nElements are now sorted: \\n\");\n\n    for(i=0; i &lt;= count; i++){\n        fprintf(fileOut, \"%d\", numbers[i]);\n        printf(\"%d \", numbers[i]);\n    }\n    printf(\"\\n\");\n    fclose(fileOut);\n    return 0;\n}\n</code></pre>\n\n<p>And here is my output that I get when I run the program:</p>\n\n<p><code>4 3 2 1 134409\nElements are now sorted:\n0 1 2 3 4 134409</code></p>\n\n<p>For starters, I'm not sure where the <code>0</code> came from when writing, nor where or what <code>134409</code> is supposed to represent.</p>\n\n<p>If done correctly, the desired output should be something like:</p>\n\n<p><code>4 3 2 1\nElements are now sorted:\n1 2 3 4</code></p>\n\n<p>As far as troubleshooting goes, I really wish I had more to offer, but I'm truly lost. Perhaps I've overlooked something with the library functions? I originally thought that it may have something to do with how I wrote my while loop, but now I'm not so sure. I'd really appreciate some guidance.</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "mutex"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1537999905, "post_id": 52526346, "comment_id": 91993145, "body": "Would it not be easier/simpler to just load a semaphore with 10 units, create 100 threads, have them all wait at their start for a semaphore unit, then post back the unit just before they exit?  It&#39;s easy to get into a tangle with threads if you don&#39;t go for the simplest design that will clearly work:)"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 6527546, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wXyoHQxWp58/AAAAAAAAAAI/AAAAAAAABGk/SO3zT8uQBgw/photo.jpg?sz=128", "display_name": "Lavigne958", "link": "https://stackoverflow.com/users/6527546/lavigne958"}, "is_accepted": false, "score": 0, "last_activity_date": 1537999965, "creation_date": 1537999965, "answer_id": 52526706, "question_id": 52526346, "link": "https://stackoverflow.com/questions/52526346/c-pthread-running-only-10-threads-simultaneously-what-is-the-problem-here/52526706#52526706", "title": "C Pthread: Running only 10 threads simultaneously (what is the problem here)", "body": "<p>in the function that your threads run, you start by waiting on a condition but you forgot to take the mutex before. So you first must take the mutex before waiting on the condition.</p>\n\n<p>you have what we call a deadlock.</p>\n\n<p>What happens is:</p>\n\n<ol>\n<li>the first thread wakes up (the pthread_con_wait function acquires the lock for you already)</li>\n<li>then you try to acquire the lock again => deadlock because you already own the lock so you kinda deadlock yourself.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 10406012, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iaNm9BiKDVg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVRA7wmA2x-JgjtPCqHjqv3EF3SoQ/mo/photo.jpg?sz=128", "display_name": "Preeti", "link": "https://stackoverflow.com/users/10406012/preeti"}, "is_accepted": true, "score": 1, "last_activity_date": 1539875702, "last_edit_date": 1539875702, "creation_date": 1538115481, "answer_id": 52549435, "question_id": 52526346, "link": "https://stackoverflow.com/questions/52526346/c-pthread-running-only-10-threads-simultaneously-what-is-the-problem-here/52549435#52549435", "title": "C Pthread: Running only 10 threads simultaneously (what is the problem here)", "body": "<p>As mentioned by Lavigne958, in function threadThingy() there is deadlock caused by pthread_cond_wait() as it will acquire the lock. Again, you are trying to lock it in next line. This is causing deadlock.</p>\n\n<p>There are a few things need to check:</p>\n\n<ol>\n<li><p>You need to lock the mutex before calling pthread_cond_wait().</p></li>\n<li><p>If you solve the above issue, using multiple condition variable with the same mutex may cause further deadlock.</p></li>\n<li><p>If you are not joining the threads, it will be better to create detached threads using PTHREAD_CREATE_DETACHED attribute.</p></li>\n<li><p>The problem of N number of threads running simultaneously can be solved with one semaphore OR one condition variable(and one mutex). Example with semaphore is given below.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;unistd.h&gt;\n\nsem_t mysem;\n#define NUM_CONCURRENT_THREADS 4\n#define MAX_THREADS 40\n\nvoid *thread(void *arg)\n{\n        printf(\"Thread id %ld: started\\n\", pthread_self());\n        sleep(5); // Do some work\n        printf(\"Thread id %ld: Exiting\\n\", pthread_self());\n        sem_post(&amp;mysem);\n        return NULL;\n}\n\n\nint main()\n{\n        pthread_t t[MAX_THREADS];\n        pthread_attr_t attr;\n        int rc, i = 0;\n\n        sem_init(&amp;mysem, 0, NUM_CONCURRENT_THREADS);\n        rc = pthread_attr_init(&amp;attr);\n        rc = pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_DETACHED);\n\n        printf(\"\\nParent begin\\n\");\n        while(i &lt; MAX_THREADS)\n        {\n                sem_wait(&amp;mysem);\n                pthread_create(&amp;t[i], &amp;attr, thread, NULL);\n                i++;\n        }\n        printf(\"\\nParent end.\\n\");\n\n        sem_destroy(&amp;mysem);\n        return 0;\n}\n</code></pre></li>\n</ol>\n\n<p>Please check blog <a href=\"http://techeasyblogs.blogspot.com/\" rel=\"nofollow noreferrer\">Tech Easy</a> for more information on threads.</p>\n"}], "owner": {"reputation": 321, "user_id": 3865901, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e291da8c441ad1507f1d3530af824af?s=128&d=identicon&r=PG&f=1", "display_name": "sloeberGJ", "link": "https://stackoverflow.com/users/3865901/sloebergj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 52549435, "answer_count": 2, "score": 0, "last_activity_date": 1539875702, "creation_date": 1537997849, "question_id": 52526346, "link": "https://stackoverflow.com/questions/52526346/c-pthread-running-only-10-threads-simultaneously-what-is-the-problem-here", "title": "C Pthread: Running only 10 threads simultaneously (what is the problem here)", "body": "<p>So I'm very new to the whole concept of pthread in C but please hear me out. I have the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;unistd.h&gt;\n\n\nstatic pthread_mutex_t  mutex = PTHREAD_MUTEX_INITIALIZER;\n\nstatic pthread_cond_t   endCond = PTHREAD_COND_INITIALIZER;\nstatic pthread_cond_t   startCond = PTHREAD_COND_INITIALIZER;\n\nvoid * threadThingy(void * n){\n    pthread_cond_wait(&amp;startCond, &amp;mutex);\n    printf(\"%d: RAND: %d\\n\", *((int*)n), rand());\n\n    //Lock mutex before broadcasting to main thread\n    pthread_mutex_lock(&amp;mutex);\n    pthread_cond_broadcast(&amp;endCond);\n    pthread_mutex_unlock(&amp;mutex);\n\n\n    free(n);\n    fflush(stdout);\n    return 0;\n}\n\n\nint main(void){\n    printf(\"Starting\\n\");\n    pthread_t threads[100];\n    int i = 0;\n\n    while(i &lt; 10){\n        int *arg = malloc(sizeof(int));\n        *arg = i;\n        pthread_create(&amp;threads[i], NULL, threadThingy, arg);\n        i++;\n    }\n\n    pthread_mutex_lock(&amp;mutex);\n    pthread_cond_broadcast(&amp;startCond);\n\n    int finished = 0;\n\n    while(finished &lt;= 100){\n        pthread_cond_wait(&amp;endCond, &amp;mutex);\n\n        //Lock mutex so no other requests can come in\n        pthread_mutex_lock(&amp;mutex);\n        finished++;\n\n        int *arg = malloc(sizeof(int));\n        *arg = 11;\n        pthread_create(threads[i], NULL, threadThingy, arg);\n        i++;\n        pthread_cond_broadcast(&amp;startCond);\n        pthread_mutex_unlock(&amp;mutex);\n\n    }\n\n    printf(\"Stopping\\n\");\n\n    sleep(1000);\n}\n</code></pre>\n\n<p>The whole goal is to run (only) 10 threads simultaneously of the 100. My idea was to start 10 threads, than wait until one is finished and start another one. So I let the program wait until a thread returns, then I start a new one so the thread that just returned gets replaced. What have I missed? Because now I only get this as an output: </p>\n\n<blockquote>\n  <p>Starting \n  0: RAND: 1804289383</p>\n</blockquote>\n"}, {"tags": ["c", "ruby", "ruby-c-extension"], "answers": [{"tags": [], "owner": {"reputation": 1813, "user_id": 1047730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2435beed6cd3c5be09b77e213e4184?s=128&d=identicon&r=PG", "display_name": "codenamev", "link": "https://stackoverflow.com/users/1047730/codenamev"}, "is_accepted": true, "score": 0, "last_activity_date": 1544194694, "creation_date": 1544194694, "answer_id": 53671988, "question_id": 52525967, "link": "https://stackoverflow.com/questions/52525967/how-can-a-ruby-c-extension-store-a-proc-for-later-execution/53671988#53671988", "title": "How can a Ruby C extension store a proc for later execution?", "body": "<p>I found the answer while investigating <a href=\"https://stackoverflow.com/questions/25878944/calling-io-operations-from-thread-in-ruby-c-extension-will-cause-ruby-to-hang/53654543#53654543\">a similar issue</a>.</p>\n\n<p>As it turns out, I too was trying to use native thread signals (with <code>pthread_create</code>) which are not supported with MRI.</p>\n\n<p>TLDR; the Ruby VM is not currently (at the time of writing) thread safe. Check out <a href=\"https://silverhammermba.github.io/emberb/c/#threading\" rel=\"nofollow noreferrer\">this nice write-up on Ruby Threading</a> for a better overall understanding of how to work within these confines.</p>\n\n<p>You can use Ruby's <a href=\"https://github.com/ruby/ruby/blob/ruby_2_5/thread_pthread.c#L986\" rel=\"nofollow noreferrer\">native_thread_create(rb_thread_t *th)</a> which will use <code>pthread_create</code> behind the scenes. There are some drawbacks that you can read about in the documentation above the method definition.  You can then run the callback with Ruby's <a href=\"https://github.com/ruby/ruby/blob/ruby_2_5/thread.c#L1531\" rel=\"nofollow noreferrer\">rb_thread_call_with_gvl</a> method.  Also, I haven't done it here, but it might be a good idea to create a wrapper method so you can use <code>rb_protect</code> to handle exceptions the callback may raise (otherwise they will be swallowed by the VM).</p>\n\n<pre><code>VALUE execute_callback(VALUE callback)\n{\n    return rb_funcall(callback, rb_intern(\"call\"), 0);\n}\n\n// execute the callback when the thread receives signal\nrb_thread_call_with_gvl(execute_callback, data-&gt;callback);\n</code></pre>\n"}], "owner": {"reputation": 1813, "user_id": 1047730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2435beed6cd3c5be09b77e213e4184?s=128&d=identicon&r=PG", "display_name": "codenamev", "link": "https://stackoverflow.com/users/1047730/codenamev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 53671988, "answer_count": 1, "score": 4, "last_activity_date": 1544194694, "creation_date": 1537995633, "question_id": 52525967, "link": "https://stackoverflow.com/questions/52525967/how-can-a-ruby-c-extension-store-a-proc-for-later-execution", "title": "How can a Ruby C extension store a proc for later execution?", "body": "<p>Goal: allow c extension to receive block/proc for delayed execution while retaining current execution context.</p>\n\n<p>I have a method in c (exposed to ruby) that accepts a <code>callback</code> (via <code>VALUE hash</code> argument) or a <code>block</code>.</p>\n\n<pre><code>// For brevity, lets assume m_CBYO is setup to make a CBYO module available to ruby\nextern VALUE m_CBYO;\nVALUE CBYO_add_callback(VALUE callback)\n{\n    if (rb_block_given_p()) {\n        callback = rb_block_proc();\n    }\n\n    if (NIL_P(callback)) {\n        rb_raise(rb_eArgError, \"either a block or callback proc is required\");\n    }\n\n    // method is called here to add the callback proc to rb_callbacks\n}\nrb_define_module_function(m_CBYO, \"add_callback\", CBYO_add_callback, 1);\n</code></pre>\n\n<p>I have a struct I'm using to store these with some extra data:</p>\n\n<pre><code>struct rb_callback\n{\n    VALUE rb_cb;\n    unsigned long long lastcall;\n    struct rb_callback *next;\n};\nstatic struct rb_callback *rb_callbacks = NULL;\n</code></pre>\n\n<p>When it comes time (triggered by an epoll), I iterate over the callbacks and execute each callback:</p>\n\n<pre><code>rb_funcall(cb-&gt;rb_cb, rb_intern(\"call\"), 0);\n</code></pre>\n\n<p>When this happens I am seeing that it successfully executes the ruby code in the callback, however, it is escaping the current execution context.</p>\n\n<p>Example:</p>\n\n<pre><code># From ruby including the above extension\nCBYO.add_callback do\n    puts \"Hey now.\"\nend\n\nloop do\n    puts \"Waiting for signal...\"\n    sleep 1\nend\n</code></pre>\n\n<p>When a signal is received (via epoll) I will see the following:</p>\n\n<pre><code>$&gt; Waiting for signal...\n$&gt; Waiting for signal...\n$&gt; Hey now.\n$&gt; // process hangs\n$&gt; // Another signal occurs\n$&gt; [BUG] vm_call_cfunc - cfp consistency error\n</code></pre>\n\n<p>Sometimes, I can get more than one signal to process before the bug surfaces again.</p>\n"}, {"tags": ["c", "arrays", "string", "pointers", "malloc"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1537996098, "post_id": 52525714, "comment_id": 91991924, "body": "<code>char **argv</code> is declared in <code>main()</code>, but unused in code.  Is that your intent?"}, {"owner": {"reputation": 376, "user_id": 5574891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83d599ac673c307066b136fb44780260?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Simmons", "link": "https://stackoverflow.com/users/5574891/blake-simmons"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1537996798, "post_id": 52525714, "comment_id": 91992147, "body": "@chux that will be used later on to poplate the array with arguments from the terminal. I haven&#39;t gotten that far yet."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1537997635, "post_id": 52525714, "comment_id": 91992443, "body": "Blake Simmons, still useful to consider <a href=\"https://stackoverflow.com/questions/52525714/how-do-i-use-malloc-to-allocate-memory-to-store-an-array-of-strings?noredirect=1#comment91992147_52525714\">that</a> now as in what should happen if <code>strlen(argv[i]) &gt;= MAX_ARG_SIZE</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1537994656, "creation_date": 1537994656, "answer_id": 52525793, "question_id": 52525714, "link": "https://stackoverflow.com/questions/52525714/how-do-i-use-malloc-to-allocate-memory-to-store-an-array-of-strings/52525793#52525793", "title": "How do I use malloc() to allocate memory to store an array of strings?", "body": "<p>You've declared <code>argumentArray</code> as a two-dimensional array of <code>char</code>.  The <code>malloc</code> function returns a pointer, so you can't assign a pointer to an element of this array.  </p>\n\n<p>You need a pointer to store what's being returned.  Actually, in this case you need a pointer to a pointer, and you'll need to call <code>malloc</code> multiple times, once for an array of pointers for the arguments, then again in a loop for each argument:</p>\n\n<pre><code>char **argumentArray = malloc(MAX_NUM_OF_ARGS * sizeof(char *));\n\nfor (int i=0; i&lt;MAX_NUM_OF_ARGS; i++) {\n    argumentArray[i] = malloc(MAX_ARG_SIZE);\n    strcpy(argumentArray[i], defaultArgs);\n    printf(\"%s\\n\", argumentArray[i]);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 376, "user_id": 5574891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83d599ac673c307066b136fb44780260?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Simmons", "link": "https://stackoverflow.com/users/5574891/blake-simmons"}, "edited": false, "score": 0, "creation_date": 1537996018, "post_id": 52525872, "comment_id": 91991899, "body": "Okay, I think I see what&#39;s going on here, but I&#39;d like to ask some questions to clarify. First, why don&#39;t you need to cast malloc? Everywhere I look I am told that malloc needs to be cast to the datatype. Second, it seems like I&#39;m just making space for the pointers themselves, rather than allocating space for the pointers and the strings that they point to. Is this not correct?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 376, "user_id": 5574891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83d599ac673c307066b136fb44780260?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Simmons", "link": "https://stackoverflow.com/users/5574891/blake-simmons"}, "edited": false, "score": 0, "creation_date": 1537996178, "post_id": 52525872, "comment_id": 91991948, "body": "@BlakeSimmons &quot;Everywhere I look I am told that malloc needs to be cast to the datatype&quot; --&gt; <a href=\"https://stackoverflow.com/q/605845/2410359\">Do I cast the result of malloc?</a>.  The cast is not needed.  What is an example of a placed you looked?"}, {"owner": {"reputation": 199, "user_id": 9608876, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Carson Harmon", "link": "https://stackoverflow.com/users/9608876/carson-harmon"}, "edited": false, "score": 0, "creation_date": 1538001823, "post_id": 52525872, "comment_id": 91993628, "body": "Blake, you are correct in the fact that the malloc call I show in the picture is making space for the pointers. That is exactly what it is doing. The string I placed in the array is a string literal and I did not need to allocate space for it. If you ever do need to allocate space for a string, then you can call malloc to allocate space for the string, then store the pointer returned into the array. Hope that helps."}], "tags": [], "owner": {"reputation": 199, "user_id": 9608876, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Carson Harmon", "link": "https://stackoverflow.com/users/9608876/carson-harmon"}, "is_accepted": false, "score": 0, "last_activity_date": 1537995110, "creation_date": 1537995110, "answer_id": 52525872, "question_id": 52525714, "link": "https://stackoverflow.com/questions/52525714/how-do-i-use-malloc-to-allocate-memory-to-store-an-array-of-strings/52525872#52525872", "title": "How do I use malloc() to allocate memory to store an array of strings?", "body": "<p>Try thinking about it like this:</p>\n\n<ul>\n<li>Strings are character pointers</li>\n<li>You need an array of character pointers</li>\n</ul>\n\n<p>Here is an example where I make an array of char *. Essentially the pointer returned by malloc points to an area where char * will reside. Here is an illustration of what is going on.</p>\n\n<pre><code>/*\n    malloc_ret_ptr  ---&gt;  [ char * my_str1 | char * my_str2 |  char * my_str3 ]\n                                   |                |                 |\n                                   |                |                 |\n                                   v                v                 v\n                                  \"Thank\"           \"You\"            \"Chicago\"\n*/\n    int main() {\n\n          char * my_string = \"this is my string\";\n\n          char ** my_string_array;\n\n          my_string_array = malloc(sizeof(char*)*10); //Create an array of character pointers\n\n          //Place char * inside of char * array\n          my_string_array[0] = my_string;\n\n          return 0;\n        }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": false, "score": 2, "last_activity_date": 1537996497, "creation_date": 1537996497, "answer_id": 52526110, "question_id": 52525714, "link": "https://stackoverflow.com/questions/52525714/how-do-i-use-malloc-to-allocate-memory-to-store-an-array-of-strings/52526110#52526110", "title": "How do I use malloc() to allocate memory to store an array of strings?", "body": "<p>You cannot store an array of strings in C, as a string is a variable-length datastructure, not a simple type.<br>\nSo, decide what you want:</p>\n\n<ol>\n<li><p>An array of fixed-length buffers storing strings of fixed (maximum) length.</p>\n\n<pre><code>char (*p)[MAX_LEN] = malloc(n * sizeof *p);\n// Store the strings at p[0], p[1], \u2026, p[n - 1]\n</code></pre></li>\n<li><p>A buffer storing any number of strings consecutively.</p>\n\n<pre><code>char* p = malloc(sum_of_string_lengths + count_of_strings);\n// Now fill in the strings one after the other, including Terminator\n</code></pre></li>\n<li><p>An array of pointers to strings.</p>\n\n<pre><code>char** p = malloc(n * sizeof *p);\np[0] = strdup(source[0]);\n// ...\n// p[n - 1] = ...\n</code></pre>\n\n<p>With <code>strdup()</code> the common utility-function defined like:</p>\n\n<pre><code>char* strdup(const char* s) {\n    size_t n = strlen(s) + 1;\n    char* r = malloc(n);\n    if (r)\n        memcpy(r, s, n);\n    return r;\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 376, "user_id": 5574891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83d599ac673c307066b136fb44780260?s=128&d=identicon&r=PG&f=1", "display_name": "Blake Simmons", "link": "https://stackoverflow.com/users/5574891/blake-simmons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 909, "favorite_count": 0, "accepted_answer_id": 52525793, "answer_count": 3, "score": 0, "last_activity_date": 1537996764, "creation_date": 1537994288, "last_edit_date": 1537996764, "question_id": 52525714, "link": "https://stackoverflow.com/questions/52525714/how-do-i-use-malloc-to-allocate-memory-to-store-an-array-of-strings", "title": "How do I use malloc() to allocate memory to store an array of strings?", "body": "<p>I am trying to create a program that populates a fixed-size argument array using the arguments passed through the terminal. My first step is trying to create and populate the array of default argument strings, which I have succeeded in doing. However, I am now trying to use <code>malloc()</code> to allocate space for this array, and cannot get it to compile. I've tried everything I can think of regarding the proper syntax. I've tried doing more research into <code>malloc()</code> and how to use it for two dimensional arrays, but I haven't found any information that helps me. I'm stuck and not sure what to do next. Here is the code:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#define MAX_NUM_OF_ARGS 5\n#define MAX_ARG_SIZE 256\n\nint main(int argc, char **argv) {\n    printf(\"%s%d\\n\", \"Length: \", argc); //for debug purposes\n\n    // Make sure we don't have more than five arguments\n    if(argc &gt; MAX_NUM_OF_ARGS) {\n        printf(\"%s\", \"Too many arguments. Must enter fewer than 4.\");\n    }\n    // Populate the array\n    else{\n        char defaultArgs[] = \"defaultArgs\"; //create default argument array\n\n        //allocate memory for default array\n        char argumentArray[MAX_NUM_OF_ARGS][MAX_ARG_SIZE] =\n            (char *)malloc(MAX_NUM_OF_ARGS * MAX_ARG_SIZE * sizeof(char));\n\n        //populate array with default arguments\n        for (int i = 0; i &lt; MAX_NUM_OF_ARGS; i++) {\n            strcpy(argumentArray[i], defaultArgs);\n            printf(\"%s\\n\", argumentArray[i]);\n        }\n\n        free(argumentArray);\n        return 0;\n    }\n}\n</code></pre>\n\n<p>When I try to compile I get an invalid initializer error at the (<code>char*</code>) cast for <code>malloc()</code>. I've tried casting it to (<code>char**</code>) and (<code>char</code>) and also changing the <code>sizeof(char)</code> to <code>sizeof(char*)</code> and <code>sizeof(char**)</code>.</p>\n\n<p>I am not really sure what I am doing wrong at this point and I am at a loss as far as what to even try next.</p>\n"}, {"tags": ["c", "assembly", "embedded", "inline"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1537993985, "post_id": 52525630, "comment_id": 91991104, "body": "As you can see, <code>__asm__</code> is taking a string as an argument. So think about macro stringifying the value/ concatenating strings."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1537994624, "post_id": 52525630, "comment_id": 91991351, "body": "Just FYI, your examples are completely unsafe.  If you&#39;re going to clobber a register, you need to use Extended asm with an output constraint.  And you should definitely put multiple instructions in the same asm statement; you shouldn&#39;t assume that the compiler will put your asm statements back to back."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1537994743, "post_id": 52525630, "comment_id": 91991400, "body": "So if you&#39;re using extended asm anyway, you can use constraints to ask for <code>SOME_VALUE</code> as an immediate on whatever architecture that is.  Or just ask the compiler to put it in <code>r5</code> for you, with <code>register int foo asm(&quot;r5&quot;) = SOME_VALUE;</code> and then use it as an input.  Or if you don&#39;t care what register, then let the compiler pick."}, {"owner": {"reputation": 153, "user_id": 2976957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bba3b5d8c627b60a59f55548590a4d81?s=128&d=identicon&r=PG&f=1", "display_name": "zsnafu", "link": "https://stackoverflow.com/users/2976957/zsnafu"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1538063629, "post_id": 52525630, "comment_id": 92021587, "body": "@PeterCordes Right, it was just a dumb example.  I realize how unsafe it is.  But thank you for pointing it out.  Some one reading in the future may not realize it."}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1537996193, "post_id": 52525790, "comment_id": 91991956, "body": "Yes, but this seems like an XY problem, because that inline asm steps on the compiler&#39;s registers.  See my comments on the question; using a numeric constant as an input constraint should work too as either an immediate / literal or as a register value."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 5, "last_activity_date": 1537994647, "creation_date": 1537994647, "answer_id": 52525790, "question_id": 52525630, "link": "https://stackoverflow.com/questions/52525630/define-in-inline-assembly-in-gcc/52525790#52525790", "title": "#define in inline assembly in GCC", "body": "<p>Use some preprocessor magic for stringification of the value and the string continuation in C:</p>\n\n<pre><code>#define SOME_VALUE  0xDEADBEEF\n#define STR(x) #x\n#define XSTR(s) STR(s)\n\nvoid foo(void)\n{\n    __asm__(\"lis r5, \" XSTR(SOME_VALUE) \"@ha\");\n    __asm__(\"ori r5, r5, \" XSTR(SOME_VALUE) \"@l\");\n}\n</code></pre>\n\n<p><code>XSTR</code> will expand into the string <code>\"0xDEADBEEF\"</code>, which will get concatenated with the strings around it.</p>\n\n<p>Here is the demo:\n<a href=\"https://godbolt.org/z/2tBfoD\" rel=\"noreferrer\">https://godbolt.org/z/2tBfoD</a></p>\n"}], "owner": {"reputation": 153, "user_id": 2976957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bba3b5d8c627b60a59f55548590a4d81?s=128&d=identicon&r=PG&f=1", "display_name": "zsnafu", "link": "https://stackoverflow.com/users/2976957/zsnafu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1928, "favorite_count": 0, "accepted_answer_id": 52525790, "answer_count": 1, "score": 2, "last_activity_date": 1537994647, "creation_date": 1537993832, "question_id": 52525630, "link": "https://stackoverflow.com/questions/52525630/define-in-inline-assembly-in-gcc", "title": "#define in inline assembly in GCC", "body": "<p>I'm attempting to write inline assembly in GCC which writes a value in a #define to a register.</p>\n\n<pre><code>#define SOME_VALUE  0xDEADBEEF\n\nvoid foo(void)\n{\n    __asm__(\"lis r5, SOME_VALUE@ha\");\n    __asm__(\"ori r5, r5, SOME_VALUE@l\");\n}\n</code></pre>\n\n<p>However, I get an error when I compile:</p>\n\n<blockquote>\n  <p>undefined reference to `SOME_VALUE'</p>\n</blockquote>\n\n<p>Is there a way for the assembler to see the <code>#define</code> in the inline assembly?</p>\n\n<p>I've solved it by doing the following:</p>\n\n<pre><code>#define SOME_VALUE  0xDEADBEEF\n__asm__(\".equ SOME_VALUE,   0xDEADBEEF\");\n\nvoid foo(void)\n{\n    __asm__(\"lis r5, SOME_VALUE@ha\");\n    __asm__(\"ori r5, r5, SOME_VALUE@l\");\n}\n</code></pre>\n\n<p>However, I really don't want to duplicate the value.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1537993869, "post_id": 52525572, "comment_id": 91991062, "body": "Because printing integer as double has an undefined behavior in C."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1537993875, "post_id": 52525572, "comment_id": 91991065, "body": "Thats what you get (and others may get something else) for <i>lying</i> to <code>printf</code> by providing an argument different than what the provided specifier asks for."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1537993940, "post_id": 52525572, "comment_id": 91991086, "body": "<code>void main()</code> shoujld be <code>int main(void)</code>. If you&#39;re using <code>printf</code>, you need <code>#include &lt;stdio.h&gt;</code>. Your output should end with a newline (<code>\\n</code>). The format for <code>double</code> is <code>%f</code>; <code>%lf</code> is also accepted, but might not be recognized by older implementations."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1537994080, "post_id": 52525572, "comment_id": 91991145, "body": "The reason it behaves this way on many systems is that the initial arguments to the function are often passed in registers, and many architectures (include x86 and its derivatives) have completely different registers for integer and floating point values. So when you call <code>printf</code> with an <code>int</code>, it shoves it in a integer register, but <code>printf</code> only knows where to look based on the format code <code>%lf</code>, which tells it to check the corresponding floating point register for that argument offset, which (coincidentally) contains <code>0.0</code>; your argument ended up in a register no one was looking at."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1537998281, "post_id": 52525572, "comment_id": 91992656, "body": "The previously marked duplicate, is not a duplicate.  In that question there was no cast.  I think it is a reasonable question to ask why the cast did not appear to work."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1537999238, "post_id": 52525572, "comment_id": 91992946, "body": "@Clifford there is no cast in the first <code>a</code> either in this question , rendering the code undefined. The other cast is irrelevant"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1537999385, "post_id": 52525572, "comment_id": 91992979, "body": "Are you sure you got 0.00 and 2.00?  At <a href=\"https://onlinegdb.com/Bk-efYKKX\" rel=\"nofollow noreferrer\">onlinegdb.com/Bk-efYKKX</a> the output id <code>2.000000 0.000000</code> - i.e. the reverse order of what you have."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1537999475, "post_id": 52525572, "comment_id": 91993003, "body": "@M.M Indeed, but when I have tested the code, the second value output is 0.000000, while the first is 2.00000.  That bares explanation, and is possibly what Omkar is getting but has mis-reported."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1537999885, "post_id": 52525572, "comment_id": 91993136, "body": "@MM Upon reflection, I have re-closed it as a duplicate.  The title is clear - &quot;<i>integer when printed as a double</i>&quot;.  My result is perhaps a far more interesting result, but not specifically what is being asked here."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1538000399, "post_id": 52525572, "comment_id": 91993287, "body": "@Clifford the explanation is &quot;undefined behaviour means anything can happen&quot;, your results are an instance of &quot;anything&quot;"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1538030864, "post_id": 52525572, "comment_id": 92001331, "body": "@M.M I appreciate that of course, but it is nonetheless interesting to consider why a particular compiler might behave in a particular manner, even if that behaviour cannot/should not be relied upon.  For example I very much doubt ShadowRanger&#39;s explanation.  Occam&#39;s razor suggests something simpler and more likely."}], "owner": {"reputation": 17, "user_id": 10257727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd71810e0965220d7e41071cde4e581f?s=128&d=identicon&r=PG&f=1", "display_name": "Omkar Kadam", "link": "https://stackoverflow.com/users/10257727/omkar-kadam"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "closed_date": 1537999737, "answer_count": 0, "score": 0, "last_activity_date": 1537999617, "creation_date": 1537993603, "question_id": 52525572, "link": "https://stackoverflow.com/questions/52525572/c-language-value-of-integer-when-printed-as-a-double-value-prints-0-00-why", "closed_reason": "Duplicate", "title": "C language. Value of integer when printed as a double value prints 0.00. Why?", "body": "<pre><code>void main()\n{\n     int a=2;\n     printf(\"%lf  %lf\",a,(double)a); \n\n }\n</code></pre>\n\n<p>I ran this program but instead of printing 2.00 in both cases , I got output as  0.00 and 2.00</p>\n"}, {"tags": ["c", "arrays", "file"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1537993463, "post_id": 52525510, "comment_id": 91990876, "body": "whats the question?"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 2, "creation_date": 1537993561, "post_id": 52525510, "comment_id": 91990923, "body": "<code>fscanf(In, &quot;%p&quot;, &amp;ppPerm[i]);</code> should be <code>fscanf(In, &quot;%d&quot;, &amp;(*ppPerm)[i]);</code>"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1537993786, "post_id": 52525510, "comment_id": 91991023, "body": "@kiranBiradar Why do you post an answer as a comment?"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537993850, "post_id": 52525510, "comment_id": 91991053, "body": "@Swordfish I&#39;m using mobile. So I can&#39;t type."}, {"owner": {"reputation": 51, "user_id": 10420793, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259891924040929/picture?type=large", "display_name": "Sam Tyson", "link": "https://stackoverflow.com/users/10420793/sam-tyson"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 1, "creation_date": 1537994570, "post_id": 52525510, "comment_id": 91991329, "body": "@Kiran Biradar Thank you! I believe that did it."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": true, "score": 0, "last_activity_date": 1537994584, "creation_date": 1537994584, "answer_id": 52525772, "question_id": 52525510, "link": "https://stackoverflow.com/questions/52525510/c-read-ints-from-file-and-store-in-pointer-array/52525772#52525772", "title": "C: Read ints from file and store in pointer array", "body": "<p>Don't cast the result of <code>calloc()</code> or <code>malloc()</code> in C! It can hide errors.</p>\n\n<blockquote>\n<pre><code>int i;\nfor (i = 0; i &lt; numElements; i++) {\n    fscanf(In, \"%p\", &amp;ppPerm[i]);\n}\n</code></pre>\n</blockquote>\n\n<p>Since you want to read integers the format string should be <code>\"%i\"</code> or <code>\"%d\"</code>. To get to the Pointer to the memory you have allocated use <code>*ppPerm</code>:</p>\n\n<pre><code>size_t i;  // variables that hold an index into or the size\n           // of objects in memory should be of type size_t.\nfor (i = 0; i &lt; numElements; i++) {\n    fscanf(In, \"%p\", &amp;(*ppPerm)[i]);\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 10420793, "user_type": "registered", "profile_image": "https://graph.facebook.com/2259891924040929/picture?type=large", "display_name": "Sam Tyson", "link": "https://stackoverflow.com/users/10420793/sam-tyson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 52525772, "answer_count": 1, "score": 0, "last_activity_date": 1537994584, "creation_date": 1537993251, "last_edit_date": 1537993525, "question_id": 52525510, "link": "https://stackoverflow.com/questions/52525510/c-read-ints-from-file-and-store-in-pointer-array", "title": "C: Read ints from file and store in pointer array", "body": "<p>I am trying to read integers from a file and store them in an array. Then, I want to write those values to a different file. Reading an writing are done in a separate file from the main file, where the array was created. I cannot change the function's arguments (this is for an assignment, so the array argument must be int** ppPerm). The function is called, and the array originally created, in another file's main function. The file I am reading from looks like this:</p>\n\n<pre><code>15\n0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15\n</code></pre>\n\n<p>Where 15 is how many numbers will follow. So the chronological order of functions is:</p>\n\n<p>Array Perm is created in the main function of the main file (int* Perm = NULL). It is passed into readP() </p>\n\n<pre><code>readP(In, &amp;Perm);\n</code></pre>\n\n<p>The numbers from the file are read and stored in Perm. The same variable Perm is then passed into writeP().</p>\n\n<pre><code>writeP(Out, Perm, permLength);\n</code></pre>\n\n<p>Perm is read and written to a different file.\nI cannot change either of those lines. Somewhere along the road the array is screwed up. Here is readP().</p>\n\n<pre><code>int readP(FILE* In, int** ppPerm) {\n   int numElements = 0;\n\n   fscanf(In, \"%d\", &amp;numElements);\n\n   *ppPerm = (int*)calloc(numElements, sizeof(int));\n\n   int i;\n   for (i = 0; i &lt; numElements; i++) {\n       fscanf(In, \"%p\", &amp;ppPerm[i]);\n   }\n\n   return numElements;\n}\n</code></pre>\n\n<p>Right now, the array is completely unreadable. For whatever reason, the numbers stored are something like 0x0 then a random jumble of hexadecimals. The array is then used in writeP() to write the values to a different file:</p>\n\n<pre><code>void writeP(FILE* Out, const int* pPerm, int permLength) {\n\n    int i = 2;\n    for (i = 0; i &lt; permLength; i++) {\n        fprintf(Out, \"%d \", pPerm[i]);\n    }\n\n    return;\n}\n</code></pre>\n\n<p>int* pPerm is the same array that was passed into readP(). For some reason, using debugging, I see that pPerm contains completely different values than ppPerm did, and in some cases it seems half empty. What exactly is wrong with my functions? Why can I not store the numbers in the array correctly? And why does the array keep messing up between readP() and writeP()?</p>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 4, "creation_date": 1537993385, "post_id": 52525504, "comment_id": 91990837, "body": "<code>ptrInt = malloc(max - min);  **--&gt;&gt;** ptrInt = malloc((max - min) *sizeof *ptrInt);</code> Also,most people prefer array-notation: <code>*(ptrInt + i) = temp + i;</code> <b>--&gt;&gt;</b> <code>ptrInt[i] = temp + i;</code>"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1537993736, "post_id": 52525504, "comment_id": 91991001, "body": "You&#39;re getting a segfault because you&#39;re invoking undefined behavior by writing past the size of the memory region that you&#39;ve <code>malloc</code>ed. <code>malloc</code> accepts the number of bytes to allocate. <code>sizeof int</code> on your machine is surely larger than one byte, so simply allocating <code>max - min</code> bytes is not enough to store that many <code>int</code>s. After you fix your segfault, you&#39;re going to enter an infinite loop in <code>main</code>. <code>ptr</code> is never updated in your <code>while</code> loop."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1537994079, "post_id": 52525504, "comment_id": 91991144, "body": "If this is two separate source files, please indicate that. If not, normally all the <code>#include</code> directives go at the top of the file."}, {"owner": {"reputation": 239, "user_id": 7710222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decb994eb0d4c8d8cfc35a7e53e035ce?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir", "link": "https://stackoverflow.com/users/7710222/vladimir"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1537994210, "post_id": 52525504, "comment_id": 91991199, "body": "@wildplasser thank you, it helped."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1537994822, "post_id": 52525504, "comment_id": 91991436, "body": "There is also the corner case <code>min==max</code> , which is not caught by your check, but resulting in <code>malloc(0)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1537994441, "post_id": 52525713, "comment_id": 91991281, "body": "Is there a scenario where standard-conformant C does not have <code>int</code> wider than <code>char</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1537994508, "post_id": 52525713, "comment_id": 91991303, "body": "@ChristianGibbons Some graphics processors have been known to use the same 64-bit size for all integer types.  Unusual, but allowed by C."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1537994660, "post_id": 52525713, "comment_id": 91991369, "body": "I unfortunately don&#39;t have time to go over the standard at the moment, but isn&#39;t a <code>char</code> guaranteed to be one byte (that is, such that byte is defined by <code>CHAR_BIT</code> or some-such), and an <code>int</code> guaranteed no less than two bytes?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1537994834, "post_id": 52525713, "comment_id": 91991446, "body": "In C, a &quot;byte&quot; is at <i>least</i> 8 bits.  Research <code>CHAR_BIT</code>.  A <code>char</code> uses <code>CHAR_BIT</code> bits - one C &quot;byte&quot;.  If <code>CHAR_BIT &gt;= 16</code> then an <code>int</code> could also be 1 C &quot;byte&quot;."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1537994901, "post_id": 52525713, "comment_id": 91991484, "body": "Alright, I&#39;ll take your word on that for now.  I&#39;ll look it up in the standard later, but I trust that to be accurate."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1537995156, "post_id": 52525713, "comment_id": 91991579, "body": "@ChristianGibbons <a href=\"https://stackoverflow.com/a/5516161/2410359\">System where 1 byte != 8 bit?</a> may be useful."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1537994283, "creation_date": 1537994283, "answer_id": 52525713, "question_id": 52525504, "link": "https://stackoverflow.com/questions/52525504/segmentation-fault-on-the-border-ranges-of-int/52525713#52525713", "title": "Segmentation fault, on the border ranges of int", "body": "<p>Code allocates insufficient memory when <code>int</code> is wider than <code>char</code> - something that is very common.</p>\n\n<p>Allocate based on the size of the pointed to object.  <a href=\"https://stackoverflow.com/questions/52525504/segmetation-fault-on-the-border-ranges-of-int/52525713#comment91990837_52525504\">@wildplasser</a></p>\n\n<pre><code>int *ptrInt;\n...\n  // ptrInt = malloc(max - min);\n  ptrInt = malloc(sizeof *ptrInt * (max - min));\n  //              ^------------^   ^---------^ number of elements\n  //              +------------+-------------- size of 1 element\n</code></pre>\n"}], "owner": {"reputation": 239, "user_id": 7710222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decb994eb0d4c8d8cfc35a7e53e035ce?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir", "link": "https://stackoverflow.com/users/7710222/vladimir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 52525713, "answer_count": 1, "score": 1, "last_activity_date": 1546924492, "creation_date": 1537993201, "last_edit_date": 1546924492, "question_id": 52525504, "link": "https://stackoverflow.com/questions/52525504/segmentation-fault-on-the-border-ranges-of-int", "title": "Segmentation fault, on the border ranges of int", "body": "<p><strong>Create a function ft_range which returns an array ofints. This int array should contain all values between min and max.\nMin included - max excluded.</strong>  </p>\n\n<pre><code>#include &lt;printf.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stddef.h&gt;\n\n#include &lt;stdlib.h&gt;\n\nint *ft_range(int min, int max)\n{\n    int *ptrInt;\n    int i;\n    int temp;\n    temp = min;\n    i = 0;\n    ptrInt = NULL;\n    if (max &lt; min)\n    {\n        return (ptrInt);\n    } else\n    {\n        ptrInt = malloc(max - min);\n    }\n    while (i &lt; (max - min))\n    {\n        *(ptrInt + i) = temp + i;\n        i++; /trows segfault at i == 473742332\n    }\n    return (ptrInt);\n}\n\n\n\nint *ft_range(int min, int max);\n\nint main()\n{\n    int i = 0;\n    int min = -947483640;\n    int max =  947483640;\n    int *ptr = ft_range(min, max);\n\n    while (ptr != NULL)\n    {\n        printf(\"%d\", *ptr);\n        printf(\"%c\", '\\n');\n    }\n}\n</code></pre>\n\n<p>If i put bigger values, segfault throws also on the bigger values.\nAnd this code works perfectly on the lower values.</p>\n"}, {"tags": ["c", "gcc", "include", "compiler-flags"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1537992993, "post_id": 52525401, "comment_id": 91990684, "body": "Try with and without and compare. My bet is for zero impact."}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1537994017, "post_id": 52525401, "comment_id": 91991122, "body": "Mostly an extra time spent in linking. The linker still must read TOC to make sure there is nothing to pull from the library."}], "owner": {"reputation": 1649, "user_id": 3516684, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5e55f57a1d9ea8a126a070aa68c060de?s=128&d=identicon&r=PG&f=1", "display_name": "Sparkler", "link": "https://stackoverflow.com/users/3516684/sparkler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537992704, "creation_date": 1537992704, "question_id": 52525401, "link": "https://stackoverflow.com/questions/52525401/what-is-the-impact-of-unused-libraries-that-are-included-using-the-l-flag", "title": "What is the impact of unused libraries that are included using the -l flag?", "body": "<p>I am compiling a C project with many source files. Not all of them need all the external libraries I'm using, e.g. <code>math</code> library (<code>gcc</code> flag <code>-lm</code>), but including it for all files results in a simpler makefile.</p>\n\n<p>What is the impact on compilation/performance if I include libraries that are unused by some/most of the source files?</p>\n"}, {"tags": ["c", "string", "function"], "comments": [{"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 1, "creation_date": 1537992436, "post_id": 52525301, "comment_id": 91990421, "body": "Don&#39;t use <code>void</code> when calling a function. Just <code>check_alphabets(array_string,count);</code> is fine."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1537992484, "creation_date": 1537992484, "answer_id": 52525351, "question_id": 52525301, "link": "https://stackoverflow.com/questions/52525301/why-the-function-calls-not-getting-executed/52525351#52525351", "title": "Why the function calls not getting executed?", "body": "<p>These are not function calls:</p>\n\n<pre><code>void check_alphabets(array_string,count);\nvoid check_number(array_string,count);\nvoid check_character(array_string,count); \n</code></pre>\n\n<p>These are declarations.  The return type in front of the function name tells us this is a declaration.  When you call a function, you don't need to say what the return type is:</p>\n\n<pre><code>check_alphabets(array_string,count);\ncheck_number(array_string,count);\ncheck_character(array_string,count); \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 1, "last_activity_date": 1537992908, "last_edit_date": 1537992908, "creation_date": 1537992493, "answer_id": 52525352, "question_id": 52525301, "link": "https://stackoverflow.com/questions/52525301/why-the-function-calls-not-getting-executed/52525352#52525352", "title": "Why the function calls not getting executed?", "body": "<pre><code>void check_alphabets(array_string,count);\nvoid check_number(array_string,count);\nvoid check_character(array_string,count); \n</code></pre>\n\n<p>these lines are not function calls. YOu mean</p>\n\n<pre><code>check_alphabets(array_string,count);\ncheck_number(array_string,count);\ncheck_character(array_string,count); \n</code></pre>\n\n<p>The warning you are getting is because the compiler thinks you are trying to declare a function, but your syntax is an invalid function declaration (argument names without types)</p>\n"}, {"tags": [], "owner": {"reputation": 184, "user_id": 9154475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a0ce7d7f35ba9838e65fb67e77080592?s=128&d=identicon&r=PG&f=1", "display_name": "bMain", "link": "https://stackoverflow.com/users/9154475/bmain"}, "is_accepted": false, "score": 0, "last_activity_date": 1537992516, "creation_date": 1537992516, "answer_id": 52525359, "question_id": 52525301, "link": "https://stackoverflow.com/questions/52525301/why-the-function-calls-not-getting-executed/52525359#52525359", "title": "Why the function calls not getting executed?", "body": "<p>First, you have to learn how to use Markdown to format your code properly. Secondly, you're not calling your functions in <code>main</code>, you are only declaring them.</p>\n\n<pre><code>void check_alphabets(array_string,count);\nvoid check_number(array_string,count);\nvoid check_character(array_string,count);\n</code></pre>\n\n<p>must become</p>\n\n<pre><code>check_alphabets(array_string,count);\ncheck_number(array_string,count);\ncheck_character(array_string,count); \n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 10418143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71bbc236aae980623b825c01da2515f?s=128&d=identicon&r=PG&f=1", "display_name": "user10418143", "link": "https://stackoverflow.com/users/10418143/user10418143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1537992915, "accepted_answer_id": 52525351, "answer_count": 3, "score": -1, "last_activity_date": 1537992908, "creation_date": 1537992265, "last_edit_date": 1537992503, "question_id": 52525301, "link": "https://stackoverflow.com/questions/52525301/why-the-function-calls-not-getting-executed", "closed_reason": "Duplicate", "title": "Why the function calls not getting executed?", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nvoid check_alphabets(char array_string[],int n){\n    char alphabet_array[n];\n    int i,j,val;\n\n    int alphabet_array_counter=0;\n    for(i=0;i&lt;n;i++){\n        val=array_string[i];\n        if((val&gt;=65 &amp;&amp; val&lt;=90) || (val&gt;=97 &amp;&amp; val&lt;=122)){\n            alphabet_array[alphabet_array_counter]=array_string[i];\n            alphabet_array_counter++;\n        }\n    }\n    for(j=0;j&lt;n;j++){\n        printf(\"%c\",alphabet_array[j]);\n    }\n}\n\nvoid check_number(char array_string[],int n){\n    char number_array[n];\n    int i,j,val;\n    int number_array_counter=0;\n\n    for(i=0;i&lt;n;i++){\n        val=array_string[i];\n        if(val&gt;=30 &amp;&amp; val&lt;=39){\n            number_array[number_array_counter]=array_string[i];\n            number_array_counter++;\n        }\n    }\n       for(j=0;j&lt;n;j++){\n        printf(\"%c\",number_array[j]);\n    }\n}\n\nvoid check_character(char array_string[],int n){\n    char character_array[n];\n    int i,j,val;\n    int character_array_counter=0;\n\n    for(i=0;i&lt;n;i++){\n        val=array_string[i];\n        if((val&gt;=32 &amp;&amp; val&lt;=47) || (val&gt;=58 &amp;&amp; val&lt;=64) || (val&gt;=91 &amp;&amp; val&lt;=96) || (val&gt;=123 &amp;&amp; val&lt;=127)){\n            character_array[character_array_counter]=array_string[i];\n           character_array_counter++;\n        }\n    }\n    for(j=0;j&lt;n;j++){\n        printf(\"%c\",character_array[j]);\n    }\n\n}\n\nvoid main(){\n    int size=100;\n    char array_string[size];\n    printf(\"Enter string? \");\n    scanf(\"%s\",array_string);\n\n    int i=0,count=0;\n    while(array_string[i]!='\\0'){\n        count++;\n        i++;\n    }\n    printf(\"size is %d\",count);\n\n    void check_alphabets(array_string,count);\n    void check_number(array_string,count);\n    void check_character(array_string,count); \n\n\n}\n</code></pre>\n\n<p>I have the above piece of code . I don't know what is wrong with it .No matter what I modify The functions are not getting executed.\nI am compiling using gcc in ubuntu 18.\nBut whenever I try to compile it throws a warning which is </p>\n\n<blockquote>\n  <p>In function <code>main</code><br>\n  warning:parameter names(without types) in function declaration <code>void check_alphabets(array_string,count)</code></p>\n</blockquote>\n\n<p>this warning shows with all the calls from main.\nI googled but couldn't find any solution. </p>\n"}, {"tags": ["c", "concurrency", "atom-editor"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1537990873, "post_id": 52524933, "comment_id": 91989680, "body": "Welcome to Stack Overflow.  Please read the <a href=\"https://stackoverflow.com/tour\">About</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> pages soon.  Also, if you are learning C, do not tag a question with the <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> tag (as well, or instead); it will get you down-votes rather quickly.  If a header cannot be found, it often means there&#39;s an installation problem of some sort. Which platform are you on? Which compiler are you using? Is it only <code>&lt;sys&#47;wait.h&gt;</code> that&#39;s missing, or are other headers missing too? It&#39;s fundamental; normally, on Unix-like systems, if you have, for example, <code>&lt;stdio.h&gt;</code>, you&#39;ll also have <code>&lt;sys&#47;wait.h&gt;</code>, especially if it&#39;s got <code>&lt;sys&#47;types.h&gt;</code>."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1537990936, "post_id": 52524933, "comment_id": 91989708, "body": "Windows, linux or mac?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1537991162, "post_id": 52524933, "comment_id": 91989820, "body": "Please add the information to the question (you can always edit your own questions), and then delete the comment.  Which C compiler are you using on Windows 10?  MS Visual Studio, or MinGW, or Cygwin, or something else?  (Add the answer to this to the question too, please.)"}], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 9915782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9650ff2854e67457bb39585a9b1159?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/9915782/stefano-raneri"}, "is_accepted": false, "score": 0, "last_activity_date": 1537997059, "creation_date": 1537997059, "answer_id": 52526220, "question_id": 52524933, "link": "https://stackoverflow.com/questions/52524933/atom-io-missing-sys-wait-h-or-allow-fork/52526220#52526220", "title": "Atom.io missing sys/wait.h or allow fork()", "body": "<p>Go to the include directory of MinGW if you're under Windows or GNU linux and look for the file, btw this question is very similar to this: <a href=\"https://stackoverflow.com/questions/7841187/visual-c-doesnt-have-sys-wait-h\">Visual c++ doesn&#39;t have sys/wait.h</a></p>\n"}], "owner": {"reputation": 1, "user_id": 10355752, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_9b7hK1gg9E/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNz3VqdAAXOfXIkF_VGlwsBfAskyg/mo/photo.jpg?sz=128", "display_name": "YeOldSnake", "link": "https://stackoverflow.com/users/10355752/yeoldsnake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1163, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537997059, "creation_date": 1537990544, "last_edit_date": 1537991289, "question_id": 52524933, "link": "https://stackoverflow.com/questions/52524933/atom-io-missing-sys-wait-h-or-allow-fork", "title": "Atom.io missing sys/wait.h or allow fork()", "body": "<p>I am attempting to learn how to concurrently run algorithms in c using fork(). It appears that atom.io won't add sys/wait.h when compiling, but when my exact same code is running on a school server it will compile just fine. Is there a way to add additional header files to atom and allow for it to use fork and wait? Im running the program on windows 10, but the school database uses unix, would that effect the header files?</p>\n\n<p>This is the exact code I am running for a test with fibonacci and is compiled using GCC minGW</p>\n\n<p>I get the simple error of sys/wait.h no such file or directory and it appears that if I comment out sys/wait , \"waitpid is no longer declared in this scope\"and \"Fork was not declared in this scope\"</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n\nint main()\n{\n\nint a=0, b=1, n=a+b,i;\n\nprintf(\"Enter the number of a Fibonacci Sequence:\\n\");\nscanf(\"%d\", &amp;i);\n\npid_t pid = fork();\nif (pid == 0)\n{\n    printf(\"Child Fibonacci\\n\");\n    printf(\"0 %d \",n);\n    while (i&gt;0) {\n        n=a+b;\n        printf(\"%d \", n);\n        a=b;\n        b=n;\n        i--;\n        if (i == 0) {\n            printf(\"\\nChild ends\\n\");\n    }\n }\n}\n    else\n    {\n    printf(\"Parent is waiting for child to complete...\\n\");\n    waitpid(pid, NULL, 0);\n    printf(\"Parent ends\\n\");\n}\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list", "reverse", "singly-linked-list"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1537989326, "post_id": 52524602, "comment_id": 91988972, "body": "You aren&#39;t updating <code>prev</code> in the loop, so <code>prev</code> is always <code>NULL</code>."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1537992850, "post_id": 52524602, "comment_id": 91990613, "body": "So you loop (using <code>while</code>) until <code>current</code> is NULL. Then you do <code>head = current;</code> Now what do you think the value of <code>head</code> is?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1537992942, "post_id": 52524602, "comment_id": 91990655, "body": "Maybe look at this: <a href=\"https://stackoverflow.com/questions/13254218/reversing-a-singly-linked-list-in-c\" title=\"reversing a singly linked list in c\">stackoverflow.com/questions/13254218/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1537999684, "post_id": 52526517, "comment_id": 91993070, "body": "I don&#39;t think this answers the question \u2014 the OP has a linear list and needs to reverse it in situ, and this suggests a different structure."}, {"owner": {"reputation": 315, "user_id": 9915782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9650ff2854e67457bb39585a9b1159?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/9915782/stefano-raneri"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1538002580, "post_id": 52526517, "comment_id": 91993818, "body": "Yes i know, i&#39;m just suggesting binary search tree over linear list"}], "tags": [], "owner": {"reputation": 315, "user_id": 9915782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9650ff2854e67457bb39585a9b1159?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/9915782/stefano-raneri"}, "is_accepted": false, "score": 0, "last_activity_date": 1537998846, "creation_date": 1537998846, "answer_id": 52526517, "question_id": 52524602, "link": "https://stackoverflow.com/questions/52524602/in-this-function-to-reverse-a-linked-list-why-cant-i-reverse-the-link-with-the/52526517#52526517", "title": "In this function to reverse a linked list, why can&#39;t I reverse the link with the code shown?", "body": "<p>Why not use a binary search tree? Wich are basically like doubly linked list, i'll give you my code for that, enjoy learning:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct Structure\n{\n  int n;\n};\n\nstruct StructureNode\n{\n  struct Structure structure;\n  struct StructureNode * next;\n  struct StructureNode *prev;\n};\n\ntypedef struct StructureNode * Node;\n\n\nvoid bst(struct Structure data, Node * p )\n{\nNode pp = *p;\n  if(pp == NULL)\n  {\n    pp = (Node)malloc(sizeof(struct StructureNode));\n    pp-&gt;next = NULL;\n    pp-&gt;prev = NULL;\n    pp-&gt;structure = data;\n    *p = pp;\n  }\n  else if(data.n == pp-&gt;structure.n )\n    {\n      return;\n    }\n  else  if(data.n &gt; pp-&gt;structure.n )\n    {\n      bst(data, &amp;pp-&gt;next);\n    }\n  else\n    {\n      bst(data, &amp;pp-&gt;prev);\n    }\n\n  }\n\nvoid Read(struct Structure * p, Node list)\n{\n  printf(\"\\nOne Integer Number:\");\n  scanf(\" %d\", &amp;p-&gt;n);\n}\n\n\nvoid View(Node node)\n{\n    while(node != NULL)\n    {\n      printf(\"[ %d ]\\n\", node-&gt;structure.n);\n      node = node-&gt;next;\n    }\n\n}\nvoid displayDesc(Node p)\n{\n  if(p != NULL)\n  {\n\n  displayDesc(p-&gt;next);\n  printf(\"\\n[ %d  ]\\n\", p-&gt;structure.n);\n  displayDesc(p-&gt;prev);\n\n  }\n}\n\nvoid displayAsc(Node p)\n{\n  if(p != NULL)\n  {\n\n  displayAsc(p-&gt;prev);\n  printf(\"\\n[  %d  ]\\n\", p-&gt;structure.n);\n  displayAsc(p-&gt;next);\n\n  }\n}\n\nint Menu()\n{\n  int c;\n  printf(\"\\n****list.c by St3veR0nix*****\\n\"\n        \"\\n1) Insert a number in the Tree\\n\"\n        \"\\n2) Display in Ascending Order \\n\"\n        \"\\n3) Display in Descending Order\\n\");\n  scanf(\" %d\", &amp;c);\n\n  return c;\n}\n\nint main()\n{\nNode list = NULL;\nstruct Structure structure;\nint c;\ndo\n{\n c  = Menu();\n switch (c)\n {\n   case 1:   Read(&amp;structure, list);\n             bst(structure, &amp;list);\n\n             break;\n   case 2:\n             displayAsc(list);\n             break;\n\n   case 3:   displayDesc(list);\n             break;\n   default:  c = 0;\n }\n\n} while (c != 0);\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 10420597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb9c845ab73370f8397a84935e62f623?s=128&d=identicon&r=PG&f=1", "display_name": "Selano Mavine", "link": "https://stackoverflow.com/users/10420597/selano-mavine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1537999772, "answer_count": 1, "score": -2, "last_activity_date": 1537999985, "creation_date": 1537989058, "last_edit_date": 1537999827, "question_id": 52524602, "link": "https://stackoverflow.com/questions/52524602/in-this-function-to-reverse-a-linked-list-why-cant-i-reverse-the-link-with-the", "closed_reason": "Duplicate", "title": "In this function to reverse a linked list, why can&#39;t I reverse the link with the code shown?", "body": "<p>Can anyone explain the code below espcially the one in the loop?\nI want to why I cannot point <code>Next-&gt;next</code> to <code>current</code> to connect the node. </p>\n\n<pre><code>void reverse(){\n    Node *reverse = head;\n    Node *prev = NULL, *Next, *current;\n    current = reverse;\n\n    while(current != NULL){\n        Next = current-&gt;next; \n        current-&gt;next = prev;\n        Next-&gt;next = current;\n    }\n    head = current;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12006, "user_id": 1102056, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d3b5ee75a670827289364ba8dc89ed4?s=128&d=identicon&r=PG", "display_name": "Sufian Latif", "link": "https://stackoverflow.com/users/1102056/sufian-latif"}, "edited": false, "score": 3, "creation_date": 1537988708, "post_id": 52524495, "comment_id": 91988645, "body": "Have you tried something? Please share your code."}, {"owner": {"reputation": 351, "user_id": 10412218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad1ce79320e48f9e0b4b341d38cc551?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan N.", "link": "https://stackoverflow.com/users/10412218/bogdan-n"}, "edited": false, "score": 0, "creation_date": 1537989297, "post_id": 52524495, "comment_id": 91988953, "body": "Please add meaningful code and a problem description here. Posting a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example (MCVE)</a> that demonstrates your problem would help you get better answers. Thanks!"}, {"owner": {"reputation": 287, "user_id": 7504122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rWrNK.jpg?s=128&g=1", "display_name": "Lakshan", "link": "https://stackoverflow.com/users/7504122/lakshan"}, "edited": false, "score": 0, "creation_date": 1537989312, "post_id": 52524495, "comment_id": 91988961, "body": "i tried with <code>fgetchar()</code> but it returns too many argument error. Couldn&#39;t find good resource"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1537989763, "post_id": 52524495, "comment_id": 91989184, "body": "C does not support accessing variables of the program by name during program execution. To perform storage and retrieval of values by name, you must write your own code (or get it from somewhere) to associate strings (representing names) with values. This requires some amount of knowledge about C, algorithms, and data structures, so it is not a topic for Stack Overflow questions."}, {"owner": {"reputation": 287, "user_id": 7504122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rWrNK.jpg?s=128&g=1", "display_name": "Lakshan", "link": "https://stackoverflow.com/users/7504122/lakshan"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1537990061, "post_id": 52524495, "comment_id": 91989314, "body": "then where would i ask this question ? @EricPostpischil"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1537990144, "post_id": 52524495, "comment_id": 91989351, "body": "File format is unclear. What you want, exactly (and why) is unclear. How about, read char, check that it is &#39;r&#39;, then read digit for index, then read char and check that it is &#39;=&#39;, then read digit for value. Then... try array r[] maybe?"}, {"owner": {"reputation": 287, "user_id": 7504122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rWrNK.jpg?s=128&g=1", "display_name": "Lakshan", "link": "https://stackoverflow.com/users/7504122/lakshan"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1537990233, "post_id": 52524495, "comment_id": 91989395, "body": "i&#39;ll try thank you @hyde"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1537990794, "post_id": 52524495, "comment_id": 91989641, "body": "@PathumLakshan: Properly, one would study textbboks on C, algorithms, abd data structures."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1537991037, "post_id": 52524495, "comment_id": 91989756, "body": "You probably should have asked <i>&quot;How do I parse <code>name=value</code> pairs from a text file in C?&quot;</i> instead, with a sample text file as an example. If your name parts can start with some other letter than <code>r</code>, then include those other examples. This is definitely solvable using a loop and <code>fscanf()</code>: each iteration of the loop will then yield both the name and the value of one pair."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1537991161, "post_id": 52524495, "comment_id": 91989818, "body": "You can use an array of <code>struct</code> with two members. One member holds a string identifier (or a pointer to it) and the other holds its value."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 6527546, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wXyoHQxWp58/AAAAAAAAAAI/AAAAAAAABGk/SO3zT8uQBgw/photo.jpg?sz=128", "display_name": "Lavigne958", "link": "https://stackoverflow.com/users/6527546/lavigne958"}, "is_accepted": false, "score": 1, "last_activity_date": 1538001208, "creation_date": 1538001208, "answer_id": 52526901, "question_id": 52524495, "link": "https://stackoverflow.com/questions/52524495/assign-file-content-to-a-variable-using-c/52526901#52526901", "title": "Assign file content to a variable using C?", "body": "<p>the problem is that you ask <code>fscanf</code> to read an integer: <code>fscanf(fptr, \"%d\", &amp;n);</code>\nbut your first character in the file is a letter. so fscanf can not find an int so it fails and stop there.</p>\n\n<p>The solution is to write your assignation as one per line like that:</p>\n\n<pre><code>r1=1\nr2=2\nr3=3\n</code></pre>\n\n<p>then you ask fscanf to match the line and in place of the number you want to read to put the <code>%d</code> so it looks like that: <code>fscanf(ftpr, \"r%d=%d\\n\", &amp;n, &amp;var);</code></p>\n\n<p>By the way: <code>fgetchar</code> does not exists, so there is no way your program actually compile, but you can use: <code>fgetc</code> that takes the FILE as argument and returns the next character in the file: <code>char c = fgetc(fptr);</code></p>\n"}, {"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 1, "last_activity_date": 1538002604, "creation_date": 1538002604, "answer_id": 52527092, "question_id": 52524495, "link": "https://stackoverflow.com/questions/52524495/assign-file-content-to-a-variable-using-c/52527092#52527092", "title": "Assign file content to a variable using C?", "body": "<p>There is no magic way to do this. YOu have to do the heavy lifting yourself</p>\n\n<p>if you can reorg the file so its like Lavigne958 suggests</p>\n\n<p>Then you need to do</p>\n\n<pre><code>int val[10];\nwhile(!feof(fptr))\n{\n  fscanf(ftpr, \"r%d=%d\\n\", &amp;n, &amp;var);\n  val[n] = var;\n}\n</code></pre>\n\n<p>if they must be called r1, r2, r3, ... then do</p>\n\n<pre><code>int *val[10];\nval[1] = &amp;r1; // yes I know I missed out [0]\nval[2] = &amp;r2;\n...\n\nwhile(!feof(fptr))\n{\n  fscanf(ftpr, \"r%d=%d\\n\", &amp;n, &amp;var);\n  *(val[n]) = var;\n}\n</code></pre>\n"}], "owner": {"reputation": 287, "user_id": 7504122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rWrNK.jpg?s=128&g=1", "display_name": "Lakshan", "link": "https://stackoverflow.com/users/7504122/lakshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1538002604, "creation_date": 1537988649, "last_edit_date": 1537989513, "question_id": 52524495, "link": "https://stackoverflow.com/questions/52524495/assign-file-content-to-a-variable-using-c", "title": "Assign file content to a variable using C?", "body": "<p>How can i read file and assign the file content into variable using C ?\nfor example: <code>program.txt</code> file is contain values like this</p>\n\n<p>r1=2r2=4r3=5r4=6</p>\n\n<p>i want to read the <code>program.txt</code> file and assign r1,r2,r3,r4 values to variable.\ni tried with this example program, but it returns too many argument for <code>fgetchar()</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n  int n;\n  char c;\n  FILE *fptr;\n   if ((fptr=fopen(\"E:\\\\program.txt\",\"r\"))==NULL){\n       printf(\"Error! opening file\");\n   }\n\n   fscanf(fptr,\"%d\",&amp;n);\n   fgetchar(fptr);\n   printf(\"Value of n=%d\",n);\n   printf(\"Char is = %c\", c);\n   fclose(fptr);\n   return 0;\n }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1, "user_id": 10420532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc75137cffe3ab0f32912d6a3e4ade07?s=128&d=identicon&r=PG&f=1", "display_name": "suni", "link": "https://stackoverflow.com/users/10420532/suni"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1537988978, "post_id": 52524469, "comment_id": 91988796, "body": "can i know what&#39;s the problem with this code?"}, {"owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 0, "creation_date": 1537988981, "post_id": 52524469, "comment_id": 91988800, "body": "You aren&#39;t returning a value when <code>n &gt; 1</code> is false."}, {"owner": {"reputation": 1, "user_id": 10420532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc75137cffe3ab0f32912d6a3e4ade07?s=128&d=identicon&r=PG&f=1", "display_name": "suni", "link": "https://stackoverflow.com/users/10420532/suni"}, "reply_to_user": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 0, "creation_date": 1537989155, "post_id": 52524469, "comment_id": 91988883, "body": "@bigwillydos there is no need of returning a value , return in else statement makes the compiler to go to function call and as prod is static we can access it anywhere in the program."}, {"owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 0, "creation_date": 1537989181, "post_id": 52524469, "comment_id": 91988901, "body": "also, <code>static int prod = 1;</code> is going to give you the wrong output for multiple calls to this function"}, {"owner": {"reputation": 1, "user_id": 10420532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc75137cffe3ab0f32912d6a3e4ade07?s=128&d=identicon&r=PG&f=1", "display_name": "suni", "link": "https://stackoverflow.com/users/10420532/suni"}, "reply_to_user": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 0, "creation_date": 1537989347, "post_id": 52524469, "comment_id": 91988975, "body": "@bigwillydos i want to call this function one time only,so i intentionally had taken it"}, {"owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 1, "creation_date": 1537989520, "post_id": 52524469, "comment_id": 91989053, "body": "with regard to your comment about not returning a value, your function is defined as returning type <code>int</code> so at a minimum this is a compiler warning. But if you are looking to cease recursive calls, this is not the way to go about doing it."}, {"owner": {"reputation": 1, "user_id": 10420532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc75137cffe3ab0f32912d6a3e4ade07?s=128&d=identicon&r=PG&f=1", "display_name": "suni", "link": "https://stackoverflow.com/users/10420532/suni"}, "reply_to_user": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 0, "creation_date": 1537989636, "post_id": 52524469, "comment_id": 91989111, "body": "what&#39;s the way?"}, {"owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 0, "creation_date": 1537990295, "post_id": 52524469, "comment_id": 91989424, "body": "learning recursion, take a peak at the first section of the <a href=\"https://en.wikipedia.org/wiki/Recursion_(computer_science)\" rel=\"nofollow noreferrer\">wikipedia article on recursion</a> it covers the exact problem you are trying to tackle"}], "answers": [{"tags": [], "owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "is_accepted": true, "score": 0, "last_activity_date": 1537996352, "last_edit_date": 1537996352, "creation_date": 1537990568, "answer_id": 52524940, "question_id": 52524469, "link": "https://stackoverflow.com/questions/52524469/why-i-cant-get-factorial-of-a-number-if-i-try-it-by-taking-else-statement-as-r/52524940#52524940", "title": "why i can&#39;t get factorial of a number? if i try it by taking else statement as return prod i get the correct answer", "body": "<p>There are several problems with your code</p>\n\n<ol>\n<li>You have a return statement with no value within a function that is\ndefined as returning type <code>int</code></li>\n<li>Your function is a recursive one yet you are using a static variable\nthat will live through invocations, making the output invalid with\nmultiple function calls</li>\n<li>You are not handling the case where the input to your function is 0. This is the base case for what you are trying to achieve. You absolutely <em>must consider the base case</em> when writing a recursive function.</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>int recfac(int n)\n{\n\n    /* base case, ends recursive calls */\n    if(!n) return 1;\n\n    return n * recfac(n - 1);\n\n}\n</code></pre>\n\n<p>Tested this code <a href=\"http://tpcg.io/1VfCUx\" rel=\"nofollow noreferrer\">here</a> for cases 1 - 9 and it gave the correct output.</p>\n\n<p>EDIT: Also, <code>main</code> return type defaults to type <code>int</code> when no return type is specified and you have no return statement. You should include a <code>return 0;</code> statement to cease compiler warning.</p>\n"}], "owner": {"reputation": 1, "user_id": 10420532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc75137cffe3ab0f32912d6a3e4ade07?s=128&d=identicon&r=PG&f=1", "display_name": "suni", "link": "https://stackoverflow.com/users/10420532/suni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 1, "accepted_answer_id": 52524940, "answer_count": 1, "score": -4, "last_activity_date": 1537996352, "creation_date": 1537988503, "last_edit_date": 1537988683, "question_id": 52524469, "link": "https://stackoverflow.com/questions/52524469/why-i-cant-get-factorial-of-a-number-if-i-try-it-by-taking-else-statement-as-r", "title": "why i can&#39;t get factorial of a number? if i try it by taking else statement as return prod i get the correct answer", "body": "<p>can i know why?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint recfac(int );\n\nmain()\n{\n    int n,c;\n    printf(\"enter a number ...\\n\");\n    scanf(\"%d\",&amp;n);\n    c=recfac(n);\n    printf(\"the factorial of %d is %d \",n,c);\n}\n\nint recfac(int n)\n{\n    static int prod=1;\n\n    if(n&gt;1)\n    {\n        prod=prod*n;\n        n--;\n        return recfac(n);\n    }\n    else\n        return;\n\n    return prod;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "memory", "mmap"], "comments": [{"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 1, "creation_date": 1537988860, "post_id": 52524356, "comment_id": 91988726, "body": "You can <a href=\"https://stackoverflow.com/questions/2663456/how-to-write-a-signal-handler-to-catch-sigsegv\">mprotect the page</a> and do your accounting in the signal handler. Have you considered doing it through plain ol&#39; programming though? Maybe instead of passing the pointer around indiscriminately, you can have a <code>update_particular_page(char* ptr, size_t len)</code> memcpy equivalent that does any accounting you want."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 2, "creation_date": 1537991329, "post_id": 52524356, "comment_id": 91989896, "body": "If you have a recent enough kernel, you can use <a href=\"http://man7.org/linux/man-pages/man2/userfaultfd.2.html\" rel=\"nofollow noreferrer\">userfaultfd</a> for this. However, it sounds like keeping the actual memory map in RAM, and using a helper daemon to regularly save it to flash, would be a better match for your needs. (Especially if you have free flash available, and you can add a generation counter, basically just an int or a long, to the mapping, so subsequent copies are written at different places, and at startup one can read all possible pages to find the latest one; this would add additional wear leveling.)"}, {"owner": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "edited": false, "score": 0, "creation_date": 1538416709, "post_id": 52524356, "comment_id": 92127465, "body": "Part of the motivation for this is to free up RAM, which the helper daemon would not accomplish.  Unfortunately, using the system handler has a problem -- the exception occurs, at which point the handler is invoked, does the write manually, but when the handler returns, the same instruction is re-run, causing another exception (infinate loop)...   If, on the other hand, I enable write access in the handler before returning, then I don&#39;t get an exception on the next write..."}], "owner": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1537988017, "creation_date": 1537988017, "question_id": 52524356, "link": "https://stackoverflow.com/questions/52524356/is-it-possible-to-monitor-write-access-to-particular-page-in-linux", "title": "Is it possible to monitor write access to particular page in linux?", "body": "<p>I have a memory page for which I used mmap to map it to flash in a userspace linux program (written in c).   Currently, the memory is written to very infrequently (say once a day), so I'm fine.  </p>\n\n<p>If, however, someone down the road modifies the code to do frequent writes to this memory, they could cause premature flash failure.   I'd like to have the code self-policing, and have it detect if it's being abused, and if so take some appropriate actions.</p>\n\n<p>I'm wondering if it's possible to monitor the write access to a page in memory.</p>\n"}, {"tags": ["c", "makefile", "core-foundation"], "comments": [{"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537988012, "post_id": 52524244, "comment_id": 91988322, "body": "Move CoreFoundation.dll in the same directory as the executable. and set  LDFLAGS as -lCoreFoundation"}, {"owner": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "reply_to_user": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537988263, "post_id": 52524244, "comment_id": 91988438, "body": "Sample.c:2:10: fatal error: CoreFoundation.h: No such file or directory  #include &lt;CoreFoundation.h&gt; still this error occurs"}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537988397, "post_id": 52524244, "comment_id": 91988502, "body": "put $(LDFLAGS) flags at the end of the line and remove static"}, {"owner": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "reply_to_user": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537988621, "post_id": 52524244, "comment_id": 91988600, "body": "CC = gcc LDFLAGS = -lCoreFoundation CFLAGS = -ICIncludes  all: Sample.c \t$(CC) $(CFLAGS) -o Sample Sample.c $(LDFLAGS) i tried with this but does not work"}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537988658, "post_id": 52524244, "comment_id": 91988623, "body": "does CIncludes directory exist in the relative path?"}, {"owner": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "reply_to_user": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537988781, "post_id": 52524244, "comment_id": 91988680, "body": "means i am totaly new"}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537988852, "post_id": 52524244, "comment_id": 91988722, "body": "<a href=\"http://www.mingw.org/wiki/specify_the_libraries_for_the_linker_to_use\" rel=\"nofollow noreferrer\">here</a> some stuff the might help"}, {"owner": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "reply_to_user": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537989394, "post_id": 52524244, "comment_id": 91989007, "body": "i need .h file as well or i can compile directly against dll?"}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537989504, "post_id": 52524244, "comment_id": 91989049, "body": "you would need link against a static lib (possibly .lib ). AFAIK dll need headers for c to recognize the symbols. I believe you might be able to link against the dll statically. I haven&#39;t done this before thoough, so not too sure"}, {"owner": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "reply_to_user": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537992366, "post_id": 52524244, "comment_id": 91990378, "body": "C:\\msys64\\tmp\\ccHzvgfg.o:Sample.c:(.text+0x16): undefined reference to `_imp__CFStringMakeConstantString&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "edited": false, "score": 0, "creation_date": 1537988450, "post_id": 52524420, "comment_id": 91988525, "body": "Sample.c:2:10: fatal error: CoreFoundation.h: No such file or directory  #include &lt;CoreFoundation.h&gt; but i am getting this error i really need CoreFoundation.h file?"}, {"owner": {"reputation": 315, "user_id": 9915782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9650ff2854e67457bb39585a9b1159?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/9915782/stefano-raneri"}, "reply_to_user": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "edited": false, "score": 0, "creation_date": 1537988567, "post_id": 52524420, "comment_id": 91988570, "body": "Since it&#39;s a third-party API, you need to place it inside the headers directory of your gcc compiler"}, {"owner": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "edited": false, "score": 0, "creation_date": 1537988689, "post_id": 52524420, "comment_id": 91988634, "body": "where i get .h file of dll"}, {"owner": {"reputation": 315, "user_id": 9915782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9650ff2854e67457bb39585a9b1159?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/9915782/stefano-raneri"}, "reply_to_user": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "edited": false, "score": 0, "creation_date": 1537988744, "post_id": 52524420, "comment_id": 91988659, "body": "in my case the directory to place the dll is C:\\MinGW\\lib\\gcc\\mingw32\\6.3.0\\include"}, {"owner": {"reputation": 315, "user_id": 9915782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9650ff2854e67457bb39585a9b1159?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/9915782/stefano-raneri"}, "reply_to_user": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "edited": false, "score": 1, "creation_date": 1537988872, "post_id": 52524420, "comment_id": 91988730, "body": "You can get the open source repository from the apple opensource site: <a href=\"https://opensource.apple.com/source/CF/\" rel=\"nofollow noreferrer\">opensource.apple.com/source/CF</a>"}, {"owner": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "edited": false, "score": 0, "creation_date": 1537989097, "post_id": 52524420, "comment_id": 91988858, "body": "i need all .h file which is mention in CoreFoundation.h file?"}, {"owner": {"reputation": 315, "user_id": 9915782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9650ff2854e67457bb39585a9b1159?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/9915782/stefano-raneri"}, "reply_to_user": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "edited": false, "score": 0, "creation_date": 1537991428, "post_id": 52524420, "comment_id": 91989945, "body": "yes, is this file that are we talking about? <a href=\"https://opensource.apple.com/source/CF/CF-1151.16/CoreFoundation.h.auto.html\" rel=\"nofollow noreferrer\">opensource.apple.com/source/CF/CF-1151.16/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "edited": false, "score": 0, "creation_date": 1537991581, "post_id": 52524420, "comment_id": 91990026, "body": "i am bit confusing int that answer they does not mention .h file is require <a href=\"https://stackoverflow.com/questions/6711167/how-to-use-corefoundation-in-quicktime-sdk-for-windows\" title=\"how to use corefoundation in quicktime sdk for windows\">stackoverflow.com/questions/6711167/&hellip;</a>"}, {"owner": {"reputation": 315, "user_id": 9915782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9650ff2854e67457bb39585a9b1159?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/9915782/stefano-raneri"}, "reply_to_user": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "edited": false, "score": 0, "creation_date": 1537991971, "post_id": 52524420, "comment_id": 91990178, "body": "In the answer you mention, he said that he found the file in a folder of itunes"}, {"owner": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "edited": false, "score": 0, "creation_date": 1537992353, "post_id": 52524420, "comment_id": 91990369, "body": "now i am getting C:\\msys64\\tmp\\ccHzvgfg.o:Sample.c:(.text+0x16): undefined reference to `_imp__CFStringMakeConstantString&#39;"}, {"owner": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "edited": false, "score": 0, "creation_date": 1537992425, "post_id": 52524420, "comment_id": 91990413, "body": "where should i place .dll or should i update my makefile?"}, {"owner": {"reputation": 315, "user_id": 9915782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9650ff2854e67457bb39585a9b1159?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/9915782/stefano-raneri"}, "reply_to_user": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "edited": false, "score": 0, "creation_date": 1537996462, "post_id": 52524420, "comment_id": 91992030, "body": "try to place it inside the mingw \\include directory. Consider using the original version of the makefile, if that doesn&#39;t work try mine."}], "tags": [], "owner": {"reputation": 315, "user_id": 9915782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9650ff2854e67457bb39585a9b1159?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/9915782/stefano-raneri"}, "is_accepted": false, "score": 0, "last_activity_date": 1537988962, "last_edit_date": 1537988962, "creation_date": 1537988325, "answer_id": 52524420, "question_id": 52524244, "link": "https://stackoverflow.com/questions/52524244/how-to-compile-my-program-with-corefoundation-dll-in-window-mingw/52524420#52524420", "title": "How to Compile my program with CoreFoundation.dll in window mingw", "body": "<p>I say it should be:</p>\n\n<pre><code>$(CC) $(CFLAGS) -static -o $(LDFLAGS) Sample.c \n</code></pre>\n\n<p>Sorry if i've missunderstood the question, hope it helps</p>\n"}], "owner": {"reputation": 1, "user_id": 10420490, "user_type": "registered", "profile_image": "https://graph.facebook.com/2280075882216286/picture?type=large", "display_name": "Liza ", "link": "https://stackoverflow.com/users/10420490/liza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1537991713, "creation_date": 1537987421, "last_edit_date": 1537991713, "question_id": 52524244, "link": "https://stackoverflow.com/questions/52524244/how-to-compile-my-program-with-corefoundation-dll-in-window-mingw", "title": "How to Compile my program with CoreFoundation.dll in window mingw", "body": "<p>I need to compile a program with the <code>CoreFoundation.dll</code>.\nThis is my program code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;CoreFoundation.h&gt;\nint main () {\nCFStringRef hello = CFSTR(\"Hello, world.\");\nreturn 0;}\n</code></pre>\n\n<p>This is my <code>make</code> file:</p>\n\n<pre><code>CC = gcc\nLDFLAGS = \"CoreFoundation.dll\"\nCFLAGS = -ICIncludes\n\nall: Sample.c\n$(CC) $(CFLAGS) $(LDFLAGS) -o Sample Sample.c -static\n</code></pre>\n\n<p><strong>Problem:</strong> i'm getting the following error: </p>\n\n<blockquote>\n  <p>CoreFoundation.h not found</p>\n</blockquote>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1537986915, "post_id": 52524105, "comment_id": 91987799, "body": "I think you are using the wrong function, if you want to compare strings use strcmp. strcpy copies strings"}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1537986936, "post_id": 52524105, "comment_id": 91987808, "body": "<code>if(strcpy(desti, &quot;HK&quot;)||strcpy(desti, &quot;hk&quot;))</code> What exactly are you trying to do here?  Might want to read up on the documentation for <a href=\"https://en.cppreference.com/w/c/string/byte/strcpy\" rel=\"nofollow noreferrer\">strcpy</a>."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1537986978, "post_id": 52524105, "comment_id": 91987838, "body": "also note that strcmp returns false (0) if the strings are equal"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1537987301, "post_id": 52524105, "comment_id": 91988009, "body": "Given <code>desti[2]</code>, <code>desti</code> can never hold a string such as <code>&quot;HK&quot;</code> because you didn&#39;t leave room for the terminating <code>&#39;\\0&#39;</code> character."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1537987430, "post_id": 52524105, "comment_id": 91988065, "body": "Aside: your obsolete function definitions such as <code>con()</code> generate compiler warnings because there are no function prototypes so their return value is assumed to be <code>int</code>. Please use proper function declarations and definitions such as <code>void con(void)</code>"}, {"owner": {"reputation": 1478, "user_id": 10176717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0303515be69a1ae26d7c8f0b85687a?s=128&d=identicon&r=PG&f=1", "display_name": "amirali", "link": "https://stackoverflow.com/users/10176717/amirali"}, "edited": false, "score": 0, "creation_date": 1537987464, "post_id": 52524105, "comment_id": 91988082, "body": "It would be really better if you used better and more illustrative names for your variables."}], "answers": [{"tags": [], "owner": {"reputation": 1000, "user_id": 1971401, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/df7643e9c292928550d0bc5130917d90?s=128&d=identicon&r=PG", "display_name": "mschuurmans", "link": "https://stackoverflow.com/users/1971401/mschuurmans"}, "is_accepted": false, "score": 0, "last_activity_date": 1537987285, "last_edit_date": 1537987285, "creation_date": 1537986968, "answer_id": 52524159, "question_id": 52524105, "link": "https://stackoverflow.com/questions/52524105/c-language-string-copy-in-if-else-stament/52524159#52524159", "title": "C Language String copy in if else stament", "body": "<p>You probably want to replace <code>strcpy</code> with <code>strcmp</code></p>\n\n<p><code>strcpy(desti, \"HK\")</code> will copy the text \"HK\" into <code>desti</code> the function will succeed and since <code>strcpy</code> returns a pointer to the destination it will be a non-zero value  which wil execute the first if statement everytime.</p>\n\n<p>The man page of <a href=\"https://linux.die.net/man/3/strcpy\" rel=\"nofollow noreferrer\">strcpy</a></p>\n\n<p>Note that <code>strcmp</code> returns 0 when they are equal.</p>\n\n<p>More information on <a href=\"https://linux.die.net/man/3/strcmp\" rel=\"nofollow noreferrer\">strcmp</a></p>\n\n<p>Also note that</p>\n\n<ul>\n<li>You cannot do <code>strcpy(desti, \"HK\");</code> into a <code>char desti[2]</code>, because you didn't allocate room for the null terminator. You would have to do <code>char desti[3]</code>; if you wish to use it as a string.</li>\n</ul>\n"}], "owner": {"reputation": 29, "user_id": 9397433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd11fef97ab2e3410dd0dfb7da6fa5e1?s=128&d=identicon&r=PG&f=1", "display_name": "Ararix", "link": "https://stackoverflow.com/users/9397433/ararix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 510, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1537987285, "creation_date": 1537986704, "question_id": 52524105, "link": "https://stackoverflow.com/questions/52524105/c-language-string-copy-in-if-else-stament", "title": "C Language String copy in if else stament", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint ticket,tnotran,tran;\nchar pass[40],desti[2],cla,destina[20],clana[20];\nfloat tfare,cfare,nfare,gtnfare;\nint main(int argc, char *argv[]) {\n\nprintf(\"\\n\\n\\t\\tTicket NO.: \");\n    scanf(\"%d\",&amp;ticket);\n\n\nwhile (ticket != 0){\n\nhead();\ncon();\nsystem(\"pause\");\nsystem(\"cls\");\nnetcomp();\nout();\nsystem(\"pause\");\nsystem(\"cls\");\nprintf(\"\\n\\n\\t\\tTicket NO.: \");\n    scanf(\"%d\",&amp;ticket);\n\n\n}\nprintf(\"\\n\\n\\t\\tTotal No. of Transactions: %d\", tran);\nprintf(\"\\n\\n\\t\\tGrand Total of Net Fare: %f\", gtnfare);\n}\n\n\nhead(){\n\n\nprintf(\"\\n\\t\\tPassenger's Name: \");\n    scanf(\"%s\",&amp;pass);\n\nprintf(\"\\n\\t\\tDestination Code: \");\n    scanf(\"%s\",&amp;desti);\n\nprintf(\"\\n\\t\\tClass Code: \");\n    scanf(\"%s\",&amp;cla);\n}\ncon(){\nif(strcpy(desti, \"HK\")||strcpy(desti, \"hk\")){\n    tfare= 8500;\n    printf(\"\\n\\t\\tTicket Fare: %.2f\", tfare);\n    strcpy(destina,\"Hong Kong\");\n}\nelse if(strcpy(desti, \"BK\")||strcpy(desti, \"bk\")){\n    tfare= 7500;\n    printf(\"\\n\\t\\tTicket Fare: %.2f\", tfare);\n    strcpy(destina,\"Bangkok\");\n}\nelse if(strcpy(desti, \"KL\")||strcpy(desti, \"kl\")){\n    tfare= 7900;\n    printf(\"\\n\\t\\tTicket Fare: %.2f\", tfare);   \n    strcpy(destina,\"Kualala Lumpur\");\n}\nelse if(strcpy(desti, \"TP\")||strcpy(desti, \"tp\")){\n    tfare= 8300;\n    printf(\"\\n\\t\\tTicket Fare: %.2f\", tfare);   \n    strcpy(destina,\"Taipe\");\n}\nelse{\n    printf(\"\\n\\t\\tInvalid Input\");\n    tfare=0;    \n}\n\nif(cla== 'E'|| cla=='e'){\n    cfare= 1500;\n    printf(\"\\n\\t\\tClass Fare: %.2f\", cfare);\n    strcpy(clana,\"Economy\");\n}\nelse if(cla== 'T'|| cla=='t'){\n    cfare= 2500;\n    printf(\"\\n\\t\\tClass Fare: %.2f\", cfare);\n    strcpy(clana,\"Tourist\");\n}\nelse if(cla== 'F'|| cla=='f'){\n    cfare= 3500;\n    printf(\"\\n\\t\\tClass Fare: %.2f\", cfare);\n    strcpy(clana,\"First Class\");\n}\n}\nnetcomp(){\n    nfare = tfare+ cfare;\n    gtnfare +=nfare;\n    tran += 1;\n}\nout(){\n    printf(\"\\n\\n\\t\\tTicket NO.: %d\", ticket);\n    printf(\"\\n\\t\\tPassenger's Name: %s\", pass);\n    printf(\"\\n\\t\\tDestination: %s\", destina);\n    printf(\"\\n\\t\\tClass: %s\", clana);\n    printf(\"\\n\\t\\tNet Fare: %f\", nfare);\n\n}\n</code></pre>\n\n<p>I was creating a program that is suppose to be a travelling payment with fares and class and totals as such. it runs now the only problem is the if else statement in destination which is i require 2 characters, when i enter the other destination codes e.g kl,bk or tp it only outputs the statement in hk not the rest</p>\n"}, {"tags": ["c", "visual-studio", "optimization", "compiler-optimization"], "comments": [{"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1537986105, "post_id": 52523850, "comment_id": 91987374, "body": "I&#39;ve heard that Microsoft has added mitigations against speculative execution exploits, like Spectre, into their C++ libraries.  Those may cost a performance hit."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1537986315, "post_id": 52523850, "comment_id": 91987481, "body": "What are you using for profiling - is it VS10 profiler for the VS10 exe and VS17 profiler for the VS17 exe or is it an independent profiler"}, {"owner": {"reputation": 610, "user_id": 1011436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9faf7b5f475daa7892db2de677b340?s=128&d=identicon&r=PG", "display_name": "SoLaR", "link": "https://stackoverflow.com/users/1011436/solar"}, "edited": false, "score": 0, "creation_date": 1538113312, "post_id": 52523850, "comment_id": 92037059, "body": "Independent profiler of course, how else to correctly measure this ;) it involves massive number of test &gt;1 mil, and output or results with average, std. deviation and min and max deviation in results."}], "answers": [{"comments": [{"owner": {"reputation": 610, "user_id": 1011436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9faf7b5f475daa7892db2de677b340?s=128&d=identicon&r=PG", "display_name": "SoLaR", "link": "https://stackoverflow.com/users/1011436/solar"}, "edited": false, "score": 0, "creation_date": 1538114573, "post_id": 52524167, "comment_id": 92037444, "body": "Benchmark performed on same PC, and if silicone microcode was the cause it should be the same on both tests. Wouldn&#39;t you agree? Otherwise I do not see the point, as attacked could simply provide affected vc libs along side with his attacking program, and circumvent above patch, if patch is provided inside vc libs (or compiler). Also above attacks require knowledge of CPU specific OP&#39;s to emit cache from CPU, which would require assembly code emit, so if writing such code I would type asm code directly."}, {"owner": {"reputation": 610, "user_id": 1011436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9faf7b5f475daa7892db2de677b340?s=128&d=identicon&r=PG", "display_name": "SoLaR", "link": "https://stackoverflow.com/users/1011436/solar"}, "edited": false, "score": 0, "creation_date": 1538114580, "post_id": 52524167, "comment_id": 92037446, "body": "So to my opinion answer above shouldn&#39;t ever be the case. I am not sure even how did you get idea that these two are even related? Since my question is related to pure code compiled in different compilers, and these exploits exploit CPU architecture that can&#39;t patched simply by patching compilers (I would think attacker would also test if his program works at all before deploying it to wilderness)."}, {"owner": {"reputation": 610, "user_id": 1011436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9faf7b5f475daa7892db2de677b340?s=128&d=identicon&r=PG", "display_name": "SoLaR", "link": "https://stackoverflow.com/users/1011436/solar"}, "edited": false, "score": 0, "creation_date": 1538115523, "post_id": 52524167, "comment_id": 92037758, "body": "btw found what microsoft did in compiler related to spectre (/Qspectre): <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/qspectre?view=vs-2017\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/build/reference/&hellip;</a> You can supply this switch to mitigate possible emit of your program data from CPU cache. &quot;The /Qspectre option is off by default.&quot; ;) so this is not the case."}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "reply_to_user": {"reputation": 610, "user_id": 1011436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9faf7b5f475daa7892db2de677b340?s=128&d=identicon&r=PG", "display_name": "SoLaR", "link": "https://stackoverflow.com/users/1011436/solar"}, "edited": false, "score": 0, "creation_date": 1538398722, "post_id": 52524167, "comment_id": 92118022, "body": "Have you considered that Microsoft may have had that option on when compiling their C support DLLs?  Otherwise it would be a big hole if a main application was compiled with it on, and the libraries were compiled with it off.  I suppose you could posit that there are multiple versions, similar to debugging on/off are different versions.  But I suspect not."}, {"owner": {"reputation": 610, "user_id": 1011436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9faf7b5f475daa7892db2de677b340?s=128&d=identicon&r=PG", "display_name": "SoLaR", "link": "https://stackoverflow.com/users/1011436/solar"}, "edited": false, "score": 0, "creation_date": 1538399747, "post_id": 52524167, "comment_id": 92118610, "body": "&quot;true I didn&#39;t&quot; that being said, piece of code I was profiling that I have written doesn&#39;t use any of standard libraries features, and should compile to identical machine code representation or better with newer compilers, not worse one. I could use IDA to disassemble what difference really is, but was of thought someone already knew what it is. Will see if I have enough time this week to dig difference. Never the less managed to squeeze ~23% more speed out of decompression code now I am at ~1.5GBps DXT1, ~1GBps DXT5, so slowdown by platform tool-set v141 is negligible."}], "tags": [], "owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "is_accepted": false, "score": 3, "last_activity_date": 1537989473, "last_edit_date": 1537989473, "creation_date": 1537986988, "answer_id": 52524167, "question_id": 52523850, "link": "https://stackoverflow.com/questions/52523850/visual-studio-2017-vc-platform-toolset-v141-slower-than-v100-why/52524167#52524167", "title": "Visual Studio 2017 VC++ platform toolset v141 slower than v100, why?", "body": "<p>Exploits against Speculative Execution in CPUs have been in the news lately, with famous examples being Spectre and Meltdown.</p>\n\n<p>One way these are being addressed are in the compiler</p>\n\n<p><a href=\"https://cloudblogs.microsoft.com/microsoftsecure/2018/01/09/understanding-the-performance-impact-of-spectre-and-meltdown-mitigations-on-windows-systems/\" rel=\"nofollow noreferrer\">Understanding the performance impact of Spectre and Meltdown mitigations on Windows Systems</a></p>\n\n<p>\"Here is the summary of what [Microsoft has] found so far:</p>\n\n<p>\u2022With Windows 10 on newer silicon (2016-era PCs with Skylake, Kabylake or newer CPU), benchmarks show single-digit slowdowns, but we don\u2019t expect most users to notice a change because these percentages are reflected in milliseconds.</p>\n\n<p>\u2022With Windows 10 on older silicon (2015-era PCs with Haswell or older CPU), some benchmarks show more significant slowdowns, and we expect that some users will notice a decrease in system performance.</p>\n\n<p>\u2022With Windows 8 and Windows 7 on older silicon (2015-era PCs with Haswell or older CPU), we expect most users to notice a decrease in system performance.</p>\n\n<p>\u2022Windows Server on any silicon, especially in any IO-intensive application, shows a more significant performance impact when you enable the mitigations to isolate untrusted code within a Windows Server instance. This is why you want to be careful to evaluate the risk of untrusted code for each Windows Server instance, and balance the security versus performance tradeoff for your environment.\"</p>\n\n<p>So it is quite possible that programs recompiled with compilers containing these mitigations will take a small performance hit.</p>\n"}], "owner": {"reputation": 610, "user_id": 1011436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9faf7b5f475daa7892db2de677b340?s=128&d=identicon&r=PG", "display_name": "SoLaR", "link": "https://stackoverflow.com/users/1011436/solar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1537989473, "creation_date": 1537985603, "question_id": 52523850, "link": "https://stackoverflow.com/questions/52523850/visual-studio-2017-vc-platform-toolset-v141-slower-than-v100-why", "title": "Visual Studio 2017 VC++ platform toolset v141 slower than v100, why?", "body": "<p>I was rewriting some S3TC algorithm, and while profiling optimizations that I was testing, I was using vs2010. After I was finished writing code, decided to profile it on platform tool-set v141. Cloned separate solution, and project files as clones of original, and loaded solution into vs2017. Retargeted profiled project to platform tool-set v141, Windows SDK 10, clean and rebuilt everything, did it several times...</p>\n\n<p>Profiling resulted by drop in performance for <strong>Release</strong> version only, while Debug version had very similar values to vs2010 debug. Measured drop in <strong>Release</strong> version was ~11% and holding. Checked optimizations in project properties. And everything was exactly same as in vs2010.\nAfter which I've re-targeted back to platform tool-set v100, leaving Windows SDK 10 and rebuild everything all over again. Profiling resulted same result as vs2010 profiling. Went back to v141 registering drop of ~11% in performance. Which tells me that platform tool-set v141 has less efficient c/c++ compiler in comparison with v100 platform tool-set.</p>\n\n<p>Have someone encountered this before, and discovered the reason for such behavior newer generation of compiler has?</p>\n\n<p>Have any done any Preprocessing to file and comparing codes from both, and figuring out what v141 is missing? </p>\n\n<p>Is this downfall of excellent coders in MS compiler team, or I am missing something here?</p>\n"}, {"tags": ["c", "initialization", "glib", "finalization"], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 9915782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9650ff2854e67457bb39585a9b1159?s=128&d=identicon&r=PG&f=1", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/9915782/stefano-raneri"}, "is_accepted": false, "score": -1, "last_activity_date": 1537987619, "creation_date": 1537987619, "answer_id": 52524277, "question_id": 52523831, "link": "https://stackoverflow.com/questions/52523831/gvalue-initialization-finalization-necessity/52524277#52524277", "title": "GValue initialization/finalization necessity", "body": "<p>I dont't know much about this topic, but i googled <code>g_value_init</code> and i found these pages of GNOME developer that might be usefull: </p>\n\n<p><a href=\"https://developer.gnome.org/gobject/stable/gobject-Generic-values.html#g-value-reset\" rel=\"nofollow noreferrer\">https://developer.gnome.org/gobject/stable/gobject-Generic-values.html#g-value-reset</a></p>\n\n<p><a href=\"https://developer.gnome.org/glib/stable/glib-Basic-Types.html#gboolean\" rel=\"nofollow noreferrer\">https://developer.gnome.org/glib/stable/glib-Basic-Types.html#gboolean</a></p>\n\n<p>See if it helps</p>\n"}, {"tags": [], "owner": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "is_accepted": true, "score": 1, "last_activity_date": 1538212320, "creation_date": 1538212320, "answer_id": 52566879, "question_id": 52523831, "link": "https://stackoverflow.com/questions/52523831/gvalue-initialization-finalization-necessity/52566879#52566879", "title": "GValue initialization/finalization necessity", "body": "<p>Your current thoughts are mostly correct. <code>g_value_init()</code> must always be used to initialise a stack-allocated <code>GValue</code>. <code>g_value_unset()</code> must be used whenever a <code>GValue</code> goes out of scope, to release any type-specific data for it. <code>g_value_reset()</code> should be used if you want to reset a <code>GValue</code> to the default value \u2014 note that for some types this might mean it still points to allocated memory.</p>\n\n<p><code>g_value_unset()</code> is typically used a lot more frequently than <code>g_value_reset()</code>.</p>\n"}], "owner": {"reputation": 668, "user_id": 5010116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sIte7.jpg?s=128&g=1", "display_name": "Top Sekret", "link": "https://stackoverflow.com/users/5010116/top-sekret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 52566879, "answer_count": 2, "score": 0, "last_activity_date": 1538212320, "creation_date": 1537985506, "question_id": 52523831, "link": "https://stackoverflow.com/questions/52523831/gvalue-initialization-finalization-necessity", "title": "GValue initialization/finalization necessity", "body": "<p>When should I call <code>g_value_init</code>/<code>g_value_reset</code>?</p>\n\n<p>Currently, I'm using <code>g_value_init</code> and <code>g_value_reset</code> in all cases, but I want to know  whether it could be sped up.</p>\n\n<p>I know at least that:</p>\n\n<ul>\n<li>When using objects or boxed types, one definitely needs to call <code>g_value_reset</code>, because the GValue could have acquired a reference or duplicated in case of it being a <code>GBoxed</code>.</li>\n<li>When using elementary types like <code>guint</code> or <code>gboolean</code> (without any memory management), the <code>g_value_reset</code> call should theoretically be unnecessary, because no memory should be allocated them. I've even read the implementation, and it proves to be true. However, I am worried that the authors could introduce a change and start to allocate some memory (or just do some tracing) and then it would cause a memory leak.</li>\n</ul>\n\n<p>That's all my current research. I would like to broaden it, possibly backed by official documentation references. Thanks in advance.</p>\n"}, {"tags": ["python", "c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 7, "creation_date": 1537984866, "post_id": 52523652, "comment_id": 91986805, "body": "C and Python books can explain. These are two different languages with different syntax and rules."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1537985128, "post_id": 52523652, "comment_id": 91986932, "body": "Another format of the same question: why this snippet does not compile in assembly?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1537997737, "post_id": 52523652, "comment_id": 91992468, "body": "C and Python are <i>very</i> different languages, with very different rules.  Do not assume that <i>any</i> operators behave the same way between the two languages."}], "answers": [{"tags": [], "owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 6, "last_activity_date": 1537989435, "last_edit_date": 1537989435, "creation_date": 1537984924, "answer_id": 52523694, "question_id": 52523652, "link": "https://stackoverflow.com/questions/52523652/conditional-statement-behave-different-in-different-language/52523694#52523694", "title": "Conditional statement behave different in different language", "body": "<p>They behave differently because that's how the languages are implemented.</p>\n\n<p>With C, <code>a &gt; b &gt; c</code> is evaluated left to right. There is no concept of \"operator chaining\" (I'll get to this shortly), so the expression is evaluated as <code>(a &gt; b) &gt; c</code> which is <code>1 &gt; c</code> which is <code>false</code> (in C, logical expressions either return 1 or 0).</p>\n\n<p>In python, OTOH, <code>a &gt; b &gt; c</code> evaluates to <code>a &gt; b and b &gt; c</code> (as specified in the <a href=\"https://docs.python.org/3/reference/expressions.html#comparisons\" rel=\"nofollow noreferrer\">documentation</a> on comparisons), which turns out to be <code>True</code> in this case. </p>\n"}], "owner": {"reputation": 4627, "user_id": 4751726, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/753e26289b63b945ca709576ebb603ea?s=128&d=identicon&r=PG", "display_name": "shafik", "link": "https://stackoverflow.com/users/4751726/shafik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "closed_date": 1537984946, "accepted_answer_id": 52523694, "answer_count": 1, "score": -2, "last_activity_date": 1537989435, "creation_date": 1537984780, "last_edit_date": 1537985670, "question_id": 52523652, "link": "https://stackoverflow.com/questions/52523652/conditional-statement-behave-different-in-different-language", "closed_reason": "Duplicate", "title": "Conditional statement behave different in different language", "body": "<p>In <strong>C</strong> programming, the following code block return <strong>False</strong></p>\n\n<pre><code>int a=15, b=10,c=5;\n    if(a&gt;b&gt;c)\n    {\n        printf(\"True\");\n    }\n    else\n    {\n        printf(\"False\");\n    }\n</code></pre>\n\n<p>But in <strong>Python</strong>, the following block return <strong>True</strong>.</p>\n\n<pre><code>a = 15\nb = 10\nc = 5\nif a &gt; b &gt; c:\n    print(\"True\")\nelse:\n    print(\"False\")\n</code></pre>\n\n<p><strong>Edit:</strong> Found a solution from <a href=\"https://stackoverflow.com/questions/25753474/python-comparison-operators-chaining-grouping-left-to-right\">link</a>, it explain very well in python perspective. And in C programming perspective this <a href=\"https://stackoverflow.com/questions/52523652/conditional-statement-behave-different-in-different-language/52523694#52523694\">answer</a> explain my question very well.</p>\n"}, {"tags": ["android", "c", "qt", "android-ndk", "c-preprocessor"], "comments": [{"owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1537986593, "post_id": 52523080, "comment_id": 91987638, "body": "Why can&#39;t you use Clang?"}, {"owner": {"reputation": 425, "user_id": 9822601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b674ac7657871036668c07a4c2f0e7ff?s=128&d=identicon&r=PG&f=1", "display_name": "\u5c24\u91d1\u5bf6 \u6f22\u5b50", "link": "https://stackoverflow.com/users/9822601/%e5%b0%a4%e9%87%91%e5%af%b6-%e6%bc%a2%e5%ad%90"}, "reply_to_user": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "edited": false, "score": 0, "creation_date": 1537988941, "post_id": 52523080, "comment_id": 91988780, "body": "@DanAlbert I am getting more errors than ever . Also clang binaries are slower than gcc&#39;s binaries"}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1537989249, "post_id": 52523080, "comment_id": 91988920, "body": "You really need to stick to an old NKD version. I&#39;ve got stable results with 10 and 11"}, {"owner": {"reputation": 425, "user_id": 9822601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b674ac7657871036668c07a4c2f0e7ff?s=128&d=identicon&r=PG&f=1", "display_name": "\u5c24\u91d1\u5bf6 \u6f22\u5b50", "link": "https://stackoverflow.com/users/9822601/%e5%b0%a4%e9%87%91%e5%af%b6-%e6%bc%a2%e5%ad%90"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1537990440, "post_id": 52523080, "comment_id": 91989492, "body": "@dtech do u mean NDK ?"}], "answers": [{"tags": [], "owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "is_accepted": true, "score": 2, "last_activity_date": 1537986587, "creation_date": 1537986587, "answer_id": 52524075, "question_id": 52523080, "link": "https://stackoverflow.com/questions/52523080/android-ndk-fatal-error-stdio-h-no-such-file-or-directory-include-stdio-h/52524075#52524075", "title": "android NDK fatal error: stdio.h: No such file or directory #include &lt;stdio.h&gt;", "body": "<p>You can't invoke the tools in <code>$NDK/toolchains</code> without passing a whole bunch of flags to point them at the sysroot (enabling this sort of use case is an r19 feature).</p>\n\n<p>Use <a href=\"https://developer.android.com/ndk/guides/standalone_toolchain\" rel=\"nofollow noreferrer\">https://developer.android.com/ndk/guides/standalone_toolchain</a> to configure a toolchain for this sort of use.</p>\n"}], "owner": {"reputation": 425, "user_id": 9822601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b674ac7657871036668c07a4c2f0e7ff?s=128&d=identicon&r=PG&f=1", "display_name": "\u5c24\u91d1\u5bf6 \u6f22\u5b50", "link": "https://stackoverflow.com/users/9822601/%e5%b0%a4%e9%87%91%e5%af%b6-%e6%bc%a2%e5%ad%90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3113, "favorite_count": 0, "accepted_answer_id": 52524075, "answer_count": 1, "score": 6, "last_activity_date": 1537986587, "creation_date": 1537982382, "last_edit_date": 1537984326, "question_id": 52523080, "link": "https://stackoverflow.com/questions/52523080/android-ndk-fatal-error-stdio-h-no-such-file-or-directory-include-stdio-h", "title": "android NDK fatal error: stdio.h: No such file or directory #include &lt;stdio.h&gt;", "body": "<p>I am trying to build QPSQL driver for my Qt android project in my Archlinux which is failing constantly </p>\n\n<pre><code>configure: error: C preprocessor \"/opt/AndroidSDK/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-cpp\" fails sanity check\n</code></pre>\n\n<p>So I tried simple hello World Program :-</p>\n\n<pre><code>% /opt/AndroidSDK/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-cpp t.c\n# 1 \"t.c\"\n# 1 \"&lt;built-in&gt;\"\n# 1 \"&lt;command-line&gt;\"\n# 1 \"t.c\"\nt.c:1:19: fatal error: stdio.h: No such file or directory\n #include &lt;stdio.h&gt;\n                   ^\ncompilation terminated.\n</code></pre>\n\n<p>This means arm-linux-androideabi-cpp preprocessor is not working , Right ?\nBut my other Projects from Qt Creator and Android Studio builds and runs fine</p>\n\n<p>What should I do ? I tried updating NDK to 18 which ended up horribly as they replaced gcc with clang. So I have r17b and latest android SDK .</p>\n"}, {"tags": ["c", "arrays", "file"], "comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 2, "creation_date": 1537982201, "post_id": 52522992, "comment_id": 91985580, "body": "You&#39;re using the same indices for str and vet. You need to use 2*i and 2*i+1 for your str ones, and you need to zero-terminate the string too."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 3, "creation_date": 1537982989, "post_id": 52522992, "comment_id": 91985978, "body": "<code>str[i+1] = &quot; &quot;;</code> Your compiler isn&#39;t warning you about this?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1537983686, "post_id": 52522992, "comment_id": 91986302, "body": "from the context of your code it looks like you want this to be a string? If so, you&#39;ll need to do some kind of conversion, there&#39;s a difference between the integer <code>0</code> and the character <code>&#39;0&#39;</code>. You can use something like <a href=\"https://linux.die.net/man/3/sprintf\" rel=\"nofollow noreferrer\"><code>sprintf</code></a> or add <code>&#39;0&#39;</code> to each value of your array."}, {"owner": {"reputation": 691, "user_id": 5634596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0dedad9d397244beffadafbc5b3a8fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Zkk", "link": "https://stackoverflow.com/users/5634596/zkk"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1537984365, "post_id": 52522992, "comment_id": 91986588, "body": "@Rup Thanks a lot! I was overwriting the values. Now it&#39;s clean for me"}, {"owner": {"reputation": 691, "user_id": 5634596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0dedad9d397244beffadafbc5b3a8fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Zkk", "link": "https://stackoverflow.com/users/5634596/zkk"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1537984381, "post_id": 52522992, "comment_id": 91986593, "body": "@Shawn Not! I&#39;m using codeBlokcs in Windows 10"}, {"owner": {"reputation": 691, "user_id": 5634596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0dedad9d397244beffadafbc5b3a8fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Zkk", "link": "https://stackoverflow.com/users/5634596/zkk"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1537984437, "post_id": 52522992, "comment_id": 91986617, "body": "@yano Thanks a lot for the link, a very good contribution!"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1537984335, "post_id": 52523251, "comment_id": 91986570, "body": "I suggest terminating the string with <code>str[2*i-1] = &#39;\\0&#39;;</code> to overwrite the unwanted final trailing space."}, {"owner": {"reputation": 691, "user_id": 5634596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0dedad9d397244beffadafbc5b3a8fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Zkk", "link": "https://stackoverflow.com/users/5634596/zkk"}, "edited": false, "score": 0, "creation_date": 1537984727, "post_id": 52523251, "comment_id": 91986746, "body": "Using <code>[i]</code> and [i+1]` I was overwriting the value. Now it&#39;s clear for me. Thank&#39;s a lot for you help @kiran!"}], "tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": false, "score": 2, "last_activity_date": 1537985803, "last_edit_date": 1537985803, "creation_date": 1537983034, "answer_id": 52523251, "question_id": 52522992, "link": "https://stackoverflow.com/questions/52522992/how-to-pass-values-from-an-integer-array-to-string-array-with-blank-spaces-in-c/52523251#52523251", "title": "How to pass values from an integer array to string array with blank spaces in C", "body": "<p>You are overwriting the <code>' '</code> with next number and <code>str[i+1] = \" \";</code> is wrong you need to use single quotes <code>' '</code>. Once you are done with the copying <em>null</em> <code>\\0</code> terminate the string as below.</p>\n\n<pre><code>int i = 0;\nfor(i=0; i&lt;5; i++){\n    str[2*i] = vet[i]+'0';\n    str[2*i+1] = ' '; //blank space\n}\nstr[2*i-1] = '\\0'; // Append \\0 char here.\nprintf(\"%s\", str);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1537987336, "post_id": 52524042, "comment_id": 91988029, "body": "You probably want to check this <a href=\"https://android.googlesource.com/kernel/lk/+/qcom-dima-8x74-fixes/lib/libc/itoa.c\" rel=\"nofollow noreferrer\">itoa implementation</a>"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1537988454, "post_id": 52524042, "comment_id": 91988528, "body": "It works because you have used <code>calloc</code> which internally sets all the bytes to &#39;0&#39; since you are overwriting <code>\\0</code> with <code>&#39; &#39;</code> (<code>str[strlen(str)] = &#39; &#39;;</code>)"}, {"owner": {"reputation": 64, "user_id": 10415283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4851c2653364af63cc40f39970d0594?s=128&d=identicon&r=PG&f=1", "display_name": "Morten Myrland", "link": "https://stackoverflow.com/users/10415283/morten-myrland"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1537988753, "post_id": 52524042, "comment_id": 91988665, "body": "I see. itoa is not a standard C function. Edited the answer with <code>sprintf()</code> instead. And yes, that was the reason I used calloc. Just to avoid having to deal with the null terminator"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1537988840, "post_id": 52524042, "comment_id": 91988718, "body": "Rather than iterate over the <code>str[]</code> repeatedly with <code>strlen()</code>, code code use the return value of <code>sprintf()</code> --&gt; <code>char *p = str; for(i=0; i&lt;5; i++){ p += sprintf(p, &quot;%d &quot;, vet[i]); }</code>."}, {"owner": {"reputation": 64, "user_id": 10415283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4851c2653364af63cc40f39970d0594?s=128&d=identicon&r=PG&f=1", "display_name": "Morten Myrland", "link": "https://stackoverflow.com/users/10415283/morten-myrland"}, "edited": false, "score": 0, "creation_date": 1537989708, "post_id": 52524042, "comment_id": 91989155, "body": "Indeed chux! This makes it much better. Also no need for calloc anymore. Edited answer"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1537991689, "post_id": 52524042, "comment_id": 91990072, "body": "<code>str[strlen(str) - 1] = &#39;\\0&#39;;</code> to remove the final <code>&#39; &#39;</code> is OK.  <code>p[-1] = &#39;\\0&#39;;</code> is a quick alternative.  Many possibilities."}, {"owner": {"reputation": 64, "user_id": 10415283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4851c2653364af63cc40f39970d0594?s=128&d=identicon&r=PG&f=1", "display_name": "Morten Myrland", "link": "https://stackoverflow.com/users/10415283/morten-myrland"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1537992955, "post_id": 52524042, "comment_id": 91990661, "body": "@chux Interesting. Didn&#39;t know you could index using negative numbers. I&#39;m not used to working with pointer incrementation. Hence my love for inefficient use of <code>strlen()</code>"}, {"owner": {"reputation": 691, "user_id": 5634596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0dedad9d397244beffadafbc5b3a8fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Zkk", "link": "https://stackoverflow.com/users/5634596/zkk"}, "edited": false, "score": 0, "creation_date": 1538163724, "post_id": 52524042, "comment_id": 92062045, "body": "remembering that it is necessary to increment the pointer <code>p</code>: <code>p += sprintf(p, &quot;%d &quot;, vet[i]);</code>"}, {"owner": {"reputation": 691, "user_id": 5634596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0dedad9d397244beffadafbc5b3a8fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Zkk", "link": "https://stackoverflow.com/users/5634596/zkk"}, "edited": false, "score": 0, "creation_date": 1538163739, "post_id": 52524042, "comment_id": 92062057, "body": "Thank you guys for the help!"}], "tags": [], "owner": {"reputation": 64, "user_id": 10415283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4851c2653364af63cc40f39970d0594?s=128&d=identicon&r=PG&f=1", "display_name": "Morten Myrland", "link": "https://stackoverflow.com/users/10415283/morten-myrland"}, "is_accepted": true, "score": 1, "last_activity_date": 1537989602, "last_edit_date": 1537989602, "creation_date": 1537986447, "answer_id": 52524042, "question_id": 52522992, "link": "https://stackoverflow.com/questions/52522992/how-to-pass-values-from-an-integer-array-to-string-array-with-blank-spaces-in-c/52524042#52524042", "title": "How to pass values from an integer array to string array with blank spaces in C", "body": "<p><code>str[i] = vet[i]+'0'</code> This is a very hacky way of doing this and will ONLY work for the numbers 0-9. Here's why if you don't already know:</p>\n\n<p>The numbers 0-9 got decimal values, well, 0-9 obviously. Here's the decmial values for the ASCII characters for 0-9</p>\n\n<pre><code>'0' = 48\n'1' = 49\n'2' = 50\n'3' = 51\n'4' = 52\n'5' = 53\n'6' = 54\n'7' = 55\n'8' = 56\n'9' = 57\n</code></pre>\n\n<p>So by putting for example <code>4 +'0'</code> into the char array you are actually adding 52. The formating <code>%s</code> is what makes printf interpret this as an ASCII code instead of an integer. You can try to do <code>str[0] = 52;</code> and that would still print the character 4 as the first character in the string if used with <code>%s</code></p>\n\n<p>Now if you do <code>10 + '0'</code> you will add 58, which is the ASCII code for <code>:</code></p>\n\n<p>To get around this you can use the function <code>sprintf()</code>\nIt can print the number as a string into the provided buffer. Keep in mind that 10 does not exist as one character but is instead a string containing 1 and 0. Example code:</p>\n\n<pre><code>FILE *myFile;\n\nchar str[80];\nchar *p = str;\n\nint vet[5] = {0, 1, 2, 3, 4};\nint i;\n\nfor(i=0; i&lt;5; i++){\n    //Take the number at vet[i] and print it as a string to the buffer.\n    //The pointer is increased by the amount of characters written\n    p = sprintf(p, \"%d \", vet[i]);\n}\n\n//Remove trailing space\nstr[strlen(str) - 1] = '\\0';\n\nprintf(\"%s\", str);\n\nif(!(myFile = fopen(\"file.txt\",\"w\"))){\n    printf(\"Error!\\n\");\n    exit(1);\n}\n\nfprintf(myFile, str);\nfclose(myFile);\n</code></pre>\n\n<p>This should work for any number in the vet array</p>\n"}], "owner": {"reputation": 691, "user_id": 5634596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0dedad9d397244beffadafbc5b3a8fa3?s=128&d=identicon&r=PG&f=1", "display_name": "Zkk", "link": "https://stackoverflow.com/users/5634596/zkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 52524042, "answer_count": 2, "score": -1, "last_activity_date": 1537989602, "creation_date": 1537982043, "last_edit_date": 1537982847, "question_id": 52522992, "link": "https://stackoverflow.com/questions/52522992/how-to-pass-values-from-an-integer-array-to-string-array-with-blank-spaces-in-c", "title": "How to pass values from an integer array to string array with blank spaces in C", "body": "<p>I have my <code>int array</code> and my array of <code>char</code>:</p>\n\n<pre><code>int arr[5] = { 0, 1, 2, 3, 4};\nchar str[80];\n</code></pre>\n\n<p>So, I'm trying to pass the <code>int array</code> values to my <code>char array</code> with blank spaces, because I'll insert this values inside a <code>FILE</code>.</p>\n\n<p>So, my <code>char array</code> should be like this: <code>0 1 2 3 4 5</code> (with blank spaces).</p>\n\n<p>How I can do this?</p>\n\n<p>I can pass the <code>int</code> values to my <code>char array</code>, but without blank spaces. This is my code:</p>\n\n<pre><code>FILE *myFile;\nchar str[80],c;\nint vet[5] = { 0, 1, 2, 3, 4};\nint i;\n\nfor(i=0; i&lt;10; i++){\n    str[i] = vet[i]+'0';\n    str[i+1] = \" \"; //blank space\n}\n\nprintf(\"%s\", str);\n\nif(!(myFile = fopen(\"file.txt\",\"w\"))){\n  printf(\"Error!\\n\");\n  exit(1);\n}\n\nfprintf(myFile, str);\nfclose(myFile);\n</code></pre>\n"}, {"tags": ["c", "windows", "directx"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1537981501, "post_id": 52522709, "comment_id": 91985249, "body": "<code>GetStockObject</code> comes out of gdi32.dll. You <i>are</i> linking its import library with your program, <i>right</i> ?"}, {"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 0, "creation_date": 1537982091, "post_id": 52522709, "comment_id": 91985530, "body": "Read about difference between <i>GetMessage</i> and <i>PeekMessage</i> if you want to execute code below <code>while(GetMessage()) {}</code> loop."}], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 10415283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4851c2653364af63cc40f39970d0594?s=128&d=identicon&r=PG&f=1", "display_name": "Morten Myrland", "link": "https://stackoverflow.com/users/10415283/morten-myrland"}, "is_accepted": false, "score": 1, "last_activity_date": 1537981600, "creation_date": 1537981600, "answer_id": 52522880, "question_id": 52522709, "link": "https://stackoverflow.com/questions/52522709/window-gui-for-directx-game-seems-to-be-faulty/52522880#52522880", "title": "Window GUI for DirectX Game seems to be faulty", "body": "<p>You need to link gdi32.lib when you compile <code>-lgdi32</code></p>\n\n<p><a href=\"https://stackoverflow.com/questions/1340824/undefined-reference-to-getstockobject4\">Undefined reference to GetStockObject@4</a></p>\n"}], "owner": {"reputation": 337, "user_id": 7696058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uUdTY.jpg?s=128&g=1", "display_name": "tklustig", "link": "https://stackoverflow.com/users/7696058/tklustig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1538358055, "creation_date": 1537980865, "last_edit_date": 1538358055, "question_id": 52522709, "link": "https://stackoverflow.com/questions/52522709/window-gui-for-directx-game-seems-to-be-faulty", "title": "Window GUI for DirectX Game seems to be faulty", "body": "<p>I wanna developp a game using DirectX in Windows10. I use to write code with CodeBlocks. Following code will throw out error like this:</p>\n\n<pre><code>undefined reference to `GetStockObject@4'\n</code></pre>\n\n<p>What is problem with this Windowsfunction? I don't have to initialize or to write this function seperatly, don't I? Commenting out error code will compile code, but there is no gui...\nHere is code:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include\"Frame.h\"\n//global definitions\nBOOL done;\nint Spiel_Zustand;\nHWND hwnd;\n\n//Function:CallBack\nLRESULT CALLBACK WindowProc (HWND hwnd,UINT message, WPARAM wparam,LPARAM lparam)\n{\n    switch(message)\n    {\n    case WM_DESTROY :\n    {\n        done=TRUE;\n        PostQuitMessage(0);\n        return 0;\n    }\n    break;\n    case WM_KEYDOWN:\n        switch(wparam)\n        {\n        case VK_ESCAPE:\n        {\n            PostMessage(hwnd,WM_CLOSE,0,0);\n            return 0;\n        }\n        break;\n        }\n        break;\n    default:\n        break;\n\n    }//End of switch\n    return DefWindowProc(hwnd,message,wparam,lparam);\n}//End of CallBack\n\n//Function:Start\nint WINAPI WinMain(HINSTANCE hinst,HINSTANCE hprevinst,LPSTR lpcmdline,int ncmdshow)\n{\n    WNDCLASSEX winclass;\n    MSG message;\n    const char szclassname[]=\"Klassenname\";\n    DWORD loop_start_time;\n    winclass.cbSize=sizeof(WNDCLASSEX);\n    winclass.style=CS_HREDRAW|CS_VREDRAW;\n    winclass.lpfnWndProc=WindowProc;\n    winclass.cbClsExtra=0;\n    winclass.cbWndExtra=0;\n    winclass.hInstance=hinst;\n    winclass.hIcon=LoadIcon(NULL,IDI_APPLICATION);\n    winclass.hCursor=LoadCursor(NULL,IDC_ARROW);\n    winclass.hbrBackground=(HBRUSH)GetStockObject(WHITE_BRUSH);//this will throw out error\n    winclass.lpszClassName=szclassname;\n    winclass.hIconSm=LoadIcon(NULL,IDI_APPLICATION);\n    if(!RegisterClassEx(&amp;winclass))\n        return 0;\n    //Create handle of windows ans save it globally\n    if(!(hwnd=CreateWindowEx(NULL,szclassname,\"3D Gameprograming - Title\",WS_POPUPWINDOW|WS_VISIBLE,0,0,400,300,NULL,NULL,hinst,NULL)))\n        return 0;\n    done=FALSE;\n    Spiel_Zustand=SPIEL_AUSWAHL;\n    //Phase 1.1:\n    Spiel_Initialisieren();\n    //Phase 1.2:: Main Looping\n    while(!done)\n    {\n        //Any message to handle?\n        while(GetMessage(&amp;message,NULL,0,0))\n        {\n            TranslateMessage(&amp;message);\n            DispatchMessage(&amp;message);\n        }\n        //Start time of Main Loop\n        loop_start_time=GetTickCount;\n        switch(Spiel_Zustand)\n        {\n        case SPIEL_AUSWAHL:\n        {\n            //[....]\n            Spiel_Zustand=SPIEL_START;\n        }\n        break;\n        case SPIEL_START:\n        {\n            //[...]\n            Spiel_Zustand=SPIEL_LAEUFT;\n        }\n        break;\n        case SPIEL_LAEUFT:\n        {\n            //waiting for User input\n            //Manage User input\n            //Artificial Intelligence and game logic\n            //Rendering Frame\n        } break;\n        case SPIEL_NEUSTART:\n        {\n            //[...]\n            Spiel_Zustand=SPIEL_START;\n        }\n        break;\n        default:\n            break;\n        }//End of switch\n        //Restricting Frame rate\n        while((GetTickCount()-loop_start_time)&lt;40);\n    }//End of Main Looping\n    //Phase 1.3\n    Spiel_Beenden();\n    return message.wParam;\n}//End of Start\n\n\n//Phase 2.1\nint Spiel_Initialisieren(void)\n{\n//ToDO:initializations etc..\n    return 1;\n}\n//Phase 2.2\nint Spiel_Beenden(void)\n{\n    //ToDO:Free Memory etc..\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "scanf", "equality"], "comments": [{"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 0, "creation_date": 1537980907, "post_id": 52522606, "comment_id": 91984944, "body": "Pls complete code - with variable declarations"}, {"owner": {"reputation": 1732, "user_id": 9994983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/932949dc143ce7e96b7f4704594c9e84?s=128&d=identicon&r=PG&f=1", "display_name": "Alex G", "link": "https://stackoverflow.com/users/9994983/alex-g"}, "edited": false, "score": 1, "creation_date": 1537981194, "post_id": 52522606, "comment_id": 91985095, "body": "Your code is correct for each case. Check how you combine them."}, {"owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "edited": false, "score": 0, "creation_date": 1537981259, "post_id": 52522606, "comment_id": 91985126, "body": "small observation. You say <i>operand</i>, what you mean is <i>operator</i>"}, {"owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "edited": false, "score": 0, "creation_date": 1537981834, "post_id": 52522606, "comment_id": 91985404, "body": "I just tried this and it works for me. Could you please the output of running your program end-to-end ?"}, {"owner": {"reputation": 147, "user_id": 4008319, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/OJbXB.png?s=128&g=1", "display_name": "Roemerdt", "link": "https://stackoverflow.com/users/4008319/roemerdt"}, "edited": false, "score": 0, "creation_date": 1537981983, "post_id": 52522606, "comment_id": 91985473, "body": "Each time an equation is entered and calculated the program terminates when it is done."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1537982235, "post_id": 52522606, "comment_id": 91985605, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1537982306, "post_id": 52522606, "comment_id": 91985643, "body": "The <code>%c</code> conversion specification doesn&#39;t skip leading spaces; <code>%d</code> and most others (all except <code>%[\u2026]</code> scan sets and <code>%n</code>) do skip leading spaces.  You should add a suitable sprinkling of spaces in the formats to allow corresponding zero-or-more spaces in the input.  Do NOT use trailing white space in a <code>scanf()</code> format.  And your <code>12+13</code> shows"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1537982668, "post_id": 52522606, "comment_id": 91985823, "body": "I think you&#39;d do better reading lines of characters (<a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fgets.html\" rel=\"nofollow noreferrer\"><code>fgets()</code></a> or POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html\" rel=\"nofollow noreferrer\"><code>getline()</code></a>) and then use <code>sscanf()</code> (possibly in several attempts) to parse the strings.  This allows you to print the input lines, and report the errors more coherently \u2014 and often makes life easier for line-based input."}], "answers": [{"tags": [], "owner": {"reputation": 147, "user_id": 4008319, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/OJbXB.png?s=128&g=1", "display_name": "Roemerdt", "link": "https://stackoverflow.com/users/4008319/roemerdt"}, "is_accepted": false, "score": 0, "last_activity_date": 1537985105, "creation_date": 1537985105, "answer_id": 52523741, "question_id": 52522606, "link": "https://stackoverflow.com/questions/52522606/scanf-behaving-odd-for-specific-case/52523741#52523741", "title": "Scanf() behaving odd for specific case", "body": "<p>My code was broken because of the code I had for the 3rd and 4th case.</p>\n\n<p>I fixed it by combining the code for case 3 4 5 and 6.</p>\n\n<pre><code>if(scanf(\"%d%c\", &amp;digit1, &amp;operator) == 2) {\n    if(scanf(\"%d=x\", &amp;digit2) == 1) {\n        if(operator == '+') {\n            printf(\"x=%d\", (digit1+digit2));\n            exit(0);\n        } else {\n            printf(\"x=%d\", (digit1-digit2));\n            exit(0);\n        }\n    } else if(scanf(\"x=%d\", &amp;digit2) == 1) {\n        if(operator == '+') {\n            printf(\"x=%d\", (digit2-digit1));\n            exit(0);\n        } else {\n            printf(\"x=%d\", (digit1-digit2));\n            exit(0);\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 4008319, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/OJbXB.png?s=128&g=1", "display_name": "Roemerdt", "link": "https://stackoverflow.com/users/4008319/roemerdt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537985105, "creation_date": 1537980397, "last_edit_date": 1537981054, "question_id": 52522606, "link": "https://stackoverflow.com/questions/52522606/scanf-behaving-odd-for-specific-case", "title": "Scanf() behaving odd for specific case", "body": "<p>I've got some C code that accepts simple equations <strong>(with no spaces)</strong> in 6 different formats.</p>\n\n<pre><code>x + int = int\nx - int = int\nint + x = int\nint - x = int\nint + int = x\nint - int = x\n</code></pre>\n\n<p>I'm using scanf to extract the numbers in the equations, which works for the first 4 cases, but doesn't for the last 2. And I have no idea why.</p>\n\n<p>For example. For the first 2 formats I'm using this:</p>\n\n<pre><code>int digit1, digit2;\nchar operand;\nif(scanf(\"x%c%d=%d\", &amp;operand, &amp;digit1, &amp;digit2) == 3) {\n    if(operand == '+') {\n        printf(\"x=%d\", (digit2-digit1));\n        exit(0);\n    } else {\n        printf(\"x=%d\", (digit2+digit1));\n        exit(0);\n    }\n}\n</code></pre>\n\n<p>And this works.<br>\n<br></p>\n\n<p>For the last two formats I'm using this (very similar) code:</p>\n\n<pre><code>int digit1, digit2;\nchar operand;\nif(scanf(\"%d%c%d=x\", &amp;digit1, &amp;operand, &amp;digit2) == 3) {\n    if(operand == '+') {\n        printf(\"x=%d\", (digit1+digit2));\n        exit(0);\n    } else {\n        printf(\"x=%d\", (digit1-digit2));\n        exit(0);\n    }\n}\n</code></pre>\n\n<p>And this doesn't work as expected for some reason.</p>\n\n<p>I tried some different things and I found that scanf() skips the first digit and the math operator. This results in the if statement not being true because now scanf() only returns 2, because it sets digit1 to the second digit, operand to the '=' sign and then cannot find anymore digits.</p>\n\n<p>My question is why is scanf() not \"seeing\" the first digit.</p>\n\n<p>For this example input</p>\n\n<pre><code>10+12=x\n</code></pre>\n\n<p>Current behaviour:</p>\n\n<pre><code>digit1 = 12\noperand = '='\ndigit2 = 0\n</code></pre>\n\n<p>Desired behaviour:</p>\n\n<pre><code>digit1 = 10\noperand = '+'\ndigit2 = 12\n</code></pre>\n"}, {"tags": ["c", "multithreading", "mutex"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 3, "creation_date": 1537999207, "post_id": 52522512, "comment_id": 91992936, "body": "In the specific case of only one producer and only one consumer, and given a queue structure with head index only accesed by producer and tail only by consumer, you can get away without the mutex."}], "answers": [{"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1537982638, "post_id": 52522598, "comment_id": 91985807, "body": "Say there&#39;s 8 spaces in the buffer. Then not_full is initialized to 8 and not_empty is initialized to 0. Each space in the buffer is clearly set aside for one thread or the other (with an empty buffer, all to producer). Each thread turns over a space to the other only when it&#39;s done with it. If there&#39;s a problem with the two threads running concurrently, you haven&#39;t explained what it is."}, {"owner": {"reputation": 1630, "user_id": 519285, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cebbdadcfd4d83353f776c29bc618c07?s=128&d=identicon&r=PG", "display_name": "ACRL", "link": "https://stackoverflow.com/users/519285/acrl"}, "edited": false, "score": 0, "creation_date": 1537983174, "post_id": 52522598, "comment_id": 91986074, "body": "But the producer thread should be able to produce as many items as there are spaces in the circular buffer.  Once it is full the producer thread will be prevented from producing any more until the consumer thread has consumed some. My point is that as long as they are not accessing the same location in the circular buffer, what is the harm in letting them both access it?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 1630, "user_id": 519285, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cebbdadcfd4d83353f776c29bc618c07?s=128&d=identicon&r=PG", "display_name": "ACRL", "link": "https://stackoverflow.com/users/519285/acrl"}, "edited": false, "score": 1, "creation_date": 1537990000, "post_id": 52522598, "comment_id": 91989287, "body": "@ACRL you are correct in concluding that the semaphores manage the queue count just fine on their own.  The mutex is there to prevent corruption when performing operations on the queue, eg: &#39;/* Increment tail offset and wrap if necessary */&#39;  Think about it - with several producer and consumer threads, and the queue half-full, there could be many threads trying to manipulate the queue indices in parallel, resulting in TOCTTOU.... &#39;incidents&#39;"}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 0, "last_activity_date": 1537980362, "creation_date": 1537980362, "answer_id": 52522598, "question_id": 52522512, "link": "https://stackoverflow.com/questions/52522512/do-i-need-a-mutex-when-using-a-circular-buffer-and-the-producer-consumer-desig/52522598#52522598", "title": "Do I need a Mutex when using a circular buffer and the Producer / Consumer design pattern", "body": "<blockquote>\n  <p>My Question is do I really need the mutex?</p>\n</blockquote>\n\n<p>Yes, you do.</p>\n\n<p>Without the mutex, since you initialize your <code>not_full_semaphore</code> to a value that's potentially greater than one, in this code:</p>\n\n<pre><code>while(true) {\n    item = produce_item();\n\n    sem_wait(&amp;not_full_semaphore);\n\n    // can reach here while the consumer thread is\n    // accessing the circular buffer\n\n    // but this mutex prevents both threads from\n    // accessing the circular buffer simultaneously\n    mutex_lock(&amp;circular_buffer_mutex);\n</code></pre>\n\n<p>your producer thread won't wait for the consumer thread to be done before producing the next item.</p>\n\n<blockquote>\n  <p>And the producer will be prevented from wrapping around and writing again by the not_full semaphore.</p>\n</blockquote>\n\n<p>That's not correct.  The producer thread won't have to wait for the consumer thread if the <code>not_full_semaphore</code> is initialized to a value greater than one.</p>\n"}], "owner": {"reputation": 1630, "user_id": 519285, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cebbdadcfd4d83353f776c29bc618c07?s=128&d=identicon&r=PG", "display_name": "ACRL", "link": "https://stackoverflow.com/users/519285/acrl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 647, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1537980692, "creation_date": 1537979981, "last_edit_date": 1537980692, "question_id": 52522512, "link": "https://stackoverflow.com/questions/52522512/do-i-need-a-mutex-when-using-a-circular-buffer-and-the-producer-consumer-desig", "title": "Do I need a Mutex when using a circular buffer and the Producer / Consumer design pattern", "body": "<p>I have two threads that communicate via a circular buffer.</p>\n\n<pre><code>/* Initialize not_full semaphore to a count of BUFFER_SIZE */\nsem_init(&amp;not_full_semaphore, 0, BUFFER_SIZE);\n/* Initialize not_empty semaphore to a count of 0 */\nsem_init(&amp;not_empty_semaphore, 0, 0);\n\nvoid producer_thread (void) {\n    int item\n    int head = 0;\n\n    while(true) {\n        item = produce_item();\n\n        sem_wait(&amp;not_full_semaphore);\n        mutex_lock(&amp;circular_buffer_mutex);\n        /* Insert item into the buffer */\n        circular_buffer[head] = item;\n        /* Increment head offset and wrap if necessary */\n        head = (head == BUFFER_SIZE - 1) ? 0 : head + 1;\n        mutex_unlock(&amp;circular_buffer_mutex);\n        sem_post(&amp;not_empty_semaphore);\n    }\n}\n\nvoid consumer_thread (void){\n    int item;\n    int tail = 0;\n\n    while(true) {\n        sem_wait(&amp;not_empty_semaphore);\n        mutex_lock(&amp;circular_buffer_mutex);\n        /* Remove item from the buffer */\n        item = circular_buffer[tail];\n        /* Increment tail offset and wrap if necessary */\n        tail = (tail == BUFFER_SIZE - 1) ? 0 : tail + 1;\n        mutex_unlock(&amp;circular_buffer_mutex);\n        sem_post(&amp;not_full_semaphore);\n        consume_item(item);\n    }\n</code></pre>\n\n<p>My Question is do I really need the mutex?  It would appear to me that there is no chance that the producer and consumer would ever be accessing the same memory at the same time.  The consumer won't read until the producer is done writing and has signaled it via the not_empty semaphore.  And the producer will be prevented from wrapping around and writing again by the not_full semaphore.  So it doesn't appear to me that I need the mutex, but all the examples that I have found make use of it.</p>\n"}, {"tags": ["c", "unix", "pipe"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7475082"}, "edited": false, "score": 0, "creation_date": 1537979384, "post_id": 52522106, "comment_id": 91984198, "body": "Ok but the man page of pipe says that &quot;if all file descriptors referring to the write end of a pipe have closed, then an attempt to read from the pipe will see end-of-file&quot;, but when I call read after the pipe is closed, I still get the remaining characters and not EOF, so will I get EOF only if the pipe is empty and therefore I can read all the pipe even if every write end of it is closed?"}, {"owner": {"reputation": 2162, "user_id": 2534472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d8dce53c214aa63495ff868b09a1a4?s=128&d=identicon&r=PG", "display_name": "UniversE", "link": "https://stackoverflow.com/users/2534472/universe"}, "edited": false, "score": 3, "creation_date": 1537979573, "post_id": 52522106, "comment_id": 91984309, "body": "Yes, you get all the data that has already been written. Otherwise the writing process would need to somehow magically &quot;know&quot; when then client has finished reading."}], "tags": [], "owner": {"reputation": 2162, "user_id": 2534472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d8dce53c214aa63495ff868b09a1a4?s=128&d=identicon&r=PG", "display_name": "UniversE", "link": "https://stackoverflow.com/users/2534472/universe"}, "is_accepted": true, "score": 5, "last_activity_date": 1537978679, "last_edit_date": 1537978679, "creation_date": 1537978274, "answer_id": 52522106, "question_id": 52522006, "link": "https://stackoverflow.com/questions/52522006/read-from-pipe-even-if-the-write-end-is-closed/52522106#52522106", "title": "Read from pipe even if the write end is closed", "body": "<p>As you have found out, your teacher is wrong.</p>\n\n<p>You do not get a broken pipe \"error\" (which is actually a combination of a signal, <code>SIGPIPE</code>, and an error <code>EPIPE</code> if that is ignored), when you try to <em>read</em> from a broken pipe, but when you attempt to <em>write</em> to a broken pipe.</p>\n\n<p>For Linux systems, you can read more about this <a href=\"http://man7.org/linux/man-pages/man7/pipe.7.html\" rel=\"noreferrer\">here</a>, or you can take a look at the BSD man page <a href=\"https://www.freebsd.org/cgi/man.cgi?pipe(2)\" rel=\"noreferrer\">pipe(2)</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7475082"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2772, "favorite_count": 0, "accepted_answer_id": 52522106, "answer_count": 1, "score": 1, "last_activity_date": 1537978679, "creation_date": 1537977909, "last_edit_date": 1537978336, "question_id": 52522006, "link": "https://stackoverflow.com/questions/52522006/read-from-pipe-even-if-the-write-end-is-closed", "title": "Read from pipe even if the write end is closed", "body": "<p>my teacher said that if the writing end of a pipe is closed, the child process can no longer read from the read end of the pipe and a read would generate a BROKEN _PIPE error. However, I can't get this code to generate any error while reading on the closed tube :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;wait.h&gt;\n\nint main(void) {\n    int pipefd[2];\n    char c;\n\n    pipe(pipefd);\n\n    if (fork() == 0) {\n        close(pipefd[1]);\n        sleep(5);\n        // The parent has already closed pipefd[1]\n        while (read(pipefd[0], &amp;c, 1)) {\n            printf(\"%c\", c);\n        }\n        close(pipefd[0]);\n        return 0;\n    }\n\n    close(pipefd[0]);\n\n    char str[] = \"foo\";\n    write(pipefd[1], str, 4);\n\n    close(pipefd[1]);\n\n    return 0;\n}\n</code></pre>\n\n<p>The output on stdout after 5 seconds is <code>foo</code>. So what I understand is that closing the write end just add EOF after the characters already there and DOES NOT send EOF on any forthcoming read (so the child can read all the characters already sent). Am I right ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1537973892, "post_id": 52520653, "comment_id": 91981049, "body": "What is <code>_TASKING_C_TRICORE_ </code>?"}, {"owner": {"reputation": 23, "user_id": 10418535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f70e96b3c1bae0767859bd213b4cea?s=128&d=identicon&r=PG&f=1", "display_name": "ELecoffre", "link": "https://stackoverflow.com/users/10418535/elecoffre"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1537974066, "post_id": 52520653, "comment_id": 91981164, "body": "Line 82 is this one : #if (<i>TASKING_C_TRICORE</i> == 1U)"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1537974138, "post_id": 52520653, "comment_id": 91981211, "body": "most likely _TASKING_C_TRICORE is not defined."}, {"owner": {"reputation": 23, "user_id": 10418535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f70e96b3c1bae0767859bd213b4cea?s=128&d=identicon&r=PG&f=1", "display_name": "ELecoffre", "link": "https://stackoverflow.com/users/10418535/elecoffre"}, "edited": false, "score": 0, "creation_date": 1537974388, "post_id": 52520653, "comment_id": 91981363, "body": "<i>TASKING_C_TRICORE is well defined in one of the *.c files : #define _TASKING_C_TRICORE</i> (1U)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1537974551, "post_id": 52520653, "comment_id": 91981459, "body": "This definition has to be visible by this file."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10418535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f70e96b3c1bae0767859bd213b4cea?s=128&d=identicon&r=PG&f=1", "display_name": "ELecoffre", "link": "https://stackoverflow.com/users/10418535/elecoffre"}, "edited": false, "score": 0, "creation_date": 1537974617, "post_id": 52520860, "comment_id": 91981502, "body": "error is always there despite the #if defined (<i>TASKING_C_TRICORE</i>)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1537974713, "post_id": 52520860, "comment_id": 91981562, "body": "Because it&#39;s not <code>TASKING_C_TRICORE</code> but <code>_TASKING_C_TRICORE_</code> ?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1537974885, "post_id": 52520860, "comment_id": 91981678, "body": "What is your compiler? Try with some other define and comparison. Maybe it is just not supported."}, {"owner": {"reputation": 23, "user_id": 10418535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f70e96b3c1bae0767859bd213b4cea?s=128&d=identicon&r=PG&f=1", "display_name": "ELecoffre", "link": "https://stackoverflow.com/users/10418535/elecoffre"}, "edited": false, "score": 0, "creation_date": 1537975131, "post_id": 52520860, "comment_id": 91981830, "body": "The compiler is &quot;Tasking&quot;"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1537975237, "post_id": 52520860, "comment_id": 91981881, "body": "I&#39;ve used the &quot;Tasking&quot; compiler before for some Conextant DSP work.  It builds in multiple stages and can be buggy.  Try a clean build maybe?"}, {"owner": {"reputation": 23, "user_id": 10418535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f70e96b3c1bae0767859bd213b4cea?s=128&d=identicon&r=PG&f=1", "display_name": "ELecoffre", "link": "https://stackoverflow.com/users/10418535/elecoffre"}, "edited": false, "score": 0, "creation_date": 1538030953, "post_id": 52520860, "comment_id": 92001367, "body": "Even after a cleanall and then a build, the error is still there"}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": true, "score": 1, "last_activity_date": 1537974244, "creation_date": 1537974244, "answer_id": 52520860, "question_id": 52520653, "link": "https://stackoverflow.com/questions/52520653/irq-h-82-26-syntax-error-in-if-elif-expression/52520860#52520860", "title": "Irq.h 82/26 syntax error in #if/#elif expression", "body": "<p>I think it's because you don't have <code>_TASKING_C_TRICORE_</code> defined so it can't evaluate that expression.  Try something like this;</p>\n\n<pre><code>#if defined (_TASKING_C_TRICORE_)\n#if (_TASKING_C_TRICORE_ == 1U) //line 82\n\n#ifndef IFX_INTERRUPT\n#define IFX_INTERRUPT(isr, vectabNum, prio) \\\n                    void __interrupt(prio) __vector_table(vectabNum) isr(void)\n#endif\n\n#endif /* (_TASKING_C_TRICORE_ == 1U) */\n#endif /* defined(_TASKING_C_TRICORE_) */\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10418535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f70e96b3c1bae0767859bd213b4cea?s=128&d=identicon&r=PG&f=1", "display_name": "ELecoffre", "link": "https://stackoverflow.com/users/10418535/elecoffre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 52520860, "answer_count": 1, "score": 0, "last_activity_date": 1537974244, "creation_date": 1537973627, "last_edit_date": 1537974085, "question_id": 52520653, "link": "https://stackoverflow.com/questions/52520653/irq-h-82-26-syntax-error-in-if-elif-expression", "title": "Irq.h 82/26 syntax error in #if/#elif expression", "body": "<p>I don't know very well the preprocessor conditionals and I get the following error :</p>\n\n<pre><code>Irq.h 82/26 syntax error in #if/#elif expression\n</code></pre>\n\n<p>On the following part of code :</p>\n\n<pre><code>#if (_TASKING_C_TRICORE_ == 1U) //line 82\n\n#ifndef IFX_INTERRUPT\n#define IFX_INTERRUPT(isr, vectabNum, prio) \\\n                    void __interrupt(prio) __vector_table(vectabNum) isr(void)\n#endif\n\n#endif /* (_TASKING_C_TRICORE_ == 1U) */\n</code></pre>\n\n<p>But I don't see/understand what's wrong...\ud83d\ude27</p>\n\n<p>Do you have any idea of where this issue could come from ?</p>\n"}, {"tags": ["c", "algorithm", "file", "struct", "binary-tree"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1537974152, "post_id": 52520315, "comment_id": 91981222, "body": "<code>while</code> + <code>fgets</code> + <code>strtok</code> or <code>strchr</code> + <code>atoi</code> or <code>strtol</code>. Aren&#39;t this separate questions? Genering binary tree from an input / reading stream of numbers separated by spaces / generating all permutations from list of elements - these look like separate topics to me. 1. Read input line by line and parse it. 2. Write a function for generating all permutations from list of elements with a callback function. 3. in that callback function create binary trees 4. Using a binary tree &quot;constructor&quot; that takes as input an array of ints."}, {"owner": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "edited": false, "score": 0, "creation_date": 1537976879, "post_id": 52520315, "comment_id": 91982871, "body": "Sorry, but what is your aim?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "edited": false, "score": 0, "creation_date": 1537977127, "post_id": 52520315, "comment_id": 91983020, "body": "@kelalaka Quote from question: &quot; I need to read from the file result.txt line by line each line will generate a separate tree that I want to display on stdout.&quot;"}, {"owner": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1537977944, "post_id": 52520315, "comment_id": 91983484, "body": "@4386427 then what?"}, {"owner": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "edited": false, "score": 0, "creation_date": 1537978104, "post_id": 52520315, "comment_id": 91983557, "body": "#define swap(x,y) { x = x + y; y = x - y; x = x - y; }"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1537978537, "post_id": 52520315, "comment_id": 91983782, "body": "Regarding the file problem see <a href=\"https://stackoverflow.com/questions/873454/how-to-truncate-a-file-in-c\" title=\"how to truncate a file in c\">stackoverflow.com/questions/873454/how-to-truncate-a-file-in&zwnj;&#8203;-c</a>"}], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 10164572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0feedb1a60c7c66c7303a5ebd84555?s=128&d=identicon&r=PG&f=1", "display_name": "ss321c", "link": "https://stackoverflow.com/users/10164572/ss321c"}, "edited": false, "score": 0, "creation_date": 1538020255, "post_id": 52521981, "comment_id": 91997606, "body": "yes correct this is the only part troubling me some one suggested fget,strtok ,strchr,atoi that is also correct"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 0, "last_activity_date": 1538024308, "last_edit_date": 1538024308, "creation_date": 1537977828, "answer_id": 52521981, "question_id": 52520315, "link": "https://stackoverflow.com/questions/52520315/generating-all-possible-binary-trees-from-a-permutation-of-input-ints-reading-da/52521981#52521981", "title": "generating all possible binary trees from a permutation of input ints reading data from file", "body": "<p>There seem to be more than one question here. I'll focus on this part:</p>\n\n<blockquote>\n  <p>I am not able to understand how do I separate input values...</p>\n</blockquote>\n\n<p>So as far as I understand you have a line (read from the file) with a variable number of numbers and you want to parse that line to get each individual number.</p>\n\n<p>Below is an example showing how it can be done. For simplicity I have hardcode the user/file input.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAX 10\n\nint parseLine(char *line, int *arr )\n{\n    int j = 0;\n    int x = 0;\n    int t;\n    while(j &lt; MAX &amp;&amp; sscanf(line + x, \"%d%n\", &amp;arr[j], &amp;t) == 1)\n    {\n        x += t;\n        ++j;\n    }\n    return j;\n}\n\nint main(void) {\n    int size = 5;                    // User input\n    char line[] = \"10 20 30 40 50\";  // Line from file\n\n    int numbers[MAX];\n    if (size &gt; MAX)\n    {\n        printf(\"Too many numbers!\\n\");\n        return 0;\n    }\n    int count = parseLine(line, numbers);\n    if (count != size)\n    {\n        printf(\"Wrong number found!\\n\");\n        return 0;\n    }\n    printf(\"Found %d numbers in the line\\n\", count);\n    for(int t=0; t&lt;count; ++t) printf(\"%d\\n\", numbers[t]);\n\n    // Build tree from the \"count\" number in the array\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Found 5 numbers in the line\n10\n20\n30\n40\n50\n</code></pre>\n"}], "owner": {"reputation": 551, "user_id": 10164572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0feedb1a60c7c66c7303a5ebd84555?s=128&d=identicon&r=PG&f=1", "display_name": "ss321c", "link": "https://stackoverflow.com/users/10164572/ss321c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 52521981, "answer_count": 1, "score": 0, "last_activity_date": 1538024308, "creation_date": 1537972609, "question_id": 52520315, "link": "https://stackoverflow.com/questions/52520315/generating-all-possible-binary-trees-from-a-permutation-of-input-ints-reading-da", "title": "generating all possible binary trees from a permutation of input ints reading data from file", "body": "<p>I am trying to generate all possible binary trees, from a given input for example if the input is 1,2,3,4 then there will be 24 permutations of this input \nlike for example </p>\n\n<pre><code>2       4       3       1\n2       4       1       3\n3       2       1       4\n3       2       4       1\n3       1       2       4\n3       1       4       2\n3       4       1       2\n3       4       2       1\n4       2       3       1\n4       2       1       3\n</code></pre>\n\n<p>I am storing these permutations in a file result.txt I have written separately program to create a binary tree combined both these programs and the semi final code looks like this </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nstruct btnode\n{\n    int value;\n    struct btnode *l;\n    struct btnode *r;\n}*root = NULL, *temp = NULL, *t2, *t1;\n\nvoid delete1();\nvoid insert();\nvoid delete();\nvoid inorder(struct btnode *t);\nvoid create();\nvoid search(struct btnode *t);\nvoid preorder(struct btnode *t);\nvoid postorder(struct btnode *t);\nvoid search1(struct btnode *t,int data);\nint smallest(struct btnode *t);\nint largest(struct btnode *t);\n\nvoid printarray(int arr[],int size);\n\nint flag = 1;\n/* To insert a node in the tree */\nvoid insert()\n{\n    create();\n    if (root == NULL)\n        root = temp;\n    else\n        search(root);\n}\n\n/* To create a node */\nvoid create()\n{\n    int data;\n\n    printf(\"Enter data of node to be inserted : \");\n    scanf(\"%d\", &amp;data);\n    temp = (struct btnode *)malloc(1*sizeof(struct btnode));\n    temp-&gt;value = data;\n   temp-&gt;value = data;\n    temp-&gt;l = temp-&gt;r = NULL;\n}\n\n/* Function to search the appropriate position to insert the new node */\nvoid search(struct btnode *t)\n{\n    if ((temp-&gt;value &gt; t-&gt;value) &amp;&amp; (t-&gt;r != NULL))      /* value more than root node value insert at right */\n        search(t-&gt;r);\n    else if ((temp-&gt;value &gt; t-&gt;value) &amp;&amp; (t-&gt;r == NULL))\n        t-&gt;r = temp;\n    else if ((temp-&gt;value &lt; t-&gt;value) &amp;&amp; (t-&gt;l != NULL))    /* value less than root node value insert at left */\n        search(t-&gt;l);\n    else if ((temp-&gt;value &lt; t-&gt;value) &amp;&amp; (t-&gt;l == NULL))\n        t-&gt;l = temp;\n}\n\n/* recursive function to perform inorder traversal of tree */\nvoid inorder(struct btnode *t)\n{\n   if (root == NULL)\n    {\n        printf(\"No elements in a tree to display\");\n        return;\n    }\n    if (t-&gt;l != NULL)\n        inorder(t-&gt;l);\n    printf(\"%d -&gt; \", t-&gt;value);\n    if (t-&gt;r != NULL)\n        inorder(t-&gt;r);\n}\n\n/* To check for the deleted node */\nvoid delete()\n{\n    int data;\n\n    if (root == NULL)\n    {\n        printf(\"No elements in a tree to delete\");\n        return;\n  }\n    printf(\"Enter the data to be deleted : \");\n    scanf(\"%d\", &amp;data);\n    t1 = root;\n    t2 = root;\n    search1(root, data);\n}\n\n/* To find the preorder traversal */\nvoid preorder(struct btnode *t)\n{\n    if (root == NULL)\n    {\n        printf(\"No elements in a tree to display\");\n        return;\n    }\n    printf(\"%d -&gt; \", t-&gt;value);\n    if (t-&gt;l != NULL)\n        preorder(t-&gt;l);\n    if (t-&gt;r != NULL)\n        preorder(t-&gt;r);\n}\n\n/* To find the postorder traversal */\nvoid postorder(struct btnode *t)\n{\n    if (root == NULL)\n    {\n        printf(\"No elements in a tree to display \");\n        return;\n    }\n    if (t-&gt;l != NULL)\n        postorder(t-&gt;l);\n    if (t-&gt;r != NULL)\n        postorder(t-&gt;r);\n    printf(\"%d -&gt; \", t-&gt;value);\n}\n\n/* Search for the appropriate position to insert the new node */\nvoid search1(struct btnode *t, int data)\n{\n    if ((data&gt;t-&gt;value))\n    {   t1 = t;\n        search1(t-&gt;r, data);\n    }\n    else if ((data &lt; t-&gt;value))\n    {\n        t1 = t;\n        search1(t-&gt;l, data);\n    }\n    else if ((data==t-&gt;value))\n    {\n        delete1(t);\n    }\n}\n\n/* To delete a node */\nvoid delete1(struct btnode *t)\n{\n    int k;\n\n    /* To delete leaf node */\n  /* To delete leaf node */\n    if ((t-&gt;l == NULL) &amp;&amp; (t-&gt;r == NULL))\n    {\n        if (t1-&gt;l == t)\n        {\n            t1-&gt;l = NULL;\n        }\n        else\n        {\n            t1-&gt;r = NULL;\n        }\n        t = NULL;\n        free(t);\n        return;\n    }\n\n    /* To delete node having one left hand child */\n    else if ((t-&gt;r == NULL))\n    {\n        if (t1 == t)\n        {\n            root = t-&gt;l;\n      t1 = root;\n        }\n        else if (t1-&gt;l == t)\n        {\n            t1-&gt;l = t-&gt;l;\n\n        }\n        else\n        {\n            t1-&gt;r = t-&gt;l;\n        }\n        t = NULL;\n        free(t);\n        return;\n    }\n\n    /* To delete node having right hand child */\n    else if (t-&gt;l == NULL)\n    {\n        if (t1 == t)\n        {\n     root = t-&gt;r;\n            t1 = root;\n        }\n        else if (t1-&gt;r == t)\n            t1-&gt;r = t-&gt;r;\n        else\n            t1-&gt;l = t-&gt;r;\n        t == NULL;\n        free(t);\n        return;\n    }\n\n    /* To delete node having two child */\n    else if ((t-&gt;l != NULL) &amp;&amp; (t-&gt;r != NULL))\n    {\n        t2 = root;\n        if (t-&gt;r != NULL)\n        {\n            k = smallest(t-&gt;r);\n            flag = 1;\n        }\n   else\n        {\n            k =largest(t-&gt;l);\n            flag = 2;\n        }\n        search1(root, k);\n        t-&gt;value = k;\n    }\n\n}\n\n/* To find the smallest element in the right sub tree */\nint smallest(struct btnode *t)\n{\n    t2 = t;\n    if (t-&gt;l != NULL)\n    {\n        t2 = t;\n        return(smallest(t-&gt;l));\n    }\n    else\n      return (t-&gt;value);\n}\n\n/* To find the largest element in the left sub tree */\nint largest(struct btnode *t)\n{\n    if (t-&gt;r != NULL)\n    {\n        t2 = t;\n        return(largest(t-&gt;r));\n    }\n    else\n        return(t-&gt;value);\n}\n\n\n\n\n//function to print the array\nvoid printarray(int arr[], int size)\n{\n    FILE *fp;\n    int i,j;\n    fp=fopen(\"result.txt\",\"a\");\n    for(i=0; i&lt;size; i++)\n    {\n          //  printf(\"%d\\t\",arr[i]);\n      fprintf(fp,\"%d\\t\",arr[i]);\n    }\n    fprintf(fp,\"\\n\");\n    fclose(fp);\n}\n\n//function to swap the variables\nvoid swap(int *a, int *b)\n{\n    int temp;\n    temp = *a;\n    *a = *b;\n    *b = temp;\n}\n\n//permutation function\nvoid permutation(int *arr, int start, int end)\n{\n    if(start==end)\n    {\n        printarray(arr, end+1);\n        return;\n    }\n    int i;\n    for(i=start;i&lt;=end;i++)\n    {\n        //swapping numbers\n        swap((arr+i), (arr+start));\n        //fixing one first digit\n        //and calling permutation on\n        //the rest of the digits\n        permutation(arr, start+1, end);\n        swap((arr+i), (arr+start));\n    }\n}\n\nint main()\n{\n    //taking input to the array\n    int size;\n    printf(\"Enter the size of array\\n\");\n    scanf(\"%d\",&amp;size);\n    int i;\n    int arr[size];\n    for(i=0;i&lt;size;i++)\n        scanf(\"%d\",&amp;arr[i]);\n    //calling permutation function\n\n    permutation(arr, 0, size-1);\n    return 0;\n}\n</code></pre>\n\n<p>I am stuck in the main function here what I am not able to understand is my results.txt file contains output of permutation as </p>\n\n<pre><code>3       4       2       1\n4       2       3       1\n4       2       1       3\n</code></pre>\n\n<p>to be able to create the tree I need to read from the file result.txt line by line each line will generate a separate tree that I want to display on stdout.\nNow the file is too long with all input permutations each new permutation separated from previous via <code>\\n</code> so how do I go on reading if I do a fgets on the file </p>\n\n<pre><code>while (fgets(line,sizeof(line),fp)){\n        create_tree(line);&lt;-- this function is not in above code I will implement just to give an idea of my logic of implementation\n</code></pre>\n\n<p>I am not able to understand how do I separate input values in line user may have given a variable series in starting so sscanf is not a solution here because in each execution of program user may execute it like this </p>\n\n<pre><code>Enter the size of array\n5\n</code></pre>\n\n<p>and the series as input is <code>1 2 3 4 5</code>\nin another execution user may execute like </p>\n\n<pre><code>Enter the size of array\n4\n</code></pre>\n\n<p>and the series as input is <code>1 2 3 4</code></p>\n\n<p>also a problem I am facing is in multiple executions result.txt should be over written first time I don't find the file opening modes w or a sufficient for this.But I can get rid of this by implementing if file exist then delete but above problem reading line by line argument in variable choices is my problem from file. How to implement this?</p>\n"}, {"tags": ["c", "assembly", "arguments", "cpu-registers", "calling-convention"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 3, "creation_date": 1537972165, "post_id": 52520074, "comment_id": 91979798, "body": "Read the calling convention documentation instead. Anyway, the order of loading registers does not matter. Register choice for pushing arguments to the stack does not matter.  Order on the stack <b>does</b> matter since that&#39;s the basis for pairing up the formal arguments with the values. The adjustment of the stack pointer is for alignment purposes. Also, you seem not to have enabled optimization hence you see unnecessary stuff such as adjusting <code>rsp</code> twice."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1537972348, "post_id": 52520074, "comment_id": 91979917, "body": "Mostly a duplicate of <a href=\"https://stackoverflow.com/q/18024672\">What registers are preserved through a linux x86-64 function call</a> which explains why the call-preserved regs are saved/restored so the function can use them itself, and links to the calling convention doc which explains everything else."}, {"owner": {"reputation": 736, "user_id": 8614565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223dd9dad7b32ac3a1881be17469e545?s=128&d=identicon&r=PG&f=1", "display_name": "KYHSGeekCode", "link": "https://stackoverflow.com/users/8614565/kyhsgeekcode"}, "edited": false, "score": 0, "creation_date": 1537975484, "post_id": 52520074, "comment_id": 91982034, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/18024672/what-registers-are-preserved-through-a-linux-x86-64-function-call\">What registers are preserved through a linux x86-64 function call</a>"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1537975963, "post_id": 52520074, "comment_id": 91982332, "body": "The asm would probably be easier to understand with optimization enabled.   In optimized code, hopefully all the instructions are necessary, and not just useless like using RBX and other call-preserved registers as temporaries to hold <code>lea</code> results to be <code>push</code>ed.  Optimized code should just align the stack and use the same scratch reg repeatedly.  Or if you compile with <code>gcc -fno-pie -no-pie</code>, you&#39;ll get <code>push $L_.str.9</code> (at least on Linux, where static addresses fit in a 32-bit immediate in position-dependent executables.)"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1537987834, "post_id": 52520074, "comment_id": 91988243, "body": "<a href=\"https://en.wikipedia.org/wiki/X86_calling_conventions#x86-64_calling_conventions\" rel=\"nofollow noreferrer\">x86-64 calling conventions</a>"}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1537983521, "post_id": 52522927, "comment_id": 91986230, "body": "After using up RBX and RBP (the call-preserved regs that don&#39;t need a REX prefix), gcc typically counts down from R15 when it needs more call-preserved regs, rather than using R12/R13.  This is a good choice because there are some special cases involving r12 and r13 (the REX.B aliases of RSP and RBP) in addressing mode encodings that could lead to larger machine code in a function that needed 4 but not 6 extra regs.  <a href=\"https://stackoverflow.com/q/52522544\">rbp not allowed as SIB base?</a>"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1537983623, "post_id": 52522927, "comment_id": 91986273, "body": "The adjustment of RSP by 8 is not boilerplate; the x86-64 System V ABI requires 16-byte alignment of RSP before a <code>call</code>, and with the number of <code>push</code> instructions before/after it turns out it&#39;s off by 1 stack slot."}], "tags": [], "owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "is_accepted": true, "score": 2, "last_activity_date": 1537981768, "creation_date": 1537981768, "answer_id": 52522927, "question_id": 52520074, "link": "https://stackoverflow.com/questions/52520074/how-do-registers-work-as-arguments-in-assembly/52522927#52522927", "title": "How do registers work as arguments in assembly?", "body": "<p>First, it looks like you are using unoptimized code so things are taking place that do not need to.</p>\n\n<p>Look at the register state right before the call to printf that are not pushed on the stack:</p>\n\n<pre><code>rdi = format string\nrsi = 1\nrdx = 2\nrcx = 3\nr8 = 4\nr9 = 5\n</code></pre>\n\n<p>Then 6 .. 10 are pushed on the stack in reverse order.</p>\n\n<p>That should give you an idea of the calling convention. The first six parameters go through registers. The remaining parameters get passed on the stack.</p>\n\n<blockquote>\n  <p>What I want to know is why are registers r10 r11 r14 and r15 before the first argument is loaded into memory and that registers rsi rdx rcx r8 and 'r9' loaded into memory after the first argument?</p>\n</blockquote>\n\n<p>That's just the order the compiler chose.</p>\n\n<blockquote>\n  <p>Also why are r14 and r15 used instead of r12 and r13?</p>\n</blockquote>\n\n<p>Again, that's what the compiler chose. Not these are just being used a scratch locations. If the code were optimized, it is likely fewer registers would be used.</p>\n\n<blockquote>\n  <p>Also why is 8 added and subtracted from the stack pointer in this case and does it matter which order the registers are pushed and popped?</p>\n</blockquote>\n\n<p>It could just be some boiler plate function code the compiler generates.  </p>\n"}], "owner": {"reputation": 4327, "user_id": 3549629, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/3aopq.png?s=128&g=1", "display_name": "iProgram", "link": "https://stackoverflow.com/users/3549629/iprogram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1694, "favorite_count": 0, "accepted_answer_id": 52522927, "answer_count": 1, "score": 1, "last_activity_date": 1537981768, "creation_date": 1537972004, "last_edit_date": 1537972363, "question_id": 52520074, "link": "https://stackoverflow.com/questions/52520074/how-do-registers-work-as-arguments-in-assembly", "title": "How do registers work as arguments in assembly?", "body": "<p>I am trying to understand how assembly works with arguments and return values.</p>\n\n<p>So far, I have learnt that %eax is is the return value and to load a single argument, I need to load the effective address of <code>%rip + offset</code> into <code>%rid</code> by using <code>leaq var(%rip), %rdi</code> .</p>\n\n<p>To learn more about arguments, I created a c program that takes in 10 (11 arguments including the formatting string) to try and find out the order of registers. I then converted the C code into assembly using gcc on my Mac.</p>\n\n<p>Here is the C code I used:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n  printf(\"%s %s %s %s %s %s %s %s %s %s\", \"1 \", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\");\n  return 0;\n}\n</code></pre>\n\n<p>And hear is the assembly output:</p>\n\n<pre><code>.section  __TEXT,__text,regular,pure_instructions\n  .macosx_version_min 10, 13\n  .globl  _main                   ## -- Begin function main\n  .p2align  4, 0x90\n_main:                                  ## @main\n  .cfi_startproc\n## %bb.0:\n  pushq %rbp\n  .cfi_def_cfa_offset 16\n  .cfi_offset %rbp, -16\n  movq  %rsp, %rbp\n  .cfi_def_cfa_register %rbp\n  pushq %r15\n  pushq %r14\n  pushq %rbx\n  pushq %rax\n  .cfi_offset %rbx, -40\n  .cfi_offset %r14, -32\n  .cfi_offset %r15, -24\n  subq  $8, %rsp\n  leaq  L_.str.10(%rip), %r10\n  leaq  L_.str.9(%rip), %r11\n  leaq  L_.str.8(%rip), %r14\n  leaq  L_.str.7(%rip), %r15\n  leaq  L_.str.6(%rip), %rbx\n  leaq  L_.str(%rip), %rdi\n  leaq  L_.str.1(%rip), %rsi\n  leaq  L_.str.2(%rip), %rdx\n  leaq  L_.str.3(%rip), %rcx\n  leaq  L_.str.4(%rip), %r8\n  leaq  L_.str.5(%rip), %r9\n  movl  $0, %eax\n  pushq %r10\n  pushq %r11\n  pushq %r14\n  pushq %r15\n  pushq %rbx\n  callq _printf\n  addq  $48, %rsp\n  xorl  %eax, %eax\n  addq  $8, %rsp\n  popq  %rbx\n  popq  %r14\n  popq  %r15\n  popq  %rbp\n  retq\n  .cfi_endproc\n                                        ## -- End function\n  .section  __TEXT,__cstring,cstring_literals\nL_.str:                                 ## @.str\n  .asciz  \"%s %s %s %s %s %s %s %s %s %s\"\n\nL_.str.1:                               ## @.str.1\n  .asciz  \"1 \"\n\nL_.str.2:                               ## @.str.2\n  .asciz  \"2\"\n\nL_.str.3:                               ## @.str.3\n  .asciz  \"3\"\n\nL_.str.4:                               ## @.str.4\n  .asciz  \"4\"\n\nL_.str.5:                               ## @.str.5\n  .asciz  \"5\"\n\nL_.str.6:                               ## @.str.6\n  .asciz  \"6\"\n\nL_.str.7:                               ## @.str.7\n  .asciz  \"7\"\n\n\nL_.str.8:                               ## @.str.8\n  .asciz  \"8\"\n\nL_.str.9:                               ## @.str.9\n  .asciz  \"9\"\n\nL_.str.10:                              ## @.str.10\n  .asciz  \"10\"\n\n\n.subsections_via_symbols\n</code></pre>\n\n<p>After that, I then cleared the code up which removes some macOS only settings? The code still works.</p>\n\n<pre><code>.text\n  .globl  _main                   ## -- Begin function main\n_main:                                  ## @main\n  pushq %rbp\n  movq  %rsp, %rbp\n  pushq %r15\n  pushq %r14\n  pushq %rbx\n  pushq %rax\n  subq  $8, %rsp\n  leaq  L_.str.10(%rip), %r10\n  leaq  L_.str.9(%rip), %r11\n  leaq  L_.str.8(%rip), %r14\n  leaq  L_.str.7(%rip), %r15\n  leaq  L_.str.6(%rip), %rbx\n  leaq  L_.str(%rip), %rdi\n  leaq  L_.str.1(%rip), %rsi\n  leaq  L_.str.2(%rip), %rdx\n  leaq  L_.str.3(%rip), %rcx\n  leaq  L_.str.4(%rip), %r8\n  leaq  L_.str.5(%rip), %r9\n  movl  $0, %eax\n  pushq %r10\n  pushq %r11\n  pushq %r14\n  pushq %r15\n  pushq %rbx\n  callq _printf\n  addq  $48, %rsp\n  xorl  %eax, %eax\n  addq  $8, %rsp\n  popq  %rbx\n  popq  %r14\n  popq  %r15\n  popq  %rbp\n  retq\n\n.data\nL_.str:                                 ## @.str\n  .asciz  \"%s %s %s %s %s %s %s %s %s %s\"\n\nL_.str.1:                               ## @.str.1\n  .asciz  \"1 \"\n\nL_.str.2:                               ## @.str.2\n  .asciz  \"2\"\n\nL_.str.3:                               ## @.str.3\n  .asciz  \"3\"\n\nL_.str.4:                               ## @.str.4\n  .asciz  \"4\"\n\nL_.str.5:                               ## @.str.5\n  .asciz  \"5\"\n\nL_.str.6:                               ## @.str.6\n  .asciz  \"6\"\n\nL_.str.7:                               ## @.str.7\n  .asciz  \"7\"\n\nL_.str.8:                               ## @.str.8\n  .asciz  \"8\"\n\nL_.str.9:                               ## @.str.9\n  .asciz  \"9\"\n\nL_.str.10:                              ## @.str.10\n  .asciz  \"10\"\n</code></pre>\n\n<p>I understand that at the beginning of the code, that the base pointer is pushed onto the stack which is then copied into the stack pointer for later use.</p>\n\n<p>The leaq is then loading each string into each register that will be used as an argument to printf.</p>\n\n<p>What I want to know is why are registers <code>r10</code> <code>r11</code> <code>r14</code> and <code>r15</code> before the first argument is loaded into memory and that registers <code>rsi</code> <code>rdx</code> <code>rcx</code> <code>r8</code> and 'r9' loaded into memory after the first argument? Also why are <code>r14</code> and <code>r15</code> used instead of <code>r12</code> and <code>r13</code>?</p>\n\n<p>Also why is 8 added and subtracted from the stack pointer in this case and does it matter which order the registers are pushed and popped?</p>\n\n<p>I hope all the subquestions are related to this question, if not let me know. Also car me up on any knowledge I may be getting wrong. This is what I have learnt by converting c to assembly.</p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1537971436, "post_id": 52519832, "comment_id": 91979298, "body": "did you mean to tag <code>macos</code> and not <code>macros</code>?"}, {"owner": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 2, "creation_date": 1537971587, "post_id": 52519832, "comment_id": 91979381, "body": "Please define &quot;the user&quot;. Is it an end user, or is it a developer adopting your library in their application?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1537971863, "post_id": 52519832, "comment_id": 91979582, "body": "Based on the source code at the end, it seems you want the availability of a member to depend on what value is in another member while the program is executing. That is not supported by C. The definition of a structure is set at compile time. One way to implement that sort of function in your own code would be to create functions to get or set values for members. Then the function that would set a value for <code>val1</code> could check whether <code>name</code> were true and either set the value or report an error. That sort of implementation is overkill for most purposes."}, {"owner": {"reputation": 21426, "user_id": 2495283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ef72b32709062aa479476844515073?s=128&d=identicon&r=PG", "display_name": "Claies", "link": "https://stackoverflow.com/users/2495283/claies"}, "edited": false, "score": 2, "creation_date": 1537971975, "post_id": 52519832, "comment_id": 91979666, "body": "What is the actual problem you are trying to solve with this construct?  This <i>feels like</i> an <a href=\"https://meta.stackexchange.com/a/66378/297619\">XY Question</a>, and the &quot;solution&quot; you are trying to work out for this unknown problem isn&#39;t even really sensible."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1537972400, "post_id": 52519832, "comment_id": 91979963, "body": "This is definitely an XY problem. There are other much more suitable mechanisms for this than macros: struct forward declaration, function pointer callbacks etc. I would abandon this idea and get back to the actual problem you are trying to solve."}, {"owner": {"reputation": 171, "user_id": 8091812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89a2a9bb4ef0a14d2603bcef8a9425f?s=128&d=identicon&r=PG&f=1", "display_name": "user654789384", "link": "https://stackoverflow.com/users/8091812/user654789384"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1537972467, "post_id": 52519832, "comment_id": 91980015, "body": "@ChristianGibbons yes, this is correct"}, {"owner": {"reputation": 171, "user_id": 8091812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89a2a9bb4ef0a14d2603bcef8a9425f?s=128&d=identicon&r=PG&f=1", "display_name": "user654789384", "link": "https://stackoverflow.com/users/8091812/user654789384"}, "reply_to_user": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 0, "creation_date": 1537972493, "post_id": 52519832, "comment_id": 91980039, "body": "@RuudHelderman Developer adopting the library"}, {"owner": {"reputation": 171, "user_id": 8091812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89a2a9bb4ef0a14d2603bcef8a9425f?s=128&d=identicon&r=PG&f=1", "display_name": "user654789384", "link": "https://stackoverflow.com/users/8091812/user654789384"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1537972577, "post_id": 52519832, "comment_id": 91980090, "body": "@EricPostpischil not quite. i would like to define the full struct, but the user(developer) using this struct may exclude some members at COMPILE time with macros.."}, {"owner": {"reputation": 171, "user_id": 8091812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89a2a9bb4ef0a14d2603bcef8a9425f?s=128&d=identicon&r=PG&f=1", "display_name": "user654789384", "link": "https://stackoverflow.com/users/8091812/user654789384"}, "reply_to_user": {"reputation": 21426, "user_id": 2495283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ef72b32709062aa479476844515073?s=128&d=identicon&r=PG", "display_name": "Claies", "link": "https://stackoverflow.com/users/2495283/claies"}, "edited": false, "score": 0, "creation_date": 1537972665, "post_id": 52519832, "comment_id": 91980153, "body": "@Claies i dont understand. the idea is to create a structure like a ferrari. but if a fiat is also doing the job, you may select the fiat and save a lot of ram. the point is, this specific struct is used in EVERY single object. therefore it would be nice to define it once but have it configurable"}, {"owner": {"reputation": 171, "user_id": 8091812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89a2a9bb4ef0a14d2603bcef8a9425f?s=128&d=identicon&r=PG&f=1", "display_name": "user654789384", "link": "https://stackoverflow.com/users/8091812/user654789384"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1537972818, "post_id": 52519832, "comment_id": 91980264, "body": "@Lundin i think we do not talk about the same ;) let me try again: it is all done at compile time. the structure is not modifiable by the developer (this is the idea). but the developper may shorten it if some members are not used (by configuring it)"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1537973223, "post_id": 52519832, "comment_id": 91980565, "body": "@aphardt What Lundin posted is correct. Conditionally defining <code>struct</code> fields in this manner will create a <code>struct</code> that is horribly difficult to write code for - you can&#39;t use <code>#ifdef</code> preprocessor directives to control code compilation, so there&#39;s no way to use what you&#39;re trying to do to control both code and fields.  Using something like <code>#ifdef MYSTRUCT_HAS_NAME</code> can control both at compile time and is much better.  If a developer wants to change the structure definition - <b>then the developer can change the structure definition</b>.  It&#39;s not hard to add or remove <code>bool val1;</code>."}, {"owner": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 0, "creation_date": 1537975264, "post_id": 52519832, "comment_id": 91981898, "body": "&quot;The structure is not modifiable by the developer, but the developer may shorten it if some members are not used.&quot; I am curious about your use case. Can you explain why it is important that developer can exclude members, but not add members? What makes you think a struct can anticipate on every possible field a user may need? Why not give the developer full control over (a subset of) the struct?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1538029681, "post_id": 52519832, "comment_id": 92000748, "body": "@aphardt OK, that clears up the issue some. There are some standard (though ugly) ways to do that, I&#39;ll post an answer."}], "answers": [{"tags": [], "owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "is_accepted": true, "score": 5, "last_activity_date": 1537973136, "last_edit_date": 1537973136, "creation_date": 1537972723, "answer_id": 52520350, "question_id": 52519832, "link": "https://stackoverflow.com/questions/52519832/c-macromagic-struct-definition/52520350#52520350", "title": "C MacroMagic - Struct Definition", "body": "<p>I'm not sure how useful this is, but the following should do what you ask:</p>\n\n<pre><code>#define CONDITIONAL_TRUE(code) code\n#define CONDITIONAL_FALSE(code)\n\n#define DEF_STRUCT_1(NAME,VAL1,VAL2)      \\\n    struct my_struct_t                    \\\n    {                                     \\\n      CONDITIONAL_##NAME(bool name;)      \\\n      CONDITIONAL_##VAL1(bool val1;)      \\\n      CONDITIONAL_##VAL2(bool val2;)      \\\n    } instance1\n\nint main() {\n  DEF_STRUCT_1(TRUE,FALSE,TRUE);\n\n  instance1.name = true;\n  //instance1.val1 = false; // error, unavailable\n  instance1.val2 = false;\n}\n</code></pre>\n\n<p>All the <code>TRUE</code>/<code>FALSE</code> parameters would have to be available at compile-time. And if you want more than one version of these parameters to be used in the same program, you should make the struct name a parameter as well.</p>\n\n<p>Since you say that this is intended for a library, it isn't clear how you're planning for the library code to be able to access this struct, since it would need to know which members are available. This significantly reduces the usefulness of this method.</p>\n\n<p>A more common method used by libraries is to have a config.h file, editable by the library user, with definitions such as <code>#define USE_NAME_MEMBER 1</code>. Then you can make a normal <code>struct</code> definition with <code>#if</code> directives:</p>\n\n<pre><code>//in mylibrary.h:\n#include &lt;mylibrary_config.h&gt;\n\nstruct my_struct_t {\n    #if USE_NAME_MEMBER\n        bool name;\n    #endif\n    /...\n};\n</code></pre>\n\n<p>Then you would also put <code>#if</code> directives around any library code that accesses the <code>name</code> member.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1538031015, "creation_date": 1538031015, "answer_id": 52531074, "question_id": 52519832, "link": "https://stackoverflow.com/questions/52519832/c-macromagic-struct-definition/52531074#52531074", "title": "C MacroMagic - Struct Definition", "body": "<p>Given that the struct needs to be generated differently at compile-time, given some conditions, you will be facing the problem that all code using the struct will need to be modified accordingly. Compiler switches (<code>#ifdef FOO .... #endif</code>) tend to scale badly with increased complexity. If there is a large number of struct members, all the needed compiler switches will make a horrible, unmaintainable mess out of the program.</p>\n\n<p>There is a well-known design pattern known as \"X macros\", that can be used to centralize maintenance in programs to one single place, as well as allowing compile-time iteration of all items involved. They make the code hard to read too, and therefore they are a bit of a last resort. But they are a bit of de facto standard and their ugliness doesn't scale with complexity, so they are preferred over some compiler switch madness. It goes like this:</p>\n\n<pre><code>#define INSTANCE_LIST \\\n/*  name, type */     \\  \n  X(name, bool)       \\\n  X(val1, bool)       \\\n  X(val2, bool)       \\\n\ntypedef struct\n{\n  #define X(name, type) type name;\n    INSTANCE_LIST\n  #undef X\n} instance_t;\n</code></pre>\n\n<p>This code gets pre-processed into:</p>\n\n<pre><code>typedef struct\n{\n  bool name;\n  bool val1;\n  bool val2;\n} instance_t;\n</code></pre>\n\n<p>The only part that needs to be maintained is the \"INSTANCE_LIST\". By commenting out a line in the list, that struct member will go away. This means that all code using the struct has to be using the same list accordingly. For example, lets add code to the same example, that lists the init values of each member and then sets them:</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n#include &lt;stdio.h&gt;\n\n#define INSTANCE_LIST       \\\n/*  name, type, init */     \\  \n  X(name, bool, true)       \\\n  X(val1, bool, false)      \\\n  X(val2, bool, false)      \\\n\ntypedef struct\n{\n  #define X(name, type, init) type name;\n    INSTANCE_LIST\n  #undef X\n} instance_t;\n\nint main (void)\n{\n  instance_t inst;\n\n  #define X(name, type, init) inst.name = init;\n    INSTANCE_LIST\n  #undef X\n\n  printf(\"%d \", inst.name);\n  printf(\"%d \", inst.val1);\n  printf(\"%d \", inst.val2);\n}\n</code></pre>\n\n<p>Very flexible and maintainable - you can easily add more struct members without changing any other macro than the list. But as mentioned, the down-side is that the code looks quite cryptic, especially to those who aren't used to this design pattern.</p>\n"}], "owner": {"reputation": 171, "user_id": 8091812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f89a2a9bb4ef0a14d2603bcef8a9425f?s=128&d=identicon&r=PG&f=1", "display_name": "user654789384", "link": "https://stackoverflow.com/users/8091812/user654789384"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 52520350, "answer_count": 2, "score": 0, "last_activity_date": 1538031015, "creation_date": 1537971276, "last_edit_date": 1537971590, "question_id": 52519832, "link": "https://stackoverflow.com/questions/52519832/c-macromagic-struct-definition", "title": "C MacroMagic - Struct Definition", "body": "<p>Im looking for a solution for define a struct, where the user may enable/disable struct members as in the example (pseudo-code):</p>\n\n<pre><code>#define DEF_STRUCT_1(NAME,VAL1,VAL2)      \\\n    struct my_struct_t                    \\\n    {                                     \\\n      #if(NAME == TRUE)                   \\\n        bool name;                        \\\n      #endif                              \\\n      #if(VAL1 == TRUE)                   \\\n        bool val1;                        \\\n      #endif                              \\\n      #if(VAL2 == TRUE)                   \\\n        bool val2;                        \\\n      #endif                              \\\n    } instance1\n\nvoid main() {\n  DEF_STRUCT_1(TRUE,FALSE,TRUE);\n\n  instance1.name = true;\n  //instance1.val1 = false; // error, unavailable\n  instance1.val2 = false;\n}\n</code></pre>\n"}, {"tags": ["c", "floating-point", "precision"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1537970799, "post_id": 52519657, "comment_id": 91978869, "body": "You should write some code for this."}, {"owner": {"reputation": 625, "user_id": 990883, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/a1f87925cc758554bc4d0431a1d01ade?s=128&d=identicon&r=PG", "display_name": "Xavier Geoffrey", "link": "https://stackoverflow.com/users/990883/xavier-geoffrey"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1537971022, "post_id": 52519657, "comment_id": 91979014, "body": "so there is no existing algorithm which i can use?"}, {"owner": {"reputation": 889, "user_id": 8080758, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5ce11073e465a49f65a4a6430e090dae?s=128&d=identicon&r=PG&f=1", "display_name": "Cl&#233;ment", "link": "https://stackoverflow.com/users/8080758/cl%c3%a9ment"}, "edited": false, "score": 0, "creation_date": 1537972608, "post_id": 52519657, "comment_id": 91980113, "body": "It is just not clear"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1537977128, "post_id": 52519657, "comment_id": 91983021, "body": "You mean... just changing the scale units?  I suppose some mult/div by 10^stuff will be needed.  Your Q. is very unclear:("}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1537978346, "post_id": 52519657, "comment_id": 91983688, "body": "There is no standard code that does the job.  You face several issues: (1) how to scale the number so it gives an appropriate value in the range 1..999; (2) how to print the units multiplier; (3) how to control/present the number of digits (435 vs 434.7 vs 434.68 (3-5 digits); also 1.23 vs 12.3 vs 123 (decimal places or not, and how many), etc."}, {"owner": {"reputation": 625, "user_id": 990883, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/a1f87925cc758554bc4d0431a1d01ade?s=128&d=identicon&r=PG", "display_name": "Xavier Geoffrey", "link": "https://stackoverflow.com/users/990883/xavier-geoffrey"}, "edited": false, "score": 0, "creation_date": 1538024879, "post_id": 52519657, "comment_id": 91998747, "body": "I have re-phrased the question. Sorry about the clarity part."}], "answers": [{"comments": [{"owner": {"reputation": 625, "user_id": 990883, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/a1f87925cc758554bc4d0431a1d01ade?s=128&d=identicon&r=PG", "display_name": "Xavier Geoffrey", "link": "https://stackoverflow.com/users/990883/xavier-geoffrey"}, "edited": false, "score": 0, "creation_date": 1538025706, "post_id": 52523002, "comment_id": 91999008, "body": "Thanks a lot :) I will use this for my requirement here. Thanks again. :)"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1537983085, "last_edit_date": 1537983085, "creation_date": 1537982082, "answer_id": 52523002, "question_id": 52519657, "link": "https://stackoverflow.com/questions/52519657/how-to-auto-scale-a-floating-point-value-in-c/52523002#52523002", "title": "How to auto scale a floating point value in C?", "body": "<blockquote>\n  <p>How to auto scale a floating point value in C?</p>\n</blockquote>\n\n<p>Auto scaling to powers of 1000s has subtle considerations near the transitions that even had OP coded it, it likely would have failed in corner cases.</p>\n\n<p>Let us try a slightly different, yet simpler goal: print to 3 significant digits and at powers of 1000.0</p>\n\n<pre><code>// example output\n1.00\n9.99\n10.0\n99.9\n100.\n999.\n1.00k\n9.99k\n10.0k\n...\n</code></pre>\n\n<hr>\n\n<p>Code can try to do this with its own math using <code>log()</code>, etc., but will invariable fail with cases near 9.995, 99.95, 999.5.</p>\n\n<p>Let <code>sprintf()</code> do  the heavy lifting and then use string manipulation.</p>\n\n<hr>\n\n<p>The first step is to print to a string using <code>\"%e\"</code></p>\n\n<pre><code>//            sgn  dig  . digs  e  sgn expo \\0 \n#define FLT_E2 (1 + 1 + 1 + 2 + 1 + 1 + 5 + 1)\n// let us double buffer size as there is little reason to be stingy here.\nchar buf[FLT_E2 * 2];  \n\n//                           v--- 2 digits after the lead digit\nsnprintf(buf, sizeof buf, \"%.2e\", some_float);\n</code></pre>\n\n<p>The next step is to process the string into its 3 parts and use <code>\"%n\"</code> to note the offset of the decimal point and <code>'e'</code>.</p>\n\n<pre><code>int whole, frac, expo, dp, e;\nif (sscanf(buf, \"%d%n.%d%ne%d\", &amp;whole, &amp;dp, &amp;frac, &amp;e, &amp;expo) != 3) {\n  // value is some non-finite like infinity or not-a-number.\n  printf(\"%e\", some_float);  \n  return;\n}\n</code></pre>\n\n<p>Now move <code>expo</code> down to a multiple of 3 and shift the decimal point.</p>\n\n<pre><code>while (expo%3) {\n  expo--;\n  buf[dp] = buf[dp+1];\n  buf[++dp] = '.';\n}\n</code></pre>\n\n<p>Convert the <code>'e'</code> into the various <a href=\"https://en.wikipedia.org/wiki/Metric_prefix\" rel=\"nofollow noreferrer\">SI prefix</a>.</p>\n\n<pre><code>// TBD code to handle expo out of range [-24 24], left for OP.\n\nchar prefix = \"yzafpnum kMGTPEZY\"[(expo - -24)/3];\nif (prefix != ' ') buf[e++] = prefix;\nbuf[e] = '\\0';\n</code></pre>\n\n<p>Now print</p>\n\n<pre><code>printf(\"%s\", buf);\n</code></pre>\n\n<hr>\n\n<p>Although there is much detail here with these unchecked code snippets, the final code is left for OP to form.</p>\n\n<p>Advanced issue include:<br>\n  handling locale specific decimal points like <code>','</code><br>\n  exponents <a href=\"https://en.wikipedia.org/wiki/Metric_prefix#X,_W_and_V\" rel=\"nofollow noreferrer\">outside</a> [-24...24].<br>\n  \u03bc vs u.  </p>\n"}], "owner": {"reputation": 625, "user_id": 990883, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/a1f87925cc758554bc4d0431a1d01ade?s=128&d=identicon&r=PG", "display_name": "Xavier Geoffrey", "link": "https://stackoverflow.com/users/990883/xavier-geoffrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 52523002, "answer_count": 1, "score": -1, "last_activity_date": 1538024821, "creation_date": 1537970736, "last_edit_date": 1538024821, "question_id": 52519657, "link": "https://stackoverflow.com/questions/52519657/how-to-auto-scale-a-floating-point-value-in-c", "title": "How to auto scale a floating point value in C?", "body": "<p>I am working on embedded device which measures voltage via a 16 bit ADC.\nWith 3.3V as reference I have a resolution of 50uV. So, the device can measure from 50uV to 3.3V and as such based on the current value I need to format it and display it in mV or uV or V etc.</p>\n\n<p>The value is a floating point.</p>\n\n<p>Is there existing library API that does that or should I write my own code?</p>\n"}, {"tags": ["c", "avr", "arduino-ide", "serial-communication", "usart"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 2, "creation_date": 1537968490, "post_id": 52518638, "comment_id": 91977394, "body": "OT: <code>if(!(x==0))</code> is way harder to read than <code>if(x)</code> IMO."}], "answers": [{"comments": [{"owner": {"reputation": 5310, "user_id": 1790864, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/u8BJF.png?s=128&g=1", "display_name": "Rev", "link": "https://stackoverflow.com/users/1790864/rev"}, "edited": false, "score": 0, "creation_date": 1538037342, "post_id": 52519382, "comment_id": 92004774, "body": "Where in the datasheet did you read that? XMEGA UART is full duplex, I don&#39;t think a shared buffer is your problem."}, {"owner": {"reputation": 53, "user_id": 6340381, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207941761535229/picture?type=large", "display_name": "Nicola Barlab&#224;", "link": "https://stackoverflow.com/users/6340381/nicola-barlab%c3%a0"}, "reply_to_user": {"reputation": 5310, "user_id": 1790864, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/u8BJF.png?s=128&g=1", "display_name": "Rev", "link": "https://stackoverflow.com/users/1790864/rev"}, "edited": false, "score": 0, "creation_date": 1538125829, "post_id": 52519382, "comment_id": 92042763, "body": "Thank you very much for your reply Rev1.0! I sed that because in page 294 of datasheet, it says that the rx and tx buffer has the same addresses. I though this could make sense, however i&#39;m not an advanced programmer and didn&#39;t know how the thing works really, just don&#39;t know what two-level FIFO means. However i noticed that by removing that printf things starts to work fine. I didn&#39;t though about what your suggested just because i can&#39;t fully understand how a string is transmitted! Isn&#39;t there any buffer (other than _DATA ones) that store data if the mcu is busy? Thank you"}], "tags": [], "owner": {"reputation": 53, "user_id": 6340381, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207941761535229/picture?type=large", "display_name": "Nicola Barlab&#224;", "link": "https://stackoverflow.com/users/6340381/nicola-barlab%c3%a0"}, "is_accepted": false, "score": 0, "last_activity_date": 1537969947, "creation_date": 1537969947, "answer_id": 52519382, "question_id": 52518638, "link": "https://stackoverflow.com/questions/52518638/avr-xmega-usart-problem-reading-a-complete-string/52519382#52519382", "title": "AVR Xmega USART problem reading a complete string", "body": "<p>Okey I got the answer by myself looking at the datasheet. It seems that the rx and tx buffer is shared, so i tried to comment out the debugging printf inside the function and it just worked! hope this could help someone however  </p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 6340381, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207941761535229/picture?type=large", "display_name": "Nicola Barlab&#224;", "link": "https://stackoverflow.com/users/6340381/nicola-barlab%c3%a0"}, "edited": false, "score": 0, "creation_date": 1538125365, "post_id": 52533092, "comment_id": 92042509, "body": "Thank you very much for your reply Rev1.0! I sed that because in page 294 of datasheet, it says that the rx and tx buffer has the same addresses. I though this could make sense, however i&#39;m not an advanced programmer and didn&#39;t know how the thing works really, just don&#39;t mean what double FIFO means. However i noticed that by removing that printf things starts to work fine. I didn&#39;t though about what your suggested just because i can&#39;t fully understand how a string is transmitted! Isn&#39;t there any buffer (other than _DATA ones) that store data if the mcu is busy? Thank you"}, {"owner": {"reputation": 5310, "user_id": 1790864, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/u8BJF.png?s=128&g=1", "display_name": "Rev", "link": "https://stackoverflow.com/users/1790864/rev"}, "reply_to_user": {"reputation": 53, "user_id": 6340381, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207941761535229/picture?type=large", "display_name": "Nicola Barlab&#224;", "link": "https://stackoverflow.com/users/6340381/nicola-barlab%c3%a0"}, "edited": false, "score": 1, "creation_date": 1538126194, "post_id": 52533092, "comment_id": 92042932, "body": "They &quot;share the same I/O address&quot;. But that isn&#39;t an issue in this case. Please consider accepting my answer or ask if you have further questions."}, {"owner": {"reputation": 5310, "user_id": 1790864, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/u8BJF.png?s=128&g=1", "display_name": "Rev", "link": "https://stackoverflow.com/users/1790864/rev"}, "reply_to_user": {"reputation": 53, "user_id": 6340381, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207941761535229/picture?type=large", "display_name": "Nicola Barlab&#224;", "link": "https://stackoverflow.com/users/6340381/nicola-barlab%c3%a0"}, "edited": false, "score": 1, "creation_date": 1538126332, "post_id": 52533092, "comment_id": 92043026, "body": "&quot;Isn&#39;t there any buffer (other than DATA) that store data if the mcu is busy?&quot; - That would be the FIFO, but as I pointed out, that is limited to storing one byte while receiving the next one. Other controllers may have bigger FIFO buffers."}], "tags": [], "owner": {"reputation": 5310, "user_id": 1790864, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/u8BJF.png?s=128&g=1", "display_name": "Rev", "link": "https://stackoverflow.com/users/1790864/rev"}, "is_accepted": true, "score": 0, "last_activity_date": 1538038479, "creation_date": 1538038479, "answer_id": 52533092, "question_id": 52518638, "link": "https://stackoverflow.com/questions/52518638/avr-xmega-usart-problem-reading-a-complete-string/52533092#52533092", "title": "AVR Xmega USART problem reading a complete string", "body": "<p>A shared received buffer is NOT your problem. The problem occurs, because the execution time of </p>\n\n<pre><code>printf(\"**GOT** %d carattere %c \\n\",z,data);\n</code></pre>\n\n<p>blocks the code for too long, while the rest of the string is being sent by the terminal. The XMEGA receive buffer consists of a two-level FIFO. </p>\n\n<p>Lets take a look at the case where you tried to send \"fail\".</p>\n\n<pre><code>while((data!='\\r')){\n\n    // This blocks until the first char 'f' is received, which is OK.\n    while( !(USARTC1_STATUS &amp; USART_RXCIF_bm) );\n\n    // At this point, 'f' is located in the DATA buffer.\n    // The reception of the next char 'a' immediately starts next and is handled\n    // by the UART receiver hardware.\n    data = USARTC1_DATA; //Temporarly store received data\n\n    // You just cleared the DATA buffer by reading it, so there is room for 'a'\n    // after it has been received completely.\n\n    // printf() blocks the code for a very long time\n    printf(\"**GOT** %d carattere %c \\n\",z,data);\n\n    // While you sent data using printf(), the terminal program sent the remaining\n    // characters 'i' and 'l'. However, because DATA was already holding 'a' and\n    // it wasn't cleared in between, the other chars got lost.\n\n    line[z] = data;\n    z++;\n\n}\n</code></pre>\n\n<p>I hope this makes it clear.</p>\n"}], "owner": {"reputation": 53, "user_id": 6340381, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207941761535229/picture?type=large", "display_name": "Nicola Barlab&#224;", "link": "https://stackoverflow.com/users/6340381/nicola-barlab%c3%a0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "accepted_answer_id": 52533092, "answer_count": 2, "score": 2, "last_activity_date": 1538038479, "creation_date": 1537967603, "question_id": 52518638, "link": "https://stackoverflow.com/questions/52518638/avr-xmega-usart-problem-reading-a-complete-string", "title": "AVR Xmega USART problem reading a complete string", "body": "<p>I'm getting some problem and strange behave while try to read a complete string. I'm using a homemade demo board equipped with an atxmega32a4u and basically what i'd like to do is set a parameter (output voltage setpoint) through serial communication while the MCU does his stuff (control a buck converter and send back through serial some data as voltage and current ). Let's look at the code: here we have the main function </p>\n\n<pre><code>int main(void)\n{   \nosc_init();\nPORTC_OUTSET = PIN7_bm; //Let's make PC7 as TX\nPORTC_DIRSET = PIN7_bm; //TX pin as output\n\nPORTC_OUTCLR = PIN6_bm;\nPORTC_DIRCLR = PIN6_bm; //PC6 as RX\n\nadc_init();\ntimer_init();\ntimer1_init();              //init all the peripheral\nSerial_init();\nstdout = stdin = &amp;usart_str;\n\nchar l[100];\n\n\nwhile (1) \n{\n\n    if(!((USARTC1_STATUS &amp; USART_RXCIF_bm)==0))\n    {\n        printf(\"**MAIN**\\n\");\n        uart_getstring(l);\n        printf(\"**DIGITATO %s **\\n \",l);\n    }\n    printf(\"tensione: %f V corrente: %f A\\n\",v_bat,cur);\n}\n\n}\n</code></pre>\n\n<p>As you can see in the external while loop i just send back data with printf function (which works very good and gives me good formatted string to display in a serial monitor like the arduino ide ones). The nested loop starting when it find the USART_RXCIF flag setted, meaning that the incoming buffer is waiting to be read. Then it calls the uart_getstring() function which here we have:</p>\n\n<pre><code>void uart_getstring(char* line)\n{   \nint z=0;\n\nwhile( !(USARTC1_STATUS &amp; USART_RXCIF_bm) ); //Wait until data has been received.\n\nchar data='a';\n\nwhile((data!='\\r')){\n\n        while( !(USARTC1_STATUS &amp; USART_RXCIF_bm) );\n\n        data = USARTC1_DATA; //Temporarly store received data\n        printf(\"**GOT** %d carattere %c \\n\",z,data);\n\n        line[z] = data;\n        z++;\n\n    }\n    line[z]='\\0';   \n}\n</code></pre>\n\n<p>Please note that all the control stuff were made in a ISR function and serial is done in main loop without usart interrupt. However i also tried to disable all other process and running just the main function alone but got the same problem </p>\n\n<p>So i tried this with the arduino ide's serial monitor which allow me to send command to the board and receive answer back. What happen is tricky, if i send a string just 1 or 2 char it works fine! But if i send a longer string it fails, it just send me back the string as it was of only 2 char. Lets see some example:</p>\n\n<pre><code>&gt;&gt; a\n&lt;&lt;\n**MAIN**\n**GOT** 0 carattere a \n**GOT** 1 carattere  \n**DIGITATO a **\n\n&gt;&gt; aa\n&lt;&lt;\n**MAIN**\n**GOT** 0 carattere a \n**GOT** 1 carattere a\n**GOT** 2 carattere \n**DIGITATO aa **\n\nand then if i send something longer it fails\n\n&gt;&gt; fail\n&lt;&lt;\n**MAIN**\n**GOT** 0 carattere f\n**GOT** 1 carattere a\n**GOT** 2 carattere \n**DIGITATO fa **\n</code></pre>\n\n<p>I also tried it through a python script and also just using the screen command but the result was ever the same.\nAny help would be appreciated. \nThank you a lot</p>\n"}, {"tags": ["c", "gtk", "glade"], "answers": [{"tags": [], "owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "is_accepted": true, "score": 2, "last_activity_date": 1537985215, "creation_date": 1537985215, "answer_id": 52523771, "question_id": 52518548, "link": "https://stackoverflow.com/questions/52518548/show-gtkapplicationwindow-after-close/52523771#52523771", "title": "Show GtkApplicationWindow after close", "body": "<p>If you close a Window using the \"X\", it will be not only hidden but also destroyed afterwards.\nObviously you cannot reuse that widget later. You would need to create it again.</p>\n\n<p>This is where <a href=\"https://developer.gnome.org/gtk3/stable/GtkWidget.html#gtk-widget-hide-on-delete\" rel=\"nofollow noreferrer\"><code>gtk_widget_hide_on_delete()</code></a> comes in handy.</p>\n\n<p>You can directly connect it to the <code>\"delete-event\"</code> signal or you can call it from within your handler for that signal.\nThen the widget is only hidden but can be shown again later.</p>\n"}], "owner": {"reputation": 617, "user_id": 1986451, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bb4c836af96088f6084a57fca26a85f6?s=128&d=identicon&r=PG", "display_name": "Brian Emilius", "link": "https://stackoverflow.com/users/1986451/brian-emilius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 52523771, "answer_count": 1, "score": 0, "last_activity_date": 1537985215, "creation_date": 1537967335, "last_edit_date": 1537982824, "question_id": 52518548, "link": "https://stackoverflow.com/questions/52518548/show-gtkapplicationwindow-after-close", "title": "Show GtkApplicationWindow after close", "body": "<p>I am a complete newbie when it comes to C and Gtk+.</p>\n\n<p>I am trying to create an interface with a main application window. This main window has a menu, which opens a second window (of type GtkApplictionWindow).</p>\n\n<p>My problem is, that once I close this second window (with the x in the top) I cannot open this second window again.</p>\n\n<p>I get an error:</p>\n\n<pre><code>(api:2807): Gtk-CRITICAL **: gtk_widget_show: assertion 'GTK_IS_WIDGET (widget)' failed\n</code></pre>\n\n<p>I've tried attaching a function to both the <code>destroy</code> and the <code>hide</code> signals, and in my code I've tried both <code>gtk_widget_destroy(window_connections)</code> and <code>gtk_widget_hide(window_connections)</code>.</p>\n\n<p>My interface is created in Glade.</p>\n\n<p>Here is my current code:</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n#include &lt;stdio.h&gt;\n\nGtkWidget       *window_connections;\n\nint main(int argc, char *argv[]) {\n    GtkBuilder  *builder;\n    GtkWidget       *window;\n    GtkWidget       *statusbar;\n\n    gtk_init(&amp;argc, &amp;argv);\n\n    builder = gtk_builder_new();\n    gtk_builder_add_from_file(builder, \"glade/window_main.glade\", NULL);\n\n    window = GTK_WIDGET(gtk_builder_get_object(builder, \"window_main\"));\n    gtk_builder_connect_signals(builder, NULL);\n\n    window_connections = GTK_WIDGET(gtk_builder_get_object(builder, \"window_connections\"));\n\n    statusbar = GTK_WIDGET(gtk_builder_get_object(builder, \"statusbar\"));\n\n    gtk_statusbar_push(GTK_STATUSBAR(statusbar), 1, \"Hello, World!\");\n\n    g_object_unref(builder);\n\n    gtk_widget_show(window);\n    gtk_main();\n\n    return 0;\n}\n\n// called when window is closed\nvoid on_window_main_destroy() {\n    gtk_main_quit();\n}\n\nvoid window_open_connections() {\n    gtk_widget_show(window_connections);\n}\n\nvoid window_close_connections() {\n    gtk_widget_hide(window_connections);\n}\n\nvoid window_hide_test() {\n    printf(\"hide\\n\");\n}\n</code></pre>\n\n<p>Help?</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "can-bus", "pci"], "comments": [{"owner": {"reputation": 33092, "user_id": 5801661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8ENZ.jpg?s=128&g=1", "display_name": "Margaret Bloom", "link": "https://stackoverflow.com/users/5801661/margaret-bloom"}, "edited": false, "score": 0, "creation_date": 1538663053, "post_id": 52518543, "comment_id": 92230121, "body": "Maybe the CAN bus is not enumerable so a platform_driver has to pop up soon or later. I don&#39;t know exactly how Linux PnP works, maybe the PCI bus driver found a CAN controller, assigned it a pci_device and loaded the right module. This module in turn has to use platform_driver."}], "answers": [{"tags": [], "owner": {"reputation": 220, "user_id": 9556832, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213587041888235/picture?type=large", "display_name": "Dra\u017een G.", "link": "https://stackoverflow.com/users/9556832/dra%c5%been-g"}, "is_accepted": true, "score": 2, "last_activity_date": 1544621092, "last_edit_date": 1544621092, "creation_date": 1544620084, "answer_id": 53743741, "question_id": 52518543, "link": "https://stackoverflow.com/questions/52518543/why-is-the-pci-linux-implementation-for-ififd-using-platform-driver-instead-of/53743741#53743741", "title": "Why is the pci linux implementation for ififd using &quot;platform_driver&quot; instead of &quot;pci_driver&quot;?", "body": "<p>You have to differentiate <code>platform_driver</code>, which is bus (controller) driver and <code>pci_driver</code> which is PCI device driver (client on the bus).</p>\n\n<p>This is CAN Bus driver <a href=\"http://www.ifi-pld.de/IP/CANFD/canfd.html\" rel=\"nofollow noreferrer\">CAN bus driver for IFI CANFD controller</a></p>\n\n<p>Bus controlers (adapters) are registered to kernel as <code>platform_devices</code></p>\n\n<p>PCI driver provides hooks (callbacks) and structures to register PCI device to kernel\nPCI layer and bind it to device.</p>\n\n<p><code>pci_register_driver()</code> is used to register <code>pci_driver</code> structure  for a existing PCI device on the PCI bus defined in <code>struct pci_device_id xxx_pci_tbl[]</code> table with Class, Vendor and Device ID to match against a device.</p>\n\n<pre><code>struct pci_driver xxx_driver = {\n    .name           = DRV_NAME,\n    .probe          = xxx_pci_probe,\n    .remove         = xxx_pci_remove,\n    .id_table       = xxx_pci_tbl\n</code></pre>\n\n<p><a href=\"https://elixir.bootlin.com/linux/v4.20-rc6/source/Documentation/PCI/pci.txt\" rel=\"nofollow noreferrer\">/Documentation/PCI/pci.txt</a></p>\n"}], "owner": {"reputation": 489, "user_id": 7684979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55dee8eaddd0b1bef61d118334acefb9?s=128&d=identicon&r=PG&f=1", "display_name": "xMutzelx", "link": "https://stackoverflow.com/users/7684979/xmutzelx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 53743741, "answer_count": 1, "score": 1, "last_activity_date": 1544621092, "creation_date": 1537967326, "question_id": 52518543, "link": "https://stackoverflow.com/questions/52518543/why-is-the-pci-linux-implementation-for-ififd-using-platform-driver-instead-of", "title": "Why is the pci linux implementation for ififd using &quot;platform_driver&quot; instead of &quot;pci_driver&quot;?", "body": "<p>The PCI-IFIFD CAN implementation (drivers/net/can) of the linux mainline kernel (<a href=\"https://github.com/torvalds/linux/blob/master/drivers/net/can/ifi_canfd/ifi_canfd.c\" rel=\"nofollow noreferrer\">link)</a> is using the platform_driver structure instead of the pci_driver structure. <br>\nI have some trouble differentiating between those two structures. Therefor I informed myself: <br> - <a href=\"https://stackoverflow.com/questions/15610570/what-is-the-difference-between-a-linux-platform-driver-and-normal-device-driver\">platform driver vs normal device driver</a>\n<br> - <a href=\"https://elixir.bootlin.com/linux/latest/source/include/linux/platform_device.h#L180\" rel=\"nofollow noreferrer\">platform_driver</a>\n<br> - <a href=\"https://elixir.bootlin.com/linux/latest/source/include/linux/pci.h#L746\" rel=\"nofollow noreferrer\">pci_driver</a>\n<br> <br>\nAccording to the first source:</p>\n\n<blockquote>\n  <p>Unlike PCI or USB devices, I2C devices are not enumerated at the hardware level (at run time). Instead, the software must know (at compile time) which devices are connected on each I2C bus segment. <strong>So USB and PCI are not platform devices</strong>.</p>\n</blockquote>\n\n<p>If this is the case, why is the PCI ififd implementation using the platform_driver struct? <br>\nAdditionally how can someone use this driver for pci-cards using ififd?</p>\n"}, {"tags": ["c", "embedded-linux", "multicore", "rtos", "imx6"], "comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1538928505, "post_id": 52517961, "comment_id": 92307598, "body": "<i>&quot;Am i missing something here?&quot;</i>  - We certainly are.  You &quot;tried&quot; something, which did not work.  Would it not make complete sense to show us your attempt!?  The fact that your M4 part is running an RTOS hardly justifies including the RTOS tag, unless you think that fact is contributory to your issue - in which case show us the evidence."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 2202799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9fbecf74caf6416bdde9f1f24ec26f?s=128&d=identicon&r=PG", "display_name": "Jerry Pylarinos", "link": "https://stackoverflow.com/users/2202799/jerry-pylarinos"}, "is_accepted": false, "score": 0, "last_activity_date": 1565723260, "creation_date": 1565723260, "answer_id": 57483959, "question_id": 52517961, "link": "https://stackoverflow.com/questions/52517961/linux-userspace-example-for-rpmsg-lite-protocol/57483959#57483959", "title": "Linux userspace example for rpmsg-lite protocol", "body": "<p>For the Linux core(s):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;    // file control\n#include &lt;termios.h&gt;  // POSIX terminal control\n#include &lt;sched.h&gt;\n\n#define DEVICE \"/dev/ttyRPMSG0\"\n\nint main(void)\n{\n    int fd;\n    struct termios tty;\n    char buf[100];\n    int len;\n\n    printf(\"Opening device...\\n\");\n    fd = open( DEVICE, O_RDWR | O_NOCTTY | O_NDELAY );    // read/write, no console, no delay\n    if ( fd &lt; 0 )\n    {\n        printf(\"Error, cannot open device\\n\");\n        return 1;\n    }\n\n    tcgetattr( fd, &amp;tty );              // get current attributes\n    cfmakeraw( &amp;tty );                  // raw input\n    tty.c_cc[ VMIN ] = 0;               // non blocking\n    tty.c_cc[ VTIME ] = 0;              // non blocking\n    tcsetattr( fd, TCSANOW, &amp;tty ); // write attributes\n    printf( \"Device is open\\n\" );\n    for ( ;; )\n    {\n        len = read( fd, buf, sizeof( buf ) );\n        if ( len &gt; 0 )\n        {\n            buf[ len ] = '\\0';\n            printf( \"%s \\r\\n\", buf );\n        }\n        else\n        {\n            sched_yield();\n        }\n    }\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Source:\n<a href=\"https://www.toradex.com/community/questions/30653/rpmsg-protocol-failing-with-ims-rpmsg-tty-on-linux.html\" rel=\"nofollow noreferrer\">https://www.toradex.com/community/questions/30653/rpmsg-protocol-failing-with-ims-rpmsg-tty-on-linux.html</a></p>\n"}], "owner": {"reputation": 1, "user_id": 10418551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e722d33f38b632d7ec315906d68a48?s=128&d=identicon&r=PG&f=1", "display_name": "sms", "link": "https://stackoverflow.com/users/10418551/sms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 787, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565723260, "creation_date": 1537965520, "question_id": 52517961, "link": "https://stackoverflow.com/questions/52517961/linux-userspace-example-for-rpmsg-lite-protocol", "title": "Linux userspace example for rpmsg-lite protocol", "body": "<p>I am using a dual core imx board in which Linux OS running on one core and RTOS in second core(M4). I want to communicate between the cores using RPMsg. I am looking for a userspace application in linux to access the rpmsg channel using the basic open, read, write commands. I have created the rpmsg channel as per the 'rpmsg_lite_str_echo_rtos' example from NXP. I was successfully able to create virtual tty '/dev/RPMSG'. Also i was able to send data to M4 core using 'echo' command from linux. \nNow i require to automate this process using a simple c code. I think i will be able to do that using simple read, write commands, right? I tried writing data in a while loop (to /dev/RPMSG) and read the acknowledgement from M4 core using simple open, read, write commands. But all i was getting in m4 was some random bytes and junk data. Also i couldn't read any data from m4 using the read command. Am i missing something here?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1537965173, "post_id": 52517799, "comment_id": 91975166, "body": "Your program prints text as output. Please copy-paste the text <i>as text</i> into the question body. Not as links to local files on your own system."}, {"owner": {"reputation": 21, "user_id": 9577980, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "m0derate", "link": "https://stackoverflow.com/users/9577980/m0derate"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1537965342, "post_id": 52517799, "comment_id": 91975266, "body": "I have modified. you can check now. thank you"}, {"owner": {"reputation": 170, "user_id": 6605434, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-JlY264Zdg90/AAAAAAAAAAI/AAAAAAAAACE/15RyNX-J4Eg/photo.jpg?sz=128", "display_name": "Dorin Botan", "link": "https://stackoverflow.com/users/6605434/dorin-botan"}, "edited": false, "score": 1, "creation_date": 1537965454, "post_id": 52517799, "comment_id": 91975341, "body": "Does it give any output on Linux or just freezes? In the image that you uploaded I don&#39;t see any &#39;break&#39;."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 4, "creation_date": 1537965468, "post_id": 52517799, "comment_id": 91975356, "body": "Your code seems correct to me, it runs under valgrind and gdb without problems and shows the correct output (Ubuntu)."}, {"owner": {"reputation": 170, "user_id": 6605434, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh6.googleusercontent.com/-JlY264Zdg90/AAAAAAAAAAI/AAAAAAAAACE/15RyNX-J4Eg/photo.jpg?sz=128", "display_name": "Dorin Botan", "link": "https://stackoverflow.com/users/6605434/dorin-botan"}, "edited": false, "score": 0, "creation_date": 1537965589, "post_id": 52517799, "comment_id": 91975438, "body": "Could you elaborate more on how exactly you compile the programs, both on Mac and Linux?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1537965617, "post_id": 52517799, "comment_id": 91975451, "body": "This is also a good time to <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">learn how to debug your programs</a>."}, {"owner": {"reputation": 21, "user_id": 9577980, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "m0derate", "link": "https://stackoverflow.com/users/9577980/m0derate"}, "edited": false, "score": 0, "creation_date": 1537965974, "post_id": 52517799, "comment_id": 91975681, "body": "I compile the programs with the same command (cc filename ), but on the Mac it return the right result. On the liunx, it seem fall in a limitless loop...."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1537966214, "post_id": 52517799, "comment_id": 91975859, "body": "Are you sure the code you run is actually the code you compile? Add <code>printf(&quot;Hello\\n&quot;);</code> at the beginning of your <code>main</code> function and see what output you get. Also show the verbatim commands you use to compile and run the code on linux. <a href=\"https://stackoverflow.com/posts/52517799/edit\">Edit</a>  your question and don&#39;t post pictures of text but put the verbatim text."}, {"owner": {"reputation": 21, "user_id": 9577980, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "m0derate", "link": "https://stackoverflow.com/users/9577980/m0derate"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1537967690, "post_id": 52517799, "comment_id": 91976856, "body": "@Jabberwocky I do as you suggestion and it show the Hello message in the begging and the cursor still keep flash under the Hello message."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1537967825, "post_id": 52517799, "comment_id": 91976922, "body": "@m0derate well, use your debugger, that shouln&#39;d be too hard to debug. If you don&#39;t know how to use your debugger and if you are not willing to learn it then you can still put some <code>printf</code>s into the <code>sort</code> function and see what happens."}, {"owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "edited": false, "score": 0, "creation_date": 1537969124, "post_id": 52517799, "comment_id": 91977792, "body": "@m0derate I&#39;ve tested this code using gcc 7.3.0 on linux kernel 4.15.0 and works fine. I get the same result that you reported on the Mac output"}, {"owner": {"reputation": 8984, "user_id": 2485966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dZj6A.jpg?s=128&g=1", "display_name": "Ruud Helderman", "link": "https://stackoverflow.com/users/2485966/ruud-helderman"}, "edited": false, "score": 0, "creation_date": 1537969417, "post_id": 52517799, "comment_id": 91977965, "body": "The source code in your question, was that copy-pasted from the Mac or from the Linux machine? Please double-check that the two are identical; not at face value but with a diff tool."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1537971601, "post_id": 52517799, "comment_id": 91979390, "body": "I tried the posted code on my Mac, using both llvm 6.0 and gcc 4.6.3.  It worked properly, and identically, under both compilers."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1537974580, "post_id": 52517799, "comment_id": 91981477, "body": "Code copy/pasted compiles and works correctly on MSVC."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1537994879, "post_id": 52517799, "comment_id": 91991465, "body": "Again, <i>please</i> include the output in your question as text, formatted as code (use the <code>{}</code> button), <i>not</i> as links to images of text. I see nothing wrong with your program, and it works correctly on my Linux system. Please check that you have the exact same source file on both systems; <code>md5sum filename.c</code> should produce the same output. If your source file is called <code>foo.c</code>, try <code>cc foo.c -o foo &amp;&amp; .&#47;foo</code> on both systems. Add this: <code>printf(&quot;compare(\\&quot;%s\\&quot;, \\&quot;%s\\&quot;)\\n&quot;, s1, s2);</code> to your <code>compare</code> function (it should produce 16 extra lines of output, which should still be identical)."}], "owner": {"reputation": 21, "user_id": 9577980, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "m0derate", "link": "https://stackoverflow.com/users/9577980/m0derate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537988400, "creation_date": 1537964973, "last_edit_date": 1537988400, "question_id": 52517799, "link": "https://stackoverflow.com/questions/52517799/why-the-following-code-can-work-on-mac-but-it-break-on-my-linux", "title": "Why the following code can work on Mac, but it break on my linux", "body": "<ol>\n<li>it is a simple code for sorting string. </li>\n<li>the output on my Mac is the following picture.\n<a href=\"https://i.stack.imgur.com/zO8xM.png\" rel=\"nofollow noreferrer\">enter image description here</a></li>\n</ol>\n\n<p>but on the linux : it shows like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7s6m3.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>By the way, the version of Gcc in my Mac and linux are Apple LLVM version 9.1.0 and gcc 4.8.5 20150623.</p>\n\n<p>I am looking forward your suggestion. Thank you.</p>\n\n<p>the code is here.</p>\n\n<hr>\n\n<p>As\nI add <code>printf(\"Hello\\n\")</code> in the beginning of the <code>main</code> function and the code called the <code>sort</code> function. And on the linux, I still use the command <code>cc filename</code> and run the <code>./a.out</code>.  it just show an output of <code>Hello</code>, and the cursor keeps flashing under the Hello message.  the compiler in the linux is likely to make something wrong on the compile call the <code>sort</code> function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n\nint compare(const char *s1, const char *s2) {\n    return strcmp(s1, s2);\n}\n\ntypedef int (*fptrOperation)(const char *, const char *);\n\nvoid sort(char *array[], int size, fptrOperation operation) {\n    int swp = 1;\n\n    while (swp) {\n        swp = 0;\n        for (int i = 0; i &lt; size - 1; i++) {\n            if (operation(array[i], array[i + 1]) &gt; 0) {\n                swp = 1;\n                char *tmp = array[i];\n                array[i] = array[i + 1];\n                array[i + 1] = tmp;\n            }\n        }\n    }\n}\n\nvoid displayNames(char *names[], int size) {\n    for (int i = 0; i &lt; size; i++) {\n        printf(\"%s  \", names[i]);\n    }\n    printf(\"\\n\");\n}\n\nint main() {\n    char *names[] = { \"Bob\", \"Ted\", \"Carol\", \"Alice\", \"alice\" };\n    sort(names, 5, compare);\n    displayNames(names, 5);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1537964987, "post_id": 52517664, "comment_id": 91975051, "body": "Please show how you call <code>make_history</code>. Read this: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 315, "user_id": 7762652, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/f7cac3a546a55e49ed85ed343290e606?s=128&d=identicon&r=PG&f=1", "display_name": "nice_remark", "link": "https://stackoverflow.com/users/7762652/nice-remark"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1537965948, "post_id": 52517664, "comment_id": 91975659, "body": "I mean, the call to the function is just <code>make_history(&quot;message&quot;)</code> where &quot;message is the string which I want to add to the array. There is not much to it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1537965996, "post_id": 52517664, "comment_id": 91975695, "body": "You should mention this in your question."}], "answers": [{"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1537965663, "post_id": 52517801, "comment_id": 91975482, "body": "Since <code>past_entries</code> is declared <code>static</code>, it is in fact guaranteed the elements will initially be null pointers. Still bad news."}, {"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1537965783, "post_id": 52517801, "comment_id": 91975559, "body": "@aschepler Thank you, I&#39;ve fixed that part of the answer."}, {"owner": {"reputation": 315, "user_id": 7762652, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/f7cac3a546a55e49ed85ed343290e606?s=128&d=identicon&r=PG&f=1", "display_name": "nice_remark", "link": "https://stackoverflow.com/users/7762652/nice-remark"}, "edited": false, "score": 0, "creation_date": 1537966056, "post_id": 52517801, "comment_id": 91975731, "body": "@Qubit I wanted to have the values be static as I want the array to update for each call to the function. The general idea is to create a circular array that shows that last 10 entries made -- kind of a like a history"}, {"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 0, "creation_date": 1537966226, "post_id": 52517801, "comment_id": 91975874, "body": "I think you misunderstand what this does. Sure, you can have a static array of 10 character pointers and the addresses will be saved between function calls. But you still need them to point somewhere meaningful for them to store data (your entries). You can either do that with the line you have commented out (if you know an upper bound to the size of the entries) or dynamically using malloc (if you do not know an upper bound)."}, {"owner": {"reputation": 315, "user_id": 7762652, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/f7cac3a546a55e49ed85ed343290e606?s=128&d=identicon&r=PG&f=1", "display_name": "nice_remark", "link": "https://stackoverflow.com/users/7762652/nice-remark"}, "edited": false, "score": 0, "creation_date": 1537970780, "post_id": 52517801, "comment_id": 91978858, "body": "@Qubit I guess I just am having trouble understanding how this new pointer is returned"}, {"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 0, "creation_date": 1537973492, "post_id": 52517801, "comment_id": 91980759, "body": "All this line does is allocates some memory and stores the location in <code>past_entries[index]</code>, which is a pointer type. That way <code>past_entries[index]</code> actually points to memory that belongs to you so that you can read/write to it. I don&#39;t understand what you mean by <i>is returned</i>, we&#39;re not returning anything in this function."}], "tags": [], "owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "is_accepted": false, "score": 1, "last_activity_date": 1537965763, "last_edit_date": 1537965763, "creation_date": 1537964975, "answer_id": 52517801, "question_id": 52517664, "link": "https://stackoverflow.com/questions/52517664/copy-a-string-from-a-pointer-to-an-index-within-an-array-of-pointers/52517801#52517801", "title": "Copy a string from a pointer to an index within an array of pointers", "body": "<p>In your example <code>past_entries</code> is just an array of pointers, but you don't allocate any memory to them (initially pointing to <code>NULL</code>). You then try to write to those locations, hence the crash. </p>\n\n<p>To solve this, just allocate some memory before you try to copy your string to it: </p>\n\n<pre><code>past_entries[index] = malloc(strlen(entry) + 1);\n</code></pre>\n\n<p>Of course you should not forget to free all of this in the end. </p>\n\n<p>Oh and, remove that line: <code>*past_entries[index] = &amp;entry;</code>. It tries to assign <em>a pointer to a character array</em> to <em>a character</em>. </p>\n"}], "owner": {"reputation": 315, "user_id": 7762652, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/f7cac3a546a55e49ed85ed343290e606?s=128&d=identicon&r=PG&f=1", "display_name": "nice_remark", "link": "https://stackoverflow.com/users/7762652/nice-remark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537965763, "creation_date": 1537964507, "question_id": 52517664, "link": "https://stackoverflow.com/questions/52517664/copy-a-string-from-a-pointer-to-an-index-within-an-array-of-pointers", "title": "Copy a string from a pointer to an index within an array of pointers", "body": "<p>As stated in the title, I wanted to copy a string from a <code>char</code> pointer to location within an array of <code>char</code> pointers. When doing <code>strcpy()</code>, the output results in seg fault, but don't understand why this occurs.</p>\n\n<p>The abbreviated code has the following:</p>\n\n<pre><code>void make_history(char *entry) {\n    //static char past_entries[10][10];\n    static char *past_entries[10];\n    static int index = 0;\n    static int array_index = 0;\n\n    char *input;\n    if((input = strchr(entry, '\\n')) != NULL)\n        *input = '\\0';\n\n    if(strcmp(entry, \"history\") != 0) {\n        strcpy(past_entries[index], entry);\n        *past_entries[index] = &amp;entry;\n        index = (index + 1) % 10;\n        array_index++;\n    }\n}\n</code></pre>\n\n<p>Instead of trying to return a 2d array (which is also very tricky), I thought it would be easier to copy the date from <code>entry</code> to the location within the array of pointers <code>past_entries</code>. Again, <code>strcpy</code> does not work, is there a valid reason as to why this occurs, and a possible workaround or solution to this fix?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 6260, "user_id": 3820025, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zXOn4.png?s=128&g=1", "display_name": "Bence Kaulics", "link": "https://stackoverflow.com/users/3820025/bence-kaulics"}, "edited": false, "score": 1, "creation_date": 1537964748, "post_id": 52517708, "comment_id": 91974891, "body": "And in line 31 the OP passes uint8** instead of uint8* for the same reason."}, {"owner": {"reputation": 23, "user_id": 10418535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f70e96b3c1bae0767859bd213b4cea?s=128&d=identicon&r=PG&f=1", "display_name": "ELecoffre", "link": "https://stackoverflow.com/users/10418535/elecoffre"}, "edited": false, "score": 0, "creation_date": 1537966126, "post_id": 52517708, "comment_id": 91975792, "body": "Just modify it as you suggest : ReturnVal = Fls_17_Pmu_Write(*Test_ProgData, FLS_BANK0_LINEAR,(2*FLS_PAGESIZE));  \tReturnVal = Fls_17_Pmu_Read(FLS_BANK0_LINEAR ,*Test_ReadData,(2 * FLS_PAGESIZE));  And the error disappear so ty to you both :D"}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 2, "last_activity_date": 1537964657, "creation_date": 1537964657, "answer_id": 52517708, "question_id": 52517623, "link": "https://stackoverflow.com/questions/52517623/incompatible-types-at-argument-1/52517708#52517708", "title": "incompatible types at argument #1", "body": "<p>The argument is of type <code>Fls_AddressType TargetAddress</code>, yet you pass in <code>Test_ProgData</code> which is <strong>an array of <code>Fls_AddressType</code></strong>, and decays to a <strong>pointer to the first element of the array</strong>, hence the error is that your function requires <code>Fls_AddressType TargetAddress</code>, yet you're passing in <code>Fls_AddressType *</code>.</p>\n\n<p>As for <em>how</em> you can solve this - well, I have no idea as I do not know what the program is <em>supposed to do</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 3, "last_activity_date": 1537965552, "last_edit_date": 1537965552, "creation_date": 1537964717, "answer_id": 52517726, "question_id": 52517623, "link": "https://stackoverflow.com/questions/52517623/incompatible-types-at-argument-1/52517726#52517726", "title": "incompatible types at argument #1", "body": "<p><code>Test_ProgData</code> and <code>Test_ReadData</code> are declared as arrays.  </p>\n\n<pre><code> Fls_AddressType Test_ProgData[2 * FLS_PAGESIZE];\n uint8* Test_ReadData[2 * FLS_PAGESIZE];\n</code></pre>\n\n<p>The signatures of <code>Fls_17_Pmu_Write</code> and <code>Fls_17_Pmu_Read</code> show that they can only take single elements of the type <code>Test_ProgData</code>  and <code>Test_ReadData</code>. </p>\n\n<p>You can solve this only by <strong>defining</strong> a single instance of <code>Fls_AddressType</code>  and of <code>uint8*</code> and passing them to the functions.</p>\n\n<p>Something like:  </p>\n\n<pre><code> Fls_AddressType My_Test_ProgData;\n uint8* My_Test_ReadData = malloc(1); //as size of uint8 is 1\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10418535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f70e96b3c1bae0767859bd213b4cea?s=128&d=identicon&r=PG&f=1", "display_name": "ELecoffre", "link": "https://stackoverflow.com/users/10418535/elecoffre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 52517708, "answer_count": 2, "score": 1, "last_activity_date": 1537965552, "creation_date": 1537964361, "question_id": 52517623, "link": "https://stackoverflow.com/questions/52517623/incompatible-types-at-argument-1", "title": "incompatible types at argument #1", "body": "<p>I have few basis on C language but I'm a beginner in development.</p>\n\n<p>I have to integrate this code :</p>\n\n<pre><code>    `//IoHwab_fls.h\n    ...\n    Std_ReturnType ReturnVal;\n    Fls_AddressType Test_ProgData[2 * FLS_PAGESIZE];\n    uint8* Test_ReadData[2 * FLS_PAGESIZE];\n    ...\n</code></pre>\n\n<p>and </p>\n\n<pre><code>//IoHwab_fls.c\n\n#include \"IoHwab_fls.h\"\n\nvoid flsDemo(void)\n{\n    ...\n    ReturnVal = Fls_17_Pmu_Erase( FLS_BANK0_LINEAR,FLS_BANK_SIZE);\n    ...\n    ReturnVal = Fls_17_Pmu_Write(Test_ProgData, FLS_BANK0_LINEAR,(2*FLS_PAGESIZE));\n    ...\n    ReturnVal = Fls_17_Pmu_Read(FLS_BANK0_LINEAR ,Test_ReadData,(2 * FLS_PAGESIZE));\n    ...\n}\n</code></pre>\n\n<p>in a more wider project. However I'm in front of the following error :</p>\n\n<pre><code>IoHwab_fls.c 23/31 incompatible types at argument #1\n</code></pre>\n\n<p>So here is the <code>Fls_17_Pmu_Write(...)</code> and <code>Fls_17_Pmu_Read(...)</code> prototypes :</p>\n\n<pre><code>extern Std_ReturnType Fls_17_Pmu_Write( Fls_AddressType TargetAddress,\n                             const uint8 *SourceAddressPtr,\n                             Fls_LengthType Length\n                           );\n\nextern Std_ReturnType Fls_17_Pmu_Read( Fls_AddressType SourceAddress,\n                            uint8 *TargetAddressPtr, \n                            Fls_LengthType Length\n                           );\n</code></pre>\n\n<p>and also the <code>Fls_AddressType</code> type declaration :</p>\n\n<pre><code>typedef uint32 Fls_AddressType;\n</code></pre>\n\n<p>I believe to have well defined the type of my first argument ? Is it ? Have you any idea of how I can solve this ?</p>\n\n<p>Thank you \ud83d\ude0a</p>\n"}, {"tags": ["c", "sockets", "freebsd", "broadcasting", "sendto"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1537977377, "post_id": 52517253, "comment_id": 91983185, "body": "Your code works on one box, not on another,  We cannot debug your notwork by remote control.  You have to investigate this and fix the code/routing/protocol/whatever.  Wire shark both ends, and work out why it&#39;s not working.  Note that routers routinely block UDP broadasts, and sysadmins don&#39;t like it much either."}, {"owner": {"reputation": 31, "user_id": 10418445, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-neJ98z7Y-nw/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVHSuCO0SP1Kh-UjpkGmAp7v2WD9A/mo/photo.jpg?sz=128", "display_name": "Arish Baig", "link": "https://stackoverflow.com/users/10418445/arish-baig"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1538113433, "post_id": 52517253, "comment_id": 92037101, "body": "This does not seems to be firewall issue. All machines Linux, FreeBSD are on same network. And I am able to send broadcast message from FreeBSD to Linux when I send message on broadcast address X.X.X.255 but not when I send message on 255.255.255.255 , it&#39;s not received  by server machine. Can anyone let me know if there is any bug or limitation in FreeBSD that we can not broadcast UDP message on 255.255.255.255."}, {"owner": {"reputation": 31, "user_id": 10418445, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-neJ98z7Y-nw/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVHSuCO0SP1Kh-UjpkGmAp7v2WD9A/mo/photo.jpg?sz=128", "display_name": "Arish Baig", "link": "https://stackoverflow.com/users/10418445/arish-baig"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1538133033, "post_id": 52517253, "comment_id": 92046755, "body": "Could anyone please check on FreeBSD(compile client code here) and Linux (compile server code here) box, let me know if you are able to replicate the issue."}, {"owner": {"reputation": 2357, "user_id": 1747834, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cea2583950ba41bcbbac8c8705ec1965?s=128&d=identicon&r=PG", "display_name": "Mikhail T.", "link": "https://stackoverflow.com/users/1747834/mikhail-t"}, "edited": false, "score": 0, "creation_date": 1544822442, "post_id": 52517253, "comment_id": 94425672, "body": "Which call is failing and what is the error you are getting? Also <a href=\"https://www.juniper.net/documentation/en_US/junose15.1/topics/concept/ip-broadcast-addressing-overview.html\" rel=\"nofollow noreferrer\">this</a> may be useful..."}, {"owner": {"reputation": 333, "user_id": 7283940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da632019f271c889ae52e0e72df88fe?s=128&d=identicon&r=PG", "display_name": "tsp", "link": "https://stackoverflow.com/users/7283940/tsp"}, "edited": false, "score": 0, "creation_date": 1546178787, "post_id": 52517253, "comment_id": 94793976, "body": "Do you have multiple network interfaces on the machine and want 255.255.255.255 to broadcast on every interface? Normally using INADDR_BROADCAST is just a shorthand to send on the first (primary) network interface with a configured broadcast address."}], "owner": {"reputation": 31, "user_id": 10418445, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-neJ98z7Y-nw/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVHSuCO0SP1Kh-UjpkGmAp7v2WD9A/mo/photo.jpg?sz=128", "display_name": "Arish Baig", "link": "https://stackoverflow.com/users/10418445/arish-baig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 281, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1538019814, "creation_date": 1537963178, "last_edit_date": 1537965152, "question_id": 52517253, "link": "https://stackoverflow.com/questions/52517253/socket-programming-in-c-language-unable-to-broadcast-a-message-from-freebsd-cl", "title": "Socket Programming in C language : Unable to broadcast a message from FreeBSD client to Linux server . Broadcast IP should be 255.255.255.255", "body": "<p><strong>Problem statement --</strong> I am able to establish connection with broadcast IP 255.255.255.255 when both applications are in two different Linux machines. Linux Machine where server is running is replying when client broadcast-ed a message to the above mentioned address. \nBut when I am porting client to FreeBSD machine. I am not able to get message at Linux server machine when I broadcast-ed a message from server (FreeBSD machine) to 255.255.255.255 \nCould you please help me what change I can do in the client/broadcaster source to make it compatible for FreeBSD machine too.\nYou can find sample source code of server/listener and client/broadcaster as below --       </p>\n\n<pre><code>/*\n** listener.c -- a datagram sockets \"server\" demo\n*/\n\n    #include &lt;arpa/inet.h&gt;         // for inet_ntop\n    #include &lt;netdb.h&gt;             // for addrinfo, freeaddrinfo, gai_strerror\n    #include &lt;netinet/in.h&gt;        // for INET6_ADDRSTRLEN, sockaddr_in, sockadd...\n    #include &lt;stdio.h&gt;             // for printf, fprintf, perror, NULL, stderr\n    #include &lt;stdlib.h&gt;            // for exit\n    #include &lt;string.h&gt;            // for memset\n    #include &lt;sys/socket.h&gt;        // for sockaddr_storage, bind, socket, AF_INET\n    #include &lt;unistd.h&gt;            // for close\n\n    #define MYPORT \"4950\" // the port users will be connecting to\n\n    #define MAXBUFLEN 100\n\n    // get sockaddr, IPv4 or IPv6:\n    static void *get_in_addr(struct sockaddr *sa) {\n        if (sa-&gt;sa_family == AF_INET) {\n            return &amp;(((struct sockaddr_in *)sa)-&gt;sin_addr);\n        }\n\n        return &amp;(((struct sockaddr_in6 *)sa)-&gt;sin6_addr);\n    }\n\n    int main(void) {\n        int sockfd;\n        struct addrinfo hints, *servinfo, *p;\n        int rv;\n        ssize_t numbytes;\n        struct sockaddr_storage their_addr;\n        char buf[MAXBUFLEN];\n        socklen_t addr_len;\n        char s[INET6_ADDRSTRLEN];\n\n        memset(&amp;hints, 0, sizeof hints);\n        hints.ai_family = AF_UNSPEC; // set to AF_INET to force IPv4\n        hints.ai_socktype = SOCK_DGRAM;\n        hints.ai_flags = AI_PASSIVE; // use my IP\n\n        if ((rv = getaddrinfo(NULL, MYPORT, &amp;hints, &amp;servinfo)) != 0) {\n            fprintf(stderr, \"getaddrinfo: %s\\n\", gai_strerror(rv));\n            return 1;\n        }\n\n        // loop through all the results and bind to the first we can\n        for (p = servinfo; p != NULL; p = p-&gt;ai_next) {\n            if ((sockfd = socket(p-&gt;ai_family, p-&gt;ai_socktype, p-&gt;ai_protocol)) ==\n                -1) {\n                perror(\"listener: socket\");\n                continue;\n            }\n\n            if (bind(sockfd, p-&gt;ai_addr, p-&gt;ai_addrlen) == -1) {\n                close(sockfd);\n                perror(\"listener: bind\");\n                continue;\n            }\n\n            break;\n        }\n\n        freeaddrinfo(servinfo);\n\n        if (p == NULL) {\n            fprintf(stderr, \"listener: failed to bind socket\\n\");\n            return 2;\n        }\n\n        printf(\"listener: waiting to recvfrom...\\n\");\n\n        addr_len = sizeof their_addr;\n        if ((numbytes = recvfrom(sockfd, buf, MAXBUFLEN - 1, 0,\n                                 (struct sockaddr *)&amp;their_addr, &amp;addr_len)) ==\n            -1) {\n            perror(\"recvfrom\");\n            exit(1);\n        }\n\n        printf(\"listener: got packet from %s\\n\",\n               inet_ntop(their_addr.ss_family,\n                         get_in_addr((struct sockaddr *)&amp;their_addr), s, sizeof s));\n        printf(\"listener: packet is %ld bytes long\\n\", numbytes);\n        buf[numbytes] = '\\0';\n        printf(\"listener: packet contains \\\"%s\\\"\\n\", buf);\n\n        close(sockfd);\n\n        return 0;\n    }\n</code></pre>\n\n<p>Client/Broadcaster sample :</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;unistd.h&gt;\n    #include &lt;errno.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;sys/types.h&gt;\n    #include &lt;sys/socket.h&gt;\n    #include &lt;netinet/in.h&gt;\n    #include &lt;arpa/inet.h&gt;\n    #include &lt;netdb.h&gt;\n\n    #define SERVERPORT 4950    // the port users will be connecting to\n\n    int main(int argc, char *argv[])\n    {\n        int sockfd;\n        struct sockaddr_in their_addr; // connector's address information\n        struct hostent *he;\n        int numbytes;\n        int broadcast = 1;\n        //char broadcast = '1'; // if that doesn't work, try this\n\n        if (argc != 3) {\n            fprintf(stderr,\"usage: broadcaster hostname message\\n\");\n            exit(1);\n        }\n\n        if ((he=gethostbyname(argv[1])) == NULL) {  // get the host info\n            perror(\"gethostbyname\");\n            exit(1);\n        }\n\n        if ((sockfd = socket(AF_INET, SOCK_DGRAM, 0)) == -1) {\n            perror(\"socket\");\n            exit(1);\n        }\n\n        // this call is what allows broadcast packets to be sent:\n        if (setsockopt(sockfd, SOL_SOCKET, SO_BROADCAST, &amp;broadcast,\n            sizeof broadcast) == -1) {\n            perror(\"setsockopt (SO_BROADCAST)\");\n            exit(1);\n        }\n\n        their_addr.sin_family = AF_INET;     // host byte order\n        their_addr.sin_port = htons(SERVERPORT); // short, network byte order\n        their_addr.sin_addr = *((struct in_addr *)he-&gt;h_addr);\n        memset(their_addr.sin_zero, '\\0', sizeof their_addr.sin_zero);\n\n        if ((numbytes=sendto(sockfd, argv[2], strlen(argv[2]), 0,\n                 (struct sockaddr *)&amp;their_addr, sizeof their_addr)) == -1) {\n            perror(\"sendto\");\n            exit(1);\n        }\n\n        printf(\"sent %d bytes to %s\\n\", numbytes,\n            inet_ntoa(their_addr.sin_addr));\n\n        close(sockfd);\n\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "packet-sniffers"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10418239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a8d0b4f06b9680b6498171aa4b22338?s=128&d=identicon&r=PG&f=1", "display_name": "programming_noob", "link": "https://stackoverflow.com/users/10418239/programming-noob"}, "edited": false, "score": 0, "creation_date": 1538040322, "post_id": 52519211, "comment_id": 92006498, "body": "Thanks. It fixed the IP addresses but what about the Ethernet Addresses ?  I tried by making different pointers but nothing worked."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1538088543, "post_id": 52519211, "comment_id": 92031926, "body": "<code>ether_ntoa</code> probably uses a static internal buffer, which means both function calls point to the same place, so only the last call is reflected.  You need to make the two calls in two separate lines and copy the result."}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": true, "score": 1, "last_activity_date": 1537969426, "creation_date": 1537969426, "answer_id": 52519211, "question_id": 52516906, "link": "https://stackoverflow.com/questions/52516906/same-ip-addresses-while-capturing-packets-under-linux-c-program/52519211#52519211", "title": "Same IP Addresses while capturing Packets under Linux (C Program)", "body": "<p>You're using the same <code>buf</code> to hold both IP addresses:</p>\n\n<pre><code>inet_ntop(AF_INET, &amp;ip-&gt;saddr, buf, sizeof(buf)),\ninet_ntop(AF_INET, &amp;ip-&gt;daddr, buf, sizeof(buf))\n</code></pre>\n\n<p>Because you're using the <em>same</em> buffer, and both calls to <code>inet_ntop()</code> are done before the call to <code>printf()</code>, the last call to <code>inet_ntop()</code> will overwrite the results from the first call.</p>\n"}, {"tags": [], "owner": {"reputation": 376, "user_id": 4934748, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/AwYRV.jpg?s=128&g=1", "display_name": "Tech-IO", "link": "https://stackoverflow.com/users/4934748/tech-io"}, "is_accepted": false, "score": 0, "last_activity_date": 1538083561, "creation_date": 1538083561, "answer_id": 52545369, "question_id": 52516906, "link": "https://stackoverflow.com/questions/52516906/same-ip-addresses-while-capturing-packets-under-linux-c-program/52545369#52545369", "title": "Same IP Addresses while capturing Packets under Linux (C Program)", "body": "<p>If following the first Advise, wouldn't work. Maybe you need a Buffer for Ethernet too ? </p>\n\n<p>E.g. </p>\n\n<blockquote>\n  <p>struct ethhdr *eth = (struct ethhdr *)Buffer; </p>\n</blockquote>\n\n<p>and get the Data with </p>\n\n<blockquote>\n  <p>eth->h_dest[0] , eth->h_dest[1] , eth->h_dest[2] , eth->h_dest[3] , eth->h_dest[4] , >eth->h_dest[5] </p>\n</blockquote>\n\n<p>?</p>\n"}], "owner": {"reputation": 23, "user_id": 10418239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a8d0b4f06b9680b6498171aa4b22338?s=128&d=identicon&r=PG&f=1", "display_name": "programming_noob", "link": "https://stackoverflow.com/users/10418239/programming-noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 52519211, "answer_count": 2, "score": 0, "last_activity_date": 1538083561, "creation_date": 1537962047, "last_edit_date": 1537966533, "question_id": 52516906, "link": "https://stackoverflow.com/questions/52516906/same-ip-addresses-while-capturing-packets-under-linux-c-program", "title": "Same IP Addresses while capturing Packets under Linux (C Program)", "body": "<p>I am receiving network packets by writing a code in c. So far I am receiving packets correctly but the only problem I'm facing is that I'm having same IP addresses for Ethernet, TCP and UDP. i'm not having any trouble while receiving via tcpdump.  </p>\n\n<p>Ethernet source of my system is: <code>b0:10:41:fc:d7:2f</code><br>\nAnd IP address of my interface is: <code>192.168.10.145</code></p>\n\n<p>These are received packets:</p>\n\n<blockquote>\n  <p>162 >>> Received packet with 66 bytes:     Ethernet src:\n  b0:10:41:fc:d7:2f dst: b0:10:41:fc:d7:2f type: 0x800  IP version: 4\n  ihl: 5 ttl: 64 protocol: 6 src: 192.168.10.145 dst 192.168.10.145     TCP\n  src: 46888 dst: 80 seq: 3048209837 win: 4508 ACK          000000: b728 0050\n  b5af fdad 0e1d 21a1 8010 119c     .(.P......!.....        0x0010: e258 0000\n  0101 080a 5a05 1f81 0595 4669     </p>\n  \n  <p>163 >>> Received packet with 66 bytes:  Ethernet src:\n  b0:10:41:fc:d7:2f dst: b0:10:41:fc:d7:2f type: 0x800  IP version: 4\n  ihl: 5 ttl: 64 protocol: 6 src: 192.168.10.145 dst 192.168.10.145     TCP\n  src: 38836 dst: 443 seq: 1969857171 win: 341 ACK          000000: 97b4 01bb\n  7569 a293 0473 15bc 8010 0155     ....ui...s.....U        0x0010: 11f1 0000\n  0101 080a 4011 29b5 45f5 c4da     </p>\n  \n  <p>164 >>> Received packet with 1024 bytes:    Ethernet src:\n  0:1a:a0:3f:d6:fc dst: 0:1a:a0:3f:d6:fc type: 0x800    IP version: 4 ihl:\n  5 ttl: 64 protocol: 6 src: 110.93.233.24 dst 110.93.233.24    TCP src:\n  80 dst: 46888 seq: 236790177 win: 595 ACK         000000: 0050 b728 0e1d\n  21a1 b5af fdad 8010 0253  .P.(..!........S        0x0010: 6e5f 0000 0101\n  080a 0595 46a1 5a05 199a  n_........F.Z...        0x0020: f107 eb73 1b82\n  1492 c88f e84c 101a 9416  ...s.......L....        0x0030: 9a27 900f 2020\n  1985 836f 79d5 8a26 15fa  .'..  ...oy..&amp;..</p>\n</blockquote>\n\n<p>And this is my code:</p>\n\n<pre><code>layer2: {\nstruct ethhdr *eth = (struct ethhdr*) data;\nprintf(\"\\tEthernet src: %s dst: %s type: %#04x\\n\",\n    ether_ntoa((const struct ether_addr*) eth-&gt;h_source),\n    ether_ntoa((const struct ether_addr*) eth-&gt;h_dest),\n    ntohs(eth-&gt;h_proto)\n);\nprotocol = ntohs(eth-&gt;h_proto);\nnext_hdr = (char *) (eth + 1);}\n\nlayer3: switch (protocol) {\n    case ETH_P_IP: {\n        /* Parse IP protocol */\n        struct iphdr *ip = (struct iphdr*) next_hdr;\n        char buf[32];\n        printf(\"\\tIP version: %u ihl: %u ttl: %u protocol: %u src: %s dst %s\\n\",    \n            ip-&gt;version,\n            ip-&gt;ihl,\n            ip-&gt;ttl,\n            ip-&gt;protocol,\n            inet_ntop(AF_INET, &amp;ip-&gt;saddr, buf, sizeof(buf)),\n            inet_ntop(AF_INET, &amp;ip-&gt;daddr, buf, sizeof(buf))\n        );\n</code></pre>\n\n<p>What am I doing wrong ?</p>\n"}, {"tags": ["pipe", "c"], "comments": [{"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 3, "creation_date": 1537961550, "post_id": 52539286, "comment_id": 92018016, "body": "You would end up with an array of pipes, one element connecting the parent with a particular child. They can&#39;t share a single pipe."}, {"owner": {"reputation": 5, "user_id": 8030082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43fefd57ca643e964cdae5cc269a9f3?s=128&d=identicon&r=PG&f=1", "display_name": "Reece Jocumsen", "link": "https://stackoverflow.com/users/8030082/reece-jocumsen"}, "reply_to_user": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 0, "creation_date": 1538006000, "post_id": 52539286, "comment_id": 92018017, "body": "@Kusalananda thank you so much, I figured that&#39;s what I would have to do, just wanted some clarification."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1538044016, "post_id": 52539286, "comment_id": 92018018, "body": "Even though you can&#39;t post your specific code, you should be able to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates this part of the problem, without being your actual program."}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1538058244, "question_id": 471555}, "owner": {"reputation": 5, "user_id": 8030082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43fefd57ca643e964cdae5cc269a9f3?s=128&d=identicon&r=PG&f=1", "display_name": "Reece Jocumsen", "link": "https://stackoverflow.com/users/8030082/reece-jocumsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1538058244, "creation_date": 1537960746, "question_id": 52539286, "link": "https://stackoverflow.com/questions/52539286/pipe-fork-and-for-loops", "title": "pipe(), fork() and for loops", "body": "<p>I am writing a program for an assignment where I am supposed to create multiple child processes from a parent, and then continually pipe information to their standard inputs to run a text-based game (and then get info from the children through their standard outputs, but I am going to sort that out later after I sort out stdin).</p>\n\n<p>The issue I am having is that I can either get the first line of input to go to all the children and then no others, or get any lines I want to go to one. Unfortunately I can't post my code for this section because my university is very strict about posting code samples, but I can provide a basic outline below.</p>\n\n<p>Parent:</p>\n\n<pre><code>for all players:\n    make a pipe between player and parent\n    fork()\n    if child:\n        close write end, redirect read to stdin, close read end\n        set up parameters for player process, then execute player program\n    else if parent:\n        close read end\n        write stuff to write end of pipe\n        wait for process to be done\n</code></pre>\n\n<p>The child basically just reads from stdin and uses the information to make some variables, etc etc.</p>\n\n<p>Would you provide suggestions of things to check or try.</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "edited": false, "score": 0, "creation_date": 1537960849, "post_id": 52516493, "comment_id": 91972529, "body": "You tagged your question with two distinct languages: C++ and C. Which is it?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 2, "creation_date": 1537960881, "post_id": 52516493, "comment_id": 91972546, "body": "Arrays do not get copied when passed to a function - when you pass an array expression to a function, the expression is implicitly converted to a pointer to the first element.  And is this supposed to be C or C++?"}, {"owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "edited": false, "score": 0, "creation_date": 1537960917, "post_id": 52516493, "comment_id": 91972568, "body": "Thx for the question.  The program is a .cpp, which is the MS default.  But the code is actually just standard C."}, {"owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "edited": false, "score": 1, "creation_date": 1537961060, "post_id": 52516493, "comment_id": 91972652, "body": ".cpp is for C++ code. If that&#39;s the default extension there is a great chance your project is set to C++ and will be compiled using a C++ compiler, not a C compiler. It&#39;s important to know which language you&#39;re actually using to properly help you."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1537961106, "post_id": 52516493, "comment_id": 91972675, "body": "C++ is not C. For C++ the answer is &quot;you are doing it all wrong, forget everything you know and start over&quot;. For C, the answer is &quot;don&#39;t be a <a href=\"http://wiki.c2.com/?ThreeStarProgrammer\" rel=\"nofollow noreferrer\">three star programmer</a>."}, {"owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "edited": false, "score": 0, "creation_date": 1537961174, "post_id": 52516493, "comment_id": 91972714, "body": "Thx for changing the tag to just be C.  Will try to recompile using the C compiler."}, {"owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "edited": false, "score": 0, "creation_date": 1537961251, "post_id": 52516493, "comment_id": 91972764, "body": "I have to agree with you, n.m.  I don&#39;t want to use 3 stars, but I just want to be able to pass a single pointer to an array of pointers to char.  Is this even possible?"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1537961264, "post_id": 52516493, "comment_id": 91972773, "body": "@J.Toran Just rename your source file to <code>*.c</code> and <code>cl</code> will compile them in C mode. You are using <code>strncpy_s()</code> inclorrectly, please RTFM."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1537961410, "post_id": 52516493, "comment_id": 91972844, "body": "Why do you need to pass a pointer to an array?"}, {"owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537961856, "post_id": 52516493, "comment_id": 91973089, "body": "@Swordfish,  I did as you said and found that the C compiler works a little differently than the C++ compiler on the strncpy_s.  So I added a sizeof(InpFilPth) and it compiled okay.  However the results were the same."}, {"owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1537961944, "post_id": 52516493, "comment_id": 91973144, "body": "@n.m.  I don&#39;t actually need to pass a pointer to the array.  I just wanted to do it that way so I didn&#39;t have to take up all the space on the stack that would be needed to pass the entire array of pointers.  Would rather just pass a single pointer."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537962075, "post_id": 52516493, "comment_id": 91973236, "body": "@J.Toran An Array will *never* be passed by value! Also <code>strncpy_s()</code> is the same function that doesn&#39;t care if it is called by C++- or C-code. When your compiler didn&#39;t warn you when compiling as C++-code your warning level setting is too low. Wrong is wrong."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1537962203, "post_id": 52516493, "comment_id": 91973312, "body": "You could not &quot;pass an entire array&quot; even if you wanted to. C arrays don&#39;t work this way. You always pass a pointer to the first element of the array. Please learn about <i>array-to-pointer decay</i>. In your case however you don&#39;t need to pass an array in any shape or form. You need to <i>return an array</i>."}, {"owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "edited": false, "score": 0, "creation_date": 1537962646, "post_id": 52516493, "comment_id": 91973591, "body": "Thx for all the replies.  Excuse my ignorance, n.m.  Are you saying that only the space of one pointer is used up on the stack?  If so, then I don&#39;t need to worry about the space taken up by 999,999 pointers, right?"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537964966, "post_id": 52516493, "comment_id": 91975031, "body": "@J.Toran Y e s !"}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "edited": false, "score": 0, "creation_date": 1537962250, "post_id": 52516848, "comment_id": 91973346, "body": "Thx for the reply, Swordfish.  I&#39;m trying to figure out if you&#39;re passing the entire array of pointers, or not.  Thx again."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "edited": false, "score": 1, "creation_date": 1537962381, "post_id": 52516848, "comment_id": 91973432, "body": "A single pointer is passed both times. There is no way to pass &quot;a whole array&quot; to a function. Not in C and not in C++. It is also not possible to return an array from a function, only pointers."}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": true, "score": 2, "last_activity_date": 1537961869, "creation_date": 1537961869, "answer_id": 52516848, "question_id": 52516493, "link": "https://stackoverflow.com/questions/52516493/dont-know-how-to-implement-pointer-to-array-of-pointers-to-char/52516848#52516848", "title": "Don&#39;t know how to implement pointer to array of pointers to char", "body": "<pre><code>#include &lt;stddef.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid foo(char* bar[10]) { // a real array\n    for (int i = 0; i &lt; 10; ++i) {\n        bar[i] = calloc(2, 1);\n        bar[i][0] = '0' + i;\n    }\n}\n\nvoid xox(char **qux) { // pointer to some char-pointers on the heap\n    for (int i = 0; i &lt; 10; ++i) {\n        qux[i] = calloc(2, 1);\n        qux[i][0] = '0' + i;\n    }\n}\n\nint main(void)\n{\n    char* bar[10]; // a \"real\" array\n    foo(bar);\n\n    for (size_t i = 0; i &lt; 10; ++i)\n        puts(bar[i]);\n    putchar('\\n');\n\n    // cleanup:\n    for (size_t i = 0; i &lt; 10; ++i)\n        free(bar[i]);\n\n    // plan b:\n    char **qux = calloc(10, sizeof(*qux));\n    xox(qux);\n\n    for (size_t i = 0; i &lt; 10; ++i)\n        puts(qux[i]);\n    putchar('\\n');\n\n    // cleanup:\n    for (size_t i = 0; i &lt; 10; ++i)\n        free(qux[i]);\n    free(qux);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1537962421, "post_id": 52516884, "comment_id": 91973457, "body": "Thanks for the edit, Swordfish. All those arrays, pointers, heap and stack got me confused for a second."}, {"owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "edited": false, "score": 0, "creation_date": 1537962764, "post_id": 52516884, "comment_id": 91973657, "body": "Thank you for the reply, Blaze, and the edit Swordfish."}], "tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 0, "last_activity_date": 1537962223, "last_edit_date": 1537962223, "creation_date": 1537961975, "answer_id": 52516884, "question_id": 52516493, "link": "https://stackoverflow.com/questions/52516493/dont-know-how-to-implement-pointer-to-array-of-pointers-to-char/52516884#52516884", "title": "Don&#39;t know how to implement pointer to array of pointers to char", "body": "<blockquote>\n  <p>What I would like to do is pass a single pointer to the memory\n  allocated for the array of pointers.</p>\n</blockquote>\n\n<p>Suppose you have some integers on the heap, like this:</p>\n\n<pre><code>int *integers = (int*)malloc(4 * sizeof(int));\n</code></pre>\n\n<p>And now suppose you have some pointers, also on the heap:</p>\n\n<pre><code>int **pointers = (int**)malloc(4*sizeof(int*));\n</code></pre>\n\n<p>Now let's assign the pointers to the addresses of the integers:</p>\n\n<pre><code>pointers[0] = &amp;integers[0];\npointers[1] = &amp;integers[1];\npointers[2] = &amp;integers[2];\npointers[3] = &amp;integers[3];\n</code></pre>\n\n<p>In this example, <code>pointers</code> is a pointer to an array of pointers (on the heap) pointing to some integers (also on the heap). You can freely pass <code>pointers</code> around and use it in another function.</p>\n\n<p>Or, if you wanted the array of pointer to be on the stack:</p>\n\n<pre><code>int* pointers[4];\npointers[0] = &amp;integers[0];\npointers[1] = &amp;integers[1];\npointers[2] = &amp;integers[2];\npointers[3] = &amp;integers[3];\nint **ppointer = pointers;\n</code></pre>\n\n<p>Now <code>ppointer</code> is also a pointer pointing to an array of pointers that point to some integers on the heap. Just notice that this time, those pointers are on the stack, not on the heap. So if you return from this function, they're out of scope and you may not access them anymore.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1537973178, "creation_date": 1537973178, "answer_id": 52520491, "question_id": 52516493, "link": "https://stackoverflow.com/questions/52516493/dont-know-how-to-implement-pointer-to-array-of-pointers-to-char/52520491#52520491", "title": "Don&#39;t know how to implement pointer to array of pointers to char", "body": "<p>You're operating under a misconception.  Neither C nor C++ pass a copy of an array to a function, nor can they return an array from a function.  </p>\n\n<p>Except when it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, or is a string literal used to initialize a character array in a declaration, an <em>expression</em> of type \"N-element array of <code>T</code>\" will be converted (\"decay\") to an expression of type \"pointer to <code>T</code>\", and the value of the expression is the address of the first element.</p>\n\n<p>Thus, if you declare an array like</p>\n\n<pre><code>char *ptrs[N];\n</code></pre>\n\n<p>and pass it to a function as</p>\n\n<pre><code>foo( ptrs );\n</code></pre>\n\n<p>the <em>expression</em> <code>ptrs</code> is implicitly converted from \"N-element array of <code>char *</code>\" to \"pointer to <code>char *</code>\", and what <code>foo</code> actually receives is a pointer to the first element of the array - it's effectively the same as writing</p>\n\n<pre><code>foo( &amp;ptrs[0] );\n</code></pre>\n\n<p>The prototype can be written as either</p>\n\n<pre><code>void foo( char **ptrs )\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void foo( char *ptrs[] )\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void foo( char *ptrs[N] )\n</code></pre>\n\n<p>In a function parameter declaration, array declarators are \"adjusted\" to be pointer declarators - IOW, <code>T a[N]</code> and <code>T a[]</code> are both interpreted to mean <code>T *a</code>.  This is <em>only</em> true in a function parameter declaration, though.  </p>\n\n<p>As a matter of style...</p>\n\n<p>In C, the cast on <code>malloc</code> is unnecessary<sup>1</sup>, and under C89 it can suppress a useful diagnostic if you forget to include <code>stdlib.h</code> or otherwise don't have a declaration for <code>malloc</code> (or <code>calloc</code> or <code>realloc</code>) in scope.  Under C99 and later, you'll get a diagnostic for not having a declaration, but C89 still allowed implicit <code>int</code> declarations, and the cast will prevent the compiler from yelling at you because <code>int</code> and pointer types are not compatible.  I bring this up because MS's support for C past C89 is a bit spotty.  </p>\n\n<p>To minimize your maintenance burden, it's better to avoid explicitly naming types in a <code>malloc</code> call.  You can rewrite</p>\n\n<pre><code>SrcArr = (char **)malloc(999999 * sizeof(char *));\n</code></pre>\n\n<p>as</p>\n\n<pre><code>SrcArr = malloc( 999999 * sizeof *SrcArr ); // you sure you need that many elements??!\n</code></pre>\n\n<p>Since <code>SrcArr</code> has type <code>char **</code>, the <em>expression</em> <code>*SrcArr</code> has type <code>char *</code>, so <code>sizeof *SrcArr</code> is the same as <code>sizeof (char **)</code>.  In general, a <code>malloc</code> call can be written</p>\n\n<pre><code>T *p = malloc( N * sizeof *p );\n</code></pre>\n\n<p>or</p>\n\n<pre><code>T *p;\n...\np = malloc( N * sizeof *p );\n</code></pre>\n\n<p>The same is true for <code>calloc</code> and <code>realloc</code>.  </p>\n\n<p><hr>\n<sup></p>\n\n<ol>\n<li>This is not the cast in C++, since C++ doesn't allow implicit conversion from <code>void *</code> to other pointer types, but if you're writing C++ you shouldn't be using <code>malloc</code> <em>anyway</em>.  \n</ol>\n\n<p></sup></p>\n"}], "owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 52516848, "answer_count": 3, "score": -1, "last_activity_date": 1537973178, "creation_date": 1537960658, "last_edit_date": 1537960969, "question_id": 52516493, "link": "https://stackoverflow.com/questions/52516493/dont-know-how-to-implement-pointer-to-array-of-pointers-to-char", "title": "Don&#39;t know how to implement pointer to array of pointers to char", "body": "<p>I'm not great with pointers.  I know enough to get an array of pointers to char to work, as in the first example below.  But I don't want to pass an entire array of pointers, because it takes up too much room on the stack.  What I would like to do is pass a single pointer to the memory allocated for the array of pointers.  I have no idea how to do this.</p>\n\n<p>This program works:</p>\n\n<pre><code>#include \"pch.h\"\n#include \"$StdHdr.h\"\n#include \"TmpTstPtr1.h\"\n\n#define SRC_LIN_SIZ 150\n\nint main(int ArgCnt, char * ArgVal[])\n{\n    char        InpFilPth[MAX_PATH + 1];\n    FILE        * InpFilPtr;\n    char        ** SrcArr;\n    unsigned    Sub1;\n    unsigned    SrcArrCnt = 0;\n\n    strncpy_s(InpFilPth, \"TmpTstPtr1.cpp\", strlen(\"TmpTstPtr1.cpp\"));\n    fopen_s(&amp;InpFilPtr, InpFilPth, \"r\");\n    SrcArr = (char **)malloc(999999 * sizeof(char *));\n    LodSrcArr(InpFilPtr, SrcArr, &amp;SrcArrCnt);\n    for (Sub1 = 0; Sub1 &lt; SrcArrCnt; Sub1++) {\n        printf(\"SrcArr[%d] = %s\\n\", Sub1, SrcArr[Sub1]);\n    }\n    fclose(InpFilPtr);\n\n    return 0;\n}\n\nvoid LodSrcArr(FILE * InpFilPtr, char ** SrcArr, unsigned * SrcArrCnt)\n{\n    char        SrcLin[SRC_LIN_SIZ + 1];\n    char        * GetStrPtr;\n\n\n    GetStrPtr = GetStr(SrcLin, SRC_LIN_SIZ, InpFilPtr);\n    while (GetStrPtr != NULL) {\n        SrcArr[*SrcArrCnt] = (char *)malloc(SRC_LIN_SIZ + 1);\n        //      CpySiz(SrcArr[*SrcArrCnt], strlen(SrcLin) + 1, SrcLin);\n        errno = strncpy_s(SrcArr[*SrcArrCnt], SRC_LIN_SIZ + 1, SrcLin, strlen(SrcLin));\n        (*SrcArrCnt)++;\n        GetStrPtr = GetStr(SrcLin, SRC_LIN_SIZ, InpFilPtr);\n    }\n}\n\n\nchar * GetStr(char * Str, const int MaxChr, FILE * InpFilPtr)\n{\n    char        * InpRtnVal = NULL;\n    unsigned    Sub1;\n\n    //  Get string from input file.  Find the end of the string if something entered.\n    InpRtnVal = fgets(Str, MaxChr + 1, InpFilPtr);\n    if (InpRtnVal != NULL) {\n        Sub1 = 0;\n        while (Str[Sub1] != '\\n' &amp;&amp; Str[Sub1] != '\\0') {\n            Sub1++;\n        }\n        //  Replace newline with null.\n        if (Str[Sub1] == '\\n') {\n            Str[Sub1] = '\\0';\n        }\n    }\n    return InpRtnVal;\n</code></pre>\n\n<p>The following program doesn't even come close:</p>\n\n<pre><code>#include \"pch.h\"\n#include \"$StdHdr.h\"\n#include \"TmpTstPtr2.h\"\n\n#define SRC_LIN_SIZ 150\n\nint main(int ArgCnt, char * ArgVal[])\n{\n    char        InpFilPth[MAX_PATH + 1];\n    FILE        * InpFilPtr;\n    char        ** SrcArr;\n    unsigned    Sub1;\n    unsigned    SrcArrCnt = 0;\n    char        *** SrcArrPtr = NULL;\n\n    strncpy_s(InpFilPth, \"TmpTstPtr2.cpp\", strlen(\"TmpTstPtr2.cpp\"));\n    fopen_s(&amp;InpFilPtr, InpFilPth, \"r\");\n    SrcArr = (char **)malloc(999999 * sizeof(char *));\n    SrcArrPtr = &amp;SrcArr;\n    LodSrcArr(InpFilPtr, SrcArrPtr, &amp;SrcArrCnt);\n    SrcArrPtr = &amp;SrcArr;\n    for (Sub1 = 0; Sub1 &lt; SrcArrCnt; Sub1++) {\n//      printf(\"SrcArr[%d] = %s\\n\", Sub1, SrcArr[Sub1]);    // got \"Exception thrown: read access violation. it was 0xCDCDCDCD.\"\n        printf(\"SrcArr[%d] = %s\\n\", Sub1, **SrcArrPtr);     // get 75 lines of garbage\n        (**SrcArrPtr) += sizeof(char *);\n    }\n    fclose(InpFilPtr);\n\n    return 0;\n}\n\n\nvoid LodSrcArr(FILE * InpFilPtr, char *** SrcArrPtr, unsigned * SrcArrCnt)\n{\n    char        SrcLin[SRC_LIN_SIZ + 1];\n    char        * GetStrPtr;\n\n\n    GetStrPtr = GetStr(SrcLin, SRC_LIN_SIZ, InpFilPtr);\n    //  while (GetStrPtr != NULL and *SrcArrCnt == 0) {\n    while (GetStrPtr != NULL) {\n        **SrcArrPtr = (char *)malloc(SRC_LIN_SIZ + 1);\n        //      CpySiz(SrcArr[*SrcArrCnt], strlen(SrcLin) + 1, SrcLin);\n        errno = strncpy_s(**SrcArrPtr, SRC_LIN_SIZ + 1, SrcLin, strlen(SrcLin));\n        (**SrcArrPtr) += sizeof(char *);\n        (*SrcArrCnt)++;\n        GetStrPtr = GetStr(SrcLin, SRC_LIN_SIZ, InpFilPtr);\n    }\n}\n\n\nchar * GetStr(char * Str, const int MaxChr, FILE * InpFilPtr)\n{\n    char        * InpRtnVal = NULL;\n    unsigned    Sub1;\n\n    //  Get string from input file.  Find the end of the string if something entered.\n    InpRtnVal = fgets(Str, MaxChr + 1, InpFilPtr);\n    if (InpRtnVal != NULL) {\n        Sub1 = 0;\n        while (Str[Sub1] != '\\n' &amp;&amp; Str[Sub1] != '\\0') {\n            Sub1++;\n        }\n        //  Replace newline with null.\n        if (Str[Sub1] == '\\n') {\n            Str[Sub1] = '\\0';\n        }\n    }\n    return InpRtnVal;\n}\n</code></pre>\n\n<p>As the comments say, when I try to access <code>SrcArr</code> via a subscript, I get a run-time error.  When I try to access via the pointer, I get garbage.  The problem may be where I say <code>SrcArrPtr = &amp;SrcArr;</code>.  I don't know if it's significant, but the garbage printed is 4 characters shorter with each subsequent line.  As if it's actually printing the array of pointers itself, rather than the strings they point to.  I dunno.</p>\n\n<p>The reason I coded it as above is in order to get the program to compile.  I've never tried to use 3 pointers before.  Is what I'm trying to do even possible?  If so, can someone show me how?  An explanation of how it works would be nice, but not necessary.  (I'm using Visual Studio 2017, though I don't think it matters.)</p>\n\n<p>TIA.</p>\n"}, {"tags": ["c", "arrays", "pointers", "enums"], "comments": [{"owner": {"reputation": 164, "user_id": 6213491, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/932448850203824/picture?type=large", "display_name": "Jagadeesh Dondeti", "link": "https://stackoverflow.com/users/6213491/jagadeesh-dondeti"}, "edited": false, "score": 1, "creation_date": 1537961208, "post_id": 52516487, "comment_id": 91972731, "body": "Try doing <code>char *var1 = argv[1];</code>"}, {"owner": {"reputation": 23, "user_id": 7738680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529fe97c82d2f81c4f8d765e50ffbaeb?s=128&d=identicon&r=PG&f=1", "display_name": "Emily", "link": "https://stackoverflow.com/users/7738680/emily"}, "reply_to_user": {"reputation": 164, "user_id": 6213491, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/932448850203824/picture?type=large", "display_name": "Jagadeesh Dondeti", "link": "https://stackoverflow.com/users/6213491/jagadeesh-dondeti"}, "edited": false, "score": 0, "creation_date": 1537961757, "post_id": 52516487, "comment_id": 91973033, "body": "I got an error &quot;ISO C90 forbids mixed declarations and code&quot; and &quot;unused variable &#39;var1&#39;&quot;"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1537966699, "post_id": 52516487, "comment_id": 91976153, "body": "<code>argv[i]</code> is a pointer to a string, while <code>var1</code> is an integer value defined via an enum. That cannot match. Please describe more detailled what you try to do."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7738680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529fe97c82d2f81c4f8d765e50ffbaeb?s=128&d=identicon&r=PG&f=1", "display_name": "Emily", "link": "https://stackoverflow.com/users/7738680/emily"}, "edited": false, "score": 0, "creation_date": 1537961625, "post_id": 52516664, "comment_id": 91972950, "body": "What do you suggest I do? Should I initialise all var1,2,3 to say =1 then change them through the same process. Would it still be possible then?"}, {"owner": {"reputation": 1844, "user_id": 8238512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ouYe.jpg?s=128&g=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8238512/rizwan"}, "reply_to_user": {"reputation": 23, "user_id": 7738680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529fe97c82d2f81c4f8d765e50ffbaeb?s=128&d=identicon&r=PG&f=1", "display_name": "Emily", "link": "https://stackoverflow.com/users/7738680/emily"}, "edited": false, "score": 0, "creation_date": 1537961721, "post_id": 52516664, "comment_id": 91973013, "body": "@Emily - struct is another option here. Is it necessary to use enums ?"}, {"owner": {"reputation": 23, "user_id": 7738680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529fe97c82d2f81c4f8d765e50ffbaeb?s=128&d=identicon&r=PG&f=1", "display_name": "Emily", "link": "https://stackoverflow.com/users/7738680/emily"}, "reply_to_user": {"reputation": 1844, "user_id": 8238512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ouYe.jpg?s=128&g=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8238512/rizwan"}, "edited": false, "score": 0, "creation_date": 1537961853, "post_id": 52516664, "comment_id": 91973086, "body": "@Rizwan Yes because its part of a project and it seems to me I must store these values in enum, I cant change what the project asks me to do. Some startup code has these vars already in the enum."}, {"owner": {"reputation": 1844, "user_id": 8238512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ouYe.jpg?s=128&g=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8238512/rizwan"}, "reply_to_user": {"reputation": 23, "user_id": 7738680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529fe97c82d2f81c4f8d765e50ffbaeb?s=128&d=identicon&r=PG&f=1", "display_name": "Emily", "link": "https://stackoverflow.com/users/7738680/emily"}, "edited": false, "score": 0, "creation_date": 1537962022, "post_id": 52516664, "comment_id": 91973202, "body": "@Emily -  if you want to store, modify and use a logical group of values. struct is the answer. Enum needs to be defined at compile times only, can&#39;t be modified later. Enum can only be used to get values later on."}, {"owner": {"reputation": 23, "user_id": 7738680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529fe97c82d2f81c4f8d765e50ffbaeb?s=128&d=identicon&r=PG&f=1", "display_name": "Emily", "link": "https://stackoverflow.com/users/7738680/emily"}, "reply_to_user": {"reputation": 1844, "user_id": 8238512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ouYe.jpg?s=128&g=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8238512/rizwan"}, "edited": false, "score": 0, "creation_date": 1537962235, "post_id": 52516664, "comment_id": 91973333, "body": "@Rizwan Yes thats correct I wont need to modify these var1,2,3 at all. I would only need the value for later reference. How can I do what I asked?"}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1538038746, "post_id": 52516664, "comment_id": 92005517, "body": "I don&#39;t understand what you need to do. What do you mean with &quot;need the value for later reference&quot;? You need to describe your problem more clearly, and maybe  give a concrete example (in the question)."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 0, "last_activity_date": 1537961235, "creation_date": 1537961235, "answer_id": 52516664, "question_id": 52516487, "link": "https://stackoverflow.com/questions/52516487/how-to-assign-enum-variable-to-a-pointer-of-array-index/52516664#52516664", "title": "How to assign enum variable to a pointer of array index", "body": "<p>You can't. Enum values must be known at compile time, but <code>argv</code> is only known at run time.</p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 2541947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcXSH.png?s=128&g=1", "display_name": "mrKindo", "link": "https://stackoverflow.com/users/2541947/mrkindo"}, "is_accepted": false, "score": 0, "last_activity_date": 1537962619, "creation_date": 1537962619, "answer_id": 52517069, "question_id": 52516487, "link": "https://stackoverflow.com/questions/52516487/how-to-assign-enum-variable-to-a-pointer-of-array-index/52517069#52517069", "title": "How to assign enum variable to a pointer of array index", "body": "<p>You cannot change the values of <code>enum</code> at run-time, <code>structs</code> are the best implementation here, I advise you change your code to this;</p>\n\n<pre><code>struct unit{ var1, var2, var3};\n</code></pre>\n\n<p>Then you can use a pointer to manipulate the values.</p>\n"}], "owner": {"reputation": 23, "user_id": 7738680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529fe97c82d2f81c4f8d765e50ffbaeb?s=128&d=identicon&r=PG&f=1", "display_name": "Emily", "link": "https://stackoverflow.com/users/7738680/emily"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1537962619, "creation_date": 1537960639, "last_edit_date": 1537961060, "question_id": 52516487, "link": "https://stackoverflow.com/questions/52516487/how-to-assign-enum-variable-to-a-pointer-of-array-index", "title": "How to assign enum variable to a pointer of array index", "body": "<p>Say I have <code>enum unit{ var1, var2, var3};</code>\nThen I have an array in the main function </p>\n\n<pre><code>int main (int argc, char *argv[]);\n</code></pre>\n\n<p>I want to assign <code>argv[1]</code> to <code>var1</code>, where <code>argv[1]</code> was input through command line, I m not sure how to go about doing this for pointer of array. I know how to get the input from command line but trouble assigning it to <code>var1</code>.</p>\n"}, {"tags": ["c", "sockets", "tcp", "char"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 1, "creation_date": 1537959772, "post_id": 52516122, "comment_id": 91971918, "body": "<code>read</code> returns the number of read bytes, not the value it reads. It writes the content into the buffer, which you did not initialize to point to something meaningful."}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1537960413, "post_id": 52516122, "comment_id": 91972290, "body": "Unless you know that the byte in the structure following <code>.identifier</code> is a NUL byte your <code>strlen()</code> call will return the wrong length."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1537987581, "post_id": 52516122, "comment_id": 91988137, "body": "You are asking <code>read()</code> to receive only 1 byte, that is what the 3rd parameter is for. So that is why its return value is 1.  Also, the return value is an <code>ssize_t</code>, not a <code>char</code>"}], "answers": [{"comments": [{"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1537960293, "post_id": 52516309, "comment_id": 91972218, "body": "It&#39;s almost never necessary to malloc a single byte.   You&#39;ve also not done anything to ensure that the sent string is NUL terminated."}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1537960323, "post_id": 52516309, "comment_id": 91972234, "body": "Instead you could just use <code>char msg;</code> to reserve space on the stack for the data and then pass <code>&amp;msg</code> instead of <code>msg</code> to the <code>read()</code> call."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1537960345, "post_id": 52516309, "comment_id": 91972250, "body": "No, this is all wrong. You allocate 1 byte but a <i>string</i> of one char requires 2 bytes because of the terminating nul character. You also <i>must</i> check the return value of <code>read</code> to know whether it read anything at all."}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1537960471, "post_id": 52516309, "comment_id": 91972315, "body": "@PaulOgilvie to be fair, it&#39;s unclear from the posted code whether <code>.identifier</code> is actually just a single char or a string of them.   We&#39;d need to see the structure definition to be sure."}, {"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1537961744, "post_id": 52516309, "comment_id": 91973029, "body": "@PaulOgilvie Given the direct assignment of a single char to <code>.identifier</code> (rather than to <code>identifier[0]</code>) then I believe it&#39;s really not a string at all."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 1, "creation_date": 1537987762, "post_id": 52516309, "comment_id": 91988216, "body": "@Alnitak The OP&#39;s code is passing <code>&amp;identifier</code> to <code>write_client_msg()</code>, so it is clear that <code>identifier</code> is a single <code>char</code> or it would not compile. In which case, the use of <code>strlen()</code> is wrong."}], "tags": [], "owner": {"reputation": 177, "user_id": 10394020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf0bc7209395bef9af27084dad42eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Doe", "link": "https://stackoverflow.com/users/10394020/jane-doe"}, "is_accepted": false, "score": -3, "last_activity_date": 1537960009, "creation_date": 1537960009, "answer_id": 52516309, "question_id": 52516122, "link": "https://stackoverflow.com/questions/52516122/passing-chars-from-structs-through-sockets-in-c/52516309#52516309", "title": "Passing chars from structs through sockets in c", "body": "<p>Solved: </p>\n\n<pre><code>char *msg;\nmsg = (char*) malloc (1);\nread(sockfd, msg, 1);\nprintf(\"Sent received: %s \\n\", msg);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1537960533, "post_id": 52516452, "comment_id": 91972356, "body": "why not <code>char msg[2]</code> instead of that expensive malloc?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 0, "creation_date": 1537960635, "post_id": 52516452, "comment_id": 91972402, "body": "@Alnitak, many more possibilities but this user must learn what his/her errors are, so I am only fixing his/her code and not giving other possible solutons."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1537987646, "post_id": 52516452, "comment_id": 91988166, "body": "The OP&#39;s code is not sending a null-terminator, and this code is not null-terminating the received <code>msg</code> before displaying it."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1537991902, "post_id": 52516452, "comment_id": 91990143, "body": "@RemyLebeau, ah...yes. Fixed."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1537997288, "post_id": 52516452, "comment_id": 91992331, "body": "@PaulOgilvie I would have gotten rid of <code>malloc()</code> and used <code>%c</code> instead.  Or at least used <code>%.1s</code> instead of appending a null terminator.  But whatever works."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": -1, "last_activity_date": 1537991926, "last_edit_date": 1537991926, "creation_date": 1537960509, "answer_id": 52516452, "question_id": 52516122, "link": "https://stackoverflow.com/questions/52516122/passing-chars-from-structs-through-sockets-in-c/52516452#52516452", "title": "Passing chars from structs through sockets in c", "body": "<p>The proper solution (based on your code) would be:</p>\n\n<pre><code>char *msg;\nmsg = malloc(2);\nif (read(sockfd, msg, 1)!=1) {\n    printf(\"Something wrong\\n\");\n    return 0;\n}\nmsg[1]= '\\0';\nprintf(\"Sent received: %s \\n\", msg);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1537989509, "last_edit_date": 1537989509, "creation_date": 1537989125, "answer_id": 52524618, "question_id": 52516122, "link": "https://stackoverflow.com/questions/52516122/passing-chars-from-structs-through-sockets-in-c/52524618#52524618", "title": "Passing chars from structs through sockets in c", "body": "<p>You are making several mistakes with your code.</p>\n\n<p>On the server side, in this code:</p>\n\n<pre><code>write_client_msg(cli_sockfd, &amp;tileInfo-&gt;tiles[user_cords_x][user_cords_y].identifier);\n</code></pre>\n\n<p>It is clear that <code>identifier</code> is a single <code>char</code>, or else the code would not compile.  In which case, using <code>strlen()</code> inside of <code>write_client_msg()</code> is wrong, since <code>msg</code> will not have a null terminator when passing in a pointer to a single <code>char</code>.  You would end up transmitting garbage to the other party, if not just crash altogether from accessing invalid memory.</p>\n\n<p>Then, on the client side, you are passing an uninitialized <code>msg</code> pointer to <code>read()</code>.  But also, you are displaying <code>read()</code>'s return value, which is the number of bytes actually received.  That is why your display is showing <code>1</code>, since you are asking for 1 byte to be received.</p>\n\n<p>To send and receive the <code>identifier</code> correctly, you would need something more like this instead:</p>\n\n<pre><code>void write_client_msg(int sockfd, char *msg, size_t msg_len)\n{\n    int n = write(sockfd, msg, msg_len);\n    if (n &lt; 0)\n        error(\"ERROR writing msg to client socket\");\n}\n\n...\n\nwrite_client_msg(cli_sockfd, &amp;tileInfo-&gt;tiles[user_cords_x][user_cords_y].identifier, 1);\n</code></pre>\n\n<p></p>\n\n<pre><code>char identity;\nint n = read(sockfd, &amp;identity, 1);\nif (n &lt; 0)\n    error(\"ERROR reading identity from client socket\");\nelse if (n == 0)\n    error(\"DISCONNECTED while reading identity from client socket\");\nelse\n    printf(\"This is the value: %c \\n\", identity);\n</code></pre>\n\n<p>That being said, a better solution is to make <code>write_client_msg()</code> send the <code>msg_len</code> before sending the <code>msg</code>.  Especially since <code>write_client_msg()</code> doesn't know what kind of data it is sending.  Then the client can read the <code>msg_len</code> to know how many bytes to read for the <code>msg</code>, and then process the <code>msg</code> as needed.</p>\n\n<p>Also, <code>write()</code> and <code>read()</code> can return fewer bytes than requested, so you need to call them in loops to make sure you actually send/receive everything.</p>\n\n<p>For example:</p>\n\n<pre><code>int write_all(int sockfd, void *data, size_t data_len)\n{\n    char *d = (char*) data;\n    while (data_len &gt; 0)\n    {\n        int n = write(sockfd, d, data_len);\n        if (n &lt; 0)\n            return n;\n        d += n;\n        data_len -= n;\n    }\n    return 1;\n}\n\nvoid write_client_msg(int sockfd, char *msg, size_t msg_len)\n{\n    uint32_t len = htonl(msg_len);\n    int n = write_all(sockfd, &amp;len, sizeof(len));\n    if (n == 1)\n        n = write_all(sockfd, msg, msg_len);\n    if (n &lt; 0)\n        error(\"ERROR writing msg to client socket\");\n}\n\n...\n\nwrite_client_msg(cli_sockfd, &amp;tileInfo-&gt;tiles[user_cords_x][user_cords_y].identifier, 1);\n</code></pre>\n\n<p></p>\n\n<pre><code>int read_all(int sockfd, void *data, size_t data_len)\n{\n    char *d = (char*) data;\n    while (data_len &gt; 0)\n    {\n        int n = read(sockfd, d, data_len);\n        if (n &lt;= 0)\n            return n;\n        d += n;\n        data_len -= n;\n    }\n    return 1;\n}\n\nchar *read_server_msg(int sockfd)\n{\n    uint32_t len;\n    int n = read_all(sockfd, &amp;len, sizeof(len));\n    if (n &lt;= 0)\n        return NULL;\n    len = ntohl(len);\n    char *msg = malloc(len+1);\n    if (!msg)\n        return NULL;\n    n = read_all(sockfd, msg, len);\n    if (n &lt;= 0) {\n        free(msg);\n        return NULL;\n    }\n    msg[len] = '\\0';\n    return msg;\n}\n\n...\n\nchar *msg = read_server_msg(sockfd);\nif (!msg)\n    error(\"ERROR reading msg from client socket\");\nelse {\n    printf(\"This is the value: %s \\n\", msg);\n    free(msg);\n}\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 10394020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf0bc7209395bef9af27084dad42eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Doe", "link": "https://stackoverflow.com/users/10394020/jane-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1537991926, "creation_date": 1537959413, "question_id": 52516122, "link": "https://stackoverflow.com/questions/52516122/passing-chars-from-structs-through-sockets-in-c", "title": "Passing chars from structs through sockets in c", "body": "<p>I am trying to send/receive messages between my server and client. I currently have a stuct in my server that holds a char value. I am trying to pass this value to my client. See the following: </p>\n\n<pre><code>tileInfo-&gt;tiles[user_cords_x][user_cords_y].identifier = '+'; // Char i want to pass\nwrite_client_msg(cli_sockfd, &amp;tileInfo-&gt;tiles[user_cords_x][user_cords_y].identifier);\n\n/* Writes a message to a client socket. */\nvoid write_client_msg(int cli_sockfd, char * msg)\n{\n    int n = write(cli_sockfd, msg, strlen(msg));\n    if (n &lt; 0)\n        error(\"ERROR writing msg to client socket\");\n\n}\n</code></pre>\n\n<p>On my client side i am receiving it with the following: </p>\n\n<pre><code>char *msg;\nchar identity = read(sockfd, msg, 1);\nprintf(\"This is the value: %d \\n\", identity);\n</code></pre>\n\n<p>Currently the output i am getting is <code>This is the value: 1</code>. I am new to sockets and dont fully understand passing chars. Could someone please explain and show me how to pass the '+' to my client side? </p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537959123, "post_id": 52515997, "comment_id": 91971553, "body": "To be picky: Returning the pointer value alone is not undefined behaviour."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537959164, "post_id": 52515997, "comment_id": 91971582, "body": "@Swordfish; I didn&#39;t get you. Can you please elaborate?"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 2, "creation_date": 1537959264, "post_id": 52515997, "comment_id": 91971640, "body": "<code>int* bar(void) { int i; return &amp;i; } &#47;* ... *&#47; int *foo = bar();</code> is not undefined. Dereferencing <code>foo</code> is."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537959494, "post_id": 52515997, "comment_id": 91971772, "body": "@Swordfish; Ok. Got you know."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1537959933, "post_id": 52515997, "comment_id": 91972020, "body": "@Swordfish: Per C 2018 6.2.4 2: \u201cThe value of a pointer becomes indeterminate when the object it points to (or just past) reaches the end of its lifetime.\u201d Per 3.19.2 1, an indeterminate value may be a trap representation, so using a pointer (even without dereferencing it) after the object it pointed to no longer exists may cause a trap."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1537960053, "post_id": 52515997, "comment_id": 91972088, "body": "@EricPostpischil I didn&#39;t say anything else, did I?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537960209, "post_id": 52515997, "comment_id": 91972183, "body": "@Swordfish: <code>int *foo = bar();</code> uses the value of the pointer returned by <code>bar</code> after the lifetime of the pointed-to object ends and therefore may trap."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1537959480, "last_edit_date": 1537959480, "creation_date": 1537958988, "answer_id": 52515997, "question_id": 52515951, "link": "https://stackoverflow.com/questions/52515951/address-of-the-automatic-storage-class-variable-assigned-to-a-local-variable-of/52515997#52515997", "title": "Address of the automatic storage class variable assigned to a local variable of another function", "body": "<p>The variable <code>z</code> does no longer exist after the function <code>function1</code> finishes it's execution. In function <code>main</code> you are trying to reference a memory address which has been deallocated after the function's call. This will cause undefined behavior.  </p>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1537959216, "creation_date": 1537959216, "answer_id": 52516069, "question_id": 52515951, "link": "https://stackoverflow.com/questions/52515951/address-of-the-automatic-storage-class-variable-assigned-to-a-local-variable-of/52516069#52516069", "title": "Address of the automatic storage class variable assigned to a local variable of another function", "body": "<p>In general what you do is <em>undefined</em>.</p>\n\n<p>However, on Intel architectures <code>z</code> is on the stack and after return, <em>if you don't call any other function</em> the value will <em>probably</em> still be available because the memory has not <em>yet</em> been reused. As soon as you call another function, the memory will <em>probably</em> be overwritten and so will contain garbage for you.</p>\n\n<p>In general: <strong>Don't do this!</strong></p>\n"}, {"tags": [], "owner": {"reputation": 253, "user_id": 1627237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/171fd94c6b53118bf62b211d6fd8f3fc?s=128&d=identicon&r=PG&f=1", "display_name": "user0x0", "link": "https://stackoverflow.com/users/1627237/user0x0"}, "is_accepted": false, "score": 0, "last_activity_date": 1537959223, "creation_date": 1537959223, "answer_id": 52516073, "question_id": 52515951, "link": "https://stackoverflow.com/questions/52515951/address-of-the-automatic-storage-class-variable-assigned-to-a-local-variable-of/52516073#52516073", "title": "Address of the automatic storage class variable assigned to a local variable of another function", "body": "<p>When the function call happens, all your local variables will be in stack. During function call, the stack variables can be modified. When the function call returns, <strong>the stack pointer is decremented</strong>\u2019</p>\n\n<p>Hence, you will be accessing something which is not guaranteed in any way. <strong>In programming languages, this is addressed as a case of undefined behaviour</strong>, since you are overriding the rules of programming language.</p>\n\n<p>In this case of function, given that you stack frame is still active and not modified by any other code, you might get the same value that you wrote to that address.</p>\n\n<p>But is not guaranteed in anyway and <strong>dont assume anything not guaranteed</strong>.</p>\n"}], "owner": {"reputation": 25, "user_id": 10416660, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4S5Ys-Y9i30/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWrEhg89IMgANH_Cy_xAkWs_FBipQ/mo/photo.jpg?sz=128", "display_name": "Shaik Nisar Ahmed", "link": "https://stackoverflow.com/users/10416660/shaik-nisar-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1537959488, "answer_count": 3, "score": -1, "last_activity_date": 1537959564, "creation_date": 1537958859, "last_edit_date": 1537958986, "question_id": 52515951, "link": "https://stackoverflow.com/questions/52515951/address-of-the-automatic-storage-class-variable-assigned-to-a-local-variable-of", "closed_reason": "Duplicate", "title": "Address of the automatic storage class variable assigned to a local variable of another function", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint* function1(void);\n\nint main()\n{\n\n    int x = 10;\n    int *p = function1();\n\n    printf(\"%d\\n\", *p);\n    printf(\"%d\\n\", p);\n}\n\nint* function1(void)\n{\n    int z;\n    z = 20;\n    z++;\n    return &amp;z;\n}\n</code></pre>\n\n<ul>\n<li>Variable 'z' is local to the 'function1', and is not alive after the\n'function1' is terminated.</li>\n<li>Now to access the value at the memory space of the variable 'z', its\naddress is returned by the function.</li>\n<li>So, even after the termination, will the memory space of the variable\n'z' will still be reserved, as the pointer accesses the variable?, in such case what will be the properties of the memory space?</li>\n<li>Or What if some-other variable is allocated with the same memory space\nof variable 'z'?</li>\n</ul>\n\n<p><strong>Note:</strong> GCC compiler of code blocks has compiled the program successfully, without any error and warning.</p>\n"}, {"tags": ["c", "node.js", "node.js-addon"], "comments": [{"owner": {"reputation": 9285, "user_id": 1218408, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/YqwCY.png?s=128&g=1", "display_name": "ZachB", "link": "https://stackoverflow.com/users/1218408/zachb"}, "edited": false, "score": 0, "creation_date": 1559936337, "post_id": 52515716, "comment_id": 99589841, "body": "This is documented at <a href=\"https://nodejs.org/dist/latest-v10.x/docs/api/addons.html\" rel=\"nofollow noreferrer\">nodejs.org/dist/latest-v10.x/docs/api/addons.html</a>."}], "answers": [{"tags": [], "owner": {"reputation": 3304, "user_id": 6250402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3iyE.jpg?s=128&g=1", "display_name": "hong4rc", "link": "https://stackoverflow.com/users/6250402/hong4rc"}, "is_accepted": false, "score": 0, "last_activity_date": 1537958609, "creation_date": 1537958609, "answer_id": 52515876, "question_id": 52515716, "link": "https://stackoverflow.com/questions/52515716/how-to-pass-object-to-c-through-nodejs-adon-api/52515876#52515876", "title": "How to pass object to c through nodejs adon-api?", "body": "<p>I don't understand <code>Object from C code</code>, but you can use C++ code for project with <a href=\"https://nodejs.org/api/addons.html\" rel=\"nofollow noreferrer\">C++ Addons</a>, check example of it.</p>\n"}], "owner": {"reputation": 43, "user_id": 7483589, "user_type": "registered", "profile_image": "https://graph.facebook.com/826087987555740/picture?type=large", "display_name": "ARUN ARUMUGAM", "link": "https://stackoverflow.com/users/7483589/arun-arumugam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559936282, "creation_date": 1537958109, "last_edit_date": 1559936282, "question_id": 52515716, "link": "https://stackoverflow.com/questions/52515716/how-to-pass-object-to-c-through-nodejs-adon-api", "title": "How to pass object to c through nodejs adon-api?", "body": "<p>How to pass object to 'C' code and return Object from C code. i'm new to 'C' and i need to run one function in 'C' code then i want to sent that result to javascript.</p>\n"}, {"tags": ["c", "data-structures", "buffer", "gets"], "comments": [{"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1537958838, "post_id": 52515606, "comment_id": 91971373, "body": "whait is the error exactly? please translate in english."}, {"owner": {"reputation": 11, "user_id": 9747986, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Byungheon Lee", "link": "https://stackoverflow.com/users/9747986/byungheon-lee"}, "reply_to_user": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1537959007, "post_id": 52515606, "comment_id": 91971471, "body": "the error message is &#39;warning c4013 &#39;gets&#39; undefined assuming extern returning int&#39;"}, {"owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "edited": false, "score": 0, "creation_date": 1537967259, "post_id": 52515606, "comment_id": 91976527, "body": "what did you mean <i>I wrote the header files</i>? you need to add this statement at the very beginning of your program <code>#include &lt;stdio.h&gt;</code>. I do not see it in your examples."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9747986, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Byungheon Lee", "link": "https://stackoverflow.com/users/9747986/byungheon-lee"}, "edited": false, "score": 0, "creation_date": 1537959238, "post_id": 52515973, "comment_id": 91971627, "body": "the error function is gets() but I coded header files &lt;stdio.h&gt;, &lt;stdlib.h&gt;"}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1537958933, "creation_date": 1537958933, "answer_id": 52515973, "question_id": 52515606, "link": "https://stackoverflow.com/questions/52515606/i-got-an-error-about-gets-function-and-buffer-heaps-in-c-code/52515973#52515973", "title": "I got an error about gets function and buffer heaps in C code", "body": "<p>Error code C4013 of MS Visual Studio means <code>'function' undefined; assuming extern returning int</code>.</p>\n\n<p>It is a warning so when you run the program it appears that the function that was undefined needs something else then what you pass it, or returs something else than an int, and then it crashes.</p>\n\n<p>So you must first fix this warning: find out which function the compiler complains about and then properly define it and call it.</p>\n"}], "owner": {"reputation": 11, "user_id": 9747986, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Byungheon Lee", "link": "https://stackoverflow.com/users/9747986/byungheon-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537960712, "creation_date": 1537957777, "last_edit_date": 1537960712, "question_id": 52515606, "link": "https://stackoverflow.com/questions/52515606/i-got-an-error-about-gets-function-and-buffer-heaps-in-c-code", "title": "I got an error about gets function and buffer heaps in C code", "body": "<pre><code>void main() {\n\nchar command;\nelement e;\nTreeNode *root = NULL;\nTreeNode *tmp;\n\ndo {\n    help();\n    command = getchar();\n    fflush(stdin);\n    switch (command) {\n    case 'i':\n        printf(\"Word:\");\n        gets(e.word);\n        printf(\"Meaning:\");\n        gets(e.meaning);\n        insert_node(&amp;root, e);\n        break;\n    case 'd':\n        printf(\"Word:\");\n        gets(e.word);\n        delete_node(&amp;root, e);\n        break;\n    case'p':\n        display(root);\n        printf(\"\\n\");\n        break;\n    case's':\n        printf(\"Word:\");\n        gets(e.word);\n        tmp = search(root, e);\n        if (tmp != NULL)\n            printf(\"Meaning:%s\\n\", e.meaning);\n        break;\n\n    }\n} while (command != 'q');\n}\n</code></pre>\n\n<p>This is the main code not whole one.</p>\n\n<p>I studied data-struct and tried made a dictionary by binary tree search but if I run this code the first gets get an error but other <code>gets()</code> are not crashed and also the first one's color is different.</p>\n\n<p><a href=\"https://i.stack.imgur.com/GrYgU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GrYgU.png\" alt=\"\"></a></p>\n\n<p>the error code is warning C4013 </p>\n\n<p>I know that the error code is not define specific function but I already wrote the header files, <code>stdio.h</code> and <code>stdlib.h</code>.</p>\n\n<p>The other error is input buffer when I running this code, the word and meaning are mixed.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZQzrA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZQzrA.png\" alt=\"\"></a></p>\n\n<p>i heard this error happen by input buffer and I know it </p>\n\n<p>so I coded // fflush(stdin) after // command = getchar();</p>\n\n<p>but the error doesn't solved</p>\n\n<p>I want to why this happening and solve the problem thanks</p>\n"}, {"tags": ["c", "usb", "header-files", "turbo-c", "usb-flash-drive"], "comments": [{"owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 0, "creation_date": 1537957281, "post_id": 52515371, "comment_id": 91970467, "body": "Have you tried entering the full path of the header file?"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537957302, "post_id": 52515371, "comment_id": 91970479, "body": "What crashes? The compiler?"}, {"owner": {"reputation": 2078, "user_id": 4849973, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/908850892e643b32e894b01691590010?s=128&d=identicon&r=PG&f=1", "display_name": "Nasr", "link": "https://stackoverflow.com/users/4849973/nasr"}, "edited": false, "score": 0, "creation_date": 1537957971, "post_id": 52515371, "comment_id": 91970858, "body": "You should add flashdrive link path while compiling. Check <a href=\"https://stackoverflow.com/questions/15836423/gcc-how-to-add-before-the-default-linker-search-path-by-default-library-path-no\">This answer</a>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1537958174, "post_id": 52515371, "comment_id": 91970983, "body": "So something like <code>#include&quot;\\\\path_to_flashdrive\\dir_of_ headerfile\\headerfilewhichcontainsintcheck.h&quot;</code>"}, {"owner": {"reputation": 1, "user_id": 10418010, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n1rp4LcUCY4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWXPvn2466Ngl4Z_1vMLkalI9DeEw/mo/photo.jpg?sz=128", "display_name": "HACKERMAN", "link": "https://stackoverflow.com/users/10418010/hackerman"}, "reply_to_user": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 0, "creation_date": 1537958661, "post_id": 52515371, "comment_id": 91971260, "body": "@Mayur the &quot;D:\\filename.h&quot;? Yeah I did it still doesn&#39;t work. I don&#39;t think Turbo C can read external files..."}, {"owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 0, "creation_date": 1537958726, "post_id": 52515371, "comment_id": 91971293, "body": "Do you have read permission for that file?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10418010, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n1rp4LcUCY4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWXPvn2466Ngl4Z_1vMLkalI9DeEw/mo/photo.jpg?sz=128", "display_name": "HACKERMAN", "link": "https://stackoverflow.com/users/10418010/hackerman"}, "is_accepted": false, "score": 0, "last_activity_date": 1537963626, "creation_date": 1537963626, "answer_id": 52517391, "question_id": 52515371, "link": "https://stackoverflow.com/questions/52515371/running-a-function-type-of-program-when-the-c-header-file-is-in-a-flashdrive/52517391#52517391", "title": "Running a function type of program when the C header file is in a flashdrive?", "body": "<p>As it turns out all I had to do was to open the DOSBOX and mount the directory, or set path.  </p>\n\n<p>mount b: e:\\</p>\n\n<p>Anyways thanks for helping I appreciated all of your help...!</p>\n"}], "owner": {"reputation": 1, "user_id": 10418010, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n1rp4LcUCY4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWXPvn2466Ngl4Z_1vMLkalI9DeEw/mo/photo.jpg?sz=128", "display_name": "HACKERMAN", "link": "https://stackoverflow.com/users/10418010/hackerman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1537963626, "creation_date": 1537957049, "question_id": 52515371, "link": "https://stackoverflow.com/questions/52515371/running-a-function-type-of-program-when-the-c-header-file-is-in-a-flashdrive", "title": "Running a function type of program when the C header file is in a flashdrive?", "body": "<p>Im currently working on C, and would like to know if its possible to run a program when a user made header file is in a flashdrive. It works if the file is on a PC, but not sure if it would if its external.</p>\n\n<p>The code looks something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;Conio.h&gt;\n#include\"headerfilewhichcontainsintcheck.h\"\nvoid main(){\nint a,g,c;    \nprintf(\"Input age: \");\nscanf(\"%d\", &amp;a);\nprintf(\"Input gender: \");\nscanf(\"%d\", &amp;g);\nc=check(a,g)//the function which will process the variables below, which is, contained in the header file//\ngetch();\n}\n</code></pre>\n\n<p>Again, it runs when the header file is in the PC, but ceases to when its on a flashdrive. Is there something Im missing here? Much appreciated!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1537956893, "post_id": 52515248, "comment_id": 91970237, "body": "Did you want a pointer to the pointer, i.e. a <code>reportType**</code>? If you just want to copy the value to another <code>reportType*</code> then <code>Diagcb.end</code> should work, but in this example you haven&#39;t initialised that value first."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1537956898, "post_id": 52515248, "comment_id": 91970243, "body": "<code>ptr2 = Diagcb.end2;</code> It is already a pointer, you dont need its address.[note: the choice of variable names and case is <i>very</i>  confusing]"}, {"owner": {"reputation": 5, "user_id": 10233387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1bdeb4d764a5900a4790342e7d954a3?s=128&d=identicon&r=PG&f=1", "display_name": "Khaled", "link": "https://stackoverflow.com/users/10233387/khaled"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1537957134, "post_id": 52515248, "comment_id": 91970369, "body": "@wildplasser Yes u r right; its work. I know the names is garbage; i just to test if it will work before i will start in programming. Thanks alot"}, {"owner": {"reputation": 5, "user_id": 10233387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1bdeb4d764a5900a4790342e7d954a3?s=128&d=identicon&r=PG&f=1", "display_name": "Khaled", "link": "https://stackoverflow.com/users/10233387/khaled"}, "edited": false, "score": 0, "creation_date": 1537958590, "post_id": 52515248, "comment_id": 91971214, "body": "I am a bit confused about the difference between: reportType* ptr2; ptr2 = Diagcb.end; and reportType** ptr2; ptr2 = &amp;Diagcb.end;"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10233387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1bdeb4d764a5900a4790342e7d954a3?s=128&d=identicon&r=PG&f=1", "display_name": "Khaled", "link": "https://stackoverflow.com/users/10233387/khaled"}, "edited": false, "score": 0, "creation_date": 1537958285, "post_id": 52515469, "comment_id": 91971051, "body": "I am a bit confused about the difference between:     reportType* ptr2;     ptr2 = Diagcb.end;   and     reportType** ptr2;     ptr2 = &amp;Diagcb.end;"}, {"owner": {"reputation": 308, "user_id": 8169341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zs8pn.jpg?s=128&g=1", "display_name": "R3m", "link": "https://stackoverflow.com/users/8169341/r3m"}, "reply_to_user": {"reputation": 5, "user_id": 10233387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1bdeb4d764a5900a4790342e7d954a3?s=128&d=identicon&r=PG&f=1", "display_name": "Khaled", "link": "https://stackoverflow.com/users/10233387/khaled"}, "edited": false, "score": 1, "creation_date": 1537958826, "post_id": 52515469, "comment_id": 91971364, "body": "The first one is a pointer to the reportType, the second one is a pointer to the pointer to the reportType. If you want to access the value <code>a</code> via a pointer <code>ptr</code>, you can use <code>ptr-&gt;a</code>. Instead via a pointer to the pointer <code>pptr</code>, you should write it as <code>(*pptr)-&gt;a</code>, with <code>*</code> op to get the pointer first."}], "tags": [], "owner": {"reputation": 308, "user_id": 8169341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zs8pn.jpg?s=128&g=1", "display_name": "R3m", "link": "https://stackoverflow.com/users/8169341/r3m"}, "is_accepted": true, "score": 0, "last_activity_date": 1537957314, "creation_date": 1537957314, "answer_id": 52515469, "question_id": 52515248, "link": "https://stackoverflow.com/questions/52515248/pointer-to-pointer-member-struct/52515469#52515469", "title": "Pointer to pointer member Struct", "body": "<p>You should write it as <code>ptr2 = Diagcb.end</code>. Because <code>Diagcd.end</code> is already a pointer, you don't need to use <code>&amp;</code> to get the address.</p>\n"}], "owner": {"reputation": 5, "user_id": 10233387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1bdeb4d764a5900a4790342e7d954a3?s=128&d=identicon&r=PG&f=1", "display_name": "Khaled", "link": "https://stackoverflow.com/users/10233387/khaled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 1, "accepted_answer_id": 52515469, "answer_count": 1, "score": 0, "last_activity_date": 1537957419, "creation_date": 1537956631, "last_edit_date": 1537957419, "question_id": 52515248, "link": "https://stackoverflow.com/questions/52515248/pointer-to-pointer-member-struct", "title": "Pointer to pointer member Struct", "body": "<p>Its a part of code that i working on. When i try to assign <code>Diagcb.end</code> to <code>ptr2</code> it returned an error.</p>\n\n<p>I tried to write it as:</p>\n\n<pre><code>ptr2 = &amp;Diagcb.end;\nptr2 = &amp;diagcb-&gt;end;\n</code></pre>\n\n<p>but the same error is returned.</p>\n\n<pre><code>typedef struct reportType {\n    int a;\n    int b;\n    int c;\n    int* ptr;\n} reportType;\n\ntypedef struct cb {\n    reportType* start;\n    reportType* end;\n    reportType arr[10];\n}cb;\nint fun (reportType* report);\nmain()\n{\n    cb Diagcb;\n    reportType report;\n    report.a = 0;\n    report.b = 1;\n    report.c = 2;\n    report.ptr = NULL;\n    reportType* ptr2;\n    ptr2 = cb.end;\n}\n</code></pre>\n"}, {"tags": ["c", "struct", "enums"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1537957029, "post_id": 52515185, "comment_id": 91970313, "body": "What exactly is puzzling you? The example is not good style, but I&#39;m not sure if that is due to your &quot;(Not exact,...)&quot; copy of the real code. Is it that you can use numbers for enums?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1537957970, "post_id": 52515185, "comment_id": 91970857, "body": "Is the confusing part that the values <code>{4,5,6}</code> are not within valid values for the enums or is it something else?"}, {"owner": {"reputation": 399, "user_id": 6560197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9374c3b02b4c1f9ab117e550399f77d6?s=128&d=identicon&r=PG&f=1", "display_name": "Athul", "link": "https://stackoverflow.com/users/6560197/athul"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1537957981, "post_id": 52515185, "comment_id": 91970863, "body": "The entire code can be found on the drive link I provided. Dio_cfg.c and Dio_cfg.h. The confusing part is when I initialize as above, how values are assigned to struct and enum"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1537958137, "post_id": 52515185, "comment_id": 91970953, "body": "OK, then the values out of range for enums are not the issue. But it&#39;s still not clear which part is confusing you."}, {"owner": {"reputation": 399, "user_id": 6560197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9374c3b02b4c1f9ab117e550399f77d6?s=128&d=identicon&r=PG&f=1", "display_name": "Athul", "link": "https://stackoverflow.com/users/6560197/athul"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1537959379, "post_id": 52515185, "comment_id": 91971704, "body": "@Gerhardh I&#39;ve edited the question. What you meant by out of range??"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1537959617, "post_id": 52515185, "comment_id": 91971840, "body": "<code>DioResistor_t</code> defines values <code>0,1,2</code> but your snippet assigned value 4 to the field in second element of your array."}, {"owner": {"reputation": 399, "user_id": 6560197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9374c3b02b4c1f9ab117e550399f77d6?s=128&d=identicon&r=PG&f=1", "display_name": "Athul", "link": "https://stackoverflow.com/users/6560197/athul"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1537960043, "post_id": 52515185, "comment_id": 91972083, "body": "When initializing as this  <code>DioConfig_t config[] = {    {1, 2, 3}, {4, 5, 6} };</code> Isn&#39;t this way values assigned <code>config[0].Resistor = 1</code>  <code>config[0].Direction = 2</code> <code>config[0].Function = 3</code>"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1537964004, "post_id": 52515185, "comment_id": 91974433, "body": "Yes, it is. And then it continues: <code>config[1].Resistor = 4; config[1].Direction = 5; config[1].Function = 6;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 6560197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9374c3b02b4c1f9ab117e550399f77d6?s=128&d=identicon&r=PG&f=1", "display_name": "Athul", "link": "https://stackoverflow.com/users/6560197/athul"}, "edited": false, "score": 1, "creation_date": 1537957543, "post_id": 52515393, "comment_id": 91970608, "body": "But if create a normal <code>strcut test</code> with variables <code>int a</code> <code>int b</code> and create struct variable as <code>struct test var[] = { {1, 2}, {3, 4}}</code> Then as per your explanation <code>printf(&quot;%d %d\\n&quot;, var[0].a, var[1].a);</code>  should give 1 and 2 but the assigned values are <b>1, 3</b> Also how <code>enum</code> values are affected?"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "reply_to_user": {"reputation": 399, "user_id": 6560197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9374c3b02b4c1f9ab117e550399f77d6?s=128&d=identicon&r=PG&f=1", "display_name": "Athul", "link": "https://stackoverflow.com/users/6560197/athul"}, "edited": false, "score": 0, "creation_date": 1537957761, "post_id": 52515393, "comment_id": 91970731, "body": "That&#39;s how it is supposed to be. In your example, var[0] is {1, 2} and var[1] is {3, 4}, and you are printing their first value each."}, {"owner": {"reputation": 399, "user_id": 6560197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9374c3b02b4c1f9ab117e550399f77d6?s=128&d=identicon&r=PG&f=1", "display_name": "Athul", "link": "https://stackoverflow.com/users/6560197/athul"}, "edited": false, "score": 0, "creation_date": 1537958125, "post_id": 52515393, "comment_id": 91970948, "body": "Since <code>struct</code> members are enum, how this changes <code>enum</code> values??"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "reply_to_user": {"reputation": 399, "user_id": 6560197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9374c3b02b4c1f9ab117e550399f77d6?s=128&d=identicon&r=PG&f=1", "display_name": "Athul", "link": "https://stackoverflow.com/users/6560197/athul"}, "edited": false, "score": 0, "creation_date": 1537960814, "post_id": 52515393, "comment_id": 91972514, "body": "It doesn&#39;t modify the underlying enum values. Those enums in <code>struct DioConfig_t</code>, they&#39;re basically integers with a bit more type safety. As seen in the code that you provided, you can assign <code>6</code> to <code>DioMode_t Function</code>, as if <code>Function</code> was an <code>int</code> instead. In the end, it&#39;s just a space of (probably) 4 bytes anyway. I&#39;d say it&#39;s bad design to assign <code>6</code> to <code>DioMode_t Function</code>, but it&#39;s perfectly legal."}], "tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 0, "last_activity_date": 1537957579, "last_edit_date": 1537957579, "creation_date": 1537957117, "answer_id": 52515393, "question_id": 52515185, "link": "https://stackoverflow.com/questions/52515185/array-of-structure-structure-members-are-enum-variables/52515393#52515393", "title": "Array of structure: Structure members are Enum Variables", "body": "<blockquote>\n  <p>What's happening here? Is this possible??</p>\n</blockquote>\n\n<p>The inner braces (<code>{1, 2, 3}</code> and <code>{4, 5, 6}</code>) initialize a <code>DioConfig_t</code> each. The outer braces initialize the array <code>config[]</code> with the two <code>DioConfig_t</code> defined by the inner braces. It is equivalent to this:</p>\n\n<pre><code>DioConfig_t a = {1, 2, 3};\nDioConfig_t b = {4, 5, 6};\nDioConfig_t config[] = {a, b};\n</code></pre>\n\n<p>What's confusing is that the braces do two different thing here. One is initializing a struct, and the other is initializing an array.</p>\n\n<p>Note: I am not sure that my terminology is 100% correct, and when I say \"they are equivalent\", I am not considering that the performance might be different depending on the level of compiler optimization.</p>\n\n<blockquote>\n  <p>It didn't make much sense to me. Is that normal?</p>\n</blockquote>\n\n<p>Are you asking whether it is normal to be confused by some C code? Absolutely. There's a lot of tricks, pitfalls and obscure stuff in the language, even people who worked with it for years learn something new and get confused/baffled by some tricky C code here and then. Don't let this discourage you.</p>\n"}, {"tags": [], "owner": {"reputation": 84, "user_id": 9122108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90887a50841caf6dd9e5c40ffa6062a7?s=128&d=identicon&r=PG&f=1", "display_name": "jibin_raj24", "link": "https://stackoverflow.com/users/9122108/jibin-raj24"}, "is_accepted": false, "score": 0, "last_activity_date": 1537970375, "last_edit_date": 1537970375, "creation_date": 1537969516, "answer_id": 52519238, "question_id": 52515185, "link": "https://stackoverflow.com/questions/52515185/array-of-structure-structure-members-are-enum-variables/52519238#52519238", "title": "Array of structure: Structure members are Enum Variables", "body": "<p>Basically enum is an another method to define integer constants, so an enum variable must take the same memory as that of an integer variable so basically it can hold any integer value.In your case an enum  variable of type <code>DioResistor_t</code> can hold values other than 0(<code>DIO_PULLUP_DISABLED</code>), 1(<code>DIO_PULLUP_ENABLED</code>) and 2(<code>DIO_MAX_RESISTOR</code>). So initializing other values to the enum structure element is okay(but it can result in invalid output). </p>\n\n<p>We will now discuss the reason for define structure elements as enum. For that consider the 2 scenarios given below.</p>\n\n<p>Case 1: The <code>DioConfig_t</code> structure is defined as given below:</p>\n\n<pre><code>typedef struct\n{\n    unsigned int Resistor;\n    unsigned int Direction;\n    unsigned int Function;\n}DioConfig_t;\n</code></pre>\n\n<p>Case 2: The <code>DioConfig_t</code> structure is defined as given in your code.</p>\n\n<p>Now if a developer wants to configure a pin as an output pin with pull resistor and in maximum mode.</p>\n\n<p>In the first case he needs to find the values for Resistor, Direction and Function variables of configuration structure <code>DioConfig_t</code> that will configure the pin as he required but in the second case he can easily configure it as all the required values of the variables are defined in enum.</p>\n\n<p>The configuration in the above 2 cases are given below:</p>\n\n<p>Case 1:</p>\n\n<pre><code>    Dio_Config_t dio_configuration;\n    dio_configuration.Resistor = 1;\n    dio_configuration.Direction = 0;\n    dio_configuration.Function = 0;\n</code></pre>\n\n<p>Case 2:</p>\n\n<pre><code>    Dio_Config_t dio_configuration;\n    dio_configuration.Resistor = DIO_PULLUP_ENABLED;\n    dio_configuration.Direction = DIO_OUTPUT;\n    dio_configuration.Function = DIO_MAX_MODE;\n</code></pre>\n\n<p>As you can see the code in the second case is easier to understand and it is safer as the values will not be accidently changed easily.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1537970820, "creation_date": 1537970820, "answer_id": 52519689, "question_id": 52515185, "link": "https://stackoverflow.com/questions/52515185/array-of-structure-structure-members-are-enum-variables/52519689#52519689", "title": "Array of structure: Structure members are Enum Variables", "body": "<p>An <code>enum</code> is a special case of an integer type.  It is legal in C to assign values to an <code>enum</code> variable that fall outside of that range.</p>\n\n<p>Assigning an out-of-range value to an <code>enum</code> variable also has no effect on any <code>enum</code> constants that were defined.  Note also that the fact that the variable in question is a member of a struct doesn't change anything.</p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef enum f {\n    F1,\n    F2,\n    F3\n} f;\n\nint main()\n{\n    f x = 4;\n    printf(\"F1=%d\\n\", F1);\n    printf(\"F2=%d\\n\", F2);\n    printf(\"F3=%d\\n\", F3);\n    printf(\"x=%d\\n\", x);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>F1=0\nF2=1\nF3=2\nx=4\n</code></pre>\n\n<p>In this example, the value 4 is assigned to the variable of type <code>f</code>, even though the values of the associated <code>enum</code> are 0, 1, and 2.</p>\n"}], "owner": {"reputation": 399, "user_id": 6560197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9374c3b02b4c1f9ab117e550399f77d6?s=128&d=identicon&r=PG&f=1", "display_name": "Athul", "link": "https://stackoverflow.com/users/6560197/athul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 760, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1537970820, "creation_date": 1537956424, "last_edit_date": 1537959773, "question_id": 52515185, "link": "https://stackoverflow.com/questions/52515185/array-of-structure-structure-members-are-enum-variables", "title": "Array of structure: Structure members are Enum Variables", "body": "<p>I'm trying to understand a code which is part of a reusable firmware development guide. The book is too difficult for me, but still, I'm trying to understand the code.</p>\n\n<p>In a sample code came with the book, there's a syntax similar to below</p>\n\n<pre><code>typedef enum \n{\n\n   DIO_MAX_MODE \n}DioMode_t;\n\n\ntypedef enum \n{\n   DIO_PULLUP_DISABLED,     /*&lt; Used to disable the internal pull-ups */\n   DIO_PULLUP_ENABLED,      /*&lt; Used to enable the internal pull-ups */\n   DIO_MAX_RESISTOR         /*&lt; Resistor states should be below this value */\n}DioResistor_t;\n\ntypedef enum\n{\n    DIO_OUTPUT,\n    DIO_INPUT\n}DioDirection_t;\n\n\n\ntypedef struct \n{\n    DioResistor_t Resistor;              /**&lt; Pullup/Pulldown Resistor - ENABLED or DISABLED    */\n    DioDirection_t Direction;      /**&lt; Data Direction      - OUTPUT or INPUT           */\n    DioMode_t Function;            /**&lt; Mux Function        - Dio_Peri_Select           */\n}DioConfig_t;\n</code></pre>\n\n<p>If I understand correctly, members of the struct are enum variables.</p>\n\n<p>And in one part of the code developer assigns a value to it below way (Not exact, I'm trying to understand how this whole thing work by making a similar syntax of it)</p>\n\n<pre><code> DioConfig_t config[] = {    {1, 2, 3}, \n                                {4, 5, 6}\n };\n</code></pre>\n\n<p>What's happening here? Is this possible??</p>\n\n<p>When Initializing as above, does it affect the values of enums, which values are changing and how to access them?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>If I create a struct like this </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct test {\n    int a;\n    int b;\n};\n\nint main()\n{\n    struct test var[] = { {1, 2}, {3, 4} }; \n\n    /* \n    struct test var[0] = {1, 2}\n    struct test var[1] = {3, 4}\n    */\n\n    printf(\"%d %d\\n\", var[0].a, var[1].a);\n\n    return 0;\n</code></pre>\n\n<p>I know what values are assigned to <code>a</code> and <code>b</code> based on which variable of struct I use to call them \neg: var[0].a = 1 and var<a href=\"https://drive.google.com/open?id=1rLd3XIiJBNB2C8M3WPOuE2SP_6rJvWC9\" rel=\"nofollow noreferrer\">1</a>.a = 3</p>\n\n<p>But The code I've shown first has <code>enum</code> variables as struct members\nSo values assigned to struct members are</p>\n\n<pre><code>config[0].Resistor = 1\nconfig[0].Direction = 2\nconfig[0].Function = 3\n</code></pre>\n\n<p>Since these are <code>enum</code> variables, Will it change <code>enum</code> values, how ???</p>\n\n<p>PS: It's only been few months since I started learning C. I use it for developing small embedded projects, I read several online tutorials and videos, learned about struct and pointers, but when I opened this<br>\n<a href=\"https://drive.google.com/open?id=1rLd3XIiJBNB2C8M3WPOuE2SP_6rJvWC9\" rel=\"nofollow noreferrer\">code</a>, it didn't make much sense to me. Is that normal??</p>\n"}, {"tags": ["c++", "c", "gcc", "gcc-warning"], "comments": [{"owner": {"reputation": 103, "user_id": 10417881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea682d2bf036292dc55d2a56d5e5b56e?s=128&d=identicon&r=PG&f=1", "display_name": "Xiaoyao", "link": "https://stackoverflow.com/users/10417881/xiaoyao"}, "edited": false, "score": 0, "creation_date": 1537956007, "post_id": 52514963, "comment_id": 91969711, "body": "@unwind Can you answer this question? Thank you very much."}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1537956473, "post_id": 52514963, "comment_id": 91969990, "body": "Can it? Only the first syntax is documented!"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1537956542, "post_id": 52514963, "comment_id": 91970033, "body": "@JanHudec Yes, it can."}, {"owner": {"reputation": 103, "user_id": 10417881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea682d2bf036292dc55d2a56d5e5b56e?s=128&d=identicon&r=PG&f=1", "display_name": "Xiaoyao", "link": "https://stackoverflow.com/users/10417881/xiaoyao"}, "reply_to_user": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1537957603, "post_id": 52514963, "comment_id": 91970659, "body": "@JanHudec you mean __attribute((unused)) is non-existent?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1537962436, "post_id": 52514963, "comment_id": 91973470, "body": "There is a <a href=\"https://gcc.gnu.org/onlinedocs/gcc-8.2.0/gcc/Attribute-Syntax.html#Attribute-Syntax\" rel=\"nofollow noreferrer\">manual</a> you can find to clarify these things. Yes, the difference is that <code>__attribute</code> is just a mis-spelling of the correct <code>__attribute__</code>."}, {"owner": {"reputation": 103, "user_id": 10417881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea682d2bf036292dc55d2a56d5e5b56e?s=128&d=identicon&r=PG&f=1", "display_name": "Xiaoyao", "link": "https://stackoverflow.com/users/10417881/xiaoyao"}, "edited": false, "score": 0, "creation_date": 1537965318, "post_id": 52514963, "comment_id": 91975249, "body": "__attribute((unused)) is also take effect in build. It should not be spelling mistake."}, {"owner": {"reputation": 65310, "user_id": 201725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/616f7a1cbb20fe949d883393657c039a?s=128&d=identicon&r=PG", "display_name": "Jan Hudec", "link": "https://stackoverflow.com/users/201725/jan-hudec"}, "edited": false, "score": 0, "creation_date": 1537989095, "post_id": 52514963, "comment_id": 91988857, "body": "@Xiaoyao, it might be #define&#39;d somewhere to the correct form. But the manual does not define it, so whatever it does, it is wrong."}], "answers": [{"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": true, "score": 3, "last_activity_date": 1538030275, "creation_date": 1538030275, "answer_id": 52530895, "question_id": 52514963, "link": "https://stackoverflow.com/questions/52514963/the-difference-between-attribute-unused-and-attributeunused-in-gcc/52530895#52530895", "title": "The difference between __attribute__((unused)) and __attribute((unused)) in GCC", "body": "<p>In the GCC repository, in the file <a href=\"https://github.com/gcc-mirror/gcc/blob/b5d1989793d030cedaa0afee81fc5e7bb4021dc9/gcc/c-family/c-common.c\" rel=\"nofollow noreferrer\">c-common.c</a>, the array <code>c_common_reswords</code> of the type <code>struct c_common_resword</code> is defined.</p>\n\n<p>In the array, you will find the following elements:  </p>\n\n<pre><code> { \"__attribute\",   RID_ATTRIBUTE,  0 },\n { \"__attribute__\", RID_ATTRIBUTE,  0 },\n</code></pre>\n\n<p>And <code>RID_ATTRIBUTE</code> is defined in <a href=\"https://github.com/gcc-mirror/gcc/blob/b5d1989793d030cedaa0afee81fc5e7bb4021dc9/gcc/c-family/c-common.h\" rel=\"nofollow noreferrer\">c-common.h</a> in the <code>enum rid</code> in the <code>/* C extensions */</code> section.</p>\n\n<p>So <code>__attribute</code> and <code>__attribute__</code> are the same.</p>\n"}], "owner": {"reputation": 103, "user_id": 10417881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea682d2bf036292dc55d2a56d5e5b56e?s=128&d=identicon&r=PG&f=1", "display_name": "Xiaoyao", "link": "https://stackoverflow.com/users/10417881/xiaoyao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 52530895, "answer_count": 1, "score": 2, "last_activity_date": 1538030275, "creation_date": 1537955778, "last_edit_date": 1537956155, "question_id": 52514963, "link": "https://stackoverflow.com/questions/52514963/the-difference-between-attribute-unused-and-attributeunused-in-gcc", "title": "The difference between __attribute__((unused)) and __attribute((unused)) in GCC", "body": "<p><code>__attribute__((unused))</code> and <code>__attribute((unused))</code> can mark variables as unused to avoid unused warning.</p>\n\n<p>What is the difference between them\uff1f </p>\n"}, {"tags": ["c", "loops", "do-while", "counting"], "comments": [{"owner": {"reputation": 253, "user_id": 1627237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/171fd94c6b53118bf62b211d6fd8f3fc?s=128&d=identicon&r=PG&f=1", "display_name": "user0x0", "link": "https://stackoverflow.com/users/1627237/user0x0"}, "edited": false, "score": 0, "creation_date": 1537955811, "post_id": 52514847, "comment_id": 91969566, "body": "Why are you comparing uint32_t with int32_t?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1537956044, "post_id": 52514847, "comment_id": 91969734, "body": "Please <a href=\"https://stackoverflow.com/posts/52514847/edit\">edit</a>  your question and show an example of input and exepected output."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1537956183, "post_id": 52514847, "comment_id": 91969818, "body": "I&#39;d start by quelling your assumption that <a href=\"https://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code></a> always works.It has a return result for a reason; use it. Don&#39;t ignore it."}, {"owner": {"reputation": 253, "user_id": 1627237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/171fd94c6b53118bf62b211d6fd8f3fc?s=128&d=identicon&r=PG&f=1", "display_name": "user0x0", "link": "https://stackoverflow.com/users/1627237/user0x0"}, "edited": false, "score": 0, "creation_date": 1537956525, "post_id": 52514847, "comment_id": 91970023, "body": "Also, not that when you use %i in scanf, it could read octal and hexadecimal numbers if entered (010 -&gt; 8 in decimal)"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 2, "last_activity_date": 1537956048, "creation_date": 1537956048, "answer_id": 52515045, "question_id": 52514847, "link": "https://stackoverflow.com/questions/52514847/prompt-the-user-to-ask-the-input-until-the-condition-is-met/52515045#52515045", "title": "Prompt the user to ask the input until the condition is met?", "body": "<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int32_t number;\n\n    while (puts(\"What number do you want to count? \"),  // prompt the user\n           scanf(\"%i\", &amp;number) != 1                    // reading an int failed\n           || number &lt; 1 || 100 &lt; number)               // number not in range\n    {\n        fputs(\"Error!\\n\\n\", stderr);       // print an error message\n        int ch;\n        while ((ch = getchar()) != EOF &amp;&amp; ch != '\\n');  // remove garbage left in stdin\n    }\n\n    printf(\"You typed %d.\\n\", number);\n\n    for(int32_t i = 0; i &lt; number; ++i)\n        printf(\"%i and then\\n\", i);\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8526428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93251994c76e7eff2fc76a8d1394c96a?s=128&d=identicon&r=PG&f=1", "display_name": "Chaite", "link": "https://stackoverflow.com/users/8526428/chaite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537956911, "creation_date": 1537955470, "last_edit_date": 1537955546, "question_id": 52514847, "link": "https://stackoverflow.com/questions/52514847/prompt-the-user-to-ask-the-input-until-the-condition-is-met", "title": "Prompt the user to ask the input until the condition is met?", "body": "<pre><code>int32_t number;\nuint32_t x = 1;\n\nputs(\"What number do you want to count: ?\");\n{\n    scanf(\"%i\", &amp;number);\n    printf(\"You typed%i.\\n\", number);\n    while(x &lt; number) {\n        printf(\"%i and then \\n\", x);\n        x++;\n    }\n    if (x &gt; 100 || x &lt; 1)\n        printf(\"error\");\n}\n</code></pre>\n\n<p>I want to print all the numbers till the user inputs numbers. But if the inputted number is less than 1 or greater than 100 then it should say error and ask the user to input the number again but it does not do that.  for instance if the number is 455 it should say error and prompt the user to input the number again.The program above only prints error after printing all the numbers even number grater or less than 100 and 1 respectively. </p>\n"}, {"tags": ["c", "raspberry-pi3", "raspbian"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6341337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Glns7.png?s=128&g=1", "display_name": "YashSeeta", "link": "https://stackoverflow.com/users/6341337/yashseeta"}, "edited": false, "score": 0, "creation_date": 1537958940, "post_id": 52515308, "comment_id": 91971440, "body": "i haven&#39;t terminated the child process, yet my program does not go into progression with the child processes. I used the if block to check the child process to mitigate that particular issue. Does the parent for block create all the child processes at once ?"}, {"owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "reply_to_user": {"reputation": 33, "user_id": 6341337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Glns7.png?s=128&g=1", "display_name": "YashSeeta", "link": "https://stackoverflow.com/users/6341337/yashseeta"}, "edited": false, "score": 0, "creation_date": 1537965906, "post_id": 52515308, "comment_id": 91975629, "body": "I&#39;ve tested the code you posted, it results that <code>function2</code> is called 1024 times since you don&#39;t terminate the child process. While if terminate the child it results 8 times. No the father does not generate all the child processes at the same time. I think you misunderstand the <code>if (pid == 0)</code> statement, this checks if this is the process of the last fork, but not the root process of the program, so also the child processes fork! You can find more details here: <a href=\"https://stackoverflow.com/questions/3213754/c-iterative-multiple-forks\" title=\"c iterative multiple forks\">stackoverflow.com/questions/3213754/c-iterative-multiple-for&zwnj;&#8203;ks</a>"}], "tags": [], "owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "is_accepted": false, "score": 0, "last_activity_date": 1537959250, "last_edit_date": 1537959250, "creation_date": 1537956815, "answer_id": 52515308, "question_id": 52514784, "link": "https://stackoverflow.com/questions/52514784/do-parent-and-child-process-execute-concurrently/52515308#52515308", "title": "do parent and child process execute concurrently", "body": "<p>Father and child processes do run concurrently, and it is not predictable which process is running at what time.</p>\n\n<p>From a first inspection you have a loop that starts from the father process and creates 8 child processes, that on their hand each creates other child processes! You should terminate the child process after calling the function2, otherwise the child processes will create other processes.</p>\n\n<p>I think the solution to your problem is something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n\nvoid function1() {\n    //0.5 seconds sleep\n    usleep(500000);\n}\n\nvoid function2(int n) {\n    for(int i = 0; i &lt;= 8; i++)  {\n        function1();\n        printf(\"LED(%d,%d)\\n\", n, i);\n    }\n}\nint main()\n{\n    pid_t pid;\n    for(int num = 0; num &lt;= 7; num++) {\n        pid = fork(); \n        if (pid == 0) {\n            function2(num);\n            exit(0);\n        }\n    }\n    for (int num = 0; num &lt;= 7; num++){\n        wait(NULL);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Please for future questions please post a <a href=\"https://stackoverflow.com/help/mcve\" title=\"Minimal, Complete, and Verifiable example\">Minimal, Complete, and Verifiable example</a>.</p>\n\n<p>The code could also have a concurrency problem, I don't think the <code>printf</code> is an atomic function, so a semaphore may be necessary to avoid having multiple processes calling the <code>printf</code>.</p>\n\n<p>Another note is that a check should be <code>fork()</code> to check if the child process was successfully generated.</p>\n"}], "owner": {"reputation": 33, "user_id": 6341337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Glns7.png?s=128&g=1", "display_name": "YashSeeta", "link": "https://stackoverflow.com/users/6341337/yashseeta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1522, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537959250, "creation_date": 1537955304, "question_id": 52514784, "link": "https://stackoverflow.com/questions/52514784/do-parent-and-child-process-execute-concurrently", "title": "do parent and child process execute concurrently", "body": "<p>I'm trying to figure out how the following program i wrote for a raspberry pi with led matrix works. </p>\n\n<p>The program is supposed to have a child process forked by the main process light up the LED from 0,0 -0,8 in first iteration for num=0. But instead, the LEDs light up randomly in the 0th column.</p>\n\n<p>Example : in 0th column  0,6,4,5,2,3,1\n          in 1st column  0,6,5,4,2,3,1\nand so on till 8th column. </p>\n\n<p>I'm confused as to why the \"main\" for loop controlling the rows runs randomly ,but the second loop controlling the columns works in an orderly increasing fashion.</p>\n\n<p>What am I missing in the working of fork together with a for loop?</p>\n\n<p>From the output I can only guess that the parent is somehow creating random child processes all at once that are calling function2 with their randomized num argument.</p>\n\n<pre><code>&lt;header files&gt;\nfunction1\n {   creates a delay of a second through calculations }\nfunction2(n)\n { for(int i = 0; i&lt;=8 ;i++) \n      function1;\n       printf(\"LED(%d,%d)\\n\",n,i);\n  }\n  main()\n  {\n    for(int num = 0; num &lt;=7; num++)\n         {\n            pid_t pid = fork(); \n            if (pid ==0)\n              {   function2(num); }  \n          }\n     for (int num =0; num &lt;= 7; num++)\n             { wait(NULL);}\n     }    \n</code></pre>\n"}, {"tags": ["c", "debugging", "gcc", "compiler-optimization"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1537955474, "post_id": 52514761, "comment_id": 91969350, "body": "Because the generated code does not have a 1:1 correspondence with the source code."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1537958154, "post_id": 52514761, "comment_id": 91970971, "body": "Instructions aren&#39;t just reordered. Some statements might get optimised away completely. Some instructions might be replaced with different instructions that produce the same results more efficiently. Your symbolic table of line numbers isn&#39;t helpful if the compiler produces instructions that doesn&#39;t correspond to the statements in your source code."}], "answers": [{"tags": [], "owner": {"reputation": 608, "user_id": 9502067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261b06a0bd237491cbf6130b573b1a2e?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Pane", "link": "https://stackoverflow.com/users/9502067/alexander-pane"}, "is_accepted": false, "score": 4, "last_activity_date": 1537956135, "last_edit_date": 1537956135, "creation_date": 1537955793, "answer_id": 52514968, "question_id": 52514761, "link": "https://stackoverflow.com/questions/52514761/gcc-optimization-and-debugging/52514968#52514968", "title": "GCC Optimization and debugging", "body": "<p>When you compile using the optimization flag you are ensured that the output of the program will be compliant to the code you wrote, but the code itself will variate from the one you actually compiled.</p>\n\n<p>As you pointed out, the code will be rearranged and some call will be performed differently. Also another optimization could be loop unrolling, branch prediction and functions calls simplification. These optimizations will also vary on the architecture you are running on.</p>\n\n<p>For all these reasons (and others) your code may become very difficult to debug, since it is transparent for you what the compiler exactly does, thus meaning that the code you want to debug may not look like the one you wrote.</p>\n"}, {"tags": [], "owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "is_accepted": false, "score": 5, "last_activity_date": 1537955996, "creation_date": 1537955996, "answer_id": 52515033, "question_id": 52514761, "link": "https://stackoverflow.com/questions/52514761/gcc-optimization-and-debugging/52515033#52515033", "title": "GCC Optimization and debugging", "body": "<p>An example that might happen:</p>\n\n<pre><code>int calc(int a, int b)\n{\n    return a &lt;&lt; b + 7;\n}\n\nint main()\n{\n    int x = 5;\n    int y = 7;\n    int val = calc(x, y);\n    return val;\n}\n</code></pre>\n\n<p>Optimized this might be the same as</p>\n\n<pre><code>int main()\n{\n    return 642;\n}\n</code></pre>\n\n<p>A contrived example, but trying to debug that kind of optimization in actual code isn\u2019t simple. Some debuggers may show all lines of code marked when stepping through, some might skip them all, some may be confused. And the developer at least is. </p>\n"}, {"tags": [], "owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "is_accepted": true, "score": 4, "last_activity_date": 1537956479, "creation_date": 1537956479, "answer_id": 52515201, "question_id": 52514761, "link": "https://stackoverflow.com/questions/52514761/gcc-optimization-and-debugging/52515201#52515201", "title": "GCC Optimization and debugging", "body": "<p>simple example:</p>\n\n<pre><code>int a = 4;\nint b = a;\nint c = b;\nprintf(\"%d\", c);\n</code></pre>\n\n<p>can be optimized as:</p>\n\n<pre><code>printf(\"%d\", 4);\n</code></pre>\n\n<p>In fact in optimized compiles, the compiler might well do exactly this (in machine code of course)</p>\n\n<p>When debugging we the debugger will allow us to inspect the memory associated by a,b and c but when the top version get optimized into the bottom version a,b and c no longer exist in RAM. This makes inspecting RAM a lot harder to figure out what is going on.</p>\n"}], "owner": {"reputation": 111, "user_id": 7814604, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4f26e4d8d6c7854f06676234a1ddf8c5?s=128&d=identicon&r=PG&f=1", "display_name": "0xbaadf00d", "link": "https://stackoverflow.com/users/7814604/0xbaadf00d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "accepted_answer_id": 52515201, "answer_count": 3, "score": 4, "last_activity_date": 1537966021, "creation_date": 1537955231, "last_edit_date": 1537966021, "question_id": 52514761, "link": "https://stackoverflow.com/questions/52514761/gcc-optimization-and-debugging", "title": "GCC Optimization and debugging", "body": "<p>I don't understand exactly the following:</p>\n\n<blockquote>\n  <p>When using debugging and optimization together, the internal rearrangements carried out by the optimizer can make it difficult to see what is going on when examining an optimized program in the debugger. For example, the ordering of statements may be changed.</p>\n</blockquote>\n\n<p>What i understand is when i build a program with the <code>-g</code> option, then the executable will contain a <em>symbolic table</em> which contains variable, function names, references to them and their line-numbers.\nAnd when i build with an optimization option, for example the ordering of instructions may be changed depends on the optimization.</p>\n\n<p>What i don't understand is, why debugging is more difficult.\nI would like to see an example, and an easy to understand explanation.</p>\n"}, {"tags": ["c", "random"], "comments": [{"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 1, "creation_date": 1537954507, "post_id": 52514296, "comment_id": 91968630, "body": "If &quot;randomness is not important&quot; there is <a href=\"https://www.xkcd.com/221/\" rel=\"nofollow noreferrer\">this possibility</a>. If that isn&#39;t adequate, perhaps randomness is important after all. Please clarify."}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1537955397, "post_id": 52514296, "comment_id": 91969288, "body": "A more serious suggestion, you could look into the <a href=\"https://en.wikipedia.org/wiki/Middle-square_method\" rel=\"nofollow noreferrer\">middle-square Weyle sequence</a>. The code at the bottom of that article seems likely to be fast."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8262312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb3f177ce3c5976ba77407c4b03a7f3?s=128&d=identicon&r=PG&f=1", "display_name": "kelvin", "link": "https://stackoverflow.com/users/8262312/kelvin"}, "edited": false, "score": 0, "creation_date": 1538016611, "post_id": 52514434, "comment_id": 91996763, "body": "That&#39;s a good solution. I settled with this code, 12 cycles used for that computation.  unsigned random_uint() { \tm_z = 36969 * (m_z &amp; 65535) + (m_z &gt;&gt; 8); \treturn m_z; }"}], "tags": [], "owner": {"reputation": 139, "user_id": 1935785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5ea09b0e08023b179f58c803d0932e?s=128&d=identicon&r=PG", "display_name": "Nic Wilson", "link": "https://stackoverflow.com/users/1935785/nic-wilson"}, "is_accepted": false, "score": 1, "last_activity_date": 1537954198, "creation_date": 1537954198, "answer_id": 52514434, "question_id": 52514296, "link": "https://stackoverflow.com/questions/52514296/simplest-random-number-generator-without-c-library/52514434#52514434", "title": "Simplest random number generator without C library?", "body": "<pre><code>static unsigned int g_seed;\n\n// Used to seed the generator.           \ninline void fast_srand(int seed) {\n    g_seed = seed;\n}\n\n// Compute a pseudorandom integer.\n// Output value in range [0, 32767]\ninline int fast_rand(void) {\n    g_seed = (214013*g_seed+2531011);\n    return (g_seed&gt;&gt;16)&amp;0x7FFF;\n}\n</code></pre>\n\n<p>From here: <a href=\"https://stackoverflow.com/questions/26237419/faster-than-rand\">Faster than rand()?</a></p>\n"}, {"comments": [{"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 31, "user_id": 8262312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb3f177ce3c5976ba77407c4b03a7f3?s=128&d=identicon&r=PG&f=1", "display_name": "kelvin", "link": "https://stackoverflow.com/users/8262312/kelvin"}, "edited": false, "score": 1, "creation_date": 1538059512, "post_id": 52520577, "comment_id": 92018898, "body": "@kelvin Reading <a href=\"https://developer.arm.com/products/processors/cortex-m/cortex-m0\" rel=\"nofollow noreferrer\">developer.arm.com/products/processors/cortex-m/cortex-m0</a>, Enhanced instructions: single cycle 32x32 multiplication, my latter RNG might really be fastest option, fitting into under 10 cycles constraint"}, {"owner": {"reputation": 31, "user_id": 8262312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb3f177ce3c5976ba77407c4b03a7f3?s=128&d=identicon&r=PG&f=1", "display_name": "kelvin", "link": "https://stackoverflow.com/users/8262312/kelvin"}, "edited": false, "score": 0, "creation_date": 1538097959, "post_id": 52520577, "comment_id": 92033655, "body": "Yes Severin. You are right and Thank you. Your latter RNG saves 1 addition from the code I finally used. I choose that addition to make it less guestimable."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 31, "user_id": 8262312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb3f177ce3c5976ba77407c4b03a7f3?s=128&d=identicon&r=PG&f=1", "display_name": "kelvin", "link": "https://stackoverflow.com/users/8262312/kelvin"}, "edited": false, "score": 0, "creation_date": 1538101142, "post_id": 52520577, "comment_id": 92034261, "body": "@kelvin. Good. That addition is one additional bit of randomness. Without it you would be getting all odd numbers and no even ones. Obviously, twice as much period as well. Good luck!"}], "tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": 2, "last_activity_date": 1537988236, "last_edit_date": 1537988236, "creation_date": 1537973424, "answer_id": 52520577, "question_id": 52514296, "link": "https://stackoverflow.com/questions/52514296/simplest-random-number-generator-without-c-library/52520577#52520577", "title": "Simplest random number generator without C library?", "body": "<p>Well, I believe it is 32bit architecture, and fastest probably would be <a href=\"https://en.wikipedia.org/wiki/Linear_congruential_generator\" rel=\"nofollow noreferrer\">LCG RNG</a>. Using values from <em>Numerical Recipes</em>, with period of 2<sup>32</sup></p>\n\n<pre><code>inline uint32_t random_u32(uint32_t prev) {\n    return prev*1664525U + 1013904223U; // assuming complement-2 integers and non-signaling overflow\n}\n\nint main() {\n    auto seed = 1U;\n    uint32_t = result;\n\n    result = seed = random_u32(seed);\n    result = seed = random_u32(seed);\n    result = seed = random_u32(seed);\n    ...\n    return 0;\n}\n</code></pre>\n\n<p>Actually, even simpler version but with smaller period, what is used in C++-11 minstd, 2<sup>31</sup>-1 period.</p>\n\n<pre><code>inline uint32_t random_u32(uint32_t prev) {\n    return prev*48271U;\n}\n</code></pre>\n\n<p>Seed shall not be 0, start with some odd number like 134775813U</p>\n"}, {"tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 1, "last_activity_date": 1537976001, "creation_date": 1537976001, "answer_id": 52521445, "question_id": 52514296, "link": "https://stackoverflow.com/questions/52514296/simplest-random-number-generator-without-c-library/52521445#52521445", "title": "Simplest random number generator without C library?", "body": "<p>Some of the fastest generators are from the <a href=\"https://en.wikipedia.org/wiki/Xorshift\" rel=\"nofollow noreferrer\">Xorshift</a> family discovered by <a href=\"https://en.wikipedia.org/wiki/George_Marsaglia\" rel=\"nofollow noreferrer\">George Marsaglia</a>, a brilliant contributor to both PRNG design and PRNG testing.  The Xorshift link has sample code.  The implementations given use three shifts and three XORs, which should take one cycle apiece and would be pretty hard to beat.</p>\n"}], "owner": {"reputation": 31, "user_id": 8262312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb3f177ce3c5976ba77407c4b03a7f3?s=128&d=identicon&r=PG&f=1", "display_name": "kelvin", "link": "https://stackoverflow.com/users/8262312/kelvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1404, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1537988653, "creation_date": 1537953797, "last_edit_date": 1537988653, "question_id": 52514296, "link": "https://stackoverflow.com/questions/52514296/simplest-random-number-generator-without-c-library", "title": "Simplest random number generator without C library?", "body": "<p>I would need to add some randomization to my Cortex M0 CPU firmware. The randomness is not important but the speed is. </p>\n\n<p>I tested two functions I found online. With <code>random()</code> I managed to generate 1 number per 31 clock cycles, while <code>random_uint()</code> generated 1 number in 20 cycles. My target is less than 10. What are other functions can I use?</p>\n\n<pre><code>unsigned random() {\n    unsigned b;\n\n    b = t1 ^ (t1 &gt;&gt; 2) ^ (t1 &gt;&gt; 6) ^ (t1 &gt;&gt; 7);\n    t1 = (t1 &gt;&gt; 1) | (~b &lt;&lt; 31);\n\n    b = (t2 &lt;&lt; 1) ^ (t2 &lt;&lt; 2) ^ (t1 &lt;&lt; 3) ^ (t2 &lt;&lt; 4);\n    t2 = (t2 &lt;&lt; 1) | (~b &gt;&gt; 31);\n\n    return t1 ^ t2;\n}\n\nunsigned random_uint() {\n    m_z = 36969 * (m_z &amp; 65535) + (m_z &gt;&gt; 16);\n    m_w = 18000 * (m_w &amp; 65535) + (m_w &gt;&gt; 16);\n    return (m_z &lt;&lt; 16) + m_w;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1537953723, "post_id": 52514119, "comment_id": 91968155, "body": "Not the cause of your problem, but this is wrong: <code>printf(&quot;%#02x  &quot;, xor, &quot;%d &quot;, xor);</code> it should be <code>printf(&quot;%#02x  %d\\n&quot;, xor, xor);</code>"}, {"owner": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "edited": false, "score": 0, "creation_date": 1537954952, "post_id": 52514119, "comment_id": 91968940, "body": "I am missing the bracket around the for-loop"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1537955078, "post_id": 52514119, "comment_id": 91969041, "body": "Please don&#39;t &quot;correct&quot; the code in your question as the answer bewlow doesn&#39;t make sense anymore. If you have another question, ask another question."}, {"owner": {"reputation": 19, "user_id": 10408434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b1d9c2fef7d79ff9dc69288b8ed73d?s=128&d=identicon&r=PG&f=1", "display_name": "kabanos", "link": "https://stackoverflow.com/users/10408434/kabanos"}, "edited": false, "score": 0, "creation_date": 1537955150, "post_id": 52514119, "comment_id": 91969100, "body": "sorry for that stupid mistake"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10408434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b1d9c2fef7d79ff9dc69288b8ed73d?s=128&d=identicon&r=PG&f=1", "display_name": "kabanos", "link": "https://stackoverflow.com/users/10408434/kabanos"}, "edited": false, "score": 0, "creation_date": 1537954641, "post_id": 52514280, "comment_id": 91968717, "body": "atoi did work, however i wasn&#39;t able to display it. Second option is easier. Also i still have problems with the variables.. <a href=\"https://ideone.com/D4qGDf\" rel=\"nofollow noreferrer\">DEMO</a>  Am i right? i need to convert hex (xor sumcheck) value to dec?"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 19, "user_id": 10408434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b1d9c2fef7d79ff9dc69288b8ed73d?s=128&d=identicon&r=PG&f=1", "display_name": "kabanos", "link": "https://stackoverflow.com/users/10408434/kabanos"}, "edited": false, "score": 0, "creation_date": 1537954781, "post_id": 52514280, "comment_id": 91968816, "body": "@kabanos I&#39;m not able to access your Link. What problems you are having with variables?"}, {"owner": {"reputation": 19, "user_id": 10408434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b1d9c2fef7d79ff9dc69288b8ed73d?s=128&d=identicon&r=PG&f=1", "display_name": "kabanos", "link": "https://stackoverflow.com/users/10408434/kabanos"}, "edited": false, "score": 0, "creation_date": 1537954962, "post_id": 52514280, "comment_id": 91968950, "body": "i&#39;ve updated the question, your answer was very helpful. however now i need to perform if statement to check if xor (sumcheck) equals b (merging of 6 and 4). xor is in hex and b is in dec value. Can i convert 64(dec) to 64(hex)?"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 19, "user_id": 10408434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b1d9c2fef7d79ff9dc69288b8ed73d?s=128&d=identicon&r=PG&f=1", "display_name": "kabanos", "link": "https://stackoverflow.com/users/10408434/kabanos"}, "edited": false, "score": 0, "creation_date": 1537955282, "post_id": 52514280, "comment_id": 91969205, "body": "@kabanos use Base 16 conversion <code>b = ((Received[16]-&#39;0&#39;) *16) + Received[17]-&#39;0&#39;;</code>  Same I have already included in the answer."}], "tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 1, "last_activity_date": 1537955458, "last_edit_date": 1537955458, "creation_date": 1537953746, "answer_id": 52514280, "question_id": 52514119, "link": "https://stackoverflow.com/questions/52514119/merging-two-array-elements-into-one/52514280#52514280", "title": "merging two array elements into one", "body": "<p>You cannot pass a <code>char</code> to <code>atoi</code> because it expects its input to be <em>pointer to char</em> (<code>char*</code>).</p>\n\n<p>If you wants to use <code>atoi</code> you need to form the string yourself and pass it to <code>atoi</code> as below.</p>\n\n<pre><code> char a[3] = {Received[16],Received[17]};\n b = atoi(a); //Base 10\n</code></pre>\n\n<p>Use <code>strol</code> for <em>base 16(HEX)</em> as below</p>\n\n<pre><code> b = strtol(a,NULL,16);\n</code></pre>\n\n<p>If you don't want to use <code>atoi</code> or <code>strol</code> you can do as below.</p>\n\n<pre><code> b = ((Received[16]-'0') *10) + (Received[17]-'0'); //Base 10\n b = ((Received[16]-'0') *16) + (Received[17]-'0'); //Base 16\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10408434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b1d9c2fef7d79ff9dc69288b8ed73d?s=128&d=identicon&r=PG&f=1", "display_name": "kabanos", "link": "https://stackoverflow.com/users/10408434/kabanos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 52514280, "answer_count": 1, "score": 0, "last_activity_date": 1537955458, "creation_date": 1537953287, "last_edit_date": 1537955106, "question_id": 52514119, "link": "https://stackoverflow.com/questions/52514119/merging-two-array-elements-into-one", "title": "merging two array elements into one", "body": "<p>After managing to correctly execute xor of chars between \"$\" and \"*\"  I need to perform \"IF statement\" to check if the xor indeed equals \"64\". I need to merge these two chars and somehow compare to the xor. The problem is i variables type. XOR (sumcheck) is in hex, the b (merging of 6 and 4) is in dec. Should i convert XOR to dec value, or convert 64(dec) to 64(hex) value?</p>\n\n<p><a href=\"https://ideone.com/D4qGDf\" rel=\"nofollow noreferrer\">DEMO</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n\nint i;\nint xor = 0;\nint b;\n// $GPGLL,,,,,,V,N*64\n\nchar Received[18]= {'$','G','P','G','L','L',',',',',',',',',',',',','V',',','N','*','6','4'};\nint loop;\n\n// display array\n//for(loop = 0; loop &lt; 18; loop++)\n//   printf(\"%c \", Received[loop]);\n\nfor(int i = 1; i&lt;=14; i++)\n    xor ^= Received[i];\n    printf(\"%#02x  \", xor);\n    printf(\"%d \", xor);\n\n    b = ((Received[16]-'0') *10) + Received[17]-'0';\n    printf(\"%d \", b);\n\nif(xor == b){\n    printf(\"WORKING!\");\n}\nelse{\n    printf(\"not working\");\n}\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1537953675, "post_id": 52514115, "comment_id": 91968129, "body": "Did you try to run that by a compiler before asking if the code makes any sense?"}, {"owner": {"reputation": 25, "user_id": 10416660, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4S5Ys-Y9i30/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWrEhg89IMgANH_Cy_xAkWs_FBipQ/mo/photo.jpg?sz=128", "display_name": "Shaik Nisar Ahmed", "link": "https://stackoverflow.com/users/10416660/shaik-nisar-ahmed"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537954158, "post_id": 52514115, "comment_id": 91968424, "body": "@StoryTeller Yes."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1537954198, "post_id": 52514115, "comment_id": 91968446, "body": "And you got no errors? Now I&#39;m curious. What compiler did you use?"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1537954488, "post_id": 52514115, "comment_id": 91968619, "body": "This is a good question, to my mind. But &quot;it compiles&quot; does not mean that the program is correct. You should always look for warnings (and enable mostly all of them with <code>-Wall</code> and maybe <code>-Wextra</code>). Btw it does not compile with gcc 5.4.0."}, {"owner": {"reputation": 25, "user_id": 10416660, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4S5Ys-Y9i30/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWrEhg89IMgANH_Cy_xAkWs_FBipQ/mo/photo.jpg?sz=128", "display_name": "Shaik Nisar Ahmed", "link": "https://stackoverflow.com/users/10416660/shaik-nisar-ahmed"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537954532, "post_id": 52514115, "comment_id": 91968645, "body": "@StoryTeller I got an error, the program didn&#39;t compile. But i was curious to know about the ownership of the variable."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1537954577, "post_id": 52514115, "comment_id": 91968677, "body": "It compiles with the Microsoft C compiler provided with Visual Studio 2017, but you get the warning: <code>Warning C4042 z : has bad storage class&quot;</code>, in that case the <code>auto</code> keyword is probably ignored by the compiler."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1537954653, "post_id": 52514115, "comment_id": 91968726, "body": "@ShaikNisarAhmed <i>I got an error, the program didn&#39;t compile</i>. If the program didn&#39;t compile it&#39;s pointless to discuss about the ownership of the variable."}], "answers": [{"tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": false, "score": 4, "last_activity_date": 1537954731, "last_edit_date": 1537954731, "creation_date": 1537953859, "answer_id": 52514313, "question_id": 52514115, "link": "https://stackoverflow.com/questions/52514115/automatic-storage-class-variable-in-c-declared-outside-the-function-block/52514313#52514313", "title": "automatic storage class variable in C declared outside the function block", "body": "<p>Code contains <em>constraint violation</em> and is not valid C code. This means that there is no guarantee that your code will compile or work correctly.</p>\n\n<blockquote>\n  <h2>6.9 External definitions</h2>\n  \n  <p><strong>Constraints</strong></p>\n  \n  <ol start=\"2\">\n  <li>The storage-class specifiers <code>auto</code> and <code>register</code> shall not appear in the declaration specifiers in an\n  external declaration.</li>\n  </ol>\n</blockquote>\n\n<p>So answers to your questions are:</p>\n\n<ul>\n<li>Variable is not part of any function block, since it's external declaration.</li>\n<li>Properties of the variable <code>z</code> are undefined, because the code is invalid.</li>\n</ul>\n"}], "owner": {"reputation": 25, "user_id": 10416660, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4S5Ys-Y9i30/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWrEhg89IMgANH_Cy_xAkWs_FBipQ/mo/photo.jpg?sz=128", "display_name": "Shaik Nisar Ahmed", "link": "https://stackoverflow.com/users/10416660/shaik-nisar-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537954731, "creation_date": 1537953278, "question_id": 52514115, "link": "https://stackoverflow.com/questions/52514115/automatic-storage-class-variable-in-c-declared-outside-the-function-block", "title": "automatic storage class variable in C declared outside the function block", "body": "<pre><code>#include&lt;stdio.h&gt;\nvoid function1(void);\nauto int z = 10;\n\nint main()\n{\nprintf(\"Hello, I'm main.\\n\");\n}\n\nvoid function1(void)\n{\nprintf(\"Hello, I'm function1.\\n\");\n}\n</code></pre>\n\n<ul>\n<li>Variable 'z' is declared outside the function blocks, and belongs to\n'automatic storage class'.</li>\n<li><strong>Variable 'z' is part of which function block in this scenario?</strong></li>\n<li><strong>What are the properties of the variable 'z' in this scenario?</strong></li>\n</ul>\n"}, {"tags": ["c", "openssl"], "comments": [{"owner": {"reputation": 2476, "user_id": 312067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc6d2132ca2e178cba31998f15aa9e2?s=128&d=identicon&r=PG", "display_name": "Jon Ander Ortiz Dur&#225;ntez", "link": "https://stackoverflow.com/users/312067/jon-ander-ortiz-dur%c3%a1ntez"}, "edited": false, "score": 0, "creation_date": 1537957356, "post_id": 52513900, "comment_id": 91970514, "body": "Looks like the underlying socket is non-blocking and the BIO_Write is returning 0 (which is something valid in non-blocking socket scenario), please provide the socket creation call and check that in cases where n == 0, BIO_should_retry returns true."}, {"owner": {"reputation": 329, "user_id": 4620235, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1a75a15c9b2e10fc619d14ce765416c6?s=128&d=identicon&r=PG&f=1", "display_name": "eko", "link": "https://stackoverflow.com/users/4620235/eko"}, "reply_to_user": {"reputation": 2476, "user_id": 312067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc6d2132ca2e178cba31998f15aa9e2?s=128&d=identicon&r=PG", "display_name": "Jon Ander Ortiz Dur&#225;ntez", "link": "https://stackoverflow.com/users/312067/jon-ander-ortiz-dur%c3%a1ntez"}, "edited": false, "score": 0, "creation_date": 1537957609, "post_id": 52513900, "comment_id": 91970662, "body": "I&#39;m using a blocking BIO. The first thing I tried was to add a check after that loop, if (BIO_should_retry(bio)), and set a breakpoint within. It never reaches that line. Also, after the loop, bio-&gt;flags == 0."}, {"owner": {"reputation": 2476, "user_id": 312067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc6d2132ca2e178cba31998f15aa9e2?s=128&d=identicon&r=PG", "display_name": "Jon Ander Ortiz Dur&#225;ntez", "link": "https://stackoverflow.com/users/312067/jon-ander-ortiz-dur%c3%a1ntez"}, "edited": false, "score": 0, "creation_date": 1537974203, "post_id": 52513900, "comment_id": 91981244, "body": "Sounds weird... check if you have activated SSL_MODE_ENABLE_PARTIAL_WRITE option."}, {"owner": {"reputation": 329, "user_id": 4620235, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1a75a15c9b2e10fc619d14ce765416c6?s=128&d=identicon&r=PG&f=1", "display_name": "eko", "link": "https://stackoverflow.com/users/4620235/eko"}, "reply_to_user": {"reputation": 2476, "user_id": 312067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc6d2132ca2e178cba31998f15aa9e2?s=128&d=identicon&r=PG", "display_name": "Jon Ander Ortiz Dur&#225;ntez", "link": "https://stackoverflow.com/users/312067/jon-ander-ortiz-dur%c3%a1ntez"}, "edited": false, "score": 0, "creation_date": 1538025049, "post_id": 52513900, "comment_id": 91998808, "body": "Hmm... I&#39;m not currently using SSL (the same BIO api is used for both secure and non-secure connection). Is there an equivalent option for BIO with no ssl context?"}], "answers": [{"tags": [], "owner": {"reputation": 329, "user_id": 4620235, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1a75a15c9b2e10fc619d14ce765416c6?s=128&d=identicon&r=PG&f=1", "display_name": "eko", "link": "https://stackoverflow.com/users/4620235/eko"}, "is_accepted": true, "score": 0, "last_activity_date": 1538051271, "creation_date": 1538051271, "answer_id": 52537035, "question_id": 52513900, "link": "https://stackoverflow.com/questions/52513900/openssl-bio-writing-partial-file/52537035#52537035", "title": "OpenSSL BIO writing partial file", "body": "<p>I found out the problem. I did not wait for the response on control socket between closing the data connection and sending QUIT. <a href=\"https://stackoverflow.com/questions/15343022/dont-always-get-a-226-transfer-ok-at-the-end-of-an-ftp-upload\">This question</a> was helpful for finding the answer.</p>\n"}], "owner": {"reputation": 329, "user_id": 4620235, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1a75a15c9b2e10fc619d14ce765416c6?s=128&d=identicon&r=PG&f=1", "display_name": "eko", "link": "https://stackoverflow.com/users/4620235/eko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 52537035, "answer_count": 1, "score": 1, "last_activity_date": 1538051271, "creation_date": 1537952715, "last_edit_date": 1537954322, "question_id": 52513900, "link": "https://stackoverflow.com/questions/52513900/openssl-bio-writing-partial-file", "title": "OpenSSL BIO writing partial file", "body": "<p>I'm trying to use openssl bio to perform FTP STOR operation. Most of the time it works perfectly, but sometimes it only sends partial data. So the logic goes like this:</p>\n\n<pre><code>1. authentication and passive mode selection\n2. open data connection\n3. write data\n4. QUIT\n</code></pre>\n\n<p>All operations should be performed synchronously. The data writing function does this:</p>\n\n<pre><code>while (written &lt; toWrite &amp;&amp; n &gt; 0) {\n    n = BIO_write(bio, message.c_str() + written, toWrite - written);\n    written += n;\n}\n</code></pre>\n\n<p>After this loop, written == toWrite and n > 0, so it would indicate that the write was completed successfully. However, the file is truncated. When I view the operation in wireshark, I can notice that QUIT operation is sent right after the first chunk of data is transferred. Client also continues sending some data chunks after QUIT command. Does anyone have a clue how that is possible?</p>\n\n<p>EDIT: If there's a short delay (e.g. sleep) between writing data and QUIT, it works perfectly.</p>\n"}, {"tags": ["c", "docker", "go", "dockerfile", "gmp"], "comments": [{"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1537958207, "post_id": 52513731, "comment_id": 91971003, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/52508498/add-c-library-to-docker\">Add C library to docker</a>"}, {"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1537958273, "post_id": 52513731, "comment_id": 91971040, "body": "This is exactly the same as the question you posted yesterday: the pbc library depends on the gmp library and you need to install that too.  (That&#39;s pretty common and you might be able to use a distribution package manager to add it and its development files.)"}, {"owner": {"reputation": 129, "user_id": 7694216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XkyCe.jpg?s=128&g=1", "display_name": "inyutin", "link": "https://stackoverflow.com/users/7694216/inyutin"}, "reply_to_user": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1537958807, "post_id": 52513731, "comment_id": 91971343, "body": "You can see that I add gmp through apk. Howerver  I still get error while installing pbc"}, {"owner": {"reputation": 129, "user_id": 7694216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XkyCe.jpg?s=128&g=1", "display_name": "inyutin", "link": "https://stackoverflow.com/users/7694216/inyutin"}, "reply_to_user": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1538070095, "post_id": 52513731, "comment_id": 111666047, "body": "Changing to Ubuntu env. solve this problem"}], "owner": {"reputation": 129, "user_id": 7694216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XkyCe.jpg?s=128&g=1", "display_name": "inyutin", "link": "https://stackoverflow.com/users/7694216/inyutin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 752, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1596004943, "creation_date": 1537952097, "last_edit_date": 1537961797, "question_id": 52513731, "link": "https://stackoverflow.com/questions/52513731/gmp-library-not-found", "title": "gmp library not found", "body": "<p>I try to install pbc library which have gmp as dependence.\nDockerfile:</p>\n\n<pre><code>FROM golang:1.9.6-alpine3.7\n\nRUN mkdir -p /go/src/app\n\nWORKDIR /go/src/app\n\nCOPY . /go/src/app\n\nRUN apk add --update git gcc build-base flex bison gmp\n\nRUN wget https://crypto.stanford.edu/pbc/files/pbc-0.5.14.tar.gz &amp;&amp; \\\n    tar -xvf pbc-0.5.14.tar.gz &amp;&amp; \\\n    cd pbc-0.5.14 &amp;&amp; \\\n    ./configure --prefix=$HOME/.local &amp;&amp; \\\n    make &amp;&amp; make install\n\nRUN rm pbc-0.5.14.tar.gz &amp;&amp; rm -rf pbc-0.5.14 \n\nRUN go-wrapper download\n\nRUN go-wrapper install\n\nCMD [\"go-wrapper\", \"run\", \"-web\"]\n\nEXPOSE 8000\n</code></pre>\n\n<p>However when I run it I get such an error during pbc installation:</p>\n\n<pre><code>gmp library not found\nadd its path to LDFLAGS\nsee ./configure --help\n</code></pre>\n\n<p>Here I found that i should add export:\n<a href=\"https://stackoverflow.com/questions/6254245/how-to-add-a-path-to-ldflags/12718015\">How to add a path to LDFLAGS</a></p>\n\n<p>Note that I add gmp to dependencies, but pbg dont see it</p>\n\n<p>How should I do it throw docker?</p>\n"}, {"tags": ["c", "design-patterns", "struct", "decorator"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1537951202, "post_id": 52513363, "comment_id": 91966585, "body": "One problem is of course that decorators are a super-high level concept, and not at all available in C."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1537951522, "post_id": 52513363, "comment_id": 91966779, "body": "Rather than providing pseudo-code, it would be better to provided some representative actual code.   Simplifying or refactoring pseudo-code, particularly if you have left out relevant information about what the code does (e.g. do the functions being called have observable side effects that aren&#39;t obvious given only the return type and argument list?) doesn&#39;t tend to be a useful guide for factoring actual code.   As described, short of macros, there is no obvious solution.   And I would recommend against macros for this use case."}, {"owner": {"reputation": 155, "user_id": 3154403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356b6b1442238daa809a50b4e6830e53?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3154403/alain"}, "edited": false, "score": 0, "creation_date": 1537954968, "post_id": 52513363, "comment_id": 91968956, "body": "I provided a minimum working example as requested."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 3154403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356b6b1442238daa809a50b4e6830e53?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3154403/alain"}, "edited": false, "score": 0, "creation_date": 1537955375, "post_id": 52514728, "comment_id": 91969276, "body": "I am absolutely free to modify foo1 and foo2, thus your answer is good to me. As you said (First off, your decorator-function would accept the function pointer, so foo1 and foo2 need the same function signature), I do not see other approaches to this problem. Thanks"}, {"owner": {"reputation": 2298, "user_id": 7699037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae22aa9776941949ddf401f3eb7fc318?s=128&d=identicon&r=PG&f=1", "display_name": "Mike van Dyke", "link": "https://stackoverflow.com/users/7699037/mike-van-dyke"}, "reply_to_user": {"reputation": 155, "user_id": 3154403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356b6b1442238daa809a50b4e6830e53?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3154403/alain"}, "edited": false, "score": 0, "creation_date": 1537955835, "post_id": 52514728, "comment_id": 91969587, "body": "@alain Neither do I. C is a little ugly in such cases. Maybe switch to C++? :D"}, {"owner": {"reputation": 155, "user_id": 3154403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356b6b1442238daa809a50b4e6830e53?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3154403/alain"}, "edited": false, "score": 0, "creation_date": 1537955941, "post_id": 52514728, "comment_id": 91969666, "body": "I can&#39;t unfortunately, since I am developing on an existing platform..."}], "tags": [], "owner": {"reputation": 2298, "user_id": 7699037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ae22aa9776941949ddf401f3eb7fc318?s=128&d=identicon&r=PG&f=1", "display_name": "Mike van Dyke", "link": "https://stackoverflow.com/users/7699037/mike-van-dyke"}, "is_accepted": false, "score": 1, "last_activity_date": 1537955091, "creation_date": 1537955091, "answer_id": 52514728, "question_id": 52513363, "link": "https://stackoverflow.com/questions/52513363/how-to-execute-common-code-before-and-after-another-function-in-c/52514728#52514728", "title": "How to execute common code before and after another function in c?", "body": "<p>How much hacking are you allowed to do? Are you allowed to change <code>foo1</code> and <code>foo2</code>? Because you could do something with function pointers and pointer casting:</p>\n\n<p>First off, your <code>decorator</code>-function would accept the function pointer, so <code>foo1</code> and <code>foo2</code> need the same function signature:</p>\n\n<pre><code>bool foo1(struct B t, void* args);\nbool foo2(struct B t, void* args);\n</code></pre>\n\n<p>In order to pass the arguments to these two functions, I would suggest some structs:</p>\n\n<pre><code>typedef struct {\n  bool status;\n  int t1;\n  int t2;\n} foo1_args;\n\ntypedef struct {\n  bool active;\n} foo2_args;\n</code></pre>\n\n<p>And then cast these arguments inside of <code>foo1</code> and <code>foo2</code>:</p>\n\n<pre><code>bool foo1(struct B t, void* args) {\n  foo1_args* my_args = (foo1_args*)args;\n  bool status = my_args-&gt;status;\n  // ...\n}\n\nbool foo2(struct B t, void* args) {\n  foo2_args* my_args = (foo2_args*)args;\n  bool active = my_args-&gt;active;\n  // ...\n}\n</code></pre>\n\n<p>Next comes your decorator function, which does the common stuff, and calls the function pointer with the specified arguments:</p>\n\n<pre><code>bool decorator(gpio g, bool (*func)(struct B, void*), void* args) {\n  struct A shm = shmget();\n  struct B target = shm.gpio[g];\n  if (target.active) {\n    bool res = func(target, args);  // do something on struct B indexed by g\n    shmdt();\n    return res;\n  } else\n    return false;\n}\n</code></pre>\n\n<p>And finally your <code>activate</code> or <code>set_status</code> functions:</p>\n\n<pre><code>bool set_status(gpio g, bool status, int t1, int t2) {\n  foo1_args args = {status, t1, t2};\n  return decorator(g, foo1, &amp;args);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155, "user_id": 3154403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356b6b1442238daa809a50b4e6830e53?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3154403/alain"}, "edited": false, "score": 0, "creation_date": 1537975520, "post_id": 52515286, "comment_id": 91982052, "body": "what if I have a foo which takes no arguments?"}, {"owner": {"reputation": 941, "user_id": 7617604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7f920ede1516b4f8460a1b0e554bc8b?s=128&d=identicon&r=PG&f=1", "display_name": "Burdui", "link": "https://stackoverflow.com/users/7617604/burdui"}, "reply_to_user": {"reputation": 155, "user_id": 3154403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356b6b1442238daa809a50b4e6830e53?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3154403/alain"}, "edited": false, "score": 0, "creation_date": 1537984325, "post_id": 52515286, "comment_id": 91986568, "body": "@alain If foo takes no argument simply don&#39;t provide more than two elements: DECORATOR(foo, g)"}, {"owner": {"reputation": 155, "user_id": 3154403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356b6b1442238daa809a50b4e6830e53?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3154403/alain"}, "edited": false, "score": 0, "creation_date": 1538031294, "post_id": 52515286, "comment_id": 92001550, "body": "I found a solution to a problem I had with empty __VA_ARGS__ and you can find it here: <a href=\"https://stackoverflow.com/questions/5891221/variadic-macros-with-zero-arguments\" title=\"variadic macros with zero arguments\">stackoverflow.com/questions/5891221/&hellip;</a>. Simply add ## before __VA_ARGS__ (<a href=\"https://gcc.gnu.org/onlinedocs/gcc/Variadic-Macros.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Variadic-Macros.html</a>)"}], "tags": [], "owner": {"reputation": 941, "user_id": 7617604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7f920ede1516b4f8460a1b0e554bc8b?s=128&d=identicon&r=PG&f=1", "display_name": "Burdui", "link": "https://stackoverflow.com/users/7617604/burdui"}, "is_accepted": true, "score": 2, "last_activity_date": 1537956745, "creation_date": 1537956745, "answer_id": 52515286, "question_id": 52513363, "link": "https://stackoverflow.com/questions/52513363/how-to-execute-common-code-before-and-after-another-function-in-c/52515286#52515286", "title": "How to execute common code before and after another function in c?", "body": "<p>You could create a variadic macro:</p>\n\n<pre><code>#define DECORATOR(fn, g, ...) \\\n    struct A shm = shmget(); \\\n    struct B target = shm.gpio[(g)]; \\\n    if(target.active) { \\\n        bool res = (fn)(__VA_ARGS__)\\\n        shmdt(); \\\n        return res; \\\n    } else {\\\n        return false; \\\n    }\n</code></pre>\n\n<p>And use it like this</p>\n\n<pre><code>bool set_status(gpio g, bool status, int t1, int t2) {\n    DECORATOR(foo1, g, status, t1, t2)\n}\n\nbool activate(gpio g, bool active) {\n    DECORATOR(foo2, g, active)\n}\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 3154403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/356b6b1442238daa809a50b4e6830e53?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3154403/alain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 52515286, "answer_count": 2, "score": 2, "last_activity_date": 1537956745, "creation_date": 1537950815, "last_edit_date": 1537954938, "question_id": 52513363, "link": "https://stackoverflow.com/questions/52513363/how-to-execute-common-code-before-and-after-another-function-in-c", "title": "How to execute common code before and after another function in c?", "body": "<p>Here I explain the problem.\nSuppose I have a struct A loaded in shared memory.\nThe struct A might be something like this:</p>\n\n<pre><code>typedef enum{\n    GPIO_1,\n    GPIO_2,\n    GPIO_3,\n    GPIO_4,\n    GPIO_5,\n    N_GPIO\n} gpio;\n\nstruct B {\n    bool active;\n    bool status;\n    bool direction;\n    int timestamp;\n    int t1;\n    int t2;\n};\n\nstruct A {\n    struct B gpio[N_GPIO];\n};\n</code></pre>\n\n<p>Also suppose I have two functions which would operate on one of the B structs in A:</p>\n\n<pre><code>bool set_status(gpio g, bool status, int t1, int t2);\nbool activate(gpio g, bool active);\n</code></pre>\n\n<p>Since A is loaded in shared memory, I need to call <strong>shmget</strong> and <strong>shmdt</strong> within the two functions above; the pseudocode for the first function should be something like this:</p>\n\n<pre><code>bool set_status(gpio g, bool status, int t1, int t2) {\n    struct A shm = shmget();\n    struct B target = shm.gpio[g];\n    if(target.active) {\n        bool res = foo1(target, status, t1, t2); //do something on struct B indexed by g\n        shmdt();\n        return res;\n    else \n        return false;\n}\n</code></pre>\n\n<p>The pseudocode for the second function should be something like this:</p>\n\n<pre><code>bool activate(gpio g, bool active) {\n    struct A shm = shmget();\n    struct B target = shm.gpio[g];\n    if(target.active) {\n        bool res = foo2(target, active); //do something on struct B indexed by g\n        shmdt();\n        return res;\n    else\n        return false;\n}\n</code></pre>\n\n<p>Now, is there a way I can prevent to have that common code which manages shm and checks if B.active is set? To me, this looks something like decorators, i.e. have a function that manages shm, checks for B.active and calls a second function within it, but the problem is that that the second function might has not a unique signature (might have different number of parameters).</p>\n\n<p>I would like to have something like this:</p>\n\n<pre><code>bool set_status(gpio g, bool status, int t1, int t2) {\n    return decorator(foo1, g, status, t1, t2); //do something on struct B indexed by g\n}\n\nbool activate(gpio g, bool active) {\n    return decorator(foo2, g, active); //do something on struct B indexed by g\n}\n</code></pre>\n\n<p>in such a way that decorator manages shm and checks for target B.active .</p>\n\n<p>Thanks!</p>\n\n<p>EDIT: here is a minimum working example that you can refactor\n<a href=\"https://github.com/oliviera9/c_decorator\" rel=\"nofollow noreferrer\">https://github.com/oliviera9/c_decorator</a></p>\n"}, {"tags": ["c", "variables", "replace", "makefile", "text-files"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1537950832, "post_id": 52513079, "comment_id": 91966375, "body": "Please provide a short example of the <code>Test1.txt</code> file."}, {"owner": {"reputation": 239, "user_id": 9657989, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uv_t7T3oFq0/AAAAAAAAAAI/AAAAAAAAAD4/1kvcFaNDjYw/photo.jpg?sz=128", "display_name": "AnagramDatagram", "link": "https://stackoverflow.com/users/9657989/anagramdatagram"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1537951387, "post_id": 52513079, "comment_id": 91966696, "body": "@Jabberwocky The 2nd piece of code above, the <code>calcmarks</code> makefile, contains the same contents as <code>Test1.txt</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1537955951, "post_id": 52513079, "comment_id": 91969673, "body": "Your code looks more or less correct, except that the breaking down the keys and values is wrong, you need to get rid of the trailing and leading spaces. Now for your actual question. You need to write another function that rpocesses each line of your file and if it finds a string like <code>&quot;$(foo)&quot;</code> and if <code>&quot;foo&quot;</code> is one of keys in <code>variables</code> array it should be substituted by <code>&quot;bar&quot;</code> where <code>&quot;bar&quot;</code> iks the corresponding value."}, {"owner": {"reputation": 419, "user_id": 8691002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96fad3375571232ec235186ccb2ce5e?s=128&d=identicon&r=PG&f=1", "display_name": "Tano Fotang", "link": "https://stackoverflow.com/users/8691002/tano-fotang"}, "edited": false, "score": 0, "creation_date": 1538044504, "post_id": 52513079, "comment_id": 92009097, "body": "The reason why only the first variable is used, is because you are typing (strcmp...) instead of (!strcmp...)."}, {"owner": {"reputation": 239, "user_id": 9657989, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uv_t7T3oFq0/AAAAAAAAAAI/AAAAAAAAAD4/1kvcFaNDjYw/photo.jpg?sz=128", "display_name": "AnagramDatagram", "link": "https://stackoverflow.com/users/9657989/anagramdatagram"}, "reply_to_user": {"reputation": 419, "user_id": 8691002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96fad3375571232ec235186ccb2ce5e?s=128&d=identicon&r=PG&f=1", "display_name": "Tano Fotang", "link": "https://stackoverflow.com/users/8691002/tano-fotang"}, "edited": false, "score": 0, "creation_date": 1538044839, "post_id": 52513079, "comment_id": 92009328, "body": "@fotang Ok I&#39;ve tried it with and without the exclamation mark in the code segment which I appended to the question, without the &#39;!&#39; it does exactly as I wrote above, with the &#39;!&#39; it removes all the variables without substitution, except the 4 generic variables which I appended to the variable array."}, {"owner": {"reputation": 239, "user_id": 9657989, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uv_t7T3oFq0/AAAAAAAAAAI/AAAAAAAAAD4/1kvcFaNDjYw/photo.jpg?sz=128", "display_name": "AnagramDatagram", "link": "https://stackoverflow.com/users/9657989/anagramdatagram"}, "edited": false, "score": 0, "creation_date": 1538045091, "post_id": 52513079, "comment_id": 92009477, "body": "I edited the question to add the result of adding the &#39;!&#39; to the <code>strcmp</code> function."}, {"owner": {"reputation": 419, "user_id": 8691002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96fad3375571232ec235186ccb2ce5e?s=128&d=identicon&r=PG&f=1", "display_name": "Tano Fotang", "link": "https://stackoverflow.com/users/8691002/tano-fotang"}, "edited": false, "score": 0, "creation_date": 1538051081, "post_id": 52513079, "comment_id": 92013238, "body": "A likely explanation: when keys were saved, the keyname included terminating blanks (&#39; &#39;). When searching, however, the search key excludes the blanks. Solution: while saving the keys, trim off the surrounding spaces."}, {"owner": {"reputation": 419, "user_id": 8691002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96fad3375571232ec235186ccb2ce5e?s=128&d=identicon&r=PG&f=1", "display_name": "Tano Fotang", "link": "https://stackoverflow.com/users/8691002/tano-fotang"}, "edited": false, "score": 0, "creation_date": 1538054348, "post_id": 52513079, "comment_id": 92015238, "body": "I&#39;ve updated my response to add sample code for removing blanks."}], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 9657989, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uv_t7T3oFq0/AAAAAAAAAAI/AAAAAAAAAD4/1kvcFaNDjYw/photo.jpg?sz=128", "display_name": "AnagramDatagram", "link": "https://stackoverflow.com/users/9657989/anagramdatagram"}, "edited": false, "score": 0, "creation_date": 1538019224, "post_id": 52516449, "comment_id": 91997364, "body": "Many thanks fotang! I&#39;ve updated the question with your answer, which I tested. There are still a few issues, though."}, {"owner": {"reputation": 419, "user_id": 8691002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96fad3375571232ec235186ccb2ce5e?s=128&d=identicon&r=PG&f=1", "display_name": "Tano Fotang", "link": "https://stackoverflow.com/users/8691002/tano-fotang"}, "reply_to_user": {"reputation": 239, "user_id": 9657989, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uv_t7T3oFq0/AAAAAAAAAAI/AAAAAAAAAD4/1kvcFaNDjYw/photo.jpg?sz=128", "display_name": "AnagramDatagram", "link": "https://stackoverflow.com/users/9657989/anagramdatagram"}, "edited": false, "score": 0, "creation_date": 1538029186, "post_id": 52516449, "comment_id": 92000503, "body": "Compare the keys with (!strcmp()), not (strcmp()). You left out  &#39;!&#39; ."}, {"owner": {"reputation": 239, "user_id": 9657989, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uv_t7T3oFq0/AAAAAAAAAAI/AAAAAAAAAD4/1kvcFaNDjYw/photo.jpg?sz=128", "display_name": "AnagramDatagram", "link": "https://stackoverflow.com/users/9657989/anagramdatagram"}, "edited": false, "score": 0, "creation_date": 1538124162, "post_id": 52516449, "comment_id": 92041931, "body": "Thank you so much @fotang, you&#39;ve been an incredible help. Finally that part of my project is finished :)"}, {"owner": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "edited": false, "score": 0, "creation_date": 1538308452, "post_id": 52516449, "comment_id": 92090471, "body": "@fotang: the code in this answer is a good pointer in the right direction, but since the OP (and probably others) will likely copy/paste it without necessarily understanding it, I would recommend fixing a couple of the more glaring bugs. Specifically, (1) it looks like any bare <code>$</code> character will just get eaten, and (2) it looks like this code is vulnerable to a buffer overflow on the <code>key</code> variable, which is stack-allocated and thus may be exploitable for arbitrary code execution."}, {"owner": {"reputation": 419, "user_id": 8691002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96fad3375571232ec235186ccb2ce5e?s=128&d=identicon&r=PG&f=1", "display_name": "Tano Fotang", "link": "https://stackoverflow.com/users/8691002/tano-fotang"}, "reply_to_user": {"reputation": 54296, "user_id": 128397, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/22b05e50077230ba919b240af4bc13cd?s=128&d=identicon&r=PG", "display_name": "Daniel Pryden", "link": "https://stackoverflow.com/users/128397/daniel-pryden"}, "edited": false, "score": 0, "creation_date": 1538311023, "post_id": 52516449, "comment_id": 92091020, "body": "@DanielPryden That&#39;s very true! I&#39;ll edit the answer."}], "tags": [], "owner": {"reputation": 419, "user_id": 8691002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96fad3375571232ec235186ccb2ce5e?s=128&d=identicon&r=PG&f=1", "display_name": "Tano Fotang", "link": "https://stackoverflow.com/users/8691002/tano-fotang"}, "is_accepted": true, "score": 1, "last_activity_date": 1538313619, "last_edit_date": 1538313619, "creation_date": 1537960500, "answer_id": 52516449, "question_id": 52513079, "link": "https://stackoverflow.com/questions/52513079/go-through-a-text-file-replacing-all-instances-of-a-variable-with-its-definitio/52516449#52516449", "title": "Go through a text file, replacing all instances of a variable with its definition / contents", "body": "<p>The approach has been mentioned in the comments section. Open a new file, scan the \"Makefile\" again, and substitute the variables, writing the substituted output into the new file. Let the output file be called <code>/tmp/output</code>. Here some code (untested):</p>\n\n<p><strong>Update</strong>: @DanielPryden raised 2 concerns in the comments section regarding the dangers of simply copying and pasting this answer. I try to address that inside the loop that starts at \"char *p=buffer; while(*p){\". Of course, anyone doing anything serious would use a lexical analyser such as flex and store the keys in an AVL tree or some such.</p>\n\n<pre><code> FILE *output=fopen(\"/tmp/output\",\"w\");\nrewind(spData);\nwhile (fgets(buffer , sizeof(buffer) , spData) != NULL) {\n    if (buffer[0] == '#'){\n        fputs(buffer,output);\n        continue;\n    }\n    char *p=buffer;\n    while(*p){\n        if(*p!='$'){\n            fputc(output, *p++);\n            continue;\n        }\n        p++;\n        if(*p!='('){\n            fputc(output, *(p-1)); // bring back '$'\n            fputc(output, *p++);\n            continue;\n        }\n        // grab variable name (key)\n        char *s=++p;\n        #define KEYSIZE 1000;\n        char key[KEYSIZE+1]; // you may want to dynamically allocate this (using malloc or strdup after grabbing the key);\n        while(*s &amp;&amp; *s!=')')\n            s++;\n        if(*s==0){ // didnt find closing ')'\n            fputs(\"Unmatched '('\", stderr);\n            exit(-1);\n        }\n        if((s-p)&gt;KEYSIZE){\n            // string inside $() is longer than KEYSIZE. what do you want to do? I'll use just KEYSIZE chars.\n            s=p+KEYSIZE;\n        }\n        strncpy(key,p,s-p);\n        key[s-p]=0;\n        p=s+1;\n        // fetch the value for substitution\n        for(int i=0; i&lt;varCount;i++)\n            if(!strcmp(variables[i].key, key)){\n                fprintf(output,\"%s\", variables[i].data);\n                break;\n            }\n    }\n}\n</code></pre>\n\n<p>Update: strip blanks before saving key:</p>\n\n<pre><code>    char* p = strstr(buffer , \"=\");\n    if (p) {\n        *p++ = 0;\n       // **start of update**: Strip away surrounding blanks --------\n         char *s=buffer;\n         while (*s &amp;&amp; *s== ' ') s++; // remove leading blanks\n         if(*s){\n               // Remove terminating blanks\n               char *t=s;\n                while(*t &amp;&amp; *t!=' ') t++;\n                *t=0;\n          }\n          memcpy(buffer, s, strlen(s));\n       // **end of update** -- finished stripping surrounding blanks\n        // If copy size is too small, change the final number in the function\n        strncpy(variables[j].key, buffer,1000);\n        strncpy(variables[j].data, p,1000);\n</code></pre>\n"}], "owner": {"reputation": 239, "user_id": 9657989, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uv_t7T3oFq0/AAAAAAAAAAI/AAAAAAAAAD4/1kvcFaNDjYw/photo.jpg?sz=128", "display_name": "AnagramDatagram", "link": "https://stackoverflow.com/users/9657989/anagramdatagram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 52516449, "answer_count": 1, "score": 0, "last_activity_date": 1538313619, "creation_date": 1537949846, "last_edit_date": 1538045047, "question_id": 52513079, "link": "https://stackoverflow.com/questions/52513079/go-through-a-text-file-replacing-all-instances-of-a-variable-with-its-definitio", "title": "Go through a text file, replacing all instances of a variable with its definition / contents", "body": "<p>I've hit a mental block on a project I'm doing. I want to go through a file and replace all instances of variables with their contents, or value. I have a data structure which contains the variables, and I have the text file in question assigned to a file pointer.</p>\n\n<p>The data structure holding the variables consists of a key (variable name) and data (variable definition):</p>\n\n<pre><code>// Preceeds the creation of a map to store the variable names and values\nstruct VarMap {\n    char data[1000];\n    char key[1000];\n};\n</code></pre>\n\n<p>This definition is in the header file for my project. The following is an example of the text files with which I am dealing with:</p>\n\n<pre><code># A Makefile to build our 'calcmarks' project\n\nC99     =  cc -std=c99\nCFLAGS  =  -Wall -pedantic -Werror\n\n\ncalcmarks : calcmarks.o globals.o readmarks.o correlation.o\n       $(C99) $(CFLAGS) -o calcmarks \\\n                  calcmarks.o globals.o readmarks.o correlation.o -lm\n\n\ncalcmarks.o : calcmarks.c calcmarks.h\n       $(C99) $(CFLAGS) -c calcmarks.c\n\nglobals.o : globals.c calcmarks.h\n       $(C99) $(CFLAGS) -c globals.c\n\nreadmarks.o : readmarks.c calcmarks.h\n       $(C99) $(CFLAGS) -c readmarks.c\n\ncorrelation.o : correlation.c calcmarks.h\n       $(C99) $(CFLAGS) -c correlation.c\n</code></pre>\n\n<p>As you may already be aware from the code above, I am writing a program which can implement a small subset of the program <em>make</em>. The variables in the above text file are preceded with a dollar '$' sign, and the name of the variable is placed between parentheses '()', as in $(C99) or $(CFLAGS) in the above example; though other variable names may exist.</p>\n\n<p>I've already written part of the program to process these variables, the final part of this function not being finished yet but which I hope to use to perform the actual \"variable substitution\":</p>\n\n<pre><code>#include \"globals.h\"\n\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdarg.h&gt;\n\n// Store and replace all variables used in the makefile\nvoid processVariables(FILE* spData) {\n\n    // Initialise the counting variable buffer to hold the file line by line\n    varCount = 0;\n    char buffer[10000];\n    while (fgets(buffer , sizeof(buffer) , spData) != NULL) {\n        // Skip commented lines (preceede by hash '#')\n        if (buffer[0] == '#') continue;\n        for (int i = 0; buffer[i] != '\\n' ; i++) {\n            if (buffer[i] == '=') {\n                // Increment if line with equals sign is found\n                varCount++;\n                break;\n            }\n        }\n    }\n\n    // Debugging print statement\n    printf (\"varCount has counted %d equals signs.\\n\\n\" , varCount);\n\n    // This will hold the variables\n    struct VarMap variables[varCount + 4];\n    int j = 0;\n    rewind(spData);\n    // Parse the makefile/bakefile (what is it even now) and store the variable names and assignments\n    while (fgets(buffer , sizeof(buffer) , spData) != NULL) {\n        if (buffer[0] == '#') continue;\n        char* p = strstr(buffer,\"=\");\n        if (p) {\n            *p++ = 0;\n            // If copy size is too small, change the final number in the function\n            strncpy(variables[j].key, buffer,1000);\n            strncpy(variables[j].data, p,1000);\n            j++;\n        }\n    }\n\n    // Appending the general variables to the variable array\n    strcpy(variables[varCount].key , \"PID\");\n    strcpy(variables[varCount].data , \"getpid()\");\n    strcpy(variables[varCount + 1].key , \"PPID\");\n    strcpy(variables[varCount + 1].data , \"getppid()\");\n    strcpy(variables[varCount + 2].key , \"PWD\");\n    strcpy(variables[varCount + 2].data , \"getcwd()\");\n    strcpy(variables[varCount + 3].key , \"RAND\");\n    strcpy(variables[varCount + 3].data , \"rand()\");\n\n    // Debugging print statement (All code above this point is correct)\n    printf(\"List of all variables as they stand here:\\n\");\n    for(int i = 0; i &lt; varCount + 4; i++) {\n        printf(\"Key: %s, Value: %s\\n\" , variables[i].key , variables[i].data);\n    }\n\n    // Replacing the variables\n    // Go through the file and re-write it line by line, keep calling rewind(spData);\n    // and parse through the file until there are no more '$' signs\n    rewind(spData);\n    char copyStream[10000];\n    bool noDollarSigns = false;\n    // While there are still dollar signs in the file, indicating more variable substitution needs to occur\n    while (noDollarSigns == false) {\n        while (fgets(copyStream , sizeof(copyStream) , spData) != NULL) {\n\n        }\n    }\n\n\n}\n</code></pre>\n\n<p>As you can see, the final 2 nested 'while's is the space in which I was going to perform the actual variable substitution. The general variables you can see are variables which the program will substitute into every single makefile processed.</p>\n\n<p>And the <em>main</em> function for context:</p>\n\n<pre><code>int main(int argc, const char * argv[]) {\n\n    char filepath[1000];\n    printf(\"Enter the filepath of the Bakefile or bakefile: \");\n    scanf(\"%s\" , filepath);\n    FILE* spData;\n    spData = fopen(filepath , \"r\");\n    if (spData == NULL) {\n        printf (\"Cannot open file.\");\n        exit(EXIT_FAILURE);\n    }\n\n    processVariables(spData);\n\n    fclose(spData);\n    return 0;\n}\n</code></pre>\n\n<p>Calling the main function with the processVariables function as written and all the header files up to date, with the makefile outlined above, gives the following output:</p>\n\n<pre><code>Enter the filepath of the Bakefile or bakefile: /Users/Admin/Documents/Makefiles/Test1.txt\nvarCount has counted 2 equals signs.\n\nList of all variables as they stand here:\nKey: C99     , Value:   cc -std=c99\n\nKey: CFLAGS  , Value:   -Wall -pedantic -Werror\n\nKey: PID, Value: getpid()\nKey: PPID, Value: getppid()\nKey: PWD, Value: getcwd()\nKey: RAND, Value: rand()\n</code></pre>\n\n<p>The first 2 variables are specific to the makefile in question, while the other 4 are generic and to be substituted into all makefiles.</p>\n\n<p>I've already asked many questions here for help on my project and all responses so far have been extremely helpful - thank you very much!</p>\n\n<p>So basically:</p>\n\n<p><strong>How do I write the code to go through a texfile and substitute all instances of variables with their definitions given in my data structure? If such code should not be written in the processVariables function, where should this code go in my program?</strong></p>\n\n<p><strong>EDIT 1:</strong>\n@fotang provided a semi-complete segment of code, which I have inserted and slightly modified to correct here and there. Here is the new <em>processVariables</em> function with his code inserted:</p>\n\n<pre><code>void processVariables(FILE* spData) {\n\n    // Initialise the counting variable buffer to hold the file line by line\n    varCount = 0;\n    char buffer[10000];\n    while (fgets(buffer , sizeof(buffer) , spData) != NULL) {\n        // Skip commented lines (preceede by hash '#')\n        if (buffer[0] == '#') continue;\n        for (int i = 0; buffer[i] != '\\n' ; i++) {\n            if (buffer[i] == '=') {\n                // Increment if line with equals sign is found\n                varCount++;\n                break;\n            }\n        }\n    }\n\n    // Debugging print statement\n    printf (\"varCount has counted %d equals signs.\\n\\n\" , varCount);\n\n    // This will hold the variables\n    struct VarMap variables[varCount + 4];\n    int j = 0;\n    rewind(spData);\n    // Parse the makefile/bakefile (what is it even now bruh) and store the variable names and assignments\n    while (fgets(buffer , sizeof(buffer) , spData) != NULL) {\n        if (buffer[0] == '#') continue;\n        char* p = strstr(buffer , \"=\");\n        if (p) {\n            *p++ = 0;\n            // If copy size is too small, change the final number in the function\n            strncpy(variables[j].key, buffer,1000);\n            strncpy(variables[j].data, p,1000);\n\n            // Get rid of any trailing newline characters in the data\n            char* newline;\n            if ((newline = strchr(variables[j].data, '\\n')) != NULL)\n                *newline = '\\0';\n\n            j++;\n        }\n    }\n\n    // Appending the general variables to the variable array\n    strcpy(variables[varCount].key , \"PID\");\n    strcpy(variables[varCount].data , \"getpid()\");\n    strcpy(variables[varCount + 1].key , \"PPID\");\n    strcpy(variables[varCount + 1].data , \"getppid()\");\n    strcpy(variables[varCount + 2].key , \"PWD\");\n    strcpy(variables[varCount + 2].data , \"getcwd()\");\n    strcpy(variables[varCount + 3].key , \"RAND\");\n    strcpy(variables[varCount + 3].data , \"rand()\");\n\n    // Debugging print statement\n    printf(\"List of all variables as they stand here:\\n\");\n    for(int i = 0; i &lt; varCount + 4; i++) {\n        printf(\"Key: %s, Value: %s\\n\" , variables[i].key , variables[i].data);\n    }\n\n    // Replacing the variables\n    // Go through the file and re-write it line by line\n    // parse through the file until there are no more '$' signs\n    FILE* outputPtr = fopen(\"/Users/Admin/Documents/Makefiles/Output.txt\",\"w\");\n    rewind(spData);\n    while (fgets(buffer , sizeof(buffer) , spData) != NULL) {\n        // Comment lines need no variable substitution so we print them as written\n        if (buffer[0] == '#'){\n            fputs(buffer,outputPtr);\n            continue;\n        }\n        // Copying the buffer character by character until a dollar '$' sign is reached\n        char* p = buffer;\n        while (*p) {\n            if (*p != '$') {\n                fputc(*p++ , outputPtr);\n                continue;\n            }\n            p++;\n\n            if(*p != '('){\n                fputc(*p++ , outputPtr);\n                continue;\n            }\n            // Get the variable name (key)\n            char *s = ++p;\n            char key[1000];\n            while(*s != ')') s++;\n            strncpy(key, p, s - p);\n            key[s - p] = 0;\n            p = s + 1;\n            // Fetch the contents of the variable from the structure and substitute\n            for(int i = 0; i &lt; varCount + 4; i++)\n                if(strcmp(variables[i].key, key)){\n                    fprintf(outputPtr, \"%s\", variables[i].data);\n                    break;\n                }\n        }\n    }\n}\n</code></pre>\n\n<p>However if this function is now called on a textile with the following text: (filename is Text1.txt)</p>\n\n<pre><code># A Makefile to build our 'calcmarks' project\n\n# Variable Declarations\nC99     =  cc -std=c99\nCFLAGS  =  -Wall -pedantic -Werror\n\n\n# Command lines\ncalcmarks : calcmarks.o globals.o readmarks.o correlation.o\n       $(C99) $(CFLAGS) -o calcmarks \\\n                  calcmarks.o globals.o readmarks.o correlation.o -lm\n\n\ncalcmarks.o : calcmarks.c calcmarks.h\n       $(C99) $(CFLAGS) -c calcmarks.c\n\nglobals.o : globals.c calcmarks.h\n       $(C99) $(CFLAGS) -c globals.c\n\nreadmarks.o : readmarks.c calcmarks.h\n       $(C99) $(CFLAGS) -c readmarks.c\n\ncorrelation.o : correlation.c calcmarks.h\n       $(C99) $(CFLAGS) -c correlation.c\n\nvarTest:\n       $(PID) $(PPID) $(PWD) $(RAND)\n</code></pre>\n\n<p>This is the following output file contents:</p>\n\n<pre><code># A Makefile to build our 'calcmarks' project\n\n# Variable Declarations\nC99     =  cc -std=c99\nCFLAGS  =  -Wall -pedantic -Werror\n\n\n# Command lines\ncalcmarks : calcmarks.o globals.o readmarks.o correlation.o\n         cc -std=c99   cc -std=c99 -o calcmarks \\\n                  calcmarks.o globals.o readmarks.o correlation.o -lm\n\n\ncalcmarks.o : calcmarks.c calcmarks.h\n         cc -std=c99   cc -std=c99 -c calcmarks.c\n\nglobals.o : globals.c calcmarks.h\n         cc -std=c99   cc -std=c99 -c globals.c\n\nreadmarks.o : readmarks.c calcmarks.h\n         cc -std=c99   cc -std=c99 -c readmarks.c\n\ncorrelation.o : correlation.c calcmarks.h\n         cc -std=c99   cc -std=c99 -c correlation.c\n\nvarTest:\n         cc -std=c99   cc -std=c99   cc -std=c99   cc -std=c99\n</code></pre>\n\n<p>As you can see, every variable has been replaced with the only the contents of the first variable in the structure <em>variable</em>.</p>\n\n<p><strong>EDIT 2:</strong>\nReplacing <code>strcmp()</code> with <code>!strcmp()</code> in the final <em>if</em> block produces the following output:</p>\n\n<pre><code># A Makefile to build our 'calcmarks' project\n\n# Variable Declarations\nC99     =  cc -std=c99\nCFLAGS  =  -Wall -pedantic -Werror\n\n\n# Command lines\ncalcmarks : calcmarks.o globals.o readmarks.o correlation.o\n                         calcmarks.o globals.o readmarks.o correlation.o -lm\n\n\ncalcmarks.o : calcmarks.c calcmarks.h\n\nglobals.o : globals.c calcmarks.h\n\nreadmarks.o : readmarks.c calcmarks.h\n\ncorrelation.o : correlation.c calcmarks.h\n\nvarTest:\n       getpid() getppid() getcwd() rand()\n</code></pre>\n\n<p>As you can see, this time, all variables are removed without substitution except for the 4 generic appended variables.</p>\n"}, {"tags": ["c", "multithreading", "visual-studio", "race-condition", "consistency"], "comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 3, "creation_date": 1537949527, "post_id": 52512945, "comment_id": 91965633, "body": "Maybe you have a problem with your implementation of the threads. Sounds like there are race conditions. We can not tell you more without an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1537950555, "post_id": 52512945, "comment_id": 91966228, "body": "Are you asking if Visual Studio comes with a debugger? Yes, it does... However, for spotting race condition bugs, manual code review by a programmer is the best tool. Post a minimal example on SO which contains the bug."}], "answers": [{"comments": [{"owner": {"reputation": 12794, "user_id": 865643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mG7s3.jpg?s=128&g=1", "display_name": "noelicus", "link": "https://stackoverflow.com/users/865643/noelicus"}, "edited": false, "score": 0, "creation_date": 1537976650, "post_id": 52521468, "comment_id": 91982764, "body": "Classic! I remember doing that too. Just watched it in the debugger and wondered why the variables were just randomly changing!!"}, {"owner": {"reputation": 53, "user_id": 2118488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad4de6a999b3d693896a4c182e87368?s=128&d=identicon&r=PG", "display_name": "Nir S.", "link": "https://stackoverflow.com/users/2118488/nir-s"}, "reply_to_user": {"reputation": 12794, "user_id": 865643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mG7s3.jpg?s=128&g=1", "display_name": "noelicus", "link": "https://stackoverflow.com/users/865643/noelicus"}, "edited": false, "score": 0, "creation_date": 1538028931, "post_id": 52521468, "comment_id": 92000369, "body": "Just let me correct you: The changes are not entirely random. At least in my case, the data is not uniformly scattered across the entire dynamic range; it stays similar to the correct data, but not quite. Moreover, in case of an array, in many cases the first part of the data is identical, but the second isn&#39;t."}], "tags": [], "owner": {"reputation": 53, "user_id": 2118488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad4de6a999b3d693896a4c182e87368?s=128&d=identicon&r=PG", "display_name": "Nir S.", "link": "https://stackoverflow.com/users/2118488/nir-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1537976083, "creation_date": 1537976083, "answer_id": 52521468, "question_id": 52512945, "link": "https://stackoverflow.com/questions/52512945/inconsistency-between-runs-on-visual-studio-on-a-c-project/52521468#52521468", "title": "Inconsistency between runs on Visual Studio, on a C project", "body": "<p>I've finally found the cause of the problem. It's a static global that has caused the problem. Two threads use this variable, and so a race condition was indeed the problem. Thank you, Kami Kaze!</p>\n"}], "owner": {"reputation": 53, "user_id": 2118488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad4de6a999b3d693896a4c182e87368?s=128&d=identicon&r=PG", "display_name": "Nir S.", "link": "https://stackoverflow.com/users/2118488/nir-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1538028982, "creation_date": 1537949414, "last_edit_date": 1538028982, "question_id": 52512945, "link": "https://stackoverflow.com/questions/52512945/inconsistency-between-runs-on-visual-studio-on-a-c-project", "title": "Inconsistency between runs on Visual Studio, on a C project", "body": "<p>I work on a multi-threaded C project, on Visual-Studio 2010.\nWhen running the project twice, with the same input, the output <strong>in some of the cases</strong> may be different from run to run.\nHow can I debug this phenomenon? Is there any tool in Visual-Studio, or an add-on, to debug it?</p>\n"}, {"tags": ["c", "gcc", "attributes", "memory-alignment"], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 5410078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkN0h.jpg?s=128&g=1", "display_name": "MFrancone", "link": "https://stackoverflow.com/users/5410078/mfrancone"}, "edited": false, "score": 0, "creation_date": 1538041792, "post_id": 52512970, "comment_id": 92007428, "body": "You are right about the array&#39;s index error, I wrote the example in one go. However, I tried to use an index multiple of 4 but the warning still remains. Maybe I should disable such type of warnings once aware of having managed them."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 129, "user_id": 5410078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkN0h.jpg?s=128&g=1", "display_name": "MFrancone", "link": "https://stackoverflow.com/users/5410078/mfrancone"}, "edited": false, "score": 0, "creation_date": 1538044470, "post_id": 52512970, "comment_id": 92009083, "body": "Yes, it depends somewhat on the compiler and compiler version - I tried various versions of gcc and clang and got various different results. Of course you should probably be using a union instead of type punning."}, {"owner": {"reputation": 129, "user_id": 5410078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkN0h.jpg?s=128&g=1", "display_name": "MFrancone", "link": "https://stackoverflow.com/users/5410078/mfrancone"}, "edited": false, "score": 0, "creation_date": 1538051241, "post_id": 52512970, "comment_id": 92013319, "body": "could you please point me out a worthy example of how using union for my purpose?"}, {"owner": {"reputation": 129, "user_id": 5410078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkN0h.jpg?s=128&g=1", "display_name": "MFrancone", "link": "https://stackoverflow.com/users/5410078/mfrancone"}, "edited": false, "score": 0, "creation_date": 1538051869, "post_id": 52512970, "comment_id": 92013686, "body": "Do you mean something <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSXVZZ_13.1.3/com.ibm.xlcpp1313.lelinux.doc/language_ref/cplr188.html\" rel=\"nofollow noreferrer\">like that</a>?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 129, "user_id": 5410078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkN0h.jpg?s=128&g=1", "display_name": "MFrancone", "link": "https://stackoverflow.com/users/5410078/mfrancone"}, "edited": false, "score": 0, "creation_date": 1538054734, "post_id": 52512970, "comment_id": 92015535, "body": "You can either define a union type element, where you have 4 x uint8_t and 1 x uint32_t in the union, or if you only want to use one fixed size of array then it might be more convenient to have a single union containing an array of uint8_t and an array of uint32_t."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1537949479, "creation_date": 1537949479, "answer_id": 52512970, "question_id": 52512862, "link": "https://stackoverflow.com/questions/52512862/gnu-gcc-compiler-aligned-attribute/52512970#52512970", "title": "GNU GCC compiler - aligned attribute", "body": "<p>Think about it: <code>&amp;array[10]</code> won't be 4 byte aligned even with <code>__attribute__ ((aligned(4)))</code>, since you are looking at an offset of 10 bytes into a 4 byte aligned array. So you will only be getting 2 byte alignment in this example, and gcc is correct to emit a warning. Try it with an index of say 12, instead of 10, and the warning <em>might</em> go away.</p>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 2, "last_activity_date": 1556683634, "last_edit_date": 1556683634, "creation_date": 1537956562, "answer_id": 52515230, "question_id": 52512862, "link": "https://stackoverflow.com/questions/52512862/gnu-gcc-compiler-aligned-attribute/52515230#52515230", "title": "GNU GCC compiler - aligned attribute", "body": "<p><code>__attribute__ ((aligned(4)))</code> aligns only the <em>beginning</em> of the array, not every single element of it.</p>\n\n<p>If the beginning is aligned and the offset is <code>10</code> which is nor dividable by 4 the resulting address will not be aligned.</p>\n"}], "owner": {"reputation": 129, "user_id": 5410078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FkN0h.jpg?s=128&g=1", "display_name": "MFrancone", "link": "https://stackoverflow.com/users/5410078/mfrancone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "accepted_answer_id": 52512970, "answer_count": 2, "score": 0, "last_activity_date": 1556683634, "creation_date": 1537949067, "last_edit_date": 1537950097, "question_id": 52512862, "link": "https://stackoverflow.com/questions/52512862/gnu-gcc-compiler-aligned-attribute", "title": "GNU GCC compiler - aligned attribute", "body": "<p>I correctly got the alignment warning</p>\n\n<blockquote>\n  <p>cast increases required alignment of target type [-Wcast-align]</p>\n</blockquote>\n\n<p>from the GCC compiler due to the following code:</p>\n\n<pre><code>uint8_t array[100];\n\nuint32_t foo;\nfoo = * ( (uint32_t *) &amp;array[10]);\n</code></pre>\n\n<p>Then I used the <code>aligned</code> attribute to figure out the issue:</p>\n\n<pre><code>uint8_t array[100] __attribute__ ((aligned(4)));\n\nuint32_t foo;\nfoo = * ( (uint32_t *) &amp;array[10]);\n</code></pre>\n\n<p>Despite this trick I however got the same warning. Is that normal or the warning should disappear?</p>\n"}, {"tags": ["c", "linux", "while-loop", "mouseevent"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1537948736, "post_id": 52512703, "comment_id": 91965149, "body": "Not directly related, but you are abusing <code>goto</code> here. And no, you cannot jump accross functions with <code>goto</code>. Google <i>&quot;c goto&quot;</i>"}, {"owner": {"reputation": 701, "user_id": 2562147, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0cfd76c18223960c425a9dfbaf7e542d?s=128&d=identicon&r=PG&f=1", "display_name": "Moose", "link": "https://stackoverflow.com/users/2562147/moose"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1537949195, "post_id": 52512703, "comment_id": 91965424, "body": "Made the changes. I am having no trouble in reading the mouse event. code pasted above needs a mouse click to start printing the sequence. If I copy paste the mouse handling part of my code after sequence gets printed, it doesnt make a difference."}], "answers": [{"comments": [{"owner": {"reputation": 701, "user_id": 2562147, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0cfd76c18223960c425a9dfbaf7e542d?s=128&d=identicon&r=PG&f=1", "display_name": "Moose", "link": "https://stackoverflow.com/users/2562147/moose"}, "edited": false, "score": 0, "creation_date": 1537951673, "post_id": 52512937, "comment_id": 91966877, "body": "This doesnt help. If I do this, I still see sequence getting printed and not restarting itself by my mouse click."}, {"owner": {"reputation": 701, "user_id": 2562147, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0cfd76c18223960c425a9dfbaf7e542d?s=128&d=identicon&r=PG&f=1", "display_name": "Moose", "link": "https://stackoverflow.com/users/2562147/moose"}, "edited": false, "score": 0, "creation_date": 1537951744, "post_id": 52512937, "comment_id": 91966920, "body": "Also, this needs a mouse click to start the event sequence. 1st instance of sequence shouldn&#39;t wait for mouse click."}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "reply_to_user": {"reputation": 701, "user_id": 2562147, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0cfd76c18223960c425a9dfbaf7e542d?s=128&d=identicon&r=PG&f=1", "display_name": "Moose", "link": "https://stackoverflow.com/users/2562147/moose"}, "edited": false, "score": 0, "creation_date": 1537957547, "post_id": 52512937, "comment_id": 91970615, "body": "@Moose I see that the <code>sleep()</code> during the <code>while</code> loop could be the probleme. I updated my answer to introduce signal."}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 2, "last_activity_date": 1537957489, "last_edit_date": 1537957489, "creation_date": 1537949367, "answer_id": 52512937, "question_id": 52512703, "link": "https://stackoverflow.com/questions/52512703/restarting-an-endless-while-loop-upon-a-mouse-event/52512937#52512937", "title": "Restarting an endless while loop upon a mouse event?", "body": "<p>You could achieve this with some kind of state machine: a function which has an\ninternal static state to know whick was the last <code>hey</code> printed</p>\n\n<pre><code>void print_event(int reset)\n{\n    /* by default, print nothing */\n    static int state = 4;\n\n    /* if reset, restart counting */\n    if (reset) \n        state = 1;\n\n    /* if state under 4, display `hey` */\n    if (state &lt;= 3)\n        printf(\"hey %d\\n\", state++);\n}\n\nint main()\n{\n    int fd, bytes;\n    unsigned char data[3];\n    fd = open(\"/dev/input/mice\", O_RDWR);\n    int left, right;        \n\n    while(1)    \n    {   \n        /* by default, event is not reset */\n        int reset = 0;\n        bytes = read(fd, data, sizeof(data));\n\n        if(bytes &gt; 0)\n        {\n            left = data[0] &amp; 0x1;\n            right = data[0] &amp; 0x2;\n\n            if(left==1){\n                /* left click: reset event*/\n                reset = 1;\n            }           \n        }\n\n        /* ask function to print if needed */\n        print_event(reset);\n\n        sleep(1);               \n    }\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>one problem in your loop is that you will wait a long time before reading new\nvalue from <code>fd</code>.</p>\n\n<p>You can use signal to achieve this:</p>\n\n<ul>\n<li>continously reading input from mice, without sleeping</li>\n<li>when left click is detected, arm an alarm signal to display event:</li>\n</ul>\n\n<p>Thus, your code could be: </p>\n\n<pre><code>/* print event function: can be called from alarm signal handler\n   or directly from main function */\nvoid print_event(int reset)\n{\n    /* by default, print nothing */\n    static int state = 4;\n\n    /* if reset, restart counting */\n    if (reset) \n        state = 1;\n\n    /* if state under 4, display `hey` */\n    if (state &lt;= 3)\n    {\n        printf(\"hey %d\", state++);\n\n        /* if all `hey` have not been printed, prepare the next */\n        alarm(1);\n    }\n}\n\n/* alarm signal receiver*/\nvoid handle(int sig) {\n    /* print event without reset */\n    print_event(0);\n}\n\nint main()\n{\n    int fd, bytes;\n    unsigned char data[3];\n    fd = open(\"/dev/input/mice\", O_RDWR);\n    int left;\n\n    /* tell what function is to be called when alarm signal is raised */\n    signal(SIGALRM, handle);\n\n    /* if you want to display one sequence before the first click, uncomment the following line */\n    /* print_event(1); */\n\n    while(1)    \n    {   \n        bytes = read(fd, data, sizeof(data));\n\n        if(bytes &gt; 0)\n        {\n            left = data[0] &amp; 0x1;                \n\n            if(left==1){\n                /* left click: reset event*/\n                print_event(1);\n            }           \n        }\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 701, "user_id": 2562147, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0cfd76c18223960c425a9dfbaf7e542d?s=128&d=identicon&r=PG&f=1", "display_name": "Moose", "link": "https://stackoverflow.com/users/2562147/moose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 52512937, "answer_count": 1, "score": 0, "last_activity_date": 1537957489, "creation_date": 1537948521, "last_edit_date": 1537949131, "question_id": 52512703, "link": "https://stackoverflow.com/questions/52512703/restarting-an-endless-while-loop-upon-a-mouse-event", "title": "Restarting an endless while loop upon a mouse event?", "body": "<p>I am aiming a simple code which looks like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;poll.h&gt;\n#include &lt;linux/input.h&gt;\n\nint main()\n{\n    int fd, bytes;\n    unsigned char data[3];\n    fd = open(\"/dev/input/mice\", O_RDWR);\n    int left;\n\n    while(1)\n    {    \n        bytes = read(fd, data, sizeof(data));\n\n        if(bytes &gt; 0)\n        {\n            left = data[0] &amp; 0x1;\n            right = data[0] &amp; 0x2;\n\n            if(left==1){\n            goto reset_EVENT;\n            }           \n        }\n\n        reset_EVENT:\n\n        printf(\"hey 1\");\n        sleep(1);   \n        printf(\"hey 2\");\n        sleep(1);\n        printf(\"hey 3\");\n        sleep(1);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>My goal here is to restart the print sequence from \"hey 1\" immediately when left mouse is clicked.\nHowever, I am not able to achieve this without using \"if\" conditions before every sleep. a \"goto\" is not working for me across different functions too.\nCan anyone suggest an optimal solution for this one please ?</p>\n"}, {"tags": ["c", "allocation"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1537949097, "post_id": 52512690, "comment_id": 91965370, "body": "See <a href=\"https://stackoverflow.com/q/1597405/\">stackoverflow.com/q/1597405</a> and <a href=\"https://stackoverflow.com/q/11962457\">stackoverflow.com/q/11962457</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1537950039, "post_id": 52512690, "comment_id": 91965931, "body": "@AnttiHaapala Unspecified behavior is unspecified! <a href=\"https://stackoverflow.com/a/40674888/584518\">stackoverflow.com/a/40674888/584518</a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1537951492, "post_id": 52512690, "comment_id": 91966760, "body": "@Lundin :P true dat."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1537951520, "post_id": 52512690, "comment_id": 91966776, "body": "@Lundin though <code>void main</code> hence all behaviour undefined."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1537951977, "post_id": 52512690, "comment_id": 91967069, "body": "Ah and <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_451.htm\" rel=\"nofollow noreferrer\">DR 451</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1537952142, "post_id": 52512690, "comment_id": 91967179, "body": "@AnttiHaapala No? It is a common implementation-defined form of main, which is fine if the compiler supports it. Although <code>void main(int argc, char *argv[]) </code> looks fishy indeed."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1537952255, "post_id": 52512690, "comment_id": 91967252, "body": "@AnttiHaapala I&#39;ve seen that DR before, it never made it to the standard I believe? Or did it in C17?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1537952813, "post_id": 52512690, "comment_id": 91967583, "body": "@Lundin no, it didn&#39;t go into C17. I don&#39;t know why its status is &quot;closed&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 6845407, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/25922bc496280deb4cbd1eeab9f2eeb6?s=128&d=identicon&r=PG", "display_name": "anonymous", "link": "https://stackoverflow.com/users/6845407/anonymous"}, "edited": false, "score": 0, "creation_date": 1537948878, "post_id": 52512777, "comment_id": 91965244, "body": "But somehow the behaviour seems to be deterministic since the program reproduces the same results"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 329, "user_id": 6845407, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/25922bc496280deb4cbd1eeab9f2eeb6?s=128&d=identicon&r=PG", "display_name": "anonymous", "link": "https://stackoverflow.com/users/6845407/anonymous"}, "edited": false, "score": 0, "creation_date": 1537948903, "post_id": 52512777, "comment_id": 91965259, "body": "@anonymous no need to spam the same comment everywhere."}, {"owner": {"reputation": 329, "user_id": 6845407, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/25922bc496280deb4cbd1eeab9f2eeb6?s=128&d=identicon&r=PG", "display_name": "anonymous", "link": "https://stackoverflow.com/users/6845407/anonymous"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537948955, "post_id": 52512777, "comment_id": 91965295, "body": "@swordfish no need to complain if I deleted the other comments ;)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1537949020, "post_id": 52512777, "comment_id": 91965330, "body": "what do you mean by &quot;value of whatever is in the memory&quot; - who knows if it is in memory..."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 329, "user_id": 6845407, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/25922bc496280deb4cbd1eeab9f2eeb6?s=128&d=identicon&r=PG", "display_name": "anonymous", "link": "https://stackoverflow.com/users/6845407/anonymous"}, "edited": false, "score": 1, "creation_date": 1537949118, "post_id": 52512777, "comment_id": 91965379, "body": "@anonymous Assuming the value *is* in memory the automatic variable will on every call of the function be stored at the same memory address so its value is preserved. But that is pure luck and implementation defined and not covered by the standard. Reading an uninitialized variable is undefined behaviour."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1537949190, "post_id": 52512777, "comment_id": 91965418, "body": "@AnttiHaapala That&#39;s the point. The contents of the memory is whatever is in the memory, but no-one can say for certain what it might be."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537949272, "post_id": 52512777, "comment_id": 91965467, "body": "@Swordfish IIRC just <i>reading</i> the value might not be UB, unless the value happens to be a trap-representation. This is different from C++."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1537949719, "post_id": 52512777, "comment_id": 91965735, "body": "ISO/IEC9899:2017 - N2176, 6.3.2.1/2: &quot;If the lvalue designates an object of automatic storage duration that could have been declared with the register storage class (never had its address taken), and that object is uninitialized (not declared with an initializer and no assignment to it has been performed prior to use), the behavior is undefined.&quot;"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1537949880, "post_id": 52512777, "comment_id": 91965833, "body": "More clearly in J.2 Undefined behavior: &quot;An lvalue designating an object of automatic storage duration that could have been declared with the register storage class is used in a context that requires the value of the designated object, but the object is uninitialized.&quot;"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 3, "creation_date": 1537949930, "post_id": 52512777, "comment_id": 91965873, "body": "@Swordfish Indeed, and this variable&#39;s address is taken. So it is not UB but merely unspecified behavior. Unless there&#39;s trap representations, which isn&#39;t the case in the real world of 2&#39;s complement integer computers."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1537950012, "post_id": 52512777, "comment_id": 91965921, "body": "@Lundin &quot;and this variable&#39;s address is taken&quot; Damned. Didn&#39;t look at the code. Was under the impression just the value was printed. Well ... sometimes you lose, sometimes the other wins."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1537951998, "post_id": 52512777, "comment_id": 91967081, "body": "Ah but the behaviour <i>is</i> undefined... <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_451.htm\" rel=\"nofollow noreferrer\">DR 451</a>"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1537948952, "last_edit_date": 1537948952, "creation_date": 1537948768, "answer_id": 52512777, "question_id": 52512690, "link": "https://stackoverflow.com/questions/52512690/memory-allocation-for-declarations-and-definitions-in-c/52512777#52512777", "title": "memory allocation for declarations and definitions in c", "body": "<p>Uninitialized local non-static variables (also called \"automatic\" variables) are truly uninitialized. They will have an <em>indeterminate</em> (and seemingly random) value. Don't use uninitialized variables.</p>\n\n<p>On the other hand, local <em>static</em> variables <em>will</em> be automatically zero-initialized.</p>\n\n<hr>\n\n<p>What happens with the case of the uninitialized <code>a</code> variable, it simply happens to be the value of whatever is in the memory where the variable is located.</p>\n\n<p>If you call other functions using local (and initialized) variables between, then you could get other (and unpredictable) results.</p>\n"}, {"comments": [{"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1537954408, "post_id": 52513019, "comment_id": 91968577, "body": "\u201cThe code does actually not contain undefined behavior\u201d is an over-simplification. It is explicitly undefined in C89, and C99 is ambiguous (hence the changes between <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.3.2.1p2\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.3.2.1p2</a> and <a href=\"https://port70.net/~nsz/c/c99/n1256.html#6.3.2.1p2\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c99/n1256.html#6.3.2.1p2</a> )."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1537966518, "post_id": 52513019, "comment_id": 91976035, "body": "@PascalCuoq That part has only to do with lvalues and the special case of a variable which does not have it&#39;s address taken. It does not specify what happens otherwise, because that part is covered 6.2.4 &#167;6 &quot;The initial value of the object is indeterminate.&quot;  This is an improvement from C90 6.1.2.4 which was completely ambiguous. The most important part being that nowhere in the C standard will you find normative text claiming that accessing an indeterminate value invokes undefined behavior, apart from the uninteresting special case of trap representations."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1538032746, "post_id": 52513019, "comment_id": 92002284, "body": "In C90, the fact that accessing indeterminate memory was UB was in the very definition of UB, 1.6: \u201cUndefined behavior \u2014 behavior, upon use of a nonportable or erroneous program construct, of erroneous data, or of indeterminately-valued objects [\u2026]\u201d: <a href=\"https://port70.net/~nsz/c/c89/c89-draft.html#1.6\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c89/c89-draft.html#1.6</a>"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 3, "last_activity_date": 1537950390, "last_edit_date": 1537950390, "creation_date": 1537949637, "answer_id": 52513019, "question_id": 52512690, "link": "https://stackoverflow.com/questions/52512690/memory-allocation-for-declarations-and-definitions-in-c/52513019#52513019", "title": "memory allocation for declarations and definitions in c", "body": "<p><code>int a;</code> gives you a variable with indeterminate value. What will happen if you print an indeterminate value is unspecified behavior, as explained <a href=\"https://stackoverflow.com/a/40674888/584518\">here</a>. The value <code>0</code> is by no means guaranteed. You can get any value and the value may differ from time to time, even if the program has not been re-compiled. </p>\n\n<p>Often some compilers, when set for debug build, zero-out all memory even if it is uninitialized. This could explain why the value seems deterministic. When you later switch to release build, you could get garbage instead. This phenomenon is good to know, as it is a common explanation why code breaks in release build: there's some variable you forgot to initialize and switching to release build exposed the bug.</p>\n\n<p>In both cases <code>a</code> is allocated on the local stack.</p>\n\n<p>As for <code>b</code>, there is a rule stating that all static storage duration variables that aren't initialized by the programmer, must be initialized to zero. Therefore in case of <code>static int b;</code> you get the value <code>0</code>, which is actually guaranteed, unlike in the case of <code>int a;</code>.</p>\n\n<p>Furthermore, compilers allocate static storage duration variables in different segments depending on if they are initialized to <code>0</code> or to some other value. Those initialized to zero end up in a segment called <code>.bss</code>, those initialized to a value end up in <code>.data</code>. This is why you get a different address for <code>b</code> in the two different cases: <code>static int b;</code> gets allocated in <code>.bss</code> and <code>static int b=5;</code> gets allocated in <code>.data</code>.</p>\n\n<hr>\n\n<p>Notes to pedantic readers:</p>\n\n<ul>\n<li><p>The code does actually not contain undefined behavior, as explained in the linked post. The address of the local variable is taken. This assuming a mainstream system without any trap representation of two's complement integers.</p></li>\n<li><p>The C standard does not guarantee where variables are allocated. <code>.stack</code>, <code>.bss</code> and <code>.data</code> are industry de facto standard names, but not enforced by the C language standard.</p></li>\n</ul>\n"}], "owner": {"reputation": 329, "user_id": 6845407, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/25922bc496280deb4cbd1eeab9f2eeb6?s=128&d=identicon&r=PG", "display_name": "anonymous", "link": "https://stackoverflow.com/users/6845407/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 52513019, "answer_count": 2, "score": -1, "last_activity_date": 1537950390, "creation_date": 1537948480, "last_edit_date": 1537949121, "question_id": 52512690, "link": "https://stackoverflow.com/questions/52512690/memory-allocation-for-declarations-and-definitions-in-c", "title": "memory allocation for declarations and definitions in c", "body": "<p>I tried the two following pieces of code:</p>\n\n<pre><code>void swap_woPointer()\n{ \n    int a=5;\n    static int b=5;\n    printf(\"value of a : %d , value of b: %d \\n\", a, b);\n    printf(\"address of a: %p , address of b %p \\n\", &amp;a, &amp;b);\n\n    a++;\n    b++;\n}\n\n\n\nvoid main(int argc, char *argv[]) \n{\n    int ii;\n    for (ii=0; ii&lt;10; ii++){\n        swap_woPointer();\n    }\n\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>void swap_woPointer()\n{ \n    int a;\n    static int b;\n    printf(\"value of a : %d , value of b: %d \\n\", a, b);\n    printf(\"address of a: %p , address of b %p \\n\", &amp;a, &amp;b);\n\n    a++;\n    b++;\n}\n\n\n\nvoid main(int argc, char *argv[]) \n{\n    int ii;\n    for (ii=0; ii&lt;10; ii++){\n        swap_woPointer();\n    }\n\n}\n</code></pre>\n\n<p>The only difference between the two pieces of code is that once I only declared the variables a and b</p>\n\n<pre><code>int a;\nstatic int b;\n</code></pre>\n\n<p>and in the other case I defined them</p>\n\n<pre><code>int a=5;\nstatic int b=5;\n</code></pre>\n\n<p>The output that I obtain is different for the two cases. In the case in which I only declared the variables, I obtain </p>\n\n<pre><code>value of a : 0 , value of b: 0 \naddress of a: 0xffffcbbc , address of b 0x100407000 \nvalue of a : 1 , value of b: 1 \naddress of a: 0xffffcbbc , address of b 0x100407000 \nvalue of a : 2 , value of b: 2 \naddress of a: 0xffffcbbc , address of b 0x100407000 \nvalue of a : 3 , value of b: 3 \naddress of a: 0xffffcbbc , address of b 0x100407000 \nvalue of a : 4 , value of b: 4 \naddress of a: 0xffffcbbc , address of b 0x100407000 \nvalue of a : 5 , value of b: 5 \naddress of a: 0xffffcbbc , address of b 0x100407000 \nvalue of a : 6 , value of b: 6 \naddress of a: 0xffffcbbc , address of b 0x100407000 \nvalue of a : 7 , value of b: 7 \naddress of a: 0xffffcbbc , address of b 0x100407000 \nvalue of a : 8 , value of b: 8 \naddress of a: 0xffffcbbc , address of b 0x100407000 \nvalue of a : 9 , value of b: 9 \naddress of a: 0xffffcbbc , address of b 0x100407000\n</code></pre>\n\n<p>whereas if I define the variables rightaway, I obtain</p>\n\n<pre><code>value of a : 5 , value of b: 5 \naddress of a: 0xffffcbbc , address of b 0x100402010 \nvalue of a : 5 , value of b: 6 \naddress of a: 0xffffcbbc , address of b 0x100402010 \nvalue of a : 5 , value of b: 7 \naddress of a: 0xffffcbbc , address of b 0x100402010 \nvalue of a : 5 , value of b: 8 \naddress of a: 0xffffcbbc , address of b 0x100402010 \nvalue of a : 5 , value of b: 9 \naddress of a: 0xffffcbbc , address of b 0x100402010 \nvalue of a : 5 , value of b: 10 \naddress of a: 0xffffcbbc , address of b 0x100402010 \nvalue of a : 5 , value of b: 11 \naddress of a: 0xffffcbbc , address of b 0x100402010 \nvalue of a : 5 , value of b: 12 \naddress of a: 0xffffcbbc , address of b 0x100402010 \nvalue of a : 5 , value of b: 13 \naddress of a: 0xffffcbbc , address of b 0x100402010 \nvalue of a : 5 , value of b: 14 \naddress of a: 0xffffcbbc , address of b 0x100402010\n</code></pre>\n\n<p>I do not understand where the difference comes from. It somehow has to be related to the memory allocation. I thought that in both cases I should obtain the same result, e.g. the variable a, which is declared not to be static, should be allocated once every time the function is called. Apparently this is only the case when the variable is directly defined and not merely declared.</p>\n"}, {"tags": ["c", "mpi"], "answers": [{"tags": [], "owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "is_accepted": false, "score": 1, "last_activity_date": 1537954239, "creation_date": 1537954239, "answer_id": 52514447, "question_id": 52512551, "link": "https://stackoverflow.com/questions/52512551/understanding-broadcast-operation-mpi/52514447#52514447", "title": "Understanding broadcast operation mpi", "body": "<p>This code creates a MPI derived datatype so <code>struct value</code> can be broadcasted in a single MPI call.</p>\n\n<p>This is IMHO a bad example since :</p>\n\n<ul>\n<li>the <code>offsetof()</code> macro should be used to (directly) populate the displacements array (<code>indices</code> is a very poor choice here)</li>\n<li>the predefined <code>MPI_DOUBLE_INT</code> datatype is a perfect fit (do not forget to swap <code>a</code> and <code>b</code> in the <code>struct value</code> definition)</li>\n<li>as a matter of taste, I\u2019d rather recommend you pass the values via the command line rather than reading them from <code>stdin</code> (this is very subjective, and from experience, you will avoid surprises)</li>\n</ul>\n"}], "owner": {"reputation": 3258, "user_id": 7661005, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0c49d2077073823b91fa1ccc82fa0d7a?s=128&d=identicon&r=PG&f=1", "display_name": "Maxxx", "link": "https://stackoverflow.com/users/7661005/maxxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537954239, "creation_date": 1537947981, "question_id": 52512551, "link": "https://stackoverflow.com/questions/52512551/understanding-broadcast-operation-mpi", "title": "Understanding broadcast operation mpi", "body": "<p>I have an MPI program that was given to us that receives an integer and double as input from the user and have the processes announce their value that they receive.</p>\n\n<p>For example:</p>\n\n<pre><code>user input = 7 10.1\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Process 1 got 7 and 10.100000\nProcess 2 got 7 and 10.100000\n.\n.\n</code></pre>\n\n<p>I understand that each process will just have to announce the values that was given by user input through a single broadcast but the code seemed complicated that i couldn't understand the logic of it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"mpi.h\"\n\nint main(int argc, char *argv[])\n{\n   int rank; //rank of the process\n   struct {int a;double b;} value;\n   MPI_Datatype mystruct;\n   int blocklens[2];   //what is this?\n   MPI_Aint indices[2];   //what is this?\n   MPI_Datatype oldtype[2];\n\n   MPI_Init(&amp;argc,&amp;argv); //initialize MPI environment\n   MPI_Comm_rank(MPI_COMM_WORLD,&amp;rank);\n\n   blocklens[0] = 1;\n   blocklens[1] = 1;\n\n   oldtype[0] = MPI_INT;\n   oldtype[1] = MPI_DOUBLE;\n\n   MPI_Get_address(&amp;value.a, &amp;indices[0]);\n   MPI_Get_address(&amp;value.b, &amp;indices[1]);\n\n   indices[1] = indices[1] - indices[0];\n   indices[0] = 0;\n   MPI_Type_create_struct(2,blocklens,indices,oldtype,&amp;mystruct);\n   MPI_Type_commit(&amp;mystruct);\n\n   while (value.a &gt;= 0) {\n       if (rank == 0) {\n           printf(\"Enter an integer and double: \");\n           fflush(stdout);\n           scanf(\"%d %lf\",&amp;value.a,&amp;value.b);\n       }\n       MPI_Bcast(&amp;value,1,mystruct,0,MPI_COMM_WORLD);\n       printf(\"Process %d got %d and %lf\\n\",rank,value.a,value.b);\n   }\n   MPI_Type_free(&amp;mystruct);\n   MPI_Finalize();\n   return 0;\n</code></pre>\n\n<p>}</p>\n\n<p>I would appreciate if someone could give me a run through of how the code works as i find it really hard to understand it.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1537948103, "post_id": 52512484, "comment_id": 91964809, "body": "You are starting the for loop from <code>i=2</code>, to include &#39;G&#39; it should be <code>i=1</code>"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10408434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b1d9c2fef7d79ff9dc69288b8ed73d?s=128&d=identicon&r=PG&f=1", "display_name": "kabanos", "link": "https://stackoverflow.com/users/10408434/kabanos"}, "edited": false, "score": 0, "creation_date": 1537949868, "post_id": 52512588, "comment_id": 91965824, "body": "Thanks a lot ! Also - do you know by any chance how to merge two elements? i need to perform &quot;if statement&quot; and check if the sumcheck = 64."}], "tags": [], "owner": {"reputation": 1281, "user_id": 6647585, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cac5dd1f2f2645dcc1dbf1165fed77c6?s=128&d=identicon&r=PG&f=1", "display_name": "Vlam", "link": "https://stackoverflow.com/users/6647585/vlam"}, "is_accepted": false, "score": 0, "last_activity_date": 1537948170, "creation_date": 1537948170, "answer_id": 52512588, "question_id": 52512484, "link": "https://stackoverflow.com/questions/52512484/executing-and-xor-sumcheck-on-array-of-chars/52512588#52512588", "title": "Executing and &#39;xor&#39; sumcheck on array of chars", "body": "<p>If you want to start after \"$\" then your code should be like below:</p>\n\n<pre><code>for(int i = 1; i&lt;=14; i++)\n    xor ^= Received[i];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 351, "user_id": 10412218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad1ce79320e48f9e0b4b341d38cc551?s=128&d=identicon&r=PG&f=1", "display_name": "Bogdan N.", "link": "https://stackoverflow.com/users/10412218/bogdan-n"}, "is_accepted": true, "score": 2, "last_activity_date": 1537950125, "last_edit_date": 1537950125, "creation_date": 1537948238, "answer_id": 52512610, "question_id": 52512484, "link": "https://stackoverflow.com/questions/52512484/executing-and-xor-sumcheck-on-array-of-chars/52512610#52512610", "title": "Executing and &#39;xor&#39; sumcheck on array of chars", "body": "<p>I can see two problems:</p>\n\n<ol>\n<li>the for loop should start from <strong>1</strong></li>\n<li>the checksum in in hex ( 0x64 is 100 )</li>\n</ol>\n\n<p>See code bellow:</p>\n\n<pre><code>for(int i = 1; i&lt;=14; i++) {\n    xor ^= Received[i];\n}\nprintf(\"%#02x \", xor);\n</code></pre>\n\n<p>EDIT: To verify the checksum you can convert from string to number with <em>strtol</em>:</p>\n\n<pre><code>int number = (int)strtol(Received+16, NULL, 16);\nif (number == xor) { printf(\"ok \"); } else { printf(\"err \"); }\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10408434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9b1d9c2fef7d79ff9dc69288b8ed73d?s=128&d=identicon&r=PG&f=1", "display_name": "kabanos", "link": "https://stackoverflow.com/users/10408434/kabanos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 52512610, "answer_count": 2, "score": 0, "last_activity_date": 1537950125, "creation_date": 1537947747, "question_id": 52512484, "link": "https://stackoverflow.com/questions/52512484/executing-and-xor-sumcheck-on-array-of-chars", "title": "Executing and &#39;xor&#39; sumcheck on array of chars", "body": "<p>I've created the array of chars (first line from GPS module) and i want to perfome NMEA sumcheck which is xor of every single character between \"$\" and \"*\". </p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\nint i;\nint xor = 0;\nint loop;\n\n// $GPGLL,,,,,,V,N*64\n\nchar Received[18]= {'$','G','P','G','L','L',',',',',',',',',',',',','V',',','N','*','6','4'};\n\n// display array if needed\n//for(loop = 0; loop &lt; 18; loop++)\n//   printf(\"%c \", Received[loop]);\n\nfor(int i = 2; i&lt;=14; i++)\n    xor ^= Received[i];\n    printf(\"%d \", xor);\nreturn 0;\n}\n</code></pre>\n\n<p>Here is demo <a href=\"https://ideone.com/3Sc0JT\" rel=\"nofollow noreferrer\">DEMO</a></p>\n\n<p>Do you know by any chance why xor sumcheck is different from \"64\" ? </p>\n"}, {"tags": ["c", "sockets", "tcp", "client-server"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1537947796, "post_id": 52512454, "comment_id": 91964637, "body": "Try using <code>strerror(errno)</code> to get a printable message about the error from <code>write</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1537947914, "post_id": 52512454, "comment_id": 91964704, "body": "Also, please change your habit of using leading newline when calling <code>printf</code>. That will flush the <i>previous</i> line to the console, but leave your current output in the buffer. Use <i>trailing</i> newline instead, where you always <i>end</i> your output with a newline."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1537947932, "post_id": 52512454, "comment_id": 91964722, "body": "The value being written is not being &quot;converted to -1&quot;. That -1 is the result of the <code>write</code> call, which is telling you the write <i>failed</i>."}, {"owner": {"reputation": 177, "user_id": 10394020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf0bc7209395bef9af27084dad42eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Doe", "link": "https://stackoverflow.com/users/10394020/jane-doe"}, "edited": false, "score": 0, "creation_date": 1537948897, "post_id": 52512454, "comment_id": 91965257, "body": "Im getting &#39;Bad File Descriptor&#39; would there be a possible reason for this?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1537953643, "post_id": 52512454, "comment_id": 91968101, "body": "&quot;<i>possible reason</i>&quot; Either the socket got closed or the variable&#39;s value was overwritten, either  explicitly or by messing up the programs memory management."}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 10394020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf0bc7209395bef9af27084dad42eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Doe", "link": "https://stackoverflow.com/users/10394020/jane-doe"}, "edited": false, "score": 0, "creation_date": 1537948388, "post_id": 52512538, "comment_id": 91964956, "body": "Can you see a reason why the write() is -1?  I understand it failed to write but why?"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 177, "user_id": 10394020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf0bc7209395bef9af27084dad42eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Doe", "link": "https://stackoverflow.com/users/10394020/jane-doe"}, "edited": false, "score": 0, "creation_date": 1537948491, "post_id": 52512538, "comment_id": 91965013, "body": "Some Programmer Dude told you what to do in the first comment to your question already."}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 0, "last_activity_date": 1537947942, "creation_date": 1537947942, "answer_id": 52512538, "question_id": 52512454, "link": "https://stackoverflow.com/questions/52512454/writing-an-int-value-to-a-server-is-converting-it-to-1-in-socket-programming-c/52512538#52512538", "title": "Writing an Int value to a server is converting it to -1 in socket programming C", "body": "<blockquote>\n  <p>here from the console output shows that the int being passed into the write_server_int() is being pushed to the server as -1.</p>\n</blockquote>\n\n<p>No, your Output says, that the result of <code>write()</code> is <code>-1</code>:</p>\n\n<blockquote>\n<pre><code>int n = write(sockfd, &amp;msg, sizeof(msg));\nprintf(\"\\n[DEBUG] THIS IS N: %d\", n);\n\n[DEBUG] Coordinates X is: 0\nTHIS IS the Message: 0\nTHIS IS size of the Message: 4\nTHIS IS N: -1 &lt;------------------------ mind the 'N'\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 177, "user_id": 10394020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf0bc7209395bef9af27084dad42eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Doe", "link": "https://stackoverflow.com/users/10394020/jane-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537947942, "creation_date": 1537947658, "question_id": 52512454, "link": "https://stackoverflow.com/questions/52512454/writing-an-int-value-to-a-server-is-converting-it-to-1-in-socket-programming-c", "title": "Writing an Int value to a server is converting it to -1 in socket programming C", "body": "<p>Hi im an trying to write an int from my client side to my server. My write on the client side is set up like this: </p>\n\n<pre><code>/* Writes an int to the server socket. */\nvoid write_server_int(int sockfd, int msg)\n{\n    printf(\"\\n[DEBUG] THIS IS the Message: %d\", msg);\n    printf(\"\\n[DEBUG] THIS IS size of the Message: %lu\", sizeof(msg));\n\n\n    int n = write(sockfd, &amp;msg, sizeof(msg));\n    printf(\"\\n[DEBUG] THIS IS N: %d\", n);\n    if (n &lt; 0)\n        error(\"ERROR writing int to server socket\");\n\n    printf(\"[DEBUG] Wrote int to server: %d\\n\", msg);\n}\n</code></pre>\n\n<p>My receive on my server side is set up like this: </p>\n\n<pre><code>/* Reads an int from a client socket. */\nint recv_int(int cli_sockfd)\n{\n    int msg = 0;\n    int n = read(cli_sockfd, &amp;msg, sizeof(msg));\n\n    if (n &lt; 0 || n != sizeof(int)) /* Not what we were expecting. Client likely disconnected. */\n        return -1;\n\n    printf(\"[DEBUG] Received int: %d\\n\", msg);\n\n    return msg;\n}\n</code></pre>\n\n<p>I am calling my functions from here:</p>\n\n<pre><code>while(1) {\n        option = menu_screen(sockfd); // Get Menu Screen and Clients Choosen Option\n        printf(\"[DEBUG] User selection menu option: %d\\n\", option);\n\n        while (option == 1){ // Gameplay Option\n            draw_board(board);\n            recv_msg(sockfd, msg);\n            if (!strcmp(msg, \"TRN\")) { /* Take a turn. */\n                int choice = take_turn_member(sockfd);\n                write_server_int(sockfd, choice);\n            }\n            if (!strcmp(msg, \"COX\")){\n                int coordinates_x = take_turn_coord_x();\n                printf(\"\\n[DEBUG] Coordinates X is: %d\", coordinates_x);\n                write_server_int(sockfd, coordinates_x);\n                printf(\"\\n\\nMADE IT HERE\");\n            }\n            if (!strcmp(msg, \"COY\")){\n                int coordinates_y = take_turn_coord_y();\n                printf(\"\\n[DEBUG] Coordinates Y is: %d\", coordinates_y);\n                write_server_int(sockfd, coordinates_y);\n                printf(\"\\n\\nMADE IT HERE\");\n            }\n}\n</code></pre>\n\n<p>My code works perfectly up until it reaches the                  <code>write_server_int(sockfd, coordinates_x);</code> here from the console output shows that the int being passed into the <code>write_server_int()</code> is being pushed to the server as -1. </p>\n\n<pre><code>[DEBUG] Received message: COX\nEnter Row Tile Coordinates A-I : A\n\n[DEBUG] Coordinates X is: 0\nTHIS IS the Message: 0\nTHIS IS size of the Message: 4\nTHIS IS N: -1\nEither the server shut down or the other player disconnected.\nGame over.\n</code></pre>\n\n<p>Can someone explain to me what is happening and how to fix it please? </p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1537946995, "post_id": 52512257, "comment_id": 91964211, "body": "If there is no difference, why do we have them both?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1537947028, "post_id": 52512257, "comment_id": 91964224, "body": "@user2162550: Because C is flexible. Two different constructs converge to the same thing in certain instances, such as the above. You could levy similar criticism at the <code>for</code> loop and even the <code>switch</code> block."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1537947501, "post_id": 52512257, "comment_id": 91964478, "body": "@Bathsheba &quot;You could levy similar criticism at the for loop and even the switch block.&quot; Yes!! <code>goto</code> ftw! <code>;-p</code>"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1537951607, "post_id": 52512257, "comment_id": 91966832, "body": "Please note that chux&#39;s answer shows that <i>there is</i> a difference."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1537951730, "post_id": 52512257, "comment_id": 91966913, "body": "@Bob__ Only in the <i>usage</i>. But I&#39;ve made a change here too, Chux&#39;s answer is the best one here so far in my opinion. I&#39;m about to upvote it. Thanks for pinging me."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1537951654, "last_edit_date": 1537951654, "creation_date": 1537946959, "answer_id": 52512257, "question_id": 52512235, "link": "https://stackoverflow.com/questions/52512235/difference-between-two-unsigned-long-representations/52512257#52512257", "title": "Difference between two unsigned long representations", "body": "<p>There is absolutely no difference. Both are compile time evaluable constant expressions of the same value and type, although you might be wise to write the second version as <code>((unsigned long)0x1)</code>.</p>\n\n<p>Personally I'd choose the first one as it's clearer; in my mind at least, a cast is a <em>run-time</em> operator, not a <em>compile-time</em> one.</p>\n"}, {"comments": [{"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1537947050, "post_id": 52512268, "comment_id": 91964236, "body": "So is there a reason to have them both in C language?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1537947069, "post_id": 52512268, "comment_id": 91964243, "body": "@user2162550: Yes, Lundin indicates that; casting is more of a run-time thing; very informally speaking."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1537947674, "post_id": 52512268, "comment_id": 91964579, "body": "@user2162550 I added a bit of an explanation to the answer. Basically you are asking why you must have a screwdriver and hammer in your tool box, when you can hammer down a screw with the hammer. The result isn&#39;t pretty and potentially something can break if you aren&#39;t careful."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 5, "last_activity_date": 1537947513, "last_edit_date": 1537947513, "creation_date": 1537947001, "answer_id": 52512268, "question_id": 52512235, "link": "https://stackoverflow.com/questions/52512235/difference-between-two-unsigned-long-representations/52512268#52512268", "title": "Difference between two unsigned long representations", "body": "<p>There is no practical difference, these are 100% equivalent.</p>\n\n<p>The only formal difference is that <code>UL</code> is part of the integer constant, while the cast could be put in front of any expression, including a run-time evaluated expression.</p>\n\n<p>The main reason for UL is to enforce a type of a integer constant, where it matters. It is often more readable than a cast. Example: <code>1UL &lt;&lt; n</code> versus <code>(unsigned long)1 &lt;&lt; n</code>. </p>\n\n<p>Casts on the other hand, have a wider use, as they cannot only be used to force a type at compile-time, but also to trigger a type conversion in run-time.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 8, "last_activity_date": 1538066598, "last_edit_date": 1538066598, "creation_date": 1537948610, "answer_id": 52512732, "question_id": 52512235, "link": "https://stackoverflow.com/questions/52512235/difference-between-two-unsigned-long-representations/52512732#52512732", "title": "Difference between two unsigned long representations", "body": "<blockquote>\n  <p>What is the difference between using literal suffix on a constant: ... and casting a constant:?</p>\n</blockquote>\n\n<ol>\n<li>It depends on use.</li>\n</ol>\n\n<p>Let us try using the 2 defines as pre-processor steering.  Pre-processor math does not understand various type widths. As part of the token processing:</p>\n\n<blockquote>\n  <p>For the purposes of this token conversion and evaluation, all signed integer types and all unsigned integer types act as if they have the same representation as, respectively, the types <code>intmax_t</code> and <code>uintmax_t</code> ... C11dr \u00a76.10.1 4</p>\n</blockquote>\n\n<pre><code>#define MY_LONG1  0x123456789UL\n#define MY_LONG2  (unsigned long)0x123456789\n\nint main(void) {\n#if MY_LONG1 == 0x123456789u\n  puts(\"MY_LONG1 == 0x123456789u\");\n#endif\n#if MY_LONG2 == 0x123456789u\n  puts(\"MY_LONG2 == 0x123456789u\");\n#endif\n}\n</code></pre>\n\n<p><code>#if MY_LONG2 == 0x123456789u</code> result in a <a href=\"https://stackoverflow.com/q/21338385/2410359\">compiler error</a>.</p>\n\n<pre><code>error: missing binary operator before token \"long\"\n #define MY_LONG2  (unsigned long)0x123456789\n</code></pre>\n\n<p>Note: the <code>L</code> serves no purpose with pre-processing.<br>\nNote: the <code>U</code> does serve a purpose with pre-processing.</p>\n\n<ol start=\"2\">\n<li>Otherwise it depends on the value of the constant.</li>\n</ol>\n\n<p>With a value of 1, no difference.</p>\n\n<p>Yet if the value exceeds <code>ULONG_MAX</code>, (example: 32-bit), the below is <code>unsigned long long</code>.  The <code>U</code> insures some <em>unsigned</em> type, the <code>L</code> insures <em>at least</em> <code>long</code>.  </p>\n\n<pre><code>#define MY_LONG  0x123456789UL\n</code></pre>\n\n<p>A cast can change the value.  In this case below, the value becomes 0x23456789 and type <code>unsigned long</code></p>\n\n<pre><code>#define MY_LONG  (unsigned long)0x123456789\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>When will you choose the former and when will you choose the latter?</p>\n</blockquote>\n\n<p>The <code>L</code> nudges the type to be at least <code>long</code>, the cast enforces the type of <code>long</code>.</p>\n\n<p>Use <code>L</code> when <code>MY_LONG</code> should be at least <code>long</code> or the value is small, within the  of <em>minimal</em> range of <code>long</code> [-2147483647 ... 2147483647]</p>\n\n<p>Do not use the cast if the macro may be used with pre-processing.</p>\n\n<p>Otherwise use the cast <code>(long)</code> to enforce a <code>long</code>.  IMO, this is rarely the goal.  An exception would be if the constant must be <code>unsigned long</code> regardless of it value.</p>\n\n<pre><code>// Works well if unsigned long is 64-bit or less\n#define MY_ULONG_EVERY_OTHER_BIT  ((unsigned long) 0xAAAAAAAAAAAAAAAAu)\n</code></pre>\n\n<hr>\n\n<p>Note: in general, I avoid using <code>L</code> in constants and let the implementation determine the type.</p>\n\n<p>The below will be the narrowest type that fits in <code>unsigned, unsigned long , unsigned long long</code>.  Appending an <code>L</code>  would fit to the narrowest    <code>unsigned long, unsigned long long</code>.</p>\n\n<pre><code>#define MY_BIGU  0x123456789u\n</code></pre>\n\n<hr>\n\n<p>There is a subtle problem with OP's define.</p>\n\n<pre><code>#define MY_LONG  (unsigned long)0x1\n</code></pre>\n\n<p>It should have been the below to insure tight bonding. </p>\n\n<pre><code>#define MY_LONG  ((unsigned long)0x1)\n</code></pre>\n\n<p>Only a few operators have higher precedence that could mess up code. Pathological e.g.: <code>MY_LONG[a]</code> would be <code>(unsigned long)(0x1[a])</code> and not <code>((unsigned long)0x1)[a]</code>, yet still good practice to enclose macros with a <code>()</code> unless there is zero chance of evaluation  problems.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1537985642, "creation_date": 1537985642, "answer_id": 52523862, "question_id": 52512235, "link": "https://stackoverflow.com/questions/52512235/difference-between-two-unsigned-long-representations/52523862#52523862", "title": "Difference between two unsigned long representations", "body": "<p>There is very little difference between the two: they both are constant expressions with a value of <code>1</code> and type <code>unsigned long</code>.</p>\n\n<p>One notable difference is you can use <code>0x1UL</code> as part of a preprocessor test expression, but you cannot use <code>(unsigned long)1</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#if 0x1UL\nint main() {\n    return 0;\n}\n#else\n#error 0x1UL should be true\n#endif\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2392, "user_id": 3517622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2nYKV.gif?s=128&g=1", "display_name": "KevinZ", "link": "https://stackoverflow.com/users/3517622/kevinz"}, "is_accepted": false, "score": 0, "last_activity_date": 1538540730, "creation_date": 1538540730, "answer_id": 52619675, "question_id": 52512235, "link": "https://stackoverflow.com/questions/52512235/difference-between-two-unsigned-long-representations/52619675#52619675", "title": "Difference between two unsigned long representations", "body": "<p>Technically, there is a way to tell between them, but you really have to try pretty hard:</p>\n\n<pre><code>char a [10];\nprintf( \"size is %zu\\n\", sizeof(MY_LONG [a]) );\n</code></pre>\n\n<p>In the above example, the literal (<code>0x1UL</code>) version will have the array take the <code>unsigned long</code> literal as an index, yielding <code>1</code> because it is <code>sizeof(char)</code>. The cast version will have the array taking a <code>int</code> literal as an index, then casting the resulting char to <code>unsigned long</code> before passing it to <code>sizeof()</code>. <code>sizeof(unsigned long)</code> is typically <code>8</code>.</p>\n\n<p>This is because the indexing operator <code>[]</code> outranks the casting operator <code>()</code>.</p>\n"}], "owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 52512268, "answer_count": 5, "score": 3, "last_activity_date": 1538540730, "creation_date": 1537946873, "last_edit_date": 1537946949, "question_id": 52512235, "link": "https://stackoverflow.com/questions/52512235/difference-between-two-unsigned-long-representations", "title": "Difference between two unsigned long representations", "body": "<p>What is the difference between using literal suffix on a constant:</p>\n\n<p><code>#define MY_LONG  0x1UL</code></p>\n\n<p>and casting a constant:</p>\n\n<p><code>#define MY_LONG  (unsigned long)0x1</code></p>\n\n<p>When will you choose the former and when will you choose the latter?</p>\n"}, {"tags": ["c", "windows", "visual-studio", "visual-studio-2012"], "comments": [{"owner": {"reputation": 34, "user_id": 10384494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf64c1f3fe9e361fa3422276e42d0d7?s=128&d=identicon&r=PG&f=1", "display_name": "postit", "link": "https://stackoverflow.com/users/10384494/postit"}, "edited": false, "score": 0, "creation_date": 1537946098, "post_id": 52511951, "comment_id": 91963705, "body": "Check <a href=\"https://stackoverflow.com/questions/142508/how-do-i-check-os-with-a-preprocessor-directive\" title=\"how do i check os with a preprocessor directive\">stackoverflow.com/questions/142508/&hellip;</a>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 34, "user_id": 10384494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccf64c1f3fe9e361fa3422276e42d0d7?s=128&d=identicon&r=PG&f=1", "display_name": "postit", "link": "https://stackoverflow.com/users/10384494/postit"}, "edited": false, "score": 1, "creation_date": 1537946171, "post_id": 52511951, "comment_id": 91963743, "body": "@postit: On Windows, the OS version on which you compile is independent from the OS version on which you run."}, {"owner": {"reputation": 3396, "user_id": 496934, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d82c6883e1f68776cbc4356e2ad7a740?s=128&d=identicon&r=PG", "display_name": "user496934", "link": "https://stackoverflow.com/users/496934/user496934"}, "edited": false, "score": 0, "creation_date": 1537946241, "post_id": 52511951, "comment_id": 91963777, "body": "Is there a way I can use methods defined in VersionHelpers.h from C code ?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1537946285, "post_id": 52511951, "comment_id": 91963800, "body": "I&#39;ve no idea, but your reasoning is wrong. You get that error because your compiler cannot find the header file, not because you have a C program."}, {"owner": {"reputation": 52302, "user_id": 11182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yfpsb.jpg?s=128&g=1", "display_name": "Lex Li", "link": "https://stackoverflow.com/users/11182/lex-li"}, "edited": false, "score": 0, "creation_date": 1538002454, "post_id": 52511951, "comment_id": 91993787, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1963992/check-windows-version\">Check Windows version</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537946523, "post_id": 52512070, "comment_id": 91963926, "body": "Um. Did you recently have a look at a calendar? Why don&#39;t you use VS 2017 and be done with it?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1537950347, "post_id": 52512070, "comment_id": 91966104, "body": "@Swordfish: Considering there&#39;s no such thing as VS2014 (The 2014 date is for Win8.1), I am wondering what he did."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1537946286, "creation_date": 1537946286, "answer_id": 52512070, "question_id": 52511951, "link": "https://stackoverflow.com/questions/52511951/trying-to-get-windows-version-from-c-code/52512070#52512070", "title": "Trying to get windows version from C code", "body": "<p>VersionHelpers.h is from the Window 8.1 SDK (2014). It didn't ship with VS2012. You have to install it manually, or update to a current Visual Studio version.</p>\n"}, {"tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": false, "score": 2, "last_activity_date": 1537947859, "last_edit_date": 1537947859, "creation_date": 1537947205, "answer_id": 52512332, "question_id": 52511951, "link": "https://stackoverflow.com/questions/52511951/trying-to-get-windows-version-from-c-code/52512332#52512332", "title": "Trying to get windows version from C code", "body": "<p><code>VersionHelpers.h</code> is a just an inline header file that does common checks using <code>VerifyVersionInfo</code>. You could just use that API directly which is C-callable.</p>\n\n<p>You also need to be aware of the fact that the <code>GetVersion</code> and <code>VerifyVersionInfo</code> functions are subject to built-in appcompat version lies. See <a href=\"https://blogs.msdn.microsoft.com/chuckw/2013/09/10/manifest-madness/\" rel=\"nofollow noreferrer\">Manifest Madness</a> for details.</p>\n\n<p>Of course the real question is what are you actually going to do with that information?</p>\n\n<p>Is this a \"you must be this high to ride this ride\" test? If so, <code>VerifyVersionInfo</code> is the way to do it and what the code in <code>VersionHelpers.h</code> does.</p>\n\n<p>Is this a \"I need a version for a telemetry or log file\" test? In that case you probably want to use <code>GetVersionEx</code> and suppress the deprecation warning. Be sure you don't make any runtime decisions based on the value. For UWP apps, you'd use <a href=\"https://docs.microsoft.com/en-us/uwp/api/Windows.System.Profile.AnalyticsInfo\" rel=\"nofollow noreferrer\">AnalyticsInfo</a>.</p>\n\n<p>Is this a \"I'm checking to see if it's safe to use a particular OS component?\" If so, there's likely a better way to do it than an OS check.</p>\n\n<p>See <a href=\"https://blogs.msdn.microsoft.com/chuckw/2010/02/24/whats-in-a-version-number/\" rel=\"nofollow noreferrer\">What\u2019s in a version number?</a></p>\n\n<blockquote>\n  <p>The <code>VersionHelpers.h</code> header was added in the Windows 8.1 SDK which comes with VS 2013 or later. It's also in every version of the Windows 10 SDK. It is compatible with <code>.c</code> as well as <code>.cpp</code> files.</p>\n</blockquote>\n"}], "owner": {"reputation": 3396, "user_id": 496934, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d82c6883e1f68776cbc4356e2ad7a740?s=128&d=identicon&r=PG", "display_name": "user496934", "link": "https://stackoverflow.com/users/496934/user496934"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1537947859, "creation_date": 1537945882, "last_edit_date": 1537946446, "question_id": 52511951, "link": "https://stackoverflow.com/questions/52511951/trying-to-get-windows-version-from-c-code", "title": "Trying to get windows version from C code", "body": "<p>I am working on a C application (not c++). Basically the code is in *.c file. I want to add another function to this file to check the windows OS version on which my application is running. I am trying to use the versionhelper functions described below --<a href=\"https://docs.microsoft.com/en-us/windows/desktop/sysinfo/version-helper-apis\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/sysinfo/version-helper-apis</a>. However, when I try to add below header file I get compilation error saying -cannot open source file \"VersionHelpers.h\" --</p>\n\n<pre><code> #include &lt;VersionHelpers.h&gt;\n</code></pre>\n\n<p>I think this is because my file is a C file. Is there any way to read windows OS version from C code? (Not C++)</p>\n"}, {"tags": ["c", "function", "scope", "unions"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 6, "creation_date": 1537947425, "post_id": 52511896, "comment_id": 91964435, "body": "<code>f</code> can assume that <code>p1 != p2</code> because they point to different types. and with optimization - read <code>p1-&gt;m</code> value in register and return this register. it assume that <code>p2-&gt;m = -p2-&gt;m</code> <b>not modify</b> <code>p1-&gt;m</code> what is wrong. union here only way make p1==p2"}, {"owner": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "edited": false, "score": 4, "creation_date": 1537955308, "post_id": 52511896, "comment_id": 91969225, "body": "I took the liberty of transcribing the image to text, I hope I didn&#39;t make any typos. The original is visible in the edit history: <a href=\"https://stackoverflow.com/revisions/52511896/1\">stackoverflow.com/revisions/52511896/1</a>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 4, "creation_date": 1538005466, "post_id": 52511896, "comment_id": 91994489, "body": "note that there are many invalid programs that compile cleanly. IN fact the reason there is so much text in C standards about what is valid , invalid, UB, .... is because you cannot rely on the compiler to simply detect and reject them"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1538512964, "post_id": 52511896, "comment_id": 92166500, "body": "simple fix...  define the union before the first function"}], "answers": [{"comments": [{"owner": {"reputation": 780, "user_id": 2285234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a369d099bee36d46e32b964a68394138?s=128&d=identicon&r=PG", "display_name": "Zastai", "link": "https://stackoverflow.com/users/2285234/zastai"}, "edited": false, "score": 1, "creation_date": 1537947365, "post_id": 52511979, "comment_id": 91964397, "body": "So would changing <code>f</code> to take <code>int*</code> and passing in <code>&amp;u.s1.m</code> and <code>u.s2.m</code> make it valid? Because then it\u2019s <code>g</code> doing the struct accessing."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 780, "user_id": 2285234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a369d099bee36d46e32b964a68394138?s=128&d=identicon&r=PG", "display_name": "Zastai", "link": "https://stackoverflow.com/users/2285234/zastai"}, "edited": false, "score": 5, "creation_date": 1537947462, "post_id": 52511979, "comment_id": 91964454, "body": "@Zastai - You know, I&#39;m not sure. I think that&#39;s a good question that deserves to stand on its own. Post it with the the <a href=\"https://stackoverflow.com/questions/tagged/language-lawyer\">language-lawyer</a> tag. It should be interesting."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 780, "user_id": 2285234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a369d099bee36d46e32b964a68394138?s=128&d=identicon&r=PG", "display_name": "Zastai", "link": "https://stackoverflow.com/users/2285234/zastai"}, "edited": false, "score": 0, "creation_date": 1537947646, "post_id": 52511979, "comment_id": 91964558, "body": "@Zastai - Wait, actually you are right. Since those pointers are of the same type, they may alias the same object. It&#39;s the whole strict aliasing spiel."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1537960245, "post_id": 52511979, "comment_id": 91972199, "body": "I think I am missing something here. Though unnamed union is local to <code>g</code> but address of it&#39;s elements are passed to <code>f</code>. So union will exist until <code>g</code> returns and therefore shouldn&#39;t it&#39;s members  be visible to <code>f</code> as it&#39;s address is passed to <code>f</code> ?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1537960334, "post_id": 52511979, "comment_id": 91972240, "body": "@haccks - The text in bold doesn&#39;t require the union to merely exist. It requires the definition of the union type to be visible in <code>f</code>. This example is crafted such that there is no dispute <code>f</code> cannot possibly be seeing this union type declaration itself."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1537961087, "post_id": 52511979, "comment_id": 91972661, "body": "So the statement: <i>it inspects <code>p1-&gt;m</code> without the common initial sequence guarantee being in effect.</i> is holds true because union is not visible to <code>f</code>?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 2, "creation_date": 1537961568, "post_id": 52511979, "comment_id": 91972922, "body": "@haccks - Yes. That&#39;s why GCC and Clang go to town on this function under strict aliasing. They have no reason to assume the two unrelated type may alias. Because normally they can&#39;t. Technically this is all handled under the &quot;effective type&quot; set of clauses. But <a href=\"https://godbolt.org/z/m11ZvZ\" rel=\"nofollow noreferrer\">here&#39;s another example</a>. Here the compiler knows aliasing is possible, so it&#39;s not being too aggressive."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "reply_to_user": {"reputation": 780, "user_id": 2285234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a369d099bee36d46e32b964a68394138?s=128&d=identicon&r=PG", "display_name": "Zastai", "link": "https://stackoverflow.com/users/2285234/zastai"}, "edited": false, "score": 0, "creation_date": 1537962745, "post_id": 52511979, "comment_id": 91973642, "body": "@Zastai : in your alternative, <code>g</code> does <i>not</i> do the struct accessing - all it does is calculate addresses. So, there&#39;s no real difference with the original."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1537963959, "post_id": 52511979, "comment_id": 91974395, "body": "@StoryTeller; That make sense. Where is the standard mention for this to be undefined behavior?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1537964205, "post_id": 52511979, "comment_id": 91974559, "body": "@haccks - <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.5p7\" rel=\"nofollow noreferrer\">&#167;6.5 &#182;7</a>. Those are all the valid ways to alias the same object. So in the original example <code>p1</code> and <code>p2</code> may be assumed to not alias the same object (even though they do in a valid way through the union). The code example I gave you in the previous comment must be conservative since the union contains the struct as a member, so things may be aliasing. I think the common sub-sequence guarantee is phrased like that to play along with the effective type requirements."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 1, "creation_date": 1537964677, "post_id": 52511979, "comment_id": 91974845, "body": "@StoryTeller; Thanks a lot for explaining it and being patient :)"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1537996938, "post_id": 52511979, "comment_id": 91992194, "body": "@haccks - <i>is holds true because union is not visible to</i> - are visible union to f or not not play role at all. if we make union declaration visible to <code>f</code> <a href=\"https://godbolt.org/z/mW0IDM\" rel=\"nofollow noreferrer\">nothing change</a>. i think <i>it is permitted .. is visible</i> have nonsense (bad documentation), in analog c++ no such words. and need understand sense of this &quot;special guarantee&quot;. i think we always can &quot;inspect&quot; any union member. but different types have different representation in memory. and this is general undefined how same memory will be interpreted via another type. only because this inspect &quot;not active&quot;.."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1537996944, "post_id": 52511979, "comment_id": 91992196, "body": "..(not last written) member is undefined. but if it have the same type as active (last written) member - we can use it. because the same memory representation. or until &quot;common initial sequence&quot; also if we have not 2 <i>standard-layout structs</i> but say <code>union U { struct t { int m;} s; int m; } u;</code> <code>u.s.m</code> and <code>u.m</code> have common initial sequence, despite formal <code>u.m</code> not a struct at all. this only say about not good enough docs"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1538016831, "post_id": 52511979, "comment_id": 91996807, "body": "@RbMm: The Common Initial Sequence guarantees were documented in 1974, well before the Standard was written.  I think the authors of the Standard expected compiler writers to understand and respect the purposes and uses of such guarantees without the Standard having to go into details about it."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 33, "last_activity_date": 1537947001, "last_edit_date": 1537947001, "creation_date": 1537945967, "answer_id": 52511979, "question_id": 52511896, "link": "https://stackoverflow.com/questions/52511896/why-is-it-invalid-for-a-union-type-declared-in-one-function-to-be-used-in-anothe/52511979#52511979", "title": "Why is it invalid for a union type declared in one function to be used in another function?", "body": "<p>The example attempts to illustrate the paragraph beforehand<sup>1</sup> (emphasis mine):</p>\n\n<blockquote>\n  <p><strong>6.5.2.3 \u00b66</strong></p>\n  \n  <p>One special guarantee is made in order to simplify the use of unions:\n  if a union contains several structures that share a common initial\n  sequence (see below), and if the union object currently contains one\n  of these structures, <strong>it is permitted to inspect the common initial\n  part of any of them anywhere that a declaration of the completed type\n  of the union is visible</strong>. Two structures share a common initial\n  sequence if corresponding members have compatible types (and, for\n  bit-fields, the same widths) for a sequence of one or more initial\n  members.</p>\n</blockquote>\n\n<p>Since <code>f</code> is declared before <code>g</code>, and furthermore the unnamed union type is local to <code>g</code>, there is no questioning the union type isn't visible in <code>f</code>.</p>\n\n<p>The example doesn't show how <code>u</code> is initialized, but assuming the last written to member is <code>u.s2.m</code>, the function has undefined behavior because it inspects <code>p1-&gt;m</code> without the common initial sequence guarantee being in effect.</p>\n\n<p>Same goes the other way, if it's <code>u.s1.m</code> that was last written to before the function call, than accessing <code>p2-&gt;m</code> is undefined behavior.</p>\n\n<p>Note that <code>f</code> itself is not invalid. It's a perfectly reasonable function definition. The undefined behavior stems from passing into it <code>&amp;u.s1</code> and <code>&amp;u.s2</code> as arguments. That is what's causing undefined behavior.</p>\n\n<hr>\n\n<p><sub>\n<sup>1</sup> - I'm quoting <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.5.2.3p6\" rel=\"noreferrer\">n1570</a>, the C11 standard draft. But the specification should be the same, subject only to moving a paragraph or two up/down.\n</sub></p>\n"}, {"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1537951658, "post_id": 52512713, "comment_id": 91966867, "body": "@StoryTeller - yes, the <a href=\"https://godbolt.org/z/APKM2g\" rel=\"nofollow noreferrer\">same</a> (-1) with clang. but with msvc and icc always +1 returned (no strict aliacing here)"}, {"owner": {"reputation": 1597, "user_id": 5162810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pDGmO.jpg?s=128&g=1", "display_name": "Graham", "link": "https://stackoverflow.com/users/5162810/graham"}, "edited": false, "score": 1, "creation_date": 1537963201, "post_id": 52512713, "comment_id": 91973915, "body": "Just as an addendum to this, it&#39;s worth mentioning that declaring the arguments to f() as <i>volatile</i> will prevent this optimisation.  Technically this is still undefined behaviour according to the standard, but most compilers should come up with a sane answer.  Why anyone would want to write such bizarre code is beyond me, though. :-/"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1538005461, "post_id": 52512713, "comment_id": 91994487, "body": "The purpose of the Standard is to ensure that even compilers that are too primitive to recognize at the call site that a call to <code>someFunction(&amp;myUnion-&gt;member1)</code> might interact with other members in the union which are used by the caller, could recognize in the called function that such interactions may occur.  In practice, gcc and clang don&#39;t reliably recognize such interactions in any case, even when complete union declarations are visible, and when the compiler is able to see that the structures sharing the Common Initial Sequence are in fact members of <i>the same array of union objects</i>."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1538006826, "post_id": 52512713, "comment_id": 91994744, "body": "@supercat - from my view unions here unrelated at all. this play role compiler optimization (in f) based on assumption that pointers to 2 different type can not overlap. so modification memory by <code>p2</code> pointer can not affect memory of <code>p1</code>. union here used only for format 2 pointers with different type but point to same memory. so while we can access and inactive member of union if it &quot;similar&quot; to active, use pointers to 2 union member at once, even if it have &quot;common initial sequence&quot; (even full equal) lead to this ub"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1538008730, "post_id": 52512713, "comment_id": 91995213, "body": "@supercat i think faster compilers must assume that 2 pointers to 2 types that have &quot;common initial sequence&quot; <b>can</b> point to the same memory. the <code>t1</code> and <code>t2</code> is such types. so will be logical (from my opinion) that compilers assume that such pointers can alias. but now gcc/clang not do this. also i be serious redesign(extend) term what is &quot;Common Initial Sequence&quot;"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1538016378, "post_id": 52512713, "comment_id": 91996706, "body": "@RbMm: I wouldn&#39;t particularly fault an assumption that a pointer to a structure won&#39;t alias an <i>existing</i> pointer to another structure.  I don&#39;t think a quality compiler, given something like <code>proc1(&amp;unionArr[i]-&gt;member1); proc2(&amp;unionArr[j]-&gt;member2); proc3(&amp;unionArr[i]-&gt;member1);</code>, should have any trouble recognizing each function argument as freshly derived from <code>unionArr</code>.  While 6.5p7 doesn&#39;t allow struct or union objects to be accessed using non-character member types under any circumstances (as written, it doesn&#39;t even allow <code>unionLvalue.member</code>!), the address-of operator is pretty..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1538016425, "post_id": 52512713, "comment_id": 91996714, "body": "...meaningless under gcc and clang.  If the Standard isn&#39;t going to require that compilers implement it meaningfully, they should allow compilers to treat the value produced as a type incompatible with anything but <code>void*</code>."}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": false, "score": 26, "last_activity_date": 1537951530, "last_edit_date": 1537951530, "creation_date": 1537948559, "answer_id": 52512713, "question_id": 52511896, "link": "https://stackoverflow.com/questions/52511896/why-is-it-invalid-for-a-union-type-declared-in-one-function-to-be-used-in-anothe/52512713#52512713", "title": "Why is it invalid for a union type declared in one function to be used in another function?", "body": "<p>Here is the strict aliasing rule in action: one assumption made by the C (or C++) compiler, is that dereferencing pointers to objects of different types will never refer to the same memory location (i.e. alias each other.)</p>\n\n<p>This function </p>\n\n<pre><code>int f(struct t1* p1, struct t2* p2);\n</code></pre>\n\n<p>assumes that <code>p1 != p2</code> because they formally point to different types. As a result the optimizatier may assume that <code>p2-&gt;m = -p2-&gt;m;</code> have no effect on <code>p1-&gt;m</code>; it can first read the value of <code>p1-&gt;m</code> to a register, compare it with 0, if it compare less than 0, then do <code>p2-&gt;m = -p2-&gt;m;</code> and finally return the register value unchanged! </p>\n\n<p>The union here is the only way to make <code>p1 == p2</code> on binary level because all union member have the same address.</p>\n\n<p>Another example:</p>\n\n<pre><code>struct t1 { int m; };\nstruct t2 { int m; };\n\nint f(struct t1* p1, struct t2* p2)\n{\n    if (p1-&gt;m &lt; 0) p2-&gt;m = -p2-&gt;m;\n    return p1-&gt;m;\n}\n\nint g()\n{\n    union {\n        struct t1 s1;\n        struct t2 s2;\n    } u;\n    u.s1.m = -1;\n    return f(&amp;u.s1, &amp;u.s2);\n}\n</code></pre>\n\n<p>What must <code>g</code> return? <code>+1</code> according to common sense (we change -1 to +1 in <code>f</code>). But if we look at gcc's generate assembly with <code>-O1</code> optimization</p>\n\n<pre><code>f:\n        cmp     DWORD PTR [rdi], 0\n        js      .L3\n.L2:\n        mov     eax, DWORD PTR [rdi]\n        ret\n.L3:\n        neg     DWORD PTR [rsi]\n        jmp     .L2\ng:\n        mov     eax, 1\n        ret\n</code></pre>\n\n<p>So far all is as excepted. But when we try it with <code>-O2</code></p>\n\n<pre><code>f:\n        mov     eax, DWORD PTR [rdi]\n        test    eax, eax\n        js      .L4\n        ret\n.L4:\n        neg     DWORD PTR [rsi]\n        ret\ng:\n        mov     eax, -1\n        ret\n</code></pre>\n\n<p>The return value is now a hardcoded <code>-1</code></p>\n\n<p>This is because <code>f</code> at the beginning caches the value of <code>p1-&gt;m</code> in the <code>eax</code> register (<code>mov     eax, DWORD PTR [rdi]</code>) and <strong>does not reread it</strong> after <code>p2-&gt;m = -p2-&gt;m;</code> (<code>neg     DWORD PTR [rsi]</code>) - it returns <code>eax</code> unchanged.</p>\n\n<hr>\n\n<p>union here used only for \n<em>all non-static data members of a union object have the same address.</em> as result <code>&amp;u.s1 == &amp;u.s2</code>. </p>\n\n<p>is somebody not understand assembler code, can show in <em>c/c++</em> how strict aliasing affect f code:</p>\n\n<pre><code>int f(struct t1* p1, struct t2* p2)\n{\n    int a = p1-&gt;m;\n    if (a &lt; 0) p2-&gt;m = -p2-&gt;m;\n    return a; \n}\n</code></pre>\n\n<p>compiler cache <code>p1-&gt;m</code> value in local var <code>a</code> (actually in register of course) and return it , despite <code>p2-&gt;m = -p2-&gt;m;</code> change <code>p1-&gt;m</code>. but compiler assume that <code>p1</code> memory not affected, because it assume that <code>p2</code> point to another memory which not overlap with <code>p1</code></p>\n\n<p>so with different compilers and different optimization level the same source code can return different values (-1 or +1). so and undefined behavior as is</p>\n"}, {"comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1538010086, "post_id": 52527424, "comment_id": 91995522, "body": "you try say that if we have <code>S1* p1;</code> and <code>S2* p2;</code> , <code>S1</code> and <code>S2</code> have common initial sequence and exist visible declaration <code>union U { S1 s1; S2 s2; };</code> compiler can not assume that <code>p1 != p2</code>, but if remove <code>U</code> declaration - compiler already can assume that <code>p1 != p2</code> because it different types (despite CIS) and do optimization based on this ? from my opinion this not very good/logical"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1538011571, "post_id": 52527424, "comment_id": 91995810, "body": "from one side of standard <i>If a program attempts to access the stored value of an object through a glvalue of other than one of the following types the behavior is undefined..</i> and case when we access object via type which have <i>CIS</i> type (even with full CS type) here formal not listed ? so UB ? but from another side in union paragraph <i>CIS</i> rule. but when we access &quot;not active&quot; union member - we access the stored value of an object with dynamic type of &quot;active&quot; member - and from my look here contradiction in rules"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1538017135, "post_id": 52527424, "comment_id": 91996875, "body": "@RbMm: The only way I can see for 6.5p7 to make any sense is to recognize that it is only meant to apply in cases which involve aliasing <i>as written</i>, and that accessing an object with a pointer that is freshly derived from it isn&#39;t &quot;aliasing&quot;.  In the &quot;bad&quot; CIS example in the Standard, if both pointers identify members of the same union object, whichever one had been derived first would have ceased to be &quot;fresh&quot; when the other was derived from that union.  Clang and gcc, however, will rewrite examples that don&#39;t use aliasing so as to add aliasing which they then can&#39;t handle."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1538017826, "post_id": 52527424, "comment_id": 91997026, "body": "@RbMm: If accesses via freshly-derived pointers are recognized as accesses to the objects from which they are derived, then few programs would need permission to access structures and unions with unrelated lvalues of member types (or character types, for that matter!), and thus the lack of blanket permission would make sense.  Unfortunately, since the authors of the Standard didn&#39;t say that quality compilers should recognize pointer derivation (probably thinking the footnote about aliasing would suffice), clang and gcc don&#39;t bother."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1538039258, "post_id": 52527424, "comment_id": 92005824, "body": "from another side - are <a href=\"https://godbolt.org/z/FzWXPn\" rel=\"nofollow noreferrer\">this code</a> formal correct ? here 3 different members of union have not <i>CIS</i> but by sense - all 3 is pointers, have equal memory layout, so we can read any of this after assign/change one"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1538056921, "post_id": 52527424, "comment_id": 92017127, "body": "@RbMm: On some hardware platforms, pointers to different types may have different representations or even different sizes.  Implementations intended to be suitable for low-level programming on a platform where all pointers use the same representation should support type-agnostic constructs, but unfortunately there&#39;s no formal means by which implementations can specify whether or not they are suitable for low-level programming, or by which programs can indicate that they require such implementations."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1538058055, "post_id": 52527424, "comment_id": 92017879, "body": "here i mean another question (assume that i know that all pointers have the same size and same data representation on concrete platform) - anyway - are correct from formal language c++ rules real &quot;not-active&quot; member in this case. are compiler can generate ub here. if interpret the CIS very narrowly and formally - we can not. even if we have <code>union { int x; int y;}</code> <code>x</code> and <code>y</code> have not CIS, or <code>union { int x; struct { int y; } s; }</code> again no formal CIS between <code>x</code> and <code>s.y</code>. only in case <code>union { struct { int x;} s1; struct { int y; } s2; }</code> formal <code>s1.x</code> and <code>s2.y</code> have CIS. .."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1538058172, "post_id": 52527424, "comment_id": 92017965, "body": "..but by sense we have &quot;wide CIS&quot; the same memory layout in all 3 case. more correct say that we always can read any union member. simply need understand that different types have different representation in memory and need take this to account when read data"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1538058357, "post_id": 52527424, "comment_id": 92018098, "body": "on concrete topic yet another example of contradictory behavior <a href=\"https://godbolt.org/z/JNjL5-\" rel=\"nofollow noreferrer\">godbolt.org/z/JNjL5-</a>"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1538059982, "post_id": 52527424, "comment_id": 92019235, "body": "@RbMm: Both C and C++ have fractured into diverging groups of dialects, with one group interpreting Undefined Behavior as &quot;actions may be processed in whatever fashion the implementer thinks would make them most useful&quot;, and the other interpreting it as &quot;Implementations should not be expected to process usefully any action upon which the Standard imposes no requirements, except in cases where failure to do so would render an implementation almost completely useless for any purpose whatsoever&quot;.  Personally, I think the authors of the Standard would have thought it self-evident that..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1538060842, "post_id": 52527424, "comment_id": 92019813, "body": "...people writing implementations for various purposes should, whenever allowed to do so, make a bona fide effort to do whatever is practical to make them maximally suitable for such purposes, but to some people it isn&#39;t self-evident."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1538061048, "post_id": 52527424, "comment_id": 92019939, "body": "The footnote to 6.5p7 says the rules are intended to indicate <i>when things may alias</i>.  In your second example, the pointers to union members alias in both demo functions, so I wouldn&#39;t expect compilers to handle that reliably.  If, however, you had split f into three functions, each taking one pointer, and had derived the pointers passed to each following the return from the previous function, there would be no aliasing, but given <code>f(&amp;unionArr[i].s1); g(&amp;unionArr[j].s2); h(&amp;unionArr[i].s1);</code>  gcc/clang would ignore the possibility of i==j."}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 3, "last_activity_date": 1538005207, "creation_date": 1538005207, "answer_id": 52527424, "question_id": 52511896, "link": "https://stackoverflow.com/questions/52511896/why-is-it-invalid-for-a-union-type-declared-in-one-function-to-be-used-in-anothe/52527424#52527424", "title": "Why is it invalid for a union type declared in one function to be used in another function?", "body": "<p>One of the major purposes of the Common Initial Sequence rule is to allow functions to operate on many similar structures interchangeably.  Requiring that compilers presume that any function which acts upon a structure might change the corresponding member in any other structure that shares a common initial sequence, however, would have impaired useful optimizations.</p>\n\n<p>Although most code which relies upon the Common Initial Sequence guarantees makes use of a few easily recognizable patterns, e.g.</p>\n\n<pre><code>struct genericFoo {int size; short mode; };\nstruct fancyFoo {int size; short mode, biz, boz, baz; };\nstruct bigFoo {int size; short mode; char payload[5000]; };\n\nunion anyKindOfFoo {struct genericFoo genericFoo;\n  struct fancyFoo fancyFoo;\n  struct bigFoo bigFoo;};\n\n...\nif (readSharedMemberOfGenericFoo( myUnion-&gt;genericFoo ))\n  accessThingAsFancyFoo( myUnion-&gt;fancyFoo );\nreturn readSharedMemberOfGenericFoo( myUnion-&gt;genericFoo );\n</code></pre>\n\n<p>revisiting the union between calls to functions that act on different union members, the authors of the Standard specified that visibility of the union type within the called function should be the determining factor for whether functions should recognize the possibility that an access to e.g. field <code>mode</code> of a <code>FancyFoo</code> might affect field <code>mode</code> of a <code>genericFoo</code>.  The requirement to have a union containing all types of structures whose address might be passed to <code>readSharedMemberOfGeneric</code> in the same compilation unit as that function makes the Common Initial Sequence rule less useful than it would otherwise be, but would make at least allow some patterns like the above usable.</p>\n\n<p>The authors of gcc and clang thought that treating union declarations as an indication that the types involved might be involved in constructs like the above would be an impractical impediment to optimization, however, and figured that since the Standard doesn't require them to support such constructs via other means, they'll simply not support them at all.  Consequently, the real requirement for code that would need to exploit the Common Initial Sequence guarantees in any meaningful fashion is not to ensure that a union type declaration is visible, but to ensure that clang and gcc are invoked with the <code>-fno-strict-aliasing</code> flag.  Also including a visible union declaration when practical wouldn't hurt, but it is neither necessary nor sufficient to ensure correct behavior from gcc and clang.</p>\n"}], "owner": {"reputation": 900, "user_id": 6334778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0XRjK.jpg?s=128&g=1", "display_name": "kangjianwei", "link": "https://stackoverflow.com/users/6334778/kangjianwei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2583, "favorite_count": 7, "answer_count": 3, "score": 38, "last_activity_date": 1538005207, "creation_date": 1537945678, "last_edit_date": 1537967148, "question_id": 52511896, "link": "https://stackoverflow.com/questions/52511896/why-is-it-invalid-for-a-union-type-declared-in-one-function-to-be-used-in-anothe", "title": "Why is it invalid for a union type declared in one function to be used in another function?", "body": "<p>When I read ISO/IEC 9899:1999 (see:6.5.2.3), I saw an example like this (emphasis mine) :</p>\n\n<blockquote>\n  <p>The following is <strong>not a valid fragment</strong> (because the union type is <strong>not visible within function <code>f</code></strong>):</p>\n\n<pre><code>struct t1 { int m; };\nstruct t2 { int m; };\nint f(struct t1 * p1, struct t2 * p2)\n{\n      if (p1-&gt;m &lt; 0)\n            p2-&gt;m = -p2-&gt;m;\n      return p1-&gt;m;\n}\nint g()\n{\n      union {\n            struct t1 s1;\n            struct t2 s2;\n      } u;\n      /* ... */\n      return f(&amp;u.s1, &amp;u.s2);\n}\n</code></pre>\n</blockquote>\n\n<p>I found no errors and warnings when I tested.</p>\n\n<p>My question is: Why is this fragment invalid?</p>\n"}, {"tags": ["c", "arrays", "hex", "ascii", "checksum"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 3, "creation_date": 1537945563, "post_id": 52511728, "comment_id": 91963448, "body": "It seems to be a very bad example as there is non of <code>A</code> - <code>F</code> hex values in it. Can they occur? What did you try?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1537945682, "post_id": 52511728, "comment_id": 91963498, "body": "First step would be converting the string representation (in hex) to an integer."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1537945787, "post_id": 52511728, "comment_id": 91963544, "body": "For the 2nd part, try <code>(&#39;4&#39; - &#39;0&#39;) * 16 + (&#39;1&#39; - &#39;0&#39;)</code>"}, {"owner": {"reputation": 63, "user_id": 9395427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/amj7S.jpg?s=128&g=1", "display_name": "Kater", "link": "https://stackoverflow.com/users/9395427/kater"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1537946626, "post_id": 52511728, "comment_id": 91963991, "body": "@mch Yes they can. And I tried to iterate through the array and save two characters to a new object, but that way I end up with two individual characters still."}, {"owner": {"reputation": 63, "user_id": 9395427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/amj7S.jpg?s=128&g=1", "display_name": "Kater", "link": "https://stackoverflow.com/users/9395427/kater"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1537946894, "post_id": 52511728, "comment_id": 91964146, "body": "@pmg Thanks for the suggestion, I&#39;ll try that!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1537946924, "post_id": 52511728, "comment_id": 91964166, "body": "Are you sure the array is of type <code>uint16_t</code>? It looks lake a <code>char</code> array. It generates a compiler error."}, {"owner": {"reputation": 63, "user_id": 9395427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/amj7S.jpg?s=128&g=1", "display_name": "Kater", "link": "https://stackoverflow.com/users/9395427/kater"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1537953282, "post_id": 52511728, "comment_id": 91967880, "body": "@WeatherVane Yes sorry, I wrote it down wrong. In my code it is of course a <code>char</code> array."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 9395427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/amj7S.jpg?s=128&g=1", "display_name": "Kater", "link": "https://stackoverflow.com/users/9395427/kater"}, "edited": false, "score": 0, "creation_date": 1537953382, "post_id": 52512738, "comment_id": 91967944, "body": "Yea in my code it&#39;s a char array too, I wrote it down incorrectly for the example. Anyway, thanks for the suggestion, I will try that one too, but for now @pmg solution works."}], "tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 1, "last_activity_date": 1537948632, "creation_date": 1537948632, "answer_id": 52512738, "question_id": 52511728, "link": "https://stackoverflow.com/questions/52511728/c-checksum-calculation-of-array-of-ascii-hex-values/52512738#52512738", "title": "C. Checksum calculation of array of ASCII hex values", "body": "<pre><code>uint16_t exArray[] = \"3030422320303030373830434441453141542355\";\n</code></pre>\n\n<p>I don't think this does what you are trying to do. The string literal is treated as a pointer to a const char. It's not even compiling for me. What you want here is something like this:</p>\n\n<pre><code>const char * exArray = \"3030422320303030373830434441453141542355\";\n</code></pre>\n\n<blockquote>\n  <p>It's 20 pairs of hex values that each represent an ASCII character\n  (eg. 0x41 = A). How can I split them up to calculate a checksum?</p>\n</blockquote>\n\n<p>You could loop through the array, doing what you want to do with the two chars inside the loop:</p>\n\n<pre><code>for (int i = 0; exArray[i]; i+=2) {\n    printf(\"my chars are %c and %c\\n\", exArray[i], exArray[i+1]);\n    // do the calculations you need here using exArray[i] and exArray[i+1]\n}\n</code></pre>\n\n<blockquote>\n  <p>Alternatively, how can I merge two values in an array to be one value?\n  (eg. '4', '1' -> '41')</p>\n</blockquote>\n\n<p>I'm not sure what you mean here. Do you mean <code>\"41\"</code>, as in the string representing 41? To do that, allocate three chars, then copy over those two chars and a null terminator. Something like</p>\n\n<pre><code>char hexByte[3];\nhexByte[2] = 0; // setting the null terminator\nfor (int i = 0; exArray[i]; i+=2) {\n    hexByte[0] = exArray[i];\n    hexByte[1] = exArray[i+1];\n    printf(\"the string \\\"hexByte\\\" is: %s\\n\", hexByte);\n    // do something with hexByte here\n}\n</code></pre>\n\n<p>If you want to convert it to its integer representation, use <code>strtol</code>:</p>\n\n<pre><code>printf(\"int value: %ld\\n\", strtol(hexByte, 0, 16));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 9395427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/amj7S.jpg?s=128&g=1", "display_name": "Kater", "link": "https://stackoverflow.com/users/9395427/kater"}, "is_accepted": false, "score": 2, "last_activity_date": 1537953795, "creation_date": 1537953795, "answer_id": 52514295, "question_id": 52511728, "link": "https://stackoverflow.com/questions/52511728/c-checksum-calculation-of-array-of-ascii-hex-values/52514295#52514295", "title": "C. Checksum calculation of array of ASCII hex values", "body": "<blockquote>\n  <p>@pmg:</p>\n  \n  <p>First step would be converting the string representation (in hex) to an integer.</p>\n  \n  <p>For the 2nd part, try ('4' - '0') * 16 + ('1' - '0') </p>\n</blockquote>\n\n<p>This ultimately did the trick, love how simple it is too,</p>\n\n<p>My implementation now looks somewhat like this.</p>\n\n<pre><code>uint8_t t = 0, tem, tem2, sum;\nuint32_t chksum = 0;\n\nvoid checkSum(void)\n{\n    while (t &lt; 40)\n    {\n        asciiToDec(exArray[t]);\n        tem = global.DezAscii[0];\n        t++;\n        asciiToDec(exArray[t]);\n        tem2 = global.DezAscii[0];\n        t++;\n\n        sum = (tem) * 16 + (tem2);\n        chksum += sum;\n    }\n}\n\nvoid asciiToDec(uint8_t value)\n{\n    if (value == 'A')\n        global.DezAscii[0] = 10;\n    else if (value == 'B')\n        global.DezAscii[0] = 11;\n    else if (value == 'C')\n        global.DezAscii[0] = 12;\n    else if (value == 'D')\n        global.DezAscii[0] = 13;\n    else if (value == 'E')\n        global.DezAscii[0] = 14;\n    else if (value == 'F')\n        global.DezAscii[0] = 15;\n    else\n        global.DezAscii[0] = value;\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 9395427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/amj7S.jpg?s=128&g=1", "display_name": "Kater", "link": "https://stackoverflow.com/users/9395427/kater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1537959350, "creation_date": 1537945121, "last_edit_date": 1537959350, "question_id": 52511728, "link": "https://stackoverflow.com/questions/52511728/c-checksum-calculation-of-array-of-ascii-hex-values", "title": "C. Checksum calculation of array of ASCII hex values", "body": "<p>i'm trying to calculate the checksum of an array of ASCII hex values.</p>\n\n<p>Say I have the following</p>\n\n<pre><code>char exArray[] = \"3030422320303030373830434441453141542355\";\n</code></pre>\n\n<p>It's 20 pairs of hex values that each represent an ASCII character (eg. 0x41 = A).\nHow can I split them up to calculate a checksum?</p>\n\n<p>Alternatively, how can I merge two values in an array to be one value? \n(eg. '4', '1' -> '41')</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1537947277, "post_id": 52511516, "comment_id": 91964352, "body": "You can&#39;t as static is local to it compilation unit"}, {"owner": {"reputation": 25, "user_id": 10416660, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4S5Ys-Y9i30/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWrEhg89IMgANH_Cy_xAkWs_FBipQ/mo/photo.jpg?sz=128", "display_name": "Shaik Nisar Ahmed", "link": "https://stackoverflow.com/users/10416660/shaik-nisar-ahmed"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1537952992, "post_id": 52511516, "comment_id": 91967691, "body": "@P__J__ what is compilation unit?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1537953106, "post_id": 52511516, "comment_id": 91967755, "body": "Basically one .c file"}], "owner": {"reputation": 25, "user_id": 10416660, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4S5Ys-Y9i30/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWrEhg89IMgANH_Cy_xAkWs_FBipQ/mo/photo.jpg?sz=128", "display_name": "Shaik Nisar Ahmed", "link": "https://stackoverflow.com/users/10416660/shaik-nisar-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1537944663, "answer_count": 0, "score": 0, "last_activity_date": 1537944755, "creation_date": 1537944348, "question_id": 52511516, "link": "https://stackoverflow.com/questions/52511516/global-static-variable-declared-in-one-file-and-accessing-it-in-another-file", "closed_reason": "Duplicate", "title": "global static variable declared in one file and accessing it in another file", "body": "<p><strong>headers.h</strong></p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nstatic int static_val=10;\n</code></pre>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>#include \"headers.h\"\nint main()\n{\nstatic_val += 10;\nif (static_val &lt;= 100)\n{\nprintf(\"main called\\n\");\nprintf(\"%d\\n\",static_val);\nmain();\n}\nelse\nprintf(\"stopped calling 'main', with final value = %d\\n\",static_val);\n\nfunction1();\n}\n</code></pre>\n\n<p><strong>file.c</strong></p>\n\n<pre><code>#include \"headers1.h\"\n\nvoid function1(void)\n{\nstatic int inc;\ninc++;\nprintf(\"*************\\n\");\nprintf(\"function1 called %d time.\\n\",inc);\nprintf(\"%d\\n\",static_val);\nprintf(\"Initial Value = %d\\n\",static_val);\nstatic_val += 20;\nprintf(\"%d\\n\",static_val);\nprintf(\"**************\\n\");\n}\n</code></pre>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n<li>So, I've declared the static variable globally and placed it in a\nseparate header file, and i would like to use it in both the files,\ni'm doing this just to understand the storage classes.</li>\n<li>The main gets called recursively uptill the condition is true, and\nonce the condition fails, the last main calls the 'function1', and\nonce the function1 is called, my understanding was that the function\nwould take the last updated value of the static variable, but that\ndoesn't happen and it starts with a fresh declaration, why is it so?</li>\n<li><strong>Note:</strong> execute the program and look at the output for a better\nunderstanding of my question.</li>\n</ul>\n"}, {"tags": ["c", "opengl-es", "debian", "x11", "openvg"], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 10325566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73633feac5fe4610077da7cc7bd6b53?s=128&d=identicon&r=PG&f=1", "display_name": "Faruk", "link": "https://stackoverflow.com/users/10325566/faruk"}, "edited": false, "score": 0, "creation_date": 1537946268, "post_id": 52511659, "comment_id": 91963796, "body": "If I use window for 3d graphic processor of raspberry so hardly so I want try run code without desktop. Also when I run sample code and I try printscreen but I didn&#39;t. Becuse sample code don&#39;t run on screen but I don&#39;t know where work?"}, {"owner": {"reputation": 194, "user_id": 10325566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73633feac5fe4610077da7cc7bd6b53?s=128&d=identicon&r=PG&f=1", "display_name": "Faruk", "link": "https://stackoverflow.com/users/10325566/faruk"}, "edited": false, "score": 0, "creation_date": 1537946510, "post_id": 52511659, "comment_id": 91963918, "body": "kmscube seems to be suitable for the job."}], "tags": [], "owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1537944872, "creation_date": 1537944872, "answer_id": 52511659, "question_id": 52511391, "link": "https://stackoverflow.com/questions/52511391/how-to-run-c-codeon-codeblocks-without-desktop-on-raspberrylike-work-of-omxp/52511659#52511659", "title": "How to run c code(on codeblocks) without desktop on raspberry?(Like work of omxplayer)", "body": "<p>The most straightforward solution would be to just create a fullscreen window, that has no border and no decorations (titlebar, buttons, etc.). If you want actual graphic output, there's nothing wrong with using X11. Despite some hearsay thrown around on the Internet the Xorg X11 servers are actually pretty lightweight.</p>\n\n<p>If you really want to go without X11, then you should look at things like the kmscube demo <a href=\"https://cgit.freedesktop.org/mesa/kmscube/tree/\" rel=\"nofollow noreferrer\">https://cgit.freedesktop.org/mesa/kmscube/tree/</a> which does OpenGL directly to the display, without a graphics server or windowing system in between.</p>\n\n<p>If you want it to be a little more abstracted, then have a look at how Wayland compositors talk to the display. The developers of the Sway Wayland compositor developed a nice abstraction library for this: <a href=\"https://github.com/swaywm/wlroots\" rel=\"nofollow noreferrer\">https://github.com/swaywm/wlroots</a></p>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 4584142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f999173a0effdd7744e2d64f47ff52eb?s=128&d=identicon&r=PG&f=1", "display_name": "ziza", "link": "https://stackoverflow.com/users/4584142/ziza"}, "is_accepted": false, "score": 0, "last_activity_date": 1537945458, "creation_date": 1537945458, "answer_id": 52511828, "question_id": 52511391, "link": "https://stackoverflow.com/questions/52511391/how-to-run-c-codeon-codeblocks-without-desktop-on-raspberrylike-work-of-omxp/52511828#52511828", "title": "How to run c code(on codeblocks) without desktop on raspberry?(Like work of omxplayer)", "body": "<p>You need to start display server first.\nWhat you need could work with \"xinit\" which would manualy start xorg server, after that I suspect you should start \"openbox\" which is window manager. This way your desktop application should run as is, no changes needed. </p>\n\n<p>Best practice is to create shell script for starting your application which could look like this:</p>\n\n<pre><code>set -e \nxset s off\nxset -dpms\nxset s noblank\nopenbox &amp;\ncd /home/your_applicaton_directory\nyour_executable 2&gt;/dev/null &gt;/dev/null\n</code></pre>\n\n<p>Save this script and mark it executable whith </p>\n\n<pre><code>chmod +x \n</code></pre>\n\n<p>Then try to run this:</p>\n\n<pre><code>xinit /full_path_to_above_script\n</code></pre>\n\n<p>Hope this helps a bit... :)</p>\n"}, {"comments": [{"owner": {"reputation": 194, "user_id": 10325566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73633feac5fe4610077da7cc7bd6b53?s=128&d=identicon&r=PG&f=1", "display_name": "Faruk", "link": "https://stackoverflow.com/users/10325566/faruk"}, "edited": false, "score": 0, "creation_date": 1538551479, "post_id": 52621621, "comment_id": 92177242, "body": "Thanks for your information. I will try to work with qt on future time. But I try do as same as raspberry&#39;s sample code now. I should tell this: genereally should use egl library for this job. My search showed me this. But I don&#39;t sure. Is it true?"}], "tags": [], "owner": {"reputation": 2763, "user_id": 652702, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0f4feb2f85e72d6af14d274ecb82f590?s=128&d=identicon&r=PG", "display_name": "bobbaluba", "link": "https://stackoverflow.com/users/652702/bobbaluba"}, "is_accepted": false, "score": 0, "last_activity_date": 1538550778, "creation_date": 1538550778, "answer_id": 52621621, "question_id": 52511391, "link": "https://stackoverflow.com/questions/52511391/how-to-run-c-codeon-codeblocks-without-desktop-on-raspberrylike-work-of-omxp/52621621#52621621", "title": "How to run c code(on codeblocks) without desktop on raspberry?(Like work of omxplayer)", "body": "<p>Qt has a platform backend called eglfs, which lets your application run fullscreen on a single screen by using EGL and kms with very little overhead. Should work nicely with whatever OpenGL stuff you want to do.</p>\n\n<p>You would just program a Qt application like normal, and launch it with <code>./myapp -platform eglfs</code> from a tty.</p>\n\n<p><a href=\"http://doc.qt.io/qt-5/embedded-linux.html#eglfs\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/embedded-linux.html#eglfs</a></p>\n"}], "owner": {"reputation": 194, "user_id": 10325566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73633feac5fe4610077da7cc7bd6b53?s=128&d=identicon&r=PG&f=1", "display_name": "Faruk", "link": "https://stackoverflow.com/users/10325566/faruk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1551877738, "creation_date": 1537943801, "last_edit_date": 1551877738, "question_id": 52511391, "link": "https://stackoverflow.com/questions/52511391/how-to-run-c-codeon-codeblocks-without-desktop-on-raspberrylike-work-of-omxp", "title": "How to run c code(on codeblocks) without desktop on raspberry?(Like work of omxplayer)", "body": "<p>Sorry my bad English. I work 3d shape with opengl on raspberry pi3(debian) for a while.  I want to run my code don't use on desktop(or window). I searched but puzzled my mind. In a nutshell I want to run my code as well as in image below. </p>\n\n<p><a href=\"https://i.stack.imgur.com/y7eDi.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>When I searched this topic, I have seen about EGL library but I don't know if I can use this.</p>\n\n<p>If you used OpenMAX library before you know openmax doesn't use window. All image or video can run on console mode. You don't need any dosktop. I wonder this Is there a way I can use Opengl in this way ?(Can Opengl run like OpenMAX library or not) If there is any way How should I  build my code ? I want render my image without desktop. I want use console mode.</p>\n\n<p>Thanks your time. Best Regards.</p>\n"}, {"tags": ["c++", "c", "debugging", "address-sanitizer"], "comments": [{"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1537941747, "post_id": 52510753, "comment_id": 91961688, "body": "libasan is not supported on\\for windows"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1537941895, "post_id": 52510753, "comment_id": 91961762, "body": "<a href=\"https://stackoverflow.com/questions/11806469/clang-with-faddress-sanitizer-on-windows\" title=\"clang with faddress sanitizer on windows\">stackoverflow.com/questions/11806469/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1537942600, "post_id": 52510753, "comment_id": 91962072, "body": "&quot;Cygwin on Windows 10&quot; Might I ask why you don&#39;t just use WSL?"}, {"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "reply_to_user": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1537947103, "post_id": 52510753, "comment_id": 91964263, "body": "@Swordfish Might I ask why you use WSL?"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1537947369, "post_id": 52510753, "comment_id": 91964404, "body": "I don&#39;t. But I do not use cygwin either. Its just that gccs address sanitizer should be working under WSL."}], "owner": {"reputation": 43, "user_id": 9572702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c330980bd9e60f66ec654006419c234?s=128&d=identicon&r=PG&f=1", "display_name": "Robbie Hatley", "link": "https://stackoverflow.com/users/9572702/robbie-hatley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 765, "favorite_count": 0, "closed_date": 1537941930, "answer_count": 0, "score": 1, "last_activity_date": 1537956806, "creation_date": 1537940943, "last_edit_date": 1537956806, "question_id": 52510753, "link": "https://stackoverflow.com/questions/52510753/does-cygwin-have-any-address-sanitizer-tool-at-all-not-necessarily-libasan", "closed_reason": "Duplicate", "title": "Does Cygwin have any &quot;address sanitizer&quot; tool at all (NOT necessarily &quot;libasan&quot;)?", "body": "<p>I like to program using gcc and g++ on Cygwin on Windows 10. But although man gcc presents the \"-fsanitize=address\" option, it doesn't seem to actually work. I get \"cannot find -lasan\". And searching Cygwin's package repository for \"lasan\", \"libasan\", \"asan\" or \"sanit\" returns nothing relevant. Is \"Address Sanitizer\", then, a Linux-only thing, with no equivalent in Cygwin? And if it is, what other tools are available on Cygwin for achieving the same or similar goals?</p>\n"}, {"tags": ["c", "algorithm", "data-structures", "graph"], "comments": [{"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 2, "creation_date": 1537939132, "post_id": 52510239, "comment_id": 91960784, "body": "This program cannot be run as is. You have not defined <code>enqueue</code> <code>dequeue</code>, <code>isempty</code> and the <code>main</code> function. Please add these functions."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1537940510, "post_id": 52510239, "comment_id": 91961276, "body": "please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can reproduce the problem so we can help you."}, {"owner": {"reputation": 32, "user_id": 10238704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a24d0c0fd291a61f563a0b5ede44b3?s=128&d=identicon&r=PG&f=1", "display_name": "david12345", "link": "https://stackoverflow.com/users/10238704/david12345"}, "edited": false, "score": 0, "creation_date": 1537940599, "post_id": 52510239, "comment_id": 91961303, "body": "can in upload full code including main."}, {"owner": {"reputation": 32, "user_id": 10238704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a24d0c0fd291a61f563a0b5ede44b3?s=128&d=identicon&r=PG&f=1", "display_name": "david12345", "link": "https://stackoverflow.com/users/10238704/david12345"}, "reply_to_user": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1537940905, "post_id": 52510239, "comment_id": 91961383, "body": "uploaded full code @RishikeshRaje  please help"}, {"owner": {"reputation": 32, "user_id": 10238704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a24d0c0fd291a61f563a0b5ede44b3?s=128&d=identicon&r=PG&f=1", "display_name": "david12345", "link": "https://stackoverflow.com/users/10238704/david12345"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1537940933, "post_id": 52510239, "comment_id": 91961394, "body": "uploaded full code @user3629249 please help"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1537941286, "post_id": 52510239, "comment_id": 91961511, "body": "when calling any of the heap allocation functions: <code>malloc</code> <code>calloc</code> <code>realloc</code>: 1) the returned type is <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, etc    2) always check (!=NULL) the returned value to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1537941379, "post_id": 52510239, "comment_id": 91961553, "body": "the parameter to <code>malloc()</code> is expected to be of type <code>size_t</code> (long unsigned int)  The conversion from <code>int</code> to <code>size_t</code> is risky and should not be relied upon"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1537941594, "post_id": 52510239, "comment_id": 91961624, "body": "for ease of readability and understanding: 1) separate code blocks via a single blank line.  2) please consistently indent the code.  indent after every opening brace &#39;{&#39;.  unindent before every closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces.  3) insert an appropriate speace inside parens, inside braces, after commas, after semicolons, around C operators.  insert 2 or 3 blank lines between functions (be consistent)"}, {"owner": {"reputation": 32, "user_id": 10238704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a24d0c0fd291a61f563a0b5ede44b3?s=128&d=identicon&r=PG&f=1", "display_name": "david12345", "link": "https://stackoverflow.com/users/10238704/david12345"}, "edited": false, "score": 0, "creation_date": 1537941794, "post_id": 52510239, "comment_id": 91961716, "body": "next time i will keep this in mind thanks"}, {"owner": {"reputation": 32, "user_id": 10238704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a24d0c0fd291a61f563a0b5ede44b3?s=128&d=identicon&r=PG&f=1", "display_name": "david12345", "link": "https://stackoverflow.com/users/10238704/david12345"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1537941940, "post_id": 52510239, "comment_id": 91961787, "body": "i think i did a mistake in bfs function only so please you check only that you will get know since you are expert and i am a beginner @user3629249"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1537942000, "post_id": 52510239, "comment_id": 91961814, "body": "Besides all the otherwise-unrelated advice, your problem is one of queue management. Eventually your front is passing your rear in your queue, yet your isempty only tests for both to be -1. If, when you dequeue, both front and rear are equal <i>before</i> the dequeue, reset them both to -1. That will probably solve your problem."}, {"owner": {"reputation": 32, "user_id": 10238704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a24d0c0fd291a61f563a0b5ede44b3?s=128&d=identicon&r=PG&f=1", "display_name": "david12345", "link": "https://stackoverflow.com/users/10238704/david12345"}, "edited": false, "score": 0, "creation_date": 1537942080, "post_id": 52510239, "comment_id": 91961839, "body": "did you check my bfs function"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1537942124, "post_id": 52510239, "comment_id": 91961859, "body": "Nope. didn&#39;t really care. I was more interested in the fault. Fix your queueing architecture and you can probably verify the rest yourself."}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 1, "creation_date": 1537942721, "post_id": 52510239, "comment_id": 91962119, "body": "In the <code>addedge</code> function you are directly adding the edge to the head of the adjency list. You should check if the head is NULL and if not NULL, then traverse the list and add to the end."}, {"owner": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "edited": false, "score": 0, "creation_date": 1537947406, "post_id": 52510239, "comment_id": 91964427, "body": "please first study the kinked lists.  <a href=\"https://www.learn-c.org/en/Linked_lists\" rel=\"nofollow noreferrer\">learn-c.org/en/Linked_lists</a>"}, {"owner": {"reputation": 526, "user_id": 6935562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d029e70bc52229455927331566d4308a?s=128&d=identicon&r=PG&f=1", "display_name": "Chandini", "link": "https://stackoverflow.com/users/6935562/chandini"}, "edited": false, "score": 1, "creation_date": 1537949733, "post_id": 52510239, "comment_id": 91965744, "body": "While enqueuing, it&#39;s good practice to check whether the queue has already reached its capacity or not."}], "answers": [{"tags": [], "owner": {"reputation": 526, "user_id": 6935562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d029e70bc52229455927331566d4308a?s=128&d=identicon&r=PG&f=1", "display_name": "Chandini", "link": "https://stackoverflow.com/users/6935562/chandini"}, "is_accepted": false, "score": 1, "last_activity_date": 1537953160, "last_edit_date": 1537953160, "creation_date": 1537952272, "answer_id": 52513776, "question_id": 52510239, "link": "https://stackoverflow.com/questions/52510239/bfs-traversal-program-in-c-using-queue/52513776#52513776", "title": "BFS traversal program in c using queue", "body": "<p>Your bfs is working fine, as people have pointed out, your isEmpty() function for the queue has a flaw. It should be checking for 2 conditions, </p>\n\n<ol>\n<li><p>No elements have been enqueued or dequeued till now. For that the condition is<br>\n<code>(queue-&gt;front==-1 &amp;&amp; queue-&gt;rear==-1)</code> </p></li>\n<li><p>All the elements which are enqueued have been dequeued, \nFor example In the queue you have enqueued 2 , 3 then the rear=0 and front =1. Now you have dequeued 2 elements \nwhich leaves the queue empty and rear=2 and front=1. This is the case where the rear exceeds the front. You have to check for the condition where the difference between front index and rear index is equal to 1.</p>\n\n<p><code>((queue-&gt;capacity-(queue-&gt;front-queue-&gt;rear))%queue-&gt;capacity) == 1</code></p></li>\n</ol>\n\n<p>And a suggestion</p>\n\n<p>While enqueuing, it's a good practice to check whether the queue has already reached its capacity or not.</p>\n"}], "owner": {"reputation": 32, "user_id": 10238704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a24d0c0fd291a61f563a0b5ede44b3?s=128&d=identicon&r=PG&f=1", "display_name": "david12345", "link": "https://stackoverflow.com/users/10238704/david12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1537953160, "creation_date": 1537938064, "last_edit_date": 1537943593, "question_id": 52510239, "link": "https://stackoverflow.com/questions/52510239/bfs-traversal-program-in-c-using-queue", "title": "BFS traversal program in c using queue", "body": "<p>I'm studying graphs at the moment, and I'm using C. When I represent a graph with an adjacency list, I need a queue for a BFS traversal. However, I'm having some issues with the code - I'm not sure if I grasped the concept of a bfs traversal with queues well.</p>\n\n<p>I pasted the commented code below, I hope it's readable. Can someone check it out, or at least provide some info on how to pull this off the right way?</p>\n\n<p>program is crashing and also showing segmentation fault   </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nstruct Queue{\n    int rear;\n    int front;\n    int capacity;\n    int* array;\n};\nstruct adjlistnode{\n    int dest;\n    struct adjlistnode* next;\n};\nstruct adjlist{\n    struct adjlistnode* head;\n};\nstruct graph{\n    int V;\n    struct adjlist* array;\n};\nint visited[100];\n\nstruct Queue* createqueue(int capacity){\n    struct Queue* queue=(struct Queue*)malloc(sizeof(struct Queue));\n    queue-&gt;rear = -1;\n    queue-&gt;front = -1;\nqueue-&gt;capacity=capacity;\nqueue-&gt;array=(int*)malloc(sizeof(int)*capacity);\nreturn queue;\n}\nint isempty(struct Queue* queue){\n    return(queue-&gt;front==-1 &amp;&amp; queue-&gt;rear==-1);\n}\nvoid enqueue(struct Queue* queue,int data){\n    if(isempty(queue)){\n        queue-&gt;rear=0;\n        queue-&gt;front=0;\n        queue-&gt;array[queue-&gt;rear]=data;\n        printf(\"%d\",queue-&gt;array[queue-&gt;rear]);\n        return;\n    }\nqueue-&gt;rear=(queue-&gt;rear+1)%queue-&gt;capacity;\nqueue-&gt;array[queue-&gt;rear]=data;\n} \nint dequeue(struct Queue* queue){\n    if(isempty(queue))\n        return -1;\n    int temp=queue-&gt;front;\n    queue-&gt;front=(queue-&gt;front+1)%queue-&gt;capacity;\n    return (queue-&gt;array[temp]); \n}\nint isfront(struct Queue* queue){\n    return(queue-&gt;array[queue-&gt;front]);\n}\n/// GRAPH FUNCTIONS\nstruct adjlistnode* getnewnode(int dest){\n    struct adjlistnode* newnode =(struct adjlistnode*)malloc(sizeof(struct adjlistnode));\n    newnode-&gt;dest=dest;\n    newnode-&gt;next=NULL;\n    return newnode;\n}\nstruct graph* creategraph(int V){\n    struct graph* G = (struct graph*)malloc(sizeof(struct graph));\n    G-&gt;V=V;\n    G-&gt;array=(struct adjlist*)malloc(V*sizeof(struct adjlist));\n    for(int i=0;i&lt;V;i++){\n        G-&gt;array[i].head=NULL;\n    }\n return G;\n}\nvoid addedge(struct graph* G,int src ,int dest){\n    struct adjlistnode* newnode=getnewnode(dest);\n\n    newnode-&gt;next=G-&gt;array[src].head;\n    G-&gt;array[src].head=newnode; \n\n    newnode=getnewnode(src);\n\n    newnode-&gt;next=G-&gt;array[dest].head;\n    G-&gt;array[dest].head=newnode;\n}\nvoid printgraph(struct graph* G){\n    for(int i=0;i&lt;G-&gt;V;i++){\n        struct adjlistnode* temp=G-&gt;array[i].head;\n        while(temp!=NULL){\n            printf(\"%d\",temp-&gt;dest);\n            temp=temp-&gt;next;\n        }\n        printf(\"\\n\");\n    }\n}\nvoid bfs(struct graph* G,struct Queue* queue,int startvertex){\n\n\n    enqueue(queue,startvertex);\n\n\n    while(!isempty(queue)){\n       int u=dequeue(queue);\n       visited[u]=1;\n       printf(\" \\n %d \",u);\n       struct adjlistnode* temp=G-&gt;array[u].head;\n       while(temp){\n         if(visited[temp-&gt;dest]==0){\n             visited[temp-&gt;dest]=1;\n             enqueue(queue,temp-&gt;dest);\n          }\n       temp=temp-&gt;next;\n       }\n\n    }\n\n}\nvoid bfstraversal(struct graph* G,struct Queue *queue){\n    int i;\n    for(i=0;i&lt;G-&gt;V;i++)\n        visited[i]=0;\n    for(i=0;i&lt;G-&gt;V;i++){\n        if(!visited[i]){\n            bfs(G,queue,i);\n        }\n    }\n}\n int main(){\n    struct Queue* queue=createqueue(100);\n\n\n    struct graph* G=creategraph(5);\n    addedge(G,1,2);\n    addedge(G,1,1);\n    printgraph(G);\n    bfstraversal(G,queue);\n  //  printf(\"\\n%d\",dequeue(queue));\n}\n</code></pre>\n"}, {"tags": ["c", "opengl", "glsl", "vertex-shader"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1537938566, "post_id": 52510010, "comment_id": 91960596, "body": "This should work. Are you sure it varies with time?"}, {"owner": {"reputation": 1664, "user_id": 2649079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41a2c9d80a4b8917940e65858c9abc0?s=128&d=identicon&r=PG", "display_name": "Nadir", "link": "https://stackoverflow.com/users/2649079/nadir"}, "edited": false, "score": 0, "creation_date": 1537940530, "post_id": 52510010, "comment_id": 91961283, "body": "I dont see any draw call. Did you omit it or it is simply not there?"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1537944512, "post_id": 52510010, "comment_id": 91962935, "body": "Your code snippet is missing something important: The actual drawing commands. Without seeing where drawing happens in relation to the rest of the OpenGL operations it&#39;s nigh impossible to tell, what the problem is."}, {"owner": {"reputation": 51, "user_id": 8578151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f353b72e78922a928fe9340ee0e44c5?s=128&d=identicon&r=PG&f=1", "display_name": "user8578151", "link": "https://stackoverflow.com/users/8578151/user8578151"}, "reply_to_user": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1537976981, "post_id": 52510010, "comment_id": 91982920, "body": "@datenwolf edited to include missing draw command"}, {"owner": {"reputation": 51, "user_id": 8578151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f353b72e78922a928fe9340ee0e44c5?s=128&d=identicon&r=PG&f=1", "display_name": "user8578151", "link": "https://stackoverflow.com/users/8578151/user8578151"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1537977121, "post_id": 52510010, "comment_id": 91983017, "body": "@immibis yes, even passing in different constant values to <code>glUniform1f</code> results in no change to the displayed triangles, it is as if the vertex shader thinks the uniform <code>i</code> is always 0, but when I change the vertex shader directly by varying <code>-1</code> to <code>-0.5</code> I can see the difference so I know the shader <i>is</i> working.... I will edit the question with a compilable version within 12 hours."}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1537985987, "post_id": 52510010, "comment_id": 91987331, "body": "&quot; I just manually define the method signatures at the top of the file and import GL through the linker.&quot; This part is definitively missing in your question."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1538000694, "post_id": 52510010, "comment_id": 91993360, "body": "Oh, good spotting derhass. Yes, that &quot;only issue you&#39;re aware of&quot; could be the reason it doesn&#39;t work. Go fix it and see if it works then."}, {"owner": {"reputation": 51, "user_id": 8578151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f353b72e78922a928fe9340ee0e44c5?s=128&d=identicon&r=PG&f=1", "display_name": "user8578151", "link": "https://stackoverflow.com/users/8578151/user8578151"}, "edited": false, "score": 0, "creation_date": 1538525536, "post_id": 52510010, "comment_id": 92170142, "body": "makes no sense, but using SDL to import the functions at runtime fixes the issue even though the functions imported from the dll at load time should be the same."}, {"owner": {"reputation": 51, "user_id": 8578151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f353b72e78922a928fe9340ee0e44c5?s=128&d=identicon&r=PG&f=1", "display_name": "user8578151", "link": "https://stackoverflow.com/users/8578151/user8578151"}, "edited": false, "score": 0, "creation_date": 1538527952, "post_id": 52510010, "comment_id": 92170612, "body": "I must protest the reason for closing this question as it is obviously wrong.  The question includes the desired behavior, the observed problem and the shortest code necessary to reproduce it, it&#39;s right there in front of you, plain as day... the gl dll&#39;s provided on my system obviously have fake symbol tables that provide decoy functions that can only handle basic features.  If this means that a separate question must exist for each and every function available, that isn&#39;t my fault, it is the fault of either the maintainer of my O.S. software repo or the GPU manufacturer."}], "answers": [{"comments": [{"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1538765048, "post_id": 52669695, "comment_id": 92272969, "body": "&quot;Clip-space coordinates, which are a hyper-cube of size [2w,2w,2w,w]&quot;. Not exactly. The clip condition is <code>-w &lt;= x,y,z &lt;= w</code>, so the <code>w</code> dimension itself is unbounded. I&#39;d also not the case that the <i>clip coordinates</i> are a hyper-cube - the space is infinite. The <i>viewing volume</i> in clip space is restricted by the above condition, but the resulting 4D volume isn&#39;t a hypercube, it is still an infinite volume due to the unbounded <code>w</code>  - the acutal bounded hypercube comes from the fact that with a projection matrix, <code>w</code> is just  a linear function of <code>z</code>, but that is no property of the clip space."}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 0, "last_activity_date": 1538756294, "creation_date": 1538756294, "answer_id": 52669695, "question_id": 52510010, "link": "https://stackoverflow.com/questions/52510010/opengl-gluniform1f-not-updating-vertex-shader/52669695#52669695", "title": "OpenGL glUniform1f not updating vertex shader", "body": "<p><code>gl_Position</code> expects <em>Clip-space</em> coordinates, which are a hiper-cube of size [2w,2w,2w,w].\n<br>For <code>vec4(x, y, z, w)</code> if any of the [x,y,z] is outside of <code>[-w,w]</code> range, then the vertex is clipped.\n<br>The coordinates will be automatically converted by the GPU to <em>NDC-space</em> <code>x/w, y/w, z/w, 1</code> (aka \"perspective division\") before the fragment shader.</p>\n\n<p>Your GLSL code <code>gl_Position = vec4(aPos.x+i/2,aPos.y,aPos.z,1.0);</code> uses the uniform <code>i</code>.\n<br>You update it by <code>glUniform1f(iLocation, (float) (frame%2));</code></p>\n\n<p>First issue is <code>frame%2</code>. Only <code>0</code> or <code>1</code> is passed to the GPU. With your current vertices data, only two pairs of triangles should be drawn.</p>\n\n<p>Second issue is that <code>frame</code> is a value <code>0 &lt;= frame &lt; 100</code>. So, if you pass <code>frame</code> instead of <code>frame%2</code>, then for most values <code>aPos.x + i/2</code> will fall outside the Clip space and you will see only the first two triangle-pairs, or parts of them.</p>\n"}, {"tags": [], "owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "is_accepted": false, "score": 0, "last_activity_date": 1538764575, "creation_date": 1538764575, "answer_id": 52671505, "question_id": 52510010, "link": "https://stackoverflow.com/questions/52510010/opengl-gluniform1f-not-updating-vertex-shader/52671505#52671505", "title": "OpenGL glUniform1f not updating vertex shader", "body": "<p>So you declare the function like this:</p>\n\n<blockquote>\n<pre><code>void glUniform1f();\n</code></pre>\n</blockquote>\n\n<p>By omitting any parameters, the compiler will assume that all arguments are of type <code>int</code>. For most other GL functions, this works by chance, because those arguments are just integer types in most cases anyway, but for <code>glUniform1f</code>, it will mean that the function argument is <em>converted</em> to integer, but the resulting bit-pattern is implicitely <em>re-interpreted</em> as <code>GLfloat</code> by the function since the actual prototype for <code>glUniform1f</code> is something like this</p>\n\n<pre><code>void glUniform1f(int location, GLfloat value);\n</code></pre>\n\n<blockquote>\n  <p>note that I am not familiar with OpenGL's extension function loading issues and routines such as SDL's <code>SDL_GL_LoadLibrary</code> and <code>SDL_GL_GetProcAddress</code> I just manually define the method signatures at the top of the file and import GL through the linker.</p>\n</blockquote>\n\n<p>You shouldn't do this. The GL functions you try to access might not even be <em>exported</em> by the library at all. If you do not want to manually deal with loading every function pointer, you can use one of the existing <a href=\"https://www.khronos.org/opengl/wiki/OpenGL_Loading_Library\" rel=\"nofollow noreferrer\">OpenGL loaders</a>. </p>\n"}], "owner": {"reputation": 51, "user_id": 8578151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f353b72e78922a928fe9340ee0e44c5?s=128&d=identicon&r=PG&f=1", "display_name": "user8578151", "link": "https://stackoverflow.com/users/8578151/user8578151"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 346, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1538764575, "creation_date": 1537936581, "last_edit_date": 1538050663, "question_id": 52510010, "link": "https://stackoverflow.com/questions/52510010/opengl-gluniform1f-not-updating-vertex-shader", "title": "OpenGL glUniform1f not updating vertex shader", "body": "<p>All the tutorials seem to indicate that I am doing things correctly, the vertex shader works, however it fails to recognize any input changes from the main program through the use of the <code>glUniform1f</code> function.  I check <code>glGetError</code> after each line, there are no errors.  I check <code>glGetShaderiv</code> and <code>glGetShaderInfoLog</code>, there are no issues.  I am testing with OpenGL version 2.1 (unknown profile, but assuming the core profile) as reported by SDL.</p>\n\n<pre><code>#if defined(__WINDOWS__) || defined(_WIN32) || defined(_WIN64) || defined(__WIN32__) || defined(__TOS_WIN__)\\\n    || defined(__CYGWIN__)\n    /* Compiling for Windows */\n    #ifndef __WINDOWS__\n        #define __WINDOWS__\n    #endif\n    #include &lt;windows.h&gt;\n#endif/* Predefined Windows macros */\n\n#include &lt;SDL2/SDL.h&gt;\n#include &lt;GL/GL.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;error.h&gt;\n\n//return type not verified\nvoid glGenBuffers();\nvoid glBindBuffer();\nvoid glBufferData();\nunsigned int glCreateShader();\nvoid glShaderSource();\nvoid glCompileShader();\nvoid glGetShaderiv();\nvoid glGetShaderInfoLog();\nunsigned int glCreateProgram();\nvoid glAttachShader();\nvoid glLinkProgram();\nvoid glGetProgramiv();\nvoid glGetProgramInfoLog();\nvoid glVertexAttribPointer();\nvoid glEnableVertexAttribArray();\nvoid glUseProgram();\nvoid glDeleteShader();\nvoid glGenVertexArrays();\nvoid glBindVertexArray();\nGLint glGetUniformLocation();\nvoid glUniform1f();\nvoid glDeleteProgram();\nvoid glDeleteBuffers();\n\nint fixSDLconsole() {\n    FILE *console = freopen(\"stdout.txt\", \"a\",stdout);\n    if (console == NULL) {return errno;}\n    console = freopen(\"stdout.txt\", \"a\",stderr);\n    if (console == NULL) {return errno;}\n    return 0;\n}\nvoid printGLVersionNumber() {\n    int majorVersion;\n    int minorVersion;\n    int profile;\n    SDL_GL_GetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, &amp;majorVersion);\n    SDL_GL_GetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, &amp;minorVersion);\n    SDL_GL_GetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, &amp;profile);\n    fprintf(stderr,\"GL version %d.%d \",majorVersion,minorVersion);\n    switch (profile) {\n        case SDL_GL_CONTEXT_PROFILE_CORE: fprintf(stderr,\"core (%d)\\n\",profile);break;\n        case SDL_GL_CONTEXT_PROFILE_COMPATIBILITY: fprintf(stderr,\"compatibility (%d)\\n\",profile);break;\n        case SDL_GL_CONTEXT_PROFILE_ES: fprintf(stderr,\"E.S. (%d)\\n\",profile);break;\n        default: fprintf(stderr, \"unknown profile: %d\\n\",profile);break;\n    }\n    return;\n}\n#define checkGlError(label) {int error = glGetError();if (error != GL_NO_ERROR) {error_at_line(0,0,__FILE__,__LINE__,\"error=%d\", error);goto label;}}\nint main(int argc, char **argv) {\n    SDL_Window *window = NULL;\n    SDL_GLContext context = NULL;\n    GLuint verticesGlIds[] = {0,0};\n    GLuint vertexShaderGlId = 0;\n    GLuint shaderProgramGlId = 0;\n    if (fixSDLconsole()) {\n        return errno;\n    }\n    if (SDL_Init(SDL_INIT_VIDEO) != 0) {\n        error_at_line(1,0,__FILE__,__LINE__,\"Unable to initialize SDL: %s\",SDL_GetError());\n        goto error;\n    }\n    printGLVersionNumber();\n\n    window = SDL_CreateWindow(\"Window Title\",SDL_WINDOWPOS_UNDEFINED,SDL_WINDOWPOS_UNDEFINED,640,640,SDL_WINDOW_OPENGL);\n    if (window == NULL) {\n        error_at_line(0,0,__FILE__,__LINE__,\"Could not create window: %s\", SDL_GetError());\n        goto error;\n    }\n    context = SDL_GL_CreateContext(window);\n    if (context == NULL) {\n        error_at_line(0,0,__FILE__,__LINE__,\"Could not create OpenGL context: %s\", SDL_GetError());\n        goto error;\n    }\n\n    glViewport(0,0,640,640);checkGlError(error);\n    glClearColor(.9f,.9f,.9f,1.f);checkGlError(error);\n    glEnableClientState(GL_VERTEX_ARRAY);checkGlError(error);\n    glEnableClientState(GL_COLOR_ARRAY);checkGlError(error);\n\n    float vertices[] = {\n        -.5f,0.f,0.f,\n        0.f,.5f,0.f,\n        0.f,-.5f,0.f,\n        0.f,.5f,0.f,\n        .5f,.5f,0.f,\n        0.f,0.f,0.f\n    };\n    float colors[] = {\n        1.f,0.f,0.f,//red\n        .5f,0.f,0.f,//red\n        0.f,1.f,0.f,//green\n        0.f,.5f,0.f,//green\n        0.f,0.f,1.f,//blue\n        0.f,0.f,.5f//blue\n    };\n    glGenBuffers(2, &amp;verticesGlIds);checkGlError(error);\n\n    glBindBuffer(GL_ARRAY_BUFFER, verticesGlIds[0]);checkGlError(error);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);checkGlError(error);\n\n    glBindBuffer(GL_ARRAY_BUFFER, verticesGlIds[1]);checkGlError(error);\n    glBufferData(GL_ARRAY_BUFFER,sizeof(colors),colors, GL_STATIC_DRAW);checkGlError(error);\n\n    char *vertexShader =\n        \"#version 120\\n\"\\\n        \"attribute vec3 aPos;\\n\"\\\n        \"uniform float i;\\n\"\\\n        \"void main() {\\n\"\\\n        \"gl_FrontColor=gl_Color;\\n\"\\\n        \"gl_Position = vec4(aPos.x+i/2,aPos.y,aPos.z,1.0);\\n\"\\\n        \"}\\n\";\n    vertexShaderGlId = glCreateShader(GL_VERTEX_SHADER);checkGlError(error);\n    if (vertexShaderGlId == 0) {error_at_line(0,0,__FILE__,__LINE__,\"vertex shader could not be created\");goto error;}\n    glShaderSource(vertexShaderGlId, 1, &amp;vertexShader, NULL);checkGlError(error);\n    glCompileShader(vertexShaderGlId);checkGlError(error);\n    {\n        GLint success;\n        glGetShaderiv(vertexShaderGlId, GL_COMPILE_STATUS, &amp;success);checkGlError(error);\n        if (success == GL_FALSE) {\n            char infoLog[512];\n            glGetShaderInfoLog(vertexShaderGlId, 512, NULL, infoLog);checkGlError(error);\n            error_at_line(0,0,__FILE__,__LINE__,\"Vertex Shader problem: %s\", infoLog);\n            goto error;\n        }\n    }\n\n    shaderProgramGlId = glCreateProgram();checkGlError(error);\n    if (shaderProgramGlId == 0) {error_at_line(0,0,__FILE__,__LINE__,\"shader program could not be created\");goto error;}\n    glAttachShader(shaderProgramGlId, vertexShaderGlId);checkGlError(error);\n    glLinkProgram(shaderProgramGlId);checkGlError(error);\n    {\n        int success;\n        glGetProgramiv(shaderProgramGlId, GL_LINK_STATUS, &amp;success);checkGlError(error);\n        if (!success) {\n            char infoLog[512];\n            glGetProgramInfoLog(shaderProgramGlId, 512, NULL, infoLog);checkGlError(error);\n            error_at_line(0,0,__FILE__,__LINE__,\"Shader program problem: %s\", infoLog);\n        }\n    }\n\n    glDeleteShader(vertexShaderGlId);checkGlError(error);\n\n    GLint iLocation = glGetUniformLocation(shaderProgramGlId, \"i\");checkGlError(error);\n    if (iLocation == -1) {error_at_line(0,0,__FILE__,__LINE__,\"uniform i not found in shader\");goto error;}\n    error_at_line(0,0,__FILE__,__LINE__,\"iLocation: %d\", iLocation);\n\n    for (int frame = 0; frame &lt; 100; ++frame) {\n        glClear(GL_COLOR_BUFFER_BIT);checkGlError(error);\n        glUseProgram(shaderProgramGlId);checkGlError(error);\n\n        glBindBuffer(GL_ARRAY_BUFFER, verticesGlIds[0]);    checkGlError(error);\n        glVertexPointer(3,GL_FLOAT,0,0);    checkGlError(error);\n        glBindBuffer(GL_ARRAY_BUFFER, verticesGlIds[1]);    checkGlError(error);\n        glColorPointer(3,GL_FLOAT,0,0); checkGlError(error);\n        glUniform1f(iLocation, (float) (frame%2));  checkGlError(error);\n        glDrawArrays(GL_TRIANGLES, 0,sizeof(vertices)/sizeof(float)/3); checkGlError(error);\n        glBindBuffer(GL_ARRAY_BUFFER, 0);   checkGlError(error);\n        SDL_GL_SwapWindow(window);\n        SDL_Delay(100);\n    }\n    glDeleteProgram(shaderProgramGlId);\n    glDeleteShader(vertexShaderGlId);\n    glDeleteBuffers(sizeof(verticesGlIds)/sizeof(GLuint), verticesGlIds);\n    SDL_GL_DeleteContext(context);\n    SDL_Delay(3000);\n    SDL_DestroyWindow(window);\n    SDL_Quit();\n    return EXIT_SUCCESS;\n    error:\n    glDeleteProgram(shaderProgramGlId);\n    glDeleteShader(vertexShaderGlId);\n    glDeleteBuffers(sizeof(verticesGlIds)/sizeof(GLuint), verticesGlIds);\n    if (context != NULL) SDL_GL_DeleteContext(context);\n    if (window != NULL) SDL_DestroyWindow(window);\n    SDL_Quit();\n    return EXIT_FAILURE;\n}\n#if defined(__WINDOWS__)\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd) {\n    char *argv[1] = {(char *) 0};\n    return main(0, argv);\n}\n#endif\n</code></pre>\n\n<p>note that I am not familiar with OpenGL's extension function loading issues and routines such as SDL's <code>SDL_GL_LoadLibrary</code> and <code>SDL_GL_GetProcAddress</code> I just manually define the method signatures at the top of the file and import GL through the linker.  I don't expect this to be an issue but it is the only issue, I am aware of, that I haven't looked into, that may be causing my problems.</p>\n"}, {"tags": ["c++", "c", "cmake"], "answers": [{"tags": [], "owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "is_accepted": false, "score": 0, "last_activity_date": 1537946060, "creation_date": 1537946060, "answer_id": 52512014, "question_id": 52509667, "link": "https://stackoverflow.com/questions/52509667/pass-compile-options-directly-bypassing-cmakelists-txt/52512014#52512014", "title": "Pass compile options directly (bypassing CMakeLists.txt)", "body": "<p>You can use the <code>configure_file</code> command together with <code>#cmakedefine01</code> like so:</p>\n\n<p>(contents of <code>configure.h.in</code>)</p>\n\n<pre><code>#cmakedefine01 MY_DEFINE\n</code></pre>\n\n<p>(in your CMakeLists.txt)</p>\n\n<pre><code>configure_file(configure.h.in configure.h @ONLY)\n</code></pre>\n\n<p>This will result in a <code>configure.h</code> in your build directory with the appropriate <code>#define</code> set. See the <a href=\"https://cmake.org/cmake/help/latest/command/configure_file.html\" rel=\"nofollow noreferrer\">configure_file documentation</a> for a second example.</p>\n\n<p>You can also use the CMake <code>option</code> command to expose the available options.\nIn your case, that would be:</p>\n\n<pre><code>option(MY_DEFINE \"This configures whether you print HERE or THERE\" OFF)\n</code></pre>\n"}], "owner": {"reputation": 3305, "user_id": 3177701, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d6a5a78ca3891e4fe752260bd61634ab?s=128&d=identicon&r=PG&f=1", "display_name": "Rufus", "link": "https://stackoverflow.com/users/3177701/rufus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537946060, "creation_date": 1537933927, "question_id": 52509667, "link": "https://stackoverflow.com/questions/52509667/pass-compile-options-directly-bypassing-cmakelists-txt", "title": "Pass compile options directly (bypassing CMakeLists.txt)", "body": "<p>Given the code</p>\n\n<pre><code>int main(int argc, char** argv)\n{\n#ifdef MY_DEFINE\n    printf(\"HERE\\n\");\n#else\n    printf(\"THERE\\n\");\n#endif\n}\n</code></pre>\n\n<p>To toggle <code>HERE</code> <code>THERE</code> behavior, I need the following in my `CMakeLists.txt</p>\n\n<pre><code>IF (${MY_DEFINE} MATCHES 1) # I want to remove these lines\n    add_compile_options(-DMY_DEFINE)\nENDIF(${MY_DEFINE} MATCHES 1) # Up to here\n</code></pre>\n\n<p>Then, I can</p>\n\n<p><code>cmake -DMY_DEFINE=1</code> to get <code>HERE</code></p>\n\n<p><code>cmake -DMY_DEFINE=0</code> to get <code>THERE</code></p>\n\n<p>This all seems a bit redundant...  Is it possible to remove those few lines in my CMakeLists.txt and still be able to get </p>\n\n<p><code>HERE</code> with something like <code>cmake -DMY_DEFINE=1</code></p>\n\n<p><code>THERE</code> with just <code>cmake</code> or <code>cmake -DMY_DEFINE=0</code>?</p>\n"}, {"tags": ["c", "arrays", "pointers", "language-lawyer", "dereference"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1537934988, "post_id": 52509651, "comment_id": 91959643, "body": "Array name decays to a pointer in many (though not all) contexts, but it&#39;s not the same as the pointer. You discovered one case where they differ: the type of <code>&amp;array</code> is a pointer to an array, not a pointer to a pointer. Another one is that, in general, <code>sizeof(ptr) != sizeof(array)</code>."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1537935242, "post_id": 52509651, "comment_id": 91959704, "body": "The warning looks clear to me: what gets passed to <code>ptrptr</code> in the last case is not, as you seem to believe, a <code>uint32_t*</code>, but a <code>uint32_t (*)[1]</code> - a pointer to an array of <code>uint32_t</code>, of length 1. It&#39;s also not clear what you mean by &quot;silently&quot; - you are getting a warning, aren&#39;t you?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 3, "creation_date": 1537938874, "post_id": 52509651, "comment_id": 91960694, "body": "An array is <i>not</i> a pointer, and a pointer is <i>not</i> an array. However, an array when accessed is converted to a pointer to the first element except when it is the operand of the <code>sizeof</code> operator, the <code>_Alignof</code> operator, or the unary <code>&amp;</code> operator, or is a <i>string literal used to initialize an array</i>. <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.2.1p3\" rel=\"nofollow noreferrer\">C11 Standard - 6.3.2.1 Other Operands - Lvalues, arrays, and function designators(p3)</a>"}], "answers": [{"tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 3, "last_activity_date": 1537935676, "creation_date": 1537935676, "answer_id": 52509900, "question_id": 52509651, "link": "https://stackoverflow.com/questions/52509651/dereference-local-array-in-c/52509900#52509900", "title": "dereference local array in C", "body": "<blockquote>\n  <p>The question then is, why is C silently passing a pointer (<code>uint32_t*</code>) instead of a pointer to a pointer (<code>uint32_t**</code>) when I try to dereference an array?</p>\n</blockquote>\n\n<ul>\n<li><p>It isn't.</p></li>\n<li><p>C is passing a pointer to an array of one uint32_t (<code>uint32_t(*)[1]</code>).</p></li>\n<li><p>It's a pointer to an array of one uint32_t, because it was an array of one uint32_t, and you got a pointer to it.</p></li>\n<li><p>It's not silent. You get a compiler warning saying \"hey, this is the wrong type of pointer!\". What did you think this is?</p>\n\n<pre><code>test.c: In function \u2018main\u2019:\ntest.c:24:9: warning: passing argument 1 of \u2018ptrptr\u2019 from incompatible pointer type [-Wincompatible-pointer-types]\n  ptrptr(&amp;array);\n     ^\ntest.c:5:6: note: expected \u2018uint32_t ** {aka unsigned int **}\u2019 but argument is of type \u2018uint32_t (*)[1] {aka unsigned int (*)[1]}\u2019\n void ptrptr(uint32_t** dptr)\n</code></pre></li>\n<li><p>You aren't dereferencing an array. You're making a pointer to an array, converting it to the wrong pointer type, and dereferencing that.</p></li>\n<li><p>The reason you this gives you the number 1 is because a pointer to an array actually points to the same address as a pointer to the first thing in the array. Though, it's a different type of pointer, which means things like <code>++</code> work differently, but then you're converting it to the same type of pointer so your code doesn't notice.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1537943896, "creation_date": 1537943896, "answer_id": 52511417, "question_id": 52509651, "link": "https://stackoverflow.com/questions/52509651/dereference-local-array-in-c/52511417#52511417", "title": "dereference local array in C", "body": "<blockquote>\n  <p>The question then is, why is C silently passing a pointer ( uint32_t*) instead of a pointer to a pointer (uint32_t**) when I try to dereference an array?</p>\n</blockquote>\n\n<p>It isn't silent, it gave you a warning. The C standard does not mention the terms \"errors\" and \"warnings\", but speaks of diagnostic messages. To follow the C standard, it is sufficient if the compiler shows a diagnostic message to the programmer.</p>\n\n<p>If you want an error instead of a warning upon C standard violations with gcc or clang, you must compile with <code>-std=c11 -pedantic-errors</code>. </p>\n\n<p>As for why the code isn't correct, <code>&amp;array</code> gives the address of the array in the form of an array pointer, <code>uint32_t(*)[1]</code>. This type is not compatible with <code>uint32_t**</code>. What will happen if you run the program despite it containing a C standard constraint violation isn't specified: it is undefined behavior. There is no <em>guarantee</em> of a seg fault or crash, those are just two of many potential outcomes of undefined behavior.</p>\n"}], "owner": {"reputation": 546, "user_id": 3775425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fcc7fd866fdae54e9883025ca1e88b6?s=128&d=identicon&r=PG&f=1", "display_name": "aprad046", "link": "https://stackoverflow.com/users/3775425/aprad046"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 52509900, "answer_count": 2, "score": 0, "last_activity_date": 1537943896, "creation_date": 1537933764, "question_id": 52509651, "link": "https://stackoverflow.com/questions/52509651/dereference-local-array-in-c", "title": "dereference local array in C", "body": "<p>From my understanding of C, you could treat a pointer variable and an array variable as equivalent, since they are both pointers ultimately (one to the local function stack, the other to any random point in memory).</p>\n\n<p>I normally pass a pointer to a pointer (e.g. <code>char ** pvar</code>) when I need to return a pointer, so I can see how it makes little sense to pass it back to a dereferenced local array, since you can't change the position of a variable.</p>\n\n<p>My expectation would be that if I try this, the compiler would let me do it, and then segfault or crash when I try to set the returning pointer value.</p>\n\n<p>However, when trying to dereference an array type (&amp;array), the compiler helpfully generates a warning about using incompatible types, then it passes the  pointer to the array, essentially losing one level of indirection from the receiving function's point of view.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid ptrptr(uint32_t** dptr)\n{\n    printf(\"%x, %x\\n\",  dptr, *dptr);\n}\n\nvoid oneptr(uint32_t* ptr)\n{\n    printf(\"%08x, %x\\t\",  ptr, *ptr);\n    ptrptr(&amp;ptr);\n}\n\nint main()\n{\n    uint32_t array[] = {1};\n    uint32_t *ptr = calloc(1, sizeof( uint32_t));\n    ptr[0] = 3;\n    oneptr(ptr);    /* OK, passes an (uint32_t *)  */\n    oneptr(array);  /* OK, passes an (uint32_t *)  */\n    ptrptr(&amp;ptr);   /* OK, passes an (uint32_t **) */\n    ptrptr(&amp;array); /* ??, passes an (uint32_t *)  */\n    return 0;\n}\n</code></pre>\n\n<p>Compiling it gives me the warning</p>\n\n<pre><code>cc     test.c   -o test\ntest.c: In function \u2018main\u2019:\ntest.c:24:9: warning: passing argument 1 of \u2018ptrptr\u2019 from incompatible pointer type [-Wincompatible-pointer-types]\n  ptrptr(&amp;array);\n     ^\ntest.c:5:6: note: expected \u2018uint32_t ** {aka unsigned int **}\u2019 but argument is of type \u2018uint32_t (*)[1] {aka unsigned int (*)[1]}\u2019\n void ptrptr(uint32_t** dptr)\n      ^~~~~~\n0061a008, 3     7ebfa144, 61a008\n7ebfa154, 1     7ebfa144, 7ebfa154\n7ebfa150, 61a008\n7ebfa154, 1\n</code></pre>\n\n<p>I get the same result when I use gcc, clang and cl to compile it, so I'm fairly confident that this is not a compiler bug. The question then is, why is C silently passing a pointer ( <code>uint32_t*</code>) instead of a pointer to a pointer (<code>uint32_t**</code>) when I try to dereference an array?</p>\n"}, {"tags": ["c", "macos", "gcc", "terminal"], "comments": [{"owner": {"reputation": 63, "user_id": 1172932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b3288f0936530fe8495aa3aadd944f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1172932/matt"}, "edited": false, "score": 6, "creation_date": 1537933941, "post_id": 52509602, "comment_id": 91959422, "body": "You can check the search paths of gcc using <code>echo &quot;#include &lt;a.h&gt;&quot; | gcc -v -x c -</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1537936186, "post_id": 52509602, "comment_id": 91959926, "body": "Very often, <code>xocde-select --install</code> is the correct solution.  Which o/s did you upgrade to?  Mojave 10.14?  Which XCode have you got installed?  10.0 or another version?"}, {"owner": {"reputation": 3258, "user_id": 7661005, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0c49d2077073823b91fa1ccc82fa0d7a?s=128&d=identicon&r=PG&f=1", "display_name": "Maxxx", "link": "https://stackoverflow.com/users/7661005/maxxx"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1537936235, "post_id": 52509602, "comment_id": 91959943, "body": "@JonathanLeffler Mojave 10.14, I&#39;ve installed the latest xcode from the app store version 10.0"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1537937139, "post_id": 52509602, "comment_id": 91960163, "body": "OK; me too.  However, both the system <code>&#47;usr&#47;bin&#47;gcc</code> and system <code>&#47;usr&#47;bin&#47;clang</code> are working for me. (I seem to have a problem with my home-built GCC 8.2.0, but that&#39;s tangential to your problem.)  (Version: <code>Apple LLVM version 10.0.0 (clang-1000.11.45.2) Target: x86_64-apple-darwin18.0.0</code> for both.)  But the previous installation of the command line tools and headers seems to be OK.  Hmmm\u2026I&#39;m going to have to think.  I just finished activating Mojave (it wasn&#39;t ready when I first commented; it is now; two different Macs, one upgraded, one not)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1537937384, "post_id": 52509602, "comment_id": 91960247, "body": "Have you tried running the main XCode GUI interface?  It may install some stuff for you and clean up?  I did that after installing XCode 10.0, but a week or more ago, long before upgrading to Mojave."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1537939391, "post_id": 52509602, "comment_id": 91960869, "body": "OK; I&#39;ve done a bit of comparison, and my Mojave machine has no <code>&#47;usr&#47;include</code> at all, yet <code>&#47;usr&#47;bin&#47;clang</code> is able to compile OK.  A header (<code>_stdio.h</code>, with leading underscore) was in my old <code>&#47;usr&#47;include</code>; it is missing now (hence my problem with GCC 8.2.0).  I ran <code>xcode-select --install</code> and it said &quot;xcode-select: note: install requested for command line developer tools&quot; and then ran GUI stuff to get licence agreement and it downloaded and installed them \u2014 or so it claimed.  I then ran XCode GUI (again \u2014 command-space, xcode, return) and it said it needed to install some more stuff\u2026"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1537940050, "post_id": 52509602, "comment_id": 91961114, "body": "\u2026and still no <code>&#47;usr&#47;include</code>.  Grrrr!  But I can compile with <code>&#47;usr&#47;bin&#47;clang</code> and <code>&#47;usr&#47;bin&#47;gcc</code> \u2014 and the <code>-v</code> option suggests they&#39;re using <code>InstalledDir: &#47;Applications&#47;Xcode.app&#47;Contents&#47;Developer&#47;Toolchains&#47;XcodeD&zwnj;&#8203;efault.xctoolchain&#47;u&zwnj;&#8203;sr&#47;bin</code>.  I don&#39;t know what&#39;s going on here \u2014 sorry for the torrent of &quot;as it happens&quot; commentary which isn&#39;t getting to an answer."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1537944116, "post_id": 52509602, "comment_id": 91962760, "body": "Time passes \u2014 I&#39;ve just had the automatic updater inform me that there&#39;s a new version of XCode available and should it install it.  I said &quot;Yes&quot;.  Maybe it fixes this problem."}, {"owner": {"reputation": 3258, "user_id": 7661005, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0c49d2077073823b91fa1ccc82fa0d7a?s=128&d=identicon&r=PG&f=1", "display_name": "Maxxx", "link": "https://stackoverflow.com/users/7661005/maxxx"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 40, "creation_date": 1537946418, "post_id": 52509602, "comment_id": 91963866, "body": "@JonathanLeffler I&#39;ve found a way. If we are using XCode 10, you will notice that if you navigate to /usr in the Finder, you will not see a folder called &#39;include&#39; anymore which is why the terminal complains of the absence of the header files which is contained inside the &#39;include&#39; folder. In this release statement, <a href=\"https://developer.apple.com/documentation/xcode_release_notes/xcode_10_release_notes\" rel=\"nofollow noreferrer\">developer.apple.com/documentation/xcode_release_notes/&hellip;</a> (you navigate to /Library/Developer/CommandLineTools/Packages/macOS_SDK_heade&zwnj;&#8203;rs_for_macOS_10.14.p&zwnj;&#8203;kg and run that package to have the &#39;include&#39; folder installed). Then you should be good to go."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1537947075, "post_id": 52509602, "comment_id": 91964247, "body": "When all else fails, read the manual!  Or the release notes.  I&#39;m not dreadfully surprised to find Apple wanting to turn their backs on the Unix heritage.  I am disappointed.  If they&#39;re careful, they could drive me away.  Thank you for the information; I will experiment with it later (after catching a few hours shut-eye)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 17, "creation_date": 1537974340, "post_id": 52509602, "comment_id": 91981336, "body": "Having installed the package (<code>open &#47;Library&#47;Developer&#47;CommandLineTools&#47;Packages&#47;macOS_SDK_heade&zwnj;&#8203;rs_for_macOS_10.14.p&zwnj;&#8203;kg</code> at the command line), I have <code>&#47;usr&#47;include</code> again, and my GCC 8.2.0 works once more.  Thanks for the pointer; well done on finding it.  I suggest you write up the answer as there&#39;ll probably be other people running into the problem."}, {"owner": {"reputation": 2038, "user_id": 1851286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703908f1fadd02fe86f0a713fa674325?s=128&d=identicon&r=PG", "display_name": "Oleksii Kyslytsyn", "link": "https://stackoverflow.com/users/1851286/oleksii-kyslytsyn"}, "edited": false, "score": 0, "creation_date": 1568877610, "post_id": 52509602, "comment_id": 102416203, "body": "Installation CommandLineTools &quot;macOS_SDK_headers_for_macOS_10.14&quot; helps to solve the case for c99 compiler unsupportability during compilations."}], "answers": [{"comments": [{"owner": {"reputation": 3258, "user_id": 7661005, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0c49d2077073823b91fa1ccc82fa0d7a?s=128&d=identicon&r=PG&f=1", "display_name": "Maxxx", "link": "https://stackoverflow.com/users/7661005/maxxx"}, "edited": false, "score": 5, "creation_date": 1538040300, "post_id": 52530212, "comment_id": 92006480, "body": "ah thanks for writing this. Much appreciated. Cheers!"}, {"owner": {"reputation": 341, "user_id": 8183516, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c68736dde5eadf868d276a2b1b65b76a?s=128&d=identicon&r=PG&f=1", "display_name": "budekatude", "link": "https://stackoverflow.com/users/8183516/budekatude"}, "edited": false, "score": 6, "creation_date": 1538515345, "post_id": 52530212, "comment_id": 92167361, "body": "Solved it for me!!! Thanks so much for taking the time to write this up!"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 3, "creation_date": 1538933588, "post_id": 52530212, "comment_id": 92309126, "body": "It would just be great if Apple could settle with one approach to update the header files instead of coming up with something different <b>every</b> time the OS gets updated. Ideally, the headers should just be installed when they were installed but that is clearly too much to ask...  Thank you Jonathan: that solved the problem for me."}, {"owner": {"reputation": 1528, "user_id": 2624770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a99c43476bd24ccb35d3143cc21777a2?s=128&d=identicon&r=PG", "display_name": "keithpjolley", "link": "https://stackoverflow.com/users/2624770/keithpjolley"}, "edited": false, "score": 0, "creation_date": 1539263716, "post_id": 52530212, "comment_id": 92444983, "body": "I can&#39;t figure out if Apple is trying to be more like Sun or like Microsoft when they do stuff like this."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 8, "creation_date": 1541197662, "post_id": 52530212, "comment_id": 93147765, "body": "<b><i>GRUMP!!!</i></b>  Things have changed again with the 10.14.1 update \u2014 or, at least, they seem to have changed again.  For me, it seems that the o/s update blew away <code>&#47;usr&#47;include</code>, and the package listed in the answer above isn&#39;t present in <code>&#47;Library&#47;Developer&#47;CommandLineTools&#47;Packages&#47;macOS_SDK_heade&zwnj;&#8203;rs_for_macOS_10.14.p&zwnj;&#8203;kg</code> and <code>xcode-select --install</code> says that the command line tools currently aren&#39;t available."}, {"owner": {"reputation": 141, "user_id": 2504891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78fdaa3160404c1b095cc220941360b2?s=128&d=identicon&r=PG", "display_name": "Vesal", "link": "https://stackoverflow.com/users/2504891/vesal"}, "edited": false, "score": 2, "creation_date": 1541453348, "post_id": 52530212, "comment_id": 93215344, "body": "After downloading the command line tools from here: <a href=\"https://developer.apple.com/download/more/\" rel=\"nofollow noreferrer\">developer.apple.com/download/more</a> (requires login with apple ID), this finally worked for me."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 141, "user_id": 2504891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78fdaa3160404c1b095cc220941360b2?s=128&d=identicon&r=PG", "display_name": "Vesal", "link": "https://stackoverflow.com/users/2504891/vesal"}, "edited": false, "score": 1, "creation_date": 1541459875, "post_id": 52530212, "comment_id": 93217797, "body": "<a href=\"https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/52530212?noredirect=1#comment93147765_52530212\"><b><i>UnGrump!!!</i></b></a> \u2014 See the new section in the answer about downloading CLT; thanks, @Vesal, for providing the missing link.  Now my Mojave 10.14.1 machine is back in business again \u2014 and I&#39;m willing to upgrade my other machine to 10.14.1 too."}, {"owner": {"user_type": "does_not_exist", "display_name": "user246672"}, "edited": false, "score": 22, "creation_date": 1546255306, "post_id": 52530212, "comment_id": 94810932, "body": "Fcking Apple. They can&#39;t just leave things that work, they have to move things, add steps and create churn."}, {"owner": {"reputation": 15767, "user_id": 2457, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/c1cbf5f896e05660e2b78b1b89e9befd?s=128&d=identicon&r=PG", "display_name": "Adam Lindberg", "link": "https://stackoverflow.com/users/2457/adam-lindberg"}, "edited": false, "score": 7, "creation_date": 1547490661, "post_id": 52530212, "comment_id": 95202623, "body": "In the hope that search engines will find this answer, the above instructions solved a <code>fatal error: bits&#47;ctype_base.h: No such file or directory: #include &lt;bits&#47;ctype_base.h&gt;</code> when compiling GCC 7.4.0 using libstdc++ on Mojave for me"}, {"owner": {"reputation": 3654, "user_id": 8034782, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UefIj.png?s=128&g=1", "display_name": "aravind_reddy", "link": "https://stackoverflow.com/users/8034782/aravind-reddy"}, "edited": false, "score": 0, "creation_date": 1550590599, "post_id": 52530212, "comment_id": 96319775, "body": "after installing the command line tools and installing gcc from conda worked for  me thanks a ton"}, {"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 5, "creation_date": 1551718311, "post_id": 52530212, "comment_id": 96733514, "body": "This line <code>open &#47;Library&#47;Developer&#47;CommandLineTools&#47;Packages&#47;macOS_SDK_heade&zwnj;&#8203;rs_for_macOS_10.14.p&zwnj;&#8203;kg</code> saved me. I was deep in a rats nest with <code>llvm</code> and <code>readline</code> trying to compile <code>crystal</code> and then having my <code>ruby</code> environment not work, and this brought me back from the edge of extinction. Thank you."}, {"owner": {"reputation": 178, "user_id": 5108156, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CoetNTNttQU/AAAAAAAAAAI/AAAAAAAAFBE/GMvDVinxbH4/photo.jpg?sz=128", "display_name": "Gourav Mahapatra", "link": "https://stackoverflow.com/users/5108156/gourav-mahapatra"}, "edited": false, "score": 0, "creation_date": 1551803663, "post_id": 52530212, "comment_id": 96770042, "body": "This worked for me!!! I have been scouring my computer and the internet to find these missing headers!!! Phew. Thanks a ton."}, {"owner": {"reputation": 882, "user_id": 3097454, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/2V4D2.jpg?s=128&g=1", "display_name": "Nick Gallimore", "link": "https://stackoverflow.com/users/3097454/nick-gallimore"}, "reply_to_user": {"reputation": 178, "user_id": 5108156, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CoetNTNttQU/AAAAAAAAAAI/AAAAAAAAFBE/GMvDVinxbH4/photo.jpg?sz=128", "display_name": "Gourav Mahapatra", "link": "https://stackoverflow.com/users/5108156/gourav-mahapatra"}, "edited": false, "score": 0, "creation_date": 1554991119, "post_id": 52530212, "comment_id": 97959783, "body": "Awesome. This should be in more than just this place on the internet. @GouravMahapatra"}, {"owner": {"reputation": 882, "user_id": 3097454, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/2V4D2.jpg?s=128&g=1", "display_name": "Nick Gallimore", "link": "https://stackoverflow.com/users/3097454/nick-gallimore"}, "reply_to_user": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 0, "creation_date": 1554991137, "post_id": 52530212, "comment_id": 97959799, "body": "@JoshuaPinter where did you find this command? I spent a week searching for this."}, {"owner": {"reputation": 171, "user_id": 7319568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bPwRp.jpg?s=128&g=1", "display_name": "Harsh Patel", "link": "https://stackoverflow.com/users/7319568/harsh-patel"}, "edited": false, "score": 0, "creation_date": 1555785258, "post_id": 52530212, "comment_id": 98225398, "body": "Hi @JonathanLeffler I just tried your approach to solve the problem, but even with <code>MacOS 10.14.4</code> and <code>Xcode 10.2.1</code>, it did not worked.! So I took first approach of downloading the CLT package from Apple developer site and installed according to your guidance. Now it says ` /usr/include/Availability.h:497:18: error: missing binary operator before token &quot;(&quot; `  which is I guess issue because of c++17.   Can you please help.  You can reproduce results by installing <a href=\"https://github.com/PyYoshi/cChardet\" rel=\"nofollow noreferrer\">cchardet</a> package."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1555809812, "post_id": 52530212, "comment_id": 98229825, "body": "On one of my two machines (work and home), when I upgraded to Xcode 10.2.1 (on macOS 10.14.4), I had to rerun <code>open &#47;Library&#47;Developer&#47;CommandLineTools&#47;Packages&#47;macOS_SDK_heade&zwnj;&#8203;rs_for_macOS_10.14.p&zwnj;&#8203;kg</code> because the directory <code>&#47;usr&#47;include</code> was missing after the install.  IIRC, on that machine, I kicked off the update manually when something suggested the update was available.  On the other machine, I didn&#39;t have to start the update manually (it was complete by the time I looked), but I also still had <code>&#47;usr&#47;include</code> left in place."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1555810224, "post_id": 52530212, "comment_id": 98229874, "body": "I&#39;m not sure what those observations tell us except that the behaviour is not simple or 100% consistent (which is frustrating for everyone).  I was very glad I had my answer to copy the <code>open</code> command from \u2014 I&#39;d&#39;ve upvoted myself if it was allowed (it isn&#39;t, so I didn&#39;t).  I&#39;ve downloaded the cChardet 2.0.0 source.  It doesn&#39;t give installation instructions AFAICS, so I&#39;ve no idea how I&#39;m supposed to compile it.  It isn&#39;t autoconfigurable \u2014 and I don&#39;t run setup.py or similar names since I don&#39;t know what they do and I therefore don&#39;t trust them (and I don&#39;t want to read those scripts)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1555810742, "post_id": 52530212, "comment_id": 98229940, "body": "I&#39;ve done some poking around; I see other people have had some problems on macOS 10.14.4.  One of the closed issues says &quot;it works&quot; and gives a whole bunch of steps.  It looks like you need <code>uchardet</code> as well as <code>cChardet</code> and you may need <code>pyenv</code> or some other Python software around (there was some <code>brew</code> involved).  At this stage, I have no clue what&#39;s up.  You should either add an issue in the cChardet or uchardet projects, or consider asking a question here on SO with appropriate tags.  I don&#39;t have the context to help, and it isn&#39;t clear that this question deals with the problem you face."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 171, "user_id": 7319568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bPwRp.jpg?s=128&g=1", "display_name": "Harsh Patel", "link": "https://stackoverflow.com/users/7319568/harsh-patel"}, "edited": false, "score": 1, "creation_date": 1555811024, "post_id": 52530212, "comment_id": 98229965, "body": "@HarshPatel: the previous three comments are aimed at you \u2014 I forgot to add the @ designation.  AFAICS, you&#39;re saying that you can run the compiler, but maybe there&#39;s a problem with a header file?  Have you looked at the <code>Availability.h</code> header around line 497 to see what&#39;s up?  I see: <code>497 #if __has_include(&lt;AvailabilityProhibitedInternal.h&gt;)</code>.  It hasn&#39;t yet caused me grief.  I note that cChardet 2.1.4 doesn&#39;t include build instructions either.  I&#39;m sorely tempted to create an issue about &quot;Please add an INSTALL file (or equivalent) that outlines the install process and prerequisites&quot;."}, {"owner": {"reputation": 2038, "user_id": 1851286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703908f1fadd02fe86f0a713fa674325?s=128&d=identicon&r=PG", "display_name": "Oleksii Kyslytsyn", "link": "https://stackoverflow.com/users/1851286/oleksii-kyslytsyn"}, "edited": false, "score": 0, "creation_date": 1568877618, "post_id": 52530212, "comment_id": 102416209, "body": "Installation CommandLineTools &quot;macOS_SDK_headers_for_macOS_10.14&quot; helps to solve the case for c99 compiler unsupportability during compilations"}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1569604145, "post_id": 52530212, "comment_id": 102664100, "body": "Apple is absolutely ridiculous with those issues; almost every time I upgrade XCode I have to browse the internet to find how to get my good ol&#39; gcc working again!"}, {"owner": {"reputation": 629, "user_id": 1102214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443f3a0d245fa5200c43182325937f2c?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1102214/andrew"}, "edited": false, "score": 2, "creation_date": 1570565964, "post_id": 52530212, "comment_id": 102951076, "body": "As of Xcode 11.1, it appears the <code>&#47;usr&#47;include</code> directory is indeed wiped out, and the <code>macOS_SDK_headers_for_macOS_10.14.pkg</code> file used to regenerate it has been removed (as the Xcode 10.0 release notes warned).  Thanks, Apple!  <i>sigh</i>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 629, "user_id": 1102214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443f3a0d245fa5200c43182325937f2c?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1102214/andrew"}, "edited": false, "score": 1, "creation_date": 1570567106, "post_id": 52530212, "comment_id": 102951564, "body": "@Andrew: yes \u2014 see the &quot;Catalina&quot; version of this question which I created (and provisionally answered) yesterday.  I am downloading XCode 11.1 to my Catalina machine now, but the 11.0 version is similar to what you say for 11.1."}, {"owner": {"reputation": 61, "user_id": 6272172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sG7y49PJhTU/AAAAAAAAAAI/AAAAAAAAAN0/b7NtpMkJpf4/photo.jpg?sz=128", "display_name": "Peter Edwards", "link": "https://stackoverflow.com/users/6272172/peter-edwards"}, "edited": false, "score": 0, "creation_date": 1575889369, "post_id": 52530212, "comment_id": 104704936, "body": "On Catalina, I managed to get perl module Text::Levenshtein::XS to compile by setting C_INCLUDE_PATH environment variable to point at XCode 11 header directory  $ C_INCLUDE_PATH=/Applications/Xcode.app/Contents/Developer/Pl&zwnj;&#8203;atforms/MacOSX.platf&zwnj;&#8203;orm/Developer/SDKs/M&zwnj;&#8203;acOSX.sdk/System/Lib&zwnj;&#8203;rary/Perl/5.18/darwi&zwnj;&#8203;n-thread-multi-2leve&zwnj;&#8203;l/CORE make"}, {"owner": {"reputation": 886, "user_id": 5270873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a614a9ea58bfa521cab97811b0cd8c8?s=128&d=identicon&r=PG&f=1", "display_name": "f0nzie", "link": "https://stackoverflow.com/users/5270873/f0nzie"}, "edited": false, "score": 0, "creation_date": 1599255587, "post_id": 52530212, "comment_id": 112728700, "body": "I was having problems installing <code>git2r</code> in a brand new macOS Mojave 10.14.6 installation. Following the steps in @JonathanLeffler post helped me fix the error: <code>configure: error: cannot run C compiled programs.</code>. I used <code>clang7</code> and <code>gfortran-6.1</code>"}, {"owner": {"reputation": 791, "user_id": 4747937, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d9d99088c98489a7e0f718631b9e82fc?s=128&d=identicon&r=PG&f=1", "display_name": "kevlarr", "link": "https://stackoverflow.com/users/4747937/kevlarr"}, "reply_to_user": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 1, "creation_date": 1614785240, "post_id": 52530212, "comment_id": 117491817, "body": "@JoshuaPinter &quot;this brought me back from the edge of extinction&quot; was the best and perhaps most personally relevant comment I&#39;ve seen on SO"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 274, "last_activity_date": 1570566228, "last_edit_date": 1570566228, "creation_date": 1538027270, "answer_id": 52530212, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/52530212#52530212", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<h2>TL;DR</h2>\n\n<p>Make sure you have downloaded the latest 'Command Line Tools' package and run this from a terminal (command line):</p>\n\n<pre><code>open /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg\n</code></pre>\n\n<hr>\n\n<p><em>For some information on Catalina, see <a href=\"https://stackoverflow.com/questions/58278260/cant-compile-a-c-program-on-a-mac-after-upgrading-to-catalina-10-15/58278392#58278392\">Can't compile a C program on a Mac after upgrading to Catalina 10.15</a>.</em></p>\n\n<hr>\n\n<p><sup><em>Extracting a semi-coherent answer from rather extensive comments\u2026</em></sup></p>\n\n<h3>Preamble</h3>\n\n<p>Very often, <code>xcode-select --install</code> has been the correct solution, but it does not seem to help this time.  Have you tried running the main Xcode GUI interface? It may install some extra software for you and clean up. I did that after installing Xcode 10.0, but a week or more ago, long before upgrading to Mojave.</p>\n\n<p>I observe that if your GCC is installed in <code>/usr/local/bin</code>, you probably aren't using the GCC from Xcode; that's normally installed in <code>/usr/bin</code>.</p>\n\n<p>I too have updated to macOS 10.14 Mojave and Xcode 10.0. However, both the system <code>/usr/bin/gcc</code> and system <code>/usr/bin/clang</code> are working for me (<code>Apple LLVM version 10.0.0 (clang-1000.11.45.2) Target: x86_64-apple-darwin18.0.0</code> for both.)  I have a problem with my home-built GCC 8.2.0 not finding headers in <code>/usr/include</code>, which is parallel to your problem with <code>/usr/local/bin/gcc</code> not finding headers either.</p>\n\n<p>I've done a bit of comparison, and my Mojave machine has no <code>/usr/include</code> at all, yet <code>/usr/bin/clang</code> is able to compile OK. A header (<code>_stdio.h</code>, with leading underscore) was in my old <code>/usr/include</code>; it is missing now (hence my problem with GCC 8.2.0). I ran <code>xcode-select --install</code> and it said \"<code>xcode-select: note: install requested for command line developer tools</code>\" and then ran a GUI installer which showed me a licence which I agreed to, and it downloaded and installed the command line tools \u2014 or so it claimed.</p>\n\n<p>I then ran Xcode GUI (command-space, Xcode, return) and it said it needed to install some more software, but still no <code>/usr/include</code>. But I can compile with <code>/usr/bin/clang</code> and <code>/usr/bin/gcc</code> \u2014 and the <code>-v</code> option suggests they're using </p>\n\n<pre><code>InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n</code></pre>\n\n<h3>Working solution</h3>\n\n<p>Then <a href=\"https://stackoverflow.com/users/7661005/maxxx\">Maxxx</a> <a href=\"https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/52530212#comment91963866_52509602\">noted</a>:</p>\n\n<blockquote>\n  <p>I've found a way. If we are using Xcode 10, you will notice that if you navigate to the <code>/usr</code> in the Finder, you will not see a folder called 'include' any more, which is why the terminal complains of the absence of the header files which is contained inside the 'include' folder. In the <a href=\"https://developer.apple.com/documentation/xcode_release_notes/xcode_10_release_notes\" rel=\"noreferrer\">Xcode 10.0 Release Notes</a>, it says there is a package:</p>\n\n<pre><code>/Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg \n</code></pre>\n  \n  <p>and you should install that package to have the <code>/usr/include</code> folder installed. Then you should be good to go.</p>\n</blockquote>\n\n<p>When all else fails, read the manual or, in this case, the release notes. I'm not dreadfully surprised to find Apple wanting to turn their backs on their Unix heritage, but I am disappointed. If they're careful, they could drive me away. Thank you for the information.</p>\n\n<p>Having installed the package using the following command at the command line, I have <code>/usr/include</code> again, and my GCC 8.2.0 works once more.</p>\n\n<pre><code>open /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg\n</code></pre>\n\n<h3>Downloading Command Line Tools</h3>\n\n<p>As <a href=\"https://stackoverflow.com/users/2504891/vesal\">Vesal</a> points out in a valuable <a href=\"https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/52530212?noredirect=1#comment93215344_52530212\">comment</a>, you need to download the Command Line Tools package for Xcode 10.1 on Mojave 10.14, and you can do so from:</p>\n\n<ul>\n<li><a href=\"https://developer.apple.com/download/more/\" rel=\"noreferrer\">https://developer.apple.com/download/more/</a></li>\n</ul>\n\n<p>You need to login with an Apple ID to be able to get the download.  When you've done the download, install the Command Line Tools package.  Then install the headers as described in the section 'Working Solution'.</p>\n\n<p>This worked for me on Mojave 10.14.1.  I must have downloaded this before, but I'd forgotten by the time I was answering this question.</p>\n\n<h3>Upgrade to Mojave 10.14.4 and Xcode 10.2</h3>\n\n<p>On or about 2019-05-17, I updated to Mojave 10.14.4, and the Xcode 10.2 command line tools were also upgraded (or Xcode 10.1 command line tools were upgraded to 10.2).  The <code>open</code> command shown above fixed the missing headers.  There may still be adventures to come with upgrading the main Xcode to 10.2 and then re-reinstalling the command line tools and the headers package.</p>\n\n<h3>Upgrade to Xcode 10.3 (for Mojave 10.14.6)</h3>\n\n<p>On 2019-07-22, I got notice via the App Store that the upgrade to Xcode 10.3 is available and that it includes SDKs for iOS 12.4, tvOS 12.4, watchOS 5.3 and macOS Mojave 10.14.6.  I installed it one of my 10.14.5 machines, and ran it, and installed extra components as it suggested, and it seems to have left <code>/usr/include</code> intact.</p>\n\n<p>Later the same day, I discovered that macOS Mojave 10.14.6 was available too (System Preferences \u27f6 Software Update), along with a Command Line Utilities package IIRC (it was downloaded and installed automatically).  Installing the o/s update did, once more, wipe out <code>/usr/include</code>, but the <code>open</code> command at the top of the answer reinstated it again.  The date I had on the file for the <code>open</code> command was 2019-07-15.</p>\n\n<h3>Upgrade to XCode 11.0 (for Catalina 10.15)</h3>\n\n<p>The upgrade to XCode 11.0 (\"includes Swift 5.1 and SDKs for iOS 13, tvOS 13, watchOS 6 and macOS Catalina 10.15\") was released 2019-09-21.  I was notified of 'updates available', and downloaded and installed it onto machines running macOS Mojave 10.14.6 via the App Store app (updates tab) without problems, and without having to futz with <code>/usr/include</code>.  Immediately after installation (before having run the application itself), I tried a recompilation and was told:</p>\n\n<blockquote>\n  <p>Agreeing to the Xcode/iOS license requires admin privileges, please run \u201csudo xcodebuild -license\u201d and then retry this command.</p>\n</blockquote>\n\n<p>Running that (<code>sudo xcodebuild -license</code>) allowed me to run the compiler.  Since then, I've run the application to install extra components it needs; still no problem.  It remains to be seen what happens when I upgrade to Catalina itself \u2014 but my macOS Mojave 10.14.6 machines are both OK at the moment (2019-09-24).</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 1392190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3d4e7eeeb3dee14f3ffed20b2b2143?s=128&d=identicon&r=PG", "display_name": "bitbrane", "link": "https://stackoverflow.com/users/1392190/bitbrane"}, "is_accepted": false, "score": 3, "last_activity_date": 1548024769, "last_edit_date": 1548024769, "creation_date": 1546923472, "answer_id": 54085433, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/54085433#54085433", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<p>Be sure to check Xcode Preferences -> Locations.</p>\n\n<p>The Command Line Tools I had selected was for the previous version of Xcode (8.2.1 instead of 10.1)</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 3756803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4c6ed2ac023a4f86f5997c032617c15?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3756803/felix"}, "edited": false, "score": 0, "creation_date": 1555180577, "post_id": 54737537, "comment_id": 98023720, "body": "Nothing worked, but this one did. Thank you very much!!"}, {"owner": {"reputation": 479, "user_id": 2233648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XbLW3.jpg?s=128&g=1", "display_name": "Davis Dulin", "link": "https://stackoverflow.com/users/2233648/davis-dulin"}, "edited": false, "score": 2, "creation_date": 1555607897, "post_id": 54737537, "comment_id": 98178491, "body": "wickedsickbrothnx"}], "tags": [], "owner": {"reputation": 641, "user_id": 7788050, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LTKS47YTNHE/AAAAAAAAAAI/AAAAAAAABBU/99S618smtr8/photo.jpg?sz=128", "display_name": "Nigel", "link": "https://stackoverflow.com/users/7788050/nigel"}, "is_accepted": false, "score": 33, "last_activity_date": 1550436338, "creation_date": 1550436338, "answer_id": 54737537, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/54737537#54737537", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<p>After trying every answer I could find here and online, I was still getting errors for some missing headers. When trying to compile pyRFR, I was getting errors about <code>stdexcept</code> not being found, which apparently was not installed in <code>/usr/include</code> with the other headers. However, I found where it was hiding in Mojave and added this to the end of my <code>~/.bash_profile</code> file:</p>\n\n<p><code>export CPATH=/Library/Developer/CommandLineTools/usr/include/c++/v1</code></p>\n\n<p>Having done that, I can now compile pyRFR and other C/C++ programs. According to <code>echo | gcc -E -Wp,-v -</code>, gcc was looking in the old location for these headers (without the <code>/c++/v1</code>), but not the new location, so adding that to CFLAGS fixed it.</p>\n"}, {"tags": [], "owner": {"reputation": 731, "user_id": 1386067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8614c1bebefdd0a606173aabb74c7deb?s=128&d=identicon&r=PG", "display_name": "Sergio Pulgarin", "link": "https://stackoverflow.com/users/1386067/sergio-pulgarin"}, "is_accepted": false, "score": 1, "last_activity_date": 1566914272, "last_edit_date": 1566914272, "creation_date": 1552520812, "answer_id": 55152817, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/55152817#55152817", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<p>I was having this issue and <strong>nothing worked</strong>. I ran <code>xcode-select --install</code> and also installed <code>/Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg</code>.</p>\n\n<p><strong>BACKGROUND</strong></p>\n\n<p>Since I was having issues with <em>App Store</em> on a new laptop, I was forced to download the <strong>Xcode <em>Beta</em></strong> installer from the Apple website to install Xcode outside <em>App Store</em>. So I only had <strong>Xcode <em>Beta</em></strong> installed.</p>\n\n<p><strong>SOLUTION</strong></p>\n\n<p>This, (I think), was making <code>clang</code> to not find the <code>SDKROOT</code> directory <code>/Applications/Xcode.app/....</code>, because there is no <code>Beta</code> in the path, or maybe <strong>Xcode <em>Beta</em></strong> simply doesn't install it (I don't know).\nTo fix the issue, I had to remove <strong>Xcode <em>Beta</em></strong> and resolve the <em>App Store</em> issue to install the release version.</p>\n\n<p><strong>tldr;</strong></p>\n\n<p>If you have <strong>Xcode <em>Beta</em></strong>, try cleaning up everything and installing the release version before trying out the solutions that are working for other people.</p>\n"}, {"tags": [], "owner": {"reputation": 2441, "user_id": 1902237, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ImNMK.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1902237/dan"}, "is_accepted": false, "score": 0, "last_activity_date": 1552534487, "creation_date": 1552534487, "answer_id": 55154577, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/55154577#55154577", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<p>As Jonathan Leffler points out above, the macOS_SDK_headers.pkg file is no longer there in Xcode 10.1.</p>\n\n<p>What worked for me was to do <code>brew upgrade</code> and the updates of gcc and/or whatever else homebrew did behind the scenes resolved the path problems.</p>\n"}, {"tags": [], "owner": {"reputation": 5657, "user_id": 178808, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/39365999823f3455bcf1ac8b6aae8603?s=128&d=identicon&r=PG", "display_name": "mlo55", "link": "https://stackoverflow.com/users/178808/mlo55"}, "is_accepted": false, "score": 3, "last_activity_date": 1553329335, "creation_date": 1553329335, "answer_id": 55311940, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/55311940#55311940", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<p>Had similar problems as the OP</p>\n\n<h3>Issue</h3>\n\n<blockquote>\n  <p>cat hello.c</p>\n</blockquote>\n\n<pre><code>#include &lt;stdlib.h&gt;\nint main() { exit(0); }\n</code></pre>\n\n<blockquote>\n  <p>clang hello.c</p>\n</blockquote>\n\n<pre><code>/usr/local/include/stdint.h:2:10: error: #include nested too deeply\netc...\n</code></pre>\n\n<h3>Attempted fix</h3>\n\n<p>I installed the latest version of XCode, however, release notes indicated the file mentioned in the previous fix, from Jonathan here, was no longer available.</p>\n\n<pre><code>open /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg\n</code></pre>\n\n<p>Details here\n<a href=\"https://developer.apple.com/documentation/xcode_release_notes/xcode_10_release_notes\" rel=\"nofollow noreferrer\">https://developer.apple.com/documentation/xcode_release_notes/xcode_10_release_notes</a> , under the <em>New Features</em> section.</p>\n\n<hr>\n\n<h3>Solution that worked for me...</h3>\n\n<p>Using details in this comment, <a href=\"https://github.com/SOHU-Co/kafka-node/issues/881#issuecomment-396197724\" rel=\"nofollow noreferrer\">https://github.com/SOHU-Co/kafka-node/issues/881#issuecomment-396197724</a></p>\n\n<p>I found that <code>brew doctor</code> reported I had unused includes in my <code>/usr/local/</code> folder. </p>\n\n<p>So to fix, I used the command provided by user <a href=\"https://github.com/SOHU-Co/kafka-node/issues/881#issuecomment-396197724\" rel=\"nofollow noreferrer\">HowCrazy</a> , to find the unused includes and move them to a temporary folder.</p>\n\n<p>Repeated here...</p>\n\n<pre><code>mkdir /tmp/includes\nbrew doctor 2&gt;&amp;1 | grep \"/usr/local/include\" | awk '{$1=$1;print}' | xargs -I _ mv _ /tmp/includes\n</code></pre>\n\n<p>After running the scripts, the include file issue was gone. \nnb: I commented on this issue <a href=\"https://github.com/golang/go/issues/27921#issuecomment-475849323\" rel=\"nofollow noreferrer\">here</a> too.</p>\n"}, {"comments": [{"owner": {"reputation": 592, "user_id": 3256499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKj38.jpg?s=128&g=1", "display_name": "Demven Weir", "link": "https://stackoverflow.com/users/3256499/demven-weir"}, "edited": false, "score": 1, "creation_date": 1566923083, "post_id": 55588705, "comment_id": 101804404, "body": "This saved me. Thanks a lot!"}], "tags": [], "owner": {"reputation": 121, "user_id": 8747242, "user_type": "registered", "profile_image": "https://graph.facebook.com/1240485771/picture?type=large", "display_name": "James Rinkevich", "link": "https://stackoverflow.com/users/8747242/james-rinkevich"}, "is_accepted": false, "score": 12, "last_activity_date": 1566914338, "last_edit_date": 1566914338, "creation_date": 1554799877, "answer_id": 55588705, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/55588705#55588705", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<p>The problem is that Xcode, especially Xcode 10.x, has not installed everything, so ensure the command line tools are installed, type this in a terminal shell:</p>\n\n<blockquote>\n  <blockquote>\n    <p>xcode-select --install</p>\n  </blockquote>\n</blockquote>\n\n<p>also start Xcode and ensure all the required installation is installed ( you should get prompted if it is not.)\nand since Xcode 10 does not install the full Mac OS SDK, run the installer at</p>\n\n<blockquote>\n  <blockquote>\n    <p>/Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg</p>\n  </blockquote>\n</blockquote>\n\n<p>as this package is not installed by Xcode 10.</p>\n"}, {"tags": [], "owner": {"reputation": 353, "user_id": 2626642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed32d6f40803060373545c7003d1fa29?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/2626642/rob"}, "is_accepted": false, "score": 8, "last_activity_date": 1555952061, "creation_date": 1555952061, "answer_id": 55797977, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/55797977#55797977", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<p>I've found great solution and explanation at this <a href=\"https://github.com/neovim/neovim/issues/9050#issuecomment-429674155\" rel=\"noreferrer\">GitHub comment</a>.\nThe trick:</p>\n\n<pre><code>make SDKROOT=`xcrun --show-sdk-path` MACOSX_DEPLOYMENT_TARGET=\n</code></pre>\n\n<p>Did the job.</p>\n"}, {"comments": [{"owner": {"reputation": 329, "user_id": 7224879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ee2QD.jpg?s=128&g=1", "display_name": "Bruno Ambrozio", "link": "https://stackoverflow.com/users/7224879/bruno-ambrozio"}, "edited": false, "score": 0, "creation_date": 1571079388, "post_id": 58000319, "comment_id": 103113281, "body": "Excellent! After your steps, the <code>macOS_SDK_headers_for_macOS_10.14.pkg</code> get available, and the command <code>open &#47;Library&#47;Developer&#47;CommandLineTools&#47;Packages&#47;macOS_SDK_heade&zwnj;&#8203;rs_for_macOS_10.14.p&zwnj;&#8203;kg</code> did what was supposed to do. Thanks a million!!"}, {"owner": {"reputation": 75, "user_id": 43381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b582aba21f81bfc636af4ee2a2852d44?s=128&d=identicon&r=PG", "display_name": "rbieber", "link": "https://stackoverflow.com/users/43381/rbieber"}, "edited": false, "score": 3, "creation_date": 1574463597, "post_id": 58000319, "comment_id": 104255936, "body": "For me, the following worked:    <code>export CPATH=&#47;Applications&#47;Xcode.app&#47;Contents&#47;Developer&#47;Platforms&#47;M&zwnj;&#8203;acOSX.platform&#47;Devel&zwnj;&#8203;oper&#47;SDKs&#47;MacOSX10.1&zwnj;&#8203;5.sdk&#47;usr&#47;include</code>"}, {"owner": {"reputation": 1173, "user_id": 636131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e1aed91eff2177345412f485ffdecee?s=128&d=identicon&r=PG", "display_name": "Simeon G", "link": "https://stackoverflow.com/users/636131/simeon-g"}, "edited": false, "score": 0, "creation_date": 1580571396, "post_id": 58000319, "comment_id": 106144919, "body": "Thank you! I was stuck but this really worked for me with Mojave 10.4.6 and XCode 11.3.1"}, {"owner": {"reputation": 1451, "user_id": 2930836, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh4.googleusercontent.com/-hOD6KYRyIY4/AAAAAAAAAAI/AAAAAAAAfv0/9V13VHORoHk/photo.jpg?sz=128", "display_name": "igonejack", "link": "https://stackoverflow.com/users/2930836/igonejack"}, "edited": false, "score": 0, "creation_date": 1584195443, "post_id": 58000319, "comment_id": 107364809, "body": "Everytime Apple released a system update I have to fix this problem with Clion in different way."}], "tags": [], "owner": {"reputation": 371, "user_id": 1701245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8018d0a43616388b46566ba1fb8b1099?s=128&d=identicon&r=PG", "display_name": "Plattenschieber", "link": "https://stackoverflow.com/users/1701245/plattenschieber"}, "is_accepted": false, "score": 24, "last_activity_date": 1568838553, "creation_date": 1568838553, "answer_id": 58000319, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/58000319#58000319", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<p>When you</p>\n\n<ul>\n<li>updated to <code>Mojave 10.14.6</code></li>\n<li>your <code>/usr/include</code> was deleted again</li>\n<li>the package mentioned in @Jonathan-lefflers <a href=\"https://stackoverflow.com/a/52530212/1701245\">answer</a> doesn't exist anymore\n<code>The file /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg does not exist.</code> and</li>\n<li>Xcode complains that command line tools are already installed \n<code>xcode-select --install\nxcode-select: error: command line tools are already installed, use \"Software Update\" to install updates</code></li>\n</ul>\n\n<p>Then, what helped me recover the mentioned package, was deleting the whole <code>CommandLineTools</code> folder \n<code>(sudo) rm -rf /Library/Developer/CommandLineTools</code> and reinstall it <code>xcode-select --install</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "edited": false, "score": 0, "creation_date": 1593069447, "post_id": 58192406, "comment_id": 110651193, "body": "Which <code>pip</code> are you using? I think that could be the key problem."}], "tags": [], "owner": {"reputation": 7116, "user_id": 1394353, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/519ce8a904896c40b9a9e2d9a82e0d3c?s=128&d=identicon&r=PG", "display_name": "JL Peyret", "link": "https://stackoverflow.com/users/1394353/jl-peyret"}, "is_accepted": false, "score": 7, "last_activity_date": 1569965971, "last_edit_date": 1569965971, "creation_date": 1569964882, "answer_id": 58192406, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/58192406#58192406", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<p><strong>NOTE: \nThe following is likely highly contextual and time-limited before the switch/general availability of macos Catalina 10.15.  New laptop.\nI am writing this Oct 1st, 2019.</strong></p>\n\n<p>These specific circumstances are, I believe, what caused build problems for me.  They may not apply in most other cases.</p>\n\n<h2>Context:</h2>\n\n<ul>\n<li><p>macos 10.14.6 Mojave, Xcode 11.0, <strong>right before the launch of macos Catalina 10.15</strong>.  Newly purchased Macbook Pro.</p></li>\n<li><p>failure on <code>pip install psycopg2</code>, which is, basically, a Python package getting compiled from source.</p></li>\n<li><p>I have already carried out a number of the suggested adjustments in the answers given here.</p></li>\n</ul>\n\n<h2>My errors:</h2>\n\n<pre><code>pip install psycopg2\nCollecting psycopg2\n  Using cached https://files.pythonhosted.org/packages/5c/1c/6997288da181277a0c29bc39a5f9143ff20b8c99f2a7d059cfb55163e165/psycopg2-2.8.3.tar.gz\nInstalling collected packages: psycopg2\n  Running setup.py install for psycopg2 ... error\n    ERROR: Command errored out with exit status 1:\n     command: xxxx/venv/bin/python -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/private/var/folders/bk/_1cwm6dj3h1c0ptrhvr2v7dc0000gs/T/pip-install-z0qca56g/psycopg2/setup.py'\"'\"'; __file__='\"'\"'/private/var/folders/bk/_1cwm6dj3h1c0ptrhvr2v7dc0000gs/T/pip-install-z0qca56g/psycopg2/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' install --record /private/var/folders/bk/_1cwm6dj3h1c0ptrhvr2v7dc0000gs/T/pip-record-ef126d8d/install-record.txt --single-version-externally-managed --compile --install-headers xxx/venv/include/site/python3.6/psycopg2\n\n\n...\n/usr/bin/clang -Wno-unused-result -Wsign-compare -Wunreachable-code -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -pipe -Os -isysroot/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk -DPSYCOPG_VERSION=2.8.3 (dt dec pq3 ext lo64) -DPG_VERSION_NUM=90615 -DHAVE_LO64=1 -I/Users/jluc/kds2/py2/venv/include -I/opt/local/Library/Frameworks/Python.framework/Versions/3.6/include/python3.6m -I. -I/opt/local/include/postgresql96 -I/opt/local/include/postgresql96/server -c psycopg/psycopgmodule.c -o build/temp.macosx-10.14-x86_64-3.6/psycopg/psycopgmodule.o\n\n    clang: warning: no such sysroot directory: \n'/Applications/Xcode.app/Contents/Developer/Platforms\n                              \u274c\ud83d\udc47the real error\ud83d\udc47\u274c\n/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk' [-Wmissing-sysroot]\n    In file included from psycopg/psycopgmodule.c:27:\n    In file included from ./psycopg/psycopg.h:34:\n    /opt/local/Library/Frameworks/Python.framework/Versions/3.6/include/python3.6m/Python.h:25:10: fatal error: 'stdio.h' file not found\n                             \u274c\ud83d\udc46 what I thought was the error \ud83d\udc46\u274c\n    #include &lt;stdio.h&gt;\n             ^~~~~~~~~\n    1 error generated.\n\n    It appears you are missing some prerequisite to build the package \n\n\n</code></pre>\n\n<h3>What I did so far, without fixing anything:</h3>\n\n<ul>\n<li><code>xcode-select --install</code></li>\n<li>installed xcode</li>\n<li><code>open /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg</code></li>\n</ul>\n\n<p>Still the same error on stdio.h.</p>\n\n<p>which exists in a number of places:</p>\n\n<pre><code>(venv) jluc@bemyerp$ mdfind -name stdio.h\n/System/Library/Frameworks/Kernel.framework/Versions/A/Headers/sys/stdio.h\n/usr/include/_stdio.h\n/usr/include/secure/_stdio.h\n/usr/include/stdio.h  \u2705 \ud83d\udc48 I believe this is the one that's usually missing.\n                            but I have it.\n/usr/include/sys/stdio.h\n/usr/include/xlocale/_stdio.h\n</code></pre>\n\n<h3>So, let's go to that first directory <code>clang</code> is complaining about and look:</h3>\n\n<pre><code>(venv) jluc@gotchas$ cd /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs\n(venv) jluc@SDKs$ ls -l\ntotal 0\ndrwxr-xr-x  8 root  wheel  256 Aug 29 23:47 MacOSX.sdk\ndrwxr-xr-x  4 root  wheel  128 Aug 29 23:47 DriverKit19.0.sdk\ndrwxr-xr-x  6 root  wheel  192 Sep 11 04:47 ..\nlrwxr-xr-x  1 root  wheel   10 Oct  1 13:28 MacOSX10.15.sdk -&gt; MacOSX.sdk  \ud83d\udc48\ndrwxr-xr-x  5 root  wheel  160 Oct  1 13:34 .\n</code></pre>\n\n<p>Hah, we have a symlink for <strong>MacOSX10.15.sdk</strong>, but none for <strong>MacOSX10.14.sdk</strong>.  Here's my first <code>clang</code> error again:</p>\n\n<p><code>clang: warning: no such sysroot directory: '/Applications/Xcode.app/.../Developer/SDKs/MacOSX10.14.sdk' [-Wmissing-sysroot]</code></p>\n\n<p><strong>My guess is Apple jumped the gun on their xcode config and are already thinking they're on Catalina.  Since it's a new Mac, the old config for 10.14 is not in place.</strong></p>\n\n<h2>THE FIX:</h2>\n\n<p>Let's symlink 10.14 the same way as 10.15:</p>\n\n<p><code>ln -s MacOSX.sdk/ MacOSX10.14.sdk</code></p>\n\n<p>btw, if I go to that sdk directory, I find:</p>\n\n<pre><code>...\n./usr/include/sys/stdio.h\n./usr/include/stdio.h\n....\n</code></pre>\n\n<h2>OUTCOME:</h2>\n\n<p><code>pip install psycopg2</code> works.</p>\n\n<p>Note:  the actual pip install command made no reference to <strong>MacOSX10.14.sdk</strong>, that came at a later point, possibly by the Python installation mechanism introspecting the OS version. </p>\n"}, {"tags": [], "owner": {"reputation": 2808, "user_id": 3861691, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DQQwT.jpg?s=128&g=1", "display_name": "Matthew Barbara", "link": "https://stackoverflow.com/users/3861691/matthew-barbara"}, "is_accepted": false, "score": 0, "last_activity_date": 1570971749, "creation_date": 1570971749, "answer_id": 58363821, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/58363821#58363821", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<p><strong>apue.h</strong> dependency was still missing in my <code>/usr/local/include</code> after I managed to fix this problem on Mac OS Catalina following the <a href=\"https://stackoverflow.com/questions/58278260/cant-compile-a-c-program-on-a-mac-after-upgrading-to-catalina-10-15/58278392#58278392#answer-58349403\">instructions of this answer</a></p>\n\n<p>I downloaded the dependency manually <a href=\"https://gist.github.com/Batou99/913559\" rel=\"nofollow noreferrer\">from git</a> and placed it in <code>/usr/local/include</code></p>\n"}, {"comments": [{"owner": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "edited": false, "score": 0, "creation_date": 1593069327, "post_id": 58628718, "comment_id": 110651137, "body": "Shouldn\u2019t this be a comment?"}], "tags": [], "owner": {"reputation": 27, "user_id": 6821154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61794107f0bf81207880fa6e15e78300?s=128&d=identicon&r=PG&f=1", "display_name": "user6821154", "link": "https://stackoverflow.com/users/6821154/user6821154"}, "is_accepted": false, "score": -1, "last_activity_date": 1572449117, "creation_date": 1572449117, "answer_id": 58628718, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/58628718#58628718", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<p>@JL Peyret is right!</p>\n\n<p>if you macos 10.14.6 Mojave, Xcode 11.0+</p>\n\n<p>then </p>\n\n<p>cd /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs</p>\n\n<p>sudo ln -s MacOSX.sdk/ MacOSX10.14.sdk</p>\n"}, {"tags": [], "owner": {"reputation": 401, "user_id": 1972139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1064b07e0a4fbdf35e2322638fc0eca5?s=128&d=identicon&r=PG", "display_name": "Vladik Y", "link": "https://stackoverflow.com/users/1972139/vladik-y"}, "is_accepted": false, "score": 0, "last_activity_date": 1577302963, "creation_date": 1577302963, "answer_id": 59481374, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/59481374#59481374", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<p>I had the same issue with Golang (debugging with Goland) after migration. The only (ridiculous) thing that helped is renaming the following folder:</p>\n\n<pre><code>sudo mv /usr/local/include /usr/local/old_include\n</code></pre>\n\n<p>Apparently it is related to old files that homebrew installed and now broken.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 8091922, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Pp4FJxlEdvA/AAAAAAAAAAI/AAAAAAAAAFM/bDThk9aLQC4/photo.jpg?sz=128", "display_name": "Mak", "link": "https://stackoverflow.com/users/8091922/mak"}, "is_accepted": false, "score": 1, "last_activity_date": 1581698231, "creation_date": 1581698231, "answer_id": 60230293, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/60230293#60230293", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<p>I tried almost all the posted solutions and nothing worked for me. I use Mojave OS (10.14.6) and what finally worked for me (after removing and re-installing Xcode and CLTs and SDK headers):</p>\n\n<ol>\n<li>Install Clang v8 from <a href=\"https://cran.r-project.org/bin/macosx/tools/\" rel=\"nofollow noreferrer\">https://cran.r-project.org/bin/macosx/tools/</a></li>\n<li>Modify the following lines from ~/.R/Makevars file</li>\n</ol>\n\n<pre><code>CC=/usr/local/opt/llvm/bin/clang -fopenmp\nCXX=/usr/local/opt/llvm/bin/clang++\n</code></pre>\n\n<p>with</p>\n\n<pre><code>CC=/usr/local/clang8/bin/clang -fopenmp\nCXX=/usr/local/clang8/bin/clang++\n</code></pre>\n\n<p>Now R packages that rely on C compilers install successfully</p>\n"}, {"comments": [{"owner": {"reputation": 322, "user_id": 3334127, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ce69b0e97b320845a0955bf4e3ed0da7?s=128&d=identicon&r=PG", "display_name": "inthy", "link": "https://stackoverflow.com/users/3334127/inthy"}, "edited": false, "score": 0, "creation_date": 1605504707, "post_id": 63207834, "comment_id": 114660750, "body": "You&#39;re a life saver. Worked for me after updating to XCode 12.2"}, {"owner": {"reputation": 745, "user_id": 1817391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9888e981379290384413e11f526e713a?s=128&d=identicon&r=PG", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/1817391/aleksey"}, "edited": false, "score": 0, "creation_date": 1606748739, "post_id": 63207834, "comment_id": 115047797, "body": "Yeah, same here! Helped me after upgrading to XCode 12.2!"}, {"owner": {"reputation": 5366, "user_id": 1534182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febb583da7bcf5c93e52a73bf56e9f19?s=128&d=identicon&r=PG", "display_name": "Jongwook Choi", "link": "https://stackoverflow.com/users/1534182/jongwook-choi"}, "edited": false, "score": 0, "creation_date": 1608358681, "post_id": 63207834, "comment_id": 115564887, "body": "This is the only solution that works."}, {"owner": {"reputation": 322, "user_id": 3334127, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ce69b0e97b320845a0955bf4e3ed0da7?s=128&d=identicon&r=PG", "display_name": "inthy", "link": "https://stackoverflow.com/users/3334127/inthy"}, "edited": false, "score": 0, "creation_date": 1609240965, "post_id": 63207834, "comment_id": 115785789, "body": "XCode 12.3. Still working"}, {"owner": {"reputation": 1864, "user_id": 1846656, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/THqjQ.jpg?s=128&g=1", "display_name": "Bilal Ahmed Yaseen", "link": "https://stackoverflow.com/users/1846656/bilal-ahmed-yaseen"}, "edited": false, "score": 0, "creation_date": 1609755056, "post_id": 63207834, "comment_id": 115911927, "body": "path not found: Applications/Xcode.app"}, {"owner": {"reputation": 1598, "user_id": 1410221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/CW5Pu.jpg?s=128&g=1", "display_name": "HappyFace", "link": "https://stackoverflow.com/users/1410221/happyface"}, "reply_to_user": {"reputation": 1864, "user_id": 1846656, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/THqjQ.jpg?s=128&g=1", "display_name": "Bilal Ahmed Yaseen", "link": "https://stackoverflow.com/users/1846656/bilal-ahmed-yaseen"}, "edited": false, "score": 0, "creation_date": 1609756450, "post_id": 63207834, "comment_id": 115912476, "body": "@BilalAhmedYaseen You need to create the directory structure yourself (my own <code>ln</code> does this automatically)."}], "tags": [], "owner": {"reputation": 1598, "user_id": 1410221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/CW5Pu.jpg?s=128&g=1", "display_name": "HappyFace", "link": "https://stackoverflow.com/users/1410221/happyface"}, "is_accepted": false, "score": 6, "last_activity_date": 1596301239, "creation_date": 1596301239, "answer_id": 63207834, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave/63207834#63207834", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<p><code>ln -s /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk '/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.15.sdk'</code> might help you. It fixed my problem.</p>\n"}], "owner": {"reputation": 3258, "user_id": 7661005, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0c49d2077073823b91fa1ccc82fa0d7a?s=128&d=identicon&r=PG&f=1", "display_name": "Maxxx", "link": "https://stackoverflow.com/users/7661005/maxxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106932, "favorite_count": 99, "answer_count": 15, "score": 178, "last_activity_date": 1596301239, "creation_date": 1537933346, "last_edit_date": 1538025909, "question_id": 52509602, "link": "https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave", "title": "Can&#39;t compile C program on a Mac after upgrade to Mojave", "body": "<p>I have used the gcc command on the terminal to compile C programs but all of a sudden, after an update to my Mac's OS (to macOS 10.14 Mojave, and XCode 10.0), I started receiving the message:</p>\n\n<pre><code>test.c:8:10: fatal error: stdio.h: No such file or directory\n#include &lt;stdio.h&gt;\n         ^~~~~~~~~\ncompilation terminated.\n</code></pre>\n\n<p>I already have gcc installed as I can find it in <code>/usr/local/bin</code> and there really is a gcc in there. I tried running the same file on my other iMac and it worked without any issue. </p>\n\n<p>I tried running <code>xcode-select --install</code> and it already was installed, hence it didn't fix the issue I'm having now. I'm guessing that the path is messed up as it doesn't seem like it can find <code>gcc</code> after I started copying and pasting some commands from other resources to solve this issue.</p>\n\n<p>Would like some help on this.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 3, "creation_date": 1537932512, "post_id": 52509480, "comment_id": 91959079, "body": "You forgot to allocate memory."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1537932929, "post_id": 52509480, "comment_id": 91959189, "body": "Pointers by default doesn&#39;t point anywhere. You must explicitly make them point somewhere valid. I suggest you find some good beginners books to read."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 0, "last_activity_date": 1537932566, "creation_date": 1537932566, "answer_id": 52509513, "question_id": 52509480, "link": "https://stackoverflow.com/questions/52509480/segmentation-fault-when-creating-a-tree-c/52509513#52509513", "title": "Segmentation fault when creating a tree (C)", "body": "<p>When you dereference a pointer that doesn't have a valid pointer value, you produce undefined behaviour. Valid pointer values are values returned by memory allocation functions like <code>malloc()</code> and the addresses of other objects obtained by use of the address-of operator <code>&amp;</code>.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;  // malloc()\n\n// ...\n\nstruct node *m_node = malloc(sizeof(*m_node));\nm_node-&gt;value = 10;\nprintf(\"%d\\n\", m_node-&gt;value);\n\nstruct tree *m_tree = malloc(sizeof(*m_tree));\nm_tree-&gt;head = m_node;\nprintf(\"%d\\n\", m_tree-&gt;head-&gt;value);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 404, "user_id": 6028941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fc4c9a4bc47642e168dc2ca24d454a8?s=128&d=identicon&r=PG&f=1", "display_name": "Matt X", "link": "https://stackoverflow.com/users/6028941/matt-x"}, "edited": false, "score": 0, "creation_date": 1537958908, "post_id": 52509525, "comment_id": 91971414, "body": "Oh yeah. I completely forgot about this coming from c++"}, {"owner": {"reputation": 404, "user_id": 6028941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fc4c9a4bc47642e168dc2ca24d454a8?s=128&d=identicon&r=PG&f=1", "display_name": "Matt X", "link": "https://stackoverflow.com/users/6028941/matt-x"}, "edited": false, "score": 0, "creation_date": 1537959098, "post_id": 52509525, "comment_id": 91971540, "body": "So why don&#39;t I need to do this for my node struct?"}, {"owner": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "reply_to_user": {"reputation": 404, "user_id": 6028941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fc4c9a4bc47642e168dc2ca24d454a8?s=128&d=identicon&r=PG&f=1", "display_name": "Matt X", "link": "https://stackoverflow.com/users/6028941/matt-x"}, "edited": false, "score": 1, "creation_date": 1538094771, "post_id": 52509525, "comment_id": 92033137, "body": "You need to do that. If your code is same as what&#39;s been posted, it will give the segfalt with node struct too."}], "tags": [], "owner": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "is_accepted": true, "score": 1, "last_activity_date": 1537932686, "creation_date": 1537932686, "answer_id": 52509525, "question_id": 52509480, "link": "https://stackoverflow.com/questions/52509480/segmentation-fault-when-creating-a-tree-c/52509525#52509525", "title": "Segmentation fault when creating a tree (C)", "body": "<p>You've created a dangling pointer. Either <code>malloc()</code> a space, or assign it to address of a struct that's already created:</p>\n\n<pre><code>struct tree *m_tree=malloc(sizeof(struct tree)); // Either this\nstruct tree *m_tree=&amp;some_node;                  // Or this\n</code></pre>\n"}], "owner": {"reputation": 404, "user_id": 6028941, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fc4c9a4bc47642e168dc2ca24d454a8?s=128&d=identicon&r=PG&f=1", "display_name": "Matt X", "link": "https://stackoverflow.com/users/6028941/matt-x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 52509525, "answer_count": 2, "score": -1, "last_activity_date": 1537932686, "creation_date": 1537932274, "question_id": 52509480, "link": "https://stackoverflow.com/questions/52509480/segmentation-fault-when-creating-a-tree-c", "title": "Segmentation fault when creating a tree (C)", "body": "<p>I really don't understand why I am seg faulting here. This is the most simple code ever.</p>\n\n<p>So basically, I have this simple node struct</p>\n\n<pre><code>struct node {\n    int value;\n    struct node *left_child;\n    struct node *right_child;\n};\n</code></pre>\n\n<p>and when I test this node struct like this:</p>\n\n<pre><code>struct node *m_node;\nm_node-&gt;value = 10;\nprintf(\"%d\\n\", m_node-&gt;value);\n</code></pre>\n\n<p>Everything works fine here.</p>\n\n<p>Now, with this simple tree struct, things start breaking.</p>\n\n<pre><code>struct tree {\n    int size;\n    struct node *head;\n};\n</code></pre>\n\n<p>I try testing it like this:</p>\n\n<pre><code>struct tree *m_tree;\nm_tree-&gt;head = m_node;\nprintf(\"%d\\n\", m_tree-&gt;head-&gt;value);\n</code></pre>\n\n<p>And I get a seg fault. Any ideas?</p>\n"}, {"tags": ["c", "xcode", "gcc", "clang"], "comments": [{"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 1, "creation_date": 1537929891, "post_id": 52509131, "comment_id": 91958522, "body": "You need to put <code>FILE _iob[OPEN_MAX];</code> as a global variable into the <code>.c</code> file, the extern declaration in the header can be seen as sort of a forward declaration of a global variable.  You will have more problem though, because the functions <code>_fillbuf</code> and <code>_flushbuf</code> are also only forward-declared."}, {"owner": {"reputation": 1, "user_id": 9983267, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8hhQCpAcPOk/AAAAAAAAAAI/AAAAAAAAABc/F8LtLd1hMGI/photo.jpg?sz=128", "display_name": "Christian Orlando Ibarra Garci", "link": "https://stackoverflow.com/users/9983267/christian-orlando-ibarra-garci"}, "reply_to_user": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 0, "creation_date": 1538056270, "post_id": 52509131, "comment_id": 92016606, "body": "Ye man , I was missing the implementation on the array, i think is a newbie error. Thanks a lot for your help"}], "owner": {"reputation": 1, "user_id": 9983267, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8hhQCpAcPOk/AAAAAAAAAAI/AAAAAAAAABc/F8LtLd1hMGI/photo.jpg?sz=128", "display_name": "Christian Orlando Ibarra Garci", "link": "https://stackoverflow.com/users/9983267/christian-orlando-ibarra-garci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1537933636, "creation_date": 1537929169, "last_edit_date": 1537933636, "question_id": 52509131, "link": "https://stackoverflow.com/questions/52509131/xcode-undefined-symbols-for-architecture-x86-64-issue", "title": "Xcode Undefined symbols for architecture x86_64 issue", "body": "<p>I am trying to run a code from a C book on my mac using Xcode but I am having an issue when compile</p>\n\n<p>I have a header file with a structure for Files and a buffer for it but I have an error on a method implementation when i try to use the buffer variable.</p>\n\n<p>My header looks this way</p>\n\n<pre><code>#ifndef custio_h\n#define custio_h\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n\n#define     EOF (-1)\n#define     BUFSIZ 1024\n#define     OPEN_MAX 20 /* max #files open at once */\n\ntypedef struct _iobuf {\n    int cnt;        /* characters left */\n    char *ptr;      /* next character position */\n    char *base;     /* location of buffer */\n    int flag;       /* mode of file access */\n    int fd;         /* file descriptor */\n} FILE;\n\nextern FILE _iob[OPEN_MAX];\n\n#define stdin   (&amp;_iob[0])\n#define stdout  (&amp;_iob[1])\n#define stderr  (&amp;_iob[2])\n\nenum _flags {\n    _READ   = 01,   /* file open for reading */\n    _WRITE  = 02,   /* file open for writing */\n    _UNBUF  = 04,   /* file is unbuffered */\n    _EOF    = 010,  /* EOF has ocurred on this file */\n    _ERR    = 020   /* error ocurred on this file */\n};\n\nint _fillbuf(FILE *);\nint _flushbuf(int, FILE *);\nFILE *cfopen(char *, char *);\n\n#define feof(p)     (((p)-&gt;flag &amp; _EOF) != 0)\n#define ferror(p)   (((p)-&gt;flag &amp; _ERR) != 0)\n#define fileno(p)   ((p)-&gt;fd)\n\n#define getc(p)     (--(p)-&gt;cnt &gt;= 0 ? (unsigned char) *(p)-&gt;ptr++ : _fillbuf(p))\n#define putc(x,p)   (--(p)-&gt;cnt &gt;= 0 ? *(p)-&gt;ptr++ = (x) : _flushbuf((x),p))\n\n#define getchar()   getc(stdin)\n#define puchar(x)   putc((x), stdout)\n\n\n\n#endif /* custio_h */\n</code></pre>\n\n<p>And my implementation is this</p>\n\n<pre><code>#include \"custio.h\"\n#define PERMS 0666\n\n/* fopen: open file, return file pointer */\nFILE *cfopen(char *name, char *mode)\n{\n    int fd;\n    FILE *fp;\n\n    if (*mode != 'r' &amp;&amp; *mode != 'w' &amp;&amp; *mode != 'a')\n        return NULL;\n\n    for (fp = _iob; fp &lt; (_iob + OPEN_MAX); fp++)\n        if ((fp-&gt;flag &amp; (_READ | _WRITE)) == 0)\n            break; /* found free slot */\n\n    if (fp &gt;= _iob + OPEN_MAX) /* no free slots */\n        return NULL;\n\n    if (*mode == 'w')\n        fd = creat(name, PERMS);\n    else if (*mode == 'a') {\n        if ((fd = open(name, O_WRONLY, 0)) == -1)\n            fd = creat(name, PERMS);\n        long c = 10000000;\n        lseek(fd, c, 2);\n    } else\n        fd = open(name, O_RDONLY, 0);\n\n    if (fd == 1) /* could not access name */\n        return NULL;\n\n    fp-&gt;fd = fd;\n    fp-&gt;cnt = 0;\n    fp-&gt;base = NULL;\n    fp-&gt;flag = (*mode == 'r') ? _READ : _WRITE;\n\n    return fp;\n}\n</code></pre>\n\n<p>The lines where i use the _iob are the problem.</p>\n\n<p>the error says: \nUndefined symbols for architecture x86_64:\n  \"__iob\", referenced from:\n      _cfopen in custio.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)</p>\n"}, {"tags": ["c", "assembly", "x86-64"], "comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1537931637, "post_id": 52508999, "comment_id": 91958908, "body": "<a href=\"https://stackoverflow.com/questions/tagged/assembly\">assembly</a> must also go with the architecture. And the assembler doesn&#39;t give you <code>add     rax, rdx</code>, it&#39;s the compiler that emits that instruction. The assembler just assembles the human-readable instructions to machine code"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1537931864, "post_id": 52508999, "comment_id": 91958941, "body": "You don&#39;t understand how adding i to argv[1] gives &amp;argv[1][i]?"}, {"owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "edited": false, "score": 0, "creation_date": 1537932643, "post_id": 52508999, "comment_id": 91959118, "body": "I don&#39;t understand the confusion. You know that rdx+1 is the address of argv[1][1], and you know that rax contains i, so it should be clear that rdx+rax is the address of argv[1][i]. The next statement <code>movszx eax, byte ptr [rax]</code> loads the character at that address."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1537932754, "post_id": 52508999, "comment_id": 91959152, "body": "Compile with optimization enabled to get easier-to-understand code.  Like <code>gcc -Og</code> that keeps variables in registers and might do mild optimization, or <code>gcc -O3 -fno-tree-vectorize</code>, or <code>gcc -Os</code>.  See <a href=\"https://stackoverflow.com/q/38552116\">How to remove &quot;noise&quot; from GCC/clang assembly output?</a>.  This code is <i>not</i> adding <code>1</code> to a pointer, it&#39;s adding it to the dword <code>i</code>, and using <code>i</code> as an index.  It&#39;s weird that your compiler isn&#39;t using an indexed addressing mode like <code>movzx eax, byte ptr [rax+rdx]</code>.  Is this from MSVC?  It doesn&#39;t look like what anti-optimized <code>gcc -O0</code> would do."}, {"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1537932954, "post_id": 52508999, "comment_id": 91959196, "body": "The code isn&#39;t complete, there should be at least one <code>jmp</code>-family instruction, probably 2."}, {"owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "edited": false, "score": 0, "creation_date": 1537933466, "post_id": 52508999, "comment_id": 91959321, "body": "I want to comment on your terminology. It may be related to your confusion. Several times you say that a register &quot;points to the address of&quot; something. It is more precise to say that a register &quot;points to&quot; the thing or &quot;contains the address&quot; of the thing. Except when you really do mean that the register points to the address of the thing,"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7675968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0f14d93d9a81fce7691ec2c61e9e271?s=128&d=identicon&r=PG&f=1", "display_name": "IdkHowToRc", "link": "https://stackoverflow.com/users/7675968/idkhowtorc"}, "edited": false, "score": 0, "creation_date": 1537956632, "post_id": 52509732, "comment_id": 91970092, "body": "Thank you very much! :)"}], "tags": [], "owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "is_accepted": true, "score": 2, "last_activity_date": 1537947261, "last_edit_date": 1537947261, "creation_date": 1537934452, "answer_id": 52509732, "question_id": 52508999, "link": "https://stackoverflow.com/questions/52508999/why-am-i-adding-rax-and-rdx/52509732#52509732", "title": "Why am i adding rax and rdx?", "body": "<p>Oh, I finally figured out your confusion. At the point of the instruction in question, rax no longer contains argv; it was reloaded with the value of i.  The compiler is using an <code>add</code> instruction instead of an indexed addressing mode.</p>\n\n<p>eax is the lower 32 bits of rax. When eax is loaded, the value is zero-extended to 64 bits.</p>\n\n<p>And then <code>cdqe</code> sign-extends EAX into RAX, because <code>i</code> is a signed 32-bit integer that you're using to index a pointer.  The compiler could have simplified by loading with<br>\n<code>movsx rax, dword ptr [rbp-24]</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 7675968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0f14d93d9a81fce7691ec2c61e9e271?s=128&d=identicon&r=PG&f=1", "display_name": "IdkHowToRc", "link": "https://stackoverflow.com/users/7675968/idkhowtorc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1615, "favorite_count": 0, "accepted_answer_id": 52509732, "answer_count": 1, "score": 0, "last_activity_date": 1537947261, "creation_date": 1537928060, "last_edit_date": 1537931816, "question_id": 52508999, "link": "https://stackoverflow.com/questions/52508999/why-am-i-adding-rax-and-rdx", "title": "Why am i adding rax and rdx?", "body": "<p>This is a program that gets passed a String as input.</p>\n\n<p>I'm confused with the assembler code shown below, specifically line 6.\nThis is what i understood from my research:</p>\n\n<ul>\n<li><code>rbp-48</code> is a pointer that points to the stack address where <code>argv</code> is stored. (<code>argv</code> itself, is the address pointing to the start of the <code>argv</code> array)</li>\n<li>Now rax register stores the <code>argv</code> array address.</li>\n<li>We then add 8 bytes to rax. This means rax now points to the address of <code>argv[1]</code>. (I understand there is another address stored inside <code>argv[1]</code> that points to a string).</li>\n<li>We then access the value stored in argv[1] and store it in the rdx register. This means, rdx now points to the address were the string begins.</li>\n<li>We then move the [rbp-24] = i counter variable to the eax register.</li>\n<li>We then have an action cdqe which I believe it's not relevant.</li>\n</ul>\n\n<p>And now is were I get confused: If I wanted to access the first character in <code>argv[1]</code> and store it in eax register, I would expect assembler to do something like: </p>\n\n<pre><code>mov   eax, BYTE PTR [rdx]\n</code></pre>\n\n<p>And if I need to access the second character stored in argv[1] and store it in eax register, I would expect assembler to do something like:</p>\n\n<pre><code>mov   eax, BYTE PTR [rdx+1]\n</code></pre>\n\n<p>But instead, I see the compiler does the following:</p>\n\n<pre><code>add     rax, rdx\n</code></pre>\n\n<ul>\n<li>Adds the address in memory where the string begins to the address in memory were the address that points to the start of the string is stored, and saves this result in rax.</li>\n</ul>\n\n<p>I can not understand how does this instruction make rax point to any character in argv[1].</p>\n\n<p>Below is the C code and the assembler code corresponding to the loop's instructions:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[]) {\nint sum = 0;\nfor(int i = 0; i &lt; strlen(argv[1]); i ++){\n  sum += (int)argv[1][i];\n}\nreturn 0;\n}\n</code></pre>\n\n<p>Assembly</p>\n\n<pre><code>mov     rax, QWORD PTR [rbp-48]\nadd     rax, 8\nmov     rdx, QWORD PTR [rax]\nmov     eax, DWORD PTR [rbp-24]\ncdqe\nadd     rax, rdx\nmovzx   eax, BYTE PTR [rax]\nmovsx   eax, al\nadd     DWORD PTR [rbp-20], eax\nadd     DWORD PTR [rbp-24], 1\n</code></pre>\n"}, {"tags": ["c", "string"], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 2, "last_activity_date": 1537959926, "last_edit_date": 1537959926, "creation_date": 1537954108, "answer_id": 52514403, "question_id": 52508985, "link": "https://stackoverflow.com/questions/52508985/reading-strings-without-function/52514403#52514403", "title": "Reading strings without function", "body": "<pre><code>char str[20]=\"HELLO\";\n</code></pre>\n\n<p>The above is a <em>declaration</em> and also a <em>definition</em> of the identifier <code>str</code>, and has an <em>initializer</em>, <code>\"HELLO\"</code>. The C standard says about this <em>initialization</em>:</p>\n\n<blockquote>\n  <p>An initializer specifies the initial value stored in an object.</p>\n  \n  <p>An array of character type may be initialized by a character string literal or UTF\u22128 string\n  literal, optionally enclosed in braces. Successive bytes of the string literal (including the\n  terminating null character if there is room or if the array is of unknown size) initialize the\n  elements of the array.</p>\n</blockquote>\n\n<pre><code>char str[20];\nstr=\"HELLO\";\n</code></pre>\n\n<p>The first line here is again a <em>declaration</em> and also a <em>definition</em> of the identifier <code>str</code>, but without an <em>initializer</em>. The second line is a statement with an <em>assignment</em> expression. The <em>constraint</em> for an <em>assignment</em> is:</p>\n\n<blockquote>\n  <p>An assignment operator shall have a modifiable lvalue as its left operand.</p>\n</blockquote>\n\n<p>Regarding lvalues, arrays, \u2026:</p>\n\n<blockquote>\n  <p>A modifiable lvalue is an lvalue that\n  does not have array type, \u2026</p>\n</blockquote>\n\n<p>So, trying to assign to an array is a constraint violation.</p>\n"}], "owner": {"reputation": 1, "user_id": 10331736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fa9ebe43e67f532c8b47fc92ba6489?s=128&d=identicon&r=PG&f=1", "display_name": "Slycoder", "link": "https://stackoverflow.com/users/10331736/slycoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537959926, "creation_date": 1537927918, "last_edit_date": 1537956257, "question_id": 52508985, "link": "https://stackoverflow.com/questions/52508985/reading-strings-without-function", "title": "Reading strings without function", "body": "<pre><code>&gt;char str[20]=\"HELLO\"; \n</code></pre>\n\n<p>is correct, while </p>\n\n<pre><code>&gt;char str[20];\n&gt;\nstr=\"HELLO\"; \n</code></pre>\n\n<p>isn't. WHY? </p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 4852752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1efbd9a44e4f246711915575c8d435d3?s=128&d=identicon&r=PG&f=1", "display_name": "John E.", "link": "https://stackoverflow.com/users/4852752/john-e"}, "edited": false, "score": 0, "creation_date": 1537924863, "post_id": 52508627, "comment_id": 91957554, "body": "Thank you very much! Didn&#39;t know that I can do it this way."}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": true, "score": 2, "last_activity_date": 1537924641, "creation_date": 1537924641, "answer_id": 52508627, "question_id": 52508570, "link": "https://stackoverflow.com/questions/52508570/get-min-and-max-label-in-from-the-array-loop/52508627#52508627", "title": "Get Min and Max label in from the array loop", "body": "<pre><code>Point minmax = getMinMax(numbers);\nfor (int i = 0; i &lt; LENGTH; i++) {\n    printf(\"%d\\t\\t%d\\t\\t\\t%s\\t\\t\\t%s\\t\\t\\t%s\\n\",\n        i + 1,\n        numbers[i],\n        (isPrime(numbers[i]) ? \"Yes\" : \"No\"),\n        (isOddOrEven(numbers[i]) ? \"Odd\" : \"Even\"),\n        (numbers[i] == minmax.max ? \"Max\" : (numbers[i] == minmax.min ? \"Min\" : \"\"))\n    );\n}\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 4852752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1efbd9a44e4f246711915575c8d435d3?s=128&d=identicon&r=PG&f=1", "display_name": "John E.", "link": "https://stackoverflow.com/users/4852752/john-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 52508627, "answer_count": 1, "score": 1, "last_activity_date": 1537933772, "creation_date": 1537924096, "last_edit_date": 1537933772, "question_id": 52508570, "link": "https://stackoverflow.com/questions/52508570/get-min-and-max-label-in-from-the-array-loop", "title": "Get Min and Max label in from the array loop", "body": "<p>I am trying to find minimum and maximum values from the file. When the program reads the file, every value goes into <code>numbers[]</code> array. My goal is to display some information regarding each value in the array, here is the expected output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/eroVE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eroVE.png\" alt=\"enter image description here\"></a></p>\n\n<p>My program works fine, however I have a problem to display Max and Min labels in my <code>for loop</code>. Here my code:</p>\n\n<pre><code>typedef struct Points {\n  int min;\n  int max;\n} Point;\n\nint main(int argc, const char * argv[]) {\n  returnNumbersArray(\"numbers.txt\");\n\n  // Display output\n  printf(\"Sr.\\t\\tNumber\\t\\tPrime\\t\\tOdd/Even\\t\\tMin/Max\\n\");\n\n  for (int i = 0; i &lt; LENGTH; i++) {\n    printf(\"%d\\t\\t%d\\t\\t\\t%s\\t\\t\\t%s\\n\", i + 1,\n      numbers[i],\n      (isPrime(numbers[i]) ? \"Yes\":\"No\"),\n      (isOddOrEven(numbers[i]) ? \"Odd\":\"Even\"));\n  }\n\n\n  // Define Min and Max values\n  getMinMax(numbers);\n  printf(\"%d, %d\", point.max, point.min);\n\n  return 0;\n}\n\n// Return min and max value from the array.\nPoint getMinMax(int array[]) {\n  point.max = point.min = array[0];\n  for (int i = 1; i &lt; LENGTH; i++) {\n    if (array[i] &gt; point.max) {\n      point.max = array[i];\n    }\n    if (array[i] &lt; point.min) {\n      point.min = array[i];\n    }\n  }\n  return point;\n}\n</code></pre>\n\n<p><code>getMinMax(int array[])</code> works and I do get Min and Max values but I want to put a proper label inside my <code>for loop</code> in the <code>main</code> method and use the same approach as <code>isPrime(numbers[i]) ? \"Yes\":\"No\"</code>. Can someone please tell me what am I doing wrong or give an advice to solve this problem?</p>\n\n<p>My current output: </p>\n\n<p><a href=\"https://i.stack.imgur.com/j6Jwe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j6Jwe.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thank you for your time.</p>\n"}, {"tags": ["c", "matrix", "append"], "comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1537924715, "post_id": 52508538, "comment_id": 91957522, "body": "You should post this code here:  <a href=\"https://www.onlinegdb.com/\" rel=\"nofollow noreferrer\">onlinegdb.com</a>  You will notice three typos that prevent it from compiling.  If you fix those, and then edit your answer with the correct code, you&#39;ll have better luck getting an answer.  You can also read the help on how to debug while you&#39;re there."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1537925010, "post_id": 52508538, "comment_id": 91957571, "body": "Also, I find this code incomprehensible, but <code>Mem</code> is not a matrix of strings, but a matrix of characters.  So that&#39;s a fundamental flaw right there.  You also should <i>really</i> not fight that C-arrays are 0-based.  It will cause you nothing but problems."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1537927844, "post_id": 52508538, "comment_id": 91958063, "body": "<code>char elmt ...  Append(M,i,&amp;elmt);</code> is a call with a pointer of <b>1</b> <code>char</code>.    Yet <code>Append (MATRIX *M, indeks i, char * elmt) ...          strcat(elmt, appendix);</code> is looking for a place to store a <i>string</i>.  Not enough room."}, {"owner": {"reputation": 41, "user_id": 10260351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EaNchUVmnVM/AAAAAAAAAAI/AAAAAAAAA8E/4KUfAdYkhu8/photo.jpg?sz=128", "display_name": "eniruure", "link": "https://stackoverflow.com/users/10260351/eniruure"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1537928253, "post_id": 52508538, "comment_id": 91958159, "body": "Hi, @zzxyz . Thanks for pointing out! I notice the typos because previously the variable names were in my mother tongue and now I&#39;m trying to translate the variable names to english."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1537928359, "post_id": 52508538, "comment_id": 91958192, "body": "@eniruure - I figured as much.  It&#39;s a pretty well-asked question, overall."}, {"owner": {"reputation": 41, "user_id": 10260351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EaNchUVmnVM/AAAAAAAAAAI/AAAAAAAAA8E/4KUfAdYkhu8/photo.jpg?sz=128", "display_name": "eniruure", "link": "https://stackoverflow.com/users/10260351/eniruure"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1537929974, "post_id": 52508538, "comment_id": 91958548, "body": "@chux - So the flaw is that I create a matrix of char to store strings. Correct me if I&#39;m wrong. If so, I&#39;ll try to work it out some more and see if I can solve it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1537930323, "post_id": 52508538, "comment_id": 91958618, "body": "@eniruure A <code>char</code> can only save a string of <code>&quot;&quot;</code>.  Every other <i>string</i> requires more than 1 <code>char</code>.  Good luck."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1537933887, "post_id": 52508538, "comment_id": 91959412, "body": "Check out my answer here to a very similar problem:  <a href=\"https://stackoverflow.com/questions/49909386/use-array-annotation-with-pointers/49910273#49910273\" title=\"use array annotation with pointers\">stackoverflow.com/questions/49909386/&hellip;</a>"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1538071794, "post_id": 52508538, "comment_id": 92025496, "body": "@eniruure - Did you get this figured out?"}], "owner": {"reputation": 41, "user_id": 10260351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EaNchUVmnVM/AAAAAAAAAAI/AAAAAAAAA8E/4KUfAdYkhu8/photo.jpg?sz=128", "display_name": "eniruure", "link": "https://stackoverflow.com/users/10260351/eniruure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1537928544, "creation_date": 1537923845, "last_edit_date": 1537928544, "question_id": 52508538, "link": "https://stackoverflow.com/questions/52508538/c-create-appending-matrix", "title": "C - create appending matrix", "body": "<p>I don't exactly know if appending is the right term, but here's the problem explained:</p>\n\n<p>I want to create an <code>M</code>, which is let's say a <code>5*5</code> matrix of strings starting with an element (let's say the character <code>5</code>). The first row of the matrix will look like this:</p>\n\n<pre><code>51 52 53 54 55\n</code></pre>\n\n<p>After that I'll take the content of <code>M[1][1]</code> and 'append' it to the respective columns, creating the second row:</p>\n\n<pre><code> 51  52  53  54  55\n511 512 513 514 515\n</code></pre>\n\n<p>Then taking the content of <code>M[1][2]</code> to create the third row:</p>\n\n<pre><code> 51  52  53  54  55\n511 512 513 514 515\n521 522 523 524 525\n</code></pre>\n\n<p>At the end, <code>M</code> will look like this:</p>\n\n<pre><code> 51  52  53  54  55\n511 512 513 514 515\n521 522 523 524 525\n531 532 533 534 535\n541 542 543 544 545\n</code></pre>\n\n<p>If let's say the matrix is <code>7*7</code> then the 7th row will take the content of <code>M[2][1]</code> and 'append' it to the respective columns as below:</p>\n\n<pre><code>5111 5112 5113 5114 5115\n</code></pre>\n\n<p>So far my code looks like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define RowMin 1\n#define RowMax 7\n#define ColMin 1\n#define ColMax 7\n\n/* here, I define a type called MATRIX, containing Mem (matrix of strings), \n   number of effective rows, and number of effective columns.\n   My matrix will start from 1 and with 8 valid row and 8 valid column */\ntypedef struct { \n    char Mem[RowMax+1][ColMax+1];\n    int NRowEff;\n    int NColEff;\n} MATRIX;\n\n/* these are the selectors */\n#define NRowEff(M) (M).NRowEff\n#define NColEff(M) (M).NColEff\n#define Elmt(M,i,j) (M).Mem[(i)][(j)]\n\nvoid MakeMATRIX (int NR, int NC, MATRIX * M)\n/* This is a procedure to create a matrix with predefined NR and NC */\n{\n    NRowEff(*M) = NR;\n    NColEff(*M) = NC;\n}\n\nvoid CreateAppend (MATRIX *M, int NR, int NC, char elmt)\n/* this is the procedure to create the matrix as defined in the problem */\n{\n    MakeMATRIX(NR,NC,M); /* first we make the matrix */\n    /* these two are counters */\n    int i = 1;\n    int k = RowMin + 1; \n\n    /* to create the first row, I call this procedure */\n    Append(M,i,&amp;elmt);\n\n    /* the next rows will be created with this loop */\n    for (int i = RowMin; i &lt;= NRowEff(*M); ++i)\n    {\n        for (int j = ColMin; j &lt;= NColEff(*M); ++j)\n        {\n            /* first i take the element of the matrix that i want to append \n            */\n            elmt = Elmt(*M,i,j);\n            /* call the append procedure */\n            Append(M,k,&amp;elmt);\n            /* add 1 to the counter */\n            if (k &lt;= NRowEff(*M))\n                k++;\n        }\n    }\n}\n\nvoid WriteMATRIX (MATRIX M)\n/* this is a procedure to write matrix to the screen */\n/* e.g. writing 3 x 3 matrix will look like this\n   1 2 3\n   4 5 6\n   8 9 10\n*/\n{\n    for (int i = RowMin; i &lt;= NRowEff(M); ++i)\n    {\n        for (int j = ColMin; j &lt;= NColEff(M); ++j)\n        {\n            printf(\"%s\", Elmt(M,i,j));\n            if (j &lt; NColEff(M))\n                printf(\" \");\n        }\n        if (i != NRowEff(M))\n        {\n            printf(\"\\n\");\n        }\n    }\n}\n\nvoid Append (MATRIX *M, int i, char * elmt)\n/* this is the implementation of Append procedure that is called in \n   CreateAppend */\n{\n    char appendix[2];\n\n    for (int j = ColMin; j &lt;= NColEff(*M); ++j)\n    {\n        /* because I'm appending the respective column number to the elmt, I \n           will have to cast int to a const char* using sprintf */\n        sprintf(appendix,\"%d\",j);\n        /* then I append the elmt and the appendix using strcat */\n        strcat(elmt, appendix);\n        /* the new element of the matrix is elmt */\n        Elmt(*M,i,j) = *elmt;\n    }\n}\n</code></pre>\n\n<p>In the main program, I write this:</p>\n\n<pre><code>int main(void)\n{\n    MATRIX MCPU;\n    char elmt;\n\n    elmt = '5';\n\n    CreateAppend(&amp;MCPU,5,5,elmt);\n    WriteMATRIX(MCPU);\n}\n</code></pre>\n\n<p>When I run this program in debug, I get a segmentation fault. I don't really know where do I mess up and if someone can point that out to me, it'll be helpful! Also I guess the loop isn't working right, but I fail to notice the mistake.</p>\n"}, {"tags": ["c", "docker", "dockerfile"], "comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1537924976, "post_id": 52508498, "comment_id": 91957566, "body": "Why does the title say \u201cc++\u201d if the question is about a C library?"}], "answers": [{"tags": [], "owner": {"reputation": 536, "user_id": 3956589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39365ac79e46dc67ace5d93a627a068d?s=128&d=identicon&r=PG&f=1", "display_name": "whitespace", "link": "https://stackoverflow.com/users/3956589/whitespace"}, "is_accepted": false, "score": 0, "last_activity_date": 1537933518, "creation_date": 1537933518, "answer_id": 52509624, "question_id": 52508498, "link": "https://stackoverflow.com/questions/52508498/add-c-library-to-docker/52509624#52509624", "title": "Add C library to docker", "body": "<p>Add the docker commands to download, compile and install the library on your docker image.</p>\n\n<pre><code>RUN wget https://crypto.stanford.edu/pbc/files/pbc-0.5.14.tar.gz &amp;&amp; \\\n    tar -xvf pbc-0.5.14.tar.gz &amp;&amp; \\\n    cd pbc-0.5.14 &amp;&amp; \\\n    ./configure --prefix=$HOME/.local &amp;&amp; \\\n    make &amp;&amp; make install\n\nRUN rm pbc-0.5.14.tar.gz &amp;&amp; rm -rf pbc-0.5.14\n</code></pre>\n\n<p>this is of course a very simple way, you need to know how you want to compile it, and what custom flags to use.</p>\n"}], "owner": {"reputation": 129, "user_id": 7694216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XkyCe.jpg?s=128&g=1", "display_name": "inyutin", "link": "https://stackoverflow.com/users/7694216/inyutin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 534, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1537939517, "creation_date": 1537923509, "last_edit_date": 1537939517, "question_id": 52508498, "link": "https://stackoverflow.com/questions/52508498/add-c-library-to-docker", "title": "Add C library to docker", "body": "<p>I have a golang project with c library dependencies(e.g pbc).\nI create a dockerfile:</p>\n\n<pre><code> FROM golang:1.9.6-alpine3.7\n\n RUN mkdir -p /go/src/app\n\n WORKDIR /go/src/app\n\n COPY . /go/src/app\n\n RUN apk add --update git gcc build-base gmp flex bison\n\n RUN go-wrapper download\n\n RUN go-wrapper install\n\n CMD [\"go-wrapper\", \"run\", \"-web\"]\n\n EXPOSE 8000\n</code></pre>\n\n<p>However I dont understand how to provide a pbc-library, as it's standalone library - <a href=\"https://crypto.stanford.edu/pbc/howto.html\" rel=\"nofollow noreferrer\">https://crypto.stanford.edu/pbc/howto.html</a></p>\n\n<p>Additional this library linked dynamically.\nWhat should I do?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1537924252, "post_id": 52508492, "comment_id": 91957405, "body": "look up &quot;what is pass by value&quot;"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1537924368, "post_id": 52508492, "comment_id": 91957438, "body": "@M.M: That is not what they are asking about. They know <code>s</code> is passed by value. They are asking that, since it has (in their mind) <b>some</b> value, why isn\u2019t the address of <code>&quot;Hello World!&quot;</code> written to the address specified by that value, after which <code>puts(s)</code> would write \u201cHello World!\u201d. (Although they may still be off by a reference/dereference in that thinking.)"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 1, "creation_date": 1537924612, "post_id": 52508492, "comment_id": 91957500, "body": "When you pas the uninitialized <code>s</code> to <code>function</code>, <code>s</code> could contain any value.  When <code>function</code> executes, it is therefore writing to some unknown address.  There&#39;s no telling what damage that could cause.  It could write to the stack, it could write to static storage, it could cause a segmentation fault.  It&#39;s undefined behavior and should always be avoided."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1537924629, "post_id": 52508492, "comment_id": 91957503, "body": "@EricPostpischil there is a different level of indirection, even in this scenario (supposing you are right about what&#39;s going on in their mind) <code>puts(s)</code> would try to puts 4(?) bytes representing the address of &quot;Hello, world&quot;`"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1537924662, "post_id": 52508492, "comment_id": 91957512, "body": "@M.M: Yes. And I have updated my answer to say that."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1537924972, "post_id": 52508492, "comment_id": 91957563, "body": "is the title meant to say &quot;why can&#39;t I...&quot; ?"}, {"owner": {"reputation": 1733, "user_id": 1460102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e70df89ccf5e5509e4aae9ef4ed5b865?s=128&d=identicon&r=PG", "display_name": "xxks-kkk", "link": "https://stackoverflow.com/users/1460102/xxks-kkk"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1537932298, "post_id": 52508492, "comment_id": 91959035, "body": "@TomKarzes I agree it&#39;s a dangerous practice. I think the reason we aren&#39;t passing the pointer is two-fold: 1. being the undefined behavior. However,  I think there should be another explanation that I can see <code>*c</code> contains valid characters but once the <code>function</code> returned, <code>s</code>&#39;s value becomes unusual through gdb even the address that <code>s</code> holds is unchanged."}, {"owner": {"reputation": 1733, "user_id": 1460102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e70df89ccf5e5509e4aae9ef4ed5b865?s=128&d=identicon&r=PG", "display_name": "xxks-kkk", "link": "https://stackoverflow.com/users/1460102/xxks-kkk"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1537932438, "post_id": 52508492, "comment_id": 91959060, "body": "@M.M Could you please elaborate more &quot;4 bytes representing the address of &quot;Hello World!&quot;&quot;? Why <code>puts</code> would not show the message, which <code>puts</code> sucessfully does if we pass <code>&amp;s</code>?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1537933203, "post_id": 52508492, "comment_id": 91959253, "body": "@zack please see Eric&#39;s answer for elaboration. Also all of this is undefined behaviour so you should not talk about &quot;successfully&quot; and &quot;would&quot;"}, {"owner": {"reputation": 1733, "user_id": 1460102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e70df89ccf5e5509e4aae9ef4ed5b865?s=128&d=identicon&r=PG", "display_name": "xxks-kkk", "link": "https://stackoverflow.com/users/1460102/xxks-kkk"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1537933304, "post_id": 52508492, "comment_id": 91959280, "body": "@M.M, If I understand your comment correctly, can I say even doing so can print out &quot;Hello World!&quot; message, it is still considered to be wrong due to the undefined behavior?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1537933359, "post_id": 52508492, "comment_id": 91959294, "body": "@zack yes this is all wrong"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1537936105, "post_id": 52508492, "comment_id": 91959908, "body": "@zack there&#39;s no guarantee your function will even return.  What if you end up clobbering the return address?  The behavior could change upon any new compiler release, or any new library release.  It&#39;s a waste of time to even try to predict what it might do.  It&#39;s a bug.  Just fix it and move on."}], "answers": [{"comments": [{"owner": {"reputation": 1733, "user_id": 1460102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e70df89ccf5e5509e4aae9ef4ed5b865?s=128&d=identicon&r=PG", "display_name": "xxks-kkk", "link": "https://stackoverflow.com/users/1460102/xxks-kkk"}, "edited": false, "score": 0, "creation_date": 1537931305, "post_id": 52508577, "comment_id": 91958842, "body": "Thanks for the response. In my local environment, I can see that <code>&quot;Hello World!&quot;</code> message get successfully written into the address contains <code>*c</code>. However, once return from <code>function</code>, <code>s</code> contains unusual values. I&#39;m wondering what happens at that time point?"}, {"owner": {"reputation": 1733, "user_id": 1460102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e70df89ccf5e5509e4aae9ef4ed5b865?s=128&d=identicon&r=PG", "display_name": "xxks-kkk", "link": "https://stackoverflow.com/users/1460102/xxks-kkk"}, "edited": false, "score": 0, "creation_date": 1537932071, "post_id": 52508577, "comment_id": 91958986, "body": "Also, I&#39;m a little confused about &quot;<code>puts</code> the address of a place where there is an address&quot;: <code>s</code> now contains an address which has characters, which seems to be fine logically."}, {"owner": {"reputation": 1733, "user_id": 1460102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e70df89ccf5e5509e4aae9ef4ed5b865?s=128&d=identicon&r=PG", "display_name": "xxks-kkk", "link": "https://stackoverflow.com/users/1460102/xxks-kkk"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1537932507, "post_id": 52508577, "comment_id": 91959078, "body": "@immibis I&#39;m sorry, I cannot understand your comment (the first sentence and fail to understand the connection between your example and mine)"}, {"owner": {"reputation": 1733, "user_id": 1460102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e70df89ccf5e5509e4aae9ef4ed5b865?s=128&d=identicon&r=PG", "display_name": "xxks-kkk", "link": "https://stackoverflow.com/users/1460102/xxks-kkk"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1537933006, "post_id": 52508577, "comment_id": 91959209, "body": "@immibis Also, in your example, <code>m</code> still holds the undefined value, which is unchanged before and after the function call. This is the same behavior as mine. However, in my example, I modify the content on the address that hold by <code>s</code>. After <code>function</code>, the address (say <code>0xab</code>) in <code>s</code> is unchanged but the content on <code>0xab</code> is modified to the string. I&#39;m wondering why doing so, <code>s</code> can have weird values both under gdb and <code>puts</code>."}, {"owner": {"reputation": 1733, "user_id": 1460102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e70df89ccf5e5509e4aae9ef4ed5b865?s=128&d=identicon&r=PG", "display_name": "xxks-kkk", "link": "https://stackoverflow.com/users/1460102/xxks-kkk"}, "edited": false, "score": 0, "creation_date": 1537933407, "post_id": 52508577, "comment_id": 91959310, "body": "I don&#39;t think your example is close to mine. If I were to modify your example, I would change <code>x=&quot;5&quot;</code> to <code>*x = &quot;5&quot;</code>."}, {"owner": {"reputation": 1733, "user_id": 1460102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e70df89ccf5e5509e4aae9ef4ed5b865?s=128&d=identicon&r=PG", "display_name": "xxks-kkk", "link": "https://stackoverflow.com/users/1460102/xxks-kkk"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1537933556, "post_id": 52508577, "comment_id": 91959337, "body": "@immibis Yes. I&#39;m asking exactly the code I provided in the question."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 0, "last_activity_date": 1537924598, "last_edit_date": 1537924598, "creation_date": 1537924135, "answer_id": 52508577, "question_id": 52508492, "link": "https://stackoverflow.com/questions/52508492/why-cant-i-pass-the-pointer-instead-of-the-pointer-to-pointer-to-function/52508577#52508577", "title": "Why can&#39;t I pass the pointer instead of the pointer to pointer to function?", "body": "<p>Since <code>s</code> is uninitialized, its contents are unknown (and using it is invalid according to the C standard). Suppose it did contain some value and the C implementation did pass that value to <code>function</code> for the parameter <code>c</code>. Then <code>function</code> attempts to write the address of <code>\"Hello World\"</code> to the place where <code>c</code> points. But where is that place?</p>\n\n<p>We supposed <code>s</code> contained some value. But it is quite likely an address that is not mapped in your address space. Your small program likely does not use much of even a 32-bit address space, so most of that space will not be mapped to real memory by the operating system. So, if you pick a random address and try to write there, it is probably an invalid address, and your process will crash.</p>\n\n<p>Another likely possibility is that <code>s</code> happens to contain zero because this is early in your program and nothing has written anything else to the place where the compiler put <code>s</code>, so it just contains the zeros that the operating system initialized your memory with. In many systems, the address zero is deliberately left unmapped in address spaces just for this purpose, so that uses of uninitialized pointers will crash.</p>\n\n<p>More than that, a good compiler will see that <code>s</code> is used without being initialized and will warn you about that. If you force it to generate code anyway, the optimizer may, as a a result of its usual transformations, completely replace this broken code with something else.</p>\n\n<p>If you are unlucky, then the uninitialized <code>s</code> will contain a value that happens to be a valid address in your address space, and then <code>function</code> may write the address of <code>\"Hello World!\"</code> into it. Now you are writing data into some place in your process that may be needed for another purpose, so it can break your program in a variety of ways. Note that this does not give the result you seem to think it would, that <code>puts</code> would write \u201cHello World!\u201d. If <code>function</code> did write the address of <code>\"Hello World!\"</code> into <code>*c</code>, the address would be in memory at the place <code>s</code> happens to point to. Then you are passing to <code>puts</code> the address of a place where there is an address. However, <code>puts</code> expects the address of a place where there are characters. It will read the bytes of the address of <code>\"Hello World!\"</code> and print them, until it reaches a zero byte. Most often, the result is unprintable or at least unusual characters.</p>\n"}, {"comments": [{"owner": {"reputation": 1733, "user_id": 1460102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e70df89ccf5e5509e4aae9ef4ed5b865?s=128&d=identicon&r=PG", "display_name": "xxks-kkk", "link": "https://stackoverflow.com/users/1460102/xxks-kkk"}, "edited": false, "score": 0, "creation_date": 1537972495, "post_id": 52510174, "comment_id": 91980042, "body": "Thanks for the response. Can you explain what do you mean by &quot;If you do it right&quot;? How can I do right?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 1733, "user_id": 1460102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e70df89ccf5e5509e4aae9ef4ed5b865?s=128&d=identicon&r=PG", "display_name": "xxks-kkk", "link": "https://stackoverflow.com/users/1460102/xxks-kkk"}, "edited": false, "score": 0, "creation_date": 1538000492, "post_id": 52510174, "comment_id": 91993309, "body": "@zack By commenting out the (s) line and uncommenting (&amp;s)?"}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 0, "last_activity_date": 1537937589, "creation_date": 1537937589, "answer_id": 52510174, "question_id": 52508492, "link": "https://stackoverflow.com/questions/52508492/why-cant-i-pass-the-pointer-instead-of-the-pointer-to-pointer-to-function/52510174#52510174", "title": "Why can&#39;t I pass the pointer instead of the pointer to pointer to function?", "body": "<p>s is not initialized, so it holds some garbage address (probably an invalid one).</p>\n\n<p>When you do <code>*s = \"Hello World!\";</code> you are writing <code>\"Hello World!\"</code> (which is a pointer value) to some garbage address (probably an invalid one).</p>\n\n<p>Let's say it doesn't crash though - then <code>puts</code> will read the bytes from that same garbage address (i.e. it will read the address of the string, not the string) and display them on the screen.</p>\n\n<p>After running the incorrect code the memory might contain these values for example:</p>\n\n<pre><code>Address      Value (4 bytes at a time)\n...\n0x12345678   0x65401234      &lt;- some important thing you just overwrote that is liable to make your program crash,\n                                now it holds the address of the string literal\n...\n0x4000000C   0x12345678      &lt;- variable 's' in main\n0x40000010   0x12345678      &lt;- variable 's' in function, copy of variable 's' in main\n...\n0x65401234   'H', 'e', 'l', 'l'  &lt;- where the compiler decided to put the string literal\n0x65401238   'o', ' ', 'W', 'o'\n0x6540123C   'r', 'l', 'd', '!'\n0x65401240   0\n</code></pre>\n\n<p>When you call <code>puts(s);</code> you would be calling <code>puts(0x12345678);</code> and it would print the bytes <code>0x65401234</code> (but it wouldn't print \"0x65401234\", it'd try to print the letters corresponding to those)</p>\n\n<p>If you do it right, you end up with:</p>\n\n<pre><code>Address      Value (4 bytes at a time)\n...\n0x4000000C   0x65401234      &lt;- variable 's' in main\n0x40000010   0x4000000C      &lt;- variable 's' in function, has address of variable 's' in main\n...\n0x65401234   'H', 'e', 'l', 'l'  &lt;- where the compiler decided to put the string literal\n0x65401238   'o', ' ', 'W', 'o'\n0x6540123C   'r', 'l', 'd', '!'\n0x65401240   0\n</code></pre>\n\n<p>Then <code>puts(s)</code> is <code>puts(0x65401234)</code> which prints the string.</p>\n"}], "owner": {"reputation": 1733, "user_id": 1460102, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e70df89ccf5e5509e4aae9ef4ed5b865?s=128&d=identicon&r=PG", "display_name": "xxks-kkk", "link": "https://stackoverflow.com/users/1460102/xxks-kkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1537937589, "creation_date": 1537923467, "last_edit_date": 1537931473, "question_id": 52508492, "link": "https://stackoverflow.com/questions/52508492/why-cant-i-pass-the-pointer-instead-of-the-pointer-to-pointer-to-function", "title": "Why can&#39;t I pass the pointer instead of the pointer to pointer to function?", "body": "<p>I have the following program that wants to modify <code>s</code> such that we can print out <code>\"Hello World!\"</code> at the end</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n// modify this function\nvoid function(char** c)\n{\n    *c = \"Hello World!\";\n}\n\nint main()\n{\n    char* s;\n//    function(&amp;s); \n    function(s);\n    puts(s);\n    return 0;\n}\n</code></pre>\n\n<p>Normally, we would just do <code>function(&amp;s)</code>. However, my question is why can't we just use <code>function(s)</code>? Of course, doing so will raise warning during the compile time but since <code>s</code> contains the memory address say <code>0xab</code>. If we modify the content on <code>0xab</code> from <code>0x00</code> to <code>\"hello world!\"</code>, the address hold by <code>s</code> won't change and we should still see <code>\"Hello World!\"</code> message.</p>\n\n<p>I'm wondering why <code>function(s)</code> won't work in this case? I compile the program on Mac. </p>\n\n<p>Reference:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/766893/how-do-i-modify-a-pointer-that-has-been-passed-into-a-function-in-c\">How do I modify a pointer that has been passed into a function in C?\n</a></li>\n</ul>\n"}, {"tags": ["c", "sockets", "client-server"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1537924311, "post_id": 52508407, "comment_id": 91957422, "body": "So, it&#39;s stuck on the read().  Is this TCP?  Whatever way, you should wireshark the line to be sure that the client reply is actually sent to the server."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1537932819, "post_id": 52508407, "comment_id": 91959165, "body": "Put a \\n at the end of each message you print."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1537942630, "post_id": 52508407, "comment_id": 91962083, "body": "Note that any <code>printf()</code> text that isn&#39;t followed by a carriage return (<code>\\n</code>) will be held in stdout&#39;s output buffer and will not appear in your terminal window until either a carriage return is printed, or your program explicitly calls <code>fflush(stdout);</code> to flush the buffer.  Several of your <code>printf()</code> calls do not end with a <code>\\n</code>, and that may be the source of some confusion about where your program is actually blocking at."}], "owner": {"reputation": 177, "user_id": 10394020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf0bc7209395bef9af27084dad42eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Doe", "link": "https://stackoverflow.com/users/10394020/jane-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537922820, "creation_date": 1537922820, "question_id": 52508407, "link": "https://stackoverflow.com/questions/52508407/socket-program-in-c-a-send-message-blocking-further-code", "title": "Socket Program in C, a send message blocking further code", "body": "<p>I am new to socket programming and i currently facing a problem send/receiving information between my client and server. Currently i am sending \"TRN\" to my client which is received and handled on my client side but then my program gets stuck. The console prints the <code>[DEBUG] Sent start message.</code> but then it never makes it to the <code>MADE IT HERE 1</code> message.  On the client side when it receives the \"TRN\" it is handled and an int is sent back to the server which i want to be received however it doesn't make it that far. This is my code breakdown:</p>\n\n<pre><code>/* Send the start message. */\nwrite_client_msg(cli_sockfd, \"TRN\");\nprintf(\"\\n[DEBUG] Sent start message.\\n\");\nint place_reveal = 0;\nprintf(\"\\nMADE IT HERE 1\");\nplace_reveal = recv_int(cli_sockfd);\nprintf(\"\\nThis is the users results: %d\", place_reveal);\n\n/* Writes a message to a client socket. */\nvoid write_client_msg(int cli_sockfd, char * msg)\n{\n    int n = write(cli_sockfd, msg, strlen(msg));\n    if (n &lt; 0)\n        error(\"ERROR writing msg to client socket\");\n\n}\n\n/* Reads an int from a client socket. */\nint recv_int(int cli_sockfd)\n{\n    printf(\" MADE IT HERE 2\");\n\n    int msg = 0;\n    int n = read(cli_sockfd, &amp;msg, sizeof(int));\n\n    if (n &lt; 0 || n != sizeof(int)) /* Not what we were expecting. Client likely disconnected. */\n        return -1;\n\n    printf(\"[DEBUG] Received int: %d\\n\", msg);\n\n    return msg;\n}\n</code></pre>\n\n<p>What i have found although is that when i hit Control C to exit the program the console output is this: </p>\n\n<pre><code>^C\nMADE IT HERE 1 MADE IT HERE 2\nOUCH you hit Ctrl-C?!\nGoodbye!\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1537922902, "post_id": 52508312, "comment_id": 91957163, "body": "I think the best you can do is declare the pointer after the declaration of <code>x</code>.  Then you can initialize the pointer to <code>&amp;x</code> when you declare it, e.g. <code>double *d = &amp;x;</code>"}, {"owner": {"reputation": 131, "user_id": 8792873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b5e34bd26ffba538bd510de8a056421?s=128&d=identicon&r=PG&f=1", "display_name": "Angelixus", "link": "https://stackoverflow.com/users/8792873/angelixus"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1537923040, "post_id": 52508312, "comment_id": 91957187, "body": "@TomKarzes and do you know why the char pointer initialization I wrote works, <code>char * s = &quot;Hi&quot;;</code> but <code>double * f = 3;</code> does not?"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1537923136, "post_id": 52508312, "comment_id": 91957204, "body": "String constants (in that context) are actually arrays whose elements have type <code>char</code>.  So for instance, <code>&quot;abc&quot;</code> has type <code>char [4]</code> (the fourth character is the terminating null character).  Compare with the character constant <code>&#39;a&#39;</code>, which has type <code>int</code>."}, {"owner": {"reputation": 131, "user_id": 8792873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b5e34bd26ffba538bd510de8a056421?s=128&d=identicon&r=PG&f=1", "display_name": "Angelixus", "link": "https://stackoverflow.com/users/8792873/angelixus"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1537923386, "post_id": 52508312, "comment_id": 91957244, "body": "@TomKarzes so if I understand right, the syntax I wrote for initializing the String with the char pointer is an &quot;special&quot; syntax of C in order not to initialize an array of chars and initialize the indexes of that array that will contain the chars of the String"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1537923666, "post_id": 52508312, "comment_id": 91957296, "body": "The string declaration is basically doing pointer assignment.  The string constant degrades to a <code>char *</code> in that context.  You can think of these as assignments.  You can assign one pointer to another, or an array to a pointer (in which case the array degrades to a pointer), but you can&#39;t assign an integer to a pointer.  If you could write <code>{3.0}</code> and have it implicitly create a <code>double [1]</code> array that&#39;s initialized to <code>{3.0}</code>, then that would work, but C only supports that when used to initialize an array.  String constants are special in that regard."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1537925903, "post_id": 52508312, "comment_id": 91957723, "body": "@TomKarzes: C does not support that only when used to initialize an array. One can write \u201c(double []) { 3.0, 4.0, 5.0 }\u201d to create an array of <code>double</code> in the middle of an expression, including when initializing a pointer, as my answer shows."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1537927901, "post_id": 52508312, "comment_id": 91958082, "body": "@EricPostpischil Oh, I guess that was added with C99 (and prior to that as a gnu extension to C90).  I saw it described <a href=\"https://stackoverflow.com/questions/1269568/how-to-pass-a-constant-array-literal-to-a-function-that-takes-a-pointer-without\">here</a>."}], "answers": [{"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 2, "last_activity_date": 1537923248, "creation_date": 1537923248, "answer_id": 52508462, "question_id": 52508312, "link": "https://stackoverflow.com/questions/52508312/char-and-double-pointers-declaration/52508462#52508462", "title": "Char and double pointers declaration", "body": "<p>The best you could do would be to use an array instead of a raw pointer. Since the array degrades to a pointer in almost every use case, it will <em>behave</em> roughly the way you want.</p>\n\n<pre><code>double d[] = {3};\n</code></pre>\n\n<p>will allocate the space (globally or on the stack, depending on whether it's performed at global or function scope) and initialize it at once. For almost all purposes, referring to <code>d</code> will cause it to degrade to a <code>double*</code>.</p>\n\n<p>The main difference is that, for stack allocated arrays (function scope, without <code>static</code> qualifier), the array only lives until the end of the function call. Declaring it as <code>static double d[] = {3};</code> will make it live for the life of the program, but it will have a single initialization, and any changes will persist indefinitely.</p>\n\n<p>The other important distinction is that you can't modify the address, since it's not <em>really</em> a pointer; <code>++d</code> won't be legal, since <code>d</code> is an array, not a pointer.</p>\n\n<p>For an exact equivalent of <code>char *s = \"Hi\";</code>, you're basically stuck with a two-liner. That code is roughly equivalent to:</p>\n\n<pre><code>static char unnamed[] = {'H', 'i', '\\0'};\nchar *s = unnamed;\n</code></pre>\n\n<p>It's a special behavior of C string literals, which no other type has direct language support for. Mimicking it precisely with <code>double</code> would always be a two liner:</p>\n\n<pre><code>static double dstorage[] = {3};\ndouble *d = dstorage;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 4, "last_activity_date": 1537925786, "last_edit_date": 1537925786, "creation_date": 1537925140, "answer_id": 52508695, "question_id": 52508312, "link": "https://stackoverflow.com/questions/52508312/char-and-double-pointers-declaration/52508695#52508695", "title": "Char and double pointers declaration", "body": "<p>Yes, but you usually should not:</p>\n\n<pre><code>double *x = (double []) {3};\n</code></pre>\n\n<p>Just as <code>char *x = \"Hi\";</code> creates an array of <code>char</code> and initializes <code>x</code> to point to the first member of the array, the code above creates an array of <code>double</code> and initializes <code>x</code> to point its first member. (I have shown only a single element, but you could write more.) This is called a compound literal.</p>\n\n<p>An important difference is that the lifetime of a string literal is the entire execution of the program, so you can safely return its address from a function. In contrast, a compound literal inside a function exists only as long as the function is executing, so its address cannot be returned from the function. If this definition appeared outside a function, the compound literal would exist for the entire execution of the program.</p>\n\n<p>Compound literals are useful at times, but the situations where it is good to initialize a pointer to the address of a compound literal as I show above are very limited. Code like that should be used with restraint and discretion.</p>\n"}], "owner": {"reputation": 131, "user_id": 8792873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b5e34bd26ffba538bd510de8a056421?s=128&d=identicon&r=PG&f=1", "display_name": "Angelixus", "link": "https://stackoverflow.com/users/8792873/angelixus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1537925786, "creation_date": 1537921803, "last_edit_date": 1537922965, "question_id": 52508312, "link": "https://stackoverflow.com/questions/52508312/char-and-double-pointers-declaration", "title": "Char and double pointers declaration", "body": "<p>I\u00b4m starting with C programing language and I have a doubt with the initialization of pointers. I know that when we declare a pointer we are reserving memory for the specific pointer, but this pointer may point to x address we don\u00b4t know anything about, the point is that I can do this:\n <code>char * s = \"Hi\";</code> but I can\u00b4t do this <code>double * f = 3;</code> so what I do to \"initialize\" this double pointer is the next piece of code: </p>\n\n<pre><code>double * d;\ndouble x = 3;\nd = &amp;x;\n</code></pre>\n\n<p>So that I have the pointer pointing to an specific memory location with the initial value I want to have.</p>\n\n<p>Summing up, my doubt is:</p>\n\n<p>1.- Is there any way to initialize double/int pointers as with char ones?</p>\n"}, {"tags": ["c", "function", "struct"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1537920763, "post_id": 52508194, "comment_id": 91956743, "body": "thats because you need to declare findActiveBlock before you call it."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1537922037, "post_id": 52508194, "comment_id": 91957013, "body": "@pm100: Unlikely. Those compilers that woudn&#39;t reject the code outright, would normally assume that an undeclared function returns <code>int</code>, not <code>void</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1537921140, "post_id": 52508241, "comment_id": 91956825, "body": "There are no member functions in C. Yes, it could be a function pointer, but that wouldn&#39;t make any sense in the context."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1537921606, "post_id": 52508241, "comment_id": 91956926, "body": "And if it were a function pointer, it would not be a void value that should be ignored. It would be a pointer-to-function value."}], "tags": [], "owner": {"reputation": 1, "user_id": 2337486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea65088412d9ee657b2587fabded45a?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/2337486/steve"}, "is_accepted": false, "score": -2, "last_activity_date": 1537921012, "creation_date": 1537921012, "answer_id": 52508241, "question_id": 52508194, "link": "https://stackoverflow.com/questions/52508194/c-void-value-not-ignored-as-it-ought-to-be-error-on-a-function-that-returns-an/52508241#52508241", "title": "C &quot;void value not ignored as it ought to be&quot; error on a function that returns an int", "body": "<p>Just a stab in the dark, but is *.active a function? If so it would need parentheses.</p>\n\n<pre><code> int findActiveBlock() {\n    for (int i = 0; i &lt; BLOCKCOUNT; i++) {\n        if(blocks[i].active()) {   //added parentheses to active\n            return i;\n        }\n    }\n    return 1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 10415967, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DbydaOBsslc/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVmT-LpQO5cCBrt_AuG4sYAGGLp-A/mo/photo.jpg?sz=128", "display_name": "Jenna K", "link": "https://stackoverflow.com/users/10415967/jenna-k"}, "edited": false, "score": 0, "creation_date": 1537986566, "post_id": 52508242, "comment_id": 91987622, "body": "that was it! thank you! I&#39;m still getting used to header files and I always forget to update them.. thanks !!"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 4, "last_activity_date": 1537921320, "last_edit_date": 1537921320, "creation_date": 1537921014, "answer_id": 52508242, "question_id": 52508194, "link": "https://stackoverflow.com/questions/52508194/c-void-value-not-ignored-as-it-ought-to-be-error-on-a-function-that-returns-an/52508242#52508242", "title": "C &quot;void value not ignored as it ought to be&quot; error on a function that returns an int", "body": "<p>I would make a wild guess that your <code>findActiveBlock</code> is actually pre-declared somewhere above as a <code>void</code>-returning function. You simply forgot to update that declaration to make it match the definition.</p>\n\n<p>P.S. As an additional side note: <code>()</code> parameter lists is an obsolescent feature in C. For functions that have no parameters, prefer to use <code>(void)</code> in their declarations.</p>\n"}], "owner": {"reputation": 11, "user_id": 10415967, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DbydaOBsslc/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVmT-LpQO5cCBrt_AuG4sYAGGLp-A/mo/photo.jpg?sz=128", "display_name": "Jenna K", "link": "https://stackoverflow.com/users/10415967/jenna-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1537921320, "creation_date": 1537920652, "question_id": 52508194, "link": "https://stackoverflow.com/questions/52508194/c-void-value-not-ignored-as-it-ought-to-be-error-on-a-function-that-returns-an", "title": "C &quot;void value not ignored as it ought to be&quot; error on a function that returns an int", "body": "<p>I have the following code and am getting </p>\n\n<p>\"error: void value not ignored as it ought to be</p>\n\n<p>int ab = findActiveBlock();\"</p>\n\n<p>I would understand this error if findActiveBlock was set to void but it is returning an int? Please help</p>\n\n<pre><code>void updateActiveBlock() {\n\n    int ab = findActiveBlock();\n    //code using ab//\n}\n\nint findActiveBlock() {\n    for (int i = 0; i &lt; BLOCKCOUNT; i++) {\n        if(blocks[i].active) {\n            return i;\n        }\n    }\n    return 1;\n}\n</code></pre>\n\n<p>additional info: this is C, \"blocks[]\" is an array of structs.</p>\n"}, {"tags": ["c", "sorting", "data-structures", "structure"], "comments": [{"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537919915, "post_id": 52508024, "comment_id": 91956545, "body": "Are you expecting different sorted results? Becuase it cannot be guarenteed that k_p and s_s_s will always be in order for each struct. I would create a sort function that specifies which field to sort by. For comparing strings, use strcmp."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1537937796, "post_id": 52508024, "comment_id": 91960367, "body": "Are you asking to sort descending by <code>k_p</code> and if two values of <code>k_p</code> are equal, then by <code>s_s_s</code>? Otherwise, sorting by <code>k_p</code> and then sorting again be <code>s_s_s</code> would just result in a sort by <code>s_s_s</code>. Or, are you saying you want the capability of sorting by either?"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1537938084, "post_id": 52508265, "comment_id": 91960455, "body": "Better, simply create an array of pointers [10] to <code>struct student</code> and initialize the array to <code>S</code> and then sort the pointers by either <code>k_p</code> or <code>s_s_s</code> which would leave the original unchanged. (a second array of pointers could then be sorted by the other member)"}], "tags": [], "owner": {"reputation": 79, "user_id": 7029166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a32c3133aca68bba6982e6851a40778c?s=128&d=identicon&r=PG&f=1", "display_name": "rapidDev", "link": "https://stackoverflow.com/users/7029166/rapiddev"}, "is_accepted": false, "score": 0, "last_activity_date": 1537924524, "last_edit_date": 1537924524, "creation_date": 1537921267, "answer_id": 52508265, "question_id": 52508024, "link": "https://stackoverflow.com/questions/52508024/sorting-structure-elements-in-c-and-having-them-printed-out/52508265#52508265", "title": "Sorting structure elements in C and having them printed out", "body": "<p>One approach: create an <strong>array of ints</strong> that is the <em>same size</em> as your array of structs (array S), and is <em>initialized from 0 to n-1</em> (where n is the size). </p>\n\n<p>Sort this array of ints with any sorting algorithm you see fit, and treat each integer from array A as an <strong>index</strong> of your array S.</p>\n\n<p>By sorting the array of indices according to either k_p or s_s_s, you can effectively print your array S as if it was sorted by descending k_p or s_s_s.</p>\n\n<p>Let's use bubble sort (a simple sorting algorithm to illustrate) and we will sort according to descending k_p values:</p>\n\n<pre><code>    int A[] = {0,1,2,3,4,5,6,7,8,9};\n    float k1,k2;\n    // bubble sort for descending order\n    for (int i = 0; i &lt; n; i++) \n    {   \n        k1 = &amp;S[i].k_p;\n        for (int j = 1; j &lt; n; j++)             \n        {\n            k2 = &amp;S[j].k_p;\n            if (k1 &lt; k2)               \n            {\n                // remember you're only switching the ints in array A\n                int tmp = A[i];         \n                A[i] = A[j];           \n                A[j] = tmp;             \n            }\n        }\n    }\n</code></pre>\n\n<p>** Disclaimer: I didn't test the code but this is the general idea.</p>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": true, "score": 0, "last_activity_date": 1537940193, "creation_date": 1537940193, "answer_id": 52510597, "question_id": 52508024, "link": "https://stackoverflow.com/questions/52508024/sorting-structure-elements-in-c-and-having-them-printed-out/52510597#52510597", "title": "Sorting structure elements in C and having them printed out", "body": "<p>If you want to sort the entire structure, you need to use a proper swapping function which will swap two structure elements rather than two integers.</p>\n\n<p>Since this structure contains an integer, a character array and a float, the swapping function should take care to swap all three elements.</p>\n\n<pre><code>/* in Global area */ \nfloat ftemp;\nchar chartemp[30];\nint itemp;\n\nvoid swap(struct student *a, struct student *b)\n{\n\n    /* swap the float */\n    ftemp  = a-&gt;k_p;\n    a-&gt;k_p = b-&gt;b_p;\n    b-&gt;k_p = ftemp;\n\n    /* swap the array */\n    strcpy(chartemp, a-&gt;i_p);\n    strcpy(a-&gt;i_p, b-&gt;i_p);\n    strcpy(b-&gt;i_p, chartemp);\n\n    /* swap the int */\n    itemp    = a-&gt;s_s_s;\n    a-&gt;s_s_s = b-&gt; s_s_s;\n    b-&gt;s_s_s = itemp;\n\n}    \n</code></pre>\n\n<p>You can then use any sorting algorithm to sort, e.g. bubble sort, insertion sort, merge sort calling the function above to swap the values.</p>\n\n<p>Note - The temporary variables are put in the global area as the swap function will be called many times and this will give a small boost in run time. If you have many elements that you wish to sort in this manner(more than 100000), a structure is not the ideal way to go about it. Better for this is a linked list. In a linked list, you will only need to swap pointers and not the entire data.</p>\n"}], "owner": {"reputation": 3, "user_id": 10415905, "user_type": "registered", "profile_image": "https://graph.facebook.com/2312403922108472/picture?type=large", "display_name": "Ivan Kova\u010d", "link": "https://stackoverflow.com/users/10415905/ivan-kova%c4%8d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 52510597, "answer_count": 2, "score": 0, "last_activity_date": 1537940193, "creation_date": 1537919169, "last_edit_date": 1537936215, "question_id": 52508024, "link": "https://stackoverflow.com/questions/52508024/sorting-structure-elements-in-c-and-having-them-printed-out", "title": "Sorting structure elements in C and having them printed out", "body": "<p>I want to sort the <code>k_p</code> in descending order from largest to smallest and the <code>s_s_s</code> for the 10 students in the same way and print it out but I dont know how to do it...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct student {\n    float k_p;\n    char i_p[30];\n    int s_s_s;\n};\n\nint main() {\n    struct student S[10];\n    int i;\n    for(i=0;i&lt;10;i++) {\n        printf(\"Student broj %d\\n\", i+1);\n        printf(\"Koeficijent place: \\t\"); scanf(\"%d\", &amp;S[i].k_p);\n        printf(\"Ime i prezime: \\t\"); scanf(\"%s\", &amp;S[i].i_p);\n        printf(\"Stupanj strucne spreme: \\t\"); scanf(\"%f\",&amp;S[i].s_s_s);\n        system(\"cls\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I tried with something like this but I don't know how to fit it into the code</p>\n\n<pre><code>{\n    for (int j = 0; j &lt; n; j++) {     //Loop for comparing other values\n        if (a[j] &lt; a[i]) {            //Comparing other array elements\n            int tmp = a[i];           //Using temporary variable for storing last value\n            a[i] = a[j];              //replacing value\n            a[j] = tmp;               //storing last value\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "segmentation-fault"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1537916161, "post_id": 52507510, "comment_id": 91955742, "body": "You should start abandonning the abuse of <code>goto</code>."}], "answers": [{"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 0, "last_activity_date": 1537933148, "creation_date": 1537933148, "answer_id": 52509583, "question_id": 52507510, "link": "https://stackoverflow.com/questions/52507510/counting-lines-of-input-using-memchr-fails/52509583#52509583", "title": "counting lines of input using memchr fails", "body": "<p>Building your program with <code>-fsanitize=address</code> and feeding it sufficiently long input produces:</p>\n\n<pre><code>==119818==ERROR: AddressSanitizer: stack-buffer-overflow on address 0x7ffedbba1500 at pc 0x7fc4d56fd574 bp 0x7ffedbb9f4a0 sp 0x7ffedbb9ec50\nREAD of size 8192 at 0x7ffedbba1500 thread T0\n    #0 0x7fc4d56fd573  (/usr/lib/x86_64-linux-gnu/libasan.so.4+0x40573)\n    #1 0x563fdf5f4b90 in main /tmp/t.c:23\n    #2 0x7fc4d533e2b0 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x202b0)\n    #3 0x563fdf5f49c9 in _start (/tmp/a.out+0x9c9)\n\nAddress 0x7ffedbba1500 is located in stack of thread T0 at offset 8224 in frame\n    #0 0x563fdf5f4ab9 in main /tmp/t.c:11\n\n  This frame has 1 object(s):\n    [32, 8224) 'buff' &lt;== Memory access at offset 8224 overflows this variable\nHINT: this may be a false positive if your program uses some custom stack unwind mechanism or swapcontext\n      (longjmp and C++ exceptions *are* supported)\nSUMMARY: AddressSanitizer: stack-buffer-overflow (/usr/lib/x86_64-linux-gnu/libasan.so.4+0x40573)\n</code></pre>\n\n<p>Line 23 is the call to <code>memchr</code>.</p>\n\n<p>When you increment <code>r</code>, you should probably decrement <code>n</code>.</p>\n"}], "owner": {"reputation": 1796, "user_id": 5763327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051c8032c315fd540790929f1d6a6510?s=128&d=identicon&r=PG&f=1", "display_name": "Setop", "link": "https://stackoverflow.com/users/5763327/setop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 52509583, "answer_count": 1, "score": -1, "last_activity_date": 1537933148, "creation_date": 1537914851, "question_id": 52507510, "link": "https://stackoverflow.com/questions/52507510/counting-lines-of-input-using-memchr-fails", "title": "counting lines of input using memchr fails", "body": "<p>I wrote a program to count lines of input given by stdin :</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\n#define BUFF_SIZE  8192\n#define RS  '\\n'\n\nint\nmain(int argc, char **argv)\n{\n    char buff[BUFF_SIZE];\n    ssize_t n;\n    char *r; \n    int c = 0;\n\n    readchunk:\n    n = read(0, buff, BUFF_SIZE);\n    if (n&lt;=0) goto end; // EOF\n    r=buff;\n\n    searchrs:\n    r = memchr(r, RS, n);\n    if(r!=NULL) {\n        c++;\n        if((r-buff)&lt;n) {\n            ++r;\n            goto searchrs;\n        }\n    }\n    goto readchunk;\n\n    end:\n    printf(\"%d\\n\", ++c);\n    return 0;\n}\n</code></pre>\n\n<p>I compiled it with gcc, with no options.</p>\n\n<p>When run, it gives unstable result, not far from truth but false. Sometimes it segfaults. The bigger is the buffer size the more often it segfaults.</p>\n\n<p>What am I doing wrong ?</p>\n"}, {"tags": ["c", "text", "while-loop", "scanf", "eof"], "comments": [{"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537911741, "post_id": 52507046, "comment_id": 91954597, "body": "you added scanf as a tag, what have you tried with scanf ? Because that is viable approach"}, {"owner": {"reputation": 1, "user_id": 9603391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Magniko", "link": "https://stackoverflow.com/users/9603391/magniko"}, "reply_to_user": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537911790, "post_id": 52507046, "comment_id": 91954613, "body": "Yes scanf is something my teacher suggest, but I have no idea how it&#39;s supposed to work, especially as I don&#39;t know how to even use it to read the file    while ( EOF != scanf(&quot;%x%x\\n&quot;, &amp;adr, &amp;instr) )     m-&gt;memory[adr] = instr;"}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 1, "creation_date": 1537911801, "post_id": 52507046, "comment_id": 91954615, "body": "Try <a href=\"https://linux.die.net/man/3/scanf\" rel=\"nofollow noreferrer\">int reval = scanf(&quot;%d %d&quot;, &amp;adr, &amp;instr)</a>."}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "reply_to_user": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1537911841, "post_id": 52507046, "comment_id": 91954625, "body": "works like printf, except specifies input format. See @paulsm4 comment"}, {"owner": {"reputation": 1, "user_id": 9603391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Magniko", "link": "https://stackoverflow.com/users/9603391/magniko"}, "edited": false, "score": 0, "creation_date": 1537911860, "post_id": 52507046, "comment_id": 91954634, "body": "How would this read the file though? I would have to open the file somehow. Would I need to use  fopen() then?"}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1537911899, "post_id": 52507046, "comment_id": 91954643, "body": "Use &quot;redirection&quot;, e.g. <code>my_c_program.exe &lt; myfile.txt</code>."}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 1, "creation_date": 1537911903, "post_id": 52507046, "comment_id": 91954645, "body": "Thats a different issue. I would do a little research online before asking because that is a <b>very</b> common C task. Look into fopen"}, {"owner": {"reputation": 1, "user_id": 9603391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Magniko", "link": "https://stackoverflow.com/users/9603391/magniko"}, "edited": false, "score": 0, "creation_date": 1537911998, "post_id": 52507046, "comment_id": 91954677, "body": "thanks paulsm4 but this has to be done as in within the program itself"}, {"owner": {"reputation": 526, "user_id": 5365012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_2kQk52HsJQ/AAAAAAAAAAI/AAAAAAAAESI/NauEwEkApuc/photo.jpg?sz=128", "display_name": "138", "link": "https://stackoverflow.com/users/5365012/138"}, "edited": false, "score": 0, "creation_date": 1537912038, "post_id": 52507046, "comment_id": 91954688, "body": "see <a href=\"http://www.cplusplus.com/reference/cstdio/fscanf/\" rel=\"nofollow noreferrer\">this</a> @Magniko"}, {"owner": {"reputation": 1, "user_id": 9603391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Magniko", "link": "https://stackoverflow.com/users/9603391/magniko"}, "edited": false, "score": 0, "creation_date": 1537912229, "post_id": 52507046, "comment_id": 91954748, "body": "Thanks. I will try that Just confusing that my teacher used scanf() instead"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9603391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Magniko", "link": "https://stackoverflow.com/users/9603391/magniko"}, "edited": false, "score": 0, "creation_date": 1537913147, "post_id": 52507239, "comment_id": 91955006, "body": "oh, so you&#39;re saying that I can open the file already through a bash-script or in main, then just type in stdin on the fscanf() function?"}, {"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "reply_to_user": {"reputation": 1, "user_id": 9603391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Magniko", "link": "https://stackoverflow.com/users/9603391/magniko"}, "edited": false, "score": 0, "creation_date": 1537913270, "post_id": 52507239, "comment_id": 91955039, "body": "Yes, all programs have three file handles automatically opened for them: stdin, stdout, and stderr. When you launch a program you can use special shell operators to &quot;redirect&quot; those streams to different files, if desired. And programs are free to open/close other files if they want and even re-open the standard streams to other files!"}], "tags": [], "owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "is_accepted": false, "score": 1, "last_activity_date": 1537912796, "creation_date": 1537912796, "answer_id": 52507239, "question_id": 52507046, "link": "https://stackoverflow.com/questions/52507046/read-textfile-with-2-value-for-each-line-in-c/52507239#52507239", "title": "Read textfile with 2 value for each line in C", "body": "<p>In C, stdin is available via the global <code>stdin</code> file handle so there's no need to open a file separately.</p>\n\n<p>To read pairs of integers from stdin you can simply use the <a href=\"https://linux.die.net/man/3/scanf\" rel=\"nofollow noreferrer\"><code>fscanf(...)</code> function</a>, e.g.:</p>\n\n<pre><code>// pairs.c\n#include &lt;stdio.h&gt;\n\nint main()\n{\n  int addr, instr;\n  while (fscanf(stdin, \"%d %d\", &amp;addr, &amp;instr) == 2) {\n    printf(\"OK: addr=%d, instr=%d\\n\", addr, instr);\n  }\n  return 0;\n}\n</code></pre>\n\n<p>You can pipe or redirect files to the compiled program, for example:</p>\n\n<pre><code>$ echo -e \"11 22\\n33 44\\n55 66\" | ./pairs\nOK: addr=11, instr=22\nOK: addr=33, instr=44\nOK: addr=55, instr=66\n\n$ echo -e \"111 222\\n333 444\\n555 666\\n777 888\" &gt; input.txt\n$ ./pairs &lt; input.txt\nOK: addr=111, instr=222\nOK: addr=333, instr=444\nOK: addr=555, instr=666\nOK: addr=777, instr=888\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9603391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Magniko", "link": "https://stackoverflow.com/users/9603391/magniko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1537912796, "creation_date": 1537911571, "question_id": 52507046, "link": "https://stackoverflow.com/questions/52507046/read-textfile-with-2-value-for-each-line-in-c", "title": "Read textfile with 2 value for each line in C", "body": "<p>I'm trying to make a program that reads a textfile from stdin which has 2 values per line, eg 300 1941, 301 1942\nOne value is supposed to be assigned to a variable <em>adr</em>, the other is to be assigned to <em>instr</em>.\nHow would I make a function that opens the file, reads from beginning to EOF through a while loop and assigns these values to the variables through each iteration?</p>\n\n<p>What I've done so far</p>\n\n<pre><code>void load_program(struct machine *m){\n\n  unsigned int adr, instr;\n\n  //something that iterates through the file and adds the values to the \nvariables)\n</code></pre>\n"}, {"tags": ["c", "c99"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1537911181, "post_id": 52506916, "comment_id": 91954394, "body": "<code>&quot;message&quot;</code> (what your <code>value</code> points to) is an array of 8 <b>read-only</b> char. You cannot change any of them. Copy them to a local array (as suggested by user3121023) to be able to change them."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1537911184, "post_id": 52506916, "comment_id": 91954396, "body": "You should get a warning from GCC using <code>-Wall</code> (or maybe <code>-Wextra</code>). I don&#39;t recall if microsoft compilers warn about it."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1537911191, "post_id": 52506916, "comment_id": 91954401, "body": "To over-simply the problem, <code>value</code> is pointing to a segment of your program memory that is read-only.  @user3121023 &#39;s suggestion has you instead create an array that contains the string and can be modified."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1537911235, "post_id": 52506916, "comment_id": 91954421, "body": "Where are all of these zillion of dupes?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1537911460, "post_id": 52506916, "comment_id": 91954500, "body": "<a href=\"https://stackoverflow.com/q/164194/608639\">Why do I get a segmentation fault when writing to a string initialized with \u201cchar *s\u201d but not \u201cchar s&#91;&#93;\u201d?</a>, <a href=\"https://stackoverflow.com/q/5464183\">Modifying String Literal</a>, <a href=\"https://stackoverflow.com/q/2241834\">Why is my char* writable and sometimes read only in C++</a>, <a href=\"https://stackoverflow.com/q/3172075\">Segmentation fault reversing a string literal</a>, <a href=\"https://stackoverflow.com/q/44294649\">If char*s are read only, why can I overwrite them?</a>, <a href=\"https://softwareengineering.stackexchange.com/q/294748\">Why are C string literals read-only?</a>, etc."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1537923079, "post_id": 52506916, "comment_id": 91957194, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/164194/608639\">Why do I get a segmentation fault when writing to a string initialized with &quot;char *s&quot; but not &quot;char s&#91;&#93;&quot;?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1537926907, "post_id": 52506990, "comment_id": 91957894, "body": "&quot;C strings are immutable&quot; --&gt; Do you mean &quot;<i>string literals</i>  are immutable&quot;?  In detail, even <i>string literals</i> are changeable - maybe.  To attempt to change them is UB - it might work, might not."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 1, "last_activity_date": 1537911202, "creation_date": 1537911202, "answer_id": 52506990, "question_id": 52506916, "link": "https://stackoverflow.com/questions/52506916/removing-a-string-terminator-and-adding-newline-character-in-c/52506990#52506990", "title": "Removing a string terminator and adding newline character in C", "body": "<p>C strings are immutable, effectively <code>char const[]</code> that only look like <code>char []</code> for strange historical reasons.</p>\n\n<p>If you want a mutable string, initialize a char array from a string literal:</p>\n\n<pre><code>char value[] = \"message\"; //autosized\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10397653, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DqdSRVGXEYw/AAAAAAAAAAI/AAAAAAAAFgY/YU5DOQ2vIoY/photo.jpg?sz=128", "display_name": "Anindya", "link": "https://stackoverflow.com/users/10397653/anindya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1537911267, "creation_date": 1537910792, "last_edit_date": 1537911267, "question_id": 52506916, "link": "https://stackoverflow.com/questions/52506916/removing-a-string-terminator-and-adding-newline-character-in-c", "title": "Removing a string terminator and adding newline character in C", "body": "<p>I was trying to make a function that removes the string terminator and adds a newline character instead to a string. The way i do it leads to a segfault. And i am unable to wrap my head around why my string is immutable and how to make it work with my implementation. Thanks a lot for any help.</p>\n\n<pre><code>int main () {\n    char* value = \"message\";\n    value[7] = '\\n';\n    int success = write(1, value, 7);\n    if (success == -1) {\n        printf(\"write failed\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "gtk", "gtk3"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 9357817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04fe4fcad92eaff612c8ce3ff8862d79?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas M", "link": "https://stackoverflow.com/users/9357817/vikas-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1537932601, "creation_date": 1537932601, "answer_id": 52509515, "question_id": 52506854, "link": "https://stackoverflow.com/questions/52506854/how-do-you-create-a-project-directory-tree-view-and-tree-store-in-gtk/52509515#52509515", "title": "How do you create a project directory tree view and tree store in GTK?", "body": "<p>The way I solved this problem was by storing expanded rows in a data structure before clearing the TreeView. I used a keyed data list to associate the name of the expanded row and its corresponding depth (row name is key and depth is value). I then clear the TreeView and repopulate it as usual. After, I traverse the TreeModel row by row. If the row name is a key in the keyed datalist and the row has the same depth as the depth value of the keyed datalist, I expand that row. Here is the code:</p>\n\n<pre><code>num\n{\n    COL_NAME = 0,\n    NUM_COLS\n};\n\nvoid populate_directory_tree_store(GtkTreeStore *treestore, const char *directory, GtkTreeIter *toplevel) {\n    DIR *dir;\n    struct dirent *entry;\n\n    GtkTreeIter child;\n\n    if (!(dir = opendir(directory)))\n        return;\n\n    while ((entry = readdir(dir)) != NULL) {\n        if (entry-&gt;d_type == DT_DIR) {\n            char path[1024];\n            if (strcmp(entry-&gt;d_name, \".\") == 0 || strcmp(entry-&gt;d_name, \"..\") == 0)\n                continue;\n            snprintf(path, sizeof(path), \"%s/%s\", directory, entry-&gt;d_name);\n\n            gtk_tree_store_append(treestore, &amp;child, toplevel);\n            gtk_tree_store_set(treestore, &amp;child,\n                0, entry-&gt;d_name,\n                -1);\n\n            populate_directory_tree_store(treestore, path, &amp;child);\n        }\n        else {\n            gtk_tree_store_append(treestore, &amp;child, toplevel);\n            gtk_tree_store_set(treestore, &amp;child,\n                0, entry-&gt;d_name,\n                -1);\n        }\n    }\n    closedir(dir);\n}\n\nvoid foreach_expanded_row(GtkTreeView *tree_view, GtkTreePath *path, gpointer user_data) {\n    GData **datalist = user_data;\n\n    GtkTreeStore *treestore = GTK_TREE_STORE(gtk_tree_view_get_model(tree_view));\n\n    GValue key = G_VALUE_INIT;\n\n    char *treePathString = gtk_tree_path_to_string(path);\n\n    GtkTreeIter treeIter;\n    gtk_tree_model_get_iter_from_string(GTK_TREE_MODEL(treestore), &amp;treeIter, treePathString);\n    gtk_tree_model_get_value(GTK_TREE_MODEL(treestore), &amp;treeIter, COL_NAME, &amp;key);\n\n    g_datalist_id_set_data(datalist, g_quark_from_string(g_value_get_string(&amp;key)), GINT_TO_POINTER(gtk_tree_path_get_depth(path)));\n}\n\ngboolean foreach_tree_model_row(GtkTreeModel *model, GtkTreePath *path, GtkTreeIter *iter, gpointer data) {\n    struct combined_data {\n        GData **datalist;\n        GtkTreeView *treeview;\n    };\n\n    struct combined_data *cd = data;\n\n    GData **datalist = cd-&gt;datalist;\n    GtkTreeView *treeview = cd-&gt;treeview;\n\n    GValue key = G_VALUE_INIT;\n\n    char *treePathString = gtk_tree_path_to_string(path);\n\n    GtkTreeIter treeIter;\n    gtk_tree_model_get_iter_from_string(model, &amp;treeIter, treePathString);\n    gtk_tree_model_get_value(model, &amp;treeIter, COL_NAME, &amp;key);\n\n    int depth = g_datalist_get_data(datalist, g_value_get_string(&amp;key));\n\n    if (depth &amp;&amp; gtk_tree_path_get_depth(path) == depth) {\n        gtk_tree_view_expand_row(treeview, path, FALSE);\n    }\n\n    return FALSE;\n}\n\nvoid refresh_tree_view(GtkTreeView *treeview, GtkTreeStore *treestore) {\n    GData *datalist;\n\n    g_datalist_init(&amp;datalist);\n\n    gtk_tree_view_map_expanded_rows(treeview, foreach_expanded_row, &amp;datalist);\n\n    GtkTreeIter toplevel;\n    gtk_tree_store_clear(treestore);\n    gtk_tree_store_append(treestore, &amp;toplevel, NULL);\n    gtk_tree_store_set(treestore, &amp;toplevel, 0, \"MainProject\", -1);\n\n    populate_directory_tree_store(treestore, \"C:\\\\Projects, &amp;toplevel);\n\n    struct combined_data {\n        GData **datalist;\n        GtkTreeView *treeview;\n    };\n\n    struct combined_data *cd = malloc(sizeof(struct combined_data));\n\n    cd-&gt;datalist = &amp;datalist;\n    cd-&gt;treeview = treeview;\n\n    gtk_tree_model_foreach(GTK_TREE_MODEL(treestore), foreach_tree_model_row, cd);\n\n    free(cd);\n}\n</code></pre>\n\n<p>Every time I need to update the project view with the current directories, I simply call</p>\n\n<pre><code>refresh_tree_view(treeview, treestore);\n</code></pre>\n\n<p>Hope this helps anyone with the same issue.</p>\n"}], "owner": {"reputation": 51, "user_id": 9357817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04fe4fcad92eaff612c8ce3ff8862d79?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas M", "link": "https://stackoverflow.com/users/9357817/vikas-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "accepted_answer_id": 52509515, "answer_count": 1, "score": 0, "last_activity_date": 1537932601, "creation_date": 1537910431, "question_id": 52506854, "link": "https://stackoverflow.com/questions/52506854/how-do-you-create-a-project-directory-tree-view-and-tree-store-in-gtk", "title": "How do you create a project directory tree view and tree store in GTK?", "body": "<p>I have been stuck on a problem recently with trying to create a project view in GTK. The issue is that my program constantly deletes and adds files to a project directory, but to account for these changes, the TreeStore of the project tree view needs to be cleared and repopulated. When the TreeStore is cleared and repopulated, the project TreeView collapses all of its headers. Take the following example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/U5JKJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U5JKJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is the project view before the program adds another folder named \"SubProject2\" under MainProject, clears the TreeModel, and repopulates it with the same directory.</p>\n\n<p>This is the project view after:\n<a href=\"https://i.stack.imgur.com/oGTS5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oGTS5.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note that the folder \"SubProject2\" was added correctly under \"MainProject\", but the TreeView collapsed \"MainProject\".</p>\n\n<p>My current code for repopulating the TreeView is the following:</p>\n\n<pre><code>void populate_directory_tree_store(GtkTreeStore *treestore, const char *directory, GtkTreeIter *toplevel) {\n    DIR *dir;\n    struct dirent *entry;\n\n    GtkTreeIter child;\n\n    if (!(dir = opendir(directory)))\n        return;\n\n    while ((entry = readdir(dir)) != NULL) {\n        if (entry-&gt;d_type == DT_DIR) {\n            char path[1024];\n            if (strcmp(entry-&gt;d_name, \".\") == 0 || strcmp(entry-&gt;d_name, \"..\") == 0)\n                continue;\n            snprintf(path, sizeof(path), \"%s/%s\", directory, entry-&gt;d_name);\n\n            gtk_tree_store_append(treestore, &amp;child, toplevel);\n            gtk_tree_store_set(treestore, &amp;child,\n                0, entry-&gt;d_name,\n                -1);\n\n            populate_directory_tree_store(treestore, path, &amp;child);\n        }\n        else {\n            gtk_tree_store_append(treestore, &amp;child, toplevel);\n            gtk_tree_store_set(treestore, &amp;child,\n                0, entry-&gt;d_name,\n                -1);\n        }\n    }\n    closedir(dir);\n}\n</code></pre>\n\n<p>Every time the project directory is changed, I call the function like so:</p>\n\n<pre><code>gtk_tree_store_clear(treestore);\npopulate_directory_tree_store(treestore, \"C:\\\\Projects\", &amp;topIterator);\n</code></pre>\n\n<p>I have thought about using a library like libfswatch (<a href=\"https://github.com/emcrisostomo/fswatch\" rel=\"nofollow noreferrer\">located here</a>) for detecting directory changes in real time and changing the project TreeView with each change, but it requires multi-threading. I don't know if I am overlooking something in GtkTreeView, but something this trivial shouldn't be so difficult. If you have any questions or feedback, please post them.</p>\n\n<p>Thank you,\nVikas</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 6, "creation_date": 1537909495, "post_id": 52506632, "comment_id": 91953739, "body": "It &quot;stringizes&quot; the token. In your example <code>FPGA_WRITE(10, 15)</code> becomes after preprocessing <code>do { printf(&quot;...&quot;, &quot;10&quot;, (10), ...); } while (0)</code>"}, {"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 3, "creation_date": 1537909906, "post_id": 52506632, "comment_id": 91953920, "body": "And <i>without</i> the stringification, you&#39;re trying to printf the <code>int</code> value 10 as if it were a <code>char*</code>, which is undefined behavior."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1537909944, "post_id": 52506632, "comment_id": 91953932, "body": "I assume you&#39;re not talking about the one in <code>#define</code>?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 2, "creation_date": 1537909947, "post_id": 52506632, "comment_id": 91953934, "body": "Note: it only works on the preprocessing stage. <code>int a = 42; char v[] = #a &#47;* not &quot;42&quot;! Error! *&#47;;</code>"}, {"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 5, "creation_date": 1537915698, "post_id": 52506632, "comment_id": 91955628, "body": "To be fair to the asker, it&#39;s hard to do a Web search for a punctuation mark.  And, being a preprocessor rather than &quot;language&quot; feature, <code>#</code> is not often mentioned in tables of C &quot;operators&quot;."}, {"owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 0, "creation_date": 1538929201, "post_id": 52506632, "comment_id": 92307819, "body": "Can this question be in faq?"}], "answers": [{"tags": [], "owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "is_accepted": true, "score": 7, "last_activity_date": 1537967776, "last_edit_date": 1537967776, "creation_date": 1537909495, "answer_id": 52506678, "question_id": 52506632, "link": "https://stackoverflow.com/questions/52506632/what-does-sign-mean-in-c/52506678#52506678", "title": "What does # sign mean in C?", "body": "<p>It is <a href=\"https://msdn.microsoft.com/en-us/library/7e3a913x.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">Stringizing Operator (#)</a> used inside <code>#define</code> pre-processor macros,\n<br/>which turns the argument it precedes into a quoted string</p>\n"}], "owner": {"reputation": 347, "user_id": 10156846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e92ca07f07ea059f18e9aea60e4ed92?s=128&d=identicon&r=PG&f=1", "display_name": "Sedmaister", "link": "https://stackoverflow.com/users/10156846/sedmaister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 2, "accepted_answer_id": 52506678, "answer_count": 1, "score": 5, "last_activity_date": 1537967776, "creation_date": 1537909265, "question_id": 52506632, "link": "https://stackoverflow.com/questions/52506632/what-does-sign-mean-in-c", "title": "What does # sign mean in C?", "body": "<p>I have come across this code and I am not sure what <code>#reg</code>is doing:</p>\n\n<pre><code>#define FPGA_WRITE(reg,val) do { printf(\"%-20s %08X &lt;&lt;- %08lX\\n\", #reg, (reg), (unsigned long)(val));} while (0)\n\nint main()\n{\n   FPGA_WRITE(10,15);\n   return 0;\n}\n</code></pre>\n\n<p>This prints this following:</p>\n\n<pre><code>10                   0000000A &lt;&lt;- 0000000F\n</code></pre>\n\n<p>If I take out the <code>#</code>, I get a segfault when I execute the code. Strange. What is the usage of <code>#</code>?</p>\n"}, {"tags": ["c", "linux", "networking", "netlink"], "answers": [{"tags": [], "owner": {"reputation": 486, "user_id": 2730971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cqyzs.jpg?s=128&g=1", "display_name": "Raymond Burkholder", "link": "https://stackoverflow.com/users/2730971/raymond-burkholder"}, "is_accepted": false, "score": 1, "last_activity_date": 1566786771, "creation_date": 1566786771, "answer_id": 57651168, "question_id": 52506626, "link": "https://stackoverflow.com/questions/52506626/linux-rtnetlink-rtm-getlink-handle-and-understand-answered-data/57651168#57651168", "title": "Linux - rtnetlink RTM_GETLINK - handle and understand answered data", "body": "<p>The short cut is to use libnl:</p>\n\n<p><a href=\"https://github.com/thom311/libnl\" rel=\"nofollow noreferrer\">libnl github</a></p>\n\n<p>described at:</p>\n\n<p><a href=\"http://www.infradead.org/~tgr/libnl/doc/\" rel=\"nofollow noreferrer\">libnl docs</a></p>\n\n<p>That site for that link as well as api information can be generated when building the libraries.</p>\n\n<p>When you have downloaded and built, a couple links talking about those attributes:</p>\n\n<pre><code>libnl/doc/api/lib_2route_2link_8c_source.html\n\nlib/route/link.c\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10053012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95d3dc4f07fea8e1fd0f919bf9fe4b39?s=128&d=identicon&r=PG&f=1", "display_name": "v01d", "link": "https://stackoverflow.com/users/10053012/v01d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1309, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1566786771, "creation_date": 1537909237, "last_edit_date": 1537992960, "question_id": 52506626, "link": "https://stackoverflow.com/questions/52506626/linux-rtnetlink-rtm-getlink-handle-and-understand-answered-data", "title": "Linux - rtnetlink RTM_GETLINK - handle and understand answered data", "body": "<p>I'am trying to understand how rtnetlink works, so I started playing with the idea to build a little library for my self to get into it.</p>\n\n<p>I've got to the point where sending/receiving netlink messages works fine.\nRight now I'am struggling on how to process the answer of an <em>RTM_GETLINK</em> request.\nThis is my current code:</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;linux/if.h&gt;\n#include &lt;linux/if_link.h&gt;\n#include &lt;linux/rtnetlink.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(void) {\n  unsigned char buf[65535];\n  unsigned char mac_buf[6];\n  int tmp_int;\n\n  /*\n   * a standard request\n   */\n  struct {\n    struct nlmsghdr __r_nl_msg;\n    struct ifinfomsg __r_ii_msg;\n  } req;\n\n  int sfd, answer_size, attr_len;\n\n  struct nlmsghdr *nl_msg_ptr;\n  struct ifinfomsg *inf_msg_ptr;\n  struct rtattr *rta_ptr;\n\n  /*\n   * create a socket\n   */\n  if ((sfd = socket(PF_NETLINK, SOCK_DGRAM, NETLINK_ROUTE)) &lt; 0) {\n    fprintf(stderr, \"ERROR socket(): %s\\n\", strerror(errno));\n    return (sfd);\n  }\n\n  /*\n   * zero out req\n   */\n  memset(&amp;req, 0, sizeof(req));\n\n  /*\n   * prepare the header\n   */\n  req.__r_nl_msg.nlmsg_len = NLMSG_LENGTH(sizeof(struct ifinfomsg));\n  req.__r_nl_msg.nlmsg_flags = NLM_F_REQUEST | NLM_F_MATCH;\n  req.__r_nl_msg.nlmsg_type = RTM_GETLINK; /* to get iface information */\n  req.__r_nl_msg.nlmsg_seq = 1;            /* start seq */\n\n  req.__r_ii_msg.ifi_family = AF_UNSPEC; /* AF_INET6 for IPv6 */\n  req.__r_ii_msg.ifi_change =\n      0xffffffff; /* man rtnetlink says this; but why? */\n\n  /*\n   * send out request\n   */\n  if (send(sfd, &amp;req, req.__r_nl_msg.nlmsg_len, 0) &lt; 0) {\n    fprintf(stderr, \"ERROR send(): %s\\n\", strerror(errno));\n    close(sfd);\n    return (-1);\n  }\n\n  /*\n   * receive the answer/process it\n   */\n  while (1) {\n    if ((answer_size = recv(sfd, buf, sizeof(buf), 0)) &lt; 0) {\n      fprintf(stderr, \"ERROR recv(): %s\\n\", strerror(errno));\n      close(sfd);\n      return (-1);\n    }\n\n    printf(\"\\n=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=\\n\");\n    printf(\"[INFO] %d bytes received.\\n\", answer_size);\n\n    /*\n     * go over the nlmsghdr's in this answer\n     */\n    for (nl_msg_ptr = (struct nlmsghdr *)buf;\n         answer_size &gt; (int)sizeof(*nl_msg_ptr);) {\n      int len = nl_msg_ptr-&gt;nlmsg_len;\n\n      printf(\"[INFO] Message length of '%d' bytes.\\n\", len);\n\n      /*\n       * check if we should stop here\n       */\n      switch (nl_msg_ptr-&gt;nlmsg_type) {\n      case NLMSG_ERROR:\n        printf(\"[ERROR] Message is of tmp_int 'NLMSG_ERROR'.\\n\");\n      case NLMSG_DONE:\n        close(sfd);\n        return (0);\n      }\n\n      if (!NLMSG_OK(nl_msg_ptr, (unsigned int)answer_size)) {\n        printf(\"[ERROR] Received message is NOT ok.\\n\");\n        close(sfd);\n        return (-1);\n      }\n\n      /*\n       * set pointers to work with\n       */\n      inf_msg_ptr = (struct ifinfomsg *)NLMSG_DATA(nl_msg_ptr);\n      rta_ptr = (struct rtattr *)IFLA_RTA(inf_msg_ptr);\n\n      printf(\"[INFO] Index is: '%d'.\\n\", inf_msg_ptr-&gt;ifi_index);\n      printf(\"[INFO] Iface Type: '%d'\\n\", inf_msg_ptr-&gt;ifi_type); /* ARPHRD_* */\n      printf(\"[INFO] Up/Down: '%d'\\n\", inf_msg_ptr-&gt;ifi_flags &amp; IFF_UP);\n      printf(\"[INFO] Promisc: '%d'\\n\", inf_msg_ptr-&gt;ifi_flags &amp; IFF_PROMISC);\n\n      /*\n       * process attributes\n       */\n      attr_len = IFLA_PAYLOAD(nl_msg_ptr);\n\n      for (; RTA_OK(rta_ptr, attr_len); rta_ptr = RTA_NEXT(rta_ptr, attr_len)) {\n        switch (rta_ptr-&gt;rta_type) {\n        case IFLA_ADDRESS:\n          memcpy(mac_buf, RTA_DATA(rta_ptr), 6);\n          printf(\"[%d][ADDRRESS] %02x:%02x:%02x:%02x:%02x:%02x\\n\",\n                 inf_msg_ptr-&gt;ifi_index, mac_buf[0], mac_buf[1], mac_buf[2],\n                 mac_buf[3], mac_buf[4], mac_buf[5]);\n          break;\n\n        case IFLA_BROADCAST:\n          memcpy(mac_buf, RTA_DATA(rta_ptr), 6);\n          printf(\"[%d][BROADCAST] %02x:%02x:%02x:%02x:%02x:%02x\\n\",\n                 inf_msg_ptr-&gt;ifi_index, mac_buf[0], mac_buf[1], mac_buf[2],\n                 mac_buf[3], mac_buf[4], mac_buf[5]);\n          break;\n\n        case IFLA_IFNAME:\n          printf(\"[%d][IFNAME] %s\\n\", inf_msg_ptr-&gt;ifi_index,\n                 RTA_DATA(rta_ptr));\n          break;\n\n        case IFLA_MTU:\n          memcpy(&amp;tmp_int, RTA_DATA(rta_ptr), 4);\n          printf(\"[%d][MTU] %d\\n\", inf_msg_ptr-&gt;ifi_index, tmp_int);\n          break;\n\n        case IFLA_LINK:  /* ??? */\n          memcpy(&amp;tmp_int, RTA_DATA(rta_ptr), 4);\n          printf(\"[%d][LINK] %d\\n\", inf_msg_ptr-&gt;ifi_index, tmp_int);\n          break;\n\n        case IFLA_QDISC:\n          printf(\"[%d][QDISC] %s\\n\", inf_msg_ptr-&gt;ifi_index, RTA_DATA(rta_ptr));\n          break;\n\n        case IFLA_STATS:\n          printf(\"[%d][STATS] ...\\n\", inf_msg_ptr-&gt;ifi_index);\n          break;\n\n        case IFLA_COST: /* ??? */\n          memcpy(&amp;tmp_int, RTA_DATA(rta_ptr), 4);\n          printf(\"[%d][COST] %d\\n\", inf_msg_ptr-&gt;ifi_index, tmp_int);\n          break;\n\n        case IFLA_PRIORITY: /* ??? */\n          memcpy(&amp;tmp_int, RTA_DATA(rta_ptr), 4);\n          printf(\"[%d][PRIORITY] %d\\n\", inf_msg_ptr-&gt;ifi_index, tmp_int);\n          break;\n\n        case IFLA_MASTER: /* ??? */\n          memcpy(&amp;tmp_int, RTA_DATA(rta_ptr), 4);\n          printf(\"[%d][MASTER] %d\\n\", inf_msg_ptr-&gt;ifi_index, tmp_int);\n          break;\n\n        case IFLA_WIRELESS: /* ??? */\n          memcpy(&amp;tmp_int, RTA_DATA(rta_ptr), 4);\n          printf(\"[%d][WIRELESS] %d\\n\", inf_msg_ptr-&gt;ifi_index, tmp_int);\n          break;\n\n        case IFLA_PROTINFO: /* ??? */\n          memcpy(&amp;tmp_int, RTA_DATA(rta_ptr), 4);\n          printf(\"[%d][PROTINFO] %d\\n\", inf_msg_ptr-&gt;ifi_index, tmp_int);\n          break;\n\n        case IFLA_TXQLEN:\n          memcpy(&amp;tmp_int, RTA_DATA(rta_ptr), 4);\n          printf(\"[%d][TXQLEN] %d\\n\", inf_msg_ptr-&gt;ifi_index, tmp_int);\n          break;\n\n        case IFLA_MAP: /* ??? */\n          printf(\"[%d][MAP] ...\\n\", inf_msg_ptr-&gt;ifi_index);\n          break;\n\n        case IFLA_WEIGHT: /* ??? */\n          memcpy(&amp;tmp_int, RTA_DATA(rta_ptr), 4);\n          printf(\"[%d][WIGHT] %d\\n\", inf_msg_ptr-&gt;ifi_index, tmp_int);\n          break;\n\n        case IFLA_OPERSTATE: /* operational state; interface can be up but if\n                                nothing is connected its OPERSTATE is down */\n          memcpy(&amp;tmp_int, RTA_DATA(rta_ptr), 4);\n          printf(\"[%d][OPERSTATE] %d=\", inf_msg_ptr-&gt;ifi_index, tmp_int);\n          switch (tmp_int) {\n          case IF_OPER_UP:\n            printf(\"IF_OPER_UP\\n\");\n            break;\n          case IF_OPER_DORMANT:\n            printf(\"IF_OPER_DORMANT\\n\");\n            break;\n          case IF_OPER_LOWERLAYERDOWN:\n            printf(\"IF_OPER_LOWERLAYERDOWN\\n\");\n            break;\n          case IF_OPER_DOWN:\n            printf(\"IF_OPER_DOWN\\n\");\n            break;\n          case IF_OPER_NOTPRESENT:\n            printf(\"IF_OPER_NOTPRESENT\\n\");\n            break;\n          case IF_OPER_TESTING:\n            printf(\"IF_OPER_TESTING\\n\");\n            break;\n          case IF_OPER_UNKNOWN:\n            printf(\"IF_OPER_UNKNOWN\\n\");\n            break;\n          default:\n            printf(\"N/A\\n\");\n            break;\n          };\n          break;\n\n        case IFLA_LINKMODE: /* Mode of the link */\n          memcpy(&amp;tmp_int, RTA_DATA(rta_ptr), 4);\n          printf(\"[%d][LINKMODE] %d=\", inf_msg_ptr-&gt;ifi_index, tmp_int);\n          if (tmp_int == IF_LINK_MODE_DORMANT) {\n            printf(\"IF_LINK_MODE_DORMANT\\n\");\n          } else if (tmp_int == IF_LINK_MODE_DEFAULT) {\n            printf(\"IF_LINK_MODE_DEFAULT\\n\");\n          } else {\n            printf(\"UNKNOWN\\n\");\n          }\n          break;\n\n        case IFLA_LINKINFO: /* ??? */\n          printf(\"[%d][LINKINFO] ... len=%d\\n\", inf_msg_ptr-&gt;ifi_index,\n                 rta_ptr-&gt;rta_len);\n          break;\n\n        case IFLA_IFALIAS: /* alias of the interface - outdated since one\n                              interface can have multiple addrs. */\n          printf(\"[%d][IFALIAS] %s\\n\", inf_msg_ptr-&gt;ifi_index,\n                 RTA_DATA(rta_ptr));\n          break;\n\n        case IFLA_STATS64: /* stats with 64 bit values */\n          printf(\"[%d][STATS64] ...\\n\", inf_msg_ptr-&gt;ifi_index);\n          break;\n\n        case IFLA_GROUP: /* the group to which the interface belongs to ??? */\n          memcpy(&amp;tmp_int, RTA_DATA(rta_ptr), 4);\n          printf(\"[%d][GROUP] %d\\n\", inf_msg_ptr-&gt;ifi_index, tmp_int);\n          break;\n\n        case IFLA_PROMISCUITY: /* if &gt; 0, the interface is in promisc mode */\n          memcpy(&amp;tmp_int, RTA_DATA(rta_ptr), 4);\n          printf(\"[%d][PROMISCUITY] %d\\n\", inf_msg_ptr-&gt;ifi_index, tmp_int);\n          break;\n\n        case IFLA_CARRIER: /* if &gt; 0, the interface has a carrier e.g. is\n                              connected to something (???) */\n          memcpy(&amp;tmp_int, RTA_DATA(rta_ptr), 4);\n          printf(\"[%d][CARRIER] %d\\n\", inf_msg_ptr-&gt;ifi_index, tmp_int);\n          break;\n\n        case IFLA_PAD: /* ??? */\n          printf(\"[%d][PAD] len=%d\\n\", inf_msg_ptr-&gt;ifi_index,\n                 rta_ptr-&gt;rta_len);\n          break;\n\n        case IFLA_XDP: /* something about packet filtering ... ??? */\n          printf(\"[%d][XDP] len=%d\\n\", inf_msg_ptr-&gt;ifi_index,\n                 rta_ptr-&gt;rta_len);\n          break;\n\n        case IFLA_EVENT: /* ??? */\n          printf(\"[%d][EVENT] len=%d\\n\", inf_msg_ptr-&gt;ifi_index,\n                 rta_ptr-&gt;rta_len);\n          break;\n\n        default:\n          printf(\"[%d][UNKNOWN] len=%d tmp_int=%d\\n\", inf_msg_ptr-&gt;ifi_index,\n                 rta_ptr-&gt;rta_len, rta_ptr-&gt;rta_type);\n          break;\n        };\n      }\n\n      answer_size -= NLMSG_ALIGN(len);\n      nl_msg_ptr = (struct nlmsghdr *)((char *)nl_msg_ptr + NLMSG_ALIGN(len));\n    }\n  }\n  return (0);\n}\n</code></pre>\n\n<p>My biggest problem is that I don't know what some of the attribute types mean and what form they have (<em>char[], int, unsigned int, ...</em>).\nAlso, I don't know how to handle \"nested\" attributes like <em>IFLA_LINKINFO</em>.\nA summary of attributes I have problems with:</p>\n\n<pre><code>IFLA_LINK, IFLA_COST, IFLA_PRIORITY, IFLA_MASTER, IFLA_WIRELESS, IFLA_PROTINFO, IFLA_MAP, IFLA_WEIGHT, IFLA_LINKINFO, IFLA_AF_SPEC, IFLA_GROUP, IFLA_NUM_RX_QUEUES, IFLA_NUM_TX_QUEUES, IFLA_CARRIER, IFLA_CARRIER_CHANGES, IFLA_PROTO_DOWN, IFLA_GSO_MAX_SEGS, IFLA_GSO_MAX_SIZE, IFLA_PAD, IFLA_CARRIER_UP_COUNT, IFLA_CARRIER_DOWN_COUNT, IFLA_EVENT \n</code></pre>\n\n<p>... so basically with all of them.\nI used <em>/usr/include/linux/if_link.h</em> as reference for the attribute types.</p>\n\n<p>Any kind of help on any of my questions would be really nice! (Also feedback on my code) -- Thanks in advance!</p>\n"}]