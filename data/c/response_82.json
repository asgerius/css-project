[{"tags": ["c", "sockets", "virtual-machine"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1470267410, "post_id": 38755254, "comment_id": 64884268, "body": "Have you tried to follow the advice and add a newline at the end of the file?"}, {"owner": {"reputation": 433, "user_id": 5534612, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1671131956460669/picture?type=large", "display_name": "Tony Tannous", "link": "https://stackoverflow.com/users/5534612/tony-tannous"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470267913, "post_id": 38755254, "comment_id": 64884398, "body": "I didn&#39;t move the edited file into the shared directory. I was compiling the same file.  Aaaaaaaaargh!"}], "answers": [{"tags": [], "owner": {"reputation": 813, "user_id": 5382805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ag6IR.jpg?s=128&g=1", "display_name": "von Oak", "link": "https://stackoverflow.com/users/5382805/von-oak"}, "is_accepted": false, "score": 2, "last_activity_date": 1470267446, "creation_date": 1470267446, "answer_id": 38755285, "question_id": 38755254, "link": "https://stackoverflow.com/questions/38755254/no-newline-at-end-of-file-c/38755285#38755285", "title": "&quot;no newline at end of file&quot; C", "body": "<p>Add Enter (new line) behind the closing bracket.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470269349, "post_id": 38755301, "comment_id": 64884736, "body": "Not sure, but I think I have some faint memory about reading something about gcc requiring LF at the last line, too. Not sure when it was, though, could be well &gt;10 years ago. Anyway, I&#39;d expect it to be obsolete now, but as my editor is configuered to add a newline anyway, it never occured to me."}], "tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": true, "score": 2, "last_activity_date": 1470267949, "last_edit_date": 1470267949, "creation_date": 1470267537, "answer_id": 38755301, "question_id": 38755254, "link": "https://stackoverflow.com/questions/38755254/no-newline-at-end-of-file-c/38755301#38755301", "title": "&quot;no newline at end of file&quot; C", "body": "<p>Text processing programs don't always agree on whether a <code>\\n</code> character is <em>line separator</em> or <em>line terminator</em> - the difference being whether or not the last line in a file should be followed by a <code>\\n</code> character or not.</p>\n\n<p>I've never seen GCC complain about this, but you didn't indicate where the error is actually coming from.</p>\n\n<p>You should be able to correct the situation by simply pressing ENTER after the last line in your file. </p>\n\n<p>Alternatively, you could open, and them save the file using an editor like Vim, which considers it a line <em>terminator</em>.</p>\n\n<p>As a matter of comparison, most UNIX tools also consider <code>\\n</code> a line terminator, and include it after the final line. This allows one to <code>cat</code> a file without corrupting whatever follows (e.g. another file, the shell prompt, etc.)</p>\n"}], "owner": {"reputation": 433, "user_id": 5534612, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/1671131956460669/picture?type=large", "display_name": "Tony Tannous", "link": "https://stackoverflow.com/users/5534612/tony-tannous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2000, "favorite_count": 0, "closed_date": 1470289725, "accepted_answer_id": 38755301, "answer_count": 2, "score": -2, "last_activity_date": 1470267949, "creation_date": 1470267223, "question_id": 38755254, "link": "https://stackoverflow.com/questions/38755254/no-newline-at-end-of-file-c", "closed_reason": "Not suitable for this site", "title": "&quot;no newline at end of file&quot; C", "body": "<p>I'm using this command to compile:</p>\n\n<p><code>gcc \u2013Werror \u2013std=c99 client.c \u2013o client</code> </p>\n\n<p>CODE:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;strings.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n\n\n#define BUFFER_SIZE 1000\n#define PORT_NUM 8888\n\nvoid error(char *msg)\n{\n    perror(msg);\n    exit(0);\n}\n\nint main(int argc, char *argv[])\n{\n    int sockfd, portno, n;\n\n    struct sockaddr_in serv_addr;\n    struct hostent *server;\n    char buffer[BUFFER_SIZE];\n\n    if (argc &lt; 3) {\n       fprintf(stderr,\"usage %s hostname port\\n\", argv[0]);\n       exit(0);\n    }\n    portno = atoi(argv[2]);\n\n    sockfd = socket(AF_INET, SOCK_STREAM, 0);\n    if (sockfd &lt; 0) \n        error(\"ERROR opening socket\");\n\n    server = gethostbyname(argv[1]);\n    if (server == NULL) {\n        fprintf(stderr,\"ERROR, no such host\\n\");\n        exit(0);\n    }\n\n    bzero((char *) &amp;serv_addr, sizeof(serv_addr));\n    serv_addr.sin_family = AF_INET;\n    bcopy((char *)server-&gt;h_addr, \n         (char *)&amp;serv_addr.sin_addr.s_addr,\n         server-&gt;h_length);\n    serv_addr.sin_port = htons(portno);\n    if (connect(sockfd,(struct sockaddr *)&amp;serv_addr,sizeof(serv_addr)) &lt; 0) \n        error(\"ERROR connecting\");\n\n   while (1) \n   {\n        bzero(buffer, BUFFER_SIZE);\n        fgets(buffer, BUFFER_SIZE, stdin);\n        if((strncmp(buffer,\"close\",5) == 0 ))\n            break;\n        printf(\"Please enter the message: \");\n        bzero(buffer, BUFFER_SIZE);\n        n = write(sockfd,buffer,strlen(buffer));\n        if (n &lt; 0) \n            error(\"ERROR writing to socket\");\n        bzero(buffer, BUFFER_SIZE);\n        n = read(sockfd,buffer, BUFFER_SIZE-1);\n        if (n &lt; 0) \n            error(\"ERROR reading from socket\");\n        printf(\"%s\\n\",buffer);\n    }\n\n    close(sockfd);\n\n    return 0;\n\n}\n</code></pre>\n\n<p>Trying to compile it in a shell on VM whos OS is linux\nThis error is driving me crazy, I don't understand what to do inorder to fix this.\nI thought the client.c file is damaged, so I copied and pasted into a new .c file. When that failed, I wrote it from 0 and still getting this error.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "segmentation-fault", "apple-push-notifications"], "comments": [{"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1470267366, "post_id": 38755132, "comment_id": 64884259, "body": "Because there is a c routine named <code>connect()</code>. While you are not directly invoking nor compiling your code against <code>connect()</code>, <code>apn_connect()</code> will. Try using a different name that will not conflict with any existing one. I suggest <code>apn_connect_wrapper()</code> so you and future maintainer will remember that it is just a wrapper for the <code>apn_connect()</code>."}, {"owner": {"reputation": 2404, "user_id": 3887769, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/rfwkx.png?s=128&g=1", "display_name": "beeef", "link": "https://stackoverflow.com/users/3887769/beeef"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1470267892, "post_id": 38755132, "comment_id": 64884391, "body": "You are right. Changed the name and it works. But when I outsource another code I still get a segfault. I&#39;m updating my question."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1470269842, "post_id": 38755132, "comment_id": 64884878, "body": "This <code>ctx = apn_init()</code> sets <code>ctx</code> to the address returned by <code>apn_init()</code>. The issue is that you lose track of this dynamically allocated address when <code>apn_ctx_init_wrapper()</code> returns to the caller. Remember that you are passing the value of <code>ctx</code> from <code>main()</code> and in <code>apn_ctx_init_wrapper()</code> you thought you are replacing the content of <code>ctx</code> but you aren&#39;t because you passed by value. In later part of your code, when you reference <code>ctx</code> it still contains whatever initial value it had prior to the call to <code>apn_ctx_init_wrapper()</code>. Change the wrapper to accept <code>apn_ctx_t **ctx</code>."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1470270455, "post_id": 38755132, "comment_id": 64885026, "body": "Actually, instead of returning <code>0</code> or <code>-1</code>, why not return the <code>ctx</code>? Then in main you just need to check for <code>NULL</code> to mean failed."}], "answers": [{"comments": [{"owner": {"reputation": 2404, "user_id": 3887769, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/rfwkx.png?s=128&g=1", "display_name": "beeef", "link": "https://stackoverflow.com/users/3887769/beeef"}, "edited": false, "score": 0, "creation_date": 1470300168, "post_id": 38755794, "comment_id": 64896797, "body": "I thought as long as I pass a pointer it&#39;s ok. Didn&#39;t think of that! Thank you very much!"}], "tags": [], "owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "is_accepted": true, "score": 1, "last_activity_date": 1470272986, "last_edit_date": 1470272986, "creation_date": 1470271391, "answer_id": 38755794, "question_id": 38755132, "link": "https://stackoverflow.com/questions/38755132/c-segmentation-fault-libcapn-apns-library/38755794#38755794", "title": "C Segmentation Fault (Libcapn APNS Library)", "body": "<p>This is a classic case of passing a pointer by value and attempting to point the local copy of the pointer to a new location. The original pointer is left pointing at the original location.</p>\n\n<p>I will give you 2 approaches to this situation.</p>\n\n<p>You can modify the function so it will accept the address of the pointer.</p>\n\n<pre><code>int apn_ctx_init_wrapper(apn_ctx_t **ctx) {\n    if(NULL == (*ctx = apn_init())) { //Note that the pointer needs to be dereferenced\n        printf(\"Unable to init context: %d\\n\", errno);\n        apn_library_free();\n        return -1;\n    }\n\n    apn_set_pkcs12_file(*ctx, \"my-certificate.p12\", \"my4711passphrase\");\n    apn_set_mode(*ctx,  APN_MODE_SANDBOX); //APN_MODE_PRODUCTION or APN_MODE_SANDBOX\n    apn_set_behavior(*ctx, APN_OPTION_RECONNECT);\n    apn_set_log_level(*ctx, APN_LOG_LEVEL_INFO | APN_LOG_LEVEL_ERROR | APN_LOG_LEVEL_DEBUG);\n    apn_set_log_callback(*ctx, __apn_logging);\n    apn_set_invalid_token_callback(*ctx, __apn_invalid_token);\n\n    return 0;\n}\n</code></pre>\n\n<p>And in main you can call it as <code>if(apn_ctx_init_wrapper(&amp;ctx) != -1)</code>.</p>\n\n<p>Second method is to return the context instead of returning <code>0</code> or <code>-1</code>.</p>\n\n<pre><code>apn_ctx_t *apn_ctx_init_wrapper() {\n    apn_ctx_t *ctx;\n    if(NULL == (ctx = apn_init())) {\n        printf(\"Unable to init context: %d\\n\", errno);\n        apn_library_free();\n        return NULL;\n    }\n\n    apn_set_pkcs12_file(ctx, \"my-certificate.p12\", \"my4711passphrase\");\n    apn_set_mode(ctx,  APN_MODE_SANDBOX); //APN_MODE_PRODUCTION or APN_MODE_SANDBOX\n    apn_set_behavior(ctx, APN_OPTION_RECONNECT);\n    apn_set_log_level(ctx, APN_LOG_LEVEL_INFO | APN_LOG_LEVEL_ERROR | APN_LOG_LEVEL_DEBUG);\napn_set_log_callback(ctx, __apn_logging);\napn_set_invalid_token_callback(ctx, __apn_invalid_token);\n\n    return ctx;\n}\n</code></pre>\n\n<p>An in main you can call it as <code>if(NULL == (ctx = apn_ctx_init_wrapper()))</code>. There is no need to pass context into the function as the function is creating and initializing the context.</p>\n\n<p>I prefer the second method.</p>\n"}], "owner": {"reputation": 2404, "user_id": 3887769, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/rfwkx.png?s=128&g=1", "display_name": "beeef", "link": "https://stackoverflow.com/users/3887769/beeef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 38755794, "answer_count": 1, "score": 0, "last_activity_date": 1470272986, "creation_date": 1470266316, "last_edit_date": 1470268297, "question_id": 38755132, "link": "https://stackoverflow.com/questions/38755132/c-segmentation-fault-libcapn-apns-library", "title": "C Segmentation Fault (Libcapn APNS Library)", "body": "<p>I'm working on a C program which uses the <em>Libcapn</em> Library (<a href=\"http://libcapn.org\" rel=\"nofollow\">http://libcapn.org</a>) to connect to Apple's Push Notification Service and send push notifications.</p>\n\n<p>The example which is shown on the website works fine, I can send push notifications to my iPhone with that.</p>\n\n<p>Now I'm going to integrate this into my existing program to send more specific notifications to my iPhone, but I always get a segmentation fault when I try to split the code into multiple functions.</p>\n\n<p>Example: In the given code everything happens in the <code>main</code>function:</p>\n\n<pre><code>int main() {\n    apn_payload_t *payload = NULL;\n    apn_ctx_t *ctx = NULL;\n    time_t time_now = 0;\n    char *invalid_token = NULL;\n\n    // ...\n\n    if(NULL == (ctx = apn_init())) {\n        printf(\"Unable to init context: %d\\n\", errno);\n        apn_library_free();\n        return -1;\n    }\n\n    apn_set_pkcs12_file(ctx, \"my-certificate.p12\", \"my4711passphrase\");\n    apn_set_mode(ctx,  APN_MODE_SANDBOX); //APN_MODE_PRODUCTION or APN_MODE_SANDBOX\n    apn_set_behavior(ctx, APN_OPTION_RECONNECT);\n    apn_set_log_level(ctx, APN_LOG_LEVEL_INFO | APN_LOG_LEVEL_ERROR | APN_LOG_LEVEL_DEBUG);\n    apn_set_log_callback(ctx, __apn_logging);\n    apn_set_invalid_token_callback(ctx, __apn_invalid_token);\n\n    // ...\n\n}\n</code></pre>\n\n<p>Although it works it's not exactly what I want. I don't want to allocate/free all resources everytime I want to send a single notification. Therefore I want to open the connection at startup, set the mode to \"RECONNECT\" (so it reconnects automatically after the connection was closed) and just free all resources when the program terminates.</p>\n\n<p>So if I just \"outsource\" e.g. the initialization of the <code>context</code> to a new function, I get a segmentation fault. Here's what I did:</p>\n\n<pre><code>int apn_ctx_init_wrapper(apn_ctx_t *ctx) {\n    if(NULL == (ctx = apn_init())) {\n        printf(\"Unable to init context: %d\\n\", errno);\n        apn_library_free();\n        return -1;\n    }\n\n    apn_set_pkcs12_file(ctx, \"my-certificate.p12\", \"my4711passphrase\");\n    apn_set_mode(ctx,  APN_MODE_SANDBOX); //APN_MODE_PRODUCTION or APN_MODE_SANDBOX\n    apn_set_behavior(ctx, APN_OPTION_RECONNECT);\n    apn_set_log_level(ctx, APN_LOG_LEVEL_INFO | APN_LOG_LEVEL_ERROR | APN_LOG_LEVEL_DEBUG);\n    apn_set_log_callback(ctx, __apn_logging);\n    apn_set_invalid_token_callback(ctx, __apn_invalid_token);\n\n    return 0;\n}\n</code></pre>\n\n<p>... and I replaced the code above with to a single function call like <code>apn_ctx_init_wrapper(ctx);</code>. It doesn't even return <code>0</code> or <code>-1</code>. When the function get's called I get a segfault. Why? Please help me!</p>\n"}, {"tags": ["c", "linux", "sockets"], "comments": [{"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 2, "creation_date": 1470267944, "post_id": 38755109, "comment_id": 64884402, "body": "While the server ran out of file handle, the OS may have queued the client connection attempt. The client will only disconnect when it is denied the connection. Absence of a reply will just block the client."}, {"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1470268549, "post_id": 38755109, "comment_id": 64884549, "body": "@alvits: Thanks.  So there&#39;s no way for me to solve this problem?  The connect() will be blocked indefinitely?  Is the only solution to timeout the connect() call?"}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1470269124, "post_id": 38755109, "comment_id": 64884677, "body": "@nickdu - I see that you are already sending a timeout value, you should set socket to <code>O_NONBLOCK</code>."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1470269396, "post_id": 38755109, "comment_id": 64884747, "body": "@alvits <a href=\"http://linux.die.net/man/7/socket\" rel=\"nofollow noreferrer\">SO_SNDTIMEO</a> is a write timeout. It has nothing to do with <code>connect()</code>."}, {"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1470269551, "post_id": 38755109, "comment_id": 64884793, "body": "@alvits: yes, if you look at the code I do have some lines in there to set the connecting side of the socket to non-blocking mode.  I commented those out temporarily because it didn&#39;t seem to be timing out as I expected.  It was returning an EAGAIN, but way sooner than the timeout value I gave it."}, {"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1470269667, "post_id": 38755109, "comment_id": 64884823, "body": "@EJP: I was looking over some source code and it appears the SO_SNDTIMEO is also used to timeout the connect."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1470269714, "post_id": 38755109, "comment_id": 64884835, "body": "@nickdu I was looking at the <i>man</i> page which says not."}, {"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1470269980, "post_id": 38755109, "comment_id": 64884914, "body": "@EJP: check out my answer to <a href=\"http://stackoverflow.com/questions/35801679/cant-seem-to-get-a-timeout-working-when-connecting-to-a-socket\" title=\"cant seem to get a timeout working when connecting to a socket\">stackoverflow.com/questions/35801679/&hellip;</a>.  I include some snippets of source I found."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1470270155, "post_id": 38755109, "comment_id": 64884957, "body": "@nickdu - <code>EAGAIN</code> is described as <i>No more free local ports or insufficient entries in the routing cache.</i>. This is better than a <code>TIMEOUT</code> because in reality, your client really can&#39;t connect to the server due to resource exhaustion."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1470270168, "post_id": 38755109, "comment_id": 64884963, "body": "It isn&#39;t germane to this question."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1470270267, "post_id": 38755109, "comment_id": 64884982, "body": "@nickdu - as to my comment about adding <code>O_NONBLOCK</code>, it&#39;s because you commented it out that caused the client connection to block."}, {"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1470270570, "post_id": 38755109, "comment_id": 64885051, "body": "@alvits: yes, I&#39;m realizing that commenting out the call is what&#39;s got the connecting side blocked, but I was assuming the failure on the accepting side would be reported to the connect() call, so this is why I kept the code commented out.  I&#39;m not learning more about how connect()/accept() works."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1470274174, "post_id": 38755109, "comment_id": 64886805, "body": "The <code>EAGAIN</code> is curious. <code>connect()</code> returns error <code>EINPROGRESS</code>, not <code>EAGAIN</code>, if the socket is non-blocking and the connection wasn&#39;t completed immediately."}, {"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "edited": false, "score": 0, "creation_date": 1470274389, "post_id": 38755109, "comment_id": 64886842, "body": "connect was returning EAGAIN in non-blocking mode on my fedora 23 OS.  However, once I get the timeout working by setting the send timeout on the socket, I removed the code which sets the socket in non-blocking mode and the code was timing out as expected.  It was still returning EAGAIN, but once I got the connect timeout working, I don&#39;t really care what the error is."}], "answers": [{"comments": [{"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "edited": false, "score": 0, "creation_date": 1470268390, "post_id": 38755315, "comment_id": 64884509, "body": "Thanks, but I&#39;m not sure that&#39;s true.  If it was, why is my connect() call blocked when I hit this condition?  Also, I set the backlog on the listen() call to zero."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "edited": false, "score": 0, "creation_date": 1470268484, "post_id": 38755315, "comment_id": 64884534, "body": "It&#39;s true all right. The listen backlog queue fills up if you aren&#39;t accepting, which eventually causes new connections to block or fail, depending on the server platform."}, {"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1470268528, "post_id": 38755315, "comment_id": 64884542, "body": "I don&#39;t believe the kernel acknowledges the connect (e.g., sends a SYN packet) until accept() returns."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1470268573, "post_id": 38755315, "comment_id": 64884555, "body": "@Max Believe whatever you like, but it does. Try it. Call connect without calling accept."}, {"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "edited": false, "score": 0, "creation_date": 1470268754, "post_id": 38755315, "comment_id": 64884601, "body": "@EJP: So you&#39;re saying that since my listen backlog is zero, eg. there is no queue, the OS is blocking the connect() calls until either accept() succeeds or the connect() call times out?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1470268926, "post_id": 38755315, "comment_id": 64884638, "body": "Actually no. The kernel will adjust the backlog up or  down to suit itself, and it will never operate with a zero backlog. The minimum is five or fifty depending on your platform. But the behaviour you describe is what happens when the backlog queue fills up."}, {"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "edited": false, "score": 0, "creation_date": 1470270390, "post_id": 38755315, "comment_id": 64885009, "body": "So one last question before I&#39;m ready to mark this as the answer.  It seems the accepting side is stuck in an infinite loop if the client doesn&#39;t timeout the call.  Is there a way for the accepting side to remove the socket from the OS queue such that it will get out of this infinite loop?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1470270596, "post_id": 38755315, "comment_id": 64885059, "body": "The real problem is why did you run out of file descriptors? I would say you have an FD leak somewhere. Fix that. The client connect will timeout anyway, it isn&#39;t on an infinite timeout: about a minute."}, {"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "edited": false, "score": 0, "creation_date": 1470270727, "post_id": 38755315, "comment_id": 64885088, "body": "@EJP: The file descriptor exhaustion is on purpose.  I&#39;m testing some failure cases.  I was hoping the failure was going to get reflected at the connecting side, but it wasn&#39;t (if you don&#39;t use a timeout). That&#39;s the main question here."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1470270809, "post_id": 38755315, "comment_id": 64885115, "body": "OK, doesn&#39;t change my answer. I would ask whether the test is still valid, given that the actual behaviour is not as you expected."}, {"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "edited": false, "score": 0, "creation_date": 1470270928, "post_id": 38755315, "comment_id": 64885138, "body": "@EJP: So are you saying that if the connecting side does not set a timeout then there is no way around getting stuck in an infinite loop in this condition?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1470271007, "post_id": 38755315, "comment_id": 64885158, "body": "I just said exactly the opposite.  I said the client connect <i>will</i> timeout."}, {"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1470271032, "post_id": 38755315, "comment_id": 64885168, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/119059/discussion-between-nickdu-and-ejp\">continue this discussion in chat</a>."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1470271351, "post_id": 38755315, "comment_id": 64885252, "body": "Enough is enough. I&#39;ve answered this question. You&#39;re now asking another one."}, {"owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "edited": false, "score": 0, "creation_date": 1470274188, "post_id": 38755315, "comment_id": 64886806, "body": "Just want to describe what fixed my problem.  I had a bug in the code where I was using a different variable and thus was not setting the send timeout on the socket I was attempting to set it on.  Once I fixed this and removed the call to set the socket in non-blocking mode,  I was able to get the connect() to timeout as I desired."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": true, "score": 3, "last_activity_date": 1470267626, "creation_date": 1470267626, "answer_id": 38755315, "question_id": 38755109, "link": "https://stackoverflow.com/questions/38755109/linux-why-is-connect-blocking-when-the-accept-call-failed/38755315#38755315", "title": "linux: why is connect() blocking when the accept call failed?", "body": "<p><code>connect()</code> and <code>accept()</code> are not interlocked. You can call <code>connect()</code> and have it return without ever calling <code>accept()</code> at all. The server-side part of the TCP handshake happens in the kernel independently of <code>accept()</code>. All that <code>accept()</code> does is pick an incoming connection off a queue and create a socket around it, blocking while the queue is empty. The socket-creation part is failing due to FD exhaustion, but the actual connection is already established.</p>\n"}], "owner": {"reputation": 567, "user_id": 4238474, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/aIsho.jpg?s=128&g=1", "display_name": "nickdu", "link": "https://stackoverflow.com/users/4238474/nickdu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 928, "favorite_count": 0, "accepted_answer_id": 38755315, "answer_count": 1, "score": 0, "last_activity_date": 1470267626, "creation_date": 1470266138, "question_id": 38755109, "link": "https://stackoverflow.com/questions/38755109/linux-why-is-connect-blocking-when-the-accept-call-failed", "title": "linux: why is connect() blocking when the accept call failed?", "body": "<p>I'm doing a blocking connect() call on a client UNIX socket.  Below is an example of the code:</p>\n\n<pre><code>    // Create socket.\n\n    fds[i] = socket(AF_UNIX, SOCK_STREAM, 0);\n    if (fds[i] == -1)\n        {\n        result = -1;\n        goto done;\n        }\n    printf(\"generate_load thread, fds[%d]: %d\\n\", i, fds[i]);\n//      int flags = fcntl(fds[i], F_GETFL);\n//      fcntl(fds[i], F_SETFL, flags | O_NONBLOCK);\n\n    // If we have a timeout value we're only going to use that as\n    // a connect timeout.  From looking at some source code, it\n    // appears the only way to timeout (correctly) a unix domain\n    // socket connect() call is to set the send timeout.\n\n    struct timeval existing_timeout;\n    if (timeout != 0)\n        {\n        socklen_t len = sizeof(existing_timeout);\n        getsockopt(fd, SOL_SOCKET, SO_SNDTIMEO, &amp;existing_timeout,\n                &amp;len);\n\n        struct timeval tv;\n        tv.tv_sec = timeout / 1000000;\n        tv.tv_usec = timeout % 1000000;\n        setsockopt(fd, SOL_SOCKET, SO_SNDTIMEO, &amp;tv, sizeof(tv));\n        }\n\n    // Set socket name.\n\n    memset(&amp;addr, 0, sizeof(addr));\n    addr.sun_family = AF_UNIX;\n    strncpy(addr.sun_path, socket_name, sizeof(addr.sun_path) - 1);\n\n    // @ indicates abstract name and abstract names begin with a NULL\n    // byte.\n\n    if (socket_name[0] == '@')\n        addr.sun_path[0] = '\\0';\n\n    // Connect.\n\n    result = connect(fds[i], (struct sockaddr*) &amp;addr, sizeof(addr));\n    if (result == -1)\n        {\n        printf(\"generate_load thread, failed connecting: %d\\n\", errno);\n        if (errno == EAGAIN)\n            errno = ETIMEDOUT;\n        goto done;\n        }\n\n    printf(\"generate_load thread, connected fds[%d]: %d\\n\", i, fds[i]);\n\n    // If we set a timeout then set it back to what it was.\n\n    if (timeout != 0)\n        {\n        setsockopt(fds[i], SOL_SOCKET, SO_SNDTIMEO, &amp;existing_timeout,\n                sizeof(existing_timeout));\n        }\n</code></pre>\n\n<p>This code all works fine until the accepting side, which for now is in the same process, fails due to the file descriptor limit.  The accept() call fails with errno = 24 (EMFILE).  I'm fine with getting the error, but why is the client not seeing an error?  Instead the client is blocked and never returns.  As you can see, I commented out the lines that put the socket in non-blocking mode.  I believe in non-blocking mode I encounter some EAGAIN errors.</p>\n\n<p>Also, when I hit the file descriptor limit the accepting side appears to constantly be attempting to accept that socket.  I'm using select() and waiting for the listening socket to be ready for read.  When it is I do an accept().  I can understand getting the first EMFILE error, but I would have thought that error would have been transmitted back to the connect() call, which would have caused the code to break out of its loop and thus no more connect calls will be made which I would have thought would cause the accepting side to be blocked on the select() call.</p>\n\n<p>Below is a snippet of the listening side.  The code below is within a while(1) loop which first calls select():</p>\n\n<pre><code>if (FD_ISSET(ti-&gt;listen_fd, &amp;read_set) != 0)\n    {\n    printf(\"select thread, accepting socket\\n\");\n    int sock = accept(ti-&gt;listen_fd, NULL, NULL);\n    printf(\"select thread, accepted socket\\n\");\n    if (sock == -1)\n        {\n        printf(\"select thread, failed accepting socket: %d\\n\", errno);\n        if (error_threshold_met(&amp;eti) == 0)\n            {\n            log_event(LOG_LEVEL_ERROR, \"select thread, accept() \"\n                    \"failed: %s\", get_error_string(errno, error_string,\n                    sizeof(error_string)));\n            }\n        }\n</code></pre>\n\n<p>The code appears to work fine until I hit the 1024 file descriptor limit.  Any ideas why it's behaving this way?  Should it be and I'm just not understanding how it should be working?</p>\n\n<p>Thanks,\nNick</p>\n"}, {"tags": ["c", "parsing", "linked-list"], "answers": [{"comments": [{"owner": {"reputation": 906, "user_id": 3124590, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/01c2820e5da2a7c51db87c185c5d1d6d?s=128&d=identicon&r=PG&f=1", "display_name": "Rdesmond", "link": "https://stackoverflow.com/users/3124590/rdesmond"}, "edited": false, "score": 0, "creation_date": 1470264261, "post_id": 38754822, "comment_id": 64883402, "body": "Was gonna say the same thing.  Either replacing, or in addition to total_message."}, {"owner": {"reputation": 136, "user_id": 2894021, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f1d430ec2a38a98ab8dc2db0ef176943?s=128&d=identicon&r=PG&f=1", "display_name": "Kaushik Koneru", "link": "https://stackoverflow.com/users/2894021/kaushik-koneru"}, "edited": false, "score": 0, "creation_date": 1470264382, "post_id": 38754822, "comment_id": 64883435, "body": "Thank you...I thought of that way. I am just curious can I go to end of LL using no of message. Instead of a separate pointer. I have various LL of Messages, Maintaining end pointer for each is a Huge List."}, {"owner": {"reputation": 906, "user_id": 3124590, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/01c2820e5da2a7c51db87c185c5d1d6d?s=128&d=identicon&r=PG&f=1", "display_name": "Rdesmond", "link": "https://stackoverflow.com/users/3124590/rdesmond"}, "edited": false, "score": 0, "creation_date": 1470264541, "post_id": 38754822, "comment_id": 64883478, "body": "I don&#39;t think so; that&#39;s what arrays are for."}, {"owner": {"reputation": 17992, "user_id": 278326, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/29b774f602a4e39d45f5c4f142566f2b?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/278326/arun"}, "reply_to_user": {"reputation": 136, "user_id": 2894021, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f1d430ec2a38a98ab8dc2db0ef176943?s=128&d=identicon&r=PG&f=1", "display_name": "Kaushik Koneru", "link": "https://stackoverflow.com/users/2894021/kaushik-koneru"}, "edited": false, "score": 1, "creation_date": 1470264549, "post_id": 38754822, "comment_id": 64883481, "body": "@KaushikKoneru: If you maintain the number of messages as say <code>n</code>, then you have to traverse the <code>n</code> linked nodes starting from <code>head</code> -- that&#39;s <code>O(n)</code> operation -- slightly inefficient. If adding to the tail of the list is a frequent operation -- as it seems in your case -- then maintaining the tail pointer is efficient. Space wise, maintaining a counter is same as maintaining a pointer."}, {"owner": {"reputation": 136, "user_id": 2894021, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f1d430ec2a38a98ab8dc2db0ef176943?s=128&d=identicon&r=PG&f=1", "display_name": "Kaushik Koneru", "link": "https://stackoverflow.com/users/2894021/kaushik-koneru"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1470265432, "post_id": 38754822, "comment_id": 64883771, "body": "@chqrlie mako explained in below comment."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1470279571, "post_id": 38754822, "comment_id": 64888060, "body": "It&#39;s also worth mentioning that traversing a very large linked list can wipe out your memory cache, leading to poor performance in other areas.  In some cases, you may wish to construct your lists in reverse (push front) and then reverse them later (which is a single O(N) operation).  But keeping a tail pointer is so trivial, it&#39;s crazy not to do it."}], "tags": [], "owner": {"reputation": 17992, "user_id": 278326, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/29b774f602a4e39d45f5c4f142566f2b?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/278326/arun"}, "is_accepted": false, "score": 5, "last_activity_date": 1470267862, "last_edit_date": 1470267862, "creation_date": 1470264171, "answer_id": 38754822, "question_id": 38754808, "link": "https://stackoverflow.com/questions/38754808/c-code-efficient-way-to-parse-through-to-end-of-linkedlist/38754822#38754822", "title": "C Code: Efficient way to parse through to end of LinkedList", "body": "<p>Consider maintaining a pointer to the tail of the linked list.</p>\n\n<pre><code>data * head = NULL;\ndata * tail = NULL;\nvoid Append(data * entry) {\n  if (!head) {\n    head = entry;\n  }\n  if (tail) {\n    tail-&gt;next = entry;\n  }\n  tail = entry;\n}\n</code></pre>\n\n<p>Why traversing (as in the question) is bad?</p>\n\n<p>If we maintain only the <code>head</code> and the number of messages say <code>n</code>, then for each append we have to traverse the <code>n</code> linked nodes starting from <code>head</code> -- that's <code>O(n)</code> operation -- slightly inefficient. If adding to the tail of the list is a frequent operation -- as it seems in your case -- then maintaining the tail pointer is efficient. Space wise, maintaining a counter is same as maintaining a pointer.</p>\n\n<p>Why the following is bad?</p>\n\n<pre><code>data[total_messages - 1].next = new_data;\n</code></pre>\n\n<p>That's an array notation. Arrays are contiguous block of memory. In linked list, the nodes could be anywhere in memory, they cannot be accessed in array notation like that.</p>\n"}, {"tags": [], "owner": {"reputation": 842, "user_id": 1085128, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9798134a47d85c790e2ee0da92f66a9e?s=128&d=identicon&r=PG", "display_name": "mako", "link": "https://stackoverflow.com/users/1085128/mako"}, "is_accepted": false, "score": 2, "last_activity_date": 1470265048, "creation_date": 1470265048, "answer_id": 38754950, "question_id": 38754808, "link": "https://stackoverflow.com/questions/38754808/c-code-efficient-way-to-parse-through-to-end-of-linkedlist/38754950#38754950", "title": "C Code: Efficient way to parse through to end of LinkedList", "body": "<p>The <code>[]</code> syntax works for arrays because arrays arrange their data in a line, in a predictable way. Linked lists do not. You can only find out where the ith element is by following the <code>next</code> pointers.</p>\n\n<p><code>data[i]</code> refers to the data <code>i</code> places after the memory address <code>data</code>, which is unlikely to be at the location of a Data struct. Writing data to that position will generally just disrupt a random section of code somewhere else in the program.</p>\n"}, {"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 1, "last_activity_date": 1470278501, "creation_date": 1470278501, "answer_id": 38757679, "question_id": 38754808, "link": "https://stackoverflow.com/questions/38754808/c-code-efficient-way-to-parse-through-to-end-of-linkedlist/38757679#38757679", "title": "C Code: Efficient way to parse through to end of LinkedList", "body": "<p>A fast and relatively simple solution is to push each new element onto the <em>front</em> of the list while parsing, and then reverse the list in place once you have pushed all the elements.</p>\n"}], "owner": {"reputation": 136, "user_id": 2894021, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f1d430ec2a38a98ab8dc2db0ef176943?s=128&d=identicon&r=PG&f=1", "display_name": "Kaushik Koneru", "link": "https://stackoverflow.com/users/2894021/kaushik-koneru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1470278501, "creation_date": 1470264069, "last_edit_date": 1470268002, "question_id": 38754808, "link": "https://stackoverflow.com/questions/38754808/c-code-efficient-way-to-parse-through-to-end-of-linkedlist", "title": "C Code: Efficient way to parse through to end of LinkedList", "body": "<p>I have a Struct Data, this will be a Linked List of Messages. For every new message, I need to append at the last in linked List. I have a Counter where I know how many messages are present.\nInstead of parsing till the end of the linked List. Is there any better way to get to the specific position in Linked List??</p>\n\n<pre><code>struct Data {\n   char            *message;\n   struct Data     *next;\n}data;\n\nint total_message;\n</code></pre>\n\n<p>Right now I am parsing like below:</p>\n\n<pre><code>struct Data *traverse;\n\nwhile(traverse-&gt;next != NULL)\n    traverse = traverse-&gt;next;\n</code></pre>\n\n<p>I tried below as well, I am not sure why this wrong logically it seems right to me.</p>\n\n<pre><code>data[total_messages - 1].next = new_data;\n</code></pre>\n\n<p>Is there any better way other than storing pointer to Last Message?</p>\n"}, {"tags": ["c", "pointers", "malloc", "free"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1470263525, "post_id": 38754703, "comment_id": 64883172, "body": "You allocate space for 4 <code>int*</code>s then write 5 <code>int*</code>s to it (through <code>p2</code>)."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1470263907, "post_id": 38754703, "comment_id": 64883291, "body": "Please post the definition of <code>array</code>."}, {"owner": {"reputation": 173, "user_id": 1986244, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e992aded0435063bfe34d8e864ae68ad?s=128&d=identicon&r=PG", "display_name": "user1986244", "link": "https://stackoverflow.com/users/1986244/user1986244"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1470264017, "post_id": 38754703, "comment_id": 64883317, "body": "@chqrlie I do not understand what you meant. It is 2D array, and the first dimension is suppose to be dynamic, but for this example I am checking with value 4, so array[4][3], it is actually array with values in each block"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1470264185, "post_id": 38754703, "comment_id": 64883376, "body": "<code>p2[i + 1] = p2[i] + 3 * sizeof(int);</code> probably doesn&#39;t do what you think it does... you&#39;re probably out of bounds already on the first loop iteration. (adding 1 to an <code>int *</code> increases the address by <code>1 * sizeof(int)</code>, not by just 1)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1470264245, "post_id": 38754703, "comment_id": 64883399, "body": "@user1986244: you didnt post a complete compilable example.  The missing parts may contain inconsistent definitions.  You use <code>array</code> in the <code>main</code> function but do not provide the definition. I&#39;m just asking you to modify your question to include the definition of <code>array</code> to verify that it is indeed <code>int array[4][3] = { ... };</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1470264873, "post_id": 38754703, "comment_id": 64883596, "body": "C does not support <i>methods</i>. Only <i>functions</i>. And there is no 2D array in your first code and nothing which can be used as one or point to a 2D array! A pointer is not an array! Questions are required to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 173, "user_id": 1986244, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e992aded0435063bfe34d8e864ae68ad?s=128&d=identicon&r=PG", "display_name": "user1986244", "link": "https://stackoverflow.com/users/1986244/user1986244"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470266318, "post_id": 38754703, "comment_id": 64884013, "body": "@olaf thanks question is answered already but I will be clear next time"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 1986244, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e992aded0435063bfe34d8e864ae68ad?s=128&d=identicon&r=PG", "display_name": "user1986244", "link": "https://stackoverflow.com/users/1986244/user1986244"}, "edited": false, "score": 0, "creation_date": 1470264282, "post_id": 38754736, "comment_id": 64883408, "body": "I still getting invalid pointer error  with that edit too"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 173, "user_id": 1986244, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e992aded0435063bfe34d8e864ae68ad?s=128&d=identicon&r=PG", "display_name": "user1986244", "link": "https://stackoverflow.com/users/1986244/user1986244"}, "edited": false, "score": 0, "creation_date": 1470264364, "post_id": 38754736, "comment_id": 64883429, "body": "@user1986244: sorry about this, the arithmetic in the initialization of <code>p2</code> was incorrect, you should just add <code>3</code>, not <code>3 * sizeof(int)</code>"}, {"owner": {"reputation": 173, "user_id": 1986244, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e992aded0435063bfe34d8e864ae68ad?s=128&d=identicon&r=PG", "display_name": "user1986244", "link": "https://stackoverflow.com/users/1986244/user1986244"}, "edited": false, "score": 0, "creation_date": 1470265319, "post_id": 38754736, "comment_id": 64883736, "body": "thank you, that worked for me, and I am trying to grasp the whole process again I will ask more"}, {"owner": {"reputation": 173, "user_id": 1986244, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e992aded0435063bfe34d8e864ae68ad?s=128&d=identicon&r=PG", "display_name": "user1986244", "link": "https://stackoverflow.com/users/1986244/user1986244"}, "edited": false, "score": 0, "creation_date": 1470265661, "post_id": 38754736, "comment_id": 64883838, "body": "my understanding is that I have been moving the pointer by number of bytes, instead of moving it to the first index of the next block of array. i hope I make sense."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 173, "user_id": 1986244, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e992aded0435063bfe34d8e864ae68ad?s=128&d=identicon&r=PG", "display_name": "user1986244", "link": "https://stackoverflow.com/users/1986244/user1986244"}, "edited": false, "score": 1, "creation_date": 1470266023, "post_id": 38754736, "comment_id": 64883941, "body": "@user1986244: actually, neither describes the effects of adding an integer to a pointer: <code>p2[0]</code> points to an array of <code>int</code>. It points to the first element o the array, the one at index <code>0</code>. <code>p2[0] + 1</code> points to the second element, the one at index <code>1</code>, that you can read with <code>p2[0][1]</code>, and write with <code>p2[0][1] = 1;</code>.  <code>p2[0] + 3</code> points to the fourth element of the array.  Since you allocated 12 <code>int</code>s, you want <code>p[0]</code> to point to the first, <code>p2[1]</code> to point to the fourth, <code>p2[2]</code> to the seventh and <code>p2[3]</code> to the tenth.  You are constructing an indirect array pointing to a 2D array."}, {"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "reply_to_user": {"reputation": 173, "user_id": 1986244, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e992aded0435063bfe34d8e864ae68ad?s=128&d=identicon&r=PG", "display_name": "user1986244", "link": "https://stackoverflow.com/users/1986244/user1986244"}, "edited": false, "score": 1, "creation_date": 1470266471, "post_id": 38754736, "comment_id": 64884055, "body": "@user1986244 When you add a number - say <code>n</code> - to a pointer - say <code>p</code>, the resulting address is <code>original address (p)+ n * size of the pointed data type</code>.  i.e. The <code>* sizeof(datatype)</code> is implicit - you DONT have to mention it; if you mention it the final result will be <code>original address + n * sizeof(datatype) * sizeof(datatype)</code>. So if you have an <code>int *p</code> and you want third integer from that, you will do <code>p + 3</code>, and NOT <code>p + 3 * sizeof(int)</code>. This is called <code>pointer arithmetic</code>. A good tutorial in <code>pointer arithmetic</code> should clarify this concept."}, {"owner": {"reputation": 173, "user_id": 1986244, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e992aded0435063bfe34d8e864ae68ad?s=128&d=identicon&r=PG", "display_name": "user1986244", "link": "https://stackoverflow.com/users/1986244/user1986244"}, "edited": false, "score": 0, "creation_date": 1470268272, "post_id": 38754736, "comment_id": 64884475, "body": "thank you both of you for the explanation. More practice it will get in to my head"}, {"owner": {"reputation": 173, "user_id": 1986244, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e992aded0435063bfe34d8e864ae68ad?s=128&d=identicon&r=PG", "display_name": "user1986244", "link": "https://stackoverflow.com/users/1986244/user1986244"}, "edited": false, "score": 0, "creation_date": 1470431101, "post_id": 38754736, "comment_id": 64965810, "body": "@chqrlie I did vote on your response, what else should I do?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 173, "user_id": 1986244, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e992aded0435063bfe34d8e864ae68ad?s=128&d=identicon&r=PG", "display_name": "user1986244", "link": "https://stackoverflow.com/users/1986244/user1986244"}, "edited": false, "score": 0, "creation_date": 1471294299, "post_id": 38754736, "comment_id": 65280479, "body": "@user1986244: you can accept the answer by clicking on the grey checkmark below the answer score. Thank you."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1470264898, "last_edit_date": 1470264898, "creation_date": 1470263646, "answer_id": 38754736, "question_id": 38754703, "link": "https://stackoverflow.com/questions/38754703/free-a-malloc-for-two-double-pointers/38754736#38754736", "title": "free a malloc for two double pointers", "body": "<p>In the initialization loop, you write past the end of the allocated array:</p>\n\n<pre><code>p2[i+1] = p2[i] + 3 * sizeof(int);\n</code></pre>\n\n<p>when <code>i</code> is <code>3</code>, you write to <code>i[4]</code>. And you should just increment by 3 for each row, not <code>3 * sizeof(int)</code>.  <code>p2[i] + 3</code> means the address of the 4th <code>int</code> in the array pointed to by <code>p2[i]</code>.</p>\n\n<p>It is better to initialize <code>p1</code> and <code>p2</code> in separate loops:</p>\n\n<pre><code>// initialize p1 with separately allocated arrays\nfor (int i = 0; i &lt; 4; i++) {\n    p1[i] = malloc(3 * sizeof(int));\n}\n\n// initialize p2 with a single array with internal pointers\np2[0] = malloc(4 * 3 * sizeof(int)); \nfor (int i = 1; i &lt; 4; i++) {\n    p2[i] = p2[i - 1] + 3;\n}\n</code></pre>\n\n<p>You also forget to <code>free</code> <code>p2</code> at the end of <code>main</code>.</p>\n"}], "owner": {"reputation": 173, "user_id": 1986244, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/e992aded0435063bfe34d8e864ae68ad?s=128&d=identicon&r=PG", "display_name": "user1986244", "link": "https://stackoverflow.com/users/1986244/user1986244"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 1, "closed_date": 1470293829, "answer_count": 1, "score": 0, "last_activity_date": 1470264898, "creation_date": 1470263438, "last_edit_date": 1470264462, "question_id": 38754703, "link": "https://stackoverflow.com/questions/38754703/free-a-malloc-for-two-double-pointers", "closed_reason": "Not suitable for this site", "title": "free a malloc for two double pointers", "body": "<p>In the main method I have this </p>\n\n<pre><code>    int **p1;\n    int **p2;\n\n    //malloc dynamically, let the array 2D [4][3]\n    p1 = malloc(4 * sizeof(int*));\n    p2 = malloc(4 * sizeof(int*));\n\n    p2[0] = malloc(4 * 3 * sizeof(int)); \n\n    int i = 0;\n    for(i = 0; i &lt; 4; i++) {\n        p1[i]= malloc(3 * sizeof(int));\n        p2[i + 1] = p2[i] + 3 * sizeof(int);        \n    }\n\n    initPtr(array,p1,p2);\n\n    int m = 0;\n    int n = 0;\n\n    for (m; m &lt; 4; m++) { \n        free(p1[m]);\n    }\n    free(p2[0]);\n    free(p1);\n}//end of main\n</code></pre>\n\n<p>problem comes when I free those memories I get invalid pointer munmap_chunk() error. If it helps, when I comment out the function call, block [1][2] and [3][2] has a value of 33 for p1, and all the rest is 0 including for p2 too. \nMy method is as follows </p>\n\n<pre><code>void initPtr(int array[][3], **ptr1, **ptr2) {\n    //here assign values for the dynamically allocated memory\n    int i;\n    int j;\n    for (i = 0; i &lt; 4; i++) {\n        for (j = 0; j &lt; 3; j++) {\n            ptr1[i][j] = array[i][j];\n            ptr2[i][j] = array[i][j];       \n        }\n    }\n}\n</code></pre>\n\n<p>UPDATED:\nThis is the array declared in the main method</p>\n\n<pre><code>int array[4][3]={{0,1,2},{3,4,5},{6,7,8},{9,10,11}};\n</code></pre>\n"}, {"tags": ["c", "linux", "gcc", "makefile"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1470262035, "post_id": 38754421, "comment_id": 64882699, "body": "Don&#39;t put quotes around it in the makefile."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1470262092, "post_id": 38754421, "comment_id": 64882717, "body": "And options should be in <code>CFLAGS</code>, not in <code>CC</code>."}, {"owner": {"reputation": 1459, "user_id": 1892348, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/08a434ac231c0ed79ba1130327c610d1?s=128&d=identicon&r=PG", "display_name": "Sonu Mishra", "link": "https://stackoverflow.com/users/1892348/sonu-mishra"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1470262269, "post_id": 38754421, "comment_id": 64882773, "body": "Thanks for the suggestion. Removing the quotes helped. Also, is the way I am linking to libraries correct?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470262943, "post_id": 38754421, "comment_id": 64882994, "body": "What happens when you run <code>&#39;&#47;buildtools&#47;toolchain&#47;wr-x86&#47;3.0FCScg&#47;bin&#47;i586-wrs-linux-gn&zwnj;&#8203;u-gcc --sysroot=&#47;buildtools&#47;toolchain&#47;wr-x86&#47;3.0FCScg&#47;sysroot&#39;</code> in your terminal?"}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 3, "last_activity_date": 1470262642, "last_edit_date": 1470262642, "creation_date": 1470262286, "answer_id": 38754505, "question_id": 38754421, "link": "https://stackoverflow.com/questions/38754421/command-not-found-error-in-makefile/38754505#38754505", "title": "Command not found error in Makefile", "body": "<p>Change the definition in the <code>Makefile</code> to this:</p>\n\n<pre><code>CC=/buildtools/toolchain/wr-x86/3.0FCScg/bin/i586-wrs-linux-gnu-gcc --sysroot=/buildtools/toolchain/wr-x86/3.0FCScg/sysroot\n</code></pre>\n\n<p>With the quotes, <code>make</code> uses the whole definition as the name of the executable to look for.</p>\n\n<p>The reason it works when you define <code>CC</code> outside the <code>Makefile</code> is the rules for handling quotes are different for the shell and the Makefile.</p>\n\n<p>A more common convention is to use <code>CFLAGS</code> for all compilation flags.  As a matter of facts, I strongly suggest you add <code>Wall -W</code> to your <code>CFLAGS</code> definition.</p>\n\n<p>Regarding the libraries, you should expand <code>$LIBS</code> after the source and object files on the <code>cc</code> or <code>ld</code> command line.</p>\n"}], "owner": {"reputation": 1459, "user_id": 1892348, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/08a434ac231c0ed79ba1130327c610d1?s=128&d=identicon&r=PG", "display_name": "Sonu Mishra", "link": "https://stackoverflow.com/users/1892348/sonu-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4910, "favorite_count": 0, "accepted_answer_id": 38754505, "answer_count": 1, "score": 1, "last_activity_date": 1470262642, "creation_date": 1470261954, "question_id": 38754421, "link": "https://stackoverflow.com/questions/38754421/command-not-found-error-in-makefile", "title": "Command not found error in Makefile", "body": "<p>I am trying to write a Makefile. This is what I have written.</p>\n\n<pre><code>CC='/buildtools/toolchain/wr-x86/3.0FCScg/bin/i586-wrs-linux-gnu-gcc --sysroot=/buildtools/toolchain/wr-x86/3.0FCScg/sysroot'\nIDIR =../../../include\nCFLAGS=-I$(IDIR)\n\nLDIR =../../../../../../../../.debug/lib.out/public/\nLIBS= -lmylib1 -lmylib2 -lmylib3\n\nmyexec: my_code.c\n    $(CC) $(CFLAGS) -o myexec my_code.c\n</code></pre>\n\n<p>This when run throws an error</p>\n\n<pre><code>make: /buildtools/toolchain/wr-x86/3.0FCScg/bin/i586-wrs-linux-gnu-gcc --sysroot=/buildtools/toolchain/wr-x86/3.0FCScg/sysroot: Command not found\n</code></pre>\n\n<p>However, it works when I run the compile command manually in terminal.</p>\n\n<pre><code>export CC='/buildtools/toolchain/wr-x86/3.0FCScg/bin/i586-wrs-linux-gnu-gcc --sysroot=/buildtools/toolchain/wr-x86/3.0FCScg/sysroot'\n$CC -I ../../../include -L ../../../../../../../../.debug/lib.out/public/ -lmylib1 -lmylib2 -lmylib3 -o myexec my_code.c\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio", "variadic-functions"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470260855, "post_id": 38754142, "comment_id": 64882219, "body": "No, not that I&#39;m aware of. Could you provide a [MCVE reproducing your problem please?]"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1470260857, "post_id": 38754142, "comment_id": 64882221, "body": "Why are you manually managing memory and then trying to free it on all exit paths?  Just use one of <code>std::vector&lt;char&gt;</code> or <code>std::string</code>.  Particularly since you&#39;re going to convert it to <code>std::string</code> anyway."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1470260899, "post_id": 38754142, "comment_id": 64882239, "body": "Also, <code>va_list</code> is designed to be passed by value, perhaps something goes wrong when you make a reference to it.  Can you show the code that calls this?  (Or since it is a callback, makes the function pointer)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1470260914, "post_id": 38754142, "comment_id": 64882244, "body": "Including needed <code>#include</code> files? (None shown here)."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 6, "creation_date": 1470260919, "post_id": 38754142, "comment_id": 64882250, "body": "<code>va_list &amp;ap</code> -- a callback from C won&#39;t pass anything by reference. The function should take the list by value."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1470260966, "post_id": 38754142, "comment_id": 64882275, "body": "If you are explicitly casting function pointers, stop immediately.  When the signature is right, no cast will be needed."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1470261067, "post_id": 38754142, "comment_id": 64882317, "body": "@Phil Your code looks fairly bad. Why are you trying to manage memory allocation yourself actually?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1470261144, "post_id": 38754142, "comment_id": 64882350, "body": "Variable argument lists is more a question of the <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow noreferrer\">Application Binary Interface (ABI)</a>. If both the C and C++ source is compiled using the same ABI then they should be compatible."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1470261658, "post_id": 38754142, "comment_id": 64882561, "body": "In C, you pass the <code>va_list</code> by value, not by reference \u2014 your C++ code is showing that it is being passed by reference.  Does it work better in C++ if you remove the <code>&amp;</code> from the definition (of <code>void HttpDaemon::parseMessageVa(void * arg, const char * fmt, va_list &amp;ap)</code>)?"}, {"owner": {"reputation": 965, "user_id": 1051805, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/91cf819cc15fc0ca028808788fd43dca?s=128&d=identicon&r=PG", "display_name": "Phil Rosenberg", "link": "https://stackoverflow.com/users/1051805/phil-rosenberg"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1470261936, "post_id": 38754142, "comment_id": 64882667, "body": "@PeteBecker This was the answer. Thanks. If you write it as an answer then I will mark it as such."}, {"owner": {"reputation": 965, "user_id": 1051805, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/91cf819cc15fc0ca028808788fd43dca?s=128&d=identicon&r=PG", "display_name": "Phil Rosenberg", "link": "https://stackoverflow.com/users/1051805/phil-rosenberg"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1470262071, "post_id": 38754142, "comment_id": 64882709, "body": "@BenVoigt Yes, you are correct, a std::vector&lt;char&gt; would have been much better. This is my first use of va_list and I based my code on an example. I should have done a full rewrite."}, {"owner": {"reputation": 965, "user_id": 1051805, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/91cf819cc15fc0ca028808788fd43dca?s=128&d=identicon&r=PG", "display_name": "Phil Rosenberg", "link": "https://stackoverflow.com/users/1051805/phil-rosenberg"}, "edited": false, "score": 1, "creation_date": 1470262764, "post_id": 38754142, "comment_id": 64882936, "body": "I&#39;m not sure what the downvotes were for. Perhaps if someone (ideally those that gave them) could tell me then I can ask a better question next time."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470264671, "post_id": 38754142, "comment_id": 64883523, "body": "Why do you expect two different languages to behave identical? And C does not support references."}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470271361, "post_id": 38754142, "comment_id": 64885256, "body": "@Olaf Without going into language arguments, but in the context of Windows <code>va_list</code> is part of the ABI (APIs like <code>wvsprintf</code> use it), and the Win32 API <i>can</i> be used from C++, so it is natural to assume that the compatiblity extends to one&#39;s own code."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 0, "creation_date": 1470272452, "post_id": 38754142, "comment_id": 64886484, "body": "@dxiv: Apparently not, as you cannot pass C++ types to a C function (that is not specific to windows). Note: you can call C functions from Python or Fortran. Does that make Python or Fortran the same language?"}, {"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470279835, "post_id": 38754142, "comment_id": 64888125, "body": "@Olaf The question was not about <code>two different languages to behave identically</code>. It was very narrowly about interoperability of <code>va_list</code> arguments between <code>C</code> and <code>C++</code> in <code>Windows</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470315819, "post_id": 38754142, "comment_id": 64907343, "body": "@PhilRosenberg: Not my DV, but I tend to. It should be obvious you cannot pass C++ types to C, but only the common set."}], "answers": [{"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 4, "last_activity_date": 1470262159, "creation_date": 1470262159, "answer_id": 38754469, "question_id": 38754142, "link": "https://stackoverflow.com/questions/38754142/is-va-list-incompatible-between-c-and-c/38754469#38754469", "title": "Is va_list incompatible between C and C++?", "body": "<p><code>va_list &amp;ap</code> -- a callback from C won't pass anything by reference. The function should take the list by value.</p>\n"}], "owner": {"reputation": 965, "user_id": 1051805, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/91cf819cc15fc0ca028808788fd43dca?s=128&d=identicon&r=PG", "display_name": "Phil Rosenberg", "link": "https://stackoverflow.com/users/1051805/phil-rosenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "closed_date": 1470292461, "accepted_answer_id": 38754469, "answer_count": 1, "score": 0, "last_activity_date": 1470262862, "creation_date": 1470260683, "last_edit_date": 1470262862, "question_id": 38754142, "link": "https://stackoverflow.com/questions/38754142/is-va-list-incompatible-between-c-and-c", "closed_reason": "Not suitable for this site", "title": "Is va_list incompatible between C and C++?", "body": "<p>I'm using a library (GNU MicroHttpDaemon) which passes out error messages through a callback which takes a va_list. I pass in a function pointer and if an error occurs then my function is called with a va_list and some other parameters. My problem is that when I receive the va_list it is garbage and attempting to use it causes an exception to be thrown.\nI am using Visual Studio 2015 on Windows 10. MicroHttpDaemon was built with the same compiler. My best guess for the cause is that MicroHttpDaemon is written in C, but I am using C++. Can anyone confirm that this is the issue? If it is then is there anything I can do to get the arguments into my C++ code?\nMy callback is below in case it's any use. Note that it is a static method, so should in general be fine to use as a C callback I think.</p>\n\n<pre><code>void HttpDaemon::parseMessageVa(void * arg, const char * fmt, va_list &amp;ap)\n{\n    HttpDaemon *daemon = static_cast&lt;HttpDaemon*&gt; (arg);\n    size_t n = vsnprintf(nullptr, 0, fmt, ap);\n    char *buffer = nullptr;\n    try\n    {\n        buffer = new char[n + 1];\n        vsprintf(buffer, fmt, ap);\n        try\n        {\n            daemon-&gt;m_lastMessage = std::string(buffer);\n        }\n        catch (...)\n        {\n            delete[] buffer;\n            throw;\n        }\n    }\n    catch (...)\n    {\n        //buffer allocation failed\n        daemon-&gt;m_lastMessage = \"Memory allocation failure.\";\n    }\n    if(buffer)\n        delete[] buffer;\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "tcp"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1470259972, "post_id": 38753903, "comment_id": 64881826, "body": "<code>send</code> takes a fourth argument, <code>flags</code>, which you are not specifying. If so, the flags will be random, and they can affect transmission. Likewise, for <code>recv</code>"}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1470260121, "post_id": 38753903, "comment_id": 64881896, "body": "My bad it is zero in both cases, fortunately compiler errors are on, unlike on SO :)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1470260181, "post_id": 38753903, "comment_id": 64881927, "body": "Run a sniffer and see what is actually going on..."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1470260360, "post_id": 38753903, "comment_id": 64882015, "body": "I figured as much, which is why I just did only a comment. What does <code>check</code> do (e.g. abort on any error)? Can your send ever return <code>EMSGSIZE</code>?"}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1470260815, "post_id": 38753903, "comment_id": 64882205, "body": "Your code should take in consideration that a successful &quot;send()&quot; does not indicate it was received by the client.  Microsoft&#39;s man page on send() says in part: &quot;The successful completion of a send function does not indicate that the data was successfully delivered and received to the recipient. This function only indicates the data was successfully sent.&quot;      Ubuntu&#39;s man page on send() says in part: &quot;No  indication of failure to deliver is implicit in a send().  Locally detected errors are indicated by a return value of -1.&quot;"}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1470261850, "post_id": 38753903, "comment_id": 64882636, "body": "Check just is &lt; 0 (error), == 0 (disconnect), &gt; 0 (got data, see if need to loop more or complete) cases, of which I am seeing == 0 on the first recv here. Not seeing any -1 returns (by EMSGSIZE, assume you mean send(...) == -1 and errno == EMSGSIZE?)"}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1470262013, "post_id": 38753903, "comment_id": 64882692, "body": "Installed wireshark, but not fully familiar with TCP protocol details. If I pause a while after a successful response, I see a &quot;[FIN, ACK]&quot; from the remote server to my system, followed by an &quot;[ACK]&quot; back to the remote. If I then send a request, I see the request then an &quot;[ACK]&quot; from the server back to me. But no response data, and <code>recv</code> returns 0."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "reply_to_user": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1470262836, "post_id": 38753903, "comment_id": 64882960, "body": "@TonyB I kinda figured as much, but then what is the correct procedure? Sending some kind of ping request/response first to &quot;test&quot; the socket seems wasteful (and what would be the threshold for needing a new &quot;ping&quot;? 1 second? 10 seconds?), and I don&#39;t see such a concept in other common protocols (e.g. HTTP when wanting to send a POST or similar with keep-alive connections)"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1470263490, "post_id": 38753903, "comment_id": 64883157, "body": "I studied the low level aspects of <code>TCP</code> out of academic interest, but it was a while ago, so the following is a bit of a guess. I believe <code>FIN, ACK</code> is a termination request by the server. The client sending the <code>ACK</code> back is that it is acknowledging the <code>FIN</code> (ie. both sides are now &quot;disconnected&quot;). See: <a href=\"http://stackoverflow.com/questions/15182106/what-is-the-reason-and-how-to-avoid-the-fin-ack-rst-and-rst-ack\" title=\"what is the reason and how to avoid the fin ack rst and rst ack\">stackoverflow.com/questions/15182106/&hellip;</a>"}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1470264422, "post_id": 38753903, "comment_id": 64883448, "body": "So if the <code>send</code> happens after, why is it even allowed, and the server even sends an ACK saying it got that request? Is there something else I was meant to do (e.g. some special call to put before <code>send</code> if not used for x seconds that goes &quot;I got a finish packet, you should close now&quot;?). Non-blocking <code>recv</code> with the expectation that it says nothing to read / would-block (since the server never sends data of its own accord)?"}, {"owner": {"reputation": 897, "user_id": 3830887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa739aedfb6760abc3605091e12810e?s=128&d=identicon&r=PG&f=1", "display_name": "TonyB", "link": "https://stackoverflow.com/users/3830887/tonyb"}, "edited": false, "score": 0, "creation_date": 1470267328, "post_id": 38753903, "comment_id": 64884252, "body": "If you want to check to see if a socket has been &quot;closed&quot; by the peer before you call &quot;send()&quot;... you could call select() which has both members of the timeval structure equal to zero, so that it will return immediately.  Note &quot;select()&quot; will note whether a &quot;recv()&quot; on the socket would not block... which means EITHER data is ready to be read, OR the socket has been closed by the peer."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1470350240, "post_id": 38753903, "comment_id": 64928256, "body": "I just tested that, worked on Windows, but always get (tried about 100 times to be sure) <code>select(1, &amp;rd_set, null, null, zero_tv) == 0; send(data...) == expected_len; recv(...) == 0</code> on my Linux systems, even though those 3 socket calls are one after each other. Guessing there is something else i was meant to have done first (some socket opt?)"}], "answers": [{"comments": [{"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1470349472, "post_id": 38757006, "comment_id": 64928027, "body": "Asking for a protocol change would take time, and I do not see such a detail in HTTP and almost never see a webpage do its own thing to protect against such? For example letting the HTTP POST request for stackoverflow comments get sent twice, does result in a duplicate comment, and HTTP (and stackoverflow) do use keep-alive sockets for multiple requests, and there is generally some delay between previous requests and such a POST. Yet I never see web browsers accidentally send a POST twice, or frequently fail to entirely without an actual network/server issue."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1470349737, "post_id": 38757006, "comment_id": 64928116, "body": "In-fact this seems to be the case in most TCP based protocols I have come across? (I guess some like SMTP avoid it by the nature that an operation such as sending a mail is several steps in quick succession, but also never recall being told the reason for that design was to avoid this specific problem)"}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 1, "last_activity_date": 1470273231, "creation_date": 1470273231, "answer_id": 38757006, "question_id": 38753903, "link": "https://stackoverflow.com/questions/38753903/tcp-socket-recv-indicating-unexpected-disconnect-after-successful-send/38757006#38757006", "title": "TCP socket recv indicating &quot;unexpected&quot; disconnect after successful send", "body": "<ul>\n<li>If you don't get an application acknowledgment of the request from the server, re-send it.</li>\n<li>Design your transactions to be <a href=\"https://en.wikipedia.org/wiki/Idempotence#Computer_science_meaning\" rel=\"nofollow\">idempotent</a> so that re-sending them doesn't cause ill-effects.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1470349046, "post_id": 38758973, "comment_id": 64927904, "body": "Using <code>select(1, &amp;sock_set, ..., zero_tv)</code> worked on Windows, but doesnt on Linux, it always returns 0, allows the <code>send</code> to succeed then fails the real <code>recv</code> after."}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1470349198, "post_id": 38758973, "comment_id": 64927940, "body": "Changing the protocol would take time. As far as I can recall, many other protocols do not have such a concept?"}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1470352038, "post_id": 38758973, "comment_id": 64928710, "body": "Oh just to be clear, the server does always send a response for a request (even if its just like a &quot;ok&quot; or &quot;invalid request&quot;). In the case of <code>send</code> suceeding and sending the packet over the wire, then <code>recv</code> returning zero, the server logs indicate the server never got that request, at least at the application level."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 1, "creation_date": 1470362229, "post_id": 38758973, "comment_id": 64931164, "body": "You&#39;re passing in the wrong value to the first argument of select().  You shouldn&#39;t pass in 1, rather you should pass in the value of the largest socket descriptor select() is supposed to be looking at, plus 1.  (What you&#39;re doing works on Windows only because the Windows implementation of select() simply ignores the first argument)"}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 1, "last_activity_date": 1470288133, "last_edit_date": 1470288133, "creation_date": 1470287780, "answer_id": 38758973, "question_id": 38753903, "link": "https://stackoverflow.com/questions/38753903/tcp-socket-recv-indicating-unexpected-disconnect-after-successful-send/38758973#38758973", "title": "TCP socket recv indicating &quot;unexpected&quot; disconnect after successful send", "body": "<blockquote>\n  <p>Is what I am seeing indicative of the server having closed the\n  connection while I was not using it</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>, and then why does send then succeed?</p>\n</blockquote>\n\n<p>send()'s succeeding tells you only that some (or all) of the data you passed into send() has been successfully copied into an in-kernel buffer, and that from now on it is the OS's responsibility to try to deliver those bytes to the remote peer.</p>\n\n<p>In particular, it does <em>not</em> indicate that those bytes have actually gone across the network (yet) or been successfully received by the server.</p>\n\n<blockquote>\n  <p>What is the correct way automatically detect this such that the\n  request is resent on a new connection in this case, but bearing in\n  mind that if the server actually received some requests twice could\n  have unintended effects?</p>\n</blockquote>\n\n<p>As EJP suggests, the best way would be to design your communications protocol such that sending the same request twice has no effect that is different from sending it once.  One way to do that would be to add a unique ID to each message you send, and add some logic to the server such that if it receives a message with an ID that is the same as one that it has already processed, it discards the message as a duplicate.</p>\n\n<p>Having the server send back an explicit response to each message (so that you can know for sure your message got through and was processed) might help, but of course then you have to start worrying about the case where your message was received and processed but then the TCP connection broke before the response could be delivered back to you, and so on.</p>\n\n<p>One other thing you could do (if you're not doing it already) is to monitor the state of the TCP socket (via select(), poll(), or similar) so that your program will be immediately notified (by the socket select()-ing as ready-for-read) when the remote peer closes its end of the socket.  That way you can deal with the closed TCP connection well <em>before</em> you try to send() a command, rather than only finding out about it afterwards, and that should be a less awkward situation to handle, since in that case there is no question about whether a command \"got through\" or not.</p>\n"}], "owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 725, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1470288133, "creation_date": 1470259517, "last_edit_date": 1470260072, "question_id": 38753903, "link": "https://stackoverflow.com/questions/38753903/tcp-socket-recv-indicating-unexpected-disconnect-after-successful-send", "title": "TCP socket recv indicating &quot;unexpected&quot; disconnect after successful send", "body": "<p>I have a TCP socket in blocking mode being used for the client side of a request/response protocol. Sometimes I am finding that if a socket was unused for a minute or two a <code>send</code> call succeeds and indicates all bytes sent, but the following <code>recv</code> returns zero, indicating a shutdown. I have seen this on both Windows and Linux clients.</p>\n\n<p>The server guys tell me they always send some response before shutdown if they had received data, but they may close a socket that has not yet received anything if low on server resources.</p>\n\n<p>Is what I am seeing indicative of the server having closed the connection while I was not using it, and then why does <code>send</code> then succeed?</p>\n\n<p>What is the correct way automatically detect this such that the request is resent on a new connection in this case, but bearing in mind that if the server actually received some requests twice could have unintended effects?</p>\n\n<pre><code>//not full code (buffer management, wrapper functions, etc...)\n//no special flags/options are being set, just socket then connect\nsock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\nconnect(sock, addr, addrlen);\n//some time later after many requests/responses, normally if was inactive for a minute\n//sending about 50 bytes for requests, never actually seen it loop, or return 0\nwhile (more_to_send) check(send(sock, buffer, len, 0));\n//the very first recv returns 0, never seen it happen part way through a response (few KB to a couple of MB)\nwhile (response_not_complete) check(recv(sock, buffer, 4096, 0));\n</code></pre>\n"}, {"tags": ["c", "header-files"], "comments": [{"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 2, "creation_date": 1470259229, "post_id": 38753791, "comment_id": 64881440, "body": "Why don&#39;t you take a look at <code>ctype.h</code> yourself?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1470259458, "post_id": 38753791, "comment_id": 64881550, "body": "Are the names and descriptions of the macros not enough?"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 1, "creation_date": 1470259460, "post_id": 38753791, "comment_id": 64881551, "body": "The number of characters available is limited, and depending on your encoding may be as low as 128. You can just call the <code>ctype</code>functions with each of them."}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "edited": false, "score": 2, "creation_date": 1470259565, "post_id": 38753791, "comment_id": 64881603, "body": "You looking for something <a href=\"http://en.cppreference.com/w/Template:c/string/character_classes\" rel=\"nofollow noreferrer\">like this</a>?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1470260941, "post_id": 38753791, "comment_id": 64882263, "body": "@user3078414 -- if it were only that easy.... You can&#39;t. The best place to determine exactly what is included in each <i>character class</i> is the <i>man page</i>. An informational summary of what it included in each is <a href=\"http://www.tutorialspoint.com/c_standard_library/ctype_h.htm\" rel=\"nofollow noreferrer\"><b>ctype.h</b></a> or <a href=\"http://linux.die.net/man/3/isdigit\" rel=\"nofollow noreferrer\"><b>isdigit(3)</b></a>"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1470381624, "post_id": 38753791, "comment_id": 64937394, "body": "That&#39;s not possible, as you can manage different character sets with the same language (in this case C) Let&#39;s illustrate: if you use ASCII, the only chars allowed are from <code>NUL</code> to <code>DEL</code> (with codes ranging from <code>0..127</code>). If you use ISO-8859-1 you have codes ranging from <code>0</code> to <code>255</code>, and if you use Unicode, you have from <code>0</code> to <code>0x10FFFF</code> posible values.  So you must reconsider your question and think on a single encoding (or you will lead to print all the defined Unicode characters but the ones you use in your text file, case you are ambitious) and make your program useless."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1474897559, "post_id": 38753791, "comment_id": 66707259, "body": "@GusWiedey: you can accept one of the answers by clicking on the grey checkmark below its score?"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1470263862, "post_id": 38754336, "comment_id": 64883273, "body": "Ok, that&#39;s pretty slick -- a nice tabular output of each <i>character class</i> applicable to each character in each file (or <code>stdin</code>)."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 4, "last_activity_date": 1470261552, "creation_date": 1470261552, "answer_id": 38754336, "question_id": 38753791, "link": "https://stackoverflow.com/questions/38753791/is-there-a-way-to-see-what-characters-are-in-the-types-in-ctype-h/38754336#38754336", "title": "Is there a way to see what characters are in the types in ctype.h?", "body": "<p>Dunno if this is helpful, but I wrote a program to classify characters based on those found in a given file.  It wouldn't be hard to fix it to go over the characters (bytes) in the range 0..255 unconditionally.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;limits.h&gt;\n\nstatic void classifier(FILE *fp, char *fn)\n{\n    int c;\n    int map[UCHAR_MAX + 1];\n    size_t i;\n\n    printf(\"%s:\\n\", fn);\n    for (i = 0; i &lt; UCHAR_MAX + 1; i++)\n        map[i] = 0;\n\n    printf(\"Code Char Space Upper Lower Alpha AlNum Digit XDig  Graph Punct Print Cntrl\\n\");\n\n    while ((c = getc(fp)) != EOF)\n    {\n        map[c] = 1;\n    }\n\n    for (c = 0; c &lt; UCHAR_MAX + 1; c++)\n    {\n        if (map[c] == 1)\n        {\n            int sp = isspace(c)  ? 'X' : ' ';\n            int up = isupper(c)  ? 'X' : ' ';\n            int lo = islower(c)  ? 'X' : ' ';\n            int al = isalpha(c)  ? 'X' : ' ';\n            int an = isalnum(c)  ? 'X' : ' ';\n            int dg = isdigit(c)  ? 'X' : ' ';\n            int xd = isxdigit(c) ? 'X' : ' ';\n            int gr = isgraph(c)  ? 'X' : ' ';\n            int pu = ispunct(c)  ? 'X' : ' ';\n            int pr = isprint(c)  ? 'X' : ' ';\n            int ct = iscntrl(c)  ? 'X' : ' ';\n            int ch = (pr == 'X') ?  c  : ' ';\n            printf(\"0x%02X %-4c %-6c%-6c%-6c%-6c%-6c%-6c%-6c%-6c%-6c%-6c%-6c\\n\",\n                    c, ch, sp, up, lo, al, an, dg, xd, gr, pu, pr, ct);\n        }\n    }\n}\n</code></pre>\n\n<p>The extra trick that my code pulled was using <code>setlocale()</code> to work in the current locale rather than the C locale:</p>\n\n<pre><code>#include &lt;locale.h&gt;\n\nint main(int argc, char **argv)\n{\n    setlocale(LC_ALL, \"\");\n    filter(argc, argv, 1, classifier);\n    return(0);\n}\n</code></pre>\n\n<p>The <code>filter()</code> function processes the arguments from <code>argv[1]</code> (usually <code>optind</code> is passed instead of <code>1</code>, but there is no conditional argument processing in this code) to <code>argv[argc-1]</code>, reading the files (or reading standard input if there are no named files).  It calls <code>classifier()</code> for each file it opens \u2014 and handles the opening, closing, etc.</p>\n"}, {"comments": [{"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1470262387, "post_id": 38754369, "comment_id": 64882814, "body": "I was typing a little bit slower than you ;-)   May I suggest to use an array of long instead of an array of int, in order to be consistent with the maximum number of chars that could be expected in a file (at least according to the return value of ftell()) ?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1470262619, "post_id": 38754369, "comment_id": 64882893, "body": "@Christophe, excellent suggestion. I changed it to <code>unsigned long</code>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1470263464, "post_id": 38754369, "comment_id": 64883149, "body": "Missing argument in <code>printf(&quot;%s was not found in the file.\\n&quot;);</code> and probably incorrect format anyway."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1470264223, "post_id": 38754369, "comment_id": 64883391, "body": "@chqrlie, thanks for pointing out the errors. I needed to use <code>%c</code> also."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1470264132, "last_edit_date": 1470264132, "creation_date": 1470261733, "answer_id": 38754369, "question_id": 38753791, "link": "https://stackoverflow.com/questions/38753791/is-there-a-way-to-see-what-characters-are-in-the-types-in-ctype-h/38754369#38754369", "title": "Is there a way to see what characters are in the types in ctype.h?", "body": "<p>My suggestion:</p>\n\n<ol>\n<li><p>Create an array of <code>unsigned long</code>s with 256 elements that can old the number of times a <code>char</code> occurs in the file.</p></li>\n<li><p>Read the contents of the file character by character and update the data in the array.</p></li>\n<li><p>After processing all the characters of the file, walk through the elements of the array and print the necessary information.</p></li>\n</ol>\n\n<hr>\n\n<pre><code>int main()\n{\n   unsigned long charOccurrences[256] = {0};\n\n   // open the file.\n   FILE* fin = fopen(....);\n\n   int c;\n   while ( (c = fgetc(fin)) != EOF )\n   {\n      // Increment the number of occurrences.\n      charOccurrences[c]++;\n   }\n\n   // Process the data.\n   for (int i = 0; i &lt; 256; ++i )\n   {\n      if ( isprint(i) &amp;&amp; charOccurrences[i] == 0 )\n      {\n         printf(\"%c was not found in the file.\\n\", i);\n      }\n   }\n\n   // Close the file\n   fclose(fin);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1470264256, "post_id": 38754425, "comment_id": 64883400, "body": "The <code>isprint()</code> (or <code>isgraph()</code> for that matter) seem to be the key to answering the question."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 2, "last_activity_date": 1470261958, "creation_date": 1470261958, "answer_id": 38754425, "question_id": 38753791, "link": "https://stackoverflow.com/questions/38753791/is-there-a-way-to-see-what-characters-are-in-the-types-in-ctype-h/38754425#38754425", "title": "Is there a way to see what characters are in the types in ctype.h?", "body": "<p>There is no fixed character list in <code>ctype.h</code> that could help you.  In fact <code>isprint()</code> depends on the locale.  </p>\n\n<p>Assuming that you're speaking of <code>char</code> and not wide chars, one way to solve your issue would be to initialize a table of 256 elements, each representing a char: </p>\n\n<pre><code>char mychars[256];  \nmemset(mychars, 0, 256);  \n</code></pre>\n\n<p>then open your file and read all the chars, and flag those that are present:  </p>\n\n<pre><code>...\nint c; \nwhile ( (c=fgetc(fp)) != EOF) {\n    mychars[c] |= 1;  \n}\n</code></pre>\n\n<p>then later you can just iterate through the printable ones:   </p>\n\n<pre><code>for (int i=0; i&lt;256; i++) {\n    if (isprint(i) &amp;&amp; !mychars[i]) \n         printf (\"%c not found\\n\", (char)i);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1470263050, "last_edit_date": 1470263050, "creation_date": 1470262042, "answer_id": 38754445, "question_id": 38753791, "link": "https://stackoverflow.com/questions/38753791/is-there-a-way-to-see-what-characters-are-in-the-types-in-ctype-h/38754445#38754445", "title": "Is there a way to see what characters are in the types in ctype.h?", "body": "<p>You can iterate through all values of the <code>unsigned char</code> type, from <code>0</code> to <code>UCHAR_MAX</code> and check every function from <code>&lt;ctype.h&gt;</code> to determine what the classes are.</p>\n\n<p>For example, you can list all digits with this:</p>\n\n<pre><code>printf(\"digits: \");\nfor (int c = 0; c &lt;= UCHAR_MAX; c++) {\n    if (isdigit(c))\n        putchar(c);\n}\nprintf(\"\\n\");\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6674254, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xLh9T_EMgiY/AAAAAAAAAAI/AAAAAAAAAE8/XVYjf0ImO74/photo.jpg?sz=128", "display_name": "Gus Wiedey", "link": "https://stackoverflow.com/users/6674254/gus-wiedey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "answer_count": 4, "score": 2, "last_activity_date": 1470264132, "creation_date": 1470259017, "question_id": 38753791, "link": "https://stackoverflow.com/questions/38753791/is-there-a-way-to-see-what-characters-are-in-the-types-in-ctype-h", "title": "Is there a way to see what characters are in the types in ctype.h?", "body": "<p>I am writing a C program that involves going through a .txt file and finding all the printable characters (or possibly graphical characters) that are <strong>not</strong> used in the file. I know that the header file ctype.h defines several character classes (e.g. digits, lowercase letters, uppercase letters, etc.) and provides functions to check whether or not a given character belongs to each of the classes, but I'm not sure whether it's possible to do the inverse (i.e. checking <strong>all</strong> the characters in a class for something). I need something that lists or defines all of the characters in each type, ideally an array or enumerated type.</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 15569, "user_id": 2302862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e264db339bb96e343770fa38018e00f1?s=128&d=identicon&r=PG", "display_name": "Siguza", "link": "https://stackoverflow.com/users/2302862/siguza"}, "edited": false, "score": 0, "creation_date": 1470258341, "post_id": 38753603, "comment_id": 64881042, "body": "One is a pointer, the other is a pointer to a pointer."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470258715, "post_id": 38753603, "comment_id": 64881212, "body": "To change an object (from within a function) you need a pointer to it. If the object happens to be a pointer, you&#39;ll need a pointer-to-pointer. period."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6258564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/04047cd462b00b3e10b89d3e519e1ab7?s=128&d=identicon&r=PG&f=1", "display_name": "neileap", "link": "https://stackoverflow.com/users/6258564/neileap"}, "edited": false, "score": 0, "creation_date": 1470259753, "post_id": 38753663, "comment_id": 64881706, "body": "is this correct ?. if am returning new head. (see update)"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1470258513, "creation_date": 1470258513, "answer_id": 38753663, "question_id": 38753603, "link": "https://stackoverflow.com/questions/38753603/why-is-head-is-used-here-instead-of-head/38753663#38753663", "title": "why is **head is used here instead of *head?", "body": "<p>If you need to delete the head node, the first function won't work because you can't change the head node.  The second function takes the address of the head node so it can be changed if need be.</p>\n\n<p>The <code>deleteNode</code> function in the link contains the following:</p>\n\n<pre><code>struct node* temp = *head_ref, *prev;\n\n// If head node itself holds the key to be deleted\nif (temp != NULL &amp;&amp; temp-&gt;data == key)\n{\n    *head_ref = temp-&gt;next;   // Changed head\n    free(temp);               // free old head\n    return;\n}\n</code></pre>\n\n<p>You can see here that it dereferences <code>head_ref</code> to change what it points to.</p>\n"}, {"tags": [], "owner": {"reputation": 22367, "user_id": 1057909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a3df0a806e7301ce9b92d0705646ac?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/1057909/ams"}, "is_accepted": false, "score": 1, "last_activity_date": 1470260607, "creation_date": 1470260607, "answer_id": 38754126, "question_id": 38753603, "link": "https://stackoverflow.com/questions/38753603/why-is-head-is-used-here-instead-of-head/38754126#38754126", "title": "why is **head is used here instead of *head?", "body": "<p>Let's forget the linked list and just think of updating a variable. There are two, equally valid ways to do it:</p>\n\n<pre><code>// 1. pass back\nint update_int1(int val) {\n  return val + 1;\n}\n\nvoid caller1() {\n  int var = 1;\n  var = update_int1(var);\n}\n\n// 2. write back\nvoid update_int2(int *val) {\n  *val += 1;\n}\n\nvoid caller2() {\n  int var = 1;\n  update_int2(&amp;var);\n}\n</code></pre>\n\n<p>This is easy to understand, so let's do the same thing with a pointer:</p>\n\n<pre><code>// 1. pass back\nchar *update_ptr1(char *ptr) {\n  return ptr + 1;\n}\n\nvoid caller1() {\n  char *ptr = malloc(10);\n  ptr = update_ptr1(ptr);\n}\n\n// 2. write back\nvoid update_ptr2(char **ptr) {\n  *ptr += 1;\n}\n\nvoid caller2() {\n  char *ptr = malloc(10);\n  update_ptr2(&amp;ptr);\n}\n</code></pre>\n\n<p>It works exactly the same as for <code>int</code>! The key is there's always <em>one more</em> star if you want to write back, not pass back.</p>\n\n<p>Which pattern you choose is up to you. The write-back approach is popular for linked lists.</p>\n"}, {"tags": [], "owner": {"reputation": 1100, "user_id": 4108078, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ce4abd04c86b9c50e967e4222b69574d?s=128&d=identicon&r=PG&f=1", "display_name": "Rupsingh", "link": "https://stackoverflow.com/users/4108078/rupsingh"}, "is_accepted": false, "score": 1, "last_activity_date": 1470295073, "creation_date": 1470295073, "answer_id": 38760824, "question_id": 38753603, "link": "https://stackoverflow.com/questions/38753603/why-is-head-is-used-here-instead-of-head/38760824#38760824", "title": "why is **head is used here instead of *head?", "body": "<p><a href=\"https://i.stack.imgur.com/FzuaG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FzuaG.png\" alt=\"enter image description here\"></a></p>\n\n<p>When you write *b==>access contents of address contained in b.</p>\n\n<p>When you write **c==>Access contents of contents of address contained in c.</p>\n"}], "owner": {"reputation": 53, "user_id": 6258564, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/04047cd462b00b3e10b89d3e519e1ab7?s=128&d=identicon&r=PG&f=1", "display_name": "neileap", "link": "https://stackoverflow.com/users/6258564/neileap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1470295073, "creation_date": 1470258255, "last_edit_date": 1470259677, "question_id": 38753603, "link": "https://stackoverflow.com/questions/38753603/why-is-head-is-used-here-instead-of-head", "title": "why is **head is used here instead of *head?", "body": "<p>I know how pointers works.</p>\n\n<p>I done similar problem with this way </p>\n\n<pre><code>deleteNode(struct node *head_ref, int key);\n</code></pre>\n\n<p>which is working and @ here <a href=\"http://quiz.geeksforgeeks.org/linked-list-set-3-deleting-node/\" rel=\"nofollow\">http://quiz.geeksforgeeks.org/linked-list-set-3-deleting-node/</a> they have used </p>\n\n<pre><code>deleteNode(struct node **head_ref, int key);\n</code></pre>\n\n<p>which also correct but is there reason to do so , will 1st one fails in any condition or is it bad way etc.  </p>\n\n<pre><code>struct linked_list *deleteNode(struct linked_list *head, int key )\n{\nstruct linked_list *prevNode,*current,*temp;\n\nif( head==NULL)\n    return head;\n\n\nif(head-&gt;data==key)\n{\nif(head-&gt;next==NULL)\n\n{   free(head);\n        return NULL;\n}\n\nelse \ntemp=head-&gt;next;\n\nfree(head);\nreturn temp;\n\n}\nprevNode= head;\ncurrent=head-&gt;next;\n\n\nprintf(\"\\n %d\\n\",(current-&gt;data));\n\nwhile((current!=NULL) &amp;&amp; (current-&gt;data!=key))\n{ printf(\"\\n here\");\n\nprevNode= current;\n\ncurrent=current-&gt;next;\n}\n\n\nif(current==NULL){\n    printf(\"\\n element not present in list !\\n\");\nreturn head;\n            }\n\nif(current-&gt;next==NULL)\n\nprevNode-&gt;next=NULL;\n\n\nelse\nprevNode-&gt;next=current-&gt;next;\n\nfree(current);\nreturn head;\n}\n\n\n\n head=deleteNode(head,key);\n</code></pre>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1470258096, "post_id": 38753480, "comment_id": 64880919, "body": "Are you getting the accompanying prints in the console?"}, {"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1470258199, "post_id": 38753480, "comment_id": 64880973, "body": "@EugeneSh. Yes, I&#39;m getting the accompanying prints in console"}, {"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1470258312, "post_id": 38753480, "comment_id": 64881030, "body": "What about checking the return of <code>fopen()</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1470258328, "post_id": 38753480, "comment_id": 64881036, "body": "I saw the obsolete signature for <code>main</code> and no check that the files opened and was about to give up when I noticed arrays with 255 elements. That is unusual, should they be size 256? I cast my eye down and found <code>for(w=0;w&lt;256;w++){Buffer_Auxiliar_UB[w]=0;}</code> - there is the evidence of your bad array size. A 255 buffer can only be indexed to <code>[254]</code>."}, {"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1470258635, "post_id": 38753480, "comment_id": 64881177, "body": "@WeatherVane Yes your right. I have to check the size of my arrays. This is just the first code and I have to make some corrections. I&#39;ll check the files opened to be sure it opened correctly."}, {"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "reply_to_user": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1470258706, "post_id": 38753480, "comment_id": 64881206, "body": "@user3078414 Thanks. I&#39;m going to check the return of fopen() to be sure there is not the problem."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1470258917, "post_id": 38753480, "comment_id": 64881310, "body": "This line <code>for(w=0;w&lt;(j-i+1);w++){Buffer_Auxiliar_UB[w]=Buffer_Lectura_&zwnj;&#8203;UB[i+w];}</code> is suspicious too, unclear how the array indexing will work out."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1470258878, "post_id": 38753676, "comment_id": 64881295, "body": "Yes your right, I&#39;m going to correct this. This code have some corrections I know I have to do but in this moment is working and that&#39;s what I&#39;m looking in first place. I need to work out the part of fprintf and then I&#39;ll correct it all. Thank you for your answer you&#39;r right"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1470259011, "post_id": 38753676, "comment_id": 64881353, "body": "No, correct this first. The error results in <i>undefined behaviour</i> so your prints could be doing anything. In fact for now, I suggest your arrays be <code>array[4096]</code> or something suitably large like <code>array[65536]</code> to get round that to let you see any other problems."}, {"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1470259156, "post_id": 38753676, "comment_id": 64881403, "body": "Ok, I&#39;ll correct this and see if the problem is solve. Thank you"}, {"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1470259311, "post_id": 38753676, "comment_id": 64881484, "body": "But I&#39;m using a BeagleBone black to run my code. Define my arrays to large is not a memory problem? I&#39;m not sure abour it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1470259417, "post_id": 38753676, "comment_id": 64881526, "body": "Ah then, why not do some array index checking, with your not obvious indexing?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1470259549, "post_id": 38753676, "comment_id": 64881595, "body": "With lines like <code>for(w=0;w&lt;(j-i+1);w++){Buffer_Auxiliar_UB[w]=Buffer_Lectura_&zwnj;&#8203;UB[i+w];}</code> you should be cautious. Calculate the indexes first and check them against the array length. Check for negative vales too."}, {"owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "edited": false, "score": 0, "creation_date": 1470259850, "post_id": 38753676, "comment_id": 64881760, "body": "Ok. I&#39;ll also check for first indexing and last indexing to be sure there are valid positions in the array. Thank you"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1470258590, "creation_date": 1470258590, "answer_id": 38753676, "question_id": 38753480, "link": "https://stackoverflow.com/questions/38753480/cant-save-data-in-txt-file-using-fprintf-in-c/38753676#38753676", "title": "Cant save data in txt file using fprintf in c", "body": "<p>You have arrays that are too small. Arrays like</p>\n\n<pre><code>unsigned char Buffer_Auxiliar_UB[255];\n</code></pre>\n\n<p>can be indexed only to <code>[254]</code></p>\n\n<p>But this line</p>\n\n<pre><code>for(w=0;w&lt;256;w++){Buffer_Auxiliar_UB[w]=0;}\n</code></pre>\n\n<p>breaks the array. It should be</p>\n\n<pre><code>unsigned char Buffer_Auxiliar_UB[256];\n</code></pre>\n\n<p>Possibly in other places, other arrays too. </p>\n"}], "owner": {"reputation": 33, "user_id": 5420498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4e8f7fcb384716913c938c6a52dbd581?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Bravo", "link": "https://stackoverflow.com/users/5420498/juan-bravo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470258590, "creation_date": 1470257810, "question_id": 38753480, "link": "https://stackoverflow.com/questions/38753480/cant-save-data-in-txt-file-using-fprintf-in-c", "title": "Cant save data in txt file using fprintf in c", "body": "<p>I have two FILE variables to write data in two .txt different files. My problemas is that data is only store in one file. The code is quite long but I only have problems with the \"fprintf(Ublox_TXT,...)\". When I open the file \"Ublox.txt\" it is blank and I don't know why because the other file (Xsens.txt) have the data it has to be stored. It compile without errors or warnings. </p>\n\n<pre><code>main()\n{\nFILE *Xsens_text;\nFILE *Ublox_text;\nint Xsens_UART, Ublox_UART;\n\nXsens_text=fopen(\"Xsens.txt\",\"w\");\nUblox_text=fopen(\"Ublox.txt\",\"w\");\n\nint i,j,k,w,wa,z,cont,TS,TH_pasos;\nunsigned char Buffer_Lectura_XS[100];\nunsigned int pc_XS;\nfloat q0_XS,q1_XS,q2_XS,q3_XS,acx_XS,acy_XS,acz_XS,grx_XS,gry_XS,grz_XS;\nint cont_XS=0,a=0;\nint N_XS;\nunsigned char Buffer_Lectura_UB[255], Buffer_Auxiliar_UB[255],Buffer_Auxiliar2_UB[255];\nint ACK_UB=0, Cont_UB=0, Cont2_UB=0, Bandera2=0;\nint Num_Bytes_UB, Bandera1;\nfloat X_ECEF, Y_ECEF;\nstruct Medidas_UB\n{\n    char valido;\n    char Norte;\n    char Este;\n    float longitud; \n    float latitud;\n};\nstruct Medidas_UB medidas;\n\nstruct XSENS_message Buf_Lect1_XS=GoToConfig(Xsens_UART); \nprintf(\"Configurando Unidad de XSENS... \\n\");\nstruct XSENS_message Buf_Lect2_XS=SetOutputConfiguration(Xsens_UART);\nprintf(\"Unidad XSENS configurada correctamente \\n\");\n\nstruct UBX_message Buf_Lect1_UB=UBX_NMEA_CFG(Ublox_UART); \n\nstruct XSENS_message Buf_Lect3_XS=GoToMeasurement(Xsens_UART);\nk=1;\nwhile(k&lt;3)   \n{\n    struct XSENS_message Buf_Lect4_XS=ReqData(Xsens_UART);      \n    for(i=0;i&lt;256;i++);\n    k=k+1;\n}\nTS=1; \nwhile(1) \n{\n    cont=1; \n    while(cont&lt;51)\n    {\n\n        struct XSENS_message Buf_Lect5_XS=ReqData1(Xsens_UART); \n        for(i=0;i&lt;Buf_Lect5_XS.NumBytes;i++) \n        {\n            Buffer_Lectura_XS[i]=*(Buf_Lect5_XS.Buffer_Lectura+i);\n        }\n        if (Buffer_Lectura_XS[3]!=0x45){a=1;}\n        if (a==0) \n        {\n            q0_XS=ConcXsens(Buffer_Lectura_XS[7],Buffer_Lectura_XS[8],Buffer_Lectura_XS[9],Buffer_Lectura_XS[10]);\n            q1_XS=ConcXsens(Buffer_Lectura_XS[11],Buffer_Lectura_XS[12],Buffer_Lectura_XS[13],Buffer_Lectura_XS[14]);\n            q2_XS=ConcXsens(Buffer_Lectura_XS[15],Buffer_Lectura_XS[16],Buffer_Lectura_XS[17],Buffer_Lectura_XS[18]);\n            q3_XS=ConcXsens(Buffer_Lectura_XS[19],Buffer_Lectura_XS[20],Buffer_Lectura_XS[21],Buffer_Lectura_XS[22]);\n            acx_XS=ConcXsens(Buffer_Lectura_XS[26],Buffer_Lectura_XS[27],Buffer_Lectura_XS[28],Buffer_Lectura_XS[29]);\n            acy_XS=ConcXsens(Buffer_Lectura_XS[30],Buffer_Lectura_XS[31],Buffer_Lectura_XS[32],Buffer_Lectura_XS[33]);\n            acz_XS=ConcXsens(Buffer_Lectura_XS[34],Buffer_Lectura_XS[35],Buffer_Lectura_XS[36],Buffer_Lectura_XS[37]);\n            grx_XS=ConcXsens(Buffer_Lectura_XS[56],Buffer_Lectura_XS[57],Buffer_Lectura_XS[58],Buffer_Lectura_XS[59]);\n            gry_XS=ConcXsens(Buffer_Lectura_XS[60],Buffer_Lectura_XS[61],Buffer_Lectura_XS[62],Buffer_Lectura_XS[63]);\n            grz_XS=ConcXsens(Buffer_Lectura_XS[64],Buffer_Lectura_XS[65],Buffer_Lectura_XS[66],Buffer_Lectura_XS[67]);\n            pc_XS=ConcPC(Buffer_Lectura_XS[71],Buffer_Lectura_XS[72]);\n            fprintf(Xsens_text,\"%lf \\t %lf \\t %lf \\t %lf \\t %lf \\t %lf \\t %lf \\t %lf \\t %lf \\t %lf \\t %d \\t %d \\n\",q0_XS,q1_XS,q2_XS,q3_XS,acx_XS,acy_XS,acz_XS,grx_XS,gry_XS,grz_XS,pc_XS,TS); \n            }\n        }\n        else \n        {\n            N_XS=Buffer_Lectura_XS[3];\n            N_XS=N_XS+5;\n            struct XSENS_message Buf_Lect7_XS=ReqData2(Xsens_UART,N_XS);    \n            a=0;\n        }\n    cont=cont+1;\n    }\n\n        Num_Bytes_UB=read(Ublox_UART,Buffer_Lectura_UB,255); //Se lee el GPS\n\n        for(i=0;i&lt;Num_Bytes_UB+1;i++) //Recorrer el Buffer donde est\u00e1 almacenados los datos leidos\n        {\n            if((Buffer_Lectura_UB[i]=='$')&amp;&amp;(Buffer_Lectura_UB[i+3]=='R')&amp;&amp;(Buffer_Lectura_UB[i+4]=='M')&amp;&amp;(Buffer_Lectura_UB[i+5]=='C')) \n            {\n                k=0;\n                j=i;\n                while(k==0) \n                {\n                    if(Buffer_Lectura_UB[j-2]=='*'){k=1;}\n                    j=j+1;\n                    if(j==255){j=0;}\n                }\n                for(w=0;w&lt;256;w++){Buffer_Auxiliar_UB[w]=0;} \n                for(w=0;w&lt;(j-i+1);w++){Buffer_Auxiliar_UB[w]=Buffer_Lectura_UB[i+w];} \n                Bandera2=0;                     \n                for(w=0;w&lt;256;w++) \n                {\n                    if(Buffer_Auxiliar_UB[w]==',') \n                    {\n                        Bandera2=Bandera2+1;\n                        wa=w+1;\n                        k=0;\n                        Bandera1=0;\n                        for(j=0;j&lt;256;j++){Buffer_Auxiliar2_UB[j]=0;}  \n                        while(Bandera1==0) \n                        {\n                            if(Buffer_Auxiliar_UB[k+wa]==','){Bandera1=1;}\n                            if(Bandera1!=1)\n                            {\n        Buffer_Auxiliar2_UB[k]=Buffer_Auxiliar_UB[wa+k];\n                            k=k+1;\n                            }\n                        }\n                        if(Bandera2==2){medidas.valido=Buffer_Auxiliar2_UB[0];} \n                        if(Bandera2==3){medidas.latitud=atof(Buffer_Auxiliar2_UB);}\n                        if(Bandera2==4){medidas.Norte=Buffer_Auxiliar2_UB[0];}\n                        if(Bandera2==5){medidas.longitud=atof(Buffer_Auxiliar2_UB);}\n                        if(Bandera2==6){medidas.Este=Buffer_Auxiliar2_UB[0];}\n                    }\n                }\n                X_ECEF=X_transform(medidas.latitud,medidas.longitud);\n                Y_ECEF=Y_transform(medidas.latitud,medidas.longitud);\n                printf(\"Sensor Ublox: \\n\");\n                printf(\"X= %lf \\t Y= %lf \\n\",X_ECEF,Y_ECEF);\n                fprintf(Ublox_text,\"%lf \\t %lf \\n\",X_ECEF,Y_ECEF); //Guarda datos del GPs en un archivo .txt\n            }\n        }\n\nTS=TS+1;\n}\n\nfclose(Xsens_text);\nfclose(Ublox_text); \n\ntcsetattr(Xsens_UART, TCSANOW, &amp;oldtio_XS);\ntcsetattr(Ublox_UART, TCSANOW, &amp;oldtio_UB);\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "service"], "answers": [{"tags": [], "owner": {"reputation": 425, "user_id": 125406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbf04d8accfe2b761f4bf7691e170aa0?s=128&d=identicon&r=PG", "display_name": "Michael Silver", "link": "https://stackoverflow.com/users/125406/michael-silver"}, "is_accepted": false, "score": 2, "last_activity_date": 1500011718, "last_edit_date": 1500011718, "creation_date": 1500011122, "answer_id": 45095509, "question_id": 38752939, "link": "https://stackoverflow.com/questions/38752939/execute-program-capturing-screenshots-from-windows-service/45095509#45095509", "title": "Execute program capturing screenshots from windows service", "body": "<p>Aliostad did all the heavy lifting for this.  Take a look at his code, it's an excellent start.  Keep in mind, you'll need a separate app to take the screenshot since a new process has to be kicked off while impersonating the logged in user.\n<a href=\"https://stackoverflow.com/a/4147868/125406\">https://stackoverflow.com/a/4147868/125406</a></p>\n\n<p>Here is my version of it (fully based on Aliostad's code).  It adds command line params, a wait for the process to finish and return of the exit code.</p>\n\n<pre><code>public static class ProcessAsCurrentUser\n{\n\n    /// &lt;summary&gt;\n    /// Connection state of a session.\n    /// &lt;/summary&gt;\n    public enum ConnectionState\n    {\n        /// &lt;summary&gt;\n        /// A user is logged on to the session.\n        /// &lt;/summary&gt;\n        Active,\n\n        /// &lt;summary&gt;\n        /// A client is connected to the session.\n        /// &lt;/summary&gt;\n        Connected,\n\n        /// &lt;summary&gt;\n        /// The session is in the process of connecting to a client.\n        /// &lt;/summary&gt;\n        ConnectQuery,\n\n        /// &lt;summary&gt;\n        /// This session is shadowing another session.\n        /// &lt;/summary&gt;\n        Shadowing,\n\n        /// &lt;summary&gt;\n        /// The session is active, but the client has disconnected from it.\n        /// &lt;/summary&gt;\n        Disconnected,\n\n        /// &lt;summary&gt;\n        /// The session is waiting for a client to connect.\n        /// &lt;/summary&gt;\n        Idle,\n\n        /// &lt;summary&gt;\n        /// The session is listening for connections.\n        /// &lt;/summary&gt;\n        Listening,\n\n        /// &lt;summary&gt;\n        /// The session is being reset.\n        /// &lt;/summary&gt;\n        Reset,\n\n        /// &lt;summary&gt;\n        /// The session is down due to an error.\n        /// &lt;/summary&gt;\n        Down,\n\n        /// &lt;summary&gt;\n        /// The session is initializing.\n        /// &lt;/summary&gt;\n        Initializing\n    }\n\n\n    [StructLayout(LayoutKind.Sequential)]\n    class SECURITY_ATTRIBUTES\n    {\n        public int nLength;\n        public IntPtr lpSecurityDescriptor;\n        public int bInheritHandle;\n    }\n\n\n    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]\n    struct STARTUPINFO\n    {\n        public Int32 cb;\n        public string lpReserved;\n        public string lpDesktop;\n        public string lpTitle;\n        public Int32 dwX;\n        public Int32 dwY;\n        public Int32 dwXSize;\n        public Int32 dwYSize;\n        public Int32 dwXCountChars;\n        public Int32 dwYCountChars;\n        public Int32 dwFillAttribute;\n        public Int32 dwFlags;\n        public Int16 wShowWindow;\n        public Int16 cbReserved2;\n        public IntPtr lpReserved2;\n        public IntPtr hStdInput;\n        public IntPtr hStdOutput;\n        public IntPtr hStdError;\n    }\n\n    [StructLayout(LayoutKind.Sequential)]\n    internal struct PROCESS_INFORMATION\n    {\n        public IntPtr hProcess;\n        public IntPtr hThread;\n        public int dwProcessId;\n        public int dwThreadId;\n    }\n\n    enum LOGON_TYPE\n    {\n        LOGON32_LOGON_INTERACTIVE = 2,\n        LOGON32_LOGON_NETWORK,\n        LOGON32_LOGON_BATCH,\n        LOGON32_LOGON_SERVICE,\n        LOGON32_LOGON_UNLOCK = 7,\n        LOGON32_LOGON_NETWORK_CLEARTEXT,\n        LOGON32_LOGON_NEW_CREDENTIALS\n    }\n\n    enum LOGON_PROVIDER\n    {\n        LOGON32_PROVIDER_DEFAULT,\n        LOGON32_PROVIDER_WINNT35,\n        LOGON32_PROVIDER_WINNT40,\n        LOGON32_PROVIDER_WINNT50\n    }\n\n    [Flags]\n    enum CreateProcessFlags : uint\n    {\n        CREATE_BREAKAWAY_FROM_JOB = 0x01000000,\n        CREATE_DEFAULT_ERROR_MODE = 0x04000000,\n        CREATE_NEW_CONSOLE = 0x00000010,\n        CREATE_NEW_PROCESS_GROUP = 0x00000200,\n        CREATE_NO_WINDOW = 0x08000000,\n        CREATE_PROTECTED_PROCESS = 0x00040000,\n        CREATE_PRESERVE_CODE_AUTHZ_LEVEL = 0x02000000,\n        CREATE_SEPARATE_WOW_VDM = 0x00000800,\n        CREATE_SHARED_WOW_VDM = 0x00001000,\n        CREATE_SUSPENDED = 0x00000004,\n        CREATE_UNICODE_ENVIRONMENT = 0x00000400,\n        DEBUG_ONLY_THIS_PROCESS = 0x00000002,\n        DEBUG_PROCESS = 0x00000001,\n        DETACHED_PROCESS = 0x00000008,\n        EXTENDED_STARTUPINFO_PRESENT = 0x00080000,\n        INHERIT_PARENT_AFFINITY = 0x00010000\n    }\n\n    [StructLayout(LayoutKind.Sequential)]\n    public struct WTS_SESSION_INFO\n    {\n        public int SessionID;\n        [MarshalAs(UnmanagedType.LPTStr)] public string WinStationName;\n        public ConnectionState State;\n    }\n\n    [DllImport(\"wtsapi32.dll\", CharSet = CharSet.Auto, SetLastError = true)]\n    public static extern Int32 WTSEnumerateSessions(IntPtr hServer, int reserved, int version,\n        ref IntPtr sessionInfo, ref int count);\n\n\n    [DllImport(\"advapi32.dll\", EntryPoint = \"CreateProcessAsUserW\", SetLastError = true, CharSet = CharSet.Auto)]\n    static extern bool CreateProcessAsUser(\n        IntPtr hToken,\n        string lpApplicationName,\n        string lpCommandLine,\n        IntPtr lpProcessAttributes,\n        IntPtr lpThreadAttributes,\n        bool bInheritHandles,\n        UInt32 dwCreationFlags,\n        IntPtr lpEnvironment,\n        string lpCurrentDirectory,\n        ref STARTUPINFO lpStartupInfo,\n        out PROCESS_INFORMATION lpProcessInformation);\n\n    [DllImport(\"kernel32.dll\", SetLastError = true)]\n    public static extern Int32 WaitForSingleObject(IntPtr handle, Int32 wait);\n\n    public const Int32 INFINITE = -1;\n    public const Int32 WAIT_ABANDONED = 0x80;\n    public const Int32 WAIT_OBJECT_0 = 0x00;\n    public const Int32 WAIT_TIMEOUT = 0x102;\n    public const Int32 WAIT_FAILED = -1;\n\n    [DllImport(\"kernel32.dll\", SetLastError = true)]\n    public static extern bool GetExitCodeProcess(IntPtr hProcess, out uint exitCode);\n\n    [DllImport(\"wtsapi32.dll\")]\n    public static extern void WTSFreeMemory(IntPtr memory);\n\n    [DllImport(\"kernel32.dll\")]\n    private static extern UInt32 WTSGetActiveConsoleSessionId();\n\n    [DllImport(\"wtsapi32.dll\", SetLastError = true)]\n    static extern int WTSQueryUserToken(UInt32 sessionId, out IntPtr Token);\n\n    [DllImport(\"advapi32.dll\", CharSet = CharSet.Auto, SetLastError = true)]\n    public extern static bool DuplicateTokenEx(\n        IntPtr hExistingToken,\n        uint dwDesiredAccess,\n        IntPtr lpTokenAttributes,\n        int ImpersonationLevel,\n        int TokenType,\n        out IntPtr phNewToken);\n\n    private const int TokenImpersonation = 2;\n    private const int SecurityIdentification = 1;\n    private const int MAXIMUM_ALLOWED = 0x2000000;\n    private const int TOKEN_DUPLICATE = 0x2;\n    private const int TOKEN_QUERY = 0x00000008;\n\n    /// &lt;summary&gt;\n    /// Launches a process for the current logged on user if there are any.\n    /// If none, return false as well as in case of \n    /// \n    /// ##### !!! BEWARE !!! ####  ------------------------------------------\n    /// This code will only work when running in a windows service (where it is really needed)\n    /// so in case you need to test it, it needs to run in the service. Reason\n    /// is a security privileg which only services have (SE_??? something, cant remember)!\n    /// &lt;/summary&gt;\n    /// &lt;param name=\"processExe\"&gt;&lt;/param&gt;\n    /// &lt;returns&gt;&lt;/returns&gt;\n    public static uint CreateProcessAsCurrentUser(string processExe, string commandLine)\n    {\n\n        IntPtr duplicate = new IntPtr();\n        STARTUPINFO info = new STARTUPINFO();\n        PROCESS_INFORMATION procInfo = new PROCESS_INFORMATION();\n\n        Debug.WriteLine(string.Format(\"CreateProcessAsCurrentUser. processExe: \" + processExe));\n\n        IntPtr p = GetCurrentUserToken();\n\n        bool result = DuplicateTokenEx(p, MAXIMUM_ALLOWED | TOKEN_QUERY | TOKEN_DUPLICATE, IntPtr.Zero,\n            SecurityIdentification, SecurityIdentification, out duplicate);\n        Debug.WriteLine(string.Format(\"DuplicateTokenEx result: {0}\", result));\n        Debug.WriteLine(string.Format(\"duplicate: {0}\", duplicate));\n\n\n        if (result)\n        {\n            //NOTE: CREATE_NO_WINDOW will hide the console \n            //If there are commandline options, pass them AND the exe in \n            //commandLine and leave processExe empty.\n            result = CreateProcessAsUser(duplicate, processExe, commandLine,\n                //                    IntPtr.Zero, IntPtr.Zero, false, (UInt32) CreateProcessFlags.CREATE_NEW_CONSOLE, IntPtr.Zero, null,\n                IntPtr.Zero, IntPtr.Zero, false, (UInt32)CreateProcessFlags.CREATE_NO_WINDOW, IntPtr.Zero, null,\n                ref info, out procInfo);\n            Debug.WriteLine(string.Format(\"CreateProcessAsUser result: {0}\", result));\n\n        }\n\n\n        if (p.ToInt32() != 0)\n        {\n            Marshal.Release(p);\n            Debug.WriteLine(string.Format(\"Released handle p: {0}\", p));\n        }\n\n\n        if (duplicate.ToInt32() != 0)\n        {\n            Marshal.Release(duplicate);\n            Debug.WriteLine(string.Format(\"Released handle duplicate: {0}\", duplicate));\n        }\n\n        //Wait for the process to complete\n        WaitForSingleObject(procInfo.hProcess, (int)INFINITE);\n\n        //Get and return the exit code\n        uint exitcode;\n        GetExitCodeProcess(procInfo.hProcess, out exitcode);\n\n        return exitcode;\n    }\n\n    public static int GetCurrentSessionId()\n    {\n        uint sessionId = WTSGetActiveConsoleSessionId();\n        Debug.WriteLine(string.Format(\"sessionId: {0}\", sessionId));\n\n        if (sessionId == 0xFFFFFFFF)\n            return -1;\n        else\n            return (int)sessionId;\n    }\n\n    public static bool IsUserLoggedOn()\n    {\n        List&lt;WTS_SESSION_INFO&gt; wtsSessionInfos = ListSessions();\n        Debug.WriteLine(string.Format(\"Number of sessions: {0}\", wtsSessionInfos.Count));\n        int activeSessionCount = 0;\n        foreach (var session in wtsSessionInfos)\n        {\n            if (session.State == ConnectionState.Active)\n                activeSessionCount++;\n        }\n        //return wtsSessionInfos.Where(x =&gt; x.State == ConnectionState.Active).Count() &gt; 0;\n        return activeSessionCount &gt; 0;\n    }\n\n    private static IntPtr GetCurrentUserToken()\n    {\n        List&lt;WTS_SESSION_INFO&gt; wtsSessionInfos = ListSessions();\n        int sessionId = 0;\n        foreach (var session in wtsSessionInfos)\n        {\n            if (session.State == ConnectionState.Active)\n            {\n                sessionId = session.SessionID;\n                break;\n            }\n        }\n        //Old Linq method\n        //int sessionId = wtsSessionInfos.Where(x =&gt; x.State == ConnectionState.Active).FirstOrDefault().SessionID;\n        //int sessionId = GetCurrentSessionId();\n\n        Debug.WriteLine(string.Format(\"sessionId: {0}\", sessionId));\n        if (sessionId == int.MaxValue)\n        {\n            return IntPtr.Zero;\n        }\n        else\n        {\n            IntPtr p = new IntPtr();\n            int result = WTSQueryUserToken((UInt32)sessionId, out p);\n            Debug.WriteLine(string.Format(\"WTSQueryUserToken result: {0}\", result));\n            Debug.WriteLine(string.Format(\"WTSQueryUserToken p: {0}\", p));\n\n            return p;\n        }\n    }\n\n    public static List&lt;WTS_SESSION_INFO&gt; ListSessions()\n    {\n        IntPtr server = IntPtr.Zero;\n        List&lt;WTS_SESSION_INFO&gt; ret = new List&lt;WTS_SESSION_INFO&gt;();\n\n        try\n        {\n            IntPtr ppSessionInfo = IntPtr.Zero;\n\n            Int32 count = 0;\n            Int32 retval = WTSEnumerateSessions(IntPtr.Zero, 0, 1, ref ppSessionInfo, ref count);\n            Int32 dataSize = Marshal.SizeOf(typeof(WTS_SESSION_INFO));\n\n            Int64 current = (int)ppSessionInfo;\n\n            if (retval != 0)\n            {\n                for (int i = 0; i &lt; count; i++)\n                {\n                    WTS_SESSION_INFO si =\n                        (WTS_SESSION_INFO)Marshal.PtrToStructure((System.IntPtr)current,\n                            typeof(WTS_SESSION_INFO));\n                    current += dataSize;\n\n                    ret.Add(si);\n                }\n\n                WTSFreeMemory(ppSessionInfo);\n            }\n        }\n        catch (Exception exception)\n        {\n            Debug.WriteLine(exception.ToString());\n        }\n\n        return ret;\n    }\n\n}\n</code></pre>\n\n<p>We pass a filename as a parameter to the screenshot app and then wait for it to complete.  The service then picks up the file and processes and deletes it.</p>\n\n<p>We also found another way around this using named pipes.  I'm less familiar with that solution.</p>\n"}], "owner": {"reputation": 167, "user_id": 4414738, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1375411755/picture?type=large", "display_name": "Rovny Art", "link": "https://stackoverflow.com/users/4414738/rovny-art"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1105, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1500011718, "creation_date": 1470255711, "last_edit_date": 1470256069, "question_id": 38752939, "link": "https://stackoverflow.com/questions/38752939/execute-program-capturing-screenshots-from-windows-service", "title": "Execute program capturing screenshots from windows service", "body": "<p>I'm writing a windows service, which will manage some agent program capturing screenshots. Agent program works fine, no problems at all - it just takes screenshot and saves it into bmp file.\nBut when i try to execute this agent program from my service - it doesnt't work, all i get is black pictures (as if i tried to capture screenshot directly from my service)\nMy code inside service is:</p>\n\n<pre><code>ServiceStatus.dwCurrentState = SERVICE_RUNNING;\nSetServiceStatus (hStatus, &amp;ServiceStatus);\n\nSHELLEXECUTEINFO seInfo;\nseInfo.cbSize = sizeof(SHELLEXECUTEINFO);\nseInfo.fMask = SEE_MASK_NOCLOSEPROCESS;\nseInfo.hwnd = NULL;\nseInfo.lpVerb = TEXT(\"open\");\nseInfo.lpFile = TEXT(\"D:\\\\dev\\\\work\\\\agent.exe\");\nseInfo.lpDirectory = TEXT(\"D:\\\\dev\\\\work\\\\\");\nseInfo.nShow = SW_SHOWNORMAL;\nseInfo.hInstApp = NULL;\n\nShellExecuteEx(&amp;seInfo);\n</code></pre>\n\n<p>I tried to change service properties - to allow it interacting with desktop, change service user from SYSTEM to my local account - nothing helpes. \nWhat can i do to make it work properely?</p>\n\n<p>UPD. Well, i suppose, this happenes because my service executes program in session0. I tried <code>CreateProcess()</code> and <code>CreateProcessAsUser()</code> as well - no result. So how can i create procees NOT in session0?</p>\n"}, {"tags": ["c", "server", "flush", "integer-overflow"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1470255834, "post_id": 38752929, "comment_id": 64879826, "body": "Around <code>2100000000</code> is around <code>2147483647</code>, which is the maximum 32 bit <code>int</code> number. You take it from here."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1470255909, "post_id": 38752929, "comment_id": 64879858, "body": "Perhaps you need to change that <code>int</code> to <code>unsigned</code>. Assuming an <code>int</code> is four bytes. <code>2100000000</code> is close to <code>0x80000000</code>, which would be considered negative."}, {"owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "edited": false, "score": 0, "creation_date": 1470256119, "post_id": 38752929, "comment_id": 64879955, "body": "Unigend will just move his problem fromhappening at 2 and a bit GB to happen at 4 and bit GB. 32bit is simply not enough for this use case, and he should be using a 64bit datatype."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1470256311, "post_id": 38752929, "comment_id": 64880043, "body": "Apparently a checking should be added to avoid stuff like Y2K bugs.."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1470257007, "post_id": 38752929, "comment_id": 64880390, "body": "Note that the behaviour you&#39;re describing is not random (as the title suggests); it is readily reproducible and the change is systematic."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 4505259, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/394647673685fde7d27dc599cd8a1c79?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu Murale", "link": "https://stackoverflow.com/users/4505259/vishnu-murale"}, "edited": false, "score": 0, "creation_date": 1470255933, "post_id": 38752980, "comment_id": 64879869, "body": "Oh gee. lol. Thanks"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1470256343, "post_id": 38752980, "comment_id": 64880054, "body": "Technically, when the signed integer overflows, you incur undefined behaviour.  However, the most common manifestation of undefined behaviour is indeed a wraparound to the most negative number (-2147483648) and then proceeding from there.  It is not safe to assume that is what will happen, though."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1470256653, "post_id": 38752980, "comment_id": 64880215, "body": "@Jonathan: but it is (pretty) safe to assume that that is happening here, I think."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 1, "creation_date": 1470256861, "post_id": 38752980, "comment_id": 64880318, "body": "@RudyVelthuis: that&#39;s what seems to be happening with the current compiler on the OPs current system.  Don&#39;t forget, though, that the compiler writers are for ever on the lookout for ways to &lt;s&gt;(make life difficult for programmers)&lt;/s&gt; optimize code, and their optimizations can assume that <a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">undefined behaviour is not invoked</a>, and things can go haywire after the next compiler upgrade, or when you switch platforms, etc.  Be very, very cautious about invoking undefined behaviour.  (No: I&#39;m not happy about it.)"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1470257480, "post_id": 38752980, "comment_id": 64880650, "body": "@I only meant that this seems to be happening here. I am not saying that one should invoke undefined behaviour, although I bet that on most 32 bit systems, the same will happen. Note that there is enough code that relies on this or similar behaviour, e.g. checksum code, etc."}], "tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": false, "score": 6, "last_activity_date": 1470256270, "last_edit_date": 1470256270, "creation_date": 1470255848, "answer_id": 38752980, "question_id": 38752929, "link": "https://stackoverflow.com/questions/38752929/c-program-is-randomly-changing-value-of-int/38752980#38752980", "title": "C program is randomly changing value of int", "body": "<p>Simply because ordinary signed <code>int</code> variables overflow at 2<sup>31</sup>-1 (2147483647) and become negative. </p>\n\n<p>Since this order of magnitude is not enough to keep track of the values you need, you should be using a 64bit variable to that - declare your variable as <code>long long</code> - and take proper care of this change in the places you are outputting this value to a text stream, and you should be good.</p>\n"}], "owner": {"reputation": 165, "user_id": 4505259, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/394647673685fde7d27dc599cd8a1c79?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu Murale", "link": "https://stackoverflow.com/users/4505259/vishnu-murale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "closed_date": 1470493153, "answer_count": 1, "score": -1, "last_activity_date": 1470256270, "creation_date": 1470255667, "last_edit_date": 1495542176, "question_id": 38752929, "link": "https://stackoverflow.com/questions/38752929/c-program-is-randomly-changing-value-of-int", "closed_reason": "Not suitable for this site", "title": "C program is randomly changing value of int", "body": "<p>I'm really confused. I have a C server and it was working great, but then I added some code, and I thought it was working fine until my c program randomly started changing the value of an int to a negative value. </p>\n\n<p>Basically I'm having my server output the total bytes sent and midway through the transmission, always around 2100000000 bytes, the total bytes becomes negative. Here's an example of my output file. The value can't just become negative if you look at my code. So I suspect it's something weirder. </p>\n\n<pre><code>\"345000\",\"1470253912\",\"59203\",\"5592\",\"2069901108\"\n\"348000\",\"1470253912\",\"475539\",\"4194\",\"2092449162\"\n\"351000\",\"1470253912\",\"830291\",\"2796\",\"2112043464\"\n\"354000\",\"1470253913\",\"243217\",\"1398\",\"2133985176\"\n\"357000\",\"1470253913\",\"708686\",\"13980\",\"-2135434834\"\n\"360000\",\"1470253914\",\"173646\",\"9786\",\"-2109094024\"\n\"363000\",\"1470253914\",\"514938\",\"6990\",\"-2089413400\" \n</code></pre>\n\n<p>Anyways the thing I added, I commented it out, and I still came across the same error. Just for reference it's commented out in my code under tags \"NEW STUFF ADDED\". (I added it because of this post: <a href=\"https://stackoverflow.com/questions/38751319/terminating-c-program-on-command-line-but-make-sure-writer-is-finished-writing/38752739#38752739\">Terminating C program on command line, but make sure writer is finished writing</a>\n)</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;unistd.h&gt;\n    #include &lt;errno.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;sys/types.h&gt;\n    #include &lt;sys/socket.h&gt;\n    #include &lt;netinet/in.h&gt;\n    #include &lt;netdb.h&gt;\n    #include &lt;arpa/inet.h&gt;\n    #include &lt;sys/wait.h&gt;\n    #include &lt;signal.h&gt;\n    #include &lt;sys/time.h&gt;\n\n\n\nint PORT_NUM = 0; \nint RecordRate = 3000; \nFILE *fp;\n\ntypedef struct timeval timeval;\ntimeval time_;\n\n\nvoid error(const char *msg)\n{\n    perror(msg);\n    exit(1);\n}\n\n //NEW STUFF ADDED\n //void sig_handler(int signo)\n //{\n //  if (signo == SIGINT) {\n // printf(\"received SIGINT\\n\");\n // exit(0);\n // fflush(fp);\n // }\n //}\n\n int main(int argc, char *argv[])\n {\n     int sockfd, newsockfd, portno;\n     socklen_t clilen;\n     char buffer[1000000];\n     struct sockaddr_in serv_addr, cli_addr;\n     int n;\n\n\n\n     PORT_NUM = atoi(argv[1]);  \n     fp = fopen(argv[2],\"w\");   \n\n//       NEW STUFF ADDED\n//       if (signal(SIGINT, sig_handler) == SIG_ERR)\n//       printf(\"\\ncan't catch SIGINT\\n\");\n\n     sockfd = socket(AF_INET, SOCK_STREAM, 0);\n     if (sockfd &lt; 0) \n            error(\"ERROR opening socket\");\n     bzero((char *) &amp;serv_addr, sizeof(serv_addr));\n     //portno = atoi(argv[1]);\n     portno = PORT_NUM;\n     serv_addr.sin_family = AF_INET;\n     serv_addr.sin_addr.s_addr = INADDR_ANY;\n     serv_addr.sin_port = htons(portno);\n     if (bind(sockfd, (struct sockaddr *) &amp;serv_addr,\n                        sizeof(serv_addr)) &lt; 0) \n                        error(\"ERROR on binding\");\n     listen(sockfd,10);\n     clilen = sizeof(cli_addr);\n\n\n\n     newsockfd = accept(sockfd, \n                             (struct sockaddr *) &amp;cli_addr, \n                             &amp;clilen);\n     if (newsockfd &lt; 0) \n                error(\"ERROR on accept\");\n\n\n    int counter = 0;    \n    int total_bytes_sent = 0;\n\n     while(1){  \n\n     bzero(buffer,1000000);\n     n = read(newsockfd,buffer,999999);\n\n\n     if (n &lt; 0) {\n     error(\"ERROR reading from socket\");\n     }\n     else if (n != 0) {\n\n\n\n\n\n             total_bytes_sent += n;\n             gettimeofday(&amp;time_, NULL);\n\n             if(counter%RecordRate==0){\n             printf(\"counter  %d \\n\", counter); \n             printf(\"Bytes Sent  %d \\n\", total_bytes_sent);\n             fprintf(fp,\"\\\"%d\\\",\\\"%ld\\\",\\\"%d\\\",\\\"%d\\\",\\\"%d\\\"\\n\", counter, time_.tv_sec, time_.tv_usec, n,total_bytes_sent);\n             }\n\n\n\n\n             counter++; \n\n\n\n     }\n\n     }\n     fclose(fp);\n     close(newsockfd);\n     close(sockfd);\n     return 0; \n }\n</code></pre>\n\n<p>I swear I'm not trolling. I feared it was what I added that did this, but once I commented it out I got the same error. The thing is the error only became present after I added the code. So causation, correlation, no link?</p>\n\n<p>How can this happen? And why always around 2100000000 bytes.</p>\n\n<p>It's not the end of the world. I mean I can just hardcode something that makes sure the value is always, positive but I'm curious as to how this happens. Thanks. </p>\n"}, {"tags": ["objective-c", "c", "swift", "callback", "typedef"], "comments": [{"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1470258678, "post_id": 38752818, "comment_id": 64881191, "body": "There are few SO posts describing similar problems: <a href=\"http://stackoverflow.com/questions/37244438/cannot-convert-value-of-type-unsafepointerdouble-to-expected-argument-type\">1</a>, <a href=\"http://stackoverflow.com/questions/31626410/how-do-you-convert-a-unsafemutablepointervoid-to-uint8\">2</a>."}], "answers": [{"tags": [], "owner": {"reputation": 43976, "user_id": 6541007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xMee.jpg?s=128&g=1", "display_name": "OOPer", "link": "https://stackoverflow.com/users/6541007/ooper"}, "is_accepted": true, "score": 1, "last_activity_date": 1470264014, "creation_date": 1470264014, "answer_id": 38754796, "question_id": 38752818, "link": "https://stackoverflow.com/questions/38752818/converting-objective-c-c-callback-code-to-swift/38754796#38754796", "title": "Converting Objective-C / C callback code to Swift", "body": "<p>You should check how your types and functions are imported into Swift, before using them.</p>\n\n<p>If you have all types and functions declared in a single .h file:</p>\n\n<ul>\n<li><p>Wait for Xcode to successfully index your project.\n(You may need to comment out error lines.)</p></li>\n<li><p>Open the .h file in Xcode editor.</p></li>\n<li><p>Click four square icon at the top left of the editor pane and choose \"Generated Interface\".</p></li>\n</ul>\n\n<p>I could have gotten this with my sample project:</p>\n\n<pre><code>public typealias myCallbackType = @convention(c) (UnsafeMutablePointer&lt;customStruct&gt;) -&gt; Void\n\npublic func DoSomethingWithCallback(callback: myCallbackType!)\n</code></pre>\n\n<p>(You may find this with Cmd-clicking on the imported type name or function name.)</p>\n\n<p>So, your issue is caused by type mismatching with <code>UnsafePointer</code> and <code>UnsafeMutablePointer</code>. Modify your callback function as:</p>\n\n<pre><code>func functionThatActsAsCallback(myStruct: UnsafeMutablePointer&lt;customStruct&gt;) -&gt; Void {\n\n}\n</code></pre>\n\n<p>And call the <code>DoSomethingWithCallback</code> function as:</p>\n\n<pre><code>DoSomethingWithCallback(functionThatActsAsCallback)\n</code></pre>\n\n<p>(Match letter cases.)</p>\n\n<hr>\n\n<p>Defining your closure with:</p>\n\n<pre><code>let functionThatActsAsCallback: myCallbackType = {myStruct-&gt;Void in\n\n}\n</code></pre>\n\n<p>helps you find the parameter type inferred by Swift.</p>\n"}], "owner": {"reputation": 1079, "user_id": 5661295, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8e2cd0c2734426c1c4aac1f2f1877614?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Nathas", "link": "https://stackoverflow.com/users/5661295/mike-nathas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "accepted_answer_id": 38754796, "answer_count": 1, "score": 0, "last_activity_date": 1470264014, "creation_date": 1470255267, "question_id": 38752818, "link": "https://stackoverflow.com/questions/38752818/converting-objective-c-c-callback-code-to-swift", "title": "Converting Objective-C / C callback code to Swift", "body": "<p>I'm currently converting some older Objective-C code to Swift and I'm stuck at some C stuff.</p>\n\n<p>I do have an internal API which expects a callback function.</p>\n\n<pre><code>DoSomethingWithCallback(myCallbackType callback);\n</code></pre>\n\n<p>The callback type is specified </p>\n\n<pre><code>typedef void(*myCallbackType)(struct customStruct *);\n</code></pre>\n\n<p>In my Objective-C / C code I just added a </p>\n\n<pre><code>static void functionThatActsAsCallback(struct customStruct *myStruct) {\n ..\n}\n</code></pre>\n\n<p>and could call everything with a </p>\n\n<pre><code>DoSomethingWithCallback(functionThatActsAsCallback);\n</code></pre>\n\n<p>I've tried to convert this to Swift by creating the the callback function</p>\n\n<pre><code>func functionThatActsAsCallback(myStruct: UnsafePointer&lt;customStruct&gt;) -&gt; Void {\n\n}\n</code></pre>\n\n<p>and tried to do the call via</p>\n\n<pre><code>DoSomeThingWithCallback(functionThatActsAsCallback)\n</code></pre>\n\n<p>which results in an error </p>\n\n<blockquote>\n  <p>Cannot convert value of type '(UnsafePointer) -> Void' to argument type 'myCallbackType!'</p>\n</blockquote>\n\n<p>I'm not quite sure why this error occurs and how to fix this.</p>\n\n<p>Thanks in advance for any hint</p>\n"}, {"tags": ["c", "arrays", "declaration", "extern"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1470256039, "post_id": 38752602, "comment_id": 64879917, "body": "Note that you should have the declaration in a header that is used both in the file where the variable is defined and in the file that uses it (<code>foo.h</code> for the header; <code>foo.c</code> for where it is defined, <code>main.c</code> for where it is used).  This gives you the necessary cross-checking.  You shouldn&#39;t write <code>extern</code> in an ordinary C source file; it should only appear in headers.  Anywhere you feel you need to write <code>extern</code> means you aren&#39;t using a header you should be using, or the header is incomplete.  Both lead to long-term maintenance problems."}, {"owner": {"reputation": 1372, "user_id": 3725077, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/790641837/picture?type=large", "display_name": "Sitram", "link": "https://stackoverflow.com/users/3725077/sitram"}, "edited": false, "score": 0, "creation_date": 1470258475, "post_id": 38752602, "comment_id": 64881097, "body": "I wouldn&#39;t declate a variable in a header. In every c file you include the header the compiler will alocate that variable. I had a very nasty bug in an oldwr project because a developer declared a global variable in a header and the header was used in two different c files."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 6557656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206851026180651/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/6557656/justin"}, "edited": false, "score": 0, "creation_date": 1470254697, "post_id": 38752638, "comment_id": 64879255, "body": "That&#39;s why it kept telling me it was a function... thank you so much and for a prompt response! Gosh such a simple solution."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1470261357, "post_id": 38752638, "comment_id": 64882432, "body": "Your not the only person to have been bitten by name collision before. It is one sure way to learn that error messages &quot;<i>really do mean what they say...</i>&quot;."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1470254578, "creation_date": 1470254578, "answer_id": 38752638, "question_id": 38752602, "link": "https://stackoverflow.com/questions/38752602/declaring-extern-array-in-another-module-in-c/38752638#38752638", "title": "Declaring extern array in another module in C", "body": "<p>The problem is <a href=\"http://en.cppreference.com/w/c/numeric/math/log\" rel=\"nofollow\">the <code>log</code> function</a> from <code>&lt;math.h&gt;</code>. The simplest solution is to rename your array.</p>\n"}, {"tags": [], "owner": {"reputation": 1372, "user_id": 3725077, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/790641837/picture?type=large", "display_name": "Sitram", "link": "https://stackoverflow.com/users/3725077/sitram"}, "is_accepted": false, "score": 0, "last_activity_date": 1470258307, "creation_date": 1470258307, "answer_id": 38753619, "question_id": 38752602, "link": "https://stackoverflow.com/questions/38752602/declaring-extern-array-in-another-module-in-c/38753619#38753619", "title": "Declaring extern array in another module in C", "body": "<p>Try moving the extern declaration outside of main since log is an global variable. </p>\n\n<p>The keyword extern basically tels the compiler to not spit out an error because the symbol is declared in another module. If the symbol is not found at linking, then you will get an error. </p>\n"}], "owner": {"reputation": 35, "user_id": 6557656, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10206851026180651/picture?type=large", "display_name": "Justin", "link": "https://stackoverflow.com/users/6557656/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "closed_date": 1470299047, "answer_count": 2, "score": -2, "last_activity_date": 1470258307, "creation_date": 1470254446, "question_id": 38752602, "link": "https://stackoverflow.com/questions/38752602/declaring-extern-array-in-another-module-in-c", "closed_reason": "Not suitable for this site", "title": "Declaring extern array in another module in C", "body": "<p>Writing a logging system and I just want an array to be stored and modified in a module (let's call it foo.c, with an appropriately-named header file foo.h) while being able to access it's contents in main.c. In <strong>foo.c</strong> I have:</p>\n\n<pre><code>unsigned char log[4096] = {0};\n</code></pre>\n\n<p>while <strong>main.c</strong> is as follows:</p>\n\n<pre><code>#include \"foo.h\"\nint main(){\n    extern unsigned char log[4096];\n\n    // code\n\n    return 0\n}\n</code></pre>\n\n<p>Which yields the error:</p>\n\n<blockquote>\n  <p>error: 'log' redeclared as different kind of symbol</p>\n</blockquote>\n\n<p>Am I doing this right? I tried declaring the extern log as \"log[]\" and \"log\" but those were of no avail either. A little enlightenment on the issue would be helpful. Thank you!</p>\n"}, {"tags": ["c", "gcc", "optimization", "inline", "compiler-optimization"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1470255224, "post_id": 38752560, "comment_id": 64879535, "body": "You can also use the <code>gcc</code> command line option <code>-fno-inline</code> to get the effect of <code>noinline</code> for all functions in a given file"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 2167332, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ca8c87bfb578daa92b8d1a04850861a5?s=128&d=identicon&r=PG", "display_name": "Djordje Zivanovic", "link": "https://stackoverflow.com/users/2167332/djordje-zivanovic"}, "edited": false, "score": 0, "creation_date": 1470256674, "post_id": 38752846, "comment_id": 64880223, "body": "Why do I receive that error if attributes are not added to function signature? Aren&#39;t those 2 declarations and 1 implementation?"}, {"owner": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "reply_to_user": {"reputation": 153, "user_id": 2167332, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ca8c87bfb578daa92b8d1a04850861a5?s=128&d=identicon&r=PG", "display_name": "Djordje Zivanovic", "link": "https://stackoverflow.com/users/2167332/djordje-zivanovic"}, "edited": false, "score": 0, "creation_date": 1470256833, "post_id": 38752846, "comment_id": 64880298, "body": "I thought that the second declaration is another implementation (you missed ; at the end of it). If that&#39;s are two declarations the code will compile successfully."}, {"owner": {"reputation": 153, "user_id": 2167332, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ca8c87bfb578daa92b8d1a04850861a5?s=128&d=identicon&r=PG", "display_name": "Djordje Zivanovic", "link": "https://stackoverflow.com/users/2167332/djordje-zivanovic"}, "edited": false, "score": 0, "creation_date": 1470260997, "post_id": 38752846, "comment_id": 64882283, "body": "...Gcc\\Test\\main.c|3|error: inlining failed in call to always_inline &#39;GetCurrentIp&#39;: function not inlinable| I think this is not allowed. I think it watches attribute of first declaration."}, {"owner": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "reply_to_user": {"reputation": 153, "user_id": 2167332, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ca8c87bfb578daa92b8d1a04850861a5?s=128&d=identicon&r=PG", "display_name": "Djordje Zivanovic", "link": "https://stackoverflow.com/users/2167332/djordje-zivanovic"}, "edited": false, "score": 0, "creation_date": 1470261558, "post_id": 38752846, "comment_id": 64882510, "body": "What&#39;s gcc version? 4.9 seems to compile ok"}, {"owner": {"reputation": 153, "user_id": 2167332, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ca8c87bfb578daa92b8d1a04850861a5?s=128&d=identicon&r=PG", "display_name": "Djordje Zivanovic", "link": "https://stackoverflow.com/users/2167332/djordje-zivanovic"}, "edited": false, "score": 0, "creation_date": 1470267052, "post_id": 38752846, "comment_id": 64884198, "body": "rog.c:10:20: error: expected declaration specifiers or &#39;...&#39; before &#39;(&#39; token  void* __atribute__((always_inline))GetCurrentIp(void);"}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "reply_to_user": {"reputation": 153, "user_id": 2167332, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ca8c87bfb578daa92b8d1a04850861a5?s=128&d=identicon&r=PG", "display_name": "Djordje Zivanovic", "link": "https://stackoverflow.com/users/2167332/djordje-zivanovic"}, "edited": false, "score": 0, "creation_date": 1470913823, "post_id": 38752846, "comment_id": 65148522, "body": "@\u0402\u043e\u0440\u0452\u0435\u0416\u0438\u0432\u0430\u043d\u043e\u0432\u0438\u045b misspelled <code>__attribute__</code> as <code>__atribute__</code>."}], "tags": [], "owner": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "is_accepted": true, "score": 1, "last_activity_date": 1470386400, "last_edit_date": 1470386400, "creation_date": 1470255361, "answer_id": 38752846, "question_id": 38752560, "link": "https://stackoverflow.com/questions/38752560/gcc-compiler-optimization-function-inlining/38752846#38752846", "title": "Gcc compiler optimization function inlining", "body": "<p>No, it does not. Attributes are not added to function signature, so you'll receive <code>error: redefinition of 'GetCurrentIp'</code></p>\n\n<p>The main reason is that function signatures are a characteristic of the language (<code>C</code> in this case), and not of the implementation (in this case <code>gcc</code>) that help you to match them in the expressions, so there must be no implementation dependency there.  And attributes (like the one you mention, a hint for the compiler to never expand that function inline) are directives to the compiler to generate the code as you want.  Indeed, attributes as defined by <code>gcc</code> are not a characteristic of the language, and as such <strong>program meaning should not change by the inclusion or exclusion of these</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 2, "last_activity_date": 1470916624, "creation_date": 1470916624, "answer_id": 38895721, "question_id": 38752560, "link": "https://stackoverflow.com/questions/38752560/gcc-compiler-optimization-function-inlining/38895721#38895721", "title": "Gcc compiler optimization function inlining", "body": "<p>Even if the question is about C, we can let g++ answer it (see <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Function-Names.html\" rel=\"nofollow\">Function Names as Strings</a>).</p>\n\n<p><code>f.C</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nextern \"C\"\nvoid *__attribute__((noinline)) GetCurrentIp(void)\n{\n    printf(\"signature of %s: %s\\n\", __func__, __PRETTY_FUNCTION__);\n    return __builtin_return_address(0);\n}\n\nint main()\n{\n    GetCurrentIp();\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>&gt; g++ f.C\n&gt; a.out\nsignature of GetCurrentIp: void* GetCurrentIp()\n</code></pre>\n\n<p>So, the attribute is not part of the signature.</p>\n"}], "owner": {"reputation": 153, "user_id": 2167332, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/ca8c87bfb578daa92b8d1a04850861a5?s=128&d=identicon&r=PG", "display_name": "Djordje Zivanovic", "link": "https://stackoverflow.com/users/2167332/djordje-zivanovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 38752846, "answer_count": 2, "score": 0, "last_activity_date": 1561080812, "creation_date": 1470254305, "last_edit_date": 1561080812, "question_id": 38752560, "link": "https://stackoverflow.com/questions/38752560/gcc-compiler-optimization-function-inlining", "title": "Gcc compiler optimization function inlining", "body": "<p>Does gcc add <strong>atribute</strong> in signature of function, or not?\nWill these functions be compiled if it's in the same source file?</p>\n\n<pre><code>void*__attribute__ ((noinline)) GetCurrentIp(void) {\n    some code...\n}\n\n\nvoid*GetCurrentIp(void);\nvoid*__attribute__ ((always_inline)) GetCurrentIp(void)\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 855, "user_id": 5031773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5d4348dc80c48f65608a4c20d9fc90b?s=128&d=identicon&r=PG&f=1", "display_name": "Checkmate", "link": "https://stackoverflow.com/users/5031773/checkmate"}, "edited": false, "score": 2, "creation_date": 1470250097, "post_id": 38751392, "comment_id": 64876729, "body": "Look into floating point error"}, {"owner": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "edited": false, "score": 0, "creation_date": 1470250166, "post_id": 38751392, "comment_id": 64876762, "body": "I don&#39;t understand the downvotes tbh. +1. I have a couple theories but I don&#39;t know the answer."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1470250508, "post_id": 38751392, "comment_id": 64876949, "body": "<code>pow</code> is not very accurate. For that matter, nor is much floating point arithmetic, please see <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1470250694, "post_id": 38751392, "comment_id": 64877052, "body": "@WeatherVane: &quot;not very accurate&quot;??? <code>pow</code> is probably off by no more than a couple of ULPs. But of course, you start with an approximation to .1 and raising that to a large power increases the error factor a bit. All the same, the end result is within one in a (European) billion (i.e. 10^12)"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1470252352, "post_id": 38751392, "comment_id": 64877974, "body": "@rici: I am not so certain that it is only a few ULPs. I guess it depends on the implementation. Although this value looks as if it is only off by a few ULPs."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1470253507, "post_id": 38751392, "comment_id": 64878666, "body": "@RudyVelthuis: Certainly it depends on the implementation, and an implementation which sacrifices accuracy for speed is conceivable; the C standard does not prohibit it. In practice, though, there is a tendency to go for accuracy over speed. And, of course, bugs are possible. Historically, there have been issues with glibc related to certain computations with very large exponents, but they were definitely treated as bugs and, afaik, eventually fixed."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 1, "creation_date": 1470253628, "post_id": 38751392, "comment_id": 64878719, "body": "@Rudy ... this value is off by a lot more than a few ULPs if you compare it with 10^12. but it is within a few if you compare it with the inverse of the 120th power of the value actually being used to approximate 0.1. The difference is important because it gives a clue about how to deal with the problem. For example, replacing the <code>pow</code> call in this case by a sequence of multiplications is likely to <i>increase</i> the error, not decrease it, even though one&#39;s intuition might be that multiplication is &quot;more exact&quot;."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1470254257, "post_id": 38751392, "comment_id": 64879022, "body": "Glibc table of math library accuracy: <a href=\"https://www.gnu.org/software/libc/manual/html_node/Errors-in-Math-Functions.html#Errors-in-Math-Functions\" rel=\"nofollow noreferrer\">gnu.org/software/libc/manual/html_node/&hellip;</a>"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1470256186, "post_id": 38751392, "comment_id": 64879990, "body": "If you take the hex representation, it is clear that the difference is indeed more than a few ULPs: <code>result=0x1.8c8dac6a033fcp+398 10^120=0x1.8c8dac6a0342ap+398</code>. It is off by ~11 bits, AFAICT."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1470263838, "post_id": 38751392, "comment_id": 64883264, "body": "@Rudy Velthuis By my reckoning in <a href=\"http://stackoverflow.com/a/38754586/2410359\">answer</a>, the result of <code>pow(0.1, -120)</code> is within 0.5 ULP."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1470264664, "post_id": 38751392, "comment_id": 64883521, "body": "fact is that the difference between 10^120 and pow(.1, -120) is far more than a few ulp, as the hex representations show. That does not mean that pow() is inaccurate, only that 0.1 is the problem."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 1, "creation_date": 1470277838, "post_id": 38751392, "comment_id": 64887605, "body": "@rudy: yes, that was <i>exactly</i> my point all along."}], "answers": [{"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1470250783, "post_id": 38751602, "comment_id": 64877106, "body": "I think it would help to also print the approximation of .1 which is used in that calculation. It&#39;s not so much that pow(x,120) is inaccurate (although of course it is), but that the <code>x</code> was inaccurate to start with."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1470251008, "last_edit_date": 1470251008, "creation_date": 1470250622, "answer_id": 38751602, "question_id": 38751392, "link": "https://stackoverflow.com/questions/38751392/handling-large-number-calculation-with-pow-in-c/38751602#38751602", "title": "Handling large number calculation with pow() in C", "body": "<p>This is due to the inexact nature of floating point.  There are not enough significant digits in a <code>double</code> to express that number exactly since numbers are stored internally in binary.</p>\n\n<p>For example, if you run this:</p>\n\n<pre><code>printf(\"result=%.10e\\n\", pow(.1, -120));\nprintf(\"result=%.20e\\n\", pow(.1, -120));\nprintf(\"result=%f\\n\", pow(.1, -120));\nprintf(\"10^120=%.10e\\n\", 1e120);\nprintf(\"10^120=%.20e\\n\", 1e120);\nprintf(\"10^120=%f\\n\", 1e120);\n</code></pre>\n\n<p>You'll get this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>result=1.0000000000e+120\nresult=9.99999999999993386195e+119\nresult=999999999999993386194947375938605300558731199397053728064304453022541669059515488061520680536169238451435883569728192512.000000\n10^120=1.0000000000e+120\n10^120=9.99999999999999980003e+119\n10^120=999999999999999980003468347394201181668805192897008518188648311830772414627428725464789434929992439754776075181077037056.000000\n</code></pre>\n\n<p>The reason <code>pow(.1, -120)</code> is slightly different than <code>1e120</code> is that <code>.1</code> cannot be represented exactly either, so the error magnifies with each iteration of the power.</p>\n\n<p>If on the other hand you printed the result of <code>pow(2, 350)</code>, you <em>would</em> get an exact answer.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1470264020, "last_edit_date": 1495541694, "creation_date": 1470262753, "answer_id": 38754586, "question_id": 38751392, "link": "https://stackoverflow.com/questions/38751392/handling-large-number-calculation-with-pow-in-c/38754586#38754586", "title": "Handling large number calculation with pow() in C", "body": "<p>0.1 is typically not exactly representable as a <code>double</code>.  Typical <code>double</code> (<a href=\"https://en.wikipedia.org/wiki/Double-precision_floating-point_format\" rel=\"nofollow noreferrer\">binary64</a>) can exactly represent about 2^64 different numbers.  0.1 is not one of them.  The closest <code>double</code> is <code>0.100000000000000005551...</code> <a href=\"https://stackoverflow.com/questions/38751392/handling-large-number-calculation-with-pow-in-c/38754586#comment64877106_38751602\">@rici</a></p>\n\n<p>So the question is what to expect of <code>pow(0.100000000000000005551..., -120)</code>?</p>\n\n<p>Using <a href=\"https://en.wikipedia.org/wiki/Binomial_theorem\" rel=\"nofollow noreferrer\">Binomial theorem</a>, this would be </p>\n\n<pre><code>pow(exact_one_tenth, -120) \n    - 120*pow(exact_one_tenth, -119)*(0.100000000000000005551... - exact_one_tenth)\n    + other smaller terms\n\n1e120 - 120*1e119*(0.000000000000000005551...) + other smaller terms\n\n9.99999999999993_3386...e119\n\n// OP result\n9.99999999999993_3861...e119\n</code></pre>\n\n<p>Looks like a very accurate answer (matches to 16 significant digts.)  The next smaller <code>double</code> from OP's answer is below.  Since the correct answer is bounded by OP's result and the next representable number and closer to the OP's answer, I assert the calculation is a good as it gets, within 0.5 <a href=\"https://en.wikipedia.org/wiki/Unit_in_the_last_place\" rel=\"nofollow noreferrer\">ULP</a>. </p>\n\n<pre><code>9.99999999999993_2429...e+119\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 6673824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04a65f8e10fdacc11a16cf2ecb494cf1?s=128&d=identicon&r=PG&f=1", "display_name": "SallyL", "link": "https://stackoverflow.com/users/6673824/sallyl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1470264020, "creation_date": 1470249880, "last_edit_date": 1470253367, "question_id": 38751392, "link": "https://stackoverflow.com/questions/38751392/handling-large-number-calculation-with-pow-in-c", "title": "Handling large number calculation with pow() in C", "body": "<p>I tried to calculate <code>pow(.1, -120)</code> in C and got:</p>\n\n<p><code>999999999999993386194947375938605300558731199397053728064304453022541669059515488061520680536169238451435883569728192512.000000</code> </p>\n\n<p>instead of <code>10^120</code>. Is there a reason why? Thanks in advance for your reply!</p>\n"}, {"tags": ["c", "file", "file-writing"], "comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1470249826, "post_id": 38751319, "comment_id": 64876565, "body": "One option would be to do an <code>fflush()</code> after doing an output so that any file output buffers that are hold data will be flushed to the output file. <a href=\"http://stackoverflow.com/questions/18170410/what-is-the-use-of-fflushstdin-in-c-programming\" title=\"what is the use of fflushstdin in c programming\">stackoverflow.com/questions/18170410/&hellip;</a>  This may decrease performance slightly since it overrides the operating system managing file writes to optimize the time."}, {"owner": {"reputation": 318, "user_id": 5463453, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de80221b7288d5ab72564f23c87aa782?s=128&d=identicon&r=PG&f=1", "display_name": "CHendrix", "link": "https://stackoverflow.com/users/5463453/chendrix"}, "edited": false, "score": 2, "creation_date": 1470250049, "post_id": 38751319, "comment_id": 64876703, "body": "Another option is to intercept the <code>SIGINT</code> signal and flush the buffer before closing. <a href=\"http://www.thegeekstuff.com/2012/03/catch-signals-sample-c-code/\" rel=\"nofollow noreferrer\">thegeekstuff.com/2012/03/catch-signals-sample-c-code</a>.  Assuming that you&#39;re on linux."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 318, "user_id": 5463453, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/de80221b7288d5ab72564f23c87aa782?s=128&d=identicon&r=PG&f=1", "display_name": "CHendrix", "link": "https://stackoverflow.com/users/5463453/chendrix"}, "edited": false, "score": 2, "creation_date": 1470250954, "post_id": 38751319, "comment_id": 64877196, "body": "@CHendrix <i>Another option is to intercept the <code>SIGINT</code> signal and flush the buffer before closing. thegeekstuff.com/2012/03/catch-signals-sample-c-code. Assuming that you&#39;re on linux.</i>  Ooof.  The only functions safe to call in a signal handler are those specifically marked as being async-signal-safe.  <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">See the Linux <code>signal</code> man page</a> for the list of async-signal-safe functions on Linux.  If the function isn&#39;t listed, it&#39;s not async-signal-safe.  Neither <code>printf()</code> (from your example) nor <code>fflush()</code> are async-signal-safe."}], "answers": [{"tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": false, "score": 2, "last_activity_date": 1470254949, "creation_date": 1470254949, "answer_id": 38752739, "question_id": 38751319, "link": "https://stackoverflow.com/questions/38751319/terminating-c-program-on-command-line-but-make-sure-writer-is-finished-writing/38752739#38752739", "title": "Terminating C program on command line, but make sure writer is finished writing", "body": "<p>You could set a custom handler for <code>SIGINT</code> in which you set a flag, and then exit gracefully whenever that flag is set. </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;signal.h&gt;\n\nvolatile sig_atomic_t flag = 0;\n\nvoid handle_int(int sig)\n{\n  flag = 1;\n}\n\nint main()\n{\n  signal(SIGINT, handle_int); // intercept SIGINT\n\n  while (!flag)\n  {\n    // do work ...\n  }\n  // cleanup, fflush, etc...\n  return 0;\n}\n</code></pre>\n\n<p>Note that calling <code>fflush</code> directly in the signal handler is unsafe.</p>\n\n<p>The <code>// do work</code> part obviously should be relatively short, so that the <code>flag</code> is checked regularly throughout the lifetime of the application.</p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 6269182, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fJejV0kRfzE/AAAAAAAAAAI/AAAAAAAADsQ/CGsew1gPlhk/photo.jpg?sz=128", "display_name": "William Gerecke", "link": "https://stackoverflow.com/users/6269182/william-gerecke"}, "is_accepted": false, "score": 0, "last_activity_date": 1470271257, "last_edit_date": 1470271257, "creation_date": 1470270159, "answer_id": 38755661, "question_id": 38751319, "link": "https://stackoverflow.com/questions/38751319/terminating-c-program-on-command-line-but-make-sure-writer-is-finished-writing/38755661#38755661", "title": "Terminating C program on command line, but make sure writer is finished writing", "body": "<p>In Linux you can use the <code>EVIOCGKEY ioctl</code> to check if a key is pressed and then <code>break</code> out of the <code>while (1)</code> loop.</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;linux/input.h&gt;\n#include &lt;sys/ioctl.h&gt;\n\nint rdKey(int fd, int key) {//faster not to open file every time the function is called\n//  const char *keyboard = \"/dev/input/by-path/platform-i8042-serio-0-event-kbd\";\n//  int fd = open(keyboard, O_RDONLY);\n    char arr[(KEY_MAX+7)/8];\n    memset(arr, 0, sizeof(arr));\n    ioctl(fd, EVIOCGKEY(sizeof(arr)), arr);\n    return !!(arr[key/8] &amp; (1&lt;&lt;(key % 8)));\n}\n</code></pre>\n\n<p>You would pass a file descriptor for an input device like a keyboard and then either the key number or a macro from <code>input.h</code> like <code>KEY_A</code> for 'a' and it would return <code>1</code> if the key is  pressed and <code>0</code> if not.</p>\n"}, {"tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 0, "last_activity_date": 1470279017, "last_edit_date": 1495541694, "creation_date": 1470279017, "answer_id": 38757745, "question_id": 38751319, "link": "https://stackoverflow.com/questions/38751319/terminating-c-program-on-command-line-but-make-sure-writer-is-finished-writing/38757745#38757745", "title": "Terminating C program on command line, but make sure writer is finished writing", "body": "<p>Another approach to consider would be have the application <code>fork()</code> with the child process becoming the server and the parent remain attached to the terminal waiting for input with the two communicating through a socket or pipe.</p>\n\n<p>Before doing the <code>fork()</code> the parent would create a socket or pipe which it will use to communicate with the child process. The user could then type commands into the parent process still attached to the terminal and the parent process would then echo commands to the child process through the socket or pipe.</p>\n\n<p>The child would use <code>select()</code> and include the communication socket/pipe in the list of descriptors. So where as your code above uses only a single socket with the <code>read()</code> you would instead use a <code>select()</code> with both the socket shared by with the parent as well as the socket from the accept with a check to determine if there is a command from the parent waiting to be read or more server work to do. The child can then do any tidying up needed and exit cleanly with the parent doing a <code>wait()</code> for it to finish up and then the parent exits itself.</p>\n\n<p>Sorry I don't have any code example handy. See the following stackoverflow for details about sockets and <code>select()</code>.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/12861956/is-it-possible-and-safe-to-make-an-accepting-socket-non-blocking\">Is it possible (and safe) to make an accepting socket non-blocking?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/5626854/c-select-async-programming\">c++ select async programming</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/29729561/asynchronous-c-client-for-a-multiclient-c-server\">Asynchronous C client for a multiclient C server</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/1543466/how-do-i-change-a-tcp-socket-to-be-non-blocking\">How do I change a TCP socket to be non-blocking?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/6210638/working-of-fork-in-c-language\">working of fork in c language</a></p>\n"}], "owner": {"reputation": 165, "user_id": 4505259, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/394647673685fde7d27dc599cd8a1c79?s=128&d=identicon&r=PG&f=1", "display_name": "Vishnu Murale", "link": "https://stackoverflow.com/users/4505259/vishnu-murale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1470279017, "creation_date": 1470249604, "last_edit_date": 1470250187, "question_id": 38751319, "link": "https://stackoverflow.com/questions/38751319/terminating-c-program-on-command-line-but-make-sure-writer-is-finished-writing", "title": "Terminating C program on command line, but make sure writer is finished writing", "body": "<p>I have a C server that writes packet data to an output file. The problem is I terminate the server in terminal using control c, and I've noticed that my output file is never finished writing to. Is there a way to make sure that my output file is completely written to before quitting? </p>\n\n<p>(I know I could just let the server run longer so I'm sure the data I want has been written, but I'm looking for an alternative method)</p>\n\n<p>Thanks</p>\n\n<p>Here's my code for reference.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;sys/time.h&gt;\n\nint PORT_NUM = 0; \nint RecordRate = 3000; \n\ntypedef struct timeval timeval;\ntimeval time_;\n\n\nvoid error(const char *msg)\n{\n    perror(msg);\n    exit(1);\n}\n\nint main(int argc, char *argv[])\n{\n     int sockfd, newsockfd, portno;\n     socklen_t clilen;\n     char buffer[1000000];\n     struct sockaddr_in serv_addr, cli_addr;\n     int n;\n     FILE *fp;\n\n     PORT_NUM = atoi(argv[1]);  \n     fp = fopen(argv[2],\"w\");   \n\n     sockfd = socket(AF_INET, SOCK_STREAM, 0);\n     if (sockfd &lt; 0) \n            error(\"ERROR opening socket\");\n     bzero((char *) &amp;serv_addr, sizeof(serv_addr));\n     //portno = atoi(argv[1]);\n     portno = PORT_NUM;\n     serv_addr.sin_family = AF_INET;\n     serv_addr.sin_addr.s_addr = INADDR_ANY;\n     serv_addr.sin_port = htons(portno);\n     if (bind(sockfd, (struct sockaddr *) &amp;serv_addr, sizeof(serv_addr)) &lt; 0) \n        error(\"ERROR on binding\");\n     listen(sockfd,10);\n     clilen = sizeof(cli_addr);\n\n     newsockfd = accept(sockfd, (struct sockaddr *) &amp;cli_addr, &amp;clilen);\n     if (newsockfd &lt; 0) \n            error(\"ERROR on accept\");\n\n    int counter = 0;    \n    int total_bytes_sent = 0;\n\n     while(1){  \n\n         bzero(buffer,1000000);\n         n = read(newsockfd,buffer,999999);\n\n         if (n &lt; 0) {\n             error(\"ERROR reading from socket\");\n         }\n         else if (n != 0) {\n             total_bytes_sent += n;\n             gettimeofday(&amp;time_, NULL);\n\n             if(counter%RecordRate==0){\n             printf(\"counter  %d \\n\", counter); \n             fprintf(fp,\"\\\"%d\\\",\\\"%ld\\\",\\\"%d\\\",\\\"%d\\\",\\\"%d\\\"\\n\", counter, time_.tv_sec, time_.tv_usec, n,total_bytes_sent);\n             }\n\n             counter++; \n\n             //print format: packet number, time Sec, time milli Sec, bytes in packet, total bytes sent \n            // example: \"11182\",\"1465921447\",\"196422\",\"3100\",\"26821100\"\n\n         }\n     }\n     fclose(fp);\n     close(newsockfd);\n     close(sockfd);\n     return 0; \n     }\n</code></pre>\n"}, {"tags": ["c++", "c", "reference", "simd"], "answers": [{"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 5, "last_activity_date": 1470252015, "last_edit_date": 1470252015, "creation_date": 1470251300, "answer_id": 38751796, "question_id": 38750994, "link": "https://stackoverflow.com/questions/38750994/what-is-ext-vector-type-and-simd/38751796#38751796", "title": "What is __ext_vector_type__ and simd?", "body": "<p>It appears to be a clang extension to <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Vector-Extensions.html\" rel=\"noreferrer\">GNU C vector extensions</a>, where something like this would be normal:</p>\n\n<pre><code>typedef int v4si __attribute__ ((vector_size (16)));\n</code></pre>\n\n<hr>\n\n<p>Googling for <code>ext_vector_type</code> without the leading/trailing underscores found <a href=\"http://clang.llvm.org/docs/LanguageExtensions.html#vectors-and-extended-vectors\" rel=\"noreferrer\">the Clang docs</a>.  IDK why they added an underscores version, since it's already only valid inside a GNU C <code>__attribute__</code>.</p>\n\n<p>My best guess is that it's <strong>a way to let the compiler know you only care about the value of the first 3 elements of a 4 element SIMD register.</strong>  So it can potentially do optimizations that leave different garbage in the high element than the source would have.</p>\n\n<hr>\n\n<blockquote>\n  <p>why the compiler doesn't allow references to <code>vector_float3</code></p>\n</blockquote>\n\n<p>Works for me with clang3.8.  Try a different compiler.</p>\n\n<pre><code>typedef __attribute__((__ext_vector_type__(3))) float vector_float3;\n\nint foo(vector_float3 &amp;arg) {\n  vector_float3  v;\n  vector_float3&amp; ref = v;  // unused, but syntactically valid\n  return arg[0];           // return the low element of the vector, converted to an integer.  GNU C vector-extensions syntax.\n}\n</code></pre>\n\n<p><a href=\"http://gcc.godbolt.org/#compilers:!((compiler:clang380,options:&#39;-std%3Dgnu%2B%2B11+-Wall+-Wextra+-O3+-fno-verbose-asm+-march%3Dnehalem&#39;,source:&#39;typedef+__attribute__((__ext_vector_type__(3)))+float+vector_float3%3B%0A%0Aint+foo(vector_float3+%26arg)+%7B%0A++vector_float3++v%3B%0A++vector_float3%26+ref+%3D+v%3B%0A++return+arg%5B0%5D%3B%0A%7D%0A&#39;)),filterAsm:(commentOnly:!t,directives:!t,intel:!t,labels:!t),version:3\" rel=\"noreferrer\">compiles to the following asm on the Godbolt compiler explorer</a></p>\n\n<pre><code>    # targeting x86-64 SystemV ABI (so the first integer/pointer arg is in rdi)\n    cvttss2si       eax, dword ptr [rdi]\n    ret\n</code></pre>\n"}], "owner": {"reputation": 609, "user_id": 3640988, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100008222029442/picture?type=large", "display_name": "Andrey Lyubimov", "link": "https://stackoverflow.com/users/3640988/andrey-lyubimov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2374, "favorite_count": 1, "accepted_answer_id": 38751796, "answer_count": 1, "score": 1, "last_activity_date": 1470252015, "creation_date": 1470248474, "question_id": 38750994, "link": "https://stackoverflow.com/questions/38750994/what-is-ext-vector-type-and-simd", "title": "What is __ext_vector_type__ and simd?", "body": "<p>I'm playing with Apple Metal API along with so called <em>simd</em> library. There's such code in a header:</p>\n\n<pre><code>typedef __attribute__((__ext_vector_type__(3))) float vector_float3;\n</code></pre>\n\n<p>And I'm curious what it actually does and why the compiler doesn't allow references to <strong>vector_float3</strong> in a function's argument or in the next manner:</p>\n\n<pre><code>vector_float3  v;\nvector_float3&amp; ref = v;\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1470250131, "post_id": 38750972, "comment_id": 64876747, "body": "@BLUEPIXY ooh oops I&#39;ll delete that."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1470252482, "post_id": 38750972, "comment_id": 64878072, "body": "The <code>strtok()</code> function may do what you need."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 3826678, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f4ea1eae41ca349b4dbcdc4dcd8f34c?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3826678/john"}, "edited": false, "score": 0, "creation_date": 1470253778, "post_id": 38752167, "comment_id": 64878786, "body": "So i should use my current output and run it through this?"}, {"owner": {"reputation": 613, "user_id": 1309717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OgxMm.jpg?s=128&g=1", "display_name": "Sterls", "link": "https://stackoverflow.com/users/1309717/sterls"}, "reply_to_user": {"reputation": 49, "user_id": 3826678, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f4ea1eae41ca349b4dbcdc4dcd8f34c?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3826678/john"}, "edited": false, "score": 0, "creation_date": 1470254156, "post_id": 38752167, "comment_id": 64878973, "body": "After your first fgets() populates buf, copy from line 2 in the code I posted to the end of the while loop and place it under your fgets() call. You should see  it work they way you&#39;d like. Next, you should optimize your block of code by placing the delimiter outside your for loop etc."}, {"owner": {"reputation": 613, "user_id": 1309717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OgxMm.jpg?s=128&g=1", "display_name": "Sterls", "link": "https://stackoverflow.com/users/1309717/sterls"}, "reply_to_user": {"reputation": 49, "user_id": 3826678, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f4ea1eae41ca349b4dbcdc4dcd8f34c?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3826678/john"}, "edited": false, "score": 0, "creation_date": 1470254233, "post_id": 38752167, "comment_id": 64879011, "body": "Alternately, you can just create a function with the code I shared that takes a string and a delimiter as parameters and outputs the tokens. Call that function with your populated &quot;buf&quot; and that should clean up the code."}, {"owner": {"reputation": 49, "user_id": 3826678, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f4ea1eae41ca349b4dbcdc4dcd8f34c?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3826678/john"}, "edited": false, "score": 0, "creation_date": 1470316059, "post_id": 38752167, "comment_id": 64907519, "body": "its giving me an error saying str and s are not defined. Any help?"}, {"owner": {"reputation": 49, "user_id": 3826678, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f4ea1eae41ca349b4dbcdc4dcd8f34c?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3826678/john"}, "edited": false, "score": 0, "creation_date": 1470317492, "post_id": 38752167, "comment_id": 64908646, "body": "Could you take a look at it now, im trying to swap receiving a number for text and its not working?"}, {"owner": {"reputation": 613, "user_id": 1309717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OgxMm.jpg?s=128&g=1", "display_name": "Sterls", "link": "https://stackoverflow.com/users/1309717/sterls"}, "reply_to_user": {"reputation": 49, "user_id": 3826678, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f4ea1eae41ca349b4dbcdc4dcd8f34c?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3826678/john"}, "edited": false, "score": 0, "creation_date": 1470679843, "post_id": 38752167, "comment_id": 65037120, "body": "That is because strings can&#39;t be compared using &quot;==&quot;, you need to use strcmp() function as shown here: <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_strcmp.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/c_standard_library/c_function_strcmp.htm</a>"}], "tags": [], "owner": {"reputation": 613, "user_id": 1309717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OgxMm.jpg?s=128&g=1", "display_name": "Sterls", "link": "https://stackoverflow.com/users/1309717/sterls"}, "is_accepted": true, "score": 1, "last_activity_date": 1470316508, "last_edit_date": 1470316508, "creation_date": 1470252704, "answer_id": 38752167, "question_id": 38750972, "link": "https://stackoverflow.com/questions/38750972/how-to-split-a-line-of-text-at-delimiters/38752167#38752167", "title": "How to split a line of text at delimiters", "body": "<p>If you have your sentence: \"Weight,Height,Eye color,Name,Age\", you can tokenize the string and separate it by the comma (\",\") by using the </p>\n\n<p>char *strtok(char *str, const char *delim) function as follows.</p>\n\n<pre><code>char buf[1000] = \"Weight,Height,Eye color,Name,Age\";\nconst char delim[2] = \",\";\nchar *token;\n\n//This retrieves the first token\ntoken = strtok(buf, delim);\n\nwhile( token != NULL ) \n{\n  printf( \"%s\\n\", token );\n  token = strtok(NULL, delim);\n}\n</code></pre>\n\n<p>Output:<br>\nWeight<br>\nHeight<br>\nEye color<br>\nName<br>\nAge</p>\n"}], "owner": {"reputation": 49, "user_id": 3826678, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f4ea1eae41ca349b4dbcdc4dcd8f34c?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3826678/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 38752167, "answer_count": 1, "score": 0, "last_activity_date": 1470317428, "creation_date": 1470248401, "last_edit_date": 1470317428, "question_id": 38750972, "link": "https://stackoverflow.com/questions/38750972/how-to-split-a-line-of-text-at-delimiters", "title": "How to split a line of text at delimiters", "body": "<p>Here is my code. This currently opens a text file and prints a certain line depending on user input. I would like now to separate said line at appearances of a chosen delimiter (such as a comma) so I can get separate pieces of information (for example, weight, height, eye color, Name, Age, etc.).  How would I go about doing that?(Edit  im trying to use text input to determine the line printed out and nada any help?)</p>\n\n<pre><code>     #include&lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n    int main()\n    {\n            const char delim[2] = \",\";\n            char *token;\n            int j =0;\n            char  hh[3];\n            FILE *ptr_file;\n            char buf[1000];\n            ptr_file =fopen(\"input.txt\",\"r\");\n            if (!ptr_file)\n            return 1;\n            char *pt[] = {\n                \"H\",\"He\",\"Li\",\"Be\",\"B\",\"C\",\"N\",\"O\",\"F\",\"Ne\",\"Na\"\n\n            };\n    printf(\"what element do you want\\n\");\n    scanf(\"%s\", &amp;hh);\n    for(j=0; j&lt;= 3; j++)\n    {\n        if(hh == pt[j])\n      {\n        fgets(buf,1000, ptr_file);\n                token = strtok(buf, delim);\n                while( token != NULL ) \n                {\n                printf( \"%s\\n\", token );\n                token = strtok(NULL, delim);\n                }\n\n                break;\n      }else     \n        {\n            fgets(buf,1000, ptr_file);\n            continue;\n        }\n    }    \n       fclose(ptr_file);\n            return 0;\n    }\n</code></pre>\n"}, {"tags": ["c", "shared-memory"], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1470255047, "creation_date": 1470255047, "answer_id": 38752757, "question_id": 38750811, "link": "https://stackoverflow.com/questions/38750811/how-are-shmget-permission-bits-used-when-the-segment-already-exists/38752757#38752757", "title": "How are shmget permission bits used when the segment already exists?", "body": "<blockquote>\n  <p>How do the permission mode bits OR'd into the <code>shmflg argument</code> [...] of <code>shmget</code> affect <code>shmget</code>'s behavior?</p>\n</blockquote>\n\n<p><a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/shmget.html\" rel=\"nofollow\">POSIX</a> is a bit tricky to interpret on this question for the case where there is already a shared-memory segment for the specified key, but the intent seems to be that it operates analogously with <code>open()</code>.  That is, if the process's uid and gid and the requested mode are inconsistent with the segment's uid, gid, and permissions, then the function fails.  Specifically,</p>\n\n<blockquote>\n  <p>The <code>shmget()</code> function shall fail if: [...] A shared memory identifier exists for key but operation permission as specified by the low-order nine bits of <code>shmflg</code> would not be granted [...].</p>\n</blockquote>\n\n<p>The Linux manpage for <code>shmget()</code> has similar text, and also specifically says that</p>\n\n<blockquote>\n  <p>If the shared memory segment already exists, the permissions are verified [...].</p>\n</blockquote>\n\n<p>This is not different from POSIX, just more explicit.</p>\n\n<p><a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_07\" rel=\"nofollow\">Another section of POSIX</a> gives more details, which boil down to saying that the read / and or write access are granted or denied based on the set of permission bits applicable to the process according to its euid and egid.</p>\n\n<blockquote>\n  <p>Does shmget perform any kind of \"permission verification on the permissions of the segment with these permission flags? Specifically what does that verification entail?</p>\n</blockquote>\n\n<p>Yes, as described above and in the linked POSIX specifications.</p>\n\n<p>It remains a bit unclear to me what \"operation permission as specified by the low-order nine bits of <code>shmflg</code>\" are.  One could interpret it to mean the permissions the calling process would have on the segment if it were creating it, but I think it really means just that all of the mode bits that are turned on in <code>shmflag</code> are also on in the segment's permissions field.</p>\n"}], "owner": {"reputation": 27, "user_id": 4479567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32d1f04067b9df39c343f4f3f6d4a140?s=128&d=identicon&r=PG&f=1", "display_name": "kev", "link": "https://stackoverflow.com/users/4479567/kev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 38752757, "answer_count": 1, "score": 1, "last_activity_date": 1470255047, "creation_date": 1470247732, "last_edit_date": 1470252646, "question_id": 38750811, "link": "https://stackoverflow.com/questions/38750811/how-are-shmget-permission-bits-used-when-the-segment-already-exists", "title": "How are shmget permission bits used when the segment already exists?", "body": "<p>Suppose I call <code>shmget</code> with the following arguments:</p>\n\n<pre><code>int shmid = shmget(KEY, 1024*4096, IPC_CREAT|0644);\n</code></pre>\n\n<p>and further, suppose that the segment with key <code>KEY</code> already exists.   How do the permission mode bits OR'd into the <code>shmflg</code> argument (in this case, <code>0644</code>) of <code>shmget</code> affect <code>shmget</code>'s behavior? Does <code>shmget</code> perform any kind of \"permission verification on the permissions of the segment with these permission flags? Specifically what does that verification entail?</p>\n"}, {"tags": ["c", "arrays", "pointers", "dynamic", "struct"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1470249462, "post_id": 38750769, "comment_id": 64876325, "body": "<code>char name[];</code> needs size."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5602163, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ad0069bf66564138dd208f5851fde83b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayguy", "link": "https://stackoverflow.com/users/5602163/throwawayguy"}, "edited": false, "score": 0, "creation_date": 1470249241, "post_id": 38750846, "comment_id": 64876188, "body": "Thanks, that resolved the error! Now im getting a segfault after executing the line                                                                                             scanf(&quot;%d %f %s&quot;,&amp;tempptr-&gt;age,&amp;tempptr-&gt;gpa,&amp;tempptr-&gt;name);             do you know what the problem might be? Sorry, new to C"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 29, "user_id": 5602163, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ad0069bf66564138dd208f5851fde83b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayguy", "link": "https://stackoverflow.com/users/5602163/throwawayguy"}, "edited": false, "score": 0, "creation_date": 1470249299, "post_id": 38750846, "comment_id": 64876213, "body": "This is a different problem."}, {"owner": {"reputation": 29, "user_id": 5602163, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ad0069bf66564138dd208f5851fde83b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayguy", "link": "https://stackoverflow.com/users/5602163/throwawayguy"}, "edited": false, "score": 0, "creation_date": 1470249357, "post_id": 38750846, "comment_id": 64876260, "body": "I know, thought I might ask though since it seems to be pretty small"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 29, "user_id": 5602163, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ad0069bf66564138dd208f5851fde83b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayguy", "link": "https://stackoverflow.com/users/5602163/throwawayguy"}, "edited": false, "score": 1, "creation_date": 1470249383, "post_id": 38750846, "comment_id": 64876275, "body": "Well, you don&#39;t have any space allocated for <code>name</code>."}, {"owner": {"reputation": 29, "user_id": 5602163, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ad0069bf66564138dd208f5851fde83b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayguy", "link": "https://stackoverflow.com/users/5602163/throwawayguy"}, "edited": false, "score": 0, "creation_date": 1470249664, "post_id": 38750846, "comment_id": 64876466, "body": "I added in:STUDENT *tempptr = malloc(sizeof(STUDENT));             tempptr = &amp;temp;                                                                                    but still not working"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 29, "user_id": 5602163, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ad0069bf66564138dd208f5851fde83b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayguy", "link": "https://stackoverflow.com/users/5602163/throwawayguy"}, "edited": false, "score": 1, "creation_date": 1470249781, "post_id": 38750846, "comment_id": 64876534, "body": "The field <code>*name*</code> is a zero-sized array in your code. It needs space too. Either give it a size like <code>name[20]</code>, or allocate more space for the struct, as it is so called &quot;flexible array member* (you can google it)"}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 1, "last_activity_date": 1470247903, "creation_date": 1470247903, "answer_id": 38750846, "question_id": 38750769, "link": "https://stackoverflow.com/questions/38750769/c-dynamic-struct-error/38750846#38750846", "title": "C dynamic struct error", "body": "<p>The <code>.</code> operator is a higher precedence than unary <code>*</code> (refer <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow\">here</a>). So first (before dereferencing) the compiler is trying to find an <code>age</code> field in <code>(array+i)</code>, which is not a structure, but a pointer.<br>\n You want to replace the <code>*(array+i).age</code> by either <code>(array+i)-&gt;age</code> or <code>(*(array+i)).age</code>.</p>\n"}], "owner": {"reputation": 29, "user_id": 5602163, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ad0069bf66564138dd208f5851fde83b?s=128&d=identicon&r=PG&f=1", "display_name": "throwawayguy", "link": "https://stackoverflow.com/users/5602163/throwawayguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 38750846, "answer_count": 1, "score": 0, "last_activity_date": 1470254128, "creation_date": 1470247585, "last_edit_date": 1470254128, "question_id": 38750769, "link": "https://stackoverflow.com/questions/38750769/c-dynamic-struct-error", "title": "C dynamic struct error", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int size,choice;\n    printf(\"student size:\\n\");\n    scanf(\"%d\", &amp;size);\n\n    typedef struct \n    {\n        int age;\n        double gpa;\n        char name[];\n    }STUDENT;\n    STUDENT *array = (STUDENT *) malloc(sizeof(STUDENT) * size);\n    printf(\"\\n(1) Add a student\\n(2) Delete a student\\n(3) Save all students\\n(4)Quit\\n\");\n    scanf(\"%d\",&amp;choice);\n    while (choice != 4){\n        switch (choice) {\n            STUDENT temp;\n            STUDENT *tempptr = &amp;temp;\n            int cellNum;\n            case 1:\n                printf(\"Enter age gpa and name:\\n\");\n                scanf(\"%d %f %s\",&amp;tempptr-&gt;age,&amp;tempptr-&gt;gpa,&amp;tempptr-&gt;name);\n                printf(\"Enter cell number:\\n\");\n                scanf(\"%d\", &amp;cellNum);\n                if (cellNum &gt; (size-1)){\n                    printf(\"Invalid cell number\\n\");\n                    break;\n                }else{\n                    *(array + cellNum) = temp;\n                }\n            case 3:\n               printf(\"stupid c syntax rules\");\n               FILE *p = fopen(\"students.txt\",\"w\");\n               int i = 0;\n               for (i=0; i&lt;size; i++){\n                   fprintf(p, \"%d, %f, %s\\n\",*(array+i).age,*(array+i).gpa,*(array+i).name);\n               }\n        }\n        printf(\"\\n(1) Add a student\\n(2) Delete a student\\n(3) Save all students\\n(4)Quit\\n\");\n        scanf(\"%d\",&amp;choice);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>getting errors:</p>\n\n<pre><code>main.c:40:56: error: request for member 'age' in something not a structure or union                                      \n                    fprintf(p, \"%d, %f, %s\\n\",*(array+i).age,*(array+i).gpa,*(array+i).name);                            \n                                                        ^                                                                \nmain.c:40:71: error: request for member 'gpa' in something not a structure or union                                      \n                    fprintf(p, \"%d, %f, %s\\n\",*(array+i).age,*(array+i).gpa,*(array+i).name);                            \n                                                                       ^                                                 \nmain.c:40:86: error: request for member 'name' in something not a structure or union                                     \n                    fprintf(p, \"%d, %f, %s\\n\",*(array+i).age,*(array+i).gpa,*(array+i).name); \n</code></pre>\n\n<p>why is this happening? \nThanks</p>\n"}, {"tags": ["c++", "c", "opengl", "sdl", "sdl-ttf"], "comments": [{"owner": {"reputation": 575, "user_id": 5403975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4092f9309bc4ab2f0e180e014508ca3a?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5403975/michael"}, "edited": false, "score": 0, "creation_date": 1470312591, "post_id": 38750624, "comment_id": 64905000, "body": "Sorry, but I think you should first learn more about OpenGL before you try to make what are currently trying. First of all OpenGL has no build in text functions, also not modern OpenGL. Moreover you should not use this old OpenGL 1.1 with it&#39;s fixed function pipeline. It&#39;s definitely completely deprecated. And I never saw glVertex2px before. Also I can&#39;t  find something about it. So finally it&#39;s hard to say what&#39;s wrong from this context without further information. Maybe you set up the Modelview/Projection matrix wrong so you can only see a small section of the whole?"}, {"owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "reply_to_user": {"reputation": 575, "user_id": 5403975, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4092f9309bc4ab2f0e180e014508ca3a?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5403975/michael"}, "edited": false, "score": 0, "creation_date": 1470313455, "post_id": 38750624, "comment_id": 64905611, "body": "@Michael About <code>glVertex2px</code>, it&#39;s a macro that I&#39;ve made myself which draws things using the number of pixels from the top left corner of the window like in SDL. In 2D, I find that more practical. I forgot to include its definition in the code, but I edited to correct that."}], "answers": [{"tags": [], "owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "is_accepted": true, "score": 2, "last_activity_date": 1470326103, "creation_date": 1470326103, "answer_id": 38772106, "question_id": 38750624, "link": "https://stackoverflow.com/questions/38750624/text-in-opengl-using-sdl-ttf/38772106#38772106", "title": "Text in OpenGL using SDL_TTF", "body": "<p>Your resulting texture is filled with solid colour. What makes it shape the text is alpha channel, but you have no alpha blending enabled so you don't see it. Add</p>\n\n<pre><code>glEnable(GL_BLEND);\nglBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n</code></pre>\n\n<p>or at least alpha test (will produce sharper edges due to lack of blending - for some fonts it even look better that way).</p>\n\n<p>Also note that you didn't freed neither generated <code>SDL_Surface</code> nor GL texture; that way you'll quickly run out of memory. Texture could be reused and SDL_Surface may be freed as soon as you copied data to GL texture.</p>\n"}], "owner": {"reputation": 6398, "user_id": 4284627, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2e017633cda5465e6683c74992cdec5e?s=128&d=identicon&r=PG", "display_name": "Donald Duck", "link": "https://stackoverflow.com/users/4284627/donald-duck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "accepted_answer_id": 38772106, "answer_count": 1, "score": 0, "last_activity_date": 1470326103, "creation_date": 1470247065, "last_edit_date": 1470313217, "question_id": 38750624, "link": "https://stackoverflow.com/questions/38750624/text-in-opengl-using-sdl-ttf", "title": "Text in OpenGL using SDL_TTF", "body": "<p>I'm a beginner in OpenGL and I've created a function to write text in OpenGL using SDL_TTF. Here is the code for my function:</p>\n\n<pre><code>#define WINDOW_WIDTH 832\n#define WINDOW_HEIGHT 487\n#define glVertex2px(x,y) glVertex2d((double)(x) * 2.0 / (double)WINDOW_WIDTH - 1.0, 1.0 - (double)(y) * 2.0 / (double)WINDOW_HEIGHT);\nvoid glWriteText2d(TTF_Font *font,const char *text,SDL_Color color,const int x,const int y){\n    GLuint texture;\n    SDL_Surface *surface;\n    surface = TTF_RenderText_Blended(font,text,color);\n    glGenTextures(1,&amp;texture);\n    glBindTexture(GL_TEXTURE_2D,texture);\n    gluBuild2DMipmaps(GL_TEXTURE_2D,4,surface-&gt;w,surface-&gt;h,GL_RGBA,GL_UNSIGNED_BYTE,surface-&gt;pixels);\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR_MIPMAP_NEAREST);\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_WRAP_S,GL_REPEAT);\n    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_WRAP_T,GL_REPEAT);\n    GLboolean textureIsEnabled = glIsEnabled(GL_TEXTURE_2D);\n    glEnable(GL_TEXTURE_2D);\n    glColor3ub(255,255,255);\n    glBegin(GL_QUADS);\n        glTexCoord2f(0,0);\n        glVertex2px(x,y);\n        glTexCoord2f(0,1);\n        glVertex2px(x,y + surface-&gt;h);\n        glTexCoord2f(1,1);\n        glVertex2px(x + surface-&gt;w,y + surface-&gt;h);\n        glTexCoord2f(1,0);\n        glVertex2px(x + surface-&gt;w,y);\n    glEnd();\n    if(!textureIsEnabled){\n        glDisable(GL_TEXTURE_2D);\n    }\n}\n</code></pre>\n\n<p>This function doesn't work because when I use it, it draws a rectangle which is the color of <code>color</code> at the place where the text should be. What should I change in my code so that it works?</p>\n"}, {"tags": ["c", "r", "glm"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1470247221, "post_id": 38750067, "comment_id": 64875107, "body": "I don&#39;t think this has anything to do with the C programming language, so please remove the <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> tag."}, {"owner": {"reputation": 56, "user_id": 3701983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5caeacf7c1539b57f4e482544a5d4ad6?s=128&d=identicon&r=PG&f=1", "display_name": "dmitrienka", "link": "https://stackoverflow.com/users/3701983/dmitrienka"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1470249892, "post_id": 38750067, "comment_id": 64876611, "body": "I&#39;ve added some explanations about the c tag."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 7956174, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8-bpChLqXgQ/AAAAAAAAAAI/AAAAAAAAABA/fn6ok06YSsM/photo.jpg?sz=128", "display_name": "mcxmcx", "link": "https://stackoverflow.com/users/7956174/mcxmcx"}, "is_accepted": false, "score": 0, "last_activity_date": 1496513880, "creation_date": 1496513880, "answer_id": 44347167, "question_id": 38750067, "link": "https://stackoverflow.com/questions/38750067/rs-hier-part-depends-on-predictor-order/44347167#44347167", "title": "R&#39;s hier.part() depends on predictor order", "body": "<p>this time, your problem is not shown in my R. The two I$perc are the same.-Chenxi</p>\n"}], "owner": {"reputation": 56, "user_id": 3701983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5caeacf7c1539b57f4e482544a5d4ad6?s=128&d=identicon&r=PG&f=1", "display_name": "dmitrienka", "link": "https://stackoverflow.com/users/3701983/dmitrienka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496513880, "creation_date": 1470245031, "last_edit_date": 1470249711, "question_id": 38750067, "link": "https://stackoverflow.com/questions/38750067/rs-hier-part-depends-on-predictor-order", "title": "R&#39;s hier.part() depends on predictor order", "body": "<p>I've tried to use the hier.part R package (and it's hier.part() function) to estimate independent contributions of the variables. Suddenly I've experienced a strong dependence on the predictor order. </p>\n\n<p>There is a paper (<a href=\"http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0011698\" rel=\"nofollow\">http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0011698</a> ) reporting similar behavior for more than 9 predictors. Package's documentation also reports \"minor rounding error\" for 9-12 predictors. But I've experienced it even in package's example with 4 independent variables.</p>\n\n<pre><code>&gt; library(hier.part)\n&gt; data(amphipod)\n&gt; env1 &lt;- amphipod[,2:5]\n&gt; hier.part(amphipod$australis, env1, fam = \"binomial\",\n+           gof = \"logLik\", barplot=F)$I.perc\n              I\nfimp   19.74685\nfconn  18.24679\ndensep 25.24765\nunseal 36.75871\n&gt; hier.part(amphipod$australis, env1[,c(4,3,2,1)], fam = \"binomial\",\n+           gof = \"logLik\", barplot=F)$I.perc\n              I\nunseal 16.16072\ndensep 17.98755\nfconn  32.00246\nfimp   33.84927\n</code></pre>\n\n<p>In addition, the exact values are not stable between calls. The function uses C code (in partition() call) and at least the  \"between calls stability\" issue can be attributed to it, because all the relevant R code is deterministic.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1470244529, "post_id": 38749903, "comment_id": 64873599, "body": "blank as in you type the letters <code>b</code>, <code>l</code>, <code>a</code>, etc.., or you hit the space bar?"}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "edited": false, "score": 1, "creation_date": 1470244705, "post_id": 38749903, "comment_id": 64873703, "body": "Is your blank included <code>&#39;\\t&#39;</code>, <code>&#39; &#39;</code>, <code>&#39;&#39;</code>, <code>&#39;\\n&#39;</code> or <code>&#39;\\r&#39;</code>?"}, {"owner": {"reputation": 242, "user_id": 3521385, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/unLde.jpg?s=128&g=1", "display_name": "Module", "link": "https://stackoverflow.com/users/3521385/module"}, "edited": false, "score": 2, "creation_date": 1470244762, "post_id": 38749903, "comment_id": 64873739, "body": "A little more explicit please."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470244788, "post_id": 38749903, "comment_id": 64873750, "body": "Add a newline: <code>printf(&quot;Number of sentences is %d\\n&quot;, numberSentence(ch) );</code>"}, {"owner": {"reputation": 19, "user_id": 6315958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef3f6a80cd21a95ca4c77e5dc054423d?s=128&d=identicon&r=PG&f=1", "display_name": "havada", "link": "https://stackoverflow.com/users/6315958/havada"}, "edited": false, "score": 0, "creation_date": 1470244828, "post_id": 38749903, "comment_id": 64873764, "body": "sorry, yes I meant space bar"}, {"owner": {"reputation": 174, "user_id": 4490919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YukaU.jpg?s=128&g=1", "display_name": "javey", "link": "https://stackoverflow.com/users/4490919/javey"}, "edited": false, "score": 0, "creation_date": 1470244919, "post_id": 38749903, "comment_id": 64873801, "body": "I think better way to think of the code you have here is to see it as a counter of <code>.</code>,  <code>?</code>, and <code>!</code> not as a counter of sentences. Can you give an explicit example of input you&#39;ve given and output you&#39;ve received?"}, {"owner": {"reputation": 242, "user_id": 3521385, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/unLde.jpg?s=128&g=1", "display_name": "Module", "link": "https://stackoverflow.com/users/3521385/module"}, "edited": false, "score": 0, "creation_date": 1470245229, "post_id": 38749903, "comment_id": 64874005, "body": "@havada  If you increment after every encounter of a space, you will be basically counting the number of words instead."}], "answers": [{"comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 4, "creation_date": 1470244900, "post_id": 38749997, "comment_id": 64873794, "body": "<code>scanf(&quot;%s&quot;, ch);</code> does not include white-space."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1470245791, "post_id": 38749997, "comment_id": 64874315, "body": "<a href=\"http://stackoverflow.com/a/31333305/2173917\">please, no <code>gets()</code>, suggest <code>fgets()</code> instead.</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1470245944, "post_id": 38749997, "comment_id": 64874395, "body": "@Dr.Haimovitz Please see ^^."}], "tags": [], "owner": {"reputation": 1362, "user_id": 6386250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/brwvr.jpg?s=128&g=1", "display_name": "Dr.Haimovitz", "link": "https://stackoverflow.com/users/6386250/dr-haimovitz"}, "is_accepted": false, "score": 1, "last_activity_date": 1470245525, "last_edit_date": 1470245525, "creation_date": 1470244780, "answer_id": 38749997, "question_id": 38749903, "link": "https://stackoverflow.com/questions/38749903/counting-number-of-sentences-in-c/38749997#38749997", "title": "Counting number of sentences in C", "body": "<p>If by blank you mean new line key, try:</p>\n\n<pre><code>if(ch[i] == '.' || ch[i] == '?' || ch[i] == '!' || ch[i] == '\\n')\n        count++;\n</code></pre>\n\n<p>but why not just use gets() instead?</p>\n\n<pre><code>while(gets(ch)!=NULL)\n{\n    count++;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 145, "user_id": 6636589, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1VGrBVOmjF4/AAAAAAAAAAI/AAAAAAAAABY/dXlado0wH5w/photo.jpg?sz=128", "display_name": "Matthew", "link": "https://stackoverflow.com/users/6636589/matthew"}, "is_accepted": false, "score": 2, "last_activity_date": 1470323992, "last_edit_date": 1470323992, "creation_date": 1470244996, "answer_id": 38750062, "question_id": 38749903, "link": "https://stackoverflow.com/questions/38749903/counting-number-of-sentences-in-c/38750062#38750062", "title": "Counting number of sentences in C", "body": "<p>Your problem lies at:</p>\n\n<pre><code>scanf(\"%s\", ch)\n</code></pre>\n\n<p>scanf with \"%s\" will look until it finds a white-space, then storing the string into your pointer, ch.</p>\n\n<p>In this case I would suggest using:</p>\n\n<pre><code>scanf(\"%c\", ch)\n</code></pre>\n\n<p>Where it will scan character by character. You will need to slightly remodel the program.</p>\n\n<p>Note that scanf() will return an integer representing the width of what it read.\nThus:</p>\n\n<pre><code>while(scanf(\"%c\", ch) == 1)\n   if (ch == ...)\n}\n</code></pre>\n\n<p>For your reference:\n<a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_scanf.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/c_standard_library/c_function_scanf.htm</a></p>\n"}, {"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 0, "last_activity_date": 1470338141, "last_edit_date": 1470338141, "creation_date": 1470247932, "answer_id": 38750860, "question_id": 38749903, "link": "https://stackoverflow.com/questions/38749903/counting-number-of-sentences-in-c/38750860#38750860", "title": "Counting number of sentences in C", "body": "<p>For this simple problem, you can let <code>scanf()</code> split your input on your sentence delimiters using the <em>scanset</em> conversion specifier.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int count = 0;\n    char buf[1000];\n    while (scanf(\"%999[^.!?]%*c\", buf) == 1) ++count;\n    printf(\"sentences: %d\\n\", count);\n    return 0;\n}\n</code></pre>\n\n<p>The <code>%[^.!?]</code> will scan all the data up to either a period, exclamation point or question mark. The <code>%*c</code> will scan past the punctuation without storing it (the <code>*</code> means there is no argument for the scanned input to be stored into).</p>\n"}, {"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 1, "last_activity_date": 1470248775, "creation_date": 1470248775, "answer_id": 38751088, "question_id": 38749903, "link": "https://stackoverflow.com/questions/38749903/counting-number-of-sentences-in-c/38751088#38751088", "title": "Counting number of sentences in C", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint numberSentence(char ch[]){\n    int count=0, i;\n    char last = ' ';\n\n    for(i = 0; ch[i]; ++i){\n        if(ch[i] == '.' || ch[i] == '?' || ch[i] == '!'){\n            count++;\n            last = ' ';\n        } else if(ch[i] == ' ' || ch[i] == '\\t' || ch[i] == '\\n'){\n            continue;//white-space does't include to sentence of top.\n        } else {\n            last = ch[i];//check for Not terminated with \".?!\"\n        }\n    }\n\n    return count + (last != ' ');//+ (last != ' ') : +1 if Not terminated with \".?!\"\n}\n\n\nint main(void){\n    char ch[1000];\n\n    printf(\"Enter sentences:\\n\");\n    scanf(\"%999[^\\n]\", ch);//input upto newline\n    printf(\"Number of sentences is %d\", numberSentence(ch));\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6315958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef3f6a80cd21a95ca4c77e5dc054423d?s=128&d=identicon&r=PG&f=1", "display_name": "havada", "link": "https://stackoverflow.com/users/6315958/havada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3787, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1470338141, "creation_date": 1470244472, "last_edit_date": 1470250437, "question_id": 38749903, "link": "https://stackoverflow.com/questions/38749903/counting-number-of-sentences-in-c", "title": "Counting number of sentences in C", "body": "<p>This simple code counts number of sentences entered by checking period, question mark or exclamation mark. However, if I enter \" \", it does not count sentences after space.\nHow can I fix this?</p>\n\n<pre><code>int numberSentence(char ch[])\n{\n    int count=0, i=0;\n    while(ch[i] != '\\0')\n    {\n        if(ch[i] == '.' || ch[i] == '?' || ch[i] == '!')\n            count++;\n        i++;\n    }\n\n    return count;\n}\n\n\nint main()\n{\n    char ch[999];\n    printf(\"Enter sentences:\\n\");\n    scanf(\"%s\", ch);\n    printf(\"Number of sentences is %d\", numberSentence(ch));\n\n}\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 4195, "user_id": 2432477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a516bc16804edd78d8f6c2a7e06f07b?s=128&d=identicon&r=PG&f=1", "display_name": "nouney", "link": "https://stackoverflow.com/users/2432477/nouney"}, "edited": false, "score": 5, "creation_date": 1470244552, "post_id": 38749898, "comment_id": 64873609, "body": "You need to allocate memory for <code>word</code>."}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "edited": false, "score": 0, "creation_date": 1470244895, "post_id": 38749898, "comment_id": 64873789, "body": "Just add one line like <code>word = (char *) malloc(&lt;memsize&gt;);</code>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1470245048, "post_id": 38749898, "comment_id": 64873875, "body": "For <code>ch == EOF</code> to work, <code>ch</code> must be an <code>int</code>, not a <code>char</code>. But if you make it an <code>int</code>, you won&#39;t be able to use it as an argument to <code>strncat</code>. (To my mind, that doesn&#39;t matter. <code>strncat</code> is a <i>terrible</i> way to append a character to a string whose length you know.)"}, {"owner": {"reputation": 31, "user_id": 6438052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ae842f792b65ba6863db7da41b4b64?s=128&d=identicon&r=PG&f=1", "display_name": "Sayantan Talukder", "link": "https://stackoverflow.com/users/6438052/sayantan-talukder"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1470245381, "post_id": 38749898, "comment_id": 64874088, "body": "@rici Thats the only way that I know right now."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1470245742, "post_id": 38749898, "comment_id": 64874295, "body": "Welcome to Stack Overflow! <a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1470246959, "post_id": 38749898, "comment_id": 64874962, "body": "@SayantanTalukder: <code>s[i++] = ch; </code> is unknown to you? You don&#39;t seem to have a problem using that syntax with <code>salt</code>."}, {"owner": {"reputation": 31, "user_id": 6438052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ae842f792b65ba6863db7da41b4b64?s=128&d=identicon&r=PG&f=1", "display_name": "Sayantan Talukder", "link": "https://stackoverflow.com/users/6438052/sayantan-talukder"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1470249485, "post_id": 38749898, "comment_id": 64876337, "body": "@rici Actually no. It isn&#39;t unknown. I was just being stupid. I was so lot in the trying to add up a string and char ,I totally forgot I can just treat the string as an array of chars."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6438052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ae842f792b65ba6863db7da41b4b64?s=128&d=identicon&r=PG&f=1", "display_name": "Sayantan Talukder", "link": "https://stackoverflow.com/users/6438052/sayantan-talukder"}, "edited": false, "score": 0, "creation_date": 1470246159, "post_id": 38750100, "comment_id": 64874527, "body": "Thanks. The static array worked. (Actually I found the use of array easier to understand)"}, {"owner": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "edited": false, "score": 0, "creation_date": 1470246579, "post_id": 38750100, "comment_id": 64874754, "body": "Don&#39;t forget to free it."}], "tags": [], "owner": {"reputation": 1362, "user_id": 6386250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/brwvr.jpg?s=128&g=1", "display_name": "Dr.Haimovitz", "link": "https://stackoverflow.com/users/6386250/dr-haimovitz"}, "is_accepted": false, "score": 1, "last_activity_date": 1470250193, "last_edit_date": 1470250193, "creation_date": 1470245155, "answer_id": 38750100, "question_id": 38749898, "link": "https://stackoverflow.com/questions/38749898/segmentation-fault-while-using-strncat-in-c/38750100#38750100", "title": "Segmentation fault while using strncat in C", "body": "<p>You need to allocate a memory buffer for \"word\":</p>\n\n<pre><code>word = malloc(MaxInputSize);\n</code></pre>\n\n<p>Or better would be to just declare word as a static array:</p>\n\n<pre><code>word[MaxInputSize];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "edited": false, "score": 0, "creation_date": 1470246551, "post_id": 38750165, "comment_id": 64874742, "body": "You always want to free the memory after you are done."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "edited": false, "score": 0, "creation_date": 1470246899, "post_id": 38750165, "comment_id": 64874938, "body": "@Mirakurun : Well,as a good practice, yes, but they will be automatically freed when the program ends anyways"}, {"owner": {"reputation": 1362, "user_id": 6386250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/brwvr.jpg?s=128&g=1", "display_name": "Dr.Haimovitz", "link": "https://stackoverflow.com/users/6386250/dr-haimovitz"}, "edited": false, "score": 0, "creation_date": 1470247169, "post_id": 38750165, "comment_id": 64875082, "body": "Not only as a good practice, also for not running out of memory (if the memory does not need to be allocated untill the end of the program)"}, {"owner": {"reputation": 3849, "user_id": 6008453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3f29d4474cf818b192e452474933ef4c?s=128&d=identicon&r=PG&f=1", "display_name": "Mirakurun", "link": "https://stackoverflow.com/users/6008453/mirakurun"}, "edited": false, "score": 0, "creation_date": 1470247333, "post_id": 38750165, "comment_id": 64875153, "body": "@sjsam Don&#39;t take memory as granted."}], "tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": false, "score": 1, "last_activity_date": 1470246680, "last_edit_date": 1470246680, "creation_date": 1470245352, "answer_id": 38750165, "question_id": 38749898, "link": "https://stackoverflow.com/questions/38749898/segmentation-fault-while-using-strncat-in-c/38750165#38750165", "title": "Segmentation fault while using strncat in C", "body": "<p>on doing</p>\n\n<pre><code>char *word;\n</code></pre>\n\n<p>you have declared word as a pointer to char but you have not set where <code>word</code> points to. As long as unassigned <code>word</code> can point to anywhere and de-referencing <code>word</code> ie <code>*word</code> causes undefined behavior and that is exactly what you did in</p>\n\n<pre><code> word = strncat(word, &amp;ch, 1);\n</code></pre>\n\n<p>For the code to work properly you need to allocate memory to <code>word</code> before the above step ie  do something like</p>\n\n<pre><code>word=malloc(100*sizeof *ptr); // You set word to point to a chunk of 100 bytes\n</code></pre>\n\n<p>Assuming <code>word</code> to point to a chunk of 100 bytes, now</p>\n\n<pre><code>strncat(word, &amp;ch, 1);\n</code></pre>\n\n<p>wouldn't be logically correct, because assuming word is completely filled( 99 characters plus terminating null character), you can't add one more character to it, so you need to have some error checking prior to this step. Do something like</p>\n\n<pre><code>if strlen(word)&lt;=98)  // remember 99 is the max allowed, you gonna add 1 char\n  strncat(word, &amp;ch, 1);\n</code></pre>\n\n<hr>\n\n<p>And as a good practice, you could delete the memory after use, ie</p>\n\n<pre><code>free(word);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17904, "user_id": 364818, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5fd80d98f96f9adbde7876cbda181715?s=128&d=identicon&r=PG", "display_name": "Mark Lakata", "link": "https://stackoverflow.com/users/364818/mark-lakata"}, "is_accepted": false, "score": 1, "last_activity_date": 1499980593, "last_edit_date": 1499980593, "creation_date": 1470245484, "answer_id": 38750198, "question_id": 38749898, "link": "https://stackoverflow.com/questions/38749898/segmentation-fault-while-using-strncat-in-c/38750198#38750198", "title": "Segmentation fault while using strncat in C", "body": "<p>You need to allocate memory for <code>word</code>, either as an array or using <code>malloc</code>. If the string is small (compared to your stack size), use an array, as it doesn't require cleanup.</p>\n\n<p>You also need to set <code>word[0]=0;</code> after <code>malloc</code>, otherwise you'll get junk and a possible second segmentation fault.</p>\n\n<p>The canonical way of adding characters to a string is </p>\n\n<pre><code>char word[9];\nchar* pWord = word;\nmemset(word,0,sizeof(word));\n...\n\n  ch = getchar();\n  *pWord++ = ch;\n  len++;\n  if (len &gt;= sizeof(word)-1) ...\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6438052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ae842f792b65ba6863db7da41b4b64?s=128&d=identicon&r=PG&f=1", "display_name": "Sayantan Talukder", "link": "https://stackoverflow.com/users/6438052/sayantan-talukder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1499980593, "creation_date": 1470244466, "last_edit_date": 1472370210, "question_id": 38749898, "link": "https://stackoverflow.com/questions/38749898/segmentation-fault-while-using-strncat-in-c", "title": "Segmentation fault while using strncat in C", "body": "<p>So I just started learning two weeks back and am basically a beginner. So I wrote this program. But it continuously gives Segmentation fault error line 41 in the strncat function. I am not sure what I am doing wrong.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#define _XOPEN_SOURCE\n#include &lt;unistd.h&gt;\n\n#define _GNU_SOURCE\n#include &lt;crypt.h&gt;\n\n#define WORD \"/usr/share/dict/words\"\n\nint error(void);\nint check(char *text, char *psswrd, char *salt);\n\nint main(int argc, char *argv[])\n{\n    if (argc != 2)\n        return error();\n\n    char salt[3]; \n    salt[0] = argv[1][0];\n    salt[1] = argv[1][1];\n    salt[2] = '\\0';\n\n    FILE *fptr;\n    char ch;\n    char *word;\n    int flag = 0;\n    fptr = fopen(WORD, \"r\");\n    if (fptr == NULL)\n    {\n        flag = 1;\n    }\n    else\n    {\n        do\n        {\n            ch = fgetc(fptr);\n            if ( ch != ' ' &amp;&amp; ch != '\\n')\n            {\n                word = strncat(word, &amp;ch, 1);\n                if (strlen(word) == 8)\n                {\n                    flag = check(word, argv[1], salt);\n                    if (flag == 0)\n                    {\n                        printf (\"%s \\n\", word);\n                        return 0;\n                    }\n                }\n            }\n            else\n            {\n                word = \"\";\n            }\n        }\n        while (ch != EOF);\n\n        fclose(fptr);\n    }\n\n    if (flag == 2)\n    {\n        printf(\"Password not found\\n\");\n        return 2;\n    }\n}\n\nint error(void)\n{\n    printf (\"Usage: ./crack &lt;encrypted keyword&gt;\\n\");\n    return 1;\n}\n\nint check(char *text, char *psswrd, char *salt)\n{\n    if (strcmp(crypt(text, salt), psswrd) == 0 )\n        return 0;\n    else \n        return 2;\n }\n</code></pre>\n"}, {"tags": ["c", "memory-management", "operating-system", "virtual"], "comments": [{"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1470244868, "post_id": 38749868, "comment_id": 64873781, "body": "Depends on the OS. Create a C program using printf with %p to print out the addresses of local variables (stacK), versus allocated (malloc()) variables, versus addresses of static variables (program data), versus addresses of functions (pointer to function), ... .  Part of the virtual address space is used for the OS. There&#39;s also some data related to each running thread (like the seed value for rand()) (FS or GS segment registers may be used to access this, or it could be mapped into virtual address space)."}], "answers": [{"tags": [], "owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "is_accepted": true, "score": 1, "last_activity_date": 1470274170, "creation_date": 1470274170, "answer_id": 38757096, "question_id": 38749868, "link": "https://stackoverflow.com/questions/38749868/process-address-space-on-virtual-address-systems/38757096#38757096", "title": "Process address space on virtual address systems", "body": "<p>The answer you link to simply shows a way things could be done.</p>\n\n<p>Assuming you have a logical 4GB address space, not all of those might be valid or even potentially valid virtual addresses.</p>\n\n<p>Some part of that logical address space will be devoted to the system. It is unlikely the system will use or come close to using the entire logical address range devoted to it.</p>\n\n<p>There will be other areas in the logical address space that will not have valid logical addresses.</p>\n\n<p>Next, describing memory as heap and stack is misleading. Heap and stack are simply read/write memory. There is nothing special about them and the operating system does not care what the memory is being used for.</p>\n\n<p>Think of program sections as being:\n- Executable, readonly\n- No execute, read/write\n- No execute, readonly</p>\n\n<p>Your second question is about malloc. Malloc implementations manage pools of read/write memory. Malloc tries to process a memory request by returning memory from the pool. If there is not sufficient memory available, malloc will increase the size of the pool by mapping more virtual memory to the logical address space.</p>\n\n<p>If applications need to allocate large amounts of memory, they usually do not use malloc. They operating system services instead. If you have a 4GB address space, you cannot allocate blocks larger then 4GB.</p>\n"}], "owner": {"reputation": 1474, "user_id": 6497083, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/1I9Cr.jpg?s=128&g=1", "display_name": "Shubham Jain", "link": "https://stackoverflow.com/users/6497083/shubham-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1070, "favorite_count": 0, "accepted_answer_id": 38757096, "answer_count": 1, "score": -1, "last_activity_date": 1470274170, "creation_date": 1470244375, "last_edit_date": 1495542156, "question_id": 38749868, "link": "https://stackoverflow.com/questions/38749868/process-address-space-on-virtual-address-systems", "title": "Process address space on virtual address systems", "body": "<p>In the below link, answer given by Sdaz MacSkibbons gives a brief overview of process address space on virtual address systems.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/5162580/what-happens-when-a-computer-program-runs/5162649#5162649\">What happens when a computer program runs?</a></p>\n\n<p>Now suppose every process gets 4GB virtual address space. Now does that mean that the top addresses of this virtual address space will get stack part (Suppose stack address starts from 0) and address space from bottom will be allocated to text, data, globals and heap. Since size of heap changes, do new malloc allocations will map virtual address space pages to real memory directly or do they check whether previously allocated virtual address pages to heap are free/available. And How about if we need large amount of heap memory, like greater than 4GB, than how do process supports that ?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "string", "struct", "char"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1470244180, "post_id": 38749789, "comment_id": 64873410, "body": "heh? did you read the manual page?"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1470244261, "post_id": 38749789, "comment_id": 64873452, "body": "Also, no information on the struct."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 3, "creation_date": 1470244354, "post_id": 38749789, "comment_id": 64873502, "body": "<a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fprintf.html\" rel=\"nofollow noreferrer\"><code>fprintf()</code></a> doesn&#39;t take a format string as first argument."}, {"owner": {"reputation": 242, "user_id": 3521385, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/unLde.jpg?s=128&g=1", "display_name": "Module", "link": "https://stackoverflow.com/users/3521385/module"}, "edited": false, "score": 0, "creation_date": 1470244487, "post_id": 38749789, "comment_id": 64873575, "body": "fprintf(outfile,&quot;%s &quot;, ent-&gt;d_name). You have to give fprintf the pointer to the file as the first argument"}], "answers": [{"tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": false, "score": 0, "last_activity_date": 1470244737, "creation_date": 1470244737, "answer_id": 38749984, "question_id": 38749789, "link": "https://stackoverflow.com/questions/38749789/how-to-get-string-from-a-struct-in-c/38749984#38749984", "title": "how to get string from a struct in C?", "body": "<p>assuming</p>\n\n<pre><code>char dname[some_number];\n</code></pre>\n\n<p>and the structure object</p>\n\n<pre><code>ent //is not a pointer\n</code></pre>\n\n<p>do</p>\n\n<pre><code>fprintf(outfile,\"%s\\n\",ent.d_name); // you missed the FILE* at the beginning\n</code></pre>\n\n<p>had the <code>ent</code> been a pointer, then the above statement would change to</p>\n\n<pre><code>fprintf(outfile,\"%s\\n\",ent-&gt;d_name); // note the -&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6477, "user_id": 3961271, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/2cKoq.jpg?s=128&g=1", "display_name": "Woodrow Barlow", "link": "https://stackoverflow.com/users/3961271/woodrow-barlow"}, "is_accepted": false, "score": 1, "last_activity_date": 1470245415, "last_edit_date": 1470245415, "creation_date": 1470244875, "answer_id": 38750026, "question_id": 38749789, "link": "https://stackoverflow.com/questions/38749789/how-to-get-string-from-a-struct-in-c/38750026#38750026", "title": "how to get string from a struct in C?", "body": "<p>From the man page of <a href=\"http://linux.die.net/man/3/fprintf\" rel=\"nofollow\"><code>fprintf</code></a>, the function declaration is:</p>\n\n<pre><code>int fprintf(FILE *stream, const char *format, ...);\n</code></pre>\n\n<p>You did not include the first argument. Here is a simple program that proves you can write the contents of a directory to a file:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;dirent.h&gt;\n\nint main (void)\n{\n    FILE *outfile;\n    DIR *dir;\n    struct dirent *ent;        \n\n    outfile = fopen(\"Z:\\\\NH\\\\instructions.txt\",\"wb\");\n    if (outfile == NULL)\n    {\n        return -1;\n    }\n\n    dir = opendir (\"Z:\\\\NH\\\\sqltesting\\\\\");\n    if (dir == NULL)\n    {\n        fclose (outfile);\n        return -1;\n    }\n\n    while ((ent = readdir (dir)) != NULL)\n    {\n        fprintf (outfile, \"%s\\n\", ent-&gt;d_name);\n    }\n\n    fclose (outfile);\n    closedir (dir);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5050090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7553c56994d1c3876361841a566b5ae?s=128&d=identicon&r=PG&f=1", "display_name": "obito94", "link": "https://stackoverflow.com/users/5050090/obito94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "closed_date": 1470526629, "answer_count": 2, "score": -4, "last_activity_date": 1470245415, "creation_date": 1470244130, "question_id": 38749789, "link": "https://stackoverflow.com/questions/38749789/how-to-get-string-from-a-struct-in-c", "closed_reason": "Needs details or clarity", "title": "how to get string from a struct in C?", "body": "<p>I was curious if anyone has gone about doing this before.</p>\n\n<p>I'm having an issue with getting a string from a struct.  What I'm trying to do is get the string from the specific struct i'm working with, then put that string into fprintf(\"%s\", whateverstring);</p>\n\n<pre><code>FILE* outfile = fopen(\"Z:\\\\NH\\\\instructions.txt\",\"wb\");\nif ((dir = opendir (\"Z:\\\\NH\\\\sqltesting\\\\\")) != NULL) {// open directory and if it exists\n\n         while ((ent = readdir (dir)) != NULL) { //while the directory isn't null\n                 printf(\"%s\\n\", ent-&gt;d_name);  //I can do THIS okay\n\n                 fprintf(\"%s\\n\",ent-&gt;d_name); //but I can't do this\n\n                    fclose(outfile);\n\n                                        }\n\n                    }   \n                        closedir (dir);\n\n                //else { \n                 //\n                    //           perror (\"\"); //print error and panic\n                        //     return EXIT_FAILURE; \n                    //}\n            }\n</code></pre>\n\n<p>am I taking  the wrong approach here?  I was thinking about in some way using something like <code>char[80] =ent.d_name;</code>\nhowever obviously that doesn't work.  Is there some way I can get that string from the struct and throw it into fprintf?    </p>\n"}, {"tags": ["c", "linux", "fork", "wait"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1470243990, "post_id": 38749152, "comment_id": 64873304, "body": "How are you running the program and what makes you think that only four or five values are accepted? Note that if stdin is redirected to a pipe, it is likely that the first process to call scanf will drain the pipe and the remaining processes will see EOF."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1470598582, "post_id": 38749152, "comment_id": 65002587, "body": "@rici, not likely. Each process does a <code>scanf(3)</code> on the file descriptor (with the added condition that the file is <code>dup(2)</code>ed and reads are sequential on it)  The problem here is that when the process group leader dies(whatever position it got in the reading queue), the remaining processes are killed by the kernel."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1470599680, "post_id": 38749152, "comment_id": 65002877, "body": "Just tested and the kernel does not kill the processes.  But they get <code>EOF</code> from the input descriptor once the group leader dies.  Sorry, but with the testings I couldn&#39;t edit my last comment."}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 4082270, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-_sGA3kB8P1M/AAAAAAAAAAI/AAAAAAAAAMU/blZifpxzlug/photo.jpg?sz=128", "display_name": "Vrajendra", "link": "https://stackoverflow.com/users/4082270/vrajendra"}, "edited": false, "score": 0, "creation_date": 1470280576, "post_id": 38750511, "comment_id": 64888317, "body": "Thanks for the reply. My requirement is such that I should be monitoring for all 8 Scanf&#39;s. And whichever comes out of blocking state should process them. With multiple copies of j being made, I am not sure how there will be race condition. Please elaborate your approach if you were to do it differently."}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "reply_to_user": {"reputation": 303, "user_id": 4082270, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-_sGA3kB8P1M/AAAAAAAAAAI/AAAAAAAAAMU/blZifpxzlug/photo.jpg?sz=128", "display_name": "Vrajendra", "link": "https://stackoverflow.com/users/4082270/vrajendra"}, "edited": false, "score": 0, "creation_date": 1470283584, "post_id": 38750511, "comment_id": 64889013, "body": "I added an example. The better way to do this is <code>for(int i=0; i&lt;8; i++) { scanf(&quot;%d&quot;, &amp;j); if(!fork()) process(j); }</code> , so that only one process reads from stdin at a time."}], "tags": [], "owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": false, "score": 1, "last_activity_date": 1470283194, "last_edit_date": 1470283194, "creation_date": 1470246624, "answer_id": 38750511, "question_id": 38749152, "link": "https://stackoverflow.com/questions/38749152/how-to-wait-for-each-process-to-terminate-in-the-following-example/38750511#38750511", "title": "How to wait for each process to terminate in the following example?", "body": "<p>The problem here is that <code>wait(0)</code> only waits for the first child. The main process will exit once it has successfully raced to get its own input, and a direct child has done the same. </p>\n\n<p>The easiest kludge is to just wait until there are no more children to wait for:</p>\n\n<pre><code>void main() {\n    int j;\n    fork();\n    fork();\n    fork();\n\n    scanf(\"%d\", &amp;j);\n    printf(\"The values are %d\\n\",j);\n\n    while (wait(0) != -1);\n}\n</code></pre>\n\n<p>This reads 8 values from the interactive terminal as expected.</p>\n\n<p>You should never do this in a real program though. The main thread should instead read all 8 values and create the children as needed to process them. Failing to do so causes race conditions and buffering issues. </p>\n\n<p>Here's an example of this, using one less <code>fork()</code> for brevity:</p>\n\n<pre><code>$ for i in {1..4}; do echo \"$i\"; done  | ./foo\nThe values are 1\nThe values are 0\nThe values are 0\nThe values are 0\n\n$ for i in {1..4}; do echo \"$i\"; sleep 0.1; done  | ./foo\nThe values are 1\nThe values are 2\nThe values are 3\nThe values are 4\n</code></pre>\n\n<p>In the former case, multiple writes to the pipe become a single read, which is picked up by an arbitrary process. The others get nothing.</p>\n\n<p>In the second case, a short sleep is added to allow more time between each read, and now they get the values as expected.</p>\n"}, {"tags": [], "owner": {"reputation": 819, "user_id": 6086833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/060138486ddeff3186d29262a5852c76?s=128&d=identicon&r=PG&f=1", "display_name": "T Johnson", "link": "https://stackoverflow.com/users/6086833/t-johnson"}, "is_accepted": false, "score": 0, "last_activity_date": 1470246638, "creation_date": 1470246638, "answer_id": 38750515, "question_id": 38749152, "link": "https://stackoverflow.com/questions/38749152/how-to-wait-for-each-process-to-terminate-in-the-following-example/38750515#38750515", "title": "How to wait for each process to terminate in the following example?", "body": "<p>You need to wait for all your children and your children need to wait for their children, etc. Currently your <code>wait(0)</code> call only waits for one child to change state. </p>\n\n<pre><code>// wait(0); \nwhile (1) {\n   int status;\n   pid_t done = wait( &amp;status );\n   if ( done == -1 )\n      break; // no more children\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": true, "score": 2, "last_activity_date": 1470606155, "last_edit_date": 1470606155, "creation_date": 1470391576, "answer_id": 38786600, "question_id": 38749152, "link": "https://stackoverflow.com/questions/38749152/how-to-wait-for-each-process-to-terminate-in-the-following-example/38786600#38786600", "title": "How to wait for each process to terminate in the following example?", "body": "<p>Well, the first question you have to answer to yourself is <strong>how many processes you think you have there?</strong>  As you don't use the returned value from the <code>fork(2)</code> system call, you don't know even if you are the parent or you are the child after execution of each fork.</p>\n\n<p>You'll have one process at the beginning of the tale, which does a <code>fork(2)</code> system call and converts in <strong>two</strong> processes, that then execute (both, parent and child) a second <code>fork(2)</code> call, converting (each) in two processes (two more, so four in total) when the second call returns.  Then comes the third, which duplicates again the number of processes, so you'll get at the end of the story <strong>eight</strong> running processes at all in a binary tree execution history hierarchy fully populated up to height three.</p>\n\n<h1>but the processes relationships are not the same</h1>\n\n<p>The processes can each <code>wait(2)</code> for each of their <strong>own</strong> children, but <em>there are processes that, <strong>since their inceptions</strong> have made three, two, one, or no <code>fork()</code> at all</em>. The root node is the only that makes three <code>fork()</code>s, so it can do up to three <code>wait(2)</code>s without error (for each of its children), the first of its children, makes only two, the second makes only one... like this:</p>\n\n<pre><code>proc[0]---fork()-----fork()---fork()----exit();\n          |          |        |\n          |          |        proc[3]---exit();\n          |          |       \n          |          proc[2]--fork()----exit();\n          |                   |\n          |                   proc[4]---exit();\n          |\n          proc[1]----fork()---fork()----exit();\n                     |        |\n                     |        proc[5]---exit();\n                     |\n                     proc[6]--fork()----exit();\n                              |\n                              proc[7]---exit();\n</code></pre>\n\n<p>so </p>\n\n<ul>\n<li><code>proc[0]</code> can <code>wait(2)</code> to <code>proc[1]</code>, <code>proc[2]</code> and <code>proc[3]</code>;</li>\n<li><code>proc[1]</code> can <code>wait(2)</code> to <code>proc[5]</code> and <code>proc[6]</code>;</li>\n<li><code>proc[2]</code> can <code>wait(2)</code> to <code>proc[4]</code> only</li>\n<li><code>proc[3]</code> cannot <code>wait(2)</code> (it will result in error if <code>wait(2)</code> is called);</li>\n<li><code>proc[4]</code> cannot <code>wait(2)</code>;</li>\n<li><code>proc[5]</code> cannot <code>wait(2)</code>;</li>\n<li><code>proc[6]</code> can <code>wait(2)</code> only to <code>proc[7]</code> and</li>\n<li><code>proc[7]</code> cannot <code>wait(2)</code>.</li>\n</ul>\n\n<p>As <code>wait(2)</code> can only wait for one of such children (children must be created with fork, or the call will result in error) you have to issue as many <code>wait(2)</code> calls as <em><code>fork(2)</code>s you have issued</em>, to wait for them all, so you must control the number of children you have (as you see, this number is different for each process).  You can, for example, increment a counter <em>in the parent</em> (the process that receives a <code>0</code> result from <code>fork(2)</code> so you know the number of <code>fork(2)</code>s you have issued up to now.</p>\n\n<pre><code>int main()\n{\n    int forks_made = 0;\n    if (fork() &gt; 0) forks_made++;\n    if (fork() &gt; 0) forks_made++;\n    if (fork() &gt; 0) forks_made++;\n    for (i = 0; i &lt; forks_made; i++) wait(NULL);\n    exit(0);\n}\n</code></pre>\n\n<p>or simply, you can <code>wait(2)</code> until the system call results in an error (you don't have more children)</p>\n\n<pre><code>int main()\n{\n    fork();\n    fork();\n    fork();\n    while(wait(NULL) == 0) \n        continue;\n    exit(0);\n}\n</code></pre>\n\n<p>Be careful as the process hierarchy is a different tree from the binary <strong>history</strong> tree.  The process hierarchy is like this:</p>\n\n<pre><code>proc[0]\n|\n+--proc[1]\n|  |\n|  +--proc[5]\n|  |\n|  `--proc[6]\n|     |\n|     `--proc[7]\n|\n+--proc[2]\n|  |\n|  `--proc[4]\n|\n`--proc[3]\n</code></pre>\n\n<p>Suppose I write the following code:</p>\n\n<pre><code>int main()\n{\n    fork(); fork(); fork();\n    wait(0); wait(0); wait(0);\n    exit(0);\n}\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>                                ok             ok         ok\np[0]-f()-f()-f()----------------w()------------w()--------w()-exit();\n     |   |   |                  ^              ^          ^\n     |   |   |      err err err |              |          |\n     |   |   +-p[3]-w()-w()-w()-exit();        |          |\n     |   |                                     |          |\n     |   |                         ok  err err |          |\n     |   +-p[2]-f()----------------w()-w()-w()-exit();    |\n     |          |                  ^                      |\n     |          |                  |                      |\n     |          |      err err err |                      |\n     |          +-p[4]-w()-w()-w()-exit();                |\n     |                             ok             ok  err |\n     +-p[1]-f()-f()----------------w()------------w()-w()-exit();\n            |   |                  ^              ^\n            |   |      err err err |              |\n            |   +-p[5]-w()-w()-w()-exit();        |\n            |                         ok  err err |\n            +-p[6]-f()----------------w()-w()-w()-exit();\n                   |                  ^\n                   |      err err err |\n                   +-p[7]-w()-w()-w()-exit();\n</code></pre>\n\n<h1>NOTE</h1>\n\n<p>Even if the children die <em>before</em> the parent does a <code>wait(2)</code> the kernel maintains them in the process table (but without any resource allocated) as <em>zombie processes</em> just to wait for the parent to do the proper <code>wait(2)</code> system call.  This is why the kernel knows that you can do a <code>wait(2)</code> or not (you can only wait if you have made a <code>fork(2)</code>).</p>\n\n<h1>NOTE 2</h1>\n\n<p>Why the process only <code>read(2)</code>s part of the results and finishes? Well, I have been reading some documentation and making some tests, and the behaviours are different on the three operating systems I have tested on:</p>\n\n<ul>\n<li>MacOS X.  I have tested and when the process group leader <code>exit(2)</code>s, all of its children are awaken from the <code>read(2)</code> call and given a <code>ETIMEDOUT</code> error (surprisingly)</li>\n<li>FreeBSD. On FreeBSD, the result is similar but with a different error (<code>EIO</code>).</li>\n<li>Linux. On Linux, the terminal driver gives each process only one input character (even if there are more) in raw mode (they output each caracter as it is read) This is by far the most weird behaviour.</li>\n</ul>\n\n<p>As normal job control makes the shell to reacquire the control terminal and the process group ceases to be the control group of the terminal device, the terminal should awake all the processes trying to <code>read(2)</code> from it with an error code, so perhaps FreeBSD is the most coherent result we should have.</p>\n\n<p>The code used to test this case follows:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\nvoid hndlr(int sig)\n{\n    printf(\"%d(prnt=%d,pgrp=%d): signal %d received\\n\",\n            getpid(), getppid(), getpgrp(), sig);\n}\n\nint main()\n{\n    int i;\n    char line[1024];\n\n    for (i = 1; i &lt; 64; i++)\n        signal(i, hndlr);\n    printf(\"pid=%d, pgrp=%d\\n\", getpid(), getpgrp());\n    fork();\n    fork();\n    fork();\n    i = read(0, line, sizeof line);\n    switch(i) {\n    case -1:\n        printf(\"pid=%d, prnt=%d, pgrp=%d: read: %s(errno=%d)\\n\",\n                getpid(), getppid(), getpgrp(), strerror(errno), errno);\n        break;\n    case 0:\n        printf(\"pid=%d, prnt=%d, pgrp=%d: read: EOF\\n\",\n                getpid(), getppid(), getpgrp());\n        break;\n    default:\n        printf(\"pid=%d, prnt=%d, pgrp=%d: read: [%*.*s]\\n\",\n                getpid(), getppid(), getpgrp(), i, i, line);\n        break;\n    }\n#if 0\n    wait(NULL);\n    wait(NULL);\n    wait(NULL);\n#endif\n} /* main */\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 4082270, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-_sGA3kB8P1M/AAAAAAAAAAI/AAAAAAAAAMU/blZifpxzlug/photo.jpg?sz=128", "display_name": "Vrajendra", "link": "https://stackoverflow.com/users/4082270/vrajendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 879, "favorite_count": 0, "accepted_answer_id": 38786600, "answer_count": 3, "score": 1, "last_activity_date": 1470606155, "creation_date": 1470241942, "last_edit_date": 1470242629, "question_id": 38749152, "link": "https://stackoverflow.com/questions/38749152/how-to-wait-for-each-process-to-terminate-in-the-following-example", "title": "How to wait for each process to terminate in the following example?", "body": "<p>The program terminates after taking 4 or 5 values from <code>scanf</code>.\nBut I want it to accept 8 values (totaling 8 processes) and then terminate.   </p>\n\n<pre><code>void main() {\n    fork();\n    fork();\n    fork();\n\n    scanf(\"%d\",&amp;j);\n    printf(\"The values are %d\\n\",j);\n\n    wait(0);\n}\n</code></pre>\n"}, {"tags": ["c", "parsing", "io"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1470241950, "post_id": 38749084, "comment_id": 64872034, "body": "Yes, what was told to you is correct, including <code>strtok()</code> (with mutable input, needless to mention), but do you have a specific problem at hand?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470242158, "post_id": 38749084, "comment_id": 64872155, "body": "strtok() is a terrible function, it doesn&#39;t allow &quot;empty&quot; segments to be isolated from the string; it would fail for instance on <code>&#47;apple&#47;fn&#47;&#47;ln&#47;sawyer&#47;a&#47;25&#47;id&#47;1234</code> (first name is empty here)"}, {"owner": {"reputation": 421, "user_id": 3716331, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c69db7da785efef09eef6ad8b04a0e73?s=128&d=identicon&r=PG&f=1", "display_name": "JJ Adams", "link": "https://stackoverflow.com/users/3716331/jj-adams"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1470242753, "post_id": 38749084, "comment_id": 64872504, "body": "@SouravGhosh I added more details in the question description."}, {"owner": {"reputation": 421, "user_id": 3716331, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c69db7da785efef09eef6ad8b04a0e73?s=128&d=identicon&r=PG&f=1", "display_name": "JJ Adams", "link": "https://stackoverflow.com/users/3716331/jj-adams"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470242780, "post_id": 38749084, "comment_id": 64872530, "body": "@wildplasser Lets assume that no field is allowed to be empty"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470244143, "post_id": 38749084, "comment_id": 64873393, "body": "The best way to parse the string is to manually loop through it, inspecting every character (compare it to {&#39; &#39;, &#39;/&#39;, &#39;\\n&#39;, &#39;\\0&#39;}, or use strcspn() ) and take appropiate action."}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1470244747, "post_id": 38749084, "comment_id": 64873727, "body": "an alternative would be to use YACC/Bison but that requires forming a grammar - unless this gets answered by the weekend i&#39;ll post alot of code that should help you get it done by the end of the weekend."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470264778, "post_id": 38749084, "comment_id": 64883563, "body": "@wildplasser that is what <code>strsep</code> is for. (it will allow empty fields) or just walk a pair of pointers down the string and manually separate the fields...."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1470273185, "post_id": 38749084, "comment_id": 64886619, "body": "JJ, in order to know which function to call, you need <i>criteria</i> to evaluate to make the choice. Take <code>&#47;apple&#47;fn&#47;tom&#47;ln&#47;sawyer&#47;a&#47;25&#47;id&#47;1234</code>. Other than <code>apple</code> and <code>id</code>, the remainder seem to be <code>key&#47;value</code> pairs (e.g. <code>fn&#47;tom</code>, <code>ln&#47;sawyer</code>, <code>a&#47;25</code>). Do you have a specification for what <code>&#47;the&#47;format&#47;is&#47;supposed&#47;to&#47;be</code>? I ask because if there is a defined format, then your choice can be a simple test of the <code>keys</code>. If you have an array of <i>company</i> <code>keys</code> and and array of <i>employee</i> <code>keys</code>, after parsing, you check which you have an know where to send the request. Are the keys known?"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1470271083, "post_id": 38749884, "comment_id": 64885180, "body": "As noted in the comments to the question, if there is the potential for an empty field (e.g. <code>&#47;Apple&#47;e&#47;id&#47;&#47;a&#47;10</code>), then <code>strsep</code> provides the ability to tokenize the string while preserving the empty field. (good answer)"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1470280843, "post_id": 38749884, "comment_id": 64888371, "body": "@DavidC.Rankin It&#39;s a school assignment according to the OP and I assumed the use of <code>strtok()</code> to be fixed. It is also not the first way I would have chosen, it i ssuch a simple grammar, a simple character-wise parse together with a bit of creative pointer juggling would have done it, but that&#39;s not something you can &quot;sell&quot; the teacher as your own idea. What I have thought about is to add a proper grammar but scrapped it because of the already overly long post."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1470282681, "post_id": 38749884, "comment_id": 64888768, "body": "As far as I can tell, there are no empty fields to deal with in this Q, but the <code>strsep</code> was for completeness in response to the complaint in the original comments. I thought your answer was good, I only mentioned it because I find a majority of those learning C haven&#39;t heard of it and don&#39;t know the distinction in use between <code>strtok</code> and <code>strsep</code> is the ability to handle empty fields."}], "tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": true, "score": 3, "last_activity_date": 1470264388, "last_edit_date": 1470264388, "creation_date": 1470244426, "answer_id": 38749884, "question_id": 38749084, "link": "https://stackoverflow.com/questions/38749084/input-parsing-in-c-deciding-where-to-forward/38749884#38749884", "title": "Input Parsing in C &amp; deciding where to forward", "body": "<p>Get yourself a large piece of paper and make a diagram about the logic to get a grammar (not actually neede here, you could just parse it, but being a school assignment I assume that it is meant to be build up upon).</p>\n\n<p>Some observations</p>\n\n<ul>\n<li>every input starts with a <code>/</code></li>\n<li>every entry ends with a <code>/</code> except the last one</li>\n<li>entries consist of characters and/or digits</li>\n<li>empty entries gets you in trouble if you insist on using <code>strtok</code> (thanks to wildplasser, I missed that)</li>\n<li>order matters?</li>\n</ul>\n\n<p>Entries are</p>\n\n<ul>\n<li>either key (one entry) or key/value (two consecutive entries).\nIn other words: the may or may not have an argument</li>\n</ul>\n\n<p>Entries with a meaning</p>\n\n<ul>\n<li>first entry is the company name (what do you do if that's all? Check assignment)</li>\n<li>next entry is either\n\n<ul>\n<li><code>i</code> print company info</li>\n<li><code>e</code></li>\n<li>without arguments: print #employees</li>\n<li>with argument: print information about argument, argument must be correct</li>\n<li><code>fn</code> first name as a key, must have a value because of <code>strtok</code>, argument must be  a string</li>\n<li><code>ln</code> last name as a key, must have a value because of <code>strtok</code>, argument must be  a string</li>\n<li><code>id</code> id as a key, must have a value because of <code>strtok</code>, argument must be a string of digits (an integer so to say but it is still a string at that point) only</li>\n<li><code>a</code> age as a key, must have a value because of <code>strtok</code>, argument must be a string of digits (an integer so to say but it is still a string at that point) only</li>\n</ul></li>\n</ul>\n\n<p>Examples:</p>\n\n<p><code>/apple/e</code> </p>\n\n<ol>\n<li><code>/</code> start of input</li>\n<li><code>apple</code> company name. Must have an argument, so go on</li>\n<li><code>e</code> something with employers, my or may not have an argument so check.</li>\n<li><code>EOI</code> (end of input) that means that <code>e</code> has no arguments, so print the number of employees.</li>\n</ol>\n\n<p><code>/apple/id/134</code></p>\n\n<ol>\n<li><code>/</code> start of input</li>\n<li><code>apple</code> company name. Must have an argument, so go on</li>\n<li><code>e</code> something with employers, my or may not have an argument so check.</li>\n<li><code>id</code> is a key and must have a value, that means we need an argument, so check</li>\n<li><code>1234</code> all digits which is correct value for <code>id</code></li>\n<li><code>EOI</code> (end of input) no other things, so print the information you have about id-1234</li>\n</ol>\n\n<p><code>/apple/fn/tom/ln/sawyer/a/25/id/1234</code></p>\n\n<ol>\n<li><code>/</code> start of input</li>\n<li><code>apple</code> company name. Must have an argument, so go on</li>\n<li><code>fn</code> is a key, must have a value, check</li>\n<li><code>tom</code> the value for <code>fn</code> must be a string which it is, safe</li>\n<li><code>ln</code> is a key, must have a value, check</li>\n<li><code>sawyer</code> the value for <code>ln</code> must be a string which it is, safe</li>\n<li><code>a</code> is a key, must have a value, check</li>\n<li><code>25</code> the value for <code>ln</code> must be a string of digits which it is, safe</li>\n<li><code>id</code> is a key, must have a value, check</li>\n<li><code>1234</code> the value for <code>ln</code> must be a string of digits which it is, safe</li>\n<li><code>EOI</code> (end of input). The key for the database entry seems to be the name <code>fn</code> and <code>ln</code>, so read the entry <code>tomsawyer</code> and check if any of <code>id</code> or <code>a</code> is different and change accordingly. If nothing is different: check your assignment.</li>\n</ol>\n\n<p>It might be good idea to build a struct with all of the informations and fill it while parsing (where I wrote \"safe\"). You need two main functions <code>printIt(keys)</code> and <code>changeIt(key, value)</code>. Some things can be done immediately, like in my first example, some need further ado.</p>\n\n<p>That's it, should be straightforward to implement.</p>\n\n<p><strong>EDIT</strong> a short example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n// ALL CHECKS OMMITTED!\n\n#define DELIMITER '/'\n\n// should resemble a row from the DB\ntypedef struct company {\n  char *comp_name;\n  unsigned int num_empl;\n  unsigned int empl_id;\n  unsigned int empl_age;\n  char *first_name;\n  char *last_name;\n} company;\n\nint main(int argc, char **argv)\n{\n  company *entries;\n  char *input, *token;\n  size_t ilen;\n\n  if (argc &lt; 2) {\n    fprintf(stderr, \"Usage: %s stringtoparse \\n\", argv[0]);\n    exit(EXIT_FAILURE);\n  }\n  // work on copy\n  ilen = strlen(argv[1]);\n  input = malloc(ilen + 1);\n  strcpy(input, argv[1]);\n\n  entries = malloc(sizeof(company));\n\n  // skip first delimiter\n  if (*input == DELIMITER) {\n    input++;\n    ilen--;\n  }\n\n  token = strtok(input, \"/\");\n  if (token == NULL) {\n    fprintf(stderr, \"Usage : %s stringtoparse \\n\", argv[0]);\n    exit(EXIT_FAILURE);\n  }\n  // first entry is the company name\n  entries-&gt;comp_name = malloc(strlen(token));\n  strcpy(entries-&gt;comp_name, token);\n\n  // mark empty entries as empty\n  entries-&gt;first_name = NULL;\n  entries-&gt;last_name = NULL;\n  entries-&gt;empl_age = -1;\n  entries-&gt;empl_id = -1;\n  // F(23)\n  entries-&gt;num_empl = 28657;\n\n  // only very small part of grammar implemented for simplicity\n  for (;;) {\n    token = strtok(NULL, \"/\");\n    if (token == NULL) {\n      break;\n    }\n    // \"e\"  [ \"/\" \"id\" \"/\" number &lt;&lt;EOF&gt;&gt; ]\n    if (strcmp(token, \"e\") == 0) {\n      token = strtok(NULL, \"/\");\n      if (token == NULL) {\n    puts(\"Info about number of employees wanted\\n\");\n    // pure info, pull from DB (not impl.) and stop\n    break;\n      } else {\n    if (strcmp(token, \"id\") != 0) {\n      fprintf(stderr, \"Only \\\"id\\\" allowed after \\\"e\\\" \\n\");\n      // free all heap memory here\n      exit(EXIT_FAILURE);\n    }\n    token = strtok(NULL, \"/\");\n    if (token == NULL) {\n      fprintf(stderr, \"ERROR: \\\"id\\\" needs a number \\n\");\n      // free all heap memory here\n      exit(EXIT_FAILURE);\n    }\n    // does not check if it really is a number, use strtol() in prod.\n    entries-&gt;empl_id = atoi(token);\n    printf(\"Info about employee with id %d wanted\\n\", entries-&gt;empl_id);\n    // pure info, pull from DB (not impl.) and stop\n    break;\n      }\n    }\n    // \"a\" \"/\" number\n    else if (strcmp(token, \"a\") == 0) {\n      token = strtok(NULL, \"/\");\n      if (token == NULL) {\n    fprintf(stderr, \"ERROR: \\\"a\\\" needs a number \\n\");\n    // free all heap memory here\n    exit(EXIT_FAILURE);\n      }\n      // does not check if it actually is a number, use strtol() in prod.\n      entries-&gt;empl_age = atoi(token);\n      printf(\"Age given: %d\\n\", entries-&gt;empl_age);\n    }\n    // \"id\" \"/\" number\n    else if (strcmp(token, \"id\") == 0) {\n      token = strtok(NULL, \"/\");\n      if (token == NULL) {\n    fprintf(stderr, \"ERROR: \\\"id\\\" needs a number \\n\");\n    // free all heap memory here\n    exit(EXIT_FAILURE);\n      }\n      // does not check if it actually is a number, use strtol() in prod.\n      entries-&gt;empl_id = atoi(token);\n      printf(\"ID given: %d\\n\", entries-&gt;empl_id);\n    }\n    // \"fn\" \"/\" string\n    else if (strcmp(token, \"fn\") == 0) {\n      token = strtok(NULL, \"/\");\n      if (token == NULL) {\n    fprintf(stderr, \"ERROR: \\\"fn\\\" needs a string \\n\");\n    // free all heap memory here\n    exit(EXIT_FAILURE);\n      }\n      entries-&gt;first_name = malloc(strlen(token));\n      strcpy(entries-&gt;first_name, token);\n      printf(\"first name given: %s\\n\", entries-&gt;first_name);\n    }\n    // \"ln\" \"/\" string\n    else if (strcmp(token, \"ln\") == 0) {\n      token = strtok(NULL, \"/\");\n      if (token == NULL) {\n    fprintf(stderr, \"ERROR: \\\"ln\\\" needs a string \\n\");\n    // free all heap memory here\n    exit(EXIT_FAILURE);\n      }\n      entries-&gt;last_name = malloc(strlen(token));\n      strcpy(entries-&gt;last_name, token);\n      printf(\"last name given: %s\\n\", entries-&gt;last_name);\n    } else {\n      fprintf(stderr, \"ERROR: Unknown token \\\"%s\\\" \\n\", token);\n      // free all heap memory here\n      exit(EXIT_FAILURE);\n    }\n  }\n  printf(\"\\n\\nEntries:\\nCompany name: %s\\nFirst name: %s\\nLast name: %s\\n\",\n     entries-&gt;comp_name, entries-&gt;first_name, entries-&gt;last_name);\n  printf(\"Age: %d\\nID: %d\\nNumber of employees: %d\\n\",\n     entries-&gt;empl_age, entries-&gt;empl_id, entries-&gt;num_empl);\n  /*\n   * At this state you have information about what is given (in \"entries\")\n   * and what is wanted.\n   * \n   * Connect to the DB.\n   * \n   * If firstnamelastname is the DB-id and in the DB, you can check if\n   * the given ID is the same as the one in the DB and change if not.\n   * \n   * You can do the same for age.\n   * \n   * If firstnamelastname is not in the DB but ID is given check if the\n   * ID is in the DB, change firstname and/or lastname if necessary and\n   * congratulate on the wedding (many other reasons are possible, please\n   * check first or it might get really embarassing)\n   */\n\n  // free all heap memory here\n\n  /* Disconnect from the DB */\n  exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>Compiled with:</p>\n\n<pre><code>gcc -g3 -std=c11 -W -Wall -pedantic jjadams.c -o jjadams\n</code></pre>\n\n<p>try with</p>\n\n<pre><code>./jjadams \"/Apple/fn/Tom/ln/Sawyer/a/10/id/3628800\"\n\n./jjadams \"/Apple/e\"\n\n./jjadams \"/Apple/e/id/1234\"\n\n./jjadams \"/Apple/e/1234\"\n</code></pre>\n"}], "owner": {"reputation": 421, "user_id": 3716331, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c69db7da785efef09eef6ad8b04a0e73?s=128&d=identicon&r=PG&f=1", "display_name": "JJ Adams", "link": "https://stackoverflow.com/users/3716331/jj-adams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 38749884, "answer_count": 1, "score": 0, "last_activity_date": 1470264388, "creation_date": 1470241787, "last_edit_date": 1470242699, "question_id": 38749084, "link": "https://stackoverflow.com/questions/38749084/input-parsing-in-c-deciding-where-to-forward", "title": "Input Parsing in C &amp; deciding where to forward", "body": "<p>So I have the following project i need to work on for school. It involves a server/client communicating where the client sends requests to the server to get certain information. The server gets the req, parses it, and then sends a response based on the type of the request. For example:</p>\n\n<pre><code>GET /apple/fn/tom/ln/sawyer/a/25/id/1234 : This is a request to get the info for the following person who works at the Apple company (/apple):\nfn (first name): Tom\nln (last name): Sawyer\na (age): 25\nid (ID): 1234\n</code></pre>\n\n<p>Now the server should accept input, parse it, and return the information requested from its own database. implementing the server/client is not an issue. I need to know the best way to implement the algorithm to deal with input since not all requests would look like the one above. Other examples of requests:</p>\n\n<pre><code>GET /apple/i: This should return info about Apple company (i.e. address, phone number)\nGET /apple/e: return number of employees in Apple company\nGET /apple/e/id/1234: return info of employee in Apple company with the following id=1234 (which in our example would be Tom Sawyer) i.e. return first name, last name, age, address.\nGET /apple/fn/tom/ln/sawyer/a/25/id/1234 : discussed above\nSET /apple/fn/tom/ln/sawyer/a/25/id/5678 : update id of this employee to 5678\nSET /apple/fn/tom/ln/sawyer/a/23 : update age of this employee to 23\n</code></pre>\n\n<p>...</p>\n\n<p>I will have to implement different structs for req/response (i.e. a struct for req and another for response) as well as a different function for each of the different request/responses. BUT what is the best way to deal with parsing input &amp;&amp; decide which function to send it to? I was told to look into using a parser-generator like Bison but to my understanding this would only help parse the input and break it up into pieces which is not that hard for me since I know I always have the \"/\" between fields so I can use the function: </p>\n\n<pre><code>strtok( input, \"/\" );\n</code></pre>\n\n<p>So main issue I have is how to decide where to send each request. So Assuming I have the following functions:</p>\n\n<pre><code>struct GetEmployeeInfoReq\n{\n   char *fn;\n   char *ln;\n   int age;\n};\nstruct GetEmployeeInfoResp\n{\n   int house_num;\n   int street_num;\n   char *street_name;\n   char * postal_code;\n   int years_worked_here;\n};\nvoid GetEmployeeInfo( struct GetEmployeeInfoResp *resp, struct GetEmployeeInfoReq *req );\n\nstruct GetCompanyInfoReq\n{\n  ...\n}\nstruct GetCompanyInfoResp\n{\n  ...\n}\nvoid GetCompanyInfo( struct GetCompanyInfoResp *resp, struct GetCompanyInfoReq *req );\n</code></pre>\n\n<p>Now I know that to call the first function I need the following request:</p>\n\n<pre><code>GET /apple/fn/tom/ln/sawyer/a/25/id/1234\n</code></pre>\n\n<p>and to call 2nd function I need the following:</p>\n\n<pre><code>GET /apple/i\n</code></pre>\n\n<p>My question is how to get this done? Off the top of my mind I'm thinking defining a variable for each possible field in the input req and using that so if this is my request:</p>\n\n<pre><code>GET /apple/e/id/1234\n</code></pre>\n\n<p>then I would have the following values defined and set to true:</p>\n\n<pre><code>bool is_apple = true;\nbool is_employee = true;\nbool is_id = true;\n</code></pre>\n\n<p>After I know that this request is: </p>\n\n<pre><code>GET /apple/e/id/&lt;id_num&gt; \n</code></pre>\n\n<p>AND NOT </p>\n\n<pre><code>GET /apple/e \n</code></pre>\n\n<p>so i can send it to the proper function.\nIs this the correct approach as I'm lost on how to tackle this issue.</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["c", "linux", "linked-list", "linux-kernel", "lockless"], "comments": [{"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 2, "creation_date": 1470240673, "post_id": 38748693, "comment_id": 64871223, "body": "Imagine, the list is empty, e.g. there is no single <code>node</code> in it..."}, {"owner": {"reputation": 3212, "user_id": 2233706, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/224116af88436575b20ba30f2fd9d995?s=128&d=identicon&r=PG", "display_name": "user2233706", "link": "https://stackoverflow.com/users/2233706/user2233706"}, "reply_to_user": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1470241576, "post_id": 38748693, "comment_id": 64871823, "body": "The kernel&#39;s doubly linked list implementation (non lock-less) handles empty lists without having two structs."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1470383968, "post_id": 38748693, "comment_id": 64938693, "body": "Look that field names are named differently.  Think that you want to call the first element <code>first</code>, and not <code>next</code>.  This prevents some errors sourced from <b>copy&amp;paste</b> programming, as the identifiers are not valid in the <i>other</i> context."}], "answers": [{"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1470384144, "post_id": 38750833, "comment_id": 64938794, "body": "You can use <code>union {struct head a; struct node b;}</code> and make your pointer a pointer to the <code>union</code> instead.... <i>necessity</i> can be ok for a first prototype, but in quality code you <b>must type differently things that are different</b>."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1471020672, "post_id": 38750833, "comment_id": 65202655, "body": "@LuisColorado, but you have to take care about union aliasing (should not to happen in your code)."}], "tags": [], "owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "is_accepted": true, "score": 0, "last_activity_date": 1470247847, "creation_date": 1470247847, "answer_id": 38750833, "question_id": 38748693, "link": "https://stackoverflow.com/questions/38748693/why-does-linux-kernel-lock-less-list-have-head-and-node-structs/38750833#38750833", "title": "Why does Linux kernel lock-less list have head and node structs?", "body": "<blockquote>\n  <p>Why do they have two structs, to define a list?</p>\n</blockquote>\n\n<p>Because it is <strong>possible</strong> to use <em>different</em> struct (types) for <em>different</em> things (head and node correspondingly). Linux kernel tends to follow same convensions as for usual programming.</p>\n\n<p>In case of double linked lists, both head and node are <strong>forced to have the same type</strong>: by design, both <code>next</code> and <code>prev</code> fields of <code>struct list_head</code> may point either to node or to the head. Single type for them is not an advantage, but <em>necessity</em>.</p>\n"}], "owner": {"reputation": 3212, "user_id": 2233706, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/224116af88436575b20ba30f2fd9d995?s=128&d=identicon&r=PG", "display_name": "user2233706", "link": "https://stackoverflow.com/users/2233706/user2233706"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 1, "accepted_answer_id": 38750833, "answer_count": 1, "score": 0, "last_activity_date": 1470247847, "creation_date": 1470240553, "last_edit_date": 1470240724, "question_id": 38748693, "link": "https://stackoverflow.com/questions/38748693/why-does-linux-kernel-lock-less-list-have-head-and-node-structs", "title": "Why does Linux kernel lock-less list have head and node structs?", "body": "<p>I'm trying to understand the lock-less list in the Linux kernel.  This is defined in llist.h.  Why do they have two structs, to define a list:</p>\n\n<pre><code>struct llist_head {\n    struct llist_node *first;\n};\n\nstruct llist_node {\n    struct llist_node *next;\n};\n</code></pre>\n\n<p>Why not have just one struct that has a pointer to the next node?  It would similar to the doubly linked list implementation in the kernel.</p>\n"}, {"tags": ["c", "macos", "gcc"], "comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1470240207, "post_id": 38748497, "comment_id": 64870909, "body": "It&#39;s hard to tell, since most of the code is missing... but this could be happening because <code>GLVID_SetPalette()</code> was not declared before it was called.  Depending on how you&#39;re compiling, this can cause a declaration to be automatically generated which will return <code>int</code>, which conflicts with the <code>void</code> return type of the actual function.  Solution: declare functions before you use them."}, {"owner": {"reputation": 4113, "user_id": 4699494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442751ccd19b23782d3a4def58265f88?s=128&d=identicon&r=PG&f=1", "display_name": "baf", "link": "https://stackoverflow.com/users/4699494/baf"}, "edited": false, "score": 0, "creation_date": 1470249881, "post_id": 38748497, "comment_id": 64876600, "body": "Looking at <a href=\"https://github.com/ProfessorKaos64/fte-quake/blob/048c96725978fdbc5cbc3b51cfc973ca222450b5/engine/gl/gl_vidmacos.c\" rel=\"nofollow noreferrer\"><code>gl_vidmacos.c</code></a>, adding following declaration at the top of the file could help: <code>void GLVID_SetPalette (unsigned char *palette);</code>"}, {"owner": {"reputation": 1, "user_id": 6666584, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wuK4xnpyUU0/AAAAAAAAAAI/AAAAAAAAADg/ev9WAQIVb04/photo.jpg?sz=128", "display_name": "Coffee Gator", "link": "https://stackoverflow.com/users/6666584/coffee-gator"}, "edited": false, "score": 0, "creation_date": 1470322815, "post_id": 38748497, "comment_id": 64913194, "body": "That seems to do the trick, thanks. I seem to be getting an unrelated error, though."}], "owner": {"reputation": 1, "user_id": 6666584, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wuK4xnpyUU0/AAAAAAAAAAI/AAAAAAAAADg/ev9WAQIVb04/photo.jpg?sz=128", "display_name": "Coffee Gator", "link": "https://stackoverflow.com/users/6666584/coffee-gator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470239958, "creation_date": 1470239958, "question_id": 38748497, "link": "https://stackoverflow.com/questions/38748497/error-conflicting-types-for-glvid-setpalette-void-glvid-setpalette-unsigned", "title": "error: conflicting types for &#39;GLVID_SetPalette&#39; void GLVID_SetPalette (unsigned char *palette)", "body": "<p>I basically know next to nothing about programming but have tried to learn a few things since I'm interested in source codes for various games, so here's some source code I grabbed online and tried to compile for Mac OS X, but I get this error:</p>\n\n<pre><code>/Users/coffeegator/fteqw-code/engine/gl/gl_vidmacos.c:116:6: error: conflicting\n  types for 'GLVID_SetPalette'\n</code></pre>\n\n<p>void GLVID_SetPalette (unsigned char *palette)</p>\n\n<p>So I looked at the section referred to in gl_vidmacos.c and found this:</p>\n\n<pre><code>GLVID_SetPalette(palette);\n\nreturn true;\n}\n\nvoid GLVID_DeInit(void)\n{\nkillCocoa();\n}\n\nvoid GLVID_SetPalette (unsigned char *palette)\n{\nqbyte *pal;\nunsigned int r,g,b;\nint i;\nunsigned *table1;\nextern qbyte gammatable[256];\n</code></pre>\n\n<p>(Sorry if it's not copy pasted well, I'm new to this)</p>\n\n<p>I know it has something to do with declarations and definitions but I can't figure out what I'm supposed to change in this code to make the compilation work. If anyone can help me out I'd appreciate it.</p>\n\n<p>Once again, I'm new to this so sorry if I've asked this question poorly or left out any important bits of code, but I've done the best I can. Thanks in advance.</p>\n"}, {"tags": ["c", "arrays", "string", "pointers", "reverse"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1470238966, "post_id": 38748132, "comment_id": 64870037, "body": "Yes you reverse character of each word instead of each complete word. That is the problem."}, {"owner": {"reputation": 1248, "user_id": 1791872, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6nnz7.png?s=128&g=1", "display_name": "flau", "link": "https://stackoverflow.com/users/1791872/flau"}, "edited": false, "score": 0, "creation_date": 1470238983, "post_id": 38748132, "comment_id": 64870050, "body": "Split the string by spaces and store each word in a string, then reverse the order of the strings."}, {"owner": {"reputation": 1162, "user_id": 6303733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21f29e7fbda20991b14c29e60e25fd73?s=128&d=identicon&r=PG&f=1", "display_name": "gcampbell", "link": "https://stackoverflow.com/users/6303733/gcampbell"}, "edited": false, "score": 0, "creation_date": 1470239007, "post_id": 38748132, "comment_id": 64870067, "body": "I&#39;m not familiar with C but I don&#39;t see any code for splitting it into words."}, {"owner": {"reputation": 598, "user_id": 6671710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-3K1rEAN3900/AAAAAAAAAAI/AAAAAAAAAEw/gB8Vb6lAVsU/photo.jpg?sz=128", "display_name": "Sriram Jayaraman", "link": "https://stackoverflow.com/users/6671710/sriram-jayaraman"}, "edited": false, "score": 0, "creation_date": 1470239031, "post_id": 38748132, "comment_id": 64870085, "body": "but i cant seem to work them as a single word each"}, {"owner": {"reputation": 684, "user_id": 4970667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FWd3x.jpg?s=128&g=1", "display_name": "Quentin", "link": "https://stackoverflow.com/users/4970667/quentin"}, "edited": false, "score": 1, "creation_date": 1470239103, "post_id": 38748132, "comment_id": 64870143, "body": "<a href=\"http://man7.org/linux/man-pages/man3/strtok.3.html\" rel=\"nofollow noreferrer\">strtok()</a> could be a starting point"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 2, "creation_date": 1470239226, "post_id": 38748132, "comment_id": 64870227, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/9630673/how-to-perform-reversing-a-sentence-word-by-word-in-c\">how to perform reversing a sentence Word by Word in C?</a> or <a href=\"http://stackoverflow.com/questions/3276582/reversing-words-in-a-sentence\">reversing words in a sentence</a>"}, {"owner": {"reputation": 266, "user_id": 2350670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/c7zkm.jpg?s=128&g=1", "display_name": "Awais Chishti", "link": "https://stackoverflow.com/users/2350670/awais-chishti"}, "edited": false, "score": 0, "creation_date": 1470239267, "post_id": 38748132, "comment_id": 64870265, "body": "Handle the reversing in a different function. Call that function on the whole string, and then call it on each word."}, {"owner": {"reputation": 598, "user_id": 6671710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-3K1rEAN3900/AAAAAAAAAAI/AAAAAAAAAEw/gB8Vb6lAVsU/photo.jpg?sz=128", "display_name": "Sriram Jayaraman", "link": "https://stackoverflow.com/users/6671710/sriram-jayaraman"}, "edited": false, "score": 0, "creation_date": 1470239548, "post_id": 38748132, "comment_id": 64870474, "body": "i just tried strtok it seems cool!! but just that i am able to separate the words but end up not being able to store them in another string"}, {"owner": {"reputation": 598, "user_id": 6671710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-3K1rEAN3900/AAAAAAAAAAI/AAAAAAAAAEw/gB8Vb6lAVsU/photo.jpg?sz=128", "display_name": "Sriram Jayaraman", "link": "https://stackoverflow.com/users/6671710/sriram-jayaraman"}, "edited": false, "score": 0, "creation_date": 1470242768, "post_id": 38748132, "comment_id": 64872519, "body": "I wanted to use the concept of pointers"}], "answers": [{"tags": [], "owner": {"reputation": 6519, "user_id": 2069380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac5cb90925b4059b6b2c0885c9ffaf?s=128&d=identicon&r=PG", "display_name": "Ohad Eytan", "link": "https://stackoverflow.com/users/2069380/ohad-eytan"}, "is_accepted": false, "score": 0, "last_activity_date": 1470239757, "last_edit_date": 1470239757, "creation_date": 1470239124, "answer_id": 38748207, "question_id": 38748132, "link": "https://stackoverflow.com/questions/38748132/reversing-only-the-order-of-a-sentence-in-c/38748207#38748207", "title": "Reversing only the order of a Sentence in C", "body": "<p>Print string when you just after a <code>spacebar</code> or at the beginning:</p>\n\n<pre><code>for(i=len-1;i&gt;=0;i--)\n  if (i==0) || (*(ptr+i-1)==' ') { \n    printf(\"%s \",*(ptr+i));\n    if (i!=0)\n      *(ptr+i-1)='\\0'; // Cutting the next print. Attention: that changes the original string.\n  }\nreturn 0;\n</code></pre>\n"}], "owner": {"reputation": 598, "user_id": 6671710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-3K1rEAN3900/AAAAAAAAAAI/AAAAAAAAAEw/gB8Vb6lAVsU/photo.jpg?sz=128", "display_name": "Sriram Jayaraman", "link": "https://stackoverflow.com/users/6671710/sriram-jayaraman"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 775, "favorite_count": 0, "closed_date": 1470240699, "answer_count": 1, "score": -2, "last_activity_date": 1470316123, "creation_date": 1470238880, "last_edit_date": 1470316123, "question_id": 38748132, "link": "https://stackoverflow.com/questions/38748132/reversing-only-the-order-of-a-sentence-in-c", "closed_reason": "Duplicate", "title": "Reversing only the order of a Sentence in C", "body": "<p>I have been trying to reverse the order of a sentence containing a string using pointers. My code snippet:  </p>\n\n<pre><code>int main()\n{\nchar c[50];\nchar *ptr;\nint i=0,len;\ngets(c);\nptr=c;\nlen=strlen(c);\nfor(i=len-1;i&gt;=0;i--)\n  printf(\"%c\",*(ptr+i));\nreturn 0;\n}\n</code></pre>\n\n<p>This code generates a reverse of the string I enter correctly. Like for example:\n<br><strong>Input: how are you\n<br>output: uoy era woh</strong></p>\n\n<p>But what I kept in mind was entirely different, I just wanted the order of the words in the sentence to reverse and not the exact words to reverse.\nFor example, for the same input \"<strong>how are you</strong>\" I want the output to be \"<strong>you are how</strong>\". Ive been breaking my head for quite some time now. Is there something that Im missing???</p>\n\n<p>Re-EDIT: I want to do the reverse concept using pointers and pointers only!!! thats why i posted as a new question!!!</p>\n\n<p>As suggested by another user, I tried using the strtok() function too and my output works kinda fine but is throwing garbage values.... Kindly help to this context::</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\nchar c[50],d[50];\nchar *ptr,*aptr,*tok;\nint i=0,j=0,len;\ngets(c);\nptr=c;\naptr=d;\nlen=strlen(c);\nprintf(\"%d\\n\",len);\nfor(i=len-1;i&gt;=0;i--,j++)\n  *(aptr+j)=(*(ptr+i));\nfor(i=0;i&lt;len;i++)\n printf(\"%c\",d[i]);\nprintf(\"\\n\");\ntok=strtok(aptr,\" \");\nwhile(tok!=NULL)\n{\n printf(\"%s\\n\",strrev(tok));\n tok=strtok(NULL,aptr);\n}\nreturn 0;\n}\n</code></pre>\n\n<p>and i Finally landed at the most optimized answer!!!!</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nint main()\n{\nchar s[20][20];\nint i=0,length=-1;\nfor(i=0;;i++)\n{\n    scanf(\"%s\",s[i]);\n    length++;\n    if(getchar()=='\\n')\n        break;\n}\nfor(i=length;i&gt;=0;i--)\n    printf(\"%s \",s[i]);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "fmod"], "comments": [{"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 2, "creation_date": 1470238763, "post_id": 38747884, "comment_id": 64869901, "body": "The formula assumes that x and y are floating point, not integers."}, {"owner": {"reputation": 335, "user_id": 6655478, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f7c43b370a10d0a29751b9e6df379334?s=128&d=identicon&r=PG&f=1", "display_name": "rondino", "link": "https://stackoverflow.com/users/6655478/rondino"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1470238839, "post_id": 38747884, "comment_id": 64869952, "body": "@RaymondChen -_- if they were integers I will get the correct answer ! No comment !"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1470239187, "post_id": 38747884, "comment_id": 64870198, "body": "IEEE uses banker&#39;s rounding.  They think round(2.5) should be 2 and not 3."}, {"owner": {"reputation": 335, "user_id": 6655478, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f7c43b370a10d0a29751b9e6df379334?s=128&d=identicon&r=PG&f=1", "display_name": "rondino", "link": "https://stackoverflow.com/users/6655478/rondino"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1470239553, "post_id": 38747884, "comment_id": 64870478, "body": "@HansPassant is <code>nearbyint()</code> function using banker&#39;s rounding ?"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1470240027, "post_id": 38747884, "comment_id": 64870783, "body": "It uses the rounding mode set by std::fesetround().  No bankers in the C++ standardization committee."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1470382149, "post_id": 38747884, "comment_id": 64937714, "body": "Sorry, what&#39;s the meaning of <code>round()</code> in the wikipedia context? can you edit your question and add a definition of <code>round()</code> function?"}, {"owner": {"reputation": 335, "user_id": 6655478, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f7c43b370a10d0a29751b9e6df379334?s=128&d=identicon&r=PG&f=1", "display_name": "rondino", "link": "https://stackoverflow.com/users/6655478/rondino"}, "edited": false, "score": 0, "creation_date": 1470584075, "post_id": 38747884, "comment_id": 64998636, "body": "check the hans Passant comment which is above. It is banker&#39;s rounding"}], "answers": [{"comments": [{"owner": {"reputation": 335, "user_id": 6655478, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f7c43b370a10d0a29751b9e6df379334?s=128&d=identicon&r=PG&f=1", "display_name": "rondino", "link": "https://stackoverflow.com/users/6655478/rondino"}, "edited": false, "score": 0, "creation_date": 1470239173, "post_id": 38748200, "comment_id": 64870188, "body": "so I should use <code>nearbyint()</code> function instead ?"}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1470239195, "post_id": 38748200, "comment_id": 64870206, "body": "Good answer (+1). Might want to add in a link/reference to <a href=\"http://c2.com/cgi/wiki?BankersRounding\" rel=\"nofollow noreferrer\">banker&#39;s rounding</a> so OP can learn more about different rounding algorithms and their error bounds. :)"}, {"owner": {"reputation": 335, "user_id": 6655478, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f7c43b370a10d0a29751b9e6df379334?s=128&d=identicon&r=PG&f=1", "display_name": "rondino", "link": "https://stackoverflow.com/users/6655478/rondino"}, "edited": false, "score": 0, "creation_date": 1470240056, "post_id": 38748200, "comment_id": 64870804, "body": "I will check your answer if you provide a link for that !"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 335, "user_id": 6655478, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f7c43b370a10d0a29751b9e6df379334?s=128&d=identicon&r=PG&f=1", "display_name": "rondino", "link": "https://stackoverflow.com/users/6655478/rondino"}, "edited": false, "score": 0, "creation_date": 1470240414, "post_id": 38748200, "comment_id": 64871040, "body": "@rondino Added the link.  Also changed quoted test as the wording differs from my local man page (the meaning is the same, though)."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 2, "last_activity_date": 1470240259, "last_edit_date": 1470240259, "creation_date": 1470239085, "answer_id": 38748200, "question_id": 38747884, "link": "https://stackoverflow.com/questions/38747884/is-remainderx-y-really-x-roundx-yy/38748200#38748200", "title": "is remainder(x,y) really x-((round(x/y)*y)?", "body": "<p>There is a slight difference in what <code>remainder</code> does.  From the <a href=\"http://linux.die.net/man/3/remainder\" rel=\"nofollow\">man page</a>:</p>\n\n<blockquote>\n  <p>The remainder() function computes the remainder of dividing x by y.\n  The return value is x-n*y, where n is the value x / y, rounded to the\n  nearest integer. <strong>If the absolute value of x-n*y is 0.5, n is chosen to\n  be even.</strong></p>\n</blockquote>\n\n<p>So in the halfway case the rounding part performed by <code>remainder</code> does not round away from zero, but instead rounds to the <em>nearest even number</em>.</p>\n"}], "owner": {"reputation": 335, "user_id": 6655478, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f7c43b370a10d0a29751b9e6df379334?s=128&d=identicon&r=PG&f=1", "display_name": "rondino", "link": "https://stackoverflow.com/users/6655478/rondino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 38748200, "answer_count": 1, "score": 3, "last_activity_date": 1470240259, "creation_date": 1470238209, "last_edit_date": 1495540293, "question_id": 38747884, "link": "https://stackoverflow.com/questions/38747884/is-remainderx-y-really-x-roundx-yy", "title": "is remainder(x,y) really x-((round(x/y)*y)?", "body": "<p>Reading the answer of <a href=\"https://stackoverflow.com/users/3959454/anton-savin\">@anton</a> in this <a href=\"https://stackoverflow.com/questions/26519082/why-am-i-getting-a-different-result-from-stdfmod-and-stdremainder\">link</a> I tried to see if really <code>remainder(x, y)</code> is exactly <code>x-(round(x/y)*y)</code>.</p>\n\n<p>Running the code for the value of <code>x=5.</code> and <code>y=2.</code>. I got: </p>\n\n<pre><code>printf(\"the value of remainder is %f\\n\",remainder(x, y));\nprintf(\"the value of remainder is %f\\n\",x-(round(x/y)*y));\n</code></pre>\n\n<blockquote>\n  <p>the value of remainder is 1.000000</p>\n  \n  <p>the value of remainder is -1.000000</p>\n</blockquote>\n\n<p>From <a href=\"https://en.wikipedia.org/wiki/IEEE_754-1985\" rel=\"nofollow noreferrer\">wikipedia</a> :</p>\n\n<blockquote>\n  <p>Floating point <strong>remainder</strong>. This is not like a normal modulo operation,\n  it can be negative for two positive numbers. It <strong>returns the exact</strong>\n  <strong>value of x\u2013(round(x/y)\u00b7y)</strong>.</p>\n</blockquote>\n\n<p>Is the explanation of Anton wrong, or am I missing something ?</p>\n"}, {"tags": ["c", "pointers", "initialization", "undefined-behavior"], "comments": [{"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "edited": false, "score": 4, "creation_date": 1470238013, "post_id": 38747751, "comment_id": 64869373, "body": "Dereferencing an uninitialized pointer is undefined behavior. It could print any value."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1470238204, "post_id": 38747751, "comment_id": 64869509, "body": "In answer to &quot;Why?&quot; printing <code>*p</code> shows the value input to <code>x</code>: it&#39;s undefined behaviour, so the compiler can do anything, and you cannot rely on it... but in this specific case, with this alignment of the planets, probably the compiler just keeps the address of <code>&amp;x</code> in a register and reads back from that instead of the invalid <code>p</code>. Bluntly: any attempt to read from an uninitialised variable is UB and might do anything, or nothing, or something good, or something bad... etc."}, {"owner": {"reputation": 803, "user_id": 5044592, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3uVtC.jpg?s=128&g=1", "display_name": "Murali krishna", "link": "https://stackoverflow.com/users/5044592/murali-krishna"}, "edited": false, "score": 0, "creation_date": 1470240004, "post_id": 38747751, "comment_id": 64870767, "body": "I know that p in first and the p is second function is different. My question is why *p is in the second function is getting the x value?"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1470240733, "post_id": 38747751, "comment_id": 64871252, "body": "read the comment from <code>underscore_d</code> re: undefined behavior."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 458, "user_id": 2598455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10292c97171ec40cfe485635be47a22?s=128&d=identicon&r=PG", "display_name": "Artur Kink", "link": "https://stackoverflow.com/users/2598455/artur-kink"}, "edited": false, "score": 0, "creation_date": 1470240740, "post_id": 38747751, "comment_id": 64871259, "body": "@ArturKink: I think you misread the question."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1470241121, "post_id": 38747751, "comment_id": 64871543, "body": "Change the order of <code>x</code>&#39;s and <code>ptr</code>&#39;s definition in the 2nd example and re-test. The result probably is different."}, {"owner": {"reputation": 677, "user_id": 6082315, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/riSQI.jpg?s=128&g=1", "display_name": "sagar_jeevan", "link": "https://stackoverflow.com/users/6082315/sagar-jeevan"}, "edited": false, "score": 0, "creation_date": 1470241402, "post_id": 38747751, "comment_id": 64871704, "body": "Why not add the input and output of the code? That should make your question clear."}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1470241491, "post_id": 38747751, "comment_id": 64871771, "body": "<i>&quot;Here&#39;s my code that invokes undefined behaviour, here&#39;s the behaviour I see on my system, now tell me why&quot;</i>. Short answer: Nobody can reliably and definitively explain <b><i>undefined</i></b> behaviour in action. All we can say is that it would appear that the uninitialized pointer is pointing to an existing stack variable. Why? Perhaps the vendor thought that to be the safer option? Maybe you just got lucky? Who knows?"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1470244266, "post_id": 38747751, "comment_id": 64873457, "body": "<a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">What Every C Programmer Should Know About Undefined Behavior</a>, <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20140627-00/?p=633\" rel=\"nofollow noreferrer\">MSDN - Undefined behavior can result in time travel (among other things, but time travel is the funkiest)</a>, <a href=\"http://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/ub</a>"}, {"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1470259068, "post_id": 38747751, "comment_id": 64881372, "body": "p points to nowhere, or better, it doesn&#39;t even point (-:     so, why would you expect it to &quot;behave&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 803, "user_id": 5044592, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3uVtC.jpg?s=128&g=1", "display_name": "Murali krishna", "link": "https://stackoverflow.com/users/5044592/murali-krishna"}, "edited": false, "score": 0, "creation_date": 1470240142, "post_id": 38747790, "comment_id": 64870867, "body": "I know that but why content of p is getting the value of x in the second question."}, {"owner": {"reputation": 640, "user_id": 4208554, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gBcqSc3JZr8/AAAAAAAAAAI/AAAAAAAAAFY/cyp4486Yrfg/photo.jpg?sz=128", "display_name": "Jake Psimos", "link": "https://stackoverflow.com/users/4208554/jake-psimos"}, "edited": false, "score": 0, "creation_date": 1470241252, "post_id": 38747790, "comment_id": 64871621, "body": "You can proove this fundamental reasoning by creating a char buffer with a large memory space without initializing it and use GDB to view the memory contents.  There will surely be random values in the buffer every execution."}, {"owner": {"reputation": 22367, "user_id": 1057909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a3df0a806e7301ce9b92d0705646ac?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/1057909/ams"}, "reply_to_user": {"reputation": 640, "user_id": 4208554, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gBcqSc3JZr8/AAAAAAAAAAI/AAAAAAAAAFY/cyp4486Yrfg/photo.jpg?sz=128", "display_name": "Jake Psimos", "link": "https://stackoverflow.com/users/4208554/jake-psimos"}, "edited": false, "score": 0, "creation_date": 1470241560, "post_id": 38747790, "comment_id": 64871810, "body": "@JakePsimos nope; on Linux freshly allocated memory is always zeroed. Other OS may vary, but you will not find random memory left over from other apps on any real OS. (<i>Reallocated</i> memory, such as stack memory, is a different story, but is probably the same across all invocations of a basic program.)"}, {"owner": {"reputation": 640, "user_id": 4208554, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gBcqSc3JZr8/AAAAAAAAAAI/AAAAAAAAAFY/cyp4486Yrfg/photo.jpg?sz=128", "display_name": "Jake Psimos", "link": "https://stackoverflow.com/users/4208554/jake-psimos"}, "reply_to_user": {"reputation": 22367, "user_id": 1057909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a3df0a806e7301ce9b92d0705646ac?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/1057909/ams"}, "edited": false, "score": 0, "creation_date": 1470241747, "post_id": 38747790, "comment_id": 64871910, "body": "@ams but not when using malloc."}, {"owner": {"reputation": 22367, "user_id": 1057909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a3df0a806e7301ce9b92d0705646ac?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/1057909/ams"}, "reply_to_user": {"reputation": 640, "user_id": 4208554, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-gBcqSc3JZr8/AAAAAAAAAAI/AAAAAAAAAFY/cyp4486Yrfg/photo.jpg?sz=128", "display_name": "Jake Psimos", "link": "https://stackoverflow.com/users/4208554/jake-psimos"}, "edited": false, "score": 0, "creation_date": 1470241848, "post_id": 38747790, "comment_id": 64871972, "body": "@JakePsimos Even with malloc; if that memory block has not been used before it will be zeroed."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 6, "last_activity_date": 1470241496, "last_edit_date": 1470241496, "creation_date": 1470237997, "answer_id": 38747790, "question_id": 38747751, "link": "https://stackoverflow.com/questions/38747751/pointer-is-giving-unexpected-value/38747790#38747790", "title": "Pointer is giving unexpected value", "body": "<p>You didn't assign <code>p</code> a value, so it remains uninitialized.  Attempting to dereference that pointer invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>Give <code>p</code> a value and you'll get the result you expect:</p>\n\n<pre><code>int *p = &amp;x;\n</code></pre>\n\n<p>The fact that your code is still printing the correct value is part of that undefined behavior.  One of the ways undefined behavior can manifest is that the code appears to work properly, but then a seemingly unrelated change will cause it to break.</p>\n\n<p>In this particular situation, the functions <code>first</code> and <code>second</code> each define 2 local variables of the same type and in the same order.  After the call to <code>first</code> completes, the memory that contained the values of <code>x</code> and <code>p</code> from that function still contain those values, but there have been no other function calls yet to overwrite them.  </p>\n\n<p>When you then call <code>second</code> immediately after <code>first</code>.  The variables <code>x</code> and <code>ptr</code> in <code>second</code> end up using the same memory as <code>x</code> and <code>p</code> in <code>first</code>.  And because <code>ptr</code> is uninitialized, it still contains the old value which is the address of <code>x</code> in first, which happens to be the same as the address of <code>x</code> in <code>second</code>.</p>\n\n<p>Again, this is undefined behavior, so you can't depend on this happening all the time.  If you added another variable to <code>first</code> or called another function between <code>first</code> and <code>second</code>, that will modify the stack memory previously used by <code>first</code>.  Then than memory would contain some other value and you'll probably either print a garbage value or core dump.</p>\n\n<p>The same code may give different results if compiled with a different compiler or different compiler options.  For example, another compiler may choose to put the variables in each function in a different order on the stack, or it could decide to zero out the stack used by a function after the function returns.</p>\n"}, {"tags": [], "owner": {"reputation": 677, "user_id": 6082315, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/riSQI.jpg?s=128&g=1", "display_name": "sagar_jeevan", "link": "https://stackoverflow.com/users/6082315/sagar-jeevan"}, "is_accepted": false, "score": 0, "last_activity_date": 1470241279, "last_edit_date": 1470241279, "creation_date": 1470241222, "answer_id": 38748926, "question_id": 38747751, "link": "https://stackoverflow.com/questions/38747751/pointer-is-giving-unexpected-value/38748926#38748926", "title": "Pointer is giving unexpected value", "body": "<p><code>int *p=&amp;x;</code></p>\n\n<p>The address of x gets stored in p. </p>\n\n<p><code>printf(\"%d\",*p);</code></p>\n\n<p>Since p has the address of x, *p basically means that you are going to the location specified by p and picking up the item, which is the value of x.</p>\n"}], "owner": {"reputation": 803, "user_id": 5044592, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/3uVtC.jpg?s=128&g=1", "display_name": "Murali krishna", "link": "https://stackoverflow.com/users/5044592/murali-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 38747790, "answer_count": 2, "score": -4, "last_activity_date": 1470243271, "creation_date": 1470237896, "last_edit_date": 1470243271, "question_id": 38747751, "link": "https://stackoverflow.com/questions/38747751/pointer-is-giving-unexpected-value", "title": "Pointer is giving unexpected value", "body": "<pre><code>void first(){\n    int x;\n    int *p;\n    p= &amp;x;\n    scanf(\"%d\",p);\n    printf(\"The value in x or *p is: %d\\n\",x);\n}\n\n\nvoid second(){\n    int x;\n    int *ptr;\n    scanf(\"%d\",&amp;x);\n    printf(\"The value in *ptr is: %d\\n\",*ptr);\n}\n\n\nint main(){\n    first();\n    second();\n}\n</code></pre>\n\n<p>In the above code the <code>second()</code> function is miss behaving.What ever value I give for the <code>x</code> variable that value is getting assigned to <code>*ptr</code> as well as to x. Why?</p>\n"}, {"tags": ["c++", "c", "header-files"], "comments": [{"owner": {"reputation": 145, "user_id": 6636589, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1VGrBVOmjF4/AAAAAAAAAAI/AAAAAAAAABY/dXlado0wH5w/photo.jpg?sz=128", "display_name": "Matthew", "link": "https://stackoverflow.com/users/6636589/matthew"}, "edited": false, "score": 0, "creation_date": 1470237665, "post_id": 38747604, "comment_id": 64869105, "body": "I call it the &#39;interface&#39;... I think this might be a technical name"}, {"owner": {"reputation": 777, "user_id": 1791084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656f97e6a50390550004415bfe5a6032?s=128&d=identicon&r=PG", "display_name": "KidneyChris", "link": "https://stackoverflow.com/users/1791084/kidneychris"}, "edited": false, "score": 1, "creation_date": 1470237780, "post_id": 38747604, "comment_id": 64869203, "body": "Why not &quot;I switch from the implementation to the header&quot;? I don&#39;t think there&#39;s standardised terminology: my office calls them &quot;source&quot; and &quot;header&quot;  respectively &quot;Look at dummy&#39;s source/Look at dummy&#39;s header&quot;"}, {"owner": {"reputation": 712, "user_id": 4009370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b92c9a656d5274db5b46d2341ea468?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Sprague", "link": "https://stackoverflow.com/users/4009370/chris-sprague"}, "edited": false, "score": 3, "creation_date": 1470237793, "post_id": 38747604, "comment_id": 64869213, "body": "Typically you have your <i>declarations</i> in the header file and <i>definitions</i> in the source file. I think &quot;corresponding header&quot; is clear enough. I often find myself referring to the corresponding header as &quot;the dot h&quot; (as in <code>.h</code>)... i.e. if I need to talk about <code>foo.cpp</code>&#39;s corresponding header, I might say &quot;foo&#39;s dot h file.&quot;"}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 6, "creation_date": 1470237925, "post_id": 38747604, "comment_id": 64869313, "body": "There is no official/technical term. &quot;Corresponding header&quot; is perfectly acceptable."}, {"owner": {"reputation": 606, "user_id": 1223292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d1fb2e93924f47c29b17d269ca8596f?s=128&d=identicon&r=PG", "display_name": "Eirik M", "link": "https://stackoverflow.com/users/1223292/eirik-m"}, "edited": false, "score": 0, "creation_date": 1470238078, "post_id": 38747604, "comment_id": 64869421, "body": "I think corresponding header is fine. For the .c file the technical term is &#39;module&#39;, because it is what actually gets compiled. The header file is also source code, which gets included in the module to create a translation unit, that gets compiled. The thing with &quot;corresponding header&quot; is that it should include what another module should be able to access."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1470238206, "post_id": 38747604, "comment_id": 64869511, "body": "The point is that such an association is <i>conventional</i> (and not every project follows that convention). For small projects (of less than e.g. 100KLOC) I don&#39;t use such a convention. I would have a <i>single</i> header file included by all the translation unit (e.g. <code>*.c</code>)."}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1470238225, "post_id": 38747604, "comment_id": 64869525, "body": "Here is Dummy&#39;s Class Implementation."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "reply_to_user": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1470314568, "post_id": 38747604, "comment_id": 64906408, "body": "@RobK I am ok with the question being closed, however when I asked, there was no way to know if a technical term existed, and that this would have generated opinion-based discussion."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1470239385, "post_id": 38747979, "comment_id": 64870347, "body": "C++ does not have modules."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1470247868, "post_id": 38747979, "comment_id": 64875434, "body": "@LightnessRacesinOrbit In C++, can&#39;t it be used as synonymous of <a href=\"http://stackoverflow.com/a/1106167/2436175\">translation unit</a>? See <a href=\"http://stackoverflow.com/a/14714959/2436175\">stackoverflow.com/a/14714959/2436175</a>"}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1470248251, "post_id": 38747979, "comment_id": 64875610, "body": "I like your answer. However, if &quot;module&quot; is just a synonymous of &quot;translation unit&quot;, it sound very strange to say &quot;the interface (or the header) of the translation unit&quot;."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1470263605, "post_id": 38747979, "comment_id": 64883192, "body": "@Antonio: That very answer makes it pretty clear that the term should be avoided for its use is at best non-standard and at worst highly ambiguous."}], "tags": [], "owner": {"reputation": 6174, "user_id": 1577341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmeAD.jpg?s=128&g=1", "display_name": "Jacques de Hooge", "link": "https://stackoverflow.com/users/1577341/jacques-de-hooge"}, "is_accepted": false, "score": 1, "last_activity_date": 1470238456, "creation_date": 1470238456, "answer_id": 38747979, "question_id": 38747604, "link": "https://stackoverflow.com/questions/38747604/is-there-a-technical-name-of-the-header-corresponding-to-a-given-source-file/38747979#38747979", "title": "Is there a technical name of the header &quot;corresponding&quot; to a given source file?", "body": "<p>You have a module, consisting of an interface (the header) and an implementation (the C++ file).</p>\n\n<p>So you can say the interface or header of the module, and the implementation or C++ file of the module.</p>\n\n<p>Compare it to the wheels and motor of a car. You can say wheels of a car, motor of a car, but not (in the most obvious sense) wheels of a motor, motor of the wheels.</p>\n\n<p>And: All this is only half true, since language isn't mathematics...\nSo in fact to me all the possibilities you mention do the job: to clarify to me what you mean.</p>\n"}, {"tags": [], "owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "is_accepted": true, "score": 0, "last_activity_date": 1470314139, "last_edit_date": 1470314139, "creation_date": 1470306067, "answer_id": 38764696, "question_id": 38747604, "link": "https://stackoverflow.com/questions/38747604/is-there-a-technical-name-of-the-header-corresponding-to-a-given-source-file/38764696#38764696", "title": "Is there a technical name of the header &quot;corresponding&quot; to a given source file?", "body": "<p>It appears there is no official/technical term for this. Given the comments, it seems there's an agreement that the term \"corresponding header\" is clear enough.</p>\n\n<p>To be totally unambiguous, I can express my concept saying:</p>\n\n<blockquote>\n  <p>An implementation file should first of all include the header file it is implementing.</p>\n</blockquote>\n\n<p>(And then, the concept might be correct or wrong, but this is another story :) )</p>\n"}], "owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "closed_date": 1470306096, "accepted_answer_id": 38764696, "answer_count": 2, "score": 1, "last_activity_date": 1470314139, "creation_date": 1470237529, "last_edit_date": 1470238067, "question_id": 38747604, "link": "https://stackoverflow.com/questions/38747604/is-there-a-technical-name-of-the-header-corresponding-to-a-given-source-file", "closed_reason": "Opinion-based", "title": "Is there a technical name of the header &quot;corresponding&quot; to a given source file?", "body": "<p>Let's say I have a header file <code>dummy.h</code>, and a corresponding <code>dummy.cpp</code> or <code>dummy.c</code>. When I switch from the first to the second, I can say \"I switch from the header to its implementation\". But how can I express the opposite? \"Header's implementation\" sounds ok, but \"Implementation's header\" not really.</p>\n\n<p>The question came to me when I wanted to express the concept that an implementation file should first of all include... <em>its own header</em>. (This is actually not the topic of this question, it might very well be a future question, if I understand how to ask it).</p>\n\n<p>I saw a couple of occurrences of the term \"corresponding header\", but it's not used so often to be sure it's the right term.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1470236641, "post_id": 38747225, "comment_id": 64868338, "body": "Looks like simple math.  What specifically are you unsure of?"}, {"owner": {"reputation": 684, "user_id": 4970667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FWd3x.jpg?s=128&g=1", "display_name": "Quentin", "link": "https://stackoverflow.com/users/4970667/quentin"}, "edited": false, "score": 0, "creation_date": 1470236738, "post_id": 38747225, "comment_id": 64868401, "body": "What is the problem here ? This is just some simple math operations..."}, {"owner": {"reputation": 7, "user_id": 5964413, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fc78131744bd8f5f512237e105043a4c?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor Jane", "link": "https://stackoverflow.com/users/5964413/taylor-jane"}, "edited": false, "score": 0, "creation_date": 1470236919, "post_id": 38747225, "comment_id": 64868534, "body": "I must just be missing the point. I&#39;m getting a=19, b=23, c=18 when I trace it by hand."}, {"owner": {"reputation": 265, "user_id": 1840409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xsHQF.jpg?s=128&g=1", "display_name": "learning_frog", "link": "https://stackoverflow.com/users/1840409/learning-frog"}, "edited": false, "score": 0, "creation_date": 1470237060, "post_id": 38747225, "comment_id": 64868643, "body": "The argument values are not changed by the function"}, {"owner": {"reputation": 266, "user_id": 2350670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/c7zkm.jpg?s=128&g=1", "display_name": "Awais Chishti", "link": "https://stackoverflow.com/users/2350670/awais-chishti"}, "edited": false, "score": 0, "creation_date": 1470237099, "post_id": 38747225, "comment_id": 64868664, "body": "Are you sure you don&#39;t confuse the <code>c</code> in your main function with the <code>c</code> in your <code>f()</code>?"}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1470237415, "post_id": 38747225, "comment_id": 64868893, "body": "Use a debugger, it will help you to run step by step your program and so understand what do each line. Debugger is not only an useful tools to develop, but also to learn!"}, {"owner": {"reputation": 7, "user_id": 5964413, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fc78131744bd8f5f512237e105043a4c?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor Jane", "link": "https://stackoverflow.com/users/5964413/taylor-jane"}, "edited": false, "score": 0, "creation_date": 1470237583, "post_id": 38747225, "comment_id": 64869019, "body": "How do I find/use a debugger? You mean like a bunch of printf statements?"}, {"owner": {"reputation": 62902, "user_id": 90511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nmOPo.png?s=128&g=1", "display_name": "hugomg", "link": "https://stackoverflow.com/users/90511/hugomg"}, "edited": false, "score": 0, "creation_date": 1470292690, "post_id": 38747225, "comment_id": 64892218, "body": "A debugger is more powerful than printf statements. It is a tool that lets you pause a running program and inspect its state, including variables and the function call stack. If you are on Linux I would recommend gdb. On Windows, whatever IDE you are using probably comes with a begubber along with it."}, {"owner": {"reputation": 62902, "user_id": 90511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/nmOPo.png?s=128&g=1", "display_name": "hugomg", "link": "https://stackoverflow.com/users/90511/hugomg"}, "edited": false, "score": 0, "creation_date": 1470292928, "post_id": 38747225, "comment_id": 64892345, "body": "That said, right now this question is unfortunately very vague and its hard to give an answer for it because without knowing what is the specific problem you have there is no way to know if the details in the answer will be sufficient. If you still can&#39;t figure out the answer yourself, please edit your question to explain what exactly about this program you do not understand."}], "answers": [{"tags": [], "owner": {"reputation": 735, "user_id": 2568434, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/2aDtk.jpg?s=128&g=1", "display_name": "dear_tzvi", "link": "https://stackoverflow.com/users/2568434/dear-tzvi"}, "is_accepted": true, "score": 2, "last_activity_date": 1470237614, "creation_date": 1470237614, "answer_id": 38747634, "question_id": 38747225, "link": "https://stackoverflow.com/questions/38747225/tracing-code-by-functions/38747634#38747634", "title": "Tracing Code by Functions", "body": "<p>Let's do this line by line -</p>\n\n<p>a = f(c,b) - </p>\n\n<pre><code>c = 3 * a - b --&gt; (3 * 2) - 3 = 3\na = (c+17) % 23 --&gt; 20 % 23 = 20\nb = 23 % (a+5) --&gt; 23 % 25 = 23\n\nreturn a - b + c --&gt; 20 - 23 + 3 = 0\n</code></pre>\n\n<p>a = 0</p>\n\n<p>b=f(a,c) -</p>\n\n<pre><code>c = 3 * a - b --&gt; (3 * 0) - 2 = -2\na = (c+17) % 23 --&gt; (-2 + 17) % 23 = 15\nb = 23 % (a+5) --&gt; 23 % 20 = 3\n\nreturn a - b + c --&gt; 15 - 3 + -2 = 10\n</code></pre>\n\n<p>b = 10</p>\n\n<p>And c value remain 2</p>\n"}, {"tags": [], "owner": {"reputation": 8833, "user_id": 337149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3bbd41f2b74254f902cfe20acef9030b?s=128&d=identicon&r=PG", "display_name": "August Karlstrom", "link": "https://stackoverflow.com/users/337149/august-karlstrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1470238177, "creation_date": 1470238177, "answer_id": 38747866, "question_id": 38747225, "link": "https://stackoverflow.com/questions/38747225/tracing-code-by-functions/38747866#38747866", "title": "Tracing Code by Functions", "body": "<p>The code is full of reassignments and superfluous initializations which makes the code unnecessarily hard to follow. If we rewrite it like this the computations will be easier to understand:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint f(int a, int b)\n{\n    const int c = 3 * a - b;\n    const int d = (c + 17) % 23;\n    const int e = 23 % (d + 5);\n\n    return c + d - e;\n}\n\nint main(void)\n{\n    const int c = 2;\n    const int a = f(c, 3);\n    const int b = f(a, c);\n\n    printf(\"a=%d,b=%d,c=%d\\n\", a, b, c);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 5964413, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fc78131744bd8f5f512237e105043a4c?s=128&d=identicon&r=PG&f=1", "display_name": "Taylor Jane", "link": "https://stackoverflow.com/users/5964413/taylor-jane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1470293719, "accepted_answer_id": 38747634, "answer_count": 2, "score": -1, "last_activity_date": 1470238511, "creation_date": 1470236496, "last_edit_date": 1470238511, "question_id": 38747225, "link": "https://stackoverflow.com/questions/38747225/tracing-code-by-functions", "closed_reason": "Needs details or clarity", "title": "Tracing Code by Functions", "body": "<p>I know the answers are a=0, b=10, and c=2 because I wrote it out and compiled it, but I'm unsure of how the answers were found.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint f(int a, int b)\n{\n    int c;\n\n    c=3*a-b;\n    a=(c+17)%23;\n    b=23%(a+5);\n\n    return a-b+c;\n}\n\nint main()\n{\n    int a=7, b=3, c=2;\n\n    a=f(c,b);\n    b=f(a,c);\n    printf(\"a=%d,b=%d,c=%d\\n\", a,b,c);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 266, "user_id": 2350670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/c7zkm.jpg?s=128&g=1", "display_name": "Awais Chishti", "link": "https://stackoverflow.com/users/2350670/awais-chishti"}, "edited": false, "score": 3, "creation_date": 1470236543, "post_id": 38747221, "comment_id": 64868263, "body": "You input a string, not a char"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1470237061, "post_id": 38747221, "comment_id": 64868644, "body": "There&#39;s a couple of well-established libraries out there that are built to deal with big numbers (<a href=\"https://en.wikipedia.org/wiki/List_of_arbitrary-precision_arithmetic_software\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>). Maybe you&#39;d want to look into things like GMP, before reinventing the wheel. Because after this question (you obtain a huge integer), you&#39;ll probably find yourself asking how to subtract, add, or multiply..."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6673010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1894c2eb0c4e9e59807333e5d4de6d30?s=128&d=identicon&r=PG&f=1", "display_name": "Aryaman Todkar", "link": "https://stackoverflow.com/users/6673010/aryaman-todkar"}, "edited": false, "score": 0, "creation_date": 1470237123, "post_id": 38747248, "comment_id": 64868681, "body": "If B is an integer less than 10^250 can we store this integer as char str[256] @ameyCU"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 19, "user_id": 6673010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1894c2eb0c4e9e59807333e5d4de6d30?s=128&d=identicon&r=PG&f=1", "display_name": "Aryaman Todkar", "link": "https://stackoverflow.com/users/6673010/aryaman-todkar"}, "edited": false, "score": 0, "creation_date": 1470237651, "post_id": 38747248, "comment_id": 64869086, "body": "@AryamanTodkar Number upto <code>10^250</code> (<code>251</code> digits) can be stored in <code>char str[256]</code>."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 1, "last_activity_date": 1470236556, "creation_date": 1470236556, "answer_id": 38747248, "question_id": 38747221, "link": "https://stackoverflow.com/questions/38747221/data-typechar-in-c/38747248#38747248", "title": "data type(char) in C", "body": "<p>What you have is array of <code>30</code> <code>char</code> and not a single <code>char</code> -</p>\n\n<pre><code>char b[30];   //b is an array of char \n</code></pre>\n\n<p>So <code>b</code>'s size is <code>30*sizeof(char)</code> . It means it can hold <code>30</code> characters (including <code>'\\0'</code>) . Your input is stored in this character array (<em>sufficient for input provided</em>) and therefore, you can get correct output.  </p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 6673010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1894c2eb0c4e9e59807333e5d4de6d30?s=128&d=identicon&r=PG&f=1", "display_name": "Aryaman Todkar", "link": "https://stackoverflow.com/users/6673010/aryaman-todkar"}, "edited": false, "score": 0, "creation_date": 1470237326, "post_id": 38747265, "comment_id": 64868828, "body": "If B is an integer less than 10^250 can we store this integer as char str[256] @sjsam"}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 1, "creation_date": 1470244408, "post_id": 38747265, "comment_id": 64873530, "body": "You are NOT storing the integer here; you are storing a string of characters. Note that you can store an accurate representation of any integer from zero to 255 in a single character, and any integer in the range (0, 65535] in two characters, and so on."}], "tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": false, "score": 1, "last_activity_date": 1470237464, "last_edit_date": 1470237464, "creation_date": 1470236599, "answer_id": 38747265, "question_id": 38747221, "link": "https://stackoverflow.com/questions/38747221/data-typechar-in-c/38747265#38747265", "title": "data type(char) in C", "body": "<pre><code>char b[30];\n</code></pre>\n\n<p>b is an array and you can store up to 30 characters.  </p>\n\n<p>As a response to</p>\n\n<pre><code>scanf(\"%s\",b);\n</code></pre>\n\n<p>You have entered 18 characters</p>\n\n<pre><code>344565786464675345 \n</code></pre>\n\n<p>A null character <code>\\0</code> has been appended to what you have entered because of the <code>%s</code> specifier which makes a total of 19 characters. Or </p>\n\n<pre><code>b[18]='\\0' // Remember the count starts from 0\n</code></pre>\n\n<p>So you still have 11 free bytes in your array <code>b</code> as a character is 1 byte.</p>\n\n<p>Mind that if you're trying store a string in the array, then the array to be null terminated, ie you need to have a <code>\\0</code> at the end of a character array for the group to be considered a string.</p>\n\n<p>So, technically you can have a string of up to 29 characters using <code>char b[30]</code> for it to make a valid string.</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 6673010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1894c2eb0c4e9e59807333e5d4de6d30?s=128&d=identicon&r=PG&f=1", "display_name": "Aryaman Todkar", "link": "https://stackoverflow.com/users/6673010/aryaman-todkar"}, "edited": false, "score": 0, "creation_date": 1470237184, "post_id": 38747288, "comment_id": 64868718, "body": "If B is an integer less than 10^250 can we store this integer as char str[256] @dasblinkenlight"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 19, "user_id": 6673010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1894c2eb0c4e9e59807333e5d4de6d30?s=128&d=identicon&r=PG&f=1", "display_name": "Aryaman Todkar", "link": "https://stackoverflow.com/users/6673010/aryaman-todkar"}, "edited": false, "score": 0, "creation_date": 1470237401, "post_id": 38747288, "comment_id": 64868883, "body": "@AryamanTodkar Yes, we can store it like that even if we use <code>char</code>s to represent its decimal digits."}, {"owner": {"reputation": 19, "user_id": 6673010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1894c2eb0c4e9e59807333e5d4de6d30?s=128&d=identicon&r=PG&f=1", "display_name": "Aryaman Todkar", "link": "https://stackoverflow.com/users/6673010/aryaman-todkar"}, "edited": false, "score": 0, "creation_date": 1470237549, "post_id": 38747288, "comment_id": 64868997, "body": "Thanks I got it @dasblinkenlight"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 19, "user_id": 6673010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1894c2eb0c4e9e59807333e5d4de6d30?s=128&d=identicon&r=PG&f=1", "display_name": "Aryaman Todkar", "link": "https://stackoverflow.com/users/6673010/aryaman-todkar"}, "edited": false, "score": 0, "creation_date": 1470237610, "post_id": 38747288, "comment_id": 64869045, "body": "@AryamanTodkar If we use base-256 representation, we can store 10^250 in only 104 bytes instead of 256."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 19, "user_id": 6673010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1894c2eb0c4e9e59807333e5d4de6d30?s=128&d=identicon&r=PG&f=1", "display_name": "Aryaman Todkar", "link": "https://stackoverflow.com/users/6673010/aryaman-todkar"}, "edited": false, "score": 1, "creation_date": 1470237726, "post_id": 38747288, "comment_id": 64869159, "body": "@AryamanTodkar You are welcome! If you no longer need help with the problem, consider accepting an answer by clicking the grey check mark next to it. This would let other site visitors know that your problem is solved, and also earn you a brand-new badge on Stack Overflow."}, {"owner": {"reputation": 266, "user_id": 2350670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/c7zkm.jpg?s=128&g=1", "display_name": "Awais Chishti", "link": "https://stackoverflow.com/users/2350670/awais-chishti"}, "edited": false, "score": 0, "creation_date": 1470238719, "post_id": 38747288, "comment_id": 64869861, "body": "Lol he ditched you"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 266, "user_id": 2350670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/c7zkm.jpg?s=128&g=1", "display_name": "Awais Chishti", "link": "https://stackoverflow.com/users/2350670/awais-chishti"}, "edited": false, "score": 0, "creation_date": 1470238780, "post_id": 38747288, "comment_id": 64869910, "body": "@AwaisChishti That&#39;s OK, it happens all the time."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1470236668, "creation_date": 1470236668, "answer_id": 38747288, "question_id": 38747221, "link": "https://stackoverflow.com/questions/38747221/data-typechar-in-c/38747288#38747288", "title": "data type(char) in C", "body": "<p>There is a difference between a <code>char</code> and an array of <code>char</code>s, which is what you have.</p>\n\n<p>An array is capable of storing up to 29 digits plus null terminator, but the value that you enter is <em>not</em> stored as a large integer. Instead, it is stored as a sequence of characters, where each character represents a single digit:</p>\n\n<pre><code>Index of b[]  0   1   2   3   4   5   6   7   8  ...\nchar value   '3' '4' '4' '5' '6' '5' '7' '8' '6' ...\nnum value     51  52  52  53  52  53  54  55  54 ...\n</code></pre>\n\n<p>All characters have numeric values in the range that can be represented by a single <code>char</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 6673010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1894c2eb0c4e9e59807333e5d4de6d30?s=128&d=identicon&r=PG&f=1", "display_name": "Aryaman Todkar", "link": "https://stackoverflow.com/users/6673010/aryaman-todkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1470237464, "creation_date": 1470236486, "question_id": 38747221, "link": "https://stackoverflow.com/questions/38747221/data-typechar-in-c", "title": "data type(char) in C", "body": "<p>If input is given a big number like 344565786464675345 still I get output how is this possible as char has range 256 so it should not take numbers greater than that, why char can store such big integers?</p>\n\n<pre><code>int main()\n{\n    char b[30];\n    scanf(\"%s\",b);\n    printf(\"\\n%s\",b);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "stdout", "stdin"], "comments": [{"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "edited": false, "score": 0, "creation_date": 1470236236, "post_id": 38747078, "comment_id": 64868038, "body": "How do you start the subprocess?"}, {"owner": {"reputation": 3036, "user_id": 193481, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/909f9f41994ebbe79418cbd95efcb18e?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/193481/david"}, "reply_to_user": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "edited": false, "score": 0, "creation_date": 1470236352, "post_id": 38747078, "comment_id": 64868111, "body": "I don&#39;t know, I was expecting that to be part of the answer (popen, fork, etc.)"}, {"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "edited": false, "score": 0, "creation_date": 1470237211, "post_id": 38747078, "comment_id": 64868736, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6743771/popen-alternative\">popen() alternative</a>"}, {"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "edited": false, "score": 0, "creation_date": 1470237351, "post_id": 38747078, "comment_id": 64868850, "body": "The first answer contains an example of creating a subprocess with <code>popen()</code>/<code>exec\u2026()</code> and using a pipe to communicate. As side note: Your Q sounds a bit if you have data in advance and want to get back data after the process finished. In such a case simply write the input data to a file, start the subprocess from that file and let him write out to a file and finally read the file after the process is done. Maybe this is easier in your scenario."}, {"owner": {"reputation": 15921, "user_id": 676558, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PbWyu.png?s=128&g=1", "display_name": "Amin Negm-Awad", "link": "https://stackoverflow.com/users/676558/amin-negm-awad"}, "edited": false, "score": 0, "creation_date": 1470245728, "post_id": 38747078, "comment_id": 64874287, "body": "Of course, <code>fork()</code>, not <code>popen()</code>."}], "owner": {"reputation": 3036, "user_id": 193481, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/909f9f41994ebbe79418cbd95efcb18e?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/193481/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 367, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470236099, "creation_date": 1470236099, "last_edit_date": 1495542773, "question_id": 38747078, "link": "https://stackoverflow.com/questions/38747078/c-calling-subprocess-and-injecting-in-stdin-and-reading-its-stdout", "title": "C calling subprocess and injecting in stdin and reading it&#39;s stdout", "body": "<p>I haven't found any satisfactory answer so excuse me if this has already been answered before.</p>\n\n<p>Basically I'd like to be able to call a program and inject some data in its stdin and read it's stdout from within a C program.</p>\n\n<p>I'd like to emulate this:</p>\n\n<p>cat data.txt | program</p>\n\n<p>where the output of program is captured and the data is written to stdin of said program.</p>\n\n<p>It's a bit like this question but in C instead of python and I don't need the subprocess to live forever, just execute with input data, spit out the output and die.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/13603334/repeatedly-write-to-stdin-and-read-stdout-of-a-subprocess-without-closing-it\">Repeatedly write to STDIN and read STDOUT of a Subprocess without closing it</a></p>\n"}, {"tags": ["c", "linked-list", "insertion"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1470233764, "post_id": 38746127, "comment_id": 64865992, "body": "Don&#39;t you think your <code>traverse</code> and <code>search</code> function should be the same structure? Why are they different?"}, {"owner": {"reputation": 1248, "user_id": 1791872, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6nnz7.png?s=128&g=1", "display_name": "flau", "link": "https://stackoverflow.com/users/1791872/flau"}, "edited": false, "score": 0, "creation_date": 1470233894, "post_id": 38746127, "comment_id": 64866111, "body": "Search value returns 0 even if it succeeds"}, {"owner": {"reputation": 333, "user_id": 2636873, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QMtey.jpg?s=128&g=1", "display_name": "crisron", "link": "https://stackoverflow.com/users/2636873/crisron"}, "edited": false, "score": 1, "creation_date": 1470233994, "post_id": 38746127, "comment_id": 64866182, "body": "You don&#39;t need to pass pointer to head in search_value."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1470234122, "post_id": 38746127, "comment_id": 64866277, "body": "need <code>temp=temp-&gt;next;</code> at while-end. <code>if((*head)==NULL)</code> block also need return value;"}, {"owner": {"reputation": 684, "user_id": 4970667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FWd3x.jpg?s=128&g=1", "display_name": "Quentin", "link": "https://stackoverflow.com/users/4970667/quentin"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1470234415, "post_id": 38746127, "comment_id": 64866497, "body": "As @BLUEPIXY says, in your search function, add <code>temp = temp-&gt;next;</code> at while-end, <code>if ((* head) == NULL)</code> will not do what you exepect, use <code>&#236;f (head == NULL)</code> will work, and <code>temp = (*head);</code> is incorrect too, <code>temp = head</code> will be better to assign a pointer."}, {"owner": {"reputation": 29, "user_id": 6672731, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/deed890bb53c43bdae760dc3fd5df24c?s=128&d=identicon&r=PG&f=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/6672731/naman"}, "reply_to_user": {"reputation": 1248, "user_id": 1791872, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6nnz7.png?s=128&g=1", "display_name": "flau", "link": "https://stackoverflow.com/users/1791872/flau"}, "edited": false, "score": 0, "creation_date": 1470234505, "post_id": 38746127, "comment_id": 64866585, "body": "I&#39;m not using the returned value that was just to terminate the loop, so no worries I guess. @iwin"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 6672731, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/deed890bb53c43bdae760dc3fd5df24c?s=128&d=identicon&r=PG&f=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/6672731/naman"}, "edited": false, "score": 0, "creation_date": 1470234668, "post_id": 38746357, "comment_id": 64866713, "body": "Oh yes! Got the mistake..Thanks"}], "tags": [], "owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "is_accepted": true, "score": 1, "last_activity_date": 1470234252, "creation_date": 1470234252, "answer_id": 38746357, "question_id": 38746127, "link": "https://stackoverflow.com/questions/38746127/searching-a-value-in-the-linked-list/38746357#38746357", "title": "Searching a value in the linked list", "body": "<p>Think about the search function:</p>\n\n<pre><code>int search_value(node **head,int value)\n{\nnode* temp;\nif((*head)==NULL)\n{\n    printf(\"The list is empty\\n\");\n}\nelse\n{\n    temp = (*head);\n    while(temp!=NULL)\n    {\n        if(temp-&gt;data==value)\n        {\n            printf(\"FOUND\\n\");\n            return 0;\n        }\n    }\n    printf(\"NOT FOUND\\n\");\n    return 0;\n}\n}\n</code></pre>\n\n<p>In your while loop, you check if <code>temp != NULL</code> and initialize temp to <code>head</code>.  It seems like you want to actually traverse the list, and when <code>value</code> is found, you want to return.  However, you <em>never move to the next node</em>.</p>\n\n<p>You simply check the value of <code>temp-&gt;data</code>, but unless the first node's data member equals <code>value</code>, the while loop is infinite.  </p>\n\n<p>In order to actually traverse the loop, it would be best to do something like:</p>\n\n<pre><code>temp = temp-&gt;next;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 5129401, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b4b1d095f5122e46aee90110c24261e4?s=128&d=identicon&r=PG&f=1", "display_name": "princevezt", "link": "https://stackoverflow.com/users/5129401/princevezt"}, "edited": false, "score": 0, "creation_date": 1470236256, "post_id": 38747098, "comment_id": 64868048, "body": "and also, put some delay after you display the &quot;Found&quot; text, like you add getch() and wait for the user to input any character to go back to main menu."}], "tags": [], "owner": {"reputation": 67, "user_id": 5129401, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b4b1d095f5122e46aee90110c24261e4?s=128&d=identicon&r=PG&f=1", "display_name": "princevezt", "link": "https://stackoverflow.com/users/5129401/princevezt"}, "is_accepted": false, "score": 0, "last_activity_date": 1470236158, "creation_date": 1470236158, "answer_id": 38747098, "question_id": 38746127, "link": "https://stackoverflow.com/questions/38746127/searching-a-value-in-the-linked-list/38747098#38747098", "title": "Searching a value in the linked list", "body": "<p>your search will really not work because in your while loop, you don't have code to change the value of the temp. you are only conditioning the head.\nso in you code, add line of code: temp = temp->next; after the closing parenthesis of if statement.</p>\n\n<pre><code>int search_value(node **head,int value)\n{\n  node* temp;\n  if((*head)==NULL)  \n  {\n    printf(\"The list is empty\\n\");\n  }\nelse\n{\n  temp = (*head);\n  while(temp!=NULL)\n{\n    if(temp-&gt;data==value)\n    {\n        printf(\"FOUND\\n\");\n        return 0;\n    }\n\n     temp = temp-&gt;next;\n\n}\nprintf(\"NOT FOUND\\n\");\nreturn 0;\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6672731, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/deed890bb53c43bdae760dc3fd5df24c?s=128&d=identicon&r=PG&f=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/6672731/naman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 965, "favorite_count": 0, "accepted_answer_id": 38746357, "answer_count": 2, "score": 0, "last_activity_date": 1470236158, "creation_date": 1470233665, "question_id": 38746127, "link": "https://stackoverflow.com/questions/38746127/searching-a-value-in-the-linked-list", "title": "Searching a value in the linked list", "body": "<p>I'm not very comfortable with pointers in C and tried a piece of code to search a value in the linked list. Also, I made functions to insert at end(newNode_end), insert at the beginning(newNode_begin) and traverse.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\ntypedef struct node\n{\nint data;\nstruct node* next;\n}\n\nvoid newNode_end(node **head,int data)\n{\nnode* node_ptr, *temp;\nnode_ptr = (node* )malloc(sizeof(node));\nnode_ptr-&gt;data = data;\nif((*head)==NULL)\n{\n    (*head) = node_ptr;\n    node_ptr-&gt;next = NULL;\n}\nelse\n{\n    temp = (*head);\n    while(temp-&gt;next!=NULL)\n        temp = temp-&gt;next;\n\n    temp-&gt;next = node_ptr;\n    node_ptr-&gt;next = NULL;\n}\n}\n\nvoid newNode_begin(node **head,int data)\n{\nnode* node_ptr, *temp;\nnode_ptr = (node* )malloc(sizeof(node));\nnode_ptr-&gt;data = data;\nif((*head)==NULL)\n{\n    (*head) = node_ptr;\n    node_ptr-&gt;next = NULL;\n}\nelse\n{\n    node_ptr-&gt;next = (*head);\n    (*head) = node_ptr;\n}\n}\n\nvoid traverse(node *head)\n{\nnode* temp;\nif(head==NULL)\n{\n    printf(\"The list is empty\\n\");\n}\nelse\n{\n    temp = head;\n    while(temp!=NULL)\n    {\n        printf(\"%d\\n\",temp-&gt;data);\n        temp = temp-&gt;next;\n    }\n}\n}\n\nint search_value(node **head,int value)\n{\nnode* temp;\nif((*head)==NULL)\n{\n    printf(\"The list is empty\\n\");\n}\nelse\n{\n    temp = (*head);\n    while(temp!=NULL)\n    {\n        if(temp-&gt;data==value)\n        {\n            printf(\"FOUND\\n\");\n            return 0;\n        }\n    }\n    printf(\"NOT FOUND\\n\");\n    return 0;\n}\n}\n\n\nint main()\n{\nnode *head = NULL;\nint node_data,user_resp,value;\nwhile(1)\n{\n    printf(\"----------MENU------------\\n\");\n    printf(\"Press 1: ADD NODE IN THE BEGINNING\\n\");\n    printf(\"Press 2: ADD NODE AT THE END\\n\");\n    printf(\"Press 3: TRAVERSE THE LINKED LIST\\n\");\n    printf(\"Press 4: SEARCH A VALUE\\n\");\n    printf(\"Press 5: EXIT\\n\");\n    scanf(\"%d\",&amp;user_resp);\n    switch(user_resp)\n    {\n    case 1:\n        printf(\"Enter data for node\\n\");\n        scanf(\"%d\",&amp;node_data);\n        newNode_begin(&amp;head,node_data);\n        break;\n\n    case 2:\n        printf(\"Enter data for node\\n\");\n        scanf(\"%d\",&amp;node_data);\n        newNode_end(&amp;head,node_data);\n        break;\n\n    case 3:\n        traverse(head);\n        break;\n\n    case 4:\n        printf(\"Enter value to be searched\\n\");\n        scanf(\"%d\",&amp;value);\n        search_value(&amp;head,value);\n\n    case 5:\n        exit(0);\n        break;\n    }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The insertion and traversal functions of the code works well but the search_value function sometimes crashes. Any guidance on the same would be highly appreciated.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "unit-testing", "makefile", "gnu-make"], "comments": [{"owner": {"reputation": 32065, "user_id": 90002, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/717b51c0020d2a527975a5ee44026d12?s=128&d=identicon&r=PG", "display_name": "Phil Miller", "link": "https://stackoverflow.com/users/90002/phil-miller"}, "edited": false, "score": 0, "creation_date": 1470233599, "post_id": 38746018, "comment_id": 64865878, "body": "First, you don&#39;t need the <code>.c.o</code> rule - Make has that built in."}, {"owner": {"reputation": 32065, "user_id": 90002, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/717b51c0020d2a527975a5ee44026d12?s=128&d=identicon&r=PG", "display_name": "Phil Miller", "link": "https://stackoverflow.com/users/90002/phil-miller"}, "edited": false, "score": 0, "creation_date": 1470233705, "post_id": 38746018, "comment_id": 64865944, "body": "Second, it&#39;s probably preferable to use <code>VPATH</code> to specify the directories you want Make to search for objects, rather than baking paths into your dependencies and commands. I.e. you would say <code>list_test: list_test.o munit.o node_queue.o</code> and then the rule would run the command with arguments <code>-o $@ $^</code> to tell it to just reference all of the dependencies, wherever it found them."}, {"owner": {"reputation": 11, "user_id": 6227908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a30759932db1b409295baf3817761cfb?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Bodzas", "link": "https://stackoverflow.com/users/6227908/austin-bodzas"}, "reply_to_user": {"reputation": 32065, "user_id": 90002, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/717b51c0020d2a527975a5ee44026d12?s=128&d=identicon&r=PG", "display_name": "Phil Miller", "link": "https://stackoverflow.com/users/90002/phil-miller"}, "edited": false, "score": 0, "creation_date": 1470233948, "post_id": 38746018, "comment_id": 64866149, "body": "@Novelocrat I was looking into <code>VPATH</code> but was reading <a href=\"http://make.mad-scientist.net/papers/how-not-to-use-vpath/\" rel=\"nofollow noreferrer\">this</a>  which made it seem like it was better to try other methods."}, {"owner": {"reputation": 32065, "user_id": 90002, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/717b51c0020d2a527975a5ee44026d12?s=128&d=identicon&r=PG", "display_name": "Phil Miller", "link": "https://stackoverflow.com/users/90002/phil-miller"}, "edited": false, "score": 0, "creation_date": 1470234376, "post_id": 38746018, "comment_id": 64866464, "body": "That article is addressing a particular kind of mis-use of VPATH. You would be using it as intended, I think"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6227908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a30759932db1b409295baf3817761cfb?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Bodzas", "link": "https://stackoverflow.com/users/6227908/austin-bodzas"}, "edited": false, "score": 0, "creation_date": 1470235320, "post_id": 38746173, "comment_id": 64867261, "body": "Yeah I just lost 5 hours to spelling construct as contsruct... but I do have my Makefile in order now <a href=\"https://gist.githubusercontent.com/Beaudidly/b374790854a91f2e3f3f1c077381c571/raw/2c1488010ebc7d3c11b26bf34add51c63e04da25/Makefile\" rel=\"nofollow noreferrer\">gist</a>"}, {"owner": {"reputation": 32065, "user_id": 90002, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/717b51c0020d2a527975a5ee44026d12?s=128&d=identicon&r=PG", "display_name": "Phil Miller", "link": "https://stackoverflow.com/users/90002/phil-miller"}, "reply_to_user": {"reputation": 11, "user_id": 6227908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a30759932db1b409295baf3817761cfb?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Bodzas", "link": "https://stackoverflow.com/users/6227908/austin-bodzas"}, "edited": false, "score": 0, "creation_date": 1470235354, "post_id": 38746173, "comment_id": 64867292, "body": "It happens to all of us."}], "tags": [], "owner": {"reputation": 32065, "user_id": 90002, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/717b51c0020d2a527975a5ee44026d12?s=128&d=identicon&r=PG", "display_name": "Phil Miller", "link": "https://stackoverflow.com/users/90002/phil-miller"}, "is_accepted": false, "score": 1, "last_activity_date": 1470233788, "creation_date": 1470233788, "answer_id": 38746173, "question_id": 38746018, "link": "https://stackoverflow.com/questions/38746018/compiling-across-different-directories-with-gnu-make/38746173#38746173", "title": "Compiling across different directories with GNU make", "body": "<p>For your actual error, you're reporting a linking error to an undefined symbol. If the object or function of that name were defined in <code>node_queue.h</code>, you would instead get a <em>multiple definition</em> error for <code>construct</code>.</p>\n\n<p>What you probably are missing is that you have a declaration in that header, but no definition in <code>node_queue.c</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 6227908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a30759932db1b409295baf3817761cfb?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Bodzas", "link": "https://stackoverflow.com/users/6227908/austin-bodzas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470233788, "creation_date": 1470233382, "question_id": 38746018, "link": "https://stackoverflow.com/questions/38746018/compiling-across-different-directories-with-gnu-make", "title": "Compiling across different directories with GNU make", "body": "<p>I have a project structure like such:</p>\n\n<pre><code>mcts/\n    src/\n        node_queue.c\n        node_queue.h\n    tests/\n        munit.c    # testing frame work\n        munit.h\n        list_test.c # includes node_queue.h and munit.h\n        Makefile    # Makefile in question\n</code></pre>\n\n<p>So my objective here is to compile the test mcts/test/list_test.c .  I have read a couple different strategies to doing this. After reading a bit I adapted some things I took from Makefiles into this:</p>\n\n<pre><code>CC= gcc\nSOURCE= $(wildcard ../src/*.c ./*.c)\nOBJECTS= $(patsubst %.c, %.o, $(SOURCE))\nINCLUDE= -I. -I../src/\nCFLAGS= -std=c11 -g $(INCLUDE) -Werror -Wall\n\nlist_test: list_test.o munit.o ../src/node_queue.o\n    $(CC) $(CFLAGS) $(INCLUDE) -o $@ list_test.o munit.o    ../src/node_queue.o\n\n.c.o:\n    $(CC) $(CFLAGS) -c $&lt; -o $@\n</code></pre>\n\n<p>Which is the closest I've gotten in about 2 hours to working, when calling <code>make</code> in <code>mcts/tests</code> I receive the error:</p>\n\n<pre><code>list_test.o: In function `construct_test':\n/home/----/mcts/tests/list_test.c:9: undefined reference to `construct'\ncollect2: error: ld returned 1 exit status\nmake: *** [Makefile:8: list_test] Error 1\n</code></pre>\n\n<p>Where construct is defined in <code>mcts/src/node_queue.h</code>.\nShouldn't <code>$(INCLUDE)</code> ensure that the header is being included? \nAnd how can I get this to function?</p>\n\n<p>Much thanks!</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1470232736, "post_id": 38745749, "comment_id": 64865230, "body": "<code>executables</code>? the <code>s</code> is intentional? individual binaries?"}, {"owner": {"reputation": 1248, "user_id": 1791872, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6nnz7.png?s=128&g=1", "display_name": "flau", "link": "https://stackoverflow.com/users/1791872/flau"}, "edited": false, "score": 0, "creation_date": 1470232798, "post_id": 38745749, "comment_id": 64865286, "body": "For what reason do you not want to use the -o option?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1470232876, "post_id": 38745749, "comment_id": 64865353, "body": "Also, are (are not) you aware of makefiles?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1470232879, "post_id": 38745749, "comment_id": 64865358, "body": "<code>without using -o trial1</code> - no way. Well, you can rename <code>a.out</code> after each compilation.."}, {"owner": {"reputation": 472, "user_id": 1337366, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/UlwVq.jpg?s=128&g=1", "display_name": "Sami", "link": "https://stackoverflow.com/users/1337366/sami"}, "edited": false, "score": 0, "creation_date": 1470233060, "post_id": 38745749, "comment_id": 64865491, "body": "because I have several c files. I am compiling them in one command and I want to see which of them were not compilled. If I could have the executables with the same name as the c file names, I could determine which of them were not compiled. -o option becomes useless in this sense."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1470233150, "post_id": 38745749, "comment_id": 64865583, "body": "@Sami\u015eim\u015fekli Now get rid of this &quot;without using -o&quot; part of the question, as you just don&#39;t know how to use it properly to achieve what you need. And it can be used properly for your needs. One of the options is down there in the answer. Another would be to use a Makefile"}], "answers": [{"tags": [], "owner": {"reputation": 871, "user_id": 6581003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91b11cffe6105720b60b54480f6a377f?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Olivert Riera", "link": "https://stackoverflow.com/users/6581003/vincent-olivert-riera"}, "is_accepted": true, "score": 2, "last_activity_date": 1470233377, "last_edit_date": 1470233377, "creation_date": 1470233004, "answer_id": 38745868, "question_id": 38745749, "link": "https://stackoverflow.com/questions/38745749/same-executable-name-with-c-file-after-compilation/38745868#38745868", "title": "Same executable name with c file after compilation", "body": "<p>Do you want something like this?</p>\n\n<pre><code>for i in *.c; do gcc ${i::1}.c -o ${i::1}.out; done\n</code></pre>\n\n<p>Or, if you are interested on just knowing if they compile successfully:</p>\n\n<pre><code>for i in *.c; do gcc $i 2&gt;/dev/null &amp;&amp; echo \"$i : OK\" || echo \"$i : FAIL\"; done\n</code></pre>\n"}], "owner": {"reputation": 472, "user_id": 1337366, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/UlwVq.jpg?s=128&g=1", "display_name": "Sami", "link": "https://stackoverflow.com/users/1337366/sami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 38745868, "answer_count": 1, "score": -1, "last_activity_date": 1470239713, "creation_date": 1470232710, "last_edit_date": 1470239713, "question_id": 38745749, "link": "https://stackoverflow.com/questions/38745749/same-executable-name-with-c-file-after-compilation", "title": "Same executable name with c file after compilation", "body": "<p>I want to compile several c files and I want to have executables whose names are same as the c file's names i.e if I have trial1.c, how can I have trial1.out?</p>\n"}, {"tags": ["c", "textout"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470230598, "post_id": 38744871, "comment_id": 64863572, "body": "What is &quot;Visual C&quot; and why is there no tag for it? Anyway, it is not a matter of the language."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 2, "creation_date": 1470230841, "post_id": 38744871, "comment_id": 64863756, "body": "It depends on how you are rendering the text, but that&#39;s the basic idea. If there is no kerning, you can have a lookup table for each character width and easily calculate the offset. If your rendering function uses kerning, or justifies text by adding additional spaces, then you need to use the appropriate matching function which will measure it. Notepad usually uses a fixed width font, and I doubt it does any kerning for variable length fonts."}, {"owner": {"reputation": 11, "user_id": 6672543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d33f57ffb240906eccf07b1297bf8faa?s=128&d=identicon&r=PG&f=1", "display_name": "Lee H", "link": "https://stackoverflow.com/users/6672543/lee-h"}, "edited": false, "score": 0, "creation_date": 1470321280, "post_id": 38744871, "comment_id": 64911918, "body": "Thank you Groo - I get the idea.  It seems that TextOut (at least by default) does not kern, so that makes my job relatively easy. It looks like GetCharWidth32() can be used to generate your lookup table (to be confirmed).  As for Notepad, oddly enough it does appear to kern (or my Win7 version does).  With Times New Roman, &quot;AV&quot; shows a mid-overlap of 1 pixel in font size 12, 2 pixels in font-size 18, 3 in 24, and so on.  I don&#39;t know what function it uses to measure the offset, or even how it turns on kerning, but I&#39;m quite happy to make do without kerning for my program."}, {"owner": {"reputation": 11, "user_id": 6672543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d33f57ffb240906eccf07b1297bf8faa?s=128&d=identicon&r=PG&f=1", "display_name": "Lee H", "link": "https://stackoverflow.com/users/6672543/lee-h"}, "edited": false, "score": 0, "creation_date": 1470321329, "post_id": 38744871, "comment_id": 64911947, "body": "Sorry Olaf, I meant Microsoft Visual Studio 9.0 C, MSDN library."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6672543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d33f57ffb240906eccf07b1297bf8faa?s=128&d=identicon&r=PG&f=1", "display_name": "Lee H", "link": "https://stackoverflow.com/users/6672543/lee-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1470692189, "creation_date": 1470692189, "answer_id": 38838893, "question_id": 38744871, "link": "https://stackoverflow.com/questions/38744871/how-to-convert-cursor-position-to-text-position-in-visual-c/38838893#38838893", "title": "How to convert cursor-position to text-position in Visual C?", "body": "<p>This answer was compiled by trial and error after wading through Microsoft's cryptic documentation.</p>\n\n<p>The MSDN C library provides the following functions to display text:</p>\n\n<pre><code>* TextOut, which does not kern\n* ExtTextOut, which can kern if its final parameter is non-null\n* DrawText, which always kerns\n</code></pre>\n\n<p>If kerning is required (and on reflection I think that it is desirable) then it is a choice between ExtTextOut and DrawText.</p>\n\n<p>DrawText provides a solution along the lines suggested by Groo.  It requires\na box to be drawn around the text-area, as in:</p>\n\n<pre><code>void textOut(HDC hdc, int x, int y, char *s, int l)\n{\n    RECT r = {0};\n    r.left = x;\n    r.right = Ewidth;\n    r.top = y;\n    r.bottom = y+LineHt;\n    DrawText(hdc,s,l,&amp;r,DT_NOPREFIX);\n}\n</code></pre>\n\n<p>When the fontsize is set or changed, then a character-width lookup-table \"CharW\" must be built:</p>\n\n<pre><code>ABC CharW[256];     // char-width including leading/trailing space\n    GetCharABCWidths(hdc, 0, 0xff, CharW);\n</code></pre>\n\n<p>When the font is changed, the kerning-table must be built:</p>\n\n<pre><code>KERNINGPAIR *Kern;  // pairs of chars and the (usually negative) additional gap between them\nint KernCnt;        // number of same\nKERNINGPAIR *CharK[256];// ptr to first kerning-pair for each char\n\n    if(!Kern)\n        free(Kern);\n    KernCnt = GetKerningPairs(hdc, -1, 0);\n    Kern = malloc(KernCnt * sizeof(*Kern));\n    GetKerningPairs(hdc, KernCnt, Kern);\n    {\n        int i;\n        for(i = 0; i &lt; KernCnt; ++i) {\n            KERNINGPAIR *k = Kern+i;\n            if(k-&gt;wFirst &lt; 0x100) {\n                KERNINGPAIR **k2 = CharK + k-&gt;wFirst;\n                if(!*k2)\n                    *k2 = k;\n            }\n        }\n    }\n</code></pre>\n\n<p>To play safe, the kerning table \"Kern\" should be sorted by (wFirst, wSecond), but it appears to be clustered by wFirst and therefore my code works without a qsort.</p>\n\n<p>We can therefore calculate the pixel-width of any substring as follows:</p>\n\n<pre><code>int pixelWidth(char *s, int l)\n{\n    int x = 0;\n    int i;\n    for(i = 0; i &lt; l; ++i) {\n        char c = s[i];\n        ABC *w = CharW+c;\n        int wk = 0;\n        if(i &gt; 0) {\n            char b = s[i-1];\n            KERNINGPAIR *k = CharK[b];\n            if(k)\n            for(; k &lt; Kern+KernCnt  &amp;&amp;  k-&gt;wFirst == b; ++k)\n            if(k-&gt;wSecond == c)\n                {wk = k-&gt;iKernAmount; break;}\n        }\n        x += wk + w-&gt;abcA + (w-&gt;abcB) + w-&gt;abcC;\n    }\n    return x;\n}\n</code></pre>\n\n<p>This has been tested and agrees with the x-coordinate returned by DrawText when the maintain-current-coordinates flag is set:</p>\n\n<pre><code>    SetTextAlign(hdc,TA_UPDATECP)\n</code></pre>\n\n<p>It is therefore straightfoward to find the substring-length that matches a given pixel-width.</p>\n\n<p>However, a simpler solution is provided by ExtTextOut:</p>\n\n<pre><code>INT W[512];     // maximum string-length\n\nvoid textOut(HDC hdc, int x, int y, char *s, int l)\n{\n    GCP_RESULTS g={0};\n    g.lStructSize = sizeof(g);\n    g.lpDx = W;\n    g.nGlyphs = sizeof(W)/sizeof(*W);\n    GetCharacterPlacement(hdc, s, l, sizeof(W), &amp;g, GCP_USEKERNING);\n    ExtTextOut(hdc, x, y, 0, 0, s, l, g.lpDx);\n}\n</code></pre>\n\n<p>The MSDN function GetCharacterPlacement() returns an array with the actual pixel-width for each character in the string s.   It replaces my lookup-tables CharW, Kern, CharK above.  According to Microsoft, it has been superseded by Uniscribe functions, though it still works fine for a European language like English.</p>\n"}], "owner": {"reputation": 11, "user_id": 6672543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d33f57ffb240906eccf07b1297bf8faa?s=128&d=identicon&r=PG&f=1", "display_name": "Lee H", "link": "https://stackoverflow.com/users/6672543/lee-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 374, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1470692189, "creation_date": 1470230475, "question_id": 38744871, "link": "https://stackoverflow.com/questions/38744871/how-to-convert-cursor-position-to-text-position-in-visual-c", "title": "How to convert cursor-position to text-position in Visual C?", "body": "<p>Suppose I write a line of text in a variable-width font to a window with TextOut, and allow the user to click on any letter.  Then how do I find out which part of the text he has clicked on?  In other words, how do I convert the cursor-coordinates of his click to a string-offset?</p>\n\n<p>I guess it could be done by calling GetTextExtentPoint32 on various string-truncations until I hit the right one, but surely there is a more efficient way.  Microsoft's Notepad program knows exactly how many pixels to move when I right-arrow across a line - but how?</p>\n"}, {"tags": ["c", "testing", "cryptography", "rsa", "pkcs#1"], "comments": [{"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 1, "creation_date": 1470233160, "post_id": 38744680, "comment_id": 64865587, "body": "You&#39;re using SHA-256 just as hash or as hash of MGF1 or both? Do you have any specific hash values that fail? What exactly goes wrong? Note that PSS is <i>non-deterministic</i> (i.e. randomized) so getting identical results requires a preset PRNG."}, {"owner": {"reputation": 11, "user_id": 6672453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce805dd5da05818ff36006d0e815ea90?s=128&d=identicon&r=PG&f=1", "display_name": "Nousheen Siddiqui", "link": "https://stackoverflow.com/users/6672453/nousheen-siddiqui"}, "reply_to_user": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1470299440, "post_id": 38744680, "comment_id": 64896296, "body": "@Maarten, I&#39;m using SHA-256 for both Hash as well as MGF1&#39;s hash. and in the test vector which I got the Seed value was there, so I&#39;m hard coding the Seed for testing purpose and not using PRNG. still I didn&#39;t got the expected result."}], "answers": [{"tags": [], "owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "is_accepted": false, "score": 1, "last_activity_date": 1470232726, "last_edit_date": 1470232726, "creation_date": 1470232008, "answer_id": 38745472, "question_id": 38744680, "link": "https://stackoverflow.com/questions/38744680/test-vector-for-pksc1v2-2-rsassa-pss-signature-scheme/38745472#38745472", "title": "Test vector for PKSC1V2.2 RSASSA-PSS signature scheme", "body": "<p>It is possible to take any other implementation and use step through or trace logging (printing to console) the intermediate values. You could also take the output of a known good implementation and reverse the modular exponentiation (raw encrypt with the public key) to get to the padding.</p>\n\n<p>The main thing is indeed the padding. For instance Bouncy Castle has a <code>org.bouncycastle.crypto.test.MGF1GeneratorTest</code> class to test MGF1. That should be easy enough to step through.</p>\n"}], "owner": {"reputation": 11, "user_id": 6672453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce805dd5da05818ff36006d0e815ea90?s=128&d=identicon&r=PG&f=1", "display_name": "Nousheen Siddiqui", "link": "https://stackoverflow.com/users/6672453/nousheen-siddiqui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1470232726, "creation_date": 1470229911, "question_id": 38744680, "link": "https://stackoverflow.com/questions/38744680/test-vector-for-pksc1v2-2-rsassa-pss-signature-scheme", "title": "Test vector for PKSC1V2.2 RSASSA-PSS signature scheme", "body": "<p>I'm working on PKSC1V2.2 RSASSA-PSS Signature Scheme. I got some standard test vector for the final results testing, but my results are not matching. \nTo check where my code is going wrong, I need some test vector with intermediate result.</p>\n\n<p>and I'm using RSA 2048 and SHA 256.</p>\n\n<p>please help ... if anyone has it or if you know where can I get it? also any other method to test it.</p>\n\n<p>Regards  </p>\n"}, {"tags": ["c", "memory-management", "file-io", "redis"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1470229564, "post_id": 38744378, "comment_id": 64862781, "body": "I&#39;m not sure you are right in avoiding looking into Redis source code. You&#39;ll learn a lot by glancing into it."}, {"owner": {"reputation": 19, "user_id": 4144912, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-RzbBU30GMY0/AAAAAAAAAAI/AAAAAAAAABM/O8M3jU4azfM/photo.jpg?sz=128", "display_name": "Arun Kaushik", "link": "https://stackoverflow.com/users/4144912/arun-kaushik"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1470229894, "post_id": 38744378, "comment_id": 64863053, "body": "I ll definitely look into the redis source code, how can I afford to avoid such piece of engineering. I just want to code it first by myself, then I can compare and learn from it."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1470230167, "post_id": 38744378, "comment_id": 64863259, "body": "But I&#39;m sure your learn more by working in the opposite order: study Redis source code, then code your own &quot;clone&quot;. Also, your question is OS specific. If on Linux, read <a href=\"http://advancedlinuxprogramming.com/\" rel=\"nofollow noreferrer\">advancedlinuxprogramming.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1470229306, "creation_date": 1470229306, "answer_id": 38744448, "question_id": 38744378, "link": "https://stackoverflow.com/questions/38744378/c-writing-reading-memory-snapshot-to-from-disk/38744448#38744448", "title": "C writing/reading memory snapshot to/from Disk", "body": "<p>See <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fwrite.html\" rel=\"nofollow\">fwrite</a>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nsize_t fwrite(const void *restrict ptr, size_t size, size_t nitems,\n       FILE *restrict stream);\n</code></pre>\n\n<blockquote>\n  <p>The <code>fwrite()</code> function shall write, from the array pointed to by <code>ptr</code>, up to <code>nitems</code> elements whose size is specified by size, to the stream pointed to by stream. For each object, size calls shall be made to the <code>fputc()</code> function, taking the values (in order) from an array of unsigned char exactly overlaying the object. The file-position indicator for the stream (if defined) shall be advanced by the number of bytes successfully written. If an error occurs, the resulting value of the file-position indicator for the stream is unspecified.</p>\n</blockquote>\n\n<p>The corresponding function for reads is <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fread.html\" rel=\"nofollow\">fread</a>.</p>\n\n<p>If POSIX is the only requirement, use <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/write.html\" rel=\"nofollow\">write</a>:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n\nssize_t pwrite(int fildes, const void *buf, size_t nbyte,\n       off_t offset);\nssize_t write(int fildes, const void *buf, size_t nbyte);\n</code></pre>\n\n<blockquote>\n  <p>The <code>write()</code> function shall attempt to write <code>nbyte</code> bytes from the buffer pointed to by <code>buf</code> to the file associated with the open file descriptor, <code>fildes</code>.</p>\n</blockquote>\n\n<p>The corresponding function for reads is <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/read.html\" rel=\"nofollow\">read</a>.</p>\n"}], "owner": {"reputation": 19, "user_id": 4144912, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-RzbBU30GMY0/AAAAAAAAAAI/AAAAAAAAABM/O8M3jU4azfM/photo.jpg?sz=128", "display_name": "Arun Kaushik", "link": "https://stackoverflow.com/users/4144912/arun-kaushik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470229306, "creation_date": 1470229115, "question_id": 38744378, "link": "https://stackoverflow.com/questions/38744378/c-writing-reading-memory-snapshot-to-from-disk", "title": "C writing/reading memory snapshot to/from Disk", "body": "<p>I am implementing my own <a href=\"http://redis.io/\" rel=\"nofollow\">Redis</a> in C. I have designed bitmap by allocating sufficient enough memory to hold <code>n</code> unsigned longs (say words) and then using word offset and bit offset to set/clear a bit at a position <code>pos</code></p>\n\n<pre><code>word_offset = pos / BITS_PER_WORD;\nbit_offset = pos % BITS_PER_WORD;\n</code></pre>\n\n<p>Next step is to persist this bitmap by writing it to disk, that can be read back again to restore the bitmap.</p>\n\n<p>As a first and naive approach, I tried to read memory word by word and write this unsigned long to a file. It works but looks ugly, works slow and feels dumb as a bitmap can grow upto 512mb in size.</p>\n\n<p>Moreover, I have to store multiple such bitmaps to a single file.</p>\n\n<p>How can I design an efficient approach to save my data structures to disk. Since it is a learning project, I am avoiding peeking into Redis source code.</p>\n"}, {"tags": ["c", "mpi", "openmp", "benchmarking", "memory-bandwidth"], "comments": [{"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1519051443, "post_id": 38744246, "comment_id": 84740534, "body": "Can you clarify what you mean by &quot;node&quot; ? NUMA node (e.g. socket) ? Host (that might have several sockets) ?"}], "answers": [{"comments": [{"owner": {"reputation": 1523, "user_id": 5946384, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ebdc50d90bcbb9b36c901545d2a9f637?s=128&d=identicon&r=PG&f=1", "display_name": "Matrix", "link": "https://stackoverflow.com/users/5946384/matrix"}, "edited": false, "score": 0, "creation_date": 1470318603, "post_id": 38747296, "comment_id": 64909628, "body": "Thank you for your reply. Actually, I still could not get how I can specify the nodes...I&#39;m using &quot;Stream Benchmark&quot; which gives me a memory-bandwidth on the nodes. I mean if I use two node(16 threads/cores per node), it gives me a memory bandwidth that measured on 32 cores. I want to get the memory bandwidth of each node separately (like one memorybw for node1, the other for node2). How is it possible? sorry I am quite new in the parallel programming..."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 1523, "user_id": 5946384, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ebdc50d90bcbb9b36c901545d2a9f637?s=128&d=identicon&r=PG&f=1", "display_name": "Matrix", "link": "https://stackoverflow.com/users/5946384/matrix"}, "edited": false, "score": 0, "creation_date": 1470323910, "post_id": 38747296, "comment_id": 64914050, "body": "@Sarah: Oh, you didn&#39;t say that you were using an out-of-the-box benchmark that totals things up.  It looked from your code like you were building your own from scratch, which is what I was answering.  It sounds like you need to modify the code of the benchmark to record things before they&#39;re reduced to a single sum.  That&#39;s a very different question."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 1523, "user_id": 5946384, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ebdc50d90bcbb9b36c901545d2a9f637?s=128&d=identicon&r=PG&f=1", "display_name": "Matrix", "link": "https://stackoverflow.com/users/5946384/matrix"}, "edited": false, "score": 0, "creation_date": 1470324013, "post_id": 38747296, "comment_id": 64914142, "body": "Of course, you just just run separate single-node jobs if you aren&#39;t interested in the bandwidth between nodes."}, {"owner": {"reputation": 1523, "user_id": 5946384, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ebdc50d90bcbb9b36c901545d2a9f637?s=128&d=identicon&r=PG&f=1", "display_name": "Matrix", "link": "https://stackoverflow.com/users/5946384/matrix"}, "edited": false, "score": 0, "creation_date": 1470324495, "post_id": 38747296, "comment_id": 64914504, "body": "well I run my batch script using more than one node, I do NOT want to measure the memory-bw between the node. I need to measure them on EACH NODE separately  (like first on node 1, then on node2,...). I have to use only one job script for this aim. So it needs to modify the code as you told. But I have no clue how..."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 1523, "user_id": 5946384, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ebdc50d90bcbb9b36c901545d2a9f637?s=128&d=identicon&r=PG&f=1", "display_name": "Matrix", "link": "https://stackoverflow.com/users/5946384/matrix"}, "edited": false, "score": 0, "creation_date": 1470325149, "post_id": 38747296, "comment_id": 64914963, "body": "@Sarah: Why can&#39;t you run a separate job for each node?  Is there some kind of quota or something on a shared cluster you&#39;re using?  It seems like you could get exactly what you wanted from a shell script that submitted multiple one-node jobs and combined the results."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 1, "last_activity_date": 1518888725, "last_edit_date": 1518888725, "creation_date": 1470236687, "answer_id": 38747296, "question_id": 38744246, "link": "https://stackoverflow.com/questions/38744246/how-to-measure-a-mpi-benchmark-per-node-using-the-source-code/38747296#38747296", "title": "How to measure a MPI benchmark per node using the source code?", "body": "<p>It's been a while since I used MPI, so I'm not really answering the \"how to write the code\" question.  I'm focusing more on the benchmark methodology side of things, so you hopefully can design it to actually measure something useful.  Benchmarking is hard; it's easy to get a number, hard to get a <em>meaningful</em> number that measures what you wanted to measure.</p>\n\n<hr>\n\n<p>Instead of specifying which nodes you get, you could just query which nodes you <em>got</em>.  (i.e. detect the case where multiple processes of your MPI job ended up on the same physical host, competing for memory bandwidth.)</p>\n\n<p>You could also randomize how many threads you run on each node, or something, to see how bandwidth scales with number of threads doing a memcpy, memset, or something read-only like a reduction or memcmp.</p>\n\n<hr>\n\n<p>One thread per machine won't come close to saturating memory bandwidth, on recent Intel Xeons, except maybe for low-core-count CPUs that are similar to desktop CPUs.  (And then only if your code compiles to efficient vectorized asm).  L3 / memory latency is too high for the limited memory parallelism of a single core to saturate throughput.  (See <a href=\"https://stackoverflow.com/questions/39260020/why-is-skylake-so-much-better-than-broadwell-e-for-single-threaded-memory-throug\">Why is Skylake so much better than Broadwell-E for single-threaded memory throughput?</a>, and \"latency-bound platforms\" in <a href=\"https://stackoverflow.com/questions/43343231/enhanced-rep-movsb-for-memcpy\">Enhanced REP MOVSB for memcpy</a>.)</p>\n\n<p>It can take 4 to 8 threads running bandwidth-bottlenecked code (like a STREAMS benchmark) to saturate the memory bandwidth of a many-core Xeon.  More threads than that will have about the same total, unless you test with quite small arrays so the private per-core L2 cache comes into play.  (256kB on modern Intel CPUs, vs. the large shared ~2MB per core L3).  Update: 1 MiB per core private L2 on Skylake-AVX512.</p>\n\n<p>With dual-socket nodes, NUMA is a factor.  If your threads end up using memory that all maps to the physical memory controllers on one socket, leaving the other socket's memory controllers idle, you'll only see half the machine's bandwidth.  This might be a good way to test that your kernel's NUMA-aware physical memory allocation does a good job for your actual workload.  (If your bandwidth microbenchmark is anything like your real workloads)</p>\n\n<p>Keep in mind that memory bandwidth is a shared resource for all cores on a node, so for repeatable results you're going to want to avoid competing with other loads.  Even something with a small memory footprint can use a lot of bandwidth, if its working set doesn't fit in private per-core L2 caches, so don't assume that another job won't compete for memory bandwidth just because it only uses a couple hundred MB.</p>\n"}], "owner": {"reputation": 1523, "user_id": 5946384, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ebdc50d90bcbb9b36c901545d2a9f637?s=128&d=identicon&r=PG&f=1", "display_name": "Matrix", "link": "https://stackoverflow.com/users/5946384/matrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1518888725, "creation_date": 1470228754, "last_edit_date": 1470324640, "question_id": 38744246, "link": "https://stackoverflow.com/questions/38744246/how-to-measure-a-mpi-benchmark-per-node-using-the-source-code", "title": "How to measure a MPI benchmark per node using the source code?", "body": "<p>I'm wondering how it is possible to measure memory bandwidth(Stream benchmark) PER NODE. This program that I have, measures it on one node only, the number of processes and threads would be taken as followed: </p>\n\n<pre><code>MPI_Comm_size(MPI_COMM_WORLD, &amp;numranks);\nMPI_Comm_rank(MPI_COMM_WORLD, &amp;myrank);\nomp_set_dynamic(0);    \nomp_set_num_threads(4);\n#pragma omp parallel\n{\n}\n</code></pre>\n\n<p>It is actually a mix of mpi and openmp. Is there any way to specify the node and do the measurements for each node? (suppose I have 4 nodes) I would like to do it using the source code NOT the slurm-batch script.\nI can specify the first core of each node using process-ID but how would it run the measurements on the entire node each time(include any number of cores)?</p>\n\n<p>Any suggestion would be appreciate. </p>\n"}, {"tags": ["c", "gcc", "locking", "atomic"], "answers": [{"tags": [], "owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "is_accepted": false, "score": 3, "last_activity_date": 1470233800, "last_edit_date": 1495535319, "creation_date": 1470233800, "answer_id": 38746177, "question_id": 38743734, "link": "https://stackoverflow.com/questions/38743734/atomic-test-and-set-vs-atomic-compare-exchange-n/38746177#38746177", "title": "__atomic_test_and_set vs __atomic_compare_exchange_n", "body": "<p>You are better off using the API provided by C11's <code>&lt;stdatomic.h&gt;</code>. The <a href=\"https://gcc.gnu.org/onlinedocs/gcc/_005f_005fatomic-Builtins.html\" rel=\"nofollow noreferrer\"><code>__atomic</code></a> builtins are just how GCC implements them under the hood, using standard API makes your code more portable.</p>\n\n<ul>\n<li><p><code>__atomic_test_and_set</code> is what GCC translates <a href=\"http://en.cppreference.com/w/c/atomic/atomic_flag_test_and_set\" rel=\"nofollow noreferrer\"><code>atomic_flag_test_and_set</code></a> to.</p></li>\n<li><p><code>__atomic_compare_exchange_n</code> is <a href=\"http://en.cppreference.com/w/c/atomic/atomic_compare_exchange\" rel=\"nofollow noreferrer\"><code>atomic_compare_exchange</code></a>.</p></li>\n</ul>\n\n<p>gcc6 on AMD64 with <code>-O2</code> compiles</p>\n\n<pre><code>if (atomic_flag_test_and_set(&amp;atomic_flag_var) == 0) {\n    printf(\"Hello World\\n\");\n}\n\nif (atomic_compare_exchange_strong(&amp;atomic_var, &amp;clear, 1)) {\n    printf(\"Hello World\\n\");\n}\n</code></pre>\n\n<p>to a <code>xchg</code> followed by a <code>test</code> in the first case. The other one expectedly to a <code>cmpxchg</code>. It's unlikely, that you'll experience any noticeable difference between the two. See this answer: <a href=\"https://stackoverflow.com/questions/5339769/relative-performance-of-swap-vs-compare-and-swap-locks-on-x86\" title=\"Relative performance of swap vs compare-and-swap locks on x86\">Relative performance of swap vs compare-and-swap locks on x86</a>.</p>\n\n<p>So, which one to use? If you need an atomic flag, use <a href=\"http://en.cppreference.com/w/c/atomic/atomic_flag\" rel=\"nofollow noreferrer\"><code>atomic_flag</code></a>. The standard guarantees that this will be lock-free. No such guarantee exists for any of the other <code>_Atomic</code> types.</p>\n"}], "owner": {"reputation": 21, "user_id": 6672353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c964f0f2dc98b265e0f16d1339ece06b?s=128&d=identicon&r=PG", "display_name": "user6672353", "link": "https://stackoverflow.com/users/6672353/user6672353"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3235, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1470234227, "creation_date": 1470227418, "last_edit_date": 1470234227, "question_id": 38743734, "link": "https://stackoverflow.com/questions/38743734/atomic-test-and-set-vs-atomic-compare-exchange-n", "title": "__atomic_test_and_set vs __atomic_compare_exchange_n", "body": "<p>I suppose I can use <code>__atomic_compare_exchange_n</code> in place of <code>__atomic_test_and_set</code>.</p>\n\n<p>Is there any performance benefit of one over other for using these builtins for boolean values?</p>\n\n<p>Any input other than number of arguments is appreciated.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1470227378, "post_id": 38743603, "comment_id": 64861026, "body": "What about adding a call to <code>printf</code> in alfabet?"}, {"owner": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "edited": false, "score": 6, "creation_date": 1470228602, "post_id": 38743603, "comment_id": 64862025, "body": "Instead of using <code>97</code> and <code>122</code>, it would be clearer to use <code>&#39;a&#39;</code> and <code>&#39;z&#39;</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 4, "creation_date": 1470228611, "post_id": 38743603, "comment_id": 64862036, "body": "I don&#39;t see any characters/letters. Only integers. Don&#39;t use magic numbers!"}], "answers": [{"comments": [{"owner": {"reputation": 684, "user_id": 4970667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FWd3x.jpg?s=128&g=1", "display_name": "Quentin", "link": "https://stackoverflow.com/users/4970667/quentin"}, "edited": false, "score": 1, "creation_date": 1470228086, "post_id": 38743808, "comment_id": 64861570, "body": "You have got an error here, your program doesn&#39;t work as expected, the alphabet should be displayed starting from letter &#39;a&#39;. To create the expected behavior, you should not do the recursive call before the printing"}, {"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "reply_to_user": {"reputation": 684, "user_id": 4970667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FWd3x.jpg?s=128&g=1", "display_name": "Quentin", "link": "https://stackoverflow.com/users/4970667/quentin"}, "edited": false, "score": 0, "creation_date": 1470228234, "post_id": 38743808, "comment_id": 64861692, "body": "I was unsure of the meaning of &quot;ascending order&quot; in this context ;)"}], "tags": [], "owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "is_accepted": false, "score": 1, "last_activity_date": 1470228646, "last_edit_date": 1470228646, "creation_date": 1470227598, "answer_id": 38743808, "question_id": 38743603, "link": "https://stackoverflow.com/questions/38743603/recursive-way-of-display-alphabet-in-c/38743808#38743808", "title": "Recursive way of display alphabet in c", "body": "<p>Something like that:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid alfabet(char i) {\n   if(i &lt; 'z')\n   {\n       alfabet(i+1);\n   }\n   printf(\"%c\", i);\n}\n\nint  main() {\n   char i = 'a';\n   alfabet(i);\n   return 0;\n}\n</code></pre>\n\n<p>to print zyxwvutsrqponmlkjihgfedcba. Or:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid alfabet(char i) {\n   printf(\"%c\", i);\n   if(i &lt; 'z')\n   {\n       alfabet(i+1);\n   }\n}\n\nint  main() {\n   char i = 'a';\n   alfabet(i);\n   return 0;\n}\n</code></pre>\n\n<p>to print abcdefghijklmnopqrstuvwxyz</p>\n"}, {"comments": [{"owner": {"reputation": 1248, "user_id": 1791872, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6nnz7.png?s=128&g=1", "display_name": "flau", "link": "https://stackoverflow.com/users/1791872/flau"}, "edited": false, "score": 2, "creation_date": 1470228393, "post_id": 38743920, "comment_id": 64861815, "body": "Could replace 122 with &#39;z&#39; perhaps"}, {"owner": {"reputation": 553, "user_id": 6237375, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a7d87bb01eda55acc69683a8b5eda170?s=128&d=identicon&r=PG&f=1", "display_name": "DomainFlag", "link": "https://stackoverflow.com/users/6237375/domainflag"}, "edited": false, "score": 0, "creation_date": 1470259606, "post_id": 38743920, "comment_id": 64881629, "body": "Thank you very much"}], "tags": [], "owner": {"reputation": 684, "user_id": 4970667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FWd3x.jpg?s=128&g=1", "display_name": "Quentin", "link": "https://stackoverflow.com/users/4970667/quentin"}, "is_accepted": true, "score": 6, "last_activity_date": 1470228421, "last_edit_date": 1470228421, "creation_date": 1470227879, "answer_id": 38743920, "question_id": 38743603, "link": "https://stackoverflow.com/questions/38743603/recursive-way-of-display-alphabet-in-c/38743920#38743920", "title": "Recursive way of display alphabet in c", "body": "<p>Here, you won't print anything really interesting. In fact, your application will crash because <code>printf()</code> require at least a <code>char *</code> parameter (a string).</p>\n\n<p>Your <code>alfabet()</code> function seems not so bad, but you should print the letter in it :</p>\n\n<pre><code>int alfabet(unsigned int i) \n{\n\n    if (i &gt; 'z') {\n        // Here is the stop condition. \n        // If the value is higher than 122 ('z' character), we stop recursivity)\n        return; \n    }\n\n    printf(\"%c \", i);\n\n    // Otherwise, let's call this function with another character\n    return alfabet(i+1);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 249, "user_id": 5217529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xNYab.jpg?s=128&g=1", "display_name": "chex", "link": "https://stackoverflow.com/users/5217529/chex"}, "is_accepted": false, "score": 0, "last_activity_date": 1476263833, "last_edit_date": 1476263833, "creation_date": 1470228137, "answer_id": 38744018, "question_id": 38743603, "link": "https://stackoverflow.com/questions/38743603/recursive-way-of-display-alphabet-in-c/38744018#38744018", "title": "Recursive way of display alphabet in c", "body": "<pre><code>int  main() {\n    int i = 97;\n    printf(\"%c\",alfabet(i));\n    return 0;\n}\n</code></pre>\n\n<p>You Have to provide format specifier in printf (i.e. %c for character, %d for integer) Just check <code>man printf</code> in terminal.</p>\n\n<p>And <strong>for printing a to z</strong> you can use for loop suggested by @Michel Jord, for printing in one line just put space in place of <code>\\n</code></p>\n"}, {"comments": [{"owner": {"reputation": 1248, "user_id": 1791872, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6nnz7.png?s=128&g=1", "display_name": "flau", "link": "https://stackoverflow.com/users/1791872/flau"}, "edited": false, "score": 0, "creation_date": 1470229179, "post_id": 38744322, "comment_id": 64862486, "body": "In what way is this different from the other answers?"}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "reply_to_user": {"reputation": 1248, "user_id": 1791872, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6nnz7.png?s=128&g=1", "display_name": "flau", "link": "https://stackoverflow.com/users/1791872/flau"}, "edited": false, "score": 0, "creation_date": 1470229243, "post_id": 38744322, "comment_id": 64862530, "body": "Do only what&#39;s necessary. Only 1 (implicit) <i>return</i> for instance. I see there is another close answer - but it was in error at the time I wrote mine."}], "tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": false, "score": 2, "last_activity_date": 1470228966, "creation_date": 1470228966, "answer_id": 38744322, "question_id": 38743603, "link": "https://stackoverflow.com/questions/38743603/recursive-way-of-display-alphabet-in-c/38744322#38744322", "title": "Recursive way of display alphabet in c", "body": "<p>Target simplicity</p>\n\n<pre><code>void alfabet(int c) {\n   printf(\"%c\", c);\n   if (c &lt; 'z') alfabet(c+1);\n}\n</code></pre>\n\n<p>called from <em>main</em> as</p>\n\n<pre><code>alfabet('a');\n</code></pre>\n\n<p>You may add a <code>printf(\"\\n\");</code></p>\n\n<ul>\n<li>the function prints the character given as parameter</li>\n<li>you only call recursively the function with the next character to be printed if necessary, i.e. if the current character is below <em>z</em>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 74, "user_id": 6672818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Vx9o.png?s=128&g=1", "display_name": "Shubham Indrawat", "link": "https://stackoverflow.com/users/6672818/shubham-indrawat"}, "is_accepted": false, "score": 1, "last_activity_date": 1470235451, "creation_date": 1470235451, "answer_id": 38746848, "question_id": 38743603, "link": "https://stackoverflow.com/questions/38743603/recursive-way-of-display-alphabet-in-c/38746848#38746848", "title": "Recursive way of display alphabet in c", "body": "<p>As you are new in this language, the basic thing to know is that each and every character on the keyboard has its own ASCII value ranging from 000 to 127 (i.e. total 128).</p>\n\n<p>Now if you want to print a to z in a single line, the ASCII value for 'a' is 97 and that for 'z' is 122.</p>\n\n<p>So, for printing this on screen you need to learn the basic <strong><em>for loop</em></strong> structure.The syntax for basic for loop is as follows :-</p>\n\n<pre><code>for(expr1;expr2;expr3)\n{\n    Body of the loop;\n}\n</code></pre>\n\n<p>Here, <strong><em>expr1</em></strong> refers to the <strong><em>initial value</em></strong> of the variable, <strong><em>expr2</em></strong> refers to the <strong><em>exit condition</em></strong> of the loop and <strong><em>expr3</em></strong> refers to the <strong><em>increment</em></strong> or <strong><em>decrement value</em></strong>.</p>\n\n<p>So, the code to print a to z is as follows :-</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\nvoid main()\n{\n    clrscr();\n    print_alpha();\n    getch();\n}\nvoid print_alpha()\n{\n    int i;\n    for(i=97;i&lt;+122;i++)\n    {\n       printf(\"%c\",i);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11365324, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/a106c3434f9d5de32b3d845a9ce1c267?s=128&d=identicon&r=PG", "display_name": "user11365324", "link": "https://stackoverflow.com/users/11365324/user11365324"}, "is_accepted": false, "score": 0, "last_activity_date": 1555389961, "last_edit_date": 1555389961, "creation_date": 1555361199, "answer_id": 55697008, "question_id": 38743603, "link": "https://stackoverflow.com/questions/38743603/recursive-way-of-display-alphabet-in-c/55697008#55697008", "title": "Recursive way of display alphabet in c", "body": "<pre><code>#include &lt;stdio.h&gt;\nvoid print_alphabets(char i) {\n  if(i&gt;='a' &amp;&amp; i&lt;='z')\n  {\n    print_alphabets(i+1);\n    printf(\"%c \", i);\n  }\n}\n\nint main() { \n  char i;\n  scanf(\"%c\",&amp;i);\n  print_alphabets (i);\n\n  return 0;\n} \n</code></pre>\n"}], "owner": {"reputation": 553, "user_id": 6237375, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a7d87bb01eda55acc69683a8b5eda170?s=128&d=identicon&r=PG&f=1", "display_name": "DomainFlag", "link": "https://stackoverflow.com/users/6237375/domainflag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4707, "favorite_count": 0, "accepted_answer_id": 38743920, "answer_count": 6, "score": 0, "last_activity_date": 1555389961, "creation_date": 1470227102, "last_edit_date": 1470229294, "question_id": 38743603, "link": "https://stackoverflow.com/questions/38743603/recursive-way-of-display-alphabet-in-c", "title": "Recursive way of display alphabet in c", "body": "<p>I am quite newbie in c, so I just starting off with some code, experimenting some stuff, right now I am stuck with this problem  in C, creating a function that displays the alphabet in lowercase, on a single line, by ascending order, starting from the letter \u2019a\u2019. </p>\n\n<p><strong>This is where I am stuck:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint alfabet(unsigned int i) {    \n   if(i &lt;= 122) {\n       char litera = i;\n       return litera;\n   }\n   return alfabet(i+1);\n}\n\nint main() {\n    int i = 97;\n    printf(alfabet(i));\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arm", "embedded", "signal-processing", "cmsis"], "comments": [{"owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "edited": false, "score": 1, "creation_date": 1470236679, "post_id": 38743589, "comment_id": 64868366, "body": "Post the exact text of the error message that you&#39;re getting."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470265890, "post_id": 38743589, "comment_id": 64883908, "body": "What have you done to resolve the problem yourself (except for asking others)? Did you even look into the headers?"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 3, "creation_date": 1470328772, "post_id": 38743589, "comment_id": 64917451, "body": "The code you have posted uses <code>arm_cfft_sR_f32_len4096</code>.  You should post teh code that exhibits the problem you are asking about, not teh code that works!  How are we supposed to see a problem in code that has no problem?!"}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 3193780, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/554100a69ea89059e5a8aa0b571b2302?s=128&d=identicon&r=PG&f=1", "display_name": "Pethead", "link": "https://stackoverflow.com/users/3193780/pethead"}, "edited": false, "score": 0, "creation_date": 1470234811, "post_id": 38745905, "comment_id": 64866834, "body": "Okay, where did you find that? On the version that is on github <a href=\"https://github.com/ARM-software/CMSIS/blob/master/CMSIS/Include/arm_const_structs.h\" rel=\"nofollow noreferrer\">github.com/ARM-software/CMSIS/blob/master/CMSIS/Include/&hellip;</a> the f32 one is extern as well"}, {"owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "reply_to_user": {"reputation": 171, "user_id": 3193780, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/554100a69ea89059e5a8aa0b571b2302?s=128&d=identicon&r=PG&f=1", "display_name": "Pethead", "link": "https://stackoverflow.com/users/3193780/pethead"}, "edited": false, "score": 0, "creation_date": 1470236172, "post_id": 38745905, "comment_id": 64867985, "body": "I found it simply by Googling for the file name.  Yes, all the declarations are <code>extern</code> in the <i>.h</i> file.  You need to link with the <i>.c</i> file in order to get the definitions."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1470274691, "post_id": 38745905, "comment_id": 64886906, "body": "@kkrambo : You have missed the point I think - he says that it works for <code>arm_cfft_sR_f32_len4096</code> which is also <code>extern</code>, so he must already be linking the definition for that at least.  Moreover the error is &quot;undeclared&quot; not &quot;undefined&quot; - that suggests that the <i>declaration</i> is not visible."}, {"owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1470310448, "post_id": 38745905, "comment_id": 64903631, "body": "@Clifford I understand what you&#39;re saying.  The copy of the .h file that I found contains the declaration and it&#39;s not enclosed within any #ifdefs.  So either he has a different version of the .h file, or he&#39;s not really including the .h file, or he misspelled the variable name, or he misreported the error message.  Given what&#39;s written in the question, this last possibility seemed most plausible to me so that&#39;s the answer I went with."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1470328631, "post_id": 38745905, "comment_id": 64917359, "body": "Agreed - and I note that your request for the verbatim error message has not yet been addressed.  Who knows why this essentially incomplete question has been up-voted?!"}], "tags": [], "owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "is_accepted": false, "score": 1, "last_activity_date": 1470233104, "creation_date": 1470233104, "answer_id": 38745905, "question_id": 38743589, "link": "https://stackoverflow.com/questions/38743589/arm-cfft-sr-q31-len4096-undeclared/38745905#38745905", "title": "arm_cfft_sR_q31_len4096 undeclared", "body": "<p>I found a copy of arm_const_structs.h online.  It includes the following line:</p>\n\n<pre><code>extern const arm_cfft_instance_q31 arm_cfft_sR_q31_len4096;\n</code></pre>\n\n<p>The <code>extern</code> keyword means that this line is a <em>declaration</em> of <code>arm_cfft_SR_q31_len4096</code>, not a <em>definition</em>.  The variable must also be defined somewhere else in your code.</p>\n\n<p>I found the definition in arm_const_structs.c.</p>\n\n<pre><code>const arm_cfft_instance_q31 arm_cfft_sR_q31_len4096 = {\n    4096, twiddleCoef_4096_q31, armBitRevIndexTable_fixed_4096, ARMBITREVINDEXTABLE_FIXED_4096_TABLE_LENGTH\n};\n</code></pre>\n\n<p>Make sure you have included arm_const_structs.c in your project so that it compiles and links with your program.</p>\n"}], "owner": {"reputation": 171, "user_id": 3193780, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/554100a69ea89059e5a8aa0b571b2302?s=128&d=identicon&r=PG&f=1", "display_name": "Pethead", "link": "https://stackoverflow.com/users/3193780/pethead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470233104, "creation_date": 1470227061, "last_edit_date": 1470229042, "question_id": 38743589, "link": "https://stackoverflow.com/questions/38743589/arm-cfft-sr-q31-len4096-undeclared", "title": "arm_cfft_sR_q31_len4096 undeclared", "body": "<p>I am doing some FFT calculations on a STM32F407 and I want to compare the different FFT functions that is available in the CMSIS DSP library. When I am using the f32 CFFT functions it works as one would expect but when I try to use the q31/q15 functions I get an error saying \"arm_cfft_sR_q31_len4096\" or arm_cfft_sR_q15_len4096 undeclared when I call their respective cfft functions. I have included arm_const_structs.h where it should be defined but apparently it isn't? It works with arm_cfft_sR_f32_len4096 for the f32 version of the functions so what might be the problem?</p>\n\n<p>Here is how the f32 version of my fft calculations look:</p>\n\n<pre><code>#include \"arm_const_structs.h\"\n\nfloat32_t fft_data[FFT_SIZE * 2];\n\nuint16_t util_calculate_fft_value(uint16_t *buffer, uint32_t len, uint32_t fft_freq, uint32_t fft_freq2) \n{\n  uint16_t i;\n  float32_t maxValue;         // Max FFT value is stored here\n  uint32_t maxIndex;          // Index in Output array where max value is\n\n  tmStartMeasurement(&amp;time);  // Record clock cycles\n\n  // Ensure in buffer is not longer than FFT buffer\n  if (len &gt; FFT_SIZE)\n    len = FFT_SIZE;\n\n  // Convert buffer uint16 to fft input float32\n  for (i = 0; i &lt; len ; i++) \n  {\n    fft_data[i*2] = (float32_t)buffer[i] / 2048.0 - 1.0; // Real part\n    fft_data[i*2 + 1] = 0; // Imaginary part      \n  }\n\n  // Process the data through the CFFT module intFlag = 0, doBitReverse = 1\n  arm_cfft_f32(&amp;arm_cfft_sR_f32_len4096, fft_data, 0, 1);\n  // Process the data through the Complex Magniture Module for calculating the magnitude at each bin\n  arm_cmplx_mag_f32(fft_data, fft_data, FFT_SIZE / 2);\n  // Find maxValue as max in fft_data\n  arm_max_f32(fft_data, FFT_SIZE, &amp;maxValue, &amp;maxIndex);\n\n  if (fft_freq == 0) \n  { // Find maxValue as max in fft data\n    arm_max_f32(fft_data, FFT_SIZE, &amp;maxValue, &amp;maxIndex);\n  } \n  else \n  { // Grab maxValue from fft data at freq position\n    arm_max_f32(&amp;fft_data[fft_freq * FFT_SIZE / ADC_SAMP_SPEED - 1], 3, &amp;maxValue, &amp;maxIndex);\n\n    if (fft_freq2 != 0) \n    {\n      // Grab maxValue from fft data at freq2 position\n      float32_t maxValue2;                // Max FFT value is stored here\n      uint32_t maxIndex2;                // Index in Output array where max value is\n      arm_max_f32(&amp;fft_data[fft_freq * FFT_SIZE / ADC_SAMP_SPEED - 1], 3, &amp;maxValue2, &amp;maxIndex2);\n      maxValue = (maxValue + maxValue2) / 2.0;\n    }\n  }\n\n  tmStopMeasurement(&amp;time); // Get number of clock cycles\n\n  // Convert output back to uint16 for plotting\n  for (i = 0; i &lt; len / 2; i++) \n  {\n    buffer[i] = (uint16_t)(fft_data[i] * 10.0);\n  }\n  // Zero the rest of the buffer\n  for (i = len / 2; i &lt; len; i++) \n  {\n    buffer[i] = 0;\n  }\n\n  LOG_INFO(\"FFT number of cycles: %i\\n\", time.worst);\n\n  return ((uint16_t)(maxValue * 10.0));\n}\n</code></pre>\n"}, {"tags": ["c", "debugging", "gdb"], "comments": [{"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1470240865, "post_id": 38743357, "comment_id": 64871344, "body": "The only reason the child would ever get to the <code>Recup</code> statement is if the <code>execl</code> call fails. Can you store the return value from <code>execl</code> in a variable and print it?"}, {"owner": {"reputation": 71, "user_id": 5909843, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f8ea61d85e0fadd5e2d8e0f9877ffae8?s=128&d=identicon&r=PG&f=1", "display_name": "Manov", "link": "https://stackoverflow.com/users/5909843/manov"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1470378779, "post_id": 38743357, "comment_id": 64935842, "body": "You are right ! My initial program was lauched directly by the exec folder and I should launch it from the parent one for that works ! Thanks"}], "owner": {"reputation": 71, "user_id": 5909843, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f8ea61d85e0fadd5e2d8e0f9877ffae8?s=128&d=identicon&r=PG&f=1", "display_name": "Manov", "link": "https://stackoverflow.com/users/5909843/manov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 610, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1470226428, "creation_date": 1470226428, "last_edit_date": 1495540859, "question_id": 38743357, "link": "https://stackoverflow.com/questions/38743357/set-a-gdb-breakpoint-on-a-program-called-with-execl", "title": "Set a gdb breakpoint on a program called with execl", "body": "<p>I open a new thread cause I reply on an existing one who is doing exactly what I want... But I just can't optain the same result...</p>\n\n<p>Here is the topic : <a href=\"https://stackoverflow.com/questions/28789458/gdb-debugging-process-after-exec-call/38740857#38740857\">gdb debugging process after exec call</a></p>\n\n<p>I only want be able to debug an \"execled\" application with gdb.</p>\n\n<p>Here is what my C program looks like : </p>\n\n<pre><code>if( !fork() ) \n   execl(\"./exec/nuitretard\",\"nuitretard\",\"S\",\"1000\",\"000\",\"N\",ZZTOP);\nelse wait(&amp;status);\nRecup();\n</code></pre>\n\n<p>When I'm on the line :</p>\n\n<pre><code>97          if( !fork() )\n</code></pre>\n\n<p>I do in gdb : </p>\n\n<pre><code>(gdb) set follow-fork-mode child                                                \n(gdb) break main\nBreakpoint 2 at 0x40198c: main. (2 locations)                                   \n(gdb) n\n[New process 9034]\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n[Switching to Thread 0x7ffff7eb3780 (LWP 9034)]\n98        execl(\"./exec/nuitretard\",\"nuitretard\",\"S\",\"1000\",\"000\",\"N\",ZZTOP);\n</code></pre>\n\n<p>I put with my gdb \"break main\" command an breakpoint on all main function isn't it ? So if I press next line I should go in nuitretard's main no ? \nBut when I do, I got this : </p>\n\n<pre><code>(gdb) n\n100     Recup();\n</code></pre>\n\n<p>So I didn't stopped at my \"nuitretard\" program :/</p>\n\n<p>What have I not done correctly ? \nThanks for your help.</p>\n\n<p>Edit : I obviously compiled two programs with -g to debug. I'm on Linux ubuntu.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 1, "creation_date": 1470225960, "post_id": 38743120, "comment_id": 64859906, "body": "Compare the first and second on <a href=\"http://cdecl.org\" rel=\"nofollow noreferrer\">cdecl.org</a> and you will see the difference"}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 2, "last_activity_date": 1470225995, "creation_date": 1470225995, "answer_id": 38743199, "question_id": 38743120, "link": "https://stackoverflow.com/questions/38743120/different-uses-of-pointers-in-c/38743199#38743199", "title": "Different uses of pointers in C", "body": "<p><code>int (* a)[2];</code> declares <code>a</code> as <em>a pointer to an array of two <code>int</code></em> while <code>(int (*)[2]) a</code> casts <code>a</code> to <em>a pointer to an array of two <code>int</code></em>.</p>\n"}], "owner": {"reputation": 121, "user_id": 4793429, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b486c65903066c9c7af9bc6db127f0d1?s=128&d=identicon&r=PG&f=1", "display_name": "lala_12", "link": "https://stackoverflow.com/users/4793429/lala-12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 38743199, "answer_count": 1, "score": -1, "last_activity_date": 1470225995, "creation_date": 1470225795, "question_id": 38743120, "link": "https://stackoverflow.com/questions/38743120/different-uses-of-pointers-in-c", "title": "Different uses of pointers in C", "body": "<p>I know * indicates it is a pointer, but what's the difference between <code>int (* a)[2]</code> and <code>(int (*)[2]) a</code> in <code>C</code>?</p>\n"}, {"tags": ["c", "linux", "uart"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470224910, "post_id": 38742574, "comment_id": 64859137, "body": "<code>So, when I try to read more than 8 bytes, the message gets truncated to 8 bytes</code> The UART has a fixed-size recieve buffer(and flow control, if you want) . You should do your own buffering in your program."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1470225055, "post_id": 38742574, "comment_id": 64859247, "body": "Posted code shows no call to <code>int read_UART_(int uart_filestream, char** dest, int max_len)</code>, so no evidence that is called correctly."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1470225146, "post_id": 38742574, "comment_id": 64859322, "body": "Are you sure that data are sent in a whole chunk? Did you test the transmission with an oscilloscope? Side note: what is the <code>max_len</code> value passed to function?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1470225174, "post_id": 38742574, "comment_id": 64859347, "body": "2nd <code>if(indicator &lt; 0)</code> in <code>read_UART_()</code> serves no purpose."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470225250, "post_id": 38742574, "comment_id": 64859404, "body": "IIRC the raspberryPi has a 3-wire (emulated) uart, so there can be no hardware flow controll. (XON/XOFF might be possible, though)"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470225574, "post_id": 38742574, "comment_id": 64859638, "body": "BTW: the VTIME setting has to do with canonical mode (has to do with line-editing: user at a terminal). I suppose you want non-canonical mode."}, {"owner": {"reputation": 55, "user_id": 6672050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e24ee5914db70d27110927893be3e93?s=128&d=identicon&r=PG&f=1", "display_name": "NMilev", "link": "https://stackoverflow.com/users/6672050/nmilev"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470227159, "post_id": 38742574, "comment_id": 64860840, "body": "@wildplasser So, if I do a reading of, say, 20 bytes, I should have 3 subsequent calls to read()? I also do not want to wait a long time in a blocking call, this should be as fast as possible. I also think I found some pieces of code online which use VTIME with non canonical mode. Not even sure if I could use the canonical mode, I just need the bytes, unaltered."}, {"owner": {"reputation": 55, "user_id": 6672050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e24ee5914db70d27110927893be3e93?s=128&d=identicon&r=PG&f=1", "display_name": "NMilev", "link": "https://stackoverflow.com/users/6672050/nmilev"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1470227165, "post_id": 38742574, "comment_id": 64860843, "body": "@chux I am pretty sure it is a correct call. I send the return value from open_conf_UART_(), an allocated buffer and its size as arguments."}, {"owner": {"reputation": 55, "user_id": 6672050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e24ee5914db70d27110927893be3e93?s=128&d=identicon&r=PG&f=1", "display_name": "NMilev", "link": "https://stackoverflow.com/users/6672050/nmilev"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1470227178, "post_id": 38742574, "comment_id": 64860856, "body": "@LPs Yes, it was measured. A #defined value is sent as max_len argument."}, {"owner": {"reputation": 55, "user_id": 6672050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e24ee5914db70d27110927893be3e93?s=128&d=identicon&r=PG&f=1", "display_name": "NMilev", "link": "https://stackoverflow.com/users/6672050/nmilev"}, "edited": false, "score": 0, "creation_date": 1470227373, "post_id": 38742574, "comment_id": 64861021, "body": "Also, I have tried calculating some time interval in which two subsequent bytes should be received (using the BOAD and the number of bits needed to send 8 bits of data), expanding it a little and waiting (with a select()) that amount of time for the next byte every time, at most. The result was unpredictable as, with two subsequent calls, once receive the full message and the second time something like a half. I also tried expanding the time interval as much as 5 times to have the same result, just for the larger chunks of data."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470227860, "post_id": 38742574, "comment_id": 64861411, "body": "@NMilev : Yes. serial I/O is not different from socket programming: your program basically sits in a select() or poll() loop and fetches what needs to be fetched from the file descriptor(s); and stores it into a (larger) buffer, including the necessary bookkeeping. And <i>since it sits in a select loop</i> there will be no blocking reads. (and the &quot;reverse&quot; method should be used for writing)"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1470228014, "post_id": 38742574, "comment_id": 64861518, "body": "Well, per my experience its faster and better to design the code to receive the bytes available and design your communication with a protocol that implement a length byte into header of message. So you can avoid to take care of that data instead of counts bytes received as unique information."}, {"owner": {"reputation": 55, "user_id": 6672050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e24ee5914db70d27110927893be3e93?s=128&d=identicon&r=PG&f=1", "display_name": "NMilev", "link": "https://stackoverflow.com/users/6672050/nmilev"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470229812, "post_id": 38742574, "comment_id": 64862985, "body": "@wildplasser So, you are suggesting that I do something like a while loop with select and nonblocking read, store it in a buffer and exit only when select times out? And, afterwards, pick my timeout carefully?"}, {"owner": {"reputation": 55, "user_id": 6672050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e24ee5914db70d27110927893be3e93?s=128&d=identicon&r=PG&f=1", "display_name": "NMilev", "link": "https://stackoverflow.com/users/6672050/nmilev"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1470230030, "post_id": 38742574, "comment_id": 64863153, "body": "@LPs I need to design the code to be as general as possible so I would first like to try something like I described and, if I don&#39;t succeed, I will use a protocol like that."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470230117, "post_id": 38742574, "comment_id": 64863216, "body": "Inside the select loop you can check if you have collected enough data. (check for &#39;\\n&#39;, or just check the amount of collected characters) BTW: <code>#ifndef __UART_LIB__</code> identifiers starting with an underscore are reserved."}, {"owner": {"reputation": 55, "user_id": 6672050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e24ee5914db70d27110927893be3e93?s=128&d=identicon&r=PG&f=1", "display_name": "NMilev", "link": "https://stackoverflow.com/users/6672050/nmilev"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470230452, "post_id": 38742574, "comment_id": 64863480, "body": "@wildplasser The problem is that I do not know the amount of data I am to receive, nor do I have a footer or a terminating symbol. Thanks for the underscore info."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1470242489, "post_id": 38742574, "comment_id": 64872361, "body": "(1) The tcflush() in read_UART_() is wrong.  Your application has no direct access to the UART.  The read() syscall is a simple copy from the system buffer to your buffer.  Discarding data from this buffer is wrong.  (2) The termios configuration is improper.  See <a href=\"http://www.chemie.fu-berlin.de/chemnet/use/info/libc/libc_12.html#SEC237\" rel=\"nofollow noreferrer\">Setting Terminal Modes Properly</a> and <a href=\"http://www.cmrr.umn.edu/~strupp/serial.html\" rel=\"nofollow noreferrer\">Serial Programming Guide for POSIX Operating Systems</a>.  If you find conflicting advice, then read the <b>man</b> page for termios."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1470243182, "post_id": 38742574, "comment_id": 64872779, "body": "(3) Using select() and nonblocking reads is just adding program complexity if there&#39;s just one file descriptor and you don&#39;t need to detect timeouts.  When using non-canonical mode there is no efficient method to get the read() syscall to reliably detect the message frames for you.  So call read() repeatedly, and buffer and parse the input to get all the data you want.   You&#39;re not going to gain any &quot;improvement&quot; by using non-blocking mode.  See <a href=\"http://stackoverflow.com/questions/25996171/linux-blocking-vs-non-blocking-serial-read/26006680#26006680\" title=\"linux blocking vs non blocking serial read\">stackoverflow.com/questions/25996171/&hellip;</a>"}, {"owner": {"reputation": 55, "user_id": 6672050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e24ee5914db70d27110927893be3e93?s=128&d=identicon&r=PG&f=1", "display_name": "NMilev", "link": "https://stackoverflow.com/users/6672050/nmilev"}, "reply_to_user": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1470295551, "post_id": 38742574, "comment_id": 64893849, "body": "@sawdust I will follow the advice on the links you sent and also remove tcflush() calls. I actually copied a lot of code from an online source and changed it so my needs so this remained for some reason. Haven&#39;t looked into it much."}, {"owner": {"reputation": 55, "user_id": 6672050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e24ee5914db70d27110927893be3e93?s=128&d=identicon&r=PG&f=1", "display_name": "NMilev", "link": "https://stackoverflow.com/users/6672050/nmilev"}, "edited": false, "score": 0, "creation_date": 1470295736, "post_id": 38742574, "comment_id": 64893971, "body": "I actually solved the problem by introducing a timeout between smaller bursts that make up the one I want to read and using select to wait on it if necessary. Once I follow up on the flags advice, I will post this as answer here. Any advice is appreciated. I also have a write function, since that is what I will also need, but haven&#39;t posted it here to focus on the read first. Thanks, guys!"}, {"owner": {"reputation": 55, "user_id": 6672050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e24ee5914db70d27110927893be3e93?s=128&d=identicon&r=PG&f=1", "display_name": "NMilev", "link": "https://stackoverflow.com/users/6672050/nmilev"}, "edited": false, "score": 0, "creation_date": 1470300118, "post_id": 38742574, "comment_id": 64896757, "body": "After reading the links, my initial settings were:   <code>options.c_cflag |= BAUD_ | NUM_BITS_ | CLOCAL | CREAD ;</code>  <code>options.c_cflag &amp;= ~(HUPCL | CSTOPB | PARENB);</code>  <code>options.c_iflag &amp;= ~(INPCK | ISTRIP | IGNBRK | BRKINT | IGNCR |</code> <code>ICRNL | INLCR | IXOFF | IXON | IXANY | IMAXBEL);</code>  <code>options.c_oflag &amp;= ~(OPOST | ONLCR | OLCUC | OCRNL | ONOCR |</code> <code>ONLRET | OFILL | FFDLY);</code>  <code>options.c_lflag &amp;= ~(ICANON | ECHO | ISIG | IEXTEN | NOFLSH |</code> <code>TOSTOP);</code>  And I found that for no processing on the output or the input characters, it is enough to use cfmakeraw(); Also, can someone explain CLOCAL?"}], "answers": [{"comments": [{"owner": {"reputation": 3854, "user_id": 2235885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d0d6a08639ef79ef960a52bd013e02?s=128&d=identicon&r=PG", "display_name": "joop", "link": "https://stackoverflow.com/users/2235885/joop"}, "edited": false, "score": 0, "creation_date": 1470392543, "post_id": 38783917, "comment_id": 64943867, "body": "<code>if(indicator &lt; 0) { return -1; }</code> a -1 return from select() is not <i>necessarily</i> an error, it could be an interrupted system call, check errno (just like you did in read())  to choose if you want to exit or retry."}, {"owner": {"reputation": 3854, "user_id": 2235885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d0d6a08639ef79ef960a52bd013e02?s=128&d=identicon&r=PG", "display_name": "joop", "link": "https://stackoverflow.com/users/2235885/joop"}, "edited": false, "score": 0, "creation_date": 1470392935, "post_id": 38783917, "comment_id": 64944078, "body": "<code>while(buffer_length &lt; max_len)</code> this loop should be <b>outside</b> the select(). If select() indicates that the fd is readable, you are allowed to read() <b>once</b>."}, {"owner": {"reputation": 55, "user_id": 6672050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e24ee5914db70d27110927893be3e93?s=128&d=identicon&r=PG&f=1", "display_name": "NMilev", "link": "https://stackoverflow.com/users/6672050/nmilev"}, "reply_to_user": {"reputation": 3854, "user_id": 2235885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d0d6a08639ef79ef960a52bd013e02?s=128&d=identicon&r=PG", "display_name": "joop", "link": "https://stackoverflow.com/users/2235885/joop"}, "edited": false, "score": 0, "creation_date": 1470398639, "post_id": 38783917, "comment_id": 64947622, "body": "@joop I agree with the comment about the indicator, will fix that! I am not sure what you are saying about the loop. The first select returns &gt;0 if there has been an &quot;initial contact&quot; on the port and, from there on, I read the bursts. I cannot do only one read. Tried, the first select returns immediately after the UART buffer is full (in my case, 8 bytes) and doesn&#39;t even try to read the rest that arrives. That is why this is in a loop."}, {"owner": {"reputation": 3854, "user_id": 2235885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d0d6a08639ef79ef960a52bd013e02?s=128&d=identicon&r=PG", "display_name": "joop", "link": "https://stackoverflow.com/users/2235885/joop"}, "edited": false, "score": 0, "creation_date": 1470399690, "post_id": 38783917, "comment_id": 64948288, "body": "You should again initialise the fd set <code>FD_ZERO(&amp;set); FD_SET(uart_filestream, &amp;set);</code> before the second select. (this is one of the reasons people use loops around select)"}, {"owner": {"reputation": 55, "user_id": 6672050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e24ee5914db70d27110927893be3e93?s=128&d=identicon&r=PG&f=1", "display_name": "NMilev", "link": "https://stackoverflow.com/users/6672050/nmilev"}, "reply_to_user": {"reputation": 3854, "user_id": 2235885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d0d6a08639ef79ef960a52bd013e02?s=128&d=identicon&r=PG", "display_name": "joop", "link": "https://stackoverflow.com/users/2235885/joop"}, "edited": false, "score": 0, "creation_date": 1470401479, "post_id": 38783917, "comment_id": 64949507, "body": "@joop Thanks, sort of forgotten about it. I will edit the post soon to introduce all the changes"}, {"owner": {"reputation": 6059, "user_id": 1230086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dd67f82db5bf5f26a1597400c6ffbf4?s=128&d=identicon&r=PG", "display_name": "tijko", "link": "https://stackoverflow.com/users/1230086/tijko"}, "edited": false, "score": 0, "creation_date": 1470428853, "post_id": 38783917, "comment_id": 64964905, "body": "One of the things that stuck out to me in the code you posted in the question, was that you zero-out all other flags in the <code>termios</code> struct except for <code>c_cflags</code>"}, {"owner": {"reputation": 55, "user_id": 6672050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e24ee5914db70d27110927893be3e93?s=128&d=identicon&r=PG&f=1", "display_name": "NMilev", "link": "https://stackoverflow.com/users/6672050/nmilev"}, "reply_to_user": {"reputation": 6059, "user_id": 1230086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dd67f82db5bf5f26a1597400c6ffbf4?s=128&d=identicon&r=PG", "display_name": "tijko", "link": "https://stackoverflow.com/users/1230086/tijko"}, "edited": false, "score": 0, "creation_date": 1470656486, "post_id": 38783917, "comment_id": 65022126, "body": "@tijko Yes, after a bit of additional reading, I realised that it is not a good approach so I kept all the flags, changing only the ones I needed to change, thus ensuring I do not turn off some necessary options. Not sure if it made any difference in my case but I suppose it could greatly affect portability/reusability of the code."}], "tags": [], "owner": {"reputation": 55, "user_id": 6672050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e24ee5914db70d27110927893be3e93?s=128&d=identicon&r=PG&f=1", "display_name": "NMilev", "link": "https://stackoverflow.com/users/6672050/nmilev"}, "is_accepted": true, "score": 0, "last_activity_date": 1470401832, "last_edit_date": 1470401832, "creation_date": 1470383320, "answer_id": 38783917, "question_id": 38742574, "link": "https://stackoverflow.com/questions/38742574/uart-not-reading-as-much-data-as-i-would-like/38783917#38783917", "title": "UART not reading as much data as I would like", "body": "<p>So, I solved my problem. I still can't flush (when the system is freshly booted up and there was a signal before I turned my program on, there is some old content in the buffer, as it seems to me).\nI used this assumption: The package will arrive in smaller bursts and they will be separated by TIMEOUT_BYTE_ amount of time. If that expires, I assume that the package is over.\nAlso, I have a timeout for initial waiting for the data but I reckon that is situational.</p>\n\n<p>Header file:</p>\n\n<pre><code>#ifndef UART_LIB_\n#define UART_LIB_\n\n#include &lt;stdlib.h&gt;     //Errors, etc\n#include &lt;unistd.h&gt;     //Used for UART\n#include &lt;fcntl.h&gt;      //Used for UART\n#include &lt;termios.h&gt;    //Used for UART\n#include &lt;sys/types.h&gt;  //These includes are for timeout\n#include &lt;sys/select.h&gt; //Used for select(), etc\n\n//Some values used by default, left for the user to change if needed\n\n//Used to set up the baud rate\nunsigned int BAUD_ ;\n\n//Used to indicate number of bits in one backage \nunsigned int NUM_BITS_  ;\n\n//Path to the UART device\nchar *UART_PATH_ ;\n\n//Flag for opening the device\nunsigned int OPEN_FLAG_ ;\n\n//Timeout for answer from the other side\ntime_t TIMEOUT_SEC_ ;\nsuseconds_t TIMEOUT_USEC_ ;\n\n//Time interval between two bursts of data inside the package\nsuseconds_t TIMEOUT_BYTE_ ;\n\nint open_conf_UART_(void) ;\nint read_UART_(int uart_filestream, char* dest, int max_len) ;\n\n#endif\n</code></pre>\n\n<p>Source file:</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include \"uartlib.h\"\n\nunsigned int BAUD_ = B38400 ;\nunsigned int NUM_BITS_ = CS8 ;\nchar *UART_PATH_ = \"/dev/ttyAMA0\" ;\nunsigned int OPEN_FLAG_ = O_RDWR ;\ntime_t TIMEOUT_SEC_ = 2 ;\nsuseconds_t TIMEOUT_USEC_ = 0 ;\n\n// This needs to be finely tuned\nsuseconds_t TIMEOUT_BYTE_ = 5000;\n\n\nint open_conf_UART_()\n{\n    // Variable section\n    int indicator;\n    int uart_filestream ;\n    struct termios options ;\n\n    // Opening the port in a read/write mode\n    uart_filestream = open(UART_PATH_, OPEN_FLAG_ | O_NOCTTY | O_NONBLOCK);\n    if (uart_filestream &lt; 0)\n    {\n        // Unable to open the serial port, so produce an error and halt\n        return -1;\n    }\n\n    // Configuring the options for UART\n\n    // Flushing the file stream (the input and the output area)\n    indicator = tcflush(uart_filestream, TCIOFLUSH);\n    if(indicator &lt; 0)\n    {   \n        // Unable to flush\n        close(uart_filestream);\n        return -1;\n    }\n\n    // Retrieve the options and modify them. \n    indicator = tcgetattr(uart_filestream, &amp;options);\n    if(indicator &lt; 0)\n    {   \n        // Unable to get the attributes\n        close(uart_filestream);\n        return -1;\n    }\n\n    // Setting the options\n    cfmakeraw(&amp;options);\n    options.c_cflag |= BAUD_ | NUM_BITS_ | CREAD;\n\n\n    // Setting the options for the file stream. \n    indicator = tcsetattr(uart_filestream, TCSANOW, &amp;options);\n    if(indicator &lt; 0)\n    {   \n        // Unable to set the attributes\n        close(uart_filestream);\n        return -1;\n    }\n    return uart_filestream;\n}\n\nint read_UART_(int uart_filestream, char* dest, int max_len)\n{\n    // Variable section\n    int indicator;\n    int buffer_length;\n    char *tmp_dest;\n    fd_set set;\n    struct timeval timeout, init_timeout;\n\n    while(1)\n    {\n        // Reseting the set and inserting the uart_filestream in it\n        FD_ZERO(&amp;set);\n        FD_SET(uart_filestream, &amp;set);\n\n        // Setting the time for initial contact\n        init_timeout.tv_sec = TIMEOUT_SEC_ ;\n        init_timeout.tv_usec = TIMEOUT_USEC_ ;\n\n        // Waiting for the first contact. If this times out, we assume no contact.\n        indicator = select(uart_filestream + 1, &amp;set, NULL, NULL, &amp;init_timeout);\n        if(indicator &lt; 0)\n        {\n            if(errno == EINTR)\n            {\n                // Try again\n                continue;\n            }\n            return -1;\n        }\n        else if(indicator == 0)\n        {   // Timeout has occurred\n            return -2;\n        }\n        else\n        {\n            break;\n        }\n    }\n\n    // This section means that there is something to be read in the file descriptor\n    buffer_length = 0 ;\n    tmp_dest = dest ;\n\n    // The first select is redundant but it is easier to loop this way.\n    while(buffer_length &lt; max_len)\n    {\n        // select changes the timeval structure so it is reset here\n        timeout.tv_sec = 0;\n        timeout.tv_usec = TIMEOUT_BYTE_;\n\n        // Reinitialize the sets for reading\n        FD_ZERO(&amp;set);\n        FD_SET(uart_filestream, &amp;set);\n\n        // Wait for the file descriptor to be available or for timeout\n        indicator = select(uart_filestream+1, &amp;set, NULL, NULL, &amp;timeout);\n\n        if(indicator &lt; 0)\n        {   \n            if(errno == EINTR)\n            {\n                // Try again\n                continue;\n            }\n\n            // This indicates an error\n            return -1;\n        }\n        else if(indicator == 0)\n        {\n            // This indicates a timeout; We assume that the transmission is over once first timeout is reached\n            return buffer_length;\n        }\n\n        // There's been a select that didn't time out before this read\n        indicator = read(uart_filestream, (void*)tmp_dest, max_len - buffer_length);\n        if(indicator &lt; 0)\n        {\n            if(errno == EINTR)\n            {\n                // If the call was interrupted, try again\n                continue;\n            }\n\n            // If it was any other condition, the read is corrupt.\n            return -1;\n        }\n        else if(indicator == 0)\n        {\n            // If, somehow, EOF was reached\n            break;\n        }\n\n        // Change the necessary values\n        buffer_length += indicator ;\n        tmp_dest += indicator; \n\n    }\n    // Both branches of the if statement above have return, so this will not be reached\n    // but a warning is generated \n    return buffer_length;\n}\n\nvoid flush_buffer_UART_(int uart_filestream)\n{\n    char c;\n    while(read(uart_filestream, &amp;c, 1) &gt; 0);\n}\n</code></pre>\n\n<p>I know it is not the topic here, but if someone knows how to solve the flush issue, please respond.\nAlso, any constructive criticism is very welcome.</p>\n\n<p>P.S. I also have a write_UART() function but I did not deem necessary to post it as it represented no problem (measured with an oscilloscope and later, tried with echo. Echo wouldn't be able to give me the same message).</p>\n\n<p>EDIT: Flush has been introduced and then merged with the source file. Still haven't figured out is it working or not.</p>\n"}], "owner": {"reputation": 55, "user_id": 6672050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e24ee5914db70d27110927893be3e93?s=128&d=identicon&r=PG&f=1", "display_name": "NMilev", "link": "https://stackoverflow.com/users/6672050/nmilev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "accepted_answer_id": 38783917, "answer_count": 1, "score": 1, "last_activity_date": 1470401832, "creation_date": 1470224451, "question_id": 38742574, "link": "https://stackoverflow.com/questions/38742574/uart-not-reading-as-much-data-as-i-would-like", "title": "UART not reading as much data as I would like", "body": "<p>I am trying to write a function that reads a chunk of data sent through UART. I am using  Raspbian Jessie running on a RaspberryPi model B but I wanted to use this C code (with any necessary revisions) on openwrt. So far, this is what I wrote.</p>\n\n<p>Header:</p>\n\n<pre><code>#ifndef __UART_LIB__\n#define __UART_LIB__\n\n#include &lt;stdlib.h&gt;     //Errors, etc\n#include &lt;unistd.h&gt;     //Used for UART\n#include &lt;fcntl.h&gt;      //Used for UART\n#include &lt;termios.h&gt;    //Used for UART\n\n#include &lt;sys/types.h&gt;  //These includes are for timeout\n#include &lt;sys/stat.h&gt;   \n#include &lt;fcntl.h&gt;\n#include &lt;sys/select.h&gt; //\n#include &lt;sys/ioctl.h&gt;\n\n#define BITS_PER_PACKAGE_ 11\n#define WAIT_PROLONGATION_CONSTANT_ 1.1f\n\n//Some values used by default, left for the user to change if needed\nunsigned int BAUD_ ;\nunsigned int NUM_BITS_  ;\nchar *UART_PATH_ ;\nunsigned int MAX_SIZE_ ;\nunsigned int OPEN_FLAG_ ;\ntime_t TIMEOUT_SEC_ ;\nsuseconds_t TIMEOUT_USEC_ ;\nstruct timeval WAIT_CONSTANT_ ;\n\nint open_conf_UART_() ;\nint read_UART_(int uart_filestream, char** dest, int max_len) ;\n\n#endif\n</code></pre>\n\n<p>.c file:</p>\n\n<pre><code>#include \"uartlib.h\"\n\nunsigned int BAUD_ = B115200 ;\nunsigned int NUM_BITS_ = CS8 ;\nchar *UART_PATH_ = \"/dev/ttyAMA0\" ;\nunsigned int MAX_SIZE_ = 128 ;\nunsigned int OPEN_FLAG_ = O_RDWR ;\ntime_t TIMEOUT_SEC_ = 5 ;\nsuseconds_t TIMEOUT_USEC_ = 0 ;\n\n\nint open_conf_UART_()\n{\n    int indicator, old_fl;\n    int uart_filestream ;\n    struct termios options ;\n\n    // Opening the port in a read/write mode\n    uart_filestream = open(UART_PATH_, OPEN_FLAG_ | O_NOCTTY );\n    if (uart_filestream &lt; 0)\n    {\n        // Unable to open the serial port, so produce an error and halt\n        return -1;\n    }\n\n    // Configuring the options for UART\n\n    // Retrieve the options and modify them. \n    indicator = tcgetattr(uart_filestream, &amp;options);\n    if(indicator &lt; 0)\n    {   \n        // Unable to get the attributes\n        close(uart_filestream);\n        return -1;\n    }\n\n    // I found a question on stackoverlow where the answer said that VTIME and VMIN will be ignored unless I \n    // switch the FNDELAY flag off\n    old_fl = fcntl(uart_filestream, F_GETFL);\n    if(old_fl &lt; 0)\n    {\n        return -1;\n    }\n    old_fl &amp;= ~FNDELAY;\n    fcntl(uart_filestream, old_fl);\n\n    //Setting the options\n    options.c_cflag = CRTSCTS | BAUD_ | NUM_BITS_ | CLOCAL | CREAD ;\n    options.c_iflag = 0;\n    options.c_oflag = 0;\n    options.c_lflag = 0;\n\n    //I want the uart to wait 1/10 of a second between bytes at most\n    options.c_cc[VTIME] = 1;\n    options.c_cc[VMIN] = 0;\n\n    // Flushing the file stream (the input and the output area)\n    indicator = tcflush(uart_filestream, TCIOFLUSH);\n    if(indicator &lt; 0)\n    {   \n        // Unable to flush\n        close(uart_filestream);\n        return -1;\n    }\n\n\n    // Setting the options for the file stream. \n    indicator = tcsetattr(uart_filestream, TCSANOW, &amp;options);\n    if(indicator &lt; 0)\n    {   \n        // Unable to set the attributes\n        close(uart_filestream);\n        return -1;\n    }\n    return uart_filestream;\n}\n\nint read_UART_(int uart_filestream, char** dest, int max_len)\n{\n    int indicator;\n    int buffer_length;\n\n    indicator = tcflush(uart_filestream, TCIFLUSH);\n    if(indicator &lt; 0)\n    {   \n        // Unable to flush\n        return -1;\n    }\n\n    //Do the actual reading\n    buffer_length = read(uart_filestream, (void*)(*dest), max_len);\n    if(indicator &lt; 0)\n    {\n        return -1;\n    }\n    else\n    {\n        // Returning number of read bytes\n        return buffer_length;\n    }   \n    // Both branches of the if statement above have return, so this will not be reached\n}\n</code></pre>\n\n<p>So, when I try to read more than 8 bytes, the message gets truncated to 8 bytes.\nAs I read, setting VTIME to a certain value allows the time interval between two bytes to be at most that long. \nI am not certain what is going on but I suspect that the read() call reads the buffer before the receiving of the data is complete.\nMy wish is to read a chunk of data of undefined size. I also used select() with a timeout before the read to make sure the program won't block entirely.\nI read a lot of forum topics, stackoverflow questions, guides, etc. on this topic and none seem to help me with my solution.\nSo, can anyone explain what is going on here? Is it possible to do what I want?</p>\n\n<p>Note that I removed some of the code (I also wrote a function that writes to a UART port) so here might be some redundant includes, global variables, etc.</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 2630, "user_id": 1983197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwjpR.png?s=128&g=1", "display_name": "LordWilmore", "link": "https://stackoverflow.com/users/1983197/lordwilmore"}, "edited": false, "score": 0, "creation_date": 1470224526, "post_id": 38742558, "comment_id": 64858880, "body": "Do you have a problem?"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 4, "creation_date": 1470224571, "post_id": 38742558, "comment_id": 64858916, "body": "s is an array of read-only strings.  Try <code>char s[][100]</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1470224862, "post_id": 38742558, "comment_id": 64859105, "body": "<code>char *s[]={(char[]){&quot;To err is human...&quot;},(char[]){&quot;But to really mess things up...&quot;},(char[]){&quot;One needs to know C!!&quot;}};</code>"}, {"owner": {"reputation": 85, "user_id": 6097562, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e69e3bfb81ef18ed12546bab7312f955?s=128&d=identicon&r=PG&f=1", "display_name": "Naman Sharma", "link": "https://stackoverflow.com/users/6097562/naman-sharma"}, "edited": false, "score": 0, "creation_date": 1470225808, "post_id": 38742558, "comment_id": 64859787, "body": "Why??@WilliamPursell"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1470230051, "post_id": 38742558, "comment_id": 64863170, "body": "@NamanSharma See the C FAQ: <a href=\"http://c-faq.com/decl/strlitinit.html\" rel=\"nofollow noreferrer\">c-faq.com/decl/strlitinit.html</a> You should read the entire FAQ at least once. It is very useful to know what&#39;s in there."}], "answers": [{"tags": [], "owner": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "is_accepted": false, "score": 1, "last_activity_date": 1470224724, "creation_date": 1470224724, "answer_id": 38742671, "question_id": 38742558, "link": "https://stackoverflow.com/questions/38742558/reverse-strings/38742671#38742671", "title": "Reverse strings", "body": "<p>Well one of the errors is that you don't include <code>string.h</code> so this is not compiling. The other one is that your array of <code>char*</code>'s will possibly go to a read only memory area and modifying it will cause strange behaviours, so you'd better be using:</p>\n\n<pre><code>char s[][255]={\"To err is human...\",\n      \"But to really mess things up...\",\"One needs to know C!!\"};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1470225989, "post_id": 38742689, "comment_id": 64859928, "body": "&quot; So whatever you do inside your for loop to reverse or change those strings&quot; --&gt; undefined behavior.  Seg fault is a common possibility,"}], "tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 2, "last_activity_date": 1470226162, "last_edit_date": 1470226162, "creation_date": 1470224758, "answer_id": 38742689, "question_id": 38742558, "link": "https://stackoverflow.com/questions/38742558/reverse-strings/38742689#38742689", "title": "Reverse strings", "body": "<p>Among other things,</p>\n\n<p><code>char *s[]={\"To err is human...\",\"But to really mess things up...\",\"One needs to know C!!\"};</code></p>\n\n<p>Here you declare and initialise an array of pointers to char. This way each pointer is pointed to a given string literal. So whatever you do inside your <code>for</code> loop to reverse or change those strings would lead to undefined behaviour (in this case the UB is normally a segfault/crash).</p>\n\n<p>At least change this to <code>char s[][100] = {\"To err is human...\",\"But to really mess things up...\",\"One needs to know C!!\"};</code></p>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 0, "last_activity_date": 1470231933, "last_edit_date": 1592644375, "creation_date": 1470230257, "answer_id": 38744798, "question_id": 38742558, "link": "https://stackoverflow.com/questions/38742558/reverse-strings/38744798#38744798", "title": "Reverse strings", "body": "<p>As the related C FAQ <a href=\"http://c-faq.com/decl/strlitinit.html\" rel=\"nofollow noreferrer\">points out</a>:</p>\n<blockquote>\n<p>Q: What is the difference between these initializations?</p>\n<pre><code>char a[] = &quot;string literal&quot;;\nchar *p  = &quot;string literal&quot;;\n</code></pre>\n<p>My program crashes if I try to assign a new value to p[i].</p>\n<p>A: A string literal (the formal term for a double-quoted string in C source) can be used in two slightly different ways:</p>\n<ol>\n<li><p>As the initializer for an array of char, as in the declaration of <code>char a[]</code>, it specifies the initial values of the characters in that array (and, if necessary, its size).</p>\n</li>\n<li><p>Anywhere else, it turns into an unnamed, static array of characters, and this unnamed array may be stored in read-only memory, and which therefore cannot necessarily be modified. In an expression context, the array is converted at once to a pointer, as usual (see section 6), so the second declaration initializes p to point to the unnamed array's first element.</p>\n</li>\n</ol>\n<p>Some compilers have a switch controlling whether string literals are writable or not (for compiling old code), and some may have options to cause string literals to be formally treated as arrays of <code>const char</code> (for better error catching).</p>\n</blockquote>\n<p>There are many ways of dealing with this. One possibility is using <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/strdup.html\" rel=\"nofollow noreferrer\"><code>strdup</code></a> in your <code>reverse_string</code> function, and reverse that. That requires the caller to take the responsibility of <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/free.html\" rel=\"nofollow noreferrer\"><code>free</code></a>ing the reversed string.</p>\n<p><code>strdup</code> is not a great function, because it needs to find the length of the string that is being duplicated which means you end up traversing one extra time. One way to deal with this is to allocate the memory yourself.</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar *\nreverse_string(const char *s) {\n    char *cursor;\n    char *reversed;\n    size_t length;\n\n    if (!s) {\n        return NULL;\n    }\n\n    length = strlen(s);\n\n    reversed = malloc( length + 1 );\n\n    if (!reversed) {\n        return NULL;\n    }\n\n    if ( !length ) {\n        *reversed = '\\0';\n        return reversed;\n    }\n\n    cursor = reversed;\n\n    while (length--) {\n        *(cursor++) = *(s + length);\n    }\n\n    *cursor = '\\0';\n\n    return reversed;\n}\n\n\nint main(void)\n{\n    int i;\n    char *s[] = {\n        &quot;To err is human...&quot;,\n        &quot;But to really mess things up...&quot;,\n        &quot;One needs to know C!!&quot;\n    };\n\n    for (i = 0; i &lt; sizeof(s)/sizeof(s[0]); ++i) {\n        char *reversed = reverse_string( s[i] );\n        puts( reversed );\n        free( reversed );\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 6097562, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e69e3bfb81ef18ed12546bab7312f955?s=128&d=identicon&r=PG&f=1", "display_name": "Naman Sharma", "link": "https://stackoverflow.com/users/6097562/naman-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1470231933, "creation_date": 1470224429, "question_id": 38742558, "link": "https://stackoverflow.com/questions/38742558/reverse-strings", "title": "Reverse strings", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    char *s[]={\"To err is human...\",\"But to really mess things up...\",\"One needs to know C!!\"};\n    int i,j,len,t;\n    for(i=0;i&lt;=2;i++)\n    {\n        len=strlen(s[i]);\n        for(j=0;j&lt;len/2;j++)\n        {\n            t=*(s[i]+len-1-j);\n            *(s[i]+len-1-j)=*(s[i]+j);\n            *(s[i]+j)=t;\n        }\n    }\n    for(i=0;i&lt;=2;i++)\n        printf(\"%s\\n\",s[i]);\n    return 0;\n}\n</code></pre>\n\n<p>What is the error in the above program. I'm just exchanging values from both ends of each string.</p>\n"}, {"tags": ["c", "regex", "pcre", "c-strings"], "comments": [{"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1471716087, "post_id": 38742250, "comment_id": 65463700, "body": "<i>help me fix the substitution part</i> =&gt; you should describe what&#39;s wrong with what you have"}], "owner": {"reputation": 11, "user_id": 6672070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e3e580eb8fc60aa253a9c886a3d6d53?s=128&d=identicon&r=PG&f=1", "display_name": "Lisa Brinson", "link": "https://stackoverflow.com/users/6672070/lisa-brinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1470223593, "creation_date": 1470223593, "question_id": 38742250, "link": "https://stackoverflow.com/questions/38742250/capture-matched-regex-and-substitute", "title": "Capture Matched regex and substitute", "body": "<p>I have a C program to match a particular regex in a string and perform some substitution. I want to match all patterns of string concatenation and convert it to another form.</p>\n\n<p>For Example for the input string </p>\n\n<pre><code>This \"is\" + \"an\" + \"example\" + \"string\" to be matched and replaced\n</code></pre>\n\n<p>The Matched regex should be </p>\n\n<pre><code>\"is\" + \"an\" + \"example\" + \"string\"\n</code></pre>\n\n<p>So I want to convert this matched regex to </p>\n\n<pre><code>CONCAT(\"is\", \"an\", \"example\", \"string\")\n</code></pre>\n\n<p>I am using C PCRE2 Library and my code is below. Can anyone help me fix the substitution part?</p>\n\n<pre><code>#define PCRE2_CODE_UNIT_WIDTH 8\n#define BUFFERSIZE 100\n#include &lt;my_global.h&gt;\n#include &lt;mysql.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pcre2.h&gt;\n\nvoid finish_with_error(MYSQL *con)\n{\n  fprintf(stderr, \"%s\\n\", mysql_error(con));\n  mysql_close(con);\n  exit(1);        \n}\n\n\nint main(int argc, char **argv)\n{\npcre2_code *re;\nPCRE2_SPTR pattern;     \nPCRE2_SPTR subject;     \n\nint errornumber;\nint i;\nint rc;\n\n\nPCRE2_SIZE erroroffset;\nPCRE2_SIZE *ovector;\n\nsize_t subject_length;\npcre2_match_data *match_data;\n\n char buffer[BUFFERSIZE];\n MYSQL *con = mysql_init(NULL);\n\n\n/* Read Query String from standard input here*/\n\nprintf(\"Enter a Query to be substituted: \\n\");\n    while(fgets(buffer, BUFFERSIZE , stdin) != NULL)\n    {\n        printf(\"%s\\n\", buffer);\n        break;\n    }\n\npattern = (PCRE2_SPTR)'\"[^\"]*\"(?: *\\\\+ *\"[^\"]*\")+';   // Regex for string concatenation\nsubject = (PCRE2_SPTR)buffer;\nsubject_length = strlen((char *)subject);\n\n\n/* Compile regex and perform matching here  by wrapping match within CONCAT() and replace + with , */\n\n\nre = pcre2_compile(\n  pattern,               \n  PCRE2_ZERO_TERMINATED,\n  0,                     \n  &amp;errornumber,          \n  &amp;erroroffset,         \n  NULL);                 \n\n\nif (re == NULL)\n  {\n  PCRE2_UCHAR buffer[256];\n  pcre2_get_error_message(errornumber, buffer, sizeof(buffer));\n  printf(\"PCRE2 compilation failed at offset %d: %s\\n\", (int)erroroffset,\n    buffer);\n  return 1;\n  }\n\n\n\nmatch_data = pcre2_match_data_create_from_pattern(re, NULL);\n\nrc = pcre2_match(\n  re,                   \n  subject,              \n  subject_length,      \n  0,                    \n  0,                   \n  match_data,          \n  NULL);  \n\n\nif (rc &lt; 0)\n  {\n  switch(rc)\n    {\n    case PCRE2_ERROR_NOMATCH: printf(\"No match\\n\"); break;\n    default: printf(\"Matching error %d\\n\", rc); break;\n    }\n  pcre2_match_data_free(match_data);   \n  pcre2_code_free(re);                \n  // return 1;\n  goto server;\n  }\n\n\novector = pcre2_get_ovector_pointer(match_data);\nprintf(\"\\nMatch succeeded at offset %d\\n\", (int)ovector[0]);\n\n\n/* Do Substitution for matches found here. by wrapping match within CONCAT() and replace + with ,.  For now only one match is handled*/\n\n\n/* Use Connector C here to forward query that is rewritten to MariaDB/MySQL server */\nserver:\nif (con == NULL) \n  {\n      fprintf(stderr, \"%s\\n\", mysql_error(con));\n      exit(1);\n  }\n  if (mysql_real_connect(con, \"localhost\", \"root\", \"root\", \n          NULL, 0, NULL, 0) == NULL) \n  {\n      fprintf(stderr, \"%s\\n\", mysql_error(con));\n      mysql_close(con);\n      exit(1);\n  }  \n  printf(\"Connected to Database\\n\");\n\n\n  if (mysql_query(con, subject)) \n  {\n      finish_with_error(con);\n  }\n\n  MYSQL_RES *result = mysql_store_result(con);\n\n  if (result == NULL) \n  {\n      finish_with_error(con);\n  }\n\n  int num_fields = mysql_num_fields(result);\n\n  MYSQL_ROW row;\n\n  while ((row = mysql_fetch_row(result))) \n  { \n      for(int i = 0; i &lt; num_fields; i++) \n      { \n          printf(\"%s \", row[i] ? row[i] : \"NULL\"); \n      } \n          printf(\"\\n\"); \n  }\n\n  mysql_free_result(result);\n\n  mysql_close(con);\n\nprintf(\"\\n\");\npcre2_match_data_free(match_data);\npcre2_code_free(re);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "shebang", "magic-numbers"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1470223370, "post_id": 38742137, "comment_id": 64858047, "body": "It is a plain text file almost always saved with <code>.c</code> extension."}, {"owner": {"reputation": 3709, "user_id": 6296435, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/c1Gx3.png?s=128&g=1", "display_name": "Maverick Meerkat", "link": "https://stackoverflow.com/users/6296435/maverick-meerkat"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1470223568, "post_id": 38742137, "comment_id": 64858180, "body": "@MohitJain I&#39;m talking about the executable, not the c script (or is there is some hidden line in the c-script?)"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1470223623, "post_id": 38742137, "comment_id": 64858215, "body": "It is not script. For ABI detail please read: <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow noreferrer\">ABI</a> and <a href=\"https://en.wikipedia.org/wiki/Executable_and_Linkable_Format\" rel=\"nofollow noreferrer\">ELF</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3709, "user_id": 6296435, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/c1Gx3.png?s=128&g=1", "display_name": "Maverick Meerkat", "link": "https://stackoverflow.com/users/6296435/maverick-meerkat"}, "is_accepted": false, "score": 0, "last_activity_date": 1470225421, "creation_date": 1470225421, "answer_id": 38742961, "question_id": 38742137, "link": "https://stackoverflow.com/questions/38742137/does-a-c-source-code-script-program-uses-a-shebang-like-command/38742961#38742961", "title": "Does a C source-code/script/program uses a shebang-like command?", "body": "<p>After some google-ing, I think I understand the following (though i'm not 100% sure):</p>\n\n<p>Some programming languages such as bash, python, php and other languages uses an interpreter - and so could require a shebang. The interpreter, unlike the compiler, translates the program-code to machine-language every time it is called. </p>\n\n<p>C does not uses an interpreter, but only a compiler - which translates the code only once to an executable / object-file. </p>\n\n<p>So the answer is - NO - c-code does not need a shebang. </p>\n"}, {"comments": [{"owner": {"reputation": 8058, "user_id": 619818, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qzq4k.jpg?s=128&g=1", "display_name": "Angus Comber", "link": "https://stackoverflow.com/users/619818/angus-comber"}, "edited": false, "score": 0, "creation_date": 1571657418, "post_id": 38742981, "comment_id": 103301541, "body": "Unix C program executables start with 7f E L F. Windows C programs start with MZ"}], "tags": [], "owner": {"reputation": 22367, "user_id": 1057909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a3df0a806e7301ce9b92d0705646ac?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/1057909/ams"}, "is_accepted": true, "score": 2, "last_activity_date": 1470225476, "creation_date": 1470225476, "answer_id": 38742981, "question_id": 38742137, "link": "https://stackoverflow.com/questions/38742137/does-a-c-source-code-script-program-uses-a-shebang-like-command/38742981#38742981", "title": "Does a C source-code/script/program uses a shebang-like command?", "body": "<p>Yes.</p>\n\n<p>C program executables (and all compiled languages) start with the \"magic\" characters <code>0x7f</code> <code>E</code> <code>L</code> <code>F</code>. The Linux kernel recognises this in the same way as it recognises shebang scripts, except that it then triggers the ELF loader, not the script interpreter.</p>\n\n<p>It's not <em>actually</em> shebang, but it's analogous.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": false, "score": 0, "last_activity_date": 1470225750, "creation_date": 1470225750, "answer_id": 38743093, "question_id": 38742137, "link": "https://stackoverflow.com/questions/38742137/does-a-c-source-code-script-program-uses-a-shebang-like-command/38743093#38743093", "title": "Does a C source-code/script/program uses a shebang-like command?", "body": "<p>The term \"magic number\" is actually applies better to compiled programs than scripts. There were already magic numbers to identify executable files before the shebang was invented.</p>\n\n<p>A magic number is any short byte sequence at a fixed offset (usually the beginning of a file) that is intended to enable programs to quickly decide what format the file is in. There's an ELF magic number, a PNG magic number, a gzip magic number...</p>\n\n<p>The shebang is sort of an <em>imitation</em> of the magic number principle.</p>\n\n<p>Also, in ELF there <em>is</em> a thing called the ELF interpreter, which the kernel must be aware of, which is analogous to a script interpreter. If an ELF executable has an interpreter, the kernel starts the program at the interpreter's entry point instead of the main executable's entry point. Every dynamically linked program uses this feature. The dynamic linker is the ELF interpreter.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 1, "creation_date": 1470226209, "post_id": 38743185, "comment_id": 64860097, "body": "The point of the shebang line is that the kernel <i>does</i> recognize it. Shells don&#39;t need to parse it themselves"}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1470226358, "post_id": 38743185, "comment_id": 64860187, "body": "Historically <a href=\"https://en.wikipedia.org/wiki/Shebang_(Unix)#History\" rel=\"nofollow noreferrer\">it was the shell</a> but nowadays it&#39;s the kernel, indeed."}, {"owner": {"reputation": 3709, "user_id": 6296435, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/c1Gx3.png?s=128&g=1", "display_name": "Maverick Meerkat", "link": "https://stackoverflow.com/users/6296435/maverick-meerkat"}, "edited": false, "score": 0, "creation_date": 1470428572, "post_id": 38743185, "comment_id": 64964777, "body": "two good answers, that actually complete each other. I had to choose one... :-) thanks a lot!"}], "tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": false, "score": 1, "last_activity_date": 1470226232, "last_edit_date": 1470226232, "creation_date": 1470225953, "answer_id": 38743185, "question_id": 38742137, "link": "https://stackoverflow.com/questions/38742137/does-a-c-source-code-script-program-uses-a-shebang-like-command/38743185#38743185", "title": "Does a C source-code/script/program uses a shebang-like command?", "body": "<p>The <em>shebang</em> is used by the <em>shell</em><sup>*</sup> to recognize a script that needs an executable program to be started beforehand, to which the script will be given as parameter.</p>\n\n<p>E.g. script named \"myscript.pl\", having executable access rights</p>\n\n<pre><code>#!/usr/bin/perl\n# perl script\n</code></pre>\n\n<p>The shell sees the <code>#!</code> and starts a process like this:</p>\n\n<pre><code>/usr/bin/perl myscript.pl\n</code></pre>\n\n<p>Compiled C programs are directly executable, and their \"magic number\" is <em>not</em> to say it is/was a C program. The magic number means it is a particular executable that fits the OS, and the executable machine code (starting at a given address) will be then directly executed by the/a processor.</p>\n\n<p><sup>*</sup><em>Historically, the shell was in charge of detecting the shebang. Nowadays the kernel does it directly</em> (See comments below).</p>\n"}], "owner": {"reputation": 3709, "user_id": 6296435, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/c1Gx3.png?s=128&g=1", "display_name": "Maverick Meerkat", "link": "https://stackoverflow.com/users/6296435/maverick-meerkat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "closed_date": 1470235770, "accepted_answer_id": 38742981, "answer_count": 4, "score": 0, "last_activity_date": 1470226232, "creation_date": 1470223281, "question_id": 38742137, "link": "https://stackoverflow.com/questions/38742137/does-a-c-source-code-script-program-uses-a-shebang-like-command", "closed_reason": "Duplicate", "title": "Does a C source-code/script/program uses a shebang-like command?", "body": "<p>might be a stupid question but I'll try anyway:</p>\n\n<p>when you turn a shell-script into an executable, it uses the shebang to knows which interpreter to use when you run it. Does a C code/script/program uses/has something similar?</p>\n\n<p>are there any magic numbers in the beginning of an executable C-program?</p>\n"}, {"tags": ["c", "mingw"], "answers": [{"tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": true, "score": 3, "last_activity_date": 1470223436, "last_edit_date": 1470223436, "creation_date": 1470223008, "answer_id": 38742043, "question_id": 38741805, "link": "https://stackoverflow.com/questions/38741805/negation-inside-printf/38742043#38742043", "title": "Negation inside printf", "body": "<p>Before the operation of the <code>~</code> operator is performed, the type of the operand it promoted to <code>int</code>. This means the result of: <code>~0x04</code> will be <code>0xFFFFFFFB</code> in your case, as the width of type <code>int</code> appears to be 32 bits.</p>\n\n<p>If the value <code>0xFFFFFFFB</code> is passed to printf it isn't promoted to <code>int</code> as it is already of that type, and it is printed out.</p>\n\n<p>If <code>0xFFFFFFFB</code> is assigned back to <code>d</code>, a conversion from <code>int</code> to <code>char</code> in an implementation-defined manner is done. In your case the resulting value is: <code>0xFB</code>. When <code>d</code> is passed to printf, it gets promoted to <code>int</code>, the value of <code>0xFB</code> when promoted to <code>int</code> stays the same, and it gets printed out.</p>\n"}], "owner": {"reputation": 1015, "user_id": 6446479, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3371e33213376c495106d97858500c40?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh", "link": "https://stackoverflow.com/users/6446479/rajesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 38742043, "answer_count": 1, "score": 3, "last_activity_date": 1470223436, "creation_date": 1470222284, "question_id": 38741805, "link": "https://stackoverflow.com/questions/38741805/negation-inside-printf", "title": "Negation inside printf", "body": "<p>I have the below code and I am not sure why negation inside printf is different from doing negation outside? </p>\n\n<pre><code>char d=0x04;\nprintf(\"Value of d= %X\\n\",~d);\nd=~d;\nprintf(\"Value of d= %X\\n\",d);\n</code></pre>\n\n<p>The result printed is FFFFFFFB and FB.\nThat means can I say that, inside printf, expressions are converted to integer type (default promotion) and hence 4 bytes are appearing!</p>\n"}, {"tags": ["c", "java-native-interface", "shared-libraries", "ffi"], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 1806043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ec84a7468e0dca0de272909e13f2bb?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1806043/alex"}, "is_accepted": true, "score": 1, "last_activity_date": 1470225068, "creation_date": 1470225068, "answer_id": 38742806, "question_id": 38741789, "link": "https://stackoverflow.com/questions/38741789/how-to-merge-multpile-c-files-into-a-shared-library-for-foreign-function-interfa/38742806#38742806", "title": "How to merge multpile c files into a shared library for foreign function interface", "body": "<p>1) Create your object files with <code>-fPIC</code>:</p>\n\n<pre><code>gcc -fPIC -c file1.c\n</code></pre>\n\n<p>This creates <code>file1.o</code>. (same for <code>file2.c</code>, <code>file3.c</code> and so on).</p>\n\n<p>2) Link it in a shared library.</p>\n\n<pre><code>gcc -shared -o library.so file1.o file2.o file3.o\n</code></pre>\n\n<p>Adjust accordingly for additional compiler flags, include paths from other stuff you're using etc.</p>\n"}], "owner": {"reputation": 241, "user_id": 2350459, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9eaf3d41493d3ecf72af1d9aba52fb18?s=128&d=identicon&r=PG", "display_name": "user2350459", "link": "https://stackoverflow.com/users/2350459/user2350459"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 38742806, "answer_count": 1, "score": 0, "last_activity_date": 1470225068, "creation_date": 1470222241, "question_id": 38741789, "link": "https://stackoverflow.com/questions/38741789/how-to-merge-multpile-c-files-into-a-shared-library-for-foreign-function-interfa", "title": "How to merge multpile c files into a shared library for foreign function interface", "body": "<p>I have been following these instructions(<a href=\"http://jonisalonen.com/2012/calling-c-from-java-is-easy/\" rel=\"nofollow\">http://jonisalonen.com/2012/calling-c-from-java-is-easy/</a>) on how to create a shared library, but these instructions only show how to do it with one file. When I use this file, that I made into a shared library, the .so file can't call other .c files in the same place. How do i compile all the c files so that i can make a merged shared library that is accessible through java?</p>\n"}, {"tags": ["c", "arrays", "pointers", "arduino", "initialization"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1470221932, "post_id": 38741577, "comment_id": 64857111, "body": "Note: there is no <code>new</code> operator in C."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1470222122, "post_id": 38741577, "comment_id": 64857228, "body": "I shall change the tag from <code>c</code> to <code>c++</code>"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1470222243, "post_id": 38741577, "comment_id": 64857305, "body": "You can&#39;t assign arrays. I don&#39;t think C++ has compound literals."}, {"owner": {"reputation": 4921, "user_id": 171916, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/810fb8ed5b7f4d81ade67a2d34c1ffeb?s=128&d=identicon&r=PG", "display_name": "Narfanator", "link": "https://stackoverflow.com/users/171916/narfanator"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1470251990, "post_id": 38741577, "comment_id": 64877765, "body": "@chqrlie The re-tagging is incorrect. This is for an Arduino project, which AFAIK is C only. My C is just fuzzy enough that I though <code>new</code> was a thing in it."}, {"owner": {"reputation": 4921, "user_id": 171916, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/810fb8ed5b7f4d81ade67a2d34c1ffeb?s=128&d=identicon&r=PG", "display_name": "Narfanator", "link": "https://stackoverflow.com/users/171916/narfanator"}, "edited": false, "score": 0, "creation_date": 1470252196, "post_id": 38741577, "comment_id": 64877896, "body": "I&#39;ve retagged and removed the example using <code>new</code>. Thank you for trying to be helpful."}, {"owner": {"reputation": 4921, "user_id": 171916, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/810fb8ed5b7f4d81ade67a2d34c1ffeb?s=128&d=identicon&r=PG", "display_name": "Narfanator", "link": "https://stackoverflow.com/users/171916/narfanator"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470252617, "post_id": 38741577, "comment_id": 64878167, "body": "@wildplasser Thanks for the info, looks like the Arduino folks added it: <a href=\"http://stackoverflow.com/questions/16274451/operator-new-for-arduino\" title=\"operator new for arduino\">stackoverflow.com/questions/16274451/operator-new-for-arduin&zwnj;&#8203;o</a>"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470252658, "post_id": 38741577, "comment_id": 64878189, "body": "Your question is not very clear. <code>I don&#39;t want to initialize it during the declaration, because static initialization order...</code> what is that ? Obviously: 1) you cannot have code in in initialisers , only expressions that can be evaluated at compile (+load) time, and 2) you cannot have <code>nice array initialization syntax</code> in code, oniy in initialisers."}, {"owner": {"reputation": 4921, "user_id": 171916, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/810fb8ed5b7f4d81ade67a2d34c1ffeb?s=128&d=identicon&r=PG", "display_name": "Narfanator", "link": "https://stackoverflow.com/users/171916/narfanator"}, "edited": false, "score": 0, "creation_date": 1470253121, "post_id": 38741577, "comment_id": 64878449, "body": "Did some more research, looks like I might not have to worry about the initialization order, because this is one file. Sorry the question isn&#39;t clear. I want the global variable <code>things</code> to point to memory that has an array of <code>Thing</code> pointers. I want to populate that memory using the nice syntax, rather than index by index. Does that help?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1470253349, "post_id": 38741577, "comment_id": 64878593, "body": "Why do you want the global array <b>and</b> an array with pointers to them? <code>&amp;array[13]</code> will yield a pointer value, which you can use without first storing it into another array."}, {"owner": {"reputation": 4921, "user_id": 171916, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/810fb8ed5b7f4d81ade67a2d34c1ffeb?s=128&d=identicon&r=PG", "display_name": "Narfanator", "link": "https://stackoverflow.com/users/171916/narfanator"}, "edited": false, "score": 0, "creation_date": 1470253783, "post_id": 38741577, "comment_id": 64878792, "body": "AFAIK, global variables are the only way to pass information from the Arduino <code>setup</code> function to the <code>loop</code> function, as they&#39;re both <code>void</code> functions that take no parameters."}], "answers": [{"tags": [], "owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "is_accepted": false, "score": 1, "last_activity_date": 1470222141, "creation_date": 1470222141, "answer_id": 38741751, "question_id": 38741577, "link": "https://stackoverflow.com/questions/38741577/initialize-anonymous-array-of-pointers/38741751#38741751", "title": "Initialize anonymous array of pointers", "body": "<p>With <code>Thing* things[] = {NULL}</code>:</p>\n\n<p>You are declaring variable <code>things</code> as an array of a single element (of type <code>Thing*</code>).</p>\n\n<p>You cannot change this array once you've declared it - neither its size nor its address.</p>\n\n<p>The only thing that you can change is the contents of this array, i.e., the first (and only) element.</p>\n"}, {"comments": [{"owner": {"reputation": 4921, "user_id": 171916, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/810fb8ed5b7f4d81ade67a2d34c1ffeb?s=128&d=identicon&r=PG", "display_name": "Narfanator", "link": "https://stackoverflow.com/users/171916/narfanator"}, "edited": false, "score": 0, "creation_date": 1470251901, "post_id": 38741842, "comment_id": 64877701, "body": "Hi, that&#39;s why this is only tagged C, not C <i>and</i> C++."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1470254037, "last_edit_date": 1470254037, "creation_date": 1470222391, "answer_id": 38741842, "question_id": 38741577, "link": "https://stackoverflow.com/questions/38741577/initialize-anonymous-array-of-pointers/38741842#38741842", "title": "Initialize anonymous array of pointers", "body": "<p>I you want <code>things</code> to point to a allocated array of size 2, you must write 3 statements:</p>\n\n<pre><code>things = new Thing*[2];\nthings[0] = MakeThing();\nthings[1] = NULL;\n</code></pre>\n\n<p>The new style C99 compound literal syntax is not supported in C++, or only as an extension by some C++ compilers, but this would still not fit your purpose as the array would have automatic or static life span, not dynamic.</p>\n\n<p><strong>EDIT:</strong> Given the rephrasing done on the question, the answer is quite simple:  The global <code>things</code> array must be defined as having 2 elements and can be initialized in <code>setup</code> with 2 statements:</p>\n\n<pre><code>struct Thing {\n  int i;\n};\nThing *MakeThing(void) {\n    Thing *t = calloc(sizeof(t));\n    return t;\n}\nThing *things[2];  // implicitly initialized to { NULL, NULL };\nvoid setup(void) {\n    things[0] = MakeThing();\n    things[1] = NULL;\n}\n</code></pre>\n\n<p>Or if you absolutely insist on using the C99 compound literals at the expense of readability you could use this:</p>\n\n<pre><code>void setup(void) {\n    memcpy(things, (Thing*[]){ MakeThing(), NULL }, sizeof things);\n}\n</code></pre>\n\n<p>But I am not sure the Arduino compiler supports this syntax.  Arduino-C is neither C nor C++.</p>\n"}, {"comments": [{"owner": {"reputation": 4921, "user_id": 171916, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/810fb8ed5b7f4d81ade67a2d34c1ffeb?s=128&d=identicon&r=PG", "display_name": "Narfanator", "link": "https://stackoverflow.com/users/171916/narfanator"}, "edited": false, "score": 0, "creation_date": 1470256387, "post_id": 38752736, "comment_id": 64880072, "body": "Thanks! If I wanted to do this, but have <code>arr</code> be allocated on the heap, not the stack, how would I do that?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 4921, "user_id": 171916, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/810fb8ed5b7f4d81ade67a2d34c1ffeb?s=128&d=identicon&r=PG", "display_name": "Narfanator", "link": "https://stackoverflow.com/users/171916/narfanator"}, "edited": false, "score": 1, "creation_date": 1470257776, "post_id": 38752736, "comment_id": 64880781, "body": "That is impossible. Heap-allocation needs code, you need to call malloc(), or at least brk(). Again: you cannot use code (call functions) in initialisers. (except sometimes in c++, using a constructor)"}], "tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 0, "last_activity_date": 1470257903, "last_edit_date": 1470257903, "creation_date": 1470254933, "answer_id": 38752736, "question_id": 38741577, "link": "https://stackoverflow.com/questions/38741577/initialize-anonymous-array-of-pointers/38752736#38752736", "title": "Initialize anonymous array of pointers", "body": "<p>You can do a lot with static initialisation only, for instance (this is a doubly linked list):</p>\n\n<pre><code>struct list {\n        struct list *prev;\n        struct list *next;\n        int val;\n        };\n\nstruct list arr[] =\n{ {arr+1, arr+2, 1} \n, {arr+3, arr+4, 2} \n, {arr+5, arr+6, 3} \n, {arr+3, arr+4, 4} \n, {arr+3, arr+5, 5} \n, {arr+4, arr+6, 6} \n, {arr+5, arr+6, 7} \n        };\n</code></pre>\n\n<p>If you want extra space in the array you could use a sentinel to enable your code to fined the start of the unused space:</p>\n\n<pre><code>struct list arr[ 100] =\n{ {arr+1, arr+2, 1}\n, {arr+3, arr+4, 2}\n, {arr+5, arr+6, 3}\n, {arr+3, arr+4, 4}\n, {arr+3, arr+5, 5}\n, {arr+4, arr+6, 6}\n, {arr+5, arr+6, 7}\n, { NULL, NULL, -1}\n        };\n</code></pre>\n\n<p>... Or abuse the preprocessor as a line counter:</p>\n\n<pre><code>struct list arr[ 100] =\n# /* reset preprocessor line counter */\n# 0 \"omg\"\n{ {arr+1, arr+2, 1}\n, {arr+3, arr+4, 2}\n, {arr+5, arr+6, 3}\n, {arr+3, arr+4, 4}\n, {arr+3, arr+5, 5}\n, {arr+4, arr+6, 6}\n, {arr+5, arr+6, 7}\n        };\nunsigned watermark = (__LINE__ -1);\n</code></pre>\n\n<p>... and of course the above could be changed,using the designated initialiser syntax.</p>\n\n<p>BTW: This is not a DoublyLinkedList, (the offsets look wrong), but you get the idea...</p>\n"}, {"tags": [], "owner": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "is_accepted": false, "score": 1, "last_activity_date": 1470507472, "creation_date": 1470507472, "answer_id": 38807411, "question_id": 38741577, "link": "https://stackoverflow.com/questions/38741577/initialize-anonymous-array-of-pointers/38807411#38807411", "title": "Initialize anonymous array of pointers", "body": "<p>First of all, all of those fail to compile because it's illegal to assign to an array (to a variable of array type) in C.</p>\n\n<p>Second, even if you could assign to an array in C (let's say it copies all the elements), what you're trying to do still won't work because you would be assigning between different array types -- the size is part of an array type. <code>Thing *[1]</code> and <code>Thing *[2]</code> are completely different types. If you have a variable of array type, the size is hard-coded at compile time. Your variable <code>things</code> has type <code>Thing *[1]</code> and that's hard-coded at compile time, and cannot be changed. (With C99 VLAs, you can have an array variable whose size is not hard-coded at compile time, but is fixed at the time the array variable is defined, and still cannot be changed afterwards during the lifetime of the variable.)</p>\n\n<p>So if you want to have a variable which refers to arrays of different sizes over the lifetime of the variable, it cannot have array type. You have to declare it of pointer type (in this case <code>Thing **</code>). The array whose elements the pointer points to will then have to be dynamically allocated, and you will have to memory manage that allocation. This is basically what chrqlie's answer is showing. I am not sure what dynamic allocation mechanism is used in this Arduino that you're using, since you say that it is a mix of languages, but in C++ you would use <code>new []</code>/<code>delete []</code> and in C you would use <code>malloc</code>/<code>free</code> for dynamic allocation.</p>\n"}], "owner": {"reputation": 4921, "user_id": 171916, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/810fb8ed5b7f4d81ade67a2d34c1ffeb?s=128&d=identicon&r=PG", "display_name": "Narfanator", "link": "https://stackoverflow.com/users/171916/narfanator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1470507472, "creation_date": 1470221685, "last_edit_date": 1470253172, "question_id": 38741577, "link": "https://stackoverflow.com/questions/38741577/initialize-anonymous-array-of-pointers", "title": "Initialize anonymous array of pointers", "body": "<p>I'm doing shenanigans with pointers for an Arduino hobby project, and I've come across a situation I can't resolve.</p>\n\n<p>Basically, I have a global (because Arduino) array of pointers to <code>Thing</code>. I don't want to initialize it during the declaration, but I want to take advantage of the nice array initialization syntax.</p>\n\n<p><strong>Please note that this is an Arduino project and so uses an unusual mix of C and C++, because Arduino.</strong> From some basic research, looks like that if it'll work in C, or C++ without libraries, it'll work for this.</p>\n\n<p>Note: I'm using NULL as a way to detect the end of the array as I loop over it, elsewhere in the code.</p>\n\n<p>Something like so:</p>\n\n<pre><code>struct Thing {\n  int i;\n};\nThing * MakeThing() {\n  return new Thing;\n}\nThing * things[] = {\n  NULL\n};\nvoid setup() {\n  things = (Thing*[]){\n    MakeThing(),\n    NULL\n  };\n}\n</code></pre>\n\n<p>However, this gets me a <code>error: incompatible types in assignment of 'Thing* [2]' to 'Thing* [1]'</code></p>\n\n<p>I tried:</p>\n\n<pre><code>  Thing* _things[] {\n    MakeThing(),\n    NULL\n  };\n  things = _things;\n</code></pre>\n\n<p>Same error.</p>\n\n<p>I tried:</p>\n\n<pre><code>  things =  new Thing*[] {\n    MakeThing(),\n    NULL\n  };\n</code></pre>\n\n<p>Same error.</p>\n\n<p>I tried:</p>\n\n<pre><code>  things = new Thing** {\n    MakeThing(),\n    NULL\n  };\n</code></pre>\n\n<p>which gets a <code>error: cannot convert '&lt;brace-enclosed initializer list&gt;' to 'Thing**' in initialization</code></p>\n\n<p>I tried:</p>\n\n<pre><code>  things = new Thing*[] {\n    MakeThing(),\n    NULL\n  };\n</code></pre>\n\n<p>which gets <code>error: incompatible types in assignment of 'Thing**' to 'Thing* [1]'</code></p>\n\n<p>What's going on that this doesn't work? How can I make it work?</p>\n"}, {"tags": ["c", "gcc", "assembly", "compilation", "memory-barriers"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1470239116, "post_id": 38741512, "comment_id": 64870155, "body": "Terminology: <b>out-of-order execution is separate from memory reordering</b>.  Even in-order CPUs are pipelined and benefit from a store buffer, especially for stores that miss in L1.  (<a href=\"https://en.wikipedia.org/wiki/MESI_protocol#Memory_Barriers\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/MESI_protocol#Memory_Barriers</a>.  Once they&#39;re known not to be speculative, they can be tracked only by memory-ordering logic (to enforce StoreStore and LoadStore ordering if needed) until they actually commit to L1 cache, after the pipeline has forgotten about them.)  <code>MFENCE</code> doesn&#39;t serialize the pipeline; it only serializes the order that memory operations become globally visible."}], "answers": [{"comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 3, "creation_date": 1470223116, "post_id": 38741832, "comment_id": 64857874, "body": "You wrote a much better answer than me."}, {"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1470223590, "post_id": 38741832, "comment_id": 64858189, "body": "Right answer. I have tested it now with <code>volatile</code>, and the code with the memory barrier was compiled right as I expected (while the code without the memory barrier was still optimized a bit). Unfortunately I cannot test the <code>atomic</code> as I don&#39;t have C11 support."}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1470223835, "post_id": 38741832, "comment_id": 64858367, "body": "@2501 Thanks. Feel free to extend it, if you think something could be improved. :)"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1470229684, "post_id": 38741832, "comment_id": 64862884, "body": "@a3f Are you sure? Try to compile with <code>gcc -std=c11</code>."}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1470230302, "post_id": 38741832, "comment_id": 64863360, "body": "@FUZxxl What exactly should I be looking at?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1470230928, "post_id": 38741832, "comment_id": 64863818, "body": "@a3f If the compiler accepts this option, it supports C11. Note that this is not the default on old gcc versions (older than 5.0) and C11 features might not be available if the dialect isn&#39;t set to C11 or newer."}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1470231682, "post_id": 38741832, "comment_id": 64864412, "body": "@Fuzxxl Uhm, Did you maybe mean to address OP?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 1, "creation_date": 1470232957, "post_id": 38741832, "comment_id": 64865416, "body": "@user2162550 Have you tried to compile with <code>gcc -std=c11</code>?"}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1470237704, "post_id": 38741832, "comment_id": 64869144, "body": "Now I wonder (and don&#39;t have gcc around for next few hours), if I would alias <code>int x;</code> as memory pointer <code>int *xptr = &amp;x;</code> and use that one to write value, would the optimizer still manage to remove the x writes completely (understanding fully the uselessness of alias), or would it get afraid of pointer usage and do the write with <code>mfence</code>?"}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "reply_to_user": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1470244362, "post_id": 38741832, "comment_id": 64873505, "body": "@Ped7g Pointer usage is optimized as expected. I found what looks like a missed optimization though and have edited the answer."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1470247754, "post_id": 38741832, "comment_id": 64875364, "body": "What you reported is not a bug.  <code>static int y;</code> can be optimized away because no other functions in the compilation unit observe it.  There are potential observers for the stores to (global) <code>int x;</code>, so it can&#39;t be optimized away.  <a href=\"https://godbolt.org/g/xt5kGz\" rel=\"nofollow noreferrer\">If you include a <code>int gety(){return y;}</code> in the compilation unit, f() and g() compile the same</a>."}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1470249914, "post_id": 38741832, "comment_id": 64876625, "body": "@PeterCordes But GCC doesn&#39;t have to assume that these other observers are asynchronous. <a href=\"https://godbolt.org/g/YkBokp\" rel=\"nofollow noreferrer\">What matters is the value that is stored into x at the end, see this example without barriers</a>."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1470250203, "post_id": 38741832, "comment_id": 64876784, "body": "@a3f: Right, unless you use asm statements that could contain code that observes the <code>x</code> or <code>y</code>.  gcc has to assume that since you used a <code>&quot;memory&quot;</code> clobber.  So that&#39;s part of the semantics of that form of compiler barrier."}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1470251189, "post_id": 38741832, "comment_id": 64877313, "body": "@PeterCordes This makes sense, but if <code>x = 1</code> can be observed by the <code>asm</code> and therefore has to be written, why wouldn&#39;t the same apply to <code>static y</code>?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1470251888, "post_id": 38741832, "comment_id": 64877692, "body": "Hrm, good question.  Yeah, I get a link error if I reference <code>y</code> when it&#39;s optimized away (<a href=\"https://godbolt.org/g/lsKvqh\" rel=\"nofollow noreferrer\">godbolt.org/g/lsKvqh</a>).  See the notes and comments in that godbolt link.  I&#39;m not sure how to explain this, but I&#39;m still sure that the stores are optimized away only when <code>y</code> doesn&#39;t exist at all.  Obviously the better way to write such asm would use an input, output, or read-write operand with a constraint, instead of just referencing the symbol directly.  That also avoids issues with C++ name mangling making it hard to actually reference <code>y</code>. But that isn&#39;t why the compiler assumes you don&#39;t."}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1470251966, "post_id": 38741832, "comment_id": 64877751, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/119045/discussion-between-a3f-and-peter-cordes\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "is_accepted": true, "score": 4, "last_activity_date": 1470254390, "last_edit_date": 1470254390, "creation_date": 1470222356, "answer_id": 38741832, "question_id": 38741512, "link": "https://stackoverflow.com/questions/38741512/using-memory-barriers-to-force-in-order-execution/38741832#38741832", "title": "Using memory barriers to force in-order execution", "body": "<p>The memory barriers tell the compiler/CPU that instruction shouldn't be reordered across the barrier, they don't mean that writes that can be proven pointless have to be done anyway.</p>\n\n<p>If you define your <code>x</code> as <code>volatile</code>, the compiler can't make the assumption, that it's the only entity that cares about <code>x</code>s value and has to follow the rules of the C abstract machine, which is for the memory write to actually happen.</p>\n\n<p>In your specific case you could then skip the barriers, because it's already guaranteed that volatile accesses aren't reordered against each other.</p>\n\n<p>If you have C11 support, you are better off using <code>_Atomic</code>s, which additionally can guarantee that normal assignments won't be reordered against your <code>x</code> and that the accesses are atomic.</p>\n\n<hr>\n\n<p>EDIT: GCC (as well as clang) seem to be inconsistent in this regard and won't always do this optimizaton. <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=72795\" rel=\"nofollow\">I opened a GCC bug report regarding this.</a></p>\n"}], "owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2780, "favorite_count": 0, "accepted_answer_id": 38741832, "answer_count": 1, "score": 6, "last_activity_date": 1470254390, "creation_date": 1470221502, "last_edit_date": 1495541444, "question_id": 38741512, "link": "https://stackoverflow.com/questions/38741512/using-memory-barriers-to-force-in-order-execution", "title": "Using memory barriers to force in-order execution", "body": "<p>Trying to go on with my idea that using both software and hardware memory barriers I could disable the out-of-order optimization for a specific function inside a code that is compiled with compiler optimization, and therefore I could implement software semaphore using algorithms like <code>Peterson</code> or <code>Deker</code> that requires no out-of-order execution, I have tested the following code that contains both SW barrier <code>asm volatile(\"\": : :\"memory\")</code> and gcc builtin HW barrier <code>__sync_synchronize</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(int argc, char ** argv)\n{\n    int x=0;\n    asm volatile(\"\": : :\"memory\");\n    __sync_synchronize();\n    x=1;\n    asm volatile(\"\": : :\"memory\");\n    __sync_synchronize();\n    x=2;\n    asm volatile(\"\": : :\"memory\");\n    __sync_synchronize();\n    x=3;\n    printf(\"%d\",x);\n    return 0;\n}\n</code></pre>\n\n<p>But the compilation output file is:</p>\n\n<pre><code>main:\n.LFB24:\n    .cfi_startproc\n    subq    $8, %rsp\n    .cfi_def_cfa_offset 16\n    mfence\n    mfence\n    movl    $3, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    mfence\n    call    __printf_chk\n    xorl    %eax, %eax\n    addq    $8, %rsp\n</code></pre>\n\n<p>And if I remove the barriers and compile again, I get:</p>\n\n<pre><code>main\n.LFB24:\n    .cfi_startproc\n    subq    $8, %rsp\n    .cfi_def_cfa_offset 16\n    movl    $3, %edx\n    movl    $.LC0, %esi\n    movl    $1, %edi\n    xorl    %eax, %eax\n    call    __printf_chk\n    xorl    %eax, %eax\n    addq    $8, %rsp\n</code></pre>\n\n<p>both compiled with <code>gcc -Wall -O2</code> in Ubuntu 14.04.1 LTS, x86.</p>\n\n<p>The expected result was that the output file of the code that contains the memory barriers will contain all the assignments of the values I have in my source code, with <code>mfence</code> between them.</p>\n\n<p>According to a related StackOverflow post - </p>\n\n<p><a href=\"https://stackoverflow.com/questions/19965076/gcc-memory-barrier-sync-synchronize-vs-asm-volatile-memory\">gcc memory barrier __sync_synchronize vs asm volatile(&quot;&quot;: : :&quot;memory&quot;)</a></p>\n\n<blockquote>\n  <p>When adding your inline assembly on each iteration, gcc is not permitted to change the order of the operations past the barrier</p>\n</blockquote>\n\n<p>And later on:</p>\n\n<blockquote>\n  <p>However, when the CPU performes this code, it's permitted to reorder\n  the operations \"under the hood\", as long as it does not break memory\n  ordering model. This means that performing the operations can be done\n  out of order (if the CPU supports that, as most do these days). A HW\n  fence would have prevented that.</p>\n</blockquote>\n\n<p>But as you can see, the only difference between the code with the memory barriers and the code without them is that the former one contains <code>mfence</code> in a way I was not expected to see it, and not all the assignments are included.</p>\n\n<p>Why is the output file of the file with the memory barriers was not as I expected- Why does the <code>mfence</code> order has been altered? Why did the compiler remove some of the assignments? Is the compiler allowed to make such optimizations even if the memory barrier is applied and separates every single line of code?</p>\n\n<p>References to the memory barrier types and usage:</p>\n\n<ul>\n<li><p>Memory Barriers - <a href=\"http://bruceblinn.com/linuxinfo/MemoryBarriers.html\" rel=\"nofollow noreferrer\">http://bruceblinn.com/linuxinfo/MemoryBarriers.html</a></p></li>\n<li><p>GCC Builtins - <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.4.3/gcc/Atomic-Builtins.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc-4.4.3/gcc/Atomic-Builtins.html</a></p></li>\n</ul>\n"}, {"tags": ["c", "prototype"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1470221163, "post_id": 38741334, "comment_id": 64856629, "body": "It&#39;s not defined to point to another function. It&#39;s a preprocessor directive that specifies token substitution. The function isn&#39;t declared at all."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1470223053, "post_id": 38741334, "comment_id": 64857827, "body": "<code>#define foo bar</code> What on earth are you trying to do?"}, {"owner": {"reputation": 13, "user_id": 5480019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1823b18ba12111b94793e785e56b4159?s=128&d=identicon&r=PG&f=1", "display_name": "Pedersen", "link": "https://stackoverflow.com/users/5480019/pedersen"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1470295569, "post_id": 38741334, "comment_id": 64893859, "body": "@Lightness Races in Orbit, Hey, I am not trying to do anything. This warning comes from Umon bootloader, so I am just trying to &quot;correct&quot; their way of thinking"}, {"owner": {"reputation": 13, "user_id": 5480019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1823b18ba12111b94793e785e56b4159?s=128&d=identicon&r=PG&f=1", "display_name": "Pedersen", "link": "https://stackoverflow.com/users/5480019/pedersen"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1470295619, "post_id": 38741334, "comment_id": 64893898, "body": "@StoryTeller, Sorry, bad choice of word from my side"}], "answers": [{"tags": [], "owner": {"reputation": 30739, "user_id": 186193, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/df61dcc6eec08cb7d62f1959b89ae843?s=128&d=identicon&r=PG", "display_name": "Ferenc Deak", "link": "https://stackoverflow.com/users/186193/ferenc-deak"}, "is_accepted": false, "score": 0, "last_activity_date": 1470221326, "last_edit_date": 1495540847, "creation_date": 1470221326, "answer_id": 38741450, "question_id": 38741334, "link": "https://stackoverflow.com/questions/38741334/correct-way-to-define-a-prototype/38741450#38741450", "title": "Correct way to define a prototype", "body": "<p>I think, that what happens is the following:</p>\n\n<p>The compiler replaces the macro <code>foo</code> with <code>bar</code> but since at that stage <code>bar</code> is not declared anywhere as a function the compiler will complain, that it cannot find it.</p>\n\n<p>Please see more: <a href=\"https://stackoverflow.com/questions/434763/are-prototypes-required-for-all-functions-in-c89-c90-or-c99\">Are prototypes required for all functions in C89, C90 or C99?</a></p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5480019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1823b18ba12111b94793e785e56b4159?s=128&d=identicon&r=PG&f=1", "display_name": "Pedersen", "link": "https://stackoverflow.com/users/5480019/pedersen"}, "edited": false, "score": 0, "creation_date": 1470295777, "post_id": 38741677, "comment_id": 64893994, "body": "Hey, thanks! That actually makes sense. So the correct way is to do as I always have"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 0, "last_activity_date": 1470221955, "creation_date": 1470221955, "answer_id": 38741677, "question_id": 38741334, "link": "https://stackoverflow.com/questions/38741334/correct-way-to-define-a-prototype/38741677#38741677", "title": "Correct way to define a prototype", "body": "<p>If the compiler encounters the declaration <code>extern void foo(void);</code> <strong>after</strong> the <code>#define foo bar</code> for the same source file, it will parse it as <code>extern void bar(void);</code>  And the linker will just solve the <code>bar</code> symbol.</p>\n\n<p>Note that you definition of <code>bar</code> is not consistent with the declaration above.  The definition of <code>bar</code> should read:</p>\n\n<pre><code>void bar(void) {\n    // Do something;\n}\n</code></pre>\n\n<p>in C, unlike C++, an argument list of <code>(void)</code> is subtly different from an empty argument list.</p>\n"}], "owner": {"reputation": 13, "user_id": 5480019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1823b18ba12111b94793e785e56b4159?s=128&d=identicon&r=PG&f=1", "display_name": "Pedersen", "link": "https://stackoverflow.com/users/5480019/pedersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 38741677, "answer_count": 2, "score": 1, "last_activity_date": 1470221955, "creation_date": 1470221014, "question_id": 38741334, "link": "https://stackoverflow.com/questions/38741334/correct-way-to-define-a-prototype", "title": "Correct way to define a prototype", "body": "<p>Came across a situation where I was in doubt how to define the prototype the correct way. It\u00b4s easier to just look at a simple example:</p>\n\n<p>Document A.c:</p>\n\n<pre><code>#define foo bar\n\nvoid mon() {\n  foo();\n}\n</code></pre>\n\n<p>Document B.c:</p>\n\n<pre><code>void bar() {\n  Do something;\n}\n</code></pre>\n\n<p>Gives following warning:</p>\n\n<p>Warning: Function does not have a full prototype</p>\n\n<p>Normally I would solve it by:</p>\n\n<pre><code>extern void foo(void);\n</code></pre>\n\n<p>But as example show, the function dont exactly exist but is defined to point on another function. What is the correct way to make a prototype for this?</p>\n"}, {"tags": ["c", "standards", "ansi", "c11"], "comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1470220577, "post_id": 38740708, "comment_id": 64856237, "body": "An interesting extension to this question is: <i>What is the difference between the ANSI and ISO official documents available for a free and the final draft freely accessible from the official website at <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf</a></i> ?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1470221144, "post_id": 38740708, "comment_id": 64856614, "body": "The one labelled 2012 probably includes differences from the 2012 Corrigendum (a correction of minor errors found after release).  The corrections made by the Corrigendum are listed at <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1606.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n1606.pdf</a>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1470223422, "post_id": 38740708, "comment_id": 64858076, "body": "@Peter So: newer, corrected and cheaper...Too good to be true... ;)"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1470230144, "post_id": 38740708, "comment_id": 64863236, "body": "That&#39;s assuming I&#39;m right, of course."}], "answers": [{"comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1470298286, "post_id": 38759672, "comment_id": 64895559, "body": "Did they address the price discrepancy?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1470299387, "post_id": 38759672, "comment_id": 64896271, "body": "@2501 The sentence <i>which generally results in a lesser fee than buying the ISO version</i> is all they wrote about price."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1471542775, "post_id": 38759672, "comment_id": 65399953, "body": "That&#39;s very interesting! Does it imply that a national body that participates in the ISO/IEC JTC subcommittees could possibly publish its own version (with just a different front cover I suppose) for free?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1471845560, "post_id": 38759672, "comment_id": 65492529, "body": "@chqrlie if <code>2+2 = 4</code>... ;)"}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 3, "last_activity_date": 1470291541, "last_edit_date": 1470291541, "creation_date": 1470291052, "answer_id": 38759672, "question_id": 38740708, "link": "https://stackoverflow.com/questions/38740708/c11-standard-docs/38759672#38759672", "title": "C11 Standard docs", "body": "<p>I finally got answers from:</p>\n\n<ul>\n<li><p>Ansi</p>\n\n<blockquote>\n  <p>The <strong>ISO/IEC 9899:2011</strong> is the original ISO standard published by ISO.<br>\n  The <strong>INCITS/ISO/IEC 9899-2012</strong> is the domestic U.S. adoption of the ISO. </p>\n</blockquote></li>\n<li><p>INCITS</p>\n\n<blockquote>\n  <p><strong>Technically, the two standards are identical.</strong> The US version has additional front matter to add a U.S. cover and adoption date details. Once we adopt the international standard, we can set the price based on our fee schedule, which generally results in a lesser fee than buying the ISO version.</p>\n  \n  <p>To provide more background on this, most INCITS technical committees hold U. S. Technical Advisory Group (TAG) relationships to ISO/IEC JTC 1 subcommittees and working groups and, to some ISO technical committees, subcommittees and working groups.<br>\n  Subject to a few exceptions, INCITS adopts all ISO/IEC or ISO standards that fall within its program of work as \u201cIdentical\u201d American National Standards in accordance with the ANSI \u201cExpedited Procedures for the Identical Adoption of an ISO or IEC standard as an American National Standard\u201d.  </p>\n  \n  <p>Similarly, INCITS will generally withdraw any such adopted American National Standard that has been withdrawn as an ISO/IEC or ISO International Standard. </p>\n</blockquote></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "is_accepted": false, "score": 2, "last_activity_date": 1475118189, "creation_date": 1475118189, "answer_id": 39760719, "question_id": 38740708, "link": "https://stackoverflow.com/questions/38740708/c11-standard-docs/39760719#39760719", "title": "C11 Standard docs", "body": "<blockquote>\n  <p>What is the difference between the ANSI and ISO official documents available for a free and the final draft freely accessible from the official website at open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf</p>\n</blockquote>\n\n<p>There were several erroneous sentences in n1570 mentioning <code>_Alignof</code> for expressions, which doesn't exist. So <code>_Alignof</code> was removed from 6.3.2.1p2, p3, p4, fn. 65; and 6.7.1 fn. 121. </p>\n\n<p>Note that since C11 we had a (very trivial) technical corrigendum and a whole lot of accepted defect reports that a conforming C11 compiler may implement ahead of a new TC or standard.</p>\n"}], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1647, "favorite_count": 7, "accepted_answer_id": 38759672, "answer_count": 2, "score": 10, "last_activity_date": 1518645766, "creation_date": 1470219313, "last_edit_date": 1518645766, "question_id": 38740708, "link": "https://stackoverflow.com/questions/38740708/c11-standard-docs", "title": "C11 Standard docs", "body": "<p>Starting from this <a href=\"https://stackoverflow.com/questions/81656/where-do-i-find-the-current-c-or-c-standard-documents\">SO protected question</a> I'm trying to understand what the difference between those documents:</p>\n\n<ol>\n<li><a href=\"http://webstore.ansi.org/RecordDetail.aspx?sku=INCITS%2FISO%2FIEC+9899-2012\" rel=\"nofollow noreferrer\">9899 2012</a> costs <code>$60</code></li>\n<li><a href=\"http://webstore.ansi.org/RecordDetail.aspx?sku=ISO%2fIEC+9899%3a2011\" rel=\"nofollow noreferrer\">9899 2011</a> costs <code>$265</code></li>\n</ol>\n\n<p>As you can see those documents have very different prices and I don't know if the cheaper one is valid or is something like draft or cut copy of the real standard.</p>\n\n<p>Did someone buy the INCITS one?</p>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>As @Chqrlie pointed out: <em>What is the difference between the ANSI and ISO official documents available for a free and the final draft freely accessible from the official website at</em> <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf</a> </p>\n"}, {"tags": ["c", "pointers", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1470218699, "post_id": 38740376, "comment_id": 64855027, "body": "@Bathsheba yeah ... <code>***a=*a+1;**&lt;br&gt;</code>  WT*?"}], "answers": [{"comments": [{"owner": {"reputation": 598, "user_id": 6671710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-3K1rEAN3900/AAAAAAAAAAI/AAAAAAAAAEw/gB8Vb6lAVsU/photo.jpg?sz=128", "display_name": "Sriram Jayaraman", "link": "https://stackoverflow.com/users/6671710/sriram-jayaraman"}, "edited": false, "score": 0, "creation_date": 1470219009, "post_id": 38740457, "comment_id": 64855226, "body": "what does *a++ actually do it increments the address?? if so how ?? Im not able to contemplate it"}, {"owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "reply_to_user": {"reputation": 598, "user_id": 6671710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-3K1rEAN3900/AAAAAAAAAAI/AAAAAAAAAEw/gB8Vb6lAVsU/photo.jpg?sz=128", "display_name": "Sriram Jayaraman", "link": "https://stackoverflow.com/users/6671710/sriram-jayaraman"}, "edited": false, "score": 0, "creation_date": 1470219203, "post_id": 38740457, "comment_id": 64855348, "body": "<code>a</code> is just local variable. It gets incremented but it&#39;s not used anymore, so no harm. If you write to it, it will change memory after the original variable"}], "tags": [], "owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "is_accepted": false, "score": 3, "last_activity_date": 1470218653, "creation_date": 1470218653, "answer_id": 38740457, "question_id": 38740376, "link": "https://stackoverflow.com/questions/38740376/does-increment-in-pointer-not-same-as-that-of-integer/38740457#38740457", "title": "Does increment in pointer not same as that of integer?", "body": "<p>You are missing operator priorities. The <code>(*a)++;</code> is something totally different from <code>*a++</code>.\nThe first one increments value at address <code>a</code>, second one post increment <code>a</code> and gets value at the original address.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1470602233, "post_id": 38741300, "comment_id": 65003544, "body": "<code>(*a)++</code> would work; so would <code>a[0]++</code>."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 0, "last_activity_date": 1470608744, "last_edit_date": 1470608744, "creation_date": 1470220940, "answer_id": 38741300, "question_id": 38740376, "link": "https://stackoverflow.com/questions/38740376/does-increment-in-pointer-not-same-as-that-of-integer/38741300#38741300", "title": "Does increment in pointer not same as that of integer?", "body": "<p>The statement <code>printf(\"%d\\n\",a);</code> does not print the value of the integer pointed to by <code>a</code>.  As written, it invokes undefined behavior.</p>\n\n<pre><code>printf(\"%p\\n\", (void*)a);\n</code></pre>\n\n<p>would print the value of the pointer, ie the address of the integer variable.</p>\n\n<pre><code>printf(\"%d\\n\", *a);\n</code></pre>\n\n<p>would print the value of the integer.</p>\n\n<p>Futhermore, <code>*a=*a+1;</code> is not the same as <code>*a++;</code>.  Due to operator precedence rules, <code>*a++</code> is parsed as <code>*(a++)</code>, the pointer is incremented, not the value pointed to.  You could use <code>++*a;</code> as a shorthand for <code>*a = *a + 1;</code>, and other variants are possible: <code>++a[0]</code>, <code>a[0]++</code>, <code>(*a)++</code>, but the preferred solution is:</p>\n\n<pre><code>*a += 1;\n</code></pre>\n"}], "owner": {"reputation": 598, "user_id": 6671710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-3K1rEAN3900/AAAAAAAAAAI/AAAAAAAAAEw/gB8Vb6lAVsU/photo.jpg?sz=128", "display_name": "Sriram Jayaraman", "link": "https://stackoverflow.com/users/6671710/sriram-jayaraman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "closed_date": 1470601300, "accepted_answer_id": 38741300, "answer_count": 2, "score": -1, "last_activity_date": 1470608744, "creation_date": 1470218452, "last_edit_date": 1470218808, "question_id": 38740376, "link": "https://stackoverflow.com/questions/38740376/does-increment-in-pointer-not-same-as-that-of-integer", "closed_reason": "Not suitable for this site", "title": "Does increment in pointer not same as that of integer?", "body": "<p><em>Consider the code below:</em></p>\n\n<pre><code>void increment(int* a)\n{\n    printf(\"%d\\n\",a);\n    *a=*a+1;\n}\nint main()\n{\n    int a=10;\n    int* p=&amp;a;\n    increment(&amp;a);\n    printf(\"%d\",a);\n    return 0;\n}\n</code></pre>\n\n<p><em>This increments a to be 11 but this :</em></p>\n\n<pre><code>void increment(int* a)\n{\n    printf(\"%d\\n\",a);\n     *a++;\n}\nint main()\n{\n    int a=10;\n    int* p=&amp;a;\n    increment(&amp;a);\n    printf(\"%d\",a);\n    return 0;\n}\n</code></pre>\n\n<p>The above code generates value as 10.</p>\n\n<p>Is the pointer arithmetic not like integer arithmetic or am I missing something here??</p>\n"}, {"tags": ["c", "memory-management", "stack", "malloc", "heap"], "comments": [{"owner": {"reputation": 14006, "user_id": 2204926, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FDbXT.png?s=128&g=1", "display_name": "Idos", "link": "https://stackoverflow.com/users/2204926/idos"}, "edited": false, "score": 6, "creation_date": 1470215460, "post_id": 38739199, "comment_id": 64852858, "body": "Because C gives you enough rope to hang yourself."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1470215462, "post_id": 38739199, "comment_id": 64852860, "body": "delete <code>x=(int*)malloc(sizeof(int));</code>, <code>%d</code> --&gt; <code>&quot;%d\\n&quot;</code>"}, {"owner": {"reputation": 1248, "user_id": 1791872, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6nnz7.png?s=128&g=1", "display_name": "flau", "link": "https://stackoverflow.com/users/1791872/flau"}, "edited": false, "score": 1, "creation_date": 1470215835, "post_id": 38739199, "comment_id": 64853127, "body": "Don&#39;t cast the result of malloc in C, and use sizeof(*x) instead of sizeof(int)."}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 1, "creation_date": 1470217925, "post_id": 38739199, "comment_id": 64854528, "body": "You&#39;re passing the address of a stack variable, allocate some heap memory, and set the value in there to 20, you&#39;re never modifying the stack variable. Instead, you&#39;re leaking memory"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1470218119, "post_id": 38739199, "comment_id": 64854648, "body": "Don&#39;t lie. <code>printf(%d,y);</code> compiled? Hang me instead."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1470218146, "post_id": 38739199, "comment_id": 64854663, "body": "<i>Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Complete, and Verifiable example.</i>"}], "answers": [{"comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1470380489, "post_id": 38739375, "comment_id": 64936713, "body": "@user3781974 You have a couple typos in the code in your question. Please fix them."}], "tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": true, "score": 6, "last_activity_date": 1470215794, "creation_date": 1470215794, "answer_id": 38739375, "question_id": 38739199, "link": "https://stackoverflow.com/questions/38739199/why-this-code-doesnt-print-20/38739375#38739375", "title": "why this code doesn&#39;t print &quot;20&quot;?", "body": "<p>There is nothing wrong with the code syntactically, so it compiles.</p>\n\n<p>The address of <code>y</code> is passed to the function. the pointer <code>x</code> in the function which holds the address of <code>y</code>, is overridden by an address of valid memory allocated by malloc. An int is written there and not into <code>y</code> as the value of the pointer was changed. Then the function returns (the allocated memory in <code>fun</code> does 'leak').</p>\n\n<p>The value of <code>y</code> in the main stays unchanged. </p>\n\n<p>The behavior of this program is defined.</p>\n"}, {"comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 2, "creation_date": 1470216517, "post_id": 38739574, "comment_id": 64853643, "body": "The example you gave is wrong as memory is allocated to copy of <code>y</code> and   <code>y</code> remians <i>uninitialized</i> in <code>main</code> . So basically it has <b><i>undefined behaviour</i></b> ."}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1470217990, "post_id": 38739574, "comment_id": 64854570, "body": "Why on earth would you use double indirection? Why not <code>void fun(int *x) { *x = 20; }</code> and just pass <code>int y; fun(&amp;y);</code> in main?"}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "reply_to_user": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1470218169, "post_id": 38739574, "comment_id": 64854677, "body": "@EliasVanOotegem Because the OP is following a dynamic memory allocation example, so the answer is related to the question."}], "tags": [], "owner": {"reputation": 585, "user_id": 4617334, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/GwUnw.jpg?s=128&g=1", "display_name": "Madhusoodan P", "link": "https://stackoverflow.com/users/4617334/madhusoodan-p"}, "is_accepted": false, "score": 3, "last_activity_date": 1470216615, "last_edit_date": 1470216615, "creation_date": 1470216279, "answer_id": 38739574, "question_id": 38739199, "link": "https://stackoverflow.com/questions/38739199/why-this-code-doesnt-print-20/38739574#38739574", "title": "why this code doesn&#39;t print &quot;20&quot;?", "body": "<p>hey you  are passing a copy of address of the variable y which is pushed on the stack. You just manipulate the pointer (At the location where the pointer was pushed) by assigning the address returned by <code>malloc</code> and copy a value of 20 into that address by </p>\n\n<pre><code>*x = 20\n</code></pre>\n\n<p>which doesn't have impact on variable in <code>main</code> i.e <code>y</code></p>\n\n<p>If you want it to print 20 this may help</p>\n\n<pre><code>void fun(int** x){\n    *x=(int*)malloc(sizeof(int));\n    **x = 20;\n}\n\nint main(){\n    int *y;\n    fun(&amp;y);\n    printf(\"%d\",*y);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 6671460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36cbb72e26655dea57bc611398ff4f8c?s=128&d=identicon&r=PG&f=1", "display_name": "prownd", "link": "https://stackoverflow.com/users/6671460/prownd"}, "is_accepted": false, "score": 1, "last_activity_date": 1470218912, "last_edit_date": 1470218912, "creation_date": 1470217829, "answer_id": 38740138, "question_id": 38739199, "link": "https://stackoverflow.com/questions/38739199/why-this-code-doesnt-print-20/38740138#38740138", "title": "why this code doesn&#39;t print &quot;20&quot;?", "body": "<pre><code>x=(int*)malloc(sizeof(int));  //x point to a new addr.\n\n*x = 20;  // change value of new pointer \n</code></pre>\n\n<p>delete the line <code>x=(int*)malloc(sizeof(int));</code>,then it will work .</p>\n"}, {"tags": [], "owner": {"reputation": 737, "user_id": 3373945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oa5aU.jpg?s=128&g=1", "display_name": "ViKiG", "link": "https://stackoverflow.com/users/3373945/vikig"}, "is_accepted": false, "score": 0, "last_activity_date": 1470223209, "creation_date": 1470223209, "answer_id": 38742110, "question_id": 38739199, "link": "https://stackoverflow.com/questions/38739199/why-this-code-doesnt-print-20/38742110#38742110", "title": "why this code doesn&#39;t print &quot;20&quot;?", "body": "<p>I suppose what you wanted to do is change the address of the variable <code>y</code> in the <code>main</code> function. You cannot do that by passing the address value of <code>y</code> into a function. Because there is simply no assigning operation done on address of <code>y</code>. In your example there is no variable (which is basically a pointer) for the address of <code>y</code> (forget about assigning).</p>\n\n<pre><code>    int* fun(int* x){\n        printf(\"Fun before %p - %d\\n\", x, *x);\n        x = malloc(sizeof(int));\n        *x = 20;\n        printf(\"Fun after %p - %d\\n\", x, *x);\n        return x;  // return your new address\n   }\n\n   int main(){\n       int *y = malloc(sizeof(int));\n       *y = 31;\n       printf(\"Main before %p - %d\\n\", y, *y);\n       y = fun(y);  // assign your new address here\n       printf(\"Main after %p - %d\\n\", y, *y);\n       return 0;\n   }\n</code></pre>\n\n<p>But above code will do.</p>\n"}], "owner": {"reputation": 113, "user_id": 3781974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c7485daf0dff523e9a4b8068384b28b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3781974", "link": "https://stackoverflow.com/users/3781974/user3781974"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "closed_date": 1470224611, "accepted_answer_id": 38739375, "answer_count": 4, "score": 1, "last_activity_date": 1470386283, "creation_date": 1470215361, "last_edit_date": 1470386283, "question_id": 38739199, "link": "https://stackoverflow.com/questions/38739199/why-this-code-doesnt-print-20", "closed_reason": "Needs more focus", "title": "why this code doesn&#39;t print &quot;20&quot;?", "body": "<pre><code>void fun(int* x){\n    x=(int*)malloc(sizeof(int));\n    *x = 20;\n}\n\nint main(){\n    int y=31;\n    fun(&amp;y);\n    printf(%d,y);\n}\n</code></pre>\n\n<p>Why this code succeed to compile anyway?</p>\n\n<p>Comment: it was compiled on Eclipse\nI see the problem on line:\n   x=(int*)malloc(sizeof(int));</p>\n\n<p>why this program didn't crashed at runtime?</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 5455, "user_id": 4115625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2688a9684db617a20f9da3959e5890d7?s=128&d=identicon&r=PG&f=1", "display_name": "Danh", "link": "https://stackoverflow.com/users/4115625/danh"}, "edited": false, "score": 0, "creation_date": 1470214804, "post_id": 38738904, "comment_id": 64852409, "body": "afaik, no way to do it"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1470214963, "post_id": 38738904, "comment_id": 64852511, "body": "XY problem here, I guess. What are you really trying to achieve? Because of <code>p2=arr</code> and <code>p2[changing_id]</code> can be the solution here."}], "answers": [{"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 1, "last_activity_date": 1470215622, "creation_date": 1470215622, "answer_id": 38739301, "question_id": 38738904, "link": "https://stackoverflow.com/questions/38738904/array-index-changing/38739301#38739301", "title": "Array index changing", "body": "<p>Let's see why it works for the first instance</p>\n\n<pre><code>p = &amp;a;\n</code></pre>\n\n<p>Here <code>a</code> has an address, say <code>0x100</code>, and this address is stored in the variable <code>p</code>. Now, even if <code>a</code> changes, the address remains the same, and the value of <code>p</code> will still be <code>0x100</code> .<code>*p</code> will give the updated value of a.</p>\n\n<p>For the second case,</p>\n\n<pre><code>p = &amp;a[d]\n</code></pre>\n\n<p>Here if <code>a</code> is <code>0x100</code> and <code>d</code> is 5 and <code>a</code> is a char array, then <code>p</code> will hold the value <code>0x105</code> If index <code>d</code> changes, then the address to be used in the array will change, e.g. if <code>d</code> is <code>2</code> then the address to use is <code>0x102</code></p>\n\n<p>As the address changes, the value of <code>p</code> will have to change and it has to be reassigned before the next use.</p>\n"}], "owner": {"reputation": 19, "user_id": 6670893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b793deebed3b9117e9ac8c042a0566?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Sirb", "link": "https://stackoverflow.com/users/6670893/robert-sirb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "closed_date": 1470293068, "answer_count": 1, "score": 0, "last_activity_date": 1470215869, "creation_date": 1470214525, "question_id": 38738904, "link": "https://stackoverflow.com/questions/38738904/array-index-changing", "closed_reason": "Needs details or clarity", "title": "Array index changing", "body": "<p>If i want  a variable  to be equal to another variable  in any moment I use a pointer :\np=&amp;a\n *p is always equal to a, irrespective if a changes.\nHowever if I want a variable to be equal with arr[Id] but the Id , index of the array , always changes in my program I can't use :</p>\n\n<p><code>p1=&amp;Id\n p2=&amp;arr[*p1]</code></p>\n\n<p>because *p2 will always be equal to the value of the array at the initial index, and if the index changes *p2 won't change with it .\nHow can I resolve this problem and get *p2 to change every time Id changes?</p>\n"}, {"tags": ["c", "winapi", "dll", "loadlibrary"], "comments": [{"owner": {"reputation": 1022, "user_id": 1862728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11fb8c2aa0e5f1a476b0cb2a5311d59?s=128&d=identicon&r=PG", "display_name": "sb9", "link": "https://stackoverflow.com/users/1862728/sb9"}, "edited": false, "score": 0, "creation_date": 1470215102, "post_id": 38738899, "comment_id": 64852606, "body": "Why don&#39;t you synchronize the DLL calls with mutex semaphores?"}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "reply_to_user": {"reputation": 1022, "user_id": 1862728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f11fb8c2aa0e5f1a476b0cb2a5311d59?s=128&d=identicon&r=PG", "display_name": "sb9", "link": "https://stackoverflow.com/users/1862728/sb9"}, "edited": false, "score": 0, "creation_date": 1470215187, "post_id": 38738899, "comment_id": 64852674, "body": "@sb9 DLL may keep internal state, so mutexes may be insufficient solution."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1470215406, "post_id": 38738899, "comment_id": 64852822, "body": "Further, mutexes will destroy any prospect for scalability."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1470216507, "post_id": 38738899, "comment_id": 64853635, "body": "The failure mode that is hard to see are the dependencies of the DLL, they get loaded just once so they may well give you the static state problem back.  And there always is at least one, the C runtime library.  It has static state.  Only truly safe way to do this is to host these DLLs in their own process."}, {"owner": {"reputation": 3413, "user_id": 306930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/050d410352880572736fc85f30c170b8?s=128&d=identicon&r=PG", "display_name": "conio", "link": "https://stackoverflow.com/users/306930/conio"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1470272883, "post_id": 38738899, "comment_id": 64886568, "body": "@HansPassant: This should be an answer. I&#39;d vote for it."}], "answers": [{"comments": [{"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "edited": false, "score": 0, "creation_date": 1470215828, "post_id": 38739182, "comment_id": 64853121, "body": "And what about the case when there are two loaded DLLs that have different filepaths but the same DLL name in export table? Which of them loader should use to resolve imports for some another module that will be loaded later?"}, {"owner": {"reputation": 2985, "user_id": 3829154, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8cfe77415f466ab08340a81c2741e4d4?s=128&d=identicon&r=PG&f=1", "display_name": "simon-p-r", "link": "https://stackoverflow.com/users/3829154/simon-p-r"}, "edited": false, "score": 0, "creation_date": 1470215889, "post_id": 38739182, "comment_id": 64853173, "body": "Does this approach create unique memory for each dll?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 2985, "user_id": 3829154, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8cfe77415f466ab08340a81c2741e4d4?s=128&d=identicon&r=PG&f=1", "display_name": "simon-p-r", "link": "https://stackoverflow.com/users/3829154/simon-p-r"}, "edited": false, "score": 0, "creation_date": 1470216045, "post_id": 38739182, "comment_id": 64853291, "body": "@simon that question is imprecise. What do you mean by unique memory"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1470216107, "post_id": 38739182, "comment_id": 64853336, "body": "Never underestimate the power of anti-malware to screw up that scheme :)"}, {"owner": {"reputation": 2985, "user_id": 3829154, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8cfe77415f466ab08340a81c2741e4d4?s=128&d=identicon&r=PG&f=1", "display_name": "simon-p-r", "link": "https://stackoverflow.com/users/3829154/simon-p-r"}, "edited": false, "score": 0, "creation_date": 1470218111, "post_id": 38739182, "comment_id": 64854643, "body": "Sorry new to c, I mean for each dll loaded they are self contained?!"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 2985, "user_id": 3829154, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8cfe77415f466ab08340a81c2741e4d4?s=128&d=identicon&r=PG&f=1", "display_name": "simon-p-r", "link": "https://stackoverflow.com/users/3829154/simon-p-r"}, "edited": false, "score": 0, "creation_date": 1470224101, "post_id": 38739182, "comment_id": 64858559, "body": "@simon It&#39;s not really a matter for C but more a Windows issue. Self contained is still imprecise."}, {"owner": {"reputation": 2985, "user_id": 3829154, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8cfe77415f466ab08340a81c2741e4d4?s=128&d=identicon&r=PG&f=1", "display_name": "simon-p-r", "link": "https://stackoverflow.com/users/3829154/simon-p-r"}, "edited": false, "score": 0, "creation_date": 1470234029, "post_id": 38739182, "comment_id": 64866212, "body": "Would its own heap be precise!?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 2985, "user_id": 3829154, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8cfe77415f466ab08340a81c2741e4d4?s=128&d=identicon&r=PG&f=1", "display_name": "simon-p-r", "link": "https://stackoverflow.com/users/3829154/simon-p-r"}, "edited": false, "score": 0, "creation_date": 1470234387, "post_id": 38739182, "comment_id": 64866471, "body": "@simon that depends. Often not. Common is for all modules in a process to allocate off a single process heap."}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": false, "score": 2, "last_activity_date": 1470215339, "creation_date": 1470215339, "answer_id": 38739182, "question_id": 38738899, "link": "https://stackoverflow.com/questions/38738899/multiple-loadlibrary-for-copies-of-the-same-dll/38739182#38739182", "title": "Multiple LoadLibrary for copies of the same DLL", "body": "<p>So long as you use the full absolute file name when you call <code>LoadLibrary</code>, and so long as these absolute file names are different, then you can load multiple instances. </p>\n\n<p>Personally if it were me I would create the thread, and then copy the DLL to a temporary folder naming  it <code>&lt;threadID&gt;.dll</code>. That will guarantee uniqueness of name. </p>\n"}], "owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470225335, "creation_date": 1470214511, "last_edit_date": 1470225335, "question_id": 38738899, "link": "https://stackoverflow.com/questions/38738899/multiple-loadlibrary-for-copies-of-the-same-dll", "title": "Multiple LoadLibrary for copies of the same DLL", "body": "<p>I have a DLL which is not thread-safe and must be used by multiple threads. I am not sure how Windows detects loaded DLL-s, whether it is by full file path or by DLL/Module name. If the file path is used, I think it may be possible to copy the DLL in separate files for each thread, e.g. <code>MyLib1.dll</code>, <code>MyLib2.dll</code>, <code>MyLib3.dll</code> and load them with <code>LoadLibrary</code>.</p>\n"}, {"tags": ["c", "linux", "multithreading", "pthreads", "signals"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1470214122, "post_id": 38738704, "comment_id": 64851936, "body": "<code>signal</code> doesn&#39;t really work with threads."}, {"owner": {"reputation": 856, "user_id": 5486078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3949196f452be4bc39e48ba8835ec4ed?s=128&d=identicon&r=PG&f=1", "display_name": "jbsu32", "link": "https://stackoverflow.com/users/5486078/jbsu32"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1470214944, "post_id": 38738704, "comment_id": 64852502, "body": "Does that mean the <code>pthread_self()</code> function is not giving the proper <code>threadID</code> ?? As it is called after receiving the <code>signal</code> ??"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1470215104, "post_id": 38738704, "comment_id": 64852609, "body": "@JishnuBanerjee <code>pthread_self()</code> will give the thread id of the calling thread. But the real issue is that it&#39;s not possible to have per-thread signal handlers; signal handling is process wide. See an example in the linked man page on how to block signals."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1470215327, "post_id": 38738704, "comment_id": 64852763, "body": "The C standard says: &quot;Use of this function [<code>signal</code>] in a multi-threaded program results in undefined behaviour.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 9105, "user_id": 5019169, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5d546860aba145b8c0450455f447cc88?s=128&d=identicon&r=PG&f=1", "display_name": "Ahsanul Haque", "link": "https://stackoverflow.com/users/5019169/ahsanul-haque"}, "edited": false, "score": 1, "creation_date": 1470216099, "post_id": 38739077, "comment_id": 64853328, "body": "How does sig_handler() get called here exactly? I mean OP gets a different threadID each time sig_handler() gets called i.e. OP sent a signal.   How does this particular program actually manage/ act against  those signals?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 9105, "user_id": 5019169, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5d546860aba145b8c0450455f447cc88?s=128&d=identicon&r=PG&f=1", "display_name": "Ahsanul Haque", "link": "https://stackoverflow.com/users/5019169/ahsanul-haque"}, "edited": false, "score": 1, "creation_date": 1470217745, "post_id": 38739077, "comment_id": 64854416, "body": "The signal(s) sent by OP isn&#39;t specific to a thread. It&#39;s process-wide. So, you can&#39;t be sure/know to which thread the signal is delivered to. <code>pthreads(7)</code> says: &quot;POSIX.1 distinguishes the notions of signals that are directed to the process as a whole and signals that are directed to individual threads. According to POSIX.1, a process-directed signal (sentusing kill(2), for example) should be handled by a single, arbitrarily selected thread within the process.&quot; That &quot;arbitrary signal delivery&quot; means any thread can receive the signal and call the signal handler and its threadID get printed."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 3, "last_activity_date": 1470215001, "creation_date": 1470215001, "answer_id": 38739077, "question_id": 38738704, "link": "https://stackoverflow.com/questions/38738704/why-child-threads-alive-after-the-main-threads-are-killed/38739077#38739077", "title": "Why child threads alive after the main threads are killed?", "body": "<p>Signals are delivered to the <em>process</em>, not to individual threads. So, you can't have a signal handler just for one thread as you are doing here.\nWhat you can do is block signals you are interested in using <a href=\"http://man7.org/linux/man-pages/man3/pthread_sigmask.3.html\" rel=\"nofollow\"><code>pthread_sigmask()</code></a> and let a dedicated thread handle signals using <a href=\"http://man7.org/linux/man-pages/man3/sigwait.3.html\" rel=\"nofollow\"><code>sigwait()</code></a>, which is the most common way.</p>\n"}, {"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 0, "last_activity_date": 1470826369, "creation_date": 1470826369, "answer_id": 38871376, "question_id": 38738704, "link": "https://stackoverflow.com/questions/38738704/why-child-threads-alive-after-the-main-threads-are-killed/38871376#38871376", "title": "Why child threads alive after the main threads are killed?", "body": "<p>In addition, you can only safely call async-signal-safe functions from within a signal handler.  From <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow\">the Linux <code>signal</code> man page</a>:</p>\n\n<blockquote>\n  <p><strong>Async-signal-safe functions</strong></p>\n  \n  <p>A signal handler function must be very careful, since processing\n  elsewhere may be interrupted at some arbitrary point in the execution\n  of the program.  POSIX has the concept of \"safe function\".  If a\n  signal interrupts the execution of an unsafe function, and <em>handler</em>\n  either calls an unsafe function or <em>handler</em> terminates via a call to\n  <code>longjmp()</code> or <code>siglongjmp()</code> and the program subsequently calls an\n  unsafe function, then the behavior of the program is undefined.</p>\n</blockquote>\n\n<p>The linked man page has a list of functions that are safe to call from within a signal handler.  If the function is not on that list, it is <em>unsafe to call it</em>.  No exceptions.</p>\n\n<p>Note that neither <code>printf()</code> nor <code>pthread_exit()</code> are on the list of async-signal-safe functions.</p>\n\n<p>And calling <code>pthread_exit()</code> from within a signal handler creates several other problems:</p>\n\n<ul>\n<li><p>The thread that exits is generally not under any control.  In many cases, the signal can be delivered to <em>any</em> thread.</p></li>\n<li><p>The exiting thread can leave objects in an unknown state - a mutex can be left locked by a thread that no longer exists, for example.</p></li>\n<li><p>Any thread cleanup handlers <a href=\"http://man7.org/linux/man-pages/man3/pthread_cleanup_push.3.html\" rel=\"nofollow\">registered with <code>pthread_cleanup_push()</code></a> will also be called from within a signal handler context.</p></li>\n</ul>\n"}], "owner": {"reputation": 856, "user_id": 5486078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3949196f452be4bc39e48ba8835ec4ed?s=128&d=identicon&r=PG&f=1", "display_name": "jbsu32", "link": "https://stackoverflow.com/users/5486078/jbsu32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 1, "accepted_answer_id": 38739077, "answer_count": 2, "score": 1, "last_activity_date": 1470826369, "creation_date": 1470213980, "last_edit_date": 1470822753, "question_id": 38738704, "link": "https://stackoverflow.com/questions/38738704/why-child-threads-alive-after-the-main-threads-are-killed", "title": "Why child threads alive after the main threads are killed?", "body": "<p>I have written a code where I have created two child threads from the parent thread. </p>\n\n<p>Then, with receiving a signal from another terminal inside those child threads, I printed the <code>threadID</code> and exited the thread. </p>\n\n<p>I have 2 questions.</p>\n\n<ol>\n<li><p>I'm receiving the signal from the child thread. Why is it printing the <code>threadID</code> of the parent thread?</p></li>\n<li><p>After killing the parent thread, how can be the child threads alive??</p></li>\n</ol>\n\n<p>The Code :</p>\n\n<pre><code>void sig_handler(int signo)\n{\n    if (signo == 1){\n        printf(\"%d\\n\", pthread_self());\n        pthread_exit(NULL);\n    }\n}\n\nvoid* doSomeThing(void* arg)\n{\n    printf(\"In function -&gt; %d\\n\", pthread_self());\n    if (signal(1, sig_handler) == SIG_ERR)\n        printf(\"\\ncan't catch SIGHUP\\n\");\n    while(1)\n        sleep(1);\n    return NULL;\n}\n\nint main(int argc, char *argv[])\n{\n    printf(\"In function -&gt; %d\\n\", pthread_self());\n    char *ch1;\n    pthread_t tid1, tid2;\n    ch1 = \"random\";\n    int ret1, ret2;\n\n    ret1 = pthread_create(&amp;tid1, NULL, &amp;doSomeThing, (void *) ch1 );\n    ret2 = pthread_create(&amp;tid2, NULL, &amp;doSomeThing, (void *) ch1 );\n\n    while(1)\n        sleep(1);\n    return 0;\n}\n</code></pre>\n\n<p>Here is the image of the output given in terminal :</p>\n\n<p><a href=\"https://i.stack.imgur.com/GMKIy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GMKIy.png\" alt=\"\"></a></p>\n\n<p>The first 3 lines are the 3 <code>threadID</code>s. 1st one is the Main <code>threadID</code>s, then the two secondary threads.</p>\n\n<p>Then the <code>threadID</code>s printed from the following block of code.</p>\n\n<pre><code>if (signo == 1){\n    printf(\"%d\\n\", pthread_self());\n    pthread_exit(NULL);\n}\n</code></pre>\n\n<p>Why is this happening???</p>\n"}, {"tags": ["c", "pointers", "pic"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1470213790, "post_id": 38738502, "comment_id": 64851732, "body": "Failed how? Compiler error? Runtime error? Be specific."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1470863080, "post_id": 38738502, "comment_id": 65127920, "body": "Why are you using <code>#define</code> instead of <code>typedef</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1470863865, "post_id": 38738502, "comment_id": 65128269, "body": "Some PIC compilers oblige <code>const</code> data to be transferred to non-<code>const</code> with select functions like <code>memcpy()</code>.  Post code that failed and describe how it failed."}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1470213886, "post_id": 38738531, "comment_id": 64851790, "body": "While typedef over macro is certainly preferred, it should not be source of OP&#39;s problem. Also, hiding a pointer type behind typedef is always ugly."}, {"owner": {"reputation": 197, "user_id": 5419094, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-hLzHGazrjPA/AAAAAAAAAAI/AAAAAAAAAp4/cz72bkSfmKo/photo.jpg?sz=128", "display_name": "Krzysztof Bieda", "link": "https://stackoverflow.com/users/5419094/krzysztof-bieda"}, "edited": false, "score": 0, "creation_date": 1470213948, "post_id": 38738531, "comment_id": 64851828, "body": "It does not work. On the line:  typedef const type memType; I have an error &quot;Expecting an =&quot;"}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1470214011, "post_id": 38738531, "comment_id": 64851859, "body": "@user694733 &quot;... hiding a pointer type behind typedef is always ugly ...&quot; IMO it is a matter of taste."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1470214274, "post_id": 38738531, "comment_id": 64852051, "body": "Not really a <i>matter of taste</i> when you develop libs and users are not aware they are passing triple or more pointer to some functions, for example. Not the case here with embedded app."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1470214456, "post_id": 38738531, "comment_id": 64852177, "body": "Typedef&#39;d pointers also start to fall apart when you write <code>const</code> and <code>volatile</code> -correct code, as each requires their own typedef. And even more if you use additional type qualifiers provided by the compiler, as is often case in the embedded world."}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1470214855, "post_id": 38738531, "comment_id": 64852439, "body": "@user694733  @LPs Reasonable points. And what about <code>typedef</code>-ed function pointers? AFAIK it is a common practice to <code>typedef</code> them because of much better readability."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1470809281, "post_id": 38738531, "comment_id": 65093752, "body": "typedefs with qualifiers can sometimes lead to linker errors.  On some compilers (I can&#39;t remember which ones offhand), when you create a signature of <b>const int</b>, they change it to <b>int const</b> but when you typedef, it doesn&#39;t change the signature.  Everything goes through until you try to link and then it all falls apart."}], "tags": [], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "is_accepted": false, "score": 1, "last_activity_date": 1470213952, "last_edit_date": 1470213952, "creation_date": 1470213477, "answer_id": 38738531, "question_id": 38738502, "link": "https://stackoverflow.com/questions/38738502/c-function-based-on-pointer-to-const/38738531#38738531", "title": "C function based on pointer to const", "body": "<p>Your compiler may support extra specifiers that explicitly assign storage for globals (EEPROM, etc.).</p>\n\n<p>Also it is much better to use <code>typedef</code>'s instead of macro.</p>\n\n<pre><code>typedef unsigned int8 type, *ptype;\ntypedef const type memType;\nmemType n_006 = 2;\ntype l_006[n_006]={0x03, 0xFF};\n</code></pre>\n\n<p>Also you may get rid of the <code>n_006</code> at all, just use well-known <code>sizeof</code> trick:</p>\n\n<pre><code>writeLine(a1, l_006, sizeof l_006 / sizeof l_006[0]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "is_accepted": false, "score": 0, "last_activity_date": 1470863634, "last_edit_date": 1470863634, "creation_date": 1470862911, "answer_id": 38883466, "question_id": 38738502, "link": "https://stackoverflow.com/questions/38738502/c-function-based-on-pointer-to-const/38883466#38883466", "title": "C function based on pointer to const", "body": "<p>As serhio says, check your special compiler specifiers.  For instance on the XC8 compiler (which doesn't have int8, so I have to use char)</p>\n\n<pre><code>const unsigned char ylist[] = { 0x03, 0xFF };\n</code></pre>\n\n<p>Generates</p>\n\n<pre><code>stringdir:  \n    movlw   high stringdir\n    movwf   10\n    movf    4,w\n    incf    4,f\n    addwf   2,f\n__stringbase:   \n    retlw   0\n__end_of__stringtab:    \n_ylist: \n    retlw   3\n    retlw   255\n__end_of_ylist;\n</code></pre>\n\n<p>But using the keyword eeprom instead of const</p>\n\n<pre><code>eeprom unsigned char ylist[] = { 0x03, 0xFF };\n</code></pre>\n\n<p>Generates</p>\n\n<pre><code>_ylist: \n;initializer for _ylist\n    db  3\n    db  255\n</code></pre>\n\n<p>It uses half the amount of space and doesn't have the string conversion routine.  It probably runs a lot faster too.</p>\n"}, {"tags": [], "owner": {"reputation": 197, "user_id": 5419094, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-hLzHGazrjPA/AAAAAAAAAAI/AAAAAAAAAp4/cz72bkSfmKo/photo.jpg?sz=128", "display_name": "Krzysztof Bieda", "link": "https://stackoverflow.com/users/5419094/krzysztof-bieda"}, "is_accepted": false, "score": 0, "last_activity_date": 1473858104, "creation_date": 1473858104, "answer_id": 39491151, "question_id": 38738502, "link": "https://stackoverflow.com/questions/38738502/c-function-based-on-pointer-to-const/39491151#39491151", "title": "C function based on pointer to const", "body": "<p>I use CCS C Compiler</p>\n\n<p>I used:</p>\n\n<pre><code>#define type     unsigned int8\n#define memType  const type\n#define tabType  rom type\n</code></pre>\n\n<p>and it worked</p>\n\n<p>SOLVED</p>\n"}], "owner": {"reputation": 197, "user_id": 5419094, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh6.googleusercontent.com/-hLzHGazrjPA/AAAAAAAAAAI/AAAAAAAAAp4/cz72bkSfmKo/photo.jpg?sz=128", "display_name": "Krzysztof Bieda", "link": "https://stackoverflow.com/users/5419094/krzysztof-bieda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1473858104, "creation_date": 1470213411, "question_id": 38738502, "link": "https://stackoverflow.com/questions/38738502/c-function-based-on-pointer-to-const", "title": "C function based on pointer to const", "body": "<p>I have developed code for PIC and I am happy with it.\nThe problem is that my variables are putter into RAM and it is almost full.</p>\n\n<p>I have tried with const in front of array of data, but I failed with later function based on pointer to const array.</p>\n\n<p>Could somebody show me how to define that pointer?</p>\n\n<p>That is what I have now:</p>\n\n<pre><code>#define type     unsigned int8\n#define memType  const type\nmemType n_006 = 2;\ntype l_006[n_006]={0x03, 0xFF};\n</code></pre>\n\n<p>Function:</p>\n\n<pre><code>void writeLine(type adress, type *send, int8 numS)\n{\n   int8 i = 0;\n   i2c_start();\n   i2c_write(adress);  \n   for(i = 0; i &lt; numS; i++)\n   {\n      int8 toSend = send[i];\n      i2c_write(toSend);\n   }\n   i2c_stop();\n}\n</code></pre>\n\n<p>And in main:</p>\n\n<pre><code> writeLine(a1, &amp;l_006[0], n_006);\n</code></pre>\n\n<p>Main goal is to have data saved in ROM, what I guess could be doned by const in front, but I really failed to do it correctly.</p>\n\n<p>Thanks in advance,\nChris</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 0, "creation_date": 1470211677, "post_id": 38737865, "comment_id": 64850386, "body": "<b>PLEASE</b> edit your question to make it readable. See: <a href=\"http://stackoverflow.com/editing-help\">stackoverflow.com/editing-help</a>"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1470211782, "post_id": 38737865, "comment_id": 64850452, "body": "Do you want simple or compound interest? Also reduce the font of the question to a more manageable size. preferably default size."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1470212154, "post_id": 38737865, "comment_id": 64850665, "body": "Not sure what help you need. Yes, you need a loop unless you&#39;re going to dust off the <a href=\"http://en.cppreference.com/w/c/numeric/math/pow\" rel=\"nofollow noreferrer\"><code>pow()</code></a> function. Any of literally a million places online can give you the formula for compounding interest, which you then translate to either a loop or that function call."}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1470213184, "post_id": 38738153, "comment_id": 64851343, "body": "The name of this function doesn&#39;t reflect what it actually computes. This is indeed the correct formula for computing <i>future value</i>, but not <i>interest</i>.  The interest can be calculated by subtracting <code>1.0</code> from the right-term prior to the final multiplication. Right idea, however."}, {"owner": {"reputation": 430, "user_id": 2277264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KytzI.png?s=128&g=1", "display_name": "Peter Stock", "link": "https://stackoverflow.com/users/2277264/peter-stock"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1470213505, "post_id": 38738153, "comment_id": 64851538, "body": "I just copy-pasted the OP&#39;s function signature. I agree that choosing appropriate names is very important. <i>There are only two hard things in Computer Science: cache invalidation and naming things.</i>  ^_^"}], "tags": [], "owner": {"reputation": 430, "user_id": 2277264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KytzI.png?s=128&g=1", "display_name": "Peter Stock", "link": "https://stackoverflow.com/users/2277264/peter-stock"}, "is_accepted": false, "score": 0, "last_activity_date": 1470212335, "creation_date": 1470212335, "answer_id": 38738153, "question_id": 38737865, "link": "https://stackoverflow.com/questions/38737865/c-program-calculating-interest/38738153#38738153", "title": "C program: Calculating Interest", "body": "<p>Maybe something like this?</p>\n\n<pre><code>float interest(float a,float b,float c)\n{\n    return a * pow(1.0f + b, c);\n}\n</code></pre>\n\n<p>Assuming <code>b</code> is a number like 0.05 to mean 5% a year, and <code>c</code> is a number of years (which doesn't have to be an integer).</p>\n"}], "owner": {"reputation": 27, "user_id": 6670622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2c28d92b79ebdc2eba695a702bffb8a?s=128&d=identicon&r=PG&f=1", "display_name": "xin", "link": "https://stackoverflow.com/users/6670622/xin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470212335, "creation_date": 1470211566, "last_edit_date": 1470211938, "question_id": 38737865, "link": "https://stackoverflow.com/questions/38737865/c-program-calculating-interest", "title": "C program: Calculating Interest", "body": "<p><strong>Intent</strong> : This program asks a user for The amount that is currently in their bank account, the APR and the number of years. The output is the starting and ending of the amount that shows an accumulative interest of the years specified by the user.</p>\n\n<p><strong>Question:</strong> I'm trying to find a way to correctly add the interest, as of right now for a specified amount of years all i'm doing is multiplying the (current amount in bank account * interest rate * years) I know this is wrong and I think I need a loop for the accumulating interest rate from one year to the next and that's where I need help.Thanks and here is my current code below...</p>\n\n<hr>\n\n<p><strong>The Code</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nfloat getPV()\n{\n    float d;\n    float start;\n    printf(\"Start: \");\n    scanf(\"%f\", &amp;start);\n    d = start;\n    return d;\n}\n\n\nvoid getIR(float *a)\n{\n    printf(\"Rate: \");\n    scanf(\"%f\",a);\n}\n\nvoid getNP(int *years)\n{\n    printf(\"NumPeriods: \");\n    scanf(\"%d\", years);\n}\nfloat interest(float a,float b,float c)\n{\n    float x;\n\n    x = a*b*c;\n    return x;\n}\n\nint main()\n{\n    float pv,ir,fv,Total;\n    int np;\n\n    pv = getPV();        //Amount in account\n\n    getIR( &amp;ir );        // APR\n\n    getNP( &amp;np );        // Number of years\n\n    fv = interest(pv,ir,np);\n    Total=fv + pv;\n    printf(\"Starting:   %.2f\\n\", pv);\n    printf(\"  Ending:   %.2f\\n\", Total);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "parsing", "ip-address", "ipv6", "scanf"], "comments": [{"owner": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1470210829, "post_id": 38737547, "comment_id": 64849883, "body": "Did you consider <a href=\"http://en.cppreference.com/w/c/string/byte/strtok\" rel=\"nofollow noreferrer\">strtok</a>?"}, {"owner": {"reputation": 43, "user_id": 5977577, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/54c2a9a41409472c6d8f36f21bbbb37e?s=128&d=identicon&r=PG&f=1", "display_name": "kara", "link": "https://stackoverflow.com/users/5977577/kara"}, "reply_to_user": {"reputation": 13260, "user_id": 6612932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3mwe.jpg?s=128&g=1", "display_name": "rgmt", "link": "https://stackoverflow.com/users/6612932/rgmt"}, "edited": false, "score": 0, "creation_date": 1470211212, "post_id": 38737547, "comment_id": 64850095, "body": "of course. but.. this sscanf isbetter than strtok to this parsing.. i think . do you have better idea on this?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1470212630, "post_id": 38737547, "comment_id": 64850983, "body": "Don&#39;t do <a href=\"http://stackoverflow.com/questions/204476/what-should-main-return-in-c-and-c\"><code>void main()</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 43, "user_id": 5977577, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/54c2a9a41409472c6d8f36f21bbbb37e?s=128&d=identicon&r=PG&f=1", "display_name": "kara", "link": "https://stackoverflow.com/users/5977577/kara"}, "edited": false, "score": 0, "creation_date": 1470215969, "post_id": 38739111, "comment_id": 64853225, "body": "@kara, please stop editing my post to add elements irrelevent to the question you asked. This isn&#39;t the place to showcase your program, it answers how to get rid of the segmentation fault."}, {"owner": {"reputation": 43, "user_id": 5977577, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/54c2a9a41409472c6d8f36f21bbbb37e?s=128&d=identicon&r=PG&f=1", "display_name": "kara", "link": "https://stackoverflow.com/users/5977577/kara"}, "edited": false, "score": 0, "creation_date": 1470236977, "post_id": 38739111, "comment_id": 64868576, "body": "OMG! Sorry i didnt know that."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 43, "user_id": 5977577, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/54c2a9a41409472c6d8f36f21bbbb37e?s=128&d=identicon&r=PG&f=1", "display_name": "kara", "link": "https://stackoverflow.com/users/5977577/kara"}, "edited": false, "score": 0, "creation_date": 1470237250, "post_id": 38739111, "comment_id": 64868763, "body": "@kara, no worries. You seem to be fairly new to SO. So have a quick read <a href=\"http://stackoverflow.com/help\">here</a>"}, {"owner": {"reputation": 43, "user_id": 5977577, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/54c2a9a41409472c6d8f36f21bbbb37e?s=128&d=identicon&r=PG&f=1", "display_name": "kara", "link": "https://stackoverflow.com/users/5977577/kara"}, "edited": false, "score": 0, "creation_date": 1470271706, "post_id": 38739111, "comment_id": 64885344, "body": "Thanks to helping me ! ^^!"}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1470215624, "last_edit_date": 1470215624, "creation_date": 1470215123, "answer_id": 38739111, "question_id": 38737547, "link": "https://stackoverflow.com/questions/38737547/how-can-i-divide-this-ipv6-address-use-to-sscanf-in-c/38739111#38739111", "title": "How can I divide this ipv6 address use to sscanf in c?", "body": "<p>What you did wrong is twofold:</p>\n\n<ol>\n<li>You specify maximum widths to <code>sscnaf</code> which are larger than your buffers.</li>\n<li>You don't tell <code>sscanf</code> to consume your delimiters after you reach them (<code>]</code> and <code>/</code>).</li>\n</ol>\n\n<p>So a somewhat fixed version (with your clutter removed, and <code>main</code> made standard conforming):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    char url[128] = \"http://[1fff:0:a88:85a3::ac1f]:8001/index.html\";\n    char url_6[128], port[10], path[40];\n\n    char *tok;\n\n    if(strncmp(url, \"http://[\", 8) == 0)\n    {\n        tok = &amp;url[8];\n        tok[-4] = '\\0';\n        //sscanf(tok, \"%2000[^]]:%s\", url_6, path);\n        sscanf(tok, \"%127[^]]]:%9[^/]/%39s\", url_6, port, path);\n        //                   ^^      ^- delim '/' consumed here\n        //                   |+- delim ':' consumed here\n        //                   +- delim ']' consumed here\n\n        printf(\"path= %s\\n\", path);\n        printf(\"port= %s\\n\", port);\n        printf(\"url_6 = %s\\n\", url_6);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>See it live <a href=\"http://ideone.com/32Sbwu\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 43, "user_id": 5977577, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/54c2a9a41409472c6d8f36f21bbbb37e?s=128&d=identicon&r=PG&f=1", "display_name": "kara", "link": "https://stackoverflow.com/users/5977577/kara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 0, "accepted_answer_id": 38739111, "answer_count": 1, "score": 0, "last_activity_date": 1470215624, "creation_date": 1470210676, "last_edit_date": 1470213817, "question_id": 38737547, "link": "https://stackoverflow.com/questions/38737547/how-can-i-divide-this-ipv6-address-use-to-sscanf-in-c", "title": "How can I divide this ipv6 address use to sscanf in c?", "body": "<p>For example , I want to separate this address. </p>\n\n<pre><code>http://[1fff:0:a88:85a3::ac1f]:8001/index.html\n\nlike..\n\n    protocol = http\n    address = 1fff:0:a88:85a3::ac1f\n    port = 8001\n    path = index.html\n</code></pre>\n\n<p>So I used this sscanf code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;arpa/inet.h&gt;\n\nvoid main()\n{\n//    char url[128] = \"http://10.1.35.1:8088/inedex.htm\";\n    char url[128] = \"http://[1fff:0:a88:85a3::ac1f]:8001/index.html\";\n    char url_6[128], port[10], path[40];\n\n    char *tok, *cp, *host, *proto, /**port, *path,*/ *tok6;\n    char *hostbuf, *portbuf, *buf;\n    int c, len, ulen, cnt_6 = 0;\n    struct in6_addr result;\n\n    ulen = strlen(url);\n    len = ulen *2 + 10 + 3;\n\n    if(strncmp(url, \"http://[\", 8) == 0)\n    {\n        tok = &amp;url[8];\n        tok[-4] = '\\0';\n        proto = url;\n        sscanf(tok, \"%2000[^]]:%s\", url_6, path);\n\n        if(inet_pton(AF_INET6, url_6, &amp;result))\n        {\n            printf(\"successful ipv6 address\\n\");\n        }\n        else\n        {\n            printf(\"Invalid ipv6 address\\n\");\n        }\n        printf(\"path= %s\\n\", path);\n        printf(\"tok = %s\\n\", tok);\n    }\n}\n</code></pre>\n\n<p>But I don't understand this line.<br/></p>\n\n<pre><code>sscanf(tok, \"%2000[^]]:%s\", url_6, path); //this line is okay.\n</code></pre>\n\n<p>Actually, it's the first time, I'm writing this line.<br/></p>\n\n<pre><code>//port and path is pointer.... *port, *path...\nsscanf(tok, \"%2000[^]]:%10[^/]%s\", url_6, port, path); \n</code></pre>\n\n<p>but when I debug this line, then segmentation fault accurs.... \nWhat did I do wrong ?<br/>\nplease answer this question. </p>\n\n<p>thanks.</p>\n"}, {"tags": ["c", "apache"], "answers": [{"tags": [], "owner": {"reputation": 886, "user_id": 1222612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fec93ceb0df2b8c76fbf3309ff3803c?s=128&d=identicon&r=PG", "display_name": "Avi", "link": "https://stackoverflow.com/users/1222612/avi"}, "is_accepted": true, "score": 2, "last_activity_date": 1480132590, "creation_date": 1480132590, "answer_id": 40814759, "question_id": 38736867, "link": "https://stackoverflow.com/questions/38736867/apache-2-4-modules-writing-new-cookie-on-the-response-cause-seg-fault/40814759#40814759", "title": "apache 2.4 modules: writing new cookie on the response cause seg fault", "body": "<p>You need to provide <a href=\"https://ci.apache.org/projects/httpd/trunk/doxygen/group__APACHE__CORE__COOKIE.html#ga9659efc3add1bc9f58e30752264dc01a\" rel=\"nofollow noreferrer\"><code>ap_cookie_write</code></a> the header table(s) to add the cookie to. As the documentation says:</p>\n\n<blockquote>\n  <p>A varargs array of zero or <strong>more (apr_table_t *) tables</strong> followed by\n  NULL to which the cookies should be added.</p>\n</blockquote>\n\n<p><strong>What do cookies have to do with headers?</strong></p>\n\n<p>Cookies are added/removed via the <a href=\"https://en.wikipedia.org/wiki/HTTP_cookie#Setting_a_cookie\" rel=\"nofollow noreferrer\">Set-Cookie</a> (or <a href=\"https://stackoverflow.com/questions/9462180/difference-between-set-cookie2-and-set-cookie\">Set-Cookie2</a>) header.</p>\n\n<p><strong>Why does the header table need to be provided?</strong></p>\n\n<p>request_rec instances have two header tables, headers_out and err_headers_out. </p>\n\n<blockquote>\n  <p>The difference between headers_out and err_headers_out, is that the\n  latter are printed even on error, and persist across internal\n  redirects (so the headers printed for ErrorDocument handlers will have\n  them).</p>\n  \n  <p>For example, if a handler wants to return a 404 response, but\n  nevertheless to set a cookie, it has to be:</p>\n  \n  <p>$r->err_headers_out->add('Set-Cookie' => $cookie);   return\n  Apache2::Const::NOT_FOUND; If the handler does:</p>\n  \n  <p>$r->headers_out->add('Set-Cookie' => $cookie);   return\n  Apache2::Const::NOT_FOUND; the Set-Cookie header won't be sent.</p>\n</blockquote>\n\n<p>(<a href=\"https://perl.apache.org/docs/2.0/api/Apache2/RequestRec.html#C_err_headers_out_\" rel=\"nofollow noreferrer\">Source</a>)</p>\n\n<p>As such, <code>ap_cookie_write</code> cannot know which header table(s), if any, to use. You could provide other unrelated tables if you wanted.</p>\n\n<p>In your case, you likely want to do:</p>\n\n<pre><code>request_rec *r = ctx-&gt;r;\nap_cookie_write(r, \"_mycookie\", \"\", NULL,  0L, r-&gt;headers_out, r-&gt;err_headers_out, NULL);\n</code></pre>\n"}], "owner": {"reputation": 3391, "user_id": 4470201, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/558270100/picture?type=large", "display_name": "Shikloshi", "link": "https://stackoverflow.com/users/4470201/shikloshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "accepted_answer_id": 40814759, "answer_count": 1, "score": 6, "last_activity_date": 1480132590, "creation_date": 1470208604, "last_edit_date": 1470310862, "question_id": 38736867, "link": "https://stackoverflow.com/questions/38736867/apache-2-4-modules-writing-new-cookie-on-the-response-cause-seg-fault", "title": "apache 2.4 modules: writing new cookie on the response cause seg fault", "body": "<p>I'm writing apache module and I'm having difficulties writing a new cookie to be sent to the browser with the response.</p>\n\n<p>I'm trying to use <a href=\"https://ci.apache.org/projects/httpd/trunk/doxygen/group__APACHE__CORE__COOKIE.html\" rel=\"nofollow\"><code>ap_cookie_write</code></a> as stated in the documentation.</p>\n\n<p>First question - I don't think setting cookie on the <code>request_rec</code> will result with sending the cookie back to the client, so how can I really add cookies?</p>\n\n<p>Second question - \nThis code:</p>\n\n<pre><code>if (ap_cookie_write(ctx-&gt;r, \"_mycookie\", \"\", NULL,  0L) != APR_SUCCESS) {\n     ERROR(ctx-&gt;r-&gt;server, \"Could not write _mycookie empty value\");\n}\n</code></pre>\n\n<p>causes this crash: </p>\n\n<pre><code>[Wed Aug 03 10:09:51.712610 2016] [core:debug] [pid 17272:tid 140219016423168] util_cookies.c(59): [client 10.20.1.35:52967] AH00007: ap_cookie: user '(null)' set cookie: '_mycookie=;HttpOnly;Secure;Version=1', referer: http://10.20.1.203/\n[Wed Aug 03 10:09:52.389575 2016] [core:notice] [pid 32421:tid 140219219822464] AH00051: child pid 17272 exit signal Segmentation fault (11), possible coredump in /etc/apache2\n</code></pre>\n\n<p>What am I doing wrong? by looking at the <a href=\"https://svn.apache.org/repos/asf/httpd/httpd/trunk/server/util_cookies.c\" rel=\"nofollow\">source code</a> I see that there it no need to allocate the strings I'm sending there.</p>\n\n<p><strong>Update</strong></p>\n\n<p>As for the second question - I figured out that the <code>varargs</code> list must end with <code>NULL</code> so that fixed the seg fault:</p>\n\n<pre><code>if (ap_cookie_write(ctx-&gt;r, \"_mycookie\", \"\", NULL,  0L, NULL) != APR_SUCCESS) {\n     ERROR(ctx-&gt;r-&gt;server, \"Could not write _mycookie empty value\");\n}\n</code></pre>\n\n<p>But now the cookie does not return on the response.</p>\n"}, {"tags": ["c", "linux", "bash"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1470208651, "post_id": 38736850, "comment_id": 64848684, "body": "is <code>char</code> type <code>unsigned</code> on your platform?"}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1470209712, "post_id": 38736850, "comment_id": 64849255, "body": "What do you mean by &quot;not working&quot;. What is the expected behavior and what actually happens?"}, {"owner": {"reputation": 23464, "user_id": 877235, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/my8FB.jpg?s=128&g=1", "display_name": "stdcall", "link": "https://stackoverflow.com/users/877235/stdcall"}, "edited": false, "score": 0, "creation_date": 1470209913, "post_id": 38736850, "comment_id": 64849374, "body": "Are you sure the ASCII code of up and down are 193,194 ?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1470210251, "post_id": 38736850, "comment_id": 64849555, "body": "IIRC codes for arrow keys are escaped. Something like <code>\\x033[A</code>"}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1470210794, "post_id": 38736850, "comment_id": 64849860, "body": "Because there is no explication what is not working and the question is tagged <code>bash</code> I am just guessing. Maybe you wanted to invoke <code>&#47;bin&#47;bash</code> instead of <code>&#47;bin&#47;sh</code>?"}, {"owner": {"reputation": 39, "user_id": 4777476, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b310122962370dc4156676734cecc056?s=128&d=identicon&r=PG&f=1", "display_name": "subrahmanyeswara swamy murala", "link": "https://stackoverflow.com/users/4777476/subrahmanyeswara-swamy-murala"}, "edited": false, "score": 0, "creation_date": 1470211606, "post_id": 38736850, "comment_id": 64850345, "body": "not working means actually for up it has to move cursor to up and for down cursor not going down."}, {"owner": {"reputation": 39, "user_id": 4777476, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b310122962370dc4156676734cecc056?s=128&d=identicon&r=PG&f=1", "display_name": "subrahmanyeswara swamy murala", "link": "https://stackoverflow.com/users/4777476/subrahmanyeswara-swamy-murala"}, "edited": false, "score": 0, "creation_date": 1470211645, "post_id": 38736850, "comment_id": 64850371, "body": "I am not sure ASCII codes i just tried .."}, {"owner": {"reputation": 17600, "user_id": 793796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mk3lA.jpg?s=128&g=1", "display_name": "anishsane", "link": "https://stackoverflow.com/users/793796/anishsane"}, "edited": false, "score": 1, "creation_date": 1470211931, "post_id": 38736850, "comment_id": 64850528, "body": "<code>UP</code> &amp; <code>DOWN</code> are not single characters. They are a series of characters, <b>which depend on your terminal</b>. For many (not all) terminals, <code>UP</code> is <code>&lt;ESC&gt;[A</code> &amp; <code>DOWN</code> is <code>&lt;ESC&gt;[B</code>."}, {"owner": {"reputation": 39, "user_id": 4777476, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b310122962370dc4156676734cecc056?s=128&d=identicon&r=PG&f=1", "display_name": "subrahmanyeswara swamy murala", "link": "https://stackoverflow.com/users/4777476/subrahmanyeswara-swamy-murala"}, "edited": false, "score": 0, "creation_date": 1470211972, "post_id": 38736850, "comment_id": 64850543, "body": "i just tried /bin/bash same behavior."}, {"owner": {"reputation": 39, "user_id": 4777476, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b310122962370dc4156676734cecc056?s=128&d=identicon&r=PG&f=1", "display_name": "subrahmanyeswara swamy murala", "link": "https://stackoverflow.com/users/4777476/subrahmanyeswara-swamy-murala"}, "edited": false, "score": 0, "creation_date": 1470212632, "post_id": 38736850, "comment_id": 64850984, "body": "If we send like UP is &lt;ESC&gt;[A &amp; DOWN is &lt;ESC&gt;[B then child will reading it as string. So how to solve this ?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1470216665, "post_id": 38736850, "comment_id": 64853752, "body": "@subrahmanyeswaraswamymurala don&#39;t send &quot;&lt;ESC&gt;&quot;, send the character code for escape - decimal 27 IIRC, octal 33. You can include it in a C string eg &quot;\\033]A&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 4777476, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b310122962370dc4156676734cecc056?s=128&d=identicon&r=PG&f=1", "display_name": "subrahmanyeswara swamy murala", "link": "https://stackoverflow.com/users/4777476/subrahmanyeswara-swamy-murala"}, "edited": false, "score": 0, "creation_date": 1470218398, "post_id": 38739208, "comment_id": 64854845, "body": "I tried above code up and down not working and one more issue is, after exit from above code bash not responding to any input. I think we are redirected stdin of bash so it needs to close terminal and reopen."}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "reply_to_user": {"reputation": 39, "user_id": 4777476, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b310122962370dc4156676734cecc056?s=128&d=identicon&r=PG&f=1", "display_name": "subrahmanyeswara swamy murala", "link": "https://stackoverflow.com/users/4777476/subrahmanyeswara-swamy-murala"}, "edited": false, "score": 0, "creation_date": 1470219000, "post_id": 38739208, "comment_id": 64855220, "body": "What kind of computer and what OS are you using? To be pedantic, the code should close pipe fds however this shall be done automatically on exit."}, {"owner": {"reputation": 39, "user_id": 4777476, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b310122962370dc4156676734cecc056?s=128&d=identicon&r=PG&f=1", "display_name": "subrahmanyeswara swamy murala", "link": "https://stackoverflow.com/users/4777476/subrahmanyeswara-swamy-murala"}, "edited": false, "score": 0, "creation_date": 1470222682, "post_id": 38739208, "comment_id": 64857596, "body": "intel i5-4570 CPU, with Ubuntu 15.10"}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "reply_to_user": {"reputation": 39, "user_id": 4777476, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b310122962370dc4156676734cecc056?s=128&d=identicon&r=PG&f=1", "display_name": "subrahmanyeswara swamy murala", "link": "https://stackoverflow.com/users/4777476/subrahmanyeswara-swamy-murala"}, "edited": false, "score": 0, "creation_date": 1470224316, "post_id": 38739208, "comment_id": 64858719, "body": "Hmm. Here it works fine. Remaining frozen means that it does not recognize <code>exit</code> command. To avoid freezing closing pipe descriptors may help. I am adding this to my answer."}, {"owner": {"reputation": 39, "user_id": 4777476, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b310122962370dc4156676734cecc056?s=128&d=identicon&r=PG&f=1", "display_name": "subrahmanyeswara swamy murala", "link": "https://stackoverflow.com/users/4777476/subrahmanyeswara-swamy-murala"}, "edited": false, "score": 0, "creation_date": 1470225959, "post_id": 38739208, "comment_id": 64859905, "body": "hi Marian, is up and down keys working in your system..?"}], "tags": [], "owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "is_accepted": false, "score": 3, "last_activity_date": 1470224398, "last_edit_date": 1470224398, "creation_date": 1470215380, "answer_id": 38739208, "question_id": 38736850, "link": "https://stackoverflow.com/questions/38736850/send-up-down-arrow-keys-to-process-through-pipe-in-linux-using-c-language/38739208#38739208", "title": "send up down arrow keys to process through pipe in linux using c language", "body": "<p>There are several points:</p>\n\n<p>1.) You have to invoke a shell which supports terminal editing with arrows. On a usual Linux this may be <code>/bin/bash</code> instead of <code>/bin/sh</code>.</p>\n\n<p>2.) <code>bash</code> is checking whether it's input is coming from a terminal device or not. Depending on this, it behaves like an <code>interactive shell</code> or not. It seems that you want to use it in interactive mode. However pipe is not a terminal device. To get it into interactive mode you can use bash option \"-i\" on its invocation.</p>\n\n<p>3.) As pointed by commentaries, on a usual Linux X-terminal codes for arrow up and down are multi character strings like \"\\033[A\" and \"\\033[B\". It depends on the device and environment you are using, maybe your values are correct for your system.</p>\n\n<p>The following code works on a usual Linux environment:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n   int p[2];\n   char enter = 10;\n   char *exit = \"exit\";\n   char *up = \"\\033[A\";\n   char *down = \"\\033[B\";\n   pipe(p);\n   if(fork())\n   {\n    write(p[1],up,3);\n    write(p[1],down,3);\n    write(p[1],exit,strlen(exit));\n    write(p[1],&amp;enter,1);\n    wait(NULL);\n   }\n   else\n   {\n    close(0);\n    dup(p[0]);\n    execl(\"/bin/bash\",\"bash\",\"-i\",NULL);\n   }\n}\n</code></pre>\n\n<p>Also, you shall test return values of <code>pipe</code> and <code>fork</code>. Personally I'd write it like:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n   int p[2];\n   int r;\n   char command[] = \"\\033[A\\033[Bexit\\n\";\n\n   r = pipe(p);\n   if (r &lt; 0) {\n       perror(\"Can't create pipe\");\n       return(-1);\n   }\n   r = fork();\n   if (r &lt; 0) {\n       perror(\"Can't fork\");\n       return(-1);\n   } else if (r &gt; 0) {\n       close(p[0]);\n       write(p[1], command, sizeof(command)-1);\n       close(p[1]);\n       wait(NULL);\n   } else {\n       close(p[1]);\n       dup2(p[0], 0);\n       close(p[0]);\n       execl(\"/bin/bash\",\"bash\",\"-i\",NULL);\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4777476, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b310122962370dc4156676734cecc056?s=128&d=identicon&r=PG&f=1", "display_name": "subrahmanyeswara swamy murala", "link": "https://stackoverflow.com/users/4777476/subrahmanyeswara-swamy-murala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 888, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1470224398, "creation_date": 1470208558, "last_edit_date": 1470209923, "question_id": 38736850, "link": "https://stackoverflow.com/questions/38736850/send-up-down-arrow-keys-to-process-through-pipe-in-linux-using-c-language", "title": "send up down arrow keys to process through pipe in linux using c language", "body": "<p>I have created two processes using fork. Created a pipe. Parent will write keys at write end of pipe and child stdin(0) will be duplicated by read end of pipe. Up to know its working very well and good for alphabets. \nBut i want to send up and down arrow keys also, please help me.</p>\n\n<pre><code>int main()\n{\n   int fd[2];\n   char enter = 10;\n   char *exit = \"exit\";\n   char up = 193;//what i have to use here\n   char down = 194;//what i have to use here\n   pipe(p);\n   if(fork())\n   {\n    write(p[1],&amp;up,1);              //not working\n    write(p[1],&amp;down,1);            //not working\n    write(p[1],exit,strlen(exit));  //working \n    write(p[1],&amp;enter,1);           //working\n    wait(NULL);\n   }\n   else\n   {\n    close(0);\n    dup(p[0]);\n    execl(\"/bin/sh\",\"sh\",NULL);\n   }\n}\n</code></pre>\n\n<p>Please help me, </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1470208259, "post_id": 38736703, "comment_id": 64848497, "body": "That code is broken."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1470208344, "post_id": 38736703, "comment_id": 64848533, "body": "Please show your research/debugging effort so far. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 3483, "user_id": 3932569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bca364f93a9dfab17419b31a8a1a504?s=128&d=identicon&r=PG&f=1", "display_name": "Garf365", "link": "https://stackoverflow.com/users/3932569/garf365"}, "edited": false, "score": 0, "creation_date": 1470210969, "post_id": 38736703, "comment_id": 64849968, "body": "You can convert an 1D array to a 2D array, BUT it dangerous because you change how to access of a amount of bytes. If you don&#39;t do correctly, it will result of undefined behavior. Also, doing that with an odd number of data it&#39;s simply impossible."}], "answers": [{"comments": [{"owner": {"reputation": 314, "user_id": 6586825, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-0qKtw_7J87c/AAAAAAAAAAI/AAAAAAAAAHE/dhoos6v2wMo/photo.jpg?sz=128", "display_name": "Rajat Mishra", "link": "https://stackoverflow.com/users/6586825/rajat-mishra"}, "edited": false, "score": 0, "creation_date": 1470270053, "post_id": 38736810, "comment_id": 64884929, "body": "I know what I did does not makes any sense. But it is not incorrect as the code compiles without warnings. My doubt is how can a 1D pointer converted to 2D one."}, {"owner": {"reputation": 956, "user_id": 327785, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/463ada4aef1b82f4373411a69b300d2c?s=128&d=identicon&r=PG", "display_name": "Giorgio Gambino", "link": "https://stackoverflow.com/users/327785/giorgio-gambino"}, "reply_to_user": {"reputation": 314, "user_id": 6586825, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-0qKtw_7J87c/AAAAAAAAAAI/AAAAAAAAAHE/dhoos6v2wMo/photo.jpg?sz=128", "display_name": "Rajat Mishra", "link": "https://stackoverflow.com/users/6586825/rajat-mishra"}, "edited": false, "score": 0, "creation_date": 1470306297, "post_id": 38736810, "comment_id": 64901087, "body": "If you mean how this conversion can be done: the operation <code>int **x = (int**)arr;</code> is syntactically correct. You will obtain a <code>int</code> pointer to <code>int</code> pointers or(more simple to understand) a <code>int[][]</code>"}], "tags": [], "owner": {"reputation": 956, "user_id": 327785, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/463ada4aef1b82f4373411a69b300d2c?s=128&d=identicon&r=PG", "display_name": "Giorgio Gambino", "link": "https://stackoverflow.com/users/327785/giorgio-gambino"}, "is_accepted": false, "score": 1, "last_activity_date": 1470212113, "last_edit_date": 1470212113, "creation_date": 1470208449, "answer_id": 38736810, "question_id": 38736703, "link": "https://stackoverflow.com/questions/38736703/converting-1d-array-to-2d-array-in-c/38736810#38736810", "title": "Converting 1D array to 2D array in C", "body": "<p>1) What you are trying to do is incorrect. You have to use a <code>int *</code> </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n  int *x;\n  int arr[] = {1,2,3,4,5};\n  x = arr;\n\n  //do what do you have to do\n\n}\n</code></pre>\n\n<p>2) For the array conversion I guess it makes no sense. </p>\n"}], "owner": {"reputation": 314, "user_id": 6586825, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-0qKtw_7J87c/AAAAAAAAAAI/AAAAAAAAAHE/dhoos6v2wMo/photo.jpg?sz=128", "display_name": "Rajat Mishra", "link": "https://stackoverflow.com/users/6586825/rajat-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 886, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1470212113, "creation_date": 1470208152, "question_id": 38736703, "link": "https://stackoverflow.com/questions/38736703/converting-1d-array-to-2d-array-in-c", "title": "Converting 1D array to 2D array in C", "body": "<p>I recently wrote the following code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n  int **x;\n  int arr[] = {1,2,3,4,5};\n  x = (int**)arr;\n}\n</code></pre>\n\n<p>How can I print the contents of arr using x ? Also explain how can 1D array be converted to a 2D array ?</p>\n"}, {"tags": ["c++", "c", "random", "permutation"], "comments": [{"owner": {"reputation": 11537, "user_id": 1485230, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/50a581523d3174f592aa9486aebbf0d8?s=128&d=identicon&r=PG", "display_name": "Antzi", "link": "https://stackoverflow.com/users/1485230/antzi"}, "edited": false, "score": 0, "creation_date": 1470208430, "post_id": 38736675, "comment_id": 64848572, "body": "This sounds unlikely to find it... Your best option might be to write it yourself."}, {"owner": {"reputation": 3904, "user_id": 2417578, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d2e6626f1fc0b76fc7e8981687304f40?s=128&d=identicon&r=PG", "display_name": "sh1", "link": "https://stackoverflow.com/users/2417578/sh1"}, "edited": false, "score": 0, "creation_date": 1470294101, "post_id": 38736675, "comment_id": 64892954, "body": "What do you do with the result vector?  If you need performance you might be able to eliminate it altogether."}, {"owner": {"reputation": 733, "user_id": 778968, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/11b1623baee3630839d1f916aa1cca66?s=128&d=identicon&r=PG", "display_name": "metlira", "link": "https://stackoverflow.com/users/778968/metlira"}, "edited": false, "score": 0, "creation_date": 1470295846, "post_id": 38736675, "comment_id": 64894045, "body": "Actually, i&#39;m using an c++ open source library named as PCG Random Number Generator. It allows to use 128 bit PRNG, but does not support a permutation function like shuffle."}], "answers": [{"comments": [{"owner": {"reputation": 733, "user_id": 778968, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/11b1623baee3630839d1f916aa1cca66?s=128&d=identicon&r=PG", "display_name": "metlira", "link": "https://stackoverflow.com/users/778968/metlira"}, "edited": false, "score": 0, "creation_date": 1470295622, "post_id": 38737864, "comment_id": 64893903, "body": "one of the solution is exactly like this. but the problem is seeding PRNG with 128 bit key. as far as i know mt19937 uses 32 bit key and mt19937_64 uses 64 bit key."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 733, "user_id": 778968, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/11b1623baee3630839d1f916aa1cca66?s=128&d=identicon&r=PG", "display_name": "metlira", "link": "https://stackoverflow.com/users/778968/metlira"}, "edited": false, "score": 0, "creation_date": 1470298785, "post_id": 38737864, "comment_id": 64895862, "body": "@metlira: No, as I said <code>seed()</code> takes a sequence. IIRC, there&#39;s more than <b>500</b> bytes of state."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1470211561, "creation_date": 1470211561, "answer_id": 38737864, "question_id": 38736675, "link": "https://stackoverflow.com/questions/38736675/pseudo-random-permutation-using-128-bit-seed/38737864#38737864", "title": "Pseudo-random permutation using 128 bit seed", "body": "<p>No need for a library (so it actually is on-topic!)</p>\n\n<p><code>std::shuffle</code> gives you the permutation; it takes a <em>UniformRandomBitGenerator</em> such as <code>std::mt19937</code>. <code>std::mt19937::seed()</code> takes a sequence, so you can feed it 128 bits of initial state. And taking a subrange is of course trivial.</p>\n"}, {"comments": [{"owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 0, "creation_date": 1470212849, "post_id": 38737869, "comment_id": 64851136, "body": "whats with the scope-operator hell? You <b>do</b> know that there is a keyword called <code>using</code>, right?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 0, "creation_date": 1470213542, "post_id": 38737869, "comment_id": 64851562, "body": "@specializt: Have you look at <a href=\"http://stackoverflow.com/questions/1452721/why-is-using-namespace-std-in-c-considered-bad-practice\">why-is-using-namespace-std-in-c-considered-bad-practice</a> ?"}, {"owner": {"reputation": 1836, "user_id": 351861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540239cb3a1089fcb53aae8abea1cfdd?s=128&d=identicon&r=PG&f=1", "display_name": "specializt", "link": "https://stackoverflow.com/users/351861/specializt"}, "edited": false, "score": 0, "creation_date": 1470221333, "post_id": 38737869, "comment_id": 64856719, "body": "solution : <a href=\"http://stackoverflow.com/a/1455227/351861\">stackoverflow.com/a/1455227/351861</a> and <b>especially</b> : <a href=\"http://stackoverflow.com/a/26722134/351861\">stackoverflow.com/a/26722134/351861</a>"}, {"owner": {"reputation": 733, "user_id": 778968, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/11b1623baee3630839d1f916aa1cca66?s=128&d=identicon&r=PG", "display_name": "metlira", "link": "https://stackoverflow.com/users/778968/metlira"}, "edited": false, "score": 0, "creation_date": 1470295751, "post_id": 38737869, "comment_id": 64893982, "body": "that&#39;s a new shuffling method. thanks for sharing. but my constraint is to use a 128 bit key for PRNG."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1470211572, "creation_date": 1470211572, "answer_id": 38737869, "question_id": 38736675, "link": "https://stackoverflow.com/questions/38736675/pseudo-random-permutation-using-128-bit-seed/38737869#38737869", "title": "Pseudo-random permutation using 128 bit seed", "body": "<p>You may use <a href=\"http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\" rel=\"nofollow\">Fisher\u2013Yates_shuffle</a>:</p>\n\n<pre><code>// Fisher\u2013Yates_shuffle\nstd::vector&lt;int&gt;\nFisherYatesShuffle(std::size_t size, std::size_t max_size, std::mt19937&amp; gen)\n{\n    assert(size &lt; max_size);\n    std::vector&lt;int&gt; res(size);\n\n    for (std::size_t i = 0; i != max_size; ++i) {\n        std::uniform_int_distribution&lt;&gt; dis(0, i);\n        std::size_t j = dis(gen);\n        if (j &lt; res.size()) {\n            if (i &lt; res.size()) {\n                res[i] = res[j];\n            }\n            res[j] = i;\n        }\n    }\n    return res;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/KvvCda\" rel=\"nofollow\">Live example</a></p>\n"}], "owner": {"reputation": 733, "user_id": 778968, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/11b1623baee3630839d1f916aa1cca66?s=128&d=identicon&r=PG", "display_name": "metlira", "link": "https://stackoverflow.com/users/778968/metlira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1470211572, "creation_date": 1470208078, "question_id": 38736675, "link": "https://stackoverflow.com/questions/38736675/pseudo-random-permutation-using-128-bit-seed", "title": "Pseudo-random permutation using 128 bit seed", "body": "<p>I'm looking for a couple of functions that permute the index of a vector in an efficient way by seeding with 128-bit key. Optimization is critical for me since i'm doing the same operation multiple times. </p>\n\n<p>Can anyone suggest a C/C++ open-source library in which 128 bit seeding is available and it supports a function like permute(seed, range(min,max),sample_size)?</p>\n\n<p>For example; if permute(1, [0,10], 10) function gives the result as:\n3 6 7 2 4 9 8 1 0 5, then permute(1, [0,10], 5) should give 3 6 7 2 4.</p>\n\n<p>min, max and sample_size parameters are dynamic variables. It changes at each iteration.    </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 3, "creation_date": 1470205540, "post_id": 38735759, "comment_id": 64847094, "body": "If on your system, int is not 16 bit, you are reading past the end of the array. That is undefined behaviour, because you also read any garbage that is stored there. But even if you had used a 16 bit integer type, you would still depend on the endianness of the platform. But whatever the endianness, the output would not be 31 or 13, unless you had 4-bit bytes. &lt;g&gt;."}, {"owner": {"reputation": 2011, "user_id": 6537701, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/513000037985985ad2541a504674f12e?s=128&d=identicon&r=PG&f=1", "display_name": "kurakura88", "link": "https://stackoverflow.com/users/6537701/kurakura88"}, "edited": false, "score": 1, "creation_date": 1470205805, "post_id": 38735759, "comment_id": 64847243, "body": "1 is SOH (start of heading), 3 is ETX (end of text). Did you mean &#39;1&#39; and &#39;3&#39; instead?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1470205824, "post_id": 38735759, "comment_id": 64847253, "body": "You already self-answered the only question asked in your post. Your program printed <i>neither</i> 13 nor 31, as you noted."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1470206179, "post_id": 38735759, "comment_id": 64847437, "body": "What are you trying to achieve exactly ? It won&#39;t print 13 nor 31 even if  <code>int</code> is 16 bits on your platform."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1470207768, "post_id": 38735759, "comment_id": 64848261, "body": "isn&#39;t it like <code>(int*)xx</code> violates strict aliasing?"}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1470208630, "post_id": 38735759, "comment_id": 64848673, "body": "@SouravGhosh AFAIK, it&#39;s the dereferencing that breaks strict aliasing. The cast itself is possible UB for a different reason: <code>&amp;xx</code> might not be suitably aligned."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1470208646, "post_id": 38735759, "comment_id": 64848678, "body": "@SouravGhosh guess so too"}], "answers": [{"comments": [{"owner": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "edited": false, "score": 5, "creation_date": 1470205805, "post_id": 38735934, "comment_id": 64847244, "body": "If you don&#39;t understand the question, why do you post an answer?"}, {"owner": {"reputation": 27792, "user_id": 1830293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6prVF.jpg?s=128&g=1", "display_name": "DAXaholic", "link": "https://stackoverflow.com/users/1830293/daxaholic"}, "reply_to_user": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "edited": false, "score": 1, "creation_date": 1470205960, "post_id": 38735934, "comment_id": 64847325, "body": "I am not sure is not the same as I am not able to understand anything - if the guess is wrong I will delete the answer"}, {"owner": {"reputation": 606, "user_id": 1864036, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PnVHS.jpg?s=128&g=1", "display_name": "starturtle", "link": "https://stackoverflow.com/users/1864036/starturtle"}, "reply_to_user": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "edited": false, "score": 2, "creation_date": 1470206481, "post_id": 38735934, "comment_id": 64847571, "body": "@Ingo These are the two most likely expected ways the code should behave. One is simply about printing digits 1 and 3 as contents of a char array, the other includes parsing to int and then printing out the result. Both match the expected result. That the OP is confused about the meaning of <code>1</code> and <code>&#39;1&#39;</code> as <code>char</code> initializers doesn&#39;t make his question that unclear imo."}, {"owner": {"reputation": 15836, "user_id": 1675492, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HsMph.jpg?s=128&g=1", "display_name": "Ingo B&#252;rk", "link": "https://stackoverflow.com/users/1675492/ingo-b%c3%bcrk"}, "reply_to_user": {"reputation": 606, "user_id": 1864036, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PnVHS.jpg?s=128&g=1", "display_name": "starturtle", "link": "https://stackoverflow.com/users/1864036/starturtle"}, "edited": false, "score": 0, "creation_date": 1470206588, "post_id": 38735934, "comment_id": 64847634, "body": "@TinyT Yeah, maybe in your opinion it isn&#39;t unclear. Maybe in mine it isn&#39;t either. But this answer starts with saying that the author doesn&#39;t understand the question. If they don&#39;t understand it, they shouldn&#39;t answer it. Imho."}, {"owner": {"reputation": 27792, "user_id": 1830293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6prVF.jpg?s=128&g=1", "display_name": "DAXaholic", "link": "https://stackoverflow.com/users/1830293/daxaholic"}, "edited": false, "score": 1, "creation_date": 1470207153, "post_id": 38735934, "comment_id": 64847937, "body": "Again - I did not say I do not understand it but I am not sure if my understanding of it is correct. Maybe you do not understand the introduction of the answer"}], "tags": [], "owner": {"reputation": 27792, "user_id": 1830293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6prVF.jpg?s=128&g=1", "display_name": "DAXaholic", "link": "https://stackoverflow.com/users/1830293/daxaholic"}, "is_accepted": false, "score": 3, "last_activity_date": 1470205623, "creation_date": 1470205623, "answer_id": 38735934, "question_id": 38735759, "link": "https://stackoverflow.com/questions/38735759/convert-a-2-bytes-char-array-to-int/38735934#38735934", "title": "Convert a 2 bytes char array to int", "body": "<p>I am not really sure what is your goal but you may want to use something like </p>\n\n<pre><code>int main()\n{\n    unsigned char xx[]= \"13\";\n    printf(\"val is %s\\r\\n\",xx);\n}  \n</code></pre>\n\n<p>or  </p>\n\n<pre><code>int main()\n{\n    unsigned char xx[]={1,3};\n    int xxx = xx[0] * 10 + xx[1];\n    printf(\"val is %d\\r\\n\",xxx);\n}  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 1, "last_activity_date": 1470206223, "creation_date": 1470206223, "answer_id": 38736090, "question_id": 38735759, "link": "https://stackoverflow.com/questions/38735759/convert-a-2-bytes-char-array-to-int/38736090#38736090", "title": "Convert a 2 bytes char array to int", "body": "<p>What is happening is that you have <code>sizeof(int)</code> as 4. The int <code>xxx</code> has 2 bytes filled, but the other two bytes are random. That is why you are getting a big number.</p>\n\n<p>If you change it to </p>\n\n<pre><code> unsigned char xx[]={1,3,0,0};\n</code></pre>\n\n<p>then, on a little-endian machine you will get an output of `769'</p>\n\n<p>This is because in a little endian system, the LSByte is stored first (0x01) then the next most significant byte (0x02) and then the other bytes (0x00, 0x00)</p>\n\n<p>The number <code>xxx</code> becomes <code>0x00000301</code> or <code>769</code></p>\n\n<p>On a big endian machine (Power PC, or certain microcontrollers) the MSbyte is stored first. So <code>xxx</code> becomes <code>0x01030000</code> or <code>16973824</code></p>\n"}], "owner": {"reputation": 67, "user_id": 3496014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c576ca13dd3040b85dfc4dfa666ca16?s=128&d=identicon&r=PG&f=1", "display_name": "Lewis Liu", "link": "https://stackoverflow.com/users/3496014/lewis-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 860, "favorite_count": 0, "closed_date": 1470601644, "answer_count": 2, "score": 0, "last_activity_date": 1470601390, "creation_date": 1470204904, "last_edit_date": 1470601390, "question_id": 38735759, "link": "https://stackoverflow.com/questions/38735759/convert-a-2-bytes-char-array-to-int", "closed_reason": "Needs details or clarity", "title": "Convert a 2 bytes char array to int", "body": "<p>I was confused on how to get this code working:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    unsigned char xx[]={1,3};\n\n    int xxx=*((int*)xx);\n    printf(\"val is %d\\r\\n\",xxx);\n}\n</code></pre>\n\n<p>Will the code print 13 or 31? When I tried it, it prints out a big number, not what I was expecting.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1470205529, "post_id": 38735739, "comment_id": 64847092, "body": "Use <code>%f</code> to print float value. I.e. <code>printf(&quot;%f percent \\n&quot;, percent);</code>."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1470205531, "post_id": 38735739, "comment_id": 64847093, "body": "Your calculation for percentage is wrong... should be number correct divided by number of questions, not the other way around... and it needs to be multiplied by 100, and something in there needs to be <code>float</code> so it won&#39;t be calculated with integer division.  Also you need the <code>%f</code> format specifier to print it, not <code>%d</code> which is for integers."}, {"owner": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "edited": false, "score": 0, "creation_date": 1470207914, "post_id": 38735739, "comment_id": 64848330, "body": "It&#39;s unclear what you are asking about. Questions usually end with <code>?</code>. Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1470205834, "post_id": 38735952, "comment_id": 64847260, "body": "Casting one of them will do... the other will be converted automatically.  Or move multiply to the front and use a <code>float</code> literal (<code>100f</code>) instead of an <code>int</code> one."}], "tags": [], "owner": {"reputation": 260, "user_id": 6670228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ccaf4dccbb735ddb7d7351e8b3aced7?s=128&d=identicon&r=PG&f=1", "display_name": "technokrat", "link": "https://stackoverflow.com/users/6670228/technokrat"}, "is_accepted": false, "score": 1, "last_activity_date": 1470205691, "creation_date": 1470205691, "answer_id": 38735952, "question_id": 38735739, "link": "https://stackoverflow.com/questions/38735739/c-program-simple-math-program/38735952#38735952", "title": "C program: Simple math program", "body": "<p>In C, dividing two integers won't get you a floating point number, even if the assignment is to a float. It's just how the language works. You'll have to cast NumberOfTimes and TotalCorrect as floats.</p>\n\n<p>So replace \n<code>percent=NumberOfTimes/TotalCorrect;</code> with </p>\n\n<pre><code>percent=(float)TotalCorrect/(float)NumberOfTimes * 100;\n</code></pre>\n\n<p>Furthermore, you're trying to print a float as an integer in the line </p>\n\n<pre><code>printf(\"%d percent \\n\", percent);\n</code></pre>\n\n<p>which is giving you a wonky result. Instead, try:</p>\n\n<pre><code>printf(\"%d percent \\n\", (int)percent);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3697, "user_id": 1848578, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7e2bfa9bcb3299428c8321c37db0560?s=128&d=identicon&r=PG", "display_name": "qxz", "link": "https://stackoverflow.com/users/1848578/qxz"}, "is_accepted": true, "score": 3, "last_activity_date": 1470207698, "last_edit_date": 1470207698, "creation_date": 1470206359, "answer_id": 38736136, "question_id": 38735739, "link": "https://stackoverflow.com/questions/38735739/c-program-simple-math-program/38736136#38736136", "title": "C program: Simple math program", "body": "<p>There are a few things going on. First, to print a <code>float</code> with <code>printf</code>, use <code>%f</code>. <code>%d</code> is for <code>int</code>s.</p>\n\n<p>Secondly, when you calculate <code>percent</code>, you're accidentally using integer division. Since <code>NumberOfTimes</code> and <code>TotalCorrect</code> are both integers, <code>NumberOfTimes/TotalCorrect</code> performs integer division and produces an <code>int</code>. It's only converted to a <code>float</code> <em>after</em> the whole initializing expression is evaluated. Use this instead:</p>\n\n<pre><code>percent = (float)TotalCorrect / NumberOfTimes;\n// OR, if you want an actual percent:\npercent = 100.0f*TotalCorrect/NumberOfTimes;\n</code></pre>\n\n<p>Then, using <code>%f</code>:</p>\n\n<pre><code>printf(\"%f percent\\n\", percent); // \"80.000000 percent\"\n</code></pre>\n\n<p>Note that this will display the percentage out to many decimal places; if you want a cleaner display without a decimal point, you could just calculate the percent as an <code>int</code>:</p>\n\n<pre><code>// multiply before dividing to avoid integer division problems\nint percent = 100*TotalCorrect/NumberOfTimes;\nprintf(\"%d percent\\n\", percent); // \"80 percent\"\n</code></pre>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 27, "user_id": 6670622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2c28d92b79ebdc2eba695a702bffb8a?s=128&d=identicon&r=PG&f=1", "display_name": "xin", "link": "https://stackoverflow.com/users/6670622/xin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 38736136, "answer_count": 2, "score": 0, "last_activity_date": 1470210769, "creation_date": 1470204814, "last_edit_date": 1470210769, "question_id": 38735739, "link": "https://stackoverflow.com/questions/38735739/c-program-simple-math-program", "title": "C program: Simple math program", "body": "<p><strong>Want to print for example \n  Grade: 4/5\n  80 percent</strong>\nProgram ask a user how many math problems they want to solve and prints out the number of \"wrongs/the number of rights\" and their grade. I think I dont have my math right at the end of the code cause its printing out for example:\n  Grade: 4/5\n  -7446528 percent</p>\n\n<p>+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</p>\n\n<pre><code># include &lt;stdio.h&gt;\n\nint main()\n{\n    int NumberOfTimes, AddAns, SubAns, AddCorrect=0, SubCorrect=0, CorrectAnsAdd, CorrectAnsSub, TotalCorrect, TotalWrong, Add;\n    int i,a,b,c,d,e,f,g;\n    float percent;\n\n    printf(\"\\n\");\n    printf(\"-------------------MATH QUIZ------------------------\\n\");\n    printf(\"Enter the number of Math problems you want to solve:\"); //enters the # of problems the program produces\n    scanf(\"%d\", &amp;NumberOfTimes);\n    printf(\"\\n\");\n    srand(time(NULL));\n    //Random number generator\n    for (i=0;i&lt;NumberOfTimes;++i)\n    {\n        b = rand() %3 + 1;\n        c = rand() %3 + 1;\n        a = rand() %2 + 1;\n\n        //Random addition problems\n        if (a == 1)\n        {\n            printf(\"%d + %d = \", b,c);\n            scanf(\"%d\", &amp;AddAns);\n            d = b + c;\n            if (AddAns == d)\n            {\n                printf(\"  +Correct\\n\");\n                AddCorrect = AddCorrect + 1;\n            }\n            //Random subtraction problems\n            else\n            {\n                printf(\"  +Wrong, it was %d\\n\", d);\n                AddIncorrect = AddIncorrect + 1;\n            }\n        }\n        if (a == 2)\n        {\n            printf(\"%d - %d = \", b,c);\n            scanf(\"%d\", &amp;SubAns);\n            g = b - c;\n            //Produces right or wrong answers\n            if (SubAns == g)\n            {\n               printf(\"  +Correct\\n\");\n               SubCorrect = SubCorrect + 1;\n            }\n            else\n            {\n                printf(\"  +Wrong, it was %d\\n\", g);\n                SubIncorrect = SubIncorrect + 1;\n            }\n        }\n    }\n    //Producing the output to wrong/right numbers and grade percentage \n    TotalCorrect = AddCorrect + SubCorrect;\n    printf(\"\\n\");\n    printf(\"Grade: %d/%d\\n\",TotalCorrect,NumberOfTimes);\n    printf(\"\\n\");\n    percent=NumberOfTimes/TotalCorrect;\n    printf(\"%d percent \\n\", percent);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "raspberry-pi", "arm"], "comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1470205172, "post_id": 38735710, "comment_id": 64846895, "body": "enable <code>-Wall</code> and read the warnings at compile time"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1470206388, "post_id": 38735710, "comment_id": 64847533, "body": "You tagged this as <code>C++</code>, but if you had actually used <code>C++</code>, <a href=\"http://ideone.com/qEoA0T\" rel=\"nofollow noreferrer\">the error becomes obvious</a>"}, {"owner": {"reputation": 337, "user_id": 1611819, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/65fb26430fb4571cfc82741342af1bcc?s=128&d=identicon&r=PG", "display_name": "inckka", "link": "https://stackoverflow.com/users/1611819/inckka"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1470206652, "post_id": 38735710, "comment_id": 64847672, "body": "@PaulMcKenzie Yeah. I removed the tags and thanks for the info."}, {"owner": {"reputation": 337, "user_id": 1611819, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/65fb26430fb4571cfc82741342af1bcc?s=128&d=identicon&r=PG", "display_name": "inckka", "link": "https://stackoverflow.com/users/1611819/inckka"}, "edited": false, "score": 0, "creation_date": 1470209092, "post_id": 38735710, "comment_id": 64848917, "body": "Explain the down vote please?"}], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 1611819, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/65fb26430fb4571cfc82741342af1bcc?s=128&d=identicon&r=PG", "display_name": "inckka", "link": "https://stackoverflow.com/users/1611819/inckka"}, "edited": false, "score": 0, "creation_date": 1470205399, "post_id": 38735806, "comment_id": 64847015, "body": "Is there any particular reason why its working when run on intel PC?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 337, "user_id": 1611819, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/65fb26430fb4571cfc82741342af1bcc?s=128&d=identicon&r=PG", "display_name": "inckka", "link": "https://stackoverflow.com/users/1611819/inckka"}, "edited": false, "score": 0, "creation_date": 1470205486, "post_id": 38735806, "comment_id": 64847063, "body": "@inckka Due to memory alignment, I guess. Try to print addresses of both arrays and see if there is more than 1 <code>double</code> between last element of first array and first element of the second array."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 337, "user_id": 1611819, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/65fb26430fb4571cfc82741342af1bcc?s=128&d=identicon&r=PG", "display_name": "inckka", "link": "https://stackoverflow.com/users/1611819/inckka"}, "edited": false, "score": 5, "creation_date": 1470206616, "post_id": 38735806, "comment_id": 64847654, "body": "@inckka The behavior is undefined, meaning anything can happen.  Asking why it &quot;works&quot; is pointless since &quot;working&quot; is one thing that can happen if the behavior is undefined."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1470209485, "post_id": 38735806, "comment_id": 64849131, "body": "@PaulMcKenzie I totally agree but I think is a good exercise to understand why and how a specific undefined behavior can be deterministic with a specific configuration. It engraves the concept in the memory."}, {"owner": {"reputation": 4426, "user_id": 450609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6708bd9ccabfcb1cf6863fb32f32d1de?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/450609/dave"}, "edited": false, "score": 1, "creation_date": 1470274572, "post_id": 38735806, "comment_id": 64886885, "body": "@LPs: but this undefined behaviour depends on the particular version of the compiler and the computer chip it runs on.  The reason for the difference in behaviour is because the compiler knows <code>ybots</code> and <code>ytops</code> don&#39;t overlap and it is free to reorder memory writes to them, and can also print the values contained from registers before flushing to memory (knowing that the memory region can&#39;t be changed by any other instructions).  Oops, the above doesn&#39;t apply if you invoke UB, but then the compiler is free to give <i>any</i> result."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 4426, "user_id": 450609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6708bd9ccabfcb1cf6863fb32f32d1de?s=128&d=identicon&r=PG", "display_name": "dave", "link": "https://stackoverflow.com/users/450609/dave"}, "edited": false, "score": 0, "creation_date": 1470290648, "post_id": 38735806, "comment_id": 64891330, "body": "@dave Probably. It can also depends on caches setting on armv7. Many reasons that can be investigated using real platform with correct compiler."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 2, "last_activity_date": 1470205727, "last_edit_date": 1470205727, "creation_date": 1470205101, "answer_id": 38735806, "question_id": 38735710, "link": "https://stackoverflow.com/questions/38735710/strange-different-results-when-dump-two-adjacent-c-arrays-on-intel-x-86-and-arm/38735806#38735806", "title": "Strange different results when dump two adjacent C arrays on Intel X_86 and ARM architectures", "body": "<p>All your for are wrong.</p>\n\n<p>Using <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> array indexes start from <code>0</code> to <code>length_of_array-1</code></p>\n\n<p>So, using</p>\n\n<pre><code>for(int i=0;i&lt;8;i++)\n</code></pre>\n\n<p>you are accessing the array out of bounds due to last <code>i</code> value that is <code>7</code>: your array start from <code>ytops[0]</code> to <code>ytops[6]</code>. This is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">Undefined Behavior</a></p>\n\n<p>You must use</p>\n\n<pre><code>for(int i=0;i&lt;7;i++)\n</code></pre>\n\n<p>Best if you do, for example using <code>ytops</code> array</p>\n\n<pre><code>for(size_t i=0;i&lt;sizeof(ytops)/sizeof(ytops[0]);i++)\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 1611819, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/65fb26430fb4571cfc82741342af1bcc?s=128&d=identicon&r=PG", "display_name": "inckka", "link": "https://stackoverflow.com/users/1611819/inckka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 38735806, "answer_count": 1, "score": -1, "last_activity_date": 1470206575, "creation_date": 1470204683, "last_edit_date": 1470206575, "question_id": 38735710, "link": "https://stackoverflow.com/questions/38735710/strange-different-results-when-dump-two-adjacent-c-arrays-on-intel-x-86-and-arm", "title": "Strange different results when dump two adjacent C arrays on Intel X_86 and ARM architectures", "body": "<p>I'm getting two different results when dumping the same two arrays with C, in two different below computer architectures. Can anyone explain me the reason?</p>\n\n<ol>\n<li><p>Architecture One: x86_64 (ordinary 64bit intel PC with fedora 23)</p></li>\n<li><p>Architecture Two: armv7l (raspberry pi with raspbian)</p></li>\n</ol>\n\n<p>here's sample the code</p>\n\n<pre><code>double ytops[7];\ndouble ybots[7];                     \n\n// Assigning values loop\nfor(int i=0;i&lt;8;i++)\n{\n    frame_grabber(); // some custom function that gives sensor data with two variables: ruler_top_cal_preset, ruler_bottom_cal_preset integer\n\n    ytops[i] = ruler_top_cal_preset;\n    ybots[i] = ruler_bottom_cal_preset;\n\n    printf(\"ytops[%i]: %f \\n\", i, ytops[i]);\n    printf(\"ybots[%i]: %f \\n\", i, ybots[i]);\n}\n\nprintf(\"---raw-array--- \\n\");\n\nfor(int i = 0; i&lt;8; i++ ){ \n     printf(\"ytops[%i]: %f \\n\", i, ytops[i]);\n}\n\nprintf(\"--------------- \\n\");\n\nfor(int i = 0; i&lt;8; i++ ){ \n     printf(\"ybots[%i]: %f \\n\", i, ybots[i]);\n}\n\nprintf(\"-------end----- \\n\");\n</code></pre>\n\n<p><strong>Architecture 1(X_86) gives this results:</strong></p>\n\n<pre><code>ytops[0]: 143.000000 \nybots[0]: 211.000000 \nytops[1]: 143.000000 \nybots[1]: 211.000000 \nytops[2]: 143.000000 \nybots[2]: 175.000000 \nytops[3]: 144.000000 \nybots[3]: 175.000000 \nytops[4]: 144.000000 \nybots[4]: 175.000000 \nytops[5]: 144.000000 \nybots[5]: 175.000000 \nytops[6]: 144.000000 \nybots[6]: 172.000000 \nytops[7]: 143.000000 \nybots[7]: 172.000000 \n---raw-array--- \nytops[0]: 143.000000 \nytops[1]: 143.000000 \nytops[2]: 143.000000 \nytops[3]: 144.000000 \nytops[4]: 144.000000 \nytops[5]: 144.000000 \nytops[6]: 144.000000 \nytops[7]: 143.000000 \n--------------- \nybots[0]: 211.000000 \nybots[1]: 211.000000 \nybots[2]: 175.000000 \nybots[3]: 175.000000 \nybots[4]: 175.000000 \nybots[5]: 175.000000 \nybots[6]: 172.000000 \nybots[7]: 172.000000 \n-------end----- \n</code></pre>\n\n<p><strong>Architecture 2 (ARMV7l) gives this:</strong></p>\n\n<pre><code>ytops[0]: 206.000000\nybots[0]: 413.000000\nytops[1]: 206.000000\nybots[1]: 411.000000\nytops[2]: 205.000000\nybots[2]: 427.000000\nytops[3]: 206.000000\nybots[3]: 415.000000\nytops[4]: 205.000000\nybots[4]: 416.000000\nytops[5]: 205.000000\nybots[5]: 421.000000\nytops[6]: 206.000000\nybots[6]: 411.000000\nytops[7]: 206.000000\nybots[7]: 418.000000\n---raw-array---\nytops[0]: 418.000000\nytops[1]: 206.000000\nytops[2]: 205.000000\nytops[3]: 206.000000\nytops[4]: 205.000000\nytops[5]: 205.000000\nytops[6]: 206.000000\nytops[7]: 206.000000\n---------------\nybots[0]: 413.000000\nybots[1]: 411.000000\nybots[2]: 427.000000\nybots[3]: 415.000000\nybots[4]: 416.000000\nybots[5]: 421.000000\nybots[6]: 411.000000\nybots[7]: 418.000000\n-------end-----\n</code></pre>\n\n<p>Of course the numerical values are different when comparing the both result sets due to the sensor data which were at that movement. Its acceptable.</p>\n\n<p>On architecture one, everything is as assigned by the value assigned loop. Its correct. However look at the architecture two's result set's  'ytops[0]' value in \"value assigning loop\" and the same value of \"raw-array\" print.</p>\n\n<p><code>ytops[0]</code> is getting the value of <code>ybots[7]</code></p>\n\n<p>How this is possible? What is this phenomenon is called? how to avoid this?</p>\n"}, {"tags": ["c++", "c", "linux", "ioctl"], "comments": [{"owner": {"reputation": 2630, "user_id": 1983197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwjpR.png?s=128&g=1", "display_name": "LordWilmore", "link": "https://stackoverflow.com/users/1983197/lordwilmore"}, "edited": false, "score": 0, "creation_date": 1470205293, "post_id": 38735668, "comment_id": 64846962, "body": "Where are you getting your file descriptor from?"}, {"owner": {"reputation": 9, "user_id": 6670381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a362f5db031fc94241828aa1712da44?s=128&d=identicon&r=PG&f=1", "display_name": "KKJoe", "link": "https://stackoverflow.com/users/6670381/kkjoe"}, "reply_to_user": {"reputation": 2630, "user_id": 1983197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwjpR.png?s=128&g=1", "display_name": "LordWilmore", "link": "https://stackoverflow.com/users/1983197/lordwilmore"}, "edited": false, "score": 0, "creation_date": 1470212778, "post_id": 38735668, "comment_id": 64851088, "body": "I refer the source from this <a href=\"http://git.kernel.org/cgit/linux/kernel/git/cjb/mmc-utils.git/tree/mmc_cmds.c\" rel=\"nofollow noreferrer\">git.kernel.org/cgit/linux/kernel/git/cjb/mmc-utils.git/tree/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 2630, "user_id": 1983197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwjpR.png?s=128&g=1", "display_name": "LordWilmore", "link": "https://stackoverflow.com/users/1983197/lordwilmore"}, "edited": false, "score": 0, "creation_date": 1470213001, "post_id": 38735668, "comment_id": 64851226, "body": "Yes but you&#39;re calling the function, passing a file descriptor in the parameter <code>fd</code>.  Where are you getting that value from, i.e. how are you opening the file?"}, {"owner": {"reputation": 9, "user_id": 6670381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a362f5db031fc94241828aa1712da44?s=128&d=identicon&r=PG&f=1", "display_name": "KKJoe", "link": "https://stackoverflow.com/users/6670381/kkjoe"}, "reply_to_user": {"reputation": 2630, "user_id": 1983197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwjpR.png?s=128&g=1", "display_name": "LordWilmore", "link": "https://stackoverflow.com/users/1983197/lordwilmore"}, "edited": false, "score": 0, "creation_date": 1470215031, "post_id": 38735668, "comment_id": 64852557, "body": "I open the file by this way: fd = open(device, O_RDWR);"}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1516623424, "post_id": 38735668, "comment_id": 83749326, "body": "See this project: <a href=\"https://github.com/BertoldVdb/sdtool\" rel=\"nofollow noreferrer\">github.com/BertoldVdb/sdtool</a>"}], "owner": {"reputation": 9, "user_id": 6670381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a362f5db031fc94241828aa1712da44?s=128&d=identicon&r=PG&f=1", "display_name": "KKJoe", "link": "https://stackoverflow.com/users/6670381/kkjoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516621805, "creation_date": 1470204469, "last_edit_date": 1495541694, "question_id": 38735668, "link": "https://stackoverflow.com/questions/38735668/send-cmd-to-sd-card-but-error-22-on-linux", "title": "Send cmd to SD card but error 22 on Linux", "body": "<p>I refer an article:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/23312933/any-way-to-send-commands-to-sd-card-from-linux-userspace\">Any way to send commands to SD card from Linux userspace?</a></p>\n\n<p>and use the source of mmc-util to send cmd to SD card, there is the code:</p>\n\n<pre><code>int cmd_test(int fd, __u8 *ext_csd)\n{\n    int ret = 0;\n    struct mmc_ioc_cmd idata;\n    memset(&amp;idata, 0, sizeof(idata));\n    memset(ext_csd, 0, sizeof(__u8) * 512);\n    idata.write_flag = 0;\n    idata.opcode = 17;\n    idata.arg = 0;\n    idata.flags = MMC_DATA_READ;\n    idata.blksz = 512;\n    idata.blocks = 1;\n    mmc_ioc_cmd_set_data(idata, ext_csd);\n\n    ret = ioctl(fd, MMC_IOC_CMD, &amp;idata);\n    if (ret)\n        perror(\"ioctl\");\n\n    return ret;\n}\n</code></pre>\n\n<p>finally receive error 22: invalid argument. I try another opcode like 10, 56..., it finally result same error.\nThe SD card is connected by usb reader, does it cause the error? or there are parameter setting error?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "c", "pointers", "struct"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1470202678, "post_id": 38735165, "comment_id": 64845821, "body": "Are you unsure how to deal with an <code>int*</code> member variable of a <code>struct</code> or an <code>int*</code> variable by itself?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1470203099, "post_id": 38735165, "comment_id": 64845983, "body": "You would assign it in the same way you assign any other value. With the assignment (<code>=</code>) operator. Perhaps you mean <i>what</i> you should assign to it. Of course we can&#39;t answer that as only you can decide what the program should do (in the same way we can&#39;t tell you that <code>num1</code> should be <code>30</code> and not <code>20</code>). The only thing we can say is that the value needs to be an <code>int</code> pointer. Common sources: <code>malloc</code> call or address of an existing <code>int</code> variable."}], "answers": [{"comments": [{"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 0, "creation_date": 1470203086, "post_id": 38735271, "comment_id": 64845975, "body": "*(test.num2) = 20; This is UB. You have to allocate memory first"}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 0, "creation_date": 1470203671, "post_id": 38735271, "comment_id": 64846209, "body": "Please do not mix new and free in the same code. malloc&amp;&amp;free || new&amp;&amp;delete"}], "tags": [], "owner": {"reputation": 426, "user_id": 6665437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ed61cadcb2f26bbbe7dfabb6bf37c5?s=128&d=identicon&r=PG&f=1", "display_name": "naffarn", "link": "https://stackoverflow.com/users/6665437/naffarn"}, "is_accepted": false, "score": 0, "last_activity_date": 1470203818, "last_edit_date": 1470203818, "creation_date": 1470202876, "answer_id": 38735271, "question_id": 38735165, "link": "https://stackoverflow.com/questions/38735165/how-do-access-and-assign-value-for-an-int-pointer-datatype-on-struct/38735271#38735271", "title": "How do access and assign value for an int pointer datatype on struct?", "body": "<p>To assign a value to the integer that <code>test.num2</code> points to, you must de-reference the pointer with an asterisk, like so:</p>\n\n<pre><code>test.num2 = new int(20); // Allocates memory and sets the pointer to this memory\n*(test.num2) = 10; // Assign a value of 10 to the int that test.num2 points to\n</code></pre>\n\n<p>To assign an address to the pointer, you must either assign another pointer to it, or assign it's value by referencing an int with an ampersand:</p>\n\n<pre><code>test.num2 = new int(20); // Allocates memory and sets the pointer to this location\nint *ptr = new int(10);\ndelete test.num2; // Free memory that test.num2 pointed to\ntest.num2 = ptr // Makes test.num2 point to the same int as ptr\nint x = 10;\ntest.num2 = &amp;x; // Makes test.num2 point to x\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "is_accepted": false, "score": 1, "last_activity_date": 1470202989, "creation_date": 1470202989, "answer_id": 38735298, "question_id": 38735165, "link": "https://stackoverflow.com/questions/38735165/how-do-access-and-assign-value-for-an-int-pointer-datatype-on-struct/38735298#38735298", "title": "How do access and assign value for an int pointer datatype on struct?", "body": "<p><code>int *num2;</code> is a pointer to some place in the memory that contains an <code>int</code> value. Since you just declare a pointer without any memory allocating, it is simply points to nothing (or random place).</p>\n\n<p>You have to allocate memory then assign a value to this memory:</p>\n\n<pre><code>test.num2 =new int(20);\n</code></pre>\n\n<p>However, do not forget to delete this allocated memory when you finish:</p>\n\n<pre><code>delete test.num2;\n</code></pre>\n\n<p>The real question here, do you really want that pointer here? probably not.</p>\n"}, {"tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": false, "score": 0, "last_activity_date": 1470203504, "creation_date": 1470203504, "answer_id": 38735411, "question_id": 38735165, "link": "https://stackoverflow.com/questions/38735165/how-do-access-and-assign-value-for-an-int-pointer-datatype-on-struct/38735411#38735411", "title": "How do access and assign value for an int pointer datatype on struct?", "body": "<p>You can assign <code>num2</code> in the same way as <code>num1</code>. Of course, since it's not an <code>int</code> but an <code>int*</code>, you can't assign <code>20</code> to it - you can assign the address of some <code>int</code> variable instead:</p>\n\n<pre><code>struct az {\n    int num1;\n    int *num2;\n};\nstruct az test;\ntest.num1 = 20;\n\nint i;\ntest.num2 = &amp;i;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8833, "user_id": 337149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3bbd41f2b74254f902cfe20acef9030b?s=128&d=identicon&r=PG", "display_name": "August Karlstrom", "link": "https://stackoverflow.com/users/337149/august-karlstrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1470207132, "creation_date": 1470207132, "answer_id": 38736390, "question_id": 38735165, "link": "https://stackoverflow.com/questions/38735165/how-do-access-and-assign-value-for-an-int-pointer-datatype-on-struct/38736390#38736390", "title": "How do access and assign value for an int pointer datatype on struct?", "body": "<p>In your example <em>num2</em> is typically used as a pointer to a dynamically allocated array. However, neither <em>num2</em> nor <em>num1</em> is a good name in this case. Let's instead declare our dynamic array type as a record with the fields <em>length</em> and <em>items</em>:</p>\n\n<pre><code>struct Array {\n   int length;\n   int *items;\n};\ntypedef struct Array Array;\n</code></pre>\n\n<p>If we have a variable <em>a</em> of type <em>Array</em>, before we can assign values to its elements we must first allocate memory for the array. In C this is typically done with the function <em>malloc</em>. This function, however, is rather error prone to use so it's a good idea to define a macro function which simplifies memory allocation:</p>\n\n<pre><code>#define NEW_ARRAY(ptr, n) (ptr) = malloc((n) * sizeof (ptr)[0])\n</code></pre>\n\n<p>After having called <em>NEW_ARRAY</em> we can assign values to the array:</p>\n\n<pre><code>int length;\nArray a;\n\nlength = 20;\na.length = length;\nNEW_ARRAY(a.items, length);\na.items[0] = 37;\na.items[1] = 19;\n...\n</code></pre>\n\n<p>When we are done with the array we can release the memory used by the elements:</p>\n\n<pre><code>free(a.items);\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 6612373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f282b76fc076af6b373a459fbc6f993e?s=128&d=identicon&r=PG&f=1", "display_name": "lucas862", "link": "https://stackoverflow.com/users/6612373/lucas862"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1470207132, "creation_date": 1470202446, "last_edit_date": 1470205216, "question_id": 38735165, "link": "https://stackoverflow.com/questions/38735165/how-do-access-and-assign-value-for-an-int-pointer-datatype-on-struct", "title": "How do access and assign value for an int pointer datatype on struct?", "body": "<p>If i want to give a value to int *num2, how would i do this ?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, const char * argv[]) {\n    // insert code here...\n    struct az {\n        int num1;\n        int *num2;\n    };\n    struct az test;\n    test.num1 =20;\n    printf(\"\\n %d\",test.num1);\n    return 0;\n} \n</code></pre>\n"}, {"tags": ["java", "android", "c", "java-native-interface"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1470213193, "post_id": 38735032, "comment_id": 64851348, "body": "Where does <code>planeIndexes</code> come from? Your JNI function receives a <code>jintArray</code>, but that one is called <code>planeLengths</code>."}, {"owner": {"reputation": 233, "user_id": 1135577, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/db6300cd8bd4f7fb66de5df2a918be43?s=128&d=identicon&r=PG", "display_name": "Josh Mackey", "link": "https://stackoverflow.com/users/1135577/josh-mackey"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1470242796, "post_id": 38735032, "comment_id": 64872543, "body": "My bad. I truncated most of the arguments but left the wrong one behind."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1470245429, "post_id": 38735032, "comment_id": 64874112, "body": "I would say you have a memory corruption somewhere else."}, {"owner": {"reputation": 233, "user_id": 1135577, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/db6300cd8bd4f7fb66de5df2a918be43?s=128&d=identicon&r=PG", "display_name": "Josh Mackey", "link": "https://stackoverflow.com/users/1135577/josh-mackey"}, "edited": false, "score": 0, "creation_date": 1470247516, "post_id": 38735032, "comment_id": 64875229, "body": "While it could be possible, after returning from ConvertIntArray, the logic is all done on native C data types which are the same when the above is called in C#."}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "edited": false, "score": 0, "creation_date": 1470276442, "post_id": 38735032, "comment_id": 64887265, "body": "Are you calling ReleaseIntArrayElements somewhere?"}], "answers": [{"tags": [], "owner": {"reputation": 233, "user_id": 1135577, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/db6300cd8bd4f7fb66de5df2a918be43?s=128&d=identicon&r=PG", "display_name": "Josh Mackey", "link": "https://stackoverflow.com/users/1135577/josh-mackey"}, "is_accepted": false, "score": 0, "last_activity_date": 1470334873, "creation_date": 1470334873, "answer_id": 38774711, "question_id": 38735032, "link": "https://stackoverflow.com/questions/38735032/jni-exception-jarray-is-an-invalid-global-reference/38774711#38774711", "title": "JNI Exception: jarray is an invalid global reference", "body": "<p>So, it turns out it was a memory corruption. In the question, I truncated several of the long parameters to make the question shorter. As it turned out, Java was passing in ints instead of longs which being smaller variables, shifted some of the pointers back. So, it basically corrupted the jobjects.</p>\n"}], "owner": {"reputation": 233, "user_id": 1135577, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/db6300cd8bd4f7fb66de5df2a918be43?s=128&d=identicon&r=PG", "display_name": "Josh Mackey", "link": "https://stackoverflow.com/users/1135577/josh-mackey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470334873, "creation_date": 1470201889, "last_edit_date": 1470242765, "question_id": 38735032, "link": "https://stackoverflow.com/questions/38735032/jni-exception-jarray-is-an-invalid-global-reference", "title": "JNI Exception: jarray is an invalid global reference", "body": "<p>Getting the following exception from JNI via CheckJNI.</p>\n\n<pre><code>JNI DETECTED ERROR IN APPLICATION: jarray is an invalid global reference: 0x8f635e1e (0xdead4321)\n</code></pre>\n\n<p>Happens during:</p>\n\n<pre><code>uint32_t* ConvertIntArray(JNIEnv *env, jclass cls, jintArray intArray)\n{\n   return (*env)-&gt;GetIntArrayElements(env, intArray, NULL);\n}\n</code></pre>\n\n<p>which is called from:</p>\n\n<pre><code>uint32_t* indexes = ConvertIntArray(env, cls, planeLengths);\n</code></pre>\n\n<p>which is in:</p>\n\n<pre><code>jlong Java_&lt;censored&gt;(JNIEnv *env, jclass cls, jlong state, jintArray planeLengths)\n</code></pre>\n\n<p>Everything happens within the above function so no global references are made. planeLengths is passed directly into ConvertIntArray which should return the uint32 pointer of it. Google has no results on the JNI error either.</p>\n\n<p>Note: The above lines are after all the C preprocessing is done. There are several macros that substitute in different code which is why the ConvertIntArray function seems pointless.</p>\n\n<p>My colleage and myself are stumped. Any thoughts?</p>\n"}, {"tags": ["c", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1470200453, "post_id": 38734696, "comment_id": 64844981, "body": "<code>int row = argv[3];</code> Left hand side is an <code>int</code>, right hand side is a <code>char *</code>. That are not compatible types - exactly as the warning tells you. You need to convert <code>argv[3]</code> to an int with something like <code>atoi</code> or better still <code>strtol</code>."}, {"owner": {"reputation": 532, "user_id": 4520911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzPkX.png?s=128&g=1", "display_name": "iRove", "link": "https://stackoverflow.com/users/4520911/irove"}, "edited": false, "score": 1, "creation_date": 1470200851, "post_id": 38734696, "comment_id": 64845104, "body": "Maybe this is completely irrelevant, but if <b>everything is in bold</b>, then nothing really stands out.  Formatting is meant to draw attention to a specific part of the post, but if you draw attention everything, you may as well have drawn attention to nothing."}], "answers": [{"tags": [], "owner": {"reputation": 426, "user_id": 6665437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ed61cadcb2f26bbbe7dfabb6bf37c5?s=128&d=identicon&r=PG&f=1", "display_name": "naffarn", "link": "https://stackoverflow.com/users/6665437/naffarn"}, "is_accepted": false, "score": 1, "last_activity_date": 1470202518, "last_edit_date": 1470202518, "creation_date": 1470200989, "answer_id": 38734836, "question_id": 38734696, "link": "https://stackoverflow.com/questions/38734696/creating-a-multi-dimensional-array-at-c/38734836#38734836", "title": "Creating a multi dimensional array at c", "body": "<p>When you write <code>int row = argv[3];</code> you are making an int and initialising it to the value of <code>argv[3]</code>. However, <code>argv</code> is of type <code>char **</code>, which is a pointer to a pointer, or effectively an array of type <code>char *</code>. This is an invalid assignment, you need to make a char buffer to read the arguments in, then use <code>atoi(argv[i])</code> to get the integer value.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1470202427, "last_edit_date": 1470202427, "creation_date": 1470201629, "answer_id": 38734976, "question_id": 38734696, "link": "https://stackoverflow.com/questions/38734696/creating-a-multi-dimensional-array-at-c/38734976#38734976", "title": "Creating a multi dimensional array at c", "body": "<p>Type of <code>argv[3]</code> and <code>argv[4]</code> is <code>char*</code>. Hence, the lines</p>\n\n<pre><code>int row = argv[3];\nint col = argv[4];\n</code></pre>\n\n<p>are wrong. You are trying to initialize two <code>int</code> objects with <code>char*</code>.</p>\n\n<p>If you run the program using:</p>\n\n<pre><code>program 10 20 30 40\n</code></pre>\n\n<p>then,</p>\n\n<p>The value of <code>argv[0]</code> will be <code>\"program\"</code>.<br>\nThe value of <code>argv[1]</code> will be <code>\"10\"</code>.<br>\nThe value of <code>argv[2]</code> will be <code>\"20\"</code>.<br>\nThe value of <code>argv[3]</code> will be <code>\"30\"</code>.<br>\nThe value of <code>argv[4]</code> will be <code>\"40\"</code>.  </p>\n\n<p>Yes, they seem like they are numbers in the command line but they are strings in a C program. You can use <code>atoi</code> to extract the integral numbers from the strings.</p>\n\n<pre><code>int row = atoi(argv[3]);\nint col = atoi(argv[4]);\n</code></pre>\n\n<p>Make sure to use</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n</code></pre>\n\n<p>to get the declaration of the function.</p>\n"}, {"comments": [{"owner": {"reputation": 1994, "user_id": 5624053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nhLzK.jpg?s=128&g=1", "display_name": "Anh Pham", "link": "https://stackoverflow.com/users/5624053/anh-pham"}, "edited": false, "score": 0, "creation_date": 1512316923, "post_id": 47620021, "comment_id": 82198343, "body": "Usually it&#39;s better to explain a solution instead of just posting some rows of anonymous code. You can read <a href=\"https://stackoverflow.com/help/how-to-answer\">How do I write a good answer</a>, and also <a href=\"https://meta.stackexchange.com/questions/114762/explaining-entirely-%E2%80%8C%E2%80%8Bcode-based-answers\">Explaining entirely code-based answers</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 6670554, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eYtziJXO7M4/AAAAAAAAAAI/AAAAAAAAAOA/RyvoKPsCrJg/photo.jpg?sz=128", "display_name": "Arc", "link": "https://stackoverflow.com/users/6670554/arc"}, "is_accepted": false, "score": 0, "last_activity_date": 1512409076, "last_edit_date": 1512409076, "creation_date": 1512315616, "answer_id": 47620021, "question_id": 38734696, "link": "https://stackoverflow.com/questions/38734696/creating-a-multi-dimensional-array-at-c/47620021#47620021", "title": "Creating a multi dimensional array at c", "body": "<p>the initially there was many errors with the code, i belive the following code is what it should have been.. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar **init_board(int row, int col);\n\nint main(int argc, char** argv) {\n\n        int row = atoi(argv[3]);\n        int col = atoi(argv[4]);\n        char** board = init_board(row, col);\n\n        for (int i = 0; i &lt; row; i++) {\n                for (int j = 0; j &lt; col; j++) {\n                        board[i][j] = 'x';\n                        printf(\"%c\", board[i][j]);\n                }\n        }\n\n\n        return 0;\n}\n\nchar **init_board(int row, int col) {\n\n        char** out = malloc(sizeof(char*) * row);\n        for (int i = 0; i &lt; row; i++) \n             out[i] = malloc(sizeof(char) * col);\n\n        return out;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6670554, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eYtziJXO7M4/AAAAAAAAAAI/AAAAAAAAAOA/RyvoKPsCrJg/photo.jpg?sz=128", "display_name": "Arc", "link": "https://stackoverflow.com/users/6670554/arc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1512409076, "creation_date": 1470200198, "question_id": 38734696, "link": "https://stackoverflow.com/questions/38734696/creating-a-multi-dimensional-array-at-c", "title": "Creating a multi dimensional array at c", "body": "<p><strong>Hello, need help creating a multi dimensional array\ni am new at C, any help is appreciated.\nthis is the code</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar init_board(int row, int col);\n\nint main(int argc, char** argv) {\n        int row = argv[3];\n        int col = argv[4];\n        char** board = init_board(row, col);\n\n        for (int i = 0; i &lt; row; i++) {\n                for (int j = 0; j &lt; col; j++) {\n                        printf(\"%d\", board[i][j]);\n                }\n        }\n\n\n        return 0;\n}\n\nchar init_board(int row, int col) {\n\n        int count = 0;\n        int count2 = 0;\n        char** out;\n        while (count &lt; row) {\n                while (count2 &lt; col) {\n                        out[count][count2] = \".\";\n                        count2++;\n                }\n                count++;\n                count2 = 0;\n        }\n        return out;\n}\n</code></pre>\n\n<p><strong>any idea how i can fix this? what i am doing wrong?\nwhen i compile i receive following warnings and when i run it says segmentation fault</strong></p>\n\n<pre><code>s@ss:~/s216/arc/ass1/ass1$ gcc ass1.c -std=c99 -o test\nass1.c: In function \u2018main\u2019:\nass1.c:6:12: warning: initialization makes integer from pointer without a cast [enabled by default]\n  int row = argv[3];\n            ^\nass1.c:7:12: warning: initialization makes integer from pointer without a cast [enabled by default]\n  int col = argv[4];\n            ^\nass1.c:8:17: warning: initialization makes pointer from integer without a cast [enabled by default]\n  char** board = init_board(row, col);\n                 ^\nass1.c: In function \u2018init_board\u2019:\nass1.c:27:23: warning: assignment makes integer from pointer without a cast [enabled by default]\n    out[count][count2] = \".\";\n                       ^\nass1.c:33:2: warning: return makes integer from pointer without a cast [enabled by default]\n  return out;\n  ^\ns@ss:~/s216/arc/ass1/ass1$ ./test x x 5 5\nSegmentation fault\ns@ss:~/s216/arc/ass1/ass1$\n</code></pre>\n"}, {"tags": ["c", "char", "int", "scanf", "atoi"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1470198406, "post_id": 38734387, "comment_id": 64844367, "body": "Why not directly use 2-D array of <code>int</code> and read into that ?"}, {"owner": {"reputation": 11, "user_id": 6153565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KYygn.jpg?s=128&g=1", "display_name": "katDouglas", "link": "https://stackoverflow.com/users/6153565/katdouglas"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1470199811, "post_id": 38734387, "comment_id": 64844747, "body": "@ameyCU so when i read from the file how would i directly change the A through I characters to 1-9??"}, {"owner": {"reputation": 11, "user_id": 6153565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KYygn.jpg?s=128&g=1", "display_name": "katDouglas", "link": "https://stackoverflow.com/users/6153565/katdouglas"}, "reply_to_user": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "edited": false, "score": 0, "creation_date": 1470200252, "post_id": 38734387, "comment_id": 64844912, "body": "@samgak hmm that isnt working for me both methods causes weird symbols in place of the letters"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 1, "creation_date": 1470218309, "post_id": 38734387, "comment_id": 64854775, "body": "C guarantees the characters to be an arithmetic type <b><i>and</i></b> <code>0</code> through <code>9</code> are guaranteed to be sequential, so <code>&#39;0&#39; - &#39;0&#39; == 0</code>, and <code>&#39;9&#39; - &#39;0&#39; == 9</code>, so converting digit characters to ints can be done by subtracting the char &#39;0&#39;, or by using <code>atoi</code>"}], "answers": [{"tags": [], "owner": {"reputation": 426, "user_id": 6665437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ed61cadcb2f26bbbe7dfabb6bf37c5?s=128&d=identicon&r=PG&f=1", "display_name": "naffarn", "link": "https://stackoverflow.com/users/6665437/naffarn"}, "is_accepted": false, "score": -1, "last_activity_date": 1470200330, "creation_date": 1470200330, "answer_id": 38734715, "question_id": 38734387, "link": "https://stackoverflow.com/questions/38734387/how-to-convert-a-2d-char-array-to-a-2d-int-in-c/38734715#38734715", "title": "How to convert a 2D char array to a 2D int in c", "body": "<p>Instead of converting the letter characters to number characters, I'd make a new 2D array of type int:</p>\n\n<pre><code>int matSudokuInt[9][9];\nfor(i=0; i&lt;9; i++)\n{\n    for(j=0; j&lt;9; j++)\n    {\n        fscanf(fpointer, \" %c\", &amp;matsudoku[i][j]);\n        switch (matsudoku[i][j])\n        {\n            case 'A':\n                matSudokuInt[i][j]=1;\n                break;\n            case 'B':\n                matSudokuInt[i][j]=2;\n                break;\n            case 'C':\n                matSudokuInt[i][j]=3;\n                break;\n            case 'D':\n                matSudokuInt[i][j]=4;\n                break;\n            case 'E':\n                matSudokuInt[i][j]=5;\n                break;\n            case 'F':\n                matSudokuInt[i][j]=6;\n                break;\n            case 'G':\n                matSudokuInt[i][j]=7;\n                break;\n            case 'H':\n                matSudokuInt[i][j]=8;\n                break;\n            case 'I':\n                matSudokuInt[i][j]=9;\n                break;\n        }\n        printf(\"%d \", matSudokuInt[i][j]);\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>Then it becomes easy to sum the rows and columns:</p>\n\n<pre><code>int sum = 0;\nint rowSum[9];\nint colSum[9];\n// Let i be the column index and j be the row index\nfor (j = 0; j &lt; 9; j++) {\n    sum = 0;\n    for (i = 0; i &lt; 9; i++) {\n        sum += matSudokuInt[i][j];\n    }\n    rowSum[j] = sum;\n}\n\nfor (i = 0; i &lt; 9; i++) {\n    sum = 0;\n    for (j = 0; j &lt; 9; j++) {\n        sum += matSudokuInt[i][j];\n    }\n    colSum[i] = sum;\n}\n</code></pre>\n\n<p>You can then easily look through the sum arrays and check that all entries are equal.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6153565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KYygn.jpg?s=128&g=1", "display_name": "katDouglas", "link": "https://stackoverflow.com/users/6153565/katdouglas"}, "edited": false, "score": 0, "creation_date": 1470210087, "post_id": 38734851, "comment_id": 64849460, "body": "the line: matsodoku[i][j]=(int)(c-&#39;A&#39;)+1, what is c?"}, {"owner": {"reputation": 11, "user_id": 6153565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KYygn.jpg?s=128&g=1", "display_name": "katDouglas", "link": "https://stackoverflow.com/users/6153565/katdouglas"}, "edited": false, "score": 0, "creation_date": 1470210288, "post_id": 38734851, "comment_id": 64849575, "body": "also would i have to do this with every letter, does the code you have here only convert A&#39;s to one? sorry i am a bit confused"}, {"owner": {"reputation": 337, "user_id": 6636350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tm4aDcd-6Ig/AAAAAAAAAAI/AAAAAAAAATM/HXrZmHRW_V0/photo.jpg?sz=128", "display_name": "Shaun Ramsey", "link": "https://stackoverflow.com/users/6636350/shaun-ramsey"}, "reply_to_user": {"reputation": 11, "user_id": 6153565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KYygn.jpg?s=128&g=1", "display_name": "katDouglas", "link": "https://stackoverflow.com/users/6153565/katdouglas"}, "edited": false, "score": 0, "creation_date": 1470345322, "post_id": 38734851, "comment_id": 64926467, "body": "The code here converts any character in the file into its proper number"}, {"owner": {"reputation": 337, "user_id": 6636350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tm4aDcd-6Ig/AAAAAAAAAAI/AAAAAAAAATM/HXrZmHRW_V0/photo.jpg?sz=128", "display_name": "Shaun Ramsey", "link": "https://stackoverflow.com/users/6636350/shaun-ramsey"}, "reply_to_user": {"reputation": 11, "user_id": 6153565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KYygn.jpg?s=128&g=1", "display_name": "katDouglas", "link": "https://stackoverflow.com/users/6153565/katdouglas"}, "edited": false, "score": 0, "creation_date": 1470345343, "post_id": 38734851, "comment_id": 64926476, "body": "&#39;B&#39; - &#39;A&#39; is 1 for example. So you add another 1 to get 2. So A&#39;s are 1s, B&#39;s are 2s and so on."}], "tags": [], "owner": {"reputation": 337, "user_id": 6636350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tm4aDcd-6Ig/AAAAAAAAAAI/AAAAAAAAATM/HXrZmHRW_V0/photo.jpg?sz=128", "display_name": "Shaun Ramsey", "link": "https://stackoverflow.com/users/6636350/shaun-ramsey"}, "is_accepted": false, "score": 2, "last_activity_date": 1470217853, "last_edit_date": 1470217853, "creation_date": 1470201038, "answer_id": 38734851, "question_id": 38734387, "link": "https://stackoverflow.com/questions/38734387/how-to-convert-a-2d-char-array-to-a-2d-int-in-c/38734851#38734851", "title": "How to convert a 2D char array to a 2D int in c", "body": "<p>I prefer this method without an atoi or a switch/case but instead exploits the nature of the ASCII table very directly. Simply read in a character but then subtract 'A'. So if the character was an 'A', then 'A' - 'A' is 0. But you mean this to be the \"1\" and thus, you add 1 here.</p>\n\n<pre><code>  int main() {\n      int i, j;\n      char nextchar;\n      int **matsudoku = malloc(9*sizeof(int*));\n      for (i=0; i&lt;9; ++i)\n        matsudoku[i]=malloc(9*sizeof(int));\n\n      FILE *fpointer = fopen(\"C:/Users/Owner/Documents/Como Sci in C/sudokuchar.txt\", \"r\");\n\n      if (fpointer == NULL) {\n        printf(\"Cannot open file \\n\");\n        exit(0);\n      }\n\n      for(i=0; i&lt;9; i++){\n        for(j=0; j&lt;9; j++){\n          fscanf(fpointer, \" %c\", &amp;nextchar);\n          matsodoku[i][j] = (int)(nextchar-'A') + 1;\n          printf(\"%d\",matsudoku[i][j]);\n      }\n\n    }\n    fclose(fpointer);\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1470201650, "creation_date": 1470201650, "answer_id": 38734979, "question_id": 38734387, "link": "https://stackoverflow.com/questions/38734387/how-to-convert-a-2d-char-array-to-a-2d-int-in-c/38734979#38734979", "title": "How to convert a 2D char array to a 2D int in c", "body": "<p>There is really no reason to use a <em>pointer-to-pointer-to-char</em> to begin with when you can read the values directly into a 2D array of <code>int</code>. While there are many ways to approach this, sticking with your approach, you could simply do the following... read/validate each character from your file into a <code>tmp</code> value and then assign to <code>matsudoku[i][j] = tmp - '0';</code> which will perform the character conversion in one step.</p>\n\n<p>Putting it together, you could do something similar to the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define SDKSZ 9\n\nint main (void)\n{\n    int i, j;\n    int matsudoku[SDKSZ][SDKSZ] = {{0}};\n\n    FILE *fpointer =\n        fopen (\"C:/Users/Owner/Documents/Como Sci in C/sudokuchar.txt\", \"r\");\n\n    if (fpointer == NULL) {\n        printf (\"Cannot open file \\n\");\n        exit (0);\n    }\n\n    for (i = 0; i &lt; SDKSZ; i++)\n        for (j = 0; j &lt; SDKSZ; j++) {\n            int tmp;\n            if (fscanf(fpointer, \" %d\", &amp;tmp) != 1) {   /* read/validate tmp */\n                fprintf (stderr, \"error: on read matsudoku[%d][%d]\\n\", i, j);\n                exit (1);\n            }\n            matsudoku[i][j] = tmp - '0';  /* convert from ASCII to numeric */\n        }\n    fclose (fpointer);\n\n    for (i = 0; i &lt; SDKSZ; i++) {\n        for (j = 0; j &lt; SDKSZ; j++)\n            printf (\" %3d\", matsudoku[i][j]);\n        putchar ('\\n');\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Let me know if you have any questions or problems (I didn't have data to test).</p>\n"}], "owner": {"reputation": 11, "user_id": 6153565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KYygn.jpg?s=128&g=1", "display_name": "katDouglas", "link": "https://stackoverflow.com/users/6153565/katdouglas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 827, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1470217853, "creation_date": 1470198259, "last_edit_date": 1470199418, "question_id": 38734387, "link": "https://stackoverflow.com/questions/38734387/how-to-convert-a-2d-char-array-to-a-2d-int-in-c", "title": "How to convert a 2D char array to a 2D int in c", "body": "<p>I am writing a program that takes in a sudoku board that uses A-I instead of 1-9 and checks if the board is valid. \nI read the sudoku board from a file and i used the switch to change all values to numbers.</p>\n\n<p>My plan was to use <code>atoi</code> or <code>sscanf</code> to convert the 2D char array to a 2D int array so that i can add all the rows and columns to check if it is a valid board. However when using these functions i get the warnings:</p>\n\n<blockquote>\n  <p>expected type const char but argument is of type char or passing argumet one of sscanf makes pointer from integer without cast.</p>\n</blockquote>\n\n<p>I'm still quite confused on pointers so idk what this really means. is it even possible to change my 2d char array to a 2d int array, if so any suggestions? if there is a better way to check if the board is valid suggestions would be greatly appreciated as well. Thanks </p>\n\n<pre><code>int main() {\n  int i, j;\n  char **matsudoku = malloc(9*sizeof(char*));\n  for (i=0; i&lt;9; ++i)\n    matsudoku[i]=malloc(9*sizeof(char));\n\n  FILE *fpointer = fopen(\"C:/Users/Owner/Documents/Como Sci in C/sudokuchar.txt\", \"r\");\n\n  if (fpointer == NULL) {\n    printf(\"Cannot open file \\n\");\n    exit(0);\n  }\n\n  for(i=0; i&lt;9; i++){\n    for(j=0; j&lt;9; j++){\n       fscanf(fpointer, \" %c\", &amp;matsudoku[i][j]);\n       switch (matsudoku[i][j]){\n           case 'A':\n              matsudoku[i][j]='1';\n              break;\n           case 'B':\n              matsudoku[i][j]='2';\n              break;\n           case 'C':\n              matsudoku[i][j]='3';\n              break;\n           case 'D':\n              matsudoku[i][j]='4';\n              break;\n           case 'E':\n              matsudoku[i][j]='5';\n              break;\n           case 'F':\n              matsudoku[i][j]='6';\n              break;\n           case 'G':\n              matsudoku[i][j]='7';\n              break;\n           case 'H':\n              matsudoku[i][j]='8';\n              break;\n           case 'I':\n              matsudoku[i][j]='9';\n              break;\n         }\n        printf(\"%c\",matsudoku[i][j]);\n    }\n\n}\n//atoi(matsudoku);\nint k;\n//or sscanf(matsudoku,\"%d\",%k);\nfclose(fpointer);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 775, "user_id": 4693217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EfaH-6i_MqA/AAAAAAAAAAI/AAAAAAAAAS8/kUKzusCXPlA/photo.jpg?sz=128", "display_name": "Asif Rahaman", "link": "https://stackoverflow.com/users/4693217/asif-rahaman"}, "edited": false, "score": 1, "creation_date": 1470198622, "post_id": 38734375, "comment_id": 64844428, "body": "your variable declaration line is incomplete here...what did you write after TotalWrong??"}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 6670484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e902e19b751474713da98faf455f0c21?s=128&d=identicon&r=PG&f=1", "display_name": "user6670484", "link": "https://stackoverflow.com/users/6670484/user6670484"}, "is_accepted": false, "score": 1, "last_activity_date": 1470198809, "creation_date": 1470198809, "answer_id": 38734479, "question_id": 38734375, "link": "https://stackoverflow.com/questions/38734375/newbie-to-c-programing-math-quiz-grade-printout/38734479#38734479", "title": "Newbie to C programing: Math Quiz grade printout", "body": "<p>I looked at the problem again and found the solution I should of done this for \"number of wrongs/Total\"</p>\n\n<pre><code>TotalCorrect = AddCorrect + SubCorrect;\n  printf(\"\\n\");\n  printf(\"Grade: %d/%d\\n\",TotalCorrect,NumberOfTimes);\n  printf(\"\\n\");\n  return 0;\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6670484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e902e19b751474713da98faf455f0c21?s=128&d=identicon&r=PG&f=1", "display_name": "user6670484", "link": "https://stackoverflow.com/users/6670484/user6670484"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1567430977, "creation_date": 1470198224, "last_edit_date": 1567430977, "question_id": 38734375, "link": "https://stackoverflow.com/questions/38734375/newbie-to-c-programing-math-quiz-grade-printout", "title": "Newbie to C programing: Math Quiz grade printout", "body": "<p>Math quiz asks how many problems you want to solve and displays random numbers of addition and subtraction then grades your response to the problems. The thing im having trouble in is printing it out right. I need to display how many I got right and how many I tried all together. example 4 out of 5 correct (<strong>Grade: 2/5 correct)</strong> but im reviving this for example \"<strong>Grade: 2/-1832609951</strong>\"   Can anyone help thank you!     </p>\n\n<h1>include </h1>\n\n<pre><code>    int main()\n    {\n     int NumberOfTimes,AddAns,SubAns,AddCorrect=0,SubCorrect=0,CorrectAnsAdd,CorrectAnsSub,TotalCorrect,TotalWrong,Add$\n     int i,a,b,c,d,e,f,g;\n\n     printf(\"\\n\");\n     printf(\"-------------------MATH QUIZ------------------------\\n\");\n     printf(\"Enter the number of Math problems you want to solve:\");\n     scanf(\"%d\", &amp;NumberOfTimes);\n     printf(\"\\n\");\n     srand(time(NULL));\n     for (i=0;i&lt;NumberOfTimes;++i)\n     {\n\n      b = rand() %3 + 1;\n      c = rand() %3 + 1;\n\n      a = rand() %2 + 1;\n\n\n      if (a == 1)\n        {\n        printf(\"%d + %d = \", b,c);\n        scanf(\"%d\", &amp;AddAns);\n        d = b + c;\n        if (AddAns == d)\n           {\n            printf(\"  +Correct\\n\");\n            AddCorrect = AddCorrect + 1;\n           }\n        else\n           {\n            printf(\"  +Wrong, it was %d\\n\", d);\n            AddIncorrect = AddIncorrect + 1;\n           }\n        }\n      if (a == 2)\n       {\n        printf(\"%d - %d = \", b,c);\n        scanf(\"%d\", &amp;SubAns);\n        g = b - c;\n        if (SubAns == g)\n           {\n            printf(\"  +Correct\\n\");\n            SubCorrect = SubCorrect + 1;\n           }\n        else\n           {\n            printf(\"  +Wrong, it was %d\\n\", g);\n            SubIncorrect = SubIncorrect + 1;\n           }\n\n       }\n\n      }\n      TotalCorrect = AddCorrect + SubCorrect;\n      TotalWrong =  AddIncorrect + SubIncorrect;\n      printf(\"\\n\");\n      printf(\"Grade: %d/%d\\n\",TotalCorrect,TotalWrong);\n      printf(\"\\n\");\n      return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 3, "creation_date": 1470196219, "post_id": 38734050, "comment_id": 64843737, "body": "A decent compiler would give you the same object code for this. Good to the check the assembly code generated in this case"}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1470196289, "post_id": 38734050, "comment_id": 64843750, "body": "Please Read: <a href=\"http://stackoverflow.com/questions/38532160/does-short-circuiting-make-execution-of-the-program-faster-and-is-analysing-whi\" title=\"does short circuiting make execution of the program faster and is analysing whi\">stackoverflow.com/questions/38532160/&hellip;</a>"}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1470196319, "post_id": 38734050, "comment_id": 64843763, "body": "about readability, I would say the 1st version is clearer"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1470196348, "post_id": 38734050, "comment_id": 64843775, "body": "You can guess at it, but you can&#39;t be <i>sure</i> unless you try it both ways and check the performance of your program."}, {"owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "reply_to_user": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1470196425, "post_id": 38734050, "comment_id": 64843804, "body": "@sjsam, is that what g++&#39;s <code>-fif-conversion</code> do? The document is not clear about it."}, {"owner": {"reputation": 1162, "user_id": 816338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0a211a0e00afe2339f6e0031ef0a4d5?s=128&d=identicon&r=PG", "display_name": "Arunas", "link": "https://stackoverflow.com/users/816338/arunas"}, "edited": false, "score": 0, "creation_date": 1470196805, "post_id": 38734050, "comment_id": 64843906, "body": "It may depend on the statistical distribution of A and B.  If both are more likely to be true, then you get 2 evaluations and one branch.  If both are likely to be false, then....you might consider re-ordering your expressions.  Though the compiler will decide, but the processor&#39;s branch prediction may be able to figure things out and preload instructions on the most likely code path and eliminate any advantages the that compiler might provide.  Code for clarity and intent before you optimize"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1470199587, "post_id": 38734050, "comment_id": 64844673, "body": "@YiFei For the very basic applications of both the styles <a href=\"http://pastebin.com/raw/QUyimUtE\" rel=\"nofollow noreferrer\">&#91; code1 &#93;</a> &amp; <a href=\"http://pastebin.com/raw/MJMqY4x2\" rel=\"nofollow noreferrer\">&#91; code 2&#93;</a>  when compiled with <code>g++ -O2 -S -masm=intel -fif-conversion</code> gave me the same <a href=\"http://pastebin.com/VHcUmjF9\" rel=\"nofollow noreferrer\">&#91; assembly &#93;</a>except for the change in filename"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 1, "creation_date": 1470199796, "post_id": 38734050, "comment_id": 64844741, "body": "@YiFei : And the g++ manpage is pretty clear about <code>-fif-conversion</code>  which says  <code>-fif-conversion            Attempt to transform conditional jumps into branch-less            equivalents.  This includes use of conditional moves, min, max, set            flags and abs instructions, and some tricks DOABLE by standard            arithmetics.</code> Also the <code>doable</code> may be a hint that this may not work for complex cases."}], "answers": [{"comments": [{"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1470196531, "post_id": 38734114, "comment_id": 64843838, "body": "Question is Similar: : <a href=\"http://stackoverflow.com/questions/38532160/does-short-circuiting-make-execution-of-the-program-faster-and-is-analysing-whi\" title=\"does short circuiting make execution of the program faster and is analysing whi\">stackoverflow.com/questions/38532160/&hellip;</a>"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1470196633, "post_id": 38734114, "comment_id": 64843869, "body": "Yes, that is similar to OP&#39;s performance question, but not his readability question. But bear in mind that my answer only addresses his unasked question: &quot;are they semantically equivalent?&quot;"}, {"owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1470196713, "post_id": 38734114, "comment_id": 64843880, "body": "Why wouldn&#39;t the compiler generate some code that use the previously evaluated value?"}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1470196788, "post_id": 38734114, "comment_id": 64843900, "body": "@Rob\u1d69, yes I agree with your answer!"}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1470196814, "post_id": 38734114, "comment_id": 64843907, "body": "Wouldn&#39;t B evaluated twice?"}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "reply_to_user": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1470196816, "post_id": 38734114, "comment_id": 64843908, "body": "@YiFei, to some extent some of these condition statements can be solved by branch prediction. To boost performance."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 1, "creation_date": 1470196823, "post_id": 38734114, "comment_id": 64843910, "body": "@YiFei - Because the language doesn&#39;t allow it. Suppose your <code>A</code>, for example, is a function call. The compiler must invoke the function each time it is listed, potentially with side effects. OTOH, if <code>A</code> has no visible side effects, then the compiler can optimize both cases to the same code."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 1, "creation_date": 1470196903, "post_id": 38734114, "comment_id": 64843927, "body": "@noob - No, <code>B</code> is evaluated only once. It might be evaluated in the <code>A == true</code> branch, or it might be evaluated in the <code>A == false</code> branch, but either way exactly once."}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "reply_to_user": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 1, "creation_date": 1470196904, "post_id": 38734114, "comment_id": 64843928, "body": "@noob, how can B be evaluated twice? It only enters the first statement if A is true,"}, {"owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1470196917, "post_id": 38734114, "comment_id": 64843930, "body": "Aha, then doesn&#39;t the second approach potentially more optimiz-able?"}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "reply_to_user": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1470196962, "post_id": 38734114, "comment_id": 64843939, "body": "@YiFei, No it is not, it is only optimizable if you guessed correctly that the first statement has a higher chance of failing since it is an &amp;&amp;, and in this case it would completely skip the inside of the if statement, if you guessed correctly."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 5, "last_activity_date": 1470196688, "last_edit_date": 1470196688, "creation_date": 1470196420, "answer_id": 38734114, "question_id": 38734050, "link": "https://stackoverflow.com/questions/38734050/arrangement-of-2-by-2-condition-in-if-statement-in-c-family-language/38734114#38734114", "title": "Arrangement of 2 by 2 condition in if statement in C-family language", "body": "<p>The two cases are not the same. In the second case, <code>A</code> and <code>B</code> will each be evaluated exactly once. In the first case, <code>A</code> and <code>B</code> will evaluated a number of times, depending upon their value.</p>\n\n<p>While this almost certainly won't affect the optimization of the typical case, it will matter if <code>A</code> or <code>B</code> have side effects. </p>\n"}, {"comments": [{"owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 1, "creation_date": 1470196784, "post_id": 38734125, "comment_id": 64843899, "body": "Just a thought: use bit shift instead of multiplying seems better :)"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1470196910, "post_id": 38734125, "comment_id": 64843929, "body": "@YiFei: Bit shift is not better in this context."}, {"owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1470196986, "post_id": 38734125, "comment_id": 64843950, "body": "Then yes because of the plus sign."}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1470197035, "post_id": 38734125, "comment_id": 64843962, "body": "<code>switch(bool(A)*2 + bool(B)) {</code> makes the assumption unnecessary. Or, to us an idiom that predates the <code>bool</code> type: <code>switch ( (!!A)*2 + (!!B) ) {</code>."}, {"owner": {"reputation": 2186, "user_id": 6572285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AyRzi.jpg?s=128&g=1", "display_name": "mash", "link": "https://stackoverflow.com/users/6572285/mash"}, "reply_to_user": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1470197522, "post_id": 38734125, "comment_id": 64844085, "body": "@YiFei I totally agree! <code>(A &lt;&lt; 1) | B</code> looks so much more beautify!"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1470200207, "post_id": 38734125, "comment_id": 64844890, "body": "@Rob\u1d69: The point was not to dive into the domain of compiler optimizations too deeply. If the compiler wanted to go in that direction it would implement the normalization as <code>!A*2 + !B</code> (there&#39;s no real need for double negation), but for a human this just makes things progressively more and more difficult to read. I didn&#39;t want to go too far in that direction, since it wasn&#39;t the main point of my answer."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1470227759, "post_id": 38734125, "comment_id": 64861345, "body": "Actually, it&#39;s better to leave this transform to the compiler. The reason is hidden in the <code>...</code>. Those cases might be folded, but the folding might only be possible if the compiler used e.g. <code>switch (A*3+B) { case 4: ...</code>"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 2, "last_activity_date": 1470196451, "creation_date": 1470196451, "answer_id": 38734125, "question_id": 38734050, "link": "https://stackoverflow.com/questions/38734050/arrangement-of-2-by-2-condition-in-if-statement-in-c-family-language/38734125#38734125", "title": "Arrangement of 2 by 2 condition in if statement in C-family language", "body": "<p>There's no way to predict which code generation strategy the compiler will choose in cases like that (and it can actually depend on surrounding context). This makes your question unanswerable in general case. One should normally expect the compiler to be smart enough to recognize the equivalence of both of your constructs (assuming they are indeed equivalent) and choose the most optimal one automatically. </p>\n\n<p>The most optimal code generation strategy might be something else altogether, e.g.</p>\n\n<pre><code>// Assuming A and B are either 0 or 1 \nswitch ((A * 2) + B) {\n  case 0: ...; break;\n  case 1: ...; break;\n  case 2: ...; break;\n  case 3: ...; break;\n}\n</code></pre>\n\n<p>Just choose whatever makes your code more readable.</p>\n"}, {"tags": [], "owner": {"reputation": 728, "user_id": 5922180, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c63faa62b64336441393d7c11e1ec79a?s=128&d=identicon&r=PG&f=1", "display_name": "DrPrItay", "link": "https://stackoverflow.com/users/5922180/drpritay"}, "is_accepted": false, "score": 0, "last_activity_date": 1470199992, "last_edit_date": 1470199992, "creation_date": 1470197144, "answer_id": 38734214, "question_id": 38734050, "link": "https://stackoverflow.com/questions/38734050/arrangement-of-2-by-2-condition-in-if-statement-in-c-family-language/38734214#38734214", "title": "Arrangement of 2 by 2 condition in if statement in C-family language", "body": "<p>It's a hard question; honestly, I think everyone looks at this a little bit differently.  As people have mentioned here it does not matter as a compiler should generate the same output for both <strong>(should! not necessarily will \u2014 it honestly depends on the code)</strong>.</p>\n\n<p>Yet, for example, let's look at this code:</p>\n\n<pre><code>int  Nested(int a)\n{       \n    if(a &gt; 0)\n    {\n        if( a &gt; 1)\n        {\n            if( a % 2 == 0)\n            {\n                if( a % 10 == 4)\n                {\n                    printf(\"a is valid\");\n                    return 1;\n                }\n                else\n                {               \n                    printf(\"a's last digit inst 4\");\n                }\n            }\n            else\n            {\n                printf(\" a is not odd\");\n            }    \n        }\n        else\n        {\n            printf(\" a is not bigger than 1\");\n        }\n    }\n    else\n    {\n        printf(\" a is not bigger than 0\");\n    }\n\n    return 0;\n\n}\n\nint NotNested(int a)\n{\n    if(a &lt;= 0)\n    {\n        printf(\" a is not bigger than 0\");\n        return 0;\n    }\n\n    if(a &lt;= 1)\n    {\n        printf(\" a is not bigger than 1\");\n        return 0;\n    }\n\n    if(a % 2 != 0)\n    {\n        printf(\" a is not odd\");\n        return 0;\n    }\n\n    if( a % 10 != 4)\n    {\n        printf(\"a's last digit inst 4\");\n        return 0;\n    }\n\n    printf(\"a is valid\");\n\n    return 1;\n\n}\n</code></pre>\n\n<p>I personally think that <code>NotNested</code> in my example is much more readable,\nyet it's my personal opinion and both of these functions should do the same.</p>\n\n<p><strong>So yeah, in terms, of readability try to avoid nesting.</strong></p>\n"}], "owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "accepted_answer_id": 38734114, "answer_count": 3, "score": 4, "last_activity_date": 1470199992, "creation_date": 1470196106, "last_edit_date": 1470197689, "question_id": 38734050, "link": "https://stackoverflow.com/questions/38734050/arrangement-of-2-by-2-condition-in-if-statement-in-c-family-language", "title": "Arrangement of 2 by 2 condition in if statement in C-family language", "body": "<p>When programming, I'm usually dealing with two sets of conditions combined together, like:</p>\n\n<pre><code>if (A &amp;&amp; B){...}\nelse if (!A &amp;&amp; B){...}\nelse if (A &amp;&amp; !B){...}\nelse if (!A &amp;&amp; !B){...}\n</code></pre>\n\n<p>It can also be resolved using nested if statements.</p>\n\n<pre><code>if (A){\n    if (B) {...}\n    else {...}\n}\nelse {\n    if (B) {...}\n    else {...}\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> Some new thoughts, what about I firstly evaluate both A and B and store as temporary variable (then do as the first approach) in case that the evaluation of A and B both have no side-effect?</p>\n\n<hr>\n\n<p>So my question is there any performance difference between them and what about their readability?</p>\n\n<p><em>I code in C++, if matters.</em></p>\n"}, {"tags": ["java", "c++", "c", "java-native-interface"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1470197359, "post_id": 38733528, "comment_id": 64844035, "body": "This doesn&#39;t make much sense, but what sense it does make leads me to think that what is presented is an XY problem.  What are you trying to accomplish by this?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470198787, "post_id": 38733528, "comment_id": 64844468, "body": "That&#39;s correct. <code>(cls*) p = (cls *) addr;</code> is not a thing you can do in C++, unless <code>cls</code> is a type. And you can&#39;t do it for many types all at once unless <code>cls</code> is a template parameter."}, {"owner": {"reputation": 1501, "user_id": 407405, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c259563c8dd76339127debb4cc9da71b?s=128&d=identicon&r=PG", "display_name": "Praveen", "link": "https://stackoverflow.com/users/407405/praveen"}, "edited": false, "score": 0, "creation_date": 1470199700, "post_id": 38733528, "comment_id": 64844705, "body": "umm...so i need to call <code>getName</code> on <code>cls</code> and do if-else and then cast <code>addr</code> accordingly?"}, {"owner": {"reputation": 1501, "user_id": 407405, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c259563c8dd76339127debb4cc9da71b?s=128&d=identicon&r=PG", "display_name": "Praveen", "link": "https://stackoverflow.com/users/407405/praveen"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1470199836, "post_id": 38733528, "comment_id": 64844759, "body": "@JohnBollinger i simply want to be able to read data starting from that address. But in order to read, i need to know what type of data is stored. Then use the type to create the corresponding pointer to read. Does it make sense now?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1470200407, "post_id": 38733528, "comment_id": 64844964, "body": "I doubt that, @Praveen.  Reading the data serves no purpose by itself.  If your function truly did nothing else, then a good compiler would probably optimize out the whole function body.  In that case you might as well solve your problem by leaving the function body empty in the first place."}, {"owner": {"reputation": 1501, "user_id": 407405, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c259563c8dd76339127debb4cc9da71b?s=128&d=identicon&r=PG", "display_name": "Praveen", "link": "https://stackoverflow.com/users/407405/praveen"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1470200639, "post_id": 38733528, "comment_id": 64845031, "body": "@JohnBollinger I am new to JNI. I am doing this as a learning exercise. I am thinking of writing a sorting method on this array starting at that address. make sense now?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1470200647, "post_id": 38733528, "comment_id": 64845033, "body": "On the other hand, if your function does something with the data after reading it, then that depends on the data type, so the compiler needs to be able to determine that statically.  In that case, you might save yourself some trouble by doing what Java itself does: write a separate method for each primitive type you want to handle, and one more to handle all reference types if necesary."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1470201023, "post_id": 38733528, "comment_id": 64845164, "body": "As you are a new JNI programmer, I urge you to start with a simpler exercise.  Instead of trying to handle primitives generically -- which even Java itself does not do -- start with native methods that are built for specific types."}, {"owner": {"reputation": 1501, "user_id": 407405, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c259563c8dd76339127debb4cc9da71b?s=128&d=identicon&r=PG", "display_name": "Praveen", "link": "https://stackoverflow.com/users/407405/praveen"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1470201072, "post_id": 38733528, "comment_id": 64845175, "body": "@JohnBollinger will do. Thank you"}], "owner": {"reputation": 1501, "user_id": 407405, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c259563c8dd76339127debb4cc9da71b?s=128&d=identicon&r=PG", "display_name": "Praveen", "link": "https://stackoverflow.com/users/407405/praveen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1470199237, "creation_date": 1470192234, "last_edit_date": 1470199237, "question_id": 38733528, "link": "https://stackoverflow.com/questions/38733528/how-to-create-a-pointer-given-address-and-class-in-jni", "title": "How to create a pointer given address and class in JNI", "body": "<p>If I call a native method with the memory address and the type of data stored at that address, how can i create a pointer to that address in JNI?</p>\n\n<p>In Java:</p>\n\n<pre><code>pointers(long.class, 810234092817);\n</code></pre>\n\n<p>In JNI:</p>\n\n<pre><code>JNIEXPORT jlong JNICALL Java_JNIFoo_pointers\n    (JNIEnv *env, jobject obj, jclass cls, jlong addr) {\n\n   // if cls is long, then i want to dynamically create the following \n   // b/c i know the data at *addr* is of type *cls*.\n   // This works. \n   jlong* p = (jlong *) addr;\n\n   // jclass has the class type and addr has the actual address. But I can't do this\n   (cls*) p = (cls *) addr;\n}\n</code></pre>\n\n<p>How can i create a pointer to <code>jlong</code> address of type <code>jclass</code>?</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 3, "creation_date": 1470192374, "post_id": 38733515, "comment_id": 64842901, "body": "<i>I would appreciate some explanation what am i doing wrong here.</i> - why do you think you&#39;re doing something wrong? Are you being presented with errors/segfault/unexpected output?"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 2, "creation_date": 1470192538, "post_id": 38733515, "comment_id": 64842944, "body": "Ok, so you changed the heading re doubly linked list. So now I go back to my original &quot;off topic&quot; comment: What is the point of the <code>back</code> member in <code>list_struct</code> if you only have a singly linked list."}, {"owner": {"reputation": 2186, "user_id": 6572285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AyRzi.jpg?s=128&g=1", "display_name": "mash", "link": "https://stackoverflow.com/users/6572285/mash"}, "edited": false, "score": 1, "creation_date": 1470193028, "post_id": 38733515, "comment_id": 64843062, "body": "You also seem to do something wrong when you construct the singly linked list. So please add that part of your source code."}, {"owner": {"reputation": 1, "user_id": 6623162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7688d2f5ae8fff9c592384b12e3414b?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/6623162/patrick"}, "edited": false, "score": 0, "creation_date": 1470193382, "post_id": 38733515, "comment_id": 64843152, "body": "the struct is given by a professor  that we aren&#39;t allowed to touch... Project consists 16 function where 11 we have to implement ourselves. He provides names of the function and parameters and the rest we have to do ourselves"}], "answers": [{"comments": [{"owner": {"reputation": 2186, "user_id": 6572285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AyRzi.jpg?s=128&g=1", "display_name": "mash", "link": "https://stackoverflow.com/users/6572285/mash"}, "edited": false, "score": 2, "creation_date": 1470193744, "post_id": 38733702, "comment_id": 64843227, "body": "What makes you think that that would be a double free?"}, {"owner": {"reputation": 2186, "user_id": 6572285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AyRzi.jpg?s=128&g=1", "display_name": "mash", "link": "https://stackoverflow.com/users/6572285/mash"}, "edited": false, "score": 0, "creation_date": 1470194653, "post_id": 38733702, "comment_id": 64843421, "body": "pop removes and returns. I think the OP got that part clear even though he fails to implement anything useable you can see the return type is <code>ElemType</code> which seems to be a typedef to int."}], "tags": [], "owner": {"reputation": 260, "user_id": 6670228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ccaf4dccbb735ddb7d7351e8b3aced7?s=128&d=identicon&r=PG&f=1", "display_name": "technokrat", "link": "https://stackoverflow.com/users/6670228/technokrat"}, "is_accepted": false, "score": -1, "last_activity_date": 1470194098, "last_edit_date": 1470194098, "creation_date": 1470193488, "answer_id": 38733702, "question_id": 38733515, "link": "https://stackoverflow.com/questions/38733515/c-programing-how-to-pop-last-element-on-linked-list/38733702#38733702", "title": "C programing: How to pop last element on linked list?", "body": "<p>I think the error you're getting happens when you try to access something that's already been deallocated. You're doing that here:</p>\n\n<pre><code>if( p-&gt;next == NULL) free(p);\n\ntrail = trail-&gt;next;\np=p-&gt;next;\n</code></pre>\n\n<p>Since the list structure contains a back pointer, I'd recommend using that to help you. Maybe let <code>p</code> move through the list until <code>p-&gt;next</code> points to the same thing as the list's back pointer, then make <code>p-&gt;next</code> null.</p>\n\n<p>Also, should the function POP or REMOVE from the list? Your question says removing but the function is named lst_pop_back. If you're poping, you'll need to return the last value too.</p>\n"}, {"tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": false, "score": 0, "last_activity_date": 1470197419, "creation_date": 1470197419, "answer_id": 38734259, "question_id": 38733515, "link": "https://stackoverflow.com/questions/38733515/c-programing-how-to-pop-last-element-on-linked-list/38734259#38734259", "title": "C programing: How to pop last element on linked list?", "body": "<p>The XCode error <code>EXC_BAD_ACCESS(code=1, address=0x8)</code> means that somebody tries to access unaccessable memory. XCode's boundary checks are said to be good, so let's trust them. It is a bit sad that the OP doesn't tell us the exact line-number but one can guess. I would concur with Katerina B. here and assume the same lines as the culprit.</p>\n\n<p>In detail:</p>\n\n<pre><code>ElemType lst_pop_back(LIST * l)\n{\n  // p and trail point to the first node\n  NODE *p = l-&gt;front;\n  NODE *trail = l-&gt;front;\n\n  if (p == NULL)\n    return 0;\n\n  if (lst_len(l) == 1) {\n    free(p);\n    l-&gt;front = NULL;\n    l-&gt;back = NULL;\n  } else {\n    p = p-&gt;next;\n    // Now: trail-&gt;next points to the old p\n    // and p to p-&gt;next, that is: trail points\n    // to the node before p\n\n    // while trail is not the last node\n    while (p != NULL) {\n      // if p is the last node\n      if (p-&gt;next == NULL){\n        // release memory of p, p points to nowhere from now on\n        free(p);\n      }\n      // Following comments assume that p got free()'d at this point\n\n      // because trail points to the node before p\n      // trail-&gt;next points to the node p pointed to\n      // before but p got just free()'d\n      trail = trail-&gt;next;\n      // p got free()'d so p-&gt;next is not defined\n      p = p-&gt;next;\n    }\n    // assuming p got free()'d than trail-&gt;next is one step\n    // further into unknown, pardon, undefined territory\n    trail = trail-&gt;next;\n    trail-&gt;next = NULL;\n\n  }\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6623162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7688d2f5ae8fff9c592384b12e3414b?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/6623162/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 672, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1470209358, "creation_date": 1470192146, "last_edit_date": 1470192606, "question_id": 38733515, "link": "https://stackoverflow.com/questions/38733515/c-programing-how-to-pop-last-element-on-linked-list", "title": "C programing: How to pop last element on linked list?", "body": "<p>I am beginner programer and one week ago i was introduced to linked list however I'm still struggling to wrap my head around this. </p>\n\n<p>Currently trying to write a function that will help me remove last element from the linked list. I would appreciate some explanation what am i doing wrong here. Thank You for any suggestions.</p>\n\n<p>I'm not allowed to touch or modify current structs</p>\n\n<p>Here is my structs:</p>\n\n<pre><code>typedef struct node {\n    ElemType val;\n    struct node *next;\n} NODE;\n\nstruct list_struct {\n    NODE *front;\n    NODE *back;\n};\n</code></pre>\n\n<p>And heres my current code:</p>\n\n<p>if list is empty, we do nothing and return arbitrary value\notherwise, the last element in the list is removed and its\nvalue is returned.</p>\n\n<pre><code>ElemType lst_pop_back(LIST *l) {\n\n\n    NODE * p = l-&gt;front;\n    NODE * trail = l-&gt;front;\n\n\n    if( p == NULL) return 0;\n\n    if( lst_len(l) == 1){\n        free(p);\n        l-&gt;front = NULL;\n        l-&gt;back = NULL;\n    }\n    else{\n        p=p-&gt;next;\n\n        while( p != NULL){\n\n            if( p-&gt;next == NULL) free(p);\n\n            trail = trail-&gt;next;\n            p=p-&gt;next;\n        }\n        trail= trail-&gt;next;\n        trail-&gt;next= NULL;\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I'm using Xcode on MAC and the error that i get is: Thread 1: EXC_ACCESS(code=1, address=0x8)</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 2186, "user_id": 6572285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AyRzi.jpg?s=128&g=1", "display_name": "mash", "link": "https://stackoverflow.com/users/6572285/mash"}, "is_accepted": true, "score": 9, "last_activity_date": 1470191548, "creation_date": 1470191548, "answer_id": 38733434, "question_id": 38733419, "link": "https://stackoverflow.com/questions/38733419/why-can-a-urlhttp-without-commenting-can-compile-without-error/38733434#38733434", "title": "Why can a url(http://) without commenting can compile without error?", "body": "<p>Because it'll be treated as a label followed by a comment.</p>\n\n<p>So you could later:</p>\n\n<pre><code>goto http;\n</code></pre>\n\n<p>If you turn on warnings: <code>-Wall</code> it'll warn you gracefully:</p>\n\n<pre><code> In function \u2018main\u2019:\n:2:5: warning: label \u2018http\u2019 defined but not used [-Wunused-label]\n     http://localhost\n</code></pre>\n"}], "owner": {"reputation": 586, "user_id": 5263291, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f526c897d0c750c236ec321ce452be1c?s=128&d=identicon&r=PG&f=1", "display_name": "Gstestso", "link": "https://stackoverflow.com/users/5263291/gstestso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1470192315, "accepted_answer_id": 38733434, "answer_count": 1, "score": -2, "last_activity_date": 1470191585, "creation_date": 1470191435, "last_edit_date": 1470191585, "question_id": 38733419, "link": "https://stackoverflow.com/questions/38733419/why-can-a-urlhttp-without-commenting-can-compile-without-error", "closed_reason": "Duplicate", "title": "Why can a url(http://) without commenting can compile without error?", "body": "<p>I found I added some URL in source code but forgot to comment it, but still can compile, and I test it individually:</p>\n\n<pre><code>int main(){\n    http://localhost\n    return 0;\n}\n\ngcc hello.c -o hello.exe\n</code></pre>\n\n<p>Which can still compile without errors, and I check c keywords, 'http' seems not a keyword, what is the reason?</p>\n"}, {"tags": ["c", "arrays", "file", "loops", "scanf"], "comments": [{"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1470191285, "post_id": 38733359, "comment_id": 64842671, "body": "The second <code>malloc</code> should be <code>malloc(13 * sizeof(char))</code>. But you really shouldn&#39;t use <code>13</code> instead you should use <code>9</code> for both <code>malloc</code> calls. You also need to <code>free</code> what you <code>malloc</code> once you&#39;re done with it."}, {"owner": {"reputation": 11, "user_id": 6153565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KYygn.jpg?s=128&g=1", "display_name": "katDouglas", "link": "https://stackoverflow.com/users/6153565/katdouglas"}, "reply_to_user": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1470191844, "post_id": 38733359, "comment_id": 64842807, "body": "ok thank you i did not know that about free. so at the end of the program i should have: free(matsudoku)??"}, {"owner": {"reputation": 11, "user_id": 6153565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KYygn.jpg?s=128&g=1", "display_name": "katDouglas", "link": "https://stackoverflow.com/users/6153565/katdouglas"}, "reply_to_user": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1470191982, "post_id": 38733359, "comment_id": 64842823, "body": "also when i use 9 the program prints 4 lines with 9 rows and the 5th line only has 6 letters or rows any idea why this is happening ?"}, {"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1470192191, "post_id": 38733359, "comment_id": 64842860, "body": "yes you should have <code>free(matsudoku)</code> after the <code>fclose</code> call. Does that happen even after fixing the second <code>malloc</code>? Not sure why that is happening, could you <a href=\"https://stackoverflow.com/posts/38733359/edit\">edit</a> your question to include the contents of <code>sudokuchar.txt</code>?"}, {"owner": {"reputation": 11, "user_id": 6153565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KYygn.jpg?s=128&g=1", "display_name": "katDouglas", "link": "https://stackoverflow.com/users/6153565/katdouglas"}, "reply_to_user": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1470192605, "post_id": 38733359, "comment_id": 64842958, "body": "Ok thanks @JonnyHenly, i added your suggestions and whats in the text file and what prints"}, {"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1470193180, "post_id": 38733359, "comment_id": 64843096, "body": "<code>fscanf</code> is also reading spaces (<code>&#39; &#39;</code>) and new-line characters (<code>\\n</code>) in your text file."}, {"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 1, "creation_date": 1470193533, "post_id": 38733359, "comment_id": 64843175, "body": "Use <code>fscanf(fpointer, &quot; %c&quot;, &amp;matsudoku[i][j]);</code> with one space in-between <code>&quot;</code> and <code>%c</code>. This will tell <code>fscanf</code> to skip whitespace characters (<code>&#39; &#39;</code>, <code>\\n</code>, <code>\\t</code>, etc.)."}, {"owner": {"reputation": 11, "user_id": 6153565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KYygn.jpg?s=128&g=1", "display_name": "katDouglas", "link": "https://stackoverflow.com/users/6153565/katdouglas"}, "reply_to_user": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1470193829, "post_id": 38733359, "comment_id": 64843245, "body": "yes thank you @JonnyHenly this worked!"}, {"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1470193921, "post_id": 38733359, "comment_id": 64843260, "body": "No problem at all. Let me know if you need more help with this question."}], "owner": {"reputation": 11, "user_id": 6153565, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KYygn.jpg?s=128&g=1", "display_name": "katDouglas", "link": "https://stackoverflow.com/users/6153565/katdouglas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470192526, "creation_date": 1470191076, "last_edit_date": 1470192526, "question_id": 38733359, "link": "https://stackoverflow.com/questions/38733359/how-to-read-list-of-letters-into-a-2d-character-array-in-c", "title": "how to read list of letters into a 2D character array in c", "body": "<p>I am new to C so im sure there are many mistakes. I am trying to read a 9 by 9 sudoku \"board\" from a file, but instead of 1-9, A-I is used. I want to read this file into a character array so i can manipulate and loop through each element of the 2D character array to check that the sudoku is valid. this is what i have so far:</p>\n\n<p>the text file looks like this:</p>\n\n<p>E C D F G H I A B<br>\nF G B A I E C D H<br>\nA I H C D B E F G<br>\nH E I G F A D B C<br>\nD B F H E C G I B<br>\nG A C I B D H E F<br>\nH F A E C G B H D<br>\nB H G D A I F C E<br>\nC D E B H F A G I</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\nint i, j;\nchar **matsudoku = malloc(9*sizeof(char*));\nfor (i=0; i&lt;9; ++i)\n{\n    matsudoku[i]=malloc(9*sizeof(char));\n}\n\nFILE *fpointer = fopen(\"C:/Users/Owner/Documents/Como Sci in C/sudokuchar.txt\", \"r\");\n\nif (fpointer == NULL)\n{\n    printf(\"Cannot open file \\n\");\n    exit(0);\n}\n\nfor(i=0; i&lt;9; i++)\n{\n    for(j=0; j&lt;9; j++)\n    {\n            fscanf(fpointer, \"%c\", &amp;matsudoku[i][j]);\n\n\n            printf(\"%c\", matsudoku[i][j]);\n\n    }\n}\nprintf(\"%c\",matsudoku[0][0]);\nfclose(fpointer);\nfree(matsudoku);\n}\n</code></pre>\n\n<p>first of all all the number i use to pre-allocate space and loop through the file is 13 because using 9 and 9 (which i thought would work since the board is 9 by 9) was not printing the whole 9 by 9 board, the number 13 printed the whole board and \"2=AMDE\" for whatever reason. second, when i try to index into the matrix just to test if it read the file into the character array, i get random characters that change (ie. different letter that don't belong in the spot indexed, characters not even used in the Sudoku). what in the world can i do do to improve this code so it does something remotely close to what i want. anything helps, thanks </p>\n\n<p>when i use 9 in the malloc functions and in the loops, the program prints:<br>\nE C D F G H I A B<br>\nF G B A I E C D H<br>\nA I H C D B E F G<br>\nH E I G F A D B C<br>\nD B F H E  </p>\n"}, {"tags": ["c", "bash", "indentation"], "comments": [{"owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "edited": false, "score": 0, "creation_date": 1470191588, "post_id": 38733322, "comment_id": 64842746, "body": "<code>it looks ugly</code> Set your editor to use tab-size <code>8</code> for that file, and it will look better."}], "answers": [{"comments": [{"owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "edited": false, "score": 0, "creation_date": 1470247258, "post_id": 38734370, "comment_id": 64875124, "body": "It&#39;s much better now! Thank you +1"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1470198202, "creation_date": 1470198202, "answer_id": 38734370, "question_id": 38733322, "link": "https://stackoverflow.com/questions/38733322/exercise-of-indentation-of-c-code/38734370#38734370", "title": "Exercise of indentation of C code", "body": "<p>When I download the file, it has CRLF (DOS or Windows style) line endings.  When you run that through Unix <code>indent</code>, it doesn't like the backslashes followed by CR instead of NL (aka LF).  If you replace the CRLF line endings, it should be formattable by <code>indent</code>.</p>\n\n<p>The problem is that <code>indent</code> expects the backslashes to be followed by a newline, but CR is not a newline.</p>\n\n<p>If you have a <code>dos2unix</code> or <code>dtou</code> command, use that.  If not, use <code>tr</code>:</p>\n\n<pre><code>tr -d '\\015' &lt; sfs_code.c &gt; x31; mv x31 sfs_code.c\n</code></pre>\n\n<p>You can also improve things by replacing the tabs with 8 spaces.  Again, there may be other tools that can do the job, but the classic tool is <code>pr</code>:</p>\n\n<pre><code>pr -e8 -l1 -t sfs_code.c &gt; x31; mv x31 sfs_code.c\n</code></pre>\n\n<p>The backslash newline sequences for splitting strings over multiple lines is very 1980s-style coding.  Since the C89/C90 standard introduced string concatenation, it isn't necessary (though it is still recognized as legitimate C).</p>\n\n<p>At 6781 lines, that's a pretty big file.  It includes a number of other source files (<code>.c</code> extensions) and some headers.  I poked at it with <code>uncrustify</code> which had no problem with it; after removing the CR characters, <code>indent</code> was fine with it too.</p>\n\n<p>(I used my own <code>ule</code> \u2014 Uniform Line Endings \u2014 program to do the conversion.  It's one of a lot of different possible techniques.)</p>\n\n<p>Note that your <code>tr</code> command failed because it mapped both backslash and newline to blank (and left the CR characters unchanged), which is not what you want.  The <code>tr</code> command maps single characters; it is not appropriate for mapping combinations of characters as you wanted and needed.</p>\n"}], "owner": {"reputation": 14929, "user_id": 2051137, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1sIMq.jpg?s=128&g=1", "display_name": "Remi.b", "link": "https://stackoverflow.com/users/2051137/remi-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 38734370, "answer_count": 1, "score": 0, "last_activity_date": 1470198265, "creation_date": 1470190763, "last_edit_date": 1470198265, "question_id": 38733322, "link": "https://stackoverflow.com/questions/38733322/exercise-of-indentation-of-c-code", "title": "Exercise of indentation of C code", "body": "<p>I am trying to improve the indentation of <a href=\"http://www.zoology.ubc.ca/~matthey/sfs_code.c\" rel=\"nofollow\">this C code</a>. I am not picky as to the exact rules used for indentation, I just care that it looks like something more or less standard!</p>\n\n<p>Interestingly, the code looks good on my browser but once downloaded it is clear that the indentation is caused by a mixture of \"tabs\" and \"spaces\" and it looks ugly on both SublimeText2 and TextWrangler.</p>\n\n<p>I tried </p>\n\n<pre><code>indent file.c\n</code></pre>\n\n<p>but it returns a long series of error that seem related to the presence counterslash followed by newline (\"\\\\n\" or \"\\\\\\n\" if the slash needs to be escaped) within strings. So I tried to remove those with</p>\n\n<pre><code>tr \"\\\\\\n\" \" \" &lt; file.c &gt; newfile.c\n</code></pre>\n\n<p>but I did not quite reach my goal.</p>\n"}, {"tags": ["c", "sockets", "select", "client-server", "ipc"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 2, "creation_date": 1470191064, "post_id": 38733264, "comment_id": 64842630, "body": "If you get an error it is not acceptable to let execution proceed as though it hadn&#39;t happened. Every one of those <code>perror()</code> calls should be followed by a cleanup and a return."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1470191543, "post_id": 38733264, "comment_id": 64842731, "body": "How do the client sockets get stored into <code>clientsocks</code>?"}, {"owner": {"reputation": 770, "user_id": 6027611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-hCmKBsNgjJQ/AAAAAAAAAAI/AAAAAAAAAlg/2T3pZgRxzHs/photo.jpg?sz=128", "display_name": "Vishnu N K", "link": "https://stackoverflow.com/users/6027611/vishnu-n-k"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1470192192, "post_id": 38733264, "comment_id": 64842861, "body": "@EJP You mean I should break the loop and return?"}, {"owner": {"reputation": 770, "user_id": 6027611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-hCmKBsNgjJQ/AAAAAAAAAAI/AAAAAAAAAlg/2T3pZgRxzHs/photo.jpg?sz=128", "display_name": "Vishnu N K", "link": "https://stackoverflow.com/users/6027611/vishnu-n-k"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470192250, "post_id": 38733264, "comment_id": 64842876, "body": "@immibis I used the clientsocks[i] to store the socket descriptor of the incoming connections that is being accepted. But I&#39;m not sure how to correctly store the incoming connection into the clientsocks array."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470195531, "post_id": 38733264, "comment_id": 64843597, "body": "@VishnuNK &quot;I used the clientsocks[i] to store the socket descriptor of the incoming connections that is being accepted&quot; - great! But, <b>where</b> are you storing them in that array? Because I don&#39;t see it."}, {"owner": {"reputation": 770, "user_id": 6027611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-hCmKBsNgjJQ/AAAAAAAAAAI/AAAAAAAAAlg/2T3pZgRxzHs/photo.jpg?sz=128", "display_name": "Vishnu N K", "link": "https://stackoverflow.com/users/6027611/vishnu-n-k"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470196498, "post_id": 38733264, "comment_id": 64843826, "body": "@immibis That&#39;s where I&#39;m confused at. I tried using a for loop to store the new_sock fd after calling accept() function. But didn&#39;t help that much.     &#39;for(i=0; i&lt;2; i++){ clientsocks[i] = new_sock; }&#39;"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470197001, "post_id": 38733264, "comment_id": 64843954, "body": "@VishnuNK Do you know how arrays work and how for loops work? It should be clear why <code>for(i=0; i&lt;2; i++){ clientsocks[i] = new_sock; }</code> stores the new socket in both array slots."}, {"owner": {"reputation": 770, "user_id": 6027611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-hCmKBsNgjJQ/AAAAAAAAAAI/AAAAAAAAAlg/2T3pZgRxzHs/photo.jpg?sz=128", "display_name": "Vishnu N K", "link": "https://stackoverflow.com/users/6027611/vishnu-n-k"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470199994, "post_id": 38733264, "comment_id": 64844814, "body": "@immibis In order to avoid rewriting the same array an if condition can be used right? I have edited the code. Please check."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470200345, "post_id": 38733264, "comment_id": 64844945, "body": "@VishnuNK Check what?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1470200386, "post_id": 38733264, "comment_id": 64844955, "body": "What part of &#39;cleanup and return&#39; don&#39;t you understand?"}, {"owner": {"reputation": 770, "user_id": 6027611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-hCmKBsNgjJQ/AAAAAAAAAAI/AAAAAAAAAlg/2T3pZgRxzHs/photo.jpg?sz=128", "display_name": "Vishnu N K", "link": "https://stackoverflow.com/users/6027611/vishnu-n-k"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470200476, "post_id": 38733264, "comment_id": 64844985, "body": "@immibis In order to store the new socket descriptors in different array slots I have used an if condition. I have edited the code in the question asked."}, {"owner": {"reputation": 770, "user_id": 6027611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-hCmKBsNgjJQ/AAAAAAAAAAI/AAAAAAAAAlg/2T3pZgRxzHs/photo.jpg?sz=128", "display_name": "Vishnu N K", "link": "https://stackoverflow.com/users/6027611/vishnu-n-k"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1470201109, "post_id": 38733264, "comment_id": 64845188, "body": "@EJP Does using exit(EXIT_FAILURE) helps?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470202730, "post_id": 38733264, "comment_id": 64845840, "body": "@VishnuNK That doesn&#39;t answer my question. Check what?"}, {"owner": {"reputation": 770, "user_id": 6027611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-hCmKBsNgjJQ/AAAAAAAAAAI/AAAAAAAAAlg/2T3pZgRxzHs/photo.jpg?sz=128", "display_name": "Vishnu N K", "link": "https://stackoverflow.com/users/6027611/vishnu-n-k"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470204431, "post_id": 38733264, "comment_id": 64846549, "body": "@immibis The code I have edited. I have made some edits."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470207779, "post_id": 38733264, "comment_id": 64848265, "body": "@VishnuNK I can see that. Check what?"}, {"owner": {"reputation": 770, "user_id": 6027611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-hCmKBsNgjJQ/AAAAAAAAAAI/AAAAAAAAAlg/2T3pZgRxzHs/photo.jpg?sz=128", "display_name": "Vishnu N K", "link": "https://stackoverflow.com/users/6027611/vishnu-n-k"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1470219155, "post_id": 38733264, "comment_id": 64855309, "body": "@immibis I meant please go through the code and see whether the error you pointed out has been solved or not."}], "answers": [{"comments": [{"owner": {"reputation": 770, "user_id": 6027611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-hCmKBsNgjJQ/AAAAAAAAAAI/AAAAAAAAAlg/2T3pZgRxzHs/photo.jpg?sz=128", "display_name": "Vishnu N K", "link": "https://stackoverflow.com/users/6027611/vishnu-n-k"}, "edited": false, "score": 0, "creation_date": 1482926962, "post_id": 38837290, "comment_id": 69924764, "body": "Sorry for the late reply. But its an awesome answer. Will take care of those things next time when I ask something."}], "tags": [], "owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "is_accepted": true, "score": 1, "last_activity_date": 1470685325, "creation_date": 1470685325, "answer_id": 38837290, "question_id": 38733264, "link": "https://stackoverflow.com/questions/38733264/client-to-client-communication-using-select-function-in-c/38837290#38837290", "title": "Client to Client communication using select() function in c", "body": "<p>You've got some structural problems that isn't really the job of StackOverflow members to fix.</p>\n\n<ol>\n<li>Decide if each client is going to connect on the same socket or their own unique socket, listen accordingly.</li>\n<li>If you have a shared connection, which it seems you are going for... and by shared connection I mean you are listening on one port and doing multiple accepts, then after a given accept you can't assume who has connected until you read some data from the port.   You should have each client send some information through, so that you know if A connected and then B or if B connected and then A.</li>\n<li>The code around your setsockopt seems like you forgot {}</li>\n<li>When saving the clientsocks you can use the information from the client to determine which array slot to use.   Maybe you have 100 clients and they each connect and then send a 32 bit word (which contains their client number, between 1-100).    </li>\n<li>Once you can read messages from various clients (probably want to print them out for now so you can see what is happening), you can build in various messages.   The goal is for client A to be able to ask the server for the contact information of client B so that A can directly connect to B and send B a message.</li>\n<li>OR, instead of #5, Client 26 should be able to send a message to the server, indicating its is for client 45 and the server should be able to check the array of clients that have checked in and then send the message to the client in array slot 45.</li>\n<li>Clients need to have unique ID/numbers so the server has a way to map the client ID's to clientarray sockets.</li>\n<li>Some of those errors are better handled directly than causing the server to exit.   Maybe you can close the socket associated with the socket index causing the error.   Your error messages should indicate which client/socket index caused the error.   You, in general, need more debug messages and more information in the messages.</li>\n</ol>\n"}], "owner": {"reputation": 770, "user_id": 6027611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-hCmKBsNgjJQ/AAAAAAAAAAI/AAAAAAAAAlg/2T3pZgRxzHs/photo.jpg?sz=128", "display_name": "Vishnu N K", "link": "https://stackoverflow.com/users/6027611/vishnu-n-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1897, "favorite_count": 1, "accepted_answer_id": 38837290, "answer_count": 1, "score": 1, "last_activity_date": 1470685325, "creation_date": 1470190340, "last_edit_date": 1470205974, "question_id": 38733264, "link": "https://stackoverflow.com/questions/38733264/client-to-client-communication-using-select-function-in-c", "title": "Client to Client communication using select() function in c", "body": "<p>I was trying to implement a client to client communication with a server in between them. The function of the server is that when a client suppose Client A sends a message to the server, the server should forward that message to the other client, Client B. Same way when the Client B sends a message to the server it should be forwarded to Client A. This programs involves only two clients.\nThe error I get when I execute the code is that it says:</p>\n\n<pre><code>Socket Operation on Non-socket\n</code></pre>\n\n<p>I get this error when the received message from Client A is forwarded to Client B. I think the issue is due to the storing of received address of Client B to the address of Client A. I'm not sure about that. </p>\n\n<blockquote>\n  <p>My server code so far. </p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;sys/time.h&gt;\n#define SERVER_PORT 5009\n\n\nint main(){\nunsigned int sockfd, c,c1,c2, clientlen, clientfd;\nstruct sockaddr_in server;\nstruct sockaddr_in client1;\nint clientsocks[2];\nchar rmsg1[100], msg1[100],rmsg2[100], msg2[100];\nchar w_msg[] = \"Connection to server established\";\n\nfd_set readfds; // For temp file descriptor list.\n\nclientsocks[0] = 0 ;\nclientsocks[1] = 0 ;\n//Socket Creation Process.\nsockfd = socket(AF_INET, SOCK_STREAM, 0);\nif( sockfd &lt; 0){\n    perror(\"Socket cannot be created\");\n}\n\n//For reusing the socket.\nint on = 1;\nif (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &amp;on, sizeof(on)) &lt; 0)\n//Socket address\nbzero((char *) &amp;server, sizeof(server));\nserver.sin_family = AF_INET; // IPv4 internet Protocols\ninet_aton(\"127.0.0.1\", &amp;server.sin_addr);\nserver.sin_port = htons(SERVER_PORT);\n\n//Binding socket to address.\nif (bind( sockfd, (struct sockaddr*)&amp;server, sizeof (server) ) &lt; 0 ){\n    perror(\"Bind Error\");\n    exit(EXIT_FAILURE);\n}\n\n//Listen to accept connection.\nif( listen(sockfd, SOMAXCONN) &lt; 0 ){\n    perror(\"Error in Listen\");\n    exit(EXIT_FAILURE);\n}\n\nunsigned int new_sock;\nclientlen =sizeof(client1);\nint activity;\nwhile(1){\n\n    //Clear socket set.\n    FD_ZERO(&amp;readfds);\n\n    //Adding main sockfd to the socket set.\n    FD_SET(sockfd, &amp;readfds);\n    unsigned int max_sd = sockfd;\n\n    //Add child sockets to set.\n    for(int i=0 ; i&lt;2; i++){\n           c = clientsocks[i];\n        if(c &gt; 0)\n            FD_SET(c, &amp;readfds);\n        if(c &gt; max_sd)\n            max_sd = c;\n    }\n\n    activity = select(max_sd + 1, &amp;readfds, NULL, NULL, NULL);\n    if(activity &lt; 0){\n        perror(\"Error in select()\");\n        exit(EXIT_FAILURE);\n    }\n\n    //Incoming connection when something happens on sockfd.\n    if( FD_ISSET(sockfd, &amp;readfds)){\n        new_sock = accept(sockfd, (struct sockaddr *) &amp;client1, &amp;clientlen);\n        if(new_sock &gt; 0){\n            for(int i=0; i&lt;2; i++){\n                if(clientsocks[i] == 0){\n                    clientsocks[i] = new_sock;\n                    break;\n                }\n            }\n        }\n        if(  new_sock &lt; 0){\n            perror(\"Error Accepting\");\n            exit(EXIT_FAILURE);\n        }\n        if( send(new_sock, w_msg, strlen(w_msg), 0) != strlen(w_msg)){\n            perror(\"Welcome message\");\n            exit(EXIT_FAILURE);\n        }\n    c1 = clientsocks[0];\n    c2 = clientsocks[1];\n    FD_SET(c1, &amp;readfds);\n    FD_SET(c2, &amp;readfds);\n    }\n\n    //Else if its not a new incoming connection.\n    if(FD_ISSET(c1, &amp;readfds)){\n        if(recv(c1, rmsg1, 100, 0) &lt; 0){\n            perror(\"Receive 1\");\n            exit(EXIT_FAILURE);\n        }\n        printf(\"Client1 &gt;&gt; %s\\n\", rmsg1);\n        //Forwarding to Client B.\n        if( send(c2, rmsg1, 100, 0) &lt; 0){\n            perror(\"Error forwarding to 2\");\n            exit(EXIT_FAILURE);\n        }\n    }\n    if(FD_ISSET(c2, &amp;readfds)){\n        if(recv(c2, rmsg2, 100, 0) &lt; 0){\n            perror(\"Receive 2\");\n            exit(EXIT_FAILURE);\n        }\n        printf(\"Client2 &gt;&gt; %s\\n\", rmsg2);\n        if( send(c1, rmsg2, 100, 0) &lt; 0 ){\n            perror(\"Error Forwarding to 1\");\n            exit(EXIT_FAILURE);\n        }\n    }\n}\nclose(sockfd);\nreturn 1;\n}\n</code></pre>\n\n<p>My problem involves two clients only. I would really appreciate if you could point out some other improvements also.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3740, "user_id": 1030870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f96f7ac4f0bf4c2421a9f58b6893400?s=128&d=identicon&r=PG", "display_name": "Mine", "link": "https://stackoverflow.com/users/1030870/mine"}, "edited": false, "score": 1, "creation_date": 1470193400, "post_id": 38732670, "comment_id": 64843154, "body": "How do you run the program? It needs parameter to sort and print, so run with &quot;&lt;program&gt; 1 2 3 4&quot; prints the result well. See <a href=\"http://coliru.stacked-crooked.com/a/0d8885a5cfa02da7\" rel=\"nofollow noreferrer\">demo</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6670040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9bc14a41cc5bdb1ba9c7e06a26669f0?s=128&d=identicon&r=PG&f=1", "display_name": "JEM", "link": "https://stackoverflow.com/users/6670040/jem"}, "edited": false, "score": 0, "creation_date": 1470261620, "post_id": 38732738, "comment_id": 64882545, "body": "Oh my goodness.  I feel like an idiot.  I was having a total brain fart.  I knew I should of just walked away and came back later to look at it later.  I was just running ./a.out even though I knew I was supposed to pass integers as parameters.  Anyway, thanks for your help.  I just needed a push to get back on track."}], "tags": [], "owner": {"reputation": 2186, "user_id": 6572285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AyRzi.jpg?s=128&g=1", "display_name": "mash", "link": "https://stackoverflow.com/users/6572285/mash"}, "is_accepted": false, "score": 1, "last_activity_date": 1470186014, "creation_date": 1470186014, "answer_id": 38732738, "question_id": 38732670, "link": "https://stackoverflow.com/questions/38732670/no-output-shown-to-terminal-but-values-are-displayed-in-gdb/38732738#38732738", "title": "No output shown to terminal but values are displayed in GDB", "body": "<p>The program depends on arguments being passed!</p>\n\n<p>It totally works but you need to pass it arguments.</p>\n\n<p>As the usage in the comment at the top of the code states:</p>\n\n<blockquote>\n  <p>// usage:  insert_sort num1 num2 num3 ..., where the num are the numbers to</p>\n</blockquote>\n\n<p>Try it!</p>\n"}], "owner": {"reputation": 1, "user_id": 6670040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9bc14a41cc5bdb1ba9c7e06a26669f0?s=128&d=identicon&r=PG&f=1", "display_name": "JEM", "link": "https://stackoverflow.com/users/6670040/jem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1470493116, "answer_count": 1, "score": -1, "last_activity_date": 1470211458, "creation_date": 1470185361, "last_edit_date": 1470211458, "question_id": 38732670, "link": "https://stackoverflow.com/questions/38732670/no-output-shown-to-terminal-but-values-are-displayed-in-gdb", "closed_reason": "Not suitable for this site", "title": "No output shown to terminal but values are displayed in GDB", "body": "<p>I'm currently working on the book <em>The Art of Debugging</em>. I've entered the code for this first exercise and I should be receiving output to the terminal. When I run the program, nothing appears. But, when I look at the variables in GDB, I can see the values for the parameters correctly.</p>\n\n<p>The main concern is the <code>print_results()</code> function. It's not printing anything to screen. Can anyone help? I've tried this on two different machines running Linux (Debian and Lubuntu).</p>\n\n<p>Here's the code:</p>\n\n<pre><code>// insertion sort, several errors\n// usage:  insert_sort num1 num2 num3 ..., where the num are the numbers to\n// be sorted\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint x[10],  // input array\n    y[10],  // workspace array  \n    num_inputs,  // length of input array\n    num_y = 0;  // current number of elements in y\n\nvoid get_args(int ac, char **av)\n{  int i;\n\n   num_inputs = ac - 1;\n   for (i = 0; i &lt; num_inputs; i++)\n      x[i] = atoi(av[i+1]);\n}\n\nvoid scoot_over(int jj)\n{  int k;\n\n   for (k = num_y; k &gt; jj; k--)\n      y[k] = y[k-1];\n}\n\nvoid insert(int new_y)\n{  int j;\n\n   if (num_y == 0)  { // y empty so far, easy case\n      y[0] = new_y;\n      return;\n   }\n   // need to insert just before the first y \n   // element that new_y is less than\n   for (j = 0; j &lt; num_y; j++)  {\n      if (new_y &lt; y[j])  {\n         // shift y[j], y[j+1],... rightward \n         // before inserting new_y\n         scoot_over(j);\n         y[j] = new_y;\n         return;\n      }\n   }\n    // one more case: new_y &gt; all existing y elements\n    y[num_y] = new_y;\n}\n\nvoid process_data()\n{\n   for (num_y = 0; num_y &lt; num_inputs; num_y++)\n      // insert new y in the proper place \n      // among y[0],...,y[num_y-1]\n      insert(x[num_y]);\n}\n\nvoid print_results()\n{  \n   int i;\n   for(i=0; i &lt; num_inputs; i++)\n      printf(\"%d\\n\", y[i]);\n}\n\nint main(int argc, char ** argv)\n{  get_args(argc,argv);\n   process_data();\n   print_results();\n}\n</code></pre>\n\n<p>Thanks in advance,\nJesse</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1470185102, "post_id": 38732590, "comment_id": 64841318, "body": "Your condition <code>(a &gt;= 1 || a &lt;= 9)</code> means <code>a</code> can be either <code>&gt;=0</code> or <code>&lt;=9</code>. Note the <code>or</code> condition. This mean if the input is say <code>15</code>, this number is greater than <code>1</code> which makes your condition true. If the input is <code>-5</code>, it means this number is less than <code>9</code>, also making the condition true. Note the <code>or</code>."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1470185195, "post_id": 38732590, "comment_id": 64841340, "body": "@alvits Why answer in a comment instead of an actual answer?"}, {"owner": {"reputation": 98, "user_id": 5049880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/864768826945211/picture?type=large", "display_name": "hec", "link": "https://stackoverflow.com/users/5049880/hec"}, "edited": false, "score": 0, "creation_date": 1470185218, "post_id": 38732590, "comment_id": 64841345, "body": "thank you now i see why that default label was causing issues, my compiler didn&#39;t throw any &quot;control reaches end of void statement warning&quot; so i blame that too"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1470189384, "post_id": 38732590, "comment_id": 64842261, "body": "Do not edit the solution into the question. Now it looks like you asked &quot;I have this code: &lt;working code goes here&gt; and it doesn&#39;t work.&quot; I will undo all your edits, but since it&#39;s hard to tell, I might&#39;ve undid something that should have stayed. In that case feel free to re-do it."}], "answers": [{"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 4, "last_activity_date": 1470185180, "creation_date": 1470185180, "answer_id": 38732642, "question_id": 38732590, "link": "https://stackoverflow.com/questions/38732590/why-does-this-program-crash-when-input-is-greater-than-9/38732642#38732642", "title": "why does this program crash when input is greater than 9?", "body": "<p>Condition <code>a &gt;= 1 || a &lt;= 9</code> is always true, meaning that your <code>itos2</code> is always called regardless of what you input as <code>a</code>. If <code>a</code> is outside of <code>[1, 9]</code> range, function <code>itos2</code> fails to return anything, producing undefined behavior (a crash in your case).</p>\n\n<p>Apparently you meant <code>a &gt;= 1 &amp;&amp; a &lt;= 9</code> as your condition for calling <code>itos2</code>. <code>&amp;&amp;</code>, not <code>||</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 98, "user_id": 5049880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/864768826945211/picture?type=large", "display_name": "hec", "link": "https://stackoverflow.com/users/5049880/hec"}, "edited": false, "score": 0, "creation_date": 1470185771, "post_id": 38732683, "comment_id": 64841482, "body": "i like that optimization!"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 98, "user_id": 5049880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/864768826945211/picture?type=large", "display_name": "hec", "link": "https://stackoverflow.com/users/5049880/hec"}, "edited": false, "score": 0, "creation_date": 1470186395, "post_id": 38732683, "comment_id": 64841620, "body": "@hec make sure to tell your teacher that the answer was from stackoverflow - credit where credit is due :-)"}, {"owner": {"reputation": 98, "user_id": 5049880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/864768826945211/picture?type=large", "display_name": "hec", "link": "https://stackoverflow.com/users/5049880/hec"}, "edited": false, "score": 0, "creation_date": 1470186522, "post_id": 38732683, "comment_id": 64841639, "body": "ill add it to the source code, the problem comes from hacker rank"}], "tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": true, "score": 0, "last_activity_date": 1470185416, "creation_date": 1470185416, "answer_id": 38732683, "question_id": 38732590, "link": "https://stackoverflow.com/questions/38732590/why-does-this-program-crash-when-input-is-greater-than-9/38732683#38732683", "title": "why does this program crash when input is greater than 9?", "body": "<p>Here's your code, improved:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nconst char* itos2(int);\n\n// A proper C function prototype\nint main(void)\n{ \n   int a;\n\n   // Checking the return value of scanf is *required*!\n   // If it doesn't return a value which is equal to the number of expected\n   // assignments, then your variables are left unassigned, leading to \n   // Undefined Behavior!\n   if (scanf(\"%i\", &amp;a) != 1) {\n       fprintf(stderr, \"Invalid input\\n\");\n       return 1;\n   }\n\n   // It's usually better practice to not have to worry about a valid range\n   // of inputs when calling a function. Let this function worry about the\n   // input checking.\n   printf(\"%s\", itos2(a));\n\n   return 0;\n}\n\nconst char* itos2(int a)\n{\n    const char* str [] = {\n        \"zero\",\n        \"one\",\n        \"two\",\n        \"three\",\n        \"four\",\n        \"five\",\n        \"six\",\n        \"seven\",\n        \"eight\",\n        \"nine\",\n    };\n\n    // Check boundary conditions. Checking just one boundary case and \n    // returning is simpler and less error-prone than your previous code.\n    if (a &lt; 0)\n        return \"Less than zero\";\n    if (a &gt; 9)\n        return \"Greater than nine\";\n\n    // Why bother with a switch/case statement when you can simply\n    // use the input value to index directly into an array of the strings?\n    return str[a];\n}\n</code></pre>\n\n<p>Assuming you're using GCC, <strong>always</strong> compile with <em>at least</em> this set of options:</p>\n\n<pre><code>gcc -Wall -Werror ...\n</code></pre>\n"}], "owner": {"reputation": 98, "user_id": 5049880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/864768826945211/picture?type=large", "display_name": "hec", "link": "https://stackoverflow.com/users/5049880/hec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 38732683, "answer_count": 2, "score": -2, "last_activity_date": 1470189429, "creation_date": 1470184737, "last_edit_date": 1470189429, "question_id": 38732590, "link": "https://stackoverflow.com/questions/38732590/why-does-this-program-crash-when-input-is-greater-than-9", "title": "why does this program crash when input is greater than 9?", "body": "<p>I dont know why this crashes on my machine but it does</p>\n\n<p>You are given a positive integer, N ,:</p>\n\n<p>If 1 &lt;= N &lt;= 9, then print the English representation of it. That is \"one\" for 1, \"two\" for 2, and so on.\nOtherwise print \"Greater than 9\" (without quotes).\nInput Format:</p>\n\n<p>Input will contain only one integer, N .</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nconst char* itos2(int);\n\nint main() {\n    /* Enter your code here. Read input from STDIN. Print output to STDOUT */   \n   int a;\n   scanf(\"%i\", &amp;a );\n   printf(\"%s\",((a &gt;= 1 || a &lt;= 9) ? itos2(a) : \"Greater than 9\"));\n\n   //printf(\"%s\",itos2(a)); this doesn't crash provided a default label is set\n   return 0;\n}\n\nconst char* itos2(int a)\n{\nconst char* str [] = { \"one\" , \"two\", \"three\", \"four\", \"five\", \"six\", \"seven\", \"eight\", \"nine\"};\n    switch(a)\n    {\n        case 1 : return str[0];\n        case 2 : return str[1];\n        case 3 : return str[2];\n        case 4 : return str[3];\n        case 5 : return str[4];\n        case 6 : return str[5];\n        case 7 : return str[6];\n        case 8 : return str[7];\n        case 9 : return str[8];\n        default: return \"Greater than 9\";\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 7, "creation_date": 1470184352, "post_id": 38732506, "comment_id": 64841147, "body": "<code>num</code> is a <code>long</code> and not an array, so <code>num[0]</code> doesn\u2019t make any sense. What are you trying to accomplish by checking <code>if (num[0] == 0)</code>?"}, {"owner": {"reputation": 23, "user_id": 6215376, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh4.googleusercontent.com/-tUcHuK1Bwbg/AAAAAAAAAAI/AAAAAAAAAD8/Ipnq0i_qKv8/photo.jpg?sz=128", "display_name": "Bronson", "link": "https://stackoverflow.com/users/6215376/bronson"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1470184935, "post_id": 38732506, "comment_id": 64841267, "body": "completely missed that one! what im trying to do is check if the number inputted is binary or not,(example: if the first number was &#39;0&#39; then i would know its binary) would that be the correct way of checking it?"}, {"owner": {"reputation": 2186, "user_id": 6572285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AyRzi.jpg?s=128&g=1", "display_name": "mash", "link": "https://stackoverflow.com/users/6572285/mash"}, "edited": false, "score": 0, "creation_date": 1470186815, "post_id": 38732506, "comment_id": 64841711, "body": "@Bronson you might want to read chars instead."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1470190891, "post_id": 38732506, "comment_id": 64842589, "body": "It might be better to let the user pick the mode every time, either by prompting for binary or decimal beforehand or using a command-line flag (<code>base-convert --from-binary</code>, for example). A more consistent user experience and also easier to implement in code =)"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1470187426, "last_edit_date": 1495542156, "creation_date": 1470186443, "answer_id": 38732778, "question_id": 38732506, "link": "https://stackoverflow.com/questions/38732506/invalid-types-long-intlong-int-for-array-subscript/38732778#38732778", "title": "Invalid types &#39;long int[long int]&#39; for array subscript", "body": "<p>Code is attempting to index a non-array.  <a href=\"https://stackoverflow.com/questions/38732506/invalid-types-long-intlong-int-for-array-subscript/38732778#comment64841147_38732506\">@Ryan O'Hara</a></p>\n\n<pre><code>// bad\nlong int num,...,i;\n....\nif(num[0]==0){\n</code></pre>\n\n<p>Instead simple use <code>if(num==0){</code>  or for OP's code, suspect <code>if(num != 0){</code> is really wanted.</p>\n"}], "owner": {"reputation": 23, "user_id": 6215376, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh4.googleusercontent.com/-tUcHuK1Bwbg/AAAAAAAAAAI/AAAAAAAAAD8/Ipnq0i_qKv8/photo.jpg?sz=128", "display_name": "Bronson", "link": "https://stackoverflow.com/users/6215376/bronson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1779, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470187426, "creation_date": 1470184152, "last_edit_date": 1470187357, "question_id": 38732506, "link": "https://stackoverflow.com/questions/38732506/invalid-types-long-intlong-int-for-array-subscript", "title": "Invalid types &#39;long int[long int]&#39; for array subscript", "body": "<p>I'm currently writing a  binary/decimal converter, and am getting stuck on a few errors. I need some help fixing them.</p>\n\n<p>error 1:</p>\n\n<pre><code>assignment 1.c:10:23: error: invalid types 'long int[long int]' for array subscript\n scanf(\"%ld\",&amp;num[i]);\n</code></pre>\n\n<p>error 2:</p>\n\n<pre><code>assignment 1.c:11:11: error: invalid types 'long int[int]' for array subscript\nif(num[0]==0){\n</code></pre>\n\n<p>error 3:</p>\n\n<pre><code>assignment 1.c:20:11: error: invalid types 'long int[int]' for array subscript\nif(num[0]==1){\n</code></pre>\n\n<p>I'm not sure what the problem is with them, I might be making an obvious mistake.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(){\n\n  long int num,decimalNumber=0,j=1,remainder,i;\n  int bord;\n\n\n  printf(\"Enter any number any binary number: \");\n  scanf(\"%ld\",&amp;num[i]); \n  if(num[0]==0){\n\n    while(num!=0){\n      remainder=num%10;\n      decimalNumber=decimalNumber+remainder*j;\n      j=j*2;\n      num=num/10;\n    }\n  }\n  if(num[0]==1){\n    printf(\"Press '1' for binary\\n Press '2' for deciaml\");\n  }\n\n  printf(\"Equivalent decimal value: %ld\",decimalNumber);\n\n  return 0;\n}\n</code></pre>\n\n<p>The program is not finished.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27634, "user_id": 1576602, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4d5132c0e702c0b50cac6aa7c56d191f?s=128&d=identicon&r=PG", "display_name": "Andrzej Pronobis", "link": "https://stackoverflow.com/users/1576602/andrzej-pronobis"}, "edited": false, "score": 5, "creation_date": 1470183257, "post_id": 38732386, "comment_id": 64840862, "body": "I believe this is simply a convention used by the author of the code."}, {"owner": {"reputation": 1540, "user_id": 2192409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qrL0w.png?s=128&g=1", "display_name": "Tdorno", "link": "https://stackoverflow.com/users/2192409/tdorno"}, "edited": false, "score": 3, "creation_date": 1470183268, "post_id": 38732386, "comment_id": 64840865, "body": "This isn&#39;t really uninitializing a_var[i] is it?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 5, "creation_date": 1470183315, "post_id": 38732386, "comment_id": 64840875, "body": "There is no such thing as uninitializing a variable. The closest thing would be cleaning up resources like allocated memory and open file handles, but this code doesn&#39;t do anything like that."}, {"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 0, "creation_date": 1470183431, "post_id": 38732386, "comment_id": 64840902, "body": "Clearing a variable like this can be used to check for memory violations."}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1470183650, "post_id": 38732386, "comment_id": 64840956, "body": "user2357112 is correct. No such thing as unitializing a variable. Just cleaning up resources. However I believe all this is doing is setting all the bits that a_var can hold to 1, since F = 1111. a_var[i] might be some flag or checksum and this might be useful for those scenarios."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1470183721, "post_id": 38732386, "comment_id": 64840976, "body": "The only person that can give an exact answer to your question is the author of that code. But the common reason is that <code>0xFFFF</code> is not a valid value that is expected to be contained in the <code>a_var</code> array so is used to mark those entries as not in use. Note that the chosen value may be different in different contexts."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 0, "creation_date": 1470183997, "post_id": 38732386, "comment_id": 64841051, "body": "@johnelemans: Yes, but yuck. There are proper tools for that purpose that do a much better job (e.g. ASAN or Valgrind)."}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1470184020, "post_id": 38732386, "comment_id": 64841056, "body": "@KerrekSB and gdb?"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470225108, "post_id": 38732921, "comment_id": 64859298, "body": "The type of the array is not specified (that&#39;s why we ask for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>). So we don&#39;t know if the variable really will have <code>65536</code>. Considering the wrong comment and apparently using a global array and uselessly returning a result, it can be <code>-1</code> or other signed representation."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470225485, "post_id": 38732921, "comment_id": 64859573, "body": "@Olaf, did you mean 65535 and not 65536?  Even if code is <code>char x = 65535</code>, code is still setting the variable to 65535.  Agree the result of that setting (assigning) depends of the target variable type."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470227428, "post_id": 38732921, "comment_id": 64861063, "body": "I tend to interpret the assignment in context of the LHS, because that&#39;s what the object is set to. And because the RHS is irrelevant after the assignment."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 5, "last_activity_date": 1470187748, "last_edit_date": 1495535321, "creation_date": 1470187748, "answer_id": 38732921, "question_id": 38732386, "link": "https://stackoverflow.com/questions/38732386/purpose-of-uninitialize-a-variable/38732921#38732921", "title": "purpose of uninitialize a variable", "body": "<p>Code is not <em>un-initializing</em> a variable.  Code is simply setting the variable to the value <code>0XFFFF</code> or <code>65535</code>. <a href=\"https://stackoverflow.com/questions/38732386/purpose-of-uninitialize-a-variable#comment64840875_38732386\">@user2357112</a></p>\n\n<p>The author of the code may be using this value (16 one bits) to signify something special - but that is application specific.  There is no general un-initializing a variable in C.  <a href=\"https://stackoverflow.com/questions/38732386/purpose-of-uninitialize-a-variable#comment64840862_38732386\">@And</a></p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 6642303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a89f3716fa677885cf9eb2ca557ea180?s=128&d=identicon&r=PG&f=1", "display_name": "danteDev", "link": "https://stackoverflow.com/users/6642303/dantedev"}, "edited": false, "score": 0, "creation_date": 1470197907, "post_id": 38733148, "comment_id": 64844207, "body": "I guess this is the closest possible scenario. For the purpose of debugging and detect problem that will either change the 0xFFFF value or has been changed to other value."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1470222582, "post_id": 38733148, "comment_id": 64857527, "body": "For debugging, <code>0xFFFF</code> is a weak choice -only slightly better than <code>0x0000</code>.  For debugging, more useful that the <i>un-initializied</i> value contain a uncommon bit pattern.  Thus I doubt author is using for debugging but to set to a special state that the application deems as &quot;un-initializied&quot;."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470224954, "post_id": 38733148, "comment_id": 64859176, "body": "There is no initiailisation either. But an assignment."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470227543, "post_id": 38733148, "comment_id": 64861166, "body": "Ok, but still there is too much speculation. The question does not provide enough context."}, {"owner": {"reputation": 35, "user_id": 6642303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a89f3716fa677885cf9eb2ca557ea180?s=128&d=identicon&r=PG&f=1", "display_name": "danteDev", "link": "https://stackoverflow.com/users/6642303/dantedev"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470271801, "post_id": 38733148, "comment_id": 64885363, "body": "@Olaf, a_var is type uint16. The variable value will be updated in other c file, it is just a pure data. The author just define it with 0xFFFF for the first time in the program and comment it as uninitialize. So, the question is why have to do this, is it a common practice in writing a program."}, {"owner": {"reputation": 35, "user_id": 6642303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a89f3716fa677885cf9eb2ca557ea180?s=128&d=identicon&r=PG&f=1", "display_name": "danteDev", "link": "https://stackoverflow.com/users/6642303/dantedev"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470283882, "post_id": 38733148, "comment_id": 64889107, "body": "@Olaf, I don&#39;t see your comment related to the question. Thanks for your input anyway."}], "tags": [], "owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1470227074, "last_edit_date": 1495542401, "creation_date": 1470189551, "answer_id": 38733148, "question_id": 38732386, "link": "https://stackoverflow.com/questions/38732386/purpose-of-uninitialize-a-variable/38733148#38733148", "title": "purpose of uninitialize a variable", "body": "<p>As said by others, there is no such thing as \"un-initialising\" a variable. That comment is misleading.</p>\n\n<p>What the author probably meant is: let's set it to a value that clearly stands out (for example in the debugger) and that is not meant to be used by a program that runs correctly; instead, it is meant to be overwritten when the proper initialisation takes place. If the program crashes and the debugger shows the value is <code>0xFFFF</code>, it means the variable hasn't been initialised properly (otherwise it would have a different value), and then you know your code is accessing it at the wrong time, before the \"correct\" initialisation. Or, similarly, it could be that this function is called when the variable is not meant to be used again, and seeing that value indicates that the variable has been used after its intended \"end of life\".</p>\n\n<p>This technique is applied by Visual Studio when debugging C++ code: the variables are all automatically initialised with special values, chosen to be easy to see and remember. Examples include <code>0xABABABAB</code>, <code>0xABADCAFE</code> and <code>0xDEADDEAD</code>. You can find more <a href=\"https://stackoverflow.com/q/127386/3982001\">here</a> and <a href=\"https://stackoverflow.com/q/370195/3982001\">here</a>. <a href=\"https://en.wikipedia.org/wiki/Magic_number_(programming)#Magic_debug_values\" rel=\"nofollow noreferrer\">Wikipedia</a> has a much longer list.</p>\n\n<p>The author of this program is probably trying to replicate it. A better comment would be: \"Set <code>a_var</code> to a known wrong value that helps detecting improper early/late accesses to it\".</p>\n"}], "owner": {"reputation": 35, "user_id": 6642303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a89f3716fa677885cf9eb2ca557ea180?s=128&d=identicon&r=PG&f=1", "display_name": "danteDev", "link": "https://stackoverflow.com/users/6642303/dantedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 38733148, "answer_count": 2, "score": -1, "last_activity_date": 1470227074, "creation_date": 1470183117, "question_id": 38732386, "link": "https://stackoverflow.com/questions/38732386/purpose-of-uninitialize-a-variable", "title": "purpose of uninitialize a variable", "body": "<p>I come across an example of a function as below:</p>\n\n<pre><code>int someFunction(void)\n{\n    int i;\n\n    for(i = 0; i &lt; 10; i++)\n    {           \n            a_var[i] = 0xFFFF; //uninitialize a_var\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>What is the purpose of uninitialize a variable and why is it have to use 0XFFFF?</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1470174567, "post_id": 38731053, "comment_id": 64838385, "body": "Have you tried it? Wouldn&#39;t <code>printf(str1, name);</code> make more sense?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1470174858, "post_id": 38731053, "comment_id": 64838513, "body": "... and notice that <code>printf(&quot;%s\\n&quot;, str1, name);</code> has one format specifier, but two arguments. the second will be ignored."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470176802, "post_id": 38731053, "comment_id": 64839189, "body": "What is a &quot;string identifier&quot;?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1470179828, "post_id": 38731053, "comment_id": 64840086, "body": "<code>#define STR1 &quot;%s says:&quot; char *name = &quot;John&quot;; printf(STR1 &quot;\\n&quot; , name);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470179422, "post_id": 38731097, "comment_id": 64839988, "body": "Well, it very well could recursively interpret the strings. Reason <code>printf</code> does not work like this is not because it is not possible, but it is a very bad idea fro security reasons (what if a user-supplied string is to be printed? - this is the reason one always should use a well known format string) and complexity. That function already is one of the largest in the standard library (along with the <code>scanf</code> family)."}], "tags": [], "owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "is_accepted": false, "score": 1, "last_activity_date": 1470174756, "creation_date": 1470174756, "answer_id": 38731097, "question_id": 38731053, "link": "https://stackoverflow.com/questions/38731053/string-identifier-within-another-string/38731097#38731097", "title": "String identifier within another string", "body": "<p>THINK about what printf() is doing.</p>\n\n<p>printf() sees the \"%s\" and interprets it as, print the indicated string.  The indicated string just happens to contain the characters \"%s\": how is printf() to know that?  It doesn't automatically rescan and rescan.</p>\n\n<p>How about having a loop.  Gather up the characters and sprintf() them into a buffer.  Each time around, if there's still another '%' in the string, reapply sprintf().  When you're done, just dump out the string literally with puts().</p>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1470183692, "post_id": 38731233, "comment_id": 64840969, "body": "Funny how it just makes more sense when you call the variable holding the <i>format string</i> <code>fmt</code>..."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 2, "last_activity_date": 1470175546, "creation_date": 1470175546, "answer_id": 38731233, "question_id": 38731053, "link": "https://stackoverflow.com/questions/38731053/string-identifier-within-another-string/38731233#38731233", "title": "String identifier within another string", "body": "<p>No, <code>printf</code> cannot be made to work that way. You would have to do this in two separate stages:</p>\n\n<pre><code>const char *fmt = \"%s says: \";\nchar result1[SIZE];             // where SIZE is large enough to hold the result\nsprintf( result, fmt, \"John\" ); // result now contains \"John says: \"\nprintf( \"%s\\n\", result );       // writes \"John says: \" to standard output \n</code></pre>\n\n<p>I've had to do variations on this a number of times, where I needed to build format strings on the fly.  That's about as easy as it gets.  </p>\n"}], "owner": {"reputation": 977, "user_id": 3267920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f366873752a0b8f5075f2f46aed06238?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/3267920/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1250, "favorite_count": 0, "closed_date": 1470224523, "answer_count": 2, "score": 0, "last_activity_date": 1470175546, "creation_date": 1470174496, "last_edit_date": 1470174653, "question_id": 38731053, "link": "https://stackoverflow.com/questions/38731053/string-identifier-within-another-string", "closed_reason": "Needs details or clarity", "title": "String identifier within another string", "body": "<p>Is it possible to have a string identifier inside another string identifier, and print the entire thing? For example:</p>\n\n<pre><code>int main()\n{\n    char *str1 = \"%s says:\";\n    char *name = \"John\";\n    printf(\"%s\\n\", str1, name);\n    return(0);\n}\n</code></pre>\n\n<p>My expected output would be <code>John says:</code>. How would I printf or sprintf something like this?</p>\n"}, {"tags": ["c", "file", "copy"], "comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1470174428, "post_id": 38730780, "comment_id": 64838315, "body": "<i>Aside</i>: your program will go uncomfortably slow unless you increase the size of your buffer."}, {"owner": {"reputation": 432, "user_id": 6542561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uEiJr.png?s=128&g=1", "display_name": "Bruce David Wilner", "link": "https://stackoverflow.com/users/6542561/bruce-david-wilner"}, "edited": false, "score": 1, "creation_date": 1470175800, "post_id": 38730780, "comment_id": 64838842, "body": "Yes, I can&#39;t imagine why you would want to read ONE BYTE AT A TIME."}, {"owner": {"reputation": 165, "user_id": 4105823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f1cf57e2cb1c80dbb85e311f14c013d?s=128&d=identicon&r=PG&f=1", "display_name": "thebesttony", "link": "https://stackoverflow.com/users/4105823/thebesttony"}, "edited": false, "score": 0, "creation_date": 1470176429, "post_id": 38730780, "comment_id": 64839071, "body": "The reason was that I wanted to write the simplest program I could to show better my problem.."}], "answers": [{"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 4, "last_activity_date": 1470174234, "creation_date": 1470174234, "answer_id": 38730994, "question_id": 38730780, "link": "https://stackoverflow.com/questions/38730780/copy-a-file-in-c/38730994#38730994", "title": "Copy a file in C", "body": "<p>You may need to open the file in <em>binary mode</em> on your system. From C.2011, &sect;7.21.5.3:</p>\n\n<blockquote>\n  <p><strong><code>rb</code></strong> open binary file for reading<br>\n  <strong><code>wb</code></strong> truncate to zero length or create binary file for writing</p>\n</blockquote>\n\n<p>So:</p>\n\n<pre><code>FILE * input    =   fopen(\"input.wav\", \"rb\");\nFILE * output   =   fopen(\"output.wav\", \"wb\");\n</code></pre>\n\n<p>The reason is that on some systems, certain embedded binary characters may cause the text mode processing to believe the end of file has been encountered, even though there are actually more bytes in the file.</p>\n"}], "owner": {"reputation": 165, "user_id": 4105823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f1cf57e2cb1c80dbb85e311f14c013d?s=128&d=identicon&r=PG&f=1", "display_name": "thebesttony", "link": "https://stackoverflow.com/users/4105823/thebesttony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 38730994, "answer_count": 1, "score": 2, "last_activity_date": 1470174234, "creation_date": 1470173369, "question_id": 38730780, "link": "https://stackoverflow.com/questions/38730780/copy-a-file-in-c", "title": "Copy a file in C", "body": "<p>I try to copy a file in a new file but it doesn't work because the input is 5133KB and the output is 614byte... what's wrong? Thank you in advance.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n\n    FILE * input    =   fopen(\"input.wav\", \"r\");\n    FILE * output   =   fopen(\"output.wav\", \"w\");\n\n    char    buffer;\n    int     bytesRead = 1;\n\n    while(bytesRead=fread(&amp;buffer,1,1,input))\n    {\n        fwrite(&amp;buffer,1,1,output);\n    }\n\n    fclose(input);\n    fclose(output);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "file", "ubuntu", "gcc"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1470173318, "post_id": 38730754, "comment_id": 64837793, "body": "You must check the result <code>fp != NULL</code> before trying to close it. The file probably does not exist on the path you think it is on."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 5, "creation_date": 1470173534, "post_id": 38730754, "comment_id": 64837894, "body": "The man page says <i>&quot;r+&quot; Opens for both reading and writing. The file must exist.</i> So when you say the file could not be created: no, it could not."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1470173676, "post_id": 38730754, "comment_id": 64837961, "body": "My suggestion would be <code>man fopen</code>"}, {"owner": {"reputation": 35130, "user_id": 1255289, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5ed02658b2440179f00eeff8beb7aa4c?s=128&d=identicon&r=PG", "display_name": "miken32", "link": "https://stackoverflow.com/users/1255289/miken32"}, "edited": false, "score": 0, "creation_date": 1470244166, "post_id": 38730754, "comment_id": 64873401, "body": "<code>fopen(&quot;SIZE.txt&quot;, &quot;w&quot;);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4692080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jih36V1-X54/AAAAAAAAAAI/AAAAAAAAAYM/maDIvyeJl9I/photo.jpg?sz=128", "display_name": "Metin Oktay Y\u0131lmaz", "link": "https://stackoverflow.com/users/4692080/metin-oktay-y%c4%b1lmaz"}, "edited": false, "score": 0, "creation_date": 1470173657, "post_id": 38730785, "comment_id": 64837954, "body": "Changed <code>&quot;stdio.h&quot;</code> to <code>&lt;stdio.h&gt;</code>. It returns <code>NULL</code>, and <code>SIZE.txt</code> still remains missing."}, {"owner": {"reputation": 920, "user_id": 5482045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/930882390318811/picture?type=large", "display_name": "Nunchy", "link": "https://stackoverflow.com/users/5482045/nunchy"}, "reply_to_user": {"reputation": 13, "user_id": 4692080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jih36V1-X54/AAAAAAAAAAI/AAAAAAAAAYM/maDIvyeJl9I/photo.jpg?sz=128", "display_name": "Metin Oktay Y\u0131lmaz", "link": "https://stackoverflow.com/users/4692080/metin-oktay-y%c4%b1lmaz"}, "edited": false, "score": 0, "creation_date": 1470173735, "post_id": 38730785, "comment_id": 64837997, "body": "Is the path to SIZE.txt correct?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 13, "user_id": 4692080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jih36V1-X54/AAAAAAAAAAI/AAAAAAAAAYM/maDIvyeJl9I/photo.jpg?sz=128", "display_name": "Metin Oktay Y\u0131lmaz", "link": "https://stackoverflow.com/users/4692080/metin-oktay-y%c4%b1lmaz"}, "edited": false, "score": 1, "creation_date": 1470173839, "post_id": 38730785, "comment_id": 64838047, "body": "@MetinOktayY\u0131lmaz yes the file remains missing, and you lack the ability to read comments, let alone man pages. So get on with it, or do you need a link FFS?"}, {"owner": {"reputation": 920, "user_id": 5482045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/930882390318811/picture?type=large", "display_name": "Nunchy", "link": "https://stackoverflow.com/users/5482045/nunchy"}, "edited": false, "score": 0, "creation_date": 1470173961, "post_id": 38730785, "comment_id": 64838101, "body": "Expected t be created? you&#39;re trying to open it for reading...it should have been created before you call fopen()..."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1470173971, "post_id": 38730785, "comment_id": 64838112, "body": "How many times do you need to be told that the mode &quot;r+&quot; will not create a file?"}, {"owner": {"reputation": 920, "user_id": 5482045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/930882390318811/picture?type=large", "display_name": "Nunchy", "link": "https://stackoverflow.com/users/5482045/nunchy"}, "edited": false, "score": 2, "creation_date": 1470174048, "post_id": 38730785, "comment_id": 64838151, "body": "He&#39;s trying to help you? why ask for help then give attitude when people oblige?"}, {"owner": {"reputation": 13, "user_id": 4692080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jih36V1-X54/AAAAAAAAAAI/AAAAAAAAAYM/maDIvyeJl9I/photo.jpg?sz=128", "display_name": "Metin Oktay Y\u0131lmaz", "link": "https://stackoverflow.com/users/4692080/metin-oktay-y%c4%b1lmaz"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1470174201, "post_id": 38730785, "comment_id": 64838210, "body": "@Weather Vane Thanks for the help."}, {"owner": {"reputation": 13, "user_id": 4692080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jih36V1-X54/AAAAAAAAAAI/AAAAAAAAAYM/maDIvyeJl9I/photo.jpg?sz=128", "display_name": "Metin Oktay Y\u0131lmaz", "link": "https://stackoverflow.com/users/4692080/metin-oktay-y%c4%b1lmaz"}, "edited": false, "score": 0, "creation_date": 1470174335, "post_id": 38730785, "comment_id": 64838273, "body": "Oh my god I won&#39;t be able to sleep for I have embarrased myself so badly..."}, {"owner": {"reputation": 920, "user_id": 5482045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/930882390318811/picture?type=large", "display_name": "Nunchy", "link": "https://stackoverflow.com/users/5482045/nunchy"}, "edited": false, "score": 1, "creation_date": 1470174531, "post_id": 38730785, "comment_id": 64838373, "body": "You trying to tell us you&#39;re fully awake?"}], "tags": [], "owner": {"reputation": 920, "user_id": 5482045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/930882390318811/picture?type=large", "display_name": "Nunchy", "link": "https://stackoverflow.com/users/5482045/nunchy"}, "is_accepted": false, "score": 1, "last_activity_date": 1470173391, "creation_date": 1470173391, "answer_id": 38730785, "question_id": 38730754, "link": "https://stackoverflow.com/questions/38730754/a-simple-text-file-wouldnt-be-created-c-gcc/38730785#38730785", "title": "A simple text file wouldn&#39;t be created [C, GCC]", "body": "<p>Change:</p>\n\n<pre><code>#include \"stdio.h\"\n</code></pre>\n\n<p>To</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n</code></pre>\n\n<p>Also, check for a NULL pointer being returned by fopen():</p>\n\n<pre><code>if ((fp = fopen(\"file.txt\", \"r\")) == NULL) {\n   // Handle error...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1470183993, "post_id": 38731117, "comment_id": 64841050, "body": "You may want to incorporate (and explain) the primary reason for the failure, the specification of the <i>mode</i> as <code>&quot;r+&quot;</code> which will only open <i>existing</i> files, not <i>create</i> new files. A file is only created if <code>&quot;w+&quot;</code>, <code>&quot;a&quot;</code>, or <code>&quot;a+&quot;</code> is specified as the mode -- then your answer would warrant an upvote. Welcome to S.O."}, {"owner": {"reputation": 26, "user_id": 6654218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba55edc35165213c31e02c83eb92797e?s=128&d=identicon&r=PG&f=1", "display_name": "Mike01", "link": "https://stackoverflow.com/users/6654218/mike01"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1470209189, "post_id": 38731117, "comment_id": 64848966, "body": "Yes, you right i should specify what i wrote, next time i will not commit this error, i am new in stack and thanks for the notice/attention"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1470211244, "post_id": 38731117, "comment_id": 64850109, "body": "Ok then, I&#39;ll keep my end -- on the goal that you are free to plagiarizer my comment to add the explanation to your answer to it will be a fine, teaching example on the subject and worthy of an upvote."}, {"owner": {"reputation": 26, "user_id": 6654218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba55edc35165213c31e02c83eb92797e?s=128&d=identicon&r=PG&f=1", "display_name": "Mike01", "link": "https://stackoverflow.com/users/6654218/mike01"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1470211661, "post_id": 38731117, "comment_id": 64850380, "body": "Ok, thanks for all ;) and sorry for my non-perfect english"}, {"owner": {"reputation": 13, "user_id": 4692080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jih36V1-X54/AAAAAAAAAAI/AAAAAAAAAYM/maDIvyeJl9I/photo.jpg?sz=128", "display_name": "Metin Oktay Y\u0131lmaz", "link": "https://stackoverflow.com/users/4692080/metin-oktay-y%c4%b1lmaz"}, "edited": false, "score": 0, "creation_date": 1470222551, "post_id": 38731117, "comment_id": 64857507, "body": "Thank you both for the help. I couldn&#39;t realize that &#180;opening&#180; a file and  &#180;creating&#180; a file are different things. Though I trust in my English skills, it sometimes fails me badly."}], "tags": [], "owner": {"reputation": 26, "user_id": 6654218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba55edc35165213c31e02c83eb92797e?s=128&d=identicon&r=PG&f=1", "display_name": "Mike01", "link": "https://stackoverflow.com/users/6654218/mike01"}, "is_accepted": true, "score": 1, "last_activity_date": 1470211374, "last_edit_date": 1470211374, "creation_date": 1470174834, "answer_id": 38731117, "question_id": 38730754, "link": "https://stackoverflow.com/questions/38730754/a-simple-text-file-wouldnt-be-created-c-gcc/38731117#38731117", "title": "A simple text file wouldn&#39;t be created [C, GCC]", "body": "<p>The primary reason for the failure was due to the specification of the file <em>mode</em> as <code>\"r+\"</code> which will only open <em>existing files</em>, not <em>create new files</em>. A file is only created if <code>\"w+\", \"a\"</code>, or <code>\"a+\"</code> is specified as the file <em>mode</em>.</p>\n\n<p>check this, if file exists it will be display file already exist, but if the file doesn't exist it will be create it, depend what are you going to do, the ab+ you can just change to w</p>\n\n<pre><code>FILE *fp;\nfp = fopen(\"SIZE.txt\", \"r\");\nif(fp==NULL){\n    fp=fopen(\"SIZE.txt\", \"ab+\");\n    printf(\"File was created\\n\");\n}\nelse{\n    printf(\"File already exists\\n\");\n}\nfclose(fp);\nreturn 0;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4692080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jih36V1-X54/AAAAAAAAAAI/AAAAAAAAAYM/maDIvyeJl9I/photo.jpg?sz=128", "display_name": "Metin Oktay Y\u0131lmaz", "link": "https://stackoverflow.com/users/4692080/metin-oktay-y%c4%b1lmaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "closed_date": 1470216285, "accepted_answer_id": 38731117, "answer_count": 2, "score": -2, "last_activity_date": 1470643945, "creation_date": 1470173246, "last_edit_date": 1470643945, "question_id": 38730754, "link": "https://stackoverflow.com/questions/38730754/a-simple-text-file-wouldnt-be-created-c-gcc", "closed_reason": "Not suitable for this site", "title": "A simple text file wouldn&#39;t be created [C, GCC]", "body": "<p>Below is a simple code that I'm hoping <code>SIZE.txt</code> to be created, then be closed. It compiles without error, nor warning, but file wouldn't be created. However, a segmentation fault is thrown when code is executed.</p>\n\n<p>Thanks for your kind help in advance.</p>\n\n<pre><code>#include \"stdio.h\"\n\nvoid main() {\n    FILE *fp;\n    fp = fopen(\"SIZE.txt\", \"r+\");\n    fclose(fp);\n    return;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "quicksort"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 3, "creation_date": 1470171064, "post_id": 38730104, "comment_id": 64836697, "body": "In <code>scanf</code> use &quot;%c&quot; to read a char."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1470183372, "post_id": 38730104, "comment_id": 64840890, "body": "Unless you just want to play with the quicksort algorithm, you are much better off using <code>qsort</code> from <code>stdlib.h</code>. All you do is write a comparison function and then call <code>qsort</code> passing the array, size, element size, and the comparison function. 5-lines of code."}], "answers": [{"tags": [], "owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "is_accepted": false, "score": 0, "last_activity_date": 1470171383, "creation_date": 1470171383, "answer_id": 38730289, "question_id": 38730104, "link": "https://stackoverflow.com/questions/38730104/get-a-series-of-lower-case-letters-sorted/38730289#38730289", "title": "Get a series of lower case letters sorted", "body": "<p><a href=\"http://linux.die.net/man/3/scanf\" rel=\"nofollow\"><code>scanf</code></a> requires a <code>%c</code> format specifier. Your <code>scanf</code> should change to</p>\n\n<pre><code>scanf(\"%c\", &amp;a[i]);\n</code></pre>\n\n<p>As a result, you should redeclare the <code>a</code> array to <code>char</code>, not <code>int</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1470205348, "post_id": 38730298, "comment_id": 64846985, "body": "why don&#39;t just debug it?"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1470171425, "creation_date": 1470171425, "answer_id": 38730298, "question_id": 38730104, "link": "https://stackoverflow.com/questions/38730104/get-a-series-of-lower-case-letters-sorted/38730298#38730298", "title": "Get a series of lower case letters sorted", "body": "<p>Three issues:</p>\n\n<ol>\n<li><code>a</code> is declared as an array of <code>int</code>, but all your functions handle an array of <code>char</code>.  This means they won't iterate through the array correctly.  Change it to <code>char a[N]</code>.</li>\n<li>To read a character, use the <code>%c</code> format specifier to <code>scanf</code>.</li>\n<li>To print a character, use the <code>%c</code> format specifier to <code>printf</code>.</li>\n</ol>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6669530"}, "edited": false, "score": 0, "creation_date": 1470205510, "post_id": 38735642, "comment_id": 64847077, "body": "looks like there is a problem in the split function since it doesnt show all the letters in the output."}, {"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 0, "creation_date": 1470206432, "post_id": 38735642, "comment_id": 64847553, "body": "@arihanian -- provide an example of input/output where it fails.   I&#39;ve added a usage example to my answer -- are you adding spaces or some such to your input?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6669530"}, "edited": false, "score": 0, "creation_date": 1470207313, "post_id": 38735642, "comment_id": 64848019, "body": "that was bad on my part. the program runs perfectly. this really helps a lot since i am speedrunning the basics of c and i was stuckon the quicksort algorithm"}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 0, "last_activity_date": 1470206371, "last_edit_date": 1470206371, "creation_date": 1470204370, "answer_id": 38735642, "question_id": 38730104, "link": "https://stackoverflow.com/questions/38730104/get-a-series-of-lower-case-letters-sorted/38735642#38735642", "title": "Get a series of lower case letters sorted", "body": "<blockquote>\n  <p>The revised code still doesnt work and i cant seem to find the bug.</p>\n</blockquote>\n\n<p>Your problems appear to be with <code>main()</code> pretty much along the lines that other folks have suggested with respect to using <code>char</code> oriented data instead of <code>int</code>.  There are some non fatal questionable choice issues like using <code>char</code> datatypes for array indexes; <code>quicksort()</code> is declared to return <code>char</code> but returns nothing; and so forth.  Below is a rework of your code, mostly for style, incorporating various folks suggestions:</p>\n\n<pre><code>/* sort a series of letters using quicksort algorithm. */ \n\n#include &lt;stdio.h&gt;\n\n#define N (10)\n\nvoid quicksort(char a[], int low, int high);\nint split(char a[], int low, int high);\n\nint main(void)\n{\n    char a[N];\n\n    printf(\"Enter letters to be sorted: \");\n\n    for (int i = 0; i &lt; N; i++) {\n        scanf(\"%c\", &amp;a[i]);\n    }\n\n    quicksort(a, 0, N - 1);\n\n    printf(\"In sorted order: \");\n\n    for (int i = 0; i &lt; N; i++) {\n        printf(\"%c \", a[i]);\n    }\n    printf(\"\\n\");\n\n    return 0;\n}\n\nvoid quicksort(char a[], int low, int high)\n{\n    if (low &lt; high) {\n        int middle = split(a, low, high);\n        quicksort(a, low, middle - 1);\n        quicksort(a, middle + 1, high);\n    }\n}\n\nint split(char a[], int low, int high)\n{\n    char part_element = a[low];\n\n    for (;;) {\n        while (low &lt; high &amp;&amp; part_element &lt;= a[high]) {\n            high--;\n        }\n        if (low &gt;= high) {\n            break;\n        }\n        a[low++] = a[high];\n\n        while (low &lt; high &amp;&amp; a[low] &lt;= part_element) {\n            low++;\n        }\n        if (low &gt;= high) {\n            break;\n        }\n        a[high--] = a[low];\n    }\n\n    a[high] = part_element;\n\n    return high;\n}\n</code></pre>\n\n<p>Does it not do everything it's supposed to?</p>\n\n<p><strong>EXAMPLE</strong></p>\n\n<pre><code>&gt; ./a.out\nEnter letters to be sorted: aadircslne\nIn sorted order: a a c d e i l n r s \n&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6669530"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 38735642, "answer_count": 3, "score": -2, "last_activity_date": 1470206371, "creation_date": 1470170596, "last_edit_date": 1470171186, "question_id": 38730104, "link": "https://stackoverflow.com/questions/38730104/get-a-series-of-lower-case-letters-sorted", "title": "Get a series of lower case letters sorted", "body": "<p>The algorithm works fine with integers but since I converted them into char, it has been printing null for the output:</p>\n\n<pre><code>/* sort a series of lower case letters using quicksort algorithm. */ \n#include &lt;stdio.h&gt;\n\n#define N 10\n\n// since c gets the ascii code when returning an int for a char variable.\n\nchar quicksort(char a[], char low, char high);\nchar split(char a[], char low, char high);\nint a[N];\n\nint main(void)\n{\n    int i;\n\n    printf(\"Enter  letters to be sorted: \");\n    for (i = 0; i &lt; N; i++)\n        scanf(\"%d\", &amp;a[i]);\n    quicksort(a, 0, N - 1);\n\n    printf(\"In sorted order: \");\n    for (i = 0; i &lt; N; i++)\n        printf(\"%s \", a[i]);\n    printf(\"\\n\");\n\n    return 0;\n}\nchar quicksort(char a[], char low, char high)\n{\n    int middle;\n\n    if (low &gt;= high) return;\n    middle = split(a, low, high);\n    quicksort(a, low, middle - 1);\n    quicksort(a, middle + 1, high);\n}\nchar split(char a[], char low, char high)\n{\n    char part_element = a[low];\n\n    for (;;) {\n        while (low &lt; high &amp;&amp; part_element &lt;= a[high])\n            high--;\n        if (low &gt;= high) break;\n        a[low++] = a[high];\n\n        while (low &lt; high &amp;&amp; a[low] &lt;= part_element)\n            low++;\n        if (low &gt;= high) break;\n        a[high--] = a[low];\n    }\n\n    a[high] = part_element;\n    return high;\n}\n</code></pre>\n"}, {"tags": ["python", "c", "multithreading", "ctypes"], "comments": [{"owner": {"reputation": 3, "user_id": 6496519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83102a3f5795665218e71610481eb5b6?s=128&d=identicon&r=PG&f=1", "display_name": "Unicorn", "link": "https://stackoverflow.com/users/6496519/unicorn"}, "reply_to_user": {"reputation": 412, "user_id": 6647217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d7fadc10442d317bba59360d11fc76?s=128&d=identicon&r=PG&f=1", "display_name": "Munchhausen", "link": "https://stackoverflow.com/users/6647217/munchhausen"}, "edited": false, "score": 0, "creation_date": 1470176071, "post_id": 38730072, "comment_id": 64838946, "body": "I don&#39;t know if I fully understand your question but <code>userInfo</code> is optional so I leave it as <code>None</code> and <code>photoInfo</code> is a structure <code>photoStruct</code> that I need."}, {"owner": {"reputation": 412, "user_id": 6647217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d7fadc10442d317bba59360d11fc76?s=128&d=identicon&r=PG&f=1", "display_name": "Munchhausen", "link": "https://stackoverflow.com/users/6647217/munchhausen"}, "edited": false, "score": 0, "creation_date": 1470176837, "post_id": 38730072, "comment_id": 64839201, "body": "Could you print userInfo and photoInfo in your callback function? Post the result here."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 412, "user_id": 6647217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d7fadc10442d317bba59360d11fc76?s=128&d=identicon&r=PG&f=1", "display_name": "Munchhausen", "link": "https://stackoverflow.com/users/6647217/munchhausen"}, "edited": false, "score": 1, "creation_date": 1470294266, "post_id": 38730072, "comment_id": 64893053, "body": "@Munchhausen OP is correct with <code>None</code> for return type.  <code>void</code> == <code>None</code>, <code>void*</code> == <code>c_void_p</code>."}, {"owner": {"reputation": 3, "user_id": 6496519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83102a3f5795665218e71610481eb5b6?s=128&d=identicon&r=PG&f=1", "display_name": "Unicorn", "link": "https://stackoverflow.com/users/6496519/unicorn"}, "reply_to_user": {"reputation": 412, "user_id": 6647217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d7fadc10442d317bba59360d11fc76?s=128&d=identicon&r=PG&f=1", "display_name": "Munchhausen", "link": "https://stackoverflow.com/users/6647217/munchhausen"}, "edited": false, "score": 0, "creation_date": 1470332856, "post_id": 38730072, "comment_id": 64919745, "body": "@Munchhausen I can&#39;t I tried to print them from _my_callback but nothing happens"}, {"owner": {"reputation": 412, "user_id": 6647217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d7fadc10442d317bba59360d11fc76?s=128&d=identicon&r=PG&f=1", "display_name": "Munchhausen", "link": "https://stackoverflow.com/users/6647217/munchhausen"}, "edited": false, "score": 0, "creation_date": 1470393631, "post_id": 38730072, "comment_id": 64944440, "body": "If nothing is printed, can we conclude that your callback is not called?"}, {"owner": {"reputation": 3, "user_id": 6496519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83102a3f5795665218e71610481eb5b6?s=128&d=identicon&r=PG&f=1", "display_name": "Unicorn", "link": "https://stackoverflow.com/users/6496519/unicorn"}, "reply_to_user": {"reputation": 412, "user_id": 6647217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d7fadc10442d317bba59360d11fc76?s=128&d=identicon&r=PG&f=1", "display_name": "Munchhausen", "link": "https://stackoverflow.com/users/6647217/munchhausen"}, "edited": false, "score": 0, "creation_date": 1470417216, "post_id": 38730072, "comment_id": 64959419, "body": "@Munchhausen yes, I believe it&#39;s not called"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6496519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83102a3f5795665218e71610481eb5b6?s=128&d=identicon&r=PG&f=1", "display_name": "Unicorn", "link": "https://stackoverflow.com/users/6496519/unicorn"}, "edited": false, "score": 0, "creation_date": 1470332185, "post_id": 38761040, "comment_id": 64919372, "body": "Thanks for replying. I still get the same error: not enough memory. The function are stdcall. From lib.h <code>typedef void (__stdcall *callback_type)(void* useInfo, photoStruct* photoInfo);</code>"}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 3, "user_id": 6496519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83102a3f5795665218e71610481eb5b6?s=128&d=identicon&r=PG&f=1", "display_name": "Unicorn", "link": "https://stackoverflow.com/users/6496519/unicorn"}, "edited": false, "score": 0, "creation_date": 1470332595, "post_id": 38761040, "comment_id": 64919593, "body": "@Unicorn This works for me with Python 2 (32-bit) on Windows 10.  Did you compile this exact DLL example and use this exact Python code?  If you used your own DLL, there must be a difference in the function declarations."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 3, "user_id": 6496519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83102a3f5795665218e71610481eb5b6?s=128&d=identicon&r=PG&f=1", "display_name": "Unicorn", "link": "https://stackoverflow.com/users/6496519/unicorn"}, "edited": false, "score": 0, "creation_date": 1470332701, "post_id": 38761040, "comment_id": 64919653, "body": "@Unicorn Also, if using your actual DLL, can you call the same functions with a similar callback in C?  Maybe the API is used incorrectly.  How big is the <code>photoInfo.rawBuffer</code>?  That might be duplicated through ctypes and exceed your virtual memory space in a 32-bit app (if it is 32-bit)."}, {"owner": {"reputation": 3, "user_id": 6496519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83102a3f5795665218e71610481eb5b6?s=128&d=identicon&r=PG&f=1", "display_name": "Unicorn", "link": "https://stackoverflow.com/users/6496519/unicorn"}, "edited": false, "score": 0, "creation_date": 1470333251, "post_id": 38761040, "comment_id": 64919974, "body": "I&#39;m on Windows 7 64bit. I&#39;m going to check that now and post the result. Ps: I added the sample code from the documentation to my question."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 3, "user_id": 6496519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83102a3f5795665218e71610481eb5b6?s=128&d=identicon&r=PG&f=1", "display_name": "Unicorn", "link": "https://stackoverflow.com/users/6496519/unicorn"}, "edited": false, "score": 0, "creation_date": 1470359741, "post_id": 38761040, "comment_id": 64930597, "body": "@Unicorn I built a Python 3 64-bit version of the above code and it works as well (after changing to print <i>function</i>)."}, {"owner": {"reputation": 3, "user_id": 6496519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83102a3f5795665218e71610481eb5b6?s=128&d=identicon&r=PG&f=1", "display_name": "Unicorn", "link": "https://stackoverflow.com/users/6496519/unicorn"}, "edited": false, "score": 0, "creation_date": 1471382577, "post_id": 38761040, "comment_id": 65322107, "body": "Thank you for your help. It helped me realized that the API is used incorrectly!"}], "tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 1, "last_activity_date": 1470295732, "creation_date": 1470295732, "answer_id": 38761040, "question_id": 38730072, "link": "https://stackoverflow.com/questions/38730072/how-to-allocate-memory-to-a-c-callback-function-with-ctypes-and-threading/38761040#38761040", "title": "How to allocate memory to a C callback function with ctypes and threading", "body": "<p>I'm not sure where you went wrong without a complete example.  Did you declare <code>foo.argtypes</code>?  Are you sure the functions are <code>__stdcall</code> for use with <code>WinDLL</code> and <code>WINFUNCTYPE</code>, or are they <code>__cdecl</code> and need <code>CDLL</code> and <code>CFUNCTYPE</code>?</p>\n\n<p>Here's a working example using the following test code for the DLL:</p>\n\n<pre><code>typedef void* HANDLE;\n\ntypedef struct {\n    int value;\n} photoStruct;\n\ntypedef void (__stdcall * callback_type)(void * userInfo, photoStruct* photo);\n\n__declspec(dllexport) int __stdcall foo(HANDLE dev, char port, int queueMode, callback_type fnCallback, void * userInfo)\n{\n    photoStruct p;\n    p.value = 123;\n    fnCallback(userInfo, &amp;p);\n    return 0;\n}\n</code></pre>\n\n<p>Python code:</p>\n\n<pre><code>#!python2\nfrom ctypes import *\nHANDLE = c_void_p\n\nclass photoStruct(Structure):\n    _fields_ = [('value',c_int)]\n    def __repr__(self):\n        return 'photoStruct(value={})'.format(self.value)\n\ncallback_type = WINFUNCTYPE(None,c_void_p,POINTER(photoStruct))\n\n@callback_type\ndef my_callback(userInfo, photo):\n    print userInfo,photo.contents\n\nfoo = WinDLL('test').foo\nfoo.argtypes = (HANDLE,c_char,c_int,callback_type,c_void_p)\nfoo.restype = c_int\n\nfoo(1,'2',3,my_callback,None)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>None photoStruct(value=123)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6496519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83102a3f5795665218e71610481eb5b6?s=128&d=identicon&r=PG&f=1", "display_name": "Unicorn", "link": "https://stackoverflow.com/users/6496519/unicorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 38761040, "answer_count": 1, "score": 0, "last_activity_date": 1470332784, "creation_date": 1470170477, "last_edit_date": 1470332784, "question_id": 38730072, "link": "https://stackoverflow.com/questions/38730072/how-to-allocate-memory-to-a-c-callback-function-with-ctypes-and-threading", "title": "How to allocate memory to a C callback function with ctypes and threading", "body": "<p>I'm currently writing python bindings for a camera software. The commercial SDK only contains the documentation and DLL. I do not have the C code but I'll try to be as clear as possible, so please bear with me. </p>\n\n<p>I have all the library functions working but one: a callback function that acquires the pictures. The documentation only provides the function prototypes:  </p>\n\n<blockquote>\n  <p>foo: Starts image acquisition on specified port. Return error code.</p>\n</blockquote>\n\n<pre><code>int foo(HANDLE dev, char port, int queueMode, callback_type fnCallback, void * userInfo );\n</code></pre>\n\n<blockquote>\n  <p>callback_type: Application-defined callback function that recieves\n  information about acquired frame.</p>\n</blockquote>\n\n<pre><code>void callback_type(void * userInfo, photoStruct* photo);\n</code></pre>\n\n<p>This is my python code after loading the library and wrapping the functions and structures.</p>\n\n<pre><code>callback_type = WINFUNCTYPE(None,c_void_p,POINTER(photoStruct)) \ndef my_callback(userInfo, photoInfo):\n    if(photoInfo.status == 0):\n        #Process incoming photo\n        print \"I'm here\" #for debugging purposes\n        q.put(photoInfo.rawBuffer[:photoInfo.bufferSize])\n        q.task_done()\n_my_callback = callback_type(my_callback)\n</code></pre>\n\n<p>Whenever I try to call foo for the first time:</p>\n\n<pre><code> &gt;&gt;&gt;lib.foo(dev, port, c_int(0), _my_callback, None)\n</code></pre>\n\n<p>I get Error code 4: Not enough memory to perform operation (according to the documentation).\nWhen I call it again (and again), it returns always 0 which is success, but the queue stays empty and it never prints \"I'm here\".</p>\n\n<p>I then tried adding a thread:</p>\n\n<pre><code>ty = threading.Thread(target=lib.foo, args=(dev,port, c_int(0), _my_callback, None))\n&gt;&gt;&gt; ty.start()   \n&gt;&gt;&gt; ty.run() \nline 758, in run\n    del self.__target, self.__args, self.__kwargs  \nAttributeError: _Thread__target\n</code></pre>\n\n<p>I also tried to just not use run() and call the function directly after starting the thread. It doesn't work still.\nI don't really know what is going on here. I am very new to threading and ctypes but my guess is that the library uses its own thread to return the photos and I somehow should allocate memory for this callback function. But how?\nAny solutions/comments would be greatly appreciated. Thank you!</p>\n\n<p><strong>_ Edit: sample code from the documentation _</strong></p>\n\n<pre><code>* \\sample\n* \\code\n* void __stdcall callback_type(void* userInfo, photoStruct* photo)\n* {\n*   // Process incoming photo\n* }\n* ...\n* foo(dev, port, 0, &amp;callback_type, NULL);\n* ...\n* \\endcode\n*/\n</code></pre>\n\n<p>I tried to call foo in Python with</p>\n\n<pre><code>&gt;&gt;&gt;lib.foo(dev, port, c_int(0), byref(_my_callback), None)\n</code></pre>\n\n<p>It stopped the program. </p>\n"}, {"tags": ["c", "visual-c++", "assembly", "nasm", "yasm"], "comments": [{"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1470171996, "post_id": 38729747, "comment_id": 64837192, "body": "You can&#39;t link a DLL to an executable using Microsoft&#39;s tools. You need to use an import library that corresponds to the DLL."}, {"owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1470192323, "post_id": 38729747, "comment_id": 64842890, "body": "@RossRidge I do use the generated import library."}], "answers": [{"comments": [{"owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "edited": false, "score": 0, "creation_date": 1470170747, "post_id": 38729931, "comment_id": 64836555, "body": "Unfortunately more than just a few functions, making <code>&#47;EXPORT</code> unfeasible. Can I combine an already created .lib to link the dll with another create via the def file?"}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "reply_to_user": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "edited": false, "score": 0, "creation_date": 1470171804, "post_id": 38729931, "comment_id": 64837108, "body": "Yes, DEF file is just a list of functions that you wish to export (plus some extra info). It doesn&#39;t affect functionality of resulting binaries. And of course you should check that functions appear at export table with <code>dumpbin</code>."}, {"owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "edited": false, "score": 0, "creation_date": 1470194692, "post_id": 38729931, "comment_id": 64843424, "body": "While this works, it&#39;s unfortunately only half a solution. I can&#39;t add every symbol by hand to my build flags or the def file."}, {"owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "reply_to_user": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "edited": false, "score": 0, "creation_date": 1470201129, "post_id": 38729931, "comment_id": 64845195, "body": "Why so? It shouldn&#39;t be more difficult than  adding dllexport specifier to each functions in source code."}, {"owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "edited": false, "score": 0, "creation_date": 1470203437, "post_id": 38729931, "comment_id": 64846117, "body": "It is more difficult. Requires special treatment in my makefiles, which is a pain to maintain since I have hundreds of functions I have to export."}], "tags": [], "owner": {"reputation": 7617, "user_id": 2878070, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42b5fba5761d7e519d05b642be0b2e14?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/2878070/sergio"}, "is_accepted": true, "score": 2, "last_activity_date": 1470169880, "creation_date": 1470169880, "answer_id": 38729931, "question_id": 38729747, "link": "https://stackoverflow.com/questions/38729747/unresolved-reference-when-linking-compiled-code-with-nasm-and-msvc/38729931#38729931", "title": "Unresolved Reference when linking compiled code with NASM and MSVC", "body": "<p>As you see the problem is that DLL doesn't expose required symbol. <code>__declspec(dllexport)</code> is not the only way to export your symbols. If you have a few exported names you can use <a href=\"https://msdn.microsoft.com/en-us/library/7k30y2k5.aspx\" rel=\"nofollow\"><code>/EXPORT</code></a> linker switch. Another alternative is to use <a href=\"https://msdn.microsoft.com/en-us/library/d91k01sh.aspx\" rel=\"nofollow\">Module-Definition</a> file.</p>\n"}], "owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 1, "accepted_answer_id": 38729931, "answer_count": 1, "score": 2, "last_activity_date": 1470169880, "creation_date": 1470169232, "last_edit_date": 1470169737, "question_id": 38729747, "link": "https://stackoverflow.com/questions/38729747/unresolved-reference-when-linking-compiled-code-with-nasm-and-msvc", "title": "Unresolved Reference when linking compiled code with NASM and MSVC", "body": "<p>I'm trying to combine assembly (compiled with <code>yasm</code>) with objects compiled by <code>msvc</code>/<code>cl.exe</code>, which I'm trying to link (with <code>link.exe</code>) into a <code>.dll</code>, which is then linked to the final executable.</p>\n\n<p>Both creating the object files from source, and creating the dll from these objects works absolutely fine.</p>\n\n<p>In the last step, linking the <code>.dll</code> with the executable spits out following errors:</p>\n\n<pre><code> error LNK2019: unresolved external symbol xxx_xxxx\n</code></pre>\n\n<p>I'm using C. Despite Win64 having no name mangling, I tried multiple schemes (like <code>_xxx_xxxx</code> or <code>__imp_xxx_xxxx</code>).</p>\n\n<p>Examining the object file with <code>dumpbin.exe</code> reveals all symbols:</p>\n\n<pre><code>$ dumpbin /symbols myobj.o\nFile Type: COFF OBJECT\n\nCOFF SYMBOL TABLE\n000 00000000 DEBUG  notype       Filename     | .file\n\n002 00000000 SECT1  notype       Static       | .text\nSection length  215, #relocs    0, #linenums    0, checksum        0\n004 00000057 SECT1  notype       External     | xxx_xxxx\n005 0000013E SECT1  notype       External     | xxx_xxxx\n006 00000000 SECT1  notype       External     | xxx_xxxx\n</code></pre>\n\n<p>But not in the exported symbols from the <code>.dll</code>:</p>\n\n<pre><code>$ dumpbin /exported mylib.dll\nFile Type: DLL\n\n  Section contains the following exports for mylib.dll\n\n    00000000 characteristics\n    57A0FE02 time date stamp Tue Aug 02 22:09:38 2016\n        0.00 version\n           1 ordinal base\n         132 number of functions\n         132 number of names\n\n [...]\n</code></pre>\n\n<p>Even though I have marked the declarations as exported inside the <code>.dll</code> by using <code>__declspec(dllexport)</code>.</p>\n\n<p>Any ideas how to satisfy the linker and tell him the symbols are indeed there?</p>\n"}, {"tags": ["c", "arrays", "struct", "arduino", "typedef"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1470169105, "post_id": 38729657, "comment_id": 64835664, "body": "I feel that there are some braces missing. You really should format your arrays properly."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470169165, "post_id": 38729657, "comment_id": 64835695, "body": "The workaround is not just ugly, but very bad practice. Never use <code>void *</code> unless it is the only and best way (it most times is none)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1470169186, "post_id": 38729657, "comment_id": 64835707, "body": "And again: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> missing. Next!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1470169290, "post_id": 38729657, "comment_id": 64835767, "body": "The workaround should be unnecessary.  But we can&#39;t see why your code makes it necessary \u2014 you&#39;ve not shown us a fragment that produces just the error you show.  You need to show us code that when copied and pasted into a source file will reproduce the error you see."}, {"owner": {"reputation": 473, "user_id": 3469596, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a8745c4580194f358a4d6db09be80f36?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Solovyov", "link": "https://stackoverflow.com/users/3469596/andrey-solovyov"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1470169568, "post_id": 38729657, "comment_id": 64835902, "body": "@Olaf the string void tt_drawFigure(tt_figure figure) { ... } exactly follows the rule from your example. Still no luck."}, {"owner": {"reputation": 473, "user_id": 3469596, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a8745c4580194f358a4d6db09be80f36?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Solovyov", "link": "https://stackoverflow.com/users/3469596/andrey-solovyov"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1470169610, "post_id": 38729657, "comment_id": 64835925, "body": "@EugeneSh. The array is formatted properly, no braces are missed. I have a running project on a board."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1470169650, "post_id": 38729657, "comment_id": 64835947, "body": "Are you sure you have <code>typedef tt_point tt_figure[4][4];</code> and not <code>typedef struct tt_point tt_figure[4][4];</code> ?"}, {"owner": {"reputation": 473, "user_id": 3469596, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a8745c4580194f358a4d6db09be80f36?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Solovyov", "link": "https://stackoverflow.com/users/3469596/andrey-solovyov"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1470169803, "post_id": 38729657, "comment_id": 64836017, "body": "@dbush yes, I have typedef tt_point tt_figure[4][4]"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1470169942, "post_id": 38729657, "comment_id": 64836088, "body": "<code>try.c:7:9: error: unknown type name \u2018tt_point\u2019</code>"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1470174426, "last_edit_date": 1470174426, "creation_date": 1470169916, "answer_id": 38729941, "question_id": 38729657, "link": "https://stackoverflow.com/questions/38729657/passing-typedefed-two-dimensional-array-of-structs-as-function-argument/38729941#38729941", "title": "Passing typedefed two-dimensional array of structs as function argument", "body": "<p>This is not syntactically correct:</p>\n\n<pre><code>typedef tt_point tt_figure[4][4];\n</code></pre>\n\n<p>Unless you previously created a <code>typedef</code> for <code>tt_point</code>, this will fail to compile.  What you want is this:</p>\n\n<pre><code>typedef struct tt_point tt_figure[4][4];\n</code></pre>\n\n<p>The <code>struct</code> keyword is required anywhere the struct type is used.  If you do this, the example code compiles cleanly.</p>\n"}, {"comments": [{"owner": {"reputation": 473, "user_id": 3469596, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a8745c4580194f358a4d6db09be80f36?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Solovyov", "link": "https://stackoverflow.com/users/3469596/andrey-solovyov"}, "edited": false, "score": 0, "creation_date": 1470171181, "post_id": 38730032, "comment_id": 64836773, "body": "Thank you. The problem was I forgot the prototype(?) of a function:  <code>typedef struct tt_point tt_figure[4][4]; void tt_drawFigure(tt_figure figure);</code>  Adding <code>void tt_drawFigure(tt_figure figure);</code> did the trick."}, {"owner": {"reputation": 473, "user_id": 3469596, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a8745c4580194f358a4d6db09be80f36?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Solovyov", "link": "https://stackoverflow.com/users/3469596/andrey-solovyov"}, "edited": false, "score": 0, "creation_date": 1470171336, "post_id": 38730032, "comment_id": 64836855, "body": "I found that the keyword <code>struct</code> was unnecessary. Even <code>typedef tt_point tt_figure[4][4];</code> compiles fine (Maybe some arduino-flavour of C?)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 473, "user_id": 3469596, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a8745c4580194f358a4d6db09be80f36?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Solovyov", "link": "https://stackoverflow.com/users/3469596/andrey-solovyov"}, "edited": false, "score": 0, "creation_date": 1470171961, "post_id": 38730032, "comment_id": 64837178, "body": "@AndreySolovyov Are you using C++?"}, {"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "edited": false, "score": 0, "creation_date": 1470171969, "post_id": 38730032, "comment_id": 64837181, "body": "well, the <code>struct</code> keyword is necessary - unluess you have typedef&#39;d tt_point before. Which compliler are you using."}, {"owner": {"reputation": 473, "user_id": 3469596, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a8745c4580194f358a4d6db09be80f36?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Solovyov", "link": "https://stackoverflow.com/users/3469596/andrey-solovyov"}, "edited": false, "score": 0, "creation_date": 1470172122, "post_id": 38730032, "comment_id": 64837260, "body": "@sps, melpomene: shame on me, but I do not know. I am using that green default arduino ide."}, {"owner": {"reputation": 473, "user_id": 3469596, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a8745c4580194f358a4d6db09be80f36?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Solovyov", "link": "https://stackoverflow.com/users/3469596/andrey-solovyov"}, "edited": false, "score": 0, "creation_date": 1470173309, "post_id": 38730032, "comment_id": 64837788, "body": "@sps Could you also please explain, why when I access array&#39;s elements even by hardcoded indices, I got them in reverse order? <code>figure[0]</code>, <code>figure[1]</code>, <code>figure[2]</code>, <code>figure[3]</code> gives me last, third, second and first elements respectively."}, {"owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "edited": false, "score": 0, "creation_date": 1470178106, "post_id": 38730032, "comment_id": 64839622, "body": "its not clear what you are saying. I think its better if you ask a new question for your new issue, as more people will look into it. If you insist on continuing this comment, please explain your problem more clearly."}], "tags": [], "owner": {"reputation": 2630, "user_id": 4065269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/90c9cd69a6663c31758d6cd6043dfcc3?s=128&d=identicon&r=PG&f=1", "display_name": "sps", "link": "https://stackoverflow.com/users/4065269/sps"}, "is_accepted": true, "score": 1, "last_activity_date": 1470174578, "last_edit_date": 1470174578, "creation_date": 1470170307, "answer_id": 38730032, "question_id": 38729657, "link": "https://stackoverflow.com/questions/38729657/passing-typedefed-two-dimensional-array-of-structs-as-function-argument/38730032#38730032", "title": "Passing typedefed two-dimensional array of structs as function argument", "body": "<p>Your code compiles if you change:</p>\n\n<p><code>typedef tt_point tt_figure[4][4];</code> to </p>\n\n<p><code>typedef struct tt_point tt_figure[4][4];</code>. </p>\n\n<p>For example this code below compiles and runs fine.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nstruct tt_point\n{\n    int x;\n    int y;\n};\n\n/* typedef tt_point tt_figure[4][4]; /*  /* Issue here */\ntypedef struct tt_point tt_figure[4][4]; /* add `struct' to typedef */\n\nvoid tt_drawFigure(tt_figure figure);\n\ntt_figure tt_T = { {{0,0}, {0,1}, {0,2}, {1,1}},\n                   {{0,1}, {1,0}, {1,1},{2,1}},\n                   {{0,1}, {1,0}, {1,1},{1,2}},\n                   {{0,0}, {1,0},{1,1}, {2,0}}\n                 };\n\nint main(void)\n{\n    tt_drawFigure(tt_T);\n    return 0;\n}\n\nvoid tt_drawFigure(tt_figure figure)\n{ \n    int i, j;\n\n    for (i = 0; i &lt; 4; i++) {\n            for (j = 0; j &lt; 4; j++)\n                    printf(\"%d, %d --- \", figure[i][j].x, figure[i][j].y);\n            printf(\"\\n\");\n    }\n    /* Do your drawing */\n}\n</code></pre>\n\n<hr>\n\n<p>You can also do </p>\n\n<pre><code>typedef struct tt_point\n{\n    int x;\n    int y;\n} tt_figure[4][4];\n</code></pre>\n\n<p>so that you don't accidentally miss <code>struct</code> - like you missed when you did a <code>typedef</code> separately.</p>\n"}], "owner": {"reputation": 473, "user_id": 3469596, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a8745c4580194f358a4d6db09be80f36?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Solovyov", "link": "https://stackoverflow.com/users/3469596/andrey-solovyov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "closed_date": 1470208052, "accepted_answer_id": 38730032, "answer_count": 2, "score": -1, "last_activity_date": 1470174578, "creation_date": 1470168889, "last_edit_date": 1470172993, "question_id": 38729657, "link": "https://stackoverflow.com/questions/38729657/passing-typedefed-two-dimensional-array-of-structs-as-function-argument", "closed_reason": "Not suitable for this site", "title": "Passing typedefed two-dimensional array of structs as function argument", "body": "<p>TL;DR;\nThe problem was I forgot to write a prototype for a function. Adding this fixed the issue:</p>\n\n<pre><code>void tt_drawFigure(tt_figure figure);\n</code></pre>\n\n<p>Full text:</p>\n\n<p>I write a tetris clone for Arduino.\nIn my implementation, I have a <code>struct</code> representing a point on screen:</p>\n\n<pre><code>struct tt_point\n{\n  int x;\n  int y;\n};\n</code></pre>\n\n<p>Each figure is an array of its rotation 'snaphots' or 'frames'. Each frame is an array of <code>tt_points</code>, which makes a figure a two-dimensional array of <code>tt_points</code> (you may find it ugly, but the question is not about design).</p>\n\n<p>I'd like to typedef this two dimensional array and pass it to a function. Here is the typedef I have:</p>\n\n<pre><code>typedef tt_point tt_figure[4][4];\n</code></pre>\n\n<p>And a 'T' figure:</p>\n\n<pre><code>tt_figure tt_T = {\n    {{0,0}, {0,1}, {0,2},\n            {1,1}},\n\n           {{0,1}, \n     {1,0}, {1,1},\n            {2,1}},\n\n           {{0,1}, \n     {1,0}, {1,1}, {1,2}},\n\n    {{0,0}, \n     {1,0}, {1,1},\n     {2,0}}\n    };\n</code></pre>\n\n<p>Problems begin when I try to pass a figure to a function:</p>\n\n<pre><code>void tt_drawFigure(tt_figure figure) { ... }\n</code></pre>\n\n<p>The error is:</p>\n\n<pre><code>Tetris:20: error: variable or field 'tt_drawFigure' declared void\nTetris:20: error: 'tt_figure' was not declared in this scope\n</code></pre>\n\n<p>How should I rewrite the declaration to pass a <code>tt_figure</code> to a function?</p>\n\n<p>P.S. I made it working by declaring a figure as <code>void*</code> and then casting to 4x4 array:</p>\n\n<pre><code>void tt_drawFigure(void* figure)\n{\n  tt_point * fig = ((tt_point(*)[4]) figure)[frame_index];\n  ...\n}\n</code></pre>\n\n<p>But there should be a nicer way.</p>\n\n<p>UPDATE.\nThe code you can copy, paste and try to compile:</p>\n\n<pre><code>struct tt_point\n{\n  int x;\n  int y;\n};\n\ntypedef tt_point tt_figure[4][4];\n\ntt_figure tt_T = {\n{{0,0}, {0,1}, {0,2},\n        {1,1}},\n\n       {{0,1}, \n {1,0}, {1,1},\n        {2,1}},\n\n       {{0,1}, \n {1,0}, {1,1}, {1,2}},\n\n{{0,0}, \n {1,0}, {1,1},\n {2,0}}\n};\n\n\nvoid setup()\n{\n\n}\n\n\nvoid loop()\n{\n\n}\n\nvoid tt_drawFigure(tt_figure figure)\n{\n\n}\n</code></pre>\n"}]