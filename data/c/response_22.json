[{"tags": ["c++", "c", "pointers", "segmentation-fault", "binary-search-tree"], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1433980984, "post_id": 30769111, "comment_id": 49590672, "body": "Not sufficient:  the crash moves down but bites again: <code>do { temp = x;  x = x-&gt;prev; ...</code>.  Another illustration of how <code>do &#47; while</code> loops are mostly broken."}, {"owner": {"reputation": 13, "user_id": 4996949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a6f9bcf936d2f89160e8bf92416a965?s=128&d=identicon&r=PG&f=1", "display_name": "Arattor", "link": "https://stackoverflow.com/users/4996949/arattor"}, "edited": false, "score": 0, "creation_date": 1434064425, "post_id": 30769111, "comment_id": 49635203, "body": "Thanks for the help. In the end I&#39;ve added the &#39;x != NULL&#39; into the first &#39;if()&#39; and put the &#39;do...while&#39; loop into an &#39;if(x)&#39; statement and it fixed all the issued."}], "tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": true, "score": 0, "last_activity_date": 1433979308, "creation_date": 1433979308, "answer_id": 30769111, "question_id": 30769086, "link": "https://stackoverflow.com/questions/30769086/segmentation-fault-when-using-if-statement-with-pointers-bst-tree/30769111#30769111", "title": "Segmentation fault when using if statement with pointers (BST tree)", "body": "<p>Since <code>searchSpecific</code> may return <code>NULL</code>, you need to protect your code from it, and check <code>x</code> before accessing one of its members:</p>\n\n<pre><code>tree *x=searchSpecific(root,f);\nif (x != NULL &amp;&amp; x-&gt;left)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 4996949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a6f9bcf936d2f89160e8bf92416a965?s=128&d=identicon&r=PG&f=1", "display_name": "Arattor", "link": "https://stackoverflow.com/users/4996949/arattor"}, "edited": false, "score": 0, "creation_date": 1434066558, "post_id": 30772039, "comment_id": 49635804, "body": "Thank you for your hints. Like I said in the other comment I&#39;ve added an &#39;if(x)&#39; statement around the &#39;do...while&#39; loop and the &#39;x != NULL&#39; into the already existing &#39;if(()&#39;. I&#39;ll make sure to remember about the dynamic allocation :)."}], "tags": [], "owner": {"reputation": 3696, "user_id": 3475279, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8SY68.jpg?s=128&g=1", "display_name": "Arial", "link": "https://stackoverflow.com/users/3475279/arial"}, "is_accepted": false, "score": 0, "last_activity_date": 1433999359, "creation_date": 1433999359, "answer_id": 30772039, "question_id": 30769086, "link": "https://stackoverflow.com/questions/30769086/segmentation-fault-when-using-if-statement-with-pointers-bst-tree/30772039#30772039", "title": "Segmentation fault when using if statement with pointers (BST tree)", "body": "<p>The segmentation fault can appear due to several reasons, such as:</p>\n\n<ul>\n<li>x is undefined, which may be caused by your *searchSpecific function</li>\n<li>x is NULL, because your function returns a NULL pointer </li>\n<li>x->left is NULL, which means trying to access it causes something bad to happen</li>\n</ul>\n\n<p>So, how I'll go about doing this would be trying to check if the returned tree is null using a simple if statement as follows:</p>\n\n<pre><code>if (x == NULL) {\n    /* throw error or not found message */\n}\n</code></pre>\n\n<p>I would also suggest you dynamically allocate memory for your tree before doing anything with it, by creating a reusable func like create_tree() with the following code: </p>\n\n<pre><code>tree create_tree(int data) {\n    tree *x;\n    x = malloc(sizeof(tree));\n    x-&gt;a = data;\n    x-&gt;left = x-&gt;right = x-&gt;prev = NULL;\n    return x;\n}\n</code></pre>\n\n<p>Why? Note that in your code snippets, you just declare </p>\n\n<pre><code> tree *some_tree_name;\n</code></pre>\n\n<p>which is very dangerous every time you try to do something with it, and might lead to your code crashing on you on the do/while loop later.</p>\n"}], "owner": {"reputation": 13, "user_id": 4996949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a6f9bcf936d2f89160e8bf92416a965?s=128&d=identicon&r=PG&f=1", "display_name": "Arattor", "link": "https://stackoverflow.com/users/4996949/arattor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 30769111, "answer_count": 2, "score": 1, "last_activity_date": 1433999359, "creation_date": 1433979156, "last_edit_date": 1433984897, "question_id": 30769086, "link": "https://stackoverflow.com/questions/30769086/segmentation-fault-when-using-if-statement-with-pointers-bst-tree", "title": "Segmentation fault when using if statement with pointers (BST tree)", "body": "<p>I'm trying to implement a binary search tree in C, more specifically looking for the predecessor. However, whenever I try to run the program I get the segmentation vault. Here's the code in question:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#include &lt;stdio.h&gt;\r\n#include &lt;stdlib.h&gt;\r\n\r\nstruct tree\r\n{\r\n    int a;\r\n    tree *left;\r\n    tree *right;\r\n    tree *prev;\r\n}*root=NULL;\r\n\r\ntree *searchSpecific (tree *root, int val)\r\n{\r\n    tree *x=root;\r\n    if (!x)\r\n    {\r\n        return NULL;\r\n    }\r\n    else\r\n    {\r\n        while(x &amp;&amp; val!=x-&gt;a)\r\n        {\r\n            if (val&gt;x-&gt;a)\r\n                x=x-&gt;left;\r\n            else x=x-&gt;right;\r\n        }\r\n    }\r\n    return x;\r\n}\r\n\r\nint previous(tree *root, int f)\r\n{\r\n tree *x=searchSpecific(root,f);\r\n    if(x-&gt;left)\r\n    {\r\n        x=x-&gt;left;\r\n        while(x-&gt;right) x = x-&gt;right;\r\n        return x-&gt;a;\r\n    }\r\n\r\n    tree *temp;\r\n    do\r\n    {\r\n        temp = x;\r\n        x = x-&gt;prev;\r\n    } while(x &amp;&amp; (x-&gt;right != temp));\r\n    return x-&gt;a;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The segfault appears at the if statement if(x->left) in the previous() function. I want to check if the node in question exists, but the program crashes every time and I have no idea what is wrong with it..</p>\n"}, {"tags": ["c", "pointers", "struct", "scanf", "typedef"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 4, "creation_date": 1433978011, "post_id": 30768875, "comment_id": 49589814, "body": "<code>int *year;</code> --&gt; <code>int year;</code> then <code>scanf(&quot;%d&quot;, &amp;car1.year);</code> I think that  it&#39;s no reason for holding one  Integer by pointer."}], "answers": [{"tags": [], "owner": {"reputation": 419, "user_id": 3588882, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3c7f985ab34574286b7f67f5b5bcffb9?s=128&d=identicon&r=PG&f=1", "display_name": "pantelis300", "link": "https://stackoverflow.com/users/3588882/pantelis300"}, "is_accepted": false, "score": 4, "last_activity_date": 1433979470, "creation_date": 1433979470, "answer_id": 30769136, "question_id": 30768875, "link": "https://stackoverflow.com/questions/30768875/pointers-within-structures/30769136#30769136", "title": "Pointers within structures", "body": "<p>In this structure you shouldn't declare pointers, but variables</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct car\n{\n    int transmission;\n    int year;\n    char color[15];\n};\n\nint main()\n{\n    struct car car1;\n    printf(\"Enter M Year of car: \");\n    scanf(\"%d\", &amp;car1.year);\n\n    printf(\"\\nThe year of the car is: %d\", car1.year); \n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 114, "user_id": 4986476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XJzyU.jpg?s=128&g=1", "display_name": "Horacio", "link": "https://stackoverflow.com/users/4986476/horacio"}, "is_accepted": false, "score": 1, "last_activity_date": 1433980418, "creation_date": 1433980418, "answer_id": 30769291, "question_id": 30768875, "link": "https://stackoverflow.com/questions/30768875/pointers-within-structures/30769291#30769291", "title": "Pointers within structures", "body": "<p>The problem is that you have not intialized the pointers in your struct with the address of any actual int variables, so they contain garbage.</p>\n\n<p>On the other hand, the color variable is a pointer that DOES point to the first of the 15 chars, therefore you don\u00b4t have to pass its address to scanf(), but just its value so that the function can store there the chars read.</p>\n\n<p>Try someting like this:</p>\n\n<pre><code>int aYear, aTransmission;\nCAR car1;\n\ncar1.year = &amp;aYear;\ncar1.transmission = &amp;aTransmission;\n\nprintf(\"Enter M Year of car : \");\nscanf(\"%d\",car1.year);\nprintf(\"Enter color of car : \");\nscanf(\"%s\",car1.color); /* color IS a pointer */\nprintf(\"Enter transmission type of car (1 for manual &amp; 2 for auto): \");\nscanf(\"%d\",car1.transmission);\n</code></pre>\n\n<p>This code will store the values into the extern variables aYear and aTransmission, which are pointed by the pointers into the struct.</p>\n"}], "owner": {"reputation": 161, "user_id": 1633837, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/068724ee15bd326a6dcbf43ad65c540e?s=128&d=identicon&r=PG", "display_name": "Ishan", "link": "https://stackoverflow.com/users/1633837/ishan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1433980418, "creation_date": 1433977875, "question_id": 30768875, "link": "https://stackoverflow.com/questions/30768875/pointers-within-structures", "title": "Pointers within structures", "body": "<p>I am new to c language and I tried to create a structure. so here is the my structure.</p>\n\n<pre><code>typedef struct car{\n    int *transmission;\n    int *year;\n    char color[15];\n}CAR;\n</code></pre>\n\n<p>Then I tried to insert the values to the structure variables using below code,</p>\n\n<pre><code>printf(\"Enter M Year of car : \");\nscanf(\"%d\",car1.year);\nprintf(\"Enter color of car : \");\nscanf(\"%s\",&amp;car1.color);\nprintf(\"Enter transmission type of car (1 for manual &amp; 2 for auto): \");\nscanf(\"%d\",car1.transmission); \n</code></pre>\n\n<p>But, it returns an error. pls help me to resolve the issue. </p>\n"}, {"tags": ["c", "debugging", "prompt", "freeze"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1433976101, "post_id": 30768510, "comment_id": 49589148, "body": "Are you seriously trying to allocate an array of <code>INT_MAX</code> bytes <i>on the stack</i>?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1433976197, "post_id": 30768510, "comment_id": 49589174, "body": "<code>char filename1[INT_MAX]</code> --&gt; <code>char filename1[FILENAME_MAX]</code>"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1433976206, "post_id": 30768510, "comment_id": 49589178, "body": "As a followup to to @EOF, I would be surprised if that even ran.  There are better ways to make things safe from buffer overruns than blowing up the stack yourself with those arrays,"}], "answers": [{"comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1433976281, "post_id": 30768534, "comment_id": 49589210, "body": "256 as a max leaves room for buffer overflows.  This may be a different issue to address later though, depending on if this is homework or not."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1433976918, "post_id": 30768534, "comment_id": 49589442, "body": "I&#39;ve added a safe allocation method to address this.  Thanks."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433978075, "post_id": 30768534, "comment_id": 49589835, "body": "Note: Initializing <code>char *str = NULL;</code> useful to cope with <code>scanf(&quot;%ms&quot;, &amp;str); free(str);</code> that failed to scan anything."}], "tags": [], "owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "is_accepted": false, "score": 4, "last_activity_date": 1433976897, "last_edit_date": 1495539820, "creation_date": 1433976039, "answer_id": 30768534, "question_id": 30768510, "link": "https://stackoverflow.com/questions/30768510/whats-wrong-with-my-decoder-why-does-it-freeze-after-prompting-the-user/30768534#30768534", "title": "What&#39;s wrong with my decoder? Why does it freeze after prompting the user?", "body": "<p>There may be other problems but the first one is here:</p>\n\n<pre><code>scanf(\"%c\", prompt);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>scanf(\"%c\", &amp;prompt);\n</code></pre>\n\n<p>See full function definition and example <a href=\"http://www.cplusplus.com/reference/cstdio/scanf/\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Also,</p>\n\n<pre><code>char filename1[INT_MAX], filename2[INT_MAX];\n</code></pre>\n\n<p>There's no way that this is a good idea.  Either allocate dynamically or at least use a more reasonable number for a filename.  256 should be plenty for a filename.  If you're really worried about a buffer overflow in your homework assignment, you can use a technique mentioned <a href=\"https://stackoverflow.com/a/16043903/951784\">here</a> to properly allocate memory for an input string (as long as you're using a GNU compiler):</p>\n\n<pre><code>char *str;\nprintf(\"Enter your filename:\\n\");\nscanf(\"%ms\", &amp;str);\n\nprintf(\"Hello %s!\\n\", str);\nfree(str);\n</code></pre>\n\n<p>The %m will automatically allocate a string of proper size, avoiding buffer overflows.</p>\n\n<p>This one is just for readability:</p>\n\n<pre><code>    switch (prompt) {\n    case 'e':\n        encode(fp1, fp2);\n        break;\n    case 'E':\n        encode(fp1, fp2);\n        break;\n    case 'd':\n        decode(fp1, fp2);\n        break;\n    case 'D':\n        decode(fp1, fp2);\n        break;\n    default:\n        break;\n}\n</code></pre>\n\n<p>Can be condensed down to:</p>\n\n<pre><code>switch (prompt) {\n    case 'e':\n    case 'E':\n        encode(fp1, fp2);\n        break;\n    case 'd':\n    case 'D':\n        decode(fp1, fp2);\n        break;\n    default:\n        break;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1433976858, "post_id": 30768648, "comment_id": 49589425, "body": "It is more likely that the OP does NOT need to allocate <code>2147483647</code> characters. Second -- <b>do NOT cast the return of <code>malloc</code></b>."}, {"owner": {"reputation": 1498, "user_id": 2797746, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/TaPVN.jpg?s=128&g=1", "display_name": "Alexandre Severino", "link": "https://stackoverflow.com/users/2797746/alexandre-severino"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1433977213, "post_id": 30768648, "comment_id": 49589536, "body": "@DavidC.Rankin Well. Casting the <code>malloc</code> allows for better compatibility with <code>C++</code>. If you are using pure C and not a <b>C++ compiler</b> then I completely agree with you. I&#39;ll edit the answer, nevertheless. But I warn the OP that the <code>malloc</code> won&#39;t work on <b>C++ compilers</b> (at least not <b>MSDN</b>) without a cast."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 0, "creation_date": 1433977340, "post_id": 30768648, "comment_id": 49589587, "body": "@AlexandreSeverino: casting malloc in C may result in the compiler hiding a warning which could cause crashes: <a href=\"http://stackoverflow.com/a/605858/951784\">stackoverflow.com/a/605858/951784</a>"}, {"owner": {"reputation": 1498, "user_id": 2797746, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/TaPVN.jpg?s=128&g=1", "display_name": "Alexandre Severino", "link": "https://stackoverflow.com/users/2797746/alexandre-severino"}, "edited": false, "score": 1, "creation_date": 1433977531, "post_id": 30768648, "comment_id": 49589658, "body": "Agreed, but the OP should be also warned that: &quot;True. However, in C++ the cast is required, so if you want your code to work in both, you&#39;ll have to compromise. But in pure C, don&#39;t do the cast for the reasons you stated. \u2013  jalf Mar 3 &#39;09 at 10:36&quot;"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1433978046, "post_id": 30768648, "comment_id": 49589824, "body": "The point being -- do you see a <code>C++</code> tag attached to the question? I understand what you are saying about <code>C++</code>, but it doesn&#39;t belong in answer to a <code>C</code> tagged question.  You edit is fine, but may still be a bit bewildering to others."}, {"owner": {"reputation": 1498, "user_id": 2797746, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/TaPVN.jpg?s=128&g=1", "display_name": "Alexandre Severino", "link": "https://stackoverflow.com/users/2797746/alexandre-severino"}, "edited": false, "score": 1, "creation_date": 1433978188, "post_id": 30768648, "comment_id": 49589869, "body": "I do that mostly because new programmers will most likely use popular compilers (which are all C++) and won&#39;t get why the code does not compile. But, if you guys think that my edit do not attend the community constraints for tags, there we go with another edit."}], "tags": [], "owner": {"reputation": 1498, "user_id": 2797746, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/TaPVN.jpg?s=128&g=1", "display_name": "Alexandre Severino", "link": "https://stackoverflow.com/users/2797746/alexandre-severino"}, "is_accepted": false, "score": 1, "last_activity_date": 1433978198, "last_edit_date": 1433978198, "creation_date": 1433976588, "answer_id": 30768648, "question_id": 30768510, "link": "https://stackoverflow.com/questions/30768510/whats-wrong-with-my-decoder-why-does-it-freeze-after-prompting-the-user/30768648#30768648", "title": "What&#39;s wrong with my decoder? Why does it freeze after prompting the user?", "body": "<p><strong>First</strong>:</p>\n\n<p><code>scanf</code> should have a <strong>reference</strong> to a <code>char</code> address for its second parameter. You are passing its <strong>value</strong> instead. rost0031 mentions that on his answer.</p>\n\n<p><strong>Second</strong>:</p>\n\n<p>you'll very likely receive a <strong>Stack Overflow</strong> from instantiating big arrays of <code>char</code> on the stack. So do like this instead:</p>\n\n<pre><code>char* filename1 = malloc(INT_MAX);\nchar *filename2 = malloc(INT_MAX);\n</code></pre>\n\n<p>In case you don't know what a <code>malloc</code> does, it basically <strong>dynamically allocates</strong> memory on the <strong>Heap</strong> (which is much more resourceful than the <strong>Stack</strong>).\nThese kind of allocation require that you <code>free</code> the memory after you are finished using them (otherwise you'll get <strong>memory leaks</strong>):</p>\n\n<pre><code>free(filename1);\nfree(filename2);\n</code></pre>\n\n<p><strong>Third</strong>:</p>\n\n<p>Your <code>decode</code> and <code>encode</code> functions do not need to return <code>int</code>, since you are not returning anything useful and your calls do not expect a result. You can make them <code>void</code> and remove the <code>return 0;</code> before the end of the scope:</p>\n\n<pre><code>void decode(FILE * fp1, FILE * fp2);\nvoid encode(FILE * fp1, FILE * fp2);\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 4515477, "user_type": "registered", "accept_rate": 41, "profile_image": "https://graph.facebook.com/1740263376/picture?type=large", "display_name": "Christiana S. F. Chamon", "link": "https://stackoverflow.com/users/4515477/christiana-s-f-chamon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1433978198, "creation_date": 1433975891, "question_id": 30768510, "link": "https://stackoverflow.com/questions/30768510/whats-wrong-with-my-decoder-why-does-it-freeze-after-prompting-the-user", "title": "What&#39;s wrong with my decoder? Why does it freeze after prompting the user?", "body": "<p>The goal is to prompt the user to either encode an input file and write the code to an output file or decode an input file and write the message to an output file. Whenever I run the program, although it compiles, it stops responding as soon as the prompt character is entered.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;string.h&gt;\n\nint encode(FILE * fp1, FILE * fp2);\nint decode(FILE * fp1, FILE * fp2);\nint main() {\n       char prompt;\n       printf(\"Would you like to encode a message into a file?\\n\");\n       printf(\"Or would you like to decode a message from a file?\\n\");\n       printf(\"Enter e to encode or d to decode.\\n\");\n       scanf(\"%c\", prompt);\n       FILE *fp1, *fp2;\n       char filename1[INT_MAX], filename2[INT_MAX];\n       printf(\"Enter input file: \");\n       scanf(\"%s\", filename1);\n       fp1 = fopen(filename1, \"r\");\n       printf(\"Enter output file: \");\n       scanf(\"%s\", filename2);\n       fp2 = fopen(filename2, \"w\");\n       if (fp1 == NULL) {\n               printf(\"The file does not exist.\\n\");\n               return 0;\n       }\n       if (fp2 == NULL) {\n               printf(\"The file oes not exist.\\n\");\n               return 0;\n       }\n       switch (prompt) {\n              case 'e':\n                   encode(fp1, fp2);\n                   break;\n              case 'E':\n                   encode(fp1, fp2);\n                   break;\n              case 'd':\n                   decode(fp1, fp2);\n                   break;\n              case 'D':\n                   decode(fp1, fp2);\n                   break;\n              default:\n                      break;\n       }\n       return 0;\n    }\n\nint encode(FILE * fp1, FILE * fp2) {\n     char ci, co;\n     while (fscanf(fp1, \"%c\", ci) != EOF) {\n           for (ci = 97; ci &lt;= 122; ci++)\n               co = ci - 64;\n           for (ci = 48; ci &lt;= 57; ci++)\n               co = ci + 11;\n           switch (ci) {\n                case 32:\n                     co = 69;\n                     break;\n                case 10:\n                     co = 70;\n                     break;\n                case 13:\n                     co = 71;\n                     break;\n                default:\n                     break;\n           }\n           fprintf(fp2, \"%c\", co);\n     } \n     printf(\"Your message has been encoded.\\n\");\n     system(\"pause\");\n     return 0;\n} \n\nint decode(FILE * fp1, FILE * fp2) {\n     char ci, co;\n     while (fscanf(fp1, \"%c\", ci) != EOF) {\n           for (ci = 33; ci &lt;= 58; ci++)\n               co = ci + 64;\n           for (ci = 59; ci &lt;= 68; ci++)\n               co = ci - 11;\n           switch(ci) {\n                case 69:\n                     co = 32;\n                     break;\n                case 70:\n                     co = 10;\n                     break;\n                case 71:\n                     co = 13;\n                     break;\n                default:\n                     break;\n           }\n           fprintf(fp2, \"%c\", co);\n     } \n     printf(\"Your message has been decoded.\\n\");\n     system(\"pause\");\n     return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "process", "signals"], "answers": [{"comments": [{"owner": {"reputation": 1748, "user_id": 2777540, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ca64280eaf22c382feb6a744f0cb4353?s=128&d=identicon&r=PG&f=1", "display_name": "Michael P", "link": "https://stackoverflow.com/users/2777540/michael-p"}, "edited": false, "score": 0, "creation_date": 1433976698, "post_id": 30768548, "comment_id": 49589366, "body": "One thing I can add and elaborate about 1. Because Claris is 100% correct. When you fork a process you create 2 processes, and from now on they have completely separate contexts. In other words, memory is not shared between them, they may use the same virtual memory but they would map to different physical memory. For IPC there&#39;s also named and unnamed pipes."}], "tags": [], "owner": {"reputation": 2223, "user_id": 325181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26de4aa17ab84757b1233714af5fec84?s=128&d=identicon&r=PG", "display_name": "Clarus", "link": "https://stackoverflow.com/users/325181/clarus"}, "is_accepted": false, "score": 0, "last_activity_date": 1433976120, "creation_date": 1433976120, "answer_id": 30768548, "question_id": 30768452, "link": "https://stackoverflow.com/questions/30768452/conceptual-questions-about-processes-and-signals/30768548#30768548", "title": "Conceptual Questions About Processes and Signals", "body": "<p>Some quick thoughts on your questions; </p>\n\n<ol>\n<li>No, signals are not good for transferring data. Signals involve a lot of overhead and are not queued very effectively.</li>\n<li>Many methods of IPC are available. The two that are most popular for UNIX are sockets and shared memory (see shm for instance). Sockets are generally better when talking to un-trusted applications. In your example of forking an application pipes would be applicable as well.</li>\n<li>As long as you can handle the interrupt much faster than they are coming in you are OK. Probably in the case with your ctrl-c example you could do the same thing using poll and fcntl (on UNIX) and you would be likely to get better precision.</li>\n</ol>\n"}], "owner": {"reputation": 59, "user_id": 4651240, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/98b7593f2d5e7ff91e3a6d6de67cc244?s=128&d=identicon&r=PG&f=1", "display_name": "SciGuy", "link": "https://stackoverflow.com/users/4651240/sciguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433976120, "creation_date": 1433975584, "question_id": 30768452, "link": "https://stackoverflow.com/questions/30768452/conceptual-questions-about-processes-and-signals", "title": "Conceptual Questions About Processes and Signals", "body": "<p>I am studying for my final in systems programming and I have a few questions that I cannot answer.</p>\n\n<ol>\n<li><p>Say a parent process forks off a child process that creates a large object. Can the child pass this object back to the parent fairly easily using just signals?</p></li>\n<li><p>A parent process forks off a child process, and the child continues running the same program. Is the best way for the parent to give a data structure to a child that was created before the fork to write to a separate file and give that to the child? (This one I am thinking it is not a good way, because the child will still share some of the parents data, including said data structure)</p></li>\n<li><p>Let us say you write a program to measure how quick a\nperson's fingers are by trapping SIGINT and then asking them to press\nCtrl-C as rapidly as possible. The SIGINT signal handler increments a\nglobal counter every time Ctrl-C is typed. After a predefined time it\nstops and prints the global counter divided by the time used.\nWhat is a fundamental problem with this program?</p></li>\n</ol>\n\n<p>Any help is appreciated. </p>\n"}, {"tags": ["c++", "c", "visual-studio", "compilation", "increment"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1433975406, "post_id": 30768285, "comment_id": 49588932, "body": "Your example does not even compile as is. And it should be <code>int main()</code>."}, {"owner": {"reputation": 14280, "user_id": 3213868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c996b05d00dac2362ca4804e78f564e?s=128&d=identicon&r=PG&f=1", "display_name": "ooga", "link": "https://stackoverflow.com/users/3213868/ooga"}, "edited": false, "score": 0, "creation_date": 1433975622, "post_id": 30768285, "comment_id": 49588989, "body": "How do you know the first function call is &quot;ignored&quot;? That seems impossible from the code given."}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433975889, "post_id": 30768285, "comment_id": 49589076, "body": "<a href=\"http://imageshack.com/a/img538/9657/rHcnx9.png\" rel=\"nofollow noreferrer\">imageshack.com/a/img538/9657/rHcnx9.png</a>"}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433975958, "post_id": 30768285, "comment_id": 49589104, "body": "Printing starts with 0,3 instead of a blank matrix"}, {"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "edited": false, "score": 0, "creation_date": 1433976076, "post_id": 30768285, "comment_id": 49589136, "body": "So you increase the position [1][1] ten times before calling &quot;decrement()&quot; and turning it back to zero. The decrement call should make Y = 9 and X = 0, so now you&#39;re writing on the 0 indexes that you were trying so hard to avoid, but the check functions never take those indexes into account. So I guess your program will be stuck in there forever? Don&#39;t blame the compiler.."}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433976150, "post_id": 30768285, "comment_id": 49589163, "body": "I increment with Matrix[x][y]++; and IMEDIATELY print the matrix, and still get only 0&#39;s"}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433976167, "post_id": 30768285, "comment_id": 49589166, "body": "Tried on a different computer, same result"}, {"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "edited": false, "score": 0, "creation_date": 1433976427, "post_id": 30768285, "comment_id": 49589255, "body": "I just ran your code and it does exactly what I just said"}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433976518, "post_id": 30768285, "comment_id": 49589299, "body": "1. It does not increase shit. At least not here. Everything remains 0. Always."}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433976556, "post_id": 30768285, "comment_id": 49589306, "body": "But I replaced unsigned int with int and now works, it is buggy, but the incrementation works. I have no idea why it would matter..."}, {"owner": {"reputation": 14963, "user_id": 834261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vxyWz.png?s=128&g=1", "display_name": "hatchet - done with SOverflow", "link": "https://stackoverflow.com/users/834261/hatchet-done-with-soverflow"}, "edited": false, "score": 0, "creation_date": 1433978017, "post_id": 30768285, "comment_id": 49589816, "body": "@AlexPop - you might find this interesting (regarding using unsigned for indexing) <a href=\"https://software.intel.com/en-us/forums/topic/534769\" rel=\"nofollow noreferrer\">software.intel.com/en-us/forums/topic/534769</a>"}, {"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "edited": false, "score": 0, "creation_date": 1433980949, "post_id": 30768285, "comment_id": 49590661, "body": "@AlexPop The incrementation doesn&#39;t work that way either. I&#39;ve answered why. All I&#39;ve done was check what happens when you run the code, I still have no idea what it is you are trying to do."}], "answers": [{"comments": [{"owner": {"reputation": 382, "user_id": 4969759, "user_type": "registered", "profile_image": "https://graph.facebook.com/952637991425219/picture?type=large", "display_name": "Pratap", "link": "https://stackoverflow.com/users/4969759/pratap"}, "reply_to_user": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433976385, "post_id": 30768500, "comment_id": 49589240, "body": "For <code>x=1, y=1</code>, the instruction <code>Matrix[x][y]++</code> is taking effect. But after it became 10, the call to <code>decrement</code> function took place in which <code>x</code> became 0 and <code>y</code> became <code>9</code>. But in the <code>print_matrix</code> function, you never printed the cells with <code>x=0</code>. And in <code>checkLine</code>, <code>checkColumn</code> and <code>checkSquare</code> functions, you were checking for cells with <code>x&gt;1</code>."}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433976608, "post_id": 30768500, "comment_id": 49589329, "body": "You are the second one to say that. On my laptop it doesn&#39;t. Unless I replace unsigned int with int... Have no idea why"}], "tags": [], "owner": {"reputation": 382, "user_id": 4969759, "user_type": "registered", "profile_image": "https://graph.facebook.com/952637991425219/picture?type=large", "display_name": "Pratap", "link": "https://stackoverflow.com/users/4969759/pratap"}, "is_accepted": false, "score": 0, "last_activity_date": 1433975842, "creation_date": 1433975842, "answer_id": 30768500, "question_id": 30768285, "link": "https://stackoverflow.com/questions/30768285/c-ignoring-incrementation/30768500#30768500", "title": "C ignoring incrementation", "body": "<p>You feel that the <code>increment</code> is ignored because the <code>checkSquare</code> function is buggy. It never returned 1 and hence the <code>increment</code> function was never called.</p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433976694, "post_id": 30768628, "comment_id": 49589363, "body": "Nothing of what you say happens to me, unless i replace unsigned int with int... WHY? I do not understand.."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1433989982, "last_edit_date": 1433989982, "creation_date": 1433976475, "answer_id": 30768628, "question_id": 30768285, "link": "https://stackoverflow.com/questions/30768285/c-ignoring-incrementation/30768628#30768628", "title": "C ignoring incrementation", "body": "<p>Your output is a bit confusing since the output of the line</p>\n\n<pre><code>printf(\"%u, %u\", x, y);\n</code></pre>\n\n<p>runs into the output of</p>\n\n<pre><code>print_Matrix();\n</code></pre>\n\n<p>By adding a newline to the output of the first line, i.e. by using </p>\n\n<pre><code>printf(\"%u, %u\\n\", x, y);\n</code></pre>\n\n<p>you will notice that at some point <code>x</code> gets decremented to <code>0</code> and never gets incremented again. Since you never print <code>Matrix[0][y]</code>, you never see the non-zero values.</p>\n\n<p>In addition to the change to above <code>printf</code>, if you change <code>print_Matrix</code> to:</p>\n\n<pre><code>void print_Matrix(){\n   unsigned int i, j;\n\n   for (i = 0; i &lt;= 9; i++){\n        // ^^^ Use 0 instead of 1\n      for (j = 0; j &lt;= 9; j++)\n           // ^^^ Use 0 instead of 1\n         printf(\"%u \", Matrix[i][j]);\n      printf(\"\\n\");\n   }\n}\n</code></pre>\n\n<p>you will see the non-zero values.</p>\n\n<p>See working code at <a href=\"http://ideone.com/HlQ4xp\" rel=\"nofollow\">http://ideone.com/HlQ4xp</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "is_accepted": false, "score": 0, "last_activity_date": 1433978257, "last_edit_date": 1433978257, "creation_date": 1433976738, "answer_id": 30768675, "question_id": 30768285, "link": "https://stackoverflow.com/questions/30768285/c-ignoring-incrementation/30768675#30768675", "title": "C ignoring incrementation", "body": "<p>What happens is that you're incrementing the position marked by x and y, that's position [1][1]. Until it reaches 10 nothing interesting happens, you can actually see the top left corner of the matrix increasign to 10, but then the condition to decrement becomes true and you decrement.</p>\n\n<p>See for yourself (prints),</p>\n\n<pre><code>while (x &lt; 10) //Condition OBVIOUSLY true***\n{\n    printf(\"%u, %u\", x, y); //Keeps printing 0,3 and eventually 0,2***\n    printf(\"\\n\");\n\n    Matrix[x][y]++; //Incrementation...*** \n\n    print_Matrix(); // Always prints a blank Matrix consisting of only 0's***\n\n\n    if (checkLine() &amp;&amp; checkColumn() &amp;&amp; checkSquare())\n    {\n        increment();\n    }\n\n    if (Matrix[x][y] == 10){\n        Matrix[x][y] = 0;\n        decrement();\n    }\n\n    printf( \"Enter to continue\\n\" );\n    getchar();\n\n}\n</code></pre>\n\n<p>It turns Y = 9, X = 0 and the [1][1] position becomes 0, so you see only zeros because you're not printing the zero indexes.</p>\n\n<p>This process repeats until Y = 1 and X = 0, you increase the position until 10 so that the decrement works again.</p>\n\n<p>When Y = 1, X = 0 and position [0][1] is 10, the decrement call will do x--. Since X is an unsigned int, it will underflow and become 4.2 billion something, which is greater than 10 and the loop ends.</p>\n\n<p>What are you trying to achieve here?</p>\n\n<hr>\n\n<p>Edit: Something even more amazing happens when you make x and y ints instead of unsigned ints.</p>\n\n<p>Instead of x underflowing it will become -1. Matrix[-1][9]++ strangely increased x by 1 when I ran the code, so x went back to 0. Which means the program loops forever at this point.</p>\n\n<p>The increment function was never called.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4996826, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IkgBT2DamVM/AAAAAAAAAAI/AAAAAAAAALQ/w5K_DHCBlfc/photo.jpg?sz=128", "display_name": "Sahil", "link": "https://stackoverflow.com/users/4996826/sahil"}, "is_accepted": false, "score": 0, "last_activity_date": 1433980320, "last_edit_date": 1433980320, "creation_date": 1433976859, "answer_id": 30768697, "question_id": 30768285, "link": "https://stackoverflow.com/questions/30768285/c-ignoring-incrementation/30768697#30768697", "title": "C ignoring incrementation", "body": "<p>It shows matrix and increment when tested online, here are results</p>\n\n<p>1) for C compiler</p>\n\n<p><a href=\"http://ideone.com/KRLO8w\" rel=\"nofollow\">http://ideone.com/KRLO8w</a></p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nunsigned int Matrix[10][10], x, y;\n\n// Ignore this..\nint checkLine()\n{\n    unsigned int i, j, k;\n    for (k = 1; k &lt;= 9; k++){\n        if (Matrix[k][1] == 0) break;\n        for (i = 1; i &lt;= 9; i++)\n            for (j = 1; j &lt;= 9; j++)\n                if (Matrix[k][i] == Matrix[k][j] &amp;&amp; i!=j)\n                    return 0;\n    }\n    return 1;\n}\n\n//Ignore this..\nint checkColumn()\n{\n    unsigned int i, j, k;\n    for (k = 1; k &lt;= 9; k++){\n        if (Matrix[1][k] == 0) break;\n        for (i = 1; i &lt;= 9; i++)\n            for (j = 1; j &lt;= 9; j++)\n                if (Matrix[i][k] == Matrix[j][k] &amp;&amp; i!=j)\n                    return 0;\n    }\n    return 1;\n}\n\n//Ignore this..\nint checkSquare()\n{\n    unsigned int i, j, k,l,m,n;\n    for (m = 1; m &lt;= 7; m = m + 3)\n    for (n = 1; n &lt;= 7; n = n + 3)\n\n    for (k = m; k &lt;= m + 2; k++)\n    for (l = n; l &lt;= n + 2; l++)\n    for (i = m; i &lt;= m + 2; i++)\n    for (j = n; j &lt;= n + 2; j++)\n        if (Matrix[k][l] == Matrix[i][j] &amp;&amp; !(k==i &amp;&amp; l==j))\n            return 0;\n    return 1;\n}\n\nvoid increment()\n{\n    if (y == 9)\n    {\n        x++;\n        y = 1;\n    }\n    else y++;\n}\n\nvoid decrement()\n{\n    if (y == 1)\n    {\n        x--;\n        y = 9;\n    }\n    else\n        y--;\n}\n\nvoid print_Matrix(){\n    unsigned int i, j;\n\n    for (i = 1; i &lt;= 9; i++){\n        for (j = 1; j &lt;= 9; j++)\n            printf(\"%u \", Matrix[i][j]);\n        printf(\"\\n\");\n    }\n}\n\n//\n// MAIN. PROBLEM BELOW\n//**\nvoid main()\n{\n    unsigned int i, j;\n    for (i = 1; i &lt;= 9;i++)\n    for (j = 1; j &lt;= 9; j++)\n        Matrix[i][j] = 0;\n\n    print_Matrix(); // Function call is ignored here. Don't know why.***\n\n    x = 1; \n    y = 1;\n    // X and Y are OBVIOUSLY 1***\n\n    while (x &lt; 10) //Condition OBVIOUSLY true***\n    {\n        printf(\"%u, %u\", x, y); //Keeps printing 0,3 and eventually 0,2***\n        printf(\"\\n\");\n\n        Matrix[x][y]++; //Incrementation...*** \n\n        print_Matrix(); // Always prints a blank Matrix consisting of only 0's***\n\n\n        if (checkLine() &amp;&amp; checkColumn() &amp;&amp; checkSquare())\n        {\n            increment();\n        }\n\n        if (Matrix[x][y] == 10){\n            Matrix[x][y] = 0;\n            decrement();\n        }\n\n\n\n    }\n\n    print_Matrix();\n\n}\n</code></pre>\n\n<p>2) for c++ compiler C++ 4.9.2 (changed return type of main to int)</p>\n\n<p><a href=\"http://ideone.com/Ey5nG1\" rel=\"nofollow\">http://ideone.com/Ey5nG1</a></p>\n\n<p>In your image starting value of 0, 3 is due to buffer limit of command prompt. As the program never ends, so it terminates abruptly and latest few bytes are stored in buffer and is only shown that much. To see complete output redirect it to a file and open it.</p>\n"}], "owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 4, "score": -4, "last_activity_date": 1433989982, "creation_date": 1433974729, "last_edit_date": 1433975662, "question_id": 30768285, "link": "https://stackoverflow.com/questions/30768285/c-ignoring-incrementation", "title": "C ignoring incrementation", "body": "<p>I tried this but my compiler(Visual Studio 2013) keeps messing up things. \nI have a 9 by 9 matrix indexed from 1. It is 0 at the beginig. And starting from element 1:1 I start incrementing the value in the matrix or incrementing x,y, basically moving to the next matrix element. </p>\n\n<p>However, the program ignores my incrementation and the fact that x,y are initially set to 1. \nAlso it ignores a function call.\nCode is commented below.</p>\n\n<p>I am sure this is the source I am compiling!\nRestarted laptop and Visual Studio but still doesn't work.\nOpened new project, same thing.\nThanks in advance.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nunsigned int Matrix[10][10], x, y;\n\n// Ignore this..\nint checkLine()\n{\n    unsigned int i, j, k;\n    for (k = 1; k &lt;= 9; k++){\n        if (Matrix[k][1] == 0) break;\n        for (i = 1; i &lt;= 9; i++)\n            for (j = 1; j &lt;= 9; j++)\n                if (Matrix[k][i] == Matrix[k][j] &amp;&amp; i!=j)\n                    return 0;\n    }\n    return 1;\n}\n\n//Ignore this..\nint checkColumn()\n{\n    unsigned int i, j, k;\n    for (k = 1; k &lt;= 9; k++){\n        if (Matrix[1][k] == 0) break;\n        for (i = 1; i &lt;= 9; i++)\n            for (j = 1; j &lt;= 9; j++)\n                if (Matrix[i][k] == Matrix[j][k] &amp;&amp; i!=j)\n                    return 0;\n    }\n    return 1;\n}\n\n//Ignore this..\nint checkSquare()\n{\n    unsigned int i, j, k,l,m,n;\n    for (m = 1; m &lt;= 7; m = m + 3)\n    for (n = 1; n &lt;= 7; n = n + 3)\n\n    for (k = m; k &lt;= m + 2; k++)\n    for (l = n; l &lt;= n + 2; l++)\n    for (i = m; i &lt;= m + 2; i++)\n    for (j = n; j &lt;= n + 2; j++)\n        if (Matrix[k][l] == Matrix[i][j] &amp;&amp; !(k==i &amp;&amp; l==j))\n            return 0;\n    return 1;\n}\n\nvoid increment()\n{\n    if (y == 9)\n    {\n        x++;\n        y = 1;\n    }\n    else y++;\n}\n\nvoid decrement()\n{\n    if (y == 1)\n    {\n        x--;\n        y = 9;\n    }\n    else\n        y--;\n}\n\nvoid print_Matrix(){\n    unsigned int i, j;\n\n    for (i = 1; i &lt;= 9; i++){\n        for (j = 1; j &lt;= 9; j++)\n            printf(\"%u \", Matrix[i][j]);\n        printf(\"\\n\");\n    }\n}\n\n//\n// MAIN. PROBLEM BELOW\n//**\nvoid main()\n{\n    unsigned int i, j;\n    for (i = 1; i &lt;= 9;i++)\n    for (j = 1; j &lt;= 9; j++)\n        Matrix[i][j] = 0;\n\n    print_Matrix(); // Function call is ignored here. Don't know why.***\n\n    x = 1; \n    y = 1;\n    // X and Y are OBVIOUSLY 1***\n\n    while (x &lt; 10) //Condition OBVIOUSLY true***\n    {\n        printf(\"%u, %u\", x, y); //Keeps printing 0,3 and eventually 0,2***\n        printf(\"\\n\");\n\n        Matrix[x][y]++; //Incrementation...*** \n\n        print_Matrix(); // Always prints a blank Matrix consisting of only 0's***\n\n\n        if (checkLine() &amp;&amp; checkColumn() &amp;&amp; checkSquare())\n        {\n            increment();\n        }\n\n        if (Matrix[x][y] == 10){\n            Matrix[x][y] = 0;\n            decrement();\n        }\n\n\n\n    }\n\n    print_Matrix();\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1433973436, "post_id": 30767965, "comment_id": 49588204, "body": "try <code>char check[]=&quot;zyxwvutsrqponmlkjihgfedcba&quot;;</code> (26 there is no space for <code>\\0</code>)."}, {"owner": {"reputation": 4369, "user_id": 481083, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bab76ab6bc09fcd80425e6261f1e4020?s=128&d=identicon&r=PG", "display_name": "zallarak", "link": "https://stackoverflow.com/users/481083/zallarak"}, "edited": false, "score": 0, "creation_date": 1433973477, "post_id": 30767965, "comment_id": 49588222, "body": "compile it on your local machine with verbose flags and see what the output is"}], "answers": [{"tags": [], "owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "is_accepted": false, "score": 5, "last_activity_date": 1433973641, "creation_date": 1433973641, "answer_id": 30768057, "question_id": 30767965, "link": "https://stackoverflow.com/questions/30767965/why-does-the-online-judge-fail-to-accept-it/30768057#30768057", "title": "Why does the online judge fail to accept it?", "body": "<p><code>check</code> needs 27 <code>char</code>s to store the string literal (including terminating null) you assigned to it, not 26.  Reading off the end is UB, but what's likely happening is in the global-scope version, the next byte happens to be 0, but the local-scope version, the next byte is non-zero, causing an access violation.</p>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 2, "last_activity_date": 1433973686, "creation_date": 1433973686, "answer_id": 30768068, "question_id": 30767965, "link": "https://stackoverflow.com/questions/30767965/why-does-the-online-judge-fail-to-accept-it/30768068#30768068", "title": "Why does the online judge fail to accept it?", "body": "<p>You cannot use <code>check</code> (in either version) with \"string\" functions.<br>\n<code>check</code> does not have a terminating NUL byte (<code>'\\0'</code>) so you invoke Undefined Behaviour.</p>\n\n<p>Hint: leave off the size of the array when initializing with a string literal.</p>\n\n<pre><code>char check[] = \"zyxwvutsrqponmlkjihgfedcba\"; // compiler determines size automagically\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 4996849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7cc0c5fc000f3f61a361e6a547a39383?s=128&d=identicon&r=PG&f=1", "display_name": "Apurva Jha", "link": "https://stackoverflow.com/users/4996849/apurva-jha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1433973686, "creation_date": 1433973209, "question_id": 30767965, "link": "https://stackoverflow.com/questions/30767965/why-does-the-online-judge-fail-to-accept-it", "title": "Why does the online judge fail to accept it?", "body": "<p>When I submit a code in the below given format the online judge(of Codechef ) does not accept it: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#include&lt;stdio.h&gt;\r\n\r\nint main()\r\n    {\r\n          int length,test;\r\n          char check[26]=\"zyxwvutsrqponmlkjihgfedcba\";\r\n          scanf(\"%d\",&amp;test);\r\n          while(test--){\r\n          scanf(\"%d\",&amp;length);\r\n          if(length%25 != 0)\r\n          printf(\"%s\",check+25-(length%25));\r\n          length/=25;\r\n          while(length--)\r\n                       {\r\n                            printf(\"%s\",check);\r\n                       }\r\n          printf(\"\\n\");\r\n          }\r\n          return 0;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>However when I submit the code in the one given below it is readily accepted. Here all I've done is just made the char array from local to global. Can anyone gimme the reasons for it. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#include&lt;stdio.h&gt;\r\nchar check[26]=\"zyxwvutsrqponmlkjihgfedcba\";\r\nint main()\r\n    {\r\n          int length,test;\r\n          \r\n          scanf(\"%d\",&amp;test);\r\n          while(test--){\r\n          scanf(\"%d\",&amp;length);\r\n          if(length%25 != 0)\r\n          printf(\"%s\",check+25-(length%25));\r\n          length/=25;\r\n          while(length--)\r\n                       {\r\n                            printf(\"%s\",check);\r\n                       }\r\n          printf(\"\\n\");\r\n          }\r\n          return 0;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Link to the question for which it was used: </p>\n\n<p><a href=\"http://www.codechef.com/problems/DECSTR\" rel=\"nofollow\">http://www.codechef.com/problems/DECSTR</a></p>\n"}, {"tags": ["c", "gtk", "gtk2", "gdk"], "comments": [{"owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "edited": false, "score": 0, "creation_date": 1434011225, "post_id": 30767841, "comment_id": 49601441, "body": "what are you #including for the definition of that function?"}, {"owner": {"reputation": 53, "user_id": 4674318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb0ba6473786db1e2052e8d570d744a?s=128&d=identicon&r=PG&f=1", "display_name": "adlo", "link": "https://stackoverflow.com/users/4674318/adlo"}, "reply_to_user": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "edited": false, "score": 0, "creation_date": 1434057011, "post_id": 30767841, "comment_id": 49632504, "body": "@jku At first, I just included <code>gtk.h</code> and <code>libwnck.h</code>. Then, I tried adding <code>gdk&#47;gdk.h</code>, <code>gdk-pixbuf&#47;gdk-pixbuf.h</code>, and <code>X11&#47;Xlib.h</code> separately in turn."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4674318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb0ba6473786db1e2052e8d570d744a?s=128&d=identicon&r=PG&f=1", "display_name": "adlo", "link": "https://stackoverflow.com/users/4674318/adlo"}, "edited": false, "score": 0, "creation_date": 1435874254, "post_id": 31120614, "comment_id": 50395154, "body": "This has solved my linker error, but when I run the program, it causes a segmentation fault. I have tried passing an XID instead of a GdkWindow, but it still segfaults."}, {"owner": {"reputation": 3208, "user_id": 1389358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000245bcb0910007a54d67e5ba34f1ef?s=128&d=identicon&r=PG", "display_name": "Ross Burton", "link": "https://stackoverflow.com/users/1389358/ross-burton"}, "reply_to_user": {"reputation": 53, "user_id": 4674318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb0ba6473786db1e2052e8d570d744a?s=128&d=identicon&r=PG&f=1", "display_name": "adlo", "link": "https://stackoverflow.com/users/4674318/adlo"}, "edited": false, "score": 0, "creation_date": 1435962964, "post_id": 31120614, "comment_id": 50430956, "body": "You asked about the link error and that&#39;s resolved.  Without stack traces, more code, and so on it&#39;s impossible to help more."}], "tags": [], "owner": {"reputation": 3208, "user_id": 1389358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000245bcb0910007a54d67e5ba34f1ef?s=128&d=identicon&r=PG", "display_name": "Ross Burton", "link": "https://stackoverflow.com/users/1389358/ross-burton"}, "is_accepted": true, "score": 0, "last_activity_date": 1435594501, "creation_date": 1435594501, "answer_id": 31120614, "question_id": 30767841, "link": "https://stackoverflow.com/questions/30767841/linker-error-with-gdk-pixbuf-xlib-get-from-drawable/31120614#31120614", "title": "Linker error with gdk_pixbuf_xlib_get_from_drawable", "body": "<p>You need to add gdk-pixbuf-xlib-2.0 to your pkg-config checks, and include gdk-pixbuf-xlib.h.</p>\n"}], "owner": {"reputation": 53, "user_id": 4674318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb0ba6473786db1e2052e8d570d744a?s=128&d=identicon&r=PG&f=1", "display_name": "adlo", "link": "https://stackoverflow.com/users/4674318/adlo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 31120614, "answer_count": 1, "score": 0, "last_activity_date": 1435594501, "creation_date": 1433972658, "last_edit_date": 1434057208, "question_id": 30767841, "link": "https://stackoverflow.com/questions/30767841/linker-error-with-gdk-pixbuf-xlib-get-from-drawable", "title": "Linker error with gdk_pixbuf_xlib_get_from_drawable", "body": "<p>If I attempt to use the function <code>gdk_pixbuf_xlib_get_from_drawable</code>, it results in the following linker error:</p>\n\n<pre><code>undefined reference to gdk_pixbuf_xlib_get_from_drawable\n</code></pre>\n\n<p>I am compiling it using the <code>gtk+-2.0</code> and <code>libwnck-1.0</code> pkg-config options, like this:</p>\n\n<pre><code>... `pkg-config gtk+-2.0 libwnck-1.0 --cflags --libs`\n</code></pre>\n\n<p>I have also tried adding <code>gdk-2.0</code> and <code>x11</code> to the pkg-config options, but it still did not work.</p>\n\n<p>My code looks roughly like this:</p>\n\n<pre><code>wnck_window_get_geometry (window, &amp;xp, &amp;yp, &amp;widthp, &amp;heightp);\npixbuf = gdk_pixbuf_xlib_get_from_drawable (pixbuf, gdk_window,\n    NULL, NULL, 0, 0, 0, 0, widthp, heightp);\n</code></pre>\n"}, {"tags": ["c", "arrays", "file", "scanf"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1433970680, "post_id": 30767269, "comment_id": 49586879, "body": "<code>status[3];</code> --&gt; <code>status[4];</code>, <code>fscanf(read_from, &quot; %s&quot;, &amp;status);</code> --&gt; <code>fscanf(read_from, &quot;%3s&quot;, &amp;status);</code>"}, {"owner": {"reputation": 117, "user_id": 4917080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/znnVO.jpg?s=128&g=1", "display_name": "Febio Mosca", "link": "https://stackoverflow.com/users/4917080/febio-mosca"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1433971456, "post_id": 30767269, "comment_id": 49587289, "body": "I tried what you suggested, same output."}, {"owner": {"reputation": 382, "user_id": 4969759, "user_type": "registered", "profile_image": "https://graph.facebook.com/952637991425219/picture?type=large", "display_name": "Pratap", "link": "https://stackoverflow.com/users/4969759/pratap"}, "edited": false, "score": 2, "creation_date": 1433972595, "post_id": 30767269, "comment_id": 49587864, "body": "The <code>status</code> variable is a character array of size 3. But in <code>ctrl = fscanf(read_from, &quot; %s&quot;, &amp;status);</code>, there is a significant probability of reading <code>Off</code> which requires space for 4 bytes (Extra byte for NULL character). This results in a Segmentation fault."}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 4917080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/znnVO.jpg?s=128&g=1", "display_name": "Febio Mosca", "link": "https://stackoverflow.com/users/4917080/febio-mosca"}, "edited": false, "score": 1, "creation_date": 1434031516, "post_id": 30767979, "comment_id": 49616190, "body": "Ok, the code you wrote works but only starts reading the file at line 2000 of 2387 lines. Why is this happening?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 117, "user_id": 4917080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/znnVO.jpg?s=128&g=1", "display_name": "Febio Mosca", "link": "https://stackoverflow.com/users/4917080/febio-mosca"}, "edited": false, "score": 1, "creation_date": 1434037889, "post_id": 30767979, "comment_id": 49621080, "body": "@Febio Mosca certainly the code starts <i>reading</i> at line 1, but maybe not passing the various <code>sscanf()</code> tests until later.  Suggest posting some of the lines before and after line 2000.  Also insure insure adequate buffer size like <code>char buffer[1000];</code>  Also post <code>array[]</code> definition."}, {"owner": {"reputation": 117, "user_id": 4917080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/znnVO.jpg?s=128&g=1", "display_name": "Febio Mosca", "link": "https://stackoverflow.com/users/4917080/febio-mosca"}, "edited": false, "score": 1, "creation_date": 1434043146, "post_id": 30767979, "comment_id": 49624334, "body": "Sorry, actually the array is complete with all the info, it simply only prints to console the last part of it. I don&#39;t know why but I also don&#39;t care, I just need the info to be saved correctly and it does, so... Thanks a lot for the big help!"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1433976883, "last_edit_date": 1433976883, "creation_date": 1433973260, "answer_id": 30767979, "question_id": 30767269, "link": "https://stackoverflow.com/questions/30767269/how-to-properly-use-fscanf-to-store-only-the-needed-information-in-an-array/30767979#30767979", "title": "How to properly use fscanf to store only the needed information in an array?", "body": "<p>OP's code problems include:  </p>\n\n<p>1) Passing a variable, rather than an address of a variable in <code>fscanf(read_from, \" ch=1 n=%d v=%d\", array[u][2], array[u][3]);</code>  </p>\n\n<p>2) Insufficient space reading <code>\"Off\"</code> with <code>char status[3]; ... ctrl = fscanf(read_from, \" %s\", &amp;status);</code></p>\n\n<p>The better approach is to not use <code>fscanf()</code>.  Read the line using <code>fgets()</code> or  <code>getline()</code> and then scan using <code>sscanf()</code>, <code>strtol()</code>, etc.</p>\n\n<pre><code>// Read  line by line until EOF\nwhile (fgets(buf, sizeof buf, read_from)) {\n  // Clear entry\n  memset(&amp;array[u], 0, sizeof (array[u]));\n\n  if (3 == sscanf(buf, \"%d Off ch=1 n=%d v=%d\", \n      &amp;array[u][0], &amp;array[u][2], &amp;array[u][3])) {\n    array[u][1] = 1;\n  } else if (3 == sscanf(buf, \"%d On ch=1 n=%d v=%d\", \n      &amp;array[u][0], &amp;array[u][2], &amp;array[u][3])) {\n    array[u][1] = 0;\n  } else if (2 == sscanf(buf, \"%d Pb ch=1 v=%d\", \n      &amp;array[u][0], &amp;array[u][3])) {\n    array[u][1] = 2;\n  } \n</code></pre>\n\n<p>Note: as <code>ch=1</code> is likely not a constant <code>1</code>, code could use <code>\"%*d\"</code> to scan and discard the <code>ch</code> number.</p>\n\n<pre><code>  if (3 == sscanf(buf, \"%d Off ch=%*d n=%d v=%d\", \n      &amp;array[u][0], &amp;array[u][2], &amp;array[u][3])) {\n    array[u][1] = 1;\n  }\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 4917080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/znnVO.jpg?s=128&g=1", "display_name": "Febio Mosca", "link": "https://stackoverflow.com/users/4917080/febio-mosca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 0, "accepted_answer_id": 30767979, "answer_count": 1, "score": 3, "last_activity_date": 1433976883, "creation_date": 1433970249, "question_id": 30767269, "link": "https://stackoverflow.com/questions/30767269/how-to-properly-use-fscanf-to-store-only-the-needed-information-in-an-array", "title": "How to properly use fscanf to store only the needed information in an array?", "body": "<p>I'm trying to write a program in c that reads a mtx file (mtx stands for midi to text, it's actually a txt file) and stores only the information I need (specifically only the note-on/off and pitch-bend messages) here's an example:\n<img src=\"https://i.stack.imgur.com/V9bUM.png\" alt=\"mtx file example\"></p>\n\n<p>the information that I need are: the timing (first number), the type (On, Off and Pb), the \"n=\" value and the \"v=\" value (in pitch-bend messages there's only the \"v=\" value). I'm not an expert in C language, I know the basics and I based my programming on <a href=\"http://beej.us/guide/bgc/output/html/multipage/scanf.html\" rel=\"nofollow noreferrer\"> this guide</a> and <a href=\"http://web.cs.swarthmore.edu/~newhall/unixhelp/C_files.html\" rel=\"nofollow noreferrer\">this guide</a>.</p>\n\n<p>Here's the code I wrote:</p>\n\n<pre><code>FILE * read_from;\nchar status[3];\nint u = 0;\nint ctrl,ct;\nread_from = fopen(nomesong, \"r\");\nif (!read_from)\n    printf(\"NO WAY\\n\");\nelse{\nwhile (1){\n    ct = fscanf(read_from, \"%d\", array[u][0]);\n    if (ct == 1){\n        ctrl = fscanf(read_from, \" %s\", &amp;status);\n        if (ctrl == 1){\n            if (status[1] == 'n'){\n                array[u][1] = 1;\n                fscanf(read_from, \" ch=1 n=%d v=%d\", array[u][2], array[u][3]);\n            }\n            else if (status[1] == 'f'){\n                array[u][1] = 0;\n                fscanf(read_from, \" ch=1 n=%d v=%d\", array[u][2], array[u][3]);\n            }\n            else if (status[1] == 'b'){\n                array[u][1] = 2;\n                fscanf(read_from, \" ch=1 v=%d\", array[u][3]);\n            }\n        }\n        else if (errno != 0) {\n            perror(\"scanf:\");\n            break;\n        }\n        else {\n            printf(\"No match.\\n\");\n        }\n\n    }\n    else if (errno != 0) {\n        perror(\"scanf:\");\n        break;\n    }\n    else if (ctrl == EOF) {\n        break;\n    }\n    printf(\"%d %d %d %d\\n\", array[u][0], array[u][1], array[u][2], array[u][3]);\n    u++;\n}\n}return;\n</code></pre>\n\n<p>As output it prints four zeros per row (array[][] is initialized to 0) then starts spewing out random big numbers, then keeps printing zeros and then stops and VS (2013) emits the \"Unhandled exeption\" alert message. What am I doing wrong? Any help will be appreciated.</p>\n"}, {"tags": ["c", "linux", "inotify"], "comments": [{"owner": {"reputation": 481, "user_id": 841677, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fb7bfa9c173f5347848bb46957f65ea?s=128&d=identicon&r=PG", "display_name": "MaXi32", "link": "https://stackoverflow.com/users/841677/maxi32"}, "edited": false, "score": 0, "creation_date": 1602781471, "post_id": 30767163, "comment_id": 113835813, "body": "<code>sed &#39;&#39; -i filename</code> without real change so inotify will trigger."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4996685"}, "edited": false, "score": 0, "creation_date": 1433970972, "post_id": 30767282, "comment_id": 49587034, "body": "Actually I have to do it without any file operation. Maybe there is a possibility to do this via some system call ?"}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1433971679, "post_id": 30767282, "comment_id": 49587410, "body": "@Ruslan: Which flag would you expect to see when successfully reading an event?  Also, what is your end goal?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4996685"}, "edited": false, "score": 0, "creation_date": 1433971990, "post_id": 30767282, "comment_id": 49587563, "body": "I want emulate IN_MODIFY event, without real modifying"}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1433972114, "post_id": 30767282, "comment_id": 49587624, "body": "Without a file, you want a notification when what is modified?"}], "tags": [], "owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "is_accepted": false, "score": 0, "last_activity_date": 1433970280, "creation_date": 1433970280, "answer_id": 30767282, "question_id": 30767163, "link": "https://stackoverflow.com/questions/30767163/trigger-inotify-file-change-event/30767282#30767282", "title": "Trigger inotify file change event", "body": "<p>You can change attributes to trigger an event for inotify() to report.  You might change permissions, for example.</p>\n\n<p>I used udev rules to write to a file upon thumb drive insertion, then inotify() to detect that write, and kicked off scripts to process everything on the drive, all without user interaction.  inotify() is a very useful call.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4996685"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 722, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1433971039, "creation_date": 1433969832, "last_edit_date": 1433971039, "question_id": 30767163, "link": "https://stackoverflow.com/questions/30767163/trigger-inotify-file-change-event", "title": "Trigger inotify file change event", "body": "<p>How can I trigger linux inotify() file change event programmatically, without real read/write operation? </p>\n\n<p>Inotify <a href=\"http://man7.org/linux/man-pages/man7/inotify.7.html\" rel=\"nofollow\">man page</a> has only watching functions.</p>\n\n<p>Actually I have to do it without any file operation.\nMaybe there is a possibility to do this via some system call ? </p>\n"}, {"tags": ["c", "arduino"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1433971317, "post_id": 30766975, "comment_id": 49587203, "body": "You can &quot;concatenate&quot; two integers quite simply if the second one is less than 10: just compute 10 * A + B."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1433971684, "post_id": 30766975, "comment_id": 49587415, "body": "<code>blue.toCharArray(tempGreen, sizeof(tempGreen));</code> - are you sure this is C?"}, {"owner": {"reputation": 476, "user_id": 1950211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oAIXA.jpg?s=128&g=1", "display_name": "TheEditor", "link": "https://stackoverflow.com/users/1950211/theeditor"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1433975790, "post_id": 30766975, "comment_id": 49589042, "body": "@LeeDanielCrocker - Well, I just saw your post.  It jogged my brain.  I know that each digit is only 0-5.  So int combined = ((100 * first) + (10 * second) + third);  was all I needed.  I was making it WAYYYY to complicated.  Man, I feel dumb."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433977831, "post_id": 30766975, "comment_id": 49589754, "body": "@TheEditor 1) Minor: &quot;each digit is only 0-5&quot; - the last two digits could be <code>0-9</code>.  2) Yes, we all over-thought this: <code>blue = (message[11]-&#39;0&#39;)*100 + (message[12]-&#39;0&#39;)*10 + message[13]-&#39;0&#39;;</code> was all that is needed."}, {"owner": {"reputation": 476, "user_id": 1950211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oAIXA.jpg?s=128&g=1", "display_name": "TheEditor", "link": "https://stackoverflow.com/users/1950211/theeditor"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433982474, "post_id": 30766975, "comment_id": 49591025, "body": "@chux Yep pretty much that.  I just have to laugh. Some simple math and all is well."}], "answers": [{"comments": [{"owner": {"reputation": 476, "user_id": 1950211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oAIXA.jpg?s=128&g=1", "display_name": "TheEditor", "link": "https://stackoverflow.com/users/1950211/theeditor"}, "edited": false, "score": 0, "creation_date": 1433969537, "post_id": 30767044, "comment_id": 49586245, "body": "Ok, I&#39;ll try that.  Then how to I concatenate that?"}, {"owner": {"reputation": 1981, "user_id": 1983957, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uPeRS.png?s=128&g=1", "display_name": "Greg Hilston", "link": "https://stackoverflow.com/users/1983957/greg-hilston"}, "reply_to_user": {"reputation": 476, "user_id": 1950211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oAIXA.jpg?s=128&g=1", "display_name": "TheEditor", "link": "https://stackoverflow.com/users/1950211/theeditor"}, "edited": false, "score": 0, "creation_date": 1433969865, "post_id": 30767044, "comment_id": 49586430, "body": "@TheEditor See my original answer, I edited it to answer your follow up question"}, {"owner": {"reputation": 476, "user_id": 1950211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oAIXA.jpg?s=128&g=1", "display_name": "TheEditor", "link": "https://stackoverflow.com/users/1950211/theeditor"}, "edited": false, "score": 0, "creation_date": 1433974378, "post_id": 30767044, "comment_id": 49588548, "body": "Ok that converts them perfectly, and I learned something.  As for the concatenation, do I even have to do that?   I&#39;ll be using them like this:  colorWipe(strip.Color(255, 0, 0), 50);  Is there a better way of getting say the 255 in there from individual integers other than concatenating?  Though building each triplet would let me get rid of leading zeros along the way.  What is the best way here?"}, {"owner": {"reputation": 476, "user_id": 1950211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oAIXA.jpg?s=128&g=1", "display_name": "TheEditor", "link": "https://stackoverflow.com/users/1950211/theeditor"}, "edited": false, "score": 1, "creation_date": 1433975835, "post_id": 30767044, "comment_id": 49589060, "body": "Ignore that I figured it out.  I replied to an earlier post that int combined = ((100 * first) + (10 * second) + third); was all I needed since the numbers were only ever going to be 0-255.  Making it harder than I needed to."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433977314, "post_id": 30767044, "comment_id": 49589574, "body": "With large values of <code>y</code>, <code>while(y &gt;= pow) pow *= 10;</code> is an infinite loop."}], "tags": [], "owner": {"reputation": 1981, "user_id": 1983957, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uPeRS.png?s=128&g=1", "display_name": "Greg Hilston", "link": "https://stackoverflow.com/users/1983957/greg-hilston"}, "is_accepted": true, "score": 1, "last_activity_date": 1433969841, "last_edit_date": 1495541158, "creation_date": 1433969364, "answer_id": 30767044, "question_id": 30766975, "link": "https://stackoverflow.com/questions/30766975/data-type-confusion-need-integer-from-char-array/30767044#30767044", "title": "Data type confusion, need integer from char array", "body": "<p><strong>To convert each character to its respective int do the following</strong></p>\n\n<pre><code>int first = message[11] - '0';\nint second= message[12] - '0';\nint third = message[13] - '0';\n</code></pre>\n\n<p>To see why this works, you can check here: <a href=\"https://stackoverflow.com/questions/15598698/why-does-subtracting-0-in-c-result-in-the-number-that-the-char-is-representing\">Why does subtracting &#39;0&#39; in C result in the number that the char is representing?</a></p>\n\n<p><strong>To concatenate ints, you could use this function</strong></p>\n\n<pre><code>unsigned concatenate(unsigned x, unsigned y) {\n     unsigned pow = 10;\n     while(y &gt;= pow)\n         pow *= 10;\n     return x * pow + y;        \n}\n</code></pre>\n\n<p>I did not write this function, it was written by @TBohne originally <a href=\"https://stackoverflow.com/questions/12700497/how-to-concatenate-two-integers-in-c\">here</a> </p>\n"}, {"comments": [{"owner": {"reputation": 1498, "user_id": 2797746, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/TaPVN.jpg?s=128&g=1", "display_name": "Alexandre Severino", "link": "https://stackoverflow.com/users/2797746/alexandre-severino"}, "edited": false, "score": 0, "creation_date": 1433970754, "post_id": 30767122, "comment_id": 49586914, "body": "Edited with previous useful steps to it."}], "tags": [], "owner": {"reputation": 1498, "user_id": 2797746, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/TaPVN.jpg?s=128&g=1", "display_name": "Alexandre Severino", "link": "https://stackoverflow.com/users/2797746/alexandre-severino"}, "is_accepted": false, "score": 1, "last_activity_date": 1433977396, "last_edit_date": 1433977396, "creation_date": 1433969667, "answer_id": 30767122, "question_id": 30766975, "link": "https://stackoverflow.com/questions/30766975/data-type-confusion-need-integer-from-char-array/30767122#30767122", "title": "Data type confusion, need integer from char array", "body": "<p>I'd go with:</p>\n\n<pre><code>char *partMessage = (char*)malloc(4);\npartMessage[3] = '\\0';\nstrncpy(partMessage, message + 11, 3);\nresult = (int)strtol(partMessage, NULL, 10);\nfree(partMessage);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "is_accepted": false, "score": 0, "last_activity_date": 1433970726, "last_edit_date": 1433970726, "creation_date": 1433970420, "answer_id": 30767312, "question_id": 30766975, "link": "https://stackoverflow.com/questions/30766975/data-type-confusion-need-integer-from-char-array/30767312#30767312", "title": "Data type confusion, need integer from char array", "body": "<p>you could try something like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n  // example\n  char message[] = { \"000255000\" };\n  int r=0, g=0, b=0;\n\n  // make sure right number of values have been read\n  if ( sscanf(message, \"%03d%03d%03d\", &amp;r, &amp;g, &amp;b ) == 3 )\n  {\n    printf( \"R:%d, G:%d, B:%d\\n\", r,g,b );\n  }\n  else\n  {\n    fprintf(stderr, \"failed to parse\\n\");\n  }\n}\n</code></pre>\n\n<p>sscanf will skip any white space so even a string like <code>message[] = \" 000 255 000 \";</code> will work.</p>\n"}, {"tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": false, "score": 0, "last_activity_date": 1433971179, "creation_date": 1433971179, "answer_id": 30767508, "question_id": 30766975, "link": "https://stackoverflow.com/questions/30766975/data-type-confusion-need-integer-from-char-array/30767508#30767508", "title": "Data type confusion, need integer from char array", "body": "<p>Just do the conversion manually:</p>\n\n<pre><code>int convert_digits(char *cp, int count) {\n    int result = 0;\n    for (int i = 0; i &lt; count; i += 1) {\n        result *= 10;\n        result += (cp[i] - '0');\n    }\n    return result;\n}\n\nchar *input = \"000045255\";\n\nint main(int ac, char *av[]) {\n    printf(\"r=%d g=%d, b=%d\\n\",\n        convert_digits(cp, 3),\n        convert_digits(cp+3, 3),\n        convert_digits(cp+6, 3));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1433971987, "creation_date": 1433971987, "answer_id": 30767681, "question_id": 30766975, "link": "https://stackoverflow.com/questions/30766975/data-type-confusion-need-integer-from-char-array/30767681#30767681", "title": "Data type confusion, need integer from char array", "body": "<p>Convert string to a number and then numerically peal off 3 digits at a time.</p>\n\n<pre><code>const char *s = \"000255000\";\nchar *endptr;\nunsigned long num = strtoul(s, &amp;endptr, 10);\n\n// add error checking on errno, num, endptr) here if desired.\n\nblue = num%1000;\nnum /= 1000;\ngreen = num%1000;\nnum /= 1000;\nred = num%1000;\n\n// Could add check to insure r,g,b &lt;= 255.\n</code></pre>\n"}], "owner": {"reputation": 476, "user_id": 1950211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oAIXA.jpg?s=128&g=1", "display_name": "TheEditor", "link": "https://stackoverflow.com/users/1950211/theeditor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 30767044, "answer_count": 5, "score": 2, "last_activity_date": 1433977396, "creation_date": 1433969097, "last_edit_date": 1433975124, "question_id": 30766975, "link": "https://stackoverflow.com/questions/30766975/data-type-confusion-need-integer-from-char-array", "title": "Data type confusion, need integer from char array", "body": "<p>Once again I have the wrong data type.  This is an arduino project. </p>\n\n<p>I have a char array.   The last 9 characters are rgb, I get them as triplets.  So 000255000.  </p>\n\n<p>I need to pass those to a function but as integers, like 0, 255, 0.  I'm ok if 000 turns into 0, but I need 045 to turn into 45. </p>\n\n<p>I've tried to cast them, like:</p>\n\n<pre><code>blue = (int)message[11];\nblue += (int)message[12];\nblue += (int)message[13];\n</code></pre>\n\n<p>That did not work.  I could however cast them to strings,which I did, then I tried: Yes, I know this was not a great idea, but it was worth a shot. </p>\n\n<pre><code>char tempBlue[4];\nblue.toCharArray(tempGreen, sizeof(tempGreen));\niBlue = atoi(tempGreen);\n</code></pre>\n\n<p>That also did not work. </p>\n\n<p>I'm lost as to how to do this. I have no idea how ( if you can ) concatenate integers or I would have tried that.  </p>\n\n<p>EDIT------</p>\n\n<p>Am I asking the wrong question.   Should I be doing this the reverse way around.  Concatenate first then to integer?  I have them as characters to begin with. </p>\n"}, {"tags": ["c", "algorithm", "numerical-methods", "fixed-point", "splines"], "comments": [{"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1434002663, "post_id": 30766949, "comment_id": 49596461, "body": "I would use fixed point ... but as you suggested the dynamic range of coefficients can be a problem why do you want avoid floats? (absence of FPU on target platform?) with FPU present the operation on float and integers are not that different in speed on current common HW"}, {"owner": {"reputation": 18035, "user_id": 1828289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/S6fiE.png?s=128&g=1", "display_name": "Alex I", "link": "https://stackoverflow.com/users/1828289/alex-i"}, "reply_to_user": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1434017709, "post_id": 30766949, "comment_id": 49605903, "body": "@Spektre: Yes no FPU and no native 32bit; there is a 16x16-&gt;32bit multiplier.  Fixed point is interesting but how would you do that in this case?  Assume something like libfixmath is available :)"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1434021811, "post_id": 30766949, "comment_id": 49608746, "body": "you do not need any libs just correct result by bit shift after any multiplication. the bit counts depends on the range of your control points and desired target precision"}], "owner": {"reputation": 18035, "user_id": 1828289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/S6fiE.png?s=128&g=1", "display_name": "Alex I", "link": "https://stackoverflow.com/users/1828289/alex-i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1433969010, "creation_date": 1433969010, "question_id": 30766949, "link": "https://stackoverflow.com/questions/30766949/splines-in-integer-arithmetic", "title": "Splines in integer arithmetic?", "body": "<p>Splines (the piecewise cubic polynomial form) can be written as:</p>\n\n<pre><code>s = x - x[k]\ny = y[k] + a[k]*s + b[k]*s*s + c[k]*s*s*s\n</code></pre>\n\n<p>where <code>x[k] &lt; x &lt; x[k+1]</code>, the curve passes through each <code>(x[k], y[k])</code> point, and a,b,c are arrays of coefficients describing the slope and shape.  This all works fine in floating point, and there are plenty of ways to calculate a,b,c for different kinds of splines.  However...</p>\n\n<p>How can this be approximated in integer arithmetic?</p>\n\n<p>One of the tricky parts is that any approximation should, ideally, be continuous, in other words using <code>x=x[k+1]</code> and the coefficients from the k-th segment, the result should be <code>y[k+1]</code> except for rounding errors.  In other words, for a straight segment, <code>y[k+1] == y[k] + a[k]*(x[k+1] - x[k])</code>, and curvy segments only deviate from this in the middle but not at either end.  This is guaranteed by construction in the case of floating point, but even a small coefficient change from rounding can throw it off quite a bit.</p>\n\n<p>Another tricky part is that, in general, the magnitude of the higher-order coefficients is much smaller - but not always, esp. not at sharp \"corners\".  It may still make sense to scale them up by the typical size of s to the power of whatever order they are, so they are not rounded of to zero as integers, but that would seem to trade off resolution in curvature for max possible corner sharpness.</p>\n\n<p>First try at an integer version:</p>\n\n<pre><code>y = y[k] + (a[k] + (b[k] + c[k]*s)*s)*s\n</code></pre>\n\n<p>Then use integer multiply (intended for 16bit values, 32bit arithmetic):</p>\n\n<pre><code>#define q (1&lt;&lt;16)\n#define mult(x, y) ((x * y) / q)\n\ny = y[k] + mult(mult(mult(c[k], s) + b[k], s) + a[k], s)\n</code></pre>\n\n<p>This looks good in theory, but I'm not sure it's the best possible approach, or how to tell systematically what the best possible approach is.</p>\n"}, {"tags": ["c", "performance", "io"], "comments": [{"owner": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 0, "creation_date": 1433969159, "post_id": 30766924, "comment_id": 49586036, "body": "You forgot to finish the sentence <i>Is it possible to get</i> just before the specs at the end."}, {"owner": {"reputation": 26495, "user_id": 344821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/96CmN.png?s=128&g=1", "display_name": "Danica", "link": "https://stackoverflow.com/users/344821/danica"}, "reply_to_user": {"reputation": 15695, "user_id": 682404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxO2o.png?s=128&g=1", "display_name": "xxbbcc", "link": "https://stackoverflow.com/users/682404/xxbbcc"}, "edited": false, "score": 0, "creation_date": 1433969198, "post_id": 30766924, "comment_id": 49586060, "body": "@xxbbcc Thanks, fixed. Nonlinear writing is hard. :)"}, {"owner": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "edited": false, "score": 0, "creation_date": 1433970443, "post_id": 30766924, "comment_id": 49586766, "body": "<code>dd if=&#47;dev&#47;zero bs=1M count=20000 | pv | tr &#39;\\00&#39; &#39;@&#39; &gt; &#47;dev&#47;null</code>  (similar to your second case) proceeds at 322MB/s on my not-that-fancy notebook, fwiw."}, {"owner": {"reputation": 26495, "user_id": 344821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/96CmN.png?s=128&g=1", "display_name": "Danica", "link": "https://stackoverflow.com/users/344821/danica"}, "reply_to_user": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "edited": false, "score": 1, "creation_date": 1433970733, "post_id": 30766924, "comment_id": 49586902, "body": "@StefanoSanfilippo I get 7 MiB/s (changing to <code>bs=1048576</code> since OSX&#39;s <code>dd</code> doesn&#39;t support the <code>1M</code> syntax). Presumably a buffering difference in the OSes..."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 2, "creation_date": 1433971212, "post_id": 30766924, "comment_id": 49587149, "body": "<code>char ch</code> cannot correctly hold the value <code>EOF</code>: If <code>char</code> is unsigned by default, your code will never stop, otherwise if will mistakenly stop on <code>&#39;\\377&#39;</code> also."}, {"owner": {"reputation": 26495, "user_id": 344821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/96CmN.png?s=128&g=1", "display_name": "Danica", "link": "https://stackoverflow.com/users/344821/danica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1433971242, "post_id": 30766924, "comment_id": 49587166, "body": "@chqrlie It&#39;s signed, as can be seen in the LLVM output...but yes, that means it dies stupidly on a weird input character. Switching it to <code>int</code> slows it down very slightly."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1456728741, "post_id": 30766924, "comment_id": 59064152, "body": "GNU coreutils <code>tr</code> 8.23 is really fast, too, on an input of all-zeros.  I get 1.2GiB/s on my 3.7GHz sandybridge Linux desktop (dual channel 1600MHz DDR3).  The translation loop is a byte-at-a-time table lookup.  (ran under gdb, hit ^c once it was running, then single-stepped until I got out of the i/o functions and into a loop.  (actually <code>fin</code> a few times to get out of functions...))  Anyway, it does <code>movzx edx, byte [rbx+rax]</code> / <code>movzx edx, byte [rdx+table]</code> / <code>mov [rbx+rax], dl</code>, <code>add rax, 1</code> / <code>cmp&#47;ja</code>.  That avoids any branch mispredicts, and tr has to support an arbitrary mapping anyway."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1456729439, "post_id": 30766924, "comment_id": 59064406, "body": "IDK how your <code>tr</code> is so slow.  That&#39;s on OS X?  Maybe branch mispredicts?  But more likely, I/O buffering problems.  gzip almost certainly doesn&#39;t use SIMD; lossless compression tends not to be parallelizable."}], "answers": [{"comments": [{"owner": {"reputation": 26495, "user_id": 344821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/96CmN.png?s=128&g=1", "display_name": "Danica", "link": "https://stackoverflow.com/users/344821/danica"}, "edited": false, "score": 0, "creation_date": 1433969787, "post_id": 30767125, "comment_id": 49586391, "body": "Oh, good catch with the check; shouldn&#39;t really be relevant to the processing speed, though."}, {"owner": {"reputation": 26495, "user_id": 344821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/96CmN.png?s=128&g=1", "display_name": "Danica", "link": "https://stackoverflow.com/users/344821/danica"}, "edited": false, "score": 2, "creation_date": 1433969890, "post_id": 30767125, "comment_id": 49586442, "body": "Using the <code>_unlocked</code> functions doubles the speed, up to 16.5ish MiB/sec. Halfway there! :)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 26495, "user_id": 344821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/96CmN.png?s=128&g=1", "display_name": "Danica", "link": "https://stackoverflow.com/users/344821/danica"}, "edited": false, "score": 0, "creation_date": 1433969951, "post_id": 30767125, "comment_id": 49586480, "body": "@Dougal: Try increasing the buffer size"}, {"owner": {"reputation": 26495, "user_id": 344821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/96CmN.png?s=128&g=1", "display_name": "Danica", "link": "https://stackoverflow.com/users/344821/danica"}, "edited": false, "score": 0, "creation_date": 1433970029, "post_id": 30767125, "comment_id": 49586529, "body": "<code>1024*1024</code> didn&#39;t help; 10 times that slowed it down slightly."}, {"owner": {"reputation": 26495, "user_id": 344821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/96CmN.png?s=128&g=1", "display_name": "Danica", "link": "https://stackoverflow.com/users/344821/danica"}, "edited": false, "score": 0, "creation_date": 1433970206, "post_id": 30767125, "comment_id": 49586650, "body": "As noted in the question, I can&#39;t really use a raw file because the input is gzipped, and going to disk first would probably defeat the point."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 3, "last_activity_date": 1433970169, "last_edit_date": 1433970169, "creation_date": 1433969682, "answer_id": 30767125, "question_id": 30766924, "link": "https://stackoverflow.com/questions/30766924/how-fast-can-we-make-a-specific-tr/30767125#30767125", "title": "How fast can we make a specific tr?", "body": "<p>Your code is incorrect because you do not test for end of file at the right spot.  It is a <strong>very</strong> common mistake in <code>do {} while</code> loops.  I recommend to avoid this construct completely (except in macros to convert sequences of statements into a single statement).</p>\n\n<p>Also try and tell the glibc to perform fewer checks on the stream:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int c;\n    while ((c = getchar_unlocked()) != EOF) {\n        if (c == '\\0')\n            c = '@':\n        putchar_unlocked(c);\n    }\n}\n</code></pre>\n\n<p>You can also play with different buffer sizes, for example try these before the <code>while()</code> loop:</p>\n\n<pre><code>setvbuf(stdin, NULL, _IOFBF, 1024 * 1024);\nsetvbuf(stdout, NULL, _IOFBF, 1024 * 1024);\n</code></pre>\n\n<p>It should not have much impact if you use the utility as a filter with pipes, but it may be more efficient if you use files.</p>\n\n<p>If you use files, you can also <code>mmap</code> the file and use <code>memchr</code> to find the <code>'\\0'</code> bytes, or even <code>strchr</code> that might be faster and you can ensure there is a `'\\0`` at the end of the file (putting it there is a good way).</p>\n"}, {"comments": [{"owner": {"reputation": 26495, "user_id": 344821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/96CmN.png?s=128&g=1", "display_name": "Danica", "link": "https://stackoverflow.com/users/344821/danica"}, "edited": false, "score": 0, "creation_date": 1433970320, "post_id": 30767209, "comment_id": 49586707, "body": "<code>689MiB&#47;s</code>! Really didn&#39;t expect <code>stdio</code>&#39;s buffering to have so much overhead. Thanks. :)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1433970403, "post_id": 30767209, "comment_id": 49586748, "body": "This approach is tricky:  <code>read</code> can return <code>-1</code> if it was interrupted by a signal and it should be restarted. <code>write(1, buffer, size);</code> may return a smaller count for various reasons, and <code>-1</code> for the same reason as <code>read</code>, it should then be restarted.  Failing to handle this corner cases will produce hard to find bugs in production, usually at the worst moment...  Using the <code>stdio.h</code> functions is much safer and not much slower: use <code>fread</code> and <code>fwrite</code>."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1433970535, "post_id": 30767209, "comment_id": 49586813, "body": "@chqrlie: Already fixed.  And I believe that <code>fwrite</code> suffers from the same problems as <code>write</code>.  I&#39;ll add a note to that effect."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1433970847, "post_id": 30767209, "comment_id": 49586963, "body": "C11 7.21.8.2: <i>The <code>fwrite</code> function returns the number of elements successfully written, which will be less than <code>nmemb</code> only if a write error is encountered.</i>  I don&#39;t think the signal is considered a write error, only actual write errors and out of space.  Handling partial writes is still recommended and not very difficult nor costly."}, {"owner": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "reply_to_user": {"reputation": 26495, "user_id": 344821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/96CmN.png?s=128&g=1", "display_name": "Danica", "link": "https://stackoverflow.com/users/344821/danica"}, "edited": false, "score": 0, "creation_date": 1433970948, "post_id": 30767209, "comment_id": 49587026, "body": "@Dougal: It&#39;s not so much the buffering; reading one byte at a time, you have to call a function for each byte you read. If you read a block at a time, you&#39;re making 1/16384 as many function calls (in this example)."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "edited": false, "score": 0, "creation_date": 1433971456, "post_id": 30767209, "comment_id": 49587287, "body": "@cHao: using the <code>_unlocked</code> versions of <code>getchar()</code> and <code>putchar()</code> usually converts these function calls to inline macro expansions.  Using <code>fread</code> / <code>fwrite</code> removes extra checks for buffer limits."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 3, "creation_date": 1433971558, "post_id": 30767209, "comment_id": 49587350, "body": "You can combine the 2 tests in the loop by making the buffer one byte larger and setting a &#39;\\0&#39; at the end.  You then only need to test the position on matches, effectively dividing the number of tests by 2."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1433975304, "post_id": 30767209, "comment_id": 49588884, "body": "@Andrew Henle: true but give the buffer size, <code>int</code> is large enough."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 4, "last_activity_date": 1433971178, "last_edit_date": 1433971178, "creation_date": 1433970035, "answer_id": 30767209, "question_id": 30766924, "link": "https://stackoverflow.com/questions/30766924/how-fast-can-we-make-a-specific-tr/30767209#30767209", "title": "How fast can we make a specific tr?", "body": "<p>You need to use block reads and writes for speed.  (Even with a buffered I/O library like stdio.h, the cost of managing the buffer can be significant.)  Something like:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\nint main( void )\n{\n    char buffer[16384];\n    int size, i;\n    while ((size = read(0, buffer, sizeof buffer)) &gt; 0) {\n        for( i = 0; i &lt; size; ++i ) {\n            if (buffer[i] == '\\0') {\n                buffer[i] = '@';\n                // optionally, i += 64; since\n                // \"Once you've found a null byte, it's also guaranteed that there can't\n                // be another one for a hundred bytes or so\"\n            }\n        }\n        write(1, buffer, size);\n    }\n}\n</code></pre>\n\n<p>Naturally, compile with optimizations so that the compiler can transform indexing into pointer arithmetic if helpful.</p>\n\n<p>This version also lends itself well to SIMD optimizations if you still aren't meeting your speed targets (or a smart enough compiler may vectorize the <code>for</code> loop automatically).</p>\n\n<p>Furthermore, this code lacks robust error handling.  As @chqrlie mentions in a comment, you should retry when you get <code>-EINTR</code>, and you should handle partial writes.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1433975893, "post_id": 30768193, "comment_id": 49589077, "body": "That&#39;s a lot of suggestions, but it does not well serve the OPs problem: He uses pipes, so the API is inappropriate and the huge buffer is useless.  Error handling is absent (good for clarity, but bad for results), especially trying to <code>write</code> -1 bytes is calling for trouble. Multithreading read, translate and write phases or using asynchronous I/O is not for the faint of heart, it goes well beyond reasonable effort to reduce the bottleneck."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1433976401, "post_id": 30768193, "comment_id": 49589246, "body": "Yet another good illustration of how <code>do {} while</code> loops are mostly broken."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1433977038, "post_id": 30768193, "comment_id": 49589477, "body": "And your experience moving petabytes of data or doing IO on high-performance storage is?  Well, it&#39;s obviously zero else you would never even think of calling 4 MB &quot;huge&quot; or &quot;useless&quot;.  Do you really think multithreading and async IO are really &quot;not for the faint of heart&quot;?  I guess we just work and code in different worlds."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1433977463, "post_id": 30768193, "comment_id": 49589634, "body": "I am stating facts, 4MB is vastly larger than the pipe buffer, it does not help at all, the OP verified it.  <code>mmap</code> would be a good way to get closer to the metal, but it is a little tricky for huge files.  using a different thread for reading, translating and writing in this particular case is hardly useful and not so trivial.  You seem to master the art, give it a try and see what multiple you get.  You retaliating on the accepted answer shows little respect for actual results."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1433979184, "post_id": 30768193, "comment_id": 49590177, "body": "The fact that 4MB is vastly larger than the pipe buffer isn&#39;t going to hurt performance on <code>read()</code>.  And when accessing a fast disk system - which the OPs SSD could very well be - the larger buffer will improve performance.  Try it - get a disk system that can sustain reads and writes at a GB/sec or more.  The OP&#39;s &quot;verification&quot; consisted of changing the buffer used for <code>fopen()&#47;fread()&#47;fwrite()</code>. That does not apply to any performance differences that may arise in <code>read()&#47;write()</code> calls doing direct IO when using a different-sized buffer. <code>ii</code> being a size_t only matters with a &gt;2GB buffer."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1433979289, "post_id": 30768193, "comment_id": 49590201, "body": "A buffer 2GB or larger <b>is</b> too big - it can put extreme memory pressure on the machine, never mind that it won&#39;t work at all for a process with an ILP32 memory model.  And doing 64-bit math when 32 bit ones suffice could slow things down."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1433979500, "post_id": 30768193, "comment_id": 49590262, "body": "I agree that a large buffer will probably improve the performance for file based I/O.  The <code>O_DIRECT</code> flag is a good hint too! Handcrafting the loop gets another 50% increase from the OPs timings.  Make <code>ii</code> and <code>bytes</code> the same type for consistency, <code>int</code> is fine of course for any decent size buffer ;-)"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1456723877, "post_id": 30768193, "comment_id": 59062485, "body": "Depending on your I/O subsystem, doing really large sequential reads and then really large sequential writes will reduce disk seeks (compared with trying to stream both at once).  Also, create mode should be <code>0666</code>.  That&#39;s what <code>umask</code> is for: to give the user the option of which other/group bits they want to mask off."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1456724133, "post_id": 30768193, "comment_id": 59062574, "body": "Also, instead of rewriting in place, it might be best to copy while scanning and hand the new page off to the kernel with <code>vmsplice</code>.  Otherwise your write buffer has to be copied into the page cache.  OTOH, that would mean you&#39;d have to allocate a new buffer, and probably suffer TLB and cache misses while writing it."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1456741112, "post_id": 30768193, "comment_id": 59070609, "body": "@PeterCordes <code>sendfile()</code> is another option - one that would avoid copying the file data into and out of user space entirely."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1456742047, "post_id": 30768193, "comment_id": 59071271, "body": "That doesn&#39;t let you modify it, though"}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 0, "last_activity_date": 1433978733, "last_edit_date": 1433978733, "creation_date": 1433974251, "answer_id": 30768193, "question_id": 30766924, "link": "https://stackoverflow.com/questions/30766924/how-fast-can-we-make-a-specific-tr/30768193#30768193", "title": "How fast can we make a specific tr?", "body": "<p>First, as others have noted, don't use <code>getchar()/putchar()</code>, or even any of the FILE-based methods such as <code>fopen()/fread()/fwrite()</code>.  Use <code>open()/read()/write()</code> instead.</p>\n\n<p>If the file is already uncompressed on disk, do not use pipes.  If it is compressed, then you DO want to use a pipe in order remove an entire read/write cycle.  If you uncompress from disk back to disk, then replace the NUL characters, the data path is disk->memory/cpu->disk->memory/cpu->disk.  If you use a pipe, the path is disk->memory/cpu->disk.  If you're disk-limited, that extra read/write cycle will just about double the time it takes to process your gigabytes (or more) of data.</p>\n\n<p>One more thing - given your IO pattern and the amount of data your moving - read an entire multi-GB file, write the entire file - the page cache is only getting in your way.  Use direct IO, thusly in C on Linux (headers and robust error checking left off for clarity):</p>\n\n<pre><code>#define CHUNK_SIZE ( 1024UL * 1024UL * 4UL )\n#define NEW_CHAR '@'\nint main( int argc, char **argv )\n{\n    /* page-aligned buffer */\n    char *buf = valloc( CHUNK_SIZE );\n    /* just set \"in = 0\" to read a stdin pipe */\n    int in = open( argv[ 1 ], O_RDONLY | O_DIRECT );\n    int out = open( argv[ 2 ], O_WRONLY | O_CREAT | O_TRUNC | O_DIRECT, 0644 );\n\n    for ( ;; )\n    {\n        ssize_t bytes = read( in, buf, CHUNK_SIZE );\n        if ( bytes &lt; 0 )\n        {\n            if ( errno == EINTR )\n            {\n                continue;\n            }\n            break;\n        }\n        else if ( bytes == 0 )\n        {\n            break;\n        }\n\n        for ( int ii = 0; ii &lt; bytes; ii++ )\n        {\n            if ( !buf[ ii ] )\n            {\n                buf[ ii ] = NEW_CHAR;\n            }\n        }\n        write( out, buf, bytes );\n    }\n\n    close( in );\n    close( out );\n\n    return( 0 );\n}\n</code></pre>\n\n<p>Crank up the compiler optimization as high as it goes.  To use this code on real data, you do need to check the results of the <code>write()</code> call - direct IO on Linux is a real finicky beast.  I've had to close a file opened with O_DIRECT and reopen a it without direct IO set in order to write the last bytes of a file on Linux when the last bits weren't a multiple of a full page.</p>\n\n<p>If you want to go even faster, you can multithread the process - one thread reads, one thread translates chars, and another thread writes.  Use as many buffers, passing them from thread to thread, as necessary to keep the slowest part of the process busy at all times.</p>\n\n<p>If you're really interested in seeing how fast you can move data, multithread the reads/writes, too.  And if your filesystem support it, use asynchronous read/write.</p>\n"}, {"comments": [{"owner": {"reputation": 26495, "user_id": 344821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/96CmN.png?s=128&g=1", "display_name": "Danica", "link": "https://stackoverflow.com/users/344821/danica"}, "edited": false, "score": 0, "creation_date": 1433975319, "post_id": 30768332, "comment_id": 49588895, "body": "~900 MiB/s with clang -O3. We&#39;ve now moved well past the stage where this is the bottleneck. :)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 26495, "user_id": 344821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/96CmN.png?s=128&g=1", "display_name": "Danica", "link": "https://stackoverflow.com/users/344821/danica"}, "edited": false, "score": 1, "creation_date": 1433975461, "post_id": 30768332, "comment_id": 49588943, "body": "@Dougal: 8.5 to 900, that&#39;s the kind of multiple I live for ;-)"}, {"owner": {"reputation": 1295, "user_id": 1114328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d211889b453feb9210d9645cbcfd524e?s=128&d=identicon&r=PG", "display_name": "durka42", "link": "https://stackoverflow.com/users/1114328/durka42"}, "edited": false, "score": 1, "creation_date": 1433975867, "post_id": 30768332, "comment_id": 49589073, "body": "Hey! No using <code>sizeof</code> without parentheses! <a href=\"https://lkml.org/lkml/2012/7/11/103\" rel=\"nofollow noreferrer\">Where I come from</a>, you get shot for doing that :p"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 1295, "user_id": 1114328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d211889b453feb9210d9645cbcfd524e?s=128&d=identicon&r=PG", "display_name": "durka42", "link": "https://stackoverflow.com/users/1114328/durka42"}, "edited": false, "score": 0, "creation_date": 1433975985, "post_id": 30768332, "comment_id": 49589114, "body": "@durka42: I usually recommend always using <code>()</code> even if they are redundant, but I don&#39;t shoot programmers for that.  For clarity, I should probably not use <code>sizeof</code> here at all."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 1295, "user_id": 1114328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d211889b453feb9210d9645cbcfd524e?s=128&d=identicon&r=PG", "display_name": "durka42", "link": "https://stackoverflow.com/users/1114328/durka42"}, "edited": false, "score": 0, "creation_date": 1433981096, "post_id": 30768332, "comment_id": 49590704, "body": "@durka42: Ahh, another example of Linus being idiotic.  To take his example, <code>sizeof (x) + 1</code> is no less ambiguous than <code>sizeof x + 1</code>.  What you should write is <code>(sizeof x) + 1</code>."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1433981592, "post_id": 30768332, "comment_id": 49590798, "body": "@Ben Voigt: the extra space in <code>sizeof (x)</code> is indeed confusing.  Linus is not being idiotic, he is being anal and idiomatic.  For the mere mortals who see <code>sizeof</code> as a function, <code>sizeof(x) + 1</code> is not ambiguous at all.  Coding styles are useful to make code readable for humans. Consistency is a key feature for readability.  Enforcing parentheses on <code>sizeof</code> is indeed more consistent.  Would you also remove redundant parentheses in <code>(x + 7) &amp; ~7</code> ?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1433981760, "post_id": 30768332, "comment_id": 49590839, "body": "@chqrlie: The problem with <code>sizeof x + 1</code> is that people may not remember that <code>sizeof</code> has higher precedence than <code>+</code>.  The problem with <code>sizeof (x)+1</code> is... guess what... people may not remember that <code>sizeof</code> has higher precedence than <code>+</code>.  Only in <code>(sizeof x) + 1</code> do the parentheses make the parse clear.  It&#39;s not a matter of removing redundant parentheses, it&#39;s a matter of putting them where they do some good."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1456724986, "post_id": 30768332, "comment_id": 59062859, "body": "Interestingly, ICC13 <a href=\"http://goo.gl/uXWPK1\" rel=\"nofollow noreferrer\">auto-vectorizes @Ben&#39;s simple loop (with <code>pcmpeqb</code> / <code>pblendvb</code>)</a>, but gcc/clang don&#39;t.  None of the three auto-vectorize your bit-hack, so it has a branch mispredict on every uint64_t that has a hit.  Still, if you&#39;re not building with ICC, your bithack is a big win.  Oh also, you&#39;re missing a close-paren in <code>while ((size = read(0, buffer, BUFFER_SIZE) != 0) {</code>"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 4, "last_activity_date": 1456743218, "last_edit_date": 1456743218, "creation_date": 1433974978, "answer_id": 30768332, "question_id": 30766924, "link": "https://stackoverflow.com/questions/30766924/how-fast-can-we-make-a-specific-tr/30768332#30768332", "title": "How fast can we make a specific tr?", "body": "<p>Combining ideas from the various answers with some extra bithacks, here is an optimized version:</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\n#define BUFFER_SIZE  16384\n#define REPLACE_CHAR  '@'\n\nint main(void) {\n    /* define buffer as uint64_t to force alignment */\n    /* make it one slot longer to allow for loop guard */\n    uint64_t buffer[BUFFER_SIZE/8 + 1];\n    ssize_t size, chunk;\n    uint64_t *p, *p_end;\n    uint64_t rep8 = (uint8_t)REPLACE_CHAR * 0x0101010101010101ULL;\n\n    while ((size = read(0, buffer, BUFFER_SIZE)) != 0) {\n        if (size &lt; 0) {\n            if (errno == EINTR) continue;\n            fprintf(stderr, \"read error: %s\\n\", strerror(errno));\n            return 1;\n        }\n        p = buffer;\n        p_end = p + ((size + 7) &gt;&gt; 3);\n        *p_end = 0ULL; /* force a 0 at the end */\n        for (;; p++) {\n#define LOWBITS   0x0101010101010101ULL\n#define HIGHBITS  0x8080808080808080ULL\n            uint64_t m = ((*p - LOWBITS) &amp; ~*p &amp; HIGHBITS);\n            if (m != 0) {\n                if (p &gt;= p_end) break;\n                m |= m &gt;&gt; 1;\n                m |= m &gt;&gt; 2;\n                m |= m &gt;&gt; 4;\n                *p |= m &amp; rep8;\n            }\n        }\n        for (unsigned char *pc = (unsigned char *)buffer;\n             (chunk = write(1, pc, (size_t)size)) != size;\n             pc += chunk, size -= chunk) {\n            if (chunk &lt; 0) {\n                if (errno == EINTR) continue;\n                fprintf(stderr, \"write error: %s\\n\", strerror(errno));\n                return 2;\n            }\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 26495, "user_id": 344821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/96CmN.png?s=128&g=1", "display_name": "Danica", "link": "https://stackoverflow.com/users/344821/danica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 3, "accepted_answer_id": 30768332, "answer_count": 4, "score": 7, "last_activity_date": 1456743218, "creation_date": 1433968940, "last_edit_date": 1456607167, "question_id": 30766924, "link": "https://stackoverflow.com/questions/30766924/how-fast-can-we-make-a-specific-tr", "title": "How fast can we make a specific tr?", "body": "<p>I had to replace all the null bytes in a file with another character (I arbitrarily chose <code>@</code>), and was pretty surprised that <code>tr '\\00' '@'</code> was about 1/4 the speed of <code>gzip</code>:</p>\n\n<pre><code>$ pv &lt; lawl | gzip &gt; /dev/null\n^C13MiB 0:00:04 [28.5MiB/s] [====&gt;                             ] 17% ETA 0:00:18\n$ pv &lt; lawl | tr '\\00' '@' &gt; /dev/null\n^C58MiB 0:00:08 [7.28MiB/s] [==&gt;                               ]  9% ETA 0:01:20\n</code></pre>\n\n<p>My real data file is 3GB gzipped and took 50 minutes to <code>tr</code>, and I'll actually need to do this on many such files, so it's not a completely academic problem. Note that reading from disk (a reasonably fast SSD here), or <code>pv</code>, isn't the bottleneck in either case; both <code>gzip</code> and <code>tr</code> are using 100% CPU, and <code>cat</code> is much faster:</p>\n\n<pre><code>$ pv &lt; lawl | cat &gt; /dev/null\n 642MiB 0:00:00 [1.01GiB/s] [================================&gt;] 100%\n</code></pre>\n\n<p>This code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int ch;\n    while ((ch = getchar()) != EOF) {\n        if (ch == '\\00') {\n            putchar('@');\n        } else {\n            putchar(ch);\n        }\n    }\n}\n</code></pre>\n\n<p>compiled with <code>clang -O3</code> is somewhat faster:</p>\n\n<pre><code>$ pv &lt; lawl | ./stupidtr &gt; /dev/null\n^C52MiB 0:00:06 [ 8.5MiB/s] [=&gt;                                ]  8% ETA 0:01:0\n</code></pre>\n\n<p>Compiling with <code>gcc -O4 -mtune=native -march=native</code> (4.8.4) is comparable, maybe very slightly faster. Adding <code>-march=native</code> to clang (<code>Apple LLVM version 6.1.0 (clang-602.0.53) (based on LLVM 3.6.0svn)</code>) produces an identical binary.</p>\n\n<p>This is presumably just because the generic processing code for replacements in <code>tr</code> is replaced with constants and the checks can be compiled down. The LLVM IR (<code>clang -S -O3 stupidtr.c</code>) looks pretty good.</p>\n\n<p>I guess <code>gzip</code> must be faster because it's doing something SIMD instructions or something. Is it possible to get this up to <code>gzip</code> speeds?</p>\n\n<p>Some specifications, if they're relevant:</p>\n\n<ul>\n<li><p>The file is a CSV; the null byte can only occur in a certain field, but some of the other fields are variable-length, so you can't just seek around arbitrarily. Most lines have a null byte in that field. I suppose this means you could do a <a href=\"http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm\" rel=\"nofollow\">Boyer-Moore</a> search for <code>,\\00,</code>, if that'd help. Once you've found a null byte, it's also guaranteed that there can't be another one for a hundred bytes or so.</p></li>\n<li><p>A typical file is about 20 GiB uncompressed, but are bz2 compressed on disk, if that's relevant.</p></li>\n<li><p>You can parallelize if you want, though <code>gzip</code> does this with one so it shouldn't be necessary. I'll be running this either on a quad-core i7 running OSX or a two-vCPU cloud server running Linux.</p></li>\n<li><p>Both machines I might run on have 16GB of RAM.</p></li>\n</ul>\n"}, {"tags": ["c++", "c", "visual-studio-2010", "dll", "code-injection"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1433969404, "post_id": 30766877, "comment_id": 49586166, "body": "You&#39;re not checking that the <code>VirtualAlloc</code> calls are succeeding - are they?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1433973289, "post_id": 30766877, "comment_id": 49588145, "body": "That debug info you posted is not useful, as all it shows are the DLL&#39;s that are loaded when your application is running."}, {"owner": {"reputation": 19, "user_id": 3245778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3Uca.jpg?s=128&g=1", "display_name": "cyberjitz", "link": "https://stackoverflow.com/users/3245778/cyberjitz"}, "edited": false, "score": 0, "creation_date": 1433986277, "post_id": 30766877, "comment_id": 49591916, "body": "Which is what I was getting at.  It seems to execute with no problems."}, {"owner": {"reputation": 19, "user_id": 3245778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3Uca.jpg?s=128&g=1", "display_name": "cyberjitz", "link": "https://stackoverflow.com/users/3245778/cyberjitz"}, "edited": false, "score": 0, "creation_date": 1433986346, "post_id": 30766877, "comment_id": 49591935, "body": "Jonathan, I&#39;m a C++ newb so I&#39;m not sure how to code in a check for VirtualAlloc"}, {"owner": {"reputation": 19, "user_id": 3245778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3Uca.jpg?s=128&g=1", "display_name": "cyberjitz", "link": "https://stackoverflow.com/users/3245778/cyberjitz"}, "edited": false, "score": 0, "creation_date": 1434033049, "post_id": 30766877, "comment_id": 49617356, "body": "Ok I added printf(&quot;%d\\n&quot;,MyFuncAddress); and printf(%d\\n&quot;,DataAddress); and they&#39;re not coming back as null. I received 80216064 from MyFuncAddress and 80281600 from DataAddress.  Stepping through the code, could this mean the next step to create the thread is failing?"}], "answers": [{"comments": [{"owner": {"reputation": 12628, "user_id": 12339804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/677529a68dbdac610158cfc55ec65aec?s=128&d=identicon&r=PG&f=1", "display_name": "timur", "link": "https://stackoverflow.com/users/12339804/timur"}, "edited": false, "score": 0, "creation_date": 1577183587, "post_id": 59467119, "comment_id": 105114303, "body": "I feel this answer in its current form lacks research and specifics. would you mind expanding on where the quote comes from?"}], "tags": [], "owner": {"reputation": 21, "user_id": 7610530, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DHjTzw9hToE/AAAAAAAAAAI/AAAAAAAAAG8/QcYO1zzkJPI/photo.jpg?sz=128", "display_name": "Walid Hafid", "link": "https://stackoverflow.com/users/7610530/walid-hafid"}, "is_accepted": false, "score": 0, "last_activity_date": 1577182085, "creation_date": 1577182085, "answer_id": 59467119, "question_id": 30766877, "link": "https://stackoverflow.com/questions/30766877/c-injection-code/59467119#59467119", "title": "C++ Injection Code", "body": "<p>I don't think you can inject code into explorer.exe</p>\n\n<blockquote>\n  <p>In Windows 7 and higher, it's not permitted to inject into core Windowsprocesses such as <strong>explorer.exe</strong> or into other users' processes.</p>\n</blockquote>\n"}], "owner": {"reputation": 19, "user_id": 3245778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3Uca.jpg?s=128&g=1", "display_name": "cyberjitz", "link": "https://stackoverflow.com/users/3245778/cyberjitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577182085, "creation_date": 1433968807, "question_id": 30766877, "link": "https://stackoverflow.com/questions/30766877/c-injection-code", "title": "C++ Injection Code", "body": "<p>(See below for entire code I'm referring to)</p>\n\n<p>I'm trying to run this code (<a href=\"http://www.codeproject.com/Tips/740480/Code-Injection-A-Generic-Approach-for-bit-and-bit\" rel=\"nofollow\">http://www.codeproject.com/Tips/740480/Code-Injection-A-Generic-Approach-for-bit-and-bit</a>) in Visual C++ 2010 Express to inject code into explorer.exe, but when I run it from the command line, it returns \"Error!\" which means thread is returning as 0.  I'm assuming   </p>\n\n<pre><code>    LPVOID DataAddress = VirtualAllocEx(p, NULL, sizeof(PARAMETERS), MEM_RESERVE | MEM_COMMIT, PAGE_READWRITE);\nWriteProcessMemory(p, DataAddress, &amp;data, sizeof(PARAMETERS), NULL);\n\nHANDLE thread = CreateRemoteThread(p, NULL, 0, (LPTHREAD_START_ROUTINE)MyFuncAddress, DataAddress, 0, NULL);\n</code></pre>\n\n<p>is not able to allocate space for notepad.exe or find notepad for some reason?</p>\n\n<p>I know very little of C++ and I'm trying to understand this.  I've verified the correct pid for explorer is being returned if that helps any (printed pid and verified through tasklist).  In Visual C++, I'm running it as a blank project and when I build it, it builds without error. So, my general thought process is: the code works, but it's not able to properly allocate space or execute notepad for some reason?  I'm familiar with Python and what I typically do is print out a bunch of the steps for debugging.  What should I be printing in this code to help debug?</p>\n\n<p>Also, below the code, I've placed the debug information. </p>\n\n<pre><code>/*\n    Application:    Code injection into a running process.\n    Author:            _RT\n    Dated:            07-March-2014\n*/\n\n#include &lt;windows.h&gt;\n#include &lt;fstream&gt;\n#include &lt;stdlib.h&gt;\n\n#pragma comment(lib,\"advapi32.lib\")\n#pragma comment(lib,\"user32.lib\")\n\ntypedef BOOL (WINAPI* CreatePrcssParam)(LPCTSTR, LPTSTR, LPSECURITY_ATTRIBUTES, \n    LPSECURITY_ATTRIBUTES, BOOL, DWORD, LPVOID, LPCTSTR, LPVOID, LPVOID);\n\nstruct PARAMETERS{\n    LPVOID CreateProcessInj;\n    char lpApplicationName[50];\n    char lpCommandLine[10];\n    LPSECURITY_ATTRIBUTES lpProcessAttributes;\n    LPSECURITY_ATTRIBUTES lpThreadAttributes;\n    BOOL bInheritHandles;\n    DWORD dwCreationFlags;\n    LPVOID lpEnvironment;\n    LPCTSTR lpCurrentDirectory;\n    LPVOID lpStartupInfo;\n    LPVOID lpProcessInformation;\n};\n\nint privileges();\nDWORD myFunc(PARAMETERS * myparam);\nDWORD Useless();    //used to calculate size of myFunc()\n\nint main()\n{\n    privileges();\n\n    _STARTUPINFOA si;\n    PROCESS_INFORMATION pi;\n\n    ZeroMemory(&amp;si, sizeof(si));\n    si.cb = sizeof(si);\n    ZeroMemory(&amp;pi, sizeof(pi));\n\n    DWORD pid;\n    GetWindowThreadProcessId(FindWindow(NULL, \"Start Menu\"), &amp;pid);\n\n    HANDLE p;\n    p = OpenProcess(PROCESS_ALL_ACCESS, false, pid);\n    if (p == NULL)\n    {\n        printf(\"ERROR\");\n        return 1; //error\n    }\n\n    char * AppName = \"C:\\\\Windows\\\\system32\\\\notepad.exe\";\n    char * CmdLine = \"\";\n\n  //Writing the structure vital for CreateProcess function\n    LPVOID StrtUpInfo = VirtualAllocEx(p, NULL, sizeof(si), MEM_RESERVE | MEM_COMMIT, PAGE_READWRITE);\n    WriteProcessMemory(p, StrtUpInfo, &amp;si, sizeof(si), NULL);\n\n    LPVOID PrcssInfo = VirtualAllocEx(p, NULL, sizeof(si), MEM_RESERVE | MEM_COMMIT, PAGE_READWRITE);\n    WriteProcessMemory(p, PrcssInfo, &amp;pi, sizeof(pi), NULL);\n  //=========================================================\n\n    PARAMETERS data = {0};\n    HMODULE Kernel32 = LoadLibrary(\"Kernel32.dll\");\n    data.CreateProcessInj = GetProcAddress(Kernel32, \"CreateProcessA\");\n    strcpy_s(data.lpApplicationName,AppName);\n    strcpy_s(data.lpCommandLine, CmdLine);\n    data.lpProcessAttributes = NULL;\n    data.lpThreadAttributes = NULL;\n    data.bInheritHandles = FALSE;\n    data.dwCreationFlags = NULL;\n    data.lpEnvironment = NULL;\n    data.lpCurrentDirectory = NULL;\n    data.lpStartupInfo = StrtUpInfo;\n    data.lpProcessInformation = PrcssInfo;\n\n    DWORD size_myFunc = (PBYTE)Useless - (PBYTE)myFunc;  //this gets myFunc's size\n\n    //Writing the code part of myFunc -- Instructions to be executed\n    LPVOID MyFuncAddress = VirtualAllocEx(p, NULL, size_myFunc, MEM_RESERVE | MEM_COMMIT, PAGE_EXECUTE_READWRITE);\n    WriteProcessMemory(p, MyFuncAddress, (void*)myFunc, size_myFunc, NULL);\n\n    //Writing the data part of myFunc -- Parameters of the functios\n    LPVOID DataAddress = VirtualAllocEx(p, NULL, sizeof(PARAMETERS), MEM_RESERVE | MEM_COMMIT, PAGE_READWRITE);\n    WriteProcessMemory(p, DataAddress, &amp;data, sizeof(PARAMETERS), NULL);\n\n    HANDLE thread = CreateRemoteThread(p, NULL, 0, (LPTHREAD_START_ROUTINE)MyFuncAddress, DataAddress, 0, NULL);\n    if (thread != 0){\n        //injection completed, not we can wait for it to end and free the memory\n        WaitForSingleObject(thread, INFINITE);   //this waits until thread thread has finished\n        VirtualFree(MyFuncAddress, 0, MEM_RELEASE); //free myFunc memory\n        VirtualFree(DataAddress, 0, MEM_RELEASE); //free data memory\n        CloseHandle(thread);\n        CloseHandle(p);  //don't wait for the thread to finish, just close the handle to the process\n    }\n    else{\n        printf(\"Error!\");\n    }\n    return EXIT_SUCCESS;\n}\n\nstatic DWORD myFunc(PARAMETERS * myparam){\n\n    CreatePrcssParam CreatePrcss = (CreatePrcssParam)myparam-&gt;CreateProcessInj;\n    BOOL result = CreatePrcss((LPCTSTR)myparam-&gt;lpApplicationName, NULL, \n    myparam-&gt;lpProcessAttributes, myparam-&gt;lpThreadAttributes, \n    myparam-&gt;bInheritHandles, myparam-&gt;dwCreationFlags, myparam-&gt;lpEnvironment, \n    myparam-&gt;lpCurrentDirectory, myparam-&gt;lpStartupInfo, myparam-&gt;lpProcessInformation);\n    return 0;\n}\n\nstatic DWORD Useless(){\n    return 0;\n}\n\n//this function is needed to get some extra privileges so your code will be able to work without conflicts with the system\nint privileges(){\n    HANDLE Token;\n    TOKEN_PRIVILEGES tp;\n    if (OpenProcessToken(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, &amp;Token))\n    {\n        LookupPrivilegeValue(NULL, SE_DEBUG_NAME, &amp;tp.Privileges[0].Luid);\n        tp.PrivilegeCount = 1;\n        tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;\n        if (AdjustTokenPrivileges(Token, 0, &amp;tp, sizeof(tp), NULL, NULL) == 0){\n            return 1; //FAIL\n        }\n        else{\n            return 0; //SUCCESS\n        }\n    }\n    return 1;\n}\n</code></pre>\n\n<p>Debug info:</p>\n\n<pre><code>'inj_01.exe': Loaded 'C:\\Users\\root\\Documents\\Visual Studio 2010\\Projects\\inj_01\\Debug\\inj_01.exe', Symbols loaded.\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\ntdll.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\kernel32.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\KernelBase.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\user32.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\gdi32.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\lpk.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\usp10.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\msvcrt.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\advapi32.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\sechost.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\rpcrt4.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\sspicli.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\cryptbase.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\msvcr100d.dll', Symbols loaded.\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\imm32.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\msctf.dll', Symbols loaded (source information stripped).\nThe thread 'Win32 Thread' (0x11b8) has exited with code 0 (0x0).\nThe program '[6244] inj_01.exe: Native' has exited with code 0 (0x0).\n</code></pre>\n\n<p>Thanks in advance for any help/pointers</p>\n"}, {"tags": ["c", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 4996342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/97c9b07d8e716dbc4efcd91a1b854e9a?s=128&d=identicon&r=PG&f=1", "display_name": "Zuoyang Ding", "link": "https://stackoverflow.com/users/4996342/zuoyang-ding"}, "edited": false, "score": 0, "creation_date": 1433986343, "post_id": 30766925, "comment_id": 49591933, "body": "Thank you for your help, it works. By the way, could you help me to understand why the elements in array k changed after I passed it into the add function?( I mean it shows that after the original string there is \\377\\117&quot;)"}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": true, "score": 1, "last_activity_date": 1433968941, "creation_date": 1433968941, "answer_id": 30766925, "question_id": 30766854, "link": "https://stackoverflow.com/questions/30766854/static-array-pass-to-a-function-in-c/30766925#30766925", "title": "static array pass to a function in c", "body": "<pre><code>printf(\"%s\\n\", test1-&gt;a);\n</code></pre>\n\n<p>By using the <code>s</code> conversion specifier you say to the compiler that <code>test1-&gt;a</code> is a string but your arrays don't have a null terminator character: they are not strings and the <code>printf</code> is invoking undefined behavior.</p>\n\n<p>Reserve an additional extra byte set to <code>0</code> in your arrays or print them like this:</p>\n\n<pre><code>printf(\"%.*s\\n\", sizeof test1-&gt;a, test1-&gt;a);\n</code></pre>\n\n<p>the above call print a non null terminated array.</p>\n"}], "owner": {"reputation": 57, "user_id": 4996342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/97c9b07d8e716dbc4efcd91a1b854e9a?s=128&d=identicon&r=PG&f=1", "display_name": "Zuoyang Ding", "link": "https://stackoverflow.com/users/4996342/zuoyang-ding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 30766925, "answer_count": 1, "score": 1, "last_activity_date": 1433968941, "creation_date": 1433968715, "question_id": 30766854, "link": "https://stackoverflow.com/questions/30766854/static-array-pass-to-a-function-in-c", "title": "static array pass to a function in c", "body": "<p>i find there if I create a static array like char a[10] and fill it up by a for loop (like fill 'a' to each space). Then pass its first element's address to a function like add(char* b). I find the elements in the array will change. I am confusing about it. Here is my code and some output by gdb.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nstruct test{\nchar a[5];\nchar b[5];\nchar c[5];\nchar d[5];\n};\nvoid add (char* n, struct test* test1){\n   for (int i=0; i&lt;5; i++){\n    test1-&gt;a[i]=*n;\n    n++;\n   }\n   for (int i=0; i&lt;5; i++){\n    test1-&gt;b[i]=*n;\n    n++;\n   }\n   for (int i=0; i&lt;5; i++){\n    test1-&gt;c[i]=*n;\n    n++;\n   }\n   for (int i=0; i&lt;5; i++){\n    test1-&gt;d[i]=*n;\n    n++;\n   }\n   printf(\"%s\\n\", test1-&gt;a);\n   printf(\"%s\\n\", test1-&gt;b);\n   printf(\"%s\\n\", test1-&gt;c);\n   printf(\"%s\\n\", test1-&gt;d);\n }\n int main(){\n   char k[20];\n   struct test test1;\n   for(int i=0; i&lt;20; i++){\n     scanf(\"%c\", &amp;k[i]);\n   }\n   add(k, &amp;test1);\n }\n</code></pre>\n\n<p>when I use gdb to print the n, I got 0x7fff5fbffb20 \"abcdefghij1234567890\\377\\177\". So why there is \"\\377\\177\"? \nAnd also, the output of this program is </p>\n\n<pre><code>habcdefghij1234567890\nfghij1234567890\n1234567890\n67890ere\n</code></pre>\n\n<p>why?</p>\n"}, {"tags": ["c", "embedded"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1433967093, "post_id": 30766352, "comment_id": 49584757, "body": "Pardon? Context? Understand?"}], "answers": [{"tags": [], "owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "is_accepted": false, "score": 1, "last_activity_date": 1433967977, "creation_date": 1433967977, "answer_id": 30766654, "question_id": 30766352, "link": "https://stackoverflow.com/questions/30766352/does-b64-pton-work-if-input-contains-special-characters-i-am-using-it-in-c-co/30766654#30766654", "title": "does b64_pton() work if input contains special characters? I am using it in C code", "body": "<p><a href=\"http://www.opensource.apple.com/source/OpenSSH/OpenSSH-95.1.5/openssh/openbsd-compat/base64.c\" rel=\"nofollow\"><code>b64_pton</code></a> converts base64 to binary.  There should be no 'special characters' in your <a href=\"https://en.wikipedia.org/wiki/Base64\" rel=\"nofollow\">base64</a> strings.</p>\n"}], "owner": {"reputation": 19, "user_id": 2431019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a633f112f3ecced459a5a09258a0ba?s=128&d=identicon&r=PG", "display_name": "avishkar", "link": "https://stackoverflow.com/users/2431019/avishkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433967977, "creation_date": 1433967009, "question_id": 30766352, "link": "https://stackoverflow.com/questions/30766352/does-b64-pton-work-if-input-contains-special-characters-i-am-using-it-in-c-co", "title": "does b64_pton() work if input contains special characters? I am using it in C code", "body": "<p>I have c code where b64_pton() is failing is when input passed contains special characters. Without special characters its working fine. </p>\n"}, {"tags": ["c", "sockets", "winapi", "network-programming", "winsock"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1433967815, "post_id": 30766180, "comment_id": 49585196, "body": "The RST is a response to &quot;unsolicited&quot; traffic. This traffic was intended for the now non-existent process. The TCP stack will respond with a RST to such traffic. It doesn&#39;t &quot;initiate&quot; a RST due to process termination."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1433968029, "post_id": 30766180, "comment_id": 49585344, "body": "Do you have a citation for your claim that Windows will cause a RST packet to be sent?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1433972825, "post_id": 30766180, "comment_id": 49587971, "body": "What packet are you going to get if the remote server loses power?  Or if a backhoe cuts its internet connection?"}, {"owner": {"reputation": 495, "user_id": 4787110, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8b213b2cc2d790bdbff792d9f3dac642?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/4787110/paul"}, "reply_to_user": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1433995926, "post_id": 30766180, "comment_id": 49594163, "body": "@David Schwartz I captured the RST packet in Wireshark. But I&#39;m not sure if this is always the case (and this is why I&#39;m asking!). Note that the send buffer was empty when I terminated the process (unlike what I&#39;ve read elsewhere that if the send buffer is not empty then an RST packet will be sent)."}], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1433968195, "post_id": 30766614, "comment_id": 49585458, "body": "CLOSE_WAIT is not timed out. You&#39;re thinking of TIME_WAIT. Very confused, and mostly irrelevant."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1433968345, "post_id": 30766614, "comment_id": 49585557, "body": "@EJP Yes, you&#39;re right. I updated the answer. I honestly don&#39;t think that makes the whole answer &quot;very confused&quot;, and most definitely it&#39;s not irrelevant. Clearly, the OP doesn&#39;t know how a TCP connection is closed, a simple yes/no answer would be of little use. At best, a comment is enough - a downvote is, in my opinion, utterly unnecessary. Do you really think that <i>this answer is not useful</i>?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1433976049, "post_id": 30766614, "comment_id": 49589132, "body": "Hmmm.  This looks like it describes a graceful socket shutdown.  If I remember rightly, isn&#39;t a non-graceful shutdown somewhat different?"}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1433978391, "post_id": 30766614, "comment_id": 49589927, "body": "@HarryJohnston Yes, it&#39;s different, depending on what happened to the receiving side. If the receiving process crashed or was killed for any reason, <code>send()</code> will return <code>ECONNRESET</code>. At the network level, either the receiver replies with <code>RST</code> packets (if the host is still alive), or won&#39;t reply at all."}, {"owner": {"reputation": 495, "user_id": 4787110, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8b213b2cc2d790bdbff792d9f3dac642?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/4787110/paul"}, "edited": false, "score": 0, "creation_date": 1433995203, "post_id": 30766614, "comment_id": 49593973, "body": "&quot;RST is used to respond to unexpected traffic, not to close a connection&quot; When an RST packet is sent in response to closing a process, it is sent to tell the other end that I am gone, if an RST packet is not sent then the other end would still think that it is connected to me."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 495, "user_id": 4787110, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8b213b2cc2d790bdbff792d9f3dac642?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/4787110/paul"}, "edited": false, "score": 0, "creation_date": 1433996143, "post_id": 30766614, "comment_id": 49594225, "body": "@paul The other end wouldn&#39;t think it was connected because a packet with the FIN flag set would tell it that it wasn&#39;t."}, {"owner": {"reputation": 495, "user_id": 4787110, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8b213b2cc2d790bdbff792d9f3dac642?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/4787110/paul"}, "reply_to_user": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1433996651, "post_id": 30766614, "comment_id": 49594355, "body": "@David Schwartz Yes, a FIN packet indicates disconnection. But so does an RST packet (when the other end receives an RST packet, it will assume that I am gone)."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 495, "user_id": 4787110, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8b213b2cc2d790bdbff792d9f3dac642?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/4787110/paul"}, "edited": false, "score": 0, "creation_date": 1434016248, "post_id": 30766614, "comment_id": 49604905, "body": "@paul Right, so this comment is incorrect, &quot;<i>if an RST packet is not sent then the other end would still think that it is connected to me</i>&quot;. The other end could tell that you&#39;re disconnected even if no RST is sent because a FIN could be sent."}, {"owner": {"reputation": 495, "user_id": 4787110, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8b213b2cc2d790bdbff792d9f3dac642?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/4787110/paul"}, "reply_to_user": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1434017163, "post_id": 30766614, "comment_id": 49605506, "body": "@David Schwartz How will the other end receive a FIN packet if Windows does not send a FIN packet on process termination, but rather it sends an RST packet?!"}, {"owner": {"reputation": 495, "user_id": 4787110, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8b213b2cc2d790bdbff792d9f3dac642?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/4787110/paul"}, "reply_to_user": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1434017315, "post_id": 30766614, "comment_id": 49605607, "body": "@David Schwartz I think we have a misunderstanding here. When I said: &quot;if an RST packet is not sent then the other end would still think that it is connected to me&quot;, I was only talking about process termination and not in general. So if on process termination Windows does not send an RST packet, then the other end would still think that it is connected to me."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 495, "user_id": 4787110, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8b213b2cc2d790bdbff792d9f3dac642?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/4787110/paul"}, "edited": false, "score": 0, "creation_date": 1434017691, "post_id": 30766614, "comment_id": 49605887, "body": "@paul That&#39;s still wrong, because if Windows sends a FIN packet, the other end would not think it was connected to you. So sending a RST packet is not required to tell the other end that the connection is closed."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 495, "user_id": 4787110, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8b213b2cc2d790bdbff792d9f3dac642?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/4787110/paul"}, "edited": false, "score": 0, "creation_date": 1434017743, "post_id": 30766614, "comment_id": 49605923, "body": "@paul We all agree the connection is closed. The question is whether Windows sends a RST packet. And clearly that&#39;s not required, because a FIN packet would do as well. The question is whether Windows is <i>guaranteed</i> to send a RST packet."}, {"owner": {"reputation": 495, "user_id": 4787110, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8b213b2cc2d790bdbff792d9f3dac642?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/4787110/paul"}, "edited": false, "score": 0, "creation_date": 1434018293, "post_id": 30766614, "comment_id": 49606345, "body": "&quot;if Windows sends a FIN packet, the other end would not think it was connected to you&quot; What do you mean? If Windows sends a FIN packet to the other end, this will tell the other end that I am gone, and hence the other end was indeed connected to me before receiving the FIN packet! Note that I am talking about the application level (so when I say the other end receives a FIN packet, this means <code>recv()</code> returns <code>0</code>)."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1434021520, "post_id": 30766614, "comment_id": 49608566, "body": "I really don&#39;t understand why would Windows send an RST packet to close a connection. RST packets are not sent spontaneously, they are sent in response to unexpected traffic (which could be coming in for a socket that wasn&#39;t properly closed), so, in principle, if the sender keeps the socket open but doesn&#39;t send anything, there will be no RST. On the other hand, FIN packets can be sent anytime to request connection termination. If Windows sends an RST when a connection is closed, that makes no sense to me. But maybe I&#39;m missing something."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1434025876, "post_id": 30766614, "comment_id": 49611656, "body": "@FilipeGon&#231;alves Try, for example, closing a connection before reading all the data the other side sent."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1434055102, "post_id": 30766614, "comment_id": 49631515, "body": "@DavidSchwartz: If there is pending data to be sent when the process is killed, very likely the RST is the result of the &quot;unsolicited&quot; ACK of the previous data packet."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1434055950, "post_id": 30766614, "comment_id": 49631981, "body": "@jxh Notice he said pending data to be <i>read</i>, not <i>sent</i>. It actually makes sense to send RST in this case, because if you didn&#39;t read it yet, it&#39;s as if it arrived after the socket was closed."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1434240439, "post_id": 30766614, "comment_id": 49695408, "body": "Your answer is mostly about the states entered via FIN. Not useful.  The question is about RST."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1434270400, "post_id": 30766614, "comment_id": 49700235, "body": "@EJP No, the answer explains what happens when a TCP  connection is properly terminated, showing that RST is not involved."}], "tags": [], "owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "is_accepted": false, "score": 3, "last_activity_date": 1433968222, "last_edit_date": 1433968222, "creation_date": 1433967879, "answer_id": 30766614, "question_id": 30766180, "link": "https://stackoverflow.com/questions/30766180/is-it-guaranteed-that-an-rst-packet-will-be-sent-when-a-process-terminates/30766614#30766614", "title": "Is it guaranteed that an RST packet will be sent when a process terminates?", "body": "<p>TCP is not supposed to send an RST packet when a connection is closed. To close a connection, TCP goes through the following states on the client side:</p>\n\n<ol>\n<li>Send a FIN packet. This action will change TCP state to <code>FIN_WAIT_1</code>.</li>\n<li>In <code>FIN_WAIT_1</code>, TCP waits for an acknowledgement (ACK) from the server.</li>\n<li>Once the acknowledgement is received, TCP enters <code>FIN_WAIT_2</code>.</li>\n<li>In <code>FIN_WAIT_2</code>, TCP waits for a <code>FIN</code> packet from the server</li>\n<li>Once <code>FIN</code> arrives, the client sends an <code>ACK</code> and enters <code>TIME_WAIT</code></li>\n<li><code>TIME_WAIT</code> is exited after a while (typically, 30 secs. or 1 minute). The purpose of this state is to make it possible to resend the final <code>ACK</code> to the server in case it was lost. </li>\n</ol>\n\n<p>There is no RST packet anywhere. RST is used to respond to unexpected traffic, <strong>not</strong> to close a connection.</p>\n\n<p>For example, if you send a TCP packet to port 80, and the server is not running an HTTP server (and assuming the packet makes all the way to the server and is not blocked / ignored), then an RST reply is sent back to the client.</p>\n"}], "owner": {"reputation": 495, "user_id": 4787110, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8b213b2cc2d790bdbff792d9f3dac642?s=128&d=identicon&r=PG&f=1", "display_name": "paul", "link": "https://stackoverflow.com/users/4787110/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1433968222, "creation_date": 1433966463, "question_id": 30766180, "link": "https://stackoverflow.com/questions/30766180/is-it-guaranteed-that-an-rst-packet-will-be-sent-when-a-process-terminates", "title": "Is it guaranteed that an RST packet will be sent when a process terminates?", "body": "<p>If I have a process with a connected socket, and I terminate this process, then Windows will cause an RST packet to be sent.</p>\n\n<p>Is it guaranteed (is it documented somewhere) that an RST packet will always be sent when a process terminates, or could a FIN packet be sent instead?</p>\n"}, {"tags": ["c", "unix", "linux-kernel", "kernel", "linux-mint"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1434010799, "post_id": 30766163, "comment_id": 49601142, "body": "its value is the value of the symbol, you normally don&#39;t have to know the value. Write your code with this symbol and never make any assumption about its real value. This is the way you will have portable code."}], "answers": [{"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 3, "last_activity_date": 1433967362, "last_edit_date": 1433967362, "creation_date": 1433966923, "answer_id": 30766320, "question_id": 30766163, "link": "https://stackoverflow.com/questions/30766163/how-to-determine-system-value-for-posix-path-max/30766320#30766320", "title": "How to determine system value for _POSIX_PATH_MAX", "body": "<p>The tool to use, according to POSIX, is named <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/utilities/getconf.html\" rel=\"nofollow\">getconf</a>(1):</p>\n\n<pre><code>  $ getconf _POSIX_PATH_MAX\n  256\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1434005857, "post_id": 30767167, "comment_id": 49598021, "body": "System includes should be address via <code>#include &lt;file.h&gt;</code>."}], "tags": [], "owner": {"reputation": 31, "user_id": 4009349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf398e43dfbeae268fc748e78ced521a?s=128&d=identicon&r=PG&f=1", "display_name": "Verma", "link": "https://stackoverflow.com/users/4009349/verma"}, "is_accepted": false, "score": 0, "last_activity_date": 1433969845, "creation_date": 1433969845, "answer_id": 30767167, "question_id": 30766163, "link": "https://stackoverflow.com/questions/30766163/how-to-determine-system-value-for-posix-path-max/30767167#30767167", "title": "How to determine system value for _POSIX_PATH_MAX", "body": "<p>One more way to get it's value.</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"unistd.h\"\n#include \"limits.h\"\n\nint main()\n{\n    printf (\"Value :: %d \\n\", _POSIX_PATH_MAX);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 0, "last_activity_date": 1434005340, "creation_date": 1434005340, "answer_id": 30773590, "question_id": 30766163, "link": "https://stackoverflow.com/questions/30766163/how-to-determine-system-value-for-posix-path-max/30773590#30773590", "title": "How to determine system value for _POSIX_PATH_MAX", "body": "<p><code>#define</code> one of the following </p>\n\n<pre><code>#define _POSIX_SOURCE\n#define _POSIX_C_SOURCE 1 /* or any value larger then 1 */\n#define _XOPEN_SOURCE\n</code></pre>\n\n<p>before <code>#include</code>ing <code>&lt;limits.h&gt;</code>and the compiler will see <code>_POSIX_PATH_MAX</code>.</p>\n\n<p>You also can specify this on the command line via the compiler option <code>-D</code>:</p>\n\n<pre><code>gcc -c main.c -D_POSIX_C_SOURCE=1\n</code></pre>\n\n<p>for example.</p>\n"}], "owner": {"reputation": 567, "user_id": 4038819, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/24159fc54ff9f0df8d995d304474d2c0?s=128&d=identicon&r=PG&f=1", "display_name": "robert williams", "link": "https://stackoverflow.com/users/4038819/robert-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1976, "favorite_count": 0, "answer_count": 3, "score": 6, "last_activity_date": 1434005340, "creation_date": 1433966405, "last_edit_date": 1433967134, "question_id": 30766163, "link": "https://stackoverflow.com/questions/30766163/how-to-determine-system-value-for-posix-path-max", "title": "How to determine system value for _POSIX_PATH_MAX", "body": "<p>Can anyone please tell me how to find the system value for <code>_POSIX_PATH_MAX</code> in Linux mint? I know that it is available in the &lt;limits.h> file but I do not know how to find its value.</p>\n"}, {"tags": ["c", "arrays", "sizeof", "c99", "undefined-behavior"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 2, "creation_date": 1433965749, "post_id": 30765899, "comment_id": 49584036, "body": "see <a href=\"http://stackoverflow.com/q/19785518/1708801\">Is dereferencing null pointer valid in sizeof operation</a> and <a href=\"http://stackoverflow.com/q/28714018/1708801\">Does not evaluating the expression to which sizeof is applied make it legal to dereference a null or invalid pointer inside sizeof in C++?</a>"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1433973827, "post_id": 30765899, "comment_id": 49588320, "body": "I have added an extra answer to the linked question. My concern here is about situations when arr pointer is declared as, for example, <code>int n = 10; int (*arr)[n] = NULL;</code>, i.e. it is a pointer to a VLA. In C language the argument of <code>sizeof</code> is evaluated at run-time if it has VLA type (!). The question in this case is whether <code>sizeof arr[0]</code> is supposed to produce undefined behavior. Most likely it is."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1433974187, "post_id": 30765899, "comment_id": 49588489, "body": "In fact, the linked question seems to be restricted to non-VLA contexts, while this question does not immediately have such restriction. This makes it a non-duplicate."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433976735, "post_id": 30765899, "comment_id": 49589377, "body": "As an aside, consider <code>malloc(known_len * sizeof *ptr)</code> instead of <code>malloc(known_len * sizeof(int))</code>.  Should the type of <code>ptr</code> change, or obscured (buried deep in some <code>.h</code> file), this style is more often correct and easier to maintain."}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 17, "last_activity_date": 1433965873, "last_edit_date": 1592644375, "creation_date": 1433965873, "answer_id": 30765985, "question_id": 30765899, "link": "https://stackoverflow.com/questions/30765899/can-sizeofarr0-lead-to-undefined-behavior/30765985#30765985", "title": "Can &quot;sizeof(arr[0])&quot; lead to undefined behavior?", "body": "<p>The expression <code>ptr[0]</code> will not be evaluated in <code>sizeof(ptr[0])</code>. Size will be determined by just using the type of <code>ptr[0]</code> at compile time.</p>\n<h3>C11: 6.5.3.4:</h3>\n<blockquote>\n<p>The <code>sizeof</code> operator yields the size (in bytes) of its operand, which may be an expression or the parenthesized name of a type. <strong>The size is determined from the type of the operand</strong>. The result is an integer. <strong>If the type of the operand is a variable length array type, the operand is evaluated; otherwise, the operand is not evaluated</strong> and the result is aninteger constant.</p>\n</blockquote>\n<p>That means, there is no undefined behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1433975664, "post_id": 30766026, "comment_id": 49589000, "body": "In what cases should <code>sizeof</code> have to actually <i>execute</i> its arguments at run-time?  Even when the argument to sizeof involves a VLA, is there any reason <code>sizeof</code> should ever have to do anything more than return a hidden variable whose value will be a valid number unless the program has <i>already</i> engaged in UB?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1433982501, "post_id": 30766026, "comment_id": 49591032, "body": "@dasblinkenlight: My point is that even if the argument to sizeof includes something like a function call or pointer dereference, I see no basis for the function to be executed or the pointer to be dereferenced even in the VLA case.  I suppose if one said <code>sizeof int[foo()]</code> that might require evaluating <code>foo</code>, but I don&#39;t see any usefulness to such a construct."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1434052503, "post_id": 30766026, "comment_id": 49629967, "body": "@dasblinkenlight: Fun fact: <code>typedef</code> can behave as an executable statement(!)  A declaration <code>typedef int arr[i++];</code> will increment <code>i</code> and create a declaration which is only valid for its scope."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1434053475, "post_id": 30766026, "comment_id": 49630512, "body": "@supercat Your <code>typedef</code> gave me an idea for an example where <code>sizeof</code> would be evaluated in a traditional sense, complete with side effects! <a href=\"http://ideone.com/PZnlUY\" rel=\"nofollow noreferrer\">Here it is</a>. Curiously, <code>i</code> does not get incremented unless I add a second dimension."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1434053900, "post_id": 30766026, "comment_id": 49630773, "body": "@dasblinkenlight: I find it bizarre that the Standard as written requires the evaluation of expressions which are <i>syntactically irrelevant</i> to the result of the operation. If the only legal use for VLAs were in declarations of variables holding variable-length arrays, even a <code>sizeof</code> that wouldn&#39;t yield a constant value (as in your example) would never need to do any run-time evaluation of its arguments.  Only in very weird cases will the result of a computation in <code>sizeof</code> affect its value, and I don&#39;t think forbidding such cases would have weakened the expressiveness of the language."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1434057306, "post_id": 30766026, "comment_id": 49632640, "body": "@dasblinkenlight: In your example, there&#39;s no semantic reason the compiler should evaluate <code>i++</code>; even though the <code>sizeof</code> expression isn&#39;t constant, the <i>syntax</i> of the expression would render the expression <code>i++</code> irrelevant.  For the value of an expression within <code>sizeof</code> to be relevant, it must be used in the <i>creation of a type</i> within the expression, as with <code>sizeof (int[i++])</code>, and I can&#39;t think of any cases where such behavior would actually be useful."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1455323431, "post_id": 30766026, "comment_id": 58454964, "body": "@supercat perhaps: <code>int (*ptr)[f()] = malloc( sizeof(int[n][f()]) );</code> The compiler can&#39;t just decide not to call <code>f()</code> (the second one) here because it needs to find the right amount of bytes. So the options seem to be: (a) what the standard says, (b) undefined behaviour, (c) constraint violation.  Option (b) seems undesirable. (c) would be nice but perhaps it is not so easy to formulate a rule that implements that intent without also ruling out some valid code."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455327986, "post_id": 30766026, "comment_id": 58456013, "body": "@M.M: In that example, the return value of <code>f()</code> is used in the creation of the <i>type</i> <code>int[n][f()]</code>.  A more interesting case might be something like <code>sizeof (*(char[f()]))</code>,since the size of a pointer to an array of integers should by independent of the length of the array; I&#39;m not sure whether it would be much value in specifying whether <code>f()</code> is evaluated in that case, however."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1455328181, "post_id": 30766026, "comment_id": 58456046, "body": "@supercat in your example it&#39;s unspecified whether <code>f()</code> is called . I think there is some value in having a bettter specification as evinced by the original example this question is about (it&#39;s annoying that that is UB as it means you can&#39;t use <code>p = malloc(n * sizeof *p);</code> for VLAs unless you&#39;re happy to pretend that nothing bad will happen for this particular UB"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455330744, "post_id": 30766026, "comment_id": 58456542, "body": "@M.M: The prohibition on zero-sized types is IMHO counter-productive.  It would have been better to say that just about the only thing specified about the address if a zero-sized array would be that not be a trap representation.  One couldn&#39;t dereference it, not add or subtract a non-zero value from it, and the pointer may be arbitrarily compare equal to any other (including null) but if code doesn&#39;t perform any forbidden actions with the pointer its existence shouldn&#39;t cause any sort of UB."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 11, "last_activity_date": 1433966016, "creation_date": 1433966016, "answer_id": 30766026, "question_id": 30765899, "link": "https://stackoverflow.com/questions/30765899/can-sizeofarr0-lead-to-undefined-behavior/30766026#30766026", "title": "Can &quot;sizeof(arr[0])&quot; lead to undefined behavior?", "body": "<p>This will not cause undefined behavior.</p>\n\n<p>With the exception of taking the size of variable-length arrays, <code>sizeof</code> is a compile-time constant expression. The compiler processes the expression to determine its type, without producing the code to evaluate the expression at compile time. Therefore, the value at <code>ptr[0]</code> (which is an uninitialized pointer) does not matter at all.</p>\n\n<p>Moreover, if you would like to allocate ten integers, you should be calling <code>malloc</code> like this:</p>\n\n<pre><code>int *ptr = malloc(known_len * sizeof(ptr[0])); \n</code></pre>\n\n<p>Otherwise, you allocate ten bytes, which is too small for storing ten integers. Note that in the expression above <code>ptr</code> is uninitialized at the time of the call, which is perfectly fine for <code>sizeof</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "is_accepted": false, "score": 1, "last_activity_date": 1433966137, "creation_date": 1433966137, "answer_id": 30766075, "question_id": 30765899, "link": "https://stackoverflow.com/questions/30765899/can-sizeofarr0-lead-to-undefined-behavior/30766075#30766075", "title": "Can &quot;sizeof(arr[0])&quot; lead to undefined behavior?", "body": "<p>As an expression (not a declaration), <code>ptr[0]</code> is identical to <code>*ptr</code>.</p>\n\n<p>As long as the type of <code>ptr</code> is known and it is not pointing to void, <code>sizeof</code> is guaranteed to work on <code>sizeof(*ptr)</code> as well as <code>sizeof(ptr[0])</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 271, "user_id": 989748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3321b11048ed755e229e3827843d4c?s=128&d=identicon&r=PG", "display_name": "mrsmith", "link": "https://stackoverflow.com/users/989748/mrsmith"}, "edited": false, "score": 0, "creation_date": 1433966833, "post_id": 30766189, "comment_id": 49584608, "body": "You are right, intent was malloc(known_len * sizeof(int)). I&#39;ll fix the question."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455323076, "post_id": 30766189, "comment_id": 58454880, "body": "suggest deleting this answer now that the question has been changed"}], "tags": [], "owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "is_accepted": false, "score": 1, "last_activity_date": 1433966855, "last_edit_date": 1433966855, "creation_date": 1433966502, "answer_id": 30766189, "question_id": 30765899, "link": "https://stackoverflow.com/questions/30765899/can-sizeofarr0-lead-to-undefined-behavior/30766189#30766189", "title": "Can &quot;sizeof(arr[0])&quot; lead to undefined behavior?", "body": "<p>The code is evil.</p>\n\n<pre><code>size_t known_len = 10; \nint *ptr = malloc(known_len); \nsize_t size = known_len * sizeof(ptr[0]); \nassert(size == known_len * sizeof(int)); \n</code></pre>\n\n<p>The size of the memory allocation from your view point is 10 bytes.\nThat is not 10 pointers to int.</p>\n\n<pre><code> known_len / sizeof(ptr[0]) \n</code></pre>\n\n<p>will give you the number of integers that the allocation can hold.</p>\n\n<p>As is, you are likely to go off the end of the allocation, leading to undefined behavior.</p>\n\n<p>Consider malloc(known_length * sizeof ptr[0]);</p>\n"}, {"comments": [{"owner": {"reputation": 271, "user_id": 989748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3321b11048ed755e229e3827843d4c?s=128&d=identicon&r=PG", "display_name": "mrsmith", "link": "https://stackoverflow.com/users/989748/mrsmith"}, "edited": false, "score": 0, "creation_date": 1433982171, "post_id": 30768200, "comment_id": 49590955, "body": "Considering answers for no VLA case, there seem to be no problem with VLA either: void foo(int len)  {      int vla[len];      printf(&quot;%zu\\n&quot;, sizeof(vla[0]));       int *p = vla;      printf(&quot;%zu\\n&quot;, sizeof(p[0]));  } In first case vla is an variable length array and although sizeof(vla) is evaluated in run time, the size in question is sizeof(vla[0]) still can be computed at compile time. Anyways vla is guaranteed to be not null.  In second case p is just a pointer to vla: expression in sizeof(p) must not be evaluated same as in sizeof(p[0])."}, {"owner": {"reputation": 271, "user_id": 989748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3321b11048ed755e229e3827843d4c?s=128&d=identicon&r=PG", "display_name": "mrsmith", "link": "https://stackoverflow.com/users/989748/mrsmith"}, "edited": false, "score": 0, "creation_date": 1433982655, "post_id": 30768200, "comment_id": 49591068, "body": "So if &quot;int (*a)[n]&quot; is actually a &quot;pointer to a VLA type int[n]&quot; size of which can&#39;t be known compile time. There may be room for UB."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 271, "user_id": 989748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3321b11048ed755e229e3827843d4c?s=128&d=identicon&r=PG", "display_name": "mrsmith", "link": "https://stackoverflow.com/users/989748/mrsmith"}, "edited": false, "score": 0, "creation_date": 1433983783, "post_id": 30768200, "comment_id": 49591337, "body": "@mrsmith: Examples in your first comment are not demonstrative, since <code>sizeof</code> is not applied to an expression of VLA type. It takes a deliberately crafted expression to produce such a <code>sizeof</code> example and <code>int (*a)[n]</code> is one way to achieve that."}, {"owner": {"reputation": 271, "user_id": 989748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3321b11048ed755e229e3827843d4c?s=128&d=identicon&r=PG", "display_name": "mrsmith", "link": "https://stackoverflow.com/users/989748/mrsmith"}, "edited": false, "score": 0, "creation_date": 1433990699, "post_id": 30768200, "comment_id": 49592937, "body": "it took me a while to understand what <code>int (*a)[n]</code> means. But it is indeed problematic. Your example &quot;works&quot; in GCC 4.1.2 with <code>-std=c99</code> and <code>i</code> is not being incremented, However I have no idea how to explain it from the standard standpoint."}, {"owner": {"reputation": 271, "user_id": 989748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3321b11048ed755e229e3827843d4c?s=128&d=identicon&r=PG", "display_name": "mrsmith", "link": "https://stackoverflow.com/users/989748/mrsmith"}, "edited": false, "score": 0, "creation_date": 1433990850, "post_id": 30768200, "comment_id": 49592972, "body": "in fact <code>i</code> is not being incremented even in much simpler case <code>void baz(int len)  {      int b[len];      int i = 0;      printf(&quot;%zu\\n&quot;, sizeof(b[++i]));      printf(&quot;%d\\n&quot;, i);  }</code> will print <code>4</code> and <code>0</code>."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 271, "user_id": 989748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3321b11048ed755e229e3827843d4c?s=128&d=identicon&r=PG", "display_name": "mrsmith", "link": "https://stackoverflow.com/users/989748/mrsmith"}, "edited": false, "score": 0, "creation_date": 1433990978, "post_id": 30768200, "comment_id": 49593000, "body": "@mrsmith: GCC used to contain a bug in this specific behavior, which was eventually fixed. However, I don&#39;t remember which versions of GCC had the bug and which version had it fixed. GCC version used by Coliru works properly: <a href=\"http://coliru.stacked-crooked.com/a/fa3f47394f9fa3a4\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/fa3f47394f9fa3a4</a>. Note that <code>i</code> gets incremented. I suspect that your 4.1.2 is still buggy in that regard."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 271, "user_id": 989748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3321b11048ed755e229e3827843d4c?s=128&d=identicon&r=PG", "display_name": "mrsmith", "link": "https://stackoverflow.com/users/989748/mrsmith"}, "edited": false, "score": 0, "creation_date": 1433991147, "post_id": 30768200, "comment_id": 49593039, "body": "@mrsmith:: Your &quot;much simpler&quot; example (with <code>int b[len]</code>) is not relevant to the issue. In that example <code>sizeof</code> is applied to an <code>int</code> value <code>b[i++]</code>. <code>int</code> is not VLA. So, the expression is not supposed to be evaluated and <code>i</code> is not supposed to be incremented. It is not enough to just &quot;have&quot; a VLA &quot;somewhere&quot; under <code>sizeof</code>, it is important to make sure that <code>sizeof</code> is <i>applied directly to VLA type</i>. Which is why I said that it takes some elaborate crafting to produce a run-time evaluated <code>sizeof</code> example."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 271, "user_id": 989748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3321b11048ed755e229e3827843d4c?s=128&d=identicon&r=PG", "display_name": "mrsmith", "link": "https://stackoverflow.com/users/989748/mrsmith"}, "edited": false, "score": 0, "creation_date": 1433991879, "post_id": 30768200, "comment_id": 49593219, "body": "A test in GCC 4.8.3 shows that <code>i</code> is properly incremented in my example."}, {"owner": {"reputation": 271, "user_id": 989748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3321b11048ed755e229e3827843d4c?s=128&d=identicon&r=PG", "display_name": "mrsmith", "link": "https://stackoverflow.com/users/989748/mrsmith"}, "edited": false, "score": 0, "creation_date": 1433997864, "post_id": 30768200, "comment_id": 49594713, "body": "Thanks for the explanation!"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 271, "user_id": 989748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3321b11048ed755e229e3827843d4c?s=128&d=identicon&r=PG", "display_name": "mrsmith", "link": "https://stackoverflow.com/users/989748/mrsmith"}, "edited": false, "score": 0, "creation_date": 1434050045, "post_id": 30768200, "comment_id": 49628506, "body": "@mrsmith: To understand what&#39;s going on, it might be helpful to consider the effect of <code>if (z) typedef int arr[i++];</code>.  One wouldn&#39;t normally think a typedef should be an <i>executable</i> statement, but the people who added VLAs to the standard apparently thought it should be.  Frankly, I think it would have been better to omit VLAs and have a &quot;stalloc&quot; which would behave like &quot;malloc&quot; except that &quot;stalloc&quot; calls would be required to be matched with &quot;stfree&quot; calls in LIFO order, with <i>defined</i> behaviors matching malloc/free; any compiler should be able to supply stalloc/stfree implementations..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1434050170, "post_id": 30768200, "comment_id": 49628584, "body": "...by simply saying <code>#define stalloc(x) malloc(x)</code> <code>#define stfree(x) free(x)</code>, but systems that could use stack memory could achieve a speed boost with code that properly exploited stalloc/stfree.  As it is, making <code>typedef</code> into an executable statement strikes me as being frankly bizarre."}, {"owner": {"reputation": 271, "user_id": 989748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3321b11048ed755e229e3827843d4c?s=128&d=identicon&r=PG", "display_name": "mrsmith", "link": "https://stackoverflow.com/users/989748/mrsmith"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1434051411, "post_id": 30768200, "comment_id": 49629336, "body": "@supercat: There is an <code>alloca()</code> call for stack memory allocation. It also doesn&#39;t require matching <code>free()</code> call."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 271, "user_id": 989748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3321b11048ed755e229e3827843d4c?s=128&d=identicon&r=PG", "display_name": "mrsmith", "link": "https://stackoverflow.com/users/989748/mrsmith"}, "edited": false, "score": 0, "creation_date": 1434053294, "post_id": 30768200, "comment_id": 49630414, "body": "@mrsmith: I&#39;m aware of <code>alloca()</code>; the fact that it neither requires nor accommodates any sort of &quot;free&quot; causes difficulties in many implementations and also limits its usefulness in certain looping contexts. In any case, having <code>typedef</code> behave as an executable statement seems bizarre.  I wonder how much had to be changed in gcc to make it accommodate that pattern?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 271, "user_id": 989748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3321b11048ed755e229e3827843d4c?s=128&d=identicon&r=PG", "display_name": "mrsmith", "link": "https://stackoverflow.com/users/989748/mrsmith"}, "edited": false, "score": 0, "creation_date": 1455323049, "post_id": 30768200, "comment_id": 58454873, "body": "@mrsmith the standard says that a subexpression may or may not be evaluated if the result of it does not affect the size"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455323700, "post_id": 30768200, "comment_id": 58455035, "body": "My view is that the standard does indeed say <code>int (*p)[n] = NULL; p = malloc(sizeof p[0]);</code> is undefined behaviour, however I think the standard should be regarded as defective in this area.  The committee probably erred on the side of caution (or the side of &quot;take less time to sort out this unimportant detail&quot;) and just said that all VLA arguments to sizeof may be evaluted; as opposed to taking the time to formulate and get feedback on a rule that would say this case must not be evaluated (but other cases obviously do require evaluation)."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1455330985, "post_id": 30768200, "comment_id": 58456591, "body": "There are an absurd number of situations where the Standard could define behaviors for zero cost on most implementations beyond the fact that compilers would no longer be able to use them as an excuse for dead-code elimination, and where avoiding UB would in require adding code that would serve no other purpose, and which an optimizer wouldn&#39;t be able to remove."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 2, "last_activity_date": 1433974783, "last_edit_date": 1433974783, "creation_date": 1433974305, "answer_id": 30768200, "question_id": 30765899, "link": "https://stackoverflow.com/questions/30765899/can-sizeofarr0-lead-to-undefined-behavior/30768200#30768200", "title": "Can &quot;sizeof(arr[0])&quot; lead to undefined behavior?", "body": "<p>In general case, if I'm missing something, dereferencing a null pointer under <code>sizeof</code> <em>can</em> lead to undefined behavior. Since C99, <code>sizeof</code> is not a purely compile time construct. The operand of <code>sizeof</code> is evaluated at run-time if the operand type is a VLA.</p>\n\n<p>Consider the following example </p>\n\n<pre><code>unsigned n = 10;\nint (*a)[n] = NULL; // `a` is a pointer to a VLA \n\nunsigned i = 0;\nsizeof a[i++];      // applying `sizeof` to a VLA\n</code></pre>\n\n<p>According to the C99 standard, the argument of <code>sizeof</code> is supposed to be evaluated (i.e. <code>i</code> is supposed to get incremented). Yet I'm not entirely sure that the null-point dereference in <code>a[0]</code> is supposed to produce undefined behavior here.</p>\n"}], "owner": {"reputation": 271, "user_id": 989748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a3321b11048ed755e229e3827843d4c?s=128&d=identicon&r=PG", "display_name": "mrsmith", "link": "https://stackoverflow.com/users/989748/mrsmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 974, "favorite_count": 4, "answer_count": 5, "score": 16, "last_activity_date": 1434047708, "creation_date": 1433965586, "last_edit_date": 1434047708, "question_id": 30765899, "link": "https://stackoverflow.com/questions/30765899/can-sizeofarr0-lead-to-undefined-behavior", "title": "Can &quot;sizeof(arr[0])&quot; lead to undefined behavior?", "body": "<p>There is a well known pattern of figuring out array length:</p>\n\n<pre><code>int arr[10]; \nsize_t len = sizeof(arr) / sizeof(arr[0]); \nassert(len == 10); \n</code></pre>\n\n<p>This pattern applies to static arrays and auto arrays of constant size. It also applies to variable length arrays in C99. </p>\n\n<p>I want to apply similar idea for figuring out dynamic array size in bytes: </p>\n\n<pre><code>size_t known_len = 10; \nint *ptr = malloc(known_len * sizeof(int)); \nsize_t size = known_len * sizeof(ptr[0]); \nassert(size == known_len * sizeof(int)); \n</code></pre>\n\n<p>This is nicer than <code>known_len * sizeof(int)</code> because <code>sizeof(ptr[0])</code> doesn't refer to actual array element type. Hence it doesn't require reader of the code to know the type. </p>\n\n<p>However it is unclear to me whether expression <code>sizeof(ptr[0])</code> can lead to undefined behavior. As it is expanded: </p>\n\n<pre><code>sizeof(ptr[0]) -&gt; sizeof(*((ptr) + (0))) -&gt; sizeof(*ptr) \n</code></pre>\n\n<p>The result expression is questionable in case if <code>ptr</code> is <code>0</code>: </p>\n\n<pre><code>sizeof(*((int*) 0)) \n</code></pre>\n\n<p>According to a C99 standard: </p>\n\n<blockquote>\n  <p>(C99, 6.3.2.3p3 ): \"An integer constant expression with the value <code>0</code>,\n  or such an expression cast to type <code>void *</code>, is called a null pointer\n  constant.\"  Dereferencing a null pointer is undefined behavior.</p>\n  \n  <p>(C99, 6.5.3.2.p4) \"If an invalid value has been assigned to the\n  pointer, the behavior of the unary <code>*</code> operator is undefined.87)\"</p>\n  \n  <p>87): \"Among the invalid values for dereferencing a pointer by the\n  unary <code>*</code> operator are a null pointer, an address inappropriately\n  aligned for the type of object pointed to, and the address of an\n  object after the end of its lifetime.\"</p>\n</blockquote>\n\n<p>But it's never specified whether sizeof of such expression can lead to undefined behavior. In fact such sizeof should be evaluated at compile time. </p>\n\n<p>My questions are: </p>\n\n<ul>\n<li>Can the expression <code>sizeof(ptr[0])</code> be used in the code when type of <code>ptr</code> is known and the value of <code>ptr</code> is not known? </li>\n<li>Can such use be justified according to C99 standard? GNU GCC spec? </li>\n</ul>\n"}, {"tags": ["c", "pointers", "linked-list"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1433965255, "post_id": 30765763, "comment_id": 49583760, "body": "This is not C++ (cannot use <code>malloc</code> without casting, should use smart pointers in C++ or <code>new</code> if you must use raw pointers)."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1433965425, "post_id": 30765763, "comment_id": 49583862, "body": "@VladfomMoscow Does c work without the <code>struct</code> keyword nowadays?"}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1433965477, "post_id": 30765763, "comment_id": 49583903, "body": "@crashmstr: you don&#39;t need to cast results of malloc in C."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1433965483, "post_id": 30765763, "comment_id": 49583905, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 Yes it works if you will use a typedef.:)"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "reply_to_user": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 1, "creation_date": 1433965573, "post_id": 30765763, "comment_id": 49583945, "body": "@rost0031 I know that and I did not say that you needed to cast the results in C. I said that since there was no casting of <code>malloc</code>, <i>it could not be C++</i>, which was how it was originally tagged."}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1433965670, "post_id": 30765763, "comment_id": 49583993, "body": "@crashmstr: sorry, I misunderstood your meaning since the question was already tagged correctly by the time I looked at it."}, {"owner": {"reputation": 107, "user_id": 2511059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8bfbbad8d016380e34b3ea9b3595ec1?s=128&d=identicon&r=PG", "display_name": "blue boy", "link": "https://stackoverflow.com/users/2511059/blue-boy"}, "edited": false, "score": 0, "creation_date": 1433966608, "post_id": 30765763, "comment_id": 49584492, "body": "help i am struct.new to programming"}], "answers": [{"tags": [], "owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "is_accepted": false, "score": 0, "last_activity_date": 1433966677, "creation_date": 1433966677, "answer_id": 30766242, "question_id": 30765763, "link": "https://stackoverflow.com/questions/30765763/insertion-in-linked-list/30766242#30766242", "title": "insertion in linked list -", "body": "<p>You shouldn't call it a \"double pointer\" because that would be a pointer to a <code>double</code>.  It is a pointer to a pointer, and it is used to allow the function to alter the value of an argument which happens to be a pointer.  If you're familiar with C#, it's like an <code>out</code> argument.  In this situation the <code>l</code> argument used to get both IN and OUT behavior, but you may often see this used for output only.</p>\n\n<p>Since this function returns type <code>void</code> it very well could have been written without the use of the pointer to a pointer like this:</p>\n\n<pre><code>list * insert_list(list *l, item_type x) {\n{\n    list *p; /* temporary pointer */\n    p = malloc(sizeof(list));\n    p-&gt;item = x;\n    p-&gt;next = l; // note that this is not *l here\n    return p;\n}\n</code></pre>\n\n<p>This change would require the code that calls the function to update it's own handle to the list since the head of the list is what's being changed.</p>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 107, "user_id": 2511059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8bfbbad8d016380e34b3ea9b3595ec1?s=128&d=identicon&r=PG", "display_name": "blue boy", "link": "https://stackoverflow.com/users/2511059/blue-boy"}, "edited": false, "score": 0, "creation_date": 1433968459, "post_id": 30766433, "comment_id": 49585633, "body": "@blue boy: the <i>correct</i> way to thank responders is to upvote their answers and to accept the most helpful one."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1433968387, "last_edit_date": 1433968387, "creation_date": 1433967305, "answer_id": 30766433, "question_id": 30765763, "link": "https://stackoverflow.com/questions/30765763/insertion-in-linked-list/30766433#30766433", "title": "insertion in linked list -", "body": "<p>This function performs a very simple task: it inserts a <code>list</code> node at\nthe position for which it receives a pointer.  There is nothing\nspecial about <em>double pointers</em>, they are just pointers to pointers.  They hold the address of a pointer, which contains the address of an object.\n<code>void **l</code> contains the address of a <code>list *</code> pointer. <code>*l</code> retrieves\nthis address and <code>*l = p</code> stores it.</p>\n\n<p><code>malloc</code> is used to allocate a\n<code>list</code> structure, <code>p</code> receives the address of the allocated structure.\nThe code is somewhat sloppy as <code>p</code> is not checked for <code>NULL</code> before\ndereferencing it.  If <code>malloc</code> fails because of lack of memory, the\nprogram will invoke undefined behaviour, hopefully stopping with a\nsegmentation fault or something potentially worse.</p>\n\n<p>The node is initialized, its <code>next</code> pointer is set to the node pointed\nto by the <code>l</code> argument, and finally the new node's address is stored\nat the address passed as the <code>l</code> argument.  The effect is simple: the node is inserted at <code>*l</code>.</p>\n\n<p>This method is clever ad it allows the same function to insert a new node anywhere is a list. For example:</p>\n\n<pre><code>list *head = NULL;\n...\n/* Insert a LIST_A node at the beginning of the list */\ninsert_list(&amp;head, LIST_A);\n...\n/* insert a LIST_B element as the second node in the list */\ninsert_list(&amp;head-&gt;next, LIST_B);\n...\n/* find the end of the list */\nlist *node;\nfor (node = head; node-&gt;next; node = node-&gt;next)\n    continue;\n\n/* insert a LIST_Z node at the end of the list */\ninsert_list(&amp;node-&gt;next, LIST_Z);\n</code></pre>\n\n<p>The only tricky thing above is the concept of pointer itself, here is a simple overview:</p>\n\n<ul>\n<li>Memory can be conceptualized as a (large) array of bytes, addresses are offsets in this array.</li>\n<li><code>char</code> variables by definition are single bytes,</li>\n<li><code>int</code> variables occupies a number of bytes specific to the architecture of the system, typically 4 or 8 bytes in current hardware.</li>\n<li>Think of pointers as variables holding the address in memory of another variable. They need to be large enough to hold any valid address in the system, in current systems with more than 4 GB of physical and addressable memory, they are 64 bit long and occupy 8 bytes.</li>\n<li>There is a special address value <code>NULL</code> which represents no object and is used to specify that a given pointer does not point to any real object. The address <code>0</code> is used for this purpose. <code>malloc</code> will return <code>NULL</code> if it cannot allocate the memory requested, the return value should be tested, as storing a value at this address is forbidden and usually caught as an invalid access (segmentation fault).</li>\n</ul>\n\n<p>This summary is purposely simplistic.  I used the term <em>variable</em> instead of <em>object</em> to avoid the confusion with OOP concepts.</p>\n"}], "owner": {"reputation": 107, "user_id": 2511059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8bfbbad8d016380e34b3ea9b3595ec1?s=128&d=identicon&r=PG", "display_name": "blue boy", "link": "https://stackoverflow.com/users/2511059/blue-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1433968387, "creation_date": 1433965120, "last_edit_date": 1433965932, "question_id": 30765763, "link": "https://stackoverflow.com/questions/30765763/insertion-in-linked-list", "title": "insertion in linked list -", "body": "<p>I was reading Skeina's book. I could not understand this code. Basically what is the use of double pointer. And what is the use of <code>*l = p</code>? Can anyone please explain by diagram.</p>\n\n<pre><code>void insert_list(list **l, item_type x) {\n    list *p; /* temporary pointer */\n    p = malloc(sizeof(list));\n    p-&gt;item = x;\n    p-&gt;next = *l;\n    *l = p;\n}\n</code></pre>\n"}, {"tags": ["c", "syntax", "bit-manipulation", "bitwise-operators"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433964495, "post_id": 30765548, "comment_id": 49583395, "body": "How is it not working? Can you give an example?"}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433964567, "post_id": 30765548, "comment_id": 49583424, "body": "@EugeneSh. now I see that&#39;s what I did in my code too so this isn&#39;t why it doesn&#39;t work."}, {"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1433964838, "post_id": 30765548, "comment_id": 49583553, "body": "I think <code>temp = foo &amp; 0xf;</code> would be the better approach..."}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "reply_to_user": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1433965127, "post_id": 30765548, "comment_id": 49583702, "body": "@twalberg no doubt it is, I just want to know more ways to manipulate bits."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1433971469, "post_id": 30765548, "comment_id": 49587294, "body": "P.S. Why use shift operations at all when <code>b &amp; 0xF</code> is faster and more reliable?"}], "answers": [{"comments": [{"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1433965188, "post_id": 30765629, "comment_id": 49583737, "body": "My temp is unsigned char in my own code, this doesn&#39;t work. For example, the byte <code>01000001</code> is assigned itself to temp."}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "reply_to_user": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1433965287, "post_id": 30765629, "comment_id": 49583780, "body": "@kuhaku - You changed the question, I changed the answer :-)"}, {"owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1433965439, "post_id": 30765629, "comment_id": 49583876, "body": "Yeah that was it. Why does it try to protect the sign bit even though I&#39;m using <code>unsigned char</code> in all the types?"}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "reply_to_user": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "edited": false, "score": 0, "creation_date": 1433965516, "post_id": 30765629, "comment_id": 49583917, "body": "That&#39;s simply the way the language is defined. As I wrote, this behavior is known as integral promotion (google it)."}], "tags": [], "owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "is_accepted": true, "score": 2, "last_activity_date": 1433965255, "last_edit_date": 1433965255, "creation_date": 1433964742, "answer_id": 30765629, "question_id": 30765548, "link": "https://stackoverflow.com/questions/30765548/getting-four-bits-from-the-right-only-in-a-byte-using-bit-shift-operations/30765629#30765629", "title": "Getting four bits from the right only in a byte using bit shift operations", "body": "<p>Shift operator only only works on integral types. Using <code>&lt;&lt;</code> causes implicit integral promotion, type casting <code>b</code> to an <code>int</code> and \"protecting\" the higher bits.</p>\n\n<p>To solve, use <code>temp = ((unsigned char)(b &lt;&lt; 4)) &gt;&gt; 4;</code></p>\n"}], "owner": {"reputation": 4638, "user_id": 4279201, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/cff52351d37f559a2f8886ccf441cdb7?s=128&d=identicon&r=PG&f=1", "display_name": "shinzou", "link": "https://stackoverflow.com/users/4279201/shinzou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 30765629, "answer_count": 1, "score": 1, "last_activity_date": 1433965255, "creation_date": 1433964429, "last_edit_date": 1433964534, "question_id": 30765548, "link": "https://stackoverflow.com/questions/30765548/getting-four-bits-from-the-right-only-in-a-byte-using-bit-shift-operations", "title": "Getting four bits from the right only in a byte using bit shift operations", "body": "<p>I wanted to try to get only the four bits from the right in a byte by using only bit shift operations but it sometimes worked and sometimes not, but I don't understand why.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>unsigned char b = foo; //say foo is 1000 1010\nunsigned char temp=0u;\n\ntemp |= ((b &lt;&lt; 4) &gt;&gt; 4);//I want this to be 00001010\n</code></pre>\n\n<p>PS: I know I can use a <code>mask=F</code> and do <code>temp =(mask&amp;=b)</code>.</p>\n"}, {"tags": ["c", "multithreading", "algorithm", "pthreads", "concurrent-programming"], "comments": [{"owner": {"reputation": 26818, "user_id": 209199, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0b64963e747bf4c8fc20fb379105f204?s=128&d=identicon&r=PG", "display_name": "Cory Nelson", "link": "https://stackoverflow.com/users/209199/cory-nelson"}, "edited": false, "score": 0, "creation_date": 1433963455, "post_id": 30765206, "comment_id": 49582821, "body": "I suggest closing this question and creating a new one describing the issue you&#39;re having with your code."}, {"owner": {"reputation": 765, "user_id": 2414505, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7084f7bd5b2218387e61ce5f169c1871?s=128&d=identicon&r=PG&f=1", "display_name": "Pan", "link": "https://stackoverflow.com/users/2414505/pan"}, "reply_to_user": {"reputation": 26818, "user_id": 209199, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0b64963e747bf4c8fc20fb379105f204?s=128&d=identicon&r=PG", "display_name": "Cory Nelson", "link": "https://stackoverflow.com/users/209199/cory-nelson"}, "edited": false, "score": 0, "creation_date": 1433963560, "post_id": 30765206, "comment_id": 49582887, "body": "@CoryNelson  Sure, Or can I put my code in same thread"}], "answers": [{"tags": [], "owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "is_accepted": true, "score": 0, "last_activity_date": 1433964275, "creation_date": 1433964275, "answer_id": 30765502, "question_id": 30765206, "link": "https://stackoverflow.com/questions/30765206/two-lock-concurrent-queue-algorithm-implementation-issue/30765502#30765502", "title": "Two-Lock Concurrent Queue Algorithm implementation issue", "body": "<p>The following FTP link works fine for me:</p>\n\n<p><a href=\"ftp://ftp.cs.rochester.edu/pub/packages/sched_conscious_synch/concurrent_queues/concurrent_queues.tar.gz\" rel=\"nofollow\">ftp://ftp.cs.rochester.edu/pub/packages/sched_conscious_synch/concurrent_queues/concurrent_queues.tar.gz</a></p>\n"}], "owner": {"reputation": 765, "user_id": 2414505, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7084f7bd5b2218387e61ce5f169c1871?s=128&d=identicon&r=PG&f=1", "display_name": "Pan", "link": "https://stackoverflow.com/users/2414505/pan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 30765502, "answer_count": 1, "score": -1, "last_activity_date": 1433964354, "creation_date": 1433963311, "last_edit_date": 1433964354, "question_id": 30765206, "link": "https://stackoverflow.com/questions/30765206/two-lock-concurrent-queue-algorithm-implementation-issue", "title": "Two-Lock Concurrent Queue Algorithm implementation issue", "body": "<p>I was going through the paper of Michael and Scott for Non-Blocking Concurrent Queue Algorithm  and Two-Lock Concurrent Queue Algorithm. They have mentioned in the paper that C code for the tested algorithms can be ob-\ntained from <a href=\"ftp://ftp.cs.rochester.edu/pub/\" rel=\"nofollow\">ftp://ftp.cs.rochester.edu/pub/</a>\npackages/sched conscious synch/concurrent queues. But since the paper is very old the link is not working. I have written the C implementation from pseudocode available at <a href=\"http://www.cs.rochester.edu/research/synchronization/pseudocode/queues.html#tlq\" rel=\"nofollow\">http://www.cs.rochester.edu/research/synchronization/pseudocode/queues.html#tlq</a> . But there are some issues in the code. So, if anyone could explain what this <code>pvalue: pointer to data type</code> part of pseudocode ment. What I understand is Dequeue always extract from front or head what is the pvalue here for</p>\n\n<pre><code>dequeue(Q: pointer to queue_t, pvalue: pointer to data type): boolean\n</code></pre>\n\n<p>//Two-Lock Concurrent Queue Algorithm</p>\n\n<pre><code>boolean Dequeue(struct queue_t *queue,int* pvalue)\n{\n    //lock\n    pthread_mutex_lock(&amp;queue-&gt;head_lock);\n    struct node_t *temp = queue-&gt;head;\n    struct node_t *new_head = temp-&gt;next;\n    if(new_head == NULL) \n    {\n        pthread_mutex_unlock(&amp;queue-&gt;head_lock);//unlock    \n        return false;\n    }\n    *pvalue = new_head-&gt;value; // Queue not empty.  Read value before release\n    queue-&gt;head = new_head;\n    pthread_mutex_unlock(&amp;queue-&gt;head_lock);// unlock\n    delete temp;\n    return true;\n}\n</code></pre>\n"}, {"tags": ["c", "matrix-multiplication"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433963326, "post_id": 30765146, "comment_id": 49582758, "body": "<code>printf(&quot;%.lf\\t&quot;, &amp;obj2[c][d]);</code> --&gt; <code>printf(&quot;%.lf\\t&quot;, obj2[c][d]);</code>"}, {"owner": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433963774, "post_id": 30765146, "comment_id": 49582999, "body": "Oh, overseen that, thank you, I still get some error, but, progress"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1433964007, "post_id": 30765146, "comment_id": 49583139, "body": "... and you don&#39;t need <code>%lf</code> for a <code>double</code> in <code>printf</code>, you only need <code>%lf</code> for a <code>double</code> in <code>scanf</code>. It&#39;s just <code>printf(&quot;%f&quot;, [doublevalue])</code>"}, {"owner": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433964377, "post_id": 30765146, "comment_id": 49583330, "body": "Fixed that too, didn&#39;t actually know that, thanks"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433964934, "post_id": 30765572, "comment_id": 49583603, "body": "Removed the dot, still works fine. My first time using the sin() and cos() functions, so I wasn&#39;t sure. As to fflush, doesn&#39;t seem to work when I remove it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433964986, "post_id": 30765572, "comment_id": 49583628, "body": "With the dot, I entered 1.23 which was printed as 0.00000, without the dot is printed as 1.230000"}, {"owner": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433965106, "post_id": 30765572, "comment_id": 49583690, "body": "I didn&#39;t test all the values yet, or the ifs, wanted to get it to work for easy values and then tweak it for the corner cases"}, {"owner": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433965206, "post_id": 30765572, "comment_id": 49583746, "body": "Thanks a bunch, that was it, works without errors now, just getting silly values"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433965325, "post_id": 30765572, "comment_id": 49583802, "body": "I suggest removing the range checking for degrees for now in case it mis-manages the values. Enable it later when the code works."}, {"owner": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433965581, "post_id": 30765572, "comment_id": 49583952, "body": "Right, I&#39;ll do it that way, seems that writing the values to matrices doesn&#39;t work. Also, do you happen to know where should I put the printf(&quot;/t&quot;); in order to get it to enter elements of matrices tabbed, so it visually represents a matrix, I tried few places but it was buggy."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433965978, "post_id": 30765572, "comment_id": 49584184, "body": "Yes, better than <code>tab</code> is to use the field width specifier like <code>printf(&quot;%8f&quot;, [double])</code> which will right-justify in a field width of 8 in this case. There is quite a <i>lot</i> to format specifiers. You can even give the field width itself as an argument, see here <a href=\"https://msdn.microsoft.com/en-us/library/25366k66.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/25366k66.aspx</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433966888, "post_id": 30765572, "comment_id": 49584642, "body": "Well you cancelled your &quot;accept&quot; even though the other added nothing more, but I&#39;ll give you one more tip. Change <code>int sum</code> to <code>double sum</code>."}, {"owner": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433966988, "post_id": 30765572, "comment_id": 49584692, "body": "I&#39;m sorry, I did that too, I think I should update the code now, my bad."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433967583, "post_id": 30765572, "comment_id": 49585059, "body": "OK, but altering the posted code makes all the previous comments look silly. Better to ask a new question with the revised code if necessary."}, {"owner": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433967928, "post_id": 30765572, "comment_id": 49585279, "body": "Should I then type what I changed from the original, I&#39;m new here, terribly sorry."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433968308, "post_id": 30765572, "comment_id": 49585531, "body": "You should clarify the problem. Is it something to do with skipping inputs, or incorrect outputs? What inputs are you giving, and what outputs are you expecting? <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> Quite often the approach I linked will solve your problem anyway. But first, deal with the input and make sure that works."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1433964885, "last_edit_date": 1433964885, "creation_date": 1433964509, "answer_id": 30765572, "question_id": 30765146, "link": "https://stackoverflow.com/questions/30765146/rotating-matrix-of-points-for-a-custom-angle/30765572#30765572", "title": "Rotating matrix of points for a custom angle", "body": "<p>Remove the <code>.</code> from this line so it reads</p>\n\n<pre><code>scanf(\"%lf\", &amp;x);\n</code></pre>\n\n<p>which error would be revealed if you printed the input value.</p>\n\n<p>Also, I see you are fumbling with checking the input value but <code>sin()</code> and <code>cos()</code> only fail with stupidly extreme inputs.</p>\n\n<p>Another point, <code>fflush(stdin)</code> is implementation defined and isn't usually necessary.</p>\n\n<p><strong>UPDATE</strong> here is a bug</p>\n\n<pre><code>for (d = 0; d &lt; a; c++)\n</code></pre>\n\n<p>which should be </p>\n\n<pre><code>for (d = 0; d &lt; a; d++)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433965816, "post_id": 30765857, "comment_id": 49584079, "body": "I&#39;m not that certain about the fflush, I will try replacing it with such a function, all I know is that without it, it only takes the first element and goes further, so I get to enter only 1 element, which is not what I wanted."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433966447, "post_id": 30765857, "comment_id": 49584419, "body": "@EternalEnvy there shouldn&#39;t be any problem with inputs. Whether they are separated by spaces or <code>newline</code> then <code>scanf</code> should filter that out (with numeric input). Did you remove the <code>.</code> from all the <code>scanf</code> statements?"}, {"owner": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "edited": false, "score": 0, "creation_date": 1433966584, "post_id": 30765857, "comment_id": 49584477, "body": "Yes, I have, it just skips the rest of the for loops and goes out if I remove the fflush, at the very first scanf. EDIT: Works now for some reason, I don&#39;t even know"}], "tags": [], "owner": {"reputation": 46, "user_id": 3992973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a304d20d741e8120ffc1a50452b866e3?s=128&d=identicon&r=PG&f=1", "display_name": "ApprenticeTheSecond", "link": "https://stackoverflow.com/users/3992973/apprenticethesecond"}, "is_accepted": true, "score": 0, "last_activity_date": 1434022861, "last_edit_date": 1434022861, "creation_date": 1433965469, "answer_id": 30765857, "question_id": 30765146, "link": "https://stackoverflow.com/questions/30765146/rotating-matrix-of-points-for-a-custom-angle/30765857#30765857", "title": "Rotating matrix of points for a custom angle", "body": "<pre><code>scanf(\"%.lf\", &amp;obj[c][d]);\n</code></pre>\n\n<p>it is wrong. \"%.lf\" there is no such a specifier. It must be \"%lf\" for double type values.</p>\n\n<p>Also you are using <code>fflush(stdin);</code> which is not right to flush standart input buffer and it is undefined behaviour according to standarts <code>(C11 7.21.5.2)</code>. (okey compilers supports it, but wrong).</p>\n\n<p>You can use your own function something like that;</p>\n\n<pre><code>void FlushStdin(void)\n{\n     int ch;    \n     while((ch = getchar()) != '\\n' &amp;&amp; ch != EOF )\n          ;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4821668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ee485ee4a4bbfcce407642521e16b2?s=128&d=identicon&r=PG&f=1", "display_name": "Pavle Djurisic", "link": "https://stackoverflow.com/users/4821668/pavle-djurisic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 30765857, "answer_count": 2, "score": 1, "last_activity_date": 1434022861, "creation_date": 1433963139, "last_edit_date": 1433968691, "question_id": 30765146, "link": "https://stackoverflow.com/questions/30765146/rotating-matrix-of-points-for-a-custom-angle", "title": "Rotating matrix of points for a custom angle", "body": "<p>I wanted to make matrix of points and rotate them for a custom angle.<br>\nI get a bunch of 0's when I enter the desired angle, can't figure out why.<br>\nMight be a pretty simple mistake, I'm kind of new to programming in C, trying to learn.  </p>\n\n<p>Here's my code:  </p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n\n#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main(){\ndouble pi = 3.14159265;\ndouble rot[2][2], obj[2][10], obj2[2][10];\nint a, c, d, i, j;\ndouble x,y, sum=0;\ndouble element = 0;\n\nprintf(\"Enter the number of columns of the matrix:\\n\");\nscanf(\"%d\", &amp;a);\n\nprintf(\"Enter the elements of the matrix:\\n\");\n\nfor (c = 0; c &lt; 2; c++){\n    for (d = 0; d &lt; a; d++){\n        scanf(\"%lf\", &amp;obj[c][d]);\n    }\n}\n\nprintf(\"Enter the desired clockwise rotation angle:\\n\");\nscanf(\"%lf\", &amp;x);\nif ((int)x &gt; 360){\n    x = (int)x % 360;\n}\nif ((int)x &lt; 0){\n    x = 360 + x;\n}\n\ny = (pi / 180) * x;\n\nrot[0][0] = cos(y);\nrot[0][1] = sin(y);\nrot[1][0] = -sin(y);\nrot[1][1] = cos(y);\n\n\nfor (c = 0; c &lt; 2; c++){\n    for (d = 0; d &lt; a; d++){\n        for (i = 0; i &lt; 2; i++){\n            sum += rot[c][i] * obj[i][d];\n        }\n        obj2[c][d] = sum;\n        sum = 0;\n    }\n}\n\nprintf(\"Rotated object in matrix form:\\n\");\nfor (c = 0; c &lt; 2; c++){\n    for (d = 0; d &lt; a; d++){\n        printf(\"%f\\t\", obj2[c][d]);\n    }\n    printf(\"\\n\");\n}\n\nsystem(\"PAUSE\");\nreturn 0;\n}  \n</code></pre>\n\n<p>Had a problem with accepting values into matrix fields, pretty much all values were messy. Also there was &amp; in the printf function so it printed the wrong thing. All solved now, tweaked some outputs to look better but it's a functioning code now.</p>\n\n<p>EDIT: After fixing the printf, I get <a href=\"http://prntscr.com/7fgq7m\" rel=\"nofollow\">http://prntscr.com/7fgq7m</a> after the debug.<br>\nEDIT2: Entering values works properly, will now play with sin() and cos() part to see if that works aswell.</p>\n\n<p>FINAL EDIT: Everything works smoothly for the values I planned, will do a lot more testing with friends, but this looks fine.<br>\nThank you everyone that helped, much appreciated.</p>\n"}, {"tags": ["c", "bitmap", "bitwise-operators"], "comments": [{"owner": {"reputation": 1078, "user_id": 3878948, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a128928fb7879cd4d568769a4a49428e?s=128&d=identicon&r=PG&f=1", "display_name": "Rishabh Agarwal", "link": "https://stackoverflow.com/users/3878948/rishabh-agarwal"}, "edited": false, "score": 0, "creation_date": 1433962410, "post_id": 30764905, "comment_id": 49582229, "body": "I was thinking to create 16 new addresses with all zero and the position i am looking and then do then and operation but I don&#39;t like that approach."}, {"owner": {"reputation": 9812, "user_id": 1345535, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b62063f3b5bf78c24c71085aca077e2e?s=128&d=identicon&r=PG", "display_name": "David W", "link": "https://stackoverflow.com/users/1345535/david-w"}, "edited": false, "score": 0, "creation_date": 1433962534, "post_id": 30764905, "comment_id": 49582297, "body": "Are you saying you want, essentially, a function that returns the bit value of a 16-bit integer at an arbitrary bit position 0-15?"}, {"owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 0, "creation_date": 1433962732, "post_id": 30764905, "comment_id": 49582407, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/523724/c-c-check-if-one-bit-is-set-in-i-e-int-variable\">C/C++ check if one bit is set in, i.e. int variable</a>"}, {"owner": {"reputation": 1078, "user_id": 3878948, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a128928fb7879cd4d568769a4a49428e?s=128&d=identicon&r=PG&f=1", "display_name": "Rishabh Agarwal", "link": "https://stackoverflow.com/users/3878948/rishabh-agarwal"}, "edited": false, "score": 0, "creation_date": 1489693469, "post_id": 30764905, "comment_id": 72795733, "body": "nope its different."}], "answers": [{"tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 1, "last_activity_date": 1433962664, "creation_date": 1433962664, "answer_id": 30764991, "question_id": 30764905, "link": "https://stackoverflow.com/questions/30764905/how-to-check-each-bit-in-16-bit-address-in-c/30764991#30764991", "title": "How to check each bit in 16 bit address in C", "body": "<p>Use a macro similar to this:</p>\n\n<pre><code>#define CHECK_BIT(x, i) ( ((x) &amp; (1 &lt;&lt; (i)) != 0 ) )\n</code></pre>\n\n<p><code>CHECK_BIT(x, i)</code> will return <code>true</code> if the i'th bit of <code>x</code> is one, false otherwise.</p>\n"}, {"comments": [{"owner": {"reputation": 9812, "user_id": 1345535, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b62063f3b5bf78c24c71085aca077e2e?s=128&d=identicon&r=PG", "display_name": "David W", "link": "https://stackoverflow.com/users/1345535/david-w"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433962823, "post_id": 30765004, "comment_id": 49582456, "body": "Well taken! Modified as suggested."}], "tags": [], "owner": {"reputation": 9812, "user_id": 1345535, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b62063f3b5bf78c24c71085aca077e2e?s=128&d=identicon&r=PG", "display_name": "David W", "link": "https://stackoverflow.com/users/1345535/david-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1433962813, "last_edit_date": 1433962813, "creation_date": 1433962693, "answer_id": 30765004, "question_id": 30764905, "link": "https://stackoverflow.com/questions/30764905/how-to-check-each-bit-in-16-bit-address-in-c/30765004#30765004", "title": "How to check each bit in 16 bit address in C", "body": "<pre><code>int bitAtPosition(int value, int position){\n\n   return (value &amp; (1 &lt;&lt; position)) != 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1078, "user_id": 3878948, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a128928fb7879cd4d568769a4a49428e?s=128&d=identicon&r=PG&f=1", "display_name": "Rishabh Agarwal", "link": "https://stackoverflow.com/users/3878948/rishabh-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 748, "favorite_count": 0, "accepted_answer_id": 30764991, "answer_count": 2, "score": -3, "last_activity_date": 1433962813, "creation_date": 1433962341, "question_id": 30764905, "link": "https://stackoverflow.com/questions/30764905/how-to-check-each-bit-in-16-bit-address-in-c", "title": "How to check each bit in 16 bit address in C", "body": "<p>I have a 16 bit address 0-15, I need to check at value of bit corresponding to their position in C</p>\n\n<p>for example at 15 place i have 1, 14 has 0, and soo on!</p>\n\n<p>|1|0|0|0|1|0|1|0|1|1|1|1|1|0|1|0|  </p>\n\n<p>I was thinking to create 16 new addresses with all zero and the position i am looking </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 1, "creation_date": 1433962108, "post_id": 30764781, "comment_id": 49582040, "body": "You mean &quot;why does accessing an uninitialized variable lead to unexpected consequences&quot;?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433965144, "post_id": 30764781, "comment_id": 49583710, "body": "Are you confusing <code>fgets()</code> with <code>fputs()</code>?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 0, "creation_date": 1433998059, "post_id": 30764781, "comment_id": 49594762, "body": "@Mr.Llama ,yes I am not able to understand it ."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433998100, "post_id": 30764781, "comment_id": 49594779, "body": "@chux  no I am not confused between fgets() and fputs() ."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1440264372, "post_id": 30764781, "comment_id": 52205529, "body": "See also <a href=\"http://stackoverflow.com/questions/1694036/why-is-the-gets-function-dangerous-why-should-it-not-be-used\">Why <code>gets()</code> is so dangerous it should never be used?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 2, "last_activity_date": 1433962957, "last_edit_date": 1433962957, "creation_date": 1433962257, "answer_id": 30764877, "question_id": 30764781, "link": "https://stackoverflow.com/questions/30764781/when-fputs-is-used-directly-for-writing-character-array-in-a-file-a-different-f/30764877#30764877", "title": "When fputs is used directly for writing character array in a file, a different format of text is stored", "body": "<blockquote>\n  <p>When I take input in name using scanf() or gets() correct text is\n  stored but when directly fputs() is used it stored in unusual format.\n  Why this happens ?</p>\n</blockquote>\n\n<p>Accessing uninitialized variable <code>p</code> is <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\"><em>undefined behaviour</em></a> as its value <em>indeterminate</em> as per C standard. There's no explanation for <em>why</em> it happens. Just don't do that.</p>\n\n<p><strong>6.7.9 Initialization, (C11 draft)</strong></p>\n\n<blockquote>\n  <p>If an object that has automatic storage duration is not initialized\n  explicitly, its value is indeterminate.</p>\n</blockquote>\n\n<p>And <em>indeterminate</em> is defined as:</p>\n\n<blockquote>\n  <p>3.19.2 indeterminate<br>\n  value either an unspecified value or a trap representation</p>\n</blockquote>\n\n<p>Note that function <code>gets()</code> has been removed from the recent C standard (C11) and it has never been a safe anyway due to its buffer overflow issues.</p>\n"}, {"comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1433998369, "post_id": 30764917, "comment_id": 49594861, "body": "I also don&#39;t understand when I compile and run this code it asks for input and takes input when I don&#39;t use scanf() or gets() ."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1434000047, "post_id": 30764917, "comment_id": 49595410, "body": "@ameyCU, the input is processed by <code>getchar()</code>, which reads just one character. The rest are discarded since the program terminates after that."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1433962369, "creation_date": 1433962369, "answer_id": 30764917, "question_id": 30764781, "link": "https://stackoverflow.com/questions/30764781/when-fputs-is-used-directly-for-writing-character-array-in-a-file-a-different-f/30764917#30764917", "title": "When fputs is used directly for writing character array in a file, a different format of text is stored", "body": "<blockquote>\n  <p>When I take input in name using <code>scanf()</code> or <code>gets()</code> correct text is stored but when directly <code>fputs()</code> is used it stored in unusual format. Why this happens ?</p>\n</blockquote>\n\n<p>You haven't read the data from <code>stdin</code> before writing it out using <code>fputs</code>.</p>\n\n<p>Use:</p>\n\n<pre><code>fgets(name, sizeof(name), stdin);\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>fputs(name, p);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "is_accepted": false, "score": 0, "last_activity_date": 1433962670, "creation_date": 1433962670, "answer_id": 30764994, "question_id": 30764781, "link": "https://stackoverflow.com/questions/30764781/when-fputs-is-used-directly-for-writing-character-array-in-a-file-a-different-f/30764994#30764994", "title": "When fputs is used directly for writing character array in a file, a different format of text is stored", "body": "<p>You have opened <em>char</em> array but you haven't used it. Analyze the code you will understand.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    char name[100];\n\n    FILE *p;\n\n    p=fopen(\"pa.txt\",\"w+\");\n\n    if(!p) {\n        perror(\"Error writing\");\n        return -1;\n    }\n\n    printf(\"Enter a string :\");\n    scanf(\"%s\",name);\n    fputs(name,p);\n\n    fclose(p);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 30764917, "answer_count": 3, "score": -1, "last_activity_date": 1440264260, "creation_date": 1433961922, "last_edit_date": 1440264260, "question_id": 30764781, "link": "https://stackoverflow.com/questions/30764781/when-fputs-is-used-directly-for-writing-character-array-in-a-file-a-different-f", "title": "When fputs is used directly for writing character array in a file, a different format of text is stored", "body": "<p>When I used <code>fputs()</code> to directly store a character array in a file, it stored this in the file:</p>\n\n<pre><code>\u00c8Lw\u00ec\u00fe( \n</code></pre>\n\n<p>Why was that?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    FILE *p;\n    p=fopen(\"pa.txt\",\"w+\");\n    char name[100];\n    printf(\"Enter a string :\");\n    fputs(name,p);\n    fclose(p);\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>When I take input in name using <code>scanf()</code> or <code>gets()</code>, the correct text is stored but when directly use <code>fputs()</code> is used it stored in an unusual format.\nWhy does this happen?</p>\n"}, {"tags": ["c", "function", "scope"], "comments": [{"owner": {"reputation": 568, "user_id": 4157408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a44b6a712c8ad167e7331cef927d46a2?s=128&d=identicon&r=PG&f=1", "display_name": "void_ptr", "link": "https://stackoverflow.com/users/4157408/void-ptr"}, "edited": false, "score": 1, "creation_date": 1433961992, "post_id": 30764665, "comment_id": 49581976, "body": "<code>for (i = 1; 1 &lt;= 1000; i++)</code> - one is always less or equal than a thousand."}, {"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 1, "creation_date": 1433962305, "post_id": 30764665, "comment_id": 49582149, "body": "<code>if (num % i == 0)</code> you are dividing by zero."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1433963773, "post_id": 30764665, "comment_id": 49582997, "body": "...and the same here <code>if (perfectNum % i == 0)</code> divide by zero."}], "answers": [{"comments": [{"owner": {"reputation": 557, "user_id": 4889239, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/af588460cb95678d7d332cd7f53e4a07?s=128&d=identicon&r=PG&f=1", "display_name": "David Tamrazov", "link": "https://stackoverflow.com/users/4889239/david-tamrazov"}, "edited": false, "score": 0, "creation_date": 1433962985, "post_id": 30764797, "comment_id": 49582538, "body": "thanks friend, no surprise it had trouble running. But its still refusing to print, so there&#39;s a logic hole somewhere here."}, {"owner": {"reputation": 557, "user_id": 4889239, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/af588460cb95678d7d332cd7f53e4a07?s=128&d=identicon&r=PG&f=1", "display_name": "David Tamrazov", "link": "https://stackoverflow.com/users/4889239/david-tamrazov"}, "edited": false, "score": 0, "creation_date": 1433965856, "post_id": 30764797, "comment_id": 49584111, "body": "Brilliant, much obliged. I&#39;m not sure why that would stop the loop though, one iteration wouldn&#39;t produce results but why wouldn&#39;t it keep going and print whatever it came up with as soon as it started incrementing it?"}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "reply_to_user": {"reputation": 557, "user_id": 4889239, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/af588460cb95678d7d332cd7f53e4a07?s=128&d=identicon&r=PG&f=1", "display_name": "David Tamrazov", "link": "https://stackoverflow.com/users/4889239/david-tamrazov"}, "edited": false, "score": 0, "creation_date": 1433966089, "post_id": 30764797, "comment_id": 49584234, "body": "Because you can&#39;t divide by zero, which is what you were attempting to do."}], "tags": [], "owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "is_accepted": true, "score": 2, "last_activity_date": 1433965056, "last_edit_date": 1433965056, "creation_date": 1433961979, "answer_id": 30764797, "question_id": 30764665, "link": "https://stackoverflow.com/questions/30764665/perfect-number-check/30764797#30764797", "title": "Perfect Number Check", "body": "<p>You have a typo here:</p>\n\n<pre><code>for (i = 1; 1 &lt;= 1000; i++)\n    perfectNumCheck(i);\n</code></pre>\n\n<p>Should be</p>\n\n<pre><code>for (i = 1; i &lt;= 1000; i++)\n    perfectNumCheck(i);\n</code></pre>\n\n<p>Also, you're dividing by zero.  Change all your <code>i = 0</code> in your for loops to <code>i = 1</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4386085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PKfTo.png?s=128&g=1", "display_name": "uday", "link": "https://stackoverflow.com/users/4386085/uday"}, "is_accepted": false, "score": 0, "last_activity_date": 1436165283, "creation_date": 1436165283, "answer_id": 31239301, "question_id": 30764665, "link": "https://stackoverflow.com/questions/30764665/perfect-number-check/31239301#31239301", "title": "Perfect Number Check", "body": "<p><strong>Perfect Number Test</strong> : If the sum of all factors are equals to number itself. </p>\n\n<pre><code>    public static bool IsItPerfectNumber(int input)\n    {\n        bool IsPerfectNumber = false;\n        //Validation and Find all Factore \n        List&lt;int&gt; myList = FindFactors(input);            \n        //Sum if factor\n       int sumOfFactor = SumFactor(myList);\n\n        //Check Is Perfact Number\n        if (sumOfFactor == input)    \n        {\n            IsPerfectNumber = true;\n        }\n        return IsPerfectNumber;\n    }\n\n    public static List&lt;int&gt; FindFactors(int input)\n    {\n        List&lt;int&gt; myList = new List&lt;int&gt;();\n\n        for (int j = 1; j &lt; input; j++)\n        {\n            if (input % j == 0)                  {\n                myList.Add(j); \n            }\n        }\n        return myList;\n    }\n\n    public static int SumFactor(List&lt;int&gt; myList)\n    {\n        return myList.Sum();\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5354775"}, "is_accepted": false, "score": 0, "last_activity_date": 1442702646, "creation_date": 1442702646, "answer_id": 32673932, "question_id": 30764665, "link": "https://stackoverflow.com/questions/30764665/perfect-number-check/32673932#32673932", "title": "Perfect Number Check", "body": "<p>Try this:</p>\n\n<pre><code>boolean perfectNum(int currentNum) {\n\n    int i, sum = 0;\n    for (i = 1; i &lt; currentNum; i++) \n        if (perfectNum % i == 0) \n             sum += i;\n\n    if(sum == currentNum) return ture;\n    return false;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5357659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41bbc77485cf6c284a660b0aa770ff12?s=128&d=identicon&r=PG&f=1", "display_name": "someone", "link": "https://stackoverflow.com/users/5357659/someone"}, "is_accepted": false, "score": 1, "last_activity_date": 1442809347, "creation_date": 1442809347, "answer_id": 32687315, "question_id": 30764665, "link": "https://stackoverflow.com/questions/30764665/perfect-number-check/32687315#32687315", "title": "Perfect Number Check", "body": "<pre><code>boolean perfectNum(int currentNum) {\n\n    int i, sum = 0;\n    for (i = 1; i &lt; currentNum; i++) \n        if (perfectNum % i == 0) \n            sum += i;\n\n    if(sum == currentNum) return ture;\n    return false;\n}\n</code></pre>\n"}], "owner": {"reputation": 557, "user_id": 4889239, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/af588460cb95678d7d332cd7f53e4a07?s=128&d=identicon&r=PG&f=1", "display_name": "David Tamrazov", "link": "https://stackoverflow.com/users/4889239/david-tamrazov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "accepted_answer_id": 30764797, "answer_count": 4, "score": 1, "last_activity_date": 1442809347, "creation_date": 1433961527, "last_edit_date": 1433962502, "question_id": 30764665, "link": "https://stackoverflow.com/questions/30764665/perfect-number-check", "title": "Perfect Number Check", "body": "<p>So the idea behind my code is to create a program that uses functions to check and print all perfect numbers between 1 and 1000. I've come up with this, but the issue is that nothing prints. It builds successfully, runs, and exits.</p>\n\n<p>I've gone through my code 3-4 times and I can't find the gap in logic, so I'm thinking its a variable definition issue, something to do with how in-scope certain functions are. Would anyone have any input for why my program is failing to recognize a perfect number, and then print it? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n/*\n * \n */\n\nvoid perfectNumCheck(int num);\nvoid perfectNumPrint (int perfectNum);\n\nint main(void) {\n\n    int i;\n    for (i = 1; 1 &lt;= 1000; i++)\n        perfectNumCheck(i);\n\n}\n\nvoid perfectNumCheck(int num) {\n\n    int i;\n    int temp = 0;\n\n    for (i = 0; i &lt; num; i++) {\n        if (num % i == 0)\n            temp += i;\n    }\n\n    if (temp == num)\n        perfectNumPrint(num);\n\n}\n\nvoid perfectNumPrint(int perfectNum) {\n\n    int i;\n    for (i = 0; i &lt; perfectNum; i++) \n        if (perfectNum % i == 0) \n            printf (\"%d, \", i);\n\n    printf(\"are factors of the perfect number %d.\\n\", perfectNum);\n\n}\n</code></pre>\n"}, {"tags": ["c", "math", "output"], "comments": [{"owner": {"reputation": 1232, "user_id": 4847772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd5efa4bdec75631678b36842fea7c5a?s=128&d=identicon&r=PG&f=1", "display_name": "PJTraill", "link": "https://stackoverflow.com/users/4847772/pjtraill"}, "edited": false, "score": 0, "creation_date": 1433989540, "post_id": 30764496, "comment_id": 49592695, "body": "Please tag with the language you wish to use, perhaps [c]. I am afraid your English is difficult to follow: do you mean you want to print an answer accurate to within 10^-6 (can\u2019t do superscripts here :( )? When you say \u201cwith or without rounding off\u201d, what do you mean: do you refer to some possibility of the language, or do you mean something you have to do by hand?"}, {"owner": {"reputation": 1232, "user_id": 4847772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd5efa4bdec75631678b36842fea7c5a?s=128&d=identicon&r=PG&f=1", "display_name": "PJTraill", "link": "https://stackoverflow.com/users/4847772/pjtraill"}, "edited": false, "score": 0, "creation_date": 1434020060, "post_id": 30764496, "comment_id": 49607602, "body": "Do you (\u03b1) want code (as would be more usual here) to print a <code>double</code> (not a \u201cdecimal number\u201d) or (\u03b2) asking which of two representations of 10&#183;35652383 is \u2018correct\u2019 (as it sounds in your question)? Both representations satisfy have error &lt; 10^-6, namely 0&#183;00000083 or 0&#183;00000017 respectively, so (\u03b2) is based on a false assumption. If you mean (\u03b1), are you asking how many places your need to print. By the way, a double cannot be exactly 10&#183;35652383, as it is not M*2^N for integers M, N. Also <code>&quot;%lf&quot;</code> expects a <code>long double</code>, so <code>double d =10.35652383; printf(&quot;%.6lf&quot;, d)</code> is <i>might</i> go wrong."}, {"owner": {"reputation": 1232, "user_id": 4847772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd5efa4bdec75631678b36842fea7c5a?s=128&d=identicon&r=PG&f=1", "display_name": "PJTraill", "link": "https://stackoverflow.com/users/4847772/pjtraill"}, "edited": false, "score": 0, "creation_date": 1434020924, "post_id": 30764496, "comment_id": 49608185, "body": "Meant \u201c\u2026 asking how many places you need to print?\u201d!"}], "answers": [{"tags": [], "owner": {"reputation": 7695, "user_id": 1881196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b474cd12efa0089277b12d6e6dc43eea?s=128&d=identicon&r=PG", "display_name": "dlask", "link": "https://stackoverflow.com/users/1881196/dlask"}, "is_accepted": false, "score": 1, "last_activity_date": 1434020176, "creation_date": 1434020176, "answer_id": 30778857, "question_id": 30764496, "link": "https://stackoverflow.com/questions/30764496/how-to-print-a-double-in-c-with-absolute-or-relative-error-10%e2%81%bb%e2%81%b6/30778857#30778857", "title": "How to print a double in C with absolute or relative error 10\u207b\u2076", "body": "<p>Let's calculate both absolute and relative errors:</p>\n\n<pre><code>x = 10.35652383\nx1 = 10.356523\nx2 = 10.356524\n\nprint \"absolute error 1: {0}\".format(abs(x1 - x))\nprint \"absolute error 2: {0}\".format(abs(x2 - x))\n\nprint \"relative error 1: {0}\".format(abs((x1 - x)/x))\nprint \"relative error 2: {0}\".format(abs((x2 - x)/x))\n</code></pre>\n\n<p>It gives:</p>\n\n<pre><code>absolute error 1: 8.30000001173e-07\nabsolute error 2: 1.69999999855e-07\nrelative error 1: 8.01427211289e-08\nrelative error 2: 1.64147741699e-08\n</code></pre>\n\n<p>So both absolute and relative errors are below 10e-6, i.e. below 0.000001, but the second value is closer.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1434030387, "last_edit_date": 1434030387, "creation_date": 1434029921, "answer_id": 30782466, "question_id": 30764496, "link": "https://stackoverflow.com/questions/30764496/how-to-print-a-double-in-c-with-absolute-or-relative-error-10%e2%81%bb%e2%81%b6/30782466#30782466", "title": "How to print a double in C with absolute or relative error 10\u207b\u2076", "body": "<p>To print to the nearest <code>0.000001</code>, use <code>\"%.6f\"</code></p>\n\n<pre><code>double x = 10.35652383;\nprintf(\"%.6f\\n\", x);\n// or\nprintf(\"%.*f\\n\", 6, x);\n// or drop .6, .6 is the default\nprintf(\"%f\\n\", x);\n\n10.356524\n</code></pre>\n\n<p>To print to an approximate  <code>0.000001*x</code>, use <code>\"%.6e\"</code></p>\n\n<pre><code>printf(\"%.6e\\n\", x);\n// or\nprintf(\"%.*e\\n\", 6, x);\n// or drop .6, .6 is the default\nprintf(\"%e\\n\", x);\n\n1.035652e+01\n</code></pre>\n\n<p>Alternatively for relative precision: code could use the below when <code>fabs(x) &lt; 1000000</code>.  It is unclear what is wanted when <code>x</code> is larger.</p>\n\n<pre><code>printf(\"%.*f\\n\", 6 - (int) log10((fabs(x)), x);\n\n10.35652\n</code></pre>\n\n<p>The use of <code>l</code> as in <code>%lf</code> work the same as without it: <code>%f</code> for <code>printf()</code>.</p>\n"}], "owner": {"reputation": 290, "user_id": 4986533, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/35afa0ab097cbf0b4c9aaa130c87e8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Kalu", "link": "https://stackoverflow.com/users/4986533/kalu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1768, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1434030387, "creation_date": 1433961010, "last_edit_date": 1434022797, "question_id": 30764496, "link": "https://stackoverflow.com/questions/30764496/how-to-print-a-double-in-c-with-absolute-or-relative-error-10%e2%81%bb%e2%81%b6", "title": "How to print a double in C with absolute or relative error 10\u207b\u2076", "body": "<p>I want to print a decimal number with error at most 10<sup>-6</sup>.\nWhat does error at most 10<sup>-6</sup> mean?\nE.g.: <code>10.35652383</code>,\nWhich of the following two options is correct?</p>\n\n<pre><code>1)10.356523 or 2)10.356524\n</code></pre>\n\n<p>As <code>printf(\"%.6lf\")</code> prints with the decimal rounded off to 6 decimal places  <code>10.356524</code> will be printed.</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 1866, "user_id": 3276830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acce99f81adfc7a9cc043a0e241bbfca?s=128&d=identicon&r=PG", "display_name": "Varun Garg", "link": "https://stackoverflow.com/users/3276830/varun-garg"}, "is_accepted": false, "score": 0, "last_activity_date": 1433961337, "last_edit_date": 1433961337, "creation_date": 1433960965, "answer_id": 30764480, "question_id": 30764459, "link": "https://stackoverflow.com/questions/30764459/pointer-array-and-structure-in-c/30764480#30764480", "title": "Pointer array and structure in C", "body": "<p><code>%c</code> is only for single character. Example H. <br/>\n<code>$s</code> is for string. Example Hyderabad.<br /></p>\n\n<p><code>s1.ch[0]</code> points to first character of String ch ->H<br />\n<code>*s1.str</code> is a pointer. It points to the value stored at address of str. It will be ->B <br />\nHence you get <code>HB</code></p>\n\n<p><code>\\n</code> means a new line (as in java).</p>\n"}, {"tags": [], "owner": {"reputation": 2076, "user_id": 1866196, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TrCUq.png?s=128&g=1", "display_name": "skrtbhtngr", "link": "https://stackoverflow.com/users/1866196/skrtbhtngr"}, "is_accepted": true, "score": 1, "last_activity_date": 1433961597, "last_edit_date": 1433961597, "creation_date": 1433961218, "answer_id": 30764576, "question_id": 30764459, "link": "https://stackoverflow.com/questions/30764459/pointer-array-and-structure-in-c/30764576#30764576", "title": "Pointer array and structure in C", "body": "<p><code>struct a s1={\"Hyderabad\",\"Bangalore\"};</code> assigns \"Hyderabad\" to <code>ch</code> and \"Bangalore\" to <code>str</code>.</p>\n\n<p><code>printf(\"\\n%c%c\",s1.ch[0],*s1.str);</code> prints the first character of the strings. Since <code>ch</code> is an array, <code>ch[0]</code> represents its first character. Since <code>str</code> is a character pointer, it points to the first character of a string here. So, <code>*s1.str</code> will have value 'B'</p>\n\n<p><code>printf(\"\\n%s%s\",s1.ch,s1.str);</code> simply prints all characters of both strings.\nFundamentally, <code>ch</code> is equal to <code>&amp;ch[0]</code>, the address of the first character in the array. And, str is pointer variable which holds the address of first character of the string literal \"Bangalore\".</p>\n"}, {"tags": [], "owner": {"reputation": 474, "user_id": 4417788, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/oU6Ym.jpg?s=128&g=1", "display_name": "Khurram Sharif", "link": "https://stackoverflow.com/users/4417788/khurram-sharif"}, "is_accepted": false, "score": 0, "last_activity_date": 1433961534, "creation_date": 1433961534, "answer_id": 30764671, "question_id": 30764459, "link": "https://stackoverflow.com/questions/30764459/pointer-array-and-structure-in-c/30764671#30764671", "title": "Pointer array and structure in C", "body": "<p>Here is your output according to requested question</p>\n\n<pre><code>void main()\n    {\n        struct a\n        {\n            char ch[10];\n            char *str;\n        };\n\n        struct a s1={\"Hyderabad\",\"Bangalore\"};\n        printf(\"%c%c\",s1.ch[0],*s1.Str[0]);\n        printf(\"\\t%s%s\",s1.ch,s1.str);\n        getch();\n    }\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 3966744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f0565f4c2adc699974ca1215a2c1c8ae?s=128&d=identicon&r=PG&f=1", "display_name": "simo kaur", "link": "https://stackoverflow.com/users/3966744/simo-kaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 30764576, "answer_count": 3, "score": -4, "last_activity_date": 1433961597, "creation_date": 1433960876, "last_edit_date": 1433960974, "question_id": 30764459, "link": "https://stackoverflow.com/questions/30764459/pointer-array-and-structure-in-c", "title": "Pointer array and structure in C", "body": "<p>I am nowhere lose to even guessing how come we get the given output . Can I please get some explanation? Also, any short and quick resources to try similar questions?</p>\n\n<pre><code>void main()\n{\n    struct a\n    {\n        char ch[10];\n        char *str;\n    };\n\n    struct a s1={\"Hyderabad\",\"Bangalore\"};\n    printf(\"\\n%c%c\",s1.ch[0],*s1.str);\n    printf(\"\\n%s%s\",s1.ch,s1.str);\n    getch();\n}\n</code></pre>\n\n<p>Ans: HB, HyderabadBangalore</p>\n"}, {"tags": ["c++", "c", "ffmpeg"], "comments": [{"owner": {"reputation": 49960, "user_id": 32453, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bec38d63650c8912b6ba9b557fb953b9?s=128&d=identicon&r=PG", "display_name": "rogerdpack", "link": "https://stackoverflow.com/users/32453/rogerdpack"}, "edited": false, "score": 0, "creation_date": 1433974183, "post_id": 30764452, "comment_id": 49588487, "body": "You should be able to just save the &quot;raw packets&quot; out to a file, FFmpeg at least knows how to deal with raw files: <a href=\"https://trac.ffmpeg.org/wiki/audio%20types\" rel=\"nofollow noreferrer\">trac.ffmpeg.org/wiki/audio%20types</a> (other than that you could write out a .wav file by adding wave file headers after you finish the file)"}, {"owner": {"reputation": 337, "user_id": 2631051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8493e29735916d91f0d8143519ac9d83?s=128&d=identicon&r=PG&f=1", "display_name": "patrick", "link": "https://stackoverflow.com/users/2631051/patrick"}, "reply_to_user": {"reputation": 49960, "user_id": 32453, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bec38d63650c8912b6ba9b557fb953b9?s=128&d=identicon&r=PG", "display_name": "rogerdpack", "link": "https://stackoverflow.com/users/32453/rogerdpack"}, "edited": false, "score": 0, "creation_date": 1434353577, "post_id": 30764452, "comment_id": 49723242, "body": "@rogerdpack i edited the question. Do you know any solution for this?"}], "owner": {"reputation": 337, "user_id": 2631051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8493e29735916d91f0d8143519ac9d83?s=128&d=identicon&r=PG&f=1", "display_name": "patrick", "link": "https://stackoverflow.com/users/2631051/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1460, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1434348364, "creation_date": 1433960847, "last_edit_date": 1434348364, "question_id": 30764452, "link": "https://stackoverflow.com/questions/30764452/how-to-extract-audio-from-video-in-c-using-ffmpeg-library", "title": "how to extract audio from video in c using ffmpeg library?", "body": "<p>I'm try to build an app in c that extract audio from video and save it as mp3 file. I wrote the code below but i got an runtime error : \"Invalid audio stream. Exactly one MP3 audio stream is required.\". I debugged the code and came to point that line no \"avformat_write_header( oc, &amp;opt );\" is giving this error. I wrote the same code form video extraction and that worked properly without any error. Does anyone know how to solve it? Help me in it. Thanks in advance.</p>\n\n<p>My code is :</p>\n\n<pre><code>#include &lt;libavcodec/avcodec.h&gt;\n#include &lt;libavformat/avformat.h&gt;\n#include &lt;libswscale/swscale.h&gt;\n#include &lt;libavformat/avio.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[]) {\nint codec_id = AV_CODEC_ID_MP3;\nAVFormatContext *pFormatCtx = NULL;\nint             i;\n\nAVDictionary    *opt = NULL;\n\nif(argc &lt; 2) {\n        printf(\"Please provide a movie file\\n\");\n        return -1;\n}\n\nav_register_all();\n\nif(avformat_open_input(&amp;pFormatCtx, argv[1], NULL, NULL) &lt; 0) return -1; \n\nif(avformat_find_stream_info(pFormatCtx, NULL) &lt; 0) return -1; \n\nint audioStream=-1;\nAVStream *audio;\nfor(i=0; i&lt;pFormatCtx-&gt;nb_streams; i++) {\n        if(pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type==AVMEDIA_TYPE_AUDIO) {\n        audio = pFormatCtx-&gt;streams[i];\n            audioStream=i;\n            break;\n        }\n}\n\nif(audioStream==-1) return -1;\n\n    AVOutputFormat* fmt = av_guess_format(\"mp3\", NULL, NULL);\n    fmt-&gt;audio_codec = codec_id;\n    AVFormatContext* oc;\n    oc  = avformat_alloc_context();\n    if (oc) oc-&gt;oformat = fmt;\n\n    avio_open2(&amp;oc-&gt;pb, \"test.mp3\", AVIO_FLAG_WRITE,NULL,NULL);\n\n    AVCodec *codec;\n    codec = avcodec_find_encoder(fmt-&gt;audio_codec);\n\n    if (!codec) {\n        fprintf(stderr, \"Codec not found\\n\");\n        exit(1);\n    }\n\n    AVStream *audio_stream;\n    audio_stream = avformat_new_stream(oc, NULL);\n    avcodec_copy_context( audio_stream-&gt;codec, pFormatCtx-&gt;streams[audioStream]-&gt;codec);\n    audio_stream-&gt;codec-&gt;bit_rate = audio-&gt;codec-&gt;bit_rate;\n    audio_stream-&gt;codec-&gt;sample_rate = audio-&gt;codec-&gt;sample_rate;\n    audio_stream-&gt;codec-&gt;channels = audio-&gt;codec-&gt;channels;\n\n\navformat_write_header( oc, &amp;opt );\nav_dump_format( pFormatCtx, 0, pFormatCtx-&gt;filename, 0 );\nav_dump_format( oc, 0, oc-&gt;filename, 1 );\n\n\nAVPacket pkt;\ni = 0;\nav_init_packet( &amp;pkt );\n\nwhile ( av_read_frame( pFormatCtx, &amp;pkt ) &gt;= 0 ) {\n        if (pkt.stream_index == audioStream ) {     \n        if ( pkt.flags &amp; AV_PKT_FLAG_KEY ) {\n                continue;\n            }\n            pkt.stream_index = audio_stream-&gt;id;\n            pkt.pts = i++;\n            pkt.dts = pkt.pts;\n\n            av_interleaved_write_frame( oc, &amp;pkt );\n        }\n        av_free_packet( &amp;pkt );\n        av_init_packet( &amp;pkt );\n}\nav_read_pause( pFormatCtx );\nav_write_trailer( oc );\navio_close( oc-&gt;pb );\navformat_free_context( oc );\navformat_network_deinit();\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "edited": false, "score": 2, "creation_date": 1433960710, "post_id": 30764339, "comment_id": 49581188, "body": "On what platform? And show us a <a href=\"/help/mcve\">small program that reproduces the problem</a>."}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1433961171, "post_id": 30764339, "comment_id": 49581499, "body": "SUGGESTION: download the libc source for your particular platform/version.  EXAMPLE: <a href=\"https://fossies.org/dox/glibc-2.21/sha512-crypt_8c_source.html\" rel=\"nofollow noreferrer\">fossies.org/dox/glibc-2.21/sha512-crypt_8c_source.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 432, "user_id": 2976833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bedae57c75407ef37c63406927be8e3?s=128&d=identicon&r=PG&f=1", "display_name": "leeman", "link": "https://stackoverflow.com/users/2976833/leeman"}, "edited": false, "score": 0, "creation_date": 1433963177, "post_id": 30764942, "comment_id": 49582658, "body": "yep, putting a free in between two crypt calls causes pain. Cheers for the info"}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 4, "last_activity_date": 1433962464, "creation_date": 1433962464, "answer_id": 30764942, "question_id": 30764339, "link": "https://stackoverflow.com/questions/30764339/c-crypt-function-malloc-and-valgrind/30764942#30764942", "title": "C crypt function, malloc and valgrind", "body": "<p>For some crypt variations, the preallocated buffer is not big enough, so it allocates (via malloc) a buffer that will be reused by the next call to <code>crypt</code> that needs a large buffer (possibly after <code>realloc</code>ing it).  That's why it is noted as \"still reachable\" by valgrind -- there's a static variable in the library that points at the block.</p>\n\n<p>If you were to free it, it's likely the next call to crypt would misbehave (likely giving a runtime error about reusing a freed block).</p>\n\n<p>No matter how many times you call <code>crypt</code> there will be one block identified by valgrind like this.  It isn't a real memory leak, just constant overhead from the library that is pretty much impossible to avoid.</p>\n\n<p>Generally you want to ignore valgrind messages about \"still reachable\" blocks unless the amount of memory is unexpectedly large, or the requests are coming from a place that should not be storing the returned pointers in global variables.</p>\n"}], "owner": {"reputation": 432, "user_id": 2976833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bedae57c75407ef37c63406927be8e3?s=128&d=identicon&r=PG&f=1", "display_name": "leeman", "link": "https://stackoverflow.com/users/2976833/leeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "accepted_answer_id": 30764942, "answer_count": 1, "score": 2, "last_activity_date": 1433962464, "creation_date": 1433960478, "last_edit_date": 1433961653, "question_id": 30764339, "link": "https://stackoverflow.com/questions/30764339/c-crypt-function-malloc-and-valgrind", "title": "C crypt function, malloc and valgrind", "body": "<p>My man page for the crypt function states that:</p>\n\n<p>\"The return value points to static data whose content is overwritten by each call.\"</p>\n\n<p>However, when using the SHA512 version (ie, the salt starts $6$...), valgrind does not seem to agree. Unless I free the pointer that crypt returns, it gets upset:</p>\n\n<pre><code>120 bytes in 1 blocks are still reachable in loss record 1 of 1\nat 0x4C2BBA0: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\nby 0x4C2DF4F: realloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\nby 0x521F4D4: __sha512_crypt (sha512-crypt.c:437)\n</code></pre>\n\n<p>Conversely, valgrind is fine if I use the DES version (so salt does not start with $6$ or similar).</p>\n\n<p>What's going on here and is this behaviour explained anywhere?</p>\n\n<p>Thanks in advance.</p>\n\n<p>EDIT: Platform is Ubuntu 15.04 64-bit. Here's a program:</p>\n\n<pre><code>#define _XOPEN_SOURCE 700\n#include &lt;unistd.h&gt;\n\nint main(int argc, char** argv) {\n    char *hash = crypt(\"password\", \"$6$Salty\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "macros", "gnu-assembler"], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 3200247, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9abaf7f40f99ca5d4f9b93089eaee025?s=128&d=identicon&r=PG&f=1", "display_name": "squirem", "link": "https://stackoverflow.com/users/3200247/squirem"}, "edited": false, "score": 0, "creation_date": 1435423686, "post_id": 30769759, "comment_id": 50198766, "body": "Thanks. I&#39;ve found another way is to use <code>.irp</code>, although I have to actually write each value I want to generate like so: <code>.irp 0, 1, 2, ...</code>. This works well enough for what I&#39;m doing."}], "tags": [], "owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "is_accepted": true, "score": 3, "last_activity_date": 1433983695, "creation_date": 1433983695, "answer_id": 30769759, "question_id": 30764210, "link": "https://stackoverflow.com/questions/30764210/calling-a-table-of-function-using-repeat-blocks-or-macros-in-gnu-assembly/30769759#30769759", "title": "Calling a table of function using repeat blocks or macros in GNU assembly", "body": "<p>You can use a macro do this:</p>\n\n<pre><code>.altmacro\n.macro call_funcs count\n    .if \\count\n        call_funcs %(count-1)\n    .endif\n    CALL    FUNC\\count\n.endm\n\ncall_funcs 20\n</code></pre>\n\n<p>The <code>.altmacro</code> directive enables the use of <code>%</code> to evaluate <code>count - 1</code> before passing recursively as a macro argument. Otherwise you get <code>CALL FUNC20-1-1-1-1</code> which not what you want.</p>\n\n<p>As far as I know there's no way to what you want in C. For that I would write a program that generates the C code you need.</p>\n"}], "owner": {"reputation": 315, "user_id": 3200247, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9abaf7f40f99ca5d4f9b93089eaee025?s=128&d=identicon&r=PG&f=1", "display_name": "squirem", "link": "https://stackoverflow.com/users/3200247/squirem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 30769759, "answer_count": 1, "score": 3, "last_activity_date": 1433983695, "creation_date": 1433960164, "last_edit_date": 1433961588, "question_id": 30764210, "link": "https://stackoverflow.com/questions/30764210/calling-a-table-of-function-using-repeat-blocks-or-macros-in-gnu-assembly", "title": "Calling a table of function using repeat blocks or macros in GNU assembly", "body": "<p>If I wanted to generate code that looks like this:</p>\n\n<pre><code>CALL FUNC0\nCALL FUNC1\nCALL FUNC2\nCALL FUNC3\nCALL FUNC4\nCALL FUNC5\n...\nCALL FUNC19\n</code></pre>\n\n<p>How can I use a repeat block generate such code, using something similar to the code below:</p>\n\n<pre><code>.equ SYMBOL, 0\n.rept 20\n   CALL FUNC(SMYBOL)\n   .equ SYMBOL, (SYMBOL+1)\n.endr\n</code></pre>\n\n<p>Macros are fine too.</p>\n\n<p>I'd like to know how to do this in C as well.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10605, "user_id": 2476755, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/pXGb5.png?s=128&g=1", "display_name": "royhowie", "link": "https://stackoverflow.com/users/2476755/royhowie"}, "edited": false, "score": 1, "creation_date": 1433959616, "post_id": 30763996, "comment_id": 49580478, "body": "1. you don&#39;t print the result of <code>addi</code>. 2. you don&#39;t return anything in <code>addi</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433959659, "post_id": 30763996, "comment_id": 49580503, "body": "You should check the return value of <code>scanf</code> rather than checking whether an <code>int</code> is digit, which is obviously not working as you think it is.."}, {"owner": {"reputation": 479, "user_id": 2239021, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Utg69.jpg?s=128&g=1", "display_name": "mSatyam", "link": "https://stackoverflow.com/users/2239021/msatyam"}, "edited": false, "score": 3, "creation_date": 1433960061, "post_id": 30763996, "comment_id": 49580771, "body": "what is this &quot;or&quot; in your code. In C programming &quot;or&quot; operator is written like this &quot;||&quot; not &quot;or&quot;. Did this code got compiled."}, {"owner": {"reputation": 10605, "user_id": 2476755, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/pXGb5.png?s=128&g=1", "display_name": "royhowie", "link": "https://stackoverflow.com/users/2476755/royhowie"}, "edited": false, "score": 0, "creation_date": 1433960630, "post_id": 30763996, "comment_id": 49581142, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/2023079/check-if-a-value-from-scanf-is-a-number\">Check if a value from scanf is a number?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1400, "user_id": 4970622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t8sl2.jpg?s=128&g=1", "display_name": "Samurai Jack", "link": "https://stackoverflow.com/users/4970622/samurai-jack"}, "is_accepted": false, "score": 0, "last_activity_date": 1434447186, "last_edit_date": 1434447186, "creation_date": 1433961173, "answer_id": 30764554, "question_id": 30763996, "link": "https://stackoverflow.com/questions/30763996/i-am-running-a-simple-addition-program-but-i-am-having-an-issue-with-the-output/30764554#30764554", "title": "I am running a simple addition program, but I am having an issue with the output, when I check for an integer?", "body": "<p>The C library function <code>isdigit</code> checks if the passed <strong>character</strong> is a decimal digit. You need to use <code>isdigit</code> properly in your code. Here you can find <a href=\"http://fresh2refresh.com/c/c-int-char-validation/c-isdigit-function/\" rel=\"nofollow\">usage</a> of <code>isdigit</code> \u00a0</p>\n"}, {"tags": [], "owner": {"reputation": 1838, "user_id": 2036285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bIQn5.png?s=128&g=1", "display_name": "NULL", "link": "https://stackoverflow.com/users/2036285/null"}, "is_accepted": false, "score": 0, "last_activity_date": 1433961187, "creation_date": 1433961187, "answer_id": 30764559, "question_id": 30763996, "link": "https://stackoverflow.com/questions/30763996/i-am-running-a-simple-addition-program-but-i-am-having-an-issue-with-the-output/30764559#30764559", "title": "I am running a simple addition program, but I am having an issue with the output, when I check for an integer?", "body": "<p>First of all you have some pretty basic issue's in your code. I will try to explain those.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;ctype.h&gt;\n\nint addi(int n, int m)\n{\n   // 1\n   int x;\n   x=n+m;\n   printf(\"%d\",x);\n   return 0;\n}\n</code></pre>\n\n<p>In your code <strong>Number:1</strong> point, you always printing the value of the addition and returning <code>0</code>, that's not a good approach, you should return the addition value and print it from the <code>main</code> function. you could replace the whole code by only this line <code>return n+m;</code></p>\n\n<pre><code>int main()\n{\n   int t,u,i,j,k;\n   printf(\"please enter two integers to be added\");\n   while(1){\n      scanf(\"%d%d\", &amp;u, &amp;t);\n      if(isdigit(t)==0 &amp;&amp; isdigit(u)==0)\n         break;\n      else\n      {\n         if(isdigit(t)==1 or isdigit(u)==1) // 2\n            printf(\"invalid input\");\n      }\n   }\n\n   i=addi(u,t); // 3\n   return 0;\n}\n</code></pre>\n\n<p>In <strong>Number:2</strong> point you have 2 mistakes, 1: <code>or</code> is not any keyword in <code>c</code> you should use <code>||</code> this. and 2: <code>isdigit()</code> return the value of the character if its a digit else it return <code>0</code>, so you will see <code>invalid input</code> if either of the value is <code>1</code></p>\n\n<p>In <strong>Number:3</strong> you should not call <code>addi</code> function all the time, just call this function if its a digit.</p>\n"}, {"tags": [], "owner": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "is_accepted": false, "score": 0, "last_activity_date": 1433961657, "last_edit_date": 1433961657, "creation_date": 1433961336, "answer_id": 30764614, "question_id": 30763996, "link": "https://stackoverflow.com/questions/30763996/i-am-running-a-simple-addition-program-but-i-am-having-an-issue-with-the-output/30764614#30764614", "title": "I am running a simple addition program, but I am having an issue with the output, when I check for an integer?", "body": "<p>Your function 'addi' dint return anything so why 'return 0'?</p>\n\n<p>You may want to make it <em>void</em> !</p>\n\n<p>Again another thing is why you catch the return in variable  <em>i</em> </p>\n\n<p>Please check what you want your code to do.</p>\n\n<p>Valid C syntax use <strong>||</strong> in place of <strong>or</strong> and <strong>&amp;&amp;</strong> in place of <strong>and</strong></p>\n\n<p>And <strong>isdigit() return the value of the digit itself if its a digit else it return 0</strong></p>\n\n<p>So use it accordingly you should get the issue corected </p>\n"}], "owner": {"reputation": 1, "user_id": 4995860, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207191272484417/picture?type=large", "display_name": "Ramez Al-Hamarneh", "link": "https://stackoverflow.com/users/4995860/ramez-al-hamarneh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1434447186, "creation_date": 1433959519, "last_edit_date": 1433962959, "question_id": 30763996, "link": "https://stackoverflow.com/questions/30763996/i-am-running-a-simple-addition-program-but-i-am-having-an-issue-with-the-output", "title": "I am running a simple addition program, but I am having an issue with the output, when I check for an integer?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint addi (int n, int m) {\n    int x;\n    x = n + m;\n    printf(\"%d\", x);\n    return 0;\n}\n\nint main () {\n    int t, u, i, j, k;\n    printf(\"please enter two integers to be added\");\n    while (1) {\n        scanf(\"%d%d\",&amp;u,&amp;t);\n        if (isdigit(t)==0 &amp;&amp; isdigit(u)==0) {\n            break;\n        } else {\n            if(isdigit(t)==1 or isdigit(u)==1)\n            printf(\"invalid input\");\n        }\n     }\n\n    i = addi(u, t);\n    return 0;\n}\n</code></pre>\n\n<p>The above is the code, that I am having a slight issue with. I keep getting a wrong output each time I input a character instead of getting an invalid input output on the screen.</p>\n"}, {"tags": ["c", "compiler-construction", "code-translation", "rose-compiler-framework"], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 2079113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd17b6d5fb9140c6b688fd60e922d3ad?s=128&d=identicon&r=PG&f=1", "display_name": "joseppinilla", "link": "https://stackoverflow.com/users/2079113/joseppinilla"}, "is_accepted": false, "score": 0, "last_activity_date": 1433963775, "creation_date": 1433963775, "answer_id": 30765341, "question_id": 30763773, "link": "https://stackoverflow.com/questions/30763773/assignment-insertion-in-rose-compiler-after-assignop/30765341#30765341", "title": "Assignment Insertion in ROSE compiler after AssignOp", "body": "<p>OK... while writing my questions I realized I had to give the scope methods another chance.</p>\n\n<p>I found that setting the scope to the function worked, therefore:</p>\n\n<pre><code>    pushScopeStack (TransformationSupport::getFunctionDeclaration(node)-&gt;get_scope());\n    SgExprStatement* newAsmt = buildAssignStatement(buildVarRefExp(\"a\"),buildIntVal(9));        \n    insertStatementAfter(asmStmt,newAsmt);\n    popScopeStack();\n</code></pre>\n\n<p>I feel like this is the right way to do it, but I still feel there's documentation missing about the use of these methods and the ScopeStack in general.</p>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 8157656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5db0a1f35a9d1f6a57763b84f5c04a60?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Nelson", "link": "https://stackoverflow.com/users/8157656/cole-nelson"}, "is_accepted": false, "score": 1, "last_activity_date": 1497406070, "creation_date": 1497406070, "answer_id": 44534274, "question_id": 30763773, "link": "https://stackoverflow.com/questions/30763773/assignment-insertion-in-rose-compiler-after-assignop/44534274#44534274", "title": "Assignment Insertion in ROSE compiler after AssignOp", "body": "<p>This is old, but answering for people with this problem in the future.</p>\n\n<p>The error actually comes from when you are calling buildVarRefExp and buildPragmaDeclaration. As can bee seen through <a href=\"http://rosecompiler.org/ROSE_HTML_Reference/namespaceSageBuilder.html\" rel=\"nofollow noreferrer\">doxygen</a>, they take an optional parameter for SgScopeStatement. This scope statement is where SageBuilder finds the variable referenced (<a href=\"https://github.com/rose-compiler/rose/blob/master/src/frontend/SageIII/sageInterface/sageBuilder.C\" rel=\"nofollow noreferrer\">github source</a>). <em>If it is not given, it takes it from the ScopeStack</em>. However, when you haven't pushed anything onto the ScopeStack and call these functions without the optional parameter, it does not know where to look.</p>\n\n<p>So, your two solutions are:</p>\n\n<ol>\n<li>Use the ScopeStack for storing the SgScopeStatement (eg pushScopeStack)</li>\n<li>Pass the SgScopeStatement into buildVarRefExp and buildPragmaDeclaration as an argument.</li>\n</ol>\n\n<p>In your case specifically, you could do:</p>\n\n<pre><code>SgScopeStatement scope = TransformationSupport::getFunctionDeclaration(node)-&gt;get_scope();\n</code></pre>\n\n<p>And replace your SageBuilder statements with:</p>\n\n<pre><code>buildPragmaDeclaration(osPragma.str(), scope);\nbuildVarRefExp(\"a\", scope);\n</code></pre>\n"}], "owner": {"reputation": 66, "user_id": 2079113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd17b6d5fb9140c6b688fd60e922d3ad?s=128&d=identicon&r=PG&f=1", "display_name": "joseppinilla", "link": "https://stackoverflow.com/users/2079113/joseppinilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1504124656, "creation_date": 1433958766, "last_edit_date": 1504124656, "question_id": 30763773, "link": "https://stackoverflow.com/questions/30763773/assignment-insertion-in-rose-compiler-after-assignop", "title": "Assignment Insertion in ROSE compiler after AssignOp", "body": "<p>Lately I've been working with the ROSE compiler and I was able to apply a few insertions of code into C source and get a successful output. However, I haven't been able to insert an assignment statement when visiting SgAssignOps. This is a simplified version of my code to show the problem:</p>\n\n<pre><code>#include \"rose.h\"\n#include &lt;iostream&gt;\n#include &lt;transformationSupport.h&gt;\nusing namespace SageInterface;\nusing namespace SageBuilder;\nusing namespace std;\n\nint main (int argc, char *argv[])\n{\n    SgProject *project = frontend (argc, argv);\n\n    // Find all Assignment operations\n    std::vector&lt;SgNode* &gt; assignOpList = NodeQuery::querySubTree (project, V_SgAssignOp);\n\n    std::vector&lt;SgNode*&gt;::iterator iter;\n\n    for (iter = assignOpList.begin(); iter!= assignOpList.end(); iter++) { \n\n        SgNode * node = (*iter);\n\n        SgStatement * asmStmt = TransformationSupport::getStatement(node);\n\n        //ADD PRAGMA STATEMENT BEFORE       \n        ostringstream osPragma;\n        osPragma &lt;&lt; \"example statement\";\n        SgPragmaDeclaration* pragmaDecl = buildPragmaDeclaration(osPragma.str());\n        insertStatementBefore(asmStmt, pragmaDecl);\n\n        //ADD ASSIGNMENT STATEMENT AFTER\n        SgExprStatement* newAsmt = buildAssignStatement(buildVarRefExp(\"a\"),buildIntVal(9));\n        insertStatementAfter(asmStmt,newAsmt);\n    }\n\n    AstTests::runAllTests(project); \n    // Translation only\n    project-&gt;unparse();\n}\n</code></pre>\n\n<p>A simple input code:</p>\n\n<pre><code>int main(int argc, char* argv[])\n{\n    int a;\n\n    a = 3;\n\n    return a;\n\n}\n</code></pre>\n\n<p>The code compiles. However..</p>\n\n<p>When applied to the input code I get a segmentation fault, no error messages.</p>\n\n<p>If I remove the assignment statement insertion, the pragma insertion works.</p>\n\n<p>If I remove the call to runAllTests() I get the following error message when unparsing:</p>\n\n<pre><code>test: /mnt/DATA/rose/src/backend/unparser/nameQualificationSupport.C:4986: virtual NameQualificationInheritedAttribute NameQualificationTraversal::evaluateInheritedAttribute(SgNode*, NameQualificationInheritedAttribute): Assertion `initializedName-&gt;get_parent() != __null' failed.\nAborted (core dumped)\n</code></pre>\n\n<p>Notice I'm using \"a\" in this example and in the input code, so the variable is already declared.</p>\n\n<p>What would be the right way to make an assignment insertion like that?</p>\n\n<p>The provided example in the tutorial uses the scope on the main function body and inserts it at the end, I need it to happen after another assignment. Do I need to push the Scope on the node to the ScopeStack? And if so, how would that be expressed? I'm not very familiar with the push and pop scope stack methods.</p>\n"}, {"tags": ["c", "16-bit"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433958971, "post_id": 30763759, "comment_id": 49580115, "body": "First of all, provide the variable types you are using."}, {"owner": {"reputation": 1400, "user_id": 4970622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t8sl2.jpg?s=128&g=1", "display_name": "Samurai Jack", "link": "https://stackoverflow.com/users/4970622/samurai-jack"}, "edited": false, "score": 0, "creation_date": 1433959011, "post_id": 30763759, "comment_id": 49580143, "body": "what is type of array,cc and val ?"}], "answers": [{"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 1, "last_activity_date": 1433959068, "creation_date": 1433959068, "answer_id": 30763854, "question_id": 30763759, "link": "https://stackoverflow.com/questions/30763759/what-happens-if-i-sum-negative-values-to-a-16bit-register-constantly/30763854#30763854", "title": "What happens if I sum negative values to a 16bit register constantly", "body": "<blockquote>\n  <p>What happens if I sum negative values to a 16bit register constantly</p>\n</blockquote>\n\n<p>You will have undefined behavior. Let's say that for example your <code>int</code> is 16-bit and you are adding the two <code>int</code> value <code>INT_MIN</code> and <code>-1</code>, it will invoke undefined behavior. In most systems you will end up with a positive value.</p>\n\n<p>Use a variable of a wider type to sum your values, for example declare <code>val</code> of type <code>long</code> which guaranteed to be at least 32-bit wide.</p>\n"}, {"tags": [], "owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "is_accepted": false, "score": 0, "last_activity_date": 1433959323, "creation_date": 1433959323, "answer_id": 30763927, "question_id": 30763759, "link": "https://stackoverflow.com/questions/30763759/what-happens-if-i-sum-negative-values-to-a-16bit-register-constantly/30763927#30763927", "title": "What happens if I sum negative values to a 16bit register constantly", "body": "<p>Sum is most probably stored using 2's complement code (see <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Two%27s_complement</a>). When you hit the lowest negative value and try to decrement it by one, you will get the largest possible positive value. </p>\n\n<p>Looks that you need to use 32-bit variable to store summed values.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1433959589, "creation_date": 1433959589, "answer_id": 30764020, "question_id": 30763759, "link": "https://stackoverflow.com/questions/30763759/what-happens-if-i-sum-negative-values-to-a-16bit-register-constantly/30764020#30764020", "title": "What happens if I sum negative values to a 16bit register constantly", "body": "<p>As already said by others, the cause of your problem is an overflow.</p>\n\n<p>Here is another way for taking average of a great number of values with less risk of overflow, <em>provided you can have a hint on the average value</em>. It is based on following formula :</p>\n\n<pre><code>avg(x) = avg(x - hint) + hint\n</code></pre>\n\n<p>For example, if you know that your values are all between -200 and -300, you could take <code>hint = -250</code>. Now, instead of adding values between -200 and -300, you add values between -50 and +50. The risk of overflow is much weaker, without any loss in precision.</p>\n\n<p>In fact this is commonly used for increasing precision when calculating the average of a great number of floating point values</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1433965990, "last_edit_date": 1495535216, "creation_date": 1433965635, "answer_id": 30765914, "question_id": 30763759, "link": "https://stackoverflow.com/questions/30763759/what-happens-if-i-sum-negative-values-to-a-16bit-register-constantly/30765914#30765914", "title": "What happens if I sum negative values to a 16bit register constantly", "body": "<p>OP's present code is overflowing.</p>\n\n<p>Certainly using a wider integer is the simplest approach as answered by <a href=\"https://stackoverflow.com/a/30763854/2410359\">@ouah</a></p>\n\n<p>Otherwise, to prevent overflow, consider summing in parts.  Let us assume variables are type <code>int, int[]</code></p>\n\n<pre><code>void SmoothArray(void) { \n    val_msds = 0;\n    val_lsd = 0;\n    for(k=0;k&lt;10;k++) {\n        cc = array[k];\n        val_msds += cc/10;  \n        val_lsd += cc%10;  \n    }\n    val = val_msds + val_lsd/10; \n}\n</code></pre>\n\n<p>This approach work well as long as the number of array elements (10 in OP's example) is less than <code>sqrt(INT_MAX)</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 4983974, "user_type": "registered", "profile_image": "https://graph.facebook.com/572259909580569/picture?type=large", "display_name": "Sulaiman Ayub", "link": "https://stackoverflow.com/users/4983974/sulaiman-ayub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1433965990, "creation_date": 1433958712, "last_edit_date": 1433959076, "question_id": 30763759, "link": "https://stackoverflow.com/questions/30763759/what-happens-if-i-sum-negative-values-to-a-16bit-register-constantly", "title": "What happens if I sum negative values to a 16bit register constantly", "body": "<p>I am stuck in my project. I am actually finding the average of multiple values. I have ten values to average. The sum is giving the correct result for some time that is I am adding the negative numbers and the result is also negative numbers, but when the values whose average is to be found has high magnitudes then the 16bit register in which the summmation is stored gives positive value. What is going wrong in here.</p>\n\n<pre><code>void SmoothArray()\n{ \n    val = 0;\n    for(k=0;k&lt;10;k++)\n    {\n        cc = array[k];\n        val += cc; \n    }\n    val /= 10; \n}\n</code></pre>\n\n<p>In this when array has many locations negative the summation is wrong that is positive. C language used. Array is unsigned short, while val is short</p>\n"}, {"tags": ["c", "encoding", "zlib"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1433957868, "post_id": 30763449, "comment_id": 49579387, "body": "Do you want to uncompress a file with a command-line program, or do you want to uncompress the file in your own program? Both are possible, but only one of those problems could be asked about here."}, {"owner": {"reputation": 577, "user_id": 3034338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9324b483505227ab1839298f7159d1?s=128&d=identicon&r=PG&f=1", "display_name": "fernando.reyes", "link": "https://stackoverflow.com/users/3034338/fernando-reyes"}, "edited": false, "score": 0, "creation_date": 1433959219, "post_id": 30763449, "comment_id": 49580266, "body": "you can download zlib library and uncompress it, just like that"}, {"owner": {"reputation": 85, "user_id": 1025748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb2de2f562d39b2684bdaa1522354f66?s=128&d=identicon&r=PG", "display_name": "Francesco", "link": "https://stackoverflow.com/users/1025748/francesco"}, "edited": false, "score": 0, "creation_date": 1433962880, "post_id": 30763449, "comment_id": 49582487, "body": "Ok, I guess I asked is a silly question since the response is quite obvious. I&#39;ll write a simple C program that use the &quot;inflate&quot; function from the zlib library to try to decompress the binary blob. I guess this is <i>the</i> most obvious thing to do. I did ask the question because at the beginning I thought there was some subtleties involved like adding an header at the beginning of the blob or not."}, {"owner": {"reputation": 85, "user_id": 1025748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb2de2f562d39b2684bdaa1522354f66?s=128&d=identicon&r=PG", "display_name": "Francesco", "link": "https://stackoverflow.com/users/1025748/francesco"}, "edited": false, "score": 0, "creation_date": 1433963072, "post_id": 30763449, "comment_id": 49582585, "body": "I&#39;m also wandering if there are different flavors of zlib that I should try. The application that produce the blob works on windows and use a shared library called zlib1.dll."}], "owner": {"reputation": 85, "user_id": 1025748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb2de2f562d39b2684bdaa1522354f66?s=128&d=identicon&r=PG", "display_name": "Francesco", "link": "https://stackoverflow.com/users/1025748/francesco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1433957697, "creation_date": 1433957697, "question_id": 30763449, "link": "https://stackoverflow.com/questions/30763449/decoding-a-compressed-binary-blob-using-zlib", "title": "decoding a compressed binary blob using zlib", "body": "<p>I have an application that seems to encode some data (a long text) as a compressed binary blob using zlib.</p>\n\n<p>I would like to know how I can possibly decode the compressed binary blob.</p>\n\n<p>I guess I can use the zlib library itself or a command line tool but I'm not sure.</p>\n"}, {"tags": ["php", "c", "g-wan"], "comments": [{"owner": {"reputation": 25177, "user_id": 1064767, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/af97e0b5fa21ad9414e7c2c383d4cc81?s=128&d=identicon&r=PG", "display_name": "Sammitch", "link": "https://stackoverflow.com/users/1064767/sammitch"}, "edited": false, "score": 0, "creation_date": 1433957382, "post_id": 30763253, "comment_id": 49579120, "body": "<a href=\"http://en.wikipedia.org/wiki/HTTP_cookie#Implementation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/HTTP_cookie#Implementation</a>"}, {"owner": {"reputation": 25177, "user_id": 1064767, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/af97e0b5fa21ad9414e7c2c383d4cc81?s=128&d=identicon&r=PG", "display_name": "Sammitch", "link": "https://stackoverflow.com/users/1064767/sammitch"}, "edited": false, "score": 0, "creation_date": 1433964118, "post_id": 30763253, "comment_id": 49583196, "body": "It&#39;s called a &quot;learning experience&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 3258706, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9a9bfcb6a2bbcc89e6da516f4dce81b8?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/3258706/matt"}, "edited": false, "score": 0, "creation_date": 1434084858, "post_id": 30794815, "comment_id": 49640140, "body": "Where did you get this example from"}, {"owner": {"reputation": 187, "user_id": 3258706, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9a9bfcb6a2bbcc89e6da516f4dce81b8?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/3258706/matt"}, "edited": false, "score": 0, "creation_date": 1434084982, "post_id": 30794815, "comment_id": 49640176, "body": "What is the example cookie name here"}, {"owner": {"reputation": 187, "user_id": 3258706, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9a9bfcb6a2bbcc89e6da516f4dce81b8?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/3258706/matt"}, "edited": false, "score": 0, "creation_date": 1434089290, "post_id": 30794815, "comment_id": 49641700, "body": "Do you need to compile c for gwan?"}, {"owner": {"reputation": 246, "user_id": 1741361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e385ac371fe2effe27b0a5c6441dee60?s=128&d=identicon&r=PG", "display_name": "Nagi", "link": "https://stackoverflow.com/users/1741361/nagi"}, "reply_to_user": {"reputation": 187, "user_id": 3258706, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9a9bfcb6a2bbcc89e6da516f4dce81b8?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/3258706/matt"}, "edited": false, "score": 0, "creation_date": 1434089819, "post_id": 30794815, "comment_id": 49641896, "body": "you can find them in G-WAN tar ball: /gwan_linux32-bit/0.0.0.0_8080/#0.0.0.0/csp"}, {"owner": {"reputation": 246, "user_id": 1741361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e385ac371fe2effe27b0a5c6441dee60?s=128&d=identicon&r=PG", "display_name": "Nagi", "link": "https://stackoverflow.com/users/1741361/nagi"}, "reply_to_user": {"reputation": 187, "user_id": 3258706, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9a9bfcb6a2bbcc89e6da516f4dce81b8?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/3258706/matt"}, "edited": false, "score": 0, "creation_date": 1434090034, "post_id": 30794815, "comment_id": 49641979, "body": "To set cookie, use the syntax you see in the <a href=\"http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#innerlink_set-cookie\" rel=\"nofollow noreferrer\">wiki page</a>. Cookies.c break down the HTTP cookies header into a <a href=\"http://gwan.com/api#kv\" rel=\"nofollow noreferrer\">G-WAN KV</a>.  For your last question - you need gcc in order to run G-WAN C servlet."}, {"owner": {"reputation": 187, "user_id": 3258706, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9a9bfcb6a2bbcc89e6da516f4dce81b8?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/3258706/matt"}, "edited": false, "score": 0, "creation_date": 1434090447, "post_id": 30794815, "comment_id": 49642154, "body": "Yeah but every time you change the progam do you have to compile it?"}, {"owner": {"reputation": 246, "user_id": 1741361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e385ac371fe2effe27b0a5c6441dee60?s=128&d=identicon&r=PG", "display_name": "Nagi", "link": "https://stackoverflow.com/users/1741361/nagi"}, "reply_to_user": {"reputation": 187, "user_id": 3258706, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9a9bfcb6a2bbcc89e6da516f4dce81b8?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/3258706/matt"}, "edited": false, "score": 0, "creation_date": 1434098088, "post_id": 30794815, "comment_id": 49646061, "body": "G-WAN let you write C code as if it&#39;s a scripting language. You don&#39;t have to compile anything - G-WAN do it for you. Just put your code in the correct place and browse (<a href=\"http://localhost:8080/csp/?cookie.c\" rel=\"nofollow noreferrer\">localhost:8080/csp/?cookie.c</a>)"}], "tags": [], "owner": {"reputation": 246, "user_id": 1741361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e385ac371fe2effe27b0a5c6441dee60?s=128&d=identicon&r=PG", "display_name": "Nagi", "link": "https://stackoverflow.com/users/1741361/nagi"}, "is_accepted": true, "score": 1, "last_activity_date": 1434079331, "creation_date": 1434079331, "answer_id": 30794815, "question_id": 30763253, "link": "https://stackoverflow.com/questions/30763253/how-to-set-and-read-cookies-using-c-and-the-g-wan-web-server/30794815#30794815", "title": "How to set and read cookies using C and the G-wan web server", "body": "<p>The G-WAN tar ball includes 2 sample source code files related to cookies: cookie.c (set a cookie) </p>\n\n<pre><code>#include \"gwan.h\" // G-WAN exported functions\n\nint main(int argc, char *argv[])\n{\n   // \"Set-Cookie: Domain=.foo.com; Path=/; Max-Age=%u\\r\\n\"\n   const char cookie[] = \"Set-Cookie: Max-Age=3600\\r\\n\" // 1 hour\n                         \"Location: /?served_from\\r\\n\\r\\nblah\\r\\n\";\n   http_header(HEAD_ADD, (char*)cookie, sizeof(cookie) - 1, argv);\n\n   return 301; // return an HTTP code (301:'Moved')\n}\n</code></pre>\n\n<p>and cookies.c (read cookies)</p>\n\n<pre><code>#include \"gwan.h\"\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n// ----------------------------------------------------------------------------\n// where 'cookies' = \"key1=value1; key2=value2;\"\n// ----------------------------------------------------------------------------\nstatic kv_t parse_cookies(char *cookies)\n{\n  kv_t cookies_store;\n  kv_init(&amp;cookies_store, \"cookies\", 1024, 0, 0, 0);\n\n  char *key, *val, *lasts = 0;\n  for(;;)\n  {\n     key = strtok_r(cookies, \"= \", &amp;lasts);\n     val = strtok_r(0, \";,\", &amp;lasts);\n\n     if(!val) break; //no more cookies\n\n     kv_add(&amp;cookies_store, \n            &amp;(kv_item){\n             .key = key,\n             .val = val,\n             .flags = 0,\n           });\n\n     cookies = 0;\n  }\n  return cookies_store;\n}\n// ----------------------------------------------------------------------------\nint main(int argc, char *argv[])\n{\n  // using the client cookies (make sure that they are there)\n  // http_t *http = get_env(argv, HTTP_HEADERS, 0);\n  // kv_t cookies_store = parse_cookies(http-&gt;h_cookies);\n\n  // using fixed cookies (for tests without client cookies)\n  char cookies[] = \"key=val;foo=bar\"; \n  kv_t cookies_store = parse_cookies(cookies);\n\n  char *val = kv_get(&amp;cookies_store, \"key\", sizeof(\"key\") - 1);\n\n  printf(\"%s = %s\\n\", \"key\", val);\n\n  kv_free(&amp;cookies_store);\n  return 200;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 187, "user_id": 3258706, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9a9bfcb6a2bbcc89e6da516f4dce81b8?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/3258706/matt"}, "edited": false, "score": 0, "creation_date": 1434089272, "post_id": 30796248, "comment_id": 49641693, "body": "Do you need to compile c for gwan?"}, {"owner": {"reputation": 3189, "user_id": 1079036, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/368d20296c0ae6df9a0dd7ddfbdec535?s=128&d=identicon&r=PG", "display_name": "Gil", "link": "https://stackoverflow.com/users/1079036/gil"}, "edited": false, "score": 0, "creation_date": 1434207409, "post_id": 30796248, "comment_id": 49686372, "body": "No, G-WAN offers scripts in 17 programming languages - including C"}], "tags": [], "owner": {"reputation": 400, "user_id": 2711701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2GD88.jpg?s=128&g=1", "display_name": "ker2x", "link": "https://stackoverflow.com/users/2711701/ker2x"}, "is_accepted": false, "score": 1, "last_activity_date": 1434088945, "creation_date": 1434088945, "answer_id": 30796248, "question_id": 30763253, "link": "https://stackoverflow.com/questions/30763253/how-to-set-and-read-cookies-using-c-and-the-g-wan-web-server/30796248#30796248", "title": "How to set and read cookies using C and the G-wan web server", "body": "<p>Cookie are set like any other HTTP header : <a href=\"http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#innerlink_set-cookie\" rel=\"nofollow\">http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#innerlink_set-cookie</a></p>\n\n<p>You can find sample code in the gwan archive, here : gwan_linux64-bit/0.0.0.0_8080/#0.0.0.0/csp</p>\n"}], "owner": {"reputation": 187, "user_id": 3258706, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/9a9bfcb6a2bbcc89e6da516f4dce81b8?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/3258706/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 1, "accepted_answer_id": 30794815, "answer_count": 2, "score": 3, "last_activity_date": 1434088945, "creation_date": 1433957107, "last_edit_date": 1433959354, "question_id": 30763253, "link": "https://stackoverflow.com/questions/30763253/how-to-set-and-read-cookies-using-c-and-the-g-wan-web-server", "title": "How to set and read cookies using C and the G-wan web server", "body": "<p>In php you would set a cookie by doing</p>\n\n<pre><code>Setting new cookie\n=============================\n&lt;?php\u00a0\nsetcookie(\"name\",\"value\",time()+$int);\n/*name is your cookie's name\nvalue is cookie's value\n$int is time of cookie expires*/\n?&gt;\n\nGetting Cookie\n=============================\n&lt;?php\u00a0\necho\u00a0$_COOKIE[\"your cookie name\"];\n?&gt;\n</code></pre>\n\n<p>How do you set and read cookie?</p>\n\n<p>I can't seem to find any articles on the web explaining hoe to do this. In fact there is not many c web development article</p>\n"}, {"tags": ["c", "opencv", "webcam"], "comments": [{"owner": {"reputation": 6099, "user_id": 1638010, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/02688b7723adbdc1a47705b2bf6b617c?s=128&d=identicon&r=PG", "display_name": "Craig S. Anderson", "link": "https://stackoverflow.com/users/1638010/craig-s-anderson"}, "edited": false, "score": 0, "creation_date": 1433959860, "post_id": 30763185, "comment_id": 49580641, "body": "Could you include the code that calls cvarrToMat?"}, {"owner": {"reputation": 1809, "user_id": 951784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9858b1ffedc039e48a0ed219198d538c?s=128&d=identicon&r=PG", "display_name": "rost0031", "link": "https://stackoverflow.com/users/951784/rost0031"}, "edited": false, "score": 1, "creation_date": 1433959904, "post_id": 30763185, "comment_id": 49580665, "body": "Sounds like your issue has to do with the webcam reading, not sending/receiving the UDP data.  Make sure you can read the webcam on the server side and try to display it just to eliminate the network variable from your problem."}, {"owner": {"reputation": 21, "user_id": 1044190, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/75c39e6a02f991262f847ca31135edbe?s=128&d=identicon&r=PG", "display_name": "notsag2d", "link": "https://stackoverflow.com/users/1044190/notsag2d"}, "edited": false, "score": 0, "creation_date": 1433960285, "post_id": 30763185, "comment_id": 49580914, "body": "I do not call cvarrToMat in my code. I believe cvEncodeImage is the one that calls it. Also, I could display the image and capture de webcam correctly in a simple program without the UDP conection. I&#39;m guessing it&#39;s just not a good way to just send an encoded image this way. Perhaps not using cvEncodeImage and manually syncing problem of lines/frames? Hope you can help me"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 1044190, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/75c39e6a02f991262f847ca31135edbe?s=128&d=identicon&r=PG", "display_name": "notsag2d", "link": "https://stackoverflow.com/users/1044190/notsag2d"}, "is_accepted": true, "score": -1, "last_activity_date": 1433999397, "creation_date": 1433999397, "answer_id": 30772048, "question_id": 30763185, "link": "https://stackoverflow.com/questions/30763185/trying-to-write-a-udp-streaming-webcam-service-on-c/30772048#30772048", "title": "Trying to write a UDP streaming webcam service on C", "body": "<p>I finally got around the answer myself. Hope this helps for anybody who struggles with UDP+OpenCV+CapturefromCAM.\nThe whole use of cvEncodeImage and cvDecodeImage is not really necessary. Since the struct IplImage already holds its data in image->imageData.\nHence the following codes:</p>\n\n<p>Server side:</p>\n\n<pre><code>cvNamedWindow(\"Webcam from Server\", CV_WINDOW_AUTOSIZE);\nFrameCapture = cvCaptureFromCAM(0); \nframeORG = cvQueryFrame(FrameCapture);  \nsmall = cvCreateImage(cvSize(frameORG-&gt;width, frameORG-&gt;height), frameORG-&gt;depth, 3);\n\nif(!FrameCapture) {\n    printf(\"Could not iniciate webcam\\n\");\n    return;\n}\n\nwhile((cvWaitKey(40) &amp; 0xFF) != ESC_KEY)\n{\n        small = cvQueryFrame(FrameCapture);                                     \n        for(times = 0; times &lt; MAX_PAQS; times++)\n        {\n            memset(bufUDP, 0, UDPMAX);\n            memcpy(bufUDP, small-&gt;imageData + UDPMAX*times, UDPMAX);\n            if (sendto(sockUDP, bufUDP, UDPMAX, 0, (struct sockaddr *)&amp;servUDP, length) &lt; 0)\n            {\n                // check errno for the problem or conection lost\n            }\n        }\n    }\n    cvShowImage(\"Webcam from Server\", small); // feedback on server webcam\n}\n</code></pre>\n\n<p>Client side:</p>\n\n<pre><code>cvNamedWindow(\"UDP Streaming from Server\", CV_WINDOW_AUTOSIZE);\nimg = cvCreateImage(cvSize(640, 480), IPL_DEPTH_8U, 3);\n\nwhile((cvWaitKey(40) &amp; 0xFF) != ESC_KEY)\n{\n    for(times = 0; times &lt; MAX_PAQS; times++)\n    {\n        if (recvfrom(sockUDP, bufUDP, UDPMAX, 0, (struct sockaddr *)&amp;servUDP, &amp;length) &lt; 0)\n        {\n                // check errno for the problem or conection lost\n        }\n        memcpy(img-&gt;imageData + UDPMAX*times, bufUDP, UDPMAX);\n    }\n\n    cvShowImage(\"UDP Streaming from Server\", img);\n}\n</code></pre>\n\n<p>Notice that there is no frame sync here (I didn't copy that part). UDPMAX has to hold an amount equal to width<em>height</em>channels/MAX_PAQS. As you can see, I used a 640*480-3 channel frame.</p>\n"}], "owner": {"reputation": 21, "user_id": 1044190, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/75c39e6a02f991262f847ca31135edbe?s=128&d=identicon&r=PG", "display_name": "notsag2d", "link": "https://stackoverflow.com/users/1044190/notsag2d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 714, "favorite_count": 0, "accepted_answer_id": 30772048, "answer_count": 1, "score": -1, "last_activity_date": 1433999397, "creation_date": 1433956942, "last_edit_date": 1433959932, "question_id": 30763185, "link": "https://stackoverflow.com/questions/30763185/trying-to-write-a-udp-streaming-webcam-service-on-c", "title": "Trying to write a UDP streaming webcam service on C", "body": "<p>folks.</p>\n\n<p>I'm not entirely sure how should I send the encoded image over the UDP datagram. Once the UDP service is established, I'm running this loop:</p>\n\n<p>Server side:</p>\n\n<pre><code>FrameCapture = cvCaptureFromCAM(-1);\nframeORG = cvQueryFrame(FrameCapture);  \nsmall = cvCreateImage(cvSize(frameORG-&gt;width / 2, frameORG-&gt;height / 2), frameORG-&gt;depth, 3);   \n\nwhile((cvWaitKey(40) &amp; 0xFF) != ESC_KEY)\n{\n    frameORG = cvQueryFrame(FrameCapture);\n\n    VideoBuffer = cvEncodeImage(bufUDP, &amp;small, 0);\n    memcpy(bufUDP, VideoBuffer, UDPMAX);\n\n    if (sendto(sockUDP, bufUDP, strlen(bufUDP), 0, (struct sockaddr *)&amp;servUDP, length) &lt; 0)\n    {\n        if (errno == EPIPE)\n        {\n            printf(\"Connection lost.);\n        }\n        else\n        {\n            perror(\"Transmission failed.\");\n        }\n        exit(1);\n    }\n}\n</code></pre>\n\n<p>Client side:</p>\n\n<pre><code>bufUDP = (char*) malloc(UDPMAX);\nVideoBuffer = (CvMat *) malloc(UDPMAX);\ncvNamedWindow(\"UDP Streaming from Server\", CV_WINDOW_AUTOSIZE);\n\nwhile ((cvWaitKey(40) &amp; 0xFF) != ESC_KEY) \n{\n    if (recvfrom(sockUDP, bufUDP, strlen(bufUDP), 0, (struct sockaddr *)&amp;servUDP, &amp;length) &lt; 0)\n    {\n        if (errno == EPIPE)\n        {\n            printf(\"Connection lost.\\n\");\n        }\n        else\n        {\n            perror(\"Problem recieving data.\");\n        }\n        exit(1);\n    }\n    memcpy(VideoBuffer, bufUDP, UDPMAX);\n    img = cvDecodeImage(VideoBuffer,CV_LOAD_IMAGE_COLOR);\n    cvShowImage(\"UDP Video Receiver\", &amp;img);\n}\n</code></pre>\n\n<p>The program is compiling without any warnings (using -Wall) but the output of this from the server side is an exception from the OpenCV function.</p>\n\n<blockquote>\n  <p>OpenCV Error: Bad argument (Unknown array type) in cvarrToMat, file /../../../../../../../matrix.cpp, line 698\n  terminate called after throwing an instance of 'cv::Exception'\n    what():  /../../../../../../../matrix.cpp:698: error: (-5) Unknown array type in function cvarrToMat</p>\n</blockquote>\n\n<p>I'm not entirely sure how should I handle the timing so I tried sending the packets every 40ms (25fps).</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "string", "dynamic-arrays", "c-strings"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1433956982, "post_id": 30763125, "comment_id": 49578852, "body": "Think about the resulting string if you do <code>s + 2</code> (it&#39;s the same as doing <code>&amp;s[2]</code> by the way). Then think about what would happen if you put that as a format string in <code>printf</code>."}, {"owner": {"reputation": 9055, "user_id": 996081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83817dc1e83cf8ac372b21cd5f010bc4?s=128&d=identicon&r=PG&f=1", "display_name": "cbr", "link": "https://stackoverflow.com/users/996081/cbr"}, "edited": false, "score": 0, "creation_date": 1433957046, "post_id": 30763125, "comment_id": 49578904, "body": "What do you think <code>printf(&quot;%d%d&quot;, 9, 8, 5)</code> prints?"}], "answers": [{"comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1433957288, "post_id": 30763240, "comment_id": 49579071, "body": "@haccks What do you mean?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1433957591, "post_id": 30763240, "comment_id": 49579235, "body": "@haccks I usually have a problem to find correct English words for my thoughts.:)"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1433957628, "post_id": 30763240, "comment_id": 49579257, "body": "Then you are not alone :)"}, {"owner": {"reputation": 53, "user_id": 4138330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2e94c65f24757bb08b15ffe6da0387?s=128&d=identicon&r=PG&f=1", "display_name": "vishal aanuj", "link": "https://stackoverflow.com/users/4138330/vishal-aanuj"}, "edited": false, "score": 0, "creation_date": 1433958603, "post_id": 30763240, "comment_id": 49579863, "body": "@VladfromMoscow Thanks for the response ! i got it now ."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1433957746, "last_edit_date": 1433957746, "creation_date": 1433957082, "answer_id": 30763240, "question_id": 30763125, "link": "https://stackoverflow.com/questions/30763125/c-program-strings-example-how-come-the-result-is-98/30763240#30763240", "title": "C program Strings Example how come the result is 98?", "body": "<p>Expression <code>s+2</code> speaking in images moves pointer s (in expressions array designators are converted to pointers to their first elements) two positions to the right. So the format string in the printf statement will look like</p>\n\n<pre><code>\"%d%d\"\n</code></pre>\n\n<p>because expressiom <code>s+2</code>points to the third character of string <code>\"%d%d%d\"</code>\nAs result statement</p>\n\n<pre><code>printf(s+2,a,b,c);\n</code></pre>\n\n<p>will output only two first arguments a and b because the pointed substring contains only two format specifiers and you will get</p>\n\n<pre><code>98\n</code></pre>\n\n<p>If for example you would use expression <code>s + 4</code> in the <code>printf</code> call you would get only</p>\n\n<pre><code>9\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 241, "user_id": 4449107, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/FLYzS.jpg?s=128&g=1", "display_name": "Alan Salios", "link": "https://stackoverflow.com/users/4449107/alan-salios"}, "edited": false, "score": 0, "creation_date": 1433962326, "post_id": 30763972, "comment_id": 49582166, "body": "That answer is more technical and more majority-user friendly. And more complete."}], "tags": [], "owner": {"reputation": 1379, "user_id": 4682920, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ri6Av.png?s=128&g=1", "display_name": "Imobilis", "link": "https://stackoverflow.com/users/4682920/imobilis"}, "is_accepted": true, "score": 3, "last_activity_date": 1433960482, "last_edit_date": 1433960482, "creation_date": 1433959463, "answer_id": 30763972, "question_id": 30763125, "link": "https://stackoverflow.com/questions/30763125/c-program-strings-example-how-come-the-result-is-98/30763972#30763972", "title": "C program Strings Example how come the result is 98?", "body": "<p><code>string + x</code> is an operation called <a href=\"http://www.tutorialspoint.com/cprogramming/c_pointer_arithmetic.htm\" rel=\"nofollow\">Pointer Arithmetic</a>.\nThat way you are providing reference to a mathematically calculated memory area and by semantics it is equivalent to <code>&amp;string[x]</code>\nWhat actually happens behind the calculation:\n<code>(&amp;string + (x * sizeof(*string)))</code> which is why it is a very specific notion when it is applied to pointers. That stands for Arrays as well as they decay to a pointer to the first element after all.</p>\n\n<hr>\n\n<p>As for your code, you have the following string:</p>\n\n<pre><code>char s[]=\"%d%d%d\";\n</code></pre>\n\n<p>And is passed as the format string for printf, two bytes afterwards, which explicitly provides reference to <code>\"%d%d\"</code></p>\n\n<hr>\n\n<p>Therefore this:</p>\n\n<pre><code>printf(s+2,a,b,c);\n</code></pre>\n\n<p>Is later parsed as:</p>\n\n<pre><code>printf(\"%d%d\",a,b,c);\n</code></pre>\n\n<p><a href=\"http://www.cplusplus.com/reference/cstdio/printf/\" rel=\"nofollow\">printf</a> will except two integers to read from and the 3rd one will be simply - ignored.</p>\n"}], "owner": {"reputation": 53, "user_id": 4138330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2e94c65f24757bb08b15ffe6da0387?s=128&d=identicon&r=PG&f=1", "display_name": "vishal aanuj", "link": "https://stackoverflow.com/users/4138330/vishal-aanuj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 30763972, "answer_count": 2, "score": 0, "last_activity_date": 1433960482, "creation_date": 1433956752, "last_edit_date": 1433956906, "question_id": 30763125, "link": "https://stackoverflow.com/questions/30763125/c-program-strings-example-how-come-the-result-is-98", "title": "C program Strings Example how come the result is 98?", "body": "<p>C program Strings Example how come the result is 98?</p>\n\n<pre><code> #include &lt;stdio.h&gt;\nint main() \n {\n  char s[]=\"%d%d%d\";\n   int a=9,b=8,c=5;\n     printf(s+2,a,b,c);\n    return 0;\n     }\n</code></pre>\n"}, {"tags": ["c", "logic", "output", "fork"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433957075, "post_id": 30763003, "comment_id": 49578922, "body": "What OS are you working on?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4135396"}, "edited": false, "score": 0, "creation_date": 1433957712, "post_id": 30763027, "comment_id": 49579308, "body": "Thank you, can you also do me a big favor and tell me what the output is?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433957811, "post_id": 30763027, "comment_id": 49579365, "body": "No, sorry. I don&#39;t have an appropriate environment to compile it and I don&#39;t want to give a wrong answer out of my head."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 1, "last_activity_date": 1433956971, "last_edit_date": 1433956971, "creation_date": 1433956475, "answer_id": 30763027, "question_id": 30763003, "link": "https://stackoverflow.com/questions/30763003/error-running-this-fork-code-in-my-eclipse-and-also-have-some-concept-confusion/30763027#30763027", "title": "Error running this fork code in my eclipse, and also have some concept confusion around this code", "body": "<p>Change this:</p>\n\n<pre><code>if( (pid = fork()) = -1) {\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>if( (pid = fork()) == -1) {\n</code></pre>\n\n<p>As for the warning about implicit declaration of <code>fork</code>, it might happen if you work in Windows OS and using a <code>gcc</code> toolchain for <code>MinGW</code>, which is providing <code>unistd.h</code> but not implementing <code>fork</code>. In such a case you should switch to another environment. Ideally - Linux, but you can also use <code>gcc</code> for <code>Cygwin</code>, which is providing <code>fork</code> </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4135396"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433956971, "creation_date": 1433956380, "question_id": 30763003, "link": "https://stackoverflow.com/questions/30763003/error-running-this-fork-code-in-my-eclipse-and-also-have-some-concept-confusion", "title": "Error running this fork code in my eclipse, and also have some concept confusion around this code", "body": "<p>So this a simple C code on Fork that my professor gave us, I'm trying to get the output for this code, but when I tried to run in eclipse I get the following error:</p>\n\n<pre><code>Info: Internal Builder is used for build\ngcc -O0 -g3 -Wall -c -fmessage-length=0 -o ForkDemo1.o \"..\\\\ForkDemo1.c\" \n..\\ForkDemo1.c: In function 'main':\n..\\ForkDemo1.c:18:1: warning: implicit declaration of function 'fork' [-Wimplicit-function-declaration]\n if( (pid = fork()) = -1) {\n ^\n..\\ForkDemo1.c:18:20: error: lvalue required as left operand of assignment\n if( (pid = fork()) = -1) {\n</code></pre>\n\n<p>But my basic confusion around this code is: what is pid_t pid's value? is it 11 or 10, is it creating a child from parent?</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint global = 10;\n\nint main(int argc, char* argv[]) {\n\nint local = 0;\npid_t pid;\n\n\nprintf(\"Parent process: (Before fork())\");\nprintf(\" local = %d, global = %d \\n\", local, global);\n\n\nif( (pid = fork()) = -1) {\nperror(\"fork\");\nexit(1);\n}\nelse if (0 == pid) {\n\n/* child executes this branch */\nprintf(\"After the fork in the child:\");\nlocal++;\nglobal++;\nprintf(\"local = %d, global  = %d\\n\", local, global);\n} else {\n/* parent execute this branch */\n\nsleep(2); /* sleep long enough for child's output to appear */\n}\n\n/* both process excute this print statement */\nprintf(\"pid = %d. local = %d, global = %d\\n\", getpid(), local, global);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433955266, "post_id": 30762532, "comment_id": 49577768, "body": "Ok, <code>union</code> is a special data structure in C, and it is confusing. You are referring to a union of two sets in your question, right? I think you should clarify that."}, {"owner": {"reputation": 662, "user_id": 4430622, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Gs3LViEzxaA/AAAAAAAAAAI/AAAAAAAAAGU/zt8NSZNqsQg/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/4430622/dan"}, "edited": false, "score": 0, "creation_date": 1433955350, "post_id": 30762532, "comment_id": 49577841, "body": "I&#39;m not quite clear on what arrays you&#39;re dealing with. Do you have two arrays of doubles, with counters to indicate how full they are? Or are you using some kind of linked list?  You&#39;re definitely on the right track with your <code>AlmostEqualRelative(...)</code> function though. Although you could make that a <code>bool</code> instead of an unsigned int just for efficiency and to match convention. <code>unsigned int</code>s will work just as well though."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433955671, "post_id": 30762532, "comment_id": 49578033, "body": "If you know how to write a regular &#39;union` operation using an equality operator, you can rewrite it by using the <code>AlmostEqual</code> operator in the same way."}, {"owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "reply_to_user": {"reputation": 662, "user_id": 4430622, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Gs3LViEzxaA/AAAAAAAAAAI/AAAAAAAAAGU/zt8NSZNqsQg/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/4430622/dan"}, "edited": false, "score": 0, "creation_date": 1433958700, "post_id": 30762532, "comment_id": 49579934, "body": "@Dan : Yes, I two arrays of doubles. an array called ref and an array called dut which contains un-equal number of double floating point numbers."}], "answers": [{"comments": [{"owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "edited": false, "score": 0, "creation_date": 1433958641, "post_id": 30762757, "comment_id": 49579879, "body": "unfortunately my two lists are not of the same size :("}], "tags": [], "owner": {"reputation": 3135, "user_id": 2648754, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/UWGAJ.png?s=128&g=1", "display_name": "a_pradhan", "link": "https://stackoverflow.com/users/2648754/a-pradhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1433955580, "creation_date": 1433955580, "answer_id": 30762757, "question_id": 30762532, "link": "https://stackoverflow.com/questions/30762532/how-to-do-a-set-union-of-two-double-floating-point-arrays-but-allowing-a-toleran/30762757#30762757", "title": "How to do a set union of two double floating point arrays but allowing a tolerance of error of 1 microsecond", "body": "<p>Assuming that the two lists are of same size:</p>\n\n<pre><code>unsigned int // size of output array\nunion_list(const double *list1, // first list\n           const double *list2, // second list\n           double* ulist,       // output list\n           unsigned int size)   // size of input list\n{\n    unsigned int i = 0u, j = 0u ;\n    for(; i &lt; size; ++i, ++j)\n    {\n        result = is_near(list1[i], list[2]);\n        if (result == 1)\n        {\n            ulist[j] = list1[i] ;\n        }\n        else\n        { \n            ulist[j] = list1[i] ;\n            j += 1 ;\n            ulist[j] = list2[i];\n        }\n    }\n    return j ;\n}\n</code></pre>\n\n<p>Now ulist is the output array. The maximum value it can contain is size*2 and minimum is size. Allocate max number of elements. The returned value is the size of the output array.</p>\n\n<pre><code>int is_near(double a, double b)\n{\n    int result = 1 ;\n    if (fabs(a - b) &gt;= relative_error)\n        result = 2 ;\n    return result ;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2076, "user_id": 1866196, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TrCUq.png?s=128&g=1", "display_name": "skrtbhtngr", "link": "https://stackoverflow.com/users/1866196/skrtbhtngr"}, "is_accepted": false, "score": 0, "last_activity_date": 1433956097, "last_edit_date": 1433956097, "creation_date": 1433955795, "answer_id": 30762828, "question_id": 30762532, "link": "https://stackoverflow.com/questions/30762532/how-to-do-a-set-union-of-two-double-floating-point-arrays-but-allowing-a-toleran/30762828#30762828", "title": "How to do a set union of two double floating point arrays but allowing a tolerance of error of 1 microsecond", "body": "<p>You can do it like this:</p>\n\n<p>First, make a copy <code>foo</code> of the <code>ref</code> array. <code>foo</code> must be large enough to store both <code>ref</code> and <code>dut</code> arrays' elements as they may be mutually exclusive.</p>\n\n<pre><code>len=0;    \nfor(i=0;i&lt;length_ref;i++)\n        foo[len++]=ref[i];\n</code></pre>\n\n<p>Then, add to <code>foo</code> only those elements of <code>dut</code> which are not in <code>ref</code>.</p>\n\n<pre><code>for(i=0;i&lt;length_dut;i++)\n{\n    flag=1;\n    for(j=0;j&lt;length_ref;j++)\n        if(AlmostEqualRelative(dut[i],ref[j],MAXRELDIFF))\n        {\n            flag=0;\n            break;\n        }\n    if(flag)\n        foo[len++]=dut[i];\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433964914, "post_id": 30765324, "comment_id": 49583595, "body": "Hmmm By redefining <code>==</code> for the <code>qsort()</code>, this leads to <code>A == B</code>, <code>B == C</code>, but maybe <code>A != C</code>.  I think this may fool <code>qsort()</code> too much and result in &quot;sorted&quot; arrays that are not fully sorted.  The &quot;then work through the resulting array&quot; becomes fuzzy on finding the &quot;single exemplar&quot;."}, {"owner": {"reputation": 10781, "user_id": 375147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/514f1ad54850fe2533132fb56fe87536?s=128&d=identicon&r=PG", "display_name": "Norman Gray", "link": "https://stackoverflow.com/users/375147/norman-gray"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1433970529, "post_id": 30765324, "comment_id": 49586810, "body": "Hmm, very true. Indeed, I think the question is fundamentally ill-posed, or at least a significantly more sophisticated problem than it may at first appear.  Consider a sequence of numbers (0.0, 0.1, 0.2, 0.3, ..., 10.0).  Those are completely sorted, and_each one_ of those is \u2018equal\u2019 to its successor within a tolerance of, say, 0.15 (the definition of \u2018equal\u2019 that the OP wants, which is closer to the mathematical idea of <a href=\"http://en.wikipedia.org/wiki/Equivalence_relation\" rel=\"nofollow noreferrer\"><i>equivalence</i></a>), but clearly 0.0 and 10.0 shouldn&#39;t be regarded as equivalent. This problem does not have an easy answer."}, {"owner": {"reputation": 10781, "user_id": 375147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/514f1ad54850fe2533132fb56fe87536?s=128&d=identicon&r=PG", "display_name": "Norman Gray", "link": "https://stackoverflow.com/users/375147/norman-gray"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1433970562, "post_id": 30765324, "comment_id": 49586824, "body": "...consider the notion of <a href=\"http://en.wikipedia.org/wiki/Equivalence_relation#Well-definedness_under_an_equivalence_relation\" rel=\"nofollow noreferrer\">well-definedness</a>"}], "tags": [], "owner": {"reputation": 10781, "user_id": 375147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/514f1ad54850fe2533132fb56fe87536?s=128&d=identicon&r=PG", "display_name": "Norman Gray", "link": "https://stackoverflow.com/users/375147/norman-gray"}, "is_accepted": false, "score": 0, "last_activity_date": 1433963729, "creation_date": 1433963729, "answer_id": 30765324, "question_id": 30762532, "link": "https://stackoverflow.com/questions/30762532/how-to-do-a-set-union-of-two-double-floating-point-arrays-but-allowing-a-toleran/30765324#30765324", "title": "How to do a set union of two double floating point arrays but allowing a tolerance of error of 1 microsecond", "body": "<p>One way to approach this is to rewrite your <code>AlmostEqualRelative</code> function as a function which conforms to the prototype <code>int (*compar)(const void *, const void *)</code> (ie, return negative, zero or positive depending on the relative ordering of the arguments).  That makes it suitable for passing to the <code>qsort</code>(3) function.</p>\n\n<p>That done, you could concatenate your two starting arrays, <code>qsort</code> the concatenation, and then work through the resulting array copying to a final result only a single exemplar of a sequence of elements which mutually <code>compar</code> to zero.</p>\n\n<p>That would require a little bit of bookkeeping, and a bit of extra space, but it uses existing code (ie, <code>qsort</code>), and unless your arrays are so big that the extra space is a problem, it's probably the most straightforward route to a solution.</p>\n\n<p>That is, this is the moral equivalent of getting the set-union of two files by doing <code>cat f1 f2 | sort | uniq</code>, but with some fuzziness on the <code>uniq</code> comparison.</p>\n"}], "owner": {"reputation": 220, "user_id": 3295322, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/1a114d13f7cb21d6f699f5ac0b2de8a3?s=128&d=identicon&r=PG&f=1", "display_name": "YouHaveaBigEgo", "link": "https://stackoverflow.com/users/3295322/youhaveabigego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1433963729, "creation_date": 1433954925, "last_edit_date": 1433955869, "question_id": 30762532, "link": "https://stackoverflow.com/questions/30762532/how-to-do-a-set-union-of-two-double-floating-point-arrays-but-allowing-a-toleran", "title": "How to do a set union of two double floating point arrays but allowing a tolerance of error of 1 microsecond", "body": "<p>I am trying to calculate the union of two arrays containing double floating point values (they are timestamps in milliseconds), but I need to allow a tolerance of +/- one microsecond.</p>\n\n<p>For example: \nconsider the two values from the two different lists (or arrays) below:</p>\n\n<pre><code>[ref   0 : 1114974059.841] [dut   0 : 1114974059.840]\n</code></pre>\n\n<p>there is a small delta between the above two numbers of .001 microseconds. So when I make my new union list, they shouldn't both appear as unique, but should be counted as ONE item, and should only have the item from the first list (in this example, ref one, ending in 059.841).</p>\n\n<p>More examples of the above type:</p>\n\n<pre><code>[ref  21 : 1114974794.562] [dut  18 : 1114974794.560]\n[ref  22 : 1114974827.840] [dut  19 : 1114974827.840]\n[ref  23 : 1114974861.121] [dut  20 : 1114974861.120]\n</code></pre>\n\n<p>All the above should be considered as ONE, and hence the union list should ONLY have the ONE item of the first list: the union list would have all three from the <code>ref</code> array, and NONE from the <code>dut</code> array.</p>\n\n<p>Now consider the example :</p>\n\n<pre><code>[ref   8 : 1114974328.641] [dut   8 : 1114974361.921]\n</code></pre>\n\n<p>Here, the delta between the two values in the list above is quite significant with respect to microseconds, and it comes under .01 micro-seconds, and hence should be considered as TWO unique items in the new union list.</p>\n\n<p>Here is another example like the above one :</p>\n\n<pre><code>[ref  13 : 1114974495.041] [dut  12 : 1114974528.321]\n[ref  26 : 1114974960.960] [dut  23 : 1114975027.520]\n[ref  27 : 1114974994.240] [dut  23 : 1114975027.780]\n</code></pre>\n\n<p>They all should be considered unique in the new union list.</p>\n\n<p>Can you help me?</p>\n\n<p>I made a subroutine that allows me to detect the tolerance like this:</p>\n\n<pre><code>unsigned int AlmostEqualRelative(double A, double B, double maxRelDiff){\n    double diff = fabs(A - B);      // Calculate the difference.\n    // \n    if (diff &lt; maxRelDiff) {\n        //printf(\"\\n page hit    [ref: %10.3f] [dut: %10.3f]\",A,B);\n        return 1;\n    }\n        //printf(\"\\n page miss   [ref: %10.3f] [dut: %10.3f]\",A,B);\n    return 0;\n\n}\n</code></pre>\n\n<p>I give maxRelDiff as .02.</p>\n"}, {"tags": ["c++", "c", "eclipse"], "comments": [{"owner": {"reputation": 9260, "user_id": 1059549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NS6Vt.jpg?s=128&g=1", "display_name": "Dory Zidon", "link": "https://stackoverflow.com/users/1059549/dory-zidon"}, "edited": false, "score": 1, "creation_date": 1433954525, "post_id": 30762336, "comment_id": 49577329, "body": "maybe make the c into a shared library / dll?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 5, "creation_date": 1433954583, "post_id": 30762336, "comment_id": 49577365, "body": "Compile C code in C mode, then combine C and C++ at link time. If you use gcc, you can add a compiler option <code>-std=C99</code> or equivalent to force some source files be compiled as in C99 mode."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1433954636, "post_id": 30762336, "comment_id": 49577404, "body": "Nested functions aren&#39;t part of C either. That&#39;s a gcc extension (and insane)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1433954695, "post_id": 30762336, "comment_id": 49577440, "body": "related: <a href=\"http://stackoverflow.com/questions/5430688/compiling-c-and-c-files-together-using-gcc\">Compiling C and C++ files together using GCC</a>"}, {"owner": {"reputation": 21, "user_id": 4995755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e479ef4a36c0fa6deae1a145a6cd0e?s=128&d=identicon&r=PG&f=1", "display_name": "Frederic Loge", "link": "https://stackoverflow.com/users/4995755/frederic-loge"}, "edited": false, "score": 0, "creation_date": 1434029991, "post_id": 30762336, "comment_id": 49614880, "body": "I did indicate that the c program in the target_link_libraries(...) part. I actually did not need to do the compiling myself, CMakeLists knew how to handle the two seperate parts ... For some reason it works know, and the only think I am sure I&#39;ve changed is that the main function (for the C code) is in a .c file and not a .h file. The thing is, I do not call this function in my c++ code (otherwise I&#39;d have two mains) ... So I do not how it can work ... Thanks for your help guys !!"}], "owner": {"reputation": 21, "user_id": 4995755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e479ef4a36c0fa6deae1a145a6cd0e?s=128&d=identicon&r=PG&f=1", "display_name": "Frederic Loge", "link": "https://stackoverflow.com/users/4995755/frederic-loge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1543585788, "creation_date": 1433954290, "question_id": 30762336, "link": "https://stackoverflow.com/questions/30762336/c-and-c-compatibility", "title": "c and c++ compatibility", "body": "<p>I have downloaded code written in C, I've written a CMakeLists.txt to access it through Eclipse and it works fine and compiles.</p>\n\n<p>My personal code is written in C++. I want to call the C code from it, and I've also created the CMakeLists.txt that takes into account where the C code is.</p>\n\n<p>When I build my project there's no problem, as long as I don't do the following instruction :</p>\n\n<hr>\n\n<p>// In one of my project's .cpp :</p>\n\n<pre><code>#ifdef __cplusplus\n   extern \"C\" {\n#endif\n   #include \"C_header_file_I_need.h\"\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>// Core of the .cpp</p>\n\n<hr>\n\n<p>The errors given tell me that the program is attempting to compile the C code with the C++ compiler and therefore :</p>\n\n<ul>\n<li><p>nested functions</p></li>\n<li><p>void*</p></li>\n<li>...</li>\n</ul>\n\n<p>are not accepted by the compiler.</p>\n\n<p>I've considered adapting the C program, but it is a lot of work ...</p>\n\n<p>Since it's one compiler per CMakeLists, I was wondering how I could be able to compile the two parts of my project independently and the link them, by using CMakeLists (because I need it to work on any platform).</p>\n\n<p>Thank you for you help, and do not hesitate to tell me what file/log you would need to look at.</p>\n"}, {"tags": ["c", "if-statement", "output"], "comments": [{"owner": {"reputation": 1700, "user_id": 2125444, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/VqC96.jpg?s=128&g=1", "display_name": "reggaeguitar", "link": "https://stackoverflow.com/users/2125444/reggaeguitar"}, "edited": false, "score": 1, "creation_date": 1433955554, "post_id": 30762284, "comment_id": 49577960, "body": "&#39;A&#39; is a character, not an integer, %d scans for an integer"}], "answers": [{"tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1433954318, "creation_date": 1433954318, "answer_id": 30762346, "question_id": 30762284, "link": "https://stackoverflow.com/questions/30762284/use-scanf-in-if-statement/30762346#30762346", "title": "Use scanf in if statement", "body": "<p>You instructed <code>scanf</code> to read a signed integer. The input didn't even start with a sign or digit, so <code>scanf</code> didn't find a signed integers, so <code>scanf</code> returned <code>0</code> (the number of input items successfully matched and assigned), dropping you into the <code>else</code> clause of the <code>if</code>. Since <code>scanf</code> didn't match anything, it didn't assign anything, meaning <code>a</code> wasn't changed, and <code>a-1</code> is <code>4</code>.</p>\n\n<p>You didn't specify what you were expecting, so I don't know what fix to suggest.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1433955811, "last_edit_date": 1433955811, "creation_date": 1433954736, "answer_id": 30762467, "question_id": 30762284, "link": "https://stackoverflow.com/questions/30762284/use-scanf-in-if-statement/30762467#30762467", "title": "Use scanf in if statement", "body": "<p>When type sepcifier <code>%d</code> is used then the function expects that a valid signed decimal integer number will be entered. It is evident that symbol <code>'A'</code>  is not a number so the input failed.</p>\n\n<p>Now a question arises: what will the function return in this case? </p>\n\n<p>According to the description of function <code>scanf</code>  (the C Standard, 7.21.6.4 The scanf function):</p>\n\n<blockquote>\n  <p>3 The scanf function returns the value of the macro EOF if an input\n  failure occurs before the first conversion (if any) has completed.\n  Otherwise, the scanf function returns the number of input items\n  assigned, which can be fewer than provided for, <strong>or even zero, in the\n  event of an early matching failure</strong>.</p>\n</blockquote>\n\n<p>So the condition in the if statement </p>\n\n<pre><code>if(scanf(\"%d\",&amp;a))  \n</code></pre>\n\n<p>evaluated to 0 (false) and the else statement was executed.</p>\n\n<pre><code>else  \nprintf(\"%d\",a-1);  \n</code></pre>\n\n<p>that outputed 4.</p>\n\n<p>Take into account that in general you may enter symbol <code>'A'</code> for integers. But in this case the corresponding integer variable must be declared as <code>unsigned</code>and format specifier of <code>scanf</code> must to be <code>%x</code></p>\n\n<p>For example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void )\n{\n    unsigned int a = 5;\n\n    if ( scanf( \"%x\", &amp;a ) )\n    {      \n        printf( \"%u\\n\", a + 1 );\n    }\n    else\n    {\n        printf( \"%u\\n\", a - 1 );\n    }\n}\n</code></pre>\n\n<p>In this case the output will be <code>11</code>.:) <code>scanf</code> will consider symbol <code>'A'</code> as a hexadecimal representation of 10.</p>\n"}, {"tags": [], "owner": {"reputation": 457, "user_id": 4894450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6c686c2db1cfc42c18eb5640f7aeb8d?s=128&d=identicon&r=PG&f=1", "display_name": "SHASHI BHUSAN", "link": "https://stackoverflow.com/users/4894450/shashi-bhusan"}, "is_accepted": false, "score": 0, "last_activity_date": 1434013891, "last_edit_date": 1495541158, "creation_date": 1434013891, "answer_id": 30776404, "question_id": 30762284, "link": "https://stackoverflow.com/questions/30762284/use-scanf-in-if-statement/30776404#30776404", "title": "Use scanf in if statement", "body": "<p>In scanf() All the arguments you pass are pointers. There's no default-pro\u00admo\u00adtion among pointers, and it is crucial that you pass the exact format specifier that matches the type of the pointer.</p>\n\n<p>for more clearance:-\nClick <a href=\"https://stackoverflow.com/questions/12830052/wrong-format-specifiers-in-scanf-or-printf\">here</a>! </p>\n"}], "owner": {"reputation": 11, "user_id": 4995855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5f7c67b73c31211932f0aade8674c02?s=128&d=identicon&r=PG&f=1", "display_name": "Emre G&#252;ll&#252;", "link": "https://stackoverflow.com/users/4995855/emre-g%c3%bcll%c3%bc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2479, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1434013891, "creation_date": 1433954116, "last_edit_date": 1433954183, "question_id": 30762284, "link": "https://stackoverflow.com/questions/30762284/use-scanf-in-if-statement", "title": "Use scanf in if statement", "body": "<p>Why the output is '4' ? , while input is 'A'</p>\n\n<pre><code>int main() {  int a = 5;  \nif(scanf(\"%d\",&amp;a))  \nprintf(\"%d\",a+1);  \nelse  \nprintf(\"%d\",a-1);  \n}\n</code></pre>\n"}, {"tags": ["c", "scanf", "undefined-behavior"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1433954157, "post_id": 30762174, "comment_id": 49577099, "body": "Cannot reproduce crash. The program runs fine for me."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1433954422, "post_id": 30762174, "comment_id": 49577272, "body": "The code looks correct for me, and should complete normally when compiled and run. How do you know it &#39;crashes&#39;? What are the crash symptoms?"}, {"owner": {"reputation": 343, "user_id": 2908963, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004026928306/picture?type=large", "display_name": "Alexandre TryHard Leblanc", "link": "https://stackoverflow.com/users/2908963/alexandre-tryhard-leblanc"}, "edited": false, "score": 1, "creation_date": 1433954574, "post_id": 30762174, "comment_id": 49577358, "body": "I&#39;m pretty sure the grammar implied: without failing to compile and <i>without</i> crashing"}], "answers": [{"comments": [{"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 4, "creation_date": 1433955915, "post_id": 30762225, "comment_id": 49578200, "body": "I really doubt it crashes... Why would it? <code>scanf</code> just reads characters from input and compares them to the format string. When comparision fails, <code>scanf</code> returns with some error \u2013 but does not &#39;crash&#39;."}], "tags": [], "owner": {"reputation": 745, "user_id": 2486737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465d8e8e8b274f5e20cf209b28f8b8b6?s=128&d=identicon&r=PG", "display_name": "Aereaux", "link": "https://stackoverflow.com/users/2486737/aereaux"}, "is_accepted": false, "score": -1, "last_activity_date": 1433963901, "last_edit_date": 1433963901, "creation_date": 1433953954, "answer_id": 30762225, "question_id": 30762174, "link": "https://stackoverflow.com/questions/30762174/why-passing-string-to-scanf-compiles-fine-in-c/30762225#30762225", "title": "Why passing string to scanf() compiles fine in C?", "body": "<p><a href=\"http://www.cplusplus.com/reference/cstdio/scanf/\" rel=\"nofollow\"><code>scanf</code> does take a string paramater</a>.  That's why it compiles fine, but it appears that your parameter does not match what it expects, so it crashes (or just exits) at runtime.</p>\n"}, {"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 4, "last_activity_date": 1433953966, "creation_date": 1433953966, "answer_id": 30762230, "question_id": 30762174, "link": "https://stackoverflow.com/questions/30762174/why-passing-string-to-scanf-compiles-fine-in-c/30762230#30762230", "title": "Why passing string to scanf() compiles fine in C?", "body": "<p>The compiler cannot read your mind. </p>\n\n<p>Both <code>printf(\"Hello world\")</code> and <code>scanf(\"Hello world\")</code> are well-formed.</p>\n"}, {"tags": [], "owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "is_accepted": true, "score": 6, "last_activity_date": 1433956861, "last_edit_date": 1433956861, "creation_date": 1433954027, "answer_id": 30762250, "question_id": 30762174, "link": "https://stackoverflow.com/questions/30762174/why-passing-string-to-scanf-compiles-fine-in-c/30762250#30762250", "title": "Why passing string to scanf() compiles fine in C?", "body": "<p>The code is behaving correctly. Indeed, <code>scanf</code> is declared </p>\n\n<pre><code>int scanf(const char *format, ...);\n</code></pre>\n\n<p>Luckily, your <code>format</code> does not contain any <code>%</code> for which there would be no correspondence in <code>...</code>, which would invoke UB.<br>\nFurther, <code>format</code> is a string literal which allows the compiler to go through it ensuring you passed the right type of parameters in regards to the format specifiers, as part of sanity checks enabled with higher warning levels. (-Wformat family)</p>\n"}, {"tags": [], "owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "is_accepted": false, "score": 6, "last_activity_date": 1433954091, "creation_date": 1433954091, "answer_id": 30762274, "question_id": 30762174, "link": "https://stackoverflow.com/questions/30762174/why-passing-string-to-scanf-compiles-fine-in-c/30762274#30762274", "title": "Why passing string to scanf() compiles fine in C?", "body": "<p>Passing a string to <code>scanf</code> compiles fine, because <code>scanf</code> <strong>expects</strong> a string as it first parameter. See the documentation or programming manual for detailed <code>scanf</code> description.</p>\n"}], "owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 1, "accepted_answer_id": 30762250, "answer_count": 4, "score": 5, "last_activity_date": 1433963901, "creation_date": 1433953798, "question_id": 30762174, "link": "https://stackoverflow.com/questions/30762174/why-passing-string-to-scanf-compiles-fine-in-c", "title": "Why passing string to scanf() compiles fine in C?", "body": "<p>I recently wrote a simple program where I by mistake use scanf() instead of printf() for displaying a message on console. I was expecting to get compile time error, but it compiles fine without warnings &amp; crashes at runtime. I know that scanf() is used for taking input from keyboard. Shouldn't I get an error in following program?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    scanf(\"Hello world\");   // oops, It had to be printf()\n    return 0;\n}\n</code></pre>\n\n<p>Is it invokes undefined behavior(UB)? Is there any mention about this in C standard? Why it isn't checked at compile time whether proper &amp; valid arguments are passed to scanf() function or not?</p>\n"}, {"tags": ["c", "gcc", "porting"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1433951542, "post_id": 30761256, "comment_id": 49575365, "body": "I would take the programmer license from the guy produced the first code, if he had one."}, {"owner": {"reputation": 1483, "user_id": 2646022, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/05ffec904ecdbcb7ab453d3b292a3044?s=128&d=identicon&r=PG&f=1", "display_name": "user4757345", "link": "https://stackoverflow.com/users/2646022/user4757345"}, "edited": false, "score": 0, "creation_date": 1433951917, "post_id": 30761256, "comment_id": 49575659, "body": "@ Eugene Sh. , sorry. I update question."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433952675, "post_id": 30761256, "comment_id": 49576169, "body": "Can you show, please, how this function called? I don&#39;t see a reason of the original error in this code."}, {"owner": {"reputation": 1483, "user_id": 2646022, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/05ffec904ecdbcb7ab453d3b292a3044?s=128&d=identicon&r=PG&f=1", "display_name": "user4757345", "link": "https://stackoverflow.com/users/2646022/user4757345"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433953169, "post_id": 30761256, "comment_id": 49576464, "body": "@EugeneSh. <code>struct app_info *dest; func((void **) &amp;dest,sizeof(struct app_info));</code>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1433953326, "post_id": 30761256, "comment_id": 49576573, "body": "I wonder why the error states &quot;<i>decrement</i>&quot;. :-S As only an &quot;<i>increment[ation]</i>&quot; is shown."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1433953669, "post_id": 30761256, "comment_id": 49576803, "body": "I saw such constructs like this back end of the 80s/beginning of the 90s. I think Turbo-C allows this."}], "answers": [{"comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433952279, "post_id": 30761514, "comment_id": 49575902, "body": "I don&#39;t think the error is located where the OP thinks the error is located, maybe?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1433953744, "post_id": 30761514, "comment_id": 49576849, "body": "I do not understand this: &quot;<i><code>s = *ptr;</code></i>&quot;"}], "tags": [], "owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "is_accepted": false, "score": 0, "last_activity_date": 1433952207, "last_edit_date": 1433952207, "creation_date": 1433952015, "answer_id": 30761514, "question_id": 30761256, "link": "https://stackoverflow.com/questions/30761256/converting-old-c-code/30761514#30761514", "title": "Converting old C code", "body": "<pre><code>*(((size_t *)(*p))++) = s;\n\nBreakdown:\n*(\n  (\n    (size_t *) (*p)\n  ) ++\n) = s\n</code></pre>\n\n<p>Means : Take <code>*p</code> as a pointer to <code>size_t</code> (let's call that <code>ptr</code> for after), dereference it (= take the <code>size_t</code> typed value at the address <code>*p</code>), assign that value to s and finally increment <code>ptr</code> (which is to say increment the address in <code>*p</code> by the <code>sizeof(size_t)</code>.</p>\n\n<p>You can translate that to:</p>\n\n<pre><code>size_t *ptr = (size_t*)(*p); //second pair of paren is optionnal\ns = *ptr;\nptr = ptr + 1; //Warning: This will only modify the variable ptr and not\n               //the data at its original place *p, if the remainder of\n               //the program is based on that (which I highly suspect)\n               //you should do instead :\n\n(size_t*)*p = (size_t*)(*p) + 1; //This also ensures \"+1\" is treated as\n                                 //\"add the sizeof(size_t)\" because *p\n                                 //points to a size_t typed variable\n</code></pre>\n\n<p>You could also retype a variable and have it point at the same location as p and be done with the casts:</p>\n\n<pre><code>void func(void **p,size_t s)\n{\n  size_t **ptr = p;\n  *ptr = malloc(s+sizeof(size_t));\n\n  if (*ptr == NULL) etc...\n\n  *((*ptr)++) = s;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 1, "last_activity_date": 1433953011, "last_edit_date": 1433953011, "creation_date": 1433952158, "answer_id": 30761569, "question_id": 30761256, "link": "https://stackoverflow.com/questions/30761256/converting-old-c-code/30761569#30761569", "title": "Converting old C code", "body": "<p>The idea seems to be to allocate a certain amount of memory (<code>s</code>) <strong>and</strong> an additional amount to store this size allocated in the same area as a leading block and then return a pointer to just behind the stored size.</p>\n\n<p>So try this:</p>\n\n<pre><code>void func(void ** p, size_t s)\n{\n  size_t * sp = malloc(s + sizeof s);\n  if (NULL != sp)\n  {\n    *sp = s;\n    ++sp;\n  }\n\n  *p = sp;\n}\n</code></pre>\n\n<p>Btw, freeing the allocated memory, is not straight forward.</p>\n\n<p>A typicall sequence of calls, also freeing what this function returns, would look like this then:</p>\n\n<pre><code>void * pv = NULL;\nfunc(&amp;pv, 42);\nif (NULL != pv)\n{\n  /* Use 42 bytes of memory pointed to by pv here. */\n\n  free(((char *) pv) - sizeof (size_t));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 0, "last_activity_date": 1433954924, "creation_date": 1433954924, "answer_id": 30762531, "question_id": 30761256, "link": "https://stackoverflow.com/questions/30761256/converting-old-c-code/30762531#30762531", "title": "Converting old C code", "body": "<ul>\n<li><code>func2()</code> : Adding a variable can increase readability, IMHO. (and inlining will get rid of it, afterwards)</li>\n<li>The second function <code>func3()</code> demonstrates that using the return value instead of passing a (<em>opaque</em>) pointer by reference can avoid complexity and casts</li>\n</ul>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid func2(void **p,size_t s)\n{\n    size_t **pp;\n    pp = (size_t **) p; // only one cast\n    *pp = malloc(s+sizeof(size_t));\n    if (!*pp) return;\n                          fprintf(stderr,\"[mallocd %p]\", *pp);\n    *pp[0] = s;\n    *pp += 1;\n}\n\nvoid *func3(size_t s)\n{\n    size_t *p;\n    p = malloc(s+sizeof *p);\n    if (!p) return NULL;\n                          fprintf(stderr,\"[mallocd %p]\", p);\n    p[0] = s;\n    return p+1;\n}\n\nint main(void)\n{\nchar *p = NULL , *p2 = NULL;\n\nfunc2( (void**) &amp;p, 666);       // yet another cast\nfprintf(stderr,\"returned p := %p\\n\", p);\n\np2 = func3( 666); // No cast!!!\nfprintf(stderr,\"returned p2 := %p\\n\", p2);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 0, "last_activity_date": 1433957839, "last_edit_date": 1433957839, "creation_date": 1433956438, "answer_id": 30763016, "question_id": 30761256, "link": "https://stackoverflow.com/questions/30761256/converting-old-c-code/30763016#30763016", "title": "Converting old C code", "body": "<p>try</p>\n\n<pre><code>void func(void **p,size_t s)\n{\n    *p = malloc(s+sizeof(size_t));\n    *(*(size_t **)p)++ = s;\n}\n</code></pre>\n\n<p>This is allocating <code>s</code> bytes of memory, plus enough extra to hold <code>s</code>, storing <code>s</code> at the start of that space and modifying <code>*p</code> to point just after that.</p>\n\n<p>More sensible and clearer (and avoiding casts!) would be:</p>\n\n<pre><code>void *func(size_t s)\n{\n    size_t *p = malloc(s + sizeof(size_t));\n    if (p) *p++ = s;\n    return p;\n}\n</code></pre>\n\n<p>but that requires changing the code that calls this function to take the return value and store it wherever desired, rather than passing an extra pointer as an argument:</p>\n\n<pre><code>some_ptr = func(needed_size);\n</code></pre>\n\n<p>rather than</p>\n\n<pre><code>func((void **)&amp;some_ptr, needed_size);\n</code></pre>\n\n<p>also avoiding casts...</p>\n"}], "owner": {"reputation": 1483, "user_id": 2646022, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/05ffec904ecdbcb7ab453d3b292a3044?s=128&d=identicon&r=PG&f=1", "display_name": "user4757345", "link": "https://stackoverflow.com/users/2646022/user4757345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 30761569, "answer_count": 4, "score": 0, "last_activity_date": 1433957839, "creation_date": 1433951341, "last_edit_date": 1433953397, "question_id": 30761256, "link": "https://stackoverflow.com/questions/30761256/converting-old-c-code", "title": "Converting old C code", "body": "<p>I have this code snippet in project source code which I work on    </p>\n\n<pre><code>void func(void **p,size_t s)\n{\n    *p = malloc(s+sizeof(size_t));\n    *(((size_t *)(*p))++) = s;\n}\n</code></pre>\n\n<p>and gcc-4.7 does not compile it. gcc returns </p>\n\n<pre><code>lvalue required as increment operand \n</code></pre>\n\n<p>error message. I changed it into</p>\n\n<pre><code>stp = ((size_t *)(*p));\n*(stp ++) = s;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>stp = ((size_t *)(*p));\n*stp = *stp + 1;\n*stp = s;\n</code></pre>\n\n<p>gcc compiles both of them. But application does not work expected.\nIs conversion true? And is there any tool for conversion? </p>\n"}, {"tags": ["c", "c++builder", "symlink"], "comments": [{"owner": {"reputation": 1059, "user_id": 16772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef0364da2ae923ac1791242cdda19db4?s=128&d=identicon&r=PG", "display_name": "Rodrigo G&#243;mez", "link": "https://stackoverflow.com/users/16772/rodrigo-g%c3%b3mez"}, "edited": false, "score": 1, "creation_date": 1433954617, "post_id": 30761148, "comment_id": 49577388, "body": "Have you tried with CreateSymbolicLink (note the lack of A or W)? The A/W are the ansi/wide versions of the functions in the API, but you usually call the one without anything, so the compiler chooses which one to call depending on the project."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1433955874, "post_id": 30761148, "comment_id": 49578177, "body": "What do you mean by <i>can&#39;t find them</i>? Is it the compiler or the linker? Actually what&#39;s the error message?"}, {"owner": {"reputation": 89, "user_id": 4571819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2db76628833a8d9c56f02e44fdf8e6f?s=128&d=identicon&r=PG&f=1", "display_name": "mvezinet", "link": "https://stackoverflow.com/users/4571819/mvezinet"}, "edited": false, "score": 0, "creation_date": 1434016259, "post_id": 30761148, "comment_id": 49604910, "body": "Thank you for this information. Yes I&#39;ve tried with CreateSymbolicLink, but it&#39;s the same problem, that it&#39;s an &quot;implicit declaration [...]&quot;. I&#39;ve tried to include &quot;windows.h&quot; but it raised an error in this file."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 4571819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2db76628833a8d9c56f02e44fdf8e6f?s=128&d=identicon&r=PG&f=1", "display_name": "mvezinet", "link": "https://stackoverflow.com/users/4571819/mvezinet"}, "edited": false, "score": 0, "creation_date": 1434017221, "post_id": 30768165, "comment_id": 49605543, "body": "Including &lt;windows.h&gt; in my C file is actually raising an error, &quot;unknown &#39;OUT&#39; type name&quot; in rpcdcep.h, I don&#39;t know why. I&#39;m using &lt;windows.h&gt; in the same project though, but in a C++ file."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1433974119, "creation_date": 1433974119, "answer_id": 30768165, "question_id": 30761148, "link": "https://stackoverflow.com/questions/30761148/alternative-to-symlink-in-c-builder/30768165#30768165", "title": "Alternative to symlink in C++ Builder", "body": "<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363866.aspx\" rel=\"nofollow\"><code>CreateSymbolicLink()</code></a> is declared in <code>winbase.h</code>, which is <code>#include</code>'d by <code>windows.h</code>, which is <code>#include</code>'d by <code>vcl.h</code> in all VCL-based projects.  If you are not creating a VCL project, make sure you have an <code>#include &lt;windows.h&gt;</code> statement in your code.  Either way, also make sure that <code>_WIN32_WINNT</code> is defined to be at least <code>0x0600</code> (Vista+).</p>\n\n<p>If the compiler still complains that <code>CreateSymbolicLink()</code> is undefined then you must be using an old version of C++Builder (<code>CreateSymbolicLink()</code> was added to C++Builder's copy of <code>winbase.h</code> in C++Builder 2007), in which case you will have to declare <code>CreateSymbolicLink()</code> manually in your own code, eg:</p>\n\n<pre><code>#define SYMBOLIC_LINK_FLAG_DIRECTORY            (0x1)\n\n#define VALID_SYMBOLIC_LINK_FLAGS  SYMBOLIC_LINK_FLAG_DIRECTORY // &amp; whatever other flags we think of!\n\nWINBASEAPI\nBOOLEAN\nAPIENTRY\nCreateSymbolicLinkA (\n    __in LPCSTR lpSymlinkFileName,\n    __in LPCSTR lpTargetFileName,\n    __in DWORD dwFlags\n    );\nWINBASEAPI\nBOOLEAN\nAPIENTRY\nCreateSymbolicLinkW (\n    __in LPCWSTR lpSymlinkFileName,\n    __in LPCWSTR lpTargetFileName,\n    __in DWORD dwFlags\n    );\n#ifdef UNICODE\n#define CreateSymbolicLink  CreateSymbolicLinkW\n#else\n#define CreateSymbolicLink  CreateSymbolicLinkA\n#endif // !UNICODE\n</code></pre>\n\n<p>But then you have another problem to tackle - that version of C++Builder would also not have the <code>CreateSymbolicLinkA</code> and <code>CreateSymbolicLinkW</code> symbols in its copy of <code>kernel32.lib</code> for linking to the exported functions in <code>kernel32.dll</code>.  So you would have to create a new <code>.lib</code> import library from a modern <code>kernel32.dll</code> that includes those symbols, and then add it to your project.  At which point, it would probably be easier to just dynamically load <code>CreateSymbolicLink()</code> at runtime using <code>GetProcAddress()</code> instead:</p>\n\n<pre><code>typedef BOOLEAN (APIENTRY *LPFN_CSL)(LPCTSTR, LPCTSTR, DWORD);\n\nLPFN_CSL lpCreateSymbolicLink = (LPFN_CSL) GetProcAddress(GetModuleHandle(TEXT(\"kernel32\")),\n    #ifdef UNICODE\n    \"CreateSymbolicLinkW\"\n    #else\n    \"CreateSymbolicLinkA\"\n    #endif\n);\nif (lpCreateSymbolicLink)\n{\n    // use lpCreateSymbolicLink(...) as needed...\n}\n</code></pre>\n\n<p>Which will also allow your code to run on XP and earlier (if needed), since <code>CreateSymbolicLink()</code> was added in Vista.</p>\n"}], "owner": {"reputation": 89, "user_id": 4571819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2db76628833a8d9c56f02e44fdf8e6f?s=128&d=identicon&r=PG&f=1", "display_name": "mvezinet", "link": "https://stackoverflow.com/users/4571819/mvezinet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 30768165, "answer_count": 1, "score": 0, "last_activity_date": 1433974119, "creation_date": 1433951021, "question_id": 30761148, "link": "https://stackoverflow.com/questions/30761148/alternative-to-symlink-in-c-builder", "title": "Alternative to symlink in C++ Builder", "body": "<p>I'm currently trying to integrate a C code written for UNIX in C++ Builder. But a part of the code is using the function symlink : </p>\n\n<pre><code>if(!fname\n|| (use_real_copy ? real_copy(path, fname) : symlink(path, fname))\n</code></pre>\n\n<p>I don't know how to replace it so it works in C++ Builder for Windows 64 bits, I've found the functions CreateSymbolicLinkW and CreateSymbolicLinkA that seem to be the equivalent for Windows but C++ Builder can't find them.</p>\n\n<p>Do you have any idea of how I can get around this problem? </p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "linux", "shared-libraries", "ld", "elf"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1433950018, "post_id": 30760687, "comment_id": 49574322, "body": "Yes, I think you can. Have a look at how <code>nm</code> and <code>objdump</code> programs work and how they use the elf table to see where each symbol is stored."}], "answers": [{"comments": [{"owner": {"reputation": 4312, "user_id": 63378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8999d510cebee2fd094e0748a0f69370?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/63378/dave"}, "edited": false, "score": 0, "creation_date": 1456398119, "post_id": 30760960, "comment_id": 58932482, "body": "Sorry @Eugene I accidentally hit the downvote an didn&#39;t realise until too late and can&#39;t change it now unless you edit your answer. Let me know if you do and I&#39;ll change my vote."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 3, "last_activity_date": 1456409135, "last_edit_date": 1456409135, "creation_date": 1433950545, "answer_id": 30760960, "question_id": 30760687, "link": "https://stackoverflow.com/questions/30760687/detecting-unresolved-symbols-in-an-elf-executable/30760960#30760960", "title": "Detecting unresolved symbols in an ELF executable", "body": "<p>You can use <code>ldd -r exe</code> command to list the shared library dependencies.\nHere is my output for your example without the <code>f</code> function:</p>\n\n<pre><code>$ LD_LIBRARY_PATH=. ldd -r ./exe\n        linux-vdso.so.1 (0x00007ffcfa7c3000)\n        libshared.so =&gt; ./libshared.so (0x00007f303a02e000)\n        libc.so.6 =&gt; /lib64/libc.so.6 (0x0000003e26c00000)\n        /lib64/ld-linux-x86-64.so.2 (0x0000003e26400000)\nundefined symbol: f     (./exe)\n</code></pre>\n\n<p>(Don't mind the <code>LD_LIBRARY_PATH=.</code> part. It is used to tell to look for shared libraries in the current directory)</p>\n"}, {"comments": [{"owner": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "edited": false, "score": 0, "creation_date": 1433953025, "post_id": 30761850, "comment_id": 49576369, "body": "I did not rebuild the executable, only the shared objects"}, {"owner": {"reputation": 31, "user_id": 4775261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d583afa1fa9e47df5b184a37b8472b73?s=128&d=identicon&r=PG&f=1", "display_name": "pavan", "link": "https://stackoverflow.com/users/4775261/pavan"}, "reply_to_user": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "edited": false, "score": 0, "creation_date": 1433954825, "post_id": 30761850, "comment_id": 49577513, "body": "Ah. But why would you not build the executable when an associated library has changed?Anyway, if the binary is not your concern (I mean, if you are only the library provider), then, like Eugene Sh. already mentioned, ldd will do the job."}, {"owner": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "edited": false, "score": 0, "creation_date": 1434276029, "post_id": 30761850, "comment_id": 49701523, "body": "Why should I rebuild the executable if a library changes? I should only rebuild the executable if one of its sources changes (In the case of a library change, this will be a header file common to it and the library)."}], "tags": [], "owner": {"reputation": 31, "user_id": 4775261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d583afa1fa9e47df5b184a37b8472b73?s=128&d=identicon&r=PG&f=1", "display_name": "pavan", "link": "https://stackoverflow.com/users/4775261/pavan"}, "is_accepted": false, "score": 0, "last_activity_date": 1433952903, "creation_date": 1433952903, "answer_id": 30761850, "question_id": 30760687, "link": "https://stackoverflow.com/questions/30760687/detecting-unresolved-symbols-in-an-elf-executable/30761850#30761850", "title": "Detecting unresolved symbols in an ELF executable", "body": "<p>@tohava\nWhen you compile the executable and link it with the shared object, ld (linker) checks if all referenced symbols are available in the list of shared objects your executable is dependent on and will throw an error if any symbol was unresolved.</p>\n\n<p>So, I am not sure how you managed to get a runtime error when you removed f() from the shared library and rebuilt the executable. (I did the exercise myself and got the linker error).</p>\n"}], "owner": {"reputation": 4972, "user_id": 1964342, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ce48e3381ac19802f017e34b80e0536c?s=128&d=identicon&r=PG", "display_name": "tohava", "link": "https://stackoverflow.com/users/1964342/tohava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1210, "favorite_count": 1, "accepted_answer_id": 30760960, "answer_count": 2, "score": 2, "last_activity_date": 1456409135, "creation_date": 1433949831, "question_id": 30760687, "link": "https://stackoverflow.com/questions/30760687/detecting-unresolved-symbols-in-an-elf-executable", "title": "Detecting unresolved symbols in an ELF executable", "body": "<p>Let's say I have two files:</p>\n\n<pre><code>// shared.c (will be compiled to 'shared.so')\n#include &lt;stdio.h&gt;\nint f() { printf(\"hello\\n\"); }\n</code></pre>\n\n<p>and</p>\n\n<pre><code>// exe.c (will be compiled to 'exe')\n#include &lt;stdio.h&gt;\nint f();\nint main() { \n    int i;\n    scanf(\"%d\", &amp;i);\n    if (i == 5) f(); \n}\n</code></pre>\n\n<p>I compile both files as following:</p>\n\n<pre><code>gcc -shared shared.c -o libshared.so\ngcc exe.c -o exe -lshared -L.\n</code></pre>\n\n<p>When I run <code>exe</code> and type 5, it will call f and then exit. However, if I delete <code>f</code> from <code>shared.c</code> and recompile it I will get a runtime symbol lookup error only if I type 5. Is there a way that I can check that <code>exe</code> has all its symbols that will work independent of user input in this case? Preferrably without running it.</p>\n"}, {"tags": ["c", "windows", "memory", "heap", "executable"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1433958269, "post_id": 30760522, "comment_id": 49579643, "body": "The heap <code>Flags</code> value is at offset 0x70 in 64-bit Windows 7 and Windows 10. I don&#39;t know an API to request it, specifically, but can&#39;t you just check after allocating a memory block? Call <code>VirtualQuery</code> to check whether <code>AllocationProtect</code> is <code>PAGE_EXECUTE_READWRITE</code> or just <code>PAGE_READWRITE</code>."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 1, "creation_date": 1433961735, "post_id": 30760522, "comment_id": 49581811, "body": "You should know whether your heap is executable. If you have a heap and you don&#39;t know whether it is executable, assume that it isn&#39;t."}], "owner": {"reputation": 81, "user_id": 2281752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f70fcd8d1ee1050bee56497f91313e57?s=128&d=identicon&r=PG", "display_name": "user2281752", "link": "https://stackoverflow.com/users/2281752/user2281752"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1433949411, "creation_date": 1433949411, "question_id": 30760522, "link": "https://stackoverflow.com/questions/30760522/query-if-a-heap-is-executable", "title": "Query, if a heap is executable", "body": "<p>Let's say i have a heap handle from a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366599%28v=vs.85%29.aspx\" rel=\"nofollow\" title=\"HeapCreate\">HeapCreate</a>, or any other heap-related function.</p>\n\n<p>I would like to find out if a given handle currently has HEAP_CREATE_ENABLE_EXECUTE flag set for it.</p>\n\n<p>Currently i see no API, that could do this, since the only relevant function, <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366703%28v=vs.85%29.aspx\" rel=\"nofollow\" title=\"Heaps\">HeapQueryInformation</a> does something completely different.</p>\n\n<p>Obviously, all this using visual c.</p>\n\n<p>Is such thing possible?</p>\n"}, {"tags": ["c", "windows", "dice"], "comments": [{"owner": {"reputation": 57, "user_id": 2246239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6941427a49899a83fefd3b64419ebccb?s=128&d=identicon&r=PG", "display_name": "DavisR5", "link": "https://stackoverflow.com/users/2246239/davisr5"}, "edited": false, "score": 0, "creation_date": 1433950176, "post_id": 30760282, "comment_id": 49574430, "body": "I still have the key variable and it&#39;s now saying &quot;You were wrong.You were right!&quot;"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1433951195, "post_id": 30760282, "comment_id": 49575137, "body": "Bucky creates horrible tutorials and exercises. Get yourself a book, mate! P.S. <code>rand</code> is a <i>pseudo-random number generator</i>, not a <i>true random number generator</i>."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1434001531, "post_id": 30760282, "comment_id": 49595972, "body": "@undefinedbehaviour , Who is &#39;bucky&#39;?"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1434005131, "post_id": 30760282, "comment_id": 49597630, "body": "@CoolGuy Bucky seems to be the origin of <a href=\"https://www.thenewboston.com/forum/topic.php?id=1217\" rel=\"nofollow noreferrer\">this challenge</a>, betwixt a tonne of <a href=\"https://www.thenewboston.com/forum/topic.php?id=1157\" rel=\"nofollow noreferrer\">poor tutorials and undefined behaviour (e.g. buffer overflows)</a>... Don&#39;t bother trying to point out any issues with him; there&#39;s no way anything he ever creates could have problems ;)"}], "answers": [{"tags": [], "owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "is_accepted": false, "score": 2, "last_activity_date": 1433949753, "last_edit_date": 1433949753, "creation_date": 1433948869, "answer_id": 30760316, "question_id": 30760282, "link": "https://stackoverflow.com/questions/30760282/c-diceroll-game/30760316#30760316", "title": "C diceroll game", "body": "<ul>\n<li><p><strong>Firstly,</strong> You're using wrong format specifier here. <code>%c</code> is used to scan one <code>char</code>. You need to use <code>%s</code> for a <em>string</em>. Using wrong format specifier  invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<p>Then, the <em>format string</em> you supply to <code>scanf()</code> needs to match the input exactly. You don't need a <code>newline</code> there.</p>\n\n<p>Also, <code>randomnumber</code> being an array, adding <code>&amp;</code> while using that as <code>scanf()</code> argument is not required.</p>\n\n<p>Change</p>\n\n<pre><code>scanf(\"%c \\n\", &amp;randomnumber);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>scanf(\"%s\", randomnumber);\n</code></pre></li>\n<li><p><strong>Secondly</strong>, string comaprisons cannot be done using <code>==</code> operator. You need to use <a href=\"http://linux.die.net/man/3/strcmp\" rel=\"nofollow\"><code>strcmp()</code></a> to compare two string contents. </p>\n\n<p>Change</p>\n\n<pre><code>.. randomnumber == \"hi\" ...\n</code></pre>\n\n<p>to</p>\n\n<pre><code>..  !strcmp(randomnumber, \"hi\")   ...\n</code></pre></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 3102, "user_id": 3137699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6d2nI.jpg?s=128&g=1", "display_name": "Natasha Dutta", "link": "https://stackoverflow.com/users/3137699/natasha-dutta"}, "edited": false, "score": 0, "creation_date": 1433949540, "post_id": 30760483, "comment_id": 49573991, "body": "Very right about the second point. I stopped at the first point itself. Good catch, +1."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 57, "user_id": 2246239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6941427a49899a83fefd3b64419ebccb?s=128&d=identicon&r=PG", "display_name": "DavisR5", "link": "https://stackoverflow.com/users/2246239/davisr5"}, "edited": false, "score": 0, "creation_date": 1434002379, "post_id": 30760483, "comment_id": 49596311, "body": "@DavisR5 , Check problem number 3 in the edited answer."}], "tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 2, "last_activity_date": 1434002336, "last_edit_date": 1434002336, "creation_date": 1433949293, "answer_id": 30760483, "question_id": 30760282, "link": "https://stackoverflow.com/questions/30760282/c-diceroll-game/30760483#30760483", "title": "C diceroll game", "body": "<p>Three problems:</p>\n\n<ol>\n<li><p>You are using the wrong format specifier for scanning a string. <code>%c</code> is used for a <code>char</code> while <code>%s</code> is used for strings. So change</p>\n\n<pre><code>scanf(\"%c \\n\", &amp;randomnumber);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>scanf(\"%s\", randomnumber);\n</code></pre>\n\n<p>Other changes I made is removing the <code>\\n</code> and space character as it will not stop scanning until a non-whitespace character, which is probably not what you want. Also, <code>%s</code> expects a <code>char*</code>. <code>&amp;randomnumber</code> is of type <code>char(*)[10]</code> while <code>randomnumber</code> gets converted to <code>&amp;randomnumber[0]</code>, a <code>char*</code>, which is exactly what <code>%s</code> wants to have.</p></li>\n<li><p>In C, when you compare strings using <code>==</code>, you compare pointers and not the actual content. To compare the contents, include <code>string.h</code> and use <code>strcmp</code>. It returns 0 if both the strings are equal. So change the following:</p>\n\n<pre><code>if (randomnumber == \"hi\" &amp;&amp; sum2 &gt; sum) {\nif (randomnumber == \"lo\" &amp;&amp; sum2 &lt; sum) {\nif (randomnumber == \"sa\" &amp;&amp; sum2 == sum) {\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if (strcmp(randomnumber, \"hi\") == 0 &amp;&amp; sum2 &gt; sum) {\nif (strcmp(randomnumber, \"lo\") == 0 &amp;&amp; sum2 &lt; sum) {\nif (strcmp(randomnumber, \"sa\") == 0 &amp;&amp; sum2 == sum) {\n</code></pre></li>\n<li><p>Now, after you've fixed the other problems, you'll notice that some things print twice, which is not probably what you want. The reason is that you have three <code>if</code>s with <code>strcmp</code>s. Only one can be true at most which will print <code>\"You were right !\\n\"</code> and the rest will print <code>\"You were wrong.\"</code>. Fix it by changing </p>\n\n<pre><code>if (strcmp(randomnumber, \"hi\") == 0 &amp;&amp; sum2 &gt; sum) {\n   printf(\"You were right !\\n\\a\");\n\n}else {\n    if (key == 0) {\nprintf(\"You were wrong.\");\nkey = 1;\n}\n}\n\n\nif (strcmp(randomnumber, \"lo\") == 0 &amp;&amp; sum2 &lt; sum) {\n   printf(\"You were right !\\n\\a\");\n\n}else {\n    if (key == 0) {\nprintf(\"You were wrong.\");\nkey = 1;\n}\n}\n\n\nif (strcmp(randomnumber, \"sa\") == 0 &amp;&amp; sum2 == sum) {\n   printf(\"You were right !\\n\\a\");\n\n}else {\n    if (key == 0) {\nprintf(\"You were wrong.\");\nkey = 1;\n}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if (strcmp(randomnumber, \"hi\") == 0 &amp;&amp; sum2 &gt; sum) {\n   printf(\"You were right !\\n\\a\");\n}else if(strcmp(randomnumber, \"lo\") == 0 &amp;&amp; sum2 &lt; sum) {\n   printf(\"You were right !\\n\\a\");\n}else if(strcmp(randomnumber, \"sa\") == 0 &amp;&amp; sum2 == sum) {\n   printf(\"You were right !\\n\\a\");\n}else {\n    if (key == 0) {\n       printf(\"You were wrong.\");\n    key = 1;\n}\n</code></pre></li>\n</ol>\n\n<p>Note that the <code>key</code> variable is superfluous in your program.</p>\n"}], "owner": {"reputation": 57, "user_id": 2246239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6941427a49899a83fefd3b64419ebccb?s=128&d=identicon&r=PG", "display_name": "DavisR5", "link": "https://stackoverflow.com/users/2246239/davisr5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1434002336, "creation_date": 1433948771, "question_id": 30760282, "link": "https://stackoverflow.com/questions/30760282/c-diceroll-game", "title": "C diceroll game", "body": "<p>I wanted to create a dice game but it's always saying my guess is wrong and idk why.\nI finally understand how to make the rand function actually random btw :D\nI think it's because the array isn't storing the strings correctly.</p>\n\n<pre><code>int main()\n{\n\nsrand(time(NULL));\nint dice1 = 1, dice2 = 1, dice3 = 1, sum, key = 0;\nint dice4 = 1, dice5 = 1, dice6 = 1, sum2;\nchar randomnumber[10];\n\nprintf(\"Diceroll-game \\n\\n\");\nprintf(\"The first sum is:\\n\");\n\n\ndice1 = (rand()%6 + 1);\ndice2 = (rand()%6 + 1);\ndice3 = (rand()%6 + 1);\n\nsum = dice1 + dice2 + dice3;\n\nprintf(\"%d\\n\", sum);\n\nprintf(\"Will the next sum of 3 dices be higher(hi), lower (lo) or the same(sa) (hi, lo, sa)?\\n\");\nprintf(\"Type hi, lo or sa\\n\");\n\nscanf(\"%c \\n\", &amp;randomnumber);\n\ndice4 = (rand()%6 + 1);\ndice5 = (rand()%6 + 1);\ndice6 = (rand()%6 + 1);\n\nsum2 = dice4 + dice5 + dice6;\n\nif (randomnumber == \"hi\" &amp;&amp; sum2 &gt; sum) {\n   printf(\"You were right !\\n\\a\");\n\n}else {\n    if (key == 0) {\nprintf(\"You were wrong.\");\nkey = 1;\n}\n}\n\n\nif (randomnumber == \"lo\" &amp;&amp; sum2 &lt; sum) {\n   printf(\"You were right !\\n\\a\");\n\n}else {\n    if (key == 0) {\nprintf(\"You were wrong.\");\nkey = 1;\n}\n}\n\n\nif (randomnumber == \"sa\" &amp;&amp; sum2 == sum) {\n   printf(\"You were right !\\n\\a\");\n\n}else {\n    if (key == 0) {\nprintf(\"You were wrong.\");\nkey = 1;\n}\n}\n\n\n\nprintf(\"\\nIt's %d\", sum2);\n\nreturn 0;\n</code></pre>\n\n<p>Can someone help me please.\nThank you.</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 3897062, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c9fcab53fad88cdd20dce0d69465977?s=128&d=identicon&r=PG&f=1", "display_name": "lbeh", "link": "https://stackoverflow.com/users/3897062/lbeh"}, "is_accepted": false, "score": 0, "last_activity_date": 1433950260, "last_edit_date": 1495542141, "creation_date": 1433950260, "answer_id": 30760845, "question_id": 30760255, "link": "https://stackoverflow.com/questions/30760255/eeprom-data-to-teraterminal/30760845#30760845", "title": "EEPROM data to TeraTerminal", "body": "<p>I figured this out by looking at optmization posts. If the loop variable is not used, the compiler sets the variable to the max value.  I do not completely understand compilers or optimization.  But that being said, if I just pass the uspagesSent variable to TeraTermUART0Transmit and then multiply it by 64 in that function to get the next (page) address, all is well.\nHopefully this is helpful to someone down the line.  Here is link to helpful post:<a href=\"https://stackoverflow.com/questions/30208125/for-loop-being-ignored-optimized-out\">for loop being ignored (optimized?) out</a></p>\n"}], "owner": {"reputation": 53, "user_id": 3897062, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c9fcab53fad88cdd20dce0d69465977?s=128&d=identicon&r=PG&f=1", "display_name": "lbeh", "link": "https://stackoverflow.com/users/3897062/lbeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433950260, "creation_date": 1433948712, "question_id": 30760255, "link": "https://stackoverflow.com/questions/30760255/eeprom-data-to-teraterminal", "title": "EEPROM data to TeraTerminal", "body": "<p>I am attempting to read the data from an external eeprom using atmega324p.  The issue is coming with the for loop.  I cannot get past reading 4 pages (4 x 64B) of EEPROM data.  If I increase the loop counter even from 4 to 5 I get stuck in an infinite loop of UART0 transmits.  Here is the code I have currently:</p>\n\n<pre><code>// create an array to store the logged off eeprom data to and for use \n//in sending bytes to teraterm. Location 0-15 hold first assertLog\nUChar aucTeraTermMsgBuf[EXT_EEPROM_PAGE_LENGTH]; //length is 64B \n\nvoid TeraTermOutputMsg(void)\n{        \n//configure UART0 to what I want for my purposes\nTeraTermConfigUART0();\n\n//define the starting address to read from.  Each time the button pushed \n//we will begin reading from the very beginning of memory array (aka it is a full dump of EEPROM stored data)\nUInt16 eepromReadAddress = 0x0000;\n\n//Loop thru whole EEPROM 1 page of data at a time and send it.  \n//Cant get past 4 pages though.... TODO FIX THIS \nfor(UInt16 uspagesSent = 0; uspagesSent &lt; 4; uspagesSent++)\n {\n    //get one page of the log from the specified address in the eeprom and store it to an \n    //array of type UChar and length of 1 page (64B).\n    TeraTermGetAssertLog(eepromReadAddress);\n\n    //send the 1 page of eeprom data to teraterm\n    TeraTermUART0Transmit();\n\n    //update the next read address to pass the get log function\n    eepromReadAddress += EXT_EEPROM_PAGE_LENGTH; //length is 64Bytes\n\n }\n\n}\n\n//Gets data from the EEPROM and puts it into an array in prep to send out UART0 to PC\nvoid TeraTermGetAssertLog(UInt16 nextReadAddress)\n{\n//initialize the array we are storing the EEPROM data to\nfor(UInt16 i = 0; i &lt; EXT_EEPROM_PAGE_LENGTH; i++)\n    aucTeraTermMsgBuf[i] = 0;\n\n//this will read the bytes from EEPROM and load them into an array\nExtEEPROM_Read(aucTeraTermMsgBuf, nextReadAddress);             \n}\n\n//function that will output string of data out to PC\nvoid TeraTermUART0Transmit(void)\n{\n//array to encode the tera term message to using sprintf.  \n//Takes each hex value (0x_ _ ) and converts it to ASCII code for those numbers/letters\nUChar encodeMsgArray[2];\n//next character to be transmitted\nUChar nextChar;\n\n//counter for bytes sent.  After 16 (1 log) want to send new line break point\nUInt8 byteCount = 0x01;\n\n//loop through the message buffer and send output to teraterm\nfor(UInt16 i = 0; i &lt; EXT_EEPROM_PAGE_LENGTH; i++)\n{\n    //get next char from the TeraTerm output buffer array\n    nextChar = aucTeraTermMsgBuf[i];\n\n    //convert the char hex value into the ascii code for the 2 letters/numbers present in 1 hex value\n    sprintf(encodeMsgArray, \"%2.2x\", nextChar);\n\n    //transmit those two ascii codes on the uart0 to teraterm with a space after\n    UART0_Transmit(encodeMsgArray[0]);\n    UART0_Transmit(encodeMsgArray[1]);\n    UART0_Transmit(\" \");    //send a space so text file parser can distinguish between bytes of data\n\n\n    //if we have sent a whole assert log, print next to new line\n    if(byteCount == 16)\n    {\n        byteCount = 0x00;\n        sprintf(encodeMsgArray, \"\\r\\n\");\n        UART0_Transmit(encodeMsgArray[0]);\n        UART0_Transmit(encodeMsgArray[1]);\n\n    }\n\n    ++byteCount;\n}\n\n}\n</code></pre>\n\n<p>I know it might be kind of a lot to read through, but I am stumped.  When I put my loop counter variable (pagesSent) in the watch window, it gets optmized, when I declare as volatile it still gets optimized, but when the max value is set to 4 the loop exits properly, but if max value is higher than 4 get stuck...\nThanks for the help.</p>\n"}, {"tags": ["c", "ubuntu"], "comments": [{"owner": {"reputation": 478, "user_id": 3861548, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G89Hn.jpg?s=128&g=1", "display_name": "jabujavi", "link": "https://stackoverflow.com/users/3861548/jabujavi"}, "edited": false, "score": 0, "creation_date": 1433947606, "post_id": 30759610, "comment_id": 49572420, "body": "Have you tried something?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1433947720, "post_id": 30759610, "comment_id": 49572518, "body": "No offence, if you try to make your question worthy enough of answering , no need to put <b>BOLD STATEMENT</b> at the end. :-)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1433947751, "post_id": 30759610, "comment_id": 49572553, "body": "FWIW, Please take the <a href=\"http://stackoverflow.com/tour\">tour</a> and read <a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask</a> to learn what we expect from questions here."}, {"owner": {"reputation": 3, "user_id": 4995350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf358ea797665e1d8ccf974cac37f53?s=128&d=identicon&r=PG&f=1", "display_name": "jo\u0161ko jo\u017eek", "link": "https://stackoverflow.com/users/4995350/jo%c5%a1ko-jo%c5%beek"}, "edited": false, "score": 0, "creation_date": 1433947895, "post_id": 30759610, "comment_id": 49572674, "body": "I just wanted to make it more transparent, no need for editing in a second and comenting. If you don&#39;t want to help or you can&#39;t just don&#39;t read it."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1433955253, "post_id": 30759610, "comment_id": 49577760, "body": "What do you consider an &quot;<i>orphan</i>&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 6099, "user_id": 1638010, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/02688b7723adbdc1a47705b2bf6b617c?s=128&d=identicon&r=PG", "display_name": "Craig S. Anderson", "link": "https://stackoverflow.com/users/1638010/craig-s-anderson"}, "edited": false, "score": 0, "creation_date": 1433953250, "post_id": 30759913, "comment_id": 49576528, "body": "Was going to post an answer involving reading /proc/[proc_id]/stat, but questioner  likes this one.  Oh well."}], "tags": [], "owner": {"reputation": 56, "user_id": 519902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc38cf222157b0b97ecbc7e93f60d0e1?s=128&d=identicon&r=PG", "display_name": "jorgehernand", "link": "https://stackoverflow.com/users/519902/jorgehernand"}, "is_accepted": true, "score": 0, "last_activity_date": 1433947928, "creation_date": 1433947928, "answer_id": 30759913, "question_id": 30759610, "link": "https://stackoverflow.com/questions/30759610/walkingdead-program-finding-zombies-and-orphans/30759913#30759913", "title": "WalkingDead Program - Finding zombies and orphans", "body": "<p>just make a loop executing the command you have with</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\nint system(const char *command);\n</code></pre>\n\n<p>That\u00b4s all you need </p>\n"}], "owner": {"reputation": 3, "user_id": 4995350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf358ea797665e1d8ccf974cac37f53?s=128&d=identicon&r=PG&f=1", "display_name": "jo\u0161ko jo\u017eek", "link": "https://stackoverflow.com/users/4995350/jo%c5%a1ko-jo%c5%beek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 30759913, "answer_count": 1, "score": -1, "last_activity_date": 1433952785, "creation_date": 1433947188, "last_edit_date": 1433952785, "question_id": 30759610, "link": "https://stackoverflow.com/questions/30759610/walkingdead-program-finding-zombies-and-orphans", "title": "WalkingDead Program - Finding zombies and orphans", "body": "<p>For my school paper i need to write a program that monitors all the processes in /proc directory and recording notices when processes become zombie or orphan.</p>\n\n<p>I know some commands which i need to use but i don't know how to implement in program. </p>\n\n<p>There is code that finds in terminal either there is a zombie or there is not. </p>\n\n\n\n<pre><code>ps aux | awk '\"[Zz]\" ~ $8 { printf(\"%s, PID = %d\\n\", $8, $2); }'\n</code></pre>\n\n<p>There is a code that creates zombie process:</p>\n\n\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main() {\n    int pid;\n\n    /* let's create a child process */\n    pid = fork();\n    if (!pid) {\n        /* this is a child: dies immediately and becomes zombie */\n        exit(0);\n    }\n\n    /* parent process: just asks for the user input */\n    printf(\"Please, press enter after looking at the zombie process...\");\n    (void)getchar();\n}\n</code></pre>\n\n<p>I have a code that creates orphan too but i won't put it here. </p>\n\n<p>I don't need all the code for program i just need someone that will explain or guide me step by step what i need to do that i will finish my homework with positive result.</p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["c", "macos", "clipboard"], "answers": [{"comments": [{"owner": {"reputation": 343, "user_id": 3827326, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/JRQzR.jpg?s=128&g=1", "display_name": "muad", "link": "https://stackoverflow.com/users/3827326/muad"}, "edited": false, "score": 0, "creation_date": 1557443238, "post_id": 30760551, "comment_id": 98776897, "body": "This does not work. I get hit with the following error: <code>incorrect checksum for freed object - object was probably modified after being freed.</code>"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "reply_to_user": {"reputation": 343, "user_id": 3827326, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/JRQzR.jpg?s=128&g=1", "display_name": "muad", "link": "https://stackoverflow.com/users/3827326/muad"}, "edited": false, "score": 0, "creation_date": 1557445750, "post_id": 30760551, "comment_id": 98777394, "body": "Still works fine for me (Darwin 18.5.0). I can&#39;t see how you could possibly get that error from this code. Are you compiling with a C++ compiler, perhaps?"}], "tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": false, "score": 0, "last_activity_date": 1433949486, "creation_date": 1433949486, "answer_id": 30760551, "question_id": 30759542, "link": "https://stackoverflow.com/questions/30759542/how-do-i-save-data-to-the-clipboard-on-macosx-in-c/30760551#30760551", "title": "How do I save data to the clipboard on MacOSX in C", "body": "<p>As far as I can tell, OS X provides an interface to the clipboard functions in Objective C, but not plain C.</p>\n\n<p>However, you can simply open a pipe to the <code>pbcopy</code> command line utility as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n  FILE *p = popen(\"/usr/bin/pbcopy\",\"w\");\n  fprintf(p,\"Hello world\");  /* &lt;&lt; Copy this to clipboard */\n  pclose(p);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 164, "user_id": 4925412, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-j3ZXDRdoSEQ/AAAAAAAAAAI/AAAAAAAAABs/B3kqsrl-bOg/photo.jpg?sz=128", "display_name": "Mike Armstrong", "link": "https://stackoverflow.com/users/4925412/mike-armstrong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "closed_date": 1434712900, "answer_count": 1, "score": 0, "last_activity_date": 1433949486, "creation_date": 1433947002, "question_id": 30759542, "link": "https://stackoverflow.com/questions/30759542/how-do-i-save-data-to-the-clipboard-on-macosx-in-c", "closed_reason": "Duplicate", "title": "How do I save data to the clipboard on MacOSX in C", "body": "<p>I'm attempting a work around to a very nasty problem that involves being locked down in a CUPS printing service filter. The application is unable to write outside of it's domain as a filter program. \n&amp; thus I wanted to give saving a string to the clipboard a go, to get it out of the program and readable by another. The Exchange will happen so quickly the user won't know it even occurred.</p>\n\n<p>So is a way to write xData to the X clipboard on OSX in C?</p>\n\n<p>Mike</p>\n"}, {"tags": ["php", "c", "php-extension"], "comments": [{"owner": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "edited": false, "score": 1, "creation_date": 1433946464, "post_id": 30759267, "comment_id": 49571452, "body": "The <code>array_init(return_value);</code> is definitely required ;-)"}, {"owner": {"reputation": 5415, "user_id": 1652031, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/F5Mt3.jpg?s=128&g=1", "display_name": "TiMESPLiNTER", "link": "https://stackoverflow.com/users/1652031/timesplinter"}, "reply_to_user": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "edited": false, "score": 0, "creation_date": 1433946636, "post_id": 30759267, "comment_id": 49571571, "body": "@Ja\u0362ck Agree with that but why do I get an empty array as return value? Even if copy the paramter array to <code>return_value</code> does not work... I add a value <code>42</code> to the initalized array but it stays empty..."}, {"owner": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "edited": false, "score": 0, "creation_date": 1433946682, "post_id": 30759267, "comment_id": 49571607, "body": "Have you tried using a regular <code>zval *</code> in your ZPP and then use <code>RETVAL_ZVAL</code>?"}, {"owner": {"reputation": 5415, "user_id": 1652031, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/F5Mt3.jpg?s=128&g=1", "display_name": "TiMESPLiNTER", "link": "https://stackoverflow.com/users/1652031/timesplinter"}, "reply_to_user": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "edited": false, "score": 0, "creation_date": 1433947300, "post_id": 30759267, "comment_id": 49572166, "body": "Okay that works great. Thx once again... the question stays: why can&#39;t I do that directly over the <code>return_value</code> ?"}, {"owner": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "edited": false, "score": 0, "creation_date": 1433947907, "post_id": 30759267, "comment_id": 49572681, "body": "The <code>return_value</code> is somewhat special; for one, it&#39;s already initialised by the time your function body runs. I did a quick scan across the whole project and this is never done :)"}], "answers": [{"comments": [{"owner": {"reputation": 5415, "user_id": 1652031, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/F5Mt3.jpg?s=128&g=1", "display_name": "TiMESPLiNTER", "link": "https://stackoverflow.com/users/1652031/timesplinter"}, "edited": false, "score": 0, "creation_date": 1433947973, "post_id": 30759700, "comment_id": 49572733, "body": "I used <code>RETVAL_ZVAL</code> instead of like you <code>RETURN_ZVAL()</code> and the result is the same. What&#39;s the difference between those 2 macros? I also managed to modify the passed in array and keep this instance by setting the <code>cpy</code> param to <code>0</code> instead to <code>1</code> for the <code>RETURN_ZVAL()</code> macro."}, {"owner": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "reply_to_user": {"reputation": 5415, "user_id": 1652031, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/F5Mt3.jpg?s=128&g=1", "display_name": "TiMESPLiNTER", "link": "https://stackoverflow.com/users/1652031/timesplinter"}, "edited": false, "score": 2, "creation_date": 1433948102, "post_id": 30759700, "comment_id": 49572854, "body": "@TiMESPLiNTER <code>RETVAL_ZVAL</code> just sets the return value, it doesn&#39;t actually return from the function ... they do the same if they&#39;re the last statement of course :)"}, {"owner": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "reply_to_user": {"reputation": 5415, "user_id": 1652031, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/F5Mt3.jpg?s=128&g=1", "display_name": "TiMESPLiNTER", "link": "https://stackoverflow.com/users/1652031/timesplinter"}, "edited": false, "score": 0, "creation_date": 1433948264, "post_id": 30759700, "comment_id": 49572993, "body": "Yeah, the <code>copy</code> parameter was somewhat intentional I guess ... I don&#39;t typically like functions that return a reference to what&#39;s passed in ... and with copy-on-write, there shouldn&#39;t really be that much difference."}], "tags": [], "owner": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "is_accepted": true, "score": 2, "last_activity_date": 1433948076, "last_edit_date": 1433948076, "creation_date": 1433947394, "answer_id": 30759700, "question_id": 30759267, "link": "https://stackoverflow.com/questions/30759267/return-same-array-zval-as-passed-in-to-a-function/30759700#30759700", "title": "Return same array (zval) as passed in to a function", "body": "<p>Using <code>return_value</code> directly as part of a ZPP argument is typically not done (actually, never); it's commonly done by introducing a regular <code>zval *</code> container and then RETURN_ZVAL or RETVAL_ZVAL macro is used:</p>\n\n<pre><code>PHP_FUNCTION(make_array)\n{\n    zval *arr;\n\n    if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, \"a\", &amp;arr) == FAILURE) {\n        return;\n    }\n\n    add_assoc_long(arr, \"answer\", 42);\n    RETURN_ZVAL(arr, 0, 0);\n}\n</code></pre>\n"}], "owner": {"reputation": 5415, "user_id": 1652031, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/F5Mt3.jpg?s=128&g=1", "display_name": "TiMESPLiNTER", "link": "https://stackoverflow.com/users/1652031/timesplinter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 30759700, "answer_count": 1, "score": 2, "last_activity_date": 1433948076, "creation_date": 1433946355, "question_id": 30759267, "link": "https://stackoverflow.com/questions/30759267/return-same-array-zval-as-passed-in-to-a-function", "title": "Return same array (zval) as passed in to a function", "body": "<p>I tried to create a new function in my extension which takes an <code>array</code> as parameter adds an entry to <strong>that</strong> same instance of the array and returns that instance again.</p>\n\n<p>So this is the code so far:</p>\n\n<pre><code>PHP_FUNCTION(make_array)\n{\n        // array_init(return_value); // Also Tried to transform default NULL to array\n\n        if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, \"a\", &amp;return_value) == FAILURE) {\n                RETURN_FALSE;\n        }\n\n        add_assoc_long(return_value, \"answer\", 42);\n\n        return;\n}\n</code></pre>\n\n<p>But I only get <code>NULL</code> as return value or if I uncomment <code>array_init(return_value);</code> the <code>return_value</code> is an empty array.</p>\n\n<p>So why is that behavior? And what did I understand wrong?</p>\n"}, {"tags": ["c", "multithreading", "macos"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433946491, "post_id": 30759208, "comment_id": 49571476, "body": "Have you included <code>sched.h</code> ?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1433947439, "post_id": 30759208, "comment_id": 49572282, "body": "I thought <code>clone</code> was a Linux-specific thing. Are you sure that it even exists on OS X?"}, {"owner": {"reputation": 19, "user_id": 3631068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e176c5fbbd43e51b3d08214f856665c?s=128&d=identicon&r=PG&f=1", "display_name": "user3631068", "link": "https://stackoverflow.com/users/3631068/user3631068"}, "edited": false, "score": 0, "creation_date": 1433947535, "post_id": 30759208, "comment_id": 49572360, "body": "if i change those Macro to number it can run in my mac."}, {"owner": {"reputation": 19, "user_id": 3631068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e176c5fbbd43e51b3d08214f856665c?s=128&d=identicon&r=PG&f=1", "display_name": "user3631068", "link": "https://stackoverflow.com/users/3631068/user3631068"}, "edited": false, "score": 0, "creation_date": 1433947663, "post_id": 30759208, "comment_id": 49572469, "body": "this code is no problem.i think my computer must missing some head file.but i don&#39;t know which i missing."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1433948627, "post_id": 30759208, "comment_id": 49573263, "body": "I just told you which one. On Linux at least it is."}], "owner": {"reputation": 19, "user_id": 3631068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e176c5fbbd43e51b3d08214f856665c?s=128&d=identicon&r=PG&f=1", "display_name": "user3631068", "link": "https://stackoverflow.com/users/3631068/user3631068"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 510, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1433946219, "creation_date": 1433946219, "question_id": 30759208, "link": "https://stackoverflow.com/questions/30759208/undeclared-error-with-thread-in-os-x", "title": "undeclared error with thread in OS X?", "body": "<p>error: use of undeclared identifier 'CLONE_FS'\nerror: use of undeclared identifier 'CLONE_FILES'\nerror: use of undeclared identifier 'CLONE_SIGHAND'\n error: use of undeclared identifier 'CLONE_VM'</p>\n\n<p>i use ubuntu code some about processes and thread can run in ubuntu but in my mac give me this error.how can i fix it?  if i change this Macro to decimal this error disapper too.</p>\n\n<pre><code>main(int argc,char *argv[])\n{\npthread_mutex_init(&amp;mutex,NULL);\nsem_init(&amp;product,0,0);\nsem_init(&amp;warehouse,0,8);\nint clone_flag,arg,retval;\nclone_flag = CLONE_VM|CLONE_SIGHAND|CLONE_FS|CLONE_FILES;\nint i;\nchar *stack;\nfor(i=0;i&lt;2;i++)\n{\n    arg = i;\n    stack = (char *)malloc(4096);\n    retval = clone((void *)producer,&amp;(stack[4095]),clone_flag,(void *)&amp;arg);\n    stack = (char *)malloc(4096);\n    retval = clone((void *)consumer,&amp;(stack[4095]),clone_flag,(void *)&amp;arg);\n}\nexit(1);\n}\n</code></pre>\n"}, {"tags": ["c", "xamarin", "mono"], "answers": [{"comments": [{"owner": {"reputation": 420, "user_id": 1260495, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6f3f99c4cba6d834d51beb531180e3a2?s=128&d=identicon&r=PG", "display_name": "Axel", "link": "https://stackoverflow.com/users/1260495/axel"}, "edited": false, "score": 0, "creation_date": 1434119098, "post_id": 30791761, "comment_id": 49659161, "body": "The mono debug helped, but, can I only link 32-bit libraries? Since I couldnt find a Xamarin-way to create a dylib I used gcc on the .o to do it but I&#39;m getting this error: <code>xxx.dylib: mach-o, but wrong architecture</code>. The <code>lipo -info</code> says that the dylib is 64 bit, just as the OSX I&#39;m using"}, {"owner": {"reputation": 19063, "user_id": 183422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b15cd5ee595ecb74a4acd8b3b4bd369f?s=128&d=identicon&r=PG", "display_name": "Rolf Bjarne Kvinge", "link": "https://stackoverflow.com/users/183422/rolf-bjarne-kvinge"}, "reply_to_user": {"reputation": 420, "user_id": 1260495, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6f3f99c4cba6d834d51beb531180e3a2?s=128&d=identicon&r=PG", "display_name": "Axel", "link": "https://stackoverflow.com/users/1260495/axel"}, "edited": false, "score": 0, "creation_date": 1434150610, "post_id": 30791761, "comment_id": 49674787, "body": "Currently mono is 32-bit only, which means all libraries must also be 32-bit. Work is being done on a 64-bit version of mono, but it&#39;s not complete yet."}], "tags": [], "owner": {"reputation": 19063, "user_id": 183422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b15cd5ee595ecb74a4acd8b3b4bd369f?s=128&d=identicon&r=PG", "display_name": "Rolf Bjarne Kvinge", "link": "https://stackoverflow.com/users/183422/rolf-bjarne-kvinge"}, "is_accepted": false, "score": 0, "last_activity_date": 1434057988, "creation_date": 1434057988, "answer_id": 30791761, "question_id": 30759170, "link": "https://stackoverflow.com/questions/30759170/importing-c-library-into-xamarin-console-project/30791761#30791761", "title": "Importing C library into Xamarin console project", "body": "<p>This is easy, but you're not doing it entirely correct. The problem is that you need a <em>dynamic library</em> (<code>libclibjef.dylib</code>), and use that in your DllImport attribute.</p>\n\n<p>It's unclear whether you're building a dynamic library or a static library (<code>libclibjef.a</code> - notice the extension), but in your DllImport you're referencing a static library.</p>\n\n<p>The correct DllImport attribute looks like this:</p>\n\n<pre><code>[DllImport (\"libclibjef.dylib\")]\n</code></pre>\n\n<p>and then also make sure you have the dynamic library next to the executable.</p>\n\n<p>If you still have problems, you can run your program from a terminal like this:</p>\n\n<pre><code>export MONO_LOG_LEVEL=debug\nexport MONO_LOG_MASK=dll\nmono --debug yourapp.exe\n</code></pre>\n\n<p>and you'll get debug output explaining what's going on.</p>\n"}], "owner": {"reputation": 420, "user_id": 1260495, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6f3f99c4cba6d834d51beb531180e3a2?s=128&d=identicon&r=PG", "display_name": "Axel", "link": "https://stackoverflow.com/users/1260495/axel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434057988, "creation_date": 1433946158, "last_edit_date": 1592644375, "question_id": 30759170, "link": "https://stackoverflow.com/questions/30759170/importing-c-library-into-xamarin-console-project", "title": "Importing C library into Xamarin console project", "body": "<p>So I have the most simple project possible. The entire thing looks like:</p>\n<p><img src=\"https://i.stack.imgur.com/LVRzb.png\" alt=\"enter image description here\" /></p>\n<p>main.c</p>\n<pre><code>#include &quot;main.h&quot;\nint testdejef(int i)\n{\n    return i+1;\n}\n</code></pre>\n<p>main.h</p>\n<pre><code>#ifndef __MAIN_H__\n#define __MAIN_H__\n\nint testdejef(int i);\n#endif\n</code></pre>\n<p>Program.cs</p>\n<pre><code>using System;\nusing System.Runtime.InteropServices;\n\n\nnamespace TestCLib\n{\n    class MainClass\n    {\n        [DllImport(&quot;libclibjef.a&quot;,EntryPoint=&quot;testdejef&quot;)]\n        private static extern int testdejef(int i);\n\n        public static void Main (string[] args)\n        {\n\n            Console.WriteLine (testdejef (1).ToString ());\n        }\n    }\n}\n</code></pre>\n<p>Based on the various Xamarin examples on the web, that seems to be mostly right. But it isn't, right now the compilation causes a &quot;System.DllNotFoundException&quot;. Note that compiling causes no issues, the debugger does.</p>\n<p>I've read trough pages like these: <a href=\"http://developer.xamarin.com/guides/ios/advanced_topics/native_interop/\" rel=\"nofollow noreferrer\">http://developer.xamarin.com/guides/ios/advanced_topics/native_interop/</a></p>\n<p>But documentation seems to be related to Android or iOS code and this issue seems to be Console-application related. Anyone knows the proper way to link a C-Library to the project?</p>\n<p><strong>UPDATE</strong>: This might be harder than expected. Based on <a href=\"http://www.mono-project.com/docs/advanced/pinvoke/\" rel=\"nofollow noreferrer\">Mono documentation</a>:</p>\n<blockquote>\n<p>Note: Mono uses GLib to load libraries, and GLib has a bug on Mac OS X\nwhere it doesn\u2019t use a .dylib extension, but instead uses the Unix .so\nextension. While this should eventually be fixed, the current\nworkaround is to write a .config file which maps to the .dylib file</p>\n</blockquote>\n<p>As far as I know, console applications dont have an app.config file so instead I compiled the .so into a .dylib but at the moment I'm stuck at that point. The mono page says that the files should be linked in the library lookup folders. I did add the folder to all of the suggested environment variables but that did nothign for me</p>\n"}, {"tags": ["c", "lua"], "comments": [{"owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "edited": false, "score": 0, "creation_date": 1433955140, "post_id": 30759159, "comment_id": 49577709, "body": "Better suited to the Lua mailing list."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4995317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b79678ee2a8e09703b3b2ed1c9915a91?s=128&d=identicon&r=PG&f=1", "display_name": "Pengfei Li", "link": "https://stackoverflow.com/users/4995317/pengfei-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1433946968, "creation_date": 1433946968, "answer_id": 30759524, "question_id": 30759159, "link": "https://stackoverflow.com/questions/30759159/lua-5-2-3-source-lstring-c-function-luas-resize/30759524#30759524", "title": "lua 5.2.3 source lstring.c function luaS_resize", "body": "<p>Well. I answer this question myself. This code works well because the rehash operation is not in the first if(newsize > tb->size). It works for both (newsize > tb->size) and (newsize &lt; tb->size). Next time, I will read code more carefully.</p>\n"}], "owner": {"reputation": 1, "user_id": 4995317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b79678ee2a8e09703b3b2ed1c9915a91?s=128&d=identicon&r=PG&f=1", "display_name": "Pengfei Li", "link": "https://stackoverflow.com/users/4995317/pengfei-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1433946968, "creation_date": 1433946130, "question_id": 30759159, "link": "https://stackoverflow.com/questions/30759159/lua-5-2-3-source-lstring-c-function-luas-resize", "title": "lua 5.2.3 source lstring.c function luaS_resize", "body": "<pre><code>void luaS_resize (lua_State *L, int newsize) {\n  int i;\n  stringtable *tb = &amp;G(L)-&gt;strt;\n  /* cannot resize while GC is traversing strings */\n  luaC_runtilstate(L, ~bitmask(GCSsweepstring));\n  if (newsize &gt; tb-&gt;size) {\n    luaM_reallocvector(L, tb-&gt;hash, tb-&gt;size, newsize, GCObject *);\n    for (i = tb-&gt;size; i &lt; newsize; i++) tb-&gt;hash[i] = NULL;\n  }\n  /* rehash */\n  for (i=0; i&lt;tb-&gt;size; i++) {\n    GCObject *p = tb-&gt;hash[i];\n    tb-&gt;hash[i] = NULL;\n    while (p) {  /* for each node in the list */\n      GCObject *next = gch(p)-&gt;next;  /* save next */\n      unsigned int h = lmod(gco2ts(p)-&gt;hash, newsize);  /* new position */\n      gch(p)-&gt;next = tb-&gt;hash[h];  /* chain it */\n      tb-&gt;hash[h] = p;\n      resetoldbit(p);  /* see MOVE OLD rule */\n      p = next;\n    }\n  }\n  if (newsize &lt; tb-&gt;size) {\n    /* shrinking slice must be empty */\n    lua_assert(tb-&gt;hash[newsize] == NULL &amp;&amp; tb-&gt;hash[tb-&gt;size - 1] == NULL);\n    luaM_reallocvector(L, tb-&gt;hash, tb-&gt;size, newsize, GCObject *);\n  }\n  tb-&gt;size = newsize;\n}\n</code></pre>\n\n<p>When the table grows, it rehashes. But when the table shrinks, it just realloc with a half size without rehash. I can't understand it. How can it work ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 3, "creation_date": 1433945725, "post_id": 30758936, "comment_id": 49570900, "body": "What is <code>list_struct</code>? What&#39;s the type of <code>l-&gt;head</code>?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 4, "creation_date": 1433945729, "post_id": 30758936, "comment_id": 49570901, "body": "Check if <code>l</code> and <code>l-&gt;head-&gt;next</code> are of the same type. Your problem is that <code>l</code> is a <code>list_struct*</code> while <code>l-&gt;head-&gt;next</code> is of type <code>node_struct*</code>."}, {"owner": {"reputation": 37, "user_id": 4952511, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10203324691793040/picture?type=large", "display_name": "Daniela Favia", "link": "https://stackoverflow.com/users/4952511/daniela-favia"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433945899, "post_id": 30758936, "comment_id": 49571017, "body": "@CoolGuy are l and l-&gt;head are of list_struct type and next is a field of node_struct type"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433945955, "post_id": 30758936, "comment_id": 49571062, "body": "... which is why the compiler is emitting a warning, What do you intend to do with it?"}, {"owner": {"reputation": 37, "user_id": 4952511, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10203324691793040/picture?type=large", "display_name": "Daniela Favia", "link": "https://stackoverflow.com/users/4952511/daniela-favia"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433945990, "post_id": 30758936, "comment_id": 49571081, "body": "@CoolGuy I know it, but how can I extract the next node after the first node, which is the head of the list?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1433945992, "post_id": 30758936, "comment_id": 49571085, "body": "The problem is what the error message says it is. You are assigning a value of type <code>node_struct *</code> (from <code>l-&gt;head-&gt;next</code>) to a variable of type <code>list_struct *</code>."}, {"owner": {"reputation": 2927, "user_id": 3863903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f5bdf8cace56e1ded5d3a56730b8871?s=128&d=identicon&r=PG&f=1", "display_name": "Rakholiya Jenish", "link": "https://stackoverflow.com/users/3863903/rakholiya-jenish"}, "edited": false, "score": 0, "creation_date": 1433946000, "post_id": 30758936, "comment_id": 49571091, "body": "l-&gt;head is actually a node_struct type and also l-&gt;head-&gt;next is a node_struct type. whereas l is list_struct type"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433946056, "post_id": 30758936, "comment_id": 49571124, "body": "Maybe you want <code>l-&gt;head=l-&gt;head-&gt;next;</code>?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433946121, "post_id": 30758936, "comment_id": 49571171, "body": "@CoolGuy that would also clear the list, probably not the desired functionality from a function called &quot;print_list&quot;."}, {"owner": {"reputation": 2927, "user_id": 3863903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f5bdf8cace56e1ded5d3a56730b8871?s=128&d=identicon&r=PG&f=1", "display_name": "Rakholiya Jenish", "link": "https://stackoverflow.com/users/3863903/rakholiya-jenish"}, "edited": false, "score": 0, "creation_date": 1433946142, "post_id": 30758936, "comment_id": 49571180, "body": "that would change the <code>l-&gt;head</code> instead try doing <code>list_struct* temp; temp = l</code> then do everything with <code>temp</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1433946312, "post_id": 30758936, "comment_id": 49571325, "body": "You have checked that <code>l != NULL</code> but forgotten to check <code>l-&gt;head != NULL</code>."}, {"owner": {"reputation": 37, "user_id": 4952511, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10203324691793040/picture?type=large", "display_name": "Daniela Favia", "link": "https://stackoverflow.com/users/4952511/daniela-favia"}, "edited": false, "score": 0, "creation_date": 1433946428, "post_id": 30758936, "comment_id": 49571421, "body": "l-&gt;head = l-&gt;head-&gt;next doesn&#39;t work"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4952511, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10203324691793040/picture?type=large", "display_name": "Daniela Favia", "link": "https://stackoverflow.com/users/4952511/daniela-favia"}, "edited": false, "score": 0, "creation_date": 1433947709, "post_id": 30759261, "comment_id": 49572510, "body": "With this change, if I input 3 contacts the procedure prints just one item, i.e. the head"}, {"owner": {"reputation": 2927, "user_id": 3863903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f5bdf8cace56e1ded5d3a56730b8871?s=128&d=identicon&r=PG&f=1", "display_name": "Rakholiya Jenish", "link": "https://stackoverflow.com/users/3863903/rakholiya-jenish"}, "reply_to_user": {"reputation": 37, "user_id": 4952511, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10203324691793040/picture?type=large", "display_name": "Daniela Favia", "link": "https://stackoverflow.com/users/4952511/daniela-favia"}, "edited": false, "score": 0, "creation_date": 1433950388, "post_id": 30759261, "comment_id": 49574583, "body": "@DanielaFavia are you sure that your <code>head-&gt;next != NULL</code>?"}, {"owner": {"reputation": 37, "user_id": 4952511, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10203324691793040/picture?type=large", "display_name": "Daniela Favia", "link": "https://stackoverflow.com/users/4952511/daniela-favia"}, "edited": false, "score": 0, "creation_date": 1434008203, "post_id": 30759261, "comment_id": 49599510, "body": "<code>void add_node(list_struct *l, node_struct* node_to_add{            node_struct* nodo_before = node_to_add;      \t   if(l-&gt;count==0){ \t    \tl-&gt;count++; \t\tl-&gt;head=node_to_add;     \t\tl-&gt;tail=node_to_add; \t    \tnode_to_add-&gt;next = NULL; \t\tnode_to_add-&gt;prev = NULL;     \t\tnode_before=node_to_add; \t    }else{  \t\tl-&gt;count++;     \t\tl-&gt;tail=node_before; \t    \tnode_before-&gt;next = node_to_add; \t\tnode_to_add-&gt;next = NULL;     \t\tnode_to_add-&gt;prev = nodo_before; \t    \tnode_before = node_to_add; \t    }     }</code>"}, {"owner": {"reputation": 37, "user_id": 4952511, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10203324691793040/picture?type=large", "display_name": "Daniela Favia", "link": "https://stackoverflow.com/users/4952511/daniela-favia"}, "edited": false, "score": 0, "creation_date": 1434008275, "post_id": 30759261, "comment_id": 49599561, "body": "The procedure above is the procedure that adds a node to the list, i.e. links all the nodes...Maybe the problem is in here?"}, {"owner": {"reputation": 2927, "user_id": 3863903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f5bdf8cace56e1ded5d3a56730b8871?s=128&d=identicon&r=PG&f=1", "display_name": "Rakholiya Jenish", "link": "https://stackoverflow.com/users/3863903/rakholiya-jenish"}, "reply_to_user": {"reputation": 37, "user_id": 4952511, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10203324691793040/picture?type=large", "display_name": "Daniela Favia", "link": "https://stackoverflow.com/users/4952511/daniela-favia"}, "edited": false, "score": 0, "creation_date": 1434009710, "post_id": 30759261, "comment_id": 49600496, "body": "@DanielaFavia the way you were adding a node to your list was wrong. Have a look at <a href=\"http://ideone.com/e69g59\" rel=\"nofollow noreferrer\">ideone.com/e69g59</a>"}, {"owner": {"reputation": 37, "user_id": 4952511, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10203324691793040/picture?type=large", "display_name": "Daniela Favia", "link": "https://stackoverflow.com/users/4952511/daniela-favia"}, "edited": false, "score": 0, "creation_date": 1434010004, "post_id": 30759261, "comment_id": 49600673, "body": "Thank you so much, now I realized my mistake!"}], "tags": [], "owner": {"reputation": 2927, "user_id": 3863903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f5bdf8cace56e1ded5d3a56730b8871?s=128&d=identicon&r=PG&f=1", "display_name": "Rakholiya Jenish", "link": "https://stackoverflow.com/users/3863903/rakholiya-jenish"}, "is_accepted": false, "score": 1, "last_activity_date": 1433946341, "creation_date": 1433946341, "answer_id": 30759261, "question_id": 30758936, "link": "https://stackoverflow.com/questions/30758936/c-assignment-from-incompatible-pointer-type-enabled-by-default/30759261#30759261", "title": "C: assignment from incompatible pointer type [enabled by default]", "body": "<p>Change your print function to:</p>\n\n<pre><code>void print_list(list_struct* l){\n    node_struct* tempnode;\n    tempnode = l-&gt;head;\n    while(tempnode){\n        printf(\"%s %s\\n\", tempnode-&gt;content.name, tempnode-&gt;content.surname);\n        tempnode=tempnode-&gt;next;\n    }\n}\n</code></pre>\n\n<p>This will print your list and also not affect the head pointer of list, which you will accidentally change while trying to do <code>l = l-&gt;head-&gt;next</code>, which is also syntactically wrong, or while trying to do <code>l-&gt;head = l-&gt;head-&gt;next</code>.</p>\n"}], "owner": {"reputation": 37, "user_id": 4952511, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10203324691793040/picture?type=large", "display_name": "Daniela Favia", "link": "https://stackoverflow.com/users/4952511/daniela-favia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1433946341, "creation_date": 1433945645, "last_edit_date": 1433945800, "question_id": 30758936, "link": "https://stackoverflow.com/questions/30758936/c-assignment-from-incompatible-pointer-type-enabled-by-default", "title": "C: assignment from incompatible pointer type [enabled by default]", "body": "<p>I'm typing a code with lists but I have a warning in the function <strong>print_list</strong>.\nThe compiler highlights the line 3 of print_array, i.e. <strong>l=l->head->next</strong>.\nSomeone can help me? </p>\n\n<pre><code>void print_list(list_struct* l){\n\n    while(l!=NULL){\n        printf(\"%s %s\\n\", l-&gt;head-&gt;content.name, l-&gt;head-&gt;content.surname);\n        l=l-&gt;head-&gt;next;\n    }\n}\n</code></pre>\n\n<p>Following the definition of the structs:</p>\n\n<pre><code>typedef struct {\n    char name[50];\n    char surname[50];\n}t_contact;\n\ntypedef struct node_struct node_struct;\nstruct node_struct{\n    t_contact content;\n    node_struct* next;\n    node_struct* prev;\n};\ntypedef struct list_struct list_struct;\nstruct list_struct{\n    node_struct* head;\n    node_struct* tail;\n    int count;\n};\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1433945345, "post_id": 30758786, "comment_id": 49570618, "body": "What is the type of <code>c_max</code>? Try changing <code>correntista *max_prelievo(FILE *fcorrentisti, FILE *fprelievi){</code> to <code>correntista **max_prelievo(FILE *fcorrentisti, FILE *fprelievi){</code> and <code>return *corr_max;</code> to <code>return corr_max;</code>. and from the calling function, <code>correntista **c_max = max_prelievo(fc, fp);</code>"}, {"owner": {"reputation": 711, "user_id": 809102, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/062b1d54e88e8b951cc73e47eb12c601?s=128&d=identicon&r=PG", "display_name": "Treesrule14", "link": "https://stackoverflow.com/users/809102/treesrule14"}, "edited": false, "score": 3, "creation_date": 1433945475, "post_id": 30758786, "comment_id": 49570713, "body": "You don&#39;t need to cast the result of malloc - <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\" title=\"do i cast the result of malloc\">stackoverflow.com/questions/605845/&hellip;</a>"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1433945686, "post_id": 30758786, "comment_id": 49570871, "body": "@CoolGuy That would invoke undefined behaviour."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1433945802, "post_id": 30758786, "comment_id": 49570956, "body": "@undefinedbehaviour , What change will cause UB?"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433946118, "post_id": 30758786, "comment_id": 49571169, "body": "@CoolGuy returning a pointer into an array that isn&#39;t guaranteed to exist once the function returns is obviously UB."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1433946234, "post_id": 30758786, "comment_id": 49571252, "body": "@undefinedbehaviour , The array is gone, but since it was allocated with <code>malloc</code> and had not been freed, accessing it isn&#39;t UB, right?"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433946295, "post_id": 30758786, "comment_id": 49571311, "body": "@CoolGuy Having a pointer to pointer and returning it doesn&#39;t lead to UB.."}, {"owner": {"reputation": 67, "user_id": 3700643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e8ffc6fa7b558b528726c8e66fc2be9?s=128&d=identicon&r=PG&f=1", "display_name": "user3700643", "link": "https://stackoverflow.com/users/3700643/user3700643"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433946346, "post_id": 30758786, "comment_id": 49571352, "body": "@CoolGuy I am obliged to define the function as correntista *max_prelievo(FILE *fcorrentisti, FILE *fprelievi). c_max type is &quot;correntista&quot; as the struct"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433946569, "post_id": 30758786, "comment_id": 49571533, "body": "@CoolGuy The array is blown. The array items were allocated by <code>malloc</code>, but that&#39;s irrelevant because it&#39;s a pointer to the first element of the array that was returned and the array is blown."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1433946726, "post_id": 30758786, "comment_id": 49571639, "body": "@undefinedbehaviour , I see. So will the allocated memory be freed once the array is lost or is it memory leak?"}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433946957, "post_id": 30758786, "comment_id": 49571878, "body": "@CoolGuy The biggest concern is that the behaviour is undefined, and the nature of undefined behaviour is such that its consequences can&#39;t be defined. Typically, yes, the second object will leak because it&#39;s no longer accessible."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1433947035, "post_id": 30758786, "comment_id": 49571944, "body": "@undefinedbehaviour , Oh ok. Thanks for the information! :-)"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433947381, "post_id": 30759144, "comment_id": 49572229, "body": "This isn&#39;t correct though. A pointer to pointer is not a pointer to an array and you aren&#39;t allocating an array, you are allocating a <a href=\"http://stackoverflow.com/a/30117625/584518\">segmented heap fiasco</a>, which is something you should never do. Instead, allocate an array. <code>correntista* corr_max = malloc(2 * sizeof(*corr_max));</code> or alternatively use an array pointer (although the syntax for returning array pointers from functions is very ugly)."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 67, "user_id": 3700643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e8ffc6fa7b558b528726c8e66fc2be9?s=128&d=identicon&r=PG&f=1", "display_name": "user3700643", "link": "https://stackoverflow.com/users/3700643/user3700643"}, "edited": false, "score": 0, "creation_date": 1433947627, "post_id": 30759144, "comment_id": 49572444, "body": "@user3700643 Indeed. Technically speaking, this doesn&#39;t meet your requirements as specified in your comment to Cool Guy: &quot;I am obliged to define the function as correntista *max_prelievo(FILE *fcorrentisti, FILE *fprelievi). c_max type is &quot;correntista&quot; as the struct&quot;"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433950638, "post_id": 30759144, "comment_id": 49574745, "body": "@Lundin I agree!! I don&#39;t know where I was when I wrote this code.. Just going through it again I feel pointer to pointer is unnecessary here.. Anyways even though this approach is ugly it is not wrong so I keep this answer :)"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 1, "last_activity_date": 1433946090, "creation_date": 1433946090, "answer_id": 30759144, "question_id": 30758786, "link": "https://stackoverflow.com/questions/30758786/how-to-make-a-function-return-a-pointer-to-array-struct/30759144#30759144", "title": "How to make a function return a pointer to array struct", "body": "<p>Remember what you have is array of pointers so when you exit the function the array is out of scope. Have a pointer to pointer for this purpose as shown below.</p>\n\n<pre><code>correntista **max_prelievo(FILE *fcorrentisti, FILE *fprelievi){\n    correntista **corr_max = malloc(sizeof(correntista *) * 2);\n    corr_max[0] = malloc(sizeof(correntista));\n    corr_max[1] = malloc(sizeof(correntista));\n    /*.........*/\n    return corr_max;\n}\n</code></pre>\n\n<p>The call should be</p>\n\n<pre><code>correntista **c_max = max_prelievo(fc, fp);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433947101, "post_id": 30759178, "comment_id": 49572001, "body": "@CoolGuy Thanks for the edits :) my astigmatism is too horrific to notice that I accidentally typed <code>,</code> instead of <code>.</code>..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1433947181, "post_id": 30759178, "comment_id": 49572076, "body": "I would also say that this is the preferred solution, as how and where the memory is allocated has nothing to do with the actual algorithm of that function."}], "tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": false, "score": 2, "last_activity_date": 1433947497, "last_edit_date": 1433947497, "creation_date": 1433946174, "answer_id": 30759178, "question_id": 30758786, "link": "https://stackoverflow.com/questions/30758786/how-to-make-a-function-return-a-pointer-to-array-struct/30759178#30759178", "title": "How to make a function return a pointer to array struct", "body": "<p>There are several solutions, but they all require an overhaul of how your function is to operate. Perhaps the best solution is to consider how <code>scanf</code> works; It returns no objects, instead it operates solely on objects that are pointed to by parameters passed to it. Hence:</p>\n\n<pre><code>void max_prelievo(correntista *corr_max, FILE *fcorrentisti, FILE *fprelievi){\n    /* NOTE: You should make a habit of separating your allocation from this logic;\n     *       it makes debugging and testing so much easier... */\n\n    corr_max[0] = (correntista) { .nome = \"Michael\",\n                                  .cognome = \"Anderson\",\n                                  .importo = 42.0 };\n\n    corr_max[1] = (correntista) { .nome = \"Undefined\",\n                                  .cognome = \"Behaviour\",\n                                  .importo = -1.0 };\n\n\n    /*.........*/\n}\n\nint main(void) {\n    correntistia c_max[2] = { 0 };\n    FILE *f1 = fopen(...), *f2 = fopen(...);\n\n    max_prelievo(c_max, f1, f2);\n\n    printf(\"Correntista con max prelievi:\\n\");\n    printf(\"Nome: %s\\n\", c_max[0].nome);\n    printf(\"Cognome: %s\\n\", c_max[0].cognome);\n    printf(\"Max prelievo: %f\\n\\n\", c_max[0].importo);\n\n    printf(\"Correntista con max versamenti:\\n\");\n    printf(\"Nome: %s\\n\", c_max[1].nome);\n    printf(\"Cognome: %s\\n\", c_max[1].cognome);\n    printf(\"Max versamento: %f\\n\", c_max[1].importo);\n}\n</code></pre>\n\n<p>What <code>scanf</code> <em>does</em> return is a single integer, indicating success. Perhaps, if you are to use return values in the future, you could resort to using a similar pattern? Look at the bright side: There's no <code>malloc</code> or <code>free</code> here and no chance you could leak any memory; the code is as simple as it could possibly get.</p>\n\n<hr>\n\n<p>Alternatively, as horrific as it seems, if you must resort to using such a pattern then less calls to <code>malloc</code> will serve you well. Consider something like this:</p>\n\n<pre><code>correntista *max_prelievo(FILE *fcorrentisti, FILE *fprelievi) {\n    correntista *corr_max = malloc(2 * sizeof *corr_max);\n\n    corr_max[0] = (correntista) { .nome = \"Michael\",\n                                  .cognome = \"Anderson\",\n                                  .importo = 42.0 };\n\n    corr_max[1] = (correntista) { .nome = \"Undefined\",\n                                  .cognome = \"Behaviour\",\n                                  .importo = -1.0 };\n\n    /*.........*/\n\n    return corr_max;\n}\n</code></pre>\n\n<p>The <code>main</code> entry point will be <em>almost</em> identical to the example I gave earlier... except for one thing: <strong>Don't forget to <code>free</code> that memory!</strong> :(</p>\n"}], "owner": {"reputation": 67, "user_id": 3700643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e8ffc6fa7b558b528726c8e66fc2be9?s=128&d=identicon&r=PG&f=1", "display_name": "user3700643", "link": "https://stackoverflow.com/users/3700643/user3700643"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 30759144, "answer_count": 2, "score": 1, "last_activity_date": 1433947497, "creation_date": 1433945273, "last_edit_date": 1433945655, "question_id": 30758786, "link": "https://stackoverflow.com/questions/30758786/how-to-make-a-function-return-a-pointer-to-array-struct", "title": "How to make a function return a pointer to array struct", "body": "<p>I'm working on a function in C that should return a pointer to an array struct.\nThe struct is</p>\n\n<pre><code>struct corr{\n  char nome[128];\n  char cognome[128];\n  char password[10];\n  float importo;\n};\ntypedef struct corr correntista;\n</code></pre>\n\n<p>The function that return a pointer to this struct is</p>\n\n<pre><code>correntista *max_prelievo(FILE *fcorrentisti, FILE *fprelievi){\n    correntista *corr_max[2];\n    corr_max[0] = (correntista *)malloc(sizeof(correntista));\n    corr_max[1] = (correntista *)malloc(sizeof(correntista));\n    /*.........*/\n    return *corr_max;\n}\n</code></pre>\n\n<p>In the main program I want to print the returned value in the following way:</p>\n\n<pre><code>*c_max = max_prelievo(fc, fp);\nprintf(\"Correntista con max prelievi:\\n\");\nprintf(\"Nome: %s\\n\", c_max[0]-&gt;nome);\nprintf(\"Cognome: %s\\n\", c_max[0]-&gt;cognome);\nprintf(\"Max prelievo: %f\\n\\n\", c_max[0]-&gt;importo);\n\nprintf(\"Correntista con max versamenti:\\n\");\nprintf(\"Nome: %s\\n\", c_max[1]-&gt;nome);\nprintf(\"Cognome: %s\\n\", c_max[1]-&gt;cognome);\nprintf(\"Max versamento: %f\\n\", c_max[1]-&gt;importo);\n</code></pre>\n\n<p>but only the first struct <code>c_max[0]</code> has the expected value. <code>c_max[1]</code> has garbage values. What should I change in my program?</p>\n"}, {"tags": ["c++", "c", "arrays", "multithreading", "mutex"], "comments": [{"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 1, "creation_date": 1433945544, "post_id": 30758663, "comment_id": 49570773, "body": "The purpose of locks is to prevent one concurrent task from modifying data while another task is using it. For the input array, the data is immutable (no threads modify it), so you don&#39;t need to lock that."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1433946108, "post_id": 30758663, "comment_id": 49571162, "body": "If you indeed hold those predicates in your description, I see no need for locks nor atomics whatsoever."}, {"owner": {"reputation": 10342, "user_id": 657930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rVp41.jpg?s=128&g=1", "display_name": "Arvid", "link": "https://stackoverflow.com/users/657930/arvid"}, "edited": false, "score": 0, "creation_date": 1434029664, "post_id": 30758663, "comment_id": 49614609, "body": "as for question 4: Your array (obviously) need to be aligned to satisfy its type, and will be by default. However, you may want to additionally align to cache lines (normally 64 bytes) and you probably really want to avoid false sharing: <a href=\"http://en.wikipedia.org/wiki/False_sharing\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/False_sharing</a>"}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 4995013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af58d05b669e6e5206163dc1df55ea09?s=128&d=identicon&r=PG&f=1", "display_name": "BarbieBear", "link": "https://stackoverflow.com/users/4995013/barbiebear"}, "edited": false, "score": 0, "creation_date": 1433945811, "post_id": 30758924, "comment_id": 49570962, "body": "Just to confirm (based on answers 1. and 2) - no other thread will read or write to that array element during these calculations and the array sizes are fixed, so no mutexes needed for the writing array?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "edited": false, "score": 1, "creation_date": 1433945853, "post_id": 30758924, "comment_id": 49570991, "body": "@KirilKirov if thread A modifies <code>x[0]</code> and thread B modifies <code>x[i]</code> where <code>i != 0</code> are you sure that synchronization is required?"}, {"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "edited": false, "score": 0, "creation_date": 1433945929, "post_id": 30758924, "comment_id": 49571047, "body": "Oh, sorry, I&#39;ve missed &quot;that ever writes to this element&quot;. Ignore my comment."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 165, "user_id": 4995013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af58d05b669e6e5206163dc1df55ea09?s=128&d=identicon&r=PG&f=1", "display_name": "BarbieBear", "link": "https://stackoverflow.com/users/4995013/barbiebear"}, "edited": false, "score": 0, "creation_date": 1433946012, "post_id": 30758924, "comment_id": 49571100, "body": "@BarbieBear But is the element the threads will modify predetermined before the threads start? Or will the thread pick one element when it&#39;s ready to write the result? In the former case, you don&#39;t need locking as no two threads will write to the same elements, but in the latter case you do need locking or two (or more) threads might otherwise pick the same element."}, {"owner": {"reputation": 165, "user_id": 4995013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af58d05b669e6e5206163dc1df55ea09?s=128&d=identicon&r=PG&f=1", "display_name": "BarbieBear", "link": "https://stackoverflow.com/users/4995013/barbiebear"}, "edited": false, "score": 0, "creation_date": 1433946100, "post_id": 30758924, "comment_id": 49571155, "body": "So if I don&#39;t need mutexes for the two array, do I need to bother with using atomic variables, or is there some benefit in doing so?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 165, "user_id": 4995013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af58d05b669e6e5206163dc1df55ea09?s=128&d=identicon&r=PG&f=1", "display_name": "BarbieBear", "link": "https://stackoverflow.com/users/4995013/barbiebear"}, "edited": false, "score": 0, "creation_date": 1433946206, "post_id": 30758924, "comment_id": 49571230, "body": "@BarbieBear given your description of the situation, no synchronization seem to be required so there is no benefit from atomics."}, {"owner": {"reputation": 165, "user_id": 4995013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af58d05b669e6e5206163dc1df55ea09?s=128&d=identicon&r=PG&f=1", "display_name": "BarbieBear", "link": "https://stackoverflow.com/users/4995013/barbiebear"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1433946319, "post_id": 30758924, "comment_id": 49571330, "body": "@Joachim Pileborg.  The array element will be predetermined before hand, so can guarantee that only one thread can write to a given element."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 165, "user_id": 4995013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af58d05b669e6e5206163dc1df55ea09?s=128&d=identicon&r=PG&f=1", "display_name": "BarbieBear", "link": "https://stackoverflow.com/users/4995013/barbiebear"}, "edited": false, "score": 0, "creation_date": 1433946443, "post_id": 30758924, "comment_id": 49571433, "body": "@BarbieBear Then no synchronization is needed, neither locks, mutexes nor atomics."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 165, "user_id": 4995013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af58d05b669e6e5206163dc1df55ea09?s=128&d=identicon&r=PG&f=1", "display_name": "BarbieBear", "link": "https://stackoverflow.com/users/4995013/barbiebear"}, "edited": false, "score": 0, "creation_date": 1433946511, "post_id": 30758924, "comment_id": 49571496, "body": "@BarbieBear atomics have their place, but from your description that place isn&#39;t in your task. if you were, for example, using a reference to an &quot;index&quot; variable that was picked up by each thread to obtain its target array slot, where each thread bumped and grabbed the index value, <i>that</i> would be a stellar place for an atomic. But you stated even your target slot(s) are predetermined <i>and</i> unique per-thread. I don&#39;t see any need for concurrency restrictions at all, because frankly as you described it there is no data-concurrency whatsoever."}, {"owner": {"reputation": 10342, "user_id": 657930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rVp41.jpg?s=128&g=1", "display_name": "Arvid", "link": "https://stackoverflow.com/users/657930/arvid"}, "edited": false, "score": 1, "creation_date": 1434029441, "post_id": 30758924, "comment_id": 49614429, "body": "it is possible to affect alignment with the alignas specifier. <a href=\"http://en.cppreference.com/w/cpp/language/alignas\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/alignas</a>"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 10342, "user_id": 657930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rVp41.jpg?s=128&g=1", "display_name": "Arvid", "link": "https://stackoverflow.com/users/657930/arvid"}, "edited": false, "score": 0, "creation_date": 1434047196, "post_id": 30758924, "comment_id": 49626829, "body": "@Arvid thanks for pointing that out. I forgot it was added in c++11. I&#39;ll change the answer."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 7, "last_activity_date": 1434047362, "last_edit_date": 1434047362, "creation_date": 1433945625, "answer_id": 30758924, "question_id": 30758663, "link": "https://stackoverflow.com/questions/30758663/c-c-arrays-with-threads-do-i-need-to-use-mutexes-or-locks/30758924#30758924", "title": "C/C++ arrays with threads - do I need to use mutexes or locks?", "body": "<blockquote>\n  <ol>\n  <li>Do I really need to use a mutex in a thread each time I access the data from the read-only array? If so could you explain why?</li>\n  </ol>\n</blockquote>\n\n<p>No. Because the data is never modified, there cannot be synchronization problem.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Do I need to use a mutex in a thread when it writes to the result array even though this will be the only thread that ever writes to this element?</li>\n  </ol>\n</blockquote>\n\n<p>Depends.</p>\n\n<ol>\n<li>If any other thread is going to read the element, you need synchronization.</li>\n<li>If any thread may modify the size of the vector, you need synchronization.</li>\n</ol>\n\n<p>In any case, take care of not writing into adjacent memory locations by different threads a lot. That could destroy the performance. See \"false sharing\". Considering, you probably don't have a lot of cores and therefore not a lot of threads and you say write is done only once, this is probably not going to be a significant problem though.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>Should I use atomic data types and will there be any significant time over head if I do?</li>\n  </ol>\n</blockquote>\n\n<p>If you use locks (mutex), atomic variables are not necessary (and they do have overhead). If you need no synchronization, atomic variables are not necessary. If you need synchronization, then atomic variables can be used to avoid locks in some cases. In which cases can you use atomics instead of locks... is more complicated and beyond the scope of this question I think.</p>\n\n<p>Given the description of your situation in the comments, it seems that no synchronization is required at all and therefore no atomics nor locks.</p>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>...Would my array elements in this example be aligned, or is there some way to ensure they are?</li>\n  </ol>\n</blockquote>\n\n<p>As pointed out by Arvid, you can request specific alignment using the <a href=\"http://en.cppreference.com/w/cpp/language/alignas\" rel=\"nofollow\">alginas</a> keyword which was introduced in c++11. Pre c++11, you may resort to compiler specific extensions: <a href=\"https://gcc.gnu.org/onlinedocs/gcc-5.1.0/gcc/Variable-Attributes.html\" rel=\"nofollow\">https://gcc.gnu.org/onlinedocs/gcc-5.1.0/gcc/Variable-Attributes.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 3, "last_activity_date": 1433946484, "creation_date": 1433946484, "answer_id": 30759329, "question_id": 30758663, "link": "https://stackoverflow.com/questions/30758663/c-c-arrays-with-threads-do-i-need-to-use-mutexes-or-locks/30759329#30759329", "title": "C/C++ arrays with threads - do I need to use mutexes or locks?", "body": "<p>Under the two conditions given, there's no need for mutexes. Remember <em>every</em> use of a mutex (or any synchronization construct) is a performance overhead. So you want to avoid them as much as possible (without compromising correct code, of course).</p>\n\n<ol>\n<li><p>No. Mutexes are not needed since threads are only reading the array.</p></li>\n<li><p>No. Since each thread only writes to a distinct memory location, no race condition is possible.</p></li>\n<li><p>No. There's no need for atomic access to objects here. In fact, using atomic objects could affect the performance negatively as it prevents the optimization possibilities such as re-ordering operations.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 3961752, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e955e3aba473c53d1d82f5566a2a84ee?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Mpanga", "link": "https://stackoverflow.com/users/3961752/richard-mpanga"}, "is_accepted": false, "score": 0, "last_activity_date": 1433946681, "creation_date": 1433946681, "answer_id": 30759417, "question_id": 30758663, "link": "https://stackoverflow.com/questions/30758663/c-c-arrays-with-threads-do-i-need-to-use-mutexes-or-locks/30759417#30759417", "title": "C/C++ arrays with threads - do I need to use mutexes or locks?", "body": "<p>You are on the right track. </p>\n\n<p>1) For the first array (read only) , you do not need to utilize a mutex lock for it. Since the threads are just reading not altering the data there is no way a thread can corrupt the data for another thread</p>\n\n<p>2) I'm a little confused by this question. If you know that thread 1 will only write an element to array slot 1 and thread 2 will only write to array slot 2 then you do not need a mutex lock. However I'm not sure how your achieving this property. If my above statement is not correct for your situation you would definitely need a mutex lock.</p>\n\n<p>3) Given the definition of atomic:</p>\n\n<p>Atomic types are types that encapsulate a value whose access is guaranteed to not cause data races and can be used to synchronize memory accesses among different threads.</p>\n\n<p>Key note, a mutex lock is atomic meaning that there is only 1 assembly instruction needed to grab/release a lock. If it required 2 assembly instructions to grab/release a lock, a lock would not be thread safe. For example, if thread 1 attempted to grab a lock and was switched to thread 2, thread 2 would grab the lock.</p>\n\n<p>Use of atomic data types would decrease your overhead but not significantly.</p>\n\n<p>4) I'm not sure how you can assure your variables are lined. Since threads can switch at any moment in your program (Your OS determines when a thread switches)</p>\n\n<p>Hope this helps</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 4763809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f6564980cc2a73aec53ee0dedbcec73?s=128&d=identicon&r=PG&f=1", "display_name": "snyggt", "link": "https://stackoverflow.com/users/4763809/snyggt"}, "is_accepted": false, "score": 1, "last_activity_date": 1433946841, "creation_date": 1433946841, "answer_id": 30759483, "question_id": 30758663, "link": "https://stackoverflow.com/questions/30758663/c-c-arrays-with-threads-do-i-need-to-use-mutexes-or-locks/30759483#30759483", "title": "C/C++ arrays with threads - do I need to use mutexes or locks?", "body": "<p>The only time you need to use Locks is when data is modified on a shared resource. Eg if some threads where used to write data and some used to read data (in both cases from the same resource) then you only need a lock for when writing is done. This is to prevent whats known as \"race\". </p>\n\n<p>There is good information of race on google for when you make programs that manipulate data on a shared resource. </p>\n"}], "owner": {"reputation": 165, "user_id": 4995013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af58d05b669e6e5206163dc1df55ea09?s=128&d=identicon&r=PG&f=1", "display_name": "BarbieBear", "link": "https://stackoverflow.com/users/4995013/barbiebear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4338, "favorite_count": 0, "accepted_answer_id": 30759329, "answer_count": 4, "score": 10, "last_activity_date": 1603365096, "creation_date": 1433944978, "last_edit_date": 1603365096, "question_id": 30758663, "link": "https://stackoverflow.com/questions/30758663/c-c-arrays-with-threads-do-i-need-to-use-mutexes-or-locks", "title": "C/C++ arrays with threads - do I need to use mutexes or locks?", "body": "<p>I am new to using threads and have read a lot about how data is shared and protected.  But I have also not really got a good grasp of using mutexes and locks to protect data.</p>\n<p>Below is a description of the problem I will be working on.  The important thing to note is that it will be time-critical, so I need to reduce overheads as much as possible.</p>\n<p>I have two fixed-size double arrays.</p>\n<ul>\n<li><p>The first array will provide data for subsequent calculations.\nThreads will read values from it, but it will never be modified. An element may be read at some time by any of the threads.</p>\n</li>\n<li><p>The second array will be used to store the results of the calculations performed by the threads.  An element of this array will only ever be updated by one thread, and probably only once when the result value<br />\nis written to it.</p>\n</li>\n</ul>\n<p>My questions then:</p>\n<ol>\n<li><p>Do I really need to use a mutex in a thread each time I access the data from the read-only array?  If so, could you explain why?</p>\n</li>\n<li><p>Do I need to use a mutex in a thread when it writes to the result array even though this will be the only thread that ever writes to this element?</p>\n</li>\n<li><p>Should I use atomic data types, and will there be any significant time overhead if I do?</p>\n</li>\n<li><p>Many answers to this type of question seem to be - no, you don't need the mutex if your variables are aligned.  Would my array elements in this example be aligned, or is there some way to ensure they are?</p>\n</li>\n</ol>\n<p>The code will be implemented on 64bit Linux.  I am planning on using Boost libraries for multithreading.</p>\n<p>I have been mulling this over and looking all over the web for days, and once posted, the answer and clear explanations came back in literally seconds. There is an &quot;accepted answer,&quot; but all the answers and comments were equally helpful.</p>\n"}, {"tags": ["c", "unix", "io", "posix", "unbuffered"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1433945057, "post_id": 30758591, "comment_id": 49570415, "body": "No. <code>read(2)</code> doesn&#39;t add zero terminator even if it could only read less than the requested number of bytes."}, {"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "edited": false, "score": 2, "creation_date": 1433945102, "post_id": 30758591, "comment_id": 49570448, "body": "When you have such kind of doubts, the fastest and most reliable way to understand the answer is to just read the documentation. There are online sources, there are man pages, etc."}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1433945389, "post_id": 30758591, "comment_id": 49570652, "body": "As far as I can tell, the standard makes no comment on the contents of buf other than the data that is actually read. Maybe we need a [language-lawyer]. It would be very unusual for it to put anything there, though."}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1433945716, "post_id": 30758591, "comment_id": 49570893, "body": "@alk What is not documented is undefined."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1433947073, "post_id": 30758591, "comment_id": 49571979, "body": "@Random832: Sorry I deleted the comment you are referring to. I moved it to my answer."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1433949148, "post_id": 30758591, "comment_id": 49573714, "body": "You need to use the return value of <code>read</code> ... <code>bytesread = read(fd, buf, 256); write(fd, buf, bytesread);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 100127, "user_id": 67392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95e28ac250c4604a6f9d7e34705c3259?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/67392/richard"}, "is_accepted": false, "score": 8, "last_activity_date": 1433944974, "creation_date": 1433944974, "answer_id": 30758660, "question_id": 30758591, "link": "https://stackoverflow.com/questions/30758591/c-does-read-add-a-0/30758660#30758660", "title": "C - does read() add a &#39;\\0&#39;?", "body": "<p>No.</p>\n\n<p>Consider reading binary data (eg. a photo from a file): adding extra bytes would corrupt the data.</p>\n"}, {"comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1433949599, "post_id": 30758662, "comment_id": 49574034, "body": "<code>read()</code> may also return a value between 0 and 256 even when <code>fd</code> is something other than a socket descriptor.  Checking for a short read should be done for any <code>read()</code>."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 8, "last_activity_date": 1433950672, "last_edit_date": 1433950672, "creation_date": 1433944977, "answer_id": 30758662, "question_id": 30758591, "link": "https://stackoverflow.com/questions/30758591/c-does-read-add-a-0/30758662#30758662", "title": "C - does read() add a &#39;\\0&#39;?", "body": "<blockquote>\n  <p>does read() add a '\\0'?</p>\n</blockquote>\n\n<p>No, it doesn't. It just reads.</p>\n\n<p>From <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/read.html\" rel=\"nofollow\"><code>read()</code>'s documentation</a>:</p>\n\n<blockquote>\n  <p>The read() function shall attempt to read nbyte bytes from the file associated with the open file descriptor, fildes, into the buffer pointed to by buf. </p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>Is there potential for error here, other than the cases where those functions return -1? </p>\n</blockquote>\n\n<p><code>read()</code> might return <code>0</code> indicating end-of-file.</p>\n\n<p>If reading (also from a socket descriptor) <code>read()</code> not necessarily reads as much bytes as it was told to do. So in this context do not just test the outcome of read against <code>-1</code>, but also compare it against the number of bytes the function was told to read.</p>\n\n<hr>\n\n<p>A general note:</p>\n\n<p>Functions do what is documented (at least for proper implementations of the C language). Both your assumptions (autonomously set a 0-termination, detect the latter) are not documented.</p>\n"}, {"tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": false, "score": 1, "last_activity_date": 1433945126, "creation_date": 1433945126, "answer_id": 30758722, "question_id": 30758591, "link": "https://stackoverflow.com/questions/30758591/c-does-read-add-a-0/30758722#30758722", "title": "C - does read() add a &#39;\\0&#39;?", "body": "<p>From the man page:</p>\n\n<pre><code>Synopsis\n\n#include &lt;unistd.h&gt;\nssize_t read(int fd, void *buf, size_t count);\n</code></pre>\n\n<p>That is <code>void *</code>, not <code>char *</code>, because <code>read()</code> reads bytes, not characters. It reads zero bytes as well as any other value, and since blocks of bytes (as opposed to strings) aren't terminated, <code>read()</code> doesn't.</p>\n"}, {"tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": false, "score": 0, "last_activity_date": 1433948255, "creation_date": 1433948255, "answer_id": 30760055, "question_id": 30758591, "link": "https://stackoverflow.com/questions/30758591/c-does-read-add-a-0/30760055#30760055", "title": "C - does read() add a &#39;\\0&#39;?", "body": "<blockquote>\n  <p>Does it have to?</p>\n</blockquote>\n\n<p>Not unless the data that is successfully read from the file contains a <code>'\\0'</code>...</p>\n\n<blockquote>\n  <p>Is there potential for error here, other than the cases where those functions return -1?</p>\n</blockquote>\n\n<p>Yes. <code>read</code> returns the actual number of bytes read (or a negative value to indicate failure). If you choose to <code>write</code> more than that number of bytes into your other file, then you are writing potential garbage.</p>\n"}], "owner": {"reputation": 1353, "user_id": 3475234, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c10e56b2459bc8ed9750b6599515ca32?s=128&d=identicon&r=PG&f=1", "display_name": "user3475234", "link": "https://stackoverflow.com/users/3475234/user3475234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3098, "favorite_count": 0, "accepted_answer_id": 30758662, "answer_count": 4, "score": 0, "last_activity_date": 1433950672, "creation_date": 1433944806, "last_edit_date": 1433948917, "question_id": 30758591, "link": "https://stackoverflow.com/questions/30758591/c-does-read-add-a-0", "title": "C - does read() add a &#39;\\0&#39;?", "body": "<p>Does it have to? I've always been fuzzy on this sort of stuff, but if I have something like:</p>\n\n<pre><code>char buf[256];\nread(fd, buf, 256);\n\nwrite(fd2, buf, 256);\n</code></pre>\n\n<p>Is there potential for error here, other than the cases where those functions return -1? </p>\n\n<p>If it were to only read 40 characters, would it put a \\0 after it? (And would write recognize that \\0 and stop?\nAlso, if it were to read 256 characters, is there a \\0 after those 256?</p>\n"}, {"tags": ["c", "struct", "embedded"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1433944030, "post_id": 30758175, "comment_id": 49569558, "body": "Btw, it makes little sense to make value arguments <code>const</code>. It is possible, and makes them behave like constant variables inside the function, but it doesn&#39;t make the interface clearer. I advise against it."}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1433944136, "post_id": 30758175, "comment_id": 49569659, "body": "Are you sure it&#39;s bad? I use const on pointers, especially, to indicate that they won&#39;t be changed. Arguably it doesn&#39;t make sense for scalars, but it shouldn&#39;t harm anything..."}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 1, "creation_date": 1433944275, "post_id": 30758175, "comment_id": 49569775, "body": "Smallest memory footprint would probably mean you&#39;d have to pass a pointer to the struct, but you&#39;d have to try it and see. Perhaps write a small test-program and look at what the compiler does (optimization-wise), it&#39;s possible that if you pass a struct, the compiler optimizes that to passing a pointer anyway"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1433944343, "post_id": 30758175, "comment_id": 49569834, "body": "@MightyPork No I&#39;m not &quot;sure&quot;, this is not a hard rule. And I specifically said &quot;value types&quot; trying to exclude pointers, <i>of course</i> pointers must be <code>const</code> whenever possible since that is an important part of the public interface. For scalars, it&#39;s useless to the outside world which is why I think it should not be done."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1433944418, "post_id": 30758175, "comment_id": 49569899, "body": "@unwind <code>const char*</code> to indicate the you won&#39;t modify the data pointed to is good. <code>char * const</code> or <code>const int</code>, however,  is rather pointless for a parameter, as you point out."}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1433944564, "post_id": 30758175, "comment_id": 49570015, "body": "@unwind So, does it sound better if I don&#39;t use <code>const</code> in the H-file for scalars, but use it in the C-file to help optimization? (though I&#39;m not 100% sure the compiler needs it)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1433944801, "post_id": 30758175, "comment_id": 49570209, "body": "@unwind: <code>const</code> on pointer can be useful to make sure the pointer is not inadvertently changed. And the benefits of a pointer to a <code>const struct</code> are hopefully obvious: the object pointed to cannot be changed. Which makes this most times a good (and faster) alternative to passing a struct by copy. For scalars, I also do not see much sense (but might enforce a single-assignment policy."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1433948680, "post_id": 30758175, "comment_id": 49573322, "body": "the simplest answer is &quot;just try it&quot; what happens when you try these and look at the actual size of the binary, better, disassemble the functions in question (caller and callee) and see if they are putting the whole struct on the stack or not.  As Peter is pointing out if the size is similar to a pointer then it doesnt matter much but if the struct is of any (large) size and ram consumption, etc are a premium then just use a pointer"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 2, "creation_date": 1434034565, "post_id": 30758175, "comment_id": 49618528, "body": "@dwelch: ARM AAPCS might pass small structs in a register. For larger structs as argument, this is most times a bad idea. For results, it does not make a difference actually if the result is only used by the caller (the struct is allocated on the stack either way with a pointer passed to the callee)."}], "answers": [{"tags": [], "owner": {"reputation": 1188, "user_id": 2455333, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/adde4cc0f2a345604e5fffce3fd312c9?s=128&d=identicon&r=PG", "display_name": "Mabus", "link": "https://stackoverflow.com/users/2455333/mabus"}, "is_accepted": false, "score": 1, "last_activity_date": 1433945360, "creation_date": 1433945360, "answer_id": 30758823, "question_id": 30758175, "link": "https://stackoverflow.com/questions/30758175/better-to-pass-struct-or-pointer-to-struct/30758823#30758823", "title": "Better to pass struct, or pointer to struct?", "body": "<p>In the first case, when you return a struct in C, it's usually returned in a register if it fits or is implicitly passed by reference and modified AFAIK. So, in the best case it's better and in the worst case is equal than the second approach.</p>\n\n<p>In the second case it depends on the size of a pointer and the size of the struct among other things. In this case is very difficult to say anything without measurement. It probably won't be much different with a struct of that size, though.</p>\n\n<p>However you should consider also having consistency with the rest of your API, and having a system to notify errors if you can't do the operation (if the operation can fail).</p>\n"}, {"comments": [{"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433945508, "post_id": 30758845, "comment_id": 49570740, "body": "it&#39;s atmega328p, so I believe the pointer is actually 2-byte, but I could be wrong."}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 1, "creation_date": 1434053548, "post_id": 30758845, "comment_id": 49630559, "body": "Whether or not  a <code>struct</code> is larger than the pointer type on the platform and alignment issues are NOT the only things that need to be considered here.  Passing a <i>pointer</i> into a function, particularly a globally scoped function (i.e. non-static) will force the data to be written to RAM.  Passing in a struct <i>may</i> allow the compiler to keep the entire struct in registers which would both reduce stack usage and speed up execution. This is particularly true on CPUs with a lot of registers and can be a cause of performance differences between pass-by-ref and pass-by-ptr in C++."}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 1, "creation_date": 1434053867, "post_id": 30758845, "comment_id": 49630752, "body": "Also, I don&#39;t believe this applies on the atmega328, but the concern of registers vs stack usage is <i>especially</i> true on register-windowing architectures, e.g. SPARC, though I think this is increasingly uncommon in anything but &quot;big iron&quot; machines."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1434402498, "post_id": 30758845, "comment_id": 49753397, "body": "Passing a pointer does not force data to be written to RAM, except in very specific circumstances.   It prevents compiler/architecture specific optimisations such as passing struct members in registers.   But those members are more likely to be copied from RAM into the registers, rather than from other registers - and will still exist in RAM anyway. The main exceptions would be trivial programs that use only one instance of a particular struct type.  Few programs do that, and separate compilation models limit ability of compilers to detect such cases anyway."}], "tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 2, "last_activity_date": 1433945426, "creation_date": 1433945426, "answer_id": 30758845, "question_id": 30758175, "link": "https://stackoverflow.com/questions/30758175/better-to-pass-struct-or-pointer-to-struct/30758845#30758845", "title": "Better to pass struct, or pointer to struct?", "body": "<p>If you are trying to minimise memory footprint, then a <code>struct</code> type that is significantly larger than a pointer is better passed using a pointer.   Data that is significantly smaller is better passed by value.    If a pointer and the data are about the same size, it doesn't matter much.</p>\n\n<p>Assuming you are on AVR32, your pointer will be 32-bit and the struct is 64-bit (plus any padding).</p>\n\n<p>That would suggest you are better passing by pointer/reference.   However, the struct is not particularly large, other considerations may dominate - there is not really a lot in it for your <code>struct</code> type, as it is not particularly large.   You would need to measure relevant quantities (memory usage, code size, speed, etc) to be sure.</p>\n\n<p>So the best idea, I suggest, is to measure - these things are affected by host architecture, compiler settings, quality of implementation of the compiler, etc.</p>\n\n<p>Although you haven't asked, larger types (like <code>uint32_t</code>) tend to have larger alignment requirements than smaller types (like <code>uint16_t</code>).    A consequence of this is a fairly common guideline of ordering members of your struct so larger types appear first in memory.   This is probably not significant in your case either (it is a fair bet that a 16 bit type will be aligned to 16 bit boundaries, and 32-bit types to 32-bit boundaries, so it is likely there will be no padding in your case).   However, if you had three <code>uint16_t</code> members rather than two, you would be better off ordering things so the <code>uint32_t</code> members are first.   In other words, instead of</p>\n\n<pre><code>typedef struct\n{\n    uint16_t a,b,c;\n    uint32_t d;\n} SOME_TYPE;\n</code></pre>\n\n<p>you would be better off using a different order.</p>\n\n<pre><code>typedef struct\n{\n    uint32_t d;\n    uint16_t a,b,c;\n} SOME_TYPE;\n</code></pre>\n"}], "owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 2, "answer_count": 2, "score": 0, "last_activity_date": 1433945426, "creation_date": 1433943827, "question_id": 30758175, "link": "https://stackoverflow.com/questions/30758175/better-to-pass-struct-or-pointer-to-struct", "title": "Better to pass struct, or pointer to struct?", "body": "<p>I have a data struct, that will be read in a function.</p>\n\n<p>I want the smallest memory, code size, and speed footprint possible. I'm working on AVR.</p>\n\n<pre><code>typedef struct {\n    uint16_t clu;\n    uint16_t num;\n    uint32_t cur_rel;\n} FSAVEPOS;\n</code></pre>\n\n<p>Now, a function that stores file position into the struct:</p>\n\n<pre><code>// Approach 1\nFSAVEPOS save_pos(const FFILE* file); // return value\n\n// Approach 2\nvoid save_pos(const FFILE* file, FSAVEPOS* pos); // modify reference\n</code></pre>\n\n<p>And a function that reverses this (FFILE object is modified):</p>\n\n<pre><code>// Approach 1\nvoid restore_pos(FFILE* file, const FSAVEPOS pos); // pass by value\n\n// Approach 2\nvoid restore_pos(FFILE* file, const FSAVEPOS* pos); // pass by reference\n</code></pre>\n\n<p>What would you advise as the best idea?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1433944007, "post_id": 30758172, "comment_id": 49569545, "body": "Can you elaborate? I don&#39;t understand what you&#39;re asking"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "reply_to_user": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1433944076, "post_id": 30758172, "comment_id": 49569600, "body": "@CoryKramer I think he&#39;s saying that he can&#39;t modify a const int[] after definition, therefore he can&#39;t initialize it."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 1, "creation_date": 1433944233, "post_id": 30758172, "comment_id": 49569740, "body": "<code>const int ar[100];</code> is not even legal C++, you cannot leave the array un-initialized"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1433944672, "post_id": 30758172, "comment_id": 49570113, "body": "I suppose this is a follow-up question to my comment to <a href=\"http://stackoverflow.com/a/30756798/584518\">this answer</a>? In that case, simply check the answer posted by yours sincerely to that question."}, {"owner": {"reputation": 823, "user_id": 4812238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qFdQT.jpg?s=128&g=1", "display_name": "Ediac", "link": "https://stackoverflow.com/users/4812238/ediac"}, "edited": false, "score": 0, "creation_date": 1433944719, "post_id": 30758172, "comment_id": 49570143, "body": "After declaring a const variable, you can no longer change its values. You should assign the values when you instantiate the object or variable."}, {"owner": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433946503, "post_id": 30758172, "comment_id": 49571488, "body": "@Lundin exactly,  but i dont find proper ans there.... if u dont mind kindly guide me"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433946654, "post_id": 30758172, "comment_id": 49571588, "body": "@SagarKar What part of <a href=\"http://stackoverflow.com/a/30757138/584518\">my answer</a> didn&#39;t you understand? It is universal and applies to any data type, not just chars."}, {"owner": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433946805, "post_id": 30758172, "comment_id": 49571722, "body": "@Lundin ow u said about that #define method.... i mentioned that i am looking for something other than that... thats a cool method indeed"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1433946954, "post_id": 30758172, "comment_id": 49571871, "body": "There is no standard way to do so. <a href=\"http://stackoverflow.com/questions/21528288/c-structure-array-initializing\">Here is a very similar question</a> with a very similar answer by me, plus some answers suggesting non-standard gcc extensions."}, {"owner": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433947187, "post_id": 30758172, "comment_id": 49572087, "body": "Thanks man! Nxt time i will try to post more meaningful question that dont go for downvote! @Lundin"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433947561, "post_id": 30758172, "comment_id": 49572379, "body": "This isn&#39;t a bad question, it is just very hard to understand for others what you mean, since you are referring to that other question, without posting a link to it. So nobody except me understood what you were asking :)"}, {"owner": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433947631, "post_id": 30758172, "comment_id": 49572447, "body": "@Lundin will takecar form next time :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433947788, "post_id": 30758172, "comment_id": 49572580, "body": "I took the liberty to edit your question and post links."}, {"owner": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433947888, "post_id": 30758172, "comment_id": 49572666, "body": "@Lundin kudos to u.... bad deeds got me good teacher! ;)"}, {"owner": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1433949519, "post_id": 30758172, "comment_id": 49573975, "body": "you could also use templates: <a href=\"http://stackoverflow.com/questions/6060103/create-static-array-with-variadic-templates\" title=\"create static array with variadic templates\">stackoverflow.com/questions/6060103/&hellip;</a>"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1433949533, "post_id": 30758172, "comment_id": 49573986, "body": "See <a href=\"http://unixhelp.ed.ac.uk/CGI/man-cgi?xxd\" rel=\"nofollow noreferrer\">xxd</a>"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "edited": false, "score": 0, "creation_date": 1433948650, "post_id": 30760030, "comment_id": 49573288, "body": "Cool thats somewhag cheating lol.... nice way though"}], "tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 1, "last_activity_date": 1433948202, "creation_date": 1433948202, "answer_id": 30760030, "question_id": 30758172, "link": "https://stackoverflow.com/questions/30758172/const-array-initialization-if-its-too-long/30760030#30760030", "title": "Const array initialization if its too long", "body": "<p>You could use a trick... initialize a regular array and then get a reference to a const array:</p>\n\n<pre><code>int arr[100];\nfor (int i=0; i&lt;100; i++) arr[i] = i*i;\n\nconst int (&amp;carr)[100] = arr;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 2, "last_activity_date": 1433949277, "creation_date": 1433949277, "answer_id": 30760477, "question_id": 30758172, "link": "https://stackoverflow.com/questions/30758172/const-array-initialization-if-its-too-long/30760477#30760477", "title": "Const array initialization if its too long", "body": "<p>There's no way to do it directly, without hacks.</p>\n\n<p>In C++ one way to work around this problem is to take advantage of the fact that inside their constructors <code>const</code> objects are still modifiable. So, you can wrap your array into a class and initialize it in the constructor</p>\n\n<pre><code>struct Arr \n{\n  int a[100];\n\n  A() \n  {\n    for (unsigned i = 0; i &lt; 100; ++i)\n      a[i] = i;\n  }\n};\n</code></pre>\n\n<p>and then just declare</p>\n\n<pre><code>const Arr arr;\n</code></pre>\n\n<p>Of course, now you will have to access it as <code>arr.a[i]</code>, unless you override the operators in <code>Arr</code>.</p>\n"}], "owner": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "closed_date": 1433953558, "accepted_answer_id": 30760477, "answer_count": 2, "score": 2, "last_activity_date": 1433949277, "creation_date": 1433943822, "last_edit_date": 1495542139, "question_id": 30758172, "link": "https://stackoverflow.com/questions/30758172/const-array-initialization-if-its-too-long", "closed_reason": "Needs details or clarity", "title": "Const array initialization if its too long", "body": "<p><a href=\"https://stackoverflow.com/a/30756798/584518\">In my answer</a> to this <a href=\"https://stackoverflow.com/questions/30756630/how-do-i-assign-cumbersome-repetitive-values-to-an-array\">question</a> it was mentioned that the code I posted wouldn't work if the variable was declared as <code>const</code>.</p>\n\n<p>What if i want to initialize a long array that's <code>const</code> type</p>\n\n<pre><code>int main (){\n    const int ar[100];\n //this is invalid in c++\n //something like this\n\n    for (int i=0;i &lt;100;++i)\n        ar[i]=i;\n    return 0;\n}\n</code></pre>\n\n<p>Are there other ways to do this than using the <a href=\"https://stackoverflow.com/a/30757138/584518\"><code>#define</code> method</a> proposed in that question?</p>\n"}, {"tags": ["c", "algorithm", "memory-management", "recursion"], "comments": [{"owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1433943331, "post_id": 30757837, "comment_id": 49568943, "body": "Please avoid tagging C++ unless your code is specifically written in C++. This is obviously pure C code."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 1, "creation_date": 1433943388, "post_id": 30757837, "comment_id": 49568989, "body": "use <code>std::string</code> and <code>+=</code>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1433943475, "post_id": 30757837, "comment_id": 49569071, "body": "Define a data structure - an abstraction - that represents expressions and stop working with strings altogether."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1433943494, "post_id": 30757837, "comment_id": 49569091, "body": "You have several problems beyond this. <code>malloc&#39;d</code> memory content is initially content-indeterminate, as a such there is no known nulchar terminator. Thus <code>strcat</code> targeting said-buffer invokes undefined behavior. And of course, this also leaks memory like crazy."}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 4874858, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/038d74a737aabb30d8c5600b13c55a1d?s=128&d=identicon&r=PG&f=1", "display_name": "Microsoft Orange Badge", "link": "https://stackoverflow.com/users/4874858/microsoft-orange-badge"}, "edited": false, "score": 0, "creation_date": 1433943694, "post_id": 30758010, "comment_id": 49569258, "body": "I tagged it as C++ because it is valid C++."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 311, "user_id": 4874858, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/038d74a737aabb30d8c5600b13c55a1d?s=128&d=identicon&r=PG&f=1", "display_name": "Microsoft Orange Badge", "link": "https://stackoverflow.com/users/4874858/microsoft-orange-badge"}, "edited": false, "score": 0, "creation_date": 1433945003, "post_id": 30758010, "comment_id": 49570379, "body": "@MicrosoftOrangeBadge For example <code>char * dfdx = malloc(...</code> is perfectly valid C but not valid in C++."}], "tags": [], "owner": {"reputation": 4396, "user_id": 1043773, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7a5453bbc3f198ebef8e8d44253a1503?s=128&d=identicon&r=PG", "display_name": "bashrc", "link": "https://stackoverflow.com/users/1043773/bashrc"}, "is_accepted": false, "score": 1, "last_activity_date": 1433943387, "creation_date": 1433943387, "answer_id": 30758010, "question_id": 30757837, "link": "https://stackoverflow.com/questions/30757837/how-do-i-set-a-buffer-in-a-possibly-recursive-procedure/30758010#30758010", "title": "How do I set a buffer in a possibly recursive procedure?", "body": "<p>Since you have tagged the question as c++, I would suggest chuck char * and use std::string. \nThe code would look like this:</p>\n\n<pre><code>string deriveFromTree ( node * rt )\n{\n    string dfdx // buffer\n    if (rt-&gt;op) // if rt is of the form rt = gx op hx\n    {\n        string dgdx = deriveFromTree(rt-&gt;gx); // g'(x)\n        string dhdx = deriveFromTree(rt-&gt;hx); // h'(x)\n        char thisop = *rt-&gt;op;\n        if (thisop == '+' || thisop == '-')\n        {\n            //   ADDITION/SUBTRACTION RULE:\n            //   dfdx = dgdx + thisop + dhdx\n            dfdx =  dfdx + dgdx + thisop + dhdx; //strcat(dfdx, dgdx);\n        }\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 4874858, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/038d74a737aabb30d8c5600b13c55a1d?s=128&d=identicon&r=PG&f=1", "display_name": "Microsoft Orange Badge", "link": "https://stackoverflow.com/users/4874858/microsoft-orange-badge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433943387, "creation_date": 1433942960, "last_edit_date": 1433943303, "question_id": 30757837, "link": "https://stackoverflow.com/questions/30757837/how-do-i-set-a-buffer-in-a-possibly-recursive-procedure", "title": "How do I set a buffer in a possibly recursive procedure?", "body": "<p>I just realized a major flaw in the program I was writing. It's a program that symbolically differentiates math functions, e.g. <code>\"x^2+5\"</code> --> <code>\"2*x\"</code>, and the master function involved starts off like</p>\n\n<pre><code>char * deriveFromTree ( node * rt )\n{\n    char * dfdx = malloc(100*sizeof(char)); // buffer\n    if (rt-&gt;op) // if rt is of the form rt = gx op hx\n    {\n        char * dgdx = deriveFromTree(rt-&gt;gx); // g'(x)\n        char * dhdx = deriveFromTree(rt-&gt;hx); // h'(x)\n        char thisop = *rt-&gt;op;\n        if (thisop == '+' || thisop == '-')\n        {\n            //   ADDITION/SUBTRACTION RULE:\n            //   dfdx = dgdx + thisop + dhdx\n            dfdx = strcat(dfdx, dgdx);\n            dfdx = strcat(dfdx, charToString(thisop));\n            dfdx = strcat(dfdx, dhdx);\n\n        }\n</code></pre>\n\n<p>The problem, as you might already see, is that the result of <code>deriveFromTree</code> fits in a buffer of length <code>100</code>, but the result also be composed of several other results, which just won't work. An alternative solution is getting rid of the buffer and setting <code>dfdx</code> to be the exact length it needs to be:</p>\n\n<pre><code>char * deriveFromTree ( node * rt )\n{\n    char * dfdx;\n    if (rt-&gt;op) // if rt is of the form rt = gx op hx\n    {\n        char * dgdx = deriveFromTree(rt-&gt;gx); // g'(x)\n        char * dhdx = deriveFromTree(rt-&gt;hx); // h'(x)\n        char thisop = *rt-&gt;op;\n        if (thisop == '+' || thisop == '-')\n        {\n            //   ADDITION/SUBTRACTION RULE:\n            //   dfdx = dgdx + thisop + dhdx\n            dfdx = malloc(strlen(dgdx) + strlen(dhdx) + 2);\n            dfdx = strcat(dfdx, dgdx);\n            dfdx = strcat(dfdx, charToString(thisop));\n            dfdx = strcat(dfdx, dhdx);\n\n        }\n</code></pre>\n\n<p>But that is inefficient because of the calls <code>strlen(dgdx)</code> and <code>strlen(dhdx)</code> iterate through the strings <code>dgdx</code> and <code>dhdx</code> and then they are iterated through again in the <code>strcat</code> calls. </p>\n\n<p>What is the best solution to this problem?</p>\n"}, {"tags": ["c", "fixed-point", "rms"], "comments": [{"owner": {"reputation": 2106, "user_id": 1301827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0339ea80a604666c01b56dd4c4ede6?s=128&d=identicon&r=PG", "display_name": "A_A", "link": "https://stackoverflow.com/users/1301827/a-a"}, "edited": false, "score": 0, "creation_date": 1433941560, "post_id": 30756957, "comment_id": 49567520, "body": "I am not sure about the averaging between the last two RMS values because that adds an extra &quot;mean&quot; calculation between frames. Since you are dealing with fixed point numbers, perhaps you would like to test if you get overflow errors. For this purpose, try feeding your algorithm with a lower amplitude sinusoid. Finally, this might help: <a href=\"http://stackoverflow.com/questions/1058813/on-line-iterator-algorithms-for-estimating-statistical-median-mode-skewnes\" title=\"on line iterator algorithms for estimating statistical median mode skewnes\">stackoverflow.com/questions/1058813/&hellip;</a> as well as this: <a href=\"http://en.wikipedia.org/wiki/Algorithms_for_calculating_variance\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Algorithms_for_calculating_variance</a>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1433942301, "post_id": 30756957, "comment_id": 49568129, "body": "this kind of code: &#39;value 20 = value 19   //INT16 values value 19 = value 18 ...&#39; is a massive CPU cycle waster.   Instead, use a circular queue."}, {"owner": {"reputation": 23, "user_id": 2585465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c902af5c9cb58e3d29bd4d0a22418293?s=128&d=identicon&r=PG", "display_name": "user2585465", "link": "https://stackoverflow.com/users/2585465/user2585465"}, "edited": false, "score": 0, "creation_date": 1433942707, "post_id": 30756957, "comment_id": 49568451, "body": "Perhaps it is taking too long and the interrupt is getting called again part way through the shift. I will try putting the values into a buffer and use pointers to index the values."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1433944171, "post_id": 30756957, "comment_id": 49569685, "body": "20 samples won&#39;t be nearly enough to get an accurate reading, your description is exactly what I&#39;d expect. You&#39;re basically getting random parts of a waveform. Unless your readings are timed to precisely cover a single wave of AC."}, {"owner": {"reputation": 1069, "user_id": 2787699, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a497232ae63e75c3ecf31a12fd9f8316?s=128&d=identicon&r=PG&f=1", "display_name": "laloumen", "link": "https://stackoverflow.com/users/2787699/laloumen"}, "edited": false, "score": 0, "creation_date": 1433953922, "post_id": 30756957, "comment_id": 49576961, "body": "If you think about what it means to converge to a steady value, it means that your value1 = value20.  Given x[i] = sin(t[i]), and value=x*x/20, this places very specific requirement on the sampling rate with respect to the period of your harmonic function.  In other words, t[1] and t[20] must fall in the same place relative to the sine curve.  Does that make sense?"}], "answers": [{"tags": [], "owner": {"reputation": 355, "user_id": 1894804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c620a8068f34ed9e62f8028a6677a7a5?s=128&d=identicon&r=PG", "display_name": "Dennis C Furlaneto", "link": "https://stackoverflow.com/users/1894804/dennis-c-furlaneto"}, "is_accepted": false, "score": 0, "last_activity_date": 1433941896, "creation_date": 1433941896, "answer_id": 30757389, "question_id": 30756957, "link": "https://stackoverflow.com/questions/30756957/calculating-rms-using-fixed-point-math-c/30757389#30757389", "title": "Calculating RMS using fixed point math (C)", "body": "<p>Alrigth, this function doesn't really compute the RMS. </p>\n\n<p>Did you take a look at how sumvalue changes overtime? sumvalue must be somewhat constant, in the dc and in the sign case. If it isn`t, something is wrong with the routine that does the sum. If the sumvalue is constant, then there is something wrong with your RMS procedure.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 2585465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c902af5c9cb58e3d29bd4d0a22418293?s=128&d=identicon&r=PG", "display_name": "user2585465", "link": "https://stackoverflow.com/users/2585465/user2585465"}, "edited": false, "score": 0, "creation_date": 1433991502, "post_id": 30757859, "comment_id": 49593133, "body": "The code samples a full waveform, but since the MCU doesnt have an FPU I cannot use decimal values as it costs too much in execution time."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1433943026, "creation_date": 1433943026, "answer_id": 30757859, "question_id": 30756957, "link": "https://stackoverflow.com/questions/30756957/calculating-rms-using-fixed-point-math-c/30757859#30757859", "title": "Calculating RMS using fixed point math (C)", "body": "<p>if the code is sampling the data often enough, find min value, find max value, find median = (min+max)/2, find RMS = (max-median)*.707</p>\n\n<p>if the code is not sampling the data often enough, then use a fast forier(spelling) transform to find the min/max values.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 2585465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c902af5c9cb58e3d29bd4d0a22418293?s=128&d=identicon&r=PG", "display_name": "user2585465", "link": "https://stackoverflow.com/users/2585465/user2585465"}, "edited": false, "score": 0, "creation_date": 1433944054, "post_id": 30758162, "comment_id": 49569582, "body": "The calculations give a close approximation of RMS after a couple of cycles the value should be constant. I cant use floating point numbers because of no FPU and the high overhead it introduces."}, {"owner": {"reputation": 1069, "user_id": 2787699, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a497232ae63e75c3ecf31a12fd9f8316?s=128&d=identicon&r=PG&f=1", "display_name": "laloumen", "link": "https://stackoverflow.com/users/2787699/laloumen"}, "reply_to_user": {"reputation": 23, "user_id": 2585465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c902af5c9cb58e3d29bd4d0a22418293?s=128&d=identicon&r=PG", "display_name": "user2585465", "link": "https://stackoverflow.com/users/2585465/user2585465"}, "edited": false, "score": 0, "creation_date": 1433944153, "post_id": 30758162, "comment_id": 49569677, "body": "That depends on the period of the sine wave and the sample rate.  If the 20 samples only cover a small part of the period - the RMS value will constantly change."}, {"owner": {"reputation": 23, "user_id": 2585465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c902af5c9cb58e3d29bd4d0a22418293?s=128&d=identicon&r=PG", "display_name": "user2585465", "link": "https://stackoverflow.com/users/2585465/user2585465"}, "edited": false, "score": 0, "creation_date": 1433987438, "post_id": 30758162, "comment_id": 49592197, "body": "Correct. I should have put that in the original post, the 20 samples covers a full period of the waveform."}], "tags": [], "owner": {"reputation": 1069, "user_id": 2787699, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a497232ae63e75c3ecf31a12fd9f8316?s=128&d=identicon&r=PG&f=1", "display_name": "laloumen", "link": "https://stackoverflow.com/users/2787699/laloumen"}, "is_accepted": false, "score": 0, "last_activity_date": 1433943799, "creation_date": 1433943799, "answer_id": 30758162, "question_id": 30756957, "link": "https://stackoverflow.com/questions/30756957/calculating-rms-using-fixed-point-math-c/30758162#30758162", "title": "Calculating RMS using fixed point math (C)", "body": "<p>Aside from the fact that you're not calculating RMS (where is the sqrt?) and that your algorithm for calculating RMS doesn't seem correct, a sampled RMS value would be expected to oscillate within a range due to the sampling.  You haven't specified what the frequency of the sine wave you are sampling, nor demonstrated that 20 values is sufficient to avoid <strong>aliasing</strong>.  If you know the period of your sine wave and divide that by 20, then your RMS value won't oscillate.</p>\n\n<p>In addition, your code is highly non-scalable - imagine the agony of your approach of value1, value2, ..., value20 when you realize you need to preserve 200 values (or 2000)!</p>\n\n<p>Here is a sample Python script which you can play around with:</p>\n\n<pre><code>   i = 0\n   x = 0\n   values = []\n   sampleSize = 20\n   while True:\n      y = math.sin(x)\n      y = y*y/sampleSize\n      values.append(y)\n      if(len(values) &gt; sampleSize):\n         values.pop(0)\n      val = sum(values)\n      print(math.sqrt(val))\n      x += 8*math.atan(1)/sampleSize\n      i += 1\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 2585465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c902af5c9cb58e3d29bd4d0a22418293?s=128&d=identicon&r=PG", "display_name": "user2585465", "link": "https://stackoverflow.com/users/2585465/user2585465"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 998, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1433943799, "creation_date": 1433940787, "question_id": 30756957, "link": "https://stackoverflow.com/questions/30756957/calculating-rms-using-fixed-point-math-c", "title": "Calculating RMS using fixed point math (C)", "body": "<p>I am trying to calculate the RMS value of a waveform but am running into some problems. </p>\n\n<p>I take samples every x microseconds which is triggered by an interrupt. The sample is stored in an array and each time a sample is taken it pushes the last value to the next point in the array and feeds a new value in. As i take the sample I square it and divide by 20 (number of sample per period, assume waveform fixed frequency) then put it into my array, i also add it to a sum value and when i reach 20 samples i subtract the first sample made and add the last sample made. </p>\n\n<pre><code>value 20 = value 19   //INT16 values\nvalue 19 = value 18\n...\nvalue1 = (sample * sample)/20\nsumvalue += value1\nsumvalue -= value20\n</code></pre>\n\n<p>I then call an RMS function which takes that value, divides by the last calculated RMS value (or if not calculated yet then divide by 1) add the last RMS value then divide all that by 2. </p>\n\n<pre><code>CalcRMS(sumvalue)\nINT32 tempsum\nif(RMS)\ntempsum = (sumvalue/RMS + RMS)/2\nelse\ntempsum = (sumvalue + 1)/2\nRMS = tempsum\n</code></pre>\n\n<p>I then output RMS to the screen. Only problem is that my RMS value keeps changing, even though the waveform is constant. If i run a dc value in there my RMS stays steady but shove in a sine wave and it goes crazy.</p>\n\n<p>Hoping somebody can point me in the right direction. I don't want the answer straight up, just some nudges to get me back on track.</p>\n"}, {"tags": ["c++", "c", "winapi"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1433941076, "post_id": 30756871, "comment_id": 49567095, "body": "Assign both bytes in one go using shift ops"}], "answers": [{"tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": false, "score": 0, "last_activity_date": 1433941063, "creation_date": 1433941063, "answer_id": 30757068, "question_id": 30756871, "link": "https://stackoverflow.com/questions/30756871/lvalue-required-as-left-operand-of-assignment-lobyte-hibyte/30757068#30757068", "title": "lvalue required as left operand of assignment - LOBYTE / HIBYTE", "body": "<p>The way to modify a subset of a value is using the boolean operators, e.g.:</p>\n\n<pre><code>v9 &amp;= ~255; // mask off low byte (set to 0)\nv9 |= *(_BYTE*)serial; // or in the new low byte value\n</code></pre>\n\n<p>But since you're modifying both bytes of a 16 bit value the easiest way is to just assign it in one operation:</p>\n\n<pre><code>v9 = (*(_BYTE*)(*serial + 1) &lt;&lt; 8) | (*(_BYTE*)serial);\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 3209746, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c51ceedfc1eaf661361c77486e24e1a6?s=128&d=identicon&r=PG", "display_name": "encoree1337", "link": "https://stackoverflow.com/users/3209746/encoree1337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433941063, "creation_date": 1433940598, "question_id": 30756871, "link": "https://stackoverflow.com/questions/30756871/lvalue-required-as-left-operand-of-assignment-lobyte-hibyte", "title": "lvalue required as left operand of assignment - LOBYTE / HIBYTE", "body": "<p>I'm receiving <code>lvalue required as left operand error</code> on LOBYTE/HIBYTE/LODWORD lines in function below:</p>\n\n<pre><code>typedef DWORD _DWORD;\ntypedef BYTE _BYTE;\ntypedef WORD _WORD;\n\nsigned int __stdcall checkSerial(int serial, int serialLength)\n{\n  int v2; // ecx@1\n  int v3; // ecx@3\n  int v4; // ecx@5\n  int v5; // ecx@7\n  int v6; // dx@9\n  signed int v7; // ecx@10\n  char v8; // dl@11\n  __int16 v9; // cx@13\n  signed int result; // eax@21\n\n  v2 = 0;\n  do\n  {\n    *(_DWORD *)(v2 + serial) ^= 0x1234567u;\n    *(_BYTE *)(v2 + serial) &amp;= 0xEu;\n    v2 += 4;\n  }\n  while ( v2 != 8 );\n  v3 = 0;\n  do\n    *(_BYTE *)(serial + 8) += *(_BYTE *)(v3++ + serial);\n  while ( v3 != serialLength );\n  v4 = 0;\n  do\n  {\n    *(_DWORD *)(v4 + serial) ^= 0x89ABCDEu;\n    *(_BYTE *)(v4 + serial) &amp;= 0xEu;\n    v4 += 4;\n  }\n  while ( v4 != 8 );\n  v5 = 0;\n  do\n    *(_BYTE *)(serial + 9) += *(_BYTE *)(v5++ + serial);\n  while ( v5 != serialLength );\n  LOBYTE(v6) = *(_BYTE *)(serial + 9);\n  HIBYTE(v6) = *(_BYTE *)(serial + 8);\n  if ( v6 != 0x42DE )\n    goto LABEL_25;\n  v7 = 9;\n  do\n  {\n    v8 = *(_BYTE *)(v7 + serial) ^ *(_BYTE *)(v7 + serial);\n    --v7;\n  }\n  while ( (_WORD)v7 );\n  if ( (*(_WORD *)(serial + 8) ^ 0xEEEE) != 0x30AC )\n    goto LABEL_25;\n  LOBYTE(v9) = *(_BYTE *)serial;\n  HIBYTE(v9) = *(_BYTE *)(serial + 1);\n  if ( v9 != 0xB008u )\n    goto LABEL_25;\n  if ( *(_DWORD *)serial != 0x7A81B008 )\n    goto LABEL_25;\n  LOWORD(v7) = 0;\n  do\n  {\n    v8 ^= 0xAu;\n    v7 += 4;\n  }\n  while ( v7 &lt;= 12 );\n  if ( *(_DWORD *)(serial + 4) != 0x388DBF02\n    || *(_BYTE *)(serial + 5) != 191\n    || *(_BYTE *)(serial + 6) != 141\n    || *(_BYTE *)(serial + 5) != 191 )\nLABEL_25:\n    result = 1;\n  else\n    result = 0;\n  return result;\n}\n</code></pre>\n\n<p>LOBYTE(v9) = *(_BYTE *)serial;\nHIBYTE(v9) = *(_BYTE *)(serial + 1);</p>\n\n<p>e.g. this lines are causing error - but why? LOBYTE is defined as LOBYTE(x) ((BYTE)(x)) so why I can't just cast it?</p>\n"}, {"tags": ["c", "arrays", "string", "file"], "comments": [{"owner": {"reputation": 2076, "user_id": 1866196, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TrCUq.png?s=128&g=1", "display_name": "skrtbhtngr", "link": "https://stackoverflow.com/users/1866196/skrtbhtngr"}, "edited": false, "score": 2, "creation_date": 1433940670, "post_id": 30756867, "comment_id": 49566790, "body": "You must allocate some space to <code>string</code>."}, {"owner": {"reputation": 57, "user_id": 3368605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/079502179c37f5b94262d400541344b8?s=128&d=identicon&r=PG&f=1", "display_name": "wing", "link": "https://stackoverflow.com/users/3368605/wing"}, "edited": false, "score": 1, "creation_date": 1433940870, "post_id": 30756867, "comment_id": 49566938, "body": "well, if i dont know how is long the string in the txt file? How i allocate enough space for it? Thanks"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433940872, "post_id": 30756867, "comment_id": 49566940, "body": "<code>string</code> is a pointer to <code>char</code>. You&#39;ve to make it point to a <code>char</code> array(<code>char buffer[100]; string = buffer;</code>) or dynamically allocate memory(<code>string = malloc(100);</code> and after use, <code>free(string);</code>) before you write to it from the <code>fscanf</code>."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1433941111, "post_id": 30756867, "comment_id": 49567127, "body": "If you don&#39;t know how long the text is then you have options.  One is to figure out a maximum, 4096 is a common one used for a maximum line length.  Second, don&#39;t use <code>fscanf</code>, use <code>fread</code> where you can specify the maximum number of bytes to read.  That&#39;s a bit more work, but safer."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433941240, "post_id": 30756867, "comment_id": 49567253, "body": "@wing , In that case, you can use <code>getline</code> if you can. It allocates the right amount of memory."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1433941409, "post_id": 30756867, "comment_id": 49567401, "body": "<code>getline</code> is GNU/POSIX, so compiler/environment dependant.  <code>fgets()</code> ?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1433942809, "post_id": 30756867, "comment_id": 49568534, "body": "@cdarke: surely you are not suggesting to use <code>fread</code> on a plain text file? You may be confusing it with <code>fgets</code> (even with that, it depends on unknown reasons why OP chose to use <code>fscanf</code>)."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1433943474, "post_id": 30756867, "comment_id": 49569070, "body": "the source code for getline is available online.   download it, compile it, use the resulting object as part of your executable.  here is one source: &lt;<a href=\"http://opensource.apple.com/source/cvs/cvs-29/cvs/lib/getline.c\" rel=\"nofollow noreferrer\">opensource.apple.com/source/cvs/cvs-29/cvs/lib/getline.c</a>&gt;"}, {"owner": {"reputation": 57, "user_id": 3368605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/079502179c37f5b94262d400541344b8?s=128&d=identicon&r=PG&f=1", "display_name": "wing", "link": "https://stackoverflow.com/users/3368605/wing"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1433943488, "post_id": 30756867, "comment_id": 49569082, "body": "@Jongware i use fscanf cause it seems me the fastest way to get a string from a file. Then fgets reeds only until the \\n instead the \\0 of the fscanf."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1434010760, "post_id": 30756867, "comment_id": 49601116, "body": "@Jongware:  no, I wasn&#39;t confusing it with <code>fgets()</code>.  We do not know the format of the text file, it could be Unicode for all we know.  <code>fgets()</code> can be fun on a utf-8 file."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1434011110, "post_id": 30756867, "comment_id": 49601362, "body": "@cdarke: please expand on that. You can&#39;t be worried about getting zero bytes (as these are as illegal in UTF8 as they are in plain text) or accidentally parsing a return as &#39;part of a UTF8 character&#39; or the other way around (because per definition of UTF8 neither can happen)."}], "answers": [{"comments": [{"owner": {"reputation": 2076, "user_id": 1866196, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TrCUq.png?s=128&g=1", "display_name": "skrtbhtngr", "link": "https://stackoverflow.com/users/1866196/skrtbhtngr"}, "edited": false, "score": 2, "creation_date": 1433940902, "post_id": 30756952, "comment_id": 49566967, "body": "BTW, <code>malloc</code> is a function. &quot;malloc statement&quot; is a wrong statement."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1433941208, "post_id": 30756952, "comment_id": 49567229, "body": "Perhaps you could explain where the <code>100</code> comes from?"}, {"owner": {"reputation": 2667, "user_id": 4958370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J6Dhp.png?s=128&g=1", "display_name": "Sourav Kanta", "link": "https://stackoverflow.com/users/4958370/sourav-kanta"}, "edited": false, "score": 0, "creation_date": 1433941288, "post_id": 30756952, "comment_id": 49567298, "body": "I just used 100 as an example.We can allocate as much memory as we feel safe to work with."}], "tags": [], "owner": {"reputation": 2667, "user_id": 4958370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J6Dhp.png?s=128&g=1", "display_name": "Sourav Kanta", "link": "https://stackoverflow.com/users/4958370/sourav-kanta"}, "is_accepted": false, "score": 1, "last_activity_date": 1433940942, "last_edit_date": 1433940942, "creation_date": 1433940766, "answer_id": 30756952, "question_id": 30756867, "link": "https://stackoverflow.com/questions/30756867/error-variable-string-is-not-initialized/30756952#30756952", "title": "ERROR: variable &quot;string&quot; is not initialized", "body": "<p>Allocate space for the string with malloc function.</p>\n\n<pre><code>string=malloc(100*sizeof(char));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 108, "user_id": 3432594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WQj9D.jpg?s=128&g=1", "display_name": "axellink", "link": "https://stackoverflow.com/users/3432594/axellink"}, "is_accepted": true, "score": 4, "last_activity_date": 1433940788, "creation_date": 1433940788, "answer_id": 30756958, "question_id": 30756867, "link": "https://stackoverflow.com/questions/30756867/error-variable-string-is-not-initialized/30756958#30756958", "title": "ERROR: variable &quot;string&quot; is not initialized", "body": "<p>That's normal, you didn't allocate string. C needs you to allocate it in memory before you use it. Also you will have to know its size.</p>\n\n<p>In your code, string points to nowhere into memory so it doesn't exist (to be exact it points to somewhere you have a lot of chance that you can't access it)</p>\n\n<p>See how malloc works.</p>\n"}], "owner": {"reputation": 57, "user_id": 3368605, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/079502179c37f5b94262d400541344b8?s=128&d=identicon&r=PG&f=1", "display_name": "wing", "link": "https://stackoverflow.com/users/3368605/wing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 30756958, "answer_count": 2, "score": 0, "last_activity_date": 1433940942, "creation_date": 1433940584, "question_id": 30756867, "link": "https://stackoverflow.com/questions/30756867/error-variable-string-is-not-initialized", "title": "ERROR: variable &quot;string&quot; is not initialized", "body": "<p>I wrote this code that reads from a .txt a string and settles it in a char *, but it gives me error that the variable \"string\" is not initialized, even if i initialized it inside the fscanf, can u tell me where i wrong? Thanks!</p>\n\n<pre><code>    char *string;\n    FILE *fp = fopen(\"words.txt\", \"r\");\n    fscanf(fp, \"%s\", string);\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 6, "creation_date": 1433940561, "post_id": 30756816, "comment_id": 49566715, "body": "Kudos, you just discovered <b>Undefined Behavior</b>! Now just Google it."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1433940626, "post_id": 30756816, "comment_id": 49566752, "body": "There are hundreds of duplicates of this question around here on SO. The compiler will not stop you from shooting yourself in the foot, for example by writing out of bounds of an array."}, {"owner": {"reputation": 2667, "user_id": 4958370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J6Dhp.png?s=128&g=1", "display_name": "Sourav Kanta", "link": "https://stackoverflow.com/users/4958370/sourav-kanta"}, "edited": false, "score": 0, "creation_date": 1433940692, "post_id": 30756816, "comment_id": 49566809, "body": "Its undefined behaviour. Any way did you enter a space in your string input&gt;"}, {"owner": {"reputation": 57, "user_id": 4778862, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EKS_hQoZ3Xs/AAAAAAAAAAI/AAAAAAAAAB0/iTYFBsGYt28/photo.jpg?sz=128", "display_name": "Nareshreddy Barrolla", "link": "https://stackoverflow.com/users/4778862/nareshreddy-barrolla"}, "edited": false, "score": 0, "creation_date": 1433940793, "post_id": 30756816, "comment_id": 49566886, "body": "ya WhenI i gave space it printing string length till space only."}], "answers": [{"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 1, "last_activity_date": 1433940545, "creation_date": 1433940545, "answer_id": 30756845, "question_id": 30756816, "link": "https://stackoverflow.com/questions/30756816/how-string-length-is-printing-more-then-size-of-char-array-if-give-input-more-t/30756845#30756845", "title": "How string length is printing more then size of char array, if give input more then char array?", "body": "<p>C doesn't do out of bounds checking. So writing and reading to locations beyond the array invokes <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">Undefined Behavior</a>. Anything can happen. </p>\n"}, {"tags": [], "owner": {"reputation": 4316, "user_id": 1742659, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/BpSsV.jpg?s=128&g=1", "display_name": "dfranca", "link": "https://stackoverflow.com/users/1742659/dfranca"}, "is_accepted": false, "score": 1, "last_activity_date": 1433941193, "creation_date": 1433941193, "answer_id": 30757128, "question_id": 30756816, "link": "https://stackoverflow.com/questions/30756816/how-string-length-is-printing-more-then-size-of-char-array-if-give-input-more-t/30757128#30757128", "title": "How string length is printing more then size of char array, if give input more then char array?", "body": "<p>You're doing <a href=\"http://crasseux.com/books/ctutorial/String-overflows-with-scanf.html\" rel=\"nofollow\">string overflow</a>, you are filling the string with more characters that it can hold, in C it leads to undefined behavior.</p>\n\n<p>Remember that you need to allocate n+1 (n = size of your string) to store the NULL-terminator value.\nYou can limit the number of chars to read in scanf, this way you prevent a string overflow.</p>\n\n<p>i.e:</p>\n\n<pre><code>scanf(\"%99s\",s1);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1434030646, "post_id": 30757295, "comment_id": 49615442, "body": "<code>char s1[100];</code> --&gt; <code>scanf(&quot;%99s&quot;,s1);</code>.  In <code>scanf()</code>, 99 is the max width of input."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1434034342, "post_id": 30757295, "comment_id": 49618352, "body": "@chux - Thanks, nice catch.  Edited."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 3, "last_activity_date": 1434035789, "last_edit_date": 1434035789, "creation_date": 1433941683, "answer_id": 30757295, "question_id": 30756816, "link": "https://stackoverflow.com/questions/30756816/how-string-length-is-printing-more-then-size-of-char-array-if-give-input-more-t/30757295#30757295", "title": "How string length is printing more then size of char array, if give input more then char array?", "body": "<p>First, given you have defined your string as <code>char s1[100];</code>  limit the string input length of scanf by changing your format specifier from:</p>\n\n<pre><code>scanf(\"%s\",s1);\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>scanf(\"%99s\",s1);// 99, + 1 for NULL terminator\n</code></pre>\n\n<p><strong><em>About buffer overflow</em></strong>:<br>\nIf you define a string, say:</p>\n\n<pre><code>char string[5];//holds 4 characters and a NULL terminator\n</code></pre>\n\n<p>In memory, it may look like this:  </p>\n\n<pre><code>|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0\n                      |^ ^ ^ ^ ^| (Allocated space)\n</code></pre>\n\n<p>strcpy(string, \"hold\");\nresults in:</p>\n\n<pre><code>|0|0|0|0|0|0|0|0|0|0|0|h|o|l|d|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0\n                      |^ ^ ^ ^ ^| (Allocated space)\n</code></pre>\n\n<p>No problem, you have written to an area owned by your variable. </p>\n\n<p>When you assign more than it should hold:</p>\n\n<pre><code>strcpy(string, \"holds more...\");\n</code></pre>\n\n<p>results in:</p>\n\n<pre><code>|0|0|0|0|0|0|0|0|0|0|0|h|o|l|d|s| |m|o|r|e|.|.|.|0|0|0|0|0|0|0|0|0|0|0\n                      |^ ^ ^ ^ ^| (Allocated space)\n</code></pre>\n\n<p>If the contiguous areas of memory following the memory assigned to your buffer are empty, and currently unused/unclaimed by any other process at the time you write to them, then the act of writing to them will show no effect, i.e. It appears to \"work\", and <strong><em>printf(,,) works just fine</em></strong> printing the buffer.  But later, you may attempt to write to that same area and find you get an error.  This is an example of <strong><em><a href=\"http://c2.com/cgi/wiki?UndefinedBehavior\" rel=\"nofollow\">undefined behavior</a></em></strong>.    </p>\n\n<p>Here is more on <strong><em><a href=\"https://developer.apple.com/library/mac/documentation/Security/Conceptual/SecureCodingGuide/Articles/BufferOverflows.html\" rel=\"nofollow\">avoiding buffer overflow</a></em></strong>. </p>\n"}], "owner": {"reputation": 57, "user_id": 4778862, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-EKS_hQoZ3Xs/AAAAAAAAAAI/AAAAAAAAAB0/iTYFBsGYt28/photo.jpg?sz=128", "display_name": "Nareshreddy Barrolla", "link": "https://stackoverflow.com/users/4778862/nareshreddy-barrolla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3491, "favorite_count": 0, "accepted_answer_id": 30757295, "answer_count": 3, "score": -1, "last_activity_date": 1434035789, "creation_date": 1433940463, "question_id": 30756816, "link": "https://stackoverflow.com/questions/30756816/how-string-length-is-printing-more-then-size-of-char-array-if-give-input-more-t", "title": "How string length is printing more then size of char array, if give input more then char array?", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nint main(){\n    char s1[100];\n    printf(\"Enter String \\n\");\n    scanf(\"%s\",s1);\n    int i;\n    for(i=0;s1[i]!='\\0';i++);\n    printf(\"Length : %d \\n\",i);\n    return 0;\n}\n</code></pre>\n\n<p>In the above program i was trying to find length of the string. for that i created char array with size 100 but when i was giving input more  then lenght 100 still it is printing length upto 141 after that i am getting \"stack smashing detected\" error. how is it printing length more then 100?</p>\n"}, {"tags": ["c", "avr", "isr", "attiny"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1433941210, "post_id": 30756790, "comment_id": 49567231, "body": "The code shown in link to TinyServo is not directly illustrating what it is you are trying that is not working.  You should consider showing what you have tried, even if, as you say, it does not make any sense."}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 1, "creation_date": 1433941540, "post_id": 30756790, "comment_id": 49567509, "body": "You could use the lower 8bit of your integer to trigger the ISR, in the ISR you cound how many times it happend incrementing another 8bit value. If that value matches your upper 8 bit, then you did the trick."}, {"owner": {"reputation": 75, "user_id": 4952059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjLUL.jpg?s=128&g=1", "display_name": "CrowStudio", "link": "https://stackoverflow.com/users/4952059/crowstudio"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1433941889, "post_id": 30756790, "comment_id": 49567769, "body": "@ryyker I posted the code now  ;-)"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1433943350, "post_id": 30756790, "comment_id": 49568957, "body": "@Nidhoegger - can you illustrate what you just said in an answer?"}, {"owner": {"reputation": 75, "user_id": 4952059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjLUL.jpg?s=128&g=1", "display_name": "CrowStudio", "link": "https://stackoverflow.com/users/4952059/crowstudio"}, "reply_to_user": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1433956442, "post_id": 30756790, "comment_id": 49578544, "body": "@Nidhoegger Attached a picture that illustrates the code above. was that how you meant?"}, {"owner": {"reputation": 75, "user_id": 4952059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjLUL.jpg?s=128&g=1", "display_name": "CrowStudio", "link": "https://stackoverflow.com/users/4952059/crowstudio"}, "reply_to_user": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1433956535, "post_id": 30756790, "comment_id": 49578604, "body": ".... sorry I thought that it was you @Nidhoegger that wrote the question about the illustration, hope it helps anyway! ;-)"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1433956621, "post_id": 30756790, "comment_id": 49578650, "body": "the function <code>servoPosSet()</code> should have two arguments, one the array and the second the number of elements in the array.  sizeof() provides the number of bytes in a variable so your loop is going to be off in <code>servoPosSet()</code> and in the other places where you are trying to use <code>sizeof()</code> to determine the number of array elements."}, {"owner": {"reputation": 75, "user_id": 4952059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjLUL.jpg?s=128&g=1", "display_name": "CrowStudio", "link": "https://stackoverflow.com/users/4952059/crowstudio"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1433957380, "post_id": 30756790, "comment_id": 49579119, "body": "@RichardChambers Aha, I thought that sizeof(servo), sizeof(hPulse) or sizeof(pos) returned the number of the array elements, ergo 5?"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1433957779, "post_id": 30756790, "comment_id": 49579342, "body": "For an array I would typically use something like <code>sizeof(ray)&#47;sizeof(ray[0])</code> which will take the total number of bytes in all of the elements of the array and then divide by the size of a single array element. Also when you call a function and pass it the array like you are doing, the function will not know the number of elements of the array.  The array basically gets turned into a constant pointer. Many people call this array decay into pointer such as in here <a href=\"http://stackoverflow.com/questions/1461432/what-is-array-decaying\" title=\"what is array decaying\">stackoverflow.com/questions/1461432/what-is-array-decaying</a>"}, {"owner": {"reputation": 75, "user_id": 4952059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjLUL.jpg?s=128&g=1", "display_name": "CrowStudio", "link": "https://stackoverflow.com/users/4952059/crowstudio"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1433958594, "post_id": 30756790, "comment_id": 49579858, "body": "@RichardChambers Check! I read the post <a href=\"http://stackoverflow.com/questions/37538/how-do-i-determine-the-size-of-my-array-in-c\" title=\"how do i determine the size of my array in c\">stackoverflow.com/questions/37538/&hellip;</a> a few moments before I saw your answer, so I got it now (i think)! Thanks! :-)"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1433959087, "post_id": 30756790, "comment_id": 49580189, "body": "See if correcting array element count makes a difference and let us know.  I took a look at some documentation, this is not something I know anything about, and it appears the compare match ISR involves loading a value into a register to let the hardware do the calculation of when to stop moving. This does not seem workable with your approach.  I expect you will need to run through your array of servos and move each one a little bit as you cycle through the list until each of the servos is at the desired position.  You seem to be doing this but your array end detection is wrong using sizeof()."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "reply_to_user": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1433960226, "post_id": 30756790, "comment_id": 49580877, "body": "I think @Nidhoegger is thinking of treating the 16 bit value as a series of 8 bit values that are loaded into the ISR. If <code>ui16Val</code> is your 16 bit value and <code>ui8Val</code> is the 8 bit value to load into the ISR you would do something like: <code>ui8Val = (ui16Val &amp; 0x00ff;   while (ui16Val) {  SendISR (ui8Val);  ui16Val &amp;= 0xff00; ui16Val &gt;&gt;= 1;  if (ui16Val) ui8Val = 0xff; } </code> The idea is to treat the most significant byte of the 16 bit value as a counter for the number of times to send down 0xff as the ISR counter value once the initial lower 8 bits are sent. But some kind of ISR synchronization need."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4952059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjLUL.jpg?s=128&g=1", "display_name": "CrowStudio", "link": "https://stackoverflow.com/users/4952059/crowstudio"}, "edited": false, "score": 0, "creation_date": 1434478657, "post_id": 30845241, "comment_id": 49791679, "body": "This is close to something I looked at some time ago! It felt right but I didn&#39;t understand it at the moment, and also it was not as on-the-spot as this example! Now all I have to do is manage to free some time and turn on the light up there! ;-)"}], "tags": [], "owner": {"reputation": 3116, "user_id": 463687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eXUNI.jpg?s=128&g=1", "display_name": "Edgar Bonet", "link": "https://stackoverflow.com/users/463687/edgar-bonet"}, "is_accepted": false, "score": 1, "last_activity_date": 1434371451, "creation_date": 1434371451, "answer_id": 30845241, "question_id": 30756790, "link": "https://stackoverflow.com/questions/30756790/is-it-possible-compare-a-16-bit-value-with-a-8-bit-compare-match-isr/30845241#30845241", "title": "is it possible compare a 16-bit value with a 8-bit compare match ISR", "body": "<p>If you have nothing else to do during the pulse, you could use a busy\nloop instead of interrupts:</p>\n\n<pre><code>#include &lt;avr/io.h&gt;\n#include &lt;util/delay_basic.h&gt;\n\n/* Send a pulse of width = 4*count cycles. */\nvoid pulse(uint16_t count, uint8_t channel)\n{\n    uint8_t mask     = 1 &lt;&lt; channel,\n            old_port = PORTB,\n            high     = old_port | mask,\n            low      = old_port &amp; ~mask;\n\n    PORTB = high;\n    _delay_loop_2(count);\n    PORTB = low;\n}\n</code></pre>\n\n<p>This will give you a resolution of 4 clock cycles, or 0.5&nbsp;\u00b5s with a\n8&nbsp;MHz clock.</p>\n\n<p>Sending the pulses to the 5 servos should take at most 10&nbsp;ms. Since\nyou repeat the pulse train every 21&nbsp;ms, this leaves you 11&nbsp;ms\nto compute the next set of positions, which should be plenty. You could\nprogram a timer to wake you up every 21&nbsp;ms, then your <code>main()</code> may\nlook like:</p>\n\n<pre><code>int main(void)\n{\n    static uint16_t pos[] = {4000, 3000, 3800, 2600, 3400};\n    uint8_t i;\n\n    /* Wake up every 21 ms. */\n    setup_timer();\n    sleep_enable();\n\n    for (;;) {\n        /* Update the servos. */\n        for (i = 0; i &lt; 5; i++) pulse(pos[i], i);\n\n        /* Compute the next set of positions. */\n        ...\n\n        /* Wait for timer interrupt. */\n        sleep_cpu();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 4952059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjLUL.jpg?s=128&g=1", "display_name": "CrowStudio", "link": "https://stackoverflow.com/users/4952059/crowstudio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434371451, "creation_date": 1433940396, "last_edit_date": 1433972647, "question_id": 30756790, "link": "https://stackoverflow.com/questions/30756790/is-it-possible-compare-a-16-bit-value-with-a-8-bit-compare-match-isr", "title": "is it possible compare a 16-bit value with a 8-bit compare match ISR", "body": "<p>I am trying to make a servo controller that have a higher resolution than the ATtiny85 8-bit timer/counter. So far I have managed to get about 2000 positions on my servo (1\u00b5s/step) within a time frame of 21'000 \u00b5s. I have also managed to move 5 servos sequential and with different speed, but now I want to move them synchronous.</p>\n\n<p>My biggest problem is that I don't get how I should make it happen! I have looked around on other servo codes including servo8bit library and tried to find a way. It seems that most of the examples uses compare match ISR to move the servos \"at the same time\", my problem is that I have a 16-bit integer that I want to compare.  </p>\n\n<p>Is there a way to do some magic so I can use the 8-bit compare match ISR with my 16-bit integer? Or does anyone of you have some other suggestions on how I can move my servos synchronous without using compare match ISR?</p>\n\n<p>I hope my questions make sense!</p>\n\n<p>Since I don't really have any code to show yet (only flawed attempts without compar match ISR that makes no sense) I post the link to my <a href=\"https://github.com/CrowStudio/TinyServo/blob/master/TinyServo.c\" rel=\"nofollow noreferrer\">TinyServo</a> code if it helps.</p>\n\n<p>EDIT 1:</p>\n\n<p>Here is the part of the code I mentioned and didn't post the first time:</p>\n\n<pre><code>void servoMove(void)\n{   \nuint16_t nextPulse = hPulse[0];\n\ntimerSetup ();      //16-bit setup for counter\n\nfor (i = 0; i &lt; sizeof(servo)/sizeof(servo[0]); i++)\n{\n    if ( (oTime &gt; nextPulse) &amp;&amp; (channel &lt; sizeof(servo)/sizeof(servo[0])) )        //check if HIGH pulse (pos) is done\n    {\n        PORTB &amp;= ~(1 &lt;&lt; servo[channel]);\n\n        if (i+1 &lt; sizeof(hPulse)/sizeof(hPulse[0]))\n        {\n            nextPulse += hPulse[i+1];\n        }\n\n        channel++;\n    }\n\n    else\n    {\n        channel = 0;\n\n        oTime = 0;      //resets 16-bit variable\n        tot_overflow = 0;       //resets tot_overflow variable  \n        TIFR |= (1 &lt;&lt; TOV1);        // clear counter1 overflow-flag\n        TCNT1 = 0;      //resets Timer/Counter1 \n    }\n\n}\n\nfor (i = 0; i &lt; sizeof(servo)/sizeof(servo[0]); i++)\n{\n    if ( (oTime &gt; tPulse - nextPulse) &amp;&amp; (channel &lt; sizeof(servo)/sizeof(servo[0]))   )         //check if LOW pulse (period) is done \n    {   \n        PORTB |= (1 &lt;&lt; servo[channel]);\n        nextPulse -= hPulse[i];\n        channel++;  \n    }\n\n}\n\n}\n\n\nvoid servoPosSet(volatile uint16_t pos[], uint8_t size)\n{\n     for (i = 0; i &lt; size; i++)\n     {\n        hPulse[i] = pos[i];\n     }\n\n}\n\n\nint main(void)\n{       \nTCCR1 |= (1 &lt;&lt; CS12);   //set Timer/Counter1 prescaler to increment every 1 \u00b5s (PCK/8)\n\nfor (channel = 0; channel &lt; size); channel++)\n{\n    DDRB |= (1 &lt;&lt; servo[channel]);  //sets PB0-PB4 as output pins\n}\n\nchannel = 0;\n\nuint16_t pos[] = {2000, 1500, 1900, 1300, 1700};\nuint8_t size = 5;\n\nwhile(1)        \n{\n        servoPosSet(pos);\n\n        servoMove();\n}\n\n}\n</code></pre>\n\n<p>EDIT 2:</p>\n\n<p>This is an illustration of how I think the code should work:\n<img src=\"https://i.stack.imgur.com/TABDp.jpg\" alt=\"enter image description here\"></p>\n\n<p>...but it does not!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7684, "user_id": 988966, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ANBfx.jpg?s=128&g=1", "display_name": "axiom", "link": "https://stackoverflow.com/users/988966/axiom"}, "edited": false, "score": 3, "creation_date": 1433940046, "post_id": 30756630, "comment_id": 49566314, "body": "You might want to read up on loops."}, {"owner": {"reputation": 326109, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1433941688, "post_id": 30756630, "comment_id": 49567629, "body": "@unwind The &quot;c++ lounge&quot; is <a href=\"http://chat.stackoverflow.com/rooms/10/loungec\">Lounge&lt;C++&gt;</a> (<i>in response to now-deleted <a href=\"http://stackoverflow.com/questions/30756630/how-do-i-assign-cumbersome-repetitive-values-to-an-array/30756668#comment49566536_30756668\">comment thread</a></i>)"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433941334, "post_id": 30756697, "comment_id": 49567340, "body": "This isn&#39;t initialization, however. For example, what if A would be <code>const</code>?"}], "tags": [], "owner": {"reputation": 2667, "user_id": 4958370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J6Dhp.png?s=128&g=1", "display_name": "Sourav Kanta", "link": "https://stackoverflow.com/users/4958370/sourav-kanta"}, "is_accepted": false, "score": 1, "last_activity_date": 1433940142, "creation_date": 1433940142, "answer_id": 30756697, "question_id": 30756630, "link": "https://stackoverflow.com/questions/30756630/how-do-i-assign-cumbersome-repetitive-values-to-an-array/30756697#30756697", "title": "How do I assign cumbersome repetitive values to an array?", "body": "<p>Use a for loop  statement to assign all elements to '.' ----</p>\n\n<pre><code>char A[10][10];\nint i,j;\nfor(i=0;i&lt;10;i++)\n  for(j=0;j&lt;10;j++)\n     A[i][j]='.';\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1433940536, "post_id": 30756798, "comment_id": 49566699, "body": "So, for each i between 0 and -1... well that&#39;s off to a good start."}, {"owner": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1433940886, "post_id": 30756798, "comment_id": 49566956, "body": "@Quentin i is intiger type, what do u mean by between 0 and -1??"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1433940994, "post_id": 30756798, "comment_id": 49567031, "body": "Your  <code>for</code> loops go from 0 included to 0 excluded, i.e [0, 0). They won&#39;t ever be entered."}, {"owner": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1433941051, "post_id": 30756798, "comment_id": 49567075, "body": "Thats was a typo for 10 .... i honestly overlooked it.... Anyway i dont mind downvote to my answer but help me improve! Thanks"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433941373, "post_id": 30756798, "comment_id": 49567370, "body": "This isn&#39;t initialization, however. For example, what if A would be <code>const</code>?"}], "tags": [], "owner": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "is_accepted": false, "score": 1, "last_activity_date": 1433941501, "last_edit_date": 1433941501, "creation_date": 1433940410, "answer_id": 30756798, "question_id": 30756630, "link": "https://stackoverflow.com/questions/30756630/how-do-i-assign-cumbersome-repetitive-values-to-an-array/30756798#30756798", "title": "How do I assign cumbersome repetitive values to an array?", "body": "<p>Loops are the thing You want to read about now.</p>\n\n<p>The simple <strong>for</strong> loop will do that for you.</p>\n\n<pre><code>char A[10][10];\nint i,j;\nfor ( i=0;i &lt;10;++i){\n     for ( j=0;j &lt;10;++j)\n            A[i][j]='.';\n }\n</code></pre>\n\n<p>For further justification google loops in c/c++</p>\n"}, {"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 5, "creation_date": 1433941377, "post_id": 30757138, "comment_id": 49567375, "body": "It almost looks like song lyrics."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1433941477, "post_id": 30757138, "comment_id": 49567459, "body": "@Quentin Feel free to use the code as lyrics for your next mainstream pop hit :)"}, {"owner": {"reputation": 193, "user_id": 4189229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0ALBR.jpg?s=128&g=1", "display_name": "The Artist", "link": "https://stackoverflow.com/users/4189229/the-artist"}, "edited": false, "score": 0, "creation_date": 1433941992, "post_id": 30757138, "comment_id": 49567852, "body": "@Lundin Thank you very much!"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 9, "last_activity_date": 1433941958, "last_edit_date": 1433941958, "creation_date": 1433941229, "answer_id": 30757138, "question_id": 30756630, "link": "https://stackoverflow.com/questions/30756630/how-do-i-assign-cumbersome-repetitive-values-to-an-array/30757138#30757138", "title": "How do I assign cumbersome repetitive values to an array?", "body": "<p>The only feasible way to <em><strong>initialize</strong></em> an array like this, is (unfortunately) by using a flood of macros:</p>\n\n<pre><code>#define ONE_DOT '.',\n#define TWO_DOTS ONE_DOT ONE_DOT\n#define FIVE_DOTS TWO_DOTS TWO_DOTS ONE_DOT\n#define TEN_DOTS { FIVE_DOTS FIVE_DOTS },\n#define TWENTY_DOTS TEN_DOTS TEN_DOTS\n#define FIFTY_DOTS TWENTY_DOTS TWENTY_DOTS TEN_DOTS\n#define ONE_HUNDRED_DOTS FIFTY_DOTS FIFTY_DOTS\n\n\nint A[10][10] = { ONE_HUNDRED_DOTS };\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 4189229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0ALBR.jpg?s=128&g=1", "display_name": "The Artist", "link": "https://stackoverflow.com/users/4189229/the-artist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 30757138, "answer_count": 3, "score": 0, "last_activity_date": 1436996788, "creation_date": 1433939966, "last_edit_date": 1433941263, "question_id": 30756630, "link": "https://stackoverflow.com/questions/30756630/how-do-i-assign-cumbersome-repetitive-values-to-an-array", "title": "How do I assign cumbersome repetitive values to an array?", "body": "<p>I want to create an array of 10 \u00d7 10, which contains <code>'.'</code> for each element. So I write as : </p>\n\n<pre><code>int A[10][10]={ '.','.','.','.',\n</code></pre>\n\n<p>(wait a minute I have to write 100 full stops and 100 commas)</p>\n\n<pre><code>               '.','.','.'}\n</code></pre>\n\n<p>Another method is to write <code>'.',</code> 10 times and then copy paste it 10 times, but still this takes time and I don't think this is the smartest method.</p>\n\n<p>Is there a smarter method? I don't want to write so long full stops.</p>\n"}, {"tags": ["c", "windows", "gcc", "mingw", "mingw32"], "comments": [{"owner": {"reputation": 117, "user_id": 1602627, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f4cd1b6275849eaff3c05150b8097db1?s=128&d=identicon&r=PG", "display_name": "pandreym", "link": "https://stackoverflow.com/users/1602627/pandreym"}, "edited": false, "score": 0, "creation_date": 1433940491, "post_id": 30756625, "comment_id": 49566653, "body": "[see this question stackoverflow]     [1]: <a href=\"http://stackoverflow.com/questions/7262362/mingw-the-procedure-entry-point-libiconv-could-not-be-located\" title=\"mingw the procedure entry point libiconv could not be located\">stackoverflow.com/questions/7262362/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 4230026, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PF6dcMs3syQ/AAAAAAAAAAI/AAAAAAAAAK4/20ULaFT-5QY/photo.jpg?sz=128", "display_name": "lillendogge", "link": "https://stackoverflow.com/users/4230026/lillendogge"}, "reply_to_user": {"reputation": 117, "user_id": 1602627, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f4cd1b6275849eaff3c05150b8097db1?s=128&d=identicon&r=PG", "display_name": "pandreym", "link": "https://stackoverflow.com/users/1602627/pandreym"}, "edited": false, "score": 0, "creation_date": 1433944250, "post_id": 30756625, "comment_id": 49569759, "body": "@mrblonde Thank you! Turned out that lua was conflicting with it."}], "owner": {"reputation": 21, "user_id": 4230026, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PF6dcMs3syQ/AAAAAAAAAAI/AAAAAAAAAK4/20ULaFT-5QY/photo.jpg?sz=128", "display_name": "lillendogge", "link": "https://stackoverflow.com/users/4230026/lillendogge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 960, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1433939959, "creation_date": 1433939959, "question_id": 30756625, "link": "https://stackoverflow.com/questions/30756625/mingw-error-when-compiling-c-the-procedure-entry-point-libintl-setlocale-could", "title": "MinGW error when compiling C: The procedure entry point libintl_setlocale could not be located in the DLL-file as.exe", "body": "<p>When i try to compile ANY C program with MinGW, I get the error:\n(Roughly translated from Swedish)</p>\n\n<blockquote>\n  <p>\"as.exe - Could not find procedure entry point. The procedure entry\n  point libintl_setlocale could not be located in the DLL-file\n  C:\\mingw\\bin..\\lib\\gcc\\mingw32\\4.8.1\\..\\..\\..\\..\\mingw32\\bin\\as.exe\"</p>\n</blockquote>\n\n<p>Followed by a window saying:</p>\n\n<blockquote>\n  <p>\"as.exe has stopped working...\"</p>\n</blockquote>\n\n<p>I just installed MinGW with the following packages:</p>\n\n<ul>\n<li><p>mingw-developer-toolkit</p></li>\n<li><p>mingw32-base</p></li>\n<li><p>mingw32-gcc-g++</p></li>\n<li><p>mingw32-gcc-objc</p></li>\n<li><p>msys-base</p></li>\n</ul>\n\n<p>Does anyone know what might be causing this problem?</p>\n"}, {"tags": ["c++", "c", "gcc", "clang"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 4, "creation_date": 1433939934, "post_id": 30756550, "comment_id": 49566226, "body": "In C++ using an <a href=\"http://stackoverflow.com/q/23415661/1708801\">indeterminate value is undefined behavor</a> and so the behavior is unpredictable and can vary. It is also undefined behavior in <a href=\"http://blog.frama-c.com/index.php?post/2013/03/13/indeterminate-undefined\" rel=\"nofollow noreferrer\">C as well</a>."}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1433941342, "post_id": 30756550, "comment_id": 49567347, "body": "Cool Guy has the only correct answer.  Just wanted to add that your compiler will report this kind of behavior.  Try compiling with <code>-Wall</code> for either compiler..."}], "answers": [{"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": true, "score": 6, "last_activity_date": 1433940735, "last_edit_date": 1433940735, "creation_date": 1433939826, "answer_id": 30756572, "question_id": 30756550, "link": "https://stackoverflow.com/questions/30756550/different-clang-and-gcc-behavior-with-pointers/30756572#30756572", "title": "different clang and gcc behavior with pointers", "body": "<p><code>pointer_to_check</code> to check is uninitialized. It points to some \"random\" location.</p>\n\n<p>Accessing uninitialized variables leads to <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">Undefined Behavior</a> which means that anything can happen.</p>\n\n<p>Also, pointers should be printed using the <code>%p</code> format specifier.</p>\n\n<hr>\n\n<blockquote>\n  <p>with gcc code, we will get zero at output</p>\n</blockquote>\n\n<p>Anything can be the output. It is Undefined. You shouldn't rely on this behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 2821, "user_id": 3071928, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/exR74.jpg?s=128&g=1", "display_name": "Binkan Salaryman", "link": "https://stackoverflow.com/users/3071928/binkan-salaryman"}, "edited": false, "score": 0, "creation_date": 1433940036, "post_id": 30756594, "comment_id": 49566305, "body": "It could be even <code>0xCAFEBABE</code> ;)"}], "tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": false, "score": 3, "last_activity_date": 1433939874, "creation_date": 1433939874, "answer_id": 30756594, "question_id": 30756550, "link": "https://stackoverflow.com/questions/30756550/different-clang-and-gcc-behavior-with-pointers/30756594#30756594", "title": "different clang and gcc behavior with pointers", "body": "<p>This is undefined behaviour.</p>\n\n<p>Pointers are not initialized when you declare them, so they could point anywhere. <code>0</code>, <code>0xDEADBEEF</code> or anything else are \"valid\" representations.</p>\n\n<p>If you want the pointer to be initialized to null, do it explicitly:</p>\n\n<pre><code>int* pointer_to_check = nullptr;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4994722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9e972629cc166b83ddf33a8ca41077?s=128&d=identicon&r=PG&f=1", "display_name": "\u0421\u0438\u0434\u043e\u0440 \u0421\u043f\u0438\u0440\u0438\u0434\u043e\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/4994722/%d0%a1%d0%b8%d0%b4%d0%be%d1%80-%d0%a1%d0%bf%d0%b8%d1%80%d0%b8%d0%b4%d0%be%d0%bd%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 30756572, "answer_count": 2, "score": 0, "last_activity_date": 1433949157, "creation_date": 1433939750, "last_edit_date": 1433949157, "question_id": 30756550, "link": "https://stackoverflow.com/questions/30756550/different-clang-and-gcc-behavior-with-pointers", "title": "different clang and gcc behavior with pointers", "body": "<p>For example, we have the following simple code:</p>\n\n<pre><code>#include \"stdio.h\"   \n\nint main() {   \n  int* pointer_to_check;\n  printf(\"%x\\n\", pointer_to_check);\n  return 0;\n}\n</code></pre>\n\n<p>With gcc, we will get zero at output (as for me, normal behavior, because pointer isn't associated with memory), but clang gives us a real address, which can be accessed without \"segmentation fault\".</p>\n\n<p>I have two questions: </p>\n\n<ol>\n<li>What is the normal behavior according to the C standard (and C++)?  </li>\n<li>Why does this happen?</li>\n</ol>\n"}, {"tags": ["c", "arduino"], "answers": [{"tags": [], "owner": {"reputation": 476, "user_id": 1950211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oAIXA.jpg?s=128&g=1", "display_name": "TheEditor", "link": "https://stackoverflow.com/users/1950211/theeditor"}, "is_accepted": false, "score": 0, "last_activity_date": 1433945630, "creation_date": 1433945630, "answer_id": 30758931, "question_id": 30756437, "link": "https://stackoverflow.com/questions/30756437/nrf24-data-received-but-not-whole-message/30758931#30758931", "title": "nRF24 - data received but not whole message", "body": "<p>So as it turns out you need to put network.update(); in loop....  If you only call it per request like I did it will not work.  Hence the //do this regularly comment that you see for this.  </p>\n"}], "owner": {"reputation": 476, "user_id": 1950211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oAIXA.jpg?s=128&g=1", "display_name": "TheEditor", "link": "https://stackoverflow.com/users/1950211/theeditor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433945630, "creation_date": 1433939453, "last_edit_date": 1433939840, "question_id": 30756437, "link": "https://stackoverflow.com/questions/30756437/nrf24-data-received-but-not-whole-message", "title": "nRF24 - data received but not whole message", "body": "<p>Here is the setup.  Arduino #1 has a w5100 ethernet shield running a webserver accepting GET strings.  It then parses out the data and sends it wirelessly to the other nodes using nRF24l10 transceivers.  I'm using maniacbug's RF24 and RF24Network libraries. Also due to having the ethernet shield and the wireless I had to use a modified RF24 for the base that supports soft SPI. </p>\n\n<p>Arduino #2 is just the nRF24L10.  </p>\n\n<p>What is working.  Sending GET's to Arduino #1 works. It parses the information.  It then calls the send routine and that says it's ok. </p>\n\n<p>On arduino #2 I get a \"Received:\" printout but no message.  I'm not sure what is wrong.  The code is taken right from maniacbug's tx and rx example. Except I had to convert my sendString to a char to send.  </p>\n\n<p>I'm wondering if it's one of the following things but I'm not quite sure how to debug. </p>\n\n<ol>\n<li><p>That the addition of the RF24Network library broke the softSPI.  I've been very careful to remove one libray and add the other when I compile. Though if this were the case I'd never see the \"Received:\" would i?</p></li>\n<li><p>It doesn't like my conversion from string to char?</p></li>\n</ol>\n\n<p>Here is the code.</p>\n\n<p>Base Station:  <a href=\"http://pastebin.com/Ehy8pz4Z\" rel=\"nofollow\">http://pastebin.com/Ehy8pz4Z</a>\nReceiver    :  <a href=\"http://pastebin.com/2mz9FjsR\" rel=\"nofollow\">http://pastebin.com/2mz9FjsR</a> </p>\n\n<p>Here is the modified RF24+ softspi library.  <a href=\"https://github.com/shnae/rf24_plus_softSPI\" rel=\"nofollow\">https://github.com/shnae/rf24_plus_softSPI</a> if that helps.  </p>\n\n<p>I don't think just adding the nrf24network library breaks that but since it calls SPI.begin() it might.  That's beyond my skillset.. </p>\n"}, {"tags": ["c", "linux", "multithreading", "sockets"], "comments": [{"owner": {"reputation": 541, "user_id": 4930545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64fdfa69ba90335d66181d66f15c3242?s=128&d=identicon&r=PG&f=1", "display_name": "Dami&#225;n Montenegro", "link": "https://stackoverflow.com/users/4930545/dami%c3%a1n-montenegro"}, "edited": false, "score": 0, "creation_date": 1433939340, "post_id": 30756210, "comment_id": 49565794, "body": "Seems to be duplicated. See <a href=\"http://stackoverflow.com/questions/18758307/recv-failed-bad-file-descriptor-c-linux\" title=\"recv failed bad file descriptor c linux\">stackoverflow.com/questions/18758307/&hellip;</a>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 541, "user_id": 4930545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64fdfa69ba90335d66181d66f15c3242?s=128&d=identicon&r=PG&f=1", "display_name": "Dami&#225;n Montenegro", "link": "https://stackoverflow.com/users/4930545/dami%c3%a1n-montenegro"}, "edited": false, "score": 0, "creation_date": 1433944039, "post_id": 30756210, "comment_id": 49569569, "body": "@Dami&#225;nMontenegro: The cause why <code>recv()</code> fails is the same, the reason why <code>recv()</code> receives the <code>-1</code> in this question however is much more subtile then in the question you linked, where is&#39;s just a dump bug, a missing return, break, whatever, which is not the case here. So I object your comment."}], "answers": [{"comments": [{"owner": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "edited": false, "score": 0, "creation_date": 1433942847, "post_id": 30756861, "comment_id": 49568562, "body": "HI if i comment  fcntl(sock_desc, F_SETFL, fcntl(sock_desc, F_GETFL, 0) | O_NONBLOCK); line everything works fine."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "edited": false, "score": 1, "creation_date": 1433943063, "post_id": 30756861, "comment_id": 49568724, "body": "@Simer: See my updated answer. For a blocking socket (the default) <code>accept()</code> would block if no other incoming connection is pending, so <code>connfd</code> wouldn&#39;t get overwritten. If however two connection would arrive at the time. The value returned by <code>accept()</code> for the 2nd connection might get stored for the 1st. A bug much more difficult to identify as such, as <code>recv()</code> for the 1st handler would not fail but simply read from the 2nd connection as well. Ugly."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "edited": false, "score": 0, "creation_date": 1433943298, "post_id": 30756861, "comment_id": 49568922, "body": "To explicitly state this again: Using your code as shown <i>and</i> commenting out the call setting the listening socket to <code>non-blocking</code> <b>does not</b> fix the bug. It <b>just hides</b> it until the servers receives many requests in a short time."}, {"owner": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "edited": false, "score": 0, "creation_date": 1433944419, "post_id": 30756861, "comment_id": 49569901, "body": "Hi I changed  int sock = <i>(int</i>)socket_desc; to following and it is working fine.      int sock = (int) socket_desc;  Is it Ok now."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "edited": false, "score": 0, "creation_date": 1433944575, "post_id": 30756861, "comment_id": 49570028, "body": "@Simer: I updated my answer commenting on both proposed solution&#39;s &quot;cleanliness&quot;."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "edited": false, "score": 0, "creation_date": 1433944653, "post_id": 30756861, "comment_id": 49570096, "body": "@Simer: Also you might want take into account my &quot;other&quot; proposals on modifications/corrections to your code."}, {"owner": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "edited": false, "score": 0, "creation_date": 1433944738, "post_id": 30756861, "comment_id": 49570162, "body": "what is pi in (sizeof *pi)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "edited": false, "score": 0, "creation_date": 1433944845, "post_id": 30756861, "comment_id": 49570240, "body": "@Simer: This has been a typo which is fixed now."}, {"owner": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "edited": false, "score": 0, "creation_date": 1433945214, "post_id": 30756861, "comment_id": 49570523, "body": "Hi can u do me one more favor plz . Here is a link can u plz answer this question <a href=\"http://stackoverflow.com/questions/30725206/multithreaded-server-in-linux\" title=\"multithreaded server in linux\">stackoverflow.com/questions/30725206/&hellip;</a>"}, {"owner": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "edited": false, "score": 0, "creation_date": 1433946043, "post_id": 30756861, "comment_id": 49571116, "body": "are u considering answering the Question in above link??"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "edited": false, "score": 0, "creation_date": 1433946194, "post_id": 30756861, "comment_id": 49571212, "body": "@Simer: I&#39;d consider it as answered."}, {"owner": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "edited": false, "score": 0, "creation_date": 1433946396, "post_id": 30756861, "comment_id": 49571397, "body": "Has the answer provided to it  Perfect.??"}, {"owner": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "edited": false, "score": 0, "creation_date": 1434528674, "post_id": 30756861, "comment_id": 49811595, "body": "Hi sir can u plz answer this question.<a href=\"http://stackoverflow.com/questions/30885668/exiting-a-thread-after-communication-process-is-over?noredirect=1#comment49811363_30885668\" title=\"exiting a thread after communication process is over\">stackoverflow.com/questions/30885668/&hellip;</a>"}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 3, "last_activity_date": 1433944801, "last_edit_date": 1433944801, "creation_date": 1433940573, "answer_id": 30756861, "question_id": 30756210, "link": "https://stackoverflow.com/questions/30756210/unable-to-receive-data-after-connection-getting-bad-file-descriptor-error/30756861#30756861", "title": "Unable to receive data after connection getting Bad file Descriptor error", "body": "<p>(The issue you observe has nothing to do with running on a dual-boot machine.)</p>\n\n<p>The code as shown introduces a race by using the address of the same variable for each incoming connection to pass the socket descriptor to the thread function.</p>\n\n<p>The race occures if <code>accept()</code> would return faster a second time. To fast for the thread-handler to store what the address it got passed pointed to via executing:</p>\n\n<pre><code>int sock = *(int*)socket_desc;\n</code></pre>\n\n<p>In your specfic case with the listening socket set to non-blocking this most likley is the case, when only one connection came in, the handler got the address of <code>connfd</code> passed in and in parallel <code>accept()</code> gets called again on the (non-blocking) listening socket, no incoming connection is waiting and <code>accept()</code> returns immediately and sets <code>connfd</code> to -1. This happens faster then the handler for the previous connection could have called </p>\n\n<pre><code>int sock = *(int*)socket_desc;\n</code></pre>\n\n<p>and with this store the <code>-1</code>.</p>\n\n<p>To observer this effect (<strong>not to fix the issue</strong>) modify your code as follows:</p>\n\n<pre><code>int result = accept(sock_desc, (struct sockaddr *)&amp;echoClntAddr, &amp;clntSock);\nif (0 &gt; result)\n{\n  perror(\"accept() failed\");\n}\nelse\n{\n  connfd = result;\n\n  puts(\"Connection accepted\");\n\n  if( pthread_create( &amp;thr, NULL ,  connection_handler , (void*) &amp;connfd) &lt; 0)\n  {\n    ...\n</code></pre>\n\n<p>The handler then would begin like this:</p>\n\n<pre><code>    void *connection_handler(void * pv)\n    {\n      int sock = *((int*) pv);\n      fprintf(\"sock = %d\\n\", sock);\n      ...\n</code></pre>\n\n<p>To fix your issue there are two approaches:</p>\n\n<ol>\n<li><p>Misuse the thread-function's  <code>void*</code> argument to pass an <code>int</code>.</p>\n\n<pre><code>socklen_t clntSock = ...;\n...\nconnfd = accept(sock_desc, (struct sockaddr *)&amp;echoClntAddr, &amp;clntSock);\n\nif (0 &lt;= connfd)\n{\n  if (pthread_create( &amp;thr, NULL, connection_handler, (void *) connfd) &lt; 0)\n  {\n    ...\n</code></pre>\n\n<p>The handler then would begin like this:</p>\n\n<pre><code>void *connection_handler(void * pv)\n{\n  int sock = (int) pv;\n\n  ...\n</code></pre>\n\n<p>This is a common, but somewhat \"hacky\" solution, which relies on a pointer being at least as wide as an <code>int</code>.</p></li>\n<li><p>Use a seperate instance of an <code>int</code> to store the result of <code>accept()</code>.</p>\n\n<pre><code>socklen_t clntSock = ...;\n...\nconnfd = accept(sock_desc, (struct sockaddr *)&amp;echoClntAddr, &amp;clntSock);\nif (0 &lt;= connfd)\n{\n  int * pconnfd = malloc(sizeof *pconnfd);\n  if (NULL == pconnfd)\n    ... // fail and leave here\n  *pconnfd = connfd;\n  if (pthread_create(&amp;thr, NULL, connection_handler, pconnfd) &lt; 0)\n  {\n    ...\n</code></pre>\n\n<p>The handler then would begin like this:</p>\n\n<pre><code>void *connection_handler(void * pv)\n{\n  int connfd = *((int *) pv);\n  free(pv);\n\n  ...\n</code></pre>\n\n<p>This is a clean and portable approach, with the cost of an additional pair of calls to <code>malloc()</code>/<code>free()</code>.</p></li>\n</ol>\n\n<p>Other corrections in the code shown above:</p>\n\n<ul>\n<li><p>Define the variable whichs address is passed to <code>accept()</code> to be <code>socklen_t</code> as the 3rd parameter to <code>accept()</code> is defined as <code>socklen_t *</code>. If passing a pointer to something else and this \"something\" is of different size than <code>socklen_t</code> <code>accept()</code> would run into undefined behaviour.</p></li>\n<li><p>Test the outcome of <code>accept()</code> against <code>&lt;0</code> for error as <code>0</code> is a valid value for a file/socket descriptor.</p></li>\n</ul>\n"}], "owner": {"reputation": 910, "user_id": 778773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e7ae1605625e10d551d500d6a2c8543d?s=128&d=identicon&r=PG", "display_name": "Eljay", "link": "https://stackoverflow.com/users/778773/eljay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2709, "favorite_count": 0, "accepted_answer_id": 30756861, "answer_count": 1, "score": 1, "last_activity_date": 1434518711, "creation_date": 1433938835, "last_edit_date": 1434518711, "question_id": 30756210, "link": "https://stackoverflow.com/questions/30756210/unable-to-receive-data-after-connection-getting-bad-file-descriptor-error", "title": "Unable to receive data after connection getting Bad file Descriptor error", "body": "<p>I am working on a Multi-threaded Server application in C using Pthreads(Linux).\nMy system is dual boot.Windows 7 as well as Ubuntu. I restarted my PC and booted into Windows from Ubuntu, Before restarting my server application was working Fine.After i again booted to ubuntu from windows. and started my server i start getting following Error when a client connects.</p>\n\n<pre><code>recv failed: Bad file descriptor\n</code></pre>\n\n<p>Here is My code:</p>\n\n<p>Main.C</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/socket.h&gt; //for socket,AF_INET,SOCK_STREAM\n#include &lt;arpa/inet.h&gt; //for sockaddr_in\n#include &lt;string.h&gt;   //for memset()  \n#include &lt;pthread.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include \"extern.h\" \n\n#define MAX_CONNECTIONS  5\n\nint main(int argc, char** argv) {\n\n    int sock_desc = 0, connfd = 0,listenfd =0;\n    struct sockaddr_in serv_addr;\n    int clntSock; \n    struct sockaddr_in echoClntAddr; \n    unsigned int clntLen; \n    char sendBuff[1025];\n    char recvBuff[10025];\n    int n = 0;\n    pthread_t thr;\n\n\n\n    sock_desc = socket(AF_INET, SOCK_STREAM, 0); \n\n    if(sock_desc &lt; 0 )\n       dieWithError(\"Unable to open Socket\\n\");  \n\n    memset(&amp;serv_addr,0,sizeof(serv_addr)); \n\n    serv_addr.sin_family = AF_INET ;\n    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);\n    serv_addr.sin_port = htons(7024);\n\n    if(bind(sock_desc, (struct sockaddr *)&amp;serv_addr, sizeof(serv_addr)) &lt; 0) \n       dieWithError(\"bind failed\\n\");\n\n    if(listen(sock_desc,MAX_CONNECTIONS) &lt; 0)\n       dieWithError(\"listen failed\\n\");  \n\n     file = fopen(\"testServer.txt\", \"w\");\n\n      clntSock = sizeof(struct sockaddr);\n      int i =0;\n      fcntl(sock_desc, F_SETFL, fcntl(sock_desc, F_GETFL, 0) | O_NONBLOCK);\n\n      while(1)\n    {\n\n        connfd = accept(sock_desc, (struct sockaddr *)&amp;echoClntAddr,(socklen_t*)&amp;clntSock);\n\n      if(connfd &gt; 0){  \n         puts(\"Connection accepted\");\n\n        if( pthread_create( &amp;thr, NULL ,  connection_handler , (void*) &amp;connfd) &lt; 0)\n        {\n            perror(\"could not create thread\");\n            return 1;\n        }\n\n        puts(\"Handler assigned\");\n        }    \n    }\n\n    if (connfd &lt; 0)\n    {\n        perror(\"accept failed\");\n        return 1;\n    }\n\n\n       return (EXIT_SUCCESS);\n}\n\nvoid dieWithError(char *errormsg){\n     printf(\"%s\", errormsg);  \n}\n</code></pre>\n\n<p>HandleConnection.c</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;sys/socket.h&gt; \n#include &lt;unistd.h&gt; \n#include &lt;string.h&gt;\n#include \"extern.h\"\n\n\n\nvoid *connection_handler(void *socket_desc)\n{\n\n    int sock = *(int*)socket_desc;\n    t_data.t_id = sock;\n\n    int read_size;\n    char *message , client_message[2000];\n\n    while( (read_size = recv(sock , client_message , 2000 , 0)) &gt; 0 )\n    {\n\n       client_message[read_size] = '\\0';\n           t_data.msg = client_message; \n\n\n           printf(\"%s\",client_message); \n\n        memset(client_message, 0, 2000);\n    }\n\n    if(read_size == 0)\n    {\n        puts(\"Client disconnected\");\n        fflush(stdout);\n    }\n    else if(read_size == -1)\n    {\n        perror(\"recv failed\");\n    }\n\n    return 0;\n} \n</code></pre>\n\n<p>I tried by restarting my PC but same problem persists.Please Help.</p>\n"}, {"tags": ["c", "pipe", "fifo"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1433938842, "post_id": 30756098, "comment_id": 49565415, "body": "In the parent, try reading again from the pipe before closing, and see what it returns."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1433939697, "post_id": 30756098, "comment_id": 49566048, "body": "Did you mean <code>STDIN_FILENO</code> instead of <code>0</code> and <code>STDOUT_FILENO</code> instead of <code>1</code>?"}, {"owner": {"reputation": 203, "user_id": 4395561, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/d6b7973c9ffda0332fa53b93e67b507a?s=128&d=identicon&r=PG&f=1", "display_name": "mario razzu", "link": "https://stackoverflow.com/users/4395561/mario-razzu"}, "edited": false, "score": 0, "creation_date": 1433943773, "post_id": 30756098, "comment_id": 49569335, "body": "thanks , I added an update in the question. Thank for your time"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433944129, "post_id": 30756098, "comment_id": 49569653, "body": "@mariorazzu: You should not extend your question! Open up a new one instead. This is neither a tutorial, nor a discussion forum - please understand! If an answer did solve your original question, just accept. However, read <a href=\"http://man7.org/linux/man-pages/man7/pipe.7.html\" rel=\"nofollow noreferrer\">here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 203, "user_id": 4395561, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/d6b7973c9ffda0332fa53b93e67b507a?s=128&d=identicon&r=PG&f=1", "display_name": "mario razzu", "link": "https://stackoverflow.com/users/4395561/mario-razzu"}, "edited": false, "score": 0, "creation_date": 1433943768, "post_id": 30756242, "comment_id": 49569328, "body": "thanks , I added an update in the question. Thank for your time"}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 1, "last_activity_date": 1433939505, "last_edit_date": 1433939505, "creation_date": 1433938944, "answer_id": 30756242, "question_id": 30756098, "link": "https://stackoverflow.com/questions/30756098/behavior-of-pipe-c/30756242#30756242", "title": "Behavior of Pipe C", "body": "<p>It should include \"once all written data has been read\". Otherwise a pipe would not make much sense. Or would require to explicitly signal to the writer the reader has taken all data from the pipe before closing - breaking its file semantics.</p>\n"}, {"comments": [{"owner": {"reputation": 203, "user_id": 4395561, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/d6b7973c9ffda0332fa53b93e67b507a?s=128&d=identicon&r=PG&f=1", "display_name": "mario razzu", "link": "https://stackoverflow.com/users/4395561/mario-razzu"}, "edited": false, "score": 0, "creation_date": 1433943763, "post_id": 30756268, "comment_id": 49569318, "body": "thanks , I added an update in the question. Thank for your time"}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 0, "last_activity_date": 1434001425, "last_edit_date": 1434001425, "creation_date": 1433939005, "answer_id": 30756268, "question_id": 30756098, "link": "https://stackoverflow.com/questions/30756098/behavior-of-pipe-c/30756268#30756268", "title": "Behavior of Pipe C", "body": "<p>This is true for <em>empty</em> pipe as POSIX says:</p>\n\n<blockquote>\n  <p>When attempting to read from an empty pipe or FIFO:</p>\n\n<pre><code>If no process has the pipe open for writing, read() shall return 0 to indicate end-of-file\n</code></pre>\n</blockquote>\n\n<hr>\n\n<p>Answer update 1:</p>\n\n<p>Pipes (in normal blocking mode) provide synchronization at both ends : reader is blocked while pipe is empty, and writer is blocked while pipe is full.</p>\n\n<p>You have no need to ensure writer writes before reader reads or something like that. If the reader tries to read an empty pipe it will be blocked until : either someone else writes in the pipe or the last writer closes its end.</p>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433947072, "post_id": 30756427, "comment_id": 49571978, "body": "That is only partially true. Once the parent process reads from the pipe, it will block. So the pipe creates implicit synchronization. Well, that is actually its purpose."}, {"owner": {"reputation": 1602, "user_id": 982375, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ab160cb7a0f652e4527dc2be4fc40c18?s=128&d=identicon&r=PG", "display_name": "Philipp Murry", "link": "https://stackoverflow.com/users/982375/philipp-murry"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433951306, "post_id": 30756427, "comment_id": 49575214, "body": "Thats true. Still you can&#39;t assert that the pipe is closed when it&#39;s read"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433952111, "post_id": 30756427, "comment_id": 49575780, "body": "For the read-end it makes actually no difference. It will only return 0 if there is no data inside <b>and</b> it is closed from the write end (thus ensuring there will be no further data). So if reading 0, you very well know the write-side has passed the <code>close();</code> statement for the pipe: inherent synchronisation."}, {"owner": {"reputation": 1602, "user_id": 982375, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ab160cb7a0f652e4527dc2be4fc40c18?s=128&d=identicon&r=PG", "display_name": "Philipp Murry", "link": "https://stackoverflow.com/users/982375/philipp-murry"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1433961179, "post_id": 30756427, "comment_id": 49581506, "body": "Yes, I just mentioned it to point it out to the OP, who stated: &quot;but in the code(in the parent part) , before read function the write part has close&quot;"}], "tags": [], "owner": {"reputation": 1602, "user_id": 982375, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ab160cb7a0f652e4527dc2be4fc40c18?s=128&d=identicon&r=PG", "display_name": "Philipp Murry", "link": "https://stackoverflow.com/users/982375/philipp-murry"}, "is_accepted": false, "score": 0, "last_activity_date": 1433939432, "creation_date": 1433939432, "answer_id": 30756427, "question_id": 30756098, "link": "https://stackoverflow.com/questions/30756098/behavior-of-pipe-c/30756427#30756427", "title": "Behavior of Pipe C", "body": "<p>First of all, you dont know whether the pipe was closed when the parent reads from it. Since there are two proccesses involved, the scheduler decides which process runs next and for how long - not the order of your code.</p>\n\n<p>Secondly, as already said, the string written to the pipe is still in it's buffer. Thus, the parent will read everything that's in the buffer before it returns EOF.</p>\n"}], "owner": {"reputation": 203, "user_id": 4395561, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/d6b7973c9ffda0332fa53b93e67b507a?s=128&d=identicon&r=PG&f=1", "display_name": "mario razzu", "link": "https://stackoverflow.com/users/4395561/mario-razzu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1434001425, "creation_date": 1433938547, "last_edit_date": 1433943647, "question_id": 30756098, "link": "https://stackoverflow.com/questions/30756098/behavior-of-pipe-c", "title": "Behavior of Pipe C", "body": "<p>I have this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;signal.h&gt;\n#define READ 0\n#define WRITE 1\n\nchar* phrase = \"Hello\";\n\nvoid PIPE(){\n\n    int fd [2], bytesRead;\n    char message [100]; /* Parent process' message buffer */\n    pipe (fd); /*Create an unnamed pipe */\n\n    if (fork () == 0) /* Child, writer */\n    {\n        close(fd[READ]); /* Close unused end */\n        write (fd[WRITE],phrase, strlen (phrase) + 1); \n        close (fd[WRITE]); /* Close used end*/\n    }\n    else /* Parent, reader*/\n    {\n        close (fd[WRITE]); /* Close unused end */\n        bytesRead = read (fd[READ], message, 100);\n        printf (\"Read %d bytes: %s\\n\", bytesRead, message); /* Send */\n        close (fd[READ]); /* Close used end */\n    }\n}\n</code></pre>\n\n<p>I'm studying the Pipe in C , and my book says:</p>\n\n<pre><code>If a process reads from a pipe whose write end has been closed, the read () returns a 0, indicating end-of-input.\n</code></pre>\n\n<p>but in the code(in the parent part) , before read function the write part has close and the read function doesn't return 0 but 5(lenght of Hello).</p>\n\n<p>what is wrong?</p>\n\n<p>thank for your time</p>\n\n<p>UPDATE 1:</p>\n\n<p>I have another question for you(I understand the first problem ):</p>\n\n<p>at the beginning if the reader reads empty pipe, the read function returns 0, but how can I be sure this is the first writer to start and then after the reader ?</p>\n"}, {"tags": ["c++", "c", "assembly", "gdb", "benchmarking"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1433940202, "post_id": 30755671, "comment_id": 49566421, "body": "If there are illegal instructions in a program, how do you expect to turn it into something that makes sense!? If there are illegal instructions, something went terribly wrong and did so for a reason. You can&#39;t simply replace such instructions with NOP and pretend that everything is fine. You&#39;ll never get that to execute again in a meaningful way."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433947737, "post_id": 30755671, "comment_id": 49572536, "body": "@Lundin sounds like the illegal instructions are actually legal for the specific simulator"}, {"owner": {"reputation": 972, "user_id": 2328163, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LPn2w.jpg?s=128&g=1", "display_name": "mewais", "link": "https://stackoverflow.com/users/2328163/mewais"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433948222, "post_id": 30755671, "comment_id": 49572961, "body": "@Lundin I did change it, and It DID work. such instructions do not alter CPU operations and so changing them would actually leave everything fine! It is executing in a meaningful way!"}], "answers": [{"comments": [{"owner": {"reputation": 972, "user_id": 2328163, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LPn2w.jpg?s=128&g=1", "display_name": "mewais", "link": "https://stackoverflow.com/users/2328163/mewais"}, "edited": false, "score": 0, "creation_date": 1433948215, "post_id": 30756075, "comment_id": 49572953, "body": "Thanks a lot, This helped, I was able to use hexedit to change the needed instructions, It now works fine."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": true, "score": 2, "last_activity_date": 1433938482, "creation_date": 1433938482, "answer_id": 30756075, "question_id": 30755671, "link": "https://stackoverflow.com/questions/30755671/how-to-find-illegal-instructions-in-a-program/30756075#30756075", "title": "How to find illegal instructions in a program?", "body": "<p>Your hex dump is just a bunch of function names so it doesn't tell us much. And you didn't mention an operating system either...</p>\n\n<p>I'll assume if you can run <code>gdb</code> on it, you can use GNU binutils too.</p>\n\n<p>For a start you can try <code>objdump -h myprog</code>. It will give a list of sections with their sizes, load addresses, and file offsets. If it tells you that there's a section starting at <code>401000</code> with file offset <code>400</code> and size at least <code>af4</code>, then the runtime location <code>401af4</code> is at file offset <code>401af4-401000+400</code>.</p>\n\n<p>If the offending address is in a shared library or if the program has done any remapping of its address space, the task will be harder.</p>\n"}, {"comments": [{"owner": {"reputation": 972, "user_id": 2328163, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LPn2w.jpg?s=128&g=1", "display_name": "mewais", "link": "https://stackoverflow.com/users/2328163/mewais"}, "edited": false, "score": 0, "creation_date": 1433948332, "post_id": 30759934, "comment_id": 49573035, "body": "I tried that and It worked, I found the illegal instructions has twice the size of a NOP instruction, so I replaced each of them with two NOPs. It worked fine."}], "tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": false, "score": 1, "last_activity_date": 1433947979, "creation_date": 1433947979, "answer_id": 30759934, "question_id": 30755671, "link": "https://stackoverflow.com/questions/30755671/how-to-find-illegal-instructions-in-a-program/30759934#30759934", "title": "How to find illegal instructions in a program?", "body": "<p>You didnt specify the processor nor operating system.  Looks like x86 which makes this much harder as it is a variable length instruction set, upon the first problem instruction the disassembler if you use one can get confused, depends on the disassembler.  </p>\n\n<p>Try to find out what the specific illegal instructions are that the simulator responds to, find those bit patterns in the binary, interate around disassembling and if those patterns are found replacing them with nops and repeating, not foolproof, and depending on how this binary was made there may be some attempts to prevent such hacking.</p>\n\n<p>Certainly a non-trivial task...</p>\n"}], "owner": {"reputation": 972, "user_id": 2328163, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/LPn2w.jpg?s=128&g=1", "display_name": "mewais", "link": "https://stackoverflow.com/users/2328163/mewais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 0, "accepted_answer_id": 30756075, "answer_count": 2, "score": 3, "last_activity_date": 1433947979, "creation_date": 1433937502, "question_id": 30755671, "link": "https://stackoverflow.com/questions/30755671/how-to-find-illegal-instructions-in-a-program", "title": "How to find illegal instructions in a program?", "body": "<p>I have a benchmark which is meant to run on a specific simulator, Some instructions where added to the benchmark to communicate with the simulator(not perform CPU operations), like dump stats or reset stats and so on.</p>\n\n<p>Now I need to run the same benchmarks on another simulator, and there is really no other work around, I have to use the same binaries, of course it doesn't work as it generates a <code>SIGILL</code> or an <code>Illegal Instruction</code> error.</p>\n\n<p>What I want now is to be able to <strong>remove</strong> the bad instructions directly from the executable binary (no source code, can't recompile, can't setup from somewhere else) and replace them with <code>NOP</code>s. So I ran the benchmark in <code>gdb</code> and used <code>layout asm</code> command to find the addresses of bad instructions. Here is the output:\n<img src=\"https://i.stack.imgur.com/3GBf5.png\" alt=\"enter image description here\"></p>\n\n<p>My question might seem a bit stupid but now I opened the binary in a text editor, and tried to use the addresses I got from <code>gdb</code> to find the illegal instructions in the binary, but no luck. the size of the binary file is about 1MB while the addresses start from about 4MB. How can I find the illegal instructions in the binary using the addresses I got from <code>gdb</code>? Here is a snippet from the binary showing its format:</p>\n\n<pre><code>616c 6967 6e00 5f5f 7265 6769 7374 6572\n5f66 7261 6d65 5f69 6e66 6f00 5f49 4f5f\n7664 7072 696e 7466 005f 5f70 7468 7265\n6164 5f73 6574 7370 6563 6966 6963 5f69\n6e74 6572 6e61 6c00 7763 7274 6f6d 6200\n5f64 6c5f 636f 7272 6563 745f 6361 6368\n655f 6964 005f 646c 5f73 6f72 745f 6669\n6e69 005f 5f6e 6577 5f66 6f70 656e 0063\n6c6f 7365 005f 5f73 7472 6e63 7079 5f73\n7365 3200 5f5f 6c69 6263 5f63 6f6e 6e65\n6374 005f 5f77 6d65 6d63 7079 005f 494f\n5f69 7465 725f 6e65 7874 006d 355f 7061\n6e69 6300 5f64 6c5f 636c 6f73 655f 776f\n726b 6572 005f 646c 5f70 6167 6573 697a\n6500 5f5f 7661 6c6c 6f63 005f 5f6d 656d\n616c 6967 6e5f 686f 6f6b 005f 5f70 7468\n7265 6164 5f69 6e69 745f 7374 6174 6963\n5f74 6c\n</code></pre>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1433936843, "post_id": 30755339, "comment_id": 49564002, "body": "Instead of fiddling with the increment/decrement operators, why not simply do <code>*(X + 1) = &#39;\\0&#39;; return X;</code>?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1433936886, "post_id": 30755339, "comment_id": 49564038, "body": "local/stack: gone.  Heap - not gone.  If instances created on the heap with &#39;new&#39; were to be auto-deleted on function returns, there would be no way to extend the lifetime of objects beyond that of the function that created them.  That would be crippling for many apps, eg. GUI frameworks."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1433937002, "post_id": 30755339, "comment_id": 49564130, "body": "use a <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code></a> and don&#39;t worry about it."}, {"owner": {"reputation": 367, "user_id": 4931387, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rg0Jh.jpg?s=128&g=1", "display_name": "alwaystudent", "link": "https://stackoverflow.com/users/4931387/alwaystudent"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1433954608, "post_id": 30755339, "comment_id": 49577384, "body": "@Joachim Pileborg: what is the simplicity criteria?if i  think form 1 is more simple..."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1433955948, "post_id": 30755339, "comment_id": 49578217, "body": "Actually I would like to change my comment to <code>X[1] = &#39;\\0&#39;;</code> which is even simpler and much more clear. Same with the first assignment, <code>X[0]= &#39;C&#39;;</code>., it&#39;s much more clear. As for the simplicity bit, why do three operations (increment, assign, decrement) when two is enough (array indexing and assignment). And it&#39;s also one less source of an error. What if you added <i>two</i> characters? Then you need to decrement twice or return <code>X - 2</code>, which works but is  not very clear or obvious."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1434072292, "post_id": 30755339, "comment_id": 49637208, "body": "&quot;... a pointer that defined in function scope is not OK to be return&quot; - this just does not make any sense. It is completely irrelevant where the pointer is defined: in function scope or anywhere else. What matters is <i>where the pointer points to</i>, i.e. the lifetime of the object pointed by that pointer. You need to get your terminology in order, since otherwise any explanations will only deepen your misconceptions."}, {"owner": {"reputation": 367, "user_id": 4931387, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rg0Jh.jpg?s=128&g=1", "display_name": "alwaystudent", "link": "https://stackoverflow.com/users/4931387/alwaystudent"}, "edited": false, "score": 0, "creation_date": 1435306969, "post_id": 30755339, "comment_id": 50156096, "body": "@Joachin pileborg: questions is edited according to your explanation."}], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 4931387, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rg0Jh.jpg?s=128&g=1", "display_name": "alwaystudent", "link": "https://stackoverflow.com/users/4931387/alwaystudent"}, "edited": false, "score": 0, "creation_date": 1433956469, "post_id": 30755467, "comment_id": 49578563, "body": "for this code, in run time, let  X=0xffff1234.  after. &#39;new &#39; line , for example, could we derefrence. 0xffff1234 outside the block , without potentially hidden error? could we derefrence A?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 367, "user_id": 4931387, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rg0Jh.jpg?s=128&g=1", "display_name": "alwaystudent", "link": "https://stackoverflow.com/users/4931387/alwaystudent"}, "edited": false, "score": 1, "creation_date": 1433956639, "post_id": 30755467, "comment_id": 49578662, "body": "@alwaystudent That&#39;s how pointers work, when you return <code>X</code> in the function, and assign it to <code>A</code> in the calling function, then <code>A</code> will be the same value as <code>X</code> and point to the same memory. The lifetime of dynamically allocated memory is until it&#39;s explicitly deallocated."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1433936956, "creation_date": 1433936956, "answer_id": 30755467, "question_id": 30755339, "link": "https://stackoverflow.com/questions/30755339/is-returning-a-heap-allocated-pointer-from-function-ok/30755467#30755467", "title": "Is returning a heap-allocated pointer from function OK?", "body": "<p>Besides the weird increment/decrement fiddling, the code is okay.</p>\n\n<p>The variable <code>X</code> goes out of scope when the function returns, but that's only the actual variable and not what it points to.</p>\n\n<p>Pointers are basically simple integers, whose contents just happens to be an address to somewhere in memory, and treated specially by the compiler. What happens when the function returns is that the <em>contents</em> of the variable <code>X</code> is copied before the variable goes out of scope. Then the copy of the contents (the actual memory address) is again copied, this time to the variable <code>A</code> in the calling function.</p>\n"}, {"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 1, "last_activity_date": 1433937025, "creation_date": 1433937025, "answer_id": 30755489, "question_id": 30755339, "link": "https://stackoverflow.com/questions/30755339/is-returning-a-heap-allocated-pointer-from-function-ok/30755489#30755489", "title": "Is returning a heap-allocated pointer from function OK?", "body": "<p>C++ is not garbage collected.    <code>X</code> in <code>func()</code> is not deallocated until the <code>delete [] A</code> statement in <code>main()</code>.</p>\n\n<p>The shenanigans with incrementing and decrementing <code>X</code> do not change that (unless they cause <code>X</code> to point outside the memory allocated with operator <code>new</code>, which would result in undefined behaviour).</p>\n"}, {"comments": [{"owner": {"reputation": 367, "user_id": 4931387, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rg0Jh.jpg?s=128&g=1", "display_name": "alwaystudent", "link": "https://stackoverflow.com/users/4931387/alwaystudent"}, "edited": false, "score": 0, "creation_date": 1433955502, "post_id": 30755526, "comment_id": 49577920, "body": "Thanks for usefull  link,but the point is we left the (function) block and may be lose variable behavior even its memory allocation exist"}, {"owner": {"reputation": 227, "user_id": 3068951, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IrRay.jpg?s=128&g=1", "display_name": "ritzz.soni", "link": "https://stackoverflow.com/users/3068951/ritzz-soni"}, "reply_to_user": {"reputation": 367, "user_id": 4931387, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rg0Jh.jpg?s=128&g=1", "display_name": "alwaystudent", "link": "https://stackoverflow.com/users/4931387/alwaystudent"}, "edited": false, "score": 0, "creation_date": 1433956558, "post_id": 30755526, "comment_id": 49578618, "body": "sorry but i didn&#39;t get what exactly you mean by variable behavior, you asked that can I return the pointer from function in this case. so as its memory is allocated from heap you can and you can use that pointer anywhere, it won&#39;t  change."}], "tags": [], "owner": {"reputation": 227, "user_id": 3068951, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IrRay.jpg?s=128&g=1", "display_name": "ritzz.soni", "link": "https://stackoverflow.com/users/3068951/ritzz-soni"}, "is_accepted": false, "score": 1, "last_activity_date": 1433937094, "creation_date": 1433937094, "answer_id": 30755526, "question_id": 30755339, "link": "https://stackoverflow.com/questions/30755339/is-returning-a-heap-allocated-pointer-from-function-ok/30755526#30755526", "title": "Is returning a heap-allocated pointer from function OK?", "body": "<p>when you allocate memory using <code>new</code>, it allocates memory from heap so there is no harm in returning its pointer from any other function.</p>\n\n<p>to read more about <code>new()</code> you can go to this link.\n<a href=\"http://www.tutorialspoint.com/cplusplus/cpp_dynamic_memory.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/cplusplus/cpp_dynamic_memory.htm</a></p>\n"}, {"tags": [], "owner": {"reputation": 2394, "user_id": 4952137, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c40d9f94080a45d91ee151dfe960cee3?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Sparber", "link": "https://stackoverflow.com/users/4952137/thomas-sparber"}, "is_accepted": false, "score": 1, "last_activity_date": 1485336380, "last_edit_date": 1485336380, "creation_date": 1433937394, "answer_id": 30755627, "question_id": 30755339, "link": "https://stackoverflow.com/questions/30755339/is-returning-a-heap-allocated-pointer-from-function-ok/30755627#30755627", "title": "Is returning a heap-allocated pointer from function OK?", "body": "<p>Heap allocations are not destoyed until you do so. But it is better to deallocate the Memory where it was allocated (if possible). This can prevent Memory leaks. This could look like the following:</p>\n\n<pre><code>#include\"stdio.h\"\nvoid func(char *X)\n{\n    //I also think it Looks better to use it as an array\n    X[0]='C';\n    X[1]='\\0';\n}\nmain()\n{\n    char * A=new char[10];    //Allocate here\n    func(A);\n    puts(A);\n    delete[] A;               //Deallocate here\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "is_accepted": true, "score": 6, "last_activity_date": 1433938330, "creation_date": 1433938330, "answer_id": 30756017, "question_id": 30755339, "link": "https://stackoverflow.com/questions/30755339/is-returning-a-heap-allocated-pointer-from-function-ok/30756017#30756017", "title": "Is returning a heap-allocated pointer from function OK?", "body": "<p>As others already pointed out, technically, the code is okay.<br>\nHowever, the real problem with the code is the function signature <code>char * func()</code>.\nIt only specifies that it will return a pointer to a char.  That pointer can be </p>\n\n<ul>\n<li>a normal pointer to a char variable</li>\n<li>a pointer to a char array</li>\n<li>a pointer to a c-style string  </li>\n</ul>\n\n<p>The pointer can point to </p>\n\n<ul>\n<li>static memory</li>\n<li>heap-allocated memory that will be freed somewhere else </li>\n<li>heap-allocated memory that you are suppose to free yourself.</li>\n</ul>\n\n<p>There is no way of knowing what to do unless you want to trust the documentation or to investigate in possibly a lot of code (functions calling functions calling functions...).</p>\n\n<p>This can be avoided by returning </p>\n\n<ul>\n<li>a char</li>\n<li>an std::string</li>\n<li>a container</li>\n<li>a smart pointer.</li>\n</ul>\n\n<p><strong>Manual memory management is hard to get right within a complete application and should never be your main concern, so it should be avoided and not hidden by functions returning pointers.</strong></p>\n"}], "owner": {"reputation": 367, "user_id": 4931387, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rg0Jh.jpg?s=128&g=1", "display_name": "alwaystudent", "link": "https://stackoverflow.com/users/4931387/alwaystudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2722, "favorite_count": 1, "accepted_answer_id": 30756017, "answer_count": 5, "score": 4, "last_activity_date": 1485336380, "creation_date": 1433936641, "last_edit_date": 1485335322, "question_id": 30755339, "link": "https://stackoverflow.com/questions/30755339/is-returning-a-heap-allocated-pointer-from-function-ok", "title": "Is returning a heap-allocated pointer from function OK?", "body": "<p>When we return from function, if return value is a pointer, it must be define as static. Is this true for heap memory allocated pointer (such as <code>new</code>/<code>malloc</code> pointers),too?</p>\n\n<p>consider this example:</p>\n\n<pre><code>#include\"stdio.h\"\nchar * func()\n{\n    char * X=new char[10];\n    X[0]='C';\n    x[1]='\\0';\n    return X;//is it a good return from function?\n}\nmain()\n{\n    char * A=func();\n    puts(A);\n    delete[] A;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "switch-statement", "comparison"], "comments": [{"owner": {"reputation": 3769, "user_id": 1305119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4sjsk.jpg?s=128&g=1", "display_name": "Suresh Kumar Veluswamy", "link": "https://stackoverflow.com/users/1305119/suresh-kumar-veluswamy"}, "edited": false, "score": 0, "creation_date": 1433936097, "post_id": 30755010, "comment_id": 49563469, "body": "you should not use = for string comparison"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1433936069, "creation_date": 1433936069, "answer_id": 30755089, "question_id": 30755010, "link": "https://stackoverflow.com/questions/30755010/why-the-following-code-gives-the-first-mobile-no-irrespective-of-name/30755089#30755089", "title": "why the following code gives the first mobile no. irrespective of name", "body": "<p>You cannot <strong>compare</strong> <em>strings</em> using <code>=</code> (or even by <code>==</code>, for that matter) operator. You need to use <a href=\"http://linux.die.net/man/3/strcmp\" rel=\"nofollow\"><code>strcmp()</code></a> for that.</p>\n\n<p>In your code, inside <code>mobileno()</code> function, </p>\n\n<pre><code>if( s=\"katrina\" )\n</code></pre>\n\n<p>is <em>essentially</em> trying to <em>assign</em> the base address of the <em>string</em> literal <code>\"katrina\"</code> to <code>s</code>. It is nowhere near a <em>comparison</em>.</p>\n\n<p>That said,</p>\n\n<ol>\n<li>Never use <code>gets()</code>, it suffer from buffer overflow problem. Use the safer alternative, <a href=\"http://linux.die.net/man/3/fgets\" rel=\"nofollow\"><code>fgets()</code></a></li>\n<li>Recommended signature of <code>main()</code>  is <code>int main(void)</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 14825, "user_id": 535646, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/yGyps.jpg?s=128&g=1", "display_name": "Tilman Hausherr", "link": "https://stackoverflow.com/users/535646/tilman-hausherr"}, "is_accepted": false, "score": 1, "last_activity_date": 1433936164, "creation_date": 1433936164, "answer_id": 30755139, "question_id": 30755010, "link": "https://stackoverflow.com/questions/30755010/why-the-following-code-gives-the-first-mobile-no-irrespective-of-name/30755139#30755139", "title": "why the following code gives the first mobile no. irrespective of name", "body": "<p>this code</p>\n\n<pre><code>if( s=\"katrina\" )\n</code></pre>\n\n<p>assigns \"katrina\" to s and the result is not 0, i.e. \"true\". To compare, use strcmp instead. While you can compare values with \"==\", don't use it for strings as it would only compare the address, and two identical strings could still have different addresses.</p>\n"}, {"tags": [], "owner": {"reputation": 3785, "user_id": 4427938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M6mua.png?s=128&g=1", "display_name": "Ayushi Jha", "link": "https://stackoverflow.com/users/4427938/ayushi-jha"}, "is_accepted": false, "score": 0, "last_activity_date": 1433936230, "creation_date": 1433936230, "answer_id": 30755161, "question_id": 30755010, "link": "https://stackoverflow.com/questions/30755010/why-the-following-code-gives-the-first-mobile-no-irrespective-of-name/30755161#30755161", "title": "why the following code gives the first mobile no. irrespective of name", "body": "<p>Two problems in your <code>if</code> conditions:</p>\n\n<pre><code>if( s=\"katrina\" )\n</code></pre>\n\n<p><strong>Assignment instead of equality</strong> :</p>\n\n<p><code>a=b</code> means assigning the value of <code>b</code> to <code>a</code>.</p>\n\n<p><code>a==b'</code> means checking if both <code>a</code> and <code>b</code> have same values.</p>\n\n<p><strong>Char array comparison</strong>: Use strcmp() instead:</p>\n\n<pre><code> if( strcmp(s,\"katrina\")==0 )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1433937234, "last_edit_date": 1433937234, "creation_date": 1433936631, "answer_id": 30755336, "question_id": 30755010, "link": "https://stackoverflow.com/questions/30755010/why-the-following-code-gives-the-first-mobile-no-irrespective-of-name/30755336#30755336", "title": "why the following code gives the first mobile no. irrespective of name", "body": "<p>In this function</p>\n\n<pre><code>int mobileno(char s[20]){\n\n\n    if( s=\"katrina\" )\n    {return 1;}else{\n    if( s=\"shahid\" ){return 2;}else{\n    if( s=\"ranbir\" ){return 3;}else{\n    if( s=\"sharukh\" ){return 4;}else{\n    if( s=\"hema\" ){return 5;}else{\n    if( s=\"amitabh\" ){return 6;}else{\n    if( s=\"shashnk\" ){return 7;}else{\n    if( s=\"raj\" ){return 8;}else{\n    if( s=\"aishwarya\" ){return 0;}else{\n\n        return 9;}}}}}}}}};\n\n    };\n</code></pre>\n\n<p>there is used the assignment operator <code>=</code> that assigns the address of the first characters of string literals in if conditions. For example in thsi statement</p>\n\n<pre><code>    if( s=\"katrina\" )\n</code></pre>\n\n<p>pointer s is assigned to the address of the first character of string literal \"katrina\" that is evidently is not equal to NULL. So the condition is alway true.:)</p>\n\n<p>If you want to compare to strings you should use standard C function <code>strcmp</code> declared in header <code>&lt;string.h&gt;</code></p>\n\n<p>Rewrite the function the following way</p>\n\n<pre><code>#include &lt;string.h&gt;\n\n//...\n\nint mobileno( const char *s )\n{\n    const char *name[] = \n    {\n        \"aishwarya\", \"katrina\", \"shahid\", \"ranbir\", \"sharukh\",\n        \"hema\", \"amitabh\", \"shashnk\", \"raj\"\n    };\n    const size_t N = sizeof( name ) / sizeof( *name );\n\n    size_t i = 0;\n\n    while ( i &lt; N &amp;&amp; strcmp( s, name[i] ) != 0 ) i++;\n\n    return i;\n}\n</code></pre>\n\n<p>Take into account that function <code>gets</code> is not a C Standard function any more because it is unsafe. Use instead function <code>fgets</code>.</p>\n"}], "owner": {"reputation": 17, "user_id": 4994564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62db2f47feadbacb60974a4e57a785d9?s=128&d=identicon&r=PG&f=1", "display_name": "Soham Test", "link": "https://stackoverflow.com/users/4994564/soham-test"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 30755089, "answer_count": 4, "score": -6, "last_activity_date": 1433937234, "creation_date": 1433935853, "last_edit_date": 1433936848, "question_id": 30755010, "link": "https://stackoverflow.com/questions/30755010/why-the-following-code-gives-the-first-mobile-no-irrespective-of-name", "title": "why the following code gives the first mobile no. irrespective of name", "body": "<p>Please explain why the following code gives the first mobile no. irrespective of entered name:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nint mobileno(char[]);\n\nint main(){\n\n char input[20];\n gets(input); \n printf(\"%s\",input);          \n int x;\n x = mobileno(input);  \nprintf(\"%d\",x);\nswitch(x){\n          case 0:printf(\"7255222319\");break;\n          case 1:printf(\"9404521113\");break;\n          case 2:printf(\"9326513553\");break;\n          case 3:printf(\"9845621611\");break;\n          case 4:printf(\"4556312390\");break;\n          case 5:printf(\"9245178190\");break;\n          case 6:printf(\"9214188214\");break;\n          case 7:printf(\"7014773244\");break;\n          case 8:printf(\"7898888044\");break; \n\n          };    \n\n    getch(); \n    return 0;\n}\n\nint mobileno(char s[20]){\n\n\n    if( s=\"katrina\" )\n    {return 1;}else{\n    if( s=\"shahid\" ){return 2;}else{\n    if( s=\"ranbir\" ){return 3;}else{\n    if( s=\"sharukh\" ){return 4;}else{\n    if( s=\"hema\" ){return 5;}else{\n    if( s=\"amitabh\" ){return 6;}else{\n    if( s=\"shashnk\" ){return 7;}else{\n    if( s=\"raj\" ){return 8;}else{\n    if( s=\"aishwarya\" ){return 0;}else{\n\n        return 9;}}}}}}}}};\n\n    };\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1408, "user_id": 1988249, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/10a828baf476a25167bf4b44bd2c46d8?s=128&d=identicon&r=PG", "display_name": "Ginu Jacob", "link": "https://stackoverflow.com/users/1988249/ginu-jacob"}, "edited": false, "score": 4, "creation_date": 1433936057, "post_id": 30754904, "comment_id": 49563453, "body": "The question is not very clear did you mean copying by traversing through the structure?"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 1408, "user_id": 1988249, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/10a828baf476a25167bf4b44bd2c46d8?s=128&d=identicon&r=PG", "display_name": "Ginu Jacob", "link": "https://stackoverflow.com/users/1988249/ginu-jacob"}, "edited": false, "score": 0, "creation_date": 1433936122, "post_id": 30754904, "comment_id": 49563486, "body": "@GinuJacob Yeah.. I meant that I want to copy some part of the structure based on the type"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1433936126, "post_id": 30754904, "comment_id": 49563490, "body": "Question unclear.   Do you mean that you want to copy all members of the struct, except <code>p</code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1433936152, "post_id": 30754904, "comment_id": 49563510, "body": "Use <code>offsetof(struct test, x)</code> (C99, gcc), not <code>sizeof(stuct a)</code>. They might not be guaranteed equal, because of padding/alignment."}, {"owner": {"reputation": 9386, "user_id": 997813, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e917968317abb617b39d12613b1975a9?s=128&d=identicon&r=PG", "display_name": "Arjun Sreedharan", "link": "https://stackoverflow.com/users/997813/arjun-sreedharan"}, "edited": false, "score": 0, "creation_date": 1433936296, "post_id": 30754904, "comment_id": 49563603, "body": "I want to bring to your notice that <code>memcpy()</code> has no cognizance of the padding that structs may contain."}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433936325, "post_id": 30754904, "comment_id": 49563619, "body": "@Olaf Yeah that&#39;s what I was asking for..Can we move something like what you have shown ? Does that take care of padding and all?"}, {"owner": {"reputation": 9386, "user_id": 997813, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e917968317abb617b39d12613b1975a9?s=128&d=identicon&r=PG", "display_name": "Arjun Sreedharan", "link": "https://stackoverflow.com/users/997813/arjun-sreedharan"}, "edited": false, "score": 1, "creation_date": 1433936343, "post_id": 30754904, "comment_id": 49563629, "body": "I didn&#39;t really understand your question. Why doesn&#39;t <code>q-&gt;x = ptr-&gt;x;</code> suffice?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 9386, "user_id": 997813, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e917968317abb617b39d12613b1975a9?s=128&d=identicon&r=PG", "display_name": "Arjun Sreedharan", "link": "https://stackoverflow.com/users/997813/arjun-sreedharan"}, "edited": false, "score": 1, "creation_date": 1433936943, "post_id": 30754904, "comment_id": 49564088, "body": "@ArjunSreedharan: Because &quot;<i>... I don&#39;t know the members in it.</i>&quot;"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1433937065, "post_id": 30754904, "comment_id": 49564175, "body": "@alk Thanks for pitching in.. Can we do what I am trying to do? Just going by the pointer and the offset by size? I have 2 things 1. Pointer 2. type. I want to copy out the structure from <code>ptr + offset(type)</code>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1433937197, "post_id": 30754904, "comment_id": 49564270, "body": "Just see the two answers posted so far."}], "answers": [{"comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1433937229, "post_id": 30755269, "comment_id": 49564302, "body": "Thanks for your inputs"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 0, "creation_date": 1433938597, "post_id": 30755269, "comment_id": 49565221, "body": "@Gopi: I added another aspect, which renders your solution dangerous."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 5, "last_activity_date": 1433937443, "last_edit_date": 1495540325, "creation_date": 1433936475, "answer_id": 30755269, "question_id": 30754904, "link": "https://stackoverflow.com/questions/30754904/moving-pointer-to-desired-location/30755269#30755269", "title": "Moving pointer to desired location", "body": "<p>Use <code>offsetof(struct test, x)</code> (C99, gcc), not <code>sizeof(stuct a *)</code>. They are not guaranteed equal, because of padding/alignment. <strong>Caution:</strong> As a result of padding, using <code>sizeof(..)</code> can result in <em>undefined behaviour</em>, as there are copied too many chars.</p>\n\n<p><code>offsetof(&lt;type&gt;, &lt;member&gt;)</code> returns the offset of  from the start of . So, <code>sizef(struct test) - offsetof(struct test, x)</code> yields the number of <code>char</code>s to copy all fields, starting with <code>x</code>.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7180290/how-do-you-use-offsetof-on-a-struct\">Just read here for more details</a></p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 4, "last_activity_date": 1433937046, "last_edit_date": 1433937046, "creation_date": 1433936491, "answer_id": 30755275, "question_id": 30754904, "link": "https://stackoverflow.com/questions/30754904/moving-pointer-to-desired-location/30755275#30755275", "title": "Moving pointer to desired location", "body": "<p>I think the best way would be to use <code>offsetof</code></p>\n\n<pre><code>memcpy(&amp;(q-&gt;x),&amp;(ptr-&gt;x),sizeof(struct test)-offsetof(struct test, x));\n</code></pre>\n\n<p>Because if first element was a little different, you could have alignment problems, whereas offsetof takes care of alignment for you.</p>\n\n<p>Of course, alignement problems on a pointer should not occur on common architecture, but I think that <code>offsetof</code> is better practice anyway</p>\n"}], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 2, "answer_count": 2, "score": 3, "last_activity_date": 1433937443, "creation_date": 1433935573, "last_edit_date": 1433936252, "question_id": 30754904, "link": "https://stackoverflow.com/questions/30754904/moving-pointer-to-desired-location", "title": "Moving pointer to desired location", "body": "<p>I am offsetting my pointer as shown in the below code to copy to another structure.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct a\n{\n    int i;\n};\nstruct test\n{\n    struct a *p;\n    int x,y,z;\n};\n\nint main()\n{\n  struct test *ptr = malloc(sizeof(struct test));\n  struct test *q = malloc(sizeof(struct test));\n  ptr-&gt;x = 10;\n  ptr-&gt;y = 20;\n  ptr-&gt;z = 30;\n  memcpy(&amp;(q-&gt;x),&amp;(ptr-&gt;x),sizeof(struct test)-sizeof(struct a*));\n\n  printf(\"%d %d %d\\n\",q-&gt;x,q-&gt;y,q-&gt;z);\n  return 0;\n}\n</code></pre>\n\n<p>Is there a better way to do my <code>memcpy()</code> ?\nMy question is what if I am in-cognizant of the members of the structure and want to just move my pointer by <code>sizeof(struct a*)</code> and copy rest of the structure?</p>\n\n<p>Edits:</p>\n\n<p>I want to copy some part of the structure but I don't know the members in it, but I know I want to skip some type of variable as shown in the example (struct a*) and copy rest of the structure.</p>\n"}, {"tags": ["c", "gtk", "gtk2"], "comments": [{"owner": {"reputation": 6017, "user_id": 4694621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lIYBa.png?s=128&g=1", "display_name": "Mateusz Piotrowski", "link": "https://stackoverflow.com/users/4694621/mateusz-piotrowski"}, "edited": false, "score": 0, "creation_date": 1434392580, "post_id": 30754759, "comment_id": 49747966, "body": "Have you come up with any solution?"}, {"owner": {"reputation": 2417, "user_id": 2503164, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/68d57915f8c4a877fe42a67251d1420a?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2503164/mike"}, "edited": false, "score": 0, "creation_date": 1434506105, "post_id": 30754759, "comment_id": 49803088, "body": "I believe your change mask combined with the signal handler for &quot;focus-out-event&quot; should do the trick."}, {"owner": {"reputation": 8749, "user_id": 4702146, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ba5530d24166ce3995a46cc0f5687e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Barr J", "link": "https://stackoverflow.com/users/4702146/barr-j"}, "edited": false, "score": 0, "creation_date": 1434524057, "post_id": 30754759, "comment_id": 49808887, "body": "No solution yet, my window doesn&#39;t accept focus and never will as it is maximized, to the point only the lxde panel is visible. meaning, when clicking on lxpanel it will close. That&#39;s the catch, need to check whether the user clicked out of the window, without focus. X,Y coordinates or try passing LXpanel as parameter, but doing so results in segmentation."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11810161, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VPoiyhu9SvI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd1shGNFeN4kF1chXc0FmGoD8KyOg/photo.jpg?sz=128", "display_name": "Julian Lazaras", "link": "https://stackoverflow.com/users/11810161/julian-lazaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1563570206, "creation_date": 1563570206, "answer_id": 57119570, "question_id": 30754759, "link": "https://stackoverflow.com/questions/30754759/how-to-have-a-window-closed-when-a-user-clicks-outside-of-it-using-gtk2/57119570#57119570", "title": "How to have a window closed when a user clicks outside of it using GTK+2?", "body": "<p>I would think that using another library to get general mouse information, would work best, for example curses something like this: </p>\n\n<pre><code>#include&lt;curses.h&gt;\nGSList* List; //This is a singly linked list provided by glib as well.\ng_timeout_add_seconds(1, callback, List);\nvoid callback(void* pointer){\n    MEVENT event;\n    ch = getch();\n    if(ch == KEY_MOUSE){\n        if(getmouse(&amp;event) == OK){\n            /* Do some thing with the event */\n       }\n    }\n} \n</code></pre>\n\n<p>use the list to store any widgets that you will be altering</p>\n"}], "owner": {"reputation": 8749, "user_id": 4702146, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ba5530d24166ce3995a46cc0f5687e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Barr J", "link": "https://stackoverflow.com/users/4702146/barr-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563570206, "creation_date": 1433935156, "last_edit_date": 1433940636, "question_id": 30754759, "link": "https://stackoverflow.com/questions/30754759/how-to-have-a-window-closed-when-a-user-clicks-outside-of-it-using-gtk2", "title": "How to have a window closed when a user clicks outside of it using GTK+2?", "body": "<p>I was wondering if there is any simple way for <strong>closing a window when a user clicks out side of it (so it becomes out of focus).</strong></p>\n\n<p>For example I have this window here: </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static void applauncher_create_window(AppLauncherPlugin * pALP)\n{\n    FmIcon * fm_icon;\n    GdkPixbuf * pixbuf;\n    GtkWidget * icon_view;\n    GtkWidget * scrolled_window;\n    GtkWidget * win = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n    GtkWidget * vbox;\n    GtkTreeModel * tree_model;\n    //GtkWidget * fileBtn;\n    //GtkWidget * picBtn;\n    //GtkWidget * musicBtn;\n    GtkWidget * button;\n    GtkWidget * image;\n    GtkWidget * label;\n    GtkWidget * hbox;\n    GtkWidget * innerVbox;\n    GtkWidget * alignment;\n\n    gtk_window_maximize(GTK_WINDOW(win));\n    vbox = gtk_vbox_new(FALSE,0);\n    alignment = gtk_alignment_new(0.5, 0.5, 0,0);\n    /*picBtn = gtk_button_new();\n    musicBtn = gtk_button_new();\n    vidBtn = gtk_button_new();*/\n\n    gtk_window_set_decorated(GTK_WINDOW(win), FALSE);\n    gtk_window_set_skip_taskbar_hint(GTK_WINDOW(win), TRUE);\n    gtk_window_set_skip_pager_hint(GTK_WINDOW(win), TRUE);\n\n    hbox = gtk_hbox_new(FALSE, 0);\n\n    button = gtk_button_new();\n    innerVbox = gtk_vbox_new(FALSE,0);\n    gtk_container_add(GTK_CONTAINER(button),innerVbox);\n    fm_icon = fm_icon_from_name(\"sr-applauncher-files\");\n    pixbuf = fm_pixbuf_from_icon(fm_icon, pALP-&gt;app_icon_size);\n    if (fm_icon)\n        g_object_unref(fm_icon);\n    image = gtk_image_new_from_pixbuf(pixbuf);\n    if (pixbuf)\n        g_object_unref(pixbuf);\n    label = gtk_label_new(\"Files\");\n    gtk_box_pack_start(GTK_BOX(innerVbox), image, FALSE,FALSE,0);\n    gtk_box_pack_start(GTK_BOX(innerVbox), label, FALSE,FALSE,0);\n    gtk_button_set_relief(GTK_BUTTON(button), GTK_RELIEF_NONE);\n    g_signal_connect(button, \"clicked\", G_CALLBACK(files_folder),pALP);\n    gtk_box_pack_start(GTK_BOX(hbox), button, FALSE,FALSE,0);\n\n\n    button = gtk_button_new();\n    innerVbox = gtk_vbox_new(FALSE,0);\n    gtk_container_add(GTK_CONTAINER(button),innerVbox);\n    fm_icon = fm_icon_from_name(\"sr-applauncher-music\");\n    pixbuf = fm_pixbuf_from_icon(fm_icon, pALP-&gt;app_icon_size);\n    if (fm_icon)\n        g_object_unref(fm_icon);\n    image = gtk_image_new_from_pixbuf(pixbuf);\n    if (pixbuf)\n        g_object_unref(pixbuf);\n    label = gtk_label_new(\"Music\");\n    gtk_box_pack_start(GTK_BOX(innerVbox), image, FALSE,FALSE,0);\n    gtk_box_pack_start(GTK_BOX(innerVbox), label, FALSE,FALSE,0);\n    gtk_button_set_relief(GTK_BUTTON(button), GTK_RELIEF_NONE);\n    g_signal_connect(button, \"clicked\", G_CALLBACK(music_folder), pALP);\n    gtk_box_pack_start(GTK_BOX(hbox), button, FALSE,FALSE,0);\n\n    button = gtk_button_new();\n    innerVbox = gtk_vbox_new(FALSE,0);\n    gtk_container_add(GTK_CONTAINER(button),innerVbox);\n    fm_icon = fm_icon_from_name(\"sr-applauncher-pictures\");\n    pixbuf = fm_pixbuf_from_icon(fm_icon, pALP-&gt;app_icon_size);\n    if (fm_icon)\n        g_object_unref(fm_icon);\n    image = gtk_image_new_from_pixbuf(pixbuf);\n    if (pixbuf)\n        g_object_unref(pixbuf);\n    label = gtk_label_new(\"Pictures\");\n    gtk_box_pack_start(GTK_BOX(innerVbox), image, FALSE,FALSE,0);\n    gtk_box_pack_start(GTK_BOX(innerVbox), label, FALSE,FALSE,0);\n    gtk_button_set_relief(GTK_BUTTON(button), GTK_RELIEF_NONE);\n    g_signal_connect(button, \"clicked\", G_CALLBACK(pictures_folder), pALP);\n    gtk_box_pack_start(GTK_BOX(hbox), button, FALSE,FALSE,0);\n\n\n    button = gtk_button_new();\n    innerVbox = gtk_vbox_new(FALSE,0);\n    gtk_container_add(GTK_CONTAINER(button),innerVbox);\n    fm_icon = fm_icon_from_name(\"sr-applauncher-videos\");\n    pixbuf = fm_pixbuf_from_icon(fm_icon, pALP-&gt;app_icon_size);\n    if (fm_icon)\n        g_object_unref(fm_icon);\n    image = gtk_image_new_from_pixbuf(pixbuf);\n    if (pixbuf)\n        g_object_unref(pixbuf);\n    label = gtk_label_new(\"Videos\");\n    gtk_box_pack_start(GTK_BOX(innerVbox), image, FALSE,FALSE,0);\n    gtk_box_pack_start(GTK_BOX(innerVbox), label, FALSE,FALSE,0);\n    gtk_button_set_relief(GTK_BUTTON(button), GTK_RELIEF_NONE);\n    g_signal_connect(button, \"clicked\", G_CALLBACK(videos_folder), pALP);\n    gtk_box_pack_start(GTK_BOX(hbox), button, FALSE,FALSE,0);\n\n\n    gtk_box_pack_start(GTK_BOX(vbox), alignment, FALSE,FALSE,0);\n    gtk_container_add(GTK_CONTAINER(alignment), hbox);\n\n\n    scrolled_window = gtk_scrolled_window_new(NULL, NULL);\n    gtk_box_pack_start(GTK_BOX(vbox), scrolled_window, TRUE,TRUE,0);\n    gtk_container_add(GTK_CONTAINER(win), vbox);\n    gtk_scrolled_window_set_policy(GTK_SCROLLED_WINDOW(scrolled_window), GTK_POLICY_AUTOMATIC, GTK_POLICY_AUTOMATIC);\n    gtk_scrolled_window_set_shadow_type(GTK_SCROLLED_WINDOW(scrolled_window), GTK_SHADOW_IN);\n\n    icon_view = gtk_icon_view_new_with_model(create_and_fill_model(pALP));\n    g_object_unref(pALP-&gt;list_store);       /* destroy model automatically with view */\n    gtk_icon_view_set_selection_mode(GTK_ICON_VIEW(icon_view), GTK_SELECTION_SINGLE);\n    gtk_icon_view_set_reorderable(GTK_ICON_VIEW(icon_view), TRUE);\n    gtk_icon_view_set_text_column(GTK_ICON_VIEW(icon_view), COL_DISPLAY_NAME);\n    gtk_icon_view_set_pixbuf_column(GTK_ICON_VIEW(icon_view), COL_PIXBUF);\n    gtk_icon_view_set_tooltip_column(GTK_ICON_VIEW(icon_view), COL_TOOLTIP);\n    //g_signal_connect(icon_view, \"button-press-event\", G_CALLBACK(icon_view_onButtonPressed), pALP);\n\n    tree_model = gtk_icon_view_get_model(GTK_ICON_VIEW(icon_view));\n    g_signal_connect(icon_view, \"item-activated\", G_CALLBACK(icon_view_onItemActivated), pALP);\n\n    g_signal_connect(win, \"destroy\", G_CALLBACK(appluncher_store_state), pALP);\n\n    //gtk_tree_model_foreach(GTK_TREE_MODEL(pALP-&gt;list_store), foreach_func, pALP);\n\n    //_menu_cache_lookup_sync(\"appLuncher.menu\");\n\n    gtk_container_add(GTK_CONTAINER(scrolled_window), icon_view);\n\n    gtk_widget_show_all(scrolled_window);\n\n    pALP-&gt;applauncher_window = win;\n\n}\n</code></pre>\n\n<p>I am currently thinking of setting transient and <code>gtk_widgets_set_even(widget, GDK_MASK_FOCUS_CHANGEd)</code>.</p>\n\n<h3>Is there any other way as this will assumably work on popups but my window doesn't contain pop ups.</h3>\n"}, {"tags": ["c++", "c", "memory-leaks", "valgrind", "libxml2"], "comments": [{"owner": {"reputation": 2394, "user_id": 4952137, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c40d9f94080a45d91ee151dfe960cee3?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Sparber", "link": "https://stackoverflow.com/users/4952137/thomas-sparber"}, "edited": false, "score": 0, "creation_date": 1433934625, "post_id": 30754437, "comment_id": 49562562, "body": "This is not an actual Memory leak but variables wich are still reachable when the program terminates. Did you declare it as a global variable?"}, {"owner": {"reputation": 3883, "user_id": 530424, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Xv2CA.jpg?s=128&g=1", "display_name": "elhadi dp \u0131p\u0250\u0265\u05df\u01dd", "link": "https://stackoverflow.com/users/530424/elhadi-dp-%c4%b1p%c9%90%c9%a5%d7%9f%c7%9d"}, "reply_to_user": {"reputation": 2394, "user_id": 4952137, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c40d9f94080a45d91ee151dfe960cee3?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Sparber", "link": "https://stackoverflow.com/users/4952137/thomas-sparber"}, "edited": false, "score": 0, "creation_date": 1433937226, "post_id": 30754437, "comment_id": 49564299, "body": "i was reported as a missed free due to an alloc by valgrind. I Think it is a global variable allocation. I&#39;ll see if this memory doesn&#39;t grow during long time run. Thank you for your reactivity"}, {"owner": {"reputation": 192, "user_id": 3268398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccde2b797d336430ddc588b02a6cb9a6?s=128&d=identicon&r=PG", "display_name": "silvioprog", "link": "https://stackoverflow.com/users/3268398/silvioprog"}, "edited": false, "score": 0, "creation_date": 1482116126, "post_id": 30754437, "comment_id": 69629146, "body": "I got same problem on <i>Xubuntu 16.04 64 bits</i> (using the latest <i>libxml2</i> release for that distribution), however I fixed it after reading <a href=\"http://stackoverflow.com/a/30403709/3268398\">this answer</a> talking about the <i>GCC</i>&#39;s <code>-fsanitize=leak</code> option."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 3288244, "user_type": "registered", "profile_image": "https://graph.facebook.com/637116901/picture?type=large", "display_name": "user3288244", "link": "https://stackoverflow.com/users/3288244/user3288244"}, "edited": false, "score": 0, "creation_date": 1433936418, "post_id": 30755196, "comment_id": 49563679, "body": "<a href=\"http://valgrind.org/docs/manual/faq.html#faq.deflost\" rel=\"nofollow noreferrer\">http://valgrind.org/docs/manual/faq.html#faq.deflost</a>"}, {"owner": {"reputation": 3883, "user_id": 530424, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Xv2CA.jpg?s=128&g=1", "display_name": "elhadi dp \u0131p\u0250\u0265\u05df\u01dd", "link": "https://stackoverflow.com/users/530424/elhadi-dp-%c4%b1p%c9%90%c9%a5%d7%9f%c7%9d"}, "edited": false, "score": 0, "creation_date": 1433937067, "post_id": 30755196, "comment_id": 49564176, "body": "Yes of course i see what means &quot;still reachable&quot;, but as this program was not developped by me, i have posed the question.  As i have said i will see if this leak doesn&#39;t grow during long time program run"}], "tags": [], "owner": {"reputation": 121, "user_id": 3288244, "user_type": "registered", "profile_image": "https://graph.facebook.com/637116901/picture?type=large", "display_name": "user3288244", "link": "https://stackoverflow.com/users/3288244/user3288244"}, "is_accepted": false, "score": 3, "last_activity_date": 1433936326, "creation_date": 1433936326, "answer_id": 30755196, "question_id": 30754437, "link": "https://stackoverflow.com/questions/30754437/valgrind-shows-me-a-leak-when-using-libxml2/30755196#30755196", "title": "valgrind shows me a leak when using libxml2", "body": "<p><a href=\"http://valgrind.org/docs/manual/faq.html\" rel=\"nofollow\">http://valgrind.org/docs/manual/faq.html</a></p>\n\n<blockquote>\n  <p>\"still reachable\" means your program is probably ok -- it didn't free some memory it could have. This is quite common and often reasonable. Don't use --show-reachable=yes if you don't want to see these reports.</p>\n</blockquote>\n\n<p>As said, your code should be alright. :)</p>\n"}], "owner": {"reputation": 3883, "user_id": 530424, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Xv2CA.jpg?s=128&g=1", "display_name": "elhadi dp \u0131p\u0250\u0265\u05df\u01dd", "link": "https://stackoverflow.com/users/530424/elhadi-dp-%c4%b1p%c9%90%c9%a5%d7%9f%c7%9d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 820, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1433936326, "creation_date": 1433934260, "question_id": 30754437, "link": "https://stackoverflow.com/questions/30754437/valgrind-shows-me-a-leak-when-using-libxml2", "title": "valgrind shows me a leak when using libxml2", "body": "<p>i have a code which i must fix it. It has a leak, I don't know where is the problem, but i think something is bad done.\nis there anybody who has the same problem and can help me please?</p>\n\n<pre><code>==3923== 32 bytes in 1 blocks are still reachable in loss record 1 of 2\n==3923==    at 0x4C2CC70: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==3923==    by 0x652168F: _dlerror_run (dlerror.c:141)\n==3923==    by 0x65210C0: dlopen@@GLIBC_2.2.5 (dlopen.c:87)\n==3923==    by 0x693F475: ??? (in /lib/x86_64-linux-gnu/liblzma.so.5.0.0)\n==3923==    by 0x6943DC7: lzma_auto_decoder (in /lib/x86_64-linux-gnu/liblzma.so.5.0.0)\n==3923==    by 0x5DB14DC: ??? (in /usr/lib/x86_64-linux-gnu/libxml2.so.2.9.1)\n==3923==    by 0x5DB1E4F: __libxml2_xzread (in /usr/lib/x86_64-linux-gnu/libxml2.so.2.9.1)\n==3923==    by 0x5CFFB08: ??? (in /usr/lib/x86_64-linux-gnu/libxml2.so.2.9.1)\n==3923==    by 0x5D01674: xmlParserInputBufferGrow (in /usr/lib/x86_64-linux-gnu/libxml2.so.2.9.1)\n==3923==    by 0x5CD3E34: xmlParserInputGrow (in /usr/lib/x86_64-linux-gnu/libxml2.so.2.9.1)\n==3923==    by 0x5CD921A: ??? (in /usr/lib/x86_64-linux-gnu/libxml2.so.2.9.1)\n==3923==    by 0x5CEB03C: xmlParseDocument (in /usr/lib/x86_64-linux-gnu/libxml2.so.2.9.1)\n==3923== \n==3923== 44 bytes in 1 blocks are still reachable in loss record 2 of 2\n==3923==    at 0x4C2AB80: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==3923==    by 0x400FDC0: _dl_signal_error (dl-error.c:90)\n==3923==    by 0x40146CF: _dl_open (dl-open.c:715)\n==3923==    by 0x652102A: dlopen_doit (dlopen.c:66)\n==3923==    by 0x400FFF3: _dl_catch_error (dl-error.c:187)\n==3923==    by 0x652162C: _dlerror_run (dlerror.c:163)\n==3923==    by 0x65210C0: dlopen@@GLIBC_2.2.5 (dlopen.c:87)\n==3923==    by 0x693F475: ??? (in /lib/x86_64-linux-gnu/liblzma.so.5.0.0)\n==3923==    by 0x6943DC7: lzma_auto_decoder (in /lib/x86_64-linux-gnu/liblzma.so.5.0.0)\n==3923==    by 0x5DB14DC: ??? (in /usr/lib/x86_64-linux-gnu/libxml2.so.2.9.1)\n==3923==    by 0x5DB1E4F: __libxml2_xzread (in /usr/lib/x86_64-linux-gnu/libxml2.so.2.9.1)\n==3923==    by 0x5CFFB08: ??? (in /usr/lib/x86_64-linux-gnu/libxml2.so.2.9.1)\n==3923== \n==3923== LEAK SUMMARY:\n==3923==    definitely lost: 0 bytes in 0 blocks\n==3923==    indirectly lost: 0 bytes in 0 blocks\n==3923==      possibly lost: 0 bytes in 0 blocks\n==3923==    still reachable: 76 bytes in 2 blocks\n==3923==         suppressed: 0 bytes in 0 blocks\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1433932375, "post_id": 30753770, "comment_id": 49561246, "body": "tmp is not a <code>float32_t</code> and I think casting it will change the way it&#39;s handled by the program, while casting its address to a pointer to <code>float32_t</code> will ensure the program reads the value as-is"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1433934334, "post_id": 30753770, "comment_id": 49562377, "body": "There is <a href=\"http://ideone.com/Xa0DqJ\" rel=\"nofollow noreferrer\">an easy way</a> to determine whether they are the same."}], "answers": [{"comments": [{"owner": {"reputation": 739, "user_id": 2389323, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/bf919b1208bde8aed2224978b6427075?s=128&d=identicon&r=PG", "display_name": "user2389323", "link": "https://stackoverflow.com/users/2389323/user2389323"}, "edited": false, "score": 0, "creation_date": 1433932929, "post_id": 30753804, "comment_id": 49561581, "body": "Thanks.. but it gives a &quot;warning: dereferencing type-punned pointer&quot; compiler warning. How can i correct it?"}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 739, "user_id": 2389323, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/bf919b1208bde8aed2224978b6427075?s=128&d=identicon&r=PG", "display_name": "user2389323", "link": "https://stackoverflow.com/users/2389323/user2389323"}, "edited": false, "score": 0, "creation_date": 1433932994, "post_id": 30753804, "comment_id": 49561620, "body": "There are a lot of different ways. One way would be to use a union."}, {"owner": {"reputation": 739, "user_id": 2389323, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/bf919b1208bde8aed2224978b6427075?s=128&d=identicon&r=PG", "display_name": "user2389323", "link": "https://stackoverflow.com/users/2389323/user2389323"}, "edited": false, "score": 0, "creation_date": 1433933887, "post_id": 30753804, "comment_id": 49562132, "body": "float32_t p;  memcpy(&amp;p, &amp;tmp, sizeof(float32_t)); is correct, isnt it? where tmp is the variable in the example i have posted."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1433936968, "post_id": 30753804, "comment_id": 49564107, "body": "They are also different because the form used in the question has a bug which invokes undefined behavior. So &quot;their code&quot; will do anything, it might as well crash and burn as giving the expected value."}], "tags": [], "owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 1, "last_activity_date": 1433932375, "creation_date": 1433932375, "answer_id": 30753804, "question_id": 30753770, "link": "https://stackoverflow.com/questions/30753770/assigning-from-a-pointer-value/30753804#30753804", "title": "assigning from a pointer value", "body": "<p>No, they're completely different. Say the value of <code>tmp</code> is 1. Their code will give <code>*pf</code> the value of whatever floating point number has the same binary representation as the integer 1. Your code would give it the floating point value 1.0!</p>\n"}, {"tags": [], "owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "is_accepted": false, "score": 1, "last_activity_date": 1433932546, "creation_date": 1433932546, "answer_id": 30753872, "question_id": 30753770, "link": "https://stackoverflow.com/questions/30753770/assigning-from-a-pointer-value/30753872#30753872", "title": "assigning from a pointer value", "body": "<p>This code is editing the value of a float knowing it is formatted using the <a href=\"http://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow\">standard IEEE 754 floating representation</a>.</p>\n\n<pre><code>*(float32_t*)&amp;tmp;\n</code></pre>\n\n<p>means reinterpret the address of temp as being a pointer on a 32 bit float, extract the value pointed.</p>\n\n<pre><code>(float32_t)tmp;\n</code></pre>\n\n<p>means cast the integer to float 32. Which means <code>32.1111f</code> may well produce <code>32</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 0, "last_activity_date": 1433934399, "creation_date": 1433934399, "answer_id": 30754497, "question_id": 30753770, "link": "https://stackoverflow.com/questions/30753770/assigning-from-a-pointer-value/30754497#30754497", "title": "assigning from a pointer value", "body": "<p>Very different.\nThe first causes the bit pattern of <code>tmp</code> to be reinterpreted as a <code>float</code>.\nThe second causes the numerical value of <code>tmp</code> to be converted to <code>float</code> (within the accuracy that it can be represented including rounding).</p>\n\n<p>Try this:</p>\n\n<pre><code>int main(void) {\n    int32_t n=1078530011;\n\n    float32_t f;\n\n    f=*(float32_t*)(&amp;n);\n    printf(\"reinterpet the bit pattern of %d as float - f==%f\\n\",n,f);\n\n    f=(float32_t)n;\n    printf(\"cast the numerical value of %d as float  - f==%f\\n\",n,f);\n\n    return 0;\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>reinterpet the bit pattern of 1078530011 as float - f==3.141593\ncast the numerical value of 1078530011 as float  - f==1078530048.000000\n</code></pre>\n\n<p>It's like thinking that </p>\n\n<pre><code>const char* str=\"3568\";\nint a=*(int*)str;\nint b=atoi(str);\n</code></pre>\n\n<p>Will assign <code>a</code> and <code>b</code> the same values.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1433937267, "last_edit_date": 1495540713, "creation_date": 1433936890, "answer_id": 30755433, "question_id": 30753770, "link": "https://stackoverflow.com/questions/30753770/assigning-from-a-pointer-value/30755433#30755433", "title": "assigning from a pointer value", "body": "<p>First to answer the question, <code>my_float = (float)my_int</code> safely <em>converts</em> the integer to a float according to the rules of the standard (6.3.1.4). </p>\n\n<blockquote>\n  <p>When a value of integer type is converted to a real floating type, if\n  the value being converted can be represented exactly in the new type,\n  it is unchanged. If the value being converted is in the range of\n  values that can be represented but cannot be represented exactly, the\n  result is either the nearest higher or nearest lower representable\n  value, chosen in an implementation-defined manner. If the value being\n  converted is outside the range of values that can be represented, the\n  behavior is undefined.</p>\n</blockquote>\n\n<p><code>my_float = *(float*)&amp;my_int</code> on the other hand, is a dirty trick, telling the program that the binary contents of the integer should be treated as if they were a float variable, with no concerns at all.</p>\n\n<p><em>However</em>, the person who wrote the dirty trick was probably not aware of it leading to undefined behavior for another reason: it violates the <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">strict aliasing rule</a>. </p>\n\n<p>To fix this bug, you either have to tell your compiler to behave in a non-standard, non-portable manner (for example gcc -fno-strict-aliasing), which I don't recommend.</p>\n\n<p>Or preferably, you rewrite the code so that it doesn't rely on undefined behavior. Best way is to use unions, for which strict aliasing doesn't apply, in the following manner:</p>\n\n<pre><code>typedef union\n{\n  uint32_t  as_int;\n  float32_t as_float;\n} converter_t;\n\nuint32_t value1, value2, value3; // do something with these variables\n\n*pf = (converter_t){value1}.as_float + \n      (converter_t){value2}.as_float - \n      (converter_t){value3}.as_float;\n</code></pre>\n\n<p>Also it is good practice to add the following sanity check:</p>\n\n<pre><code>static_assert(sizeof(converter_t) == sizeof(uint32_t), \n              \"Unexpected padding or wrong type sizes!\");\n</code></pre>\n"}], "owner": {"reputation": 739, "user_id": 2389323, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/bf919b1208bde8aed2224978b6427075?s=128&d=identicon&r=PG", "display_name": "user2389323", "link": "https://stackoverflow.com/users/2389323/user2389323"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 30753804, "answer_count": 4, "score": 2, "last_activity_date": 1433937267, "creation_date": 1433932256, "last_edit_date": 1433933568, "question_id": 30753770, "link": "https://stackoverflow.com/questions/30753770/assigning-from-a-pointer-value", "title": "assigning from a pointer value", "body": "<p>I saw the following piece of code in an opensource AAC decoder,</p>\n\n<pre><code>static void flt_round(float32_t *pf)\n{\n    int32_t flg;\n    uint32_t tmp, tmp1, tmp2;\n\n    tmp = *(uint32_t*)pf;\n    flg = tmp &amp; (uint32_t)0x00008000;\n    tmp &amp;= (uint32_t)0xffff0000;\n    tmp1 = tmp;\n    /* round 1/2 lsb toward infinity */\n    if (flg)\n    {\n        tmp &amp;= (uint32_t)0xff800000;       /* extract exponent and sign */\n        tmp |= (uint32_t)0x00010000;       /* insert 1 lsb */\n        tmp2 = tmp;                             /* add 1 lsb and elided one */\n        tmp &amp;= (uint32_t)0xff800000;       /* extract exponent and sign */\n\n        *pf = *(float32_t*)&amp;tmp1 + *(float32_t*)&amp;tmp2 - *(float32_t*)&amp;tmp;\n    } else {\n        *pf = *(float32_t*)&amp;tmp;\n    }\n}\n</code></pre>\n\n<p>In that the line,</p>\n\n<pre><code>*pf = *(float32_t*)&amp;tmp;\n</code></pre>\n\n<p>is same as,</p>\n\n<pre><code>*pf = (float32_t)tmp;\n</code></pre>\n\n<p>Isn't it?</p>\n\n<p>Or is there a difference? Maybe in performance?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "c", "arrays", "numpy"], "comments": [{"owner": {"reputation": 2439, "user_id": 2294472, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/231b9fba4257295e39e1484a410d246d?s=128&d=identicon&r=PG", "display_name": "Delta_Fore", "link": "https://stackoverflow.com/users/2294472/delta-fore"}, "edited": false, "score": 0, "creation_date": 1433931420, "post_id": 30753390, "comment_id": 49560660, "body": "Yes, though you might want to try to write this loop in cython to bring it (somewhat) up to  c speeds"}, {"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433931452, "post_id": 30753390, "comment_id": 49560683, "body": "Are you still going to be using numpy?"}, {"owner": {"reputation": 1298, "user_id": 855208, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NHcJZ.png?s=128&g=1", "display_name": "eddiewould", "link": "https://stackoverflow.com/users/855208/eddiewould"}, "edited": false, "score": 0, "creation_date": 1433932230, "post_id": 30753390, "comment_id": 49561151, "body": "What does the function calculate? Perhaps there&#39;s a Python implementation."}, {"owner": {"reputation": 3313, "user_id": 2978652, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dS8MN.jpg?s=128&g=1", "display_name": "cmeeren", "link": "https://stackoverflow.com/users/2978652/cmeeren"}, "reply_to_user": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1433932354, "post_id": 30753390, "comment_id": 49561230, "body": "@PadraicCunningham Not sure exactly what you mean, but everything I&#39;m doing with arrays in python is based on numpy."}, {"owner": {"reputation": 3313, "user_id": 2978652, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dS8MN.jpg?s=128&g=1", "display_name": "cmeeren", "link": "https://stackoverflow.com/users/2978652/cmeeren"}, "reply_to_user": {"reputation": 1298, "user_id": 855208, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NHcJZ.png?s=128&g=1", "display_name": "eddiewould", "link": "https://stackoverflow.com/users/855208/eddiewould"}, "edited": false, "score": 0, "creation_date": 1433932652, "post_id": 30753390, "comment_id": 49561419, "body": "@eddiewould magnetic coordinates (there&#39;s not)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433935553, "post_id": 30753390, "comment_id": 49563136, "body": "If that is Python 2, <code>xrange()</code> will likely be faster, but why not use an iterator?"}], "answers": [{"comments": [{"owner": {"reputation": 3313, "user_id": 2978652, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dS8MN.jpg?s=128&g=1", "display_name": "cmeeren", "link": "https://stackoverflow.com/users/2978652/cmeeren"}, "edited": false, "score": 0, "creation_date": 1433932325, "post_id": 30753630, "comment_id": 49561211, "body": "Well, if it takes 1 ms in C and 10 i Python then that&#39;s a significant speedup, even though both are &quot;some ms&quot;."}, {"owner": {"reputation": 8426, "user_id": 1791279, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/abcaa7d84748400f1557b2f91add969a?s=128&d=identicon&r=PG", "display_name": "rth", "link": "https://stackoverflow.com/users/1791279/rth"}, "reply_to_user": {"reputation": 3313, "user_id": 2978652, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dS8MN.jpg?s=128&g=1", "display_name": "cmeeren", "link": "https://stackoverflow.com/users/2978652/cmeeren"}, "edited": false, "score": 1, "creation_date": 1433936939, "post_id": 30753630, "comment_id": 49564083, "body": "@cmeeren The computational speed is limited by the slowest part of the code. If the actual calculation take 1 s per loop, you don&#39;t care if it&#39;s going to be an additional 10 ms (arbitrary number)  overhead per loop in Python vs C, it&#39;s not going to change the overall execution time."}, {"owner": {"reputation": 3313, "user_id": 2978652, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dS8MN.jpg?s=128&g=1", "display_name": "cmeeren", "link": "https://stackoverflow.com/users/2978652/cmeeren"}, "edited": false, "score": 0, "creation_date": 1433947923, "post_id": 30753630, "comment_id": 49572701, "body": "What I meant was that if each iteration, in total, takes 1 ms when looping in C and 10 ms when looping in Python, then that&#39;s a big difference even though both of them are measured in ms"}, {"owner": {"reputation": 1298, "user_id": 855208, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NHcJZ.png?s=128&g=1", "display_name": "eddiewould", "link": "https://stackoverflow.com/users/855208/eddiewould"}, "reply_to_user": {"reputation": 3313, "user_id": 2978652, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dS8MN.jpg?s=128&g=1", "display_name": "cmeeren", "link": "https://stackoverflow.com/users/2978652/cmeeren"}, "edited": false, "score": 0, "creation_date": 1433968760, "post_id": 30753630, "comment_id": 49585816, "body": "@cmeeren - here&#39;s an example. Let&#39;s say the calculation time is fixed at 1s per iteration and there are 1000 elements. The total computation time is 1000s (~16 minutes). If the looping/calling overhead is 1ms then that adds 1 * 1000 = 1s, total execution time of 1001s (~16 minutes). If the looping/calling overhead is 10ms then that adds 10 * 1000 = 10s, total execution time of 1010s (~16 minutes). Surely you don&#39;t care about the difference between a program that takes 1001 seconds to run and a program that takes 1010 seconds to run?"}, {"owner": {"reputation": 3313, "user_id": 2978652, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dS8MN.jpg?s=128&g=1", "display_name": "cmeeren", "link": "https://stackoverflow.com/users/2978652/cmeeren"}, "edited": false, "score": 0, "creation_date": 1434004125, "post_id": 30753630, "comment_id": 49597155, "body": "No I fully understand your point. You were wondering why I was bothering to implement <code>calculate_something</code> in C in the first place if each invocation was measured in ms. That is what I tried to address in my comment. If <code>calculate_something</code> takes 1 ms in C and 10 ms in Python, then that is an order of magnitude faster in C even though both are measured in ms."}, {"owner": {"reputation": 1298, "user_id": 855208, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NHcJZ.png?s=128&g=1", "display_name": "eddiewould", "link": "https://stackoverflow.com/users/855208/eddiewould"}, "edited": false, "score": 0, "creation_date": 1434018989, "post_id": 30753630, "comment_id": 49606862, "body": "Ok - well that makes sense then :) PS If you really want to make it fly then you have what is called an &quot;embarrassingly parallel&quot; problem, meaning you can literally just divide the array into n jobs where n corresponds to the number of sockets you have available. You could look into the Python multiprocessing module, or even set up some form of distributed/grid computing."}], "tags": [], "owner": {"reputation": 1298, "user_id": 855208, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NHcJZ.png?s=128&g=1", "display_name": "eddiewould", "link": "https://stackoverflow.com/users/855208/eddiewould"}, "is_accepted": true, "score": 4, "last_activity_date": 1433931913, "creation_date": 1433931913, "answer_id": 30753630, "question_id": 30753390, "link": "https://stackoverflow.com/questions/30753390/looping-in-c-vs-python/30753630#30753630", "title": "Looping in c vs. python", "body": "<p>The answer really depends on how expensive each <code>calculate_something</code> invocation is, and how many elements you're processing. If (for example) each invocation takes half a second then the overhead of calling from Python is going to be pretty insignificant. </p>\n\n<p>On the other hand, if each invocation is measured in ns/ms (and you've got millons/billions of elements) then it might be worth worrying about the overhead of calling from Python (in which case, I'd ask why you're bothering to implement calculate_something in C in the first place).</p>\n"}, {"tags": [], "owner": {"reputation": 1621, "user_id": 3818405, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/44ba91dcb9e496951e7b1f6b461bb0a7?s=128&d=identicon&r=PG&f=1", "display_name": "paolov", "link": "https://stackoverflow.com/users/3818405/paolov"}, "is_accepted": false, "score": 2, "last_activity_date": 1433938996, "last_edit_date": 1433938996, "creation_date": 1433936322, "answer_id": 30755195, "question_id": 30753390, "link": "https://stackoverflow.com/questions/30753390/looping-in-c-vs-python/30755195#30755195", "title": "Looping in c vs. python", "body": "<p>Why don't you do some benchmarks to figure out the performance difference?</p>\n\n<p>You can perform say, a million iterations of the function as is, with the C code embedded.</p>\n\n<p>If you haven't written implementation in C, or let's say you already have, you can replace the implementation with a do nothing function.</p>\n\n<p>Then write a similar do nothing function in Python, and perform a similar million iterations.</p>\n\n<p>There are several ways you can profile an app, but one simple way to do it from unix would be to run your app with the time command, like so:</p>\n\n<blockquote>\n  <p>time [your app.py]</p>\n</blockquote>\n\n<p>time will then give you app run time statistics.</p>\n\n<p>Using a do nothing function simply profiles the performance difference in terms of function call overheads between C and Python. There are of course potential performance difference due to the actual implementation itself which you can profile if you can implement the function in both languages.</p>\n"}], "owner": {"reputation": 3313, "user_id": 2978652, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/dS8MN.jpg?s=128&g=1", "display_name": "cmeeren", "link": "https://stackoverflow.com/users/2978652/cmeeren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 767, "favorite_count": 0, "accepted_answer_id": 30753630, "answer_count": 2, "score": 1, "last_activity_date": 1433938996, "creation_date": 1433931222, "question_id": 30753390, "link": "https://stackoverflow.com/questions/30753390/looping-in-c-vs-python", "title": "Looping in c vs. python", "body": "<p>I have wrapped a C function <code>calculate_something</code> in Python. The function takes 3 floats, does some calculations, and returns 2 floats. I want to use this function on 3 arrays of floats. That is, for each index in the arrays, call <code>calculate_something</code> on the corresponding floats and store the outputs in two arrays to be returned. Will it be significantly faster to do the loop in C compared to doing the loop in Python, when all I do inside the loop is call the C function and store the value in a (pre-allocated NumPy) output array?</p>\n\n<p>In other words, consider the following Python function:</p>\n\n<pre><code>def calculate_array(arr1, arr2, arr3):\n    out1 = np.empty(len(arr1))\n    out2 = np.empty(len(arr1))\n    for i in range(len(arr1)):\n        r1, r2 = my_c_lib.calculate_something(arr1[i], arr2[i] arr3[i])\n        out1[i] = r1\n        out2[i] = r2\n</code></pre>\n\n<p>Will I gain a significant speedup by doing this function in C instead of Python? (Forgive me my ignorance, I do not know any C and have simply managed to wrap a useful function in Python.)</p>\n"}, {"tags": ["c", "arduino", "type-conversion"], "comments": [{"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 1, "creation_date": 1433930939, "post_id": 30753254, "comment_id": 49560354, "body": "What is <code>myString</code> and how is it declared??"}, {"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 0, "creation_date": 1433931939, "post_id": 30753254, "comment_id": 49560981, "body": "@TheEditor - you should just use the <code>c_str()</code> method of the String class in the call to <code>network.write</code> I.e <code>network.write(header, myString.c_str(), myString.length());</code>"}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1433931877, "creation_date": 1433931877, "answer_id": 30753608, "question_id": 30753254, "link": "https://stackoverflow.com/questions/30753254/arduino-data-type-confusion-have-string-need-const-char/30753608#30753608", "title": "Arduino data type confusion. Have string, need const char?", "body": "<p>Convert the String into a char array first:</p>\n\n<pre><code>size_t len = myString.length();\nchar buf[len+1]; // +1 for the trailing zero terminator\nmyString.toCharArray(buf, len);\n</code></pre>\n\n<p>and then you can pass <code>buf</code>:</p>\n\n<pre><code>bool ok = network.write(header,buf,strlen(buf));\n</code></pre>\n"}], "owner": {"reputation": 476, "user_id": 1950211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/oAIXA.jpg?s=128&g=1", "display_name": "TheEditor", "link": "https://stackoverflow.com/users/1950211/theeditor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 30753608, "answer_count": 1, "score": 0, "last_activity_date": 1433931877, "creation_date": 1433930825, "last_edit_date": 1433931041, "question_id": 30753254, "link": "https://stackoverflow.com/questions/30753254/arduino-data-type-confusion-have-string-need-const-char", "title": "Arduino data type confusion. Have string, need const char?", "body": "<p>I'm working with an UNO and I'm using maniacbug's RF24 library with soft spi, and his rf24network library. <a href=\"https://github.com/maniacbug/RF24Network\" rel=\"nofollow\">https://github.com/maniacbug/RF24Network</a></p>\n\n<p>All I'm trying to do is send data but I'm stuck with the wrong data type.  </p>\n\n<pre><code>{\nlast_sent = now;\n\nprintf(\"Sending...\\r\\n\");\nconst char* hello = \"Hello, world!\";\nRF24NetworkHeader header(/*to node*/ other_node);\nbool ok = network.write(header,hello,strlen(hello));\nif (ok)\n  printf(\"\\tok.\\r\\n\");\nelse\n{\n  printf(\"\\tfailed.\\r\\n\");\n  delay(250); // extra delay on fail to keep light on longer\n}\n}\n</code></pre>\n\n<p>If I change it to </p>\n\n<pre><code>bool ok = network.write(header,myString,strlen(myString));\n</code></pre>\n\n<p>I get an error on data type.  So how do I get my string to fit this structure.  My thought was to to a myString.toCharArray then maybe loop through that? </p>\n"}, {"tags": ["c", "linux", "algorithm", "sorting", "gcc"], "comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 3, "creation_date": 1433928884, "post_id": 30752494, "comment_id": 49558908, "body": "You need an entry point (<code>main</code> function)."}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 3, "creation_date": 1433928919, "post_id": 30752494, "comment_id": 49558928, "body": "You also need to indent and format your code so it is <b><i>readable</i></b>..."}, {"owner": {"reputation": 522, "user_id": 4603054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B3AdR.jpg?s=128&g=1", "display_name": "Tlacenka", "link": "https://stackoverflow.com/users/4603054/tlacenka"}, "edited": false, "score": 3, "creation_date": 1433931753, "post_id": 30752494, "comment_id": 49560866, "body": "is that the same code posted twice or is the second version somehow different?"}], "answers": [{"tags": [], "owner": {"reputation": 522, "user_id": 4603054, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B3AdR.jpg?s=128&g=1", "display_name": "Tlacenka", "link": "https://stackoverflow.com/users/4603054/tlacenka"}, "is_accepted": true, "score": 4, "last_activity_date": 1433929139, "creation_date": 1433929139, "answer_id": 30752635, "question_id": 30752494, "link": "https://stackoverflow.com/questions/30752494/error-by-compiler-gcc-undefined-reference-to-main/30752635#30752635", "title": "Error by Compiler gcc: undefined reference to `main&#39;", "body": "<p>It would be more readable if you kept the code formatting for the whole code, not just its part.</p>\n\n<p>But when I tried to find a main function, I didn't find any. Therefore there is no reference to main because you haven't implemented one, at least not in the code you posted here.</p>\n"}], "owner": {"reputation": 3, "user_id": 4994153, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-saCMdao6Zy8/AAAAAAAAAAI/AAAAAAAAAOw/4pdZDt3NwN8/photo.jpg?sz=128", "display_name": "s kumar", "link": "https://stackoverflow.com/users/4994153/s-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 30752635, "answer_count": 1, "score": -6, "last_activity_date": 1433929139, "creation_date": 1433928745, "last_edit_date": 1433928845, "question_id": 30752494, "link": "https://stackoverflow.com/questions/30752494/error-by-compiler-gcc-undefined-reference-to-main", "title": "Error by Compiler gcc: undefined reference to `main&#39;", "body": "<p>I am writting this program for K_ mean clustering in C and Compiling this program on GCC compiler in Linux\nCompiler error massages are following </p>\n\n<pre><code>***/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o: In function `_start':\n(.text+0x20): undefined reference to `main'\ncollect2: ld returned 1 exit status***\n</code></pre>\n\n<p>My complete Programme is following </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;float.h&gt;\n#include &lt;math.h&gt;\n\nint *k_means(double **data, int n, int m, int k, double t, double\n**centroids) {    /* output cluster label for each data point */    int *labels = (int*)calloc(n, sizeof(int));\n\n   int h, i, j; /* loop counters, of course :) */    int *counts =\n(int*)calloc(k, sizeof(int)); /* size of each cluster */    double\nold_error, error = DBL_MAX; /* sum of squared euclidean distance */ \ndouble **c = centroids ? centroids : (double**)calloc(k,\nsizeof(double*));    double **c1 = (double**)calloc(k,\nsizeof(double*)); /* temp centroids */\n\n   assert(data &amp;&amp; k &gt; 0 &amp;&amp; k &lt;= n &amp;&amp; m &gt; 0 &amp;&amp; t &gt;= 0); /* for\ndebugging */\n\n   /****    ** initialization */\n\n   for (h = i = 0; i &lt; k; h += n / k, i++) {\n      c1[i] = (double*)calloc(m, sizeof(double));\n      if (!centroids) {\n         c[i] = (double*)calloc(m, sizeof(double));\n      }\n      /* pick k points as initial centroids */\n      for (j = m; j-- &gt; 0; c[i][j] = data[h][j]);    }\n\n   /****    ** main loop */\n\n   do {\n      /* save error from last step */\n      old_error = error, error = 0;\n\n      /* clear old counts and temp centroids */\n      for (i = 0; i &lt; k; counts[i++] = 0) {\n         for (j = 0; j &lt; m; c1[i][j++] = 0);\n      }\n\n      for (h = 0; h &lt; n; h++) {\n         /* identify the closest cluster */\n         double min_distance = DBL_MAX;\n         for (i = 0; i &lt; k; i++) {\n            double distance = 0;\n            for (j = m; j-- &gt; 0; distance += pow(data[h][j] - c[i][j], 2));\n            if (distance &lt; min_distance) {\n               labels[h] = i;\n               min_distance = distance;\n            }\n         }\n         /* update size and temp centroid of the destination cluster */\n         for (j = m; j-- &gt; 0; c1[labels[h]][j] += data[h][j]);\n         counts[labels[h]]++;\n         /* update standard error */\n         error += min_distance;\n      }\n\n      for (i = 0; i &lt; k; i++) { /* update all centroids */\n         for (j = 0; j &lt; m; j++) {\n            c[i][j] = counts[i] ? c1[i][j] / counts[i] : c1[i][j];\n         }\n      }\n\n   } while (fabs(error - old_error) &gt; t);\n\n   /****    ** housekeeping */\n\n   for (i = 0; i &lt; k; i++) {\n      if (!centroids) {\n         free(c[i]);\n      }\n      free(c1[i]);    }\n\n   if (!centroids) {\n      free(c);    }    free(c1);\n\n   free(counts);\n\n   return labels; }\n</code></pre>\n\n<p>Please help us .</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;float.h&gt;\n#include &lt;math.h&gt;\n\nint *k_means(double **data, int n, int m, int k, double t, double\n**centroids) {    /* output cluster label for each data point */    int *labels = (int*)calloc(n, sizeof(int));\n\n   int h, i, j; /* loop counters, of course :) */    int *counts =\n(int*)calloc(k, sizeof(int)); /* size of each cluster */    double\nold_error, error = DBL_MAX; /* sum of squared euclidean distance */ \ndouble **c = centroids ? centroids : (double**)calloc(k,\nsizeof(double*));    double **c1 = (double**)calloc(k,\nsizeof(double*)); /* temp centroids */\n\n   assert(data &amp;&amp; k &gt; 0 &amp;&amp; k &lt;= n &amp;&amp; m &gt; 0 &amp;&amp; t &gt;= 0); /* for\ndebugging */\n\n   /****    ** initialization */\n\n   for (h = i = 0; i &lt; k; h += n / k, i++) {\n      c1[i] = (double*)calloc(m, sizeof(double));\n      if (!centroids) {\n         c[i] = (double*)calloc(m, sizeof(double));\n      }\n      /* pick k points as initial centroids */\n      for (j = m; j-- &gt; 0; c[i][j] = data[h][j]);    }\n\n   /****    ** main loop */\n\n   do {\n      /* save error from last step */\n      old_error = error, error = 0;\n\n      /* clear old counts and temp centroids */\n      for (i = 0; i &lt; k; counts[i++] = 0) {\n         for (j = 0; j &lt; m; c1[i][j++] = 0);\n      }\n\n      for (h = 0; h &lt; n; h++) {\n         /* identify the closest cluster */\n         double min_distance = DBL_MAX;\n         for (i = 0; i &lt; k; i++) {\n            double distance = 0;\n            for (j = m; j-- &gt; 0; distance += pow(data[h][j] - c[i][j], 2));\n            if (distance &lt; min_distance) {\n               labels[h] = i;\n               min_distance = distance;\n            }\n         }\n         /* update size and temp centroid of the destination cluster */\n         for (j = m; j-- &gt; 0; c1[labels[h]][j] += data[h][j]);\n         counts[labels[h]]++;\n         /* update standard error */\n         error += min_distance;\n      }\n\n      for (i = 0; i &lt; k; i++) { /* update all centroids */\n         for (j = 0; j &lt; m; j++) {\n            c[i][j] = counts[i] ? c1[i][j] / counts[i] : c1[i][j];\n         }\n      }\n\n   } while (fabs(error - old_error) &gt; t);\n\n   /****    ** housekeeping */\n\n   for (i = 0; i &lt; k; i++) {\n      if (!centroids) {\n         free(c[i]);\n      }\n      free(c1[i]);    }\n\n   if (!centroids) {\n      free(c);    }    free(c1);\n\n   free(counts);\n\n   return labels; }\n</code></pre>\n"}, {"tags": ["c", "memory", "declaration"], "comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1433928754, "post_id": 30752398, "comment_id": 49558805, "body": "Even if it is a homework question, then what? It&#39;s an interesting one, and you clearly did some research. +1"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1433929096, "post_id": 30752398, "comment_id": 49559065, "body": "Regarding the heap, unless you are programming for some small embedded system with a real-time operating system, there is no heap &quot;segment&quot;, it&#39;s all handled run-time by the standard library and operating system. Also, the actual pointer <i>variables</i> are stored either in the data, bss (which is combined with the data segment in memory) or on the stack (depending on where it was defined and how it was initialized). The memory assigned to a pointer variable may be allocated on the heap though."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1433929175, "post_id": 30752398, "comment_id": 49559127, "body": "You&#39;ve got <code>bss</code> and <code>data</code> wrong. <code>data</code> contains arbitrarily initialized variables, <code>bss</code> contains zero- (or NULL-) initialized variables. Also, some variables may be in <code>rodata</code> (read-only-data) on some systems."}], "owner": {"reputation": 17, "user_id": 2139718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57340a2b558706756e971a5e547911fc?s=128&d=identicon&r=PG", "display_name": "kapil.thakar", "link": "https://stackoverflow.com/users/2139718/kapil-thakar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "closed_date": 1433929182, "answer_count": 0, "score": 0, "last_activity_date": 1591621920, "creation_date": 1433928521, "last_edit_date": 1591621920, "question_id": 30752398, "link": "https://stackoverflow.com/questions/30752398/in-which-part-of-memory-different-variables-get-stored-who-will-assign-the-valu", "closed_reason": "Duplicate", "title": "In which part of memory different variables get stored? Who will assign the value to it before starting main?", "body": "<p>As per my understanding, There are four part of memory. </p>\n\n<ul>\n<li>Data Segment (BSS, Non BSS)</li>\n<li>Code Segment   </li>\n<li>Heap Segment</li>\n<li>Stack Segment </li>\n</ul>\n\n<p>Stack segment will store all the local variables declared inside the function. Dynamically created variable will go inside heap. Initialized global variable will inside data segment - BSS area.\nNon-Initialized global variable will inside data segment - Non BSS area. All const variable &amp; macro will go inside code area. </p>\n\n<p>We can instruct the compiler to store particular variable at particular location inside the memory using <code>#pragma</code>.</p>\n\n<p>I don't know where does const pointer and pointers get stored. is it inside data segment? </p>\n\n<p>Please let me know my understanding is correct or not? </p>\n\n<p>I have code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define MAX 10\nenum color{\n    RED,\n    GREEN,\n    BLUE\n};\n\nint a;\nint b=5;\nstatic int c;\nstatic int d=10;\nextern int e;\nconst int f;\nconst int g = 15;\nconst int *ptr1;\nint *ptr2;\n\nint main(void) {\n    // your code goes here\n    int h;\n    int i=20;\n    static int j;\n    static int k=25;\n    const int l;\n    const int m = 30;\n    int *ptr3;\n    const int *ptr4;\n\n    return 0;\n}\n</code></pre>\n\n<p>In this code, where does these variable <code>a</code> to <code>m</code> will get stored?</p>\n"}, {"tags": ["c", "printf"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 3815163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92c73e30871dff198e3d542a20f3d9bb?s=128&d=identicon&r=PG&f=1", "display_name": "user3815163", "link": "https://stackoverflow.com/users/3815163/user3815163"}, "edited": false, "score": 0, "creation_date": 1433929556, "post_id": 30752424, "comment_id": 49559380, "body": "Thanks for the clarification."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1433928612, "creation_date": 1433928612, "answer_id": 30752424, "question_id": 30752376, "link": "https://stackoverflow.com/questions/30752376/behavior-of-printfd/30752424#30752424", "title": "Behavior of &quot;printf(&quot;%d&quot;);&quot;", "body": "<p>You told <code>printf()</code> how to <em>print</em> something (<em>the format specifier <code>%d</code></em>), but you did not tell <code>printf()</code> <strong>what</strong> to print.</p>\n\n<p>To elaborate, you forgot to supply the required argument for the supplied format specifier <code>%d</code>.</p>\n\n<p><code>C</code> standard says, if there are insufficient argument for supplied format specifier, the <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">behaviour is undefined</a>.</p>\n\n<p>FWIW, just specifying the format specifier won't magically consider the argument for it. You need to write something like</p>\n\n<pre><code> printf(\"%d\", x);\n</code></pre>\n\n<p>to print the value of <code>x</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 3815163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92c73e30871dff198e3d542a20f3d9bb?s=128&d=identicon&r=PG&f=1", "display_name": "user3815163", "link": "https://stackoverflow.com/users/3815163/user3815163"}, "edited": false, "score": 0, "creation_date": 1433929534, "post_id": 30752454, "comment_id": 49559363, "body": "Thanks for the clarification. Unfortunately, stackoverflow doesn&#39;t allows me to accept 2 answers !!"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 3, "last_activity_date": 1433928672, "creation_date": 1433928672, "answer_id": 30752454, "question_id": 30752376, "link": "https://stackoverflow.com/questions/30752376/behavior-of-printfd/30752454#30752454", "title": "Behavior of &quot;printf(&quot;%d&quot;);&quot;", "body": "<p>The <code>printf()</code> has the below prototype</p>\n\n<pre><code>int printf(const char *,...);\n</code></pre>\n\n<p>What you pass is <code>%d</code> to the <code>printf()</code> and since this is a format specifier to print out <code>int</code> <code>printf()</code> looks for the parameter which needs to be printed out since you don't pass any this is undefined behavior</p>\n"}], "owner": {"reputation": 33, "user_id": 3815163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92c73e30871dff198e3d542a20f3d9bb?s=128&d=identicon&r=PG&f=1", "display_name": "user3815163", "link": "https://stackoverflow.com/users/3815163/user3815163"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 30752424, "answer_count": 2, "score": 1, "last_activity_date": 1438266931, "creation_date": 1433928463, "last_edit_date": 1438266931, "question_id": 30752376, "link": "https://stackoverflow.com/questions/30752376/behavior-of-printfd", "title": "Behavior of &quot;printf(&quot;%d&quot;);&quot;", "body": "<pre><code>int main(){\n    // Comment the next line, Garbage value is printed. However, this shows an integer value. \n    int x=32;\n    printf(\"%d\");\n    return 0;\n}\n</code></pre>\n\n<p>Any reason for this behaviour, or is it random??</p>\n"}, {"tags": ["c", "qsort"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 4, "creation_date": 1433928616, "post_id": 30752361, "comment_id": 49558704, "body": "Your item size, <code>sizeof(char*)</code> is wrong. You don&#39;t have an array of <code>char*</code>; you have an array of <code>char[20]</code> (an array of arrays). Each element is <code>char[20]</code> in size. try <code>sizeof *words</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1433928625, "post_id": 30752361, "comment_id": 49558709, "body": "One problem is that the elements in the array are <i>not</i> the size of <code>char *</code>."}, {"owner": {"reputation": 2129, "user_id": 3395716, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hqFig.png?s=128&g=1", "display_name": "Registered User", "link": "https://stackoverflow.com/users/3395716/registered-user"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1433929170, "post_id": 30752361, "comment_id": 49559122, "body": "@WhozCraig Thanks it worked. I had earlier tried 19 but it must be 20. I thought it is 19 because the max number of char in array will be 19. Would you write it as an answer so I can accept it."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1433933988, "post_id": 30752361, "comment_id": 49562203, "body": "OT: <code>strlen() -1</code> mostly leads into desaster sooner or later: Run the program and terminated input by typing Ctrl-D  (Ctrl-Z on windows) twice (instead of hitting the Enter-key."}], "owner": {"reputation": 2129, "user_id": 3395716, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hqFig.png?s=128&g=1", "display_name": "Registered User", "link": "https://stackoverflow.com/users/3395716/registered-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1433928428, "creation_date": 1433928428, "question_id": 30752361, "link": "https://stackoverflow.com/questions/30752361/qsort-function-not-working-as-expected-in-c", "title": "qsort() function not working as expected in c", "body": "<p>I'm  trying to write a simple string sorting program using qsort().(inspired from program in qsort manual in Linux)</p>\n\n<p>This is my code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid disparray(int i,char words[10][20]);\nint compare_strings(const void *a,const void *b);\n\nint main()\n{\n    int index=0;\n    char words[10][20];\n    while(fgets(words[index],20,stdin)) //take array of strings as input from stdin\n    {\n        if (words[index][0]=='\\n') break;\n        words[index][ strlen(words[index]) - 1 ] = '\\0'; //to remove trailing newline\n        index++;\n        if (index==10)break;\n    }\n    disparray(index,words);\n    qsort(words,index,sizeof(char*),compare_strings);\n    disparray(index,words);\n    return 0;\n}\n\nint compare_strings(const void *a,const void *b)\n{\n    //return strcmp(*(char **)a, *(char**)b); // this is what I think is correct command, but it causes segfault.\n    return strcmp(a,b);                         // This gives wrong result.\n}\n\nvoid disparray(int index,char words[10][20])\n{\n    int f=0;\n    while(f&lt;index)\n        {\n            printf(\"%s\\n\",words[f]);\n            f++;\n        }\n}\n</code></pre>\n\n<p>But I am having problems with the qsort function and the comparing function.\nThe output I get is not sorted in the current version of my program. This is what I get</p>\n\n<pre><code>./trial &lt;words\none\ntwo\nthree\nfour\nfive\nsix\nseven\neight\nnine\nten\n\n0\ufffdone\nthree\nfour\nfive\nsix\nseven\neight\nnine\nten\n</code></pre>\n\n<p>how do I fix it?</p>\n"}, {"tags": ["c++", "c", "gcc", "attributes", "out"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1433928208, "post_id": 30752246, "comment_id": 49558407, "body": "Do you want pointers? Like <code>void func(int* i){*i = 44;}</code> (C)?"}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 1, "creation_date": 1433928212, "post_id": 30752246, "comment_id": 49558409, "body": "C and C++ are different languages. In C++ you should use references, in C you only have pointers."}, {"owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1433928948, "post_id": 30752246, "comment_id": 49558948, "body": "I need additional attribute to mark ptr/ref argument as out only. I updated my question to state this."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1433929863, "post_id": 30752246, "comment_id": 49559585, "body": "My g++ <a href=\"http://coliru.stacked-crooked.com/a/e813548cc65d4546\" rel=\"nofollow noreferrer\">does not warn anything</a> even with <code>-Wall -Wextra -pedantic</code> flags and even if <code>myVal</code> is used in <code>func2</code>. I&#39;m assuming that you meant to pass the address of <code>myVal</code> into <code>func</code>."}, {"owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1433930587, "post_id": 30752246, "comment_id": 49560110, "body": "Please see my edit 2, some extra code plus -O1 was needed."}, {"owner": {"reputation": 1981, "user_id": 1052076, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/707e64d1e7c83ffbc0a34e0b88befd09?s=128&d=identicon&r=PG", "display_name": "undu", "link": "https://stackoverflow.com/users/1052076/undu"}, "edited": false, "score": 0, "creation_date": 1433930767, "post_id": 30752246, "comment_id": 49560238, "body": "Just out of pure curiosity, why do you need this ?"}, {"owner": {"reputation": 1981, "user_id": 1052076, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/707e64d1e7c83ffbc0a34e0b88befd09?s=128&d=identicon&r=PG", "display_name": "undu", "link": "https://stackoverflow.com/users/1052076/undu"}, "edited": false, "score": 0, "creation_date": 1433930805, "post_id": 30752246, "comment_id": 49560265, "body": "Oh, and why all the downvotes ?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1433930843, "post_id": 30752246, "comment_id": 49560285, "body": "Having lied to the compiler with <code>__attribute__((const))</code>, which promises that the function <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html\" rel=\"nofollow noreferrer\">&quot;does not examine any values except its arguments, and has no effects except the return value&quot;</a>, you now complain that the compiler is fooled by the lie?"}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1433928297, "post_id": 30752281, "comment_id": 49558467, "body": "Note that there are no distinctions between <code>out</code> and <code>in&amp;out</code> parameters."}, {"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1433928527, "post_id": 30752281, "comment_id": 49558637, "body": "Unless you use <code>const</code> as explained in another answer ;)"}, {"owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1433928955, "post_id": 30752281, "comment_id": 49558953, "body": "I need additional attribute to mark ptr/ref argument as out only. I updated my question to state this."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1433929291, "post_id": 30752281, "comment_id": 49559190, "body": "@DanielFru\u017cy\u0144ski <i>&quot;I need additional attribute to mark ptr/ref argument as out only.&quot;</i> You simply cannot in standard c++ or c."}, {"owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1433929688, "post_id": 30752281, "comment_id": 49559478, "body": "I know this, and I am looking for some non-standard, probably gcc-only extension."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1433929788, "post_id": 30752281, "comment_id": 49559544, "body": "@DanielFru\u017cy\u0144ski <i>&quot;I am looking for some non-standard, probably gcc-only extension&quot;</i> Not that I&#39;m aware of one. I&#39;d say that the semantics as defined in the language standards for c++ or c, inherently won&#39;t allow such extension being implemented."}, {"owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1433930720, "post_id": 30752281, "comment_id": 49560200, "body": "gcc already implements additional attributes for functions, variables and types. Attribute for function argument could look like this: <code>void func(int* __attribute__((out)) i)</code> or <code>void func(__attribute__((out)) int* i)</code>"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 12, "last_activity_date": 1433929515, "last_edit_date": 1433929515, "creation_date": 1433928214, "answer_id": 30752281, "question_id": 30752246, "link": "https://stackoverflow.com/questions/30752246/how-to-mark-function-argument-as-output/30752281#30752281", "title": "How to mark function argument as output", "body": "<blockquote>\n  <p><em>\"Is it possible to do something similar in C/C++?\"</em></p>\n</blockquote>\n\n<p>Not really. Standard c++ or c doesn't support such thing like a output only parameter.</p>\n\n<p>In c++ you can use a reference parameter to get in/out semantics: </p>\n\n<pre><code>void func(int&amp; i) {\n          // ^\n    i = 44;\n}\n</code></pre>\n\n<p>For c you need a pointer, to do the same:</p>\n\n<pre><code>void func(int* i) {\n          // ^ \n    *i = 44;\n // ^\n}\n</code></pre>\n\n<hr>\n\n<p>Note that there are no distinctions between <code>out</code> and <code>in&amp;out</code> parameters, unless you use a <code>const</code> reference (which means input only):</p>\n\n<pre><code>void func(const int&amp; i) {\n       // ^^^^^\n    i = 44;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1433928959, "post_id": 30752316, "comment_id": 49558956, "body": "I need additional attribute to mark ptr/ref argument as out only. I updated my question to state this."}, {"owner": {"reputation": 881, "user_id": 1541012, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/658f517ed534a4bf7672797cc3cdad8a?s=128&d=identicon&r=PG", "display_name": "Bastien", "link": "https://stackoverflow.com/users/1541012/bastien"}, "reply_to_user": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1433935655, "post_id": 30752316, "comment_id": 49563195, "body": "You just can&#39;t, you can just specify an input only, not an output only"}], "tags": [], "owner": {"reputation": 881, "user_id": 1541012, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/658f517ed534a4bf7672797cc3cdad8a?s=128&d=identicon&r=PG", "display_name": "Bastien", "link": "https://stackoverflow.com/users/1541012/bastien"}, "is_accepted": false, "score": 1, "last_activity_date": 1433928312, "creation_date": 1433928312, "answer_id": 30752316, "question_id": 30752246, "link": "https://stackoverflow.com/questions/30752246/how-to-mark-function-argument-as-output/30752316#30752316", "title": "How to mark function argument as output", "body": "<p>When you want to pass an arg as output in C++ you pass it as a reference :</p>\n\n<pre><code> void func(int &amp;i)\n{\n    i = 44;\n}\n</code></pre>\n\n<p>and you <strong>must</strong> initialize it before doing anything on it.</p>\n\n<p><em>Note</em> :\nYou can specify when you want the arg to be just an <strong>input</strong> with a cont ref :</p>\n\n<pre><code> void func(const int &amp;i)\n{\n    i = 44;\n}\n</code></pre>\n"}], "owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5730, "favorite_count": 0, "accepted_answer_id": 30752281, "answer_count": 2, "score": 11, "last_activity_date": 1433930507, "creation_date": 1433928117, "last_edit_date": 1433930507, "question_id": 30752246, "link": "https://stackoverflow.com/questions/30752246/how-to-mark-function-argument-as-output", "title": "How to mark function argument as output", "body": "<p>C# allows to mark function argument as output only:</p>\n\n<pre><code>void func(out int i)\n{\n    i = 44;\n}\n</code></pre>\n\n<p>Is it possible to do something similar in C/C++? This could improve optimization. Additionally is should silence out warnings \"error: 'myVar' may be used uninitialized in this function\", when variable is not initialized and then passed to function as output argument.</p>\n\n<p>I use gcc/g++ (currently 4.4.7) to compile my code.</p>\n\n<p><strong>Edit:</strong> I know about pointers and references, this is not what I am looking for. I need something like this:</p>\n\n<pre><code>void func(int* __attribute__((out)) i)\n{\n    *i = 44;\n}\n\nvoid func2()\n{\n    int myVal; // gcc will print warning: 'myVar' may be used uninitialized in this function\n    func(&amp;myVal);\n    //...\n}\n</code></pre>\n\n<p><strong>Edit 2:</strong> Some extra code is needed to reproduce warning \"'myVar' may be used uninitialized in this function\". Additionally you have to pass -Wall -O1 to gcc.</p>\n\n<pre><code>void __attribute__((const)) func(int* i)\n{\n    *i = 44;\n}\n\nint func2()\n{\n    int myVal; // warning here\n    func(&amp;myVal);\n    return myVal;\n}\n</code></pre>\n"}, {"tags": ["c", "embedded"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 4, "creation_date": 1433928459, "post_id": 30752238, "comment_id": 49558586, "body": "Side note: You can simplify the <b>entire</b> code to <code>while (*(unsigned char*)0x100 != 0x80);</code>. Assuming that you have some sort of scheduler (OS) in the background, perhaps that <code>usleep</code> allows some other thread to complete its work and set <code>0x80</code> at that address. If it&#39;s an ISR (and not a thread), then there has to be some other reason, because an ISR is always at a higher priority than any other thread in your system."}, {"owner": {"reputation": 1173, "user_id": 1596068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8eb68262670abd792e51d8548c265923?s=128&d=identicon&r=PG", "display_name": "Dobz", "link": "https://stackoverflow.com/users/1596068/dobz"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1433929475, "post_id": 30752238, "comment_id": 49559316, "body": "Thank you. I didn&#39;t think of that, I have now changed my code to <code>*(volatile unsigned char*)</code> and that seems to do the trick."}, {"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "edited": false, "score": 3, "creation_date": 1433929488, "post_id": 30752238, "comment_id": 49559327, "body": "Change <code>unsigned char value</code> to <code>volatile unsigned char value</code> and then check."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 2, "creation_date": 1433930394, "post_id": 30752238, "comment_id": 49559973, "body": "The fact that <code>volatile</code> has solved the problem implies that the problem was the result of a compiler optimization (hence my speculation of a concurrency (multi-threading) issue was wrong)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1433935327, "post_id": 30752238, "comment_id": 49562975, "body": "You should read and <i>understand</i> about <code>volatile</code> and not just use it if someone tells you to! (although he is actually right). It is also good practive to have global variables not at function scope, so it is clearly visible as such."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 2, "creation_date": 1433961950, "post_id": 30752238, "comment_id": 49581950, "body": "Someone post an answer - this is not what comments are for."}], "answers": [{"tags": [], "owner": {"reputation": 1173, "user_id": 1596068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8eb68262670abd792e51d8548c265923?s=128&d=identicon&r=PG", "display_name": "Dobz", "link": "https://stackoverflow.com/users/1596068/dobz"}, "is_accepted": true, "score": 1, "last_activity_date": 1434006871, "creation_date": 1434006871, "answer_id": 30774048, "question_id": 30752238, "link": "https://stackoverflow.com/questions/30752238/comparion-of-values-wont-work-without-delay/30774048#30774048", "title": "Comparion of values won&#39;t work without delay", "body": "<p>Here is the code that worked.</p>\n\n<p>Thanks to @barak-manos &amp;&amp; @santosh-a.  </p>\n\n<p>I needed to change the char to volatile because it would be constantly changing by a different program.</p>\n\n<pre><code>int check_for_pixel_change() {\n\n    // Gets the pixels R value\n    volatile unsigned char value = *(volatile unsigned char *) (0x100);\n\n    if(value == (0x80)) return 0;\n    else return 1;\n}\n\nint main() {\n    // Send move / start timer\n\n    while(check_for_pixel_change());\n\n    // stop timer\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1173, "user_id": 1596068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8eb68262670abd792e51d8548c265923?s=128&d=identicon&r=PG", "display_name": "Dobz", "link": "https://stackoverflow.com/users/1596068/dobz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 30774048, "answer_count": 1, "score": 2, "last_activity_date": 1434381120, "creation_date": 1433928092, "last_edit_date": 1434381120, "question_id": 30752238, "link": "https://stackoverflow.com/questions/30752238/comparion-of-values-wont-work-without-delay", "title": "Comparion of values won&#39;t work without delay", "body": "<p>I'm writing an application that will time mouse latency for our product.</p>\n\n<p>The way it works is that it sends a mouse movement, and measures the time between then and when we get a pixel change on screen.</p>\n\n<p>Why does this delay affect the program.</p>\n\n<pre><code>int check_for_pixel_change() {\n\n    // Gets the pixels R value\n    unsigned char value = *((unsigned char *) (0x100));\n\n    // If this delay is not here then the loop will always return 1\n    usleep(5);\n\n    if(value == (0x80)) return 0;\n    else return 1;\n}\n\nint main() {\n    // Send move / start timer\n\n    while(check_for_pixel_change());\n\n    // stop timer\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "edited": false, "score": 1, "creation_date": 1433927045, "post_id": 30751771, "comment_id": 49557599, "body": "Show what you have tried"}, {"owner": {"reputation": 1486, "user_id": 4782092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-HENS5rBo98k/AAAAAAAAAAI/AAAAAAAAA-U/0t-L_ulUnfI/photo.jpg?sz=128", "display_name": "almost a beginner", "link": "https://stackoverflow.com/users/4782092/almost-a-beginner"}, "edited": false, "score": 0, "creation_date": 1433927234, "post_id": 30751771, "comment_id": 49557737, "body": "char *str; str = (char *) malloc(sizeof(input)); strncpy(str, input, 1000);"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1433927421, "post_id": 30751771, "comment_id": 49557868, "body": "What errors you get? Post your code."}, {"owner": {"reputation": 1486, "user_id": 4782092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-HENS5rBo98k/AAAAAAAAAAI/AAAAAAAAA-U/0t-L_ulUnfI/photo.jpg?sz=128", "display_name": "almost a beginner", "link": "https://stackoverflow.com/users/4782092/almost-a-beginner"}, "edited": false, "score": 0, "creation_date": 1433927474, "post_id": 30751771, "comment_id": 49557901, "body": "i get implicit declaration of function malloc"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 3, "creation_date": 1433927534, "post_id": 30751771, "comment_id": 49557936, "body": "Did you include &lt;stdlib.h&gt; ?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1433927586, "post_id": 30751771, "comment_id": 49557975, "body": "Please take the <a href=\"http://stackoverflow.com/tour\">tour</a> and read <a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask</a> to learn what we expect from questions here. Please show us what you&#39;ve tried already, how it failed and we might be able to help.:-)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1433927866, "post_id": 30751771, "comment_id": 49558158, "body": "Lots of errors... that is ... ?"}], "answers": [{"comments": [{"owner": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 1, "creation_date": 1433928223, "post_id": 30752086, "comment_id": 49558420, "body": "never cast the result of malloc()."}, {"owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "reply_to_user": {"reputation": 5767, "user_id": 27800, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f8d805c02bfa80a79df1381984ac5d3a?s=128&d=identicon&r=PG", "display_name": "Peter Miehle", "link": "https://stackoverflow.com/users/27800/peter-miehle"}, "edited": false, "score": 0, "creation_date": 1433929459, "post_id": 30752086, "comment_id": 49559306, "body": "@PeterMiehle, <code>malloc</code> returns a void pointer <code>(void *)</code>, which indicates that it is a pointer to a region of unknown data type. The use of casting is required in C++ due to the strong type system, whereas this is not the case in C."}, {"owner": {"reputation": 1578, "user_id": 1660022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70ec987fcc983a668f84665c65ada41c?s=128&d=identicon&r=PG", "display_name": "perh", "link": "https://stackoverflow.com/users/1660022/perh"}, "edited": false, "score": 0, "creation_date": 1433930106, "post_id": 30752086, "comment_id": 49559756, "body": ".. and sizeof char is always 1."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1433930466, "post_id": 30752086, "comment_id": 49560018, "body": "@rakeb.void then again, there&#39;s almost no reason to use <code>malloc</code> in C++."}], "tags": [], "owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "is_accepted": true, "score": 2, "last_activity_date": 1433930413, "last_edit_date": 1495541379, "creation_date": 1433927670, "answer_id": 30752086, "question_id": 30751771, "link": "https://stackoverflow.com/questions/30751771/how-to-make-a-copy-of-string-into-a-dynamically-allocated-character-array-of-the/30752086#30752086", "title": "how to make a copy of string into a dynamically allocated character array of the appropriate size?", "body": "<p>Are you looking for something like this:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;    \n    int main() {\n        int i;\n        char input[1000] = \"Sample string\";\n        char *in = malloc(1000 * sizeof(char)); // use dynamic number instead of 1000\n        strcpy(in, input);\n        for (i = 0; i &lt; 5; ++i) { // intentionally printing the first 5 character\n            printf(\"%c\", in[i]);\n        }\n    }\n</code></pre>\n\n<p>The output is:</p>\n\n<blockquote>\n  <p>Sampl</p>\n</blockquote>\n\n<p><strong>Edit:</strong> In <strong>C++</strong> the cast is required for <code>malloc</code>, so I write:</p>\n\n<pre><code>(char *)malloc(1000 * sizeof(char))\n</code></pre>\n\n<p>But in <strong>C</strong>, <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">never cast the result of malloc().</a></p>\n"}, {"comments": [{"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1433935046, "post_id": 30754501, "comment_id": 49562799, "body": "Please take a quick look to this example of how to use realloc properly:<a href=\"http://www.cplusplus.com/reference/cstdlib/realloc/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdlib/realloc</a>. Do not assign the result to the old variable directly. If realloc failes your old memory is also lost!"}, {"owner": {"reputation": 3696, "user_id": 3475279, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8SY68.jpg?s=128&g=1", "display_name": "Arial", "link": "https://stackoverflow.com/users/3475279/arial"}, "reply_to_user": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1433936661, "post_id": 30754501, "comment_id": 49563860, "body": "However, what&#39;s the likelihood of your program not being able to realloc a new memory? Even if it&#39;s not possible to expand the memory in the existing address, you can move to the new address and allocate the new memory as necessary. I don&#39;t think insufficient memory space here is a huge concern."}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 1, "creation_date": 1433936841, "post_id": 30754501, "comment_id": 49564000, "body": "It&#39;s not about insufficient memory. <code>realloc</code> could fail of any other circumstances you can imagine. So its a good practice in the &#39;c-world&#39; to ALWAYS check results of <code>malloc</code>, <code>realloc</code> and other <code>*alloc&#39;s</code> if they returned NULL. Because if so something bad happend and you might want to stop."}, {"owner": {"reputation": 3696, "user_id": 3475279, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8SY68.jpg?s=128&g=1", "display_name": "Arial", "link": "https://stackoverflow.com/users/3475279/arial"}, "reply_to_user": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1433937199, "post_id": 30754501, "comment_id": 49564273, "body": "A very good point! Thanks for pointing that out. You reckon creating a function to check if realloc works will do? :)"}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1433937274, "post_id": 30754501, "comment_id": 49564337, "body": "Yeap thats the most preferable way of doing it."}], "tags": [], "owner": {"reputation": 3696, "user_id": 3475279, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8SY68.jpg?s=128&g=1", "display_name": "Arial", "link": "https://stackoverflow.com/users/3475279/arial"}, "is_accepted": false, "score": 1, "last_activity_date": 1433937372, "last_edit_date": 1433937372, "creation_date": 1433934410, "answer_id": 30754501, "question_id": 30751771, "link": "https://stackoverflow.com/questions/30751771/how-to-make-a-copy-of-string-into-a-dynamically-allocated-character-array-of-the/30754501#30754501", "title": "how to make a copy of string into a dynamically allocated character array of the appropriate size?", "body": "<p>What you can do is just use <strong>strcpy()</strong> offer by C string.h after dynamically allocating memory to your array, as shown:</p>\n\n<pre><code>char *input = malloc(1000*sizeof(char));\n</code></pre>\n\n<p>and if the string you are trying to copy to variable input exceeds the allocated memory size (strlen > 999: don't forget! String has a null terminator '\\0' that takes up the additional 1 char space), just realloc as shown: </p>\n\n<pre><code>input = realloc(input, 1000*2*sizeof(char));\n/* check if realloc works */\nif (!input) {\n    printf(\"Unexpected null pointer when realloc.\\n\");\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n"}], "owner": {"reputation": 1486, "user_id": 4782092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-HENS5rBo98k/AAAAAAAAAAI/AAAAAAAAA-U/0t-L_ulUnfI/photo.jpg?sz=128", "display_name": "almost a beginner", "link": "https://stackoverflow.com/users/4782092/almost-a-beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5721, "favorite_count": 1, "accepted_answer_id": 30752086, "answer_count": 2, "score": 1, "last_activity_date": 1433937372, "creation_date": 1433926957, "question_id": 30751771, "link": "https://stackoverflow.com/questions/30751771/how-to-make-a-copy-of-string-into-a-dynamically-allocated-character-array-of-the", "title": "how to make a copy of string into a dynamically allocated character array of the appropriate size?", "body": "<pre><code>char input[1000];\n</code></pre>\n\n<p>I want to copy input into a dynamically allocated character array, how do I approach this problem.</p>\n\n<p>So far I have used strncpy, but get lots of errors.</p>\n"}, {"tags": ["c", "arrays", "string"], "answers": [{"comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 2, "creation_date": 1433927826, "post_id": 30751993, "comment_id": 49558129, "body": "&quot;When used in an expression&quot; \u2013 no, not in any expression, only when it&#39;s not operand of the <code>sizeof</code> or <code>&amp;</code> operators."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1433928285, "post_id": 30751993, "comment_id": 49558463, "body": "@TheParamagneticCroissant; Yeah. Edited that."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 3, "last_activity_date": 1433929374, "last_edit_date": 1433929374, "creation_date": 1433927461, "answer_id": 30751993, "question_id": 30751759, "link": "https://stackoverflow.com/questions/30751759/array-syntax-confusion/30751993#30751993", "title": "Array Syntax Confusion", "body": "<p><code>\"abcdefgh\"[4]</code> is equivalent to <code>*(\"abcdefgh\" + 4)</code>. When used in an expression (except when it is an operand of unary <code>&amp;</code> and <code>sizeof</code> operator) <code>\"abcdefgh\"</code> represents the base address of string.   </p>\n\n<p>In general, remember that one can use a string literal wherever <code>char *</code> pointer is allowed. In the snippet  </p>\n\n<pre><code>char *ptr;\np = \"abcdefgh\";  \n</code></pre>\n\n<p>the assignment doesn't copy the characters to <code>p</code> instead it makes <code>p</code> points the <strong>first character of the string</strong>. C allows pointers to be subscripted, so we can subscript string literals:  </p>\n\n<pre><code>char ch;  \nch = \"abcdefgh\"[4];  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "is_accepted": false, "score": 0, "last_activity_date": 1433927639, "creation_date": 1433927639, "answer_id": 30752076, "question_id": 30751759, "link": "https://stackoverflow.com/questions/30751759/array-syntax-confusion/30752076#30752076", "title": "Array Syntax Confusion", "body": "<p><code>\"abcdefgh\"</code> is an array. It is an array of characters, similar (but not identical) to as if you had declared a variable of type <code>char[9]</code> and <code>static</code> storage duration:</p>\n\n<pre><code>static char str[9] = { 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 0 };\n</code></pre>\n\n<p>Hence, you can index it just like any other array, using the <code>[]</code> subscript operator.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 4, "last_activity_date": 1433929021, "last_edit_date": 1433929021, "creation_date": 1433927804, "answer_id": 30752137, "question_id": 30751759, "link": "https://stackoverflow.com/questions/30751759/array-syntax-confusion/30752137#30752137", "title": "Array Syntax Confusion", "body": "<p>You will wonder even more if I say that you can write even the following way :)</p>\n\n<pre><code>printf( \"%c\\n\", 4[\"abcdefgh\"] );\n</code></pre>\n\n<p>String literals in C have types of character arrays. Thus string literal \"abcdefgh\" has type <code>char[9]</code>. It includes also the terminating zero.</p>\n\n<p>In expressions arrays as you correctly mentioned decay to pointers to their first elements. So the string literal decays to a pointer of type <code>char *</code>that points to the first character of the literal that is to <code>'a'</code></p>\n\n<p>According to the C Standard (6.5.2.1 Array subscripting)</p>\n\n<blockquote>\n  <p>2 A postfix expression followed by an expression in square brackets <code>[]</code>\n  is a subscripted designation of an element of an array object. The\n  definition of the subscript operator <code>[]</code> is that <code>E1[E2]</code> is identical to\n  <code>(*((E1)+(E2)))</code>. Because of the conversion rules that apply to the\n  binary <code>+</code> operator, if <code>E1</code> is an array object (equivalently, a pointer\n  to the initial element of an array object) and <code>E2</code> is an integer,\n  <code>E1[E2]</code> designates the <code>E2</code>th element of <code>E1</code> (counting from zero).</p>\n</blockquote>\n\n<p>Thus this expression <code>(*((E1)+(E2)))</code> does not depend on whether the initial record was <code>E1[E2]</code> or <code>E2[E1]</code></p>\n\n<p>Returning to your code shippet you have that in this expression</p>\n\n<pre><code>4[\"abcdefgh\"]\n</code></pre>\n\n<p>the string literal is converted to the pointer to its first character. You can imagine this like</p>\n\n<pre><code>char *p = \"abcdefgh\";\n</code></pre>\n\n<p>and you will get</p>\n\n<p><code>4[p]</code> is equivalent to <code>*( 4 + p )</code> and results in lvalue of character <code>'e'</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4418808"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "accepted_answer_id": 30752137, "answer_count": 3, "score": 3, "last_activity_date": 1433929374, "creation_date": 1433926918, "last_edit_date": 1433929335, "question_id": 30751759, "link": "https://stackoverflow.com/questions/30751759/array-syntax-confusion", "title": "Array Syntax Confusion", "body": "<p>It is a known thing that array names decay into pointer such as <code>a[i]</code> is equivalent to <code>*(a+i)</code>. I stumbled upon a question asking me predict the output of: </p>\n\n<pre><code>int main(void)\n{\n   printf(\"%c\", \"abcdefgh\"[4]);\n   return 0;\n}\n</code></pre>\n\n<p>The answer they say is <code>e</code> and the reason given by them is as <code>a[4]</code> gets converted into <code>*(a+4)</code> where <code>a</code> is base address of array <code>a</code> on similar lines we can find the output of above question.</p>\n\n<p>But how I don't understand as with <code>a[i]</code> decaying into <code>*(a+i)</code> because compiler treats it that way but in the code snippet above how and why we will treat <code>\"abcdef\"[4]</code> this?</p>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1434017877, "post_id": 30751723, "comment_id": 49606040, "body": "It did get a real answer. Perhaps it would have been better if you&#39;d asked for clarification there."}], "answers": [{"comments": [{"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433926977, "post_id": 30751758, "comment_id": 49557561, "body": "Yes, but how can it tell from that what files changed? It must store the information somewhere."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433927057, "post_id": 30751758, "comment_id": 49557606, "body": "@MightyPork Yes, in the <i>filesystem</i>. Filesystems have timestamps for creation and modification built into them."}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433927094, "post_id": 30751758, "comment_id": 49557630, "body": "Yeah I&#39;m just trying to understand. So make touches the target file when rebuilding it?"}, {"owner": {"reputation": 9386, "user_id": 997813, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e917968317abb617b39d12613b1975a9?s=128&d=identicon&r=PG", "display_name": "Arjun Sreedharan", "link": "https://stackoverflow.com/users/997813/arjun-sreedharan"}, "edited": false, "score": 0, "creation_date": 1433927141, "post_id": 30751758, "comment_id": 49557666, "body": "@JoachimPileborg what&#39;s with the <code>--print-data-base</code> option? any idea?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433927155, "post_id": 30751758, "comment_id": 49557677, "body": "@MightyPork No <code>make</code> doesn&#39;t have to do it, the timestamps are set automatically when a file is modified or created, for example by the compiler."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 9386, "user_id": 997813, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e917968317abb617b39d12613b1975a9?s=128&d=identicon&r=PG", "display_name": "Arjun Sreedharan", "link": "https://stackoverflow.com/users/997813/arjun-sreedharan"}, "edited": false, "score": 0, "creation_date": 1433927216, "post_id": 30751758, "comment_id": 49557720, "body": "@ArjunSreedharan It&#39;s the internal <i>in memory</i> database that <code>make</code> builds to store the data it needs while running. There is no such database saved to disk between invocations."}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433927226, "post_id": 30751758, "comment_id": 49557727, "body": "No that can&#39;t possibly work, I have <code>noatime</code> mount option, nothing is changed when you <i>read</i> the file."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 1, "creation_date": 1433927246, "post_id": 30751758, "comment_id": 49557748, "body": "@MightyPork <code>noatime</code> is for the <i>access</i> time, not <i>modification</i> time. Those are two different fields in the filesystem."}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433927264, "post_id": 30751758, "comment_id": 49557761, "body": "But that implies that make must touch the file, no?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433927296, "post_id": 30751758, "comment_id": 49557781, "body": "@MightyPork No, the <i>compiler</i> &quot;touches&quot; the target files, the <code>make</code> program doesn&#39;t need to."}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433927665, "post_id": 30751758, "comment_id": 49558027, "body": "Okay I can accept this, but I don&#39;t believe that&#39;s correct. I don&#39;t think make can blindly trust the compiler to change modification time of the files it <i>reads</i>..."}, {"owner": {"reputation": 10212, "user_id": 970543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wq9T6.jpg?s=128&g=1", "display_name": "Nik Bougalis", "link": "https://stackoverflow.com/users/970543/nik-bougalis"}, "edited": false, "score": 2, "creation_date": 1433927769, "post_id": 30751758, "comment_id": 49558094, "body": "The compiler doesn&#39;t have to change the modification times of the files it reads: the editor you use to edit the code does that. The compiler only changes the modification time of the files it generates or changes (object files, etc). This is pretty straight forward stuff..."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 13, "last_activity_date": 1433927111, "last_edit_date": 1433927111, "creation_date": 1433926918, "answer_id": 30751758, "question_id": 30751723, "link": "https://stackoverflow.com/questions/30751723/how-does-make-remember-the-file-timestamps/30751758#30751758", "title": "How does MAKE remember the file timestamps", "body": "<p>There is no such \"database\". The program simply compare the filesystems modification and creation timestamps of source and target files.</p>\n\n<p>Lets say you have the following rule:</p>\n\n<pre><code>some_target: some_source_1 some_source_2\n</code></pre>\n\n<p>Then if the modified timestamp of either <code>some_source_1</code> or <code>some_source_2</code> is later than the modification/creation time of <code>some_target</code> then the rule will activate and the target will be rebuilt.</p>\n"}, {"tags": [], "owner": {"reputation": 6099, "user_id": 1638010, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/02688b7723adbdc1a47705b2bf6b617c?s=128&d=identicon&r=PG", "display_name": "Craig S. Anderson", "link": "https://stackoverflow.com/users/1638010/craig-s-anderson"}, "is_accepted": false, "score": 6, "last_activity_date": 1433927929, "creation_date": 1433927929, "answer_id": 30752177, "question_id": 30751723, "link": "https://stackoverflow.com/questions/30751723/how-does-make-remember-the-file-timestamps/30752177#30752177", "title": "How does MAKE remember the file timestamps", "body": "<p>Makefiles describe <em>targets</em> and <em>dependencies</em>.  <code>Make</code> executes commands to create/recreate the target(s) if necessary.</p>\n\n<p>If the target doesn't exist, then <code>make</code> will try to create it.</p>\n\n<p>If the target does exist, <code>make</code> compares the modification times of the target and its dependencies.  If any of the dependencies was modified after the target was modified, then <code>make</code> will execute the command(s) to regenerate the target.</p>\n\n<p>For example, for C files the target is the corresponding <code>.o</code> file and the dependency is on the file containing the C source code (and possibly some include files).  If the <code>.c</code> file is newer than the <code>.o</code> file, then <code>make</code> runs the C compiler.  This will generate a <code>.o</code> file with a newer modification time than the <code>.c</code> file.</p>\n"}], "owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1845, "favorite_count": 2, "accepted_answer_id": 30751758, "answer_count": 2, "score": 5, "last_activity_date": 1433927929, "creation_date": 1433926828, "last_edit_date": 1495535644, "question_id": 30751723, "link": "https://stackoverflow.com/questions/30751723/how-does-make-remember-the-file-timestamps", "title": "How does MAKE remember the file timestamps", "body": "<p>I've found <a href=\"https://stackoverflow.com/questions/7507355/how-does-make-track-timestamps\">this question</a> which is basically asking the same, but got no real answer.</p>\n\n<p>Where is the <code>make</code>'s config file / database file where it remembers the file timestamps, so it can tell what changed? I checked and there's no <code>.make</code> or similar in my project, nor in the home directory.</p>\n\n<p>Or does it somehow store the information inside the files themselves, perhaps by modifying the timestamps? (That sounds fishy though)</p>\n"}, {"tags": ["c++", "c", "opencv", "optimization"], "comments": [{"owner": {"reputation": 3553, "user_id": 2863154, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e451732f6ff8efd541922b6075a47198?s=128&d=identicon&r=PG", "display_name": "\u042fois", "link": "https://stackoverflow.com/users/2863154/%d0%afois"}, "edited": false, "score": 1, "creation_date": 1433927381, "post_id": 30751683, "comment_id": 49557842, "body": "Have you tried measuring it?"}, {"owner": {"reputation": 150, "user_id": 2190409, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/657b4a2fdf99c849e8200f49532c390a?s=128&d=identicon&r=PG", "display_name": "giuseppe", "link": "https://stackoverflow.com/users/2190409/giuseppe"}, "reply_to_user": {"reputation": 3553, "user_id": 2863154, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e451732f6ff8efd541922b6075a47198?s=128&d=identicon&r=PG", "display_name": "\u042fois", "link": "https://stackoverflow.com/users/2863154/%d0%afois"}, "edited": false, "score": 0, "creation_date": 1433939487, "post_id": 30751683, "comment_id": 49565893, "body": "Actually I didn&#39;t I thought some one knew the answer without having to test them. So far I decided to implement the operation by myself, since were just vector/matrix multiplications."}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 0, "creation_date": 1433954359, "post_id": 30751683, "comment_id": 49577240, "body": "Prewritten matrix libraries are usually optimized, and you will have a very hard time approaching the same level of performance.  If the native matrix operations map well onto the work you want to do, you have every reason to use them.  If they don&#39;t, what&#39;s the question?"}], "answers": [{"comments": [{"owner": {"reputation": 5463, "user_id": 3198247, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8b74cda6fdfa7637a602efabf115f02f?s=128&d=identicon&r=PG&f=1", "display_name": "anderas", "link": "https://stackoverflow.com/users/3198247/anderas"}, "edited": false, "score": 0, "creation_date": 1433930104, "post_id": 30752412, "comment_id": 49559754, "body": "This seems to be CUDA code, what is its relation to the question?"}, {"owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "reply_to_user": {"reputation": 5463, "user_id": 3198247, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8b74cda6fdfa7637a602efabf115f02f?s=128&d=identicon&r=PG&f=1", "display_name": "anderas", "link": "https://stackoverflow.com/users/3198247/anderas"}, "edited": false, "score": 0, "creation_date": 1433930948, "post_id": 30752412, "comment_id": 49560367, "body": "changed the code, the point is OpenCV is optimised unless you have a very specific example"}], "tags": [], "owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "is_accepted": false, "score": 1, "last_activity_date": 1433930927, "last_edit_date": 1433930927, "creation_date": 1433928564, "answer_id": 30752412, "question_id": 30751683, "link": "https://stackoverflow.com/questions/30751683/are-opencv-matrix-operations-faster-than-simple-for-loop-iterations/30752412#30752412", "title": "Are OpenCV matrix operations faster than simple for loop iterations?", "body": "<p>OpenCV cv::Mat classes use pointers in order to make them as efficient as possible. That being said, if you want to do a very specific manipulation you may find it quicker to implement yourself.</p>\n\n<p>Below is the simple cv::Mat transpose code from the OpenCV Source Code:</p>\n\n<pre><code>void MatOp::transpose(const MatExpr&amp; expr, MatExpr&amp; res) const\n{\nMat m;\nexpr.op-&gt;assign(expr, m);\nMatOp_T::makeExpr(res, m, 1);\n}\n</code></pre>\n"}], "owner": {"reputation": 150, "user_id": 2190409, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/657b4a2fdf99c849e8200f49532c390a?s=128&d=identicon&r=PG", "display_name": "giuseppe", "link": "https://stackoverflow.com/users/2190409/giuseppe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 549, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433930927, "creation_date": 1433926729, "question_id": 30751683, "link": "https://stackoverflow.com/questions/30751683/are-opencv-matrix-operations-faster-than-simple-for-loop-iterations", "title": "Are OpenCV matrix operations faster than simple for loop iterations?", "body": "<p>I want to understand if I should prefer to use the matrix operations defined for the cv::Mat class of OpenCV or if their computational time is the same of iterating with for loop on array of doubles.</p>\n"}, {"tags": ["c++", "c", "arrays", "big-o"], "comments": [{"owner": {"reputation": 3107, "user_id": 1928235, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8119b4672d36b04e505f44e0e9187eea?s=128&d=identicon&r=PG", "display_name": "user4520", "link": "https://stackoverflow.com/users/1928235/user4520"}, "edited": false, "score": 0, "creation_date": 1433926929, "post_id": 30751653, "comment_id": 49557533, "body": "It would be <code>O(n^2)</code> if you had to iterate over the entire array and its elements which are arrays themselves. A simple assignment like this is usually one CPU instruction, so it&#39;s <code>O(1)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 4316, "user_id": 1742659, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/BpSsV.jpg?s=128&g=1", "display_name": "dfranca", "link": "https://stackoverflow.com/users/1742659/dfranca"}, "is_accepted": true, "score": 4, "last_activity_date": 1433926810, "creation_date": 1433926810, "answer_id": 30751716, "question_id": 30751653, "link": "https://stackoverflow.com/questions/30751653/big-o-insert-for-2-dimensional-array/30751716#30751716", "title": "Big-O insert for 2 dimensional array", "body": "<p>You are not inserting, right? You are assigning, direct to a specific address and you don't need to figure out the right position before hand.</p>\n\n<p>That means you don't need to do any loop, don't need to go through any computing before find the position and assign, and the memory is already allocated.</p>\n\n<p>so it's O(1), constant doesn't matter the input.</p>\n"}, {"tags": [], "owner": {"reputation": 11008, "user_id": 1230257, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/Gcmi0.jpg?s=128&g=1", "display_name": "Danyal Sandeelo", "link": "https://stackoverflow.com/users/1230257/danyal-sandeelo"}, "is_accepted": false, "score": 0, "last_activity_date": 1433927221, "creation_date": 1433927221, "answer_id": 30751877, "question_id": 30751653, "link": "https://stackoverflow.com/questions/30751653/big-o-insert-for-2-dimensional-array/30751877#30751877", "title": "Big-O insert for 2 dimensional array", "body": "<p>Since you are assigning value directly to a particular position in an array so that ORDER will be O(1)</p>\n\n<p>if you are iterating over it via 2 loops then it will be O(n^2) since for each i there will be a complete j iteration. For example:</p>\n\n<pre><code>for(int i=0; i&lt;n;i++){\n for(int j=0; j&lt;n;j++){\n }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1859, "user_id": 2157639, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/faaf63a16923788f63d2a2b68c8d3c6b?s=128&d=identicon&r=PG", "display_name": "Ivan  Ivanov", "link": "https://stackoverflow.com/users/2157639/ivan-ivanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1433927223, "creation_date": 1433927223, "answer_id": 30751880, "question_id": 30751653, "link": "https://stackoverflow.com/questions/30751653/big-o-insert-for-2-dimensional-array/30751880#30751880", "title": "Big-O insert for 2 dimensional array", "body": "<ol>\n<li>I suppose you are talking about ordered array, because for unordered it is O(1). You copy element [n][m] to the end and put new element to [n][m]</li>\n<li>I think you are talking about inserting, and not assigning, because for assign it is O(1).</li>\n<li>if your array is ordered then O(N*N) to move all elements</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1708, "user_id": 1525291, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/abbcadce9b10be43fdb0b5a4cdba2424?s=128&d=identicon&r=PG", "display_name": "Zolt&#225;n Haindrich", "link": "https://stackoverflow.com/users/1525291/zolt%c3%a1n-haindrich"}, "is_accepted": false, "score": 0, "last_activity_date": 1433930827, "last_edit_date": 1433930827, "creation_date": 1433928922, "answer_id": 30752552, "question_id": 30751653, "link": "https://stackoverflow.com/questions/30751653/big-o-insert-for-2-dimensional-array/30752552#30752552", "title": "Big-O insert for 2 dimensional array", "body": "<p>an assignment operation in c can be threated as a O(1) for primitives</p>\n\n<p>however: if you are doing a lot of assignments for random positions other players come out to the field...</p>\n\n<p>consider the following 2 examples:</p>\n\n<p>ex1.c:</p>\n\n<pre><code>#define W 1&lt;&lt;12\n#define H W\nint a[H][W];\n\nint main(){\n\n    for(int j=0;j&lt; W ;j++){\n    for(int i=0;i&lt; H ;i++){\n       a[i][j]=1;\n    }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>ex2.cpp:</p>\n\n<pre><code>#define W 1&lt;&lt;12\n#define H W\nint     a[H][W];\n\nint main(){\n\n    for(int j=0;j&lt; H ;j++){\n    for(int i=0;i&lt; W ;i++){\n       a[i][j]=1;\n    }\n    }\n        return 0;\n}\n\nCFLAGS=-O3 g++ ex1.c -o e1  &amp;&amp; g++ ex2.c -o e2  &amp;&amp; time ./e1 &amp;&amp; time ./e2 &amp;&amp; time ./e1\nuser    0m0.332s\nuser    0m0.048s\nuser    0m0.320s\n</code></pre>\n\n<p>as you can see ex1 was slower!</p>\n\n<p>dependending on the used compiler optimazation level and it's abilities these two can behave very differently, even thru they are doing the same</p>\n\n<p>if you are doing some random access, the cpu L1 cache will start to miss pages, which will cause a few wasted cycles to pull/put a page.\nif L2 was able to service L1's miss, then that's okay - if L2 has a miss the same happens at the L2 level...i think you get the picture ;)</p>\n\n<p>more:\n<a href=\"http://en.wikipedia.org/wiki/CPU_cache\" rel=\"nofollow\">http://en.wikipedia.org/wiki/CPU_cache</a></p>\n\n<p>you may even create data hazards, it's impact is a magnitude smaller - but very intresting\n<a href=\"http://en.wikipedia.org/wiki/Hazard_%28computer_architecture%29#Data_hazards\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Hazard_%28computer_architecture%29#Data_hazards</a></p>\n"}], "owner": {"reputation": 11, "user_id": 4961197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21194c22a1eac197301a2cc3af24b347?s=128&d=identicon&r=PG&f=1", "display_name": "\uc591\uc218\ud604", "link": "https://stackoverflow.com/users/4961197/%ec%96%91%ec%88%98%ed%98%84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 30751716, "answer_count": 4, "score": 0, "last_activity_date": 1433930827, "creation_date": 1433926653, "last_edit_date": 1433926972, "question_id": 30751653, "link": "https://stackoverflow.com/questions/30751653/big-o-insert-for-2-dimensional-array", "title": "Big-O insert for 2 dimensional array", "body": "<p>If i have N x N 2 dimensional array and the name is a.</p>\n\n<pre><code>int a[N][N];\n</code></pre>\n\n<p>When i Insert any value in any array, for example, <code>a[N-1][N-1]=1</code>, how much time does it take?</p>\n\n<p><code>O(N^2)</code> or <code>O(1)</code>?</p>\n"}, {"tags": ["c", "ubuntu"], "comments": [{"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1433926998, "post_id": 30751532, "comment_id": 49557580, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/1619020/how-to-check-if-a-process-with-a-pid-x-is-a-zombie\">How to check if a process with a pid X is a zombie?</a>"}, {"owner": {"reputation": 13, "user_id": 4961841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da811c7782ac15d99fb2437cebb9fe06?s=128&d=identicon&r=PG&f=1", "display_name": "sandivratar", "link": "https://stackoverflow.com/users/4961841/sandivratar"}, "reply_to_user": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 1, "creation_date": 1433927230, "post_id": 30751532, "comment_id": 49557730, "body": "maybe there is some of the similarities but i wroted a code."}], "answers": [{"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 1, "last_activity_date": 1433956985, "last_edit_date": 1433956985, "creation_date": 1433938358, "answer_id": 30756025, "question_id": 30751532, "link": "https://stackoverflow.com/questions/30751532/zombie-process-finding-it/30756025#30756025", "title": "Zombie process - Finding it", "body": "<p>The following applies to Linux (at least):</p>\n\n<ul>\n<li><p>The status of a process can be found in <code>/proc/[pid]/status</code>.</p></li>\n<li><p>For a zombie the file <code>/proc/[pid]/cmdline</code> is empty, that is reading from it returns <code>0</code> bytes.</p></li>\n</ul>\n\n<p>For details please see here: <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow\">http://man7.org/linux/man-pages/man5/proc.5.html</a></p>\n"}], "owner": {"reputation": 13, "user_id": 4961841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da811c7782ac15d99fb2437cebb9fe06?s=128&d=identicon&r=PG&f=1", "display_name": "sandivratar", "link": "https://stackoverflow.com/users/4961841/sandivratar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 30756025, "answer_count": 1, "score": 1, "last_activity_date": 1433956985, "creation_date": 1433926355, "last_edit_date": 1433928241, "question_id": 30751532, "link": "https://stackoverflow.com/questions/30751532/zombie-process-finding-it", "title": "Zombie process - Finding it", "body": "<p>I used inotify() function in my program to monitor /proc directory. Now my job is to find when a process become zombie. Then i need output a warning that zombie process was found. At the moment program is recording some of the changes but i don't know how to find zombie process..</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/inotify.h&gt;\n#include &lt;limits.h&gt;\n\nint main()\n{\n    int inotify_fd, wd;\n    int num;\n\n    char buffer[sizeof(struct inotify_event)+NAME_MAX+1];  \n    struct inotify_event *dogodek;\n\n    inotify_fd = inotify_init();  \n    if (inotify_fd==-1) {\n        perror(\"inotify_init\");\n        return 1;\n    }\n\n\n    wd = inotify_add_watch(inotify_fd, \"/proc/\",IN_ALL_EVENTS);  \n    if (wd==-1) {                                                     \n        perror(\"inotify_add_watch\");\n        return 1;\n    }\n\n    printf(\"Map gots descriptor %d\\n\",wd);\n\n    int f;\n    for (f=0; f&lt;20; f++) {  \n        num=read(inotify_fd, &amp;buffer, sizeof(buffer));\n        if (num&gt;0) {\n            dogodek=(struct inotify_event*)buffer; \n\n            printf(\"Access to map with descriptor %d\\n\", dogodek-&gt;wd);\n            if (dogodek-&gt;len&gt;0)  \n                printf(\"\\tevent found: %s\\n\", dogodek-&gt;name);\n            else\n                printf(\"\\tevent found in directory!\\n\");\n\n\n            printf(\"\\tMask of the event %x\\n\", dogodek-&gt;mask);\n            if (dogodek-&gt;mask &amp; IN_ACCESS)\n                printf(\"\\t\\tReading file!\\n\");\n\n            if (dogodek-&gt;mask &amp; IN_CREATE) \n                printf(\"\\t\\tCreating file!\\n\");\n\n            if (dogodek-&gt;mask &amp; IN_DELETE) \n                printf(\"\\t\\tDeleting file!\\n\");\n\n            if (dogodek-&gt;mask &amp; IN_OPEN) \n                printf(\"\\t\\tOpening file!\\n\");\n\n\n\n\n        }\n    }\n    inotify_rm_watch(inotify_fd, wd); \n    return 0;\n}\n</code></pre>\n\n<p>I need example in code not just explation if there is a possibility.</p>\n"}, {"tags": ["c", "algorithm", "tree", "binary-tree", "binary-search-tree"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1433926322, "post_id": 30751472, "comment_id": 49557133, "body": "Aren&#39;t you missing a <code>return</code> somewhere in the function? And what is <code>accum_depth</code>?"}, {"owner": {"reputation": 165886, "user_id": 572670, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5011cf6d98e276b1bdc2cb321546e528?s=128&d=identicon&r=PG", "display_name": "amit", "link": "https://stackoverflow.com/users/572670/amit"}, "edited": false, "score": 0, "creation_date": 1433926483, "post_id": 30751472, "comment_id": 49557247, "body": "What&#39;s the definition of average depth of a tree anyway? Is it Sum{depth(v) | for all  nodes v}/#nodes?"}, {"owner": {"reputation": 12292, "user_id": 1990169, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ohZfn.jpg?s=128&g=1", "display_name": "Abhishek Bansal", "link": "https://stackoverflow.com/users/1990169/abhishek-bansal"}, "edited": false, "score": 0, "creation_date": 1433926567, "post_id": 30751472, "comment_id": 49557284, "body": "You shouldn&#39;t add the depths of left and right subtrees but choose and return the larger of the two (after adding 1)."}, {"owner": {"reputation": 3696, "user_id": 3475279, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8SY68.jpg?s=128&g=1", "display_name": "Arial", "link": "https://stackoverflow.com/users/3475279/arial"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1433927818, "post_id": 30751472, "comment_id": 49558123, "body": "Thanks for noticing my mistakes @JoachimPileborg, I&#39;ve corrected them in the above question :)"}, {"owner": {"reputation": 3696, "user_id": 3475279, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8SY68.jpg?s=128&g=1", "display_name": "Arial", "link": "https://stackoverflow.com/users/3475279/arial"}, "edited": false, "score": 0, "creation_date": 1433927880, "post_id": 30751472, "comment_id": 49558172, "body": "Correct me if I&#39;m wrong. From my understanding, average depth of objects in the tree is equal to the sum of depth from each nodes / total object in the tree?"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1433928003, "post_id": 30751472, "comment_id": 49558256, "body": "Yes I was wrong in my previous comment. The average depth is not simply the sum of average of left / right divided by two, you have to weight in the number of branches in each sub-branch"}, {"owner": {"reputation": 3696, "user_id": 3475279, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8SY68.jpg?s=128&g=1", "display_name": "Arial", "link": "https://stackoverflow.com/users/3475279/arial"}, "reply_to_user": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1433928101, "post_id": 30751472, "comment_id": 49558318, "body": "Thanks for the help anyway! @Eregrith All good :)"}, {"owner": {"reputation": 3970, "user_id": 1151654, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bc251d76cd38dae9e0d62360facbf790?s=128&d=identicon&r=PG", "display_name": "Eregrith", "link": "https://stackoverflow.com/users/1151654/eregrith"}, "edited": false, "score": 0, "creation_date": 1433928659, "post_id": 30751472, "comment_id": 49558733, "body": "Average depth might in fact simply be defined as <i>The depth of the binary tree if it was balanced</i>, isn&#39;t it?"}, {"owner": {"reputation": 3696, "user_id": 3475279, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8SY68.jpg?s=128&g=1", "display_name": "Arial", "link": "https://stackoverflow.com/users/3475279/arial"}, "edited": false, "score": 0, "creation_date": 1433929152, "post_id": 30751472, "comment_id": 49559102, "body": "Hmm.. I&#39;m not too sure about that though. I&#39;m just trying to come up with a very basic algorithm that could calculate the average depth of any kind of binary tree, since binary tree are not always balanced anyway. Any link that would be helpful to read on to calculate the depth of a balanced binary tree?"}], "answers": [{"comments": [{"owner": {"reputation": 3696, "user_id": 3475279, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8SY68.jpg?s=128&g=1", "display_name": "Arial", "link": "https://stackoverflow.com/users/3475279/arial"}, "edited": false, "score": 0, "creation_date": 1433928361, "post_id": 30751648, "comment_id": 49558519, "body": "Thanks for the answer. You have a typo up there as the int variable depth is not declared in the function. I&#39;m assuming that it&#39;s meant to be the variable accum instead? However, the total_depth function does not return the right value. :("}, {"owner": {"reputation": 9386, "user_id": 997813, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e917968317abb617b39d12613b1975a9?s=128&d=identicon&r=PG", "display_name": "Arjun Sreedharan", "link": "https://stackoverflow.com/users/997813/arjun-sreedharan"}, "reply_to_user": {"reputation": 3696, "user_id": 3475279, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8SY68.jpg?s=128&g=1", "display_name": "Arial", "link": "https://stackoverflow.com/users/3475279/arial"}, "edited": false, "score": 0, "creation_date": 1433928493, "post_id": 30751648, "comment_id": 49558608, "body": "Yes, I meant <code>accum</code>. You need to get the cumulative depth of all nodes, don&#39;t you?"}, {"owner": {"reputation": 3696, "user_id": 3475279, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8SY68.jpg?s=128&g=1", "display_name": "Arial", "link": "https://stackoverflow.com/users/3475279/arial"}, "edited": false, "score": 0, "creation_date": 1433929698, "post_id": 30751648, "comment_id": 49559489, "body": "Yes. Your function is almost right, however it seems to return additional sum of accum instead of the correct ones. I tried to play around with it and realised what actually went wrong. As the recursive function keeps looping until it reaches the leave node (where the node has no child node), it returns accum. Instead, it should return 0 if tree == NULL. Thanks for your help! Everything works like a charm now!"}], "tags": [], "owner": {"reputation": 9386, "user_id": 997813, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e917968317abb617b39d12613b1975a9?s=128&d=identicon&r=PG", "display_name": "Arjun Sreedharan", "link": "https://stackoverflow.com/users/997813/arjun-sreedharan"}, "is_accepted": true, "score": 2, "last_activity_date": 1433936010, "last_edit_date": 1433936010, "creation_date": 1433926642, "answer_id": 30751648, "question_id": 30751472, "link": "https://stackoverflow.com/questions/30751472/function-that-return-average-depth-of-a-binary-search-tree/30751648#30751648", "title": "Function that return average depth of a binary search tree", "body": "<p>You should be doing something like:</p>\n\n<pre><code>int total_depth(tree_t *tree, int accum)\n{\n    if (tree == NULL) {\n        return 0;\n    }\n    return accum +\n        total_depth(tree-&gt;left, accum + 1) +\n        total_depth(tree-&gt;right, accum + 1);\n}\n\ntotal_depth(root, 0);\n</code></pre>\n"}], "owner": {"reputation": 3696, "user_id": 3475279, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8SY68.jpg?s=128&g=1", "display_name": "Arial", "link": "https://stackoverflow.com/users/3475279/arial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2238, "favorite_count": 0, "accepted_answer_id": 30751648, "answer_count": 1, "score": 2, "last_activity_date": 1516700317, "creation_date": 1433926200, "last_edit_date": 1516700317, "question_id": 30751472, "link": "https://stackoverflow.com/questions/30751472/function-that-return-average-depth-of-a-binary-search-tree", "title": "Function that return average depth of a binary search tree", "body": "<p>I have the following binary tree structure, and I'd like to write a function that calculates and return the <strong>average depth</strong> of objects in a tree.\nHere is what I'm trying to do: </p>\n\n<ul>\n<li>calculate the total height of the tree</li>\n<li>divide total height/total nodes</li>\n</ul>\n\n<p>However, I'm getting nowhere, and would love to have any helpful suggestions in terms of how can I go about implementing the algorithm.  </p>\n\n<pre><code>typedef struct tree_s tree_t;\nstruct tree_s {\n    int num;\n    tree_t *left;\n    tree_t *right;\n}\n\n\nint total_depth(tree_t *tree, int accum) {\n    if (tree == NULL) {\n        return accum; /* done */\n    }\n    accum = accum + total_depth(tree-&gt;left, accum+1);\n    accum = accum + total_depth(tree-&gt;right, accum+1);\n    return accum;\n}\n</code></pre>\n\n<p>There seems to be something wrong with my recursive function total_depth, as i'm getting a ridiculously large number.</p>\n"}, {"tags": ["c", "algorithm", "random"], "answers": [{"comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1433926680, "post_id": 30751560, "comment_id": 49557359, "body": "Problem with this approach is when <code>-s1 &lt; 0</code> and/or <code>k - s1 &gt; 255</code>."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1433929026, "post_id": 30751560, "comment_id": 49559018, "body": "Looks like it works now ... but too much math for this early in the morning :)"}, {"owner": {"reputation": 75, "user_id": 4993952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/257d1908a71e320b6abb8a861e4ba610?s=128&d=identicon&r=PG&f=1", "display_name": "Moeder", "link": "https://stackoverflow.com/users/4993952/moeder"}, "edited": false, "score": 0, "creation_date": 1433929546, "post_id": 30751560, "comment_id": 49559375, "body": "Fantastic! Thank you very much!"}], "tags": [], "owner": {"reputation": 4365, "user_id": 3275167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2d5b6485571a870043f694cfb979eefa?s=128&d=identicon&r=PG&f=1", "display_name": "coderz", "link": "https://stackoverflow.com/users/3275167/coderz"}, "is_accepted": false, "score": 1, "last_activity_date": 1433929314, "last_edit_date": 1433929314, "creation_date": 1433926404, "answer_id": 30751560, "question_id": 30751360, "link": "https://stackoverflow.com/questions/30751360/array-of-random-numbers-with-sum-in-given-range/30751560#30751560", "title": "Array of random numbers with sum in given range?", "body": "<p>It is easy to create one number within range <code>[0, 255]</code>.</p>\n\n<p>It is easy to identify if <code>k &gt; 255*n</code> or <code>k &lt; 0</code> there is no solution.</p>\n\n<p>If <code>0 &lt;= k &lt;= 255*n</code>, the solution exists. Here we only talk about <code>n &gt; 1</code> condition.</p>\n\n<p>You have created <code>n-1</code> random numbers, and sum of the <code>n-1</code> numbers is <code>s1</code>, suppose the nth number is <code>x</code>. So <code>s1 + x = k</code>, and x should be <code>[0, 255]</code>. <strong><em>If the <code>n-1</code> numbers are all within range <code>[0, a]</code>, then <code>(n-1)*a + 255 &gt;= k</code></em></strong>, we get <code>a &gt;= (k-255)/(n-1)</code>.</p>\n\n<p>If <code>k &gt; 255</code>, just let <code>a = (k-255)/(n-1)</code>. It means <code>s1</code> is <code>[0, k-255]</code>. Then the nth number <code>x</code> can be any random number within <code>[0, 255]</code>.\nSo the solution is arbitrary select <code>n-1</code> numbers each within <code>[0, (k-255)/(n-1)]</code> (you know <code>(k-255)/(n-1) &lt;= 255</code>, thus it satisfied your condition), and select one random number within <code>[0, 255]</code>.</p>\n\n<p>If <code>k &lt;= 255</code>, arbitrary select <code>n</code> numbers each within <code>[0, k/n]</code> (you know <code>k/n</code> is within [0, 255]).</p>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 3, "last_activity_date": 1433928165, "creation_date": 1433928165, "answer_id": 30752264, "question_id": 30751360, "link": "https://stackoverflow.com/questions/30751360/array-of-random-numbers-with-sum-in-given-range/30752264#30752264", "title": "Array of random numbers with sum in given range?", "body": "<p>Assuming <code>k</code> is less than <code>255 * n</code> one solution is to assign <code>k / n</code> to every element of the array, then randomly subtract a value to the array elements.</p>\n\n<pre><code>// for (int i = 0; i &lt; n; i++) array[i] = k / n;\n// for (int i = 0; i &lt; n; i++) array[i] -= randbetween(0, array[i]);\nfor (int i = 0; i &lt; n; i++) array[i] = randbetween(0, k / n);\n</code></pre>\n\n<p>This has an expected sum of <code>k / 2</code>. By tweaking the <code>randbetween()</code> function you can change the probability of the resulting array sum.</p>\n"}, {"tags": [], "owner": {"reputation": 1338, "user_id": 2814378, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/057b03715c3b8ee3b816fe10d125eb69?s=128&d=identicon&r=PG&f=1", "display_name": "Blaf", "link": "https://stackoverflow.com/users/2814378/blaf"}, "is_accepted": true, "score": 4, "last_activity_date": 1433929567, "creation_date": 1433929567, "answer_id": 30752792, "question_id": 30751360, "link": "https://stackoverflow.com/questions/30751360/array-of-random-numbers-with-sum-in-given-range/30752792#30752792", "title": "Array of random numbers with sum in given range?", "body": "<p>You need to specify what is the desired distribution of the random numbers.</p>\n\n<p>If there are no further requirements, I would suggest one of the following:</p>\n\n<hr>\n\n<p>(1)</p>\n\n<ul>\n<li>pick random number <em>a[1]</em> in interval <em>0 .. k</em></li>\n<li>pick random number <em>a[2]</em> in interval <em>0 .. k-a[1]</em></li>\n<li>pick random number <em>a[3]</em> in interval <em>0 .. k-a[1]-a[2]</em></li>\n<li>...</li>\n<li>pick random number <em>a[n]</em> in interval <em>0 .. k-a[1]-a[2]-...-a[n-1]</em></li>\n</ul>\n\n<p>If you have upper limit <em>m</em> on the range of the random number, use <em>min(k-a[1]-... m)</em> as upper bound of the interval.</p>\n\n<p>Disadvantages: you will get a lot of small numbers and just a few big ones.</p>\n\n<hr>\n\n<p>(2)</p>\n\n<ul>\n<li>pick <em>n</em> random numbers <em>a[1], .., a[n]</em> in interval <em>0 .. m</em>, <em>m</em> being the upper limit</li>\n<li><em>s = a[1]+a[2]+...+a[n]</em></li>\n<li>multiply each <em>a[i]</em> by <em>k/s</em> (if integers are required, round down)</li>\n</ul>\n\n<p>Disadvantages: It is unlikely to get large numbers this way. If integers are required, there will likely be a gap between the sum of numbers and <em>k</em> due to rounding error.</p>\n\n<hr>\n\n<p>I think you get \"nicer\" numbers with option (2) but as stated above, it depends on the requirements.</p>\n"}], "owner": {"reputation": 75, "user_id": 4993952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/257d1908a71e320b6abb8a861e4ba610?s=128&d=identicon&r=PG&f=1", "display_name": "Moeder", "link": "https://stackoverflow.com/users/4993952/moeder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 1, "accepted_answer_id": 30752792, "answer_count": 3, "score": 7, "last_activity_date": 1433929567, "creation_date": 1433925884, "last_edit_date": 1495542286, "question_id": 30751360, "link": "https://stackoverflow.com/questions/30751360/array-of-random-numbers-with-sum-in-given-range", "title": "Array of random numbers with sum in given range?", "body": "<p>In C, how do I get an array of <em>n</em> numbers (each 0x00-0xFF in my case), of which the sum is within a given range <code>0..k</code>?</p>\n\n<p>The <em>almost</em> duplicate <a href=\"https://stackoverflow.com/q/18690975/2564301\">C++ multiple random numbers adding up to equal a certain number</a> targets a specific sum, but in my case the sum can be anything between <code>0..k</code>.</p>\n"}, {"tags": ["c", "gtk3", "filechooser"], "answers": [{"comments": [{"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1434174657, "post_id": 30815396, "comment_id": 49678488, "body": "Or, as a alternative to using GTK at all, you may want to consider running <a href=\"https://help.gnome.org/users/zenity/stable/file-selection.html.en\" rel=\"nofollow noreferrer\"><code>zenity</code></a> as a subprocess."}, {"owner": {"reputation": 638, "user_id": 991224, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/081573e5a3eda5fb80b4ecd1f48cf5e7?s=128&d=identicon&r=PG", "display_name": "LGB", "link": "https://stackoverflow.com/users/991224/lgb"}, "edited": false, "score": 0, "creation_date": 1434384033, "post_id": 30815396, "comment_id": 49743119, "body": "I thought that too (with gtk main loop) but that gtk_dialog_run() felt do the trick. Also please note that with just the example I&#39;ve mentioned, the window is shown, just for only a fraction of second. However I have the feeling that it&#39;s some kind of linking issue, as I use SDL too, and sdl2-config --cflags / --libs uses -D_REENTRANT while gtk seems to want -pthread switch for gcc, since gdb reports crash in the nptl/thread stuff, I just think about some conflict here? But OK, I&#39;ll try your idea, it looks more polished solution anyway, I&#39;ll see, and tell+accept if it was oK! THANKS!"}, {"owner": {"reputation": 638, "user_id": 991224, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/081573e5a3eda5fb80b4ecd1f48cf5e7?s=128&d=identicon&r=PG", "display_name": "LGB", "link": "https://stackoverflow.com/users/991224/lgb"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1434384235, "post_id": 30815396, "comment_id": 49743253, "body": "@duskwuff Nice idea, partly: I&#39;ll check source of zenity :-) Maybe it helps to create a simple filechooser, the right way (TM). :) I wouldn&#39;t like to use external programs too much if it&#39;s possible anyway ..."}, {"owner": {"reputation": 431, "user_id": 6232794, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qB_n3jHdXXY/AAAAAAAAAAI/AAAAAAAAAHE/kpOtVu60uAY/photo.jpg?sz=128", "display_name": "12Me21", "link": "https://stackoverflow.com/users/6232794/12me21"}, "edited": false, "score": 0, "creation_date": 1615750276, "post_id": 30815396, "comment_id": 117782188, "body": "This doesn&#39;t work if you need to run code after the dialog is closed. since the main loop isn&#39;t running, it never closes the dialog and it just freezes. the example only works because the program ends immediately."}], "tags": [], "owner": {"reputation": 4937, "user_id": 1545014, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/d3a08ae3ab7ee246d592730f0dd2c923?s=128&d=identicon&r=PG", "display_name": "jcoppens", "link": "https://stackoverflow.com/users/1545014/jcoppens"}, "is_accepted": true, "score": 1, "last_activity_date": 1434472738, "last_edit_date": 1434472738, "creation_date": 1434172855, "answer_id": 30815396, "question_id": 30751178, "link": "https://stackoverflow.com/questions/30751178/gtk3-file-chooser-in-a-non-gtk-application/30815396#30815396", "title": "GTK+3 file chooser in a non-GTK application", "body": "<p><strike>You cannot use widgets without a gtk mainloop.</strike> </p>\n\n<p>Well, it seems I was wrong. My sincere apologies! I <em>had</em> actually tried to do this before and the conclusions were exactly what I described. But the issue has bugged me for the last days, so I did some more digging and experimenting and came up with the following program:</p>\n\n<pre><code>/* -*- Mode: C; indent-tabs-mode: t; c-basic-offset: 4; tab-width: 8 -*-  */\n/*\n * main.c\n * Copyright (C) 2015 John Coppens &lt;john@jcoppens.com&gt;\n * \n * standalone_filechooser is free software: you can redistribute it and/or modify it\n * under the terms of the GNU General Public License as published by the\n * Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n * \n * standalone_filechooser is distributed in the hope that it will be useful, but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License for more details.\n * \n * You should have received a copy of the GNU General Public License along\n * with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.\n */\n\n#include &lt;stdio.h&gt;\n#include &lt;gtk/gtk.h&gt;\n\nGtkWidget *\ncreate_filechooser_dialog(char *init_path, GtkFileChooserAction action)\n{\n  GtkWidget *wdg = NULL;\n\n  switch (action) {\n    case GTK_FILE_CHOOSER_ACTION_SAVE:\n      wdg = gtk_file_chooser_dialog_new(\"Save file\", NULL, action,\n        \"Cancel\", GTK_RESPONSE_CANCEL,\n        \"Save\", GTK_RESPONSE_OK,\n        NULL);\n      break;\n\n    case GTK_FILE_CHOOSER_ACTION_OPEN:\n      wdg = gtk_file_chooser_dialog_new(\"Open file\", NULL, action,\n        \"Cancel\", GTK_RESPONSE_CANCEL,\n        \"Open\", GTK_RESPONSE_OK,\n        NULL);\n      break;\n\n    case GTK_FILE_CHOOSER_ACTION_SELECT_FOLDER:\n    case GTK_FILE_CHOOSER_ACTION_CREATE_FOLDER:\n      break;\n  }\n\n  return wdg;\n}\n\nint main(int argc, char *argv[])\n{\n  GtkWidget *wdg;\n  char *fname = \"\";\n\n  if (argc == 2)\n    fname = argv[1];\n\n  gtk_init(&amp;argc, &amp;argv);\n\n  wdg = create_filechooser_dialog(fname, GTK_FILE_CHOOSER_ACTION_OPEN);\n  if (gtk_dialog_run(GTK_DIALOG(wdg)) == GTK_RESPONSE_OK) {\n    printf(\"%s\", gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(wdg)));\n    return(0);\n  } else  \n    return (1);\n}\n</code></pre>\n\n<p>You can call the dialog from another program (or even the terminal) with</p>\n\n<pre><code>standalone_filechooser [default file]\n</code></pre>\n\n<p>If <code>default file</code> is provided (no brackets), it'll be selected. If a file is selected, it will be printed on <code>stdout</code>, else the program will return with error=1</p>\n\n<p>There is still a small issue with running a widget without main window, which causes a message to be sent to <code>stderr</code>: <code>GtkDialog mapped without a transient parent. This is discouraged</code>. I think this is really a bug (and <a href=\"https://github.com/voldyman/MarkMyWords/issues/22\" rel=\"nofollow\">it might be solved</a> in a more recent version of gtk3). As the message is sent to <code>stderr</code>, it shouldn't interfere with normal use.</p>\n"}], "owner": {"reputation": 638, "user_id": 991224, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/081573e5a3eda5fb80b4ecd1f48cf5e7?s=128&d=identicon&r=PG", "display_name": "LGB", "link": "https://stackoverflow.com/users/991224/lgb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2400, "favorite_count": 2, "accepted_answer_id": 30815396, "answer_count": 1, "score": 2, "last_activity_date": 1547462869, "creation_date": 1433925341, "question_id": 30751178, "link": "https://stackoverflow.com/questions/30751178/gtk3-file-chooser-in-a-non-gtk-application", "title": "GTK+3 file chooser in a non-GTK application", "body": "<p>I have a C project (on Linux) which does not use GTK at all, but I would like to use GTK only for some specific tasks like selecting a file (file chooser dialog). So I have no GTK parent window, no gtk main loop, etc, I only want a file chooser dialog, which should block the execution of my program till user selected a file (or cancelled) and I don't use GTK then after that ever. What I've tried:</p>\n\n<p><a href=\"https://developer.gnome.org/gtk3/stable/GtkFileChooserDialog.html\" rel=\"nofollow\">https://developer.gnome.org/gtk3/stable/GtkFileChooserDialog.html</a></p>\n\n<p>I used the code at \"Typical usage\", first example. I put gtk_init(&amp;argc, &amp;argv) at the start of my program, and when I need the file chooser, I call a function with code from that example (I use parent as NULL, since there is no parent). The result is a flashing window for a fraction of second, then SIGSEGV. Before that I have this message:</p>\n\n<pre><code>Gtk-Message: GtkDialog mapped without a transient parent. This is discouraged.\n</code></pre>\n\n<p>I already read questions/answers on this message here at stackoverflow, but crashing the application is a more serious thing for me. I've also tried to put this:</p>\n\n<pre><code>gtk_widget_show_all(dialog);\n</code></pre>\n\n<p>after gtk_file_chooser_dialog_new() which causes no crash, I can select the file, but then I have the SIGSEGV again around gtk_file_chooser_get_filename().</p>\n\n<p>When using gdb, I got this:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n__GI___pthread_mutex_lock (mutex=0x3c3) at ../nptl/pthread_mutex_lock.c:67\n</code></pre>\n\n<p>Can you help me what mistake I did? I am not familiar with GTK programming too much, so I tried to use examples from the manual, but it does not seem to work. Thanks a lot in advance!</p>\n"}, {"tags": ["c", "linux", "gcc", "compiler-errors", "makefile"], "comments": [{"owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 2, "creation_date": 1433925153, "post_id": 30751029, "comment_id": 49556405, "body": "This is a make error, not a gcc error, gcc&#39;s include path is irrelevant."}, {"owner": {"reputation": 14298, "user_id": 2106207, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/960430ab7aba908bb9aa62d530618a75?s=128&d=identicon&r=PG", "display_name": "Nan Xiao", "link": "https://stackoverflow.com/users/2106207/nan-xiao"}, "reply_to_user": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1433925291, "post_id": 30751029, "comment_id": 49556499, "body": "@user657267: So can I debug it and find the root cause?"}, {"owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 1, "creation_date": 1433925584, "post_id": 30751029, "comment_id": 49556657, "body": "The makefile&#39;s pretty simple, it&#39;s hard to say for sure but the dependencies might be messing up the build in some way, start again with a clean source root and remove <code>-MD </code> from the <code>%.o</code> recipe (or change it to <code>-MMD</code>), you don&#39;t need the deps if you just want to build the source."}, {"owner": {"reputation": 14298, "user_id": 2106207, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/960430ab7aba908bb9aa62d530618a75?s=128&d=identicon&r=PG", "display_name": "Nan Xiao", "link": "https://stackoverflow.com/users/2106207/nan-xiao"}, "reply_to_user": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1433926580, "post_id": 30751029, "comment_id": 49557294, "body": "@user657267: After removing <code>-MD</code>, the errors still exist."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1433927891, "post_id": 30751029, "comment_id": 49558177, "body": "For what it&#39;s worth, I can reproduce on Arch Linux, first error is: <code>make: *** No rule to make target &#39;&#47;usr&#47;lib&#47;gcc&#47;x86_64-linux-gnu&#47;4.8&#47;include&#47;stdarg.h&#39;, needed by &#39;core&#47;luv&#47;luv.o&#39;.  Stop.</code>"}, {"owner": {"reputation": 14298, "user_id": 2106207, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/960430ab7aba908bb9aa62d530618a75?s=128&d=identicon&r=PG", "display_name": "Nan Xiao", "link": "https://stackoverflow.com/users/2106207/nan-xiao"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1433927998, "post_id": 30751029, "comment_id": 49558252, "body": "@rubenvb: The <code>Readme</code> mentions using <code>clang</code>, but I don&#39;t think this is the root cause."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1433928161, "post_id": 30751029, "comment_id": 49558367, "body": "See this issue for a similar problem that apparently has not been solved: <a href=\"https://github.com/sharklinux/shark/issues/2\" rel=\"nofollow noreferrer\">github.com/sharklinux/shark/issues/2</a>"}], "answers": [{"comments": [{"owner": {"reputation": 14298, "user_id": 2106207, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/960430ab7aba908bb9aa62d530618a75?s=128&d=identicon&r=PG", "display_name": "Nan Xiao", "link": "https://stackoverflow.com/users/2106207/nan-xiao"}, "edited": false, "score": 0, "creation_date": 1433926622, "post_id": 30751453, "comment_id": 49557324, "body": "My OS is <code>CentOS</code>. So how can I fix it?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 14298, "user_id": 2106207, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/960430ab7aba908bb9aa62d530618a75?s=128&d=identicon&r=PG", "display_name": "Nan Xiao", "link": "https://stackoverflow.com/users/2106207/nan-xiao"}, "edited": false, "score": 0, "creation_date": 1433926775, "post_id": 30751453, "comment_id": 49557426, "body": "@NanXiao It looks like your gcc was not installed correctly. Was it?"}, {"owner": {"reputation": 14298, "user_id": 2106207, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/960430ab7aba908bb9aa62d530618a75?s=128&d=identicon&r=PG", "display_name": "Nan Xiao", "link": "https://stackoverflow.com/users/2106207/nan-xiao"}, "edited": false, "score": 0, "creation_date": 1433926877, "post_id": 30751453, "comment_id": 49557501, "body": "<code>yum install gcc</code>, not find any error during installing process."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 14298, "user_id": 2106207, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/960430ab7aba908bb9aa62d530618a75?s=128&d=identicon&r=PG", "display_name": "Nan Xiao", "link": "https://stackoverflow.com/users/2106207/nan-xiao"}, "edited": false, "score": 1, "creation_date": 1433926893, "post_id": 30751453, "comment_id": 49557512, "body": "@NanXiao Alternatively, try <code>make clean</code>, the dependency files may be out of date."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 14298, "user_id": 2106207, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/960430ab7aba908bb9aa62d530618a75?s=128&d=identicon&r=PG", "display_name": "Nan Xiao", "link": "https://stackoverflow.com/users/2106207/nan-xiao"}, "edited": false, "score": 0, "creation_date": 1433927065, "post_id": 30751453, "comment_id": 49557614, "body": "@NanXiao Well, it says a <code>.o</code> file requires those headers. That means that <code>.o</code> file was built with those headers present. Remove all <code>.o</code> and <code>.d</code> files."}, {"owner": {"reputation": 14298, "user_id": 2106207, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/960430ab7aba908bb9aa62d530618a75?s=128&d=identicon&r=PG", "display_name": "Nan Xiao", "link": "https://stackoverflow.com/users/2106207/nan-xiao"}, "edited": false, "score": 0, "creation_date": 1433927524, "post_id": 30751453, "comment_id": 49557930, "body": "I have downloaded a new clean source code package, and build process still can&#39;t work. If possible, could you try it in your environment? Thanks!"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1433927195, "last_edit_date": 1433927195, "creation_date": 1433926128, "answer_id": 30751453, "question_id": 30751029, "link": "https://stackoverflow.com/questions/30751029/why-does-gcc-search-header-files-from-non-exist-folders/30751453#30751453", "title": "Why does gcc search header files from non-exist folders?", "body": "<blockquote>\n  <p>I can't work out how <code>/usr/lib/gcc/x86_64-linux-gnu/4.8</code> and <code>/usr/include/x86_64-linux-gnu</code> come from.</p>\n</blockquote>\n\n<p>These headers files get installed with gcc. They are copies of the OS header files patched to compile cleanly with gcc. Some native OS header files (e.g. on Solaris, BSD) do not compile cleanly with gcc.</p>\n\n<hr>\n\n<blockquote>\n  <p><code>/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stdarg.h',</code>needed by <code>core/luv/luv.o'</code>.</p>\n</blockquote>\n\n<p>The above says that <code>luv.o</code> was built when <code>/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stdarg.h</code> was present. May be you built that <code>.o</code> file on another machine. Remove all <code>.o</code> and <code>.d</code> files or try <code>make clean</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "is_accepted": true, "score": 2, "last_activity_date": 1433928499, "creation_date": 1433928499, "answer_id": 30752388, "question_id": 30751029, "link": "https://stackoverflow.com/questions/30751029/why-does-gcc-search-header-files-from-non-exist-folders/30752388#30752388", "title": "Why does gcc search header files from non-exist folders?", "body": "<p>The author has uploaded files specific to his system to the source repository (see <a href=\"https://github.com/sharklinux/shark/issues/2\" rel=\"nofollow\">this issue report</a>).</p>\n\n<p>A solution is to find the offending files by doing a simple <code>grep</code>:</p>\n\n<pre><code>grep -R /usr/lib/gcc ./*\n</code></pre>\n\n<p>with the result (from a clean <code>git clone</code>)</p>\n\n<pre><code>./bpf/libbpf/bpf_load.d: /usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h \\\n./bpf/libbpf/bpf_load.d: /usr/lib/gcc/x86_64-linux-gnu/4.8/include/stdarg.h \\\n./bpf/libbpf/bpf_load.d: /usr/include/elf.h /usr/lib/gcc/x86_64-linux-gnu/4.8/include/stdint.h \\\n./bpf/libbpf/bpf_load.d: /usr/lib/gcc/x86_64-linux-gnu/4.8/include/stdbool.h \\\n./bpf/libbpf/libbpf.d: /usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h \\\n./bpf/libbpf/libbpf.d: /usr/lib/gcc/x86_64-linux-gnu/4.8/include/stdarg.h \\\n./bpf/libbpf/libbpf.d: /usr/lib/gcc/x86_64-linux-gnu/4.8/include/stdint.h /usr/include/stdint.h \\\n./bpf/bpf.lua:   local clang_cmd = string.format(\"clang -nostdinc -isystem /usr/lib/gcc/x86_64-linux-gnu/4.8/include -I%s -I%s/arch/x86/include -I%s/arch/x86/include/generated/uapi -I%s/arch/x86/include/generated  -I%s/include -I%s/arch/x86/include/uapi -I%s/arch/x86/include/generated/uapi -I%s/include/uapi -I%s/include/generated/uapi -include %s/include/linux/kconfig.h %s -D__KERNEL__ -Wno-unused-value -Wno-pointer-sign -O2 -emit-llvm -x c -c %s -o %s\", bpfinc, linuxinc, linuxinc, linuxinc, linuxinc, linuxinc, linuxinc, linuxinc, linuxinc, linuxinc, bpf.cargs_extra, srcfile, objfile)\n./core/luv/luv.d: core/luajit/src/lua.h /usr/lib/gcc/x86_64-linux-gnu/4.8/include/stdarg.h \\\n./core/luv/luv.d: /usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h \\\n./core/luv/luv.d: /usr/lib/gcc/x86_64-linux-gnu/4.8/include-fixed/limits.h \\\n./core/luv/luv.d: /usr/lib/gcc/x86_64-linux-gnu/4.8/include-fixed/syslimits.h \\\n./core/luv/luv.d: /usr/lib/gcc/x86_64-linux-gnu/4.8/include/stdint.h /usr/include/stdint.h \\\nBinary file ./perf/libtraceevent.a matches\nBinary file ./perf/libapikfs.a matches\nBinary file ./perf/libperf.a matches\n</code></pre>\n\n<p>Removing the offending <code>.d</code> files (<code>./bpf/libbpf/bpf_load.d</code>, <code>./bpf/libbpf/libbpf.d</code>, and <code>./core/luv/luv.d</code>) worked for me.</p>\n"}], "owner": {"reputation": 14298, "user_id": 2106207, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/960430ab7aba908bb9aa62d530618a75?s=128&d=identicon&r=PG", "display_name": "Nan Xiao", "link": "https://stackoverflow.com/users/2106207/nan-xiao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4576, "favorite_count": 1, "accepted_answer_id": 30752388, "answer_count": 2, "score": 0, "last_activity_date": 1433928499, "creation_date": 1433924937, "last_edit_date": 1433925252, "question_id": 30751029, "link": "https://stackoverflow.com/questions/30751029/why-does-gcc-search-header-files-from-non-exist-folders", "title": "Why does gcc search header files from non-exist folders?", "body": "<p>I am trying to build an open source project <a href=\"https://github.com/sharklinux/shark\" rel=\"nofollow\">shark</a> on <code>CentOS 7</code>, and get very weird build errors:  </p>\n\n<pre><code>make: *** No rule to make target `/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stdarg.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stddef.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/lib/gcc/x86_64-linux-gnu/4.8/include-fixed/limits.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/lib/gcc/x86_64-linux-gnu/4.8/include-fixed/syslimits.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/include/x86_64-linux-gnu/sys/cdefs.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/include/x86_64-linux-gnu/bits/wordsize.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/include/x86_64-linux-gnu/gnu/stubs.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/include/x86_64-linux-gnu/gnu/stubs-64.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/include/x86_64-linux-gnu/bits/posix1_lim.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/include/x86_64-linux-gnu/bits/local_lim.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/include/x86_64-linux-gnu/bits/posix2_lim.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/include/x86_64-linux-gnu/bits/types.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/include/x86_64-linux-gnu/bits/typesizes.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/include/x86_64-linux-gnu/bits/stdio_lim.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/include/x86_64-linux-gnu/bits/sys_errlist.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/include/x86_64-linux-gnu/bits/errno.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/include/x86_64-linux-gnu/asm/errno.h', needed by `core/luv/luv.o'.\nmake: *** No rule to make target `/usr/lib/gcc/x86_64-linux-gnu/4.8/include/stdint.h', needed by `core/luv/luv.o'.\n</code></pre>\n\n<p>After executing \"<code>gcc -E -v -</code>\" command, it outputs:  </p>\n\n<pre><code>[root@centos shark]# gcc -E -v -\nUsing built-in specs.\nCOLLECT_GCC=gcc\nTarget: x86_64-redhat-linux\nConfigured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --disable-libgcj --with-isl=/builddir/build/BUILD/gcc-4.8.3-20140911/obj-x86_64-redhat-linux/isl-install --with-cloog=/builddir/build/BUILD/gcc-4.8.3-20140911/obj-x86_64-redhat-linux/cloog-install --enable-gnu-indirect-function --with-tune=generic --with-arch_32=x86-64 --build=x86_64-redhat-linux\nThread model: posix\ngcc version 4.8.3 20140911 (Red Hat 4.8.3-9) (GCC)\nCOLLECT_GCC_OPTIONS='-E' '-v' '-mtune=generic' '-march=x86-64'\n /usr/libexec/gcc/x86_64-redhat-linux/4.8.3/cc1 -E -quiet -v - -mtune=generic -march=x86-64\nignoring nonexistent directory \"/usr/lib/gcc/x86_64-redhat-linux/4.8.3/include-fixed\"\nignoring nonexistent directory \"/usr/lib/gcc/x86_64-redhat-linux/4.8.3/../../../../x86_64-redhat-linux/include\"\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /usr/lib/gcc/x86_64-redhat-linux/4.8.3/include\n /usr/local/include\n /usr/include\nEnd of search list.\n</code></pre>\n\n<p>So the searching header file paths should be:  </p>\n\n<pre><code> /usr/lib/gcc/x86_64-redhat-linux/4.8.3/include\n /usr/local/include\n /usr/include\n</code></pre>\n\n<p>I can't work out how <code>/usr/lib/gcc/x86_64-linux-gnu/4.8</code> and <code>/usr/include/x86_64-linux-gnu</code> come from. Could anyone give some clues?</p>\n"}, {"tags": ["c", "pointers", "data-structures"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1433924439, "post_id": 30750721, "comment_id": 49555964, "body": "well, is there any good reason that it should be? You shouldn&#39;t use a pointer <i>just because pointers</i>\u2026"}, {"owner": {"reputation": 15511, "user_id": 1044117, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70c26ef03afcef7dd3f3418097b38d80?s=128&d=identicon&r=PG", "display_name": "fferri", "link": "https://stackoverflow.com/users/1044117/fferri"}, "edited": false, "score": 0, "creation_date": 1433924497, "post_id": 30750721, "comment_id": 49555995, "body": "Unless you want to change the value of the pointer (struct node *root) passed to the function, no."}], "answers": [{"tags": [], "owner": {"reputation": 9386, "user_id": 997813, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e917968317abb617b39d12613b1975a9?s=128&d=identicon&r=PG", "display_name": "Arjun Sreedharan", "link": "https://stackoverflow.com/users/997813/arjun-sreedharan"}, "is_accepted": false, "score": 2, "last_activity_date": 1433925185, "last_edit_date": 1433925185, "creation_date": 1433924876, "answer_id": 30751008, "question_id": 30750721, "link": "https://stackoverflow.com/questions/30750721/when-to-use-double-pointers/30751008#30751008", "title": "When to use double pointers?", "body": "<p>All calls in <code>C</code> are <em>call by value</em>, which means the called functions cannot change the value of the argument in the caller's context. The called function receives just a copy of the arguments. However, you can effectively bypass this by passing a pointer to your variable, and then modifying its dereferenced state. What if the variable you want to change is a pointer? You pass a pointer to a pointer.</p>\n\n<pre><code>struct node* mir(struct node *root);\nstruct node* mir2(struct node **root);\n...\n/* following cannot change value of root */\nx = mir(root);\n/* following may change value of root */\nx = mir2(&amp;root);\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 3154522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4ab8fb66b92f5c525dd5b5d0c5b8140?s=128&d=identicon&r=PG&f=1", "display_name": "user3154522", "link": "https://stackoverflow.com/users/3154522/user3154522"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1433925185, "creation_date": 1433923946, "last_edit_date": 1433924226, "question_id": 30750721, "link": "https://stackoverflow.com/questions/30750721/when-to-use-double-pointers", "title": "When to use double pointers?", "body": "<p>I saw this working code to converting a tree to its mirror.</p>\n\n<pre><code>struct node* mir(struct node *root)\n{\n    if(root)\n    {\n\n    struct node * temp;\n    mir(root-&gt;left);\n    mir(root-&gt;right);\n    temp=root-&gt;left;\n    root-&gt;left=root-&gt;right;\n    root-&gt;right=temp;\n}\n</code></pre>\n\n<p>Should not be there mir(struct node **) like we have in linked list?</p>\n"}, {"tags": ["c", "embedded", "avr"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1433928863, "post_id": 30750179, "comment_id": 49558890, "body": "Yes, this is a PITA, but I have not found a way round it:("}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1433945732, "post_id": 30750179, "comment_id": 49570905, "body": "One hack comes to a mind: Write old sector data to unused sector on SD card, and then write it back again but this time replace necessary bytes with new data. It&#39;s not fast or pretty, but should work if you can find reasonable way to find unused sector."}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1433945958, "post_id": 30750179, "comment_id": 49571065, "body": "@user694733 That could be nice if I could write while reading, but afaik the SD/SPI protocol can&#39;t do that. Or I misunderstood?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1433946074, "post_id": 30750179, "comment_id": 49571137, "body": "@user694733: How would that safe the 512 byte buffer?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1433946089, "post_id": 30750179, "comment_id": 49571146, "body": "@MightyPork You don&#39;t have to do it at the same time in one go. Have a small buffer (64 bytes for example), read first block, write first block, read second block... That is, if SD protocol allows partial writes. I cannot remember if it did."}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433946164, "post_id": 30750179, "comment_id": 49571192, "body": "but when you write to a sector, it first erases the entire sector and then writes the new data. That&#39;s how FLASH works."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433946247, "post_id": 30750179, "comment_id": 49571267, "body": "Porky: If you do FAT, you already have a buffer for the data. So why not use this same buffer? I suspect your &quot;one or two bytes&quot; are mostly for FAT manipulation? The small AVRs are actually not so much designed to implement such things. Using a bigger MCU is not an option?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1433946353, "post_id": 30750179, "comment_id": 49571355, "body": "@user694733: Forget about this. There is some optional stuff related to this, but it need not work and I would definitively not rely on this - what if the card-controller firmware decides to omit it? Also, this is not necesarily supported for SPI mode (which is used here very likely)."}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433946456, "post_id": 30750179, "comment_id": 49571446, "body": "@Olaf I&#39;ve implemented the FAT with normal gcc, only now I&#39;m adding the hardware I/O functionality. There&#39;s no buffer in the actual FAT (except a struct for the boot sector and the file handle). (Bigger &#181;C is of course a good idea, but I have some eBay Arduinos that&#39;d be shame not to use :)"}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433946508, "post_id": 30750179, "comment_id": 49571494, "body": "Anyways I got it working, there&#39;s not much RAM left but it reads files all right, so I guess that&#39;ll have to do."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433946640, "post_id": 30750179, "comment_id": 49571573, "body": "Arduinos are overestimated. As you have to add the SD-Card anyway, why not make your own PCB which already inclused that. Arduions have not that much additional stuff on the board. Rule of thumb: first thnik what you want to do, then desing (or by) the appropriate hardware:-) You would not use a Smart for F1 racing."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433946735, "post_id": 30750179, "comment_id": 49571648, "body": "@Olaf I did a quick glance at specs and it indeed seems that it&#39;s possible that not all cards support partial writes. CSD register seems to have bit for that, but later 2.0 version this bit is always supposed to be zero? Anyway, it was hacky solution to begin with."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1433946843, "post_id": 30750179, "comment_id": 49571765, "body": "@user694733: If that is not SD, but &#181;SD, not even SPI-support is guaranteed. Although I would actually rely on <i>that</i> (not seen a &#181;SDC without)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433946915, "post_id": 30750179, "comment_id": 49571831, "body": "Simple block-writes without FS might be an option. Would require some software on an PC, but that could be written in a HLL easily."}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433947451, "post_id": 30750179, "comment_id": 49572294, "body": "@Olaf those are Arduino Nano&#39;s for $2, it&#39;s really just the Atmega with an USB-UART chip."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1433947578, "post_id": 30750179, "comment_id": 49572399, "body": "You could use two of them: one for whateveryoudo, the other for FAT. Interconnect through UART/i2c or 2nd SPI (whatever is available). Or use a proper MCU:-P"}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433947649, "post_id": 30750179, "comment_id": 49572457, "body": "Yeah that could work :D Really hacky but yea., could be good use for one of those without the USB chip"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1433949394, "post_id": 30750179, "comment_id": 49573901, "body": "I would not call that hacky. It is actually just like PC and NAS: one cares about data manipulation, the other about atorage, filesystem, etc. However, I made that an answer; if you like it ... ."}], "answers": [{"comments": [{"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433927450, "post_id": 30751688, "comment_id": 49557885, "body": "I&#39;m reading through the source, but it&#39;s completely obfuscated :("}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433927797, "post_id": 30751688, "comment_id": 49558107, "body": "from what I see, it appears PetitFAT is only the FAT layer, it does not actually deal with the SD (flash) I/O. The file that is supposed to handle it is just a skeleton for you to fill in."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1433928749, "post_id": 30751688, "comment_id": 49558798, "body": "All the FAT file systems I&#39;ve seen are like that.  The lowest layer, the one that inits the device and reads/writes 512-byte sectors, is device/environment-specific and must be supplied by the developer.  It&#39;s obviously unreasonable to attempt to support a huge array of devices with polling/interrupt/DMA drivers for each."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433934493, "post_id": 30751688, "comment_id": 49562487, "body": "@MightyPork : Yes, necessarily so; the author does not know what hardware you will run it on.  Looking at it however; you are right that it is not SD card specific and that writing to an SD card may indeed require additional buffering over and above the filesystem itself.  I have only ever used it in read-only mode, and did not implement the <code>disk_writep()</code> interface.  Ultimately I think the answer to your question is &quot;no&quot; - See similar question on <a href=\"http://www.avrfreaks.net/forum/sdcard-single-byte-read-write-operation\" rel=\"nofollow noreferrer\">avrfreaks.net/forum/sdcard-single-byte-read-write-operation</a>"}, {"owner": {"reputation": 7797, "user_id": 942746, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/34cf9eae5d595c0b480a7cb42f3722b1?s=128&d=identicon&r=PG", "display_name": "Brian McFarland", "link": "https://stackoverflow.com/users/942746/brian-mcfarland"}, "edited": false, "score": 0, "creation_date": 1433942378, "post_id": 30751688, "comment_id": 49568186, "body": "For what its worth, I can vouch for the small ROM footprint of PetitFAT.  I&#39;ve used it for a bootloader that fit in a little under 8kB flash on an stm32."}, {"owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "edited": false, "score": 0, "creation_date": 1433943518, "post_id": 30751688, "comment_id": 49569111, "body": "I have the FAT16 already fully implemented, I was really just wondering about the SD card buffer."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 1, "last_activity_date": 1433935245, "last_edit_date": 1433935245, "creation_date": 1433926743, "answer_id": 30751688, "question_id": 30750179, "link": "https://stackoverflow.com/questions/30750179/changing-just-one-byte-in-sd-card-sector/30751688#30751688", "title": "Changing just one byte in SD card sector", "body": "<p><a href=\"http://elm-chan.org/fsw/ff/00index_p.html\" rel=\"nofollow\">ELM Petit FAT File System Module</a> claims:</p>\n\n<blockquote>\n  <p>It can be incorporated into the tiny microcontrollers with limited memory even if the RAM size is less than sector size.</p>\n</blockquote>\n\n<p>In fact:</p>\n\n<blockquote>\n  <ul>\n  <li>Very small RAM consumption (44 bytes work area + certain stack).</li>\n  </ul>\n</blockquote>\n\n<p>It is open source; so you might take a look at how it does that (or just use it as-is).</p>\n\n<p>The write function does have some significant restrictions, such as while it can modify a file, it cannot create or change the size of one - which is probably the compromise necessary to avoid sector buffers.</p>\n\n<p>There is a <a href=\"http://elm-chan.org/fsw/ff/00index_e.html\" rel=\"nofollow\">full featured version of ELM FatFS</a>, but that requires <a href=\"http://elm-chan.org/fsw/ff/en/appnote.html#memory\" rel=\"nofollow\">significantly more code and RAM space</a>.\nThe page also has links to the FAT32 specification, and some technical notes on how SD cards work which might be useful.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p><strong>In fact this is not particularly helpful.</strong>  Petit FAT's claim refers only to the filesystem layer itself, it does not include any hardware specific device driver, and for SD/MMC there is no getting away from the 512 byte read-modify-write cycle.  </p>\n\n<p>Although the AVR may not support memory-mapped external memory, one could use an external serial memory device such as a <a href=\"http://www.cypress.com/nonvolatile/\" rel=\"nofollow\">Cypress FRAM or nvSRAM</a> to store the sector data; although being non-volatile, it may remove the need for SD altogether unless large removable media is specifically required.</p>\n"}, {"tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": true, "score": 1, "last_activity_date": 1433949918, "last_edit_date": 1433949918, "creation_date": 1433949224, "answer_id": 30760459, "question_id": 30750179, "link": "https://stackoverflow.com/questions/30750179/changing-just-one-byte-in-sd-card-sector/30760459#30760459", "title": "Changing just one byte in SD card sector", "body": "<p>YOu cannot changge just few bytes in a sector without reading/writing the the whole 512 bytes. So you actually do need the RAM for buffer.</p>\n\n<p>However, there are ways to pre-alloc the filespace or update the FAT every some writes only. That will even conserve write cycles, but might result in data loss if power down before the FAT has been updated (however, it might not corrupt the filesystem if implemented properly).</p>\n\n<p>As you state that these are cheap ArduinoNano (clones - supposedly), you could just use two of them interconnected with UART/SPI/i2C - whatever is available, even 8 bit bit-bang would work.</p>\n\n<p>One does whateveryouwanttodo and the other is just for SD-card/FAT processing.</p>\n\n<p>Reminds me of the Comodore 64 and its floppy-disc drive 1541  which also included a small CPU (well \"MCU\", but not single chip).</p>\n"}], "owner": {"reputation": 16571, "user_id": 2180189, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0de29e70b63441baf6a99393f7ff2027?s=128&d=identicon&r=PG", "display_name": "MightyPork", "link": "https://stackoverflow.com/users/2180189/mightypork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 0, "accepted_answer_id": 30760459, "answer_count": 2, "score": 6, "last_activity_date": 1433949918, "creation_date": 1433922310, "question_id": 30750179, "link": "https://stackoverflow.com/questions/30750179/changing-just-one-byte-in-sd-card-sector", "title": "Changing just one byte in SD card sector", "body": "<p>I'm implementing FAT16 on SD card with Atmega328.</p>\n\n<p>I often need to change just one or two bytes in the sector (512B region).</p>\n\n<p>I know how Flash works and that it needs to overwrite entire sector at once, but I was wondering if there maybe was some special command that would make the card itself handle it?</p>\n\n<p>The point is, the atmega has only 2k RAM, and allocating 512 just for a read-modify-write SD card buffer is very unfavorable. Is there no other way?</p>\n\n<p>(PS. AFAIK the atmega can't natively have external ram)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 673, "user_id": 1285868, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78c17c72abed802e023db150e6e1b3c6?s=128&d=identicon&r=PG", "display_name": "kartik", "link": "https://stackoverflow.com/users/1285868/kartik"}, "edited": false, "score": 0, "creation_date": 1433928300, "post_id": 30750129, "comment_id": 49558470, "body": "I edited post to make REG_NAME value at the address 0x1000, the usual way to access register."}], "answers": [{"comments": [{"owner": {"reputation": 1304, "user_id": 1073171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zrsir.jpg?s=128&g=1", "display_name": "Brian Sidebotham", "link": "https://stackoverflow.com/users/1073171/brian-sidebotham"}, "edited": false, "score": 0, "creation_date": 1433925873, "post_id": 30750193, "comment_id": 49556844, "body": "I think you mean <code>#define REG_NAME ((volatile unsigned int *) 0x1000)</code> so that the address is no longer dereferenced"}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "reply_to_user": {"reputation": 1304, "user_id": 1073171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zrsir.jpg?s=128&g=1", "display_name": "Brian Sidebotham", "link": "https://stackoverflow.com/users/1073171/brian-sidebotham"}, "edited": false, "score": 0, "creation_date": 1433928178, "post_id": 30750193, "comment_id": 49558383, "body": "@BrianSidebotham no, I meant with the dereference, but my <code>*REG_NAME</code> was actually a <code>REG_NAME</code>; fixed."}, {"owner": {"reputation": 1304, "user_id": 1073171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zrsir.jpg?s=128&g=1", "display_name": "Brian Sidebotham", "link": "https://stackoverflow.com/users/1073171/brian-sidebotham"}, "edited": false, "score": 0, "creation_date": 1433928285, "post_id": 30750193, "comment_id": 49558464, "body": "Ah yes, looks better!"}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 2, "last_activity_date": 1433928183, "last_edit_date": 1433928183, "creation_date": 1433922361, "answer_id": 30750193, "question_id": 30750129, "link": "https://stackoverflow.com/questions/30750129/address-of-a-hardware-register-from-acces-macro/30750193#30750193", "title": "Address of a hardware register from acces macro", "body": "<p>Your macro must be defined like this:</p>\n\n<pre><code>#define REG_NAME (*(volatile unsigned int *) 0x1000)\n</code></pre>\n\n<p>Then you can use <code>REG_NAME</code> to get the value stored in the register. If you want to get the register address (your <code>0x1000</code> value here) as an integer (e.g., an <code>int</code>), you have to use <code>(int) &amp;REG_NAME</code>. The cast is needed here as <code>&amp;REG_NAME</code> is of a pointer type.</p>\n\n<p>How you defined your macro was incorrect as the cast operator requires parentheses around the type name.</p>\n"}, {"comments": [{"owner": {"reputation": 673, "user_id": 1285868, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78c17c72abed802e023db150e6e1b3c6?s=128&d=identicon&r=PG", "display_name": "kartik", "link": "https://stackoverflow.com/users/1285868/kartik"}, "edited": false, "score": 0, "creation_date": 1433928484, "post_id": 30751569, "comment_id": 49558602, "body": "I cannot define my own as above cause there are multiple instances of an I2C device with identical Register structure which them selves are captured as struct.  #define I2C0   (*(volatile I2C_tag *) 0xFFD80000UL) #define I2C1   (*(volatile I2C_tag *) 0xFFD90000UL) where I2C_tag is a struct of I2C registers. Some where in my code I   should be able to differentiate b/w them using the instance passed . For ex : void reset(volatile I2C_tag *instance) { switch (int)&amp;instance.... }"}], "tags": [], "owner": {"reputation": 1304, "user_id": 1073171, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zrsir.jpg?s=128&g=1", "display_name": "Brian Sidebotham", "link": "https://stackoverflow.com/users/1073171/brian-sidebotham"}, "is_accepted": false, "score": 1, "last_activity_date": 1433926421, "creation_date": 1433926421, "answer_id": 30751569, "question_id": 30750129, "link": "https://stackoverflow.com/questions/30750129/address-of-a-hardware-register-from-acces-macro/30751569#30751569", "title": "Address of a hardware register from acces macro", "body": "<p>Here, REG_NAME is a dereferenced pointer - i.e. it's a value contained in a register and should be treated as such throughout the code. Trying to use the same define for multiple purposes (both value and address) is confusing at best!</p>\n\n<p>You're better off having something along the lines of:</p>\n\n<pre><code>#define REG_TYPE(x)      (*(volatile unsigned int*)x)\n#define REG_NAME_ADDR    (0x1000)\n#define REG_NAME         REG_TYPE(REG_NAME_ADDR)\n</code></pre>\n\n<p>If the registers are already defined in a header file provided by the processor manufacturer you'll have to create your own defines to solve the problem.</p>\n"}], "owner": {"reputation": 673, "user_id": 1285868, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78c17c72abed802e023db150e6e1b3c6?s=128&d=identicon&r=PG", "display_name": "kartik", "link": "https://stackoverflow.com/users/1285868/kartik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1433928225, "creation_date": 1433922203, "last_edit_date": 1433928225, "question_id": 30750129, "link": "https://stackoverflow.com/questions/30750129/address-of-a-hardware-register-from-acces-macro", "title": "Address of a hardware register from acces macro", "body": "<p>I have a list of registers defined using the usual format </p>\n\n<pre><code>#define REG_NAME (*(volatile unsigned int *) 0x1000)\n</code></pre>\n\n<p>Somewhere in my code I want to get <code>0x1000</code> in a <code>switch case</code> using <code>REG_NAME</code>.<br>How do i go about it ?  </p>\n\n<p>I tried using <code>switch(&amp;REG_NAME)</code> and <code>switch(*REG_NAME)</code> without success, it throws a compiler error:</p>\n\n<blockquote>\n  <p>expression must have integral type</p>\n</blockquote>\n"}]