[{"tags": ["c", "function", "debugging", "type-conversion"], "comments": [{"owner": {"reputation": 11, "user_id": 3453693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/072e367e74d78e7f0fb2ad9b0a3a2a65?s=128&d=identicon&r=PG&f=1", "display_name": "user3453693", "link": "https://stackoverflow.com/users/3453693/user3453693"}, "edited": false, "score": 0, "creation_date": 1440628534, "post_id": 32237804, "comment_id": 52357868, "body": "degrees Fahrenheit = (9.0/5.0) * degrees celsius + 32"}, {"owner": {"reputation": 11, "user_id": 3453693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/072e367e74d78e7f0fb2ad9b0a3a2a65?s=128&d=identicon&r=PG&f=1", "display_name": "user3453693", "link": "https://stackoverflow.com/users/3453693/user3453693"}, "edited": false, "score": 0, "creation_date": 1440628551, "post_id": 32237804, "comment_id": 52357875, "body": "degrees rankin = degrees fahrenheit + 459.67"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 4, "creation_date": 1440628618, "post_id": 32237804, "comment_id": 52357893, "body": "Check the format specifiers! DO NOT YELL AT US! Add required information to your question, not as a comment! <code>return</code> is not a function."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 3, "creation_date": 1440628700, "post_id": 32237804, "comment_id": 52357929, "body": "<code>scanf(&quot;%d&quot;, &amp;c);</code> --&gt; <code>scanf(&quot;%lf&quot;, &amp;c);</code>...<code>Rankin is: %f\\n&quot;, r);</code>"}, {"owner": {"reputation": 11, "user_id": 3453693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/072e367e74d78e7f0fb2ad9b0a3a2a65?s=128&d=identicon&r=PG&f=1", "display_name": "user3453693", "link": "https://stackoverflow.com/users/3453693/user3453693"}, "edited": false, "score": 0, "creation_date": 1440628718, "post_id": 32237804, "comment_id": 52357935, "body": "what is wrong with my format?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440628774, "post_id": 32237804, "comment_id": 52357960, "body": "<a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.21.6.2p12\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#7.21.6.2p12</a> And your <code>printf</code> has none at all."}, {"owner": {"reputation": 11, "user_id": 3453693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/072e367e74d78e7f0fb2ad9b0a3a2a65?s=128&d=identicon&r=PG&f=1", "display_name": "user3453693", "link": "https://stackoverflow.com/users/3453693/user3453693"}, "edited": false, "score": 0, "creation_date": 1440628799, "post_id": 32237804, "comment_id": 52357971, "body": "i did not mean to yell, but highlight important specifics, sorry."}, {"owner": {"reputation": 1228, "user_id": 4023418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b157cf12258cebc22300af22dad977?s=128&d=identicon&r=PG", "display_name": "hiandbaii", "link": "https://stackoverflow.com/users/4023418/hiandbaii"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440628860, "post_id": 32237804, "comment_id": 52357989, "body": "You can read the input as an int, but you would need to cast it to a double during computation. Also like @Olaf said your printf needs a format argument."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440628903, "post_id": 32237804, "comment_id": 52357998, "body": "Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and use markup to highlight/format text."}, {"owner": {"reputation": 11, "user_id": 3453693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/072e367e74d78e7f0fb2ad9b0a3a2a65?s=128&d=identicon&r=PG&f=1", "display_name": "user3453693", "link": "https://stackoverflow.com/users/3453693/user3453693"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1440628913, "post_id": 32237804, "comment_id": 52357999, "body": "@BLUEPIXY would i add the last reference for rankin after declaring the value at the end of my code?"}, {"owner": {"reputation": 11, "user_id": 3453693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/072e367e74d78e7f0fb2ad9b0a3a2a65?s=128&d=identicon&r=PG&f=1", "display_name": "user3453693", "link": "https://stackoverflow.com/users/3453693/user3453693"}, "reply_to_user": {"reputation": 1228, "user_id": 4023418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b157cf12258cebc22300af22dad977?s=128&d=identicon&r=PG", "display_name": "hiandbaii", "link": "https://stackoverflow.com/users/4023418/hiandbaii"}, "edited": false, "score": 0, "creation_date": 1440628975, "post_id": 32237804, "comment_id": 52358013, "body": "@hiandbaii like an if statement?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 4, "creation_date": 1440629030, "post_id": 32237804, "comment_id": 52358035, "body": "The code does not compile cleanly.  1) in the printf(), &#39;too many arguments for format&#39;  I.E. the format string does not contain a format specified for the &#39;r&#39; parameter.  2) in the scanf(), &#39;format &#39;%d&#39; expects  argument of type &#39;int *&#39;, but argument 2 has type &#39;double *&#39;   When compiling, always enable the warnings, then fix the warnings.  Please correct the code and re-post"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1228, "user_id": 4023418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2b157cf12258cebc22300af22dad977?s=128&d=identicon&r=PG", "display_name": "hiandbaii", "link": "https://stackoverflow.com/users/4023418/hiandbaii"}, "edited": false, "score": 0, "creation_date": 1440629032, "post_id": 32237804, "comment_id": 52358036, "body": "@hiandbaii: He cannot, as the variable is <code>double</code> already, so he has to <code>scanf</code> a double, not an <code>int</code>. Conversion from <code>int</code> to <code>double</code> is implicit if one of the other operands is <code>double</code>."}, {"owner": {"reputation": 11, "user_id": 3453693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/072e367e74d78e7f0fb2ad9b0a3a2a65?s=128&d=identicon&r=PG&f=1", "display_name": "user3453693", "link": "https://stackoverflow.com/users/3453693/user3453693"}, "edited": false, "score": 0, "creation_date": 1440629101, "post_id": 32237804, "comment_id": 52358055, "body": "thanks guys, helps tremendously"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440629181, "post_id": 32237804, "comment_id": 52358081, "body": "@Olaf, I did not state how to fix the problem, just repeating the warning messages from the compiler"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440629569, "post_id": 32237804, "comment_id": 52358204, "body": "@user3629249: I&#39;m lacking context. Which comment of mine do you refer to? You comment (&quot;The code does not compile cleanly...&quot;) looks fine to me."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1440629605, "post_id": 32237804, "comment_id": 52358212, "body": "the conversion from Celsius to Rankin is:  &#39;&#186;R = &#186;C * 1.8000 + 491.67&#39;  so there is no need to clutter the code with the intermediate step of converting to Fahrenheit."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440629739, "post_id": 32237804, "comment_id": 52358258, "body": "@Olaf,  The comment that contains: &#39;He cannot, as the variable is double already&#39;  Perhaps I made an error in assuming that your comment was directed toward my original comment.  If your refering to my suggestion that the code be corrected and re-posted, my understanding is selecting the code, then pressing &lt;ctrl&gt;-k would allow the posted code to be edited."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440629871, "post_id": 32237804, "comment_id": 52358298, "body": "I&#39;d prefer to have all in Kelvin first. And add R&#233;aumur, R&#248;mer, (good ol&#39;) Newton and Planck, of course. (btw. it&#39;s Rankine, not Rankin)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440630006, "post_id": 32237804, "comment_id": 52358350, "body": "@user3629249: My comment was addressed to hiandbaii; I don&#39;t see a relation to your comment. But I do not agree with editing/re-posting the code, as that would change the question (it would actually make the question irrelevant - horray)."}, {"owner": {"reputation": 11, "user_id": 3453693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/072e367e74d78e7f0fb2ad9b0a3a2a65?s=128&d=identicon&r=PG&f=1", "display_name": "user3453693", "link": "https://stackoverflow.com/users/3453693/user3453693"}, "edited": false, "score": 0, "creation_date": 1440631163, "post_id": 32237804, "comment_id": 52358670, "body": "figured it out, #include &lt;stdio.h&gt;  int main(void)  { /* initialize variables for conversion <i>/ double c ,r; /*prompt user for a value via Celisus */ \tprintf(&quot;This program converts degrees Celsius to degrees Rankin.\\n&quot;); \tprintf(&quot;Enter the temperature in degrees Celsius&gt;\\n&quot; ); \tscanf(&quot;%lf&quot;, &amp;c); /</i> conversions that will execute to determine values from Celsius to Rankin <i>/\t \tr = ((9.0/5.0) * c + 32) + 459.67;   \t /</i> Print conversion results below */\t \tprintf(&quot;%lf degrees Celsius = %lf degrees Rankin&quot;, c, r); \t \t \treturn(0); \t  \t }"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1440632401, "post_id": 32237804, "comment_id": 52359006, "body": "@user3453693: Did you read my note about your misspelling the name of Mr. Rankine?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440642332, "post_id": 32237804, "comment_id": 52361151, "body": "@Olaf LSNED - I had same spelling error <a href=\"https://en.wikipedia.org/wiki/Rankine_scale\" rel=\"nofollow noreferrer\">Rankine scale</a>"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1441415575, "last_edit_date": 1495542580, "creation_date": 1441415258, "answer_id": 32408540, "question_id": 32237804, "link": "https://stackoverflow.com/questions/32237804/why-is-my-celsius-to-rankine-conversion-failing-when-prompting-user-for-a-value/32408540#32408540", "title": "Why is my CELSIUS to RANKINE conversion failing when prompting user for a value for CELSIUS?", "body": "<blockquote>\n  <p>Why is my CELSIUS to RANKINE conversion failing when prompting user for a value for CELSIUS?</p>\n</blockquote>\n\n<p>Code is using the incorrect type of data per the format specifiers.  For type <code>double</code>, scan with <code>\"%lf\"</code> and to print use <code>\"%f\"</code></p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/32237804/why-is-my-celsius-to-rankin-conversion-failing-when-prompting-user-for-a-value-f#comment52357929_32237804\">@BLUEPIXY</a> comment to use the matching format specifiers in <code>sncaf()</code> and <code>printf()</code>:</p></li>\n<li><p>Insure prompt is flushed.</p></li>\n<li><p>Check <code>scanf()</code> return value.</p></li>\n</ol>\n\n<p>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n  double f,c,r;\n\n  printf(\"Enter the temperature in degrees Celsius:\" );\n  fflush(stdout); \n  if (scanf(\"%lf\", &amp;c) != 1) {\n    puts(\"Non-numeric input\" );\n    return -1;\n  } \n\n  f = (9.0/5.0) * c +32;\n  printf(\"After your conversion, your temperature in Fahrenheit is: %.1f F\", f);\n\n  r = f + 459.67;\n  printf(\"After your conversion, your temperature in Rankine is: %.1f R\", r);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3453693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/072e367e74d78e7f0fb2ad9b0a3a2a65?s=128&d=identicon&r=PG&f=1", "display_name": "user3453693", "link": "https://stackoverflow.com/users/3453693/user3453693"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1441415575, "creation_date": 1440628466, "last_edit_date": 1441415476, "question_id": 32237804, "link": "https://stackoverflow.com/questions/32237804/why-is-my-celsius-to-rankine-conversion-failing-when-prompting-user-for-a-value", "title": "Why is my CELSIUS to RANKINE conversion failing when prompting user for a value for CELSIUS?", "body": "<blockquote>\n  <p>Perform the following conversions to convert from CELSIUS to RANKINE:<br>\n    degrees Fahrenheit = (9.0/5.0) * degrees Celsius + 32<br>\n    degrees Rankine = degrees Fahrenheit + 459.67\"</p>\n</blockquote>\n\n<p>This program converts degrees <a href=\"https://en.wikipedia.org/wiki/Celsius\" rel=\"nofollow\">Celsius</a> to degrees <a href=\"https://en.wikipedia.org/wiki/Rankine_scale\" rel=\"nofollow\">Rankine</a>. Prompt the user for a temperature in Celsius.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\ndouble f,c,r;\n\n    printf(\"Enter the temperature in degrees Celsius:\" );\n    scanf(\"%d\", &amp;c);\n\n    f = (9.0/5.0) * c +32;\n    r = f + 459.67;\n\n    printf(\"After your conversion, your temperature in Rankin is: \", r);\n\n    return(0);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "kernel-module", "spi"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440626726, "post_id": 32237323, "comment_id": 52357192, "body": "Next time, please add C#, Java and Go tags. They all have a similar syntax."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440626880, "post_id": 32237323, "comment_id": 52357254, "body": "@Olaf: The <code>c</code> tag is appropriate because the driver is written in C, the <code>c++</code> tag is appropriate if Phil is writing C++ code, to let answerers know his preferred language for code samples.  Please don&#39;t randomly remove tags."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1440626982, "post_id": 32237323, "comment_id": 52357312, "body": "@BenVoigt: He should have state that. According to the file-extension. As given, the question is language-agnostic."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440627098, "post_id": 32237323, "comment_id": 52357360, "body": "Files are the Linux/Unix way. Why not just read/write the sysfs files from your program? That way you don&#39;t need an API for everything."}, {"owner": {"reputation": 53, "user_id": 5145208, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y5YEKmVOC1Q/AAAAAAAAAAI/AAAAAAAAGsc/sKUxApXmsEI/photo.jpg?sz=128", "display_name": "Phil Mills", "link": "https://stackoverflow.com/users/5145208/phil-mills"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440709389, "post_id": 32237323, "comment_id": 52398634, "body": "@Olaf : Because I know nothing of C#, Java or Go (or Rust, or Cobol or Lisp, for that matter) to be aware that the syntax would be similar for this use case."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440709742, "post_id": 32237323, "comment_id": 52398788, "body": "@PhilMills: Yes, programming by same syntax. Forget about the semantics. Great approach."}, {"owner": {"reputation": 53, "user_id": 5145208, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y5YEKmVOC1Q/AAAAAAAAAAI/AAAAAAAAGsc/sKUxApXmsEI/photo.jpg?sz=128", "display_name": "Phil Mills", "link": "https://stackoverflow.com/users/5145208/phil-mills"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440709969, "post_id": 32237323, "comment_id": 52398895, "body": "@Olaf: The Linux Way is often not very helpful.  Yes, it may be functional and it may be wonderfully general-purpose so that ANY language that can do file I/O can get the value... but in the majority of actual use cases, it kind of sucks because now the programmer has to open a file (and do validation on that) read a file (and do validation on that), convert a string to an int (and do validation on that) when it would have been about zero effort on the kernel module&#39;s developer&#39;s part to add a one-liner to the C/C++ header file that they&#39;re already creating to just return the damn value."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440712466, "post_id": 32237323, "comment_id": 52400011, "body": "@PhilMills: That&#39;s why Linux is being use on most devices, worldwide. (wheras it is not the Linux, but the Unix way.) No one said not to wrap this into a library. If you do not like it, you should use a different system with an API to learn for every crap. As it looks, you should not rely on the buffer size anyway, as that is a matter of the hardware and the use of an OS is to abstract from this."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440712606, "post_id": 32237323, "comment_id": 52400054, "body": "@PhilMills: And, no, it is not &quot;a one-liner&quot;. Instead you have to care about access rights, etc. You have to reserve a syscall, changing the kernel-userspace interface, etc. All handled here with existing calls and permissions (basically). Feel free to complain to the kernel developers; I will not discuss this further, just do not program for Linux then; write your own OS (I did already). Until then: If you are in a country you have to follow its laws."}], "owner": {"reputation": 53, "user_id": 5145208, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y5YEKmVOC1Q/AAAAAAAAAAI/AAAAAAAAGsc/sKUxApXmsEI/photo.jpg?sz=128", "display_name": "Phil Mills", "link": "https://stackoverflow.com/users/5145208/phil-mills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1440626996, "creation_date": 1440625955, "last_edit_date": 1440626823, "question_id": 32237323, "link": "https://stackoverflow.com/questions/32237323/examine-kernel-module-parameters-programatically-from-linux-user-space-code", "title": "Examine kernel module parameters programatically from Linux user space code?", "body": "<p>I'm working on writing code that uses linux' ioctl(...) functions to communicate with a SPI interface.</p>\n\n<p>Recently I was trying to get up to our \"typical\" transfer use-case (roughly 500KB of bulk-transfer) and got handed an \"errno 90\" (EMSGSIZE) failure.  Digging into spidev.c, there's \"bufsiz\" set to a max of 4096 bytes in the transfer (or transfers).</p>\n\n<p>I see the abiliy to change bufsiz by writing a new value to \"/sys/module/spidev/parameters/bufsiz\" and that's fine, but I doubt it'll let me expand that arbitrarily.</p>\n\n<p><strong>But: is there any way to examine this parameter from my user-space code (outside of reading the above file)?</strong>  </p>\n\n<p>So I need to be able to adapt my tx/rx code to whatever the current maximum buffer size is set to, whether my code's altered it or not, but that's pretty hard to do without being able to query the value from within my code.</p>\n\n<p>Seems like there MUST be a simple way to get that value through some library call.</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440624088, "post_id": 32236867, "comment_id": 52356078, "body": "They &quot;return the error ...&quot;? Unlikely. You mean you get a compiler error/warning. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440624122, "post_id": 32236867, "comment_id": 52356094, "body": "Oh, and you cannot change the type of a variable (not even in a dynamically typed language)."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1440624257, "post_id": 32236867, "comment_id": 52356152, "body": "Don&#39;t forget funky time signatures like 10/8."}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 115, "user_id": 4589140, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/365776543606774/picture?type=large", "display_name": "Nathaniel Lindsey", "link": "https://stackoverflow.com/users/4589140/nathaniel-lindsey"}, "edited": false, "score": 0, "creation_date": 1441221922, "post_id": 32237088, "comment_id": 52595710, "body": "@NathanielLindsey, did you have a question there? BTW, <code>timeSignature[0]-&#39;1&#39;</code> is going to give you the wrong result."}, {"owner": {"reputation": 115, "user_id": 4589140, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/365776543606774/picture?type=large", "display_name": "Nathaniel Lindsey", "link": "https://stackoverflow.com/users/4589140/nathaniel-lindsey"}, "edited": false, "score": 0, "creation_date": 1441224427, "post_id": 32237088, "comment_id": 52597084, "body": "See edits to my original question.  I couldn&#39;t condense enough to fit it in a comment."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 115, "user_id": 4589140, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/365776543606774/picture?type=large", "display_name": "Nathaniel Lindsey", "link": "https://stackoverflow.com/users/4589140/nathaniel-lindsey"}, "edited": false, "score": 0, "creation_date": 1441224777, "post_id": 32237088, "comment_id": 52597260, "body": "@NathanielLindsey, <code>scanf(&quot;%s&quot;,&amp;timeSignature[4]);</code> is not right. It passes the address of the last element of <code>timeSignagure</code> to <code>scanf</code>. You end up accessing the array out of bounds. Use <code>scanf(&quot;%s&quot;,&amp;timeSignature[0]);</code>, or simply  <code>scanf(&quot;%s&quot;,timeSignature);</code>"}, {"owner": {"reputation": 115, "user_id": 4589140, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/365776543606774/picture?type=large", "display_name": "Nathaniel Lindsey", "link": "https://stackoverflow.com/users/4589140/nathaniel-lindsey"}, "edited": false, "score": 0, "creation_date": 1441232670, "post_id": 32237088, "comment_id": 52600748, "body": "I&#39;m getting incorrect values as output, so I ran the following test with the same test values from my original question edit to confirm the integer value of &#39;timeSignature[0]&#39;:  int main() {     char timeSignature[4];     printf(&quot;Enter the working time signature of your project:&quot;);    scanf(&quot;%s&quot;,timeSignature);     int beatsPerBar = timeSignature[0]-&#39;0&#39;;     printf(&quot;%i&quot;,beatsPerBar);     return 0;  }  The return value is &#39;3&#39;, not &#39;4&#39; like I need, but when I fail to subtract the &#39;0&#39; character, the return value becomes 52.  Again, what am I doing wrong? (and why isn&#39;t my code formatting showing?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 115, "user_id": 4589140, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/365776543606774/picture?type=large", "display_name": "Nathaniel Lindsey", "link": "https://stackoverflow.com/users/4589140/nathaniel-lindsey"}, "edited": false, "score": 0, "creation_date": 1441245691, "post_id": 32237088, "comment_id": 52603939, "body": "@NathanielLindsey, you are getting <code>3</code> instead of <code>4</code> since you are using <code>timeSignature[0] - &#39;1&#39;</code>. That should be <code>timeSignature[0] - &#39;0&#39;</code>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1440624883, "creation_date": 1440624883, "answer_id": 32237088, "question_id": 32236867, "link": "https://stackoverflow.com/questions/32236867/take-a-character-from-a-string-and-convert-it-to-int-in-c/32237088#32237088", "title": "Take a character from a string and convert it to int in c", "body": "<p>Use of</p>\n\n<pre><code>int beatsPerBar = atoi(timeSignature[0])\n</code></pre>\n\n<p>should result in a compiler error. The input argument type of <code>atoi</code> is <code>char const*</code>, which <code>timeSignature[0]</code> is not.</p>\n\n<pre><code>int beatsPerBar = timeSignature[0];\n</code></pre>\n\n<p>is syntactically right but not semantically. That will set the value of <code>beatsPerBar</code> to the integer value used to represent the character <code>4</code>. If your platform uses ASCII encoding, that value is <code>52</code>.</p>\n\n<p>You should use:</p>\n\n<pre><code>int beatsPerBar = timeSignature[0] - '0';\n</code></pre>\n\n<p>to get the number <code>4</code> assigned to <code>beatsPerBar</code>.</p>\n\n<p>If you want to be more careful, which you should, you can add the following check.</p>\n\n<pre><code>int beatsPerBar = 0;\nif ( isdigit(timeSignature[0]) )\n{\n   beatsPerBar = timeSignature[0] - '0';\n}\nelse\n{\n   // Deal with error.\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 303, "user_id": 515954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fb882618b6b683f49204c3fd3355009?s=128&d=identicon&r=PG", "display_name": "Bahax", "link": "https://stackoverflow.com/users/515954/bahax"}, "is_accepted": false, "score": 0, "last_activity_date": 1440637207, "creation_date": 1440637207, "answer_id": 32239036, "question_id": 32236867, "link": "https://stackoverflow.com/questions/32236867/take-a-character-from-a-string-and-convert-it-to-int-in-c/32239036#32239036", "title": "Take a character from a string and convert it to int in c", "body": "<p>As @r-sahu said:</p>\n\n<blockquote>\n  <p>The input argument type of atoi is const char *</p>\n</blockquote>\n\n<p>So if you still want to use atoi you can convert the char to a string then use atoi as follows (for example):</p>\n\n<pre><code>if (isdigit(timeSignature[0]))\n  char dig[2]= {timeSignature[0],'\\0'};\n  int beatsPerBar = atoi(dig);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1441223071, "creation_date": 1441223071, "answer_id": 32361811, "question_id": 32236867, "link": "https://stackoverflow.com/questions/32236867/take-a-character-from-a-string-and-convert-it-to-int-in-c/32361811#32361811", "title": "Take a character from a string and convert it to int in c", "body": "<p>No need to use <code>atoi</code>, you can simply convert a <code>char</code> to <code>int</code>. For instance</p>\n\n<pre><code>int beatsPerBar = timeSignature[0] - '0';\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 4589140, "user_type": "registered", "accept_rate": 6, "profile_image": "https://graph.facebook.com/365776543606774/picture?type=large", "display_name": "Nathaniel Lindsey", "link": "https://stackoverflow.com/users/4589140/nathaniel-lindsey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1441223071, "creation_date": 1440623870, "last_edit_date": 1441221672, "question_id": 32236867, "link": "https://stackoverflow.com/questions/32236867/take-a-character-from-a-string-and-convert-it-to-int-in-c", "title": "Take a character from a string and convert it to int in c", "body": "<p>I'm new to c and trying to write a console application that takes the time signature and BPM information from a user's musical project and returns the length of one bar in seconds.</p>\n\n<p>I want to take the user input string for time signature (example: \"4/4\"), isolate the first character (a numeral representing the number of beats per bar), and transform it into an integer to be used in the calculation.</p>\n\n<p>The two methods I've tried,</p>\n\n<pre><code>int beatsPerBar = timeSignature[0];\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int beatsPerBar = atoi(timeSignature[0])\n</code></pre>\n\n<p>both return the same error: \"subscripted value is neither array nor pointer nor vector\".</p>\n\n<p>How do I correctly change the variable type of this character?</p>\n\n<p>EDIT:</p>\n\n<p>Using @R-Sahu 's suggestion.  The code below compiles and builds with no errors or warnings.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n\n   char timeSignature[4];\n   int BPM;\n\n   printf(\"Enter the working time signature of your project:\");\n   scanf(\"%s\",&amp;timeSignature[4]);\n\n   int beatsPerBar = timeSignature[0]-'1';\n\n   printf(\"Enter the beats per minute:\");\n   scanf(\"%i\",&amp;BPM);\n\n   printf(\"%i\\n\", beatsPerBar);\n\n   return 0;\n\n}\n</code></pre>\n\n<p>However, when I test the code with the following values</p>\n\n<pre><code>timeSignature = \"4/4\"\n    BPM = 180\n</code></pre>\n\n<p>I get a resulting integer of <code>-47</code> (calculator check says it should be returning <code>45</code>).</p>\n\n<p>What am I doing wrong?  Clearly my understanding of encoding and the integers used to represent character values isn't where it should be.  Can anyone share links to broad tutorials on this subject?</p>\n"}, {"tags": ["c", "input", "output", "scanf", "stdio"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1440623312, "post_id": 32236684, "comment_id": 52355711, "body": "Move <code>srand</code> outside the <code>generate_random_number</code>. It needs to be called only once."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1440623443, "post_id": 32236684, "comment_id": 52355771, "body": "Note: <code>int generate_random_number()</code> is old-style. If the argument list of a function declaration is empty, you should use <code>(void)</code>."}, {"owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 0, "creation_date": 1440624193, "post_id": 32236684, "comment_id": 52356125, "body": "Don&#39;t use <code>scanf</code>. <a href=\"http://c-faq.com/stdio/scanfprobs.html\" rel=\"nofollow noreferrer\">c-faq.com/stdio/scanfprobs.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1440623610, "last_edit_date": 1440623610, "creation_date": 1440623417, "answer_id": 32236745, "question_id": 32236684, "link": "https://stackoverflow.com/questions/32236684/c-scanf-issues/32236745#32236745", "title": "C scanf() issues?", "body": "<p>This is a classic newbie error.</p>\n\n<pre><code>scanf(\"%c\",&amp;play);\n</code></pre>\n\n<p>will read the newline character that is left in the input stream after you read the number in <code>take_guess</code>.</p>\n\n<p>Use</p>\n\n<pre><code>scanf(\" %c\",&amp;play);\n</code></pre>\n\n<p>instead.</p>\n\n<p>When you have a whitespace character before <code>%c</code> in the format specifier, the function will read the first non-whitespace character from the input stream. Otherwise, it will read the first available character from the input stream.</p>\n"}], "owner": {"reputation": 49, "user_id": 5270315, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9mqOPQnK3e0/AAAAAAAAAAI/AAAAAAAAD10/WC4UxiDzWMA/photo.jpg?sz=128", "display_name": "David", "link": "https://stackoverflow.com/users/5270315/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 1, "accepted_answer_id": 32236745, "answer_count": 1, "score": 4, "last_activity_date": 1440672920, "creation_date": 1440623160, "last_edit_date": 1440672920, "question_id": 32236684, "link": "https://stackoverflow.com/questions/32236684/c-scanf-issues", "title": "C scanf() issues?", "body": "<p>In this simple guess-the-number game, scanf() is not working the second time in main. I would really appreciate if someone could explain why doesn't work and how to fix it. \nAny tips on how to clean this code up?. Thank you!</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;time.h&gt;\nint guessed = 0;\nint guesses = 0;\nint total_guesses = 0;\nint range_top = 1;\nint generate_random_number()\n{\n    srand(time(NULL));\n    return (rand() % range_top);\n}\nvoid take_guess(int num)\n{\n    int guess;\n    printf(\"what is your guess:  \");\n    scanf(\"%i\",&amp;guess);\n    if(guess == num)\n    {\n        guessed = 1;\n    }\n    else if(guess&gt;num)\n    {\n        printf(\"Your guess was too high,\\n\");\n    }\n    else \n    {\n        printf(\"Your guess was too low.\\n\");\n    }\n\n}\nint main(void)\n{\n    printf(\"This is a game in C\\n\");\n    printf(\"Would you like to play? (y/n): \");\n    char play;\n    scanf(\"%c\",&amp;play);\n    while(play == 'y')\n    {\n        printf(\"I am thinking of a number between 0 and %i\\n\",range_top);\n        int num = generate_random_number();\n        while(guessed ==0)\n        {\n            take_guess(num);\n            guesses++;\n        }\n        printf(\"It took you \");\n        printf(\"%i\",guesses);\n        printf(\" guesses to win.\\n\");\n        printf(\"Would you like to play again? (y/n): \");\n        scanf(\"%c\",&amp;play);\n        guessed = 0;\n        guesses = 0;\n        total_guesses+=guesses;\n\n    }\n    printf(\"goodbye!\");\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc", "cross-compiling"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440622644, "post_id": 32236550, "comment_id": 52355393, "body": "Why not just install the packages?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440623551, "post_id": 32236550, "comment_id": 52355825, "body": "Packages for guinea pig breeding. Wasn&#39;t that what you asked for?"}, {"owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440623782, "post_id": 32236550, "comment_id": 52355931, "body": "I find the sarcasm funny @Olaf, but I am looking for a serious answer :P I don&#39;t consider myself a pro a linux, so bear with me."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440623795, "post_id": 32236550, "comment_id": 52355937, "body": "And please tag the addressee of your comments correctly."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440623985, "post_id": 32236550, "comment_id": 52356033, "body": "Just think thrice before complaining. I gave a very serious hint. If you do not know what a package is, you should first learn about your OS. Second step will then be obvious. Note that your question is actually off-topic on SO, please take the <a href=\"https://stackoverflow.com/tour\">tour</a>."}, {"owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440624284, "post_id": 32236550, "comment_id": 52356161, "body": "I know what packages are, but to tell me to install the packages does not help in any way. What packages would you be talking about, gcc, the standard c lib, etc? Your comment was not helpful so I asked you to clarify."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440624410, "post_id": 32236550, "comment_id": 52356215, "body": "Last try, typing very slowly: what again were you asking for? And what did I write in my first comment?"}, {"owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440624794, "post_id": 32236550, "comment_id": 52356379, "body": "I really can&#39;t tell if you&#39;re messing with me or not, but I got your comment. Install the packages. So can you help me out. apt-get install _______ what do I fill in to get a power pc cross compiler and a power pc std lib c for an Intel machine?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440625035, "post_id": 32236550, "comment_id": 52356487, "body": "Not messing, just trying to make you think a little bit on your own (let&#39;s call it brain-jogging). So, apparently so finally noticed that Ubuntu has cross-compilation toolchains (for ARM, <b>powerpc</b>, etc.) ready for use. So, I&#39;m positive you wil find their names yourself from here. (You prefer to have the fish served as filet, instead of fishing yourself, I suppose?)"}, {"owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440625636, "post_id": 32236550, "comment_id": 52356744, "body": "Maybe you should take the tour, it does say stackoverflow is for questions and answers (First 100 words in the tour). You are not really providing much of an answer if your not going to tell me what package(s) would solve my question. I understand you don&#39;t want a noobie coming on here and just asking for answers without at least trying, but my first steps was to find a pre-built package. Didn&#39;t find any so went the &quot;build it yourself&quot; route. Maybe I was looking for the wrong terms or something, but I think by showing the error I ran into and 2 on topic tuts shows I&#39;m not abusing the site."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440626050, "post_id": 32236550, "comment_id": 52356889, "body": "google <code>ubuntu powerpc cross compiler</code> is really a complicated search term to think of."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440626170, "post_id": 32236550, "comment_id": 52356956, "body": "&quot;So my question is, is there an already pre-built power pc compiler tool chain ...&quot; --&gt; &quot;Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, describe the problem and what has been done so far to solve it.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440626118, "post_id": 32237283, "comment_id": 52356928, "body": "How is <code>libgcc</code> related to the compiler frontend?"}, {"owner": {"reputation": 1176, "user_id": 1371191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-7bV-CLvBrNE/AAAAAAAAAAI/AAAAAAAAAE8/i44ypczz624/photo.jpg?sz=128", "display_name": "Mike Lui", "link": "https://stackoverflow.com/users/1371191/mike-lui"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440626364, "post_id": 32237283, "comment_id": 52357032, "body": "You&#39;re correct, I misused compiler terminology. Corrected."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440626574, "post_id": 32237283, "comment_id": 52357136, "body": "It simply tells gcc to add <code>libgcc</code>. That is only required if building for a <i>freestanding execution environment</i> and if suppressing to use standard libraries (which includes <code>libgcc</code>). Also, <code>libgcc</code> is <b>not</b> part of the C library (that would be newlib/glibc/etc.), but of the GNU Compiler Collection. Not even of the linker."}, {"owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "edited": false, "score": 0, "creation_date": 1440626884, "post_id": 32237283, "comment_id": 52357260, "body": "I&#39;ll find her comment and try that. I was thinking the prefix command used the tutorial was placing libraries where they need to be, but guess I might still have to tell gcc where they are."}, {"owner": {"reputation": 1176, "user_id": 1371191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-7bV-CLvBrNE/AAAAAAAAAAI/AAAAAAAAAE8/i44ypczz624/photo.jpg?sz=128", "display_name": "Mike Lui", "link": "https://stackoverflow.com/users/1371191/mike-lui"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440627621, "post_id": 32237283, "comment_id": 52357550, "body": "@Olaf I was responding to the build error comment in the original post, to allow JD951 to continue the referenced tutorial. I was not responding to the relevancy of <code>libgcc</code> or its relation to the standard C library."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440628118, "post_id": 32237283, "comment_id": 52357731, "body": "@MitchLaskis: I see. But OP clearly states &quot;So my question is, is there an already pre-built power pc compiler tool ...&quot;. Anyway, I&#39;ll remove the DV if you edit the answer (sorry, vote is locked until an edit by SO - not my fault)."}, {"owner": {"reputation": 1176, "user_id": 1371191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-7bV-CLvBrNE/AAAAAAAAAAI/AAAAAAAAAE8/i44ypczz624/photo.jpg?sz=128", "display_name": "Mike Lui", "link": "https://stackoverflow.com/users/1371191/mike-lui"}, "reply_to_user": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "edited": false, "score": 0, "creation_date": 1440629850, "post_id": 32237283, "comment_id": 52358293, "body": "@JD951: Olaf is correct, even he does come off a bit authoritarian. If you feel annoyed by this all, remember the SO community will get antsy about what specific question is getting asked (your question was a bit general), because they don&#39;t want to get populated with a bunch of really high-level questions without an answer that generate a big long discussion that goes nowhere. See <a href=\"http://meta.stackexchange.com/questions/129598/which-computer-science-programming-stack-exchange-do-i-post-in\" title=\"which computer science programming stack exchange do i post in\">meta.stackexchange.com/questions/129598/&hellip;</a>"}, {"owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "edited": false, "score": 0, "creation_date": 1440680486, "post_id": 32237283, "comment_id": 52380621, "body": "I will be more direct with my questions in the future. Thank you for the guidance @MitchLaskis."}], "tags": [], "owner": {"reputation": 1176, "user_id": 1371191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-7bV-CLvBrNE/AAAAAAAAAAI/AAAAAAAAAE8/i44ypczz624/photo.jpg?sz=128", "display_name": "Mike Lui", "link": "https://stackoverflow.com/users/1371191/mike-lui"}, "is_accepted": true, "score": -1, "last_activity_date": 1440629918, "last_edit_date": 1440629918, "creation_date": 1440625791, "answer_id": 32237283, "question_id": 32236550, "link": "https://stackoverflow.com/questions/32236550/trouble-setting-up-powerpc-cross-compiler-toolchain/32237283#32237283", "title": "Trouble Setting Up PowerPC Cross Compiler Toolchain?", "body": "<p>It sounds like your library path isn't set up right. In the first link you mention there is a comment by <em>Ramya</em> saying that she ran into a similar problem and details her solution, namely, adding a path to <code>LIBRARY_PATH</code>.</p>\n\n<p>If you are unfamiliar with the gcc command line: <code>-lgcc</code> is an option that requires <em>gcc</em> (technically <em>ld</em>) knows where <code>libgcc.a</code> or <code>libgcc.so</code> is. You tell <em>gcc</em> this information by either setting <code>LIBRARY_PATH</code> or specifying it command line via the <code>-L</code> option.</p>\n\n<p>You have to manually specify where it is if it does not reside in default library search paths. </p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>To answer your direct question about available toolchains: <em>most likely not</em>. At least not in any package repo that is easy to find with a google search, for your specific environment.  <strong>You</strong> could provide a package that supports cross compilation. Then you need to maintain it, then someone will complain that you don't support their platform, and you'll need to provide another package, and another...or you could just rewrite the entire gcc paradigm to make cross compilation easy to manage. But that sounds like a pain. And no one wants to deal with that. And most people who deal with cross compiling understand the compilation toolchain well enough to deal with it in a case-by-case basis. But as of right now I don't know of a distribution that has an 'out-of-the-box' cross-compile friendly compiler toolchain.</p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "edited": false, "score": 0, "creation_date": 1440680760, "post_id": 32245838, "comment_id": 52380836, "body": "I ended up finding this late last night and it worked for me. <a href=\"http://packages.ubuntu.com/trusty/crossbuild-essential-powerpc\" rel=\"nofollow noreferrer\">packages.ubuntu.com/trusty/crossbuild-essential-powerpc</a>. It took some google fu, but finally found it! I think your link also would do the trick. Thanks @ashwanth."}], "tags": [], "owner": {"reputation": 436, "user_id": 3831746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s0IIJ.jpg?s=128&g=1", "display_name": "ashwanth selvam", "link": "https://stackoverflow.com/users/3831746/ashwanth-selvam"}, "is_accepted": false, "score": 0, "last_activity_date": 1440668324, "creation_date": 1440668324, "answer_id": 32245838, "question_id": 32236550, "link": "https://stackoverflow.com/questions/32236550/trouble-setting-up-powerpc-cross-compiler-toolchain/32245838#32245838", "title": "Trouble Setting Up PowerPC Cross Compiler Toolchain?", "body": "<p>This link provides powerpc toolchains</p>\n\n<p><a href=\"http://download.ronetix.info/toolchains/powerpc/\" rel=\"nofollow\">http://download.ronetix.info/toolchains/powerpc/</a></p>\n\n<p>Hopes this helps you</p>\n"}, {"tags": [], "owner": {"reputation": 839, "user_id": 2706918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wDDMU.jpg?s=128&g=1", "display_name": "Nitinkumar Ambekar", "link": "https://stackoverflow.com/users/2706918/nitinkumar-ambekar"}, "is_accepted": false, "score": 0, "last_activity_date": 1440684768, "last_edit_date": 1440684768, "creation_date": 1440684413, "answer_id": 32251602, "question_id": 32236550, "link": "https://stackoverflow.com/questions/32236550/trouble-setting-up-powerpc-cross-compiler-toolchain/32251602#32251602", "title": "Trouble Setting Up PowerPC Cross Compiler Toolchain?", "body": "<p>You have two options basically:</p>\n\n<ul>\n<li>Use pre-built binaries or say toolchain as specified <a href=\"http://www.yoctoproject.org/docs/1.8/yocto-project-qs/yocto-project-qs.html\" rel=\"nofollow\">here</a> with the title <em>Using Pre-Built Binaries and QEMU</em></li>\n<li>Build your own toolchain &amp; required other files</li>\n</ul>\n\n<p>To use pre-built files, simply follow the linked section. </p>\n\n<p>To build your own toolchain, I'll suggest <a href=\"https://downloads.openwrt.org/\" rel=\"nofollow\">this link</a> to download OpenWRT, while building this OS, you have to run <em>menuconfig</em> where you can specify target as <em>powerpc</em> or <em>ppc</em> along with other options. The <em>menuconfig</em> will show option to build <em>toolchain</em> and other required files for target system.</p>\n\n<p>I hope this helps!</p>\n"}], "owner": {"reputation": 67, "user_id": 5270286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9512c04a6a6f26c785e5cdf4d88d462?s=128&d=identicon&r=PG&f=1", "display_name": "JD951", "link": "https://stackoverflow.com/users/5270286/jd951"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "closed_date": 1441107592, "accepted_answer_id": 32237283, "answer_count": 3, "score": -2, "last_activity_date": 1441211971, "creation_date": 1440622561, "last_edit_date": 1441211971, "question_id": 32236550, "link": "https://stackoverflow.com/questions/32236550/trouble-setting-up-powerpc-cross-compiler-toolchain", "closed_reason": "Not suitable for this site", "title": "Trouble Setting Up PowerPC Cross Compiler Toolchain?", "body": "<p>I have followed this tutorial to try and build a power pc cross compiler</p>\n\n<pre><code>preshing.com/20141119/how-to-build-a-gcc-cross-compiler/\n</code></pre>\n\n<p>The problem I am getting is in step 4 I get a \"cannot find -lgcc\" error. I am guessing something from step 3 did not go trough correctly.</p>\n"}, {"tags": ["c++", "c", "compiler-errors", "makefile"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440621213, "post_id": 32236126, "comment_id": 52354677, "body": "Using default rules, a <code>.c</code> file is usually compiled using <code>gcc</code>. Anyway these are warnings (certainly considerable to fix), not errors."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440621309, "post_id": 32236126, "comment_id": 52354712, "body": "Does the name &quot;<b>CPP</b>SRCS&quot; ring a bell?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440621374, "post_id": 32236126, "comment_id": 52354738, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: Actually, there <b>is</b> an error ..."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440621621, "post_id": 32236126, "comment_id": 52354879, "body": "@Olaf That one refers to source code not shown :-P ..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440621721, "post_id": 32236126, "comment_id": 52354934, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: As do the warnings."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440621982, "post_id": 32236126, "comment_id": 52355072, "body": "@Olaf Sure, of course."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1440622372, "post_id": 32236126, "comment_id": 52355259, "body": "Doesn&#39;t look (just) like a Makefile issue. Looks more like your C source file has some junk characters in it. Perhaps corrupt or inserted by an editor. Have you actually opened the file to see whether it looks as expected? May need to open in hex mode to see some of the characters (e.g. null)."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1440623394, "post_id": 32236126, "comment_id": 52355746, "body": "Without seeing the source of <code>tracePriorityManager.c</code> it&#39;s hard to be sure, but the symptoms are consistent with feeding UTF-16 (or UCS-2) to a compiler expecting 8-bit input.  Does it look reasonable when you <code>od -t a &lt;.&#47;build&#47;pxy&#47;obj&#47;tracePriorityManager.c</code>?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1440623518, "post_id": 32236126, "comment_id": 52355809, "body": "Also, <code>$OBJS</code> will contain <code>.&#47;tracePriorityManager.c</code> - you&#39;ll want to make that <code>.&#47;tracePriorityManager.o</code> so that <code>$(CC)</code> is used to compile it (even better, drop the redundant reference to <code>.&#47;</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440622630, "post_id": 32236218, "comment_id": 52355384, "body": "Nice try, but not targeting the real issue, the OP prefers to be left disclosed so far."}, {"owner": {"reputation": 829, "user_id": 1894478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/844dae39b47a501f7ca3d88cbe6f1909?s=128&d=identicon&r=PG", "display_name": "EvgeniyZh", "link": "https://stackoverflow.com/users/1894478/evgeniyzh"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440623173, "post_id": 32236218, "comment_id": 52355647, "body": "Compiling c with g++ might cause some problems. Fix them one by one."}], "tags": [], "owner": {"reputation": 829, "user_id": 1894478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/844dae39b47a501f7ca3d88cbe6f1909?s=128&d=identicon&r=PG", "display_name": "EvgeniyZh", "link": "https://stackoverflow.com/users/1894478/evgeniyzh"}, "is_accepted": false, "score": 0, "last_activity_date": 1440621257, "creation_date": 1440621257, "answer_id": 32236218, "question_id": 32236126, "link": "https://stackoverflow.com/questions/32236126/need-to-compile-a-program-with-both-c-and-c-code-using-makefile/32236218#32236218", "title": "Need to compile a program with both C++ and C code using Makefile", "body": "<p>You should create a different variable for C sources and compile it with gcc and CFLAGS.\nLook at your rule - it transforms *.cpp to *.o,  but doesn't talk about *.c. </p>\n"}, {"tags": [], "owner": {"reputation": 328, "user_id": 4768463, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/02e9b7b066da2e7d2373ea09fcb63e33?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/4768463/aviv"}, "is_accepted": false, "score": -2, "last_activity_date": 1440656680, "last_edit_date": 1440656680, "creation_date": 1440622584, "answer_id": 32236557, "question_id": 32236126, "link": "https://stackoverflow.com/questions/32236126/need-to-compile-a-program-with-both-c-and-c-code-using-makefile/32236557#32236557", "title": "Need to compile a program with both C++ and C code using Makefile", "body": "<p>Assuming that you share the same the ld and compile flags for both your c++ and c compilation.</p>\n\n<pre><code>CSRC = CSOURCE FILES \n</code></pre>\n\n<p>or just </p>\n\n<pre><code>CSRC := $(wildcard *.c)\n\n\nOBJS += $(foreach s,$(CSRCS:.c=.o),$(OBJ_DIR)/$(notdir $s))\n</code></pre>\n\n<p>as far as I know g++ can compile gcc files without a problem.</p>\n\n<p>Edit: need to use wildcard function to actually get the list of files.\nmy mistake about g++ and c. Only linking is not problematic. You will have to use another set files of OBJC and use gcc explicitly in another rule to compile them. Just make sure to sum all objects file in OBJ and link against g++. \nI really suggest using implicit rules to compile c and c++ and just adding a rule for linking.</p>\n\n<p>Regarding the characters warning. Im throwing a longshot guess, but might have it anything to with the charset expected from the file? Im not sure, but id try to copy paste the content to a new file on my computer and recompile it.</p>\n"}, {"tags": [], "owner": {"reputation": 7, "user_id": 1824157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b29d6021afb6119cca82cbc1cff26a2?s=128&d=identicon&r=PG", "display_name": "user1824157", "link": "https://stackoverflow.com/users/1824157/user1824157"}, "is_accepted": false, "score": 0, "last_activity_date": 1440631943, "creation_date": 1440631943, "answer_id": 32238350, "question_id": 32236126, "link": "https://stackoverflow.com/questions/32236126/need-to-compile-a-program-with-both-c-and-c-code-using-makefile/32238350#32238350", "title": "Need to compile a program with both C++ and C code using Makefile", "body": "<p>I resolved the issue another way: </p>\n\n<p>I changed the name of the .c file to .cpp and encompassed the source file content in extern \"C\" { ..file content.. }</p>\n\n<p>Also changed the file name in Makefile from .c to .cpp and resolved the issue.   </p>\n"}], "owner": {"reputation": 7, "user_id": 1824157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b29d6021afb6119cca82cbc1cff26a2?s=128&d=identicon&r=PG", "display_name": "user1824157", "link": "https://stackoverflow.com/users/1824157/user1824157"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 426, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1440656680, "creation_date": 1440620896, "last_edit_date": 1440621421, "question_id": 32236126, "link": "https://stackoverflow.com/questions/32236126/need-to-compile-a-program-with-both-c-and-c-code-using-makefile", "title": "Need to compile a program with both C++ and C code using Makefile", "body": "<p>I need that a Makefile that someone else previously provided be able to compile .C files with .CPP files. At the time this Makefile was created, we didn\u2019t have any .C files in the project, but that has changed so I modified the Makefile as follows: </p>\n\n<pre><code>GPP=g++\n\nCPPSRCS= \\\n    ./CBDefault.cpp \\\n    ./testPFDefault.cpp \\\n    ./PFDefault.cpp \\\n    ./xapiDebug.cpp \\\n    ./init.cpp \\\n    ./tracePriorityManager.c \\\n\nCFLAGS= -O0 -g3 -Wall -c -fmessage-length=0 -std=c++0x -IASB -IALU   \n-Istub -IIKAN\nOBJ_DIR=../build/pxy/obj\n\nOBJS := $(foreach s,$(CPPSRCS:.cpp=.o),$(OBJ_DIR)/$(notdir $s))\n\n\nPROG=../build/pxy/pxy\n\n$(PROG): $(OBJS) | $(dir $(PROG))\n    $(GPP) -o $@ $(OBJS)\n\n$(OBJ_DIR):\n    mkdir -p $@\n\n$(foreach src,$(CPPSRCS),$(eval $(OBJ_DIR)/$(notdir $(src:.cpp=.o)):\nCSRC=$(src)))\n\n\n$(OBJS): | $(OBJ_DIR)\n    $(GPP) $(CFLAGS) -c -o $@ $(CSRC)\n</code></pre>\n\n<p>Adding tracePriorityManager.c to the list of CPPSRCS macros.\nCompilation results in a long list of error messages with the following content: </p>\n\n<pre><code>../build/pxy/obj/tracePriorityManager.c:10:3607: warning: null      \ncharacter(s) ignored\n../build/pxy/obj/tracePriorityManager.c:10:3618: warning: null    \ncharacter(s) ignored\n../build/pxy/obj/tracePriorityManager.c:10: error: stray ?\\1? in program\n../build/pxy/obj/tracePriorityManager.c:10:3620: warning: null   \ncharacter(s) ignored\n</code></pre>\n\n<p>Can you suggest a change in the Makefile that would fix the problem? </p>\n"}, {"tags": ["c", "memory", "memory-management", "memory-leaks"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1440620929, "post_id": 32236110, "comment_id": 52354499, "body": "We need to see more of the code. It sounds like you may be allocated the memory repeatedly in the loop, rather than just once and reusing it."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1440621145, "post_id": 32236110, "comment_id": 52354639, "body": "Pretty sure that you&#39;ve done something wrong in the code you haven&#39;t shown us. Please post a <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 313, "user_id": 4137044, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh4.googleusercontent.com/-iXJrrbwov8o/AAAAAAAAAAI/AAAAAAAAEQ8/HSIaUeR_Zeg/photo.jpg?sz=128", "display_name": "Dominic", "link": "https://stackoverflow.com/users/4137044/dominic"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1440621303, "post_id": 32236110, "comment_id": 52354709, "body": "@Barmar I am indeed allocating repeatedly. I&#39;ll try to add some more code."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1440622220, "post_id": 32236110, "comment_id": 52355189, "body": "The edit doesn&#39;t help. You&#39;re asking us to examine an elephant through a microscope."}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1440623493, "post_id": 32236110, "comment_id": 52355796, "body": "why dont you reuse the buffer instead of allocating again and again? just allocate a big enough buffer once then keep track of how much you use of it (number_of_elements*sizeof(uint16_t)), allocating is an expensive operation."}, {"owner": {"reputation": 313, "user_id": 4137044, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh4.googleusercontent.com/-iXJrrbwov8o/AAAAAAAAAAI/AAAAAAAAEQ8/HSIaUeR_Zeg/photo.jpg?sz=128", "display_name": "Dominic", "link": "https://stackoverflow.com/users/4137044/dominic"}, "reply_to_user": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1440627104, "post_id": 32236110, "comment_id": 52357366, "body": "@CyberSpock Thanks, I changed that. The memory usage rises slower now. Still, it should actually only overwrite existing values during the loops and by that not occupy more memory after each loop iteration. :/"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1440627887, "post_id": 32236110, "comment_id": 52357644, "body": "NotRelatedToTheBug: there is no real reason for using extremely large buffers. A reasonable buffer size (a few K or a few M) works just as well. In top(or vmstat) just look at the number of systemcalls/context switches and the ratio user/sys. The filesystem will typically do readahead, anyway."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1440630315, "post_id": 32236110, "comment_id": 52358433, "body": "<i>&quot;There&#39;s some allocating happening in the subfunctions but that memory should be freed after the subfunction is done, shouldn&#39;t it?</i>&quot; No, memory obtained from <code>malloc</code> and friends is never freed automatically. If you don&#39;t <code>free</code> it, it stays in memory until the program exits. I think you&#39;re used to a language that has garbage collection, like Java. C does not have garbage collection."}, {"owner": {"reputation": 313, "user_id": 4137044, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh4.googleusercontent.com/-iXJrrbwov8o/AAAAAAAAAAI/AAAAAAAAEQ8/HSIaUeR_Zeg/photo.jpg?sz=128", "display_name": "Dominic", "link": "https://stackoverflow.com/users/4137044/dominic"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1440632037, "post_id": 32236110, "comment_id": 52358908, "body": "@user3386109 Thanks for the clarification. I removed all allocations I could and it works fine now."}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 4137044, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh4.googleusercontent.com/-iXJrrbwov8o/AAAAAAAAAAI/AAAAAAAAEQ8/HSIaUeR_Zeg/photo.jpg?sz=128", "display_name": "Dominic", "link": "https://stackoverflow.com/users/4137044/dominic"}, "edited": false, "score": 0, "creation_date": 1440627000, "post_id": 32237476, "comment_id": 52357319, "body": "No, I&#39;m not. I wasnt aware that this could be something different then the allocated value from before. I did remove the free calls now though and shifted all allocations to happen outside the loop (see latest edit). Still, the memory usage keeps increasing during the calculations even though it should only overwrite existing arrays."}], "tags": [], "owner": {"reputation": 70403, "user_id": 29809, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/943a45958eb537b816a95920fb0be24c?s=128&d=identicon&r=PG", "display_name": "R Samuel Klatchko", "link": "https://stackoverflow.com/users/29809/r-samuel-klatchko"}, "is_accepted": false, "score": 0, "last_activity_date": 1440626711, "creation_date": 1440626711, "answer_id": 32237476, "question_id": 32236110, "link": "https://stackoverflow.com/questions/32236110/binary-file-fread-fwrite-and-calloc-free-memory-leak/32237476#32237476", "title": "binary file fread/fwrite and calloc/free memory leak?", "body": "<pre><code>free(data);\ndata = (uint16_t*)calloc(number_of_elements,sizeof(uint16_t));\n</code></pre>\n\n<p>Are you sure the value of <code>data</code> in the free line is the value returned from the previous call to calloc? If it's <code>NULL</code> when you call free, that is a no-op.</p>\n"}], "owner": {"reputation": 313, "user_id": 4137044, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh4.googleusercontent.com/-iXJrrbwov8o/AAAAAAAAAAI/AAAAAAAAEQ8/HSIaUeR_Zeg/photo.jpg?sz=128", "display_name": "Dominic", "link": "https://stackoverflow.com/users/4137044/dominic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1207, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1440626721, "creation_date": 1440620834, "last_edit_date": 1440626721, "question_id": 32236110, "link": "https://stackoverflow.com/questions/32236110/binary-file-fread-fwrite-and-calloc-free-memory-leak", "title": "binary file fread/fwrite and calloc/free memory leak?", "body": "<p>I'm trying to process some rather big binary files (up to 20gb per file). To do so, I want to read them in chunks, process and write to the new file.</p>\n\n<p>To read the file, I use:</p>\n\n<pre><code>fp = fopen(filename,\"rb\"); //open binary file to read\nfseek(fp, start_of_chunk, SEEK_SET); //set cursor to current chunk\nfread(data,size_of_chunk,1,fp); //read one chunk of data\nfclose(fp);\n</code></pre>\n\n<p>I then allocate some arrays using calloc and process the data.\nTo write it back, I use:</p>\n\n<pre><code>fout = fopen(file_out,\"ab\"); //open output binary file in append mode\nfwrite(processed_data,size_of_processed_data,1,fout);\nfclose(fout);\n</code></pre>\n\n<p>At the end, I use free() on each of the allocated variables (biggest one is the read data chunk (~400 MB), smallest one is about 1kB) and start all over with reading the next chunk.</p>\n\n<p>The output works fine but the process keeps up eating memory like there's no tomorrow. An 800 MB test file eats up to 6 GB of RAM, rising steadily. Reading the whole file at once uses pretty much the same amount of memory as reading the chunks. Using free() between the loops releases not even 5% of the used memory even though those variables contain 99% of the data.</p>\n\n<p>As I am pretty new to C programming, is there anything I might be missing? I read in another thread that the OS (Windows 10 x64 in my case, same problem on Windows 7 x64) might be too slow to release memory. Reading bigger chunks did not help in my case. All the file handles are closed after reading/writing and all allocated arrays are freed at the end.</p>\n\n<p>Edit: I am allocating multiple times within the loop. I'm using</p>\n\n<pre><code>free(data);\ndata = (uint16_t*)calloc(number_of_elements,sizeof(uint16_t));\n</code></pre>\n\n<p>before each call to read data. To process a certain part of the chunk, I'm using</p>\n\n<pre><code>data_part = (uint16_t*)calloc(number_of_elements,sizeof(uint16_t));\nmemmove(data_part,pointer_to_part_of_chunk, size_of_data_part);\n</code></pre>\n\n<p>Edit 2: I changed some stuff, thanks to the comments. Still, memory load keeps rising steadily (tho slower than before). Here's the code once again:</p>\n\n<pre><code>//initiate variables\n//allocate arrays\ndata = (uint16_t*)calloc(number_of_elements,sizeof(uint16_t));\narray1 = (uint16_t*)calloc(number_of_elements1,sizeof(uint16_t));\narray2 = (uint16_t*)calloc(number_of_elements2,sizeof(uint16_t)); //and so on\n\n//some precalculations\n\n//start of the loop\nwhile (not_end_of_the_file){\n    fp = fopen(filename,\"rb\"); //open binary file to read\n    fseek(fp, start_of_chunk, SEEK_SET); //set cursor to current chunk\n    fread(data,size_of_chunk,1,fp); //read one chunk of data\n    fclose(fp);\n\n    //calculate stuff\n    start_of_chunk = start_of_chunk + increment;\n    for (i=0;i&lt;I;i++){\n        memmove(array1,pointer_to_part_of_data, size_of_array1);\n        if (statement){\n            subfunction1(array1);\n        }\n        else{\n            subfunction2(array1);\n        }; //nothing more than some for loops, if statements and arithmetic operations\n    //NO further allocations here, all buffers will be reused\n    };\n\n    //write result\n    fout = fopen(file_out,\"ab\"); //open output binary file in append mode\n    fwrite(processed_data,size_of_processed_data,1,fout);\n    fclose(fout);\n};\n</code></pre>\n\n<p>There's some allocating happening in the subfunctions but that memory should be freed after the subfunction is done, shouldn't it?</p>\n"}, {"tags": ["c", "linux", "signals"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1440620715, "post_id": 32235776, "comment_id": 52354375, "body": "<code>raise()</code> sends the signal to its own process, not some other process. So calling it in another process won&#39;t interrupt this process."}, {"owner": {"reputation": 9, "user_id": 4887961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cEkk1.jpg?s=128&g=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4887961/jason"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1440620958, "post_id": 32235776, "comment_id": 52354527, "body": "Thanks for the response. I had the function calling raise() print its PID, and that matches the PID of main()."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1440620983, "post_id": 32235776, "comment_id": 52354547, "body": "Exactly what @Barmar said. To send the signal from another process, you need to use <code>kill(2)</code>. Also, you should zero out the <code>sa_flags</code> field of <code>struct sigaction</code> before calling <code>sigaction(2)</code> to set up the handler (else the program has UB because <code>sigaction(2)</code> will attempt to read an uninitialized field). Finally, <code>pid_t</code> is not guaranteed to fit in an <code>int</code>, but it is guaranteed to fit in a <code>long</code>, so you should use <code>%ld</code> to print it (and cast the result of <code>getpid(2)</code> to <code>long</code>)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1440621046, "post_id": 32235776, "comment_id": 52354580, "body": "Your question says you call <code>raise()</code> &quot;In a function called by another process&quot;. If it&#39;s a different process, how can have the same PID as <code>main()</code>? Maybe you&#39;re misusing the word &quot;process&quot;."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1440621109, "post_id": 32235776, "comment_id": 52354619, "body": "But it seems like your real question is &quot;Why doesn&#39;t <code>usleep</code> return after the signal handler executes?&quot;"}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1440621399, "post_id": 32235776, "comment_id": 52354761, "body": "How can you have the same process call <code>raise(3)</code> if it is sleeping? Is it another thread?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1440621535, "post_id": 32235776, "comment_id": 52354844, "body": "You are aware that <code>printf()</code> is not async-safe, right?"}, {"owner": {"reputation": 9, "user_id": 4887961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cEkk1.jpg?s=128&g=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4887961/jason"}, "edited": false, "score": 0, "creation_date": 1440621838, "post_id": 32235776, "comment_id": 52354997, "body": "Yes, thanks, guys.  I feel stupid.  I am in the end developing a single-threaded application, but yes, right now it&#39;s multi-threaded and I need to use kill() rather than raise().  It&#39;s that simple."}, {"owner": {"reputation": 9, "user_id": 4887961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cEkk1.jpg?s=128&g=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4887961/jason"}, "edited": false, "score": 0, "creation_date": 1440621929, "post_id": 32235776, "comment_id": 52355038, "body": "As for printf(), yes - in fact I&#39;m calling a log function which has  semaphore around it, I typed printf here to avoid having to explain that, heh"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1440621953, "post_id": 32235776, "comment_id": 52355056, "body": "@Jason: You realize that in a <i>multithreaded</i> program <code>kill()</code> is virtually useless, since you can&#39;t target individual threads?"}, {"owner": {"reputation": 9, "user_id": 4887961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cEkk1.jpg?s=128&g=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4887961/jason"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1440622167, "post_id": 32235776, "comment_id": 52355156, "body": "@EOF  But kill() takes __pid_t as a parameter"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1440622204, "post_id": 32235776, "comment_id": 52355182, "body": "...and all threads in a multithreaded process share their pid. Your point?"}, {"owner": {"reputation": 9, "user_id": 4887961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cEkk1.jpg?s=128&g=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4887961/jason"}, "edited": false, "score": 0, "creation_date": 1440622523, "post_id": 32235776, "comment_id": 52355339, "body": "Yeah, you&#39;re right - in this case it&#39;s not important, as there is only the one signal handler, and the other threads are only there temporarily."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1440622630, "post_id": 32235776, "comment_id": 52355385, "body": "...and all threads share signal handlers. Your point?"}, {"owner": {"reputation": 9, "user_id": 4887961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cEkk1.jpg?s=128&g=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4887961/jason"}, "edited": false, "score": 0, "creation_date": 1440623053, "post_id": 32235776, "comment_id": 52355589, "body": "Right, so I switched to pthread_kill.  Thanks :)"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1440623200, "post_id": 32235776, "comment_id": 52355659, "body": "That&#39;s nice. Also, using semaphores (or other non-lockfree synchronization) in a signal handler is undefined (will likely result in deadlock)."}], "owner": {"reputation": 9, "user_id": 4887961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cEkk1.jpg?s=128&g=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4887961/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 936, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1525192772, "creation_date": 1440619672, "last_edit_date": 1525192772, "question_id": 32235776, "link": "https://stackoverflow.com/questions/32235776/raise-of-signal-is-not-waking-a-sleeping-process", "title": "raise() of signal is not waking a sleeping process", "body": "<p>I have a single thread program that sleeps to conserve battery power while waiting for hardware events. main() registers a signal handler, then sleeps.  Hardware interrupt handlers may wake main by calling a function which calls raise(), and seeing any signal should wake main from sleep.</p>\n\n<p>Now, for development purposes, I am running on a desktop, and instead of getting true hardware events, there are a couple of other processes which send fake hardware events.  Instead of the interrupt handler making the aforementioned function calls, these tasks do.</p>\n\n<p>A very simple demo case works fine, I can provide that code if needed, but don't want this post to be too long.</p>\n\n<p>I have declared this signal handler:</p>\n\n<pre><code>void sig_handler( int signo )\n{\n    //To confirm that this process is the same one that is sleeping\n    printf(\"sig_handler: my PID is %d\\n\", getpid());\n\n    if ( SIGUSR1 == signo)\n    {\n        printf(\"received SIGUSR1\\n\");\n    }\n    else\n    {\n       printf(\"received some other signal\\n\");\n    }\n}\n</code></pre>\n\n<p>There is lot of other code, but the bit in question is that during init, I call:</p>\n\n<pre><code>sSigAction.sa_handler = sig_handler;\nsigemptyset( &amp;sSigAction.sa_mask );\nsigaction( SIGUSR1, &amp;sSigAction, NULL );\n</code></pre>\n\n<p>In a function called by another process (or interrupt handler in real system):</p>\n\n<pre><code>printf( \"raising signal!\\n\");\nraise( SIGUSR1 );\n</code></pre>\n\n<p>In main:</p>\n\n<pre><code>printf(\"main: my PID is %d\\n\", getpid());\nwhile(1)\n{\n    printf(\"sleeping forever\\n\");\n    usleep(-1);\n    printf(\"main is awake\"\\n);\n    //Do work we were waiting to do\n}\n</code></pre>\n\n<p>The output looks like this:</p>\n\n<pre><code>main: my PID is 17250\nsleeping forever\nraising signal!\nsig_handler: my PID is 17250\nreceived SIGUSR1\n</code></pre>\n\n<p>Note the critical lack of \"main is awake\".  As I said, doing these same steps does work, in a simple demo case. Since I am doing the same setup, I don't understand why it's not working.  In both cases, I perform the same signal handler registration, usleep(), and raise(), but the demo case works and this does not.</p>\n\n<p>Any ideas of what I could be missing?</p>\n\n<p>Follow-up:  I have found that if I use $kill -s USR1    then the task wakes as expected.  So the mechanism is sound, but why does $kill work and raise() not?</p>\n\n<p>Follow-up 2: I now have the function calling raise() also print getpid() and it matches the PID of main().</p>\n\n<hr>\n\n<p>Resolution:  While in the end I will have a single thread, and raise() would be appropriate right now I have multiple, and so must use kill(). It's that simple.</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1440619619, "post_id": 32235741, "comment_id": 52353825, "body": "There has never been a <code>getline</code> function in standard C."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1440619666, "post_id": 32235741, "comment_id": 52353840, "body": "<code>scanf</code> doesn&#39;t read lines. In particular, <code>%s</code> reads a (whitespace separated) word."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1440619669, "post_id": 32235741, "comment_id": 52353842, "body": "<code>getline()</code> is a C++ funcction. The analogous function in C is <code>fgets()</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440620427, "post_id": 32235741, "comment_id": 52354204, "body": "you should limit the length of the string you read. <code>sizeof(char)</code> is defined to yield <code>1</code>. That will never differ, so it is useless."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 4, "last_activity_date": 1440619688, "creation_date": 1440619688, "answer_id": 32235783, "question_id": 32235741, "link": "https://stackoverflow.com/questions/32235741/simple-test-program-using-sscanf-does-not-work/32235783#32235783", "title": "Simple test program using sscanf does not work", "body": "<p>You ask the user to enter three integers separated by spaces.</p>\n\n<p>You try to read that information with <code>\"%s\"</code> which stops reading at the first space.  This is why you run into problems.  You could have found this out by printing what you get from your <code>scanf()</code> call.</p>\n\n<p>Don't forget to check the return value from <code>sscanf()</code>.</p>\n\n<p>There is a POSIX function <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/getline.html\" rel=\"nofollow\"><code>getline()</code></a> which reads a whole line and tells you how long it is.  Alternatively, there is the standard C function <code>fgets()</code> which can be used to read whole lines.</p>\n\n<p>At a pinch, you could use <code>scanf(\" %[^\\n]\", string)</code>, but I really wouldn't recommend it; use <code>getline()</code> or <code>fgets()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 415, "user_id": 5253609, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6dfc8d6ed11081e4f0c9fa869db9eee?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias", "link": "https://stackoverflow.com/users/5253609/mathias"}, "edited": false, "score": 0, "creation_date": 1440620165, "post_id": 32235810, "comment_id": 52354089, "body": "Hi thanks! fgets(string, nbytes, stdin) does work. Previously I had tried:"}, {"owner": {"reputation": 415, "user_id": 5253609, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6dfc8d6ed11081e4f0c9fa869db9eee?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias", "link": "https://stackoverflow.com/users/5253609/mathias"}, "edited": false, "score": 0, "creation_date": 1440620234, "post_id": 32235810, "comment_id": 52354128, "body": "previously I had tried fgets(string, sizeof(string), stdin) and fgets(string, strlen(string), stdin), but neither of these worked. Why would this be? Thanks again"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 415, "user_id": 5253609, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6dfc8d6ed11081e4f0c9fa869db9eee?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias", "link": "https://stackoverflow.com/users/5253609/mathias"}, "edited": false, "score": 1, "creation_date": 1440620338, "post_id": 32235810, "comment_id": 52354171, "body": "<code>string</code> is a pointer, so <code>sizeof (string)</code> is the size of the pointer (probably 4 bytes), not the size of the buffer you allocated. And <code>strlen(string)</code> is the length of the current value in the string (the position of the terminating null), which is undefined because you haven&#39;t put anything into it yet."}, {"owner": {"reputation": 415, "user_id": 5253609, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6dfc8d6ed11081e4f0c9fa869db9eee?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias", "link": "https://stackoverflow.com/users/5253609/mathias"}, "edited": false, "score": 0, "creation_date": 1440620514, "post_id": 32235810, "comment_id": 52354248, "body": "Nice one! Thanks again... btw, do you know if there is a limit to how many &quot;novice&quot; questions you can ask on here? It seems my reputation has gone down after this latest post..."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 415, "user_id": 5253609, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6dfc8d6ed11081e4f0c9fa869db9eee?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias", "link": "https://stackoverflow.com/users/5253609/mathias"}, "edited": false, "score": 0, "creation_date": 1440620582, "post_id": 32235810, "comment_id": 52354293, "body": "Your rep went down because of the downvotes. Why people downvoted, I don&#39;t know."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 415, "user_id": 5253609, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6dfc8d6ed11081e4f0c9fa869db9eee?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias", "link": "https://stackoverflow.com/users/5253609/mathias"}, "edited": false, "score": 1, "creation_date": 1440620938, "post_id": 32235810, "comment_id": 52354513, "body": "@Matthew2015: there&#39;s no direct limit on the number of novice questions; your reputation won&#39;t go negative (or go to zero).  OTOH, you probably want to get to a decent positive reputation, if only so you can leave comments (50 points needed, IIRC).  Post compilable code (what you showed won&#39;t compile \u2014 as pointed out in one answer). Try to avoid asking what seem like obvious questions (by doing things like basic debugging by printing out the value read in, or knowing how to run a debugger and looking at what is read \u2014 which would show you what&#39;s going on) would help too. Know your manual, too."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1440620409, "last_edit_date": 1440620409, "creation_date": 1440619770, "answer_id": 32235810, "question_id": 32235741, "link": "https://stackoverflow.com/questions/32235741/simple-test-program-using-sscanf-does-not-work/32235810#32235810", "title": "Simple test program using sscanf does not work", "body": "<p>To read a line of input, use <code>fgets()</code>.</p>\n\n<pre><code>fgets(string, nbytes + 1, stdin);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1440619829, "post_id": 32235816, "comment_id": 52353923, "body": "That&#39;s obviously a copying error, not the problem he&#39;s having. This should be a comment, not an answer."}], "tags": [], "owner": {"reputation": 84, "user_id": 1100623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06da94414e0ebd9fd45a153de549d1c6?s=128&d=identicon&r=PG", "display_name": "Ryan Robinson", "link": "https://stackoverflow.com/users/1100623/ryan-robinson"}, "is_accepted": false, "score": 1, "last_activity_date": 1440619786, "creation_date": 1440619786, "answer_id": 32235816, "question_id": 32235741, "link": "https://stackoverflow.com/questions/32235741/simple-test-program-using-sscanf-does-not-work/32235816#32235816", "title": "Simple test program using sscanf does not work", "body": "<p>Be sure to finish this line:</p>\n\n<pre><code>printf(\"Please enter three integers separated by whitespace\\n\"\n</code></pre>\n"}], "owner": {"reputation": 415, "user_id": 5253609, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a6dfc8d6ed11081e4f0c9fa869db9eee?s=128&d=identicon&r=PG&f=1", "display_name": "Mathias", "link": "https://stackoverflow.com/users/5253609/mathias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1440623064, "creation_date": 1440619532, "last_edit_date": 1440623064, "question_id": 32235741, "link": "https://stackoverflow.com/questions/32235741/simple-test-program-using-sscanf-does-not-work", "title": "Simple test program using sscanf does not work", "body": "<p>I was wondering why the following does not work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    int nbytes = 100;\n    char* string;\n    string = malloc((sizeof(char) * nbytes) + 1); \n    int x, y, z;\n    int args_assigned = 0;\n\n    while (args_assigned != 3)\n    {\n        printf(\"Please enter three integers separated by whitespace\\n\"\n        scanf(\"%s\", string);\n        args_assigned = sscanf(string, \"%d %d %d\", &amp;x, &amp;y, &amp;z);\n    }\n\n    free(string);\n    printf(\"Thanks for %d %d %d\\n\", x, y, z);\n\n    return 0;\n}    \n</code></pre>\n\n<p>In the original version of this code, the programmer had used <code>getline</code> instead of <code>scanf</code>, but apparently this is no longer a valid function in C99? Please correct me if I am wrong.</p>\n\n<p>Anyway, I suspect the problem is to do with my use of <code>scanf</code>. Is there another function I should be using to provide the string for <code>sscanf</code> to parse? Of course, there could be something far more fundamental that I am missing here... </p>\n"}, {"tags": ["c", "arrays", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440619807, "post_id": 32235687, "comment_id": 52353910, "body": "I&#39;m thinking that &#39;int (*ptr)[5]=&amp;val;&#39; is not correct as it (almost) say declare an array of 5 pointers to int, then set the (difficult to say exactly which entry in the &#39;ptr[]&#39; array)  is being set to the address of &#39;val&#39;   Perhaps you meant:  &#39;int *ptr[5];  ptr[0] = &amp;val;&#39;"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1440619961, "post_id": 32235687, "comment_id": 52353986, "body": "@user3629249 No, I meant what I wrote. <code>int (*ptr)[5]</code> is an pointer to an array of 5 ints."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440620582, "post_id": 32235687, "comment_id": 52354294, "body": "@user3629249 Here&#39;s <a href=\"http://stackoverflow.com/questions/859634/c-pointer-to-array-array-of-pointers-disambiguation\">a related question</a>."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440621086, "post_id": 32235687, "comment_id": 52354603, "body": "@user3629249: The code above is equivalent to <code>int (*ptr)[5]; ptr = &amp;val;</code>.  <code>ptr</code> is a pointer to a 5-element array of <code>int</code>,  <code>int *ptr[5]</code> declares an 5-element array of pointers to <code>int</code>, which is an entirely different thing, and not what we want here."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440621454, "post_id": 32235687, "comment_id": 52354789, "body": "@user3629249 it&#39;s cute how you question a 145k user&#39;s answer to a trivial question. Hubris is bad!"}], "tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 2, "last_activity_date": 1440619367, "creation_date": 1440619367, "answer_id": 32235687, "question_id": 32235657, "link": "https://stackoverflow.com/questions/32235657/pointer-and-array-assignment/32235687#32235687", "title": "Pointer and array assignment", "body": "<p>The warning is because the type of the pointer (pointer to length 1 array of <code>int</code>) doesn't match the type of the array, with is length 5 array of <code>int</code>. You need</p>\n\n<pre><code>int (*ptr)[5]=&amp;val;\n</code></pre>\n\n<p>There is no warning in the first example because the type of the pointer on the LHS of the initialization matches the type of the pointer on the RHS.</p>\n"}], "owner": {"reputation": 423, "user_id": 2540594, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/834fcb798d566dce0aeb5c44e30a6c1d?s=128&d=identicon&r=PG", "display_name": "Lundu Harianja", "link": "https://stackoverflow.com/users/2540594/lundu-harianja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 32235687, "answer_count": 1, "score": -1, "last_activity_date": 1440620392, "creation_date": 1440619252, "last_edit_date": 1440620392, "question_id": 32235657, "link": "https://stackoverflow.com/questions/32235657/pointer-and-array-assignment", "title": "Pointer and array assignment", "body": "<p><code>int val = 7;</code> </p>\n\n<pre><code>int *ptr = &amp;val;\n</code></pre>\n\n<p><strong>val is a variable of type int and ptr is a pointer to type int</strong>\nso the assignment above is right and there is no warning from compiler.</p>\n\n<pre><code>int val[5] = {5, 3, 2, 33,557};\nint (*ptr)[1]=&amp;val;\n</code></pre>\n\n<p><strong>val is an array of integers and ptr is a pointer to an array of int</strong>\nwhen run compiler give me a warning:</p>\n\n<pre><code>warning: initialization from incompatible pointer type [enabled by default]\n</code></pre>\n\n<p>please someone explain me what is the differece between them?</p>\n"}, {"tags": ["c", "crash", "homebrew"], "comments": [{"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1440615646, "post_id": 32234631, "comment_id": 52351608, "body": "Besides adding the diagnostic printfs, have you tried to debug it?"}, {"owner": {"reputation": 45, "user_id": 5269933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fTF_vKhPcRc/AAAAAAAAAAI/AAAAAAAAOmI/0b7tJ9M8ra8/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/5269933/jack"}, "reply_to_user": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1440615757, "post_id": 32234631, "comment_id": 52351665, "body": "Yeah, I&#39;m new to C but I&#39;ve tried various little tweaks but I&#39;ve had no luck :( I&#39;m not sure what would be the best way to debug it."}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1440615760, "post_id": 32234631, "comment_id": 52351667, "body": "For example, why doesn&#39;t the effect of <code>printf(&quot;Description: %s&quot;...)</code> not appear?  (That should tell you almost exactly where it crashes.)"}, {"owner": {"reputation": 45, "user_id": 5269933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fTF_vKhPcRc/AAAAAAAAAAI/AAAAAAAAOmI/0b7tJ9M8ra8/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/5269933/jack"}, "reply_to_user": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1440616086, "post_id": 32234631, "comment_id": 52351854, "body": "Oh, I see what you mean. It crashes when it gets to &quot;P2&quot;, after successfully returning the value of <code>printf(&quot;Description: %s&quot;...)</code>."}, {"owner": {"reputation": 45, "user_id": 5269933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fTF_vKhPcRc/AAAAAAAAAAI/AAAAAAAAOmI/0b7tJ9M8ra8/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/5269933/jack"}, "reply_to_user": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1440616121, "post_id": 32234631, "comment_id": 52351869, "body": "So I honestly don&#39;t know what causes it to crash :/"}, {"owner": {"reputation": 45, "user_id": 5269933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fTF_vKhPcRc/AAAAAAAAAAI/AAAAAAAAOmI/0b7tJ9M8ra8/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/5269933/jack"}, "edited": false, "score": 0, "creation_date": 1440617146, "post_id": 32234631, "comment_id": 52352485, "body": "So what should I do to my code, to fix that?"}, {"owner": {"reputation": 45, "user_id": 5269933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fTF_vKhPcRc/AAAAAAAAAAI/AAAAAAAAOmI/0b7tJ9M8ra8/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/5269933/jack"}, "edited": false, "score": 0, "creation_date": 1440618325, "post_id": 32234631, "comment_id": 52353140, "body": "Oooh. Do you think you could paste some example code? I&#39;m so new to C that I&#39;m not sure about arrays and how to use snprintf in the way that you said."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440624750, "post_id": 32234631, "comment_id": 52356362, "body": "a few suggestions:  1) place only one statement per line, to make it easy for us humans to read/understand the code  2) separate code blocks with a blank line  3) indent (say 4 spaces) after every opening brace &#39;{&#39; and un-indent before every closing brace &#39;}&#39;  4) never use tabs for indenting as each wordprocessor/editor has the tab stops/tab widths set differently."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440625395, "post_id": 32234631, "comment_id": 52356647, "body": "please, when posting about a runtime problem (the program crashes) post code that cleanly compiles, is &#39;relatively&#39; small and shows the problem.   Then we can examine the code via a debugger, to help you determine the cause of the crash and what to correct to eliminate the crash."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440625477, "post_id": 32234631, "comment_id": 52356686, "body": "suggest reading the man page for each system function that you call (or plan to call) so you know the details and what to expect from each called system function"}, {"owner": {"reputation": 45, "user_id": 5269933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fTF_vKhPcRc/AAAAAAAAAAI/AAAAAAAAOmI/0b7tJ9M8ra8/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/5269933/jack"}, "edited": false, "score": 0, "creation_date": 1441226521, "post_id": 32234631, "comment_id": 52598188, "body": "Thanks :) I&#39;ll be sure to do that, next time."}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440625244, "post_id": 32236393, "comment_id": 52356577, "body": "of course, tempString must be a pointer to malloc&#39;d memory, otherwise the caller will be referencing the contents of an array on the stack, a stack that is nolonger valid after the sub function exits."}, {"owner": {"reputation": 45, "user_id": 5269933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fTF_vKhPcRc/AAAAAAAAAAI/AAAAAAAAOmI/0b7tJ9M8ra8/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/5269933/jack"}, "edited": false, "score": 0, "creation_date": 1441226930, "post_id": 32236393, "comment_id": 52598410, "body": "Thanks for the code example :) I took your code and added it but it still crashes the 3DS back to the home screen. Bummer. Oh well. I must be doing something wrong. I appreciate the response."}, {"owner": {"reputation": 84, "user_id": 1100623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06da94414e0ebd9fd45a153de549d1c6?s=128&d=identicon&r=PG", "display_name": "Ryan Robinson", "link": "https://stackoverflow.com/users/1100623/ryan-robinson"}, "edited": false, "score": 0, "creation_date": 1441287419, "post_id": 32236393, "comment_id": 52625120, "body": "If you&#39;re satisfied with the answer feel free to accept it"}, {"owner": {"reputation": 45, "user_id": 5269933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fTF_vKhPcRc/AAAAAAAAAAI/AAAAAAAAOmI/0b7tJ9M8ra8/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/5269933/jack"}, "edited": false, "score": 0, "creation_date": 1441288028, "post_id": 32236393, "comment_id": 52625599, "body": "I just need to squash that last bug. It prints out the rest of the file, for some reason. Latest code: <a href=\"https://github.com/lavanoid/3DS_JSON_Parser/blob/master/source/main.c\" rel=\"nofollow noreferrer\">github.com/lavanoid/3DS_JSON_Parser/blob/master/source/main.&zwnj;&#8203;c</a>"}], "tags": [], "owner": {"reputation": 84, "user_id": 1100623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06da94414e0ebd9fd45a153de549d1c6?s=128&d=identicon&r=PG", "display_name": "Ryan Robinson", "link": "https://stackoverflow.com/users/1100623/ryan-robinson"}, "is_accepted": true, "score": 0, "last_activity_date": 1440679210, "last_edit_date": 1592644375, "creation_date": 1440621909, "answer_id": 32236393, "question_id": 32234631, "link": "https://stackoverflow.com/questions/32234631/calling-my-function-causes-the-program-to-crash-c-3ds-homebrew/32236393#32236393", "title": "Calling my function, causes the program to crash - C | 3DS Homebrew", "body": "<p>from <a href=\"http://www.cplusplus.com/reference/cstdio/printf/\" rel=\"nofollow noreferrer\">cplusplus.com</a> regarding the return value of printf():</p>\n<blockquote>\n<p>On success, the total number of characters written is returned.</p>\n<p>If a writing error occurs, the error indicator (ferror) is set and a negative number is returned.</p>\n<p>If a multibyte character encoding error occurs while writing wide characters, errno is set to EILSEQ and a negative number is returned.</p>\n</blockquote>\n<p>you cannot do this: <code>return printf(&quot;%.*s\\n&quot;, t[i+1].end-t[i+1].start, file_buffer + t[i+1].start);</code></p>\n<p>because your function needs to return a <code>const char *</code>, not an <code>int</code>, which is returned from printf().</p>\n<p>You should use sprintf() to print the string you want into a buffer (tempString for example)</p>\n<pre><code>static char *tempString;\n...\nif(tempstring != NULL) {\n    free(tempString);\n    tempString = NULL;\n}\ntempString = (char *)malloc(t[i+1].end-t[i+1].start+1);\nif(tempString != NULL) {\n    sprintf(tempString,&quot;%s&quot;, file_buffer + t[i+1].start);\n    return (const char *)tempString;\n} else {\n    return &quot;malloc error!&quot;;\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 5269933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fTF_vKhPcRc/AAAAAAAAAAI/AAAAAAAAOmI/0b7tJ9M8ra8/photo.jpg?sz=128", "display_name": "Jack", "link": "https://stackoverflow.com/users/5269933/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 32236393, "answer_count": 1, "score": 2, "last_activity_date": 1463074953, "creation_date": 1440615528, "last_edit_date": 1463074953, "question_id": 32234631, "link": "https://stackoverflow.com/questions/32234631/calling-my-function-causes-the-program-to-crash-c-3ds-homebrew", "title": "Calling my function, causes the program to crash - C | 3DS Homebrew", "body": "<p>I've been writing a homebrew for the Nintendo 3DS, which is written in C. It simply parses a JSON file and prints it onto the screen. The problem is that after parsing and printing it on the screen, it just crashes.</p>\n\n<p>Code: </p>\n\n<pre><code>char JSON_FILE[] = \"jsbr-ford-mustang.json\";\nstatic int jsoneq(const char *json, jsmntok_t *tok, const char *s) {\n    if (tok-&gt;type == JSMN_STRING &amp;&amp; (int) strlen(s) == tok-&gt;end - tok-&gt;start &amp;&amp;\n        strncmp(json + tok-&gt;start, s, tok-&gt;end - tok-&gt;start) == 0) {\n        return 0;\n    }\n    return -1;\n}\n\nconst char * parse_json(char* value) {\n    u8* file_buffer; FILE *file = fopen(JSON_FILE,\"rb\"); if (file == NULL) printf(\"Error.\\n\");\n    fseek(file,0,SEEK_END); off_t size = ftell(file); fseek(file,0,SEEK_SET); file_buffer=malloc(size);\n    if(!file_buffer) printf(\"Error.\\n\");\n    off_t bytesRead = fread(file_buffer,1,size,file); fclose(file);\n    if(size!=bytesRead) printf(\"Error.\\n\");\n    int i; int r;\n    jsmn_parser p; jsmntok_t t[128]; jsmn_init(&amp;p);\n    r = jsmn_parse(&amp;p, file_buffer, size, t, sizeof(t)/sizeof(t[0]));\n\n    if (r &lt; 0) {\n        printf(\"Failed to parse JSON: %d\\n\", r);\n        return 1;\n    }\n    if (r &lt; 1 || t[0].type != JSMN_OBJECT) {\n        printf(\"Object expected\\n\");\n        return 1;\n    }\n    printf(\"Debug START\\n\");\n    for (i = 1; i &lt; r; i++) {\n        if (jsoneq(file_buffer, &amp;t[i], value) == 0) {\n            printf(\"Debug 1\\n\");\n            break;\n        }\n        printf(\"Debug 2\\n\");\n    }\n    printf(\"Debug 3\\n\");\n    return printf(\"%.*s\\n\", t[i+1].end-t[i+1].start, file_buffer + t[i+1].start);\n}\n\nint main() {\n    gfxInitDefault();\n    consoleInit(GFX_TOP,NULL);\n    printf(\"P1\\n\");\n    printf(\"Description: %s\",parse_json(\"description\"));\n    printf(\"P2\\n\");\n    printf(\"Sync spacing: %s\",parse_json(\"synchronization_spacing_us\"));\n    while (aptMainLoop()) {\n        hidScanInput(); u32 kDown = hidKeysDown();\n        if(kDown &amp; KEY_START) {\n            consoleClear();\n            break;\n        }\n        gfxFlushBuffers();\n        gfxSwapBuffers();\n    }\n    gfxExit();\n    return 0;\n}\n</code></pre>\n\n<p>Debug output:</p>\n\n<pre><code>P1\nDebug START\nDebug 2\nDebug 2\nDebug 1\nDebug 3\nFord Mustang, 40MHz, No. 23019\n</code></pre>\n\n<p>Here is a video of what happens: <a href=\"https://www.youtube.com/watch?v=zpt_BEMyIOc\" rel=\"nofollow\">https://www.youtube.com/watch?v=zpt_BEMyIOc</a></p>\n\n<p>Here is the GitHub repo that I have for it: <a href=\"https://github.com/lavanoid/3DS_JSON_Parser\" rel=\"nofollow\">https://github.com/lavanoid/3DS_JSON_Parser</a></p>\n"}, {"tags": ["c++", "c", "googletest", "googlemock"], "comments": [{"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1440615903, "post_id": 32234543, "comment_id": 52351746, "body": "The source code is in C"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440625647, "post_id": 32234543, "comment_id": 52356747, "body": "please remove the &#39;c&#39; tag."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440625754, "post_id": 32234543, "comment_id": 52356787, "body": "the a.h header file is missing the &#39;include guards&#39;.  (typically: #ifndef A_H  #define A_H ..... #endif)    Please use meaningful names. &#39;a.h&#39; is not a meaningful name, nor is &#39;b.c&#39;"}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1440688558, "post_id": 32234543, "comment_id": 52386764, "body": "@ratzip has something left unclear to you?"}, {"owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "reply_to_user": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1440692643, "post_id": 32234543, "comment_id": 52389534, "body": "@fukanchik thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "is_accepted": true, "score": 1, "last_activity_date": 1440616252, "last_edit_date": 1495542124, "creation_date": 1440616252, "answer_id": 32234829, "question_id": 32234543, "link": "https://stackoverflow.com/questions/32234543/google-mock-link-error-with-mocking-c-function/32234829#32234829", "title": "google mock link error with mocking C function", "body": "<p>replace </p>\n\n<pre><code>AMock.hh\n\n#include \"a.h\"\n</code></pre>\n\n<p>with</p>\n\n<pre><code>AMock.hh\n\nextern \"C\" {\n    #include \"a.h\"\n}\n</code></pre>\n\n<p>here is why: <a href=\"https://stackoverflow.com/questions/1041866/in-c-source-what-is-the-effect-of-extern-c\">In C++ source, what is the effect of extern &quot;C&quot;?</a></p>\n"}], "owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 990, "favorite_count": 0, "accepted_answer_id": 32234829, "answer_count": 1, "score": 0, "last_activity_date": 1440616252, "creation_date": 1440615262, "last_edit_date": 1440615926, "question_id": 32234543, "link": "https://stackoverflow.com/questions/32234543/google-mock-link-error-with-mocking-c-function", "title": "google mock link error with mocking C function", "body": "<p>I have the following code, I try to mock a C function using google mock:</p>\n\n<p>This is the header file:</p>\n\n<pre><code>A.h\n\nint getValue(int age, int* value, int* number);\n</code></pre>\n\n<p>This is the source file:</p>\n\n<pre><code>A.c\n\nint getValue(int age, int* value, int* number)\n{\n    // do something and return value\n    return 10;\n}\n</code></pre>\n\n<p>This is source file b.c, which using a.h</p>\n\n<pre><code>b.c\n\n#include &lt;a.h&gt;\n\nvoid formValue()\n{\n   int b = 10;\n   int c = 20;\n   getValue(1, &amp;b, &amp;c);    \n}\n</code></pre>\n\n<p>This is the mock file:</p>\n\n<pre><code>AMock.hh\n\n#include \"a.h\"\n\nclass AFileMock {\n  public:\n    AFileMock();\n    ~AFileMock();\n    MOCK_METHOD3(getValue, int(int, int *, int *));\n};\n</code></pre>\n\n<p>Then in the test:</p>\n\n<pre><code>#include \"gmock/gmock.h\"\n#include \"gtest/gtest.h\"\n\n#include &lt;b.h&gt;\n#include &lt;AFileMock.h&gt;\n\nusing testing::_;\nusing testing::Return;\nusing testing::InSequence;\n\nclass BTest: public testing::Test {\n\nprotected:\n   AFileMock aFile;\n\npublic:\n   void SetUp() { }\n   void TearDown() { }\n};\n\n\nTEST_F(BTest, test1)\n{\n   InSequence sequence;\n   EXPECT_CALL(aFile, getValue(_, _, _)).\n      Times(1);\n\n   formValue();\n}\n</code></pre>\n\n<p>when I try to run this test, it complains that the get link error in the Mock file, it says:</p>\n\n<p><code>link error: getValue(_, _, _) is not defined</code>, and it points to the Mock file <code>AMock.hh</code>.</p>\n\n<p>But if I use MOCK_CONST_METHOD instead of MOCK_METHOD in the Mock, it work:</p>\n\n<pre><code>MOCK_CONST_METHOD3(getValue, int(int, int *, int *));\n</code></pre>\n\n<p>No complier errors.</p>\n\n<p>What is the reason for this?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440616534, "post_id": 32234360, "comment_id": 52352141, "body": "<code>a</code> is an array, <b>not</b> a pointer!"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 5269900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a2334c068b5d84a0ca8e7b0c0011a7?s=128&d=identicon&r=PG&f=1", "display_name": "Khanna", "link": "https://stackoverflow.com/users/5269900/khanna"}, "edited": false, "score": 0, "creation_date": 1440615413, "post_id": 32234430, "comment_id": 52351483, "body": "So you meant that &quot;a&quot; is  integer pointer and if &amp;a is used the pointer will be treated as pointer to an array"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "reply_to_user": {"reputation": 59, "user_id": 5269900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a2334c068b5d84a0ca8e7b0c0011a7?s=128&d=identicon&r=PG&f=1", "display_name": "Khanna", "link": "https://stackoverflow.com/users/5269900/khanna"}, "edited": false, "score": 0, "creation_date": 1440616027, "post_id": 32234430, "comment_id": 52351813, "body": "<code>a</code> is a pointer to the first element of an integer array (and thus a pointer to an integer), while <code>&amp;a</code> is a pointer the the whole array."}], "tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 1, "last_activity_date": 1440614890, "creation_date": 1440614890, "answer_id": 32234430, "question_id": 32234360, "link": "https://stackoverflow.com/questions/32234360/adding-to-integer-array-base-address-c/32234430#32234430", "title": "Adding to integer array base address C?", "body": "<p>The size of what <code>&amp;a</code> points to is 20 bytes (the whole array: 4 bytes x 5 elements), while the size of what <code>a</code> points to is 4 bytes (a single <code>int</code>).  The fact that they are both at the same address is irrelevant; they are different ways of interpreting what is at that address.</p>\n"}, {"tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": false, "score": 1, "last_activity_date": 1440615053, "creation_date": 1440615053, "answer_id": 32234476, "question_id": 32234360, "link": "https://stackoverflow.com/questions/32234360/adding-to-integer-array-base-address-c/32234476#32234476", "title": "Adding to integer array base address C?", "body": "<p>When you increment <code>a+1</code> <code>a</code> is actually a pointer to <code>int</code> so its incremented <code>4</code> bytes, that is the size of int. But when you do <code>&amp;a</code>, it becomes address of an array of <code>5</code> ints, so if you increment that, you will skip size of array of 5 ints.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 4, "last_activity_date": 1440615934, "creation_date": 1440615934, "answer_id": 32234734, "question_id": 32234360, "link": "https://stackoverflow.com/questions/32234360/adding-to-integer-array-base-address-c/32234734#32234734", "title": "Adding to integer array base address C?", "body": "<p>Two concepts:</p>\n\n<ol>\n<li><p>Pointer arithmetic is based on the size of the pointed-to type.  In other words, if you have a pointer to type <code>T</code>, then adding 1 to that pointer will give you the address of the next <em>object</em> of type <code>T</code>.</p></li>\n<li><p>Except when it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, an <em>expression</em> of type \"N-element array of <code>T</code>\" will be converted (\"decay\") to an expression of type \"pointer to <code>T</code>\", and the value of the expression will be the address of the first element of the array.</p></li>\n</ol>\n\n<p>You declared <code>a</code> as a 5-element array of <code>int</code>.  Assuming 4-byte <code>int</code>, the array occupies 20 bytes.  </p>\n\n<p>The <em>expression</em> <code>a</code> \"decays\" to type <code>int *</code>, so adding 1 to it gives you the address of the next <code>int</code> object following <code>a</code> (IOW, it's the same as <code>&amp;a[1]</code>).  </p>\n\n<p>The expression <code>&amp;a</code> has type <code>int (*)[5]</code> (pointer to 5-element array of <code>int</code>), so adding 1 to it gives you the address of the next <em>5-element array of <code>int</code></em>.  </p>\n"}], "owner": {"reputation": 59, "user_id": 5269900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a2334c068b5d84a0ca8e7b0c0011a7?s=128&d=identicon&r=PG&f=1", "display_name": "Khanna", "link": "https://stackoverflow.com/users/5269900/khanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1131, "favorite_count": 0, "accepted_answer_id": 32234734, "answer_count": 3, "score": 3, "last_activity_date": 1440615934, "creation_date": 1440614700, "last_edit_date": 1440614802, "question_id": 32234360, "link": "https://stackoverflow.com/questions/32234360/adding-to-integer-array-base-address-c", "title": "Adding to integer array base address C?", "body": "<pre><code>int main()\n{\n    int a[] = {1,2,3,4,5};\n    printf(\"Base Address of array = %p\\n\",a);\n    printf(\"Address1 = %p \\t Address2 = %p\\n\",a+1,&amp;a+1);\n    return 0;\n}\n</code></pre>\n\n<p>In the print both the case \"a\" represents the base address of array,but the first one increment 4 bytes and the second by 20 bytes. Any specific reason ?</p>\n\n<p>Output:</p>\n\n<pre><code>Base Address of array 0x7fff2059b240                                                                                                                        \nAddress1 = 0x7fff2059b244         Address2 = 0x7fff2059b254 \n</code></pre>\n"}, {"tags": ["c", "encryption", "vigenere", "cs50"], "answers": [{"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 1, "last_activity_date": 1440615613, "last_edit_date": 1440615613, "creation_date": 1440615215, "answer_id": 32234528, "question_id": 32234188, "link": "https://stackoverflow.com/questions/32234188/vigenere-cipher-extra-characters/32234528#32234528", "title": "Vigenere Cipher Extra Characters", "body": "<p>You forgot to add a trailing null byte to the encrypted string. Therefore, everything following<sup>1</sup> the string in memory (here, some data on the stack) is printed out until a random null byte is encountered.</p>\n\n<p>So, allocate <code>strlen(s) + 1</code> for the additional null byte:</p>\n\n<pre><code>char a[strlen(s) + 1];\n</code></pre>\n\n<p>And set the last element of <code>a</code> to <code>'\\0'</code>:</p>\n\n<pre><code>a[strlen(s)] = '\\0';\n</code></pre>\n\n<hr>\n\n<p><sup>1</sup> means here: if <code>x</code> is at memory location <code>0x00</code>, the <strong>following</strong> memory location is <code>0x01</code>.</p>\n\n<hr>\n\n<p>Notes:</p>\n\n<ul>\n<li>I suggest introducing a variable like <code>size_t plainstr_len = strlen(s);</code> and using it anywhere in place of a plain <code>strlen(s)</code> for performance's sake</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 1530, "user_id": 2727710, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000318383381/picture?type=large", "display_name": "kamoroso94", "link": "https://stackoverflow.com/users/2727710/kamoroso94"}, "edited": false, "score": 0, "creation_date": 1470549668, "post_id": 32234653, "comment_id": 64990525, "body": "I don&#39;t think one professor in one class is enough reason to leave a university."}], "tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 2, "last_activity_date": 1440615629, "creation_date": 1440615629, "answer_id": 32234653, "question_id": 32234188, "link": "https://stackoverflow.com/questions/32234188/vigenere-cipher-extra-characters/32234653#32234653", "title": "Vigenere Cipher Extra Characters", "body": "<p>You forgot the <code>NUL</code> terminator. </p>\n\n<p>C has no builtin type that's a <em>\"string\"</em>, and your CS50 instructor is doing you a disservice by creating a typedef for \"string\" in \"cs50.h\". In C, a <em>\"string\"</em> is an array of characters with a <code>NUL</code> terminator at the end. The size of the array must be the string length plus one.</p>\n\n<p>So the first error in your code is</p>\n\n<pre><code>char a[strlen(s)];\n</code></pre>\n\n<p>which should be</p>\n\n<pre><code>size_t length = strlen(s);\nchar a[length+1];\n</code></pre>\n\n<p>A slight optimization of your code would be to replace </p>\n\n<pre><code>for (i = 0; i &lt; strlen(s); i++)\n</code></pre>\n\n<p>with </p>\n\n<pre><code>for (i = 0; i &lt; length; i++)\n</code></pre>\n\n<p>But the biggest problem in your code is the lack of a <code>NUL</code> terminator, which you can fix by putting the following line after the end of the loop</p>\n\n<pre><code>a[length] = '\\0';\n</code></pre>\n\n<p>If you're serious about learning C, I suggest transferring to a different university. Understanding strings in C is the key to writing stable, reliable, secure code. And because your professor is hiding the details from you, you are learning nothing.</p>\n"}], "owner": {"reputation": 117, "user_id": 4982987, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/36oWR.jpg?s=128&g=1", "display_name": "nerdcortex", "link": "https://stackoverflow.com/users/4982987/nerdcortex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1470549156, "creation_date": 1440614103, "last_edit_date": 1470549156, "question_id": 32234188, "link": "https://stackoverflow.com/questions/32234188/vigenere-cipher-extra-characters", "title": "Vigenere Cipher Extra Characters", "body": "<p>I was coding the Vigenere Cipher as part of CS50. This is my code.</p>\n\n<pre><code>#include&lt;cs50.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;ctype.h&gt;\n\nint main(int argc, string argv[])\n{\n    if(argc != 2)\n    {\n        printf(\"Bad Argument!\\n\");\n        return 1;\n    }\n\n    for(int k = 0; k &lt;= strlen(argv[1]) - 1; k++)\n    {\n        if (isalpha(argv[1][k]) == 0)\n        {\n            printf(\"Bad Argument!\\n\");\n            return 1;\n        }\n    }\n\n    string s = GetString();\n    char a[strlen(s)];\n\n    int i, j = 0;\n    int l = strlen(argv[1]);\n\n    for (i = 0; i &lt; strlen(s); i++)\n    {\n        int k = (int)(tolower(argv[1][j%l]) - 'a');\n\n        if (s[i] &gt;= 'A' &amp;&amp; s[i] &lt;= 'Z')\n        {\n            a[i] = (s[i] - 'A' + k) % 26 + 'A';\n            j++;\n        }\n        else if (s[i] &gt;= 'a' &amp;&amp; s[i] &lt;= 'z')\n        {\n            a[i] = s[i] - 'a' + k) % 26 + 'a';\n            j++;\n        }\n        else\n            a[i] = s[i];\n    }\n\n    printf(\"%s\\n\", a);\n\n}\n</code></pre>\n\n<p>This is my code for pset2 vigenere.c. However, once I compile it and run it, I get misc characters at the end of the ciphertext like:<a href=\"https://i.stack.imgur.com/1EnSm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1EnSm.png\" alt=\"TERMINAL SCREENSHOT\"></a></p>\n\n<p>So, Check50 in some cases accepts the answer and in others it doesn't.</p>\n\n<pre><code>:( encrypts \"a\" as \"a\" using \"a\" as keyword\n   \\ expected output, but not \"a\\u001c\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\\n\"\n:( encrypts \"world, say hello!\" as \"xoqmd, rby gflkp!\" using \"baz\" as keyword\n   \\ expected output, but not \"xoqmd, rby gflkp!v\ufffd\ufffd\\t\ufffd\ufffd\\n\"\n:) encrypts \"BaRFoo\" as \"CaQGon\" using \"BaZ\" as keyword\n:) encrypts \"BARFOO\" as \"CAQGON\" using \"BAZ\" as keyword\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1440614911, "post_id": 32234021, "comment_id": 52351201, "body": "Are you sure you&#39;re getting <code>x == 1</code> and not <code>x == 256</code>?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 1, "creation_date": 1440615859, "post_id": 32234021, "comment_id": 52351724, "body": "Welcome to SO. Your question has nothing to do with the fact that your shift operation is hidden inside a macro. Please adjust your question title. (The C Macro part also isn&#39;t needed, this is what the tags are for.)"}], "answers": [{"comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1440614051, "post_id": 32234136, "comment_id": 52350699, "body": "To get what seems to be the desired result, use <code>(unsigned char)(ID &lt;&lt; 8)</code>."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 1, "last_activity_date": 1440613955, "creation_date": 1440613955, "answer_id": 32234136, "question_id": 32234021, "link": "https://stackoverflow.com/questions/32234021/c-macro-variables-types-how-does-it-work/32234136#32234136", "title": "C Macro - variables types, how does it work?", "body": "<p>The bitshift operator is implicitly casting it's operands to <code>int</code>, regardless your explicit cast to <code>unsigned char</code>. So shifting left an <code>int</code> value of <code>1</code> by <code>8</code> will yield value of <code>2^8=256</code>. Which is actually the result that I am getting.</p>\n"}, {"tags": [], "owner": {"reputation": 2939, "user_id": 2367231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/CeSBA.png?s=128&g=1", "display_name": "Alex44", "link": "https://stackoverflow.com/users/2367231/alex44"}, "is_accepted": false, "score": 0, "last_activity_date": 1440630675, "creation_date": 1440630675, "answer_id": 32238155, "question_id": 32234021, "link": "https://stackoverflow.com/questions/32234021/c-macro-variables-types-how-does-it-work/32238155#32238155", "title": "C Macro - variables types, how does it work?", "body": "<p>Your shifting becomes always zero. A char consits of 8 bit. So you push the value of ID with <code>&lt;&lt;8</code> outside of this field. The bits right of ID, whish becomes free, will fill up with zeros.</p>\n"}], "owner": {"reputation": 9, "user_id": 5269866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec1cc6c06cf7e9837922715386b2dc5?s=128&d=identicon&r=PG&f=1", "display_name": "Itay Avraham", "link": "https://stackoverflow.com/users/5269866/itay-avraham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1440630675, "creation_date": 1440613472, "last_edit_date": 1440613909, "question_id": 32234021, "link": "https://stackoverflow.com/questions/32234021/c-macro-variables-types-how-does-it-work", "title": "C Macro - variables types, how does it work?", "body": "<pre><code>#define CHANGE_OP_MODE      0\n\n#define SetID(ID)   (((unsigned char)ID &lt;&lt; 8) | ((unsigned char)(CHANGE_OP_MODE)))\n\nshort x = 0;\nchar y = 1;\n\nx = SetID(y);\n</code></pre>\n\n<p>Moving 8 bits causes the ID to be 0, so why is X == 1?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5862, "user_id": 4811803, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Smz_dvBogaY/AAAAAAAAAAI/AAAAAAAAAKs/4FvwvMX7kyM/photo.jpg?sz=128", "display_name": "Snild Dolkow", "link": "https://stackoverflow.com/users/4811803/snild-dolkow"}, "edited": false, "score": 2, "creation_date": 1440613634, "post_id": 32233990, "comment_id": 52350434, "body": "Side note: you should initialize your &quot;words&quot; variable to NULL."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440617029, "post_id": 32233990, "comment_id": 52352414, "body": "There is no 2D <code>char</code> array! Please rephrase your title."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440617112, "post_id": 32233990, "comment_id": 52352463, "body": "Also, if <code>realloc</code> returns <code>NULL</code>, the original array is still allocated and you are leaking memory."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440627982, "post_id": 32233990, "comment_id": 52357680, "body": "Since this is a runtime problem, please post code that 1) cleanly compiles, 2) is small 3) shows the problem.    I.E. the #include statements and a main() function that calls the posted function need to be added."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440628654, "post_id": 32233990, "comment_id": 52357910, "body": "for robustness, the code should check that s != NULL and that *s != &#39;\\0&#39; before beginning the parsing.  Otherwise, the posted code will fail."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 3137005, "user_type": "registered", "profile_image": "https://graph.facebook.com/645551916/picture?type=large", "display_name": "erfdsg", "link": "https://stackoverflow.com/users/3137005/erfdsg"}, "edited": false, "score": 0, "creation_date": 1440614556, "post_id": 32234050, "comment_id": 52350993, "body": "Thank you! For some reason I thought I was using sizeof(char*). Works now! Cheers!"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1440614813, "post_id": 32234050, "comment_id": 52351145, "body": "Nah. The canonical way is <b>not to use <code>sizeof(type)</code></b> but <code>sizeof *ptr_to_realloc</code> as in <code>words = realloc(words, word_count * sizeof *words))</code>."}, {"owner": {"reputation": 1003, "user_id": 428740, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5af73accea1125facd6845aa12aeacff?s=128&d=identicon&r=PG", "display_name": "Fsmv", "link": "https://stackoverflow.com/users/428740/fsmv"}, "reply_to_user": {"reputation": 29, "user_id": 3137005, "user_type": "registered", "profile_image": "https://graph.facebook.com/645551916/picture?type=large", "display_name": "erfdsg", "link": "https://stackoverflow.com/users/3137005/erfdsg"}, "edited": false, "score": 0, "creation_date": 1440616288, "post_id": 32234050, "comment_id": 52351982, "body": "@LeelakrishnaN If this solved your problem you should press the check mark under the voting arrows to accept it as the correct answer"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440628199, "post_id": 32234050, "comment_id": 52357758, "body": "never use the returned value from realloc() with out first checking that the value is not NULL.  Otherwise the original pointer to some allocated memory would be overwritten with NULL, resulting in a memory leak"}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": true, "score": 3, "last_activity_date": 1440614314, "last_edit_date": 1495535199, "creation_date": 1440613586, "answer_id": 32234050, "question_id": 32233990, "link": "https://stackoverflow.com/questions/32233990/2d-character-array-contents-getting-overwritten/32234050#32234050", "title": "2D character array contents getting overwritten", "body": "<p>You need to change that line:</p>\n\n<pre><code>words = realloc(words, word_count * sizeof(char));\n</code></pre>\n\n<p>You allocate <code>char</code>s, that is, single characters. You want pointers. Therefore, use this:</p>\n\n<pre><code>words = realloc(words, word_count * sizeof(char*));\n</code></pre>\n\n<p>Also, as @<a href=\"https://stackoverflow.com/users/4811803/snild-dolkow\">Snild Dolkow</a> stated, initialize <code>words</code> to <code>NULL</code>. Otherwise <code>realloc</code> will attempt to use the undefined value of <code>words</code> as the memory to reallocate. Further information at <code>man realloc</code>.</p>\n\n<hr>\n\n<p>Notes:</p>\n\n<ul>\n<li>You should <code>free</code> the memory returned to you by <code>strdup</code> after usage</li>\n</ul>\n"}], "owner": {"reputation": 29, "user_id": 3137005, "user_type": "registered", "profile_image": "https://graph.facebook.com/645551916/picture?type=large", "display_name": "erfdsg", "link": "https://stackoverflow.com/users/3137005/erfdsg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 32234050, "answer_count": 1, "score": -1, "last_activity_date": 1440615591, "creation_date": 1440613387, "last_edit_date": 1440615591, "question_id": 32233990, "link": "https://stackoverflow.com/questions/32233990/2d-character-array-contents-getting-overwritten", "title": "2D character array contents getting overwritten", "body": "<p>I am trying to read a string and reverse the words in the string., but the content of the strings is getting overwritten and I am getting garbage values for the first few strings in the 2D array. E.g. when I print the words in reverse order at the end of the function, I am getting junk for the first few strings. What am I doing wrong?</p>\n\n<pre><code>void reverseWords(char *s) {\n    char** words;\n    int word_count = 0;\n\n    /*Create an array of all the words that appear in the string*/\n    const char *delim = \" \";\n    char *token;\n    token = strtok(s, delim);\n    while(token != NULL){\n        word_count++;\n        words = realloc(words, word_count * sizeof(char));\n        if(words == NULL){\n            printf(\"malloc failed\\n\");\n            exit(0);\n        }\n        words[word_count - 1] = strdup(token);\n        token = strtok(NULL, delim);\n    }\n\n    /*Traverse the list backwards and check the words*/\n    int count = word_count;\n    while(count &gt; 0){\n        printf(\"%d %s\\n\",count - 1, words[count - 1]);\n        count--;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 6, "creation_date": 1440612518, "post_id": 32233571, "comment_id": 52349785, "body": "Yep, one of your ternary operators is clearly missing the colon and second operand. You can clearly see it when you read that line. So just fix it. And probably already realized this kind of code should never be written."}, {"owner": {"reputation": 945, "user_id": 5269750, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/478621712312068/picture?type=large", "display_name": "Sai Ram Reddy", "link": "https://stackoverflow.com/users/5269750/sai-ram-reddy"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1440613904, "post_id": 32233571, "comment_id": 52350620, "body": "sir please correct it sir"}, {"owner": {"reputation": 945, "user_id": 5269750, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/478621712312068/picture?type=large", "display_name": "Sai Ram Reddy", "link": "https://stackoverflow.com/users/5269750/sai-ram-reddy"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1440614030, "post_id": 32233571, "comment_id": 52350686, "body": "sir all ternary operators are present sir"}, {"owner": {"reputation": 3975, "user_id": 1683939, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1da3dd4277594fb16a487ff70827e7d7?s=128&d=identicon&r=PG&f=1", "display_name": "bricklore", "link": "https://stackoverflow.com/users/1683939/bricklore"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 3, "creation_date": 1440615826, "post_id": 32233571, "comment_id": 52351707, "body": "@SamiKuhmonen I fixed it. See answer below. Think i got eye-cancer now"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1440617407, "post_id": 32233571, "comment_id": 52352631, "body": "Simple solution: <b>do not write such code</b>. Intermediate solution: Use a modern (i.e. one that was at least modern 10 years ago) editor which provides parenthesis highlighting."}], "answers": [{"comments": [{"owner": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "edited": false, "score": 0, "creation_date": 1440635539, "post_id": 32234687, "comment_id": 52359762, "body": "StackOverflow: Matching parentheses for those who can&#39;t do it themselves since 2008."}], "tags": [], "owner": {"reputation": 3975, "user_id": 1683939, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1da3dd4277594fb16a487ff70827e7d7?s=128&d=identicon&r=PG&f=1", "display_name": "bricklore", "link": "https://stackoverflow.com/users/1683939/bricklore"}, "is_accepted": true, "score": 2, "last_activity_date": 1440617425, "last_edit_date": 1440617425, "creation_date": 1440615790, "answer_id": 32234687, "question_id": 32233571, "link": "https://stackoverflow.com/questions/32233571/2nd-greatest-among-4-numbers-iam-getting-the-error-as-expected-before/32234687#32234687", "title": "2nd greatest among 4 numbers...iam getting the error as &quot;expected : before )&quot;", "body": "<p>I thought ternary operators were some kind of <strong>eye-candy</strong>.<br>\nThis really reminds me of some sort of eye-cancer (no offense).</p>\n\n<hr>\n\n<h2>Better solution (with any count of variables)</h2>\n\n<p>If I'm right you want to extract the second greatest number from <code>a</code>, <code>b</code>, <code>c</code> and <code>d</code> and save it in <code>k</code>.\nTry this:</p>\n\n<pre><code>int compare_int(const void* a, const void* b)\n{\n    int int_a = *((int*)a);\n    int int_b = *((int*)b);\n\n    if (int_a == int_b)\n        return 0;\n    else if ( int_a &lt; int_b )\n        return -1;\n    else\n        return 1;\n}\n\nint main()\n{\n    int value[4];\n\n    // set values in any order:\n    value[0] = 20; //second greatest\n    value[1] = -36;\n    value[2] = 294;\n    value[3] = 3;\n\n    qsort(value, 4, sizeof(int), compare_int);\n\n    // now the array is sorted by value.\n    // tho the second greatest number is in value[2].\n    printf(\"%d\\n\", value[2]);\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<h2>Reformatting your code</h2>\n\n<p>Nevertheless.. I reformatted your code a bit:</p>\n\n<pre><code>k = (((a &gt; b &amp;&amp; a &gt; c &amp;&amp; a &gt; d) ? (((b &gt; c &amp;&amp; b &gt; d) ? b : ((c &gt; b &amp;&amp; c &gt; d) ? c : d)))) : ((b &gt; a &amp;&amp; b &gt; c &amp;&amp; b &gt; d) ? (((a &gt; c &amp;&amp; a &gt; d) ? a : ((c &gt; a &amp;&amp; c &gt; d) ? c : d)))) : (((c &gt; a &amp;&amp; c &gt; b &amp;&amp; c &gt; d) ? (((a &gt; b &amp;&amp; a &gt; d) ? a : ((b &gt; a &amp;&amp; b &gt; d) ? b : d)))) : ((d &gt; a &amp;&amp; d &gt; b &amp;&amp; d &gt; c) ? (((a &gt; b &amp;&amp; a &gt; c) ? a : ((b &gt; c &amp;&amp; b &gt; a) ? b : c))))));\n</code></pre>\n\n<p>Is the same as:</p>\n\n<pre><code>k = (\n        // misplaced (\n            (a &gt; b &amp;&amp; a &gt; c &amp;&amp; a &gt; d) ?\n            (\n                (\n                    (b &gt; c &amp;&amp; b &gt; d) ? b :\n                    (\n                        (c &gt; b &amp;&amp; c &gt; d) ? c : d\n                    )\n                )\n            )\n        // misplaced )\n        :\n        // misplaced (\n            (b &gt; a &amp;&amp; b &gt; c &amp;&amp; b &gt; d) ?\n            (\n                (\n                    (a &gt; c &amp;&amp; a &gt; d) ? a :\n                    (\n                        (c &gt; a &amp;&amp; c &gt; d) ? c : d\n                    )\n                )\n            )\n        // misplaced )\n        :\n        (\n            // misplaced (\n                (c &gt; a &amp;&amp; c &gt; b &amp;&amp; c &gt; d) ?\n                (\n                    (\n                        (a &gt; b &amp;&amp; a &gt; d) ? a :\n                        (\n                            (b &gt; a &amp;&amp; b &gt; d) ? b : d\n                        )\n                    )\n                )\n            // misplaced )\n            :\n            (\n                (d &gt; a &amp;&amp; d &gt; b &amp;&amp; d &gt; c) ?\n                (\n                    (\n                        (a &gt; b &amp;&amp; a &gt; c) ? a :\n                        (\n                            (b &gt; c &amp;&amp; b &gt; a) ? b : c\n                        )\n                    )\n                )\n                // missing\n                // :\n                // (\n                //     expression\n                // )\n            )\n        )\n    );\n</code></pre>\n\n<blockquote>\n  <p>Easy huh?<br>\n  Now you can see that you are even misplaced some <code>(</code>'s and <code>)</code>'s and also several <code>:</code>'s</p>\n</blockquote>\n"}], "owner": {"reputation": 945, "user_id": 5269750, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/478621712312068/picture?type=large", "display_name": "Sai Ram Reddy", "link": "https://stackoverflow.com/users/5269750/sai-ram-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 32234687, "answer_count": 1, "score": -6, "last_activity_date": 1440617425, "creation_date": 1440612057, "last_edit_date": 1440612258, "question_id": 32233571, "link": "https://stackoverflow.com/questions/32233571/2nd-greatest-among-4-numbers-iam-getting-the-error-as-expected-before", "title": "2nd greatest among 4 numbers...iam getting the error as &quot;expected : before )&quot;", "body": "<pre><code>#include&lt;stdio.h&gt;\n #include&lt;conio.h&gt;\n</code></pre>\n\n<p>iam not getting the output it is showing expected : before )</p>\n\n<pre><code>int main() {\n\n      int a,b,c,d,k;\n      scanf(\"%d %d %d %d\",&amp;a,&amp;b,&amp;c,&amp;d);//input\n      k=(((a&gt;b &amp;&amp; a&gt;c &amp;&amp; a&gt;d) ? (((b&gt;c &amp;&amp; b&gt;d) ? b : ((c&gt;b &amp;&amp; c&gt;d) ? c:d)))) : ((b&gt;a &amp;&amp; b&gt;c &amp;&amp; b&gt;d) ? (((a&gt;c &amp;&amp; a&gt;d) ? a : ((c&gt;a &amp;&amp; c&gt;d) ? c:d)))) :  (((c&gt;a &amp;&amp; c&gt;b &amp;&amp; c&gt;d) ? (((a&gt;b &amp;&amp; a&gt;d) ? a : ((b&gt;a &amp;&amp; b&gt;d) ? b:d)))) : ((d&gt;a &amp;&amp; d&gt;b &amp;&amp; d&gt;c) ? (((a&gt;b &amp;&amp; a&gt;c) ? a : ((b&gt;c &amp;&amp; b&gt;a) ? b:c))))));\n      printf(\"%d\",k);\n      return 0;}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 3, "creation_date": 1440611953, "post_id": 32233492, "comment_id": 52349423, "body": "<code>myArr[]</code> should contain <code>10</code> elements.  And, you don&#39;t have to isolate the digits, just go through the <code>myArr[]</code> once to check which one is <code>max</code>"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1440611998, "post_id": 32233492, "comment_id": 52349465, "body": "... and the for-loop should iterate from 0 ... 9 not 0 ... 8, i.e. increment the ceiling of <code>i</code> by one."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 1, "creation_date": 1440612620, "post_id": 32233492, "comment_id": 52349840, "body": "What should it return with non-unique solutions?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1440612954, "post_id": 32233492, "comment_id": 52350018, "body": "I don&#39;t know what changed, I just rolled it back the latest readable version."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1440612316, "post_id": 32233648, "comment_id": 52349653, "body": "Why do you need a loop for this?"}, {"owner": {"reputation": 71, "user_id": 5269778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4758b163d356328ad3fe6cf91365732?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/5269778/john-smith"}, "edited": false, "score": 0, "creation_date": 1440612463, "post_id": 32233648, "comment_id": 52349747, "body": "The value of the number does not matter, we are just trying the number which occurs the most frequently. It doesn&#39;t have to be the largest number"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1440612483, "post_id": 32233648, "comment_id": 52349763, "body": "The code should be <code>max = array[i];</code> and as OP says, it does not answer the question."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 71, "user_id": 5269778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4758b163d356328ad3fe6cf91365732?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/5269778/john-smith"}, "edited": false, "score": 0, "creation_date": 1440612601, "post_id": 32233648, "comment_id": 52349826, "body": "@JohnSmith  Maybe this code is to find the max frequency that is stored in array ."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1440612780, "post_id": 32233648, "comment_id": 52349920, "body": "You are finding the largest number, not the most frequent."}, {"owner": {"reputation": 7503, "user_id": 1059273, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f49fd78553be0a74aef8736864937b5d?s=128&d=identicon&r=PG", "display_name": "cjds", "link": "https://stackoverflow.com/users/1059273/cjds"}, "edited": false, "score": 0, "creation_date": 1440613008, "post_id": 32233648, "comment_id": 52350045, "body": "This is an array of frequencies. At the end of the OPs question, he gets an array of frequencies. If you find the largest number from the array of frequencies you will get the most common number"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1440613852, "post_id": 32233648, "comment_id": 52350583, "body": "I think you are mistaken. When I run OP&#39;s program, it tells me how many times each digit occurs, including <code>There are 5 occurances of digit 3</code> so plainly, as <code>5</code> does nor occur in the array, he has counted the number of threes. Your answer only works because <code>3</code> happens to be the largest number as well as the most frequent."}], "tags": [], "owner": {"reputation": 7503, "user_id": 1059273, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f49fd78553be0a74aef8736864937b5d?s=128&d=identicon&r=PG", "display_name": "cjds", "link": "https://stackoverflow.com/users/1059273/cjds"}, "is_accepted": false, "score": 0, "last_activity_date": 1440613107, "last_edit_date": 1440613107, "creation_date": 1440612293, "answer_id": 32233648, "question_id": 32233492, "link": "https://stackoverflow.com/questions/32233492/return-which-digit-occurs-the-most-times/32233648#32233648", "title": "Return which digit occurs the most times", "body": "<p>Its simple.  At the end of your code you have an array of frequencies, if you find the max of that you get the most common element</p>\n\n<p>Just use a loop to find the max and print that:</p>\n\n<pre><code>int max = myArr[0];       // start with max = first element\nint max_position=0;\nfor(int i = 1; i&lt;9; i++)\n {\n      if(myArr[i] &gt; max){\n            max = myArr[i];\n            max_position=i;\n      }\n }\n  printf(\"\\The max is %d occuring %d times \", max_position, max_position)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1440612328, "post_id": 32233653, "comment_id": 52349662, "body": "Why do you need a loop for this?"}], "tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": false, "score": 1, "last_activity_date": 1440612645, "last_edit_date": 1440612645, "creation_date": 1440612312, "answer_id": 32233653, "question_id": 32233492, "link": "https://stackoverflow.com/questions/32233492/return-which-digit-occurs-the-most-times/32233653#32233653", "title": "Return which digit occurs the most times", "body": "<p>The array where you are storing the frequency of the digits, i.e <code>myArr[]</code>. Its suppose to hold the frequency of all the number from <code>0...9</code>. And since there are <code>10</code> numbers, you would need an array of lenght <code>10</code>.</p>\n\n<pre><code>int myArr[10];\n</code></pre>\n\n<p>Later, you need to traverse through the array once, checking for the max element, and saving the index accordingly, to find which number has occured most number of times.</p>\n\n<p>To traverse, the <code>for</code> loop should go till <code>9</code></p>\n\n<pre><code>for (i = 0; i &lt;= 9; i++)\n</code></pre>\n\n<p><strong>Edited</strong></p>\n\n<p>As someone commented, you can find the <code>max</code> value while you are computing the frequencies itself. </p>\n\n<pre><code>int max = -1, max_num = -1;\ndo\n{\n    myArr[tmp % 10]++;\n    if( myArr[tmp % 10] &gt; max)\n    {\n        max = myArr[tmp % 10];\n        max_num = tmp % 10;\n    }\n    tmp /= 10;\n} while (tmp != 0);\nprintf(\"%d\", max_num);\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 5269778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f4758b163d356328ad3fe6cf91365732?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/5269778/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1440617440, "creation_date": 1440611816, "last_edit_date": 1440617440, "question_id": 32233492, "link": "https://stackoverflow.com/questions/32233492/return-which-digit-occurs-the-most-times", "title": "Return which digit occurs the most times", "body": "<p>I have to return which digit in a number occurs the most frequently ( though not how many times it occurs )</p>\n\n<p>So far I can only get this, I don't know how to isolate the digit, only to show how many times each digit occurs.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint frequentDigit(int);\n\nint main() \n{\n    frequentDigit(123032333);\n    return 0;\n}\n\nint frequentDigit(int arg) \n{\n    int tmp;  int i;  int myArr[9] = { 0 };\n    tmp = (arg &lt; 0) ? -arg : arg;\n    do\n    {\n        myArr[tmp % 10]++;   \n        tmp /= 10;\n    } while (tmp != 0);\n    for (i = 0; i &lt; 9; i++) { printf(\"\\nThere are %d occurances of digit %d\", myArr[i], i); }\n}\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440610535, "post_id": 32233086, "comment_id": 52348631, "body": "Put spaces after <code>#include</code>s"}, {"owner": {"reputation": 63, "user_id": 5203824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2cd84b5e238665b0c1e385433f92ca41?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/5203824/james-smith"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440610834, "post_id": 32233086, "comment_id": 52348814, "body": "Thanks for that I didn&#39;t notice at first there was spaces there but not enough I guess"}, {"owner": {"reputation": 63, "user_id": 5203824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2cd84b5e238665b0c1e385433f92ca41?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/5203824/james-smith"}, "edited": false, "score": 0, "creation_date": 1440610906, "post_id": 32233086, "comment_id": 52348863, "body": "What you mean where i saw it last?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1440611140, "post_id": 32233086, "comment_id": 52348982, "body": "&quot;I can&#39;t find my thingummy&quot; - &quot;Where did you see it last?&quot;"}, {"owner": {"reputation": 63, "user_id": 5203824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2cd84b5e238665b0c1e385433f92ca41?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/5203824/james-smith"}, "edited": false, "score": 0, "creation_date": 1440611217, "post_id": 32233086, "comment_id": 52349023, "body": "If your just going to troll I suggest you delete your post and stop trolling. Its obvious what this thread is referring too"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440611458, "post_id": 32233086, "comment_id": 52349152, "body": "What do you expect this line to do <code>struct results *rData = results;</code>, specifically the right side ?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1440611657, "post_id": 32233086, "comment_id": 52349272, "body": "It would add <i>significant</i> help to your question if instead of simply labelling posted snippets as &quot;h file&quot; and &quot;c file&quot;, you actually provided <i>the files names</i> as well."}, {"owner": {"reputation": 63, "user_id": 5203824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2cd84b5e238665b0c1e385433f92ca41?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/5203824/james-smith"}, "edited": false, "score": 0, "creation_date": 1440611712, "post_id": 32233086, "comment_id": 52349304, "body": "EXCUSE ME I am pretty new to C and so I should not know everything about the language.  struct results *rData = results; what i expect this to do? Well first time I ever posted something like this I was advised to it that way and it worked. True but the includes kinds of gives that away tbf"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1440611874, "post_id": 32233086, "comment_id": 52349379, "body": "It&#39;s a very nice response to an exact pointer to your problem. If you don&#39;t have an idea what you are doing, probably the specific answers won&#39;t help you as well. Good luck with that."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1440611946, "post_id": 32233086, "comment_id": 52349417, "body": "It is supposed to do something with a variable of type <code>struct results</code> which is called <code>results</code>. It is nowhere to be seen in what you have posted, as informed by the compiler."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440611965, "post_id": 32233086, "comment_id": 52349436, "body": "@JamesSmith Eugene&#39;s question is entirely valid. That line of code didn&#39;t manufacture itself. You had intent in writing it. What was that intent? it may-well be helpful in explaining what the <i>correct</i> thing to write would be. <code>struct results *rData = results;</code> looks terribly odd. <code>rData</code> is an alias for the  <code>struct results</code> <i>type</i>, declared in a header, and the right-side of that initialization is something called <code>results</code> that has no apparent definition whatsoever. I think simply <code>struct results *rData;</code> will work for you, but I strongly advise a different variable name."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440612405, "post_id": 32233086, "comment_id": 52349711, "body": "I don&#39;t know to whom you&#39;re referencing, but I&#39;ve been more than cordial in my comments. Daniel has provided a nice answer that is sincerely worthy of review, and addresses what I mentioned. I suggest it be looked over, and if it helps, appropriately upticked or selected for outright-solution."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440612521, "post_id": 32233086, "comment_id": 52349787, "body": "@WhozCraig It was toward my direction, I guess. He doesn&#39;t even realize I&#39;ve gave him the answer."}, {"owner": {"reputation": 63, "user_id": 5203824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2cd84b5e238665b0c1e385433f92ca41?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/5203824/james-smith"}, "edited": false, "score": 0, "creation_date": 1440612661, "post_id": 32233086, "comment_id": 52349861, "body": "Question maybe valid but his level of tone isn&#39;t. I am not new to programming int itself in fact I started coding back in 1994. I am simply not used to C as of yet. And my side of the globe that level of tone is considered to be rude and is unjustified on this thread."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440618052, "post_id": 32233086, "comment_id": 52352991, "body": "@JamesSmith: You might be living on the third side of the globe (how many sides does a globe have?). I don&#39;t see anything offending in one of the comments. If you do not get the point, you should just ask, but not just complain without getting to the point. As a long-term programmer you should  very well be able to interpret the message yourself - unless you are only familar with a <b>very</b> esotheric language."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 5203824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2cd84b5e238665b0c1e385433f92ca41?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/5203824/james-smith"}, "edited": false, "score": 0, "creation_date": 1440612473, "post_id": 32233599, "comment_id": 52349753, "body": "Sure am so used to OOP. I did try as you suggested but it throws out the same error. That was 1 of the first methods I tried, did try again just now and still no luck."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 63, "user_id": 5203824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2cd84b5e238665b0c1e385433f92ca41?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/5203824/james-smith"}, "edited": false, "score": 0, "creation_date": 1440612699, "post_id": 32233599, "comment_id": 52349886, "body": "I can hardly believe that you get &quot;the same error&quot;, what&#39;s the exact error?"}, {"owner": {"reputation": 63, "user_id": 5203824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2cd84b5e238665b0c1e385433f92ca41?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/5203824/james-smith"}, "edited": false, "score": 0, "creation_date": 1440612899, "post_id": 32233599, "comment_id": 52349984, "body": "sonicNav.c: In function \u2018calcSonicS\u2019: sonicNav.c:5:46: error: \u2018results\u2019 undeclared (first use in this function) sonicNav.c:5:46: note: each undeclared identifier is reported only once for each function it appears in . PS I changed to struct results *resultPtr  = malloc(sizeof(results)); as its not correct as its same as the alias but again it has nothing to do with the error being thrown."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 63, "user_id": 5203824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2cd84b5e238665b0c1e385433f92ca41?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/5203824/james-smith"}, "edited": false, "score": 1, "creation_date": 1440612951, "post_id": 32233599, "comment_id": 52350014, "body": "What exact text is at <code>5:46</code> ?"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 63, "user_id": 5203824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2cd84b5e238665b0c1e385433f92ca41?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/5203824/james-smith"}, "edited": false, "score": 1, "creation_date": 1440613024, "post_id": 32233599, "comment_id": 52350056, "body": "AH, ok, <code>sizeof(results)</code> tries to get the size of (the type of) the (local, global) variable named <code>results</code>. You need to write <code>struct results</code> here."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1440613074, "post_id": 32233599, "comment_id": 52350084, "body": "... or <code>sizeof *resultPtr</code>."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440613134, "post_id": 32233599, "comment_id": 52350120, "body": "@WhozCraig Indeed, that would even be more DRY and thus better."}, {"owner": {"reputation": 63, "user_id": 5203824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2cd84b5e238665b0c1e385433f92ca41?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/5203824/james-smith"}, "edited": false, "score": 0, "creation_date": 1440613149, "post_id": 32233599, "comment_id": 52350131, "body": "Yes that fixed the issue but i think am going to have to spend some time reviewing the code as the data is written from sonicThread to struct but is being read as 0 on SonicNav side."}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 2, "last_activity_date": 1440612902, "last_edit_date": 1440612902, "creation_date": 1440612149, "answer_id": 32233599, "question_id": 32233086, "link": "https://stackoverflow.com/questions/32233086/cant-seem-to-locate-the-struct/32233599#32233599", "title": "can&#39;t seem to locate the struct", "body": "<pre><code>struct results *rData = results;\n</code></pre>\n\n<blockquote>\n  <p>error: \u2018results\u2019 undeclared (first use in this function)</p>\n</blockquote>\n\n<p>The above line tries to declare and define a local variable named <code>rData</code>, which has type <code>struct results *</code>, and initialise it with the value of the variable (local or global) <code>results</code>. The error message is telling you that there is no such variable.</p>\n\n<p>What you're probably mixing up is C++ (old, bad) style initialisation:</p>\n\n<pre><code>MyClass variable = MyClass();\n</code></pre>\n\n<p>Since the next thing you do with <code>rData</code> is assigning it ...</p>\n\n<pre><code>rData = malloc(sizeof(struct results));\n</code></pre>\n\n<p>... the solution to your issue is to just remove that \"wrong initialisation\" from the preceeding line altogether. You could also pack it into a single line:</p>\n\n<pre><code>struct results *rData = malloc(sizeof(struct results));\n</code></pre>\n\n<hr>\n\n<p>Looking at ...</p>\n\n<pre><code>typedef struct results{\n  // ...\n} rData;\n</code></pre>\n\n<p>... I'd guess that you have a serious misunderstanding of the relationship of structure (type) names, type names and variable names. The above definition gives you:</p>\n\n<ul>\n<li>The name <code>results</code> as structure (type) name, so it can be used after <code>struct</code> to name the defined structure type.</li>\n<li>The name <code>rData</code> as type name, referring to the same (structure) type as <code>struct results</code>.</li>\n</ul>\n\n<p>When you then declare a variable <code>struct results *rData</code> you have <em>additionally</em> <code>rData</code> as name for a variable. This is possible, but far from good style.</p>\n\n<p>If you remove the <code>typedef</code>, then things would change drastically: You'd then have a global variable named <code>rData</code> of type <code>struct results</code>.</p>\n"}], "owner": {"reputation": 63, "user_id": 5203824, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2cd84b5e238665b0c1e385433f92ca41?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/5203824/james-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440613990, "creation_date": 1440610446, "last_edit_date": 1440613990, "question_id": 32233086, "link": "https://stackoverflow.com/questions/32233086/cant-seem-to-locate-the-struct", "title": "can&#39;t seem to locate the struct", "body": "<p>I am trying to fetch values from a struct once its been updated however the problem am facing is an undeclared error as it cannot seem to see it.</p>\n\n<p>sonicNav.h file</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include\"sonicThread.h\"\n\nextern void calcSonicS();\n</code></pre>\n\n<p>sonicThread.c file.</p>\n\n<pre><code>    int funcLock = 0;\n\n    void calcSonicS() {\n       struct results *rData = results;\n       rData = malloc(sizeof(struct results));\n\n       int newVal1 = rData-&gt;sens1;\n       int newVal2 = rData-&gt;sens2;\n       int newVal3 = rData-&gt;sens3;\n       int newVal4 = rData-&gt;sens4;\n\n       if(funcLock == 0){\n       funcLock = threadFunc();//returns INT value of 1.\n\n     }\n      printf(\"value 1: %d value 2: %d value 3: %d value 4 %d\\n\", newVal1, newVal2, newVal3, newVal4);\n}\n</code></pre>\n\n<p>sonicThread.h file</p>\n\n<pre><code>#pragma once\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;signal.h&gt;\n#include&lt;string.h&gt;\n#include&lt;errno.h&gt;\n#include&lt;pthread.h&gt;\n#include&lt;sys/time.h&gt;\n#include&lt;wiringPi.h&gt;\n\n\n//GPIO PINS stored within structs, for each sonic range finder.\ntypedef struct sonicPins{\n//pins and id.\nint trig;\nint echo;\nint id;\n}args;\n\ntypedef struct results{\n//all pins\nint sens1;\nint sens2;\nint sens3;\nint sens4;\n\n}rData;\n</code></pre>\n\n<p>sonicThread.c file </p>\n\n<pre><code>void* setup(void  *pinsPtr);\nextern int threadFunc();\n\npthread_t pt[4];\n\nint threadFunc()\n{\n  struct  sonicPins pinsArray[4] = { { 21, 20, 1 }, { 16, 12, 2 }, { 26, 19, 3 }, { 13, 6, 4 } };\n  for(int i =0; i &lt;4; i++){\n  pthread_create(&amp;pt[i], NULL, setup, &amp;pinsArray[i] );\n   }\nreturn 1;\n}\n\nvoid* setup(void *pinsPtr)\n{\n   struct sonicPins *ptr = pinsPtr;\n   int trig = 0, Echo = 0, id;\n   trig = ptr-&gt;trig;\n   Echo = ptr-&gt;echo;\n   id = ptr-&gt;id;\n   struct  results *storePtr;\n}\n</code></pre>\n\n<p>The snippet above does update the struct \"results\", all threads does work concurrently each sensor giving out is own result. </p>\n\n<p>Main.c</p>\n\n<pre><code>int main(){\n//void(*foo1)(int, int, int);\n//foo1 = &amp;calcSonicS;\n\nprintf(\"In operation\\n\");\nint operational = 1;\n\nwhile(operational ==1)\n{\n//sonic range finders.\n  calcSonicS();\n//gyroscope and acceometer.\n}\nreturn 0;\n}\n</code></pre>\n\n<p>Error output:</p>\n\n<pre><code>sonicNav.c: In function \u2018calcSonicS\u2019:\nsonicNav.c:5:28: error: \u2018results\u2019 undeclared (first use in this function)\nsonicNav.c:5:28: note: each undeclared identifier is reported only once for each function it appears in\n</code></pre>\n"}, {"tags": ["c", "linux", "unix", "exec"], "answers": [{"comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 1, "creation_date": 1440610940, "post_id": 32232822, "comment_id": 52348882, "body": "It is usually encouraged to use <code>STDOUT_FILENO</code> and <code>STDERR_FILENO</code> instead of <code>1</code> and <code>2</code>."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 1, "creation_date": 1440611442, "post_id": 32232822, "comment_id": 52349145, "body": "@FilipeGon&#231;alves: Curiously, Posix itself in the examples for <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/dup.html\" rel=\"nofollow noreferrer\">dup</a> uses 1 and 2. Since the values 1 and 2 are specified by Posix, it makes no difference to portability but I agree that the longer names are more self-documenting. I just never remember how they&#39;re spelled."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 1, "last_activity_date": 1440616231, "last_edit_date": 1440616231, "creation_date": 1440609513, "answer_id": 32232822, "question_id": 32232663, "link": "https://stackoverflow.com/questions/32232663/execute-command-with-output-redirection-using-exec-command-in-c/32232822#32232822", "title": "Execute command with output redirection using exec command in C", "body": "<p>Redirections are not arguments to a command.</p>\n\n<p>In a shell command containing redirects, the shell will set up the redirects before executing the command. If you want to mimic this behaviour, you need to do the same thing. In your child, before calling <code>exec</code> on the command, reopen stdout and stderr to <code>/dev/null</code> (or whatever you want to redirect them to).</p>\n\n<p>If you need to extract the redirects from the provided string, you'll need to parse the string the same way the shell would (although you might chose to use a simpler syntax); interpret the redirects, and only pass the actual arguments to the command.</p>\n\n<p>A simple way to reopen stdout is to use <a href=\"http://man7.org/linux/man-pages/man2/dup.2.html\" rel=\"nofollow\"><code>dup2</code></a>. The following outline needs error checking added:</p>\n\n<pre><code>int fd = open(\"/dev/null\", O_WRONLY);\ndup2(fd, 1);  /* Use 2 for stderr. Or use STDOUT_FILENO and STDERR_FILENO */\nclose(fd);\n</code></pre>\n"}], "owner": {"reputation": 1075, "user_id": 2153411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/405341c1bcf7f947d740c8b080a558d8?s=128&d=identicon&r=PG", "display_name": "Krishna M", "link": "https://stackoverflow.com/users/2153411/krishna-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1201, "favorite_count": 0, "accepted_answer_id": 32232822, "answer_count": 1, "score": 0, "last_activity_date": 1440616231, "creation_date": 1440609030, "question_id": 32232663, "link": "https://stackoverflow.com/questions/32232663/execute-command-with-output-redirection-using-exec-command-in-c", "title": "Execute command with output redirection using exec command in C", "body": "<p>I need execute a command which redirects output to /dev/null. How to execute commands like this using exec in C ?</p>\n\n<p>My command is <code>ls logs/ &gt;/dev/null 2&gt;/dev/null</code>. To execute this command, I am first splitting the command with space as delimiter and then executing using exec. When executing <code>&gt;/dev/null 2&gt;dev/null</code> are passed as arguments to the script. How we can avoid this ?</p>\n\n<p>I don't want to use system command to overcome this problem.</p>\n\n<p>CODE :</p>\n\n<pre><code>static int\ncommand_execute(char* command) {\n        char **arguments = g_strsplit(command, \" \", 32);\n        pid_t child_pid;\n\n        if( !arguments ) {\n            status = COMMAND_PARSE_ERROR;\n            goto EXIT;\n        }\n\n        if( (child_pid = fork() ) == -1 ) {\n            status = CHILD_FORK_ERROR;\n            goto EXIT;\n        }\n\n        if( child_pid == 0 ) {\n            execvp(arguments[0], arguments);\n        } else {\n            waitpid(child_pid, &amp;status, 0);\n            if(status) {\n                goto EXIT;\n            }\n        }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1440609241, "post_id": 32232661, "comment_id": 52347820, "body": "Max is 20 char? No it ain&#39;t! Max is 1 char. You need an array."}, {"owner": {"reputation": 2202, "user_id": 700070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d3a6495fcb54188bb2f59002e517af65?s=128&d=identicon&r=PG&f=1", "display_name": "Jshee", "link": "https://stackoverflow.com/users/700070/jshee"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1440609288, "post_id": 32232661, "comment_id": 52347847, "body": "Can you please reply with some code, i&#39;d appreciate it."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1440609331, "post_id": 32232661, "comment_id": 52347875, "body": "Why do you pass string as argument when its parameter type of function is char ?"}, {"owner": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "edited": false, "score": 0, "creation_date": 1440609547, "post_id": 32232661, "comment_id": 52348023, "body": "Where is isdigit(password_entered) ?"}, {"owner": {"reputation": 2202, "user_id": 700070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d3a6495fcb54188bb2f59002e517af65?s=128&d=identicon&r=PG&f=1", "display_name": "Jshee", "link": "https://stackoverflow.com/users/700070/jshee"}, "edited": false, "score": 0, "creation_date": 1440609651, "post_id": 32232661, "comment_id": 52348089, "body": "password_entered is entered in do{}"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1440613157, "post_id": 32232661, "comment_id": 52350136, "body": "Did you <code>#include &lt;stdio.h&gt;</code>? If you did, edit your question to show that in your code.... Also for <code>&lt;ctype.h&gt;</code>"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1440613379, "post_id": 32232661, "comment_id": 52350260, "body": "Don&#39;t put function declarations inside your <code>main</code> - or inside any other function."}], "answers": [{"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 1, "last_activity_date": 1440650079, "last_edit_date": 1440650079, "creation_date": 1440609666, "answer_id": 32232876, "question_id": 32232661, "link": "https://stackoverflow.com/questions/32232661/character-mismatching-in-c-program/32232876#32232876", "title": "Character mismatching in C Program", "body": "<p>Function prototype is of type <code>bool</code>-<code>bool CD(char password_entered);</code></p>\n\n<p>and you define it with type <code>char</code>- <code>char CD(char password_entered)</code></p>\n\n<p>That's why you get error. Keep one type for the function <code>CD</code>(According to me you should use <code>char CD()</code>).</p>\n\n<p>Other problems-</p>\n\n<pre><code>char password_entered; //max is 20 char\n</code></pre>\n\n<p>Declaread as <code>char</code>. In this<code>scanf(\"%s\", password_entered);</code> the specifier <code>%s</code> expects a <code>char *</code> and you pass a <code>char</code>.</p>\n\n<pre><code>  for(i=0; i&lt;=strlen(password_entered); i++){\n</code></pre>\n\n<p>Function <code>strlen</code> is used to calculate the length of string. You can't use it for a character.</p>\n\n<p>You need to declare <code>password_entered</code> as an array with appropriate size. Something like this -</p>\n\n<pre><code>char password_entered[20];\nscanf(\"%19s\", password_entered);  //so that 1 place remains for null character else code will give UB\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2202, "user_id": 700070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d3a6495fcb54188bb2f59002e517af65?s=128&d=identicon&r=PG&f=1", "display_name": "Jshee", "link": "https://stackoverflow.com/users/700070/jshee"}, "edited": false, "score": 0, "creation_date": 1440611031, "post_id": 32232897, "comment_id": 52348928, "body": "I incoporated a lot of your code, but this line: &quot;char CD(char[] password_entered) {&quot;   is throwing an error of &quot;expected &#39;;&#39;, &#39;,&#39; , or &#39;)&#39; . Any idea?"}, {"owner": {"reputation": 2202, "user_id": 700070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d3a6495fcb54188bb2f59002e517af65?s=128&d=identicon&r=PG&f=1", "display_name": "Jshee", "link": "https://stackoverflow.com/users/700070/jshee"}, "edited": false, "score": 0, "creation_date": 1440611262, "post_id": 32232897, "comment_id": 52349049, "body": "Also, line: bool checkForDigits(char password_entered);  is throwing &quot;expected char but argument is a type &#39;char *&#39;"}, {"owner": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "reply_to_user": {"reputation": 2202, "user_id": 700070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d3a6495fcb54188bb2f59002e517af65?s=128&d=identicon&r=PG&f=1", "display_name": "Jshee", "link": "https://stackoverflow.com/users/700070/jshee"}, "edited": false, "score": 0, "creation_date": 1440612714, "post_id": 32232897, "comment_id": 52349888, "body": "ok.. but I can&#39;t understand : for some reason this code will not properly look like code, why is it so? Is it your full code?"}, {"owner": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "reply_to_user": {"reputation": 2202, "user_id": 700070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d3a6495fcb54188bb2f59002e517af65?s=128&d=identicon&r=PG&f=1", "display_name": "Jshee", "link": "https://stackoverflow.com/users/700070/jshee"}, "edited": false, "score": 0, "creation_date": 1440613057, "post_id": 32232897, "comment_id": 52350074, "body": "See my edit. If you want full code, do post your fulll code. Looks like you are not revealing all of your code. :D"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1440650024, "post_id": 32232897, "comment_id": 52362989, "body": "@learner  You can&#39;t pass a complete array inside <code>isdigit</code> function. As you take input in <code>password_entered</code> what if someone entered password of length <code>20 characters</code> it will show undefined behaviour."}, {"owner": {"reputation": 2202, "user_id": 700070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d3a6495fcb54188bb2f59002e517af65?s=128&d=identicon&r=PG&f=1", "display_name": "Jshee", "link": "https://stackoverflow.com/users/700070/jshee"}, "edited": false, "score": 1, "creation_date": 1440682591, "post_id": 32232897, "comment_id": 52382298, "body": "Thank you so much for your help!"}], "tags": [], "owner": {"reputation": 3520, "user_id": 3397298, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c0d26ce529b301685e41401ef230b9ca?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/3397298/learner"}, "is_accepted": true, "score": 1, "last_activity_date": 1440613006, "last_edit_date": 1440613006, "creation_date": 1440609744, "answer_id": 32232897, "question_id": 32232661, "link": "https://stackoverflow.com/questions/32232661/character-mismatching-in-c-program/32232897#32232897", "title": "Character mismatching in C Program", "body": "<p>First of all, declare password_entered as char array:</p>\n\n<pre><code>char password_entered[20];\n</code></pre>\n\n<p>You are passing a string to the CD: </p>\n\n<blockquote>\n  <p>while( CD(password_entered) != 1 );</p>\n</blockquote>\n\n<p>and grabbing values in char:</p>\n\n<blockquote>\n  <p>char CD(char password_entered)</p>\n</blockquote>\n\n<p><code>password_entered</code> is a char array, not a char.\nIt should be <code>char CD(char[] password_entered)</code></p>\n\n<p>And your last function:</p>\n\n<pre><code>if(isdigit(password_entered))\n{\n\n//contains a digit\n\n return '1';\n\n }\n\n else{\n\n  return '1';\n\n  }\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>if(isdigit(password_entered[i])){\n            //contains a digit\n            return '1';\n        }\n        else{\n            return '1';\n        }\n</code></pre>\n\n<p>This is how your code should look like:</p>\n\n<pre><code>int main()\n{    \n    //int password_min=6;\n\n    char password_entered[20]; //max is 20 char\n\n    //functions\n    bool CD(char password_entered);\n    // It should be declared above\n\n\n    // do{\n    //     printf(\"Please enter a password\");\n    //     scanf(\"%s\", password_entered); // you are reading in an array, which is not correct\n    // }\n    // while( CD(password_entered) != 1 );\n\n    printf(\"Please enter a password\");\n    scanf(\"%s\", password_entered);\n\n    if ( CD(password_entered))\n    {\n        // a password\n    }\n\n\n    return 0;\n}\n\n// Check for digits in password_entered var\nchar CD(char[] password_entered) {\n    int flag = 0;\n    for(i=0; i&lt;=strlen(password_entered); i++){\n        if(isdigit(password_entered)){\n            //contains a digit\n            return '1';\n        }\n        else{\n            flag = 1;\n            break;\n        }\n    }\n    if ( flag )\n        return -1;\n    else\n        return 1;\n}\n</code></pre>\n\n<p>Edit final : This is the way your program should be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint main()\n{\n\n    char password_entered[20]; //max is 20 char\n\n    //functions\n    char CD(char password_entered[]);\n\n\n    //do{}\n    printf(\"Please enter a password\");\n    scanf(\"%s\", password_entered);\n    //}\n    //while( CD(password_entered) != 1 );\n\n    if (CD(password_entered)){\n        printf(\"You entered a password with a digit!\");\n    }\n\n    return 0;\n}\n\n// Check for digits in password_entered var\nchar CD(char password_entered[]) {\n    int i;\n    for(i=0; i&lt;=strlen(password_entered); i++){\n        if(isdigit(password_entered)){\n            //contains a digit\n            return '1';\n        }\n        else{\n            return 0;\n        }\n    }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9932, "user_id": 1839777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a382084bb1495af216e9a847c727d92e?s=128&d=identicon&r=PG", "display_name": "vonbrand", "link": "https://stackoverflow.com/users/1839777/vonbrand"}, "edited": false, "score": 1, "creation_date": 1440633485, "post_id": 32233082, "comment_id": 52359279, "body": "To answer the question, it isn&#39;t required to got through the whole reading procedure,"}], "tags": [], "owner": {"reputation": 416, "user_id": 3810909, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/vBdLp.jpg?s=128&g=1", "display_name": "Tiger", "link": "https://stackoverflow.com/users/3810909/tiger"}, "is_accepted": false, "score": -1, "last_activity_date": 1440610439, "creation_date": 1440610439, "answer_id": 32233082, "question_id": 32232661, "link": "https://stackoverflow.com/questions/32232661/character-mismatching-in-c-program/32233082#32233082", "title": "Character mismatching in C Program", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define PASS_SIZE 20\n\nchar pass[PASS_SIZE + 1];   /* 1 for \\0 */  \nbool is_ok(char*);\n\nint main(int argc, char *argv[]){\n\n  int t = 0;\n  do{\n\n      printf(\"Enter password : \");\n      gets(pass);                   /* try to use fgets */      \n                                    /* for bound checking */\n  }while(!is_ok(pass));\n\n  exit(EXIT_SUCCESS);   /* done */\n\n} // int main\n\nbool is_ok(char *pass){\n\n   for(register int i = 0; i &lt; strlen(pass); i++)\n       if(!isdigit(pass[i]))\n            return false;\n\n   return true;\n\n} // check that all are digits\n</code></pre>\n"}], "owner": {"reputation": 2202, "user_id": 700070, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d3a6495fcb54188bb2f59002e517af65?s=128&d=identicon&r=PG&f=1", "display_name": "Jshee", "link": "https://stackoverflow.com/users/700070/jshee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 32232897, "answer_count": 3, "score": -2, "last_activity_date": 1440690412, "creation_date": 1440609025, "last_edit_date": 1440690412, "question_id": 32232661, "link": "https://stackoverflow.com/questions/32232661/character-mismatching-in-c-program", "title": "Character mismatching in C Program", "body": "<p>I'm trying to check whether the value entered for password_entered contains a digit anywhere in it.</p>\n\n<p>However, I'm running into a few errors:</p>\n\n<ol>\n<li><p>The compiler is complaining im passing a <code>int</code> here, when I'm really trying to pass a <code>char</code>:</p>\n\n<p>scanf(\"%s\", password_entered);</p></li>\n<li><p>And this line is complaining that I'm using conflicting types:</p>\n\n<p>char CD(char password_entered)</p></li>\n</ol>\n\n<p>(for some reason this code will not properly look like code - any help, greatly appreciated).</p>\n\n<pre><code>int main()\n{\n\n    char password_entered[20]; //max is 20 char\n\n    char CD(char password_entered[]);\n\n    printf(\"Please enter a password\");\n    scanf(\"%s\", password_entered);\n\n    if (CD(password_entered)){\n        printf(\"You entered a password with a digit!\");\n    }\n\n    return 0;\n}\n\nchar CD(char password_entered) {\n    for(i=0; i&lt;=strlen(password_entered); i++){\n        if(isdigit(password_entered)){\n            //contains a digit\n            return '1';\n        }\n        else{\n            return 0;\n        }\n    }\n\n}\n</code></pre>\n\n<p><strong>UPDATED CODE:</strong>\nI'm still getting an error on: char <code>CD(char password_entered) {</code> of \"error: expected ';', ',' , or ')' .</p>\n\n<p>What am i doing wrong here?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1440609092, "post_id": 32232635, "comment_id": 52347752, "body": "Have you checked the result of <code>fopen</code>? Of course you haven&#39;t..."}, {"owner": {"reputation": 33, "user_id": 5231137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0226c5a78a13a21b9b9d4bc4abcd265?s=128&d=identicon&r=PG&f=1", "display_name": "binding binding", "link": "https://stackoverflow.com/users/5231137/binding-binding"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440609380, "post_id": 32232635, "comment_id": 52347906, "body": "I don&#39;t have the file,it didn&#39;t been created."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1440609399, "post_id": 32232635, "comment_id": 52347923, "body": "&quot;result&quot; = return value."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440609514, "post_id": 32232635, "comment_id": 52347993, "body": "For that matter, throw out everything but the <code>fopen</code> (which you should check), the <code>fprintf</code>, and the <code>fclose</code>. You gotta isolate your problem before you can fix it."}, {"owner": {"reputation": 33, "user_id": 5231137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0226c5a78a13a21b9b9d4bc4abcd265?s=128&d=identicon&r=PG&f=1", "display_name": "binding binding", "link": "https://stackoverflow.com/users/5231137/binding-binding"}, "edited": false, "score": 0, "creation_date": 1440609518, "post_id": 32232635, "comment_id": 52347997, "body": "I don&#39;t understand what you say,please explain more."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440609575, "post_id": 32232635, "comment_id": 52348040, "body": "@bindingbinding Functions have return values (unless they are <code>void</code>). Their meaning can be found in their documentation."}, {"owner": {"reputation": 33, "user_id": 5231137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0226c5a78a13a21b9b9d4bc4abcd265?s=128&d=identicon&r=PG&f=1", "display_name": "binding binding", "link": "https://stackoverflow.com/users/5231137/binding-binding"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440609646, "post_id": 32232635, "comment_id": 52348083, "body": "@WhozCraig: I comment the lines containing fprintf and fclose but I got the same problem &quot;Segmentation fault&quot;"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440609843, "post_id": 32232635, "comment_id": 52348196, "body": "Which makes a perfect sense. Well, <i>clairvoyance mode on</i>. You don&#39;t have a subdirectory called <code>module_extension</code> in the directory you are running it from."}, {"owner": {"reputation": 33, "user_id": 5231137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0226c5a78a13a21b9b9d4bc4abcd265?s=128&d=identicon&r=PG&f=1", "display_name": "binding binding", "link": "https://stackoverflow.com/users/5231137/binding-binding"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440609979, "post_id": 32232635, "comment_id": 52348280, "body": "@EugeneSh:I don&#39;t have any directory only test.c test.o"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1440610022, "post_id": 32232635, "comment_id": 52348306, "body": "So how do you expect <code>fopen</code> to create a file in a non-existent directory?"}, {"owner": {"reputation": 33, "user_id": 5231137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0226c5a78a13a21b9b9d4bc4abcd265?s=128&d=identicon&r=PG&f=1", "display_name": "binding binding", "link": "https://stackoverflow.com/users/5231137/binding-binding"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440610539, "post_id": 32232635, "comment_id": 52348633, "body": "I fix the problem,you are right @EugeneSh I don&#39;t have a directory,I modify the str and this works.thank you."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440610580, "post_id": 32232635, "comment_id": 52348660, "body": "@bindingbinding The comments about the return value checking are still valid."}], "answers": [{"tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": true, "score": 0, "last_activity_date": 1440610146, "last_edit_date": 1440610146, "creation_date": 1440609960, "answer_id": 32232952, "question_id": 32232635, "link": "https://stackoverflow.com/questions/32232635/segmentation-fault-with-file-on-c/32232952#32232952", "title": "Segmentation fault (with file on C)", "body": "<p>What people are trying to point at in the comments is. When a system call is made, the return value should be checked, to make sure if it was executed successfully or not. In your case, the <code>open</code> system call can fail for a number of reasons. In that case you would have an invalid file descriptor in the variable <code>fichier</code>. Using which can result into a <code>seg fault</code>, which you are getting.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n\nint main(int argc, const char * argv[])\n{\n\n   char example[100];\n   char user[100]=\"user\";\n   char str[]=\"module_extension/\";\n   FILE* fichier=NULL;\n\n\n   strcpy(example,str);\n   strcat(example,user);\n   strcat(example,\".txt\");\n   fichier=fopen(example,\"a+\");\n   if( fichier != NULL)\n   {\n       fprintf(fichier,\"**************New Line************ \\n\");\n       fclose(fichier);\n   }\n   else\n       printf(\"File open failed\");\n\n   return 0;\n}\n</code></pre>\n\n<p>In this way, you can make your program fail proof, even when the system call fails.</p>\n"}], "owner": {"reputation": 33, "user_id": 5231137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0226c5a78a13a21b9b9d4bc4abcd265?s=128&d=identicon&r=PG&f=1", "display_name": "binding binding", "link": "https://stackoverflow.com/users/5231137/binding-binding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 32232952, "answer_count": 1, "score": -4, "last_activity_date": 1440610146, "creation_date": 1440608985, "question_id": 32232635, "link": "https://stackoverflow.com/questions/32232635/segmentation-fault-with-file-on-c", "title": "Segmentation fault (with file on C)", "body": "<p>I want to create a file that has a name such the example: module_extension/user.txt :</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n\nint main(int argc, const char * argv[])\n{\n\n   char example[100];\n   char user[100]=\"user\";\n   char str[]=\"module_extension/\";\n   FILE* fichier=NULL;\n\n\n   strcpy(example,str);\n   strcat(example,user);\n   strcat(example,\".txt\");\n   fichier=fopen(example,\"a+\");\n   fprintf(fichier,\"**************New Line************ \\n\");\n   fclose(fichier);\n\n   return 0;\n}\n</code></pre>\n\n<p>But when I run it I got this error message:</p>\n\n<pre><code>Segmentation fault (core dumped)\n</code></pre>\n"}, {"tags": ["c", "visual-studio"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1440608560, "post_id": 32232429, "comment_id": 52347453, "body": "It&#39;s called a &quot;unit test&quot;. Write test program running only this function. That&#39;s it."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 5169631, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/AcaTL.jpg?s=128&g=1", "display_name": "Mr. Hello_world", "link": "https://stackoverflow.com/users/5169631/mr-hello-world"}, "edited": false, "score": 0, "creation_date": 1440680954, "post_id": 32232526, "comment_id": 52380977, "body": "I did that already, I was just wondering can I partly execute the code, it seems no."}], "tags": [], "owner": {"reputation": 75, "user_id": 5095701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbea9cb0aa70343bd000951967e6535?s=128&d=identicon&r=PG&f=1", "display_name": "Diuter", "link": "https://stackoverflow.com/users/5095701/diuter"}, "is_accepted": false, "score": 4, "last_activity_date": 1440608613, "creation_date": 1440608613, "answer_id": 32232526, "question_id": 32232429, "link": "https://stackoverflow.com/questions/32232429/can-i-partly-execute-the-code-in-visual-studio/32232526#32232526", "title": "can I partly execute the code in Visual Studio?", "body": "<p>I don't think this is possible.</p>\n\n<p>What you can do is feed the specific function you want to try with some parameters like:</p>\n\n<pre><code>private int Sum(int x, int y)\n{\n    return x+y;\n}\n</code></pre>\n\n<p>You can write a code like:</p>\n\n<pre><code>int test = Sum(10, 12);\n</code></pre>\n\n<p>and use the debug to watch what happens.</p>\n"}], "owner": {"reputation": 65, "user_id": 5169631, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/AcaTL.jpg?s=128&g=1", "display_name": "Mr. Hello_world", "link": "https://stackoverflow.com/users/5169631/mr-hello-world"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1440608613, "creation_date": 1440608287, "last_edit_date": 1440608432, "question_id": 32232429, "link": "https://stackoverflow.com/questions/32232429/can-i-partly-execute-the-code-in-visual-studio", "title": "can I partly execute the code in Visual Studio?", "body": "<p>Can I partly execute the code in Visual Studio? I have a code and instead of doing the whole execution can I do it partly? For example a function</p>\n"}, {"tags": ["c", "gcc", "assembly", "arm"], "comments": [{"owner": {"reputation": 25764, "user_id": 1163019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/47a57beaec8e4221a9e18ca9b876e8b2?s=128&d=identicon&r=PG", "display_name": "auselen", "link": "https://stackoverflow.com/users/1163019/auselen"}, "edited": false, "score": 0, "creation_date": 1440612111, "post_id": 32232350, "comment_id": 52349538, "body": "Check your output with objdump, since asm isn&#39;t volatile, may be compiler is removing it away all together. It is important to check binary generated when tinkering with functions like this."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "reply_to_user": {"reputation": 25764, "user_id": 1163019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/47a57beaec8e4221a9e18ca9b876e8b2?s=128&d=identicon&r=PG", "display_name": "auselen", "link": "https://stackoverflow.com/users/1163019/auselen"}, "edited": false, "score": 0, "creation_date": 1440612396, "post_id": 32232350, "comment_id": 52349704, "body": "@auselen GCC automatically treats inline assembly statements without output operands as volatile otherwise it would always eliminate them when optimization is turned on. That&#39;s not the problem here."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1440613347, "post_id": 32232350, "comment_id": 52350244, "body": "Note that you have the function marked <code>inline</code>; when a copy of the function <i>body</i> is inlined at a call site, there is no longer a <i>call</i>, so once you crank up the optimiser all bets are off regarding register allocation, regardless of what convention the externally-visible copy of the function may follow."}], "answers": [{"comments": [{"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "reply_to_user": {"reputation": 15, "user_id": 5267794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GwfT.png?s=128&g=1", "display_name": "CDevel", "link": "https://stackoverflow.com/users/5267794/cdevel"}, "edited": false, "score": 1, "creation_date": 1440622828, "post_id": 32233213, "comment_id": 52355475, "body": "@CDevel You don&#39;t need <code>volatile</code> and nor should you use it. GCC will only eliminate the asm statement if the output isn&#39;t used, which is what you want. When the result isn&#39;t used the most optimal implementation of the absolute value function is nothing at all. To test if the inline assembly is working you need to write a more realistic example where the result is actually used. For example, you could use <code>printf</code> to print it out."}, {"owner": {"reputation": 15, "user_id": 5267794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GwfT.png?s=128&g=1", "display_name": "CDevel", "link": "https://stackoverflow.com/users/5267794/cdevel"}, "edited": false, "score": 0, "creation_date": 1440633639, "post_id": 32233213, "comment_id": 52359317, "body": "Perhaps there&#39;s something I can&#39;t understand about volatile. I tried the function within a long loop to perform a benchmark and if I don&#39;t use volatile, the loop becomes infinite. My loop is this:     volatile int result = 0; &lt;br/&gt;     volatile int number = 0; &lt;br/&gt;     for(int C = 0; C &lt; REP; C++) &lt;br/&gt;       result = optAbsVal(number);"}, {"owner": {"reputation": 15, "user_id": 5267794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GwfT.png?s=128&g=1", "display_name": "CDevel", "link": "https://stackoverflow.com/users/5267794/cdevel"}, "edited": false, "score": 1, "creation_date": 1440636106, "post_id": 32233213, "comment_id": 52359894, "body": "Ok it was the flags register, &quot;cc&quot; (which I missed in your code) was enough, thank you!"}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "reply_to_user": {"reputation": 15, "user_id": 5267794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GwfT.png?s=128&g=1", "display_name": "CDevel", "link": "https://stackoverflow.com/users/5267794/cdevel"}, "edited": false, "score": 0, "creation_date": 1440637081, "post_id": 32233213, "comment_id": 52360082, "body": "@CDevel I missed that too. The original version of my post omitted the &quot;cc&quot; clobber by mistake. The &quot;cc&quot; clobber lets the compiler know the asm statement modifies the flags. Without it you get strange things happening as you found out."}, {"owner": {"reputation": 2978, "user_id": 904148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf9d0b9f5d61826525247bd5b79cdc0?s=128&d=identicon&r=PG", "display_name": "Timothy Baldwin", "link": "https://stackoverflow.com/users/904148/timothy-baldwin"}, "edited": false, "score": 1, "creation_date": 1512150982, "post_id": 32233213, "comment_id": 82156060, "body": "This code fails to set the output register if the input is positive, the fix is to specify the same register must be used ...<code>&quot;RSBLT %0, %0, #0&quot;  : &quot;+r&quot; (x) :: &quot;cc&quot;);</code>"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 15, "user_id": 5267794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GwfT.png?s=128&g=1", "display_name": "CDevel", "link": "https://stackoverflow.com/users/5267794/cdevel"}, "edited": false, "score": 1, "creation_date": 1512179783, "post_id": 32233213, "comment_id": 82166441, "body": "@CDevel: More importantly, there&#39;s no reason to use inline asm at all for this specific function.  It makes the resulting compiler output equal or worse for all the cases I looked at."}], "tags": [], "owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "is_accepted": true, "score": 3, "last_activity_date": 1512156070, "last_edit_date": 1512156070, "creation_date": 1440610832, "answer_id": 32233213, "question_id": 32232350, "link": "https://stackoverflow.com/questions/32232350/gcc-inline-asm-with-aapcs/32233213#32233213", "title": "GCC inline asm with aapcs", "body": "<p>Since <code>x</code> isn't the return value it doesn't need to be in R0. The return value is the result of the evaluating the expression given in the <code>return</code> statement. So with <code>return x</code> the return value isn't <code>x</code>, the return value is the value of <code>x</code>. This is important distinction because that this means <code>x</code> doesn't need to live in R0, only that the value in <code>x</code> in needs to be copied into R0 before the function returns.</p>\n\n<p>So since the last statement to be executed in your function is <code>return (x);</code> then that means the last thing your function does is copy <code>x</code> to R0, which clobbers the value you stored in R0 in your inline assembly statement.</p>\n\n<p>This is why you must always fully describe the effect on the machine state your inline assembly statements. The compiler has no idea you want the value in R0 preserved. It has no idea you expect the value passed in the <code>x</code> paramater to be in R0 on entry to the asm statement. That might be true because of the calling convention, but the rules of the calling convention only apply at entry and exit to a function, not in the middle of a function where your asm statement is. If your function is inlined into another function then the calling convention doesn't apply at all since there's no actual function call.</p>\n\n<p>So what you want is something like this:</p>\n\n<pre><code>__inline int optAbsVal(int x)\n{\n  asm(\"CMP %0, #0\\n\"\n      \"IT LT\\n\"\n      \"RSBLT %0, %0, #0\"\n      : \"+r\" (x) : : \"cc\");\n  return(x);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 1, "last_activity_date": 1512182175, "last_edit_date": 1512182175, "creation_date": 1512179597, "answer_id": 47603798, "question_id": 32232350, "link": "https://stackoverflow.com/questions/32232350/gcc-inline-asm-with-aapcs/47603798#47603798", "title": "GCC inline asm with aapcs", "body": "<p>Inline asm is completely pointless here.  <strong>GCC already knows how to optimize an absolute-value, and hiding that process from the compiler inside inline asm will make your code optimize worse, not better.  <a href=\"https://gcc.gnu.org/wiki/DontUseInlineAsm\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/wiki/DontUseInlineAsm</a></strong></p>\n\n<p>Writing absolute value in pure C is always at least as good (unless the compiler decides to make branchy code after inlining into something, and profiling shows that branching was the wrong choice.)</p>\n\n<pre><code>absval(int x) {\n    return x&lt;0 ? -x : x;  // ternary often compiles branchlessly\n}\n</code></pre>\n\n<p>The advantages over inline asm include: the compilers <em>knows</em> the result is non-negative, and can optimize accordingly.  For example, it can divide by a power of 2 with a simple right shift, instead of needing to account for the different rounding of shifts vs. C signed division:</p>\n\n<pre><code>void foo_asm (int *arr, int len) {\n    for (int i=0 ; i&lt;1024 ; i++){\n      arr[i] = optAbsVal(arr[i]) / 4;  // Using Ross's correct implementation\n    }\n}\n</code></pre>\n\n<p>inner loop (<a href=\"https://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,source:&#39;int+optAbsVal(int+x)%0A%7B%0A++asm(%22CMP+%250,+%230%5Cn%22%0A++++++%22IT+LT%5Cn%22%0A++++++%22RSBLT+%250,+%250,+%230%22%0A++++++:+%22%2Br%22+(x)+:+:+%22cc%22)%3B%0A++return(x)%3B%0A%7D%0A%0Aint+absval(int+x)+%7B%0A++return+x%3C0+%3F+-x+:+x%3B%0A%7D%0A%0A%0Avoid+foo_asm+(int+*arr,+int+len)+%7B%0A++++for+(int+i%3D0+%3B+i%3C1024+%3B+i%2B%2B)%7B%0A++++++arr%5Bi%5D+%3D+optAbsVal(arr%5Bi%5D)+/+4%3B%0A++++%7D%0A%7D%0A%0Avoid+foo_pure+(int+*arr,+int+len)+%7B%0A++++for+(int+i%3D0+%3B+i%3C1024+%3B+i%2B%2B)%7B%0A++++++arr%5Bi%5D+%3D+absval(arr%5Bi%5D)+/+4%3B%0A++++++//arr%5Bi%5D+%3D+absval(100+%2B+arr%5Bi%5D)%3B%0A++++%7D%0A%7D&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:41.50556531927357,l:&#39;4&#39;,m:100,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((g:!((h:compiler,i:(compiler:armg630,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,trim:&#39;1&#39;),libs:!(),options:&#39;-O3+-mcpu%3Dcortex-a7+-mthumb&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;ARM+gcc+6.3.0+(linux)+(Editor+%231,+Compiler+%231)&#39;,t:&#39;0&#39;)),header:(),k:58.49443468072643,l:&#39;4&#39;,m:83.26732673267327,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:output,i:(compiler:1,editor:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;%231+with+ARM+gcc+6.3.0+(linux)&#39;,t:&#39;0&#39;)),header:(),l:&#39;4&#39;,m:16.732673267326735,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),k:58.49443468072643,l:&#39;3&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">from <code>gcc6.3 -O3 -mcpu=cortex-a7 -mthumb</code> on the Godbolt compiler explorer</a>):</p>\n\n<pre><code>.L4:\n    ldr     r3, [r2, #4]\n    CMP r3, #0             @@@@ Inline asm version\nIT LT\nRSBLT r3, r3, #0\n    adds    r1, r3, #3\n    bics    r3, r3, r3, asr #32\n    it      cs\n    movcs   r3, r1           @ x = x&lt;0 ? x+3 : x  (I think, I didn't look up BICS)\n    asrs    r3, r3, #2       @ x &gt;&gt;= 2\n    str     r3, [r2, #4]!\n    cmp     r2, r0\n    bne     .L4\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>void foo_pure (int *arr, int len) {\n    for (int i=0 ; i&lt;1024 ; i++){\n      arr[i] = absval(arr[i]) / 4;  // Using my pure C\n    }\n}\n\n.L8:               @@@@@@@@ Pure C version\n    ldr     r3, [r2, #4]\n    cmp     r3, #0           @ gcc emitted exactly your 3-insn sequence on its own\n    it      lt\n    rsblt   r3, r3, #0\n    asrs    r3, r3, #2       @ non-negative division by 4 is a trivial &gt;&gt; 2\n    str     r3, [r2, #4]!\n    cmp     r1, r2\n    bne     .L8\n</code></pre>\n\n<p><strong>Knowing that a signed variable is non-negative is often valuable for a compiler.</strong>  (And <a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">signed overflow is undefined behaviour</a>, so it's allowed to ignore the fact that <code>0 - 0x80000000</code> = <code>0x80000000</code>, i.e. that <code>-INT_MIN</code> still has its sign bit set, because <code>-INT_MIN</code> is UB.  The <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement#Most_negative_number\" rel=\"nofollow noreferrer\">most negative number</a> is a special case for 2's complement.)</p>\n\n<hr>\n\n<p>gcc could be doing even better by looking at flags already set by previous instructions instead of doing a <code>cmp</code>.  (This could also allow better instruction scheduling for in-order cores).</p>\n\n<p>But for <code>absval(100 + arr[i])</code> I'm seeing</p>\n\n<pre><code>    adds    r3, r3, #100\n    cmp     r3, #0\n    it      lt\n    rsblt   r3, r3, #0\n</code></pre>\n\n<p>instead of using <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0204j/Chdhcfbc.html\" rel=\"nofollow noreferrer\">the sign flag alone for the MInus condition</a>.</p>\n\n<pre><code>    @ hand-written, IDK why gcc doesn't do this, probably missed optimization:\n    adds    r3, r3, #100    # set flags\n    it      MI              # use the MInus condition instead of LessThan\n    rsbmi   r3, r3, #0\n</code></pre>\n\n<hr>\n\n<p>Inline asm also fails to take advantage of ARM's 3-operand instructions.  <code>rsb</code> could produce the result in a different register than the input (in ARM mode at least, and in unified syntax <code>IT</code> doesn't require thumb mode).  But you can't just use a separate output operand for <code>x</code> if you want your asm to still assemble in Thumb mode, where <code>rsb r1, r0, #0</code> wouldn't assemble.</p>\n\n<p>And also, inline asm blocks constant-propagation.  <code>optAbsVal(-1)</code> compiles to 4 instructions to flip it at run-time.  <code>absval(-1)</code> compiles to a compile-time constant of <code>1</code>.</p>\n\n<p>On targets with NEON, inline-asm also can't auto-vectorize.  It may also make the compiler not unroll a loop when it otherwise would have.</p>\n"}], "owner": {"reputation": 15, "user_id": 5267794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3GwfT.png?s=128&g=1", "display_name": "CDevel", "link": "https://stackoverflow.com/users/5267794/cdevel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 32233213, "answer_count": 2, "score": 1, "last_activity_date": 1512182175, "creation_date": 1440608019, "question_id": 32232350, "link": "https://stackoverflow.com/questions/32232350/gcc-inline-asm-with-aapcs", "title": "GCC inline asm with aapcs", "body": "<p>I'm trying to optimize a mathematical function writing inline assembly with GCC and ARM Cortex-A7.\nMy code is this:</p>\n\n<pre><code>__inline int __attribute__((pcs(\"aapcs\"))) optAbsVal(int x)\n{\n  asm(\"CMP R0, #0\\n\"\n      \"IT LT\\n\"\n      \"RSBLT R0, R0, #0\");\n  return(x);\n}\n</code></pre>\n\n<p>I did not specify any input/output parameters nor the clobbers inside the inline asm block because, according to the calling convention, x should be in R0, as well as the return value. \nThe problem is this function returns the value of x without modifying it, which makes me think either x is not in R0 or the compiler modifies in some way the function.\nI resolved this by adding the parameters \"=r\"(x) : \"0\"(x), but still I'm not satisfied with this code as it seems I'm doing unnecessary operations.\nThe reason I'm doing pcs(\"aapcs\") is to avoid load/store ops to get better performances, but this is getting worse instead.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1440607862, "post_id": 32232293, "comment_id": 52347060, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 237, "user_id": 5243467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbb7ca64eda9911e73adba6964b025b7?s=128&d=identicon&r=PG&f=1", "display_name": "Leroy", "link": "https://stackoverflow.com/users/5243467/leroy"}, "edited": false, "score": 0, "creation_date": 1440607942, "post_id": 32232293, "comment_id": 52347114, "body": "your code might actually <a href=\"http://stackoverflow.com/questions/6459023/exec-returning-255\">be returning -1 as the error</a>. maybe you can use this to help you out"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1440608110, "post_id": 32232293, "comment_id": 52347217, "body": "Not including the <code>a[n]</code> VLA, you have <i>at least</i> a <b>7.62 MB</b> automatic variable storage requirement, assuming <code>long long</code> is 8 bytes. My crystal ball tells me you blowing out your runtime stack and puking to a bitter end."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1440608187, "post_id": 32232293, "comment_id": 52347264, "body": "<code>for(i=1;i&lt;=1000000;i++)</code> will index out of the range of <code>b[1000000]</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440608873, "post_id": 32232293, "comment_id": 52347635, "body": "Assuming by &quot;while <i>compiling</i> this code&quot; means &quot;after compiling, when I <i>run</i> this code&quot;, it appears from the filename you&#39;re doing this on a Windows box, and the same code <i>appears</i> to work when run on a Ubuntu box. You need to fix the bug(s) below, and read this: <a href=\"http://stackoverflow.com/questions/571945/getting-a-stack-overflow-exception-when-declaring-a-large-array\">&quot;Getting a stack overflow exception when declaring a large array&quot;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1440608510, "post_id": 32232454, "comment_id": 52347433, "body": "I am not sure that&#39;s the reason he is getting the error.. However, that is one of the problems in the program.."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1440608819, "last_edit_date": 1440608819, "creation_date": 1440608389, "answer_id": 32232454, "question_id": 32232293, "link": "https://stackoverflow.com/questions/32232293/error-while-compiling-in-code-blocks/32232454#32232454", "title": "Error while compiling in code blocks", "body": "<p>You have defined</p>\n\n<pre><code>long long int b[1000000]={0};\n</code></pre>\n\n<p>But you go on to</p>\n\n<pre><code>for(i=1;i&lt;=1000000;i++)\n  { \n    if(b[i]&gt;0)\n    count+=(b[i]*(b[i]+1))/2;\n  }\n</code></pre>\n\n<p>This will index out of the range of <code>b[]</code>. In C, arrays are indexed from <code>b[0]</code> to <code>b[length-1]</code>.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Also, you are putting at least 8000000 bytes on the stack, which might break it.</p>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1440608826, "creation_date": 1440608826, "answer_id": 32232601, "question_id": 32232293, "link": "https://stackoverflow.com/questions/32232293/error-while-compiling-in-code-blocks/32232601#32232601", "title": "Error while compiling in code blocks", "body": "<pre><code>  long long int a[n],b[1000000]={0};\n</code></pre>\n\n<p>Due to large size of <code>b[1000000]</code> you may have exceeded the run time stack size .Thus your program crashes. </p>\n\n<p>Also the loop condition should be <code>i&lt;100000</code> (but that may or may not be reason here for crash).</p>\n\n<p>Your program should work fine if you reduce size of <code>b</code>. </p>\n"}], "owner": {"reputation": 1, "user_id": 5269527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00dc2c83ada0c88ca2ce2276b9127deb?s=128&d=identicon&r=PG&f=1", "display_name": "cnulenka", "link": "https://stackoverflow.com/users/5269527/cnulenka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1440610007, "creation_date": 1440607783, "last_edit_date": 1440610007, "question_id": 32232293, "link": "https://stackoverflow.com/questions/32232293/error-while-compiling-in-code-blocks", "title": "Error while compiling in code blocks", "body": "<p>I am getting a 255 error in codeblocks while compiling this code....its giving me filename.exe stopped working...but I'm getting the output in ubuntu</p>\n\n<p>my code...</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n  int t;\n  scanf(\"%d\",&amp;t);\n  while(t--)\n  {\n  long long int n,k=0;\n  scanf(\"%lld\",&amp;n);\n  long long int a[n],b[1000000]={0};\n  int i;\n  for(i=0;i&lt;n;i++)\n    {\n      scanf(\"%lld\",&amp;a[i]);\n      b[a[i]]++;\n    }\n  long long int count=0;\n  for(i=1;i&lt;=1000000;i++)\n    { \n\n       if(b[i]&gt;0)\n       count+=(b[i]*(b[i]+1))/2;\n    }\n  printf(\"%lld\\n\",count);\n  }\n  return 0;\n}\n</code></pre>\n\n<p>i/p\n2\n4\n1 2 3 4\n3\n1 2 1\no/p\n4\n4</p>\n"}, {"tags": ["c++", "c", "opencl"], "comments": [{"owner": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1440607506, "post_id": 32232136, "comment_id": 52346863, "body": "Do you actually want to prevent anyone from being able to read your kernel source code at all, or do you just want to embed the kernel source into the executable for ease of distribution?"}, {"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "reply_to_user": {"reputation": 9332, "user_id": 3100482, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3Q8i.jpg?s=128&g=1", "display_name": "jprice", "link": "https://stackoverflow.com/users/3100482/jprice"}, "edited": false, "score": 0, "creation_date": 1440608648, "post_id": 32232136, "comment_id": 52347498, "body": "@jprice This is for closed source software, so I actually want both."}], "answers": [{"comments": [{"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 0, "creation_date": 1440668508, "post_id": 32234415, "comment_id": 52372346, "body": "Thank you very much! However, I thought that OpenCL would have an alternative for this. I really don&#39;t like the idea of having to code with strings, and have the extra workload of compressing it and ofuuscating and so on..."}, {"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 0, "creation_date": 1440668536, "post_id": 32234415, "comment_id": 52372363, "body": "And I am targetting any OpenCL device!"}, {"owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "reply_to_user": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 0, "creation_date": 1440682529, "post_id": 32234415, "comment_id": 52382247, "body": "OpenCL as far as I know does not support LLVM format, even if some manufacturers use LLVM binaries as intermediate CL code (ARM). So in order to be fully compatible the string has to be stored. Vulkan will probably fix this by storing LLVM code."}, {"owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "edited": false, "score": 0, "creation_date": 1440684726, "post_id": 32234415, "comment_id": 52383944, "body": "You lost me there. Whats does LLVM has to do whith this? I am using Visual Studio and/or gcc"}, {"owner": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "edited": false, "score": 0, "creation_date": 1440897194, "post_id": 32234415, "comment_id": 52461807, "body": "LLVM is what SPIR 1.2 and 2.0 use. For the platforms that support it, it is a way to distribute your code in a platform-independent binary fashion. A better solution is SPIR-V for OpenCL 2.1 but it&#39;s not shipping yet."}, {"owner": {"reputation": 317, "user_id": 3980364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68fb35635f24df3b1d27ab384838f5a6?s=128&d=identicon&r=PG&f=1", "display_name": "Hashman", "link": "https://stackoverflow.com/users/3980364/hashman"}, "edited": false, "score": 1, "creation_date": 1441770667, "post_id": 32234415, "comment_id": 52802910, "body": "Note: Even if you mangle the stored source code, there are ways for tools that sit on top of OpenCL.DLL to dump the unmangled code when you call clCompileProgram()."}], "tags": [], "owner": {"reputation": 7967, "user_id": 741692, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1300d6b45404082362f2d0f05de23640?s=128&d=identicon&r=PG&f=1", "display_name": "DarkZeros", "link": "https://stackoverflow.com/users/741692/darkzeros"}, "is_accepted": false, "score": 1, "last_activity_date": 1440614848, "creation_date": 1440614848, "answer_id": 32234415, "question_id": 32232136, "link": "https://stackoverflow.com/questions/32232136/opencl-without-external-kernel-file/32234415#32234415", "title": "openCL without external kernel file", "body": "<p>Here you have 2 scenarios:</p>\n\n<ol>\n<li>If you are targeting one single device</li>\n<li>If you are targeting any OpenCL device</li>\n</ol>\n\n<hr>\n\n<p>In the first scenario, there is a possibility to embed the binary data into your executable (using a string). And load it when you run the program.\nThere would be no reverse engineering possible (unless the already known ones, like assembly), since the program will have compiled code and not the original code you wrote.</p>\n\n<p>The way of doing that would be:</p>\n\n<pre><code>uchar binary_dev1[binarySize] = \"...\"\nuchar * binary = &amp;binary_dev1;\nprogram = clCreateProgramWithBinary(context, 1, &amp;device, \n                                    &amp;binarySize, \n                                    (const unsigned char**)&amp;binary,\n                                    &amp;binaryStatus,\n                                    &amp;errNum);\n</code></pre>\n\n<hr>\n\n<p>The second alternative involves protecting the source code in the kernel by some sort of \"mangling\".\nSince the mangler code is going to be compiled, reverse engineer it could be complicated.</p>\n\n<p>You can do any mangling you can think of that is reversible, and even combine them. Some ideas:</p>\n\n<ul>\n<li><p>Compress the code it using a compression format, but hardcode some parameters of the decompresion, to make it less straightforward.</p>\n\n<ul>\n<li>LZ4, ZLIB, etc...</li>\n</ul></li>\n<li><p>Use an XOR operator on the code. Better if it varies over time, and better if it varies using a non-obvious rule. </p>\n\n<ul>\n<li>For example:\n\n<blockquote>\n<pre><code>char seq = 0x1A;\nfor(int i=0; i&lt;len; i++){\n    out[i] = in[i] ^ seq;\n    seq = ((seq ^ i) * 78965213) &gt;&gt; 4 + ((seq * i) * 56987) &lt;&lt; 4;\n}\n</code></pre>\n</blockquote></li>\n</ul></li>\n<li><p>Encode it using encoding methods that require a key, and are reversible</p></li>\n<li>Use a program that protects your program binary towards reverse engineering, like Themida.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 5977, "user_id": 1745695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b932c5253c45af61dc443fbc1b9c935c?s=128&d=identicon&r=PG", "display_name": "Dithermaster", "link": "https://stackoverflow.com/users/1745695/dithermaster"}, "is_accepted": false, "score": 1, "last_activity_date": 1440897259, "creation_date": 1440897259, "answer_id": 32292281, "question_id": 32232136, "link": "https://stackoverflow.com/questions/32232136/opencl-without-external-kernel-file/32292281#32292281", "title": "openCL without external kernel file", "body": "<p>Use SPIR 1.2 for OpenCL 1.2 or SPIR 2.0 for OpenCL 2.0 until SPIR-V for OpenCL 2.1 is available.</p>\n"}], "owner": {"reputation": 2802, "user_id": 3661207, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/tzrwF.jpg?s=128&g=1", "display_name": "manatttta", "link": "https://stackoverflow.com/users/3661207/manatttta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1440897259, "creation_date": 1440607202, "last_edit_date": 1440608735, "question_id": 32232136, "link": "https://stackoverflow.com/questions/32232136/opencl-without-external-kernel-file", "title": "openCL without external kernel file", "body": "<p>I would like to create an OpenCL kernel without giving access to it to the end user. </p>\n\n<p>Therefore, I can't use a regular external <code>.cl</code> text file. What are the alternatives, regarding that I would like to avoid creating a huge text string with the kernel?</p>\n\n<p>And yet another question, if I put this code in an hardcoded string, won't it be possible to access that code from some disassembler?</p>\n"}, {"tags": ["c", "gnu-assembler"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1440605994, "post_id": 32231767, "comment_id": 52345983, "body": "How do you know it doesn&#39;t contain the right address?"}, {"owner": {"reputation": 197, "user_id": 2798943, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/80e5106aadae704e90ca367c9942dbf7?s=128&d=identicon&r=PG&f=1", "display_name": "user2798943", "link": "https://stackoverflow.com/users/2798943/user2798943"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440606087, "post_id": 32231767, "comment_id": 52346029, "body": "I&#39;ve examined the memory with gdb using the command x/i."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440606127, "post_id": 32231767, "comment_id": 52346056, "body": "If you call this function from the C code, will it execute correctly?"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1440606147, "post_id": 32231767, "comment_id": 52346068, "body": "hm are you sure this isn&#39;t address space randomization at work?"}, {"owner": {"reputation": 197, "user_id": 2798943, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/80e5106aadae704e90ca367c9942dbf7?s=128&d=identicon&r=PG&f=1", "display_name": "user2798943", "link": "https://stackoverflow.com/users/2798943/user2798943"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1440606200, "post_id": 32231767, "comment_id": 52346100, "body": "@MarcusM&#252;ller I&#39;m using it in a bare-metal program"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1440606247, "post_id": 32231767, "comment_id": 52346123, "body": "good point :) you might want to add this piece of information to your original question as an edit."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1440606267, "post_id": 32231767, "comment_id": 52346144, "body": "Why not just simply create a prototype, and use it like any other function which decays naturally to a pointer to the function? And if you&#39;re uncertain then use the address-of operator like <code>&amp;myfunc</code>. Then let the linker resolve the address."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1440606355, "post_id": 32231767, "comment_id": 52346203, "body": "I still don&#39;t understand what are you comparing to what. How do you get the &quot;correct&quot; address, and how do you see the &quot;incorrect&quot; one? Can you add the steps to the question body?"}, {"owner": {"reputation": 197, "user_id": 2798943, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/80e5106aadae704e90ca367c9942dbf7?s=128&d=identicon&r=PG&f=1", "display_name": "user2798943", "link": "https://stackoverflow.com/users/2798943/user2798943"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1440606696, "post_id": 32231767, "comment_id": 52346393, "body": "@JoachimPileborg thx, that solved the problem"}, {"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1440606959, "post_id": 32231767, "comment_id": 52346579, "body": "One of you should add an answer then."}], "answers": [{"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": true, "score": 4, "last_activity_date": 1440619747, "creation_date": 1440619747, "answer_id": 32235801, "question_id": 32231767, "link": "https://stackoverflow.com/questions/32231767/how-to-get-the-address-of-an-asm-function-in-c/32235801#32235801", "title": "how to get the address of an asm function in c", "body": "<p>You should be able to declare your asm function in C using the same symbol you use in the <code>.global</code> declaration:</p>\n\n<pre><code>extern void myfunc(void);\n</code></pre>\n\n<p>The symbols are resolved by the linker. As long as the object file created from your asm file exports the symbol <code>myfunc</code>, the object file from your C source may contain an undefined reference to it.</p>\n\n<p>Depending on the particular ABI or object file format (a.out versus ELF), you may need to use <code>_myfunc</code> instead of <code>myfunc</code> in the <code>extern</code> declaration.</p>\n"}], "owner": {"reputation": 197, "user_id": 2798943, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/80e5106aadae704e90ca367c9942dbf7?s=128&d=identicon&r=PG&f=1", "display_name": "user2798943", "link": "https://stackoverflow.com/users/2798943/user2798943"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 32235801, "answer_count": 1, "score": 4, "last_activity_date": 1440619747, "creation_date": 1440605933, "last_edit_date": 1440607039, "question_id": 32231767, "link": "https://stackoverflow.com/questions/32231767/how-to-get-the-address-of-an-asm-function-in-c", "title": "how to get the address of an asm function in c", "body": "<p>I have an asm file (I'm using gas) and a c file. My asm file contains a function, something like this</p>\n\n<pre><code>.global myfunc\n.type myfunc, @function\n\nmyfunc:\n   pusha\n   .\n   .\n   .\n</code></pre>\n\n<p>now I want to get the address of the label myfunc from my c file, so I've wrote</p>\n\n<pre><code>extern uintptr_t _myfunc asm(\"myfunc\");\n</code></pre>\n\n<p>my program links without problems, but when I execute my program the variable _myfunc doesn't contain the right address.</p>\n\n<p><strong>Edit 1</strong></p>\n\n<p>maybe it's useful to know that this piece of code is part of a bare-metal program</p>\n\n<p><strong>Edit 2</strong></p>\n\n<p>using a function prototype solved the problem</p>\n\n<pre><code>void function() asm(\"myfunc\");\n\nuintptr_t _myfunc = (uintptr_t)&amp;myfunc;\n</code></pre>\n"}, {"tags": ["c", "sockets", "libc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1440605153, "post_id": 32231434, "comment_id": 52345461, "body": "Handling serialization in C <i>is</i> ugly.."}, {"owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "edited": false, "score": 0, "creation_date": 1440605194, "post_id": 32231434, "comment_id": 52345485, "body": "Maybe I misunderstand, but could you read all four bytes first, and only then deserialize them? Note that you should probably be doing this anyway if you care about endian-ness."}, {"owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1440605224, "post_id": 32231434, "comment_id": 52345503, "body": "@EugeneSh. <i>Handling serialization is ugly..</i> FTFY"}, {"owner": {"reputation": 16572, "user_id": 83741, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60adb60c59462ef0cb9db65853736cf4?s=128&d=identicon&r=PG", "display_name": "Alexander Torstling", "link": "https://stackoverflow.com/users/83741/alexander-torstling"}, "reply_to_user": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "edited": false, "score": 0, "creation_date": 1440605370, "post_id": 32231434, "comment_id": 52345584, "body": "@Patrick87: Yes, maybe I will have to do that. But I found the problem interesting in itself and wanted to see if there is another way."}], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 4, "creation_date": 1440606439, "post_id": 32231793, "comment_id": 52346248, "body": "I agree. Don&#39;t post it either."}, {"owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1440606600, "post_id": 32231793, "comment_id": 52346336, "body": "@EJP Just giving him what he wants based on the comments. No concern of mine what he insists on doing with the rope."}], "tags": [], "owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "is_accepted": false, "score": 0, "last_activity_date": 1440605997, "creation_date": 1440605997, "answer_id": 32231793, "question_id": 32231434, "link": "https://stackoverflow.com/questions/32231434/c-incomplete-read-into-int/32231793#32231793", "title": "c: incomplete read into int", "body": "<p>Disclaimer: this is bad code. Don't do it.</p>\n\n<pre><code>int value = 0;\nint bytes = 0;\nwhile ( (bytes += read(((char*)&amp;value)+bytes, 4-bytes)) &lt; 4 );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1440606485, "post_id": 32231816, "comment_id": 52346271, "body": "You need to break on <code>n == 0</code> as well, otherwise you will loop forever at end of stream."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1440606987, "post_id": 32231816, "comment_id": 52346595, "body": "@EJP:You mean in case the other side disconnects? Ok I will amend the code(and assume failure if that is the case by returning -1, OP can change it for his needs)."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1440607146, "post_id": 32231816, "comment_id": 52346682, "body": "@EJP: And there can be no valid cases when the return is 0 and say on next recv maybe it reads something?"}, {"owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "edited": false, "score": 0, "creation_date": 1440607360, "post_id": 32231816, "comment_id": 52346787, "body": "I think it&#39;s reasonable for us to ignore timeouts in our answers; in real life, we&#39;d want to use timeouts to see whether we get the requested data in a reasonable time. If we expect 4 bytes and we call read and get 0, I&#39;d still wait for the timeout, personally."}, {"owner": {"reputation": 16572, "user_id": 83741, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60adb60c59462ef0cb9db65853736cf4?s=128&d=identicon&r=PG", "display_name": "Alexander Torstling", "link": "https://stackoverflow.com/users/83741/alexander-torstling"}, "edited": false, "score": 0, "creation_date": 1440609274, "post_id": 32231816, "comment_id": 52347838, "body": "Thanks. You didn&#39;t have to post all that code though, I just wondered if it&#39;s considered ok to have an int as buffer and how to handle recovery in that case. I guess are saying no, but would you care to elaborate why? Is there no portable way of treating an int as a byte buffer?"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 16572, "user_id": 83741, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60adb60c59462ef0cb9db65853736cf4?s=128&d=identicon&r=PG", "display_name": "Alexander Torstling", "link": "https://stackoverflow.com/users/83741/alexander-torstling"}, "edited": false, "score": 0, "creation_date": 1440609523, "post_id": 32231816, "comment_id": 52348000, "body": "@AlexanderTorstling: well you could make a char pointer to int and advance it by as many bytes you receive and only consider all done when all 4 bytes are read?"}, {"owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "reply_to_user": {"reputation": 16572, "user_id": 83741, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60adb60c59462ef0cb9db65853736cf4?s=128&d=identicon&r=PG", "display_name": "Alexander Torstling", "link": "https://stackoverflow.com/users/83741/alexander-torstling"}, "edited": false, "score": 0, "creation_date": 1440610637, "post_id": 32231816, "comment_id": 52348689, "body": "@AlexanderTorstling The answer is that yes, you can have an int as a buffer, as I demonstrate in my answer. You can handle recovery by treating the memory it occupies a byte array and indexing into it. Is that OK? No, I would say, for a few reasons - it&#39;s hard to read, hard to understand, unnecessary, and breaks if you&#39;re communicating data between different kinds of systems (see my comment on your question). What do you mean by <i>portable</i>? Treating an array of four bytes as an integer is not portable across systems in general. As in, it will represent different numbers on different systems."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 16572, "user_id": 83741, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60adb60c59462ef0cb9db65853736cf4?s=128&d=identicon&r=PG", "display_name": "Alexander Torstling", "link": "https://stackoverflow.com/users/83741/alexander-torstling"}, "edited": false, "score": 0, "creation_date": 1440610874, "post_id": 32231816, "comment_id": 52348841, "body": "@AlexanderTorstling:yeah or smth similar to Patrick&#39;s answer and make cast to char pointer to avoid problems due to pointer arithmetic (with int pointers +1 will add four bytes as you may know)"}, {"owner": {"reputation": 16572, "user_id": 83741, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60adb60c59462ef0cb9db65853736cf4?s=128&d=identicon&r=PG", "display_name": "Alexander Torstling", "link": "https://stackoverflow.com/users/83741/alexander-torstling"}, "edited": false, "score": 0, "creation_date": 1440611470, "post_id": 32231816, "comment_id": 52349160, "body": "Alright guys. Saw this question <a href=\"http://stackoverflow.com/questions/4914183/whats-the-correct-way-to-add-1-byte-to-a-pointer-in-c-c\" title=\"whats the correct way to add 1 byte to a pointer in c c\">stackoverflow.com/questions/4914183/&hellip;</a> which suggest a couple of ways of treating an int as a byte. I guess you have a point in it being hard to read though. The current code which I have (am maintaining) does a ntohl on the resulting int to cover for byte differences. What do you suggest I do then? Read byte array and bitshift into int, then ntohl? Or union of int, byte array and then ntohl?"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 16572, "user_id": 83741, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60adb60c59462ef0cb9db65853736cf4?s=128&d=identicon&r=PG", "display_name": "Alexander Torstling", "link": "https://stackoverflow.com/users/83741/alexander-torstling"}, "edited": false, "score": 0, "creation_date": 1440612333, "post_id": 32231816, "comment_id": 52349663, "body": "@AlexanderTorstling: There is no need for htonl if you use something like this: <a href=\"http://stackoverflow.com/questions/8173037/convert-4-bytes-char-to-int32-in-c\" title=\"convert 4 bytes char to int32 in c\">stackoverflow.com/questions/8173037/&hellip;</a>, but you need to know the endianness of the data that comes in"}, {"owner": {"reputation": 16572, "user_id": 83741, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60adb60c59462ef0cb9db65853736cf4?s=128&d=identicon&r=PG", "display_name": "Alexander Torstling", "link": "https://stackoverflow.com/users/83741/alexander-torstling"}, "edited": false, "score": 0, "creation_date": 1440619060, "post_id": 32231816, "comment_id": 52353510, "body": "@Giorgi: The data will be in network order. Had to read up on endianness and bitshift independence of endianness and now my understanding of what I need to do is the following: I read 4 bytes. I&#39;ll know that the byte order is big endian, so I&#39;ll get MSB first (index 0 in the array). I&#39;ll be able to construct the int by bit-shifting. Index 0 shifts 32 bits and so forth. This bit shift will work since bit shift isn&#39;t defined in terms of manipulating memory bit patterns but instead in terms of multiplication. Thus bit shift reconstruction will work the same irrespective of endianness. Correct?"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 16572, "user_id": 83741, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60adb60c59462ef0cb9db65853736cf4?s=128&d=identicon&r=PG", "display_name": "Alexander Torstling", "link": "https://stackoverflow.com/users/83741/alexander-torstling"}, "edited": false, "score": 0, "creation_date": 1440656815, "post_id": 32231816, "comment_id": 52365517, "body": "@AlexanderTorstling: For big endian data you will need something like this: <code>int i = (b[3] ) | ((unsigned)b[2] &lt;&lt; 8) | ((unsigned)b[1] &lt;&lt; 16) | ((unsigned)b[0] &lt;&lt; 24);</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441035300, "post_id": 32231816, "comment_id": 52504768, "body": "Minor: Better to <code>int n = -1</code> to cope with <code>*len &lt;= 0</code>.  Else <code>n</code> is undefined at function&#39;s end."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441039875, "post_id": 32231816, "comment_id": 52507269, "body": "@chux: fair, modified."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441041943, "post_id": 32231816, "comment_id": 52508351, "body": "To be more clear, if code is pathologically called with <code>len = 0 &#47;* or something less *&#47;; readall(..., ... &amp;len)</code>, then the <code>while(total &lt; *len)</code> loop is never entered and code becomes <code>int n; ... return n==-1?-1:0;</code> leading to undefined behavior.  Simple setting <code>int n = -1</code> copes with that.  Corner cases like this are rarely encountered, but have a way of coming up late in a project or being exploited by hackers."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441044503, "post_id": 32231816, "comment_id": 52509631, "body": "@chux:ok, I see but it is in programmers interest to call readall with meaningful length value. Unlikely he/she will call readall(...,0) - that would mean he/she expects nothing from server."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1441045501, "post_id": 32231816, "comment_id": 52510089, "body": "Agree unlikely, yet <code>len = 0; &#47;* more code *&#47;  readall(..., ..., len)</code> is not unreasonable nor is the fix expensive.  Consider <code>memcpy(x,y, 0), malloc(0), fread(ptr, 0, n,stream)</code>.  None of these invoke undefined behavior because they are called with 0."}], "tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": false, "score": 3, "last_activity_date": 1447002589, "last_edit_date": 1447002589, "creation_date": 1440606082, "answer_id": 32231816, "question_id": 32231434, "link": "https://stackoverflow.com/questions/32231434/c-incomplete-read-into-int/32231816#32231816", "title": "c: incomplete read into int", "body": "<p>You will first need to ensure to have read the 4 bytes. You do this using function similar to <a href=\"http://beej.us/guide/bgnet/output/html/multipage/advanced.html#sendall\" rel=\"nofollow\">this</a> one (slightly modified):</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n\nint readall(int s, char *buf, int *len)\n{\n    int total = 0;        // how many bytes we've read\n    int bytesleft = *len; // how many we have left to read\n    int n = -1;\n\n    while(total &lt; *len) {\n        n = read(s, buf+total, bytesleft, 0);\n        if (n &lt;= 0)  { break; }  \n        total += n;\n        bytesleft -= n;\n    }\n\n    *len = total; // return number actually read here\n\n    return (n&lt;=0)?-1:0; // return -1 on failure, 0 on success\n} \n</code></pre>\n\n<p>And afterwards you can assemble an integer using these four bytes.</p>\n"}, {"tags": [], "owner": {"reputation": 16572, "user_id": 83741, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60adb60c59462ef0cb9db65853736cf4?s=128&d=identicon&r=PG", "display_name": "Alexander Torstling", "link": "https://stackoverflow.com/users/83741/alexander-torstling"}, "is_accepted": false, "score": 0, "last_activity_date": 1441032755, "last_edit_date": 1495540742, "creation_date": 1441032755, "answer_id": 32314108, "question_id": 32231434, "link": "https://stackoverflow.com/questions/32231434/c-incomplete-read-into-int/32314108#32314108", "title": "c: incomplete read into int", "body": "<p>So with the information here and at <a href=\"https://stackoverflow.com/a/4915698/83741\">What's the correct way to add 1 byte to a pointer in C/C++?</a> I concluded that:</p>\n\n<ol>\n<li>Addressing into an int can cause alignment problems on some architectures.</li>\n<li>You can try to circumvent this by using type punning (a union between an <code>int</code> and a <code>char[]</code>), but in practice this technique seems no more reliable than 1.</li>\n<li>The only truly portable way of doing byte pointer arithmetic is using a char* into a <code>char[]</code>. Consequently the correct way of handling this situation is to read all the bytes into the array and construct the int afterwards.</li>\n<li>Reconstruction into an int can be done by <code>ntohl</code> or bit-shifting. Bitshifting is portable between host machine endianness since <a href=\"https://stackoverflow.com/a/7184905/83741\">it is defined in terms of multiplication</a>. </li>\n</ol>\n\n<p>So, where does that leave us? Well, the portable option is to read into a <code>char[]</code> and reconstruct with bitshifting or <code>ntohl</code>. The non-portable way is to point a <code>char *</code> into your int as @Patrick87 suggested.</p>\n\n<p>I went down the pragmatic road and just created a <code>char*</code> into my int. Worked fine on my target platform.</p>\n"}], "owner": {"reputation": 16572, "user_id": 83741, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/60adb60c59462ef0cb9db65853736cf4?s=128&d=identicon&r=PG", "display_name": "Alexander Torstling", "link": "https://stackoverflow.com/users/83741/alexander-torstling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1447002589, "creation_date": 1440604930, "question_id": 32231434, "link": "https://stackoverflow.com/questions/32231434/c-incomplete-read-into-int", "title": "c: incomplete read into int", "body": "<p>I have program which allocates a 32-bit int and subsequently tries to read 4 bytes from a socket into the int using read(2)</p>\n\n<p>Sometimes the read is incomplete and returns having read say 2 bytes. Is there any way of recovering from this? I suppose I have to produce a pointer halfway into the int to be able to perform another read.</p>\n\n<p>How are you supposed to handle this situation? I can imagine a couple of ugly ways, but no elegant one.</p>\n"}, {"tags": ["c", "floating-point"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 3, "creation_date": 1440604123, "post_id": 32231088, "comment_id": 52344776, "body": "The system is not &quot;adding garbage values&quot;. Floating-point representations are inherently imprecise (they don&#39;t represent real numbers, they represent a subset of rational numbers.)"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1440604181, "post_id": 32231088, "comment_id": 52344820, "body": "<a href=\"http://floating-point-gui.de/\" rel=\"nofollow noreferrer\">floating-point-gui.de</a>"}, {"owner": {"reputation": 1775, "user_id": 2401088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8f17309b5e6b0dd44075947ce5e4283?s=128&d=identicon&r=PG", "display_name": "Pankaj Prakash", "link": "https://stackoverflow.com/users/2401088/pankaj-prakash"}, "edited": false, "score": 0, "creation_date": 1440604727, "post_id": 32231088, "comment_id": 52350779, "body": "Thanks everyone for making it clear. And for the link. Here is what I found the correct answer to my question <a href=\"http://stackoverflow.com/questions/588004/is-floating-point-math-broken\" title=\"is floating point math broken\">stackoverflow.com/questions/588004/&hellip;</a>. If in case anyone else has this question this link can help."}], "answers": [{"comments": [{"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 0, "creation_date": 1440605158, "post_id": 32231190, "comment_id": 52345464, "body": "Is there a C equivalent of <a href=\"http://en.cppreference.com/w/cpp/types/numeric_limits/max_digits10\" rel=\"nofollow noreferrer\"><code>std::numeric_limits&lt;float&gt;::max_digits10</code></a>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 0, "creation_date": 1440609611, "post_id": 32231190, "comment_id": 52348065, "body": "@legends2k  Yes.  It appears  <code>max_digits10</code> is like <code>FLT_DECIMAL_DIG&#47;DBL_DECIMAL_DIG</code> and <code>digits10</code> is like <code>FLT_DIG&#47;DBL_DIG</code>."}, {"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 0, "creation_date": 1440611659, "post_id": 32231190, "comment_id": 52349273, "body": "C11 seems to only have a <a href=\"http://en.cppreference.com/w/c/types/limits\" rel=\"nofollow noreferrer\">DECIMAL_DIG</a>. However, one can define a macro if required, so should be fine, I guess."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 1, "creation_date": 1440614734, "post_id": 32231190, "comment_id": 52351108, "body": "@legends2k   C11 Has all: <code>DECIMAL_DIG</code> and <code>FLT_DECIMAL_DIG  DBL_DECIMAL_DIG  LDBL_DECIMAL_DIG</code>, C99 only has  <code>DECIMAL_DIG</code>. see <a href=\"http://stackoverflow.com/a/19897395/2410359\">stackoverflow.com/a/19897395/2410359</a> for a sample macro"}, {"owner": {"reputation": 27478, "user_id": 183120, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc147f814e1473bb6105db3d924fb590?s=128&d=identicon&r=PG", "display_name": "legends2k", "link": "https://stackoverflow.com/users/183120/legends2k"}, "edited": false, "score": 0, "creation_date": 1440636856, "post_id": 32231190, "comment_id": 52360037, "body": "Good to know, thank you."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1440604616, "last_edit_date": 1440604616, "creation_date": 1440604209, "answer_id": 32231190, "question_id": 32231088, "link": "https://stackoverflow.com/questions/32231088/float-value-input-error/32231190#32231190", "title": "Float value input error", "body": "<p>Your <code>float</code> cannot represent every conceivable number exactly.  It has limitations.  The closest <code>float</code> to <code>\"324.123\"</code> is <code>324.122986...</code></p>\n\n<p>If you need more precision, use <code>double</code>, but even that has its limits too.</p>\n\n<p>A <code>float</code> will be correct (match similarly limited input) to at least <code>FLT_DIG</code> <em>significant</em> digits.  To print a number to <code>FLT_DIG</code> significant digits use:</p>\n\n<pre><code>printf(\"%.*e\", FLT_DIG - 1, num);\n</code></pre>\n\n<hr>\n\n<p><code>FLT_DIG</code> is at least 6.  </p>\n\n<blockquote>\n  <p>number of decimal digits, q, such that any floating-point number with q decimal digits can be rounded into a floating-point number with p radix b digits and back again without change to the q decimal digits,  ... C11dr \u00a75.2.4.2.2 11</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 5055750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b73331911fc4e2708f799e041b443e80?s=128&d=identicon&r=PG&f=1", "display_name": "ALI SHEKH", "link": "https://stackoverflow.com/users/5055750/ali-shekh"}, "is_accepted": false, "score": 0, "last_activity_date": 1440605066, "creation_date": 1440605066, "answer_id": 32231480, "question_id": 32231088, "link": "https://stackoverflow.com/questions/32231088/float-value-input-error/32231480#32231480", "title": "Float value input error", "body": "<pre><code>printf(\"Value = %f\", num);\n</code></pre>\n\n<p>It will add some value if like :\nEnter float value 945.1234\nValue = 945.123413</p>\n\n<p>because float value always print a 6 digit after the decimal point </p>\n\n<p>to avoid this you can use the statement like : \n    printf(\"Value = %.3f\", num);</p>\n\n<p>This Will Give You A desire output as you want \nit will print only three number after the decimal point \nyou can set as per your requirement like \n    \"%.2f\" ->for 2 number after the decimal\n    \"%.3f\" ->for 3 number after the decimal\n    \"%.4f\" ->for 4 number after the decimal</p>\n"}], "owner": {"reputation": 1775, "user_id": 2401088, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8f17309b5e6b0dd44075947ce5e4283?s=128&d=identicon&r=PG", "display_name": "Pankaj Prakash", "link": "https://stackoverflow.com/users/2401088/pankaj-prakash"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "closed_date": 1440605068, "accepted_answer_id": 32231190, "answer_count": 2, "score": -3, "last_activity_date": 1440605066, "creation_date": 1440603883, "question_id": 32231088, "link": "https://stackoverflow.com/questions/32231088/float-value-input-error", "closed_reason": "Duplicate", "title": "Float value input error", "body": "<p>With working with floating point values I don't know why my C compiler or the System is behaving unexpectedly. Not making it so confusing. Here is a simple program to take float value input and print the same.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    float num;\n\n    printf(\"Enter float value \");\n    scanf(\"%f\", &amp;num);\n\n    printf(\"Value = %f\", num);\n\n    return 0;\n}\n</code></pre>\n\n<p>On multiple run of the same code giving me different and weird outputs. Here are some sample runs.</p>\n\n<p>Sample Run #1 <strong>Correct Output</strong></p>\n\n<blockquote>\n  <p>Enter float value 12.0312<br>\n  Value = 12.031200</p>\n</blockquote>\n\n<p>Sample Run #2 <strong>Incorrect and unexpected output</strong>  </p>\n\n<blockquote>\n  <p>Enter float value 324.123<br>\n  Value = 324.122986  </p>\n</blockquote>\n\n<p>Sample Run #3 <strong>Incorrect and unexpected output</strong></p>\n\n<blockquote>\n  <p>Enter float value 945.1234<br>\n  Value = 945.123413</p>\n</blockquote>\n\n<p>I don't know why the system is adding some garbage values at the end. I am using GNU GCC compiler in code::blocks.</p>\n"}, {"tags": ["c", "pointers", "struct", "garbage"], "comments": [{"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 3, "creation_date": 1440603561, "post_id": 32230945, "comment_id": 52344337, "body": "<code>sb-&gt;name.s = buf;</code> buf is on the stack you need to dup the string"}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1440603912, "post_id": 32230945, "comment_id": 52344601, "body": "<a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don&#39;t cast the return value of <code>malloc()</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 0, "last_activity_date": 1440603603, "creation_date": 1440603603, "answer_id": 32230987, "question_id": 32230945, "link": "https://stackoverflow.com/questions/32230945/c-programming-why-garbage-data-inside-my-struct/32230987#32230987", "title": "C programming - why garbage data inside my struct?", "body": "<pre><code>char buf[64]; \n</code></pre>\n\n<p>Here <code>buf</code> is local to function <code>addstud()</code> so once you exit the function this array is out of scope and accessing it will lead to undefined behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "is_accepted": true, "score": 2, "last_activity_date": 1440603666, "creation_date": 1440603666, "answer_id": 32231006, "question_id": 32230945, "link": "https://stackoverflow.com/questions/32230945/c-programming-why-garbage-data-inside-my-struct/32231006#32231006", "title": "C programming - why garbage data inside my struct?", "body": "<p>you can duplicate the buf.</p>\n\n<pre><code>sb-&gt;name.s = strdup(buf);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 2704183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/T85xb.jpg?s=128&g=1", "display_name": "osappuk", "link": "https://stackoverflow.com/users/2704183/osappuk"}, "edited": false, "score": 0, "creation_date": 1440605300, "post_id": 32231029, "comment_id": 52345548, "body": "Very detail and precise answer, thank you very much!"}], "tags": [], "owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "is_accepted": false, "score": -1, "last_activity_date": 1440603740, "creation_date": 1440603740, "answer_id": 32231029, "question_id": 32230945, "link": "https://stackoverflow.com/questions/32230945/c-programming-why-garbage-data-inside-my-struct/32231029#32231029", "title": "C programming - why garbage data inside my struct?", "body": "<pre><code>sb-&gt;name.s = buf;\n</code></pre>\n\n<p>In this, <code>buf</code> is a local variable to the function <code>addstud()</code>. So, when the function exits, accessing the variable is UB.</p>\n\n<p>You have 2 options,</p>\n\n<p>1)Either allot memory for <code>buf</code> using <code>malloc()</code></p>\n\n<p>2) Use <code>strcpy()</code> to copy the contents of the variable <code>buf</code> to <code>sb-&gt;name.s</code></p>\n"}], "owner": {"reputation": 41, "user_id": 2704183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/T85xb.jpg?s=128&g=1", "display_name": "osappuk", "link": "https://stackoverflow.com/users/2704183/osappuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 32231006, "answer_count": 3, "score": 0, "last_activity_date": 1440603740, "creation_date": 1440603483, "question_id": 32230945, "link": "https://stackoverflow.com/questions/32230945/c-programming-why-garbage-data-inside-my-struct", "title": "C programming - why garbage data inside my struct?", "body": "<p>I have the following program in C:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct str{\n    char * s;\n    int len;\n}string;\n\ntypedef struct stud{\n    unsigned int id;\n    string name;\n    char gender;\n}student;\n\nstudent* addstud(const int id, const char name[64], const char gender);\n\nstudent* addstud(void){\n    char buf[64]; \n    struct stud *sb;\n    sb = (struct stud*)malloc(sizeof(struct stud));\n\n    printf(\"Enter student ID:\\n\");\n    scanf(\"%d\",&amp;sb-&gt;id);\n\n    printf(\"Enter student name:\\n\");\n    scanf(\"%s\", buf);\n    sb-&gt;name.s = buf;\n    sb-&gt;name.len = (int)strlen(buf);\n\n    printf(\"Enter student gender:\\n\");\n    scanf(\" %c\", &amp;sb-&gt;gender);\n    printf(\"Student ID: %d, name: %s, gender: %c\\n\", sb-&gt;id, sb-&gt;name.s, sb-&gt;gender);\n\n    return sb;\n}\n\nint main(){\n    student *mystudent;\n    mystudent=addstud();\n    printf(\"Student ID: %d, name: %s, gender: %c\\n\", mystudent-&gt;id, mystudent-&gt;name.s, mystudent-&gt;gender);\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>In the <code>addstud()</code> function, everthing is fine but in <code>main()</code> when I try to print out the student name from <code>mystudent-&gt;name.s</code> it just garbage data. I don't understand why this could happened as it was clearly fine in <code>addstud()</code> function and both pointers point to the same memory address :( Could anyone please shred some light what I did wrong here, please? Thank you!</p>\n"}, {"tags": ["c", "unix", "pthreads", "posix", "freebsd"], "comments": [{"owner": {"reputation": 8374, "user_id": 3691891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcCUM.jpg?s=128&g=1", "display_name": "Arkadiusz Drabczyk", "link": "https://stackoverflow.com/users/3691891/arkadiusz-drabczyk"}, "edited": false, "score": 0, "creation_date": 1440602380, "post_id": 32230423, "comment_id": 52343498, "body": "Are you sure that <code>pstat_getproc</code> is a <code>Linux</code> syscall?"}, {"owner": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "edited": false, "score": 0, "creation_date": 1440631851, "post_id": 32230423, "comment_id": 52358852, "body": "Perhaps this is what you&#39;re looking for? <a href=\"https://www.freebsd.org/cgi/man.cgi?query=libprocstat&amp;sektion=3&amp;apropos=0&amp;manpath=FreeBSD%2010.0-RELEASE\" rel=\"nofollow noreferrer\">libprocstat</a>. Specifically, <code>procstat_getprocs</code>"}, {"owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "edited": false, "score": 0, "creation_date": 1528214986, "post_id": 32230423, "comment_id": 88418370, "body": "See also <a href=\"https://stackoverflow.com/questions/3475750/posix-api-call-to-list-all-the-pthreads-running-in-a-process\" title=\"posix api call to list all the pthreads running in a process\">stackoverflow.com/questions/3475750/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 2868331, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/00bc55580d8f4ac844642ad82e46a883?s=128&d=identicon&r=PG&f=1", "display_name": "user2868331", "link": "https://stackoverflow.com/users/2868331/user2868331"}, "edited": false, "score": 0, "creation_date": 1440621800, "post_id": 32235739, "comment_id": 52354974, "body": "Sorry, I should have clarified. I am not looking for a command line tool, I wish to do it programmatically in C."}, {"owner": {"reputation": 143, "user_id": 4352423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82c2d044a97cedc206e19f85e0570dbc?s=128&d=identicon&r=PG&f=1", "display_name": "xcah", "link": "https://stackoverflow.com/users/4352423/xcah"}, "reply_to_user": {"reputation": 313, "user_id": 2868331, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/00bc55580d8f4ac844642ad82e46a883?s=128&d=identicon&r=PG&f=1", "display_name": "user2868331", "link": "https://stackoverflow.com/users/2868331/user2868331"}, "edited": false, "score": 1, "creation_date": 1440680601, "post_id": 32235739, "comment_id": 52380701, "body": "@user2868331Look at /usr/src/usr.bin/procstat/procstat_threads.c."}], "tags": [], "owner": {"reputation": 143, "user_id": 4352423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82c2d044a97cedc206e19f85e0570dbc?s=128&d=identicon&r=PG&f=1", "display_name": "xcah", "link": "https://stackoverflow.com/users/4352423/xcah"}, "is_accepted": false, "score": 2, "last_activity_date": 1440619528, "creation_date": 1440619528, "answer_id": 32235739, "question_id": 32230423, "link": "https://stackoverflow.com/questions/32230423/list-all-threads/32235739#32235739", "title": "List all threads", "body": "<p>Use <code>procstat(1)</code>, <em>eg</em></p>\n\n<pre><code># procstat -t $(pgrep openvpn)\n  PID    TID COMM             TDNAME           CPU  PRI STATE   WCHAN    \n  537 100051 openvpn          -                  0  120 sleep   select \n</code></pre>\n\n<p>which depends on <code>libprocstat(3)</code>.</p>\n"}], "owner": {"reputation": 313, "user_id": 2868331, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/00bc55580d8f4ac844642ad82e46a883?s=128&d=identicon&r=PG&f=1", "display_name": "user2868331", "link": "https://stackoverflow.com/users/2868331/user2868331"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1440621841, "creation_date": 1440602075, "last_edit_date": 1440621841, "question_id": 32230423, "link": "https://stackoverflow.com/questions/32230423/list-all-threads", "title": "List all threads", "body": "<p>How can I list all threads within the current process in FreeBSD? Or at least, get the number of threads running.</p>\n\n<p>I found the Linux system call <code>pstat_getproc</code> which returns a struct containing <code>pst_nlwps</code>, the number of threads. I am looking for something similar to this on FreeBSD.</p>\n\n<p>Or perhaps there is something like <code>/dev/fd</code> but for threads.</p>\n\n<p>Anything I can use to get some kind of idea about how many other threads are running.</p>\n\n<p>I want to be able to do this programmatically in C, not using an existing application.</p>\n"}, {"tags": ["c", "menu", "buffer", "fgets"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1440602026, "post_id": 32230347, "comment_id": 52343258, "body": "1) <code>input[strlen(input) - 1]</code> is UB should <code>input[0] == &#39;\\0&#39;</code> - but I doubt that is at issue.  2) <code>readRestOfLine()</code> should be declared/defined before first use."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1440602143, "post_id": 32230347, "comment_id": 52343336, "body": "Always test <b>first</b> for EOF."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1440602168, "post_id": 32230347, "comment_id": 52343348, "body": "Code should check the retrun of <code>fgets(input, 3, stdin);</code> before using <code>input</code>."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1440603991, "post_id": 32230769, "comment_id": 52344667, "body": "Good catch on <code>fgets(stdin)</code>.  Certainly OP&#39;s compiler warning are not fully enabled."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1440604073, "post_id": 32230769, "comment_id": 52344736, "body": "Yes, I suppose I should have pointed that out.  But then you just have ;).  By the way, likewise on your comment about the undefined behavior."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 1, "last_activity_date": 1440605499, "last_edit_date": 1440605499, "creation_date": 1440603002, "answer_id": 32230769, "question_id": 32230347, "link": "https://stackoverflow.com/questions/32230347/fgets-and-readrestofline-errors/32230769#32230769", "title": "fgets and readRestOfLine errors", "body": "<blockquote>\n  <p>errors while creating a menu using fgets...  </p>\n</blockquote>\n\n<p>Regarding your code line:</p>\n\n<pre><code>while ((c = fgets(stdin)) != '\\n' &amp;&amp; c != EOF);  \n</code></pre>\n\n<p><code>fgets</code>, prototype is:<br>\n<code>char *fgets (char Line_Buffer[], int Number_of_Chars, FILE *Stream);</code>  </p>\n\n<blockquote>\n  <p>Reads characters from the specified input stream into a lineBuffer until end-of-file is encountered, a newline character is read, or (number_ofChars - 1) characters are read. The newline character is retained. An ASCII NUL byte is appended to the end of the string. If successful, the function returns a pointer to lineBuffer. </p>\n</blockquote>\n\n<p>you have only provided 1 of the 3 necessary arguments.</p>\n\n<p><strong><em>Example usage</em></strong>:</p>\n\n<pre><code>char buf[80];//line buffer with space for 80 char\nint c;\n\nwhile(fgets(buf, 80, stdin))\n{ \n    //do something with buf\n}  \n</code></pre>\n\n<p>Also, instead of using the line(s): (undefined behavior)  </p>\n\n<pre><code>if (input[strlen(input) - 1] != '\\n')  //used twice in your code example\n</code></pre>\n\n<p>Consider testing the contents of the string(s) like this:</p>\n\n<pre><code>if(strstr(input, \"\\n\"))//change the second argument to search for other values \n{\n     //do something\n}\n</code></pre>\n\n<p>Note that your first usage of fgets in the posted code is syntactically correct.  </p>\n"}], "owner": {"reputation": 37, "user_id": 4944188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71b6debb8e79e586f94df5b906de447d?s=128&d=identicon&r=PG&f=1", "display_name": "hohoho", "link": "https://stackoverflow.com/users/4944188/hohoho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "accepted_answer_id": 32230769, "answer_count": 1, "score": 1, "last_activity_date": 1440605499, "creation_date": 1440601849, "question_id": 32230347, "link": "https://stackoverflow.com/questions/32230347/fgets-and-readrestofline-errors", "title": "fgets and readRestOfLine errors", "body": "<p>I got errors while creating a menu using fgets and readrestofline function. I don't know where is the error coming from.  Am I missing something? After compiling, errors shows at \"fgets\", \"readrestofline\" and \"stdin\".</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint printMenu(void)\n{\n  int option;\n  char input[3];\n\n\nwhile((option != 3)||(option &lt; 4)||(option &gt; 0))\n{\n    printf(\"Welcome\\n\");\n    printf(\"---------------------\\n\");\n    printf(\"1.Play \\n2.Display Scores\\n3.Quit\\n\");\n    printf(\"Please enter your choice: \");\n\n\n    fgets(input, 3, stdin);\n\n\n    if (input[strlen(input) - 1] != '\\n')\n    {\n        printf(\"Input was too long.\\n\");\n        readRestOfLine();\n    }\n    else\n    {\n        input[strlen(input) - 1] = '\\0';\n    }\n\n\n    switch (option)\n    {\n        case 1:\n            printf(\"Loading ...\\n\");\n            break;\n        case 2:\n            printf(\"Loading ...\\n\");\n            break;\n        case 3:\n            printf(\"Quitting...\\n\");\n            exit(0);\n            break;\n        default:\n            printf(\"Invalid ! Please choose again.\\n\");\n            break;\n    }\n  }\n}\n\nvoid readRestOfLine()\n{\nint c;\n\n\n/*read until the end of the line or end-of-file*/\nwhile ((c = fgets(stdin)) != '\\n' &amp;&amp; c != EOF);\n\n/*clear the error and end-of-file flags*/\nclearerr(stdin);\n}\n</code></pre>\n"}, {"tags": ["c", "random", "struct", "probability"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440600345, "post_id": 32229742, "comment_id": 52341988, "body": "Do you know how to generate randomly one out of two numbers (say <code>0</code> or <code>1</code>)?"}, {"owner": {"reputation": 69, "user_id": 4866025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/019c889585904d8e157765cc0b7b6d9e?s=128&d=identicon&r=PG&f=1", "display_name": "SadJavaBoi", "link": "https://stackoverflow.com/users/4866025/sadjavaboi"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440600426, "post_id": 32229742, "comment_id": 52342055, "body": "using the rand() function?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440600865, "post_id": 32229742, "comment_id": 52342405, "body": "Note: do not write something like <code>(*human).name</code>. Use the arow operator <code>humans-&gt;name</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440600911, "post_id": 32229742, "comment_id": 52342441, "body": "@SadJavaBoi: <code>rand</code> does not guarantee a uniform distribution."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440601443, "post_id": 32229862, "comment_id": 52342826, "body": "Thanks, that was all I needed. +1"}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": false, "score": 1, "last_activity_date": 1440601319, "last_edit_date": 1440601319, "creation_date": 1440600555, "answer_id": 32229862, "question_id": 32229742, "link": "https://stackoverflow.com/questions/32229742/how-to-pick-assign-something-to-something-out-of-2-in-c/32229862#32229862", "title": "How to pick assign something to something out of 2 in C?", "body": "<p><code>rand</code> will return a random integer. Assuming it is uniformly distributed (which might not be true, as not guaranteed by every implementation), the number will be  odd or even with 50/50 chance. Using this fact:</p>\n\n<pre><code>if (rand() % 2)\n{\n    //Do the first thing\n}\nelse\n{\n    // Do the other one\n}\n</code></pre>\n\n<p>** Don't forget to seed the random number generator.</p>\n"}], "owner": {"reputation": 69, "user_id": 4866025, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/019c889585904d8e157765cc0b7b6d9e?s=128&d=identicon&r=PG&f=1", "display_name": "SadJavaBoi", "link": "https://stackoverflow.com/users/4866025/sadjavaboi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440601319, "creation_date": 1440600253, "question_id": 32229742, "link": "https://stackoverflow.com/questions/32229742/how-to-pick-assign-something-to-something-out-of-2-in-c", "title": "How to pick assign something to something out of 2 in C?", "body": "<p>so i have got a struct that goes:</p>\n\n<pre><code>enum input_result get_human_player(struct player* human)\n{\n    char playerName[NAMELEN];\n    printf(\"What is your name? \");\n    fgets(playerName, NAMELEN, stdin);\n    strcpy((*human).name, playerName);\n\n    (*human).type = HUMAN;\n    (*human).thiscolor = C_WHITE;\n    (*human).counters = 0;\n\n    return FAILURE;\n}\n</code></pre>\n\n<p>how do i make it so it randomly assigns it to either C_WHITE or C_RED with a 50/50 chance?</p>\n"}, {"tags": ["c++", "c", "char"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1440599906, "post_id": 32229562, "comment_id": 52341658, "body": "And conversion to char* should be conversion to char"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1440600081, "post_id": 32229562, "comment_id": 52341773, "body": "<code>unsigned char * num[3];</code> do you get what is type of <code>num</code> ?"}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1440600144, "post_id": 32229562, "comment_id": 52341823, "body": "Why not <code>printf(&quot;System Number: %c%c\\n&quot;, SYSTEM_N &gt;&gt; 8, SYSTEM_N &amp; 0x00FF);</code>?  Your <i>&quot;I need to...[use] %s&quot;</i> is just making it harder."}, {"owner": {"reputation": 453, "user_id": 1676310, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/297a413c1398566b772eebb399143cfd?s=128&d=identicon&r=PG", "display_name": "Jedi Engineer", "link": "https://stackoverflow.com/users/1676310/jedi-engineer"}, "reply_to_user": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1440600291, "post_id": 32229562, "comment_id": 52341950, "body": "@TonyD I was using %s, the output for char string format. This example is the short version of what I have. There&#39;s actually about 50 of these to output."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1440600490, "post_id": 32229562, "comment_id": 52342113, "body": "&quot;was using&quot; - fair enough - but it still seems to me that <code>%c%c</code> saves you copying first to an <code>unsigned char</code> array each time, and works out better.  If I were you and doing 50, I&#39;d use a macro ala <code>#define CC(N) N &gt;&gt; 8, N &amp; 0xFF</code> to add the <code>printf</code> arguments...."}, {"owner": {"reputation": 453, "user_id": 1676310, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/297a413c1398566b772eebb399143cfd?s=128&d=identicon&r=PG", "display_name": "Jedi Engineer", "link": "https://stackoverflow.com/users/1676310/jedi-engineer"}, "reply_to_user": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1440600647, "post_id": 32229562, "comment_id": 52342244, "body": "@TonyD - got the answer - see below. I put an extra pointer where it didn&#39;t belong."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1440600889, "post_id": 32229562, "comment_id": 52342425, "body": "Yes I know... same thing someone else posted here as a comment more than 15 minutes ago, then deleted for some reason.  Still doesn&#39;t make it easier than <code>%c%c</code>, but suit yourself."}, {"owner": {"reputation": 453, "user_id": 1676310, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/297a413c1398566b772eebb399143cfd?s=128&d=identicon&r=PG", "display_name": "Jedi Engineer", "link": "https://stackoverflow.com/users/1676310/jedi-engineer"}, "reply_to_user": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1441024326, "post_id": 32229562, "comment_id": 52497630, "body": "@TonyD - I need to convert it to char for something else too... not just this example."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 2, "last_activity_date": 1440600299, "creation_date": 1440600299, "answer_id": 32229766, "question_id": 32229562, "link": "https://stackoverflow.com/questions/32229562/convert-unsigned-short-to-char/32229766#32229766", "title": "Convert unsigned short to char", "body": "<p>You probably meant to write</p>\n\n<pre><code>unsigned char num[3];\n</code></pre>\n\n<p>as you have it, you declare an array holding three <code>char*</code> pointers.</p>\n\n<p>Also don't forget to set the closing NUL character, before printing:</p>\n\n<pre><code>num[2] = '\\0';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 5, "last_activity_date": 1440600901, "last_edit_date": 1440600901, "creation_date": 1440600386, "answer_id": 32229801, "question_id": 32229562, "link": "https://stackoverflow.com/questions/32229562/convert-unsigned-short-to-char/32229801#32229801", "title": "Convert unsigned short to char", "body": "<p>There are several errors: 1) array is too short, 2) defining the array as an array of pointers and 3) not terminating the string.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void)\n{\n    unsigned short system_m = 0x4142;\n    unsigned short system_n = 0x432D;\n    unsigned char num[5];\n\n    num[0] = system_m &gt;&gt; 8;\n    num[1] = system_m &amp; 0xFF;\n    num[2] = system_n &gt;&gt; 8;\n    num[3] = system_n &amp; 0xFF;\n    num[4] = '\\0';\n    printf(\"System Number: %s \\r\\n\", num);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>EDIT</strong> alternatively if you don't want to keep the string, just display the information with this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void)\n{\n    unsigned short system_m = 0x4142;\n    unsigned short system_n = 0x432D;\n    printf(\"System Number: %c%c%c%c \\r\\n\",\n           system_m &gt;&gt; 8, system_m &amp; 0xFF, system_n &gt;&gt; 8, system_n &amp; 0xFF);\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>System Number: ABC-\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 791, "user_id": 4607488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PikId.png?s=128&g=1", "display_name": "MC93", "link": "https://stackoverflow.com/users/4607488/mc93"}, "is_accepted": false, "score": 0, "last_activity_date": 1440601445, "last_edit_date": 1440601445, "creation_date": 1440600860, "answer_id": 32229989, "question_id": 32229562, "link": "https://stackoverflow.com/questions/32229562/convert-unsigned-short-to-char/32229989#32229989", "title": "Convert unsigned short to char", "body": "<p>A general solution might be something like this, assuming <code>ushort_arr</code> contains the <code>unsigned short</code>s in an array and <code>ushort_arr_size</code> indicates its size.</p>\n\n<pre><code>char *str = malloc(ushort_arr_size * 2 + 1); \n// check if str == NULL\n\nint j = 0;\nfor (int i = 0; i &lt; ushort_arr_size; i++) {\n    str[j++] = ushort_arr[i] &gt;&gt; 8;\n    str[j++] = ushort_arr[i];\n}\nstr[j] = '\\0';\n\nprintf(\"string is: %s\\n\", str);\n\nfree(str);\n</code></pre>\n\n<p>Though perhaps this might be more effective without the memory management, if you only want to print it once:</p>\n\n<pre><code>for (int i = 0, j = 0; i &lt; ushort_arr_size; i++) {\n    putchar(ushort_arr[i] &gt;&gt; 8);\n    putchar(ushort_arr[i] &amp; 0xFF);\n}\n</code></pre>\n"}], "owner": {"reputation": 453, "user_id": 1676310, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/297a413c1398566b772eebb399143cfd?s=128&d=identicon&r=PG", "display_name": "Jedi Engineer", "link": "https://stackoverflow.com/users/1676310/jedi-engineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16169, "favorite_count": 2, "accepted_answer_id": 32229766, "answer_count": 3, "score": 1, "last_activity_date": 1440601445, "creation_date": 1440599779, "question_id": 32229562, "link": "https://stackoverflow.com/questions/32229562/convert-unsigned-short-to-char", "title": "Convert unsigned short to char", "body": "<p>I know there's other posts like this but I think mine is different. I have a group of numbers I wish to display. However, it's saved as unsigned short. As it's given to me from a network buffer, all my data is unsigned short format. So for a serial number starting with \"ABC-\" the two unsigned shorts will be holding 0x4142 and 0x432D (Already in ASCII format). I need to convert those to type char to display using printf and %s, but for the rest of my system, they need to remain as an unsigned short. This is what I've tried so far, but the output is blank:</p>\n\n<pre><code>unsigned char * num[3];\n\nnum[0] = (unsigned char*)(SYSTEM_N &gt;&gt; 8);\nnum[1] = (unsigned char*)(SYSTEM_N &amp; 0x00FF);\nprintf(\"System Number: %s \\r\\n\", num);\n</code></pre>\n\n<p>Can anyone shed some light on this for me? Thanks!</p>\n"}, {"tags": ["c", "pointers", "reference"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1440599692, "post_id": 32229494, "comment_id": 52341531, "body": "To start with, you <i>do</i> know that array indexes in C starts at zero? So the index of the <code>&#39;W&#39;</code> in <code>&quot;Hello World&quot;</code> is 6. Although you would notice that very quickly with this program after fixing the syntax."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1440599864, "post_id": 32229494, "comment_id": 52341634, "body": "Also, arrays and pointers are very often interchangeable, and you can use array indexing syntax to access elements when using pointer, as well as using an array as a pointer."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1440600075, "post_id": 32229494, "comment_id": 52341767, "body": "<code>memcpy(&amp;code[6], &quot;Wales&quot;, 5);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 78442, "user_id": 202009, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/31dcfef154edd75223ae28f2cfd77f71?s=128&d=identicon&r=PG", "display_name": "Andy Thomas", "link": "https://stackoverflow.com/users/202009/andy-thomas"}, "is_accepted": false, "score": 2, "last_activity_date": 1440600116, "last_edit_date": 1440600116, "creation_date": 1440599677, "answer_id": 32229535, "question_id": 32229494, "link": "https://stackoverflow.com/questions/32229494/how-can-i-replace-characters-in-a-string-using-a-pointer-in-c-code/32229535#32229535", "title": "How can I replace characters in a string using a pointer? (in c code)", "body": "<p>You can specify a zero-based array index:</p>\n\n<pre><code>   code[6] = 'W';    \n   code[7] = 'a';\n   code[8] = 'l';\n   code[9] = 'e';\n   code[10] = 's';\n</code></pre>\n\n<p>Character literals are specified with single quotes rather than double.</p>\n\n<p>The array variable is a synonym for the address of the first element. If you specifically want to use pointer syntax, you can replace <code>code[i]</code> with <code>*(code + i)</code>. For example:</p>\n\n<pre><code>   *(code + 6) = 'W';    \n   *(code + 7) = 'a';\n   *(code + 8) = 'l';\n   *(code + 9) = 'e';\n   *(code + 10) = 's';\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 4241116, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1607c6cde39172eee62cdc205b1e2550?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Roberts", "link": "https://stackoverflow.com/users/4241116/sam-roberts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1560, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440600116, "creation_date": 1440599529, "question_id": 32229494, "link": "https://stackoverflow.com/questions/32229494/how-can-i-replace-characters-in-a-string-using-a-pointer-in-c-code", "title": "How can I replace characters in a string using a pointer? (in c code)", "body": "<p>How can I replace characters in a string using a pointer?  (in c code)</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nunsigned char code[] = \"Hello world!\\n\";\nmain()\n{\n\n        printf(\"String Length:  %d\\n\", strlen(code));\n        printf(\"Original String: %s\\n\", code);\n\n        char &amp;code[7] = \"W\";    \n        char &amp;code[8] = \"a\";\n        char &amp;code[9] = \"l\";\n        char &amp;code[10] = \"e\";\n        char &amp;code[11] = \"s\";\n\n        printf(\"New String: %s\\n\", code);\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 3687, "user_id": 1344461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04022165e5380a8ab69f0de5eb9c5d4c?s=128&d=identicon&r=PG", "display_name": "C0deH4cker", "link": "https://stackoverflow.com/users/1344461/c0deh4cker"}, "edited": false, "score": 0, "creation_date": 1440602603, "post_id": 32229471, "comment_id": 52343656, "body": "First of all, <b>NEVER</b> write anything like <code>scanf(&quot;%s&quot;, ...)</code>. That will read as many non-whitespace characters as the user enters into your array, which is not infinitely large. If your name array is 10 characters long and the user enters a 20 character word, then your program will crash or worse. By worse I mean a malicious user could take control of your program and run their own code, in this case as a trivial stack-based buffer overflow. The proper way to read in user input as strings is using <code>fgets()</code>. Replace your code with <code>fgets(name, sizeof(name), stdin);</code>. That will read a line."}, {"owner": {"reputation": 165, "user_id": 4824993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/RBt6B.jpg?s=128&g=1", "display_name": "Ducol", "link": "https://stackoverflow.com/users/4824993/ducol"}, "reply_to_user": {"reputation": 3687, "user_id": 1344461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04022165e5380a8ab69f0de5eb9c5d4c?s=128&d=identicon&r=PG", "display_name": "C0deH4cker", "link": "https://stackoverflow.com/users/1344461/c0deh4cker"}, "edited": false, "score": 0, "creation_date": 1440603126, "post_id": 32229471, "comment_id": 52344037, "body": "Thank you. I am at the very first step of learning programming. I still have to learn functions you suggest. Happy to do that. Do I understand correctly that in case I use scanf I should alway restrict the number of possible entries, as I did with name[40]?"}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 4824993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/RBt6B.jpg?s=128&g=1", "display_name": "Ducol", "link": "https://stackoverflow.com/users/4824993/ducol"}, "edited": false, "score": 0, "creation_date": 1440603302, "post_id": 32229530, "comment_id": 52344147, "body": "Thank you. I wanted to use initially undefined array because no one knows how long names can be :) But negative values like -xxxx seem to be irrelevant - I am using char variables, not numbers; is it possible for programs to get negative chars?"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "reply_to_user": {"reputation": 165, "user_id": 4824993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/RBt6B.jpg?s=128&g=1", "display_name": "Ducol", "link": "https://stackoverflow.com/users/4824993/ducol"}, "edited": false, "score": 0, "creation_date": 1440604307, "post_id": 32229530, "comment_id": 52344906, "body": "@Ducol <code>s</code> is not a char, it&#39;s an <code>int</code>, so it can be negative. The ISO C Standard says that the signedness of the <code>char</code> type is implementation-defined, so yes, there can be <code>char</code> values that are less than zero if that implementation has a signed <code>char</code> type."}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 2, "last_activity_date": 1440600055, "last_edit_date": 1440600055, "creation_date": 1440599639, "answer_id": 32229530, "question_id": 32229471, "link": "https://stackoverflow.com/questions/32229471/char-array-with-scanf-nonrestricted-char-array-doesnt-give-correct-result/32229530#32229530", "title": "char array with scanf: nonrestricted char array doesn&#39;t give correct result", "body": "<pre><code> int i, s;\n char name[s];\n</code></pre>\n\n<p>This is <strong>undefined behavior</strong> (in ISO C lingo; <em>anything</em> may happen, even something you might expect), since <code>s</code> is not initialized. Unlike the wording of your question suggests, an uninitialized variable as the array size does <strong>not</strong> mean <strong>nonrestricted size</strong>. It means <em>program bug</em>. :-)</p>\n\n<p><code>s</code> might happen to be 0 or 10 or -136186732, so you might or might not have a character array big enough to store some characters.</p>\n\n<p>It will start working again with</p>\n\n<pre><code> int i, s = 40;\n</code></pre>\n\n<p>To clarify, C does <em>not</em> have automatically growing or self-adapting arrays. If you need to allocate or resize arrays at run-time, you need to use <code>malloc()</code> and <code>realloc()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 165, "user_id": 4824993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/RBt6B.jpg?s=128&g=1", "display_name": "Ducol", "link": "https://stackoverflow.com/users/4824993/ducol"}, "edited": false, "score": 0, "creation_date": 1440603350, "post_id": 32229567, "comment_id": 52344180, "body": "I am happy that I know why :) because it all starts from 0, hence 0 - 39 will be 40 chars. As to name [s], that was my goal. Given it is an incorrect approach, I am trying to find a way (if it exists) not to restrict the amount of letters entered by the user."}, {"owner": {"reputation": 1301, "user_id": 3339818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVVg1.jpg?s=128&g=1", "display_name": "surajs1n", "link": "https://stackoverflow.com/users/3339818/surajs1n"}, "reply_to_user": {"reputation": 165, "user_id": 4824993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/RBt6B.jpg?s=128&g=1", "display_name": "Ducol", "link": "https://stackoverflow.com/users/4824993/ducol"}, "edited": false, "score": 0, "creation_date": 1440604964, "post_id": 32229567, "comment_id": 52345343, "body": "Yes, there is an approach but is bit complex. check this out <a href=\"http://stackoverflow.com/questions/16870485/how-can-i-read-an-input-string-of-unknown-length\" title=\"how can i read an input string of unknown length\">stackoverflow.com/questions/16870485/&hellip;</a>. Here , file name is <code>stdin</code> means it is taking input from the console instead of any file."}], "tags": [], "owner": {"reputation": 1301, "user_id": 3339818, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVVg1.jpg?s=128&g=1", "display_name": "surajs1n", "link": "https://stackoverflow.com/users/3339818/surajs1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1440600226, "last_edit_date": 1440600226, "creation_date": 1440599804, "answer_id": 32229567, "question_id": 32229471, "link": "https://stackoverflow.com/questions/32229471/char-array-with-scanf-nonrestricted-char-array-doesnt-give-correct-result/32229567#32229567", "title": "char array with scanf: nonrestricted char array doesn&#39;t give correct result", "body": "<p>See in your first version you didn't specify the size of the character array and you left it as <code>name[s]</code>, where <code>s</code> is an integer initialized with garbage value.</p>\n\n<p>Whereas, in the second case you made it as <code>name[40]</code> which <em>technically speaking</em> can hold up-to <strong>39 characters</strong> long string. (39. Think <strong>Why???</strong>)</p>\n"}], "owner": {"reputation": 165, "user_id": 4824993, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/RBt6B.jpg?s=128&g=1", "display_name": "Ducol", "link": "https://stackoverflow.com/users/4824993/ducol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1440602144, "creation_date": 1440599451, "last_edit_date": 1440602144, "question_id": 32229471, "link": "https://stackoverflow.com/questions/32229471/char-array-with-scanf-nonrestricted-char-array-doesnt-give-correct-result", "title": "char array with scanf: nonrestricted char array doesn&#39;t give correct result", "body": "<p>Below is a program that asks the user\nto type in a <strong>name</strong>, and then prints out the <em>name one letter\nat a time</em>, eventually producing the whole name. \nI have two versions of the program. The one below\ndoes a strange thing: if I type in something like\n<code>jkljljkliunionnklsaa</code> , it will produce only <code>jkljljkl</code>.</p>\n\n<p>But if I restrict <code>char name[40]</code>, and then type in the same <strong>name</strong>, the program shows the whole name. \nWhat have I done wrong in the program that doesn't allow it to produce the whole name?</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n\n    int main (void)\n    {\n        int i, s;\n        char name[s];\n\n        printf (\"Type a name:  \");\n        scanf (\"%s\", name);\n\n        for ( i = 0; i &lt; strlen(name); i++)\n        {\n            printf (\"%c\", name[i]); // print the i-th character of name\n        }\n        printf(\"\\n\");\n     }\n</code></pre>\n"}, {"tags": ["c++", "c", "opencv", "visual-studio-debugging"], "answers": [{"comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1440599307, "post_id": 32229217, "comment_id": 52341268, "body": "Agreed. Even though you can probably generate a Visual Studio project for CurveMatching using CMake this include will have to be adjusted at minimum since it uses a POSIX path which will not work with Visual Studio."}], "tags": [], "owner": {"reputation": 4368, "user_id": 2352158, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/91cd5bff136b9c7608cf986ca729e19a?s=128&d=identicon&r=PG", "display_name": "coincoin", "link": "https://stackoverflow.com/users/2352158/coincoin"}, "is_accepted": true, "score": 2, "last_activity_date": 1440598731, "creation_date": 1440598731, "answer_id": 32229217, "question_id": 32228959, "link": "https://stackoverflow.com/questions/32228959/when-i-run-the-code-of-curve-matching-error-comes/32229217#32229217", "title": "When i run the code of curve matching,error comes", "body": "<p><a href=\"http://eigen.tuxfamily.org\" rel=\"nofollow\">Eigen</a> is a C++ library for linear algebra that you need to install and include the correct headers.<br>\nThe source code seems to target Linux. <code>/usr/local/include/eigen3/Eigen/Eigen</code> implies a unix path.<br>\nYou are on Windows, that won't work. you have to modify the code to work.  </p>\n"}], "owner": {"reputation": 117, "user_id": 4923117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/81228935cf84776e6f91c9c65d5d2074?s=128&d=identicon&r=PG&f=1", "display_name": "GKG DTH", "link": "https://stackoverflow.com/users/4923117/gkg-dth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 32229217, "answer_count": 1, "score": -4, "last_activity_date": 1440598731, "creation_date": 1440598059, "question_id": 32228959, "link": "https://stackoverflow.com/questions/32228959/when-i-run-the-code-of-curve-matching-error-comes", "title": "When i run the code of curve matching,error comes", "body": "<p>I run the code on this page,<a href=\"https://github.com/royshil/CurveMatching\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n\n<p>some error comes.</p>\n\n<ol>\n<li>First,\"#include \" and \"#include \"/usr/local/include/eigen3/Eigen/Eigen\"\n\" is necesary in the file std.h?I can not find these included file.</li>\n<li>Second,when i comment out the code lines \"#include \" and \"#include \"/usr/local/include/eigen3/Eigen/Eigen\",then i run the code,many error comes,as follow<a href=\"https://i.stack.imgur.com/bhj9Y.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bhj9Y.jpg\" alt=\"enter image description here\"></a></li>\n</ol>\n\n<p>I tried,but failed,can someone help me?Thanks in advands!</p>\n"}, {"tags": ["c", "string", "json-c"], "comments": [{"owner": {"reputation": 3008, "user_id": 2209329, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e62709eac24c8a174c5f876e1cb63b39?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Szyd\u0142owski", "link": "https://stackoverflow.com/users/2209329/micha%c5%82-szyd%c5%82owski"}, "edited": false, "score": 0, "creation_date": 1440598029, "post_id": 32228886, "comment_id": 52340225, "body": "Can you show your includes?"}], "answers": [{"comments": [{"owner": {"reputation": 11768, "user_id": 2274686, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/z3EDW.jpg?s=128&g=1", "display_name": "vdenotaris", "link": "https://stackoverflow.com/users/2274686/vdenotaris"}, "edited": false, "score": 0, "creation_date": 1440599912, "post_id": 32229174, "comment_id": 52341662, "body": "Hi. Thanks for the answer. Just to understand: why in the case <code>1</code> or <code>2</code> everything seems work fine?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 11768, "user_id": 2274686, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/z3EDW.jpg?s=128&g=1", "display_name": "vdenotaris", "link": "https://stackoverflow.com/users/2274686/vdenotaris"}, "edited": false, "score": 1, "creation_date": 1440600061, "post_id": 32229174, "comment_id": 52341760, "body": "@vdenotaris That&#39;s the thing with <i>undefined behavior</i>, sometimes it might <i>seem</i> to work, when in reality there&#39;s probably something bad happening that you just don&#39;t notice (yet)."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1440598620, "creation_date": 1440598620, "answer_id": 32229174, "question_id": 32228886, "link": "https://stackoverflow.com/questions/32228886/json-parsing-and-string-management-in-c/32229174#32229174", "title": "Json parsing and string management in C", "body": "<p>That error message is a debugger error message, because it's in a function which it can't locate source to. The only thing you need to do is to walk up the function call stack until you reach your code.</p>\n\n<p>As for <em>why</em> the debugger stops in that function, that's really should be another question, but I'll answer it anyway: It's because of <em>undefined behavior</em> because the destination pointer you pass to it is an uninitialized local variable: <code>display_name</code>. In the code where you call <code>get_display_name</code> you declare the local variable <code>display_name</code>, but you don't initialize it. The value of uninitialized non-static local variable is <em>indeterminate</em>, and using them without initialization leads to undefined behavior.</p>\n\n<p>You have basically two solutions to this problem: Either declare <code>display_name</code> as an array of a fixed size, or use make it point to valid allocated memory, for example by using <code>malloc</code>.</p>\n\n<p>You will also have the same problem with the <code>organization</code> variable.</p>\n"}], "owner": {"reputation": 11768, "user_id": 2274686, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/z3EDW.jpg?s=128&g=1", "display_name": "vdenotaris", "link": "https://stackoverflow.com/users/2274686/vdenotaris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 517, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440598620, "creation_date": 1440597819, "question_id": 32228886, "link": "https://stackoverflow.com/questions/32228886/json-parsing-and-string-management-in-c", "title": "Json parsing and string management in C", "body": "<p>Considering the following functions:</p>\n\n<pre><code>int get_timestamp(json_object *json_obj, double *timestamp) {\n    json_object *value_obj;\n    int status;\n    if (json_object_object_get_ex(json_obj, \"timestamp\", &amp;value_obj)) {\n        if (json_object_is_type(value_obj, json_type_double)) {\n            *timestamp = json_object_get_double(value_obj);\n            status = JSONPARSER_OK;\n        }\n        else\n            status = JSONPARSER_EBADTYPE;\n    } else\n        status = JSONPARSER_ENODENOTFOUND;\n    free(value_obj);\n    return status;\n}\n\nint get_display_name(json_object *json_obj, char **display_name) {\n    json_object *value_obj;\n    int status;\n    const char* holder;\n    if (json_object_object_get_ex(json_obj, \"display_name\", &amp;value_obj)) {\n        if (json_object_is_type(value_obj, json_type_string)) {\n            // The returned string memory is managed by the json_object and will\n            // be freed when the reference count of the json_object drops to zero.\n            holder = json_object_get_string(value_obj);\n            strcpy(*display_name, holder);\n            status = JSONPARSER_OK;\n        }\n        else\n            status = JSONPARSER_EBADTYPE;\n    } else\n        status = JSONPARSER_ENODENOTFOUND;\n    free(value_obj);\n    return status;\n}\n\nint get_organization(json_object *json_obj, char **organization) {\n    json_object *value_obj;\n    int status;\n    const char* holder;\n    if (json_object_object_get_ex(json_obj, \"organization\", &amp;value_obj)) {\n        if (json_object_is_type(value_obj, json_type_string)) {\n            // The returned string memory is managed by the json_object and will\n            // be freed when the reference count of the json_object drops to zero.\n            holder = json_object_get_string(value_obj);\n            strcpy(*organization, holder);\n            status = JSONPARSER_OK;\n        }\n        else\n            status = JSONPARSER_EBADTYPE;\n    } else\n        status = JSONPARSER_ENODENOTFOUND;\n    free(value_obj);\n    return status;\n}\n</code></pre>\n\n<p>Used as:</p>\n\n<pre><code>json_object *response_obj, *idp_obj;\nint status;\nchar *display_name;\nchar *organization;\nresponse_obj = json_tokener_parse(raw_data);\njson_object_object_get_ex(response_obj, \"idp\", &amp;idp_obj);\n\nget_timestamp(response_obj, timestamp);\nget_display_name(idp_obj, &amp;display_name);\nget_organization(idp_obj, &amp;organization);\n\nfree(idp_obj);\nfree(response_obj);\nreturn status;\n</code></pre>\n\n<p>What happens:</p>\n\n<p>1) by removing <code>get_organization(idp_obj, &amp;organization);</code> everything seems work fine;</p>\n\n<p>2) by removing <code>get_display_name(idp_obj, &amp;display_name);</code> everything seems work fine again;</p>\n\n<p>3) with the code \"as is\", there is an error on the <code>strcpy</code> used inside the method <code>get_organization</code>:</p>\n\n<pre><code>No source available for \"__strcpy_sse2_unaligned() at 0x7ffff763f001\" \n</code></pre>\n\n<p>I would really like to understand this behavior in order to improve my knowledge in this amazing but hard languages.</p>\n"}, {"tags": ["c++", "c", "macos", "debugging", "lldb"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1440597496, "post_id": 32228597, "comment_id": 52339805, "body": "Source code debugging is different from availability of symbols. Try: <a href=\"http://lldb.llvm.org/remote.html\" rel=\"nofollow noreferrer\">lldb.llvm.org/remote.html</a>"}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1440599166, "post_id": 32228597, "comment_id": 52341148, "body": "@jxh : I don&#39;t need remote debugging as I&#39;m capable of logging to the remote machine and attach the lldb to a running process. the only problem is lack of debugging info"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1440599639, "post_id": 32228597, "comment_id": 52341492, "body": "Remote debugging might be an easier solution than copying your source code around."}], "answers": [{"comments": [{"owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "edited": false, "score": 0, "creation_date": 1441244366, "post_id": 32320603, "comment_id": 52603610, "body": "To be clear, the above description only applies to building programs on OS X."}], "tags": [], "owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "is_accepted": true, "score": 1, "last_activity_date": 1441058323, "creation_date": 1441058323, "answer_id": 32320603, "question_id": 32228597, "link": "https://stackoverflow.com/questions/32228597/debugging-process-that-compiled-in-remote-machine/32320603#32320603", "title": "debugging process that compiled in remote machine", "body": "<p>In the normal build/debug cycle lldb reads debug information from the .o files made in the course of the build.  There's a \"debug map\" in the binary produce that points to the locations of these .o files.  Since the debug map records absolute paths, if you want to use the .o files on another machine the .o files must appear in the same place on the file system as they are on the builder.</p>\n\n<p>The other way to do this is to use Xcode's \"DWARF + dSYM\" variant of debug info generation, which builds a \".dSYM\" folder that contains fully linked debug information.  Then just move the dSYM &amp; the binary to the same directory and lldb will find it.  If for some reason that doesn't work, there is also an lldb command: <code>add-dsym</code> that you can use to manually tell lldb where the dSYM is.</p>\n"}], "owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 32320603, "answer_count": 1, "score": 1, "last_activity_date": 1441058323, "creation_date": 1440597150, "question_id": 32228597, "link": "https://stackoverflow.com/questions/32228597/debugging-process-that-compiled-in-remote-machine", "title": "debugging process that compiled in remote machine", "body": "<p>I compiled Xcode project in debug mode. however, while running it from VM with lldb (or any other remote machine), I cannot see any debug symbols. </p>\n\n<p>to resolve this I've created a soft link to the project source code in local compilation machine, so that each file will have the same path. </p>\n\n<p>however, unlike local VM, in remote machine i might not have source code access. </p>\n\n<p>so my question is what files should i copy from project debug outputs in compilation machine, to remote machine so that the lldb debugger will recognize target symbols, and how should i \"tell\" lldb to look at those new data, rather than the original symbols location (in compilation machine)  </p>\n"}, {"tags": ["c", "linux", "linker", "ld", "aix"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1440595510, "post_id": 32227670, "comment_id": 52338285, "body": "Documentation is here: <a href=\"https://gcc.gnu.org/onlinedocs/gcc/\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc</a>"}, {"owner": {"reputation": 243, "user_id": 5218609, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9e44b9545e752299956f515b6eb1a426?s=128&d=identicon&r=PG&f=1", "display_name": "Grv", "link": "https://stackoverflow.com/users/5218609/grv"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1440598995, "post_id": 32227670, "comment_id": 52341014, "body": "found --dynamic-list=stx_export but i am not able to find the format of dynamic list file. i tried  global:TPCALL; global:TPACALL; but it gave the error  syntax error in dynamic list"}], "answers": [{"comments": [{"owner": {"reputation": 243, "user_id": 5218609, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9e44b9545e752299956f515b6eb1a426?s=128&d=identicon&r=PG&f=1", "display_name": "Grv", "link": "https://stackoverflow.com/users/5218609/grv"}, "edited": false, "score": 0, "creation_date": 1440675247, "post_id": 32229940, "comment_id": 52376883, "body": "Hey thanks for this option. but when i used this option at the time of linking ..i think it is only considering the symbols that are in the file...not corresponding the symbols linked."}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "reply_to_user": {"reputation": 243, "user_id": 5218609, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9e44b9545e752299956f515b6eb1a426?s=128&d=identicon&r=PG&f=1", "display_name": "Grv", "link": "https://stackoverflow.com/users/5218609/grv"}, "edited": false, "score": 0, "creation_date": 1440675384, "post_id": 32229940, "comment_id": 52376980, "body": "Couldn&#39;t say I understand your problem... What command did you try, what result did you expect, and what happened instead?"}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 1, "creation_date": 1440734662, "post_id": 32229940, "comment_id": 52405617, "body": "@LorinczyZsigmond As far as I can tell, <code>--retain-symbols-file</code> does absolutely <i>nothing</i> when linking a shared library."}], "tags": [], "owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "is_accepted": false, "score": 1, "last_activity_date": 1440753887, "last_edit_date": 1440753887, "creation_date": 1440600727, "answer_id": 32229940, "question_id": 32227670, "link": "https://stackoverflow.com/questions/32227670/corresponding-option-for-linker-in-linux/32229940#32229940", "title": "Corresponding option for linker in linux", "body": "<p>There is a <strong>-retain-symbols-file</strong> option in GNU ld:</p>\n\n<pre><code>AIX: -Wl,-bE:something.exp\nGNU: -Wl,--retain-symbols-file=something.exp\n</code></pre>\n\n<p>Edit: As Employed Russian pointed out, when creating a shared lib, ld doesn't honor this file. Thank you, Employed Russian.</p>\n\n<p>Note: if we use libtool with option <strong>-export-symbols</strong> it uses options like -Wl,-version-script -Wl,.libs/libfoo.ver, where libfoo.ver is created from the export file automagically:</p>\n\n<pre><code>{ global:\nconst_var2ptr;\nconst_var2ptr2;\ninit_var;\nlt_libaix_modcall_LTX_preloaded_symbols;\nuninit_var;\nvar2ptr;\nvartest2_fun;\nvartest_fun;\nlocal: *; };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 1, "last_activity_date": 1440734081, "last_edit_date": 1495540329, "creation_date": 1440734081, "answer_id": 32263076, "question_id": 32227670, "link": "https://stackoverflow.com/questions/32227670/corresponding-option-for-linker-in-linux/32263076#32263076", "title": "Corresponding option for linker in linux", "body": "<p>The standard way to achieve this on Linux is with a version script. This <a href=\"https://stackoverflow.com/a/452955/50617\">answer</a> provides details.</p>\n"}], "owner": {"reputation": 243, "user_id": 5218609, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9e44b9545e752299956f515b6eb1a426?s=128&d=identicon&r=PG&f=1", "display_name": "Grv", "link": "https://stackoverflow.com/users/5218609/grv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1440753887, "creation_date": 1440594853, "last_edit_date": 1440595924, "question_id": 32227670, "link": "https://stackoverflow.com/questions/32227670/corresponding-option-for-linker-in-linux", "title": "Corresponding option for linker in linux", "body": "<p>With IBM's <code>ld</code> linker there is one option <code>-bexport :filename</code>.</p>\n\n<p>In this file we have the names of the functions we need to export at the time of linking.</p>\n\n<p>But in ubuntu I am not able to find this and it gives following error\n<code>/usr/bin/ld: invalid BFD target `export:stx_export'</code></p>\n\n<p>Please suggest what can I do in ubuntu to export such files at the time of linking. Thanks in advance.</p>\n"}, {"tags": ["java", "c", "java-native-interface"], "comments": [{"owner": {"reputation": 2430, "user_id": 2546626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24bee02c79f348081ac9e14edc982a0d?s=128&d=identicon&r=PG", "display_name": "Youka", "link": "https://stackoverflow.com/users/2546626/youka"}, "edited": false, "score": 0, "creation_date": 1440598093, "post_id": 32227515, "comment_id": 52340273, "body": "You took a look at <a href=\"http://stackoverflow.com/questions/28403852/jvm-crash-due-to-sigsegv\">this</a>?"}, {"owner": {"reputation": 630, "user_id": 3414468, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b4cd892f81cb0b0ac53e7b2ce3699718?s=128&d=identicon&r=PG&f=1", "display_name": "Man&#231;aux Pierre-Alexandre", "link": "https://stackoverflow.com/users/3414468/man%c3%a7aux-pierre-alexandre"}, "reply_to_user": {"reputation": 2430, "user_id": 2546626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24bee02c79f348081ac9e14edc982a0d?s=128&d=identicon&r=PG", "display_name": "Youka", "link": "https://stackoverflow.com/users/2546626/youka"}, "edited": false, "score": 0, "creation_date": 1440658782, "post_id": 32227515, "comment_id": 52366567, "body": "yes i find 2 or 3 subject about this on stack overflow but no one explain clairly long double restrict. all subject give solution to try to resole the segfault problem, but it s too generic, me i want to understand the root cause before test all the different way. And finally i have add log in the fortran code, and i see that a value in many case is 1 and for any reason this value become &#39;1078334587&#39; i think it was a value in memory that is not reinitialize. but with this i think problem is that the value is bigger than the object and cause sigsev."}], "answers": [{"tags": [], "owner": {"reputation": 630, "user_id": 3414468, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b4cd892f81cb0b0ac53e7b2ce3699718?s=128&d=identicon&r=PG&f=1", "display_name": "Man&#231;aux Pierre-Alexandre", "link": "https://stackoverflow.com/users/3414468/man%c3%a7aux-pierre-alexandre"}, "is_accepted": true, "score": 0, "last_activity_date": 1441099182, "creation_date": 1441099182, "answer_id": 32327843, "question_id": 32227515, "link": "https://stackoverflow.com/questions/32227515/error-in-java-jni-native/32327843#32327843", "title": "Error in java jni native", "body": "<p>finaly the problem here was a non-initialized variable in fortran! The variable took the value in memory and say \"long double restrict\" and send SIGSEV signal. I have initialize the value and all work fine now. to find this problem, because its not my code, i put write in it to show me where is the problem.</p>\n\n<p>And this explain why the program work fine randomly.</p>\n"}], "owner": {"reputation": 630, "user_id": 3414468, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b4cd892f81cb0b0ac53e7b2ce3699718?s=128&d=identicon&r=PG&f=1", "display_name": "Man&#231;aux Pierre-Alexandre", "link": "https://stackoverflow.com/users/3414468/man%c3%a7aux-pierre-alexandre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "accepted_answer_id": 32327843, "answer_count": 1, "score": 1, "last_activity_date": 1441099182, "creation_date": 1440594420, "last_edit_date": 1440659461, "question_id": 32227515, "link": "https://stackoverflow.com/questions/32227515/error-in-java-jni-native", "title": "Error in java jni native", "body": "<p>I have a Fortran code  that my client give me many month ago, we have done C implementation (JNI) with declaration of Fortran as an extern method and then we can call fortran from C and now we can call C from JAVA.</p>\n\n<p>It work very well (almost :))  in fact in 1 of 8 library, sometime we have a segfault with </p>\n\n<pre><code>Stack: [0x00007f1ea63fc000,0x00007f1ea6afd000],  sp=0x00007f1ea6af8f30,  free space=7155k\nNative frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\nC  [libCMordor.so+0x5240]  long double restrict+0xcac\nC  [libCMordor.so+0x1f84]  unsigned long+0xbc8\n</code></pre>\n\n<p>I don't know what can cause a  <code>long double restrict</code> ?</p>\n\n<p>value of a result is bigger than a long double? or something else?</p>\n\n<p>if someone can help me to show me the good way to find my solution, i will appreciate.</p>\n\n<p>thaks a lot.</p>\n\n<p>PS: i don't want to know if my code is ok or not because all work fine from many month, so i don't post code here, but i just want to know potential cause of long double restrict problem ;)</p>\n\n<p>EDIT1</p>\n\n<p>Finally i find my solution i guess.</p>\n\n<p>I have put log into fortran and for a reason i don't understand now, because code is not from me and i don't know anything about fortran, i have a value that was 1 in many time and sometime this value is 1078334587, so i will re-send the code to the client and the man who wrote this code can correct this.</p>\n\n<p>I think its a non initialized value that was get from fortran and the adress contain a big value in memory and cause sigsev!</p>\n"}, {"tags": ["c", "accelerometer", "negative-number"], "comments": [{"owner": {"reputation": 2412, "user_id": 1191058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09eeee14385ba75f18adb473ccffe208?s=128&d=identicon&r=PG", "display_name": "j123b567", "link": "https://stackoverflow.com/users/1191058/j123b567"}, "edited": false, "score": 0, "creation_date": 1440594544, "post_id": 32227287, "comment_id": 52337570, "body": "<code>accelerationX*-1</code> is just obscure representation of <code>-accelerationX</code>"}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1440594065, "creation_date": 1440594065, "answer_id": 32227378, "question_id": 32227287, "link": "https://stackoverflow.com/questions/32227287/reading-negative-values-of-accelerometer/32227378#32227378", "title": "Reading negative values of accelerometer", "body": "<p><code>accelerationX</code> is a signed integer, but it would seem that <code>UART_OutUDec</code> expects an unsigned integer. Therefore they have to print a minus sign followed by the absolute value of <code>accelerationX</code> (sign removed).</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440594582, "post_id": 32227527, "comment_id": 52337604, "body": "In case the output is ASCII to be displayed in a terminal, the data types do matter. I suspect this is the case here, otherwise the UART routines would merely take an array of raw data bytes."}, {"owner": {"reputation": 1482, "user_id": 1030576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3056c5185987f1265aca9235680a0bcd?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/1030576/anthony"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440594897, "post_id": 32227527, "comment_id": 52337837, "body": "I know that and it doesn&#39;t change anything I said. A UART will send irrespective of data type, so it&#39;s up to the user to deal with typing, which is why I said the receiver is unlikely to understand a negative value given the existence of the control structure in the first place. Also, OutUDec is obviously translating the unsigned short into ASCII, which is why the code isn&#39;t using a raw transmit function."}], "tags": [], "owner": {"reputation": 1482, "user_id": 1030576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3056c5185987f1265aca9235680a0bcd?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/1030576/anthony"}, "is_accepted": false, "score": 0, "last_activity_date": 1440598324, "last_edit_date": 1440598324, "creation_date": 1440594454, "answer_id": 32227527, "question_id": 32227287, "link": "https://stackoverflow.com/questions/32227287/reading-negative-values-of-accelerometer/32227527#32227527", "title": "Reading negative values of accelerometer", "body": "<p>It's because the number is being sent as an unsigned short instead of a signed quantity. It would be helpful to see what <code>UART_OutUDec</code> is doing, but it also doesn't really matter because a UART will simply send whatever is dropped in its data register. As an aside, <code>UART_OutUDec</code> is most likely translating the unsigned short into ASCII. The receiver is unlikely to understand the value was supposed to be negative, so the minus sign is transmitted with what's effectively the absolute value of the acceleration.</p>\n\n<p>Something to consider is that not all receivers are equal. A lot of people assume the device on the other end is a computer or something that understands ASCII, but that's not always the case. I've worked on embedded systems that transmitted ASCII characters mixed with non-ASCII characters, which is confusing and hard to maintain, but these systems exist. That's almost certainly not applicable to your situation simply because it's rare, but, in the future, if you give additional details about the receiver it will help clarify how the data should be formatted and transmitted.</p>\n"}], "owner": {"reputation": 1, "user_id": 5223013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3638d6573246ee28ef4768cf66ce4582?s=128&d=identicon&r=PG", "display_name": "parag", "link": "https://stackoverflow.com/users/5223013/parag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 462, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1440598324, "creation_date": 1440593776, "last_edit_date": 1440596461, "question_id": 32227287, "link": "https://stackoverflow.com/questions/32227287/reading-negative-values-of-accelerometer", "title": "Reading negative values of accelerometer", "body": "<p>Im interfacing accelerometer with TivaC and displaying the RAW data on UART.</p>\n\n<pre><code>void main(){\n\n  signed int accelerationX;\n\n  accelerationX = getAcceleration_X();\n  if (accelerationX&gt;=0){\n    UART_OutString(\"\\r\\nX Axl: \");\n    UART_OutUDec((unsigned short) accelerationX);\n  } else {\n    UART_OutString(\"\\r\\nX Axl: - \");\n    UART_OutUDec((unsigned short) (accelerationX*-1));\n  }\n}\n</code></pre>\n\n<p>Such type of code I got on some forum.\nI'm not understanding why \" accelerationX*-1 \" is done when acceleration is negative.</p>\n"}, {"tags": ["c", "matlab"], "comments": [{"owner": {"reputation": 1347, "user_id": 3871918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bc7d09955f09964bbb6d0f571e055cd?s=128&d=identicon&r=PG&f=1", "display_name": "dasdingonesin", "link": "https://stackoverflow.com/users/3871918/dasdingonesin"}, "edited": false, "score": 3, "creation_date": 1440592922, "post_id": 32226872, "comment_id": 52336281, "body": "Are you aware of <a href=\"https://www.gnu.org/software/octave/\" rel=\"nofollow noreferrer\">Octave</a>?"}, {"owner": {"reputation": 32443, "user_id": 1485872, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/9XWSA.png?s=128&g=1", "display_name": "Ander Biguri", "link": "https://stackoverflow.com/users/1485872/ander-biguri"}, "edited": false, "score": 0, "creation_date": 1440593998, "post_id": 32226872, "comment_id": 52337163, "body": "AS far as I know to run Matlab function sin C you need the Matlab libraries installed in the computer running it."}, {"owner": {"reputation": 2412, "user_id": 1191058, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09eeee14385ba75f18adb473ccffe208?s=128&d=identicon&r=PG", "display_name": "j123b567", "link": "https://stackoverflow.com/users/1191058/j123b567"}, "edited": false, "score": 2, "creation_date": 1440594801, "post_id": 32226872, "comment_id": 52337758, "body": "Or, Are you aware of <a href=\"http://www.scilab.org/\" rel=\"nofollow noreferrer\">Scilab</a>?"}, {"owner": {"reputation": 7733, "user_id": 2092048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4896d8e38ccff90deda9e8dcf8d7c01?s=128&d=identicon&r=PG", "display_name": "nkjt", "link": "https://stackoverflow.com/users/2092048/nkjt"}, "edited": false, "score": 1, "creation_date": 1440682711, "post_id": 32226872, "comment_id": 52382402, "body": "I&#39;m voting to close this question as off-topic because it is about copyright/legal issues."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 3593992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fd4b810de1e4d06cd10a49a38c880bf?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/3593992/paul"}, "is_accepted": true, "score": 2, "last_activity_date": 1440596914, "creation_date": 1440596914, "answer_id": 32228507, "question_id": 32226872, "link": "https://stackoverflow.com/questions/32226872/can-i-create-a-matlab-library-in-c/32228507#32228507", "title": "Can I create a MATLAB library in C?", "body": "<p>In the MATLAB Terms of Use, Mathworks explicitly disclaims having any rights to source code you wrote yourself using MATLAB or related products. You (or employer) have rights to all creative contributions you originate.</p>\n\n<p>In return for paying for an authorized copy of MATLAB Compiler or MATLAB Coder, Mathworks licenses use of their library and technologies to you, with you having the right to distribute the compiled code for whatever fee you choose -- whether that be no cost, or minimal cost, or full commercial product pricing. Some restrictions may apply (USA export control laws must be satisfied.)</p>\n\n<p>If you, for example, want to create a function with a prototype plot(X,Y) that creates a graph based on two vectors (X and Y) but don't use any Mathworks source or libraries to do so, then it is your own original work and you can do with it as you please. </p>\n"}], "owner": {"reputation": 497, "user_id": 1812249, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3d126f269c17f870e5378f38942b1e1d?s=128&d=identicon&r=PG&f=1", "display_name": "jigglypuff", "link": "https://stackoverflow.com/users/1812249/jigglypuff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 32228507, "answer_count": 1, "score": 3, "last_activity_date": 1446072989, "creation_date": 1440592558, "last_edit_date": 1446072989, "question_id": 32226872, "link": "https://stackoverflow.com/questions/32226872/can-i-create-a-matlab-library-in-c", "title": "Can I create a MATLAB library in C?", "body": "<p>I've got an idea to recreate the MATLAB functions in C using the GNU GSL library and making it available to the public. Am I allowed to do this? Or are there copyright or other restrictions from using MATLAB code that prevent me from doing this?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Thanks for the responses, I've created the library, it doesn't use any other math library to make it simpler. View it here: <a href=\"https://github.com/martinn16/matlab2c\" rel=\"nofollow\">https://github.com/martinn16/matlab2c</a></p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1440592262, "post_id": 32226567, "comment_id": 52335779, "body": "Well the footnote you link to says that &quot;they are temporary entities that exist only within translation phase 4&quot;. So my question to you is not, why do you need to know this? It&#39;s just an internal thing that is used during the <a href=\"http://en.cppreference.com/w/c/language/translation_phases#Phase_4\" rel=\"nofollow noreferrer\">preprocessor phase (phase 4)</a> of the compilation process. There&#39;s really no need to worry about such internal things unless you are writing your own C compiler."}], "owner": {"reputation": 1753, "user_id": 4637326, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/1093075744051398/picture?type=large", "display_name": "Radoslaw Krasimirow", "link": "https://stackoverflow.com/users/4637326/radoslaw-krasimirow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1440739662, "creation_date": 1440591736, "last_edit_date": 1440739662, "question_id": 32226567, "link": "https://stackoverflow.com/questions/32226567/what-does-placemarker-preprocessing-token-mean", "title": "What does placemarker preprocessing token mean?", "body": "<p>I wasn't able to find information about <code>placemarker preprocessing token</code>.\nI encountered this notion in <a href=\"http://port70.net/~nsz/c/c11/n1570.html#note173\" rel=\"nofollow\">this document</a>.</p>\n\n<p>Could you please explain what it is. Some examples would be very useful as well. Thank you in advance.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1440590050, "post_id": 32225896, "comment_id": 52334274, "body": "The observation <code>65536 = is the value of 16 bit unsigned</code> is wrong. Perhaps you meant <code>65535</code>."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1440590197, "post_id": 32225896, "comment_id": 52334366, "body": "@barakmanos Not really helpful comment. 65536 is 2^16 or the maximum of unsigned 16bit values plus one. 32768 is 2^15 or the maximum of signed 16 bit values plus one."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1440590203, "post_id": 32225896, "comment_id": 52334375, "body": "Hint: unsigned overflow is well-defined behaviour. :)"}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1440590261, "post_id": 32225896, "comment_id": 52334412, "body": "what part you do not understand? Actually even something as simple as <code>stupidPRNG(){return 0;}</code> is a pseudo random number generator"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 2, "creation_date": 1440590270, "post_id": 32225896, "comment_id": 52334417, "body": "@SimonKraemer: 65536 cannot be represented with 16 bits!!!"}, {"owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "edited": false, "score": 0, "creation_date": 1440590279, "post_id": 32225896, "comment_id": 52334426, "body": "Pseudo-random does not mean &quot;almost random&quot;. It rather means &quot;definite but with some &#39;good&#39; statistical properties&quot;. You should google about LCG (Linear Congruential Generators)."}, {"owner": {"reputation": 4070, "user_id": 2453089, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/vhgD8.jpg?s=128&g=1", "display_name": "vish4071", "link": "https://stackoverflow.com/users/2453089/vish4071"}, "edited": false, "score": 1, "creation_date": 1440590317, "post_id": 32225896, "comment_id": 52334448, "body": "what is your actual problem here??"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1440590327, "post_id": 32225896, "comment_id": 52334457, "body": "@barakmanos And where exactly did I write it could be represented with 16 bits?"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1440590395, "post_id": 32225896, "comment_id": 52334499, "body": "@ShivankSagar: 16 bit signed goes from -32768 to +32767, 16 bit unsigned from 0 to 65535"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440590464, "post_id": 32225896, "comment_id": 52334546, "body": "Does not K&amp;R explain it?"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 1, "creation_date": 1440590480, "post_id": 32225896, "comment_id": 52334553, "body": "You could write this <code>return (unsigned int)(next&#47;65536) % 32768;</code> as this: <code>(unsigned int)(next &gt;&gt; 16) &amp; 0xFFFF</code>  So this line is only ment to take only the upper 16 bit of the 32 bit integer calculated before."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 2, "creation_date": 1440590531, "post_id": 32225896, "comment_id": 52334583, "body": "@SimonKraemer I think it&#39;s <code>&amp;&amp; 0x7fff</code>, but otherwise correct."}, {"owner": {"reputation": 32, "user_id": 3706571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f5fa9bff106919cf9b55d645a1be3a1?s=128&d=identicon&r=PG&f=1", "display_name": "Shivank Sagar", "link": "https://stackoverflow.com/users/3706571/shivank-sagar"}, "edited": false, "score": 0, "creation_date": 1440590572, "post_id": 32225896, "comment_id": 52334608, "body": "oops sorry i think i made a big mistake.Thanks for the corrections i am editing my question again"}, {"owner": {"reputation": 25508, "user_id": 847269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/564ffe2e3f1ffe82696cd1ac01ac035e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick87", "link": "https://stackoverflow.com/users/847269/patrick87"}, "edited": false, "score": 0, "creation_date": 1440590582, "post_id": 32225896, "comment_id": 52334620, "body": "All that there is to understand is this: PRNGs generate sequences of numbers which look random statistically, but are in fact deterministic; the procedure you have there was designed to have the PRNG property by somebody who knew what he was doing."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1440590763, "post_id": 32225896, "comment_id": 52334723, "body": "@dhke Yeah, I got it wrong there. So it&#39;s only the last 15 bits"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1440592215, "post_id": 32225896, "comment_id": 52335736, "body": "Your comment &quot;And where exactly did I write it could be represented with 16 bits&quot; makes you look ridiculous, since everyone can see that this is exactly what you wrote before you edited the question and changed it!!!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1440594272, "post_id": 32225896, "comment_id": 52337379, "body": "@SimonKraemer: &quot;16 bit signed goes from -32768 to +32767&quot; Not always. C allows for other representations of signed integers than 2s complement."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1440595140, "post_id": 32225896, "comment_id": 52338018, "body": "@tobi303: A constant generator is <b>not</b> a (P)RNG. Randomness requires more than a single, constant value. By the name, that would be the standard library&#39;s functions, which adds some <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.22.2.1\" rel=\"nofollow noreferrer\">requirements</a> to <code>rand</code>."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440596120, "post_id": 32225896, "comment_id": 52338770, "body": "@Olaf Could you explain this please? I don&#39;t really know what you mean."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440596902, "post_id": 32225896, "comment_id": 52339360, "body": "@Olaf I didnt claim that it is a good one. How would you know, if you do not know the implementation, but only the interface? <code>double stupidPRNG()</code> looks reasonable... you could only test it, but then 100 (or even 1000) zeros is just as likely as any other sequence :P"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1440596933, "post_id": 32225896, "comment_id": 52339382, "body": "@SimonKraemer: What about &quot;C allows for other representations ...&quot; is not clear? By &quot;C&quot; I obviously mean the C <a href=\"http://port70.net/~nsz/c/c11/n1570.html\" rel=\"nofollow noreferrer\">standard</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1440596960, "post_id": 32225896, "comment_id": 52339401, "body": "@tobi303: Because it does not quack like a duck! <code>rand</code> is well defined (and K&amp;R is about that particular standard library function) and the term (P)RNG implies that it delivers not just a constant, because of lacking the <code>R</code> in <b>R</b>andom."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1440597194, "post_id": 32225896, "comment_id": 52339584, "body": "@barakmanos I would like to have a revision history for comments. My first post was &quot;@barakmanos Not really helpful comment.&quot; and my edit was to add the rest of it."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440597352, "post_id": 32225896, "comment_id": 52339701, "body": "@Olaf This part was clear. I was refering to &quot;other representations of signed integers than 2s complement&quot;. I can&#39;t imagine what you mean by that. Especially as I stated this for 16-bit integers. For my understanding a bit is always binary and therefore 2s complement."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 1, "creation_date": 1440597846, "post_id": 32225896, "comment_id": 52340084, "body": "@SimonKraemer: A bit is a bit, just 1 and 0. You might be thinking about <i>binary</i> (i.e. multi-bit) values. Their interpreation is completely left to the human. What makes the bit-pattern <code>01000001</code> the letter <code>A</code>? Why not just try <a href=\"https://en.wikipedia.org/wiki/Signed_number_representations\" rel=\"nofollow noreferrer\">Wikipedia</a>?"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440598190, "post_id": 32225896, "comment_id": 52340365, "body": "@Olaf Yeah, forgot about that. So the only exception for the ranges would be Base -2."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440665828, "post_id": 32225896, "comment_id": 52370589, "body": "Don&#39;t read K&amp;R, it is an old obsolete book full with errors. They don&#39;t know the C language as it is standardized today. For example the line <code>(unsigned int)(next &#47; 65536) % 32768;</code> is incorrect on a 16 bit system. Surprisingly, as the book was written in the 16 bit era. On a 16 bit or smaller system <code>(unsigned int)(next &#47; 65536)</code> is of type unsigned int, but <code>an_unsigned_int % 32768</code> implicitly converts it back to <code>long</code>, because the literal 32768 is of type long. So the cast is superfluous and the result of the expression will be of type long on some systems."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440666397, "post_id": 32225896, "comment_id": 52370996, "body": "Summary: In order to read K&amp;R, you must know enough C to explain the C language to K&amp;R, so you can tell them where they went wrong, on pretty much every page. Use a pencil and correct the K&amp;R book, should be: <code>return (int) (next &#47; 65536 % 32768);</code>. Operator associativity makes the inner-most parenthesis superfluous. Of course K&amp;R likely didn&#39;t know that either, since their own operator precedence table is incorrect as well."}], "answers": [{"comments": [{"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1440590895, "post_id": 32226008, "comment_id": 52334804, "body": "You might want to mention that  the code is exactly an implementation of the &quot;standard&quot; C pseudo-random number generator LCG as suggested by C99/C11 including the exact same bitmask."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 0, "creation_date": 1440590951, "post_id": 32226008, "comment_id": 52334836, "body": "I didn&#39;t know that, and I believe that many <code>libc</code> have a better PRNG"}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "edited": false, "score": 1, "creation_date": 1440590985, "post_id": 32226008, "comment_id": 52334863, "body": "I agree with you, but the question is not about PRNGs in general but about that particular piece of code ;-)"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 4, "last_activity_date": 1440591008, "last_edit_date": 1440591008, "creation_date": 1440590245, "answer_id": 32226008, "question_id": 32225896, "link": "https://stackoverflow.com/questions/32225896/pseudo-random-function-in-c/32226008#32226008", "title": "pseudo-random function in c?", "body": "<p><a href=\"https://en.wikipedia.org/wiki/Pseudorandom_number_generator\" rel=\"nofollow\">Pseudo Random Number Generators</a> are a very complex subject. You could learn it for years, and get a PhD on it. As commented, read also about <a href=\"https://en.wikipedia.org/wiki/Linear_congruential_generator\" rel=\"nofollow\">linear congruential generator</a> (it looks like your code is an <em>example</em> in some C standard)</p>\n\n<p>In C on POSIX systems, you have <a href=\"http://man7.org/linux/man-pages/man3/random.3.html\" rel=\"nofollow\">random(3)</a> (and also <a href=\"http://man7.org/linux/man-pages/man3/lrand48.3.html\" rel=\"nofollow\">lrand48(3)</a>, sort-of obsolete); In C++11 you have <a href=\"http://en.cppreference.com/w/cpp/numeric/random\" rel=\"nofollow\"><code>&lt;random&gt;</code></a> </p>\n\n<p>The <code>/65536</code> operation might be compiled as <code>&gt;&gt;16</code> a right shift of 16 bits.\nThe <code>%32768</code> operation could be <a href=\"https://en.wikipedia.org/wiki/Optimizing_compiler\" rel=\"nofollow\">optimized</a> as a bitmask (same as <code>&amp;0x7fff</code>) keeping 15 least bits.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440662135, "post_id": 32243287, "comment_id": 52368358, "body": "<code>32768</code> is <i>not</i> equivalent to <code>0x7ffff</code>, because on a 16 bit system the former is of type <code>long</code> and the latter is of type <code>unsigned int</code>. This is because of the rules about how integer literals are given types, see the table in C11 6.4.4.1. Meaning that the first snippet performs the modulo calculation on type long, while the latter performs the bitwise AND on type int. It doesn&#39;t seem to make any difference in this code, but there&#39;s a great potential for subtle bugs here, especially when int is 16 bits. Use the <code>UL</code> suffix for the literals to avoid such bugs."}, {"owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440662304, "post_id": 32243287, "comment_id": 52368468, "body": "@Lundin In never stated that the numbers are equivalent. But if we are nitpicking: <code>32768UL</code> would be <code>0x10000UL</code>. The actually typo are the 4 f in the original answer, there should only be 3. Of course you are correct wrt to type conversion."}], "tags": [], "owner": {"reputation": 13636, "user_id": 3191557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ffa6013ed93cfff5ef56f1ddf63956b1?s=128&d=identicon&r=PG&f=1", "display_name": "dhke", "link": "https://stackoverflow.com/users/3191557/dhke"}, "is_accepted": false, "score": 2, "last_activity_date": 1440662862, "last_edit_date": 1440662862, "creation_date": 1440660855, "answer_id": 32243287, "question_id": 32225896, "link": "https://stackoverflow.com/questions/32225896/pseudo-random-function-in-c/32243287#32243287", "title": "pseudo-random function in c?", "body": "<p>This hasn't an accepted answer yet, so let's try one.</p>\n\n<p>As noted by Basile Starynkevitch, what is implemented here is a pseudo-random number generator (RNG) from the class of <a href=\"https://en.wikipedia.org/wiki/Linear_congruential_generator\" rel=\"nofollow\">linear congruential generators</a> (LCGs). These in general take the form of a sequence</p>\n\n<pre><code>X := (a * X + c) mod m\n</code></pre>\n\n<p>The starting value for <code>X</code> is called the <em>seed</em> (same as in the code). Of course <code>c &lt; m</code> and <code>a &lt; m</code>. Often also <code>a &lt;&lt; c</code>. Both <code>c</code> and <code>m</code> are usually large numbers chosen so that the whole sequence does reasonably well in the <a href=\"https://en.wikipedia.org/wiki/Spectral_test\" rel=\"nofollow\"><em>spectral test</em></a>, but you probably don't have to care about that to understand the basic mode of operation. If you are a little bit into number theory, you will probably see that the sequence repeats after a while (it is periodic). </p>\n\n<p>Random numbers are generated, by first seeding <code>X</code> with a starting seed. For each generated number, the sequence is cycled and a subset of the bits of <code>X</code> are returned.</p>\n\n<p>In the code from the question, <code>a = 1103515245</code>, <code>c = 12345</code>, and \n<code>m</code> is implicitly <code>pow(2, 8 * sizeof(unsigned long))</code> by virtue of unsigned integer overflow. These are also the values <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/standards.html\" rel=\"nofollow\">ISO/IEC 9899</a>, i.e. the C language standard suggests.</p>\n\n<p>With this known, the first pitfall is probably this statement:</p>\n\n<pre><code>return (unsigned int)(next / 65536) % 32768;\n</code></pre>\n\n<p>Kernighan and Ritchie probably thought that using only simple arithmetic is more readable and more portable than using bit masks and bit shifts. The above is equivalent to</p>\n\n<pre><code>return (unsigned int)(next &gt;&gt; 16) &amp; 0x7fff\n</code></pre>\n\n<p>which selects bits 16-30 from <code>next</code>. You get back a pseudo-random number in the range <code>[0;32767]</code>. The bit range is also the one suggested in the C standard.</p>\n\n<p><strong>WARNING</strong>: It is well known that this LCG does --while widely deployed, because it's noted in the standard-- not produce very good pseudo-random numbers (the version in GLIBc is even worse). Distinctively, it is absolutely unsafe to use for cryptographic applications. With the few number of random bits, I would not even use it for any <a href=\"https://en.wikipedia.org/wiki/Monte_Carlo_method\" rel=\"nofollow\">Monte Carlo method</a>, because results may be severely skewed by the quality of the RNG.</p>\n\n<p>So in short: Try to understand it: yes, you are welcome. Use it for anything: no.</p>\n"}], "owner": {"reputation": 32, "user_id": 3706571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f5fa9bff106919cf9b55d645a1be3a1?s=128&d=identicon&r=PG&f=1", "display_name": "Shivank Sagar", "link": "https://stackoverflow.com/users/3706571/shivank-sagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1767, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1440662862, "creation_date": 1440589894, "last_edit_date": 1440590727, "question_id": 32225896, "link": "https://stackoverflow.com/questions/32225896/pseudo-random-function-in-c", "title": "pseudo-random function in c?", "body": "<p>I am reading book called the c programming language by Brian W.Kernighan and Dennis M.Ritchie. I cannot understand the function that is written in the book for generating pseudo-random number it is like this;</p>\n\n<pre><code>unsigned long int next = 1;\n\nint rand(void)\n{\n    next = next * 1103515243 + 12345;\n    return (unsigned int)(next / 65536) % 32768;\n}\n\nvoid srand(unsigned int seed)\n{\n    next = seed;\n}\n</code></pre>\n\n<p>I also tried my self. But I only came up with the following observations </p>\n\n<blockquote>\n  <p>65536 = is the value of 16 bit unsigned + 1 bit<br>\n  32768 = is the value of\n   16 bit signed + 1 bit </p>\n</blockquote>\n\n<p>but I am not able to figure out the whole process .\nThis is the book written by the legends and I want to understand this book.\nPlease if anybody can help me to figure out this problem I will feel very very fortunate.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1440590144, "post_id": 32225821, "comment_id": 52334333, "body": "What is value of <code>MAX_NAME_SIZE</code>?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1440590512, "post_id": 32225821, "comment_id": 52334570, "body": "Sidenote: you should not implement your own <code>bool</code>, if your compiler supports <code>stdbool.h</code>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1440590524, "post_id": 32225821, "comment_id": 52334578, "body": "I&#39;m voting to close this question as off-topic because standard DCV &#39;cos LL questions with no debugging done."}, {"owner": {"reputation": 271, "user_id": 4348744, "user_type": "registered", "accept_rate": 19, "profile_image": "https://graph.facebook.com/100000283931061/picture?type=large", "display_name": "Dale Baker", "link": "https://stackoverflow.com/users/4348744/dale-baker"}, "edited": false, "score": 0, "creation_date": 1440590682, "post_id": 32225821, "comment_id": 52334679, "body": "MAX_NAME_SIZE is 50 or so, definitely long enough for the strings I used.  Didn&#39;t realize, user694733, thanks!  Martin, sorry to be a complete novice, but how would I go about debugging... sorry."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3368555"}, "edited": false, "score": 0, "creation_date": 1440591908, "post_id": 32225821, "comment_id": 52335490, "body": "why won&#39;t you try debuging the insert function with gdb?"}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 3852, "user_id": 921723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e3b1e32ece685d794a2d839300166c?s=128&d=identicon&r=PG", "display_name": "Jite", "link": "https://stackoverflow.com/users/921723/jite"}, "edited": false, "score": 0, "creation_date": 1440593390, "post_id": 32225821, "comment_id": 52336651, "body": "@Jite How is that any different? <code>!FALSE</code> expands to <code>!0</code> which is <code>1</code>. If you just stick to the interface and don&#39;t mix integers with booleans, you&#39;re good. <a href=\"http://clang.llvm.org/doxygen/stdbool_8h_source.html\" rel=\"nofollow noreferrer\"><code>stdbool.h</code></a> defines <code>TRUE</code> as <code>1</code> and <code>FALSE</code> as <code>0</code> too."}, {"owner": {"reputation": 3852, "user_id": 921723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e3b1e32ece685d794a2d839300166c?s=128&d=identicon&r=PG", "display_name": "Jite", "link": "https://stackoverflow.com/users/921723/jite"}, "reply_to_user": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1440594046, "post_id": 32225821, "comment_id": 52337212, "body": "@FilipeGon&#231;alves Brainfart. I mixed it up with potential type problems. Nevermind."}], "answers": [{"tags": [], "owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "is_accepted": true, "score": 1, "last_activity_date": 1440593457, "last_edit_date": 1440593457, "creation_date": 1440592355, "answer_id": 32226799, "question_id": 32225821, "link": "https://stackoverflow.com/questions/32225821/inserting-a-node-into-a-linked-list-c-using-trailing-pointers/32226799#32226799", "title": "Inserting a node into a linked list C using trailing pointers", "body": "<p>The problem is that your insert function doesn't really insert in the general case. Look at the loop body:</p>\n\n<pre><code>for (curr = list, prev = NULL; curr != NULL &amp;&amp; comesBefore(student, \n    curr) != TRUE; prev = curr, curr = curr-&gt;next) {\n    printf(\"Stage 1\\n\\n\");\n    printf(\"curr age = %d\\n\", curr-&gt;age);\n    printf(\"student age = %d\\n\", student-&gt;age);\n    if (comesBefore(student, curr)) {\n        printf(\"Stage 2\\n\");\n        if (prev != NULL) {\n            prev-&gt;next = student;\n        }\n        student-&gt;next = curr;\n        break;\n    }\n    if ((curr-&gt;next) == NULL) {\n        printf(\"Appended at the end of the list\\n\");\n        curr-&gt;next = student;\n        break;\n    }       \n}\n</code></pre>\n\n<p>The loop body is entered only if <code>curr != NULL &amp;&amp; comesBefore(student, curr) != TRUE</code>, so <code>if (comesBefore(student, curr))</code> will never be true inside the loop.</p>\n\n<p>Instead, you want to insert once the loop terminates, i.e., <em>after</em> the loop. You also don't need that <code>if ((curr-&gt;next) == NULL)</code> inside the loop; if that is true, then the loop will iterate one more time, <code>curr</code> will be <code>NULL</code> and <code>prev</code> will be the pointer you're interested in. The loop condition is well written, you're just doing things in the wrong place.</p>\n\n<p>This will work:</p>\n\n<pre><code>for (curr = list, prev = NULL;\n     curr != NULL &amp;&amp; comesBefore(student, curr) != TRUE;\n     prev = curr, curr = curr-&gt;next) {\n    printf(\"Stage 1\\n\\n\");\n    printf(\"curr age = %d\\n\", curr-&gt;age);\n    printf(\"student age = %d\\n\", student-&gt;age);\n}\n\nstudent-&gt;next = curr;\nprev-&gt;next = student;\n\nreturn list;\n</code></pre>\n\n<p>Here's the entire function with this fix:</p>\n\n<pre><code>Student* insert(Student* student, Student* list) {\n    Student* curr = NULL;\n    Student* prev = NULL;\n    if (list == NULL) {\n        printf(\"list == null\\n\");\n        return student;\n    }\n    if (comesBefore(student, list)) {\n        printf(\"Student comes before list\\n\");\n        printf(\"Student age = %d\\n\", student-&gt;age);\n        printf(\"List age = %d\\n\", list-&gt;age);\n        student-&gt;next = list;\n        return student;\n    }\n    for (curr = list, prev = NULL;\n         curr != NULL &amp;&amp; comesBefore(student, curr) != TRUE;\n         prev = curr, curr = curr-&gt;next) {\n        printf(\"Stage 1\\n\\n\");\n        printf(\"curr age = %d\\n\", curr-&gt;age);\n        printf(\"student age = %d\\n\", student-&gt;age);\n    }\n\n    student-&gt;next = curr;\n    prev-&gt;next = student;\n\n    return list;\n}\n</code></pre>\n\n<p>When you're done debugging, the loop body will be empty; you might want to add a comment saying this is intentional (I usually like to do this so that other people reading the code know that it's not a bug). Something like:</p>\n\n<pre><code>Student* insert(Student* student, Student* list) {\n    Student* curr = NULL;\n    Student* prev = NULL;\n    if (list == NULL)\n        return student;\n\n    if (comesBefore(student, list)) {\n        student-&gt;next = list;\n        return student;\n    }\n\n    for (curr = list, prev = NULL;\n         curr != NULL &amp;&amp; comesBefore(student, curr) != TRUE;\n         prev = curr, curr = curr-&gt;next)\n        ; /* Intentionally left blank */\n\n    student-&gt;next = curr;\n    prev-&gt;next = student;\n\n    return list;\n}\n</code></pre>\n\n<p>Also, you don't need to test for <code>prev != NULL</code>, because if the loop is reached, then we know that <code>comesBefore(student, list)</code> is false (because we test this earlier in the code), so the loop will always execute at least once. For self-documentation (and to ensure that this variant is not violated with future code changes), you might want to add an <code>assert(3)</code> after the loop, like so:</p>\n\n<pre><code>Student* insert(Student* student, Student* list) {\n    Student* curr = NULL;\n    Student* prev = NULL;\n    if (list == NULL)\n        return student;\n\n    if (comesBefore(student, list)) {\n        student-&gt;next = list;\n        return student;\n    }\n\n    for (curr = list, prev = NULL;\n         curr != NULL &amp;&amp; comesBefore(student, curr) != TRUE;\n         prev = curr, curr = curr-&gt;next)\n        ; /* Intentionally left blank */\n\n    assert(prev != NULL);\n\n    student-&gt;next = curr;\n    prev-&gt;next = student;\n\n    return list;\n}\n</code></pre>\n\n<p>You need to <code>#include &lt;assert.h&gt;</code> to use <code>assert(3)</code>.</p>\n"}], "owner": {"reputation": 271, "user_id": 4348744, "user_type": "registered", "accept_rate": 19, "profile_image": "https://graph.facebook.com/100000283931061/picture?type=large", "display_name": "Dale Baker", "link": "https://stackoverflow.com/users/4348744/dale-baker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 32226799, "answer_count": 1, "score": 1, "last_activity_date": 1440593547, "creation_date": 1440589673, "last_edit_date": 1440593547, "question_id": 32225821, "link": "https://stackoverflow.com/questions/32225821/inserting-a-node-into-a-linked-list-c-using-trailing-pointers", "title": "Inserting a node into a linked list C using trailing pointers", "body": "<p>I'm trying to create a linked list of names in alphabetical order, I've noticed this is a semi common problem, but I'm having a little difficulty with the implementation.</p>\n\n<p>So, the way I see it is, the item can be added at the beginning, middle or end of a linked list, I think I'm struggling with adding it in at the end.</p>\n\n<p>Here is my implementation of a boolean:</p>\n\n<pre><code>typedef int bool;\n#define TRUE 1\n#define FALSE 0\n</code></pre>\n\n<p>Here is my node/item/struct:</p>\n\n<pre><code>typedef struct student_s Student;\n\nstruct student_s {\n    char name[MAX_NAME_SIZE];\n    int age;\n    Student* next;              // Pointer to next student in a list\n};\n</code></pre>\n\n<p>My compare function:</p>\n\n<pre><code>// Compares two student structs based on their name and age, and returns true\n// if student1 should come before student2 in alphabetical order\nbool comesBefore(const Student* student1, const Student* student2) {\n    int name_compare = strcmp(student1-&gt;name, student2-&gt;name);\n\n    if (name_compare &lt; 0) {\n        return TRUE;\n    }\n    else if (name_compare == 0) {\n        int age1 = student1-&gt;age;\n        int age2 = student2-&gt;age;\n        if (age1 &lt; age2) {\n            return TRUE;\n        }\n    }\n    return FALSE;\n}\n</code></pre>\n\n<p>My insert function:</p>\n\n<pre><code>Student* insert(Student* student, Student* list) {\n    Student* curr = NULL;\n    Student* prev = NULL;\n    if (list == NULL) {\n        printf(\"list == null\\n\");\n        return student;\n    }\n    if (comesBefore(student, list)) {\n        printf(\"Student comes before list\\n\");\n        printf(\"Student age = %d\\n\", student-&gt;age);\n        printf(\"List age = %d\\n\", list-&gt;age);\n        student-&gt;next = list;\n        return student;\n    }\n    for (curr = list, prev = NULL; curr != NULL &amp;&amp; comesBefore(student, \n        curr) != TRUE; prev = curr, curr = curr-&gt;next) {\n        printf(\"Stage 1\\n\\n\");\n        printf(\"curr age = %d\\n\", curr-&gt;age);\n        printf(\"student age = %d\\n\", student-&gt;age);\n        if (comesBefore(student, curr)) {\n            printf(\"Stage 2\\n\");\n            if (prev != NULL) {\n                prev-&gt;next = student;\n            }\n            student-&gt;next = curr;\n            break;\n        }\n        if ((curr-&gt;next) == NULL) {\n            printf(\"Appended at the end of the list\\n\");\n            curr-&gt;next = student;\n            break;\n        }       \n    }\n    return list; \n\n}\n</code></pre>\n\n<p>And my main function with all the testing:</p>\n\n<pre><code>int main(void)\n{\n    Student* student1 = malloc(sizeof(Student));\n    Student* student2 = malloc(sizeof(Student));\n    Student* student3 = malloc(sizeof(Student));\n    strncpy(student1-&gt;name, \"AAAAA\", MAX_NAME_SIZE);\n    student1-&gt;age = 10;\n    student1-&gt;next = NULL;\n    student2-&gt;next = NULL;\n    student3-&gt;next = NULL;\n    strncpy((*student2).name, \"BBBBB\", MAX_NAME_SIZE);\n    (*student2).age = 100;\n    strncpy((*student3).name, \"CCCC\", MAX_NAME_SIZE);\n    (*student3).age = 1000;\n    Student* list1 = insert(student1, NULL);\n    Student* list2 = insert(student3, list1);\n    Student* list3 = insert(student2, list2);\n    printf(\"head %d\\n\", list3-&gt;age);\n    printf(\"second element %d\\n\", (list3-&gt;next)-&gt;age);\n    printf(\"third element %d\\n\", ((list3-&gt;next)-&gt;next)-&gt;age);\n}\n</code></pre>\n\n<p>Problem is I keep getting a segmentation fault. I think it's when I try to access the next node in the list (curr->next) when next is set to NULL, but for whatever reason my if statement</p>\n\n<pre><code>    if ((curr-&gt;next) == NULL) {\n        printf(\"Appended at the end of the list\\n\");\n        curr-&gt;next = student;\n        break;\n    }   \n</code></pre>\n\n<p>Is never being triggered. Why? Or am I completely wrong?</p>\n"}, {"tags": ["c", "encryption", "linux-kernel", "linux-device-driver", "luks"], "comments": [{"owner": {"reputation": 29117, "user_id": 1587329, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UWmiP.png?s=128&g=1", "display_name": "serv-inc", "link": "https://stackoverflow.com/users/1587329/serv-inc"}, "edited": false, "score": 0, "creation_date": 1440592162, "post_id": 32225517, "comment_id": 52335692, "body": "Is this a question about dm-crypt in general (whether it buffers before writing even after a <code>sync</code>), or do you think that using your own program is different from for example a shell command, say, a <code>touch crypt&#47;file; sync</code>?"}, {"owner": {"reputation": 65, "user_id": 4531970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcebe1152f81ee74c964b1b2f7eaad85?s=128&d=identicon&r=PG", "display_name": "mediata", "link": "https://stackoverflow.com/users/4531970/mediata"}, "reply_to_user": {"reputation": 29117, "user_id": 1587329, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UWmiP.png?s=128&g=1", "display_name": "serv-inc", "link": "https://stackoverflow.com/users/1587329/serv-inc"}, "edited": false, "score": 0, "creation_date": 1440596939, "post_id": 32225517, "comment_id": 52339388, "body": "I use own program on C. But cryptsetup use dm-crypt kernel module to map crypted partition in /dev/mapper/&lt;device_name&gt; witch I open into C program with open() and write and read directly. And my question is when i call fsync() into my C program all info witch i write before will be into real crypted partition after fsync() return or is there a way to be into buffer in dm-crypt module."}], "answers": [{"tags": [], "owner": {"reputation": 29117, "user_id": 1587329, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UWmiP.png?s=128&g=1", "display_name": "serv-inc", "link": "https://stackoverflow.com/users/1587329/serv-inc"}, "is_accepted": true, "score": 1, "last_activity_date": 1440606595, "last_edit_date": 1492086987, "creation_date": 1440606595, "answer_id": 32231973, "question_id": 32225517, "link": "https://stackoverflow.com/questions/32225517/fsync-on-mapped-crypted-device-with-dm-crypt/32231973#32231973", "title": "fsync on mapped crypted device with dm-crypt?", "body": "<p>I could not find much reference on this. Maybe someone can shed more light on this, as I have not grokked <a href=\"https://gitlab.com/cryptsetup/cryptsetup/tree/master\" rel=\"nofollow noreferrer\">the source</a>, but it seems as though a <code>sync</code> writes to disk.</p>\n\n<p>One point is the questions <a href=\"https://unix.stackexchange.com/questions/85865/trim-with-lvm-and-dm-crypt\">trim-with-lvm-and-dm-crypt</a> where a <code>sync</code> changes the <strong>disk content reliably</strong>, yet the cached content is only updated after a <code>echo 1 &gt; /proc/sys/vm/drop_caches</code>.</p>\n\n<p>Another is <a href=\"https://gitlab.com/cryptsetup/cryptsetup/issues/207\" rel=\"nofollow noreferrer\">the issue</a> that <code>sync</code> hangs on a suspended device, which indicates that the sync goes directly to the device.</p>\n\n<p>A third is this <a href=\"https://forums.gentoo.org/viewtopic-p-6925154.html#6925154\" rel=\"nofollow noreferrer\">Gentoo discussion</a> where <code>luksClose</code> is possible reliably after a <code>sync</code>.</p>\n\n<p>A fourth is <a href=\"https://unix.stackexchange.com/a/163294/115933\">this UL answer</a>, which says</p>\n\n<blockquote>\n  <p>the rest of the stuff [dm-crypt] is in kernel and pretty heavily used, so it's\n  probably fine</p>\n</blockquote>\n\n<p>It may still be that all these are wrong, and it can happen that <code>sync</code> does not write directly to the encrypted disk, but it seems unlikely.</p>\n"}], "owner": {"reputation": 65, "user_id": 4531970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcebe1152f81ee74c964b1b2f7eaad85?s=128&d=identicon&r=PG", "display_name": "mediata", "link": "https://stackoverflow.com/users/4531970/mediata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 1, "accepted_answer_id": 32231973, "answer_count": 1, "score": 2, "last_activity_date": 1440610192, "creation_date": 1440588822, "last_edit_date": 1440610192, "question_id": 32225517, "link": "https://stackoverflow.com/questions/32225517/fsync-on-mapped-crypted-device-with-dm-crypt", "title": "fsync on mapped crypted device with dm-crypt?", "body": "<p>I have a question about dm-crypt.</p>\n\n<p>Here is my situation. I have an encrypted partition mapped (encrypted in virtual device) using the cryptsetup command in Linux. I am opening the mapped virtual device in a c-program using the open() function.</p>\n\n<p>Can i be sure that when i use the fsync() function all information will be written to the encrypted partition or is there some buffer in the dm-crypt driver?</p>\n"}, {"tags": ["c", "constants"], "comments": [{"owner": {"reputation": 388, "user_id": 2587102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb73c5c317537efcdbeb19cacb0222ed?s=128&d=identicon&r=PG", "display_name": "Melkon", "link": "https://stackoverflow.com/users/2587102/melkon"}, "edited": false, "score": 10, "creation_date": 1440588653, "post_id": 32225436, "comment_id": 52333381, "body": "You don&#39;t get an error because C-style cast is silently cast away constness. That&#39;s just one reason why you should never use C-style cast"}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 9, "creation_date": 1440588910, "post_id": 32225436, "comment_id": 52333533, "body": "As others have said you have undefined behaviour, so both are bad.  That said, the reason the global variable tends to crash is that the OS loader can put all the global constants into memory and mark it read only, so you get a nice access violation message.  The local variable&#39;s likely on the stack, and it&#39;s impractical (both due to implication of memory page sizes and the performance hit) to constantly be making parts of the stack <code>const</code> temporarily - at a CPU level - as automatic variables are created and destroyed."}, {"owner": {"reputation": 75, "user_id": 4404837, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o8rUF0uiNRs/AAAAAAAAAAI/AAAAAAAAAD4/KI7Xo9d8Hig/photo.jpg?sz=128", "display_name": "Vaibhav Gautam", "link": "https://stackoverflow.com/users/4404837/vaibhav-gautam"}, "reply_to_user": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 0, "creation_date": 1440589720, "post_id": 32225436, "comment_id": 52334042, "body": "@Tony D Thanks for such a detailed explanation. It really hepled me."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1440590769, "post_id": 32225436, "comment_id": 52334724, "body": "I&#39;m voting to close this question as off-topic because today&#39;s &#39;I did an obviously bad thing and I want it explained&#39; is &#39;I changed a const through a pointer&#39;.  DownCloseVote...."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 9, "last_activity_date": 1440591011, "last_edit_date": 1495542251, "creation_date": 1440588645, "answer_id": 32225461, "question_id": 32225436, "link": "https://stackoverflow.com/questions/32225436/why-does-a-constant-variable-value-change-when-it-is-declared-locally/32225461#32225461", "title": "Why does a constant variable value change when it is declared locally?", "body": "<p>Your code produces <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>.\nIf you try to modify any <code>const</code> variable <em>through</em> a non-const qualified type variable (example: by <code>cast</code>ing away the <code>const</code>-ness), it is UB.</p>\n\n<p>To quote the <code>C11</code> standard, chapter \u00a76.7.3, (<em>type qualifiers</em>)</p>\n\n<blockquote>\n  <p>If an attempt is made to modify an object defined with a const-qualified type through use\n  of an lvalue with non-const-qualified type, the behavior is undefined. [...]</p>\n</blockquote>\n\n<p>FWIW, this does not depend on variable being defined in global scope or local scope, in both the cases it will be UB.</p>\n\n<p>As described nicely by <a href=\"https://stackoverflow.com/users/584518/lundin\">Mr. Lundin</a> in his <a href=\"https://stackoverflow.com/a/32225533/2173917\">answer</a>, for <em>this</em> case, it may be happening like the local scope <code>const</code> variable takes its place in stack and thus becomes modifiable, somehow. So, you're not seeing an Access violation error (<em>crash</em>) . However, bear in mind, this is nowhere <em>near</em> guaranteed by the standard.</p>\n"}, {"tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": false, "score": 6, "last_activity_date": 1440588681, "creation_date": 1440588681, "answer_id": 32225469, "question_id": 32225436, "link": "https://stackoverflow.com/questions/32225436/why-does-a-constant-variable-value-change-when-it-is-declared-locally/32225469#32225469", "title": "Why does a constant variable value change when it is declared locally?", "body": "<p>Modifying a <code>const</code> object is <strong>undefined behaviour</strong>.</p>\n\n<blockquote>\n  <p><code>N3337 [dcl.type.cv]/4:</code> Except that any class member declared <code>mutable</code> can be modified, <strong>any attempt to modify a <code>const</code> object during its lifetime results in undefined behaviour.</strong></p>\n</blockquote>\n\n<p>The behaviour of both is valid, along with any other thing you can imagine.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1440588957, "post_id": 32225533, "comment_id": 52333559, "body": "Well done on being the only one actually answering the question, actually explaining why the results are different even though either result is valid."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440589187, "post_id": 32225533, "comment_id": 52333705, "body": "@hvd However, it should be noted that examining why the outcome of undefined behavior ended up in a certain way, is usually pointless practice. It is better to go the other way around and study the cause and effect: what could be the cause of an access violation?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1440589358, "post_id": 32225533, "comment_id": 52333800, "body": "@Lundin I think I know sir, but I don&#39;t prefer to do that in real-time for recent answers, most of time, gets conflicted with an ongoing subsequent edit from OP. So, i left the note. Hope I&#39;m understood."}, {"owner": {"reputation": 75, "user_id": 4404837, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o8rUF0uiNRs/AAAAAAAAAAI/AAAAAAAAAD4/KI7Xo9d8Hig/photo.jpg?sz=128", "display_name": "Vaibhav Gautam", "link": "https://stackoverflow.com/users/4404837/vaibhav-gautam"}, "edited": false, "score": 0, "creation_date": 1440589497, "post_id": 32225533, "comment_id": 52333894, "body": "Thanks for such a quick reply, my doubt is resolved now"}, {"owner": {"reputation": 862, "user_id": 5753034, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/813d3a6cdf75243a4f5fac45207848a2?s=128&d=identicon&r=PG&f=1", "display_name": "AlphaGoku", "link": "https://stackoverflow.com/users/5753034/alphagoku"}, "edited": false, "score": 0, "creation_date": 1513223695, "post_id": 32225533, "comment_id": 82572694, "body": "Will const at local scope always reside on stack? Because i generally define const array tables within functions"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 862, "user_id": 5753034, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/813d3a6cdf75243a4f5fac45207848a2?s=128&d=identicon&r=PG&f=1", "display_name": "AlphaGoku", "link": "https://stackoverflow.com/users/5753034/alphagoku"}, "edited": false, "score": 0, "creation_date": 1513238589, "post_id": 32225533, "comment_id": 82578121, "body": "@AkshayImmanuelD It usually depends on whether they are initialized with compile-time constants only, or with run-time values. Either is possible. In the former case it should hopefully get allocated in ROM, in the latter case in RAM/on the stack."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 9, "last_activity_date": 1440589471, "last_edit_date": 1440589471, "creation_date": 1440588860, "answer_id": 32225533, "question_id": 32225436, "link": "https://stackoverflow.com/questions/32225436/why-does-a-constant-variable-value-change-when-it-is-declared-locally/32225533#32225533", "title": "Why does a constant variable value change when it is declared locally?", "body": "<p>Trying to modify the contents of a <code>const</code> variable is undefined behavior, meaning that it is a bug and anything can happen.</p>\n\n<p>So there is no guarantee that the first case won't crash as well. Why you happened to get away with it, was likely because <code>const</code> variables in local scope tend to be stored on the stack, at runtime. Meaning it happened to be a memory area you could write to. But when you posted it at file scope it ended up in a read-only memory segment instead, resulting in a crash.</p>\n"}, {"tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 3, "last_activity_date": 1440588889, "creation_date": 1440588889, "answer_id": 32225543, "question_id": 32225436, "link": "https://stackoverflow.com/questions/32225436/why-does-a-constant-variable-value-change-when-it-is-declared-locally/32225543#32225543", "title": "Why does a constant variable value change when it is declared locally?", "body": "<p>Once you have a variable declared as <code>const</code> you shouldn't be changing the the value stored using a pointer to the location. This invokes undefined behavior.</p>\n\n<p>Where <code>const</code> variables is stored is completely system dependant, mostly they are stored in read-only locations so trying to write to it will lead to access violation</p>\n"}], "owner": {"reputation": 75, "user_id": 4404837, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o8rUF0uiNRs/AAAAAAAAAAI/AAAAAAAAAD4/KI7Xo9d8Hig/photo.jpg?sz=128", "display_name": "Vaibhav Gautam", "link": "https://stackoverflow.com/users/4404837/vaibhav-gautam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 788, "favorite_count": 0, "closed_date": 1440591544, "answer_count": 4, "score": 0, "last_activity_date": 1440738050, "creation_date": 1440588576, "last_edit_date": 1440738050, "question_id": 32225436, "link": "https://stackoverflow.com/questions/32225436/why-does-a-constant-variable-value-change-when-it-is-declared-locally", "closed_reason": "Duplicate", "title": "Why does a constant variable value change when it is declared locally?", "body": "<p><strong>Scenerio 1</strong>: When the <code>const</code> variable is declared inside <code>main()</code>, i.e., made local</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nmain()\n{\n    const int a = 45;\n\n    * ((int*)&amp;a)=50;\n\n    printf(\"%d\\n\",a);\n    getch();\n\n}\n</code></pre>\n\n<p>Output MVC++:</p>\n\n<blockquote>\n  <p>a=50</p>\n</blockquote>\n\n<p><strong>Scenerio 2</strong>: When the <code>const</code> variable is declare outside <code>main()</code>, i.e., made global</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\nconst int a = 45;\nmain()\n{\n\n    * ((int*)&amp;a)=50;\n\n    printf(\"%d\\n\",a);\n    getch();\n\n}\n</code></pre>\n\n<p>Output MVC++:</p>\n\n<blockquote>\n  <p>Unhandled exception...Acess violation.</p>\n</blockquote>\n\n<p>I understand why I get an error when trying to modify a globally defined <code>const</code> variable. Why, though, am I not getting an error when I try to modify a <code>const</code> variable defined locally?</p>\n"}, {"tags": ["c++", "c", "sonarqube"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5268234, "user_type": "registered", "profile_image": "https://graph.facebook.com/918328871573789/picture?type=large", "display_name": "Madhura Hegde", "link": "https://stackoverflow.com/users/5268234/madhura-hegde"}, "edited": false, "score": 0, "creation_date": 1440667410, "post_id": 32238649, "comment_id": 52371600, "body": "Thanks Sandeep.. I uncommented the sonar.language in properties file now i m getting a new error... the new error is as follows:   ERROR: Error during Sonar runner execution ERROR: Unable to execute Sonar ERROR: Caused by: Language of file &#39;src/HelloWorld.cpp&#39; can not be decided as th e file matches patterns of both sonar.lang.patterns.c++ : <i>*/</i>.cxx,<i>*/</i>.cpp,<i>*/</i> .cc,<i>*/</i>.c,<i>*/</i>.hxx,<i>*/</i>.hpp,<i>*/</i>.hh,<i>*/</i>.h and sonar.lang.patterns.cpp : <i>*/</i>.c c,<i>*/</i>.cpp,<i>*/</i>.cxx,<i>*/</i>.c++,<i>*/</i>.hh,<i>*/</i>.hpp,<i>*/</i>.hxx,<i>*/</i>.h++,<i>*/</i>.ipp"}, {"owner": {"reputation": 1, "user_id": 5268234, "user_type": "registered", "profile_image": "https://graph.facebook.com/918328871573789/picture?type=large", "display_name": "Madhura Hegde", "link": "https://stackoverflow.com/users/5268234/madhura-hegde"}, "edited": false, "score": 0, "creation_date": 1440667725, "post_id": 32238649, "comment_id": 52371833, "body": "Also i ll paste the log file.. pls help me out if you know more about it...    web[o.s.u.c.UpdateCenter] The plugin &#39;csharp&#39; version : 4.0 has not been found on the update center. web[o.s.u.c.UpdateCenter] The plugin &#39;css&#39; version : 1.2 has not been found on the update center. 2015.08.27 10:46:49 INFO  web[o.s.u.c.UpdateCenter] The plugin &#39;cxx&#39; version : 0.9.3 has not been found on the update center."}, {"owner": {"reputation": 1, "user_id": 5268234, "user_type": "registered", "profile_image": "https://graph.facebook.com/918328871573789/picture?type=large", "display_name": "Madhura Hegde", "link": "https://stackoverflow.com/users/5268234/madhura-hegde"}, "edited": false, "score": 0, "creation_date": 1440667747, "post_id": 32238649, "comment_id": 52371843, "body": "web[o.s.u.c.UpdateCenter] The plugin &#39;java&#39; version : 3.0 has not been found on the update center. web[o.s.u.c.UpdateCenter] The plugin &#39;scmgit&#39; version : 1.0 has not been found on the update center. web[o.s.u.c.UpdateCenter] The plugin  web[o.s.u.c.UpdateCenter] The plugin &#39;visualstudio&#39; version : 1.2 has not been found on the update center."}, {"owner": {"reputation": 1, "user_id": 1982645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V0kw3.jpg?s=128&g=1", "display_name": "Sandeep", "link": "https://stackoverflow.com/users/1982645/sandeep"}, "reply_to_user": {"reputation": 1, "user_id": 5268234, "user_type": "registered", "profile_image": "https://graph.facebook.com/918328871573789/picture?type=large", "display_name": "Madhura Hegde", "link": "https://stackoverflow.com/users/5268234/madhura-hegde"}, "edited": false, "score": 0, "creation_date": 1440718690, "post_id": 32238649, "comment_id": 52401855, "body": "Hi Madhura, By looking at the copy of your sonar log it seems that the c++ community plugin as well as few others are not installed on your machine. You should really get log like -"}, {"owner": {"reputation": 1, "user_id": 1982645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V0kw3.jpg?s=128&g=1", "display_name": "Sandeep", "link": "https://stackoverflow.com/users/1982645/sandeep"}, "reply_to_user": {"reputation": 1, "user_id": 5268234, "user_type": "registered", "profile_image": "https://graph.facebook.com/918328871573789/picture?type=large", "display_name": "Madhura Hegde", "link": "https://stackoverflow.com/users/5268234/madhura-hegde"}, "edited": false, "score": 0, "creation_date": 1440718746, "post_id": 32238649, "comment_id": 52401873, "body": "web[o.s.s.p.ServerPluginJarsInstaller] Install plugins web[o.s.s.p.ServerPluginJarsInstaller] Deploy plugin Core / 5.1.2 / 2a52a7106b2bfbd659c591c2d6fc09ad0ab2db5c web[o.s.s.p.ServerPluginJarsInstaller] Deploy plugin Email notifications / 5.1.2 / 2a52a7106b2bfbd659c591c2d6fc09ad0ab2db5c web[o.s.s.p.ServerPluginJarsInstaller] Deploy plugin C# / 4.1 / b6ed44f09b52ed5aa32ad6bcfbf32cce77385ea7 web[o.s.s.p.ServerPluginJarsInstaller] Deploy plugin C++ (Community) / 0.9.4-SNAPSHOT / 0 web[o.s.s.p.ServerPluginJarsInstaller] Deploy plugin Java / 3.4 / b70a82fcfbd4e4ae815fcb523252e6a7c769d676"}, {"owner": {"reputation": 1, "user_id": 1982645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V0kw3.jpg?s=128&g=1", "display_name": "Sandeep", "link": "https://stackoverflow.com/users/1982645/sandeep"}, "reply_to_user": {"reputation": 1, "user_id": 5268234, "user_type": "registered", "profile_image": "https://graph.facebook.com/918328871573789/picture?type=large", "display_name": "Madhura Hegde", "link": "https://stackoverflow.com/users/5268234/madhura-hegde"}, "edited": false, "score": 0, "creation_date": 1440718904, "post_id": 32238649, "comment_id": 52401912, "body": "Do you see the information about C++ (Community) [cxx] plugin v 0.9.3 or 0.94  when you go to Update Center / Installed plugins? You should also see other plugins that are installed? If not I suggest you retry installing the C++ community plugin as per instructions <a href=\"https://github.com/wenns/sonar-cxx/wiki/Installation\" rel=\"nofollow noreferrer\">github.com/wenns/sonar-cxx/wiki/Installation</a>"}, {"owner": {"reputation": 1, "user_id": 1982645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V0kw3.jpg?s=128&g=1", "display_name": "Sandeep", "link": "https://stackoverflow.com/users/1982645/sandeep"}, "reply_to_user": {"reputation": 1, "user_id": 5268234, "user_type": "registered", "profile_image": "https://graph.facebook.com/918328871573789/picture?type=large", "display_name": "Madhura Hegde", "link": "https://stackoverflow.com/users/5268234/madhura-hegde"}, "edited": false, "score": 0, "creation_date": 1440719065, "post_id": 32238649, "comment_id": 52401954, "body": "You can also post your sonar-runner log, that may provide additional clues."}, {"owner": {"reputation": 1, "user_id": 5268234, "user_type": "registered", "profile_image": "https://graph.facebook.com/918328871573789/picture?type=large", "display_name": "Madhura Hegde", "link": "https://stackoverflow.com/users/5268234/madhura-hegde"}, "edited": false, "score": 0, "creation_date": 1440737969, "post_id": 32238649, "comment_id": 52406328, "body": "Hello Sandeep, I get c/c++(community) as shown in  github.com/wenns/sonar-cxx/wiki/Installation after i downloaded and pasted the jar file in  SONAR\\sonarqube\\extensions\\plugins\\ floder when i try to analyse the C/c++ project I get the above mentioned error..."}, {"owner": {"reputation": 1, "user_id": 1982645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V0kw3.jpg?s=128&g=1", "display_name": "Sandeep", "link": "https://stackoverflow.com/users/1982645/sandeep"}, "reply_to_user": {"reputation": 1, "user_id": 5268234, "user_type": "registered", "profile_image": "https://graph.facebook.com/918328871573789/picture?type=large", "display_name": "Madhura Hegde", "link": "https://stackoverflow.com/users/5268234/madhura-hegde"}, "edited": false, "score": 0, "creation_date": 1440973300, "post_id": 32238649, "comment_id": 52479719, "body": "By sonar-runner log I meant the output of sonar-runner executable. You can either copy paste it or upload the output to google drive or some other shared server where I can have a look. It looks like the plugin is either not installed or not being loaded for some reason."}, {"owner": {"reputation": 1, "user_id": 5268234, "user_type": "registered", "profile_image": "https://graph.facebook.com/918328871573789/picture?type=large", "display_name": "Madhura Hegde", "link": "https://stackoverflow.com/users/5268234/madhura-hegde"}, "edited": false, "score": 0, "creation_date": 1440996404, "post_id": 32238649, "comment_id": 52484217, "body": "Hi sandeep, plz share ur email id so tat i can send you the error that I m getting.... thanks in advance"}, {"owner": {"reputation": 1, "user_id": 1982645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V0kw3.jpg?s=128&g=1", "display_name": "Sandeep", "link": "https://stackoverflow.com/users/1982645/sandeep"}, "reply_to_user": {"reputation": 1, "user_id": 5268234, "user_type": "registered", "profile_image": "https://graph.facebook.com/918328871573789/picture?type=large", "display_name": "Madhura Hegde", "link": "https://stackoverflow.com/users/5268234/madhura-hegde"}, "edited": false, "score": 0, "creation_date": 1441091838, "post_id": 32238649, "comment_id": 52525835, "body": "Here is my mangled email address that you will need to unmangle before sending email to me. Sorry to do this - don&#39;t want to invite unnecessary spam - myfirstnameDOTdDOTmylastnameATgmailDOTcom"}], "tags": [], "owner": {"reputation": 1, "user_id": 1982645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V0kw3.jpg?s=128&g=1", "display_name": "Sandeep", "link": "https://stackoverflow.com/users/1982645/sandeep"}, "is_accepted": false, "score": 0, "last_activity_date": 1440634094, "creation_date": 1440634094, "answer_id": 32238649, "question_id": 32225339, "link": "https://stackoverflow.com/questions/32225339/sonarqube-c-c-community-plugin-error/32238649#32238649", "title": "SonarQube c/c++ community plugin error", "body": "<p>Are you able to see the plugin in Sonar settings?\nTry going to the Update Center and install any updates to the plugin if any.\nOtherwise open the sonar project properties and remove/comment out sonar.language property if you have it? Then try again.<br>\nIf the above doesn't work then share the part of log (available at \\sonarqube-5.x\\logs\\sonar.log) that shows the error received. It may give a clue on this error.</p>\n"}], "owner": {"reputation": 1, "user_id": 5268234, "user_type": "registered", "profile_image": "https://graph.facebook.com/918328871573789/picture?type=large", "display_name": "Madhura Hegde", "link": "https://stackoverflow.com/users/5268234/madhura-hegde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1604, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1440634094, "creation_date": 1440588276, "last_edit_date": 1440592452, "question_id": 32225339, "link": "https://stackoverflow.com/questions/32225339/sonarqube-c-c-community-plugin-error", "title": "SonarQube c/c++ community plugin error", "body": "<p>I am new to sonarQube. I installed the C/C++ community plugin following <a href=\"https://github.com/wenns/sonar-cxx\" rel=\"nofollow\">this procedure</a>.</p>\n\n<p>Sonar installed on my windows machine as sonar 5.1 and runner is 2.4. I'm getting the following error when I try to analyse a C/C++ project..</p>\n\n<pre><code>INFO: ------------------------------------------------------------------------\n\nINFO: EXECUTION FAILURE\n\nINFO: ------------------------------------------------------------------------\n\nTotal time: 9.944s\n\nFinal Memory: 16M/78M\nINFO: ------------------------------------------------------------------------\n\nERROR: Error during Sonar runner execution\n\nERROR: Unable to execute Sonar\n\nERROR: Caused by: You must install a plugin that supports the language 'cpp'\n</code></pre>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["c", "for-loop", "infinite-loop"], "comments": [{"owner": {"reputation": 8109, "user_id": 795158, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/46saQ.jpg?s=128&g=1", "display_name": "Ivaylo Slavov", "link": "https://stackoverflow.com/users/795158/ivaylo-slavov"}, "edited": false, "score": 12, "creation_date": 1440587243, "post_id": 32224959, "comment_id": 52332431, "body": "Because any number that is different than zero is considered <code>true</code> for boolean operations. So, the second operand in the for loop is then not the number <code>2</code> but an always <code>true</code> boolean statement."}, {"owner": {"reputation": 6418, "user_id": 2187273, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/eAmJW.jpg?s=128&g=1", "display_name": "Laurent S.", "link": "https://stackoverflow.com/users/2187273/laurent-s"}, "edited": false, "score": 2, "creation_date": 1440587727, "post_id": 32224959, "comment_id": 52332778, "body": "@user5268195 &gt; No you won&#39;t or you won&#39;t stay long here. Maintaining SO&#39;s quality is every community member&#39;s business."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 6, "creation_date": 1440587873, "post_id": 32224959, "comment_id": 52332879, "body": "While this might not be a good or interesting question, it is a valid question as far as SO policies are concerned. Being rude is however not ok."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 4, "creation_date": 1440587888, "post_id": 32224959, "comment_id": 52332896, "body": "This is a bit unacceptable. I&#39;m not sure what the argument is about here - this seems like a perfectly reasonable question to me? The answer might be obvious to those who are more experience with C / C++ programming, but that&#39;s no reason for the hostility towards the OP."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 7, "creation_date": 1440588001, "post_id": 32224959, "comment_id": 52332975, "body": "Also, why close vote for &quot;too broad&quot;? This question is about as narrow as they get."}, {"owner": {"reputation": 55, "user_id": 5268195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bee19a8c7971a81ce461ff8c41648aed?s=128&d=identicon&r=PG", "display_name": "user5268195", "link": "https://stackoverflow.com/users/5268195/user5268195"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1440588115, "post_id": 32224959, "comment_id": 52333048, "body": "@Lundin Hi thanks, I&#39;m new to this app and I&#39;m still figuring out how it works. Bear with me"}, {"owner": {"reputation": 55, "user_id": 5268195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bee19a8c7971a81ce461ff8c41648aed?s=128&d=identicon&r=PG", "display_name": "user5268195", "link": "https://stackoverflow.com/users/5268195/user5268195"}, "reply_to_user": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 2, "creation_date": 1440588185, "post_id": 32224959, "comment_id": 52333090, "body": "@user3728501 Thank you. I&#39;m a beginner learning C programming and i dont have much guidance except this app"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1440589003, "post_id": 32224959, "comment_id": 52333593, "body": "@user5268195 FYI, this is a Q/A site, not an app."}, {"owner": {"reputation": 2027, "user_id": 270654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db8e6e1cf36dfcc4c4d59e4b5827344?s=128&d=identicon&r=PG", "display_name": "nemetroid", "link": "https://stackoverflow.com/users/270654/nemetroid"}, "edited": false, "score": 0, "creation_date": 1440589530, "post_id": 32224959, "comment_id": 52333915, "body": "@user5268195 In that case I&#39;d suggest getting a book. <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">This list</a> has a good number of recommendations."}, {"owner": {"reputation": 55, "user_id": 5268195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bee19a8c7971a81ce461ff8c41648aed?s=128&d=identicon&r=PG", "display_name": "user5268195", "link": "https://stackoverflow.com/users/5268195/user5268195"}, "reply_to_user": {"reputation": 2027, "user_id": 270654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db8e6e1cf36dfcc4c4d59e4b5827344?s=128&d=identicon&r=PG", "display_name": "nemetroid", "link": "https://stackoverflow.com/users/270654/nemetroid"}, "edited": false, "score": 0, "creation_date": 1440589803, "post_id": 32224959, "comment_id": 52334105, "body": "@nemetroid Sure, thanks a lot!"}], "answers": [{"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 4, "last_activity_date": 1440587418, "creation_date": 1440587418, "answer_id": 32225055, "question_id": 32224959, "link": "https://stackoverflow.com/questions/32224959/why-is-for-1-2-3-an-infinite-loop/32225055#32225055", "title": "Why is for (1; 2; 3) an infinite loop?", "body": "<p>In C, all non-zero integers are considered as true. So here,</p>\n\n<pre><code>for (1; 2; 3) \n</code></pre>\n\n<p>2 is a non-zero integer and so, it is an infinite loop. And yes,</p>\n\n<pre><code>for ( ; ; )\n</code></pre>\n\n<p>is also an infinite loop.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1440587604, "creation_date": 1440587604, "answer_id": 32225113, "question_id": 32224959, "link": "https://stackoverflow.com/questions/32224959/why-is-for-1-2-3-an-infinite-loop/32225113#32225113", "title": "Why is for (1; 2; 3) an infinite loop?", "body": "<p><code>for</code> will halt once the second statement evaluates to 0. (An empty statement counts as non-zero in this context).</p>\n\n<p>Yours never does. <code>for(1; 2; 3)</code>, <code>for(; 2;)</code>, and <code>for(;;)</code> will not halt.</p>\n"}, {"comments": [{"owner": {"reputation": 2273, "user_id": 1494085, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6346d34f0486f6a2566d49501fa7cc5d?s=128&d=identicon&r=PG", "display_name": "Sakib Ahammed", "link": "https://stackoverflow.com/users/1494085/sakib-ahammed"}, "edited": false, "score": 0, "creation_date": 1441220453, "post_id": 32225189, "comment_id": 52594968, "body": "@user5268195  If you like this, your should accept this answer. It also help for you."}], "tags": [], "owner": {"reputation": 2273, "user_id": 1494085, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6346d34f0486f6a2566d49501fa7cc5d?s=128&d=identicon&r=PG", "display_name": "Sakib Ahammed", "link": "https://stackoverflow.com/users/1494085/sakib-ahammed"}, "is_accepted": false, "score": 5, "last_activity_date": 1441220675, "last_edit_date": 1441220675, "creation_date": 1440587875, "answer_id": 32225189, "question_id": 32224959, "link": "https://stackoverflow.com/questions/32224959/why-is-for-1-2-3-an-infinite-loop/32225189#32225189", "title": "Why is for (1; 2; 3) an infinite loop?", "body": "<p>Hmm you correct. In <code>C</code> for structure is </p>\n\n<pre><code>for ( initialization; condition; increment/decrement)\n</code></pre>\n\n<p>So, In your code, <code>for (1; 2; 3)</code> here in condition part (ie. middle) is a <code>non-zero (ie. 2)</code> and it,s always true. That's why your code always get <code>true</code> condition and <code>infinite loop</code> occur.  </p>\n\n<p>According to <a href=\"http://www.tutorialspoint.com/cprogramming/c_loops.htm\" rel=\"nofollow\">infinite Loop</a> Definition in <code>For Loop</code>:</p>\n\n<blockquote>\n  <p>When the conditional expression is absent, it is assumed to be true.\n  You may have an initialization and increment expression, but C\n  programmers more commonly use the for( ; ; ) construct to signify an\n  infinite loop.</p>\n</blockquote>\n\n<p>For better Understanding, you can follow <a href=\"http://www.cprogramming.com/tutorial/c/lesson3.html\" rel=\"nofollow\">For Looop</a></p>\n"}], "owner": {"reputation": 55, "user_id": 5268195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bee19a8c7971a81ce461ff8c41648aed?s=128&d=identicon&r=PG", "display_name": "user5268195", "link": "https://stackoverflow.com/users/5268195/user5268195"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 1, "answer_count": 3, "score": -5, "last_activity_date": 1441220675, "creation_date": 1440587119, "last_edit_date": 1440587303, "question_id": 32224959, "link": "https://stackoverflow.com/questions/32224959/why-is-for-1-2-3-an-infinite-loop", "title": "Why is for (1; 2; 3) an infinite loop?", "body": "<p>In a program to print <code>hello</code>:</p>\n\n<pre><code>for (1; 2; 3) \nprintf (\"Hello\"); \n</code></pre>\n\n<p>Why does the output show its an infinite loop? Isn't <code>for ( ; ; )</code> alone an infinite loop? </p>\n"}, {"tags": ["c++", "c", "typedef"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1440588595, "post_id": 32224827, "comment_id": 52333339, "body": "This would be one of many reasons why you should never hide pointers behind typedefs."}], "answers": [{"comments": [{"owner": {"reputation": 8076, "user_id": 1987142, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/561f40bb1f6223405e3bcda69fde03ac?s=128&d=identicon&r=PG", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/1987142/abhishek-jain"}, "edited": false, "score": 0, "creation_date": 1440587106, "post_id": 32224907, "comment_id": 52332339, "body": "I do not think there is any problem with the return type but the input parameter. Secondly, why does it work for the other two func calls func4, func5? My case is whatever that pointer points to is constant and not that pointer is the constant."}, {"owner": {"reputation": 8076, "user_id": 1987142, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/561f40bb1f6223405e3bcda69fde03ac?s=128&d=identicon&r=PG", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/1987142/abhishek-jain"}, "edited": false, "score": 0, "creation_date": 1440587289, "post_id": 32224907, "comment_id": 52332461, "body": "why does const TVPtr means void * const? For that i would have written TVPtr const."}, {"owner": {"reputation": 8076, "user_id": 1987142, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/561f40bb1f6223405e3bcda69fde03ac?s=128&d=identicon&r=PG", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/1987142/abhishek-jain"}, "edited": false, "score": 0, "creation_date": 1440587576, "post_id": 32224907, "comment_id": 52332669, "body": "I want it to interpret it as const void *, what needs to be done?"}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "reply_to_user": {"reputation": 8076, "user_id": 1987142, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/561f40bb1f6223405e3bcda69fde03ac?s=128&d=identicon&r=PG", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/1987142/abhishek-jain"}, "edited": false, "score": 1, "creation_date": 1440587695, "post_id": 32224907, "comment_id": 52332748, "body": "Use <code>const void*</code>. There is NO way you can use the typedef and mean it <code>const void*</code>. You could define another typedef for <code>const void*</code> though."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 1, "creation_date": 1440587837, "post_id": 32224907, "comment_id": 52332854, "body": "You could say something horrible like <code>const typename std::remove_pointer&lt;TVPtr&gt;::type*</code>, but then why not just say <code>const void*</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1440587880, "post_id": 32224907, "comment_id": 52332885, "body": "@Nawaz you just gave a long explanation of why <code>void const *</code> is a good idea and then in comments you suggest <code>const void *</code>  &gt;.&gt;"}, {"owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1440588230, "post_id": 32224907, "comment_id": 52333116, "body": "@MattMcNabb: Good catch. I was actually being conformist, after I saw Abhishek using <code>const void*</code> and others who has this practice. Sometime, I save time by saying exactly what they want, especially when I&#39;ve already said enough."}], "tags": [], "owner": {"reputation": 325758, "user_id": 415784, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2WX9Z.jpg?s=128&g=1", "display_name": "Nawaz", "link": "https://stackoverflow.com/users/415784/nawaz"}, "is_accepted": true, "score": 6, "last_activity_date": 1440587853, "last_edit_date": 1592644375, "creation_date": 1440586987, "answer_id": 32224907, "question_id": 32224827, "link": "https://stackoverflow.com/questions/32224827/typedef-with-const-and-without-const-qualifier/32224907#32224907", "title": "typedef with const and without const qualifier", "body": "<pre><code>const TVPtr\n</code></pre>\n<p>means:</p>\n<pre><code>void * const  //correct\n</code></pre>\n<p><strong>not</strong> this:</p>\n<pre><code>const void*   //wrong\n</code></pre>\n<p>which you seems to think.</p>\n<hr />\n<h3>Visualization has power to influence your understanding.</h3>\n<p>This is one reason why I believe putting <code>const</code> after the type is a better practice. So if you have this practice:</p>\n<pre><code>void const * x;\n</code></pre>\n<p>instead of</p>\n<pre><code>const void * x; //same as void const *x!\n</code></pre>\n<p>then it helps with typedef and template.</p>\n<p>For example, take this typedef:</p>\n<pre><code>typedef void* voidptr;\n</code></pre>\n<p>Now if you write the following and try to visualize what it is:</p>\n<pre><code>voidptr const x;\n</code></pre>\n<p>then you're more likely to visualize it as:</p>\n<pre><code>void* const x; //correct\n</code></pre>\n<p>which is in fact what it is.</p>\n<p>With <code>const</code> before the type is counter-intuitive:</p>\n<pre><code>const voidptr x;\n</code></pre>\n<p>seems to be:</p>\n<pre><code>const void* x; //wrong\n</code></pre>\n<p>which is actually wrong \u2014 it is still this:</p>\n<pre><code> void* const x; //correct\n</code></pre>\n<p>So putting <code>const</code> after the type helps visualizing the final type.</p>\n"}, {"comments": [{"owner": {"reputation": 8076, "user_id": 1987142, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/561f40bb1f6223405e3bcda69fde03ac?s=128&d=identicon&r=PG", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/1987142/abhishek-jain"}, "edited": false, "score": 0, "creation_date": 1440587416, "post_id": 32224921, "comment_id": 52332556, "body": "why does it take const TVPtr as void * const? For that i would have written TVPtr const."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "reply_to_user": {"reputation": 8076, "user_id": 1987142, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/561f40bb1f6223405e3bcda69fde03ac?s=128&d=identicon&r=PG", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/1987142/abhishek-jain"}, "edited": false, "score": 4, "creation_date": 1440587536, "post_id": 32224921, "comment_id": 52332637, "body": "<code>TVPtr</code> is a pointer, so adding <code>const</code> makes it a <code>const</code> pointer. It doesn&#39;t inject <code>const</code>ness into the type."}], "tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": false, "score": 7, "last_activity_date": 1440587016, "creation_date": 1440587016, "answer_id": 32224921, "question_id": 32224827, "link": "https://stackoverflow.com/questions/32224827/typedef-with-const-and-without-const-qualifier/32224921#32224921", "title": "typedef with const and without const qualifier", "body": "<p><code>const TVPtr</code> is not <code>const void*</code>, it's <code>void* const</code>. In other words, it's not a pointer to <code>const void</code>, it's a <code>const</code> pointer to <code>void</code>. Since <code>i</code> is declared <code>const</code> it will happily bind to a <code>const void*</code>, but not a <code>void* const</code>, because that discards the <code>const</code>ness of the object itself.</p>\n"}, {"tags": [], "owner": {"reputation": 719, "user_id": 1083220, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/0e36597bde57aaf26954f464b79f5df4?s=128&d=identicon&r=PG&f=1", "display_name": "Misgevolution", "link": "https://stackoverflow.com/users/1083220/misgevolution"}, "is_accepted": false, "score": 0, "last_activity_date": 1440589063, "creation_date": 1440589063, "answer_id": 32225616, "question_id": 32224827, "link": "https://stackoverflow.com/questions/32224827/typedef-with-const-and-without-const-qualifier/32225616#32225616", "title": "typedef with const and without const qualifier", "body": "<p>func3 expects a non const type and promises not to change it via the const keyword preceding the type in the argument list. The others are fine with taking pointers to const types since  CTVPtr is a pointer to const data.</p>\n\n<p>I think the confusion came from the const key word you used which actually meant func3 will not change the data pointed by p rather than saying func3 will accept a const TVPtr.</p>\n\n<p>If you really want to pass address of i to func3, you can cast it like this</p>\n\n<pre><code>func3( (void*)&amp;i);\n</code></pre>\n"}], "owner": {"reputation": 8076, "user_id": 1987142, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/561f40bb1f6223405e3bcda69fde03ac?s=128&d=identicon&r=PG", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/1987142/abhishek-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 929, "favorite_count": 1, "accepted_answer_id": 32224907, "answer_count": 3, "score": 0, "last_activity_date": 1440589063, "creation_date": 1440586747, "question_id": 32224827, "link": "https://stackoverflow.com/questions/32224827/typedef-with-const-and-without-const-qualifier", "title": "typedef with const and without const qualifier", "body": "<pre><code>    typedef void* TVPtr;\n    typedef const void* CTVPtr;\n\nconst TVPtr func3 (const TVPtr p)\n{\n    return p;\n}\n\nconst void* func4 (const void* p)\n{\n    return p;\n}\n\nCTVPtr func5 (CTVPtr p)\n{\n    return p;\n}\n\n\nint main ()\n{\n    const uint64_t i = 10;\n\n    func3(&amp;i);  // compilation error here\n                // cannot convert argument 1 from 'const uint64_t *' \n                // to 'const TVPtr' Conversion loses qualifiers    \n    func4(&amp;i);  // no compilation error\n    func5(&amp;i);  // no compilation error\n    return 0;\n\n}\n</code></pre>\n\n<p>I do not understand why there is error is one case and not in the other two?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 11, "creation_date": 1440586608, "post_id": 32224668, "comment_id": 52332008, "body": "<code>x = func(x, x++)</code> is undefined behavior."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 5, "creation_date": 1440586979, "post_id": 32224668, "comment_id": 52332265, "body": "<code>0.5++</code> would be an error; <code>++</code> may only be applied to lvalues"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1440587103, "post_id": 32224668, "comment_id": 52332335, "body": "<a href=\"http://stackoverflow.com/questions/949433/why-are-these-constructs-using-undefined-behavior\" title=\"why are these constructs using undefined behavior\">stackoverflow.com/questions/949433/&hellip;</a>"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1440587292, "post_id": 32224668, "comment_id": 52332463, "body": "Aside from all the undefined behavior, did you mean <code>==</code> instead of <code>=</code>?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1440587316, "post_id": 32224668, "comment_id": 52332478, "body": "Plase STOP writing code that is ambiguous at best, UB at worst.  Would like to debug that crap?  No?  Then don&#39;t write it, and don&#39;t post it here for explanations:("}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440587392, "post_id": 32224668, "comment_id": 52332539, "body": "I&#39;m voting to close this question as off-topic because seeks explanation of bad code and is of negative value to future SO visitors."}, {"owner": {"reputation": 115, "user_id": 4813359, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ad19f865b6012cc3e3e3ae0fdbab906a?s=128&d=identicon&r=PG&f=1", "display_name": "Shanbhag Vinit", "link": "https://stackoverflow.com/users/4813359/shanbhag-vinit"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1440587547, "post_id": 32224668, "comment_id": 52332645, "body": "@MartinJames please do not do that. I m seeking explanation for one grave doubt i had. can u please tell me what is 0.5++? Is it 1.0 or 1.5 and also why/"}, {"owner": {"reputation": 115, "user_id": 4813359, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ad19f865b6012cc3e3e3ae0fdbab906a?s=128&d=identicon&r=PG&f=1", "display_name": "Shanbhag Vinit", "link": "https://stackoverflow.com/users/4813359/shanbhag-vinit"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1440587999, "post_id": 32224668, "comment_id": 52332973, "body": "@Jens it is assignment using =. The value returned by the function has been assigned back to x"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1440667514, "post_id": 32224668, "comment_id": 52371682, "body": "Why are you seeking explanations for bad code?  Why do you think it&#39;s useful for future visitors to SO?  Why is the doubt so grave?  &#39;func(x, x++)&#39; is just stupid anyone who looks at it can see that.  Why are you so insistent on writing really, obviously, bad code and then asking others for explanations?  It&#39;s irrational behaviour, as well as undefined."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440667637, "post_id": 32224668, "comment_id": 52371777, "body": "Now, come clean - you didn&#39;t really write this rubbish yourself, did you?"}], "answers": [{"comments": [{"owner": {"reputation": 579, "user_id": 5226749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Ta78V.png?s=128&g=1", "display_name": "Vito Royeca", "link": "https://stackoverflow.com/users/5226749/vito-royeca"}, "reply_to_user": {"reputation": 79470, "user_id": 104790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f501c89b28ff1d1d81ba272aef89d59?s=128&d=identicon&r=PG", "display_name": "Nikolai Ruhe", "link": "https://stackoverflow.com/users/104790/nikolai-ruhe"}, "edited": false, "score": 0, "creation_date": 1440587053, "post_id": 32224838, "comment_id": 52332309, "body": "Comparison vs. assignment."}], "tags": [], "owner": {"reputation": 579, "user_id": 5226749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Ta78V.png?s=128&g=1", "display_name": "Vito Royeca", "link": "https://stackoverflow.com/users/5226749/vito-royeca"}, "is_accepted": false, "score": -4, "last_activity_date": 1440586781, "creation_date": 1440586781, "answer_id": 32224838, "question_id": 32224668, "link": "https://stackoverflow.com/questions/32224668/what-is-0-5-in-c/32224838#32224838", "title": "What is 0.5++ in c", "body": "<p>The line:</p>\n\n<pre><code>if (x = func(x, x++))\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>if (x == func(x, x++))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 4813359, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ad19f865b6012cc3e3e3ae0fdbab906a?s=128&d=identicon&r=PG&f=1", "display_name": "Shanbhag Vinit", "link": "https://stackoverflow.com/users/4813359/shanbhag-vinit"}, "edited": false, "score": 0, "creation_date": 1440586904, "post_id": 32224849, "comment_id": 52332223, "body": "I hope not. It executed properly to yield answer 1.25"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 115, "user_id": 4813359, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ad19f865b6012cc3e3e3ae0fdbab906a?s=128&d=identicon&r=PG&f=1", "display_name": "Shanbhag Vinit", "link": "https://stackoverflow.com/users/4813359/shanbhag-vinit"}, "edited": false, "score": 2, "creation_date": 1440586954, "post_id": 32224849, "comment_id": 52332245, "body": "@user282528 hope doesn&#39;t get you far in C++! :)"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 115, "user_id": 4813359, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ad19f865b6012cc3e3e3ae0fdbab906a?s=128&d=identicon&r=PG&f=1", "display_name": "Shanbhag Vinit", "link": "https://stackoverflow.com/users/4813359/shanbhag-vinit"}, "edited": false, "score": 2, "creation_date": 1440586964, "post_id": 32224849, "comment_id": 52332258, "body": "@user282528 Undefined bbehaviour can give you anything .Thus it is  possible that it can give you correct answer."}, {"owner": {"reputation": 115, "user_id": 4813359, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ad19f865b6012cc3e3e3ae0fdbab906a?s=128&d=identicon&r=PG&f=1", "display_name": "Shanbhag Vinit", "link": "https://stackoverflow.com/users/4813359/shanbhag-vinit"}, "edited": false, "score": 0, "creation_date": 1440587302, "post_id": 32224849, "comment_id": 52332469, "body": "@ameyCU leave all that execution sequence, can u tell me what is 0.5++?  Is it 1 or 0.5+1=1.5? Also how?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 115, "user_id": 4813359, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ad19f865b6012cc3e3e3ae0fdbab906a?s=128&d=identicon&r=PG&f=1", "display_name": "Shanbhag Vinit", "link": "https://stackoverflow.com/users/4813359/shanbhag-vinit"}, "edited": false, "score": 0, "creation_date": 1440587449, "post_id": 32224849, "comment_id": 52332580, "body": "@user282528 ++ means add 1 of the appropriate type. So if you fix your code to remove the undefined behavior and change the code so that it actually performs <code>float x=0.5; x++</code>, you should get the answer 1.5."}, {"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "reply_to_user": {"reputation": 115, "user_id": 4813359, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ad19f865b6012cc3e3e3ae0fdbab906a?s=128&d=identicon&r=PG&f=1", "display_name": "Shanbhag Vinit", "link": "https://stackoverflow.com/users/4813359/shanbhag-vinit"}, "edited": false, "score": 0, "creation_date": 1440587484, "post_id": 32224849, "comment_id": 52332601, "body": "@user282528 <code>0.5++</code> is <code>1.5</code>. To verify print the value of <code>x</code> and <code>y</code> in <code>func()</code>. Either <code>x</code> or <code>y</code> will be <code>1.5</code>"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 115, "user_id": 4813359, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ad19f865b6012cc3e3e3ae0fdbab906a?s=128&d=identicon&r=PG&f=1", "display_name": "Shanbhag Vinit", "link": "https://stackoverflow.com/users/4813359/shanbhag-vinit"}, "edited": false, "score": 1, "creation_date": 1440587488, "post_id": 32224849, "comment_id": 52332606, "body": "@user282528  That would lead to 1.5. Try and print it .See here fr example-<a href=\"https://ideone.com/oBErHD\" rel=\"nofollow noreferrer\">ideone.com/oBErHD</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 115, "user_id": 4813359, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ad19f865b6012cc3e3e3ae0fdbab906a?s=128&d=identicon&r=PG&f=1", "display_name": "Shanbhag Vinit", "link": "https://stackoverflow.com/users/4813359/shanbhag-vinit"}, "edited": false, "score": 0, "creation_date": 1440588543, "post_id": 32224849, "comment_id": 52333306, "body": "@user282528 you need to know what <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a> is. <a href=\"http://catb.org/jargon/html/N/nasal-demons.html\" rel=\"nofollow noreferrer\">catb.org/jargon/html/N/nasal-demons.html</a>"}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 7, "last_activity_date": 1440588139, "last_edit_date": 1440588139, "creation_date": 1440586801, "answer_id": 32224849, "question_id": 32224668, "link": "https://stackoverflow.com/questions/32224668/what-is-0-5-in-c/32224849#32224849", "title": "What is 0.5++ in c", "body": "<pre><code>(x = func(x, x++))\n</code></pre>\n\n<p>This exhibhit's <em>undefined behaviour</em>. As you tend to change value of <code>x</code> more than one time in a single execution line.</p>\n\n<p>As per standards </p>\n\n<blockquote>\n  <p>C99 \u00a76.5: \u201c2. Between the previous and next sequence point an object shall have its stored value modified at most once by the evaluation of an expression. Furthermore, the prior value shall be read only to determine the value to be stored.\u201d</p>\n</blockquote>\n\n<p>Apart from this-</p>\n\n<p>As you asked in comment what will be <code>x++;</code>? </p>\n\n<p>As <code>++</code> increment value by <code>1</code> ,thus expression <code>x++;</code> will yield you <code>1.5</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 4813359, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ad19f865b6012cc3e3e3ae0fdbab906a?s=128&d=identicon&r=PG&f=1", "display_name": "Shanbhag Vinit", "link": "https://stackoverflow.com/users/4813359/shanbhag-vinit"}, "edited": false, "score": 0, "creation_date": 1440588455, "post_id": 32224944, "comment_id": 52333254, "body": "Thank you very much... It helped me... At least for u it didnt seem like crap code which cannot be debugged. Thanks a lot"}], "tags": [], "owner": {"reputation": 2027, "user_id": 270654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db8e6e1cf36dfcc4c4d59e4b5827344?s=128&d=identicon&r=PG", "display_name": "nemetroid", "link": "https://stackoverflow.com/users/270654/nemetroid"}, "is_accepted": false, "score": 7, "last_activity_date": 1440587730, "last_edit_date": 1440587730, "creation_date": 1440587071, "answer_id": 32224944, "question_id": 32224668, "link": "https://stackoverflow.com/questions/32224668/what-is-0-5-in-c/32224944#32224944", "title": "What is 0.5++ in c", "body": "<p>Point 6.5:2 of the C99 standard says:</p>\n\n<blockquote>\n  <p>Between the previous and next sequence point an object shall have its stored value modified at most once by the evaluation of an expression. Furthermore, the prior value shall be read only to determine the value to be stored.</p>\n</blockquote>\n\n<p>There is no sequence point between the evaluations of function arguments, so <code>func(x, x++)</code> breaks this rule and hence its behaviour is undefined.</p>\n\n<p>Regarding <code>0.5++</code>, that expression is illegal since it is equivalent to <code>0.5 += 1</code>, and you thankfully can't assign to constants. However, the following code:</p>\n\n<pre><code>float x = 0.5f;\nx++;\nprintf(\"%f\", x);\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>float x = 0.5f;\nx += 1;\nprintf(\"%f\", x);\n</code></pre>\n\n<p>and will print <code>1.500000</code> as expected.</p>\n"}, {"tags": [], "owner": {"reputation": 79470, "user_id": 104790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f501c89b28ff1d1d81ba272aef89d59?s=128&d=identicon&r=PG", "display_name": "Nikolai Ruhe", "link": "https://stackoverflow.com/users/104790/nikolai-ruhe"}, "is_accepted": false, "score": 2, "last_activity_date": 1440605558, "creation_date": 1440605558, "answer_id": 32231646, "question_id": 32224668, "link": "https://stackoverflow.com/questions/32224668/what-is-0-5-in-c/32231646#32231646", "title": "What is 0.5++ in c", "body": "<p>As others have explained, the posted code contains undefined behavior and, as such, is meaningless.</p>\n\n<p>So let's assume you changed your question to...</p>\n\n<blockquote>\n  <p>Can you please tell me what is 0.5++? Is it 1.0 or 1.5 and also why?</p>\n</blockquote>\n\n<p>Neither: <code>0.5++</code> is not valid C code.</p>\n\n<blockquote>\n  <p>C99 \u00a76.5.2.4 Constraints: 1. The operand of the postfix increment [...] shall be a modifiable lvalue.</p>\n</blockquote>\n\n<p>This means it must be something where a value can be stored. <code>0.5</code> is a constant and can't be modified.</p>\n\n<p>If you again change your question to:</p>\n\n<blockquote>\n  <p>float x = 0.5;</p>\n  \n  <p>printf(\"%f\\n\", x++);</p>\n  \n  <p>What's the printed value?</p>\n</blockquote>\n\n<p>... then we're finally down to proper C. The value printed would be \"<code>0.500000</code>\", as the result of the postfix operator is the value <em>before</em> the increment.</p>\n\n<p>The new value of x is <code>1.5</code>. See</p>\n\n<blockquote>\n  <p>C99 \u00a76.5.2.4 Semantics: 2. The result of the postfix ++ operator is the value of the operand. As a side effect, the value of the operand object is incremented (that is, the value 1 of the appropriate type is added to it).</p>\n</blockquote>\n"}], "owner": {"reputation": 115, "user_id": 4813359, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ad19f865b6012cc3e3e3ae0fdbab906a?s=128&d=identicon&r=PG&f=1", "display_name": "Shanbhag Vinit", "link": "https://stackoverflow.com/users/4813359/shanbhag-vinit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "answer_count": 4, "score": -4, "last_activity_date": 1440605558, "creation_date": 1440586301, "question_id": 32224668, "link": "https://stackoverflow.com/questions/32224668/what-is-0-5-in-c", "title": "What is 0.5++ in c", "body": "<p>I have a doubt in the following code snippet</p>\n\n<pre><code>float func(float x, float y)\n{ \n return x*0.5 + y;\n}\nint main()\n{\n float x = 0.5;\n if (x = func(x, x++))\n {\n  printf(\"%f\\n\", x);\n }   \n}\n</code></pre>\n\n<p>The answer of the above code comes to 1.250000. In the function call x++ means 0.5++. Function passes 1.0 through x++ parameter. I want to know what does 0.5++ mean? why it adds one more 0.5 instead of adding 1.0? Please help me</p>\n"}, {"tags": ["c++", "objective-c", "c", "realm"], "answers": [{"tags": [], "owner": {"reputation": 50374, "user_id": 568283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120ceee2dc40d539b9983265a2e0a2f8?s=128&d=identicon&r=PG", "display_name": "CRD", "link": "https://stackoverflow.com/users/568283/crd"}, "is_accepted": true, "score": 2, "last_activity_date": 1440593229, "creation_date": 1440593229, "answer_id": 32227085, "question_id": 32224612, "link": "https://stackoverflow.com/questions/32224612/can-you-call-objective-c-methods-from-c-c/32227085#32227085", "title": "Can you call Objective-C methods from C/C++?", "body": "<p>Its not the lack of C/C++ bindings that's your problem, rather that Realm only runs on iOS and Android - there is no Realm for Blackberry and Windows Phone.</p>\n\n<p>The source is public domain though (Apache 2 licence), so you could consider porting it yourself...</p>\n"}], "owner": {"reputation": 579, "user_id": 5226749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Ta78V.png?s=128&g=1", "display_name": "Vito Royeca", "link": "https://stackoverflow.com/users/5226749/vito-royeca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 32227085, "answer_count": 1, "score": 1, "last_activity_date": 1440593229, "creation_date": 1440586136, "last_edit_date": 1440587486, "question_id": 32224612, "link": "https://stackoverflow.com/questions/32224612/can-you-call-objective-c-methods-from-c-c", "title": "Can you call Objective-C methods from C/C++?", "body": "<p>The Realm mobile database have Objective-C and Java bindings, suitable for iOS and Android respectively.</p>\n\n<p>However I want to use Realm in Blackberry and Windows Phone and Realm has no C/C++ bindings yet.</p>\n\n<p>My question is: can you link/call Objective-C library from C/C++, with Realm library to be used in Blackberry and Windows Phone in particular?</p>\n"}, {"tags": ["c", "math", "trigonometry"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1440586388, "post_id": 32224454, "comment_id": 52331833, "body": "Not quite sure what you intend exactly, but if you want all sprites to move on the same sine wave, your sine argument shouldn&#39;t depend on time, which is the same for all sprites, but on the sprites&#39;  <i>x</i> positions."}, {"owner": {"reputation": 65, "user_id": 5234708, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c07fb7972cd605bdf2ea4e6b1400ce42?s=128&d=identicon&r=PG&f=1", "display_name": "Nean", "link": "https://stackoverflow.com/users/5234708/nean"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1440587195, "post_id": 32224454, "comment_id": 52332402, "body": "I am trying to achieve something like this <a href=\"https://www.youtube.com/watch?v=Ol9TsSs-9ok&amp;feature=youtu.be&amp;t=1m38s\" rel=\"nofollow noreferrer\">youtube.com/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "is_accepted": false, "score": 0, "last_activity_date": 1440588438, "last_edit_date": 1440588438, "creation_date": 1440587959, "answer_id": 32225225, "question_id": 32224454, "link": "https://stackoverflow.com/questions/32224454/moving-sprites-in-sine-wave/32225225#32225225", "title": "Moving sprites in sine wave", "body": "<p>Let <code>v=(v_x,v_y)</code> be the overall direction of the enemy.  Let <code>o</code> be the vector <code>o=(-v_y/||v||,v_x/||v||)</code> where <code>||v||=sqrt(v_x.v_x+v_y.v_y)</code> is the norm of <code>v</code>. The vector <code>o</code> is perpendicular to <code>v</code>. A sinusoidal motion is wanted in that direction. Consequently, the position <code>p(t)=(x(t),y(t))</code> is defined as :</p>\n\n<pre><code>x(t)=v_x.t-A.v_y/||v||.sin(w.t)\ny(t)=v_y.t+A.v_x/||v||.sin(w.t)\n</code></pre>\n\n<p>where <code>A</code> is the magnitude of the ossilations and <code>w</code> the pulsation of the ossilations. The corresponding frequency is <code>f=w/(2pi)</code>.Then, the wavelength <code>lambda=||v||/f</code> corresponds to the length of ossilations.</p>\n\n<p>If the enemy is moving in the x direction (<code>v_y=0</code>) then :</p>\n\n<pre><code>x(t)=v_x.t\ny(t)=A.sin(w.t)\n</code></pre>\n\n<p>The length of ossilations is <code>lambda=2pi.v_x/w</code>.</p>\n"}], "owner": {"reputation": 65, "user_id": 5234708, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c07fb7972cd605bdf2ea4e6b1400ce42?s=128&d=identicon&r=PG&f=1", "display_name": "Nean", "link": "https://stackoverflow.com/users/5234708/nean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440588438, "creation_date": 1440585719, "question_id": 32224454, "link": "https://stackoverflow.com/questions/32224454/moving-sprites-in-sine-wave", "title": "Moving sprites in sine wave", "body": "<p>can someone slap me an idea or math formula on how to make my enemies move in a sine wave</p>\n\n<p>tried something like this but they just move at the same time so they just create a straight line of enemies moving left and right. </p>\n\n<pre><code>for(int i = 0; i &lt; 5; i++){\n  float y = sinf( 100+delta_time*0.06f) * 75;\n  float x = game-&gt;enemy[i].base_x + y;\n  game-&gt;enemy[i].x = x  ;  \n  game-&gt;enemy[i].y += 1; \n  SDL_Rect rect = { game-&gt;enemy[i].x ,   game-&gt;enemy[i].y   ,game-&gt;enemy[i].w, game-&gt;enemy[i].h};\n  SDL_RenderCopy(game-&gt;renderer , game-&gt;enemy[i].sprite , NULL , &amp;rect);\n}\n</code></pre>\n"}, {"tags": ["c", "server", "iostream", "gio"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 3324726, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de88f76e505d464c0d59d77ef1c4ab02?s=128&d=identicon&r=PG&f=1", "display_name": "robinchm", "link": "https://stackoverflow.com/users/3324726/robinchm"}, "edited": false, "score": 0, "creation_date": 1440588691, "post_id": 32224484, "comment_id": 52333399, "body": "Tested and it works. May I ask that when I run a loop within which I call g_input_stream_read(), and there is at the moment no input, does the function return and the loop continues till there is some input (something like polling), or does it block in this thread waiting for the input?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 99, "user_id": 3324726, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de88f76e505d464c0d59d77ef1c4ab02?s=128&d=identicon&r=PG&f=1", "display_name": "robinchm", "link": "https://stackoverflow.com/users/3324726/robinchm"}, "edited": false, "score": 0, "creation_date": 1440588807, "post_id": 32224484, "comment_id": 52333473, "body": "@robinchm Sockets are by default <i>blocking</i>, and this goes up all the way in the chain, meaning that when you read from a blocking socket, the read call (whatever function it is) should block until there&#39;s something to read."}, {"owner": {"reputation": 99, "user_id": 3324726, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de88f76e505d464c0d59d77ef1c4ab02?s=128&d=identicon&r=PG&f=1", "display_name": "robinchm", "link": "https://stackoverflow.com/users/3324726/robinchm"}, "edited": false, "score": 0, "creation_date": 1440589173, "post_id": 32224484, "comment_id": 52333700, "body": "Thanks a lot! Because gio provides also asynchronous io and different kinds of socketservice in their manuals, but no example to illustrate their usage, I struggled quite a lot learning it."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1440585807, "creation_date": 1440585807, "answer_id": 32224484, "question_id": 32224354, "link": "https://stackoverflow.com/questions/32224354/simple-threaded-server-implemented-by-gio-library/32224484#32224484", "title": "Simple threaded server implemented by gio library", "body": "<p>The problem is that you use <code>g_input_stream_read_all</code>. Notice the suffix <code>all</code> in the name? It means that it will attempt to read the size you pass to it, only returning when it has received <em>all</em> those bytes or there is an error or disconnection.</p>\n\n<p>Instead use e.g. <code>g_input_stream_read</code> in a loop.</p>\n"}], "owner": {"reputation": 99, "user_id": 3324726, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/de88f76e505d464c0d59d77ef1c4ab02?s=128&d=identicon&r=PG&f=1", "display_name": "robinchm", "link": "https://stackoverflow.com/users/3324726/robinchm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 32224484, "answer_count": 1, "score": 0, "last_activity_date": 1440585807, "creation_date": 1440585464, "question_id": 32224354, "link": "https://stackoverflow.com/questions/32224354/simple-threaded-server-implemented-by-gio-library", "title": "Simple threaded server implemented by gio library", "body": "<p>I am trying to learn gio library, especially the giostream and gthreadedsocketservice. I want to write a simple server that:</p>\n\n<ol>\n<li>Each incoming connection will be handled by an individual new thread</li>\n<li>At the client side, user types a string and it will be sent to the server; at the server side upon receiving the string, immediately displays it to stdout.</li>\n<li>Unless server or client is terminated, the connection is not closed. Namely multiple messages can be sent from client to server without the need to connect multiple times.</li>\n</ol>\n\n<p>The code I tried is:\nClient-side:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;glib.h&gt;\n#include &lt;gio/gio.h&gt;\n\nint main(int argc, char* argv[]){\n GError* error = NULL;\n GSocketConnection* connection = NULL;\n GOutputStream* ostream = NULL;\n GSocketClient* client = g_socket_client_new();\n gchar message[1024];\n\n connection = g_socket_client_connect_to_host(client, (gchar*)\"localhost\", 1500, NULL, &amp;error);\n\n if (error) {\n  g_error(error-&gt;message);\n  g_error_free(error);\n  return 1;\n }\n else g_print(\"Message: connected.\\n\");\n\n while(TRUE){\n  scanf(\"%s\", message);\n  ostream = g_io_stream_get_output_stream(G_IO_STREAM(connection));\n  g_output_stream_write(ostream, message, strlen(message), NULL, &amp;error);\n  if (error) {\n   g_error(error-&gt;message);\n   g_error_free(error);\n   return 1;\n  }\n }\n\n g_print(\"Message: client terminated.\\n\");\n return 0;\n}\n</code></pre>\n\n<p>Server-side:</p>\n\n<pre><code>#include &lt;glib.h&gt;\n#include &lt;gio/gio.h&gt;\n\ngboolean run_callback(GThreadedSocketService*, GSocketConnection*, GObject*, gpointer);\n\nint main(int argc, char **argv){\n int port = 1500;\n GError* error = NULL;\n GMainLoop* loop = NULL;\n GThreadedSocketService* service = NULL;\n\n service = (GThreadedSocketService*)g_threaded_socket_service_new(-1);\n g_socket_listener_add_inet_port((GSocketListener*)service, port, NULL, &amp;error);\n if (error != NULL) {g_error(error-&gt;message);}\n g_signal_connect(service, \"run\", G_CALLBACK(run_callback), NULL);\n g_socket_service_start((GSocketService*)service);\n g_print(\"Message: server launched...\\n\");\n loop = g_main_loop_new(NULL, FALSE);\n g_main_loop_run(loop);\n\n return 0;\n}\n\ngboolean run_callback(GThreadedSocketService* service, GSocketConnection* connection, GObject* source_object, gpointer user_data){\n GInputStream* instream = NULL;\n gchar message[1024];\n GError* error = NULL;\n\n instream = g_io_stream_get_input_stream(G_IO_STREAM(connection));\n g_input_stream_read_all(instream, message, 1024, NULL, NULL, &amp;error);\n if (error != NULL) {\n  g_error(error-&gt;message);\n  g_error_free(error);\n  return FALSE;\n }\n g_print(\"Received: %s\\n\", message);\n\n g_print(\"Message: connection terminated.\\n\");\n if (error) g_error_free(error);\n return FALSE;\n}\n</code></pre>\n\n<p>The problem is when I tested it out, on client side I typed three lines:</p>\n\n<pre><code>aaa\nbbb\nccc\n</code></pre>\n\n<p>But nothing is shown on the server side. Only when I exit the client, on the server screen it shows:</p>\n\n<pre><code>aaabbbccc\n</code></pre>\n\n<p>But what I wanted was when I type \"aaa\" and entered, it immediately shows up on the server screen.</p>\n\n<p>Any idea on where it goes wrong?</p>\n"}, {"tags": ["c", "posix"], "comments": [{"owner": {"reputation": 6112, "user_id": 13075, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7Cove.jpg?s=128&g=1", "display_name": "Henrik Aasted S&#248;rensen", "link": "https://stackoverflow.com/users/13075/henrik-aasted-s%c3%b8rensen"}, "edited": false, "score": 0, "creation_date": 1440586137, "post_id": 32224035, "comment_id": 52331679, "body": "You get segfault when compiling?? Not when running?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1440588302, "post_id": 32224035, "comment_id": 52333152, "body": "If you are using gcc then you should also be using gdb."}, {"owner": {"reputation": 395, "user_id": 3891947, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/edSJ2.jpg?s=128&g=1", "display_name": "toantruong", "link": "https://stackoverflow.com/users/3891947/toantruong"}, "edited": false, "score": 0, "creation_date": 1440668972, "post_id": 32224035, "comment_id": 52372667, "body": "Poor me, I am not pass an integer argument."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1572991489, "post_id": 32224035, "comment_id": 103733167, "body": "Please extract and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. One thing I noticed above is that you don&#39;t include a single header, which can cause various issues."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 5159937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08c623b789617f91d261446e8a002b27?s=128&d=identicon&r=PG", "display_name": "lforg37", "link": "https://stackoverflow.com/users/5159937/lforg37"}, "edited": false, "score": 0, "creation_date": 1440591081, "post_id": 32226105, "comment_id": 52334930, "body": "Also, at line 22 you should probably compute the length of the string representing the computed value and increment ptr of this length instead of 1. This way numbers with more than one digit will not be truncated."}], "tags": [], "owner": {"reputation": 95, "user_id": 5159937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08c623b789617f91d261446e8a002b27?s=128&d=identicon&r=PG", "display_name": "lforg37", "link": "https://stackoverflow.com/users/5159937/lforg37"}, "is_accepted": false, "score": 2, "last_activity_date": 1440594325, "last_edit_date": 1440594325, "creation_date": 1440590496, "answer_id": 32226105, "question_id": 32224035, "link": "https://stackoverflow.com/questions/32224035/posix-shared-memory-between-parent-and-child-process/32226105#32226105", "title": "Posix shared memory between parent and child process?", "body": "<p>I tried to compile your code with the following includes and it worked for me. </p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n</code></pre>\n\n<p>Have you thought to pass an integer argument when executing the programm ?\n(e.g) </p>\n\n<pre><code>./collatz 12 \n</code></pre>\n\n<p>output 1631518421</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12327617, "user_type": "registered", "profile_image": "https://graph.facebook.com/2581434611902589/picture?type=large", "display_name": "Dana D\u0103sc\u0103lescu", "link": "https://stackoverflow.com/users/12327617/dana-d%c4%83sc%c4%83lescu"}, "is_accepted": false, "score": 0, "last_activity_date": 1572992834, "last_edit_date": 1572992834, "creation_date": 1572989840, "answer_id": 58719841, "question_id": 32224035, "link": "https://stackoverflow.com/questions/32224035/posix-shared-memory-between-parent-and-child-process/58719841#58719841", "title": "Posix shared memory between parent and child process?", "body": "<p>This is my solution, I hope it will help you. The shared memory is loaded behind the process with the system function mmap(2).</p>\n\n<p><code>void \u2217 mmap (void \u2217 addr, size_t len, int prot, int flags, int fd, off_t offset);</code></p>\n\n<p>The parameters are:<br>\n   \u2022 addr - address to be loaded into process (usually here we use 0 to let the kernel decide where to load)<br>\n   \u2022 len- size of memory loaded \u2022 prot- access rights (PROTREAD or PROTWRITE usually)<br> \n   \u2022 flags - memory type (usually MAPSHARED so that the changes made by the process wil be visible to the others)<br>\n   \u2022 fd - the descriptor of the memory object<br>\n   \u2022 offset - the place in the shared memory object and from which it will be replayed.<br>\n    When executed successfully, the result is a pointer to the address in the process space to which the object was loaded. Otherwise, the MAPFAILED value is returned and errno is set to the appropriate value.\n    Pay attetion that in Linux the size must be a multiple of pages: PAGE_SIZE (for this I used getpagesize(2) )</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;unistd.h&gt;\n    #include &lt;fcntl.h&gt;\n    #include &lt;errno.h&gt;\n    #include &lt;sys/stat.h&gt;\n    #include &lt;sys/types.h&gt;\n    #include &lt;sys/wait.h&gt;\n    #include &lt;sys/mman.h&gt;\n    #include &lt;sys/sysmacros.h&gt;\n\n    int main(int argc, char *argv[])\n    {\n        fprintf(stdout, \"Starting parent %d\\n\", getpid());\n\n        int wstatus, shm_fd;\n        char shm_name[] = \"collatz\";\n        struct stat sb;\n        pid_t pid;\n        unsigned int displacement = 0,  offset = 0;\n        size_t shm_size = getpagesize() * (argc - 1);\n\n        if(argc &lt; 2)\n        {\n            fprintf(stderr, \"At least one argument must be passed!\");\n            exit(EXIT_FAILURE);\n        }\n\n        int *pid_children = (int*)malloc((argc - 1) * sizeof(int));\n        if(pid_children == NULL)\n        {\n            fprintf(stderr, \"Memory not allocated!\");\n            exit(1);\n        }\n\n        /* Create shared memory object */\n        shm_fd = shm_open(shm_name, O_CREAT | O_RDWR, S_IRUSR | S_IWUSR);\n        if(shm_fd &lt; 0)\n        {\n            perror(NULL);\n            return errno;\n        }\n\n        /* Define size */\n        if(ftruncate(shm_fd, shm_size) == -1) {\n            perror(NULL);\n            shm_unlink(shm_name);\n            return errno;\n        }\n\n        for(int i = 1; i &lt; argc; i ++)\n        {\n            int n = atoi(argv[i]), aux = atoi(argv[i]);\n            if(n &lt; 0)\n            {\n                fprintf(stderr, \"Only positive numbers!\\n\");\n                i = i + 1;\n            }\n\n            pid_children[i - 1] = fork();\n            if(pid_children[i - 1] &lt; 0)\n                return errno;\n            if(pid_children[i - 1] == 0)\n            {\n                /* Child instructions */\n                char *shm_ptr_child = mmap(0, getpagesize(), PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, (i - 1) * getpagesize());\n                if(shm_ptr_child == MAP_FAILED)\n                {\n                    perror(NULL);\n                    shm_unlink(shm_name);\n                    return errno;\n                }\n\n                int count = 0;\n                int *series = (int*)malloc(count * sizeof(int));\n                if(series == NULL)\n                {\n                    fprintf(stderr, \"Memory allocation error!\");\n                    exit(1);\n                }\n\n                *(series + count) = n;\n                while(n != 1)\n                {\n                    count = count + 1;\n                    series = (int*)realloc(series, (count + 1) * sizeof(int));\n                    if(series ==  NULL)\n                    {\n                        fprintf(stderr, \"Memory allocation failure!\");\n                        free(series);\n                        exit(EXIT_FAILURE);\n                    }\n\n                    if(n % 2== 0)\n                        n = n / 2;\n                    else\n                        n = 3 * n + 1;\n\n                    *(series + count) = n;\n                }\n                if(n == 1){\n                    offset = sprintf(shm_ptr_child, \"%d : \", aux);\n                    shm_ptr_child += offset;\n                    for(int i = 0; i &lt; count + 1; i++)\n                    {\n                        offset = sprintf(shm_ptr_child, \"%d \", series[i]);\n                        shm_ptr_child += offset;\n                    }\n\n                    free(series);\n                    munmap(shm_ptr_child, getpagesize());\n\n                    fprintf(stdout, \"Done Parent: %d, Me: %d \\n\", getppid(), getpid());\n                    exit(EXIT_SUCCESS);\n                }\n                else\n                    exit(EXIT_FAILURE);\n            }\n            else{\n                /* Parent instructions */\n                do{\n                    pid = waitpid(pid_children[i - 1], &amp;wstatus, WUNTRACED | WCONTINUED);\n                    if(pid == -1)\n                    {\n                        perror(\"waitpid\");\n                        return -1;\n                    }\n\n                    if(WIFEXITED(wstatus)){\n                        fprintf(stdout, \"exited, status = %d\\n\", WEXITSTATUS(wstatus));\n                    }else if(WIFSIGNALED(wstatus)) {\n                        fprintf(stdout, \"killed by the signal: %d\\n\", WTERMSIG(wstatus));\n                    }else if(WIFSTOPPED(wstatus)) {\n                        fprintf(stdout, \"stopped by the signal %d\\n\", WSTOPSIG(wstatus));\n                    }else if(WIFCONTINUED(wstatus)) {\n                        fprintf(stdout, \"continued\\n\");\n                    }\n\n                }while(!WIFEXITED(wstatus) &amp;&amp; !WIFSIGNALED(wstatus));\n\n            }\n        }\n\n        for(int i = 0; i &lt; argc - 1; i++)\n        {\n            char *shm_ptr = mmap(0, getpagesize(), PROT_READ, MAP_SHARED, shm_fd, i * getpagesize());\n            fprintf(stdout, \"%s\\n\", shm_ptr);\n            munmap(shm_ptr, getpagesize());\n        }\n        shm_unlink(shm_name);\n\n        printf(\"\\nDone Parent: %d, Children: %d \\n\", getppid(), getpid());\n\n        return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 395, "user_id": 3891947, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/edSJ2.jpg?s=128&g=1", "display_name": "toantruong", "link": "https://stackoverflow.com/users/3891947/toantruong"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1652, "favorite_count": 0, "closed_date": 1573039865, "answer_count": 2, "score": -1, "last_activity_date": 1572992834, "creation_date": 1440584633, "last_edit_date": 1572991506, "question_id": 32224035, "link": "https://stackoverflow.com/questions/32224035/posix-shared-memory-between-parent-and-child-process", "closed_reason": "Not suitable for this site", "title": "Posix shared memory between parent and child process?", "body": "<p>I am writing a program to solve a exercise on the <strong>Operating System Concept</strong> book. That problem is create a Collatz conjecture on child process and print it back the parent process using Posix shared memeory. Here is my program.</p>\n\n<pre><code>int main(int argc, char* argv[])\n{\nconst char* name = \"Collatz\";\nconst int SIZE = 4096 * 30;\nvoid *ptr;\nint shm_fd;\nint num = atoi(argv[1]);\npid_t pid;\n\nshm_fd = shm_open(name, O_CREAT | O_RDWR, 0666);\nftruncate(shm_fd, SIZE);\nptr = mmap(0, SIZE, PROT_READ, MAP_SHARED, shm_fd, 0);\nif (ptr &lt; 0) perror(\"Ptr error\");\npid = fork();\nif (pid &lt; 0) perror(\"Fork Failed\");\nelse if (pid == 0) {\n    shm_fd = shm_open(name, O_RDWR, 0666);\n    ptr = mmap(0, SIZE, PROT_WRITE, MAP_SHARED, shm_fd, 0);\n    if (ptr &lt; 0) perror(\"Ptr error\");\n    while (num != 1) {\n        sprintf(ptr, \"%d\", num);\n        ptr++;\n        if (num % 2 == 0) num /= 2;\n        else num = 3 * num + 1;\n    }\n    sprintf(ptr, \"%d\", num);\n    ptr++;\n} else {\n    wait(NULL);\n    printf(\"Parent: %s\\n\", (char*) ptr);\n\n    //ptr += sizeof(int);\n    shm_unlink(name);\n}\nreturn 0;\n}\n</code></pre>\n\n<p>But when I complie it with <strong>gcc</strong>, I got <strong>Segmentation fault(Core dump)</strong>. I have no idea with it though search through Google. I use Ubuntu 14.04. Can someone help me with it. Thank you very much and sorry for my poor English.</p>\n"}, {"tags": ["c", "function", "structure"], "answers": [{"tags": [], "owner": {"reputation": 4100, "user_id": 217756, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/547377f831a0ee3de6df245b7d40cbff?s=128&d=identicon&r=PG", "display_name": "tomsoft", "link": "https://stackoverflow.com/users/217756/tomsoft"}, "is_accepted": true, "score": 4, "last_activity_date": 1440676808, "last_edit_date": 1440676808, "creation_date": 1440584060, "answer_id": 32223820, "question_id": 32223583, "link": "https://stackoverflow.com/questions/32223583/passing-address-of-structure-to-a-function/32223820#32223820", "title": "Passing address of structure to a function", "body": "<p>You are mixing the declaration of the variable, and the declaration of the type of the variable.\nYour function should know the type, and this type is currently declared in the main part of the program. To solve it, declare the type in the global space:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct bank\n{\n    long acc_no;\n    char name[80];\n    int balance;\n};\n\nvoid edit_data(struct bank *acc_data)\n{\n  int loop;\n  for(loop=0;loop&lt;200;loop++)\n  {\n      (acc_data+loop)-&gt;acc_no = 1000+loop;\n      strcpy( &amp;(acc_data+loop)-&gt;name , \"a1\");\n      (acc_data+loop)-&gt;balance = 1000;\n  }\n};\nint main()\n{\n   int loop;\n   struct bank data[200];\n   edit_data(data);\n}\n</code></pre>\n\n<p>Please note that you had also some pointer error in your edit data function....</p>\n\n<p>It's also usually better to use array instead of pointer in that case:</p>\n\n<pre><code>void edit_data(struct bank *acc_data)\n{\n  int loop;\n  for(loop=0;loop&lt;200;loop++)\n  {\n      acc_data[loop].acc_no = 1000+loop;\n      strcpy( acc_data[loop].name , \"a1\");\n      acc_data[loop].balance = 1000;\n  }\n};\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5188486, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/52cb6ac1c775c3ae568aa29cec168945?s=128&d=identicon&r=PG&f=1", "display_name": "Kiran C K", "link": "https://stackoverflow.com/users/5188486/kiran-c-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1859, "favorite_count": 0, "accepted_answer_id": 32223820, "answer_count": 1, "score": 2, "last_activity_date": 1440676808, "creation_date": 1440583407, "last_edit_date": 1440673901, "question_id": 32223583, "link": "https://stackoverflow.com/questions/32223583/passing-address-of-structure-to-a-function", "title": "Passing address of structure to a function", "body": "<p>I have declared a structure inside main(). I want to pass the structure's address to a function. It shows structure is not declared error. I know that if a structure is declared inside main() its scope is limited. But here, I am passing the address to the function. Still it shows an error that bank * unknown size. What should I do to pass the structure's address declared inside main? Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include &lt;stdlib.h&gt;\n\n#include &lt;string.h&gt;\n\nvoid edit_data(struct bank *acc_data)\n\n{\n    int loop;\n    for(loop=0;loop&lt;200;loop++) \n    {\n       *(acc_data+loop).acc_no = 1000+loop;\n        (acc_data+loop).name = \"a1\";\n        (acc_data+loop)-&gt;balance = 1000;\n    }\n};\n\nint main()\n{\n    int loop;\n\n    struct bank\n    {\n\n        long acc_no;\n\n        char name[80];\n\n        int balance;\n\n    }data[200];\n\n    edit_data(data);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "c++14"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 8, "creation_date": 1440583247, "post_id": 32223483, "comment_id": 52329747, "body": "&quot;<i>Works in C</i>&quot; -- With loads of warnings telling you that it is wrong."}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 1, "creation_date": 1440583433, "post_id": 32223483, "comment_id": 52329879, "body": "int arr[]={1,2,3,4};"}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 2, "creation_date": 1440583484, "post_id": 32223483, "comment_id": 52329927, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/201101/how-to-initialize-an-array-in-c\">How to initialize an array in C</a>"}, {"owner": {"reputation": 2939, "user_id": 2367231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/CeSBA.png?s=128&g=1", "display_name": "Alex44", "link": "https://stackoverflow.com/users/2367231/alex44"}, "edited": false, "score": 1, "creation_date": 1440583773, "post_id": 32223483, "comment_id": 52330142, "body": "gcc gives me this feedback to your C-Code: <code>warning: initialization makes pointer from integer without a cast [enabled by default] int *arr={1,2,3,4};</code>. And this right. You can&#39;t put a integer-array initialisation on a int pointer."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1440583969, "post_id": 32223483, "comment_id": 52330269, "body": "<code>int *arr = (int[]){1, 2, 3, 4}</code> will work in C, but not in C++. Without proper tagging, I don&#39;t know if that&#39;s an answer."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1440584533, "post_id": 32223483, "comment_id": 52330633, "body": "It doesn&#39;t exactly <i>work</i> - you&#39;re only printing a compile-time value,  and <a href=\"http://ideone.com/daTt1w\" rel=\"nofollow noreferrer\">this code</a> &quot;works&quot; in exactly the same way. Did you <a href=\"http://ideone.com/5rQaqh\" rel=\"nofollow noreferrer\">look at the pointer&#39;s value</a> or <a href=\"http://ideone.com/0FRoaI\" rel=\"nofollow noreferrer\">attempt to use it</a>? (And you&#39;re not initialising an array, your&#39;e initialising a pointer.)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1440584784, "post_id": 32223483, "comment_id": 52330792, "body": "What are you trying to achieve exactly ?"}, {"owner": {"reputation": 123, "user_id": 4881610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14fd7d575d54e1c53f0d5c32ab3de9ac?s=128&d=identicon&r=PG&f=1", "display_name": "sian", "link": "https://stackoverflow.com/users/4881610/sian"}, "edited": false, "score": 0, "creation_date": 1440586671, "post_id": 32223483, "comment_id": 52332045, "body": "I was trying to find the number of elements stored in an array when the array is declared using pointers, while I encountered this error in initialising the array. The same code produced different output in C and C++."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 4881610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14fd7d575d54e1c53f0d5c32ab3de9ac?s=128&d=identicon&r=PG&f=1", "display_name": "sian", "link": "https://stackoverflow.com/users/4881610/sian"}, "edited": false, "score": 0, "creation_date": 1440586042, "post_id": 32224304, "comment_id": 52331605, "body": "Sorry, I accidently changed the code of ideone link. Here is the actual problem - &lt;<a href=\"http://ideone.com/684V5t\" rel=\"nofollow noreferrer\">ideone.com/684V5t</a>&gt; If you can explain the error message and why am I getting it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 123, "user_id": 4881610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14fd7d575d54e1c53f0d5c32ab3de9ac?s=128&d=identicon&r=PG&f=1", "display_name": "sian", "link": "https://stackoverflow.com/users/4881610/sian"}, "edited": false, "score": 0, "creation_date": 1440588352, "post_id": 32224304, "comment_id": 52333181, "body": "@SHWETANK, because it&#39;s just plain wrong. In that example <code>arr</code> is a pointer and it&#39;s nonsense to initialoze it with more than <i>one</i> value. See also the comments of your questions."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 4, "last_activity_date": 1440588985, "last_edit_date": 1440588985, "creation_date": 1440585322, "answer_id": 32224304, "question_id": 32223483, "link": "https://stackoverflow.com/questions/32223483/why-am-i-getting-error-in-initializing-array-using-pointers-in-c-c14/32224304#32224304", "title": "Why am I getting error in initializing array using pointers in C++ (C++14)?", "body": "<p>This doesn't work in C++ because <code>arr</code> is not a variable of type class and therefore there is no <code>size</code> member:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    // your code goes here\n    int arr[] = {1, 22, 5, 20};         //NOT WORKING IN C++ &lt; yes it does\n    cout &lt;&lt; arr.size();          // &lt;&lt; this does not \"work\" in C++\n    return 0;\n}\n</code></pre>\n\n<p>BTW the error message:</p>\n\n<pre><code>prog.cpp:7:12: error: request for member 'size' in 'arr', which is\n               of non-class type 'int [4]' cout&lt;&lt;arr.size();\n</code></pre>\n\n<p>is quite explicit.</p>\n\n<p>And this should not compile (or you should get at least warnings), neither in C neither in C++:</p>\n\n<pre><code>int *arr={1,2,3,4};\n</code></pre>\n\n<p>You want this (C and C++):</p>\n\n<pre><code>int arr[] = {1, 22, 5, 20};\nprintf(\"%d\", sizeof(arr)/sizeof(*arr));\n</code></pre>\n\n<p>Output will be <code>4</code>.</p>\n\n<p>In C this may compile depending on the compiler, but you should get warnings:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    // your code goes here\n    int *arr={1,2,3,4};\n    printf(\"%d\\n\", sizeof(arr));\n    printf(\"%d\\n\", sizeof(*arr));\n    printf(\"%p\\n\", arr);        \n    return 0;\n}\n</code></pre>\n\n<p>The output is :</p>\n\n<pre><code>4\n4\n0x1\n</code></pre>\n\n<p>because <code>sizeof(arr)</code> is 4 and <code>sizeof(*arr)</code> which is the same as <code>sizeof(int)</code> because <code>arr</code>is an <code>int</code> pointer (assuming a 32 bit system).</p>\n\n<p>The <code>arr</code>pointer will contain 1 because of nthe 1st <code>1</code> in the initializer list.</p>\n"}], "owner": {"reputation": 123, "user_id": 4881610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14fd7d575d54e1c53f0d5c32ab3de9ac?s=128&d=identicon&r=PG&f=1", "display_name": "sian", "link": "https://stackoverflow.com/users/4881610/sian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 32224304, "answer_count": 1, "score": 0, "last_activity_date": 1440588985, "creation_date": 1440583136, "last_edit_date": 1440586217, "question_id": 32223483, "link": "https://stackoverflow.com/questions/32223483/why-am-i-getting-error-in-initializing-array-using-pointers-in-c-c14", "title": "Why am I getting error in initializing array using pointers in C++ (C++14)?", "body": "<p>I have problem initializing array in C++14.</p>\n\n<pre><code>int *arr={1,2,3,4};     // Works in C but does not work in C++\n</code></pre>\n\n<p>I can't understand the error message it shows </p>\n\n<pre><code>prog.cpp: In function 'int main()':\nprog.cpp:6:26: error: scalar object 'arr' requires one element in initializer\n     int *arr = {1, 22, 5, 20};   //NOT WORKING IN C++\n</code></pre>\n\n<p>What is the exact meaning of initializer in the error message?</p>\n\n<p>Link of code of C++ which is not working   <a href=\"http://ideone.com/684V5t\" rel=\"nofollow\">http://ideone.com/684V5t</a></p>\n\n<p>Link of Same code in C which works         <a href=\"http://ideone.com/RAL3te\" rel=\"nofollow\">http://ideone.com/RAL3te</a></p>\n\n<p>If anyone can explain why this is happening it would be nice.\nThank you.</p>\n"}, {"tags": ["c", "linux", "unix"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1440581394, "post_id": 32222745, "comment_id": 52328415, "body": "You might want to check this question <a href=\"http://stackoverflow.com/questions/596306/using-the-open-system-call?rq=1\">Using the open system call</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1440581544, "post_id": 32222745, "comment_id": 52328507, "body": "How about reading the documentation? Type <code>man open</code> in a terminal. Failing that, type <code>man open</code> in your favourite internet search engine."}], "answers": [{"tags": [], "owner": {"reputation": 599, "user_id": 5250757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U9h4q.png?s=128&g=1", "display_name": "4rzael", "link": "https://stackoverflow.com/users/5250757/4rzael"}, "is_accepted": true, "score": 5, "last_activity_date": 1440584224, "creation_date": 1440584224, "answer_id": 32223885, "question_id": 32222745, "link": "https://stackoverflow.com/questions/32222745/open-system-call-in-unix/32223885#32223885", "title": "Open system call in unix", "body": "<p>As we can see in the <a href=\"http://linux.die.net/man/2/open\">open(2) man page</a>, the mode is used to set the access-rights of the file (as you could do with the UNIX command <code>chmod</code>).</p>\n\n<p>It's useless when you're not creating the file, but when you use the flag <code>O_CREAT</code>, you have to use it.</p>\n\n<p>In example : creating a file with rights 644 in read + write mode:</p>\n\n<p><code>int fd = open(\"file\", O_RDWR | O_CREAT, S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH);</code></p>\n"}], "owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 2, "accepted_answer_id": 32223885, "answer_count": 1, "score": 0, "last_activity_date": 1440584224, "creation_date": 1440581090, "question_id": 32222745, "link": "https://stackoverflow.com/questions/32222745/open-system-call-in-unix", "title": "Open system call in unix", "body": "<p>Open system call in unix</p>\n\n<p>The following is the prototype of open system call:</p>\n\n<pre><code>   int open(const char *pathname, int flags);\n   int open(const char *pathname, int flags, mode_t mode);\n</code></pre>\n\n<p>pathname --> It is used to mention the path of the file like /home/mohan/a.txt</p>\n\n<p>flags    --> It is used to mention on which mode the file will be open like Readonly, writeonly or readwrite.</p>\n\n<p>mode     --> ?</p>\n\n<p>What is use of mode and when I use the mode. Is there any example for using mode.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "pointers", "memory", "volatile"], "comments": [{"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 1, "creation_date": 1440578972, "post_id": 32221707, "comment_id": 52326817, "body": "I did not understood what was not working without volatile? <code>unsigned char *video = (unsigned char *)(0xB8000 + x);</code>. I suppose the problem is that <code>x</code> is <code>char</code> not <code>int&#47;unsigned</code>. The type can be the problem, not non-volatility"}, {"owner": {"reputation": 2027, "user_id": 270654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db8e6e1cf36dfcc4c4d59e4b5827344?s=128&d=identicon&r=PG", "display_name": "nemetroid", "link": "https://stackoverflow.com/users/270654/nemetroid"}, "reply_to_user": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 1, "creation_date": 1440579068, "post_id": 32221707, "comment_id": 52326871, "body": "@i486 If the compiler is able to deduce that the contents of <code>video</code> are never read, it might optimize away the writes to it."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 1, "creation_date": 1440579210, "post_id": 32221707, "comment_id": 52326961, "body": "And why <code>(unsigned char *)(0xB8000 + x)</code> will not write the value to video memory and <code>(unsigned char *)0xB8000</code> will do it? I don&#39;t think there can be such optimization. Only the value of <code>video</code> can be held in CPU register instead its memory location."}, {"owner": {"reputation": 2027, "user_id": 270654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db8e6e1cf36dfcc4c4d59e4b5827344?s=128&d=identicon&r=PG", "display_name": "nemetroid", "link": "https://stackoverflow.com/users/270654/nemetroid"}, "edited": false, "score": 1, "creation_date": 1440579599, "post_id": 32221707, "comment_id": 52327195, "body": "I will agree that it&#39;s odd, but the fact that optimization doesn&#39;t happen in the first case isn&#39;t <i>really</i> an argument that it won&#39;t happen in the second case."}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1440579718, "post_id": 32221707, "comment_id": 52327279, "body": "Note that while the use of <code>volatile</code> here is (probably) valid, you should read <a href=\"https://lwn.net/Articles/233482/\" rel=\"nofollow noreferrer\">this</a> before using it all over your kernel. A better way, rather than declaring <code>video</code> <code>volatile</code>, is to cast all accesses that need to be volatile to <code>volatile</code>."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1440581482, "post_id": 32221707, "comment_id": 52328466, "body": "@i486 why do you think there&#39;s no such optimization. It&#39;s one of the most basic type of optimization: removing unnecessary code, and unread writes are one of that. If you read a microcontroller register header you&#39;ll see that all registers must be volatile"}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1440581692, "post_id": 32221707, "comment_id": 52328614, "body": "@L\u01b0u V\u0129nh Ph&#250;c I think you cannot understand about what optimization is the conversation. The value of <code>video</code> can be optimized and stay in register without problem. The values stored in video memory (address 0xB8000 and above) can be &quot;optimized&quot; only by the CPU cache. Only delayed cache writes can cause problem and not show the video output. But it cannot be controlled by the compiler."}, {"owner": {"reputation": 684, "user_id": 4970667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FWd3x.jpg?s=128&g=1", "display_name": "Quentin", "link": "https://stackoverflow.com/users/4970667/quentin"}, "reply_to_user": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1440584487, "post_id": 32221707, "comment_id": 52330606, "body": "@Kninnug thank you for the link, it make sens, I&#39;ll try to apply it :)"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "reply_to_user": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1440584863, "post_id": 32221707, "comment_id": 52330856, "body": "@i486 no. I think you cannot understand about optimization and volatile. Only read/writes with <code>volatile</code> are not permitted to optimize out, otherwise the keyword is meaningless as the compiler will always have to emit memory accesses. <a href=\"http://stackoverflow.com/q/3604569/995714\">What kinds of optimizations does &#39;volatile&#39; prevent in C++?</a> <a href=\"https://en.wikipedia.org/wiki/Volatile_%28computer_programming%29\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Volatile_%28computer_programming%29</a> <a href=\"http://stackoverflow.com/a/246392/995714\">stackoverflow.com/a/246392/995714</a>"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1506672368, "post_id": 32221707, "comment_id": 79923212, "body": "@L\u01b0uV\u0129nhPh&#250;c: Many vendor-supplied hardware-register headers which define pointers using hard-coded addresses omit <code>volatile</code>,  Having compilers simply treat objects from integer-to-pointer conversions as <code>volatile</code>, and treat accesses to them as potentially aliasing any other object of that type, is a lot simpler for a compiler than doing anything else; from a practical standpoint, I question whether the optimization benefits of tracking integer-based pointers would pay off often enough to make it worthwhile, even if one didn&#39;t mind having to lengthen the header file by 8 bytes/declaration."}], "answers": [{"comments": [{"owner": {"reputation": 684, "user_id": 4970667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FWd3x.jpg?s=128&g=1", "display_name": "Quentin", "link": "https://stackoverflow.com/users/4970667/quentin"}, "edited": false, "score": 0, "creation_date": 1440578799, "post_id": 32221886, "comment_id": 52326689, "body": "Sure, it is possible, and maybe the best way to do it, but it does not explain to me what&#39;s behind my <i>volatile</i> problem ;)"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1440579169, "post_id": 32221886, "comment_id": 52326926, "body": "This doesn&#39;t work. The compiler might optimize it away. And casting the address literal is better"}], "tags": [], "owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 0, "last_activity_date": 1440578657, "creation_date": 1440578657, "answer_id": 32221886, "question_id": 32221707, "link": "https://stackoverflow.com/questions/32221707/writing-to-video-memory-0xb8000-volatile-pointer/32221886#32221886", "title": "Writing to video memory (0xB8000) &amp; volatile pointer", "body": "<p>Why not:</p>\n\n<pre><code>unsigned char * video = 0xB8000;\nvideo[x] = 'A';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2027, "user_id": 270654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db8e6e1cf36dfcc4c4d59e4b5827344?s=128&d=identicon&r=PG", "display_name": "nemetroid", "link": "https://stackoverflow.com/users/270654/nemetroid"}, "is_accepted": true, "score": 5, "last_activity_date": 1440579006, "creation_date": 1440579006, "answer_id": 32222003, "question_id": 32221707, "link": "https://stackoverflow.com/questions/32221707/writing-to-video-memory-0xb8000-volatile-pointer/32222003#32222003", "title": "Writing to video memory (0xB8000) &amp; volatile pointer", "body": "<p>The point of <code>volatile</code> is to tell the compiler that the contents of the variable might change or have side-effects <em>outside</em> the execution of your code. As the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf\">standard</a> (C99 6.7.3.6) puts it:</p>\n\n<blockquote>\n  <p>An object that has volatile-qualified type may be modified in ways unknown to the implementation or have other unknown side effects.  Therefore any expression referring to such an object shall be evaluated strictly according to the rules of the abstract machine, as described in 5.1.2.3.  Furthermore, at every sequence point the value last stored in the object shall agree with that prescribed by the abstract machine, except as modified by the unknown factors mentioned previously. What constitutes an access to an object that has volatile-qualified type is implementation-defined.</p>\n</blockquote>\n\n<p>That's why you need to tell the compiler that the memory pointed to by the variable is volatile. However, changing what address the pointer points at does not cause any side effects and won't change by itself outside the execution of the code, so there's no reason for the pointer itself to be volatile. If we had to mark all variables we wish to change at some point as <code>volatile</code>, almost all variables would have to be marked as such.</p>\n"}], "owner": {"reputation": 684, "user_id": 4970667, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/FWd3x.jpg?s=128&g=1", "display_name": "Quentin", "link": "https://stackoverflow.com/users/4970667/quentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1032, "favorite_count": 0, "accepted_answer_id": 32222003, "answer_count": 2, "score": 3, "last_activity_date": 1440579006, "creation_date": 1440578130, "last_edit_date": 1440578394, "question_id": 32221707, "link": "https://stackoverflow.com/questions/32221707/writing-to-video-memory-0xb8000-volatile-pointer", "title": "Writing to video memory (0xB8000) &amp; volatile pointer", "body": "<p>I'm trying to write my own little kernel in C, and actually I would like to write a print function to display string. Thus, I would like to write to the video memory (at <strong>0xB8000</strong>). </p>\n\n<p>So, I tried like this :  </p>\n\n<pre><code>unsigned char *video = (unsigned char *)0xB8000;\n\n*video = 'A';\n</code></pre>\n\n<p>This actually works, but following does not :</p>\n\n<pre><code>char x = 0;\nunsigned char *video = (unsigned char *)(0xB8000 + x);\n\n*video = 'A';\n</code></pre>\n\n<p>After a few research, I fould that the cause could be the compiler's optimizations, and <a href=\"http://wiki.osdev.org/Printing_To_Screen\" rel=\"nofollow\">OSDev</a> give me the solution : use the <code>volatile</code> keyword. So I made some research about this keyword. OSDev suggest this :</p>\n\n<pre><code>char x = 0;\nvolatile unsigned char *video = (volatile unsigned char *)(0xB8000 + x);\n\n*video = 'A';\n</code></pre>\n\n<p>This way, it should work. The compiler assumes that the value pointed to by <code>video</code> pointer can change, and then do not optimize it. But, if later I want to change it, like :</p>\n\n<pre><code>video = (volatile unsigned char *)(video + 2);\n</code></pre>\n\n<p>Should I not define the pointer as <code>volatile</code>, like <code>unsigned char * volatile video</code> ? So the compiler know that the address can change ?</p>\n"}, {"tags": ["python", "c++", "c", "numba"], "comments": [{"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 1, "creation_date": 1440584283, "post_id": 32221418, "comment_id": 52330472, "body": "Recent versions of numba give the function the attributes <code>inspect_llvm</code> and <code>inspect_asm</code> methods which &quot;Return a dictionary keying compiled function signatures to [either llvm or asm code]&quot;. You could call them and get the keys from the dictionary to work out the signatures. If you are using lazy compilation (haven&#39;t provided an explicit signature) these won&#39;t be of any use."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1440584626, "post_id": 32221418, "comment_id": 52330700, "body": "(Note that you only get the input types from these though)"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1440584716, "post_id": 32221418, "comment_id": 52330755, "body": "You are very very very unlikely to gain any speed advantage from calling your numba functions from C++ - they still go through most of the standard python calling method, and calling overhead is unlikely to be the main cost."}, {"owner": {"reputation": 349, "user_id": 1741741, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/16f50d497b20dddc9560f207528d0fc9?s=128&d=identicon&r=PG", "display_name": "J\u0101nis Erdmanis", "link": "https://stackoverflow.com/users/1741741/j%c4%81nis-erdmanis"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1440596040, "post_id": 32221418, "comment_id": 52338685, "body": "but if the function is jitted doesn&#39;t it mean that it is compiled to self contained binary? So if I could figure out the filename of binary then with an wise way I would be able to use it in C++ without python between it"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1440600450, "post_id": 32221418, "comment_id": 52342077, "body": "I think they&#39;re compiled to memory rather than to a file. I suppose in principle you could use it (if you could find it). I don&#39;t think there&#39;s a publicly accessible interface to it, and you&#39;d have to work out what calling convention it uses if you could find it (it might not be designed to be C compatible)"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1440600733, "post_id": 32221418, "comment_id": 52342314, "body": "Actually, if you go back far enough in time it looks like it was supported: <a href=\"http://numba.pydata.org/numba-doc/0.11/interface_c.html#using-numba-functions-in-external-code\" rel=\"nofollow noreferrer\">numba.pydata.org/numba-doc/0.11/&hellip;</a>. I think that was lost in a big refactor around Numba 0.12 though."}], "owner": {"reputation": 349, "user_id": 1741741, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/16f50d497b20dddc9560f207528d0fc9?s=128&d=identicon&r=PG", "display_name": "J\u0101nis Erdmanis", "link": "https://stackoverflow.com/users/1741741/j%c4%81nis-erdmanis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 493, "favorite_count": 4, "answer_count": 0, "score": 5, "last_activity_date": 1440578542, "creation_date": 1440577264, "last_edit_date": 1440578542, "question_id": 32221418, "link": "https://stackoverflow.com/questions/32221418/is-it-possible-to-call-numba-jited-function-from-c-c", "title": "Is it possible to call numba jited function from C/C++?", "body": "<p>I would like to interface C++ library in python which takes function pointer as argument. I look that it is possible to make call in C with <code>PyEval_CallObject</code>, but to proceed it further I need correct signature (types of input and output arguments). Is it possible to return callback from python with specified signature?</p>\n\n<p>Also I am a bit performance woried, so I also have looked on python <code>numba</code> project which does compilation of python function. I am quite interested if it can be accessed in C/C++ so to improve performance.</p>\n"}, {"tags": ["c", "visual-studio", "visual-studio-2010"], "comments": [{"owner": {"reputation": 35705, "user_id": 193251, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/86b0f1f58edb6b31bcb975c1114d1438?s=128&d=identicon&r=PG", "display_name": "Jichao", "link": "https://stackoverflow.com/users/193251/jichao"}, "edited": false, "score": 0, "creation_date": 1440580041, "post_id": 32221207, "comment_id": 52327490, "body": "maybe visual assist x?"}], "answers": [{"comments": [{"owner": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "edited": false, "score": 0, "creation_date": 1440583538, "post_id": 32221815, "comment_id": 52329954, "body": "Can&#39;t check with C# as I have only C and CPP projects, but this doesn&#39;t seem to be available in 2010 (or maybe only for C# files)."}], "tags": [], "owner": {"reputation": 86, "user_id": 5263324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbef9ee54828179aecfa275348cdc465?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Rusu", "link": "https://stackoverflow.com/users/5263324/alex-rusu"}, "is_accepted": false, "score": 0, "last_activity_date": 1440578449, "creation_date": 1440578449, "answer_id": 32221815, "question_id": 32221207, "link": "https://stackoverflow.com/questions/32221207/showing-all-functions-in-a-c-file/32221815#32221815", "title": "Showing all functions in a C File", "body": "<p>Visual studio has this functionality built-in:\nI managed to find a preety self explaining screenshot that might help you (It is a C# project, but the solution explorer is not different for C++ and standard C). At this time i run on 2013 so i am not able to double check it, but i remember it used to be just as it is right now.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Lw7K3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lw7K3.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "edited": false, "score": 0, "creation_date": 1440664335, "post_id": 32231753, "comment_id": 52369635, "body": "Thx! Don&#39;t know how I missed that. :)"}], "tags": [], "owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "is_accepted": true, "score": 0, "last_activity_date": 1440605886, "last_edit_date": 1592644375, "creation_date": 1440605886, "answer_id": 32231753, "question_id": 32221207, "link": "https://stackoverflow.com/questions/32221207/showing-all-functions-in-a-c-file/32231753#32231753", "title": "Showing all functions in a C File", "body": "<p>For list of functions in the opened file, you can use the combobox at the top of your editor:\n<a href=\"https://i.stack.imgur.com/exm2V.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/exm2V.png\" alt=\"enter image description here\" /></a></p>\n<p>If you want to see them as in C# project referenced above, you'd need to upgrade to a later version of Visual Studio. 2013 has this feature for sure, most likely 2012 too.</p>\n<p>Ironically, there is an ongoing discussion on how to HIDE this feature in modern versions:\n<a href=\"https://stackoverflow.com/questions/32212661/hide-class-view-in-solution-explorer\">Hide Class-View in Solution Explorer</a>\n:)</p>\n"}], "owner": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 891, "favorite_count": 0, "accepted_answer_id": 32231753, "answer_count": 2, "score": 2, "last_activity_date": 1440605886, "creation_date": 1440576587, "question_id": 32221207, "link": "https://stackoverflow.com/questions/32221207/showing-all-functions-in-a-c-file", "title": "Showing all functions in a C File", "body": "<p>I'm using Visual Studio 2010. Is there some way to show which functions are inside a <code>C</code> file and jump to them?</p>\n\n<p>I know that there is a class browser, but that doesn't help, because I have to work on some C99 code and when I look at the browsers I found so far, they show me structures or all functions from the whole project. What I would like to have is that I click on a source file and it shows me the types and functions which are declared/contained in that file only.</p>\n\n<p>I'm using doxygen but that also doesn't seem to be able to show that, and I wonder if something like this is avialable directly inside the IDE as well. At least in Doxygen, I can't see which names are functions and which ones are variables or other stuff.</p>\n"}, {"tags": ["c", "mpi", "openmpi"], "comments": [{"owner": {"reputation": 1185, "user_id": 5148276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebc785eb0111296ebf6624e47360a18f?s=128&d=identicon&r=PG&f=1", "display_name": "Pooja Nilangekar", "link": "https://stackoverflow.com/users/5148276/pooja-nilangekar"}, "edited": false, "score": 0, "creation_date": 1440575254, "post_id": 32220711, "comment_id": 52324595, "body": "You&#39;re ending up in a deadlock. Take a look at <a href=\"http://stackoverflow.com/questions/20448283/deadlock-with-mpi\">stackoverflow.com/questions/20448283/deadlock-with-mpi</a>"}, {"owner": {"reputation": 855, "user_id": 1243457, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/YTIlN.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1243457/andrew"}, "edited": false, "score": 0, "creation_date": 1440575826, "post_id": 32220711, "comment_id": 52324921, "body": "is really openmp tag relevant? I don&#39;t see any #pragma."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1440577963, "post_id": 32220711, "comment_id": 52326186, "body": "Never checking <code>malloc</code> return value is asking for segfaults."}], "answers": [{"tags": [], "owner": {"reputation": 5694, "user_id": 1552737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YfC6P.jpg?s=128&g=1", "display_name": "IKavanagh", "link": "https://stackoverflow.com/users/1552737/ikavanagh"}, "is_accepted": false, "score": 2, "last_activity_date": 1440579597, "creation_date": 1440579597, "answer_id": 32222210, "question_id": 32220711, "link": "https://stackoverflow.com/questions/32220711/mpi-send-and-mpi-receive-function-getting-stuck/32222210#32222210", "title": "MPI_send and MPI_receive function getting stuck", "body": "<p>A cursory glance over your code looks as if your issue is because your <code>MPI_Send()</code> calls are blocking and thus nothing is receiving and freeing them up.</p>\n\n<p>If <code>(request_list[i][1] &gt; 0)</code> and <code>(i!= my_rank)</code> evaluate to <code>true</code> you try to perform 2 <code>MPI_Send()</code> operations to process rank <code>i</code> but you only have 1 matching <code>MPI_Recv()</code> operation in each process, i.e. process rank <code>i</code>.</p>\n\n<p>You may want to try changing</p>\n\n<pre><code>if(request_list[i][1] &gt; 0) {\n    ...\n}\n\nif( i != my_rank )\n    MPI_Send(&amp;temp_data, 1, MPI_INT, i, TAG_PR_DONE, MPI_COMM_WORLD);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if(request_list[i][1] &gt; 0) {\n    ...\n} else if( i != my_rank ) {\n    MPI_Send(&amp;temp_data, 1, MPI_INT, i, TAG_PR_DONE, MPI_COMM_WORLD);\n}\n</code></pre>\n\n<p>Note the addition of <code>else</code> turning <code>if</code> into <code>else if</code>. This ensures only 1 <code>MPI_Send()</code> operation per process. It does not look like the two <code>MPI_Send()</code> operations should be executed if the above conditions are true.</p>\n\n<hr>\n\n<p>Alternatively if you need you could look into <a href=\"http://www.mpich.org/static/docs/v3.1/www3/MPI_Isend.html\" rel=\"nofollow\"><code>MPI_Isend()</code></a> and <a href=\"http://www.mpich.org/static/docs/v3.1/www3/MPI_Irecv.html\" rel=\"nofollow\"><code>MPI_Irecv()</code></a>. Although I don't think they will solve your problem entirely in this case. I still think you need the <code>else if</code> clause.</p>\n\n<hr>\n\n<p>I'd also like to point out in <strong>C</strong> there is no need to cast the return of <code>malloc()</code>. This topic has been covered extensively on StackOverflow so I won't dwell on it too long.</p>\n\n<p>You should also check the result of <code>malloc()</code> is a valid pointer. It returns <code>NULL</code> if an error occured.</p>\n"}], "owner": {"reputation": 11, "user_id": 5267335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c7b0c65448bc9e36083b77436076765?s=128&d=identicon&r=PG&f=1", "display_name": "Dips", "link": "https://stackoverflow.com/users/5267335/dips"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1356, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440581131, "creation_date": 1440574928, "last_edit_date": 1440581131, "question_id": 32220711, "link": "https://stackoverflow.com/questions/32220711/mpi-send-and-mpi-receive-function-getting-stuck", "title": "MPI_send and MPI_receive function getting stuck", "body": "<p>I have a code of page_rank where I have to compute page rank in parallel. My code hangs where I wrote the following MPI_send and MPI_receive function. What could be the problem? </p>\n\n<pre><code>int **sendto_list = (int **)malloc(comm_size*sizeof(int*));\nfor(i=0; i &lt; comm_size; i++) {\n    sendto_list[i] = (int *)malloc(18*sizeof(int));\n    sendto_list[i][0] = 16;\n    sendto_list[i][1] = 0;\n}\n\nint temp_data = 1;\nfor(i=0; i &lt; comm_size; i++) {\n    if(request_list[i][1] &gt; 0) {\n        for(k=0; k &lt; request_list[i][1]; ) {\n            for(j=0; j &lt; 200; j++) {\n                if( k &gt;= request_list[i][1] )\n                        break;\n\n                sendrecv_buffer_int[j] = request_list[i][k+2];\n                k++;\n            }\n            // Request appropriate process for pagerank.\n            if(i!= my_rank)\n                MPI_Send(&amp;temp_data, 1, MPI_INT, i, TAG_PR_REQ, MPI_COMM_WORLD);\n        }\n    }\n\n    if( i != my_rank )\n        MPI_Send(&amp;temp_data, 1, MPI_INT, i, TAG_PR_DONE, MPI_COMM_WORLD);\n}\n\nint expected_requests = 0, done = 0,temp,s;\ns=0;\nwhile( (done == 0) &amp;&amp; (comm_size &gt; 1) ) {\n    if(expected_requests == (comm_size - 1))\n        break;\n\n    int count;\n    // Receive pagerank requests or messages with TAG_PR_DONE(can be from any process).\n    MPI_Recv(&amp;temp, 1, MPI_INT, MPI_ANY_SOURCE ,MPI_ANY_TAG, MPI_COMM_WORLD, &amp;status);\n\n    MPI_Get_count(&amp;status, MPI_INT, &amp;count);\n\n    switch(status.MPI_TAG) {\n        case TAG_PR_REQ:{\n            for(i = 0 ; i &lt; count; i++)\n                insert_into_adj_list(&amp;sendto_list[status.MPI_SOURCE], sendrecv_buffer_int[i], num_nodes);\n            break;\n            }\n            case TAG_PR_DONE:{\n                expected_requests++;\n                break;\n            }\n            default:\n                break;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "state", "state-machine"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1440574986, "post_id": 32220507, "comment_id": 52324425, "body": "As long as you are aware of the limitations i don&#39;t see anything wrong with a system like this. In fact I think it should be well-suited for a small state-machine in very small embedded environments, where space is at a premium."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1440574990, "post_id": 32220507, "comment_id": 52324428, "body": "I think is a question for <a href=\"http://codereview.stackexchange.com/\">CR</a>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 17958, "user_id": 1971013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EtqFE.jpg?s=128&g=1", "display_name": "meaning-matters", "link": "https://stackoverflow.com/users/1971013/meaning-matters"}, "edited": false, "score": 1, "creation_date": 1440576731, "post_id": 32220507, "comment_id": 52325457, "body": "@meaning-matters You need <code>&amp;</code> not <code>|</code>,  e.g. <code>if (validDestStates &amp; requestedState) nextState = requestedState;</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440577039, "post_id": 32220507, "comment_id": 52325618, "body": "&quot;Is there something better than this encoding?&quot; Define better. Faster, safer, less memory consuming? What is your reason to use bits in the first place? If it is because you need a fast evaluation of valid state transitions, this method is slightly faster than using an up-counting integer for the states. If you need fast calls to the actual states, this method is slightly slower, because you can&#39;t use a function pointer-based lookup table, nor can the compiler translate your swich statement into one."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440577080, "post_id": 32220507, "comment_id": 52325640, "body": "(Regarding lookup tables see <a href=\"http://stackoverflow.com/questions/32182876/using-goto-for-a-fsm-in-c/32184665#32184665\">the discussion we had yesterday</a>)"}, {"owner": {"reputation": 2841, "user_id": 882697, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6482112c346023e2b8fe64bff964a3c4?s=128&d=identicon&r=PG", "display_name": "Plouff", "link": "https://stackoverflow.com/users/882697/plouff"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1440578869, "post_id": 32220507, "comment_id": 52326738, "body": "@JoachimPileborg: The &quot;small state-machine in very small embedded environment&quot; is exactly what I am doing :)!"}, {"owner": {"reputation": 2841, "user_id": 882697, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6482112c346023e2b8fe64bff964a3c4?s=128&d=identicon&r=PG", "display_name": "Plouff", "link": "https://stackoverflow.com/users/882697/plouff"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1440578972, "post_id": 32220507, "comment_id": 52326819, "body": "@user3386109: Thanks for the improved validation."}, {"owner": {"reputation": 2841, "user_id": 882697, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6482112c346023e2b8fe64bff964a3c4?s=128&d=identicon&r=PG", "display_name": "Plouff", "link": "https://stackoverflow.com/users/882697/plouff"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440579422, "post_id": 32220507, "comment_id": 52327083, "body": "@Lundin: I am now using a switch to define the next state, and then your array of doState() functions to execute the state. So if understand all the comments and compared to upcounting integer for the states, I&#39;ll loose time to reach the current state and I save time during state validation. The new information for me is the <i>I loose time to reach the current state</i>. So like you said, I need to identify what is the most important for me!"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440582341, "post_id": 32220507, "comment_id": 52329071, "body": "@Plouff The lookup table is based on adjacent numbers from 0 to N. If you don&#39;t have adjacent numbers, such as in the case of this bit version, you&#39;d have to translate the bit to an index, or similarly use a switch statement which the compiler won&#39;t be able to effectively optimize. It is probably not going to cause any big performance issues in most applications, where you don&#39;t need to concern yourself about such micro-optimizations."}, {"owner": {"reputation": 2841, "user_id": 882697, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6482112c346023e2b8fe64bff964a3c4?s=128&d=identicon&r=PG", "display_name": "Plouff", "link": "https://stackoverflow.com/users/882697/plouff"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440589496, "post_id": 32220507, "comment_id": 52333892, "body": "@Lundin: Yes, I just realized that.... It&#39;s a shame the C language doesn&#39;t define hash tables!"}, {"owner": {"reputation": 2841, "user_id": 882697, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6482112c346023e2b8fe64bff964a3c4?s=128&d=identicon&r=PG", "display_name": "Plouff", "link": "https://stackoverflow.com/users/882697/plouff"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440658990, "post_id": 32220507, "comment_id": 52366675, "body": "@Lundin: Finally I came up with a new solution. I keep an easy state validation and I can now use your lookup table :)!"}], "answers": [{"comments": [{"owner": {"reputation": 2841, "user_id": 882697, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6482112c346023e2b8fe64bff964a3c4?s=128&d=identicon&r=PG", "display_name": "Plouff", "link": "https://stackoverflow.com/users/882697/plouff"}, "edited": false, "score": 0, "creation_date": 1440579692, "post_id": 32220885, "comment_id": 52327254, "body": "Yes, I have a hardware designer background. This is where I learned one hot encoding in state machines. I was not aware of the second drawback you mention. That is the kind of remarks I was looking for. Your last point is very interesting too. Not sure I&#39;ll need this trick. But I&#39;ll keep it in my mind. Thanks for your answer!"}], "tags": [], "owner": {"reputation": 26383, "user_id": 180247, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ade0b0ec5fe1605809cac9f495e6d893?s=128&d=identicon&r=PG", "display_name": "Steve314", "link": "https://stackoverflow.com/users/180247/steve314"}, "is_accepted": true, "score": 6, "last_activity_date": 1440575576, "creation_date": 1440575576, "answer_id": 32220885, "question_id": 32220507, "link": "https://stackoverflow.com/questions/32220507/one-hot-encoding-of-the-states-of-a-c-fsm/32220885#32220885", "title": "One hot encoding of the states of a C FSM", "body": "<p>From a quick Google, \"one hot encoded\" means that every valid code has precisely one bit set, which seems to be what you're doing. The search results suggested this was a hardware design pattern.</p>\n\n<p>Drawbacks I can think of are...</p>\n\n<ol>\n<li><p>As you suggest, you're dramatically limiting the number of valid codes - for 32 bits you have a maximum of 32 codes/states instead of more than 4 billion.</p></li>\n<li><p>It's not ideal for lookup tables, which are a common implementation for <code>switch</code> statements. There are usually an intrinsic available to determine which is the lowest bit set, but I wouldn't bet on compilers using that automatically.</p></li>\n</ol>\n\n<p>Those aren't big issues, though, provided the number of states is small.</p>\n\n<p>The question IMO, then, is whether there's an advantage to justify that cost. It doesn't need to be a huge advantage, but there has to be some kind of point.</p>\n\n<p>The best I can come up with is that you can use bitwise tricks to specify sets of states, so you can test whether the current state is in a given set efficiently - if you have some action that needs to be done in states <code>(1&lt;&lt;0)</code> and <code>(1&lt;&lt;3)</code>, for example, you could test <code>if (state &amp; 0x9)</code>.</p>\n"}], "owner": {"reputation": 2841, "user_id": 882697, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6482112c346023e2b8fe64bff964a3c4?s=128&d=identicon&r=PG", "display_name": "Plouff", "link": "https://stackoverflow.com/users/882697/plouff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 32220885, "answer_count": 1, "score": 3, "last_activity_date": 1440658836, "creation_date": 1440574278, "last_edit_date": 1592644375, "question_id": 32220507, "link": "https://stackoverflow.com/questions/32220507/one-hot-encoding-of-the-states-of-a-c-fsm", "title": "One hot encoding of the states of a C FSM", "body": "<p>Basically, I just would like to know if this is a good idea to manually one hot encode the states of a C FSM.\nI implemented that to write an easy state transition validator:</p>\n<pre><code>typedef enum\n{\n    FSM_State1 = (1 &lt;&lt; 0),\n    FSM_State2 = (1 &lt;&lt; 1),\n    FSM_State3 = (1 &lt;&lt; 2),\n    FSM_StateError = (1 &lt;&lt; 3)\n} states_t;\n</code></pre>\n<p>Then the validation:</p>\n<pre><code>states_t nextState, requestedState;\nuint32_t validDestStates = 0;\n\n// Compute requested state\nrequestedState = FSM_State1;\n\n// Define valid transitions\nvalidDestStates |= FSM_State2;\nvalidDestStates |= FSM_State3;\n\n// Check transition\nif (validDestStates &amp; requestedState)\n{\n    // Valid transition\n    nextState = requestedState;\n}\nelse\n{\n    // Illegal transition\n    nextState = FSM_StateError;\n}\n</code></pre>\n<p>I know that I am limited to the maximum size of integer that I can use. But I don't have that many states. So it is not an issue</p>\n<p>Is there something better than this encoding?\nAre there some drawbacks I don't see yet?</p>\n<p>Thanks for your help!</p>\n<p><em>Edit: changed validation test according to user3386109 comment</em></p>\n<hr />\n<h2>Final thoughts</h2>\n<p>So final here is what I did:</p>\n<p>1/ State enum is a &quot;classical&quot; enum:</p>\n<pre><code>typedef enum\n{\n    FSM_State1,\n    FSM_State2,\n    FSM_State3,\n    FSM_StateError\n} states_t;\n</code></pre>\n<p>2/ Bit fields for valid transitions:</p>\n<pre><code>struct s_fsm_stateValidation\n{\n    bool State1IsValid: 1;\n    bool State2Valid: 1;\n    bool State3IsValid: 1;\n    bool StateErrorIsValid: 1;\n\n    /// Reserved space for 32bit reserved in the union\n    uint32_t reserved: 28;\n};\n</code></pre>\n<p>3/ Create an union for the validation</p>\n<pre><code>typedef union FSM_stateValidation_u\n{\n    /// The bit field of critical system errors\n    struct s_fsm_stateValidation state;\n    /// Access the bit field as a whole\n    uint32_t all;\n} u_FSM_stateValidation;\n</code></pre>\n<p>4/ I changed the validation:</p>\n<pre><code>u_FSM_stateValidation validDestStates;\n\n// Set valid states\nvalidDestStates.state.State1 = true;\n\n// Compute requestedState\nrequestedState = FSM_State2;\n\nif ((validDestStates.all &amp; ((uint32_t) (1 &lt;&lt; requestedState)) ))\n{\n    // Next state is legal\n    return requestedState;\n}\nelse\n{\n    return FSM_StateError;\n}\n</code></pre>\n"}, {"tags": ["c", "enums"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1440573766, "post_id": 32220324, "comment_id": 52323658, "body": "<code>void display_board(enum cell_contents board[][BOARDWIDTH]){ &#47;* Code to print the board *&#47; }</code> -- Look up on functions. That&#39;s a function."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1440574137, "post_id": 32220324, "comment_id": 52323893, "body": "Can you please elaborate what more specifically you have for problems with the function?"}, {"owner": {"reputation": 1, "user_id": 5267319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91d8941056911844d4a48fa1ecb55a15?s=128&d=identicon&r=PG&f=1", "display_name": "C. Snake", "link": "https://stackoverflow.com/users/5267319/c-snake"}, "edited": false, "score": 0, "creation_date": 1440574918, "post_id": 32220324, "comment_id": 52324383, "body": "I was just hoping someone could explain to me how this works. When I give it a number it comes with this warning.   warning: incompatible integer to pointer conversion passing &#39;int&#39;       to parameter of type &#39;enum cell_contents (*)[7]&#39; [-Wint-conversion]                         display_board(7);  What im hoping for is that it will do my printf loop that prints the board. Does the void make it not return anything?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5267319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91d8941056911844d4a48fa1ecb55a15?s=128&d=identicon&r=PG&f=1", "display_name": "C. Snake", "link": "https://stackoverflow.com/users/5267319/c-snake"}, "edited": false, "score": 0, "creation_date": 1440576070, "post_id": 32220865, "comment_id": 52325064, "body": "Thank you sir, You are great!"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1440576332, "last_edit_date": 1440576332, "creation_date": 1440575514, "answer_id": 32220865, "question_id": 32220324, "link": "https://stackoverflow.com/questions/32220324/void-display-boardenum-cell-contents-boardboardwidth-in-c/32220865#32220865", "title": "void display_board(enum cell_contents board[][BOARDWIDTH]) in C", "body": "<p>Okay, we have the function declaration</p>\n\n<pre><code>void display_board(enum cell_contents board[][BOARDWIDTH]);\n</code></pre>\n\n<p>Its quite clearly a declaration of a function, that much you must understand as well.</p>\n\n<p>Now if we split it into smaller parts we have this:</p>\n\n<ul>\n<li>Return type: <code>void</code></li>\n<li>Function name: <code>display_board</code></li>\n<li>Argument: <code>enum cell_contents board[][BOARDWIDTH]</code></li>\n</ul>\n\n<p>The return type <code>void</code> means that the function will not return anything.</p>\n\n<p>The function name is what you use when calling the function.</p>\n\n<p>The function argument is what the function expects you to pass to the function.</p>\n\n<p>If we further break down the argument declaration (using e.g. <a href=\"http://c-faq.com/decl/spiral.anderson.html\" rel=\"nofollow\">the clockwise/spiral rule</a>) we will learn that the argument variable is named <code>board</code>, that it's an array of <code>BOARDWIDTH</code> arrays of the <code>cell_contents</code> enumeration.</p>\n\n<p>So to call it you first need an array of arrays of the enumeration, and then you just pass it to the function like any other argument to any other function.</p>\n"}], "owner": {"reputation": 1, "user_id": 5267319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91d8941056911844d4a48fa1ecb55a15?s=128&d=identicon&r=PG&f=1", "display_name": "C. Snake", "link": "https://stackoverflow.com/users/5267319/c-snake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1440576332, "creation_date": 1440573659, "last_edit_date": 1440573722, "question_id": 32220324, "link": "https://stackoverflow.com/questions/32220324/void-display-boardenum-cell-contents-boardboardwidth-in-c", "title": "void display_board(enum cell_contents board[][BOARDWIDTH]) in C", "body": "<p>I am making a connect 4 game. </p>\n\n<p>I have searched and I cant seem to find anywhere that will show me what this like is expecting to take. </p>\n\n<pre><code>void display_board(enum cell_contents board[][BOARDWIDTH])\n</code></pre>\n\n<p>this is the comment with it; </p>\n\n<pre><code>/**\n * In this requirement you are required to display the game board. \n * The game board should be displayed as shown on the first page of the \n * assignment specification. \n * @param board the board to display\n **/\n</code></pre>\n\n<p>I can make the board but I'm unsure how to use that line. </p>\n"}, {"tags": ["c", "linux", "multithreading", "cpu"], "comments": [{"owner": {"reputation": 3571, "user_id": 2693875, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b7853fb2bdc0b5958a28da6984178c82?s=128&d=identicon&r=PG", "display_name": "Greg Dubicki", "link": "https://stackoverflow.com/users/2693875/greg-dubicki"}, "edited": false, "score": 0, "creation_date": 1440574562, "post_id": 32220201, "comment_id": 52324170, "body": "Please provide code samples."}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 1, "creation_date": 1440574565, "post_id": 32220201, "comment_id": 52324172, "body": "Rather than busy-waiting in the reader thread, the writer(s) should <a href=\"http://linux.die.net/man/3/pthread_cond_wait\" rel=\"nofollow noreferrer\">signal a condition</a> that unlocks the mutex the reader is waiting on."}, {"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1440575009, "post_id": 32220201, "comment_id": 52324443, "body": "Also - unless you are very careful about ensuring that writers don&#39;t access the same region of the buffer, and won&#39;t update the buffer while a reader is active, you will get race conditions."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1440575355, "post_id": 32220201, "comment_id": 52324655, "body": "In the reader&#39;s loop put something like <code>if (incoming_data_len == 0) sleep(5)</code> and the CPU load will go down."}, {"owner": {"reputation": 35, "user_id": 3899508, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/355ec5936b0c311280ffa33b541aab3d?s=128&d=identicon&r=PG&f=1", "display_name": "user3899508", "link": "https://stackoverflow.com/users/3899508/user3899508"}, "edited": false, "score": 0, "creation_date": 1440584057, "post_id": 32220201, "comment_id": 52330328, "body": "In my experiment even sleep for 100 milli seconds by reader thread causing buffer flow by writer threads and at the same I can not have offered to have huge buffer to avoid buffer flow by writers."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440587764, "post_id": 32220201, "comment_id": 52332809, "body": "Yes, because yield is essentially useless."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440587848, "post_id": 32220201, "comment_id": 52332859, "body": "NO SLEEP for inter-thread comms and/or data flow-control.  It&#39;s suggestions like this that result in &#39;sleep() is always wrong&#39; posts etc."}], "answers": [{"comments": [{"owner": {"reputation": 3665, "user_id": 2502409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bb7da4ea752f8cbe91601e127d3bccf?s=128&d=identicon&r=PG", "display_name": "Nazar554", "link": "https://stackoverflow.com/users/2502409/nazar554"}, "edited": false, "score": 0, "creation_date": 1440574245, "post_id": 32220452, "comment_id": 52323962, "body": "I dont see <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> tag on the question"}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "reply_to_user": {"reputation": 3665, "user_id": 2502409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bb7da4ea752f8cbe91601e127d3bccf?s=128&d=identicon&r=PG", "display_name": "Nazar554", "link": "https://stackoverflow.com/users/2502409/nazar554"}, "edited": false, "score": 0, "creation_date": 1440574555, "post_id": 32220452, "comment_id": 52324167, "body": "@Nazar554 thank you for pointing that out, adjusted the answer so that it covers both C and C++."}, {"owner": {"reputation": 3665, "user_id": 2502409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bb7da4ea752f8cbe91601e127d3bccf?s=128&d=identicon&r=PG", "display_name": "Nazar554", "link": "https://stackoverflow.com/users/2502409/nazar554"}, "edited": false, "score": 0, "creation_date": 1440574788, "post_id": 32220452, "comment_id": 52324305, "body": "Because you mentioned C++11 threads, maybe it is worth to add some info about C11 <a href=\"http://en.cppreference.com/w/c/thread/cnd_init\" rel=\"nofollow noreferrer\">condition variable</a>?"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 3665, "user_id": 2502409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bb7da4ea752f8cbe91601e127d3bccf?s=128&d=identicon&r=PG", "display_name": "Nazar554", "link": "https://stackoverflow.com/users/2502409/nazar554"}, "edited": false, "score": 0, "creation_date": 1440575004, "post_id": 32220452, "comment_id": 52324438, "body": "@Nazar554 The use of <code>sched_yield()</code> suggests that OP is using pthreads. (<code>thrd_yield()</code> is its equivalent in C11)."}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "reply_to_user": {"reputation": 3665, "user_id": 2502409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3bb7da4ea752f8cbe91601e127d3bccf?s=128&d=identicon&r=PG", "display_name": "Nazar554", "link": "https://stackoverflow.com/users/2502409/nazar554"}, "edited": false, "score": 0, "creation_date": 1440575572, "post_id": 32220452, "comment_id": 52324772, "body": "@Nazar554 thanks for the information, I have actually been so neglectant towards C that I was not aware about C11. Interesting at which version if any MSVC supports this."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440577764, "post_id": 32220452, "comment_id": 52326070, "body": "Visual Studio has notoriously poor support for C in general. You&#39;ll likely have to wait 10 years for them to implement C11 and an eternity for them to implement a decent conforming compiler."}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440578291, "post_id": 32220452, "comment_id": 52326375, "body": "@Lundin well since they are already struggling with C++11/14/17 I would imagine that C11 is the last thing on the roadmap :("}, {"owner": {"reputation": 35, "user_id": 3899508, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/355ec5936b0c311280ffa33b541aab3d?s=128&d=identicon&r=PG&f=1", "display_name": "user3899508", "link": "https://stackoverflow.com/users/3899508/user3899508"}, "edited": false, "score": 0, "creation_date": 1440584891, "post_id": 32220452, "comment_id": 52330874, "body": "Right now I am testing the code in linux platform, but as I said earlier I have to make this code as generic and OS independent by removing the call &#39;sched_yield()&#39;. I can not use any POSIX specific calls as my code is supposed ro run on other embeded platform RTOSs like ThreadX etc. Other embedded compilers may not have support C11 thread support library. So, I seek help in making the solution generic and independent of across platforms."}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "reply_to_user": {"reputation": 35, "user_id": 3899508, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/355ec5936b0c311280ffa33b541aab3d?s=128&d=identicon&r=PG&f=1", "display_name": "user3899508", "link": "https://stackoverflow.com/users/3899508/user3899508"}, "edited": false, "score": 1, "creation_date": 1440585388, "post_id": 32220452, "comment_id": 52331177, "body": "@user3899508 I understand, I&#39;m not very well aware of how RTOS do these kinds of things but since even POSIX is a no go why not make your own synchronization primitive that would simply wrap the corresponding functionality of the platform?"}], "tags": [], "owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "is_accepted": false, "score": 2, "last_activity_date": 1440575957, "last_edit_date": 1440575957, "creation_date": 1440574103, "answer_id": 32220452, "question_id": 32220201, "link": "https://stackoverflow.com/questions/32220201/cpu-occupancy-shows-100/32220452#32220452", "title": "CPU occupancy shows 100%", "body": "<p>In general you should use a synchronization primitive that would allow the reader thread to wait until the work actually appears instead of doing a busy loop. This can be solved with a synchronization primitive called condition variable.</p>\n\n<p>If C is the only option you have you can either use the <code>cnd_t</code> condition variable introduced by the <a href=\"http://en.cppreference.com/w/c/thread\" rel=\"nofollow\">C11 thread support library</a>, but this can be not supported on older compilers. In that case you still have the <code>pthread_cond_t</code> with all the synchronization functions like <code>pthread_cond_wait</code> / <code>pthread_cond_signal</code> but I am not aware if the Windows feature called \"Pthread Support in Microsoft Windows Services for UNIX Version 3.5\" that supports the POSIX thread stuff on Windows is not considered legacy. However you should be able to make a thin wrapper around Windows <code>HANDLE</code> objects that would mimic the behavior of POSIX condition variables.</p>\n\n<p>If you can use C++ then you could use a <a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow\">std::condition_variable</a> introduced by C++11.</p>\n\n<p><strong>Notes on support of C11</strong></p>\n\n<p>Since you mentioned you needed platform independent mechanism it should be noted that C11 is not supported in MSVC 2012 (which I can at least verify myself) and links about MSVC 2015 (e.g. <a href=\"http://blogs.msdn.com/b/vcblog/archive/2015/04/29/c-11-14-17-features-in-vs-2015-rc.aspx\" rel=\"nofollow\">this</a>) mostly hint that it is not supported there as well.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 3899508, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/355ec5936b0c311280ffa33b541aab3d?s=128&d=identicon&r=PG&f=1", "display_name": "user3899508", "link": "https://stackoverflow.com/users/3899508/user3899508"}, "edited": false, "score": 0, "creation_date": 1440584979, "post_id": 32220623, "comment_id": 52330921, "body": "I can not use any POSIX thread specific calls as my code has to run across different embedded platforms which will have different OS and processor architectures."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 35, "user_id": 3899508, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/355ec5936b0c311280ffa33b541aab3d?s=128&d=identicon&r=PG&f=1", "display_name": "user3899508", "link": "https://stackoverflow.com/users/3899508/user3899508"}, "edited": false, "score": 0, "creation_date": 1440585560, "post_id": 32220623, "comment_id": 52331291, "body": "C11 threads is an option? It&#39;s not fully supported on most platforms. So POSIX threads is portable at least on nix-y systems and probably the only portable way to implement threads in C as things stand at the moment."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1440574656, "creation_date": 1440574656, "answer_id": 32220623, "question_id": 32220201, "link": "https://stackoverflow.com/questions/32220201/cpu-occupancy-shows-100/32220623#32220623", "title": "CPU occupancy shows 100%", "body": "<p>What you describe (in the second paagraph) is a reasonably way to expect a typical scheduling: when a process/thread gives up CPU, it goes back to the end of the queue.</p>\n\n<p>What you can do instead is to make the writer thread(s) signal the reader when the data is placed in the queue using a <em>conditional variable</em> rather than using an infinite loop for the reader. </p>\n\n<p>Using <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_cond_wait.html\" rel=\"nofollow\"><code>pthread_cond_wait()</code></a> the reader can wait for the data to become available and using <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_cond_broadcast.html\" rel=\"nofollow\"><code>pthread_cond_signal()</code></a> the writer(s) would notify the reader than the data is ready.</p>\n"}], "owner": {"reputation": 35, "user_id": 3899508, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/355ec5936b0c311280ffa33b541aab3d?s=128&d=identicon&r=PG&f=1", "display_name": "user3899508", "link": "https://stackoverflow.com/users/3899508/user3899508"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1440575957, "creation_date": 1440573353, "question_id": 32220201, "link": "https://stackoverflow.com/questions/32220201/cpu-occupancy-shows-100", "title": "CPU occupancy shows 100%", "body": "<p>I have a scenario of reader-writers from/to a common buffer. All writer threads have highest priority than the reader thread. The reader thread activation function is in continuous while loop if there is any data in the buffer it reads all contents at shot and calls sche_yield() function.</p>\n\n<p>In this scenario I expected CPU utilisation is some where 20 to 30% but it shows 100%(Linux top command) but after little more digging out I realised that the reader thread after reading the data it get added at the end of scheduling queue and there are no writers to write data, the reader again scheduled and it again yields and get added at the end of scheduling queue and this is coninously repeating and due to this CPU shows 100%.</p>\n\n<p>I feel there should be an event handling meachanism rather than the reader in the while loop continously cheking data. Could you help how to write event handling(there should be an indication to reader thread when writer threads write data) which is platform and OS independent ? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 5267210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39732a8d188fd5c054c85a664ca47288?s=128&d=identicon&r=PG&f=1", "display_name": "Nilesh Chate", "link": "https://stackoverflow.com/users/5267210/nilesh-chate"}, "edited": false, "score": 0, "creation_date": 1440572319, "post_id": 32219867, "comment_id": 52322858, "body": "basically its 1&gt;=1 and 1&gt;=100 right?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440575744, "post_id": 32219867, "comment_id": 52324873, "body": "Probably shouldn&#39;t use the term order of evaluation here, as that typically refers to order of evaluation of sub-expressions, something which is completely unrelated to operator precedence."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1440576205, "post_id": 32219867, "comment_id": 52325139, "body": "Indeed. Formally I should use <i>associativity</i>. Scrapped the comment, and amended the answer."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1440576234, "last_edit_date": 1440576234, "creation_date": 1440572201, "answer_id": 32219867, "question_id": 32219809, "link": "https://stackoverflow.com/questions/32219809/a-b-c-operators-in-c/32219867#32219867", "title": "A&gt;=B&gt;=C operators in C?", "body": "<p>The second expression does <strong>not</strong> evaluate to true.</p>\n\n<p>The C standard defines the comparison operators ('>', '>=', '==', etc.) to return an <code>int</code> result, either 0 (for false) or 1 (for true). Furthermore <code>&gt;=</code> is evaluated from left to right. (Formally this is called the <em>associativity</em> of the operator).</p>\n\n<p>So <code>2&gt;=1&gt;=1</code> is equivalent to <code>(2&gt;=1)&gt;=1</code>. This is <code>1 &gt;= 1</code>, which evaluates as 1.</p>\n\n<p><code>200&gt;=100&gt;=100</code> is computed as <code>(200&gt;=100)&gt;=100</code> which is <code>1 &gt;= 100</code> which evaluates to 0.</p>\n"}, {"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": true, "score": 10, "last_activity_date": 1440572218, "creation_date": 1440572218, "answer_id": 32219872, "question_id": 32219809, "link": "https://stackoverflow.com/questions/32219809/a-b-c-operators-in-c/32219872#32219872", "title": "A&gt;=B&gt;=C operators in C?", "body": "<p>C doesn't support chaining operators like that. You'll have to divide that expression into two, seperated by the logical AND operator:</p>\n\n<pre><code>if(2 &gt;= 1 &amp;&amp; 1 &gt;= 1)\nif(200 &gt;= 100 &amp;&amp; 100 &gt;= 100)\n</code></pre>\n\n<p>otherwise, it is executed as</p>\n\n<pre><code>if((2 &gt;= 1) &gt;= 1)\nif((200 &gt;= 100) &gt;= 100)\n</code></pre>\n\n<p>and the left part will execute first and will evaluate to 1 if that condition is true and will evaluate to 0, if it is false and so, the above conditions becomes</p>\n\n<pre><code>if(1 &gt;= 1) /* which is true */\nif(1 &gt;= 100) /* which is false */\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 4, "last_activity_date": 1440575658, "creation_date": 1440575658, "answer_id": 32220905, "question_id": 32219809, "link": "https://stackoverflow.com/questions/32219809/a-b-c-operators-in-c/32220905#32220905", "title": "A&gt;=B&gt;=C operators in C?", "body": "<p>First note that <code>2&gt;=1&gt;=1</code> is probably a nonsense expression, it is not equivalent to a mathematical interval. The code literally means: </p>\n\n<ul>\n<li><code>2&gt;=1</code>. If 2 is larger than or equal to 1, evaluate to value 1 (true), otherwise evaluate to value 0 (false).</li>\n<li><code>2&gt;=1&gt;=1</code>. If the evaluated value from sub-expression <code>2&gt;=1</code> is larger than or equal to 1, evaluate to 1 (true), otherwise evaluate to 0 (false).</li>\n</ul>\n\n<p>To check if a value is inside a given internal, you would have to write <code>if(2&gt;=x &amp;&amp; x&gt;=1)</code>.</p>\n\n<hr>\n\n<p>That being said, there are three different things to consider for the actual evaluation: <em>operator precedence</em>, <em>operator associativity</em> and <em>order of evaluation of operands</em>.</p>\n\n<p>Operator precedence merely determines the priority of different operators in relation to each other. Since the only operator in the expression is <code>&gt;=</code>, they all have the same precedence, since they all belong to the same group of operators: the relational operators.</p>\n\n<p>Operator associativity is something that applies when operators of same precedence are found in the same expression. The operator associativity for the relational operators is left-to-right, meaning that if two relational operators are found in the same expression, their operands will get grouped from left to right, making this particular expression equivalent to <code>(2&gt;=1) &gt;= 1</code>.</p>\n\n<p>The term <em>order of evaluation</em> is rather loosely used in C, but usually refers to the order of evaluation of operands/sub-expressions, which is something completely unrelated to operator precedence. Consider <code>a() &gt;= b() &gt;= c()</code>. While operator precedence and associativity guarantees that this expression is equivalent to <code>(a() &gt;= b()) &gt;= c()</code>, it guarantees nothing about in which order the operators are evaluated. In this case, the operator precedence/associativity has <em>nothing</em> to do with the order in which the functions are executed, but only in which order their results are used.</p>\n\n<p>In most cases, the order of evaluation of operands is unspecified in C, meaning that we can't know it nor rely on it. (Some special operators like <code>&amp;&amp; || ?:</code> and <code>,</code> have guaranteed order of evaluation of operands, most operators do not.) Therefore if the order of evaluation would matter for the result, we best split up the expression in several lines instead.</p>\n\n<p>In the specific case of <code>2&gt;=1&gt;=1</code>, there's only integer constant literals, so order of evaluation doesn't matter here. But please don't mix up operator precedence with order of evaluation, they are different things.</p>\n"}], "owner": {"reputation": 29, "user_id": 5267210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39732a8d188fd5c054c85a664ca47288?s=128&d=identicon&r=PG&f=1", "display_name": "Nilesh Chate", "link": "https://stackoverflow.com/users/5267210/nilesh-chate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "closed_date": 1440576122, "accepted_answer_id": 32219872, "answer_count": 3, "score": 1, "last_activity_date": 1465633426, "creation_date": 1440571992, "last_edit_date": 1465633426, "question_id": 32219809, "link": "https://stackoverflow.com/questions/32219809/a-b-c-operators-in-c", "closed_reason": "Duplicate", "title": "A&gt;=B&gt;=C operators in C?", "body": "<p>Consider:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main() {\n    if (2 &gt;= 1 &gt;= 1)\n        printf(\"1\\n\");\n    if (200 &gt;= 100 &gt;= 100)\n        printf(\"2\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>nyc@nyc:~/PRG$ gcc sample.c</p>\n\n<blockquote>\n  <p>nyc@nyc:~/PRG$ ./a.out  1</p>\n</blockquote>\n\n<p>Why does this program print only 1 even if the second expression evaluates to TRUE?</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1440572059, "post_id": 32219790, "comment_id": 52322710, "body": "I suggest you use a debugger and try to work through it yourself first. At the minimum the debugger will tell you the line of code causing the seg fault."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5267182"}, "edited": false, "score": 0, "creation_date": 1440572471, "post_id": 32219843, "comment_id": 52322942, "body": "thank you so much...that solved my segmentation fault but this program is not working"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1440572603, "post_id": 32219843, "comment_id": 52323017, "body": "&quot;<i>not working</i>&quot; is not a good explanation. <b>How</b> is it not working?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5267182"}, "edited": false, "score": 0, "creation_date": 1440572720, "post_id": 32219843, "comment_id": 52323091, "body": "160 in base 16 , it is returning 00 also 123  in base 12 it is returning 33..also 5 in base 2, it is returning 111"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1440572834, "post_id": 32219843, "comment_id": 52323167, "body": "Try <code>index = n % b ;</code> at the start of the <code>do{...}while</code> loop."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1440573255, "post_id": 32219843, "comment_id": 52323373, "body": "@al27 You&#39;re welcome! :-) BTW, it is encouraged to <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">accept an answer</a> instead of commenting &quot;<i>Thank You!</i>&quot;"}], "tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": true, "score": 1, "last_activity_date": 1440573156, "last_edit_date": 1440573156, "creation_date": 1440572076, "answer_id": 32219843, "question_id": 32219790, "link": "https://stackoverflow.com/questions/32219790/segmentation-fault-when-running-number-converter-program/32219843#32219843", "title": "segmentation fault when running number converter program", "body": "<p>This:</p>\n\n<pre><code>for (i=0,j=strlen(s)-1;i&lt;j;i++,j++){\n   c= s[i];\n   s[i]=s[j];\n   s[j]=c;\n}\n</code></pre>\n\n<p>is an infinite loop. You probably wanted:</p>\n\n<pre><code>for (i = 0, j = strlen(s) - 1; i &lt; j; i++, j--){ /* j-- instead of j++ */\n   c = s[i];\n   s[i] = s[j];\n   s[j] = c;\n}\n</code></pre>\n\n<hr>\n\n<p>You have a logical error. This</p>\n\n<pre><code>index = n % b ;\ndo {\n    s[i++]=s2[index];\n} while((n/=b)&gt;0);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>do {\n    index = n % b;\n    s[i++] = s2[index];\n} while((n /= b) &gt; 0);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5267182"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 32219843, "answer_count": 1, "score": 1, "last_activity_date": 1440573628, "creation_date": 1440571910, "last_edit_date": 1440573628, "question_id": 32219790, "link": "https://stackoverflow.com/questions/32219790/segmentation-fault-when-running-number-converter-program", "title": "segmentation fault when running number converter program", "body": "<p>I have written the following program for changing a decimal number into a number of any other base less than or equal to 16.</p>\n\n<p>I keep getting a segmentation fault. I am not able to figure out my mistake. Please help me solve this issue.</p>\n\n<p><strong>Program:</strong></p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\n\n\nvoid reverse(char s[]){\n    int c,i,j;\n\n    for (i=0,j=strlen(s)-1;i&lt;j;i++,j++){\n       c= s[i];\n       s[i]=s[j];\n       s[j]=c;\n    }\n}\n\n\nvoid itob(int n, int b){\n\n       int i=0,index;\n       char s[50];\n       char s2[17]=\"0123456789ABCDEF\";\n\n       index = n % b ;\n       do {\n           s[i++]=s2[index];\n       } while((n/=b)&gt;0);\n       s[i]='\\0';\n       reverse(s);\n       printf(\"%s\\n\",s);\n}\n\nint main (void){\n\n      int n,b;\n      char s[50];\n      printf(\"enter the number\");\n      scanf(\"%d\",&amp;n);\n      printf(\"enter the base\");\n      scanf(\"%d\",&amp;b);\n      itob(n,b);\n      return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "strstr", "string.h"], "comments": [{"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 1, "creation_date": 1440572417, "post_id": 32219786, "comment_id": 52322916, "body": "C-style strings need to be terminated by <code>&#39;\\0&#39;</code>, otherwise nothing identifies the end."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1440572539, "post_id": 32219786, "comment_id": 52322980, "body": "As long as you don&#39;t modify the content, use <code>const char* needle = &quot;?&quot;;</code>. Problem solved."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1440572773, "post_id": 32219786, "comment_id": 52323126, "body": "Instead of <code>const char haystack[21] = &quot;IDontUnderstand?Help!&quot;;</code> you can write <code>const char haystack[] = &quot;IDontUnderstand?Help!&quot;;</code>. In the latter case the size that is needed for the array is calculated by the compiler."}, {"owner": {"reputation": 2556, "user_id": 3488231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/da4ac79b71c44d696f3567d4b53f6239?s=128&d=identicon&r=PG&f=1", "display_name": "user12205", "link": "https://stackoverflow.com/users/3488231/user12205"}, "edited": false, "score": 1, "creation_date": 1440578057, "post_id": 32219786, "comment_id": 52326237, "body": "Side note: If your needle is a single character you can use <code>strchr()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1440572658, "post_id": 32219953, "comment_id": 52323056, "body": "Reading past the end of the array is undefined behaviour. It <i>might</i> manifest itself as you described, but saying that that <i>will</i> happen is wrong."}, {"owner": {"reputation": 780, "user_id": 2285234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a369d099bee36d46e32b964a68394138?s=128&d=identicon&r=PG", "display_name": "Zastai", "link": "https://stackoverflow.com/users/2285234/zastai"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1440573014, "post_id": 32219953, "comment_id": 52323246, "body": "True. Depending on memory protection in place it could also segfault immediately. Or it could malfunction in a number of creative ways."}], "tags": [], "owner": {"reputation": 780, "user_id": 2285234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a369d099bee36d46e32b964a68394138?s=128&d=identicon&r=PG", "display_name": "Zastai", "link": "https://stackoverflow.com/users/2285234/zastai"}, "is_accepted": false, "score": 0, "last_activity_date": 1440576882, "last_edit_date": 1440576882, "creation_date": 1440572504, "answer_id": 32219953, "question_id": 32219786, "link": "https://stackoverflow.com/questions/32219786/size-of-needle-in-strstr-function/32219953#32219953", "title": "Size of Needle in strstr function", "body": "<p>It isn't fine for the haystack either. You indeed need room for the trailing NULL byte, so that functions know where the string ends. Otherwise they will keep on reading memory until they encounter a NUL that happens to be there.</p>\n\n<p>If you leave off the extra char from haystack, looking for the needle <code>\"f\"</code> may actually return a result, all depending on what the memory happens to contain.</p>\n\n<p>This is part of why it's better style to use <code>const char*</code> to hold string literals. Use arrays only when constructing values in code.</p>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 1, "last_activity_date": 1440577121, "creation_date": 1440577121, "answer_id": 32221373, "question_id": 32219786, "link": "https://stackoverflow.com/questions/32219786/size-of-needle-in-strstr-function/32221373#32221373", "title": "Size of Needle in strstr function", "body": "<blockquote>\n  <p>why does the size of the needle have to be at least one character bigger than the actual text in the needle? Is this because of the null character?</p>\n</blockquote>\n\n<p>Yes ,exactly it is because of the <code>null character</code>. If you see the format of <a href=\"http://www.tutorialspoint.com/c_standard_library/c_function_strstr.htm\" rel=\"nofollow\"><code>strstr()</code></a> it is this -</p>\n\n<pre><code>char *strstr(const char *haystack, const char *needle)\n</code></pre>\n\n<p>And arguments needed are -</p>\n\n<p><code>haystack -This is the main C string to be scanned.</code></p>\n\n<p><code>needle -This is the small string to be searched with-in haystack string.</code></p>\n\n<p>As <code>needle</code> is small string , thus <code>'\\0'</code> is required to terminate it.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5083807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3bbc310b1174f6c0e5af1834706cc41?s=128&d=identicon&r=PG&f=1", "display_name": "Jessup Jong", "link": "https://stackoverflow.com/users/5083807/jessup-jong"}, "edited": false, "score": 0, "creation_date": 1441697481, "post_id": 32221939, "comment_id": 52766062, "body": "Thank you that helped a lot!"}], "tags": [], "owner": {"reputation": 395, "user_id": 5255637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/454c79ea4924576a3ed3a7422e041333?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5255637/joe"}, "is_accepted": true, "score": 1, "last_activity_date": 1440578807, "creation_date": 1440578807, "answer_id": 32221939, "question_id": 32219786, "link": "https://stackoverflow.com/questions/32219786/size-of-needle-in-strstr-function/32221939#32221939", "title": "Size of Needle in strstr function", "body": "<p>In theory, both strings should have the null terminating character at the end (<code>'\\0</code>) because the function otherwise does not know when to stop reading the string:</p>\n\n<p>Take the <code>strlen</code> function. It reads the length of the string up to the null character and can be implemented like so:</p>\n\n<pre><code>size_t strlen(const char* str)\n{\n    size_t len = 0;\n    for(; *str; ++str, ++len);\n    return (len);\n}\n</code></pre>\n\n<p>Note the condition is <code>*str</code>, which also can mean <code>*str != 0</code>, which shows that the for loop increments the string and length until a null character is found.</p>\n\n<p>However, if a null terminator is not given (e.g. you allocated <code>char[5]</code> for <code>\"Hello\"</code>, when it should actually be <code>char[6]</code> - <code>\"Hello\\0\"</code>), it is pure luck if the function you use stops at the end of \"hello\". </p>\n\n<p>To make it easier, if you are writing a character array, you could instead not include the number in the braces and allow the compiler to deduce it for you to ensure that there is a null terminating character:</p>\n\n<pre><code>const char haystack[] = \"IDontUnderstand?Help!\";\nconst char needle[] = \"?\";\n</code></pre>\n\n<p>Note that you cannot put <code>const char haystack[strlen(\"IDontUnderstand?Help!\") + 1] = \"IDontUnderstand?Help!\";</code> as <code>strlen(\"IDontUnderstand?Help!\") + 1</code> is not a constant value.</p>\n\n<p>However, if you want to dynamically allocate the memory, you can use the <code>strlen</code> to help:</p>\n\n<pre><code>char* get_str_buffer(const char* value)\n{\n    char* buf = malloc(strlen(value) + 1);\n    strcpy(buf, value);\n    return (buf);\n}\n\nint main(void)\n{\n    const char *haystack = get_str_buffer(\"IDontUnderstand?Help!\");\n    const char *needle = get_str_buffer(\"?\");\n    char *buffer;\n\n    buffer = strstr(haystack, needle);\n    printf(\"The substring is: %s\\n\", buffer);\n\n\n    free(haystack);\n    free(needle);\n    return(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5083807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3bbc310b1174f6c0e5af1834706cc41?s=128&d=identicon&r=PG&f=1", "display_name": "Jessup Jong", "link": "https://stackoverflow.com/users/5083807/jessup-jong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1486, "favorite_count": 0, "accepted_answer_id": 32221939, "answer_count": 3, "score": 2, "last_activity_date": 1440578807, "creation_date": 1440571894, "last_edit_date": 1440572081, "question_id": 32219786, "link": "https://stackoverflow.com/questions/32219786/size-of-needle-in-strstr-function", "title": "Size of Needle in strstr function", "body": "<p>This is a simple question, but, when I am using the strstr function, why does the size of the needle have to be at least one character bigger than the actual text in the needle? Is this because of the null character?</p>\n\n<p>When I put the needle as needle[1], it does not work. Why is it fine to put the exact number of characters for the haystack?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\nint main(void)\n{\n   const char haystack[21] = \"IDontUnderstand?Help!\";\n   const char needle[2] = \"?\";\n   char *buffer;\n\n   buffer = strstr(haystack, needle);\n\n   printf(\"The substring is: %s\\n\", buffer);\n\n   return(0);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "memory"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1440570581, "post_id": 32219306, "comment_id": 52321961, "body": "The rule is simple: for each pointer you have obtained via <code>malloc</code> you need to do one <code>free</code> of that pointer and once you have done the <code>free</code> the pointer cannot be used anymore."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440745757, "post_id": 32219306, "comment_id": 52409431, "body": "after &#39;temp&#39; is passed to free(), it is nolonger available for use in the program.   in C, do  not cast the returned value from malloc, as it is a void * so can be assigned to any other pointer.   Always check (!=NULL) the returned value from malloc to assure the operation was successful."}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 3901898, "user_type": "registered", "accept_rate": 6, "profile_image": "https://i.stack.imgur.com/Mf1vX.png?s=128&g=1", "display_name": "Pyrons", "link": "https://stackoverflow.com/users/3901898/pyrons"}, "edited": false, "score": 0, "creation_date": 1440570438, "post_id": 32219352, "comment_id": 52321892, "body": "oh, i thought you had to free the pointer every time you need to point it to a new object."}, {"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 0, "creation_date": 1440570536, "post_id": 32219352, "comment_id": 52321931, "body": "@Cool Guy: +1 for saying that remove the cast. but there should be no problem because OP included &lt;stdlib.h&gt;"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 1, "creation_date": 1440570732, "post_id": 32219352, "comment_id": 52322046, "body": "@PravasiMeet Right. But it is generally frowned upon for the other reasons mentioned in the link. But it doesn&#39;t really matter as OP already has included <code>stdlib.h</code>. Thanks for telling!"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 195, "user_id": 3901898, "user_type": "registered", "accept_rate": 6, "profile_image": "https://i.stack.imgur.com/Mf1vX.png?s=128&g=1", "display_name": "Pyrons", "link": "https://stackoverflow.com/users/3901898/pyrons"}, "edited": false, "score": 0, "creation_date": 1440570773, "post_id": 32219352, "comment_id": 52322065, "body": "@Pyrons <a href=\"http://stackoverflow.com/questions/32219306/reusing-memory-in-c/32219352#comment52321961_32219306\">Keep this in mind</a>"}], "tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 6, "last_activity_date": 1440570586, "last_edit_date": 1440570586, "creation_date": 1440570182, "answer_id": 32219352, "question_id": 32219306, "link": "https://stackoverflow.com/questions/32219306/reusing-memory-in-c/32219352#32219352", "title": "Reusing memory in C", "body": "<p>I'm not sure why you have two <code>free(temp)</code>s here:</p>\n\n<pre><code>temp = newBox();\nstrcpy(temp-&gt;message,  \"Hello\");\nprintf(\"%s\\n\", temp-&gt;message);\n\nfree(temp); /* ? */\n\nstrcpy(temp-&gt;message,  \"World\");\nprintf(\"%s\\n\", temp-&gt;message);\n\nfree(temp); /* ? */\n\nstrcpy(temp-&gt;message,  \"People\");\nprintf(\"%s\\n\", temp-&gt;message);\n</code></pre>\n\n<p>That code should be</p>\n\n<pre><code>temp = newBox();\nstrcpy(temp-&gt;message,  \"Hello\");\nprintf(\"%s\\n\", temp-&gt;message);\n\nstrcpy(temp-&gt;message,  \"World\");\nprintf(\"%s\\n\", temp-&gt;message);\n\nstrcpy(temp-&gt;message,  \"People\");\nprintf(\"%s\\n\", temp-&gt;message);\n\nfree(temp); /* Free the allocated memory after use */\n</code></pre>\n\n<p>Once you <code>free</code> the memory, You must not use it. So <code>free</code> the memory at the end.</p>\n\n<hr>\n\n<p><em>Side note</em>: The cast here:</p>\n\n<pre><code>inBox = (box *) malloc(sizeof(box));\n</code></pre>\n\n<p>is not required and <a href=\"http://www.stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">here is why</a></p>\n"}, {"comments": [{"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 1, "creation_date": 1440570291, "post_id": 32219353, "comment_id": 52321826, "body": "also it invokes UB because same memory being freed more than once."}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": false, "score": 3, "last_activity_date": 1440570189, "creation_date": 1440570189, "answer_id": 32219353, "question_id": 32219306, "link": "https://stackoverflow.com/questions/32219306/reusing-memory-in-c/32219353#32219353", "title": "Reusing memory in C", "body": "<pre><code>free(temp);\n</code></pre>\n\n<p>Once you do this then the memory allocated by <code>malloc()</code>(in this case) is freed.</p>\n\n<p>So the allocated memory is gone and can't be used again, you have to allocate memory again if you want. </p>\n\n<p>Else <code>free()</code> the memory only after the required operations are performed on the allocated memory.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 2, "last_activity_date": 1440571591, "creation_date": 1440571591, "answer_id": 32219706, "question_id": 32219306, "link": "https://stackoverflow.com/questions/32219306/reusing-memory-in-c/32219706#32219706", "title": "Reusing memory in C", "body": "<p>Once you have free'd the memory that you got through malloc, it no longer belongs to you, and using it is Undefined Behaviour.</p>\n\n<p>You must have exactly one free per malloc, and you must free a pointer before using it in a new malloc - but this does not make much sense unless you a doing tests or what to alloc a different memory size (and in that last use case, you'd better use <code>realloc</code>)</p>\n\n<p>Assuming you have good reasons to malloc/free multiple times (this code does <strong>not</strong> exhibit such a requirement), you could do:</p>\n\n<pre><code>int main()\n{\n    box *temp = NULL;\n\n\n    temp = newBox();\n    strcpy(temp-&gt;message,  \"Hello\");\n    printf(\"%s\\n\", temp-&gt;message);\n\n    free(temp);\n\n    temp = newBox();\n    strcpy(temp-&gt;message,  \"World\");\n    printf(\"%s\\n\", temp-&gt;message);\n\n    free(temp);\n\n    temp = newBox();\n    strcpy(temp-&gt;message,  \"People\");\n    printf(\"%s\\n\", temp-&gt;message);\n    free(temp);\n\n    return 0;   \n\n}\n</code></pre>\n\n<p>And please do not cast malloc result in C! It should be:</p>\n\n<pre><code>box *newBox()\n{\n    box *inBox;\n    inBox = malloc(sizeof(box));\n\n    return inBox;\n}\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 3901898, "user_type": "registered", "accept_rate": 6, "profile_image": "https://i.stack.imgur.com/Mf1vX.png?s=128&g=1", "display_name": "Pyrons", "link": "https://stackoverflow.com/users/3901898/pyrons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1440571591, "creation_date": 1440570066, "question_id": 32219306, "link": "https://stackoverflow.com/questions/32219306/reusing-memory-in-c", "title": "Reusing memory in C", "body": "<p>I'm having trouble utilising and understanding the free() function in C.</p>\n\n<p>I tried writing up this example to keep reusing a pointer but I don't understand why error occurs:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\ntypedef struct box\n{\n    char message[20];\n}box;\n\n\nbox *newBox()\n{\n    box *inBox;\n    inBox = (box *) malloc(sizeof(box));\n\n    return inBox;\n}\n\n\nint main()\n{\n    box *temp = NULL;\n\n\n    temp = newBox();\n    strcpy(temp-&gt;message,  \"Hello\");\n    printf(\"%s\\n\", temp-&gt;message);\n\n    free(temp);\n\n    strcpy(temp-&gt;message,  \"World\");\n    printf(\"%s\\n\", temp-&gt;message);\n\n    free(temp);\n\n    strcpy(temp-&gt;message,  \"People\");\n    printf(\"%s\\n\", temp-&gt;message);\n\n    return 0;   \n\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>Hello\nWorld\nmemory(531,0x7fff77e9e300) malloc: *** error for object 0x7fe8ba404a90: pointer being freed was not allocated\n*** set a breakpoint in malloc_error_break to debug\nAbort trap: 6\n</code></pre>\n\n<p>Is there a workaround to fix it?</p>\n"}, {"tags": ["c", "floating-point"], "comments": [{"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1440588414, "post_id": 32219215, "comment_id": 52333215, "body": "@CoolGuy I don&#39;t think there is any undefined behavior in this program. You do realize that the innermost loop is entered only if its condition is true, right?"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1440588651, "post_id": 32219215, "comment_id": 52333378, "body": "@PascalCuoq Oh. I missed that. Thanks for correcting me."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 2497069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zL36y.jpg?s=128&g=1", "display_name": "Sayeed", "link": "https://stackoverflow.com/users/2497069/sayeed"}, "edited": false, "score": 0, "creation_date": 1440570432, "post_id": 32219293, "comment_id": 52321886, "body": "Thanks for the correction. But why its printing 2.58 and 36.60 even when the data type of temp_loc is int? If it converts float to int it should convert all of them right? Anyway I made the correction and it works fine. Thanks."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 27, "user_id": 2497069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zL36y.jpg?s=128&g=1", "display_name": "Sayeed", "link": "https://stackoverflow.com/users/2497069/sayeed"}, "edited": false, "score": 0, "creation_date": 1440570627, "post_id": 32219293, "comment_id": 52321980, "body": "Look at this line: <code>fl_array[i] = fl_array[j];</code> Probably <code>2.58</code> and <code>36.60</code> were just lucky guys and got swapped by this line, so they weren&#39;t assigned to <code>temp_loc</code> at all."}, {"owner": {"reputation": 27, "user_id": 2497069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zL36y.jpg?s=128&g=1", "display_name": "Sayeed", "link": "https://stackoverflow.com/users/2497069/sayeed"}, "edited": false, "score": 0, "creation_date": 1440570794, "post_id": 32219293, "comment_id": 52322078, "body": "I wonder How carefully you observed the problem! Thanks. Give me some good tips for improvement."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 27, "user_id": 2497069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zL36y.jpg?s=128&g=1", "display_name": "Sayeed", "link": "https://stackoverflow.com/users/2497069/sayeed"}, "edited": false, "score": 1, "creation_date": 1440572637, "post_id": 32219293, "comment_id": 52323040, "body": "Read the Bubble Sort article on Wikipedia and reimplement your algorithm <b>exactly</b> as described there. Afterwards, you can compare to an existing implementation."}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": true, "score": 3, "last_activity_date": 1440570031, "creation_date": 1440570031, "answer_id": 32219293, "question_id": 32219215, "link": "https://stackoverflow.com/questions/32219215/what-causes-floating-poing-number-rounding-in-array/32219293#32219293", "title": "What causes floating poing number rounding in array?", "body": "<p>Your problem is the <code>temp_loc</code> variable. It's an <code>int</code>, so assigning a float to it will convert it to an integer. Change it's type to <code>float</code>:</p>\n\n<pre><code>float temp_loc;\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 2497069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zL36y.jpg?s=128&g=1", "display_name": "Sayeed", "link": "https://stackoverflow.com/users/2497069/sayeed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 32219293, "answer_count": 1, "score": -1, "last_activity_date": 1440570031, "creation_date": 1440569702, "question_id": 32219215, "link": "https://stackoverflow.com/questions/32219215/what-causes-floating-poing-number-rounding-in-array", "title": "What causes floating poing number rounding in array?", "body": "<p>I have written this program to sort floating point array in C using bubble sort algorithm. </p>\n\n<pre><code>    /* This program will sort floating point numbers in an array */\n\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\n    float fl_array[] = {12.35f, 14.05f, 9.85f, 14.34f, 2.58f, 36.6f}; \n    int array_length = sizeof(fl_array)/sizeof(fl_array[0]); \n\n    //printing the unsorted array\n    int print_counter = 0;\n    printf(\"Printing the unsorted array\\n\"); \n    do{\n        printf(\"%.2f \", fl_array[print_counter]);\n         print_counter ++; \n    } while(print_counter &lt; array_length); \n    printf(\"\\n\"); \n\n    printf(\"***** Sorting Begins *********\\n\"); \n\n    //declaration of variables for sorting\n    int i, j, temp_loc; \n    for(i=0; i&lt;array_length; ++i)\n    {\n        for(j=i + 1; j&lt;array_length; ++j)\n        {\n            if(fl_array[i] &gt; fl_array[j])\n            {\n            temp_loc = fl_array[i]; \n            fl_array[i] = fl_array[j];\n            fl_array[j]= temp_loc; \n            }\n        }       \n    }\n\n    //end of bubble sort\n    //prnting the sorted array\n\n    print_counter = 0;\n    printf(\"Printing the sorted array\\n\");\n    do{\n        printf(\"%.2f \", fl_array[print_counter]);\n         print_counter ++; \n    } while(print_counter &lt; array_length); \n    printf(\"\\n\");\n\nreturn 0; \n}\n</code></pre>\n\n<p>The program produces the output as:</p>\n\n<pre><code>Printing the unsorted array\n12.35 14.05 9.85 14.34 2.58 36.60 \n***** Sorting Begins *********\nPrinting the sorted array\n2.58 9.00 12.00 14.00 14.00 36.60 \n</code></pre>\n\n<p>I have read many posts regarding this and I understand that floating point number cannot be directly processed, they could be converted to double and compared as a double value. But the question is what technique can be applied to this program to display the float numbers with their precision values? </p>\n"}, {"tags": ["c", "pic"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1440568679, "post_id": 32218945, "comment_id": 52321172, "body": "Are you serious about this :  <code>a = 4; a &lt; 5; a = a++</code> ? You probably want this: <code>a = 4; a &lt; 5; a++</code>, but this is still doubtful, your loop will run only once."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1440568734, "post_id": 32218945, "comment_id": 52321195, "body": "What type is <code>result</code>?"}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1440568759, "post_id": 32218945, "comment_id": 52321206, "body": "note: writing a=a++ in your loop will cause infinite loop because, the a++ will increment the value in a but only after the assignment so a will remain the same. Instead you should write (a = 4;a &lt; 5; a++)"}, {"owner": {"reputation": 21, "user_id": 4220458, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/985006c11249b09ff4e62dc873ae4c3f?s=128&d=identicon&r=PG&f=1", "display_name": "Nazif Jaafar", "link": "https://stackoverflow.com/users/4220458/nazif-jaafar"}, "edited": false, "score": 0, "creation_date": 1440568821, "post_id": 32218945, "comment_id": 52321230, "body": "I should probably use &#39;a = 4; a &lt; 5; a++&#39; thanks for the correction"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1440568932, "post_id": 32218945, "comment_id": 52321271, "body": "@NazifJaafar your <code>sprintf</code> resulta in undefibed behaviour, you have 4 <code>%d</code> format specifiers but you provide only one argument (<code>result</code>)."}, {"owner": {"reputation": 21, "user_id": 4220458, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/985006c11249b09ff4e62dc873ae4c3f?s=128&d=identicon&r=PG&f=1", "display_name": "Nazif Jaafar", "link": "https://stackoverflow.com/users/4220458/nazif-jaafar"}, "edited": false, "score": 0, "creation_date": 1440568935, "post_id": 32218945, "comment_id": 52321272, "body": "The type of the result is in numbers, before run the for loop I declared (int result =  0)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1440568969, "post_id": 32218945, "comment_id": 52321289, "body": "@NazifJaafar so you want simply print the content of the <code>result</code> variable ?"}, {"owner": {"reputation": 21, "user_id": 4220458, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/985006c11249b09ff4e62dc873ae4c3f?s=128&d=identicon&r=PG&f=1", "display_name": "Nazif Jaafar", "link": "https://stackoverflow.com/users/4220458/nazif-jaafar"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1440569035, "post_id": 32218945, "comment_id": 52321311, "body": "@MichaelWalz, yup, you are right. But I not sure what variable to put. I got error if I put (result0,result1,result2,result3)"}, {"owner": {"reputation": 21, "user_id": 4220458, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/985006c11249b09ff4e62dc873ae4c3f?s=128&d=identicon&r=PG&f=1", "display_name": "Nazif Jaafar", "link": "https://stackoverflow.com/users/4220458/nazif-jaafar"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1440569136, "post_id": 32218945, "comment_id": 52321354, "body": "@MichaelWalz, Actually I thought if I put (result), it will print four value. Sorry I am new to C programming."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1440569153, "post_id": 32218945, "comment_id": 52321362, "body": "@NazifJaafar I&#39;m not sure what you are trying to achieve. Maybe you want <code>sprintf(lala,&quot;test: %d\\r\\n&quot;,result);</code>. Please tell us what exactly you are trying to do."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1440569383, "post_id": 32218945, "comment_id": 52321467, "body": "Do you want to print every byte of <code>result</code> seperately? If yes, <code>uint32_t</code> might be a better choice since an <code>int</code> is only required to be able to hold the value <code>2^16 - 1</code>. Show us how <code>ADC1BUF0</code> is created, please."}, {"owner": {"reputation": 21, "user_id": 4220458, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/985006c11249b09ff4e62dc873ae4c3f?s=128&d=identicon&r=PG&f=1", "display_name": "Nazif Jaafar", "link": "https://stackoverflow.com/users/4220458/nazif-jaafar"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1440569960, "post_id": 32218945, "comment_id": 52321674, "body": "@cad, I got an error if I use (uint32_t) . Kindly refer this image.<a href=\"http://i.imgur.com/cM4G9Z5.png\" rel=\"nofollow noreferrer\">i.imgur.com/cM4G9Z5.png</a>  It show my result if I use (sprintf(lala,&quot;test: %d\\r\\n&quot;,result))"}, {"owner": {"reputation": 21, "user_id": 4220458, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/985006c11249b09ff4e62dc873ae4c3f?s=128&d=identicon&r=PG&f=1", "display_name": "Nazif Jaafar", "link": "https://stackoverflow.com/users/4220458/nazif-jaafar"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1440570575, "post_id": 32218945, "comment_id": 52321953, "body": "@cad, when a =0 , ADC1BUF0 will read the value from port1 in my circuit, when a = 1,ADC1BUF0  will read from others port, until port 4. so , it can show four result."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "reply_to_user": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 0, "creation_date": 1440570757, "post_id": 32218945, "comment_id": 52322058, "body": "@CIsForCoocckies: actually, <code>a=a++</code> is undefined behaviour. <a href=\"http://stackoverflow.com/questions/9943697/whats-the-reason-for-letting-the-semantics-of-a-a-be-undefined\" title=\"whats the reason for letting the semantics of a a be undefined\">stackoverflow.com/questions/9943697/&hellip;</a>"}, {"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1440570928, "post_id": 32218945, "comment_id": 52322144, "body": "@KarolyHorvath didn&#39;t know that, thanks. I executed that loop and it turned out to be infinite, as I guessed, so I thought a = a++ does as I mentioned."}], "answers": [{"tags": [], "owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "is_accepted": true, "score": 0, "last_activity_date": 1440572552, "creation_date": 1440572552, "answer_id": 32219967, "question_id": 32218945, "link": "https://stackoverflow.com/questions/32218945/how-to-extract-more-value-from-one-variable/32219967#32219967", "title": "How to extract more value from one variable", "body": "<p>If I understand this correctly, you basically have:</p>\n\n<pre><code>for( a = 4; a &lt; 5; a = a++ )\n{\n   /* code to sample one channel and store\n    * the result in \"result\" */\n}\n</code></pre>\n\n<p>...which you expect to sample each of four channels, then you try to print all four results with:</p>\n\n<pre><code>sprintf(lala,\"test: %d, %d, %d, %d\\r\\n\",result);\nsendString(lala);\n__delay32(20000);\n</code></pre>\n\n<p>First, your loop currently only does one iteration (after correcting <code>a = a++</code> to <code>a++</code>), with <code>a</code> equal to <code>4</code>.  You appear to need it to loop from 0 to 3 (for AN0-AN3):</p>\n\n<pre><code>for ( a = 0; a &lt; 4; a++ )\n</code></pre>\n\n<p>Also, <code>result</code> will only hold one value at a time.  Each time through the loop, the assignment replaces the old <code>result</code> value with the new one -- it doesn't add a second, third, etc. value to <code>result</code> but rather it changes the one value <code>result</code> holds.  So you need to either have four separate variables (such as 4 elements of an array), or to do what you need to with each value in the loop so that you're finished with it before you read the next one.  With an array, you might have:</p>\n\n<pre><code>int results[4];\n\n/* ... */\n\nfor( a = 0; a &lt; 4; a++ )\n{\n    /* ... */\n    results[a] = ADC1BUF0;\n}\n\n/* ... */\n\nsprintf(lala,\"test: %d, %d, %d, %d\\r\\n\",\n        results[0],results[1],results[2],results[3]);\nsendString(lala);\n__delay32(20000);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4220458, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/985006c11249b09ff4e62dc873ae4c3f?s=128&d=identicon&r=PG&f=1", "display_name": "Nazif Jaafar", "link": "https://stackoverflow.com/users/4220458/nazif-jaafar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 32219967, "answer_count": 1, "score": -2, "last_activity_date": 1440572552, "creation_date": 1440568489, "question_id": 32218945, "link": "https://stackoverflow.com/questions/32218945/how-to-extract-more-value-from-one-variable", "title": "How to extract more value from one variable", "body": "<p>from the result in my \"for\" loop, have stored four value.\nHow to extract that value to show the value(sprintf) ?</p>\n\n<p>Kindly refer to the attached the image file.</p>\n\n<p><a href=\"https://i.stack.imgur.com/k8bnU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k8bnU.png\" alt=\"Extrac value in ADC1BUF0\"></a></p>\n\n<p>Here the code :</p>\n\n<pre><code>for( a = 4; a &lt; 5; a = a++ )\n           {\n                 AD1CHS0bits.CH0SA = a   ;  //select which ANI connect to channel 0\n                 AD1CHS0bits.CH0NA = 0   ;  //vref as channel 0 -ve input\n                 AD1CON1bits.ADON  = 1   ;\n                 AD1CON1bits.SAMP = 1    ;\n                 __delay32(50)           ;\n                 AD1CON1bits.SAMP = 0    ;   //sampling bit to 0\n                 while(!AD1CON1bits.DONE);\n                 result = ADC1BUF0       ;\n           }\n</code></pre>\n\n<p>Here my sprinf code:</p>\n\n<pre><code>           sprintf(lala,\"test: %d, %d, %d, %d\\r\\n\",result);\n           sendString(lala);\n           __delay32(20000);\n</code></pre>\n\n<p>Thanks</p>\n\n<p>Regards, \nNazif</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1440568050, "post_id": 32218784, "comment_id": 52320916, "body": "At a minimum, it&#39;s a memory leak."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1440568159, "post_id": 32218784, "comment_id": 52320957, "body": "<code>middle_initial[i]</code> is the i-th character and is not a pointer. But not sure what that line of code is trying to do. It&#39;s assigning a random character value to <code>middle_initial[i]</code> since <code>malloc</code> does not intialise the allocated memory. And it doesn&#39;t keep track of the allocated memory pointer so it can&#39;t be freed later."}, {"owner": {"reputation": 49, "user_id": 3573229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d0b8b73c5335ec6fb7b70acc7e25c4e?s=128&d=identicon&r=PG&f=1", "display_name": "JackW", "link": "https://stackoverflow.com/users/3573229/jackw"}, "edited": false, "score": 0, "creation_date": 1440568455, "post_id": 32218784, "comment_id": 52321080, "body": "For the line of code, my intent is to have a character pointer to 1 column of characters. So, middle_initial[i] is a char pointer to one character, middle_initial[i+1] is char pointer to another character"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1440570916, "post_id": 32218784, "comment_id": 52322138, "body": "<a href=\"http://stackoverflow.com/q/605845/995714\">No need/Don&#39;t cast the result of malloc in C</a>. And <code>sizeof(char)</code> is always 1, no need to use it either"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 3573229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d0b8b73c5335ec6fb7b70acc7e25c4e?s=128&d=identicon&r=PG&f=1", "display_name": "JackW", "link": "https://stackoverflow.com/users/3573229/jackw"}, "edited": false, "score": 0, "creation_date": 1440570579, "post_id": 32218875, "comment_id": 52321958, "body": "Thanks. I have a second question. I would like middle_initial [i] to be 6 char pointers  each having the capacity to point to 1 character. What can I modify above to do such that?"}, {"owner": {"reputation": 7515, "user_id": 5249858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/900942861bfbfdd27433e3ccbf7d6d0f?s=128&d=identicon&r=PG&f=1", "display_name": "3442", "link": "https://stackoverflow.com/users/5249858/3442"}, "reply_to_user": {"reputation": 49, "user_id": 3573229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d0b8b73c5335ec6fb7b70acc7e25c4e?s=128&d=identicon&r=PG&f=1", "display_name": "JackW", "link": "https://stackoverflow.com/users/3573229/jackw"}, "edited": false, "score": 0, "creation_date": 1440571836, "post_id": 32218875, "comment_id": 52322595, "body": "@JackW: Did you meant <i>I would like <code>middle_initial</code> to be 6 <code>char*</code> each having the capacity to point to 1 character</i>, or <i>I would like <code>middle_initial[i]</code> to be 6 <code>char*</code> each having the capacity to point to 1 character</i>? Depending on the answer, use respectively this for <code>middle_initial</code>: <code>char *middle_initial[6]</code>. Or this for <code>middle_initial[i]</code>: <code>char *(*middle_initial)[6]</code>. Say us if you have more questions :)."}], "tags": [], "owner": {"reputation": 7515, "user_id": 5249858, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/900942861bfbfdd27433e3ccbf7d6d0f?s=128&d=identicon&r=PG&f=1", "display_name": "3442", "link": "https://stackoverflow.com/users/5249858/3442"}, "is_accepted": true, "score": 3, "last_activity_date": 1440568162, "creation_date": 1440568162, "answer_id": 32218875, "question_id": 32218784, "link": "https://stackoverflow.com/questions/32218784/whats-the-difference-between-char-and-char-in-this-example/32218875#32218875", "title": "Whats the difference between char** and char* in this example?", "body": "<p>Dereferencing effectively \"reduces the type's pointer count by one\".</p>\n\n<p>Every piece of code there is okay, except for...</p>\n\n<pre><code>middle_initial[i] = *(char*) malloc(middle_max*sizeof(char));\n</code></pre>\n\n<p>What does this line is supposed to do apart from undefined behaviour? <em>We don't now</em>! As the type of <code>middle_initial</code> is <code>char*</code>, the dereference by index effectively references a <code>char</code> object. Then, we have the illogical expression. A <code>char*</code> of <code>middle_max</code> chars is allocated on the heap, but... that <code>*</code> at the front dereferences that allocated memory (memory that can be unitialized, BTW...). Then, such a garbage value is assigned to the forementioned <code>char</code> in <code>middle_initial</code>. The result of this loop is a <code>middle_initial</code> containing garbage chars comming from unrecoverably leaked memory.</p>\n\n<p>And, of course, if <code>size &lt; 5</code>, UB everywhere whenever dereferencing!</p>\n"}], "owner": {"reputation": 49, "user_id": 3573229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d0b8b73c5335ec6fb7b70acc7e25c4e?s=128&d=identicon&r=PG&f=1", "display_name": "JackW", "link": "https://stackoverflow.com/users/3573229/jackw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 32218875, "answer_count": 1, "score": 0, "last_activity_date": 1440571106, "creation_date": 1440567744, "last_edit_date": 1440571106, "question_id": 32218784, "link": "https://stackoverflow.com/questions/32218784/whats-the-difference-between-char-and-char-in-this-example", "title": "Whats the difference between char** and char* in this example?", "body": "<pre><code>char** surname;\nsurname = (char**) malloc(size*sizeof(char*));\n\nchar* middle_initial;\nmiddle_initial = (char*) malloc(size*sizeof(char));\n\nfor(int i = 0; i&lt;5;i++){       \n  surname[i] = (char*) malloc(surname_max*sizeof(char));\n  middle_initial[i] = *(char*) malloc(middle_max*sizeof(char)); // Please focus on this line\n}\n</code></pre>\n\n<p><code>surname</code> is a <code>double char pointer</code>, and it makes sense that <code>surname[i]</code> is the <code>i</code>-th pointer pointed to by <code>surname</code>. </p>\n\n<p>However, middle_initial confuses me. Is middle <code>initial[i]</code> the <code>i</code>-th character pointer? If so, why does <code>malloc</code> returns value call for a dereferenced <code>*(char *)</code>  instead of <code>(char *)</code> during debugging?</p>\n\n<p>** Follow up question**\n I would like middle_initial [i] to be 6 char pointers each having the capacity to point to 1 character. What can I modify above to do such that? </p>\n"}, {"tags": ["c", "random"], "comments": [{"owner": {"reputation": 2778, "user_id": 4827151, "user_type": "registered", "accept_rate": 53, "profile_image": "https://lh6.googleusercontent.com/-5co1tbFK6P8/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucl1vK3QTTBU02raJKAU9cGndP9dxQ/photo.jpg?sz=128", "display_name": "DarkMakukudo", "link": "https://stackoverflow.com/users/4827151/darkmakukudo"}, "edited": false, "score": 0, "creation_date": 1440567708, "post_id": 32218734, "comment_id": 52320771, "body": "<code>will this work just as well for(a=0;a&lt;100;a++)??</code> definitely yes!, you can write it this way, inner loop is just useless in random and printing"}], "answers": [{"tags": [], "owner": {"reputation": 467, "user_id": 5118455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0da1391e8d298f6d4e2d1ac574e4546?s=128&d=identicon&r=PG&f=1", "display_name": "John Hammond", "link": "https://stackoverflow.com/users/5118455/john-hammond"}, "is_accepted": false, "score": 1, "last_activity_date": 1440570334, "creation_date": 1440570334, "answer_id": 32219393, "question_id": 32218734, "link": "https://stackoverflow.com/questions/32218734/how-does-this-code-generate-100-random-number/32219393#32219393", "title": "How does this code generate 100 random number", "body": "<blockquote>\n  <p>Why would someone write code like the code below?</p>\n</blockquote>\n\n<p>For example, to clarify that he does not generate 100 random numbers, but 20 times 5 random numbers.</p>\n\n<p>In example:</p>\n\n<pre><code>/* Allocate strings */\nptr = malloc(392);\nptr = malloc(8 * 48 + 8 * 1);\n</code></pre>\n\n<p>Both are the same, yet, a reader will see in the second case that he allocates memory for 8 strings with 48 bytes and 8 string terminations.</p>\n\n<p>Of course, he could have written <code>a &lt; 20 * 5</code> and achieved the same.</p>\n\n<p>The second possibility is that the code is just wrong. But <code>for</code> statements don't appear out of thin air. So the error is likely not that he couldn't imagine to only use one <code>for</code> loop, but likely that he intended to write something like:</p>\n\n<pre><code>   for (a=0; a&lt;20; a++) {\n        for (b=0; b&lt;5; b++) {\n            r=rand();\n            printf(\"%d\\t\", r);\n        }\n        printf(\"\\n\");\n    }\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5266916, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4f10ee4954417d65c11e7840c5cc8096?s=128&d=identicon&r=PG&f=1", "display_name": "Jazzin", "link": "https://stackoverflow.com/users/5266916/jazzin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1440570334, "creation_date": 1440567506, "last_edit_date": 1440567579, "question_id": 32218734, "link": "https://stackoverflow.com/questions/32218734/how-does-this-code-generate-100-random-number", "title": "How does this code generate 100 random number", "body": "<blockquote>\n  <p>will this work just as well for(a=0;a&lt;100;a++)?? Why would someone\n  write code like the code below? I think I know how this code is read.\n  Does it take for loop a * b? What other ways could you write this\n  code? I have not seen any code similar on this site so I thought I\n  would create a question for it. Please help me if you can, also I am\n  new to this site.</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    int r,a,b;\n\n    printf(\"100 Random Numbers: \");\n\n    for (a=0; a&lt;20; a++) {\n        for (b=0; b&lt;5; b++) {\n            r=rand();\n            printf(\"%d\\t\", r);\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 80010, "user_id": 616700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895bbb347c09503581d8dc510188002e?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/616700/erik"}, "edited": false, "score": 0, "creation_date": 1440567658, "post_id": 32218726, "comment_id": 52320750, "body": "You&#39;re passing <i>a copy of</i> <code>a</code> <code>b</code> and <code>c</code> to <code>initialize_chars</code>, which happily allocates memory, stores the pointer in the <code>arg</code> variable which ceases to exist when the function returns, and therefore leak memory without modifying your original <code>a</code> <code>b</code> or <code>c</code>"}], "answers": [{"comments": [{"owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "edited": false, "score": 0, "creation_date": 1440567894, "post_id": 32218757, "comment_id": 52320852, "body": "Passing a pointer to an uninitialized value would not be UB. But wouldn&#39;t <code>return</code> be better advice?"}, {"owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "reply_to_user": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "edited": false, "score": 0, "creation_date": 1440568063, "post_id": 32218757, "comment_id": 52320923, "body": "@Potatoswatter I just put it as a note to make sure OP understands that uninitialized values leads to UB"}], "tags": [], "owner": {"reputation": 19499, "user_id": 3883560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ndXdL.jpg?s=128&g=1", "display_name": "Gopi", "link": "https://stackoverflow.com/users/3883560/gopi"}, "is_accepted": true, "score": 0, "last_activity_date": 1440568396, "last_edit_date": 1440568396, "creation_date": 1440567608, "answer_id": 32218757, "question_id": 32218726, "link": "https://stackoverflow.com/questions/32218726/struct-member-char-initialized-in-a-function-call-as-a-parameter/32218757#32218757", "title": "Struct member char * initialized in a function call as a parameter", "body": "<p>There are 2 things in C when it comes to passing the value to function parameters</p>\n\n<ol>\n<li>Pass by value</li>\n<li>Pass by reference</li>\n</ol>\n\n<p>You are doing pass by value so you are passing some unintiialized value to the function and initializing it in the function which is not visible outside the function, you are trying to use uninitialized values in <code>main()</code> which will lead to undefined behavior.</p>\n\n<pre><code>arg = \"0123456789\";\n</code></pre>\n\n<p>If you want to copy a string to some memory location then you need <code>memcpy()</code> or <code>strcpy()</code></p>\n\n<p>Note: Using uninitialized values leads to undefined behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1440568254, "creation_date": 1440568254, "answer_id": 32218897, "question_id": 32218726, "link": "https://stackoverflow.com/questions/32218726/struct-member-char-initialized-in-a-function-call-as-a-parameter/32218897#32218897", "title": "Struct member char * initialized in a function call as a parameter", "body": "<p>Your code has several problems. Here is the fixed code:</p>\n\n<pre><code>/* Don't forget to include &lt;stdio.h&gt;, &lt;stdlib.h&gt; and &lt;string.h&gt; */\n\ntypedef struct {\n    char *a;\n    char *b;\n    char *c;\n}mystruct;\n\nvoid init_chars (char **arg) /* This should be char** as the address of a char* is passed */\n{\n    *arg = malloc ( /*sizeof(char)* */ 11); /* sizeof(char) is 1 always. You don't need it */\n                                            /* Note the change of `arg` to `*arg` too */\n                                            /* And that I've used 11 and not 10 because there needs to be space for the NUL-terminator */\n\n    if(*arg == NULL) /* If the above malloc failed */\n    {\n        printf(\"Oops! malloc for *arg failed!\");\n        exit(-1);\n    }\n\n    //arg = \"0123456789\"; /* You just lost the allocated memory as you make the pointer point to a string literal */\n\n    strcpy(*arg, \"0123456789\"); /* Use strcpy instead */\n    printf (\"%s\\n\", *arg);      /* *arg here */\n}\n\nint main ()\n{\n    mystruct *msp = malloc (sizeof (mystruct));\n\n    if(msp == NULL) /* If the above malloc failed */\n    {\n        printf(\"Oops! malloc for msp failed!\");\n        return -1;\n    }\n\n    init_chars (&amp;(msp-&gt;a));\n    init_chars (&amp;(msp-&gt;b)); \n    init_chars (&amp;(msp-&gt;c));  /* Pass address of variables rather than their value */\n\n    printf (\"%s, %s, %s\\n\", msp-&gt;a, msp-&gt;b, msp-&gt;c);\n\n    free(msp-&gt;a);\n    free(msp-&gt;b);\n    free(msp-&gt;c);\n\n    free(msp);    /* Free everything after use */\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1440568672, "post_id": 32218970, "comment_id": 52321167, "body": "1) You didn&#39;t free the allocated memory, leading to a memory leak and 2) You lost the recently allocated memory by using <code>*arg = &quot;0123456789&quot;;</code>."}, {"owner": {"reputation": 1, "user_id": 2460045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938788d291146fe3f77513f63e9e6d6b?s=128&d=identicon&r=PG", "display_name": "songcy", "link": "https://stackoverflow.com/users/2460045/songcy"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1440569398, "post_id": 32218970, "comment_id": 52321473, "body": "Yes you are right,i will repair it. Your code is safe and clear"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1440569816, "post_id": 32218970, "comment_id": 52321615, "body": "You haven&#39;t allocated space for the NUL-terminator(<code>&#39;\\0&#39;</code>). So, the <code>strcpy</code> line writes into an invalid memory location invoking Undefined Behavior."}, {"owner": {"reputation": 1, "user_id": 2460045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938788d291146fe3f77513f63e9e6d6b?s=128&d=identicon&r=PG", "display_name": "songcy", "link": "https://stackoverflow.com/users/2460045/songcy"}, "reply_to_user": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 0, "creation_date": 1440570325, "post_id": 32218970, "comment_id": 52321841, "body": "oh,i forgot it,thanks a lot.And i should check if(*arg==NULL) in case of malloc failure."}], "tags": [], "owner": {"reputation": 1, "user_id": 2460045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938788d291146fe3f77513f63e9e6d6b?s=128&d=identicon&r=PG", "display_name": "songcy", "link": "https://stackoverflow.com/users/2460045/songcy"}, "is_accepted": false, "score": 0, "last_activity_date": 1440570687, "last_edit_date": 1440570687, "creation_date": 1440568610, "answer_id": 32218970, "question_id": 32218726, "link": "https://stackoverflow.com/questions/32218726/struct-member-char-initialized-in-a-function-call-as-a-parameter/32218970#32218970", "title": "Struct member char * initialized in a function call as a parameter", "body": "<pre><code>typedef struct {\n    char *a;\n    char *b;\n    char *c;\n}mystruct;\n\nvoid init_chars (char **arg)\n{\n    *arg = malloc (sizeof (char)*11);\n    if(*arg == NULL)\n    {\n        printf(\"malloc failed!\");\n        exit(-1);\n    }\n    strcpy(*arg,\"0123456789\");\n    printf (\"%s\\n\", *arg);\n}\n\nint main ()\n{\n    mystruct *msp = malloc (sizeof (mystruct));\n    if(msp == NULL)\n    {\n        printf(\"malloc failed\");\n        exit(-1);\n    }\n    init_chars (&amp;msp-&gt;a);\n    init_chars (&amp;msp-&gt;b);\n    init_chars (&amp;msp-&gt;c);\n    printf (\"%s, %s, %s\\n\", msp-&gt;a, msp-&gt;b, msp-&gt;c);\n    free(msp-&gt;a);\n    free(msp-&gt;b);\n    free(msp-&gt;c);\n    free(msp)\n    return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<p>0123456789</p>\n\n<p>0123456789</p>\n\n<p>0123456789</p>\n\n<p>0123456789, 0123456789, 0123456789</p>\n\n<p>compare with your code u will understand why</p>\n"}], "owner": {"reputation": 3, "user_id": 5266952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a9122579ccdeb122a3f33bda123e40d?s=128&d=identicon&r=PG&f=1", "display_name": "user204720", "link": "https://stackoverflow.com/users/5266952/user204720"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 32218757, "answer_count": 3, "score": 0, "last_activity_date": 1440570687, "creation_date": 1440567464, "last_edit_date": 1440568510, "question_id": 32218726, "link": "https://stackoverflow.com/questions/32218726/struct-member-char-initialized-in-a-function-call-as-a-parameter", "title": "Struct member char * initialized in a function call as a parameter", "body": "<p>This is more out of curiosity, and is not how I want or need it to work. But when I was doing some mockups and wanted to test something out, I ended up with something like this... and was wondering why it doesn't work as I expected. </p>\n\n<pre><code>typedef struct {\n    char *a;\n    char *b;\n    char *c;\n}mystruct;\n\nvoid init_chars (char *arg)\n{\n    arg = malloc (sizeof (char)*10);\n    arg = \"0123456789\";\n    printf (\"%s\\n\", arg);\n}\n\nint main ()\n{\n    mystruct *msp = malloc (sizeof (mystruct));\n    init_chars (msp-&gt;a);\n    init_chars (msp-&gt;b);\n    init_chars (msp-&gt;c);\n    printf (\"%s, %s, %s\\n\", msp-&gt;a, msp-&gt;b, msp-&gt;c);\n    return 0;\n}\n</code></pre>\n\n<p>Prints...</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0123456789\n\n0123456789\n\n0123456789\n\n(null),(null),(null)\n</code></pre>\n"}, {"tags": ["c", "linux", "linux-kernel", "kernel-module", "absolute-path"], "owner": {"reputation": 839, "user_id": 2706918, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wDDMU.jpg?s=128&g=1", "display_name": "Nitinkumar Ambekar", "link": "https://stackoverflow.com/users/2706918/nitinkumar-ambekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1440565877, "creation_date": 1440565877, "last_edit_date": 1495542580, "question_id": 32218415, "link": "https://stackoverflow.com/questions/32218415/what-is-the-alternative-for-fcheck-files-to-get-absolute-path-by-file-descri", "title": "What is the alternative for &#39;fcheck_files()&#39; to get absolute path by file descriptor in a kernel module?", "body": "<p>In a kernel module, we use <strong>fcheck_files()</strong> to get <em>files_struct</em> which further can be used to get <em>absolute path</em> by <em>descriptor</em>, see <a href=\"https://stackoverflow.com/a/8250940/2706918\">this answer</a> for example. The problem with this function is that, It returns <em>NULL</em> if provided <em>descriptor</em> is for either <em>empty directory</em> or a <em>file</em>. </p>\n\n<p>Is there any alternative way to get <em>absolute path</em> by <em>fd</em> for a <em>file</em> and/or <em>empty directory</em> in a <em>kernel module</em>?  </p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 521, "user_id": 4759923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6208b717188e9b434bef2bc9bba339f7?s=128&d=identicon&r=PG&f=1", "display_name": "user4759923", "link": "https://stackoverflow.com/users/4759923/user4759923"}, "edited": false, "score": 2, "creation_date": 1440566111, "post_id": 32218407, "comment_id": 52320204, "body": "Where does the segmentation fault occur?"}, {"owner": {"reputation": 648, "user_id": 3405686, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/922978be2e4e18b9987e629e943b9779?s=128&d=identicon&r=PG&f=1", "display_name": "shas", "link": "https://stackoverflow.com/users/3405686/shas"}, "edited": false, "score": 0, "creation_date": 1440566188, "post_id": 32218407, "comment_id": 52320220, "body": "&quot;Segmentation fault&quot; means that you tried to access memory that you do not have access to."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1440567059, "post_id": 32218407, "comment_id": 52320529, "body": "Instead of using <code>strncpy</code> you could use <code>strcpy(y,&quot;111111111&quot;);</code> and then <code>strcat(y, ...)</code> or even simpler <code>strcpy(y, &quot;111111111.000.recon&quot;)</code>. But even this is still complicated. It leave it as an exercice for the reader to simplify it even more."}, {"owner": {"reputation": 3, "user_id": 5266907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e374b39cbbc4025871fdbf2e7cb3a46b?s=128&d=identicon&r=PG&f=1", "display_name": "sandy", "link": "https://stackoverflow.com/users/5266907/sandy"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1440569613, "post_id": 32218407, "comment_id": 52321541, "body": "@michael: i have removed memcpy and no errors seen. but is not as desired. i have 111111111.000.recon file in sample directory. but it is going to else condition five times. actually it should go to match found bcoz .recon file is present in sample directory."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1440569748, "post_id": 32218407, "comment_id": 52321585, "body": "@sandy put some printfs in your code and you&#39;ll see what&#39;s going on. And why don&#39;t you just put <code>if(strcmp(entry-&gt;d_name ,&quot;111111111.000.recon&quot;) == 0)</code>. Your <code>strncpy</code> stuff is far too complicated. And furthermore, if you just want to check if the file <code>111111111.000.recon </code> exists, why don&#39;t you simply use <code>stat</code> ?"}, {"owner": {"reputation": 3, "user_id": 5266907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e374b39cbbc4025871fdbf2e7cb3a46b?s=128&d=identicon&r=PG&f=1", "display_name": "sandy", "link": "https://stackoverflow.com/users/5266907/sandy"}, "edited": false, "score": 0, "creation_date": 1440582268, "post_id": 32218407, "comment_id": 52329004, "body": "i figured this out by putting printf statements. actually i will have structure member for 9 digit meter and 3 digit component id. i have hardcoded them for better understanding. thanks"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440744262, "post_id": 32218407, "comment_id": 52408652, "body": "looks to me like there were other files found before the one your looking for.  A strong indication that the code is working correctly."}], "answers": [{"tags": [], "owner": {"reputation": 3662, "user_id": 2346402, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c0e30f814ad681056b998d16e385fd7f?s=128&d=identicon&r=PG", "display_name": "Chinna", "link": "https://stackoverflow.com/users/2346402/chinna"}, "is_accepted": false, "score": 2, "last_activity_date": 1440566660, "creation_date": 1440566660, "answer_id": 32218566, "question_id": 32218407, "link": "https://stackoverflow.com/questions/32218407/output-is-not-as-desired/32218566#32218566", "title": "output is not as desired", "body": "<p>The problem is here \n<code>(void) memcpy (y, 0x00, sizeof(y));</code>\nYou are giving source pointer for memcpy() as zero. You are using wrong function for setting zero's in buffer y. You should use <code>memset()</code> instead of <code>memcpy()</code> </p>\n\n<p>Wrong:<code>(void) memcpy (y, 0x00, sizeof(y));</code></p>\n\n<p>Correct: <code>memset(y, 0x00, sizeof(y));</code></p>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 3, "last_activity_date": 1440566681, "creation_date": 1440566681, "answer_id": 32218575, "question_id": 32218407, "link": "https://stackoverflow.com/questions/32218407/output-is-not-as-desired/32218575#32218575", "title": "output is not as desired", "body": "<p>This is wrong:</p>\n\n<pre><code>(void) memcpy (y, 0x00, sizeof(y));\n</code></pre>\n\n<p>This means you want top copy <code>sizeof(y)</code> bytes to <code>y</code> reading from address <code>0</code>, which will of course segfault.</p>\n\n<p>You want this:</p>\n\n<pre><code>char y[20] = {0};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>memset(y, 0x00, sizeof(y));\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5266907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e374b39cbbc4025871fdbf2e7cb3a46b?s=128&d=identicon&r=PG&f=1", "display_name": "sandy", "link": "https://stackoverflow.com/users/5266907/sandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1440570093, "creation_date": 1440565831, "last_edit_date": 1440570093, "question_id": 32218407, "link": "https://stackoverflow.com/questions/32218407/output-is-not-as-desired", "title": "output is not as desired", "body": "<pre><code>  // I have used all the header files \n    // code for comparing the directory has matching .recon file  \n    // if yes i am printing match found\n\nint main ()\n{\n    DIR *dp = NULL;\n    char *dir = \"/home/sv5071184/sample\";\n    struct dirent *entry;\n    struct stat statbuf;    \n    char y[20];          \n    y[19] = '\\0';\n    dp = opendir (dir);\n    if(dir == NULL)\n        return -1;\n\n    while((entry = readdir(dp)) != NULL) {\n        lstat(entry-&gt;d_name,&amp;statbuf);\n        if(S_ISDIR(statbuf.st_mode)) {\n            /* Found a directory, but ignore . and .. */\n            if(strcmp(\".\",entry-&gt;d_name) == 0 ||\n                strcmp(\"..\",entry-&gt;d_name) == 0)\n                continue;\n            strncpy(y,\"111111111\",9);\n            strncpy ((char *)&amp;y[9], \".\", 1);\n            strncpy ((char *)&amp;y[10], \"000\", 3);\n            strncpy ((char *)&amp;y[13], \".recon\", 6);\n            if(strcmp(entry-&gt;d_name ,y) == 0)\n            {\n                printf(\"match found\\n\");\n            }\n            else\n            {\n                printf(\" match not found\\n\");\n\n            }\n        }\n    }\n    printf ( \" The value of y is  %s\\n\", y );\n    closedir(dp);\n    return 0;\n}\n</code></pre>\n\n<p>I have compiled and executed successfully. but match not found is printing five times before printing match found . please help</p>\n"}, {"tags": ["c", "linux", "linux-kernel"], "comments": [{"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1440578064, "post_id": 32218381, "comment_id": 52326242, "body": "Example is not compilable - where are your <code>#include</code> statements?"}], "answers": [{"tags": [], "owner": {"reputation": 2505, "user_id": 93414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72a0a056bdcaa327ea2965a9d648b72?s=128&d=identicon&r=PG", "display_name": "Christophe Vu-Brugier", "link": "https://stackoverflow.com/users/93414/christophe-vu-brugier"}, "is_accepted": false, "score": 1, "last_activity_date": 1440576752, "creation_date": 1440576752, "answer_id": 32221255, "question_id": 32218381, "link": "https://stackoverflow.com/questions/32218381/using-splice-to-copy-file-to-stdout/32221255#32221255", "title": "Using Splice to Copy File to stdout", "body": "<p>The call to <code>splice()</code> returns EINVAL when stdout refers to a non-seekable stream. I tried your program and it fails when stdout refers to the terminal. However, it succeeds when stdout is redirected to a regular file.</p>\n"}, {"comments": [{"owner": {"reputation": 2588, "user_id": 1086521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a470ba3deab88f231acc05615474763b?s=128&d=identicon&r=PG", "display_name": "Don Scott", "link": "https://stackoverflow.com/users/1086521/don-scott"}, "edited": false, "score": 0, "creation_date": 1440599788, "post_id": 32221765, "comment_id": 52341584, "body": "You are correct, an obvious error on my part.  Thank you."}], "tags": [], "owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "is_accepted": true, "score": 1, "last_activity_date": 1440578281, "creation_date": 1440578281, "answer_id": 32221765, "question_id": 32218381, "link": "https://stackoverflow.com/questions/32218381/using-splice-to-copy-file-to-stdout/32221765#32221765", "title": "Using Splice to Copy File to stdout", "body": "<p>You provide an out offset in this call:</p>\n\n<pre><code>        r = splice(filedes[0],NULL,STDOUT_FILENO,&amp;o_off,buf_size, SPLICE_F_MORE | SPLICE_F_MOVE);\n</code></pre>\n\n<p>... but the terminal isn't seekable. Change <code>&amp;o_off</code> to <code>NULL</code>.</p>\n"}], "owner": {"reputation": 2588, "user_id": 1086521, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a470ba3deab88f231acc05615474763b?s=128&d=identicon&r=PG", "display_name": "Don Scott", "link": "https://stackoverflow.com/users/1086521/don-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "accepted_answer_id": 32221765, "answer_count": 2, "score": 1, "last_activity_date": 1440578281, "creation_date": 1440565649, "question_id": 32218381, "link": "https://stackoverflow.com/questions/32218381/using-splice-to-copy-file-to-stdout", "title": "Using Splice to Copy File to stdout", "body": "<p>Is it possible to use the <code>splice</code> sys-call to copy a file to standard output? This seems like it would be trivial, yet I am having difficulty.  I have tried the following code and had no success:</p>\n\n<pre><code>void example(char *filename) {\n    int buf_size = 2048;\n\n    FILE* f = fopen(filename, \"r\");\n\n    if (f == NULL){\n        perror(filename);\n        exit(1);\n    }\n    int fd = fileno(f);\n\n    int filedes[2];\n    if(pipe(filedes) &lt; 0){\n        perror(\"pipe\");\n        exit(1);\n    }\n\n    struct stat st;\n\n    if (fstat(fd, &amp;st) &lt; 0){\n        perror(\"fstat\");\n        exit(1);\n    }\n\n    off_t to_print = st.st_size;\n    loff_t i_off = 0;\n    loff_t o_off = 0;\n\n    while(to_print &gt; 0){\n        if(buf_size &gt; to_print) buf_size = to_print;\n\n        ssize_t r = splice(fd,&amp;i_off,filedes[1],NULL,buf_size, SPLICE_F_MORE | SPLICE_F_MOVE);\n\n        if (r &lt; 0){\n            perror(\"splice\");\n            exit(1);\n        }\n        r = splice(filedes[0],NULL,STDOUT_FILENO,&amp;o_off,buf_size, SPLICE_F_MORE | SPLICE_F_MOVE);\n\n        if (r &lt; 0){\n            perror(\"splice2\");\n            exit(1);\n        }\n\n        to_print -= buf_size;\n    }\n\n    close(fd);\n    close(filedes[0]);\n    close(filedes[1]);\n}\n</code></pre>\n\n<p>To be specific, the second splice fails with <em>Invalid argument</em>.  Any ideas where I am going wrong with this example?</p>\n"}, {"tags": ["javascript", "c++", "c", "emscripten"], "answers": [{"tags": [], "owner": {"reputation": 169, "user_id": 4534387, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Mz29E.jpg?s=128&g=1", "display_name": "Michael220", "link": "https://stackoverflow.com/users/4534387/michael220"}, "is_accepted": true, "score": 3, "last_activity_date": 1440568155, "creation_date": 1440568155, "answer_id": 32218874, "question_id": 32218304, "link": "https://stackoverflow.com/questions/32218304/emscripten-not-optimizing/32218874#32218874", "title": "Emscripten not optimizing", "body": "<p>Yup, it was obvious.  The command is case sensitive.  Needs to be a capital 'O'.  I don't have much experience with the command line.  This is what happens.</p>\n"}], "owner": {"reputation": 169, "user_id": 4534387, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Mz29E.jpg?s=128&g=1", "display_name": "Michael220", "link": "https://stackoverflow.com/users/4534387/michael220"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 32218874, "answer_count": 1, "score": 2, "last_activity_date": 1440568155, "creation_date": 1440565133, "question_id": 32218304, "link": "https://stackoverflow.com/questions/32218304/emscripten-not-optimizing", "title": "Emscripten not optimizing", "body": "<p>As I compile my app.cpp file into app.js using Emscripten, I'm not seeing a difference between the -o1/2/3 optimization levels when I inspect the app.js file.  They are all unoptimized/unminified and human readable.  I've run the emcc update/install commands, and I use</p>\n\n<pre><code>emcc -o3 app.cpp -o app.js \n</code></pre>\n\n<p>to compile into javascript.  I'm sure I'm missing something obvious, but I've been through the docs and can't seem to realize what I'm passing over.  This is kind of silly to me, but I guess I just need to ask.  </p>\n\n<p>I appreciate any help.</p>\n"}, {"tags": ["c", "pointers", "b"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 1, "creation_date": 1440565252, "post_id": 32218289, "comment_id": 52319916, "body": "Voted to close as primarily opinion based. Have you bothered to read <a href=\"http://stackoverflow.com/help/dont-ask\">stackoverflow.com/help/dont-ask</a> ?"}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 0, "creation_date": 1440565262, "post_id": 32218289, "comment_id": 52319921, "body": "This is kind of an age-old thing. Java dropped asterisks entirely to avoid requiring pointer syntax to access the actual values."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "reply_to_user": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 0, "creation_date": 1440565360, "post_id": 32218289, "comment_id": 52319945, "body": "@Purag Java has no notion of &#39;address of&#39; or &#39;pointer&#39; - why should it bother dropping something it never had a need for? (There are <i>many</i> languages with Call by Object Sharing semantics that have never had pointer-asterisk or arrow operators.)"}, {"owner": {"reputation": 41, "user_id": 5233142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d58c94a890c209af12d1150acb07d7ef?s=128&d=identicon&r=PG&f=1", "display_name": "Erk", "link": "https://stackoverflow.com/users/5233142/erk"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1440565376, "post_id": 32218289, "comment_id": 52319956, "body": "@John3136 yes, this probably does have a definite answer as there is most likely a logical reason that the language was designed this way."}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1440565461, "post_id": 32218289, "comment_id": 52319981, "body": "@user2864740 I don&#39;t understand what you&#39;re saying; the implementation in Java of &quot;references&quot; is the same as a dereference of a pointer in C. Java is in the C family of languages and exhibits such similarities in compiled code. The benefit is that you don&#39;t need to deal with pointer syntax. (Benefit to some...restriction to others)"}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "reply_to_user": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 0, "creation_date": 1440565598, "post_id": 32218289, "comment_id": 52320027, "body": "@Purag Java carries on a very vague notion of imperative C syntax; and is otherwise quite unrelated. Objects can be treated indirectly without the need for a &#39;pointer&#39; or discussion of such implementation; while the JLS unfortunately - for such conversations - delves a lot into the specifics of references (which are not pointers) this is mute at the language syntax level itself. As a trivial counter example, consider JavaScript also with a syntax vaguely like C - and yet the ECMAScript specification makes absolutely <i>no</i> mention of pointers or reference-values .. let a language be itself."}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1440565737, "post_id": 32218289, "comment_id": 52320070, "body": "@user2864740 right, but what we call references in Java are just pointers; they&#39;re far different from C++&#39;s true references. You <i>are</i> right, but I think it&#39;s still worth mentioning that Java (among other languages) give the behavior of pointers without pointer syntax. At a high level, this isn&#39;t significant, but compiled code might say otherwise."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "reply_to_user": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 0, "creation_date": 1440565789, "post_id": 32218289, "comment_id": 52320081, "body": "@Purag No, there is no difference in the &#39;compiled [byte-]code&#39; of Java. No pointers. The JLS does not define in what method a JVM wishes to implement it - and there are many different JVM implementations, including those in languages which themselves lack pointers. Just as it is meaningless, given the context the knowledge, to point out that references in Java (perhaps more aptly-termed &#39;reference-values&#39;) and and C++ are different concepts, so is it meaningless to try and argue that Java has - or requires - pointers."}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1440566057, "post_id": 32218289, "comment_id": 52320185, "body": "@user2864740 That&#39;s my point. CPU architectures have &quot;dereference&quot; instructions. Java bytecode gets interpreted to machine code that dereferences the memory locations in Object references at runtime. Again, at a high level this is trivial, but it&#39;s not a useless comparison. I think it&#39;s unfair to say that &quot;Java uses pointers without pointer syntax&quot; is untrue."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "reply_to_user": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 2, "creation_date": 1440566129, "post_id": 32218289, "comment_id": 52320209, "body": "@Purag Java does not <i>have</i> pointers. How then can Java use pointers? If Java does not have pointers, why would it it need the same operator(s) are C, which does? Please open up a copy of the <a href=\"https://docs.oracle.com/javase/specs/\" rel=\"nofollow noreferrer\">Java Language Specification</a> and search for &quot;pointer&quot;. You will find many mentions of the poorly-named NullPointerException (thankfully the CLR did not follow this) and one sentence of prose wording to describe the behavior."}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1440566322, "post_id": 32218289, "comment_id": 52320266, "body": "@user2864740 In the way that <code>pointer -&gt; function()</code> and <code>(*pointer).function()</code> are available in C, you have <code>object.method()</code> in Java. What you can do with references in Java are of course a strict subset of the functionality of pointers in C, but the similarity is there. There is an item living somewhere in memory with properties that can be accessed by <i>following</i> its address; in C, this is a dereference. In Java, this happens implicitly with member accesses. But the machine code to do it is a memory access all the same."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "reply_to_user": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "edited": false, "score": 0, "creation_date": 1440566342, "post_id": 32218289, "comment_id": 52320275, "body": "@Purag But there <i>are no pointers in Java</i>. And thus there is <i>no need for that C syntax</i>. Java didn&#39;t &quot;drop&quot; - Java <i>never had</i>, because it <i>doesn&#39;t require it</i> because .. dah-dah-dum, <i>no pointers</i>."}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1440566368, "post_id": 32218289, "comment_id": 52320281, "body": "@user2864740 perhaps &quot;Java gives the <i>functionality</i> of pointers without the pointer syntax&quot; is a better description. I&#39;m not arguing that you can use pointers in Java, that&#39;s ridiculous."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1440566545, "post_id": 32218289, "comment_id": 52320333, "body": "@Erk The reason why it&#39;s defined this way is that your proposed syntax wouldn&#39;t make sense, or at least it would be <b>largely</b> inconsistent. For any object <code>x</code>, if I write <code>x</code> in the code, I mean &quot;the object x&quot;. This should be true for all types. Now if you make pointers a special case, then writing <code>x</code> in the code doesn&#39;t mean <code>x</code> anymore, which is bad."}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1440566641, "post_id": 32218289, "comment_id": 52320364, "body": "@user2864740 Oh, okay you&#39;re just picking at my semantics. I don&#39;t mean &quot;once Java had this but they thought it sucked so they dropped it.&quot; I mean, as a derivative of C, Java took this capability of the language (accessing data stored in remote memory locations) but simplified it by defining its own syntax that didn&#39;t use asterisks."}, {"owner": {"reputation": 16263, "user_id": 814761, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/030202f384a132247f144ee2b8f809ae?s=128&d=identicon&r=PG", "display_name": "Purag", "link": "https://stackoverflow.com/users/814761/purag"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1440567602, "post_id": 32218289, "comment_id": 52320726, "body": "@user2864740 Check <a href=\"http://javadude.com/articles/passbyvalue.htm\" rel=\"nofollow noreferrer\">this</a> out. Note especially the &quot;Pointers vs. References&quot; section. By the way, the <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.3.1\" rel=\"nofollow noreferrer\">JLS</a> explicitly describes references as pointers. ;)"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1440568943, "post_id": 32218289, "comment_id": 52321278, "body": "It&#39;s just like Pascal uses <code>^</code> to dereference a pointer"}], "answers": [{"tags": [], "owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "is_accepted": true, "score": 0, "last_activity_date": 1440565386, "last_edit_date": 1440565386, "creation_date": 1440565280, "answer_id": 32218326, "question_id": 32218289, "link": "https://stackoverflow.com/questions/32218289/why-does-c-use-the-asterisk-to-reference-the-value-of-a-pointer/32218326#32218326", "title": "Why does C use the asterisk to reference the value of a pointer?", "body": "<p>I doubt anyone can tell you why it was designed the way it was. But a pointer is a variable that holds an address. Therefore, it's value is the address. I would find it strange and unexpected if it required special syntax to get the value of any variable.</p>\n\n<p>Note that C++ lets you use references to access the value pointed to without special syntax. But you are dereferencing the pointer, so for me it makes perfect sense to require a different syntax.</p>\n"}], "owner": {"reputation": 41, "user_id": 5233142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d58c94a890c209af12d1150acb07d7ef?s=128&d=identicon&r=PG&f=1", "display_name": "Erk", "link": "https://stackoverflow.com/users/5233142/erk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "closed_date": 1440565681, "accepted_answer_id": 32218326, "answer_count": 1, "score": -5, "last_activity_date": 1456717481, "creation_date": 1440565058, "last_edit_date": 1456717481, "question_id": 32218289, "link": "https://stackoverflow.com/questions/32218289/why-does-c-use-the-asterisk-to-reference-the-value-of-a-pointer", "closed_reason": "Opinion-based", "title": "Why does C use the asterisk to reference the value of a pointer?", "body": "<p>I find that I refer to the value at the memory location pointed to by a pointer far more often then I want to refer to the actual value of the pointer.  As a result I wonder why C does not use the asterisk in the to refer to the actual value of the pointer since it is more typing.</p>\n\n<p>I have already read a post on another website about how B did it this way.  This does not answer my question; it just changes it to why did B do it this way.</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1440564966, "post_id": 32218236, "comment_id": 52319825, "body": "Your code copies the struct correctly. I don&#39;t know what you are expecting to see from <code>printf(&quot;%d&quot;,*(k+1));</code>  , this reads memory beyond the end of the struct that you just copied. Maybe you meant <code>printf(&quot;%d&quot;, k-&gt;unkno);</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 4281947, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/736a3da7ac73dbdcdbc796e6aeeae03d?s=128&d=identicon&r=PG&f=1", "display_name": "thingybingytie", "link": "https://stackoverflow.com/users/4281947/thingybingytie"}, "edited": false, "score": 0, "creation_date": 1440566245, "post_id": 32218272, "comment_id": 52320236, "body": "my question wasn&#39;t related to any of the things you mentioned, i was simply trying to check that the data i copied was actually there and that i can access it and i solved the solution, it was the pointer type that wasnt correct, not all that mumbo jumbo you went on about without addressing the question i actually had"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 168, "user_id": 4281947, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/736a3da7ac73dbdcdbc796e6aeeae03d?s=128&d=identicon&r=PG&f=1", "display_name": "thingybingytie", "link": "https://stackoverflow.com/users/4281947/thingybingytie"}, "edited": false, "score": 0, "creation_date": 1440570038, "post_id": 32218272, "comment_id": 52321718, "body": "@hopjoppe5 Updated my answer. And it&#39;s <i>not</i> &quot;mumbo jumbo&quot;, it&#39;s really important things that you need to read and understand, otherwise you will not become a master of C programming, but a master of undefined behaviors in C."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 168, "user_id": 4281947, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/736a3da7ac73dbdcdbc796e6aeeae03d?s=128&d=identicon&r=PG&f=1", "display_name": "thingybingytie", "link": "https://stackoverflow.com/users/4281947/thingybingytie"}, "edited": false, "score": 1, "creation_date": 1440651924, "post_id": 32218272, "comment_id": 52363559, "body": "@hopjoppe5 Maybe if you had created a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> <i>without</i> all these problems it would have been easier to concentrate on what your main issue was. You <i>do</i> weird things (that <code>printf</code> call doesn&#39;t make any sense at all, the compiler should have given you a warning about it), and you <i>do</i> read uninitialized memory which is UB. And once you have even the single and slightest UB then your whole program looses all its meaning. If you know you are doing all these bad things, why not tell us that and to ignore them?"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1440651738, "last_edit_date": 1440651738, "creation_date": 1440564977, "answer_id": 32218272, "question_id": 32218236, "link": "https://stackoverflow.com/questions/32218236/having-trouble-with-copying-struct-to-another-memory-location-with-memcpy/32218272#32218272", "title": "Having trouble with copying struct to another memory location with memcpy()", "body": "<p>You only copy <em>one</em> structure to the 400 bytes you allocated, and <code>malloc</code> does not initialize the memory in any way.</p>\n\n<p>The contents of newly allocated memory from <code>malloc</code> is <em>indeterminate</em>, and reading from the uninitialized memory leads to <em>undefined behavior</em>.</p>\n\n<p>Also, when you do <code>*(k + 1)</code> you treat <code>k</code> as an array, and accessing the <em>second</em> element (<code>*(k + 1)</code> is equivalent to <code>k[1]</code>). You then do something even weirder and print the value as a decimal number, which it really isn't.</p>\n\n<p>Lastly, when printing a pointer using <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow\"><code>printf</code></a> you should use the <code>\"%p\"</code> format specifier.</p>\n\n<hr>\n\n<p>To actually <em>answer</em> your question, then yes the data you copy is there, at the beginning of the allocated memory. You just don't print any of it.</p>\n"}, {"tags": [], "owner": {"reputation": 168, "user_id": 4281947, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/736a3da7ac73dbdcdbc796e6aeeae03d?s=128&d=identicon&r=PG&f=1", "display_name": "thingybingytie", "link": "https://stackoverflow.com/users/4281947/thingybingytie"}, "is_accepted": false, "score": -2, "last_activity_date": 1440565224, "creation_date": 1440565224, "answer_id": 32218314, "question_id": 32218236, "link": "https://stackoverflow.com/questions/32218236/having-trouble-with-copying-struct-to-another-memory-location-with-memcpy/32218314#32218314", "title": "Having trouble with copying struct to another memory location with memcpy()", "body": "<p>Okay i solved this</p>\n\n<p>basically it was the problem with the pointer that was accessing the malloc'd memory</p>\n\n<p>it was this line that was causing me problems </p>\n\n<pre><code>head * k = (head *)s;\n</code></pre>\n\n<p>it should have been</p>\n\n<pre><code> u_int32_t * k = (u_int32_t *)s;\n</code></pre>\n"}], "owner": {"reputation": 168, "user_id": 4281947, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/736a3da7ac73dbdcdbc796e6aeeae03d?s=128&d=identicon&r=PG&f=1", "display_name": "thingybingytie", "link": "https://stackoverflow.com/users/4281947/thingybingytie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1440651738, "creation_date": 1440564749, "last_edit_date": 1440570608, "question_id": 32218236, "link": "https://stackoverflow.com/questions/32218236/having-trouble-with-copying-struct-to-another-memory-location-with-memcpy", "title": "Having trouble with copying struct to another memory location with memcpy()", "body": "<p>Okay so basically I am not sure what is happening here </p>\n\n<p>I am basically trying to copy a struct variable that I defined to another memory location which I malloc'd using memcopy </p>\n\n<p>the compiler does not give any errors and warnings </p>\n\n<p>however when I try to access the malloc'd memory location to see if the data was copied,I find some weird numbers coming up when I dereference the pointer and not the values that I copied </p>\n\n<p>here is my code , what is it exactly that I am missing here,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#include &lt;stdint.h&gt;\n\ntypedef uint32_t u_int32_t;\n\ntypedef unsigned char byte;\ntypedef u_int32_t link;\ntypedef u_int32_t size;\ntypedef u_int32_t addr;\n\ntypedef struct header {\n   u_int32_t unkno;  \n   size sze;     \n   link next;     \n   link prev;     \n} head;\n\nint main(){\n\n   head x;\n\n   printf(\"%d %d %d %d\\n\", &amp;x, &amp;x.unkno,sizeof(head),0x12345);\n\n   x.unkno = 0x12345;\n   x.sze = 10;\n   x.next = 2;\n   x.prev = 6;\n\n   void * s = malloc(sizeof(u_int32_t)*100);\n\n   memcpy(s, (const void *)&amp;x, sizeof(head));\n\n   head * k = (head *)s;\n\n   printf(\"%d\",*(k+1));\n\n   return 0;\n}\n</code></pre>\n\n<p>so if somebody can point me to what I am doing wrong, or if this is even possible?</p>\n"}, {"tags": ["c", "pointers", "struct", "mpi"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1440560749, "post_id": 32217553, "comment_id": 52318748, "body": "I would imagine that you can&#39;t. Say one process modified <code>*y</code>, how would the other processes know that <code>*y</code> changed?"}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 4, "creation_date": 1440561957, "post_id": 32217553, "comment_id": 52318987, "body": "You cannot send a pointer because it is meaningless outside of the process in which it was allocated. If you want to send the array of data to which it points, ask that question instead."}, {"owner": {"reputation": 11, "user_id": 5259408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/730552987073845/picture?type=large", "display_name": "Dezhi Zhou", "link": "https://stackoverflow.com/users/5259408/dezhi-zhou"}, "edited": false, "score": 0, "creation_date": 1440571085, "post_id": 32217553, "comment_id": 52322219, "body": "Sorry. I am new in programming. Maybe I did not describe the question clearly. I do want to send the array of data to which it points. Could you give a little clue for this. Thanks a lot!"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5259408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/730552987073845/picture?type=large", "display_name": "Dezhi Zhou", "link": "https://stackoverflow.com/users/5259408/dezhi-zhou"}, "edited": false, "score": 0, "creation_date": 1440654435, "post_id": 32232970, "comment_id": 52364421, "body": "Thanks for your kind help. What if I want to build a MPI_struct to include all the elements in the ind struct and send them as an MPI_type? How to handle the pointers? Especially, how to calculate the MPI_address of those arrays which points by the pointers?"}, {"owner": {"reputation": 4473, "user_id": 3002273, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/14663c07f99bd2fdc191b05db9d3e900?s=128&d=identicon&r=PG&f=1", "display_name": "ignorance", "link": "https://stackoverflow.com/users/3002273/ignorance"}, "reply_to_user": {"reputation": 11, "user_id": 5259408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/730552987073845/picture?type=large", "display_name": "Dezhi Zhou", "link": "https://stackoverflow.com/users/5259408/dezhi-zhou"}, "edited": false, "score": 0, "creation_date": 1440687629, "post_id": 32232970, "comment_id": 52386132, "body": "If you are referring to <a href=\"http://www.mpich.org/static/docs/v3.1/www3/MPI_Type_create_struct.html\" rel=\"nofollow noreferrer\">mpich.org/static/docs/v3.1/www3/MPI_Type_create_struct.html</a>, then I will say that you can&#39;t directly. What I would recommend is creating a separate function (you can model after MPI if you like) that ships your data structure as I posted. A bunch of Send/Recv/Broadcast/etc. to properly transfer your data structure. That will work."}, {"owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "edited": false, "score": 0, "creation_date": 1440770392, "post_id": 32232970, "comment_id": 52424528, "body": "You could also have that function serialize your data by packing it into a buffer which can be unpacked on the receiving side."}], "tags": [], "owner": {"reputation": 4473, "user_id": 3002273, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/14663c07f99bd2fdc191b05db9d3e900?s=128&d=identicon&r=PG&f=1", "display_name": "ignorance", "link": "https://stackoverflow.com/users/3002273/ignorance"}, "is_accepted": false, "score": 1, "last_activity_date": 1440610021, "creation_date": 1440610021, "answer_id": 32232970, "question_id": 32217553, "link": "https://stackoverflow.com/questions/32217553/how-to-send-pointer-in-struct-in-mpi/32232970#32232970", "title": "How to send pointer in struct in MPI", "body": "<p>Just following the code from the second example <a href=\"http://geco.mines.edu/workshop/class2/examples/mpi/index.html\" rel=\"nofollow\">here</a>, I did the following. I believe this is what you want.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;mpi.h&gt;\n\nint main(int argc, char *argv[]) {\n  int *send, *recv;\n  int rank, i;\n  MPI_Status status;\n\n  MPI_Init(&amp;argc, &amp;argv);\n  MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n\n  send = malloc(sizeof(int)*10);\n  recv = malloc(sizeof(int)*10);\n\n  for (i=0;i&lt;10;i++)\n    send[i] = 5*i;\n\n  if (rank == 0)\n    MPI_Send(send, 10, MPI_INT, 1, 0, MPI_COMM_WORLD);\n  else {\n    MPI_Recv(recv, 10, MPI_INT, 0, 0, MPI_COMM_WORLD, &amp;status);\n\n    for (i=0;i&lt;10;i++)\n      printf(\"%d\\n\", recv[i]);\n  }\n\n  MPI_Finalize();\n  return 0;\n}\n</code></pre>\n\n<p>Running it outputs,</p>\n\n<pre><code>$ mpiexec -n 2 mpi_test\n0\n5\n10\n15\n20\n25\n30\n35\n40\n45\n</code></pre>\n\n<p>Now you just have to adapt it to your own problem.</p>\n"}], "owner": {"reputation": 11, "user_id": 5259408, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/730552987073845/picture?type=large", "display_name": "Dezhi Zhou", "link": "https://stackoverflow.com/users/5259408/dezhi-zhou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1758, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440610021, "creation_date": 1440560022, "last_edit_date": 1440560052, "question_id": 32217553, "link": "https://stackoverflow.com/questions/32217553/how-to-send-pointer-in-struct-in-mpi", "title": "How to send pointer in struct in MPI", "body": "<p>I have struct like this:</p>\n\n<pre><code>typedef struct\n{\n    int x;\n    double *y;\n    int **z;\n}\nind;\n</code></pre>\n\n<p>how could I send pointer like *y and **z via MPI to other processes? I know that many answers said that never send pointers by MPI. But if I cannot change *y to an array because it is used in other part of the main program, what should I do to transfer them through processes via MPI? Especially for **z, how should I do ?\nThanks in advance!</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1440558186, "post_id": 32217182, "comment_id": 52318163, "body": "Well, you could try taking the &#39;19&#39; and two instances of <code>&gt;&gt;&gt;</code> and <code>&lt;&lt;&lt;</code> out of the quoted string you&#39;re passing to <code>sscanf</code> to start. If you put them into the string, they&#39;re going to be there when you print it back out."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1440560223, "post_id": 32217182, "comment_id": 52318621, "body": "Do you <i>have</i> to use <code>sscanf()</code>? a bit extra effort with <code>strtok()</code> will give you lot more flexibility, IMHO."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440745308, "post_id": 32217182, "comment_id": 52409197, "body": "when calling malloc() 1) the expression: &#39;sizeof(char)&#39; is defined as 1 and has no effect on the value passed to malloc..   to declutter the code remove that useless expression.  2) Always check (!=NULL) the returned value from malloc() to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440745502, "post_id": 32217182, "comment_id": 52409293, "body": "this: &#39;%[^\\t\\n]&#39; is incorrect as there is no tab and no newline in the source string."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 1701, "user_id": 1396042, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0709afc406beb0e25b04cf83c1e9df6e?s=128&d=identicon&r=PG", "display_name": "Android learner", "link": "https://stackoverflow.com/users/1396042/android-learner"}, "edited": false, "score": 0, "creation_date": 1440741634, "post_id": 32217449, "comment_id": 52407563, "body": "The original input had a single sequence of <code>&gt;&gt;&gt;</code> characters before the bit you&#39;re interested in. The &#39;scan set&#39; <code>%*[^&gt;]</code> contains an &#39;assignment suppression&#39; <code>*</code>, and then a negated (<code>^</code>) set of characters, <code>&gt;</code>. This looks for one or more characters that is not a <code>&gt;</code>.  In context, that&#39;s after the <code>19</code>, so it matches the string <code>&quot; cool kid &quot;</code>. If you need to match the word <code>ram</code> in <code>&quot;19 cool kid &gt;&gt;&gt; &gt;&gt;&gt; ram &lt;&lt;&lt;&quot;</code>, then you need to think much harder.  What other variations in the input are possible? How do you spot the part that&#39;s to be matched? Is <code>&quot;19 cool &gt;&gt;&gt; ewe &gt;&gt;&gt; ram &lt;&lt;&lt;&quot;</code> valid?  Etc."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1440559154, "creation_date": 1440559154, "answer_id": 32217449, "question_id": 32217182, "link": "https://stackoverflow.com/questions/32217182/reading-a-string-with-spaces-and-special-character-with-sscanf/32217449#32217449", "title": "Reading a string with spaces and special character with sscanf", "body": "<p>You need to look for things that aren't a <code>&gt;</code>, and you need to suppress assignment on the correct bits:</p>\n\n<pre><code>sscanf(\"19 cool kid &gt;&gt;&gt; ram &lt;&lt;&lt;\", \"%d %*[^&gt;] &gt;&gt;&gt; %199s &lt;&lt;&lt;\", &amp;age, buffer);\n</code></pre>\n\n<p>The length quoted in the format is one less than the number of characters available; it doesn't count the terminal null byte, in other words.</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 2, "last_activity_date": 1440559228, "creation_date": 1440559228, "answer_id": 32217456, "question_id": 32217182, "link": "https://stackoverflow.com/questions/32217182/reading-a-string-with-spaces-and-special-character-with-sscanf/32217456#32217456", "title": "Reading a string with spaces and special character with sscanf", "body": "<p>You had it, you just had your discard in the wrong place (along with a slight capitalization issue):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main (void) {\n\n    int age;\n    char* buffer;\n    if (!(buffer = malloc(200 * sizeof *buffer))) {\n        fprintf (stderr, \"error: virtual memory exhausted.\\n\");\n        return 1;\n    }\n    sscanf(\"19 cool kid &gt;&gt;&gt; ram &lt;&lt;&lt;\", \"%d %*[^&gt;] &gt;&gt;&gt; %s &lt;&lt;&lt;\", &amp;age, buffer);\n\n    printf(\"%s is %d years old\\n\", buffer, age);\n\n    free (buffer);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/sscanf_strange\nram is 19 years old\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1440560468, "creation_date": 1440560468, "answer_id": 32217615, "question_id": 32217182, "link": "https://stackoverflow.com/questions/32217182/reading-a-string-with-spaces-and-special-character-with-sscanf/32217615#32217615", "title": "Reading a string with spaces and special character with sscanf", "body": "<p>Could use <code>sscanf(input, \"%d%*[^&gt;]&gt;&gt;&gt;%199s\", &amp;age, buffer);</code>.  Anything after the <code>%s</code> is irrelevant in scanning for <code>age</code> and <code>buffer</code>.  Not checking if all scanned can lead to trouble.</p>\n\n<p>Suggest checking that the entire line parsed as expected.  The simple solution is to use <code>\" %n\"</code> at the end.  This saves the count of <code>char</code> scanned if scanning gets that far.</p>\n\n<pre><code>const char *input =  \"19 cool kid &gt;&gt;&gt; ram &lt;&lt;&lt;\";\nint n = 0;\nsscanf(input, \"%d%[^&gt;]&gt;&gt;&gt;%*199s &lt;&lt;&lt; %n\", &amp;age, buffer, &amp;n);\nif (n == 0 || input[n]) {\n  puts(\"Bad Input\");\n}\n</code></pre>\n"}], "owner": {"reputation": 1701, "user_id": 1396042, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0709afc406beb0e25b04cf83c1e9df6e?s=128&d=identicon&r=PG", "display_name": "Android learner", "link": "https://stackoverflow.com/users/1396042/android-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1708, "favorite_count": 0, "accepted_answer_id": 32217449, "answer_count": 3, "score": 0, "last_activity_date": 1440560514, "creation_date": 1440557137, "last_edit_date": 1495542580, "question_id": 32217182, "link": "https://stackoverflow.com/questions/32217182/reading-a-string-with-spaces-and-special-character-with-sscanf", "title": "Reading a string with spaces and special character with sscanf", "body": "<p>For a project I'm trying to read an int and a string from a string. Here the only problem is sscanf appears to break reading an <code>%s</code> when it sees a space and some special character. I want to print only String which is present inside special character. Is there anyway to get around this limitation? Here is an example of what I'm trying to do:</p>\n\n<p>Similar to <a href=\"https://stackoverflow.com/questions/2854488/reading-a-string-with-spaces-with-sscanf\">this link</a> with little change</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main(int argc, char** argv) {\n    int age;\n    char* buffer;\n    buffer = malloc(200 * sizeof(char));\n    sscanf(\"19 cool kid &gt;&gt;&gt; ram &lt;&lt;&lt;\", \"%d %[^\\t\\n] &gt;&gt;&gt; %*s &lt;&lt;&lt;\", &amp;age, buffer);\n\n    printf(\"%s is %d years old\\n\", buffer, age);\n    return 0;\n}\n</code></pre>\n\n<p>What it prints is: <strong>\"cool kid >>> ram &lt;&lt;&lt; is 19 years old\"</strong> where I need <strong>\"ram is 19 years old\"</strong>. Is there any work around?</p>\n\n<p><strong>Note: some time \"cool kid\" string come \"coolkid\" like this also.</strong></p>\n"}, {"tags": ["c", "segmentation-fault", "malloc", "memcpy"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1440550950, "post_id": 32216379, "comment_id": 52316573, "body": "I don&#39;t see the variable <code>num_of_32s</code> defined anywhere.  Is this some sort of global which is not shown in your code?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440551005, "post_id": 32216379, "comment_id": 52316585, "body": "If this is not null-termination issues, I&#39;ll go without beer for a week."}, {"owner": {"reputation": 1, "user_id": 5266438, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153125913728030/picture?type=large", "display_name": "andrew1601", "link": "https://stackoverflow.com/users/5266438/andrew1601"}, "edited": false, "score": 0, "creation_date": 1440551088, "post_id": 32216379, "comment_id": 52316601, "body": "Sorry, I meant to change num_of_32s to num_of_blocks when copying the code, but forgot to change the last few. I thought it&#39;d make it easier to understand! In my program they are 8 characters of hex, so 32-bit values."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 3, "creation_date": 1440551115, "post_id": 32216379, "comment_id": 52316611, "body": "<code>sizeof(char)</code> --&gt; <code>sizeof(char*)</code> Sorry @Martin, no beer for you."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440551202, "post_id": 32216379, "comment_id": 52316628, "body": "Standard comment - what did you find out when you ran this under your debugger?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1440551291, "post_id": 32216379, "comment_id": 52316651, "body": "@user3386109 - OK, but I have two bottles of Vodka ready:)"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1440551360, "post_id": 32216379, "comment_id": 52316672, "body": "LOL, that&#39;s not fair :)"}, {"owner": {"reputation": 1, "user_id": 5266438, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153125913728030/picture?type=large", "display_name": "andrew1601", "link": "https://stackoverflow.com/users/5266438/andrew1601"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1440551775, "post_id": 32216379, "comment_id": 52316757, "body": "@user3386109 - Thanks, can&#39;t believe I didn&#39;t spot that. All working fine now. :)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1440551810, "post_id": 32216379, "comment_id": 52316761, "body": "Using the pattern <code>p = malloc(N * sizeof *p);</code> helps to avoid this problem , visually you just need to check for the <code>*</code> straight after the sizeof, instead of having to match it back to a cast several characters to the left"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 3, "creation_date": 1440553237, "post_id": 32216379, "comment_id": 52317087, "body": "Rather than <code>int num_of_blocks = (int)ceil((double)string_length &#47; 8);</code>, you can use <code>int num_of_blocks = (string_length + 7) &#47; 8;</code> to avoid floating point.."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440553994, "post_id": 32216379, "comment_id": 52317263, "body": "Standard warning: do not cast the result of <code>malloc</code> &amp; friends and <code>void *</code> in general. C is not C++."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1440554314, "post_id": 32216379, "comment_id": 52317322, "body": "Kudos to you, Andrew.  Despite having a bug, your code is well written, organized, and explained.  It&#39;s easy to follow, and exceptional for a StackOverflow post."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1440560721, "post_id": 32216379, "comment_id": 52318744, "body": "@donjuedo Not being negative here, but can&#39;t agree with <code>exceptional for a StackOverflow post.</code> part, rather, it should say, the <i>expected form of posting a question</i>. :)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440563019, "post_id": 32216379, "comment_id": 52319247, "body": "Umm.. it has magic numbers - &#39;8&#39; and &#39;9&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440597744, "post_id": 32216379, "comment_id": 52340000, "body": "this line: &#39;memcpy(hex_array[i], hex_string+(i*8), 8);&#39; will fail on the last sub string when the original string is not an exact multiple of 8 because it will access characters beyond the end of the original string"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1440556462, "last_edit_date": 1495540685, "creation_date": 1440556462, "answer_id": 32217087, "question_id": 32216379, "link": "https://stackoverflow.com/questions/32216379/getting-segmentation-fault-with-memcpy/32217087#32217087", "title": "Getting segmentation fault with memcpy", "body": "<p>The main issue is using the  wrong type in memory allocation - a common error.</p>\n\n<pre><code>// char ** hex_array = (char **) malloc(num_of_blocks * sizeof(char));\nchar ** hex_array = (char **) malloc(num_of_blocks * sizeof(char *));\n</code></pre>\n\n<p>With strong agreement with <a href=\"https://stackoverflow.com/users/1505939/matt-mcnabb\">@Matt McNabb</a>, recommend using the following.  No need for a cast.  Easier to code.  Easier to maintain.   And in this case, less likely to get the wrong type.</p>\n\n<pre><code>pointer_variable = malloc(n * sizeof *pointer_variable);\n\nchar ** hex_array = malloc(num_of_blocks * sizeof *hex_array);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5266438, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153125913728030/picture?type=large", "display_name": "andrew1601", "link": "https://stackoverflow.com/users/5266438/andrew1601"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "closed_date": 1440571749, "accepted_answer_id": 32217087, "answer_count": 1, "score": 0, "last_activity_date": 1440556462, "creation_date": 1440550729, "last_edit_date": 1440551221, "question_id": 32216379, "link": "https://stackoverflow.com/questions/32216379/getting-segmentation-fault-with-memcpy", "closed_reason": "Not suitable for this site", "title": "Getting segmentation fault with memcpy", "body": "<p>I am having some trouble with <code>malloc</code>, arrays of pointers, and <code>memcpy</code>. I have a string called hex_string which always has a length divisible by 8. I am trying to split this string into substrings, each with 8 characters. This works fine when I have 16 characters in the string, but if I increase this to 24 characters and beyond, I get a segmentation fault. Could anyone help me out as the the reason why? I know I am using a lot of for loops that essentially run the same loop, I will condense these but I wanted to do each part of the program separately to start with.</p>\n\n<pre><code>int main (int argc, char * argv[]) {\n\n    const char * hex_string = \"1c0111001f010100abcdef12\";\n    /* Using this value for hex_string fails - but if the \n    string is replaced with \"1c0111001f010100\" the program runs fine. */\n\n    int string_length = strlen(hex_string);\n\n    /* get the number of 8 character substrings needed \n    (using ceil to allow me to expand this to arbitrary length strings in the future) */\n    int num_of_blocks = (int)ceil((double)string_length / 8); \n\n    /* allocate memory for pointers to each substring */\n    char ** hex_array = (char **) malloc(num_of_blocks * sizeof(char));\n\n    /* allocate 9 bytes for each substring \n    to allow for the 8 characters and the null-terminator. */\n    for (int i = 0; i  &lt; num_of_blocks; i++)\n        hex_array[i] = (char *) malloc(9);\n\n    /* split the strings into 8-character substrings and add a null-terminator */\n    for (int i = 0; i &lt; num_of_blocks; i++) {\n            memcpy(hex_array[i], hex_string+(i*8), 8);\n            (hex_array[i])[8] = '\\0';\n    }\n\n    /* print each substring */\n    for (int i = 0; i &lt; num_of_blocks; i++)\n        printf(\"substring %d = %s\\n\",i,hex_array[i]);\n\n    /* free the memory allocated for each substring */\n    for (int i = 0; i &lt; num_of_blocks; i++)\n        free(hex_array[i]);\n    /* free the memory allocated for the pointers to the substrings */\n    free(hex_array);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "loops", "bits"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1440550079, "post_id": 32216267, "comment_id": 52316369, "body": "Please do some research on your own. stack overflow is no tutorial site. You got answers already for the similar question some hours ago. If you have problems with the answers, comment."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1440550217, "post_id": 32216267, "comment_id": 52316404, "body": "0) <code>0   14  @7</code> =&gt; <code>if (first==0 || second==0) exit(0);</code> =&gt; exit program. 1) <code>if((test &amp; bitPos) == bitPos)</code> : <code>test</code> isn&#39;t initialize and never set."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1440550630, "post_id": 32216267, "comment_id": 52316492, "body": "You need to describe your problem in more detail than &quot;not getting the correct sample output&quot;. What exactly are you getting? And what have you done to debug the problem on your own and what exactly don&#39;t you know how to do? &quot;It doesn&#39;t work, fix it for me&quot; type questions tend not to be received well."}, {"owner": {"reputation": 17, "user_id": 5266184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8026b29d0a8899db3006a96b6e146e14?s=128&d=identicon&r=PG&f=1", "display_name": "janny", "link": "https://stackoverflow.com/users/5266184/janny"}, "edited": false, "score": 0, "creation_date": 1440550737, "post_id": 32216267, "comment_id": 52316518, "body": "when i printf(&quot;%d&quot;, itemCnt[loc]); my output is 774778414trolls when i printf(&quot;%d&quot;, itemCnt[0]); my output is 0trolls i&#39;m just trying to get one output right so i can figure out how to get all 8 outputs.  sample output is supposed to be : 6   gold_bar 6   silver_bar 1   diamond 4   copper_ring 4   jumpy_troll 8   air 15  angry_troll 0   plutonium_troll"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1440551007, "post_id": 32216267, "comment_id": 52316587, "body": "Please do not put important question information into the comments. It can be easily missed and also does not allow for proper formatting. Update your question description with all the relevant information that a reader would need to know."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1441029470, "post_id": 32216267, "comment_id": 52501089, "body": "Have you got this working, yet?"}], "answers": [{"tags": [], "owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "is_accepted": false, "score": 0, "last_activity_date": 1440552733, "last_edit_date": 1440552733, "creation_date": 1440552241, "answer_id": 32216567, "question_id": 32216267, "link": "https://stackoverflow.com/questions/32216267/incorrect-output-with-counting-and-tallying-bits-in-c/32216567#32216567", "title": "Incorrect output with counting and tallying bits in C", "body": "<p><code>test</code> is not initialized.  It looks like you intended to assign 'third[1]' to <code>test</code>.</p>\n\n<p>Also, 774778414 = 0x2E2E2E2E in hex, and 0x2E is the numeric value of ASCII '.', your initial value for map locations.  (Tip:  when you see wild decimals like that, try Google.  I entered, \"774778414 in hex\" without the quotes.)</p>\n\n<p>I would also suggest breaking down the code into two functions:  the first reads from stdin to populate Map (like you do), and the second reads from stdin to populate 8 C strings to describe your objects.  It's important to note, the first loop should not go until end of input, because your posted input continues with descriptions, not strictly 3 fields like the beginning.</p>\n"}], "owner": {"reputation": 17, "user_id": 5266184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8026b29d0a8899db3006a96b6e146e14?s=128&d=identicon&r=PG&f=1", "display_name": "janny", "link": "https://stackoverflow.com/users/5266184/janny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1440552955, "creation_date": 1440549706, "last_edit_date": 1440552955, "question_id": 32216267, "link": "https://stackoverflow.com/questions/32216267/incorrect-output-with-counting-and-tallying-bits-in-c", "title": "Incorrect output with counting and tallying bits in C", "body": "<p>This is only my 2nd programming class. There are 30 rooms.  We have to see what is in each room and tally it. I already used the <code>for</code> loop to go through the 30 rooms and I know I have tried to use a bit counter to see what is in each room.  I am not getting the correct sample output after I redirect the sample output.  When I <code>printf(\"%d\", itemCnt[loc]);</code>, my output is 774778414trolls </p>\n\n<p>When I <code>printf(\"%d\", itemCnt[0]);</code>, my output is 0trolls. I'm just trying to get one output right so I can figure out how to get the rest of the 8 outputs. From the sample output, the first number is supposed to be 6, followed by 6, 1, 4, 4 ... and so on. Below are sample inputs/outputs and what I have so far in code.</p>\n\n<p>Sample input:</p>\n\n<pre><code>1   20  @@\n2   21  @A\n3   22  @#\n4   23  @1\n5   22  @@\n6   22  @@\n7   22  @@\n8   22  @@\n9   23  @Z  Here be trolls \ufffd not!\n10  23  @+\n12  23  @@\n13  24  @@\n11  22  @@\n14  22  @2\n15  21  @1\n16  20  @@\n17  19  @@\n18  20  @@\n19  19  @@\n20  18  @@\n21  17  @*\n22  16  @*\n23  15  @%\n0   14  @7\n0   gold_bar\n1   silver_bar\n2   diamond\n3   copper_ring\n4   jumpy_troll\n5   air\n6   angry_troll\n7   plutonium_troll\n</code></pre>\n\n<p>Sample Output:</p>\n\n<pre><code>6   gold_bar\n6   silver_bar\n1   diamond\n4   copper_ring\n4   jumpy_troll\n8   air\n15  angry_troll\n0   plutonium_troll\n</code></pre>\n\n<p>code</p>\n\n<pre><code>int main()\n{\n    // contains x and y coordinate\n    int first, second;\n    char third[100];\n    char fourth[100];\n    char Map[30][30];\n\n    // map initialization\n    for(int x=0; x&lt;30; x++){\n        for(int y=0; y&lt;30; y++){\n            Map[x][y] = '.';\n        }\n    }\n\n    while(scanf(\"%d %d %s\",&amp;first, &amp;second, third) != -1) {\n        // Condition 1: a zero coordinate\n        if (first==0 || second==0) exit(0);\n        // Condition 2: coordinate out of range\n        if (first&lt;0 || first&gt;30 || second&lt;0 || second&gt;30){\n            printf(\"Error: out of range 0-30!\\n\");\n            exit(1);\n        }\n\n\n        Map[second-1][first-1] = third[1];\n        fgets(fourth, 100, stdin);\n\n        // bit counter\n        int itemCnt[8] = {0};         // array to hold count of items, index is item type\n        unsigned char test;           // holds contents of room.\n        int loc;\n        for(loc = 0; loc &lt; 8; loc++)  // loop over every bit and see if it is set\n        {\n            unsigned char bitPos = 1 &lt;&lt; loc;  // generate a bit-mask\n            if((test &amp; bitPos) == bitPos)\n                ++itemCnt[loc];\n        }\n        // print the map\n        for(int h=0; h&lt;30; h++){\n            for(int v=0; v&lt;30; v++){\n                printf(\"%c\", Map[h][v]);\n            }\n            printf(\"\\n\");\n            }\n        // print values\n        printf(\"%d\", itemCnt[0]);\n\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "valgrind"], "answers": [{"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1440616052, "post_id": 32232942, "comment_id": 52351832, "body": "I&#39;m guessing that the <code>...</code> is more stacktrace, rather than more Valgrind errors."}, {"owner": {"reputation": 41, "user_id": 5198927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785bb665fb080baa978e16bddb51d705?s=128&d=identicon&r=PG&f=1", "display_name": "rocketjumper", "link": "https://stackoverflow.com/users/5198927/rocketjumper"}, "edited": false, "score": 0, "creation_date": 1440619309, "post_id": 32232942, "comment_id": 52353656, "body": "@Brian Thanks Brian! In regards to the second message, I thought it reads as the <code>address being read refers to 9 bytes, the allocated block size is 7 bytes</code>."}, {"owner": {"reputation": 3591, "user_id": 549246, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f4e97f0ea1536e2f3dd5905cd646c9ad?s=128&d=identicon&r=PG", "display_name": "Brian Vandenberg", "link": "https://stackoverflow.com/users/549246/brian-vandenberg"}, "reply_to_user": {"reputation": 41, "user_id": 5198927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785bb665fb080baa978e16bddb51d705?s=128&d=identicon&r=PG&f=1", "display_name": "rocketjumper", "link": "https://stackoverflow.com/users/5198927/rocketjumper"}, "edited": false, "score": 2, "creation_date": 1440623806, "post_id": 32232942, "comment_id": 52355948, "body": "@rocketjumper The way I interpreted it is more in line with what I&#39;ve seen in practice.  Whenever you see <code>invalid read of size X</code>, it means the instruction executed attempted to read <code>X</code> bytes all at once.  As an example, one of the optimizations clang performs for <code>char blah[4096] = {}</code> is to zero large registers and use SSE instructions to store a large number of bytes to a memory address.  Under certain [strange] circumstances the stack was only 4 byte aligned, but the SSE instructions were emitted under the assumption the stack was 16-byte aligned.  (contd)"}, {"owner": {"reputation": 3591, "user_id": 549246, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f4e97f0ea1536e2f3dd5905cd646c9ad?s=128&d=identicon&r=PG", "display_name": "Brian Vandenberg", "link": "https://stackoverflow.com/users/549246/brian-vandenberg"}, "edited": false, "score": 0, "creation_date": 1440624103, "post_id": 32232942, "comment_id": 52356085, "body": "When I said it might be an optimization in <code>strcasecmp</code>, this is what I&#39;m referring to; it may be using instructions that load 16 bytes at a time, even if it over-reads (eg, by 9 bytes)."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1440658172, "post_id": 32232942, "comment_id": 52366213, "body": "Given the function name <code>__strcasecmp_l_sse42</code>, I would hazard that it <i>is</i> optimized to use SIMD instructions that likely over-read.  Though, in such cases (and in my experience), there&#39;s not normally a read that <i>begins</i> after the <i>end</i> of the string unless the terminating NUL has gone awry."}, {"owner": {"reputation": 3591, "user_id": 549246, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f4e97f0ea1536e2f3dd5905cd646c9ad?s=128&d=identicon&r=PG", "display_name": "Brian Vandenberg", "link": "https://stackoverflow.com/users/549246/brian-vandenberg"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1440696012, "post_id": 32232942, "comment_id": 52391427, "body": "@TobySpeight Good point, I completely ignored the rest of the function name."}], "tags": [], "owner": {"reputation": 3591, "user_id": 549246, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f4e97f0ea1536e2f3dd5905cd646c9ad?s=128&d=identicon&r=PG", "display_name": "Brian Vandenberg", "link": "https://stackoverflow.com/users/549246/brian-vandenberg"}, "is_accepted": false, "score": 2, "last_activity_date": 1440609921, "creation_date": 1440609921, "answer_id": 32232942, "question_id": 32215786, "link": "https://stackoverflow.com/questions/32215786/how-do-i-understand-invalid-read-in-valgrind-where-address-is-bigger-than-the-a/32232942#32232942", "title": "How do I understand Invalid read in Valgrind, where address is bigger than the alloc&#39;d block size", "body": "<p>If it weren't for the ellipsis I would say the <code>Address 0x8c3e170...</code> msg is directly related to the <code>Invalid read of size 16</code> because it's indented further.</p>\n\n<p>It's possible to get false positives, so don't rule that out.  For example, it's possible that strcasecmp is reading more than it needs to as an optimization.</p>\n\n<p>I read the 2nd message as <code>the address being read from starts 9 bytes after the end of a block of size 7</code>.</p>\n\n<p>I have two suggestions, either of which will probably help you track this down:</p>\n\n<p>1) Run your application under valgrind such that you can attach in a separate terminal window with gdb:</p>\n\n<pre><code>~ valgrind --vgdb=yes --vgdb-error=0 your_program\n</code></pre>\n\n<p>in another window:</p>\n\n<pre><code>~ gdb your_program\n(gdb) target remote | vgdb\n</code></pre>\n\n<p>This option makes it halt as though a breakpoint were set on every problem valgrind finds</p>\n\n<p>2) Compile with the undefined and/or memory sanitizers either with clang or gcc (4.9 or higher).  They catch the same sorts of issues, but I find the error messages more informative.</p>\n"}], "owner": {"reputation": 41, "user_id": 5198927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785bb665fb080baa978e16bddb51d705?s=128&d=identicon&r=PG&f=1", "display_name": "rocketjumper", "link": "https://stackoverflow.com/users/5198927/rocketjumper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1108, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1440609921, "creation_date": 1440545727, "last_edit_date": 1440605282, "question_id": 32215786, "link": "https://stackoverflow.com/questions/32215786/how-do-i-understand-invalid-read-in-valgrind-where-address-is-bigger-than-the-a", "title": "How do I understand Invalid read in Valgrind, where address is bigger than the alloc&#39;d block size", "body": "<p>I am new to Valgrind. Got these Valgrind message:</p>\n\n<pre><code>==932767== Invalid read of size 16\n==932767==    at 0x3D97D2B9AA: __strcasecmp_l_sse42 (in /lib64/libc-2.12.so)\n...\n==932767==  Address 0x8c3e170 is 9 bytes after a block of size 7 alloc'd\n==932767==    at 0x6A73B4A: malloc (vg_replace_malloc.c:296)\n==932767==    by 0x34E821195A: ??? \n</code></pre>\n\n<p>Here I have two questions:</p>\n\n<ol>\n<li><p>the allocated block is 7 bytes, then how come the address 0x8c3e170 is in 9 bytes? Normally the pointed size is smaller than the allocated size. So under what circumstance we will meet the above issue?</p></li>\n<li><p>the Invalide read size is 16bytes. Does it include the 2 extra bytes from \"Address 0x8c3e170 is 9 bytes after a block of size 7 alloc'd\"</p></li>\n</ol>\n"}, {"tags": ["c", "memory-management", "parallel-processing", "openmpi", "dynamic-allocation"], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 5175044, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/1V440.jpg?s=128&g=1", "display_name": "tulians", "link": "https://stackoverflow.com/users/5175044/tulians"}, "edited": false, "score": 0, "creation_date": 1440977307, "post_id": 32273118, "comment_id": 52480501, "body": "I tried adding the <code>MPI_Wait()</code> after each <code>MPI_Isend()</code> but I get the same errors."}], "tags": [], "owner": {"reputation": 8043, "user_id": 491687, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2174f845b769ea2ad2242047f3118128?s=128&d=identicon&r=PG", "display_name": "Wesley Bland", "link": "https://stackoverflow.com/users/491687/wesley-bland"}, "is_accepted": false, "score": 0, "last_activity_date": 1440771163, "creation_date": 1440771163, "answer_id": 32273118, "question_id": 32215750, "link": "https://stackoverflow.com/questions/32215750/matrix-multiplication-error-with-open-mpi/32273118#32273118", "title": "Matrix multiplication error with Open MPI", "body": "<p>Let's start with the first problem that jumps out. You're using non-blocking communication incorrectly. <code>MPI_Isend</code> is a non-blocking send function which means that when you call <code>MPI_Isend</code>, all you are really doing is telling MPI about a message that you'd like to send at some point in the future. It may get sent right then, it may not. In order to guarantee that the data is actually sent, you need to complete the call with something like <code>MPI_Wait</code>.Usually when people use non-blocking calls (<code>MPI_Isend</code>), they don't mix them with blocking calls (<code>MPI_Recv</code>). If you use all non-blocking calls, then you can have all of them complete with a single function, <code>MPI_Waitall</code>.</p>\n\n<p>Try fixing these issues first and see if that solves your problem. Just because you commented out the collective, doesn't mean that the other issues weren't there. MPI programs can be notoriously difficult to debug because of weird behavior like this.</p>\n"}], "owner": {"reputation": 439, "user_id": 5175044, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/1V440.jpg?s=128&g=1", "display_name": "tulians", "link": "https://stackoverflow.com/users/5175044/tulians"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440977689, "creation_date": 1440545458, "last_edit_date": 1440977689, "question_id": 32215750, "link": "https://stackoverflow.com/questions/32215750/matrix-multiplication-error-with-open-mpi", "title": "Matrix multiplication error with Open MPI", "body": "<p>Im trying to compute a NxN matrix multiplication using the OpenMPI and C. Everything runs as expected, except for the <code>MPI_Bcast()</code>. As far as I understand, the MASTER must broadcast <code>matrix_2</code> to the rest of the WORKER processes. At the same time, when WORKERS reach the <code>MPI_Bcast()</code> they should wait there until the selected process (in this case the MASTER) does the broadcast. </p>\n\n<p>The error I'm getting is a <em>Segmentation fault</em> and <em>Address not mapped</em>, so it surely has something to do with the dynamic allocation of the matrices. What I do is send parts of <code>matrix_1</code> to each process, and each one of them then does partial multiplications and additions with the previously broadcast <code>matrix_2</code>. </p>\n\n<p>I know that the error must be on the <code>MPI_Bcast()</code> because when I comment it the program finishes correctly (but obviously without computing the product). There must be something I'm not being aware of. I leave both the code and the error message I got. Thanks in advanced.</p>\n\n<p><strong>CODE</strong></p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n/* MACROS */\n#define MASTER_TO_SLAVE_TAG 1\n#define SLAVE_TO_MASTER_TAG 4 \n#define MASTER 0 \n#define WORKER 1\n\nint *matrix_1;\nint *matrix_2;\n\nint *result;\n\ndouble start_time;\ndouble end_time;\n\nint procID;\nint numProc; \n\nint size, numRows, from, to;\nint i,j,k;\n\nMPI_Status status;\nMPI_Request request;\n\nvoid addressMatrixMemory(int);\n\nint main(int argc, char *argv[]){\n    size = atoi(argv[1]);\n    MPI_Init (&amp;argc, &amp;argv);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;procID); \n    MPI_Comm_size(MPI_COMM_WORLD, &amp;numProc); \n\n    addressMatrixMemory(size);\n\n    /* MASTER starts. */\n    if(procID == MASTER){\n\n        start_time = MPI_Wtime();\n        for(i = 1; i &lt; numProc; i++){\n            numRows = size/(numProc - 1); \n\n            from = (i - 1) * numRows; \n\n            if(((i + 1) == numProc) &amp;&amp; ((size % (numProc - 1))) != 0){\n                to = size; \n            } else {\n                to = from + numRows; \n            }\n            MPI_Isend(&amp;from, 1, MPI_INT, i, MASTER_TO_SLAVE_TAG, MPI_COMM_WORLD, &amp;request);\n\n            MPI_Isend(&amp;to, 1, MPI_INT, i, MASTER_TO_SLAVE_TAG + 1, MPI_COMM_WORLD, &amp;request);\n\n            MPI_Isend(matrix_1, (to - from) * size, MPI_INT, i, MASTER_TO_SLAVE_TAG + 2, MPI_COMM_WORLD, &amp;request);\n\n        }\n\n    }\n\n    MPI_Bcast(&amp;matrix_2, size * size, MPI_INT, MASTER, MPI_COMM_WORLD);\n\n    /* WORKERS task */\n\n    if(procID &gt;= WORKER){\n        int row, col;\n        int *matrix = malloc(sizeof(matrix_1[0])*size*size);\n\n        MPI_Recv(&amp;from, 1, MPI_INT, MASTER, MASTER_TO_SLAVE_TAG, MPI_COMM_WORLD, &amp;status);\n\n        MPI_Recv(&amp;to, 1, MPI_INT, MASTER, MASTER_TO_SLAVE_TAG + 1, MPI_COMM_WORLD, &amp;status); \n\n        MPI_Recv(matrix, (to - from) * size, MPI_INT, MASTER, MASTER_TO_SLAVE_TAG + 2, MPI_COMM_WORLD, &amp;status);\n        for(row = from; row &lt; to; row++){\n            for(col = 0; col &lt; size; col++){\n                result[row * size + col] = 0;\n                for(k = 0; k &lt; size; k++);\n                    result[row * size + col] += matrix[row * size + k] * matrix_2[k * size + col];\n            }\n        }\n        MPI_Isend(&amp;from, 1, MPI_INT, MASTER, SLAVE_TO_MASTER_TAG, MPI_COMM_WORLD, &amp;request);\n        MPI_Isend(&amp;to, 1, MPI_INT, MASTER, SLAVE_TO_MASTER_TAG + 1, MPI_COMM_WORLD, &amp;request);\n        MPI_Isend(&amp;result[from], (to - from) * size, MPI_INT, MASTER, SLAVE_TO_MASTER_TAG + 2, MPI_COMM_WORLD, &amp;request);\n    }\n\n    /* MASTER gathers WORKERS job. */\n    if(procID == MASTER){\n        for(i = 1; i &lt; numProc; i++){\n            MPI_Recv(&amp;from, 1, MPI_INT, i, SLAVE_TO_MASTER_TAG, MPI_COMM_WORLD, &amp;status);\n            MPI_Recv(&amp;to, 1, MPI_INT, i, SLAVE_TO_MASTER_TAG + 1, MPI_COMM_WORLD, &amp;status);\n            MPI_Recv(&amp;result[from], (to - from) * size, MPI_INT, i, SLAVE_TO_MASTER_TAG + 2, MPI_COMM_WORLD, &amp;status);\n        }\n\n        end_time = MPI_Wtime();\n        printf(\"\\nRunning Time = %f\\n\\n\", end_time - start_time);\n    }\n\n    MPI_Finalize();\n\n    free(matrix_1);\n    free(matrix_2);\n    free(result);\n\n    return EXIT_SUCCESS;\n}\n\nvoid addressMatrixMemory(int n){\n    matrix_1 = malloc(sizeof(matrix_1[0])*n*n);\n    matrix_2 = malloc(sizeof(matrix_2[0])*n*n);\n\n    result = malloc(sizeof(result[0])*n*n);\n\n    /* Matrix init with values between 1 y 100. */\n    srand(time(NULL));\n    int r = rand() % 100 + 1;\n    int i;\n    for(i = 0; i &lt; n*n; i++){\n        matrix_1[i] = r;\n        r = rand() % 100 + 1;\n        matrix_2[i] = r;\n        r = rand() % 100 + 1;\n    }\n}\n</code></pre>\n\n<p><strong>ERROR MESSAGE</strong></p>\n\n<pre><code>[tuliansPC:28270] *** Process received signal ***\n[tuliansPC:28270] Signal: Segmentation fault (11)\n[tuliansPC:28270] Signal code: Address not mapped (1)\n[tuliansPC:28270] Failing at address: 0x603680\n    [tuliansPC:28270] [ 0] /lib/x86_64-linux-gnu/libpthread.so.0(+0x10340) [0x7f0a98ce0340]\n[tuliansPC:28270] [ 1] /lib/x86_64-linux-gnu/libc.so.6(+0x97ffe) [0x7f0a9899fffe]\n[tuliansPC:28270] [ 2] /usr/lib/libmpi.so.1(opal_convertor_pack+0x129) [0x7f0a98fef779]\n[tuliansPC:28270] [ 3] /usr/lib/openmpi/lib/openmpi/mca_btl_sm.so(mca_btl_sm_prepare_src+0x1fd) [0x7f0a923c385d]\n[tuliansPC:28270] [ 4] /usr/lib/openmpi/lib/openmpi/mca_pml_ob1.so(mca_pml_ob1_send_request_start_rndv+0x1dc) [0x7f0a93245c9c]\n[tuliansPC:28270] [ 5] /usr/lib/openmpi/lib/openmpi/mca_pml_ob1.so(mca_pml_ob1_isend+0x8ec) [0x7f0a9323856c]\n[tuliansPC:28270] [ 6] /usr/lib/openmpi/lib/openmpi/mca_coll_tuned.so(ompi_coll_tuned_bcast_intra_generic+0x3fc) [0x7f0a914f49fc]\n[tuliansPC:28270] [ 7] /usr/lib/openmpi/lib/openmpi/mca_coll_tuned.so(ompi_coll_tuned_bcast_intra_pipeline+0xbc) [0x7f0a914f4d5c]\n[tuliansPC:28270] [ 8] /usr/lib/openmpi/lib/openmpi/mca_coll_tuned.so(ompi_coll_tuned_bcast_intra_dec_fixed+0x134) [0x7f0a914ec7a4]\n[tuliansPC:28270] [ 9] /usr/lib/openmpi/lib/openmpi/mca_coll_sync.so(mca_coll_sync_bcast+0x64) [0x7f0a917096a4]\n[tuliansPC:28270] [10] /usr/lib/libmpi.so.1(MPI_Bcast+0x13d) [0x7f0a98f5678d]\n[tuliansPC:28270] [11] ej5Exec() [0x400e8c]\n[tuliansPC:28270] [12] /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf5) [0x7f0a98929ec5]\n[tuliansPC:28270] [13] ej5Exec() [0x400ac9]\n[tuliansPC:28270] *** End of error message ***\n--------------------------------------------------------------------------\nmpirun noticed that process rank 0 with PID 28270 on node tuliansPC exited on signal 11 (Segmentation fault).\n--------------------------------------------------------------------------\n</code></pre>\n"}, {"tags": ["c", "go"], "comments": [{"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 1, "creation_date": 1440546804, "post_id": 32215509, "comment_id": 52315551, "body": "Are you exporting via cgo? The document you link to says: &quot;The only callable symbols will be those marked as exported (by any package), as described in the <a href=\"https://golang.org/cmd/cgo/#hdr-C_references_to_Go\" rel=\"nofollow noreferrer\">cgo documentation</a>.&quot; That link to the cgo documentation mentions a generated <code>_cgo_export.h</code>."}, {"owner": {"reputation": 8256, "user_id": 937324, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/5sD0l.jpg?s=128&g=1", "display_name": "Gabriel Southern", "link": "https://stackoverflow.com/users/937324/gabriel-southern"}, "edited": false, "score": 1, "creation_date": 1440546948, "post_id": 32215509, "comment_id": 52315593, "body": "An earlier question said the answer is no.  I&#39;d be curious if anything has changed in 1.5, but I doubt it: <a href=\"http://stackoverflow.com/questions/6125683/call-go-functions-from-c\" title=\"call go functions from c\">stackoverflow.com/questions/6125683/call-go-functions-from-c</a>"}, {"owner": {"reputation": 1338, "user_id": 1772510, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/507de10a282f571a93a2ad2193b5b9e0?s=128&d=identicon&r=PG", "display_name": "dreadiscool", "link": "https://stackoverflow.com/users/1772510/dreadiscool"}, "edited": false, "score": 2, "creation_date": 1440551244, "post_id": 32215509, "comment_id": 52316636, "body": "The reason I mentioned Go 1.5 was because that document specifically mentions being able to create shared object files or archive files that can be called by systems that don&#39;t expect Go code  It&#39;s marked under the section called &quot;Go code linked into, and called from, a non-Go program&quot; in this link <a href=\"https://docs.google.com/document/d/1nr-TQHw_er6GOQRsF6T43GGhFDelrAP0NqSS_00RgZQ/edit?pli=1#heading=h.1gw5ytjfcoke\" rel=\"nofollow noreferrer\">docs.google.com/document/d/&hellip;</a>"}, {"owner": {"reputation": 22907, "user_id": 2714852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6e4d0e8ce0d468dd3b93a97893b67b3?s=128&d=identicon&r=PG&f=1", "display_name": "twotwotwo", "link": "https://stackoverflow.com/users/2714852/twotwotwo"}, "edited": false, "score": 0, "creation_date": 1440553625, "post_id": 32215509, "comment_id": 52317174, "body": "Dave C&#39;s on the trail--<a href=\"https://blog.filippo.io/building-python-modules-with-go-1-5/\" rel=\"nofollow noreferrer\">blog.filippo.io/building-python-modules-with-go-1-5</a> has more (in the context of connecting Go to Python via <code>c-shared</code> archive and <code>cgo</code> exports), but I don&#39;t have the time to piece that into a coherent answer right now. It does seem that you can use Go from C now, though."}, {"owner": {"reputation": 6783, "user_id": 55504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69443d894baa7969afa69ca6b34b725b?s=128&d=identicon&r=PG", "display_name": "Dave C", "link": "https://stackoverflow.com/users/55504/dave-c"}, "edited": false, "score": 0, "creation_date": 1440609663, "post_id": 32215509, "comment_id": 52348097, "body": "I mentioned cgo <b>not</b> as a way to interact with C code, but as the way you need to <b>mark</b> which functions you wish to be exported and callable from C (basically just a <code>&#47;&#47;export \u2026</code> comment). As my comment mentions, this is described in the exact document linked to."}], "answers": [{"comments": [{"owner": {"reputation": 2366, "user_id": 3160967, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1d5285da7116b41a824dd9cf0e77e4ea?s=128&d=identicon&r=PG", "display_name": "mwag", "link": "https://stackoverflow.com/users/3160967/mwag"}, "edited": false, "score": 0, "creation_date": 1476590719, "post_id": 32217287, "comment_id": 67407175, "body": "misc question: is there any way to get this to work when cross-compiling for windows from OSX? this part will fail: <code>GOOS=windows GOARCH=amd64 go build -buildmode=c-archive foo.go</code>"}, {"owner": {"reputation": 36091, "user_id": 721283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d9b7698c26959f57c0e3814005b8b52?s=128&d=identicon&r=PG", "display_name": "James Henstridge", "link": "https://stackoverflow.com/users/721283/james-henstridge"}, "reply_to_user": {"reputation": 2366, "user_id": 3160967, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1d5285da7116b41a824dd9cf0e77e4ea?s=128&d=identicon&r=PG", "display_name": "mwag", "link": "https://stackoverflow.com/users/3160967/mwag"}, "edited": false, "score": 1, "creation_date": 1476695612, "post_id": 32217287, "comment_id": 67437630, "body": "IIRC, CGo gets disabled by default when cross-building.  You can re-enable it with <code>CGO_ENABLED=1</code>, but you&#39;ll also need to provide C/C++ compilers for the target arch with <code>CC_FOR_TARGET</code> and <code>CXX_FOR_TARGET</code> as described in <a href=\"https://golang.org/cmd/cgo/\" rel=\"nofollow noreferrer\">golang.org/cmd/cgo</a>.  I don&#39;t have specific advice for building for Windows on OSX though."}, {"owner": {"reputation": 4123, "user_id": 195787, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4b9620cb172292493f9c02c8f37c6cc7?s=128&d=identicon&r=PG", "display_name": "Royi", "link": "https://stackoverflow.com/users/195787/royi"}, "edited": false, "score": 0, "creation_date": 1618748281, "post_id": 32217287, "comment_id": 118690545, "body": "How would you do it on Windows? Especially what would be the replacement for <code>pthread</code>?"}, {"owner": {"reputation": 36091, "user_id": 721283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d9b7698c26959f57c0e3814005b8b52?s=128&d=identicon&r=PG", "display_name": "James Henstridge", "link": "https://stackoverflow.com/users/721283/james-henstridge"}, "reply_to_user": {"reputation": 4123, "user_id": 195787, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4b9620cb172292493f9c02c8f37c6cc7?s=128&d=identicon&r=PG", "display_name": "Royi", "link": "https://stackoverflow.com/users/195787/royi"}, "edited": false, "score": 0, "creation_date": 1618847079, "post_id": 32217287, "comment_id": 118720568, "body": "@Royi: It&#39;s ages since I&#39;ve developed for Windows.  If you wouldn&#39;t normally need a special compiler flag to build a C program that uses threads, then odds are you don&#39;t need to do anything special here either."}], "tags": [], "owner": {"reputation": 36091, "user_id": 721283, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d9b7698c26959f57c0e3814005b8b52?s=128&d=identicon&r=PG", "display_name": "James Henstridge", "link": "https://stackoverflow.com/users/721283/james-henstridge"}, "is_accepted": true, "score": 59, "last_activity_date": 1470141708, "last_edit_date": 1470141708, "creation_date": 1440557788, "answer_id": 32217287, "question_id": 32215509, "link": "https://stackoverflow.com/questions/32215509/using-go-code-in-an-existing-c-project/32217287#32217287", "title": "Using Go code in an existing C project", "body": "<p>To build an archive callable from C, you will need to mark them as exported CGo symbols.<br>\nFor example, if I create a file <code>foo.go</code> with the following contents:</p>\n\n<pre><code>package main\n\nimport (\n    \"C\"\n    \"fmt\"\n)\n\n//export PrintInt\nfunc PrintInt(x int) {\n    fmt.Println(x)\n}\n\nfunc main() {}\n</code></pre>\n\n<p>The important things to note are:</p>\n\n<ul>\n<li>The package needs to be called <code>main</code></li>\n<li>You need to have a <code>main</code> function, although it can be empty.</li>\n<li>You need to import the package <code>C</code></li>\n<li>You need special <code>//export</code> comments to mark the functions you want callable from C.</li>\n</ul>\n\n<p>I can compile it as a C callable static library with the following command:</p>\n\n<pre><code>go build -buildmode=c-archive foo.go\n</code></pre>\n\n<p>The results will be an archive <code>foo.a</code> and a header <code>foo.h</code>.  In the header, we get the following (eliding irrelevant parts):</p>\n\n<pre><code>...\ntypedef long long GoInt64;\n...\ntypedef GoInt64 GoInt;\n...\nextern void PrintInt(GoInt p0);\n...\n</code></pre>\n\n<p>So that's enough to call the exported function.  We can write a simple C program that calls it like so:</p>\n\n<pre><code>#include \"foo.h\"\n\nint main(int argc, char **argv) {\n    PrintInt(42);\n    return 0;\n}\n</code></pre>\n\n<p>We can compile it with a command like:</p>\n\n<pre><code>gcc -pthread foo.c foo.a -o foo\n</code></pre>\n\n<p>The <code>-pthread</code> option is needed because the Go runtime makes use of threads.  When I run the resulting executable it prints <code>42</code>.</p>\n"}], "owner": {"reputation": 1338, "user_id": 1772510, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/507de10a282f571a93a2ad2193b5b9e0?s=128&d=identicon&r=PG", "display_name": "dreadiscool", "link": "https://stackoverflow.com/users/1772510/dreadiscool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7946, "favorite_count": 29, "accepted_answer_id": 32217287, "answer_count": 1, "score": 38, "last_activity_date": 1470141708, "creation_date": 1440543890, "last_edit_date": 1440551345, "question_id": 32215509, "link": "https://stackoverflow.com/questions/32215509/using-go-code-in-an-existing-c-project", "title": "Using Go code in an existing C project", "body": "<p>Ever since Go 1.5 came out, I started taking another look at how I could integrate it into an existing project of mine.</p>\n\n<p>The project's codebase is written entirely in C for low level access to to hardware and other fun stuff. However, some of the higher level things are tedious, and I would like to start writing them in a higher level language (Go)</p>\n\n<p>Is there any way I can call Go code from a C program? I installed Go 1.5, which added <code>-buildmode=c-archive</code> (<a href=\"https://golang.org/s/execmodes\">https://golang.org/s/execmodes</a>) which I am trying to get working.</p>\n\n<p>However, I can't seem to get Go to generate the appropriate header files to allow my project to actually compile. When I generate the archive, I see the function in the exported symbols (using objdump), but without the header files to include gcc complains about the function not existing (as expected)</p>\n\n<p>I'm quite new to Go - however, I love the language and would like to make use of it. Is there any idiomatic way (\"idiomatic\" gets used a lot in the world of Go I see...) to get this to play nicely with each other?</p>\n\n<p>The reason I asked this question and specifically mentioned Go 1.5 is that according to this document, <a href=\"https://docs.google.com/document/d/1nr-TQHw_er6GOQRsF6T43GGhFDelrAP0NqSS_00RgZQ/edit?pli=1#heading=h.1gw5ytjfcoke\">https://docs.google.com/document/d/1nr-TQHw_er6GOQRsF6T43GGhFDelrAP0NqSS_00RgZQ/edit?pli=1#heading=h.1gw5ytjfcoke</a>\nGo 1.5 added support for non-Go programs to call Go code. Specifically, mentioned under the section \"Go code linked into, and called from, a non-Go program\"</p>\n"}, {"tags": ["c", "exe"], "comments": [{"owner": {"reputation": 119, "user_id": 4414064, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/208b4162e0b3856b3adda6c634a8ef93?s=128&d=identicon&r=PG&f=1", "display_name": "Application Developer", "link": "https://stackoverflow.com/users/4414064/application-developer"}, "edited": false, "score": 0, "creation_date": 1440542456, "post_id": 32215270, "comment_id": 52314192, "body": "I apologize that the code is improperly formatted. I simply copied and pasted, and that is what resulted."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1440542628, "post_id": 32215270, "comment_id": 52314259, "body": "0) <code>500</code> &lt;=&gt; <code>1000</code> size not match. 1) <code>sizeof(rs)</code> and <code>sizeof(input)</code> : they  are size of pointer."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1440542889, "post_id": 32215270, "comment_id": 52314351, "body": "<code>i &lt; (int)sizeof(rs);</code> there is no way in C that you can know the number of elements in an array just from a pointer. Note that <code>main()</code> takes also an <code>argc</code> parameter as well as the <code>*argv[]</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1440543276, "post_id": 32215270, "comment_id": 52314468, "body": "The loop tries to execute more than once, because a) the size is wrong (as @BLUEPIXY said), and b) the input string won&#39;t match &quot;print&quot; because <code>fgets()</code> will append a <code>newline</code> to the input string."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440547650, "post_id": 32215270, "comment_id": 52315777, "body": "the posted code does not compile cleanly.  Always enable all compiler warnings when compiling.  Then fix those problems (don&#39;t hide them).  Amongst other things, the code is missing the #include &lt;string.h&gt; header file.  line 17 has a format specifier of &#39;%d&#39; when the argument is a &#39;long unsigned int&#39;.  I don&#39;t know where you found &#39;getch()&#39; but the better call is: &#39;getchar()&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440547795, "post_id": 32215270, "comment_id": 52315814, "body": "when calling malloc() 1) always check (!=NULL) the returned value to assure the operation was successful.  2) the expression: sizeof(char) is defined as 1 and has not effect on the parameter to malloc(),  suggest removing that expression as all it does is clutter the code"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440547995, "post_id": 32215270, "comment_id": 52315862, "body": "the buffer &#39;input&#39; is only 500 bytes long so the call to fgets() with a length of 1000 can result in a buffer overrun resulting in undefined behaviour and leading to a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440548448, "post_id": 32215270, "comment_id": 52315968, "body": "regarding this line: &#39;if(strcmp(input, rs[i]) != 0){&#39; rs is a single entry char* that was set to point to the literal &#39;print&#39; (which as a literal, cannot be modified) so &#39;rs[i]&#39; is stepping through the char array &quot;print&quot; so the call to strcmp() is looking to see if the input from the user is exactly equal &#39;prin&#39; which is probably not what you want"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440548582, "post_id": 32215270, "comment_id": 52316005, "body": "regarding the expression: &#39;(int)sizeof(rs)&#39; the sizeof(rs) will return the sizeof a char*. which will return 4 (the size of a pointer) Remember, sizeof() is a preprocessor operator, not a runtime operator. similar considerations for the expression: &#39;sizeof(input)&#39; which is also a char* and will return 4   For the &#39;sizeof(input)&#39; perhaps you meant &#39;strlen(input)&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440596881, "post_id": 32215270, "comment_id": 52339342, "body": "for readability by us humans, only place one statement per line of code."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 4414064, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/208b4162e0b3856b3adda6c634a8ef93?s=128&d=identicon&r=PG&f=1", "display_name": "Application Developer", "link": "https://stackoverflow.com/users/4414064/application-developer"}, "edited": false, "score": 0, "creation_date": 1440547777, "post_id": 32215869, "comment_id": 52315812, "body": "You&#39;re right the size of the pointer always returned 4. Thank you."}], "tags": [], "owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "is_accepted": true, "score": 1, "last_activity_date": 1440546352, "creation_date": 1440546352, "answer_id": 32215869, "question_id": 32215270, "link": "https://stackoverflow.com/questions/32215270/program-exe-has-stopped-working-error-fgets-function/32215869#32215869", "title": "Program.exe has stopped working error: fgets function", "body": "<p>A couple of problems, mostly stemming from treating C as if it had strings  and arrays like Java. It doesn't, it just has blocks of bytes and some functions to do string-like and array-like things with them.</p>\n\n<p>So firstly, <code>malloc(500 * sizeof(char))</code> allocates 500 bytes (sizeof char is 1 by definition). Later you <code>fgets(input, 1000...)</code> on those 500 bytes. Not good.</p>\n\n<p><code>char *rs[1]</code> allocates an array of 1 character pointer. It does not allocate any memory for any strings. <code>rs[0] = \"print\"</code> is OK because \"print\" allocates 6 bytes and the assignment makes rs[0] point to them. But then you pass <code>rs</code> to the function getInput and call <code>sizeof</code> on it, which gives you the size of a single pointer (probably 4 or 8 bytes) because C doesn't keep array dimensions either--It just passes a pointer to the start of the array. You need to pass the length yourself.</p>\n\n<p>You aren't checking the return value of <code>fgets()</code>. And even if you weren't reading 1000 bytes into a 500-byte buffer and fgets were working perfectly, your <code>strcmp()</code> will always fail because <code>fgets()</code> includes the newline in the string.</p>\n\n<p>Finally, <code>sizeof(input)</code> is another size-of-pointer, not an array dimension. you probably mean <code>strlen(input)</code>?</p>\n"}], "owner": {"reputation": 119, "user_id": 4414064, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/208b4162e0b3856b3adda6c634a8ef93?s=128&d=identicon&r=PG&f=1", "display_name": "Application Developer", "link": "https://stackoverflow.com/users/4414064/application-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 32215869, "answer_count": 1, "score": 0, "last_activity_date": 1440546352, "creation_date": 1440542413, "last_edit_date": 1440542549, "question_id": 32215270, "link": "https://stackoverflow.com/questions/32215270/program-exe-has-stopped-working-error-fgets-function", "title": "Program.exe has stopped working error: fgets function", "body": "<p>My program written in C below is running to a certain point. However, it stops in the middle of, what I would deem, error-less code. Coming from Java, I'm a newbie with C so any help would be much appreciated.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid getInput(char *input, const char *rs[]){// Args are the user input and our reserved words array.\n\n    printf(\"&gt;&gt;\"); fgets(input, 1000, stdin);// Getting our normal command\n\n    int i;\n    for(i = 0; i &lt; (int)sizeof(rs); i++){\n\n        if(strcmp(input, rs[i]) != 0){\n            printf(\"You said: %s\", input); //PROGRAM BREAKS AFTER THIS LINE\n        }\n\n    }\n\n    printf(\"Size of \\\"input\\\" is: %d\\n\", sizeof(input));// Just checking the size of input\n\n    free(input);// Deallocating input since we won't need it anymore.\n\n}\n\nint main(){\n\n    char *input = malloc(500 * sizeof(char));// Command line input\n    const char *rs[1];// Reserved words array.\n\n    rs[0] = \"print\";\n\n    getInput(input, rs);\n\n    getch();\n\n}\n</code></pre>\n"}, {"tags": ["c", "bit"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440545467, "post_id": 32215057, "comment_id": 52315156, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/109023/how-to-count-the-number-of-set-bits-in-a-32-bit-integer\">How to count the number of set bits in a 32-bit integer?</a>"}, {"owner": {"reputation": 15239, "user_id": 347565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/da4012f7b62e1aba604312e94c631dfa?s=128&d=identicon&r=PG", "display_name": "Matthieu", "link": "https://stackoverflow.com/users/347565/matthieu"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440560118, "post_id": 32215057, "comment_id": 52318598, "body": "@Olaf I think the title of the question is misleading..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 15239, "user_id": 347565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/da4012f7b62e1aba604312e94c631dfa?s=128&d=identicon&r=PG", "display_name": "Matthieu", "link": "https://stackoverflow.com/users/347565/matthieu"}, "edited": false, "score": 0, "creation_date": 1440593059, "post_id": 32215057, "comment_id": 52336388, "body": "@Matthieu: If it is really just about counting if a specific bit is set, OP really should have done research on her own."}, {"owner": {"reputation": 15239, "user_id": 347565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/da4012f7b62e1aba604312e94c631dfa?s=128&d=identicon&r=PG", "display_name": "Matthieu", "link": "https://stackoverflow.com/users/347565/matthieu"}, "edited": false, "score": 0, "creation_date": 1440684390, "post_id": 32215057, "comment_id": 52383703, "body": "I guess we do not have the same definition of counting..."}], "answers": [{"tags": [], "owner": {"reputation": 1096, "user_id": 541437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9813c60c9048854d3588fa0a65268da0?s=128&d=identicon&r=PG", "display_name": "Erik Johnson", "link": "https://stackoverflow.com/users/541437/erik-johnson"}, "is_accepted": false, "score": 0, "last_activity_date": 1440544359, "creation_date": 1440544359, "answer_id": 32215581, "question_id": 32215057, "link": "https://stackoverflow.com/questions/32215057/count-bits-in-character-and-tally-the-bits/32215581#32215581", "title": "Count bits in character and tally the bits", "body": "<p>There's no built-in function for accumulating bit counts in a word.  For each room, you'll need to check each of the 8 bits and, if that bit is set, increment the appropriate counting variable.  There are many ways to do this, but especially for a class you want to do it as clearly as possible.  </p>\n\n<p>The basic idea is that you want to compare the word you read in (\"third\", in your framework) to a single bit mask shifted up to the bit position you're testing.  Do the comparison by and'ing the mask against the input in and testing it using if statement.  I've dropped a sample into your framework:</p>\n\n<pre><code>// bit counter\nfor( int bit_p=0; bit_p&lt;8; bit_p++){\n    if (third &amp; (1 &lt;&lt; bit_p))\n        tally[bit_p]++;\n}\n</code></pre>\n\n<p>The common piece is the structure <code>if (input &amp; MASK) {do_whatever}</code>.  Once you understand why that structure works, you can apply it to many situations.</p>\n"}, {"tags": [], "owner": {"reputation": 3045, "user_id": 956880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8wevB.png?s=128&g=1", "display_name": "Anonymous Coward", "link": "https://stackoverflow.com/users/956880/anonymous-coward"}, "is_accepted": false, "score": 1, "last_activity_date": 1440544369, "creation_date": 1440544369, "answer_id": 32215585, "question_id": 32215057, "link": "https://stackoverflow.com/questions/32215057/count-bits-in-character-and-tally-the-bits/32215585#32215585", "title": "Count bits in character and tally the bits", "body": "<p>This code examines a character and fills an array of 8 ints with value 0 if the bit at that position is 0 and value 1 if the bit at that position is 1</p>\n\n<pre><code>char c = 'Z';\nint bits[8];\nint n;\nchar aux = c;\nfor ( n=0; n&lt;8; ++n ) {\n  if ( aux &amp; '\\1' )\n    bits[n] = 1;\n  else\n    bits[n] = 0;\n  aux = aux &gt;&gt; 1;\n}\n</code></pre>\n\n<p><code>aux &amp; '\\1'</code> and <code>aux = aux &gt;&gt; 1</code> are the heard of the code.  </p>\n\n<p>'\\1' is the character with ASCII code 1 thus its bit at position 0 is 1 and all other bits are 0. When we do a bitwise AND of '\\1' with a character we get 1 if that character a 1 at bit position 0 and we get a 0 otherwise.  </p>\n\n<p><code>aux = aux &gt;&gt; 1</code> will shift bits one position to the left so that in the next operation the bit at postion 0 will be the one which was originally at position 1.</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 5266184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8026b29d0a8899db3006a96b6e146e14?s=128&d=identicon&r=PG&f=1", "display_name": "janny", "link": "https://stackoverflow.com/users/5266184/janny"}, "edited": false, "score": 0, "creation_date": 1440544787, "post_id": 32215602, "comment_id": 52314955, "body": "thanks! how do i output the data so it&#39;s 6   gold_bar 6   silver_bar 1   diamond 4   copper_ring 4   jumpy_troll 8   air 15  angry_troll 0   plutonium_troll?  Do I need to declare the variables?"}, {"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "reply_to_user": {"reputation": 17, "user_id": 5266184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8026b29d0a8899db3006a96b6e146e14?s=128&d=identicon&r=PG&f=1", "display_name": "janny", "link": "https://stackoverflow.com/users/5266184/janny"}, "edited": false, "score": 0, "creation_date": 1440545059, "post_id": 32215602, "comment_id": 52315029, "body": "@janny the array keeps track of things.  The number of gold bars will be contained in the first element of the array (<i>i.e.</i> items[0]) just make sure the item array is declared outside of the loops that iterate over the rooms"}, {"owner": {"reputation": 17, "user_id": 5266184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8026b29d0a8899db3006a96b6e146e14?s=128&d=identicon&r=PG&f=1", "display_name": "janny", "link": "https://stackoverflow.com/users/5266184/janny"}, "edited": false, "score": 0, "creation_date": 1440548626, "post_id": 32215602, "comment_id": 52316024, "body": "I&#39;m probably doing something wrong, I wrote printf(&quot;%d&quot;, itemCnt[0]); and the output is just 00000000000000000000000"}, {"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "reply_to_user": {"reputation": 17, "user_id": 5266184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8026b29d0a8899db3006a96b6e146e14?s=128&d=identicon&r=PG&f=1", "display_name": "janny", "link": "https://stackoverflow.com/users/5266184/janny"}, "edited": false, "score": 0, "creation_date": 1440559898, "post_id": 32215602, "comment_id": 52318549, "body": "@janny added code to show how to print out the array.  Also noticed I had a mistake in the loop (which I fix)"}], "tags": [], "owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "is_accepted": false, "score": 4, "last_activity_date": 1440559839, "last_edit_date": 1440559839, "creation_date": 1440544463, "answer_id": 32215602, "question_id": 32215057, "link": "https://stackoverflow.com/questions/32215057/count-bits-in-character-and-tally-the-bits/32215602#32215602", "title": "Count bits in character and tally the bits", "body": "<p>The individual bits of a word are not directly accessible with C, so we have to do other things to get at them.</p>\n\n<p>Consider your values, which give which bit is set:</p>\n\n<pre><code>0 gold_bar          00000001B  or 0x01\n1 silver_bar        00000010B  or 0x02\n2 diamond           00000100B  or 0x04\n3 copper_ring       00001000B  or 0x08\n4 jumpy_troll       00010000B  or 0x10\n5 air               00100000B  or 0x20\n6 angry_troll       01000000B  or 0x40\n7 plutonium_troll   10000000B  or 0x80\n</code></pre>\n\n<p>So with observation, lets consider what will happen if we have the following:</p>\n\n<pre><code>unsigned char test = 'z'\nunsigned char res = test &amp; 0x02\n</code></pre>\n\n<p>Now as you stated 'z' has a binary representation of 01111010 and if we do a logical and with 2 we have:</p>\n\n<pre><code>     z: 01111010B\n  0x02: 00000010B\n        ----------\n        00000010B\n</code></pre>\n\n<p>So the expression test &amp; 0x02 evaluates to 0x02.  So, how can we use this?  We can write something like:</p>\n\n<pre><code>     if((test &amp; 0x02) == 0x02)\n         ++cntSilverBars; \n</code></pre>\n\n<p>Extending this we have, assuming we have appropriately defined variables (<em>i.e</em> cntAuBars would be declared as int cntAuBars and hold the number of gold bars discovered:</p>\n\n<pre><code>     if((test &amp; 0x01) == 0x01)\n         ++cntAuBars;\n     if((test &amp; 0x02) == 0x02)\n         ++cntAgBars;\n     if((test &amp; 0x04) == 0x04)\n         ++cntDiamonds;\n     if((test &amp; 0x08) == 0x08)\n         ++cntCuRings;\n     if((test &amp; 0x10) == 0x10)\n         ++cntJumpyTroll;\n     if((test &amp; 0x20) == 0x20)\n         ++cntSilverBars;\n     if((test &amp; 0x40) == 0x40)\n         ++cntAir;\n     if((test &amp; 0x80) == 0x80)\n         ++cntPuTroll;\n</code></pre>\n\n<p>While the above will work, it can be re-written as:</p>\n\n<pre><code>int itemCnt[8] = {0};         // array to hold count of items, index is item type\nunsigned char test;           // holds contents of room.\nint loc;\nfor(loc = 0; loc &lt; 8; loc++)  // loop over every bit and see if it is set\n{\n     unsigned char bitPos = 1 &lt;&lt; loc;  // generate a bit-mask \n     if((test &amp; bitPos) == bitPos)\n          ++itemCnt[loc];\n}\n</code></pre>\n\n<p>For example, the following program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char** argv)\n{\n  unsigned char test = 'z';\n  int           items[8] = {0};\n  int           loc;\n  int           ndx;\n\n  for(loc = 0; loc &lt; 8; loc++)\n  {\n      unsigned bitPos = 1 &lt;&lt; loc;\n      if((test &amp; bitPos) ==  bitPos)\n          ++items[loc];\n  }\n\n\n  for(ndx = 0; ndx &lt; 8; ndx++)\n  {\n     printf(\"%d, \", items[ndx]);\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>can be compiled as: <code>gcc -g -ansi -pedantic -Wall temp.c -o temp</code>, and when run produces the following array (when view in a debugger):</p>\n\n<pre><code>(gdb) print /t 'z'\n$7 = 1111010\n(gdb) print items\n$8 = {0, 1, 0, 1, 1, 1, 1, 0}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5266184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8026b29d0a8899db3006a96b6e146e14?s=128&d=identicon&r=PG&f=1", "display_name": "janny", "link": "https://stackoverflow.com/users/5266184/janny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1440559839, "creation_date": 1440541374, "last_edit_date": 1440541488, "question_id": 32215057, "link": "https://stackoverflow.com/questions/32215057/count-bits-in-character-and-tally-the-bits", "title": "Count bits in character and tally the bits", "body": "<p>This is only my 2nd programming class. There are 30 rooms, we have to see what is in each room and tally it. I already used the for loop to go through the 30 rooms and I know I have to use a bit counter to see what is in each room. I don't know how to count the bits in a word. Below are sample inputs/outputs and what I have so far in code.</p>\n\n<p>Sample input:</p>\n\n<pre><code>9   23  @Z\n</code></pre>\n\n<p>If the key is:</p>\n\n<pre><code>0 gold_bar\n1 silver_bar\n2 diamond\n3 copper_ring\n4 jumpy_troll\n5 air\n6 angry_troll\n7 plutonium_troll\n</code></pre>\n\n<p>And the line is 9 23 @Z then room at 9,23 (character Z with binary: 01011010) has items 1, 3, 4, 6. silver_bar, copper_ring, jumpy_troll, angry_troll</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main()\n{\n// contains x and y coordinate\n int first, second;\n  char third[100];\nchar Map[30][30];\n\n// map initialization\nfor(int x=0; x&lt;30; x++){\n    for(int y=0; y&lt;30; y++){\n        Map[x][y] = '.';\n    }\n}\n\n\nwhile(scanf(\"%d %d %s\",&amp;first, &amp;second, third) != -1) {\n    // Condition 1: a zero coordinate\n    if (first==0 || second==0) exit(0);\n    // Condition 2: coordinate out of range\n    if (first&lt;0 || first&gt;30 || second&lt;0 || second&gt;30){\n        printf(\"Error: out of range 0-30!\\n\");\n        exit(1);\n    }\n// bit counter\n    for( int bit_p=0; bit_p&lt;8; bit_p++){\n\n    }\n\n    Map[second-1][first-1] = third[1];\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>Sample input:</p>\n\n<pre><code>1   20  @@\n2   21  @A\n3   22  @#\n4   23  @1\n5   22  @@\n6   22  @@\n7   22  @@\n8   22  @@\n9   23  @Z  Here be trolls \ufffd not!\n10  23  @+\n12  23  @@\n13  24  @@\n11  22  @@\n14  22  @2\n15  21  @1\n16  20  @@\n17  19  @@\n18  20  @@\n19  19  @@\n20  18  @@\n21  17  @*\n22  16  @*\n23  15  @%\n0   14  @7\n0   gold_bar\n1   silver_bar\n2   diamond\n3   copper_ring\n4   jumpy_troll\n5   air\n6   angry_troll\n7   plutonium_troll\n</code></pre>\n\n<p>Sample Output:</p>\n\n<pre><code>6   gold_bar\n6   silver_bar\n1   diamond\n4   copper_ring\n4   jumpy_troll\n8   air\n15  angry_troll\n0   plutonium_troll\n</code></pre>\n"}, {"tags": ["c", "matrix"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1440540077, "post_id": 32214641, "comment_id": 52313345, "body": "BTW <code>matrixMultiply</code> must return a value(int*)"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1440540532, "post_id": 32214641, "comment_id": 52313515, "body": "I <i>strongly</i> advise against highlighting specific lines in a c-program with <code>*</code>s. Use a comment (either <code>&#47;* comment until *&#47;</code> or <code>&#47;&#47;comment until end of line</code>."}, {"owner": {"reputation": 1439, "user_id": 5196093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ovj7.png?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5196093/ray"}, "edited": false, "score": 0, "creation_date": 1440540775, "post_id": 32214641, "comment_id": 52313595, "body": "This isn&#39;t the cause of the error in question (Sourav Ghosh&#39;s answer covers that already), but main must be declared as either <code>int main(void)</code> or <code>int main(int, char**)</code>.  Some compilers accept <code>void main()</code>, but they aren&#39;t required to."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5237141, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0f05a30cffcbf74268dd9d763b83750b?s=128&d=identicon&r=PG&f=1", "display_name": "Itay Zaguri", "link": "https://stackoverflow.com/users/5237141/itay-zaguri"}, "edited": false, "score": 0, "creation_date": 1440541951, "post_id": 32214658, "comment_id": 52314006, "body": "Thanks a lot, i made it eventually, problem was i didnt put a whole () around the malloc parameters."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1440542591, "last_edit_date": 1495541176, "creation_date": 1440539232, "answer_id": 32214658, "question_id": 32214641, "link": "https://stackoverflow.com/questions/32214641/error-c2296-illegal-left-operand-has-type-int/32214658#32214658", "title": "error C2296: &#39;*&#39; : illegal, left operand has type &#39;int *&#39;", "body": "<p>In your code</p>\n\n<pre><code> ArrofRows = (int*)malloc(mul)*sizeof(int);\n</code></pre>\n\n<p>should rather be</p>\n\n<pre><code>ArrofRows = malloc(mul *sizeof(int));\n</code></pre>\n\n<p>or, for better,</p>\n\n<pre><code>ArrofRows = malloc(mul *sizeof(*ArrofRows));\n</code></pre>\n\n<p>as, you want to allocate memory for <code>mul</code> number of times of the size given by <code>sizeof(int)</code> or <code>sizeof(*ArrofRows)</code>.</p>\n\n<p>Otherwise, as it is currently written, you're trying to multiply a pointer (return value of <code>malloc()</code>), which is invalid.</p>\n\n<p>FWIW, to quote the property of multiplication operator (<code>*</code>), from <code>C11</code>, chapter \u00a76.5.5, </p>\n\n<blockquote>\n  <p>Each of the operands shall have arithmetic type. [..]</p>\n</blockquote>\n\n<p>and a pointer is <strong>not</strong> an arithmetic type. Hence the error.</p>\n\n<p>That said, always check for the success of <code>malloc()</code> by checking the returned value against NULL before using the returned pointer.</p>\n\n<p>Also, please see <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">why not to cast the return value of <code>malloc()</code> and family</a></p>\n\n<p>Finally, I understand that this code might be just a snippet but in that case also, your <code>matrixMultiply()</code> function should be returning a value. </p>\n"}], "owner": {"reputation": 43, "user_id": 5237141, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/0f05a30cffcbf74268dd9d763b83750b?s=128&d=identicon&r=PG&f=1", "display_name": "Itay Zaguri", "link": "https://stackoverflow.com/users/5237141/itay-zaguri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1787, "favorite_count": 0, "closed_date": 1440581437, "answer_count": 1, "score": 0, "last_activity_date": 1440738099, "creation_date": 1440539166, "last_edit_date": 1440738099, "question_id": 32214641, "link": "https://stackoverflow.com/questions/32214641/error-c2296-illegal-left-operand-has-type-int", "closed_reason": "Not suitable for this site", "title": "error C2296: &#39;*&#39; : illegal, left operand has type &#39;int *&#39;", "body": "<p>I am trying to make a function that multiplies 2 matrices into a new one , its almost finished but I am having had a hard time trying to figure out whats wrong with this line </p>\n\n<p>Here's the Code: </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\n#define ROWS_1  3\n#define ROWS_2  3\n#define COLS_1  3\n#define COLS_2  2\n\n\nint* matrixMultiply(int mat1[ROWS_1][COLS_1],int mat2[ROWS_2][COLS_2])\n{\n    int mul = (ROWS_1)*(COLS_2);\n    int* ArrofRows;\n    int sum=0,i,j,k;\n    ***ArrofRows = (int*)malloc(mul)*sizeof(int);***\n    if (COLS_1 != ROWS_2)\n    {\n        printf(\"ERROR!! Operation Failed!Exiting...\\n\");\n        exit(0);\n    }\n    else\n    {\n        for( i=0 ; i&lt;ROWS_1 ; i++)\n        {\n            for( j=0 ; j&lt;COLS_2 ; j++)\n            {\n                for( k=0 ; k&lt;COLS_1 ; k++)\n                {\n                    sum += (mat1[i][k]*mat2[k][j]);\n                }\n                ArrofRows[(i*ROWS_1)+j] = sum;\n                sum = 0;\n            }\n        }\n    }\n}\n\nvoid main()\n{\n    int mat1[ROWS_1][COLS_1] = {{2,6,9},{3,5,4},{6,7,8}};\n    int mat2[ROWS_2][COLS_2] = {{2,4},{6,1},{4,8}};\n    int* NewMat;\n    NewMat = matrixMultiply(mat1,mat2);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 1, "creation_date": 1440537855, "post_id": 32214272, "comment_id": 52312379, "body": "you can try to create a dynamic array. allocate space for several elements, and when you fill it, create a new one, twice as big.  you can check this for more info: <a href=\"http://stackoverflow.com/questions/2096571/how-is-c-stdvector-implemented\" title=\"how is c stdvector implemented\">stackoverflow.com/questions/2096571/&hellip;</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1440538422, "post_id": 32214272, "comment_id": 52312648, "body": "If we are talking about vectors of a fixed dimension, say 2d, it is pretty natural to represent them as a structure of two fields <code>x</code> and <code>y</code>."}, {"owner": {"reputation": 1228, "user_id": 2576276, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cb4869272a71b11e4e318c0a5109144f?s=128&d=identicon&r=PG", "display_name": "Xabre", "link": "https://stackoverflow.com/users/2576276/xabre"}, "edited": false, "score": 0, "creation_date": 1440538569, "post_id": 32214272, "comment_id": 52312715, "body": "I guess the OP means how many members he&#39;ll be needing, instead of dimensions? ...could be that I&#39;m wrong, but then I suggest that the OP clarifies this?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1440538637, "post_id": 32214272, "comment_id": 52312743, "body": "<code>vector</code> is kinda ambiguous term when it comes to programming.."}, {"owner": {"reputation": 1228, "user_id": 2576276, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cb4869272a71b11e4e318c0a5109144f?s=128&d=identicon&r=PG", "display_name": "Xabre", "link": "https://stackoverflow.com/users/2576276/xabre"}, "edited": false, "score": 0, "creation_date": 1440539118, "post_id": 32214272, "comment_id": 52312951, "body": "Hmm, valid point there, perhaps the OP can rephrase the question a little bit, so we&#39;re sure that we&#39;re talking about the same thing here? Or not... my spideysense senses ambiguity!"}, {"owner": {"reputation": 354, "user_id": 5199222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c741bc7e8714b4eed8d8d616da278ed?s=128&d=identicon&r=PG", "display_name": "Paul H.", "link": "https://stackoverflow.com/users/5199222/paul-h"}, "edited": false, "score": 0, "creation_date": 1440540510, "post_id": 32214272, "comment_id": 52313510, "body": "When you say vector, are you talking about geometry?"}], "answers": [{"comments": [{"owner": {"reputation": 1228, "user_id": 2576276, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cb4869272a71b11e4e318c0a5109144f?s=128&d=identicon&r=PG", "display_name": "Xabre", "link": "https://stackoverflow.com/users/2576276/xabre"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1440538456, "post_id": 32214376, "comment_id": 52312664, "body": "What do you mean exactly? Everything described could perfectly be done in C :-) ...I know the link is to C++ reference, as there is an implementation done in C++ STL; but the same characteristics still apply :-)"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1440538923, "post_id": 32214376, "comment_id": 52312869, "body": "How do you know that is the kind of vector OP is after?"}, {"owner": {"reputation": 1228, "user_id": 2576276, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cb4869272a71b11e4e318c0a5109144f?s=128&d=identicon&r=PG", "display_name": "Xabre", "link": "https://stackoverflow.com/users/2576276/xabre"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1440539257, "post_id": 32214376, "comment_id": 52313006, "body": "I agree that the question is ambiguous, the first time I read it, I believed, this is what he wanted... reading it again (and thanks to you), however, puts me in doubt :p I&#39;m going to sit this one out and wait on clarification from the OP before I go ahead and delete this <i>answer</i> :-)"}], "tags": [], "owner": {"reputation": 1228, "user_id": 2576276, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cb4869272a71b11e4e318c0a5109144f?s=128&d=identicon&r=PG", "display_name": "Xabre", "link": "https://stackoverflow.com/users/2576276/xabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1440538211, "last_edit_date": 1440538211, "creation_date": 1440537902, "answer_id": 32214376, "question_id": 32214272, "link": "https://stackoverflow.com/questions/32214272/representing-vectors-using-structures/32214376#32214376", "title": "Representing vectors using structures", "body": "<p>A vector is basically a dynamic array, meaning that the underlying type is a pointer to an array, each time you add something, the array increases by one. In a very basically this would lead to a costly copy each time this was done; this is way they mostly try to either predict the next size ( by doubling the amount of available slots) or allowing one to resize to a best-guess, which, if missed, will still result in doubling. Anyway, an insert (thus not at the end of the array) will still require a costly copy. This means that a vector will be interesting for random access reads of data, while not so for writes.</p>\n\n<p>When you look at the O-complexity, you'll see that this now makes sense.</p>\n\n<ul>\n<li>Random access - constant O(1)    </li>\n<li>Insertion or removal of elements at\nthe end - amortized constant O(1)    </li>\n<li>Insertion or removal of elements linear in distance to the end of the     vector O(n)</li>\n</ul>\n\n<p>Knowing about the several data-containers is crucial to understand which one to pick under which circumstances. More often then not, I see programmers always using a vector (even the ones that are doing the job long enough to understand when to use which container).</p>\n\n<p><strong>I'm sure this explanation will give you enough to implement the <em>real</em> thing ;-)</strong></p>\n\n<p>sources:</p>\n\n<ul>\n<li><a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/container/vector</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1440539548, "post_id": 32214651, "comment_id": 52313126, "body": "&quot;Higher dimensions are a bit trickier, but I&#39;m not sure if you need those.&quot; - this part makes no sense whatsoever. what you wrote already supports &quot;higher&quot; dimensions."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1440539774, "post_id": 32214651, "comment_id": 52313208, "body": "Not really, it allocates the memory, but it doesn&#39;t include accessing the values which would require modifying the <code>struct</code>.  For example, two dimensions or three dimensions."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440540090, "post_id": 32214651, "comment_id": 52313350, "body": "What do you mean? The dimension of vector is it&#39;s length. You might get confused with matrices."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1440540153, "post_id": 32214651, "comment_id": 52313378, "body": "vals[0] is x, vals[1] is y, ... if not, I have no idea what your intention was with that struct."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1440540693, "post_id": 32214651, "comment_id": 52313570, "body": "That&#39;s what I was referring to, a higher dimensional structure.  I changed the wording"}], "tags": [], "owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "is_accepted": false, "score": 0, "last_activity_date": 1440540971, "last_edit_date": 1440540971, "creation_date": 1440539211, "answer_id": 32214651, "question_id": 32214272, "link": "https://stackoverflow.com/questions/32214272/representing-vectors-using-structures/32214651#32214651", "title": "Representing vectors using structures", "body": "<p>In C99, you can define an FAM <code>struct</code>.</p>\n\n<pre><code>struct vector {\n  size_t len;\n  int vals[];\n};\n</code></pre>\n\n<p>Then you can dynamically allocate instances of the struct, depending on the length you need.</p>\n\n<pre><code>struct vector* v = malloc(sizeof(struct vector) + (n * sizeof(v-&gt;vals[0]));\nv-&gt;len = n;\n\nfor (int i = 0; i &lt; v-&gt;len; i++)\n  v-&gt;vals[i] = i;\n</code></pre>\n\n<p>A higher dimensional structure (e.g. matrix) is a bit trickier, but I'm not sure if you need that.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1440541306, "creation_date": 1440541306, "answer_id": 32215042, "question_id": 32214272, "link": "https://stackoverflow.com/questions/32214272/representing-vectors-using-structures/32215042#32215042", "title": "Representing vectors using structures", "body": "<p>If I wanted to represent an int vector in C, I would use:</p>\n\n<ul>\n<li>a malloc'd array</li>\n<li>a variable tracking allocated size</li>\n<li>a variable tracking used length</li>\n</ul>\n\n<p>It gives:</p>\n\n<pre><code>struct int_vector {\n    int *arr;\n    unsigned int len;\n    unsigned int size;\n};\n</code></pre>\n\n<p>Access to <code>arr</code> is <em>legal</em> for <code>0&lt;=i&lt;len</code>.</p>\n\n<p>I would add some utilities:</p>\n\n<pre><code>int resize(struct int_vector *vec, unsigned int new_len) {\n    if (new_len &gt; vec-&gt;size) {\n        void *p;\n        unsigned int size = vec-&gt;size;\n        while(new_len &gt; size) size *= 2;\n        *p = realloc(vec-&gt;arr, sizeof(int) * size);\n        if (p == NULL) return 0; /* cannot realloc */\n        vec-&gt;arr = p;\n        vec-&gt;size = size;\n    }\n    vec-&gt;len = new_len;\n}\n</code></pre>\n\n<p>You can then easily implement push and pop:</p>\n\n<pre><code>unsigned int push(int_vector *vec, int val) {\n    if (resize(vec, vec-&gt;len + 1) == 0) return 0;\n    vec-&gt;arr[vec-&gt;len -1] = ival;\n    return vec-&gt;len;\n}\nint pop(int_vector *vec) {\n    vec-&gt;len -= 1;\n    return vec-&gt;arr[vec-&gt;len];\n}\n</code></pre>\n\n<p>You could implement a truncate function to reduce the allocated size, but this is a simplistic but working example.</p>\n\n<p>Unfortunately, as C has neither generics not templates, you would have to define a vector class for every and each type that you want to process...</p>\n"}], "owner": {"reputation": 684, "user_id": 5265621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/603b2ae44ae9885f8f46d9e2b5f969da?s=128&d=identicon&r=PG", "display_name": "Akshay Anurag", "link": "https://stackoverflow.com/users/5265621/akshay-anurag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 32214376, "answer_count": 3, "score": 3, "last_activity_date": 1440541306, "creation_date": 1440537496, "question_id": 32214272, "link": "https://stackoverflow.com/questions/32214272/representing-vectors-using-structures", "title": "Representing vectors using structures", "body": "<p>I was recently asked to <strong>represent a structure using a struct data type</strong>.\nAs per my knowledge, a vector is represented as (10, 20, 30, 40 etc. )\nIt <em>appears</em> that it would be easier to access a <strong>vector by an indexed data structure</strong>, like an array.\nBut <strong>I do not know how many members I would be needing in the struct data type</strong>. Then how will I define the structure ?</p>\n"}, {"tags": ["c", "postgresql", "libpq"], "answers": [{"tags": [], "owner": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "is_accepted": true, "score": 1, "last_activity_date": 1440557809, "creation_date": 1440557809, "answer_id": 32217290, "question_id": 32213441, "link": "https://stackoverflow.com/questions/32213441/how-to-dump-pgresult/32217290#32217290", "title": "How to dump PGresult", "body": "<p>In <code>src/interfaces/libpq/fe-print.c</code> there is a public function <code>PQprint</code>; it's <a href=\"http://www.postgresql.org/docs/current/static/libpq-exec.html\" rel=\"nofollow\">in the manual</a>.</p>\n"}], "owner": {"reputation": 7883, "user_id": 192044, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa2c8d2d90cdc5e0b83a7141662ed6e1?s=128&d=identicon&r=PG", "display_name": "Be Kind To New Users", "link": "https://stackoverflow.com/users/192044/be-kind-to-new-users"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 32217290, "answer_count": 1, "score": 1, "last_activity_date": 1444357867, "creation_date": 1440534473, "last_edit_date": 1495539888, "question_id": 32213441, "link": "https://stackoverflow.com/questions/32213441/how-to-dump-pgresult", "title": "How to dump PGresult", "body": "<p>I am trying to debug my C program that accesses a postgres database.</p>\n\n<p>I would like to dump the contents of PGresult using some postgres provided routine.</p>\n\n<p>Is there a postgres provided routine that will dump PGresult in a human readable way?</p>\n\n<p>I will add that as an option to the logging that will dump the contents of PGresult.</p>\n\n<p>Here is a related question for non-SELECT commands:\n<a href=\"https://stackoverflow.com/questions/33028940/how-to-dump-pgresult-for-nonselect-commands\">How to dump PGresult for non-SELECT commands</a></p>\n"}, {"tags": ["c", "gcc", "mingw", "vectorization", "intrinsics"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1440534183, "post_id": 32213338, "comment_id": 52310628, "body": "Time to learn to debug!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440534216, "post_id": 32213338, "comment_id": 52310647, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 631, "user_id": 1649948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5a42795ba591110c540563b1b396f2df?s=128&d=identicon&r=PG", "display_name": "user1649948", "link": "https://stackoverflow.com/users/1649948/user1649948"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440534470, "post_id": 32213338, "comment_id": 52310778, "body": "The minimal program is included, as stated. The result is a crash, as stated. The expected result is a permutation of x and y, as stated, which as stated works fine in 32-bit mode. I guess I can be more clear what the output itself is. I will edit the question. I don&#39;t understand how to debug this, which is why I came here -- to learn. Thanks."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440534507, "post_id": 32213338, "comment_id": 52310794, "body": "&quot;crash&quot; is not a proper error description. That is much like &quot;does not work&quot;. Use the debugger and give us more details. And do not post links to binaries. You do not know what they might do to the unaware (remember there are too many people out there who click every link)."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1440534657, "post_id": 32213338, "comment_id": 52310860, "body": "Your vector variables aren&#39;t sufficiently aligned on the stack: <code>vmovdqa\tYMMWORD PTR [rbp-48], ymm0</code> - <code>rbp</code> is aligned to 32 bytes, but 48 is not divisible by 32."}, {"owner": {"reputation": 631, "user_id": 1649948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5a42795ba591110c540563b1b396f2df?s=128&d=identicon&r=PG", "display_name": "user1649948", "link": "https://stackoverflow.com/users/1649948/user1649948"}, "edited": false, "score": 0, "creation_date": 1440534667, "post_id": 32213338, "comment_id": 52310865, "body": "There is no binary link, but your advice is good to keep in mind going forward, thanks."}, {"owner": {"reputation": 631, "user_id": 1649948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5a42795ba591110c540563b1b396f2df?s=128&d=identicon&r=PG", "display_name": "user1649948", "link": "https://stackoverflow.com/users/1649948/user1649948"}, "edited": false, "score": 0, "creation_date": 1440534734, "post_id": 32213338, "comment_id": 52310907, "body": "You&#39;re right, it&#39;s not aligned! This is weird. Doesn&#39;t GCC handle this with the built in vector extensions? How can I fix this?"}, {"owner": {"reputation": 631, "user_id": 1649948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5a42795ba591110c540563b1b396f2df?s=128&d=identicon&r=PG", "display_name": "user1649948", "link": "https://stackoverflow.com/users/1649948/user1649948"}, "edited": false, "score": 0, "creation_date": 1440535105, "post_id": 32213338, "comment_id": 52311059, "body": "<code>typedef char byteVec __attribute__ ((vector_size (VECSIZE))) __attribute__ ((aligned (32))); </code> does not work. I should also mention that the 32-bit version works despite showing <code>vmovdqa\tYMMWORD PTR [ebp-56], ymm0</code> for the same line."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1440535214, "post_id": 32213338, "comment_id": 52311117, "body": "Try <code>__m256i</code> instead of GCC&#39;s syntax. But don&#39;t get your hopes up. I&#39;ve heard that mingw has problems with AVX stack-alignment. Though that was a few years ago and I&#39;m not sure if anything has been done about it."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440536709, "post_id": 32213338, "comment_id": 52311849, "body": "&quot;Here is the compiled code ...&quot; If that is not the binary, it would be a good idea to rephrase."}, {"owner": {"reputation": 631, "user_id": 1649948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5a42795ba591110c540563b1b396f2df?s=128&d=identicon&r=PG", "display_name": "user1649948", "link": "https://stackoverflow.com/users/1649948/user1649948"}, "edited": false, "score": 0, "creation_date": 1440553974, "post_id": 32213338, "comment_id": 52317259, "body": "Found this depressing news: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=54412\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=54412</a>  ... This means GCC is no longer compatible with Windows going forward (at least for any of the new and ever-widening processor instructions), until this critical but virtually unnoticed bug is fixed."}, {"owner": {"reputation": 829, "user_id": 1894478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/844dae39b47a501f7ca3d88cbe6f1909?s=128&d=identicon&r=PG", "display_name": "EvgeniyZh", "link": "https://stackoverflow.com/users/1894478/evgeniyzh"}, "edited": false, "score": 0, "creation_date": 1440903782, "post_id": 32213338, "comment_id": 52462730, "body": "Win10, mingw 5.1.0 x64, your code is running both with and without optimizations. Time to update?)"}, {"owner": {"reputation": 631, "user_id": 1649948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5a42795ba591110c540563b1b396f2df?s=128&d=identicon&r=PG", "display_name": "user1649948", "link": "https://stackoverflow.com/users/1649948/user1649948"}, "edited": false, "score": 0, "creation_date": 1441513114, "post_id": 32213338, "comment_id": 52705934, "body": "Tried official mingw 5.1.0 x64 and TDM&#39;s version on Windows 7. Still crashes. It may be possible Windows 10 aligns the stack differently. But there&#39;s not much use for a binary that only works on Windows 10"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1441751546, "post_id": 32213338, "comment_id": 52798384, "body": "@user1649948 The OS shouldn&#39;t have anything to do with it. In your example, the compiler aligns the stack frame. But then <i>misaligns</i> the AVX register. That will crash on any OS. In any case, if you&#39;re serious about using AVX on Windows, I recommend a different compiler. Given that it&#39;s been broken for years, the MinGW devs are either undermanned or don&#39;t care."}, {"owner": {"reputation": 631, "user_id": 1649948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5a42795ba591110c540563b1b396f2df?s=128&d=identicon&r=PG", "display_name": "user1649948", "link": "https://stackoverflow.com/users/1649948/user1649948"}, "reply_to_user": {"reputation": 829, "user_id": 1894478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/844dae39b47a501f7ca3d88cbe6f1909?s=128&d=identicon&r=PG", "display_name": "EvgeniyZh", "link": "https://stackoverflow.com/users/1894478/evgeniyzh"}, "edited": false, "score": 0, "creation_date": 1442006337, "post_id": 32213338, "comment_id": 52922664, "body": "@EvgeniyZh Where did you get this compiler? What were your compilation options?"}, {"owner": {"reputation": 631, "user_id": 1649948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5a42795ba591110c540563b1b396f2df?s=128&d=identicon&r=PG", "display_name": "user1649948", "link": "https://stackoverflow.com/users/1649948/user1649948"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1442006782, "post_id": 32213338, "comment_id": 52922816, "body": "@Mysticial, yes, but I want GCC&#39;s generic vector support (so at compile time you can just say, &quot;oh yeah, i want mmx so make vectors size 8&quot; or &quot;avx2 plz, make them 32&quot; or compile for arm, powerpc, etc without changing a line. In principle it&#39;s awesome -- in practice, meh. But wait, the assembly I showed was generated by GCC explorer under Linux without MingW (before I knew it was a Windows problem). Is that bad too?"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1451934001, "post_id": 32213338, "comment_id": 56941346, "body": "@Mysticial, does this apply tow Mingw-w64? I have not used it much. I remember having some problems with AVX maybe last year but I did not look too much into it."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1451958684, "post_id": 32213338, "comment_id": 56951717, "body": "@Zboson The last time I&#39;ve used MingW was 2008-ish."}], "owner": {"reputation": 631, "user_id": 1649948, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5a42795ba591110c540563b1b396f2df?s=128&d=identicon&r=PG", "display_name": "user1649948", "link": "https://stackoverflow.com/users/1649948/user1649948"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 367, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1440537817, "creation_date": 1440534049, "last_edit_date": 1440537817, "question_id": 32213338, "link": "https://stackoverflow.com/questions/32213338/gcc-vector-extensions-avx2-builtin-shuffle-crashes-when-m64-is-used", "title": "GCC Vector Extensions: AVX2 builtin shuffle crashes when m64 is used", "body": "<p>I have the following program in Mingw, gcc 4.9.2:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\n#define VECSIZE 32\n\ntypedef char byteVec __attribute__ ((vector_size (VECSIZE))); \n\n#define PERMLEFT_BVEC (byteVec){63,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30}\n\nbyteVec permute(byteVec x, byteVec y) {\n    return __builtin_shuffle(x,y,PERMLEFT_BVEC);\n}\nvoid print_vec32b(byteVec a) {\n    printf(\"[ \");\n    int i; for (i = 0; i &lt; 32; ++i) printf(\"%d \", a[i]);\n    puts(\"]\");\n}\nint main() {\n    byteVec x = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32};\n    byteVec y = {11,12,13,14,15,16,17,18,19,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,88,89,90,91,92};\n    byteVec z = permute(x,y);\n    print_vec32b(x);\n    return 0;\n}\n</code></pre>\n\n<p>When I compile this program with -m64, it crashes. With -m32 it works fine. Optimization level doesn't matter. I don't understand what's going on. I've also tried TDM with GCC 5.1.0. Same thing. Anybody have any advice? Is it something screwy with GCC in Windows?</p>\n\n<p>Here is the assembly produced by the compiler (note how the shuffle is turned into a permutation automatically, with vperm2i128 and vpalignr, which is the desired behavior:\n<a href=\"https://goo.gl/kVXmfi\" rel=\"nofollow\">GCC Explorer</a></p>\n\n<p>Minimal program: above.<br>\nDesired behavior: print permuted byte vector (which it does in 32-bit mode). \nExpected output (works in 32-bit mode):</p>\n\n<pre><code>$ gcc nvec.c -m32 -mavx2 -o a.exe &amp;&amp; a.exe\n[ 92 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 ]\n</code></pre>\n\n<p>Actual result: crash.<br>\nDescription of crash: immediate crash, windows error reporting bug shows up. No errors or warnings.   </p>\n"}, {"tags": ["c", "arduino", "signalr", "signalr.client"], "owner": {"reputation": 109, "user_id": 1038280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a05cb5ca63173e349e2899d72b6a05?s=128&d=identicon&r=PG", "display_name": "user1038280", "link": "https://stackoverflow.com/users/1038280/user1038280"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 350, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1440532489, "creation_date": 1440532489, "question_id": 32212899, "link": "https://stackoverflow.com/questions/32212899/signalr-c-client-fails-to-receive-hub-message-payload", "title": "SignalR C Client fails to receive hub message payload", "body": "<p>I'm having difficulties receiving the hub message on a c client I'm developing.  I've been able to connect and receive an initial init message:</p>\n\n<pre><code>{\"C\":\"d-3D0A11A6-w,E0|7,0|8,1\",\"S\":1,\"M\":[]}\n</code></pre>\n\n<p>However when the next message arrives i.e. the message received from the server hub, I run into unexpected behavior.  I receive the following:</p>\n\n<pre><code>&amp;{\"C\":\"d-3D0A11A6-:,1|BA,0|BB,1\",\"M\":[\n</code></pre>\n\n<p>But I do not receive the actual message.  I would think that the payload of the message would be something like the following:  </p>\n\n<pre><code>{\"H\":\"hub\", \"M\":\"broadcast\", \"A\":[\"Hi!\", 1]}\n</code></pre>\n\n<p>I've tried reading data 1 character at a time and also in larger chunks up to 1024.  But nothing seems to read the message from the socket.</p>\n\n<p>Here is an example of the read I'm doing AFTER receiving the init message:</p>\n\n<pre><code>int recv_to(int fd, char *buffer, int len, int flags, int to) {\n\n   fd_set readset;\n   int result, iof = -1;\n   struct timeval tv;\n\n   // Initialize the set\n   FD_ZERO(&amp;readset);\n   FD_SET(fd, &amp;readset);\n\n   // Initialize time out struct\n   tv.tv_sec = 3;\n   tv.tv_usec = to * 1000;\n   // select()\n   result = select(fd+1, &amp;readset, NULL, NULL, &amp;tv);\n\n   // Check status\n   if (result &lt; 0)\n      return -1;\n   else if (result &gt; 0 &amp;&amp; FD_ISSET(fd, &amp;readset)) {\n      // Set non-blocking mode\n      if ((iof = fcntl(fd, F_GETFL, 0)) != -1)\n         fcntl(fd, F_SETFL, iof | O_NONBLOCK);\n      // receive\n      result = recv(fd, buffer, len, flags);\n      // set as before\n      if (iof != -1)\n         fcntl(fd, F_SETFL, iof);\n      return result;\n   }\n   return -2;\n}\n\nint wait = 2;\ndo {\n    if((n = recv_to(sockfd, buffer, 1024, 0, wait)) &gt; -1) {\n        printMsg(buffer);\n        bzero(buffer, 1024);\n    }\n    else if(n != -1) {\n        printf(\"received: %d\\n\", n);\n    }\n    else {\n        printf(\"%s\", \"error\");\n        break;\n    }\n} while(1);\n</code></pre>\n\n<p>I have verified that I'm using an upgraded connection to use websockets. Here is the negotiate url:</p>\n\n<pre><code>blahblah.azurewebsites.net/signalr/negotiate?clientProtocol=1.5&amp;connectionData=%5B%7B\"name\":\"broadcasthub\"%7D%5D\n</code></pre>\n"}, {"tags": ["c", "valgrind"], "comments": [{"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 2, "creation_date": 1440532373, "post_id": 32212703, "comment_id": 52309593, "body": "The first trace is where the invalid read happened; the second part is where the memory being read was originally allocated."}], "answers": [{"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 1, "last_activity_date": 1440587525, "last_edit_date": 1440587525, "creation_date": 1440532921, "answer_id": 32213034, "question_id": 32212703, "link": "https://stackoverflow.com/questions/32212703/why-stacktrace-of-valgrind-dividied-to-two-parts/32213034#32213034", "title": "Why stacktrace of valgrind dividied to two parts?", "body": "<p>Those are two separate stack traces.\n</p>\n\n<p>Firstly, a description of the invalid access, with a stack trace of the code at that point:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==20285== Invalid read of size 8\n==20285==    at 0x401E8C: arraylist_get (arraylist.c:68)\n==20285==    by 0x401254: test_arraylist_remove (test_arraylist.c:68)\n==20285==    by 0x401366: main (tests.c:31)\n</code></pre>\n\n<p>Secondly, a description of the memory being accessed, with a stack trace of the code that allocated it:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==20285==  Address 0x59d65f0 is 0 bytes inside a block of size 2 alloc'd\n==20285==    at 0x4C2CE8E: realloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==20285==    by 0x402302: pool_realloc (pool.c:57)\n==20285==    by 0x401D97: arraylist_remove (arraylist.c:53)\n==20285==    by 0x401243: test_arraylist_remove (test_arraylist.c:67)\n==20285==    by 0x401366: main (tests.c:31)\n</code></pre>\n"}], "owner": {"reputation": 8915, "user_id": 1818608, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2c7fd43d0ea66acaf6eadc8062693a50?s=128&d=identicon&r=PG", "display_name": "Gill Bates", "link": "https://stackoverflow.com/users/1818608/gill-bates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 32213034, "answer_count": 1, "score": 0, "last_activity_date": 1440587525, "creation_date": 1440531813, "question_id": 32212703, "link": "https://stackoverflow.com/questions/32212703/why-stacktrace-of-valgrind-dividied-to-two-parts", "title": "Why stacktrace of valgrind dividied to two parts?", "body": "<p>In <a href=\"http://valgrind.org/docs/manual/mc-manual.html\" rel=\"nofollow\">the docs</a>, explaining Valgrind's Memcheck error reports, there is a such example in section <em>4.2.1. Illegal read / Illegal write errors</em>:</p>\n\n<pre><code>Invalid read of size 4\n   at 0x40F6BBCC: (within /usr/lib/libpng.so.2.1.0.9)\n   by 0x40F6B804: (within /usr/lib/libpng.so.2.1.0.9)\n   by 0x40B07FF4: read_png_image(QImageIO *) (kernel/qpngio.cpp:326)\n   by 0x40AC751B: QImageIO::read() (kernel/qimage.cpp:3621)\n Address 0xBFFFF0E0 is not stack'd, malloc'd or free'd\n</code></pre>\n\n<p>And here is my example:</p>\n\n<pre><code>==20285== Invalid read of size 8\n==20285==    at 0x401E8C: arraylist_get (arraylist.c:68)\n==20285==    by 0x401254: test_arraylist_remove (test_arraylist.c:68)\n==20285==    by 0x401366: main (tests.c:31)\n==20285==  Address 0x59d65f0 is 0 bytes inside a block of size 2 alloc'd\n==20285==    at 0x4C2CE8E: realloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==20285==    by 0x402302: pool_realloc (pool.c:57)\n==20285==    by 0x401D97: arraylist_remove (arraylist.c:53)\n==20285==    by 0x401243: test_arraylist_remove (test_arraylist.c:67)\n==20285==    by 0x401366: main (tests.c:31)\n</code></pre>\n\n<p>Notice - in my case there is a continuation after <code>Address 0x59d65f0 is 0 bytes inside a block of size 2 alloc'd</code> - there is another stack trace in this error. What is it mean? </p>\n\n<p>ps<br>\nFull Valgrind output:<br>\n<a href=\"https://gist.github.com/AndrewPashkin/b1b1b484153642b1ae14\" rel=\"nofollow\">https://gist.github.com/AndrewPashkin/b1b1b484153642b1ae14</a></p>\n"}, {"tags": ["c", "arrays", "clang", "sizeof", "c89"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1440541072, "post_id": 32212696, "comment_id": 52313694, "body": "There are no variable size arrays in C89, so it could not be considered a variable size array declaration. ."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1440540808, "post_id": 32212728, "comment_id": 52313608, "body": "In C11 <code>sizeof</code> is not a &quot;compile-time operator&quot; and sometimes does not produce constant expression.  (Although OP was asking about C89)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1440532694, "last_edit_date": 1440532694, "creation_date": 1440531911, "answer_id": 32212728, "question_id": 32212696, "link": "https://stackoverflow.com/questions/32212696/using-sizeof-in-array-declarations-in-c89/32212728#32212728", "title": "Using sizeof() in array declarations in C89", "body": "<p>First, let's see the criteria for an array (<em>not being</em>) a VLA. <code>C11</code> doc, chapter \u00a76.7.6.2,</p>\n\n<blockquote>\n  <p>[...] If the size is an integer constant expression\n  and the element type has a known constant size, the array type is not a variable length\n  array type; [...]</p>\n</blockquote>\n\n<p>Coming to your case, <code>sizeof</code> is a compile-time operator, so it produces a value that is considered compile time constant expression. An array definition, whose size is specified as a compile time constant expression is not a VLA. So, in your code,</p>\n\n<pre><code>int other_array[sizeof(array)]\n</code></pre>\n\n<p>is not a VLA.</p>\n\n<p>Regarding the <code>sizeof</code> operator result, from <code>C11</code>, chapter \u00a76.5.3.4, (<em>emphasis mine</em>)</p>\n\n<blockquote>\n  <p>The <code>sizeof</code> operator yields the size (in bytes) of its operand, which may be an expression or the parenthesized name of a type. [...] otherwise, the operand is not evaluated and <strong>the result is an integer constant.</strong></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 34922, "user_id": 586873, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11ba1f932f0af556969448ffba230d9a?s=128&d=identicon&r=PG", "display_name": "Grzegorz Szpetkowski", "link": "https://stackoverflow.com/users/586873/grzegorz-szpetkowski"}, "is_accepted": true, "score": 5, "last_activity_date": 1440544132, "last_edit_date": 1440544132, "creation_date": 1440531938, "answer_id": 32212739, "question_id": 32212696, "link": "https://stackoverflow.com/questions/32212696/using-sizeof-in-array-declarations-in-c89/32212739#32212739", "title": "Using sizeof() in array declarations in C89", "body": "<p>That is because result of <code>sizeof</code> operator is <em>constant expression</em>, so it does not qualify for VLA, just like the following declaration:</p>\n\n<pre><code>int other_array[5];\n</code></pre>\n\n<p>cannot be variable length array either. From  C11 (N1570) \u00a76.6/p6 <em>Constant expressions</em> (emphasis mine going forward):</p>\n\n<blockquote>\n  <p>An <em>integer constant expression</em><sup>117)</sup> shall have integer type and shall\n  only have operands that are integer constants, enumeration constants,\n  character constants, <code>sizeof</code> expressions <strong>whose results are integer\n  constants</strong>, <code>_Alignof</code> expressions, and floating constants that are the\n  immediate operands of casts.</p>\n</blockquote>\n\n<p>For sake of completeness, the <code>sizeof</code> operator does not always results into constant expression, though this only affects post-C89 standards (in C11 VLAs were made optional). Referring to \u00a76.5.3.4/p2 <em>The <code>sizeof</code> and <code>_Alignof</code> operators</em>:</p>\n\n<blockquote>\n  <p>If the type of the operand is a variable length array type, the\n  operand is evaluated; otherwise, the operand is not evaluated and the\n  result <strong>is an integer constant</strong>.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 3, "creation_date": 1440537712, "post_id": 32212980, "comment_id": 52312314, "body": "Not my downvote, but this is not an answer to the question. This should be a comment."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1440539754, "post_id": 32212980, "comment_id": 52313193, "body": "@JensGustedt Fair enough. But I tried to actually <i>understand</i> what the code was supposed to achieve, see more than the technical question, uncover why someone would want another array the number of elements were one for each byte in a double array. That does not look right and the comments are simply too limited when it comes to formatting. Maybe I should repeat the technical answer a third time to conform to the answer expectation."}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 8, "last_activity_date": 1440541332, "last_edit_date": 1440541332, "creation_date": 1440532753, "answer_id": 32212980, "question_id": 32212696, "link": "https://stackoverflow.com/questions/32212696/using-sizeof-in-array-declarations-in-c89/32212980#32212980", "title": "Using sizeof() in array declarations in C89", "body": "<p>In ANSI C89 a.k.a. ISO C90, the <code>sizeof</code> operator yields an <em>integer constant</em>, which is suitable for array dimensions. Function calls, for example, are not.</p>\n\n<p>I'd like to add another remark, since I believe the code as-is has a problem that might get overlooked.</p>\n\n<p>If the <code>other_array</code> is declared as</p>\n\n<pre><code>double other_array[sizeof(array)];\n</code></pre>\n\n<p>it will <strong>neither have the same number of elements, nor the same size</strong> (that would only be true for array of <code>char</code>) as <code>array[]</code>. If the intent is to declare a second array with the same number of elements (regardless of type), use this:</p>\n\n<pre><code>double other_array[sizeof(array)/sizeof(*array)];\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user755921"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "accepted_answer_id": 32212739, "answer_count": 3, "score": 9, "last_activity_date": 1440544132, "creation_date": 1440531793, "last_edit_date": 1440532960, "question_id": 32212696, "link": "https://stackoverflow.com/questions/32212696/using-sizeof-in-array-declarations-in-c89", "title": "Using sizeof() in array declarations in C89", "body": "<p>I was under the impression that variable-size array declarations were not possible in C89.  But, when compiling with <code>clang -ansi</code> I am able to run the following code:</p>\n\n<pre><code>double array[] = { 0.0, 1.0, 2.0, 3.0, 4.0 };\ndouble other_array[sizeof(array)] = { 0.0 };\n</code></pre>\n\n<p>What is going on here?  Is that not considered a variable-size array declaration?</p>\n"}, {"tags": ["c", "windows", "winapi"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 4, "creation_date": 1440531232, "post_id": 32212468, "comment_id": 52308901, "body": "You don&#39;t seem to be calling <code>DefWndProc</code>?"}, {"owner": {"reputation": 4460, "user_id": 2325919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5AcY.png?s=128&g=1", "display_name": "Rafael Monteiro", "link": "https://stackoverflow.com/users/2325919/rafael-monteiro"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1440532079, "post_id": 32212468, "comment_id": 52309405, "body": "I was not aware of that (newbie on creating a Windows app from scrach). I Googled and found <code>DefWindowProc</code>. If I call that instead of the dummy printf, it works. Thanks you very much! :) My problem is solved, but I&#39;m still curious to know why the printf itself also makes it work, so I&#39;ll keep the question open."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 3, "creation_date": 1440535462, "post_id": 32212468, "comment_id": 52311241, "body": "Btw, your compiler would have almost certainly given you a warning about the lack of a return value from your <code>WndProc</code> function. Don&#39;t get into the habit of ignoring warnings."}], "answers": [{"tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": true, "score": 4, "last_activity_date": 1440532630, "creation_date": 1440532630, "answer_id": 32212944, "question_id": 32212468, "link": "https://stackoverflow.com/questions/32212468/wndproc-weird-behaviour-on-windows-8-1-only-works-if-dummy-printf-is-called/32212944#32212944", "title": "WndProc weird behaviour on Windows 8.1: only works if dummy printf is called", "body": "<p>The problem is WndProc returns something and you aren't returning anything. The strange behavior about dummy printf is due to artifact of your printf return is left over in the eax register resulting in it becoming the function return.</p>\n\n<p>When adding the default: return DefWindowProc(...), this satisfies the return for most messages so all of a sudden your WM_POWERBROADCAST starts working.</p>\n\n<p>The most likely explanation for failure is your unilitialized return turned into a failure code for WM_NCCREATE or WM_CREATE so the window didn't get created.</p>\n"}], "owner": {"reputation": 4460, "user_id": 2325919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5AcY.png?s=128&g=1", "display_name": "Rafael Monteiro", "link": "https://stackoverflow.com/users/2325919/rafael-monteiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 32212944, "answer_count": 1, "score": 1, "last_activity_date": 1440532630, "creation_date": 1440531041, "last_edit_date": 1495539835, "question_id": 32212468, "link": "https://stackoverflow.com/questions/32212468/wndproc-weird-behaviour-on-windows-8-1-only-works-if-dummy-printf-is-called", "title": "WndProc weird behaviour on Windows 8.1: only works if dummy printf is called", "body": "<blockquote>\n  <p><strong><em>UPDATE:</strong> @JonathanPotter solved my problem on a comment (see below). Apparently I should have called <code>DefWindowProc</code> on <code>WndProc</code>. If I call it instead of the dummy <code>printf</code>, everything works. But I'll keep the question open because I'm still curious to know why the <code>printf</code> itself also made it work in the first place.</em></p>\n</blockquote>\n\n<p>I'm writing a program that does something when the notebook lid is opened/closed. There is an invisible window that monitors <code>WM_POWERBROADCAST</code> messages and treats them properly. Also there is a console (for debugging purposes).</p>\n\n<p>The program works fine on Windows 10, and then I went to test it on another machine running Windows 8.1, but the <code>WM_POWERBROADCAST</code> message was not being captured by the program.</p>\n\n<p><strong>The weird thing is:</strong></p>\n\n<ul>\n<li>If I add a <em>dummy</em> <code>printf</code> to the beggining of <code>WndProc</code>, <strong>the message is received</strong>.</li>\n</ul>\n\n<p>I've prepared a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>, in case anyone would like to try to reproduce it (below). Notice there is a <code>printf</code> commented at the beggining of <code>WndProc</code>.</p>\n\n<h1>Scenario 1: <code>printf</code> line remains commented</h1>\n\n<p>If I run the program on Windows 10, here's what I get as soon as it runs (no need to close the lid, just run the program):</p>\n\n<pre><code>Power broadcast message received\n</code></pre>\n\n<p>But if I run it on Windows 8.1, I get nothing (even if I close/open the lid).</p>\n\n<h1>Scenario 2: <code>printf</code> line is not commented</h1>\n\n<p>This is what I get on <strong>both</strong> Windows 10 and 8.1:</p>\n\n<pre><code>MSG: 36\nMSG: 129\nMSG: 131\nMSG: 1\nMSG: 799\nMSG: 536\nPower broadcast message received\nMSG: 49273\n</code></pre>\n\n<p>(Except for <code>MSG: 49273</code>, which didn't appear on Windows 8.1, but that doesn't seem to be relevant).</p>\n\n<p>Why is this happening?</p>\n\n<p><strong>More info:</strong></p>\n\n<ul>\n<li>Both Windows are 64-bits</li>\n<li>Compiler: MinGW 64 5.1.0 (x86_64-posix-seh-rev0)</li>\n</ul>\n\n<p>Here is the <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n\nint WndProc(HWND hWnd, UINT message,\n            WPARAM wParam, LPARAM lParam)\n{\n    //printf(\"MSG: %d\\n\", message);\n\n    if (message == WM_POWERBROADCAST)\n    {\n        printf(\"Power broadcast message received\\n\");\n    }\n}\n\nint APIENTRY WinMain(HINSTANCE hInstance,\n                     HINSTANCE hPrevInstance,\n                     LPSTR     lpCmdLine,\n                     int       nCmdShow)\n{\n    WNDCLASS wc;\n    memset(&amp;wc, 0, sizeof(WNDCLASS));\n    wc.lpfnWndProc = (WNDPROC)WndProc;\n    wc.lpszClassName = L\"Test\";\n\n    RegisterClass(&amp;wc);\n\n    HWND hWnd = CreateWindow(wc.lpszClassName, NULL,\n        0, 0, 0, 0, 0, NULL, NULL,\n        hInstance, NULL);\n\n    RegisterPowerSettingNotification(hWnd, &amp;GUID_LIDSWITCH_STATE_CHANGE, 0);\n\n    ShowWindow(hWnd, SW_HIDE);\n\n    MSG msg;\n    while (GetMessage(&amp;msg, NULL, 0, 0))\n    {\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n    return msg.wParam;\n}\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "r", "indexing"], "comments": [{"owner": {"reputation": 11, "user_id": 3959276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b6f670d639b0dcef74c6752ec192e23?s=128&d=identicon&r=PG&f=1", "display_name": "Pascal Selle", "link": "https://stackoverflow.com/users/3959276/pascal-selle"}, "edited": false, "score": 0, "creation_date": 1440531014, "post_id": 32212441, "comment_id": 52308771, "body": "of course I mean VECTOR_ELT not VECTOR_ETL"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 3959276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b6f670d639b0dcef74c6752ec192e23?s=128&d=identicon&r=PG&f=1", "display_name": "Pascal Selle", "link": "https://stackoverflow.com/users/3959276/pascal-selle"}, "is_accepted": true, "score": 0, "last_activity_date": 1440532846, "creation_date": 1440532846, "answer_id": 32213007, "question_id": 32212441, "link": "https://stackoverflow.com/questions/32212441/r-indexing-multi-dimensional-structure-in-c-extension/32213007#32213007", "title": "R indexing multi-dimensional structure in C extension", "body": "<p>Got it by using</p>\n\n<p>coerceVector with generic vector (VECSXP) after first VECTOR_ELT</p>\n\n<p>and</p>\n\n<p>coerceVector with integer vector (INTSXP) after second VECTOR_ELT</p>\n"}], "owner": {"reputation": 11, "user_id": 3959276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b6f670d639b0dcef74c6752ec192e23?s=128&d=identicon&r=PG&f=1", "display_name": "Pascal Selle", "link": "https://stackoverflow.com/users/3959276/pascal-selle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 32213007, "answer_count": 1, "score": 0, "last_activity_date": 1440532846, "creation_date": 1440530938, "question_id": 32212441, "link": "https://stackoverflow.com/questions/32212441/r-indexing-multi-dimensional-structure-in-c-extension", "title": "R indexing multi-dimensional structure in C extension", "body": "<p>I have a multi-dimensional structure in R in which I'm accessing a list on those ways:</p>\n\n<p><strong>model$a$b</strong> or <strong>model[[5]][[4]]</strong></p>\n\n<p>But how to do this in a C extension? Right now I'm trying it like that:</p>\n\n<p><strong>VECTOR_ELT(VECTOR_ETL(model, (R_xlen_t) 4), (R_xlen_t) 3)</strong></p>\n\n<p>But it behaves more like <strong>model[5][4]</strong> than <strong>model[[5]][[4]]</strong></p>\n"}, {"tags": ["c", "currency"], "comments": [{"owner": {"reputation": 1404, "user_id": 1592481, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/745cdde33a0435d5ef8065b97894ca39?s=128&d=identicon&r=PG", "display_name": "rpsml", "link": "https://stackoverflow.com/users/1592481/rpsml"}, "edited": false, "score": 4, "creation_date": 1440530339, "post_id": 32212213, "comment_id": 52308416, "body": "You can always work with cents and use <code>int</code>, <code>long</code>, or <code>long long</code>."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1440530599, "post_id": 32212213, "comment_id": 52308549, "body": "You also don&#39;t want to reinvent the wheel because you&#39;d easily end up with something broken and so slow."}, {"owner": {"reputation": 2991, "user_id": 4394382, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec6051aa680b77974eee192444340495?s=128&d=identicon&r=PG&f=1", "display_name": "wallek876", "link": "https://stackoverflow.com/users/4394382/wallek876"}, "edited": false, "score": 1, "creation_date": 1440530637, "post_id": 32212213, "comment_id": 52308572, "body": "i don&#39;t know if is the best approach, but i&#39;ve seen several people using a struct formed by two integers one for the units and the other for decimals."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1345223"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1440530981, "post_id": 32212213, "comment_id": 52308746, "body": "@Olaf - Thank you for that link.  I had already reviewed it and I mention it in my question.  That question focuses on Java which has different types available to it than what C does."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440531454, "post_id": 32212213, "comment_id": 52309006, "body": "No it has not. Read the accepted answer! The default Java types are actually the same as for C, C++, Python, etc. They are the native IEEE754 types, possibly with slightly different settings, but that does not matter. The only difference would be arbitrary precision an true decimal floats as supported by some packages and special languages. But these are processed by the CPU and are very slow compared to the FPU types. Just use your reason: how do you represent e.g. 0.1 in a binary float representation?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1345223"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1440531917, "post_id": 32212213, "comment_id": 52309313, "body": "@Olaf - I believe you are referring to &quot;A solution that works in just about any language is to use integers instead, and count cents. For instance, 1025 would be $10.25.&quot;  That specific approach loses potentially significant information if you drop the tenths or hundredths, as mentioned below by ratchet freak.  The other suggestion to use a <code>decimal</code> type doesn&#39;t exist in C.  In addition, this question is looking beyond those suggestions to determine what the best course of action is given the 3 or 4 different ways this could be done."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440532606, "post_id": 32212213, "comment_id": 52309728, "body": "Please point me where I refer to a fixed-point solution. &quot;The other suggestion to use a decimal type doesn&#39;t exist in C&quot; Tell me! Where do I write that C has built-in decimal float support? I clearly wrote that there are packages/libraries available. If not, you are free to write your own. And gues which types you will be using to implement them in C? SO is no discussion forum, but a Q&amp;A site. You ask a <b>specific</b> question with a clear problem statement and we try to help you."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440532737, "post_id": 32212213, "comment_id": 52309794, "body": "If you don&#39;t see the common denominator for all the questions, independen of language, you really should first learn about fixed-size floats and their pitfalls."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1345223"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1440532928, "post_id": 32212213, "comment_id": 52309907, "body": "@Olaf - Again, thank you for the help.  At this point, I don&#39;t think we&#39;re communicating clearly to each other.   Please feel free to <a href=\"http://chat.stackexchange.com/rooms/21/the-whiteboard\">ping me in chat</a> so we can talk further outside of these comments here."}], "answers": [{"comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1440532503, "post_id": 32212343, "comment_id": 52309675, "body": "Maybe <code>unsigned</code>, unless there&#39;s negative money."}, {"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1440533916, "post_id": 32212343, "comment_id": 52310511, "body": "@FiddlingBits my 40 million number is based on unsigned"}], "tags": [], "owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "is_accepted": false, "score": 2, "last_activity_date": 1440531739, "last_edit_date": 1440531739, "creation_date": 1440530607, "answer_id": 32212343, "question_id": 32212213, "link": "https://stackoverflow.com/questions/32212213/how-to-represent-currency-or-money-in-c/32212343#32212343", "title": "How to represent currency or money in C", "body": "<p><code>int</code> (32 or 64 as you need) and think in cents or partial cents as needed. With 32 bit and thinking in cents you can represent up to 40 million dollar in a single value. With 64 bit it's well beyond all the US dept ever <em>combined</em>.</p>\n\n<p>There are some gotchas when doing the calculations you have to be aware of so you don't divide away half the significant numbers. </p>\n\n<p>It's a game of knowing the ranges and when the rounding after division is fine. </p>\n\n<p>For example doing a proper round (of the .5 up variaty) after division can be done by first adding half the numerator to the value and then doing the division. Though if you are doing finance you will need a bit more advanced round system though approved by your accountants.</p>\n\n<pre><code>long long res = (amount * interest + 500)/1000;\n</code></pre>\n\n<p>Only convert to dollar (or whatever) when communicating to the user.</p>\n"}, {"tags": [], "owner": {"reputation": 2633, "user_id": 27898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84028aac31ee14ca90aa08c2442e3a1e?s=128&d=identicon&r=PG", "display_name": "mpez0", "link": "https://stackoverflow.com/users/27898/mpez0"}, "is_accepted": false, "score": 6, "last_activity_date": 1440530742, "creation_date": 1440530742, "answer_id": 32212378, "question_id": 32212213, "link": "https://stackoverflow.com/questions/32212213/how-to-represent-currency-or-money-in-c/32212378#32212378", "title": "How to represent currency or money in C", "body": "<p>Either use an integer data type (long long, long, int) or a BCD (binary coded decimal) arithmetic library. You should store tenths or hundredths of the <em>smallest</em> amount you will display. That is, if you are using US dollars and presenting cents (hundredths of a dollar), your numeric values should be integers representing mills or millrays (tenths or hundredths of a cent). The extra significant figures will ensure your interest and similar calculations round consistently.</p>\n\n<p>If you use an integer type, make sure that its range is great enough to handle the amounts of concern.</p>\n"}, {"comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1440532764, "post_id": 32212933, "comment_id": 52309814, "body": "<code>unsigned</code> is more appropriate than <code>signed</code>, no?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 1, "creation_date": 1440534322, "post_id": 32212933, "comment_id": 52310708, "body": "@FiddlingBits: You need to be able to represent negative values, so you need a sign somewhere.  Either used signed types for the members (<code>frac_dollar</code> needs to be signed in case <code>whole_dollars</code> is <code>0</code>), or make them both unsigned and use a third member for sign."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 5, "last_activity_date": 1440535259, "last_edit_date": 1440535259, "creation_date": 1440532582, "answer_id": 32212933, "question_id": 32212213, "link": "https://stackoverflow.com/questions/32212213/how-to-represent-currency-or-money-in-c/32212933#32212933", "title": "How to represent currency or money in C", "body": "<p>If speed is your primary concern, then use an integral type scaled to the smallest unit you need to represent (such as a <em>mill</em>, which is 0.001 dollars or 0.1 cents).  Thus, <code>123456</code> represents <code>$123.456</code>.  </p>\n\n<p>The problem with this approach is that you may run out of digits; a 32-bit unsigned int can represent something like 10 decimal digits, so the largest value you could represent under this scheme would be <code>$9,999,999.999</code>.  Not good if you need to deal with values in the billions.</p>\n\n<p>Another approach is to use a struct type with one integral member to represent the whole dollar amount, and another integral member to represent the fractional dollar amount (again, scaled to the smallest unit you need to represent, whether it's cents, mills, or something smaller), similar to the <code>timeval</code> struct that saves whole seconds in one field and nanoseconds in the other:</p>\n\n<pre><code>struct money {\n  long whole_dollars; // long long if you have it and you need it\n  int frac_dollar; \n};                          \n</code></pre>\n\n<p>An <code>int</code> is <em>more</em> than wide enough to handle the scaling any sane person would use.  Leaving it signed in case the <code>whole_dollars</code> portion is 0.  </p>\n\n<p>If you're more worried about storing arbitrarily large values, there's always <a href=\"https://en.wikipedia.org/wiki/Binary-coded_decimal\" rel=\"nofollow\">BCD</a>, which can represent way more digits than any native integral or floating-point type.    </p>\n\n<p>Representation's only half the battle, though; you also have to be able to perform arithmetic on these types, and operations on currency may have very specific <a href=\"http://www.mortgageloancalculating.com/bankers-rounding.html\" rel=\"nofollow\">rounding rules</a>.  So you'll want to keep that in consideration when deciding on your representation.  </p>\n"}, {"comments": [{"owner": {"reputation": 649, "user_id": 5602491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2426d2645029b0fa49495a956020ee66?s=128&d=identicon&r=PG&f=1", "display_name": "gilez", "link": "https://stackoverflow.com/users/5602491/gilez"}, "edited": false, "score": 0, "creation_date": 1484075330, "post_id": 32214586, "comment_id": 70357780, "body": "Perhaps your crystal ball also predicted Canada dropping the pennies, which happened in 2013. They round to the nearest 5c when dealing with cash (and only when dealing with cash). You still need to get the maths right though, so really nothing significant changes for calculations."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 7, "last_activity_date": 1442246974, "last_edit_date": 1442246974, "creation_date": 1440538904, "answer_id": 32214586, "question_id": 32212213, "link": "https://stackoverflow.com/questions/32212213/how-to-represent-currency-or-money-in-c/32214586#32214586", "title": "How to represent currency or money in C", "body": "<p>The best money/currency  representation is to use a higher enough precision floating point type like <code>double</code> that has <code>FLT_RADIX == 10</code>.  These platforms/compliers are rare as the vast majority of systems have <code>FLT_RADIX == 2</code>.</p>\n\n<p>Four alternatives: integers, non-decimal floating point, special decimal floating point, user defined structure.</p>\n\n<p><strong>Integers</strong>: A common solution uses the integer count of the smallest denomination in the currency of choice.  Example counting US cents instead of dollars.  The range of integers needs to be reasonable wide.  Something like <code>long long</code> instead of <code>int</code> as <code>int</code> may only handle about +/- $320.00. This works fine for simple accounting tasks involving add/subtract/multiple but begins to crack with divisions and complex functions as used in interest calculations. <a href=\"https://en.wikipedia.org/wiki/Mortgage_calculator#Monthly_payment_formula\" rel=\"noreferrer\">Monthly payment formula</a>.  Signed integer math has no overflow protection.  Care needs to be applied when rounding division results.  <code>q = (a + b/2)/b</code> is not good enough.</p>\n\n<p><strong>Binary floating point</strong>: 2 common pitfalls: 1) using <code>float</code> which is so often of insufficient precision and 2) incorrect rounding.  Using <code>double</code> well addresses problem #1 for many accounting limits.  Yet code still often needs to use a round to the desired minimum currency unit for satisfactory results.</p>\n\n<pre><code>// Sample - does not properly meet nuanced corner cases.\ndouble RoundToNearestCents(double dollar) {\n  return round(dollar * 100.0)/100.0;\n}\n</code></pre>\n\n<p>A <em>variation on <code>double</code></em> is to use a <code>double</code> amount of the smallest unit (0.01 or 0.001).  An important advantage is the ability to round simply by using the <code>round()</code> function which by itself meets corner cases.</p>\n\n<p><strong>Special decimal floating point</strong>  Some systems provide a \"decimal\" type other than <code>double</code> that meets  <a href=\"https://en.wikipedia.org/wiki/Decimal64_floating-point_format\" rel=\"noreferrer\">decimal64</a> or something similar.   Although this handles most above issues, portability is sacrificed.</p>\n\n<p><strong>User defined structure</strong> (like <a href=\"https://en.wikipedia.org/wiki/Fixed-point_arithmetic\" rel=\"noreferrer\">fixed-point</a>) of course can solve everything except it is error prone to code so much and it is <em>work</em> (<a href=\"http://lyricsplayground.com/alpha/songs/b/bangonthedrum.shtml\" rel=\"noreferrer\">Instead</a>).  The result may function perfectly yet lack performance.</p>\n\n<p><strong>Conclusion</strong> This is a deep subject and each approach deserve a more expansive discussion.  The general answer is: there is no general solution as all approaches have significant weaknesses.  So it depends on the specifics of the application.</p>\n\n<p>[Edit]<br>\nGiven OP's additional edits, recommend using <code>double</code> number of the smallest unit of currency (example: $0.01 --> <code>double money = 1.0;</code>).  At various points in code whenever an <em>exact</em> value is required, use <code>round()</code>.</p>\n\n<pre><code>double interest_in_cents = round(\n    Monthly_payment(0.07/12 /* percent */, N_payments, principal_in_cents));\n</code></pre>\n\n<hr>\n\n<p>My crystal ball says by 2022 the U.S. will drop the $0.01 and the smallest unit will be $0.05.  I would use the approach that can best handle that shift.  </p>\n"}, {"comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1448773509, "post_id": 33979504, "comment_id": 55715370, "body": "Should elaborate on the absolute, &quot;Never use floating point for storing currency.&quot;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1448776338, "post_id": 33979504, "comment_id": 55715826, "body": "The common binary floating point does not represent tenths or hundredths exactly.  Decimal floating point does.  Integer math has its issues with overflow and truncation vs. rounding.  Using integer math for currently is fine for small programs using only <code>+,-,*</code>.  Once code embarks on interest rates and mortgage calculations, the simplistic use of integers is inadequate.  The weakness to this answer is that it ignores the  many issues involved."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1448840948, "post_id": 33979504, "comment_id": 55734868, "body": "@chux: The C floating point types, on an implementation that conforms to Annex F, are binary floating point. Decimal floating point types would solve these problems, but they&#39;re not a standard language feature and way beyond the scope of OP&#39;s question, in my opinion. Things like interest calculations might or might not be in the scope of what the OP is interested in, but I&#39;m giving an answer to the question, not writing a book on the topic. In any case, you still want/need to be using integers, but you just need additional techniques for applying interest rates, etc."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1448841666, "post_id": 33979504, "comment_id": 55735037, "body": "It is the &quot;Never use floating point for storing currency&quot; that overstates your simplified answer.  Agree we do not need to write a book, yet sweeping directives like that do not acknowledge that larger issues exist that a programmer learner needs to be aware of."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1448845009, "post_id": 33979504, "comment_id": 55735782, "body": "@chux: There is no situation where a (binary) floating point type is suitable for storing currency amounts. The exponent is just wasted storage space because you need an exact integer value. There are no conditions or caveats to &quot;never use floating point for storing currency&quot;; the difficulty of some currency-related calculations does not invalidate this rule. So I&#39;m not clear what point you&#39;re trying to make."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1448850735, "post_id": 33979504, "comment_id": 55737038, "body": "Excel for decades has been used by numerous companies to do financial calculations.  Good or add, that binary floating point has been used heavily and has been found to be suitable enough.  Perhaps we may chat for deeper discussion when we both have time.  Thanks for the professional  discourse."}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 8, "last_activity_date": 1448773848, "last_edit_date": 1448773848, "creation_date": 1448772344, "answer_id": 33979504, "question_id": 32212213, "link": "https://stackoverflow.com/questions/32212213/how-to-represent-currency-or-money-in-c/33979504#33979504", "title": "How to represent currency or money in C", "body": "<p>Never use floating point for storing currency. Floating point numbers <strong>cannot represent tenths or hundredths</strong>, only diadic rationals, i.e. numbers of the form p/q where p and q are integers and q is a power of 2. Thus, any attempt to represent cents others than 0, 25, 50, or 75 cents will require an approximation, and these approximations translate into vulnerabilities that can be exploited to make you lose money.</p>\n\n<p>Instead, store integer values in cents (or whatever the smallest division of the currency is). When reading values formatted with a radix point, simply read the whole currency units and cents as separate fields, then multiply by 100 (or the appropriate power of 10) and add.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1345223"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9108, "favorite_count": 6, "answer_count": 5, "score": 15, "last_activity_date": 1442246974, "creation_date": 1440530162, "last_edit_date": 1495541849, "question_id": 32212213, "link": "https://stackoverflow.com/questions/32212213/how-to-represent-currency-or-money-in-c", "title": "How to represent currency or money in C", "body": "<p><strong>TL;DR</strong><sup>1</sup> What is an accurate and maintainable approach for representing currency or money in C?</p>\n\n<hr>\n\n<p><strong><em>Background to the question:</em></strong><br>\nThis has been answered for a number of other languages, but I could not find a solid answer for the C language.</p>\n\n<ul>\n<li><p><strong>C#</strong> <a href=\"https://stackoverflow.com/q/1008826/1345223\">What data type should I use to represent money in C#?</a></p></li>\n<li><p><strong>Java</strong> <a href=\"https://stackoverflow.com/q/3730019/1345223\">Why not use Double or Float to represent currency?</a></p></li>\n<li><p><strong>Objective-C</strong> <a href=\"https://stackoverflow.com/q/830369/1345223\">How to represent money in Objective-C / iOS?</a></p></li>\n</ul>\n\n<p><sub><em>Note: There's plenty more similar questions for other languages, I just pulled a few for representational purposes.</em></sub></p>\n\n<p>All of those questions can be distilled down to \"use a <code>decimal</code> data type\" where the specific type may vary based upon the language.</p>\n\n<p>There is a <a href=\"https://stackoverflow.com/q/8886400/1345223\">related question</a> that ends up suggesting using a \"fixed point\" approach, but none of the answers address using a specific data type in C.</p>\n\n<p>Likewise, I have looked at arbitrary precision libraries such as <a href=\"https://gmplib.org/\" rel=\"noreferrer\">GMP</a>, but it's not clear to me if this is the best approach to use or not.</p>\n\n<hr>\n\n<p><strong><em>Simplifying Assumptions:</em></strong>  </p>\n\n<ul>\n<li><p>Presume an x86 or x64 based architecture, but please call out any assumptions that would impact a RISC based architecture such as a Power chip or an Arm chip.</p></li>\n<li><p>Accuracy in calculations is the primary requirement.  <a href=\"https://softwareengineering.stackexchange.com/q/141005/53019\">Ease of maintenance</a> would be the next requirement.  Speed of calculations is important, but is tertiary to the other requirements.</p></li>\n<li><p>Calculations need to be able to safely support operations accurate to the <a href=\"https://en.wikipedia.org/wiki/Mill_%28currency%29\" rel=\"noreferrer\">mill</a> as well as supporting values ranging up to the trillions (10^9)</p></li>\n</ul>\n\n<hr>\n\n<p><strong><em>Differences from other questions:</em></strong>  </p>\n\n<p>As noted above, this type of question has been asked before for multiple other languages.  This question is different from the other questions for a couple of reasons.</p>\n\n<p>Using the accepted answer from: <a href=\"https://stackoverflow.com/q/3730019/1345223\">Why not use Double or Float to represent currency?</a>, let's highlight the differences.</p>\n\n<blockquote>\n  <p>(<strong>Solution 1</strong>) A solution that works in just about any language is to use integers instead, and count cents. For instance, 1025 would be $10.25. Several languages also have built-in types to deal with money. (<strong>Solution 2</strong>) Among others, Java has the BigDecimal class, and C# has the decimal type.</p>\n</blockquote>\n\n<p><sub><em>Emphasis added to highlight the two suggested solutions</em></sub></p>\n\n<p>The first solution is essentially a variant of the \"fixed point\" approach.  There is a problem with this solution in that the suggested range (tracking cents) is insufficient for mill based calculations and significant information will be lost on rounding.  </p>\n\n<p>The other solution is to use a native <code>decimal</code> class which is not available within C.</p>\n\n<p>Likewise, the answer doesn't consider other options such as creating a struct for handling these calculations or using an arbitrary precision library.  Those are understandable differences as Java doesn't have structs and why consider a 3rd party library when there is native support within the language.</p>\n\n<p>This question is different from that question and other related questions because C doesn't have the same level of native type support and has language features that the other languages don't.  And I haven't seen any of the other questions address the multiple ways that this could be approached in C.</p>\n\n<hr>\n\n<p><strong><em>The Question:</em></strong><br>\nFrom my research, it seems that <code>float</code> is not an appropriate data type to use to represent currency within a C program due to floating point error.  </p>\n\n<p>What should I use to represent money in C, and why is that approach better than other approaches?</p>\n\n<p><sup>1</sup> <sub><em>This question started in a shorter form, but feedback received indicated the need to clarify the question.</em></sub></p>\n"}]