[{"tags": ["c", "x86", "simd", "avx2"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1521072424, "post_id": 49289420, "comment_id": 85582244, "body": "So just to be clear, the compiler says that <code>_mm256_add_epi16</code> does not exist?"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 1, "creation_date": 1521072526, "post_id": 49289420, "comment_id": 85582283, "body": "Well, there&#39;s no such thing as <code>_mm256_add_si256()</code>."}, {"owner": {"reputation": 11, "user_id": 8658387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99cefd9d2e88eb5545535977155a63ba?s=128&d=identicon&r=PG&f=1", "display_name": "Romal", "link": "https://stackoverflow.com/users/8658387/romal"}, "edited": false, "score": 0, "creation_date": 1521072597, "post_id": 49289420, "comment_id": 85582309, "body": "I think that the error &quot;implicit declaration of function&quot; does mean that the function/method doesn&#39;t exist."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1521072682, "post_id": 49289420, "comment_id": 85582329, "body": "@Romal probably, but which function? You&#39;ve shown <code>_mm256_add_si256</code> (which indeed does not exist and cannot exist - and even if it did exist it wouldn&#39;t add shorts), but then in the next paragraph you seem to be going towards <code>_mm256_add_epi16</code> (if that&#39;s what &quot;scalar suffix&quot; means)"}, {"owner": {"reputation": 11, "user_id": 8658387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99cefd9d2e88eb5545535977155a63ba?s=128&d=identicon&r=PG&f=1", "display_name": "Romal", "link": "https://stackoverflow.com/users/8658387/romal"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1521072956, "post_id": 49289420, "comment_id": 85582383, "body": "@harold, I tried <code>_mm256_add_epi16</code>. The program compiles. But it is giving segmentation fault. Got to look into if there is some error in the code(which i think there isn&#39;t as the code runs for 32 bit integer configuration)."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1521073300, "post_id": 49289420, "comment_id": 85582464, "body": "@Romal that&#39;s often caused by alignment issues, which you&#39;re likely to have here (short arrays don&#39;t have to be 32-aligned, but you do assume that)"}, {"owner": {"reputation": 11, "user_id": 8658387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99cefd9d2e88eb5545535977155a63ba?s=128&d=identicon&r=PG&f=1", "display_name": "Romal", "link": "https://stackoverflow.com/users/8658387/romal"}, "edited": false, "score": 0, "creation_date": 1521073365, "post_id": 49289420, "comment_id": 85582476, "body": "There&#39;s some issue with the vectorized commands for short data type and its addition."}, {"owner": {"reputation": 11, "user_id": 8658387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99cefd9d2e88eb5545535977155a63ba?s=128&d=identicon&r=PG&f=1", "display_name": "Romal", "link": "https://stackoverflow.com/users/8658387/romal"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1521073435, "post_id": 49289420, "comment_id": 85582499, "body": "@harold, what do you mean by 32-aligned? or what is alignment in this?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1521099210, "post_id": 49289420, "comment_id": 85589797, "body": "Change <code>_mm256_load_si256</code> to <code>_mm256_loadu_si256</code>."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1521099709, "post_id": 49289420, "comment_id": 85590015, "body": "Use <code>alignas(32) short int si1[16] = { ... };</code>"}, {"owner": {"reputation": 11, "user_id": 8658387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99cefd9d2e88eb5545535977155a63ba?s=128&d=identicon&r=PG&f=1", "display_name": "Romal", "link": "https://stackoverflow.com/users/8658387/romal"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1521099948, "post_id": 49289420, "comment_id": 85590115, "body": "@PaulR  Hi, Okay it works with the change you said."}, {"owner": {"reputation": 11, "user_id": 8658387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99cefd9d2e88eb5545535977155a63ba?s=128&d=identicon&r=PG&f=1", "display_name": "Romal", "link": "https://stackoverflow.com/users/8658387/romal"}, "edited": false, "score": 0, "creation_date": 1521100056, "post_id": 49289420, "comment_id": 85590159, "body": "But i am experiencing another issue here. Can you have a look at <a href=\"https://cs.stackexchange.com/questions/89362/performing-avx-instructions-in-c-along-with-thread-parallelism\" title=\"performing avx instructions in c along with thread parallelism\">cs.stackexchange.com/questions/89362/&hellip;</a>"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1521100072, "post_id": 49289420, "comment_id": 85590166, "body": "Yes, you either need to align your data or use unaligned loads/stores."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8658387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99cefd9d2e88eb5545535977155a63ba?s=128&d=identicon&r=PG&f=1", "display_name": "Romal", "link": "https://stackoverflow.com/users/8658387/romal"}, "is_accepted": true, "score": 0, "last_activity_date": 1521173477, "creation_date": 1521173477, "answer_id": 49313099, "question_id": 49289420, "link": "https://stackoverflow.com/questions/49289420/vectorised-addition-for-2-short-int-vectors-using-avx2/49313099#49313099", "title": "Vectorised addition for 2 short int vectors using AVX2", "body": "<p>With comments from people and some of my experimentation I solved the problem by using unaligned operation. So my code finally looks like this-</p>\n\n<pre><code>short int si1[16] =\n        { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16 };\nshort int si2[16] = { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 };\n\n__m256i i1 = _mm256_loadu_si256((__m256i *) si1);\n__m256i i2 = _mm256_loadu_si256((__m256i *) si2);\n\n    __m256i result = _mm256_adds_epi16(i2, i1);\n</code></pre>\n\n<p>This works and use -O2 optimization flag(on gcc) while trying to compile the program in case you are using multi threading because the optimization was the reason I was getting some other errors (execution time for big workload was higher for more threads as compared to single thread).</p>\n"}], "owner": {"reputation": 11, "user_id": 8658387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99cefd9d2e88eb5545535977155a63ba?s=128&d=identicon&r=PG&f=1", "display_name": "Romal", "link": "https://stackoverflow.com/users/8658387/romal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 49313099, "answer_count": 1, "score": 1, "last_activity_date": 1521173477, "creation_date": 1521071551, "last_edit_date": 1521099354, "question_id": 49289420, "link": "https://stackoverflow.com/questions/49289420/vectorised-addition-for-2-short-int-vectors-using-avx2", "title": "Vectorised addition for 2 short int vectors using AVX2", "body": "<p>I am facing problem in performing addition operation on 2 short (16bit integer) vector types using the AVX2 instruction set. \nI have built the code but am getting an error in the addition command, probably because of the wrong syntax.\nI am creating 2 vectors with the following code:</p>\n\n<pre><code>short int si1[16] ={1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16};\nshort int si2[16] ={1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1};\n\n__m256i i1 = _mm256_load_si256((__m256i*)si1);\n__m256i i2 = _mm256_load_si256((__m256i*)si2);\n</code></pre>\n\n<p>and I am trying to perform addition using the following code:</p>\n\n<pre><code>__m256i result = _mm256_add_si256(i1,i2);\n</code></pre>\n\n<p>I understand for 16 bit integers we use scalar suffix, but the compiler gives the error of implicit declaration of function to add command.</p>\n"}, {"tags": ["c++", "c", "compiler-construction", "llvm", "compiler-optimization"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1521075870, "post_id": 49289270, "comment_id": 85583092, "body": "all the variables are declared as <code>float</code> but all the literals are <code>double</code>.  Suggest remembering to append &#39;f&#39; to each of the literals"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521076296, "post_id": 49289270, "comment_id": 85583183, "body": "the function <code>sqrt()</code> expects a <code>double</code> parameter and returns a <code>double</code> result.  You can avoid all the resulting conversions by replacing &#39;sqrt&#39; with &#39;sqrtf&#39;"}, {"owner": {"reputation": 516, "user_id": 3525451, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9a48eae41cfabe94ce6716e0184048f6?s=128&d=identicon&r=PG", "display_name": "Farhad", "link": "https://stackoverflow.com/users/3525451/farhad"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521076652, "post_id": 49289270, "comment_id": 85583269, "body": "@user3629249 Unfortunately, the issue remains even if I have a completely different body with no floating point operations..."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521098258, "post_id": 49289270, "comment_id": 85589387, "body": "My comment about which function to call was a suggestion on improving the code, NOT a fix for the loop unrolling.  BTW: what exactly are the parameters to the compile step, that you are using?"}, {"owner": {"reputation": 516, "user_id": 3525451, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9a48eae41cfabe94ce6716e0184048f6?s=128&d=identicon&r=PG", "display_name": "Farhad", "link": "https://stackoverflow.com/users/3525451/farhad"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521099776, "post_id": 49289270, "comment_id": 85590047, "body": "@user3629249 I&#39;m using <code>clang -O0 -S -emit-llvm trainingCode.cpp -o trainingCode.ll</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "is_accepted": false, "score": 1, "last_activity_date": 1521207897, "creation_date": 1521207897, "answer_id": 49322269, "question_id": 49289270, "link": "https://stackoverflow.com/questions/49289270/why-is-llvm-completely-unrolling-my-loops/49322269#49322269", "title": "Why is LLVM completely unrolling my loops?", "body": "<p>LLVM has different heuristics for determining whether to unroll and whether to unroll fully, because unrolling a loop fully is often more beneficial than unrolling it partially, particularly if the trip count is fixed and known at compile time, because then all the checks and branches can be eliminated.</p>\n\n<p>My quick search only turned up the <a href=\"http://llvm.org/doxygen/LoopUnrollPass_8cpp_source.html\" rel=\"nofollow noreferrer\">source code</a> and not the documentation, \nbut I think full unrolling is limited by a different setting: <code>-unroll-full-max-count</code>.</p>\n"}], "owner": {"reputation": 516, "user_id": 3525451, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/9a48eae41cfabe94ce6716e0184048f6?s=128&d=identicon&r=PG", "display_name": "Farhad", "link": "https://stackoverflow.com/users/3525451/farhad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521207897, "creation_date": 1521070494, "question_id": 49289270, "link": "https://stackoverflow.com/questions/49289270/why-is-llvm-completely-unrolling-my-loops", "title": "Why is LLVM completely unrolling my loops?", "body": "<p>I have a piece of code that I want to unroll by various unroll factors and then look at the resulting bitcode. To do so I'm doing the following:</p>\n\n<p>1) I first compile the code using clang:</p>\n\n<pre><code>clang -O0 -S -emit-llvm trainingCode.cpp -o trainingCode.ll\n</code></pre>\n\n<p>2) I then run a couple of passes on the resulting bitcode (as recommended by <a href=\"https://stackoverflow.com/questions/31340251/llvm-unable-to-unroll-loops-cant-unroll-loop-not-terminated-by-a-conditional\">this</a>):</p>\n\n<pre><code>opt -mem2reg -simplifycfg -loops -lcssa -loop-simplify -loop-rotate -inline -inline-threshold=1000000 trainingCode.ll -o trainingCode.bc &gt; /dev/null\n</code></pre>\n\n<p>3) Finally, I run the unrolling pass:</p>\n\n<pre><code>opt -loop-unroll -unroll-count=2 -unroll-allow-partial trainingCode.bc -o unrolledTrainingCode.bc &gt; /dev/null\n</code></pre>\n\n<p>I then repeat this with various unroll factors from 1 to 4.</p>\n\n<p>For a simple piece of code like the following, this works <em>exactly</em> like I need it to:</p>\n\n<pre><code>#include &lt;math.h&gt;\nint main() {\n    volatile float checksum = 0.0;\n    for (int i = 0; i &lt; 10; i++) {\n        float fff = 0.112345; \n\n        fff *= fff;\n        fff += 1.13;\n\n        checksum += fff/10000;\n    }\n}\n</code></pre>\n\n<p>But I get really weird behavior when I increase the complexity/size of the body to this for instance:</p>\n\n<pre><code>#include &lt;math.h&gt;\nint main() {\n    volatile float checksum = 0.0;\n    for (int i = 0; i &lt; 10; i++) {\n        float fff = 0.112345; \n\n        fff *= sqrt(fff) + fff;\n        fff += 1.13;\n        fff *= sqrt(fff) + fff;\n        fff += 17.16; \n        fff *= sqrt(fff) + fff;\n        fff += 15.13; \n        fff *= sqrt(fff) + fff;\n        fff += 21.13; \n        fff *= sqrt(fff) + fff;\n        fff += 81.13; \n        fff *= sqrt(fff) + fff;\n        fff += 11.13; \n        fff *= sqrt(fff) + fff;\n        fff += 81.13; \n        fff *= sqrt(fff) + fff;\n        fff += 11.13; \n        fff *= sqrt(fff) + fff;\n        fff += 91.13; \n        fff *= sqrt(fff) + fff;\n        fff += 11.13; \n\n        checksum += (fff + i)/10000;\n    }\n}\n</code></pre>\n\n<p>For unroll factors of 1-2, everything works fine, but if I try to unroll using a factor greater than 2, LLVM <em>completely</em> unrolls the loop. This happens for <em>any</em> loop with sufficiently large of a body. For instance, this is (an excerpt) of the resulting bitcode of using any unroll factor greater than 2 for the code directly above:</p>\n\n<pre><code>; ModuleID = 'unrolledtrainingCode3.bc'\nsource_filename = \"p1HighComplexity.cpp\"\ntarget datalayout = \"e-m:e-i64:64-f80:128-n8:16:32:64-S128\"\ntarget triple = \"x86_64-unknown-linux-gnu\"\n\n; Function Attrs: norecurse uwtable\ndefine i32 @main() #0 {\nentry:\n  %checksum = alloca float, align 4\n  store volatile float 0.000000e+00, float* %checksum, align 4\n  br label %for.body\n\nfor.body:                                         ; preds = %entry\n  %call.i = call float @sqrtf(float 0x3FBCC2A460000000) #2\n  %add = fadd float %call.i, 0x3FBCC2A460000000\n  %mul = fmul float 0x3FBCC2A460000000, %add\n  %conv = fpext float %mul to double\n  %add1 = fadd double %conv, 1.130000e+00\n  %conv2 = fptrunc double %add1 to float\n  %call.i2 = call float @sqrtf(float %conv2) #2\n  %add4 = fadd float %call.i2, %conv2\n  %mul5 = fmul float %conv2, %add4\n  %conv6 = fpext float %mul5 to double\n  %add7 = fadd double %conv6, 1.716000e+01\n  %conv8 = fptrunc double %add7 to float\n  %call.i3 = call float @sqrtf(float %conv8) #2\n  %add10 = fadd float %call.i3, %conv8\n  %mul11 = fmul float %conv8, %add10\n  %conv12 = fpext float %mul11 to double\n  %add13 = fadd double %conv12, 1.513000e+01\n  %conv14 = fptrunc double %add13 to float\n  %call.i4 = call float @sqrtf(float %conv14) #2\n  %add16 = fadd float %call.i4, %conv14\n  %mul17 = fmul float %conv14, %add16\n  %conv18 = fpext float %mul17 to double\n  %add19 = fadd double %conv18, 2.113000e+01\n  %conv20 = fptrunc double %add19 to float\n  %call.i5 = call float @sqrtf(float %conv20) #2\n  %add22 = fadd float %call.i5, %conv20\n  %mul23 = fmul float %conv20, %add22\n  %conv24 = fpext float %mul23 to double\n  %add25 = fadd double %conv24, 0x40544851EB851EB8\n  %conv26 = fptrunc double %add25 to float\n  %call.i6 = call float @sqrtf(float %conv26) #2\n  %add28 = fadd float %call.i6, %conv26\n  %mul29 = fmul float %conv26, %add28\n  %conv30 = fpext float %mul29 to double\n  %add31 = fadd double %conv30, 1.113000e+01\n  %conv32 = fptrunc double %add31 to float\n  %call.i7 = call float @sqrtf(float %conv32) #2\n  %add34 = fadd float %call.i7, %conv32\n  %mul35 = fmul float %conv32, %add34\n  %conv36 = fpext float %mul35 to double\n  %add37 = fadd double %conv36, 0x40544851EB851EB8\n  %conv38 = fptrunc double %add37 to float\n  %call.i8 = call float @sqrtf(float %conv38) #2\n  %add40 = fadd float %call.i8, %conv38\n  %mul41 = fmul float %conv38, %add40\n  %conv42 = fpext float %mul41 to double\n  %add43 = fadd double %conv42, 1.113000e+01\n  %conv44 = fptrunc double %add43 to float\n  %call.i9 = call float @sqrtf(float %conv44) #2\n  %add46 = fadd float %call.i9, %conv44\n  %mul47 = fmul float %conv44, %add46\n  %conv48 = fpext float %mul47 to double\n  %add49 = fadd double %conv48, 0x4056C851EB851EB8\n  %conv50 = fptrunc double %add49 to float\n  %call.i10 = call float @sqrtf(float %conv50) #2\n  %add52 = fadd float %call.i10, %conv50\n  %mul53 = fmul float %conv50, %add52\n  %conv54 = fpext float %mul53 to double\n  %add55 = fadd double %conv54, 1.113000e+01\n  %conv56 = fptrunc double %add55 to float\n  %div = fdiv float %conv56, 1.000000e+04\n  %0 = load volatile float, float* %checksum, align 4\n  %add57 = fadd float %0, %div\n  store volatile float %add57, float* %checksum, align 4\n  %call.i.1 = call float @sqrtf(float 0x3FBCC2A460000000) #2\n  %add.1 = fadd float %call.i.1, 0x3FBCC2A460000000\n  %mul.1 = fmul float 0x3FBCC2A460000000, %add.1\n  %conv.1 = fpext float %mul.1 to double\n  %add1.1 = fadd double %conv.1, 1.130000e+00\n  %conv2.1 = fptrunc double %add1.1 to float\n  %call.i2.1 = call float @sqrtf(float %conv2.1) #2\n  %add4.1 = fadd float %call.i2.1, %conv2.1\n  %mul5.1 = fmul float %conv2.1, %add4.1\n  %conv6.1 = fpext float %mul5.1 to double\n  %add7.1 = fadd double %conv6.1, 1.716000e+01\n  %conv8.1 = fptrunc double %add7.1 to float\n  %call.i3.1 = call float @sqrtf(float %conv8.1) #2\n  %add10.1 = fadd float %call.i3.1, %conv8.1\n  %mul11.1 = fmul float %conv8.1, %add10.1\n  %conv12.1 = fpext float %mul11.1 to double\n  %add13.1 = fadd double %conv12.1, 1.513000e+01\n  %conv14.1 = fptrunc double %add13.1 to float\n  %call.i4.1 = call float @sqrtf(float %conv14.1) #2\n  %add16.1 = fadd float %call.i4.1, %conv14.1\n  %mul17.1 = fmul float %conv14.1, %add16.1\n  %conv18.1 = fpext float %mul17.1 to double\n  %add19.1 = fadd double %conv18.1, 2.113000e+01\n  %conv20.1 = fptrunc double %add19.1 to float\n  %call.i5.1 = call float @sqrtf(float %conv20.1) #2\n  %add22.1 = fadd float %call.i5.1, %conv20.1\n  %mul23.1 = fmul float %conv20.1, %add22.1\n  %conv24.1 = fpext float %mul23.1 to double\n  %add25.1 = fadd double %conv24.1, 0x40544851EB851EB8\n  %conv26.1 = fptrunc double %add25.1 to float\n  %call.i6.1 = call float @sqrtf(float %conv26.1) #2\n  %add28.1 = fadd float %call.i6.1, %conv26.1\n  %mul29.1 = fmul float %conv26.1, %add28.1\n  %conv30.1 = fpext float %mul29.1 to double\n  %add31.1 = fadd double %conv30.1, 1.113000e+01\n  %conv32.1 = fptrunc double %add31.1 to float\n  %call.i7.1 = call float @sqrtf(float %conv32.1) #2\n  %add34.1 = fadd float %call.i7.1, %conv32.1\n  %mul35.1 = fmul float %conv32.1, %add34.1\n  %conv36.1 = fpext float %mul35.1 to double\n  %add37.1 = fadd double %conv36.1, 0x40544851EB851EB8\n  %conv38.1 = fptrunc double %add37.1 to float\n  %call.i8.1 = call float @sqrtf(float %conv38.1) #2\n  %add40.1 = fadd float %call.i8.1, %conv38.1\n  %mul41.1 = fmul float %conv38.1, %add40.1\n  %conv42.1 = fpext float %mul41.1 to double\n  %add43.1 = fadd double %conv42.1, 1.113000e+01\n  %conv44.1 = fptrunc double %add43.1 to float\n  %call.i9.1 = call float @sqrtf(float %conv44.1) #2\n  %add46.1 = fadd float %call.i9.1, %conv44.1\n  %mul47.1 = fmul float %conv44.1, %add46.1\n  %conv48.1 = fpext float %mul47.1 to double\n  %add49.1 = fadd double %conv48.1, 0x4056C851EB851EB8\n  %conv50.1 = fptrunc double %add49.1 to float\n  %call.i10.1 = call float @sqrtf(float %conv50.1) #2\n  %add52.1 = fadd float %call.i10.1, %conv50.1\n  %mul53.1 = fmul float %conv50.1, %add52.1\n  %conv54.1 = fpext float %mul53.1 to double\n  %add55.1 = fadd double %conv54.1, 1.113000e+01\n  %conv56.1 = fptrunc double %add55.1 to float\n  %div.1 = fdiv float %conv56.1, 1.000000e+04\n  %1 = load volatile float, float* %checksum, align 4\n  %add57.1 = fadd float %1, %div.1\n  store volatile float %add57.1, float* %checksum, align 4\n  %call.i.2 = call float @sqrtf(float 0x3FBCC2A460000000) #2\n  %add.2 = fadd float %call.i.2, 0x3FBCC2A460000000\n  %mul.2 = fmul float 0x3FBCC2A460000000, %add.2\n  %conv.2 = fpext float %mul.2 to double\n  %add1.2 = fadd double %conv.2, 1.130000e+00\n  %conv2.2 = fptrunc double %add1.2 to float\n  %call.i2.2 = call float @sqrtf(float %conv2.2) #2\n  %add4.2 = fadd float %call.i2.2, %conv2.2\n  %mul5.2 = fmul float %conv2.2, %add4.2\n  %conv6.2 = fpext float %mul5.2 to double\n  %add7.2 = fadd double %conv6.2, 1.716000e+01\n  %conv8.2 = fptrunc double %add7.2 to float\n  %call.i3.2 = call float @sqrtf(float %conv8.2) #2\n  %add10.2 = fadd float %call.i3.2, %conv8.2\n  %mul11.2 = fmul float %conv8.2, %add10.2\n  %conv12.2 = fpext float %mul11.2 to double\n  %add13.2 = fadd double %conv12.2, 1.513000e+01\n  %conv14.2 = fptrunc double %add13.2 to float\n  %call.i4.2 = call float @sqrtf(float %conv14.2) #2\n  %add16.2 = fadd float %call.i4.2, %conv14.2\n  %mul17.2 = fmul float %conv14.2, %add16.2\n  %conv18.2 = fpext float %mul17.2 to double\n  %add19.2 = fadd double %conv18.2, 2.113000e+01\n  %conv20.2 = fptrunc double %add19.2 to float\n  %call.i5.2 = call float @sqrtf(float %conv20.2) #2\n  %add22.2 = fadd float %call.i5.2, %conv20.2\n  %mul23.2 = fmul float %conv20.2, %add22.2\n  %conv24.2 = fpext float %mul23.2 to double\n  %add25.2 = fadd double %conv24.2, 0x40544851EB851EB8\n  %conv26.2 = fptrunc double %add25.2 to float\n  %call.i6.2 = call float @sqrtf(float %conv26.2) #2\n  %add28.2 = fadd float %call.i6.2, %conv26.2\n  %mul29.2 = fmul float %conv26.2, %add28.2\n  %conv30.2 = fpext float %mul29.2 to double\n  %add31.2 = fadd double %conv30.2, 1.113000e+01\n  %conv32.2 = fptrunc double %add31.2 to float\n  %call.i7.2 = call float @sqrtf(float %conv32.2) #2\n  %add34.2 = fadd float %call.i7.2, %conv32.2\n  %mul35.2 = fmul float %conv32.2, %add34.2\n  %conv36.2 = fpext float %mul35.2 to double\n  %add37.2 = fadd double %conv36.2, 0x40544851EB851EB8\n  %conv38.2 = fptrunc double %add37.2 to float\n  %call.i8.2 = call float @sqrtf(float %conv38.2) #2\n  %add40.2 = fadd float %call.i8.2, %conv38.2\n  %mul41.2 = fmul float %conv38.2, %add40.2\n  %conv42.2 = fpext float %mul41.2 to double\n  %add43.2 = fadd double %conv42.2, 1.113000e+01\n  %conv44.2 = fptrunc double %add43.2 to float\n  %call.i9.2 = call float @sqrtf(float %conv44.2) #2\n  %add46.2 = fadd float %call.i9.2, %conv44.2\n  %mul47.2 = fmul float %conv44.2, %add46.2\n  %conv48.2 = fpext float %mul47.2 to double\n  %add49.2 = fadd double %conv48.2, 0x4056C851EB851EB8\n  %conv50.2 = fptrunc double %add49.2 to float\n  %call.i10.2 = call float @sqrtf(float %conv50.2) #2\n  %add52.2 = fadd float %call.i10.2, %conv50.2\n  %mul53.2 = fmul float %conv50.2, %add52.2\n  %conv54.2 = fpext float %mul53.2 to double\n  %add55.2 = fadd double %conv54.2, 1.113000e+01\n  %conv56.2 = fptrunc double %add55.2 to float\n  %div.2 = fdiv float %conv56.2, 1.000000e+04\n  %2 = load volatile float, float* %checksum, align 4\n  %add57.2 = fadd float %2, %div.2\n  store volatile float %add57.2, float* %checksum, align 4\n  %call.i.3 = call float @sqrtf(float 0x3FBCC2A460000000) #2\n  %add.3 = fadd float %call.i.3, 0x3FBCC2A460000000\n  %mul.3 = fmul float 0x3FBCC2A460000000, %add.3\n  %conv.3 = fpext float %mul.3 to double\n  %add1.3 = fadd double %conv.3, 1.130000e+00\n  %conv2.3 = fptrunc double %add1.3 to float\n  %call.i2.3 = call float @sqrtf(float %conv2.3) #2\n  %add4.3 = fadd float %call.i2.3, %conv2.3\n  %mul5.3 = fmul float %conv2.3, %add4.3\n  %conv6.3 = fpext float %mul5.3 to double\n  %add7.3 = fadd double %conv6.3, 1.716000e+01\n  %conv8.3 = fptrunc double %add7.3 to float\n  %call.i3.3 = call float @sqrtf(float %conv8.3) #2\n  %add10.3 = fadd float %call.i3.3, %conv8.3\n  %mul11.3 = fmul float %conv8.3, %add10.3\n  %conv12.3 = fpext float %mul11.3 to double\n  %add13.3 = fadd double %conv12.3, 1.513000e+01\n  %conv14.3 = fptrunc double %add13.3 to float\n  %call.i4.3 = call float @sqrtf(float %conv14.3) #2\n  %add16.3 = fadd float %call.i4.3, %conv14.3\n  %mul17.3 = fmul float %conv14.3, %add16.3\n  %conv18.3 = fpext float %mul17.3 to double\n  %add19.3 = fadd double %conv18.3, 2.113000e+01\n  %conv20.3 = fptrunc double %add19.3 to float\n  %call.i5.3 = call float @sqrtf(float %conv20.3) #2\n  %add22.3 = fadd float %call.i5.3, %conv20.3\n  %mul23.3 = fmul float %conv20.3, %add22.3\n  %conv24.3 = fpext float %mul23.3 to double\n  %add25.3 = fadd double %conv24.3, 0x40544851EB851EB8\n  %conv26.3 = fptrunc double %add25.3 to float\n  %call.i6.3 = call float @sqrtf(float %conv26.3) #2\n  %add28.3 = fadd float %call.i6.3, %conv26.3\n  %mul29.3 = fmul float %conv26.3, %add28.3\n  %conv30.3 = fpext float %mul29.3 to double\n  %add31.3 = fadd double %conv30.3, 1.113000e+01\n  %conv32.3 = fptrunc double %add31.3 to float\n  %call.i7.3 = call float @sqrtf(float %conv32.3) #2\n  %add34.3 = fadd float %call.i7.3, %conv32.3\n  %mul35.3 = fmul float %conv32.3, %add34.3\n  %conv36.3 = fpext float %mul35.3 to double\n  %add37.3 = fadd double %conv36.3, 0x40544851EB851EB8\n  %conv38.3 = fptrunc double %add37.3 to float\n  %call.i8.3 = call float @sqrtf(float %conv38.3) #2\n  %add40.3 = fadd float %call.i8.3, %conv38.3\n  %mul41.3 = fmul float %conv38.3, %add40.3\n  %conv42.3 = fpext float %mul41.3 to double\n  %add43.3 = fadd double %conv42.3, 1.113000e+01\n  %conv44.3 = fptrunc double %add43.3 to float\n  %call.i9.3 = call float @sqrtf(float %conv44.3) #2\n  %add46.3 = fadd float %call.i9.3, %conv44.3\n  %mul47.3 = fmul float %conv44.3, %add46.3\n  %conv48.3 = fpext float %mul47.3 to double\n  %add49.3 = fadd double %conv48.3, 0x4056C851EB851EB8\n  %conv50.3 = fptrunc double %add49.3 to float\n  %call.i10.3 = call float @sqrtf(float %conv50.3) #2\n  %add52.3 = fadd float %call.i10.3, %conv50.3\n  %mul53.3 = fmul float %conv50.3, %add52.3\n  %conv54.3 = fpext float %mul53.3 to double\n  %add55.3 = fadd double %conv54.3, 1.113000e+01\n  %conv56.3 = fptrunc double %add55.3 to float\n  %div.3 = fdiv float %conv56.3, 1.000000e+04\n  %3 = load volatile float, float* %checksum, align 4\n  %add57.3 = fadd float %3, %div.3\n  store volatile float %add57.3, float* %checksum, align 4\n  %call.i.4 = call float @sqrtf(float 0x3FBCC2A460000000) #2\n  %add.4 = fadd float %call.i.4, 0x3FBCC2A460000000\n  %mul.4 = fmul float 0x3FBCC2A460000000, %add.4\n  %conv.4 = fpext float %mul.4 to double\n  %add1.4 = fadd double %conv.4, 1.130000e+00\n  %conv2.4 = fptrunc double %add1.4 to float\n  %call.i2.4 = call float @sqrtf(float %conv2.4) #2\n  %add4.4 = fadd float %call.i2.4, %conv2.4\n  %mul5.4 = fmul float %conv2.4, %add4.4\n  %conv6.4 = fpext float %mul5.4 to double\n  %add7.4 = fadd double %conv6.4, 1.716000e+01\n  %conv8.4 = fptrunc double %add7.4 to float\n  %call.i3.4 = call float @sqrtf(float %conv8.4) #2\n  %add10.4 = fadd float %call.i3.4, %conv8.4\n  %mul11.4 = fmul float %conv8.4, %add10.4\n  %conv12.4 = fpext float %mul11.4 to double\n  %add13.4 = fadd double %conv12.4, 1.513000e+01\n  %conv14.4 = fptrunc double %add13.4 to float\n  %call.i4.4 = call float @sqrtf(float %conv14.4) #2\n  %add16.4 = fadd float %call.i4.4, %conv14.4\n  %mul17.4 = fmul float %conv14.4, %add16.4\n  %conv18.4 = fpext float %mul17.4 to double\n  %add19.4 = fadd double %conv18.4, 2.113000e+01\n  %conv20.4 = fptrunc double %add19.4 to float\n  %call.i5.4 = call float @sqrtf(float %conv20.4) #2\n  %add22.4 = fadd float %call.i5.4, %conv20.4\n  %mul23.4 = fmul float %conv20.4, %add22.4\n  %conv24.4 = fpext float %mul23.4 to double\n  %add25.4 = fadd double %conv24.4, 0x40544851EB851EB8\n  %conv26.4 = fptrunc double %add25.4 to float\n  %call.i6.4 = call float @sqrtf(float %conv26.4) #2\n  %add28.4 = fadd float %call.i6.4, %conv26.4\n  %mul29.4 = fmul float %conv26.4, %add28.4\n  %conv30.4 = fpext float %mul29.4 to double\n  %add31.4 = fadd double %conv30.4, 1.113000e+01\n  %conv32.4 = fptrunc double %add31.4 to float\n  %call.i7.4 = call float @sqrtf(float %conv32.4) #2\n  %add34.4 = fadd float %call.i7.4, %conv32.4\n  %mul35.4 = fmul float %conv32.4, %add34.4\n  %conv36.4 = fpext float %mul35.4 to double\n  %add37.4 = fadd double %conv36.4, 0x40544851EB851EB8\n  %conv38.4 = fptrunc double %add37.4 to float\n  %call.i8.4 = call float @sqrtf(float %conv38.4) #2\n  %add40.4 = fadd float %call.i8.4, %conv38.4\n  %mul41.4 = fmul float %conv38.4, %add40.4\n  %conv42.4 = fpext float %mul41.4 to double\n  %add43.4 = fadd double %conv42.4, 1.113000e+01\n  %conv44.4 = fptrunc double %add43.4 to float\n  %call.i9.4 = call float @sqrtf(float %conv44.4) #2\n  %add46.4 = fadd float %call.i9.4, %conv44.4\n  %mul47.4 = fmul float %conv44.4, %add46.4\n  %conv48.4 = fpext float %mul47.4 to double\n  %add49.4 = fadd double %conv48.4, 0x4056C851EB851EB8\n  %conv50.4 = fptrunc double %add49.4 to float\n  %call.i10.4 = call float @sqrtf(float %conv50.4) #2\n  %add52.4 = fadd float %call.i10.4, %conv50.4\n  %mul53.4 = fmul float %conv50.4, %add52.4\n  %conv54.4 = fpext float %mul53.4 to double\n  %add55.4 = fadd double %conv54.4, 1.113000e+01\n  %conv56.4 = fptrunc double %add55.4 to float\n  %div.4 = fdiv float %conv56.4, 1.000000e+04\n  %4 = load volatile float, float* %checksum, align 4\n  %add57.4 = fadd float %4, %div.4\n  store volatile float %add57.4, float* %checksum, align 4\n  %call.i.5 = call float @sqrtf(float 0x3FBCC2A460000000) #2\n  %add.5 = fadd float %call.i.5, 0x3FBCC2A460000000\n  %mul.5 = fmul float 0x3FBCC2A460000000, %add.5\n  %conv.5 = fpext float %mul.5 to double\n  %add1.5 = fadd double %conv.5, 1.130000e+00\n  %conv2.5 = fptrunc double %add1.5 to float\n  %call.i2.5 = call float @sqrtf(float %conv2.5) #2\n  %add4.5 = fadd float %call.i2.5, %conv2.5\n  %mul5.5 = fmul float %conv2.5, %add4.5\n  %conv6.5 = fpext float %mul5.5 to double\n  %add7.5 = fadd double %conv6.5, 1.716000e+01\n  %conv8.5 = fptrunc double %add7.5 to float\n  %call.i3.5 = call float @sqrtf(float %conv8.5) #2\n  %add10.5 = fadd float %call.i3.5, %conv8.5\n  %mul11.5 = fmul float %conv8.5, %add10.5\n  %conv12.5 = fpext float %mul11.5 to double\n  %add13.5 = fadd double %conv12.5, 1.513000e+01\n  %conv14.5 = fptrunc double %add13.5 to float\n  %call.i4.5 = call float @sqrtf(float %conv14.5) #2\n  %add16.5 = fadd float %call.i4.5, %conv14.5\n  %mul17.5 = fmul float %conv14.5, %add16.5\n  %conv18.5 = fpext float %mul17.5 to double\n  %add19.5 = fadd double %conv18.5, 2.113000e+01\n  %conv20.5 = fptrunc double %add19.5 to float\n  %call.i5.5 = call float @sqrtf(float %conv20.5) #2\n  %add22.5 = fadd float %call.i5.5, %conv20.5\n  %mul23.5 = fmul float %conv20.5, %add22.5\n  %conv24.5 = fpext float %mul23.5 to double\n  %add25.5 = fadd double %conv24.5, 0x40544851EB851EB8\n  %conv26.5 = fptrunc double %add25.5 to float\n  %call.i6.5 = call float @sqrtf(float %conv26.5) #2\n  %add28.5 = fadd float %call.i6.5, %conv26.5\n  %mul29.5 = fmul float %conv26.5, %add28.5\n  %conv30.5 = fpext float %mul29.5 to double\n  %add31.5 = fadd double %conv30.5, 1.113000e+01\n  %conv32.5 = fptrunc double %add31.5 to float\n  %call.i7.5 = call float @sqrtf(float %conv32.5) #2\n  %add34.5 = fadd float %call.i7.5, %conv32.5\n  %mul35.5 = fmul float %conv32.5, %add34.5\n  %conv36.5 = fpext float %mul35.5 to double\n  %add37.5 = fadd double %conv36.5, 0x40544851EB851EB8\n  %conv38.5 = fptrunc double %add37.5 to float\n  %call.i8.5 = call float @sqrtf(float %conv38.5) #2\n  %add40.5 = fadd float %call.i8.5, %conv38.5\n  %mul41.5 = fmul float %conv38.5, %add40.5\n  %conv42.5 = fpext float %mul41.5 to double\n  %add43.5 = fadd double %conv42.5, 1.113000e+01\n  %conv44.5 = fptrunc double %add43.5 to float\n  %call.i9.5 = call float @sqrtf(float %conv44.5) #2\n  %add46.5 = fadd float %call.i9.5, %conv44.5\n  %mul47.5 = fmul float %conv44.5, %add46.5\n  %conv48.5 = fpext float %mul47.5 to double\n  %add49.5 = fadd double %conv48.5, 0x4056C851EB851EB8\n  %conv50.5 = fptrunc double %add49.5 to float\n  %call.i10.5 = call float @sqrtf(float %conv50.5) #2\n  %add52.5 = fadd float %call.i10.5, %conv50.5\n  %mul53.5 = fmul float %conv50.5, %add52.5\n  %conv54.5 = fpext float %mul53.5 to double\n  %add55.5 = fadd double %conv54.5, 1.113000e+01\n  %conv56.5 = fptrunc double %add55.5 to float\n  %div.5 = fdiv float %conv56.5, 1.000000e+04\n  %5 = load volatile float, float* %checksum, align 4\n  %add57.5 = fadd float %5, %div.5\n  store volatile float %add57.5, float* %checksum, align 4\n  %call.i.6 = call float @sqrtf(float 0x3FBCC2A460000000) #2\n  %add.6 = fadd float %call.i.6, 0x3FBCC2A460000000\n  %mul.6 = fmul float 0x3FBCC2A460000000, %add.6\n  %conv.6 = fpext float %mul.6 to double\n  %add1.6 = fadd double %conv.6, 1.130000e+00\n  %conv2.6 = fptrunc double %add1.6 to float\n  %call.i2.6 = call float @sqrtf(float %conv2.6) #2\n  %add4.6 = fadd float %call.i2.6, %conv2.6\n  %mul5.6 = fmul float %conv2.6, %add4.6\n  %conv6.6 = fpext float %mul5.6 to double\n  %add7.6 = fadd double %conv6.6, 1.716000e+01\n  %conv8.6 = fptrunc double %add7.6 to float\n  %call.i3.6 = call float @sqrtf(float %conv8.6) #2\n  %add10.6 = fadd float %call.i3.6, %conv8.6\n  %mul11.6 = fmul float %conv8.6, %add10.6\n  %conv12.6 = fpext float %mul11.6 to double\n  %add13.6 = fadd double %conv12.6, 1.513000e+01\n  %conv14.6 = fptrunc double %add13.6 to float\n  %call.i4.6 = call float @sqrtf(float %conv14.6) #2\n  %add16.6 = fadd float %call.i4.6, %conv14.6\n  %mul17.6 = fmul float %conv14.6, %add16.6\n  %conv18.6 = fpext float %mul17.6 to double\n  %add19.6 = fadd double %conv18.6, 2.113000e+01\n  %conv20.6 = fptrunc double %add19.6 to float\n  %call.i5.6 = call float @sqrtf(float %conv20.6) #2\n  %add22.6 = fadd float %call.i5.6, %conv20.6\n  %mul23.6 = fmul float %conv20.6, %add22.6\n  %conv24.6 = fpext float %mul23.6 to double\n  %add25.6 = fadd double %conv24.6, 0x40544851EB851EB8\n  %conv26.6 = fptrunc double %add25.6 to float\n  %call.i6.6 = call float @sqrtf(float %conv26.6) #2\n  %add28.6 = fadd float %call.i6.6, %conv26.6\n  %mul29.6 = fmul float %conv26.6, %add28.6\n  %conv30.6 = fpext float %mul29.6 to double\n  %add31.6 = fadd double %conv30.6, 1.113000e+01\n  %conv32.6 = fptrunc double %add31.6 to float\n  %call.i7.6 = call float @sqrtf(float %conv32.6) #2\n  %add34.6 = fadd float %call.i7.6, %conv32.6\n  %mul35.6 = fmul float %conv32.6, %add34.6\n  %conv36.6 = fpext float %mul35.6 to double\n  %add37.6 = fadd double %conv36.6, 0x40544851EB851EB8\n  %conv38.6 = fptrunc double %add37.6 to float\n  %call.i8.6 = call float @sqrtf(float %conv38.6) #2\n  %add40.6 = fadd float %call.i8.6, %conv38.6\n  %mul41.6 = fmul float %conv38.6, %add40.6\n  %conv42.6 = fpext float %mul41.6 to double\n  %add43.6 = fadd double %conv42.6, 1.113000e+01\n  %conv44.6 = fptrunc double %add43.6 to float\n  %call.i9.6 = call float @sqrtf(float %conv44.6) #2\n  %add46.6 = fadd float %call.i9.6, %conv44.6\n  %mul47.6 = fmul float %conv44.6, %add46.6\n  %conv48.6 = fpext float %mul47.6 to double\n  %add49.6 = fadd double %conv48.6, 0x4056C851EB851EB8\n  %conv50.6 = fptrunc double %add49.6 to float\n  %call.i10.6 = call float @sqrtf(float %conv50.6) #2\n  %add52.6 = fadd float %call.i10.6, %conv50.6\n  %mul53.6 = fmul float %conv50.6, %add52.6\n  %conv54.6 = fpext float %mul53.6 to double\n  %add55.6 = fadd double %conv54.6, 1.113000e+01\n  %conv56.6 = fptrunc double %add55.6 to float\n  %div.6 = fdiv float %conv56.6, 1.000000e+04\n  %6 = load volatile float, float* %checksum, align 4\n  %add57.6 = fadd float %6, %div.6\n</code></pre>\n\n<p>As you can see, the loop was <em>fully</em> unrolled, despite me specifying an unroll factor of 3. I was hoping someone would have some insight into why this was happening...</p>\n"}, {"tags": ["c", "string", "time-complexity", "big-o", "complexity-theory"], "answers": [{"comments": [{"owner": {"reputation": 3565, "user_id": 257636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3a9a5b630b21e6c8808a4aabddc987c?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/257636/george"}, "edited": false, "score": 0, "creation_date": 1521069370, "post_id": 49289091, "comment_id": 85581360, "body": "This does not take into account the outer while loop. How does this affect the time complexity?"}, {"owner": {"reputation": 953, "user_id": 5854343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/erVBq.jpg?s=128&g=1", "display_name": "Bobby Durrett", "link": "https://stackoverflow.com/users/5854343/bobby-durrett"}, "reply_to_user": {"reputation": 3565, "user_id": 257636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3a9a5b630b21e6c8808a4aabddc987c?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/257636/george"}, "edited": false, "score": 0, "creation_date": 1521069446, "post_id": 49289091, "comment_id": 85581383, "body": "I don&#39;t think it is an outer loop. It just calculates size so it is O(n) which is less than O(n^2*L)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 3565, "user_id": 257636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3a9a5b630b21e6c8808a4aabddc987c?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/257636/george"}, "edited": false, "score": 0, "creation_date": 1521069459, "post_id": 49289091, "comment_id": 85581390, "body": "@George the <code>while</code> loop is not an &quot;outer loop&quot;. My first deleted comemnt was fooled by the poor indentation."}, {"owner": {"reputation": 953, "user_id": 5854343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/erVBq.jpg?s=128&g=1", "display_name": "Bobby Durrett", "link": "https://stackoverflow.com/users/5854343/bobby-durrett"}, "edited": false, "score": 0, "creation_date": 1521069485, "post_id": 49289091, "comment_id": 85581400, "body": "This is why we need Python. :)"}, {"owner": {"reputation": 3565, "user_id": 257636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3a9a5b630b21e6c8808a4aabddc987c?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/257636/george"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1521071384, "post_id": 49289091, "comment_id": 85581951, "body": "@WeatherVane that is correct, I missed that. It looked like size++ and the for loops are both inside of the while loop."}], "tags": [], "owner": {"reputation": 953, "user_id": 5854343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/erVBq.jpg?s=128&g=1", "display_name": "Bobby Durrett", "link": "https://stackoverflow.com/users/5854343/bobby-durrett"}, "is_accepted": true, "score": 1, "last_activity_date": 1521069401, "last_edit_date": 1521069401, "creation_date": 1521069322, "answer_id": 49289091, "question_id": 49289047, "link": "https://stackoverflow.com/questions/49289047/time-complexity-of-this-function-including-array-of-strings/49289091#49289091", "title": "Time complexity of this function /including array of strings", "body": "<p>Looks like n = size which is the number of strings in the array. You have two loops and that makes it O(n^2). But the comparison of strings is O(L). So, you get O(n^2*L). I think you already figured it out. The strcmp is O(L).</p>\n\n<p>Bobby</p>\n"}], "owner": {"reputation": 393, "user_id": 6399127, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/284c279ef66682bb64409ea3e0d89d18?s=128&d=identicon&r=PG&f=1", "display_name": "sam0101", "link": "https://stackoverflow.com/users/6399127/sam0101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 49289091, "answer_count": 1, "score": 0, "last_activity_date": 1521071507, "creation_date": 1521068935, "last_edit_date": 1521071507, "question_id": 49289047, "link": "https://stackoverflow.com/questions/49289047/time-complexity-of-this-function-including-array-of-strings", "title": "Time complexity of this function /including array of strings", "body": "<p>Why is the time complexity of this function O((n^2)*L)(L- the length of maximum string) and not O(n^2)? It seems that strcmp is playing something here but don't know what.</p>\n\n<pre><code>void lex_sort(char *str_arr[]){\n int size = 0, i, j;\n while (str_arr[size] != NULL)\n   size++;\n for (i = 0; i &lt; size - 1; i++) {\n   for (j = i + 1; j &lt; size; j++) {\n    if (strcmp(str_arr[i], str_arr[j]) &gt; 0) {\n    // str_arr[i] is greater than str_arr[j]\n     char *temp = str_arr[i];\n     str_arr[i] = str_arr[j];\n     str_arr[j] = temp;\n    }\n   }\n  }\n }\n</code></pre>\n"}, {"tags": ["c", "printf", "fork"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1521068121, "post_id": 49288857, "comment_id": 85580995, "body": "The child doesn&#39;t exit in <code>print_pids()</code>, so it goes back to <code>main()</code> and opens the file, reads it, prints it, and then exits.  The parent does the same, but only after the child has died.  If you printed the PID of the process doing the print operations, you&#39;d be better informed.  The use of <code>write()</code> with fixed size buffers is worrying, too.  And there&#39;s no error checking."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 1, "creation_date": 1521068642, "post_id": 49288857, "comment_id": 85581147, "body": "open() should use 0700, not 700"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1521073014, "post_id": 49288857, "comment_id": 85582395, "body": "<code>void main()</code> should be <code>int main(void)</code>. If you have a C textbook that recomends <code>void main()</code>, please fling it against the nearest wall."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 3, "last_activity_date": 1521069474, "last_edit_date": 1521069474, "creation_date": 1521068164, "answer_id": 49288928, "question_id": 49288857, "link": "https://stackoverflow.com/questions/49288857/printf-prints-same-statement-twice/49288928#49288928", "title": "printf prints same statement twice", "body": "<p>The child doesn't exit in <code>print_pids()</code>, so it goes back to <code>main()</code> and opens the file, reads it, prints it, and then exits.  The parent does the same, but only after the child has died.  If you printed the PID of the process doing the print operations, you'd be better informed.</p>\n\n<p>The use of <code>write()</code> with fixed size buffers is worrying, too.  And there's no error checking.</p>\n\n<p>Here's a fixed version of your code \u2014 more relevant headers, calling <code>wait()</code> correctly (you're unlucky your code didn't crash), printing the extra diagnostic information, writing the full length of the messages, reading and printing the full length of the messages (even though there isn't a null terminator), using an octal number (<code>0600</code>) rather than a decimal number (<code>700</code>) for the permissions, etc.</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n\nstatic void print_pids(int fd, int n)\n{\n    int i, p;\n    char msg[99];\n\n    for (i = n; i &gt; 0; i--)\n    {\n        p = fork();\n        if (p &gt; 0)\n        {\n            sprintf(msg, \"My generation is 1. My pid is %d\\n\", getpid());\n            write(fd, msg, strlen(msg));\n            int status;\n            int corpse = wait(&amp;status);\n            printf(\"Child %d exited with status 0x%.4X\\n\", corpse, status);\n        }\n        if (p == 0)\n        {\n            sprintf(msg, \"My generation is 0. My pid is %d\\n\", getpid());\n            write(fd, msg, strlen(msg));\n        }\n        if (p &lt; 0)\n        {\n            printf(\"cannot fork\");\n            exit(0);\n        }\n    }\n}\n\nint main(void)\n{\n    int fd;\n    char buf[99];\n    fd = open(\"file.txt\", O_WRONLY|O_CREAT|O_TRUNC, 0600);\n    print_pids(fd, 1);\n    close(fd);\n    fd = open(\"file.txt\", O_RDONLY);\n    int nbytes = read(fd, buf, sizeof(buf));\n    printf(\"%.5d: %.*s\\n\", (int)getpid(), nbytes, buf);\n    close(fd);\n    return 0;\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>33115: My generation is 1. My pid is 33112\nMy generation is 0. My pid is 33115\n\nChild 33115 exited with status 0x0000\n33112: My generation is 1. My pid is 33112\nMy generation is 0. My pid is 33115\n</code></pre>\n\n<p>Notice how getting the full length of message helps you see what's going on.  Your messages were truncating the output, so you didn't see the full PIDs.  And both processes write into the file (about 72 characters in total).  (There could be some timing issues to alter what is seen \u2014 I got at least one anomalous result with only one of the 'My generation' messages in it, but I couldn't reproduce that reliably.)</p>\n"}], "owner": {"reputation": 93, "user_id": 7149744, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23933b226f4d1d68baef01e0a6b824d1?s=128&d=identicon&r=PG&f=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/7149744/guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 49288928, "answer_count": 1, "score": 2, "last_activity_date": 1521072964, "creation_date": 1521067752, "last_edit_date": 1521072964, "question_id": 49288857, "link": "https://stackoverflow.com/questions/49288857/printf-prints-same-statement-twice", "title": "printf prints same statement twice", "body": "<p>the next code supposed to write to \"file.txt\" the PID number and 1 for Parent process or 0 for child process.</p>\n\n<p>Im not sure if the code working as it should but im having a strange problem with Printf() that making trouble .\ni dont understand why, but printf prints the same statement twice.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n\n\nvoid print_pids(int fd,int n){\nint i,p;\nchar msg[99];\n\nfor(i=n;i&gt;0;i--){\n    p=fork();\n    if(p&gt;0){\n        sprintf(msg,\"My generation is 1.My pid is %d\\n\",getpid());\n        write(fd,msg,33);\n        wait();\n    }\n    if(p==0){\n        sprintf(msg,\"My generation is 0.My pid is %d\\n\",getpid());\n        write(fd,msg,33);\n    }\n    if(p&lt;0){\n        printf(\"cannot fork\");\n        exit(0);\n    }\n}\n\n\n}\n\nvoid main(){\n    int fd;\n    char buf[99];\n    fd=open(\"file.txt\",O_WRONLY,700);\n    print_pids(fd,1);\n    close(fd);\n    fd=open(\"file.txt\",O_RDONLY,700);\n    read(fd,buf,35);\n    printf(\" %s\\n\",buf);\n    close(fd);\n    return;\n\n\n}\n</code></pre>\n\n<p>instead of printing </p>\n\n<pre><code> My generation is 1.My pid is 8022\n</code></pre>\n\n<p>it prints</p>\n\n<pre><code> My generation is 1.My pid is 8\n My generation is 1.My pid is 8\n</code></pre>\n\n<p>why is that?</p>\n\n<p>thanks!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1521066390, "post_id": 49288600, "comment_id": 85580356, "body": "<code>for (int i=0; i&lt;dim; i++) array[i] = temparray[i];</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 5, "creation_date": 1521066429, "post_id": 49288600, "comment_id": 85580378, "body": "You can also <code>memcpy</code>."}, {"owner": {"reputation": 424, "user_id": 3380611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qTs5i.png?s=128&g=1", "display_name": "Mox", "link": "https://stackoverflow.com/users/3380611/mox"}, "edited": false, "score": 0, "creation_date": 1521066444, "post_id": 49288600, "comment_id": 85580387, "body": "@squemish Is that really the only way? What about pointer manipulation, to allow me to just replace array&#39;s pointer with temparray&#39;s?"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1521066505, "post_id": 49288600, "comment_id": 85580405, "body": "@Mox No, not the only way (using <code>memcpy</code> might be a bit faster, in fact). You can&#39;t reassign pointers, and even if you could, you would lose the original data."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1521066556, "post_id": 49288600, "comment_id": 85580426, "body": "<code>array</code> and <code>temparray</code> are both arrays, so you cannot assign one to the other. You can however use <code>memcpy</code> as tadam says the in the comments, if you don&#39;t want to copy element by element."}, {"owner": {"reputation": 424, "user_id": 3380611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qTs5i.png?s=128&g=1", "display_name": "Mox", "link": "https://stackoverflow.com/users/3380611/mox"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1521066557, "post_id": 49288600, "comment_id": 85580427, "body": "@squeamishossifrage I don&#39;t really care about the original data. I&#39;ll mention that in the question."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 4, "creation_date": 1521066573, "post_id": 49288600, "comment_id": 85580434, "body": "You have arrays, not pointers, they&#39;re not the same thing. Take a look here: <a href=\"http://www.c-faq.com/aryptr/index.html\" rel=\"nofollow noreferrer\">c-faq.com/aryptr/index.html</a>"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1521067230, "post_id": 49288600, "comment_id": 85580686, "body": "What&#39;s the problem you&#39;re trying to solve? You can obviously write <code>double* arrPtr = temparray;</code> but since the array is literally called <code>temparray</code> that&#39;s maybe not a good idea. The scope of memory allocated by <code>temparray</code> cannot be changed."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1521110329, "post_id": 49288600, "comment_id": 85596295, "body": "If you don&#39;t need to preserve the data, then just use two pointers that you swap between two buffers. No need to do slow hard copies. Any answer suggesting that you do a hard copy has not given this question enough thought."}], "answers": [{"tags": [], "owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "is_accepted": false, "score": -1, "last_activity_date": 1521069451, "creation_date": 1521069451, "answer_id": 49289110, "question_id": 49288600, "link": "https://stackoverflow.com/questions/49288600/how-can-i-replace-one-variables-array-with-another/49289110#49289110", "title": "How can I replace one variable&#39;s array with another?", "body": "<p>The compiler is right, you cannot assign an array directly. You can initiate it directly and then loop through it to change it:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ndouble array[5] = {1, 2, 3, 4, 5};\ndouble temparray[5] = {0, 0, 0, 0, 0};\n\nvoid printArrays() {\n    for (int i = 0; i &lt; 5; i++) {\n        printf(\"%f\\n\", array[i]);\n    }\n    for (int i = 0; i &lt; 5; i++) {\n        printf(\"%f\\n\", temparray[i]);\n    }\n}\n\nvoid arrayCopy() {\n    for (int i = 0; i &lt; 5; i++) {\n        array[i] = temparray[i];\n    }\n}\n\nint main() {\n    printf(\"Hello, Arrays!\\n\");\n    printArrays();\n    arrayCopy();\n    printf(\"Hello, Arrays!\\n\");\n    printArrays();\n    return 0;\n}\n</code></pre>\n\n<p>There are many ways to illustrate it but I've tried to keep it simple above. It just replaces the elements of one array with another. </p>\n"}, {"comments": [{"owner": {"reputation": 424, "user_id": 3380611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qTs5i.png?s=128&g=1", "display_name": "Mox", "link": "https://stackoverflow.com/users/3380611/mox"}, "edited": false, "score": 0, "creation_date": 1521070517, "post_id": 49289226, "comment_id": 85581704, "body": "This looks like something I might be interested in. The swapping of the array pointers in ingenious, as you don&#39;t even have to deal with memory leaks."}, {"owner": {"reputation": 424, "user_id": 3380611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qTs5i.png?s=128&g=1", "display_name": "Mox", "link": "https://stackoverflow.com/users/3380611/mox"}, "edited": false, "score": 0, "creation_date": 1521070536, "post_id": 49289226, "comment_id": 85581709, "body": "Any reason why your temporary pointer is of void type though?"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 424, "user_id": 3380611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qTs5i.png?s=128&g=1", "display_name": "Mox", "link": "https://stackoverflow.com/users/3380611/mox"}, "edited": false, "score": 1, "creation_date": 1521070728, "post_id": 49289226, "comment_id": 85581771, "body": "@Mox Just to be more general (code reuse). You can use the right type, of course."}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "reply_to_user": {"reputation": 424, "user_id": 3380611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qTs5i.png?s=128&g=1", "display_name": "Mox", "link": "https://stackoverflow.com/users/3380611/mox"}, "edited": false, "score": 0, "creation_date": 1521071666, "post_id": 49289226, "comment_id": 85582034, "body": "@Mox To avoid compiler warnings you may want to cast it  <code>swap_ptr((void**)&amp;pa, (void**)&amp;pb);</code>"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "edited": false, "score": 0, "creation_date": 1521073285, "post_id": 49289226, "comment_id": 85582461, "body": "@sg7 Good point. The OP may choose to just use double pointers, instead."}, {"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 0, "creation_date": 1521076793, "post_id": 49289226, "comment_id": 85583294, "body": "Although it probably will work on most common modern architectures, while <code>void *</code> is guaranteed to be big enough to hold a <code>double *</code>, the reverse is not true, so <code>*a = *b; *b = tmp;</code> is not guaranteed to work. If it does, you can eliminate the casts altogether by having <code>swap_ptr()</code> take two <code>void *</code>, and converting them to <code>void **</code> inside the function."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 0, "creation_date": 1521103651, "post_id": 49289226, "comment_id": 85591890, "body": "@PaulGriffiths I see. No, I wouldn&#39;t do that, unless it&#39;s necessary, and for the OP&#39;s use case, it would be just (error prone) noise."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 0, "creation_date": 1521110673, "post_id": 49289226, "comment_id": 85596543, "body": "@PaulGriffiths That&#39;s just nonsense. The standard is perfectly clear, C11 6.3.2.3: <code>A pointer to void may be converted to or from a pointer to any object type. A pointer to any object type may be converted to a pointer to void and back again; the result shall compare equal to the original pointer.</code>"}, {"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521113593, "post_id": 49289226, "comment_id": 85598466, "body": "@Lundin: So what? That has nothing to with dereferencing a <code>void **</code> and attempting to store something at that address when what actually lives there is a <code>double *</code>. Imagine what would happen if a <code>void *</code> was 8 bytes and a <code>double *</code> was 4 bytes, for example. The standard doesn&#39;t require all object pointers to be the same size. In your quote, the part about &quot;the result shall compare equal to the original pointer&quot; applies only when you&#39;re converting to and back from <code>void *</code>. Similarly, you can convert <code>int</code> to <code>char</code> and back, but you&#39;re not guaranteed to not lose information."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 0, "creation_date": 1521115462, "post_id": 49289226, "comment_id": 85599628, "body": "@PaulGriffiths No. Read the cited text again. You are 100% guaranteed not to lose information. It will be very hard to conform to the standard without having all pointers of the same size. In fact, to my knowledge nobody has ever designed such a system in the real world - whenever there exist pointers of different sizes, non-standard <code>near</code> and <code>far</code> are used."}, {"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521127809, "post_id": 49289226, "comment_id": 85608798, "body": "@Lundin: you&#39;re simply incorrect. Look at C11 6.2.5.28, that talks about precisely which kinds of pointers need to have the same representation and alignment with each other. The only type of pointer that <code>void *</code> needs to have the same representation or alignment with is <code>char *</code>. Particularly look at the last sentence: &quot;Pointers to other types need not have the same representation or alignment requirements,&quot; and are therefore not interchangeable as function arguments or return values, per the footnote."}, {"owner": {"reputation": 424, "user_id": 3380611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qTs5i.png?s=128&g=1", "display_name": "Mox", "link": "https://stackoverflow.com/users/3380611/mox"}, "edited": false, "score": 0, "creation_date": 1521128742, "post_id": 49289226, "comment_id": 85609518, "body": "Would the arrays being 2D arrays complicate this at all? I&#39;m having issues with the changes made in the inner loop persisting. As in, at the end of all loopage, <code>array</code> is still as if it was just initialised."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 424, "user_id": 3380611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qTs5i.png?s=128&g=1", "display_name": "Mox", "link": "https://stackoverflow.com/users/3380611/mox"}, "edited": false, "score": 0, "creation_date": 1521129902, "post_id": 49289226, "comment_id": 85610351, "body": "@Mox You should be able to adapt the code for that, see e.g. <a href=\"https://wandbox.org/permlink/tBrQcztUhdIJFSo6\" rel=\"nofollow noreferrer\">wandbox.org/permlink/tBrQcztUhdIJFSo6</a>"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521130351, "post_id": 49289226, "comment_id": 85610651, "body": "@Lundin I guess that PaulGriffiths&#39;s point is also backed up in C11 6.3.2.3 7 <i>&quot;A pointer to an object type may be converted to a pointer to a different object type. If the resulting pointer is not correctly aligned 68) for the referenced type, the behavior is undefined. Otherwise, when converted back again, the result shall compare equal to the original pointer.&quot;</i>, but I&#39;m definetely not a language lawyer."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 0, "creation_date": 1521131179, "post_id": 49289226, "comment_id": 85611148, "body": "@PaulGriffiths Ignore what C allows regarding pointer representation. My point is: how exactly do you plan to conform to 6.3.2.3 unless the pointers are of same size? That&#39;s not practically possible. How do you plan to convert a 8 byte pointer into a 4 byte pointer without losing information?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521131347, "post_id": 49289226, "comment_id": 85611275, "body": "@Bob__ That&#39;s irrelevant since 6.3.2.3/1 is what applies here, not 6.3.2.3/7."}, {"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521162635, "post_id": 49289226, "comment_id": 85625315, "body": "@Lundin: I&#39;m certainly not going to ignore what C allows regarding pointer representation, since it&#39;s critical to the point at hand. As I said, 6.3.2.3 doesn&#39;t mandate that a pointer to <code>void</code> be convertible to a pointer to another object type and back again without losing information - it only mandates that a pointer to another object type be convertible to a pointer to <code>void</code> and back again without losing information. Again, it&#39;s no different from being able to convert <code>char</code> to <code>int</code> and back again without losing information, but not in the other direction."}, {"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521164730, "post_id": 49289226, "comment_id": 85625721, "body": "@Lundin: The <a href=\"http://c-faq.com/null/machexamp.html\" rel=\"nofollow noreferrer\">comp.lang.c FAQ</a> has an answer giving some actual examples of this, including Prime machines where <code>char *</code> was bigger than <code>int *</code>, and the <a href=\"http://c-faq.com/null/wierdptrs.ct.html\" rel=\"nofollow noreferrer\">DG Nova</a> where a conversion between two different pointer types loses information even though they&#39;re of the same size."}], "tags": [], "owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": true, "score": 3, "last_activity_date": 1521099870, "last_edit_date": 1521099870, "creation_date": 1521070248, "answer_id": 49289226, "question_id": 49288600, "link": "https://stackoverflow.com/questions/49288600/how-can-i-replace-one-variables-array-with-another/49289226#49289226", "title": "How can I replace one variable&#39;s array with another?", "body": "<p>You can use a couple of helper pointers and swap their values, instead of copying the arrays every time.</p>\n\n<p>So, if I've understood your intent, you can write something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid swap_dptr(double **a, double **b)\n{\n    double *tmp = *a;\n    *a = *b;\n    *b = tmp;\n}\n\n#define dim 5\n\nint main(void) {\n    double a[dim];\n    double b[dim] = {9, 8, 7, 6, 5};\n\n    double *pa = a;\n    double *pb = b;\n\n    for (int i = 0; i &lt; 10; ++i)\n    {\n        for (int j = 0; j &lt; dim; ++j)\n        {\n            pa[j] = 1.0 - 0.5 * pb[j];\n            printf(\"%10.6f\", pa[j]);\n        }\n        puts(\"\");\n        swap_dptr(&amp;pa, &amp;pb);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 424, "user_id": 3380611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qTs5i.png?s=128&g=1", "display_name": "Mox", "link": "https://stackoverflow.com/users/3380611/mox"}, "edited": false, "score": 0, "creation_date": 1521128764, "post_id": 49289239, "comment_id": 85609537, "body": "Would the arrays being 2D arrays complicate this at all? I&#39;m having issues with the changes made in the inner loop persisting. As in, at the end of all loopage, <code>array</code> is still as if it was just initialised."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 424, "user_id": 3380611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qTs5i.png?s=128&g=1", "display_name": "Mox", "link": "https://stackoverflow.com/users/3380611/mox"}, "edited": false, "score": 0, "creation_date": 1521129735, "post_id": 49289239, "comment_id": 85610224, "body": "If the arrays are 2D arrays, you have to be more careful with the pointer types.  With <code>double array1[dim1][dim2];</code>, you&#39;d need <code>double (*p1)[dim2];</code>, I think \u2014 I&#39;ve not verified that with a compiler.  You should then be able to make appropriate changes to the <code>dump_array</code> code and initialize/edit code, and you should be home and dry."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 2, "last_activity_date": 1521070310, "creation_date": 1521070310, "answer_id": 49289239, "question_id": 49288600, "link": "https://stackoverflow.com/questions/49288600/how-can-i-replace-one-variables-array-with-another/49289239#49289239", "title": "How can I replace one variable&#39;s array with another?", "body": "<p>Maybe this is what you're after.  The code uses the pointers <code>p1</code> and <code>p2</code> to point alternatively at <code>array1</code>/<code>array2</code> or <code>array2</code>/<code>array1</code> respectively.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstatic void dump_array(const char *tag, int num, double *data)\n{\n    printf(\"%8s\", tag);\n    for (int i = 0; i &lt; num; i++)\n        printf(\" %4.0f\", data[i]);\n    putchar('\\n');\n}\n\nint main(void)\n{\n    int dim = 10;\n    double array1[dim];\n    double array2[dim];\n\n    for (int i = 0; i &lt; dim; i++)\n        array1[i] = i;\n\n    double *p1 = array1;\n    double *p2 = array2;\n\n    dump_array(\"p1:\", dim, p1);\n    for (int i = 0; i &lt; 5; i++)\n    {\n        for (int j = 0; j &lt; dim; j++)\n            p2[j] = 2 * (p1[j] + 2) + j;\n        dump_array(\"p2:\", dim, p2);\n        dump_array(\"array1:\", dim, array1);\n        dump_array(\"array2:\", dim, array2);\n        double *tp = p1;\n        p1 = p2;\n        p2 = tp;\n        putchar('\\n');\n    }\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>     p1:    0    1    2    3    4    5    6    7    8    9\n     p2:    4    7   10   13   16   19   22   25   28   31\n array1:    0    1    2    3    4    5    6    7    8    9\n array2:    4    7   10   13   16   19   22   25   28   31\n\n     p2:   12   19   26   33   40   47   54   61   68   75\n array1:   12   19   26   33   40   47   54   61   68   75\n array2:    4    7   10   13   16   19   22   25   28   31\n\n     p2:   28   43   58   73   88  103  118  133  148  163\n array1:   12   19   26   33   40   47   54   61   68   75\n array2:   28   43   58   73   88  103  118  133  148  163\n\n     p2:   60   91  122  153  184  215  246  277  308  339\n array1:   60   91  122  153  184  215  246  277  308  339\n array2:   28   43   58   73   88  103  118  133  148  163\n\n     p2:  124  187  250  313  376  439  502  565  628  691\n array1:   60   91  122  153  184  215  246  277  308  339\n array2:  124  187  250  313  376  439  502  565  628  691\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 271, "user_id": 9353451, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4089968caf5bda29a44448b5608bed91?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshraj", "link": "https://stackoverflow.com/users/9353451/lakshraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1521089267, "creation_date": 1521089267, "answer_id": 49291789, "question_id": 49288600, "link": "https://stackoverflow.com/questions/49288600/how-can-i-replace-one-variables-array-with-another/49291789#49291789", "title": "How can I replace one variable&#39;s array with another?", "body": "<p>You cannot directly assign the array to another array. For this problem you have 2 option first one is by using pointer and assign the pointer to other pointer. And second is by using loop and assign the value to another array one by one.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid main(){\nint array[100],temparray[100];\nint i,n;\nscanf(\"%d\", &amp;n); // size of array\nfor(i=0;i&lt;n;i++)\n{\n scanf(\"%d\", &amp;array[i]);\n}\nfor(i=0;i&lt;n;i++){\ntemparray[i]=array[i];\n}\nfor(i=0;i&lt;n;i++)\n{\n printf(\"%d\", temparray[i]);\n}\n}\n</code></pre>\n\n<p>The above code is just a small example of achieving the goal.</p>\n"}], "owner": {"reputation": 424, "user_id": 3380611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qTs5i.png?s=128&g=1", "display_name": "Mox", "link": "https://stackoverflow.com/users/3380611/mox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 49289226, "answer_count": 4, "score": 2, "last_activity_date": 1521109851, "creation_date": 1521066329, "last_edit_date": 1521066582, "question_id": 49288600, "link": "https://stackoverflow.com/questions/49288600/how-can-i-replace-one-variables-array-with-another", "title": "How can I replace one variable&#39;s array with another?", "body": "<p>I have an array through whose contents I need to iterate and prep up a new array. I need to do this multiple times, and I don't need to keep the old data once I'm done with it within the inner loop.</p>\n\n<p>Essentially:</p>\n\n<pre><code>double array[dim];\ndouble temparray[dim];\n\n/*initialise array*/\n\nfor(...){\n    for(...){\n        /*replace contents of temparray based on contents from array*/\n    }\n    array = temparray;\n}\n</code></pre>\n\n<p>However, this code breaks:</p>\n\n<pre><code>error: assignment to expression with array type\narray = temparray;\n      ^\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c", "function", "pointers"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1521066202, "post_id": 49288536, "comment_id": 85580280, "body": "that should not compile. Passing a struct, expecting a pointer on struct. of course, if prototype isn&#39;t exported, that could compile to UB."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1521066216, "post_id": 49288536, "comment_id": 85580285, "body": "<i>This works</i> How do you know it &quot;works&quot;?"}, {"owner": {"reputation": 3, "user_id": 9493868, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VymLz5Mm2nQ/AAAAAAAAAAI/AAAAAAAAA1A/qlRYCEW5uAM/photo.jpg?sz=128", "display_name": "Chuck Person", "link": "https://stackoverflow.com/users/9493868/chuck-person"}, "edited": false, "score": 0, "creation_date": 1521066771, "post_id": 49288536, "comment_id": 85580510, "body": "The library uses this method every time it calls a user-defined structure, and is being used on hundreds of PLCs right now. It must be specific to the controllers being used and the platform that compiles it (B&amp;R)"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1521067185, "post_id": 49288536, "comment_id": 85580666, "body": "What compiler is that? Also, are you 100% sure tricks like <code>typedef struct {...} difference_Typ[1];</code> weren&#39;t used?"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1521069429, "post_id": 49288536, "comment_id": 85581376, "body": "You should post the actual code. The <i>&quot;incredibly simplified&quot;</i> code is not helping anyone."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1521067564, "post_id": 49288728, "comment_id": 85580806, "body": "<i>It may work on certain compilers - if they decide to implement passing a structure by actually passing a pointer.</i>  Wouldn&#39;t that violate the pass-by-value semantics of <b>6.5.2.2 Function calls</b>, paragraph 2:  &quot;... Each  argument  shall have a type such that its <b>value may be assigned to an object</b>...&quot; and paragraph 4:  &quot;each parameter is <b>assigned the value of the corresponding argument</b>.&quot;?  Per footnote 93:  &quot;A function may change the values of its parameters, but <b>these changes cannot affect the values of the arguments</b>.&quot;"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1521067596, "post_id": 49288728, "comment_id": 85580822, "body": "@AndrewHenle presumably the callee makes a copy, or perhaps it only makes a copy if it modifies the structure."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 0, "last_activity_date": 1521066966, "creation_date": 1521066966, "answer_id": 49288728, "question_id": 49288536, "link": "https://stackoverflow.com/questions/49288536/calling-function-with-pointer-reference-without-assigning-address/49288728#49288728", "title": "Calling function with pointer reference without assigning address", "body": "<p>No, it's not supposed to work.</p>\n\n<p>It may work on certain compilers - if they decide to implement passing a structure by actually passing a pointer. But it certainly isn't guaranteed that your compiler works this way.</p>\n\n<p>Additionally, if you have a correct prototype for your function that is included in both files, then one or the other file won't compile (because then the compiler would know what the argument should be).</p>\n"}], "owner": {"reputation": 3, "user_id": 9493868, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VymLz5Mm2nQ/AAAAAAAAAAI/AAAAAAAAA1A/qlRYCEW5uAM/photo.jpg?sz=128", "display_name": "Chuck Person", "link": "https://stackoverflow.com/users/9493868/chuck-person"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 49288728, "answer_count": 1, "score": 0, "last_activity_date": 1521066966, "creation_date": 1521066059, "question_id": 49288536, "link": "https://stackoverflow.com/questions/49288536/calling-function-with-pointer-reference-without-assigning-address", "title": "Calling function with pointer reference without assigning address", "body": "<p>I'm working with a well-established PLC (programmable logic controller) program that implements libraries written in C.</p>\n\n<p>I'm trying to understand how pointers work in this setup, because it doesn't make sense to me. </p>\n\n<p>lib.h</p>\n\n<pre><code>typedef struct {\n/* Input Parameter */\nshort int   X;                      /*Setpoint*/\nshort int   Y;                      /*Actual*/\n/* Output Parameter */\nshort int   Z;                      /*Setpoint-Actual*/\n}difference_Typ;\n</code></pre>\n\n<p>lib.c</p>\n\n<pre><code>int tdelta(difference_Typ *d)\n{\n     d-&gt;Z = d-&gt;X-d-&gt;Y;\n\n     return 0;\n}\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>_GLOBAL     difference_Typ      Volts;\n\nvoid main()\n{\n    Volts.X=5;\n    Volts.Y=1;\n    tdelta(Volts);\n}\n</code></pre>\n\n<p>This is incredibly simplified, but functions are called by the name of the variable (not the address of the variable), and the variable is not defined as a reference. Then, in the library, it accesses the structure by using a pointer.</p>\n\n<p>This works, but is it supposed to? </p>\n"}, {"tags": ["c", "arguments", "argv"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1521065462, "post_id": 49288396, "comment_id": 85579975, "body": "try <code>.&#47;program &quot;X&#39;221A&quot;</code>. As the error indicates, this is dependent on your shell though, and has nothing to do with your program. This question is best for another exchange, perhaps <a href=\"https://superuser.com/\">Super User</a>"}, {"owner": {"reputation": 117, "user_id": 7970016, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/33a69fda8180eeaab7d9a2bb8d7805d0?s=128&d=identicon&r=PG&f=1", "display_name": "FatTommy", "link": "https://stackoverflow.com/users/7970016/fattommy"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1521065550, "post_id": 49288396, "comment_id": 85580014, "body": "still getting the same error :("}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1521065667, "post_id": 49288396, "comment_id": 85580079, "body": "try <code>.&#47;program X\\&#39;221A</code>. If that doesn&#39;t work, I&#39;m out"}], "answers": [{"tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1521065911, "creation_date": 1521065911, "answer_id": 49288511, "question_id": 49288396, "link": "https://stackoverflow.com/questions/49288396/how-to-pass-x221a-argument-to-int-mainint-argc-char-argv-in-c/49288511#49288511", "title": "How to pass X&#39;221A argument to int main(int argc,char *argv[]) in C", "body": "<p><code>'</code> is a special character for the bourne shell. You need to escape it.</p>\n\n<pre><code>./program X\\'221A\n</code></pre>\n\n<p>The following will also work:</p>\n\n<pre><code>./program \"X'221A\"\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 7970016, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/33a69fda8180eeaab7d9a2bb8d7805d0?s=128&d=identicon&r=PG&f=1", "display_name": "FatTommy", "link": "https://stackoverflow.com/users/7970016/fattommy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 49288511, "answer_count": 1, "score": 0, "last_activity_date": 1521065911, "creation_date": 1521065300, "last_edit_date": 1521065662, "question_id": 49288396, "link": "https://stackoverflow.com/questions/49288396/how-to-pass-x221a-argument-to-int-mainint-argc-char-argv-in-c", "title": "How to pass X&#39;221A argument to int main(int argc,char *argv[]) in C", "body": "<p>Hey coders does anyone know how am I supposed to pass argument with \"special\" character? I get an error: </p>\n\n<blockquote>\n  <p>sh: 1: Syntax error: Unterminated quoted string</p>\n</blockquote>\n\n<p>So this is how I call my program trying to put <code>X'221A</code> into my <code>argv</code>: </p>\n\n<pre><code>./program X'221A\n</code></pre>\n"}, {"tags": ["c", "macos", "linker", "linker-errors", "fftw"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1521064400, "post_id": 49288163, "comment_id": 85579518, "body": "<code>-L$&#47;Applications&#47;fftw-3.3.7</code>. What&#39;s the <code>$</code> doing there?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1521064444, "post_id": 49288163, "comment_id": 85579535, "body": "<code>$</code> is a problem here. Do: <code>gcc FFT.c -L&#47;Applications&#47;fftw-3.3.7. -lfftw3 -lm -o FFT</code>"}, {"owner": {"reputation": 170, "user_id": 3024178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4d12980468135f1fd58982d326bdb2f?s=128&d=identicon&r=PG&f=1", "display_name": "MsTais", "link": "https://stackoverflow.com/users/3024178/mstais"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1521064525, "post_id": 49288163, "comment_id": 85579559, "body": "@Jean-Fran&#231;ois Fabre just tried: ld: warning: directory not found for option &#39;-L/Applications/fftw-3.3.7.&#39; ld: library not found for -lfftw3 clang: error: linker command failed with exit code 1 (use -v to see invocation)"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1521064637, "post_id": 49288163, "comment_id": 85579609, "body": "How did you install fftw3. Did you build it from source and do a <code>make install</code> or did you use package manager?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1521064684, "post_id": 49288163, "comment_id": 85579632, "body": "I assume this is MacOS"}, {"owner": {"reputation": 170, "user_id": 3024178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4d12980468135f1fd58982d326bdb2f?s=128&d=identicon&r=PG&f=1", "display_name": "MsTais", "link": "https://stackoverflow.com/users/3024178/mstais"}, "edited": false, "score": 0, "creation_date": 1521064714, "post_id": 49288163, "comment_id": 85579646, "body": "@ Michael Petch I used make install"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1521064784, "post_id": 49288163, "comment_id": 85579669, "body": "the trailing &quot;.&quot; is suspicious as well. Try to locate <code>&#47;Applications</code>. Maybe you meant <code>~&#47;Applications</code> ? we cannot log on your machine to check that. note that the linker is super-nice by warning you about that. I remember linkers not giving a damn about the directory existing or not."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1521064798, "post_id": 49288163, "comment_id": 85579678, "body": "(well, we can but we forbid ourselves to do such things :))"}, {"owner": {"reputation": 170, "user_id": 3024178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4d12980468135f1fd58982d326bdb2f?s=128&d=identicon&r=PG&f=1", "display_name": "MsTais", "link": "https://stackoverflow.com/users/3024178/mstais"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1521064812, "post_id": 49288163, "comment_id": 85579687, "body": "@Michael Petch I have downloaded the software from the link in my post, saved the folder in applications and used 1) ./configure 2) make 3) make install"}, {"owner": {"reputation": 170, "user_id": 3024178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4d12980468135f1fd58982d326bdb2f?s=128&d=identicon&r=PG&f=1", "display_name": "MsTais", "link": "https://stackoverflow.com/users/3024178/mstais"}, "edited": false, "score": 0, "creation_date": 1521064968, "post_id": 49288163, "comment_id": 85579749, "body": "No 8(  really stupid... ohhhh8*((((( Is there a way to fix it at this point or I should re-install."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1521065012, "post_id": 49288163, "comment_id": 85579770, "body": "no, format your hard drive NOW! (don&#39;t!). Can you check the directories I pointed out? do you have <code>&#47;Applications</code> ? or <code>~&#47;Applications</code> existing?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1521065056, "post_id": 49288163, "comment_id": 85579794, "body": "You usually don&#39;t build from the Applications folder. You can do that from  a folder in your accoutn director. Most default ./configure scripts will generate Makefiles that place the installation under <code>&#47;usr&#47;local</code> .when you finally do the <code>sudo make install</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1521065101, "post_id": 49288163, "comment_id": 85579821, "body": "okay so <code>gcc FFT.c -I$&#47;usr&#47;local&#47;include&#47; -L$&#47;usr&#47;local&#47;include&#47; -lfftw3 -lm -o FFT</code> is also wrong: should be <code>gcc FFT.c -L&#47;usr&#47;local&#47;include&#47; -lfftw3 -lm -o FFT</code> but isn&#39;t that dir included by default?"}, {"owner": {"reputation": 170, "user_id": 3024178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4d12980468135f1fd58982d326bdb2f?s=128&d=identicon&r=PG&f=1", "display_name": "MsTais", "link": "https://stackoverflow.com/users/3024178/mstais"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1521065109, "post_id": 49288163, "comment_id": 85579828, "body": "@Jean-Fran&#231;ois Fabre haha =?  like you&#39;ve corrected, lol X))))"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1521065157, "post_id": 49288163, "comment_id": 85579854, "body": "@MsTais. glad you like it. Cannot reproduce your issue. I&#39;ve got to buy a mac first. Check your directories, good luck."}, {"owner": {"reputation": 170, "user_id": 3024178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4d12980468135f1fd58982d326bdb2f?s=128&d=identicon&r=PG&f=1", "display_name": "MsTais", "link": "https://stackoverflow.com/users/3024178/mstais"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1521065337, "post_id": 49288163, "comment_id": 85579931, "body": "@Michael Petch I have done sudo make install, it looked like it was right this time. Then I ran gcc FFT.c -L/usr/local/include/ -lfftw3 -lm -o FFT, and this time it sees the directory, but it still doesn&#39;t see the library."}, {"owner": {"reputation": 170, "user_id": 3024178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4d12980468135f1fd58982d326bdb2f?s=128&d=identicon&r=PG&f=1", "display_name": "MsTais", "link": "https://stackoverflow.com/users/3024178/mstais"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1521065547, "post_id": 49288163, "comment_id": 85580013, "body": "@Michael Petch So its like gcc FFT.c -I/usr/local/include -L/usr/local/lib -lfftw3 -lm -o FFT    ?"}, {"owner": {"reputation": 170, "user_id": 3024178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4d12980468135f1fd58982d326bdb2f?s=128&d=identicon&r=PG&f=1", "display_name": "MsTais", "link": "https://stackoverflow.com/users/3024178/mstais"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1521065633, "post_id": 49288163, "comment_id": 85580058, "body": "@Michael Petch IT WORKED!!!!!! yeiiiii! Post it as the answer, I&#39;ll give you points!!!!!"}], "answers": [{"tags": [], "owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "is_accepted": true, "score": 2, "last_activity_date": 1521065943, "creation_date": 1521065943, "answer_id": 49288520, "question_id": 49288163, "link": "https://stackoverflow.com/questions/49288163/fftw3-linking-in-c/49288520#49288520", "title": "FFTW3 linking in C", "body": "<p>The question sounds like you haven't properly installed the <code>fftw3</code> software. Your comments suggest you built from source with:</p>\n\n<pre><code>./configure\nmake\nmake install\n</code></pre>\n\n<p>The first two commands are okay. The problem is <code>make install</code>. <code>make install</code> unlike the other two commands must be run as root privileges to gain write access to the directories it needs. What you should do is:</p>\n\n<pre><code>./configure\nmake\nsudo make install\n</code></pre>\n\n<p>This will elevate <code>make install</code> to root privileges after you put in your account password.</p>\n\n<p>By default most configure scripts place library and include files under <code>/usr/local</code> . Usually includes are in <code>/usr/local/include</code> and libraries in <code>/usr/local/lib</code> . To compile you should be able to specify includes with <code>-I</code> and libraries with <code>-L</code> like this:</p>\n\n<pre><code>gcc FFT.c -I/usr/local/include -L/usr/local/lib -lfftw3 -lm -o FFT\n</code></pre>\n"}], "owner": {"reputation": 170, "user_id": 3024178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4d12980468135f1fd58982d326bdb2f?s=128&d=identicon&r=PG&f=1", "display_name": "MsTais", "link": "https://stackoverflow.com/users/3024178/mstais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1424, "favorite_count": 0, "closed_date": 1521159840, "accepted_answer_id": 49288520, "answer_count": 1, "score": 0, "last_activity_date": 1521066939, "creation_date": 1521064128, "last_edit_date": 1521066939, "question_id": 49288163, "link": "https://stackoverflow.com/questions/49288163/fftw3-linking-in-c", "closed_reason": "Not suitable for this site", "title": "FFTW3 linking in C", "body": "<p>I can't link fftw3 library (latest on Mac OS X Yosemite 10.10.5). I have a sample-code from the <a href=\"http://www.fftw.org/fftw2_doc/fftw_2.html\" rel=\"nofollow noreferrer\">developers</a> here:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;/usr/local/include/fftw3.h&gt;\n\n\nint main()\n    {\n    int N;\n\n    fftw_complex *in, *out;\n    fftw_plan p;\n\n\n    in = (fftw_complex*) fftw_malloc(sizeof(fftw_complex) * N);\n    out = (fftw_complex*) fftw_malloc(sizeof(fftw_complex) * N);\n    p = fftw_plan_dft_1d(N, in, out, FFTW_FORWARD, FFTW_ESTIMATE);\n\n\n    fftw_execute(p); /* repeat as needed */\n\n\n    fftw_destroy_plan(p);\n    fftw_free(in); fftw_free(out);\n}\n</code></pre>\n\n<p>I don't expect it to make sense. At this point I was it just to compile.</p>\n\n<p>1) I have followed the manual and tried:</p>\n\n<p>gcc -lm -lfftw3 FFT.c -o FFT</p>\n\n<p>gcc FFT.c -I$/usr/local/include/ -L$/usr/local/include/ -lfftw3 -lm -o FFT</p>\n\n<p>and many other variations. </p>\n\n<p>2) When I open /usr/local/include/, I don't really see a libfftw3-file, however, I have libfftw3.la in /Applications/fftw-3.3.7. Hence, I have also tried </p>\n\n<p>gcc FFT.c -I$/Applications/fftw-3.3.7. -L$/Applications/fftw-3.3.7. -lfftw3 -lm -o FFT</p>\n\n<p>3) I have tried to copy libfftw3.la into /usr/local/include/ and pass option (1) to the terminal again...</p>\n\n<p>All the same error: </p>\n\n<pre><code>ld: warning: directory not found for option '-L$/Applications/fftw-3.3.7.'\nld: library not found for -lfftw3\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Please, help! Don't know where to look any more. The manual is very high level for me and doesn't seem to cover these issues extensively/completely.</p>\n"}, {"tags": ["c", "arrays", "function"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1521059983, "post_id": 49287237, "comment_id": 85577537, "body": "<code>new_array</code> is an array, and you can&#39;t assign to arrays in C."}, {"owner": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1521060051, "post_id": 49287237, "comment_id": 85577566, "body": "@Oliver Charlesworth So what can I do instead?"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1521060130, "post_id": 49287237, "comment_id": 85577598, "body": "There&#39;s another bug: <code>return array;</code> returns a pointer to local memory that goes out of scope after the return."}, {"owner": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1521060206, "post_id": 49287237, "comment_id": 85577634, "body": "@Jens what do you mean?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1521060295, "post_id": 49287237, "comment_id": 85577662, "body": "@crylikeacanary Exactly what he said. Your <code>array_function</code> returns a pointer to the base of <code>array</code> within the function. The problem is, there is no <code>array</code> once the function returns, so the pointer is left &quot;dangling&quot;. It used to point to something definite, but no longer does."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1521060368, "post_id": 49287237, "comment_id": 85577694, "body": "I notice that function <code>convert</code> computes <code>C</code> but then does not use it. Is there a typo in <code>Z=A*((R*B)+B);</code> where one of the <code>B</code>s should be <code>C</code>?"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 1, "creation_date": 1521060537, "post_id": 49287237, "comment_id": 85577769, "body": "I mean that in <code>array_function</code> the <code>array[]</code> is an object of automatic storage duration. This ceases to exist when the function returns. If the caller uses that address, the behaviour is undefined. That&#39;s a <b>massive bug</b>. Never return addresses of storage with a lifetime ending at the return."}, {"owner": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1521060641, "post_id": 49287237, "comment_id": 85577816, "body": "@WeatherVane Yep! Fixed it"}, {"owner": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1521060703, "post_id": 49287237, "comment_id": 85577840, "body": "@Jens and how would I fix that?"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1521060938, "post_id": 49287237, "comment_id": 85577932, "body": "By not using an object of <i>automatic storage duration</i>, but of storage duration either <i>static</i> (<code>static double array[...]</code>), or <i>allocated</i> (<code>double *array = malloc(...)</code>). I recommend a good C book such as K&amp;R 2nd ed and reading the comp.lang.c FAQ <a href=\"http://http://c-faq.com/\" rel=\"nofollow noreferrer\">http://c-faq.com</a> and <b>crank up the warning level of your compiler</b>."}, {"owner": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1521061150, "post_id": 49287237, "comment_id": 85578023, "body": "@DavidC.Rankin no, it&#39;s not intentional. Does it make a difference?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1521061455, "post_id": 49287237, "comment_id": 85578180, "body": "<code>scanf(&quot;%f&quot;, &amp;array[i]);</code> is also wrong, you must use the <code>&#39;l&#39;</code> (ell) modifier for the <code>&#39;%f&#39;</code> <i>format specifier</i> to read a <code>double</code> (e.g. <code>scanf(&quot;%lf&quot;, &amp;array[i]);</code>) which I suspect is where your crash originates since it invokes <i>Undefined Behavior</i>. (bad juju)"}, {"owner": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1521061688, "post_id": 49287237, "comment_id": 85578296, "body": "@DavidC.Rankin Okay, I fixed the int/float confusion. But that scanf change doesn&#39;t seem to make a difference"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1521062340, "post_id": 49287237, "comment_id": 85578621, "body": "Does it still crash? What values do you input? Runs fine here."}, {"owner": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1521062544, "post_id": 49287237, "comment_id": 85578724, "body": "@DavidC.Rankin No, it doesn&#39;t crash. Now it prints 0.000000 + i0.000000 for whatever values I put"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1521063225, "post_id": 49287237, "comment_id": 85579023, "body": "You didn&#39;t fix <code>scanf(&quot;%f&quot;, &amp;array[i]);</code> it must be <code>scanf(&quot;%lf&quot;, &amp;array[i]);</code> see the <code>l</code> (ell)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1521063570, "post_id": 49287237, "comment_id": 85579190, "body": "@DavidC.Rankin <code>11 * M_PI</code> is not an integer, and so the division by <code>6</code> is not integer division."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1521063708, "post_id": 49287237, "comment_id": 85579253, "body": "@WeatherVane - good catch, thanks. I&#39;m always wary of whether macros are going to be typed right for that purpose."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1521063945, "post_id": 49287237, "comment_id": 85579346, "body": "@DavidC.Rankin: On this day of all dates, one ought to be aware that <code>M_PI</code> is not an integer."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1521064039, "post_id": 49287237, "comment_id": 85579386, "body": "Did I miss National Pi day again?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1521065403, "post_id": 49287237, "comment_id": 85579961, "body": "@DavidC.Rankin it seems there was an attempt to define \u03c0 to be 3. Perhaps."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1521065526, "post_id": 49287237, "comment_id": 85580003, "body": "Yes, but that happened at the beginning of the month. I see the floating point aspect today. (I&#39;ll now have to convince myself <code>M_PI</code> is really a mid-month value <code>:)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 1, "last_activity_date": 1521060217, "creation_date": 1521060217, "answer_id": 49287304, "question_id": 49287237, "link": "https://stackoverflow.com/questions/49287237/getting-c-error-assignment-to-expression-with-array-type/49287304#49287304", "title": "Getting C error &quot;assignment to expression with array type&quot;", "body": "<p>You cannot assign to arrays in C. You can only assign to <strong>array elements</strong>.</p>\n\n<p>If you want to change arrays dynamically, declare a pointer of the appropriate type and assign the result of <code>malloc</code> and/or <code>realloc</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "edited": false, "score": 0, "creation_date": 1521060386, "post_id": 49287312, "comment_id": 85577701, "body": "Ah, I see. That fixes the error but the program still crashes after entering in the elements"}, {"owner": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "edited": false, "score": 0, "creation_date": 1521061231, "post_id": 49287312, "comment_id": 85578069, "body": "Okay, so now it no longer crashes. You can see my updated code above. Now it prints 0.000000 + i0.000000, which is not the result I want"}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 0, "last_activity_date": 1521060718, "last_edit_date": 1521060718, "creation_date": 1521060238, "answer_id": 49287312, "question_id": 49287237, "link": "https://stackoverflow.com/questions/49287237/getting-c-error-assignment-to-expression-with-array-type/49287312#49287312", "title": "Getting C error &quot;assignment to expression with array type&quot;", "body": "<p><code>double complex *new_array[100];</code> declares <code>new_array</code> to be an array of 100 pointers to <code>double complex</code>. That is not what you want. You merely want a pointer to <code>double complex</code> (which will point to the first element of an array that is provided by the function). The declaration for this is <code>double complex *new_array;</code>.</p>\n\n<p>However, in <code>array_function</code>, you attempt to return <code>array</code>, where <code>array</code> is defined inside the function with <code>double complex array[100];</code>. That declaration, when used inside a function, declares an array that lasts only until the function returns. If you return its address (or the address of its first element), the pointer to that address will be invalid.</p>\n\n<p>The proper way to return a new array from a function is to dynamically allocate the array, as with:</p>\n\n<pre><code>double complex *array = malloc(100 * sizeof *array);\nif (!array)\n{\n    fprintf(stderr, \"Error, failed to allocate memory.\\n\");\n    exit(EXIT_FAILURE);\n}\n\n\u2026 // Assign values to the array elements.\n\nreturn array;\n</code></pre>\n\n<p>Then the caller is responsible for releasing the array at some later time, by passing the address to the <code>free</code> routine.</p>\n\n<p>(To use <code>malloc</code>, <code>free</code>, and <code>exit</code>, add <code>#include &lt;stdlib.h&gt;</code> to your program.)</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "edited": false, "score": 0, "creation_date": 1521061561, "post_id": 49287366, "comment_id": 85578227, "body": "I can&#39;t seem to get it work like this either. It keeps printing 0.000000 + i0.000000"}, {"owner": {"reputation": 26054, "user_id": 23896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d4dc630c582673cfd21f7c80c79ff7f?s=128&d=identicon&r=PG", "display_name": "matli", "link": "https://stackoverflow.com/users/23896/matli"}, "reply_to_user": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "edited": false, "score": 0, "creation_date": 1521062099, "post_id": 49287366, "comment_id": 85578487, "body": "Now we are no longer talking about the subject of this question. However, I think your problem is in your scanf. You need to use &quot;%lf&quot; when scanf:ing into a double."}, {"owner": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "edited": false, "score": 0, "creation_date": 1521062220, "post_id": 49287366, "comment_id": 85578566, "body": "I know, is there need for me to post another question? I&#39;m not really a regular here. I changed that but I&#39;m still getting the same result"}, {"owner": {"reputation": 26054, "user_id": 23896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d4dc630c582673cfd21f7c80c79ff7f?s=128&d=identicon&r=PG", "display_name": "matli", "link": "https://stackoverflow.com/users/23896/matli"}, "reply_to_user": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "edited": false, "score": 0, "creation_date": 1521063434, "post_id": 49287366, "comment_id": 85579126, "body": "Well, I tried your code, and after changing scanf(&quot;%f&quot;, &amp;array[i]) to scanf(&quot;%lf&quot;, &amp;array[I]), I got some nicely looking numbers instead of 0.0000."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1521065601, "post_id": 49287366, "comment_id": 85580037, "body": "Good deal. Good luck with your coding (and always validate all user input <code>:)</code>"}], "tags": [], "owner": {"reputation": 26054, "user_id": 23896, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d4dc630c582673cfd21f7c80c79ff7f?s=128&d=identicon&r=PG", "display_name": "matli", "link": "https://stackoverflow.com/users/23896/matli"}, "is_accepted": false, "score": 0, "last_activity_date": 1521060802, "last_edit_date": 1521060802, "creation_date": 1521060464, "answer_id": 49287366, "question_id": 49287237, "link": "https://stackoverflow.com/questions/49287237/getting-c-error-assignment-to-expression-with-array-type/49287366#49287366", "title": "Getting C error &quot;assignment to expression with array type&quot;", "body": "<p>If you want to let the <code>array_function</code> create the content of <code>new_array</code>, you can send the array pointer as a parameter to the function, and let the function use that. You also need to change the definition of new_array to <code>double complex new_array[100]</code></p>\n\n<p>That is, </p>\n\n<pre><code>void array_function (double *a, double complex array[], int n)\n{\n    int i;\n    for (i=0; i&lt;n; i++)\n    {\n       array[i]=convert(*(a+i),i);\n    }\n}\n</code></pre>\n\n<p>And in main():</p>\n\n<pre><code>double complex new_array[100];\n...\narray_function(array, new_array, N);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "edited": false, "score": 0, "creation_date": 1521063687, "post_id": 49287861, "comment_id": 85579237, "body": "It works! Thank you! I can&#39;t figure out what exactly was giving me the 0.000000 + i0.000000 result"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "edited": false, "score": 0, "creation_date": 1521063773, "post_id": 49287861, "comment_id": 85579283, "body": "I can, if you were still trying to read with <code>scanf(&quot;%f&quot;, &amp;array[i]);</code>, you were filling <code>array</code> with <i>zeros</i>..."}, {"owner": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "edited": false, "score": 0, "creation_date": 1521065022, "post_id": 49287861, "comment_id": 85579776, "body": "So what does the 1 if front of the f change?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "edited": false, "score": 0, "creation_date": 1521065251, "post_id": 49287861, "comment_id": 85579897, "body": "It <b>modifies</b> the length of the value stored. With <code>%f</code> you are attempting to store a <code>32-bit</code> floating point number in a <code>64-bit</code> variable. Since the <code>sign-bit</code>, <code>biased exponent</code> and <code>mantissa</code> are encoded in different bits depending on the size, using <code>%f</code> to attempt to store a <code>double</code> always fails` (e.g. the sign-bit is still the MSB for both, but e.g. a <code>float</code> has an <code>8-bit</code> exponent, while a <code>double</code> has <code>11-bits</code>, etc....)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "edited": false, "score": 0, "creation_date": 1521065384, "post_id": 49287861, "comment_id": 85579949, "body": "And <b>note:</b> this is for <code>scanf</code>. You can print a <code>float</code> or <code>double</code> with <code>%f</code> in <code>printf</code>, but if you are reading and converting to floating-point, then you must properly match the type by using <code>%f</code> for <code>float</code> and <code>%lf</code> for <code>double</code>."}, {"owner": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "edited": false, "score": 0, "creation_date": 1521065453, "post_id": 49287861, "comment_id": 85579973, "body": "Ah, I see. Thank you"}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1521064198, "last_edit_date": 1521064198, "creation_date": 1521062743, "answer_id": 49287861, "question_id": 49287237, "link": "https://stackoverflow.com/questions/49287237/getting-c-error-assignment-to-expression-with-array-type/49287861#49287861", "title": "Getting C error &quot;assignment to expression with array type&quot;", "body": "<p>If you have made the changes to insure you are reading doubles with <code>scanf</code> by adding the <code>'l'</code> modifier to your <code>%f</code> <em>format specifier</em> (e.g. <code>\"%lf\"</code>) and you have fixed your attempt to return a statically declared array, by declaring a pointer in <code>main()</code> to which you assign the return from <code>array_function</code>, and properly allocated the array in <code>array_function</code>, then your code should be working without crashing. Also, <code>M_PI</code> should be properly typed as <code>double</code> eliminating the <em>integer division</em> concern.</p>\n\n<p>You must <strong>VALIDATE ALL USER INPUT</strong> (sorry for all caps, but if you learn nothing else here, learn that). That means validating the <strong>return</strong> of <code>scanf</code> and checking the range of the value entered where appropriate.</p>\n\n<p>Putting those pieces together, you could do something like the following (with the code sufficiently spaced so old-eyes can read it):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;complex.h&gt;\n#include &lt;math.h&gt;\n\n#define MAXC 100   /* if you need a constant, define one */\n\ndouble complex convert (double R, int p)\n{\n    double complex Z = 0 + 0 * I;   /* space your code so it is readable */\n    double complex A, B, C;         /* (especially for older eyes......) */\n\n    A = exp (M_PI / 4.0) + 0 * I;\n    B = cos (11 * M_PI / 6.0 + 2 * p * M_PI) + 0 * I;\n    C = I * sin (R * M_PI / 6.0);\n    Z = A * ((R * B) + C);\n\n    return Z;\n}\n\ndouble complex *array_function (double *a, int n)\n{\n    int i;\n    double complex *array = calloc (MAXC, sizeof *array);  /* allocate */\n\n    if (!array) {   /* validate allocation succeeded */\n        perror (\"calloc-array\");\n        exit (EXIT_FAILURE);\n    }\n\n    for (i = 0; i &lt; n; i++)         /* convert your values */\n        array[i] = convert (a[i], i);\n\n    return array;   /* return pointer */\n}\n\nint main (void)\n{\n    int N, i;\n    double complex *new_array;  /* declare pointer to receive return */\n    double array[MAXC];\n\n    printf (\"Enter array length: \");\n    if (scanf(\"%d\", &amp;N) != 1 || N &gt; MAXC) { /* VALIDATE ALL USER INPUT */\n        fprintf (stderr, \"error: invalid input or out of range.\\n\");\n        return 1;\n    }\n\n    for (i=0; i&lt;N; i++) {\n        printf (\"  enter array[%2d]: \", i);\n        if (scanf(\"%lf\", &amp;array[i]) != 1) { /* VALIDATE ALL USER INPUT */\n            fprintf (stderr, \"error: invalid conversion, array[%d].\\n\", i);\n            return 1;\n        }\n    }\n\n    new_array = array_function (array, N);  /* call array_function */\n\n    printf(\"\\nThe new array is: \\n\\n\");\n\n    for (i=0; i&lt;N; i++)     /* output results */\n        printf (\"  %10.6f + i%f \\n\", creal(new_array[i]), cimag(new_array[i]));\n\n    free (new_array);   /* don't forget to free memory you allocate */\n\n    return 0;\n}\n</code></pre>\n\n<p>(<strong>note:</strong> you should <code>free</code> all memory you allocate)</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/complex\nEnter array length: 5\n  enter array[ 0]: 1.81\n  enter array[ 1]: 1.97\n  enter array[ 2]: .31\n  enter array[ 3]: 2.51\n  enter array[ 4]: 6.021\n\nThe new array is:\n\n    3.43798 + i1.781127\n    3.74189 + i1.881977\n    0.58883 + i0.354442\n    4.76758 + i2.121489\n   11.43651 + i-0.024116\n</code></pre>\n\n<p>Look things over and let me know if you have further questions.</p>\n"}], "owner": {"reputation": 21, "user_id": 8820148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a0266c69fc845eecb99fe6edcd039e9?s=128&d=identicon&r=PG&f=1", "display_name": "crylikeacanary", "link": "https://stackoverflow.com/users/8820148/crylikeacanary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4804, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1521064198, "creation_date": 1521059944, "last_edit_date": 1521061099, "question_id": 49287237, "link": "https://stackoverflow.com/questions/49287237/getting-c-error-assignment-to-expression-with-array-type", "title": "Getting C error &quot;assignment to expression with array type&quot;", "body": "<p>The goal of the exercise is to calculate a complex number Z according to some formula and create an array of n such complex numbers. Here's the function that calculates Z</p>\n\n<pre><code>double complex convert(double R, int p)\n    {\n        double complex Z=0+0*I;\n        double complex A, B, C;\n\n        A=exp(M_PI/4) + 0*I;\n        B=cos(11*M_PI/6 + 2*p*M_PI) + 0*I;\n        C=I*sin(R*M_PI/6);\n        Z=A*((R*B)+C);\n\n        return Z;\n    }\n</code></pre>\n\n<p>The function that creates the array:</p>\n\n<pre><code>double complex *array_function (double *a, int n)\n{\n    int i;\n    double complex array[100];\n\n    for (i=0; i&lt;n; i++)\n    {\n       array[i]=convert(*(a+i),i);\n    }\n\n    return array;\n}\n</code></pre>\n\n<p>And int main:</p>\n\n<pre><code>int main()\n{\n    int N, i;\n    double complex *new_array[100];\n    double array[100];\n\n    printf(\"Enter the length of the array = \");\n    scanf(\"%d\", &amp;N);\n\n    for (i=0; i&lt;N; i++)\n    {\n        printf(\"Element number %d is: \", i+1);\n        scanf(\"%f\", &amp;array[i]);\n    }\n\n    new_array=array_function(array, N); // where I get the error message\n    printf(\"The new array is: \\n\");\n\n    for (i=0; i&lt;N; i++)\n    {\n        printf(\"%f + i%f \\n\", creal(new_array[i]), cimag(new_array[i]));\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>But I keep getting the same error message: \"assignment to expression with array type\" in regards to the line: \"new_array=array_function(array, N);\"</p>\n\n<p><strong>Edit:</strong> Here's the edited code:</p>\n\n<pre><code>double complex convert(double R, int p)\n{\n    double complex Z=0+0*I;\n    double complex A, B, C;\n\n    A=exp(M_PI/4) + 0*I;\n    B=cos(11*M_PI/6 + 2*p*M_PI) + 0*I;\n    C=I*sin(R*M_PI/6);\n    Z=A*((R*B)+C);\n\n    return Z;\n}\n\n\n\ndouble complex *array_function (double *a, int n)\n{\n    int i;\n    double complex *array = malloc(100 * sizeof *array);\n\n    for (i=0; i&lt;n; i++)\n    {\n       array[i]=convert(*(a+i),i);\n    }\n\n    return array;\n}\n\nint main()\n{\n    int N, i;\n    double complex *new_array;\n    double array[100];\n\n    printf(\"Enter the length of the array = \");\n    scanf(\"%d\", &amp;N);\n\n    for (i=0; i&lt;N; i++)\n    {\n        printf(\"Element number %d is: \", i+1);\n        scanf(\"%f\", &amp;array[i]);\n    }\n\n    new_array=array_function(array, N); // where I get the error message\n    printf(\"The new array is: \\n\");\n\n    for (i=0; i&lt;N; i++)\n    {\n        printf(\"%f + i%f \\n\", creal(new_array[i]), cimag(new_array[i]));\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "binary"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1521059232, "post_id": 49287015, "comment_id": 85577199, "body": "<code>char *store = malloc(2);</code> but you&#39;re writing a 2 digit number + nul terminator in it. Please <i>don&#39;t post errors as images</i>. That&#39;s not to be annoying. I currently have to guess your output my firewall is blocking the imgur site."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1521059343, "post_id": 49287015, "comment_id": 85577261, "body": "also <code>fwrite (store, sizeof (store), 1, fh);</code> is wrong, <code>sizeof(store)</code> is the size of the pointer, not the data inside it."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1521059540, "post_id": 49287015, "comment_id": 85577335, "body": "<code>malloc(2)</code> is not enough memory. A C string has a NUL terminator (which is a byte with value zero) at the end. So you need at least 3 bytes of memory. And in general, it&#39;s a bad idea to allocate precisely the right number of bytes when the buffer is used with functions like <code>sprintf</code>. Imagine that you <code>malloc(3)</code> at some point that you change 100 to 200. Then, the memory isn&#39;t big enough again. The longest number that <code>sprintf</code> can generate is 20 bytes (assuming 64-bits), so you should <code>malloc(32)</code> just to be on the safe side."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1521059631, "post_id": 49287015, "comment_id": 85577384, "body": "<code>if (fh != NULL)</code> this is way too late. <code>fh</code> should be checked immediately after <code>fopen</code>. Anyway, <code>fwrite</code> is typically used for binary data, not for text. Such as <code>fwrite (&amp;i, sizeof i, 1, fh);</code>"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1521062011, "post_id": 49287015, "comment_id": 85578446, "body": "What is &quot;od command&quot;? It does not occur anywhere in the question or code."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1521062237, "post_id": 49287015, "comment_id": 85578572, "body": "&quot;od&quot; is perhaps &quot;object display&quot;? The linked example output shows that you should be using <code>fprintf</code> and not <code>fwrite</code>."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1521059950, "creation_date": 1521059950, "answer_id": 49287240, "question_id": 49287015, "link": "https://stackoverflow.com/questions/49287015/using-od-command/49287240#49287240", "title": "Using od command", "body": "<p>The real reason for the garbage is the size of your data on the <code>fwrite</code> statement</p>\n\n<pre><code>fwrite (store, sizeof (store), 1, fh);\n</code></pre>\n\n<p><code>sizeof(store)</code> is <em>not</em> the size of the string. It's the size of the <em>pointer</em>.</p>\n\n<p>Aside, allocating 2 bytes for <code>store</code> is wrong. You're forgetting that a 2-digit number as a string needs space for a nul-terminator, so you're writing one char too many.</p>\n\n<p>More minor issue: why testing the handle against <code>NULL</code> in the loop? you could exit in that case.</p>\n\n<p>Also test the argument length (<code>argc</code>).</p>\n\n<pre><code>int main(int argc, char* argv[]) {\n    if (argc&lt;2) exit(1);   // protect against missing arg\n    char *filename = argv[1];\n    char store[50];  // use auto memory, faster &amp; simpler, don't be shy on the size, don't shave it too close\n\n    FILE *fh = fopen(filename, \"wb\");\n    if (fh != NULL) {   // test file handle here, not in the loop\n\n    for(int i = 0; i &lt; 100; i++) {\n        // sprintf returns the number of printed chars, use this\n        // also use the proper format specifier for int\n        int nb_printed = sprintf(store, \"%d\", i);\n        // you may want to check the return value of fwrite...     \n        fwrite (store, nb_printed, 1, fh);\n\n    }\n\n    fclose (fh);\n\n    return 0;\n}\n</code></pre>\n\n<p>Note that this code will create a binary file with all numbers collated:</p>\n\n<pre><code>01234567891011...\n</code></pre>\n\n<p>so hardly useable. I would perform a <code>sprintf(store, \"%d \", i);</code> instead to add spacing between the numbers.</p>\n\n<p>Also note that if you wanted to write characters in a file, you'd be better off with:</p>\n\n<pre><code>fprintf(fh,\"%d \",i);\n</code></pre>\n\n<p>(but I suppose the main point is to learn to use <code>fwrite</code>)</p>\n"}], "owner": {"reputation": 21, "user_id": 8345932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f92b71c0414beec6418333ab04e5f20f?s=128&d=identicon&r=PG&f=1", "display_name": "heskinreaper", "link": "https://stackoverflow.com/users/8345932/heskinreaper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1521059950, "creation_date": 1521058915, "question_id": 49287015, "link": "https://stackoverflow.com/questions/49287015/using-od-command", "title": "Using od command", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(int argc, char* argv[]) {\n    char *filename = argv[1];\n    char *store = malloc(2);\n\n    FILE *fh = fopen(filename, \"wb\");\n\n\n    for(int i = 0; i &lt; 100; i++) {\n        sprintf(store, \"%u\", i);\n\n        if (fh != NULL) {\n            fwrite (store, sizeof (store), 1, fh);\n        }\n    }\n\n    fclose (fh);\n\n    return 0;\n}\n</code></pre>\n\n<p>I want my output to look like this -> <a href=\"https://imgur.com/a/nt2ly\" rel=\"nofollow noreferrer\">https://imgur.com/a/nt2ly</a>. The output it produces currently is all garabge.</p>\n"}, {"tags": ["c++", "c", "function", "mpi"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 4, "creation_date": 1521058867, "post_id": 49286960, "comment_id": 85577012, "body": "<code>multiply</code> doesn&#39;t return anything (its return type is <code>void</code> and it doesn&#39;t seem to have output parameters). Can you show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so that we can see how you&#39;re calling it?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1521059687, "post_id": 49286960, "comment_id": 85577407, "body": "Consistent indentation makes code much easier to understand."}, {"owner": {"reputation": 31, "user_id": 9493783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb92eb2cc5135e620a20bffe42475cd?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Ailantes", "link": "https://stackoverflow.com/users/9493783/eric-ailantes"}, "edited": false, "score": 0, "creation_date": 1521059851, "post_id": 49286960, "comment_id": 85577476, "body": "Thank you for your answers. I just edited my question in order to show a simple example of how I use it."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1521060616, "post_id": 49286960, "comment_id": 85577804, "body": "Please, please, please, use proper indenting."}, {"owner": {"reputation": 613, "user_id": 3112926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33809c5d0f78b110e8613c9e5972dd5?s=128&d=identicon&r=PG&f=1", "display_name": "JGroven", "link": "https://stackoverflow.com/users/3112926/jgroven"}, "edited": false, "score": 0, "creation_date": 1521064966, "post_id": 49286960, "comment_id": 85579747, "body": "This is not written in C."}], "answers": [{"tags": [], "owner": {"reputation": 594, "user_id": 8056248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50334383e1823cf5688da4ed39f8cf5b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Holmgren", "link": "https://stackoverflow.com/users/8056248/andrew-holmgren"}, "is_accepted": false, "score": 0, "last_activity_date": 1521059599, "creation_date": 1521059599, "answer_id": 49287155, "question_id": 49286960, "link": "https://stackoverflow.com/questions/49286960/calling-functions-when-using-parallel-programming/49287155#49287155", "title": "Calling functions when using parallel programming", "body": "<p>Aside from the provided code having issues, the answer to your question is no, each processing element will go through the function as it's called, but maybe you don't want each processing element to do the whole dot product and you'd be better off using a scatterv and gatherv to split the program; or maybe each processing element has its own unique vectors that get reduced or added later and you're fine. Be sure to use MPI types.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 9493783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb92eb2cc5135e620a20bffe42475cd?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Ailantes", "link": "https://stackoverflow.com/users/9493783/eric-ailantes"}, "edited": false, "score": 0, "creation_date": 1521060604, "post_id": 49287308, "comment_id": 85577800, "body": "Indeed, it is working now. Thanks a lot."}], "tags": [], "owner": {"reputation": 2577, "user_id": 6263317, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Imx4J.jpg?s=128&g=1", "display_name": "Jon Deaton", "link": "https://stackoverflow.com/users/6263317/jon-deaton"}, "is_accepted": true, "score": 2, "last_activity_date": 1521060223, "creation_date": 1521060223, "answer_id": 49287308, "question_id": 49286960, "link": "https://stackoverflow.com/questions/49286960/calling-functions-when-using-parallel-programming/49287308#49287308", "title": "Calling functions when using parallel programming", "body": "<p>The initial value of <code>dot</code> is not changing is because it is passed by value. A copy of <code>dot</code> is made when passed to <code>multiply</code> and that is the version that is modified. If you want <code>multiply</code> to modify the <code>dot</code> variable, and keep the changes outside the <code>multiply</code> function, pass <code>dot</code> by reference. </p>\n\n<pre><code>void multiply(double* x, double* y, int tai, double&amp; dot);\n</code></pre>\n\n<p>The fact that you are using MPI has no effect on this behavior.</p>\n"}], "owner": {"reputation": 31, "user_id": 9493783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb92eb2cc5135e620a20bffe42475cd?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Ailantes", "link": "https://stackoverflow.com/users/9493783/eric-ailantes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "closed_date": 1521103514, "accepted_answer_id": 49287308, "answer_count": 2, "score": 2, "last_activity_date": 1521060606, "creation_date": 1521058691, "last_edit_date": 1521060606, "question_id": 49286960, "link": "https://stackoverflow.com/questions/49286960/calling-functions-when-using-parallel-programming", "closed_reason": "Needs more focus", "title": "Calling functions when using parallel programming", "body": "<p>I just have a fairly simple question about using MPI in a C++ program. Indeed, let's take this example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;cblas.h&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\n#include &lt;mpi.h&gt;\n\nvoid multiply(double* x,double* y,int tai,double dot){\n    for(int i=0; i&lt;tai;i=i+1){\n        dot=dot+x[i]*y[i];\n    }\n}\n\nint main(int argc, char* argv[]) {\n    const int n=32;\n    int rank;\n    int size;\n\n    MPI_Init(&amp;argc, &amp;argv);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n\n    int tai=n/size;\n    double* x=new double[tai];\n    double* y=new double[tai];\n    srand(time(0)+rank);\n\n    for(int i=0;i&lt;tai;i=i+1){\n        x[i]=(double)rand()/RAND_MAX*10;\n        y[i]=(double)rand()/RAND_MAX*10;\n    }\n    double dot=0;\n    multiply(x,y,tai,dot);\n    double ddot;\n    MPI_Reduce(&amp;dot, &amp;ddot, 1, MPI_DOUBLE, MPI_SUM,0, MPI_COMM_WORLD);\n    if(rank==0){\n        cout&lt;&lt;\"product:\"&lt;&lt;ddot&lt;&lt;endl;\n    }\n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>Then, I call my function \"multiply\" in my program to multiply two vectors but unfortunately it returns the initial value of \"dot\" (which is basically 0).</p>\n\n<p>I just would like to know if there is anything special about calling a function when we are doing parallel programming.</p>\n\n<p>PS: I know the whole program is working as it gives me good results when I directly multiply my 2 vectors in the \"main\" function</p>\n"}, {"tags": ["c", "oracle"], "comments": [{"owner": {"reputation": 31, "user_id": 7433199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gnpmv.jpg?s=128&g=1", "display_name": "Rich Teer", "link": "https://stackoverflow.com/users/7433199/rich-teer"}, "edited": false, "score": 0, "creation_date": 1521058177, "post_id": 49286577, "comment_id": 85576640, "body": "@JohnH, that code does compile, but I&#39;m not sure it will work because var2 and var3 also have to be inside an EXEC SQL DECLARE SECTION."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7433199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gnpmv.jpg?s=128&g=1", "display_name": "Rich Teer", "link": "https://stackoverflow.com/users/7433199/rich-teer"}, "edited": false, "score": 0, "creation_date": 1521058911, "post_id": 49286933, "comment_id": 85577037, "body": "A variation of that is what I&#39;ve used elsewhere. It just strikes me as being a bit clumsy so I wandering whether there were a more elegant way of doing it. I guess sometimes the right answer has to be the ugly one!"}, {"owner": {"reputation": 180, "user_id": 6621860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bb74954af6f26e28a7b664d80f20699?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/6621860/peter-m"}, "reply_to_user": {"reputation": 31, "user_id": 7433199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gnpmv.jpg?s=128&g=1", "display_name": "Rich Teer", "link": "https://stackoverflow.com/users/7433199/rich-teer"}, "edited": false, "score": 0, "creation_date": 1521059560, "post_id": 49286933, "comment_id": 85577347, "body": "one other thing I used to do I think was look at the C code that is generated by the pro*C precompiler, sometimes that can give some insight into what it is doing behind the scenes and why it is giving the error"}], "tags": [], "owner": {"reputation": 180, "user_id": 6621860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bb74954af6f26e28a7b664d80f20699?s=128&d=identicon&r=PG", "display_name": "Peter M", "link": "https://stackoverflow.com/users/6621860/peter-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1521058594, "creation_date": 1521058594, "answer_id": 49286933, "question_id": 49286577, "link": "https://stackoverflow.com/questions/49286577/how-to-use-ansi-c-function-prototypes-with-oracle-proc/49286933#49286933", "title": "How to use ANSI C function prototypes with Oracle Pro*C?", "body": "<p>It has been a while since I did Pro C, but couldn't you do your variable assignment after the declare block (the  var2 = func_var2 bit?) and keep the declare part the same as before?</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 7433199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gnpmv.jpg?s=128&g=1", "display_name": "Rich Teer", "link": "https://stackoverflow.com/users/7433199/rich-teer"}, "is_accepted": false, "score": 1, "last_activity_date": 1543515032, "last_edit_date": 1543515032, "creation_date": 1521138424, "answer_id": 49306749, "question_id": 49286577, "link": "https://stackoverflow.com/questions/49286577/how-to-use-ansi-c-function-prototypes-with-oracle-proc/49306749#49306749", "title": "How to use ANSI C function prototypes with Oracle Pro*C?", "body": "<p>After some more digging, I've come up with what I think is the correct answer, which is to use a standard ANSI C prototype for the function, and then (re)declare the host variables inside an <code>EXEC SQL</code> block. Following is a small example.</p>\n\n<p>Before (K&amp;R prototype):</p>\n\n<pre><code>static my_func (arg1, arg2, arg3)\nEXEC SQL BEGIN DECLARE SECTION;\n    EXEC SQL VAR arg1 IS STRING (STR_LEN);\n    EXEC SQL VAR arg2 IS STRING (STR_LEN);\nEXEC SQL END DECLARE SECTION;\nint arg3\n{\n    /* Rest of function here... */\n}\n</code></pre>\n\n<p>After (ANSI C prototype):</p>\n\n<pre><code>static my_func (char *arg1, char *arg2, int arg3)\n{\n    EXEC SQL BEGIN DECLARE SECTION;\n        EXEC SQL VAR arg1 IS STRING (STR_LEN);\n        EXEC SQL VAR arg2 IS STRING (STR_LEN);\n    EXEC SQL END DECLARE SECTION;\n\n    /* Rest of function here... */\n}\n</code></pre>\n\n<p>Thanks to everyone for their helpful pointers and advice!</p>\n\n<p>Addendum 29/11/2018: If one is using plain ANSI C and sets the Pro*C MODE to ORACLE, the entire SQL Declaration section can be omitted. Here's what the Oracle documentation says: \"If MODE=ORACLE, you do not have to declare host variables in a special Declare Section. However, if you do not use a Declare Section, the FIPS flagger warns you about this, as the Declare Section is part of the ANSI SQL Standard. If CODE=CPP (you are compiling C++ code) or PARSE=NONE or PARSE=PARTIAL, then you must have a Declare Section.\"</p>\n\n<p>In my situation (just plain ANSI C, MODE=ORACLE, and PARSE=FULL), this worked like a charm!</p>\n"}], "owner": {"reputation": 31, "user_id": 7433199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gnpmv.jpg?s=128&g=1", "display_name": "Rich Teer", "link": "https://stackoverflow.com/users/7433199/rich-teer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1543515032, "creation_date": 1521057084, "question_id": 49286577, "link": "https://stackoverflow.com/questions/49286577/how-to-use-ansi-c-function-prototypes-with-oracle-proc", "title": "How to use ANSI C function prototypes with Oracle Pro*C?", "body": "<p>I am an old hand C developer but relatively new to Pro*C development. I have inherited some Pro*C code that doesn't use ANSI prototypes, which I would to change so that it does. For most functions this is an easy process, but I'm not sure how to approach the functions that have one or more arguments that are embedded database (aka host) variables.</p>\n\n<p>For example, I have a function that currently uses K&amp;R prototypes and looks like this:</p>\n\n<pre><code>static long my_func (var1, var2, var3, var4)\nint *var1;\nEXEC SQL BEGIN DECLARE SECTION;\nint var2;\nint var3;\nchar *var4;\nEXEC SQL VAR var4 IS STRING (GL_CD_LEN);\nEXEC SQL END DECLARE SECTION;\n{\n    /*\n     * Rest of function here...\n     */\n}\n</code></pre>\n\n<p>I would like to change this so that it uses proper ANSI C prototypes, but I don't know how to handle the Pro*C host variables in this context. The best I've managed to do so far is something like this:</p>\n\n<pre><code>static long my_func (int *var1, int func_var2, int func_var3, char *func_var4)\n{\n    EXEC SQL BEGIN DECLARE SECTION;\n    int var2 = func_var2;\n    int var3 = func_var3;\n    char *var4;\n    EXEC SQL VAR var4 IS STRING (GL_CD_LEN);\n    EXEC SQL END DECLARE SECTION;\n\n    /*\n     * Rest of function here...\n     */\n}\n</code></pre>\n\n<p>But that doesn't strike me as being particularly elegant, and I'm not sure that I'm handling the string (<code>func_var4</code>) correctly.</p>\n\n<p>I also tried the following:</p>\n\n<pre><code>static long my_func (int *var1, EXEC SQL BEGIN DECLARE SECTION; int var2, int var3, char *var4 EXEC SQL VAR var4 IS STRING (GL_CD_LEN); EXEC SQL END DECLARE SECTION;)\n{\n    /*\n     * Rest of function here...\n     */\n}\n</code></pre>\n\n<p>But that just causes Pro*C to barf with the following error:</p>\n\n<pre><code>Syntax error at line 7136, column 117, file EMY.i:\nError at line 7136, column 117 in file EMY.i\nstatic long fdc_regis (int *cur_ind, EXEC SQL BEGIN DECLARE SECTION; int run_no,\nint incl_accr_ind, char *accrgl_cd EXEC SQL VAR accrgl_cd IS STRING (41); EXEC\nSQL END DECLARE SECTION;)\n................................................................................\n....................................1\nPCC-S-02201, Encountered the symbol \"exec sql var\" when expecting one of the fol\nlowing:\n\n, ( [ exec sql end,\n</code></pre>\n\n<p>So I'm guess I'm barking up the wrong tree there! So my question is, \"What's the correct way to use ANSI C function prototypes with host variable parameters in Pro*C?\". All documentation I've been able to find is frustratingly quiet about this particular topic, even though host variables are otherwise covered quite well.</p>\n\n<p>I'm using Pro*C/C++: Release 12.1.0.2.0 and (not that it probably matters) gcc 4.8.5 as the C compiler, on CentOS 7.4. I should also add that I am passing <code>parse=full code=ansi_c</code> (among others but these two seem to be the most pertinent) as command line arguments to <code>proc</code>.</p>\n\n<p>Any help would be gratefully received!</p>\n"}, {"tags": ["python", "c", "list", "pointers", "python-cffi"], "answers": [{"tags": [], "owner": {"reputation": 10650, "user_id": 1556290, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b37e6b4ac97453e4ba9dba37954cf79?s=128&d=identicon&r=PG", "display_name": "Armin Rigo", "link": "https://stackoverflow.com/users/1556290/armin-rigo"}, "is_accepted": true, "score": 0, "last_activity_date": 1521059586, "creation_date": 1521059586, "answer_id": 49287151, "question_id": 49286039, "link": "https://stackoverflow.com/questions/49286039/pass-a-list-of-object-references-to-a-cffi-function/49287151#49287151", "title": "Pass a list of object references to a CFFI function", "body": "<p>The type <code>struct node **</code> in C is almost equivalent to <code>struct node *[]</code>, which stands for \"an array of pointers to nodes\".  So you want <code>array = ffi.new(\"struct node *[]\", x)</code>.  This allocates an array of length <code>x</code>, if it is an integer; or, you can directly put in <code>x</code> a list of the cffi pointers, e.g. <code>array = ffi.new(\"struct node *[]\", [child.as_cffi_pointer() for child in self.children])</code>.</p>\n\n<p>Be careful that all cffi objects created with <code>ffi.new()</code> must be kept alive manually as long as needed.  Just storing the C pointer somewhere will not keep alive the cffi object in Python.  If you forget to keep alive the Python-side cffi object, then the C pointer will quickly point to deallocated memory.  This concerns both the <code>ffi.new(\"struct node *\")</code> and the <code>ffi.new(\"struct node *[]\", x)</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 1483568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84ea91695cb3a1533075b9747b951b37?s=128&d=identicon&r=PG", "display_name": "Heusi", "link": "https://stackoverflow.com/users/1483568/heusi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "accepted_answer_id": 49287151, "answer_count": 1, "score": 1, "last_activity_date": 1521059586, "creation_date": 1521055014, "last_edit_date": 1521055757, "question_id": 49286039, "link": "https://stackoverflow.com/questions/49286039/pass-a-list-of-object-references-to-a-cffi-function", "title": "Pass a list of object references to a CFFI function", "body": "<p>I am coding on a project where I need to process many tree-like data elements, to overcome some performance issues I want to call a given processing function already written in C with the signature <code>int process(Node* root)</code> and a tree node defined as: </p>\n\n<pre><code>typedef struct Node {\n    int value;\n    struct Node ** children;\n    int num_children;\n} Node;\n</code></pre>\n\n<p>Thus a tree node can have an arbitrary number of child nodes. Analogously a tree node in my Python project is defined as:</p>\n\n<pre><code>class Node():\n    def __init__(self,value):\n        self.value = value\n        self.children = list()\n\n    def add_child(self,child):\n        self.children.append(child)\n</code></pre>\n\n<p>To call the C function I would like to use <a href=\"https://cffi.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">CFFI</a>. The problem I ran into is that I need to convert my Python tree data structure to a matching C representation. A node representation, which can be passed to the CFFI function can be created via: </p>\n\n<pre><code>ffi_node = ffi.new(\"Node *\")\nffi_node.value = some_value\n</code></pre>\n\n<p>But I could not find a way to convert the list references to children to the <code>struct Node** children</code>.</p>\n"}, {"tags": ["c", "list", "sequential"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 12, "creation_date": 1521053141, "post_id": 49285501, "comment_id": 85573856, "body": "I have a feeling that you are not telling us everything...<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, please."}, {"owner": {"reputation": 21, "user_id": 9493354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b95018ff34698758be1c541d51d1ccb?s=128&d=identicon&r=PG&f=1", "display_name": "neilpare2", "link": "https://stackoverflow.com/users/9493354/neilpare2"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1521053952, "post_id": 49285501, "comment_id": 85574325, "body": "Ok I tried... The rest of the code doesn&#39;t have anything in common with the problem."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1521054091, "post_id": 49285501, "comment_id": 85574398, "body": "I afraid it is not enough. We need a complete snippet that you can compile and see the warning."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1521054235, "post_id": 49285501, "comment_id": 85574463, "body": "Please <a href=\"https://stackoverflow.com/posts/49285501/edit\">edit</a> your question and add the verbatim error/warning message."}, {"owner": {"reputation": 21, "user_id": 9493354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b95018ff34698758be1c541d51d1ccb?s=128&d=identicon&r=PG&f=1", "display_name": "neilpare2", "link": "https://stackoverflow.com/users/9493354/neilpare2"}, "edited": false, "score": 0, "creation_date": 1521054249, "post_id": 49285501, "comment_id": 85574472, "body": "That doesn&#39;t seem minimal... I didn&#39;t finish so the code wouldn&#39;t work! I included the screen but I don&#39;t think I can do better. I hope is enough. :)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1521054258, "post_id": 49285501, "comment_id": 85574476, "body": "OK, the screenshot is suggesting that it&#39;s not a compiler, but the IDE warning. Well, it&#39;s nice. I guess in order to get rid of it you should check the return value of <code>scanf</code> (if the IDE is really that smart as it pretends to be)"}, {"owner": {"reputation": 21, "user_id": 9493354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b95018ff34698758be1c541d51d1ccb?s=128&d=identicon&r=PG&f=1", "display_name": "neilpare2", "link": "https://stackoverflow.com/users/9493354/neilpare2"}, "edited": false, "score": 0, "creation_date": 1521054290, "post_id": 49285501, "comment_id": 85574495, "body": "I did... (?) &quot; &#39;scanf&#39; used to convert a string to an integer value&quot;"}, {"owner": {"reputation": 21, "user_id": 9493354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b95018ff34698758be1c541d51d1ccb?s=128&d=identicon&r=PG&f=1", "display_name": "neilpare2", "link": "https://stackoverflow.com/users/9493354/neilpare2"}, "edited": false, "score": 0, "creation_date": 1521054326, "post_id": 49285501, "comment_id": 85574519, "body": "I&#39;ll be back in a moment, thanks anyway for now"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1521054475, "post_id": 49285501, "comment_id": 85574595, "body": "Try <code>int valuesred = scanf(&quot;%d&quot;, &amp;ch);</code> and see if the warnign disapear. But you can probably ignore this warning which sees rather strange to me.."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1521055957, "post_id": 49285501, "comment_id": 85575385, "body": "Posting a screenshot for a single line of <i>text</i> is not justified.  You could have simply transcribed the text.  You have partially transcribed it - but omitted perhaps the important part!"}, {"owner": {"reputation": 21, "user_id": 9493354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b95018ff34698758be1c541d51d1ccb?s=128&d=identicon&r=PG&f=1", "display_name": "neilpare2", "link": "https://stackoverflow.com/users/9493354/neilpare2"}, "edited": false, "score": 0, "creation_date": 1521056333, "post_id": 49285501, "comment_id": 85575581, "body": "Been told to put the screenshot and so I did... Read all the comments! (I also said that it doesn&#39;t seem minimal)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1521056679, "post_id": 49285501, "comment_id": 85575763, "body": "Nope, the comments did not tell you to post a screenshot. The first comment advised to post the <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>. Did you read the link?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1521057309, "post_id": 49285501, "comment_id": 85576143, "body": "I would be more concerned about the very last line in the screenshot &quot;Too few arguments, expected 2. Missing &#39;;&#39; &quot;. And I would also be concerned about function <code>getsize(int size)</code> which overwrites the argument passed to it."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1521060811, "post_id": 49285501, "comment_id": 85577881, "body": "Welcome to Stack Overflow! Your image of text <a href=\"//meta.unix.stackexchange.com/q/4086\">isn&#39;t very helpful</a>.  It can&#39;t be copied into an editor, and it doesn&#39;t index very well, meaning that other users with the same problem are less likely to find the answer here.  Please <a href=\"https://stackoverflow.com/posts/49285501/edit\">edit</a> your post to incorporate the relevant text directly (preferably using copy+paste to avoid transcription errors)."}, {"owner": {"reputation": 21, "user_id": 9493354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b95018ff34698758be1c541d51d1ccb?s=128&d=identicon&r=PG&f=1", "display_name": "neilpare2", "link": "https://stackoverflow.com/users/9493354/neilpare2"}, "edited": false, "score": 0, "creation_date": 1521121911, "post_id": 49285501, "comment_id": 85604249, "body": "Ok i\u2019ll copy paste the entire code"}, {"owner": {"reputation": 21, "user_id": 9493354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b95018ff34698758be1c541d51d1ccb?s=128&d=identicon&r=PG&f=1", "display_name": "neilpare2", "link": "https://stackoverflow.com/users/9493354/neilpare2"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1521121999, "post_id": 49285501, "comment_id": 85604314, "body": "@WeatherVane i said that it\u2019s not finished! What about concentrate on the question?"}], "answers": [{"comments": [{"owner": {"reputation": 4408, "user_id": 1315419, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c129056df36a71ea805c143f495a6a91?s=128&d=identicon&r=PG", "display_name": "Vasan", "link": "https://stackoverflow.com/users/1315419/vasan"}, "edited": false, "score": 0, "creation_date": 1521055280, "post_id": 49286061, "comment_id": 85574984, "body": "I don&#39;t think <i>advice is more the opinion of *whoever wrote your IDE*</i> is correct. The check originates from here : <a href=\"https://wiki.sei.cmu.edu/confluence/display/c/ERR34-C.+Detect+errors+when+converting+a+string+to+a+number\" rel=\"nofollow noreferrer\">wiki.sei.cmu.edu/confluence/display/c/&hellip;</a>"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 4408, "user_id": 1315419, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c129056df36a71ea805c143f495a6a91?s=128&d=identicon&r=PG", "display_name": "Vasan", "link": "https://stackoverflow.com/users/1315419/vasan"}, "edited": false, "score": 0, "creation_date": 1521055697, "post_id": 49286061, "comment_id": 85575216, "body": "@Vasan : I have removed that in a significant edit.  That said, the author of the IDE chose to integrate that coding standard into the IDE, so is at least his shared opinion.  Neither solution is a robust error check of valid in range input."}, {"owner": {"reputation": 21, "user_id": 9493354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b95018ff34698758be1c541d51d1ccb?s=128&d=identicon&r=PG&f=1", "display_name": "neilpare2", "link": "https://stackoverflow.com/users/9493354/neilpare2"}, "edited": false, "score": 0, "creation_date": 1521056617, "post_id": 49286061, "comment_id": 85575729, "body": "Ok, thanks for the answer!"}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": true, "score": 5, "last_activity_date": 1613763314, "last_edit_date": 1613763314, "creation_date": 1521055079, "answer_id": 49286061, "question_id": 49285501, "link": "https://stackoverflow.com/questions/49285501/strange-warning-about-conversion-between-string-and-int/49286061#49286061", "title": "Strange warning about conversion between &#39;string&#39; and &#39;int&#39;", "body": "<p>The warning is clear about why; you have omitted the part that says &quot;<em>function will not report conversion errors</em>&quot;.  However it is also clearly nonsense : <code>strtol()</code> does not report conversion errors either - it simply returns zero if there is a conversion error - but that is indistinguishable from a successful conversion of &quot;0&quot;.</p>\n<p>With <code>scanf()</code> at least the return value is an unambiguous indication of success or otherwise. It is true that <code>scanf()</code> does not report conversion errors, it reports a count of successful conversions, so when there is only one conversion as in this case, a return value of zero is exactly reporting the conversion error.</p>\n<p>The &quot;warning&quot; is generated by your IDE not your compiler and is merely advice (bad advice IMO) - you can clearly choose to ignore the advice.</p>\n<p>But you should at least <em>check</em> the return value from <code>scanf()</code>. If <code>scanf()</code> fails, the value of <code>ch</code> is undefined.  An advantage of <code>strtol()</code> is that on failure it returns at least a defined value - zero - and in this <em>specific</em> case at least, zero is an invalid value, so it has merit; but not for the reason suggested in the warning perhaps.</p>\n"}], "owner": {"reputation": 21, "user_id": 9493354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b95018ff34698758be1c541d51d1ccb?s=128&d=identicon&r=PG&f=1", "display_name": "neilpare2", "link": "https://stackoverflow.com/users/9493354/neilpare2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 701, "favorite_count": 1, "closed_date": 1521063349, "accepted_answer_id": 49286061, "answer_count": 1, "score": 0, "last_activity_date": 1613763314, "creation_date": 1521052990, "last_edit_date": 1521122762, "question_id": 49285501, "link": "https://stackoverflow.com/questions/49285501/strange-warning-about-conversion-between-string-and-int", "closed_reason": "Not suitable for this site", "title": "Strange warning about conversion between &#39;string&#39; and &#39;int&#39;", "body": "<p>I use CLion by the way. </p>\n\n<pre><code>int ch;\nprintf(\"Insert the operation you want to execute: \");\nscanf(\"%d\", &amp;ch); //HERE\n</code></pre>\n\n<p>I declare ch as an integer variable and with <em>scanf</em> and <em>%d</em> and I want the user to insert a value to insert in the ch variable but HERE a warning pops up and says: <em>\" 'scanf' used to convert a string to an integer value\"</em></p>\n\n<p>I can't understand why... </p>\n\n<p>Here is the entire code, as requested in comments:\n(the code is modified because I changed it since yesterday)</p>\n\n<pre><code>typedef unsigned int boolean;\n\nstruct list{\nfloat * buffer;\nint size;\nint head;\nint tail;\n};\n\nint getsize();\nfloat getvalue();\nvoid init(struct list*, int);\nboolean suf_insert(struct list*, float, int);\nboolean pre_insert(struct list*, float, int);\nvoid visit(struct list*);\n\nint main(){\n\nstruct list listA;\nstruct list listB;\nint size=0;\n\nint ch;\n\nwhile(1){\n\n    printf(\"Sequential Lists operations\\n\");\n    printf(\"1.  Insert the size of the array\\n\");\n    printf(\"2.  Initialize the list A\\n\");\n    printf(\"3.  Initialize the list B\\n\");\n    printf(\"4.  \\n\");\n    printf(\"5.  \\n\");\n    printf(\"6.  \\n\");\n    printf(\"7.  \\n\");\n\n    printf(\"\\nInsert the operation you want to execute: \");\n    scanf(\"%d\", &amp;ch);\n    switch(ch){\n        case 1: size=getsize();\n            break;\n        case 2: init(&amp;listA, size);\n            break;\n        case 3: init(&amp;listB, size);\n            break;\n        case 4: getvalue();\n            break;\n        case 5:\n            break;\n        case 6:\n            break;\n        case 7:\n            break;\n\n        default: printf(\"\\nInvalid command. Retry\\n\");\n            break;\n    }\n}\n\n}\nint getsize(){\nint size;\nprintf(\"Insert the size of the list you want to create: \");\nscanf(\"%d\", &amp;size);\nreturn size;\n}\n\nfloat getvalue(){\nfloat value;\nprintf(\"The value you want to insert: \");\nscanf(\"%f\", &amp;value);\n\nreturn value;\n}\n\nvoid init(struct list * ptr, int size) {\n\nif (size != 0) {\n    ptr-&gt;buffer = (float *) malloc(size * sizeof(int));\n    ptr-&gt;size = size;\n    ptr-&gt;head = 0;\n    ptr-&gt;tail = 0;\n} else {\n    printf(\"\\nBefore continue, insert the size.\\n\");\n}\n}\n\nboolean suf_insert(struct list * ptr, float value, int size){\n\n    if(((ptr-&gt;tail + 1) % ptr-&gt;size) != ptr-&gt;head &amp;&amp; size!=0) {\n\n        ptr-&gt;buffer[ptr-&gt;tail] = value;\n        ptr-&gt;tail = (ptr-&gt;tail + 1) % ptr-&gt;size;\n\n        return TRUE;\n    } else {\n\n        return FALSE;\n    }\n}\n\nboolean pre_insert(struct list * ptr, float value, int size){\n\nif(((ptr-&gt;tail + 1) % ptr-&gt;size) != ptr-&gt;head &amp;&amp; size!=0){\n\n        ptr-&gt;head = (ptr-&gt;head + ptr-&gt;size - 1) % ptr-&gt;size;\n        ptr-&gt;buffer[ptr-&gt;head] = value;\n\n        return TRUE;\n}else{\n\n        return FALSE;\n}\n}\n\nvoid visit(struct list * ptr){\n\nint position;\nfor(position=ptr-&gt;head; position!=ptr-&gt;tail; position=(position+1)%ptr-     &gt;size){\n    printf(\"%f\", ptr-&gt;buffer[position]);\n}\n\n}\n</code></pre>\n\n<p>IT SEEMS LIKE I HAVE TO REPEAT: this code ISN'T PERFECT, maybe the exact opposite! I'm still working on it!</p>\n"}, {"tags": ["c", "dot"], "comments": [{"owner": {"reputation": 787, "user_id": 6715227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NB84a.png?s=128&g=1", "display_name": "stetoc", "link": "https://stackoverflow.com/users/6715227/stetoc"}, "edited": false, "score": 2, "creation_date": 1521054048, "post_id": 49285455, "comment_id": 85574369, "body": "you want to do it on linux or windows?"}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 1, "creation_date": 1521054279, "post_id": 49285455, "comment_id": 85574487, "body": "<code>system()</code> is ok. There must be something in the environment of the calling program that caueses the problem (I don&#39;t know dot, so I can&#39;t guess what). <code>execl()</code> would be <code>ececl( &quot;dot&quot;, &quot;dot&quot;, &quot;-Tpng&quot;, &quot;-o&quot;, ...., NULL )</code> -- every argument as an individual string staring with the program name (<code>argv[0]</code> in a C <code>main()</code>). Be aware that <code>exec...()</code> <i>overload</i> the calling process"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1521054506, "post_id": 49285455, "comment_id": 85574612, "body": "There&#39;s always the question of <i>where</i> is your program is trying to create that file. Try <code>system(&quot;pwd&quot;)</code> to see the working directory."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521075097, "post_id": 49285455, "comment_id": 85582904, "body": "when asking a question about a runtime problem, as this question is doing, please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can help you debug the problem. without our having to guess as to what your program is actually doing."}, {"owner": {"reputation": 25, "user_id": 7595241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a619cf7ef308f7d3b9c4d38774c26f?s=128&d=identicon&r=PG&f=1", "display_name": "Philippe Ear", "link": "https://stackoverflow.com/users/7595241/philippe-ear"}, "edited": false, "score": 0, "creation_date": 1521138002, "post_id": 49285455, "comment_id": 85615422, "body": "I want to do it on Linux and <code>system(&quot;pwd&quot;)</code> returns the correct path (the one where my c files are and where I&#39;m doing everything)"}], "owner": {"reputation": 25, "user_id": 7595241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a619cf7ef308f7d3b9c4d38774c26f?s=128&d=identicon&r=PG&f=1", "display_name": "Philippe Ear", "link": "https://stackoverflow.com/users/7595241/philippe-ear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521137927, "creation_date": 1521052847, "last_edit_date": 1521137927, "question_id": 49285455, "link": "https://stackoverflow.com/questions/49285455/system-with-dot-doesnt-create-the-dot-file", "title": "system() with dot doesn&#39;t create the .dot file", "body": "<p>I'm trying to make my code use the command <code>dot -Tpng -o file.png file.dot</code> but it doesn't seem to work with <code>system(\"dot -Tpng -o file.png file.dot\")</code>.<br>\nIt returns 0 but no files are created.<br>\nI also tried to do <code>execl(\"dot\",\"-Tpng -o file.png file.dot\",NULL)</code>but I don't think this is the correct syntax or way to do it. </p>\n\n<p>Is there a way to make my C program (on Linux) execute the command line ?<br>\nHere is my code : </p>\n\n<pre><code>FILE *f = fopen(\"file.dot\",\"w\");\nfprintf(f, \"digraph graphname {\\n\\ta-&gt;b [label = 1]\\n}\");\nsystem(\"dot -Tpng -o file.png file.dot\");\nfclose(f);\nreturn 0;\n</code></pre>\n\n<p>EDIT  :<br>\nI moved the <code>fclose(f)</code>before the <code>system()</code> call and it worked.<br>\nI guess it had something to do with f not being closed.</p>\n"}, {"tags": ["c++", "c", "linux", "futex", "timespec"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1521052506, "post_id": 49285223, "comment_id": 85573515, "body": "Assuming you get the error from <code>sem_timedwait(&amp;hFCRequestEvt, &amp;ts);</code>, how do you know you get an error?  The posted code isn&#39;t checking any return values."}, {"owner": {"reputation": 124, "user_id": 1907736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/555d3b88446a59b84b73596d9746ef52?s=128&d=identicon&r=PG", "display_name": "0x64", "link": "https://stackoverflow.com/users/1907736/0x64"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1521053355, "post_id": 49285223, "comment_id": 85573986, "body": "It returns -1 and perror prints &quot;Connection timed out&quot;. Then immediately I get &quot;The futex facility returned an unexpected error code.Aborted (core dumped)&quot;"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1521055313, "post_id": 49285223, "comment_id": 85575009, "body": "<i>It returns -1 and perror prints &quot;Connection timed out&quot;.</i> What call to <code>perror()</code>?  Your posted code doesn&#39;t match what you&#39;re describing?  I also wonder how you avoid race conditions in accessing the members of <code>requests</code> - you&#39;re not doing any locking to access the <code>state</code>, and presumably other threads can alter that value."}, {"owner": {"reputation": 124, "user_id": 1907736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/555d3b88446a59b84b73596d9746ef52?s=128&d=identicon&r=PG", "display_name": "0x64", "link": "https://stackoverflow.com/users/1907736/0x64"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1521056355, "post_id": 49285223, "comment_id": 85575596, "body": "I added code on my end for the return value and perror() for debugging. They are not in the original question. Sorry for the confusion.The requests are irrelevant here. The STARTED state just marks the beginning of the requests processing. There is no race condition."}, {"owner": {"reputation": 124, "user_id": 1907736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/555d3b88446a59b84b73596d9746ef52?s=128&d=identicon&r=PG", "display_name": "0x64", "link": "https://stackoverflow.com/users/1907736/0x64"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1521073943, "post_id": 49285223, "comment_id": 85582614, "body": "After I wrote more code for the other parts of the program, as mysterious as the problem appeared, it now disappeared. sem_timedwait now works as expected even though I&#39;ve made no change to the posted code, which is pretty weird because I am sure the futex facility error originated from the thread that is doing sem_timedwait."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521075338, "post_id": 49285223, "comment_id": 85582971, "body": "please add a &#39;EDIT&#39; section to your question, with the updated code.  Other wise we are just guessing.   Also, post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can see what your code is actually doing."}], "owner": {"reputation": 124, "user_id": 1907736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/555d3b88446a59b84b73596d9746ef52?s=128&d=identicon&r=PG", "display_name": "0x64", "link": "https://stackoverflow.com/users/1907736/0x64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 815, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521052089, "creation_date": 1521052089, "question_id": 49285223, "link": "https://stackoverflow.com/questions/49285223/sem-timedwait-causes-the-futex-facility-returned-an-unexpected-error-code", "title": "sem_timedwait causes &quot;The futex facility returned an unexpected error code&quot;", "body": "<p>What is wrong with this code? When the sem object is posted, it is fine. However as soon as it needs to wait for the time out, I get \"The futex facility returned an unexpected error code\".</p>\n\n<pre><code>void* BackgroudProc(void*){\n    struct timespec ts;\n    while(1){\n        clock_gettime(CLOCK_REALTIME, &amp;ts);\n        ts.tv_sec += 10;\n        sem_timedwait(&amp;hFCRequestEvt, &amp;ts);\n        for(int i = 0; i &lt; requests.size(); i++){\n            if(numOfConnection &gt;= MAX_CONNECTION)\n                break;\n            if(requests[i].state == QUEUED){\n                requests[i].state = STARTED;\n                numOfConnection++;\n                pthread_create(&amp;requests[i].tid, 0, (void* (*)(void*))FileCopyFSM, (void*)(&amp;requests[i]));\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "gmp"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1521052974, "post_id": 49285214, "comment_id": 85573789, "body": "GMP&#39;s floating point support is rather limited. You should use another library such as GNU MPFR (which is based on GMP)."}], "answers": [{"tags": [], "owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "is_accepted": false, "score": 1, "last_activity_date": 1521072009, "last_edit_date": 1521072009, "creation_date": 1521069947, "answer_id": 49289169, "question_id": 49285214, "link": "https://stackoverflow.com/questions/49285214/c-gmp-non-integer-powers/49289169#49289169", "title": "C GMP Non-Integer Powers", "body": "<blockquote>\n  <p>Is there a function in this library that can do powers in the form of\n  doubles,</p>\n</blockquote>\n\n<p>No. </p>\n\n<blockquote>\n  <p>and if not, is there a fast algorithm I can make use of instead?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<p>The <code>x</code> to power <code>1.0/n</code> is the same as square <code>n</code> root of <code>x</code>. And there is an efficient algorithm to calculate that see: <a href=\"https://en.wikipedia.org/wiki/Nth_root_algorithm\" rel=\"nofollow noreferrer\">nth root algorithm - Wikipedia</a></p>\n\n<p>This is working C code which you can easily adapt for GMP.</p>\n\n<p>Function:</p>\n\n<pre><code>void mpf_pow_ui (mpf_t rop, const mpf_t op1, unsigned long int op2);\n</code></pre>\n\n<p>- set <code>rop</code> to <code>op1</code> raised to the power <code>op2</code>, can be used in place of <code>dexp</code>.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\ndouble dexp(double a, double toN){\n    double ret = 1;\n\n    for(int i = 0; i&lt; toN; ++i)\n        ret *= a;\n    return ret;\n}\n\ndouble nth_root(double num, int N, double precision){\n    double x;\n    double dx;\n    double eps = precision; \n    double A = num;\n    double n = N;\n\n    x = A * 0.5;\n\n    dx = (A/dexp(x,n-1)-x)/n;\n\n    while(dx &gt;= eps || dx &lt;= -eps){\n\n        x = x + dx;\n        dx = (A/dexp(x,n-1)-x)/n;\n    }\n\n   return x;\n}\n\nint main()\n{\n    int N = 4;\n    int A = 81.0;\n\n    double nthRootValue = nth_root(A, N, 10e-8);\n    printf(\"Nth root is %lf\", nthRootValue);\n\n    return 0;\n}\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>Nth root is 3.000000\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9493335, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FFPGc6FYUDE/AAAAAAAAAAI/AAAAAAAAABU/eqOqhWkz9yE/photo.jpg?sz=128", "display_name": "Cobalt _000", "link": "https://stackoverflow.com/users/9493335/cobalt-000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1521072009, "creation_date": 1521052058, "question_id": 49285214, "link": "https://stackoverflow.com/questions/49285214/c-gmp-non-integer-powers", "title": "C GMP Non-Integer Powers", "body": "<p>I am using the C GMP library, and I am trying to calculate a float with the mpf_t type raised to the power 1.0 / n where n is an int.  However, it seems that the pow function for this type only takes integer inputs for the power. Is there a function in this library that can do powers in the form of doubles, and if not, is there a fast algorithm I can make use of instead?</p>\n"}, {"tags": ["c", "windows", "assembly", "64-bit"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1521047826, "post_id": 49283616, "comment_id": 85570663, "body": "you need call <code>func-&gt;func_i</code> direct from asm code if you setup registers in asm. unclear which type and count of arguments you use. anyway first 4 args passed by register (<i>xmm0-3</i> for double or <i>rcx,rdx,r8,r9</i> for integer types, other begin from <code>[rsp+20h]</code> and stack must be aligned on 16 before call instruction"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1521088000, "post_id": 49283616, "comment_id": 85585823, "body": "The C compiler uses the registers.  It can&#39;t possibly work reliably to make a bunch of function calls like <code>fill_register_xmm0</code> and hope that the compiler doesn&#39;t clobber any of those registers.  And BTW, <code>movsd  xmm0, variable</code> probably assembles to <code>movsd  xmm0, xmm0</code>, because the first function arg is passed in XMM0 if it&#39;s FP."}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1521512236, "post_id": 49284040, "comment_id": 85751810, "body": "You don&#39;t actually need type info for the Windows x86-64 calling convention.  You can prepare a flat buffer of args and pass it to a wrapper function, which loads the first 32 bytes into both XMM and integer registers and copies the rest onto the stack.  I eventually finished writing an answer for this with a hopefully-working asm wrapper."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1521048081, "creation_date": 1521048081, "answer_id": 49284040, "question_id": 49283616, "link": "https://stackoverflow.com/questions/49283616/how-to-set-function-arguments-in-assembly-during-runtime-in-a-64bit-application/49284040#49284040", "title": "How to set function arguments in assembly during runtime in a 64bit application on Windows?", "body": "<p>So you need to call a function (in a DLL) but only at run-time can you figure out the number and type of parameters. Then you need to perpare the parameters, either on the stack or in registers, depending on the Application Binary Interface/calling convention.</p>\n\n<p>I would use the following approach: some component of your program figures out the number and type of parameters. Let's assume it creates a list of <code>{type, value}, {type, value}, ...</code></p>\n\n<p>You then pass this list to a function to prepare the ABI call. This will be an assembler function. For a stack-based ABI (32 bit), it just pushes the parameters on to the stack. For a register based ABI, it can prepare the register values and save them as local variables (<code>add sp,nnn</code>) and once all parameters have been prepared (possibly using registers needed for the call, hence first saving them), loads the registers (a series of <code>mov</code> instructions) and performs the <code>call</code> instruction.</p>\n"}, {"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1521536762, "post_id": 49375333, "comment_id": 85760699, "body": "You have done quite a bit of work here! I think the OP will appreciate it."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 2, "last_activity_date": 1521512072, "creation_date": 1521512072, "answer_id": 49375333, "question_id": 49283616, "link": "https://stackoverflow.com/questions/49283616/how-to-set-function-arguments-in-assembly-during-runtime-in-a-64bit-application/49375333#49375333", "title": "How to set function arguments in assembly during runtime in a 64bit application on Windows?", "body": "<p>The x86-64 Windows calling convention is fairly simple, and makes it possible to write a wrapper function that doesn't know the types of anything.  Just load the first 32 bytes of args into registers, and copy the rest to the stack.</p>\n\n<hr>\n\n<p><strong>You definitely need to make the function call from asm</strong>;  It can't possibly work <em>reliably</em> to make a bunch of function calls like <code>fill_register_xmm0</code> and hope that the compiler doesn't clobber any of those registers.  <strong>The C compiler emits instructions that use the registers</strong>, as part of its normal job, including passing args to functions like <code>fill_register_xmm0</code>.</p>\n\n<p>The only alternative would be to write a C statement with a function call with all the args having the correct type, to get the compiler to emit code to make a function call normally.  If there are only a few possible different combinations of args, putting those in <code>if()</code> blocks might be good.</p>\n\n<p>And BTW, <code>movsd  xmm0, variable</code> probably assembles to <code>movsd  xmm0, xmm0</code>, because the first function arg is passed in XMM0 if it's FP.</p>\n\n<hr>\n\n<p><strong>In C, prepare a buffer with the args</strong> (like in the 32-bit case).</p>\n\n<p>Each one needs to be padded to 8 bytes if it's narrower.  See <a href=\"https://msdn.microsoft.com/en-us/library/ms235286.aspx\" rel=\"nofollow noreferrer\">MS's docs for x86-64 <code>__fastcall</code></a>.  (Note that x86-64 <code>__vectorcall</code> passes <code>__m128</code> args by value in registers, but for <code>__fastcall</code> it's strictly true that the args form an array of 8-byte values, after the register args.  And storing those into the shadow space creates a full array of all the args.)</p>\n\n<blockquote>\n  <p>Any argument that doesn\u2019t fit in 8 bytes, or is not 1, 2, 4, or 8 bytes, must be passed by reference. There is no attempt to spread a single argument across multiple registers.</p>\n</blockquote>\n\n<p>But the key thing that makes variadic functions easy in the Windows calling convention also works here: <strong>The register used for the 2nd arg doesn't depend on the type of the first</strong>.  i.e. if an FP arg is the first arg, then that uses up an integer register arg-passing slot.  So you can only have up to 4 register args, not 4 integer and 4 FP.</p>\n\n<p><strong>If the 4th arg is integer, it goes in <code>R9</code>, even if it's the first integer arg</strong>.  Unlike in the x86-64 System V calling convention, where the first <em>integer</em> arg goes in <code>rdi</code>, regardless of how many earlier FP args are in registers and/or on the stack.</p>\n\n<p><strong>So the asm wrapper that calls the function can load the first 8 bytes into both integer and FP registers</strong>!  (Variadic functions already require this, so a callee doesn't have to know whether to store the integer or FP register to form that arg array.  MS optimized the calling convention for simplicity of variadic callee functions at the expense of efficiency for functions with a mix of integer and FP args.)</p>\n\n<p>The C side that puts all the args into a buffer can look like this:</p>\n\n<pre><code>#include  &lt;stdalign.h&gt;\nint asmwrapper(const char *argbuf, size_t argp-argbuf, void (*funcpointer)(...));\n\nvoid somefunc() {\n    alignas(16) uint64_t argbuf[256/8];  // or char argbuf[256].  But if you choose not to use alignas, then uint64_t will still give 8-byte alignment\n\n    char *argp = (char*)argbuf;\n    for( ; argp &lt; &amp;argbuf[256] ; argp += 8) {\n        if (figure_out_an_arg()) {\n            int foo = get_int_arg();\n            memcpy(argp, &amp;foo, sizeof(foo));\n        } else if(bar) {\n            double foo = get_double_arg();\n            memcpy(argp, &amp;foo, sizeof(foo));\n        } else\n           ... memcpy whatever size\n           // or allocate space to pass by ref and memcpy a pointer\n    }\n    if (argp == &amp;argbuf[256]) {\n        // error, ran out of space for args\n    }\n\n    asmwrapper(argbuf, argp-argbuf, funcpointer);\n}\n</code></pre>\n\n<hr>\n\n<p>Unfortunately I don't think we can directly use <code>argbuf</code> on the stack <em>as</em> the args + shadow space for a function call.  We have no way of stopping the compiler from putting something valuable below <code>argbuf</code> which would let us just set <code>rsp</code> to the bottom of it (and save the return address somewhere, maybe at the top of <code>argbuf</code> by reserving some space for use by the asm).</p>\n\n<p>Anyway, just copying the whole buffer will work.  Or actually, load the first 32 bytes into registers (both integer and FP), and only copy the rest.  The shadow space doesn't need to be initialized.</p>\n\n<p><code>argbuf</code> could be a VLA if you knew ahead of time how big it needed to be, but 256 bytes is pretty small.  It's not like reading past the end of it can be a problem, it can't be at the end of a page with unmapped memory later, because our parent function's stack frame definitely takes some space.</p>\n\n<pre><code>;; NASM syntax.  For MASM just rename the local labels and add whatever PROC / ENDPROC is needed.\n;; UNTESTED\n\n   ;; rcx: argbuf\n   ;; rdx: length in bytes of the args.  0..256, zero-extended to 64 bits\n   ;; r8 : function pointer\n\n   ;; reserve rdx bytes of space for arg passing\n   ;; load first 32 bytes of argbuf into integer and FP arg-passing registers\n   ;; copy the rest as stack-args above the shadow space\nglobal asmwrapper\nasmwrapper:\n    push  rbp\n    mov   rbp, rsp    ; so we can efficiently restore the stack later\n\n    mov   r10, r8     ; move function pointer to a volatile but non-arg-passing register\n\n    ; load *both* xmm0-3 and rcx,rdx,r8,r9 from the first 32 bytes of argbuf\n    ; regardless of types or whether there were that many arg bytes\n    ; All bytes are loaded into registers early, some reg-&gt;reg transfers are done later\n    ; when we're done with more registers.\n\n   ; movsd    xmm0, [rcx]\n   ; movsd    xmm1, [rcx+8]\n\n    movaps   xmm0, [rcx]    ; 16-byte alignment required for argbuf.  Use movups to allow misalignment if you want\n    movhlps  xmm1, xmm0     ; use some ALU instructions instead of just loads\n    ; rcx,rdx can't be set yet, still in use for wrapper args\n\n    movaps   xmm2, [rcx+16]   ; it's ok to leave garbage in the high 64-bits of an XMM passing a float or double.\n    ;movhlps  xmm3, xmm2      ; the copyloop uses xmm3: do this later\n    movq     r8, xmm2\n    mov      r9, [rcx+24]\n\n    mov      eax, 32\n    cmp      edx, eax\n    jbe    .small_args      ; no copying needed, just shadow space\n\n    sub   rsp, rdx\n    and   rsp, -16     ; reserve extra space, realigning the stack by 16\n\n    ; rax=32 on entry, start copying just above shadow space (which doesn't need to be copied)\n .copyloop:                   ; do {\n    movaps   xmm3, [rcx+rax]\n    movaps   [rsp+rax], xmm3   ; indexed addressing modes aren't always optimal, but this loop only runs a couple times.\n    add      eax, 16\n    cmp      eax, edx\n    jb    .copyloop            ; } while(bytes_copied &lt; arg_bytes);\n\n  .done_arg_copying:\n\n    ; xmm0,xmm1 have the first 2 qwords of args\n    movq     rcx, xmm0       ; RCX NO LONGER POINTS AT argbuf\n    movq     rdx, xmm1\n\n    ; xmm2 still has the 2nd 16 bytes of args\n    ;movhlps  xmm3, xmm2       ; don't use: false dependency on old value and we just used it.\n    pshufd   xmm3, xmm2, 0xee  ; xmm3 = high 64 bits of xmm2.  (0xee = _MM_SHUFFLE(3,2,3,2))\n    ; movq   xmm3, r9          ; nah, can be multiple uops on AMD\n    ; r8,r9 set earlier\n\n    call  r10\n    leave             ; restore RSP to its value on entry\n    ret\n\n; could handle this branchlessly, but copy loop still needs to run zero times\n; unless we bump up the min arg_bytes to 48 and sometimes copy an unnecessary 16 bytes\n; As much work as possible is before the first branch, so it can happen while a mispredict recovers\n.small_args:\n    sub  rsp, rax      ; reserve shadow space\n    ;rsp still aligned by 16 after push rbp\n    jmp  .done_arg_copying\n\n;byte count.  This wrapper is 82 bytes; would be nice to fit it in 80 so we don't waste 14 bytes before the next function.\n;e.g. maybe mov rcx, [rcx] instead of  movq  rcx, xmm0\n;mov eax, $-asmwrapper\nalign 16\n</code></pre>\n\n<p>This does assemble (<a href=\"https://gcc.godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAKxAEZSAbAQwDtQmBnDzAWwCMGAT1IdUAV2LJMIAOQBqBQFIAzACEVquZIAeIOU2LA%2BYgGaKADAEEFcjRq3pdchpjYEEcvCzl9BBTBxyqCZy7pj6hhwAdArmUVEATACsAGykcgBemMSoALSY2v4sWOihqHIpACw%2BhBwW1kpq9sQAHHJ6JmIsyAR4qN4ADqhe/sT19TZ2aloB2QBu4cSOPn4BQSEcA0xSciYkEcByW1xewBON6tMMqEylJnjEHARyygkr/oHBB8YhI%2BUjmGA2X0xTkADEAAoHXLHDinGbAPBPbJ1KyTJrTNADQShBCLALPThyJ7bADWuQMwECTD4qAWuPCHAQt1QAHdiVspPVgNc%2BEwGPoODxWcQmAMBtl6pxhaLxdkQOcFAMxEyFMQ%2BANFXIeHSbOqBulHgMbLZpqI5KzwshWHJMCZ7sg8K4CEIZk8SOEwsSCGTnExRuM0TYdXM9bRzIa2ib7CHwp1ur1%2BkdhixRmV9HI5qhmL0XD4xM8WP0KYYYZw4WwEUiA1ZxtNg7qbJgmNp0q9bAlNLQUnXNDZkDxjU3HOlm9peyaB3S%2BApMCPbS3o9NKQB9XwfU0AEX0zxcnGe7b2xGJzPQbI523Cik7cm7u32Xvuj2eWMEuWuqGNhGy/r6LC1JqAYB9gACp4qEopYMEvyBKy%2B7wne65rEQxJMPSog8OEXhPMQYg9H%2BHCkABQEkfYrClHwmAEGmfCit0HgDMQc54Ph/R6BwTCYUc/oeEechiMaKEpAcgTYf4tzrHIlSBpYWr2NcEkAFS0u4ilyNoPA8OYuTKCCpQ6KQSytq0hkAJy7DkPAMrsDxPC8bxIZ8ISUj8cnTExwAGOgLhcJJBCCBKnzHqyeJhMeYXhJaTG4v62qsDilLvAEbmaJYDACo5EThApJSeKm5QedWKILsQQjpBh%2BLALkKjYB5EGsBwJjFQY4Rniw2X%2BpKQYXBaeLeJaYAyNFbWRYQHg6tFhXIo8UQyeimghhwpQ2BpWnpIoSSqDoG2boqMZ0ktJqrfQtibdtnYtDtc0NnMYqBAoq0RqdW3IOOSTbvNt4pLkSH6AweDACwmGpjMACOYgPHO97Hi5pgxHIACq3DanSAmBCh/LXOyPBIvyANA86nghII4gWqwBBaiGCAMAM93Hekj3AdMKqMqgXGWAAMgjeU4XhiYsKJAviaUXxUCqu43OgqIND1BlGXI1osINzyUcSVFyIIVHlbmApePxyN8SKYoSjDkTXQoIZ3StmkJOtZ2vdeqjdjtn2EINnykume70p56pMECeXWQgAMeFUP21JJNoABoALIx9xJyVkwuwKc8%2BxnmIAiYLN3WmqoVM03TmnKAzNtAfYXqvh%2Bxos4Eq3KHoZ64kifo1jLKNzKDgEmepNuU42JrEKZdsveOnYJNJ73mx3QFjm2CRagOQ4mnOrYLuOudUKrNhREKmMrpS91LpoRYK5%2Bgjwu1c5zukYt2UyLLspsl7m/YHCZ3qmzz0zmhMdwxDoVPOeZ%2BOw9bWmRhFC02Q4yYCijFbw7ZMpfEPvDCAAB1fcawBLpkQasJy3pfQgMin1Bw2hTTYBUNudsKEgTPD3ulYEAB6XYmDjxoCwAASi1O/Gcaov6kK1ORT%2BBo5C5DvMfN08xwgFAIKKC8UhDTNn%2BoDeEXoSTIE9r4L6KVJEAPCLFPcdlcEbggA/M8T9OSYA4ekIRpJMCYGNOoz2eNAZQy0c7Wsudmgtkoe2JMzpiDCAIcQF8594R30JLSQBj95HhAgCFFiHgzwBCVjIQs9jSgoVVliJ06AuFoiiFXVAn49AkTKZ9JuigADs6hc6W1ptbHgJdnrnS2j4qedS6RWyUGdTYjtRRvU3KXJpgj0DLRXi2dIHj25L1npM20jgtRbxNIU8%2B1dymfWqduBJLgICORXDkqGKgADCBw1x4K4U0TxDQogjQPoYA5YS2AKmuRIx6pBjpyGZPSR8tlnhvFBqyEgUtI5m06Z3bur1hnmFItMAASscqOcgAByAB5OQHNUXIoAOLYDhXICEqKACSyKQIAGU5CWBAt8Uw/cIWD3nMdae9hVpvCeHgdKXyiRegSKCRCeDQVUhSgXBpvcmnDLeOXaYbVlb62kCwhgyMsASmKK4ZAOIkzZlKLdBgYh9GgktHICJcrSiEBzu3WmCBTDjPrhK9I5htD2J6vXLcXyQ4VGqHwCOXxWWoIdU6yhcgVxxxXGSgAEgjMEYIObYAgCXW28aOH5PbvtelYrmlDw2fYFgTAEDpEVj4cIPAxAMF6AMPMYhPyfG8JYGOu0vHuRaGZNWzxmylSdGMV5/ZMZqnDFqb24QNmywJB6OQcKyVQhQhHHVeqgjeACYILUTEKbXPsGgEtpRmTFDzO4FutFWDIGpgEDgZV8yhOxM4YpjidZyCviClCuFvBZByKEPAmFpb2C6D5WC4RjCDn4oJcCONvCrkyihSobQhEVV6O%2Bs%2BF6bRdHalILgBgcT8o%2BBOSwgRi2HotCQZxgQhgnCzp4QIlEjyenAk%2BOy%2B76LlX%2BC%2BG0zI5T9WDnmZOONNhMXwD0GYaAFiPHqLvHg%2B9D4vPbjwvhIiBlSt/rMPRJ4YlEJSkab0HKBQuPahRNDwkmAmDTMqVU%2Boln/rkLc/omB7nAEediU4c0NC/XXameGYEW5GzlMeFuLQHJ4PsECjdhbb0sU9OUe4zxCCBxaDC80hqZVpLJsiW8nqBXkdHV6dqhRdhdFYiwc1eds7ABiCJwQqsQxaChS0h270ebC0kh3Lu5W16PQmBoMrc85AABIKRCncybCYmntFWBkNYhgsgkgyFICwWQ5gJuoFkFh7g/BXSiAkDsa8yhaATYINN4b1jSQgCSMoKIKRaCmVMuYUySRzAJASCkCelQkiMFkJUCbPA6DmAjFNmQM3SBzZkBNjgIAIzbe%2B8N0gcBYAwEQCgNmAwOXZHIJQNAg54fEBADmoUCRaDKHMCXe4paUSUD4Dt0gXqc2BNkJt0gyPgYEFRSwIQlOJtYBE2wFwJP8BMXwgsQHoPSAFEwMgAs0gZBU4BKNvnsi31M5G6wdgXBeACGEP9PggPIDWM/PzXnuQmoMBMFUAH4hJDSFoCNsbE2vs/b%2B8iywZL44JCiNjqIuO5AQFwIQfY62TrHNh6jjsG2OGUoV0twQW2dtJtIHiW48oIB7YOxGCXL3SBvZaJUKIl2khVKSDd2gCRlAtFMvnybJO/sA6B6QEHM3rEQ%2Bh%2BIAgyoCCI4gMjuHLg0f0GYkQdvZuZDjeL3zv7XuLRjRRbb%2B3juju47D6DiPUesBo9j09mQSe3u0CSM7yolQJ5VKqS0KpJ3zB3f71b2QZfgfh7j5UFIUR88ffO5UUyO/lBZ6SI9iXygLcl9PxXi/S%2BEif4H2/0r121IAEzhDYkqCAA\" rel=\"nofollow noreferrer\">on Godbolt with NASM</a>), but I haven't tested it.  </p>\n\n<p>It should perform pretty well, but if you get mispredicts around the cutoff from &lt;= 32 bytes to > 32 bytes, change the branching so it always copies an extra 16 bytes.  (Uncomment the <code>cmp</code>/<code>cmovb</code> in the version on Godbolt, but the copy loop still needs to start at 32 bytes into each buffer.)</p>\n\n<p>If you often pass very few args, <strong>the 16-byte loads might hit a store-forwarding stall from two narrow stores to one wide reload</strong>, causing about an extra 8 cycles of latency.  This isn't normally a throughput problem, but it can increase the latency before the called function can access its args.  If out-of-order execution can't hide that, then it's worth using more load uops to load each 8-byte arg separately.  (Especially into integer registers, and then from there to XMM, if the args are mostly integer.  That will have lower latency than mem -> xmm -> integer.)</p>\n\n<p>If you have more than a couple args, though, hopefully the first few have committed to L1d and no longer need store forwarding by the time the asm wrapper runs.  Or there's enough copying of later args that the first 2 args finish their load + ALU chain early enough not to delay the critical path inside the called function.</p>\n\n<p>Of course, if performance was a huge issue, you'd write the code that figures out the args in asm so you didn't need this copy stuff, or use a library interface with a fixed function signature that a C compiler can call directly.  I did try to make this suck as little as possible on modern Intel / AMD mainstream CPUs (<a href=\"http://agner.org/optimize/\" rel=\"nofollow noreferrer\">http://agner.org/optimize/</a>), but I didn't benchmark it or tune it, so probably it could be improved with some time spent profiling it, especially for some real use-case.</p>\n\n<p>If you know that FP args aren't a possibility for the first 4, you can simplify by just loading integer regs.</p>\n"}], "owner": {"reputation": 21, "user_id": 9481921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37399383514179976582b10320ae1a58?s=128&d=identicon&r=PG&f=1", "display_name": "Jaap Groeneweg", "link": "https://stackoverflow.com/users/9481921/jaap-groeneweg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 762, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1521512072, "creation_date": 1521046733, "question_id": 49283616, "link": "https://stackoverflow.com/questions/49283616/how-to-set-function-arguments-in-assembly-during-runtime-in-a-64bit-application", "title": "How to set function arguments in assembly during runtime in a 64bit application on Windows?", "body": "<p>I am trying to set arguments using assembly code that are used in a generic function. The arguments of this generic function - that is resident in a dll - are not known during compile time. During runtime the pointer to this function is determined using the GetProcAddress function. However its arguments are not known. During runtime I can determine the arguments - both value and type - using a datafile (not a header file or anything that can be included or compiled). I have found a good example of how to solve this problem for 32 bit (<a href=\"https://stackoverflow.com/questions/28996696\">C Pass arguments as void-pointer-list to imported function from LoadLibrary()</a>), but for 64 bit this example does not work, because you cannot fill the stack but you have to fill the registers. So I tried to use assembly code to fill the registers but until now no success. I use C-code to call the assembly code. I use VS2015 and MASM (64 bit). The C-code below works fine, but the assembly code does not. So what is wrong with the assembly code? Thanks in advance.</p>\n\n<p>C code:</p>\n\n<pre><code>...\nvoid fill_register_xmm0(double); // proto of assembly function\n...\n// code determining the pointer to a func returned by the GetProcAddress()\n...\ndouble dVal = 12.0;\nint v;\n\nfill_register_xmm0(dVal);\nv = func-&gt;func_i(); // integer function that will use the dVal\n...\n</code></pre>\n\n<p>assembly code in different .asm file (MASM syntax):</p>\n\n<pre><code>TITLE fill_register_xmm0\n\n.code\noption prologue:none ; turn off default prologue creation\noption epilogue:none ; turn off default epilogue creation\nfill_register_xmm0 PROC variable: REAL8  ; REAL8=equivalent to double or float64\n\nmovsd  xmm0, variable  ; fill value of variable into xmm0\n\nret\n\nfill_register_xmm0 ENDP\noption prologue:PrologueDef ; turn on default prologue creation\noption epilogue:EpilogueDef ; turn on default epilogue creation\n\nEND\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1521046714, "post_id": 49283584, "comment_id": 85569893, "body": "Instead of fixed-length character fields, you&#39;re going to want to use <code>char*</code> and dynamically allocate. Some of these buffers are ridiculously short."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1521046753, "post_id": 49283584, "comment_id": 85569918, "body": "You&#39;re also passing in parameters <i>by value</i> instead of as a pointer, something that&#39;s extremely messy and wasteful."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 2, "creation_date": 1521046787, "post_id": 49283584, "comment_id": 85569945, "body": "Problem is that C uses pass-by-value, so you just modify copies of original structs, not struct themselves. Pass addresses."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1521046791, "post_id": 49283584, "comment_id": 85569950, "body": "Never ever use <code>gets</code>. It&#39;s a dangerous function which have been removed from the C specification. Use alternatives like <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a> instead."}, {"owner": {"reputation": 15, "user_id": 7216458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211241756543875/picture?type=large", "display_name": "Eric Michael Fadriga", "link": "https://stackoverflow.com/users/7216458/eric-michael-fadriga"}, "edited": false, "score": 0, "creation_date": 1521047011, "post_id": 49283584, "comment_id": 85570108, "body": "btw..to add.. This will just display 1 set of information.. It won&#39;t add new records per say.. Just a simple exercise"}], "answers": [{"tags": [], "owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "is_accepted": false, "score": 0, "last_activity_date": 1521046783, "creation_date": 1521046783, "answer_id": 49283635, "question_id": 49283584, "link": "https://stackoverflow.com/questions/49283584/passing-structures-to-functions-in-c-programming/49283635#49283635", "title": "Passing structures to functions in C programming", "body": "<p>Like how to modify the content of a variable througth a function, you need to give the address of the structure, because \"deep down\", a variable of type \"int\" and a variable of type \"struct something\", well, it's a variable.</p>\n\n<p>And if you want to modify the value of your variable, you need to send his address (pointer).</p>\n\n<p>Also, note that by passing the value of the struct, the value are copied. For small structure, it doesn't really matter, but for \"larger\" one, it will cost really huge on your program's speed. </p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 7216458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211241756543875/picture?type=large", "display_name": "Eric Michael Fadriga", "link": "https://stackoverflow.com/users/7216458/eric-michael-fadriga"}, "edited": false, "score": 0, "creation_date": 1521047918, "post_id": 49283719, "comment_id": 85570722, "body": "since the guardian struct and student struct has a common structure which is Name.. I don&#39;t think <code>Name -&gt; fname</code> would work since. Ill have to do <code>guard.gname.fname</code> etc."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 15, "user_id": 7216458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211241756543875/picture?type=large", "display_name": "Eric Michael Fadriga", "link": "https://stackoverflow.com/users/7216458/eric-michael-fadriga"}, "edited": false, "score": 0, "creation_date": 1521048023, "post_id": 49283719, "comment_id": 85570788, "body": "@EricMichaelFadriga.: Hey I am giving you a example...and I wrote <code>name-&gt;fname</code> here it is a variable <code>name</code>. You get what I am saying?"}, {"owner": {"reputation": 15, "user_id": 7216458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211241756543875/picture?type=large", "display_name": "Eric Michael Fadriga", "link": "https://stackoverflow.com/users/7216458/eric-michael-fadriga"}, "edited": false, "score": 0, "creation_date": 1521049187, "post_id": 49283719, "comment_id": 85571569, "body": "ohh wow it worked!!! :D Thanks man!! :D I forgot to place a <code>*</code> in the function declaration.."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": true, "score": 3, "last_activity_date": 1521047310, "last_edit_date": 1521047310, "creation_date": 1521047074, "answer_id": 49283719, "question_id": 49283584, "link": "https://stackoverflow.com/questions/49283584/passing-structures-to-functions-in-c-programming/49283719#49283719", "title": "Passing structures to functions in C programming", "body": "<p>C is pass by value. So when you passed a variable as you have shown - a copy of it is given to the called function so that it can work with it. As a result the object from which the copy is made remains unchanged. The solution is to pass the address of the object and then dereferencing  the copied pointer variable which contains the address of the object - thus changing the intended object.</p>\n\n<p>So in your case, </p>\n\n<pre><code>void input(Name *name,Date *date, Guardian *guard, Student *stud){\n   printf(\"%s\",name-&gt;fname); // short hand for (*name).fname\n   ...\n}\n</code></pre>\n\n<p>Call it like</p>\n\n<pre><code>input(&amp;name, .. );\n</code></pre>\n\n<p>Even if you want only read those objects(you don't want to change anything) then also I would support this way of doing things - why burden things by copying those large structure instances? Just pass the address of them and work with it.</p>\n\n<p>Also don't use deprecated <code>gets</code> - use <code>fgets</code> instead and when you use it (<code>fgets</code>) don't forget to check the return value. </p>\n"}], "owner": {"reputation": 15, "user_id": 7216458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211241756543875/picture?type=large", "display_name": "Eric Michael Fadriga", "link": "https://stackoverflow.com/users/7216458/eric-michael-fadriga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 49283719, "answer_count": 2, "score": 0, "last_activity_date": 1604249966, "creation_date": 1521046644, "last_edit_date": 1604249966, "question_id": 49283584, "link": "https://stackoverflow.com/questions/49283584/passing-structures-to-functions-in-c-programming", "title": "Passing structures to functions in C programming", "body": "<p>Declared structures:</p>\n<pre><code>typedef struct{\n    char fname[25];\n    char mname[3];\n    char lname[25];\n\n}Name;\n\ntypedef struct{\n\n    char month[25];\n    int day,year;\n\n}Date;\n\ntypedef struct{\n    Name gname;\n    char addr[50];\n    char cnum[11];\n}Guardian;\n\ntypedef struct{\n    Name sname;\n    Date sbday;\n    Guardian sguard;\n    char gender[6];\n    char addr[50];\n    char cnum[11];\n    char course[10];\n    int year;\n\n}Student;\n</code></pre>\n<p>Declared functions:</p>\n<pre><code>void input(Name name,Date date, Guardian guard, Student stud);\nvoid display(Name name,Date date, Guardian guard, Student stud);\n</code></pre>\n<p>When input function is called, it lets me add strings being asked. Then, display function is called. It will not display the entered information.</p>\n<p>Calling functions:</p>\n<pre><code>input(name, date, guard, stud);\ndisplay(name, date, guard, stud);\n</code></pre>\n<p>Display funtion:</p>\n<pre><code>void display(Name name, Date date, Guardian guard, Student stud)\n{\n\n    printf(&quot;   -=Student Information=-   \\n&quot;);\n    printf(&quot;Name: %s %s. %s\\n&quot;,stud.sname.fname,stud.sname.mname,stud.sname.lname);\n    printf(&quot;Birtday: %s %d, %d\\n&quot;,stud.sbday.month,stud.sbday.day,stud.sbday.year);\n    printf(&quot;Gender: %s\\n&quot;,stud.gender);\n    printf(&quot;Contact Number: \\n%s&quot;,stud.cnum);\n    printf(&quot;Course &amp; Year: %s-%d \\n&quot;,stud.course,stud.year);\n\n    printf(&quot;   -=Student Guardian Information=-   \\n&quot;);\n    printf(&quot;Name: %s %s. %s\\n&quot;,guard.gname.fname,guard.gname.mname,guard.gname.lname);\n    printf(&quot;Address: %s\\n&quot;,guard.addr);\n    printf(&quot;Contact Number: %s\\n&quot;,guard.cnum);\n}\n</code></pre>\n<p>Input function:</p>\n<pre><code>void input(Name name,Date date, Guardian guard, Student stud)\n{\n\n    printf(&quot;Student Information \\n&quot;);\n    printf(&quot;First Name: &quot;);\n    gets(stud.sname.fname);\n    //...\n}\n</code></pre>\n<p>This will just display one set of information. It won't add new records per say. Just a simple exercise.</p>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1521046327, "post_id": 49283466, "comment_id": 85569624, "body": "What&#39;s the question?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1521046332, "post_id": 49283466, "comment_id": 85569629, "body": "<code>char str[] = &quot;&quot;;</code> creates an array with size = 1 byte. Allocate more space: <code>char str[256];</code> or some value. Then you&#39;ll want to initialize <code>size_t p = 0;</code> And, you increment <code>p</code> 2x in the loop.  Get rid of one."}, {"owner": {"reputation": 4985, "user_id": 2005038, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/hGCjO.png?s=128&g=1", "display_name": "marco-a", "link": "https://stackoverflow.com/users/2005038/marco-a"}, "edited": false, "score": 0, "creation_date": 1521046365, "post_id": 49283466, "comment_id": 85569649, "body": "You are overwriting the stack because <code>str</code> is not big enough to store all the characters."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1521046375, "post_id": 49283466, "comment_id": 85569657, "body": "you need to create some space for <code>str</code>. From what you have above, <code>str</code> needs at least 6 bytes to fit all the data: <code>char str[6] = &quot;&quot;;</code>"}, {"owner": {"reputation": 109, "user_id": 8656057, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6567491f6cc3188d6ae68cdef182fa6?s=128&d=identicon&r=PG&f=1", "display_name": "P. Bolfa", "link": "https://stackoverflow.com/users/8656057/p-bolfa"}, "edited": false, "score": 0, "creation_date": 1521046473, "post_id": 49283466, "comment_id": 85569717, "body": "What if I do not know how much of space I am going to need?"}, {"owner": {"reputation": 360, "user_id": 5875805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S4zBy.jpg?s=128&g=1", "display_name": "Tormund Giantsbane", "link": "https://stackoverflow.com/users/5875805/tormund-giantsbane"}, "edited": false, "score": 0, "creation_date": 1521046531, "post_id": 49283466, "comment_id": 85569764, "body": "go big or go home"}, {"owner": {"reputation": 4985, "user_id": 2005038, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/hGCjO.png?s=128&g=1", "display_name": "marco-a", "link": "https://stackoverflow.com/users/2005038/marco-a"}, "edited": false, "score": 2, "creation_date": 1521046537, "post_id": 49283466, "comment_id": 85569771, "body": "@P.Bolfa Use functions like <code>malloc</code>, <code>realloc</code> and <code>free</code>."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1521046674, "post_id": 49283466, "comment_id": 85569870, "body": "<i>&quot;Input for this is&quot;</i> ...OK? And the output is? And that was wrong because? This is a very unclear question. Also, it doesn&#39;t look like you&#39;ve done much basic research on how C deals with strings; it&#39;s expected that you would do so before posting."}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1521046804, "post_id": 49283466, "comment_id": 85569962, "body": "@P.Bolfa Take a look at the <a href=\"https://github.com/cs50/libcs50/blob/develop/src/cs50.c\" rel=\"nofollow noreferrer\">get_string()</a> method in Harvard&#39;s cs50.c library. In particular, look at how it uses realloc() to <a href=\"https://github.com/cs50/libcs50/blob/develop/src/cs50.c#L170\" rel=\"nofollow noreferrer\">double the size of the input buffer</a> whenever the buffer fills up."}], "answers": [{"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1521049723, "post_id": 49283599, "comment_id": 85571913, "body": "&quot;Strings <i>must</i> be NULL terminated in C&quot; and that one already is. Anyway, good one."}], "tags": [], "owner": {"reputation": 4985, "user_id": 2005038, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/hGCjO.png?s=128&g=1", "display_name": "marco-a", "link": "https://stackoverflow.com/users/2005038/marco-a"}, "is_accepted": false, "score": 3, "last_activity_date": 1521077587, "last_edit_date": 1521077587, "creation_date": 1521046701, "answer_id": 49283599, "question_id": 49283466, "link": "https://stackoverflow.com/questions/49283466/c-append-chars-into-char-array-one-by-one/49283599#49283599", "title": "C append chars into char array one by one", "body": "\n\n<pre class=\"lang-c prettyprint-override\"><code>char func(n){\n    if (n == 0)\n      return '1';\n    if (n == 1)\n      return '2';\n    if (n &gt; 1)\n      return '3';\n}\n</code></pre>\n\n<p>You should always specify the type for variables.</p>\n\n<p>Please use something like <code>int n</code> instead of just <code>n</code>.</p>\n\n<p>It's also bad that all of your returns are conditional, it's better to have a return statement that's guaranteed to be executed no matter what *:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>char func(int n) {\n    if (n == 0) return '1';\n    if (n == 1) return '2';\n\n    return '3';\n}\n</code></pre>\n\n<p><em>* Because not returning a value from a function that <strong>should</strong> return a value is undefined behaviour.</em></p>\n\n<p>Now that we have that out of the way, let's have a look at your <code>main()</code>:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int main() {\n    int i;\n    char str[] = \"\";\n    size_t p = strlen(str);\n\n    for (i =0 ; i &lt; 5; i++){\n        str[p++] = func(i);\n        str[p] = '\\0';\n        p++;\n    }\n\n    printf(\"%s\",str);\n    return 0;\n}\n</code></pre>\n\n<ul>\n<li><p><code>str[]</code> is not big enough to store all the characters you write to it, resulting in undefined behaviour.</p></li>\n<li><p>Your loop body is written in a weird way, why are you incrementing <code>p</code> twice?</p></li>\n</ul>\n\n<p>Here a very simple program that writes 5 characters into <code>str</code>:</p>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nchar func(int n) {\n    if (n == 0) return '1';\n    if (n == 1) return '2';\n\n    return '3';\n}\n\nint main() {\n    int i;\n    // Allocate 6 bytes (5 characters) on the stack\n    char str[6] = \"\";\n\n    for (i = 0 ; i &lt; 5; i++) {\n        str[i] = func(i);\n    }\n\n    // Strings *must* be NULL terminated in C\n    str[5] = 0;\n\n    printf(\"%s\",str);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7999973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d893bed1505887c0a9dbbafa3e82e1?s=128&d=identicon&r=PG&f=1", "display_name": "ISKANDER", "link": "https://stackoverflow.com/users/7999973/iskander"}, "is_accepted": false, "score": 1, "last_activity_date": 1521047528, "creation_date": 1521047528, "answer_id": 49283879, "question_id": 49283466, "link": "https://stackoverflow.com/questions/49283466/c-append-chars-into-char-array-one-by-one/49283879#49283879", "title": "C append chars into char array one by one", "body": "<p>The size of your str here is \"0\" (0 using the strlen and 1 using the sizeof operator because it counts the '\\0' caracter) so you can not add more element to the str, and if you try, the program will crash. So you have two possibilies here, the first is to declare a fixed table size and the number n will be limited by the size, the second is a dynamic one using mallic. To intialize it to zeros you can just use the memset API.</p>\n"}, {"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 1, "last_activity_date": 1521048287, "creation_date": 1521048287, "answer_id": 49284126, "question_id": 49283466, "link": "https://stackoverflow.com/questions/49283466/c-append-chars-into-char-array-one-by-one/49284126#49284126", "title": "C append chars into char array one by one", "body": "<p>Well short answer is everything you did would be right if you have in the array enough memory to hold those <code>5</code> characters and the <code>\\0</code> if you want to treat it as a string (NUL terminated <code>char</code> array).</p>\n\n<p><code>\"\"</code> is a string literal containing only the <code>\\0</code>. Length of this string is <code>0</code>. What about the array? Applying <code>sizeof</code> over it reveals that it is capable of holding one character. (Well it contained <code>\\0</code>).</p>\n\n<p>Now with your code you surely did access positions that are beyond the size of the array. This is undefined behavior - mentioned by the C standard. </p>\n\n<p>Solution is to either have an array having size capable of holding the maximum character you would like to store someday. Or you can have a <code>char*</code> to which you can assign address of allocated chunk by using functions like <code>malloc</code>,<code>realloc</code> etc. Benefit of this, you can increase memory as much as you need on runtime depending on the number of characters you want to store.</p>\n"}], "owner": {"reputation": 109, "user_id": 8656057, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6567491f6cc3188d6ae68cdef182fa6?s=128&d=identicon&r=PG&f=1", "display_name": "P. Bolfa", "link": "https://stackoverflow.com/users/8656057/p-bolfa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2032, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1521087202, "creation_date": 1521046201, "last_edit_date": 1521087202, "question_id": 49283466, "link": "https://stackoverflow.com/questions/49283466/c-append-chars-into-char-array-one-by-one", "title": "C append chars into char array one by one", "body": "<p>I have made up a function which returns some chars , all I want to do is to append all those returned chars into one string .</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar func(int n);\nint main()\n{\n    int i;\n    char str[] = \"\";\n    size_t p = strlen(str);\n\n    for (i =0 ; i &lt; 5; i++){\n        str[p++] = func(i);\n        str[p] = '\\0';\n        p++;\n    }\n\n    printf(\"%s\",str);\n    return 0;\n}\n\n\nchar func(int n){\n    if (n == 0)\n      return '1';\n    if (n == 1)\n      return '2';\n    if (n &gt; 1)\n      return '3';\n\n}\n</code></pre>\n\n<p>//EDIT Output for this is <code>19</code></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1521046179, "post_id": 49283411, "comment_id": 85569511, "body": "Don&#39;t double tag questions as C and C++ <i>unless</i> it is specifically about those two languages (either trying to call one from the other or the differences in behavior)"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1521046209, "post_id": 49283411, "comment_id": 85569540, "body": "This isn&#39;t c++; C and C++ are not the same language."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1521046591, "post_id": 49283411, "comment_id": 85569813, "body": "note that <a href=\"https://stackoverflow.com/q/17710018/995714\"><code>atoi</code> shouldn&#39;t be used</a>"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1521046672, "post_id": 49283411, "comment_id": 85569864, "body": "Change <code>while( count != position ){</code> to  <code>while(*string &amp;&amp;  count != position ){</code> to check that you do not go off the end of the string"}, {"owner": {"reputation": 387, "user_id": 2961460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Girm.jpg?s=128&g=1", "display_name": "ulmer-a", "link": "https://stackoverflow.com/users/2961460/ulmer-a"}, "edited": false, "score": 0, "creation_date": 1521054550, "post_id": 49283411, "comment_id": 85574631, "body": "You could also pack this whole function <code>chatAt()</code> into a single line: <code>char charAt(char *string, int position) { return string[position]; }</code>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1521069759, "post_id": 49283411, "comment_id": 85581479, "body": "@L\u01b0uV\u0129nhPh&#250;c Disagree... It&#39;s fine to use <code>atoi</code>, <code>gets</code>  and not check <code>argc</code> <i>for quick prototype programs</i> where you can clearly see what&#39;s going on and where nobody else is going to run your program."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 13, "last_activity_date": 1521046112, "creation_date": 1521046112, "answer_id": 49283436, "question_id": 49283411, "link": "https://stackoverflow.com/questions/49283411/why-is-my-program-crashing-when-i-try-to-print-a-char-pointer/49283436#49283436", "title": "Why is my program crashing when I try to print a char pointer", "body": "<p>You're referencing <code>argv</code> without checking that <code>argc</code> is high enough to permit those references. What if <code>argc</code> is only <code>1</code>?</p>\n\n<p>The real problem is using <code>%s</code> to display a single character. That needs to be <code>%c</code>. Using <code>%s</code> is going to treat that as a character <em>pointer</em>, which it isn't, and then your program is deep into <em>undefined behaviour</em>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9492804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8df7ae9a5c7a6aa2ba0077dee2df5680?s=128&d=identicon&r=PG&f=1", "display_name": "John Scott", "link": "https://stackoverflow.com/users/9492804/john-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521046218, "creation_date": 1521046037, "last_edit_date": 1521046218, "question_id": 49283411, "link": "https://stackoverflow.com/questions/49283411/why-is-my-program-crashing-when-i-try-to-print-a-char-pointer", "title": "Why is my program crashing when I try to print a char pointer", "body": "<p>So i have this program for my C class its to make a function that will tell you the character at a certain number position in the string.</p>\n\n<pre><code>char charAt( char * string, int position );\n\nint main( int argc, char * argv[ ] ) {\n\n    int pos = atoi( argv[3] );\n\n    if( strcmp( argv[1], \"charAt\" ) == 0 )\n    {\n        printf( \"%s\", charAt( argv[2], pos ) );\n    }    \n}\n\n\n\nchar charAt( char *string, int position ){\n    int count = 0;\n    while( count != position ){\n        string++;\n        count++;\n    }\n\n    return *string;\n}\n</code></pre>\n\n<p>When i compile it shows no errors when i run it in the command line using</p>\n\n<pre><code>name charAt string 3\n</code></pre>\n\n<p>It crashes at </p>\n\n<pre><code>printf( \"%s\", charAt( argv[2], pos) );\n</code></pre>\n\n<p>that line\nWhy when i pass the char pointer to the printf function does it crash?</p>\n"}, {"tags": ["c", "googletest", "gmock"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1521108681, "post_id": 49283176, "comment_id": 85595179, "body": "How do you use your matcher?  It seems that gmock is trying to compare 2 element array, while the call happens with 3 element array (which is weird). Have you tried using <code>ElementsAreArray()</code> matcher?, Also, have you tried to force invoking of a function with a different array (e.g. having 4 elements), to see if the error message changes?"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 2463130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b2e9fd07d662b1f65ccf60f218dcb8e?s=128&d=identicon&r=PG", "display_name": "derchris", "link": "https://stackoverflow.com/users/2463130/derchris"}, "edited": false, "score": 0, "creation_date": 1521538416, "post_id": 49301451, "comment_id": 85761829, "body": "sorry for the late reply, got kinda lost in work :) Moving to std::vector actually solved this issue, thank you!"}], "tags": [], "owner": {"reputation": 3805, "user_id": 4165552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b32c5e142791fca01cbf252f663ac?s=128&d=identicon&r=PG&f=1", "display_name": "pptaszni", "link": "https://stackoverflow.com/users/4165552/pptaszni"}, "is_accepted": true, "score": 3, "last_activity_date": 1521122372, "creation_date": 1521122372, "answer_id": 49301451, "question_id": 49283176, "link": "https://stackoverflow.com/questions/49283176/google-mock-matching-an-array/49301451#49301451", "title": "Google Mock matching an array", "body": "<p>First of all, I did not reproduce your problem. The following example compiles and the test passes:</p>\n\n<pre><code>class ServerFake {\n  public:\n    MOCK_METHOD2(sendInternal, void(uint8_t data[], uint8_t size));\n};\n\n// If only possible, I recommend you to use std::vector instead of raw array\nclass ServerFake2 {\n  public:\n    MOCK_METHOD1(sendInternal, void(std::vector&lt;uint8_t&gt; data));\n};\n\nMATCHER_P2(HasBytes, bytes, size, \"\") {\n    // unnecessary assignment, I think ...\n    uint8_t * dataToCheck = arg;\n    bool isMatch = (memcmp(dataToCheck, bytes, size) == 0);\n    return isMatch;\n}\n\nusing ::testing::ElementsAre;\n\nTEST(xxx, yyy) {\n\n    ServerFake* serverFake = new ServerFake;\n    ServerFake2* serverFake2 = new ServerFake2;\n\n    uint8_t expectedMessageData[3] = { 0x08, 0xda, 0xff };\n    std::vector&lt;uint8_t&gt; expectedMessageData2({ 0x08, 0xda, 0xff });\n\n    EXPECT_CALL(*serverFake, sendInternal(HasBytes(expectedMessageData, 3), 3)).Times(1);\n    // the code below compiles and passes as well! However, I didn't check why;\n    // EXPECT_CALL(*serverFake, sendInternal(testing::_,3))\n    //     .With(testing::Args&lt;0, 1&gt;(ElementsAre(0x08, 0xda, 0xff)))\n    //     .Times(1);\n    serverFake-&gt;sendInternal(expectedMessageData, 3);\n\n\n    // much better, do like this!\n    EXPECT_CALL(*serverFake2, sendInternal(ElementsAre(0x08, 0xda, 0xff))).Times(1);\n    serverFake2-&gt;sendInternal(expectedMessageData2);\n\n\n    delete serverFake;\n    delete serverFake2;\n}\n</code></pre>\n\n<p>Second, <code>ElementsAre</code> officially does not support C-style arrays, according to <a href=\"https://groups.google.com/forum/#!topic/googlemock/zbowmXOF4v0\" rel=\"nofollow noreferrer\">this topic</a>. If you really cannot change your method signature, and you really wish to use <code>ElementsAre</code> on your raw array, you can use the hack proposed in that topic. Cheers.</p>\n"}], "owner": {"reputation": 93, "user_id": 2463130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b2e9fd07d662b1f65ccf60f218dcb8e?s=128&d=identicon&r=PG", "display_name": "derchris", "link": "https://stackoverflow.com/users/2463130/derchris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3564, "favorite_count": 0, "accepted_answer_id": 49301451, "answer_count": 1, "score": 2, "last_activity_date": 1521122372, "creation_date": 1521045298, "question_id": 49283176, "link": "https://stackoverflow.com/questions/49283176/google-mock-matching-an-array", "title": "Google Mock matching an array", "body": "<p>I know this has been asked multiple times but none of the answers work for me.\nThis is the mocked func I want to test:</p>\n\n<pre><code>  MOCK_METHOD2(sendInternal, void(uint8_t data[], uint8_t size));\n</code></pre>\n\n<p>The test goes like this</p>\n\n<pre><code>    uint8_t expectedMessageData[3] = { 0x08, 0xda, 0xff };\n\n\n    EXPECT_CALL(*serverFake, sendInternal(testing::_,3))\n            .With(testing::Args&lt;0, 1&gt;(ElementsAre(0x08, 0xda, 0xff)))\n            .Times(1);\n</code></pre>\n\n<p>But this results in</p>\n\n<blockquote>\n  <p>Expected args: are a tuple whose fields (#0, #1) has 2 elements where\n  element #0 is equal to '\\b' (8),\n  element #1 is equal to '\\xDA' (218)\n             Actual: don't match, whose fields (#0, #1) are (0x7fcfd9500590, '\\x11' (3)), which has 3 elements</p>\n</blockquote>\n\n<p>To me it seems like Gmock would compare the params and not the array's elements.</p>\n\n<p>I've even built a custom matcher:</p>\n\n<pre><code>MATCHER_P2(HasBytes, bytes, size, \"\") {\n    uint8_t * dataToCheck = arg;\n    bool isMatch = (memcmp(dataToCheck, bytes, size) == 0);\n    return isMatch;\n}\n</code></pre>\n\n<p>I can see (while debugging) that isMatch == true but the test still fails.</p>\n\n<p>Please help!</p>\n"}, {"tags": ["c", "pipe"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1521045576, "post_id": 49283091, "comment_id": 85569114, "body": "<code>cards[i]=readbuf;</code> - think <i>hard</i> about what that line of code actually does. What type of array is <code>cards</code> ? At every <code>card</code> slot you&#39;re storing the same <i>value</i> : the address of your read buffer, the content of which is overwritten with each read operation. Consequently all cards appear to not only be the same card, they&#39;re also the <i>last</i> card received. You need to make copies of those strings and store those addresses instead."}, {"owner": {"reputation": 45, "user_id": 9303902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65f1cea6c37b057c97dbabfd942d5ab?s=128&d=identicon&r=PG&f=1", "display_name": "YPFighter", "link": "https://stackoverflow.com/users/9303902/ypfighter"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1521045971, "post_id": 49283091, "comment_id": 85569367, "body": "cards[i]=readbuf;  The purpose of this code is to store the string value inside the pipe reading buffer. The type of the &quot;cards&quot; I expected is the string array which storing all the cards of the child"}, {"owner": {"reputation": 45, "user_id": 9303902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65f1cea6c37b057c97dbabfd942d5ab?s=128&d=identicon&r=PG&f=1", "display_name": "YPFighter", "link": "https://stackoverflow.com/users/9303902/ypfighter"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1521046388, "post_id": 49283091, "comment_id": 85569665, "body": "Can I say that : for now, all my value inside cards is pointing to the readbuf addresses therefore, all of the cards information is same with the latest information about readbuf?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1521046558, "post_id": 49283091, "comment_id": 85569787, "body": "Your latter comment is nearly verbatim to what I described. All that line of code does is save the base address of the read buffer into a slot in a pointer array (an array of pointers). When done, all slots in the pointer array have the same address, and therefore all will <i>appear</i> to have the same card. In reality, they <i>do</i> have the same card, but not because there are N distinct copies. Rather because they are actually pointing to the same memory location. In short, they not only &quot;have&quot; the same card, they <b>are</b> the same card, right down to the memory they occupy."}, {"owner": {"reputation": 45, "user_id": 9303902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65f1cea6c37b057c97dbabfd942d5ab?s=128&d=identicon&r=PG&f=1", "display_name": "YPFighter", "link": "https://stackoverflow.com/users/9303902/ypfighter"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1521046778, "post_id": 49283091, "comment_id": 85569939, "body": "I got you point! But how can I resolve this problem? I know I have to create the copy of the value inside the readbuf however, how..."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1521046868, "post_id": 49283091, "comment_id": 85570010, "body": "By making copies of the strings; again, exactly as I said in my last sentence of my first comment. If you&#39;re writing pipe code in C, you had better already know how to make a copy of a string in C. The latter is one of the things you learn in week-one of an C programming class."}], "owner": {"reputation": 45, "user_id": 9303902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65f1cea6c37b057c97dbabfd942d5ab?s=128&d=identicon&r=PG&f=1", "display_name": "YPFighter", "link": "https://stackoverflow.com/users/9303902/ypfighter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 292, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521045066, "creation_date": 1521045066, "question_id": 49283091, "link": "https://stackoverflow.com/questions/49283091/c-program-multiple-child-and-pipes", "title": "C program, Multiple Child and pipes", "body": "<p>I have to develop a mini card game (Go Fish) on C language which have the following requirements.<br>\n1. players of 2-8 child.<br>\n2. every child have to communicate with the parent through two dimensional pipe.  </p>\n\n<p>My progress now is that I have already finished the child creation and the setting of two dimensional pipes for every child, however, when I start doing the dealing card process, some problems come out and I tried so long to figure it out. Unlucky, I fail lots of times and I would like to ask here.</p>\n\n<p>Question 1: During the dealing process, parent will deal 7 cards to child and the every child needs to receive these cards and save into their own deck(which is a string array). However, my output shows that the string array becomes 7 equals cards which is not expected.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0e3Dx.png\" rel=\"nofollow noreferrer\">Output :All equal cards in the deck</a></p>\n\n<p>Question 2: How can I have a dynamic string array to store the cards information. Since during the game, every players may have a chance of having more then 7 cards.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\nint seed;\n\nvoid initrand(int myid){\n    seed = myid;\n}\n\nint myrand(){\n    return (seed++ % 99)+1;\n}\n\n\nint main(int argc, char *argv[]){\n    int pid, myid ,parentid, cid, seed, who, rank, cpp;//cpp = card per person\n    //Total number of argument\n    int num_arg = (argc-1);\n    int i,j,TotalchildNo,RemainchildNo,childNo;\n\n    //The total number of child process\n    TotalchildNo = RemainchildNo = atoi(argv[1]);\n\n    //&lt;Pipes&gt;\n    int parent_to_child[2*TotalchildNo];\n    int child_to_parent[2*TotalchildNo];\n    //&lt;/Pipes&gt;\n\n    char writebuf[80], readbuf[80];\n\n    //For 2-4 players\n    if(TotalchildNo&gt;=2||TotalchildNo&lt;=4) cpp=7;\n    //For 4-8 players\n    else if (TotalchildNo&gt;=4||TotalchildNo&lt;=8) cpp=5;\n\n    //Creating Pipe\n    for (int i = 0; i &lt; TotalchildNo; i++) {\n        pipe(&amp;parent_to_child[2*i]);\n        pipe(&amp;child_to_parent[2*i]);\n    }\n\n    //Creating child\n    for(i=0;i&lt;TotalchildNo;i++){\n        childNo = i;\n        pid = fork();\n        if(pid){\n            continue;\n        } else if (pid==0){\n            break;\n        } else {\n            printf(\"fork error\\n\");\n            exit(1);\n        }\n    }\n\n\n    if(pid==0){ //Child process\n        //printf(\"%d Child: %d\\n\",getpid(),childNo);\n        //Pipe setup\n        close(parent_to_child[2*childNo+1]);\n        close(child_to_parent[2*childNo]);\n\n        char *cards[30];\n        int numOfCards=0;\n        const char s[2] = \" \";\n\n        for(i=0;i&lt;cpp;i++){\n            //printf(\"Child %d listening to parent.\\n\",childNo);\n            read(parent_to_child[2*childNo],readbuf,80);\n            cards[i]=readbuf;\n            printf(\"Card %d: %s %s\\n\",i+1,readbuf, cards[i]);\n\n        }\n        printf(\"\\n\");\n        printf(\"%s %s %s %s %s %s %s \\n\",cards[0],cards[1],cards[2],cards[3],cards[4],cards[5],cards[6]);\n\n\n        //exit(0);\n    }else \n\n    {// Parent process\n        //Pipe setup (Close for every child invalid pipe)\n        for (int i = 0; i &lt; TotalchildNo; i++) {\n            close(parent_to_child[2*i]);\n            close(child_to_parent[2*i+1]);\n        }\n        //Initialize the deck of the parent\n        char card[4];\n\n        //Dealt card according to numbers of the players\n        for(i=0;i&lt;cpp;i++){\n            for(j=0;j&lt;TotalchildNo;j++){\n                //Send on card to specific player\n                fgets(card, sizeof card , stdin);\n                strcpy(writebuf,card);\n                write(parent_to_child[2*j+1],writebuf,80);              \n            }\n        }\n\n\n        while(RemainchildNo&gt;0){\n            cid = wait(NULL);\n            printf(\"Child %d has returned!\\n\",RemainchildNo);\n            --RemainchildNo;\n        }\n    }\n\n}\n</code></pre>\n\n<p>English is not my native language, I feel very sorry if you think my explanation is not clear enough.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1998, "user_id": 5914654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b97f9c0f12c8ab7f33a1abeef2d68e2?s=128&d=identicon&r=PG&f=1", "display_name": "vincrichaud", "link": "https://stackoverflow.com/users/5914654/vincrichaud"}, "edited": false, "score": 1, "creation_date": 1521044823, "post_id": 49282959, "comment_id": 85568614, "body": "And where are you blocked ? What is your question ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1521044825, "post_id": 49282959, "comment_id": 85568616, "body": "Stack Overflow isn&#39;t a wishing well where you throw in requests and get code back."}, {"owner": {"reputation": 338, "user_id": 7245311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A1AsA.png?s=128&g=1", "display_name": "poming", "link": "https://stackoverflow.com/users/7245311/poming"}, "edited": false, "score": 0, "creation_date": 1521045192, "post_id": 49282959, "comment_id": 85568875, "body": "Please do searching before you ask. <a href=\"https://stackoverflow.com/questions/35960478/count-word-occurrence\" title=\"count word occurrence\">stackoverflow.com/questions/35960478/count-word-occurrence</a>"}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 5045356, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/b9aiz.jpg?s=128&g=1", "display_name": "purpule", "link": "https://stackoverflow.com/users/5045356/purpule"}, "is_accepted": true, "score": 0, "last_activity_date": 1521045246, "creation_date": 1521045246, "answer_id": 49283155, "question_id": 49282959, "link": "https://stackoverflow.com/questions/49282959/how-can-i-get-the-text-input-from-the-user-and-count-the-words-i-am-searching/49283155#49283155", "title": "How can I get the text input from the user and count the words i am searching", "body": "<p>You could use the <code>scanf</code>-function to get text input from the user; the function will put it into a <code>char</code> array. (You would ask the user for the sentence as well as the word you are looking for)\nThen you could use the <a href=\"https://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm\" rel=\"nofollow noreferrer\">KMP-algorithm</a> to search for the given word in the sentence and just count the times the algorithm finds your word.</p>\n"}], "owner": {"reputation": 23, "user_id": 9492723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0614f7967c865db520b70c650c59311?s=128&d=identicon&r=PG&f=1", "display_name": "Anil", "link": "https://stackoverflow.com/users/9492723/anil"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1521046208, "accepted_answer_id": 49283155, "answer_count": 1, "score": -4, "last_activity_date": 1521045246, "creation_date": 1521044731, "question_id": 49282959, "link": "https://stackoverflow.com/questions/49282959/how-can-i-get-the-text-input-from-the-user-and-count-the-words-i-am-searching", "closed_reason": "Not suitable for this site", "title": "How can I get the text input from the user and count the words i am searching", "body": "<p>I am using fgets to get a sentence from the user and i am trying to get words and count on c code then print it. \nExapmle: i want to count \"Hello\". When the program starts user write \"Hello World Hello\" and then the program prints \"Hello used 2 times\".</p>\n"}, {"tags": ["python", "c", "for-loop", "callback", "ctypes"], "comments": [{"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1521044686, "post_id": 49282888, "comment_id": 85568516, "body": "have you simply printed the value returned by &quot;len(DATA)&quot; ?"}, {"owner": {"reputation": 2484, "user_id": 1672565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/OEMWS.png?s=128&g=1", "display_name": "s-m-e", "link": "https://stackoverflow.com/users/1672565/s-m-e"}, "reply_to_user": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1521044736, "post_id": 49282888, "comment_id": 85568557, "body": "@Tom&#39;s Yep, it&#39;s 10."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 2, "creation_date": 1521044908, "post_id": 49282888, "comment_id": 85568663, "body": "Have you tried printing <code>len</code> in the C function?"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1521044948, "post_id": 49282888, "comment_id": 85568687, "body": "then I&#39;m as puzzled as you. Can you try debuging step by step and/or adding printf debug in the C dll (like knowing value of len and result of get_data)"}, {"owner": {"reputation": 26786, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 1, "creation_date": 1521045014, "post_id": 49282888, "comment_id": 85568737, "body": "Why is <code>conveyor_belt</code> a <code>WINFUNCTYPE</code> taking two parameters?"}, {"owner": {"reputation": 2484, "user_id": 1672565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/OEMWS.png?s=128&g=1", "display_name": "s-m-e", "link": "https://stackoverflow.com/users/1672565/s-m-e"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1521045053, "post_id": 49282888, "comment_id": 85568768, "body": "@JeremyP Yep ... I have filled my C function with plenty of printf statements ... all it did was make the loop break even earlier (sometimes, non-deterministic)."}, {"owner": {"reputation": 2484, "user_id": 1672565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/OEMWS.png?s=128&g=1", "display_name": "s-m-e", "link": "https://stackoverflow.com/users/1672565/s-m-e"}, "reply_to_user": {"reputation": 26786, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1521045111, "post_id": 49282888, "comment_id": 85568811, "body": "@quamrana That&#39;s a Python/ctypes thing. The first parameter actually is the return type of the function prototype, the second one is the (first/only) parameter type."}, {"owner": {"reputation": 2484, "user_id": 1672565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/OEMWS.png?s=128&g=1", "display_name": "s-m-e", "link": "https://stackoverflow.com/users/1672565/s-m-e"}, "reply_to_user": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1521045214, "post_id": 49282888, "comment_id": 85568892, "body": "@Tom&#39;s I have filled this thing up with printf statements, see comment(s) above. I guess I&#39;ll have to run this thing through a debugger."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1521045590, "post_id": 49282888, "comment_id": 85569124, "body": "It seem you have missed an argument in &quot;ctypes.WINFUNCTYPE&quot; part. The first argument must be the return type (which you do correctly) and the other must be the argument type. But there, you only supplied &quot;c_int16&quot; (corresponding to argument &quot;len&quot;). The fact that the function pointer is missing is do on purpose ?"}, {"owner": {"reputation": 2484, "user_id": 1672565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/OEMWS.png?s=128&g=1", "display_name": "s-m-e", "link": "https://stackoverflow.com/users/1672565/s-m-e"}, "reply_to_user": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1521045771, "post_id": 49282888, "comment_id": 85569234, "body": "@Tom&#39;s Hmm maybe I am misunderstanding this. The <code>ctypes.WINFUNCTYPE</code> part only describes the interface of the call back function: <code>get_data</code>. It has one argument and one return value."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1521045865, "post_id": 49282888, "comment_id": 85569286, "body": "No, it&#39;s me : I&#39;m not used to python and particulary on this kind of stuff. You seem doing it rigth, so we get back on &quot;debugging&quot; the whole thing."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1521046289, "post_id": 49282888, "comment_id": 85569596, "body": "I can&#39;t reproduce this."}, {"owner": {"reputation": 2484, "user_id": 1672565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/OEMWS.png?s=128&g=1", "display_name": "s-m-e", "link": "https://stackoverflow.com/users/1672565/s-m-e"}, "edited": false, "score": 0, "creation_date": 1521046798, "post_id": 49282888, "comment_id": 85569954, "body": "@n.m.Thanks a lot for trying. I added more info about my test environment at the bottom of my question. Maybe it helps."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1521048843, "post_id": 49282888, "comment_id": 85571370, "body": "This is not supposed to happen so I would suggest firing up a debugger. Possibly over a debug build of Python too."}, {"owner": {"reputation": 186, "user_id": 265467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/031fb909df41384511a3d04d0479d4d0?s=128&d=identicon&r=PG", "display_name": "ThFabba", "link": "https://stackoverflow.com/users/265467/thfabba"}, "edited": false, "score": 0, "creation_date": 1521052927, "post_id": 49282888, "comment_id": 85573758, "body": "You&#39;ve got a calling convention mismatch. This may give you a mismatched stack pointer, and could potentially cause your local variables, such as i and len, to be overwritten. You should either use CFUNCTYPE or add __stdcall to your function pointer type declaration."}, {"owner": {"reputation": 2484, "user_id": 1672565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/OEMWS.png?s=128&g=1", "display_name": "s-m-e", "link": "https://stackoverflow.com/users/1672565/s-m-e"}, "reply_to_user": {"reputation": 186, "user_id": 265467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/031fb909df41384511a3d04d0479d4d0?s=128&d=identicon&r=PG", "display_name": "ThFabba", "link": "https://stackoverflow.com/users/265467/thfabba"}, "edited": false, "score": 0, "creation_date": 1521053274, "post_id": 49282888, "comment_id": 85573934, "body": "@ThFabba Yep, this works. Thanks a lot, you saved the day :) Feel free to post this as an answer: <code>typedef int16_t __stdcall (*conveyor_belt)(int16_t index);</code> is all it required."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 2, "creation_date": 1521078817, "post_id": 49282888, "comment_id": 85583739, "body": "Worth noting that this fails in 32-bit Python due to the mismatched calling convention.  64-bit Python doesn&#39;t fail because there is only one calling convention and __stdcall/__cdecl are ignored."}], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 265467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/031fb909df41384511a3d04d0479d4d0?s=128&d=identicon&r=PG", "display_name": "ThFabba", "link": "https://stackoverflow.com/users/265467/thfabba"}, "is_accepted": true, "score": 2, "last_activity_date": 1521053638, "creation_date": 1521053638, "answer_id": 49285676, "question_id": 49282888, "link": "https://stackoverflow.com/questions/49282888/for-loop-in-c-breaks-early-for-no-obvious-reason-possibly-related-to-a-functio/49285676#49285676", "title": "For loop in C breaks early for no obvious reason - possibly related to a function pointer (call back)", "body": "<p>Your conveyor_belt function is not defined in the same way between C and Python.</p>\n\n<pre><code>typedef int16_t (*conveyor_belt)(int16_t index);\n</code></pre>\n\n<p>This declares your function pointer type to use the cdecl calling convention (unless overridden by special compiler flags).</p>\n\n<pre><code>conveyor_belt = ctypes.WINFUNCTYPE(ctypes.c_int16, ctypes.c_int16)\n</code></pre>\n\n<p>Whereas this declares your Python function to use stdcall calling convention.</p>\n\n<p>Calling the function with the wrong calling convention will offset your stack pointer a little bit every time. Depending on the stack layout your compiler generated, this may end up overwriting local variables or parameters (i.e. i or len to cause your loop to break).</p>\n\n<p>You should either switch from WINFUNCTYPE to CFUNCTYPE to indicate cdecl, or change the typedef to add __stdcall:</p>\n\n<pre><code>typedef int16_t (__stdcall *conveyor_belt)(int16_t index);\n</code></pre>\n\n<p>(Note that the calling convention belongs inside the parentheses but before the asterisk. Some compilers accept it in other places, but MSVC will not.)</p>\n"}], "owner": {"reputation": 2484, "user_id": 1672565, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/OEMWS.png?s=128&g=1", "display_name": "s-m-e", "link": "https://stackoverflow.com/users/1672565/s-m-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 49285676, "answer_count": 1, "score": 1, "last_activity_date": 1521053638, "creation_date": 1521044511, "last_edit_date": 1521047508, "question_id": 49282888, "link": "https://stackoverflow.com/questions/49282888/for-loop-in-c-breaks-early-for-no-obvious-reason-possibly-related-to-a-functio", "title": "For loop in C breaks early for no obvious reason - possibly related to a function pointer (call back)", "body": "<p>I am experimenting with a DLL written in C and callback functions written in Python. My DLL contains the following definition and routine:</p>\n\n<pre><code>typedef int16_t (*conveyor_belt)(int16_t index);\n\nint16_t __stdcall DEMODLL sum_elements_from_callback(\n    int16_t len,\n    conveyor_belt get_data\n    )\n{\n    int16_t sum = 0;\n    int i;\n    for(i = 0; i &lt; len; i++)\n    {\n        sum += get_data(i);\n    }\n    return sum;\n}\n</code></pre>\n\n<p>I call the above from a Python script using <code>ctypes</code>:</p>\n\n<pre><code>import ctypes\n\nDATA = [1, 6, 8, 4, 9, 7, 4, 2, 5, 2]\n\nconveyor_belt = ctypes.WINFUNCTYPE(ctypes.c_int16, ctypes.c_int16)\n\n@conveyor_belt\ndef get_data(index):\n    print((index, DATA[index]))\n    return DATA[index]\n\ndll = ctypes.windll.LoadLibrary('demo_dll.dll')\nsum_elements_from_callback = dll.sum_elements_from_callback\nsum_elements_from_callback.argtypes = (ctypes.c_int16, conveyor_belt)\nsum_elements_from_callback.restype = ctypes.c_int16\n\ntest_sum = sum_elements_from_callback(len(DATA), get_data)\nprint(('sum', 48, test_sum))\n</code></pre>\n\n<p>The output I get looks like this (most of the time):</p>\n\n<pre><code>(0, 1)\n(1, 6)\n(2, 8)\n(3, 4)\n(4, 9)\n(5, 7)\n(6, 4)\n(7, 2)\n('sum', 48, 41)\n</code></pre>\n\n<p>From what I can tell, the for loop just does not iterate over all 10 elements of DATA as I would expect it to do ... It usually \"breaks\" after 8 elements, sometimes even only after 5 or 6. I can confirm that the length of DATA is correctly passed into the DLL routine. I am puzzled.</p>\n\n<hr>\n\n<p>Just in case this is a compiler (flag) issue, here is an excerpt from my makefile:</p>\n\n<pre><code>CC      = i686-w64-mingw32-gcc\nCFLAGS  = -Wall -Wl,-add-stdcall-alias -shared -std=c99\nLDFLAGS = -lm\n</code></pre>\n\n<p>I am working with mingw (32 bit) on top of 64 bit Linux:</p>\n\n<pre><code>user@box:~&gt; i686-w64-mingw32-gcc --version\ni686-w64-mingw32-gcc (GCC) 7.2.0\nuser@box:~&gt; uname -s -r -p\nLinux 4.4.114-42-default x86_64\n</code></pre>\n\n<p>For running the DLL and the Python script, I am using an official 32 bit release build of CPython 3.5.3 for Windows on top of 32 bit Wine:</p>\n\n<pre><code>user@box:~&gt; wine --version\nwine-2.18\n</code></pre>\n\n<p>It's a robust combination which I have been using intensively for a while now.</p>\n\n<hr>\n\n<p>Using the call back in the C code makes a difference. The following code will stop after about 5 to 8 iterations (without error):</p>\n\n<pre><code>int16_t sum = 0;\nint16_t sum_index = 0;\nint16_t i;\nfor(i = 0; i &lt; len; i++)\n{\n    sum_index += i;\n    sum += get_data(i);\n}\n</code></pre>\n\n<p>The following code will iterate to the end as I do expect it. It just does not call the call back function:</p>\n\n<pre><code>int16_t sum = 0;\nint16_t sum_index = 0;\nint16_t i;\nfor(i = 0; i &lt; len; i++)\n{\n    sum_index += i;\n    // sum += get_data(i);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1521042698, "post_id": 49282228, "comment_id": 85567015, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a <a href=\"https://en.wikipedia.org/wiki/Debugger\" rel=\"nofollow noreferrer\">debugger</a> to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 9193556, "user_type": "registered", "profile_image": "https://graph.facebook.com/140039196636329/picture?type=large", "display_name": "Web King", "link": "https://stackoverflow.com/users/9193556/web-king"}, "edited": false, "score": 0, "creation_date": 1521567692, "post_id": 49282276, "comment_id": 85783139, "body": "Tysm.. I forgot to reinitialise an to zero. :)"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 1, "last_activity_date": 1521042750, "creation_date": 1521042750, "answer_id": 49282276, "question_id": 49282228, "link": "https://stackoverflow.com/questions/49282228/armstrong-numbers-from-100-to-999/49282276#49282276", "title": "Armstrong numbers from 100 to 999", "body": "<ol>\n<li><p>You don't reinitialise <code>an</code> to zero for each separate number.</p></li>\n<li><p>Using <code>pow</code> for such a small integral exponent might cause truncation due to floating point undershoot. Use <code>r * r * r</code> instead.</p></li>\n</ol>\n\n<p>Related: I only know what an Armstrong number is since I studied mathematics at university and have a good memory. It might be an idea to define that explicitly in your question to help other folk answer.</p>\n"}], "owner": {"reputation": 19, "user_id": 9193556, "user_type": "registered", "profile_image": "https://graph.facebook.com/140039196636329/picture?type=large", "display_name": "Web King", "link": "https://stackoverflow.com/users/9193556/web-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1062, "favorite_count": 0, "closed_date": 1521043035, "accepted_answer_id": 49282276, "answer_count": 1, "score": -2, "last_activity_date": 1521042756, "creation_date": 1521042608, "last_edit_date": 1521042756, "question_id": 49282228, "link": "https://stackoverflow.com/questions/49282228/armstrong-numbers-from-100-to-999", "closed_reason": "Not suitable for this site", "title": "Armstrong numbers from 100 to 999", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n\nvoid main()\n{\n    int num,n,an=0,r;\n\n    for(num=100;num&lt;1000;num++)\n    {\n        n=num;\n        do\n        {\n            r=n%10;\n            an+=pow(r,3);\n            n=n/10;\n        }\n        while(n!=0);\n        if(an==num)\n        {\n            printf(\"Armstrong No Is:%d\",an);\n        }\n        else\n        {\n            continue;\n        }\n\n    }\n}\n</code></pre>\n\n<p>I tried to print <a href=\"https://en.wikipedia.org/wiki/Narcissistic_number\" rel=\"nofollow noreferrer\">Armstrong numbers</a> but the problem with this code is that its always executing else statement(continue) which means an!=num in whole code.I don't know what's wrong in my logic.Please help me to solve this.</p>\n"}, {"tags": ["c", "multithreading"], "comments": [{"owner": {"reputation": 2176, "user_id": 5402401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dPV49.jpg?s=128&g=1", "display_name": "0.sh", "link": "https://stackoverflow.com/users/5402401/0-sh"}, "edited": false, "score": 0, "creation_date": 1521055743, "post_id": 49281906, "comment_id": 85575249, "body": "it is bad habit to try to figure out things like this or predict this like this, it is the job of the SCHEDULER to choose which thread to wake up whenever you call <code>pthread_cond_signal</code>, the thread to wake up must have the same function signature as <code>pthread_cond_signal</code> in respect of the condition variable"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 1, "creation_date": 1521058363, "post_id": 49281906, "comment_id": 85576761, "body": "...In other words, if two threads in your program await the same condition, they should be interchangeable:  Your code should be designed so that it does not matter which one of them handles the event."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1521041885, "creation_date": 1521041885, "answer_id": 49281946, "question_id": 49281906, "link": "https://stackoverflow.com/questions/49281906/which-thread-would-be-notified-by-pthread-cond-signal/49281946#49281946", "title": "Which thread would be notified by pthread_cond_signal?", "body": "<p>Yes, it will wake one thread seemingly randomly. It's up to the operating system to decide which one will be woken.</p>\n"}, {"tags": [], "owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "is_accepted": false, "score": 5, "last_activity_date": 1521042016, "creation_date": 1521042016, "answer_id": 49281990, "question_id": 49281906, "link": "https://stackoverflow.com/questions/49281906/which-thread-would-be-notified-by-pthread-cond-signal/49281990#49281990", "title": "Which thread would be notified by pthread_cond_signal?", "body": "<p><a href=\"https://linux.die.net/man/3/pthread_cond_signal\" rel=\"noreferrer\">Straight from the man</a>:</p>\n\n<blockquote>\n  <p>If more than one thread is blocked on a condition variable, the scheduling policy shall determine the order in which threads are unblocked.</p>\n</blockquote>\n\n<p>The \"scheduling policy\" is the order the operating systems decided on. It's one of the four listed in the below link, but you don't really know (without some impressive hackery at least) which one is \"first\" anyway. It shouldn't matter either - all threads waiting on the condition should be equally ready to continue - otherwise you have a design problem.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9775010/scheduling-policies-in-linux-kernel\">Scheduling policies in Linux Kernel</a> has a bit of discussion on some linux policies, and you can google from there if it's important.</p>\n"}, {"tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 1, "last_activity_date": 1521044450, "creation_date": 1521044450, "answer_id": 49282864, "question_id": 49281906, "link": "https://stackoverflow.com/questions/49281906/which-thread-would-be-notified-by-pthread-cond-signal/49282864#49282864", "title": "Which thread would be notified by pthread_cond_signal?", "body": "<p>See below my example which will help you to understand about it very clearly.I am using 3 mutexs and 3 conditions. With the below example you can synchronized or prioritize any number of threads in C. If you see the first thread here it locked mutex lock1 and waiting on cond1, likewise second thread locked mutex lock2 and waits on condition cond2 and 3rd thread locked mutex lock3 and waits on condition cond3. This is the current situation of all the threads after they are being created and now all the threads are waiting for a signal to execute further on its condition variable. In the main thread (i.e. main function, every program has one main thread, in C/C++ this main thread created automatically by operating system once control pass to the main method by kernal) we are calling pthread_cond_signal(&amp;cond1); once this system call done thread1 who was waiting on cond1 will be release and it will start executing. Once it finished with its task it will call pthread_cond_signal(&amp;cond3); now thread who was waiting on condition cond3 i.e. thread3 will be release and it will start execute and will call pthread_cond_signal(&amp;cond2); which will release the thread who is waiting on condition cond2 i.e. in this case thread2.</p>\n\n<pre><code>include&lt;pthread.h&gt;\n\npthread_cond_t cond1 = PTHREAD_COND_INITIALIZER;\npthread_cond_t cond2 = PTHREAD_COND_INITIALIZER;\npthread_cond_t cond3 = PTHREAD_COND_INITIALIZER;\npthread_mutex_t lock1 = PTHREAD_MUTEX_INITIALIZER;\npthread_mutex_t lock2 = PTHREAD_MUTEX_INITIALIZER;\npthread_mutex_t lock3 = PTHREAD_MUTEX_INITIALIZER;\n\nint TRUE = 1;\n\nvoid print(char *p)\n{\n  printf(\"%s\",p);\n}\n\nvoid * threadMethod1(void *arg)\n{\n  printf(\"In thread1\\n\");\n  do{\n    pthread_mutex_lock(&amp;lock1);\n    pthread_cond_wait(&amp;cond1, &amp;lock1);\n    print(\"I am thread 1st\\n\");\n    pthread_cond_signal(&amp;cond3);/* Now allow 3rd thread to process */\n    pthread_mutex_unlock(&amp;lock1);\n  }while(TRUE);\n  pthread_exit(NULL);\n}\n\nvoid * threadMethod2(void *arg)\n{\n  printf(\"In thread2\\n\");\n  do\n  {\n    pthread_mutex_lock(&amp;lock2);\n    pthread_cond_wait(&amp;cond2, &amp;lock2);\n    print(\"I am thread 2nd\\n\");\n    pthread_cond_signal(&amp;cond1);\n    pthread_mutex_unlock(&amp;lock2);\n  }while(TRUE);\n  pthread_exit(NULL);\n}\n\nvoid * threadMethod3(void *arg)\n{\n  printf(\"In thread3\\n\");\n  do\n  {\n    pthread_mutex_lock(&amp;lock3);\n    pthread_cond_wait(&amp;cond3, &amp;lock3);\n    print(\"I am thread 3rd\\n\");\n    pthread_cond_signal(&amp;cond2);\n    pthread_mutex_unlock(&amp;lock3);\n  }while(TRUE);\n  pthread_exit(NULL);\n}\n\nint main(void)\n{\n  pthread_t tid1, tid2, tid3;\n  int i = 0;\n\n  printf(\"Before creating the threads\\n\");\n  if( pthread_create(&amp;tid1, NULL, threadMethod1, NULL) != 0 )\n        printf(\"Failed to create thread1\\n\");\n  if( pthread_create(&amp;tid2, NULL, threadMethod2, NULL) != 0 )\n        printf(\"Failed to create thread2\\n\");\n  if( pthread_create(&amp;tid3, NULL, threadMethod3, NULL) != 0 )\n        printf(\"Failed to create thread3\\n\");\n  pthread_cond_signal(&amp;cond1);/* Now allow first thread to process first */\n\n\n  sleep(1);\n  TRUE = 0;/* Stop all the thread */\n  sleep(3);\n\n /* this is how we join thread before exit from a system */\n  /*  \n  pthread_join(tid1,NULL);\n  pthread_join(tid2,NULL);\n  pthread_join(tid3,NULL);*/\n\n exit(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 7139934, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f50db390c86b75815eb1f9d37034684e?s=128&d=identicon&r=PG&f=1", "display_name": "Howo", "link": "https://stackoverflow.com/users/7139934/howo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1521044450, "creation_date": 1521041797, "question_id": 49281906, "link": "https://stackoverflow.com/questions/49281906/which-thread-would-be-notified-by-pthread-cond-signal", "title": "Which thread would be notified by pthread_cond_signal?", "body": "<p>When a thread call <code>pthread_cond_signal()</code>, Unix network programming said <code>pthread_cond_signal()</code> just would nofity just one thread, beacause it isn't <code>pthread_cond_broadcast()</code>. It means there is no race condition. However, the book does not say which thread would be notified, and how. Does the function wake thread randomly?</p>\n"}, {"tags": ["c", "dynamic", "linker", "implicit"], "answers": [{"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1521044838, "post_id": 49282047, "comment_id": 85568624, "body": "So with &quot;implicit&quot; it is the loader and the OS that make sure the libraries are available, and with &quot;explicit&quot; it is the programmer. And of course a mix is also possible."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1521045068, "post_id": 49282047, "comment_id": 85568782, "body": "Also: some Windows DLLs are not loaded implicitly, such as <code>RICHED32.DLL</code>. Without a <code>LoadLibrary</code> call the program won&#39;t start (or will crash)."}, {"owner": {"reputation": 63, "user_id": 7802045, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b405dbec103e4b4c1fa5567c8bb682ef?s=128&d=identicon&r=PG&f=1", "display_name": "xjk", "link": "https://stackoverflow.com/users/7802045/xjk"}, "edited": false, "score": 0, "creation_date": 1521080653, "post_id": 49282047, "comment_id": 85584208, "body": "thanks for answer . Take a linux .so file as example . my doubt is : the implicit linking compare with the explicit way , will the explicit way cause more IO or cpu or memory somehow ?"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 1, "creation_date": 1521102902, "post_id": 49282047, "comment_id": 85591476, "body": "From the point of view of your program only, yes, because you will have to call extra function (that perform I/O indeed) and retain the information in runtime (so memory will be taken). However, those same operation will be done rigth before executing your program, so globaly, maybe it&#39;s the same. What I can be sure is that worrying about memory consuption, extra IO / CPU is probably useless since those operation should be done juste once at runtime. If you open/close freneticly in a while loop, yes, it will be bad, but it&#39;s the same as open/close a picture in order to display it in a GUI[...]"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 1, "creation_date": 1521103082, "post_id": 49282047, "comment_id": 85591568, "body": "[...] or any other operation like allocate memory, freeing just rigth after and allocate it again (luckily, the inner allocation mecanisme may prevent performance drop in that case, since when you free the memory, it doesn&#39;t really give back the memory to the OS). In this kind of case, it the algorithm that is broken, not the fact to load a dll/so."}, {"owner": {"reputation": 63, "user_id": 7802045, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b405dbec103e4b4c1fa5567c8bb682ef?s=128&d=identicon&r=PG&f=1", "display_name": "xjk", "link": "https://stackoverflow.com/users/7802045/xjk"}, "edited": false, "score": 0, "creation_date": 1521104450, "post_id": 49282047, "comment_id": 85592390, "body": "understood . thanks for sharing ."}], "tags": [], "owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "is_accepted": true, "score": 3, "last_activity_date": 1521044564, "last_edit_date": 1521044564, "creation_date": 1521042155, "answer_id": 49282047, "question_id": 49281852, "link": "https://stackoverflow.com/questions/49281852/implicit-dynamic-linking-vs-explicit-dynamic-linking-which-is-more-effective/49282047#49282047", "title": "implicit dynamic linking vs explicit dynamic linking - which is more effective?", "body": "<p>From what I understand, implicit dynamic linking is the fact of saying that your program needs the library in order to run, by adding the library in the dependency section of your program. If the library isn't found at the start of the program, the program simply won't be executed.</p>\n\n<p>Explicit dynamic linking is using a function like \"LoadLibrary\" (windows) or \"dlopen\" (Linux) in order to load a library at runtime. It's exactly what a plugin is, and how you can code it.</p>\n\n<p>Now, doing an explicit dynamic linking is going to add work and complexity, and I don't see any reason for it to be more efficient than an implicit dynamic linking. You use explicit dynamic linking only when you cannot do otherwise, like loading a library depending on some runtime value.</p>\n"}], "owner": {"reputation": 63, "user_id": 7802045, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b405dbec103e4b4c1fa5567c8bb682ef?s=128&d=identicon&r=PG&f=1", "display_name": "xjk", "link": "https://stackoverflow.com/users/7802045/xjk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1149, "favorite_count": 0, "closed_date": 1521063024, "accepted_answer_id": 49282047, "answer_count": 1, "score": 1, "last_activity_date": 1521080708, "creation_date": 1521041659, "last_edit_date": 1521080708, "question_id": 49281852, "link": "https://stackoverflow.com/questions/49281852/implicit-dynamic-linking-vs-explicit-dynamic-linking-which-is-more-effective", "closed_reason": "Needs details or clarity", "title": "implicit dynamic linking vs explicit dynamic linking - which is more effective?", "body": "<p>There are two ways to link a shared library .<br>\none named implicit dynamic linking and one named explicit dynamic linking.<br>\nI have googled some doc not found docs tells the difference on efficiency of the two .<br>\nTake a linux .so file as example . my doubt is : the implicit linking compare with the explicit way , will the explicit way cause more IO or cpu or memory somehow ?<br>\nWondering which way is more effective and why ?<br>\nthanks a lot !</p>\n"}, {"tags": ["c++", "c", "memory-management", "free", "tcmalloc"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1521041439, "post_id": 49281720, "comment_id": 85566023, "body": "Why do you need this? There is no such thing forn the standard <code>malloc</code> either?"}, {"owner": {"reputation": 1056, "user_id": 1498329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f05806694ca16c86f8adaa7e94bae308?s=128&d=identicon&r=PG", "display_name": "Daniel Heilper", "link": "https://stackoverflow.com/users/1498329/daniel-heilper"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1521041690, "post_id": 49281720, "comment_id": 85566228, "body": "@Michael Walz - I don&#39;t think it is important why I need this. Also, TCMalloc is much more comprehensive library than standard malloc, and it has also heap profiling tool, etc..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1521041888, "post_id": 49281720, "comment_id": 85566400, "body": "The &quot;why&quot; is often important (See this: <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">xyproblem.info</a>)"}, {"owner": {"reputation": 1056, "user_id": 1498329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f05806694ca16c86f8adaa7e94bae308?s=128&d=identicon&r=PG", "display_name": "Daniel Heilper", "link": "https://stackoverflow.com/users/1498329/daniel-heilper"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1521042406, "post_id": 49281720, "comment_id": 85566789, "body": "@Michael Walz - allocation counting for requests, when each request exclusively owns a group of threads. Each request is inspected once in a while to see if it satisfies memory constraints.  The Idea is to Proxy the existing malloc/free calls with a minimal management of a counter per request. When malloc is called the size is trivially known, but not when free is called"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1521043341, "post_id": 49281720, "comment_id": 85567525, "body": "You could write your own <code>mymalloc&#47;myfree</code> functions that call the original <code>malloc&#47;free</code> or <code>TCMalloc&#47;free</code> or what ever, and store the allocated size before the actual data. But this adds a little overhead."}, {"owner": {"reputation": 1056, "user_id": 1498329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f05806694ca16c86f8adaa7e94bae308?s=128&d=identicon&r=PG", "display_name": "Daniel Heilper", "link": "https://stackoverflow.com/users/1498329/daniel-heilper"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1521043560, "post_id": 49281720, "comment_id": 85567685, "body": "@Michael Walz I&#39;m trying to avoid any overhead in management. Your idea is a well-known approach, however, it can cause serious fragmentations (and performance degradations) if calling malloc of multiple of  page size."}], "answers": [{"comments": [{"owner": {"reputation": 1056, "user_id": 1498329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f05806694ca16c86f8adaa7e94bae308?s=128&d=identicon&r=PG", "display_name": "Daniel Heilper", "link": "https://stackoverflow.com/users/1498329/daniel-heilper"}, "edited": false, "score": 0, "creation_date": 1521119180, "post_id": 49283063, "comment_id": 85602133, "body": "I tried it, with calling malloc_usable_size, and it seems to have alias to tc_malloc_size (I cannot call directly to tc_XX api since the library is preloaded)."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 2, "last_activity_date": 1521143156, "last_edit_date": 1521143156, "creation_date": 1521044999, "answer_id": 49283063, "question_id": 49281720, "link": "https://stackoverflow.com/questions/49281720/tcmalloc-get-size-of-allocation-for-a-pointer/49283063#49283063", "title": "TCMalloc - get size of allocation for a pointer", "body": "<p>Since version 1.6, TCMalloc <a href=\"https://github.com/gperftools/gperftools/blob/master/src/gperftools/tcmalloc.h.in#L118\" rel=\"nofollow noreferrer\">includes</a>:</p>\n\n<pre><code>size_t tc_malloc_size(void*);\n</code></pre>\n\n<p>which returns the usable size of the allocation starting at the argument.</p>\n\n<p>It is identical to the glibc <code>malloc_usable_size</code> (or BSD's <code>malloc_size</code>), and <code>libtcmalloc</code> includes aliases for both of those functions.</p>\n\n<p>However, it is <em>not</em> necessarily the originally requested size. It may be larger (and usually is). I don't believe that TCMalloc (or most other malloc implementations) retain that metadata, so there is (afaik) neither a reliable nor an unreliable mechanism to time travel back to the original malloc call and inspect the request size.</p>\n"}], "owner": {"reputation": 1056, "user_id": 1498329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f05806694ca16c86f8adaa7e94bae308?s=128&d=identicon&r=PG", "display_name": "Daniel Heilper", "link": "https://stackoverflow.com/users/1498329/daniel-heilper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 49283063, "answer_count": 1, "score": 0, "last_activity_date": 1521143156, "creation_date": 1521041319, "question_id": 49281720, "link": "https://stackoverflow.com/questions/49281720/tcmalloc-get-size-of-allocation-for-a-pointer", "title": "TCMalloc - get size of allocation for a pointer", "body": "<p>Using TCMalloc - given heap allocated object, is there any way to get the allocated size of the object (meaning only the size passed in malloc call)?\nI'm asking for a \"reliable\" method (i.e, not going a word size back assuming the allocation size is stored before the pointer)</p>\n"}, {"tags": ["c", "assembly", "compilation", "stack", "pdp-11"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1521039279, "post_id": 49280843, "comment_id": 85564386, "body": "Each architecture has it&#39;s own conventions documented in the corresponding ABI. Find one for your case."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 3, "creation_date": 1521039476, "post_id": 49280843, "comment_id": 85564520, "body": "That <i>is</i> the original position before the <code>call</code> instruction.  C with stack-args calling conventions often uses a caller-pops convention.  I&#39;d definitely expect that on PDP-11, because very early C often didn&#39;t use prototypes, so the callee could easily pass an extra arg (that the callee wouldn&#39;t know to pop) without it being a compile-time error.  But caller-pops conventions don&#39;t have a problem with that, so they work for <code>printf</code> and other variadic functions."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1521039805, "post_id": 49280843, "comment_id": 85564787, "body": "Besides the ABI mentioned by Eugene Sh., for some CPU architectures the conventions for calling functions and passing parameters may even vary between compiler vendors."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1521047435, "post_id": 49280843, "comment_id": 85570381, "body": "Off-topic, since asking for external resources (ABI conventions for PDP11)"}], "answers": [{"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 2, "creation_date": 1521043776, "post_id": 49280979, "comment_id": 85567849, "body": "This answer does not stand on its own and on top links to an irrelevant ABI supplement. Please amend to actually answer the question or post as a comment instead."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 4, "creation_date": 1521044205, "post_id": 49280979, "comment_id": 85568158, "body": "@fuz Well, the question is &quot;how does C program transfer arguments under the hood?&quot; What else is there to say, since this isn&#39;t about C, but all about the ABI. I don&#39;t know how it would be possible to flesh out the answer more. As for if PDP-11 had caller/callee push-pop etc, I&#39;m sure it is mentioned in RTFM for whatever dinosaur compiler that&#39;s needed to compile for that hardware - whoever is interested in software archaeology could go read that themselves."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 2, "creation_date": 1521049720, "post_id": 49280979, "comment_id": 85571909, "body": "Your last addendum reads like \u201cIt&#39;s up to you to find an answer to your question.\u201d Seems a bit like you missed the point of answering questions on Stack Overflow."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1521051496, "post_id": 49280979, "comment_id": 85572966, "body": "No, asking for external resources is off-topic. By googling I found a few"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1521057669, "post_id": 49280979, "comment_id": 85576334, "body": "@BasileStarynkevitch OP did not ask for external resources. OP asked for an expanation, which your answer does not provide (links to external resources do not constitute an explanation)."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1521094753, "last_edit_date": 1521094753, "creation_date": 1521039447, "answer_id": 49280979, "question_id": 49280843, "link": "https://stackoverflow.com/questions/49280843/how-does-c-program-transfer-arguments-under-the-hood/49280979#49280979", "title": "how does C program transfer arguments under the hood?", "body": "<p>It is not C, but the <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow noreferrer\">Application Binary Interface</a> conventions (you often have <em>several</em> language implementations or compilers following the <em>same</em> ABI, and you did had in the past various compilers with <em>different</em> ABI conventions on the same system). And it is architecture and operating system specific. BTW, <a href=\"https://en.wikipedia.org/wiki/Calling_convention\" rel=\"nofollow noreferrer\">calling conventions</a> are part of ABIs.</p>\n\n<p>For examples, see those <a href=\"https://github.com/hjl-tools/x86-psABI/wiki/X86-psABI\" rel=\"nofollow noreferrer\">related to x86</a></p>\n\n<p>It is up to you to find the ABI conventions for the archeological PDP11 computer (and compiler, and OS), e.g. see <a href=\"http://ftp.dbit.com/pub/pdp11/faq/faq.html\" rel=\"nofollow noreferrer\">PDP11 FAQ</a> and <a href=\"https://www.bell-labs.com/usr/dmr/www/clcs.html\" rel=\"nofollow noreferrer\">C calling conventions</a>. Some ABIs used the stack, with various caller safe / callee safe conventions on registers.</p>\n\n<blockquote>\n  <p>My puzzle is sp (stack pointer) does not restore to the original value before the assembly code jumps back to the calling point. </p>\n</blockquote>\n\n<p>Some ABIs or calling conventions require the stack pointer to be restored by the called function. Others want the calling function to do that.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1521087186, "post_id": 49283205, "comment_id": 85585627, "body": "It doesn&#39;t <i>have</i> to be. But it would mean your program crashed if you got the format string wrong if, <code>printf</code> removed args based on what it found in the format string, instead of getting mangled output or silently-ignored args. (BTW, on x86, callee-pops can only be efficient when the number of args to pop is a compile-time constant: <code>ret 12</code> for example only works with an immediate, not a register.  But PDP11 appears to return with a regular indirect jump, and wouldn&#39;t have this problem.) Anyway, there are compelling reasons for caller-pops for variadic functions, and it&#39;s common in general."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1521106520, "post_id": 49283205, "comment_id": 85593713, "body": "@PeterCordes It does have to be. <code>printf</code> was just an example. In general, in K&amp;R C, the called function has no idea how many arguments the calling function placed on the stack. It could remove the ones it knows about from the definition, but that doesn&#39;t mean the calling function didn&#39;t put other arguments on the stack as well (that the callee will ignore)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1521106734, "post_id": 49283205, "comment_id": 85593857, "body": "Right, if you want extra args to be safely ignored, it has to be.  But even without prototypes, callers have to pass the args that callees expect.  If you restrict things to <i>only</i> that subset of C where the caller passes only the args the callee looks at, then callee pops would work.  It&#39;s brittle, hard to debug when it breaks, and nobody wants that, which is why it&#39;s not done in practice. :P"}], "tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": false, "score": 6, "last_activity_date": 1521106769, "last_edit_date": 1521106769, "creation_date": 1521045376, "answer_id": 49283205, "question_id": 49280843, "link": "https://stackoverflow.com/questions/49280843/how-does-c-program-transfer-arguments-under-the-hood/49283205#49283205", "title": "how does C program transfer arguments under the hood?", "body": "<p>In C, especially K&amp;R C as is likely to be used by any PDP-11 compiler, the called function cannot know how many arguments the calling function placed on the stack. This is how var args functions used to work. For example, <code>printf</code> would be declared in <code>stdio.h</code> like this:</p>\n\n<pre><code>int printf();\n</code></pre>\n\n<p>And the definition would start like this:</p>\n\n<pre><code>int printf(fmt)\n\nchar *fmt;\n\n{\n    /* function body */\n}\n</code></pre>\n\n<p>And the caller could then just do (for example) </p>\n\n<pre><code>printf(\"%d %d\\n\", a, b);\n</code></pre>\n\n<p>Thus, it has to be the responsibility of the <em>calling function</em> to remove the arguments from the stack, not the called function.</p>\n\n<p>To make things clearer and that it is not just variadic functions, in K&amp;R C, the following was perfectly legal and would print 3.</p>\n\n<pre><code>int add();\n\nint main()\n{\n    int sum;\n    sum = add(1, 2, 3, 4);\n    printf(\"%d\\n\", sum);\n    return 0;\n}\n\nint add(a, b)\nint a;\nint b;\n{\n    return a + b;\n}\n</code></pre>\n"}], "owner": {"reputation": 343, "user_id": 1742288, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/dca349510fe942aed558895a5a3a5099?s=128&d=identicon&r=PG", "display_name": "CCNA", "link": "https://stackoverflow.com/users/1742288/ccna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1521106769, "creation_date": 1521039104, "last_edit_date": 1521039340, "question_id": 49280843, "link": "https://stackoverflow.com/questions/49280843/how-does-c-program-transfer-arguments-under-the-hood", "title": "how does C program transfer arguments under the hood?", "body": "<p>This is PDP-11 code mixing C and assembly. In the below, u.u_rsav is an array pointer,</p>\n\n<p><code>savu(u.u_rsav);</code></p>\n\n<p>The assembly code for this function is </p>\n\n<pre><code>_savu:        bis     $340,PS\n              mov     (sp)+,r1\n              mov     (sp),r0\n              mov     sp,(r0)+\n              mov     r5,(r0)+\n              bic     $340,PS\n              jmp     (r1)\n</code></pre>\n\n<p>It seems like before it enters the procedure, it first pushes the argument, then pushes the return point PC value. So, r1 stores PC and r0 stores the argument. My puzzle is sp (stack pointer) does not restore to the original value before the assembly code jumps back to the calling point. It still points to the position where the argument was stored in the stack.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1521037609, "post_id": 49280221, "comment_id": 85563109, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a <a href=\"https://en.wikipedia.org/wiki/Debugger\" rel=\"nofollow noreferrer\">debugger</a> to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 2, "creation_date": 1521038129, "post_id": 49280221, "comment_id": 85563486, "body": "I have a harde time understanding the logic behind the &quot;temp&quot; variable."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1521038778, "post_id": 49280221, "comment_id": 85563981, "body": "Got the logic behind &quot;temp&quot;. Not bad, but the variable name isn&#39;t helpfull at all, and since there are no commentary and given how temp is used in your code, it&#39;s hard to understand the logic. &quot;temp&quot; is the &quot;endOfCurrentString&quot;, in order to do a quick concatenation. The OP just failed to used it correctly"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 1, "creation_date": 1521038880, "post_id": 49280221, "comment_id": 85564065, "body": "Also, why did you malloc ten time the required space ? Why not just &quot;temp = malloc(size + 1);&quot; ?"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1521216017, "post_id": 49280221, "comment_id": 85651314, "body": "Uhhhh, fgets will read up to size - 1 or if he found a newline (&#39;\\n&#39;), or obviously EOF. I think you mean fread ?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521234732, "post_id": 49280221, "comment_id": 85661116, "body": "regarding: <code>char* concat(char* dest, char* src)      {       &#47;&#47;function to concatenate src to dest       while(*dest) dest++;       while(*dest++ = *src++);       return --dest;      }</code>   This does NOT perform a concat operation.  Suggest using function: <code>strcat()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521234912, "post_id": 49280221, "comment_id": 85661197, "body": "when calling any of the heap allocation functions: ( <code>malloc</code> <code>calloc</code> <code>realloc</code> ) 1) always check (!=NULL) the returned value to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521235022, "post_id": 49280221, "comment_id": 85661242, "body": "when calling any of the <code>scanf()</code> family of functions, always check the returned value (not the parameter values) to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521235054, "post_id": 49280221, "comment_id": 85661256, "body": "when calling <code>fopen()</code>, always check (!=NULL) the returned value to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521235435, "post_id": 49280221, "comment_id": 85661437, "body": "when calling <code>ftell()</code>, always check (!=-1) to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521235476, "post_id": 49280221, "comment_id": 85661455, "body": "when calling <code>fseek()</code>, always check (!=-1) to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521235746, "post_id": 49280221, "comment_id": 85661582, "body": "regarding the call to the sub function: <code>fsize()</code>, the file is already open, so better to just pass the opened file pointer <code>fip</code> and add a statement at the end of <code>fsize()</code> similar to: `fseek( fip, 0L, SEEK_SET );  (along with checking for an error indication returned from that function call."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521235909, "post_id": 49280221, "comment_id": 85661637, "body": "the parameter passed to <code>malloc()</code> should be of type <code>size_t</code>, not <code>int</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521236113, "post_id": 49280221, "comment_id": 85661724, "body": "regarding: <code>temp = malloc(size*10);</code>  what if the input file was (say) 2 gig in size.  Then the value passed to <code>malloc()</code> would (try to be) 20 gig, but a &#39;int` (size) has a max positive value of 2gig, so an overflow would occur in a signed number.  That would result in undefined behavior"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521236260, "post_id": 49280221, "comment_id": 85661781, "body": "regarding: <code>temp = malloc(size*10);       text = temp;</code> and <code>temp = concat(text,read);i++;</code>  if the call to <code>malloc()</code> fails, then <code>text</code> contains NULL and the call to <code>concat()</code> will result in a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521236423, "post_id": 49280221, "comment_id": 85661850, "body": "on the first call to <code>concat()</code> the first byte of the memory pointed to by <code>text</code> could be anything.  I.E. it only has 1/256 chance of being 0x00.  The result of the call to <code>concat()</code> is undefined behavior and can lead to a seg fault event.&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521236505, "post_id": 49280221, "comment_id": 85661878, "body": "for ease of readability and understanding:  Please consistently indent the code.  Strongly suggest that each indent level be 4 spaces."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521236662, "post_id": 49280221, "comment_id": 85661942, "body": "regarding: <code>if(fip==NULL)       {         temp = strdup(&quot;ERROR : File doesn&#39;t exist! Please try again!\\n&quot;);         return temp;       }</code>  This should be immediately after the call to <code>fopen()</code> AND the first statement in the <code>if()</code> block should be: <code>perror( &quot;fopen failed&quot; );</code> so the reason the system thinks the failure occurred is output to <code>stderr</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521236804, "post_id": 49280221, "comment_id": 85661997, "body": "regarding: <code>while(fgets(read, 1024, fip) != NULL)       {         temp = concat(text,read);i++;       }</code>  why set <code>temp</code>?  that variable is not used in the next pass through the loop (i.E. in the call to <code>concat</code> so it lost"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521236931, "post_id": 49280221, "comment_id": 85662043, "body": "the variable <code>temp</code> can be easily replaced with <code>text</code> throughout the code"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521237430, "post_id": 49280221, "comment_id": 85662198, "body": "regarding: <code>prt = malloc(256);       printf(&quot;\\nEnter the name of the file : \\t&quot;);       scanf(&quot;%255s&quot;,prt);</code>  if the call to <code>malloc()</code> fails, then the call to <code>scanf()</code> will be writing to address 0, This will result in a seg fault event.  If the call to <code>scanf()</code> fails (returned value not == 1) then all following references to &#39;prt&#39; will be trying to use trash.  Always check the returned values from calls to C library functions"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521237561, "post_id": 49280221, "comment_id": 85662235, "body": "it is poor programming practice to include header files those contents are not being used.  Suggest removing the statement: <code>#include&lt;ctype.h&gt;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521237845, "post_id": 49280221, "comment_id": 85662341, "body": "the <code>read</code> is a well known C library function.  The user code should not be redefining it as a local variable."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "edited": false, "score": 0, "creation_date": 1521238129, "post_id": 49280221, "comment_id": 85662429, "body": "@JohnH,  the function: <code>fgets()</code> does not perform as you indicated in your comments.  Perhaps you are thinking of <code>fread()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "is_accepted": true, "score": 1, "last_activity_date": 1521038647, "creation_date": 1521038647, "answer_id": 49280677, "question_id": 49280221, "link": "https://stackoverflow.com/questions/49280221/c-file-pointer-returns-the-contents-of-a-file-twice/49280677#49280677", "title": "C File pointer returns the contents of a file twice", "body": "<p>Your problem is that you use \"text\" as a string but failed to do it.\nA \"string\" in C is a char array terminated by '\\0'.</p>\n\n<p>If you use any string related function, you have to unsure that you give string !\nSo after you allocated \"text\" (througth \"temp\"), \"text\" is not yet a string since it doesn't contain '\\0'.\nSince it's an \"empty\" string at the beginning, you have to initialize by doing </p>\n\n<pre><code>text[0] = '\\0';\n</code></pre>\n\n<p>Now, why your file is printed twice ? Dunno, but I have to bet on an UB since your string wasn't properly initialized.</p>\n"}], "owner": {"reputation": 500, "user_id": 9295187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c9c1f8f1aab959179d7a195bebbe4e?s=128&d=identicon&r=PG&f=1", "display_name": "Argon", "link": "https://stackoverflow.com/users/9295187/argon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 49280677, "answer_count": 1, "score": 0, "last_activity_date": 1521041798, "creation_date": 1521037475, "last_edit_date": 1521041798, "question_id": 49280221, "link": "https://stackoverflow.com/questions/49280221/c-file-pointer-returns-the-contents-of-a-file-twice", "title": "C File pointer returns the contents of a file twice", "body": "<p>With the following program, I wish to read a file (say, a text file) and store all of it's contents in a variable. So, to achieve it, I cooked up the following with the help of Stack Overflow suggestions. However, this program returns the contents of a file twice. \nFor instance, let the following program read a text file with the following contents:</p>\n\n<ul>\n<li>John Start 0 </li>\n<li>Using *,15</li>\n</ul>\n\n<p>Then, the program will display the following:</p>\n\n<ul>\n<li>John Start 0 </li>\n<li>Using *,15 </li>\n<li>John Start 0 </li>\n<li>Using *,15</li>\n</ul>\n\n<p>Thus, I would like your help in finding out the problem. Thanks a lot in advance!</p>\n\n<pre><code>    //Program to read a file and store it's contents in a single variable\n    #include&lt;stdio.h&gt;\n    #include&lt;ctype.h&gt;\n    #include&lt;string.h&gt;\n    #include&lt;stdlib.h&gt;\n\n    /*Reads contents of a file and returns address of variable, in which file contents are stored*/\n    char* fileRead(char*);\n    //Concatenates 2 strings\n    char* concat(char*,char*);  \n    //Calculates the size of the file\n    unsigned long fsize(char* file);\n\n    int main()\n    {\n\n      char *prt, *out;\n      //Allocate memory &amp; take the input of the file name to read\n      prt = malloc(256);\n      printf(\"\\nEnter the name of the file : \\t\");\n      scanf(\"%255s\",prt);\n      //Copy the address of read data &amp; output it\n      out = fileRead(prt);\n      printf(\"\\nContents : \\n-----------------\\n%s\", out);\n\n      free(out);    \n      free(prt);\n      return 0;\n    }\n\n    char* fileRead(char *file)\n    {   \n      //function to read the contents of a file\n\n      FILE  *fip;\n      char *text, *temp, read[1024];\n      int size, i=0;\n\n      fip=fopen(file, \"r\");\n      size=(int)fsize(file);\n\n      temp = malloc(size*10);\n      text = temp;\n      //If the file doesn't exist then...\n      if(fip==NULL)\n      {\n        temp = strdup(\"ERROR : File doesn't exist! Please try again!\\n\");\n        return temp;\n      } \n      //Begin concatenation, once after the file reading has been initiated\n      while(fgets(read, 1024, fip) != NULL)\n      {\n        temp = concat(text,read);i++;\n      }\n\n      fclose(fip);\n\n      return text;\n     }\n\n     char* concat(char* dest, char* src)\n     {  \n      //function to concatenate src to dest\n      while(*dest) dest++;  \n      while(*dest++ = *src++);\n      return --dest;\n     }\n\n     unsigned long fsize(char* file)\n     {  \n      //calculates the size of file\n      FILE * f = fopen(file, \"r\");\n      fseek(f, 0, SEEK_END);\n      unsigned long len = (unsigned long)ftell(f);\n      fclose(f);\n      return len;\n     }\n</code></pre>\n\n<p>Edit 1: Thanks a lot people. For your quick response&amp; efficient answers. As for the size*10 thing, it was a random idea, I came up with, to deal with one of the Segmentation Fault errors. Never thought the size+1 option. I've learned a lot from you all. Will come with a new question soon. Thanks again!</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1521037879, "post_id": 49280157, "comment_id": 85563301, "body": "You can&#39;t do <code>freeaddrinfo(servinfo);</code> or <code>freeaddrinfo(servinfo_2);</code> since you later on use these values in your <code>sendto()</code> call, as in <code>p-&gt;ai_addr</code> . Your call to <code>sendto( sockfd_2, buf, readBytes, 0, p-&gt;ai_addr, p-&gt;ai_addrlen )</code> is probably wrong anyway - <code>p-&gt;ai_addr</code> looks like an address for your own socket - surely you have to call <code>sendto()</code> with the address you actually want to send to."}, {"owner": {"reputation": 33, "user_id": 9395961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d77552a4fce0e30a3c76972aef924a?s=128&d=identicon&r=PG&f=1", "display_name": "RoBo", "link": "https://stackoverflow.com/users/9395961/robo"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1521038724, "post_id": 49280157, "comment_id": 85563933, "body": "@nos Thank you very much, that seems to have solved my problem. Perhaps you can help me understand why, too. The call to freeaddrinfo(servinfo) before sendto()  had no negative effect when I used the code for only one socket. Actually it worked quite fine. My understanding was, that it simply frees the memory of the servinfo pointer. As the necessary infos have been handed over to my new pointer p in the for loop I expected it to be unnecessary anymore."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 2, "creation_date": 1521039071, "post_id": 49280157, "comment_id": 85564222, "body": "yes, it frees the memory. When you then attempt to use it later on, it might work fine. Or it might not work at all. There are no guarantees as to what will happen - and as you&#39;ve now seen, in some circumstances it happened to work , and in another scenario it didn&#39;t. Your <code>p</code> variable is a pointer, it points to the data that <code>freeaddrinfo()</code> will free."}, {"owner": {"reputation": 33, "user_id": 9395961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d77552a4fce0e30a3c76972aef924a?s=128&d=identicon&r=PG&f=1", "display_name": "RoBo", "link": "https://stackoverflow.com/users/9395961/robo"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1521040494, "post_id": 49280157, "comment_id": 85565305, "body": "I see. Thank you for your explanation!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521232161, "post_id": 49280157, "comment_id": 85659984, "body": "The posted code, for the client, does not compile!  Are you expecting us to guess about the missing parts?  Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can reproduce the problem and debug it."}, {"owner": {"reputation": 33, "user_id": 9395961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d77552a4fce0e30a3c76972aef924a?s=128&d=identicon&r=PG&f=1", "display_name": "RoBo", "link": "https://stackoverflow.com/users/9395961/robo"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521444673, "post_id": 49280157, "comment_id": 85715444, "body": "@user3629249 Thank you for your review and suggestion.  The missing part is unrelated to the problematic part of my code. I shortened it to give a better overview of what UDP related code I have and what I am trying to do, without over stuffing it to multiple pages of code, making it harder to read.  nos, by the way, was already able to successfully identify and correct my problem. Therefore I am assuming that it must have been sufficient information.   However I do think you have a point there and will keep it in mind for future questions."}], "owner": {"reputation": 33, "user_id": 9395961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d77552a4fce0e30a3c76972aef924a?s=128&d=identicon&r=PG&f=1", "display_name": "RoBo", "link": "https://stackoverflow.com/users/9395961/robo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521040739, "creation_date": 1521037312, "last_edit_date": 1521040739, "question_id": 49280157, "link": "https://stackoverflow.com/questions/49280157/how-to-set-up-two-udp-sockets-in-one-executable", "title": "How to set up two UDP sockets in one executable?", "body": "<p>I am new to the topic of network communication, but would like to set up an UDP server client connection, with one participant continuously broadcasting data whether anyone is listening in on it or not and two participants that start receiving and storing these information whenever they are ready to do so (It's fine if they miss what has been sent before that point). The idea is that there is no other communication than one participant sending data (fire and forget) and two participants receiving them, without any form of feedback to the sending part. For now I would like to get it running on my local host, but would like to use it on a network.</p>\n\n<p>I have been looking into a solution for quite some time now and decided to have a client broadcast the file stream continuously on two separate ports so, so that the receiving two servers can bind to a port respectively without blocking each other (If there is a better way, I am open for suggestions).  </p>\n\n<p>So far I have been able to set up this kind of communication with one client and one server, following <a href=\"http://beej.us/guide/bgnet/html/multi/syscalls.html\" rel=\"nofollow noreferrer\">these</a> instructions. However, when I try to set up a second socket in my client executable, I always receive the error message <strong><em>Invalid argument</em></strong> once I reach the sendto() part. </p>\n\n<p>Seeing as I have not been able to find a solution myself, yet I would like to ask for some help.</p>\n\n<p>My code so far consists of the \nClient: </p>\n\n<pre><code>/** set up socket_1 properties */\nstruct addrinfo hints;\nmemset(&amp;hints, 0, sizeof hints);\nhints.ai_family = AF_UNSPEC; // set to AF_INET to force IPv4\nhints.ai_socktype = SOCK_DGRAM;\nhints.ai_flags = AI_PASSIVE; // use my IP\n\n/** Read address information of incoming connection */\nint status;\nstruct addrinfo *servinfo;\nif ((status = getaddrinfo(NULL, MYPORT, &amp;hints, &amp;servinfo)) != 0) {\n    fprintf(stderr, \"getaddrinfo: %s\\n\", gai_strerror(status));\n    return 1;\n}   \n\n/** loop through all the results and bind to the first we can */\nint sockfd;\nstruct addrinfo *p; \nfor ( p = servinfo; p != NULL; p = p-&gt;ai_next ) { \n    if ((sockfd = socket(p-&gt;ai_family, p-&gt;ai_socktype, p-&gt;ai_protocol)) == -1) {\n        perror(\"listener: socket\");\n        continue;\n    }\n\n    //   /** Allow the reuse of a socket */\n     //   if ( setsockopt( sockfd, SOL_SOCKET, SO_REUSEADDR, &amp;(int){ 1 }, sizeof(int) ) == -1 ){\n     //       printf(\"[ERROR]: Failed setting reusable socket %s.\\n\", strerror( errno ) );\n     //       exit(1);\n     //   }\n\n     //   /** Allow the reuse of a socket */\n     //   if ( setsockopt( sockfd, SOL_SOCKET, SO_REUSEPORT, &amp;(int){ 1 }, sizeof(int) ) == -1 ){\n     //       printf(\"[ERROR]: Failed setting reusable socket %s.\\n\", strerror( errno ) );\n     //       exit(1);\n     //   }\n\n\n    break;\n}\nif (p == NULL) {\n    printf(\"[ERROR]: Failed to bind broadcaster socket 1: %s.\\n\", strerror(errno) );\n    return 2;\n}\n\n\n/** set up socket_2  */\n// ( reuse socket_1 hints and change the port number )\n\n/** Read address information of incoming connection */\nint status_2;\nstruct addrinfo *servinfo_2;\nif ((status_2 = getaddrinfo(NULL, MYPORT_2, &amp;hints, &amp;servinfo_2)) != 0) {\n    fprintf(stderr, \"getaddrinfo: %s\\n\", gai_strerror(status_2));\n    return 1;\n}\n\n/** loop through all the results and bind to the first we can */\nint sockfd_2;\nstruct addrinfo *p_2;\nfor ( p_2 = servinfo_2; p_2 != NULL; p_2 = p_2-&gt;ai_next ) {\n    if ((sockfd_2 = socket(p_2-&gt;ai_family, p_2-&gt;ai_socktype, p_2-&gt;ai_protocol)) == -1) {\n        perror(\"listener: socket\");\n        continue;\n    }\n\n      //  /** Allow the reuse of a socket */\n      //  if ( setsockopt( sockfd, SOL_SOCKET, SO_REUSEADDR, &amp;(int){ 1 }, sizeof(int) ) == -1 ){\n      //          printf(\"[ERROR]: Failed setting reusable socket %s.\\n\", strerror( errno ) );\n      //          exit(1);\n      //  }\n\n      //  /** Allow the reuse of a socket */\n      //  if ( setsockopt( sockfd, SOL_SOCKET, SO_REUSEPORT, &amp;(int){ 1 }, sizeof(int) ) == -1 ){\n      //          printf(\"[ERROR]: Failed setting reusable socket %s.\\n\", strerror( errno ) );\n      //          exit(1);\n      //  }\n\n        break;\n}\n\nif (p_2 == NULL) {\n    printf(\"[ERROR]: Failed to bind broadcaster socket 2: %s.\\n\", strerror(errno) );\n    return 2;\n}\n\n...\nsome file read/write related stuff\n...\n\nwhile ( /* some condition */ )\n{\n    if ( ( readBytes = pread( fd, buf, BUFFER_SIZE, offset ) ) == -1 ){\n        printf(\"[ERROR]: %s.\\n\", strerror(errno) );\n        free( buf );\n        close( fd );\n        close( sockfd );\n        exit(1);\n    }\n\n\n// the next line is generating the error message \n    if ( ( numbytes = sendto( sockfd, buf, readBytes, 0, p-&gt;ai_addr, p-&gt;ai_addrlen ) ) == -1 )\n    {\n        perror(\"sender_1: sendo.\\n\");\n        free( buf );\n        close( fd );\n        close( sockfd );\n        exit(1);\n    }\n\n    if ( ( numbytes = sendto( sockfd_2, buf, readBytes, 0, p_2-&gt;ai_addr, p_2-&gt;ai_addrlen ) ) == -1 )\n    {   \n            perror(\"sender_2: sendo.\\n\");\n            free( buf );\n            close( fd );\n            close( sockfd_2 );\n            exit(1);\n    }   \n\n\n}\n\n.\n.\n.\n\nfree( buf );\nfreeaddrinfo(servinfo);\nfreeaddrinfo(servinfo_2);\n\nprintf( \"Broadcasting complete.\\n\" );\n\n/** Clean what is not necessary anymore */\nclose( fd );\nclose( sockfd );\n\nreturn 0;\n}\n</code></pre>\n\n<p>I tried to add the reuse port and IP functionality to make sure that there is nothing blocking the setup of the new socket, but this did not solve my problem</p>\n\n<p>My server side seems to work fine, but just in case I will post it here, too:</p>\n\n<pre><code>int main(int argc, char **argv)\n{\nif (argc &lt; 2){\n    printf(\"Please provide image Name ID.\\n\");\n    exit(1);\n}\n\nstruct addrinfo hints;\nstruct addrinfo *servinfo = NULL; // will point to getaddrinfo() results\n\nmemset(&amp;hints, 0, sizeof hints); // make sure struct is empty \nhints.ai_family = AF_UNSPEC; // don't care if IPv4 or IPv6\nhints.ai_socktype = SOCK_DGRAM;     // Use UDP protocol\nhints.ai_flags = AI_PASSIVE;\n\nint res;\nif ((res = getaddrinfo( NULL, argv[1]/* SERVERPORT*/, &amp;hints, &amp;servinfo )) != 0) {\n    fprintf(stderr, \"getaddrinfo: %s\\n\", gai_strerror(res));\n    return 1;\n}\n\n/** Get socket file descriptor  */\nint sockfd;\nstruct addrinfo *p = NULL;\n// loop through all the results and make a socket\nfor(p = servinfo; p != NULL; p = p-&gt;ai_next) {\n    if ((sockfd = socket(p-&gt;ai_family, p-&gt;ai_socktype,\n        p-&gt;ai_protocol)) == -1) {\n        perror(\"talker: socket\");\n        continue;\n    }\n\n    /** Allow the reuse of an IP */\n    if ( setsockopt( sockfd, SOL_SOCKET, SO_REUSEADDR, &amp;(int){ 1 }, sizeof(int) ) == -1 ){\n            printf(\"[ERROR]: Failed setting reusable socket %s.\\n\", strerror( errno ) );  \n            exit(1);\n    }       \n\n    /** Allow the reuse of a socket */\n    if ( setsockopt( sockfd, SOL_SOCKET, SO_REUSEPORT, &amp;(int){ 1 }, sizeof(int) ) == -1 ){\n            printf(\"[ERROR]: Failed setting reusable socket %s.\\n\", strerror( errno ) );  \n            exit(1);\n    }       \n\n\n        /** Bind found socket to desired port */\n    if (bind(sockfd, p-&gt;ai_addr, p-&gt;ai_addrlen) == -1) {\n        close(sockfd);\n        printf(\"[ERROR]: Failed to bind socket to desired port: %s.\\n\", strerror( errno ) );\n        continue;\n    }\nbreak;\n}\n\nstruct timeval read_timeout;\nread_timeout.tv_sec = 30;\nread_timeout.tv_usec = 500;\nif ( setsockopt(sockfd, SOL_SOCKET, SO_RCVTIMEO, &amp;read_timeout, sizeof read_timeout) &lt; 0 ){\n    printf( \"[ERROR]: %s.\\n\", strerror(errno) );\n}\n\n...\nsome file read/write stuff\n...\n\nwhile ( ( numbytes = recvfrom(sockfd, buf, BUFFER_SIZE, 0, (struct sockaddr *)&amp;their_addr, &amp;addr_len ) ) != -1) \n{\n.\n.\n.\n}\nprintf(\"Done broadcasting.\\n\");\n\nfreeaddrinfo(servinfo);\n\nclose(sockfd);\n\nreturn 0;\n}\n</code></pre>\n\n<p>It would be much appreciated if anybody could provide me some help or point me into the right direction where to look for a solution. </p>\n\n<p>Best regards</p>\n"}, {"tags": ["c", "pointers", "linux-kernel"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1521037287, "post_id": 49280067, "comment_id": 85562909, "body": "Maybe they want to perform pointer-arithmatic on it, avoiding excessive casts. This, for instance, seems like a way to emulate <code>offsetof()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1521038265, "post_id": 49280147, "comment_id": 85563573, "body": "So it is actually low-level byte addressing of the memory."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1521037642, "last_edit_date": 1521037642, "creation_date": 1521037274, "answer_id": 49280147, "question_id": 49280067, "link": "https://stackoverflow.com/questions/49280067/why-in-kernel-code-some-addresses-of-variables-are-stored-in-char-pointers/49280147#49280147", "title": "Why in kernel code some addresses of variables are stored in char pointers?", "body": "<p>The individual cases may have their explicit use-cases, but in general, this is useful for two reasons.</p>\n\n<ul>\n<li>a <code>char</code> pointer has the same alignment requirement as a <code>void</code> pointer.</li>\n<li><code>char</code> pointer can be used to access (via dereference) any other type of data, starting from lowest addressed byte of the object (Successive increments of the\nresult, up to the size of the object, yield pointers to the remaining bytes of the object.). Also, pointer arithmatic (if needed, is allowed on <code>char</code> pointer, not on <code>void</code> pointers).</li>\n</ul>\n\n<p>Thus, using a <code>char *</code> is more robust.</p>\n"}, {"comments": [{"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1521038154, "post_id": 49280191, "comment_id": 85563504, "body": "This appears to be code from the last decade and Linux has been using void * from 0.01."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1521038278, "post_id": 49280191, "comment_id": 85563582, "body": "@Art I just mentioned one of reasons when you can encounter char * instead of void *.:) I did not see the kernel myself."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1521038396, "post_id": 49280191, "comment_id": 85563681, "body": "I just got curious so I dug around a bit and reported my findings."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1521038409, "post_id": 49280191, "comment_id": 85563691, "body": "For low-level byte addressing of the memory, char pointer seems more natural than sizeless void pointer."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1521037408, "creation_date": 1521037408, "answer_id": 49280191, "question_id": 49280067, "link": "https://stackoverflow.com/questions/49280067/why-in-kernel-code-some-addresses-of-variables-are-stored-in-char-pointers/49280191#49280191", "title": "Why in kernel code some addresses of variables are stored in char pointers?", "body": "<p>If it is an old code then the type <code>char *</code>  was used instead of the type <code>void *</code> because the type <code>void</code> was absent in the C at that time.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9478202, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3mQF.jpg?s=128&g=1", "display_name": "cooper_liu", "link": "https://stackoverflow.com/users/9478202/cooper-liu"}, "is_accepted": false, "score": 0, "last_activity_date": 1521039230, "creation_date": 1521039230, "answer_id": 49280899, "question_id": 49280067, "link": "https://stackoverflow.com/questions/49280067/why-in-kernel-code-some-addresses-of-variables-are-stored-in-char-pointers/49280899#49280899", "title": "Why in kernel code some addresses of variables are stored in char pointers?", "body": "<p>Because in the kernel we need to do some operatings on byte.And then we can do operatings like &amp;,&lt;&lt;,>>.</p>\n"}], "owner": {"reputation": 716, "user_id": 2031180, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jkKlR.jpg?s=128&g=1", "display_name": "campescassiano", "link": "https://stackoverflow.com/users/2031180/campescassiano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 49280147, "answer_count": 3, "score": 2, "last_activity_date": 1521039230, "creation_date": 1521037073, "last_edit_date": 1521037709, "question_id": 49280067, "link": "https://stackoverflow.com/questions/49280067/why-in-kernel-code-some-addresses-of-variables-are-stored-in-char-pointers", "title": "Why in kernel code some addresses of variables are stored in char pointers?", "body": "<p>I was going through the kernel source code and I found this statement:</p>\n\n<pre><code>char *tagp = NULL;\n\n/* ...CODE... */\n\ntagp = &amp;descriptor-&gt;b_data[sizeof(journal_header_t)];\n</code></pre>\n\n<p>I wonder <strong>why</strong> this address is stored in a char pointer rather than any other type more related to what it represents, such as maybe <code>void</code> if this is an opaque.</p>\n"}, {"tags": ["c#", "c", "swig"], "comments": [{"owner": {"reputation": 2449, "user_id": 500276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/200bf76976f24add540182f5c3a42788?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Benningfield", "link": "https://stackoverflow.com/users/500276/mark-benningfield"}, "edited": false, "score": 1, "creation_date": 1521036366, "post_id": 49279814, "comment_id": 85562299, "body": "Try it without <code>typedef</code>&#39;ing the enum."}, {"owner": {"reputation": 857, "user_id": 738190, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f290557e63f5f13a489667bb354aa196?s=128&d=identicon&r=PG", "display_name": "Brian Colavito", "link": "https://stackoverflow.com/users/738190/brian-colavito"}, "reply_to_user": {"reputation": 2449, "user_id": 500276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/200bf76976f24add540182f5c3a42788?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Benningfield", "link": "https://stackoverflow.com/users/500276/mark-benningfield"}, "edited": false, "score": 0, "creation_date": 1521037489, "post_id": 49279814, "comment_id": 85563034, "body": "Aha!  The C# enum is generated now.  But, it is empty:  public enum SWIGTYPE_myenum {}"}], "answers": [{"comments": [{"owner": {"reputation": 857, "user_id": 738190, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f290557e63f5f13a489667bb354aa196?s=128&d=identicon&r=PG", "display_name": "Brian Colavito", "link": "https://stackoverflow.com/users/738190/brian-colavito"}, "edited": false, "score": 0, "creation_date": 1521040831, "post_id": 49280384, "comment_id": 85565544, "body": "Thanks, that did it.  I did have to refactor my header file because SWIG was giving me the infamous &quot;Error: Syntax error in input(1)&quot; for reasons unknown on another enum (not the one I was trying to get)."}], "tags": [], "owner": {"reputation": 2449, "user_id": 500276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/200bf76976f24add540182f5c3a42788?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Benningfield", "link": "https://stackoverflow.com/users/500276/mark-benningfield"}, "is_accepted": true, "score": 1, "last_activity_date": 1521040450, "last_edit_date": 1521040450, "creation_date": 1521037858, "answer_id": 49280384, "question_id": 49279814, "link": "https://stackoverflow.com/questions/49279814/how-to-work-with-enums-in-c-generated-by-swig-from-c-code/49280384#49280384", "title": "How to work with enums in C# generated by SWIG from C code?", "body": "<p>From the SWIG <a href=\"http://www.swig.org/Doc1.1/HTML/SWIG.html#n2\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>For enumerations, it is critical that the original enum definition be included somewhere in the interface file (either in a header file or in the %{,%} block). SWIG only translates the enumeration into code needed to add the constants to a scripting language. It needs the original enumeration declaration to retrieve the correct enum values.</p>\n</blockquote>\n\n<p>Make sure that you are \"parsing\" the header file, as well as including it:</p>\n\n<pre><code> %module example\n %{\n /* Includes the header in the wrapper code */\n #include \"header.h\"\n %}\n\n /* Parse the header file to generate wrappers */\n\n %include \"header.h\"  &lt;== don't forget this part\n</code></pre>\n"}], "owner": {"reputation": 857, "user_id": 738190, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f290557e63f5f13a489667bb354aa196?s=128&d=identicon&r=PG", "display_name": "Brian Colavito", "link": "https://stackoverflow.com/users/738190/brian-colavito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 49280384, "answer_count": 1, "score": 0, "last_activity_date": 1521040450, "creation_date": 1521036287, "question_id": 49279814, "link": "https://stackoverflow.com/questions/49279814/how-to-work-with-enums-in-c-generated-by-swig-from-c-code", "title": "How to work with enums in C# generated by SWIG from C code?", "body": "<p>Here is my C enum:</p>\n\n<pre><code>typedef enum {\n    VALUE1,\n    VALUE2,\n    VALUE3\n} myenum;\n</code></pre>\n\n<p>Here is one of my C functions:</p>\n\n<pre><code>myenum getEnumValue1() { \n    return VALUE1; \n}\n</code></pre>\n\n<p>I was expecting to get something like this in C#:</p>\n\n<pre><code>public enum SWIGTYPE_p_myenum {\n    VALUE1,\n    VALUE2,\n    VALUE3\n}\n</code></pre>\n\n<p>Indeed, the function wrapper was generated, and it returns something called myenum, but I see no mention of VALUE1, etc.</p>\n\n<p>How can I work with the C# wrapper?  I'd like to do comparisons, assignments, pass these values into functions, etc., but I don't see any way to do it.  </p>\n\n<p>For example, I can't do the following:</p>\n\n<pre><code>SWIGTYPE_p_myenum x = SWIGTYPE_p_myenum.VALUE1; \nbool test = (x == SWIGTYPE_p_myenum.VALUE1); \n</code></pre>\n\n<p>There just isn't wrapper code that's generated that makes that possible.  This is all that gets generated:</p>\n\n<pre><code>public class SWIGTYPE_p_myenum {\n  private global::System.Runtime.InteropServices.HandleRef swigCPtr;\n\n  internal SWIGTYPE_p_myenum(global::System.IntPtr cPtr, bool futureUse) {\n    swigCPtr = new global::System.Runtime.InteropServices.HandleRef(this, cPtr);\n  }\n\n  protected SWIGTYPE_p_myenum() {\n    swigCPtr = new global::System.Runtime.InteropServices.HandleRef(null, global::System.IntPtr.Zero);\n  }\n\n  internal static global::System.Runtime.InteropServices.HandleRef getCPtr(SWIGTYPE_p_myenum obj) {\n    return (obj == null) ? new global::System.Runtime.InteropServices.HandleRef(null, global::System.IntPtr.Zero) : obj.swigCPtr;\n  }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1521034370, "post_id": 49279081, "comment_id": 85560695, "body": "It&#39;s not an ANSI C macro however."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521034431, "post_id": 49279081, "comment_id": 85560736, "body": "Also, you might wanna forget about &quot;ANSI C&quot; and instead use ISO C. The C language has been internationally standardized since the year 1990."}, {"owner": {"reputation": 3110, "user_id": 5470144, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VVhju.jpg?s=128&g=1", "display_name": "Elad Weiss", "link": "https://stackoverflow.com/users/5470144/elad-weiss"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521034854, "post_id": 49279081, "comment_id": 85561089, "body": "@Lundin good to know. I thought it just a term for &quot;not c++&quot;."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1521034896, "post_id": 49279081, "comment_id": 85561126, "body": "&quot;C&quot; in and of itself implies &quot;not C++&quot;."}, {"owner": {"reputation": 3110, "user_id": 5470144, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VVhju.jpg?s=128&g=1", "display_name": "Elad Weiss", "link": "https://stackoverflow.com/users/5470144/elad-weiss"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1521034940, "post_id": 49279081, "comment_id": 85561165, "body": "@StoryTeller Can I define the macro myself?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1521035004, "post_id": 49279081, "comment_id": 85561215, "body": "@EladWeiss - I wouldn&#39;t define <i>that</i> macro (the two underscore spiel is reserved). But nothing is stopping you from defining your own macro that expands to <code>__attribute__((unused))</code>."}, {"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 0, "creation_date": 1521035044, "post_id": 49279081, "comment_id": 85561251, "body": "@EladWeiss: you can, but you should not. <code>__</code> is a reserved prefix. By definining something in it, you should break things."}], "answers": [{"tags": [], "owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "is_accepted": true, "score": 1, "last_activity_date": 1521035093, "creation_date": 1521035093, "answer_id": 49279362, "question_id": 49279081, "link": "https://stackoverflow.com/questions/49279081/where-is-the-unused-macro-defined/49279362#49279362", "title": "Where is the __unused macro defined?", "body": "<pre><code>unused \n</code></pre>\n\n<p>is GCC specific <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Common-Variable-Attributes.html#Common-Variable-Attributes\" rel=\"nofollow noreferrer\">6.32.1 Common Variable Attributes</a></p>\n\n<p>This attribute, attached to a variable, means that the variable is meant to be possibly unused. <code>GCC</code> does not produce a warning for this variable.</p>\n\n<p><a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">NTERNATIONAL STANDARD \u00a9ISO/IEC ISO/IEC 9899:201x</a> does not even mention <code>unused</code>.</p>\n"}], "owner": {"reputation": 3110, "user_id": 5470144, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VVhju.jpg?s=128&g=1", "display_name": "Elad Weiss", "link": "https://stackoverflow.com/users/5470144/elad-weiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 49279362, "answer_count": 1, "score": 0, "last_activity_date": 1521035093, "creation_date": 1521034269, "question_id": 49279081, "link": "https://stackoverflow.com/questions/49279081/where-is-the-unused-macro-defined", "title": "Where is the __unused macro defined?", "body": "<p>I saw once a usage of the macro <code>__unused</code> which is explained <a href=\"https://stackoverflow.com/questions/19736107/unused-flag-behavior-usage-gcc-with-objective-c\">here</a>, but for some reason I can't find now where it is defined. Will appreciate help. I need it for an ansi C project. Thanks.</p>\n"}, {"tags": ["c", "interrupt", "stm32", "baud-rate", "usart"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1521034273, "post_id": 49279000, "comment_id": 85560612, "body": "What makes you think it is a software problem? Have you checked the actual baudrate with a scope? Classic hardware mistakes is to mix up tx/rx or to forget signal ground."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1521034485, "post_id": 49279000, "comment_id": 85560775, "body": "Stop using Peripheral Library, join us all on the Cube bandwagon. Please."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1521034574, "post_id": 49279000, "comment_id": 85560849, "body": "What @Lundin says. Transmit something, continual 0x5a is good, and measure the REAL bit rate with a scope.  Like dealing with aliens, it&#39;s the only way to be sure."}, {"owner": {"reputation": 63, "user_id": 9395427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/amj7S.jpg?s=128&g=1", "display_name": "Kater", "link": "https://stackoverflow.com/users/9395427/kater"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521035087, "post_id": 49279000, "comment_id": 85561293, "body": "@Lundin I just checked and the Baudrate is indeed 9600 from the GPS.@unwind I just might in the next project."}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 1, "creation_date": 1521035452, "post_id": 49279000, "comment_id": 85561591, "body": "@Kater I think Lundin meant to check at what baud you&#39;re transmitting from the STM, it was unlikely that the GPS was wrong."}, {"owner": {"reputation": 63, "user_id": 9395427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/amj7S.jpg?s=128&g=1", "display_name": "Kater", "link": "https://stackoverflow.com/users/9395427/kater"}, "reply_to_user": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 0, "creation_date": 1521035948, "post_id": 49279000, "comment_id": 85561985, "body": "@Colin__s Oh my bad. That does make more sense, guess my brain is already fried. I checked the USART1 TX and it&#39;s only at ca. 1400 baud. I&#39;m not sure why though. I will send something via USART3 next and check there."}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 1, "creation_date": 1521036114, "post_id": 49279000, "comment_id": 85562102, "body": "<code>USART_Init</code> is reliant on the library knowing what your clock setup is, as it calculates the value to put in the USART&#39;s <code>BRR</code> register. It sounds like something is amiss there."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521042238, "post_id": 49279000, "comment_id": 85566652, "body": "@Kater Sounds like an issue with either the UART pre-scaler or the CPU clock then."}, {"owner": {"reputation": 63, "user_id": 9395427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/amj7S.jpg?s=128&g=1", "display_name": "Kater", "link": "https://stackoverflow.com/users/9395427/kater"}, "reply_to_user": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 1, "creation_date": 1521105280, "post_id": 49279000, "comment_id": 85592911, "body": "@Colin__s / Lundin.  You were correct, the system clock was not properly set up, I misunderstood how that is done. It all works now, thanks."}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 9395427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/amj7S.jpg?s=128&g=1", "display_name": "Kater", "link": "https://stackoverflow.com/users/9395427/kater"}, "is_accepted": true, "score": 1, "last_activity_date": 1521105567, "creation_date": 1521105567, "answer_id": 49295491, "question_id": 49279000, "link": "https://stackoverflow.com/questions/49279000/usart-receiving-nonsense-stm32f0/49295491#49295491", "title": "USART receiving nonsense (STM32F0)", "body": "<p>After a lot of searching and the suggestions of everyone in the comments, I figured out that the System Clock was not set up properly.\nThe following pieces of code were necessary in addition to what was already in the 'clock_init'.</p>\n\n<blockquote>\n  <p>peripherals.c</p>\n</blockquote>\n\n<pre><code>/* Clock settings */\nvoid clock_init(void)\n{\n    ....\n\n    /* Select System Clock to be HSI */\n    RCC_SYSCLKConfig(RCC_SYSCLKSource_HSI);\n\n    /* Select USART clock source to be System Clock */\n    RCC_USARTCLKConfig(RCC_USART1CLK_SYSCLK);\n    RCC_USARTCLKConfig(RCC_USART3CLK_SYSCLK);\n\n    ....\n\n}\n</code></pre>\n\n<p>Thanks to everyone for the help.</p>\n"}], "owner": {"reputation": 63, "user_id": 9395427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/amj7S.jpg?s=128&g=1", "display_name": "Kater", "link": "https://stackoverflow.com/users/9395427/kater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1015, "favorite_count": 0, "accepted_answer_id": 49295491, "answer_count": 1, "score": 1, "last_activity_date": 1521105567, "creation_date": 1521034008, "question_id": 49279000, "link": "https://stackoverflow.com/questions/49279000/usart-receiving-nonsense-stm32f0", "title": "USART receiving nonsense (STM32F0)", "body": "<p>I have an implementation for USART communication from a GPS module to a STM32F091 microcontroller.\nFor some reason I only receive nonsense. I have already tried setting different Baud Rates, but none gave me a proper result.</p>\n\n<p>Now I am unsure if maybe there is something funky with prescaler settings or something else I forgot.</p>\n\n<p>The relevant code looks as follows:</p>\n\n<blockquote>\n  <p>peripherals.c</p>\n</blockquote>\n\n<pre><code>/* Clock settings */\nvoid clock_init(void)\n{\n    /* Enable HSI clock */\n    RCC-&gt;CR |= RCC_CR_HSION;\n\n    /* Enable clocks on Port A, B, F */\n    RCC_AHBPeriphClockCmd(RCC_AHBPeriph_GPIOA, ENABLE);\n    RCC_AHBPeriphClockCmd(RCC_AHBPeriph_GPIOB, ENABLE);\n    RCC_AHBPeriphClockCmd(RCC_AHBPeriph_GPIOF, ENABLE);\n\n    /* Enable USART clocks */\n    RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART3, ENABLE);\n    RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE);\n}\n\n/* Select Alternate Port Functions */\nvoid alt_init(void)\n{\n    /* Port A: USART1 */\n    GPIO_PinAFConfig(GPIOA, GPIO_PinSource9, GPIO_AF_1);\n    GPIO_PinAFConfig(GPIOA, GPIO_PinSource10, GPIO_AF_1);\n\n    /* Port B: USART3 */\n    GPIO_PinAFConfig(GPIOB, GPIO_PinSource10, GPIO_AF_4);\n    GPIO_PinAFConfig(GPIOB, GPIO_PinSource11, GPIO_AF_4);\n}\n</code></pre>\n\n<blockquote>\n  <p>usart.c</p>\n</blockquote>\n\n<pre><code>USART_InitTypeDef USART_InitStructure;\nGPIO_InitTypeDef GPIO_InitStructure;\nNVIC_InitTypeDef NVIC_InitStructure;\n\n/* Baud rate */\nuint32_t bd = 9600;\n\nvoid usart_init(void)\n{\n\n    /* ##################### USART 1 ##################### */\n    /* USART GPIO Settings */\n    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9 | GPIO_Pin_10;\n    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_10MHz;\n    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;\n    GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;\n    GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;\n    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);\n\n    /* USART Settings */\n    USART_InitStructure.USART_BaudRate = bd;\n    USART_InitStructure.USART_WordLength = USART_WordLength_8b;\n    USART_InitStructure.USART_StopBits = USART_StopBits_1;\n    USART_InitStructure.USART_Parity = USART_Parity_No;\n    USART_InitStructure.USART_HardwareFlowControl =\n    USART_HardwareFlowControl_None;\n    USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;\n    USART_Init(USART1, &amp;USART_InitStructure);\n\n    /* Enable USART because it's disabled in USART_Init */\n    USART_Cmd(USART1, ENABLE);\n\n    /* ##################### USART 2 ##################### */\n\n    /* ##################### USART 3 ##################### */\n    /* Disable USART3 in order to use SWAP */\n    USART_Cmd(USART3, DISABLE);\n\n    /* Swap TX and RX pins */\n    USART3-&gt;CR2 |= USART_CR2_SWAP;\n\n    /* Enable USART3 */\n    USART_Cmd(USART3, ENABLE);\n\n    /* USART GPIO Settings */\n    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10 | GPIO_Pin_11;\n    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_10MHz;\n    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;\n    GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;\n    GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;\n    GPIO_Init(GPIOB, &amp;GPIO_InitStructure);\n\n    /* USART Settings */\n    USART_InitStructure.USART_BaudRate = bd;\n    USART_InitStructure.USART_WordLength = USART_WordLength_8b;\n    USART_InitStructure.USART_StopBits = USART_StopBits_1;\n    USART_InitStructure.USART_Parity = USART_Parity_No;\n    USART_InitStructure.USART_HardwareFlowControl =\n    USART_HardwareFlowControl_None;\n    USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;\n    USART_Init(USART3, &amp;USART_InitStructure);\n\n    /* Enable USART because it's disabled in USART_Init */\n    USART_Cmd(USART3, ENABLE);\n\n    /* Enable USART Interrupts */\n    USART_ITConfig(USART3, USART_IT_RXNE, ENABLE);\n    USART_ITConfig(USART3, USART_IT_TXE, ENABLE);\n\n    /* Enable external interrupts */\n    NVIC_InitStructure.NVIC_IRQChannel = USART3_8_IRQn;\n    NVIC_InitStructure.NVIC_IRQChannelPriority = 1;\n    NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;\n    NVIC_Init(&amp;NVIC_InitStructure);\n\n    /* ##################### USART 4 ##################### */\n\n}\n</code></pre>\n\n<blockquote>\n  <p>stm32f0xx_it.c</p>\n</blockquote>\n\n<pre><code>#include &lt;main.h&gt;\n\nvoid USART3_8_IRQHandler(void)\n{\n    char t[] = \"U\";\n    uint16_t byte = 0;\n    if (USART_GetFlagStatus(USART3, USART_FLAG_RXNE) != RESET) // Data reception\n    {\n        byte = USART_ReceiveData(USART3);\n        (*pRXD3).Buffer[(*pRXD3).wr] = byte;\n        (*pRXD3).wr = ((*pRXD3).wr + 1);\n\n        USART_SendData(USART1, t[0]);\n\n        USART_GetFlagStatus(USART3, USART_IT_ORE);\n        USART_ClearITPendingBit(USART3, USART_IT_RXNE);\n    }\n    return;\n}\n</code></pre>\n\n<p>The USART_SendData bit is for communication with my PC, so I can see if I receive the letter U or more nonesense.</p>\n\n<p>I have also checked the content of the DR register (by way of checking the Buffer I write its content to) of USART3 directly so I know the STM32F091 receives (or rather interperts) my GPS output wrong.</p>\n\n<p>The GPS module uses a default baudrate of 9600 which I do not change.</p>\n\n<p>Let me know if there's any additional info</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "global", "mutex"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 3, "creation_date": 1521034040, "post_id": 49278946, "comment_id": 85560444, "body": "You&#39;re running only one thread at a time..."}, {"owner": {"reputation": 49, "user_id": 4926958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WCgbK.jpg?s=128&g=1", "display_name": "yassine yousfi", "link": "https://stackoverflow.com/users/4926958/yassine-yousfi"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1521034469, "post_id": 49278946, "comment_id": 85560764, "body": "ok, got it thank you"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 1, "creation_date": 1521047105, "post_id": 49278946, "comment_id": 85570182, "body": "Just as a side note: You can&#39;t <i>prove</i> that a program is free from race conditions by testing it.  Some race conditions will cause problems so infrequently that testing is likely to miss them.  And, even if you&#39;re willing to accept some small number of crashes/errors caused by race conditions; You can&#39;t prove that the rate will be acceptably low on the customer&#39;s computer if you do the testing on your own computer."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4926958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WCgbK.jpg?s=128&g=1", "display_name": "yassine yousfi", "link": "https://stackoverflow.com/users/4926958/yassine-yousfi"}, "edited": false, "score": 0, "creation_date": 1521037126, "post_id": 49279030, "comment_id": 85562820, "body": "i&#39;m still having the same value at the end, if the threads are running simultaneously how can thread2 (for example) start from SPIN/4 and increments by SPIN/4 (supposing thread2 is running just after thread1 and that they are the first 2 to run)"}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "reply_to_user": {"reputation": 49, "user_id": 4926958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WCgbK.jpg?s=128&g=1", "display_name": "yassine yousfi", "link": "https://stackoverflow.com/users/4926958/yassine-yousfi"}, "edited": false, "score": 0, "creation_date": 1521037756, "post_id": 49279030, "comment_id": 85563220, "body": "Maybe your just previously started thread already exited right before starting next thread. Running new thread is enough heavy operation."}], "tags": [], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1521034106, "creation_date": 1521034106, "answer_id": 49279030, "question_id": 49278946, "link": "https://stackoverflow.com/questions/49278946/incrementing-the-global-variable-using-threads-without-a-mutex-strangely-returns/49279030#49279030", "title": "Incrementing the global variable using threads without a mutex strangely returns correct value", "body": "<p>When you call <code>pthread_join</code> in the loop, the main thread is idle and waits for another thread exits. Thus you get a workflow like below:</p>\n\n<pre><code>Run thread 0\nWait for thread 0\nThread 0 exited\nRun thread 1\nWait for thread 1\nThread 1 exited\n...\n</code></pre>\n\n<p>No threads are running simultaneously. </p>\n\n<p>You should separate the running threads loop and the waiting threads loop.</p>\n\n<pre><code>for(i= 0; i&lt; 4; i++) {\n  statut = pthread_create(&amp;thread_id[i], NULL, routine_thread, NULL);           \n  if(statut != 0) {\n    fprintf(stderr, \"error creating thread\\n\");\n    exit(EXIT_FAILURE);                 \n  }\n}\nfor(i= 0; i&lt; 4; i++) {\n  statut = pthread_join(thread_id[i], &amp;resultat_thread);\n  if(statut != 0) {\n    fprintf(stderr, \"error joining the thread\\n\");\n    exit(EXIT_FAILURE);\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 4926958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WCgbK.jpg?s=128&g=1", "display_name": "yassine yousfi", "link": "https://stackoverflow.com/users/4926958/yassine-yousfi"}, "edited": false, "score": 0, "creation_date": 1521037220, "post_id": 49279165, "comment_id": 85562874, "body": "i&#39;m still having the same value at the end, if the threads are running simultaneously how can thread2 (for example) start from SPIN/4 and increments by SPIN/4 (supposing thread2 is running just after thread1 and that they are the first 2 to run)"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 49, "user_id": 4926958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WCgbK.jpg?s=128&g=1", "display_name": "yassine yousfi", "link": "https://stackoverflow.com/users/4926958/yassine-yousfi"}, "edited": false, "score": 0, "creation_date": 1521037969, "post_id": 49279165, "comment_id": 85563369, "body": "Do you mean if you change as suggested, you still the 40000000 as output?"}, {"owner": {"reputation": 49, "user_id": 4926958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WCgbK.jpg?s=128&g=1", "display_name": "yassine yousfi", "link": "https://stackoverflow.com/users/4926958/yassine-yousfi"}, "edited": false, "score": 0, "creation_date": 1521038120, "post_id": 49279165, "comment_id": 85563478, "body": "yes, even when changing as suggested, i&#39;m still getting the 40000000 as an output"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 49, "user_id": 4926958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WCgbK.jpg?s=128&g=1", "display_name": "yassine yousfi", "link": "https://stackoverflow.com/users/4926958/yassine-yousfi"}, "edited": false, "score": 0, "creation_date": 1521038428, "post_id": 49279165, "comment_id": 85563700, "body": "<i>Data race</i> (i.e., multiple threads attempting to modify <code>compteur</code> in an unsychrnozied way) means it&#39;s undefined. You might still observe that results are as &quot;expected&quot;. But that&#39;s just coincidence and you can&#39;t (and shouldn&#39;t) rely on that. Perhaps, your system has just one processor (or too busy with other tasks or your threads finish too quickly before the next thread could start, etc) and OS schedules any one of your threads at any time. So if <i>looks</i> the threads are run one after other. Again, it&#39;s just accidental and you shouldn&#39;t rely on that."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 49, "user_id": 4926958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WCgbK.jpg?s=128&g=1", "display_name": "yassine yousfi", "link": "https://stackoverflow.com/users/4926958/yassine-yousfi"}, "edited": false, "score": 0, "creation_date": 1521038467, "post_id": 49279165, "comment_id": 85563731, "body": "Whether or not, you can <i>observe</i> the problem, your program <i>certainly</i> has the problem (= data race)."}, {"owner": {"reputation": 49, "user_id": 4926958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WCgbK.jpg?s=128&g=1", "display_name": "yassine yousfi", "link": "https://stackoverflow.com/users/4926958/yassine-yousfi"}, "edited": false, "score": 0, "creation_date": 1521041523, "post_id": 49279165, "comment_id": 85566094, "body": "yes, i think you are right, typing lscpu command on terminal shows that i have 1 processor with 2 cores, the computer i am using (a friend&#39;s computer) is actually a notebook."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1521034513, "creation_date": 1521034513, "answer_id": 49279165, "question_id": 49278946, "link": "https://stackoverflow.com/questions/49278946/incrementing-the-global-variable-using-threads-without-a-mutex-strangely-returns/49279165#49279165", "title": "Incrementing the global variable using threads without a mutex strangely returns correct value", "body": "<p>You have serialised the threads you're creating. <code>pthread_join()</code> call inside the loop waits for the thread to complete before creating the next thread.\nSo you have just one thread active (other than the main thread) at any time that modifies <code>compteur</code>. So there's no <a href=\"https://en.wikipedia.org/wiki/Race_condition#Software\" rel=\"nofollow noreferrer\"><em>data race</em></a> that you're expecting to observe.</p>\n\n<p>Remove the <code>pthread_join</code> calls from the loop. And make another loop to wait for the threads:</p>\n\n<pre><code>      for(i= 0; i&lt; 4; i++) {\n        statut = pthread_join(thread_id[i], NULL);\n\n        if(statut != 0) {\n            fprintf(stderr, \"error joining the thread\\n\");\n            exit(EXIT_FAILURE);\n        }\n      }\n</code></pre>\n\n<p>Your thread function doesn't return any value. So you could just use <code>NULL</code> instead of <code>&amp;resultat_thread</code> in <code>pthread_join</code> calls.</p>\n"}, {"tags": [], "owner": {"reputation": 648, "user_id": 5694959, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TN18H3fTni4/AAAAAAAAAAI/AAAAAAAAAA8/HH8MErbPvAI/photo.jpg?sz=128", "display_name": "Monk", "link": "https://stackoverflow.com/users/5694959/monk"}, "is_accepted": false, "score": 0, "last_activity_date": 1521034634, "creation_date": 1521034634, "answer_id": 49279212, "question_id": 49278946, "link": "https://stackoverflow.com/questions/49278946/incrementing-the-global-variable-using-threads-without-a-mutex-strangely-returns/49279212#49279212", "title": "Incrementing the global variable using threads without a mutex strangely returns correct value", "body": "<pre><code>   for(i= 0; i&lt; 4; i++) {\n\n            statut = pthread_create(&amp;thread_id[i], NULL, routine_thread, NULL);         \n\n                     if(statut != 0){\n                        fprintf(stderr, \"error creating thread\\n\");\n                        exit(EXIT_FAILURE);                 \n                     }\n\n            statut = pthread_join(thread_id[i], &amp;resultat_thread);\n\n                    if(statut != 0){\n                       fprintf(stderr, \"error joining the thread\\n\");\n                       exit(EXIT_FAILURE);\n                    }\n  }\n</code></pre>\n\n<p>this code creates a thread and waits until thread completes it execution.so global variable <code>compteur</code> will be accessed by a thread a time that's why you are getting same value every time.</p>\n\n<p>To achieve the objective of all thread increments (SPIN/4 times) the value of the global variable <code>compteur</code> at same time you should first create all 4 thread <code>pthread_create()</code> then call <code>pthread_join()</code> to wait for it.</p>\n"}], "owner": {"reputation": 49, "user_id": 4926958, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WCgbK.jpg?s=128&g=1", "display_name": "yassine yousfi", "link": "https://stackoverflow.com/users/4926958/yassine-yousfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "closed_date": 1521299563, "accepted_answer_id": 49279165, "answer_count": 3, "score": -4, "last_activity_date": 1521036386, "creation_date": 1521033838, "last_edit_date": 1521036386, "question_id": 49278946, "link": "https://stackoverflow.com/questions/49278946/incrementing-the-global-variable-using-threads-without-a-mutex-strangely-returns", "closed_reason": "Needs details or clarity", "title": "Incrementing the global variable using threads without a mutex strangely returns correct value", "body": "<p>We were asked to create 4 threads each increments (<code>SPIN</code>/4 times) the value of the global variable <code>compteur</code> to supposedly notice that each thread is accessing/changing the global variable before another one finishes the iteration (that's why <code>SPIN</code> is given a very large number), for example thread number 1 access <code>compteur</code> first and while it's incrementing another thread access compteur and sees that <code>compteur = 0</code> still, to conclude in the end that we must use MUTEX.</p>\n\n<p>The problem is that the program is always giving me the same value as SPIN when it's not supposed to.</p>\n\n<p>Can you explain to me why?    </p>\n\n<pre><code>#define SPIN 40000000\n\nint compteur = 0;\n\nvoid *routine_thread(void *arg) {\n  int i;\n  printf(\"accessing thread ... \\n\");\n\n  for (i = 0; i &lt; SPIN / 4; ++i) {\n    compteur++;\n  }\n  printf(\"quitting thread ... \\n\");\n  pthread_exit(NULL);\n}\n\nint main(int argc, char *argv[]) {\n  pthread_t thread_id[4];\n  void *resultat_thread;\n  int statut;\n  int i;\n\n  for (i = 0; i &lt; 4; i++) {\n    statut = pthread_create(&amp;thread_id[i], NULL, routine_thread, NULL);\n    if (statut != 0) {\n      fprintf(stderr, \"error creating thread\\n\");\n      exit(EXIT_FAILURE);\n    }\n\n    statut = pthread_join(thread_id[i], &amp;resultat_thread);\n    if (statut != 0) {\n      fprintf(stderr, \"error joining the thread\\n\");\n      exit(EXIT_FAILURE);\n    }\n  }\n\n  printf(\"compteur value is : %d\\n\", compteur);\n\n  if (resultat_thread == NULL)\n    return EXIT_FAILURE;\n  else\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "algorithm", "loops", "find"], "comments": [{"owner": {"reputation": 951, "user_id": 2375207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c7e47a1942f02ecd3c1a441d122f77c?s=128&d=identicon&r=PG", "display_name": "nicolallias", "link": "https://stackoverflow.com/users/2375207/nicolallias"}, "edited": false, "score": 0, "creation_date": 1521035173, "post_id": 49278887, "comment_id": 85561370, "body": "And try to indent your code, to improve readability (you would also spot that your for loop has no block delimiter)."}, {"owner": {"reputation": 2572, "user_id": 5784350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1be79d2a9a367e3b66c42928c0b095a7?s=128&d=identicon&r=PG&f=1", "display_name": "Tommylee2k", "link": "https://stackoverflow.com/users/5784350/tommylee2k"}, "reply_to_user": {"reputation": 628, "user_id": 8939165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gchW.jpg?s=128&g=1", "display_name": "Fabio_MO", "link": "https://stackoverflow.com/users/8939165/fabio-mo"}, "edited": false, "score": 0, "creation_date": 1521036180, "post_id": 49278887, "comment_id": 85562152, "body": "@Fabio_MO what makes you think <code>for</code> necessarily needs brackets?"}, {"owner": {"reputation": 2572, "user_id": 5784350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1be79d2a9a367e3b66c42928c0b095a7?s=128&d=identicon&r=PG&f=1", "display_name": "Tommylee2k", "link": "https://stackoverflow.com/users/5784350/tommylee2k"}, "reply_to_user": {"reputation": 628, "user_id": 8939165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0gchW.jpg?s=128&g=1", "display_name": "Fabio_MO", "link": "https://stackoverflow.com/users/8939165/fabio-mo"}, "edited": false, "score": 0, "creation_date": 1521037449, "post_id": 49278887, "comment_id": 85563014, "body": "@Fabio_MO no it doesn&#39;t. just the &quot;else&quot; is wrong. he wants to check all chars, not just the first one (after indenting the code this is obvious)"}], "answers": [{"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1521035614, "last_edit_date": 1521035614, "creation_date": 1521033929, "answer_id": 49278977, "question_id": 49278887, "link": "https://stackoverflow.com/questions/49278887/i-want-to-search-an-element-of-the-string-str-in-the-string-s-but-when-im-tryin/49278977#49278977", "title": "I want to search an element of the string str in the string s but when I&#39;m trying to search anything(e.g. str[1]) in the string s, it returns 0", "body": "<p>You need to <em>continue</em> the loop when the element is not found. The function currently returns on first mismatch.</p>\n\n<p>Something like:</p>\n\n<pre><code>    ...\n\n    for(i=l;i&lt;=h;i++) {\n        if(a[i]==p) return i;\n    }\n    return -1;\n}\n</code></pre>\n\n<p>Note that I changed to return <code>-1</code> on failure because <code>0</code> could also be the index where the char is found.</p>\n"}, {"tags": [], "owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "is_accepted": false, "score": 0, "last_activity_date": 1521036499, "last_edit_date": 1521036499, "creation_date": 1521036158, "answer_id": 49279767, "question_id": 49278887, "link": "https://stackoverflow.com/questions/49278887/i-want-to-search-an-element-of-the-string-str-in-the-string-s-but-when-im-tryin/49279767#49279767", "title": "I want to search an element of the string str in the string s but when I&#39;m trying to search anything(e.g. str[1]) in the string s, it returns 0", "body": "<p>Your loop exits after <strong>ONLY</strong> one check: It will <code>return</code> <code>0</code> for first <code>return i</code> or <code>0</code> for second <code>return 0</code>.</p>\n\n<pre><code>for(i=l;i&lt;=h;i++)\n{\n    if(a[i]==p)\n        return i;  // 0\n    else\n       return 0;   // 0\n}\n</code></pre>\n\n<p>The loop should go on:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n    int lsearch(char a[], int l, int h, char p)\n    {\n        int i;    \n        for(i=l; i &lt; h; i++){\n\n            if( a[i] == p){\n                return i;\n            }\n        }\n       return -1;\n    }\n\n    int main()\n    {\n        int i,z;\n        char s[100];\n\n        scanf(\"%s\",s);\n\n        char str[100];\n        scanf(\"%s\",str);\n\n        z = lsearch(s, 0 ,strlen(s), str[1]);\n\n        printf(\"%d\",z);\n    }\n</code></pre>\n\n<p>test:</p>\n\n<pre><code>12345                                                                                                                                       \n13                                                                                                                                          \n2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1521036789, "last_edit_date": 1521036789, "creation_date": 1521036269, "answer_id": 49279806, "question_id": 49278887, "link": "https://stackoverflow.com/questions/49278887/i-want-to-search-an-element-of-the-string-str-in-the-string-s-but-when-im-tryin/49279806#49279806", "title": "I want to search an element of the string str in the string s but when I&#39;m trying to search anything(e.g. str[1]) in the string s, it returns 0", "body": "<p>If to rewrite your for loop with using braces then it looks like</p>\n\n<pre><code>for(i=l;i&lt;=h;i++)\n{\n    if(a[i]==p)\n        return i;\n    else\n        return 0;\n}\n</code></pre>\n\n<p>So it is seen that if the first (at position <code>l</code>) character of the source string is not equal to the target character the function returns 0.</p>\n\n<p>Also it is a bad approach to return 0 becaues the parameter <code>L</code> can be initially set to 0 by the user. In this case it is unclear whether the character is found or not.</p>\n\n<p>Moreover the position should have the type <code>size_t</code> and the source character array should be specified with the qualifier <code>const</code> because it is not changed in the function.</p>\n\n<p>The function can look as it is shown in the demonstrative program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nsize_t lsearch( const char s[], size_t n, char c )\n{\n    size_t i = 0;\n\n    while ( i &lt; n &amp;&amp; s[i] != c ) ++i;\n\n    return i;\n}\n\nint main(void) \n{\n    char s[] = \"Hello Utkarsh Pandey\";\n    size_t start_pos = 6;\n    size_t n = 7;\n\n    size_t pos = lsearch( s + start_pos, n, 'a' );\n\n    if ( pos != n )\n    {\n        printf( \"The character 'a' is found at position %zu\\n\", pos + start_pos );\n    }\n    else\n    {\n        puts( \"The character 'a' is not found\" );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>The character 'a' is found at position 9\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9491659, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/341117489607698/picture?type=large", "display_name": "Utkarsh Pandey", "link": "https://stackoverflow.com/users/9491659/utkarsh-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 49278977, "answer_count": 3, "score": -1, "last_activity_date": 1521036789, "creation_date": 1521033661, "last_edit_date": 1521036573, "question_id": 49278887, "link": "https://stackoverflow.com/questions/49278887/i-want-to-search-an-element-of-the-string-str-in-the-string-s-but-when-im-tryin", "title": "I want to search an element of the string str in the string s but when I&#39;m trying to search anything(e.g. str[1]) in the string s, it returns 0", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint lsearch(char a[],int l,int h,char p)\n{\n   int i=l;\n   for(i=l;i&lt;=h;i++)\n      if(a[i]==p)\n        return i;\n      else\n        return 0;\n}\n\nint main()\n{\n   int i,z;\n   char s[100];\n   scanf(\"%s\",s);\n   char str[100];\n   scanf(\"%s\",str);\n   z=lsearch(s,0,strlen(s)-1,str[1]);\n   printf(\"%d\",z);\n}\n</code></pre>\n\n<p>I want to search an element of the string str in the string s but when I'm trying to search anything(e.g. str[1]) in the string s, it returns 0</p>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 7, "creation_date": 1521033420, "post_id": 49278647, "comment_id": 85559964, "body": "You need to make sure your input arrays have room for <b>both</b> the newline character <b>and</b> the null termination character. If you want to read 5 characters, you need to leave room for 7."}], "answers": [{"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1521035743, "post_id": 49278839, "comment_id": 85561828, "body": "..and plus 1 for the newline (see comment of @n.m.)"}, {"owner": {"reputation": 3036, "user_id": 3466415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610a8a95f861678ab9f72ee483d1c1a7?s=128&d=identicon&r=PG&f=1", "display_name": "David K", "link": "https://stackoverflow.com/users/3466415/david-k"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1521058358, "post_id": 49278839, "comment_id": 85576758, "body": "@PaulOgilvie Good point. For the purpose of the application, my hunch is there is no need to store the newline\u2014but the way it is written now, if you only increase the argument to 6 then I\u2019d expect the first newline to be input for the second fgets. That wouldn\u2019t have the result OP desired. In fact I would not recommend this approach at all; it seems much too fragile."}], "tags": [], "owner": {"reputation": 3036, "user_id": 3466415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610a8a95f861678ab9f72ee483d1c1a7?s=128&d=identicon&r=PG&f=1", "display_name": "David K", "link": "https://stackoverflow.com/users/3466415/david-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1521033558, "creation_date": 1521033558, "answer_id": 49278839, "question_id": 49278647, "link": "https://stackoverflow.com/questions/49278647/c-reads-wrong-amount-of-strings/49278839#49278839", "title": "C reads wrong amount of strings", "body": "<p>You need larger arrays.</p>\n\n<p>Each player's hand is 5 characters, which should be stored in 5 bytes\n<em>plus</em> one byte to hold a null terminator.\nSo you need at least 6 bytes in each array to hold the hands.</p>\n\n<p><code>fgets</code> helpfully only reads 4 bytes when you call it like\n<code>fgets(firstPlayerCards, 5, stdin)</code>\nin order to avoid undefined behavior when it writes the null character.\nSo you are not reading the input that you intended to.</p>\n"}, {"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 0, "last_activity_date": 1521033605, "creation_date": 1521033605, "answer_id": 49278860, "question_id": 49278647, "link": "https://stackoverflow.com/questions/49278647/c-reads-wrong-amount-of-strings/49278860#49278860", "title": "C reads wrong amount of strings", "body": "<p>Make sure <code>firstPlayerCards</code> and <code>secondPlayerCards</code> have enough memory to store user input string. As you shown the example input, <code>5h 5d</code> having 5 char plus new line and you declare <code>firstPlayerCards</code> of only 5 char, change it to 7.</p>\n\n<p>from the manual page of <code>fgets()</code></p>\n\n<blockquote>\n  <p>fgets() reads in at most one less than size characters from stream \n  and\n         stores  them  into  the buffer pointed to by s.  Reading stops after an\n         EOF or a newline.  If a newline is read, it is stored into the  buffer.\n         A  terminating  null  byte ('\\0') is stored after the last character in\n         the buffer.</p>\n</blockquote>\n\n<p>for example </p>\n\n<pre><code>char firstPlayerCards [5];\nfgets(firstPlayerCards, sizeof(firstPlayerCards),stdin); /* it reads only 4 char as fgets() reads size minus one char from stream, if you want to read all char or more change the size of array */\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 8656057, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6567491f6cc3188d6ae68cdef182fa6?s=128&d=identicon&r=PG&f=1", "display_name": "P. Bolfa", "link": "https://stackoverflow.com/users/8656057/p-bolfa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521033605, "creation_date": 1521033007, "last_edit_date": 1521033392, "question_id": 49278647, "link": "https://stackoverflow.com/questions/49278647/c-reads-wrong-amount-of-strings", "title": "C reads wrong amount of strings", "body": "<p>I am trying to read 3 strings (3 lines)  where the <em>first</em> line - cards of player 1 , the <em>second</em> line - cards of player 2 , the <em>third</em> line - cards in the deck. The problem is that C only reads the first two lines and <strong><em>skip</em></strong> reading the deck.\n ` </p>\n\n<pre><code> char firstPlayerCards [5];\n char secondPlayerCards [5];\n char deck [14];\n fgets(firstPlayerCards, sizeof(firstPlayerCards),stdin);\n fgets(secondPlayerCards, sizeof(secondPlayerCards),stdin);\n fgets(deck, sizeof(deck),stdin);\n printf(\"%s\",firstPlayerCards);\n printf(\"%s\",secondPlayerCards);\n printf(\"%s\",deck);`\n</code></pre>\n\n<p>Input is like:</p>\n\n<pre><code>5h 5d\n7h As\n2h 8d 4h Jh Ah\n</code></pre>\n"}, {"tags": ["c", "fopen"], "comments": [{"owner": {"reputation": 3, "user_id": 4636700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd59840f54f8e3f5876ab7677a45f50a?s=128&d=identicon&r=PG&f=1", "display_name": "Jazz R", "link": "https://stackoverflow.com/users/4636700/jazz-r"}, "edited": false, "score": 0, "creation_date": 1521032936, "post_id": 49278614, "comment_id": 85559608, "body": "also tried with fopen(&quot;C:\\\\Program Files\\\\NotMal.txt&quot;, &quot;w&quot;);"}, {"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 1, "creation_date": 1521033020, "post_id": 49278614, "comment_id": 85559673, "body": "You probably are not allowed to write to &quot;C:\\Program Files&quot;, are you?"}, {"owner": {"reputation": 1101, "user_id": 7021836, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/299fc62810116e741333419b8e6cfd24?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Quilliam", "link": "https://stackoverflow.com/users/7021836/alex-quilliam"}, "edited": false, "score": 2, "creation_date": 1521033099, "post_id": 49278614, "comment_id": 85559726, "body": "You probably have to run your executable as an administrator, because you are writing to a restricted access location."}, {"owner": {"reputation": 3, "user_id": 4636700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd59840f54f8e3f5876ab7677a45f50a?s=128&d=identicon&r=PG&f=1", "display_name": "Jazz R", "link": "https://stackoverflow.com/users/4636700/jazz-r"}, "reply_to_user": {"reputation": 1101, "user_id": 7021836, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/299fc62810116e741333419b8e6cfd24?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Quilliam", "link": "https://stackoverflow.com/users/7021836/alex-quilliam"}, "edited": false, "score": 0, "creation_date": 1521233339, "post_id": 49278614, "comment_id": 85660526, "body": "@AlexQuilliam I run from Admin each time"}, {"owner": {"reputation": 3, "user_id": 4636700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd59840f54f8e3f5876ab7677a45f50a?s=128&d=identicon&r=PG&f=1", "display_name": "Jazz R", "link": "https://stackoverflow.com/users/4636700/jazz-r"}, "reply_to_user": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1521233363, "post_id": 49278614, "comment_id": 85660537, "body": "@MichaWiedenmann I have the admin rights needed to write to program files"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1521642367, "post_id": 49278614, "comment_id": 85819215, "body": "Please don&#39;t vandalize your post. If you want to add your own answer, do so in the answer section below."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4636700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd59840f54f8e3f5876ab7677a45f50a?s=128&d=identicon&r=PG&f=1", "display_name": "Jazz R", "link": "https://stackoverflow.com/users/4636700/jazz-r"}, "edited": false, "score": 0, "creation_date": 1521639358, "post_id": 49278685, "comment_id": 85816748, "body": "Hi, thanks for the feedback! I also have a function which does write to this folder, but I also intentionally need to write to windows software folder :)"}], "tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1521033129, "creation_date": 1521033129, "answer_id": 49278685, "question_id": 49278614, "link": "https://stackoverflow.com/questions/49278614/fopen-failed-with-my-file-path/49278685#49278685", "title": "fopen failed with my file path", "body": "<p><code>Program Files</code> is windows default software deployment folder. Better not to use that path. Better create your own test folder and test. If possible not to name folder with space. </p>\n\n<pre><code>FILE* fptwo = fopen(\"C:\\\\MyProject\\\\test\\\\NotMal.txt\", \"w\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 4636700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd59840f54f8e3f5876ab7677a45f50a?s=128&d=identicon&r=PG&f=1", "display_name": "Jazz R", "link": "https://stackoverflow.com/users/4636700/jazz-r"}, "edited": false, "score": 0, "creation_date": 1521639383, "post_id": 49278756, "comment_id": 85816770, "body": "Thank you, added this in now and I can see that the problem is an &#39;invalid argument&#39;, after taking off the leading slashes at the start of the path it works successfully"}, {"owner": {"reputation": 3, "user_id": 4636700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd59840f54f8e3f5876ab7677a45f50a?s=128&d=identicon&r=PG&f=1", "display_name": "Jazz R", "link": "https://stackoverflow.com/users/4636700/jazz-r"}, "edited": false, "score": 0, "creation_date": 1521642155, "post_id": 49278756, "comment_id": 85819015, "body": "If I was to repeat this with the downloads folder, do you know what file path I would need to use? I have tried to use &quot;Downloads\\\\DownloadedFromInternet.txt&quot; but it says that the file does not exist"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 3, "user_id": 4636700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd59840f54f8e3f5876ab7677a45f50a?s=128&d=identicon&r=PG&f=1", "display_name": "Jazz R", "link": "https://stackoverflow.com/users/4636700/jazz-r"}, "edited": false, "score": 0, "creation_date": 1521642848, "post_id": 49278756, "comment_id": 85819625, "body": "On windows, open a windows explorer on the folder desired, then click the &quot;icon folder&quot; located on the upper part of the windows (like it&#39;s an url in a web browser). It will normally expand into the absolute path of the current folder. It&#39;s a little hard to explain, did you succeed ?"}], "tags": [], "owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "is_accepted": false, "score": 1, "last_activity_date": 1521033316, "creation_date": 1521033316, "answer_id": 49278756, "question_id": 49278614, "link": "https://stackoverflow.com/questions/49278614/fopen-failed-with-my-file-path/49278756#49278756", "title": "fopen failed with my file path", "body": "<p>You test if you have correctly opened the file, it's good !\nBut it's better to know why your function call have failed.</p>\n\n<p>For \"fopen\", you can know by looking the value of errno. (read the man about fopen).\nAnd a \"cool thing\" is that you can obtain an english description by using \"strerror\".</p>\n\n<p>So, just do :</p>\n\n<pre><code>#include &lt;string.h&gt; // For strerror\n#include &lt;errno.h&gt; // For .... errno\n\nFILE* fptwo = fopen(\"\\\\C:\\\\Program Files\\\\NotMal.txt\", \"w\");\nif (fptwo == NULL)\n{\n    printf(\"Error : errno='%s'.\\n\", strerror(errno));\n}\nelse\n{\n    printf(\"open progfiles successful \\n\"); \n    //add this text to the file \n    fprintf(fptwo, \"This is text\");\n    printf(\"add text succuessful \\n\");\n\n    //close file pointer when finished\n    fclose(fptwo);\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4636700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd59840f54f8e3f5876ab7677a45f50a?s=128&d=identicon&r=PG&f=1", "display_name": "Jazz R", "link": "https://stackoverflow.com/users/4636700/jazz-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521642310, "creation_date": 1521032897, "last_edit_date": 1521642310, "question_id": 49278614, "link": "https://stackoverflow.com/questions/49278614/fopen-failed-with-my-file-path", "title": "fopen failed with my file path", "body": "<p>Trying to open and write to the following file path, for some reason it is not opening, I've tried several different paths and nothing has worked. I am running this from C:\\   </p>\n\n<pre><code>FILE* fptwo = fopen(\"\\\\C:\\\\Program Files\\\\NotMal.txt\", \"w\");\nif (fptwo != NULL)\n{\n    printf(\"open progfiles successful \\n\"); \n    //add this text to the file \n    fprintf(fptwo, \"This is text\");\n    printf(\"add text succuessful \\n\");\n\n    //close file pointer when finished\n    fclose(fptwo);\n}\n</code></pre>\n\n<p>*please feel free to delete or close this question if it is answered somewhere else, I apologize for the mistakes made within this, and if it is a stupid error. </p>\n"}, {"tags": ["c", "arrays", "sorting"], "comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1521032783, "post_id": 49278509, "comment_id": 85559496, "body": "Don&#39;t use <code>scanf()</code> to read user input. Your capabilities to recover gracefully when faced with malformed input are limited. Instead use <code>fgets()</code> to read a whole line of input, and parse that in-memory (e.g. with <code>strtol()</code>). If you <i>insist</i> on using <code>scanf()</code>, at least check its return value: If the user enters a string instead of a number, <code>userChoice</code> does not get initialized, and any use of that variable (e.g. in <code>switch ( userChoice )</code>) is undefined behaviour."}, {"owner": {"reputation": 1, "user_id": 9491553, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nathan Johnson", "link": "https://stackoverflow.com/users/9491553/nathan-johnson"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1521040589, "post_id": 49278509, "comment_id": 85565370, "body": "Yeah it&#39;s because I&#39;m working on bits of the code bit by bit and may seem confusing to others. Sorry about that, it&#39;s just not finished that&#39;s why. I just need to get the user to store tickets and my task isn&#39;t that bothered to make sure they enter just numbers but thanks for the extra info."}], "owner": {"reputation": 1, "user_id": 9491553, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Nathan Johnson", "link": "https://stackoverflow.com/users/9491553/nathan-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521032590, "creation_date": 1521032590, "question_id": 49278509, "link": "https://stackoverflow.com/questions/49278509/how-to-store-the-users-input-into-an-array", "title": "How to store the users input into an array?", "body": "<p>I know from my code it's a bit of a mess as I'm a beginner to programming. I just wanted to see if someone could just quickly help me out by letting me know how to get the users input stored into an array and do what my code already does. So, I want the user to input the amount of tickets and then that gets stored in an array then printed like my code already does. Just want to try and cut down my code as it is very messy and need to store it in an array I've been told but I'm stumped at the moment. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;stdbool.h&gt;\n#define MAX 10\n\nvoid showPrices();\nvoid showRoutes();\nvoid orderTickets();\n\nvoid main()\n{\n\n\n    int userChoice;\n\n\n    while(1)\n    {\n        // Looping the menu for the user\n        printf(\"\\n\\n**** MENU ****\");\n        printf(\"\\n*NOTE* MAX TICKETS PER CUSTOMER = 10\");\n        printf(\"\\n1. Show Prices\\n2. Show Routes\\n3. Order Tickets\\n4. Exit\");\n        printf(\"\\nEnter your choice: \");\n        scanf(\"%d\", &amp;userChoice);\n\n        //gets to chose between the different options\n        switch(userChoice)\n        {\n            case 1: showPrices();\n                break;\n            case 2: showRoutes();\n                break;\n            case 3: orderTickets();\n                break;\n            case 4: exit(0);\n            default: printf(\"\\nInvalid, try again!!!\");\n        }\n    }\n\n}\n\nvoid showPrices()\n{\n    //for the switch statement, this is what I want to be displayed when they pick this option\n    printf(\"\\n\\n---- Prices - ALL DAY ----\");\n    printf(\"\\n1. Child = \u00a33\\n2. Teenager = \u00a35\\n3. Standard = \u00a310\\n4. Student = \u00a37\\n5. Senior = \u00a36\");\n}\nvoid showRoutes()\n{\n    //for the switch statement, this is what I want to be displayed when they pick this option\n    printf(\"\\n\\n---- Routes - ALL DAY ----\");\n    printf(\"\\n---- Leaving from Nottingham Station ----\");\n    printf(\"\\nDestinations:\\nDerby\\nLeicester\\nSheffield\\nBirmingham\");\n}\nvoid orderTickets()\n{\n    int ticketArray[tickets];\n    int age;\n    int userInput = 0;\n    int tickets;\n    int ticketSum = 0;\n    int ticketNumber = 1;\n    int sum;\n    int userDesti;\n     //Main function where the user oders the tickets!\n\n     printf(\"\\nWhere do you want to go?\");\n     printf(\"\\n1. Derby\\n2. Leicester\\n3. Sheffield\\n4. Birmingham\");\n     scanf(\"%d\", &amp;userDesti);\n\n     //asks the user how many tickets they want\n    printf (\"\\nHow many tickets do you need?: \");\n    scanf  (\"%d\", &amp;tickets);\n\n    //loop to keep asking the user to input the information they need to enter for each ticket until it reaches 0\n    while (tickets &gt; 0)\n    {\n        /*only does this if they enter 10 or less and more than 0\n        if (tickets &lt;= 10 &amp;&amp; tickets &gt; 0)\n        {\n\n            printf(\"\\nHow old are you?: \");\n            scanf(\"%d\", &amp;age);\n\n            if(age &lt; 10)\n            {\n                printf(\"\\nChild Ticket = \u00a33\\n\");\n                ticketSum = ticketSum + 3;\n\n            }\n                else if (age &lt; 16)\n            {\n                printf (\"\\nTeenager Ticket = \u00a35\\n\");\n                ticketSum = ticketSum + 5;\n\n            }\n            else if (age &gt;= 16 &amp;&amp; age &lt; 60)\n            {\n                printf(\"\\nStandard Ticket = \u00a310\\n\");\n                ticketSum = ticketSum + 10;\n\n            }\n            else\n            {\n                printf(\"\\nSenior Ticket = \u00a36\\n\");\n                ticketSum = ticketSum + 6;\n\n            }\n\n        }\n         //if they enter an invalid number\n        else\n        {\n            printf(\"Error, invalid number of tickets!!\\n\");\n            break;\n        }*/\n\n\n        // this allows the student discount to be deducted from the final price\n            printf(\"\\nAre you a student? Enter 1 for yes or 2 for no: \");\n            scanf(\"%i\", &amp;userInput);\n\n            if(userInput == 1)\n            {\n                printf (\"\\nYou are eligible for the student discount = \u00a33 deducted\\n\");\n                //sum to deduct the discount\n                ticketSum = ticketSum - 3;\n            }\n            //if they aren't a student then they will get this message\n            else if (userInput == 2)\n            {\n                printf (\"\\nYou are not eligible for the student discount, sorry!\\n\");\n            }\n\n\n\n\n        // gives the user their number for that ticket\n        printf(\"\\n------------------\");\n        printf(\"\\nTicket Number: %d \", ticketNumber);\n        printf(\"\\n------------------\\n\");\n        ticketNumber++;\n\n\n        // lets the user know how much each ticket adds onto the previous \n        printf(\"\\n-----------------------\");\n        printf(\"\\nThe summary so far: %d \", ticketSum);\n        printf(\"\\n-----------------------\\n\");\n\n        // gets out of the main loop when the tickets are less than or equal to 0\n        if (tickets &lt;= 0 )\n        {\n            break; \n        }\n\n        //takes away the value of tickets each time so if they want 2 tickets then it takes away 1 so then it equals 1 left umtil it reaches 0\n        tickets--;\n\n    }\n\n    //the receipt of all the tickets added together. \n        printf(\"\\n-----------------------------------\");\n        printf(\"\\n-----------------------------------\");\n        printf(\"\\nThe receipt for your order: \u00a3%d\", ticketSum);\n        printf(\"\\n-----------------------------------\");\n        printf(\"\\n-----------------------------------\");\n\n}\n</code></pre>\n"}, {"tags": ["c", "typedef"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1521032565, "post_id": 49278358, "comment_id": 85559363, "body": "Typedef defines a type, you cannot use it to initialise objects of that type."}, {"owner": {"reputation": 1826, "user_id": 2802669, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/2FP0I.jpg?s=128&g=1", "display_name": "salimsaid", "link": "https://stackoverflow.com/users/2802669/salimsaid"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1521032925, "post_id": 49278358, "comment_id": 85559606, "body": "@n.m is there another way to do it ?"}, {"owner": {"reputation": 1826, "user_id": 2802669, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/2FP0I.jpg?s=128&g=1", "display_name": "salimsaid", "link": "https://stackoverflow.com/users/2802669/salimsaid"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1521032959, "post_id": 49278358, "comment_id": 85559622, "body": "To all those who down comment, would you care to explain why you are down commenting ?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1521033048, "post_id": 49278358, "comment_id": 85559683, "body": "Calling <code>ishida_opcua_array_init</code> is a good way to do it. I&#39;m not sure why you want to do it in any other way. What&#39;s wrong with calling a function?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1521033114, "post_id": 49278358, "comment_id": 85559735, "body": "not down voter - but I&#39;d guess that it&#39;s because they&#39;re confused about what you&#39;re asking"}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1521033163, "post_id": 49278358, "comment_id": 85559775, "body": "didnt downvote, but there is literally no question, striclty speaking no mcve but only fragments and imho you should explain why you think a typedef has anything to do with initialization of a variable."}, {"owner": {"reputation": 1826, "user_id": 2802669, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/2FP0I.jpg?s=128&g=1", "display_name": "salimsaid", "link": "https://stackoverflow.com/users/2802669/salimsaid"}, "edited": false, "score": 0, "creation_date": 1521098779, "post_id": 49278358, "comment_id": 85589610, "body": "i am more interested in having a default initialization i.e. when ishida_opcua_array already_initialized_array is done, the variable should contain say 10 elements with each element having the value -56565 , i do not want the user of the type to call an initialization function, i want the initialization to happen in the background."}], "answers": [{"comments": [{"owner": {"reputation": 1826, "user_id": 2802669, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/2FP0I.jpg?s=128&g=1", "display_name": "salimsaid", "link": "https://stackoverflow.com/users/2802669/salimsaid"}, "edited": false, "score": 0, "creation_date": 1521098755, "post_id": 49279084, "comment_id": 85589601, "body": "Your approach is slightly similar to what i have so far, i am more interested in having a default initialization i.e. when ishida_opcua_array already_initialized_array is done, the variable should contain 10 elements with each element having the value -56565"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 1826, "user_id": 2802669, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/2FP0I.jpg?s=128&g=1", "display_name": "salimsaid", "link": "https://stackoverflow.com/users/2802669/salimsaid"}, "edited": false, "score": 0, "creation_date": 1521102153, "post_id": 49279084, "comment_id": 85591102, "body": "In C, all that comes to my mind would be another macro: <code>#define ISHIDA_OPCUA_ARRAY(NAME) ishida_opcua_array NAME = { INIT_7 }</code>... C++ would offer constructors for such purposes..."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 0, "last_activity_date": 1521034272, "creation_date": 1521034272, "answer_id": 49279084, "question_id": 49278358, "link": "https://stackoverflow.com/questions/49278358/initialize-integer-variable-on-typedef-in-c/49279084#49279084", "title": "Initialize integer variable on typedef in C", "body": "<pre><code>ishida_opcua_array already_initialized_array = { 1, 2, 3 };\n</code></pre>\n\n<p>Of course, this would only initialise the first three members specifically and the rest to 0; you could use macros to generate your initialiser:</p>\n\n<pre><code>#define INIT_0 -56565          // well, prefer a better name...\n#define INIT_1 INIT_0, INIT_0\n#define INIT_2 INIT_1, INIT_1\n</code></pre>\n\n<p>up to <code>INIT_7</code> and then have</p>\n\n<pre><code>ishida_opcua_array already_initialized_array = { INIT_7 };\n</code></pre>\n\n<p>Not going to judge if this really is better than your function...</p>\n"}], "owner": {"reputation": 1826, "user_id": 2802669, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/2FP0I.jpg?s=128&g=1", "display_name": "salimsaid", "link": "https://stackoverflow.com/users/2802669/salimsaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1521034272, "creation_date": 1521032178, "last_edit_date": 1521032214, "question_id": 49278358, "link": "https://stackoverflow.com/questions/49278358/initialize-integer-variable-on-typedef-in-c", "title": "Initialize integer variable on typedef in C", "body": "<p>I have a definition for int with my preferred name like so</p>\n\n<p><strong>Step 0</strong> : </p>\n\n<h2>define array type of 128 elements</h2>\n\n<pre><code>typedef int ishida_opcua_array[128];\n</code></pre>\n\n<p>and later i have a function to initialize the type <code>ishida_opcua_array</code></p>\n\n<pre><code>void ishida_opcua_array_init(ishida_opcua_array array)\n{\n\n        int i;\n        for(i = 0; i &lt; 128; i++)\n            array[i] = -56565;\n\n}\n</code></pre>\n\n<p>And finally; this is how i use the <code>ishida_opcua_array</code> type</p>\n\n<p><strong>Step 1</strong> : </p>\n\n<h2>define an array of type ishida_opcua_array</h2>\n\n<pre><code> ishida_opcua_array source_array;\n</code></pre>\n\n<p><strong>Step 2</strong> : </p>\n\n<h2>Initialize source_array with ishida_opcua_array_init() function</h2>\n\n<pre><code> ishida_opcua_array_init(source_array);\n /*\n  * Then i can do whatever i want with [source_array]\n  */\n</code></pre>\n\n<p>How can i declare and initialize the array with the typedef, i want to be able to do </p>\n\n<pre><code>/*\n * Define the variable and you are ready to go\n * initialization has already been done while creating the variable\n */\nishida_opcua_array already_initialized_array;  //already initialzed, ready to use\n</code></pre>\n\n<p>Please note in the first step, i had to first define the variable like so</p>\n\n<pre><code>ishida_opcua_array source_array;\n</code></pre>\n\n<p>then initialize the variable using below function</p>\n\n<pre><code>ishida_opcua_array_init(source_array);\n</code></pre>\n"}, {"tags": ["c", "algorithm", "function", "while-loop", "do-while"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1521032193, "post_id": 49278308, "comment_id": 85559101, "body": "You don&#39;t <code>break</code> the <code>while</code> loop in the <code>if</code> case -&gt; endless loop"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1521032247, "post_id": 49278308, "comment_id": 85559136, "body": "Please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a> for future reference"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1521032494, "post_id": 49278308, "comment_id": 85559312, "body": "<code>return pos = pos + 1;</code> -&gt; <code>return pos + 1;</code> would be better"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1521032527, "post_id": 49278308, "comment_id": 85559331, "body": "<code>digitPos1</code> -&gt; It is possible to exit this function without using return"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1521032872, "post_id": 49278308, "comment_id": 85559563, "body": "@Ley Clo Are you lookung the position from the left side of a number of from the right side of a number?"}, {"owner": {"reputation": 1, "user_id": 9377012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c546626e7119803d9c121d34f2c6cc6?s=128&d=identicon&r=PG&f=1", "display_name": "Ley Clo", "link": "https://stackoverflow.com/users/9377012/ley-clo"}, "edited": false, "score": 0, "creation_date": 1521033093, "post_id": 49278308, "comment_id": 85559722, "body": "Hi All, thanks for the answers. &amp; thanks for the link above, i&#39;ll definitely use it next time"}, {"owner": {"reputation": 1, "user_id": 9377012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c546626e7119803d9c121d34f2c6cc6?s=128&d=identicon&r=PG&f=1", "display_name": "Ley Clo", "link": "https://stackoverflow.com/users/9377012/ley-clo"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1521033152, "post_id": 49278308, "comment_id": 85559761, "body": "@VladfromMoscow i&#39;m looking from the right"}, {"owner": {"reputation": 1778, "user_id": 5698740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faee64fe3fa6b806a89f84492ba6c431?s=128&d=identicon&r=PG&f=1", "display_name": "clmno", "link": "https://stackoverflow.com/users/5698740/clmno"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1521034392, "post_id": 49278308, "comment_id": 85560713, "body": "@EdHeal How is it possible to exit <code>digitPos1</code> without a return. Can you post a pastebin and share it here?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1521035168, "post_id": 49278308, "comment_id": 85561367, "body": "When <code>num</code> becomes zero"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1521034869, "last_edit_date": 1521034869, "creation_date": 1521034496, "answer_id": 49279157, "question_id": 49278308, "link": "https://stackoverflow.com/questions/49278308/returning-a-value-with-pointer-c-program/49279157#49279157", "title": "Returning a value with pointer ( C program)", "body": "<p>The both functions are invalid.</p>\n\n<p>For starters it is better to set the parameters <code>num</code> and <code>digit</code> as having the type <code>unsigned int</code>. Otherwise the functions will be more complicated. That is you will need to check whether one of the parameters or both are negative.</p>\n\n<p>Secondly the function <code>digitPos1</code> has undefined behavior because it returns nothing in case when the digit is not present in the number.</p>\n\n<p>Moreover instead of the while loop you should use a do-while loop because <code>num</code> can be set by the user to <code>0</code> and <code>0</code> is a valid number.</p>\n\n<p>This statement in the function <code>digitPos2</code></p>\n\n<pre><code>*result = 0;\n</code></pre>\n\n<p>does not make sense.</p>\n\n<p>And you have to exut the function if the digit is found</p>\n\n<pre><code>while(num)\n{\n    if(num%10 == digit)\n    {\n        pos = pos + 1;\n        *result = pos;\n        // exit the function\n    }\n    //...\n</code></pre>\n\n<p>Also it is unclear how the user can determine whether the digit is not present in the number.</p>\n\n<p>You can use an approach that returns for example <code>-1</code> in case the digit is not present in the number.</p>\n\n<p>Pay attention to that according to the C Standard the function <code>main</code> without parameters shall be declared like</p>\n\n<pre><code>int main( void )        \n</code></pre>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint digitPos1( unsigned int num, unsigned int digit);\nvoid digitPos2( unsigned int num, unsigned int digit, int *result);\n\nint main( void )\n{\n    unsigned int number, digit;\n    int result;\n\n    printf( \"Enter the number: \" );\n    scanf( \"%d\", &amp;number );\n\n    printf( \"Enter the digit: \" );\n    scanf( \"%d\", &amp;digit );\n\n    printf(\"digitPos1(): %d\\n\", digitPos1( number, digit ) );\n\n    digitPos2(number, digit, &amp;result);\n    printf( \"digitPos2(): %d\\n\", result );\n\n    return 0;\n}\n\nint digitPos1( unsigned int num, unsigned int digit )\n{\n    const unsigned int Base = 10;\n    int pos = -1;\n    int n = 0;\n\n    do\n    {\n        if ( num % Base == digit )\n        {\n            pos = n;        \n        }\n        else\n        {\n            ++n;\n        }\n\n    } while ( ( num /= Base ) &amp;&amp; ( pos == -1 ) );\n\n    return pos;\n}\n\nvoid digitPos2( unsigned int num, unsigned int digit, int *result )\n{\n    const unsigned int Base = 10;\n    int n = 0;\n\n    *result = -1;\n    do\n    {\n        if ( num % Base == digit )\n        {\n            *result = n;        \n        }\n        else\n        {\n            ++n;\n        }\n\n    } while ( ( num /= Base ) &amp;&amp; ( *result == -1 ) );\n}\n</code></pre>\n\n<p>The program output might look for example like</p>\n\n<pre><code>Enter the number: 123456\nEnter the digit: 2\ndigitPos1(): 4\ndigitPos2(): 4\n</code></pre>\n\n<p>The position startrs from 0.</p>\n"}, {"tags": [], "owner": {"reputation": 324, "user_id": 7722054, "user_type": "registered", "profile_image": "https://graph.facebook.com/1367036866716891/picture?type=large", "display_name": "Saikat Das", "link": "https://stackoverflow.com/users/7722054/saikat-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1521057056, "creation_date": 1521057056, "answer_id": 49286574, "question_id": 49278308, "link": "https://stackoverflow.com/questions/49278308/returning-a-value-with-pointer-c-program/49286574#49286574", "title": "Returning a value with pointer ( C program)", "body": "<p><strong>First of all</strong>,\nIn case the digit is not present at all you should return a index that is not possible in a real number, e.g. you can return a negative number in that case, may be <code>-1</code>. (In c/c++ indexing starts from 0 so 0 is always a valid index)</p>\n\n<p>so for <code>digitPos1(int num, int digit)</code> the ending should look like</p>\n\n<pre><code>while(num){\n    //your code\n    //return pos + 1 in case digit found\n    //more code\n}\nreturn -1;\n</code></pre>\n\n<p>similarly for <code>digitPos2(int num, int digit, int *result)</code> you should initialize <code>*result</code> with <code>-1</code></p>\n\n<pre><code>int pos=0;\n*result = -1;\n</code></pre>\n\n<p>and the biggest mistake is to set <code>*result=0</code> at the end. To understand this you should understand that while dealing with pointers, every change you make to the pointers value is reflected in the callee function also, so if you set <code>*result=0</code> then all the previous computation is just wasted and the position is returned blindly as <code>0</code>. So you MUST remove this line for your computations to reflect back in the main function.</p>\n\n<p><strong>Secondly</strong>,\nI don't think you have considered the cases of duplicates, e.g.</p>\n\n<pre><code>num : 1232323\ndigit : 3 \n</code></pre>\n\n<p>Here, ideally you should break or return after you have found the match in case of <code>digitPos2</code></p>\n\n<pre><code>*result = pos;\nreturn; //return type is void\n</code></pre>\n\n<p>This changes should give expected behaviour according to me.</p>\n"}], "owner": {"reputation": 1, "user_id": 9377012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c546626e7119803d9c121d34f2c6cc6?s=128&d=identicon&r=PG&f=1", "display_name": "Ley Clo", "link": "https://stackoverflow.com/users/9377012/ley-clo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521057056, "creation_date": 1521032071, "last_edit_date": 1521035304, "question_id": 49278308, "link": "https://stackoverflow.com/questions/49278308/returning-a-value-with-pointer-c-program", "title": "Returning a value with pointer ( C program)", "body": "<p>I'm a beginner in C and below is a program to find the position of a given digit. My first function works but i can't say the same for the 2nd one(digitPos2) that returns the value from a pointer. I'm not sure what is wrong and why.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint digitPos1(int num, int digit);\nvoid digitPos2(int num, int digit, int *result);\nint main()\n{\n int number, digit, result=0;\n printf(\"Enter the number: \\n\");\n scanf(\"%d\", &amp;number);\n printf(\"Enter the digit: \\n\");\n scanf(\"%d\", &amp;digit);\n printf(\"digitPos1(): %d\\n\", digitPos1(number, digit));\n digitPos2(number, digit, &amp;result);\n printf(\"digitPos2(): %d\\n\", result);\n main();//return 0;\n}\nint digitPos1(int num, int digit)\n{\n    int pos=0;\n    while(num)\n    {\n        if(num%10 == digit)\n        {\n            return pos = pos + 1;\n        }\n        else\n        {\n            pos++;\n            num = num/10;\n        }\n    }\n}\nvoid digitPos2(int num, int digit, int *result)\n{\n    int pos=0;\n    while(num)\n    {\n        if(num%10 == digit)\n        {\n            pos = pos + 1;\n            *result = pos;\n        }\n        else\n        {\n            pos++;\n            num = num/10;\n        }\n    }\n    *result = 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/rTleD.png\" rel=\"nofollow noreferrer\">Output</a></p>\n"}, {"tags": ["c", "string", "pointers", "char", "printf"], "comments": [{"owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "edited": false, "score": 1, "creation_date": 1521031815, "post_id": 49278209, "comment_id": 85558829, "body": "so use %c instead, and another *"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1521032014, "post_id": 49278209, "comment_id": 85558978, "body": "the compiler should warn you for this."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1521032063, "post_id": 49278209, "comment_id": 85559007, "body": "@Jean-Fran&#231;oisFabre Why? What for?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 2, "creation_date": 1521032301, "post_id": 49278209, "comment_id": 85559172, "body": "This is not a good duplicate for that question..."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1521032339, "post_id": 49278209, "comment_id": 85559207, "body": "@Jean-Fran&#231;oisFabre: this may well be a duplicate, but the linked duplicate doesn&#39;t look anywhere near correct ?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1521033429, "post_id": 49278209, "comment_id": 85559970, "body": "ok, now I&#39;ve re-read the question. Not a duplicate of that, I admit. fast lane reopen :) (but the answers are already there, mind)"}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 6853827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xD86e.png?s=128&g=1", "display_name": "sarkasronie", "link": "https://stackoverflow.com/users/6853827/sarkasronie"}, "reply_to_user": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1521032173, "post_id": 49278254, "comment_id": 85559089, "body": "Thank you... tipped too fast :)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1521033598, "post_id": 49278254, "comment_id": 85560084, "body": "you could elaborate more on <i>how</i> you have to use <code>%c</code>"}], "tags": [], "owner": {"reputation": 315, "user_id": 6853827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xD86e.png?s=128&g=1", "display_name": "sarkasronie", "link": "https://stackoverflow.com/users/6853827/sarkasronie"}, "is_accepted": false, "score": 3, "last_activity_date": 1521032156, "last_edit_date": 1521032156, "creation_date": 1521031893, "answer_id": 49278254, "question_id": 49278209, "link": "https://stackoverflow.com/questions/49278209/how-to-access-a-character-in-a-character-array/49278254#49278254", "title": "How to access a character in a character array", "body": "<p>Use %c:</p>\n\n<pre><code>printf(\"%c\", *(*(name+2)+7));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17191, "user_id": 6556397, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6dac24fc88d8fd209ad18390f8ae8ba1?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/6556397/rahul"}, "is_accepted": false, "score": 1, "last_activity_date": 1521032053, "creation_date": 1521032053, "answer_id": 49278305, "question_id": 49278209, "link": "https://stackoverflow.com/questions/49278209/how-to-access-a-character-in-a-character-array/49278305#49278305", "title": "How to access a character in a character array", "body": "<p>You can use simple trick as follows,</p>\n\n<pre><code>printf(\"%c\", name[2][7]);\n</code></pre>\n\n<p>And as you want character, you should use <code>%c</code>.<br>\nHere is working <a href=\"https://onlinegdb.com/SyW_sc8FG\" rel=\"nofollow noreferrer\">demo</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521032248, "post_id": 49278318, "comment_id": 85559137, "body": "&quot; function main without parameters shall be declared like int main( void )&quot;  Or in some implementation-defined manner. That is, if you are assuming hosted implementation. On a freestanding implementation, the form of main is always implementation-defined."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 4, "last_activity_date": 1521032479, "last_edit_date": 1521032479, "creation_date": 1521032094, "answer_id": 49278318, "question_id": 49278209, "link": "https://stackoverflow.com/questions/49278209/how-to-access-a-character-in-a-character-array/49278318#49278318", "title": "How to access a character in a character array", "body": "<p>For starters you do not have a character array. You have an array of pointers. Also it would be better to declare the type of array elements like</p>\n\n<pre><code>const char *\n</code></pre>\n\n<p>because string literals are immutable in C.</p>\n\n<p>And instead of the <code>%s</code> specifier you need to use the specifier <code>%c</code> to output just a character.</p>\n\n<p>A simple and clear way to output the target character of the third element of the array is</p>\n\n<pre><code>printf(\"%c\", name[2][7]);\n</code></pre>\n\n<p>Or using the pointer arithmetic you can write</p>\n\n<pre><code>printf(\"%c\", *(*( name + 2 )+7 ) );\n</code></pre>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    const char *name[] = \n    { \n        \"hello\" , \"world\" , \"helloworld\" \n\n    };\n\n    printf( \"%c\\n\", *( * ( name + 2 ) + 7 ) );\n    printf( \"%c\\n\", name[2][7] );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>r\nr\n</code></pre>\n\n<p>Take into account that according to the C Standard the function <code>main</code> without parameters shall be declared like</p>\n\n<pre><code>int main( void )\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 9489797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/322f07f784ad54bb3c39895485967f5a?s=128&d=identicon&r=PG&f=1", "display_name": "Prayas Bansal", "link": "https://stackoverflow.com/users/9489797/prayas-bansal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1521033437, "creation_date": 1521031755, "last_edit_date": 1521032634, "question_id": 49278209, "link": "https://stackoverflow.com/questions/49278209/how-to-access-a-character-in-a-character-array", "title": "How to access a character in a character array", "body": "<pre><code>#include&lt; stdio.h&gt;\n\nint main()\n{\n    char *name[] = { \"hello\" , \"world\" , \"helloworld\" };    /* character array */       \n    printf(\"%s\", (*(name+2)+7));\n    return 0;\n}\n</code></pre>\n\n<p>The above code prints out \"rld\". I wants to print only \"r\".</p>\n"}, {"tags": ["c", "openmp", "pragma"], "comments": [{"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1521034721, "post_id": 49278188, "comment_id": 85560962, "body": "Short answer: No you can&#39;t. Longer one: well you could do something of this kind, but why would you want to do that? (hint: this is likely to be a bad idea)"}, {"owner": {"reputation": 50, "user_id": 4758192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec67ca4c0a72ede5c2e00b045ba87b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Hristov", "link": "https://stackoverflow.com/users/4758192/peter-hristov"}, "reply_to_user": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1521034874, "post_id": 49278188, "comment_id": 85561110, "body": "@Gilles The point is I saw it in someone else&#39;s code. That code produces the correct result, so it made me think. Moreover why is it printing 0?"}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1521035410, "post_id": 49278188, "comment_id": 85561554, "body": "So what do you expect as answer? An example of your code printing the right value without using the <code>reduction</code> clause?"}, {"owner": {"reputation": 50, "user_id": 4758192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec67ca4c0a72ede5c2e00b045ba87b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Hristov", "link": "https://stackoverflow.com/users/4758192/peter-hristov"}, "reply_to_user": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1521036206, "post_id": 49278188, "comment_id": 85562167, "body": "@Gilles More specifically one using private if possible. Thanks!"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1521040046, "post_id": 49278188, "comment_id": 85564983, "body": "There are several ways to do a reduction by hand <a href=\"https://stackoverflow.com/q/35675466/2542702\">stackoverflow.com/q/35675466/2542702</a>. I think it&#39;s a very useful exercise to go through for educational purposes. Especially in cases where operations don&#39;t commute which the <code>reduction</code> clause does not support."}, {"owner": {"reputation": 50, "user_id": 4758192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec67ca4c0a72ede5c2e00b045ba87b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Hristov", "link": "https://stackoverflow.com/users/4758192/peter-hristov"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1521101996, "post_id": 49278188, "comment_id": 85591006, "body": "@Zboson Looks like a useful read. I will go through it. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1521059833, "post_id": 49281081, "comment_id": 85577465, "body": "Among the problems solved for you by reduction clause is the question of efficient accumulation of individual thread sums (for example, by a tree method to get a little parallelism)."}, {"owner": {"reputation": 50, "user_id": 4758192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec67ca4c0a72ede5c2e00b045ba87b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Hristov", "link": "https://stackoverflow.com/users/4758192/peter-hristov"}, "edited": false, "score": 0, "creation_date": 1521101690, "post_id": 49281081, "comment_id": 85590863, "body": "That makes sense. I will go through the original code (the one mentioned in previous comments) again to try and find what exactly is going on. It uses #pragma omp parallel for private... and no critical. I understand the principle of operation for each construct separately, just need to piece them together."}], "tags": [], "owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "is_accepted": true, "score": 4, "last_activity_date": 1521039690, "creation_date": 1521039690, "answer_id": 49281081, "question_id": 49278188, "link": "https://stackoverflow.com/questions/49278188/private-variables-vs-reduction-in-omp/49281081#49281081", "title": "private variables vs reduction in OMP", "body": "<p>So yes, you can do reductions without the <code>reduction</code> clause. But that has a few downsides that you have to understand:</p>\n\n<ol>\n<li>You have to do things by hand, which is more error-prone:\n\n<ul>\n<li>declare local variables to store local accumulations;</li>\n<li>initialize them correctly;</li>\n<li>accumulate into them;</li>\n<li>do the final reduction in the initial variable using a <code>critical</code> construct.</li>\n</ul></li>\n<li>This is harder to understand and maintain</li>\n<li>This is potentially less effective...</li>\n</ol>\n\n<p>Anyway, here is an example of that using your code:</p>\n\n<pre><code>int main() {\n   int i, A[10000]={...};\n   double ave = 0.0;\n   double localAve;\n\n   #pragma omp parallel private( i, localAve )\n   {\n       localAve = 0;\n       #pragma omp for\n       for( i = 0; i &lt; 10000; i++ ) {\n           localAve += A[i];\n       }\n       #pragma omp critical\n       ave += localAve;\n   }\n\n   ave /= 10000;\n\n   printf(\"Average value = %0.4f\\n\",ave);\n   return 0;\n}\n</code></pre>\n\n<p>This is a classical method for doing reductions by hand, but notice that the variable that would have been declared <code>reduction</code> isn't declared <code>private</code> here. What becomes <code>private</code> is a local substitute of this variable while the global one must remain <code>shared</code>.</p>\n"}], "owner": {"reputation": 50, "user_id": 4758192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec67ca4c0a72ede5c2e00b045ba87b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Hristov", "link": "https://stackoverflow.com/users/4758192/peter-hristov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1399, "favorite_count": 0, "accepted_answer_id": 49281081, "answer_count": 1, "score": 1, "last_activity_date": 1521039690, "creation_date": 1521031696, "question_id": 49278188, "link": "https://stackoverflow.com/questions/49278188/private-variables-vs-reduction-in-omp", "title": "private variables vs reduction in OMP", "body": "<p>I am trying to understand how OMP treats different <code>for</code> loop declarations. I have:</p>\n\n<pre><code>int main()\n{\n   int i, A[10000]={...};\n   double ave = 0.0;\n   #pragma omp parallel for reduction(+:ave)\n   for(i=0;i&lt;10000;i++){\n       ave += A[i];\n   }\n\n   ave /= 10000;\n\n   printf(\"Average value = %0.4f\\n\",ave);\n   return 0;\n}\n</code></pre>\n\n<p>where <code>{...}</code> are the numbers form 1 to 10000. This code prints the correct value. If instead of <code>#pragma omp parallel for reduction(+:ave)</code> I use <code>#pragma omp parallel for private(ave)</code> the result of the <code>printf</code> is <code>0.0000</code>. I think I understand what <code>reduction(oper:list)</code> does, but was wondering if it can be substituted for <code>private</code> and how.</p>\n"}, {"tags": ["c", "sql-server", "database", "precompile", "embedded-sql"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1521031586, "post_id": 49278114, "comment_id": 85558686, "body": "<code>DBName AS SystemDBConnection</code> is the syntax for a synonym: the left will be known too AS the right part."}, {"owner": {"reputation": 1, "user_id": 9491383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d05f927362e894bbde5b64f7ec94825?s=128&d=identicon&r=PG&f=1", "display_name": "Flynn", "link": "https://stackoverflow.com/users/9491383/flynn"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1521034306, "post_id": 49278114, "comment_id": 85560638, "body": "Is this synonym anywhere defined or can it be a free form text?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1521035313, "post_id": 49278114, "comment_id": 85561477, "body": "This <b>is</b> the definition of the synonym."}], "owner": {"reputation": 1, "user_id": 9491383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d05f927362e894bbde5b64f7ec94825?s=128&d=identicon&r=PG&f=1", "display_name": "Flynn", "link": "https://stackoverflow.com/users/9491383/flynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521031419, "creation_date": 1521031419, "question_id": 49278114, "link": "https://stackoverflow.com/questions/49278114/what-is-systemdbconnection", "title": "What is &quot;SystemDBConnection&quot;", "body": "<p>I've to fix a problem in an old ANSI C program witch make use of Microsoft Embedded Precompiler (nsqlprep).\nI come across the following line of code:</p>\n\n<pre><code>EXEC SQL CONNECT TO :DBName AS SystemDBConnection USER :DBLogin;\n</code></pre>\n\n<p>In the source it isn't defined, so I've searched for <code>SystemDBConnection</code> with Google but can't find anything about it.</p>\n\n<p>Does anyone know what <code>SystemDBConnection</code> is?</p>\n"}, {"tags": ["c", "windows", "mingw"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1521031558, "post_id": 49278097, "comment_id": 85558671, "body": "No, the IDE is irrelevant since it is not the IDE which compiles and executes the program. The problem, if there is any, is with the <i>compiler</i>. So please tell us which compiler you are using, and which flags you have specified for it (in short, please edit your question to include the <code>CMakeLists.txt</code> file as well, and the output of e.g. <code>gcc --version</code> if you use GCC)."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 3, "creation_date": 1521033160, "post_id": 49278097, "comment_id": 85559769, "body": "Is this on Windows with MinGW gcc? I have this vague memory that there was some problem using <code>long double</code> on MinGW because it uses Microsoft libraries."}, {"owner": {"reputation": 51, "user_id": 9149171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e6539abe8f09d46d7c8c1b448504ac1?s=128&d=identicon&r=PG&f=1", "display_name": "zan", "link": "https://stackoverflow.com/users/9149171/zan"}, "edited": false, "score": 0, "creation_date": 1521034110, "post_id": 49278097, "comment_id": 85560498, "body": "Yes, but how can I solve this problem? thanks"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1521037337, "post_id": 49278097, "comment_id": 85562948, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1764350/conversion-specifier-of-long-double-in-c\">Conversion specifier of long double in C</a>"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1521039351, "post_id": 49278097, "comment_id": 85564424, "body": "The last line looks fine to me, and it prints <code>0.000053 can be written 5.320000e-05</code> under my compiler and C library.  I conclude there&#39;s something wrong with yours."}, {"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 0, "creation_date": 1521136343, "post_id": 49278097, "comment_id": 85614480, "body": "That&#39;s a problem with mingw."}], "owner": {"reputation": 51, "user_id": 9149171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e6539abe8f09d46d7c8c1b448504ac1?s=128&d=identicon&r=PG&f=1", "display_name": "zan", "link": "https://stackoverflow.com/users/9149171/zan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1521034503, "creation_date": 1521031325, "last_edit_date": 1521034503, "question_id": 49278097, "link": "https://stackoverflow.com/questions/49278097/about-lf-and-le-can-not-print-rightly", "title": "about %Lf and %Le can not print rightly", "body": "<p>I ran a program like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n{\nfloat aboat = 32000.0;\ndouble abet = 2.14e9;\nlong double dip =5.32e-5;\n\nprintf(\"%f can be written %e\\n\",aboat,aboat);\nprintf(\"And it's %a in hexadecimal, powers of 2 notation\\n\",aboat);\nprintf(\"%f can be written %e\\n\",abet, abet);\nprintf(\"%Lf can be written %Le\\n\",dip,dip);\n                      \\\\ this statement can not print rightly \nreturn 0;\n}\n</code></pre>\n\n<p>but it print like this :</p>\n\n<pre><code>32000.000000 can be written 3.200000e+004\nAnd it's 0x1.f40000p+14 in hexadecimal, powers of 2 notation\n2140000000.000000 can be written 2.140000e+009\n-1950228512509697500000000000000000000000000000000000000000000000000000000000\n000000000000000000000000000000000000000000000000000000000000000000000000000.0\n00000 can be written 272.500183\n</code></pre>\n\n<p>as you can see , this result must be  incorrect. but I can not find error, so is it a bug attribute to IDE ? I use JetBrains CLion 2017.3.4.</p>\n\n<p>thanks for remind.this is my CMakeList.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.9)\nproject(untitled1 C)\n\nset(CMAKE_C_STANDARD 11)\n\nadd_executable(untitled1 main.c)\n</code></pre>\n\n<p>And the gcc version is 6.3.0</p>\n"}, {"tags": ["c", "file-io", "raspberry-pi", "segmentation-fault", "i2c"], "comments": [{"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1521029300, "post_id": 49277375, "comment_id": 85557103, "body": "Am I overseeing something, or do you open a file that has already been opened with <code>focat=fopen(&quot;fcatdata.csv&quot;, &quot;a+&quot;)</code> and not closed in between?"}, {"owner": {"reputation": 3, "user_id": 6470290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379a02758775f573fb6cf72ed0a60601?s=128&d=identicon&r=PG&f=1", "display_name": "Desktop", "link": "https://stackoverflow.com/users/6470290/desktop"}, "reply_to_user": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1521029352, "post_id": 49277375, "comment_id": 85557135, "body": "Correct, I open the file outside of the loop and leave it open to be appended to at each iteration.  The alternative method which I tried is closing the file prior to the loop and then  &gt; open  &gt; write  &gt; close"}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 1, "creation_date": 1521029405, "post_id": 49277375, "comment_id": 85557170, "body": "What&#39;s in <code>read_eeprom</code>?"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1521029441, "post_id": 49277375, "comment_id": 85557195, "body": "But in the loop you then write <code>focat=fopen(&quot;fcatdata.csv&quot;, &quot;a&quot;);</code> without having closed it before, right?"}, {"owner": {"reputation": 3, "user_id": 6470290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379a02758775f573fb6cf72ed0a60601?s=128&d=identicon&r=PG&f=1", "display_name": "Desktop", "link": "https://stackoverflow.com/users/6470290/desktop"}, "edited": false, "score": 0, "creation_date": 1521029631, "post_id": 49277375, "comment_id": 85557339, "body": "In the case where I open the file within the loop I also comment out the previous file open which is before the loop."}, {"owner": {"reputation": 3, "user_id": 6470290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379a02758775f573fb6cf72ed0a60601?s=128&d=identicon&r=PG&f=1", "display_name": "Desktop", "link": "https://stackoverflow.com/users/6470290/desktop"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1521029941, "post_id": 49277375, "comment_id": 85557542, "body": "@Mat I have added info on <code>read_eeprom</code> as requested"}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 2, "creation_date": 1521030122, "post_id": 49277375, "comment_id": 85557668, "body": "That&#39;s where your FD leak is. wiringPiI2CSetup opens a file descriptor."}, {"owner": {"reputation": 3, "user_id": 6470290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379a02758775f573fb6cf72ed0a60601?s=128&d=identicon&r=PG&f=1", "display_name": "Desktop", "link": "https://stackoverflow.com/users/6470290/desktop"}, "edited": false, "score": 0, "creation_date": 1521030242, "post_id": 49277375, "comment_id": 85557758, "body": "Wow, it was right under my nose the whole time...  How can I overcome this? Would <code>fflush(xio);</code> work?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1521030484, "post_id": 49277375, "comment_id": 85557913, "body": "Clean solution: separate init of and read from EEPROM. Quick &amp; dirty but not recommended: make <code>static int xio = 0; if (!xio) xio = wiringPiI2CSetup (address);</code>. Of course, I assume that <code>wiringPiI2CSetup (address)</code> does not return <code>0</code> in regular case. Otherwise, an additional <code>static int inited</code> flag would help."}, {"owner": {"reputation": 3, "user_id": 6470290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379a02758775f573fb6cf72ed0a60601?s=128&d=identicon&r=PG&f=1", "display_name": "Desktop", "link": "https://stackoverflow.com/users/6470290/desktop"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1521033013, "post_id": 49277375, "comment_id": 85559667, "body": "@scheff I managed to solve using close(fd1) at the end. Is this an efficient solution?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6470290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379a02758775f573fb6cf72ed0a60601?s=128&d=identicon&r=PG&f=1", "display_name": "Desktop", "link": "https://stackoverflow.com/users/6470290/desktop"}, "edited": false, "score": 0, "creation_date": 1521043097, "post_id": 49281947, "comment_id": 85567336, "body": "Awesome! Thanks for that, could you explain which would be better in terms of efficiency?"}, {"owner": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "reply_to_user": {"reputation": 3, "user_id": 6470290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379a02758775f573fb6cf72ed0a60601?s=128&d=identicon&r=PG&f=1", "display_name": "Desktop", "link": "https://stackoverflow.com/users/6470290/desktop"}, "edited": false, "score": 0, "creation_date": 1521045499, "post_id": 49281947, "comment_id": 85569061, "body": "Theoretically, opening it once should be faster.  In practice, it may not matter which way you do it. The only way to know it to perhaps try both ways, set a specific number of total calls to the <code>read_eeprom</code> routine (10,000 or some such), and then use <code>time exename</code> on the UNIX prompt and see if it show any performance difference when you run it."}, {"owner": {"reputation": 3, "user_id": 6470290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379a02758775f573fb6cf72ed0a60601?s=128&d=identicon&r=PG&f=1", "display_name": "Desktop", "link": "https://stackoverflow.com/users/6470290/desktop"}, "edited": false, "score": 0, "creation_date": 1521046499, "post_id": 49281947, "comment_id": 85569735, "body": "Great, I&#39;ll try that. Thanks for your help @JohnH."}], "tags": [], "owner": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "is_accepted": true, "score": 0, "last_activity_date": 1521042759, "last_edit_date": 1521042759, "creation_date": 1521041887, "answer_id": 49281947, "question_id": 49277375, "link": "https://stackoverflow.com/questions/49277375/c-segfault-at-1021-iterations-and-unable-to-open-i2c-at-1020-iterations/49281947#49281947", "title": "C - segfault at 1021 iterations and unable to open i2c at 1020 iterations", "body": "<p>You need to only call <code>wiringPiI2CSetup()</code> once in the process.  One way this can be achieved by using a static variable for <code>xio</code> so that it will retain the value between calls:</p>\n\n<pre><code>int read_eeprom(unsigned char address)\n{\n    int i, value;\n    static int xio = -1;\n\n    if( xio == -1 ) {\n       xio = wiringPiI2CSetup (address);\n       if (xio &lt; 0) {\n           fprintf (stderr, \"xio: Can't initialise I2C: %s\\n\",\n                    strerror (errno));\n           return 1;\n       }\n    }\n\n    for(i=0; i &lt;128; i++) {\n        value = wiringPiI2CReadReg8 (xio,i);\n        if( value &gt; 0 ) {\n            if (address == 0x50)\n                A50[i] = value;\n            else \n                A51[i] = value;\n        }\n        else {\n            fprintf (stderr, \"xio: Can't read i2c address 0x%x: %s\\n\",\n                     address, strerror (errno));\n            return 1;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Another way would be to call <code>wiringPiI2CSetup()</code> each time you enter the routune, but then to close it between each call:</p>\n\n<pre><code>int read_eeprom(unsigned char address)\n{\n    int xio, i, value;\n    xio = wiringPiI2CSetup (address);\n    if (xio &lt; 0) {\n       fprintf (stderr, \"xio: Can't initialise I2C: %s\\n\",\n                strerror (errno));\n       return 1;\n    }\n\n    for(i=0; i &lt;128; i++) {\n        value = wiringPiI2CReadReg8 (xio,i);\n        if( value &gt; 0 ) {\n            if (address == 0x50)\n                A50[i] = value;\n            else \n                A51[i] = value;\n        }\n        else {\n            fprintf (stderr, \"xio: Can't read i2c address 0x%x: %s\\n\",\n                     address, strerror (errno));\n            close(xio);\n            return 1;\n        }\n    }\n    close(xio);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "edited": false, "score": 0, "creation_date": 1521042231, "post_id": 49281950, "comment_id": 85566643, "body": "Actually, <code>xio</code> is the file descriptor returned.  Your <code>fd1</code> variable is the value read, and calling <code>close()</code>  on it doesn&#39;t make sense based on the spec of the WiringPi library.  Calling <code>close(xio)</code> would make some sense, tho.  <a href=\"https://github.com/WiringPi/WiringPi/blob/master/wiringPi/wiringPiI2C.c\" rel=\"nofollow noreferrer\">code for WiringPi is here</a>"}, {"owner": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "edited": false, "score": 0, "creation_date": 1521042653, "post_id": 49281950, "comment_id": 85566980, "body": "The only reason it &quot;works&quot; for you is the values read from your interface are in the range of a <code>uint8_t</code> (i.e. 0-255) and file descriptors share some of the number range, so you are closing random fds in that range, and this luckily keeps you from running out of fds."}, {"owner": {"reputation": 3, "user_id": 6470290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379a02758775f573fb6cf72ed0a60601?s=128&d=identicon&r=PG&f=1", "display_name": "Desktop", "link": "https://stackoverflow.com/users/6470290/desktop"}, "reply_to_user": {"reputation": 2653, "user_id": 3515931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c0edddc6a265a0a22058bb2343328d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnH", "link": "https://stackoverflow.com/users/3515931/johnh"}, "edited": false, "score": 0, "creation_date": 1521043206, "post_id": 49281950, "comment_id": 85567417, "body": "@JohnH that makes a lot of sense, so it was just luck then!"}], "tags": [], "owner": {"reputation": 3, "user_id": 6470290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379a02758775f573fb6cf72ed0a60601?s=128&d=identicon&r=PG&f=1", "display_name": "Desktop", "link": "https://stackoverflow.com/users/6470290/desktop"}, "is_accepted": false, "score": 0, "last_activity_date": 1521041896, "creation_date": 1521041896, "answer_id": 49281950, "question_id": 49277375, "link": "https://stackoverflow.com/questions/49277375/c-segfault-at-1021-iterations-and-unable-to-open-i2c-at-1020-iterations/49281950#49281950", "title": "C - segfault at 1021 iterations and unable to open i2c at 1020 iterations", "body": "<p>Solved by adding <code>close(fd1);</code> at the end of <code>read_eeprom</code> as follows:</p>\n\n<pre><code>int read_eeprom(unsigned char address)\n{\n    int xio,i,fd1;\n    xio = wiringPiI2CSetup (address);\n    if (xio &lt; 0) \n    {\n        fprintf (stderr, \"xio: Can't initialise I2C: %s\\n\",\n                 strerror (errno));\n        return 1;\n    }\n    //loop through addresses and extract data from eeprom\n    for(i=0; i &lt;128; i++) \n        {\n        fd1 = wiringPiI2CReadReg8 (xio,i);\n        if  (address == 0x50) \n            {\n                A50[i] = fd1;\n            }\n        else \n            {\n                A51[i] = fd1;\n            }\n        if (fd1 &lt;0) \n            {\n                fprintf (stderr, \"xio: Can't read i2c address 0x%x: %s\\n\",\n                         address, strerror (errno));\n                return 1;\n            }\n        }\n    //close fd1 to prevent segfault and \"too many files open\" errors\n    close(fd1);\n    return 0;\n}\n</code></pre>\n\n<p>Credits to @Mat for identifying the <strong><em>FD leak</em></strong></p>\n"}], "owner": {"reputation": 3, "user_id": 6470290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379a02758775f573fb6cf72ed0a60601?s=128&d=identicon&r=PG&f=1", "display_name": "Desktop", "link": "https://stackoverflow.com/users/6470290/desktop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 1, "accepted_answer_id": 49281947, "answer_count": 2, "score": 0, "last_activity_date": 1521046600, "creation_date": 1521029105, "last_edit_date": 1592644375, "question_id": 49277375, "link": "https://stackoverflow.com/questions/49277375/c-segfault-at-1021-iterations-and-unable-to-open-i2c-at-1020-iterations", "title": "C - segfault at 1021 iterations and unable to open i2c at 1020 iterations", "body": "<p>Hi I'm having an issue continuously recording data to a .csv file using the following script</p>\n<pre><code>    int ddm(void)\n{   \n//  96 Temp MSB,    97 Temp LSB,    98 Vcc MSB,     99 Vcc LSB\n//  100 TX_BIA MSB, 101 TX_BIA LSB,\n//  102 TX MSB,     103 TX LSB,     104 RX MSB,     105 RX LSB\n    \n    FILE *focat;\n    float temperature, vcc, tx_bias, optical_tx, optical_rx, RAW_tx, RAW_rx;\n    char temp[10], vccc[10], txbi[10], optx[10], oprx[10], rwtx[30], rwrx[30];\n    int i;\n    //Open (or create) the csv file and write the heading row\n    focat=fopen(&quot;fcatdata.csv&quot;, &quot;w&quot;);\n    \n        if(focat == NULL)\n        {\n                printf(&quot;error openining file\\n&quot;);\n                exit(1);\n        }\n    fprintf(focat,&quot;Temp, Vcc, Tx_Bias, Tx, Rx, RAWTx, RAWRx\\n&quot;);\n    fclose(focat);\n    focat=fopen(&quot;fcatdata.csv&quot;, &quot;a+&quot;);\n    i=0;\n    //start infinite loop\n    for(;;) \n    {\n    if(!read_eeprom(0x51));\n    else exit(EXIT_FAILURE);\n    i=i+1;\n\n    //Taking MSB and LSB data and converting\n    temperature =  (A51[96]+(float) A51[97]/256);\n    vcc =                   (float)(A51[98]&lt;&lt;8  | A51[99])  * 0.0001;\n    tx_bias =               (float)(A51[100]&lt;&lt;8 | A51[101]) * 0.002;\n    optical_tx = 10 * log10((float)(A51[102]&lt;&lt;8 | A51[103]) * 0.0001);\n    optical_rx = 10 * log10((float)(A51[104]&lt;&lt;8 | A51[105]) * 0.0001);\n    \n    RAW_tx =               ((float)(A51[102]&lt;&lt;8 | A51[103]) * 0.0001);\n    RAW_rx =               ((float)(A51[104]&lt;&lt;8 | A51[105]) * 0.0001);\n    \n    //Display Diagnostics Monitoring Data in Terminal\n    printf (&quot;SFP Temperature = %4.4fC\\n&quot;, temperature);\n    printf (&quot;Vcc, Internal supply = %4.4fV\\n&quot;, vcc);\n    printf (&quot;TX bias current = %4.4fmA\\n&quot;, tx_bias);\n    printf (&quot;Tx, Optical Power = %4.4f dBm&quot;, optical_tx);\n    printf (&quot;, %6.6f mW\\n&quot;, RAW_tx);\n    printf (&quot;Rx, Optical Power = %4.4f dBm&quot;, optical_rx);\n    printf (&quot;, %6.6f mW\\n&quot;, RAW_rx);\n    printf (&quot;iteration %d \\n&quot;, i);\n   \n    //Change the integers into strings for appending to file\n    sprintf(temp, &quot;%4.4f&quot;, temperature);\n    sprintf(vccc, &quot;%4.4f&quot;, vcc);\n    sprintf(txbi, &quot;%4.4f&quot;, tx_bias);\n    sprintf(optx, &quot;%4.4f&quot;, optical_tx);\n    sprintf(oprx, &quot;%4.4f&quot;, optical_rx);\n    sprintf(rwtx, &quot;%6.6f&quot;, RAW_tx);\n    sprintf(rwrx, &quot;%6.6f&quot;, RAW_rx);\n    \n    //Appends DDM Data into a new row of a csv file\n    //focat=fopen(&quot;fcatdata.csv&quot;, &quot;a&quot;);\n    fprintf(focat, &quot;%s,%s,%s,%s,%s,%s,%s\\n&quot;,temp,vccc,txbi,optx,oprx,rwtx,rwrx);\n    //fclose(focat);\n\n    }\n        \n    fclose(focat);\n    return 0;\n    }\n</code></pre>\n<p>When I have the code set up to open the .csv file prior to entering the loop I get the following error on the 1020th iteration:</p>\n<blockquote>\n<p>SFP Temperature = 31.9258C</p>\n<p>Vcc, Internal supply = 3.1374V</p>\n<p>TX bias current = 8.0540mA</p>\n<p>Tx, Optical Power = -1.8006 dBm, 0.660600 mW</p>\n<p>Rx, Optical Power = -40.0000 dBm, 0.000100 mW</p>\n<p><strong>Unable to open I2C device: Too many open files</strong></p>\n</blockquote>\n<p>When i change the comments towards the bottom of the code so it reads as follows:</p>\n<pre><code>//Appends DDM Data into a new row of a csv file\nfocat=fopen(&quot;fcatdata.csv&quot;, &quot;a&quot;);\nfprintf(focat, &quot;%s,%s,%s,%s,%s,%s,%s\\n&quot;,temp,vccc,txbi,optx,oprx,rwtx,rwrx);\nfclose(focat);\n</code></pre>\n<p>and then also comment out the file open prior to the loop, I am subsequently presented with the following fault on the 1021st loop iteration:</p>\n<blockquote>\n<p>SFP Temperature = 31.8906C</p>\n<p>Vcc, Internal supply = 3.1372V</p>\n<p>TX bias current = 8.0620mA</p>\n<p>Tx, Optical Power = -1.8006 dBm, 0.660600 mW</p>\n<p>Rx, Optical Power = -40.0000 dBm, 0.000100 mW</p>\n<p><strong>Segmentation fault</strong></p>\n</blockquote>\n<p>I think this related somehow to <code>ulimit - n</code> showing a result of <code>1024</code> but i need to be able to run this script continuously for a week and therefore changing ulimit isnt a real solution for the problem.</p>\n<p>I tested this theory by making a script which loops endlessly and appends the integer i to a csv file and that reached far beyond 1021 rows of data. This has been bothering me for a week now. Any help is appreciated.</p>\n<p>Criticism on formatting etc it welcome, I don't often post here (or anywhere for that matter)</p>\n<hr />\n<pre><code>int read_eeprom(unsigned char address)\n{\n    int xio,i,fd1;\n    xio = wiringPiI2CSetup (address);\n    if (xio &lt; 0) \n    {\n        fprintf (stderr, &quot;xio: Can't initialise I2C: %s\\n&quot;,\n                 strerror (errno));\n        return 1;\n    }\n    for(i=0; i &lt;128; i++) \n        {\n\n        fd1 = wiringPiI2CReadReg8 (xio,i);\n        if  (address == 0x50) \n            {\n                A50[i] = fd1;\n            }\n        else \n            {\n                A51[i] = fd1;\n            }\n        if (fd1 &lt;0) \n            {\n                fprintf (stderr, &quot;xio: Can't read i2c address 0x%x: %s\\n&quot;,\n                         address, strerror (errno));\n                return 1;\n            }\n        }\n    return 0;\n}\n</code></pre>\n<p><strong>Edit 1:</strong> clarified the two scenarios where the file is opened and closed</p>\n<p><strong>Edit 2:</strong> added info on what is in <code>read_eeprom</code></p>\n<p><strong>Edit 3:</strong> solved by adding <code>close(fp);</code> at the end of <code>read_eeprom</code></p>\n<p><strong>Edit 4:</strong> solved <em>properly</em> by adding <code>close(xio);</code> at the end of <code>read_eeprom</code> - Credits to @JohnH</p>\n"}, {"tags": ["c", "arrays", "json", "integer"], "comments": [{"owner": {"reputation": 12857, "user_id": 4802649, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e3863cbe82a27e2480b7a969af49fe1f?s=128&d=identicon&r=PG", "display_name": "Phiter", "link": "https://stackoverflow.com/users/4802649/phiter"}, "edited": false, "score": 0, "creation_date": 1521027423, "post_id": 49276718, "comment_id": 85555834, "body": "What errors? Can you try being more specific? Also you didn&#39;t add the language you&#39;re using in the tags."}, {"owner": {"reputation": 263, "user_id": 2814715, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c61103a49d9cdffba48d6e034a35955b?s=128&d=identicon&r=PG&f=1", "display_name": "wuampa", "link": "https://stackoverflow.com/users/2814715/wuampa"}, "reply_to_user": {"reputation": 12857, "user_id": 4802649, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e3863cbe82a27e2480b7a969af49fe1f?s=128&d=identicon&r=PG", "display_name": "Phiter", "link": "https://stackoverflow.com/users/4802649/phiter"}, "edited": false, "score": 0, "creation_date": 1521027943, "post_id": 49276718, "comment_id": 85556169, "body": "Sorry, I have edited the thread to provide more information"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1521028641, "post_id": 49276718, "comment_id": 85556647, "body": "Your printing code (<code>printf(&quot;%d &quot;, (((unsigned int*) buffer);</code>) makes no sense at all. It prints the pointer itself, cast to a pointer, as a signed <code>int</code>, which is instant undefined behavior."}, {"owner": {"reputation": 1056, "user_id": 4319483, "user_type": "registered", "profile_image": "https://graph.facebook.com/668992100/picture?type=large", "display_name": "Bjorn A.", "link": "https://stackoverflow.com/users/4319483/bjorn-a"}, "edited": false, "score": 0, "creation_date": 1521028864, "post_id": 49276718, "comment_id": 85556793, "body": "&quot;printf(&quot;%d &quot;, (((unsigned int*) buffer);&quot; won&#39;t do what you think it does."}, {"owner": {"reputation": 263, "user_id": 2814715, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c61103a49d9cdffba48d6e034a35955b?s=128&d=identicon&r=PG&f=1", "display_name": "wuampa", "link": "https://stackoverflow.com/users/2814715/wuampa"}, "edited": false, "score": 0, "creation_date": 1521028961, "post_id": 49276718, "comment_id": 85556856, "body": "I think I took this code from: &quot;<a href=\"https://stackoverflow.com/questions/15292237/printing-a-void-variable-in-c\" title=\"printing a void variable in c\">stackoverflow.com/questions/15292237/&hellip;</a>&quot;. The values I&#39;m printing seem correct."}, {"owner": {"reputation": 263, "user_id": 2814715, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c61103a49d9cdffba48d6e034a35955b?s=128&d=identicon&r=PG&f=1", "display_name": "wuampa", "link": "https://stackoverflow.com/users/2814715/wuampa"}, "edited": false, "score": 0, "creation_date": 1521029122, "post_id": 49276718, "comment_id": 85556968, "body": "Sorry, editing the code I had erased [k]."}], "owner": {"reputation": 263, "user_id": 2814715, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c61103a49d9cdffba48d6e034a35955b?s=128&d=identicon&r=PG&f=1", "display_name": "wuampa", "link": "https://stackoverflow.com/users/2814715/wuampa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1521031979, "creation_date": 1521027204, "last_edit_date": 1521031979, "question_id": 49276718, "link": "https://stackoverflow.com/questions/49276718/convert-an-integer-array-to-json-in-c", "title": "Convert an integer array to json in c", "body": "<p>I have a buffer which is filled by an external hardware (DMA). When this happens, I can print the data using the following code:</p>\n\n<pre><code>void* buffer;\n...\n/*buffer is initialized and filled at some point*/\n...\nfor (k=0; k&lt;10; k++) {\n    printf(\"%d \", ((unsigned int*) buffer)[k]);\n}\n</code></pre>\n\n<p>I would like to put this data into JSON format using the functions provided by <a href=\"https://linuxprograms.wordpress.com/2010/05/20/json-c-libjson-tutorial/\" rel=\"nofollow noreferrer\">libjson</a>. This is my attempt:</p>\n\n<pre><code>json_object * jobj = json_object_new_object();\n\njson_object *jarray = json_object_new_array();\n\nif (!jobj || !jarray) {\n    return NULL;\n}\n...\nfor (k=0; k&lt;10; k++) {\n    printf(\"%d \", (((unsigned int*) buffer);\n    sprintf(str, \"%d\", ((unsigned int*) buffer)[k]);\n    json_object *jstring = json_object_new_string(str);\n    json_object_array_add(jarray,jstring);\n}\njson_object_object_add(jobj,\"array\", jarray);\n</code></pre>\n\n<p>This code works but I'm not sure if so many definitions of \"json_object *jstring\" may be correct, especially for large amounts of data.</p>\n"}, {"tags": ["c", "pointers", "micrium", "infineon"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1521027258, "post_id": 49276672, "comment_id": 85555721, "body": "\u034f+\u034f1\u034f, alas though there is no <i>portable</i> way of telling (I&#39;d plump for an inline assembly hack.). Any solution will depend on your compiler and architecture. Could you specify those in plain terms please?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1521028476, "post_id": 49276672, "comment_id": 85556525, "body": "The .map file is readable ASCII? Then you can write a small C programto parse it and store the information relevant for you in a data structure that you can use to analyze the data you get back from the board."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1521031076, "post_id": 49276672, "comment_id": 85558347, "body": "&quot;We have to take apart this 32bits number and split it into 2 16 bit numbers. Now the 16 upper bits have to move 2 bits to the right.&quot; This is known as <b>segment offset addressing</b>. (I fiddled a lot with this back these days where we did programming for Intels 8086.) I found a Q/A concerning this: <a href=\"https://stackoverflow.com/q/8694950/7478597\">SO: How does the segment:offset addressing scheme work?</a>. Just for your interest..."}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1521048807, "post_id": 49276672, "comment_id": 85571341, "body": "I am afraid that you are trying it backwards. It is uC/Probe which is aware of the image layout and data types. Look at the <code>Format</code> field, and format the reply accordingly."}, {"owner": {"reputation": 407, "user_id": 2235468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3811eb9dbd96a4078c61f641545de1a1?s=128&d=identicon&r=PG", "display_name": "Roel Balink", "link": "https://stackoverflow.com/users/2235468/roel-balink"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1521100296, "post_id": 49276672, "comment_id": 85590271, "body": "@Bathsheba too bad there isn&#39;t a portable way to fix this. What exactly do you mean by specifying the compiler and architecture settings in plain terms? The chip is one of the C166 Family.  Not sure if this is what you mean, but this are my Compiler options: <a href=\"https://dl.dropboxusercontent.com/s/lhlx4zf5e5ufais/Compiler%20options.JPG?dl=0\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 407, "user_id": 2235468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3811eb9dbd96a4078c61f641545de1a1?s=128&d=identicon&r=PG", "display_name": "Roel Balink", "link": "https://stackoverflow.com/users/2235468/roel-balink"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1521100330, "post_id": 49276672, "comment_id": 85590288, "body": "@PaulOgilvie This seems like a smart workaroud, maybe I could create some kind of gateway program that converts the addresses. the .map file is a readable file in .xml format, but maybe I should use the .elf file, the .elf file contains the object types and if it&#39;s a pointer or not. The .map file doesn&#39;t have that, but I saw it was a pointer based on the variable name."}, {"owner": {"reputation": 407, "user_id": 2235468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3811eb9dbd96a4078c61f641545de1a1?s=128&d=identicon&r=PG", "display_name": "Roel Balink", "link": "https://stackoverflow.com/users/2235468/roel-balink"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1521100347, "post_id": 49276672, "comment_id": 85590297, "body": "@Scheff Good to know that there is a name for this formatting structure, this might make searching for these pointer problems a lot easier."}, {"owner": {"reputation": 407, "user_id": 2235468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3811eb9dbd96a4078c61f641545de1a1?s=128&d=identicon&r=PG", "display_name": "Roel Balink", "link": "https://stackoverflow.com/users/2235468/roel-balink"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1521100817, "post_id": 49276672, "comment_id": 85590495, "body": "@user58697 I know uC/Probe is aware off the data types and where they are stored, but uC/Probe doesn&#39;t seem to be aware off the fact that these pointers are stored in a different way. uC/Probe doesn&#39;t seem to handle these pointers correct. And I don&#39;t think I can tell uC/Probe that the chip has this kind of <b>segment offset addressing</b> (how this Phenomenon is called as told by Scheff )"}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1521138847, "post_id": 49276672, "comment_id": 85615826, "body": "@RoelBalink Let me clarify: you don&#39;t <i>tell</i> uC/Probe how the address is stored. Instead, once you realized that uC/Probe asks for the address, it is <i>your</i> responsibility to format the reply in the way uC/Probe understands. Of course it is not cross-platform, and must be performed by the platform code."}, {"owner": {"reputation": 407, "user_id": 2235468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3811eb9dbd96a4078c61f641545de1a1?s=128&d=identicon&r=PG", "display_name": "Roel Balink", "link": "https://stackoverflow.com/users/2235468/roel-balink"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1521458413, "post_id": 49276672, "comment_id": 85723394, "body": "@user58697 I understand that. That is why I originally asked this question. I need to know when a pointer is requested by uC/Probe so that I can format the response to a correct pointer location, which is understood by uC/Probe."}], "owner": {"reputation": 407, "user_id": 2235468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3811eb9dbd96a4078c61f641545de1a1?s=128&d=identicon&r=PG", "display_name": "Roel Balink", "link": "https://stackoverflow.com/users/2235468/roel-balink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1521203478, "creation_date": 1521027065, "last_edit_date": 1521203478, "question_id": 49276672, "link": "https://stackoverflow.com/questions/49276672/find-out-if-an-object-on-a-specific-address-is-a-pointer", "title": "Find out if an object on a specific address is a pointer", "body": "<p>I Have a PC Program that is communicating over a TCP/IP Connection to an Embedded board (Infineon XE169 (C166 Family)).</p>\n\n<p>This PC Program request what data is stored on a certain address.\nThe PC Program is uC/Probe, and I cannot change how this program is working.</p>\n\n<p>uC/Probe for example sends this message:</p>\n\n<pre><code> ____________________________________________________________________________________________________________\n|     Prefix         | Length    |Pkt_nr|Unused| Format    | read size | Address to read      |Unused|Postfix|\n|--------------------|-----------|------|------|-----------|-----------|----------------------|------|-------|\n|0x75 0x43 0x50 0x72 | 0x00 0x08 | 0x00 | 0x00 | 0x02 0x00 | 0x04 0x00 | 0xDC  0x3E 0x61 0x00 | 0x00 | 0x2F  |\n|u    C    P    r    |   8       | 0    |  0   | 2         | 4         | 0x613EDC             | 0    | /     |   \n|____________________|___________|______|______|___________|___________|______________________|______|_______|\n</code></pre>\n\n<p>This is a message to request the data from address 0x613EDC and read 4 bytes from there.</p>\n\n<p>When looking in the .map file I can see that at this location the OSTCBCurPtr variable is placed.\nThis variable is an OS_TCB* thus at the requested address is the address placed where this variable is pointing to.</p>\n\n<p>I've now manually looked in the .map file what kind of variable is placed on the address. But can I get the variable type trough the C code on the Embedded board. All I want to know is if the object that lies on that specific location is a pointer or not, if it's an uint16_t, uint8_t, char or whatever is unimportant to me.</p>\n\n<p><strong>Background information, why I want to know this</strong></p>\n\n<p>The Embedded board will sent back the requested data to the uC/Probe program. But the pointers are stored in a strange way in the XE169 chip. \nThe pointer of above example is for example stored like this:</p>\n\n<pre><code> _______________________________________\n| Address   |  0   |   1  |  2   |  3   |\n|-----------|------|------|------|------|\n|0x00613EDC | 0xE6 | 0x1F | 0x84 | 0x01 |\n|___________|______|______|______|______|\n</code></pre>\n\n<p>Because the value's are stored little endian this would result in the number\n0x01841FE6.\nThis number is currently send back to uC/Probe. But his number isn't the correct location of the, a little calculation has to be done to get to the actual address location.</p>\n\n<p>We have to take apart this 32bits number and split it into 2 16 bit numbers.\nThen we get:</p>\n\n<pre><code>Hex:  0x0184             and 0x1FE6\nBits: 0b0000000110000100 and 0001111111100110\n</code></pre>\n\n<p>Now the 16 upper bits have to move 2 bits to the right. The 2 least significant bits of these upper 16 bits become the 2 most significant bits on the lower 16 bits.</p>\n\n<p>This results into:</p>\n\n<pre><code>Hex:  0x0061             and 0x1FE6\nBits: 0b0000000001100001 and 0001111111100110\n</code></pre>\n\n<p>When we paste these 2 16 bit numbers back to the 32 bit number we have the address where the pointer is pointing to:\n0x00611FE6</p>\n\n<p>And this is the number I have to sent back to uC/Probe.\nThis calculation only has to happen for when uC/Probe requests pointers, for non pointers it just needs to send back the data read from the given address.\nThat's why I need to know if the requested data is a pointer, hopefully someone can help me with this. </p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1521026844, "post_id": 49276460, "comment_id": 85555446, "body": "Hmm.. are you outputting the exe for this anywhere different than the exe&#39;s for the other programs?  Is your makefile for this the problem?"}, {"owner": {"reputation": 380, "user_id": 9090849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/307621803079298/picture?type=large", "display_name": "Filipe N&#243;brega", "link": "https://stackoverflow.com/users/9090849/filipe-n%c3%b3brega"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1521026912, "post_id": 49276460, "comment_id": 85555500, "body": "@MartinJames all the other exe&#39;s work fine, it&#39;s just the sanf ones."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1521026927, "post_id": 49276460, "comment_id": 85555507, "body": "I mean, &#39;Hello World&#39; is more offensive than this:)  It has to be a path issue?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1521026947, "post_id": 49276460, "comment_id": 85555525, "body": "That&#39;s just weird:("}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1521027564, "post_id": 49276460, "comment_id": 85555939, "body": "Looks like you have a broken standard library implementation - do you get this on any other systems?"}, {"owner": {"reputation": 380, "user_id": 9090849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/307621803079298/picture?type=large", "display_name": "Filipe N&#243;brega", "link": "https://stackoverflow.com/users/9090849/filipe-n%c3%b3brega"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1521027668, "post_id": 49276460, "comment_id": 85555991, "body": "@TobySpeight just Windows I have a Xubuntu-VM and It works just fine."}, {"owner": {"reputation": 380, "user_id": 9090849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/307621803079298/picture?type=large", "display_name": "Filipe N&#243;brega", "link": "https://stackoverflow.com/users/9090849/filipe-n%c3%b3brega"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1521028560, "post_id": 49276460, "comment_id": 85556591, "body": "@P.P. what should I use as a scanf replacement?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1521028948, "post_id": 49276460, "comment_id": 85556845, "body": "Submit the .exe file to <a href=\"https://www.virustotal.com/\" rel=\"nofollow noreferrer\">virustotal.com</a> and let us know what they report."}, {"owner": {"reputation": 380, "user_id": 9090849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/307621803079298/picture?type=large", "display_name": "Filipe N&#243;brega", "link": "https://stackoverflow.com/users/9090849/filipe-n%c3%b3brega"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1521029871, "post_id": 49276460, "comment_id": 85557495, "body": "@MichaelWalz virustotal says it&#39;s clean but Norton detects a virus called &quot;Heur.AdvML.B&quot; <a href=\"https://www.symantec.com/security_response/sape/\" rel=\"nofollow noreferrer\">norton  Link</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1521038467, "post_id": 49276460, "comment_id": 85563732, "body": "I&#39;m pretty sure it&#39;s a false positive."}], "answers": [{"comments": [{"owner": {"reputation": 380, "user_id": 9090849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/307621803079298/picture?type=large", "display_name": "Filipe N&#243;brega", "link": "https://stackoverflow.com/users/9090849/filipe-n%c3%b3brega"}, "edited": false, "score": 0, "creation_date": 1521028111, "post_id": 49276787, "comment_id": 85556280, "body": "Do u have a compiler suggestion or website? So I don&#39;t mess up again."}, {"owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "reply_to_user": {"reputation": 380, "user_id": 9090849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/307621803079298/picture?type=large", "display_name": "Filipe N&#243;brega", "link": "https://stackoverflow.com/users/9090849/filipe-n%c3%b3brega"}, "edited": false, "score": 0, "creation_date": 1521028506, "post_id": 49276787, "comment_id": 85556558, "body": "Web site which must be secured and trusted. Do not down load from piratebay."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1521028779, "post_id": 49276787, "comment_id": 85556744, "body": "If you&#39;re installing binaries, you should be verifying the signature (as all reasonable package managers do).  So there&#39;s no need for the <i>site</i> to be secured, just that the <i>package</i> you install is verifiably the correct one."}], "tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 2, "last_activity_date": 1521029192, "last_edit_date": 1521029192, "creation_date": 1521027396, "answer_id": 49276787, "question_id": 49276460, "link": "https://stackoverflow.com/questions/49276460/scanf-program-access-denied/49276787#49276787", "title": "Scanf program access denied", "body": "<p>Seems like your MinGW compiler's library has some hidden code which trys to access some vital information from your computer. Seems like malware is being introduced in your library. Un install your MinGW and install it from a trusted site.</p>\n"}], "owner": {"reputation": 380, "user_id": 9090849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/307621803079298/picture?type=large", "display_name": "Filipe N&#243;brega", "link": "https://stackoverflow.com/users/9090849/filipe-n%c3%b3brega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1521029192, "creation_date": 1521026483, "question_id": 49276460, "link": "https://stackoverflow.com/questions/49276460/scanf-program-access-denied", "title": "Scanf program access denied", "body": "<p>I have this simple program that ask's your age.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n\n  int age;\n  printf(\"How old are you?\\n\");\n\n  scanf(\"%d\", &amp;age);\n  return 0;\n}\n</code></pre>\n\n<p>But when I try to run it on Windows it says <strong>Access Denied</strong> then my Norton anti-virus kicks in saying that a threat was solved, and that same threat has the name of my program.</p>\n\n<p>If I compile and run any other programs that do not have <code>scanf</code> in it everything works as expected.</p>\n\n<p>I have the MinGW compiler.</p>\n"}, {"tags": ["c", "openssl"], "answers": [{"comments": [{"owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 0, "creation_date": 1521028087, "post_id": 49276744, "comment_id": 85556266, "body": "That worked but I need the BIO originally for some other function. So after I BIO_read it is invalid for the later usage. I tried BIO_reset and BIO_seek (bio, 0) but nothing helped. Do I need to open it again or is there a way to access it without changing."}, {"owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "reply_to_user": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "edited": false, "score": 1, "creation_date": 1521029429, "post_id": 49276744, "comment_id": 85557185, "body": "The behaviour of BIO_reset() is to reset the BIO to some initial state. The actual behaviour will depend on what the underlying BIO is. The docs say this about calling <code>BIO_reset</code> on a file BIO: <code>BIO_reset() attempts to change the file pointer to the start of file using fseek(stream, 0, 0).</code> But for a mem bio they say: <code>Calling BIO_reset() on a read write memory BIO clears any data in it if the flag BIO_FLAGS_NONCLEAR_RST is not set.</code>. If you want to retain the data you could try calling `BIO_set_flags() and pass in the BIO_FLAGS_NONCLEAR_RST flag."}], "tags": [], "owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "is_accepted": true, "score": 2, "last_activity_date": 1521027272, "creation_date": 1521027272, "answer_id": 49276744, "question_id": 49276394, "link": "https://stackoverflow.com/questions/49276394/openssl-access-a-file-bio-via-memory/49276744#49276744", "title": "OpenSSL - access a file-BIO via memory", "body": "<p><code>BIO_get_mem_ptr</code> gives you a pointer into the underlying memory buffer of a mem bio. It only works with a mem BIO. In a file BIO there is no underlying memory buffer!</p>\n\n<p>Use <code>BIO_read</code> to read data out of a BIO. That works on both a mem BIO and a file BIO.</p>\n\n<p><a href=\"https://www.openssl.org/docs/man1.1.0/crypto/BIO_read.html\" rel=\"nofollow noreferrer\">https://www.openssl.org/docs/man1.1.0/crypto/BIO_read.html</a></p>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 49276744, "answer_count": 1, "score": 1, "last_activity_date": 1521027272, "creation_date": 1521026319, "question_id": 49276394, "link": "https://stackoverflow.com/questions/49276394/openssl-access-a-file-bio-via-memory", "title": "OpenSSL - access a file-BIO via memory", "body": "<p>I try to access the bytes of a BIO with BUF_MEM.\nBut it is not working if it is a file-BIO.</p>\n\n<pre><code>    BUF_MEM *bmmem = NULL, bmfil = NULL;\n    int ret = -1;\n\n    // OK for memory\n    BIO *biomem = BIO_new (BIO_s_mem ());       \n    ret = BIO_get_mem_ptr (biomem, &amp;bmmem);    // ret = 1\n    printf (\"\\nbiomem - %d %d\", ret, bmmem);   // OK\n\n    // NOK for file\n    BIO *biofil = BIO_new (BIO_s_file ());\n    BIO_read_filename (biofil, \"myfile.pem\");   // ok\n    ret = BIO_get_mem_ptr (biofil, &amp;bmfil);     // ret = 0\n    printf (\"\\nbiofil - %d %d, ret, bmfil);     // NOK\n</code></pre>\n\n<p>Do I miss something?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1521028369, "post_id": 49276163, "comment_id": 85556448, "body": "It <i>might</i> help to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1521036553, "post_id": 49276163, "comment_id": 85562438, "body": "Check the return value of <code>perl_run()</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 4533661, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a0c9c418921324d71b4d9b1380ab4990?s=128&d=identicon&r=PG&f=1", "display_name": "Semonit", "link": "https://stackoverflow.com/users/4533661/semonit"}, "edited": false, "score": 0, "creation_date": 1521206042, "post_id": 49287733, "comment_id": 85644381, "body": "Good idea! But i couldn&#39;t get <code>do</code> to be invoked via call_pv or call_argv. They give &quot;Undefind subroutine do called&quot; on STDERR. But anyway, I could do the trick with perl_eval."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 379, "user_id": 4533661, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a0c9c418921324d71b4d9b1380ab4990?s=128&d=identicon&r=PG&f=1", "display_name": "Semonit", "link": "https://stackoverflow.com/users/4533661/semonit"}, "edited": false, "score": 0, "creation_date": 1521212835, "post_id": 49287733, "comment_id": 85649232, "body": "<code>do</code> is not a sub; it&#39;s an operator. It&#39;s actually <code>eval_sv</code> / <code>eval_pv</code> that you need if you want to use <code>do</code>."}, {"owner": {"reputation": 379, "user_id": 4533661, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a0c9c418921324d71b4d9b1380ab4990?s=128&d=identicon&r=PG&f=1", "display_name": "Semonit", "link": "https://stackoverflow.com/users/4533661/semonit"}, "edited": false, "score": 0, "creation_date": 1521473636, "post_id": 49287733, "comment_id": 85734147, "body": "That&#39;s what I meant. I used <code>eval_pv</code> (&quot;wrongly&quot; said perl_eval)."}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1521062633, "last_edit_date": 1521062633, "creation_date": 1521062070, "answer_id": 49287733, "question_id": 49276163, "link": "https://stackoverflow.com/questions/49276163/embedded-perl-in-c-is-there-a-flag-for-a-runitme-error-for-scripts-executed/49287733#49287733", "title": "embedded perl in c - is there a flag for a &quot;runitme error&quot; for scripts executed by perl_run()?", "body": "<p>You can catch exceptions thrown by code executed by <code>call_*</code>, so use the approach described in <a href=\"https://perldoc.perl.org/perlembed.html#Calling-a-Perl-subroutine-from-your-C-program\" rel=\"nofollow noreferrer\">Calling a Perl subroutine from your C program</a>, and refer to <a href=\"https://perldoc.perl.org/perlcall.html#G_EVAL\" rel=\"nofollow noreferrer\"><code>G_EVAL</code></a> in <a href=\"https://perldoc.perl.org/perlcall.html\" rel=\"nofollow noreferrer\">perlcall</a>. Use <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"nofollow noreferrer\"><code>do</code></a> from within the called code to get Perl to execute a file.</p>\n"}], "owner": {"reputation": 379, "user_id": 4533661, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a0c9c418921324d71b4d9b1380ab4990?s=128&d=identicon&r=PG&f=1", "display_name": "Semonit", "link": "https://stackoverflow.com/users/4533661/semonit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 49287733, "answer_count": 1, "score": 2, "last_activity_date": 1521062633, "creation_date": 1521025701, "question_id": 49276163, "link": "https://stackoverflow.com/questions/49276163/embedded-perl-in-c-is-there-a-flag-for-a-runitme-error-for-scripts-executed", "title": "embedded perl in c - is there a flag for a &quot;runitme error&quot; for scripts executed by perl_run()?", "body": "<p>If a \"runtime error\" happens in a script that is executed by perl_run() in an embedded perl instance on C (actually C++11), is there a more reasonable way other than to look for \"Runtime error in...\" at the stderr stream? </p>\n\n<p>I'm using perl 5.26.1.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "regex", "notepad++"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 3, "creation_date": 1521026242, "post_id": 49275887, "comment_id": 85555025, "body": "Shouldn&#39;t there be a <code>x</code> added? <code>...\\x2A\\2F)</code> =&gt; <code>...\\x2A\\x2F)</code>"}, {"owner": {"reputation": 1, "user_id": 9490819, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pS-wQI5O0T0/AAAAAAAAAAI/AAAAAAAATqo/b31nwz-dYtg/photo.jpg?sz=128", "display_name": "nothingmag", "link": "https://stackoverflow.com/users/9490819/nothingmag"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1521077879, "post_id": 49275887, "comment_id": 85583536, "body": "Hello, Gerhardh  Thanks for the remind.  I fixed the typo, but it still not worked."}], "owner": {"reputation": 1, "user_id": 9490819, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pS-wQI5O0T0/AAAAAAAAAAI/AAAAAAAATqo/b31nwz-dYtg/photo.jpg?sz=128", "display_name": "nothingmag", "link": "https://stackoverflow.com/users/9490819/nothingmag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1521026254, "creation_date": 1521024955, "last_edit_date": 1521026254, "question_id": 49275887, "link": "https://stackoverflow.com/questions/49275887/notepad-function-list-multi-comment", "title": "notepad++ function list multi comment", "body": "<p>All</p>\n\n<p>My code (C file) has comment formats as below:</p>\n\n<pre><code>/* ... */\n/* ...\n * ...\n */\n</code></pre>\n\n<p>In order to use Function list, I tried to modify functionList.xml as below: </p>\n\n<pre><code>&lt;parser\ndisplayName=\"C\"\nid         =\"c_function\"\ncommentExpr=\"(?x)\n|   (?s:\\x2F\\x2A(.|\\0x0A)*?\\x2A\\2F)  # regex - /\\*(.|\\n)*?\\*/\n</code></pre>\n\n<p>But it doesn't work.\nI tried the reg with find command on notepad++, and it worked.</p>\n\n<p>I have no clue what happen.\nIs there anyone who is kind to give me suggestion?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "pointers", "null-pointer", "misra"], "comments": [{"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1521024262, "post_id": 49275540, "comment_id": 85553599, "body": "Obviously, you use a null pointer. <code>diafBuf</code> points to address 0."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1521024747, "post_id": 49275540, "comment_id": 85553932, "body": "Best just send it back to the developer and say &quot;MISRA C rule 1.2 violation - fix it&quot;."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 0, "creation_date": 1521024801, "post_id": 49275540, "comment_id": 85553960, "body": "@Pras isn&#39;t it also a MISRA rule to not use malloc?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1521024866, "post_id": 49275540, "comment_id": 85554004, "body": "@AndrejsCainikovs null pointers don&#39;t &quot;point to address 0&quot; in general"}, {"owner": {"reputation": 97, "user_id": 9430021, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ankit Shah", "link": "https://stackoverflow.com/users/9430021/ankit-shah"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1521024886, "post_id": 49275540, "comment_id": 85554017, "body": "@M.M yes, you are right. So in that what should I do, The developer says it compiles without error and so now its my job to solve the MISRA violations"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1521024913, "post_id": 49275540, "comment_id": 85554040, "body": "<i>&quot;likely use of null pointer&quot;</i> - That made me chuckle"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1521025012, "post_id": 49275540, "comment_id": 85554090, "body": "@AnkitShah if this is the real code then it is bugged and the developer should fix it. Your comments suggest that this isn&#39;t the real code though. You should post the real code"}, {"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1521025032, "post_id": 49275540, "comment_id": 85554109, "body": "@M.M In general, yes. But I&#39;m from embedded world, so there might be some rare occasions."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1521026222, "post_id": 49275540, "comment_id": 85555012, "body": "Doesn&#39;t MISRA  prohibit assignment of (zero) integer liters to pointers in general?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1521026705, "post_id": 49275540, "comment_id": 85555340, "body": "Unfortunately MISRA doesn&#39;t know about embedded environments where you really might need to access address 0."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521029999, "post_id": 49275540, "comment_id": 85557577, "body": "Maybe look at line 1 of your own code for 1 second and you&#39;ll see why you get the warning..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1521030453, "post_id": 49275540, "comment_id": 85557891, "body": "@Gerhardh MISRA knows about embedded environments just fine. You should study the rule of &quot;simple assignment&quot;, 6.5.16.1, which states how assignment is done in the C language. The line <code>tm_uint8* diagBuf = 0u;</code> <i>only</i> means that the pointer is a null pointer. It can never mean that the pointer points at address zero. This is because assignment from integer to pointer is invalid C, in every single case except when the integer is a null pointer constant. To point at address zero, you will have to write <code>type* ptr= (type*)0;</code>, which is not a null pointer constant unless type happens to be <code>void</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521031962, "post_id": 49275540, "comment_id": 85558953, "body": "I posted the above as an answer, since simple assignment and null pointer constants might not be so trivial to everyone, after all."}], "answers": [{"tags": [], "owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "is_accepted": false, "score": 0, "last_activity_date": 1521024250, "creation_date": 1521024250, "answer_id": 49275630, "question_id": 49275540, "link": "https://stackoverflow.com/questions/49275540/null-pointer-issue/49275630#49275630", "title": "Null pointer issue", "body": "<p>You affect 0u (so, 0, so NULL) to diagBuf, and then you use it with \"diagBuf[0]\".</p>\n\n<p>Either allocate it (malloc), or correct the declaration to fit your need (tm_uint8 diagBuf[3]; at minimum)</p>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 9430021, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ankit Shah", "link": "https://stackoverflow.com/users/9430021/ankit-shah"}, "edited": false, "score": 0, "creation_date": 1521028712, "post_id": 49276835, "comment_id": 85556699, "body": "I think you are right as I explained the software developer about the issues and then he also agreed with the things that you have mentioned.  Also, I do not understand why people down voted the post. I did do research about Null pointer and MISRA rules."}], "tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": true, "score": 1, "last_activity_date": 1521027548, "creation_date": 1521027548, "answer_id": 49276835, "question_id": 49275540, "link": "https://stackoverflow.com/questions/49275540/null-pointer-issue/49276835#49276835", "title": "Null pointer issue", "body": "<p>According to the 1999 C standard, Section 6.3.2 \"Pointers\", para 3</p>\n\n<blockquote>\n  <p>An integer constant expression with the value 0, or such an expression cast to type <code>void *</code>, is called a null pointer constant. If a null pointer constant is converted to a pointer type, the resulting pointer, called a null pointer, is guaranteed to compare unequal to a pointer to any object or function.</p>\n</blockquote>\n\n<p>(Note I've removed cross reference at the end of the first sentence in the above to a footnote which explains that <code>NULL</code> is defined in <code>&lt;stddef.h&gt;</code> and other headers as a null pointer constant).</p>\n\n<p>This means that</p>\n\n<pre><code>tm_uint8* diagBuf = 0u;\n</code></pre>\n\n<p>initialises <code>diagBuf</code> using a null pointer constant, since <code>0u</code> is an integer constant expression with value zero.   Accordingly, <code>diagBuf</code> is initialised as a null pointer.</p>\n\n<p>Furthermore the following statements</p>\n\n<pre><code>diagBuf[0] = diagBuf[0] + 0x40u; \ndiagBuf[2] = 0x01u;\n</code></pre>\n\n<p>both dereference a null pointer.    That is undefined behaviour according to C standards.</p>\n\n<p>The reported Misra violation is therefore completely correct.</p>\n\n<p>The circumstances in which such code would be acceptable (e.g. it would be possible to write a justification for an exemption from the Misra rule, and get that approved in context of the system development) are very limited in practice.   </p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1521031859, "last_edit_date": 1521031859, "creation_date": 1521031313, "answer_id": 49278093, "question_id": 49275540, "link": "https://stackoverflow.com/questions/49275540/null-pointer-issue/49278093#49278093", "title": "Null pointer issue", "body": "<p>C11 6.3.2.3 states:</p>\n\n<blockquote>\n  <p>An integer constant expression with the value 0, or such an expression cast to type <code>void *</code>, is called a <em>null pointer constant</em></p>\n</blockquote>\n\n<p>This is the only case in the C language where you can assign a pointer to the value <code>0</code> - to get a null pointer. The line in the question can never be used to set a pointer to point at address zero, since assignment of integer values to pointers is invalid C in all other cases.</p>\n\n<p>If we go through the rules of simple assignment C11 6.5.16.1, then there exists no case where the left operand of <code>=</code> is a pointer and the right operand is an arithmetic type. This rule is very clear in the standard, code such as <code>int* ptr = 1234;</code>is simply invalid C and has always been invalid C (it is a \"constraint violation\" of the standard). Compilers letting it through without a warning/error are garbage and not standard conforming.</p>\n\n<p>Simple assignment lists one valid exception (C11 6.5.16.1):</p>\n\n<blockquote>\n  <ul>\n  <li>the left operand is an atomic, qualified, or unqualified pointer, and the right is a null pointer constant</li>\n  </ul>\n</blockquote>\n\n<p>This is the only reason why the code in the question compiles.</p>\n\n<p>Now if you actually wish to point at the hardware address 0, you must write something like this:</p>\n\n<pre><code>volatile uint8_t* ptr = (volatile uint8_t*)0u;\n</code></pre>\n\n<p>This forces a conversion from the integer 0 into a pointer pointing at address 0. Since the right operand is neither a <code>0</code> nor a zero cast to <code>void*</code>, it is <em>not</em> a null pointer constant, and thus <code>ptr</code> is not a null pointer.</p>\n\n<p>The C standard is clear and MISRA-C is perfectly compatible with the standard.</p>\n\n<hr>\n\n<p>Bugs and issues unrelated to the question: </p>\n\n<ul>\n<li>Not using <code>volatile</code> when pointing at a hardware address is always a bug.</li>\n<li>Using <code>diagBuf[0] + 0x40u</code> is a bad way of setting a bit to 1. If the bit is already set, then you get a massive bug. Use <code>|</code> instead.</li>\n<li><p>Assuming <code>diagBuf</code> is a pointer to byte, then <code>diagBuf[0] = diagBuf[0] + 0x40u;</code> is a MISRA-C:2012 violation of rule 10.3 since you assign a wider type (\"essentially unsigned\") to a narrower type. MISRA compliant code is: </p>\n\n<pre><code>diagBuf[0u] = (tm_uint8)(diagBuf[0u] + 0x40u;);\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 97, "user_id": 9430021, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ankit Shah", "link": "https://stackoverflow.com/users/9430021/ankit-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 0, "accepted_answer_id": 49276835, "answer_count": 3, "score": -4, "last_activity_date": 1521031859, "creation_date": 1521024028, "question_id": 49275540, "link": "https://stackoverflow.com/questions/49275540/null-pointer-issue", "title": "Null pointer issue", "body": "<p>I am facing a MISRA C 2004 violation of rule 1.2 \"likely use of null pointer. The code that I am using is as below:</p>\n\n<pre><code>tm_uint8* diagBuf = 0u;\ndiagBuf[0] = diagBuf[0] + 0x40u; \ndiagBuf[2] = 0x01u;\ndiagBuf[0] = diagBuf[0] + 0x40u;\ndiagBuf[2] = 0x01u;\n</code></pre>\n\n<p>This is just a part of the code that is indicated above. some of  the statements have \"IF\" conditions.</p>\n\n<p>Can some one point out why I get the MISRA Violation.?</p>\n"}, {"tags": ["c", "gcc", "assembly", "optimization", "memory-barriers"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1521024571, "post_id": 49275474, "comment_id": 85553822, "body": "Comparing two pointers using the <code>&lt;</code> operator gives undefined behaviour in C unless both pointers point to elements of the same array object (or one past the end). When behaviour is undefined, the C standards permit an implementation (e.g. a compiler or the optimiser) do do what it likes, whether that makes sense to the programmer or not. If you want guarantees (or at least a justification for complaining to the compiler vendor if it gets something wrong, or reliably passing your tests cases) you need to avoid undefined behaviour. Your example, from the information you have given. does not."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1521025015, "post_id": 49275474, "comment_id": 85554094, "body": "You can try it out if there is a compiler which mixes statements, but I think there should not be any: <a href=\"https://godbolt.org/g/mPhoos\" rel=\"nofollow noreferrer\">godbolt.org/g/mPhoos</a>"}, {"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1521025313, "post_id": 49275474, "comment_id": 85554318, "body": "if no compiler mixes <code>for</code> statements and assignment, I can slightly change my original question and ask the following: if <code>addr1</code> and <code>addr2</code> are pointers pointing to the same address, but <code>addr2</code> is initialized hard coded with the address, while <code>addr1</code> is initialized with the address passed as an argument, and instead of the <code>for</code> loop there is only <code>*addr1 += 1</code>, what is promised regarding the content of the address? if <code>*addr1 += 1</code> and <code>*addr2 *= 8</code> can be mixed, result will be unpredictable. Anyway, the question regarding the Assembly part remains the same."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1521025889, "post_id": 49275474, "comment_id": 85554774, "body": "In the code <code>a=b; x=a; func(x);</code> there is no <code>x=b;</code> . So I do not understand your comment &quot;x=b must happen first&quot;"}, {"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1521026081, "post_id": 49275474, "comment_id": 85554917, "body": "@bolov - that&#39;s exactly my question. will the memory content be increment before or not, as the same memory address is referenced from two different variables."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1521026218, "post_id": 49275474, "comment_id": 85555010, "body": "This seems like a really long-winded way of asking &quot;does the compiler have to consider that function parameters might alias&quot; to which the answer is Yes if they&#39;re both the same type and not <code>restrict</code>"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1528141951, "post_id": 49275474, "comment_id": 88385351, "body": "&quot;<code>int *addr2 = 0xf00</code>&quot; which compiler accepts that code?"}], "answers": [{"comments": [{"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1521027993, "post_id": 49276255, "comment_id": 85556205, "body": "does your answer applies also to the assembly part of my question? are optimizations performed after code transformed into assembly?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 2, "creation_date": 1521028432, "post_id": 49276255, "comment_id": 85556500, "body": "@user2162550: Assemblers don&#39;t reorder instructions.  There are some binary-to-binary optimizers that try to find <i>safe</i> optimizations that don&#39;t change the behaviour of a program, where the input is an already-compiled executable.  But those are rare, and would be buggy if they moved a load before a store to the same location.  Similarly, as I said in the first paragraph of the 2nd section of this answer, <b>the cardinal rule of out-of-order execution is to preserve the <i>illusion</i> that the machine instructions run in program order</b>.  So yes later loads from the BSS would get zero."}, {"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1521028608, "post_id": 49276255, "comment_id": 85556623, "body": "so optimizations only happens before the code is translated to assembly? assembly code will never get optimized (as a general, not the binary-to-binary rar cases)? I&#39;m talking about build/compile time not run-time CPU optimizations."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 2, "creation_date": 1521028881, "post_id": 49276255, "comment_id": 85556804, "body": "@user2162550: Right, compilation from C to asm is where optimizing compilers do the heavy lifting to figure out how to emit efficient asm instructions, because that&#39;s what will run on the hardware.  (And many compilers emit machine code directly, rather than piping asm text into an assembler the way gcc does).  Much of the optimization happens on an internal representation of the program logic, but some of it happens <i>while</i> translating that to asm (e.g. peephole optimizations like replacing <code>mov rax, 0</code> with <code>xor eax,eax</code> if flags can be clobbered at that point)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 1, "creation_date": 1521028980, "post_id": 49276255, "comment_id": 85556867, "body": "@user2162550: The only optimization that happens on asm / machine code is pipelined out-of-order execution by the CPU hardware.  See <a href=\"https://softwareengineering.stackexchange.com/questions/349972/350024#350024\" title=\"350024%23350024\">softwareengineering.stackexchange.com/questions/349972/&hellip;</a> for some details about how CPUs find an exploit instruction-level parallelism."}, {"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1521029000, "post_id": 49276255, "comment_id": 85556882, "body": "do you have any documentation regarding the compilation optimization which do not take place in the assembler?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1521029209, "post_id": 49276255, "comment_id": 85557033, "body": "@user2162550: see some of the links in the answer I linked in my last comment.  <a href=\"http://users.ices.utexas.edu/~lenharth/cs378/fall14/8%20-%20LoopOptimizations.pdf\" rel=\"nofollow noreferrer\">users.ices.utexas.edu/~lenharth/cs378/fall14/&hellip;</a> has some neat stuff.  See <b>Matt Godbolt&#39;s CppCon2017 talk: <a href=\"https://youtu.be/bSkpMdDe4g4\" rel=\"nofollow noreferrer\">\u201cWhat Has My Compiler Done for Me Lately? Unbolting the Compiler&#39;s Lid\u201d</a></b> for more info on seeing how compilers optimize.  (You can use the compiler explorer site for ARM instead of x86, using the same examples Matt looks at for x86.)"}, {"owner": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 1, "creation_date": 1521033231, "post_id": 49276255, "comment_id": 85559833, "body": "@PeterCordes - the loop optimization link is dead, but archived:  <a href=\"https://web.archive.org/web/20170517030057/http://users.ices.utexas.edu/~lenharth/cs378/fall14/8%20-%20LoopOptimizations.pdf\" rel=\"nofollow noreferrer\">web.archive.org/web/20170517030057/http://users.ices.utexas.&zwnj;&#8203;edu/&hellip;</a>"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 3, "creation_date": 1521047773, "post_id": 49276255, "comment_id": 85570624, "body": "It might be worth noting that even if the compiler cannot statically prove non-aliasing at compile time, it could still insert a runtime check before the loop to see if the ranges overlap, and use the non-aliasing fast version of the loop if they don&#39;t. This idea is used in practice today by some compilers."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 4, "last_activity_date": 1521065876, "last_edit_date": 1521065876, "creation_date": 1521025950, "answer_id": 49276255, "question_id": 49275474, "link": "https://stackoverflow.com/questions/49275474/memory-assignments-optimizations/49276255#49276255", "title": "Memory assignments optimizations", "body": "<p>What the compiler has to do to get this right is called <a href=\"https://en.wikipedia.org/wiki/Alias_analysis\" rel=\"nofollow noreferrer\">\"alias analysis\"</a>.</p>\n\n<p>If the compiler can prove that <code>addr2</code> isn't in the range that <code>addr1</code> loops over, it can reorder it or keep <code>*addr2</code> in a register throughout the loop.</p>\n\n<p>This is a very useful optimization for a case like <code>for(...; addr1++) { *addr1 += *addr2; }</code> to avoid reloading <code>addr2</code> every time, and one of the reasons <a href=\"http://en.cppreference.com/w/c/language/restrict\" rel=\"nofollow noreferrer\">the <code>restrict</code> keyword</a> exists.</p>\n\n<p><strong>If inputs might overlap, compilers can (and <em>do</em>) emit code that <em>checks</em> for overlap</strong> and runs an optimized (e.g. auto-vectorized) loop if there's no overlap, or runs a safe loop if there is overlap.</p>\n\n<hr>\n\n<p>If a compiler <em>can't</em> prove that a transformation will give the same final results as the C abstract machine, it can't do the transformation.  (I say \"final\" because the order of stores to memory aren't part of the observable results, unless you use <code>std::atomic</code>.  So compile-time transformations aren't allowed to break <em>single-threaded</em> code, very similar to what out-of-order CPUs do: provide the illusion of everything happening in program order <em>for a single thread</em>.)</p>\n\n<p><strong>The as-if rule only allows optimizations that work in <em>all</em> cases that don't lead to UB</strong>, including obscure stuff like <code>unsigned size = 0xffffffff</code>, which can often lead to compilers not being allowed to do optimizations you hoped for, unless you tweak your source.</p>\n\n<p>UB is key for allowing some optimizations (like not redoing sign-extension of a signed array index inside a loop).  See <a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\" rel=\"nofollow noreferrer\">\nWhat Every C Programmer Should Know About Undefined Behavior #1/3</a>.</p>\n"}], "owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 49276255, "answer_count": 1, "score": 2, "last_activity_date": 1528173134, "creation_date": 1521023817, "last_edit_date": 1528173134, "question_id": 49275474, "link": "https://stackoverflow.com/questions/49275474/memory-assignments-optimizations", "title": "Memory assignments optimizations", "body": "<p>It is well known fact that compilers can mix assignments order in order to optimize execution,\nso-</p>\n\n<pre><code>a=b;\nc=d;\n</code></pre>\n\n<p>Can be actually performed</p>\n\n<pre><code>c=d;\na=b;\n</code></pre>\n\n<p>However with the following code:</p>\n\n<pre><code>a=b;\nx=a;\nfunc(x);\n</code></pre>\n\n<p>By the time <code>func(x)</code> is called, <code>x</code> must contain <code>b</code> first, or else result can be unpredictable.</p>\n\n<p>Now, what about the following code:</p>\n\n<pre><code>int *addr1 = some_addr;\nint *addr2 = (int *)0xf00;\n\n/* The following applies:\n *      some_other_addr &gt;= some_addr\n */\nfor (addr1; addr1 &lt; some_other_addr; addr1++) \n{\n    *addr1 += 1;\n}\n\n*addr2 *= 8;\n</code></pre>\n\n<p>When <code>addr2</code> points to an address in the range of the <code>for</code> loop, we need to know whether or not it is promised that <code>*addr2</code> will be incremented before the multiplition in 8, as if not, and some optimization step placed <code>*addr2 *= 8;</code> before the <code>for</code> loop, the result of <code>*addr2</code> will be different than if it would have been executed without an optimization.</p>\n\n<p>Would the answer be different in case <code>some_addr</code> and <code>some_other_addr</code> are defined in the scope and in case they are passed as arguments? because at the first case it is quite easy for the compiler to know that <code>*addr2</code> is inside the range of the <code>for</code> loop, while at the second case it's not that obvious. </p>\n\n<p>And also, if we look at it from the Assembly perspective, let's take for example a sample <code>reset_handler</code> code snippet of <code>bss</code> section initialization:</p>\n\n<pre><code>    ldr  r1, =__BSS_SIZE__\n    cmp  r1, #0\n    beq  FINISHED_LABEL\n    ldr  r0, =__BSS_START__\n    ldr  r2, =0\nLOOP_LABEL:\n    str  r2, [r0]\n    add  r0, r4\n    subs r1, r4\n    bne  LOOP_LABEL\n</code></pre>\n\n<p>If the next instruction after this code (at <code>FINISHED_LABEL</code>) loads a value (<code>ldr</code>) from address in the bss range, is it promised that the content will be valid (0) at that time?</p>\n"}, {"tags": ["c", "arrays", "segmentation-fault", "scanf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1521022135, "post_id": 49274826, "comment_id": 85552094, "body": "Are <code>x</code> and <code>y</code> pointers to <code>double</code> or <code>int</code>? On almost all platforms <code>sizeof(double) &gt; sizeof(int)</code>."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1521022288, "post_id": 49274826, "comment_id": 85552197, "body": "Why would the compiler complain about this ?"}, {"owner": {"reputation": 103, "user_id": 9063370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86afc9f6f6b7d19b7346d3fcf0653f0b?s=128&d=identicon&r=PG", "display_name": "LutinRose", "link": "https://stackoverflow.com/users/9063370/lutinrose"}, "edited": false, "score": 0, "creation_date": 1521022303, "post_id": 49274826, "comment_id": 85552204, "body": "Yes thank you, I realized it too when I read my post. Sorry for the inconvenience !"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1521022718, "post_id": 49274826, "comment_id": 85552494, "body": "Your code has a problem. What happens If malloc returns NULL on Y? Y= malloc() ? You check X, but you do not check Y.  You call free() on unchecked Pointer (Y) and this is not a good approach."}, {"owner": {"reputation": 103, "user_id": 9063370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86afc9f6f6b7d19b7346d3fcf0653f0b?s=128&d=identicon&r=PG", "display_name": "LutinRose", "link": "https://stackoverflow.com/users/9063370/lutinrose"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1521022856, "post_id": 49274826, "comment_id": 85552594, "body": "@Michi you&#39;re right, thank you."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1521022336, "post_id": 49274921, "comment_id": 85552227, "body": "it&#39;s a classic, but difficult to close as duplicate. I&#39;m keeping this question as duplicate target. Nice try at answering, thanks for letting us know that it fixed the issue"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 2, "creation_date": 1521022337, "post_id": 49274921, "comment_id": 85552229, "body": "Better, it should be &quot;x = malloc (n * sizeof(*x))&quot; and you can&#39;t have mismatch type, even if you change the type of &quot;x&quot;"}], "tags": [], "owner": {"reputation": 103, "user_id": 9063370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86afc9f6f6b7d19b7346d3fcf0653f0b?s=128&d=identicon&r=PG", "display_name": "LutinRose", "link": "https://stackoverflow.com/users/9063370/lutinrose"}, "is_accepted": false, "score": 5, "last_activity_date": 1521022279, "last_edit_date": 1521022279, "creation_date": 1521022246, "answer_id": 49274921, "question_id": 49274826, "link": "https://stackoverflow.com/questions/49274826/c-segfault-while-using-fscanf-to-make-array-from-datas-in-a-file/49274921#49274921", "title": "C segfault while using fscanf to make array from datas in a file", "body": "<p>Nevermind, I found the solution.<br>\nIt's just that I use malloc badly.\nI wrote</p>\n\n<pre><code>x = malloc(n * sizeof(int));\n</code></pre>\n\n<p>When I should have written</p>\n\n<pre><code>x = malloc(n * sizeof(double));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1521022361, "post_id": 49274947, "comment_id": 85552238, "body": "that&#39;s the way of doing it to avoid type mistakes. Can you elaborate on how it didn&#39;t work earlier?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1521024208, "post_id": 49274947, "comment_id": 85553567, "body": "I edited to add the info I wanted you to add :) feel free to revert (but I don&#39;t think you will)."}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1521024659, "post_id": 49274947, "comment_id": 85553879, "body": "I didn&#39;t saw your previous comment otherwise i could have edited. @Jean-Fran&#231;oisFabre Edited part  added more clarity in my answer. thanks for that."}], "tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": true, "score": 5, "last_activity_date": 1521024185, "last_edit_date": 1521024185, "creation_date": 1521022301, "answer_id": 49274947, "question_id": 49274826, "link": "https://stackoverflow.com/questions/49274826/c-segfault-while-using-fscanf-to-make-array-from-datas-in-a-file/49274947#49274947", "title": "C segfault while using fscanf to make array from datas in a file", "body": "<p><em>The code I wrote return me a segmentation fault ?</em> segmentation fault causing statement is below as memory allocation for <code>x</code> and <code>y</code> is not correct.</p>\n\n<pre><code>x = malloc(n * sizeof(int));\ny = malloc(n * sizeof(int));\n</code></pre>\n\n<p>(because on most machines <code>sizeof(double)</code> is bigger than <code>sizeof(int)</code> so there's not enough room for the array elements after a while)</p>\n\n<p>It should be </p>\n\n<pre><code>x = malloc(n * sizeof(*x)); /* it works for any type */\ny = malloc(n * sizeof(*y));\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 9063370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86afc9f6f6b7d19b7346d3fcf0653f0b?s=128&d=identicon&r=PG", "display_name": "LutinRose", "link": "https://stackoverflow.com/users/9063370/lutinrose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 49274947, "answer_count": 2, "score": 2, "last_activity_date": 1521024185, "creation_date": 1521022006, "last_edit_date": 1521022537, "question_id": 49274826, "link": "https://stackoverflow.com/questions/49274826/c-segfault-while-using-fscanf-to-make-array-from-datas-in-a-file", "title": "C segfault while using fscanf to make array from datas in a file", "body": "<p>I already tried to find a solution to my problem but I didn't find it so I post it here.</p>\n\n<p>I want to read a file and then create <strong>two 1D arrays from the data I got</strong>.\nthe file is like that:</p>\n\n<ul>\n<li>1st line: number of data to collect  </li>\n<li>other lines: data i want to get </li>\n</ul>\n\n<p><strong>Here is my file :</strong> </p>\n\n<pre><code>7\n1.  4.1\n2.  8.2\n5  19.5\n12 50\n20  78\n30  50.05\n50  5\n</code></pre>\n\n<p>7 is the number of line I want to get (I want all the lines from 1. to 50). </p>\n\n<p>The code I wrote return me a segmentation fault but I don't understand why.<br>\n<strong>Here is what I wrote :</strong>     </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;math.h&gt;\n    #include &lt;stdlib.h&gt; \n\n    int main(void)\n    {\n      /* DECLARATION OF CONSTANTS AND VARIABLES */\n      FILE* fichier = NULL;\n      double* x = NULL;\n      double* y = NULL;\n      int k,n = 0;\n\n     /* OPENING FILE */\n      fichier = fopen(\"donnees1.txt\", \"r+\");\n\n          if (fichier != NULL)\n             {\n              fscanf(fichier, \"%d\", &amp;n);\n\n              /* creating dynamic array of x and y */\n              x = malloc(n * sizeof(int));\n              y = malloc(n * sizeof(int));\n\n              if (x == NULL)\n                 {\n                  printf(\"failed to allocate.\\n\");\n                  exit(0);\n                 }\n\n              for(k = 0; k &lt; n; k++)\n                 {\n                  fscanf(fichier, \"%lf %lf\", &amp;x[k], &amp;y[k]);\n                  printf(\"%lf %lf\\n\", x[k],y[k]);\n                 }\n              /* Closing file */\n              fclose(fichier);\n             }\n          else\n            {\n             printf(\"Cannot open the file.\\n\");\n            }\n\n      /* Freeing memory */\n      free(x);\n      free(y);\n      return 0;\n    }\n</code></pre>\n\n<p><strong>This is what the program is returning me :</strong>  </p>\n\n<pre><code>1.000000 4.100000\n2.000000 8.200000\n5.000000 19.500000\n12.000000 50.000000\n20.000000 78.000000\n30.000000 50.050000\n50.000000 5.000000\nSegmentation fault\n</code></pre>\n\n<p>Thank you for your help and for your attention !</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1521019673, "post_id": 49273830, "comment_id": 85550374, "body": "It should be <code>(struct structX **sxpp)</code> and so on. You can not just drop <code>struct</code> out of type name."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1521019865, "post_id": 49273830, "comment_id": 85550502, "body": "<i>&quot;i want to do null check for xb&quot;</i> What is the type of <code>structB</code>? If it&#39;s not a pointer (and I hope it&#39;s not as pointers should not be hidden behind typedef), then doing null check makes no sense."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521019960, "post_id": 49273830, "comment_id": 85550574, "body": "When fixing the problem with missing <code>struct</code> all over the place, the code compiles fine. So it appears that the problem is not in the posted code. Post a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1521020021, "post_id": 49273830, "comment_id": 85550611, "body": "Btw if you upgrade your compiler to standard C, you don&#39;t need to use smelly macros like those. Standard C supports anonymous struct/unions."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1521020079, "post_id": 49273830, "comment_id": 85550644, "body": "If <code>structB</code> is a typedef&#39;ed struct then you cannot simply use it in a condition. You need to use a member of the struct."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1521020347, "post_id": 49273830, "comment_id": 85550841, "body": "Please always provide complete examples. Your code cannot compile without a <code>typedef</code>."}], "answers": [{"comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1521020290, "post_id": 49274124, "comment_id": 85550800, "body": "Did you see the comment in the snippet where the error arises? It is obviously not about missing <code>struct</code> keyword."}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1521021359, "post_id": 49274124, "comment_id": 85551524, "body": "I modified @Gerhardh"}], "tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 0, "last_activity_date": 1521021384, "last_edit_date": 1521021384, "creation_date": 1521020147, "answer_id": 49274124, "question_id": 49273830, "link": "https://stackoverflow.com/questions/49273830/c-error-expression-must-have-arithmetic-or-pointer-type-while-accessing-union-m/49274124#49274124", "title": "C error: expression must have arithmetic or pointer type while accessing union member within structure", "body": "<p>The problem in the below statement</p>\n\n<pre><code>structX *sxp = *sxpp;\n</code></pre>\n\n<p>It should be <code>struct structX *sxp = *sxpp;</code></p>\n\n<p>Or first <code>typedef</code> the structure as</p>\n\n<pre><code>typedef struct structX\n{\n  union {\n    /* make sure below structure are typedefed above */\n    structA varA; /* structA is a structure */\n    structB varB; /* structB is a structure */\n  } unionX;\n}structX;\n</code></pre>\n\n<p>And then create the variable as</p>\n\n<pre><code>structX *sxp = *sxpp;\n</code></pre>\n\n<p>Modify the <code>foo</code> function accordingly</p>\n\n<pre><code>void foo(structX **sxpp) { ... } /* if typedefed */\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void foo(struct structX **sxpp) { ... } /* if not typedefed\n</code></pre>\n\n<p><strong>Edit</strong> : Since your question doesn't explain about <code>structA</code> and <code>structB</code>. lets say <code>structB</code> looks like</p>\n\n<pre><code>typedef struct struct_b {\n        int y;\n}structB;\n</code></pre>\n\n<p>the code block </p>\n\n<pre><code>if (sxp-&gt;xb) {\n            ...\n}\n</code></pre>\n\n<p>should be below one if you want to check whether member of <code>structB</code> is <code>NULL</code> or not</p>\n\n<pre><code>if (sxp-&gt;xb.y) { /* let say y is data member of structB */\n       ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": false, "score": 1, "last_activity_date": 1521021809, "last_edit_date": 1521021809, "creation_date": 1521020490, "answer_id": 49274257, "question_id": 49273830, "link": "https://stackoverflow.com/questions/49273830/c-error-expression-must-have-arithmetic-or-pointer-type-while-accessing-union-m/49274257#49274257", "title": "C error: expression must have arithmetic or pointer type while accessing union member within structure", "body": "<p>In this statement:</p>\n\n<pre><code>if (sxp-&gt; xb) { ... }\n</code></pre>\n\n<p>you are trying to evaluate a struct (<code>sxp-&gt;unionX.varB</code>) as either true or false. Your compiler is trying to tell you that this won't work. The expression inside an <code>if()</code> statement must either be an arithmetic value (e.g., <code>if (i &lt; 10)</code>, where <code>i &lt; 10</code> evaluates to 0 or 1), or a pointer (e.g., <code>f = fopen(\"a.txt\", \"r\"); if (f) { ... }</code>).</p>\n\n<p>You can't evaluate a struct in this way. Did you perhaps mean to check the value of an element of <code>varB</code> inside this union?</p>\n"}], "owner": {"reputation": 525, "user_id": 1612078, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ee1650588ff87aa9599a7e0dd4423e76?s=128&d=identicon&r=PG", "display_name": "user1612078", "link": "https://stackoverflow.com/users/1612078/user1612078"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1373, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1521021809, "creation_date": 1521019405, "last_edit_date": 1521019872, "question_id": 49273830, "link": "https://stackoverflow.com/questions/49273830/c-error-expression-must-have-arithmetic-or-pointer-type-while-accessing-union-m", "title": "C error: expression must have arithmetic or pointer type while accessing union member within structure", "body": "<p>Getting error <code>error: expression must have arithmetic or pointer type</code> in following code snippet. Not sure whats going wrong.</p>\n\n<pre><code>struct structX\n{\n  union {\n    structA varA; /* structA is a structure */\n    structB varB; /* structB is a structure */\n  } unionX;\n\n#define xa unionX.varA\n#define xb unionX.varB \n}\n\nvoid foo(structX **sxpp) {\n  structX *sxp = *sxpp;\n  /* i want to do null check for xb */\n  if (sxp-&gt; xb) /* error: expression must have arithmetic or pointer type */\n  {\n     ...\n  }\n}\n</code></pre>\n\n<p>I tried to deference the pointer as well, something like this, but no success.</p>\n\n<pre><code>if ((**sxpp).xb)\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1155, "user_id": 2554220, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d2bfcc580376aee99a1985dd462785dd?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/2554220/ben"}, "edited": false, "score": 0, "creation_date": 1521018784, "post_id": 49273524, "comment_id": 85549822, "body": "What is the compiler error?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521019438, "post_id": 49273524, "comment_id": 85550226, "body": "Just drop the struct tag. <code>typedef struct CtrlStruct { ... } CtrlStruct ;</code> -&gt; <code>typedef struct { ... } CtrlStruct;</code>. Since the struct is not self-referencing, you have no use of a struct tag."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1521019459, "post_id": 49273524, "comment_id": 85550236, "body": "If the compiler doesn&#39;t &quot;recognise&quot; the struct, it will issue a diagnostic (i.e. error message).  Try describing that.    Also, your example includes a lot of code (including headers, etc) that are not related to your problem.   Try cutting the code down to produce an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and there will be more chance that someone will be able to help you."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1521019865, "post_id": 49273524, "comment_id": 85550504, "body": "The name of C file is not relevant. The only important thing is that you include that header in the C file. Here it is probably &quot;CtrlStruct_gr7.h&quot;. What ist <code>NAMESPACE_INIT(ctrlGr7);</code> doing?"}], "answers": [{"comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1521019759, "post_id": 49273701, "comment_id": 85550435, "body": "He wants to use <code>CtrlStruct*</code> Your suggested fix does not provide a typedef at all or a typedef with lowercase name. And why should he change this? His way is perfectly OK for C."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1521020680, "post_id": 49273701, "comment_id": 85551046, "body": "I really don&#39;t understand your answer. What&#39;s the naming issue you refere to ? He use &quot;typedef struct name { } names;&quot;"}], "tags": [], "owner": {"reputation": 72, "user_id": 9469600, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-M7O1PxhkjuU/AAAAAAAAAAI/AAAAAAAAAB4/ZxTfKJP9V4E/photo.jpg?sz=128", "display_name": "Daniel Mor", "link": "https://stackoverflow.com/users/9469600/daniel-mor"}, "is_accepted": false, "score": -2, "last_activity_date": 1521019022, "creation_date": 1521019022, "answer_id": 49273701, "question_id": 49273524, "link": "https://stackoverflow.com/questions/49273524/structure-defined-in-header-file-not-found-in-c-file/49273701#49273701", "title": "Structure defined in header file not found in C file", "body": "<p>You have naming issue\nshould be:</p>\n\n<pre><code>struct CtrlStruct\n{\nCtrlIn *inputs;   ///&lt; controller inputs\nCtrlOut *outputs; ///&lt; controller outputs\nRobotPosition *rob_pos; ///&lt; robot position\nOpponentsPosition *opp_pos; ///&lt; opponents position\nSpeedRegulation *sp_reg; ///&lt; speed regulation\nRobotCalibration *calib; ///&lt; calibration\nPathPlanning *path; ///&lt; path-planning\nStrategy *strat; ///&lt; strategy\nint main_state; ///&lt; main state\nint robot_id;   ///&lt; ID of the robot\nint team_id;    ///&lt; ID of the team\n};\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>typedef struct CtrlStruct{\nCtrlIn *inputs;   ///&lt; controller inputs\nCtrlOut *outputs; ///&lt; controller outputs\nRobotPosition *rob_pos; ///&lt; robot position\nOpponentsPosition *opp_pos; ///&lt; opponents position\nSpeedRegulation *sp_reg; ///&lt; speed regulation\nRobotCalibration *calib; ///&lt; calibration\nPathPlanning *path; ///&lt; path-planning\nStrategy *strat; ///&lt; strategy\nint main_state; ///&lt; main state\nint robot_id;   ///&lt; ID of the robot\nint team_id;    ///&lt; ID of the team\n}ctrlStruct;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6062213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aad61ebb1c2b2378af613d6feb128cb0?s=128&d=identicon&r=PG&f=1", "display_name": "Gigi", "link": "https://stackoverflow.com/users/6062213/gigi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521019236, "creation_date": 1521018488, "question_id": 49273524, "link": "https://stackoverflow.com/questions/49273524/structure-defined-in-header-file-not-found-in-c-file", "title": "Structure defined in header file not found in C file", "body": "<p>I created a header file in which I defined a structure called CtrlStruct :</p>\n\n<pre><code>typedef struct CtrlStruct\n{\n    CtrlIn *inputs;   ///&lt; controller inputs\n    CtrlOut *outputs; ///&lt; controller outputs\n    RobotPosition *rob_pos; ///&lt; robot position\n    OpponentsPosition *opp_pos; ///&lt; opponents position\n    SpeedRegulation *sp_reg; ///&lt; speed regulation\n    RobotCalibration *calib; ///&lt; calibration\n    PathPlanning *path; ///&lt; path-planning\n    Strategy *strat; ///&lt; strategy\n    int main_state; ///&lt; main state\n    int robot_id;   ///&lt; ID of the robot\n    int team_id;    ///&lt; ID of the team\n} CtrlStruct;\n</code></pre>\n\n<p>I then use this structure in my C file and I include the header in my C file (the C file and the header have the same name). Despite that, my compiler doesn't recognise this structure.</p>\n\n<pre><code>#include \"CtrlStruct_gr7.h\"\n#include \"namespace_ctrl.h\"\n#include \"init_pos_gr7.h\"\n#include \"odometry_gr7.h\"\n#include \"opp_pos_gr7.h\"\n#include \"speed_regulation_gr7.h\"\n#include \"calibration_gr7.h\"\n#include \"strategy_gr7.h\"\n#include \"path_planning_gr7.h\"\n#include \"ctrl_io.h\"\n\nNAMESPACE_INIT(ctrlGr7);\n\n/*! \\brief initialize the controller structure\n*\n* \\param[in] inputs inputs of the controller\n* \\param[in] outputs outputs of the controller\n* \\return controller main structure\n*\n* Many parameters are set to arbitrary values, which will be corrected in 'controller_init'.\n*/\nCtrlStruct* init_CtrlStruct(CtrlIn *inputs, CtrlOut *outputs)\n{\n    int i;\n    CtrlStruct* cvs;\n\n    cvs = (CtrlStruct*)malloc(sizeof(CtrlStruct));\n</code></pre>\n\n<p>Does someone know what it is due to ? </p>\n"}, {"tags": ["c", "char", "data-conversion", "unsigned"], "comments": [{"owner": {"reputation": 5167, "user_id": 4862613, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1583232551699623/picture?type=large", "display_name": "Maldus", "link": "https://stackoverflow.com/users/4862613/maldus"}, "edited": false, "score": 0, "creation_date": 1521018020, "post_id": 49273109, "comment_id": 85549359, "body": "I didn&#39;t know about two&#39;s complement, and I though negative values where handled with a single bit. As I said, I had no idea how to put this concept into words and query it on google. You can either provide an answer or, if you have the power to, flag this question as invalid. Passive-aggressive comments achieve nothing but wasting your time."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521018322, "post_id": 49273109, "comment_id": 85549555, "body": "Yes there is a simple answer: enable compiler warnings. And then never use the <code>char</code> type for any other purpose than storing characters - see linked duplicates. Use <code>uint8_t</code> for raw binary data."}], "answers": [{"comments": [{"owner": {"reputation": 5167, "user_id": 4862613, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1583232551699623/picture?type=large", "display_name": "Maldus", "link": "https://stackoverflow.com/users/4862613/maldus"}, "edited": false, "score": 0, "creation_date": 1521017492, "post_id": 49273185, "comment_id": 85549055, "body": "I was under the impression the negative value was expressed with a single bit as an int. Oh well, I doubt I would have found out on my own. Thanks!"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1521017524, "last_edit_date": 1521017524, "creation_date": 1521017297, "answer_id": 49273185, "question_id": 49273109, "link": "https://stackoverflow.com/questions/49273109/char-vs-unsigned-char-in-conversion-to-int/49273185#49273185", "title": "Char vs unsigned char in conversion to int", "body": "<p>It's implementation defined if a <code>char</code> is signed or unsigned.</p>\n\n<p>If <code>char</code> is signed, then when being <a href=\"http://en.cppreference.com/w/c/language/conversion#Integer_promotions\" rel=\"nofollow noreferrer\">promoted to an <code>int</code></a> it will be <em>sign extended</em>, so a negative value will keep its negative value after the promotion.</p>\n\n<p>The leading <code>1</code> bits is how negative numbers are represented in <a href=\"https://en.wikipedia.org/wiki/Two&#39;s_complement\" rel=\"nofollow noreferrer\">two's complement</a> systems, which is the most common way to handle negative numbers.</p>\n\n<hr>\n\n<p>If, with your compiler, <code>char</code> is signed (which it seems to be) then the initialization of <code>c1</code> should generate a warning. If it doesn't then you need to enable more warnings.</p>\n"}, {"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 2, "last_activity_date": 1521017706, "creation_date": 1521017706, "answer_id": 49273304, "question_id": 49273109, "link": "https://stackoverflow.com/questions/49273109/char-vs-unsigned-char-in-conversion-to-int/49273304#49273304", "title": "Char vs unsigned char in conversion to int", "body": "<p><code>char c1 = 0x86;</code> here <code>c1</code> by default type is <code>signed</code></p>\n\n<pre><code>c1 =&gt; 1000 0110\n      |\n      signed bit is set(1) \n</code></pre>\n\n<p>When statement\n<code>i1 = (unsigned int) c1;</code> executes sign bit of <code>c1</code> gets copied into remaining bytes of <code>i1</code> as</p>\n\n<pre><code>   i1 =&gt;                         1000 0110\n                                 |\n                                 |&lt;--this sign bit \n   1111 1111 1111 1111 1111 1111 1000 0110 \n     f   f    f    f    f    f     8    6\n</code></pre>\n\n<p>And <code>i2 = (unsigned int) c2;</code> here <code>i2</code> and <code>c2</code> both declared as <code>unsigned</code> type so in this case <code>sign bit</code> will not be copied into remaining bytes so it prints what's the data in <code>1st byte</code> which is <code>0x86</code></p>\n"}], "owner": {"reputation": 5167, "user_id": 4862613, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1583232551699623/picture?type=large", "display_name": "Maldus", "link": "https://stackoverflow.com/users/4862613/maldus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "closed_date": 1521018188, "accepted_answer_id": 49273185, "answer_count": 2, "score": 0, "last_activity_date": 1521018235, "creation_date": 1521017048, "question_id": 49273109, "link": "https://stackoverflow.com/questions/49273109/char-vs-unsigned-char-in-conversion-to-int", "closed_reason": "Duplicate", "title": "Char vs unsigned char in conversion to int", "body": "<p>I stumbled upon this problem while saving an int in a char array and converting it back. I used bit shifts and logic or, but my result ended up with all the bytes after the least significant as 0xFF.</p>\n\n<p>My question is: considering this example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n        char c1 = 0x86;\n        unsigned char c2 = 0x86;\n        unsigned int i1 = 0, i2 = 0;\n\n        i1 = (unsigned int) c1;\n        i2 = (unsigned int) c2;\n\n        printf(\"%x-%x\\n\", i1, i2);\n}\n</code></pre>\n\n<p>Why is the output <code>ffffff86-86</code>? Why does the char have all its upper bits set to 1?</p>\n\n<p>I'm sure there is a very simple answer, but I couldn't come up with a specific enough query to find it on google.</p>\n"}, {"tags": ["c", "function", "pointers", "initialization", "null-pointer"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 6, "creation_date": 1521017031, "post_id": 49273088, "comment_id": 85548782, "body": "<code>if ((tab == NULL) || (size &lt;= 0) || (min = NULL)) </code> should have a <code>==</code>. You are setting <code>min</code> to <code>NULL</code>."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1521017059, "post_id": 49273088, "comment_id": 85548796, "body": "<code>&amp;*(ptab + i)</code> should be <code>ptab + i</code> for clarity."}, {"owner": {"reputation": 3, "user_id": 9490153, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Wiron", "link": "https://stackoverflow.com/users/9490153/wiron"}, "edited": false, "score": 0, "creation_date": 1521017109, "post_id": 49273088, "comment_id": 85548831, "body": "Ah well, I did not notice, thank you."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1521018009, "post_id": 49273088, "comment_id": 85549349, "body": "It is a good idea to write constant value on the left side of the comparison <code>NULL == min</code>. This way such a typo will cause a compile time error message."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1521020484, "post_id": 49273088, "comment_id": 85550933, "body": "C language neither knows anything about exceptions, nor about <code>nullptr</code>. Are you using a C++ compiler?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1521020649, "post_id": 49273088, "comment_id": 85551022, "body": "@WeatherVane you should make this an answer."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521021914, "post_id": 49273088, "comment_id": 85551925, "body": "Use a better compiler. Any half-decent compiler will give a message pointing out this bug."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1521022006, "post_id": 49273088, "comment_id": 85551999, "body": "@VTT No that&#39;s a horrible idea from the 1980s. That trick became obsolete in 1989 when Turbo C started to warn for &quot;possible incorrect assignment&quot;. Since then, all usable compilers warn for this. The solution is to use a usable compiler, not to write ugly tricks from the early 1980s such as &quot;the Yoda conditions&quot;."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1521022884, "post_id": 49273088, "comment_id": 85552618, "body": "@Lundin Nope, this is a pragmatic approach preventing bugs caused by unpreventable typos. Relying on compiler warning too much is a direct road to farming bugs. Note that <a href=\"https://wandbox.org/permlink/0ypsWuWrYphcqIk8\" rel=\"nofollow noreferrer\">these warnings won&#39;t capture this problem in all context</a> and these warnings are actually off by default."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1521025018, "post_id": 49273088, "comment_id": 85554096, "body": "@VTT This issue was debated in the 1980s and there is an industry consensus that Yoda condition cause more harm than good, period. What you want to prove by linking some C++ code, I have no idea. This question is about C."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521025676, "post_id": 49273088, "comment_id": 85554617, "body": "@Lundin Well, my bad, but the <a href=\"https://wandbox.org/permlink/1fWOmrs6IVU1ScDw\" rel=\"nofollow noreferrer\">equivalent C code will be almost exactly the same</a>. <i>&quot;is an industry consensus that Yoda condition cause more harm than good&quot;</i> citation needed... mcve of such harm would be even beter."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1521026997, "post_id": 49273088, "comment_id": 85555560, "body": "Isn&#39;t even MISRA demanding to put the constant first in such a condition?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1521028753, "post_id": 49273088, "comment_id": 85556722, "body": "@VTT Anyone writing code like <code>int is_four = x = 4;</code> deserve all the bugs they can get. Now lets assume that you write slightly less insane C code instead: <code>_Bool is_four = x = 4;</code>. &quot;Suggest parenthesis around assignment&quot;. Otherwise, the deal breaker here is that you can write <code>a = b</code> - in comes Yoda: <code>b = a</code>. How did this solve the bug? We don&#39;t always compare against a constant, so we <i>have</i> to rely on static analysis to find this bug. Luckily, every useful compiler on the market does warn for assignment in conditions."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1521029768, "post_id": 49273088, "comment_id": 85557431, "body": "@Gerhardh No, MISRA demands that 1) comparisons must be explicitly boolean, i.e <code>if(ptr == NULL)</code> rather than <code>if(ptr)</code>, and  2) the result of an assignment expression should never be used. So any MISRA checker will catch this bug, just as any half-decent compiler. I think pretty much any tool on the market apart from MSVC will catch the bug."}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1521095088, "post_id": 49273088, "comment_id": 85588042, "body": "@Lundin There is nothing special about that code. <code>_Bool</code> wasn&#39;t even a thing until C99 and regular <code>int</code> are still widely used as Boolean values today and not going away anytime soon. <a href=\"https://wandbox.org/permlink/RwUUbHhM4pCQJtET\" rel=\"nofollow noreferrer\">Here is another example</a>, not involving bool substitution. If <code>b</code> is a constant value then writing <code>b = a</code> would catch the bug. If it is not then Yoda conditions are not applicable. However you can not conclude them bad anyhow because of this."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1521103263, "post_id": 49273088, "comment_id": 85591666, "body": "@VTT Simply don&#39;t write trash code with 3 operators on a single line - that never ends well for <i>any</i> operators in the C language. If you write trash code, it is not surprise if the result is also trash. I&#39;m done with this discussion."}], "answers": [{"comments": [{"owner": {"reputation": 474, "user_id": 3422711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/324c377cd2e54018001025206e1e426e?s=128&d=identicon&r=PG", "display_name": "Larry.He", "link": "https://stackoverflow.com/users/3422711/larry-he"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1521021319, "post_id": 49273405, "comment_id": 85551492, "body": "I think you have ignored *min = *(tab + i); this is wrong no matter whether you record the position the min, as min is 2, *min is 0x00000002, which cannot be access"}, {"owner": {"reputation": 474, "user_id": 3422711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/324c377cd2e54018001025206e1e426e?s=128&d=identicon&r=PG", "display_name": "Larry.He", "link": "https://stackoverflow.com/users/3422711/larry-he"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1521022228, "post_id": 49273405, "comment_id": 85552159, "body": "Yes, I misunderstand"}], "tags": [], "owner": {"reputation": 474, "user_id": 3422711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/324c377cd2e54018001025206e1e426e?s=128&d=identicon&r=PG", "display_name": "Larry.He", "link": "https://stackoverflow.com/users/3422711/larry-he"}, "is_accepted": true, "score": 0, "last_activity_date": 1521022559, "last_edit_date": 1521022559, "creation_date": 1521018061, "answer_id": 49273405, "question_id": 49273088, "link": "https://stackoverflow.com/questions/49273088/c-initialized-pointer-throws-exception-about-nullptr/49273405#49273405", "title": "C - initialized pointer throws exception about nullptr", "body": "<p>The critical error is that <code>if ((tab == NULL) || (size &lt;= 0) || (min = NULL))</code> assign var min to NULL.</p>\n\n<p>if you need to record the minimum value, you can use pointer address as parameter</p>\n\n<pre><code>int tab_min(const int* tab, int size, int **min);\n</code></pre>\n\n<p>and </p>\n\n<pre><code>if (*(tab + i) &lt; **min) *min = (tab + i);\n</code></pre>\n\n<p>and call like</p>\n\n<pre><code>tab_min(ptab, limit, &amp;pmin);\n</code></pre>\n\n<p>Thanks @Gerhardh for pointing out my mistake</p>\n"}], "owner": {"reputation": 3, "user_id": 9490153, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Wiron", "link": "https://stackoverflow.com/users/9490153/wiron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 49273405, "answer_count": 1, "score": 0, "last_activity_date": 1521022559, "creation_date": 1521016966, "last_edit_date": 1521019658, "question_id": 49273088, "link": "https://stackoverflow.com/questions/49273088/c-initialized-pointer-throws-exception-about-nullptr", "title": "C - initialized pointer throws exception about nullptr", "body": "<p>I have a code that intends to find minimal value using pointers, using a function.\nThe problem is that even though I initialize the pointer while debugging it shows:</p>\n\n<blockquote>\n  <p>Exception thrown: read access violation.\n  min was nullptr.</p>\n</blockquote>\n\n<p>At line 37. The code can be seen below:</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include \"stdio.h\"\n\nint tab_min(const int* tab, int size, int *min);\n\nint main()\n{\n    int limit;\n    int tab[100];\n    int * ptab = tab;\n    int min = 2;\n    int *pmin = &amp;min;\n\n    printf(\"Number of elements: \");\n    scanf(\"%d\", &amp;limit);\n    printf(\"List the elements \\n\");\n    for (int i = 0; i &lt; limit; i++)\n    {\n        scanf(\"%d\", &amp;*(ptab + i)); \n    }\n    tab_min(ptab, limit, pmin);\n\n    return 0;\n}\n\nint tab_min(const int* tab, int size, int *min) \n{\n\n    if ((tab == NULL) || (size &lt;= 0) || (min = NULL)) \n    {\n        return 0; \n    }\n    else \n    {\n        for (int i = 0; i &lt; size; i++)\n        {\n            if (*(tab + i) &lt; *min) *min = *(tab + i); //Exception is here\n        }\n    return 0;\n    }\n}\n</code></pre>\n\n<p>Can somebody please explain to me what is wrong with my reasoning?</p>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "comments": [{"owner": {"reputation": 235601, "user_id": 60761, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bf43bae0431d8f4a062234b5e3a0cb9?s=128&d=identicon&r=PG&f=1", "display_name": "Henk Holterman", "link": "https://stackoverflow.com/users/60761/henk-holterman"}, "edited": false, "score": 1, "creation_date": 1521015918, "post_id": 49272620, "comment_id": 85548188, "body": "A quick scan: Your <code>read()</code> does a realloc but on a pointer that was passed in by value."}], "answers": [{"tags": [], "owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 4, "last_activity_date": 1521015836, "creation_date": 1521015836, "answer_id": 49272753, "question_id": 49272620, "link": "https://stackoverflow.com/questions/49272620/bytes-seem-to-be-shifted/49272753#49272753", "title": "Bytes seem to be shifted", "body": "<p>Inside of <code>read</code> you reallocate buffer for structures storing a new value in <code>lego</code> and invalidating previous once, however <code>lego</code> is a function parameter so calling code still has an old (now invalid) pointer <code>legobausteine</code>. If you are going to reallocate it then you need to pass a pointer to this pointer. Also when you initially allocate buffer with one item for <code>legobausteine</code> in <code>main</code> it is never initialized and initially contains garbage.</p>\n"}], "owner": {"reputation": 437, "user_id": 9277759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f16464223892bdc7d0238c9e9117a26?s=128&d=identicon&r=PG&f=1", "display_name": "TheProgrammer", "link": "https://stackoverflow.com/users/9277759/theprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 49272753, "answer_count": 1, "score": 0, "last_activity_date": 1521015836, "creation_date": 1521015252, "question_id": 49272620, "link": "https://stackoverflow.com/questions/49272620/bytes-seem-to-be-shifted", "title": "Bytes seem to be shifted", "body": "<p>I wrote a program and there is one bug in it. I tried to solve it since yesterday midday but it seems to be impossible.\nI have removed a lot of methods here to just let you see important code. The bug occurs when I read in the data from the file. The reading works and the writing on the array should work too. But if I output the data (with ausgabeBS()) after reading them there are completely random numbers on it.\nPlease look at case 6 of the switch and in the method read().</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct baustein\n{\n    int hoehe;\n    int breite;\n    int length;\n    int rot;\n    int gruen;\n    int blau;\n} BAUSTEIN;\n\nvoid eingabeBS(BAUSTEIN *bs);\nvoid ausgabeBS(BAUSTEIN bs);\nint compareBS(BAUSTEIN bs1, BAUSTEIN bs2);\nvoid rem(BAUSTEIN *bs, int stelle, int length);\nint auswahl();\nint getVolume(BAUSTEIN bs);\nvoid compare(int length, BAUSTEIN *lego);\nvoid quicksort(int links, int rechts, BAUSTEIN feld[]);\nvoid speichern(int length, BAUSTEIN *lego);\nint read(BAUSTEIN *lego, int length);\n\nint main()\n{\n    BAUSTEIN *legobausteine;\n    legobausteine = (BAUSTEIN*)malloc(1 * sizeof(BAUSTEIN));\n    int length = 0;\n    int command = 1;\n    int chosen;\n    while (1)\n    {\n        system(\"cls\");\n        command = auswahl();\n        switch (command)\n        {\n        case 0:\n            length++;\n            legobausteine = (BAUSTEIN *)realloc(legobausteine, sizeof(BAUSTEIN) * length);\n            eingabeBS(&amp;legobausteine[length - 1]);\n            break;\n        case 1:\n            printf(\"Welches der Elemente von [0; %d[ soll ausgegeben werden: \", length);\n            scanf(\"%d\", &amp;chosen);\n            if (chosen &lt; 0 || chosen &gt; length - 1)\n            {\n                printf(\"Dies ist keine gueltige Eingabe!\\n\");\n                system(\"pause\");\n                break;\n            }\n            ausgabeBS(legobausteine[chosen]);\n            break;\n        case 2:\n            printf(\"Welches der Elemente von [0; %d[ soll entfernt werden: \", length);\n            scanf(\"%d\", &amp;chosen);\n            if (chosen &lt; 0 || chosen &gt; length - 1)\n            {\n                printf(\"Dies ist keine gueltige Eingabe!\\n\");\n                system(\"pause\");\n                break;\n            }\n            rem(legobausteine, chosen, length);\n            length--;\n            break;\n        case 3:\n            compare(length, legobausteine);\n            break;\n        case 4:\n            if (length != 0)\n            {\n                quicksort(0, length - 1, legobausteine);\n            }\n            else\n            {\n                printf(\"\\nEs sind keine Inhalte vorhanden!\\n\");\n                system(\"pause\");\n            }\n            break;\n        case 5:\n            speichern(length, legobausteine);\n            break;\n        case 6:\n            length = read(legobausteine, length);\n            printf(\"FINAL: %d\", legobausteine[length - 1].length); //here a random number is outputed.\n            break;\n        case 7:\n            return 0;\n        default:\n            printf(\"Das ist kein gueltiger Befehl!\\n\");\n            system(\"pause\");\n            break;\n        }\n    }\n    return 0;\n}\n\nvoid speichern(int length, BAUSTEIN *lego)\n{\n    FILE *f = fopen(\"data.txt\", \"w\");\n\n    for (int i = 0; i &lt; length; i++)\n    {\n        fprintf(f, \"%d;%d;%d;%d;%d;%d;\", lego[i].hoehe, lego[i].breite, lego[i].length, lego[i].rot, lego[i].gruen, lego[i].blau);\n    }\n    fprintf(f, \"\\n\");\n    fclose(f);\n}\n\nint read(BAUSTEIN *lego, int length)\n{\n    FILE *f;\n    f = fopen(\"data.txt\", \"r\");\n    if (f)\n    {\n        int c;\n        char buff[300];\n        int counter = 0;\n        printf(\"HIER \\n\");\n        while ((c = getc(f)) != EOF)\n        {\n            buff[counter] = c;\n            printf(\"%c\", c);\n            counter++;\n        }\n        fclose(f);\n\n        char *data;\n        data = strtok(buff, \"\\n\");\n        printf(\"Daten: %    s\", &amp;data[0]);\n        int wert = 0;\n        char *temp;\n\n        temp = strtok(data, \";\");\n\n        while(temp != NULL){\n            if(wert % 6 == 0){\n                printf(\"\\nReallokiert!\\n\");\n                length++;\n                lego = (BAUSTEIN *)realloc(lego, sizeof(BAUSTEIN) * length);\n            }\n            printf(\"\\n%d\", atoi(temp));\n            switch(wert % 6){\n                case 0:\n                    lego[length - 1].hoehe = atoi(temp);\n                    printf(\"Wert hier: %d\\n\",lego[length-1].hoehe);\n                case 1:\n                    lego[length - 1].breite = atoi(temp);\n                case 2:\n                    lego[length - 1].length = atoi(temp);\n                case 3:\n                    lego[length - 1].rot = atoi(temp);\n                case 4:\n                    lego[length - 1].gruen = atoi(temp);\n                case 5:\n                    lego[length - 1].blau = atoi(temp);\n                }\n            temp = strtok(NULL, \";\");\n            wert++;\n        }\n    }\n    else\n    {\n        printf(\"Es sind noch keine Daten vorhanden!\");\n    }\n    return length;\n}\n\nvoid ausgabeBS(BAUSTEIN bs)\n{\n    printf(\"Die Hoehe betraegt %d mm\\n\", bs.hoehe);\n    printf(\"Die Breite betraegt %d mm\\n\", bs.breite);\n    printf(\"Die length betraegt %d mm\\n\", bs.length);\n    printf(\"Der Rotwert betraegt %d \\n\", bs.rot);\n    printf(\"Der Gruenwert betraegt %d \\n\", bs.gruen);\n    printf(\"Der Blauwert betraegt %d \\n\", bs.blau);\n    system(\"pause\");\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1521012575, "post_id": 49271768, "comment_id": 85546593, "body": "Where do you allocate for <code>path</code>, <code>numbre</code>, and <code>part</code>? See: <a href=\"http://stackoverflow.com/q/605845/995714\"><b>Do I cast the result of malloc?</b></a> which would leave you with <code>nodo *nuevo=malloc (sizeof *nuevo);</code> Please provide <a href=\"http://stackoverflow.com/help/mcve\"><b>A Minimal, Complete, and Verifiable example</b></a>."}], "answers": [{"tags": [], "owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "is_accepted": false, "score": 1, "last_activity_date": 1521012636, "last_edit_date": 1521012636, "creation_date": 1521012328, "answer_id": 49271833, "question_id": 49271768, "link": "https://stackoverflow.com/questions/49271768/fill-a-list-of-struct-in-c/49271833#49271833", "title": "fill a list of struct in c", "body": "<p>You have not specified but it appears that <code>char nombre[5]</code> is local and so is on function stack</p>\n\n<p>So if you assign that to nuevo->nombre and use it in another function its going to lead to undefined behavior as stackframe would now be pointing somewhere else</p>\n\n<p>Better approach will be allocate memory to <code>nuevo-&gt;nombre</code> with <code>malloc</code> then copy  your string into it using <code>strcpy</code></p>\n"}, {"tags": [], "owner": {"reputation": 292, "user_id": 5147834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/732459705630740316c5a2965662e056?s=128&d=identicon&r=PG&f=1", "display_name": "Axeon Thra", "link": "https://stackoverflow.com/users/5147834/axeon-thra"}, "is_accepted": false, "score": 0, "last_activity_date": 1521012573, "creation_date": 1521012573, "answer_id": 49271891, "question_id": 49271768, "link": "https://stackoverflow.com/questions/49271768/fill-a-list-of-struct-in-c/49271891#49271891", "title": "fill a list of struct in c", "body": "<p>malloc enough space to store data for each of the pointer in your struct and copy strings to the allocated pointers.</p>\n\n<pre><code>nuevo-&gt;path = malloc(strlen(path) + 1);\nstrcpy(nuevo-&gt;path, path);\n</code></pre>\n\n<p>(and so on for other fields as well)</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 9465799, "user_type": "registered", "profile_image": "https://graph.facebook.com/1733152386741415/picture?type=large", "display_name": "Jaime Belloso", "link": "https://stackoverflow.com/users/9465799/jaime-belloso"}, "edited": false, "score": 0, "creation_date": 1521088014, "post_id": 49272081, "comment_id": 85585829, "body": "Thank you for this work for me, save me, I really appreciate it !!"}], "tags": [], "owner": {"reputation": 57, "user_id": 4328129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/028611679d173807d966b2802bd32a98?s=128&d=identicon&r=PG&f=1", "display_name": "MO1988", "link": "https://stackoverflow.com/users/4328129/mo1988"}, "is_accepted": true, "score": 0, "last_activity_date": 1521013282, "creation_date": 1521013282, "answer_id": 49272081, "question_id": 49271768, "link": "https://stackoverflow.com/questions/49271768/fill-a-list-of-struct-in-c/49272081#49272081", "title": "fill a list of struct in c", "body": "<p>In the first method you are assigning the chars pointer (nuevo->path and nuevo->nombre) to the char array address, so if the char arrays are local or they value change it will affect your pointers.</p>\n\n<p>In the second method the compiler will allocate memory to your pointer and assign the value to them so you can retrieve the value in any functions.</p>\n\n<p>to make first method works you need to change your code to below sample</p>\n\n<pre><code>    nuevo-&gt;path= (char *)malloc(strlen(path)+1);\n    strcpy(nuevo-&gt;path,path);\n    nuevo-&gt;nombre= (char *)malloc(strlen(nombre)+1);\n    strcpy(nuevo-&gt;nombre,nombre);\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 9465799, "user_type": "registered", "profile_image": "https://graph.facebook.com/1733152386741415/picture?type=large", "display_name": "Jaime Belloso", "link": "https://stackoverflow.com/users/9465799/jaime-belloso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 49272081, "answer_count": 3, "score": 0, "last_activity_date": 1521419118, "creation_date": 1521012011, "last_edit_date": 1521419118, "question_id": 49271768, "link": "https://stackoverflow.com/questions/49271768/fill-a-list-of-struct-in-c", "title": "fill a list of struct in c", "body": "<p>I have a problem Im using a list of struct in C, when I add an Item in the list I do this:</p>\n\n<pre><code>nodo *nuevo=(nodo*) malloc (sizeof(nodo));\n    char nombre[5]=\"vd\";\n    nombre[2]=letra;\n    nombre[3]=indice;\n    nombre[4]='\\0';\n    nuevo-&gt;siguiente = NULL;\n    nuevo-&gt;path= path;\n    nuevo-&gt;nombre= nombre;\n</code></pre>\n\n<p>this works but in another method when I try to get the values of nombre and path seems like if them are empty (\"\") \nbut when I Set the values by this way:</p>\n\n<pre><code>nuevo-&gt;path= \"anyString\";\nnuevo-&gt;nombre= \"anyString\";\n</code></pre>\n\n<p>in the other method I can get the values perfectly, any suggestion?\nthe struc nodo is this:</p>\n\n<pre><code>typedef struct{\n    char *path;\n    char *nombre;\n    particion *part;\n    struct nodo *siguiente;\n}nodo;\n</code></pre>\n\n<p>and when i save in the list i do this:</p>\n\n<pre><code> primero=nuevo;\n</code></pre>\n\n<p>where primero is of type nodo *</p>\n\n<p>and when I try to get the values, I use:</p>\n\n<pre><code> if(strcmp(aux-&gt;nombre,id)==0){\n            printf(\"Value is fine\");\n            break;\n        }\n</code></pre>\n\n<p>I will apreciate any sugestion or comment, thank to all.\nIm in Codeblocks in debian.</p>\n"}, {"tags": ["c++", "c", "operator-precedence"], "comments": [{"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 2, "creation_date": 1521012127, "post_id": 49271700, "comment_id": 85546375, "body": "This might help: <a href=\"https://stackoverflow.com/questions/9255147/does-p-increment-after-dereferencing\" title=\"does p increment after dereferencing\">stackoverflow.com/questions/9255147/&hellip;</a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1521012217, "post_id": 49271700, "comment_id": 85546416, "body": "Postfix <code>++</code> increments the variable, but returns the old value. That&#39;s the whole point of postfix <code>++</code>."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1521012267, "post_id": 49271700, "comment_id": 85546446, "body": "&quot;Precedence&quot; in C and C++ is lexical. &quot;Executed before&quot; is not something you should consult a precedence table for."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1521012323, "post_id": 49271700, "comment_id": 85546475, "body": "&quot;Operator precedence&quot; and &quot;order of evaluation&quot; are completely different things."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1521013069, "post_id": 49271700, "comment_id": 85546814, "body": "As @n.m. said, precedence and order are different things. Precedence defines that in <code>f(1)+g(2)*h(7)</code> the value returned from <code>f()</code> call will be added to a product of values of <code>g()</code> and <code>h()</code>, while order of evaluation defines (or sometimes does not) which of <code>f()</code>, <code>g()</code> and <code>h()</code> can be executed first and which last."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1521013083, "post_id": 49271700, "comment_id": 85546824, "body": "It&#39;s called <i>post increment</i> (<code>p++</code>) because the increment happens (notionally) <i>after</i> the value is taken. This is as opposed to <i>pre increment</i> (<code>++p</code>) where the increment happens <i>before</i> the value is taken."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1521014173, "post_id": 49271700, "comment_id": 85547324, "body": "Then that answer when it says that it&#39;s evaluated that way because postfix++ operator is higher precedence than the dereference operator is only half right then, that&#39;s what I&#39;m asking. As precedence isn&#39;t the sole factor."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1521020426, "post_id": 49271700, "comment_id": 85550895, "body": "@Zebra - It&#39;s a good idea to avoid mixing increments/decrements with other sub-expressions. Otherwise you sooner or later end up <a href=\"https://stackoverflow.com/questions/949433/why-are-these-constructs-using-undefined-behavior-in-c\">here</a>. <code>if (!a++)</code> is just <i>hard to read</i> code for no particular reason. &quot;Being too smart is not smart&quot;(TM)."}], "answers": [{"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1521012651, "post_id": 49271848, "comment_id": 85546633, "body": "<i>&quot;it has to be evaluated before any other operator that uses its value&quot;</i> - Can you clarify what you mean by that? What are you bundling with &quot;evaluation&quot;?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1521014228, "post_id": 49271848, "comment_id": 85547352, "body": "@StoryTeller by evaluation I mean executing a statement and determining its value?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1521014404, "post_id": 49271848, "comment_id": 85547418, "body": "There&#39;s no statement, only an expression with side effects. If you are implying the side effects are somehow also part of an &quot;atomic&quot; evaluation, your answer is wrong."}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": false, "score": 1, "last_activity_date": 1521012406, "creation_date": 1521012406, "answer_id": 49271848, "question_id": 49271700, "link": "https://stackoverflow.com/questions/49271700/operator-precedence-of-postfix-increment/49271848#49271848", "title": "Operator precedence of postfix increment", "body": "<p><code>p++</code> means increment p and return it's original value, it has to be evaluated before any other operator that uses its value. If you think of increment as a function it might be easier to understand:</p>\n\n<pre><code>int inc(int&amp; v)\n{\n  int value = v;\n  v++;\n  return value;\n}\n\nint a = 0;\nif (inc(a) == 0)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 2, "last_activity_date": 1521012899, "last_edit_date": 1521012899, "creation_date": 1521012537, "answer_id": 49271883, "question_id": 49271700, "link": "https://stackoverflow.com/questions/49271700/operator-precedence-of-postfix-increment/49271883#49271883", "title": "Operator precedence of postfix increment", "body": "<p>Your claim, <em>Condition is true, <code>a</code> is incremented after the condition check even if it's higher precedence than <code>!</code></em>, is wrong.<br>\nIt is not necessary that <code>a</code> will be incremented after the condition check. It can happen anytime. The only certainty is that in expression <code>!a++</code>, old value of <code>a</code> will be used for <code>!</code> operator.<br>\nOperator precedence will help in grouping operands. Operand in <code>!a++</code> will be grouped as <code>! (a++)</code>. This grouping doesn't mean that <code>a</code> will be incremented before <code>!</code> operator is applied to the result fo <code>a++</code>.</p>\n"}], "owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1521012899, "creation_date": 1521011732, "question_id": 49271700, "link": "https://stackoverflow.com/questions/49271700/operator-precedence-of-postfix-increment", "title": "Operator precedence of postfix increment", "body": "<p>I made a silly mistake of doing *p++; thinking that p would be dereferenced first and then the value pointed by p would get incremented. So I found that this is more akin to:</p>\n\n<p>*(p++);</p>\n\n<p>Because the postfix ++ increment operator has higher precedence than the * dereference operator.</p>\n\n<p>But now that I'm thinking in terms of operator precedence, I find that postfix++ is higher than for example the equality == operator, but in:</p>\n\n<pre><code>int a = 0;\nif (0 == a++) // Condition is true\n</code></pre>\n\n<p>And the same goes for ! logical NOT:</p>\n\n<pre><code>int a = 0;\nif (!a++) // Condition is true, a is incremented after the condition check\n          // even if it's higher precedence than !\n</code></pre>\n\n<p>So there must be more to it from what I've seen.</p>\n\n<p>I've heard about the right-to-left and clockwise/spiral rule, but every time I've tried to grasp it it escaped my understanding.</p>\n\n<p>I don't want a full explanation on the evaluation order, as I can struggle through that with my own reading. But am I at least right that it's not just a matter of operator precedence? For example the answer that *p++ is evaluated the way it is because the postfix++ operator is of higher precedence is only half right or part of the answer?</p>\n\n<p><a href=\"https://stackoverflow.com/a/15345591/4696802\">Link to answer</a></p>\n"}, {"tags": ["c", "memory", "memory-leaks", "vigenere"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1521010877, "post_id": 49271385, "comment_id": 85545880, "body": "Since <code>arrayLetter</code> is not null-terminated, you will get garbage when you print it with <code>printf(&quot;%s&quot;, arrayLetter);</code> \u2014 there&#39;s nothing that lets <code>printf()</code> stop processing when it reaches the end of the array."}, {"owner": {"reputation": 21, "user_id": 9489619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4995a2f4124b9cd39f128680224182?s=128&d=identicon&r=PG&f=1", "display_name": "NeedHlub", "link": "https://stackoverflow.com/users/9489619/needhlub"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1521011290, "post_id": 49271385, "comment_id": 85546037, "body": "So, what would be the correct way to fix this? What do you mean null-terminated?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1521011532, "post_id": 49271385, "comment_id": 85546123, "body": "In C, a string is a sequence of characters up to the first null byte \u2014 the null byte marks the end of the string, or terminates it.  Your <code>arrayLetter</code> doesn&#39;t have a null byte in it, so it isn&#39;t a string.  The <code>%s</code> format is intended for printing strings; printing non-strings leads to undefined behaviour, and frequently results in garbage being printed.  You could fix it by using <code>printf(&quot;%*s&quot;, (int)sizeof(arrayLetter), arrayLetter);</code> \u2014 the <code>*</code> means take an <code>int</code> value as the maximum number of characters to print, stopping if it encounters a null byte earlier."}, {"owner": {"reputation": 21, "user_id": 9489619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4995a2f4124b9cd39f128680224182?s=128&d=identicon&r=PG&f=1", "display_name": "NeedHlub", "link": "https://stackoverflow.com/users/9489619/needhlub"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1521012154, "post_id": 49271385, "comment_id": 85546390, "body": "The solution code suggested didn&#39;t seem to fix the error. The &quot;%*s&quot; is good to know though."}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 0, "creation_date": 1521012428, "post_id": 49271385, "comment_id": 85546522, "body": "apart from other reason statement <code>key[i] = key[j];</code> causing garbage data. what it seems to do ? there are only 6 elements in <code>key</code> and the block <code>if(i &gt;= sizeKey)</code>  is accessing out of range elements bcz loop rotates <code>sizePlainTextExample</code> times."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1521012444, "post_id": 49271385, "comment_id": 85546532, "body": "OK; then I&#39;ve not looked at enough of your code, and won&#39;t be doing so for a few hours as it is bedtime where I&#39;m living."}, {"owner": {"reputation": 21, "user_id": 9489619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4995a2f4124b9cd39f128680224182?s=128&d=identicon&r=PG&f=1", "display_name": "NeedHlub", "link": "https://stackoverflow.com/users/9489619/needhlub"}, "reply_to_user": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 0, "creation_date": 1521012776, "post_id": 49271385, "comment_id": 85546690, "body": "@achal I want the key to &quot;loop&quot; -&gt; {21, 4, 2, 19, 14, 17} {21, 4, 2, 19, 14, 17} etc. so the index will keep adding...jonathanLeffler: thanks for the looking at my code :)"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1521018067, "post_id": 49271385, "comment_id": 85549394, "body": "@JonathanLeffler <code>%*s</code> is not a solution here, it just let specify the preferred size of the field, if the string is shorter padding will appear, but if the string is longer than the field, the printing will just silently overflow."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1521038439, "post_id": 49271385, "comment_id": 85563709, "body": "@Jean-BaptisteYun&#232;s: You&#39;re right; I mistyped, omitting the crucial <code>.</code> \u2014 I intended <code>printf(&quot;%.*s&quot;, sizeArrayLetter, arrayLetter);</code> (or the equivalent with <code>sizeof()</code> and a cast).  It may or may not be relevant, but <code>arrayLetters</code> gets over-written by <code>vigenereCipherEncryptIndex()</code> and the result contains a lot of control characters (mostly ^B, <code>&#39;\\002&#39;</code>)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1521339817, "post_id": 49271385, "comment_id": 85688084, "body": "I&#39;ve taken another look at the code, and I confess that I&#39;m not sure what you&#39;re algorithm is.  It is different from any of the Vigenere encryption algorithms I&#39;ve seen before \u2014 and I&#39;ve seen a fair few.  I find the code hard to read, too.  The names are long and sort of self-explanatory, but they&#39;re unreadable too.  To the extent I understand what you&#39;re doing, you first scan the text to be encrypted and create an array that identifies somehow which characters are going to be encoded (that&#39;s <code>getMatchedIndex()</code>). <i>[\u2026continued\u2026]</i>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1521340188, "post_id": 49271385, "comment_id": 85688126, "body": "<i>[\u2026continuation\u2026]</i> You then call <code>vigenereCipherEncryptIndex()</code>, which allocates an array for the message and converts each character in the plaintext into an offset through the alphabet (so <code>&#39;a&#39;</code> is treated as 0), but it includes the key too.  Then finally you call <code>convertToNewEncryptedArray()</code> to post-process the result from the previous function, converting the numbers from 0..25 back to letters <code>&#39;a&#39;</code> to <code>&#39;z&#39;</code>, I think?  The final printout is then based on the size of the alphabet and not on the size of the message, which most peculiar. <i>[\u2026continued\u2026]</i>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1521340430, "post_id": 49271385, "comment_id": 85688154, "body": "<i>[\u2026continuation\u2026]</i> Normally, people manage to do the encoding in a single function that simply steps through the plain text and the key, producing one output letter at a time.  If there&#39;s a need to preserve the input text, then you need to allocate as much space as the plain text uses for the cipher text (including a null byte to terminate the string).  I trust you&#39;ve rethought your whole approach \u2014 and got it all working.  There are many questions about Vigenere cipher, often associated with the <a href=\"https://stackoverflow.com/questions/tagged/cs50\">cs50</a> tag.  They&#39;ll show you how other people have worked it out."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9489619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4995a2f4124b9cd39f128680224182?s=128&d=identicon&r=PG&f=1", "display_name": "NeedHlub", "link": "https://stackoverflow.com/users/9489619/needhlub"}, "edited": false, "score": 0, "creation_date": 1521031281, "post_id": 49273375, "comment_id": 85558498, "body": "It still prints out garbage. Is that code the same as this: ~    for(char i=0; i &lt; sizeArrayLetter; i++) \t{ \t\tprintf(&quot;%c&quot;, arrayLetter[i]); \t} ~"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 21, "user_id": 9489619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4995a2f4124b9cd39f128680224182?s=128&d=identicon&r=PG&f=1", "display_name": "NeedHlub", "link": "https://stackoverflow.com/users/9489619/needhlub"}, "edited": false, "score": 0, "creation_date": 1521031661, "post_id": 49273375, "comment_id": 85558741, "body": "That means that you overwrite that array accidentally."}, {"owner": {"reputation": 21, "user_id": 9489619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4995a2f4124b9cd39f128680224182?s=128&d=identicon&r=PG&f=1", "display_name": "NeedHlub", "link": "https://stackoverflow.com/users/9489619/needhlub"}, "edited": false, "score": 0, "creation_date": 1521032117, "post_id": 49273375, "comment_id": 85559049, "body": "Yeah, it seems like it. I don&#39;t know where though."}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": false, "score": 0, "last_activity_date": 1521017943, "creation_date": 1521017943, "answer_id": 49273375, "question_id": 49271385, "link": "https://stackoverflow.com/questions/49271385/memory-allocation-outputting-garbage/49273375#49273375", "title": "Memory Allocation, Outputting Garbage", "body": "<p>As Jonathan Leffler says clearly, your array is just an array, not a C-string (sequence of chars nul-terminated). Use <code>%s</code> only with C-strings.</p>\n\n<p>Change your loop, to:</p>\n\n<pre><code>for (char i=0; i&lt;sizeArrayLetter; i++) {\n    putchar(arrayletter[i]);\n}\nputchar('\\n');\n</code></pre>\n\n<p>This will print individually all chars from the array and an additional end-of-line.</p>\n"}], "owner": {"reputation": 21, "user_id": 9489619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4995a2f4124b9cd39f128680224182?s=128&d=identicon&r=PG&f=1", "display_name": "NeedHlub", "link": "https://stackoverflow.com/users/9489619/needhlub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1521340442, "creation_date": 1521010435, "last_edit_date": 1521340442, "question_id": 49271385, "link": "https://stackoverflow.com/questions/49271385/memory-allocation-outputting-garbage", "title": "Memory Allocation, Outputting Garbage", "body": "<p>Why is this outputting garbage instead of char values in arrayLetter?\nWhen I put the for loop to print the arrayLetter above the method calls it works; when I put it below it, it doesn't work. I did not change arrayLetter in the methods or in the main. This is a simple program that shifts index and output the shifted alphabets.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint* getMatchedIndex(char arrayLetter[], char plainTextExample[],int sizeArrayLetter, int sizePlainTextExample);\nint* vigenereCipherEncryptIndex(int key[], int sizeKey, int sizeArrayLetter, int sizePlainTextExample, int arrayMatchAtIndex[]);\nchar* convertToNewEncryptedArray(char arrayLetter[], int encryptArray[], int sizeArrayLetter, int sizePlainTextExample);\n\nint main(void) {\n\n    char arrayLetter[] = { 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h',\n                           'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r',\n                           's', 't', 'u', 'v', 'w', 'x', 'y', 'z'};\n\n    int key[] = { 21, 4, 2, 19, 14, 17};\n\n    char plainTextExample[] = { 'h', 'e', 'r', 'e',\n                                'i', 's',\n                                'h', 'o', 'w',\n                                'i', 't',\n                                'w', 'o', 'r', 'k', 's'};\n\n    int sizeArrayLetter = sizeof(arrayLetter)/sizeof(arrayLetter[0]);\n    int sizePlainTextExample = sizeof(plainTextExample)/sizeof(plainTextExample[0]);\n    int sizeKey = sizeof(key)/sizeof(key[0]);\n\n    int *arrayMatchAtIndex;\n    int *encryptArray;\n    char *cipherArray;\n\n    arrayMatchAtIndex = getMatchedIndex(arrayLetter, plainTextExample, sizeArrayLetter, sizePlainTextExample);\n    encryptArray = vigenereCipherEncryptIndex(key, sizeKey, sizeArrayLetter, sizePlainTextExample, arrayMatchAtIndex);\n    cipherArray = convertToNewEncryptedArray(arrayLetter, encryptArray, sizeArrayLetter, sizePlainTextExample);\n\n    for(char i=0; i &lt; sizeArrayLetter; i++)\n    {\n        //printf(\"%s%i%s\", \"Indexes of Encryption: \", encryptArray[i], \" \\n\");\n        printf(\"%s\", arrayLetter);\n\n    }\n\n\n    free(arrayMatchAtIndex);\n    free(encryptArray);\n    free(cipherArray);\n\n    return EXIT_SUCCESS;\n}\n\n//compare arrays and store index into array\nint *getMatchedIndex(char arrayLetter[], char plainTextExample[],int sizeArrayLetter, int sizePlainTextExample)\n{\n\n    int* arrayMatchAtIndex = malloc(sizePlainTextExample* sizeof(int));\n\n    //loop plainTextExample\n    for(int i=0; i &lt; sizePlainTextExample ; i++)\n    {\n        //loop arrayLetter\n        for(int j=0; j &lt; sizeArrayLetter ; j++)\n        {\n            //compare -&gt; match then store arrayLetter index into arrayMatchAtIndex\n            if(plainTextExample[i] == arrayLetter[j])\n            {\n                arrayMatchAtIndex[i] = j;\n            }\n        }\n\n    }\n    return arrayMatchAtIndex;\n}\n\n//encrypt array by adding 'key' indexes into array\nint* vigenereCipherEncryptIndex(int key[], int sizeKey, int sizeArrayLetter, int sizePlainTextExample, int arrayMatchAtIndex[])\n{\n    //make new array\n    int* encryptArray = malloc(sizePlainTextExample* sizeof(int));\n\n    int j=0;\n\n    //encrypt element -&gt; (add elements of arrayIndexes and key) mod 26\n    for(int i=0; i &lt; sizePlainTextExample; i++)\n    {\n\n        if(i &gt;= sizeKey)\n        {\n            j = (i % sizeKey);\n            key[i] = key[j];\n        }\n\n        encryptArray[i] = (arrayMatchAtIndex[i]+key[i]) % 26;\n    //  printf(\"%s%d%s%d%s\", \"Match Element: \", arrayMatchAtIndex[i], \" key \", key[i], \" \");\n    //  printf(\"%s%d%s\", \"encryptElement: \", encryptArray[i], \" \\n\");\n    }\n\n    return encryptArray;\n}\n\n//convert encrypt array index to its elements\nchar* convertToNewEncryptedArray(char arrayLetter[], int encryptArray[], int sizeArrayLetter, int sizePlainTextExample)\n{\n    char* cipherArray = malloc(sizePlainTextExample* sizeof(int));\n\n    //encrypted index - &gt; convert elements to new index\n    for(int i=0; i &lt; sizePlainTextExample ; i++)\n    {\n        for(int j=0; j&lt; sizeArrayLetter; j++)\n        {\n            //find index-&gt;match then put Encrypted index into letter element\n            if(encryptArray[i] == j)\n            {\n                cipherArray[i] = arrayLetter[j];\n                printf(\"%c\", arrayLetter[2]);\n            }\n\n        }\n    }\n\n    return cipherArray;\n}\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1521007327, "post_id": 49270660, "comment_id": 85544299, "body": "<code>&#39;\\0&#39; is char</code>..how?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1521008626, "post_id": 49270660, "comment_id": 85544868, "body": "<code>&#39;\\0&#39;</code> is not a <code>char</code>.  It is a <i>character constant</i> of type <code>int</code>."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1521009532, "post_id": 49270660, "comment_id": 85545264, "body": "BTW, in C++ instead there <i>is</i> a difference - <code>0</code> is an <code>int</code>, <code>&#39;\\0&#39;</code> is a <code>char</code>."}], "answers": [{"comments": [{"owner": {"reputation": 4335, "user_id": 997704, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/2f14d93702d3a39060e4202e9b510369?s=128&d=identicon&r=PG", "display_name": "username_4567", "link": "https://stackoverflow.com/users/997704/username-4567"}, "edited": false, "score": 0, "creation_date": 1521007600, "post_id": 49270732, "comment_id": 85544406, "body": "In that case, my whole childhood was a lie :("}], "tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": false, "score": 5, "last_activity_date": 1521007718, "last_edit_date": 1521007718, "creation_date": 1521007521, "answer_id": 49270732, "question_id": 49270660, "link": "https://stackoverflow.com/questions/49270660/0-vs-0-while-initializing-char-in-c/49270732#49270732", "title": "0 vs &#39;\\0&#39; while initializing char in C", "body": "<p>The only thing I can think of is readability, as <code>'\\0'</code> is a better indication to people who read your code that you want a char here.</p>\n\n<p>Aside from that, I have to admit there's no difference at all. In fact, readability isn't even an issue for experienced C programmers.</p>\n"}, {"comments": [{"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521009106, "post_id": 49270805, "comment_id": 85545097, "body": "It&#39;s not a coincidence. <code>&#39;\\0&#39;==0</code>, <code>&#39;\\01&#39;==01</code>, <code>&#39;\\017&#39;==017</code>, ..."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1521009466, "post_id": 49270805, "comment_id": 85545233, "body": "@ikegami - I was being ironic. Of course it&#39;s <i>designed</i> to give the same octal values."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1521011187, "post_id": 49270805, "comment_id": 85546001, "body": "Take the string &quot;abc123&quot;, try embedding a null character after &quot;abc&quot; in it. See what happens."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1521011317, "post_id": 49270805, "comment_id": 85546045, "body": "@Art - And? String literals have greater utility than merely specifying null terminated strings. That includes having a 0 character in the dead center. &quot;See what happens&quot;, right."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1521011460, "post_id": 49270805, "comment_id": 85546093, "body": "@StoryTeller It should demonstrate two things: 1. it&#39;s not a happy conincidence. 2. It&#39;s probably a bad idea to tell people that the purpose of &#39;\\0&#39; is to embed null characters in the middle of strings since it has quite terrible failure modes. Like trying to embed a null character before other numbers."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1521011604, "post_id": 49270805, "comment_id": 85546159, "body": "@Art - (1) See my comment to ikegami. (2) With all due respect &quot;it&#39;s probably a bad idea&quot; only as a matter of your opinion. Telling people they can embed a null character in a literal, or any character with any value for the matter, is meant to introduce them to a wider world than mere null terminated ASCII text."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1521011824, "post_id": 49270805, "comment_id": 85546252, "body": "Or a wider world embedding a newline if they happen to want to embed a null character between &quot;abc&quot; and &quot;123&quot;."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1521011906, "post_id": 49270805, "comment_id": 85546285, "body": "@Art what is your terrible failure mode for putting a \\0 byte before other numbers?"}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1521009605, "last_edit_date": 1521009605, "creation_date": 1521007827, "answer_id": 49270805, "question_id": 49270660, "link": "https://stackoverflow.com/questions/49270660/0-vs-0-while-initializing-char-in-c/49270805#49270805", "title": "0 vs &#39;\\0&#39; while initializing char in C", "body": "<p>Yeah, there's no difference in initializing a single character. But the purpose of <code>\\0</code> is to allow you to embed a null character into a string literal:</p>\n\n<pre><code>\"foo\\0bar\"\n</code></pre>\n\n<p>Just like any other escape sequence. The fact it's identical to 0 for a single character is just a happy (designed) coincidence. You are naming an octal value with the escape sequence.</p>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 4, "last_activity_date": 1521008008, "creation_date": 1521008008, "answer_id": 49270852, "question_id": 49270660, "link": "https://stackoverflow.com/questions/49270660/0-vs-0-while-initializing-char-in-c/49270852#49270852", "title": "0 vs &#39;\\0&#39; while initializing char in C", "body": "<p>You can use a variety of escape sequences in string literals:</p>\n\n<pre><code>\"\\n \\t \\x0a \\123\"\n// symbolic, hex, octal\n</code></pre>\n\n<p>All of these can also be used in character literals:</p>\n\n<pre><code>'\\n', '\\t', '\\x0a', '\\123'\n</code></pre>\n\n<p>So why exclude <code>'\\0'</code> (a particular octal value) specifically? Why wouldn't it be valid in character literals?</p>\n\n<hr>\n\n<p>While there is no semantic difference between <code>0</code> and <code>'\\0'</code>, they can be used to express the programmer's intent: <code>0</code> could be any integer zero, but <code>'\\0'</code> is generally only used for NUL bytes.</p>\n"}], "owner": {"reputation": 4335, "user_id": 997704, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/2f14d93702d3a39060e4202e9b510369?s=128&d=identicon&r=PG", "display_name": "username_4567", "link": "https://stackoverflow.com/users/997704/username-4567"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "closed_date": 1521020847, "answer_count": 3, "score": 1, "last_activity_date": 1521009605, "creation_date": 1521007219, "question_id": 49270660, "link": "https://stackoverflow.com/questions/49270660/0-vs-0-while-initializing-char-in-c", "closed_reason": "Duplicate", "title": "0 vs &#39;\\0&#39; while initializing char in C", "body": "<p>It seems there is no difference between intializing a char with 0 and '\\0' in generated binary code in C. If so, why do we have '\\0' in C and not just 0 for ending string?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 3, "creation_date": 1521005861, "post_id": 49270360, "comment_id": 85543765, "body": "Off-topic. Compile your code with all warnings and debug info (<code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>) then use the debugger"}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 2, "creation_date": 1521005900, "post_id": 49270360, "comment_id": 85543780, "body": "<code>scanf(&quot;i%&quot;,&amp;A);</code>--&gt; <code>scanf(&quot;%i&quot;,&amp;A);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 2, "last_activity_date": 1521005852, "creation_date": 1521005852, "answer_id": 49270383, "question_id": 49270360, "link": "https://stackoverflow.com/questions/49270360/i-need-help-for-simple-c-program/49270383#49270383", "title": "i need help for simple C program", "body": "<p>Your swapping logic is wrong. Use another variable to do it correctly.</p>\n\n<pre><code>int t = A;\nA = B;\nB = t;\n</code></pre>\n\n<p>Also you would want to swap when <code>A</code> is greater than <code>B</code>.</p>\n\n<pre><code>if( A &gt; B ){\n  /* swap*/\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "is_accepted": false, "score": 5, "last_activity_date": 1521005894, "creation_date": 1521005894, "answer_id": 49270391, "question_id": 49270360, "link": "https://stackoverflow.com/questions/49270360/i-need-help-for-simple-c-program/49270391#49270391", "title": "i need help for simple C program", "body": "<p>You have the format backwards</p>\n\n<pre><code>scanf(\"i%\",&amp;A); \n</code></pre>\n\n<p>should be</p>\n\n<pre><code>scanf(\"%i\",&amp;A); \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 271, "user_id": 9353451, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4089968caf5bda29a44448b5608bed91?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshraj", "link": "https://stackoverflow.com/users/9353451/lakshraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1521022389, "creation_date": 1521022389, "answer_id": 49274979, "question_id": 49270360, "link": "https://stackoverflow.com/questions/49270360/i-need-help-for-simple-c-program/49274979#49274979", "title": "i need help for simple C program", "body": "<pre><code> #include &lt;stdio.h&gt;\n\nint main()\n{\n    int A, B, cont=0;\n    printf(\"Program to find the Multiples of 5\\n\");\n    printf(\"First Number \\n\");\n    scanf(\"%d\",&amp;A); \n    printf(\"Second Number \\n\");\n    scanf(\"%d\",&amp;B); \n    system(\"cls\");\n    printf(\"The Multiples of 5 between %d and %d \\n\", A,B);\n    if(A&lt;B){\n    while(A &lt;= B){\n        if (A % 5 == 0)\n            {\n              cont++;\n            } \n            A++;    \n        }\n    }\n    else \n    {\n    while(A &gt;=B){\n        if (A % 5 == 0)\n            {\n              cont++;\n            } \n            A--;    \n        }\n    }\n     if (cont &gt; 0) \n            printf(\"The total Multiples of 5 between %d and %d are %d\\n\",A,B,cont);\n        else\n            printf(\"No Multiple of 5 exists between %d and %d\\n\",A,B);      \n        getchar();\n    return 0;\n}\n</code></pre>\n\n<p>I try to solve each case. If user enter A>B then your code fails but it works</p>\n"}], "owner": {"reputation": 1, "user_id": 9428852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QeXlF.jpg?s=128&g=1", "display_name": "Alexander B.", "link": "https://stackoverflow.com/users/9428852/alexander-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1521022389, "creation_date": 1521005750, "last_edit_date": 1521018268, "question_id": 49270360, "link": "https://stackoverflow.com/questions/49270360/i-need-help-for-simple-c-program", "title": "i need help for simple C program", "body": "<p>i made a program to calculate multiples of 5 between two numbers, when ask for de second numbers the program didn't work normally.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n\nint main()\n{\n    int A, B, cont;\n    printf(\"\\n\");\n    printf(\"Indique el dominio de los numeros en los que desa saber cuales son multiplos de 5\\n\");\n    printf(\"Primer numero: \\n\");\n    scanf(\"%i\",&amp;A); \n    printf(\"Segundo numero: \\n\");\n    scanf(\"%i\",&amp;B); \n    if (A &lt; B){\n        A = B;\n        //B = A;\n    }\n    system(\"cls\");\n    printf(\"\\n\");\n    printf(\"Los multiplos de 5 comprendidos entre %i y %i son; \\n\",A,B);\n    cont = 0;\n    while(A &lt; B){\n        if (A % 5 == 0)\n            cont++; \n            A++;    \n        }\n        if (cont &gt; 0) \n            printf(\"Entre los numeros %i y %i hay un total de %i multiplos de 5.\\n\",A,B,cont);\n        else\n            printf(\"El intervalo no se encuentran multiplos de 5.\\n\");      \n        getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 0, "creation_date": 1521005676, "post_id": 49270328, "comment_id": 85543707, "body": "<a href=\"https://google.com/search?q=fork%20join%20overhead\" rel=\"nofollow noreferrer\">google.com/search?q=fork%20join%20overhead</a>"}, {"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 2, "creation_date": 1521005744, "post_id": 49270328, "comment_id": 85543729, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7419622/openmp-overhead-calculation\">OpenMP overhead calculation</a>"}, {"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 1, "creation_date": 1521005897, "post_id": 49270328, "comment_id": 85543779, "body": "Cliff Notes: Starting threads has runtime overhead. The tasks must take long enough to justify that."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1521016180, "post_id": 49270328, "comment_id": 85548304, "body": "What is the size of <code>col</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9489318, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Zf_iDncBkic/AAAAAAAAAAI/AAAAAAAAACQ/EnGbdo2L2JI/photo.jpg?sz=128", "display_name": "Shiqin", "link": "https://stackoverflow.com/users/9489318/shiqin"}, "edited": false, "score": 0, "creation_date": 1521006499, "post_id": 49270441, "comment_id": 85543988, "body": "Does it means it is more efficient to apply parallel at 1 major part of the code rather than a few minor part of the code?"}, {"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1521007333, "post_id": 49270441, "comment_id": 85544300, "body": "Nope. It means what he said. When optimizing, there is no substitute for benchmarks."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9478968"}, "reply_to_user": {"reputation": 3, "user_id": 9489318, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Zf_iDncBkic/AAAAAAAAAAI/AAAAAAAAACQ/EnGbdo2L2JI/photo.jpg?sz=128", "display_name": "Shiqin", "link": "https://stackoverflow.com/users/9489318/shiqin"}, "edited": false, "score": 0, "creation_date": 1521007907, "post_id": 49270441, "comment_id": 85544516, "body": "@Shiqin It is worth parallelizing any task where the amount of work outweighs the overhead of dealing with threads."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1521014046, "post_id": 49270441, "comment_id": 85547268, "body": "@ConfusedByCode Well, I wouldn&#39;t say it&#39;s worth it parallelizing <i>any</i> task. Sometimes the complexity introduced by using threads greatly outweigh the performance benefit."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9478968"}, "is_accepted": true, "score": 0, "last_activity_date": 1521008505, "last_edit_date": 1521008505, "creation_date": 1521006131, "answer_id": 49270441, "question_id": 49270328, "link": "https://stackoverflow.com/questions/49270328/openmp-parallel-programming-based-on-number-of-threads-relation-with-execution-t/49270441#49270441", "title": "OpenMP parallel programming based on number of threads relation with execution time", "body": "<p>Creating and destroying threads takes some time. When the work done by each thread is trivial, the amount of time it takes to create and destroy threads outweighs the time it takes to do the work itself.</p>\n\n<p>Instead try runnign something like </p>\n\n<pre><code>const int N = 100000;\nint A[N];\n#pragma omp parallel for\nfor (int i = 0; i &lt; N; i++) {\n    A[i] = i;\n}\n</code></pre>\n\n<p>Here the time taken will be significantly lower with 3 threads as the amount of work done outweighs the work to create and destroy each thread.</p>\n\n<p>Maybe to see this more clearly another example will help. Say we want to parallelize a loop that iterates 10 times, each iteration takes 1 second, and each additional thread created takes 0.5 seconds.</p>\n\n<p>A single thread will finish the task in 10 seconds. If we create another thread the working time can be split in half, resulting in only 5 seconds of work. But it takes  0.5 seconds to create the extra thread so the total run time is 5.5 seconds. It is still faster than originally, but <em>doubling the number of threads did not half our run time</em>.</p>\n\n<p>Lets say we want to run our loop really fast and we create 9 additional threads for a total of 10 threads. The working time can now be split among all 10 threads, resulting in 1 second of work. However, creating 9 threads costs 4.5 seconds. Our total run time is now 5.5 seconds which is <strong>the same as running with only 2 threads!</strong> The overhead of creating threads outweighs the amount of work to be done. Continuing to add threads at this point will only slow our program down.</p>\n\n<p>Essentially there is a point for all programs with a fixed amount of work where more threads will not speed up the run time. Large workloads outweigh the cost of thread creating for a larger number of threads. Small workloads are almost immediately dwarfed by the thread creation overhead.</p>\n\n<p>TL;DR</p>\n\n<p>Parallelism is best suited for large problems. Parallelizing trivial problems will only make them slower.</p>\n"}], "owner": {"reputation": 3, "user_id": 9489318, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Zf_iDncBkic/AAAAAAAAAAI/AAAAAAAAACQ/EnGbdo2L2JI/photo.jpg?sz=128", "display_name": "Shiqin", "link": "https://stackoverflow.com/users/9489318/shiqin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 1, "accepted_answer_id": 49270441, "answer_count": 1, "score": 0, "last_activity_date": 1521008505, "creation_date": 1521005573, "question_id": 49270328, "link": "https://stackoverflow.com/questions/49270328/openmp-parallel-programming-based-on-number-of-threads-relation-with-execution-t", "title": "OpenMP parallel programming based on number of threads relation with execution time", "body": "<p>I have the following code in Visual Studio 2010:</p>\n\n<pre><code>#pragma omp parallel for num_threads(1)\nfor(int y=0;y&lt;col;y++)\nbands[parametersnumberPredictionBands+1][x][y] = hyperspectral[x][y][z];\n</code></pre>\n\n<p>The time taken to execute the code when num_threads(1) is less than num_threads(3).</p>\n\n<p>To my understanding when more threads are use in parallel the time taken should be reduced. Can anyone explain why?</p>\n\n<p>I am a beginner so any help is very appreciated.</p>\n"}, {"tags": ["c", "audio", "gstreamer", "audio-recording", "video-recording"], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 9465672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c76a768f9d415bc8ecd7b1410512990?s=128&d=identicon&r=PG&f=1", "display_name": "vignesh", "link": "https://stackoverflow.com/users/9465672/vignesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1521108708, "last_edit_date": 1521108708, "creation_date": 1521012489, "answer_id": 49271869, "question_id": 49270207, "link": "https://stackoverflow.com/questions/49270207/how-to-record-audio-and-video-in-gstreamer/49271869#49271869", "title": "how to record audio and video in gstreamer", "body": "<p>got the pipeline now it is recording audio and video perfectly</p>\n\n<p>Here the pipeline</p>\n\n<blockquote>\n  <p>gst-launch-1.0  -e v4l2src  ! 'video/x-raw,width=960,height=720,framerate=30/1' ! queue ! x264enc tune=zerolatency ! mux. alsasrc ! audio/x-raw,width=16,depth=16,rate=44100,channel=1 ! queue  ! audioconvert ! audioresample ! voaacenc ! aacparse ! qtmux  name=mux ! filesink location=test.mp4 sync=false</p>\n</blockquote>\n\n<p>if still anything incorrect in the pipeline let me know</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 14617571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GjpRzMyfuY1N_FUDVrUz3n6kFTw2NGVu1hOos8r1Q=k-s128", "display_name": "AKASH SHINDE", "link": "https://stackoverflow.com/users/14617571/akash-shinde"}, "is_accepted": false, "score": 2, "last_activity_date": 1605078441, "last_edit_date": 1605078441, "creation_date": 1605078124, "answer_id": 64781875, "question_id": 49270207, "link": "https://stackoverflow.com/questions/49270207/how-to-record-audio-and-video-in-gstreamer/64781875#64781875", "title": "how to record audio and video in gstreamer", "body": "<p>try with the following pipeline to record audio and video into one file.</p>\n<pre><code>gst-launch-1.0 -e v4l2src device=&quot;/dev/video0&quot; ! videoconvert ! queue ! x264enc tune=zerolatency ! mux. alsasrc device=&quot;hw:2&quot; ! queue ! audioconvert ! audioresample ! voaacenc ! aacparse ! qtmux name=mux ! filesink location=test.mp4 sync=false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 688, "user_id": 4530457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zn0Tv.jpg?s=128&g=1", "display_name": "Edwin Joassart", "link": "https://stackoverflow.com/users/4530457/edwin-joassart"}, "is_accepted": false, "score": 0, "last_activity_date": 1617001450, "creation_date": 1617001450, "answer_id": 66849935, "question_id": 49270207, "link": "https://stackoverflow.com/questions/49270207/how-to-record-audio-and-video-in-gstreamer/66849935#66849935", "title": "how to record audio and video in gstreamer", "body": "<p>I ended up using that one (adapted from a random response from the web, sorry i lost the source)</p>\n<p><code>raspivid -t 0  --vflip --hflip -w 1920 -h 1080 -fps 30 --bitrate 14000000 --profile baseline -3d sbs --intra 30 --inline --flush --awb auto --exposure auto --sharpness 0 --contrast -15 --digitalgain 0.0 -o - | gst-launch-1.0 -ve fdsrc num-buffers=-1 ! video/x-h264,width=1920,height=1080,framerate=30/1 ! h264parse ! queue ! smux.video alsasrc device=hw:2,0 ! audio/x-raw,format=S32LE,rate=48000,channel=2 ! audioconvert ! avenc_aac ! aacparse ! queue ! smux.audio_0 splitmuxsink name=smux location=video.mp4 muxer=mpegtsmux</code></p>\n<p>Note it's for capturing steroscopic image, you can drop &quot;-3d sds&quot; and adapt width for single cam. You can also safely drop the -ve which is only useful for debug and change your audio device hw to the number for your capture card (<code>$ arecord -l</code> to find out the id of your card).</p>\n<p>I would prefer to use qtmux but it fails due to missing PTS info in the h264 stream made by raspivid. mpegtsmux is happy tho.</p>\n<p>As of now, the resulting mpeg is half broken, and cannot be read by all players (quicktime fails, while vlc is happy). Reencoding with ffmpeg : <code>ffmpeg -vcodec mpeg4 -b:v 7561k -qscale:v 2 -acodec aac -ac 2 -async 1 -strict experimental ./video2.mp4 -threads 0 -i video.mp4</code> fixed the file.</p>\n<p>Hope this is helpful to someone.</p>\n"}], "owner": {"reputation": 23, "user_id": 9465672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c76a768f9d415bc8ecd7b1410512990?s=128&d=identicon&r=PG&f=1", "display_name": "vignesh", "link": "https://stackoverflow.com/users/9465672/vignesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3517, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1617001450, "creation_date": 1521004724, "question_id": 49270207, "link": "https://stackoverflow.com/questions/49270207/how-to-record-audio-and-video-in-gstreamer", "title": "how to record audio and video in gstreamer", "body": "<p>I am new to gstreamer, I want to record both audio and video save it into .mp4 format, Recording video using webcam and audio using MIC\nHere this is my pipeline</p>\n\n<blockquote>\n  <p>gst-launch-1.0  -e v4l2src ! queue ! x264enc ! h264parse ! queue ! qtmux0. alsasrc !  'audio/x-raw,rate=44100,depth=24' ! audioconvert ! audioresample ! voaacenc ! aacparse ! qtmux ! filesink location=test.mp4</p>\n</blockquote>\n\n<p>When i am executing it the video is recording only for 10sec the audio not even recording, Its giving some message like</p>\n\n<blockquote>\n  <p>WARNING: from element /GstPipeline:pipeline0/GstAlsaSrc:alsasrc0: Can't record audio fast enough\n  Additional debug info:\n  gstaudiobasesrc.c(866): gst_audio_base_src_create (): /GstPipeline:pipeline0/GstAlsaSrc:alsasrc0:\n  Dropped 425565 samples. This is most likely because downstream can't keep up and is consuming samples too slowly.</p>\n</blockquote>\n\n<p>Help me get over through this Thank You in advance</p>\n"}, {"tags": ["c", "stdout", "stdin"], "comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1521000906, "post_id": 49269662, "comment_id": 85542461, "body": "Can you give an example what you&#39;re referring to?"}, {"owner": {"reputation": 1, "user_id": 9489141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71f4b0b714a2e9c762625e99d13b6aad?s=128&d=identicon&r=PG&f=1", "display_name": "Sha 1sum", "link": "https://stackoverflow.com/users/9489141/sha-1sum"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1521001024, "post_id": 49269662, "comment_id": 85542489, "body": "Later when I&#39;m not typing from a phone ;-&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 0, "last_activity_date": 1521042942, "creation_date": 1521042942, "answer_id": 49282340, "question_id": 49269662, "link": "https://stackoverflow.com/questions/49269662/how-are-stdin-and-stdout-connected-on-a-ptty-like-gnome-terminal/49282340#49282340", "title": "How are stdin and stdout connected on a ptty (like GNOME Terminal)", "body": "<p>If standard input and standard output are both connected to a terminal (the same terminal?), then the C library implementation usually arranges to flush standard output before starting an input operation on standard input.  It is a property of the C library, not of the pseudo-tty or <code>pty</code>.  The behaviour is not mandated by the <a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.1.3\" rel=\"nofollow noreferrer\">C standard</a> or <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_05\" rel=\"nofollow noreferrer\">POSIX</a>, <a href=\"https://www.acronymfinder.com/As-Far-As-I-Can-Tell-(AFAICT).html\" rel=\"nofollow noreferrer\">AFAICT</a>, but it is common behaviour on Unix-like systems, not least because it tends to make programs appear more responsive.</p>\n\n<p>There's usually only one <code>t</code> in the abbreviation, mainly because the pseudo-terminal device names normally start <code>pty</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9489141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71f4b0b714a2e9c762625e99d13b6aad?s=128&d=identicon&r=PG&f=1", "display_name": "Sha 1sum", "link": "https://stackoverflow.com/users/9489141/sha-1sum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1521042942, "creation_date": 1521000728, "question_id": 49269662, "link": "https://stackoverflow.com/questions/49269662/how-are-stdin-and-stdout-connected-on-a-ptty-like-gnome-terminal", "title": "How are stdin and stdout connected on a ptty (like GNOME Terminal)", "body": "<p>When writing simple c programs and executing them in the Terminal app, <code>printf</code> can affect <code>scanf</code>, like with whitespace characters, so it seems stdout and stdin are connected. How can this be?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2449, "user_id": 500276, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/200bf76976f24add540182f5c3a42788?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Benningfield", "link": "https://stackoverflow.com/users/500276/mark-benningfield"}, "edited": false, "score": 0, "creation_date": 1521001792, "post_id": 49269560, "comment_id": 85542690, "body": "If you are manipulating timespans, you should look at <code>struct tm</code>, defined in <code>&lt;time.h&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 1, "creation_date": 1521003963, "post_id": 49270034, "comment_id": 85543246, "body": "Additionally: leapseconds, daylight saving times (they can change in between), timezones (they can change in between), different calendars, and all of what I have suppressed^Wforgotten, too. tl;dr: don&#39;t do dates&amp;time, never! You cannot get payed enough to do it! Use the libraries the language or a third party offers for date&amp;time."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 1, "creation_date": 1521004275, "post_id": 49270034, "comment_id": 85543320, "body": "@deamentiaemundi I totally agree, but I think it&#39;s pretty clear from the context of the question this is a variation of the &quot;make change&quot; problem from compsci 101 and isn&#39;t intended to be the origin of a useful, robust time library."}], "tags": [], "owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "is_accepted": false, "score": 3, "last_activity_date": 1521003462, "creation_date": 1521003462, "answer_id": 49270034, "question_id": 49269560, "link": "https://stackoverflow.com/questions/49269560/how-to-add-two-24hour-times/49270034#49270034", "title": "How to add two 24hour times", "body": "<p>Yes, you're correct that modulo division is involved.  Remember, that is <strong>remainder</strong> division.  This is more worthy as a comment since supplying a complete answer for problems like this is generally frowned upon, but it's too long for that; this should get you started:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n  // Assuming the given time has the format hhmm or hmm.\n  // This program would be much more useful if these were\n  // gathered as command line arguments\n  int time1 = 1045;\n  int time2 = 930;\n\n  // integer division by 100 gives you the hours based on the\n  // assumption that the 1's and 10's place will always be\n  // the minutes\n  int time1Hours = time1 / 100;  // time1Hours == 10\n  int time2Hours = time2 / 100;  // time2Hours == 9\n\n  // modulus division by 100 gives the remainder of integer division,\n  // which in this case gives us the minutes\n  int time1Min = time1 % 100;  // time1Min == 45\n  int time2Min = time2 % 100;  // time2Min == 30\n\n  // now, add them up\n  int totalHours = time1Hours + time2Hours;  // totalHours = 19\n  int totalMin = time1Min + time2Min;  // totalMin = 75\n\n  // The rest is omitted for you to finish\n  // If our total minutes exceed 60 (in this case they do), we\n  // need to adjust both the total hours and the total minutes\n  // Clearly, there is 1 hour and 15 min in 75 min. How can you\n  // pull 1 hour and 15 min from 75 min using integer and modulo\n  // (remainder) division, given there are 60 min in an hour?\n\n  // this problem could be taken further by adding days, weeks,\n  // years (leap years become more complicated), centuries, etc.\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "is_accepted": false, "score": 1, "last_activity_date": 1521013202, "creation_date": 1521013202, "answer_id": 49272061, "question_id": 49269560, "link": "https://stackoverflow.com/questions/49269560/how-to-add-two-24hour-times/49272061#49272061", "title": "How to add two 24hour times", "body": "<p>I used this for a long time...</p>\n\n<pre><code>// convert both times hhmm to minutes an sum minutes\n// be sure to do integer division \nint time1m = ((time1 / 100) * 60)+(time1 % 100);\nint time2m = ((time2 / 100) * 60)+(time2 % 100);\nint sumMin = time1m + time2m; \n// convert back to hhmm\nint hhmm = ((sumMin / 60) * 100)+(sumMin % 60);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 974, "user_id": 7277468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6tMUS.jpg?s=128&g=1", "display_name": "Sandeep_black", "link": "https://stackoverflow.com/users/7277468/sandeep-black"}, "is_accepted": false, "score": 0, "last_activity_date": 1521059812, "creation_date": 1521059812, "answer_id": 49287215, "question_id": 49269560, "link": "https://stackoverflow.com/questions/49269560/how-to-add-two-24hour-times/49287215#49287215", "title": "How to add two 24hour times", "body": "<p>You can also include a day, as time is of 24 hour format.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int t1=2330;\n    int t2=2340;\n    int sum=((t1/100)*60)+(t1%100)+((t2/100)*60)+(t2%100);\n    int day=sum/(24*60);\n    sum = sum % (24*60);\n    int hours=sum/(60);\n    int mins=sum % 60;\n    printf(\"days = %d \\t hours = %d \\t mins=%d\\n\",day, hours, mins);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9488684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e6be26ae43ecb067cb0b4e57672135f?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Li", "link": "https://stackoverflow.com/users/9488684/simon-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1521059812, "creation_date": 1520999929, "last_edit_date": 1521003494, "question_id": 49269560, "link": "https://stackoverflow.com/questions/49269560/how-to-add-two-24hour-times", "title": "How to add two 24hour times", "body": "<p>Hi pretty new to coding in c, but would love your help in my following coding problem.</p>\n\n<p>I want to add two times (that are in twenty four hour time notation already). </p>\n\n<p>Currently they are both integers and the arithmatic addition function is great for whole hour (e.g. 800+1000), however because our / computer's numbers are base ten, it will not roll over to the next hour after 60min which leads to problems with addition.</p>\n\n<p>I'm not sure if the modulus % can solve this? Ideally I would like to use simple c coding (that I understand), and not start importing  timing keys into the program.</p>\n\n<p>e.g.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void)\n{\n\nint time1 = 1045; // 10:45am in 24hour time\nprintf(\"Time %d \",time1);\n\n\nint time2 = 930; //9 hours &amp; 30min\n    printf(\"+ time %d\", time2);    \n\nint calc = time1 + time2;\nprintf(\" should not equal ... %d\\n\", calc);\n\nprintf(\"\\nInstead they should add to %d\\n\\n\", 2015); //8:15pm in 24hr time\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "function", "pointers"], "comments": [{"owner": {"reputation": 774, "user_id": 5186709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sLeSV.jpg?s=128&g=1", "display_name": "moghya", "link": "https://stackoverflow.com/users/5186709/moghya"}, "edited": false, "score": 0, "creation_date": 1520999396, "post_id": 49269464, "comment_id": 85542091, "body": "can you put code where you have called this function,"}, {"owner": {"reputation": 23, "user_id": 9489048, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RftHOUgUegI/AAAAAAAAAAI/AAAAAAAAJ6U/WU_M-ugNYtE/photo.jpg?sz=128", "display_name": "Marlon Griebeler", "link": "https://stackoverflow.com/users/9489048/marlon-griebeler"}, "reply_to_user": {"reputation": 774, "user_id": 5186709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sLeSV.jpg?s=128&g=1", "display_name": "moghya", "link": "https://stackoverflow.com/users/5186709/moghya"}, "edited": false, "score": 0, "creation_date": 1520999572, "post_id": 49269464, "comment_id": 85542138, "body": "It&#39;s a big polluted code, but it&#39;s like this      int main(){         int vetor[TAMVET], vetres[TAMVET], tamres;         .         .         .        subvetcont(vetor, TAMVET, vetres, &amp;tamres);        .        .        .     }  TAMVET its a define"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9489048, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RftHOUgUegI/AAAAAAAAAAI/AAAAAAAAJ6U/WU_M-ugNYtE/photo.jpg?sz=128", "display_name": "Marlon Griebeler", "link": "https://stackoverflow.com/users/9489048/marlon-griebeler"}, "edited": false, "score": 0, "creation_date": 1521000029, "post_id": 49269511, "comment_id": 85542256, "body": "thank you!!!  I&#39;was trying to set the *tamres = 0; not declaring a new one..   Just found that it&#39;s really bad to init more than one variable within a for header..."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 9489048, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RftHOUgUegI/AAAAAAAAAAI/AAAAAAAAJ6U/WU_M-ugNYtE/photo.jpg?sz=128", "display_name": "Marlon Griebeler", "link": "https://stackoverflow.com/users/9489048/marlon-griebeler"}, "edited": false, "score": 1, "creation_date": 1521000106, "post_id": 49269511, "comment_id": 85542276, "body": "It&#39;s fine to initialize multiple variable. But if you put a type before it, you&#39;re not just assigning, you&#39;re declaring <i>new</i> variables with the scope of the loop."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 23, "user_id": 9489048, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RftHOUgUegI/AAAAAAAAAAI/AAAAAAAAJ6U/WU_M-ugNYtE/photo.jpg?sz=128", "display_name": "Marlon Griebeler", "link": "https://stackoverflow.com/users/9489048/marlon-griebeler"}, "edited": false, "score": 1, "creation_date": 1521001060, "post_id": 49269511, "comment_id": 85542497, "body": "@MarlonGriebeler &lt;O/T&gt; certainly not a rule, but you may consider moving <code>*tamresult = 0;</code> to right above the <code>for</code> loop where you erroneously tried to initialize it in. Readers of your code will have less searching to find its current value before you start modifying it in the loop, particularly if more code than you&#39;ve shown exists between the initialization and the loop. My thinking goes, &quot;Ok, I see <code>*tamresult</code> is set to 0 up at the top, now has it changed anywhere else before this loop starts modifying it?&quot;"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 8, "last_activity_date": 1520999618, "creation_date": 1520999618, "answer_id": 49269511, "question_id": 49269464, "link": "https://stackoverflow.com/questions/49269464/unable-to-use-the-value-of-int-in-c-function/49269511#49269511", "title": "Unable to use the value of int * in c function", "body": "<p>You've declared a new variable <code>tamresult</code> in the <code>for</code> loop:</p>\n\n<pre><code>for (int i = incmaior = 0, tamresult = 0; i &lt; fimmaior; i++) {\n    ...\n}\n</code></pre>\n\n<p>Within the loop, <code>tamresult</code> is that <code>int</code> variable, not the <code>int*</code> parameter to the function, so you can't indirect through it.</p>\n\n<p>I'm not sure why you put that there. You already assigned <code>*tamresult = 0;</code> earlier in the function, there's no need to assign to it in the <code>for</code> header. Just remove it.</p>\n\n<pre><code>for (int i = incmaior = 0; i &lt; fimmaior; i++) {\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9489048, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RftHOUgUegI/AAAAAAAAAAI/AAAAAAAAJ6U/WU_M-ugNYtE/photo.jpg?sz=128", "display_name": "Marlon Griebeler", "link": "https://stackoverflow.com/users/9489048/marlon-griebeler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 49269511, "answer_count": 1, "score": 0, "last_activity_date": 1520999618, "creation_date": 1520999258, "question_id": 49269464, "link": "https://stackoverflow.com/questions/49269464/unable-to-use-the-value-of-int-in-c-function", "title": "Unable to use the value of int * in c function", "body": "<p>I'm having some trouble while trying to use the value of a int variable inside a function; a variable that I need to change inside the function, so I passed it as a int * variable, and when calling the function simply passing the address of that variable like functionName(&amp;variable);</p>\n\n<p>But i'm having problems, and I have no idea of why i'm getting error while trying to compile it. (I'm using debian 9) </p>\n\n<p>my function is here:</p>\n\n<pre><code>void subvetcont(int * vetor, int tam, int * vetresult, int * tamresult){\n  int incmaior=0;\n  int fimmaior=0;\n  int incaux=incmaior;\n  int fimaux=fimmaior;\n\n  *tamresult = 0;\n\n  for(int i=1; i &lt; tam; i++){\n      if(vetor[i] == vetor[i-1]+1) fimaux=i;\n      else if((fimaux-incaux) &gt; (fimmaior - incmaior)){\n          incmaior = incaux;\n          fimmaior = fimaux;\n          incaux=i;\n          fimaux=i;\n      }\n      else{\n        incaux = i;\n        fimaux = i;\n      }\n  }\n  for(int i=incmaior, tamresult=0; i &lt;= fimmaior; i++){\n      vetresult[(*tamresult)] = vetor[i];\n      (*tamresult) = (*tamresult) + 1;\n  }\n}\n</code></pre>\n\n<p>what I got is</p>\n\n<pre><code>ex4.c: In function \u2018subvetcont\u2019:\nex4.c:104:14: error: invalid type argument of unary \u2018*\u2019 (have \u2018int\u2019)\n   vetresult[(*tamresult)] = vetor[i];\n              ^~~~~~~~~~\nex4.c:105:4: error: invalid type argument of unary \u2018*\u2019 (have \u2018int\u2019)\n   (*tamresult) = (*tamresult) + 1;\n                   ^~~~~~~~~~\nex4.c:105:19: error: invalid type argument of unary \u2018*\u2019 (have \u2018int\u2019)\n   (*tamresult) = (*tamresult) + 1;\n                   ^~~~~~~~~~\n</code></pre>\n\n<p>Am I using pointers wrong?</p>\n"}, {"tags": ["c", "linux-kernel", "debian", "system-calls"], "comments": [{"owner": {"reputation": 5773, "user_id": 3525545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rge03.jpg?s=128&g=1", "display_name": "Mahonri Moriancumer", "link": "https://stackoverflow.com/users/3525545/mahonri-moriancumer"}, "edited": false, "score": 1, "creation_date": 1521008025, "post_id": 49269049, "comment_id": 85544572, "body": "Perhaps you could elaborate on what aspect of a system call you wish to test/debug?  Do you plan to target a specific system call in your testing/debugging effort?  The question, as it is now, is quite broad."}, {"owner": {"reputation": 35, "user_id": 9092618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6436a1fa7a4e83c9d79303b0361976eb?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9092618/john"}, "reply_to_user": {"reputation": 5773, "user_id": 3525545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rge03.jpg?s=128&g=1", "display_name": "Mahonri Moriancumer", "link": "https://stackoverflow.com/users/3525545/mahonri-moriancumer"}, "edited": false, "score": 0, "creation_date": 1521049243, "post_id": 49269049, "comment_id": 85571607, "body": "@MahonriMoriancumer I mean, being able to test absolutely anything without recompiling would be helpful.  If there are syntax errors, seeing print statements, anything.  I&#39;m not asking for how to test specific functionality, I&#39;d just like to catch as many errors (syntax, logic, etc.) as possible before committing to recompiling the whole kernel."}, {"owner": {"reputation": 2744, "user_id": 2610019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5koUj.png?s=128&g=1", "display_name": "Mali", "link": "https://stackoverflow.com/users/2610019/mali"}, "edited": false, "score": 0, "creation_date": 1521099610, "post_id": 49269049, "comment_id": 85589964, "body": "How would you add a system call in kernel without recompiling it ? imho it&#39;s not possible ..."}], "answers": [{"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1521145525, "creation_date": 1521145525, "answer_id": 49308576, "question_id": 49269049, "link": "https://stackoverflow.com/questions/49269049/debug-new-system-call-without-recompiling-debian-kernel/49308576#49308576", "title": "Debug new system call without recompiling Debian kernel", "body": "<p>The system call dispatching table is constructed from an elaborate program in the process of building the system.  The program takes care that the same system call will get always the same entry point, so you cannot get a different call than the one requested.  There's no means to register a system call at runtime and make it available to user programs (I think this is, between other things, due to security reasons)  But you can install a new call that calls an installed function through a pointer, and install by default a do-nothing function that is changed at module loading and replaced by the dumb default on module unload.  This allows you to move your code to a module and load/unload it dynamically, without having to recompile the base kernel. Then, after you have tested the code, you can eliminate the call to function through a pointer and call the function directly.</p>\n"}], "owner": {"reputation": 35, "user_id": 9092618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6436a1fa7a4e83c9d79303b0361976eb?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9092618/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1521145525, "creation_date": 1520996032, "question_id": 49269049, "link": "https://stackoverflow.com/questions/49269049/debug-new-system-call-without-recompiling-debian-kernel", "title": "Debug new system call without recompiling Debian kernel", "body": "<p>As the title says, I just want to test/debug a system call without recompiling the whole kernel. I'm using a Debian 4.0.15 kernel.  I've read that you can't actually add the system call to the kernel without recompiling, but I was hoping there was some way to more quickly check for errors at least. I've never really done this before but all of my implementation files are just written in C; could I compile them with gcc and run that?  I'd expect system calls get some extra access rights and I've been told not to use floating point arithmetic at all, so I imagine there are other limitations present in system calls as well that wouldn't be caught when compiling with gcc.</p>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "edited": false, "score": 0, "creation_date": 1520996525, "post_id": 49269046, "comment_id": 85541450, "body": "What does <code>readdir()</code> do?  It seems likely that it allocates memory for  the struct?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1520996584, "post_id": 49269046, "comment_id": 85541466, "body": "Use <code>structure stat something;</code> and pass <code>&amp;something</code> to <code>stat()</code>."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "edited": false, "score": 1, "creation_date": 1520996798, "post_id": 49269046, "comment_id": 85541515, "body": "@StephenDocy no, it most probably returns a pointer to a static variable. The man page states that you cannot use <code>free</code> on the return value of <code>readdir</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1521061509, "post_id": 49269046, "comment_id": 85578211, "body": "regarding your &#39;prior exercise&#39;  your code contained undefined behavior.  With undefined behavior, anything can happen, even the code can &#39;seem&#39; to work."}], "answers": [{"comments": [{"owner": {"reputation": 972, "user_id": 9488865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d560f151faf6a0565f7cebd93958acf?s=128&d=identicon&r=PG&f=1", "display_name": "struggling_learner", "link": "https://stackoverflow.com/users/9488865/struggling-learner"}, "edited": false, "score": 0, "creation_date": 1521002754, "post_id": 49269117, "comment_id": 85542922, "body": "an uninitialized pointer pointing to nowhere, this yields undefined behaviour -- When main is called as   <code>int main(int argc, char *argv[]){ ..</code>  when/where is *argv initialized?"}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 972, "user_id": 9488865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d560f151faf6a0565f7cebd93958acf?s=128&d=identicon&r=PG&f=1", "display_name": "struggling_learner", "link": "https://stackoverflow.com/users/9488865/struggling-learner"}, "edited": false, "score": 0, "creation_date": 1521022772, "post_id": 49269117, "comment_id": 85552535, "body": "@struggling_learner <code>argv</code> is initialized by the system. <code>main</code> is the entry point of a C program, but in reality there are other functions that are executed first (functions that open <code>stdin</code>, <code>stdout</code>, <code>stderr</code>, prepare the <code>argc</code> and <code>argv</code> variables). So when <code>main</code> is finally executed, it&#39;s guaranteed that argv` will point to a valid location."}], "tags": [], "owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "is_accepted": true, "score": 2, "last_activity_date": 1520996944, "last_edit_date": 1520996944, "creation_date": 1520996604, "answer_id": 49269117, "question_id": 49269046, "link": "https://stackoverflow.com/questions/49269046/pointer-without-a-malloc/49269117#49269117", "title": "pointer without a malloc", "body": "<p>The problem with</p>\n\n<pre><code>struct stat *something;\nstat(\"/etc/profile\", something);\n</code></pre>\n\n<p>is that <code>something</code> is an uninitialized pointer pointing to nowhere, this yields\nundefined behaviour as <code>stat</code> would write something on an invalid address.\nWith <code>malloc</code> you allocated memory for it and passed a pointer to that allocated\nmemory location to <code>stat</code> and that's why it worked.</p>\n\n<p>But you don't need to use <code>malloc</code> for that, just don't declare <code>something</code> as a\npointer:</p>\n\n<pre><code>struct stat something;\nstat(\"/etc/profile\", &amp;something); // &lt;-- look at the usage of &amp;\n</code></pre>\n\n<p>In <code>stat</code> you should use the <code>&amp;</code>-operator which returns a pointer to\n<code>something</code>.</p>\n\n<p>In your other program</p>\n\n<pre><code>struct dirent *b; \nwhile (( b = readdir(a)) != NULL)\n</code></pre>\n\n<p><a href=\"https://linux.die.net/man/3/readdir\" rel=\"nofollow noreferrer\"><code>readdir</code></a> returns a pointer to a valid location, the function itself took\ncare of using a valid object and returning a pointer to it. However, you cannot\ndo <code>free(b)</code>:</p>\n\n<blockquote>\n  <p><em><a href=\"https://linux.die.net/man/3/readdir\" rel=\"nofollow noreferrer\">man readdir</a></em></p>\n  \n  <p><strong>RETURN VALUE</strong></p>\n  \n  <p>On success, <code>readdir()</code> returns a pointer to a dirent structure. <strong>(This structure may be statically allocated; do not attempt to <code>free(3)</code> it.)</strong></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "is_accepted": false, "score": 2, "last_activity_date": 1520996629, "creation_date": 1520996629, "answer_id": 49269121, "question_id": 49269046, "link": "https://stackoverflow.com/questions/49269046/pointer-without-a-malloc/49269121#49269121", "title": "pointer without a malloc", "body": "<p><code>readdir</code> returns a pointer to a <code>struct dirent</code>. Doing:\n<code>b = readdir(a)</code> overwrites the value <code>b</code> with the new value returned by <code>readdir</code>.</p>\n\n<p>So of <code>b</code> was previously initialized with allocated memory from a <code>malloc</code> call, that value has been overwritten and you now likely have a memory leak.</p>\n\n<p>You might wonder then whether you need to call <code>free</code> on <code>b</code> after the <code>readdir</code> call. To answer that you have to consult your documentation. In this case, the answer is <strong>no</strong>.</p>\n\n<p>From the documentation for <code>readdir</code>:</p>\n\n<blockquote>\n  <p>On success, readdir() returns a pointer to a dirent structure. (This\n  structure may be statically allocated; do not attempt to free(3) it.)</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1520998361, "post_id": 49269219, "comment_id": 85541861, "body": "Not sure how this answer adds anything to the answers already posted"}], "tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 0, "last_activity_date": 1520997449, "creation_date": 1520997449, "answer_id": 49269219, "question_id": 49269046, "link": "https://stackoverflow.com/questions/49269046/pointer-without-a-malloc/49269219#49269219", "title": "pointer without a malloc", "body": "<p>Normally any pointers whether its a <code>int *ptr</code> or <code>char *ptr</code> or <code>struct student *ptr</code>, it should have  <code>valid address</code> and valid address may be <em>dynamically allocated address</em> or <em>address of some variable</em>.</p>\n\n<p><strong>Case 1</strong> : <code>struct stat *something;</code> here <code>something</code> is pointer of <code>struct stat</code> type and its un-initialized.</p>\n\n<p>when you do <code>stat(\"/etc/profile\", something);</code> you are trying to store <code>/etc/profile</code> information into <code>something</code> which is un-initialized. Instead of this you should store the information of <code>/etc/profile</code> into address of <code>something</code>   or</p>\n\n<pre><code>struct stat info;\nstruct stat *something = &amp;info;\nstat(\"/etc/profile\",something );\n</code></pre>\n\n<p><strong>Case 2</strong> : <code>struct dirent *b;</code>  <code>b</code> is pointer of type <code>struct dirent</code>, it should also have valid address.\n <code>b = readdir(a);</code> <code>readdir</code> return value is assigned to <code>b</code>, so now you can perform <code>b-&gt;d_name</code> etc.</p>\n\n<p>From the manual page of <code>readdir()</code> </p>\n\n<blockquote>\n  <p>On  success,  readdir() returns a pointer to a dirent structure. \n  (This\n         structure may be statically allocated; do not attempt to  free(3)  it.)</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 648, "user_id": 5694959, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TN18H3fTni4/AAAAAAAAAAI/AAAAAAAAAA8/HH8MErbPvAI/photo.jpg?sz=128", "display_name": "Monk", "link": "https://stackoverflow.com/users/5694959/monk"}, "is_accepted": false, "score": 2, "last_activity_date": 1521008959, "last_edit_date": 1521008959, "creation_date": 1520997705, "answer_id": 49269252, "question_id": 49269046, "link": "https://stackoverflow.com/questions/49269046/pointer-without-a-malloc/49269252#49269252", "title": "pointer without a malloc", "body": "<pre><code>int main(){\n        struct stat *something;\n        stat(\"/etc/profile\", something);\n        printf(\"%d\\n\", something-&gt;st_gid);\n        free(something);\n        return 0;\n}\n</code></pre>\n\n<p>Above code has multiple issues,</p>\n\n<ol>\n<li>you are using <code>something</code> which is not pointing to a valid location, and\nagain using it as a buffer to store information return by <code>stat()</code>.</li>\n</ol>\n\n<blockquote>\n  <p>int stat(const char *pathname, struct stat *statbuf);</p>\n</blockquote>\n\n<p><code>stat()</code> return information about a file, in the buffer pointed to by <code>statbuf</code>, so your <code>statbuf</code> (something) should be a valid buffer, with size enough to store information of file, i.e size of <code>struct stat</code>.</p>\n\n<ol start=\"2\">\n<li><code>free(something);</code></li>\n</ol>\n\n<p><strong>from free() man page</strong></p>\n\n<p>if the argument passed to free() does not match a pointer earlier returned by a function in POSIX.1\u20102008 that allocates memory as if by malloc(), or if the space has been deallocated by a call to free() or realloc(), the behavior is undefined.</p>\n\n<p>Now coming to other code:</p>\n\n<pre><code>// - malloc question about this very next line\n        struct dirent *b; \n        while (( b = readdir(a)) != NULL){\n                printf(\"%s %lu\\n\", b-&gt;d_name, b-&gt;d_ino);\n        }\n</code></pre>\n\n<p>let's explore <code>readdir()</code> a bit,</p>\n\n<blockquote>\n  <p>struct dirent *readdir(DIR *dirp); The readdir() function returns a\n  pointer to a dirent structure representing the next directory entry in\n  the directory stream pointed to by dirp.  It returns NULL on reaching\n  the end of the directory stream or if an error occurred.</p>\n</blockquote>\n\n<p>You see <code>readdir()</code> returns a pointer of <code>struct dirent</code> type which makes <code>b</code> in\n<code>struct dirent *b</code> a valid pointer. That's why it worked.</p>\n"}], "owner": {"reputation": 972, "user_id": 9488865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d560f151faf6a0565f7cebd93958acf?s=128&d=identicon&r=PG&f=1", "display_name": "struggling_learner", "link": "https://stackoverflow.com/users/9488865/struggling-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 0, "accepted_answer_id": 49269117, "answer_count": 4, "score": 1, "last_activity_date": 1521008959, "creation_date": 1520995965, "question_id": 49269046, "link": "https://stackoverflow.com/questions/49269046/pointer-without-a-malloc", "title": "pointer without a malloc", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/stat.h&gt;\n\nint main(){\n        struct stat *something;\n        stat(\"/etc/profile\", something);\n        printf(\"%d\\n\", something-&gt;st_gid);\n        free(something);\n        return 0;\n}\n$ ./a.out\nSegmentation fault\n</code></pre>\n\n<p>I learned <a href=\"https://stackoverflow.com/questions/3138600/correct-use-of-stat-on-c\">from this post</a> that I need to allocate memory using malloc, so I changed it to as below, and it works:</p>\n\n<pre><code>-       struct stat *something;\n+       struct stat *something = malloc(sizeof(struct stat));\n</code></pre>\n\n<p>In a prior but related exercise, I did not use a malloc, and it had worked. \nI am lost!\nWhy don't I need malloc for the line \"<strong>*struct dirent <em>b;</em></strong>\" below?</p>\n\n<p>Or, to rephrase, how can we know the payload is too much and to use malloc? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;dirent.h&gt;\n\nint main(int argc, char *argv[]){\n\n        if (argc != 2){\n                printf(\"Error. Syntax: ls &lt;somefolder&gt; \\n\");\n                return 1;\n        }\n        DIR *a = opendir(argv[1]) ;\n        if (a == NULL){\n                printf(\"error. cannot open %s\\n\", argv[1]);\n                return 1;\n        }\n\n        // - malloc question about this very next line\n        struct dirent *b; \n        while (( b = readdir(a)) != NULL){\n                printf(\"%s %lu\\n\", b-&gt;d_name, b-&gt;d_ino);\n        }\n\n        int closing = closedir(a);\n        printf(\"in closing, status is %d\\n\", closing);\n        return 0;\n}\n</code></pre>\n\n<p>Newcomer to C, clueless too - please be gentle! :) </p>\n"}, {"tags": ["c", "macos", "gcc", "linker", "macos-high-sierra"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1520994917, "post_id": 49268901, "comment_id": 85541085, "body": "Just to test, does the program link successfully if you drop <code>-lrt</code> from <code>LIBS</code>?  (Incidentally, <code>-O2</code> belongs in CFLAGS, not LIBS; it isn&#39;t doing you hardly any good where you have it.)"}, {"owner": {"reputation": 211, "user_id": 8672055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XAYCQ.jpg?s=128&g=1", "display_name": "Kristy", "link": "https://stackoverflow.com/users/8672055/kristy"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1520995046, "post_id": 49268901, "comment_id": 85541108, "body": "@zwol No it does not! Removing <code>-O2</code> does not link it. And thanks for letting me know that <code>-O2</code> belongs to CFLAGS"}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 1, "creation_date": 1520995401, "post_id": 49268901, "comment_id": 85541183, "body": "Is the <code>librt.so</code> file in the standard paths of libs like <code>&#47;usr&#47;lib</code>? Perhaps you should also pass the <code>-L</code> option with the path where to find <code>librt.so</code>."}, {"owner": {"reputation": 211, "user_id": 8672055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XAYCQ.jpg?s=128&g=1", "display_name": "Kristy", "link": "https://stackoverflow.com/users/8672055/kristy"}, "reply_to_user": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520995591, "post_id": 49268901, "comment_id": 85541218, "body": "@Pablo I cannot find <code>librt.so</code> in <code>&#47;usr&#47;lib</code> or even <code>&#47;usr&#47;include</code>!!"}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520995812, "post_id": 49268901, "comment_id": 85541265, "body": "<code>librt.so</code> should be included in your toolchain when you installed your compiler. I don&#39;t use mac, so I don&#39;t know which package you should install. See <a href=\"https://stackoverflow.com/a/1506031/1480131\">stackoverflow.com/a/1506031/1480131</a>"}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520995991, "post_id": 49268901, "comment_id": 85541304, "body": "Based on  a quick <a href=\"https://www.google.com/search?newwindow=1&amp;client=firefox-b&amp;ei=KI2oWq-LIsKNsgGg_raoCg&amp;q=librt.so+mac&amp;oq=librt.so+mac&amp;gs_l=psy-ab.3..33i160k1.142216.142695.0.143183.4.4.0.0.0.0.149.419.0j3.3.0....0...1c.1.64.psy-ab..1.3.417...0i30k1j0i22i30k1.0.MzCO07vN88Y\" rel=\"nofollow noreferrer\">google search</a> I&#39;ve found many github bug reports with the same problem. Apparently for Darwin you don&#39;t need <code>-lrt</code> at all."}, {"owner": {"reputation": 211, "user_id": 8672055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XAYCQ.jpg?s=128&g=1", "display_name": "Kristy", "link": "https://stackoverflow.com/users/8672055/kristy"}, "reply_to_user": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 1, "creation_date": 1520996101, "post_id": 49268901, "comment_id": 85541328, "body": "@Pablo Thank you very much for your effort. I truly appreciate it. Even if removing <code>-lrt</code>, I still have this issue. Hopefully, someone has a solution"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1520997985, "post_id": 49268901, "comment_id": 85541768, "body": "You don&#39;t need <code>-lm</code> on Macs either, even though you do on Linux.  Macs put more of the code in the central library and rely on fewer auxilliary libraries.  If you&#39;re really worried, you can create a <code>librt.a</code> in the current directory and it will be linked.  It needn&#39;t hold anything much (but it does need an object file in it).  I created a source file <code>unlinked.c</code> containing <code>extern void I_wont_link_this_function_if_I_can_help_it(void); void I_wont_link_this_function_if_I_can_help_it(void) { }</code>; compiled it; and ran <code>ar rv librt.a unlinked.o</code>.  I could then link programs with <code>-L. -lrt</code>."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1521026684, "post_id": 49268901, "comment_id": 85555333, "body": "You ought to be getting a different error message or messages with <code>-lrt</code> removed from <code>LIBS</code>.  Please show us those error messages.  (I have a bad feeling that the ultimate answer is going to be &quot;OSX doesn&#39;t implement the interfaces you are trying to use...&quot;)"}], "owner": {"reputation": 211, "user_id": 8672055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XAYCQ.jpg?s=128&g=1", "display_name": "Kristy", "link": "https://stackoverflow.com/users/8672055/kristy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 985, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1520994825, "creation_date": 1520994825, "question_id": 49268901, "link": "https://stackoverflow.com/questions/49268901/issue-when-linking-with-lrt-on-mac-osx", "title": "Issue when linking with `-lrt` on Mac OSX", "body": "<p>On my Mac OSX 10.13, I always use the following makefile to compile C codes:</p>\n\n<pre><code>TARGET = run\nLIBS = -O2 -lm -lrt\nCC = gcc\n\n.PHONY: default all clean\n\nall: $(TARGET)\n\nOBJECTS = $(patsubst %.c, %.o, $(wildcard *.c))\nHEADERS = $(wildcard *.h)\n\n%.o: %.c $(HEADERS)\n    $(CC) $(CFLAGS) -c $&lt; -o $@\n\n.PRECIOUS: $(TARGET) $(OBJECTS)\n\n$(TARGET): $(OBJECTS)\n    $(CC) $(OBJECTS) $(CFLAGS) $(LIBS) -o $@\n\nclean:\n    -rm -f *.o\n    -rm -f $(TARGET)\n</code></pre>\n\n<p>Note that I use <code>-lrt</code> on purpose because I use <code>#include &lt;aio.h&gt;</code> for some of my codes. Because of that, I keep getting this error:</p>\n\n<pre><code>ld: library not found for -lrt\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [run] Error 1\n</code></pre>\n\n<p>This error does <strong>not</strong> show up when running on Linux systems. How do I fix that to be runnable on Mac OSX?</p>\n"}, {"tags": ["c", "function", "pointers"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1520994828, "post_id": 49268893, "comment_id": 85541069, "body": "And what is your problem with this task?"}, {"owner": {"reputation": 13, "user_id": 9488862, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "feeling blue", "link": "https://stackoverflow.com/users/9488862/feeling-blue"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1520994929, "post_id": 49268893, "comment_id": 85541089, "body": "I am completely lost in how to do that."}, {"owner": {"reputation": 13, "user_id": 9488862, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "feeling blue", "link": "https://stackoverflow.com/users/9488862/feeling-blue"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1520995682, "post_id": 49268893, "comment_id": 85541236, "body": "Thank you all, that was easier than I thought."}], "answers": [{"tags": [], "owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "is_accepted": true, "score": 1, "last_activity_date": 1520995194, "creation_date": 1520995194, "answer_id": 49268945, "question_id": 49268893, "link": "https://stackoverflow.com/questions/49268893/passing-a-pointer-from-a-function-to-another-function/49268945#49268945", "title": "Passing a pointer from a function to another function", "body": "<blockquote>\n  <p>I am completely lost in how to do that.</p>\n</blockquote>\n\n<p>Using the exact same logic you used for passing the pointer to <code>x</code> from <code>main</code> to <code>func1</code>.</p>\n\n<p>In this case <code>func2</code> should also accept a pointer to <code>int</code>and <code>func1</code> should pass the pointer to <code>func2</code> that it got from <code>main</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid func1(int *px);\nvoid func2(int *px);\n\nint main(void)\n\n{   \n    int x=5;\n    printf(\"x in main %d\\n\", x);\n    func1(&amp;x);\n\n    // x will be 15 here\n\n    return 0;\n}\n\nvoid func1(int *px)\n{\n    *px = 10;\n    printf(\"x i funk 1 %d\\n\", *px);\n    funk2(px); // send to this function a pointer to x, which in this function(func1) is pointed by *px\n    //funk3(); // this function was not defined anywhere\n}\n\nvoid func2(int *px)\n{\n    *px=15;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "is_accepted": false, "score": 1, "last_activity_date": 1520995264, "creation_date": 1520995264, "answer_id": 49268952, "question_id": 49268893, "link": "https://stackoverflow.com/questions/49268893/passing-a-pointer-from-a-function-to-another-function/49268952#49268952", "title": "Passing a pointer from a function to another function", "body": "<p>Simply pass the argument in <code>func1()</code> to <code>func2()</code>, as a pointer, <code>px</code> in <code>func1()</code> and <code>py</code> in <code>func2()</code> will point to the same memory location, the address of <code>x</code>.</p>\n\n<pre><code>int main(void)\n\n{\n    int x = 5;\n    printf(\"x in main %d\\n\", x);\n    func1(&amp;x);\n\n    printf(\"x now %d\\n\", x);\n\n    return 0;\n}\n\nvoid func2(int *py)\n{\n    *py = 15; // here I want to change value of x \n}\n\n\n\nvoid func1(int *px)\n{\n    *px = 10;\n    printf(\"x in funk 1 %d\\n\", *px);\n    func2(px); // send to this function a pointer to x, which in this function(func1) is pointed by *px\n\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>x in main 5\nx in funk 1 10\nx now 15\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9488862, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "feeling blue", "link": "https://stackoverflow.com/users/9488862/feeling-blue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 49268945, "answer_count": 2, "score": 1, "last_activity_date": 1520995264, "creation_date": 1520994735, "question_id": 49268893, "link": "https://stackoverflow.com/questions/49268893/passing-a-pointer-from-a-function-to-another-function", "title": "Passing a pointer from a function to another function", "body": "<p>I am looking for a way to pass a pointer from <em>not</em> main function to another function. A variable x with value 5 sends as pointer to func1, func1 changes variable value to 10, then func1 sends same variable to func2.</p>\n\n<p>I want it to look something like that:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid func1(int *px);\nvoid func2();\n\nint main(void)\n\n{   \n    int x=5;\n    printf(\"x in main %d\\n\", x);\n    func1(&amp;x);\n\n    return 0;\n}\n\nvoid func1(int *px)\n{\n    *px = 10;\n    printf(\"x i funk 1 %d\\n\", *px);\n    funk2(); // send to this function a pointer to x, which in this function(func1) is pointed by *px\n    funk3();\n}\n\nvoid func2()\n{\n    //*px=15 // here I want to change value of x \n}\n</code></pre>\n"}, {"tags": ["c", "openmp", "matrix-multiplication"], "comments": [{"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 1, "creation_date": 1521011079, "post_id": 49268298, "comment_id": 85545962, "body": "Using threads (OpenMP) is not a good way to get additional speed on matrix multiplication. Rather, think deeply about your cache utilization, memory layout, and loop blocking. (<a href=\"https://github.com/flame/how-to-optimize-gemm/wiki\" rel=\"nofollow noreferrer\">Details</a>)."}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "reply_to_user": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1521025131, "post_id": 49268298, "comment_id": 85554191, "body": "@Richard is right, doing matrix multiplication optimally is hard. So it&#39;s much simpler  to use an optimised matrix multiply that someone else has spent time on, such as the ones in Intel MKL (<a href=\"https://software.intel.com/en-us/mkl\" rel=\"nofollow noreferrer\">software.intel.com/en-us/mkl</a> ) which is gratis."}], "answers": [{"tags": [], "owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "is_accepted": true, "score": 2, "last_activity_date": 1521010731, "creation_date": 1521010731, "answer_id": 49271460, "question_id": 49268298, "link": "https://stackoverflow.com/questions/49268298/error-in-openmp-trying-to-vectorize-a-matrix-multiplication-for-loop/49271460#49271460", "title": "Error in OpenMP, trying to vectorize a Matrix Multiplication for loop", "body": "<p>There're two things worth mentioning here:</p>\n\n<ol>\n<li>What you're actually doing here isn't vectorizing (although your compiler might be doing it for you), it is parallelizing. Here, you're creating threads to split the work among. Each thread may or may not use the CPU's vector units to spreed the computations up even more, but it has nothing to do with the parallelization directives you've put.</li>\n<li>The error the compiler reports only says that it doesn't known the variables you've listed in your <code>private</code> directive. Indeed, if you look closer, neither of <code>i</code>, <code>j</code>, <code>k</code>, and <code>sum</code> have been declared before the directive line. So for the compiler, they don't exist (yet). As a matter of fact, since you only declare them when you need them (which is very good), which is inside the <code>parallel</code> region, you don't have to declare them <code>private</code>anyway since they already are private to the the thread where they are created. So just removing the <code>private</code> clause should fix your issue.</li>\n</ol>\n\n<p>Finally, if performance matters to you, rather than trying to parallelize or vectorize this code, just consider replacing it by an effective library call that will do it for you. Unfortunately, since you're dealing with integers, BLAS won't do. But I'm sure there are good options out there for that. </p>\n"}], "owner": {"reputation": 29, "user_id": 8127225, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/099969c0b831f00cb60310e613c2e399?s=128&d=identicon&r=PG&f=1", "display_name": "Jdubb", "link": "https://stackoverflow.com/users/8127225/jdubb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 49271460, "answer_count": 1, "score": 0, "last_activity_date": 1521010780, "creation_date": 1520989562, "last_edit_date": 1521010780, "question_id": 49268298, "link": "https://stackoverflow.com/questions/49268298/error-in-openmp-trying-to-vectorize-a-matrix-multiplication-for-loop", "title": "Error in OpenMP, trying to vectorize a Matrix Multiplication for loop", "body": "<p>I'm trying to vectorize an old matrix multiplication program I made, specifically this function using a parallel for call in openmp. I keep getting this error:</p>\n\n<pre><code>matrix_multiply.c(26): error: invalid entity for this variable list in omp clause\n    #pragma omp parallel for schedule(static) default(shared) private(i,j,k,sum)\n</code></pre>\n\n<p>Any help would be much appreciated as I've tried looking up the error and can't find any documentation that was helpful. I'm compiling using ICC if that makes a difference. </p>\n\n<pre><code>void matrix_mult(int * matrix_A, int * matrix_B, int n)\n{\n    #pragma omp parallel for schedule(static) default(shared) private(i,j,k,sum)\n    for (int i = 0; i &lt; n; i++)\n    {\n        for (int j = 0; j &lt; n; j++)\n        {\n            int sum = 0;\n            for (int k = 0; k&lt;n; k++)\n            {\n                int index_a = i * n +k;\n                int index_b = j + k * n;\n                sum += matrix_A[index_a] * matrix_A[index_b];\n\n            }\n            matrix_B[i * n + j] = sum;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1520989193, "post_id": 49268228, "comment_id": 85539818, "body": "Which language are you using, <code>C</code> or <code>C++</code>?"}, {"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1520989213, "post_id": 49268228, "comment_id": 85539822, "body": "man fopen to see the api..."}, {"owner": {"reputation": 574, "user_id": 8894112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/351ad98fc5792fc09c9b18cbdeef7fd6?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Padureanu", "link": "https://stackoverflow.com/users/8894112/victor-padureanu"}, "edited": false, "score": 0, "creation_date": 1520989355, "post_id": 49268228, "comment_id": 85539852, "body": "I think the question is similar to this one: <a href=\"https://stackoverflow.com/questions/11381694/using-a-c-string-like-a-file\" title=\"using a c string like a file\">stackoverflow.com/questions/11381694/&hellip;</a>"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1520989373, "post_id": 49268228, "comment_id": 85539857, "body": "Well, POSIX systems can use <a href=\"https://linux.die.net/man/3/fmemopen\" rel=\"nofollow noreferrer\"><code>fmemopen</code></a>, but <a href=\"https://stackoverflow.com/q/12249610/364696\">it doesn&#39;t look like any such equivalent exists for Windows</a>."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520989420, "post_id": 49268228, "comment_id": 85539870, "body": "I don&#39;t know of a function in the standard C library that does that, for for POSIX system (linux,mac,bsd) there is <a href=\"http://man7.org/linux/man-pages/man3/fmemopen.3.html\" rel=\"nofollow noreferrer\"><code>fmemopen</code></a>"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 4, "creation_date": 1520989424, "post_id": 49268228, "comment_id": 85539873, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11381694/using-a-c-string-like-a-file\">Using a C string like a FILE*</a>"}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520989758, "post_id": 49268228, "comment_id": 85539937, "body": "Does Windows has something like <a href=\"http://man7.org/linux/man-pages/man2/pipe.2.html\" rel=\"nofollow noreferrer\"><code>pipe</code></a>? With a pipe and <a href=\"https://linux.die.net/man/3/fdopen\" rel=\"nofollow noreferrer\"><code>fdopen</code></a> you could simulate that on Windows, but you wouldn&#39;t be able to do <code>fseek</code>."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1521040356, "post_id": 49268228, "comment_id": 85565200, "body": "If you write a temp file, it shouldn&#39;t require writing to (physical) disk.  Sane systems mount a tmpfs on <code>&#47;tmp</code>, so you&#39;re only using (virtual) memory."}], "answers": [{"comments": [{"owner": {"reputation": 244, "user_id": 5347283, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uHWX26Md2lU/AAAAAAAAAAI/AAAAAAAAAEw/U8_A4Jaedlc/photo.jpg?sz=128", "display_name": "Will Crawford", "link": "https://stackoverflow.com/users/5347283/will-crawford"}, "edited": false, "score": 0, "creation_date": 1521831758, "post_id": 49268274, "comment_id": 85916339, "body": "Possibly worth noting that code equivalent to fmemopen() was/is used in some standard libraries to implement [v]s[n]printf()..."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 5, "last_activity_date": 1520990571, "last_edit_date": 1520990571, "creation_date": 1520989406, "answer_id": 49268274, "question_id": 49268228, "link": "https://stackoverflow.com/questions/49268228/how-to-convert-string-to-a-file-opened-for-read/49268274#49268274", "title": "How to convert string to a FILE* opened for read", "body": "<p>Posix requires the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fmemopen.html\" rel=\"nofollow noreferrer\"><code>fmemopen()</code></a> function, which does exactly what you ask.</p>\n\n<p>Glibc <a href=\"http://man7.org/linux/man-pages/man3/fmemopen.3.html\" rel=\"nofollow noreferrer\">certainly has it</a>.</p>\n\n<p>Can't say for sure about Windows, but it appears that MinGW includes newlib, which also implements it. If that's any help.</p>\n"}], "owner": {"reputation": 939, "user_id": 740484, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e8d032c8906af3a978bd7094a3a2c02?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/740484/serge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "closed_date": 1520989489, "answer_count": 1, "score": -2, "last_activity_date": 1521029819, "creation_date": 1520989047, "last_edit_date": 1521029819, "question_id": 49268228, "link": "https://stackoverflow.com/questions/49268228/how-to-convert-string-to-a-file-opened-for-read", "closed_reason": "Needs details or clarity", "title": "How to convert string to a FILE* opened for read", "body": "<p>I am writing a C++ application, which needs to call a library function that expects <code>FILE*</code> opened for read. I have no code of that function - it a black box to me.\nThe data that I need to pass to the function is in memory in <code>char*</code> buffer of a known size. Ideally, I need to wrap a my buffer in a <code>FILE*</code> structure and pass it in, but I need all the stdio functions that normally works on a <code>FILE*</code> to work on what I pass in, for I don't know which of the functions it calls - definitely <code>fread</code>, possibly <code>fseek</code> too.\nThe code is rather a performance-sensitive one, so I would like to avoid writing the buffer to disk just so that I could create a <code>FILE*</code> from it by <code>fopen</code>. Is there a way to make a <code>FILE*</code> that would allow from my buffer in memory? \nSomething like <code>stringstream</code> in c++?\nMy code needs to be able to run both on windows and linux.</p>\n\n<p>I've seen quite a few questions where people try to write via <code>FILE*</code> to memory. My case is rather a reverse - I need to present the existing buffer as a <em>readable</em> <code>FILE*</code>.</p>\n\n<p>Thanks a lot!</p>\n\n<p>P.S. yes, <a href=\"https://stackoverflow.com/questions/11381694/using-a-c-string-like-a-file\">Using a C string like a FILE*</a> is exactly what I'm asking, somehow I couldn't find it earlier...</p>\n\n<p>Still, if you could suggest a solution on windows, that would be very helpful!</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1520990599, "post_id": 49268146, "comment_id": 85540141, "body": "That&#39;s another &#39;A&#39; grade answer."}], "tags": [], "owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "is_accepted": false, "score": 1, "last_activity_date": 1520988890, "last_edit_date": 1520988890, "creation_date": 1520988417, "answer_id": 49268146, "question_id": 49268015, "link": "https://stackoverflow.com/questions/49268015/reading-jpegs-from-a-sd-card-using-c/49268146#49268146", "title": "Reading jpegs from a SD card using C", "body": "<p>The way you are reading is a bit wrong, it would only work if the file size is\na multiple of 512. You have to get the number of bytes <code>fread</code> read and write\nonly that amount. Because you are reading blocks of 512 bytes, the last block\nmight not be that large, hence you might overflow the buffer which leads to a\nsegfault.</p>\n\n<p>Change you reading to:</p>\n\n<pre><code>unsigned char buf[512];\nsize_t n;\nwhile ((n = fread(buf, 1, sizeof buf / sizeof buf[0], fp)))\n{\n    for (int i = 0; i &lt; n; i++) // the i &lt; n is the correct way\n    {\n        raw[r] = buf[i];\n        r++;\n    }\n}\n</code></pre>\n\n<p>Also it is bad practice to do <code>exit(1)</code> when a function fails, it's better that\nthis function should return <code>NULL</code> instead and the calling function should check\nif the returned value is <code>NULL</code>:</p>\n\n<pre><code>unsigned char * read_card(char * fname, int * size)\n{\n\n    struct stat st;\n    if (stat(fname, &amp;st) == -1)\n    {\n        fprintf(stderr, \"Can't get info about %s\\n\", fname);\n        return NULL; // &lt;-- here do not do exit\n    }\n    ...\n\n}\n\nint main(void)\n{\n    int card_length;\n    unsigned char *card = read_card(\"card.raw\", &amp;card_length);\n\n    if(card == NULL)\n    {\n        fprintf(stder, \"Error, could not read card.raw\\n\");\n        return 1;\n    }\n\n    recover(card, card_length);\n\n    // do not forget to free the memory\n    free(card);\n\n    return 0;\n}\n</code></pre>\n\n<p>Also <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">do not cast <code>malloc</code></a>, do it like this:</p>\n\n<pre><code>unsigned char *raw = malloc(len * sizeof *raw);\n</code></pre>\n\n<p>and because the size of a <code>char</code> is defined as 1, in this case you can even\nremove the <code>* sizeof *raw</code>.</p>\n\n<p>I don't know how the jpeg format works, so I cannot comment on whether your\n<code>recover</code> is doing the correct thing. But there is one thing you should think\nabout:</p>\n\n<pre><code>for( int i = 0; i &lt; size ;i++ ) {\n    if ((data[i] == 0xff &amp;&amp; data[i+1] == 0xd8 &amp;&amp; data[i+2] == 0xff &amp;&amp; \n        data[i+3] == 0xe0) ...\n\n}\n</code></pre>\n\n<p>When you get to the last 2 iteration (<code>i == size - 2</code>), <code>data[i+2]</code> and\n<code>data[i+3]</code> will be out of bounds, so you should check that before accessing\n<code>data[i+2]</code> and <code>data[i+3]</code>. And the same is true for the last iteration,\n<code>data[i+1]</code> will be also out of bounds. Like I said, I don't know how jpeg works\nso I don't know the meaning of all these values (like <code>0xff</code> or <code>0xd8</code>). But I\nthink that after the <code>save_jpeg(data[start], length, name);</code> you probably need\nto do a <code>return</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9488522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39456823ef06f301691553406ac322c1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/9488522/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1520988890, "creation_date": 1520987455, "question_id": 49268015, "link": "https://stackoverflow.com/questions/49268015/reading-jpegs-from-a-sd-card-using-c", "title": "Reading jpegs from a SD card using C", "body": "<p>For my C class, I have to write a program that looks through an SD card, or really a card.raw file, and pull out the images that were accidentally deleted. The issue that I am having is that I keep getting a segmentation fault and I do not know why. I think it may be that I am not using data pointer correctly, but I am unaware of how else to do it. I will have some code here so thoughts are appreciated! The part that should be looked at is the recover function as that it the piece that is having the trouble, teacher pretty much gave us the rest of the code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;unistd.h&gt;\n\n// Function prototypes. Don't change these.\nunsigned char * read_card(char * fname, int *size);\nvoid save_jpeg(unsigned char * data, int size, char * fname);\nvoid recover(unsigned char * data, int size);\n\nint main()\n{\n    // Read the card.raw file into an array of bytes (unsigned char)\n    int card_length;\n    unsigned char *card = read_card(\"card.raw\", &amp;card_length);\n\n    // Recover the images\n    recover(card, card_length);\n}\n\nunsigned char * read_card(char * fname, int * size)\n{\n\n    struct stat st;\n    if (stat(fname, &amp;st) == -1)\n    {\n        fprintf(stderr, \"Can't get info about %s\\n\", fname);\n        exit(1);\n    }\n    int len = st.st_size;\n    unsigned char *raw = (unsigned char *)malloc(len * sizeof(unsigned \nchar));\n\n    FILE *fp = fopen(fname, \"rb\");\n    if (!fp)\n    {\n        fprintf(stderr, \"Can't open %s for reading\\n\", fname);\n        exit(1);\n    }\n\n    char buf[512];\n    int r = 0;\n    while (fread(buf, 1, 512, fp))\n    {\n        for (int i = 0; i &lt; 512; i++)\n    {\n        raw[r] = buf[i];\n        r++;\n    }\n    }\n    fclose(fp);\n\n    *size = len;\n    return raw;\n}\n\nvoid save_jpeg(unsigned char * data, int size, char * fname)\n{\n    FILE *fp = fopen(fname, \"wb\");\n    if (!fp)\n    {\n        fprintf(stderr, \"Can't write to %s\\n\", fname);\n        exit(1);\n    }\n\n    fwrite(data, 1, size, fp);\n    fclose(fp);   \n}\nvoid recover(unsigned char * data, int size){\n    int start=0;\n    int length=0;\n    int count=0;\n    char name[64];\n\n    for( int i = 0; i &lt; size ;i++ ){\n        if ((data[i] == 0xff &amp;&amp; data[i+1] == 0xd8 &amp;&amp; data[i+2] == 0xff &amp;&amp; \ndata[i+3] == 0xe0) ||\n            (data[i] == 0xff &amp;&amp; data[i+1] == 0xd8 &amp;&amp; data[i+2] == 0xff &amp;&amp; \nrmdata[i+3] == 0xe1)){\n               start = i;\n\n            }\n        if(data[i] == 0xd9){\n            length = i - start;\n            count++;\n            sprintf(name,\"pic%d.jpeg\",count);\n            save_jpeg(data[start], length, name);\n\n        }\n\n\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c", "command-line-arguments"], "comments": [{"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520987054, "post_id": 49267955, "comment_id": 85539326, "body": "<code>atoi</code> returns a single integer, if you really want an array, then you can do <code>int arr[] = { atoi(argv[1]) }</code>;"}, {"owner": {"reputation": 5, "user_id": 9280667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b551baf20e5b1c400ef0f8d23e1a3e4?s=128&d=identicon&r=PG&f=1", "display_name": "reeseboy07", "link": "https://stackoverflow.com/users/9280667/reeseboy07"}, "reply_to_user": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520987145, "post_id": 49267955, "comment_id": 85539355, "body": "What is the purpose of the {} between atoi(argv[1])?"}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520987231, "post_id": 49267955, "comment_id": 85539370, "body": "This creates an array with the values specified in the curly braces"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 9280667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b551baf20e5b1c400ef0f8d23e1a3e4?s=128&d=identicon&r=PG&f=1", "display_name": "reeseboy07", "link": "https://stackoverflow.com/users/9280667/reeseboy07"}, "edited": false, "score": 0, "creation_date": 1520987363, "post_id": 49267984, "comment_id": 85539390, "body": "Sorry I just saw the update. Ignore previous comment"}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 5, "user_id": 9280667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b551baf20e5b1c400ef0f8d23e1a3e4?s=128&d=identicon&r=PG&f=1", "display_name": "reeseboy07", "link": "https://stackoverflow.com/users/9280667/reeseboy07"}, "edited": false, "score": 0, "creation_date": 1520987417, "post_id": 49267984, "comment_id": 85539399, "body": "@reeseboy07 I&#39;ve updated my answer because I realized that what you are saying right  now, is what you wanted."}], "tags": [], "owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "is_accepted": true, "score": 1, "last_activity_date": 1520987563, "last_edit_date": 1520987563, "creation_date": 1520987207, "answer_id": 49267984, "question_id": 49267955, "link": "https://stackoverflow.com/questions/49267955/cannot-read-command-line-arguments-into-integer-array-c/49267984#49267984", "title": "Cannot read Command Line Arguments into integer Array C", "body": "<p>If what you are passing through the command line a series of number and you want\nto have them in an array, then you can do this:</p>\n\n<pre><code>int main(int argc, char **argv)\n{\n    if(argc &lt; 2)\n    {\n        fprintf(stderr, \"not enough arguments\\n\");\n        return 1;\n    }\n\n    int arr[argc-1];\n\n    for(size_t i = 0; i &lt; argc - 1; ++i)\n        arr[i] = atoi(argv[i+1]);\n\n    ...\n\n    return;\n}\n</code></pre>\n\n<p>The reason why the conversion starts at <code>argv[i+1]</code> and not <code>argv[0]</code> is because\n<code>argv[0]</code> has always the string that contains the file name of the executed\nbinary (more precisely the was you've passed the command in the shell), so\n<code>argc</code> is always at least 1. That's why the dimension of <code>arr</code> is <code>argc-1</code>,\nbecause for <code>n</code> arguments, <code>argc</code> will be <code>n+1</code>.</p>\n\n<p>Also be aware that <code>atoi</code> does a poor job when it encounters an error, if the\nstring is not an integer, then <code>atoi</code> will return 0 and you have no idea whether\nthis is a legit number of an error in the conversion. Using <a href=\"https://linux.die.net/man/3/strtol\" rel=\"nofollow noreferrer\"><code>strtol</code></a> is a\nfar better alternative:</p>\n\n<pre><code>int main(int argc, char **argv)\n{\n    if(argc &lt; 2)\n    {\n        fprintf(stderr, \"not enough arguments\\n\");\n        return 1;\n    }\n\n    int arr[argc-1];\n    char *endptr;\n\n    for(size_t i = 0; i &lt; argc - 1; ++i)\n    {\n        arr[i] = strtol(argv[i+1], &amp;endptr, 0);\n\n        if(*endptr != 0)\n        {\n            fprintf(stderr, \"The argument #%d is not a number\\n\", i+1);\n            return 1; // error\n        }\n    }\n\n    ...\n\n    return;\n}\n</code></pre>\n\n<p>This would give you a far better result, because it reacts to error from the\nuser.</p>\n"}], "owner": {"reputation": 5, "user_id": 9280667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b551baf20e5b1c400ef0f8d23e1a3e4?s=128&d=identicon&r=PG&f=1", "display_name": "reeseboy07", "link": "https://stackoverflow.com/users/9280667/reeseboy07"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 49267984, "answer_count": 1, "score": -2, "last_activity_date": 1520987563, "creation_date": 1520986928, "question_id": 49267955, "link": "https://stackoverflow.com/questions/49267955/cannot-read-command-line-arguments-into-integer-array-c", "title": "Cannot read Command Line Arguments into integer Array C", "body": "<p>I'm trying to use command line arguments and have it read into an array however the complier is giving me this error:</p>\n\n<p><code>error: invalid initializer\n</code>\nI know I need to use  <code>int main(int argc, char *argv[])</code> to use command line arguments and then I have it set like this to read into the array:</p>\n\n<pre><code> int arr[] = atoi(argv[1]);\n</code></pre>\n\n<p>Not sure what I am missing as this always worked for me in the past. Any ideas?</p>\n"}, {"tags": ["c", "arrays", "sorting"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1520984981, "post_id": 49267673, "comment_id": 85538732, "body": "Make a copy of the array before you sort."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520985011, "post_id": 49267673, "comment_id": 85538739, "body": "Make a copy of the array before sorting it. Btw the <code>main</code> function should not be <code>void</code>, it should be <code>int main(void)</code> or <code>int main(int argc, char **argv)</code>"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1520985197, "post_id": 49267673, "comment_id": 85538812, "body": "What purpose do the <code>.mod</code> in the code snippet have?"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1520985250, "post_id": 49267673, "comment_id": 85538832, "body": "Personally, I&#39;d use an array of structures, where each structure contains both the data, as well as the original index of the data."}, {"owner": {"reputation": 1, "user_id": 7575576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/debc2b641c64cadecc3f16324db9d4ce?s=128&d=identicon&r=PG&f=1", "display_name": "Hi I suck at coding", "link": "https://stackoverflow.com/users/7575576/hi-i-suck-at-coding"}, "edited": false, "score": 0, "creation_date": 1520985409, "post_id": 49267673, "comment_id": 85538881, "body": "I had some typo which has now been cleared. Sorry about that."}, {"owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "edited": false, "score": 1, "creation_date": 1520985932, "post_id": 49267673, "comment_id": 85539037, "body": "If you are serious about this website and about getting better at coding, I would start by choosing a better user name."}, {"owner": {"reputation": 1, "user_id": 7575576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/debc2b641c64cadecc3f16324db9d4ce?s=128&d=identicon&r=PG&f=1", "display_name": "Hi I suck at coding", "link": "https://stackoverflow.com/users/7575576/hi-i-suck-at-coding"}, "edited": false, "score": 0, "creation_date": 1520987138, "post_id": 49267673, "comment_id": 85539353, "body": "Maybe you need a better understanding of humour Stephen."}], "answers": [{"comments": [{"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1520989152, "post_id": 49267901, "comment_id": 85539809, "body": "shouldn&#39;t you also swap the <code>S[x].index</code> as well, so that the value+index are preserved?"}, {"owner": {"reputation": 1, "user_id": 7575576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/debc2b641c64cadecc3f16324db9d4ce?s=128&d=identicon&r=PG&f=1", "display_name": "Hi I suck at coding", "link": "https://stackoverflow.com/users/7575576/hi-i-suck-at-coding"}, "edited": false, "score": 0, "creation_date": 1521053585, "post_id": 49267901, "comment_id": 85574132, "body": "I made a structure and performed the sorting function. This worked perfectly so thank you for the idea."}], "tags": [], "owner": {"reputation": 16, "user_id": 8906985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_74M1IHOuXE/AAAAAAAAAAI/AAAAAAAACOQ/iLQjqy1MeME/photo.jpg?sz=128", "display_name": "Markus Kampl", "link": "https://stackoverflow.com/users/8906985/markus-kampl"}, "is_accepted": true, "score": 0, "last_activity_date": 1520986557, "creation_date": 1520986557, "answer_id": 49267901, "question_id": 49267673, "link": "https://stackoverflow.com/questions/49267673/how-to-get-the-previous-position-of-a-number-in-an-array-before-it-was-sorted/49267901#49267901", "title": "How to get the previous position of a number in an array before it was sorted?", "body": "<p>One possibility to get this result is, like mentioned above by Nominal Animal, to store the values in a structure, and sort the structure.</p>\n\n<p>When you are sorting, you have to be careful about data-types. You are mixing int and double. Also the <code>%lf</code> is not meant to print <code>int</code> values.</p>\n\n<p>The following code orders a list of <code>long</code> and also provide the initial index of the number.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct sort_s{\n  long number;\n  long index;\n}sort_t;\n\nint main(void){\n\n  sort_t S[200];\n  long H[200];\n  long i,j;\n  long a;\n\n  for(i=0;i&lt;200;i++){\n    S[i].number = H[i];\n    S[i].number = i; /*for testing*/\n    S[i].index  = i;\n  }\n\n  for( i = 0; i &lt; 200; ++i)\n  {\n    for( j = i+1; j &lt; 200; ++j)\n      {\n        if(S[i].number &lt; S[j].number)\n          {\n            a = S[i].number;\n            S[i].number = S[j].number;\n            S[j].number = a;\n          }\n      }\n  }\n  printf(\"H in descending order \\n\");\n\n  for ( i = 0; i &lt; 200; ++i)\n  {\n    printf(\"%ld at pos: %ld \\n\",S[i].number,S[i].index);\n  }\n\n\n  return 0;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7575576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/debc2b641c64cadecc3f16324db9d4ce?s=128&d=identicon&r=PG&f=1", "display_name": "Hi I suck at coding", "link": "https://stackoverflow.com/users/7575576/hi-i-suck-at-coding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 49267901, "answer_count": 1, "score": -2, "last_activity_date": 1520986557, "creation_date": 1520984855, "last_edit_date": 1520985321, "question_id": 49267673, "link": "https://stackoverflow.com/questions/49267673/how-to-get-the-previous-position-of-a-number-in-an-array-before-it-was-sorted", "title": "How to get the previous position of a number in an array before it was sorted?", "body": "<p>I have a code that sorts my array of numbers from descending order but I also want to know the nth position of the numbers in the array before it was sorted after the sort. How do i get that? </p>\n\n<pre><code>    int main ()\n   {\n    int H[200];\n    int i,j;\n    double a;\n\n       for( i = 0; i &lt; 200; ++i)\n       {\n          for( j = i+1; j &lt; 200; ++j)\n       {\n           if(H[i] &lt; H[j])\n             {\n               a = H[i];\n               H[i] = H[j];\n               H[j] = a;\n             }\n        }\n      }\n    printf(\"H in descending order \\n\");\n\n     for ( i = 0; i &lt; 200; ++i)\n       {\n          printf(\"%lf \\n\",H[i];\n       }\n\n\n    }\n</code></pre>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1520983215, "post_id": 49267383, "comment_id": 85538183, "body": "With negative values also?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1520983243, "post_id": 49267383, "comment_id": 85538191, "body": "If you want to do it in C why have you tagged C++? Are you accepting C++ answerrs? I<a href=\"http://en.cppreference.com/w/cpp/algorithm/next_permutation\" rel=\"nofollow noreferrer\">f so, investigate <code>std::next_permutation</code></a>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1520986690, "post_id": 49267383, "comment_id": 85539234, "body": "@user4581301 Those aren&#39;t pernutations."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1521000360, "post_id": 49267383, "comment_id": 85542328, "body": "You got me there."}, {"owner": {"reputation": 939, "user_id": 7479376, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d8b6cb4c5dc00d02418f51630dcd3806?s=128&d=identicon&r=PG&f=1", "display_name": "Galuoises", "link": "https://stackoverflow.com/users/7479376/galuoises"}, "edited": false, "score": 0, "creation_date": 1521054883, "post_id": 49267383, "comment_id": 85574789, "body": "I have changed the title. I am looking for an implementation in C. No negative values, just from 0 to N"}, {"owner": {"reputation": 939, "user_id": 7479376, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d8b6cb4c5dc00d02418f51630dcd3806?s=128&d=identicon&r=PG&f=1", "display_name": "Galuoises", "link": "https://stackoverflow.com/users/7479376/galuoises"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1521851331, "post_id": 49267383, "comment_id": 85922904, "body": "@rici You are right, actually they are not permutations. I&#39;ve removed the flag"}], "answers": [{"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1520991339, "post_id": 49267921, "comment_id": 85540309, "body": "I think you want to condition the print with <code>if N is 0</code>."}], "tags": [], "owner": {"reputation": 38, "user_id": 6639656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64592fe8f097729f1da312e3a805d345?s=128&d=identicon&r=PG&f=1", "display_name": "gdhsnlvr", "link": "https://stackoverflow.com/users/6639656/gdhsnlvr"}, "is_accepted": false, "score": 0, "last_activity_date": 1521070939, "last_edit_date": 1521070939, "creation_date": 1520986705, "answer_id": 49267921, "question_id": 49267383, "link": "https://stackoverflow.com/questions/49267383/find-all-permutations-with-a-condition-in-c/49267921#49267921", "title": "Find all permutations with a condition in c", "body": "<p>You can write recursive algorithm:</p>\n\n<pre>\npermutation = []\nf(L, N):\n  if L is 0:\n    if N is 0:\n      print permutation\n    return\n  for i in 0..N:\n    permutation.push_back(i)\n    f(L - 1, N - i)\n    permutation.pop_back()\n</pre>\n\n<p>easy to code with c.</p>\n"}], "owner": {"reputation": 939, "user_id": 7479376, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d8b6cb4c5dc00d02418f51630dcd3806?s=128&d=identicon&r=PG&f=1", "display_name": "Galuoises", "link": "https://stackoverflow.com/users/7479376/galuoises"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1521851555, "creation_date": 1520983084, "last_edit_date": 1521851555, "question_id": 49267383, "link": "https://stackoverflow.com/questions/49267383/find-all-permutations-with-a-condition-in-c", "title": "Find all permutations with a condition in c", "body": "<p>I would like to generate, in c, all the arrays of length L where the total sum N of the elements is fixed. For example for L=3 and N=2 one should get</p>\n\n<pre><code> {0,0,2}, \n {0,1,1},\n {0,2,0},\n {1,0,1},\n {1,1,0},\n {2,0,0}\n</code></pre>\n\n<p>I have found several post on how to do it in Mathematica, but what is an efficient way to do it in c? </p>\n\n<p>I was thinking in using the representation in base 3 to generate all the possible numbers and then take the digits one by one and put them into an array. </p>\n\n<p>The conversion in base 3 can be done with </p>\n\n<pre><code>int BaseConvert(int number,int base){\n    if(number == 0 || base==10) return number;\n\n    return (number % base) + 10*BaseConvert(number / base, base);\n}\n</code></pre>\n\n<p>The last part can be done with </p>\n\n<pre><code>void ConvertNumberToVec(int x,std::vector&lt;int&gt; &amp; vec)\n{\n    int digit;\n    std::vector&lt;int&gt; vec0;\n\n    while(x &gt; 0){\n        digit = x%10;\n        vec0.push_back(digit);\n        x /= 10;\n    }\n    std::reverse(vec0.begin(), vec0.end());\n    vec = vec0;\n}\n</code></pre>\n\n<p>or it is a better way to do it?</p>\n"}, {"tags": ["c++", "c", "travis-ci"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520980892, "post_id": 49267005, "comment_id": 85537402, "body": "Can your C code be compiled in C++ mode?"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520980977, "post_id": 49267005, "comment_id": 85537430, "body": "@tadman - you mean can the <code>.c</code> files be compiled by invoking a C++ compiler like <code>g++</code> on them? No, they definitely use C-only features like VLAs and the designated initializer or whatever that thing is called."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520981056, "post_id": 49267005, "comment_id": 85537449, "body": "Is there any way to fix that so you can use one compiler to handle them all? Could you make the <code>.c</code> code a dependent project and test the C++ against a pre-compiled library?"}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1520981127, "post_id": 49267005, "comment_id": 85537470, "body": "@tadman - sure, but that would be a big project re-organization and add a lot of complexity to the CI setup. I&#39;m assuming there is some better solution, but if there isn&#39;t I guess I would just abandon my CI attempt for now."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1520981340, "post_id": 49267005, "comment_id": 85537547, "body": "A build server that only accepts a project with files written in <i>one</i> language? That sounds useless for anything but hobby programming. Yet, huge names are using it. I wonder how they got around this restriction - maybe by breaking their projects up a bit into, like, moduley type things."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1520985535, "post_id": 49267005, "comment_id": 85538918, "body": "@LightnessRacesinOrbit - yup, that could be good in many cases for large multi-language projects. In this case I&#39;m looking for a solution that doens&#39;t involve breaking up this project into modules. C and C++ are somewhat special here too since they can be naturally combined into the same binary at link time, and a single module could validly be composed of files from both languages (that&#39;s the case in my project)."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1521044030, "post_id": 49267005, "comment_id": 85568040, "body": "Since Travis CI just uses a <code>Makefile</code> can&#39;t you get that to do the work of compiling things properly? The <code>language</code> hint is usually a key as to what build method to use, where <code>c</code> and <code>cpp</code> are probably both based on the usual <code>.&#47;configure &amp;&amp; make &amp;&amp; make test</code> approach."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1521055862, "post_id": 49267005, "comment_id": 85575328, "body": "@tadman - yeah, I gradually came the conclusion that the <code>cpp</code> tag is still set up to handle C compilation in the same way as the <code>c</code> tag (the reverse is not true), so that&#39;s probably the tag to use here (added an answer)."}], "answers": [{"tags": [], "owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "is_accepted": false, "score": 1, "last_activity_date": 1521055819, "creation_date": 1521055819, "answer_id": 49286266, "question_id": 49267005, "link": "https://stackoverflow.com/questions/49267005/mixed-c-and-c-project-in-travisci/49286266#49286266", "title": "Mixed C and C++ project in TravisCI", "body": "<p>When mixing C and C++ code, you can in practice just use the <code>cpp</code> language key. This still installs the C compilers; indeed, the supported C and C++ compilers are gcc/g++ and clang[++] which share a common implementation.</p>\n\n<p>The <code>cpp</code> key still sets up the <code>CC</code> environment variable for C in addition to the <code>CXX</code> one for C++, and in <a href=\"https://docs.travis-ci.com/user/languages/cpp/\" rel=\"nofollow noreferrer\">all other respects</a> appears to offer a superset functionality compared to what the <code>c</code> key uses.</p>\n\n<p>The default <code>script</code> is <code>./configure &amp;&amp; make &amp;&amp; make test</code> for both languages, so even that is common.</p>\n"}], "owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1521055819, "creation_date": 1520980840, "question_id": 49267005, "link": "https://stackoverflow.com/questions/49267005/mixed-c-and-c-project-in-travisci", "title": "Mixed C and C++ project in TravisCI", "body": "<p>I have a project that uses a mix of C and C++ code, but currently you can only specify one <code>language</code> in the <code>.travis.yml</code> file.</p>\n\n<p>In this case, should I use <code>language: c</code> or <code>language: cpp</code> or something else?</p>\n"}, {"tags": ["c", "file", "scanf", "readfile"], "comments": [{"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 1, "creation_date": 1520979579, "post_id": 49266743, "comment_id": 85536935, "body": "The <code>id</code> argument should be <code>&amp;id</code>, because you have to pass a pointer to <code>int</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520979797, "post_id": 49266743, "comment_id": 85537011, "body": "@okydoky please don&#39;t correct the code posted after comments unless it wasn&#39;t the original code. This is not a dynamic &quot;correct-me&quot; site."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520980105, "post_id": 49266841, "comment_id": 85537121, "body": "Three values was hypothetical which OP knew how to do. The actual inputs have 3 or 4 fields."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520980551, "post_id": 49266841, "comment_id": 85537283, "body": "@WeatherVane right, one line of the example has 4 values, fixed my answer"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520980783, "post_id": 49266841, "comment_id": 85537363, "body": "err.. should you try 4 values first?"}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520980869, "post_id": 49266841, "comment_id": 85537391, "body": "@WeatherVane I guess I could, but does that make any difference in this case?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520980917, "post_id": 49266841, "comment_id": 85537409, "body": "Yes, because if 4 values are entered, reading 3 with <code>sscanf</code> will be successful, and the 4th will be missed. So test for 4 values first, if that fails test for 3 values. You got upvotes, but seem to miss the question."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520981152, "post_id": 49266841, "comment_id": 85537478, "body": "@WeatherVane oh yes, I didn&#39;t thought about the case <code>&quot;ABC DEF 1 2&quot;</code> where both <code>sscanf</code> would return 3 and 4. Thanks, I changed the order."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520981282, "post_id": 49266841, "comment_id": 85537528, "body": "My comments were not entirely correct, since an alpha string would have failed the <code>%d</code> format. But still better this way round."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520981453, "post_id": 49266841, "comment_id": 85537582, "body": "@WeatherVane that was what I was thinking at the beginning, if <code>sscanf</code> returns 4 then because there were 3 strings before the int, that&#39;s why I started with the 3 arguments call first. But I agree, doing the 4 argument first is better."}], "tags": [], "owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "is_accepted": true, "score": 3, "last_activity_date": 1520981072, "last_edit_date": 1520981072, "creation_date": 1520980004, "answer_id": 49266841, "question_id": 49266743, "link": "https://stackoverflow.com/questions/49266743/get-the-values-for-each-line-in-the-file-in-c/49266841#49266841", "title": "get the values for each line in the file in c", "body": "<p>If every line has 3 values separated by empty spaces (or tabs), then</p>\n\n<pre><code>fscanf(ptr_file,\"%s %s %d\",string1,string2,&amp;id);\n</code></pre>\n\n<p>is OK (and note that I used <code>&amp;id</code> instead of <code>id</code>), because <code>%s</code> matches a sequence of non-white-space characters, so it\ndoesn't matter how many empty spaces are between the values, <code>%s</code> will consume\nthe empty spaces:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    const char *v = \"STUDENT  \\t  ID   \\t  126345\";\n    int id; \n    char string1[100],string2[100];\n\n    sscanf(v, \"%s %s %d\", string1, string2, &amp;id);\n    printf(\"'%s' '%s' %d\\n\", string1, string2, id);\n    return 0;\n}\n</code></pre>\n\n<p>which prints</p>\n\n<pre><code>$ ./a \n'STUDENT' 'ID' 126345\n</code></pre>\n\n<p>In general the most robost solution would be to read line by line with <code>fgets</code>\nand parse the line with <code>sscanf</code> as you have more control over when a line has a\nwrong format:</p>\n\n<pre><code>char buffer[1024];\nwhile(fgets(buffer, sizeof buffer, stdin))\n{\n    int id; \n    char string1[100],string2[100];\n    if(sscanf(buffer, \"%99s %99s %d\", string1, string2, &amp;id) != 3)\n    {\n        fprintf(stderr, \"Line with wrong format\\n\");\n        break;\n    }\n\n    // do something with read values\n}\n</code></pre>\n\n<p><strong>edit</strong></p>\n\n<p>User <a href=\"https://stackoverflow.com/questions/49266743/get-the-values-for-each-line-in-the-file-in-c/49266841#comment85537121_49266841\">Weather Vane</a> points out that the line might have 3 or 4 values, then you\ncould do this:</p>\n\n<pre><code>char buffer[1024];\nwhile(fgets(buffer, sizeof buffer, stdin))\n{\n    int id; \n    char string1[100],string2[100],string3[100];\n    res = sscanf(buffer, \"%99s %99s %99s %d\", string1, string2, string3, &amp;id);\n\n    if(res != 4)\n    {\n        int res = sscanf(buffer, \"%99s %99s %d\", string1, string2, &amp;id);\n\n        if(res != 3)\n        {\n            fprintf(stderr, \"Line with wrong format, 3 or 4 values expected\\n\");\n            break;\n        }\n    }\n\n\n    if(res == 3)\n        printf(\"'%s' '%s' %d\\n\", string1, string2, id);\n    else\n        printf(\"'%s' '%s' '%s' %d\\n\", string1, string2, string3, id);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8823475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9837b7a622bb9e590a733a198e737650?s=128&d=identicon&r=PG&f=1", "display_name": "okydoky", "link": "https://stackoverflow.com/users/8823475/okydoky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 49266841, "answer_count": 1, "score": 0, "last_activity_date": 1520981072, "creation_date": 1520979508, "last_edit_date": 1520979863, "question_id": 49266743, "link": "https://stackoverflow.com/questions/49266743/get-the-values-for-each-line-in-the-file-in-c", "title": "get the values for each line in the file in c", "body": "<p>I need to read this main.txt file:</p>\n\n<pre><code>STUDENT ID 126345\nTEACHER MATH CLASS 122\n</code></pre>\n\n<p>And i need to get each values from this file . If this main.txt file was like this:</p>\n\n<pre><code>STUDENT ID 126345\nTEACHER ID 3654432\n</code></pre>\n\n<p>I could do it like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    FILE *ptr_file;\n\n    int id;\n    char string1[100],string2[100];\n    ptr_file = fopen(\"main.txt\",\"r\");\n\n    while(fscanf(ptr_file,\"%s %s %d\",string1,string2,id) != EOF){\n       }\n    }\n</code></pre>\n\n<p>But I can't use <code>fscanf()</code> function because space amount between these values is not equal for each line. How can i get every value in line by line like this code ?</p>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 1, "creation_date": 1520983412, "post_id": 49266679, "comment_id": 85538249, "body": "What makefile have you tried so far?  How did it not do what you wanted it to?  Have you examined any online tutorials or looked through the GNU make manual at <a href=\"https://www.gnu.org/software/make/manual/html_node/Introduction.html\" rel=\"nofollow noreferrer\">gnu.org/software/make/manual/html_node/Introduction.html</a>?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1520984308, "post_id": 49266679, "comment_id": 85538529, "body": "Your question is pretty broad. What, specifically, is preventing you from writing a makefile such as you&#39;re after?"}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 1, "creation_date": 1520988025, "post_id": 49266679, "comment_id": 85539543, "body": "pinam45&#39;s response should be everything you need.  Two other places to look: <a href=\"https://stackoverflow.com/questions/231229/how-to-generate-a-makefile-with-source-in-sub-directories-using-just-one-makefil\">How to generate a Makefile with source in sub-directories using just one makefile</a> and <a href=\"https://stackoverflow.com/questions/1484817/\">How do I make a simple makefile for gcc on Linux?</a>.  PS: Please &quot;accept&quot; and &quot;upvote&quot; pinam45&#39;s answer, if you like it."}], "answers": [{"tags": [], "owner": {"reputation": 409, "user_id": 7196687, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oBwG7vk5tiE/AAAAAAAAAAI/AAAAAAAAABI/gVlchBU5uQc/photo.jpg?sz=128", "display_name": "pinam45", "link": "https://stackoverflow.com/users/7196687/pinam45"}, "is_accepted": false, "score": 1, "last_activity_date": 1520987524, "creation_date": 1520987524, "answer_id": 49268023, "question_id": 49266679, "link": "https://stackoverflow.com/questions/49266679/makefile-based-on-sub-directories/49268023#49268023", "title": "Makefile based on sub-directories", "body": "<p>You can use this template I made for simple project. I don't know which compiler you are using but you can configure it with the variables in the first sections as well as other useful configs:</p>\n\n<pre><code>#=============================================================================\n# Project related variables\nEXENAME           = test\nFILEIDENTIFIER    = .c\nCOMPFLAGS         = -pedantic -Wall\nCOMPSTANDARD      = -std=c11\nEXELINKS          = -lm\nDBARGS            = -g\n\nBUILDDIR          = build/\nBINARY_OUTPUT_DIR = $(BUILDDIR)bin/\nOBJDIR            = obj/\nSOURCEDIRS        = src/\nINCLUDEDIRS       = include/\nLIBSDIRS          = /usr/lib/\n\n\n#=============================================================================\n# Commands variables\nCOMPILER          = gcc\nLINKER            = ld -r\n\nDISPLAY           = printf\nMKDIR             = mkdir -p\nRMDIR             = rmdir\nRM                = rm -f\n\n\n#=============================================================================\n# Other\nVOIDECHO          = &gt; /dev/null 2&gt;&amp;1\n\n\n#=============================================================================\n# Semi-automatic variables\nEXEFINALOBJ       = $(OBJDIR)$(EXENAME).o\nEXEFINAL          = $(BINARY_OUTPUT_DIR)$(EXENAME)\nINCLUDEARGS       = $(addprefix -I,$(INCLUDEDIRS))\n\n\n#=============================================================================\n# Automatic variables\nSOURCES           = $(foreach sourcedir,$(SOURCEDIRS),$(wildcard $(sourcedir)**/*$(FILEIDENTIFIER)) $(wildcard $(sourcedir)*$(FILEIDENTIFIER)))\nOBJECTS           = $(patsubst %$(FILEIDENTIFIER),%.o,$(foreach sourcedir,$(SOURCEDIRS),$(subst $(sourcedir),$(OBJDIR),$(wildcard $(sourcedir)**/*$(    FILEIDENTIFIER)) $(wildcard $(sourcedir)*$(FILEIDENTIFIER)))))\nGENERATED_FILES   = $(OBJECTS) $(EXEFINALOBJ) $(EXEFINAL)\nGENERATED_FOLDERS = $(OBJDIR) $(BINARY_OUTPUT_DIR) $(BUILDDIR)\n\n\n#=============================================================================\n# Special GNU make variables\nVPATH             = $(SOURCEDIRS)\n\n\n#=============================================================================\n# Rules: Phony Targets\n.PHONY: silent\nsilent:\n    @make --silent $(EXEFINAL)\n\n.PHONY: all\nall: $(EXEFINAL)\n\n.PHONY: debug\ndebug: COMPFLAGS += $(DBARGS)\ndebug: all\n\n.PHONY: clean\nclean:\n    @$(DISPLAY) \"\\n-&gt; Cleaning files...\\n\"\n    @$(DISPLAY) \" $(foreach file,$(GENERATED_FILES),$(if $(wildcard $(file)),- Removing file $(file)\\n,\\b))\"\n    @$(RM) $(GENERATED_FILES)\n    @$(DISPLAY) \"\\n-&gt; Cleaning folders...\\n\"\n    @$(DISPLAY) \" $(foreach folder,$(GENERATED_FOLDERS),$(if $(wildcard $(folder)),- Removing folder $(folder)\\n,\\b))\"\n    @$(RMDIR) $(GENERATED_FOLDERS) $(VOIDECHO) || true\n    @$(DISPLAY) \"\\n\"\n\n\n#=============================================================================\n# Rules: File Targets\n$(EXEFINAL): $(EXEFINALOBJ)\n    @$(DISPLAY) \"\\n - Building $@ from $^...   \"\n    @$(MKDIR) $(BINARY_OUTPUT_DIR)\n    $(COMPILER) $(EXEFINALOBJ) -o $@ $(LIBARGS) $(EXELINKS)\n    @$(DISPLAY) \"Done\"\n    @$(DISPLAY) \"\\n\\n\"\n\n$(EXEFINALOBJ): $(OBJECTS)\n    @$(DISPLAY) \"\\n - Merging objects files into $@...   \"\n    $(LINKER) $(OBJECTS) -o $@\n    @$(DISPLAY) \"Done\"\n\n$(OBJDIR)%.o: %$(FILEIDENTIFIER)\n    @$(DISPLAY) \"\\n - Building $@ from $^...   \"\n    @$(MKDIR) $(OBJDIR)\n    $(COMPILER) $(COMPFLAGS) $(COMPSTANDARD) $(INCLUDEARGS) -c $^ -o $@\n    @$(DISPLAY) \"Done\"\n</code></pre>\n\n<p>The actual configuration is for Linux and uses gcc and ld. It support subfolders for sources and 4 targets are defined:</p>\n\n<ul>\n<li>silent (default): silent build</li>\n<li>all: verbose build</li>\n<li>debug: debug build</li>\n<li>clean: remove files and folders generated by the makefile</li>\n</ul>\n\n<p>If you want to understand exactly how the Makefile work, as MadScientist wrote, look at the GNU make manual at <a href=\"https://www.gnu.org/software/make/manual/html_node/Introduction.html\" rel=\"nofollow noreferrer\">https://www.gnu.org/software/make/manual/html_node/Introduction.html</a></p>\n"}], "owner": {"reputation": 147, "user_id": 5647546, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1062202783812089/picture?type=large", "display_name": "Social Programmer", "link": "https://stackoverflow.com/users/5647546/social-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1520987524, "creation_date": 1520979211, "question_id": 49266679, "link": "https://stackoverflow.com/questions/49266679/makefile-based-on-sub-directories", "title": "Makefile based on sub-directories", "body": "<p>I have a C project program that I want to compile and manage with a makefile:</p>\n\n<p><strong>./include:</strong> where headers resides</p>\n\n<p>a.h , b.h , c.h</p>\n\n<p><strong>./obj:</strong> where object will be stored</p>\n\n<p>-</p>\n\n<p><strong>./src:</strong> where source file resides</p>\n\n<p>main.c , a.c , b.c , c.c</p>\n\n<p>How can I create a <em>makefile</em> to create an <em>executable</em> <strong>test</strong> , and put object files to obj folder ?</p>\n"}, {"tags": ["c", "malloc", "realloc"], "comments": [{"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1520977594, "post_id": 49266299, "comment_id": 85536077, "body": "<code>*A = realloc(A</code> is nonsense, from a run-time point of view, as well as type.  You&#39;re saying, reallocate <code>A</code>, obtaining a new pointer. Then store that pointer into the first element of the old <code>A</code> (which may or may not be the same as the new A). <code>*A</code> has type <code>int</code>, so you should see a diagnostic that the <code>void *</code> return type from <code>realloc</code> is being converted to <code>int</code> without a cast."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1520977818, "post_id": 49266299, "comment_id": 85536190, "body": "<code>A</code> is the variable which is a pointer type, <code>*A</code> is the value the pointer <code>A</code> is pointing to, in this case, the first element of the array. So chaging <code>*A</code> is actually changing the first element of this array, and not the pointer itself."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1520977937, "post_id": 49266299, "comment_id": 85536245, "body": "In the <code>malloc</code> it works because <code>*</code> there is not interpreted as a modifier to <code>A</code>, but instead, a modifier to the type, since you are declaring it in the same line."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1520979071, "post_id": 49266299, "comment_id": 85536731, "body": "...and sizeof(A) is the size of a pointer type, not the old size of the array."}], "answers": [{"comments": [{"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 3, "creation_date": 1520977788, "post_id": 49266318, "comment_id": 85536177, "body": "No. Should be <code>A = realloc(A, (n + 1) * sizeof(int))</code>. It&#39;s supposed to be adding an additional element to a dynamically allocated array."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 2, "last_activity_date": 1520978281, "last_edit_date": 1520978281, "creation_date": 1520977379, "answer_id": 49266318, "question_id": 49266299, "link": "https://stackoverflow.com/questions/49266299/realloc-not-copying-first-index/49266318#49266318", "title": "realloc not copying first index", "body": "<p>Write <code>A = realloc(A, (n + 1) * sizeof(int));</code> instead of <code>*A = realloc(A, sizeof(A)+ sizeof(int));</code></p>\n\n<p><code>*A = ...</code> will overwrite the value of the  first index with a \"address value\" if <code>A</code> is not moved to another place in memory (undefined behaviour otherwise).</p>\n\n<p>Note that <code>sizeof(A)</code> is a constant value (probably 8, and not the amount of memory allocated previously), such that you had a good chance that <code>realloc</code> did not move the  memory.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 8576503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c7ec0be87968b029134f21213215d0?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Kennedy", "link": "https://stackoverflow.com/users/8576503/nathan-kennedy"}, "edited": false, "score": 0, "creation_date": 1520991029, "post_id": 49266435, "comment_id": 85540230, "body": "Thank you! That was very helpful. Pointers and memory allocation for beginners is so intimidating and this helps a lot!"}], "tags": [], "owner": {"reputation": 91978, "user_id": 387076, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/cFyP6.jpg?s=128&g=1", "display_name": "Gilles &#39;SO- stop being evil&#39;", "link": "https://stackoverflow.com/users/387076/gilles-so-stop-being-evil"}, "is_accepted": true, "score": 5, "last_activity_date": 1520977957, "creation_date": 1520977957, "answer_id": 49266435, "question_id": 49266299, "link": "https://stackoverflow.com/questions/49266299/realloc-not-copying-first-index/49266435#49266435", "title": "realloc not copying first index", "body": "<pre><code>$ gcc a.c\na.c: In function \u2018main\u2019:\na.c:12:12: warning: assignment makes integer from pointer without a cast [-Wint-conversion]\n         *A = realloc(A, sizeof(A)+ sizeof(int));\n            ^\n</code></pre>\n\n<p>Make sure to configure your compiler to emit warnings on code that looks suspicious. Any remotely decent compiler would raise at least a warning, if not an error, on this line. <code>realloc</code> returns a pointer, which you're trying to assign to an <code>int</code> object.</p>\n\n<p>You need to assign the resulting pointer to <code>A</code>, not <code>*A</code>. Furthermore, there's another error, which compilers can't warn you about. <code>sizeof(A)+ sizeof(int)</code> is too small, and does not make much sense in context. Note that <code>sizeof(A)</code> is the size of the <em>pointer</em> <code>A</code>. There's no way to use <code>sizeof</code> to find the number of items in the array that <code>A</code> points to, because <code>sizeof</code> relies on compile-time information. To extend the array by one element, you need to add <code>sizeof(int)</code> to the current allocated size, which is <code>n*sizeof(int)</code>, i.e. the new size should be <code>(n+1) * sizeof(int)</code>.</p>\n\n<p>In addition, it would be better to use <code>sizeof(*A)</code> than <code>sizeof(int)</code>. The two are equivalent, but <code>sizeof(*A)</code> has the advantage that it'll still be correct if you decide to change the array elements, e.g. to make them <code>long</code>.</p>\n\n<pre><code>A = realloc(A, (n+1) * sizeof(*A));\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8576503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33c7ec0be87968b029134f21213215d0?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Kennedy", "link": "https://stackoverflow.com/users/8576503/nathan-kennedy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 49266435, "answer_count": 2, "score": 2, "last_activity_date": 1520978281, "creation_date": 1520977295, "question_id": 49266299, "link": "https://stackoverflow.com/questions/49266299/realloc-not-copying-first-index", "title": "realloc not copying first index", "body": "<p>I'm having some trouble with using the malloc/realloc command with arrays. I've created a small array with some integers in it, and tried to add one value to it by expanding the size with realloc and adding the value, but when I do that the 0 index's value is not preserved and is seen as garbage.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(){\n        int n;\n        printf(\"Enter size of array\\n\");\n        scanf(\"%d\",&amp;n);\n        int *A = malloc(n*sizeof(int));\n        for(int i = 0; i &lt; n; i++){\n                A[i] = i + 1;\n        }\n        *A = realloc(A, sizeof(A)+ sizeof(int));\n        A[n] = 1234;\n        for(int i = 0; i &lt; n + 1; i++){\n                printf(\"%d\\n\",A[i]);\n        }\n\n\n        return 0;\n}\n</code></pre>\n\n<p>and when i run the program this happens: </p>\n\n<pre><code>Enter size of array\n5\n14643216\n2\n3\n4\n5\n1234\n</code></pre>\n\n<p>Does anyone know why the 0 index of the array is getting this value and not 1?</p>\n"}, {"tags": ["c++", "c", "linux", "shared-memory", "mmap"], "comments": [{"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 0, "creation_date": 1520977235, "post_id": 49266193, "comment_id": 85535941, "body": "I believe the target process should update its own memory mapping on demand (when it wants to access something outside its bounds), but it does have to keep track of how much is the current mapping. But this option will break down if the array may shrink. If not though, this is lockfree."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1520984913, "post_id": 49266193, "comment_id": 85538700, "body": "Inasmuch as this question focuses on <code>mremap()</code>, which is Linux-specific, [linux] is a more applicable tag than [posix] (retagged)."}, {"owner": {"reputation": 2610, "user_id": 1883304, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/xYoZ7.png?s=128&g=1", "display_name": "Micrified", "link": "https://stackoverflow.com/users/1883304/micrified"}, "edited": false, "score": 0, "creation_date": 1525976283, "post_id": 49266193, "comment_id": 87574879, "body": "Has any progress been made with respect to this problem?"}], "answers": [{"comments": [{"owner": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "edited": false, "score": 0, "creation_date": 1542837717, "post_id": 53420491, "comment_id": 93716516, "body": "I would clarify that using <code>mremap()</code> might change the base virtual address of the mapping inside the process, invalidating pointers that the process itself might have stored somewhere. In fact, even if we try to use <code>munmap()</code>+<code>mmap()</code> with <code>MAP_FIXED</code> and the original base address, the call might fail and <code>errno</code> will be set to <code>EINVAL</code>. See the man page of <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow noreferrer\">mmap</a> for additional information."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "edited": false, "score": 1, "creation_date": 1542839090, "post_id": 53420491, "comment_id": 93716976, "body": "Thanks, @SRG, I have added a section discussing those issues under the heading &quot;About the mapping&#39;s base address&quot;."}, {"owner": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "edited": false, "score": 0, "creation_date": 1542839175, "post_id": 53420491, "comment_id": 93717005, "body": "Perfect @JohnBollinger, this is excellent. I have tried to give you the +50 bounty but apparently I can&#39;t until tomorrow, haha :). But I will do it, this answer is superb, thank you very much."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 5, "last_activity_date": 1542839604, "last_edit_date": 1542839604, "creation_date": 1542834452, "answer_id": 53420491, "question_id": 49266193, "link": "https://stackoverflow.com/questions/49266193/posix-shared-memory-resize-with-mremap-when-several-processes-are-using-the-segm/53420491#53420491", "title": "Posix shared memory resize with mremap when several processes are using the segment", "body": "<blockquote>\n  <p>Shall Process 2 be notified of the resize and call <code>mremap()</code> to update it\u2019s own virtual address too ?</p>\n</blockquote>\n\n<p>Process 2 has mapped a specific region of the shared memory segment.  Another process <em>increasing</em> the size of the segment does not invalidate that mapping.  Nor does that change the region of the shared memory segment that is mapped in Process 2 -- even if process 2 originally mapped the whole segment, the part beyond the original end of the segment is not automatically mapped in process 2.</p>\n\n<p>Therefore, as long as process 2 does not require access to additional pages of the segment, it has no need to update its mapping at all.  If it wants to access that additional shared memory, however, then  it does need to update its mapping.  It can attempt to do that via Linux-specific <code>mremap()</code>, or by <code>munmap()</code> followed by <code>mmap()</code>.  The latter requires that it still have an open file descriptor for the segment.  Either way, it might not be possible to map a larger space starting at the same base address.  For that matter, it might not be possible to map a larger space at all, regardless of whether any other process was able to do so.</p>\n\n<p><strong>About the mapping's base address</strong></p>\n\n<p>By default, <code>mremap()</code> will attempt to modify the mapped region without changing its base address, and <code>munmap()</code> + <code>mmap()</code> can be asked to do the same by requesting the original base address from <code>mmap()</code> and passing the <code>MAP_FIXED</code> flag.  These will fail if the mapping cannot be expanded at that address.  In the latter case, that will also leave the segment altogether unmapped.</p>\n\n<p>You can allow for a new base address to be chosen by specifying the <code>MREMAP_MAYMOVE</code> among the <code>mremap()</code> flags, or by <em>avoiding</em> specifying <code>MAP_FIXED</code> to <code>mmap()</code>.  Such attempts may succeed when expanding the mapping at the same address fails, but <strong><em>note well</em></strong> that a change of base address invalidates all that process's pointers into the original mapping, wherever stored.</p>\n\n<p>Therefore, if you're going to provide for a change of base address, then you're probably best off not storing any pointers into the mapping at all, except for a single one to the base address.  In that case, access the contents via that pointer or otherwise relative to it.</p>\n\n<blockquote>\n  <p>If Process 2 has to be notified I\u2019m thinking of opening a second\n  shared memory segment with some metadata e.g the table\u2019s capacity and\n  a mutex. Each process stores the table\u2019s capacity initially from\n  shared memory and on each operation checks the local value against the\n  shared memory metadata value. If the value has changed it will call\n  <code>mremap()</code></p>\n  \n  <p>Is this a proper way to do this if <code>mremap()</code> has to be called on each\n  process after resizing?</p>\n</blockquote>\n\n<p>Provided that you properly synchronize access to the metadata, your scheme sounds feasible.  In fact, although there may be other reasons to do so, nothing presented in the question suggests that it should even be necessary to put the metadata in a separate shared memory segment.  The expansion should not affect the content of the original pages of the segment or their mapping in process 2, so if the metadata are stored there then process 2 should still be able to access them after the expansion.</p>\n\n<p>Note, however, that if the mutex, semaphore, or similar used to synchronize access to the segment is inside that segment, then you need to account for the fact that <code>mremap()</code> may move it, and <code>munmap()</code> / <code>mmap()</code> will leave you in need of a more complicated recovery scheme for the case that the <code>munmap()</code> succeeds but the subsequent <code>mmap()</code> fails.</p>\n\n<hr>\n\n<p>In understanding all this, it may be useful to keep in mind that</p>\n\n<ul>\n<li><p>the size of the shared memory segment is a property of the segment, maintained by the kernel.</p></li>\n<li><p>the characteristics of each mapping of the segment, including the region mapped (a specific range of pages) and the base address to which it is mapped, are properties of a specific process, independent of all other mappings of the segment in the same or other processes.</p></li>\n<li><p>the characteristics of each mapping of the segment are also largely independent of the segment itself.  In particular, the the offset and size of the mapped region does not change in response to changes to the size of the segment.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 494, "user_id": 2430526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rELuN.jpg?s=128&g=1", "display_name": "SRG", "link": "https://stackoverflow.com/users/2430526/srg"}, "is_accepted": false, "score": 3, "last_activity_date": 1542839582, "last_edit_date": 1542839582, "creation_date": 1542839031, "answer_id": 53421283, "question_id": 49266193, "link": "https://stackoverflow.com/questions/49266193/posix-shared-memory-resize-with-mremap-when-several-processes-are-using-the-segm/53421283#53421283", "title": "Posix shared memory resize with mremap when several processes are using the segment", "body": "<blockquote>\n  <p>If Process 2 has to be notified I\u2019m thinking of opening a second shared memory segment with some metadata e.g the table\u2019s capacity and a mutex. Each process stores the table\u2019s capacity initially from shared memory and on each operation checks the local value against the shared memory metadata value. If the value has changed it will call <code>mremap()</code></p>\n</blockquote>\n\n<p>Adding to John Bollinger's great answer, I would point out that there is a way not to have a shared memory segment with metadata. For instance, if you have the file descriptor that <code>shm_open()</code> provided you, an alternative solution is to force your other processes to check the size of the segment with <a href=\"http://man7.org/linux/man-pages/man2/fstat.2.html\" rel=\"nofollow noreferrer\"><code>fstat</code></a>:</p>\n\n<pre><code>...\n\nstruct stat statbuf = { 0 };\nint fd = shm_open(...);\n\n...\n\n// Check whether the shared segment has changed\nfstat(fd, &amp;statbuf);\n\nif (statbuf.st_size != current_size) // current_size is stored somewhere\n{\n    // Remap the shared memory segment using statbuf.st_size here\n}\n\n\u00b7\u00b7\u00b7\n</code></pre>\n\n<p>You must consider the shared memory segment as a file somewhere in the system. For reference purposes, the <a href=\"http://man7.org/linux/man-pages/man7/shm_overview.7.html\" rel=\"nofollow noreferrer\">shm_overview</a> page suggests the use of <code>fstat()</code> for this purpose.</p>\n"}], "owner": {"reputation": 100, "user_id": 5179631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/721dda3ea53e0ff2ce6b8164845bd068?s=128&d=identicon&r=PG&f=1", "display_name": "Ody", "link": "https://stackoverflow.com/users/5179631/ody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 814, "favorite_count": 2, "accepted_answer_id": 53420491, "answer_count": 2, "score": 4, "last_activity_date": 1542839604, "creation_date": 1520976805, "last_edit_date": 1520985165, "question_id": 49266193, "link": "https://stackoverflow.com/questions/49266193/posix-shared-memory-resize-with-mremap-when-several-processes-are-using-the-segm", "title": "Posix shared memory resize with mremap when several processes are using the segment", "body": "<p>I\u2019m storing some data in a shared memory array used by several processes. At some point I want to grow the array. </p>\n\n<p>Assume there\u2019s already a synchronisation mechanism between the processes</p>\n\n<p>Initially Process 1 will create the segment and process 2 will open it.</p>\n\n<p>Process 1\n<br/>\n<code>shm_open() O_CREAT</code>\n<br/>\n<code>ftruncate()</code>\n<br/>\n<code>mmap() MAP_SHARED</code></p>\n\n<p>Process 2\n<br/>\n<code>shm_open()</code>\n<br/>\n<code>mmap()</code></p>\n\n<p>At some point one process wants to grow the array and resize the shared segment.</p>\n\n<p>Process 1 calls\n<br/>\n<code>ftruncate()</code>\n<br/>\n<code>mremap() MREMAP_MAYMOVE</code></p>\n\n<p>Shall Process 2 be notified of the resize and call <code>mremap()</code> to update it\u2019s own virtual address too ?</p>\n\n<p>If Process 2 has to be notified I\u2019m thinking of opening a second shared memory segment with some metadata e.g the table\u2019s capacity and a mutex. \nEach process stores the table\u2019s capacity initially from shared memory and on each operation checks the local value against the shared memory metadata value. If the value has changed it will call <code>mremap()</code> </p>\n\n<p>Is this a proper way to do this if <code>mremap()</code> has to be called on each process after resizing?</p>\n"}, {"tags": ["c", "select", "server", "shutdown", "file-descriptor"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6056613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/33945686db99e6734a2d9368a12217a3?s=128&d=identicon&r=PG&f=1", "display_name": "Nymeria", "link": "https://stackoverflow.com/users/6056613/nymeria"}, "edited": false, "score": 0, "creation_date": 1520977614, "post_id": 49266314, "comment_id": 85536086, "body": "So I should do something like this? for (fd=0;fd&lt;fdmax;fd++){      if (FD_ISSET(fd, mrset))           close(fd); }"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 6056613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/33945686db99e6734a2d9368a12217a3?s=128&d=identicon&r=PG&f=1", "display_name": "Nymeria", "link": "https://stackoverflow.com/users/6056613/nymeria"}, "edited": false, "score": 0, "creation_date": 1520977726, "post_id": 49266314, "comment_id": 85536141, "body": "Not sure what <code>FD_ISSET</code> has to do with it. If the server is exiting it should close all FDs, not just the ones in <code>mrset</code>. But this happens automatically when a process terminates."}, {"owner": {"reputation": 23, "user_id": 6056613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/33945686db99e6734a2d9368a12217a3?s=128&d=identicon&r=PG&f=1", "display_name": "Nymeria", "link": "https://stackoverflow.com/users/6056613/nymeria"}, "edited": false, "score": 0, "creation_date": 1520978204, "post_id": 49266314, "comment_id": 85536373, "body": "FD_ISSET tests if the correspondent fd is in the set and so if there is still a connection engaged with some client that need to be closed. Maybe I&#39;m just complicating the situation."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 6056613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/33945686db99e6734a2d9368a12217a3?s=128&d=identicon&r=PG&f=1", "display_name": "Nymeria", "link": "https://stackoverflow.com/users/6056613/nymeria"}, "edited": false, "score": 2, "creation_date": 1520978406, "post_id": 49266314, "comment_id": 85536474, "body": "You should be closing each connection after you&#39;re done with it, so when the server ends there shouldn&#39;t be any open connections, except the listening one. If it&#39;s ending unexpectedly, it can just exit and depend on the automatic closes."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1520977347, "creation_date": 1520977347, "answer_id": 49266314, "question_id": 49266189, "link": "https://stackoverflow.com/questions/49266189/should-i-call-shutdown-on-fds-before-exit-from-server/49266314#49266314", "title": "Should I call shutdown() on fds before exit from server?", "body": "<p>It's not necessary to call <code>shutdown()</code> before <code>close()</code>. When you close a socket, it's automatically shut down in both directions. </p>\n\n<p>You generally only need to use <code>shutdown()</code> if you need to keep the socket open for some reason. This might be done in a protocol where the end of the request is indicated by EOF; you call <code>shutdown(fd, SHUT_WR)</code> to send EOF, then read the response.</p>\n"}], "owner": {"reputation": 23, "user_id": 6056613, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/33945686db99e6734a2d9368a12217a3?s=128&d=identicon&r=PG&f=1", "display_name": "Nymeria", "link": "https://stackoverflow.com/users/6056613/nymeria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 49266314, "answer_count": 1, "score": 0, "last_activity_date": 1520977347, "creation_date": 1520976798, "last_edit_date": 1520977167, "question_id": 49266189, "link": "https://stackoverflow.com/questions/49266189/should-i-call-shutdown-on-fds-before-exit-from-server", "title": "Should I call shutdown() on fds before exit from server?", "body": "<p>When the server receives a termination signal it exits from the loop where the select() is monitoring the fds in the set (fd_set).</p>\n\n<p>It is necessary look through fds and call shutdown(fd, SHUT_RDWR) if there are any of them still in the set? Or should I call close(fd)?</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 4, "creation_date": 1520976473, "post_id": 49266066, "comment_id": 85535635, "body": "You can\u2019t cast a pointer to a <code>uint8_t</code>. Maybe you meant to use a <code>uint8_t *</code> ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520976628, "post_id": 49266066, "comment_id": 85535692, "body": "First observation is that you need <code>#include &lt;stdio.h&gt;</code> and unless you have a local version of <code>stdint</code> you need <code>#include &lt;stdint.h&gt;</code> instead of <code>#include &quot;stdint.h&quot;</code>."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 2, "creation_date": 1520976705, "post_id": 49266066, "comment_id": 85535733, "body": "Stop using casts as a quick fix to get the compiler to stop complaining.  Only do it when necessary <b>and</b> you can explain why it&#39;s necessary."}, {"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520976812, "post_id": 49266066, "comment_id": 85535778, "body": "@WeatherVane For some reason my compiler doesn&#39;t complain about the includes. But I did get: warning: cast from pointer to integer of different size [-Wpointer-to-int-cast]"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 0, "creation_date": 1520977535, "post_id": 49266066, "comment_id": 85536058, "body": "@PaulStelian the compiler <i>should</i> complain about the lack of <code>stdio.h</code> and in the case of <code>#include &quot;stdint.h&quot;</code> it is not an error, but unnecessary to look for a <code>stdint.h</code> locally before looking in the library headers folder."}, {"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1521057241, "post_id": 49266066, "comment_id": 85576098, "body": "@WeatherVane I think mine would only complain if I actually enabled all warnings with -Wall (or that stdio.h is somehow directly included by malloc.h?)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1521057610, "post_id": 49266066, "comment_id": 85576307, "body": "If library headers include other headers, there will be a header guard or a pragma to prevent multiple definitions. Make no assumptions about library dependencies and include the headers for the functions you use. And do enable all warnings."}], "answers": [{"tags": [], "owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "is_accepted": false, "score": 0, "last_activity_date": 1520976830, "creation_date": 1520976830, "answer_id": 49266203, "question_id": 49266066, "link": "https://stackoverflow.com/questions/49266066/sigsegv-segmentation-fault-when-passing-a-structure-to-callback-in-c/49266203#49266203", "title": "SIGSEGV (Segmentation fault) when passing a structure to callback in C", "body": "<p>I have run it in Valgrind and I have identified a blatant error (which manifests in several places):</p>\n\n<p><code>resume_configuration</code> does not obey the <code>WifiCallback</code> pointer type; it takes a parameter of pointer type, not of <code>uint8_t</code> type which most likely has a different size (and it indeed has)</p>\n\n<p>You call <code>TestSetupCb((uint8_t) scan_result);</code> -- you explicitly convert the <code>scan_result</code> pointer to a datatype smaller than a pointer. You have truncated a pointer, so now the result cannot be converted back into a valid pointer. The truncation on Intel systems is so bad, any resulting pointer will always be in the NULL page.</p>\n"}, {"comments": [{"owner": {"reputation": 1283, "user_id": 3897333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d784367ca82572dea0a2c43217770b?s=128&d=identicon&r=PG", "display_name": "Paul Stelian", "link": "https://stackoverflow.com/users/3897333/paul-stelian"}, "edited": false, "score": 0, "creation_date": 1520976976, "post_id": 49266215, "comment_id": 85535836, "body": "On my system in particular the cast of the function pointer works because the function still has one parameter which is passed identically (as a 4-byte value on the stack on Intel 32-bit or as the rsi [I think?] register on Intel 64-bit)"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1520976859, "creation_date": 1520976859, "answer_id": 49266215, "question_id": 49266066, "link": "https://stackoverflow.com/questions/49266066/sigsegv-segmentation-fault-when-passing-a-structure-to-callback-in-c/49266215#49266215", "title": "SIGSEGV (Segmentation fault) when passing a structure to callback in C", "body": "<p>Casting a function name to a function pointer type with incompatible parameter types is <em>undefined behavior</em>:</p>\n\n<pre><code>scan_for_test_setup((WifiCallback)resume_configuration);\n//                  ^^^^^^^^^^^^^^\n//               Undefined behavior\n</code></pre>\n\n<p>This by itself is enough to get a crash. However, your program does another thing illegally - the call below</p>\n\n<pre><code>TestSetupCb((uint8_t) scan_result);\n//                    ^^^^^^^^^^^\n//               Does not fit in uint8_t\n</code></pre>\n\n<p>would fail regardless of the function pointer cast, because a pointer does not fit in 8 bits.</p>\n"}, {"tags": [], "owner": {"reputation": 48, "user_id": 7974616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e31c1724e1dfcad9d0e05be08500d927?s=128&d=identicon&r=PG&f=1", "display_name": "Gena", "link": "https://stackoverflow.com/users/7974616/gena"}, "is_accepted": false, "score": 1, "last_activity_date": 1521049344, "last_edit_date": 1521049344, "creation_date": 1521047618, "answer_id": 49283905, "question_id": 49266066, "link": "https://stackoverflow.com/questions/49266066/sigsegv-segmentation-fault-when-passing-a-structure-to-callback-in-c/49283905#49283905", "title": "SIGSEGV (Segmentation fault) when passing a structure to callback in C", "body": "<p>The variable \u201cscan_result\u201d is pointer to struct with allocated memory space in heap region.\nWhen the TestSetupCb() is called with argument \u201c(uint8_t) scan_result\u201d you actually casting address of \u201cscan_result\u201d to be uint8_t, which means to take a first byte of the address and pass it by value. In that case you lose data that you want process in resume_configuration() function.\nFor example: let\u2019s say the \u201cscan_result\u201d struct it at address \u201c0x004EE388\u201d when you casting this address to uint8_t the result is \u201c0x00000088\u201d this address is invalid and creates issue in your program. Also, this kind of operation creates dangerous to your program.\nTo solve your problem just re-define function pointer in the following way:\ntypedef void(*WifiCallback)( test_setup_scan_result *);\nand update your code: instead of TestSetupCb((uint8_t)scan_result); change to TestSetupCb(scan_result);</p>\n"}], "owner": {"reputation": 323, "user_id": 6588539, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a9c19fdfe503bfdef849d5b0c9ac9843?s=128&d=identicon&r=PG&f=1", "display_name": "fdistorted", "link": "https://stackoverflow.com/users/6588539/fdistorted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1521049344, "creation_date": 1520976144, "question_id": 49266066, "link": "https://stackoverflow.com/questions/49266066/sigsegv-segmentation-fault-when-passing-a-structure-to-callback-in-c", "title": "SIGSEGV (Segmentation fault) when passing a structure to callback in C", "body": "<p>I got some strange behavior of my code.\nI can`t pass a structure to the callback function.</p>\n\n<pre><code>#include &lt;malloc.h&gt;\n#include \"stdint.h\"\n\ntypedef struct {\n    int test_rssi;\n    int setup_rssi;\n} test_setup_scan_result;\n\ntypedef void (*WifiCallback)(uint8_t);\n\nWifiCallback TestSetupCb;\n\nvoid resume_configuration(test_setup_scan_result *result) {\n    if (result == NULL) {\n        printf(\"result is NULL\\n\");\n        return;\n    }\n\n    printf(\"result is not NULL\\n\");\n    printf(\"setup_rssi %d\\n\", result-&gt;setup_rssi);\n    printf(\"test_rssi %d\\n\", result-&gt;test_rssi);\n    printf(\"done\");\n}\n\nvoid scan_test_setup_done_cb() {\n    printf(\"scan_done\\n\");\n    test_setup_scan_result *scan_result = malloc(sizeof(test_setup_scan_result));\n    printf(\"created structure\\n\");\n    scan_result-&gt;test_rssi = 1;\n    scan_result-&gt;setup_rssi = 1;\n    printf(\"filled structure\\n\");\n    if (TestSetupCb) {\n        printf(\"executing cb\\n\");\n        printf(\"setup_rssi %d\\n\", scan_result-&gt;setup_rssi);\n        printf(\"test_rssi %d\\n\", scan_result-&gt;test_rssi);\n        TestSetupCb((uint8_t) scan_result);\n    }\n}\n\nvoid scan_for_test_setup(WifiCallback cb) {\n    TestSetupCb = cb;\n    scan_test_setup_done_cb();\n}\n\nint main(void) {\n    printf(\"Hello World\\n\");\n    scan_for_test_setup((WifiCallback)resume_configuration);\n    return 0;\n}\n</code></pre>\n\n<p>The code after I am trying to get values of the structure in <code>resume_configuration</code> function just not works. I am the newbie in c language so any links to useful articles are regarded.</p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1520973968, "post_id": 49265552, "comment_id": 85534545, "body": "wrap a while around your for loop"}, {"owner": {"reputation": 1143, "user_id": 8759952, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d8e784fa5cd3e5a2dfe13b405fc1de1?s=128&d=identicon&r=PG&f=1", "display_name": "Liora Haydont", "link": "https://stackoverflow.com/users/8759952/liora-haydont"}, "edited": false, "score": 1, "creation_date": 1520973991, "post_id": 49265552, "comment_id": 85534557, "body": "What is wrong with your code?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8620802"}, "reply_to_user": {"reputation": 1143, "user_id": 8759952, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d8e784fa5cd3e5a2dfe13b405fc1de1?s=128&d=identicon&r=PG&f=1", "display_name": "Liora Haydont", "link": "https://stackoverflow.com/users/8759952/liora-haydont"}, "edited": false, "score": 0, "creation_date": 1520974132, "post_id": 49265552, "comment_id": 85534633, "body": "@LioraHaydont There&#39;s nothing wrong with the code (as far as I know, this is just a rough rewrite of it), the problem is that it&#39;s not finished, as I commented in where the unfinished code would go. I&#39;m not sure how to do this otherwise."}, {"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 3, "creation_date": 1520974145, "post_id": 49265552, "comment_id": 85534640, "body": "you can get the effect of n-deep for loops with recursion"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520974698, "post_id": 49265552, "comment_id": 85534891, "body": "Just have a running number and convert it to base-96 (or whatever alphabet size you have). No need in recursion or nested loops."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1520975116, "post_id": 49265552, "comment_id": 85535079, "body": "You do realize that even passwords of only 10 characters, this program will run for <i>centuries</i>?."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520976265, "post_id": 49265552, "comment_id": 85535541, "body": "... and if the password checker is worth its salt, it won&#39;t accept a password more frequently than ... once per second?"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1520979197, "post_id": 49265552, "comment_id": 85536767, "body": "My &quot;centuries&quot; estimate is based on a billion per second, but you&#39;re right, any real password system would be using PBKDF2 or something that takes time."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8620802"}, "edited": false, "score": 0, "creation_date": 1520974495, "post_id": 49265629, "comment_id": 85534804, "body": "This should work, so I&#39;ll try it and report back with a best answer when I&#39;m done. Thanks!"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1520974612, "post_id": 49265629, "comment_id": 85534857, "body": "Are you aware of the concept of accepting answers? <a href=\"https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead\" title=\"why do i need 50 reputation to comment what can i do instead\">meta.stackexchange.com/questions/214173/&hellip;</a>"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 1, "creation_date": 1520974738, "post_id": 49265629, "comment_id": 85534912, "body": "I think you may accept the answer; Recursion is the solution for nested loops where the depth of nesting isn&#39;t known in advance."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1520975089, "post_id": 49265629, "comment_id": 85535066, "body": "I did not want to rush you. You are entitled, even expected, to wait until you are convinced that you have the best answer. That avoids disappointing answerers who get the acceptance first and later loose it. On the other hand, thanks. ;-)"}, {"owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "edited": false, "score": 0, "creation_date": 1520975762, "post_id": 49265629, "comment_id": 85535329, "body": "Recursion should be considered very carefully. It&#39;s very easy to overflow the stack."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "edited": false, "score": 0, "creation_date": 1520976410, "post_id": 49265629, "comment_id": 85535614, "body": "@SomeWittyUsername I agree. But this kind, with a static, predetermined, directly selected depth, is probably the most harmless imaginable kind. ;-)"}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": true, "score": 11, "last_activity_date": 1520974499, "last_edit_date": 1520974499, "creation_date": 1520974183, "answer_id": 49265629, "question_id": 49265552, "link": "https://stackoverflow.com/questions/49265552/nesting-for-loop-n-times/49265629#49265629", "title": "Nesting &quot;for&quot; Loop n Times", "body": "<p>You do not need to repeat the for loop. Instead you need to nest it.<br>\nThe most inviting solution to implement this is a recursive construct.</p>\n\n<p>Pseudo code:</p>\n\n<pre><code>void nestloop(int depth, int width)\n{\n    if(depth&gt;0)\n    {\n        int i;\n        for (i=0; i&lt;width; i++)\n        {\n            nestloop(depth-1, width);\n        }\n    } else\n    {\n        /* do whatever you need done inside the innermost loop */\n    }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8620802"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1277, "favorite_count": 0, "accepted_answer_id": 49265629, "answer_count": 1, "score": 4, "last_activity_date": 1524928712, "creation_date": 1520973857, "last_edit_date": 1520975432, "question_id": 49265552, "link": "https://stackoverflow.com/questions/49265552/nesting-for-loop-n-times", "title": "Nesting &quot;for&quot; Loop n Times", "body": "<p>I'm writing a program that finds passwords. I ran into a problem when I saw that the \"for\" loops to replace parts of the password would have to be repeated for the variable of the chosen password length. The goal of this program is to generate and check a password of any character array, starting with \"0\" and going through \"? (n times)\", where '0' is the first character and '?' is the last character.</p>\n\n<p><strong>Is there any way to repeat a for loop a variable number of times <em>without</em> coding them in individually?</strong></p>\n\n<p>Note, based on well-received comments:<br>\nThe \"repeat a for loop\" is probably more correctly expressed as \"nest several for loops\".</p>\n\n<pre><code>int maxLength = 32; //Length of the password, changes via input\nchar output[maxLength] = \"\";\nfor (int currentLength = 1; currentLength &lt; maxLength + 1; currentLength++) {\n    for (int characterNumber = 0; characterNumber &lt; 96 /*characters found with switch/case, 95 total*/; characterNumber++) {\n        for (int position = currentLength /*position in string*/; position &gt; 0; position--) {\n            //For loops of character and position currentLength times\n            char newCharacter = '\\0'; //Avoiding not initialized error, could be and character\n            output[position - 1] = getChar(characterNumber, newCharacter);\n        }\n    }\n}\n</code></pre>\n\n<p>Example of an output would be:\n...01, 02, 03..., 10, 11..., a0, a1..., ????4afuh7yfzdn_)aj901...</p>\n"}, {"tags": ["c", "memory", "malloc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1520973729, "post_id": 49265505, "comment_id": 85534410, "body": "Undefined behavior is undefined."}, {"owner": {"reputation": 400, "user_id": 3657691, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/izLQX.png?s=128&g=1", "display_name": "geohei", "link": "https://stackoverflow.com/users/3657691/geohei"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520973839, "post_id": 49265505, "comment_id": 85534466, "body": "So, in other words ... it is pure coincidence that it worked till 25 (included)?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1520973874, "post_id": 49265505, "comment_id": 85534485, "body": "Well... it is usually considered to be a lack of luck :)"}, {"owner": {"reputation": 400, "user_id": 3657691, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/izLQX.png?s=128&g=1", "display_name": "geohei", "link": "https://stackoverflow.com/users/3657691/geohei"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520973929, "post_id": 49265505, "comment_id": 85534523, "body": "I rephrased it to coincidence."}, {"owner": {"reputation": 400, "user_id": 3657691, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/izLQX.png?s=128&g=1", "display_name": "geohei", "link": "https://stackoverflow.com/users/3657691/geohei"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520974291, "post_id": 49265505, "comment_id": 85534705, "body": "But basically, malloc(29) with subsequent snprintf(...29...) is correct? Confirm."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1520975188, "post_id": 49265505, "comment_id": 85535112, "body": "If wrong code failed every time, that would be far too convenient."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1520975858, "post_id": 49265505, "comment_id": 85535368, "body": "Good luck is when the program containing UB fails the first time it is run. Bad luck is when the first failure is when you are presenting the project."}, {"owner": {"reputation": 400, "user_id": 3657691, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/izLQX.png?s=128&g=1", "display_name": "geohei", "link": "https://stackoverflow.com/users/3657691/geohei"}, "edited": false, "score": 0, "creation_date": 1521010402, "post_id": 49265505, "comment_id": 85545670, "body": "Fine. Got the message. Many thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 400, "user_id": 3657691, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/izLQX.png?s=128&g=1", "display_name": "geohei", "link": "https://stackoverflow.com/users/3657691/geohei"}, "edited": false, "score": 0, "creation_date": 1520974123, "post_id": 49265530, "comment_id": 85534627, "body": "Gonna have a look at it. Thanks!"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 3, "last_activity_date": 1520974115, "last_edit_date": 1520974115, "creation_date": 1520973786, "answer_id": 49265530, "question_id": 49265505, "link": "https://stackoverflow.com/questions/49265505/out-of-bounds-writing-does-not-always-cause-an-error/49265530#49265530", "title": "Out-of-bounds writing does not always cause an error", "body": "<p>It is <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><strong>undefined behavior</strong></a>. Be <a href=\"https://stackoverflow.com/a/25636788/841108\">scared</a> of UB. <code>malloc</code> is just a standard library routine (which ask memory -in multiple of <a href=\"https://en.wikipedia.org/wiki/Page_(computer_memory)\" rel=\"nofollow noreferrer\">pages</a>- to the kernel using some <a href=\"https://en.wikipedia.org/wiki/System_call\" rel=\"nofollow noreferrer\">system call</a> like <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow noreferrer\">mmap(2)</a>). If you \"overflow\" the memory zone you have probably corrupted your heap memory.</p>\n\n<p>But consider using tools like <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a> (and <a href=\"https://en.wikipedia.org/wiki/AddressSanitizer\" rel=\"nofollow noreferrer\">address sanitizers</a> - e.g. <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Instrumentation-Options.html\" rel=\"nofollow noreferrer\">with GCC</a>).</p>\n"}, {"comments": [{"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 1, "creation_date": 1520975338, "post_id": 49265625, "comment_id": 85535170, "body": "In the unlikely situation that it calls the police, what do you think it will tell them? :)"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 1, "creation_date": 1520975607, "post_id": 49265625, "comment_id": 85535275, "body": "@machine_1: about an action of trespass probably :-)"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 4, "last_activity_date": 1520974164, "creation_date": 1520974164, "answer_id": 49265625, "question_id": 49265505, "link": "https://stackoverflow.com/questions/49265505/out-of-bounds-writing-does-not-always-cause-an-error/49265625#49265625", "title": "Out-of-bounds writing does not always cause an error", "body": "<p>It's undefined behaviour, which is defined in this <a href=\"http://port70.net/~nsz/c/c11/n1570.html#3.4.3\" rel=\"nofollow noreferrer\">online c standard draft</a> as follows:</p>\n\n<blockquote>\n  <p><strong>3.4.3</strong></p>\n  \n  <p><strong>1 undefined behavior</strong> behavior, upon use of a nonportable or erroneous\n  program construct or of erroneous data, for which this International\n  Standard imposes no requirements</p>\n  \n  <p>2 NOTE Possible undefined behavior ranges from ignoring the situation\n  completely with unpredictable results, to behaving during translation\n  or program execution in a documented manner characteristic of the\n  environment (with or without the issuance of a diagnostic message), to\n  terminating a translation or execution (with the issuance of a\n  diagnostic message).</p>\n</blockquote>\n\n<p>So the program may do anything, even ignoring the situation. But it might also crash or call the police :-)</p>\n"}, {"tags": [], "owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "is_accepted": true, "score": 2, "last_activity_date": 1520975669, "creation_date": 1520975669, "answer_id": 49265973, "question_id": 49265505, "link": "https://stackoverflow.com/questions/49265505/out-of-bounds-writing-does-not-always-cause-an-error/49265973#49265973", "title": "Out-of-bounds writing does not always cause an error", "body": "<p>If you are asking WHY, there are all kinds of reasons why something like this might work. They depend upon the implementation.</p>\n\n<p>Your malloc function might allocate memory behind the scenes in fixed sizes or it could allocate memory that is already rounded up to some value. Let us say for example that your malloc implementation always allocated in multiples of 8 bytes.</p>\n\n<p>Then, your malloc(25) \u2014 malloc (29) calls might actually be allocating 32 bytes. So going beyond the end, might not be hurting you. When you go down to malloc (24) you might be going right off the end of the memory block.</p>\n\n<p>We can only guess what what is actually happening here. The library is free to do as it wants within the bounds of the language specification.</p>\n\n<p>As noted, the behavior here is completely undefined which is why you should not do this. A different library might give an entirely different result.</p>\n"}], "owner": {"reputation": 400, "user_id": 3657691, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/izLQX.png?s=128&g=1", "display_name": "geohei", "link": "https://stackoverflow.com/users/3657691/geohei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "closed_date": 1520975719, "accepted_answer_id": 49265973, "answer_count": 3, "score": 0, "last_activity_date": 1520975669, "creation_date": 1520973705, "last_edit_date": 1520974960, "question_id": 49265505, "link": "https://stackoverflow.com/questions/49265505/out-of-bounds-writing-does-not-always-cause-an-error", "closed_reason": "Duplicate", "title": "Out-of-bounds writing does not always cause an error", "body": "<p>I wrote a function to add items to my log file. Variables <code>loglevs[]</code> and <code>des</code> together exceed 30 characters (by far). When I use the function as below, all works fine.</p>\n\n<pre><code>char *logitem (int loglev, const char *des) {\n\n    extern const char *loglevs[];\n    char *lld; // loglevel &amp; description total 28 characters (7+1+20)\n\n    lld = (char *) malloc((29) * sizeof(char));\n    snprintf(lld, 29, \"[%5s] %s\", loglevs[loglev], des);\n\n    return lld;\n\n}\n</code></pre>\n\n<p>However when I use <code>malloc(24)</code> instead of <code>malloc(29)</code>, I get the following error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>root@vm:/home/geohei/devel# prog\n*** Error in `prog': malloc(): memory corruption: 0x0000000000853330 ***\nAborted (core dumped)\n</code></pre>\n\n<p>I was expecting to get the error already at <code>malloc(28)</code>. Why is it only showing at <code>malloc(24)</code>? Actually, I can go down to <code>malloc(25)</code> before the error pops up.</p>\n\n<p>I confirmed the test multiple times.</p>\n"}, {"tags": ["c", "makefile", "kernel", "kernel-module"], "comments": [{"owner": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "edited": false, "score": 1, "creation_date": 1520975087, "post_id": 49265471, "comment_id": 85535064, "body": "You may want to put some context on your build (the exact command you used to try to build and the output)."}, {"owner": {"reputation": 1602, "user_id": 6023771, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/67e7bfd227dd05ce79a8e4a4f18f37c2?s=128&d=identicon&r=PG&f=1", "display_name": "zee", "link": "https://stackoverflow.com/users/6023771/zee"}, "reply_to_user": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "edited": false, "score": 0, "creation_date": 1520975343, "post_id": 49265471, "comment_id": 85535173, "body": "edited, added command and output"}, {"owner": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "edited": false, "score": 2, "creation_date": 1520975627, "post_id": 49265471, "comment_id": 85535281, "body": "Ok, so first question, does <code>&#47;home&#47;[user]&#47;projects&#47;c&#47;test&#47;Makefile</code> exist?  (I noticed that it says <code>make: *** [makefile:4: all] Error 2</code>, with emphasis on the lowercase <code>m</code>....)"}, {"owner": {"reputation": 1602, "user_id": 6023771, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/67e7bfd227dd05ce79a8e4a4f18f37c2?s=128&d=identicon&r=PG&f=1", "display_name": "zee", "link": "https://stackoverflow.com/users/6023771/zee"}, "reply_to_user": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "edited": false, "score": 0, "creation_date": 1520978728, "post_id": 49265471, "comment_id": 85536598, "body": "I didn&#39;t know it was supposed to be uppercase"}, {"owner": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "edited": false, "score": 1, "creation_date": 1521035541, "post_id": 49265471, "comment_id": 85561663, "body": "Does switching to uppercase fix the problem?   I just looked at the kbuild documentation and it says that makefiles can be either <code>&#39;Kbuild&#39;</code> or <code>&#39;Makefile&#39;</code>, with quotes which implies case sensitivity, but it would be easy to miss."}, {"owner": {"reputation": 1602, "user_id": 6023771, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/67e7bfd227dd05ce79a8e4a4f18f37c2?s=128&d=identicon&r=PG&f=1", "display_name": "zee", "link": "https://stackoverflow.com/users/6023771/zee"}, "reply_to_user": {"reputation": 3767, "user_id": 8710344, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2292c452c0d0c9824d2aa38bb74d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "HardcoreHenry", "link": "https://stackoverflow.com/users/8710344/hardcorehenry"}, "edited": false, "score": 0, "creation_date": 1521037832, "post_id": 49265471, "comment_id": 85563277, "body": "Yes it did fix it, I just wasn&#39;t sure if  I could comment that since SO rules discourage the &quot;this worked thanks&quot; type comments, and since yours wasn&#39;t an answer I couldn&#39;t mark it as correct or anything."}], "owner": {"reputation": 1602, "user_id": 6023771, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/67e7bfd227dd05ce79a8e4a4f18f37c2?s=128&d=identicon&r=PG&f=1", "display_name": "zee", "link": "https://stackoverflow.com/users/6023771/zee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 619, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1520980934, "creation_date": 1520973547, "last_edit_date": 1520980934, "question_id": 49265471, "link": "https://stackoverflow.com/questions/49265471/cant-compile-test-kernel-module", "title": "Can&#39;t compile test kernel module", "body": "<p>I have this test file</p>\n\n<pre><code>#include &lt;linux/module.h&gt;\n#include &lt;linux/kernel.h&gt;\n\nstatic int init_module(void){\n    printk(KERN_INFO \"Hello world!\\n\");\n    return 0;\n}\n\nstatic void cleanup_module(void){\n    printk(KERN_INFO, \"I wanna kill my self tbh\\n\");\n}\n\nmodule_init(init_module);\nmodule_exit(cleanup_module);\n</code></pre>\n\n<p>and this make file</p>\n\n<pre><code>obj-m += test.o\n\nall:\n    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules\n\nclean:\n    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean\n</code></pre>\n\n<p>I'm not too sure what it means but I get an error saying that it couldn't find <code>Makefile</code> in the current directory and a file and folder are left in the current directory along with the source file and makefile, those files are <code>.cache.mk</code> file and <code>.tmp_versions</code> folder.</p>\n\n<p>I just run the <code>make</code> command and this is the output I get:</p>\n\n<pre><code>make -C /lib/modules/4.15.8-1-ARCH/build M=/home/[user]/projects/c/test modules\nmake[1]: Entering directory '/usr/lib/modules/4.15.8-1-ARCH/build'\nscripts/Makefile.build:45: /home/[user]/projects/c/test/Makefile: No such file or directory\nmake[2]: *** No rule to make target '/home/[user]/projects/c/test/Makefile'.  Stop.\nmake[1]: *** [Makefile:1510: _module_/home/[user]/projects/c/test] Error 2\nmake[1]: Leaving directory '/usr/lib/modules/4.15.8-1-ARCH/build'\nmake: *** [makefile:4: all] Error 2\n</code></pre>\n"}, {"tags": ["c", "doubly-linked-list"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520973487, "post_id": 49265428, "comment_id": 85534291, "body": "Insert it where? What is the meaning of <i>not sorted, just displayed by order</i> ?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1520977547, "post_id": 49265428, "comment_id": 85536062, "body": "You can search for <code>[c] doubly linked</code> and find plenty of examples here on SO."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1520982227, "post_id": 49265428, "comment_id": 85537874, "body": "You need to be able to say where to insert. In C++ you always insert before the iterator, which allows you to insert before the first element, and there is a special iterator for &quot;the end&quot;, so you can insert before (or at) the end. You can convert these concepts into a lightweight element pointer in c quite easily."}], "owner": {"reputation": 1, "user_id": 9487883, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Cookie Clash", "link": "https://stackoverflow.com/users/9487883/cookie-clash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520973464, "creation_date": 1520973336, "last_edit_date": 1520973464, "question_id": 49265428, "link": "https://stackoverflow.com/questions/49265428/insert-doubly-linked-list-in-c-by-only-one-function", "title": "Insert Doubly Linked list in C by only one function", "body": "<p>I am trying to work on insert function by doubly linked list in C. I could find how to do it by doing <code>insert_head</code> and <code>insert_tail</code> but is there any way that we can have only one function <code>insert(int num)</code> and insert the numbers? (not sorted, just displayed by order) so this is what I have set:</p>\n\n<pre><code>struct node {\nint data;\nstruct node *next, *prev;\n}*head;\n\nvoid insert(int num) {\nstruct node* temp = (struct node*) malloc (sizeof (struct node));\n// doubly linked list\n\n}\n</code></pre>\n"}, {"tags": ["c", "pipe", "fork", "computer-science"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1520973630, "post_id": 49265243, "comment_id": 85534356, "body": "Hint: immediately after a <code>fork</code>, the child is an exact duplicate of the parent.  Any variables set in the parent at that time also exist (separately) in the child.  After that, any changes in either process are not visible to the other so you need a way to communicate those changes."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1520978745, "post_id": 49265243, "comment_id": 85536605, "body": "If the first time through the parent&#39;s <code>for</code> loop waits for the child to finish, what is the <code>write</code> going to do the second time through?"}, {"owner": {"reputation": 1, "user_id": 4594617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8f8aa391e12483427c202b96a1397e2?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan A Vazquez", "link": "https://stackoverflow.com/users/4594617/jonathan-a-vazquez"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1520985674, "post_id": 49265243, "comment_id": 85538962, "body": "@dbush Okay that been said, i&#39;m assuming pipe concept comes in which helps transmit between each process, correct? For this scenerio would a simple two way connection work? (int pipeCommunication[2];) or do i need more?"}, {"owner": {"reputation": 1, "user_id": 4594617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8f8aa391e12483427c202b96a1397e2?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan A Vazquez", "link": "https://stackoverflow.com/users/4594617/jonathan-a-vazquez"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1520985841, "post_id": 49265243, "comment_id": 85539015, "body": "@aschepler Ideally there is 3 inputs represented by argv. I was thinking that the for loop would loop through the command line argument array, each user input would then write over to the child process. I have to take each input individual and add it to the total. the wait() func is in the wrong area since i&#39;m assuming that after the first loop, the child process is terminating. I realize that the child process does not receive the values from the parent for loop."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4594617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8f8aa391e12483427c202b96a1397e2?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan A Vazquez", "link": "https://stackoverflow.com/users/4594617/jonathan-a-vazquez"}, "edited": false, "score": 0, "creation_date": 1520987859, "post_id": 49267885, "comment_id": 85539510, "body": "i would like to create a 2nd pipe within the child process, however, my instructors requires us to send the value using the return statement. &quot;return sum;&quot; Am i to assume that is not possible since the sum variable from either processes are different?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1520988047, "post_id": 49267885, "comment_id": 85539550, "body": "The code shown in this post shows you exactly how the parent can get the value which the child returned from <code>main</code>."}, {"owner": {"reputation": 1, "user_id": 4594617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8f8aa391e12483427c202b96a1397e2?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan A Vazquez", "link": "https://stackoverflow.com/users/4594617/jonathan-a-vazquez"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1520989978, "post_id": 49267885, "comment_id": 85539992, "body": "@aschepler Perfect, i was placing it inside the child process. I read a bit further and realize that he wants me to insert it into the parent function. I manged to get the result, i will try adding the values together. I will also post the final end result above as an edit so other can reference it for later. Thanks for the assistance!"}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 0, "last_activity_date": 1520986452, "creation_date": 1520986452, "answer_id": 49267885, "question_id": 49265243, "link": "https://stackoverflow.com/questions/49265243/receiving-a-return-value-from-a-child-process-into-a-parent-process/49267885#49267885", "title": "Receiving a return value from a child process into a parent process?", "body": "<p>The return value of the child's main function (the 'sum' you are returning here) is accessable to the parent as the child's exit status.  The exit status is limited to 8 bits (not a full integer), so it is generally only used to return a limited error code rather than a value, but it may be big enough for your purposes.</p>\n\n<p>To get the child's exit code in the parent, you need to pass a pointer to a status variable to wait instead of NULL.  Replace the <code>wait(NULL)</code> line with:</p>\n\n<pre><code>int status;\nwait(&amp;status);\nsum = WEXITSTATUS(status);\n</code></pre>\n\n<p>Alternately (and recommended as 8 bits is usually not enough), you can create a second pipe going from the child back to the parent, and have the child write the sum to that pipe and have the parent read it.</p>\n"}], "owner": {"reputation": 1, "user_id": 4594617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8f8aa391e12483427c202b96a1397e2?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan A Vazquez", "link": "https://stackoverflow.com/users/4594617/jonathan-a-vazquez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 831, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520993816, "creation_date": 1520972551, "last_edit_date": 1520993816, "question_id": 49265243, "link": "https://stackoverflow.com/questions/49265243/receiving-a-return-value-from-a-child-process-into-a-parent-process", "title": "Receiving a return value from a child process into a parent process?", "body": "<p>I've read a few threads on here for information on this. I understand some but most of them are written in different methods. I just cant find sufficient information on how to return a value from a child process through a return statement. I blame myself for not looking hard enough, but i'm at a muddy puddle stuck. Any information is appreciated thanks.</p>\n\n<p>My goal for this (school assignment) is to have a child process read information from the parent. The child will ten compute mathematically (addition) each value received from the parent, then send the final value back to the parent to print onto the screen. </p>\n\n<p>RULES:\n 1. Can't use command line args inside of a child process only parent\n 2. All mathematical computation must be inside of child process.\n 3. No error checking is needed.</p>\n\n<p>Here is some code of what i have:</p>\n\n<pre><code>int main(int argc, char **argv){\n  char buf[256];\n  int pipeCommunication[2];\n  pipe(pipeCommunication);\n\n  pid_t pid = fork();\n\n  if(pid == 0){\n    //inside child process\n    int sum = 0;\n    read(pipeCommunication[0], buf, sizeof(buf));\n    sum += atoi(buf);\n    return sum; //WHY DOES IT NOT RETURN THE VALUE OF SUM?\n  }else{\n   int sum = 0;\n   for(int i = 1; i&lt;argc;i++){\n     write(pipeCommunication[0], argv[i], sizeof(argv);\n     wait(NULL);\n   }\n   printf(\"sum = %d\\n\", sum); //WHY CANT I SEE THE VALUE OF SUM FROM CHILD?\n   return 0; \n  }\n}\n</code></pre>\n\n<p>Command line input would be: ./apprun 1 2 3\nOUTPUT: 6\n(added 1 + 2 + 3 = 6)</p>\n\n<p>EDIT: I've realize that perhaps my write or read func need to cleared to allow another value to be read into the child process. Still trying to figure that out.</p>\n\n<p>EDIT: I've completed the assignment and will post the result here if anyone wants to view the final code. Afterwards, this thread is completed.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define SIZE argc-1\n\nint main(int argc, char **argv)\n{\n  int   userInput[SIZE];        \n  int       temp;                  \n  int     uiSize = sizeof(userInput)/sizeof(userInput[0]);    \n\n  int   pipeCom[2];             \n  pipe(pipeCom);                  \n\n  printf(\"CS201 - Assignment 3 Regular - Jonathan Vazquez\\n\");\n\n  pid_t pid = fork();\n\n  if (pid == 0) {\n\n      int sum = 0;\n\n      close(pipeCom[1]);                              \n      for(int i = 0;i &lt; uiSize; i++){\n          read(pipeCom[0], &amp;temp, sizeof(temp));      \n          sum += temp;                                \n          temp = 0;                                   \n      }\n\n      return sum;                                     \n  }else {\n\n      int sum = 0;                                                  \n      for(int i = 1; i &lt; argc; i++){\n        userInput[i] = atoi(argv[i]);               \n      }\n\n      close(pipeCom[0]);                              \n      for(int i = 1; i &lt; uiSize+1;i++){              \n          write(pipeCom[1], &amp;userInput[i], sizeof(userInput));    \n      }\n\n      int status;\n      wait(&amp;status);                                  \n      sum = WEXITSTATUS(status);                      \n      printf(\"sum = %d\\n\", sum);\n      return 0;\n  }\n }\n</code></pre>\n"}, {"tags": ["c", "string", "scanf"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1520971965, "post_id": 49264769, "comment_id": 85533510, "body": "Just use %s and get as many as they type, then truncate to 20."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520972056, "post_id": 49264769, "comment_id": 85533565, "body": "If the input was too long, you can&#39;t proceed anyway. Use an input string with length 25. <code>scanf(&quot;%24s&quot;, inpstring);</code> If the string entered is longer than <code>20</code> then abort. Otherwise <code>strcpy(contact.name, inpstring);</code> Note, <code>contact.name</code> struct member should be defined as <code>char name[21];</code>"}, {"owner": {"reputation": 5, "user_id": 8272887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a766a3e5c37670f7b8f2cd2381453d7?s=128&d=identicon&r=PG&f=1", "display_name": "P. Jamieson", "link": "https://stackoverflow.com/users/8272887/p-jamieson"}, "edited": false, "score": 0, "creation_date": 1520972566, "post_id": 49264769, "comment_id": 85533837, "body": "I should have mentioned we haven&#39;t been taught the string functions yet and are expected to not use them for this assignment.  This is what in was thinking to do but was told I couldn&#39;t here.  Thanks for the info, at least I know I had the right idea even if I can&#39;t use it yet.  Using %20s%*s has done the trick."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520972732, "post_id": 49264769, "comment_id": 85533905, "body": "Nope, please see comment under your answer."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1520976621, "post_id": 49264769, "comment_id": 85535688, "body": "Your biggest problem will be the <code>%s</code> <i>format specifier</i> <b>reading up to the first whitespace</b> leaving any additional characters, and the trailing <code>&quot;\\n&quot;</code> in the input buffer. Your next call to <code>&quot; %c&quot;</code> will only disregard leading whitespace by virtue of the initial space in the <i>format string</i>, but not any other characters. You should empty-<code>stdin</code> before the next <code>scanf</code> call, e.g. <code>for (int c = getchar(); c != &#39;\\n&#39; &amp;&amp; c != EOF; c = getchar()} {}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520972686, "post_id": 49265163, "comment_id": 85533884, "body": "But if there were no extra characters? It sits and waits."}, {"owner": {"reputation": 5, "user_id": 8272887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a766a3e5c37670f7b8f2cd2381453d7?s=128&d=identicon&r=PG&f=1", "display_name": "P. Jamieson", "link": "https://stackoverflow.com/users/8272887/p-jamieson"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520979544, "post_id": 49265163, "comment_id": 85536919, "body": "I got stuck testing 31+ characters and forgot to test less. You are right."}], "tags": [], "owner": {"reputation": 5, "user_id": 8272887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a766a3e5c37670f7b8f2cd2381453d7?s=128&d=identicon&r=PG&f=1", "display_name": "P. Jamieson", "link": "https://stackoverflow.com/users/8272887/p-jamieson"}, "is_accepted": false, "score": 0, "last_activity_date": 1520972254, "creation_date": 1520972254, "answer_id": 49265163, "question_id": 49264769, "link": "https://stackoverflow.com/questions/49264769/how-to-drop-extra-input-for-scanf-of-20s/49265163#49265163", "title": "How to drop extra input for scanf of %20s", "body": "<p>Couldn't get it for an hour but I have it now.</p>\n\n<pre><code>scanf(\" %30s%*s\", name.firstName);\n</code></pre>\n\n<p>The %*s swallows (sends to the bit bucket I am guessing) the extra characters if I understood it right. </p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1521009162, "post_id": 49265259, "comment_id": 85545121, "body": "Mixing <code>fgets()</code> and <code>scanf(&quot; %c&quot;...)</code> leads to troubles.  Perhaps not wit the simple code, yet in general.  Best to just use <code>fgets()</code> for user input."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 2, "last_activity_date": 1520975265, "last_edit_date": 1520975265, "creation_date": 1520972623, "answer_id": 49265259, "question_id": 49264769, "link": "https://stackoverflow.com/questions/49264769/how-to-drop-extra-input-for-scanf-of-20s/49265259#49265259", "title": "How to drop extra input for scanf of %20s", "body": "<p>You could use <code>fgets</code> to read in a complete line (probably longer than the length of the name you accept), truncate it to appropriate length and copy it to the destination:</p>\n\n<pre><code>int main(){\n    char buffer[500];\n    if (fgets(buffer,500,stdin)) {  // reads in a line including newline character\n        buffer[20]='\\0'; // truncate to at most 20 characters (note: requires an array/memory of length 21)\n        buffer[strcspn(buffer, \"\\n\")]='\\0';  // cut of the newline character (if any)\n        strcpy(contact.name, buffer);\n        printf(\"Do you want to enter a middle name?\");\n        scanf(\" %c\", &amp;doYouWant);\n        // ...\n    }\n}\n</code></pre>\n\n<p>The blank in <code>\" %c\"</code> is necessary if you like to accept \" y\" as input as well; note, however, that the new line has already been consumed by <code>fgets</code>...</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 8272887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a766a3e5c37670f7b8f2cd2381453d7?s=128&d=identicon&r=PG&f=1", "display_name": "P. Jamieson", "link": "https://stackoverflow.com/users/8272887/p-jamieson"}, "edited": false, "score": 0, "creation_date": 1520982763, "post_id": 49265365, "comment_id": 85538041, "body": "Works perfectly.  So simple and effective.  Thank you"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1521009219, "post_id": 49265365, "comment_id": 85545142, "body": "Note that the space in <code>&quot; %20s&quot;</code> is not needed."}], "tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1520973068, "creation_date": 1520973068, "answer_id": 49265365, "question_id": 49264769, "link": "https://stackoverflow.com/questions/49264769/how-to-drop-extra-input-for-scanf-of-20s/49265365#49265365", "title": "How to drop extra input for scanf of %20s", "body": "<p>If you want to drop the extra input which wasn't consumed by <code>scanf</code>, one way of doing it is to read and discard the extra input using a loop, like this:</p>\n\n<pre><code>scanf(\" %20s\", contact.name);\nint c;\nwhile((c = getchar()) != '\\n' &amp;&amp; c != EOF)  // &lt;=== This loop read the extra input characters and discard them\n    /* discard the character */;\nprintf(\"Do you want to enter a middle name?\");\n.....\n.....\n</code></pre>\n\n<p>The body of the loop is empty; we do nothing with the characters we're reading, thus discarding them.</p>\n"}], "owner": {"reputation": 5, "user_id": 8272887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a766a3e5c37670f7b8f2cd2381453d7?s=128&d=identicon&r=PG&f=1", "display_name": "P. Jamieson", "link": "https://stackoverflow.com/users/8272887/p-jamieson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1761, "favorite_count": 0, "accepted_answer_id": 49265365, "answer_count": 3, "score": 0, "last_activity_date": 1520975265, "creation_date": 1520970663, "question_id": 49264769, "link": "https://stackoverflow.com/questions/49264769/how-to-drop-extra-input-for-scanf-of-20s", "title": "How to drop extra input for scanf of %20s", "body": "<p>I am doing an assignment for an intro to c class so my knowledge is still pretty minimal, please be nice.  I have </p>\n\n<pre><code>scanf(\" %20s\", contact.name\");\nprintf(\"Do you want to enter a middle name?\");\nscanf(\" %c\", doYouWant\");\n</code></pre>\n\n<p>If the first scanf is more than 20 characters the characters will be the input for the next scanf.  If I use %s then it will accept the entire line but will be longer then the memory allocated. </p>\n\n<p>I need to get the first input and store in my struct then ask the next question. How do properly avoid having characters 21+ being used as input to the next question while limiting it to 20 characters. </p>\n"}, {"tags": ["c++", "c", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1520974136, "post_id": 49264742, "comment_id": 85534638, "body": "Library <code>dialog</code> uses symbols from <code>curses</code> one, so <code>dialog</code> should come <b>before</b> <code>curses</code> in linking list. See <a href=\"https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix/24675715#24675715\" title=\"what is an undefined reference unresolved external symbol error and how do i fix\">stackoverflow.com/questions/12573816/&hellip;</a>."}, {"owner": {"reputation": 6116, "user_id": 263356, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cfa873fd091ad1b2f15a984daa776f4d?s=128&d=identicon&r=PG", "display_name": "Gemini14", "link": "https://stackoverflow.com/users/263356/gemini14"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1520975061, "post_id": 49264742, "comment_id": 85535055, "body": "And, as usual, frustrating problem -&gt; an easy fix. I played around with the linking order but linker didn&#39;t complain whether or not curses was first. The problem was just that I hadn&#39;t included the curses library in the last step since it never complained about it on Linux. Using find_library for dialog was unnecessary. Voila: target_link_libraries(${PROJECT_NAME} ${CURSES_LIBRARIES} dialog lua curl Threads::Threads). If you add your answer, I&#39;ll accept it. Thanks!"}], "owner": {"reputation": 6116, "user_id": 263356, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cfa873fd091ad1b2f15a984daa776f4d?s=128&d=identicon&r=PG", "display_name": "Gemini14", "link": "https://stackoverflow.com/users/263356/gemini14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1520970558, "creation_date": 1520970558, "question_id": 49264742, "link": "https://stackoverflow.com/questions/49264742/undefined-symbols-for-architecture-x86-64-libdialog-a-on-mac-10-13-3", "title": "Undefined symbols for architecture x86_64 (libdialog.a) on Mac 10.13.3", "body": "<p>I'm working on a C++ program which makes use of the dialog library (<a href=\"http://invisible-island.net/dialog/\" rel=\"nofollow noreferrer\">http://invisible-island.net/dialog/</a>), which is written in C. I've been able to successfully compile and link my application against it on Linux with the following CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.8)\nproject(zerus)\n\nset(CMAKE_CXX_STANDARD 17)\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS}\")\nset(CMAKE_THREAD_PREFER_PTHREAD TRUE)\n\nfind_package(Lua REQUIRED)\nfind_package(Curses REQUIRED)\nfind_package(Threads REQUIRED)\n\nadd_executable(${PROJECT_NAME} main.cpp headers/Utilities.h source/Utilities.cpp headers/config/lua/LuaConfiguration.h source/config/lua/LuaConfiguration.cpp headers/config/PlatformProcessConfiguration.h source/config/PlatformProcessConfiguration.cpp headers/config/PlatformConfiguration.h source/config/PlatformConfiguration.cpp headers/config/PlatformServiceConfiguration.h source/TmuxSessionManager.cpp headers/TmuxSessionManager.h source/PlatformOvermind.cpp headers/PlatformOvermind.h headers/ProcessStartResult.h headers/dialogs/DialogMainMenu.h source/dialogs/DialogMainMenu.cpp source/dialogs/ModdedDialog.cpp headers/dialogs/ModdedDialog.h source/dialogs/DialogServicesChecklist.cpp headers/dialogs/DialogServicesChecklist.h source/ui/UIManager.cpp headers/ui/UIManager.h headers/dialogs/DialogRegionsChecklist.h source/dialogs/DialogRegionsChecklist.cpp source/dialogs/DialogResolveDependenciesYesNo.cpp headers/dialogs/DialogResolveDependenciesYesNo.h source/dialogs/DialogProcessesChecklist.cpp headers/dialogs/DialogProcessesChecklist.h)\n\ntarget_link_libraries(${PROJECT_NAME} lua curl dialog Threads::Threads)\n</code></pre>\n\n<p>However, when I try to build the same project on Mac, it compiles but the linker fails with:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n      \"_COLOR_PAIRS\", referenced from:\n          _dlg_print_text in libdialog.a(util.o)\n          _dlg_color_setup in libdialog.a(util.o)\n          _dlg_color_pair in libdialog.a(util.o)\n      \"_COLS\", referenced from:\n          _dlg_put_backtitle in libdialog.a(util.o)\n          _dlg_clear in libdialog.a(util.o)\n          _init_dialog in libdialog.a(util.o)\n          _dlg_auto_size in libdialog.a(util.o)\n          _dlg_auto_sizefile in libdialog.a(util.o)\n          _dlg_ctl_size in libdialog.a(util.o)\n          _dlg_box_x_ordinate in libdialog.a(util.o)\n          ...\n      \"_LINES\", referenced from:\n          _dlg_clear in libdialog.a(util.o)\n          _init_dialog in libdialog.a(util.o)\n          _dlg_print_scrolled in libdialog.a(util.o)\n          _dlg_auto_size in libdialog.a(util.o)\n          _dlg_auto_sizefile in libdialog.a(util.o)\n          _dlg_ctl_size in libdialog.a(util.o)\n          _dlg_calc_listh in libdialog.a(util.o)\n          ...\n      \"__nc_wacs\", referenced from:\n          _dlg_draw_arrows2 in libdialog.a(arrows.o)\n          _dlg_draw_scrollbar in libdialog.a(arrows.o)\n      \"_acs_map\", referenced from:\n          _dlg_put_backtitle in libdialog.a(util.o)\n          _dlg_boxchar in libdialog.a(util.o)\n          _dlg_print_scrolled in libdialog.a(util.o)\n          _dlg_draw_box2 in libdialog.a(util.o)\n          _dlg_asciibox in libdialog.a(util.o)\n          _dlg_draw_bottom_box2 in libdialog.a(util.o)\n          _dlg_draw_arrows2 in libdialog.a(arrows.o)\n          ...\n      \"_beep\", referenced from:\n          _dialog_yesno in libdialog.a(yesno.o)\n          _dlg_beeping in libdialog.a(util.o)\n          _dlg_checklist in libdialog.a(checklist.o)\n          _dlg_menu in libdialog.a(menubox.o)\n          _dlg_edit_string in libdialog.a(inputstr.o)\n          _mouse_wgetch in libdialog.a(mousewget.o)\n          _dialog_textbox in libdialog.a(textbox.o)\n          ...\n         (maybe you meant: _dlg_beeping)\n      \"_cbreak\", referenced from:\n          _init_dialog in libdialog.a(util.o)\n...etc.\n    ld: symbol(s) not found for architecture x86_64\n    clang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>I've tried several approaches to fix this including:</p>\n\n<ul>\n<li>using extern \"C\" {} to include the dialog header (didn't use on Linux and everything linked correctly).</li>\n<li>Changing build file to the following to ensure that CMake was finding the library correctly (and it was).</li>\n</ul>\n\n<p>CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.8)\nproject(zerus)\n\nMESSAGE( STATUS \"CMAKE_LIBRARY_PATH: \" ${CMAKE_LIBRARY_PATH} )\n\nset(CMAKE_CXX_STANDARD 17)\nset(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS}\")\nset(CMAKE_THREAD_PREFER_PTHREAD TRUE)\n\nfind_package(Lua REQUIRED)\nfind_package(Curses REQUIRED)\nfind_package(Threads REQUIRED)\n\nfind_library(DIALOG_LIB dialog)\nmessage(DIALOG_LIB=${DIALOG_LIB})\n\nadd_executable(${PROJECT_NAME} &lt;source files&gt;)\n\ntarget_link_libraries(${PROJECT_NAME} ${DIALOG_LIB} lua curl Threads::Threads)\n</code></pre>\n\n<p>Output during CMake's build verified that it was finding the library:</p>\n\n<pre><code>DIALOG_LIB=/usr/local/lib/libdialog.a\n</code></pre>\n\n<ul>\n<li>Verifying that the static library created using make/make install-full on the Mac was for the correct architecture:</li>\n</ul>\n\n<p><code>lipo -info /usr/local/lib/libdialog.a</code></p>\n\n<p><code>input file /usr/local/lib/libdialog.a is not a fat file</code></p>\n\n<p><code>Non-fat file: /usr/local/lib/libdialog.a is architecture: x86_64</code></p>\n\n<ul>\n<li>Verifying that the object files inside the static library matched the architecture</li>\n</ul>\n\n<p>I'm not sure where to go from here. I get that the linker can't find the symbols, but it seems to be finding the library which includes those symbols. Is this related to the toolchain on Mac and if so, how can it be fixed?</p>\n"}, {"tags": ["c", "loops", "time-complexity", "big-o", "complexity-theory"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 5, "creation_date": 1520970251, "post_id": 49264622, "comment_id": 85532632, "body": "@Jean-Fran&#231;oisFabre Input is halved each time, would that not be <code>O(log n)</code>?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1520970256, "post_id": 49264622, "comment_id": 85532637, "body": "and of course there will be more iterations with <code>double</code>. Not sure about the complexity though. comparing floats to 0 isn&#39;t a good idea."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1520970272, "post_id": 49264622, "comment_id": 85532646, "body": "I meant <code>O(log n)</code> sorry!"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1520970298, "post_id": 49264622, "comment_id": 85532669, "body": "my fingers wanted it to be <code>O(n)</code>. They had the <code>n</code> right :)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1520970346, "post_id": 49264622, "comment_id": 85532685, "body": "The double case is <i>theoretically</i> undefined, as it should loop forever. Yet not sure how it will behave"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1520970376, "post_id": 49264622, "comment_id": 85532709, "body": "It won&#39;t loop forever. after a while, underflow will make the value 0."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1520970432, "post_id": 49264622, "comment_id": 85532736, "body": "@Barmar That&#39;s why I said <i>theoretically</i>. Probably implementation defined."}, {"owner": {"reputation": 787, "user_id": 6715227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NB84a.png?s=128&g=1", "display_name": "stetoc", "link": "https://stackoverflow.com/users/6715227/stetoc"}, "edited": false, "score": 0, "creation_date": 1520970447, "post_id": 49264622, "comment_id": 85532744, "body": "it would loop forever if double type had infinite bytes of precision"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1520970498, "post_id": 49264622, "comment_id": 85532766, "body": "it becomes <code>O(n)</code> because you need a given number of divisions by 2 to reach 0 (implementation defined, yes)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520970611, "post_id": 49264622, "comment_id": 85532822, "body": "I think it&#39;s O(FP precision), which is a constant for any given FP representation, so it&#39;s O(1)."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1520970895, "post_id": 49264622, "comment_id": 85532972, "body": "it&#39;s <code>O(log n)</code> (until it reaches 1) then it&#39;s fixed."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1520970941, "post_id": 49264622, "comment_id": 85532997, "body": "@Barmar This reasoning is invalid in my eyes, since every computation on a real computer has an upper bound depending on its resources or  is infinite (busy beaver theorem), so you could reason that everything is O(1) there"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1520971294, "post_id": 49264622, "comment_id": 85533182, "body": "@Ctx Good point. In this case, dividing by 2 either subtracts 1 from the exponent, or shifts the mantissa when the minimum exponent is reached. So it&#39;s O(log(n) + number of significant digits in n)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1520971516, "post_id": 49264622, "comment_id": 85533298, "body": "@Ctx However, this question is specifically about a particular representation, not a about abstract algorithms."}], "answers": [{"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1520971658, "post_id": 49264925, "comment_id": 85533368, "body": "Im watching you"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 3, "last_activity_date": 1520971280, "creation_date": 1520971280, "answer_id": 49264925, "question_id": 49264622, "link": "https://stackoverflow.com/questions/49264622/is-the-time-complexity-big-o-of-this-function-a-constant/49264925#49264925", "title": "Is the time complexity/Big O of this function a constant?", "body": "<p>The answer for the integer part is <code>O(log n)</code> because the value is halved each time.</p>\n\n<p>The double version starts the same way, except that when the value reaches 1 or close to 1, it doesn't stop and divides until underflow makes it 0. At this point, the number of divisions is fixed.</p>\n\n<p>I've made a small empirically calibrated program which tries to predict the number of loops:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nvoid f2(int n){\n  int len=0;\n  double temp = (double)n;\n  while (temp /= 2)\n  {\n    len++; \n  }\n  // 1.53 is an empiric constant, maybe it could be theorically computed\n  // it was just to make the numbers match\n  printf(\"%d %lf\\n\",len,log(n)*1.53+1074);\n}\nint main()\n{\n\n    f2(100000000);\n    f2(10000000);\n    f2(1000000);\n    f2(10000);\n    f2(100);\n    f2(1);\n\n}\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>1101 1102.183642\n1097 1098.660686\n1094 1095.137731\n1087 1088.091821\n1081 1081.045910\n1074 1074.000000\n</code></pre>\n\n<p>So the complexity is <code>O(log n)</code> plus an incompressible number of iterations, depending on the machine.</p>\n\n<p>(my apologies for the empiric aspect of my answer, I'm not a floating point expert)</p>\n"}, {"tags": [], "owner": {"reputation": 3653, "user_id": 6520041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-y2Mls6eJLA0/AAAAAAAAAAI/AAAAAAAAAAA/_V6LCP-xzt8/photo.jpg?sz=128", "display_name": "FatihAkici", "link": "https://stackoverflow.com/users/6520041/fatihakici"}, "is_accepted": false, "score": 2, "last_activity_date": 1520973362, "creation_date": 1520973362, "answer_id": 49265431, "question_id": 49264622, "link": "https://stackoverflow.com/questions/49264622/is-the-time-complexity-big-o-of-this-function-a-constant/49265431#49265431", "title": "Is the time complexity/Big O of this function a constant?", "body": "<p>For an algorithm to have constant time-complexity, its runtime should stay constant as the number of inputs, <code>n</code>, grows. If your function on <code>n = 1</code> and <code>n = 1000000</code> takes different amounts of time to run, your function is not <code>O(1)</code>, i.e. it doesn't have a constant time complexity.</p>\n\n<p>Let's calculate how many steps the first function takes to terminate:</p>\n\n<p>n/2<sup>x</sup> = 1 &rArr; x = log(n)</p>\n\n<p>For the second, however, it will theoretically keep dividing <code>n</code> by 2 forever, but in reality, it will terminate after some <code>log(n) + c</code> steps, in which case the constant will be omitted, and the complexity is going to be <code>log(n)</code> again.</p>\n"}], "owner": {"reputation": 393, "user_id": 6399127, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/284c279ef66682bb64409ea3e0d89d18?s=128&d=identicon&r=PG&f=1", "display_name": "sam0101", "link": "https://stackoverflow.com/users/6399127/sam0101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1520973362, "creation_date": 1520970109, "question_id": 49264622, "link": "https://stackoverflow.com/questions/49264622/is-the-time-complexity-big-o-of-this-function-a-constant", "title": "Is the time complexity/Big O of this function a constant?", "body": "<p>is the time complexity of this program O(1)? </p>\n\n<pre><code>f1(int n){\n  int temp = n;\n  while (temp /= 2))\n  {\n    len++; result+=m;\n  }\n}\n</code></pre>\n\n<p>and if we change int temp to double temp, does the time complexity change as well, or it will remain constant?</p>\n\n<pre><code>f2(int n){\n  double temp = (double)n;\n  while (temp /= 2))\n  {\n    len++; result+=m;\n  }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1520969712, "post_id": 49264460, "comment_id": 85532345, "body": "<code>sentence_array = (char **)malloc(numberofsentences*sizeof(char));</code> =&gt; <code>sentence_array = malloc(numberofsentences*sizeof(char*));</code> or size is wrong"}, {"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 0, "creation_date": 1520969866, "post_id": 49264460, "comment_id": 85532440, "body": "You are using <code>numberofsentences</code> variable for allocating memory before <code>scanf (&quot;%d&quot;, &amp;numberofsentences);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1520971843, "last_edit_date": 1520971843, "creation_date": 1520969791, "answer_id": 49264523, "question_id": 49264460, "link": "https://stackoverflow.com/questions/49264460/bus-error-core-dumped-error-ubuntu-c-program/49264523#49264523", "title": "Bus error (core dumped) error (ubuntu) C program", "body": "<p>that's expected because</p>\n\n<pre><code>sentence_array = (char **)malloc(numberofsentences*sizeof(char));\n</code></pre>\n\n<p>doesn't allocate enough memory for <code>numberofsentences</code> <em>pointers</em>. So after a few sentences stored, you get a memory violation or any other UB.</p>\n\n<p>The <code>sizeof</code> is wrong, it should be:</p>\n\n<pre><code>sentence_array = malloc(numberofsentences*sizeof(char *));\n</code></pre>\n\n<p>Aside: no need for cast: <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Do I cast the result of malloc?</a> (answer is no, BTW)</p>\n\n<p>EDIT: my answer is incomplete, H.S. pointed out the other part of the problem (uninitialized value), that can be easily avoided by:</p>\n\n<ul>\n<li>enabling the warnings</li>\n<li><em>reading</em> them</li>\n</ul>\n\n<p>(plus the other <code>fgets</code> boundary error)</p>\n\n<p>that'll teach me to try to valgrind OP code manually.</p>\n"}, {"tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1520975559, "last_edit_date": 1520975559, "creation_date": 1520971032, "answer_id": 49264860, "question_id": 49264460, "link": "https://stackoverflow.com/questions/49264460/bus-error-core-dumped-error-ubuntu-c-program/49264860#49264860", "title": "Bus error (core dumped) error (ubuntu) C program", "body": "<p>In this statement:</p>\n\n<pre><code>sentence_array = (char **)malloc(numberofsentences*sizeof(char));\n</code></pre>\n\n<p>you are using the local variable <code>numberofsentences</code> before initializing it, which is an undefined behavior. Also, <code>sentence_array</code> should be allocating memory of an array of <code>char</code> pointers i.e. <code>numberofsentences*sizeof(char *)</code> and move this statement below the <code>numberofsentences</code> input statement. \nSo, it should be like this:</p>\n\n<pre><code>scanf (\"%d\", &amp;numberofsentences);\nfgetc(stdin);\nsentence_array = malloc(numberofsentences*sizeof(char *));\n</code></pre>\n\n<p><em>[You don't need to cast the <code>malloc</code> result]</em></p>\n\n<p>Also, here</p>\n\n<pre><code>fgets(sentence_array[i], 101, stdin);\n                         ^^^\n</code></pre>\n\n<p>the buffer overflow can occur. The <code>sentence_array[i]</code> has been allocated memory to hold <code>100</code> characters and you are giving <code>101</code> as the maximum number of characters to be copied to <code>sentence_array[i]</code>. The <code>fgets()</code> reads characters from stream and stores them into the buffer (here, <code>sentence_array[i]</code>) until <code>(num-1)</code> (here, <code>101-1</code>) characters have been read or either a newline or the end-of-file is reached, whichever happens first and <strong>a terminating null-character is automatically appended</strong> after the characters copied to the buffer. So, it could cause the buffer overflow. It should be:</p>\n\n<pre><code>fgets(sentence_array[i], 100, stdin);\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 9105029, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e79d84e3e8d9216cd44f249a119feb62?s=128&d=identicon&r=PG&f=1", "display_name": "jrdev", "link": "https://stackoverflow.com/users/9105029/jrdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4674, "favorite_count": 0, "accepted_answer_id": 49264523, "answer_count": 2, "score": 0, "last_activity_date": 1520975559, "creation_date": 1520969560, "question_id": 49264460, "link": "https://stackoverflow.com/questions/49264460/bus-error-core-dumped-error-ubuntu-c-program", "title": "Bus error (core dumped) error (ubuntu) C program", "body": "<p>I have a program in which a user inputs how many sentences they want, and then then be prompted to input the sentences. they cannot enter more than ten sentences. when i test, if i enter more than 5, i get a bus error code. here is my code, i am calling two functions in .h files that i dont believe are relevant but i will provide them anyways.  </p>\n\n<pre><code>//this program will take in user input for a number of sentences  up to ten, each with 100 char or less, and convert them all to uppercase\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"convert.h\"\n\n\nint main () {\n\nint i; //increment\nint numberofsentences; //number of sentences\nchar **sentence_array; // sentence array\n\nsentence_array = (char **)malloc(numberofsentences*sizeof(char));\n\nprintf (\"I will take up to ten sentences of up to 100 chars each, and convert them to uppercase, as well as give you stats on them. \\n\");\nprintf (\"How many sentences would you like? \\n\");\n\nscanf (\"%d\", &amp;numberofsentences);\nfgetc(stdin);\n\n\n//user inputs the sentences based on the number that was provided\nfor (i = 0;  i&lt; numberofsentences; i++) {\n    sentence_array[i] = (char *)malloc(100 * sizeof(char));\n    printf (\"Enter sentence :\");\n    fgets(sentence_array[i], 101, stdin);\n    printf (\"\\n\");\n      }\n\n//call function that converts all arrays to uppercase\nconvertAll(sentence_array, numberofsentences);\n\nprintf(\"Your converted sentences are: \\n\");\n\n\n//print out every sentence thats converted to uppercase\nfor (i = 0; i &lt; numberofsentences; i++){\n    //convertSentence(sentence_array[i]);\n    printf(\"%s\", sentence_array[i]);\n       }\n}\n</code></pre>\n\n<p>and functions.c file</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include \"convert.h\"\n\n//function to convert char array to uppercase\nvoid convertSentence(char *sentence){\n        int i;\n        for (i = 0; i &lt;strlen(sentence); i++){\n                sentence[i] = toupper(sentence[i]);\n        }\n}\n\n//function to convert array of all sentences and converts all to upper\nvoid convertAll(char **sentenceList, int numOfSentences){\n        int i;\n        for (i = 0; i &lt; numOfSentences; i++){\n                convertSentence(sentenceList[i]);\n        }\n}\n</code></pre>\n\n<p>i feel like its something to do with the memory allocation.\nand as a note: i know that scanf and fgets are terrible, but my professor told us to use them so ... thanks for helping</p>\n"}, {"tags": ["c", "gcc", "makefile"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1520969462, "post_id": 49264416, "comment_id": 85532212, "body": "indentation is broken in your makefile. each command must start by a TAB."}, {"owner": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "edited": false, "score": 0, "creation_date": 1520969506, "post_id": 49264416, "comment_id": 85532245, "body": "what command are you using to invoke make?"}], "answers": [{"comments": [{"owner": {"reputation": 513, "user_id": 8293226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ccfWx.png?s=128&g=1", "display_name": "mustachioed", "link": "https://stackoverflow.com/users/8293226/mustachioed"}, "edited": false, "score": 1, "creation_date": 1520969651, "post_id": 49264453, "comment_id": 85532326, "body": "Or just rename <code>mkFile</code> to just <code>Makefile</code> and then make will pick it up automatically without you having to specify the Makefile to use.`"}, {"owner": {"reputation": 189, "user_id": 9377575, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fccde8f5dda75996917673032acdc454?s=128&d=identicon&r=PG&f=1", "display_name": "Some_Dude", "link": "https://stackoverflow.com/users/9377575/some-dude"}, "edited": false, "score": 0, "creation_date": 1520970196, "post_id": 49264453, "comment_id": 85532596, "body": "That was my problem. Thanks! really simple issue i was having. Didnt use -f!"}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 1, "creation_date": 1520973181, "post_id": 49264453, "comment_id": 85534139, "body": "The other issue you had was you fibbed to us when you posted your question: you said you ran <code>make</code> but that&#39;s not what you ran at all.  Luckily for you R Sahu was able to guess what the real problem was.  So, lesson: always show the exact command you entered and the exact error output you got, preferably cut-and-pasted into the question.  Cheers!"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1520973946, "post_id": 49264453, "comment_id": 85534535, "body": "And don&#39;t forget to read the <code>man pages</code>, e.g. <code>man 1 make : -f file Use file as a makefile.</code>"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1520969681, "last_edit_date": 1520969681, "creation_date": 1520969531, "answer_id": 49264453, "question_id": 49264416, "link": "https://stackoverflow.com/questions/49264416/makefile-unix-for-c-program/49264453#49264453", "title": "Makefile - Unix for C program", "body": "<blockquote>\n  <p>When i run \"make\" on my makefile it only says \" 'mkFile' is up to date\", where mkFile is the name of my makefile.</p>\n</blockquote>\n\n<p>That indicates to me that you are using the following command line:</p>\n\n<pre><code>make mkFile\n</code></pre>\n\n<p>When you use that, it thinks it needs to build the target named <code>mkFile</code>.</p>\n\n<p>You need to use:</p>\n\n<pre><code>make -f mkFile\n</code></pre>\n\n<p>When you use that, it indicates to <code>make</code> that the targets and dependencies for <code>make</code> are defined in the file named <code>mkFile</code>.</p>\n\n<hr>\n\n<p>Another option is to rename <code>mkFile</code> to <code>makefile</code> or <code>Makefile</code> and then just use</p>\n\n<pre><code>make\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 9377575, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fccde8f5dda75996917673032acdc454?s=128&d=identicon&r=PG&f=1", "display_name": "Some_Dude", "link": "https://stackoverflow.com/users/9377575/some-dude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520969681, "creation_date": 1520969360, "question_id": 49264416, "link": "https://stackoverflow.com/questions/49264416/makefile-unix-for-c-program", "title": "Makefile - Unix for C program", "body": "<p>I am trying to make a makefile on linux. When i run \"make\" on my makefile it only says \" 'mkFile' is up to date\", where mkFile is the name of my makefile. I dont have any .o files or a compiled program prior to running the make command. I only have C files in the directory, so i dont know why it wont generate the executable and .o files. I have 5 files: Main.c, convertSentence.c, convertAll.c, convertSentence.h, and convertAll.h  </p>\n\n<p>Main.c includes convertAll.h, and convertAll.c includes convertAll.h.</p>\n\n<p>Here is my code: </p>\n\n<pre><code>main: Main.o convertSentence.o convertAll.o\n\ngcc -o program Main.o convertSentence.o convertAll.o\n\nMain.o: Main.c convertAll.h\n\ngcc -c Main.c\n\nconvertAll.o: convertAll.c convertSentence.h\n\ngcc -c convertAll.c\n\nconvertSentence.o: convertSentence.c\n\ngcc -c convertSentence.c\n\nclean:\n\nrm *.o\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520968643, "post_id": 49264162, "comment_id": 85531826, "body": "Aside: call <code>srand (time ( 0 ));</code> <i>once</i> in <code>main</code> and delete every other."}, {"owner": {"reputation": 9, "user_id": 9473882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47b8c399178b66e8dcdb9e096a7a3abe?s=128&d=identicon&r=PG&f=1", "display_name": "PvtCaboose", "link": "https://stackoverflow.com/users/9473882/pvtcaboose"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520972818, "post_id": 49264162, "comment_id": 85533948, "body": "I tried to after you mentioned this, but it created a problem where turtle was always between 1 and 5"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1520973368, "post_id": 49264162, "comment_id": 85534238, "body": "Whatever, <code>srand</code> does not create problems. It seeds the PRNG once, typically at the start of the program. That is how to use <code>srand</code>. You may have other problems."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 9473882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47b8c399178b66e8dcdb9e096a7a3abe?s=128&d=identicon&r=PG&f=1", "display_name": "PvtCaboose", "link": "https://stackoverflow.com/users/9473882/pvtcaboose"}, "edited": false, "score": 0, "creation_date": 1520971495, "post_id": 49264284, "comment_id": 85533284, "body": "I&#39;ve changed the variables and changed it to a while loop, it fixed my issue.  Were there many other mistakes you were talking about?"}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": true, "score": 2, "last_activity_date": 1520968856, "creation_date": 1520968856, "answer_id": 49264284, "question_id": 49264162, "link": "https://stackoverflow.com/questions/49264162/tortoise-and-the-hare-pointers-example-c/49264284#49264284", "title": "Tortoise and the Hare, pointers example C", "body": "<p>This is the culprit:</p>\n\n<pre><code>for ( turtle != FINISH, hare != FINISH; turtle &lt;= 70 || hare &lt;= 70; timer++ )\n</code></pre>\n\n<p>This is your initialization of the while loop:</p>\n\n<pre><code>turtle != FINISH, hare != FINISH;\n</code></pre>\n\n<p>These are boolean expressions and thus essentially no-ops. It should usually initialize your loop variables, for example</p>\n\n<pre><code>turtle = 1, hare = 1;\n</code></pre>\n\n<p>This is your loop condition:</p>\n\n<pre><code>turtle &lt;= 70 || hare &lt;= 70;\n</code></pre>\n\n<p>It is true, while the turtle is not in the finish <em>or</em> the hare is not in the finish. You seem to want a boolean <em>and</em> here (and better use the macro FINISH you defined):</p>\n\n<pre><code>turtle &lt; FINISH &amp;&amp; hare &lt; finish;\n</code></pre>\n\n<p>There are several other issues, but that addresses the question you asked.</p>\n"}], "owner": {"reputation": 9, "user_id": 9473882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47b8c399178b66e8dcdb9e096a7a3abe?s=128&d=identicon&r=PG&f=1", "display_name": "PvtCaboose", "link": "https://stackoverflow.com/users/9473882/pvtcaboose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1233, "favorite_count": 0, "accepted_answer_id": 49264284, "answer_count": 1, "score": 1, "last_activity_date": 1520968902, "creation_date": 1520968331, "question_id": 49264162, "link": "https://stackoverflow.com/questions/49264162/tortoise-and-the-hare-pointers-example-c", "title": "Tortoise and the Hare, pointers example C", "body": "<p>The code works, but it wont complete unless both the tortoise and the hare finish. My question is trying to get it so either the hare finishes or the turtle does and ends the program. </p>\n\n<p>Below is the question, I've added it because I couldn't post if it wasn't there because I have \"too much code.\" </p>\n\n<p>This is the question:\nThe Tortoise and the Hare: In this problem, you\u2019ll recreate one of the truly\ngreat moments in history, namely the classic race of the tortoise and the hare. You\u2019ll use random number generation to develop a simulation of this memorable event.\nOur contenders begin the race at \u201csquare 1\u201d of 70 squares. Each square represents a possible position along the race course. The finish line is at square 70. The first contender to reach or pass square 70 is rewarded with a pail of fresh carrots and lettuce. The course weaves its way up the side of a slippery mountain, so occasionally the contenders lose ground.\nThere\u2019s a clock that ticks once per second. With each tick of the clock, your program should adjust the position of the animals</p>\n\n<p>[code/]</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;math.h&gt;\n#include &lt;unistd.h&gt;\n\n#define FINISH 70\n\n// function calls for pointer to hare and tortiose and positioning\n\nvoid position1 ( int* tPtr );\nvoid position2 ( int* hPtr );\nvoid printPositions ( int* tPtr , int* hPtr );\n\n\nint main (void)\n{\n\n    int turtle = 1, hare = 1, movement1 = 1, movement2 = 1, timer = 0, start = 0; // variables\n    int choice; // Exit choice\n    int *tPtr = &amp;turtle; // tort pointer\n    int *hPtr = &amp;hare; // hare pointer\n\n    printf ( \"To have the tortiose and the hare race, press 1 [Any other character to exit]: \" );\n    scanf ( \"%d\", &amp;start ); // input to start\n\n    while ( start == 1 )\n    {\n\n        puts ( \"BANG!!!!!!\" );\n        puts ( \"AND THEY'RE OFF!!!!!\" );\n        puts ( \"HT\" );\n        // for loop to activate this function call to 70.\n//        printf ( \"%d %d \", *tPtr, *hPtr);\n        for ( turtle != FINISH, hare != FINISH; turtle &lt;= 70 || hare &lt;= 70; timer++ )\n        {\n            sleep(1);\n            position1 ( &amp;turtle );     //function call tort\n            position2 ( &amp;hare );    // fucntion call hare\n            printPositions ( &amp;turtle, &amp;hare ); // function call print result\n//            printf ( \"%d %d\", *tPtr, *hPtr);\n        }\n\n        if ( hare &gt;= FINISH || turtle &gt;= FINISH ) // results\n        {\n            if ( turtle &gt; hare )\n            {\n                printf ( \"THE TORTIOSE WINS!!!!\\n\" );\n                printf ( \"The race took: %ds\\n\", timer );\n            }\n\n            else if ( hare &gt; turtle )\n            {\n                printf ( \"The hare wins. Yuch\\n\" );\n                printf ( \"The race took: %ds\\n\", timer );\n            }\n\n            else\n            {\n                printf ( \"Tie race!\\n\" );\n                printf ( \"The race took: %ds\\n\", timer );\n            }\n\n        }// end results\n\n    break; // stops while loop (No exit condition)\n    } // end main while loop\n\n\n} // end main\n\nvoid position1 ( int *tPtr ) // function call for tortoise\n{\n\n    int turtle;\n\n        srand( time ( 0 ));\n        turtle = 1 + ( rand() % 10 ) ;\n    //    printf ( \"%d \", turtle );\n    //    printf( \"%d\", *tPtr );\n\n        if ( turtle &gt;= 1 || turtle &lt;= 5 )// movement1 &lt;=5\n        {\n            *tPtr += 3;\n        //    printf ( \"m3t \");\n        }\n        else if ( turtle == 6 || turtle == 7 ) // movement1 = 6 &amp;&amp; movement1 = 7\n        {\n            *tPtr -= 6;\n        //    printf ( \" m-6t \");\n        }\n        else if ( turtle &gt;= 8 ) // movement1 &gt;=8\n        {\n            *tPtr += 1;\n        //    printf ( \"m1t \");\n        }\n\n        else // (movement1 &lt; 1 )\n        {\n            *tPtr == 1;\n        //    printf ( \"m0t \");\n        }\n}// end of turtle fucntion\n\nvoid position2 ( int *hPtr ) // function call for hare\n{\n\n    int hare;\n\n        srand (time ( 0 ));\n        hare = 1 + ( rand() % 10 );\n    //    printf ( \"%d \", *hPtr);\n\n        if ( hare &lt;= 2)// movement2 &lt;=2\n        {\n            *hPtr += 1;\n        //    printf ( \"m1h \");\n        }\n\n        else if ( hare == 3 || hare == 4 ) // movement2 = 6 &amp;&amp; movement2 = 7\n        {\n            *hPtr = *hPtr;\n        //    printf ( \"m0h \");\n        }\n\n        else if ( hare &gt;= 5 || hare &lt;= 7 ) // movement2 &gt;=8\n        {\n            *hPtr += 9;\n        //    printf ( \"m9h \");\n        }\n\n        else if ( hare &gt;= 8 || hare &lt;= 9 )\n        {\n            *hPtr -= 2;\n        //    printf ( \"m-2h \");\n        }\n\n        else if ( hare == 10 )// (movement2 &lt; 1 )\n        {\n            *hPtr -= 12;\n        //    printf ( \"m-12h  \" );\n        }\n        else\n        {\n            *hPtr = 1;\n        }\n}// end of turtle fucntion\n\nvoid printPositions ( int *tPtr, int *hPtr ) // Race Print function start\n{\n    int movement;\n    int turtle;\n    int hare;\n\n    if ( &amp;turtle == &amp;hare ) // We are only getting in here, why?\n    {\n    //    printf ( \" *tPtr == *hPtr \");\n        for ( movement = 0; movement &lt; *tPtr; movement++ )\n            {\n                printf ( \" \" );\n            }\n        printf ( \"OUCH!\" );\n    }\n    else if ( *tPtr &lt; *hPtr )\n    {\n        //printf( \"*tPtr &lt; *hPtr \" );\n        for ( movement = 0; movement &lt; *tPtr; movement++ )\n            printf ( \" \" );\n\n        printf ( \"T\" );\n\n\n        for ( movement = 0; movement &lt; (*hPtr - *tPtr); movement++ )\n            printf ( \" \" );\n\n        printf ( \"H\" );\n    }\n\n    else\n    {\n        //printf ( \" *hptr &lt; *tptr \" );\n        for ( movement = 0; movement &lt; *hPtr; movement++)\n        {\n            printf ( \" \" );\n        }\n        printf ( \"H\" );\n        for (movement = 0; movement &lt; ( *tPtr - *hPtr ); movement++ )\n        {\n            printf ( \" \" );\n        }\n        printf ( \"T\" );\n    }\n    printf ( \"\\n\" );\n\n\n} // race print function, end.\n</code></pre>\n\n<p>[/code]</p>\n"}]