[{"tags": ["c"], "comments": [{"owner": {"reputation": 481, "user_id": 1103446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39de546f5756f41a40f5e59a621882be?s=128&d=identicon&r=PG", "display_name": "Shammi", "link": "https://stackoverflow.com/users/1103446/shammi"}, "edited": false, "score": 1, "creation_date": 1526513554, "post_id": 50381275, "comment_id": 87778746, "body": "Not sure what the signature for sgx_unseal_data is, but seems like you are passing in a char** as the 4th param. Usually these things take in a char* for the buffer and an int* for the size copied. Changing (uint8_t*)&amp;resecret to (uint8_t*)rescret should most likely fix it."}, {"owner": {"reputation": 2467, "user_id": 1716525, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Fn3LA.jpg?s=128&g=1", "display_name": "Roshan Mehta", "link": "https://stackoverflow.com/users/1716525/roshan-mehta"}, "reply_to_user": {"reputation": 481, "user_id": 1103446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39de546f5756f41a40f5e59a621882be?s=128&d=identicon&r=PG", "display_name": "Shammi", "link": "https://stackoverflow.com/users/1103446/shammi"}, "edited": false, "score": 0, "creation_date": 1526513866, "post_id": 50381275, "comment_id": 87778819, "body": "Correct. Solved :)"}], "answers": [{"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": true, "score": 0, "last_activity_date": 1526513462, "creation_date": 1526513462, "answer_id": 50381334, "question_id": 50381275, "link": "https://stackoverflow.com/questions/50381275/passing-char-array-to-function-to-get-the-value-of-update-char-array/50381334#50381334", "title": "passing char array to function to get the value of update char array", "body": "<p>The marked line seems odd:</p>\n\n<pre><code>ret = sgx_unseal_data(\n              (sgx_sealed_data_t*)sealed_data,\n              NULL,\n              NULL,\n              (uint8_t*)&amp;resecret,    // Probably shouldn't use address-of (&amp;) here?\n              (uint32_t*)&amp;resecret_size);\n</code></pre>\n\n<p>I believe the call should be:</p>\n\n<pre><code>ret = sgx_unseal_data(\n              (sgx_sealed_data_t*)sealed_data,\n              NULL,\n              NULL,\n              (uint8_t*)resecret,                  \n              (uint32_t*)&amp;resecret_size);\n</code></pre>\n"}], "owner": {"reputation": 2467, "user_id": 1716525, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Fn3LA.jpg?s=128&g=1", "display_name": "Roshan Mehta", "link": "https://stackoverflow.com/users/1716525/roshan-mehta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 50381334, "answer_count": 1, "score": 0, "last_activity_date": 1526513697, "creation_date": 1526513041, "last_edit_date": 1526513697, "question_id": 50381275, "link": "https://stackoverflow.com/questions/50381275/passing-char-array-to-function-to-get-the-value-of-update-char-array", "title": "passing char array to function to get the value of update char array", "body": "<pre><code>int get_alpha()\n{\n    std::string sealed_alpha_file = \"/home/roshan/thesis/osn_server/sealed_alpha\";\n\n    long fsize;\n    ocall_get_textsize(sealed_alpha_file.c_str(), &amp;fsize, 0);\n    unsigned char sealed_data[fsize];\n    size_t ocall_return;\n    ocall_load_file(&amp;ocall_return, sealed_alpha_file.c_str(), fsize, sealed_data, 0);\n\n      char resecret[12];\n      uint64_t resecret_size = sizeof(resecret);\n      sgx_status_t ret;\n      ret = sgx_unseal_data(\n              (sgx_sealed_data_t*)sealed_data,\n              NULL,\n              NULL,\n              (uint8_t*)&amp;resecret,\n              (uint32_t*)&amp;resecret_size);\n\n      if(ret != SGX_SUCCESS)\n      {\n          mbedtls_printf(\"Enclave: Unsealing sealed_alpha failed %#x\\n\", ret);\n          return -1;\n      }\n\n    mbedtls_printf(\"Enclave: Unsealing sealed_alpha success\");\n    mbedtls_printf(\"Enclave: After unsealing alpha number: %llu\\n\", *(char *)resecret);\n    return 0;\n}\n</code></pre>\n\n<p>I wanted to call the get_alpha() function from another function and get the value from the resecret char array.\nI tried to change the get_alpha() to get_alpha(char *resecret) and commented the char resecret[12]; in the get_alpha function and also made uint64_t resecret_size = sizeof(resecret); to uint64_t resecret_size = (12);. </p>\n\n<p>And call it like this from other function</p>\n\n<pre><code>char resecret[12];\nget_alpha(resecret);\n\nmbedtls_printf(\"Enclave: After unsealing alpha number: %llu\\n\", *(char *)resecret);\n</code></pre>\n\n<p>But I do not get the correct answer. It seems sgx_unseal_data fails.</p>\n\n<p>The signature of sgx_unseal_data:</p>\n\n<pre><code>sgx_status_t SGXAPI sgx_unseal_data(const sgx_sealed_data_t *p_sealed_data,\n    uint8_t *p_additional_MACtext,\n    uint32_t *p_additional_MACtext_length,\n    uint8_t *p_decrypted_text,\n    uint32_t *p_decrypted_text_length);\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "character"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1526509012, "post_id": 50380643, "comment_id": 87777534, "body": "Note that <code>sizeof(listOfFiles[i])</code> will give you the size of the <i>pointer</i> not the length of the string it points to, you want <a href=\"http://en.cppreference.com/w/c/string/byte/strlen\" rel=\"nofollow noreferrer\"><code>strlen</code></a> for that."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1526509073, "post_id": 50380643, "comment_id": 87777559, "body": "Also note that you have a <i>memory leak</i> in your <code>GetFileType</code> function. If you want to copy a string you need to use <a href=\"http://en.cppreference.com/w/c/string/byte/strcpy\" rel=\"nofollow noreferrer\"><code>strcpy</code></a>. Also don&#39;t forget that <code>char</code> strings in C are really called <b><i>null-terminated</b> byte strings</i>. That <i>null-terminator</i> needs space allocated for it as well."}, {"owner": {"reputation": 1952, "user_id": 1567269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7e5ef5c449437de2befaf4851a80d2a4?s=128&d=identicon&r=PG", "display_name": "trueCamelType", "link": "https://stackoverflow.com/users/1567269/truecameltype"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526512266, "post_id": 50380643, "comment_id": 87778473, "body": "Thanks for letting me know.  I fixed the <code>sizeof</code>, and I&#39;m looking into what you mean on <code>GetFileType</code>.  I&#39;ll handle the null-terminated byte string the way I handled it in GetFileData by adding the null-terminator.  I&#39;m not sure I see what you mean about needing <code>strcpy</code> though."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1526538179, "post_id": 50380643, "comment_id": 87784882, "body": "First you do <code>char *ret = malloc(size);</code>. That makes <code>ret</code> point to the memory you allocate. Then you do e.g. <code>ret = &quot;test&quot;;</code>. That makes <code>ret</code> point somewhere else, you lose the original pointer to the memory you allocated. And since the memory that <code>ret</code> is pointing to wasn&#39;t allocated by <code>malloc</code>, you can no longer pass the pointer to <code>free</code>."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1526539403, "last_edit_date": 1526539403, "creation_date": 1526538851, "answer_id": 50384806, "question_id": 50380643, "link": "https://stackoverflow.com/questions/50380643/how-can-i-store-an-array-in-a-md-array-and-return-that-array-from-function/50384806#50384806", "title": "How can I store an array in a MD array, and return that array from function?", "body": "<p>The problem isn't where you say it is, it is here instead:</p>\n\n<pre><code>char *allFileData;\nchar *tmpArray[32][32];\n\nallFileData = tmpArray;\n</code></pre>\n\n<p>The type of <code>tmpArray</code> is <code>char *[32][32]</code>. The type of <code>allFileData</code> is <code>char *</code>. The assignment is simply not valid.</p>\n\n<p>And there's one even worse thing happening: You returning <code>allFileData</code> which is pointing to the <em>local variable</em> <code>tmpArray</code>. The variable <code>tmpArray</code> will go out of scope once the function returns, and the pointer you return will become invalid immediately. Either pass the array in as an argument, or allocate it dynamically inside the function.</p>\n"}], "owner": {"reputation": 1952, "user_id": 1567269, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7e5ef5c449437de2befaf4851a80d2a4?s=128&d=identicon&r=PG", "display_name": "trueCamelType", "link": "https://stackoverflow.com/users/1567269/truecameltype"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 50384806, "answer_count": 1, "score": 1, "last_activity_date": 1526567307, "creation_date": 1526508771, "last_edit_date": 1526567307, "question_id": 50380643, "link": "https://stackoverflow.com/questions/50380643/how-can-i-store-an-array-in-a-md-array-and-return-that-array-from-function", "title": "How can I store an array in a MD array, and return that array from function?", "body": "<p>I have a method that takes in a list of files, and gets data about the files.  The format of those files is returned as two 1D arrays.  I want to combine those into a single 2D array.</p>\n\n<p>The files only return with a type array, and a data array.  </p>\n\n<p>Here is the method in question.  I'm successfully getting the data I need out of the files and into the 1D array, but when I try to add them to the 2D array, it runs (but gives a warning that char * and char *[][] aren't equivalent).  </p>\n\n<pre><code>char *ParseFiles(char *listOfFiles[32])\n{\n    char *allFileData;\n    char *tmpArray[32][32];\n\n    allFileData = tmpArray;\n\n    for(int i = 0; i &lt; listOfFiles[i]; i++)\n    {\n        int j = 0;\n        // Get the File Type\n        char *currentFileType = GetFileType(listOfFiles[i], strlen(listOfFiles[i]));\n\n        if(currentFileType)\n        {\n            // Warning char * and char *[][] are not equivalent.\n            tmpArray[i][j] = currentFileType;\n            printf(\"File %d is %s\\n\", i, currentFileType);\n            //printf(\"File %d is %s\\n\", i, &amp;tmpArray[i][j]);\n            //free(currentFileType);\n        }\n\n        //Get all File Data\n        // Warning char * and char *[][] are not equivalent.\n        char *currentFileData = GetFileData(listOfFiles[i]);\n\n        j = j + 1;\n        if(currentFileData)\n        {\n            tmpArray[i][j] = currentFileData;\n            printf(\"File Data:\\n%s\\n\", currentFileData);\n            //free(currentFileType);\n        }\n    }\n    return allFileData;\n}\n</code></pre>\n\n<p>When I try to output the <code>tmpArray[][]</code> values in the printf statements that are commented out, I get unexpected characters (unexpected to someone who is making a mistake) <code>?]p</code></p>\n\n<p>Is the problem based on the warning of the two char arrays not being the same type, or is it because I'm trying to insert the single dimensional array into a multi dimensional array incorrectly?</p>\n\n<p>The exact warning I am getting is <code>warning: incompatible pointer types assigning to 'char*' from 'char *[32][32]'</code></p>\n\n<hr>\n\n<p>Below are my other two methods, and my main:</p>\n\n<pre><code>char *GetFileType(char *filePath, int size)\n{\n    char *ret = malloc(size);\n\n    char currentLine[100];\n    FILE *file = fopen(filePath, \"r\");\n\n    while(fgets(currentLine, sizeof(currentLine), file) != NULL)\n    {\n        if(strstr(currentLine, \"test\"))\n        {\n            ret = \"test\";\n        }\n\n        else if(strstr(currentLine, \"production\"))\n        {\n            ret = \"production\";\n        }\n    }\n    if(!ret)\n    {\n        return NULL;\n    }\n    return ret;\n\n}\n\nchar *GetFileData(char *filePath)\n{\n\n    char *buffer = NULL;\n    size_t size = 0;\n\n    FILE *file = fopen(filePath, \"r\");\n\n    // Get the buffer size\n    fseek(file, 0, SEEK_END);\n    size = ftell(file);\n\n    // Reset the position of the stream\n    rewind(file);\n\n    buffer = malloc((size + 1) * sizeof(*buffer));\n\n    // Read the entire file into the buffer\n    fread(buffer, size, 1, file);\n\n    buffer[size] = '\\0';\n\n    return buffer;\n}\n\nint main (void)\n{\n    char *listOfFiles[32] = {\"file1.txt\", \"file2.txt\", \"file3.txt\"};\n\n    ParseFiles(listOfFiles);\n\n    printf(\"Press ENTER key to Continue\");\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "embedded", "memory-alignment", "struct-member-alignment"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526507838, "post_id": 50380464, "comment_id": 87777137, "body": "How do you check the size of <code>new_weld_status</code>? Do you perhaps check the size of the whole structure? Then this is a duplicate of <a href=\"http://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member\" title=\"why isnt sizeof for a struct equal to the sum of sizeof of each member\">stackoverflow.com/questions/119123/&hellip;</a>"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1526508198, "post_id": 50380464, "comment_id": 87777273, "body": "@Someprogrammerdude If I had to guess (which I guess I have to since we don&#39;t have <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> ), I&#39;d say OP is taking the sizeof a pointer, perhaps decayed from an array."}, {"owner": {"reputation": 1749, "user_id": 1243576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a35c1ecafd01db2337c25f59fdce4c5?s=128&d=identicon&r=PG", "display_name": "basak", "link": "https://stackoverflow.com/users/1243576/basak"}, "edited": false, "score": 1, "creation_date": 1526509102, "post_id": 50380464, "comment_id": 87777569, "body": "Try  _attribute__((aligned(4))) when listing your members."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1526525880, "post_id": 50380464, "comment_id": 87781084, "body": "Check out <a href=\"http://www.catb.org/esr/structure-packing/\" rel=\"nofollow noreferrer\">The Lost Art of C Structure Packing</a> for details on why this happens and how to avoid it."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1526545734, "post_id": 50380464, "comment_id": 87789024, "body": "No the array takes up 2 bytes on both systems. But on the 32 bit system you get padding inserted after the array. The solution is to not write code that depends on a certain memory layout of the struct. It is not obvious to me why this code would not be portable, unless you do stupid things with it like <code>memcpy(&amp;the_struct, something, 8)</code>, in which case the solution is to correct the code that does stupid things."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526559533, "post_id": 50380464, "comment_id": 87798014, "body": "@Lundin: Code that depends on a certain memory layout can be perfectly fine -- not only that, it may very well be the optimal solution in some cases. About <code>memcpy</code>, please note that it is legal to call it like that (and the easiest way to avoid strict aliasing issues)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 3, "creation_date": 1526560483, "post_id": 50380464, "comment_id": 87798707, "body": "@Acorn Using structs to achieve a certain memory layout is non-portable."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526561050, "post_id": 50380464, "comment_id": 87799123, "body": "@Lundin: OP has not asked for portable code -- quite the opposite."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 4, "creation_date": 1526512019, "post_id": 50380655, "comment_id": 87778396, "body": "<code>__attribute__((packed))</code> is <a href=\"https://www.google.com/search?q=attribute(packed)+sigbus\" rel=\"nofollow noreferrer\">a good way to wind up with code that doesn&#39;t run</a> on machines that actually have alignment restrictions on data.  Not every machine out there is x86-based, and given the machines here are likely 16- and 32-bit microcontrollers, I&#39;d venture that <code>__attribute__(packed)</code> is more likely than not to cause problems."}, {"owner": {"reputation": 39, "user_id": 9802013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a29fa02425aaac899ee22e26dc13294?s=128&d=identicon&r=PG&f=1", "display_name": "PinGNU", "link": "https://stackoverflow.com/users/9802013/pingnu"}, "edited": false, "score": 0, "creation_date": 1526543557, "post_id": 50380655, "comment_id": 87787778, "body": "I am getting &#39;packed&#39; attribute ignored [-Wattributes] I am assuming with HiTec tricore gcc this is not available the 32 and 16 bit are both infinion endian is the same."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1526548424, "post_id": 50380655, "comment_id": 87790819, "body": "@AndrewHenle: I disagree. The specific question was about making the compiler pack the struct into the minimum amount of memory possible, which is the point of this attribute, not about portability or general good practices. <i>Precisely</i> because this is a question on embedded platforms, you are likely to be able to assume specific endianness/alignment and many other details, in order to save cycles, drain less battery, code size, etc."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 39, "user_id": 9802013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a29fa02425aaac899ee22e26dc13294?s=128&d=identicon&r=PG&f=1", "display_name": "PinGNU", "link": "https://stackoverflow.com/users/9802013/pingnu"}, "edited": false, "score": 0, "creation_date": 1526548787, "post_id": 50380655, "comment_id": 87791080, "body": "@PinGNU: What is the version of the compiler? At least since <a href=\"https://gcc.gnu.org/onlinedocs/gcc-2.95.3/gcc_4.html#SEC91\" rel=\"nofollow noreferrer\">2.95.3 <code>packed</code> and <code>aligned</code> are supported</a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1526557528, "post_id": 50380655, "comment_id": 87796745, "body": "This does not answer the question. Why are you on about gcc? The OP is not using gcc but Keil."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526557598, "post_id": 50380655, "comment_id": 87796785, "body": "@Lundin: I am confused -- what do you mean? OP asked about gcc: &quot;is there a switch I can use for <b>gcc</b> that makes the chars fits/aligns in 2 bytes?&quot;"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1526560349, "post_id": 50380655, "comment_id": 87798599, "body": "Yeah and how exactly is <code>__attribute__</code> from gcc portable to Keil?"}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526561131, "post_id": 50380655, "comment_id": 87799187, "body": "@Lundin: Why does it matter if it is portable? I still don&#39;t follow your argument. OP is only using Keil for the 16-bit arch, not the 32-bit one; and is requesting explicitly a solution for gcc to make the struct match the layout of the compiler for the 16-bit arch. If he/she needs a single codebase, he/she can simply <code>#ifdef</code> a <code>#define PACKED ...</code> which is only used when compiling for the 32-bit arch."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1526574790, "post_id": 50380655, "comment_id": 87808638, "body": "Packing should work on all platforms supporteing it. Nevertheless it can result in catastrophic performance, because not aligned members have to be accessed by multiple instructions which assemble/split the parts for each access to the data. The correct way is to use proper marshalling at a single point and otherwise use the natural alignment (i.e. avoid packing). Packing also does not solve endianess and encoding problems."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1526578229, "post_id": 50380655, "comment_id": 87810331, "body": "@Olaf: Indeed, it may or may not result in bad performance; and the loss of performance may or may not matter for a particular system. We simply don&#39;t know enough to decide. Anyway, the question was about how to force the compiler to pack a struct, nothing else. Endianness and encoding have nothing to do with this, either."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1526581349, "post_id": 50380655, "comment_id": 87811990, "body": "@Acorn: The recommended practice is not to use premat4eure optimisations. And the question was an XY problem. If the approach used is generally bad, it is very well the correct way to point that out, unless OPpoints out the correct way does not work. And yes, endianess and encoding are very well relevant. It is a generally bad protocol design to rely on internal details. And it almost always backfires in professional projects."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1526582465, "post_id": 50380655, "comment_id": 87812590, "body": "@Olaf: As for endianness, encoding, etc. the question only states &quot;<i>used to construct messages to a control board</i>&quot; -- in my opinion, that is nowhere near enough detail to know the domain of the problem. This might very well be an XY problem, but you are assuming things in order to reply to me, instead of asking OP about them."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1526582523, "post_id": 50380655, "comment_id": 87812620, "body": "@Olaf: As for &quot;<i>bad protocol design to rely on internal details</i>&quot;: protocol specifications don&#39;t rely on &quot;internal details&quot;, typically they state how they work, independent of any given architecture. What you probably mean is that <b>portable code</b> implementing a protocol shouldn&#39;t rely on architecture details as much as possible -- which is a good principle, but again, not that relevant for this question, IMO."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1526582675, "post_id": 50380655, "comment_id": 87812717, "body": "@Acorn: No, I exactly meant a protocol should not rely on details of its implementation. That#s good practice by every reasonable and responsible protocol designer. Portable code is something different and on bare-metal often not completely achievable at the low level. What was it about &quot;putting words&quot; somewhere? Well, you have the last word(s)"}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1526583570, "post_id": 50380655, "comment_id": 87813237, "body": "@Olaf: I am sorry, but you are not making any sense. By definition, a protocol cannot depend on details of &quot;its implementation&quot; because any given implementation (there may be several) is written according to the protocol specification. Whether an implementation of a protocol is portable or not is orthogonal to this, and precisely because of that, I am saying this discussion is off-topic."}], "tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": false, "score": 1, "last_activity_date": 1526508824, "creation_date": 1526508824, "answer_id": 50380655, "question_id": 50380464, "link": "https://stackoverflow.com/questions/50380464/struct-member-alignment-different-sizeof-using-16-bit-and-32-bit-compiler/50380655#50380655", "title": "Struct member alignment -- different sizeof using 16-bit and 32-bit compiler", "body": "<p>For <code>gcc</code> and other compilers, you can use <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Common-Type-Attributes.html\" rel=\"nofollow noreferrer\"><code>__attribute__((packed))</code></a>:</p>\n\n<blockquote>\n  <p>This attribute, attached to struct or union type definition, specifies that each member (other than zero-width bit-fields) of the structure or union is placed to minimize the memory required.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1526574598, "post_id": 50380833, "comment_id": 87808524, "body": "Just that: never use home-brew fixed width types. The standard provides <code>stdint.h</code> for good reasons - use it."}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": false, "score": 4, "last_activity_date": 1526509950, "creation_date": 1526509950, "answer_id": 50380833, "question_id": 50380464, "link": "https://stackoverflow.com/questions/50380464/struct-member-alignment-different-sizeof-using-16-bit-and-32-bit-compiler/50380833#50380833", "title": "Struct member alignment -- different sizeof using 16-bit and 32-bit compiler", "body": "<p>Union wouldn't change the members alignment inside a struct. You are interested in padding. The compiler may insert any number of bytes/bits between struct members to satisfy alignment requiremens. On gcc compatible compilers you may use <code>__attribute__((__packed__))</code> as Acorn already pointed out, but this does not take care of endianess. The most compatible version between platforms (including platforms with different alignment and different endianess) would be to use (sadly!) get/set functions that look like this:</p>\n\n<pre><code>typedef struct {\n    unsigned char data[2+4+2];\n} NEW_PULSE_DATA;\n\nunsigned char NEW_PULSE_DATA_get_new_weld_status(NEW_PULSE_DATA *t, size_t idx) {\n    return t-&gt;data[idx];\n}\n\nvoid NEW_PULSE_DATA_set_new_weld_status(NEW_PULSE_DATA *t, size_t idx, unsigned char value) {\n    t[idx] = value;\n}\n\nUINT32 NEW_PULSE_DATA_get_new_weld_count(NEW_PULSE_DATA *t) {\n    return (UINT32)t-&gt;data[2]&lt;&lt;24\n        | (UINT32)t-&gt;data[3]&lt;&lt;16 \n        | (UINT32)t-&gt;data[4]&lt;&lt;8 \n        | (UINT32)t-&gt;data[5];\n}\n\nvoid NEW_PULSE_DATA_set_new_weld_count(NEW_PULSE_DATA *t, UINT32 val) {\n    t-&gt;data[2] = val&gt;&gt;24;\n    t-&gt;data[3] = val&gt;&gt;16;\n    t-&gt;data[4] = val&gt;&gt;8;\n    t-&gt;data[5] = val;\n}\n\nUINT16 NEW_PULSE_DATA_get_new_weld_fail_count(NEW_PULSE_DATA *t) {\n    return (UINT16)t-&gt;data[6]&lt;&lt;8\n        | (UINT16)t-&gt;data[7];\n}\n\nvoid NEW_PULSE_DATA_set_new_weld_fail_count(NEW_PULSE_DATA *t, UINT16 val) {\n    t-&gt;data[6] = val&gt;&gt;8;\n    t-&gt;data[7] = val;\n}\n</code></pre>\n\n<p>This is the only \"good\" way of being 100% sure, that NEW_PULSE_DATA looks exactly the same on different platforms (at least on platforms with the same number of bits per char/<a href=\"http://en.cppreference.com/w/c/types/limits\" rel=\"nofollow noreferrer\">CHAR_BIT</a> value). However <code>sizeof(NEW_PULSE_DATA)</code> may be still different between platforms, because compiler may insert padding on the end of the struct (after the last member of the structure). So you may want to change <code>NEW_PULSE_DATA</code> type to be just an array of bytes:</p>\n\n<pre><code>typedef unsigned char NEW_PULSE_DATA[2+4+2];\n\nunsigned char NEW_PULSE_DATA_get_new_weld_status(NEW_PULSE_DATA t, size_t idx) {\n    return t[idx];\n}\n\nunsigned char NEW_PULSE_DATA_set_new_weld_status(NEW_PULSE_DATA t, size_t idx, unsigned char value) {\n    t[idx] = value;\n}\n\nUINT32 NEW_PULSE_DATA_get_new_weld_count(NEW_PULSE_DATA t) {\n    return (UINT32)t[2]&lt;&lt;24\n        | (UINT32)t[3]&lt;&lt;16 \n        | (UINT32)t[4]&lt;&lt;8 \n        | (UINT32)t[5];\n}\n\nvoid NEW_PULSE_DATA_set_new_weld_count(NEW_PULSE_DATA t, UINT32 val) {\n    t[2] = val&gt;&gt;24;\n    t[3] = val&gt;&gt;16;\n    t[4] = val&gt;&gt;8;\n    t[5] = val;\n}\n\nUINT16 NEW_PULSE_DATA_get_new_weld_fail_count(NEW_PULSE_DATA t) {\n    return (UINT16)t[6]&lt;&lt;8\n        | (UINT16)t[7];\n}\n\nvoid NEW_PULSE_DATA_set_new_weld_fail_count(NEW_PULSE_DATA t, UINT16 val) \n{\n    t[6] = val&gt;&gt;8;\n    t[7] = val;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 9802013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a29fa02425aaac899ee22e26dc13294?s=128&d=identicon&r=PG&f=1", "display_name": "PinGNU", "link": "https://stackoverflow.com/users/9802013/pingnu"}, "edited": false, "score": 1, "creation_date": 1526544749, "post_id": 50381074, "comment_id": 87788461, "body": "I can not change either method the receiving WinCE machine expects structure in order so all the 16bit machines would need new code but I am going to rewrite all the code and switch to Win embedded arm so will keep this post thanks"}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 1, "creation_date": 1526549303, "post_id": 50381074, "comment_id": 87791445, "body": "While these are good points to know about, the question is not about reordering the struct or marshalling."}, {"owner": {"reputation": 2031, "user_id": 2539867, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/3gog5.png?s=128&g=1", "display_name": "Jubatian", "link": "https://stackoverflow.com/users/2539867/jubatian"}, "reply_to_user": {"reputation": 39, "user_id": 9802013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a29fa02425aaac899ee22e26dc13294?s=128&d=identicon&r=PG&f=1", "display_name": "PinGNU", "link": "https://stackoverflow.com/users/9802013/pingnu"}, "edited": false, "score": 1, "creation_date": 1526555800, "post_id": 50381074, "comment_id": 87795593, "body": "@PinGNU I guess that reveiving machine is a third one in the scenario (compared to the C167 and the TriCore mentioned in the question). You don&#39;t need to do anything with that: the binary format used on the communications protocol is there, settled. You only need to get the C167 &amp; the TriCore to adhere to it by appropriate code which generates the right binary stream on both. To solve this problem, serializing &amp; deserializing is a proper solution (on the C167 / TriCore end)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 3, "creation_date": 1526557412, "post_id": 50381074, "comment_id": 87796667, "body": "@Acorn No the question is about &quot;the array takes up 4 bytes&quot; which is first of all incorrect, and second the padding should not matter. So the actual problem is the OP doing something icky with the struct, such as sending the whole struct as a data protocol, which comments indicate. And which is always non-portable bad practice. The correct solution is to serialize the struct."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526558196, "post_id": 50381074, "comment_id": 87797190, "body": "@Lundin: No, sorry, the question is literally: &quot;<i>is there a switch I can use for gcc that makes the chars fits/aligns in 2 bytes?</i>&quot;. Portability, endianness, unaligned accesses and other issues are related and important for many projects -- but do not answer the question at hand. On top of that, OP might very well be in a very tight environment where it is needed to minimize code size and/or cycles; and therefore extra handling may not be optimal."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 1, "creation_date": 1526574504, "post_id": 50381074, "comment_id": 87808467, "body": "@Acorn: There is no necessity serialisation uses a single instruction more than such bad code. In the worst case, provide a set of serialisation functions hand-optimised. But that would be the very last step if there <b>truely</b> is a performance/space issue for a particular platform. Until then, leave optimisations to the compiler and write clean, maintainable code."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1526577579, "post_id": 50381074, "comment_id": 87810052, "body": "@Olaf: Again, all that is orthogonal to the question. Also, please don&#39;t put words in my mouth. I never said nor implied that OP should not write maintainable code; nor that OP should optimize prematurely the code."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1526583134, "post_id": 50381074, "comment_id": 87813000, "body": "@Olaf: Excuse me? Please quote where I have state anything like that. About the rest: do you think we should avoid answering questions properly because someone <i>might</i> misunderstand something? If you believe SO (or SE) is meant for answers to beginners exclusively, I am sorry, but you are deeply mistaken."}], "tags": [], "owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "is_accepted": false, "score": 6, "last_activity_date": 1526513263, "last_edit_date": 1526513263, "creation_date": 1526511469, "answer_id": 50381074, "question_id": 50380464, "link": "https://stackoverflow.com/questions/50380464/struct-member-alignment-different-sizeof-using-16-bit-and-32-bit-compiler/50381074#50381074", "title": "Struct member alignment -- different sizeof using 16-bit and 32-bit compiler", "body": "<p>Note that your structure layout creates the problem on a 32-bit system. Many (most) 32-bit CPU architectures require 4-byte alignment for 32-bit words, thus the new_weld_count requires 'padding' to provide proper memory alignment.</p>\n\n<pre><code>typedef struct\n{\n    unsigned char   new_weld_status[2];   //a\n    //char padding_1[2]; //hidden padding\n    UINT32  new_weld_count;               //a\n    UINT16  new_weld_fail_count;          //a\n} NEW_PULSE_DATA;\n</code></pre>\n\n<p>The following redefinition of your structure completely avoids the problem.</p>\n\n<pre><code>typedef struct\n{\n    UINT32  new_weld_count;               //a\n    UINT16  new_weld_fail_count;          //a\n    unsigned char   new_weld_status[2];   //a\n} NEW_PULSE_DATA;\nNEW_PULSE_DATA ex_PULSE_DATA;\n</code></pre>\n\n<p>However, the above approach is not the approach typically to transport struct(ured) data across networks/over message transports. A more common and much better approach is to use a serialization/deserialization layer (aka marshalling) to place the structures into 'over the wire' formats. Your current approach is conflating the in-memory storage and addressing with the communication format.</p>\n\n<pre><code>//you need to decide on the size of wire format data,\n//Both ends of the protocol must agree on these sizes,\n#define new_weld_count_SZ sizeof(ex_PULSE_DATA.new_weld_count)\n#define new_weld_fail_count_SZ sizeof(ex_PULSE_DATA.new_weld_fail_count)\n#define new_weld_status_SZ sizeof(ex_PULSE_DATA.new_weld_status)\n\n//Then you define a network/message format\ntypedef struct\n{\n    byte new_weld_count[new_weld_count_SZ];\n    byte new_weld_fail_count[new_weld_count_SZ];\n    byte new_weld_status[new_weld_count_SZ];\n} MESSAGE_FORMAT_PULSE_DATA;\n</code></pre>\n\n<p>Then you would implement serialization &amp; deserialization functions on both ends of the transport. The following example is simplistic, but conveys the gist of what you need.</p>\n\n<pre><code>byte*\nPULSE_DATA_serialize( MESSAGE_FORMAT_PULSE_DATA* msg, NEW_PULSE_DATA* data )\n{\n    memcpy(&amp;(msg-&gt;new_weld_count), data-&gt;new_weld_count, new_weld_count_SZ);\n    memcpy(&amp;(msg-&gt;new_weld_fail_count), data-&gt;new_weld_fail_count, new_weld_fail_count_SZ);\n    memcpy(&amp;(msg-&gt;new_weld_status), data-&gt;new_weld_status, new_weld_status_SZ);\n    return msg;\n}\n\nNEW_PULSE_DATA*\nPULSE_DATA_deserialize( NEW_PULSE_DATA* data, MESSAGE_FORMAT_PULSE_DATA* msg )\n{\n    memcpy(data-&gt;new_weld_count, &amp;(msg-&gt;new_weld_count), new_weld_count_SZ);\n    memcpy(data-&gt;new_weld_fail_count, &amp;(msg-&gt;new_weld_fail_count), new_weld_fail_count_SZ);\n    memcpy(data-&gt;new_weld_status, &amp;(msg-&gt;new_weld_status), new_weld_status_SZ);\n    return msg;\n}\n</code></pre>\n\n<p>Note that I have omitted the obligatory network byte order conversions, because I assume your have already worked out your byte order issues between the two cpu domains. If you have not considered byte-order (big-endian vs. little-endian), then you need to address that issue as well.</p>\n\n<p>When you send a message, the sender does the following,</p>\n\n<pre><code>//you need this declared &amp; assigned somewhere\nNEW_PULSE_DATA data;\n//You need space for your message\nMESSAGE_FORMAT_PULSE_DATA msg;\nresult = send(PULSE_DATA_deserialize( &amp;data, &amp;msg ));\n</code></pre>\n\n<p>When you receive a message, the recipient does the following,</p>\n\n<pre><code>//recipient needs this declared somewhere\nNEW_PULSE_DATA data;\n//Need buffer to store received data\nMESSAGE_FORMAT_PULSE_DATA msg;\nresult = receive(&amp;msg,sizeof(msg));\n//appropriate receipt checking here...\nPULSE_DATA_deserialize( &amp;data, &amp;msg );\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 9802013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a29fa02425aaac899ee22e26dc13294?s=128&d=identicon&r=PG&f=1", "display_name": "PinGNU", "link": "https://stackoverflow.com/users/9802013/pingnu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1049, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1526524243, "creation_date": 1526507707, "last_edit_date": 1526524243, "question_id": 50380464, "link": "https://stackoverflow.com/questions/50380464/struct-member-alignment-different-sizeof-using-16-bit-and-32-bit-compiler", "title": "Struct member alignment -- different sizeof using 16-bit and 32-bit compiler", "body": "<p>I have a structure used to contruct messages to a control board I need to maintain software compatibility between a C167 16-bit Keil compiler and a 32-bit Tricore gcc compiler.</p>\n\n<pre><code>typedef struct\n{\n    unsigned char new_weld_status[2];\n    UINT32 new_weld_count;\n    UINT16 new_weld_fail_count;\n} NEW_PULSE_DATA;\n</code></pre>\n\n<p>The array <code>new_weld_status[2]</code> takes up 2 bytes on the 16-bit compiler but 4 bytes on the 32-bit compiler. I was thinking of replacing all the <code>new_weld_status[2]</code> with a union when compiling with gcc. But is there a switch I can use for gcc that makes the chars fits/aligns in 2 bytes?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "arrays", "pointers", "misra"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1526506723, "post_id": 50380197, "comment_id": 87776760, "body": "Please extract a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, as per site guidelines."}, {"owner": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1526512947, "post_id": 50380197, "comment_id": 87778616, "body": "I have made a minimal version now."}], "answers": [{"comments": [{"owner": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "edited": false, "score": 0, "creation_date": 1526513119, "post_id": 50380682, "comment_id": 87778648, "body": "The rule says: &quot;A pointer to an array is potentially used outside the array bounds.&quot;"}, {"owner": {"reputation": 2168, "user_id": 126416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e5d82305b8c36003b65ea6d6b2de39a0?s=128&d=identicon&r=PG", "display_name": "Fahad Sadah", "link": "https://stackoverflow.com/users/126416/fahad-sadah"}, "reply_to_user": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "edited": false, "score": 0, "creation_date": 1526513634, "post_id": 50380682, "comment_id": 87778767, "body": "It is impossible for calib[0] to be outside the bounds of calib"}, {"owner": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "edited": false, "score": 0, "creation_date": 1526515109, "post_id": 50380682, "comment_id": 87779086, "body": "I see it is a problem to check existing code, because there are many more warnings. Here the checker has obviously a bug, which took already much time to find. How many other warnings have to be checked, I dont&#39;t know."}], "tags": [], "owner": {"reputation": 2168, "user_id": 126416, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e5d82305b8c36003b65ea6d6b2de39a0?s=128&d=identicon&r=PG", "display_name": "Fahad Sadah", "link": "https://stackoverflow.com/users/126416/fahad-sadah"}, "is_accepted": false, "score": 1, "last_activity_date": 1526508961, "creation_date": 1526508961, "answer_id": 50380682, "question_id": 50380197, "link": "https://stackoverflow.com/questions/50380197/pointer-and-index-in-c-what-is-wrong/50380682#50380682", "title": "Pointer and Index in C - What is wrong?", "body": "<p>The code is safe - the pointer will always be to a signalOrig, as long as AWISIL_MAX_CALIB_PAIRS is greater than zero. Without knowing the text of MISRA rule 18.1c, I can't tell you whether it complies however.</p>\n\n<p>The static checker can't verify compliance with this programmatically. The message is only a warning.</p>\n"}, {"comments": [{"owner": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "edited": false, "score": 0, "creation_date": 1526566338, "post_id": 50385853, "comment_id": 87802958, "body": "I have forwarded the bug to IAR and they confirmed it. It will be fixed in  EWARM version 8.30.1"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1526542679, "creation_date": 1526542679, "answer_id": 50385853, "question_id": 50380197, "link": "https://stackoverflow.com/questions/50380197/pointer-and-index-in-c-what-is-wrong/50385853#50385853", "title": "Pointer and Index in C - What is wrong?", "body": "<p>MISRA-C:2012 18.1 is merely a fundamental one saying that you should never access an array out-of-bounds, or do pointer arithmetic beyond the pointed-at array.</p>\n\n<p>You code does not do this, unless the tool managed to find something in the calling code such as an uninitialized pointer - we can't tell from the code posted.</p>\n\n<p>If the parameter pointed at is definitely an allocated <code>SS</code> struct, then the warning is a false positive. <code>sensorConf</code> is definitely not an array pointer. It does indeed seem that the IAR MISRA checker is buggy.</p>\n"}], "owner": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1526566538, "creation_date": 1526506263, "last_edit_date": 1526566538, "question_id": 50380197, "link": "https://stackoverflow.com/questions/50380197/pointer-and-index-in-c-what-is-wrong", "title": "Pointer and Index in C - What is wrong?", "body": "<p>Update: I got the confirmation that the behaviour is due to a bug in the code checker (see comment to answer #2)</p>\n\n<p>I am trying out a static Code checker and it complains:</p>\n\n<p>Array pointer `sensorConf' is accessed with index [8,8] which may be out of array bounds [0,UNKNOWN]    MISRAC2012-Rule-18.1_d  </p>\n\n<p>The Code is:</p>\n\n<pre><code>typedef struct\n{\n    int16_t signalOrig;\n} TT;\n\ntypedef struct\n{\n   int iii; // &lt;-- see below: int16_t iii would work without warning!\n   uint16_t numCalibPairs; \n  TT calib[5];\n} SS;\n\nvoid Test(const SS* sensorConf);\n\nvoid Test(const SS* sensorConf)\n{\n  const int16_t f = sensorConf-&gt;calib[0].signalOrig;\n  }\n</code></pre>\n\n<p>I had asked:\nWhy is it saying \"Array pointer\"? Why does it think that the Index is [8,8]? Is it just a problem of the code checker or is there a problem with my code?</p>\n\n<p>Edit:\nThe Code checker (C-STAT) gives not only one but 3 rules which all have the meaning that there is an Access out of bounds of an Array.\nNow, if I remove the first or second integer in struct SS the warning disappears. It also disappears if I Change \"iii\" from int (32bit, ARM cortex M4) to int16_t. The warning does not appear if there are only 4 Bytes before the Array in struct SS. Looks like a bug in the checker?</p>\n"}, {"tags": ["c", "arrays", "loops", "math"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1526506270, "post_id": 50380087, "comment_id": 87776586, "body": "Two problems: You&#39;re not using <code>scanf</code> correctly, it needs a <i>pointer</i> to where to store what it reads. And second, you don&#39;t use <code>scanf</code> correctly, as <code>&quot;%c&quot;</code> will read <i>all</i> input, including spaces and newlines (and newlines there will be if you end each input with a press of the <code>Enter</code> key)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526506351, "post_id": 50380087, "comment_id": 87776617, "body": "Oh and you don&#39;t use your loops correctly either. You seem to be wanting the <code>for</code> loop, but it&#39;s not quite correct for that either. All in all it seems you&#39;re kind of guessing about the syntax and usage of the language, which is never a good way to learn. Either get a book, <i>any</i> book really, or take a few classes."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526506466, "post_id": 50380087, "comment_id": 87776651, "body": "Lastly, about that reading of character, if you want numbers why don&#39;t <i>read</i> numbers? Using e.g. <code>&quot;%1d&quot;</code> and read into an <code>int</code> will solve your problem of conversion, as well as solve one of the problem of your <code>scanf</code> usage (since that format will skip leading white-space)."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1526507186, "post_id": 50380087, "comment_id": 87776920, "body": "Note that an array of chars can be read at once using the format <code>&quot;%s&quot;</code>."}, {"owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526507242, "post_id": 50380087, "comment_id": 87776934, "body": "@Someprogrammerdude I think you would want to avoid reading as numbers (although that would be great) anything with more than about 10 digits is going to overflow and hes going for 20..."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "edited": false, "score": 0, "creation_date": 1526507378, "post_id": 50380087, "comment_id": 87776979, "body": "@samuelnj Reading the numbers digit by digit into an array (of <code>int</code> values) should not be a problem."}, {"owner": {"reputation": 60, "user_id": 5060408, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UNfRt-u19Ss/AAAAAAAAAAI/AAAAAAAADWo/WUSYDBkX6Bw/photo.jpg?sz=128", "display_name": "arun k", "link": "https://stackoverflow.com/users/5060408/arun-k"}, "edited": false, "score": 0, "creation_date": 1526507697, "post_id": 50380087, "comment_id": 87777094, "body": "what if the char size is more than integer&#39;s max limit? How should the program behave in that case?"}, {"owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526508304, "post_id": 50380087, "comment_id": 87777314, "body": "@Someprogrammerdude makes sense, thought you were suggesting readying the entire thing"}, {"owner": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526509013, "post_id": 50380087, "comment_id": 87777535, "body": "@someprogrammerdude Do you have an example of the coding you are talking about? As I said I am fairly new to coding. I am currently taking a course online and have the course book however I cannot find any examples of this type of question in the book. I appreciate all of your comments and I will try to fix the mistakes you pointed out."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526510094, "post_id": 50380765, "comment_id": 87777862, "body": "So after I implement the coding you just posted I have find a way to change the array elements into one big integer. Do you have any suggestions on how to do this as well as how to add them. Sorry for all of the questions but I have been working on this code for a few days and can&#39;t seem to advance with my coding."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526510356, "post_id": 50380765, "comment_id": 87777923, "body": "@ayetman96 Does your pen-and-paper algorithm require it to be one big number? Or does it work on the single digits? If it&#39;s for single digits, why not <i>keep</i> it as single digits? Otherwise you have to use a <i>bignum library</i> for the numbers, and then as a separate step separate out the digits once again (since no addition algorithm works on whole numbers)."}, {"owner": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526510632, "post_id": 50380765, "comment_id": 87778005, "body": "The question proposed by my professor says convert the individual array elements to a single integer to be added with the other single integer. I am unsure how I perform this step as well as the addition. I have tried simple &quot;1+1&quot; but this doesn&#39;t work for this since they are stored in an array."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526538355, "post_id": 50380765, "comment_id": 87784974, "body": "@ayetman96 If you want to be able to handle 20-digit (or larger) numbers then there is no standard type that can do that."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1526509478, "creation_date": 1526509478, "answer_id": 50380765, "question_id": 50380087, "link": "https://stackoverflow.com/questions/50380087/add-an-array-of-integers-as-a-whole-number-in-c/50380765#50380765", "title": "Add an array of integers as a whole number in C", "body": "<p>Simple example showing how to read the digits, one by one, directly as integers:</p>\n\n<pre><code>int max_1;\nprintf(\"\\nEnter the size of the first integer you wish to add:\\n\");\nscanf(\"%d\", &amp;max_1);\n\nint number_1[max_1];  // Use variable-length array\n\nprintf(\"\\nEnter the first integer one number at a time seperated by spaces:\\n\");\nfor (int i = 0; i &lt; max_1; ++i)\n{\n    scanf_s(\"%1d\", &amp;number_1[i]);\n}\n</code></pre>\n\n<p>After this, each element in the array <code>number_1</code> is a single-digit <code>int</code> value. Most significant digit at index <code>0</code>, least significant digit at index <code>max_1 - 1</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526509478, "creation_date": 1526505835, "question_id": 50380087, "link": "https://stackoverflow.com/questions/50380087/add-an-array-of-integers-as-a-whole-number-in-c", "title": "Add an array of integers as a whole number in C", "body": "<p>I have to write a program that stores a whole number one digit as a time in an array. For example 1234 is a[0] 1, a[1] 2, a[2] 3, a[3] 4. The numbers will be originally stored as char so I need to convert them into type int. The goal is to take 2 positive integers that are 20 or fewer digits in length and output the sum of the numbers. </p>\n\n<p>I must use the paper-and-pencil addition algorithm. The solution must be stored in an array of size 20 and then written on screen. If the output is bigger than an array of size 20 then no output should be given and the screen should display \"Integer Overflow.\"</p>\n\n<p>So far I have this coding completed:</p>\n\n<pre><code>int max;\nint max_1;\nchar number_1[100];\nint a;\nint max_2;\nchar number_2[100];\nint b;\n\n\nprintf( \"\\nEnter the total number of digits you wish to display:\\n\");\nscanf_s( \"%d\", &amp;max);\n\nprintf(\"\\nEnter the size of the first integer you wish to add:\\n\");\nscanf(\"%d\", &amp;max_1);\nprintf(\"\\nEnter the first integer one number at a time seperated by spaces:\\n\");\nwhile (a = 0, a &lt; max_1, ++a)\n{\n    scanf_s(\"%c\", number_1[a]);\n}\n\nprintf(\"\\nEnter the size of the second integer you wish to add:\\n\");\nscanf(\"%d\", &amp;max_2);\nprintf(\"\\nEnter the second integer one number at a time seperated by spaces:\\n\");\nwhile (b = 0, b &lt; max_2, ++b)\n{\n    scanf_s(\"%c\", number_2[b]);\n}\n    return 0;\n</code></pre>\n\n<p>I cannot seem to figure out how to convert the numbers that are input into actual integer form since they are all stored separately in the array. Also I am unsure how I would go about converting the integer back into an array of size 20 and how I would figure out if the output would be of size 20 or greater.</p>\n\n<p>I apologize for my long question. I am new to coding and am not overly good with reasoning things out. I am sure there is a simple solution for this however I cannot think of it. Any comments, solutions or suggestions would help.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1526505948, "post_id": 50380084, "comment_id": 87776459, "body": "This is almost certainly due to <i>word alignment,</i> which is going to be different between your two structs because the order of the members is different."}, {"owner": {"reputation": 27, "user_id": 5838965, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Oko8qPxiNvM/AAAAAAAAAAI/AAAAAAAAAKs/tzsbIvKowSQ/photo.jpg?sz=128", "display_name": "Yousif Dafalla", "link": "https://stackoverflow.com/users/5838965/yousif-dafalla"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1526506083, "post_id": 50380084, "comment_id": 87776512, "body": "Is there a specific rule of how the alignment is done."}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 1, "creation_date": 1526506113, "post_id": 50380084, "comment_id": 87776522, "body": "<a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Data_structure_alignment</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526506597, "post_id": 50380084, "comment_id": 87776705, "body": "Also note that the correct <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\"><code>printf</code></a> format for printing a <code>size_t</code> (which is what <code>sizeof</code> gives you) is <code>&quot;%zu&quot;</code> for decimal output."}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526506701, "post_id": 50380084, "comment_id": 87776751, "body": "@Someprogrammerdude: I see the <code>u</code> in that chart, but what does the <code>z</code> do?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1526506904, "post_id": 50380084, "comment_id": 87776823, "body": "@RobertHarvey It&#39;s the modifier for <code>size_t</code> argument types. See to the right in the table."}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526507181, "post_id": 50380084, "comment_id": 87776918, "body": "@Someprogrammerdude: Ah, it&#39;s a <i>length modifier.</i> (in the column headings of that table, not the row headings)"}], "answers": [{"tags": [], "owner": {"reputation": 1749, "user_id": 1243576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a35c1ecafd01db2337c25f59fdce4c5?s=128&d=identicon&r=PG", "display_name": "basak", "link": "https://stackoverflow.com/users/1243576/basak"}, "is_accepted": false, "score": 1, "last_activity_date": 1526506434, "creation_date": 1526506434, "answer_id": 50380227, "question_id": 50380084, "link": "https://stackoverflow.com/questions/50380084/struct-sizes-conflict/50380227#50380227", "title": "Struct Sizes conflict", "body": "<p>Very simply putting, the processors align the variables based on the word size. The integers in your case are aligned at 4 byte boundaries, so when you interlace your characters and integers, 3 bytes after every character is not utilized. \nRefer to: <a href=\"https://www.geeksforgeeks.org/structure-member-alignment-padding-and-data-packing/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/structure-member-alignment-padding-and-data-packing/</a></p>\n"}], "owner": {"reputation": 27, "user_id": 5838965, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Oko8qPxiNvM/AAAAAAAAAAI/AAAAAAAAAKs/tzsbIvKowSQ/photo.jpg?sz=128", "display_name": "Yousif Dafalla", "link": "https://stackoverflow.com/users/5838965/yousif-dafalla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "closed_date": 1526506528, "answer_count": 1, "score": 0, "last_activity_date": 1526506434, "creation_date": 1526505816, "question_id": 50380084, "link": "https://stackoverflow.com/questions/50380084/struct-sizes-conflict", "closed_reason": "Duplicate", "title": "Struct Sizes conflict", "body": "<p>I am creating two structs in C that have the same number of variables: 3 integers and 3 chars.\nWhen i look at the size of an instance of each of the structs using the sizeof() operator i get two different values. I wonder Why is this happening, here is my code: I tried rearranging the variable with the same result.</p>\n\n<pre><code>typedef struct a\n{\nint x;\nchar a;\nint y;\nchar b;\nint z;\nchar c;\n}s1;\n\ntypedef struct b\n{\nint x;\nint y;\nint z;\nchar a;\nchar b;\nchar c;\n}s2;\n\nint main()\n{\nprintf(\"%d %d\\r\\n\", sizeof (s1), sizeof (s2));\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1526506566, "post_id": 50380082, "comment_id": 87776697, "body": "instead of showing us what works with a VLA, show us what doesn&#39;t work when you try to use <code>malloc</code>."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1526507990, "post_id": 50380082, "comment_id": 87777195, "body": "For creating arrays you might find <code>calloc</code> more intuitive."}], "answers": [{"tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": true, "score": 0, "last_activity_date": 1526508408, "creation_date": 1526508408, "answer_id": 50380578, "question_id": 50380082, "link": "https://stackoverflow.com/questions/50380082/dynamically-allocating-an-array-of-a-struct/50380578#50380578", "title": "Dynamically allocating an array of a struct", "body": "<pre><code>struct fileStruct fileobjarray[totalfiles];\n</code></pre>\n\n<p>fileobjarray is a <a href=\"http://en.cppreference.com/w/c/language/array\" rel=\"nofollow noreferrer\">VLA</a> array of size totalfiles of fileStruct structure. To allocate using <a href=\"https://en.cppreference.com/w/c/memory/malloc\" rel=\"nofollow noreferrer\">malloc</a> we can write:</p>\n\n<pre><code>struct fileStruct *fileobjarray = malloc(totalfiles * sizeof(*fileobjarray));\n</code></pre>\n\n<p>We would allocate memory for an array of <code>totalfiles</code> elements, with each element of <code>sizeof(*fileobjarray) = sizeof(struct fileStruct)</code> size. Sometimes <a href=\"https://en.cppreference.com/w/c/memory/calloc\" rel=\"nofollow noreferrer\">calloc</a> is more preferable call in C, as it protects (on some platforms) against overflow:</p>\n\n<pre><code>struct fileStruct *fileobjarray = calloc(totalfiles, sizeof(*fileobjarray));\n</code></pre>\n\n<p>And remember to <code>free()</code>.</p>\n\n<pre><code>int getNumberOfFiles(char *path)\n{\n int totalfiles = 0;\n DIR *d;\n struct dirent *dir;\n struct stat cstat;\n d = opendir(path);\n while(( dir = readdir(d)) != NULL) {\n     totalfiles++;\n}\nreturn totalfiles;\n}\n\nint main()\n{\n\n      int totalfiles = getNumberOfFiles(\".\");\n      int i =0;\n      DIR *d;\n      struct dirent *dir; \n      d = opendir(\".\");\n      struct fileStruct *fileobjarray = calloc(totalfiles, sizeof(*fileobjarray));\n      if (fileobjarray == NULL) {\n            fprintf(stderr, \"Error allocating memory!\\n\");\n            return -1;\n      }\n      struct stat mystat;\n\n      while(( dir = readdir(d)) != NULL) {\n        fileobjarray[i].filesize=mystat.st_size;\n        strcpy (fileobjarray[i].filename ,dir-&gt;d_name );\n        i++;\n      }\n      free(fileobjarray);\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 9802165, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-l76lDHJg74o/AAAAAAAAAAI/AAAAAAAAAZk/hJAYGO-4Hcs/photo.jpg?sz=128", "display_name": "Sulav k", "link": "https://stackoverflow.com/users/9802165/sulav-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 50380578, "answer_count": 1, "score": 0, "last_activity_date": 1526508408, "creation_date": 1526505809, "question_id": 50380082, "link": "https://stackoverflow.com/questions/50380082/dynamically-allocating-an-array-of-a-struct", "title": "Dynamically allocating an array of a struct", "body": "<p>I am having a hard time dealing with malloc in  C especially when allocating for array of struct. I have a program that basically store all the filenames and filesize in an array of struct. I got my program working without using malloc but I dont really like this way of programming.  Could I get any help using malloc, in my program? </p>\n\n<pre><code>int getNumberOfFiles(char *path)\n{\n int totalfiles = 0;\n DIR *d;\n struct dirent *dir;\n struct stat cstat;\n d = opendir(path);\n while(( dir = readdir(d)) != NULL) {\n     totalfiles++;\n}\nreturn totalfiles;\n}\n\nint main()\n{\n\n      int totalfiles = getNumberOfFiles(\".\");\n      int i =0;\n      DIR *d;\n      struct dirent *dir; \n      d = opendir(\".\");\n      struct fileStruct fileobjarray[totalfiles];\n      struct stat mystat;\n\n       while(( dir = readdir(d)) != NULL) {\n        fileobjarray[i].filesize=mystat.st_size;\n        strcpy (fileobjarray[i].filename ,dir-&gt;d_name );\n        i++;\n      }\n\n}\n</code></pre>\n\n<p>As you can see, I made a function called getnumberoffiles() to get the size to allocate statically. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1526505837, "post_id": 50380060, "comment_id": 87776414, "body": "You&#39;re printing the address of <code>res</code>, not the value."}, {"owner": {"reputation": 1749, "user_id": 1243576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a35c1ecafd01db2337c25f59fdce4c5?s=128&d=identicon&r=PG", "display_name": "basak", "link": "https://stackoverflow.com/users/1243576/basak"}, "edited": false, "score": 4, "creation_date": 1526505993, "post_id": 50380060, "comment_id": 87776480, "body": "Fred Larson already addressed your main issue. I also suggest you check n2 == 0 before you do the division, otherwise there is not much point to it."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9802747, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vzEbNuT7HpU/AAAAAAAAAAI/AAAAAAAAC2c/EmfSiV1QTCE/photo.jpg?sz=128", "display_name": "Kyle Posey", "link": "https://stackoverflow.com/users/9802747/kyle-posey"}, "edited": false, "score": 0, "creation_date": 1526506309, "post_id": 50380096, "comment_id": 87776602, "body": "Thank you very much. I assumed you would need the &quot;&amp;&quot; as you would with printf."}, {"owner": {"reputation": 862, "user_id": 890897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7846a21f6ef5adf0d5bd0375b04428e?s=128&d=identicon&r=PG", "display_name": "tdk001", "link": "https://stackoverflow.com/users/890897/tdk001"}, "edited": false, "score": 0, "creation_date": 1526507720, "post_id": 50380096, "comment_id": 87777100, "body": "That only applies to <code>scanf()</code> because it needs to know where to put the data (and that&#39;s what the <code>&amp;</code> gives you)"}], "tags": [], "owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "is_accepted": true, "score": 7, "last_activity_date": 1526505856, "creation_date": 1526505856, "answer_id": 50380096, "question_id": 50380060, "link": "https://stackoverflow.com/questions/50380060/c-programs-outputting-the-same-number-no-matter-what-i-change/50380096#50380096", "title": "C programs outputting the same number no matter what I change", "body": "<p>You are printing out the address of your variable</p>\n\n<pre><code>printf(\"Result: %d\", &amp;res);\n</code></pre>\n\n<p>To print out the value just do</p>\n\n<pre><code>printf(\"Result: %d\", res);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44, "user_id": 8891198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e19ce08c9e5c99f0415181dbb7c37064?s=128&d=identicon&r=PG&f=1", "display_name": "Elior Kertsman", "link": "https://stackoverflow.com/users/8891198/elior-kertsman"}, "is_accepted": false, "score": 1, "last_activity_date": 1526506528, "last_edit_date": 1526506528, "creation_date": 1526505924, "answer_id": 50380110, "question_id": 50380060, "link": "https://stackoverflow.com/questions/50380060/c-programs-outputting-the-same-number-no-matter-what-i-change/50380110#50380110", "title": "C programs outputting the same number no matter what I change", "body": "<p>Dont use &amp; :  </p>\n\n<pre><code>printf(\"Result: %d\", &amp;res);\n</code></pre>\n\n<p>Write:</p>\n\n<pre><code>printf(\"Result: %d\", res);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5339, "user_id": 1714692, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bd72cbc200eb7c9aa507624f154b21a7?s=128&d=identicon&r=PG", "display_name": "Francesco Boi", "link": "https://stackoverflow.com/users/1714692/francesco-boi"}, "is_accepted": false, "score": 0, "last_activity_date": 1526557291, "creation_date": 1526557291, "answer_id": 50390578, "question_id": 50380060, "link": "https://stackoverflow.com/questions/50380060/c-programs-outputting-the-same-number-no-matter-what-i-change/50390578#50390578", "title": "C programs outputting the same number no matter what I change", "body": "<p>As other people say do you are printing the address. </p>\n\n<p>However there is also another error: you should check the denominator is not 0 before the division otherwise it does not make any sense.</p>\n\n<h1>include </h1>\n\n<p>int main () {</p>\n\n<pre><code>int n1, n2, res;\nprintf(\"Enter two numbers to divide.\\n\");\nscanf(\"%d\", &amp;n1);\nscanf(\"%d\", &amp;n2);\n\nif (n2 == 0) {\n\n    printf(\"You cannot divide by 0!\\n\");\n\n} else {\n    res = n1/n2;\n    printf(\"Result: %d\", res);\n    printf(\"\\n\");\n\n}\n\nsystem(\"PAUSE\");\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 23, "user_id": 9802747, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vzEbNuT7HpU/AAAAAAAAAAI/AAAAAAAAC2c/EmfSiV1QTCE/photo.jpg?sz=128", "display_name": "Kyle Posey", "link": "https://stackoverflow.com/users/9802747/kyle-posey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 50380096, "answer_count": 3, "score": 2, "last_activity_date": 1526557291, "creation_date": 1526505697, "last_edit_date": 1526507393, "question_id": 50380060, "link": "https://stackoverflow.com/questions/50380060/c-programs-outputting-the-same-number-no-matter-what-i-change", "title": "C programs outputting the same number no matter what I change", "body": "<p>So I'm having a weird issue where regardless of .c file, compiler, IDE, or what I change my output is the same every time. At first I was writing a simple program for my class,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main () {\n\n    int n1, n2, res;\n    printf(\"Enter two numbers to divide.\\n\");\n    scanf(\"%d\", &amp;n1);\n    scanf(\"%d\", &amp;n2);\n\n    res = n1/n2;\n\n    if (n2 == 0) {\n\n        printf(\"You cannot divide by 0!\\n\");\n\n    } else {\n\n        printf(\"Result: %d\", &amp;res);\n        printf(\"\\n\");\n\n    }\n\n    system(\"PAUSE\");\n}\n</code></pre>\n\n<p>And my result always equals the number <code>6422276</code>.\nI tried creating a new file that simply initializes two integers to <code>1</code> and <code>2</code> respectively, and tell the compiler to add them together. The output equals <code>6422276</code>.</p>\n\n<p>What do I do?</p>\n"}, {"tags": ["c", "cairo", "xlib"], "answers": [{"tags": [], "owner": {"reputation": 7642, "user_id": 436275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72a51d31e40d541a9786e0243678029?s=128&d=identicon&r=PG", "display_name": "Uli Schlachter", "link": "https://stackoverflow.com/users/436275/uli-schlachter"}, "is_accepted": true, "score": 1, "last_activity_date": 1527508088, "creation_date": 1527508088, "answer_id": 50565716, "question_id": 50380046, "link": "https://stackoverflow.com/questions/50380046/what-is-the-proper-way-of-clearing-an-x-window-when-painting-on-it-via-a-cairo-s/50565716#50565716", "title": "What is the proper way of clearing an X window when painting on it via a Cairo surface", "body": "<p>Add <code>cairo_set_operator(self-&gt;context, CAIRO_OPERATOR_SOURCE);</code> before your final <code>cairo_paint()</code>.</p>\n\n<p>You are clearing the intermediate group that you created. That means that it is completely transparent outside of the circle. Then you draw this group to your target window with the default operator, which is <code>OVER</code>. Drawing completely transparent over anything just leaves the old content there. Drawing with <code>SOURCE</code> actually copies the source to the target surface.</p>\n\n<p>Side note: Your <code>XClearWindow</code> approach is not guaranteed to work unless you call <code>cairo_surface_flush</code> and <code>cairo_surface_mark_dirty</code> as needed around it.</p>\n"}], "owner": {"reputation": 473, "user_id": 1838793, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uZrN6.png?s=128&g=1", "display_name": "Phoenix87", "link": "https://stackoverflow.com/users/1838793/phoenix87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 50565716, "answer_count": 1, "score": 0, "last_activity_date": 1527531712, "creation_date": 1526505606, "last_edit_date": 1527531712, "question_id": 50380046, "link": "https://stackoverflow.com/questions/50380046/what-is-the-proper-way-of-clearing-an-x-window-when-painting-on-it-via-a-cairo-s", "title": "What is the proper way of clearing an X window when painting on it via a Cairo surface", "body": "<p>I am trying to draw on a transparent X window using Cairo. According to the official Cairo <a href=\"https://www.cairographics.org/FAQ/#clear_a_surface\" rel=\"nofollow noreferrer\">FAQ</a>, a way to clear a transparent surface is by setting the Cairo operator to CLEAR. This doesn't seem to work in my case. I am drawing a growing and shrinking filled circle. Initially, the circle grows, but when it shrinks, the large circles remain on the window. This makes me think that perhaps I should clear the X window itself too at each redraw.</p>\n\n<p>This is the code that I have come up with</p>\n\n<pre><code>XClearWindow(self-&gt;display, self-&gt;win_id);\ncairo_push_group(self-&gt;context);\n\n// Re-draw the whole canvas: Doesn't work as expected\n// cairo_save(self-&gt;context);\n// cairo_set_operator(self-&gt;context, CAIRO_OPERATOR_CLEAR);\n// cairo_paint(self-&gt;context);\n// cairo_restore(self-&gt;context);\n\n// Invoke the draw callback &lt;- Cairo drawing done here from Python\nCanvas_on_draw(self, args_tuple, NULL);\n\ncairo_pop_group_to_source(self-&gt;context);\ncairo_paint(self-&gt;context);\ncairo_surface_flush(self-&gt;surface);\n\nXFlush(self-&gt;display);\n</code></pre>\n\n<p>As you can see, my solution is to call <code>XClearWindow</code> prior to drawing with Cairo, and then flush everything with <code>XFlush</code>. However, I'm not sure this is the cleanest solution, and it kind of feels like a hack rather than the proper approach. For instance, without <code>XFlush</code> I get considerable flickering, but the Xlib documentation seems to hint that most applications shouldn't need calling this function directly.</p>\n\n<hr>\n\n<p><strong>EDIT</strong>: After the answer below, this is what my code looks like:</p>\n\n<pre><code>    cairo_push_group(self-&gt;context);\n    // Draw stuff\n    cairo_pop_group_to_source(self-&gt;context);\n\n    // The following cairo paradigm seems to have the same\n    // effect as the following commented out lines:\n    // XClearWindow(self-&gt;display, self-&gt;win_id);\n    // cairo_paint(self-&gt;context);\n    cairo_save(self-&gt;context);\n    cairo_set_operator(self-&gt;context, CAIRO_OPERATOR_SOURCE);\n    cairo_paint(self-&gt;context);\n    cairo_restore(self-&gt;context);\n</code></pre>\n\n<p>This does the intended thing.</p>\n"}, {"tags": ["c", "data-structures"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1526505699, "post_id": 50380021, "comment_id": 87776366, "body": "First of all, <i>formatting</i>. Indentation might not be needed for the compiler, but for people reading your code it&#39;s kind of important. Secondly, if you get build errors of any kind, please copy (as text, full and complete including any possible informational notes) the messages and paste them (without modifications) into the body of your question."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526505747, "post_id": 50380021, "comment_id": 87776387, "body": "Also, you don&#39;t declare <a href=\"http://en.cppreference.com/w/c/language/main_function\" rel=\"nofollow noreferrer\">the <code>main</code> function</a> correctly."}, {"owner": {"reputation": 6472, "user_id": 3029173, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xJxwn.jpg?s=128&g=1", "display_name": "AnilRedshift", "link": "https://stackoverflow.com/users/3029173/anilredshift"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526508072, "post_id": 50380021, "comment_id": 87777226, "body": "@Someprogrammerdude it&#39;s not too difficult to run through <a href=\"https://codebeautify.org/c-formatter-beautifier\" rel=\"nofollow noreferrer\">codebeautify.org/c-formatter-beautifier</a> or similar, especially for new users :-) Takes about as much time to write a comment"}, {"owner": {"reputation": 1597, "user_id": 4783621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e6600de9afdbb951f11e7edbb626d0?s=128&d=identicon&r=PG&f=1", "display_name": "kismert", "link": "https://stackoverflow.com/users/4783621/kismert"}, "edited": false, "score": 0, "creation_date": 1526508573, "post_id": 50380021, "comment_id": 87777390, "body": "Please tell us which lines are generating the errors. Are these runtime or compiler errors?"}], "answers": [{"tags": [], "owner": {"reputation": 298, "user_id": 6052863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eea9886e38877dbd6a19c0db42a7dcc?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Armstrong", "link": "https://stackoverflow.com/users/6052863/brian-armstrong"}, "is_accepted": false, "score": 2, "last_activity_date": 1526509169, "creation_date": 1526509169, "answer_id": 50380712, "question_id": 50380021, "link": "https://stackoverflow.com/questions/50380021/undefined-reference-error-to-several-function/50380712#50380712", "title": "undefined reference error to several function", "body": "<p>Your program has <em>declared</em> the functions, but it hasn't <em>defined</em> them. All you've done is told it how to call <code>create_list</code> but not how it should implement that function.</p>\n\n<p>Is there another file that goes with this one? Chances are, these functions are defined in another file, and you need to tell the compiler to use that file's compiled output to define these functions.</p>\n"}], "owner": {"reputation": 13, "user_id": 8027954, "user_type": "registered", "profile_image": "https://graph.facebook.com/258423507964830/picture?type=large", "display_name": "Bikrant Koirala", "link": "https://stackoverflow.com/users/8027954/bikrant-koirala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526509169, "creation_date": 1526505477, "last_edit_date": 1526508042, "question_id": 50380021, "link": "https://stackoverflow.com/questions/50380021/undefined-reference-error-to-several-function", "title": "undefined reference error to several function", "body": "<p>While running this c program to implement linked list operations I am getting undefined reference error to several functions like undefined reference to  create_list , undefined reference to display, etc. I have also read about this error in this site but I am not getting exact meaning of these error. I have no clue about this errors, So please help me to understand these errors.</p>\n\n<pre><code>#include &lt; stdio.h &gt;\n#include &lt; stdlib.h &gt;\nstruct node {\n  int info;\n  struct node * link;\n};\nstruct node * create_list(struct node * start);\nvoid display(struct node * start);\nvoid count(struct node * start);\nvoid search(struct node * start, int data);\nstruct node * addatbeg(struct node * start, int data);\nstruct node * addatend(struct node * start, int data);\nstruct node * addafter(struct node * start, int data, int item);\nstruct node * addbefore(struct node * start, int data, int item);\nstruct node * addatpos(struct node * start, int data, int pos);\nstruct node * del(struct node * start, int data);\nstruct node * reverse(struct node * start);\nmain() {\n  struct node * start = NULL;\n  int choice, data, item, pos;\n  while (1) {\n    printf(\"1.Create list\\n\");\n    printf(\"2.Display\\n\");\n    printf(\"3.Count\\n\");\n    printf(\"4.Search\\n\");\n    printf(\"5.Add to empty list/Add at beginning\\n\");\n    printf(\"6.Add at end\\n\");\n    printf(\"7.Ad after node\\n\");\n    printf(\"8.Add before node\\n\");\n    printf(\"9.Add at position\\n\");\n    printf(\"10.Delete\\n\");\n    printf(\"11.Reverse\\n\");\n    printf(\"12.quit\\n\");\n    printf(\"Enter your choice:\\n\");\n    scanf(\"%d\", &amp; choice);\n    switch (choice) {\n    case 1:\n      start = create_list(start);\n      break;\n    case 2:\n      display(start);\n      break;\n    case 3:\n      count(start);\n      break;\n    case 4:\n      printf(\"Enter the elements to be searched:\");\n      scanf(\"%d\", &amp; data);\n      search(start, data);\n      break;\n    case 5:\n      printf(\"Enter the element to be inserted\");\n      scanf(\"%d\", &amp; data);\n      start = addatbeg(start, data);\n      break;\n    case 6:\n      printf(\"Enter the element to be inserted: \");\n      scanf(\"%d\", &amp; data);\n      start = addatend(start, data);\n      break;\n    case 7:\n      printf(\"Enter thee element to be inserted\");\n      scanf(\"%d\", &amp; data);\n      printf(\"Enter the element after which to insert\");\n      scanf(\"%d\", &amp; item);\n      start = addafter(start, data, item);\n      break;\n    case 8:\n      printf(\"Enter the element to be inserted: \");\n      scanf(\"%d\", &amp; data);\n      printf(\"Enter the element before which to insert\");\n      scanf(\"%d\", &amp; pos);\n      start = addbefore(start, data, item);\n      break;\n    case 9:\n      printf(\"Enter the element to be inserted\");\n      scanf(\"%d\", &amp; data);\n      printf(\"Enter the position at which to insert\");\n      scanf(\"%d\", &amp; data);\n      break;\n    case 10:\n      printf(\"Enter the elements to be deleted\");\n      scanf(\"%d\", &amp; data);\n      start = del(start, data);\n      break;\n    case 11:\n      start = reverse(start);\n      break;\n    case 12:\n      exit(1);\n    default:\n      printf(\"Wrong choice\\n\");\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1526503883, "post_id": 50379663, "comment_id": 87775597, "body": "Try including <code>stdlib.h</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1526503951, "post_id": 50379663, "comment_id": 87775633, "body": "Please try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, <b>Complete</b>, and <b>Verifiable</b> Example</a> to show us."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 2, "creation_date": 1526503963, "post_id": 50379663, "comment_id": 87775639, "body": "<code>NULL</code> is supposed to be defined in &lt;stdio.h&gt; as per standard, no? <a href=\"http://en.cppreference.com/w/c/types/NULL\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/types/NULL</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1526504021, "post_id": 50379663, "comment_id": 87775654, "body": "It is defined in <code>stddef.h</code> per standard. <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.19\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#7.19</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1526504039, "post_id": 50379663, "comment_id": 87775663, "body": "By the way, the expression <code>**arr</code> is suspect, it makes you look like a three star programmer, which is <a href=\"http://wiki.c2.com/?ThreeStarProgrammer\" rel=\"nofollow noreferrer\">seldom a good thing</a> to be called."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526504131, "post_id": 50379663, "comment_id": 87775704, "body": "Do you check <code>*arr!=NULL</code> before checking <code>**arr!=NULL</code>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1526504181, "post_id": 50379663, "comment_id": 87775734, "body": "@EugeneSh. And in <code>&lt;stdio.h&gt;</code> as well."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526504245, "post_id": 50379663, "comment_id": 87775763, "body": "@Someprogrammerdude Yeah.. which is a bit strange"}, {"owner": {"reputation": 11310, "user_id": 1067943, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/93c13b4e7dc0e35c60f09d3abca0f601?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1067943/michael"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1526504357, "post_id": 50379663, "comment_id": 87775818, "body": "@EugeneSh. I added #include&lt;stdlib.h&gt;"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1526504417, "post_id": 50379663, "comment_id": 87775836, "body": "Then you will have to give us <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1526505933, "post_id": 50379663, "comment_id": 87776455, "body": "Can you please specify what compiler/IDE/OS are you using? As well as providing an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 11310, "user_id": 1067943, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/93c13b4e7dc0e35c60f09d3abca0f601?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1067943/michael"}, "edited": false, "score": 0, "creation_date": 1526505698, "post_id": 50379855, "comment_id": 87776365, "body": "I added all this:  #include&lt;string.h&gt; #include&lt;stdlib.h&gt; #include&lt;stdio.h&gt; #include&lt;stddef.h&gt;  And still I get the error.  I use visualstudio2017"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 11310, "user_id": 1067943, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/93c13b4e7dc0e35c60f09d3abca0f601?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1067943/michael"}, "edited": false, "score": 0, "creation_date": 1526505873, "post_id": 50379855, "comment_id": 87776431, "body": "@Michael Do you still get the error with the minimal test programs I showed?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 11310, "user_id": 1067943, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/93c13b4e7dc0e35c60f09d3abca0f601?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1067943/michael"}, "edited": false, "score": 0, "creation_date": 1526558517, "post_id": 50379855, "comment_id": 87797396, "body": "Visual Studio 2017 should be at least adequately compliant with the C standard.  You probably have a broken installation.  I would suggest uninstalling it, manually searching for and erasing all vestiges of the installation, and then re-downloading and re-installing from scratch.  If that doesn&#39;t fix it you&#39;re going to have to take it up with Microsoft tech support.  I can&#39;t help you any further, I don&#39;t use VS myself."}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 9, "last_activity_date": 1526505754, "last_edit_date": 1526505754, "creation_date": 1526504630, "answer_id": 50379855, "question_id": 50379663, "link": "https://stackoverflow.com/questions/50379663/why-i-get-null-is-undefined-error/50379855#50379855", "title": "Why I get NULL is undefined error?", "body": "<p>Both <code>stdio.h</code> and <code>stdlib.h</code> are, in fact, required to define <code>NULL</code>, <a href=\"https://web.archive.org/web/20151125170555/http://flash-gordon.me.uk/ansi.c.txt\" rel=\"noreferrer\">all the way back to the original ANSI C standard in 1989</a><sup>1</sup> (unfortunately this is a .txt file, so I can't link to a specific section; search for <code>4.9 INPUT/OUTPUT &lt;stdio.h&gt;</code> and/or <code>4.10 GENERAL UTILITIES &lt;stdlib.h&gt;</code>, and then scroll down a little).  If either of the minimized test programs</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid *p = NULL;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\nvoid *p = NULL;\n</code></pre>\n\n<p>fails to compile to an object file, then your C implementation is buggy.  (If  the above test programs do <em>not</em> fail to compile, you're gonna need to do some <a href=\"https://blog.regehr.org/archives/527\" rel=\"noreferrer\">delta-minimization</a> on your actual program, and probably then track down your wiseacre cow-orker who thought it would be funny to put <code>#undef NULL</code> in an application header file.)</p>\n\n<p>NULL is also required to be defined in several other standard headers, but its <em>true</em> home, as you may guess from the cross-references to section 4.1.5 to explain what NULL is supposed to be defined <em>to</em>, is <code>stddef.h</code>.  A C implementation that fails to define <code>NULL</code> in <code>stddef.h</code> is <em>egregiously</em> buggy.  Also, <code>stddef.h</code> is one of the very few headers that is required to be provided by a \"freestanding implementation\"; if you are working in an embedded environment, it's possible that they thought they could get away with leaving NULL out of <code>stdio.h</code> or <code>stdlib.h</code>, but they have no excuse whatsoever for leaving it out of <code>stddef.h</code>.</p>\n\n<p>In the alternative, just use <code>0</code> for the null pointer constant.  That's perfectly fine style as long as all your functions have prototypes.  (You have to cast it to pass it correctly to a function that takes a variable number of arguments, e.g. to <code>execl</code>, but you have to cast <em>NULL</em> to pass it correctly to a function that takes a variable number of arguments, so it comes out in the wash.)</p>\n\n<hr>\n\n<p><sup>1</sup> Footnote for historians: yes, the linked document really is the <em>ANSI</em> C standard, not the ISO standard with nigh-identical wording (but very different section numbering) that came out a year later.  I am not aware of any copy of the 1990 edition of the ISO C standard that is available online at no charge.</p>\n"}], "owner": {"reputation": 11310, "user_id": 1067943, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/93c13b4e7dc0e35c60f09d3abca0f601?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1067943/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5229, "favorite_count": 1, "accepted_answer_id": 50379855, "answer_count": 1, "score": 5, "last_activity_date": 1526505754, "creation_date": 1526503805, "last_edit_date": 1526504298, "question_id": 50379663, "link": "https://stackoverflow.com/questions/50379663/why-i-get-null-is-undefined-error", "title": "Why I get NULL is undefined error?", "body": "<p>I have this thiis row:</p>\n\n<pre><code>while (**arr != NULL)\n</code></pre>\n\n<p>In this row I get this error:</p>\n\n<pre><code>identifier \"NULL\" is undefined\n</code></pre>\n\n<p>I included this library:</p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n</code></pre>\n\n<p>but still I get the error above.Any idea how to fix this error?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1526503734, "post_id": 50379609, "comment_id": 87775553, "body": "What <i>did</i> you get? And how is that file encoded? It&#39;s definitely not ASCII."}, {"owner": {"reputation": 348226, "user_id": 267, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1b11262da6d1cd26b1b0bc99a2620cee?s=128&d=identicon&r=PG", "display_name": "Lasse V. Karlsen", "link": "https://stackoverflow.com/users/267/lasse-v-karlsen"}, "edited": false, "score": 0, "creation_date": 1526504037, "post_id": 50379609, "comment_id": 87775661, "body": "&quot;it prints incorrect&quot;, should we take this to mean that the output file contains the text &quot;incorrect&quot;? If not, can you <i>please</i> tell us what you <i>did</i> get?"}, {"owner": {"reputation": 1, "user_id": 8684171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XwrbW.jpg?s=128&g=1", "display_name": "Sherstnyov", "link": "https://stackoverflow.com/users/8684171/sherstnyov"}, "edited": false, "score": 0, "creation_date": 1526505982, "post_id": 50379609, "comment_id": 87776478, "body": "It&#39;s windows-1251. it prints the same structure and excessive zeros below."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1526563017, "post_id": 50379609, "comment_id": 87800563, "body": "Red <a href=\"http://utf8everywhere.org/\" rel=\"nofollow noreferrer\">utf8everywhere.org</a>"}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1586982545, "post_id": 50379609, "comment_id": 108334685, "body": "Always a bug: not testing the return value from fscanf(). You simply assume input is correctly formed. It might not be."}, {"owner": {"reputation": 366, "user_id": 14346786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ec29462cd9b4af6f2a7e3ec19249c6?s=128&d=identicon&r=PG&f=1", "display_name": "William Martens", "link": "https://stackoverflow.com/users/14346786/william-martens"}, "edited": false, "score": 0, "creation_date": 1618066555, "post_id": 50379609, "comment_id": 118492345, "body": "@Sherstnyov Where are the header files? :o"}], "owner": {"reputation": 1, "user_id": 8684171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XwrbW.jpg?s=128&g=1", "display_name": "Sherstnyov", "link": "https://stackoverflow.com/users/8684171/sherstnyov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1586977319, "creation_date": 1526503533, "last_edit_date": 1586977319, "question_id": 50379609, "link": "https://stackoverflow.com/questions/50379609/getting-structure-from-file-in-c", "title": "Getting structure from file in C", "body": "<p>I have a problem with reading structure from file. I think it's kind of obvious, but I can't grasp it.\nHere's my code:</p>\n\n<pre><code>while ((c = fgetc(fp)) != EOF) {\n    ungetc(c, fp);\n    fscanf(fp, \"%d\", &amp;stud_list[i].group);\n    do { c = fgetc(fp); } while (c != '\\n' &amp;&amp; c != EOF);\n\n    fgets(stud_list[i].surname, 50, fp);\n    stud_list[i].surname[strcspn(stud_list[i].surname, \"\\n\")] = 0;\n\n    fgets(stud_list[i].name, 50, fp);\n    stud_list[i].name[strcspn(stud_list[i].name, \"\\n\")] = 0;\n\n    fgets(stud_list[i].patronymic, 50, fp);\n    stud_list[i].patronymic[strcspn(stud_list[i].patronymic, \"\\n\")] = 0;\n\n    fscanf(fp, \"%d\", &amp;stud_list[i].year);\n    do { c = fgetc(fp); } while (c != '\\n' &amp;&amp; c != EOF);\n\n    for (j = 0; j &lt; 4; j++)\n    fscanf(fp, \"%d \", &amp;stud_list[i].marks[j]);\n    fscanf(fp, \"%d\", &amp;stud_list[i].marks[4]);\n    i++;\n}\n</code></pre>\n\n<p>Then I printed it to another file:</p>\n\n<pre><code>while (stud_list[t].group) {\n    fprintf(fp, \"%d\\n\", stud_list[t].group);\n\n    fputs(stud_list[t].surname, fp);\n    fputc('\\n', fp);\n    fputs(stud_list[t].name, fp);\n    fputc('\\n', fp);\n    fputs(stud_list[t].patronymic, fp);\n    fputc('\\n', fp);\n\n    fprintf(fp, \"%d\\n\", stud_list[t].year);\n    for (j=0;j&lt;4;j++)\n    fprintf(fp, \"%d \", stud_list[t].marks[j]);\n    fprintf(fp, \"%d\\n\", stud_list[t].marks[4]);\n    t++;\n}\n</code></pre>\n\n<p>What I expected to get:</p>\n\n<pre><code>11\n\u0418\u0432\u0430\u043d\u043e\u0432\n\u0418\u0432\u0430\u043d\n\u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447\n1990\n5 5 5 5 5\n12\n\u041c\u0430\u044f\u043a\u043e\u0432\u0441\u043a\u0438\u0439\n\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\n\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u043e\u0432\u0438\u0447\n1893\n5 5 5 5 4\n</code></pre>\n\n<p>What I got:</p>\n\n<p>11<br>\n\u0418\u0432\u0430\u043d\u043e\u0432<br>\n\u0418\u0432\u0430\u043d<br>\n\u0418\u0432\u0430\u043d\u043e\u0432\u0438\u0447<br>\n1990<br>\n5 5 5 5 12<br>\n12<br>\n\u041c\u0430\u044f\u043a\u043e\u0432\u0441\u043a\u0438\u0439<br>\n\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440<br>\n\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\u043e\u0432\u0438\u0447<br>\n1893<br>\n5 5 5 5 4<br>\n4<br>\n0<br>\n0 0 0 0 0<br></p>\n\n<p>I hope you'll find a mistake. Thanks in advance! :)</p>\n"}, {"tags": ["c", "programming-languages", "brute-force"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526503342, "post_id": 50379511, "comment_id": 87775376, "body": "You have a solution, mabye one which gets close to what you want to achieve? Please show it."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1526503365, "post_id": 50379511, "comment_id": 87775386, "body": "Do it in one loop on numeric values encoding the board... such as octal 8-digits numbers, where each digit is encoding each queen position. Dunno what you are going to achieve by that though..."}, {"owner": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1526503479, "post_id": 50379511, "comment_id": 87775444, "body": "I suggest you read about <a href=\"https://en.wikipedia.org/wiki/Lin%E2%80%93Kernighan_heuristic\" rel=\"nofollow noreferrer\">Lin-Kernighan</a>. I seem to recall it being developed specifically for solving n queens."}, {"owner": {"reputation": 129, "user_id": 7262057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57768386af85052c234ab91fdc69e8e9?s=128&d=identicon&r=PG&f=1", "display_name": "bilanush", "link": "https://stackoverflow.com/users/7262057/bilanush"}, "edited": false, "score": 0, "creation_date": 1526503483, "post_id": 50379511, "comment_id": 87775450, "body": "Yunnosch@   No, I don&#39;t.  I did code the program apart from this part.  I just did two whiles up to 64 and even added some two fors inside.  Nothing helps as I gotta go through all possible positions.   That&#39;s why I am asking..."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526503714, "post_id": 50379511, "comment_id": 87775544, "body": "Your question is about how to achieve in a certain way with additional requirments. It is not about how to achieve it at all. If you cannot achieve at all, then ask a different question. If you can achieve, but not with the additional requirement, then do so and show the code. This is simply about demonstrating your own effort and avoiding the impression that you expect other people to write an advanced version of something you did not even do basically. Showing the basic solution also gives a context for the solutions, i.e. where is the input coming from, how is the output needed."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526503773, "post_id": 50379511, "comment_id": 87775563, "body": "In 99% of all cases when you tag more than one language, your question is to broad. Please read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. Lastly please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 3954, "user_id": 6754706, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/TZSs8.jpg?s=128&g=1", "display_name": "RAZ_Muh_Taz", "link": "https://stackoverflow.com/users/6754706/raz-muh-taz"}, "edited": false, "score": 0, "creation_date": 1526503787, "post_id": 50379511, "comment_id": 87775566, "body": "perhaps applying a different strategy to the problem will help. search dynamic programming and how to apply it to the 8 queens problem and perhaps you will find something useful"}, {"owner": {"reputation": 129, "user_id": 7262057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57768386af85052c234ab91fdc69e8e9?s=128&d=identicon&r=PG&f=1", "display_name": "bilanush", "link": "https://stackoverflow.com/users/7262057/bilanush"}, "edited": false, "score": 0, "creation_date": 1526504169, "post_id": 50379511, "comment_id": 87775726, "body": "Yunnosch@  Not sure what you are on about.   It is a general question of how to achive an exustive result wihtout using all loops.  Why would it help that I post something?  Since it doesnt work.  Thats not at all about   &quot; expect other people to write an advanced version of something you did not even do basically&quot;   since it&#39;s about an idea which  I lack as for now.  What else can I do?  My implemtaion doesnt work and yet I know how to do it recursively but I am asking for an idea without recursion. I couldn&#39;t help but post this question. I dont see what else I can do."}, {"owner": {"reputation": 826, "user_id": 1402389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/599c4eaaff0f5d2c3fe5feca6560173b?s=128&d=identicon&r=PG", "display_name": "FBergo", "link": "https://stackoverflow.com/users/1402389/fbergo"}, "edited": false, "score": 0, "creation_date": 1526505846, "post_id": 50379511, "comment_id": 87776417, "body": "Yes, it is possible see this implementation in C: <a href=\"https://github.com/fbergo/examples/blob/master/8q.c\" rel=\"nofollow noreferrer\">github.com/fbergo/examples/blob/master/8q.c</a>"}], "answers": [{"comments": [{"owner": {"reputation": 826, "user_id": 1402389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/599c4eaaff0f5d2c3fe5feca6560173b?s=128&d=identicon&r=PG", "display_name": "FBergo", "link": "https://stackoverflow.com/users/1402389/fbergo"}, "reply_to_user": {"reputation": 129, "user_id": 7262057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57768386af85052c234ab91fdc69e8e9?s=128&d=identicon&r=PG&f=1", "display_name": "bilanush", "link": "https://stackoverflow.com/users/7262057/bilanush"}, "edited": false, "score": 1, "creation_date": 1526566345, "post_id": 50380292, "comment_id": 87802966, "body": "To generate all possibilities you&#39;d need to change the <code>if (col==8) return SUCCESS</code> line to save/output the current solution and return to the previous column ( <code>if (col==8) { output(); qrow[col]=0; col--; continue; }</code>, and <code>return FAIL</code> becomes <code>return END</code>, for the sake of semantics."}], "tags": [], "owner": {"reputation": 826, "user_id": 1402389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/599c4eaaff0f5d2c3fe5feca6560173b?s=128&d=identicon&r=PG", "display_name": "FBergo", "link": "https://stackoverflow.com/users/1402389/fbergo"}, "is_accepted": false, "score": 2, "last_activity_date": 1526506783, "creation_date": 1526506783, "answer_id": 50380292, "question_id": 50379511, "link": "https://stackoverflow.com/questions/50379511/less-than-n-loops-for-solving-the-n-queens-with-no-use-of-recursion/50380292#50380292", "title": "Less than n loops for solving the &#39;n queens&#39; with no use of recursion?", "body": "<p>It is possible. Short pseudo code below, see <a href=\"https://github.com/fbergo/examples/blob/master/8q.c\" rel=\"nofollow noreferrer\">https://github.com/fbergo/examples/blob/master/8q.c</a> for valid C code.</p>\n\n<pre><code>col = 1\nqrow[1..8]  = {0,0,0,0,0,0,0,0}\n\nwhile(true)\n    if (qrow[col] == 8) {\n         if (col &gt; 1) { \n              qrow[col]=0;\n              col--; \n              continue;\n         } else {\n              return FAIL;\n         }\n    } else {\n       qrow[col]++;\n    }\n\n    // check if queens attack each other\n    bad = 0;\n    for(i=1;i&lt;=7 &amp;&amp; !bad;i++) {\n       for(j=i+1;j&lt;=8 &amp;&amp;!bad;j++) {\n          if (qrow[i]!=0 &amp;&amp; qrow[i]==qrow[j]) bad=1;\n          if (qrow[i]!=0 &amp;&amp; qrow[j]!=0 &amp;&amp; abs(i-j)==abs(qrow[i]-qrow[j])) bad=1;\n       }\n    }\n\n    if (bad) continue; // queens in conflict, can't advance to col+1\n    if (col==8) return SUCCESS; // queens don't touch, 8 columns filled\n    ++col; // advance to next column\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 136032, "user_id": 5221149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4qlq.png?s=128&g=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5221149/andreas"}, "is_accepted": false, "score": 0, "last_activity_date": 1526511746, "creation_date": 1526511746, "answer_id": 50381113, "question_id": 50379511, "link": "https://stackoverflow.com/questions/50379511/less-than-n-loops-for-solving-the-n-queens-with-no-use-of-recursion/50381113#50381113", "title": "Less than n loops for solving the &#39;n queens&#39; with no use of recursion?", "body": "<p><em>Disclaimer: Original question tagged <code>java</code>, so this is a Java solution.</em></p>\n\n<p>A chessboard is 64 squares, and we want to place 8 queens that can't attack each other. To quickly search for an open square, i.e. a square that cannot be attacked by already placed queens, we can use a 64-bit <code>long</code> to represent the entire chessboard, and use bit-manipulation and the <a href=\"https://docs.oracle.com/javase/10/docs/api/java/lang/Long.html#numberOfTrailingZeros(long)\" rel=\"nofollow noreferrer\"><code>Long.numberOfTrailingZeros()</code></a> method to find an open square.</p>\n\n<p>We need some helper methods. First, a method for marking squares blocked by a queen at a given position.</p>\n\n<pre><code>private static long blockedSquaresWithQueenAt(int pos) {\n    // Set vertical bits\n    long board = 1L &lt;&lt; (pos &amp; 7);\n    board |= board &lt;&lt; 8;\n    board |= board &lt;&lt; 16;\n    board |= board &lt;&lt; 32;\n\n    // Set horizontal bits\n    long mask2 = 1L &lt;&lt; (pos &amp; ~7);\n    board |= ((mask2 &lt;&lt; 8) - 1) ^ (mask2 - 1);\n\n    // Set diagonal bits\n    for (int p = pos - 9; p &gt;= 0 &amp;&amp; (p &amp; 7) != 7; p -= 9)\n        board |= 1L &lt;&lt; p;\n    for (int p = pos - 7; p &gt;= 0 &amp;&amp; (p &amp; 7) != 0; p -= 7)\n        board |= 1L &lt;&lt; p;\n    for (int p = pos + 7; p &lt; 64 &amp;&amp; (p &amp; 7) != 7; p += 7)\n        board |= 1L &lt;&lt; p;\n    for (int p = pos + 9; p &lt; 64 &amp;&amp; (p &amp; 7) != 0; p += 9)\n        board |= 1L &lt;&lt; p;\n\n    return board;\n}\n</code></pre>\n\n<p>Second, a method to print the board, with optional marker of a single queen position. Printing with marker was useful during development/testing.</p>\n\n<pre><code>private static void printBoard(long board, int markPos) {\n    for (int pos = 0; pos &lt; 64; pos++) {\n        System.out.print(pos == markPos ? '\\u25CB' : (board &amp; (1L &lt;&lt; pos)) == 0 ? '\\u00B7' : '\\u25CF');\n        if ((pos &amp; 7) == 7)\n            System.out.println();\n        else\n            System.out.print(' ');\n    }\n}\n</code></pre>\n\n<p>Here is example of how it works, with queen at row 2, column 4, aka at position 20 <em>(all 0-based)</em>.</p>\n\n<pre><code>printBoard(blockedSquaresWithQueenAt(20), 20);\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>\u00b7 \u00b7 \u25cf \u00b7 \u25cf \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u25cf \u25cf \u00b7 \u00b7\n\u25cf \u25cf \u25cf \u25cf \u25cb \u25cf \u25cf \u25cf\n\u00b7 \u00b7 \u00b7 \u25cf \u25cf \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u25cf \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u25cf\n\u25cf \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n</code></pre>\n\n<p>Since we want to quickly skip blocked squares, using the <code>numberOfTrailingZeros()</code> method, we want blocked squares to be 0-bits, so we invert that:</p>\n\n<pre><code>printBoard(~ blockedSquaresWithQueenAt(20), -1);\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>\u25cf \u25cf \u00b7 \u25cf \u00b7 \u25cf \u00b7 \u25cf\n\u25cf \u25cf \u25cf \u00b7 \u00b7 \u00b7 \u25cf \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u25cf \u25cf \u00b7 \u00b7 \u00b7 \u25cf \u25cf\n\u25cf \u25cf \u00b7 \u25cf \u00b7 \u25cf \u00b7 \u25cf\n\u25cf \u00b7 \u25cf \u25cf \u00b7 \u25cf \u25cf \u00b7\n\u00b7 \u25cf \u25cf \u25cf \u00b7 \u25cf \u25cf \u25cf\n\u25cf \u25cf \u25cf \u25cf \u00b7 \u25cf \u25cf \u25cf\n</code></pre>\n\n<p>That is an example of our <code>long</code> board with one queen placed.</p>\n\n<p>Now for the main logic. We use an array of size 8 so we can quickly backtrack when needed. Having array eliminates the need for recursion.</p>\n\n<p>We then place the first queen (queen 0), mark blocked squares, find first unblocked square for second queen, and repeat until all 8 queens placed, backtracking as needed.</p>\n\n<p>When we have 8 queens placed, we build and print a board of those 8 queens, then backtrack to find more solutions.</p>\n\n<pre><code>private static void solve() {\n    int[] posForQueen = new int[8];\n    long[] board = new long[8];\n    posForQueen[0] = -1;\n    // Keep trying until we backtrack from queen 0\n    for (int queen = 0; queen &gt;= 0; ) {\n        // Find next open square for current queen\n        posForQueen[queen]++;\n        if (queen != 0)\n            posForQueen[queen] += Long.numberOfTrailingZeros(board[queen - 1] &gt;&gt;&gt; posForQueen[queen]);\n        // Backtrack if no open square found\n        if (posForQueen[queen] &gt;= 64) {\n            queen--;\n        } else {\n            // Build new board with open squares, accounting for all queens placed so far\n            board[queen] = ~ blockedSquaresWithQueenAt(posForQueen[queen]);\n            if (queen &gt; 0)\n                board[queen] &amp;= board[queen - 1];\n            // Advance to next queen if there are more queens to place\n            if (queen &lt; 7) {\n                posForQueen[queen + 1] = posForQueen[queen];\n                queen++;\n            } else {\n                // Build and print board with all 8 queen positions\n                long queens = 0;\n                for (int i = 0; i &lt; 8; i++)\n                    queens |= 1L &lt;&lt; posForQueen[i];\n                System.out.println();\n                printBoard(queens, -1);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>All solutions:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf\n\u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7\n\u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7\n\u00b7 \u25cf \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7\n\u00b7 \u00b7 \u00b7 \u00b7 \u25cf \u00b7 \u00b7 \u00b7\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 7262057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57768386af85052c234ab91fdc69e8e9?s=128&d=identicon&r=PG&f=1", "display_name": "bilanush", "link": "https://stackoverflow.com/users/7262057/bilanush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1526511746, "creation_date": 1526502962, "last_edit_date": 1526503738, "question_id": 50379511, "link": "https://stackoverflow.com/questions/50379511/less-than-n-loops-for-solving-the-n-queens-with-no-use-of-recursion", "title": "Less than n loops for solving the &#39;n queens&#39; with no use of recursion?", "body": "<p>Is there a way without using a recursive function to solve the 8 queens problem with say, two or three loops? I am trying (in C) to iterate over all squares and to assign a queen at each square and check. The problem is that even iterating with loops 64 times doesnt help because for each assignment in a given line I gotta check all possible positions of different lines. But I have a feeling I can somehow do it with less than 8 loops. Even if I just want to use bruteforce I believe there is a way to do it with less than 8 loops but I can't seem to find anyone talking about it.</p>\n\n<p>Is there such an implementation?</p>\n\n<p>How can I iterate through all 64 squares while checking all possible configurations of 8 queens or close to it and yet not using 8 loops?</p>\n"}, {"tags": ["c", "linux-kernel", "linux-device-driver"], "answers": [{"comments": [{"owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "edited": false, "score": 0, "creation_date": 1526503017, "post_id": 50379503, "comment_id": 87775228, "body": "Sorry, my question was about spin_lock_bh() and how it works when the ISR hits schedule_work() to schedule the bottom half to run."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "reply_to_user": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "edited": false, "score": 0, "creation_date": 1526503492, "post_id": 50379503, "comment_id": 87775455, "body": "Updated to explain bh."}, {"owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "edited": false, "score": 0, "creation_date": 1526504355, "post_id": 50379503, "comment_id": 87775816, "body": "Thanks for the updated answer.  Just for my own clarity... so is only the execution of the bottom half that&#39;s prevented, but not the scheduling?  That&#39;s how I figured things would work, so that you can then later (after the lock is released) run the bottom half how many times you need to in order to fully service any hardware interrupts that may have showed up while the lock was held."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "reply_to_user": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "edited": false, "score": 0, "creation_date": 1526505064, "post_id": 50379503, "comment_id": 87776130, "body": "The bottom half won&#39;t run during the lock but if it was scheduled while the lock was held, I believe it will run as soon as the lock is released. <a href=\"https://elixir.bootlin.com/linux/latest/source/kernel/softirq.c#L159\" rel=\"nofollow noreferrer\">elixir.bootlin.com/linux/latest/source/kernel/softirq.c#L159</a>"}], "tags": [], "owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "is_accepted": true, "score": 4, "last_activity_date": 1526503469, "last_edit_date": 1526503469, "creation_date": 1526502936, "answer_id": 50379503, "question_id": 50379299, "link": "https://stackoverflow.com/questions/50379299/how-does-spin-lock-bh-work/50379503#50379503", "title": "How does spin_lock_bh() work?", "body": "<p>An ISR can't wait for a lock if it might be held by code that does not disable interrupts. That would result in a deadlock.  <code>spin_lock_irqsave</code> first disables interrupts, saving the previous state, then takes the lock.  The restore undoes this in reverse order.</p>\n\n<p>A bottom half is still an interrupt.  <code>spin_lock_bh</code> does the equivalent by disabling bottom half execution, then taking the lock.  This prevents bottom half execution from stepping on our <code>read</code> code.</p>\n\n<p>A lock prevents multiple threads from executing the locked code.  The work queue is protected by only being operated on while holding the lock.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 5126486, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--E97rAiZg14/AAAAAAAAAAI/AAAAAAAAADY/Ag8gBBZhzjg/photo.jpg?sz=128", "display_name": "kugel", "link": "https://stackoverflow.com/users/5126486/kugel"}, "is_accepted": false, "score": 1, "last_activity_date": 1550655018, "creation_date": 1550655018, "answer_id": 54782944, "question_id": 50379299, "link": "https://stackoverflow.com/questions/50379299/how-does-spin-lock-bh-work/54782944#54782944", "title": "How does spin_lock_bh() work?", "body": "<p>spin_lock_bh disables softirqs (bh is an ancient term that actually refers to softirqs). However, work_queues triggered with schedule_work don't actually run in a softirq but in a dedicated thread, thus process context.</p>\n\n<p>Therefore your driver needs just the simple spin_lock() to protect against concurrent read() calls.</p>\n\n<p>It may need to disable interrupts when accessing resources shared with the \"top-half\" but that was not the scope of your question.</p>\n"}], "owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4702, "favorite_count": 1, "accepted_answer_id": 50379503, "answer_count": 2, "score": 4, "last_activity_date": 1550655018, "creation_date": 1526502046, "question_id": 50379299, "link": "https://stackoverflow.com/questions/50379299/how-does-spin-lock-bh-work", "title": "How does spin_lock_bh() work?", "body": "<p>I have a device driver I am working with that has a shared resource between the ISR (more specifically the bottom half of the ISR) and the <code>read()</code> call.</p>\n\n<p>The ISR does nothing more than call <code>schedule_work()</code> to get the bottom half to do the heavy lifting.  The resource is shared between <code>read()</code> (i.e., user context) and the function that implements the bottom half, which is why I am locking with <code>spin_lock_bh()</code>.</p>\n\n<p>What I don't understand is the mechanics of the locking.  Say someone currently holds the lock, what happens when the ISR hits <code>schedule_work()</code> (i.e., a hardware interrupt fired while we were holding the lock)?  Does the work still get scheduled and then ran at a later time or does it get dropped to the floor?  Stated differently... what is actually \"locked\" or prevented (i.e., the work queue or the execution of the work)?  Does the work queue get updated?</p>\n\n<p>To contrast my question, I understand that if I were using <code>spin_lock_irqsave()</code>, the ISR would be disabled while holding the lock, so I wouldn't get to <code>schedule_work()</code> in the first place, but given how the resource is shared, I don't think I need to or want to disable hardware interrupts when holding the lock.</p>\n"}, {"tags": ["c", "linux", "security", "client-server"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1526501874, "post_id": 50379249, "comment_id": 87774722, "body": "Too broad. It has to be done by design, not a patch."}, {"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1526502146, "post_id": 50379249, "comment_id": 87774853, "body": "you can execute the server program as a specific linux user and restrict that user&#39;s access to only the directory you want, see this question : <a href=\"https://unix.stackexchange.com/questions/101576/give-user-read-write-access-to-only-one-directory\" title=\"give user read write access to only one directory\">unix.stackexchange.com/questions/101576/&hellip;</a>"}, {"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1526502265, "post_id": 50379249, "comment_id": 87774918, "body": "after you succeed at that you&#39;ll probably need to adjust your program to catch permission denied errors or it will crash the server"}, {"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1526502436, "post_id": 50379249, "comment_id": 87774998, "body": "if you want a different directory for every different user then you could create a linux user for every different user and apply the same techniques"}, {"owner": {"reputation": 105, "user_id": 6919656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3def3cdd2a5cc463bee9079f997f33fd?s=128&d=identicon&r=PG&f=1", "display_name": "Ennio", "link": "https://stackoverflow.com/users/6919656/ennio"}, "edited": false, "score": 0, "creation_date": 1526503195, "post_id": 50379249, "comment_id": 87775313, "body": "Thank you for your comment. You all gave me some good idea"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526503906, "post_id": 50379249, "comment_id": 87775616, "body": "<a href=\"https://en.wikipedia.org/wiki/Directory_traversal_attack\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Directory_traversal_attack</a>"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1526518309, "post_id": 50379249, "comment_id": 87779726, "body": "Stack Overflow is a site for programming and development questions. This question appears to be off-topic because it is not about programming or development. See <a href=\"http://stackoverflow.com/help/on-topic\">What topics can I ask about here</a> in the Help Center. Perhaps <a href=\"http://superuser.com/\">Super User</a> or <a href=\"http://unix.stackexchange.com/\">Unix &amp; Linux Stack Exchange</a> would be a better place to ask."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 6919656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3def3cdd2a5cc463bee9079f997f33fd?s=128&d=identicon&r=PG&f=1", "display_name": "Ennio", "link": "https://stackoverflow.com/users/6919656/ennio"}, "edited": false, "score": 0, "creation_date": 1526503281, "post_id": 50379385, "comment_id": 87775350, "body": "Thank you to your advice, you gave me an idea that should work in my case."}], "tags": [], "owner": {"reputation": 3341, "user_id": 4668136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SsYJF.png?s=128&g=1", "display_name": "Dimitri L.", "link": "https://stackoverflow.com/users/4668136/dimitri-l"}, "is_accepted": true, "score": -1, "last_activity_date": 1526502412, "creation_date": 1526502412, "answer_id": 50379385, "question_id": 50379249, "link": "https://stackoverflow.com/questions/50379249/how-can-i-prevent-that-a-client-can-search-a-file-in-any-directory-of-the-server/50379385#50379385", "title": "How can I prevent that a Client can search a file in any directory of the Server?", "body": "<p>It depends how you implemented the search on the server side. The easiest and obvious but not always the right answer would be to strip slashes <code>/</code> from the search string you get.</p>\n\n<p>However if you implemented your search with a shell command using <code>system()</code> with, for example, <code>find</code> and your filename concatenated you need a serious filter function for the user input because otherwise one could execute random shell commands with a prepared search string</p>\n"}], "owner": {"reputation": 105, "user_id": 6919656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3def3cdd2a5cc463bee9079f997f33fd?s=128&d=identicon&r=PG&f=1", "display_name": "Ennio", "link": "https://stackoverflow.com/users/6919656/ennio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "closed_date": 1526510570, "accepted_answer_id": 50379385, "answer_count": 1, "score": 1, "last_activity_date": 1526502412, "creation_date": 1526501771, "question_id": 50379249, "link": "https://stackoverflow.com/questions/50379249/how-can-i-prevent-that-a-client-can-search-a-file-in-any-directory-of-the-server", "closed_reason": "Needs more focus", "title": "How can I prevent that a Client can search a file in any directory of the Server?", "body": "<p>For an university project I developed in Linux, using C language, a Client and a Server. When I run my Client I pass as arguments of the program the filenames (one or more) to request to the Server. The Server should search the file with the corresponding name in its current directory and if it finds it, it sends it to the Client. If as filename I use only the name of the file, for example try.txt, it's all ok, but how can I avoid that someone who use my Client try to go up on the path and search file in other directories, for example writing \"../try.txt\"?</p>\n"}, {"tags": ["c", "sockets", "unix", "posix"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1526501324, "post_id": 50379119, "comment_id": 87774481, "body": "<code>struct sockaddr_storage sa = {};:w</code> is not valid C. That looks more like C++/vim."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1526501469, "post_id": 50379119, "comment_id": 87774544, "body": "@melpomene You gotta make sure your post is saved to the web. :D :w"}, {"owner": {"reputation": 823, "user_id": 8219383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-skKjxh6jxds/AAAAAAAAAAI/AAAAAAAAtPU/vVIFbedVzvo/photo.jpg?sz=128", "display_name": "Michael Beer", "link": "https://stackoverflow.com/users/8219383/michael-beer"}, "edited": false, "score": 0, "creation_date": 1526501547, "post_id": 50379119, "comment_id": 87774582, "body": "It is valid C11 I am quite sure. For the &#39;:w&#39; - too much vim tonight you are right ;)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1526502464, "post_id": 50379119, "comment_id": 87775012, "body": "@MichaelBeer, although I am prepared to believe that your C compiler accepts an empty pair of braces as an initializer, that <i>does not</i> conform to C11 or any earlier C standard.  An initializer list must contain at least one initializer.  The canonical way to write an initializer such as you seem to be trying to express is <code>{0}</code>."}, {"owner": {"reputation": 823, "user_id": 8219383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-skKjxh6jxds/AAAAAAAAAAI/AAAAAAAAtPU/vVIFbedVzvo/photo.jpg?sz=128", "display_name": "Michael Beer", "link": "https://stackoverflow.com/users/8219383/michael-beer"}, "edited": false, "score": 0, "creation_date": 1526502991, "post_id": 50379119, "comment_id": 87775218, "body": "Thanks for the hint! I will leave the typo there, otherwise these comments become ununderstandable, and I think people will get the basic point of my question nevertheless..."}], "answers": [{"comments": [{"owner": {"reputation": 823, "user_id": 8219383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-skKjxh6jxds/AAAAAAAAAAI/AAAAAAAAtPU/vVIFbedVzvo/photo.jpg?sz=128", "display_name": "Michael Beer", "link": "https://stackoverflow.com/users/8219383/michael-beer"}, "edited": false, "score": 0, "creation_date": 1526507578, "post_id": 50380099, "comment_id": 87777053, "body": "Hey, that has been precisely what I was looking for. Thanks a lot - you saved my night ;)"}], "tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": true, "score": 1, "last_activity_date": 1526505875, "creation_date": 1526505875, "answer_id": 50380099, "question_id": 50379119, "link": "https://stackoverflow.com/questions/50379119/find-out-transport-type-for-socket/50380099#50380099", "title": "Find out transport type for socket", "body": "<p>Use the <code>getsockopt(descriptor, SO_TYPE, ...)</code> as described in the <a href=\"http://man7.org/linux/man-pages/man7/socket.7.html\" rel=\"nofollow noreferrer\"><code>man 7 socket</code></a> man page. For example:</p>\n\n<pre><code>#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;errno.h&gt;\n\nint socket_type(const int fd)\n{\n    int        type = -1;\n    socklen_t  typelen = sizeof type;\n\n    if (fd == -1) {\n        errno = EINVAL;\n        return -1;\n    }\n    if (getsockopt(fd, SOL_SOCKET, SO_TYPE, &amp;type, &amp;typelen) == -1)\n        return -1;\n\n    errno = 0;\n    return type;\n}\n</code></pre>\n\n<p>For TCP (<code>AF_INET</code> and <code>AF_INET6</code> socket families), this will return <code>SOCK_STREAM</code>; for UDP, <code>SOCK_DGRAM</code>.        </p>\n"}], "owner": {"reputation": 823, "user_id": 8219383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-skKjxh6jxds/AAAAAAAAAAI/AAAAAAAAtPU/vVIFbedVzvo/photo.jpg?sz=128", "display_name": "Michael Beer", "link": "https://stackoverflow.com/users/8219383/michael-beer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 50380099, "answer_count": 1, "score": 1, "last_activity_date": 1526505875, "creation_date": 1526501189, "last_edit_date": 1526501275, "question_id": 50379119, "link": "https://stackoverflow.com/questions/50379119/find-out-transport-type-for-socket", "title": "Find out transport type for socket", "body": "<p>I am currently struggling with finding out the ip, port and transport type of a inet/inet6 socket in C.</p>\n\n<p>The problem is that I got a socket fd like</p>\n\n<pre><code>int s = socket( ... );\nbind(s, soa, soa_len);\n</code></pre>\n\n<p>Now, I got <code>s</code> and want to find out which Transport/Interface/Port it is bound to.\nInterface and Port is easy enough via</p>\n\n<pre><code>struct sockaddr_storage sa = {};:w\ngetsockname(s, (struct sockaddr*) &amp;sa, sizeof(sa));\n/* parse the fields of sa depending on sa.sa_family */\n</code></pre>\n\n<p>However, I cannot figure out a way to find out whether <code>s</code> is a TCP or UDP socket - it must be somehow associated however - So:</p>\n\n<p>How can I find out the transport protocol <code>s</code> uses?</p>\n"}, {"tags": ["c", "linux-device-driver"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1526498804, "post_id": 50378514, "comment_id": 87773328, "body": "What I usually do is comment it out, make a note in my log and retest.  If it still works, fine.  If, at some time in the future, there is some inexplicable problem, you have your note to remind you to try uncommenting it.  Like you say, it&#39;s probably old debug code that got left in."}, {"owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1526499025, "post_id": 50378514, "comment_id": 87773428, "body": "Yea, that&#39;s my current approach as well, since science hasn&#39;t given us time travel yet to go back and figure out what the original developer was thinking.  I was just wondering if there&#39;s anything I&#39;m missing, because to me it looks like that code isn&#39;t doing anything."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1526507382, "post_id": 50378514, "comment_id": 87776982, "body": "In driver code <code>get</code> increments a reference count and <code>put</code> decrements it."}, {"owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1526507634, "post_id": 50378514, "comment_id": 87777074, "body": "@stark, so since these two operations are happening one right after another, the net effect is nothing happens?  Am I missing something?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1526515087, "post_id": 50378514, "comment_id": 87779081, "body": "<code>get_cpu</code> calls <code>preempt_disable</code> and <code>put_cpu</code> calls <code>preempt_enable</code> so there are some execution barriers."}, {"owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "edited": false, "score": 0, "creation_date": 1526517509, "post_id": 50378514, "comment_id": 87779589, "body": "So there is an execution barrier between the two lines of code?  The net effect should be nothing, no?"}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 2, "creation_date": 1526587845, "post_id": 50378514, "comment_id": 87815424, "body": "Looks like a dead code. Side effect of it would be a barrier, which might sync write buffers and caches in CPU. Such code requires very deep knowledge of the code context to understand intentions."}], "owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526498444, "creation_date": 1526498444, "question_id": 50378514, "link": "https://stackoverflow.com/questions/50378514/weird-get-cpu-put-cpu-call", "title": "Weird get_cpu()/put_cpu() call", "body": "<p>I ran into a weird chunk of code in a driver I am maintaining and I can't explain what it does or why it exists:</p>\n\n<pre><code>internal_driver_struct-&gt;prev_cpu = get_cpu();\nput_cpu();\n</code></pre>\n\n<p>Basically there's an internal structure that keeps track of the return of <code>get_cpu()</code>, but this value is never checked ever again.</p>\n\n<p>Is it safe to assume that this is a bug or vestigial code?  What (if any) side effects are there from calling <code>get_cpu()</code> followed immediately by <code>put_cpu()</code>?  Note that this code is reached from the driver's implementation of <code>read()</code> (i.e., the user context).</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1526498735, "post_id": 50378346, "comment_id": 87773288, "body": "<code>... On error, -1 is returned and errno is set to indicate the error....</code> --&gt;&gt; <code>EINVAL The named file is not a symbolic link.</code>"}], "answers": [{"comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1526501655, "post_id": 50378506, "comment_id": 87774632, "body": "Please don&#39;t just point people at a bunch of manpages, manpages often only make sense if you have already internalized how to read them.  Also, please recommend <code>fts</code> instead of <code>nftw</code>, as <code>nftw</code> is not guaranteed to be thread-safe, and also may not support very large directories."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1526506515, "post_id": 50378506, "comment_id": 87776678, "body": "@zwol: <a href=\"http://man7.org/linux/man-pages/man3/nftw.3.html\" rel=\"nofollow noreferrer\"><code>nftw()</code></a> most definitely supports very large directories. The GNU C library implementation is known to be thread-safe, unless one of the functions (or another thread) changes the current working directory (<code>nftw()</code> itself does not change it). POSIX.1 does not guarantee it. <code>nftw()</code> does not need a descriptor per depth; it only uses <i>up to</i> one per depth. Plus, it is POSIX.1-2008, whereas <code>fts</code> is BSD-specific (but happens to be supported by GNU C library)."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 5, "last_activity_date": 1526531709, "last_edit_date": 1526531709, "creation_date": 1526498401, "answer_id": 50378506, "question_id": 50378346, "link": "https://stackoverflow.com/questions/50378346/how-to-skip-a-file-when-scanning-files-in-a-directory/50378506#50378506", "title": "How to skip a file when scanning files in a directory", "body": "<p>Your question should have some <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>. See also <a href=\"http://man7.org/linux/man-pages/man7/inode.7.html\" rel=\"nofollow noreferrer\">inode(7)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man7/symlink.7.html\" rel=\"nofollow noreferrer\">symlink(7)</a>. Read <a href=\"http://www.cse.hcmut.edu.vn/~hungnq/courses/nap/alp.pdf\" rel=\"nofollow noreferrer\"><em>Advanced Linux Programming</em></a> or something newer.</p>\n\n<p>Consider using <a href=\"http://man7.org/linux/man-pages/man3/nftw.3.html\" rel=\"nofollow noreferrer\">nftw(3)</a> or <a href=\"http://man7.org/linux/man-pages/man3/fts.3.html\" rel=\"nofollow noreferrer\">fts(3)</a> (if you need to scan the subdirectories recursively) or at least do a <a href=\"http://man7.org/linux/man-pages/man2/stat.2.html\" rel=\"nofollow noreferrer\">stat(2)</a> with the file path (since you are scanning the current directory, you don't need to construct that file path).  Remember to skip the entries for <code>.</code> and <code>..</code>; so try perhaps</p>\n\n<pre><code> d = opendir(\".\");\n while((dir = readdir(d)) != NULL) {\n   struct stat mystat;\n   if (!strcmp(dir-&gt;d_name, \".\") || !strcmp(dir-&gt;d_name, \"..\")) continue;\n   memset (&amp;mystat, 0, sizeof(mystat));\n   if (stat(dir-&gt;d_name, &amp;mystat) ||  S_ISLNK(mystat.st_mode))\n     continue;\n   /// etc...\n } \n</code></pre>\n\n<p>There are many cases that you might want to handle. See also <a href=\"http://man7.org/linux/man-pages/man3/errno.3.html\" rel=\"nofollow noreferrer\">errno(3)</a>. What about a symlink to self? What about <a href=\"http://man7.org/linux/man-pages/man7/unix.7.html\" rel=\"nofollow noreferrer\">unix(7)</a> sockets? <a href=\"http://man7.org/linux/man-pages/man7/fifo.7.html\" rel=\"nofollow noreferrer\">fifo(7)</a>-s? permissions?</p>\n\n<p>(We don't have time and space to explain all the details; you do need to read a lot)</p>\n"}, {"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 2, "last_activity_date": 1526501224, "creation_date": 1526501224, "answer_id": 50379129, "question_id": 50378346, "link": "https://stackoverflow.com/questions/50378346/how-to-skip-a-file-when-scanning-files-in-a-directory/50379129#50379129", "title": "How to skip a file when scanning files in a directory", "body": "<p>Normally, if you have</p>\n\n<pre><code>d = opendir(dirname);\nwhile((dir = readdir(d)) != NULL) {\n    some_operation(dir-&gt;d_name);\n}\n</code></pre>\n\n<p><code>some_operation</code> will fail for <em>every</em> <code>d_name</code>, because the path you should have passed to <code>some_operation</code> is <code>${dirname}/${dir-&gt;d_name}</code>, not just <code>dir-&gt;d_name</code>.</p>\n\n<p>Your program, though, is hardwired to pass the special directory <code>.</code> to <code>opendir</code>; when you do that, it <em>is</em> safe to pass just <code>dir-&gt;d_name</code> to <code>some_operation</code>, since <code>.</code> is always the current working directory.  Your problem is instead that <code>readlink</code> <em>does not</em> fail when applied to a broken symlink, but <em>does</em> fail when applied to a directory entry that isn't a symlink.  It would have been easier to figure this out for yourself if you had included <code>dir-&gt;d_name</code> and <code>strerror(errno)</code> in your error message, like this:</p>\n\n<pre><code>d = opendir(\".\");\nwhile ((dir = readdir(d)) != 0) {\n   char buff[256];\n   if (readlink(dir-&gt;d_name, buff, sizeof buff) {\n       printf(\"%s: readlink failed: %s\\n\", dir-&gt;d_name, strerror(errno));\n   } else {\n       printf(\"%s -&gt; %s\\n\", dir-&gt;d_name, buff);\n   }\n}\n</code></pre>\n\n<p>If you had done that, you would have gotten output like this:</p>\n\n<pre><code>.gnome2: readlink failed: Invalid argument\n.python_history: readlink failed: Invalid argument\ntest.s: readlink failed: Invalid argument\nbin -&gt; .local/bin\n[etc]\n</code></pre>\n\n<p>and then it would probably have occurred to you to look at the <code>readlink</code> manpage and discover that it returns <code>EINVAL</code> when applied to something that isn't a symlink.</p>\n\n<p>The proper way to detect a broken symlink is by observing that <code>lstat</code> succeeds but <code>stat</code> fails with <code>ENOENT</code>:</p>\n\n<pre><code>struct stat lst, st;\nif (lstat(dir-&gt;d_name, &amp;lst)) {\n  /* some other kind of problem */\n} else if (!S_ISLNK(lst.st_mode)) {\n  /* not a symlink at all */\n} else if (stat(dir-&gt;d_name, &amp;st)) {\n  if (errno == ENOENT) {\n    /* broken symlink */\n  } else {\n    /* some other kind of problem */\n  }\n} else {\n  /* valid symlink, `lst` tells you about the link,\n     `st` tells you about what it points to */\n}\n</code></pre>\n\n<p>If you don't need any of the other information from <code>lst</code>, and your filesystem supports <code>d_type</code>, you can skip the <code>lstat</code> call:</p>\n\n<pre><code>if (dir-&gt;d_type == DT_LNK) {\n   struct stat st;\n   if (stat(dir-&gt;d_name, &amp;st)) {\n     if (errno == ENOENT) {\n       /* broken symlink */\n     }\n   }\n }\n</code></pre>\n\n<p>But don't neglect to do the entire dance with both <code>lstat</code> and <code>stat</code> in the <code>DT_UNKNOWN</code> case, or you'll be sad when you try to run your program on a filesystem that doesn't report d_type information.</p>\n"}], "owner": {"reputation": 65, "user_id": 9802165, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-l76lDHJg74o/AAAAAAAAAAI/AAAAAAAAAZk/hJAYGO-4Hcs/photo.jpg?sz=128", "display_name": "Sulav k", "link": "https://stackoverflow.com/users/9802165/sulav-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "accepted_answer_id": 50378506, "answer_count": 2, "score": -4, "last_activity_date": 1526531709, "creation_date": 1526497788, "last_edit_date": 1526498283, "question_id": 50378346, "link": "https://stackoverflow.com/questions/50378346/how-to-skip-a-file-when-scanning-files-in-a-directory", "title": "How to skip a file when scanning files in a directory", "body": "<p>I have a program that list all the files in a directory. If a file is broken link, I am wanting to skip that file and continue scanning other files in a file. I would highly appreciate if someone can point where I am wrong. Following is  part of my code </p>\n\n<pre><code>d = opendir(\".\");\nwhile((dir = readdir(d)) != NULL) {\n\n char buff[256];\n int target = readlink (dir-&gt;d_name, buff, sizeof(buff));\n    if (target == -1)\n    {\n        printf(\"i found broken link  so continuing to next file..\\n\");\n        continue;\n    }\n}\n</code></pre>\n\n<p>The problem I have is, it is printing following while I only have one broken link</p>\n\n<pre><code>i found broken link  so continuing to next file\ni found broken link  so continuing to next file\ni found broken link  so continuing to next file\n</code></pre>\n\n<p>and goes on until the last file.</p>\n"}, {"tags": ["ios", "c", "swift", "pjsip"], "comments": [{"owner": {"reputation": 6932, "user_id": 3476191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pJGHG.png?s=128&g=1", "display_name": "NobodyNada", "link": "https://stackoverflow.com/users/3476191/nobodynada"}, "edited": false, "score": 1, "creation_date": 1526498140, "post_id": 50378274, "comment_id": 87772998, "body": "Can you please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?  As far as I know there should be no difference between the first and second two."}, {"owner": {"reputation": 337, "user_id": 2176116, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbaed024e882f8361b71047528d07559?s=128&d=identicon&r=PG", "display_name": "SEJBR", "link": "https://stackoverflow.com/users/2176116/sejbr"}, "reply_to_user": {"reputation": 6932, "user_id": 3476191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pJGHG.png?s=128&g=1", "display_name": "NobodyNada", "link": "https://stackoverflow.com/users/3476191/nobodynada"}, "edited": false, "score": 0, "creation_date": 1526498514, "post_id": 50378274, "comment_id": 87773166, "body": "I am not sure If I can since I am being held by the licensing. Hence a mockup instead of the code. I just asked since this might have been an issue with a language quirk I didn&#39;t know about. The whole code amounts to the examples I gave. The &quot;working&quot; and not working mockups are different in the exact same way the real code is. Moving the second c method from swift method to swift init works while the execution of said c method inside method other than init does not."}, {"owner": {"reputation": 6932, "user_id": 3476191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pJGHG.png?s=128&g=1", "display_name": "NobodyNada", "link": "https://stackoverflow.com/users/3476191/nobodynada"}, "edited": false, "score": 0, "creation_date": 1526498691, "post_id": 50378274, "comment_id": 87773259, "body": "There&#39;s no language quirk I know of; in order for us to be able to help, you&#39;ll have to mock up enough of the C library for us to see what&#39;s going on.  As this question currently stands, there&#39;s not really anything we can do to help."}, {"owner": {"reputation": 337, "user_id": 2176116, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbaed024e882f8361b71047528d07559?s=128&d=identicon&r=PG", "display_name": "SEJBR", "link": "https://stackoverflow.com/users/2176116/sejbr"}, "reply_to_user": {"reputation": 6932, "user_id": 3476191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pJGHG.png?s=128&g=1", "display_name": "NobodyNada", "link": "https://stackoverflow.com/users/3476191/nobodynada"}, "edited": false, "score": 0, "creation_date": 1526498897, "post_id": 50378274, "comment_id": 87773370, "body": "I might be able to pass this though my supervisor tomorrow. If I remember correctly the C library does a movq between it&#39;s variable and the passed UnsafeMutablePointer. I&#39;ll edit the question with the library&#39;s method github link in a sec"}, {"owner": {"reputation": 1323, "user_id": 6900902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a5448d619d9cd1bd6341a384301587?s=128&d=identicon&r=PG&f=1", "display_name": "bscothern", "link": "https://stackoverflow.com/users/6900902/bscothern"}, "edited": false, "score": 0, "creation_date": 1526536172, "post_id": 50378274, "comment_id": 87783887, "body": "If you use the first example and call your <code>register()</code> function at the end of <code>init()</code> does it work?"}, {"owner": {"reputation": 337, "user_id": 2176116, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbaed024e882f8361b71047528d07559?s=128&d=identicon&r=PG", "display_name": "SEJBR", "link": "https://stackoverflow.com/users/2176116/sejbr"}, "edited": false, "score": 0, "creation_date": 1526539672, "post_id": 50378274, "comment_id": 87785635, "body": "It doesn&#39;t. It only works if I copy the code from register() to the init(). I also tried moving every single variable outside init to class in case anything got destroyed after init due to not being a class parameter but it also didn&#39;t help."}], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 2176116, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbaed024e882f8361b71047528d07559?s=128&d=identicon&r=PG", "display_name": "SEJBR", "link": "https://stackoverflow.com/users/2176116/sejbr"}, "edited": false, "score": 0, "creation_date": 1526497998, "post_id": 50378389, "comment_id": 87772929, "body": "Sadly the C library requires an UnsafePointers/UnsafeMutablePointers and just passing the variable passes a c_library_type instead of UnsafePointer&lt;c_library_type&gt;"}], "tags": [], "owner": {"reputation": 668, "user_id": 9623144, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/169605b0e4c4c074b98b902b65e6174d?s=128&d=identicon&r=PG&f=1", "display_name": "Amber K", "link": "https://stackoverflow.com/users/9623144/amber-k"}, "is_accepted": false, "score": -2, "last_activity_date": 1526497940, "creation_date": 1526497940, "answer_id": 50378389, "question_id": 50378274, "link": "https://stackoverflow.com/questions/50378274/swift-class-property-reference-points-disappear-after-init-method/50378389#50378389", "title": "Swift class property reference points disappear after init method", "body": "<p>I don't see the reason of using &amp; operator as reference types are by default pass by reference and you only need &amp; operator when you need to work with value types to pass their memory address as a reference to be modified. I guess this should fix problem if the function is not taking value types in C.</p>\n"}, {"tags": [], "owner": {"reputation": 337, "user_id": 2176116, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbaed024e882f8361b71047528d07559?s=128&d=identicon&r=PG", "display_name": "SEJBR", "link": "https://stackoverflow.com/users/2176116/sejbr"}, "is_accepted": true, "score": 0, "last_activity_date": 1526643839, "creation_date": 1526643839, "answer_id": 50410603, "question_id": 50378274, "link": "https://stackoverflow.com/questions/50378274/swift-class-property-reference-points-disappear-after-init-method/50410603#50410603", "title": "Swift class property reference points disappear after init method", "body": "<p>With some help from our C developers we've found the reason for this issue.</p>\n\n<p>Swift when variable is passed to a method - copies the root of the reference but holds the same references for it's children which caused issues with how C library checked the reference values. This didn't happen when everything was in one method because only local references were passed and they were not copied.</p>\n\n<p>Example:</p>\n\n<pre><code>variable1 :: refId = 0x001\nvariable1.prop1 :: refId = 0x0011\nvariable1.prop2 :: refId = 0x0012\nvariable1.prop3 :: refId = 0x0013\n\nReference passed to the C library:\n\n(copy) variable1 :: refId = 0x002\nvariable1.prop1 :: refId = 0x0011\nvariable1.prop2 :: refId = 0x0012\nvariable1.prop3 :: refId = 0x0013\n</code></pre>\n\n<p>The library checked if an array reference point was different then first value reference point. If so it assumed that the array was not empty.</p>\n\n<p>Since the main reference was copied hence had different reference point, the code assumed there was some value which in fact didn't exist and we got bad_access due to trying to access a non-existant reference.</p>\n\n<p>The issue was solved with changing the register() method to receive the parameters as inout instead of using self.</p>\n\n<p>Example based on previous mockup :</p>\n\n<pre><code>class Account {\n    var accId: c_library_type = 0\n    var accCfg: c_library_type2 = c_library_type2()\n\n    init()\n    {\n        c_config_setting_defaults(&amp;self.accCfg)\n        //other code\n    }\n\n    public func register(id: inout c_library_type, cfg: inout c_library_type2)\n    {\n        c_register_method(&amp;id, &amp;cfg)\n    }   \n}\n\n//Somewhere else in the code\n\nvar account: Account = Account()\naccount.register(id: &amp;account.accId, cfg: &amp;account.accCfg)  \n</code></pre>\n\n<p>Thank you for your time to anyone who commented on the issue.</p>\n"}], "owner": {"reputation": 337, "user_id": 2176116, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fbaed024e882f8361b71047528d07559?s=128&d=identicon&r=PG", "display_name": "SEJBR", "link": "https://stackoverflow.com/users/2176116/sejbr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 50410603, "answer_count": 2, "score": 0, "last_activity_date": 1526643839, "creation_date": 1526497423, "last_edit_date": 1526506642, "question_id": 50378274, "link": "https://stackoverflow.com/questions/50378274/swift-class-property-reference-points-disappear-after-init-method", "title": "Swift class property reference points disappear after init method", "body": "<p>First of all I am not an IOS developer so my knowledge is lacking.\nI do apologise if this question is trivial but I don't understand the system enough to know how to even debug an issue like that, so thank you for any time spent on my issue.</p>\n\n<p>I was tasked with writing an VoIP app for IOS using PJSIP library.</p>\n\n<p>My mockup function worked fine and I began to sort things into their own classes where it all started to fall apart.</p>\n\n<p>The C library requires a lot of referenced variables/pointers. With my new  instantiated class if I put everything inside the init() constructor it works. But when I start to separate some parts to seperate methods inside the same class the variables seem to change reference points.</p>\n\n<p>Here's a mockup written in notepad since I cannot provide the code itself and at this hour I don't have access to the Mac:</p>\n\n<pre><code>class Account {\n    var accId: c_library_type = 0\n    var accCfg: c_library_type2 = c_library_type2()\n\n    init()\n    {\n        c_config_setting_defaults(&amp;self.accCfg)\n        //other code\n    }\n\n    public func register()\n    {\n        c_register_method(&amp;self.accId, &amp;self.accCfg) //Throws \"exc_bad_access code=1 address=0x0\"\n    }   \n}\n\n//Somewhere else in the code\n\nvar account: Account = Account()\naccount.register()  \n</code></pre>\n\n<p>If I were to do </p>\n\n<pre><code>class Account {\n    var accId: c_library_type = 0\n    var accCfg: c_library_type2 = c_library_type2()\n\n    init()\n    {\n        c_config_setting_defaults(&amp;self.accCfg)\n        //other code\n        c_register_method(&amp;self.accId, &amp;self.accCfg)\n    }   \n}\n\n//Somewhere else in the code\n\nvar account: Account = Account()\n</code></pre>\n\n<p>There is no issue and the c_register_method works as expected.</p>\n\n<p>I would really appreciate any help regarding this issue.</p>\n\n<p>Edit: The library c file and methods which throw the memory exception:\n<a href=\"https://github.com/chakrit/pjsip/blob/master/pjsip/src/pjsua-lib/pjsua_acc.c#L116\" rel=\"nofollow noreferrer\">https://github.com/chakrit/pjsip/blob/master/pjsip/src/pjsua-lib/pjsua_acc.c#L116</a>\n<a href=\"https://github.com/chakrit/pjsip/blob/master/pjsip/src/pjsip/sip_util.c#L435\" rel=\"nofollow noreferrer\">https://github.com/chakrit/pjsip/blob/master/pjsip/src/pjsip/sip_util.c#L435</a></p>\n"}, {"tags": ["c", "printf", "file-handling"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1526496724, "post_id": 50378081, "comment_id": 87772304, "body": "Binary files are often containing zeros. That is the <code>\\0</code> characters."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1526496788, "post_id": 50378081, "comment_id": 87772337, "body": "reading a text file <i>as binary</i> will make your functions print properly"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1526496800, "post_id": 50378081, "comment_id": 87772345, "body": "A character string is null terminated. If there is a 0 byte in the string then as far as printf is concerned that is the end of the string. Not all characters are printable, so if your file contains those then you get gibberish."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1526496846, "post_id": 50378081, "comment_id": 87772371, "body": "And yes, &quot;gibberish&quot; <i>is</i> characters."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1526497022, "post_id": 50378081, "comment_id": 87772466, "body": "Let&#39;s define what <i>text file</i> is :)"}, {"owner": {"reputation": 87, "user_id": 5859944, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VFSfK.jpg?s=128&g=1", "display_name": "anjanik012", "link": "https://stackoverflow.com/users/5859944/anjanik012"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1526497199, "post_id": 50378081, "comment_id": 87772549, "body": "@EugeneSh. Why would that &quot;gibberish&quot; be not treated as <code>unsigned char</code> when the byte array is <code>unsigned char</code>?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1526497233, "post_id": 50378081, "comment_id": 87772563, "body": "When you print it as <code>%c</code> it really doesn&#39;t matter signed or unsigned. It is character. Characters (in common meaning) don&#39;t have signs."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1526497315, "post_id": 50378081, "comment_id": 87772598, "body": "When <code>&quot;%c&quot;</code> is used, the <code>int</code> argument is converted to <code>unsigned char</code> during <code>printf()</code> processing and the corresponding character is printed."}, {"owner": {"reputation": 87, "user_id": 5859944, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VFSfK.jpg?s=128&g=1", "display_name": "anjanik012", "link": "https://stackoverflow.com/users/5859944/anjanik012"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1526497331, "post_id": 50378081, "comment_id": 87772609, "body": "@EugeneSh. Any suggestions on achieving that?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1526497345, "post_id": 50378081, "comment_id": 87772615, "body": "What is &quot;that&quot;?"}, {"owner": {"reputation": 87, "user_id": 5859944, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VFSfK.jpg?s=128&g=1", "display_name": "anjanik012", "link": "https://stackoverflow.com/users/5859944/anjanik012"}, "edited": false, "score": 0, "creation_date": 1526497378, "post_id": 50378081, "comment_id": 87772633, "body": "gibberish to <code>unsigned char</code> when printing."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1526497441, "post_id": 50378081, "comment_id": 87772662, "body": "You want to print numeric values? Then see this: <a href=\"https://stackoverflow.com/questions/15736497/how-to-print-an-unsigned-char-in-c\" title=\"how to print an unsigned char in c\">stackoverflow.com/questions/15736497/&hellip;</a> Looks like your question is totally unrelated to your real problem then."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1526497668, "post_id": 50378081, "comment_id": 87772763, "body": "Try <code>printf(&quot;%c&quot;,string[i]);</code> --&gt; <code>printf(&quot; %hhu&quot;,string[i]);</code>"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1526498057, "post_id": 50378081, "comment_id": 87772963, "body": "BTW, that <code>fread</code> line and its comment &#39;Read in the entire file&#39; are wrong. It is possible that <code>fread</code> returns less than you asked for. Which is why it has a return value. That return value <b>MUST BE CHECKED</b>. Otherwise, so many bugs."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526501963, "post_id": 50378081, "comment_id": 87774760, "body": "&quot;As it is clear that it is nothing but a string&quot;. It is not. The file is binary. Binary files are not strings. &quot;Which puts gibberish on the screen&quot; What do you expect it to print?"}], "answers": [{"tags": [], "owner": {"reputation": 2104, "user_id": 5129504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/476994845791992/picture?type=large", "display_name": "Josh Weinstein", "link": "https://stackoverflow.com/users/5129504/josh-weinstein"}, "is_accepted": false, "score": 1, "last_activity_date": 1526497313, "creation_date": 1526497313, "answer_id": 50378243, "question_id": 50378081, "link": "https://stackoverflow.com/questions/50378081/regarding-strings-in-printf/50378243#50378243", "title": "Regarding strings in printf", "body": "<p>The first problem here is you are mixing the purposing of how your reading the file. To read <em>binary</em> data from a file, and subsequently print that binary data, you should always use <code>unsigned char</code> and <code>unsigned char*</code> to store data read from a <em>binary</em> file.</p>\n\n<p>This is because in order to get an accurate representation of that data printed, you need to use the <code>\"%u\"</code> type flag in format strings to <code>printf</code>. Only <a href=\"http://en.cppreference.com/w/c/string/byte/isprint\" rel=\"nofollow noreferrer\">some characters are printable</a> according to ASCII, meaning if you desire to see all the binary data in your file, you will not be able to see some of it printed if you use the <code>\"%c\"</code> flag.</p>\n\n<p>A binary version of your function would be:</p>\n\n<pre><code>void traverse(unsigned char *string ,size_t size){\n  for(size_t i=0;i&lt;size;i++)\n    printf(\"%u\",string[i]);\n}\n</code></pre>\n\n<p>The second issue is</p>\n\n<blockquote>\n  <p>should print the entrire contents of a file as if it were a string. And it does so in simple text files but not in binary ones.</p>\n</blockquote>\n\n<p>This is not true. Using the <code>\"%s\"</code> flag prints characters as if they were printable chars, it will terminate when it reaches a null, <code>\\0</code> character. You cannot efficiently use <code>%s</code> to print binary data.</p>\n"}, {"tags": [], "owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "is_accepted": true, "score": 2, "last_activity_date": 1526497363, "creation_date": 1526497363, "answer_id": 50378258, "question_id": 50378081, "link": "https://stackoverflow.com/questions/50378081/regarding-strings-in-printf/50378258#50378258", "title": "Regarding strings in printf", "body": "<blockquote>\n  <p>Why printf doesn't treat buffer as a character string incase of binary files?</p>\n</blockquote>\n\n<p><code>printf(\"%s\",buffer)</code> <em>does</em> assume that <code>buffer</code> contains a C string.  The problem is, that's not what <code>buffer</code> actually contains.  Your <code>buffer</code> actually contains the bytes from a binary file.</p>\n\n<p>A C string is terminated by the first zero byte (a.k.a., '\\0', a.k.a., ASCII NUL), and an arbitrary non-text file (a.k.a., \"binary file\") could contain zero bytes anywhere within itself.  The printf \"%s\" format will stop as soon as it sees the first zero byte.</p>\n\n<blockquote>\n  <p>Why printf in function traverse puts gibberish instead of characters?</p>\n</blockquote>\n\n<p>That \"gibberish\" <em>is</em> characters.  But the characters don't mean anything because the file that you are trying to interpret as a sequence of characters was not meant to be interpreted in that way.</p>\n\n<p>A text file is a sequence of bytes that are meant to be rendered according to some <em><a href=\"https://en.wikipedia.org/wiki/Character_encoding\" rel=\"nofollow noreferrer\">character encoding</a></em>, and which <em>usually</em> is meant to convey some kind of human-readable information.  An arbitrary \"binary\" file probably contains a sequence of bytes that are not supposed to represent human readable text.  They represent something else, that some computer program understands.</p>\n\n<p>The printf <code>\"%s\"</code> <em>attempts</em> to render those bytes according to some character encoding system (often either <a href=\"https://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow noreferrer\">UTF-8</a> or <a href=\"https://en.wikipedia.org/wiki/ASCII\" rel=\"nofollow noreferrer\">US-ASCII</a>), but (a) it won't always be able to do so, and (b) even when it <em>is</em> able to do so, the character sequence won't mean anything.</p>\n"}], "owner": {"reputation": 87, "user_id": 5859944, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VFSfK.jpg?s=128&g=1", "display_name": "anjanik012", "link": "https://stackoverflow.com/users/5859944/anjanik012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 50378258, "answer_count": 2, "score": 0, "last_activity_date": 1526497363, "creation_date": 1526496612, "question_id": 50378081, "link": "https://stackoverflow.com/questions/50378081/regarding-strings-in-printf", "title": "Regarding strings in printf", "body": "<p>From this post <a href=\"https://stackoverflow.com/a/22059317/5859944\">https://stackoverflow.com/a/22059317/5859944</a></p>\n\n<pre><code>FILE *fileptr;\nchar *buffer;\nlong filelen;\n\nfileptr = fopen(\"myfile.txt\", \"rb\");  // Open the file in binary mode\nfseek(fileptr, 0, SEEK_END);          // Jump to the end of the file\nfilelen = ftell(fileptr);             // Get the current byte offset \n                                         in the file\nrewind(fileptr);                      // Jump back to the beginning of \n                                         the file\n\nbuffer = (char *)malloc((filelen+1)*sizeof(char)); // Enough memory \n                                                      for file + \\0\nfread(buffer, filelen, 1, fileptr); // Read in the entire file\nfclose(fileptr); // Close the file\n</code></pre>\n\n<p>You read a file as a byte array.</p>\n\n<p>As it is clear that it is nothing but a string.\nOne could add a</p>\n\n<pre><code>buffer[filelen] = '\\0';\n</code></pre>\n\n<p>and</p>\n\n<pre><code>printf(\"%s\" , buffer);\n</code></pre>\n\n<p>should print the entrire contents of a file as if it were a string. And it  does so in simple text files but not in binary ones.</p>\n\n<p>For binary files , one has to write a function as follows:</p>\n\n<pre><code>void traverse(char *string ,size_t size){\n  for(size_t i=0;i&lt;size;i++)\n    printf(\"%c\",string[i]);\n}\n</code></pre>\n\n<p>and print each character one by one.\nWhich puts gibberish on the screen.</p>\n\n<ul>\n<li>Why <code>printf</code> doesn't treat <code>buffer</code> as a character string incase of binary files?</li>\n<li>Why <code>printf</code> in function <code>traverse</code> puts gibberish instead of characters?</li>\n</ul>\n\n<p>For the second bullet point, I know that it maybe due to <code>signed char</code> but even if the string is stored as <code>unsigned char</code> results are still the same.</p>\n"}, {"tags": ["c", "list", "struct"], "comments": [{"owner": {"reputation": 1497, "user_id": 5504922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15bc22b2096bef7bf39b68e241b81efb?s=128&d=identicon&r=PG&f=1", "display_name": "EdmCoff", "link": "https://stackoverflow.com/users/5504922/edmcoff"}, "edited": false, "score": 0, "creation_date": 1526496195, "post_id": 50377841, "comment_id": 87772055, "body": "Have you tried using a debugger (gdb or lldb, probably)? It can help you find the actual line that it is crashing on."}], "answers": [{"tags": [], "owner": {"reputation": 1846, "user_id": 2446326, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/TumpQ.jpg?s=128&g=1", "display_name": "alernerdev", "link": "https://stackoverflow.com/users/2446326/alernerdev"}, "is_accepted": false, "score": 0, "last_activity_date": 1526496126, "creation_date": 1526496126, "answer_id": 50377968, "question_id": 50377841, "link": "https://stackoverflow.com/questions/50377841/delete-odd-numbers-in-a-list-c/50377968#50377968", "title": "Delete odd-numbers in a list C", "body": "<p>do you know how to use a debugger and step through the code while looking at the values of the variables?  In any case, in the large \"else\" statement, you are initializing prev=NULL, and then further down, you are referencing prev->prox  -- so you are dereferencing a null pointer</p>\n"}], "owner": {"reputation": 27, "user_id": 5132124, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lXvaIhx3z9c/AAAAAAAAAAI/AAAAAAAAAFk/BfNL91MbPPE/photo.jpg?sz=128", "display_name": "Paolo Gasparro", "link": "https://stackoverflow.com/users/5132124/paolo-gasparro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526506940, "creation_date": 1526495613, "last_edit_date": 1526506940, "question_id": 50377841, "link": "https://stackoverflow.com/questions/50377841/delete-odd-numbers-in-a-list-c", "title": "Delete odd-numbers in a list C", "body": "<p>I need help for list and nodes in C. I defined them as struct as follow in a .h file:</p>\n\n<pre><code>typedef struct node{\n\n     int value;\n     struct node*prox;\n\n }node;\n\n typedef Nodo *list;\n</code></pre>\n\n<p>I can't understand why the function to delete all odd numbers is not working. The program is just crashing. Where am I doing wrong?</p>\n\n<pre><code>list delete_odd_numbers(list l){\n\n   node*temp;\n   node*current;\n   node*prev;\n\n   if(l-&gt;value%2!=0){         \n\n        temp=l;\n    l=l-&gt;prox;\n    free(temp);\n\n   }else{\n\n       prev=NULL;\n       current=l;\n       while(current!=NULL){\n\n           if(current!=NULL &amp;&amp;current-&gt;value%2!=0){\n\n               temp=current;\n               prev-&gt;prox=current-&gt;prox;\n               free(temp);\n\n           }else{\n\n           prev=current;\n           current=current-&gt;prox;\n\n           }\n       }\n\n   }\n   return l;\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 1, "creation_date": 1526495332, "post_id": 50377667, "comment_id": 87771681, "body": "Read compiler warning one by one &amp; start solving. <code>grade</code> is declared as <code>char</code> type, what should be format specifier for <code>s[i].grade</code> ? <code>%s</code>---&gt; <code>%c</code>."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1526495339, "post_id": 50377667, "comment_id": 87771685, "body": "Grade is a char but you print it with format code <code>%s</code> rather than <code>%c</code>. It has nothing to do with your <code>for</code> loop. If you had compiled with warnings your compiler would have warned yoi about this error."}, {"owner": {"reputation": 3, "user_id": 9601004, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F6Wse_XrBMg/AAAAAAAAAAI/AAAAAAAAA_I/KLsYRgziuiU/photo.jpg?sz=128", "display_name": "Lado Dolidze", "link": "https://stackoverflow.com/users/9601004/lado-dolidze"}, "edited": false, "score": 0, "creation_date": 1526496015, "post_id": 50377667, "comment_id": 87771983, "body": "I guess I am an idiot, thanks friends!"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 5734700, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-brX5HYZDlOE/AAAAAAAAAAI/AAAAAAAAF-8/Rjnq-avv7HM/photo.jpg?sz=128", "display_name": "Craig Nelson", "link": "https://stackoverflow.com/users/5734700/craig-nelson"}, "is_accepted": true, "score": 0, "last_activity_date": 1526495964, "creation_date": 1526495964, "answer_id": 50377927, "question_id": 50377667, "link": "https://stackoverflow.com/questions/50377667/crashing-issue-might-be-due-to-a-for-loop/50377927#50377927", "title": "Crashing issue, might be due to a for loop", "body": "<p>Check out your <code>printf()</code> format codes.  You can break it into smaller chunks for debugging, to see which portion of the <code>printf()</code> is working unexpectedly.</p>\n\n<p>I don't think the crash is due to your <code>for</code> loops.</p>\n"}], "owner": {"reputation": 3, "user_id": 9601004, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F6Wse_XrBMg/AAAAAAAAAAI/AAAAAAAAA_I/KLsYRgziuiU/photo.jpg?sz=128", "display_name": "Lado Dolidze", "link": "https://stackoverflow.com/users/9601004/lado-dolidze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 50377927, "answer_count": 1, "score": 0, "last_activity_date": 1526495964, "creation_date": 1526494886, "question_id": 50377667, "link": "https://stackoverflow.com/questions/50377667/crashing-issue-might-be-due-to-a-for-loop", "title": "Crashing issue, might be due to a for loop", "body": "<p>My program keeps crashing while I run it. I have isolated parts of it (using /**/) to try and figure out what the issue is, and I think it has something to do with the second for loop in my sort function, since isolating that prevents the crashing. However, I've tried fixing it in several different ways (using while/do loops instead, etc), but it manages to keep crashing. Ive also looked at the parameters and how I declared it in main, but I can't see an issue with that. Knowing me, its probably something really dumb ive been missing for hours trying to fix this. Any help would be greatly appreciated </p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define SIZE 5\n\nstruct student\n{\n    char name[20];\n    int hw1, hw2, hw3, ex1, ex2, totalhw, totalex;\n    float classperc;\n    char grade;\n};\n\n\nvoid student_info(struct student s[], int n, int *classex1, int *classex2, int *a, int *b, int *c, int *d, int *f)\n{\n    for (int i = 0; i &lt; n; i++)\n    {\n        printf(\"\\n\\nPlease enter the student's name:\\n\");\n        gets_s(s[i].name, 20);\n\n        printf(\"\\nPlease enter the student's homework grades:\\n\");\n        scanf(\"%d %d %d\", &amp;(s[i].hw1), &amp;(s[i].hw2), &amp;(s[i].hw3));\n\n        printf(\"\\nPlease enter the student's exam scores:\\n\");\n        scanf(\"%d %d\", &amp;(s[i].ex1), &amp;(s[i].ex2));\n        getchar();\n\n        s[i].totalhw = s[i].hw1 + s[i].hw2 + s[i].hw3;  \n        s[i].totalex = s[i].ex1 + s[i].ex2;\n\n        *classex1 += s[i].ex1;\n        *classex2 += s[i].ex2;\n\n        s[i].classperc = ((float)s[i].totalhw / 1.875) + ((float)s[i].totalex / 3.333);\n\n        if (s[i].classperc &gt;= 90)\n        {\n            *a = *a + 1;\n            s[i].grade = 'A';\n        }\n\n        else if (s[i].classperc &gt;= 80)\n        {\n            *b = *b + 1;\n            s[i].grade = 'B';\n        }\n\n        else if (s[i].classperc &gt;= 70)\n        {\n            *c = *c + 1;\n            s[i].grade = 'C';\n        }\n\n        else if (s[i].classperc &gt;= 60)\n        {\n            *d = *d + 1;\n            s[i].grade = 'D';\n        }\n\n        else\n        {\n            *f = *f + 1;\n            s[i].grade = 'F';\n        }\n    }\n}\n\n\nvoid sort(struct student s[], int n)\n{\n    struct student temp;\n    for (int i = 0; i &lt; SIZE - 1; i++) \n    {\n        for (int j = i + 1; j&lt; SIZE; j++)\n        {\n            if (strcmp(s[i].name, s[j].name) &gt; 0)\n            {\n                temp = s[i];\n                s[i] = s[j];\n                s[j] = temp;\n            }\n        }\n    }\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        printf(\"\\nStudent: %s\\nThe Three Homework Scores: %d %d %d\\nThe Two Exam Scores: %d %d\\n\", s[i].name, s[i].hw1, s[i].hw2, s[i].hw3, s[i].ex1, s[i].ex2);\n        printf(\"Total Homework Score: %d\\nTotal Exam Score: %d\\nClass Percentage: %f  Grade: %s\", s[i].totalhw, s[i].totalex, s[i].classperc, s[i].grade); \n// It crashes right before executing this second printf statement (I have no idea why :[)\n    }\n}\n\n\nvoid avg_exams(int classex1, int classex2, float *avgex1, float *avgex2)\n{\n    *avgex1 = classex1 / (float)5;\n    *avgex2 = classex2 / (float)5;\n}\n\nvoid print_classinfo(float avgex1, float avgex2, int a, int b, int c, int d, int f)\n{\n    printf(\"\\n\\nThe Average Exam Score for Exam 1 is: %0.2f\\nThe Average Exam Score for Exam 2 is: %0.2f\\n\", avgex1, avgex2);\n    printf(\"There were %d A's, %d B's, %d C's, %d D's, %d F's in the class overall\\n\\n\", a, b, c, d, f);\n}\n\nvoid main()\n{\n    struct student s[SIZE];\n    int a, b, c, d, f , classex1, classex2;\n    a = b = c = d = f = 0;\n    classex1 = classex2 = 0;\n    float classperc, avgex1, avgex2;\n\n    student_info( s, SIZE, &amp;classex1, &amp;classex2, &amp;a, &amp;b, &amp;c, &amp;d, &amp;f);\n    sort(s, SIZE);\n\n    avg_exams(classex1, classex2, &amp;avgex1, &amp;avgex2);\n    print_classinfo(avgex1, avgex2, a, b, c, d, f);\n\n    system(\"PAUSE\");\n}\n</code></pre>\n"}, {"tags": ["c", "pthreads", "consumer", "producer"], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1526496630, "creation_date": 1526496630, "answer_id": 50378083, "question_id": 50377533, "link": "https://stackoverflow.com/questions/50377533/pthreads-consumer-producer-printing-in-different-files/50378083#50378083", "title": "PThreads.Consumer-Producer! printing in different files", "body": "<p>There is only one open file table for your whole process, shared by all threads in it.  There is one entry in that table for the standard output, and your producer and consumer are contending for it.  It's not clear why.</p>\n\n<p>I'm inclined to think that the immediate reason for your troubles is that <code>fclose()</code>ing the <code>stdout</code> stream releases the stream-level resources, especially the buffer and state-tracking details.  <code>open()</code>ing a file descriptor does not provide those, nor does <code>dup2()</code>ing a file descriptor into a <code>FILE</code> object representing a closed stream.</p>\n\n<p>But it baffles me why you are making it so hard.  Why in the world muck with duping file descriptors?  Your producer and consumer already <code>fopen()</code> the wanted output files, thereby each obtaining its own stream connected with the appropriate file (<code>fp1</code> and <code>fp2</code>).  It seems to me that all you need to do, then, is to write to those streams via <code>fprintf()</code>, <em>etc</em>., instead of going to a lot of trouble to be able to use <code>printf()</code> instead.</p>\n\n<p>That would be more efficient, too, since you oughtn't to need to keep opening and closing the files.  Open each once, at the beginning, as you already do, and close each once, at the end, which you presently <em>fail</em> to do.</p>\n"}], "owner": {"reputation": 1, "user_id": 9499399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dionysis", "link": "https://stackoverflow.com/users/9499399/dionysis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526496630, "creation_date": 1526494398, "last_edit_date": 1526494878, "question_id": 50377533, "link": "https://stackoverflow.com/questions/50377533/pthreads-consumer-producer-printing-in-different-files", "title": "PThreads.Consumer-Producer! printing in different files", "body": "<p>i m trying to implement the producer - consumer with threads.In my code below is working well except of the point where i try to print into 2 files.(one for prod and one for cons).I use fclose(stdout) . when i delete it inside producer then the print in  producer file is ok but consumers no.when i deleted at all then all of the data printed into the consumer file.My question is what i should try to make the  prints correctly( i need consumer to print in cons.out.txt and producer in prod_out.txt) .Also i didnt include check for threads to make it simple but it works well.\n    #include \"head.h\"</p>\n\n<pre><code>circular_buffer cb;  \npthread_mutex_t lock; \npthread_cond_t cond;  \n\n\nchar * data[6]; //is the data taken from cmd(argv[0-6]) first one is the program the other are parameters\n\n\nint main(int argc , char *argv[])  { \n    validate(argv,argc); //if command arguments are valid  go on\n    for(int i=0; i &lt; argc; i++){\n         data[i]=argv[i]; //copy argv array to data array \n    }\n\n    cb_init(&amp;cb,10,sizeof(int)); //initialization of circular buffer for 10 nodes + size of int each node \n    pthread_t cons, prod;  \n    void *consumer(), *producer();\n\n    int rc = pthread_mutex_init(&amp;lock, NULL);\n    rc = pthread_cond_init(&amp;cond, NULL);\n\n    int id[]={1,2}; //prod id is 1 and cons 2\n\n    rc = pthread_create(&amp;prod, NULL, producer, &amp;id[0]);\n        rc = pthread_create(&amp;cons, NULL, consumer, &amp;id[1]);\n\n    rc=pthread_join(prod, NULL); \n    rc=pthread_join(cons, NULL); \n\n    rc = pthread_mutex_destroy(&amp;lock);\n    rc = pthread_cond_destroy(&amp;cond);\n\n    cb_free(&amp;cb); //free allocated memory which is alocated in head\n    return 1;\n\n }  \nvoid *consumer(void * id){\n     int  thread_id= *((int*)id); //cast to (int)\n     int file;  \n     FILE * fp2 = fopen(\"./cons_out.txt\",\"wb\"); //creates new file with \"cons_out.txt\" name\n     int i =10; \n     while(i &gt; 0){\n         i--;\n         pthread_mutex_lock(&amp;lock); \n\n         while(isEmpty(&amp;cb)){\n            int rc = pthread_cond_wait(&amp;cond,&amp;lock);\n         }//end while\n\n         int item=0; // item that will be consumed\n         cb_pop_front(&amp;cb,&amp;item);\n         file = open(\"./cons_out.txt\", O_APPEND | O_WRONLY, 0777 );//open file as new   \n         if( file == -1 ) {//fail to open file\n                perror(\"./cons_out.txt\");\n                return EXIT_FAILURE;\n         }\n         fclose(stdout);\n         dup2( file, STDOUT_FILENO); //change redirections\n         printf(\"Consumer %d : %d\\n\",thread_id,item); //print output to file\n\n         pthread_cond_signal(&amp;cond);\n         pthread_mutex_unlock(&amp;lock); \n\n     } //end while\n\n         return NULL;\n} //end consumer() \n\nvoid *producer(void * id){\n     int  thread_id= *((int*)id); //cast to (*int)\n     int file1; \n     FILE * fp1 = fopen(\"./prod_in.txt\",\"wb\"); //creates new file with \"prod_in.txt\" name\n     for(int i=0; i&lt;10; i++){ //it produce 10 numbers \n         pthread_mutex_lock(&amp;lock); \n\n         while(isFull(&amp;cb)){\n            int rc = pthread_cond_wait(&amp;cond,&amp;lock);\n         }//end while\n\n         int seed=1;\n         int item=rand(); // item of this producer\n         cb_push_back(&amp;cb,&amp;item); \n         file1 = open(\"./prod_in.txt\", O_APPEND | O_WRONLY, 0777 );//open file as new   \n         if( file1 == -1 ) {//fail to open file\n            perror(\"./prod_in.txt\");\n            return EXIT_FAILURE;\n         }\n         fclose(stdout);\n         dup2( file1, STDOUT_FILENO); //change output \n         printf(\"Producer %i : %i\\n\",thread_id,item); //print output to file\n\n         pthread_cond_signal(&amp;cond);\n         pthread_mutex_unlock(&amp;lock);\n         } //end for \n\n         return NULL;\n\n} //end Producer();\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1526494666, "post_id": 50377473, "comment_id": 87771364, "body": "The value of string <code>info</code> is a secret you have not posted.  Better to state your inputs, and expected results.  Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1526494867, "post_id": 50377473, "comment_id": 87771461, "body": "most likely at some point <code>t</code> is greater than 1."}, {"owner": {"reputation": 1, "user_id": 9701921, "user_type": "registered", "profile_image": "https://graph.facebook.com/1069955126478009/picture?type=large", "display_name": "Eden Meirovich", "link": "https://stackoverflow.com/users/9701921/eden-meirovich"}, "edited": false, "score": 0, "creation_date": 1526495221, "post_id": 50377473, "comment_id": 87771636, "body": "i edited the question with the variables when i get the error. the temp_city is the result i want, it&#39;s look fine"}, {"owner": {"reputation": 1, "user_id": 9701921, "user_type": "registered", "profile_image": "https://graph.facebook.com/1069955126478009/picture?type=large", "display_name": "Eden Meirovich", "link": "https://stackoverflow.com/users/9701921/eden-meirovich"}, "edited": false, "score": 0, "creation_date": 1526495618, "post_id": 50377473, "comment_id": 87771814, "body": "t need to be greater than 1, and it looks like I get the runtime error in the end of the function - after the return."}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1526496312, "post_id": 50377473, "comment_id": 87772114, "body": "<code>temp</code> is a local variable on the stack in the function <code>citysplitter</code>. It goes out of scope as soon as the function ends."}, {"owner": {"reputation": 1, "user_id": 9701921, "user_type": "registered", "profile_image": "https://graph.facebook.com/1069955126478009/picture?type=large", "display_name": "Eden Meirovich", "link": "https://stackoverflow.com/users/9701921/eden-meirovich"}, "edited": false, "score": 0, "creation_date": 1526496794, "post_id": 50377473, "comment_id": 87772343, "body": "ok, thank u for the t notice. it was spuse to be greater than 1 but it&#39;s was 3 one time, it&#39;s solve every thing."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1526496898, "post_id": 50377473, "comment_id": 87772395, "body": "That&#39;s true, @FredK, but irrelevant.  A <i>copy</i> of the structure is returned to the caller.  This is not the problem it would be if the OP were returning a <i>pointer</i> to a local variable."}], "owner": {"reputation": 1, "user_id": 9701921, "user_type": "registered", "profile_image": "https://graph.facebook.com/1069955126478009/picture?type=large", "display_name": "Eden Meirovich", "link": "https://stackoverflow.com/users/9701921/eden-meirovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526495168, "creation_date": 1526494165, "last_edit_date": 1526495168, "question_id": 50377473, "link": "https://stackoverflow.com/questions/50377473/error-while-trying-to-make-struct-function", "title": "Error while trying to make struct function", "body": "<p><a href=\"https://i.stack.imgur.com/htnwa.png\" rel=\"nofollow noreferrer\">varibels</a></p>\n\n<p>I have a function that gets an array and suppose to return a struct</p>\n\n<p>The struct looks like this:</p>\n\n<pre><code>typedef struct\n  char name[16];\n  int    year;\n  int month;\n  int day;\nc }\n</code></pre>\n\n<p>and a function. </p>\n\n<p>The function basically gets an array and divides the array to the struct. When I get to the end of the function, I'm getting a runtime error:</p>\n\n<p>Run-Time Check Failure #2 - Stack around the variable 'temp_date' was corrupted.</p>\n\n<p>Here is the function:</p>\n\n<pre><code>city cityspliter(char *info)\n    city temp;\n    int t,i, length;\n    char temp_date[2];\n\n    length = strlen(info);\n\n    for (i = 1; i &lt; length; i++)\n    {\n        if (info[i] != '~')\n            temp.name[i - 1] = info[i];\n        else\n        {\n            temp.name[i - 1] = NULL;\n            break;\n        }\n    }\n\n    t = 0;\n    while (info[i+1]!='/')\n    {\n        temp_date[t] = info[i + 1];\n        i++;\n        t++;\n    }\n    temp.day = get_number(temp_date);\n\n    t = 0;\n    while (info[i + 1] != '/')\n    {\n        temp_date[t] = info[i + 1];\n        i++;\n        t++;\n    }\n    temp.month = get_number(temp_date);\n\n    while (info[i + 2] != '&gt;')\n    {\n        temp_date[t] = info[i + 2];\n        i++;\n        t++;\n    }\n    temp.month = get_number(temp_date);\n\n    t = 0;\n    while (info[i] != '&gt;')\n    {\n        temp_date[t] = info[i];\n        i++;\n        t++;\n    }\n    temp.year = get_number(temp_date);\n\n    return temp;\n}\n</code></pre>\n\n<p>Any ideas what is wrong?</p>\n"}, {"tags": ["c", "linux", "shell", "unix", "job-control"], "answers": [{"comments": [{"owner": {"reputation": 40, "user_id": 9764916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1613171bd8695dbfb316ea0ff8f1cdd0?s=128&d=identicon&r=PG&f=1", "display_name": "carlossancal", "link": "https://stackoverflow.com/users/9764916/carlossancal"}, "edited": false, "score": 0, "creation_date": 1526495784, "post_id": 50377600, "comment_id": 87771894, "body": "Such an amazing answer! That was the problem I guess, now all works as it should. Thank you!"}], "tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 3, "last_activity_date": 1526495174, "last_edit_date": 1526495174, "creation_date": 1526494662, "answer_id": 50377600, "question_id": 50377402, "link": "https://stackoverflow.com/questions/50377402/background-and-suspended-processes-implementing-a-job-control-shell-in-c/50377600#50377600", "title": "Background and suspended processes - Implementing a Job Control Shell in C", "body": "<p>I see many problems in this code, but the immediate issue is probably here:</p>\n\n<pre><code>        waitpid(current_node-&gt;pgid, &amp;process_status, WNOHANG);\n        if (WIFEXITED(process_status) != 0) {\n</code></pre>\n\n<p>When <code>waitpid(pid, &amp;status, WNOHANG)</code> returns because the process has not exited, it does not write anything to <code>status</code>, so the subsequent <code>if</code> is branching on garbage.  You need to check the actual return value of <code>waitpid</code> before assuming <code>status</code> is meaningful.</p>\n\n<p>The most important other problems are:</p>\n\n<ul>\n<li><p>The kernel is allowed to send only one <code>SIGCHLD</code> to tell you that several processes have exited.  When you get a <code>SIGCHLD</code>, you need to call <code>waitpid(0, &amp;status, WNOHANG)</code> in a loop until it tells you there are no more processes to wait for, and you need to process (no pun intended) <em>all</em> of the exited process IDs that it tells you about.</p></li>\n<li><p>It is not safe to call <code>printf</code> or <code>free</code> from an asynchronous signal handler.  Add terminated processes to a list of deferred tasks, instead.  Make sure to block SIGCHLD in the main-loop code that consumes that list.</p></li>\n<li><p>Don't block and unblock <code>SIGCHLD</code> yourself in the handler; that has an unavoidable race condition.  Instead, let the kernel do it for you, atomically, by setting up your signal handler correctly: use <code>sigaction</code> and don't put <code>SA_NODEFER</code> in <code>sa_flags</code>. (<em>Do</em> put <code>SA_RESTART</code> in <code>sa_flags</code>, unless you have a very good reason not to.)</p></li>\n<li><p>The literal number 17 should be the signal constant <code>SIGCHLD</code> instead.  <em>Some</em> signal numbers have been stable across all Unixes throughout history, but <code>SIGCHLD</code> is not one of them.</p></li>\n</ul>\n"}], "owner": {"reputation": 40, "user_id": 9764916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1613171bd8695dbfb316ea0ff8f1cdd0?s=128&d=identicon&r=PG&f=1", "display_name": "carlossancal", "link": "https://stackoverflow.com/users/9764916/carlossancal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 497, "favorite_count": 0, "accepted_answer_id": 50377600, "answer_count": 1, "score": 1, "last_activity_date": 1526495174, "creation_date": 1526493877, "last_edit_date": 1526494206, "question_id": 50377402, "link": "https://stackoverflow.com/questions/50377402/background-and-suspended-processes-implementing-a-job-control-shell-in-c", "title": "Background and suspended processes - Implementing a Job Control Shell in C", "body": "<p>I'm implementing a Job Control Shell in C in Linux as a project for a Operating Systems-related subject. I have a main() function that does child process management, helped with a linked list as shown here in which background and suspended jobs information is stored:</p>\n\n<pre><code>typedef struct job_\n{\n    pid_t pgid; /* group id = process lider id */\n    char * command; /* program name */\n    enum job_state state;\n    struct job_ *next; /* next job in the list */\n} job;\n</code></pre>\n\n<p>Every time a child process exits or is stopped, a SIGCHLD is sent to parent process to be informed about that. Then, I have a signal handler as shown here that for each node of that job status linked list, checks if the process represented in that node has exited and if it did, that node is removed from the linked list.\nHere is the code for the SIGCHLD handler, where 'job_list' is the linked list where the info is stored:</p>\n\n<pre><code>void mySIGCHLD_Handler(int signum) {\n    block_SIGCHLD();\n    if (signum == 17) {\n        job *current_node = job_list-&gt;next, *node_to_delete = NULL;\n        int process_status, process_id_deleted;\n\n        while (current_node) {\n\n            /* Wait for a child process to finish.\n            *    - WNOHANG: return immediately if the process has not exited\n            */\n            waitpid(current_node-&gt;pgid, &amp;process_status, WNOHANG);\n\n            if (WIFEXITED(process_status) != 0) {\n                node_to_delete = current_node;\n                current_node = current_node-&gt;next;\n                process_id_deleted = node_to_delete-&gt;pgid;\n                if (delete_job(job_list, node_to_delete)) {\n                printf(\"Process #%d deleted from job list\\n\", process_id_deleted);\n                } else {\n                    printf(\"Process #%d could not be deleted from job list\\n\", process_id_deleted);\n                }\n            } else {\n                current_node = current_node-&gt;next;\n            }\n        }\n    }\n    unblock_SIGCHLD();\n}\n</code></pre>\n\n<p>The thing is, when the handler is called, some entries that should not be deleted because the process they represent are not exited, are deleted, when they shouldn't. Anyone would know why that happens?</p>\n\n<p>Thank you and sorry for your lost time :( </p>\n"}, {"tags": ["c", "binary", "integer", "x86-64", "unsigned"], "comments": [{"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 4, "creation_date": 1526493615, "post_id": 50377336, "comment_id": 87770805, "body": "<code>%ld</code> --&gt; <code>%lu</code>"}, {"owner": {"reputation": 6932, "user_id": 3476191, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pJGHG.png?s=128&g=1", "display_name": "NobodyNada", "link": "https://stackoverflow.com/users/3476191/nobodynada"}, "edited": false, "score": 9, "creation_date": 1526493678, "post_id": 50377336, "comment_id": 87770841, "body": "Also, <code>1UL &lt;&lt; 64</code> places the 1 in the <i>65th</i> bit.  The maximum value that can be stored in an unsigned 64-bit integer is 2^64 - 1, since we include 0."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526493943, "post_id": 50377336, "comment_id": 87771003, "body": "What is the largest number you can store in a 1-bit data type? Is it 2^1?"}, {"owner": {"reputation": 1629, "user_id": 3878933, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/b41zO.jpg?s=128&g=1", "display_name": "papiro", "link": "https://stackoverflow.com/users/3878933/papiro"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526494504, "post_id": 50377336, "comment_id": 87771269, "body": "@n.m. seems like it would be 2^1-1 = 1"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1526494843, "post_id": 50377336, "comment_id": 87771448, "body": "Great, so if you can&#39;t fit 2^1 in 1 bit, why do you expect to fit 2^64 in 64 bits? Always check the simplest case first."}, {"owner": {"reputation": 1629, "user_id": 3878933, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/b41zO.jpg?s=128&g=1", "display_name": "papiro", "link": "https://stackoverflow.com/users/3878933/papiro"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526495345, "post_id": 50377336, "comment_id": 87771688, "body": "@n.m. good point. I will say that I was massively thrown off onto a red-herring of a suspicion by incorrectly displaying the value of 2^63 as a negative number. This caused me to believe that the number was wrapping. Had it displayed as positive, I am sure I would have figured this one out. Doh!"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1526498931, "post_id": 50377336, "comment_id": 87773387, "body": "The total number of distinct values a 64-bit variable can represent is <code>2^64</code>.   If that variable is <code>unsigned</code>, one of the values it DOES represent is zero.    The maximum value it can represent is therefore <code>2^64 - 1</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1629, "user_id": 3878933, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/b41zO.jpg?s=128&g=1", "display_name": "papiro", "link": "https://stackoverflow.com/users/3878933/papiro"}, "edited": false, "score": 0, "creation_date": 1526494338, "post_id": 50377383, "comment_id": 87771194, "body": "Ahh, thank you! But why then does 2^63 represent as a negative number?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 1629, "user_id": 3878933, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/b41zO.jpg?s=128&g=1", "display_name": "papiro", "link": "https://stackoverflow.com/users/3878933/papiro"}, "edited": false, "score": 3, "creation_date": 1526494496, "post_id": 50377383, "comment_id": 87771264, "body": "@papiro Because you printed it as a signed number. See achal&#39;s comment."}], "tags": [], "owner": {"reputation": 7674, "user_id": 74819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d7a3f99d0318b55b5be641d2d160ffa5?s=128&d=identicon&r=PG", "display_name": "Aric TenEyck", "link": "https://stackoverflow.com/users/74819/aric-teneyck"}, "is_accepted": true, "score": 10, "last_activity_date": 1526493801, "creation_date": 1526493801, "answer_id": 50377383, "question_id": 50377336, "link": "https://stackoverflow.com/questions/50377336/why-cant-i-store-264-in-an-unsigned-long-on-a-64-bit-machine/50377383#50377383", "title": "Why can&#39;t I store 2^64 in an unsigned long on a 64-bit machine?", "body": "<p>The number 2^64 requires 65 bits to represent properly in binary - bit #65 is set and the rest are zero.  </p>\n\n<p>This is the same reason that unsigned 8-bit numbers can only go up to 255 (2^8 - 1), unsigned 16-bit numbers can only go up to 65535 (2^16 - 1), and so on.</p>\n"}, {"tags": [], "owner": {"reputation": 1749, "user_id": 1243576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a35c1ecafd01db2337c25f59fdce4c5?s=128&d=identicon&r=PG", "display_name": "basak", "link": "https://stackoverflow.com/users/1243576/basak"}, "is_accepted": false, "score": 2, "last_activity_date": 1526505756, "creation_date": 1526505756, "answer_id": 50380069, "question_id": 50377336, "link": "https://stackoverflow.com/questions/50377336/why-cant-i-store-264-in-an-unsigned-long-on-a-64-bit-machine/50380069#50380069", "title": "Why can&#39;t I store 2^64 in an unsigned long on a 64-bit machine?", "body": "<p><code>sizeof</code> will indeed return you the number of bytes, so yes, it does have 64 bits. \nWith <code>N</code> binary digits, you can represent a total of <code>2^N</code> numbers. If your variable is unsigned, this means <code>[0, (2^N)-1]</code> range. If it's a signed number, then the range would have been <code>[-2^(N-1), +2^(N-1)-1]</code>. If you'd like to know more about the signed integers, you can read up on \"Two's complement\". </p>\n\n<p>Moving onto displaying your integer: you tell <code>printf</code> how to interpret the variable. If you tell it's a signed integer, then it'll use the most significant bit as sign instead of the value <code>2^63</code> (again, check out Two's complement). </p>\n\n<p>This, on the other hand, will print the integer unsigned:</p>\n\n<pre><code>printf(\"%lu\", x);\n</code></pre>\n"}], "owner": {"reputation": 1629, "user_id": 3878933, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/b41zO.jpg?s=128&g=1", "display_name": "papiro", "link": "https://stackoverflow.com/users/3878933/papiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "accepted_answer_id": 50377383, "answer_count": 2, "score": 2, "last_activity_date": 1526505756, "creation_date": 1526493550, "last_edit_date": 1526493929, "question_id": 50377336, "link": "https://stackoverflow.com/questions/50377336/why-cant-i-store-264-in-an-unsigned-long-on-a-64-bit-machine", "title": "Why can&#39;t I store 2^64 in an unsigned long on a 64-bit machine?", "body": "<p>Am I missing something? I have run the following:</p>\n\n<pre><code>$ uname -a\nLinux archlinux 4.16.6-1-ARCH #1 SMP PREEMPT Mon Apr 30 12:30:03 UTC 2018 x86_64 GNU/Linux\n</code></pre>\n\n<p>Then in a C program:</p>\n\n<pre><code>long l;\nprintf(\"sizeof long: %d\\n\", sizeof l);\n</code></pre>\n\n<p>which output:</p>\n\n<pre><code>sizeof long: 8\n</code></pre>\n\n<p>Doesn't this mean that each long contains 64 bits?\nBut when I execute the following line of code:</p>\n\n<pre><code>printf(\"2^64: %ld\\n\",  1UL&lt;&lt;64);\n</code></pre>\n\n<p>I get the following warning from gcc:</p>\n\n<blockquote>\n  <p>sizeof.c:14:29: warning: left shift count >= width of type [-Wshift-count-overflow]</p>\n</blockquote>\n\n<p>If I reduce the left bit-shift to 63 instead, then the warning disappears, but it outputs:</p>\n\n<blockquote>\n  <p>2^64: -9223372036854775808</p>\n</blockquote>\n\n<p>This leads me to believe that my assumption of an unsigned long being 64 usable bits is incorrect, but why?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1526493266, "post_id": 50376951, "comment_id": 87770625, "body": "Looks like a numeric <a href=\"https://en.wikipedia.org/wiki/Mastermind_(board_game)\" rel=\"nofollow noreferrer\">Mastermind</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1526493732, "post_id": 50376951, "comment_id": 87770865, "body": "Once <code>pb++;</code> occurs, break out of the <code>for(j)</code> loop.  Other changes likely also needed."}, {"owner": {"reputation": 53, "user_id": 8886998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NuQ25AGFEc4/AAAAAAAAAAI/AAAAAAAAAAs/xAM0Rp47xI8/photo.jpg?sz=128", "display_name": "M3Lee OP", "link": "https://stackoverflow.com/users/8886998/m3lee-op"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1526493845, "post_id": 50376951, "comment_id": 87770933, "body": "Still does not work."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1526493860, "post_id": 50376951, "comment_id": 87770944, "body": "BTW: <code>lens == leng</code> must be true, else code will have trouble with <code>secret[i] == guess[i]</code>."}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1526494005, "post_id": 50376951, "comment_id": 87771032, "body": "I did write similar code a while years ago, you can glance at <a href=\"https://github.com/akrsnr/c/blob/master/sayiTahmin.c\" rel=\"nofollow noreferrer\">github.com/akrsnr/c/blob/master/sayiTahmin.c</a>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1526494582, "post_id": 50376951, "comment_id": 87771310, "body": "You need two arrays to count digits, for example <code>scount[10]</code> and <code>gcount[10]</code>. Increment the appropriate digit counts when <code>secret[i] != guess[i]</code>. Then a second loop checks the digit counts. For example, if the digit 7 appears twice in <code>secret</code> and three times in <code>guess</code>, then add 2 to <code>pb</code>."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 8886998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NuQ25AGFEc4/AAAAAAAAAAI/AAAAAAAAAAs/xAM0Rp47xI8/photo.jpg?sz=128", "display_name": "M3Lee OP", "link": "https://stackoverflow.com/users/8886998/m3lee-op"}, "edited": false, "score": 0, "creation_date": 1526505376, "post_id": 50379228, "comment_id": 87776246, "body": "Still does not work right, but thank you for trying!"}, {"owner": {"reputation": 377, "user_id": 9198437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8f86fc9e316684b04e99c14655bc735d?s=128&d=identicon&r=PG&f=1", "display_name": "MiguelD", "link": "https://stackoverflow.com/users/9198437/migueld"}, "reply_to_user": {"reputation": 53, "user_id": 8886998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NuQ25AGFEc4/AAAAAAAAAAI/AAAAAAAAAAs/xAM0Rp47xI8/photo.jpg?sz=128", "display_name": "M3Lee OP", "link": "https://stackoverflow.com/users/8886998/m3lee-op"}, "edited": false, "score": 0, "creation_date": 1526506939, "post_id": 50379228, "comment_id": 87776831, "body": "I think my mistake was not taking in consideration your program can have strings with repeated numbers in them, i already updated my answer that should handle those cases aswell"}, {"owner": {"reputation": 377, "user_id": 9198437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8f86fc9e316684b04e99c14655bc735d?s=128&d=identicon&r=PG&f=1", "display_name": "MiguelD", "link": "https://stackoverflow.com/users/9198437/migueld"}, "reply_to_user": {"reputation": 53, "user_id": 8886998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NuQ25AGFEc4/AAAAAAAAAAI/AAAAAAAAAAs/xAM0Rp47xI8/photo.jpg?sz=128", "display_name": "M3Lee OP", "link": "https://stackoverflow.com/users/8886998/m3lee-op"}, "edited": false, "score": 0, "creation_date": 1526509060, "post_id": 50379228, "comment_id": 87777553, "body": "No problem, if my answer was what you wanted, please mark it as the correct one"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 53, "user_id": 8886998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NuQ25AGFEc4/AAAAAAAAAAI/AAAAAAAAAAs/xAM0Rp47xI8/photo.jpg?sz=128", "display_name": "M3Lee OP", "link": "https://stackoverflow.com/users/8886998/m3lee-op"}, "edited": false, "score": 0, "creation_date": 1526514929, "post_id": 50379228, "comment_id": 87779046, "body": "@M3LeeOP Try it with &quot;3322&quot; and &quot;2233&quot;."}], "tags": [], "owner": {"reputation": 377, "user_id": 9198437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8f86fc9e316684b04e99c14655bc735d?s=128&d=identicon&r=PG&f=1", "display_name": "MiguelD", "link": "https://stackoverflow.com/users/9198437/migueld"}, "is_accepted": true, "score": 0, "last_activity_date": 1526516167, "last_edit_date": 1526516167, "creation_date": 1526501638, "answer_id": 50379228, "question_id": 50376951, "link": "https://stackoverflow.com/questions/50376951/how-many-numbers-from-first-string-are-in-other-string-on-the-different-position/50379228#50379228", "title": "How many numbers from first string are in other string on the different position", "body": "<p>check if the number of the \"first\" string is equal to the \"second\" string at the current index, if yes increment, else iterate the \"second\" string to check if the current number from the \"first\" string is in the \"second\" string, if yes, increment</p>\n\n<pre><code>void get_score(char* secret, char* guess, int* peg_a, int* peg_b){\n    int i, j;\n    int pa, pb;\n    pa = pb = 0;\n    int lens = strlen(secret);\n    int leng = strlen(guess);\n    for(i = 0; i &lt; lens; i++){\n        if(secret[i] == guess[i]){\n            pa++;\n        }else{\n            for(j = 0; j &lt; leng; j++){\n                if((secret[i] == guess[j])){\n                    pb++;\n                    break;\n                }\n            }\n            for(int k = i-1; k &gt;= 0; k--){\n                if(secret[i] == secret[k]){\n                    pb--;\n                }\n            }\n        }\n    }\n\n   *peg_a = pa;\n   *peg_b = pb; \n}\n</code></pre>\n\n<p>The 3rd for is to check if the number that is now comparing is the same as one before</p>\n"}], "owner": {"reputation": 53, "user_id": 8886998, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NuQ25AGFEc4/AAAAAAAAAAI/AAAAAAAAAAs/xAM0Rp47xI8/photo.jpg?sz=128", "display_name": "M3Lee OP", "link": "https://stackoverflow.com/users/8886998/m3lee-op"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 50379228, "answer_count": 1, "score": 1, "last_activity_date": 1526516167, "creation_date": 1526492061, "question_id": 50376951, "link": "https://stackoverflow.com/questions/50376951/how-many-numbers-from-first-string-are-in-other-string-on-the-different-position", "title": "How many numbers from first string are in other string on the different position", "body": "<p>I do not know how to solve this problem, this function.</p>\n\n<p><strong>peg_a = how many numbers from *secret are in *guess on the same position.</strong></p>\n\n<p>Example: *secret = \"1234\" | *guess = \"1289\"| ... peg_a = 2. </p>\n\n<p><strong>peg_b = how many numbers from *secret are in *guess but on the different position.</strong></p>\n\n<p>Example: *secret = \"1234\" | *guess = \"8912\"| ... peg_b = 2. </p>\n\n<hr>\n\n<p>My problem: If I have secret ... \"2211\" and guess \"1002\" ... peg_b is 4, it need to be 2 (because they are 2 same numbers in secret, but on the other position) ... how to solve this problem?</p>\n\n<p>Sorry for my english and programming skills. </p>\n\n<pre><code> void get_score(char* secret, char* guess, int* peg_a, int* peg_b)\n    {\n    int i, j;\n    int pa, pb;\n    pa = pb = 0;\n    int lens = strlen(secret);\n    int leng = strlen(guess);\n    for(i = 0; i &lt; lens; i++)\n      {\n        if(secret[i] == guess[i])\n           {\n           pa++;\n           continue;\n           }\n        for(j = 0; j &lt; leng; j++)\n        {  \n          if((secret[i] == guess[j]) &amp;&amp; (secret[j] != guess[j]))\n          {\n            pb++;\n          }\n        }\n      }\n\n      *peg_a = pa;\n      *peg_b = pb; \n    }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 6, "creation_date": 1526491976, "post_id": 50376886, "comment_id": 87769960, "body": "<code>name</code> is a single <code>char</code>..."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1526492054, "post_id": 50376886, "comment_id": 87769998, "body": "Also, you return an <code>int</code> when you want a string?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1526492128, "post_id": 50376886, "comment_id": 87770043, "body": "use <code>char name[20];</code> then <code>scanf(&quot;%19s&quot;, name);</code> but then you cannot return the local buffer... good luck :)"}], "answers": [{"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 0, "last_activity_date": 1526493111, "last_edit_date": 1526493111, "creation_date": 1526492179, "answer_id": 50376979, "question_id": 50376886, "link": "https://stackoverflow.com/questions/50376886/scanf-with-s-returns-only-first-character-of-the-string/50376979#50376979", "title": "scanf with %s returns only first character of the string", "body": "<p>In the <code>get_name()</code> function <code>name</code> is declared as of <code>char</code> type not as <em>char array</em>.</p>\n\n<pre><code>char name;\nscanf(\"%s\", &amp;name); \n</code></pre>\n\n<p>Instead declare <code>name</code> as char array of some size. for.e.g</p>\n\n<pre><code>char name[20];\nscanf(\"%s\", name); /* &amp;  is not needed as name itself address */\n</code></pre>\n\n<p>But then returning local array like <code>return name;</code> would cause undefined behavior. Better create the dynamic array &amp; return it.</p>\n\n<p>Or declare <code>name</code> as pointer variable &amp; allocate memory for it &amp; then scan the data from user.</p>\n\n<pre><code>char *name = malloc(SIZE); /* define the size */\nscanf(\"%s\",name); \nreturn name; /*returning dynamic array, catch with another pointer in calling function &amp; free it once done */\n</code></pre>\n\n<p>Once you done with dynamic memory don't forget to free it by calling <code>free(name)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 14752, "user_id": 1787973, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2853d3d7c18c97459c34b86ced8c18e2?s=128&d=identicon&r=PG", "display_name": "Maxime Ch&#233;ramy", "link": "https://stackoverflow.com/users/1787973/maxime-ch%c3%a9ramy"}, "is_accepted": false, "score": 0, "last_activity_date": 1526492651, "last_edit_date": 1526492651, "creation_date": 1526492191, "answer_id": 50376981, "question_id": 50376886, "link": "https://stackoverflow.com/questions/50376886/scanf-with-s-returns-only-first-character-of-the-string/50376981#50376981", "title": "scanf with %s returns only first character of the string", "body": "<p><code>name</code> is a character, not a string.</p>\n\n<p>You need to change the declaration to <code>char name[MAXSTRING]</code> or <code>char *name = malloc(MAXSTRING)</code>. However, since you are returning <code>name</code>, you should return the address of something allocated on the heap instead of the stack. As a consequence, you should probably use the <code>malloc</code>.</p>\n\n<p>Then, you won't have to give the address of <code>name</code>: <code>scanf(\"%s\", name)</code> or even <code>scanf(\"%20s\", name)</code> if you want to protect your code against a buffer overflow.</p>\n\n<p>Finally, instead of returning a string, you could also take the name as an argument:</p>\n\n<pre><code>void get_name(char *name) {\n    printf(\"Please enter the student name: \");\n    scanf(\"%d\", name);\n}\n</code></pre>\n\n<p>and call it that way:</p>\n\n<pre><code>student s1;\nget_name(s1.name);\n</code></pre>\n\n<p>That way, you don't need to allocate and free some memory.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 5919691, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206801827737400/picture?type=large", "display_name": "Christopher Bovo", "link": "https://stackoverflow.com/users/5919691/christopher-bovo"}, "edited": false, "score": 0, "creation_date": 1526561264, "post_id": 50376998, "comment_id": 87799283, "body": "while i call it like this  <code>name=get_name();</code>  when i run it and enter a name like chris i get a result of \u03b1  Are my pointers out of place?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 41, "user_id": 5919691, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206801827737400/picture?type=large", "display_name": "Christopher Bovo", "link": "https://stackoverflow.com/users/5919691/christopher-bovo"}, "edited": false, "score": 0, "creation_date": 1526563590, "post_id": 50376998, "comment_id": 87801014, "body": "<code>printf(&quot;%s\\n&quot;,name);</code> right after that <code>get_name()</code> call should work. If you free the buffer in the meanwhile, it can break ..."}, {"owner": {"reputation": 41, "user_id": 5919691, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206801827737400/picture?type=large", "display_name": "Christopher Bovo", "link": "https://stackoverflow.com/users/5919691/christopher-bovo"}, "edited": false, "score": 0, "creation_date": 1526564241, "post_id": 50376998, "comment_id": 87801508, "body": "<code>printf </code> gives the desired result but then when i do   <code>student s1 = {stname};</code> i still get \u03b1. Maybe because my struct is <code>char name[MAXSTRING];</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 41, "user_id": 5919691, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206801827737400/picture?type=large", "display_name": "Christopher Bovo", "link": "https://stackoverflow.com/users/5919691/christopher-bovo"}, "edited": false, "score": 0, "creation_date": 1526564973, "post_id": 50376998, "comment_id": 87802016, "body": "yes, my answer suggests that you change your struct member to <code>char *name</code> (else the pointer data is probably copied instead of the pointer itself... weird :))"}, {"owner": {"reputation": 41, "user_id": 5919691, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206801827737400/picture?type=large", "display_name": "Christopher Bovo", "link": "https://stackoverflow.com/users/5919691/christopher-bovo"}, "edited": false, "score": 0, "creation_date": 1526565157, "post_id": 50376998, "comment_id": 87802139, "body": "Changed it to <code>char *name[MAXSTRING];</code> and now i just get more weird letters, akin to a string but deformed"}, {"owner": {"reputation": 41, "user_id": 5919691, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206801827737400/picture?type=large", "display_name": "Christopher Bovo", "link": "https://stackoverflow.com/users/5919691/christopher-bovo"}, "edited": false, "score": 0, "creation_date": 1526565867, "post_id": 50376998, "comment_id": 87802658, "body": "It worked perfectly now. Just curious, is it possible to implement it in such a way that i get to keep my MAXSTRING declaration?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 41, "user_id": 5919691, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206801827737400/picture?type=large", "display_name": "Christopher Bovo", "link": "https://stackoverflow.com/users/5919691/christopher-bovo"}, "edited": false, "score": 1, "creation_date": 1526565963, "post_id": 50376998, "comment_id": 87802715, "body": "yes, get the name, copy the string using <code>strcpy</code>, free the name. Or pass the struct field as a parameter of the function as a pointer"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 2, "last_activity_date": 1526492820, "last_edit_date": 1526492820, "creation_date": 1526492261, "answer_id": 50376998, "question_id": 50376886, "link": "https://stackoverflow.com/questions/50376886/scanf-with-s-returns-only-first-character-of-the-string/50376998#50376998", "title": "scanf with %s returns only first character of the string", "body": "<p>you have to provide a char <em>array</em>, not a pointer on a <code>char</code>. Then you cannot return the local array to the outer scope, so I'd suggest that you allocate the buffer:</p>\n\n<pre><code>char *get_name(void){\n  char *name = malloc(100);\n  printf(\"Please enter the student name: \");\n  scanf(\"%99s\", name);  // 99+1 limit avoids buffer overflow\n\n  return name;\n}\n</code></pre>\n\n<p>or a variant to allocate exactly the good number of bytes, using the <em>almost</em> standard <code>strdup</code> string function:</p>\n\n<pre><code>char *get_name(void){\n  char name[100];\n  printf(\"Please enter the student name: \");\n  scanf(\"%99s\", name);\n\n  return strdup(name);\n}\n</code></pre>\n\n<p>Your struct should then hold a pointer instead of a buffer:</p>\n\n<pre><code>typedef struct{\n  char *name;\n  int id;\n}student;\n</code></pre>\n\n<p>you need to <code>free</code> it when not used anymore</p>\n"}, {"tags": [], "owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "is_accepted": false, "score": 1, "last_activity_date": 1526495346, "last_edit_date": 1526495346, "creation_date": 1526492555, "answer_id": 50377070, "question_id": 50376886, "link": "https://stackoverflow.com/questions/50376886/scanf-with-s-returns-only-first-character-of-the-string/50377070#50377070", "title": "scanf with %s returns only first character of the string", "body": "<p>Jean-Fran\u00e7ois Fabre's answer is so adequate. Alternatively, <a href=\"https://stackoverflow.com/questions/572547/what-does-static-mean-in-c\">static</a> keyword can be used. However, <code>scanf()</code>'s usage like is not recommended. You should limit the input size, <code>scanf(\"%99s\", name);</code>, to prevent <a href=\"http://www.cse.scu.edu/~tschwarz/coen152_05/Lectures/BufferOverflow.html\" rel=\"nofollow noreferrer\">buffer overflow attacks</a>. </p>\n\n<pre><code>char* get_name(void){\n  static char name[100];\n  printf(\"Please enter the student name: \");\n  scanf(\"%99s\", name);\n\n  return name;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5919691, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206801827737400/picture?type=large", "display_name": "Christopher Bovo", "link": "https://stackoverflow.com/users/5919691/christopher-bovo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 50376998, "answer_count": 4, "score": 0, "last_activity_date": 1526495346, "creation_date": 1526491851, "question_id": 50376886, "link": "https://stackoverflow.com/questions/50376886/scanf-with-s-returns-only-first-character-of-the-string", "title": "scanf with %s returns only first character of the string", "body": "<p>This is my function in my main</p>\n\n<pre><code>int get_name(void){\n  char name;\n  printf(\"Please enter the student name: \");\n  scanf(\"%s\", &amp;name);\n\n  return name;\n}\n</code></pre>\n\n<p>I initialize my struct which is</p>\n\n<pre><code>typedef struct{\n  char name[MAXSTRING];\n  int id;\n}student;\n</code></pre>\n\n<p>by doing </p>\n\n<pre><code>    name = get_name();\n\n    number= get_id();\n\n    student s1 = {.name=name , .id=number};\n\n    printf(\"id is %d\\n\",s1.id);\n\n    printf(\"name is %s\\n\", s1.name);\n</code></pre>\n\n<p>But what i get as a return is the first character of the string i enter.\nMAXSTRING is defined in my student.h as</p>\n\n<pre><code>#define MAXSTRING 20\n</code></pre>\n\n<p>I am pretty sure i have to modify my name variable in some way but i tried a lot of things and nothng worked.\nAlso is it better to use fgets in this scenario?</p>\n"}, {"tags": ["c", "char", "type-conversion", "int"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1526491854, "post_id": 50376774, "comment_id": 87769903, "body": "FYI, <code>48</code> is the ascii value for <code>&#39;0&#39;</code>, not <code>&#39;a&#39;</code>. Stellar example of why we <i>don&#39;t</i> program with magic-numbers."}], "answers": [{"comments": [{"owner": {"reputation": 711, "user_id": 8998596, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210068954830186/picture?type=large", "display_name": "Martin Melichar", "link": "https://stackoverflow.com/users/8998596/martin-melichar"}, "edited": false, "score": 0, "creation_date": 1526492171, "post_id": 50376894, "comment_id": 87770083, "body": "Oh, thank you... So is there a way to make the number int of value (3) for any character set?"}, {"owner": {"reputation": 3184, "user_id": 6710751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmR1W.jpg?s=128&g=1", "display_name": "Striezel", "link": "https://stackoverflow.com/users/6710751/striezel"}, "reply_to_user": {"reputation": 711, "user_id": 8998596, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210068954830186/picture?type=large", "display_name": "Martin Melichar", "link": "https://stackoverflow.com/users/8998596/martin-melichar"}, "edited": false, "score": 0, "creation_date": 1526572518, "post_id": 50376894, "comment_id": 87807334, "body": "I do not quite understand what you are asking in the comment. If the question is &quot;Can I force a certain character to have the same numerical representation in every character set?&quot;, then the answer would be: No."}], "tags": [], "owner": {"reputation": 3184, "user_id": 6710751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmR1W.jpg?s=128&g=1", "display_name": "Striezel", "link": "https://stackoverflow.com/users/6710751/striezel"}, "is_accepted": false, "score": 2, "last_activity_date": 1526492307, "last_edit_date": 1526492307, "creation_date": 1526491879, "answer_id": 50376894, "question_id": 50376774, "link": "https://stackoverflow.com/questions/50376774/numerical-operations-between-int-and-char-in-c/50376894#50376894", "title": "Numerical operations between int and char in C", "body": "<p>The \"value\" of <code>'a'</code>, that is its numerical representation, actually depends on the character set. In most cases that is the <a href=\"https://en.wikipedia.org/wiki/ASCII\" rel=\"nofollow noreferrer\">American Standard Code for Information Interchange (ASCII)</a> or a character set where the first 128 codepoints are identical to ASCII. However, the ASCII value for <code>'a'</code> is actually 97 and not 48.</p>\n"}, {"tags": [], "owner": {"reputation": 711, "user_id": 8998596, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210068954830186/picture?type=large", "display_name": "Martin Melichar", "link": "https://stackoverflow.com/users/8998596/martin-melichar"}, "is_accepted": false, "score": 0, "last_activity_date": 1528189354, "creation_date": 1528189354, "answer_id": 50696191, "question_id": 50376774, "link": "https://stackoverflow.com/questions/50376774/numerical-operations-between-int-and-char-in-c/50696191#50696191", "title": "Numerical operations between int and char in C", "body": "<p>As <a href=\"https://stackoverflow.com/users/1322972/whozcraig\">WhozCraig</a> said, I was looking for (- \"0\"), where numeric value of \"0\" is 48.</p>\n"}], "owner": {"reputation": 711, "user_id": 8998596, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210068954830186/picture?type=large", "display_name": "Martin Melichar", "link": "https://stackoverflow.com/users/8998596/martin-melichar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1528189354, "creation_date": 1526491477, "last_edit_date": 1526492037, "question_id": 50376774, "link": "https://stackoverflow.com/questions/50376774/numerical-operations-between-int-and-char-in-c", "title": "Numerical operations between int and char in C", "body": "<p>I would like to know how are data really stored, because in example beyond is intuition weak.</p>\n\n<p>I believed, that any value has it's numerical recognition; as 'a' has value of 48; so I assumed, that in any situation I can decrement 48 as 'a' (eg. (100 - 'a' == 52)).</p>\n\n<p>Reality seems to be different.</p>\n\n<p>So;</p>\n\n<p>when can I decrement with 'a' to get int-like value?\nwhat should I use here, so it would looks like more intuitively?</p>\n\n<p>...</p>\n\n<p>program is barely finished, however function takes array of chars and it needs to get int of value (3) from one of chars. /* for this scenario */</p>\n\n<p>Thank you for help!</p>\n\n<pre><code>/* command reader */\nint cr (char a[])\n{\n    printf(\"%s\\n\", a);\n\n    /* command sequence */\n    char co[350]; /* &lt;-- change later */\n\n    for (int cri = 0, coi = 0; a[cri]; cri++, coi++)\n    {\n        printf(\"%c \", a[cri]);\n\n        co[coi] = a[cri];\n    }\n\n    int ec (char co[])\n    {\n        printf(\"\\n%s co\\n\", co);\n        printf(\"\\n%c co1\\n\", co[1]);\n\n        co[1] = co[1];\n\n        printf(\"\\n basic: %d\\n\\n\", co[1]); /* 51 */\n\n        co[2] = co[1] - 'a';\n\n        printf(\"\\n charred out: %d\\n\\n\", co[2]); /* -46 */\n\n        co[3] = co[1] - 48;\n\n        printf(\"\\n numbered out: %d\\n\\n\", co[3]); /* 3 */\n\n        return 0;\n    }\n\n    ec(co);\n\n    return 0;\n}\n\ncr(\"F3 R B\");\n</code></pre>\n"}, {"tags": ["c", "structure"], "comments": [{"owner": {"reputation": 14752, "user_id": 1787973, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2853d3d7c18c97459c34b86ced8c18e2?s=128&d=identicon&r=PG", "display_name": "Maxime Ch&#233;ramy", "link": "https://stackoverflow.com/users/1787973/maxime-ch%c3%a9ramy"}, "edited": false, "score": 3, "creation_date": 1526491450, "post_id": 50376730, "comment_id": 87769684, "body": "Show us some code..."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1526491501, "post_id": 50376730, "comment_id": 87769706, "body": "See <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> in the <a href=\"https://stackoverflow.com/help\">help center</a>."}, {"owner": {"reputation": 14752, "user_id": 1787973, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2853d3d7c18c97459c34b86ced8c18e2?s=128&d=identicon&r=PG", "display_name": "Maxime Ch&#233;ramy", "link": "https://stackoverflow.com/users/1787973/maxime-ch%c3%a9ramy"}, "edited": false, "score": 0, "creation_date": 1526491547, "post_id": 50376730, "comment_id": 87769729, "body": "It looks like you&#39;re creating multiple variables, hence not sharing the same data. But it&#39;s difficult to tell."}, {"owner": {"reputation": 5339, "user_id": 1714692, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bd72cbc200eb7c9aa507624f154b21a7?s=128&d=identicon&r=PG", "display_name": "Francesco Boi", "link": "https://stackoverflow.com/users/1714692/francesco-boi"}, "edited": false, "score": 0, "creation_date": 1526544272, "post_id": 50376730, "comment_id": 87788195, "body": "Put all the function: let us see the variables you declared there."}], "answers": [{"tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": true, "score": 0, "last_activity_date": 1526491492, "creation_date": 1526491492, "answer_id": 50376782, "question_id": 50376730, "link": "https://stackoverflow.com/questions/50376730/keeping-the-same-variables-in-a-structure-in-c/50376782#50376782", "title": "Keeping the same variables in a structure in c", "body": "<p>Do you declare a same-named variable in your function? Then it creates a local object, and its name shadows the global one. Remove that declaration from the function and see the effect. If your compiler then complains about undefined identifier, then put that global variable declaration <em>before</em> the function.</p>\n"}], "owner": {"reputation": 5, "user_id": 9715426, "user_type": "registered", "profile_image": "https://graph.facebook.com/1914249788646273/picture?type=large", "display_name": "Jeremy Stubbert", "link": "https://stackoverflow.com/users/9715426/jeremy-stubbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 50376782, "answer_count": 1, "score": -3, "last_activity_date": 1526492057, "creation_date": 1526491286, "last_edit_date": 1526492057, "question_id": 50376730, "link": "https://stackoverflow.com/questions/50376730/keeping-the-same-variables-in-a-structure-in-c", "title": "Keeping the same variables in a structure in c", "body": "<p>In my main function, I scan the information of a file and put all of the information into a global structure. However, whenever I go to another function and declare my structure, all of the information I had put in it disappears. I would like to know how to make all of the values I put into my structure stay the same in every function.\nStructure:</p>\n\n<pre><code>struct joueursstruct\n{\nint numero;\nchar equipe[4];\nchar prenom[50];\nchar nom[50];\nint buts;\nint assist;\nint penal;\nint points;\n}joueurs2[50];\n</code></pre>\n\n<p>Main part that scans file</p>\n\n<pre><code>for(indice1 = 0;indice1 &lt; 50;indice1++)\n{\n    fscanf(fptr,\"%d\",&amp;joueurs2[indice1].numero);\n    fscanf(fptr,\"%c\",&amp;buffer);\n    fscanf(fptr,\"%[^ ]s\",&amp;joueurs2[indice1].equipe);\n    fscanf(fptr,\"%c\",&amp;buffer);\n    fscanf(fptr,\"%[^ ]s\",&amp;joueurs2[indice1].prenom);\n    fscanf(fptr,\"%c\",&amp;buffer);\n    fscanf(fptr,\"%[^ ]s\",&amp;joueurs2[indice1].nom);\n    fscanf(fptr,\"%d\",&amp;joueurs2[indice1].buts);\n    fscanf(fptr,\"%c\",&amp;buffer);\n    fscanf(fptr,\"%d\",&amp;joueurs2[indice1].assist);\n    fscanf(fptr,\"%c\",&amp;buffer);\n    fscanf(fptr,\"%d\",&amp;joueurs2[indice1].penal);\n    joueurs2[indice1].points = joueurs2[indice1].buts + \n    joueurs2[indice1].assist;\n}\n</code></pre>\n\n<p>Part of other function that is supposed to print names and goals of players on screen:</p>\n\n<pre><code>{\n printf(\"%d\\t %s\\t %s\\t %s %d\\t %d\\t %d\\t %d\\n\", \n joueurs2[indice1].numero,joueurs2[indice1].equipe,joueurs2[indice1].prenom\n ,joueurs2[indice1].nom,joueurs2[indice1].buts,joueurs2[indice1].assist,\n joueurs2[indice1].penal,joueurs2[indice1].points);\n}\n</code></pre>\n\n<p>But all it does is print 0s.</p>\n"}, {"tags": ["c", "pointers", "language-lawyer", "undefined-behavior"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 3, "creation_date": 1526490236, "post_id": 50376392, "comment_id": 87769054, "body": "One thing you need to be careful about is that you can cause your data to be incorrectly aligned due to the offset introduced by your header. This can result in a performance impact or even a crash in some cases. You would need to ensure that the size of your header is equal to an integer multiple of your target platform&#39;s malloc alignment (e.g. typically 16 for for 64 bit platforms, 8 for 32 bit)."}, {"owner": {"reputation": 129, "user_id": 8885528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c173287e345ef2dc9bf513fbe80fbe8b?s=128&d=identicon&r=PG&f=1", "display_name": "Kona98", "link": "https://stackoverflow.com/users/8885528/kona98"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1526490680, "post_id": 50376392, "comment_id": 87769288, "body": "@PaulR Yeah, I forgot about unaligned access. I don&#39;t really care that much about the performance but accessing data unaligned is UB, and trying to force alignment is guesswork and not totally portable (and wastes space in most cases)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1526490925, "post_id": 50376392, "comment_id": 87769412, "body": "&quot;Specifically in this question people say the following is not actually portable&quot; (general FMA discussion)  is mostly of answers 10 years ago.  The <a href=\"https://stackoverflow.com/a/46251908/2410359\">2017 answer</a> better applies in 2018."}, {"owner": {"reputation": 129, "user_id": 8885528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c173287e345ef2dc9bf513fbe80fbe8b?s=128&d=identicon&r=PG&f=1", "display_name": "Kona98", "link": "https://stackoverflow.com/users/8885528/kona98"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1526491277, "post_id": 50376392, "comment_id": 87769597, "body": "@chux That answer also says that the struct I showed is UB (&quot;that yield undefined behavior (e.g. as in long v[0]; or long v[1];)&quot;), so doesn&#39;t really matter in this case."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1526491418, "post_id": 50376392, "comment_id": 87769669, "body": "@MarcSchulze With your structure <code>data[2]</code> is UB"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1526491427, "post_id": 50376392, "comment_id": 87769676, "body": "@MarcSchulze The higher point is that <code>struct header {   size_t len;   unsigned char data[]; };</code> is  preferable in 2018, vs. this question&#39;s approach."}, {"owner": {"reputation": 129, "user_id": 8885528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c173287e345ef2dc9bf513fbe80fbe8b?s=128&d=identicon&r=PG&f=1", "display_name": "Kona98", "link": "https://stackoverflow.com/users/8885528/kona98"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1526491997, "post_id": 50376392, "comment_id": 87769969, "body": "@chux With the FAM, how could  I do what I did with my functions (return the char pointer and retrieve the length later)? some_string - sizeof(len) could point into padding bytes."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1526492729, "post_id": 50376392, "comment_id": 87770359, "body": "@MarcSchulze I&#39;d recommend against returning a <code>char *</code>, but instead a <code>struct header *</code>.  If other code needs the <code>char *</code>, access the <code>data</code> member.  If stuck with returning a <code>char*</code>, return <code>&amp;p-&gt;data[0]</code>.  Easy enough to reconstruct <code>p</code> from that."}], "answers": [{"tags": [], "owner": {"reputation": 4590, "user_id": 2879325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2503121b7e7487cd870c8afe40f0cf21?s=128&d=identicon&r=PG", "display_name": "Ext3h", "link": "https://stackoverflow.com/users/2879325/ext3h"}, "is_accepted": true, "score": 6, "last_activity_date": 1526491328, "last_edit_date": 1526491328, "creation_date": 1526491124, "answer_id": 50376682, "question_id": 50376392, "link": "https://stackoverflow.com/questions/50376392/fat-pointers-in-c/50376682#50376682", "title": "Fat pointers in C", "body": "<p>Your example places and reads from fixed offsets only. So at least the pointer arithmetic is perfectly legal. At least as long as the type is just a <code>char</code>.</p>\n\n<p>What is problematic though is alignment. This is not violating the language standard yet, but the alignment of the actual data is worse than what e.g. compilers on x86 will provide by default.</p>\n\n<p>So if the compiler would by default align to 8 bytes (gcc and msvc on x86) or 16 bytes (on x64), your example code provides only half the alignment.</p>\n\n<p>This can be illegal, if the compiler was assuming aligned memory (which would otherwise had been ensured by matching <code>malloc</code> implementation, as well as padding in stack layout and structs). Depending on the architecture, it can even cause errors, as instructions may require a minimum alignment.</p>\n"}], "owner": {"reputation": 129, "user_id": 8885528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c173287e345ef2dc9bf513fbe80fbe8b?s=128&d=identicon&r=PG&f=1", "display_name": "Kona98", "link": "https://stackoverflow.com/users/8885528/kona98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1840, "favorite_count": 0, "accepted_answer_id": 50376682, "answer_count": 1, "score": 3, "last_activity_date": 1526491328, "creation_date": 1526490000, "question_id": 50376392, "link": "https://stackoverflow.com/questions/50376392/fat-pointers-in-c", "title": "Fat pointers in C", "body": "<p>I've read about the <a href=\"http://libcello.org/learn/a-fat-pointer-library\" rel=\"nofollow noreferrer\">Cello fat pointer library</a> and wanted to know if prepending a header to some data is actually allowed in C, e.g. something like this:</p>\n\n<pre><code>struct header\n{\n  size_t length;\n};\n\nchar* create_string(const char* cstr)\n{\n  void* ret = malloc(sizeof(struct header)+strlen(cstr)+1);\n  ((struct header*)ret)-&gt;length = strlen(cstr);\n  strcpy((char*)ret + sizeof(struct header), cstr);\n  return (char*)ret + sizeof(struct header);\n}\n\nsize_t get_length(const char* sized_string)\n{\n  struct header* tmp = sized_string - sizeof(struct header);\n  return tmp-&gt;length;\n}\n</code></pre>\n\n<p>This example is a string, but it could be anything else that is stored, maybe even something that isn't an array, in which case the header could have different kinds of metadata.</p>\n\n<p>I know that sds uses flexible array members, but that requires c99 and isn't quite as flexible as this aproach (unless you just used a generic char array and recast it as needed).</p>\n\n<p>Specifically <a href=\"https://stackoverflow.com/questions/246977/is-using-flexible-array-members-in-c-bad-practice\">in this question</a> people say the following is not actually portable:</p>\n\n<pre><code>struct header {\n  size_t len;\n  unsigned char data[1];\n};\n</code></pre>\n\n<p>Because accessing data beyond the first element is UB. Another thing is that the lines <code>((struct header*)ret)-&gt;length = strlen(cstr);</code> and <code>struct header* tmp = sized_string - sizeof(struct header);</code> look wrong to me (because of the pointer casts) and I don't see a better way to write them.</p>\n"}, {"tags": ["c", "memory-leaks", "lua", "lua-api"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1526489962, "post_id": 50376268, "comment_id": 87768904, "body": "Unrelated. But your <code>matrix_is_valid</code> is checking the same condition twice."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6241056"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1526545628, "post_id": 50376268, "comment_id": 87788942, "body": "Thanks for finding that typo"}, {"owner": {"reputation": 445, "user_id": 1549192, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/82fb5716978ac932f2b76c4c26cc5ca6?s=128&d=identicon&r=PG", "display_name": "Yyao", "link": "https://stackoverflow.com/users/1549192/yyao"}, "edited": false, "score": 0, "creation_date": 1529422610, "post_id": 50376268, "comment_id": 88863089, "body": "Hi, I just got the same error with you. Has you solved this segfault?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6241056"}, "edited": false, "score": 0, "creation_date": 1529478726, "post_id": 50376268, "comment_id": 88882065, "body": "You can go look at my GitHub to see I still have no clue. I changed the way I use my matrix. Before add was returning a new matrix, now it ask for an object to write the result. And then there no more matrix creation beside on the beginning of the script. I hate this solution because my Lua code is now horrible and not readable. but if you find a way I will be glade to have some direction."}], "owner": {"user_type": "does_not_exist", "display_name": "user6241056"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526489590, "creation_date": 1526489590, "question_id": 50376268, "link": "https://stackoverflow.com/questions/50376268/how-to-debug-lua-extension-randomly-segfaulting", "title": "How to debug Lua extension randomly segfaulting", "body": "<p>I am currently trying to write a tiny Lua extension to handle matrix multiplication. \nThe matrix part of the job was fairly easy and I managed to expose it to Lua without too much effort. But now I face a strange issue, my Lua script randomly segfault with different kind of error. </p>\n\n<p>Here an overview</p>\n\n<pre><code>(lldb) run\nProcess 44058 launched: '/usr/local/bin/luad' (x86_64)\nProcess 44058 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x1f8)\n    frame #0: 0x000000010001cd19 luad`luaH_getn(t=0x00000001002024f0) at ltable.c:643\n   640  */\n   641  int luaH_getn (Table *t) {\n   642    unsigned int j = t-&gt;sizearray;\n-&gt; 643    if (j &gt; 0 &amp;&amp; ttisnil(&amp;t-&gt;array[j - 1])) {\n   644      /* there is a boundary in the array part: (binary) search for it */\n   645      unsigned int i = 0;\n   646      while (j - i &gt; 1) {\nTarget 0: (luad) stopped.\n(lldb) run\nProcess 44062 launched: '/usr/local/bin/luad' (x86_64)\nProcess 44062 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x100503bbe)\n    frame #0: 0x00007fff513e8e87 libsystem_malloc.dylib`tiny_free_list_add_ptr + 108\nlibsystem_malloc.dylib`tiny_free_list_add_ptr:\n-&gt;  0x7fff513e8e87 &lt;+108&gt;: movw   %r11w, -0x2(%rdx,%rax)\n    0x7fff513e8e8d &lt;+114&gt;: movw   %r11w, 0x10(%rdx)\n    0x7fff513e8e92 &lt;+119&gt;: jmp    0x7fff513e8ea0            ; &lt;+133&gt;\n    0x7fff513e8e94 &lt;+121&gt;: testw  %r11w, %r11w\nTarget 0: (luad) stopped.(lldb) run\nProcess 45023 launched: '/usr/local/bin/luad' (x86_64)\nProcess 45023 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=EXC_I386_GPFLT)\n    frame #0: 0x000000010000e79e luad`sweeplist(L=0x0000000101000008, p=0x00000001003059a0, count=51) at lgc.c:740\n   737    int white = luaC_white(g);  /* current white */\n   738    while (*p != NULL &amp;&amp; count-- &gt; 0) {\n   739      GCObject *curr = *p;\n-&gt; 740      int marked = curr-&gt;marked;\n   741      if (isdeadm(ow, marked)) {  /* is 'curr' dead? */\n   742        *p = curr-&gt;next;  /* remove 'curr' from list */\n   743        freeobj(L, curr);  /* erase 'curr' */\nTarget 0: (luad) stopped.\n</code></pre>\n\n<p>It seem to be linked to memory management and garbage collecting but I have gone by the book. So how can I find my mistake ? It seems that I cannot build a minimal code because ofrandomness. Beside reading all Lua source code I don't see what I can do. </p>\n\n<p>If you are curious you can have a look at my library <a href=\"https://github.com/Canadadry/LuaLibMatrix\" rel=\"nofollow noreferrer\">on github</a>, it have a small amount of code to read. </p>\n\n<p>Any kind of help is welcome.</p>\n"}, {"tags": ["c", "gcc", "shared-libraries"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1526488642, "post_id": 50375926, "comment_id": 87768214, "body": "Unrelated to your problem, but in C a function declaration like <code>void function2();</code> doesn&#39;t mean that you declare that <code>function2</code> takes no arguments. For that you need to use <code>void function2(void);</code>. If you don&#39;t have <code>void</code> as &quot;argument&quot;, you say that the function can take any number of unknown arguments."}], "answers": [{"comments": [{"owner": {"reputation": 453, "user_id": 1505689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b0269ae22950d4721c16d40889afa2c?s=128&d=identicon&r=PG", "display_name": "Himeshi", "link": "https://stackoverflow.com/users/1505689/himeshi"}, "edited": false, "score": 0, "creation_date": 1526511675, "post_id": 50375990, "comment_id": 87778309, "body": "Sorry, that was a typo. I have the function name correct."}], "tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": false, "score": 1, "last_activity_date": 1526488626, "creation_date": 1526488626, "answer_id": 50375990, "question_id": 50375926, "link": "https://stackoverflow.com/questions/50375926/creating-a-shared-library-in-c/50375990#50375990", "title": "Creating a shared library in C", "body": "<p>You have a simple typo: your functions are called <code>function*</code>, rather than <code>func*</code>.</p>\n\n<p>Please note that with <code>-Wall</code> (that you mentioned) you should be seeing the following warning which indicates the problem (at least with <code>gcc &gt;= 4.8</code>):</p>\n\n<pre><code>test.c: In function \u2018main\u2019:\ntest.c:3:5: warning: implicit declaration of function \u2018func1\u2019; did you mean \u2018function1\u2019? [-Wimplicit-function-declaration]\n     func1();\n     ^~~~~\n     function1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 1505689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b0269ae22950d4721c16d40889afa2c?s=128&d=identicon&r=PG", "display_name": "Himeshi", "link": "https://stackoverflow.com/users/1505689/himeshi"}, "is_accepted": true, "score": 0, "last_activity_date": 1526514469, "creation_date": 1526514469, "answer_id": 50381441, "question_id": 50375926, "link": "https://stackoverflow.com/questions/50375926/creating-a-shared-library-in-c/50381441#50381441", "title": "Creating a shared library in C", "body": "<p>Solved the issue, the problem was with a global variable that had been declared incorrectly.</p>\n"}], "owner": {"reputation": 453, "user_id": 1505689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b0269ae22950d4721c16d40889afa2c?s=128&d=identicon&r=PG", "display_name": "Himeshi", "link": "https://stackoverflow.com/users/1505689/himeshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 50381441, "answer_count": 2, "score": 0, "last_activity_date": 1526514469, "creation_date": 1526488373, "last_edit_date": 1526513370, "question_id": 50375926, "link": "https://stackoverflow.com/questions/50375926/creating-a-shared-library-in-c", "title": "Creating a shared library in C", "body": "<p>I'm trying to create a shared library in C with the following file structure.</p>\n\n<p>In <code>func1.h</code></p>\n\n<pre><code>#ifndef INCLUDE_FUNC1_H_\n#define INCLUDE_FUNC1_H_\n\nvoid function1();\n\n#endif\n</code></pre>\n\n<p>In <code>func1.c</code></p>\n\n<pre><code>#include \"func1.h\"\n\nvoid function1() {\n    //do function 1\n}\n</code></pre>\n\n<p>In <code>func2.h</code></p>\n\n<pre><code>#ifndef INCLUDE_FUNC2_H_\n#define INCLUDE_FUNC2_H_\n\nvoid function2();\n\n#endif\n</code></pre>\n\n<p>In <code>func2.c</code></p>\n\n<pre><code>#include \"func2.h\"\n\nvoid function2() {\n    //do function 2\n}\n</code></pre>\n\n<p>Now to avoid having to include multiple header files, I want a common header file, <code>commonheader.h</code> which includes the other header files.</p>\n\n<pre><code>#ifndef INCLUDE_COMMONHEADER_H_\n#define INCLUDE_COMMONHEADER_H_\n\n#include \"func1.h\"\n#include \"func2.h\"\n\n#endif\n</code></pre>\n\n<p>Next I compiled them into a shared library as so.</p>\n\n<pre><code>gcc -c -fPIC -o func1.o func1.c\ngcc -c -fPIC -o func2.o func2.c\ngcc -shared -o libcommonheader.so *.o\n</code></pre>\n\n<p>Now I'm trying to use the shared library created. <code>test.c</code> looks like this,</p>\n\n<pre><code>#include \"commonheader.h\"\nint main () {\n    function1();\n}\n</code></pre>\n\n<p>I tried to compiled this with,</p>\n\n<pre><code>gcc -L. -I. -Wall -o test test.c -lcommonheader\n</code></pre>\n\n<p>However it returns with error undefined reference to `function1'.</p>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["c", "data-structures", "typedef", "bitwise-operators"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 3, "creation_date": 1526487626, "post_id": 50375669, "comment_id": 87767686, "body": "Please clarify what you mean by <i>an array of number taken from 0 to 128</i>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526487641, "post_id": 50375669, "comment_id": 87767697, "body": "Are you to reflect numbers of the range between 0 and 127? Or are to represent 128 separate numbers of char range?"}, {"owner": {"reputation": 360, "user_id": 5875805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S4zBy.jpg?s=128&g=1", "display_name": "Tormund Giantsbane", "link": "https://stackoverflow.com/users/5875805/tormund-giantsbane"}, "edited": false, "score": 0, "creation_date": 1526487668, "post_id": 50375669, "comment_id": 87767709, "body": "It&#39;s unclear what you&#39;re asking"}, {"owner": {"reputation": 131, "user_id": 9547974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb5b67fee7c96c441b3b8f869d6a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Milo", "link": "https://stackoverflow.com/users/9547974/milo"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526487819, "post_id": 50375669, "comment_id": 87767787, "body": "@Yunnosch to reflect array of numbers range between 0 and 127, English is not my native tongue, thanks"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1526487883, "post_id": 50375669, "comment_id": 87767824, "body": "Will each of the number be unique? I.e. any present value will not be repeated? I.e. any value is present once or never?"}, {"owner": {"reputation": 131, "user_id": 9547974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb5b67fee7c96c441b3b8f869d6a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Milo", "link": "https://stackoverflow.com/users/9547974/milo"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526487924, "post_id": 50375669, "comment_id": 87767840, "body": "@Yunnosch yes they can&#39;t repeat, it&#39;s a number&#39;s set"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526487946, "post_id": 50375669, "comment_id": 87767850, "body": "What is the <code>sizeof( long long int )</code> in your environment? Or can you use uint128_t?"}, {"owner": {"reputation": 131, "user_id": 9547974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb5b67fee7c96c441b3b8f869d6a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Milo", "link": "https://stackoverflow.com/users/9547974/milo"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526488029, "post_id": 50375669, "comment_id": 87767891, "body": "@Yunnosch it&#39;s not restricted, but given the fact that the numbers range from 0 to 127, they can&#39;t be logically more than 128 numbers total in each set"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526488123, "post_id": 50375669, "comment_id": 87767945, "body": "I would have sworn that I did not post that comment.. Mind reader, are you? ;-) Or just fast in reading comments I deleted or edited.... :-)"}, {"owner": {"reputation": 131, "user_id": 9547974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb5b67fee7c96c441b3b8f869d6a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Milo", "link": "https://stackoverflow.com/users/9547974/milo"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526488240, "post_id": 50375669, "comment_id": 87768013, "body": "@Yunnosch I didn&#39;t understand your question about the environment but i use UNIX Ubuntu for this project"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526488269, "post_id": 50375669, "comment_id": 87768029, "body": "Does the typedef have to do all the work? Currently I am thinking of identifying any 128 bit integer and then do some magic with bit manipulation. A typedef wouldn&#39;t even occur in that.... I.e. is your task to create an ingenious typedef or more about making an abstract datatype? I.e. a typedef accompanied by some functions for the needed operations."}, {"owner": {"reputation": 131, "user_id": 9547974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb5b67fee7c96c441b3b8f869d6a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Milo", "link": "https://stackoverflow.com/users/9547974/milo"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526488378, "post_id": 50375669, "comment_id": 87768089, "body": "@Yunnosch No the typedef is only for defining the structure as for later I will use it to maintain 6 different sets with the same attribute and do actions with them, like union, intersects etc...."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526488493, "post_id": 50375669, "comment_id": 87768149, "body": "Could you provide your frame? E.g. the prototypes of the functions which should be useable with the construct? And please show the output of <code>printf(&quot;%d\\n&quot;, sizeof(long long int));</code>. Or state that your solution has to be platform independent."}, {"owner": {"reputation": 131, "user_id": 9547974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb5b67fee7c96c441b3b8f869d6a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Milo", "link": "https://stackoverflow.com/users/9547974/milo"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526488884, "post_id": 50375669, "comment_id": 87768322, "body": "@Yunnosch I added some examples to the discription"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1526489583, "post_id": 50375669, "comment_id": 87768684, "body": "See <a href=\"https://stackoverflow.com/questions/31096894/how-can-i-use-bit-fields-to-save-memory\">How can I use bit fields to save memory?</a> \u2013 the answers don&#39;t use bit-fields.  My code is available in my <a href=\"https://github.com/jleffler/soq\" rel=\"nofollow noreferrer\">SOQ</a> (Stack Overflow Questions) repository on GitHub as files <code>sets.c</code> and <code>sets.h</code> in the <a href=\"https://github.com/jleffler/soq/tree/master/src/so-3109-6894\" rel=\"nofollow noreferrer\">src/so-3109-6894</a> sub-directory."}, {"owner": {"reputation": 131, "user_id": 9547974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb5b67fee7c96c441b3b8f869d6a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Milo", "link": "https://stackoverflow.com/users/9547974/milo"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1526489719, "post_id": 50375669, "comment_id": 87768764, "body": "@JonathanLeffler thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526489440, "post_id": 50376102, "comment_id": 87768594, "body": "Thanks for acting upon the clarifications I got from OP, for using the concept I described and for giving credit. It will of course totally surprise you that I was also making an answer."}], "tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": true, "score": 2, "last_activity_date": 1526489446, "last_edit_date": 1526489446, "creation_date": 1526489043, "answer_id": 50376102, "question_id": 50375669, "link": "https://stackoverflow.com/questions/50375669/representing-a-set-of-integers-with-bits-in-c/50376102#50376102", "title": "Representing a set of integers with bits in C", "body": "<p>You cannot do this just with a <code>typedef</code>.</p>\n\n<p>Given that, any type which contains at least 128 bits will be enough to implement this. Examples:</p>\n\n<pre><code>typedef uint32_t intset[4]; // array\ntypedef struct {uint64_t data[2];} intset; // struct containing an array\ntypedef uint128_t intset; // built-in 128-bit integer type\n</code></pre>\n\n<p>In addition to the <code>typedef</code>, you have to define functions that work with the data structure. For example:</p>\n\n<pre><code>void intset_init(intset *set);\nvoid intset_add(intset *set, int n);\nvoid intset_remove(intset *set, int n);\nbool intset_check(intset *set, int n);\nbool intset_is_empty(intset *set);\n</code></pre>\n\n<p>Each such function should use <a href=\"https://stackoverflow.com/q/47981/509868\">bit-fiddling</a> to do its work. For example:</p>\n\n<pre><code>typedef uint32_t intset[4];\n\nvoid intset_add(intset *set, int n)\n{\n    (*set)[n / 32] |= (uint32_t)1 &lt;&lt; (n % 32);\n}\n</code></pre>\n\n<hr>\n\n<p>It may be more efficient to pass and return the data structure by value, not by pointer. If you want this, you cannot use an array <code>typedef</code> - use any other one which is convenient.</p>\n\n<pre><code>typedef struct {uint64_t data[2];} intset;\n\nintset intset_add(intset set, int n)\n{\n    set.data[n / 64] |= (uint64_t)1 &lt;&lt; (n % 64);\n    return set;\n}\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 9547974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb5b67fee7c96c441b3b8f869d6a3ea?s=128&d=identicon&r=PG&f=1", "display_name": "Milo", "link": "https://stackoverflow.com/users/9547974/milo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 50376102, "answer_count": 1, "score": 2, "last_activity_date": 1526489446, "creation_date": 1526487472, "last_edit_date": 1526488860, "question_id": 50375669, "link": "https://stackoverflow.com/questions/50375669/representing-a-set-of-integers-with-bits-in-c", "title": "Representing a set of integers with bits in C", "body": "<p>I need help. I got tasked to make a typedef which will represent an array of numbers from 0 to 127.\nThe numbers cannot repeat - it's a set of integers.</p>\n\n<p>This is not good because it consumes too much data :</p>\n\n<pre><code>     typedef struct set{\n       char array[128];\n      }some_set;\n</code></pre>\n\n<p>as for later this data structure will be used to define different set (set_a,set_b,set_c ,etc...) which will be used for different operations like: </p>\n\n<pre><code>      print_set which will print the set  \n\n      union_set which combines 2 sets into 3rd set\n\n      intersect_set which will intersect 2 sets and save the data in the 3rd\n</code></pre>\n\n<p>this are examples of usage.</p>\n\n<p>Someone suggested to represent each number with a bit, but I can't really wrap my head around it.</p>\n"}, {"tags": ["c", "string", "decimal", "scanf"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 7, "creation_date": 1526487721, "post_id": 50375659, "comment_id": 87767741, "body": "<code>char month;  scanf(&quot;%s&quot;, &amp;month);</code> is a problem.  Research <code>scanf()</code> and what is expected with <code>&quot;%s&quot;</code>.  <code>&quot;%s&quot;</code> wants to form a <i>string</i>  ( a null character terminate sequence of characters).  <code>char</code> is too small."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526487729, "post_id": 50375659, "comment_id": 87767745, "body": "You are reading a &quot;string&quot; into a single char."}], "answers": [{"tags": [], "owner": {"reputation": 138, "user_id": 4610738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XSifY.jpg?s=128&g=1", "display_name": "SbrTa", "link": "https://stackoverflow.com/users/4610738/sbrta"}, "is_accepted": false, "score": 0, "last_activity_date": 1526489570, "creation_date": 1526489570, "answer_id": 50376261, "question_id": 50375659, "link": "https://stackoverflow.com/questions/50375659/two-scanf-functions-but-one-reads-a-different-value/50376261#50376261", "title": "Two scanf functions but one reads a different value", "body": "<p>you declared <strong>month</strong> as character, so you should use <strong>%c</strong> for input. <strong>%s</strong> is used for input character array. and before <strong>scanf(\"%c\", &amp;month);</strong>, also use <strong>getchar();</strong>. </p>\n\n<ul>\n<li>getchar();</li>\n<li>scanf(\"%c\", &amp;month);</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 9801355, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214453799711465/picture?type=large", "display_name": "Dan Tang", "link": "https://stackoverflow.com/users/9801355/dan-tang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526490955, "creation_date": 1526487447, "last_edit_date": 1526490955, "question_id": 50375659, "link": "https://stackoverflow.com/questions/50375659/two-scanf-functions-but-one-reads-a-different-value", "title": "Two scanf functions but one reads a different value", "body": "<p>I'm struggling in letting the program read the variable total that was  previously input after asking for the input for the variable month. The total is always 28257 and I don't know why. </p>\n\n<p>I found out using <code>\" %c\"</code> on line 11 works, but I would like to know why <code>\"%s\"</code> doesn't.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;  \n    int main(void) { \n\n    int total; \n    char month;\n    float sales;\n\n    printf (\"Enter total amount collected (-1 to quit): \");\n    scanf(\"%d\", &amp;total);\n    printf(\"Enter name of month: \");\n    scanf(\"%s\", &amp;month);\n    printf(\"total collections : $ %d\\n\", total);\n    sales = (total/1.09);\n    printf(\"sales : $ %.2f\\n\", sales);\n    printf(\"county sales tax: $ %.2f\\n\", sales * 0.05);\n    printf(\"state tax: $ %.2f\\n\", sales*0.04);\n    printf(\"total sales tax collected: $ %.2f\\n\", sales *0.05 + sales *0.04);\n    return 0;   }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1526486744, "post_id": 50375448, "comment_id": 87767220, "body": "You might want to look into <i>dynamic memory allocation</i> subject."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1526487432, "post_id": 50375448, "comment_id": 87767568, "body": "You don&#39;t need an array of words to count how many times a particular word appears in a file, much less an array of indefinite length."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1526489314, "post_id": 50375448, "comment_id": 87768538, "body": "You also should check the return value from <code>fopen</code> and also <code>char ch</code> should be <code>int ch</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9801212, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Santosh", "link": "https://stackoverflow.com/users/9801212/santosh"}, "edited": false, "score": 0, "creation_date": 1526577877, "post_id": 50378299, "comment_id": 87810190, "body": "HI Landru, Thanks for revert.Could you please explain in above program use of int argc and char** argv. Also as i am not giving anywhere the name of file from which i want to count number of times a word is appearing. I tried executing the given program but i got 0 in output."}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "reply_to_user": {"reputation": 11, "user_id": 9801212, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Santosh", "link": "https://stackoverflow.com/users/9801212/santosh"}, "edited": false, "score": 0, "creation_date": 1526596362, "post_id": 50378299, "comment_id": 87818581, "body": "@Santosh : sure thing;  in fact, both of your questions are tightly related;  <b>argc</b> holds the value for the number of command line arguments, and <b>argv</b> is a set of pointers to those command line arguments;  <code>fp = fopen(argv[1], &quot;r&quot;);</code> obtains the input file name from the first command line argument;  I&#39;ll post an edit to my answer with a bit more info"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1526802284, "post_id": 50378299, "comment_id": 87879633, "body": "<code>fgetc</code> returns <code>int</code> by intention!"}], "tags": [], "owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "is_accepted": false, "score": 0, "last_activity_date": 1526597311, "last_edit_date": 1526597311, "creation_date": 1526497572, "answer_id": 50378299, "question_id": 50375448, "link": "https://stackoverflow.com/questions/50375448/how-to-initialize-a-array-of-indefinite-length/50378299#50378299", "title": "How to initialize a array of indefinite length", "body": "<p>You can obtain the size of a file with <code>stat()</code>, from <code>&lt;sys/stat.h&gt;</code>;  e.g., see this SO question: <a href=\"https://stackoverflow.com/questions/8236/how-do-you-determine-the-size-of-a-file-in-c\">How do you determine the size of a file in C?</a>    Once you have the file size, you <em>could</em> allocate a char array big enough to hold it.</p>\n\n<p>But, you can also parse through a file withOUT reading it all into memory first.  You read a few bytes at a time into a small buffer and work with just those bytes.  Below is a quick-n-dirty implementation of that approach, based on your code.</p>\n\n<p>PLEASE NOTE:  There are several ways to improve this code.  For one, there should be more error checking; for another, you can use the <code>strcmp()</code> / <code>strncmp()</code> / <code>strnicmp()</code> family of functions to more efficiently inspect the input buffer; for another, you can use command line arguments instead of hard-coded values (I did that, below; it was the only sane way I could feed a bunch of test input files in); for yet another, you can use e.g. <code>buf[indx++] = ch</code> as shorthand (because that <strong>post</strong>-increments); etc.</p>\n\n<p>My main point with the code below is to help you start to think about file processing as a stream, rather than reading in the whole file up front.  The comments others have added to your question are well worth noting, too.  Hope this helps!</p>\n\n<pre><code>// count of occurrences of word 'is' in input file\n\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint main(int argc, char** argv) {\n    FILE *fp;\n    int count = 0;\n    int times = 0;\n\n    char ch = 0;\n    char buf[8];    // more than enough room to look for 'is' words\n    int indx = 0;\n\n    fp = fopen(argv[1], \"r\");\n\n    // fill the input buffer with nul bytes\n    memset(buf, 0, 8);\n    indx = 0;\n\n    // pretend that the input file starts with ' ', in order\n    // to detect 'is' at the start of the file\n    buf[indx] = ' ';\n    indx++;\n\n    while ((ch = fgetc(fp)) != EOF) {\n        count++;\n\n        buf[indx] = ch;\n        indx++;\n\n        // uncomment this to see the progression of 'buf' as\n        // the input file is being read\n        //printf(\"buf is : [%s]\\n\", buf);\n\n        // if the input buffer does not begin with a word\n        // boundary, start the input buffer over by resetting\n        // it and looping back to the top of the reading loop\n        if (buf[0] != ' ' &amp;&amp; buf[0] != ',' &amp;&amp; buf[0] != '\\n') {\n            memset(buf, 0, 8);\n            indx = 0;\n            continue;\n        }\n\n        // if we have read 4 characters (indx 0 through indx 3),\n        // it's time to look to see if we have an 'is'\n        if (indx == 4) {\n            // if we have 'is' between word boundaries, count it\n            if ((buf[0] == ' ' || buf[0] == ',' || buf[0] == '\\n') &amp;&amp;\n                (buf[1] == 'i' || buf[1] == 'I') &amp;&amp;\n                (buf[2] == 's' || buf[2] == 'S') &amp;&amp;\n                (buf[3] == ' ' || buf[3] == ',' || buf[3] == '\\n')) {\n                times++;\n            }\n\n            // reset the input buffer\n            memset(buf, 0, 8);\n            indx = 0;\n\n            // if we ended with a word boundary, preserve it as the\n            // word boundary at the beginning of the next word\n            if (ch == ' ' || ch == ',' || ch == '\\n') {\n                buf[indx] = ' ';\n                indx++;\n            }\n        }\n    }\n    // EOF is also a word boundary, so we do one final check to see\n    // if there is an 'is' at the end of the file\n    if ((buf[0] == ' ' || buf[0] == ',' || buf[0] == '\\n') &amp;&amp;\n        (buf[1] == 'i' || buf[1] == 'I') &amp;&amp;\n        (buf[2] == 's' || buf[2] == 'S')) {\n        times++;\n    }\n\n    printf(\"input file is %d characters long\\n\", count);\n    printf(\"the string IS appeared %d times in the input file\\n\", times);\n}\n</code></pre>\n\n<p><strong>Additional information about argc and argv (re: comment question)</strong></p>\n\n<p><strong>argc</strong> is the number of command line arguments;  <strong>argv</strong> is a set of pointers to those command line arguments.</p>\n\n<p><code>argv[0]</code> always points to the command itself (i.e., the name of the executing program).  <code>argc</code> is often used to check for a minimum number of command line arguments, as a limit to loop over the command line arguments, as a test before using <code>argv[n]</code>, etc.  Sometimes, you will see argv specified as <code>char *argv[]</code>, which of course operates the same way as <code>char **argv</code>.</p>\n\n<p>So, the line <code>fp = fopen(argv[1], \"r\");</code> uses the 1st command line argument as the filename of the input file.  e.g., in my tests, I compiled this code as <code>countis</code> and executed it with <code>countis countis-input-test-001</code>.  (I had a series of test input files, and used a shell script to process each one, to test each edit I made to the program.)</p>\n\n<p>Here are a couple of places to read more and see code examples using argc and argv:</p>\n\n<p><a href=\"https://www.tutorialspoint.com/cprogramming/c_command_line_arguments.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/cprogramming/c_command_line_arguments.htm</a>\n<a href=\"http://www.teach.cs.toronto.edu/~ajr/209/notes/argv.html\" rel=\"nofollow noreferrer\">http://www.teach.cs.toronto.edu/~ajr/209/notes/argv.html</a></p>\n\n<p>You can also google <code>c programming argc argv</code> or similar for many more similar resources.</p>\n"}], "owner": {"reputation": 11, "user_id": 9801212, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Santosh", "link": "https://stackoverflow.com/users/9801212/santosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1526597311, "creation_date": 1526486675, "last_edit_date": 1526489042, "question_id": 50375448, "link": "https://stackoverflow.com/questions/50375448/how-to-initialize-a-array-of-indefinite-length", "title": "How to initialize a array of indefinite length", "body": "<p>My below code provides count of occurrences of \"is\" in a word file. But in this program I am defining size of file beforehand. Help me modify the program so that I could fetch the word \"is\" in a file whose word count is unknown. The length of the array file should be equal to the length of the word file.</p>\n\n<pre><code>// Count of occurrence of word 'is' in file WordFile.\n\n#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;string.h&gt;\n\n//function to append\n\nvoid append(char* s, char c)\n{\n        int len = strlen(s);\n        s[len] = c;\n        s[len+1] = '\\0';\n}\n\nvoid main()\n{\n    FILE *fp;\n    int i=0,count=0,j,k,space,times=0;\n    char ch,file[1000];\n\n    fp = fopen(\"../WordFile.txt\",\"r\");\n\n    while ((ch=fgetc(fp)) != EOF)\n    {\n        count++;\n        append(file,ch);\n\n\n    }\n\n    printf(\"Count of file is %d \\n\",count);\n\n    printf(\"%s \\n\",file);\n\n    for(i=0;i&lt;(count-3);i++)\n    {\n        j = (file[i] == 'i'  || file[i] == 'I');\n\n        k = (file[i+1] == 's' || file[i+1] == 'S');\n\n        space = (file[i+2] == ' ' || file[i+2] == ',' || file[i+2] == EOF);\n\n        if( (j &amp;&amp; k &amp;&amp; space ) == 1 )\n            times ++;\n    }\n\n    printf(\"the string IS appeared %d times in the griven file. \\n\", times);\n    getch();\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "opengl", "glfw"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 3, "creation_date": 1526486971, "post_id": 50375390, "comment_id": 87767342, "body": "Since I saw callbacks in X11 the first time, there is usually always a client data pointer which is registered together with function pointer and passed to callback. This could be used to &quot;bind&quot; client data. Somehow it seems the GLFW people forgot this (or left this out for performance considerations). Either you store your client data in the Window (as suggested by LRiO), or you have to store them in global variables. I see no other way around."}, {"owner": {"reputation": 1065, "user_id": 6720576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4iFs.jpg?s=128&g=1", "display_name": "AsthaUndefined", "link": "https://stackoverflow.com/users/6720576/asthaundefined"}, "edited": false, "score": 0, "creation_date": 1526879879, "post_id": 50375390, "comment_id": 87898707, "body": "Please post the code also."}], "answers": [{"comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 1, "creation_date": 1526487304, "post_id": 50375445, "comment_id": 87767498, "body": "Only after reading this answer, I understand what the question asked. Maybe the downvote means &quot;don&#39;t answer unclear questions&quot;. Only guessing."}, {"owner": {"reputation": 19, "user_id": 5127230, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y-smJ9LmgKw/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY-eSqC72PC4XBrU05jnvIDajlZYg/mo/photo.jpg?sz=128", "display_name": "Denis Tyschenko", "link": "https://stackoverflow.com/users/5127230/denis-tyschenko"}, "edited": false, "score": 0, "creation_date": 1526494159, "post_id": 50375445, "comment_id": 87771094, "body": "Thanks, I did like you said with functions, looked for more &quot;elegant&quot; way"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 4, "last_activity_date": 1526486673, "creation_date": 1526486673, "answer_id": 50375445, "question_id": 50375390, "link": "https://stackoverflow.com/questions/50375390/how-to-use-a-non-argument-variable-in-function/50375445#50375445", "title": "How to use a non-argument variable in function?", "body": "<p>You can't. C function pointers do not support binding arguments. Generally, you can pass a pointer to a specific function that already has that value <code>-90.0f</code> baked into it, or use a global variable.</p>\n\n<p>Yes, this sucks. It's why C++ introduced <code>std::bind</code>, and then lambdas. Unfortunately, the OpenGL API does not allow you to make use of such functionality.</p>\n\n<p>However, it does allow you to \"bind\" some arbitrary data structure to a window context, via <a href=\"http://www.glfw.org/docs/latest/group__window.html#ga3d2fc6026e690ab31a13f78bc9fd3651\" rel=\"nofollow noreferrer\"><code>glfwSetWindowUserPointer</code></a> and <a href=\"http://www.glfw.org/docs/latest/group__window.html#ga17807ce0f45ac3f8bb50d6dcc59a4e06\" rel=\"nofollow noreferrer\"><code>glfwGetWindowUserPointer</code></a>, so you could explore encoding your value into that structure.</p>\n"}], "owner": {"reputation": 19, "user_id": 5127230, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y-smJ9LmgKw/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY-eSqC72PC4XBrU05jnvIDajlZYg/mo/photo.jpg?sz=128", "display_name": "Denis Tyschenko", "link": "https://stackoverflow.com/users/5127230/denis-tyschenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 50375445, "answer_count": 1, "score": -3, "last_activity_date": 1526879464, "creation_date": 1526486482, "last_edit_date": 1526486983, "question_id": 50375390, "link": "https://stackoverflow.com/questions/50375390/how-to-use-a-non-argument-variable-in-function", "title": "How to use a non-argument variable in function?", "body": "<p>Learning opengGL(+glfw) I met interesting thing: I have to use only one kind of prototype of function <code>mouse_callback</code>in <code>glfwSetCursorPosCallback (Glfwwindow* ,  GLFWcursorposfun mouse_callback);</code> How I should I use variable <code>GLfloat yaw = -90.0f;</code> in my <code>mouse_callback</code> without passing it as argument(there will be an error) or global variables.</p>\n"}, {"tags": ["c", "string", "strcpy"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1526484249, "post_id": 50374711, "comment_id": 87765642, "body": "undefined behaviour. You broke something but you&#39;ll know it later in your program. Or it&#39;ll work."}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1526484332, "post_id": 50374711, "comment_id": 87765698, "body": "Behaving different---Undefined behavior"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1526484347, "post_id": 50374711, "comment_id": 87765709, "body": "<code>my_school_nane</code> is not big enough !"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 5, "creation_date": 1526484556, "post_id": 50374711, "comment_id": 87765851, "body": "That site you linked is <b>fundamentally wrong</b>. There will be no truncation etc. (since the function <i>cannot</i> know the destination buffer&#39;s size), asking to copy more characters than the buffer can hold is simply Undefined Behaviour (a buffer overrun), plain and simple."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1526484997, "post_id": 50374711, "comment_id": 87766129, "body": "that site is appalling indeed. Note that the example given uses a <i>bigger</i> destination size so it works... Don&#39;t believe everything on the internet. Read StackOverflow :)"}, {"owner": {"reputation": 386, "user_id": 8216351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1924a6bd80575731b3bfe903c853b7ac?s=128&d=identicon&r=PG&f=1", "display_name": "iamJP", "link": "https://stackoverflow.com/users/8216351/iamjp"}, "edited": false, "score": 0, "creation_date": 1526485216, "post_id": 50374711, "comment_id": 87766265, "body": "Wow I am also appalled by the site linked.  Here is a better link for you to use.  <a href=\"http://man7.org/linux/man-pages/man3/strcpy.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/strcpy.3.html</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1526486022, "post_id": 50374711, "comment_id": 87766780, "body": "Bah.. another &quot;programming&quot; site for a blacklist..."}, {"owner": {"reputation": 31483, "user_id": 502381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74b99e687909be449e0130a50950eac7?s=128&d=identicon&r=PG&f=1", "display_name": "JJJ", "link": "https://stackoverflow.com/users/502381/jjj"}, "edited": false, "score": 0, "creation_date": 1526486499, "post_id": 50374711, "comment_id": 87767072, "body": "Even if you don&#39;t know anything about C, the <code>Copyright 2018 &#169;  http:&#47;&#47;localhost&#47;fresh2refresh</code> footer should send you off screaming..."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1526486560, "post_id": 50374711, "comment_id": 87767106, "body": "My goodness, who runs that site?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1526486645, "post_id": 50374711, "comment_id": 87767160, "body": "Some Java enthusiasts?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1526486923, "post_id": 50374711, "comment_id": 87767311, "body": "note: <code>TomCruse_MI</code> should be <code>TomCruise_MI</code> (effect of the truncation already?)"}], "owner": {"reputation": 1877, "user_id": 1228301, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/18ec9b6d5d1aa6a3bcea38c99df163a9?s=128&d=identicon&r=PG&f=1", "display_name": "vicky", "link": "https://stackoverflow.com/users/1228301/vicky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "closed_date": 1526484266, "answer_count": 0, "score": 1, "last_activity_date": 1526485204, "creation_date": 1526484150, "question_id": 50374711, "link": "https://stackoverflow.com/questions/50374711/strcpy-in-c-is-behaving-different", "closed_reason": "Duplicate", "title": "strcpy in c is behaving different", "body": "<p>I am trying to understand strcpy() function but I could not. As said in <a href=\"https://fresh2refresh.com/c-programming/c-strings/c-strcpy-function/\" rel=\"nofollow noreferrer\">this page</a> If destination string length is less than source string, entire source string value won\u2019t be copied into destination string, Instead it will be truncated. But when I tried to run this program </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char my_full_name[]=\"TomCruse_MI\";\n    char my_school_name[]=\"DON_BOSCO\";\n    strcpy(my_school_name, my_full_name);\n    printf(\"After strcpy() function to copy my name into my school : \\'%s\\'\\n\" , my_school_name);\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>I am getting the out as : </p>\n\n<pre><code>After strcpy() function to copy my name into my school : 'TomCruse_MI'\n</code></pre>\n\n<p>My question is how come the string 'TomCruse_MI' is not getting truncated even though the source string is larger than the destination size.</p>\n"}, {"tags": ["c", "pointers", "fortran", "wrapper", "fortran-iso-c-binding"], "comments": [{"owner": {"reputation": 2352, "user_id": 5711725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cfaab398800db4fd0e9b0aae6621bda?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Mart&#237;n", "link": "https://stackoverflow.com/users/5711725/javier-mart%c3%adn"}, "edited": false, "score": 2, "creation_date": 1526481954, "post_id": 50373861, "comment_id": 87763990, "body": "If your C pointer is coming as an argument to your function called from C (that is, the dataPtr line is a dummy argument of your procedure) it also needs to be declared as <code>value</code>. Otherwise, the C-equivalent signature would be <code>double**</code>, not <code>double*</code>, as Fortran would be expecting a pointer <i>passed by reference</i>."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 1, "creation_date": 1526486034, "post_id": 50373861, "comment_id": 87766790, "body": "Please always show more code. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Do not try to describe the code by words, copy it here. It is very, very important."}, {"owner": {"reputation": 41, "user_id": 3980223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa0b2f1a7a846da60fcc9670756fd85?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Venturi", "link": "https://stackoverflow.com/users/3980223/diego-venturi"}, "edited": false, "score": 0, "creation_date": 1526490225, "post_id": 50373861, "comment_id": 87769043, "body": "Added more of the code."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 3980223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa0b2f1a7a846da60fcc9670756fd85?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Venturi", "link": "https://stackoverflow.com/users/3980223/diego-venturi"}, "is_accepted": true, "score": 0, "last_activity_date": 1526579684, "creation_date": 1526579684, "answer_id": 50397742, "question_id": 50373861, "link": "https://stackoverflow.com/questions/50373861/trying-to-handle-a-fortran-pointer-call-c-f-pointer/50397742#50397742", "title": "Trying to handle a Fortran pointer - call c_f_pointer", "body": "<p>Apparently I got it.</p>\n\n<p>First of all the data pointer has to enter as <code>intent(in)</code> and <code>value</code> in subroutine <code>gather</code>:</p>\n\n<pre><code>subroutine gather(ptr, name, typ, countf, data) bind(c, name='gather')\n    ! ...\n    type(c_ptr), value, intent(in) :: data\n    ! instead of:\n    ! type(c_ptr), intent(out) :: data\nend subroutine gather\n</code></pre>\n\n<p>and i changed the declaration of <code>dataF</code>, which do not need to be called from <code>c_f_pointer</code> anymore:</p>\n\n<pre><code>real(c_float), target, allocatable :: dataF(:,:)\n</code></pre>\n\n<p>So I removed <code>call c_f_pointer(dataPtr, dataF, [natoms,countf])</code> and added instead:</p>\n\n<pre><code>allocate(dataF(natoms,countf))\ndataPtr = c_loc(dataCFloat)\n</code></pre>\n\n<p>Now, <code>dataF</code> contains the updated array directly.</p>\n"}], "owner": {"reputation": 41, "user_id": 3980223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa0b2f1a7a846da60fcc9670756fd85?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Venturi", "link": "https://stackoverflow.com/users/3980223/diego-venturi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "accepted_answer_id": 50397742, "answer_count": 1, "score": 3, "last_activity_date": 1526579684, "creation_date": 1526481678, "last_edit_date": 1526490507, "question_id": 50373861, "link": "https://stackoverflow.com/questions/50373861/trying-to-handle-a-fortran-pointer-call-c-f-pointer", "title": "Trying to handle a Fortran pointer - call c_f_pointer", "body": "<p>I'm having a problem trying to handle a Fortran pointer after using:\n<code>call c_f_pointer(dataPtr, dataF, [natoms,countf])</code>, where <code>dataPtr</code> is a C pointer with <code>intent(in)</code> and <code>dataF</code> is a Fortran pointer with <code>intent(out)</code>.</p>\n\n<p><code>natoms</code> and <code>countf</code> are integers to define the size of the output pointer.</p>\n\n<p>Variables were previously declared as:</p>\n\n<pre><code>use, intrinsic :: iso_c_binding\ninteger natoms, countf\ntype(c_ptr) dataPtr\nreal(c_float), pointer :: dataF(:,:) =&gt; NULL()\n</code></pre>\n\n<p>and <code>dataPtr</code> comes from another function.</p>\n\n<p>If I print <code>shape(dataF)</code> I get the correct result. But I cannot print or copy or do whatever with <code>dataF</code>. Error I get is <em>forrtl: severe (174): SIGSEGV, segmentation fault occurred</em>.</p>\n\n<p>I followed the example <a href=\"https://software.intel.com/en-us/node/678433\" rel=\"nofollow noreferrer\">https://software.intel.com/en-us/node/678433</a>, which I can compile and manipulate with no problems.</p>\n\n<hr>\n\n<p>EDIT: adding more of the code.</p>\n\n<pre><code>program test\n\nuse, intrinsic :: iso_c_binding\nimplicit none\n\ninterface\n    subroutine open(ptr) bind(c, name='open')\n        use, intrinsic :: iso_c_binding\n        implicit none\n        type(c_ptr), intent(out) :: ptr\n    end subroutine open\n    subroutine gather(ptr, name, typ, countf, data) bind(c, name='gather')\n        use, intrinsic :: iso_c_binding\n        implicit none\n        type(c_ptr), value, intent(in) :: ptr\n        type(c_ptr), value, intent(in) :: name\n        integer(c_int), value, intent(in) :: typ\n        integer(c_int), value, intent(in) :: countf\n        type(c_ptr), intent(out) :: data\n    end subroutine gather\n    subroutine scatter(ptr, name, typ, countf, data) bind(c, name='scatter')\n        use, intrinsic :: iso_c_binding\n        implicit none\n        type(c_ptr), value, intent(in) :: ptr\n        type(c_ptr), value, intent(in) :: name\n        integer(c_int), value, intent(in) :: typ\n        integer(c_int), value, intent(in) :: countf\n        type(c_ptr), intent(in) :: data\n    end subroutine scatter\nend interface\n\ninteger natoms, countf, typ\ncharacter(len=2,kind=c_char) :: var = c_char_'x'//c_null_char\ntype(c_ptr) ptr, dataPtr\nreal(c_float), pointer :: dataF(:,:) =&gt; NULL()\n\n!opens an instance of the program (loaded as library into my Fortran)\n!ptr is a pointer used to reference to it in other calls\ncall open(ptr)\n\n!Here comes definitions for the integer variables\n!...\n\n!get data\ncall gather(ptr, c_loc(var), typ, countf, dataPtr)\n\n!need to do stuff with the data here\ncall c_f_pointer(dataPtr, dataF, [natoms,countf])\n\n!return modified data\ncall scatter(ptr, c_loc(var), typ, countf, dataPtr)\n</code></pre>\n\n<p>If I just get the data <code>call gather(...)</code> and then return it <code>call scatter(...)</code> the program works. But I need to do stuff in between.</p>\n\n<hr>\n\n<p>EDIT2: added C functions</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void open(void **ptr) {\n// ...\n}\n\nvoid gather(void *ptr, const char *name,\n                     int type, int count, void *data) {\n// ...\n}\n\nvoid scatter(void *ptr, const char *name,\n                     int type, int count, void *data) {\n// ...\n}\n</code></pre>\n"}, {"tags": ["c", "data-structures"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1526481703, "post_id": 50373829, "comment_id": 87763802, "body": "Run it in a debugger and see what is happening."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 4, "creation_date": 1526481733, "post_id": 50373829, "comment_id": 87763825, "body": "The previous node is still pointing to the deleted node."}], "answers": [{"tags": [], "owner": {"reputation": 1471, "user_id": 3655463, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c567c095653589d1b50f37aeb72dbab1?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Wojtczak", "link": "https://stackoverflow.com/users/3655463/mateusz-wojtczak"}, "is_accepted": false, "score": 2, "last_activity_date": 1526483579, "last_edit_date": 1526483579, "creation_date": 1526481891, "answer_id": 50373926, "question_id": 50373829, "link": "https://stackoverflow.com/questions/50373829/confusion-about-deleting-the-last-node-in-linked-list/50373926#50373926", "title": "Confusion about deleting the last node in linked list", "body": "<p>No its not right. You have to update previous node next node as well, and head if head was last node. So first of all you should take pointer to head pointer, you need that in case you need to update head. Secondly as it is singly linked list you should keep previous node:</p>\n\n<pre><code>node* Delete_Last(node** head) {\n    if (!*head) {\n        return 0;\n    }\n\n   node* i = *head, *previous = 0;\n   while (i-&gt;next){\n      previous = i;\n      i = i-&gt;next;\n   }\n   free(i);\n   if (previous) {\n       previous-&gt;next = 0;\n   } else {\n       *head = 0;\n   }\n   return previous;\n}\n</code></pre>\n\n<p>I don't know what you want to return, so I assumed on your code its new end, returning head again doesn't make sense. Now you can call this with:</p>\n\n<pre><code>node* prevLast = Delete_Last(&amp;head);\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 9081503, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TW7jlmhQmZA/AAAAAAAAAAI/AAAAAAAAAZM/T_QjlJY2Fkg/photo.jpg?sz=128", "display_name": "Haythem Tarchouna", "link": "https://stackoverflow.com/users/9081503/haythem-tarchouna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526483579, "creation_date": 1526481603, "last_edit_date": 1526481898, "question_id": 50373829, "link": "https://stackoverflow.com/questions/50373829/confusion-about-deleting-the-last-node-in-linked-list", "title": "Confusion about deleting the last node in linked list", "body": "<p>The logic of deleting the last node is as follows right,</p>\n\n<p>Go to the pointer of the node witch its next is <code>NULL</code> then free it, right?\nI tried to implement this logic in a function:</p>\n\n<pre><code>node* Delete_Last(node*head){\n   node* i=head;\n   while (i-&gt;next!=NULL){\n      i=i-&gt;next;\n   }\n   free(i);\n   i=NULL;\n   return head;\n}\n</code></pre>\n\n<p>When I try to print the list, I can't - it's an infinite loop.\nCan you tell what's the flaw in my logic and how to correct it, please?</p>\n"}, {"tags": ["c", "oop"], "comments": [{"owner": {"reputation": 634, "user_id": 9690677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GCJst.jpg?s=128&g=1", "display_name": "Luke Ramsden", "link": "https://stackoverflow.com/users/9690677/luke-ramsden"}, "edited": false, "score": 2, "creation_date": 1526481414, "post_id": 50373748, "comment_id": 87763586, "body": "Do you mean a <a href=\"https://www.tutorialspoint.com/cplusplus/cpp_static_members.htm\" rel=\"nofollow noreferrer\">static member</a>? Dot notation is for instances of a class/struct."}, {"owner": {"reputation": 2999, "user_id": 7520531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0107497596782a18d4a853214a883546?s=128&d=identicon&r=PG&f=1", "display_name": "Jose", "link": "https://stackoverflow.com/users/7520531/jose"}, "edited": false, "score": 1, "creation_date": 1526481450, "post_id": 50373748, "comment_id": 87763609, "body": "A struct with pointers to functions?"}, {"owner": {"reputation": 2334, "user_id": 4556675, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/aX8Xv.jpg?s=128&g=1", "display_name": "Jasonca1", "link": "https://stackoverflow.com/users/4556675/jasonca1"}, "edited": false, "score": 0, "creation_date": 1526481483, "post_id": 50373748, "comment_id": 87763632, "body": "Well just methods attached to structs, which I assume are the closest you can get to classes in C"}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 2, "creation_date": 1526481544, "post_id": 50373748, "comment_id": 87763674, "body": "@Jasonca1 Luke is asking whether you really meant <code>myClass.someMethod();</code> or rather <code>myClass myInstance; myInstance.someMethod();</code>."}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1526481630, "post_id": 50373748, "comment_id": 87763735, "body": "you can somewhat kludge it (e.g. instance specific methods, which can be done in C <i>kinda</i>) you are responsible for passing on the value of the the member back to the functions."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5940189"}, "edited": false, "score": 1, "creation_date": 1526481735, "post_id": 50373748, "comment_id": 87763827, "body": "I believe that&#39;s what C++ is for :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526481758, "post_id": 50373748, "comment_id": 87763847, "body": "You can use function pointers but often it is better to use specially named (prefixed) functions and treat/document those as if they were member functions."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526481898, "post_id": 50373748, "comment_id": 87763953, "body": "@Orangesandlemons Nah, C++ is for creating a poodle out of a feather, when all you wanted was to avoid creating a hen out of a feather."}, {"owner": {"reputation": 2334, "user_id": 4556675, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/aX8Xv.jpg?s=128&g=1", "display_name": "Jasonca1", "link": "https://stackoverflow.com/users/4556675/jasonca1"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1526482016, "post_id": 50373748, "comment_id": 87764036, "body": "@sepp2k Both. Being able to implement static methods and member methods."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1526482217, "post_id": 50373748, "comment_id": 87764206, "body": "@Jasonca1 <code>typename.id</code> is not valid syntax in C, nor is <code>typename::id</code> (which is how you&#39;d access static members in C++), so no, there&#39;s no way to make that work."}], "answers": [{"comments": [{"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1526481608, "post_id": 50373797, "comment_id": 87763717, "body": "That only works if you remove the <code>typedef</code> (making <code>Test</code> a variable instead of a type name)."}, {"owner": {"reputation": 23517, "user_id": 287976, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8cf3090cda1c829f3f8df0a3796fc60c?s=128&d=identicon&r=PG", "display_name": "brandizzi", "link": "https://stackoverflow.com/users/287976/brandizzi"}, "edited": false, "score": 2, "creation_date": 1526481613, "post_id": 50373797, "comment_id": 87763721, "body": "But not the function will not have a pointer back to the struct holding it!"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1526481820, "post_id": 50373797, "comment_id": 87763900, "body": "your code won&#39;t compile. Also <code>typedef</code> is a bad idea!"}, {"owner": {"reputation": 609, "user_id": 7690030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11846ade17a8760f2501ab72fcc1f37?s=128&d=identicon&r=PG", "display_name": "Martin Chekurov", "link": "https://stackoverflow.com/users/7690030/martin-chekurov"}, "reply_to_user": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1526481844, "post_id": 50373797, "comment_id": 87763917, "body": "@Ahmed Masud this is pesudo code, but ill change it if its so big problem"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 0, "creation_date": 1526481989, "post_id": 50373797, "comment_id": 87764018, "body": "If so, please add language to indicate."}], "tags": [], "owner": {"reputation": 609, "user_id": 7690030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11846ade17a8760f2501ab72fcc1f37?s=128&d=identicon&r=PG", "display_name": "Martin Chekurov", "link": "https://stackoverflow.com/users/7690030/martin-chekurov"}, "is_accepted": false, "score": 0, "last_activity_date": 1526482117, "last_edit_date": 1526482117, "creation_date": 1526481529, "answer_id": 50373797, "question_id": 50373748, "link": "https://stackoverflow.com/questions/50373748/dot-notation-in-c/50373797#50373797", "title": "Dot notation in C?", "body": "<p>Yes, <code>someMethod()</code> will be a function pointer:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef struct\n{\n    void (*someMethod) (void);\n\n}Test;\n\nvoid asd (void)\n{\n    printf(\"works\");\n}\n\nint main(void)\n{\n    Test test;\n    test.someMethod = asd;\n    test.someMethod(); // will print works\n}\n</code></pre>\n"}], "owner": {"reputation": 2334, "user_id": 4556675, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/aX8Xv.jpg?s=128&g=1", "display_name": "Jasonca1", "link": "https://stackoverflow.com/users/4556675/jasonca1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 546, "favorite_count": 0, "closed_date": 1526481767, "answer_count": 1, "score": -2, "last_activity_date": 1526482117, "creation_date": 1526481361, "question_id": 50373748, "link": "https://stackoverflow.com/questions/50373748/dot-notation-in-c", "closed_reason": "Duplicate", "title": "Dot notation in C?", "body": "<p>Is it possible to implement dot notation in C (OOP) a la Python? </p>\n\n<p>Something like:</p>\n\n<pre><code>struct myClass {\n    ...\n    ...\n}\n</code></pre>\n\n<p>And then have a method on that struct like:</p>\n\n<pre><code>myClass.someMethod();\n</code></pre>\n"}, {"tags": ["c", "linux", "build", "system", "target"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1526481254, "post_id": 50373646, "comment_id": 87763460, "body": "does <code>uname</code> give you what you need?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1526481325, "post_id": 50373646, "comment_id": 87763516, "body": "@ChristianGibbons Looks like it could. Thanks!"}], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 439, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1532772223, "creation_date": 1526481096, "last_edit_date": 1532772223, "question_id": 50373646, "link": "https://stackoverflow.com/questions/50373646/what-is-my-systems-target-triplet", "title": "What is my system&#39;s target triplet?", "body": "<p>On my netbook, <code>gcc -dumpmachine</code> is giving me <code>i686-linux-gnu</code>, but <code>clang -dumpmachine</code> is giving me <code>i386-pc-linux-gnu</code>. On my laptop, I get\n<code>x86_64-linux-gnu</code> with gcc and <code>x86_64-pc-linux-gnu</code> on clang.</p>\n\n<p>I'm working with a more or less generic build script (works with multiple compilers) and I'd like to use the <a href=\"https://wiki.osdev.org/Target_Triplet\" rel=\"nofollow noreferrer\">target triplet</a> to determine installation directories, but they shouldn't change from compiler to compiler.</p>\n\n<p>How can I \"ID\" the C \"platform\" I'm on in compiler-independent way?</p>\n"}, {"tags": ["c", "unix", "config"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1526480883, "post_id": 50373533, "comment_id": 87763188, "body": "Post what you&#39;ve tried."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1526480887, "post_id": 50373533, "comment_id": 87763190, "body": "open the file, read the contents, set variables as needed."}, {"owner": {"reputation": 1281, "user_id": 1356096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTexs.png?s=128&g=1", "display_name": "YesThatIsMyName", "link": "https://stackoverflow.com/users/1356096/yesthatismyname"}, "edited": false, "score": 1, "creation_date": 1526481064, "post_id": 50373533, "comment_id": 87763326, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/411921/file-based-configuration-handling-in-c-unix\">File based Configuration handling in C ( Unix )</a>"}, {"owner": {"reputation": 37, "user_id": 9624916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b1b999a2a0ceac21cc4b69742ecc73?s=128&d=identicon&r=PG&f=1", "display_name": "Fabzheimer", "link": "https://stackoverflow.com/users/9624916/fabzheimer"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1526481456, "post_id": 50373533, "comment_id": 87763614, "body": "@ChristianGibbons just like a regular text file?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1526482101, "post_id": 50373533, "comment_id": 87764106, "body": "Configuration for which project? Show some <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1526482875, "post_id": 50373533, "comment_id": 87764690, "body": "A file is a file is a file \u2014 mostly.  Yes, a configuration file is just a regular text file designated as a configuration file and formatted in some particular manner.  It looks like yours will ignore lines starting with <code>#</code> as a comment line, ignore blank lines (for sanity&#39;s sake), and expects an alphanumeric keyword and a value.  That much is easy.  Lots of details left to worry about \u2014 are spaces significant in the value part; can you quote strings or spaces, what names are important, are there sections in the file."}], "answers": [{"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 0, "last_activity_date": 1526484131, "last_edit_date": 1526484131, "creation_date": 1526482497, "answer_id": 50374128, "question_id": 50373533, "link": "https://stackoverflow.com/questions/50373533/file-config-creation-and-usage-in-c-unix/50374128#50374128", "title": "File Config, creation and usage in C unix", "body": "<p>The several answers to <a href=\"https://stackoverflow.com/q/411921/841108\">this</a> question explain how to parse that config file, but you could use standard <a href=\"https://en.wikipedia.org/wiki/Parsing\" rel=\"nofollow noreferrer\">parsing</a> techniques (perhaps your own <a href=\"https://en.wikipedia.org/wiki/Recursive_descent_parser\" rel=\"nofollow noreferrer\">recursive descent parser</a>) or Glib's <a href=\"https://developer.gnome.org/glib/stable/glib-Lexical-Scanner.html\" rel=\"nofollow noreferrer\">lexical scanning</a>  or <a href=\"https://developer.gnome.org/glib/stable/glib-Key-value-file-parser.html\" rel=\"nofollow noreferrer\">key-value pair parser</a> (or use something else). You certainly should define and <em>document</em> (perhaps using <a href=\"https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form\" rel=\"nofollow noreferrer\">EBNF</a>) what is the <a href=\"https://en.wikipedia.org/wiki/File_format\" rel=\"nofollow noreferrer\">format</a> of that textual configuration file (and what the various entries there represent: for example, if that configuration file refers to other files, how do you handle spaces in such file paths, etc....). A common (but not universal) convention is to consider as comments so skip any line starting with <code>#</code>.</p>\n\n<p>Another question is how to get that config file while running in an arbitrary <a href=\"https://en.wikipedia.org/wiki/Working_directory\" rel=\"nofollow noreferrer\">working directory</a>. You just need to build the absolute path of your file (for <a href=\"http://man7.org/linux/man-pages/man3/fopen.3.html\" rel=\"nofollow noreferrer\">fopen(3)</a> or <a href=\"http://man7.org/linux/man-pages/man2/open.2.html\" rel=\"nofollow noreferrer\">open(2)</a>), e.g. with </p>\n\n<pre><code>char configpath[100];\nsnprintf(configpath, sizeof(configpath), \"%s/.test.config\", getenv(\"HOME\"));\n</code></pre>\n\n<p>You could test before that <code>getenv(\"HOME\")</code> is not <code>NULL</code>, but in practice that is <em>very</em> unlikely; see <a href=\"http://man7.org/linux/man-pages/man7/environ.7.html\" rel=\"nofollow noreferrer\">environ(7)</a> and <a href=\"http://man7.org/linux/man-pages/man3/getenv.3.html\" rel=\"nofollow noreferrer\">getenv(3)</a>; and the case when it gives a very long file path is also unlikely; you might test that <a href=\"http://man7.org/linux/man-pages/man3/snprintf.3.html\" rel=\"nofollow noreferrer\">snprintf(3)</a> returns a count less than <code>sizeof(configpath)</code> or use <a href=\"http://man7.org/linux/man-pages/man3/asprintf.3.html\" rel=\"nofollow noreferrer\">asprintf(3)</a>.</p>\n\n<p>You might use other functions, e.g. <a href=\"http://man7.org/linux/man-pages/man3/glob.3.html\" rel=\"nofollow noreferrer\">glob(3)</a> or <a href=\"http://man7.org/linux/man-pages/man3/wordexp.3.html\" rel=\"nofollow noreferrer\">wordexp(3)</a> to get that file path (but you probably should stick to <code>snprintf</code> or <code>asprintf</code> with <code>getenv(\"HOME\")</code>...).</p>\n\n<p>You might consider instead embedding some scriptable interpreter like <a href=\"http://lua.org/\" rel=\"nofollow noreferrer\">lua</a> or <a href=\"https://www.gnu.org/software/guile/\" rel=\"nofollow noreferrer\">guile</a> in your program (but that is a strong architectural design decision). Then the configuration file becomes some (Turing-complete!) script.</p>\n\n<p>BTW, there is no need to use <code>sudo</code> to edit that configuration file (under your home directory), and you might decide to also read some system-wide configuration under <code>/etc/</code></p>\n"}], "owner": {"reputation": 37, "user_id": 9624916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b1b999a2a0ceac21cc4b69742ecc73?s=128&d=identicon&r=PG&f=1", "display_name": "Fabzheimer", "link": "https://stackoverflow.com/users/9624916/fabzheimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526484131, "creation_date": 1526480725, "last_edit_date": 1526481976, "question_id": 50373533, "link": "https://stackoverflow.com/questions/50373533/file-config-creation-and-usage-in-c-unix", "title": "File Config, creation and usage in C unix", "body": "<p>I'm trying to understand how I can create a \".config\" file containing a bunch of parameters to later use to set up the variables in my C project on Unix.</p>\n\n<p>I created my \".config\" file using <code>sudo nano test.config</code> and wrote some stuff inside such as: </p>\n\n<pre><code>#N is this\nN 10\n#p is that\np 0.002\n#T is this\nT 10\n</code></pre>\n\n<p>Now that I did that how can I read its content and use it to initialize my variables?</p>\n"}, {"tags": ["c", "fault"], "comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 9, "creation_date": 1526480702, "post_id": 50373483, "comment_id": 87763062, "body": "you might want to check if <code>fopen</code> succeded before using the pointer it might be <code>NULL</code>."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1526484818, "post_id": 50373483, "comment_id": 87766023, "body": "Simply use a debugger and check <i>when</i> that segfault occurs, then check the variable values up to that point and you&#39;ll see why it happens. And yes, it&#39;s probably because you just ignore checking whether your calls succeeded. But how can anyone know if you didn&#39;t explain where the exe is running, where those files are, etc.?"}, {"owner": {"reputation": 175, "user_id": 43248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55aC0.jpg?s=128&g=1", "display_name": "John G. Waggenspack", "link": "https://stackoverflow.com/users/43248/john-g-waggenspack"}, "edited": false, "score": 0, "creation_date": 1526486650, "post_id": 50373483, "comment_id": 87767164, "body": "You should check the return of fscanf. Under normal circumstances, it should be 1.  If it is EOF you should break out of the loop and save the value of i to use as the upper bound in the second loop."}, {"owner": {"reputation": 587, "user_id": 5720357, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c04b8cc3b90821871f95267c0f515b95?s=128&d=identicon&r=PG&f=1", "display_name": "MatlabNewb", "link": "https://stackoverflow.com/users/5720357/matlabnewb"}, "edited": false, "score": 0, "creation_date": 1526554020, "post_id": 50373483, "comment_id": 87794460, "body": "Thanks for your comments guys - really appreciate that! However I could not figure out the mistake. A colleague can run the code and when writing a cpp counterpart with the same expression everything runs perfect. b.data is a file with numbers. This is actually is going to be a parallel search algorithm which will be extended with mpi."}], "answers": [{"comments": [{"owner": {"reputation": 587, "user_id": 5720357, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c04b8cc3b90821871f95267c0f515b95?s=128&d=identicon&r=PG&f=1", "display_name": "MatlabNewb", "link": "https://stackoverflow.com/users/5720357/matlabnewb"}, "edited": false, "score": 0, "creation_date": 1526554007, "post_id": 50374775, "comment_id": 87794453, "body": "b.data is written correctly in my folder and I forgot to add the semicolon here but got it in my code. Not sure what is failing here if it worked for you."}], "tags": [], "owner": {"reputation": 91, "user_id": 3954581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c7f555c443a63d2b7e998a2c0a2a77?s=128&d=identicon&r=PG&f=1", "display_name": "yourPublicDisplayName", "link": "https://stackoverflow.com/users/3954581/yourpublicdisplayname"}, "is_accepted": false, "score": 0, "last_activity_date": 1526484320, "creation_date": 1526484320, "answer_id": 50374775, "question_id": 50373483, "link": "https://stackoverflow.com/questions/50373483/segmentation-fault-mac-c-code/50374775#50374775", "title": "Segmentation Fault Mac - C Code", "body": "<p>I am pretty sure that the above comment is correct. This is happening because it is failing to open one of your files. I got this to work on my system without issue. I would check to make sure that you typed b.data correctly when creating the file and I would also check the file permissions to make sure that you are able to read b.data and write to found.data and to the directory that you are working in.</p>\n\n<p>Also there should be a semicolon after b[N] on line 5 but you must have that in your actual file or else it would not even compile.</p>\n"}], "owner": {"reputation": 587, "user_id": 5720357, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c04b8cc3b90821871f95267c0f515b95?s=128&d=identicon&r=PG&f=1", "display_name": "MatlabNewb", "link": "https://stackoverflow.com/users/5720357/matlabnewb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 537, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526554029, "creation_date": 1526480561, "last_edit_date": 1526554029, "question_id": 50373483, "link": "https://stackoverflow.com/questions/50373483/segmentation-fault-mac-c-code", "title": "Segmentation Fault Mac - C Code", "body": "<p>When compiling the code with gcc and running the executable the terminal says <code>Segmentation fault: 11</code>. Did anybody experience such a behavior before? </p>\n\n<pre><code>#include \"stdio.h\"\nconst int N=300;\nint main(){\n  FILE * infile, * outfile;\n  int i, target, b[N];\n  infile=fopen(\"b.data\",\"r\");\n  outfile=fopen(\"found.data\",\"w\");\n  fscanf(infile, \"%d\", &amp; target);\n  for (i=0; i&lt;N;i++){\n    fscanf(infile, \"%d\", &amp; b[i]);\n  }\n  for(i=0;i&lt;N;i++){\n    if (b[i]==target){\n      fprintf(outfile, \"%d\\n\", i+1);}\n  }\n  return 0;}\n</code></pre>\n"}, {"tags": ["c", "pgm"], "comments": [{"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 0, "creation_date": 1526480263, "post_id": 50373347, "comment_id": 87762748, "body": "hard to say without your code"}, {"owner": {"reputation": 411, "user_id": 2355561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c3b43b98852d663878542ad3ff4bff?s=128&d=identicon&r=PG", "display_name": "Austin Stephens", "link": "https://stackoverflow.com/users/2355561/austin-stephens"}, "edited": false, "score": 0, "creation_date": 1526482395, "post_id": 50373347, "comment_id": 87764337, "body": "Need to see code. I&#39;m a bit confused why you have 230 230 in the header but the posted images are different sized png&#39;s. I&#39;m guessing they&#39;ve been resized? I&#39;m also not sure what you mean by &quot;25 until 1200.&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 1, "creation_date": 1526482660, "post_id": 50373347, "comment_id": 87764521, "body": "If we ever see any code, I bet the bug will look like <code>newval = oldval &#47; 1200 * 255</code>"}, {"owner": {"reputation": 65, "user_id": 4552410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90ce9ed6304aa5308adc2a38e496dd4a?s=128&d=identicon&r=PG&f=1", "display_name": "matlab user ", "link": "https://stackoverflow.com/users/4552410/matlab-user"}, "edited": false, "score": 0, "creation_date": 1526557792, "post_id": 50373347, "comment_id": 87796899, "body": "I have posted the code. I meant with values (25,1200), that the pixel values have different scale than (0,255)."}, {"owner": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "edited": false, "score": 0, "creation_date": 1526557982, "post_id": 50373347, "comment_id": 87797037, "body": "what wumpus is implying is that if you&#39;re getting an all-zero array, it is likely you performed <i>integer</i> division rather than float division at some point during your scaling, resulting in decimals disappearing. E.g.   600 / 1200 * 255 = 0 because 600 / 1200 = 0    (as opposed to 600 / 1200.0 = 0.5 )"}, {"owner": {"reputation": 65, "user_id": 4552410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90ce9ed6304aa5308adc2a38e496dd4a?s=128&d=identicon&r=PG&f=1", "display_name": "matlab user ", "link": "https://stackoverflow.com/users/4552410/matlab-user"}, "edited": false, "score": 0, "creation_date": 1526563497, "post_id": 50373347, "comment_id": 87800933, "body": "So I should store the matrix as float and not double?"}], "owner": {"reputation": 65, "user_id": 4552410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90ce9ed6304aa5308adc2a38e496dd4a?s=128&d=identicon&r=PG&f=1", "display_name": "matlab user ", "link": "https://stackoverflow.com/users/4552410/matlab-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 297, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526557577, "creation_date": 1526480127, "last_edit_date": 1526557577, "question_id": 50373347, "link": "https://stackoverflow.com/questions/50373347/save-a-pgm-image-in-c", "title": "Save a PGM image in C", "body": "<p>I have an array 230x230 contains values: zero (black pixel), and values from 25 till 1200. I want to save this array as PGM image.</p>\n\n<p>I made the image header: P5, 230x230, 255 (as maximum value), and I wrote the array values without changing. This gave me the image but not in very right look (a lot of white areas - 2nd image)</p>\n\n<p>So, I thought I should do some scaling to the values. Again, I rescaled all values to 0-255, but this gave me totally black image.</p>\n\n<p>Any advice how I can properly solve this issue? I have attached the image required to have (1), and the image I already got (2).</p>\n\n<p>Find below the code I have used:</p>\n\n<pre><code>void write_pgm(double **u, long nx, long ny, char *file_name) {\n    int i, j; \n    unsigned char byte;\n    FILE *outimage = fopen(file_name, \"wb\");\n\n    fprintf(outimage, \"P5\\n\"); /* format */\n    fprintf(outimage, \"%ld %ld\\n\", nx, ny); /* image size */\n    fprintf(outimage, \"255\\n\"); /* maximal value */\n\n    for (j = 0; j &lt; ny; j++) {\n        for (i = 0; i &lt; nx; i++) {\n            byte = (unsigned char) (u[i][j]);\n            fwrite(&amp;byte, sizeof(unsigned char), 1, outimage);\n        }\n    }\n    fclose(outimage);\n    return;\n}\n</code></pre>\n\n<p>Thank you.</p>\n\n<p><img src=\"https://i.stack.imgur.com/dBS2o.png\" alt=\"\">\n<img src=\"https://i.stack.imgur.com/IZIRE.png\" alt=\"\"></p>\n"}, {"tags": ["c", "arrays", "string", "sorting", "for-loop"], "comments": [{"owner": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "edited": false, "score": 0, "creation_date": 1526480220, "post_id": 50373329, "comment_id": 87762706, "body": "Take a look at <a href=\"https://stackoverflow.com/questions/3893937/c-array-sorting-tips\">this question</a>"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1526480278, "post_id": 50373329, "comment_id": 87762760, "body": "Along with the intended output, you should include the output you are getting instead."}, {"owner": {"reputation": 609, "user_id": 7690030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11846ade17a8760f2501ab72fcc1f37?s=128&d=identicon&r=PG", "display_name": "Martin Chekurov", "link": "https://stackoverflow.com/users/7690030/martin-chekurov"}, "edited": false, "score": 1, "creation_date": 1526480385, "post_id": 50373329, "comment_id": 87762850, "body": "<code>char words[100];</code> should be <code>char *words[100];</code>"}, {"owner": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "reply_to_user": {"reputation": 609, "user_id": 7690030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11846ade17a8760f2501ab72fcc1f37?s=128&d=identicon&r=PG", "display_name": "Martin Chekurov", "link": "https://stackoverflow.com/users/7690030/martin-chekurov"}, "edited": false, "score": 0, "creation_date": 1526480458, "post_id": 50373329, "comment_id": 87762897, "body": "@MartinChekurov I think there&#39;s more wrong than just that."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1526480482, "post_id": 50373329, "comment_id": 87762915, "body": "<code>char words[100];</code> is just a string you need an array of strings for what you have in mind. so maybe <code>char words[10][100];</code>. Because the way you do it you will overwrite Brad partly with Matthew giving you BMatthew"}, {"owner": {"reputation": 609, "user_id": 7690030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11846ade17a8760f2501ab72fcc1f37?s=128&d=identicon&r=PG", "display_name": "Martin Chekurov", "link": "https://stackoverflow.com/users/7690030/martin-chekurov"}, "reply_to_user": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "edited": false, "score": 0, "creation_date": 1526480551, "post_id": 50373329, "comment_id": 87762968, "body": "@Neijwiert of course, this is a comment not an answer"}, {"owner": {"reputation": 609, "user_id": 7690030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11846ade17a8760f2501ab72fcc1f37?s=128&d=identicon&r=PG", "display_name": "Martin Chekurov", "link": "https://stackoverflow.com/users/7690030/martin-chekurov"}, "edited": false, "score": 0, "creation_date": 1526481084, "post_id": 50373329, "comment_id": 87763346, "body": "From what i understood you have to store the names in a two-dimensional array in the first function.In the second one you use an array of pointers and each pointer will point to a name in the 2D array."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1526482261, "post_id": 50373329, "comment_id": 87764245, "body": "Review <code>scanf_s(&quot;%s&quot;, &amp;words[a]);</code>.  It is missing an argument.  A good compiler with its warnings fully enabled would complain and save  you time."}, {"owner": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "reply_to_user": {"reputation": 609, "user_id": 7690030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11846ade17a8760f2501ab72fcc1f37?s=128&d=identicon&r=PG", "display_name": "Martin Chekurov", "link": "https://stackoverflow.com/users/7690030/martin-chekurov"}, "edited": false, "score": 0, "creation_date": 1526487435, "post_id": 50373329, "comment_id": 87767571, "body": "@MartinChekurov. Could you elaborate on your comments? I have tried multiple changes and have not gotten the appropriate output. Would you be able to show some of your coding for this by any chance?"}, {"owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "reply_to_user": {"reputation": 609, "user_id": 7690030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11846ade17a8760f2501ab72fcc1f37?s=128&d=identicon&r=PG", "display_name": "Martin Chekurov", "link": "https://stackoverflow.com/users/7690030/martin-chekurov"}, "edited": false, "score": 0, "creation_date": 1526491371, "post_id": 50373329, "comment_id": 87769645, "body": "@MartinChekurov How does that help, <code>char *words[100];</code> is just an array of 100 <code>char *</code> he still can&#39;t store the words... You&#39;d have to do what @KamiKaze suggested."}, {"owner": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "reply_to_user": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "edited": false, "score": 0, "creation_date": 1526495092, "post_id": 50373329, "comment_id": 87771567, "body": "@Samuelnj The program is now telling me that my type char is incompatible with type const char in my if(strlen) {} statement and that it also cannot convert char to const char. I am not trying to do this so I am not sure why I would be getting this error. Also in my printf statements at the end it is saying &quot;%30s can only print type char but I am trying to print type int.&quot; I am not trying to print type int I am trying to print my word[a] string. Why would I be getting this error. Again thanks for all of your help. I am really new to coding and not very good at troubleshooting"}, {"owner": {"reputation": 609, "user_id": 7690030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11846ade17a8760f2501ab72fcc1f37?s=128&d=identicon&r=PG", "display_name": "Martin Chekurov", "link": "https://stackoverflow.com/users/7690030/martin-chekurov"}, "reply_to_user": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "edited": false, "score": 0, "creation_date": 1526537252, "post_id": 50373329, "comment_id": 87784402, "body": "@samuelnj <code>char *words[100]</code> can be used to store 100 words."}, {"owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "reply_to_user": {"reputation": 609, "user_id": 7690030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11846ade17a8760f2501ab72fcc1f37?s=128&d=identicon&r=PG", "display_name": "Martin Chekurov", "link": "https://stackoverflow.com/users/7690030/martin-chekurov"}, "edited": false, "score": 0, "creation_date": 1526567124, "post_id": 50373329, "comment_id": 87803549, "body": "@MartinChekurov yes, but he&#39;d still have to keep declaring character arrays of some size and then assign them to the pointers in the array, which is a headache. It&#39;s much better to have <code>char words[100][10]</code> where it&#39;s very clear you&#39;re trying to store 100 words of size 10, and it&#39;s continuous in memory."}, {"owner": {"reputation": 609, "user_id": 7690030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11846ade17a8760f2501ab72fcc1f37?s=128&d=identicon&r=PG", "display_name": "Martin Chekurov", "link": "https://stackoverflow.com/users/7690030/martin-chekurov"}, "reply_to_user": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "edited": false, "score": 0, "creation_date": 1526567759, "post_id": 50373329, "comment_id": 87804060, "body": "@samuelnj what if some words have more than 10 letters?<code>words[0] = malloc(5); words[1] = malloc(20);</code> makes it possible"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526498359, "post_id": 50378108, "comment_id": 87773089, "body": "I copied your coding over to my coding program (visual studio) and it isn&#39;t working for me. I get the error that &quot;input&quot; must have a constant value instead of &quot; num_words.&quot; Also it says that scanf and strcpy are unsafe to use... Why would I be getting these errors? Thanks for your comment... It really cleared the question up for me"}, {"owner": {"reputation": 377, "user_id": 9198437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8f86fc9e316684b04e99c14655bc735d?s=128&d=identicon&r=PG&f=1", "display_name": "MiguelD", "link": "https://stackoverflow.com/users/9198437/migueld"}, "reply_to_user": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526498671, "post_id": 50378108, "comment_id": 87773250, "body": "the first problem you describe i think it has to do with your C compilier version, i did the code in C99 in witch it is possible to create an array when one of the size parameters if given by user input, the other problem i never faced it before so i can&#180;t help, my IDE doesn`t sound any alarm, but check if you imported the string library"}, {"owner": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526499566, "post_id": 50378108, "comment_id": 87773698, "body": "Thanks Miguel! I just changed the value to an arbitrary number that would probably never be hit and used a piece of code on Microsoft&#39;s website that avoids that type of error and now the program works great! I appreciate it!"}, {"owner": {"reputation": 377, "user_id": 9198437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8f86fc9e316684b04e99c14655bc735d?s=128&d=identicon&r=PG&f=1", "display_name": "MiguelD", "link": "https://stackoverflow.com/users/9198437/migueld"}, "reply_to_user": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526499734, "post_id": 50378108, "comment_id": 87773772, "body": "No problem, if my answer was what you wanted, please mark it as the correct one."}], "tags": [], "owner": {"reputation": 377, "user_id": 9198437, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8f86fc9e316684b04e99c14655bc735d?s=128&d=identicon&r=PG&f=1", "display_name": "MiguelD", "link": "https://stackoverflow.com/users/9198437/migueld"}, "is_accepted": true, "score": 0, "last_activity_date": 1526496734, "creation_date": 1526496734, "answer_id": 50378108, "question_id": 50373329, "link": "https://stackoverflow.com/questions/50373329/sorting-words-from-least-characters-to-most-characters-in-c/50378108#50378108", "title": "Sorting words from least characters to most characters in C", "body": "<p>You can use qsort to sort the strings by their size</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define MAXLEN 25\n\nint compare (const void * a, const void * b) {\n    size_t fa = strlen((const char *)a);\n    size_t fb = strlen((const char *)b);\n    return (fa &gt; fb) - (fa &lt; fb);\n}\n\nint main() {\n\n    int num_words;\n    scanf(\"%d\", &amp;num_words);\n\n    char word[MAXLEN];\n\n\n    char input[num_words][MAXLEN];\n    for(int i = 0; i &lt; num_words; i++ ) {\n        scanf(\"%s\", word);\n        strcpy(input[i], word);\n    }\n\n    qsort(input, num_words, MAXLEN, compare);\n    for(int i = 0; i &lt; num_words; i++)\n        printf(\"%s\\n\", input[i]);\n    return 0;\n}\n</code></pre>\n\n<p>The result sorted by string size:</p>\n\n<pre><code>Input:              Output:\n\nBrad                Brad\nMatthew             Megan\nBrandon             Brandon\nMegan               Melissa\nMelissa             Matthew\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 50378108, "answer_count": 1, "score": 0, "last_activity_date": 1526496734, "creation_date": 1526480088, "last_edit_date": 1526486178, "question_id": 50373329, "link": "https://stackoverflow.com/questions/50373329/sorting-words-from-least-characters-to-most-characters-in-c", "title": "Sorting words from least characters to most characters in C", "body": "<p>I have been tasked with solving the following question using an array of pointers:</p>\n\n<p>Write two prototypes for a function that orders a list of strings according to\nstring length\u2014shortest to longest. In the first, the function should expect an\ninput/output argument that is a two-dimensional array of characters in which\nstrings have at most STRSIZ characters. In the second, the function should\nexpect an input/output argument that is an array of pointers.</p>\n\n<p>I currently have wrote this coding for it and cannot seem to tell why it isn't working properly for me: </p>\n\n<pre><code>int number;\nint a;\nint b;\nchar placeholder;\nchar words[100];\nchar wordscopy[100];\n\nprintf(\"Enter the amount of words or names you wish to sort (0 - 100) :\\n\");\nscanf_s(\"%d\", &amp;number);\n\nprintf(\"Enter names or words on separate lines\\n\");\nfor (a = 0; a &lt; number; ++a)\nscanf_s(\"%s\", &amp;words[a]);\n\nfor (a = 0; a &lt; number; ++a)\n    words[a] = wordscopy[a];\n\nfor (a = 0; a &lt; number; ++a)\n{\n    for (b = a + 1; b &lt; number; ++b)\n    {\n        if (strlen(wordscopy[a]) &lt; strlen(wordscopy[b]))\n        {\n            placeholder = wordscopy[a];\n            wordscopy[a] = wordscopy[b];\n            wordscopy[b] = placeholder;\n        }\n    }\n}\nprintf(\"\\n\\n%-30s%5c%-30s\\n\\n\", \"Original Order\", ' ',\"Least Letters to Most Letters\");\nfor (a = 0; a &lt; number; ++a)\nprintf(\"%-30s%5c%-30s\\n\", words[a], ' ', wordscopy[a]);\nprintf(\"\\n\\n\");\n\n\nreturn 0;\n</code></pre>\n\n<p>I am fairly new to coding and I can't seem to find out why the program is not working for me.</p>\n\n<p>The output should be:</p>\n\n<pre><code>Original Order               Least Letters to Most Letters\nBrad                         Brad\nMatthew                      Megan\nBrandon                      Brandon\nMegan                        Matthew\nMelissa                      Melissa\n</code></pre>\n"}, {"tags": ["c", "eof"], "comments": [{"owner": {"reputation": 7357, "user_id": 416627, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ff79d2dc195bdd3d342235f21ccbead9?s=128&d=identicon&r=PG", "display_name": "Dave Rager", "link": "https://stackoverflow.com/users/416627/dave-rager"}, "edited": false, "score": 0, "creation_date": 1526480250, "post_id": 50373213, "comment_id": 87762733, "body": "Outside just the <code>while(ch != &#39;\\n&#39;)</code> block or all the following code that reverses the line too? You need to post the code that doesn&#39;t work."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1526480872, "post_id": 50373213, "comment_id": 87763181, "body": "You actually need <i>three</i> conditions for your first loop: <code>i &lt; MAX_CH</code> and <code>ch != &#39;\\n&#39;</code> and <code>ch != EOF</code>"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1526485928, "post_id": 50373449, "comment_id": 87766716, "body": "Note: <code>while ((ch=getchar())!=EOF &amp;&amp; ch!=&#39;\\n&#39;) {         string[i++] = ch;     }</code> is like using <code>gets()</code>.  Both lack buffer overflow protection."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1526480969, "last_edit_date": 1526480969, "creation_date": 1526480447, "answer_id": 50373449, "question_id": 50373213, "link": "https://stackoverflow.com/questions/50373213/reversing-characters-until-eof/50373449#50373449", "title": "Reversing characters until EOF", "body": "<p>You can use a loop like:</p>\n\n<pre><code>do {\n   i=0;\n   while ((ch=getchar())!=EOF &amp;&amp; ch!='\\n') {\n        string[i++] = ch;\n    }\n    string[i] = '\\0';                    // terminate it\n    for (int j=0, i--; j&lt;i; j++, i--) {  // reverse line\n        char tmp= string[j];\n        string[j]= string[i];\n        string[i]= tmp;\n    }\n} while (ch != EOF);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1526493115, "last_edit_date": 1526493115, "creation_date": 1526491057, "answer_id": 50376663, "question_id": 50373213, "link": "https://stackoverflow.com/questions/50373213/reversing-characters-until-eof/50376663#50376663", "title": "Reversing characters until EOF", "body": "<p>Here is a bit more universal version. Reads from the file or stdin, any line length supported (at least until realloc fails). </p>\n\n<pre><code>char *reverse(char *str)\n{\n    size_t len = strlen(str);\n\n    for (size_t pos = 0; pos &lt; len / 2; pos++)\n    {\n        char tmp = str[pos];\n\n        str[pos] = str[len - 1 - pos];\n        str[len - 1 - pos] = tmp;\n    }\n    return str;\n}\n\n#define MEMINC  80\n\nint PrintReversedLines(char *filename)\n{\n    FILE *fi = !strcmp(filename, \"stdin\") ? stdin : fopen(filename, \"rt\");\n    char *tmpbuff = NULL, *buff = NULL;\n    size_t pos = 0;\n    int ch = 0;\n\n    if (!fi) return -1;\n    while ((ch = fgetc(fi)) != EOF)\n    {\n        if (!(pos % MEMINC))\n        {\n            if (!(tmpbuff = realloc(buff, pos + 80)))\n            {\n                if (buff) free(buff);\n                return -1;\n            }\n            else\n            {\n                buff = tmpbuff;\n            }\n        }\n        if (ch == '\\r') continue;\n        if (ch == '\\n')\n        {\n            buff[pos++] = 0;\n            printf(\"%s\\n\", reverse(buff));\n            free(buff);\n            buff = NULL;\n            pos = 0;\n        }\n        else\n        {\n            buff[pos++] = ch;\n        }\n    }\n    return 0;\n}\n\nint main()\n{\n    PrintReversedLines(\"stdin\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 1, "last_activity_date": 1526494054, "last_edit_date": 1526494054, "creation_date": 1526492757, "answer_id": 50377116, "question_id": 50373213, "link": "https://stackoverflow.com/questions/50373213/reversing-characters-until-eof/50377116#50377116", "title": "Reversing characters until EOF", "body": "<p>You want to repeat the code for as long as you can read lines of input.</p>\n\n<p>Here a a few issues to address</p>\n\n<ul>\n<li>the arrays do not need to have <code>int</code> type, <code>char</code> type is a more appropriate choice.</li>\n<li>output a newline after the reversed line.</li>\n<li>you do not need a separate array to store the reversed line, you can just print the characters in the reverse order from the <code>string</code> array.</li>\n<li>you can use <code>putchar</code> instead of <code>printf</code> for simplicity</li>\n</ul>\n\n<p>Here is a modified version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAX_CH 256\n\nint main(void) {\n    int ch, i, length;\n    char string[MAX_CH];\n\n    for (;;) {\n        for (i = 0; i &lt; MAX_CH; i++) {\n            if ((ch = getchar()) == EOF || (ch == '\\n'))\n                break;\n            string[i] = ch;\n        }\n        length = i;\n        if (length == 0) {\n            /* no character read =&gt; EOF */\n            break;\n        }\n        for (i = 0; i &lt; length; i++) {\n            putchar(string[length - i - 1]);\n        }\n        putchar('\\n');\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 9744491, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--oSGa5m9HZw/AAAAAAAAAAI/AAAAAAAAABE/KKORcNQPUk0/photo.jpg?sz=128", "display_name": "Thomas D", "link": "https://stackoverflow.com/users/9744491/thomas-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 0, "accepted_answer_id": 50377116, "answer_count": 3, "score": 3, "last_activity_date": 1526494054, "creation_date": 1526479840, "last_edit_date": 1526481986, "question_id": 50373213, "link": "https://stackoverflow.com/questions/50373213/reversing-characters-until-eof", "title": "Reversing characters until EOF", "body": "<p>I'm creating a program to reverse lines (each character) using <code>getchar</code>.\nThis is what I've got so far (my code is a bit messy since I'm a beginner).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAX_CH 256\n\nint main(void)\n{\n    int ch = 0;        \n    int i = 0;\n    int string[MAX_CH] = {0};\n    while (ch != '\\n')   \n    {\n        ch = getchar();\n        string[i] = ch;\n        ++i;\n    }\n    i = i - 2; // put i back to the position of the last character\n    int limit = i;\n\n    int n;\n    int reverse[MAX_CH] = {0};\n    for (n = 0; n &lt;= limit; ++n)\n    {\n        reverse[n] = string[i];\n        --i;\n    }\n    for (n = 0; n &lt;= limit; ++n)\n    {\n        printf(\"%c\", reverse[n]);\n    }    \n    return 0;\n}\n</code></pre>\n\n<p>This code however only works for 1 line. I want to upgrade it to be able to read and print the reverse text immediately after and work for multiple lines until it reaches EOF. How can I do that? I tried putting 1 bigger loop <code>while (ch != EOF)</code> outside <code>while (ch != '\\n')</code> but that didn't work.</p>\n\n<p>Thanks for helping in advance.</p>\n"}, {"tags": ["c", "time", "milliseconds"], "comments": [{"owner": {"reputation": 2485, "user_id": 3812888, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/blosZ.jpg?s=128&g=1", "display_name": "The Head Rush", "link": "https://stackoverflow.com/users/3812888/the-head-rush"}, "edited": false, "score": 0, "creation_date": 1526479218, "post_id": 50372863, "comment_id": 87761865, "body": "What is the specific issue you have displaying the millis?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1526479412, "post_id": 50372863, "comment_id": 87762010, "body": "You can\u2019t call your function <code>time()</code> and then call the standard function <code>time()</code> unless you\u2019re using C++ and an overload.  You need to call a function that gives you fractions of a second; which platform are you on?  And <code>strftime()</code> does not format sub-second values so you\u2019ll have to handle that part."}, {"owner": {"reputation": 1, "user_id": 9800563, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s5yMonmoJ2Q/AAAAAAAAAAI/AAAAAAAAKDw/NP5pzrnrs3o/photo.jpg?sz=128", "display_name": "frescoF", "link": "https://stackoverflow.com/users/9800563/frescof"}, "edited": false, "score": 0, "creation_date": 1526479560, "post_id": 50372863, "comment_id": 87762134, "body": "I&#39;m doing C programming"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1526480572, "post_id": 50372863, "comment_id": 87762981, "body": "@frescoF; OK, then the code is invalid - fix it, otherwise all you will get is noise about the broken code rather then the answer you seek."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1526481167, "post_id": 50372863, "comment_id": 87763407, "body": "Note that the duplicate question (<a href=\"https://stackoverflow.com/questions/10654258/get-millisecond-part-of-time\">Get millisecond part of time</a>) is primarily for C++.  The answers are not comprehensive for C \u2014 it doesn&#39;t mention POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/clock_gettime.html\" rel=\"nofollow noreferrer\"><code>clock_gettime()</code></a> which is the preferred subsecond time of day interface for POSIX systems, for example, and doesn&#39;t cover interfaces such as <a href=\"http://pubs.opengroup.org/onlinepubs/7990989775/xsh/ftime.html\" rel=\"nofollow noreferrer\"><code>ftime()</code></a> which was in SUS 1997 but is now obsolete (but often still available)."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1526629068, "post_id": 50372863, "comment_id": 87827501, "body": "@JonathanLeffler :  It is tagged C++, but the code and the answer are (also) valid C code.  Point taken re `clock_gettime().  It may be useful to re-open this an post an answer."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1526648111, "post_id": 50372863, "comment_id": 87838989, "body": "@Clifford: Just because an answer happens to be valid in another programming language, does not make it the <i>correct</i> one. Here, POSIX.1 <code>clock_gettime()</code> is the correct answer. The standard C library provides wall-clock time at one-second precision only; the second most relevant standard being POSIX.1. I am aggravated, because I cannot re-open or vote this question for re-opening/unlinking, and cannot post an answer explaining the situation and the solutions, because of <i>your actions</i>."}], "owner": {"reputation": 1, "user_id": 9800563, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s5yMonmoJ2Q/AAAAAAAAAAI/AAAAAAAAKDw/NP5pzrnrs3o/photo.jpg?sz=128", "display_name": "frescoF", "link": "https://stackoverflow.com/users/9800563/frescof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1526480721, "answer_count": 0, "score": 0, "last_activity_date": 1526480297, "creation_date": 1526478960, "last_edit_date": 1526480297, "question_id": 50372863, "link": "https://stackoverflow.com/questions/50372863/how-to-change-this-code-to-display-date-time-with-millisecond", "closed_reason": "Duplicate", "title": "How to change this code to display date, time with millisecond?", "body": "<p>Hye there, this code will output date and time. But I have trouble when I wanted it to display the time with milliseconds. </p>\n\n<pre><code>char *time()\n{\n\n    const struct tm *tm;\n    size_t len;\n    time_t now;\n    char *s;\n\n    now = time ( NULL );\n    tm = localtime ( &amp;now );\n\n    s = ( char * ) malloc ( TIME_SIZE * sizeof ( char ) );\n\n    len = strftime ( s, TIME_SIZE, \"%Y %m %d %H:%M:%S.\", tm );\n\n    return s;\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 1, "creation_date": 1526481788, "post_id": 50372685, "comment_id": 87763871, "body": "you should not change your question according to the answer, this makes it impossible to understand the answer in the context of the question."}, {"owner": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1526482217, "post_id": 50372685, "comment_id": 87764205, "body": "Ok. I have edited the answer."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1526482306, "post_id": 50372685, "comment_id": 87764277, "body": "you should edit your question back to its original state...."}, {"owner": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1526482888, "post_id": 50372685, "comment_id": 87764705, "body": "Are you supposed to ask a new question each time 1 out of some errors are fixed?"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 3, "creation_date": 1526483133, "post_id": 50372685, "comment_id": 87764861, "body": "Not really, you can highlight that there are more problems then just the one discovered in the comments, but changing the content of the question makes the answers given look strange. Basically your question is completly answered by Dave. See my coming answer."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "edited": false, "score": 0, "creation_date": 1526479032, "post_id": 50372858, "comment_id": 87761689, "body": "So after that I wouldn&#39;t need any parameters in main?"}, {"owner": {"reputation": 395, "user_id": 7331561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jVb5u.jpg?s=128&g=1", "display_name": "DaveG", "link": "https://stackoverflow.com/users/7331561/daveg"}, "reply_to_user": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "edited": false, "score": 1, "creation_date": 1526479168, "post_id": 50372858, "comment_id": 87761820, "body": "The arguments to main() are always argc (the number of command line arguments) and argv (an array of pointers to the command line arguments).  See (<a href=\"https://www.gnu.org/software/libc/manual/html_node/Program-Arguments.html\" rel=\"nofollow noreferrer\">gnu.org/software/libc/manual/html_node/Program-Arguments.ht&zwnj;&#8203;ml</a>).  So if you don&#39;t care about command line arguments, you wouldn&#39;t need to specify any arguments to main()."}, {"owner": {"reputation": 395, "user_id": 7331561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jVb5u.jpg?s=128&g=1", "display_name": "DaveG", "link": "https://stackoverflow.com/users/7331561/daveg"}, "reply_to_user": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "edited": false, "score": 0, "creation_date": 1526480552, "post_id": 50372858, "comment_id": 87762969, "body": "@wil At this point if you have a debugger you should just step thru the code and look at the values of your variables.  Or if no debugger, put in some printf() statements to print the value, e.g. have GetCoins() print the cents, the coin, and the return quantity."}], "tags": [], "owner": {"reputation": 395, "user_id": 7331561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jVb5u.jpg?s=128&g=1", "display_name": "DaveG", "link": "https://stackoverflow.com/users/7331561/daveg"}, "is_accepted": true, "score": 3, "last_activity_date": 1526478935, "creation_date": 1526478935, "answer_id": 50372858, "question_id": 50372685, "link": "https://stackoverflow.com/questions/50372685/modular-coin-change-program-logic-australian-currency/50372858#50372858", "title": "Modular coin change program logic [Australian currency]", "body": "<p>GetChange() returns the user's input, but you aren't saving the result of the call.  You want</p>\n\n<pre><code>input = GetChange();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "edited": false, "score": 0, "creation_date": 1526484205, "post_id": 50374481, "comment_id": 87765613, "body": "As stated in the original question, I tried to make the code as modular as possible. I didn&#39;t want to go into detail about why it was modular so I can understand your use and answer regarding the functions being superfluous. After Daves answer I got my code working, however I received weird outputs in negatives which was worked out to be because of the re-use of input. So by adding some if(cents &gt;= coin) statements I was able to rinse some of those negative numbers and the program works much better. All factors of 5 from 10 up print out fine, but 90 and past there are some issues, why is that?"}, {"owner": {"reputation": 395, "user_id": 7331561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jVb5u.jpg?s=128&g=1", "display_name": "DaveG", "link": "https://stackoverflow.com/users/7331561/daveg"}, "reply_to_user": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "edited": false, "score": 3, "creation_date": 1526493707, "post_id": 50374481, "comment_id": 87770854, "body": "@Wil two things I&#39;d suggest.  First, forget about the computer and C and functions, and just go thru the steps of making changing, writing what you are doing on a piece of paper, and not omitting or assuming anything.  Then, &quot;hand-execute&quot; your code, again with a piece of paper, writing down the values of variables.  Or run it thru a debugger if you have access to one, and just go line by line, looking at values.  I think you&#39;ll find that your code doesn&#39;t quite reflect the algorithm that you yourself would use."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3956566"}, "reply_to_user": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "edited": false, "score": 0, "creation_date": 1526663935, "post_id": 50374481, "comment_id": 87848303, "body": "@Wil it&#39;s better that you ask a new question, than to ask people to answer more questions in the comments."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 1, "creation_date": 1526968267, "post_id": 50374481, "comment_id": 87934362, "body": "@YvetteColomb In regard to the edit: It may have been obvious to you, but people who do not understand it do not neccessarily know that they don&#39;t. Still the edit is okay, as it was a personal message."}], "tags": [], "owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "is_accepted": false, "score": 4, "last_activity_date": 1526968479, "last_edit_date": 1526968479, "creation_date": 1526483549, "answer_id": 50374481, "question_id": 50372685, "link": "https://stackoverflow.com/questions/50372685/modular-coin-change-program-logic-australian-currency/50374481#50374481", "title": "Modular coin change program logic [Australian currency]", "body": "<p>A function has an input (the parameters), an output (return value and maybe parameters passed by pointer) and an algorithm that generates the output from the input.</p>\n\n<p>Sometimes function do not really have an input or output like your superflous <code>PrintDisplay</code>. This is generally okay if you make your code more readable/ better organized that way. Your function is superflous because you make a function (which has four lines) for a simple one line statement. Not inherently bad but superflous.</p>\n\n<p>The return value \"appears\" at the position where the function call was made. So if you do</p>\n\n<pre><code>input = GetChange();\n</code></pre>\n\n<p><code>input</code> will be set to the return value of <code>GetChange</code>.</p>\n\n<p>You fixed this after Daves answer, but didn't see that all your <code>Get...</code> functions also have a return value you just ignore in your code.</p>\n\n<p>So by fixing all of them your code should work (or not see edit).</p>\n\n<p>All your functions (except <code>PrintResult</code> and the textinput) are basically oneliners. And </p>\n\n<p>They reduce to </p>\n\n<pre><code>int GetCoins(int cents, int coin)\n{\n    return cents / coin;\n}\n\nint GetNewChange(int cents, int coin)\n{\n    return cents - coin;\n}\n</code></pre>\n\n<p>So an improved program (in your design) would look like this then:</p>\n\n<pre><code>int main()\n{\n    int leftover_change;\n\n    printf(\"Enter an amount to calculate change: \");\n\n    leftover_change= GetChange();\n\n    int FiftyCentAmount = GetCoins(leftover_change, 50);\n    leftover_change = GetNewChange(leftover_change, 50);\n\n    int TwentyCentAmount = GetCoins(leftover_change, 20);\n    leftover_change = GetNewChange(leftover_change, 20);\n\n    int TenCentAmount = GetCoins(leftover_change, 10);\n    leftover_change = GetNewChange(leftover_change, 10);\n\n    int FiveCentAmount = GetCoins(leftover_change, 5);\n    leftover_change = GetNewChange(leftover_change, 5);\n\n    PrintResult(FiftyCentAmount, TwentyCentAmount, TenCentAmount, FiveCentAmount);\n\n    if(leftover_change &gt;0)\n    {\n        printf(\"there are %d cents left\\n\", leftover_change);\n    }\n\n    system(\"pause\");\n\n    return 0;\n}\n</code></pre>\n\n<p>This still vioaltes the DRY concept (Dont repeat yourself) you could fix this (at least partially) by replacing the magic numbers with defines or const variables. </p>\n\n<p>Even better would be a loop that iterates through the different coins. But this needs a bit more thinking and the use of arrays.</p>\n\n<p>edit: I did not check the algorithm in the first place, and my <code>scanf</code>reduction was bullshit but I was in a hurry so here a version that works. To make this answer complete, but as Dave said you should check your algorithm before you implement it.</p>\n\n<pre><code>int GetNewChange(int cents, int coin)\n{\n    return cents % coin; //this is the modulus operator\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 9628395, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136886956451334/picture?type=large", "display_name": "Wil ", "link": "https://stackoverflow.com/users/9628395/wil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 50372858, "answer_count": 2, "score": -1, "last_activity_date": 1526968479, "creation_date": 1526478476, "last_edit_date": 1526545525, "question_id": 50372685, "link": "https://stackoverflow.com/questions/50372685/modular-coin-change-program-logic-australian-currency", "title": "Modular coin change program logic [Australian currency]", "body": "<p>My aim with this program is to tell how many coins of each denomination should be given to a customer with the assumption of inputs being from 5-95.</p>\n\n<p>I have written my program in the best modular form I can, and it seems to be working. However, the program shows 0 for each denomination. </p>\n\n<p>What is the problem?</p>\n\n<pre><code>void PrintDisplay(void)\n{   \n    printf(\"Enter an amount to calculate change: \");\n    return;\n}\n\nint GetChange(void)\n{\n    int change;\n    scanf(\"%d%*c\", &amp;change);\n    return(change);\n}\n\nint GetCoins(int cents, int coin)\n{\n    int quantity;\n    quantity = cents / coin;\n    return(quantity);\n}\n\nint GetNewChange(int cents, int coin)\n{\n    int newchange;\n    newchange = cents - coin;\n    return(newchange);\n}\n\nvoid PrintResult(int fifties, int twenties, int tens, int fives)\n{\n    printf(\"The amount of each coin denomination you should give are: \\n\");\n    printf(\"Fifty cent coins: %d \\n\", fifties);\n    printf(\"Twenty cent coins: %d \\n\", twenties);\n    printf(\"Ten cent coins: %d \\n\", tens);\n    printf(\"Five cent coins: %d \\n\", fives);\n    return;\n}\n\nint main(int input)\n{\n\n    int FiftyCentAmount;\n    int TwentyCentAmount;\n    int TenCentAmount;\n    int FiveCentAmount;\n    PrintDisplay();\n    GetChange();\n    FiftyCentAmount = GetCoins(input, 50);\n    GetNewChange(input, 50);\n    TwentyCentAmount = GetCoins(input, 20);\n    GetNewChange(input, 20);\n    TenCentAmount = GetCoins(input, 10);\n    GetNewChange(input, 10);\n    FiveCentAmount = GetCoins(input, 5);\n    GetNewChange(input, 5);\n    PrintResult(FiftyCentAmount, TwentyCentAmount, TenCentAmount, FiveCentAmount);\n    system(\"pause\");\n   return(0);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "initialization", "default", "misra"], "comments": [{"owner": {"reputation": 1177, "user_id": 4802431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/913d82f4ab2d30e0c3cb0937f5d10185?s=128&d=identicon&r=PG&f=1", "display_name": "William_Wilson", "link": "https://stackoverflow.com/users/4802431/william-wilson"}, "edited": false, "score": 0, "creation_date": 1526478277, "post_id": 50372541, "comment_id": 87761057, "body": "Are you sure? Your first if is pointless... the second if/else will always change the value of result."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1526478291, "post_id": 50372541, "comment_id": 87761073, "body": "That first analyse don&#39;t seem very relevant. Even the most basic optimizing compiler can remove an unnecessary initialization."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1526478358, "post_id": 50372541, "comment_id": 87761124, "body": "First of all, please note that C and C++ are two <i>very</i> different languages, and while parts might seem similar there might be minute details that makes a big difference in behavior and semantics. Second of all, what&#39;s the use of using <code>int32_t</code> for a variable that you&#39;re going to cast to <code>int16_t</code> anyway? Lastly, are you sure about your <code>if</code> followed by <code>if ... else</code>? Should you not have <code>if ... else if ... else</code>?"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1526478723, "post_id": 50372541, "comment_id": 87761426, "body": "are those the only static analysis issues you get?  What about the unnecessary comparison of an integer with a double or the magic numbers?"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1526479515, "post_id": 50372541, "comment_id": 87762101, "body": "You need to ask a different question than <i>&quot;What do you think about it?&quot;</i>, such as <i>&quot;How can I write the code so that it conforms with both local and MISRA standards?&quot;</i>.  Canvassing opinion is OT on SO."}, {"owner": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "edited": false, "score": 0, "creation_date": 1526485814, "post_id": 50372541, "comment_id": 87766652, "body": "@Wiliam_Wilson: You are right, there was an else lost. But with this the situation remains the same."}, {"owner": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526486217, "post_id": 50372541, "comment_id": 87766904, "body": "@Some programmer dude: I was using int32_t in order to avoid that the difference of the float value (e.g. 100000) and the int16_t (e.g. -30000) gives a value which is out of range of int16_t. In this case however it was garenteed that the values are not out of range of int32_t."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526487191, "post_id": 50372541, "comment_id": 87767452, "body": "Since you must still <i>clamp</i> the result, why not use an existing function for that, like <a href=\"http://en.cppreference.com/w/cpp/algorithm/clamp\" rel=\"nofollow noreferrer\"><code>std::clamp</code></a>? As in <code>return static_cast&lt;int16_t&gt;(std::clamp(signal1 - signal2, -32768, 32767));</code>"}, {"owner": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "edited": false, "score": 0, "creation_date": 1526487808, "post_id": 50372541, "comment_id": 87767780, "body": "Clamp is a good idea - I did not know this function which seems to be new in C++17. My code was originally programmed some years ago for a smaller microcontroller and is integrated in the other code which is C++ by the use of extern &quot;C&quot;. Therefore no static_cast and not std::clamp can be used. I am already thinking if it is worth to switch to C++ completely."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526563345, "post_id": 50372541, "comment_id": 87800818, "body": "MISRA-C:2012 is not applicable to C++ so you should remove that tag. Using C++ is a MISRA-C violation in itself, you&#39;d need to use MISRA-C++ instead."}], "answers": [{"comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1526478546, "post_id": 50372630, "comment_id": 87761268, "body": "The question kind of invites opinion; but that is no reason to give one - opinion is OT on SO."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1526478643, "post_id": 50372630, "comment_id": 87761358, "body": "@Clifford: I take this as &quot;polite opinion&quot;, i.e. this style must be insisted upon."}, {"owner": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "edited": false, "score": 0, "creation_date": 1526487295, "post_id": 50372630, "comment_id": 87767493, "body": "@Bathsheba: Our internal coding style forbids to return prematurely. This is also true for Misra C++ (2008-6-6-5)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1526487883, "post_id": 50372630, "comment_id": 87767825, "body": "@Bathsheba: And that&#39;s why it&#39;s just your <i>opinion</i>: I would (almost) insist on the opposite opinion. Now do you see why we don&#39;t answer subjective questions on SO? You are putting something forth as fact that is, in fact, not fact."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1526563155, "post_id": 50372630, "comment_id": 87800673, "body": "It is no longer an opinion if you have enough authoritative sources to back it up. MISRA-C forbids <i>dead code</i>, which is defined as code that can be removed without affecting the outcome of the program, with the exception of expression that are explicitly cast to <code>(void)</code> by the programmer. Dead code is regarded as a safety hazard. Authoritative sources: MISRA-C:2012, IEC61507, ISO26262, DO-178C."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1526478313, "creation_date": 1526478313, "answer_id": 50372630, "question_id": 50372541, "link": "https://stackoverflow.com/questions/50372541/c-c-default-value-value-assigned-to-variable-is-never-used/50372630#50372630", "title": "C/C++ default value/value assigned to variable is never used", "body": "<p>I agree with MISRA.</p>\n\n<p>The unnecessary initialisation of a variable can allow for sloppy code as it defeats tools that check for uninitialised variables.</p>\n\n<p>In your particular case you could localise <code>result</code> to the final <code>else</code> case and return prematurely in the other cases. But that's not to everyone's taste either.</p>\n"}, {"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 1, "last_activity_date": 1526478345, "creation_date": 1526478345, "answer_id": 50372643, "question_id": 50372541, "link": "https://stackoverflow.com/questions/50372541/c-c-default-value-value-assigned-to-variable-is-never-used/50372643#50372643", "title": "C/C++ default value/value assigned to variable is never used", "body": "<p>Static analysers apply the rules you define - some of these rules will conflict because you are expected to set them to match your local coding standard.  I imagine there is also a rule that may or may not be enabled that <em>requires</em> initialisation of all variables; and you cannot do both.</p>\n\n<p>Pick a non-conflicting rule set that matches your preferred standard. Which you choose is a matter of opinion so not really a valid SO question.</p>\n"}, {"tags": [], "owner": {"reputation": 1040, "user_id": 1614319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff0ff3e7d5ad91f5432ad168d4f4c9f5?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1614319/andrew"}, "is_accepted": false, "score": 1, "last_activity_date": 1530165371, "creation_date": 1530165371, "answer_id": 51075591, "question_id": 50372541, "link": "https://stackoverflow.com/questions/50372541/c-c-default-value-value-assigned-to-variable-is-never-used/51075591#51075591", "title": "C/C++ default value/value assigned to variable is never used", "body": "<p>Most good static analysers will provide you with data flow analysis - which warn you of possible paths leaving uninitialised variables.</p>\n\n<p>Taking your example, say you (accidentally) missed one of the later assignments, this would not be detected by SA:</p>\n\n<pre><code>/// gets signal1 - signal2 (checks range of value)\nint16_t getSignalDifferenceFromFloat(float signal1, int16_t signal2)\n{\n    int32_t result = 0; // &lt;-- this assignment makes the violation \n        // ... but I feel better with it\n\n    if (signal1 &gt; 65535.0)\n    {\n        // commented out this line\n        // No data-flow anomoly detected\n        // result = 32767;\n    }\n\n    // Snip rest of code\n\n    return (int16_t) result;\n}\n</code></pre>\n\n<p>The MISRA Guidelines are not perfect, by any stretch, but we try and prevent the obvious... and uninitialised variables are quite easy to detect - as long as you don't try and fudge the issue.</p>\n\n<p>It's a bit like sticking a cast in, just to shut up the Static Analysis tool......</p>\n\n<p>[See profile for disclaimers]</p>\n"}], "owner": {"reputation": 350, "user_id": 5667718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb7a984655c6836629b1609398e18f64?s=128&d=identicon&r=PG&f=1", "display_name": "Ernie Mur", "link": "https://stackoverflow.com/users/5667718/ernie-mur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1530169344, "creation_date": 1526478075, "last_edit_date": 1530169344, "question_id": 50372541, "link": "https://stackoverflow.com/questions/50372541/c-c-default-value-value-assigned-to-variable-is-never-used", "title": "C/C++ default value/value assigned to variable is never used", "body": "<p>I like to always initialse local variables, e.g</p>\n\n<pre><code>int32_t result = 0;\n</code></pre>\n\n<p>I thought this is good programming style because \"result\" can never become uninitialised, independent of whether following if-constructs set it or not.</p>\n\n<p>But now I am trying out a static code checker tool (C_STAT for IAR embedded workbench) and this complains that in the function below, MISRA-C++ rule 2008-01-06 (\"shall not contain instances of non-volatile variables being given values that are never subsequently used\") and MISRA C:2012 rule 2.2c (\"no dead code\") and CWE 563 (\"unused variable\") are violated.</p>\n\n<pre><code>// gets signal1 - signal2 (checks range of value)\nint16_t getSignalDifferenceFromFloat(float signal1, int16_t signal2)\n{\n    int32_t result = 0; // &lt;-- this assignment makes the violation \n                        // ... but I feel better with it\n\n    if (signal1 &gt; 65535.0)\n    {\n        // because result cannot be smaller than the max value of TSignal\n        result = 32767;\n    }\n    else if (signal1 &lt; -65535.0)  // &lt;-- here an else  was missing\n    {\n        // because result cannot be larger than the min value of TSignal\n        result = -32768;\n    }\n    else\n    {\n        result = (int32_t)signal1 - (int32_t)signal2;\n\n        if (result &lt; -32768)\n        {\n            result = -32768;\n        }\n        else if (result &gt; 32767)\n        {\n            result = 32767;\n        }\n    }\n\n    return (int16_t) result;\n}\n</code></pre>\n\n<p>original Question: What do you think about it? </p>\n\n<p>New Questions:</p>\n\n<ol>\n<li>Are there good coding standards which require always immediate initialisation of declared local variables?</li>\n<li>Is the code checker too pedantic (some compilers do not complain at this place but would complain it the variable would be completely stay unused)? I make it for years but I cannot remember where I had seen it. </li>\n</ol>\n"}, {"tags": ["c", "misra"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526477713, "post_id": 50372279, "comment_id": 87760646, "body": "What&#39;s the purpose of <code>(x &lt;&lt; 32) &gt;&gt; 32</code>? To make the top 32 bits zero? Why not simply use masking like <code>x &amp; 0x00ffffffffLL</code>? Not that it&#39;s needed anyway, since <code>ntohl</code> is defined to take a 32-bit (unsigned) integer so the top 32 bits will be cut away anyway. So all you need is <code>ntohl((x))</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526479392, "post_id": 50372279, "comment_id": 87761996, "body": "You say 10.5 yet the comment says 10.8? Which one is it?"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1526479445, "post_id": 50372279, "comment_id": 87762034, "body": "shifting signed integers is implementation defined. This is might cause a violation."}], "answers": [{"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1526777677, "post_id": 50373619, "comment_id": 87876006, "body": "A rule against casting the result of a composite expression seems a bit odd unless applied to situations where the result is larger than both the specified and actual operand types.  The fact that the C Standard doesn&#39;t forbid compilers from processing sensible code in bozoid fashion should be handled by saying that compilers must uphold certain requirements beyond the C Standard to be deemed suitable for automotive use."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1526886655, "post_id": 50373619, "comment_id": 87901157, "body": "@supercat Yep, I&#39;ve always been against this rule, since the only rationale for it was always &quot;newbies might be confused&quot;. Which is of course better solved by educating the newbies, rather than by enforcing artificial rules for how everyone should write code."}, {"owner": {"reputation": 1040, "user_id": 1614319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff0ff3e7d5ad91f5432ad168d4f4c9f5?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1614319/andrew"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1527055793, "post_id": 50373619, "comment_id": 87974990, "body": "@supercat - the C Standard permits a lot of things that are undesirable!"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1527087193, "post_id": 50373619, "comment_id": 87995870, "body": "@Lundin: IMHO, the rule should be to require that any cast applied to the result of the add, subtract, multiply, or left-shift operator must be to a type whose range is no larger than the operands.  Something like meaning of <code>u32a = u16a*u16b;</code> may work on a 32-bit system, but not behave as intended if code is ported to a 16-bit system.  An allowed way of writing the code if wrapping was desired should be <code>u32a = (uint32_t)(uint16_t)(u16a * u16b);</code> since the intended semantics should be clear, and any <i>quality</i> compiler should yield that meaning (gcc may need some optimizations disabled)."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1526480997, "last_edit_date": 1592644375, "creation_date": 1526480997, "answer_id": 50373619, "question_id": 50372279, "link": "https://stackoverflow.com/questions/50372279/misra-c-2012-rule-10-8-query/50373619#50373619", "title": "MISRA-C 2012 Rule 10.8 Query", "body": "<p>This whole code is definitely not MISRA-C compliant.</p>\n<ul>\n<li><p>First of all there's some less important nit-picks. The Directive 4.9 is saying that function-like macros should be avoided entirely. And rule 7.2 is saying that you must use <code>u</code> suffix on all integer constants.</p>\n</li>\n<li><p>What's most serious here is the violation of 10.1 which says &quot;Shift and bitwise operations should only be performed on operands of <em>essentially unsigned type</em>&quot;.</p>\n<p>You left shift a signed operand - if that operand is negative your code invokes undefined behavior and you have a severe bug. You then also right shift a signed operand, which invokes implementation-defined behavior if the operand is negative. These are not just some false positives but actual bugs you must fix. The easiest fix is to cast <code>x</code> to <code>uint64_t</code> before any shifting.</p>\n</li>\n<li><p>I see no violation of 10.5, which would be casting to an inappropriate type. It is fine to cast from signed to unsigned.</p>\n</li>\n<li><p>There is however a violation of 10.8 as your comment indicates - the rule doesn't allow the result of a &quot;composite expression&quot; to be cast to a different type category, in your case from <code>sint64_t</code> to <code>uint64_t</code> or <code>uint32_t</code>. This too could be solved by casting to <code>uint64_t</code> <em>before</em> doing anything else.</p>\n<p>The (rather weird) rationale for 10.8 is that some beginners supposedly think that a cast such as <code>(uint32_t)(u16a + u16b);</code> means that the + operation gets carried out on <code>uint32_t</code>, which is incorrect.</p>\n</li>\n</ul>\n<p>Now the real question is what all this shifting is actually trying to achieve to begin with; it isn't clear to me. The macro is quite messy. If the intention was to clear out some bits of a variable, that should be done with bit masking (bitwise <code>&amp;</code>). And if reasons unknown signed variables must be used and sign must be preserved, the bit mask can simply skip the sign bit.</p>\n<p>The best way to fix this code is to rewrite that macro entirely. As it stands, it will never pass MISRA-C, which is a good thing.</p>\n"}], "owner": {"reputation": 91, "user_id": 4757598, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iMIeBIi067k/AAAAAAAAAAI/AAAAAAAAACg/6xcIEU3GezU/photo.jpg?sz=128", "display_name": "Prashant Singh", "link": "https://stackoverflow.com/users/4757598/prashant-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1023, "favorite_count": 0, "accepted_answer_id": 50373619, "answer_count": 1, "score": 0, "last_activity_date": 1526480997, "creation_date": 1526477379, "question_id": 50372279, "link": "https://stackoverflow.com/questions/50372279/misra-c-2012-rule-10-8-query", "title": "MISRA-C 2012 Rule 10.8 Query", "body": "<p>I am getting MISRA-C 2012 Rule 10.5 voilation, below is the sample code :</p>\n\n<p>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</p>\n\n<pre><code>typedef long long       sint64; \ntypedef unsigned long long  uint64;\ntypedef unsigned long   uint32;\n\n#define ntohll(x) ( ( (uint64)(ntohl( ((x &lt;&lt; 32) &gt;&gt; 32) )) &lt;&lt; 32) | ntohl( ((uint32)(x &gt;&gt; 32)) ) )\n\nvoid main()\n{\n sint64 pul_total;\n sint64 a;\n pul_total = ntohll(a); /* Rule 10.8 Violation*/    \n}\n</code></pre>\n\n<p>++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\nto resolve the issue I tried below :</p>\n\n<pre><code>#define ntohll(x) ( ( (uint64)(ntohl( ((x &lt;&lt; 32) &gt;&gt;(uint32)32) )) &lt;&lt; (uint32)32) | ntohl( ((uint32)(x &gt;&gt;(uint32) 32)) ) )\n</code></pre>\n\n<h2>but still its a voilation</h2>\n\n<p>However if I make it like below violation is removed :</p>\n\n<pre><code>  #define ntohll(x) ( ( (uint64)(ntohl( ((x &lt;&lt; 32) &gt;&gt; 32) )) &lt;&lt; 32) | ntohl( ((uint32)((uint32)x &gt;&gt; 32)) ) )\n</code></pre>\n\n<p>but as per my understanding casting signed variable to unsigned might not be a good idea in case of shift operation. </p>\n\n<p>Need some help for the same...</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1526477364, "post_id": 50372244, "comment_id": 87760389, "body": "Show some <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please"}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 1, "creation_date": 1526477987, "post_id": 50372244, "comment_id": 87760842, "body": "<code>current_location</code> should be a pointer to a location, and not a location in itself, if I understand this correctly."}, {"owner": {"reputation": 3103, "user_id": 123217, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cee9844be0e7e919ddbc306229c29c8e?s=128&d=identicon&r=PG", "display_name": "MalphasWats", "link": "https://stackoverflow.com/users/123217/malphaswats"}, "edited": false, "score": 0, "creation_date": 1526478258, "post_id": 50372244, "comment_id": 87761044, "body": "That&#39;s what I thought, but if I make it a pointer, I get a different error <code>incompatible types when initializing</code> when setting it."}, {"owner": {"reputation": 2311, "user_id": 6032010, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cCbzrdp-8HI/AAAAAAAAAAI/AAAAAAAAAAA/g1GQeurueXA/photo.jpg?sz=128", "display_name": "SHG", "link": "https://stackoverflow.com/users/6032010/shg"}, "reply_to_user": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1526478266, "post_id": 50372244, "comment_id": 87761051, "body": "@MartinV&#233;ronneau - either that or just dereference <code>current_location.portals[0]</code>."}, {"owner": {"reputation": 3103, "user_id": 123217, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cee9844be0e7e919ddbc306229c29c8e?s=128&d=identicon&r=PG", "display_name": "MalphasWats", "link": "https://stackoverflow.com/users/123217/malphaswats"}, "reply_to_user": {"reputation": 2311, "user_id": 6032010, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cCbzrdp-8HI/AAAAAAAAAAI/AAAAAAAAAAA/g1GQeurueXA/photo.jpg?sz=128", "display_name": "SHG", "link": "https://stackoverflow.com/users/6032010/shg"}, "edited": false, "score": 0, "creation_date": 1526478743, "post_id": 50372244, "comment_id": 87761445, "body": "@SHG do you mean <code>current_location = *(current_location.portals[0]);</code>? That gives me the same read-only variable error."}, {"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "reply_to_user": {"reputation": 2311, "user_id": 6032010, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cCbzrdp-8HI/AAAAAAAAAAI/AAAAAAAAAAA/g1GQeurueXA/photo.jpg?sz=128", "display_name": "SHG", "link": "https://stackoverflow.com/users/6032010/shg"}, "edited": false, "score": 1, "creation_date": 1526479227, "post_id": 50372244, "comment_id": 87761872, "body": "@SHG he got const in structure members, so assignment will not work. need to <code>memcpy</code> or use pointers completely."}], "answers": [{"comments": [{"owner": {"reputation": 2311, "user_id": 6032010, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cCbzrdp-8HI/AAAAAAAAAAI/AAAAAAAAAAA/g1GQeurueXA/photo.jpg?sz=128", "display_name": "SHG", "link": "https://stackoverflow.com/users/6032010/shg"}, "edited": false, "score": 0, "creation_date": 1526478052, "post_id": 50372431, "comment_id": 87760891, "body": "That&#39;s a runtime problem, but the OP is complaining about a compile-time problem."}, {"owner": {"reputation": 3103, "user_id": 123217, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cee9844be0e7e919ddbc306229c29c8e?s=128&d=identicon&r=PG", "display_name": "MalphasWats", "link": "https://stackoverflow.com/users/123217/malphaswats"}, "edited": false, "score": 0, "creation_date": 1526478400, "post_id": 50372431, "comment_id": 87761159, "body": "forgive my ignorance, but why doesn&#39;t <code>loc</code> get passed back along with the reference in <code>village.portals[0]</code>?"}, {"owner": {"reputation": 3103, "user_id": 123217, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cee9844be0e7e919ddbc306229c29c8e?s=128&d=identicon&r=PG", "display_name": "MalphasWats", "link": "https://stackoverflow.com/users/123217/malphaswats"}, "edited": false, "score": 0, "creation_date": 1526478440, "post_id": 50372431, "comment_id": 87761187, "body": "also, <code>current_location = *(current...</code> gives the same read-only variable error"}, {"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "reply_to_user": {"reputation": 3103, "user_id": 123217, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cee9844be0e7e919ddbc306229c29c8e?s=128&d=identicon&r=PG", "display_name": "MalphasWats", "link": "https://stackoverflow.com/users/123217/malphaswats"}, "edited": false, "score": 1, "creation_date": 1526478510, "post_id": 50372431, "comment_id": 87761240, "body": "@MalphasWats because c/c++ are not like java language that keep referenced data in memory. you get a copy of <code>village</code> by value, but you are accessing <code>loc</code> by another pointer so you will not get a copy of it."}, {"owner": {"reputation": 3103, "user_id": 123217, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cee9844be0e7e919ddbc306229c29c8e?s=128&d=identicon&r=PG", "display_name": "MalphasWats", "link": "https://stackoverflow.com/users/123217/malphaswats"}, "edited": false, "score": 0, "creation_date": 1526478663, "post_id": 50372431, "comment_id": 87761375, "body": "@Afshin I see, thank you! That would have taken me a while to track down once I get it compiling!"}, {"owner": {"reputation": 3103, "user_id": 123217, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cee9844be0e7e919ddbc306229c29c8e?s=128&d=identicon&r=PG", "display_name": "MalphasWats", "link": "https://stackoverflow.com/users/123217/malphaswats"}, "edited": false, "score": 0, "creation_date": 1526481301, "post_id": 50372431, "comment_id": 87763501, "body": "@Afshin Ah, that makes sense - removing the const compiles but gives a warning because the maps are defined as constant by necessity as they&#39;re stored in PROGMEM on the AVR I&#39;m using. I want to use your &quot;full pointer&quot; suggestion but not sure where to start."}, {"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "reply_to_user": {"reputation": 3103, "user_id": 123217, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cee9844be0e7e919ddbc306229c29c8e?s=128&d=identicon&r=PG", "display_name": "MalphasWats", "link": "https://stackoverflow.com/users/123217/malphaswats"}, "edited": false, "score": 0, "creation_date": 1526482737, "post_id": 50372431, "comment_id": 87764584, "body": "@MalphasWats in your <code>build_location()</code> method, allocate memory for localtion by <code>malloc</code> and return pointer to this structure for your <code>current_location</code>. now you need to use pointer for accessing this structure everywhere in your code. when you want to no to portal, you can just assign portal pointer to your <code>current_location</code>, because now <code>current_location</code> is pointer too. working with pointers is more complex, but much more flexible and I think much better for you."}, {"owner": {"reputation": 3103, "user_id": 123217, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cee9844be0e7e919ddbc306229c29c8e?s=128&d=identicon&r=PG", "display_name": "MalphasWats", "link": "https://stackoverflow.com/users/123217/malphaswats"}, "edited": false, "score": 0, "creation_date": 1526484027, "post_id": 50372431, "comment_id": 87765482, "body": "@Afshin hmm, ideally I need to avoid using <code>malloc()</code> on an AVR - I only have 512bytes total sram anyway! I tried declaring the locations up front but it didn&#39;t like that, complained about expecting a statement before {"}, {"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "reply_to_user": {"reputation": 3103, "user_id": 123217, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cee9844be0e7e919ddbc306229c29c8e?s=128&d=identicon&r=PG", "display_name": "MalphasWats", "link": "https://stackoverflow.com/users/123217/malphaswats"}, "edited": false, "score": 0, "creation_date": 1526485793, "post_id": 50372431, "comment_id": 87766636, "body": "@MalphasWats comments getting too long :). if you are using AVR and all your states are fixed (nothing is loaded dynamically), you can define all of your states as a global variable (for example all states defined as <code>static</code> <b>global</b> variables in single file. then return address of root element with a function and use it in other files. But you need to consider implications of using global variables. this way limits your flexibility, but in your AVR case,it may be ok. You will not need <code>malloc()</code> in this case."}], "tags": [], "owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "is_accepted": true, "score": 1, "last_activity_date": 1526479384, "last_edit_date": 1526479384, "creation_date": 1526477775, "answer_id": 50372431, "question_id": 50372244, "link": "https://stackoverflow.com/questions/50372244/working-with-c-structures/50372431#50372431", "title": "Working with C Structures", "body": "<p><em>Runtime problem:</em></p>\n\n<p>Problem is simple. Both <code>village</code> and <code>loc</code> are on stack.</p>\n\n<p>on return, you get a copy of <code>village</code>, but no copy for <code>loc</code>. so <code>loc</code> will be released after return. You can use a code like this to solve your problem:</p>\n\n<pre><code>village.portals[0] = calloc(1, sizeof(*(village.portals[0])));\nmemcpy(&amp;village.portals[0], &amp;loc, sizeof(loc)); //-&gt;or just assign village.portals[0] directly\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p><em>Compile problem</em></p>\n\n<p>Yea comments on <code>current_location</code> is correct too. You can solve it like this:</p>\n\n<pre><code>current_location = *(current_location.portals[0]);\n</code></pre>\n\n<p>or use pointers completely for accessing data.</p>\n\n<p>But just remember runtime problem that I mentioned is very important and very hard to trace later too.</p>\n\n<p><strong>Update 2:</strong></p>\n\n<p>I just noticed that you have <code>const</code> members in your structure. that's why you get those <code>read-only</code> errors if you use assignment only. You can solve this problem by removing those <code>const</code>s from <code>location</code> structure or you can do it like this:</p>\n\n<pre><code>memcpy(&amp;current_location, current_location.portals[0], sizeof(current_location));\n</code></pre>\n\n<p>but I don't suggest this approach, <strong>it is better to use pointers</strong> to prevent this problem.</p>\n"}], "owner": {"reputation": 3103, "user_id": 123217, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cee9844be0e7e919ddbc306229c29c8e?s=128&d=identicon&r=PG", "display_name": "MalphasWats", "link": "https://stackoverflow.com/users/123217/malphaswats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 50372431, "answer_count": 1, "score": 0, "last_activity_date": 1526479384, "creation_date": 1526477268, "last_edit_date": 1526477941, "question_id": 50372244, "link": "https://stackoverflow.com/questions/50372244/working-with-c-structures", "title": "Working with C Structures", "body": "<p>I'm developing some code for a small gaming device I've designed. I've got completely stuck trying to build what is ultimately a Graph of map locations.</p>\n\n<p>I have 2 structs:</p>\n\n<pre><code>typedef struct point {\n    int x;\n    int y;\n} point;\n\n\ntypedef struct location {\n    const point portal_in;\n    const point portal_out;\n\n    const byte *map;\n    const byte width;\n    const byte height;\n\n    struct location *portals[8];\n\n    point player;\n\n    struct location *return_to;\n} location;\n</code></pre>\n\n<p>Each location has a list of other locations that it links to, as well as the location it links from.</p>\n\n<p>I tried to set up the locations like this:</p>\n\n<pre><code>location build_locations()\n{\n    location village = { \n        .portal_in={15, 14}, \n        .portal_out={0, 0}, \n        .map=&amp;VILLAGE[0],\n        .width=32,\n        .height=16,\n        .player={15, 14}, \n        .return_to=0 \n    };\n    location loc = { \n        .portal_in={8, 7}, \n        .portal_out={11, 10}, \n        .map=&amp;HOUSE[0],\n        .width=8,\n        .height=8,\n        .player={0, 0}, \n        .return_to=&amp;village\n    };\n\n    village.portals[0] = &amp;loc;\n\n    return village;\n}\n</code></pre>\n\n<p>this gets called in my <code>main()</code> function:</p>\n\n<pre><code>location current_location = build_locations();\n</code></pre>\n\n<p>And this works, up to a point - I can draw the <code>village</code> map and move the player around it:</p>\n\n<pre><code>display_map(&amp;current_location);\n\ndisplay_player(&amp;current_location);\n</code></pre>\n\n<p>and so on. The trouble comes when I want to swap into a new location.</p>\n\n<p>If I try and reassign <code>current_location</code>, I get a compiler error complaining about <code>assignment to read only variable</code>:</p>\n\n<pre><code>current_location = current_location.portals[0];\n</code></pre>\n\n<p>This is easily the most complex code I've written in C, so I know I'm out of my depth when it comes to structures and pointers, but I'm trying to learn and I've come a long way already.</p>\n\n<p>Is there a better way to do what I'm trying to do? Or is there something obvious I have missed?</p>\n\n<p>Thanks</p>\n\n<p>EDIT:</p>\n\n<p>This is the most minimal example I can come up with:</p>\n\n<pre><code>typedef unsigned char byte;\n\nstatic const byte VILLAGE[] = {\n      0,   0,   0,   0,  175, 181, 181, 181, 181, 181, 181, 175,   0,   0,   0,   0,\n      /// And so on - indices of tiles defined elsewhere but irrelevant here\n};\n\nstatic const byte HOUSE[] = {\n      0,   0,   0,   0,  175, 181, 181, 181, 181, 181, 181, 175,   0,   0,   0,   0,\n      /// And so on - indices of tiles defined elsewhere but irrelevant here\n};\n\ntypedef struct point {\n    int x;\n    int y;\n} point;\n\n\ntypedef struct location {\n    const point portal_in;\n    const point portal_out;\n\n    const byte *map;\n    const byte width;\n    const byte height;\n\n    struct location *portals[8];\n\n    point player;\n\n    struct location *return_to;\n} location; \n\nlocation build_locations()\n{\n    location village = { \n        .portal_in={15, 14}, \n        .portal_out={0, 0}, \n        .map=&amp;VILLAGE[0],\n        .width=32,\n        .height=16,\n        .player={15, 14}, \n        .return_to=0 \n    };\n    location loc = { \n        .portal_in={8, 7}, \n        .portal_out={11, 10}, \n        .map=&amp;HOUSE[0],\n        .width=8,\n        .height=8,\n        .player={0, 0}, \n        .return_to=&amp;village\n    };\n\n    village.portals[0] = &amp;loc;\n\n    return village;\n}\n\nint main(void)\n{\n    location current_location = build_locations();\n\n    if (current_location.player.x == 5 &amp;&amp; current_location.player.y == 4)\n    {\n        current_location = current_location.portals[0];\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "c"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1526476809, "post_id": 50372009, "comment_id": 87759954, "body": "<i>I need all data in range -127 +128.</i>  But you seem to be using <code>unsigned char</code>?  That will be in the range of 0 to 255."}, {"owner": {"reputation": 53, "user_id": 9223352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99437729074ee335d0d24d861b8a1f32?s=128&d=identicon&r=PG", "display_name": "Jackxl", "link": "https://stackoverflow.com/users/9223352/jackxl"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1526477003, "post_id": 50372009, "comment_id": 87760109, "body": "It is possible to convert it to range 0..255, but without lost any data. No data are same as original now (except readable). I didn&#39;t analyze this code from library, but I did my own base64 decoder and result was the same."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1526477656, "post_id": 50372009, "comment_id": 87760613, "body": "Note that Java&#39;s <code>char</code>s, from which its <code>String</code>s are built, are <i>16-bit</i>, <i>unsigned</i> integers, whereas C <code>char</code>s are typically 8 bits wide and may be either signed or unsigned.  The corresponding data type in C would be <code>uint16_t</code>, which for many implementations is the same thing as <code>unsigned short</code>."}, {"owner": {"reputation": 628808, "user_id": 139985, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=128&d=identicon&r=PG", "display_name": "Stephen C", "link": "https://stackoverflow.com/users/139985/stephen-c"}, "edited": false, "score": 0, "creation_date": 1526477967, "post_id": 50372009, "comment_id": 87760820, "body": "For the record, Base64 is an encoding scheme that doesn&#39;t depend on any programming language.  Java is not relevant, unless you used some Java-specific binary format that you then encoded using Base64.  (And if you did that, then you will need to take the binary format into account as well.)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1526478364, "post_id": 50372009, "comment_id": 87761127, "body": "Additionally, &quot;encoded to Base64 in Java&quot; is hardly a complete specification for how your data were encoded.  There are more than a dozen reasonably well-known variations of Base64, with at least 8 of those defined in various Internet RFCs.  Smart decoders can adapt to multiple variations, but some variations have features that you need to know about and account for explicitly."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1526478569, "post_id": 50372009, "comment_id": 87761288, "body": "Furthermore, inasmuch as Java Strings are composed of 16-bit units, but Base-64 encodes sequences of 8-bit units, you have a character encoding issue lurking under the surface, too.  Your encoder must first convert <code>char</code>s to bytes -- this is the character encoding, and there are multiple ways to do it -- and a corresponding decoder must decode those bytes correctly to recover the original sequence of 16-bit units."}, {"owner": {"reputation": 53, "user_id": 9223352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99437729074ee335d0d24d861b8a1f32?s=128&d=identicon&r=PG", "display_name": "Jackxl", "link": "https://stackoverflow.com/users/9223352/jackxl"}, "edited": false, "score": 0, "creation_date": 1526543614, "post_id": 50372009, "comment_id": 87787818, "body": "&quot;Your encoder must first convert chars to bytes&quot; - I used this <code>String encmess = Base64.encodeToString(str, Base64.DEFAULT); </code> in Java where str is byte array."}], "owner": {"reputation": 53, "user_id": 9223352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99437729074ee335d0d24d861b8a1f32?s=128&d=identicon&r=PG", "display_name": "Jackxl", "link": "https://stackoverflow.com/users/9223352/jackxl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526476581, "creation_date": 1526476581, "question_id": 50372009, "link": "https://stackoverflow.com/questions/50372009/decode-java-base64-string-in-c", "title": "Decode Java Base64 string in C?", "body": "<p>How to decode string in C, which was encoded to Base64 in Java ?\nI have string, which was encoded to Base64 in Java.\nNow I need decode this string in C. How can I do that ?</p>\n\n<p>I used some Base64 library in C, but result was the same.\nDecoded data are not the same as their original from Java.\nWhen I use readable ASCII chars as input data, it will work, but I need all data in range -127 +128.</p>\n\n<p><strong>Short sample of my encoded data:</strong> <em>\"flBJQ1RVUkV8AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAA\"</em></p>\n\n<p><strong>This is part of code which I used for decoding of Base64:</strong></p>\n\n<pre><code>// Make sure we have enough space to add '\\0' character at end.\n      dec = (unsigned char *) b64_realloc(dec, size + 1);\n      if (dec != NULL){\n        dec[size] = '\\0';\n      } else {\n        return NULL;\n      }\n\n      // Return back the size of decoded string if demanded.\n      if (decsize != NULL) {\n        *decsize = size;\n      }\n\n      return dec;\n    }\n\n    unsigned char *b64_decode_ex3 (const char *src, size_t len, size_t *decsize) {\n      int i = 0;\n      int j = 0;\n      int l = 0;\n      size_t size = 0;\n      unsigned char *dec = NULL;\n      unsigned char buf[3];\n      unsigned char tmp[4];\n\n      // alloc\n      dec = (unsigned char *) b64_malloc(1);\n      if (NULL == dec) { return NULL; }\n\n      // parse until end of source\n      while (len--) {\n        // break if char is `=' or not base64 char\n        if ('=' == src[j]) { break; }\n        //if (!(isalnum(src[j]) || '+' == src[j] || '/' == src[j])) { break; }\n\n        // read up to 4 bytes at a time into `tmp'\n        tmp[i++] = src[j++];\n\n        // if 4 bytes read then decode into `buf'\n        if (4 == i) {\n          // translate values in `tmp' from table\n          for (i = 0; i &lt; 4; ++i) {\n            // find translation char in `b64_table'\n            for (l = 0; l &lt; 64; ++l) {\n              if (tmp[i] == b64_table[l]) {\n                tmp[i] = l;\n                break;\n              }\n            }\n          }\n\n          // decode\n          buf[0] = (tmp[0] &lt;&lt; 2) + ((tmp[1] &amp; 0x30) &gt;&gt; 4);\n          buf[1] = ((tmp[1] &amp; 0xf) &lt;&lt; 4) + ((tmp[2] &amp; 0x3c) &gt;&gt; 2);\n          buf[2] = ((tmp[2] &amp; 0x3) &lt;&lt; 6) + tmp[3];\n\n          // write decoded buffer to `dec'\n          dec = (unsigned char *) b64_realloc(dec, size + 3);\n          if (dec != NULL){\n            for (i = 0; i &lt; 3; ++i) {\n              dec[size++] = buf[i];\n            }\n          } else {\n            return NULL;\n          }\n\n          // reset\n          i = 0;\n        }\n      }\n\n      // remainder\n      if (i &gt; 0) {\n        // fill `tmp' with `\\0' at most 4 times\n        for (j = i; j &lt; 4; ++j) {\n          tmp[j] = '\\0';\n        }\n\n        // translate remainder\n        for (j = 0; j &lt; 4; ++j) {\n            // find translation char in `b64_table'\n            for (l = 0; l &lt; 64; ++l) {\n              if (tmp[j] == b64_table[l]) {\n                tmp[j] = l;\n                break;\n              }\n            }\n        }\n\n        // decode remainder\n        buf[0] = (tmp[0] &lt;&lt; 2) + ((tmp[1] &amp; 0x30) &gt;&gt; 4);\n        buf[1] = ((tmp[1] &amp; 0xf) &lt;&lt; 4) + ((tmp[2] &amp; 0x3c) &gt;&gt; 2);\n        buf[2] = ((tmp[2] &amp; 0x3) &lt;&lt; 6) + tmp[3];\n\n        // write remainer decoded buffer to `dec'\n        dec = (unsigned char *) b64_realloc(dec, size + (i - 1));\n        if (dec != NULL){\n          for (j = 0; (j &lt; i - 1); ++j) {\n            dec[size++] = buf[j];\n          }\n        } else {\n          return NULL;\n        }\n      }\n\n      // Make sure we have enough space to add '\\0' character at end.\n      dec = (unsigned char *) b64_realloc(dec, size + 1);\n      if (dec != NULL){\n        dec[size] = '\\0';\n      } else {\n        return NULL;\n      }\n\n      // Return back the size of decoded string if demanded.\n      if (decsize != NULL) {\n        *decsize = size;\n      }\n\n      return dec;\n    }\n</code></pre>\n"}, {"tags": ["c", "arrays", "recursion", "return-value"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 3, "creation_date": 1526476200, "post_id": 50371784, "comment_id": 87759512, "body": "Aren&#39;t you getting warnings that not all cotrol paths return a value?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526476267, "post_id": 50371784, "comment_id": 87759562, "body": "if you only have <code>A</code>, <code>B</code> and <code>C</code> (and don&#39;t want to repeat them), how can expect combinations above size 3?"}, {"owner": {"reputation": 1281, "user_id": 1356096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTexs.png?s=128&g=1", "display_name": "YesThatIsMyName", "link": "https://stackoverflow.com/users/1356096/yesthatismyname"}, "edited": false, "score": 1, "creation_date": 1526476407, "post_id": 50371784, "comment_id": 87759662, "body": "Please provide with which arguments <code>abc</code> is called, and what the output should look like. I can compile it, but have no idea what you really want."}, {"owner": {"reputation": 11, "user_id": 9800168, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asif evgy", "link": "https://stackoverflow.com/users/9800168/asif-evgy"}, "edited": false, "score": 0, "creation_date": 1526476905, "post_id": 50371784, "comment_id": 87760026, "body": "i do get the warning, but thak to this mark i fixed it and i deleted the if term in the end and mooved the return out of the block."}, {"owner": {"reputation": 1281, "user_id": 1356096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTexs.png?s=128&g=1", "display_name": "YesThatIsMyName", "link": "https://stackoverflow.com/users/1356096/yesthatismyname"}, "edited": false, "score": 0, "creation_date": 1526477067, "post_id": 50371784, "comment_id": 87760168, "body": "@asifevgy Please make an answer with the correct code then."}], "answers": [{"comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 4, "creation_date": 1526481060, "post_id": 50373004, "comment_id": 87763320, "body": "some kind of explanation would be great"}], "tags": [], "owner": {"reputation": 11, "user_id": 9800168, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asif evgy", "link": "https://stackoverflow.com/users/9800168/asif-evgy"}, "is_accepted": false, "score": -1, "last_activity_date": 1526489084, "last_edit_date": 1526489084, "creation_date": 1526479333, "answer_id": 50373004, "question_id": 50371784, "link": "https://stackoverflow.com/questions/50371784/why-my-returned-value-from-recursive-function-is-giong-wrong/50373004#50373004", "title": "why my returned value from recursive function is giong wrong", "body": "<pre><code>int abc(char arr[], int lastPlace, int curPlace, int count) \n{\n    if (curPlace == lastPlace)\n    {\n        arr[curPlace] = '\\0';\n        printf(\"%s, \", arr);\n        return 1;\n    }\n    if(!curPlace || arr[curPlace-1]!='A'){\n        arr[curPlace] = 'A';\n        count += abc(arr, lastPlace, curPlace + 1, 0);\n    }\n\n    arr[curPlace] = 'B';\n    count += abc(arr, lastPlace, curPlace + 1, 0);\n\n    if(curPlace &lt; 2 || arr[curPlace - 1] != 'C' || arr[curPlace - 2] != 'C')\n    {\n        arr[curPlace] = 'C';\n        count += abc(arr, lastPlace, curPlace + 1, 0);\n    }\n    return count;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9800168, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "asif evgy", "link": "https://stackoverflow.com/users/9800168/asif-evgy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1526489084, "creation_date": 1526475942, "last_edit_date": 1526489053, "question_id": 50371784, "link": "https://stackoverflow.com/questions/50371784/why-my-returned-value-from-recursive-function-is-giong-wrong", "title": "why my returned value from recursive function is giong wrong", "body": "<p>My function gets an array of chars, size, current place, and counter.<br>\nI need it <strong>to print all the possible combination of A,B,C</strong> (no AA and no CCC) in the length of the sized entered.<br>\nWhen size is above 3 the value of the function is returning a non-reasonable value that I didn't find the reason for it.</p>\n\n<pre><code>int abc(char arr[],int lastPlace,int curPlace,int count){\n    if (curPlace == lastPlace){\n        arr[curPlace] = '\\0';\n        printf(\"%s, \", arr);\n        return 1;    \n    }\n    if(!curPlace || arr[curPlace - 1] != 'A'){\n        arr[curPlace] = 'A';\n        count += abc(arr, lastPlace, curPlace + 1, 0);\n    }\n    arr[curPlace] = 'B';\n    count += abc(arr, lastPlace, curPlace + 1, 0);\n    if(curPlace &lt; 2 || arr[curPlace - 1] != 'C' || arr[curPlace - 2] != 'C'){\n        arr[curPlace] = 'C';\n        count+=abc(arr, lastPlace, curPlace + 1, 0);\n        if (curPlace == 0)\n            return count;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "trace", "lttng"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10512464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9bc5a0d3d4bd41ad9d2a2ff3ab11f41?s=128&d=identicon&r=PG&f=1", "display_name": "WuestenFuchs", "link": "https://stackoverflow.com/users/10512464/wuestenfuchs"}, "is_accepted": false, "score": 1, "last_activity_date": 1539688561, "last_edit_date": 1539688561, "creation_date": 1539688099, "answer_id": 52834078, "question_id": 50371600, "link": "https://stackoverflow.com/questions/50371600/lttng-user-application-tracing-fatal-error/52834078#52834078", "title": "LTTng: user application tracing fatal error", "body": "<p>try to install the packages: <strong>liblttng-ust-dev</strong>, <strong>liblttng-ctl-dev</strong></p>\n\n<pre><code>sudo apt-get install liblttng-ust-dev\n\nsudo apt-get install liblttng-ctl-dev\n</code></pre>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 381, "user_id": 9629245, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UIobdmipCvQ/AAAAAAAAAAI/AAAAAAAAACQ/HnSiJyeFkHE/photo.jpg?sz=128", "display_name": "Zeeshan Hayat", "link": "https://stackoverflow.com/users/9629245/zeeshan-hayat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539688612, "creation_date": 1526475441, "last_edit_date": 1539688612, "question_id": 50371600, "link": "https://stackoverflow.com/questions/50371600/lttng-user-application-tracing-fatal-error", "title": "LTTng: user application tracing fatal error", "body": "<p>I am trying to build the example available in the LTTng documentation. I am facing this fatal error. I tried it with different versions of gcc. Also, I tried to build it with lttng 2.6 and lttng 2.8.6.</p>\n\n<p>hello-tp.h</p>\n\n<pre><code>#undef TRACEPOINT_PROVIDER \n#define TRACEPOINT_PROVIDER hello_world\n\n#undef TRACEPOINT_INCLUDE\n#define TRACEPOINT_INCLUDE \"./hello-tp.h\"\n\n#if !defined(_HELLO_TP_H) || defined(TRACEPOINT_HEADER_MULTI_READ)\n#define _HELLO_TP_H\n\n#include &lt;lttng/tracepoint.h&gt;\n\nTRACEPOINT_EVENT(\nhello_world,\nmy_first_tracepoint,\nTP_ARGS(\n    int, my_integer_arg,\n    char*, my_string_arg\n),\nTP_FIELDS(\n    ctf_string(my_string_field, my_string_arg)\n    ctf_integer(int, my_integer_field, my_integer_arg)\n)\n)\n\n#endif /* _HELLO_TP_H */\n\n#include &lt;lttng/tracepoint-event.h&gt;\n</code></pre>\n\n<p>hello-tp.c</p>\n\n<pre><code>#define TRACEPOINT_CREATE_PROBES\n#define TRACEPOINT_DEFINE\n\n#include \"hello-tp.h\"\n</code></pre>\n\n<p>by running this:</p>\n\n<pre><code>gcc -c -I /lttng/2.6/include/ hello-tp.c\n</code></pre>\n\n<p>error: </p>\n\n<pre><code> lttng/2.6/include/lttng/tracepoint-event.h:56:28: fatal error: hello-tp.h: \n No such file or directory\n #include TRACEPOINT_INCLUDE\n                        ^\n compilation terminated.\n</code></pre>\n"}, {"tags": ["c", "fork", "exit"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526474455, "post_id": 50371204, "comment_id": 87758228, "body": "Helping you by analysing your code would be easier with self-explaining and English identifiers."}, {"owner": {"reputation": 811, "user_id": 9493582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfI3b.jpg?s=128&g=1", "display_name": "Arndt Jonasson", "link": "https://stackoverflow.com/users/9493582/arndt-jonasson"}, "edited": false, "score": 0, "creation_date": 1526475526, "post_id": 50371204, "comment_id": 87759000, "body": "For me, the program always crashes with segmentation fault. <code>return 0</code> and <code>exit(0)</code> ought to have the same result."}, {"owner": {"reputation": 811, "user_id": 9493582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfI3b.jpg?s=128&g=1", "display_name": "Arndt Jonasson", "link": "https://stackoverflow.com/users/9493582/arndt-jonasson"}, "edited": false, "score": 0, "creation_date": 1526475608, "post_id": 50371204, "comment_id": 87759057, "body": "Well, that turns out to be because it expects an argument. You&#39;d better say how it is to be invoked."}, {"owner": {"reputation": 1, "user_id": 9630048, "user_type": "registered", "profile_image": "https://graph.facebook.com/1830316433692999/picture?type=large", "display_name": "Hilbert Erwin", "link": "https://stackoverflow.com/users/9630048/hilbert-erwin"}, "edited": false, "score": 0, "creation_date": 1526476099, "post_id": 50371204, "comment_id": 87759448, "body": "The argument is the maximum number of child processes that can be used at the same time"}, {"owner": {"reputation": 811, "user_id": 9493582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfI3b.jpg?s=128&g=1", "display_name": "Arndt Jonasson", "link": "https://stackoverflow.com/users/9493582/arndt-jonasson"}, "edited": false, "score": 0, "creation_date": 1526633403, "post_id": 50371204, "comment_id": 87830095, "body": "Have you tried <code>valgrind</code>?"}], "owner": {"reputation": 1, "user_id": 9630048, "user_type": "registered", "profile_image": "https://graph.facebook.com/1830316433692999/picture?type=large", "display_name": "Hilbert Erwin", "link": "https://stackoverflow.com/users/9630048/hilbert-erwin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526479756, "creation_date": 1526474317, "last_edit_date": 1526479756, "question_id": 50371204, "link": "https://stackoverflow.com/questions/50371204/how-to-close-child-processes-with-exit0", "title": "How to close child processes with exit(0)", "body": "<p>When i run the following code there are times when its working properly and there are times when it gives me a <strong>segmentation fault</strong> and it keeps spawning child processes without stopping.<br> If i replace the <code>return 0;</code> with an <code>exit(0);</code> it always works.<br> Can anybody explain why is that? Shouldn't <code>the exit(0)</code>; on the <code>if(pid == 0)</code> branch terminate the child process?</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\nint main(int argc, char** argv){\n\n    int n;\n    int backup;\n    int m = atoi(argv[1]);\n\n    FILE* f = fopen(\"input.dat\",\"r\");\n    fscanf(f, \"%d\", &amp;n );\n    backup = n;\n\n    int i;\n    int x[n];\n\n    for(int i = 0; i &lt; n; i++){\n        fscanf(f, \"%d\", &amp;x[i]);\n    }\n\n    pid_t pid;\n    int pfd[2];\n    int pfd2[2];\n    int buf[1];\n    int szam[1];\n\n    if(pipe(pfd)){\n        printf(\"Error\");\n        exit(1);\n    }\n\n    if(pipe(pfd2)){\n        printf(\"Error\");\n        exit(1);\n    }\n\n    int k;\n    int db=-1;\n    int maradek;\n\n    while( n &gt; 0){\n        if(m&gt;=n){\n            fflush(stdout);\n            k=n;\n            n=0;\n        }else{\n            while(maradek &lt; n &amp;&amp; maradek &lt; m){\n                maradek++;\n            }\n            k=maradek;\n            n=n-maradek;\n        }\n        for(i = 1; i&lt;=k; i++){\n            pid = fork();\n            if(pid &lt; 0){\n                printf(\"Error\");    \n                exit(1);\n            }else{\n                if(pid == 0){\n                    int szam=0;\n                    int tomb[1];\n                    read(pfd[0],buf,4);\n                    szam = buf[0];\n                    szam++;\n                    tomb[0]=szam;\n                    write(pfd2[1],tomb,sizeof(tomb));\n                    exit(0);    \n                }else{\n                    db++;\n                    szam[0]=x[db];\n                    write(pfd[1],szam,sizeof(szam));\n                }\n            }\n        }\n    }\n\n    int max=0;\n    int status;\n    while (backup &gt; 0) {\n        pid = wait(&amp;status);\n        read(pfd2[0],buf,4);\n        //printf(\"%d \", buf[0]);\n        if(buf[0] &gt; max){\n            max = buf[0];\n        }\n        --backup;\n\n    }\n\n    printf(\"a legnagyobb primtenyezo osszeg: %d\\n\",max);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "scope", "language-lawyer", "c11"], "comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1526478014, "post_id": 50371169, "comment_id": 87760863, "body": "What is hard to understand about &quot;<code>warning: its scope is only this definition or declaration, which is probably not what you want</code>&quot;?  Your prototype declares both a <i>parameter type</i> and the <i>type definition</i> itself - syntactically valid, but practically useless.."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 2, "creation_date": 1526478505, "post_id": 50371169, "comment_id": 87761228, "body": "@Clifford: Check the [language-lawyer] tag. The warning is not hard to understand, but is it right? If so, why? Why is the scope so small?"}, {"owner": {"reputation": 1061, "user_id": 2624663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2eb6e9838672eeb1357a2dd68b41f2a?s=128&d=identicon&r=PG", "display_name": "alexsh", "link": "https://stackoverflow.com/users/2624663/alexsh"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1526479888, "post_id": 50371169, "comment_id": 87762419, "body": "@Clifford: to nitpick somewhat, the <code>struct</code> is not <i>entirely</i> useless since one may define a function with the appropriate prototype, and even call it <i>in a different translation unit</i>,  according to 6.2.7(1) although such practice is more than questionable. The question is whether <code>gcc</code> follows the Standard, not why it throws this warning."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1526480058, "post_id": 50371169, "comment_id": 87762566, "body": "@MSalters :  I appreciate the tag, that is why I posted a comment not an answer.  My point was simply that the question states <i>&quot;the tag s has either file or block scope&quot;</i>, while clearly it has <i>declaration scope</i>.  Possibly a near duplicate of <a href=\"https://stackoverflow.com/questions/16831605/strange-compiler-warning-c-warning-struct-declared-inside-parameter-list\" title=\"strange compiler warning c warning struct declared inside parameter list\">stackoverflow.com/questions/16831605/&hellip;</a>"}, {"owner": {"reputation": 1061, "user_id": 2624663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2eb6e9838672eeb1357a2dd68b41f2a?s=128&d=identicon&r=PG", "display_name": "alexsh", "link": "https://stackoverflow.com/users/2624663/alexsh"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1526480433, "post_id": 50371169, "comment_id": 87762877, "body": "@Clifford: 1) there is no <i>declaration scope</i> defined by the standard; 2) moreover, the is no <i>function declaration</i> anywhere in the example, thus, according to the language in 6.2.1(2) there is no <i>function prototype scope</i>. <code>gcc</code>&#39;s approach is very reasonable but <i>does it conform to the Standard as written</i>?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1526480519, "post_id": 50371169, "comment_id": 87762945, "body": "@Clifford: Definitely related, but that&#39;s not a [language-lawyer] question. A proper answer here would show which part of C11 makes the tag <code>s</code> have <i>declaration scope</i> (&quot;would&quot;, because alexsh is correct. C11 has 4 types of scope, and <i>declaration scope</i> isn&#39;t one of them)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1526481088, "post_id": 50371169, "comment_id": 87763349, "body": "@alexsh: A compiler is allowed to issue warnings about constructs which conform to the standard. GCC issues many such warnings (if asked to). Nothing in the standard constrains the compiler from <i>warning</i> you about things which seem important to it (even warnings like &quot;you&#39;ve been working on this problem too long; take a break&quot; would be conformant.) (See footnote 9 on page 12: &quot;Of course, an implementation is free to produce any number of diagnostics as long as a valid program is still correctly translated.&quot;)"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1526481224, "post_id": 50371169, "comment_id": 87763441, "body": "@MSalters : Indeed the term is not defined in the language - I made it up.  It has &quot;block-scope&quot;, but the block ends at the end of the declaration (at the semi-colon).   I think - which is why I am not answering.  I simply chose to describe that special case as <i>declaration scope</i>. Will steer well clear of such questions in future and get on with some real work!"}, {"owner": {"reputation": 1061, "user_id": 2624663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2eb6e9838672eeb1357a2dd68b41f2a?s=128&d=identicon&r=PG", "display_name": "alexsh", "link": "https://stackoverflow.com/users/2624663/alexsh"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1526482919, "post_id": 50371169, "comment_id": 87764721, "body": "@rici: My issue is not with the warning (it is more than reasonable). It is with the <i>error</i> that results from <code>struct s</code> being incomplete in the declaration of <code>a</code>. If <code>s</code> has file scope (as the Standard seems to imply it should), this translation unit should be conforming and issue no diagnostics (aside from optional warnings)."}, {"owner": {"reputation": 1061, "user_id": 2624663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2eb6e9838672eeb1357a2dd68b41f2a?s=128&d=identicon&r=PG", "display_name": "alexsh", "link": "https://stackoverflow.com/users/2624663/alexsh"}, "edited": false, "score": 0, "creation_date": 1526483925, "post_id": 50371169, "comment_id": 87765412, "body": "Yes, exactly, it <i>does not</i> appear inside a function prototype as defined in 6.2.1(2) unless there is <i>another</i> definition of &#39;function prototype&#39; somewhere in the Standard."}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 2, "last_activity_date": 1526618800, "last_edit_date": 1592644375, "creation_date": 1526478149, "answer_id": 50372561, "question_id": 50371169, "link": "https://stackoverflow.com/questions/50371169/do-parameter-declarations-in-function-declarators-have-function-prototype-scope/50372561#50372561", "title": "Do parameter declarations in function declarators have function prototype scope?", "body": "<p>In the course of a long discussion in the comments, it became clear that this question is really about the precise meaning of the parenthetical comment in \u00a76.2.1/2, &quot;A <em>function prototype</em> is a declaration of a function that declares the types of its parameters.&quot;</p>\n<p>As far as I can see, there is no formal definition of the phrase &quot;function prototype&quot; and it is used in a variety of ways in the standard. For example:</p>\n<ol>\n<li><p>\u00a76.2.7/3 Compatible type and composite type:</p>\n<blockquote>\n<p>If only one type is a function type with a parameter type list (a function prototype), the composite type is a function prototype with the parameter type list.</p>\n</blockquote>\n<p>In this case, the first usage of &quot;function prototype&quot; is evidently not restricted to a function declaration, since it says &quot;function type&quot; -- which might be the type implicitly created during the resolution of a pointer-to-function declarator -- and the second usage of &quot;function prototype&quot; might not have a syntactic representation at all, since it is a type created in the course of the composite-type algorithm</p>\n</li>\n<li><p>\u00a76.5.2.2 Function calls</p>\n<p>Here, paragraph 2 applies to functions with a &quot;type that includes a prototype&quot; while paragraph 6 contrasts functions with a &quot;type that does not include a prototype&quot; with functions with a &quot;type that includes a prototype&quot;. These usages are incompatible with the &quot;definition&quot; of &quot;function prototype&quot; above, because that definition applies to the function type as a whole, whereas the usage here of &quot;prototype&quot; is clearly talking about a part of the function type.</p>\n</li>\n<li><p>\u00a76.7.6.3 Function declarators (including prototypes)</p>\n<p>This section title could be interpreted as either being about all &quot;function declarators&quot; including those which happen to be &quot;prototypes&quot;, or being about both &quot;function declarators&quot; and the &quot;prototypes&quot; which might be included.</p>\n</li>\n<li><p>\u00a76.9.1/7 Function definitions</p>\n<blockquote>\n<p>If the declarator includes a parameter type list, the list also specifies the types of all the parameters; such a declarator also serves as a function prototype for later calls to the same function in the same translation unit.</p>\n</blockquote>\n<p>Here the phrase &quot;function prototype&quot; seems to be talking about something associated with or contained in the function type, but for which the function declarator can be used as a proxy (&quot;serves as&quot;).</p>\n</li>\n</ol>\n<p>I suppose that this would not pass the standards of formal rigour of a work such as <a href=\"https://upload.wikimedia.org/wikipedia/commons/d/d7/Principia_Mathematica_54-43.png\" rel=\"nofollow noreferrer\"><em>Principia Mathematica</em></a>, but it is on par with most juridical specifications and with other standards, in which a modicum of common sense is necessary to interpret some passages.</p>\n<p>Indeed, the very quote in question:</p>\n<blockquote>\n<p>&quot;A <em>function</em> prototype is a declaration of a function that <strong>declares the types</strong> of its parameters.&quot;</p>\n</blockquote>\n<p>implies that the parameters in a parameter list are type <em>declarations</em> and not just <em>specifications</em> (if, indeed, there is a difference between the two phrases).</p>\n<p>Also, if we deconstruct \u00a76.2.1/4 (quoted in part below), we see that it says that:</p>\n<blockquote>\n<p><strong>Every</strong> other identifier [that is, other than a label or macro name] has scope determined by the placement of its declaration (in a declarator or type specifier).</p>\n</blockquote>\n<p>and then proceeds to list only three alternatives for &quot;the declarator or type specifier that declares the identifier&quot;:</p>\n<ol>\n<li><p>&quot;appears outside of any block or list of parameters&quot;</p>\n</li>\n<li><p>&quot;appears inside a block&quot; or &quot;within the list of parameter declarations in\na function definition&quot;</p>\n</li>\n<li><p>&quot;appears within the list of parameter declarations in a function prototype (not part of a function definition)&quot;</p>\n</li>\n</ol>\n<p>Those three possibilities are assumed to be exclusive (so that the provisions are not ordered) and comprehensive (since they must apply to &quot;every identifier&quot;). Common sense must then lead us to the assumption that a function prototype is a function declarator which includes a parameter-list, or (in some contexts) some subset or semantic abstraction from that syntactic construct, so the answer to your first question is &quot;Yes, that is the intention of the standard&quot;.</p>\n<p>Whether or not this is a defect in the standard is a question of opinion in which I don't choose to participate. I checked what I believe to be the  most current list](<a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2244.htm\" rel=\"nofollow noreferrer\">http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2244.htm</a>) and saw nothing relevant, so as far as I know it has not been reported as a defect.</p>\n<hr />\n<p>Some version of my original answer follows in case it's useful to people reading the comments.</p>\n<p>What the standard says about the scope of identifiers in parameter lists seems quite clear to me. \u00a76.2.1/4 defines two possible scopes for identifiers declared in a parameter list (emphasis added):</p>\n<blockquote>\n<p>If the declarator or type specifier that declares the identifier appears inside a block or within the list of parameter declarations <strong>in a function definition</strong>, the identifier has <em>block scope</em>, which terminates at the end of the associated block.</p>\n<p>If the declarator or type specifier that declares the identifier appears within the list of parameter declarations in a function prototype (<strong>not part of a function definition</strong>), the identifier has <em>function prototype scope</em>, which terminates at the end of the function declarator. (\u00a76.2.1/4)</p>\n</blockquote>\n<p>In the example in the question, the declarator of the <code>struct s</code> appears a <em>parameter-list</em> which is precisely &quot;the list of parameter declarations&quot;. So the second sentence applies and their scope is confined to the parameter list itself. That makes the <code>struct</code> effectively useless, so the compiler warns you.</p>\n<p>If the struct type specifier appeared in the parameter list of a definition, it could be used inside the function body, but no instance of that struct could be passed to the function from the translation unit in which the definition appears.</p>\n<p>I believe that the intention of the standard was that the declaration of type specifiers for tagged types appear outside of parameter lists. This is reinforced by the language of \u00a76.7.2.3 (Tags):</p>\n<blockquote>\n<ol>\n<li>A specific type shall have its content defined at most once.</li>\n</ol>\n</blockquote>\n<p>And</p>\n<blockquote>\n<ol start=\"5\">\n<li>Two declarations of structure, union, or enumerated types which are in different scopes or use different tags declare distinct types. Each declaration of a structure, union, or enumerated type which does not include a tag declares a distinct type.</li>\n</ol>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1526480206, "post_id": 50373179, "comment_id": 87762688, "body": "This doesn&#39;t make sense. A declaration declares an identifier. In this example, <code>g</code> is an identifier which is declared as a <i>pointer to function</i> type. If that would <i>also</i> declare the function type, there would have to be a second name."}, {"owner": {"reputation": 1061, "user_id": 2624663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2eb6e9838672eeb1357a2dd68b41f2a?s=128&d=identicon&r=PG", "display_name": "alexsh", "link": "https://stackoverflow.com/users/2624663/alexsh"}, "edited": false, "score": 0, "creation_date": 1526481224, "post_id": 50373179, "comment_id": 87763440, "body": "That <i>... still struct foo in that declaration is the (forward) declaration of a struct type ...</i> is the subject of 6.7.2.3(6). The corresponding portion of the Standard referring to declarators (6.7.6) includes no such language, however, about declarators (<code>struct ...</code> is a type specifier) and instead very carefully uses the term <i>specify</i> (<i>not</i> declare) when referring to various types of declarators."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1061, "user_id": 2624663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2eb6e9838672eeb1357a2dd68b41f2a?s=128&d=identicon&r=PG", "display_name": "alexsh", "link": "https://stackoverflow.com/users/2624663/alexsh"}, "edited": false, "score": 0, "creation_date": 1526481344, "post_id": 50373179, "comment_id": 87763536, "body": "@alexsh: But in the second next clause, it uses the words &lt;&lt;A <b>declaration</b> of a parameter as \u2018\u2018function returning type\u2019\u2019&gt;&gt;"}, {"owner": {"reputation": 1061, "user_id": 2624663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2eb6e9838672eeb1357a2dd68b41f2a?s=128&d=identicon&r=PG", "display_name": "alexsh", "link": "https://stackoverflow.com/users/2624663/alexsh"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1526481925, "post_id": 50373179, "comment_id": 87763968, "body": "@rici: <i>A declaration of a parameter</i> is a valid grammatical concept. C11 even introduces a concept of &#39;type name scope&#39; to specifically deal with type names so it can treat nameless parameters as declarations. However, In my example above, <i>there is no function declaration</i>, as a parameter, or otherwise."}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 1, "last_activity_date": 1526479756, "creation_date": 1526479756, "answer_id": 50373179, "question_id": 50371169, "link": "https://stackoverflow.com/questions/50371169/do-parameter-declarations-in-function-declarators-have-function-prototype-scope/50373179#50373179", "title": "Do parameter declarations in function declarators have function prototype scope?", "body": "<p>Let take it first to an analogy</p>\n\n<pre><code>struct foo* x;\n</code></pre>\n\n<p>declares a pointer to <code>struct foo</code>, but still <code>struct foo</code> in that declaration is the (forward) declaration of a <code>struct</code> type.</p>\n\n<p>Now</p>\n\n<pre><code>int (*f)(int);\n</code></pre>\n\n<p>is the declaration of a function pointer. The pointer is a pointer to base type <code>int ()(int)</code> that is of a function type with prototype.</p>\n\n<p>Then</p>\n\n<pre><code>int (*g)(struct toto { int a; });\n</code></pre>\n\n<p>again is the declaration of a function pointer. The pointer is a pointer to base type <code>int ()(struct toto { int a; })</code> that is of a function type with prototype.</p>\n\n<p>Or to summarize, a declaration of a pointer to something also declares that something to which the pointer points.</p>\n"}, {"comments": [{"owner": {"reputation": 1061, "user_id": 2624663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2eb6e9838672eeb1357a2dd68b41f2a?s=128&d=identicon&r=PG", "display_name": "alexsh", "link": "https://stackoverflow.com/users/2624663/alexsh"}, "edited": false, "score": 0, "creation_date": 1526483347, "post_id": 50373960, "comment_id": 87765017, "body": "As I write at the beginning of my question, the concept of &#39;function prototype&#39; is defined in the Standard as a &#39;...function <b>declaration</b> ...&#39; (not <b>declarator</b>). The Standard does not have any language about one declaration <i>including</i> another, however tempting such an interpretation must be. Moreover (and I am nitpicking here), there is no such thing as &#39;function prototype definition&#39; mentioned in the Standard. No prototype, no scope."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 1061, "user_id": 2624663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2eb6e9838672eeb1357a2dd68b41f2a?s=128&d=identicon&r=PG", "display_name": "alexsh", "link": "https://stackoverflow.com/users/2624663/alexsh"}, "edited": false, "score": 0, "creation_date": 1526483797, "post_id": 50373960, "comment_id": 87765322, "body": "@alexsh: 6.7.6 &#167;3 defines a <i>full declarator</i> as <i>a declarator that is not part of another declarator</i>. The intend is clear here."}, {"owner": {"reputation": 1061, "user_id": 2624663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2eb6e9838672eeb1357a2dd68b41f2a?s=128&d=identicon&r=PG", "display_name": "alexsh", "link": "https://stackoverflow.com/users/2624663/alexsh"}, "edited": false, "score": 0, "creation_date": 1526484069, "post_id": 50373960, "comment_id": 87765513, "body": "Indeed, the intent for nesting of <i>declarators</i> is clear. <i>Declarations</i> are another matter, though."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1526481983, "creation_date": 1526481983, "answer_id": 50373960, "question_id": 50371169, "link": "https://stackoverflow.com/questions/50371169/do-parameter-declarations-in-function-declarators-have-function-prototype-scope/50373960#50373960", "title": "Do parameter declarations in function declarators have function prototype scope?", "body": "<blockquote>\n  <p>So a declaration such as <code>void (*f)( struct s { int c; } );</code> is not a declaration of a function (it is a declaration of a pointer to a function)...</p>\n</blockquote>\n\n<p>I do not agree.</p>\n\n<p>Clause 6.7.6 Declarators contains:</p>\n\n<blockquote>\n  <p>Syntax</p>\n  \n  <ul>\n  <li><p>declarator:</p>\n  \n  <p>pointer<sub>opt</sub> direct-declarator</p></li>\n  <li>direct-declarator:<br/>\n      identifier<br/>\n      ( declarator )<br/>\n      direct-declarator [ type-qualifier-list<sub>opt</sub> assignment-expressionopt ]<br/>\n      direct-declarator [ static type-qualifier-list<sub>opt</sub> assignment-expression ]<br/>\n      direct-declarator [ type-qualifier-list static assignment-expression ]<br/>\n      direct-declarator [ type-qualifier-list<sub>opt</sub> * ]<br/>\n      direct-declarator ( parameter-type-list )<br/>\n      direct-declarator ( identifier-list<sub>opt</sub> )<br/></li>\n  <li>pointer:<br/>\n      * type-qualifier-listopt<br/>\n      * type-qualifier-list<sub>opt</sub> pointer<br/>...</li>\n  </ul>\n</blockquote>\n\n<p>My understanding of that clause is that <code>void (*f)( struct s { int c; } );</code> is indeed a pointer declaration, but that pointer declaration <em>includes</em> a function prototype definition in its <em>direct-declarator</em> part. So all the semantics of a function prototype definition apply.</p>\n\n<p>So the scope of <code>struct s</code> <strong>is</strong> the function prototype declaration of the direct declarator part of the pointer declaration. And \u00a74 of 6.2.1 says:</p>\n\n<blockquote>\n  <p>If the declarator or type specifier that declares the identifier appears\n  within the list of parameter declarations in a function prototype (not part of a function\n  definition), the identifier has function prototype scope, which terminates at the end of the\n  function declarator.</p>\n</blockquote>\n\n<p>We are exactly in that case (no definition), so the scope of the declaration of <code>struct s</code> ends at the end of the line.</p>\n\n<p>So gcc is perfectly right when it produces a diagnostic 'array of incomplete types' (and a warning about s having the scope confined to the parameter list) signaling that s has a function prototype scope even though formally there is no function declaration.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9742018, "user_type": "registered", "profile_image": "https://graph.facebook.com/2132792113401701/picture?type=large", "display_name": "Himadri Changmai", "link": "https://stackoverflow.com/users/9742018/himadri-changmai"}, "is_accepted": false, "score": -2, "last_activity_date": 1526499451, "creation_date": 1526499451, "answer_id": 50378727, "question_id": 50371169, "link": "https://stackoverflow.com/questions/50371169/do-parameter-declarations-in-function-declarators-have-function-prototype-scope/50378727#50378727", "title": "Do parameter declarations in function declarators have function prototype scope?", "body": "<p>Actually parameters or arguments is the 1 of the part of the Prototype of a function .\nPrototype of a function has 3 main components..these are\n1. Function type\n2. Function name\n3. Arguments or parameters</p>\n"}], "owner": {"reputation": 1061, "user_id": 2624663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2eb6e9838672eeb1357a2dd68b41f2a?s=128&d=identicon&r=PG", "display_name": "alexsh", "link": "https://stackoverflow.com/users/2624663/alexsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 1, "answer_count": 4, "score": 4, "last_activity_date": 1526618800, "creation_date": 1526474226, "last_edit_date": 1526476432, "question_id": 50371169, "link": "https://stackoverflow.com/questions/50371169/do-parameter-declarations-in-function-declarators-have-function-prototype-scope", "title": "Do parameter declarations in function declarators have function prototype scope?", "body": "<p>Clause 6.2.1(2) of the C11 ISO Standard (draft) defines a function prototype as (emphasis mine)</p>\n\n<blockquote>\n  <p>A function prototype is a <b>declaration of a function</b> that declares the types of its parameters.</p>\n</blockquote>\n\n<p>So a declaration such as <code>void (*f)( struct s { int c; } );</code>\nis not a declaration of a function (it is a declaration of a pointer to a function) and thus the tag <code>s</code> has either file or block scope (depending on where this declaration appears). It would then seem that the following translation unit <code>void (*f)( struct s { int c; } ); struct s a[42];</code>\nshould be fully conforming (setting aside any issues of usability). Yet, <code>gcc</code> produces a diagnostic 'array of incomplete types' (and a warning about <code>s</code> having the scope confined to the parameter list) signaling that <code>s</code> has a function prototype scope even though formally there is no function declaration.</p>\n\n<p>Was the intention of the Standard to say that a parameter list in every function <b>declarator</b> defines its own scope (which is how <code>gcc</code> and every other compiler seem to interpret this)? Is this intention expressed more formally anywhere in the standard? Any Defect Report that has not made it into the Standard yet? </p>\n\n<p>This is a language lawyer question, of course, and I do appreciate that such 'sneaky' tag declarations are bad style. Aside from <code>s</code> being an incomplete type in the declaration of <code>a</code> above, the scoping issues also make it impossible to <i>define</i> a function with the prototype of <code>*f</code>. Finally, to avoid the issue of using <code>f</code> itself one may put the whole declaration of <code>f</code> inside a <code>sizeof</code> as in <code>int b[sizeof(void (*)( struct s { int c; } ))];</code></p>\n"}, {"tags": ["c", "undefined-behavior"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1526474220, "post_id": 50371127, "comment_id": 87758075, "body": "Yes, it is undefined behavior (at least when <code>sizeof(double) &gt; sizeof(int32_t)</code>, which is generally the case). What makes you think it might not be one?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1526474335, "post_id": 50371127, "comment_id": 87758154, "body": "It would be <i>strict aliasing violation</i> even if type sizes would match."}, {"owner": {"reputation": 348226, "user_id": 267, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1b11262da6d1cd26b1b0bc99a2620cee?s=128&d=identicon&r=PG", "display_name": "Lasse V. Karlsen", "link": "https://stackoverflow.com/users/267/lasse-v-karlsen"}, "edited": false, "score": 1, "creation_date": 1526474420, "post_id": 50371127, "comment_id": 87758207, "body": "The concept &quot;undefined&quot; does not <i>necessarily</i> mean &quot;we don&#39;t know what will happen&quot;. It means &quot;we haven&#39;t <b>specified</b> what <b>should</b> happen&quot;. By design you cannot rely on a specific behavior because not only might the current observable effect be depending on specific circumstances, there is also no guarantee different compilers, versions, environments, etc. can impact this."}, {"owner": {"reputation": 348226, "user_id": 267, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1b11262da6d1cd26b1b0bc99a2620cee?s=128&d=identicon&r=PG", "display_name": "Lasse V. Karlsen", "link": "https://stackoverflow.com/users/267/lasse-v-karlsen"}, "edited": false, "score": 0, "creation_date": 1526474468, "post_id": 50371127, "comment_id": 87758241, "body": "So I know exactly what the cpu is going to try to do, it&#39;s going to read &quot;double&quot; amount of bytes, interpret that as a double. What&#39;s in those bytes, whether it&#39;s allowed to read those bytes, whether those bytes can safely be converted to a double, etc. all of those are <b>undefined</b>."}, {"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 0, "creation_date": 1526475233, "post_id": 50371127, "comment_id": 87758763, "body": "Strict aliasing isn&#39;t really relevant if there are no writes happening, as there&#39;s no changing object state that needs to sync."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 0, "creation_date": 1526475395, "post_id": 50371127, "comment_id": 87758894, "body": "@Leushenko  Dereferencing an inappropriate pointer, as in the code <code>printf(&quot;%lf\\n&quot;, *p);</code> here, is enough to invoke UB.  On hardware with strict alignment restrictions, such code is likely to cause a <code>SIGSEGV</code> or <code>SIGBUS</code> to be raised."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 0, "creation_date": 1526476796, "post_id": 50371127, "comment_id": 87759941, "body": "@Leushenko It&#39;s relevant as soon as the variable is accessed, read or write. For example code like <code>int i = 0; short* s = (short*)&amp;i; while(*s != something) { i=something; }</code> may hang in an eternal loop even if the <code>short</code> representation of <code>something</code> is identical to the <code>int</code> representation."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1526475419, "post_id": 50371344, "comment_id": 87758913, "body": "You are citing a wiki which seems to be citing the C++ standard (?), not the C standard. C and C++ happen to behave identical in this case, but the source used isn&#39;t ideal."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526476870, "post_id": 50371344, "comment_id": 87759995, "body": "You are right. I should pay more attention to cppreference next time."}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1526477529, "last_edit_date": 1526477529, "creation_date": 1526474729, "answer_id": 50371344, "question_id": 50371127, "link": "https://stackoverflow.com/questions/50371127/is-read-exceed-an-object-undefined-behavior-in-c/50371344#50371344", "title": "Is read exceed an object undefined behavior in C?", "body": "<p>From <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow noreferrer\">C99 Committee Draft</a> <code>6.5 Expressions</code> point 7:</p>\n\n<blockquote>\n  <p>An object shall have its stored value accessed only by an lvalue expression that has one of the following types:76)<br>\n  \u2014 a type compatible with the effective type of the object,<br>\n  \u2014 a qualified version of a type compatible with the effective type of the object,<br>\n  \u2014 a type that is the signed or unsigned type corresponding to the effective type of the object,<br>\n  \u2014 a type that is the signed or unsigned type corresponding to a qualified version of the effective type of the object,<br>\n  \u2014 an aggregate or union type that includes one of the aforementioned types among its members (including, recursively,amember of a subaggregate or contained union), or<br>\n  \u2014 a character type.</p>\n</blockquote>\n\n<p>Object of type <code>int</code> has it's address accessed using lvalue expression of <code>double</code> type. <code>int</code> and <code>double</code> types are not compatible anyhow, they are not aggregate and <code>double</code> is not a character type. Dereferencing a pointer (an lvalue expression) of a type double that points to an object with type int is undefined behavior. Such operations are called <em>strict aliasing violation</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 3, "last_activity_date": 1526475299, "creation_date": 1526475299, "answer_id": 50371538, "question_id": 50371127, "link": "https://stackoverflow.com/questions/50371127/is-read-exceed-an-object-undefined-behavior-in-c/50371538#50371538", "title": "Is read exceed an object undefined behavior in C?", "body": "<p>It's undefined behavior per C11 6.5 (\"the strict aliasing rule\"):</p>\n\n<blockquote>\n  <p>6 The effective type of an object for an access to its stored value is the declared type of the object, if any.<br>\n  ...</p>\n</blockquote>\n\n<p>In this case the effective type is <code>int32_t</code> (which is a typedef corresponding to something like <code>int</code> or <code>long</code>).</p>\n\n<blockquote>\n  <p>7 An object shall have its stored value accessed only by an lvalue expression that has one of the following types:<br>\n  - a type compatible with the effective type of the object,<br>\n  ...</p>\n</blockquote>\n\n<p><code>double</code> is not compatible with <code>int32_t</code>, so when the code access the data here: <code>*p</code>, it violates this rule and invokes UB.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">What is the strict aliasing rule?</a> for details.</p>\n"}, {"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1526488133, "post_id": 50375615, "comment_id": 87767954, "body": "<i>In general, the act of converting a pointer to another type and then immediately performing an access with it falls in the category of actions which will be supported by quality compilers that are configured to be suitable for system programming, but may not be supported by compilers that act obtusely.</i>  So any compiler on SPARC or ARM hardware is &quot;obtuse&quot; and not &quot;quality&quot;?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1526490766, "post_id": 50375615, "comment_id": 87769331, "body": "@AndrewHenle: Are you suggesting I should have mentioned alignment?  That would be a fair issue I guess.  My main point is that 6.5p7 as written cannot have been reasonably intended to be treated as describing all cases where compilers should behave predictably, since the way it&#39;s written doesn&#39;t even allow for cases like <code>struct s {int x;}={0} foo;  foo.x = 1;</code> [that code clearly modifies the value in an object of type <code>struct s</code>, and does so using an lvalue of type <code>int</code>--not one of the types listed as suitable for such purpose] and recognition of derived pointers/lvalues is a QoI issue."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1526492561, "post_id": 50375615, "comment_id": 87770274, "body": "@AndrewHenle: As for whether I would regard clang and gcc as quality implementations when invoked with <code>-fstrict-aliasing</code>, I would not.  The stated purpose of 6.5p7 was to allow compilers to assume seemingly-unrelated things don&#39;t alias--not to invite them to ignore obvious relationships among things.  Both gcc and clang are prone to optimizing out code which reads storage as T1 and writes back the same bit pattern as T2, even if the storage had last been written as T1 and will next be read as T2.  Having done that, they will then treat the preceding write and following read as unordered."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1526498398, "post_id": 50375615, "comment_id": 87773108, "body": "<i>Are you suggesting I should have mentioned alignment? That would be a fair issue I guess.</i>  Of course. Way too many x86-only programmers don&#39;t even think of alignment.  Other hardware isn&#39;t near as forgiving. <i>As for whether I would regard clang and gcc as quality implementations when invoked with <code>-fstrict-aliasing</code>, I would not.</i>  On SPARC, I&#39;ve seen (older versions by now of) GCC generate binaries from conforming code that would fail with <code>SIGBUS</code>, so yeah, I might have to agree with you there, with or without <code>-fstrict-aliasing</code>."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1526502481, "post_id": 50375615, "comment_id": 87775019, "body": "@AndrewHenle: Do you like what I wrote about alignment?"}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 1, "last_activity_date": 1526491051, "last_edit_date": 1526491051, "creation_date": 1526487251, "answer_id": 50375615, "question_id": 50371127, "link": "https://stackoverflow.com/questions/50371127/is-read-exceed-an-object-undefined-behavior-in-c/50375615#50375615", "title": "Is read exceed an object undefined behavior in C?", "body": "<p>The Standard does not require that compilers behave predictably if an object of type \"int\" is accessed using an lvalue that has no visible relation to that type.  In the rationale, however, the authors note that the classification of certain actions as Undefined Behavior is intended to allow the marketplace to decide what behaviors are considered necessary in quality implementations.  In general, the act of converting a pointer to another type and then immediately performing an access with it falls in the category of actions which will be supported by quality compilers that are configured to be suitable for system programming, but may not be supported by compilers that act obtusely.</p>\n\n<p>Even ignoring the lvalue-type issue, however, the Standard imposes no requirements as to what happens if an application tries to read from memory it does not own.  Here again, the choice of behavior may sometimes be a quality-of-implementation issue.  There are five main possibilities here:</p>\n\n<ol>\n<li><p>On some implementations, the contents of the storage might be\n  predictable via means not described by the Standard, and the read\n  would yield the contents of such storage.</p></li>\n<li><p>The act of reading might behave as though it yields bits with\n  Unspecified values, but have no other side-effect.</p></li>\n<li><p>The attempted read may terminate the program.</p></li>\n<li><p>On platforms which use memory-mapped I/O, the out-of-bounds read could\n  perform an unexpected operation with unknown consequences; this\n  possibility is only applicable on certain platforms.</p></li>\n<li><p>Implementations that try to be \"clever\" in various ways may try to\n  draw inferences based on the notion that the read cannot occur, thus\n  resulting in side-effects that transcend laws of time and causality.</p></li>\n</ol>\n\n<p>If you know that your code will be running on a platform where reads have\nno side-effects, the implementation won't try to be \"clever\", and your code\nis prepared for any pattern of bits the read might yield, then under those\ncircumstances such a read may have useful behavior, but you would be limiting\nthe situations where your code could be used.</p>\n\n<p>Note that while implementations that define <code>__STDC_ANALYZABLE__</code> are required\nto have most actions obey the laws of time and causality even in cases where\nthe Standard would impose no other requirements, out-of-bounds reads are\nclassified as Critical Undefined Behavior, and should thus be considered\ndangerous on any implementation that does not expressly specify otherwise.</p>\n\n<p>Incidentally, there's another issue on some platforms which would apply even if e.g. code had used an <code>int[3]</code> rather than a single <code>int</code>: alignment.  On some platforms, values of certain types may only be read or written to/from certain addresses, and some addresses which are suitable for smaller types may not be suitable for larger ones.  On platforms where <code>int</code> requires 32-bit alignment but <code>double</code> requires 64-bit alignment, given <code>int foo[3]</code>, a compiler might arbitrarily place <code>foo</code> so that <code>(double*)foo</code> would be a suitable address for storing a <code>double</code>, or so that <code>(double*)(foo+1)</code> would be a suitable place.  A programmer who is familiar with the details of an implementation may be able to determine which address would be valid and exploit that, but code which blindly assumes that the address of <code>foo</code> will be valid may fail if <code>double</code> has a 64-bit alignment requirement.</p>\n"}], "owner": {"reputation": 154, "user_id": 7036039, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gzAIyOuIR6g/AAAAAAAAAAI/AAAAAAAAACY/KXvfwihuTWA/photo.jpg?sz=128", "display_name": "wt.cc", "link": "https://stackoverflow.com/users/7036039/wt-cc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1526491051, "creation_date": 1526474122, "last_edit_date": 1526482243, "question_id": 50371127, "link": "https://stackoverflow.com/questions/50371127/is-read-exceed-an-object-undefined-behavior-in-c", "title": "Is read exceed an object undefined behavior in C?", "body": "<p>Convert a integer address to double pointer and the read it, but the size of integer is less than double type, and the read operation will read exceed the object size. I believe that this is undefined behavior but I didn't find the description in C standard, so I post this question to seek for an answer to confirm my point.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nint main() {\n    int32_t a = 12;\n    double *p = (double*)(&amp;a);\n    printf(\"%lf\\n\", *p);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 1114, "user_id": 9514814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7RZc6.jpg?s=128&g=1", "display_name": "Neargye", "link": "https://stackoverflow.com/users/9514814/neargye"}, "is_accepted": true, "score": 0, "last_activity_date": 1535973374, "creation_date": 1535973374, "answer_id": 52148672, "question_id": 50370966, "link": "https://stackoverflow.com/questions/50370966/tensorflow-c-api-how-to-modify-the-value-in-tensor/52148672#52148672", "title": "Tensorflow C API: How to modify the value in tensor", "body": "<pre><code>// Allocate tensor\nconst int input_dims_len = 3;\nint64_t input_dims[input_dims_len] = {1, 5, 12};\nconst int data_size = 5 * 12 * sizeof(float));\nTF_Tensor* tensor = TF_AllocateTensor(TF_FLOAT,\n                                      input_dims, input_dims_len,\n                                      data_size);\n// Change values \u200b\u200bin a tensor\nfloat input[5 * 12] = {...};\nstd::memcpy(TF_TensorData(tensor), input, std::min(data_size, TF_TensorByteSize(tensor)));\n</code></pre>\n"}], "owner": {"reputation": 1114, "user_id": 9514814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7RZc6.jpg?s=128&g=1", "display_name": "Neargye", "link": "https://stackoverflow.com/users/9514814/neargye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 52148672, "answer_count": 1, "score": 0, "last_activity_date": 1535973374, "creation_date": 1526473691, "last_edit_date": 1526506945, "question_id": 50370966, "link": "https://stackoverflow.com/questions/50370966/tensorflow-c-api-how-to-modify-the-value-in-tensor", "title": "Tensorflow C API: How to modify the value in tensor", "body": "<p>How to change values \u200b\u200bin a tensor without creating a new tensor?</p>\n\n<p>For example, I have a <code>tensor</code> :</p>\n\n<pre><code>const size_t input_dims_len = 3;\nint64_t input_dims[input_dims_len] = {1, 5, 12};\nfloat input[5 * 12] = {...};\nTF_Tensor* input_tensor = TF_NewTensor(TF_FLOAT,\n                                       input_dims,\n                                       input_dims_len,\n                                       input,\n                                       5 * 12 * sizeof(float),\n                                       deallocate_tensor,\n                                       nullptr);\n</code></pre>\n\n<p>When I change the values in <code>input</code>, how do make it so that the values in <code>input_tensor</code> are also changed?</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "posix", "pthread-barriers"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1526473794, "post_id": 50370702, "comment_id": 87757800, "body": "How do you know the order the tasks start?  All you really know is the order the tasks write to <code>stdout</code>.  That&#39;s not the same thing."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1526474466, "post_id": 50370702, "comment_id": 87758240, "body": "I would start by checking for the functions you call returning errors. pthread_setschedparam fails on my linux machine (I assume you run linux because the functions you use are quite non-portable). Most likely because some really specific things have to be enabled for SCHED_FIFO to work."}, {"owner": {"reputation": 2504, "user_id": 1842580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40f68b60ccf1f19a662548f58a4fce2f?s=128&d=identicon&r=PG", "display_name": "Bruno Pessanha", "link": "https://stackoverflow.com/users/1842580/bruno-pessanha"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1530175774, "post_id": 50370702, "comment_id": 89145693, "body": "Thanks @AndrewHenle. I was indeed tricked by that. :("}], "answers": [{"tags": [], "owner": {"reputation": 587, "user_id": 9703208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/168cfbdd659ac8a46446ecf97727f78b?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay P", "link": "https://stackoverflow.com/users/9703208/vinay-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1526474304, "creation_date": 1526474304, "answer_id": 50371199, "question_id": 50370702, "link": "https://stackoverflow.com/questions/50370702/why-does-the-pthread-barrier-wait-does-not-take-thread-priorities-into-considera/50371199#50371199", "title": "Why does the pthread_barrier_wait does not take thread priorities into consideration?", "body": "<p>Scheduling is dependent on the scheduling algorithm being used in the OS. You are trying to use FIFO which as per <a href=\"http://man7.org/linux/man-pages/man2/sched_setscheduler.2.html\" rel=\"nofollow noreferrer\">manpage</a> is available only when real-time scheduling is enabled.</p>\n\n<blockquote>\n<pre><code>   Various \"real-time\" policies are also supported, for special time-\n   critical applications that need precise control over the way in which\n   runnable threads are selected for execution.  For the rules governing\n   when a process may use these policies, see sched(7).  The real-time\n   policies that may be specified in policy are:\n\n        SCHED_FIFO    a first-in, first-out policy; and\n\n        SCHED_RR      a round-robin policy.\n</code></pre>\n</blockquote>\n\n<p>If you are using Linux, scheduling algorithms are selected during kernel compile time, not sure if it is possible to change them during boot time or dynamically.  </p>\n"}, {"tags": [], "owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "is_accepted": false, "score": 0, "last_activity_date": 1526492883, "creation_date": 1526492883, "answer_id": 50377148, "question_id": 50370702, "link": "https://stackoverflow.com/questions/50370702/why-does-the-pthread-barrier-wait-does-not-take-thread-priorities-into-considera/50377148#50377148", "title": "Why does the pthread_barrier_wait does not take thread priorities into consideration?", "body": "<p>You're creating two different threads, and restricting them to separate cores. It's true that one of them has a higher priority setting than the other, but both are <code>SCHED_FIFO</code> threads which likely makes each one the highest priority task on its respective core (at least among user-level tasks). Since each core has a separate runnable task queue, the scheduling policy would only affect the comparison among tasks on the same core. </p>\n\n<p>So, for all practical purposes, the two tasks are actually at the same effective priority. Hence, there is no reason to expect that task 1 will start executing any sooner than task 2 following the barrier wait. If you want to enforce that (while still having them run on separate cores), you'll need to use some other shared variable to have task 1 tell task 2 it's okay to start. That could be a semaphore, mutex-protected flag, or on most architectures, simply a busy loop on an atomically updated flag integer.</p>\n"}], "owner": {"reputation": 2504, "user_id": 1842580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40f68b60ccf1f19a662548f58a4fce2f?s=128&d=identicon&r=PG", "display_name": "Bruno Pessanha", "link": "https://stackoverflow.com/users/1842580/bruno-pessanha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1526492883, "creation_date": 1526472950, "last_edit_date": 1526473432, "question_id": 50370702, "link": "https://stackoverflow.com/questions/50370702/why-does-the-pthread-barrier-wait-does-not-take-thread-priorities-into-considera", "title": "Why does the pthread_barrier_wait does not take thread priorities into consideration?", "body": "<p>I am using barriers to synchronise my two threads which will perform <strong>task_1</strong> and <strong>task_2</strong> respectively. </p>\n\n<p>After they are synchronised, I would like that the task with higher priority to start executing before the tasks with lower priorities.</p>\n\n<p>I was surprised to notice that even though <strong>task_2</strong> has a <strong><em>lower</em></strong> priority than <strong>task_1</strong>, <em>sometimes</em> <strong>task_2</strong> starts executing before <strong>task_1</strong>.</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;sched.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n\n#define MAX_PRIORITY 99\n#define MIN_PRIORITY 1\n\npthread_t threads[2];\npthread_barrier_t barrier;\n\nvoid set_priority(int priority, int t_id){\n    int policy = SCHED_FIFO;\n    struct sched_param param;\n\n    param.sched_priority = priority;\n\n    pthread_attr_t attr;\n    pthread_attr_init (&amp;attr);\n\n    pthread_setschedparam(pthread_self(), policy, &amp;param);\n\n    pthread_getschedparam(pthread_self(), &amp;policy, &amp;param);\n}\n\nint set_core(int core_id) {\n    int num_cores = sysconf(_SC_NPROCESSORS_ONLN);\n    if (core_id &lt; 0 || core_id &gt;= num_cores)\n        return EINVAL;\n\n    cpu_set_t cpuset;\n    CPU_ZERO(&amp;cpuset);\n    CPU_SET(core_id, &amp;cpuset);\n\n    pthread_t current_thread = pthread_self();\n    return pthread_setaffinity_np(current_thread, sizeof(cpu_set_t), &amp;cpuset);\n}\nvoid create_task(int task_number, void *task) {\n    int rc = pthread_create(&amp;threads[task_number - 1], NULL, task, NULL);\n    if(rc != 0) {\n        printf(\"pthread_create(%d) error %d\\n\", task_number - 1, rc);\n        pthread_exit(0) ;\n    }\n}\n\nvoid schedule_task(int task_number, int priority) {\n    set_core(2); //running tasks only in 2nd processor core\n    set_priority(priority, task_number);\n}\n\nvoid start_task_1() {\n    printf(\"Task 1 Started \\n\");\n    sleep(1); //do task 1\n    printf(\"Task 1 Endeded\\n\");\n}\n\nvoid start_task_2() {\n    printf(\"Task 2 Started \\n\");\n    sleep(1); //do task 2\n    printf(\"Task 2 Endeded\\n\");\n}\n\nvoid task_1(void *thread_param) {\n    schedule_task(1, MAX_PRIORITY);\n    pthread_barrier_wait(&amp;barrier);\n\n    start_task_1();\n\n    pthread_exit(NULL);\n}\n\nvoid task_2(void *thread_param) {\n    schedule_task(2, MIN_PRIORITY);\n    pthread_barrier_wait(&amp;barrier);\n\n    start_task_2();\n\n    pthread_exit(NULL);\n}\n\nint main() {\n    pthread_barrier_init(&amp;barrier, NULL, 2);\n\n    create_task(1, task_1);\n    create_task(2, task_2);\n\n    for (int i = 0; i &lt; 2; i++) {\n        pthread_join(threads[i], NULL);\n    } \n\n    pthread_barrier_destroy(&amp;barrier);\n}\n</code></pre>\n\n<p>Is that an expected behaviour in POSIX threads? What can I do to enforce that <strong>task_1</strong> always starts before <strong>task_2</strong>?</p>\n\n<p>I am executing the program as root, and I have ensured that the tasks priorities have been set accordingly.</p>\n"}, {"tags": ["c", "function", "crash"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 2, "creation_date": 1526471756, "post_id": 50370221, "comment_id": 87756337, "body": "If it&#39;s crashing, you&#39;re getting an error. It would help to see that error."}, {"owner": {"reputation": 1, "user_id": 9775019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a312980dac896b1abe752746a42d36?s=128&d=identicon&r=PG&f=1", "display_name": "Ammar Brk", "link": "https://stackoverflow.com/users/9775019/ammar-brk"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1526471953, "post_id": 50370221, "comment_id": 87756486, "body": "@Carcigenicate sure , it says: a problem caused the program to stop working correctly.wnidows will close the program and notify you if a solutions available , and the program returns this : -1073741571"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1526472052, "post_id": 50370221, "comment_id": 87756568, "body": "What is <code>management_st</code>?  Please post a <i>complete</i> example."}, {"owner": {"reputation": 1, "user_id": 9775019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a312980dac896b1abe752746a42d36?s=128&d=identicon&r=PG&f=1", "display_name": "Ammar Brk", "link": "https://stackoverflow.com/users/9775019/ammar-brk"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1526472809, "post_id": 50370221, "comment_id": 87757151, "body": "ive edited the question ^^&quot; @AndrewHenle"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1526473132, "post_id": 50370221, "comment_id": 87757358, "body": "Please <a href=\"https://stackoverflow.com/posts/50370221/edit\">edit</a> your questtion  and show us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, that is a piece of code we ca copy/paste, compile and run."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526474143, "post_id": 50370221, "comment_id": 87758026, "body": "Please indent the code. It is painful to look at it right now."}, {"owner": {"reputation": 1, "user_id": 9775019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a312980dac896b1abe752746a42d36?s=128&d=identicon&r=PG&f=1", "display_name": "Ammar Brk", "link": "https://stackoverflow.com/users/9775019/ammar-brk"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1526474151, "post_id": 50370221, "comment_id": 87758030, "body": "sorry ive edited it again and put the full code ^^&quot; im fairly new to this and thought i would be saving you time by not inserting the whole code XD @MichaelWalz"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1526474215, "post_id": 50370221, "comment_id": 87758071, "body": "Your code does nwot compile. Copy/paste your code verbatim."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526474836, "post_id": 50370221, "comment_id": 87758481, "body": "<code>exit -1;</code> what is this?"}, {"owner": {"reputation": 1, "user_id": 9775019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a312980dac896b1abe752746a42d36?s=128&d=identicon&r=PG&f=1", "display_name": "Ammar Brk", "link": "https://stackoverflow.com/users/9775019/ammar-brk"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526474993, "post_id": 50370221, "comment_id": 87758582, "body": "@AjayBrahmakshatriya as far as i was tought in my class it was supposed to do &quot;return&quot; job , but ive noticed it dosent do anything so i wont be surprised to know that ^^&quot;"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526475074, "post_id": 50370221, "comment_id": 87758644, "body": "<code>exit</code> is a function. You need to call it if you need to stop the program. So something like <code>exit(-1)</code> would make sense."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526475149, "post_id": 50370221, "comment_id": 87758692, "body": "<code>scanf(&quot;%[^\\n]s&quot;,owner);</code> -- the format specifier doesn&#39;t match the value provided. Infact the parameter is not even an address."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526475236, "post_id": 50370221, "comment_id": 87758771, "body": "<a href=\"https://stackoverflow.com/questions/2979209/using-fflushstdin\"><code>flush(stdin);</code> is undefined behavior</a>."}, {"owner": {"reputation": 1, "user_id": 9775019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a312980dac896b1abe752746a42d36?s=128&d=identicon&r=PG&f=1", "display_name": "Ammar Brk", "link": "https://stackoverflow.com/users/9775019/ammar-brk"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526475239, "post_id": 50370221, "comment_id": 87758773, "body": "ooh ! thank you very much for pointing at it ! it was written exit -1 in my college lectures guess it was copying mistakes , but do you have any idea why it crashes ?? @AjayBrahmakshatriya"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526475285, "post_id": 50370221, "comment_id": 87758806, "body": "@AmmarBrk that is not the reason for the crash. There are many more mistakes with your program. Fixing this won&#39;t fix the crash."}, {"owner": {"reputation": 1, "user_id": 9775019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a312980dac896b1abe752746a42d36?s=128&d=identicon&r=PG&f=1", "display_name": "Ammar Brk", "link": "https://stackoverflow.com/users/9775019/ammar-brk"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526475453, "post_id": 50370221, "comment_id": 87758936, "body": "@AjayBrahmakshatriya i see ! sorry to bother you more but i have a question , im using a microsoft visual studio , does that affect the fflush undefined behavior ? ive read that its only considered this in c99 standards only is that correct ?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526475631, "post_id": 50370221, "comment_id": 87759076, "body": "@AmmarBrk yes, this is Undefined behavior according to the C standard (which Microsoft Visual Studio also follows in most cases). However, it adds the functionality of allowing <code>fflush</code> on <code>stdin</code>. Still, you shouldn&#39;t use that because your code wouldn&#39;t be portable. I tried your code on my Windows machine with <code>clang</code> (instead of MSVC) and the input all went haywire. It&#39;s best practice to write code that is portable."}, {"owner": {"reputation": 1, "user_id": 9775019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a312980dac896b1abe752746a42d36?s=128&d=identicon&r=PG&f=1", "display_name": "Ammar Brk", "link": "https://stackoverflow.com/users/9775019/ammar-brk"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526475744, "post_id": 50370221, "comment_id": 87759174, "body": "@AjayBrahmakshatriya aaah i see , thank you very mush !! ^.^"}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1526472894, "post_id": 50370509, "comment_id": 87757196, "body": "At most, it&#39;s a handful of MB.  Probably not a problem on today&#39;s machines with GB of memory available."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1526473051, "post_id": 50370509, "comment_id": 87757308, "body": "@AndrewHenle stack space can be pretty low even on multi GB computers. Typically on WIndows it&#39;s just 1Mb by default, 8 MB on Linux I believe."}, {"owner": {"reputation": 1, "user_id": 9775019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a312980dac896b1abe752746a42d36?s=128&d=identicon&r=PG&f=1", "display_name": "Ammar Brk", "link": "https://stackoverflow.com/users/9775019/ammar-brk"}, "edited": false, "score": 0, "creation_date": 1526473063, "post_id": 50370509, "comment_id": 87757317, "body": "i tried now to make it avai_man[100] but still crashed, and also i tried the avai_man[1000] with other functions and it worked perfectly, i also tried making the arrays in the other functions [100] to make sure but it crashed also"}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1526479888, "post_id": 50370509, "comment_id": 87762416, "body": "@AndrewHenle:  Exactly what Walz said:  Stack space is <b><i>not</i></b> the same thing as available memory!  Per-thread stack space can be shockingly limited."}], "tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 1, "last_activity_date": 1526472430, "creation_date": 1526472430, "answer_id": 50370509, "question_id": 50370221, "link": "https://stackoverflow.com/questions/50370221/c-program-crashes-when-calling-a-function/50370509#50370509", "title": "c program crashes when calling a function", "body": "<pre><code>management_st avai_man[1000];\n</code></pre>\n\n<p>That is a really big array to be creating on the stack; you may be running out of stack-space. </p>\n\n<p>Consider moving the array to dynamically allocated memory, or making it a static.</p>\n"}], "owner": {"reputation": 1, "user_id": 9775019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8a312980dac896b1abe752746a42d36?s=128&d=identicon&r=PG&f=1", "display_name": "Ammar Brk", "link": "https://stackoverflow.com/users/9775019/ammar-brk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1526474611, "creation_date": 1526471549, "last_edit_date": 1526474611, "question_id": 50370221, "link": "https://stackoverflow.com/questions/50370221/c-program-crashes-when-calling-a-function", "title": "c program crashes when calling a function", "body": "<p>i was trying to create a program that manages car fixing records,and everything was working fine until <code>case 6</code> of this code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\ntypedef struct{\n    int day;\n    int month;\n    int year;\n}date;\ntypedef struct{\n    char pie_name[50];\n    int pie_num;\n    float pie_price;\n}pie_st;\ntypedef struct{\n    long car_num;\n    char car_type[20];\n    char car_colour[20];\n    char owner_name[50];\n    long phone_num;\n}own_cars_st;\ntypedef struct{\n    int management_num;\n    long car_num;\n    date date_of_management;\n    int pieces_num;\n    pie_st pie_rec[1000];\n    float management_fees;\n    float total_price;\n}management_st;\nvoid check_file(FILE *ptf);\nvoid add_car_rec();\nvoid add_management_rec();\nint delete_car_rec(long search);\nint search_own(char owner[]);\nint car_man(long search);\nint main(){\n    int option,c=0,found=1;\n    long search;\n    char owner[50];\n    while(c==0)\n    {\n        printf(\"\\nplease enter your choice:\\n\");\n        printf(\"1.add new car record\\n\");\n        printf(\"2.add new car management record\\n\");\n        printf(\"3.delete a car record by number\\n\");\n        printf(\"4.view all car numbers for a specific owner\\n\");\n        printf(\"5.display all management records\\n\");\n        printf(\"6.view a specific car's management records and the total cost\\n\");\n        printf(\"7.view the most used gear piece's number\\n\");\n        printf(\"8.view a list of all cars that had management after a specific date\\n\");\n        printf(\"9.view all cars with changed tires\\n\");\n        printf(\"10.exit\\n\");\n        scanf(\"%d\",&amp;option);\n        switch(option)\n        {\n            case 1:\n                add_car_rec();\n                break;\n            case 2:\n                add_management_rec();\n                break;\n            case 3:\n                printf(\"please enter the number of the car you want to delete its number:\\t\");\n                scanf(\"%ld\",&amp;search);\n                found=delete_car_rec(search);\n                if(found==1)\n                    printf(\"there's no record available for this number!\\n\");\n                else\n                    printf(\"record has been deleted!\\n\");\n                break;\n            case 4:\n                printf(\"please enter the name of the owner:\\t\");\n                fflush(stdin);\n                scanf(\"%[^\\n]s\",owner);\n                found=search_own(owner);\n                if(found==1)\n                    printf(\"owner was not found!\\n\");\n                break;\n            case 5:\n                break;\n            case 6:\n                printf(\"please enter the number of the car you want to view its management records:\\t\");\n                scanf(\"%ld\",&amp;search);\n                printf(\"7\");\n                car_man(search);\n                printf(\"8\");\n                if(found==1)\n                    printf(\"this car number has no management records!\\n\");\n                break;\n            case 7:\n                break;\n            case 8:\n                break;\n            case 9:\n                break;\n            case 10:\n                c=10;\n                break;\n            default:\n                printf(\"please choose one of the available options\\n\");\n        }\n    }\n    return 0;\n}\nvoid add_car_rec(){\n    own_cars_st new_car,old_cars[100];\n    printf(\"please enter the car information:\\n\");\n    printf(\"car number:\\t\");\n    scanf(\"%ld\",&amp;new_car.car_num);\n    printf(\"car type:\\t\");\n    fflush(stdin);\n    scanf(\"%[^\\n]s\",new_car.car_type);\n    printf(\"car colour:\\t\");\n    fflush(stdin);\n    scanf(\"%[^\\n]s\",new_car.car_colour);\n    printf(\"owner name:\\t\");\n    fflush(stdin);\n    scanf(\"%[^\\n]s\",new_car.owner_name);\n    printf(\"phone number:\\t\");\n    scanf(\"%ld\",&amp;new_car.phone_num);\n    FILE *ptf;\n    int n=0,i,j,fc;\n    ptf=fopen(\"owners and cars.bin\",\"ab+\");\n    if(ptf!=NULL){\n        fseek(ptf,0,2);\n        fc=ftell(ptf);\n        rewind(ptf);\n        if(fc==0)\n        {\n            fwrite(&amp;new_car,sizeof(own_cars_st),1,ptf);\n            fclose(ptf);\n        }\n        else{\n            while(1==fread(&amp;old_cars[n],sizeof(own_cars_st),1,ptf))\n            {\n                n++;\n            }\n            for(i=0;i&lt;n+1;i++)\n            {\n                if(new_car.car_num&lt;old_cars[i].car_num)\n                {\n                    for(j=n+1;j&gt;i;j--)\n                    {\n                        old_cars[j]=old_cars[j-1];\n                    }\n                    break;\n                }\n            }\n            old_cars[i]=new_car;\n            fclose(ptf);\n            ptf=fopen(\"owners and cars.bin\",\"wb\");\n            check(ptf);\n            for(i=0;i&lt;n+1;i++)\n            {\n                fwrite(&amp;old_cars[i],sizeof(own_cars_st),1,ptf);\n            }\n            fclose(ptf);\n        }\n    }\n}\nvoid add_management_rec(){\n    FILE *ptf;\n    int i,count=0,empty;\n    float sum=0;\n    management_st new_manage_rec,last_manage_rec;\n    printf(\"please enter the new management record information:\\n\");\n    printf(\"fixed car's number:\\t\");\n    scanf(\"%ld\",&amp;new_manage_rec.car_num);\n    printf(\"date of management:\\n\");\n    printf(\"day:\\t\");\n    scanf(\"%d\",&amp;new_manage_rec.date_of_management.day);\n    printf(\"month:\\t\");\n    scanf(\"%d\",&amp;new_manage_rec.date_of_management.month);\n    printf(\"year:\\t\");\n    scanf(\"%d\",&amp;new_manage_rec.date_of_management.year);\n    printf(\"the number of the used pieces types:\\t\");\n    scanf(\"%d\",&amp;new_manage_rec.pieces_num);\n    printf(\"please enter each type's information:\\n\");\n    for(i=0;i&lt;new_manage_rec.pieces_num;i++)\n    {\n        printf(\"piece #%d\\n\",i+1);\n        printf(\"piece name:\\t\");\n        scanf(\"%s\",new_manage_rec.pie_rec[i].pie_name);\n        printf(\"number of used pieces:\\t\");\n        scanf(\"%d\",&amp;new_manage_rec.pie_rec[i].pie_num);\n        printf(\"piece's price:\\t\");\n        scanf(\"%f\",&amp;new_manage_rec.pie_rec[i].pie_price);\n        sum+=new_manage_rec.pie_rec[i].pie_price*(float)new_manage_rec.pie_rec[i].pie_num;\n    }\n    printf(\"management fees:\\t\");\n    scanf(\"%f\",&amp;new_manage_rec.management_fees);\n    new_manage_rec.total_price=new_manage_rec.management_fees+sum;\n    ptf=fopen(\"management.bin\",\"ab+\");\n    if(ptf!=NULL)\n    {\n        fseek(ptf,0,2);\n        empty=ftell(ptf);\n        rewind(ptf);\n        if(empty==0){\n            new_manage_rec.management_num=1;\n            fwrite(&amp;new_manage_rec,sizeof(management_st),1,ptf);}\n        else\n        {\n            fseek(ptf,-sizeof(management_st),2);\n            fread(&amp;last_manage_rec,sizeof(management_st),1,ptf);\n            new_manage_rec.management_num=last_manage_rec.management_num+1;\n            fwrite(&amp;new_manage_rec,sizeof(management_st),1,ptf);\n        }\n    }\n    fclose(ptf);\n}\nvoid check(FILE *ptf){\n    if(ptf==NULL)\n    {\n        printf(\"error!\\n\");\n        exit -1;\n    }\n}\nint delete_car_rec(long search){\n    FILE *ptf;\n    int count=0,i,j,f=1;\n    own_cars_st avai_cars[100];\n    ptf=fopen(\"owners and cars.bin\",\"rb\");\n    check(ptf);\n    while(fread(&amp;avai_cars[count],sizeof(own_cars_st),1,ptf)==1)\n    {\n        count++;\n    }\n    fclose(ptf);\n    if(count==1)\n    {\n        if(search==avai_cars[0].car_num)\n        {\n            f=0;\n            ptf=fopen(\"owners and cars.bin\",\"wb\");\n            fclose(ptf);\n        }\n    }\n    else\n    {\n        for(i=0;i&lt;count;i++)\n        {\n            if(search==avai_cars[i].car_num)\n            {\n                f=0;\n                for(j=i+1;j&lt;count;j++)\n                {\n                    avai_cars[i]=avai_cars[j];\n                }\n            }\n        }\n        ptf=fopen(\"owners and cars.bin\",\"wb\");\n        check(ptf);\n        for(i=0;i&lt;count;i++)\n            fwrite(&amp;avai_cars[i],sizeof(own_cars_st),1,ptf);\n        fclose(ptf);\n    }\n    return f;\n}\nint search_own(char owner[]){\n    FILE *ptf;\n    int found=1,count=0,i;\n    own_cars_st avai_cars[100];\n    ptf=fopen(\"owners and cars.bin\",\"rb\");\n    check(ptf);\n    while(1==fread(&amp;avai_cars[count],sizeof(own_cars_st),1,ptf))\n        count++;\n    fclose(ptf);\n    for(i=0;i&lt;count;i++)\n    {\n        if(strcmp(avai_cars[i].owner_name,owner)==0)\n        {\n            found=0;\n            printf(\"car#%d:\\t%ld\\n\",i+1,avai_cars[i].car_num);\n        }\n    }\n    return found;\n}\nint car_man(long search){\n    printf(\"*\\n\");\n    FILE *ptf;\n    management_st avai_man[100];\n    int i,count=0,found=1,j;\n    float total_cost=0;\n    printf(\"0\\n\");\n    ptf=fopen(\"management.bin\",\"rb\");\n    check(ptf);\n    printf(\"1\\n\");\n    while(1==fread(&amp;avai_man[count],sizeof(management_st),1,ptf))\n        count++;\n    fclose(ptf);\n    printf(\"2\\n\");\n    for(i=0;i&lt;count;i++)\n    {\n        if(search==avai_man[i].car_num)\n        {\n            found=0;\n            printf(\"date of management:\\n\");\n            printf(\"day:\\t\");\n            printf(\"%d\",avai_man[i].date_of_management.day);\n            printf(\"month:\\t\");\n            printf(\"%d\",avai_man[i].date_of_management.month);\n            printf(\"year:\\t\");\n            printf(\"%d\",avai_man[i].date_of_management.year);\n            printf(\"the number of the used pieces types:\\t\");\n            printf(\"%d\",avai_man[i].pieces_num);\n            printf(\"please enter each type's information:\\n\");\n            for(j=0;j&lt;avai_man[i].pieces_num;j++)\n            {\n                printf(\"piece #%d\\n\",i+1);\n                printf(\"piece name:\\t\");\n                printf(\"%s\",avai_man[i].pie_rec[j].pie_name);\n                printf(\"number of used pieces:\\t\");\n                printf(\"%d\",avai_man[i].pie_rec[j].pie_num);\n                printf(\"piece's price:\\t\");\n                printf(\"%f\",avai_man[i].pie_rec[j].pie_price);\n            }\n            printf(\"management fees:\\t\");\n            printf(\"%f\",avai_man[i].management_fees);\n        }\n        total_cost+=avai_man[i].management_fees;\n    }\n    printf(\"3\\n\");\n    printf(\"total cost for this car:\\t%f\",total_cost);\n    return found;\n}\n</code></pre>\n\n<p>the program seems to crash when calling the function car_man,ive writted few printf to trace when the program crashes and it only reaches printf(\"7\\n\").\nany help would be appreciated ^.^\np.s. there's no warnings or any thing in the compiler</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 2, "creation_date": 1526470655, "post_id": 50369858, "comment_id": 87755588, "body": "Please make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your example is both not minimal and not complete (what is a <code>LinkedList</code>)?"}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1526470677, "post_id": 50369858, "comment_id": 87755604, "body": "Besides please show which character in the line of code the compiler is pointing to."}, {"owner": {"reputation": 163, "user_id": 9799801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a900c736fd85225bb3f15b47167c4e7?s=128&d=identicon&r=PG", "display_name": "Granger Obliviate", "link": "https://stackoverflow.com/users/9799801/granger-obliviate"}, "reply_to_user": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1526470881, "post_id": 50369858, "comment_id": 87755746, "body": "I&#39;ll add my header file. It&#39;s pointing to the parenthesis after the arrow."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1526470994, "post_id": 50369858, "comment_id": 87755819, "body": "You also want to explain what you&#39;re trying to do. Why do you cast <code>this</code> to <code>int*</code> and access element <code>0</code>? Then access a pointer member with that? <i>Obviously</i> it&#39;s invalid code, but I don&#39;t understand your code, so I <i>can&#39;t</i> fix it."}], "answers": [{"tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": true, "score": 4, "last_activity_date": 1526473680, "last_edit_date": 1526473680, "creation_date": 1526470993, "answer_id": 50370040, "question_id": 50369858, "link": "https://stackoverflow.com/questions/50369858/error-expected-identifier-before-token-while-accessing-a-structure/50370040#50370040", "title": "&quot;Error: expected identifier before &#39;(&#39; token&quot; while accessing a structure", "body": "<pre><code>fprintf(output, \"%d:%d\\n\", (int)(aux-&gt;((int*)this[0])), (int)(aux-&gt;((int*)this[1])));\n</code></pre>\n\n<p>Probably you meant this:</p>\n\n<pre><code>fprintf(output, \"%d:%d\\n\", ((int*)(aux-&gt;this))[0], ((int*)(aux-&gt;this))[1]);\n</code></pre>\n\n<p>You can't put anything between <code>-&gt;</code> and member name. The expression <code>aux-&gt;this</code> has the type <code>void *</code>. You want to cast <code>this</code> member to <code>int*</code> you do that like this: <code>(int*)aux-&gt;this</code>. If you know that <code>aux-&gt;this</code> points to array of integers and you want to get the value of the second element in that array, you do <code>((int*)aux-&gt;this)[1]</code>.</p>\n\n<p>And for some reference: <a href=\"http://en.cppreference.com/w/c/language/operator_member_access\" rel=\"nofollow noreferrer\">member access operator</a>. <code>-&gt;</code> is a member access operator, it takes a <code>expression</code> (e.g. declared variable name) and a <code>member_name</code> (literally name, an <a href=\"http://en.cppreference.com/w/c/language/identifier\" rel=\"nofollow noreferrer\">identifier</a>). You can't put anything after <code>-&gt;</code> before <code>member_name</code>, <code>s-&gt;(int*)member_name</code> is invalid. The <a href=\"http://en.cppreference.com/w/c/language/cast\" rel=\"nofollow noreferrer\">cast operator</a> has lower precedence than <code>-&gt;</code>, so the compiler will first execute <code>-&gt;</code> operator and then cast, that way: <code>(int*)(aux-&gt;this)</code> is the same as <code>(int*)aux-&gt;this</code>. Operators are evaluated left to right and operators with same precedence are grouped together, so in an expression <code>(int*)aux-&gt;this[1]</code> operators <code>-&gt;</code> and <code>[]</code> will be grouped together and evaluated left to right, so first will be evaluated <code>-&gt;</code>, than <code>[]</code>, than cast. So <code>(int*)aux-&gt;this[1]</code> is the same as <code>(int*)(aux-&gt;this[1])</code>, see <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precedence</a>. And you probably wanted to evaulate <code>[]</code> lastly, so we needed additional braces <code>((int*)aux-&gt;this)[1]</code>.</p>\n"}], "owner": {"reputation": 163, "user_id": 9799801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a900c736fd85225bb3f15b47167c4e7?s=128&d=identicon&r=PG", "display_name": "Granger Obliviate", "link": "https://stackoverflow.com/users/9799801/granger-obliviate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 784, "favorite_count": 0, "closed_date": 1526494273, "accepted_answer_id": 50370040, "answer_count": 1, "score": -1, "last_activity_date": 1526473680, "creation_date": 1526470471, "last_edit_date": 1526470587, "question_id": 50369858, "link": "https://stackoverflow.com/questions/50369858/error-expected-identifier-before-token-while-accessing-a-structure", "closed_reason": "Not suitable for this site", "title": "&quot;Error: expected identifier before &#39;(&#39; token&quot; while accessing a structure", "body": "<p>I'm trying to do the following:</p>\n\n<pre><code>struct LinkedListStruct\n{\n  void* this;\n  LinkedList * next;\n};\n\n\nstruct GraphLinkedList\n{\n    int V; \n    int E;\n    LinkedList** adjlist; \n};\n\n\n\n\n\n\n/*\n *  Function:\n *    getItemLinkedList\n *\n *  Description:\n *    Gets the item of a linked list node.\n *\n *  Arguments:\n *    Pointer to a linked list node:\n *        (LinkedList *) node\n *\n *  Return value:\n *    Returns the pointer to the item of a linked list node. NULL\n *   is returned if the node is NULL (or if the item is NULL).\n */\nItem getItemLinkedList(LinkedList * node)\n{\n  /* Check if node is not empty                                   */\n  if(node == NULL)\n    return NULL;\n\n  return node-&gt;this;\n}\n\n\n\n/*\n *  Function:\n *    insertUnsortedLinkedList\n *\n *  Description:\n *    Creates a new linked list node.\n *\n *  Arguments:\n *    Item to associate to the new node:\n *      Item this\n *    Pointer to the next node:\n *      (LinkedList *) next\n *\n *  Return value:\n *    Returns the pointer to the node.\n */\nLinkedList * insertUnsortedLinkedList(LinkedList * next, Item this)\n{\n  LinkedList * new;\n\n  /* Memory allocation                                            */\n  new = (LinkedList *) malloc(sizeof(LinkedList));\n\n  /* Check memory allocation errors                               */\n  if(new == NULL)\n    return NULL;\n\n  /* Initialize new node                                          */\n  new-&gt;this = this;\n  new-&gt;next = next;\n\n  return new;\n}\n\n\n\n\nGraphLinked* GraphInit (int V, int E)\n{\n    GraphLinked* G=NULL;\n    int i=0;\n    int init[2]={-1,0};\n\n    G= (GraphLinked*) calloc(1, sizeof(GraphLinked));\n\n    G-&gt;V=V; \n    G-&gt;E=E;\n\n    G-&gt;adjlist=(LinkedList**) calloc(V, sizeof(LinkedList*)); \n\n    for(i=0; i&lt;V; i++)\n    { \n        G-&gt;adjlist[i]=insertUnsortedLinkedList(NULL, (Item)init);\n    }\n\n    return G;\n}\n\n\nvoid EdgeAdd (GraphLinked* G, int edge[3])\n{\n    int info[2]={0}; \n    LinkedList* new=NULL;\n\n    info[0]=edge[1]; \n    info[1]=edge[2];\n\n    new=insertUnsortedLinkedList(G-&gt;adjlist[edge[0]]-&gt;next, (Item) info); \n    G-&gt;adjlist[edge[0]]=new;\n\n    info[0]=edge[0];\n\n    new=insertUnsortedLinkedList(G-&gt;adjlist[edge[1]]-&gt;next, (Item) info);\n    G-&gt;adjlist[edge[1]]=new;\n}\n\n\nvoid ReadtoList (GraphLinked *G, FILE *input)\n{\n    int edge[3]={0}; \n    int i=0; \n\n    for(i=0; i&lt;G-&gt;E; i++)\n    {\n        if(fscanf(input, \"%d %d %d\", &amp;edge[0], &amp;edge[1], &amp;edge[2])!=3)\n            exit(0);\n        EdgeAdd(G, edge);\n    }\n}\n\n\nvoid PrintList (GraphLinked *G, FILE *output)\n{\n    LinkedList *aux=NULL;\n    int i=0;\n\n    fprintf(output, \"%d\\n\", G-&gt;V);\n\n    for(i=0; i&lt;G-&gt;V; i++)\n    {\n        aux=G-&gt;adjlist[i]; \n        while(aux!=NULL)\n        {\n            fprintf(output, \"%d:%d\\n\", (int)(aux-&gt;((int*)this[0])), i);\n\n            aux=aux-&gt;next;\n        }\n    }\n}\n</code></pre>\n\n<p>The only relevant function is the last one. \nIn this line: </p>\n\n<pre><code>fprintf(output, \"%d:%d\\n\", (int)(aux-&gt;((int*)this[0])), (int)(aux-&gt;((int*)this[1])));\n</code></pre>\n\n<p>I get the error: \"Error: expected identifier before '(' token\" while accessing a structure\"\nIt's probably some problem with the syntax that I'm not getting. Can someone help me?</p>\n"}, {"tags": ["c", "binary", "char", "unsigned", "alu"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1526470267, "post_id": 50369727, "comment_id": 87755293, "body": "I&#39;m sorry, but I don&#39;t believe you when you say that <code>bin8_1</code> and <code>bin8_2</code> are <code>unsigned char</code>.  Show me.  The compiler is telling you they&#39;re <code>unsigned char *</code>."}, {"owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "edited": false, "score": 4, "creation_date": 1526470371, "post_id": 50369727, "comment_id": 87755367, "body": "How about posting a <a href=\"https://stackoverflow.com/help/mcve\">MVCE</a>? Show the declarations for <code>bin8_1</code> and <code>bin8_2</code>."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1526470378, "post_id": 50369727, "comment_id": 87755380, "body": "In your <a href=\"https://stackoverflow.com/questions/50367681/converting-a-decimal-to-a-16-bit-binary-using-unsigned-char-and-without-string\">previous question</a>, you were asked not to convert the numbers to a string in the comments. Why are you still using <code>unsigned char*</code> ?"}, {"owner": {"reputation": 3, "user_id": 9799291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GPvH.png?s=128&g=1", "display_name": "wait what", "link": "https://stackoverflow.com/users/9799291/wait-what"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1526470383, "post_id": 50369727, "comment_id": 87755386, "body": "@SteveSummit here <a href=\"https://imgur.com/a/LrjqrGz\" rel=\"nofollow noreferrer\">imgur.com/a/LrjqrGz</a>"}, {"owner": {"reputation": 3, "user_id": 9799291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GPvH.png?s=128&g=1", "display_name": "wait what", "link": "https://stackoverflow.com/users/9799291/wait-what"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526470494, "post_id": 50369727, "comment_id": 87755468, "body": "@AjayBrahmakshatriya because it&#39;s what the paper told me to do. I just followed the instructions. Here look <a href=\"https://imgur.com/a/JuLpQZt\" rel=\"nofollow noreferrer\">imgur.com/a/JuLpQZt</a>"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1526470498, "post_id": 50369727, "comment_id": 87755473, "body": "@DeanzTinio Two hints: (1) C is not a language to learn by trial and error -- you really need to work through a tutorial on some of the basics first.  (I can offer you <a href=\"https://www.eskimo.com/~scs/cclass/cclass.html\" rel=\"nofollow noreferrer\">mine</a>.)  (2) You&#39;ll get better help here on SO if you paste properly-formatted code right into question rather than posting image links, because many people won&#39;t bother to chase those."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1526470533, "post_id": 50369727, "comment_id": 87755499, "body": "@DeanzTinio show your code <i>here</i> by <a href=\"https://stackoverflow.com/posts/50369727/edit\">edit</a>ing your question."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526470556, "post_id": 50369727, "comment_id": 87755517, "body": "@DeanzTinio where does your question sheet ask you to use <code>unsigned char*</code> ? It asks you to use <code>unsigned char</code>."}, {"owner": {"reputation": 3, "user_id": 9799291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GPvH.png?s=128&g=1", "display_name": "wait what", "link": "https://stackoverflow.com/users/9799291/wait-what"}, "edited": false, "score": 0, "creation_date": 1526470687, "post_id": 50369727, "comment_id": 87755616, "body": "I will be posting a new question with complete code."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1526470722, "post_id": 50369727, "comment_id": 87755642, "body": "@DeanzTinio dont post a new question, but <a href=\"https://stackoverflow.com/posts/50369727/edit\">edit</a> this one."}, {"owner": {"reputation": 3, "user_id": 9799291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GPvH.png?s=128&g=1", "display_name": "wait what", "link": "https://stackoverflow.com/users/9799291/wait-what"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1526471020, "post_id": 50369727, "comment_id": 87755841, "body": "Okay sorry. Check my post again @MichaelWalz"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1526472110, "post_id": 50369727, "comment_id": 87756612, "body": "<code>bin8_1</code> and <code>bin8_2</code> should be <code>unsigned char</code>. You are declaring them as <i>array</i> of <code>unsigned char</code>. Forget about array of chars and/or strings for your problem."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1526474157, "post_id": 50369727, "comment_id": 87758035, "body": "@DeanzTinio One more hint: One of the most important skills in programming is <i>attention to detail</i>.  In C, there&#39;s an enormous difference between types (1) <code>unsigned char</code>, (2) <code>unsigned char *</code> (pointer to unsigned char), and (3) <code>unsigned char []</code> (array of unsigned char).  In your original question you insisted your variables were <code>unsigned char</code>, but your compiler told you otherwise, and then when Ajay asked you why you were using <code>unsigned char *</code>, you said it was because you had to (even though that contradicted what you&#39;d said earlier).  Be careful with this stuff!  Details matter!"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9696471, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zzJ5Ko0B1u8/AAAAAAAAAAI/AAAAAAAAABQ/ggiVTFpIqDw/photo.jpg?sz=128", "display_name": "Ika", "link": "https://stackoverflow.com/users/9696471/ika"}, "is_accepted": false, "score": 1, "last_activity_date": 1526484134, "last_edit_date": 1526484134, "creation_date": 1526471028, "answer_id": 50370052, "question_id": 50369727, "link": "https://stackoverflow.com/questions/50369727/how-to-add-binary-that-is-unsigned-char-type-in-c/50370052#50370052", "title": "How to add binary that is unsigned char type in C?", "body": "<p>You declared <code>bin8_1</code> and <code>bin8_2</code> as <code>unsigned char bin8_#[]</code>.<br>\nThis means it's an array of <code>unsigned char</code>.</p>\n\n<p>You're then comparing this array to an <code>int</code>. Try with a simple <code>unsigned char</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 9799291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GPvH.png?s=128&g=1", "display_name": "wait what", "link": "https://stackoverflow.com/users/9799291/wait-what"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1526484134, "creation_date": 1526470091, "last_edit_date": 1526470992, "question_id": 50369727, "link": "https://stackoverflow.com/questions/50369727/how-to-add-binary-that-is-unsigned-char-type-in-c", "title": "How to add binary that is unsigned char type in C?", "body": "<p>Here is the sheet that I need to follow <a href=\"https://imgur.com/a/JuLpQZt\" rel=\"nofollow noreferrer\">https://imgur.com/a/JuLpQZt</a></p>\n\n<p>Here is my code as of now</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;windows.h&gt;\n\nvoid arithmetic();\nint ALU(unsigned char operand1, unsigned char operand2, unsigned char control_signals);\nint askOperand1();\nint askOperand2();\nunsigned char operand1;\nunsigned char operand2; \nunsigned char control_signals;\nconst int ACC = 16; //ACC = ACCUMULATOR\n\nint main()\n{\n\n    for(;;)\n    {\n        system(\"cls\");\n        ALU(operand2,operand2,control_signals);\n    }\n    getch();\n    return 0;\n}\n\nint ALU(unsigned char operand1, unsigned char operand2, unsigned char control_signals)\n{\n    operand1=askOperand1();\n    operand2=askOperand2();\n\n    int pos1,pos2;\n    unsigned char bin8_1[]  = \"00000000\";\n    unsigned char bin8_2[]  = \"00000000\";\n\n    /*OPERAND 1*/\n    for (pos1 = 8; pos1 &gt;= 0; --pos1)\n    {\n        if (operand1 % 2) \n        bin8_1[pos1] = '1';\n        operand1 /= 2;\n    }\n    printf(\"\\n\\nBinary Equivalence of Operand 1: %s\",bin8_1);\n\n    /*OPERAND 2*/\n    for (pos2 = 8; pos2 &gt;= 0; --pos2)\n    {\n        if (operand2 % 2) \n        bin8_2[pos2] = '1';\n        operand2 /= 2;\n    }\n    printf(\"\\n\\nBinary Equivalence of Operand 2: %s\",bin8_2);\n\n\n    /*ARITHMETIC FUNCTIONS*/\n    int option, remainder = 0, sum[ACC], k;\n    arithmetic();\n    scanf(\"%d\",&amp;option);\n    switch(option)\n    {\n        case 1: //ADDITION\n             while (bin8_1 != 0 || bin8_2 != 0)\n            {\n                sum[k++] =(bin8_1 % 10 + bin8_2 % 10 + remainder) % 2;\n                remainder =(bin8_1 % 10 + bin8_2 % 10 + remainder) / 2;\n                bin8_1 = bin8_1 / 10;\n                bin8_2 = bin8_2 / 10;\n            }\n            if (remainder != 0)\n            sum[k++] = remainder;\n            --k;\n            printf(\"Sum of two binary numbers: \");\n            while (k &gt;= 0)\n            printf(\"%d\", sum[k--]);\n            break;\n        case 2: //SUBTRACTION VIA 2'S COMPLEMENT\n            break;\n        case 3: //MULTIPLICATION\n            break;\n        case 4: //DIVISION\n            break;\n    }\n\n}\nint askOperand1()\n{\n    int ask1;\n    printf(\"\\n\\nEnter Operand 1(in decimal): \");\n    scanf(\"%d\",&amp;ask1);\n    if(ask1&gt;255)\n    {\n        printf(\"\\n\\nINVALID! 0-255 ONLY! TRY AGAIN. EXITTING PROGRAM!\");\n        getch();\n        exit(1);\n    }\n    return ask1;\n}\nint askOperand2()\n{\n    int ask2;\n    printf(\"\\nEnter Operand 2(in decimal): \");\n    scanf(\"%d\",&amp;ask2);\n    if(ask2&gt;255)\n    {\n        printf(\"\\n\\nINVALID! 0-255 ONLY! TRY AGAIN. EXITTING PROGRAM!\");\n        getch();\n        exit(1);\n    }\n    return ask2;\n}\nvoid arithmetic()\n{\n    printf(\"\\n\\n\");\n    printf(\"[1] ADDITION\\n\");\n    printf(\"[2] SUBTRACTION\\n\");\n    printf(\"[3] MULTIPLICATION\\n\");\n    printf(\"[4] DIVISION\\n\");\n    printf(\"\\nOption: \");\n}\n</code></pre>\n\n<p>Input has to be in decimal from 0-255 only. And then it will be converted to binary. That two binaries will be added and then print out a 16 bit output. I also don't know anything about control_signals variable and I can't ask my teacher about it because he's away for 1 week. </p>\n"}, {"tags": ["c", "linux", "gstreamer", "glib"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1526467873, "post_id": 50368884, "comment_id": 87753783, "body": "Please note that <code>printf</code> is not a <a href=\"http://man7.org/linux/man-pages/man7/signal-safety.7.html\" rel=\"nofollow noreferrer\">signal-safe</a> function to call."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1526469444, "post_id": 50368884, "comment_id": 87754794, "body": "Not only <code>printf()</code>, but also all of of <code>gst_element_post_message()</code>, <code>gst_message_new_application()</code>, or <code>gst_structure_new()</code> are quite likely very, very, very async-signal-<b>unsafe</b>, meaning you&#39;re deep into undefined behavior."}, {"owner": {"reputation": 101, "user_id": 7001195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c72c738dca17a4b3bea5b06bf89ffda9?s=128&d=identicon&r=PG&f=1", "display_name": "Kumsaati", "link": "https://stackoverflow.com/users/7001195/kumsaati"}, "edited": false, "score": 1, "creation_date": 1526470757, "post_id": 50368884, "comment_id": 87755668, "body": "May I ask then why the gst-launch-1.0 which is included in gstreamer library uses the gst_element_post_message for this? I am not experienced in signal handling and I&#39;m genuinely curious why they used it what should be used"}, {"owner": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "edited": false, "score": 1, "creation_date": 1526510219, "post_id": 50368884, "comment_id": 87777895, "body": "Signal handlers installed with <code>g_unix_signal_add()</code> are <i>not</i> libc signal handlers, so you don\u2019t need to worry about only using async-signal-safe functions in them. Very roughly, the way <code>g_unix_signal_add()</code> works is to install a libc signal handler which sets a flag, and that flag is picked up in the next iteration of the <code>GMainContext</code>, and <i>that</i> is when your callback function is invoked."}, {"owner": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "edited": false, "score": 0, "creation_date": 1526510256, "post_id": 50368884, "comment_id": 87777904, "body": "So I suspect this isn\u2019t working because you aren\u2019t running a <code>GMainLoop</code> (or, equivalently, iterating a <code>GMainContext</code>). Is that the case?"}, {"owner": {"reputation": 101, "user_id": 7001195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c72c738dca17a4b3bea5b06bf89ffda9?s=128&d=identicon&r=PG&f=1", "display_name": "Kumsaati", "link": "https://stackoverflow.com/users/7001195/kumsaati"}, "reply_to_user": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "edited": false, "score": 0, "creation_date": 1526541359, "post_id": 50368884, "comment_id": 87786536, "body": "@PhilipWithnall No, I&#39;m not. I&#39;m listening to the gstreamer bus for messages, but I know through Gstreamer Debug that nothing is posted on the bus, although it wakes up after SIGINT.  gst-launch does not use GMainLoop either, but has an eventloop function where it adds the signal handler. It also uses a different function to get the messages (gst_bus_poll instead of gst_bus_timed_pop)."}, {"owner": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "edited": false, "score": 0, "creation_date": 1526549398, "post_id": 50368884, "comment_id": 87791515, "body": "<code>gst_bus_poll()</code> is documented as running a main loop on the default <code>GMainContext</code> while it\u2019s polling. Why are you using <code>gst_bus_timed_pop()</code> instead of <code>gst_bus_poll()</code>?"}, {"owner": {"reputation": 101, "user_id": 7001195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c72c738dca17a4b3bea5b06bf89ffda9?s=128&d=identicon&r=PG&f=1", "display_name": "Kumsaati", "link": "https://stackoverflow.com/users/7001195/kumsaati"}, "reply_to_user": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "edited": false, "score": 0, "creation_date": 1526551773, "post_id": 50368884, "comment_id": 87793088, "body": "@PhilipWithnall Because it literally says &quot;You should never use this function, since it is pure evil&quot; in the GstBus documentation."}, {"owner": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "edited": false, "score": 0, "creation_date": 1526555564, "post_id": 50368884, "comment_id": 87795439, "body": "I missed that bit (I\u2019m a GLib expert, not a GStreamer expert). My original answer still stands: in order to use <code>g_unix_signal_add()</code>, you need a main loop to be running. If you don\u2019t have a main loop running, you won\u2019t get signal callbacks."}, {"owner": {"reputation": 101, "user_id": 7001195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c72c738dca17a4b3bea5b06bf89ffda9?s=128&d=identicon&r=PG&f=1", "display_name": "Kumsaati", "link": "https://stackoverflow.com/users/7001195/kumsaati"}, "reply_to_user": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "edited": false, "score": 0, "creation_date": 1526559212, "post_id": 50368884, "comment_id": 87797813, "body": "@PhilipWithnall Ok, I understand now. I managed to it by adding a main loop. Will add an answer now. Thank you a lot for your help."}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 7001195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c72c738dca17a4b3bea5b06bf89ffda9?s=128&d=identicon&r=PG&f=1", "display_name": "Kumsaati", "link": "https://stackoverflow.com/users/7001195/kumsaati"}, "is_accepted": true, "score": 3, "last_activity_date": 1526559735, "creation_date": 1526559735, "answer_id": 50391376, "question_id": 50368884, "link": "https://stackoverflow.com/questions/50368884/interrupt-handle-is-not-called-after-added-with-g-unix-signal-add/50391376#50391376", "title": "Interrupt handle is not called after added with g_unix_signal_add", "body": "<p>As Philip's comments suggested, the problem was that I wasn't running a main loop and using gst_bus_timed_pop() to get the messages from the bus. By using a GMainLoop and adding a bus watcher(using gst_bus_add_watch) with a bus callback function, I managed to catch the interrupt as I wanted to.</p>\n"}], "owner": {"reputation": 101, "user_id": 7001195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c72c738dca17a4b3bea5b06bf89ffda9?s=128&d=identicon&r=PG&f=1", "display_name": "Kumsaati", "link": "https://stackoverflow.com/users/7001195/kumsaati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 3, "accepted_answer_id": 50391376, "answer_count": 1, "score": 3, "last_activity_date": 1526559735, "creation_date": 1526467695, "question_id": 50368884, "link": "https://stackoverflow.com/questions/50368884/interrupt-handle-is-not-called-after-added-with-g-unix-signal-add", "title": "Interrupt handle is not called after added with g_unix_signal_add", "body": "<p>I am learning about gstreamer and I have a simple program where I want to end a stream gracefully after pressing CTRL+C in Linux. For this, I've read the source code for gst-launch and saw that g_unix_signal_add() is used for adding the signals. In my code I've added the line:</p>\n\n<pre><code>signal_watch_intr_id = g_unix_signal_add (SIGINT,\n                       (GSourceFunc) intr_handler, data.pipeline);\n</code></pre>\n\n<p>where data is a structure containing the pipeline. My handling function is:</p>\n\n<pre><code>static gboolean\nintr_handler (gpointer user_data)\n{\n  printf(\"handling interrupt.\\n\");\n  GstElement *pipeline = (GstElement *) user_data;\n\n\n  /* post an application specific message */\n  gst_element_post_message (GST_ELEMENT (pipeline),\n      gst_message_new_application (GST_OBJECT (pipeline),\n          gst_structure_new (\"GstLaunchInterrupt\",\n              \"message\", G_TYPE_STRING, \"Pipeline interrupted\", NULL)));\n\n  /* remove signal handler */\n  signal_watch_intr_id = 0;\n  return G_SOURCE_REMOVE;\n}\n</code></pre>\n\n<p>I expect it to print \"handling interrupt.\" to the console, make the pipeline send a GST_MESSAGE_APPLICATION type message which then will be handled to stop the pipeline. However, the application simply does nothing after a SIGINT now. Because it does NOTHING, I know it changes the default handle, but I don't understand why it does not call the handling function. Can someone help me do this handling?</p>\n"}, {"tags": ["c", "sockets", "ssl"], "comments": [{"owner": {"reputation": 411, "user_id": 2783603, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/nMsat.jpg?s=128&g=1", "display_name": "Gabson", "link": "https://stackoverflow.com/users/2783603/gabson"}, "edited": false, "score": 2, "creation_date": 1526467884, "post_id": 50368707, "comment_id": 87753792, "body": "including C file into another file is legal, but not advisable thing to do. Why do you want to do so ? You need to compile them together instead of including it"}, {"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 0, "creation_date": 1526468983, "post_id": 50368707, "comment_id": 87754507, "body": "You would only need it on windows if you load openssl dll, if you are not on windows you can remove that include"}, {"owner": {"reputation": 107, "user_id": 9046942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b5eea38564140c63551de5b568944ce?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Coll", "link": "https://stackoverflow.com/users/9046942/roger-coll"}, "reply_to_user": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 0, "creation_date": 1526469016, "post_id": 50368707, "comment_id": 87754526, "body": "@Pras it does not compile without it"}, {"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 1, "creation_date": 1526469296, "post_id": 50368707, "comment_id": 87754705, "body": "What error do you get if you remove it"}], "answers": [{"tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 1, "last_activity_date": 1526475624, "last_edit_date": 1526475624, "creation_date": 1526467965, "answer_id": 50368987, "question_id": 50368707, "link": "https://stackoverflow.com/questions/50368707/how-to-compile-or-link-a-c-file-included-as-a-header/50368987#50368987", "title": "How to compile or link a .c file included as a header?", "body": "<blockquote>\n  <p>Can .c file be included from the header?</p>\n</blockquote>\n\n<p>Yes. All that <code>include</code> does is to take a file and paste its content instead of the <code>include</code> statement. Depending on who you ask it could be bad design, but it is perfectly valid.</p>\n"}], "owner": {"reputation": 107, "user_id": 9046942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b5eea38564140c63551de5b568944ce?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Coll", "link": "https://stackoverflow.com/users/9046942/roger-coll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1526475624, "creation_date": 1526467219, "last_edit_date": 1526468981, "question_id": 50368707, "link": "https://stackoverflow.com/questions/50368707/how-to-compile-or-link-a-c-file-included-as-a-header", "title": "How to compile or link a .c file included as a header?", "body": "<p>I am trying to make an SSL socket. I have done some research and I found this answer in stackoverflow too:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7698488/turn-a-simple-socket-into-an-ssl-socket\">Turn a simple socket into an SSL socket</a></p>\n\n<p>I created a C file and I include the same headers:</p>\n\n<pre><code>#include &lt;openssl/applink.c&gt;\n#include &lt;openssl/bio.h&gt;\n#include &lt;openssl/ssl.h&gt;\n#include &lt;openssl/err.h&gt;\n</code></pre>\n\n<p>But when I try to compile it, it makes this error:</p>\n\n<pre><code>socketMng.c:12:10: fatal error: openssl/applink.c: No such file or directory\n #include &lt;openssl/applink.c&gt;\n</code></pre>\n\n<p>I can't find that file in <code>/usr/include/openssl/</code>. \nI find that file in a folder named mn... I also included using quotation marks instead of &lt;> from that folder but does not work.</p>\n\n<p>Can .c included form the header? (I have never seen it)\nHow can I solve it?</p>\n\n<p>I already have <code>libssl-dev</code> installed.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "pointers", "arguments"], "comments": [{"owner": {"reputation": 609, "user_id": 7690030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11846ade17a8760f2501ab72fcc1f37?s=128&d=identicon&r=PG", "display_name": "Martin Chekurov", "link": "https://stackoverflow.com/users/7690030/martin-chekurov"}, "edited": false, "score": 0, "creation_date": 1526467021, "post_id": 50368518, "comment_id": 87753198, "body": "show the whole code for <code>Luhn_check</code>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 2, "creation_date": 1526467047, "post_id": 50368518, "comment_id": 87753218, "body": "An expression like <code>a&lt;=x&lt;b</code> is not what you want. You need to write it as <code>a&lt;=x &amp;&amp; x&lt;b</code>."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526467290, "post_id": 50368518, "comment_id": 87753384, "body": "<code>credit_card_status = credit_card_status(credit_card_number)</code> -- do you see that you are repeating names? And that is precisely where the error is."}, {"owner": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "edited": false, "score": 0, "creation_date": 1526467308, "post_id": 50368518, "comment_id": 87753395, "body": "better use also an &#39;else&#39; statement not only &#39;else if&#39; otherwise credit_card_status could be undefined."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526467368, "post_id": 50368518, "comment_id": 87753431, "body": "<code>credit_card_status = American Express</code> -- what is this even supposed to mean?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1526467382, "post_id": 50368518, "comment_id": 87753440, "body": "Also for long int literals use the correct suffix otherwise it will not work."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526467499, "post_id": 50368518, "comment_id": 87753529, "body": "For questions related to <i>cs50</i> try <a href=\"https://cs50.stackexchange.com/\">cs50.stackexchange.com</a>"}, {"owner": {"reputation": 11, "user_id": 9354576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/157a12bef716267039c97bd24163c877?s=128&d=identicon&r=PG&f=1", "display_name": "Gauthier Delvaulx", "link": "https://stackoverflow.com/users/9354576/gauthier-delvaulx"}, "edited": false, "score": 0, "creation_date": 1526468420, "post_id": 50368518, "comment_id": 87754132, "body": "I edited my message to show you everything. The Luhn_check is working. In fact, everything was working before I tried to implement the credit_card_status. It was formerly named get_credit_card_status but I got errors and thought that I had to modify the name."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9354576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/157a12bef716267039c97bd24163c877?s=128&d=identicon&r=PG&f=1", "display_name": "Gauthier Delvaulx", "link": "https://stackoverflow.com/users/9354576/gauthier-delvaulx"}, "edited": false, "score": 0, "creation_date": 1526476142, "post_id": 50368743, "comment_id": 87759470, "body": "In the original post, you can see that the solution to the bolean problem already got partially implemented. The first part of your answer don&#39;t get any way to solve my problem."}], "tags": [], "owner": {"reputation": 199084, "user_id": 56338, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92fb4563ddc5ceeaa8b19b60a7a172f4?s=128&d=identicon&r=PG", "display_name": "sth", "link": "https://stackoverflow.com/users/56338/sth"}, "is_accepted": false, "score": 2, "last_activity_date": 1526467335, "creation_date": 1526467335, "answer_id": 50368743, "question_id": 50368518, "link": "https://stackoverflow.com/questions/50368518/cannot-print-returned-value-in-c/50368743#50368743", "title": "Cannot print returned value in C", "body": "<pre><code>credit_card_status = credit_card_status(credit_card_number)\n</code></pre>\n\n<p>You try to use the same name, <code>credit_card_status</code>, for two different things. If the function is called <code>credit_card_status</code> don't store it's return value in <code>credit_card_status</code>, because that's the function and not a variable. This leads to the error that <code>credit_card_status</code> is not assignable.</p>\n\n<blockquote>\n  <p>error: comparison of constant 350000000000000 with boolean expression is always true</p>\n</blockquote>\n\n<p>There is no \"twoway\" comparison <code>a &lt;= x &lt; b</code> in C, you have to use two separate comparisons: <code>a &lt;= x &amp;&amp; x &lt; b</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 9354576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/157a12bef716267039c97bd24163c877?s=128&d=identicon&r=PG&f=1", "display_name": "Gauthier Delvaulx", "link": "https://stackoverflow.com/users/9354576/gauthier-delvaulx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1530459330, "creation_date": 1526466668, "last_edit_date": 1530459330, "question_id": 50368518, "link": "https://stackoverflow.com/questions/50368518/cannot-print-returned-value-in-c", "title": "Cannot print returned value in C", "body": "<p>I ran compile this:</p>\n\n<pre><code>char get_credit_card_status(long long credit_card_number, char Luhn_validity)//, char credit_card_status)\n{\n    char credit_card_status = 0;\n    if (((credit_card_number &lt; 350000000000000) &amp;&amp; (340000000000000 &lt;=credit_card_number)) &amp;&amp; (Luhn_validity=1))\n    {\n        credit_card_status = 1;\n        printf(\"1 test\\n\");\n    }\n    else if ((5100000000000000&lt;= credit_card_number) &amp;&amp; (credit_card_number &lt; 5500000000000000) &amp;&amp; Luhn_validity)\n    {\n        credit_card_status = 2;\n        printf(\"2 test\\n\");\n    }\n    else if ((((4000000000000&lt;= credit_card_number)&amp;&amp;(credit_card_number&lt;5000000000000)) || ((4000000000000000&lt;=credit_card_number)&amp;&amp;(credit_card_number&lt;5000000000000000))) &amp;&amp; Luhn_validity)\n    {\n        credit_card_status= 3;\n        printf(\"3 test\\n\");\n    }\n    return credit_card_status;\n}\n\nint length_ccn(long long credit_card_number)\n{\n    int length = 0;\n    while (credit_card_number &gt; 0)\n    {\n        length++;\n        credit_card_number /= 10 ;\n    }\n    return length;\n}\n\nchar Luhn_check(long long credit_card_number)\n{\n    int total_even_numbers = 0;\n    int total_odd_numbers = 0;\n    int even_number = 0;\n    int odd_number = 0;\n    int Luhn_sum = 0;\n    char Luhn_validity = 0;\n    long long check_digit_basis = credit_card_number;\n    for(int i =1 ; check_digit_basis &gt; 0 ; i++)\n    {\n        if ((i % 2) &gt; 0)\n        {\n            odd_number = (check_digit_basis % 10);\n            total_odd_numbers = total_odd_numbers + odd_number;\n        }\n        else\n        {\n            even_number = (check_digit_basis % 10);\n            if(even_number &gt;= 5)\n            {\n                total_even_numbers = total_even_numbers + ((( 2 * even_number) % 10) + 1 );\n            }\n            else\n            {\n                total_even_numbers = total_even_numbers + (2 * even_number);\n            }\n        }\n        check_digit_basis = (check_digit_basis / 10);\n\n    }\n    Luhn_sum = total_even_numbers + total_odd_numbers;\n    if ((Luhn_sum % 10 ) == 0 )\n    {\n        Luhn_validity = 1;\n    }\n    else\n    {\n        Luhn_validity = 0;\n        printf(\"%c for Luhn_validity\\n\", Luhn_validity);\n    }\n    printf(\"%d for Luhn_validity\\n\", Luhn_validity);\n    return Luhn_validity;\n}\n\n\n\nint main(void)\n{\n    printf(\"Provide your credit card number:\\n\");\n    long long credit_card_number = get_long_long();\n    int length = length_ccn(credit_card_number);\n    printf(\"%i for length\\n\", length);\n    char Luhn_validity = Luhn_check(credit_card_number);\n    printf(\"%c returned from line 119\\n\", Luhn_validity);\n    char credit_card_status;\n    credit_card_status = get_credit_card_status(credit_card_number, Luhn_validity);\n    switch (credit_card_status)\n    {\n        case 1:\n        printf(\"American Express\\n\");\n        break;\n\n        case 2:\n        printf(\"MasterCard\\n\");\n        break;\n\n        case 3:\n        printf(\"Visa\\n\");\n        break;\n\n        default:\n        printf(\"INVALID\\n\");\n    }\n}\n</code></pre>\n\n<p>I got:</p>\n\n<pre><code>15 for length\n1 for Luhn_validity\n returned from line 119\n</code></pre>\n\n<p>The value of <code>Length</code> is returned to the main function while <code>Luhn_validity</code> isn't. Why?</p>\n\n<p>I cannot make another post because someone posted an incomplete answer only answering to what I already began to implement (see the post before its edits and you'll see that the boolean problem was being corrected and wasn't in the post's title).</p>\n"}, {"tags": ["c", "unsigned", "16-bit", "accumulator", "alu"], "comments": [{"owner": {"reputation": 2875, "user_id": 3791827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JKSdx.jpg?s=128&g=1", "display_name": "ACascarino", "link": "https://stackoverflow.com/users/3791827/acascarino"}, "edited": false, "score": 3, "creation_date": 1526464564, "post_id": 50367681, "comment_id": 87751599, "body": "What do you mean by &quot;works&quot; and &quot;does not work&quot;? What errors do you get, if any?"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1526464626, "post_id": 50367681, "comment_id": 87751644, "body": "Please explain what you want to do, what your input, output and expected output is."}, {"owner": {"reputation": 1052, "user_id": 3698648, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/199b49d13342baa233c08aac5793ed4d?s=128&d=identicon&r=PG&f=1", "display_name": "ntshetty", "link": "https://stackoverflow.com/users/3698648/ntshetty"}, "edited": false, "score": 1, "creation_date": 1526464638, "post_id": 50367681, "comment_id": 87751654, "body": "<code>bin16_[]</code> is allocates 16 bytes but you try to assign 17bytes inside <code>for loop</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 5, "creation_date": 1526464766, "post_id": 50367681, "comment_id": 87751746, "body": "<code>&quot;%d&quot;,&amp;operand1</code> invokes undefined behavior and that&#39;s all there&#39;s to it. Use correct format specifiers."}, {"owner": {"reputation": 3, "user_id": 9799291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GPvH.png?s=128&g=1", "display_name": "wait what", "link": "https://stackoverflow.com/users/9799291/wait-what"}, "edited": false, "score": 0, "creation_date": 1526464908, "post_id": 50367681, "comment_id": 87751834, "body": "I&#39;ve edited my question. I&#39;m sorry for the mistakes."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1526465314, "post_id": 50367681, "comment_id": 87752121, "body": "<code>If I input 4096 or 512 or 65536 as decimal, the output will be 0000 0000 0000 00000 which is wrong.</code> You can not store this values in an unsigned char variable."}, {"owner": {"reputation": 3, "user_id": 9799291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GPvH.png?s=128&g=1", "display_name": "wait what", "link": "https://stackoverflow.com/users/9799291/wait-what"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1526465448, "post_id": 50367681, "comment_id": 87752193, "body": "@Osiris so what do I need to do in order to convert decimal to 16 bit binary without changing unsigned char operand 1?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1526465564, "post_id": 50367681, "comment_id": 87752261, "body": "@DeanzTinio it is not clear to me what you want to do. The numbers are always stored in binary form in computers. And why dont you want to change type of operand1? If it is unsigned char it has 8 bits (most of the time) and therefore you can only store numbers of 0 to 255."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526465735, "post_id": 50367681, "comment_id": 87752367, "body": "The more fundamental question is why are you asking user input on <code>operand1</code> and <code>operand2</code> if they are being passed as arguments? The values being passed will be erased and the new values will be stored."}, {"owner": {"reputation": 3, "user_id": 9799291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GPvH.png?s=128&g=1", "display_name": "wait what", "link": "https://stackoverflow.com/users/9799291/wait-what"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1526465796, "post_id": 50367681, "comment_id": 87752406, "body": "@Osiris Let&#39;s say I input Operand 1(in decimal): 1 and input Operand 2: 1. Convert both of them into 16 bit binary. It would be 0000 0000 0000 0001 right? After that I will need the user to choose from addition subtraction multiplication division using that 16 bit binary."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1526465803, "post_id": 50367681, "comment_id": 87752407, "body": "Also, why does <code>operand2</code> exist?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1526465894, "post_id": 50367681, "comment_id": 87752465, "body": "@DeanzTinio Ok, but are you aware that operand1 and operand2 only have 8bit and therefore you can only input values of 0 to 255? Cause the numbers you mentioned what didnt work where all not representable with 8 bit."}, {"owner": {"reputation": 3, "user_id": 9799291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GPvH.png?s=128&g=1", "display_name": "wait what", "link": "https://stackoverflow.com/users/9799291/wait-what"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1526466143, "post_id": 50367681, "comment_id": 87752633, "body": "@Osiris i haven&#39;t thought of that. In our project it says we should use that function int ALU(unsigned char operand1, unsigned char operand2) and a accumulator of 16 bits. I&#39;m now confused"}, {"owner": {"reputation": 3, "user_id": 9799291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GPvH.png?s=128&g=1", "display_name": "wait what", "link": "https://stackoverflow.com/users/9799291/wait-what"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526466147, "post_id": 50367681, "comment_id": 87752636, "body": "@AjayBrahmakshatriya for the next process. ready my comment up top."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1526466189, "post_id": 50367681, "comment_id": 87752667, "body": "@DeanzTinio I think that you have two 8 bit operands and one 16bit output."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526466216, "post_id": 50367681, "comment_id": 87752685, "body": "@DeanzTinio if the operands are being <i>passed</i> to the <code>ALU</code> function, why are you using <code>scanf</code> again? Do you know how function calls work?"}, {"owner": {"reputation": 3, "user_id": 9799291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GPvH.png?s=128&g=1", "display_name": "wait what", "link": "https://stackoverflow.com/users/9799291/wait-what"}, "edited": false, "score": 0, "creation_date": 1526466524, "post_id": 50367681, "comment_id": 87752889, "body": "I&#39;m so confused about this work because our teacher didn&#39;t show up and he only gave us this and our deadline is one week. Do you think I&#39;m basically wrong from the start I just followed the instructions here <a href=\"https://imgur.com/a/JuLpQZt\" rel=\"nofollow noreferrer\">imgur.com/a/JuLpQZt</a> please check it out"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1526466751, "post_id": 50367681, "comment_id": 87753038, "body": "@DeanzTinio Here a hint: You dont need to manually convert the numbers to binary cause they are already in binary. You just need to use the &quot;normal&quot; addition for the operands."}, {"owner": {"reputation": 3, "user_id": 9799291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GPvH.png?s=128&g=1", "display_name": "wait what", "link": "https://stackoverflow.com/users/9799291/wait-what"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1526466973, "post_id": 50367681, "comment_id": 87753163, "body": "So I would ask the user to input a binary numer? @Osiris"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1526467047, "post_id": 50367681, "comment_id": 87753219, "body": "@DeanzTinio No if the user inputs for example 15 then the value is stored in your 8bit register as 00001111."}, {"owner": {"reputation": 3, "user_id": 9799291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GPvH.png?s=128&g=1", "display_name": "wait what", "link": "https://stackoverflow.com/users/9799291/wait-what"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1526467152, "post_id": 50367681, "comment_id": 87753295, "body": "Okay thank you so much! @Osiris"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526467473, "post_id": 50367681, "comment_id": 87753512, "body": "@DeanzTinio Reading your assignment, the code is expected to work with 8 bit integers (unsigned char). Meaning that the largest possible number you can have as input is 255. Keep the scanf part outside the function, scanf integers, check that they aren&#39;t larger than 255, then pass them to the function."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1526473485, "post_id": 50367681, "comment_id": 87757606, "body": "Welcome to Stack Overflow! It looks like you forgot to enable a good set of warnings.  For GCC, I recommend <code>-Wall -Wextra -Wwrite-strings</code> as a minimum; consider also <code>-Wpedantic -Warray-bounds</code> for identifying some other common mistakes."}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "edited": false, "score": 0, "creation_date": 1526476252, "post_id": 50367681, "comment_id": 87759553, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/50369727/how-to-add-binary-that-is-unsigned-char-type-in-c\">How to add binary that is unsigned char type in C?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526469080, "post_id": 50369130, "comment_id": 87754568, "body": "No, it certainly won&#39;t."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526469167, "post_id": 50369130, "comment_id": 87754629, "body": "@AjayBrahmakshatriya won&#39;t what?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526469201, "post_id": 50369130, "comment_id": 87754646, "body": "OP&#39;s code won&#39;t give the string in reverse."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526469298, "post_id": 50369130, "comment_id": 87754708, "body": "It &quot;wan&#39;t&quot; give any string."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1526485373, "post_id": 50369130, "comment_id": 87766370, "body": "@chux - right :)"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 1, "last_activity_date": 1526485403, "last_edit_date": 1526485403, "creation_date": 1526468429, "answer_id": 50369130, "question_id": 50367681, "link": "https://stackoverflow.com/questions/50367681/converting-a-decimal-to-a-16-bit-binary-using-unsigned-char-and-without-string/50369130#50369130", "title": "Converting a decimal to a 16 bit binary using unsigned char and without string", "body": "<pre><code>char *reverse(char *str)\n{\n    size_t len = strlen(str);\n\n    for (size_t pos = 0; pos &lt; len / 2; pos++)\n    {\n        char tmp = str[pos];\n\n        str[pos] = str[len - 1 - pos];\n        str[len - 1 - pos] = tmp;\n    }\n    return str;\n}\n\nchar *toBin(char *buff, uint16_t value, int pad)\n{\n    size_t nbits = 16;\n    char *work_buff = buff;\n    do\n    {\n        *work_buff++ = value &amp; 1 ? '1' : '0';\n        value &gt;&gt;= 1;\n        nbits--;\n    }while(value);\n    if (pad)\n    {\n        while (nbits--)\n        {\n            *work_buff++ = '0';\n        }\n    }\n    *work_buff = 0;\n    return reverse(buff);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526470942, "post_id": 50369953, "comment_id": 87755795, "body": "How does this answer the question in any way?"}, {"owner": {"reputation": 37, "user_id": 9758419, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9xX6x4rTGp4/AAAAAAAAAAI/AAAAAAAAArU/uijoZ4IJl68/photo.jpg?sz=128", "display_name": "Simlandir", "link": "https://stackoverflow.com/users/9758419/simlandir"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526471558, "post_id": 50369953, "comment_id": 87756197, "body": "This shows the proper way how to convert unsigned char operand into char array and also answers the question of the op why his solution didn&#39;t work? Conversion of the second operand looks exactly same. Just change the index within bin16_1."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526473559, "post_id": 50369953, "comment_id": 87757650, "body": "<code>&gt;&gt;</code> is the same as dividing by <code>2</code> and ` &amp; 1` is the same as ` % 2`. Take some examples and see for yourself."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526484896, "post_id": 50369953, "comment_id": 87766077, "body": "@AjayBrahmakshatriya Detail : Your <a href=\"https://stackoverflow.com/questions/50367681/converting-a-decimal-to-a-16-bit-binary-using-unsigned-char-and-without-string#comment87757650_50369953\">good comment</a> is correct with unsigned types. It does not apply correctly to  signed types. This answer is unspecific in <code>operand1</code> as <code>int</code>/integer or <code>unsigned char</code>."}], "tags": [], "owner": {"reputation": 37, "user_id": 9758419, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9xX6x4rTGp4/AAAAAAAAAAI/AAAAAAAAArU/uijoZ4IJl68/photo.jpg?sz=128", "display_name": "Simlandir", "link": "https://stackoverflow.com/users/9758419/simlandir"}, "is_accepted": false, "score": -1, "last_activity_date": 1526470731, "creation_date": 1526470731, "answer_id": 50369953, "question_id": 50367681, "link": "https://stackoverflow.com/questions/50367681/converting-a-decimal-to-a-16-bit-binary-using-unsigned-char-and-without-string/50369953#50369953", "title": "Converting a decimal to a 16 bit binary using unsigned char and without string", "body": "<p>Your solution does not work because you cannot perform such an operation on unsigned chars. Arithmetic applied by you is operating on numbers with the decimal base, but unsigned chars belong to base what is binary.</p>\n\n<p>So instead of checking modulo and dividing input by 2, you should have performed shift and a binary comparison between currently the most significant bit and the 1. Code below:</p>\n\n<p><strong>Proper solution:</strong></p>\n\n<pre><code>for( int i = 7; i &gt;= 0; i-- ) {\n    bin16_1[i] = (operand1 &gt;&gt; i) &amp; 1 ? 1 : 0;\n}\n</code></pre>\n\n<p><strong>Explanation:</strong></p>\n\n<p>With every iteration, the most significant bit is being read from the byte by shifting it and binary comparing with 1.</p>\n\n<p>For example, let's assume that input value is 128, what binary translates to 1000 0000. Shifting it by 7 will give 0000 0001, so it concludes that the most significant bit was 1. 0000 0001 &amp; 1 = 1. That's the first bit to print in the console. Next iterations will result in 0 ... 0.</p>\n"}], "owner": {"reputation": 3, "user_id": 9799291, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GPvH.png?s=128&g=1", "display_name": "wait what", "link": "https://stackoverflow.com/users/9799291/wait-what"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "closed_date": 1526737155, "answer_count": 2, "score": 0, "last_activity_date": 1526485403, "creation_date": 1526464421, "last_edit_date": 1526464857, "question_id": 50367681, "link": "https://stackoverflow.com/questions/50367681/converting-a-decimal-to-a-16-bit-binary-using-unsigned-char-and-without-string", "closed_reason": "Needs details or clarity", "title": "Converting a decimal to a 16 bit binary using unsigned char and without string", "body": "<p>My code works if I use operand 1 and operand 2 as integers. Using unsigned char operand 1 does not work. Can you help me?</p>\n\n<pre><code>int ALU(unsigned char operand1, unsigned char operand2)\n{\nprintf(\"Enter Operand 1(in decimal): \");\nscanf(\"%d\",&amp;operand1);\nprintf(\"\\nEnter Operand 2(in decimal): \");\nscanf(\"%d\",&amp;operand2);\n\nchar bin16_1[]  = \"0000000000000000\";\nint pos;\nfor (pos = 16; pos &gt;= 0; --pos)\n{\n    if (operand1 % 2) \n    bin16_1[pos] = '1';\n    operand1 /= 2;\n}\nprintf(\"\\n\\nBinary Equivalence of Operand 1: %s\",bin16_1);\n</code></pre>\n\n<p>If I input 4096 or 512 or 65536 as decimal, the output will be 0000 0000 0000 00000 which is wrong.</p>\n"}, {"tags": ["c", "decimal"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 3, "creation_date": 1526463710, "post_id": 50367278, "comment_id": 87750957, "body": "You cannot return specific amount of decimals, unless you are return a numeric <i>string</i>. You probably mean rounding, but be aware that floating point numbers are stored in binary, so rounding to specific number of decimal digits won&#39;t be possible for all numbers."}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1526464374, "post_id": 50367278, "comment_id": 87751460, "body": "It is not clear whether you need <i>rounding</i> or <i>formatting</i> or any of those. Please look up the difference, ask your teacher, clarify."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526465019, "post_id": 50367278, "comment_id": 87751906, "body": "There is no machine floating point number that precisely equals 3.4. Perhaps you want to clarify what exactly your assignment means."}, {"owner": {"reputation": 3, "user_id": 9115374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9508655e392e7aac1aa83a30bb697da?s=128&d=identicon&r=PG&f=1", "display_name": "Zusaetlich", "link": "https://stackoverflow.com/users/9115374/zusaetlich"}, "reply_to_user": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1526465376, "post_id": 50367278, "comment_id": 87752157, "body": "@moooeeeep I need formatting, not rounding."}, {"owner": {"reputation": 3, "user_id": 9115374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9508655e392e7aac1aa83a30bb697da?s=128&d=identicon&r=PG&f=1", "display_name": "Zusaetlich", "link": "https://stackoverflow.com/users/9115374/zusaetlich"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526465457, "post_id": 50367278, "comment_id": 87752200, "body": "@n.m. My assignment says the return value have only one digit after decimal point. For instance the example given in the assignment sheet was 50.0."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526467853, "post_id": 50367278, "comment_id": 87753768, "body": "If your assignment <b>says</b> &quot;only one digit after decimal point&quot;, in these or similar <b>words</b>,  then it is is not doable in this here universe, sorry. You can try to cheat the instructor and return a number which is approximately 3.3999999999999999112, which is the closest one to 3.4 you can get. If your assignment only <b>shows</b> one digit after decimal point, then you are inventing things."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9115374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9508655e392e7aac1aa83a30bb697da?s=128&d=identicon&r=PG&f=1", "display_name": "Zusaetlich", "link": "https://stackoverflow.com/users/9115374/zusaetlich"}, "edited": false, "score": 0, "creation_date": 1526464074, "post_id": 50367411, "comment_id": 87751200, "body": "Because I was asked by teacher in my C assignment. Will I use the statement you gave in return part?"}, {"owner": {"reputation": 2875, "user_id": 3791827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JKSdx.jpg?s=128&g=1", "display_name": "ACascarino", "link": "https://stackoverflow.com/users/3791827/acascarino"}, "reply_to_user": {"reputation": 3, "user_id": 9115374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9508655e392e7aac1aa83a30bb697da?s=128&d=identicon&r=PG&f=1", "display_name": "Zusaetlich", "link": "https://stackoverflow.com/users/9115374/zusaetlich"}, "edited": false, "score": 0, "creation_date": 1526464169, "post_id": 50367411, "comment_id": 87751286, "body": "What specifically does the assignment say? Does it say to <i>return</i> a value, or to <i>print</i> a value?"}, {"owner": {"reputation": 3, "user_id": 9115374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9508655e392e7aac1aa83a30bb697da?s=128&d=identicon&r=PG&f=1", "display_name": "Zusaetlich", "link": "https://stackoverflow.com/users/9115374/zusaetlich"}, "edited": false, "score": 0, "creation_date": 1526464344, "post_id": 50367411, "comment_id": 87751434, "body": "It says the answer should have 1 digit after decimal point and we are only allowed to write functions, they do the print part.  So if I understand correct, I have to return a value."}, {"owner": {"reputation": 2875, "user_id": 3791827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JKSdx.jpg?s=128&g=1", "display_name": "ACascarino", "link": "https://stackoverflow.com/users/3791827/acascarino"}, "reply_to_user": {"reputation": 3, "user_id": 9115374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9508655e392e7aac1aa83a30bb697da?s=128&d=identicon&r=PG&f=1", "display_name": "Zusaetlich", "link": "https://stackoverflow.com/users/9115374/zusaetlich"}, "edited": false, "score": 0, "creation_date": 1526464481, "post_id": 50367411, "comment_id": 87751547, "body": "Right, I see - in which case, Ian Abbott&#39;s solution should do what you need, and the most efficiently to boot."}], "tags": [], "owner": {"reputation": 2875, "user_id": 3791827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JKSdx.jpg?s=128&g=1", "display_name": "ACascarino", "link": "https://stackoverflow.com/users/3791827/acascarino"}, "is_accepted": false, "score": 2, "last_activity_date": 1526463720, "creation_date": 1526463720, "answer_id": 50367411, "question_id": 50367278, "link": "https://stackoverflow.com/questions/50367278/returning-a-specific-amount-of-decimals-in-c/50367411#50367411", "title": "Returning a specific amount of decimals in C", "body": "<p>Why?</p>\n\n<p>Precision only matters when displaying it to the user; until that point, surely you should use the highest degree of precision available?</p>\n\n<p>To format a float in something like a printf statement, use <code>%3.1f</code> - field width of 3, 1 number after the decimal point.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 9115374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9508655e392e7aac1aa83a30bb697da?s=128&d=identicon&r=PG&f=1", "display_name": "Zusaetlich", "link": "https://stackoverflow.com/users/9115374/zusaetlich"}, "edited": false, "score": 0, "creation_date": 1526465178, "post_id": 50367614, "comment_id": 87752016, "body": "I tried the code you gave but still it returns something like <i>A.B00000</i> . Thank you."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 3, "user_id": 9115374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9508655e392e7aac1aa83a30bb697da?s=128&d=identicon&r=PG&f=1", "display_name": "Zusaetlich", "link": "https://stackoverflow.com/users/9115374/zusaetlich"}, "edited": false, "score": 0, "creation_date": 1526466367, "post_id": 50367614, "comment_id": 87752793, "body": "@Zusaetlich but <code>A.B00000</code> is the same as <code>A.B</code>, isn&#39;t it?"}, {"owner": {"reputation": 2875, "user_id": 3791827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JKSdx.jpg?s=128&g=1", "display_name": "ACascarino", "link": "https://stackoverflow.com/users/3791827/acascarino"}, "edited": false, "score": 0, "creation_date": 1526467490, "post_id": 50367614, "comment_id": 87753522, "body": "There&#39;s no way in C to get a function to return specifically <code>A.B</code>; <code>A.B00000</code> is the closest you will get (and is exactly the same number anyway), unless you want to return a string rather than a float. Hell, you&#39;re not even returning <code>A.B00000</code>, you&#39;re returning a 32-bit value that is formatted as <code>A.B00000</code> on display"}], "tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": true, "score": 1, "last_activity_date": 1526464226, "creation_date": 1526464226, "answer_id": 50367614, "question_id": 50367278, "link": "https://stackoverflow.com/questions/50367278/returning-a-specific-amount-of-decimals-in-c/50367614#50367614", "title": "Returning a specific amount of decimals in C", "body": "<p>Since you are summing integers, you could multiply the average by 10 in the integer domain, and divide by 10 in the real domain.</p>\n\n<pre><code>double avg(int* grade, int len){\n    int i; int sum=0;\n\n    for(i=0;i&lt;len;i++){\n        sum+=grade[i];\n    }\n\n    return (sum * 10 / len) / 10.0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 99, "user_id": 2665825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/765a4fa4cc00ed63aa97573f7d3edbd7?s=128&d=identicon&r=PG", "display_name": "Ahmed Mokhtar", "link": "https://stackoverflow.com/users/2665825/ahmed-mokhtar"}, "is_accepted": false, "score": -1, "last_activity_date": 1526464588, "creation_date": 1526464588, "answer_id": 50367754, "question_id": 50367278, "link": "https://stackoverflow.com/questions/50367278/returning-a-specific-amount-of-decimals-in-c/50367754#50367754", "title": "Returning a specific amount of decimals in C", "body": "<p>To make things more dynamic, it is possible to do the following</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\ndouble trunc_dec(double number, unsigned char length) {\n    int mult = pow(10, length);\n    return trunc(number * mult) / mult;\n}\n\nint main() {\n    printf(\"%f\\n\", trunc_dec(15.234, 1));\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9115374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9508655e392e7aac1aa83a30bb697da?s=128&d=identicon&r=PG&f=1", "display_name": "Zusaetlich", "link": "https://stackoverflow.com/users/9115374/zusaetlich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 50367614, "answer_count": 3, "score": 0, "last_activity_date": 1526464588, "creation_date": 1526463379, "question_id": 50367278, "link": "https://stackoverflow.com/questions/50367278/returning-a-specific-amount-of-decimals-in-c", "title": "Returning a specific amount of decimals in C", "body": "<p>I am wondering how could I return a specific amount of decimals. My code is below and I want to return the value with only one decimal but I couldn't find the right syntax. (e.g x=3.465.. but I want to return x=3.4)</p>\n\n<pre><code>    double avg(int* grade, int len){\n    int i; float sum=0.0;\n\n    for(i=0;i&lt;len;i++){\n    sum+=*(grade+i);\n    }\n\n    return sum/len;\n    }\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers", "linked-list", "malloc"], "comments": [{"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 1, "creation_date": 1526462508, "post_id": 50366918, "comment_id": 87750093, "body": "you can&#39;t in an array all element are allocated together"}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 0, "creation_date": 1526488544, "post_id": 50366918, "comment_id": 87768174, "body": "Hi, I&#39;ve added a couple notes to my answer you may find useful about redirecting pointers into the moved array. May not be relevant."}, {"owner": {"reputation": 89, "user_id": 8836779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/izAZX.jpg?s=128&g=1", "display_name": "drh0use", "link": "https://stackoverflow.com/users/8836779/drh0use"}, "reply_to_user": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 0, "creation_date": 1526631911, "post_id": 50366918, "comment_id": 87829138, "body": "@Persixty thank you for the informations. They helped me a lot."}], "answers": [{"tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": true, "score": 2, "last_activity_date": 1526488472, "last_edit_date": 1526488472, "creation_date": 1526470484, "answer_id": 50369864, "question_id": 50366918, "link": "https://stackoverflow.com/questions/50366918/memory-allocation-for-just-one-element-of-array/50369864#50369864", "title": "Memory allocation for just one element of array", "body": "<p>I think you're saying you want to 'grow' an array one element at a time.</p>\n\n<p><code>realloc()</code> is an option in C for an array of integers(*).</p>\n\n<pre><code>size_t n=0;//Length of array.\nint* arr=NULL;\n\n//Some code...\n\n//Now we want to grow our array\n//This is probably in a loop or called in a function from a loop (not shown).\n++n;\nint* temp=realloc(arr,n*sizeof(int));\nif(temp==NULL){\n    free(arr);\n    return 1;//Error...\n}\narr=temp;\n\n//More code....\n\n//Now we're done with arr.\nfree(arr);\n</code></pre>\n\n<p>In the first pass <code>arr</code> is <code>NULL</code> and <code>realloc(NULL,..)</code> just acts like <code>malloc()</code>.\nBut in subsequent passes when <code>arr</code> is not <code>NULL</code> then <code>realloc</code> attempts to grow the array 'in place' (if memory is available at the end of it). If not, it attempts to allocate space elsewhere and then copies over the existing data and frees the old location.\nIf it can't reallocate, it does nothing and returns <code>NULL</code> so you are responsible for then freeing that space (<code>free(arr)</code>).</p>\n\n<p>NB: Always allocate the return of <code>realloc()</code> to a temporary variable (i.e. not the first argument).\nOtherwise if allocation fails you have leaked the existing memory.</p>\n\n<p><code>realloc</code> is a quick trick to reduce the amount of allocating and copying required to grow an array - the alternative.</p>\n\n<p>If that's not effective enough the normal model is to keep track of 'capacity' and 'length' something like this.</p>\n\n<pre><code> const size_t chunk=10;\n size_t cap=0;\n size_t n=0;\n int* arr=NULL;\n\n ++n;\n if(n&gt;cap){\n     cap+=chunk;\n     int* temp=realloc(arr,cap);\n     if(temp==NULL){\n         free(arr);\n         return 1;//Error\n     }\n }\n\n //Later...\n free(arr);\n</code></pre>\n\n<p>That has the advantage of you being able to tune how much 'spare' overhead you have to tune how often reallocation occurs. Another strategy is <code>cap=cap*2;</code> though obviously space tends to grow exponentially! A book could be written on strategies for this classic. It's often possible to allocate enough for most realistic cases in one hit but still handle exceptional cases.</p>\n\n<p>You also have the option allocate back down to recover free space if you know the array is now full-sized.</p>\n\n<p>In case it's not obvious, if the array is moved, any pointers to it or into it will have to be redirected. That's an argument for only indexing into it with <code>[.]</code>. You will need to keep hold of the old location until you do the redirection. <code>ptr=temp+(ptr-arr)</code> makes <code>ptr</code> point to the new location of the element <code>ptr</code> pointed to.</p>\n\n<p>This is standard approach found in Java <code>ArrayList</code> and most implementations of <code>std::vector&lt;&gt;</code>. It's an engineering compromise. The benefits of an array (O(1) random access by index) and a linked list (O(1) growth).</p>\n\n<p>It's asymptotically still linear but in practical cases provides great benefit. Computer Science is concerned with asymptotic rates and engineering with actual values in finite real cases.</p>\n\n<p>(*) The copy is a raw copy of memory. That's fine for <code>int</code> but complex structures 'struct' may not be copyable by what amounts to <code>memmove</code> or take further effort.</p>\n"}], "owner": {"reputation": 89, "user_id": 8836779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/izAZX.jpg?s=128&g=1", "display_name": "drh0use", "link": "https://stackoverflow.com/users/8836779/drh0use"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 493, "favorite_count": 1, "accepted_answer_id": 50369864, "answer_count": 1, "score": 1, "last_activity_date": 1526488472, "creation_date": 1526462424, "question_id": 50366918, "link": "https://stackoverflow.com/questions/50366918/memory-allocation-for-just-one-element-of-array", "title": "Memory allocation for just one element of array", "body": "<p>I can't determine the array size in run time, because it will have dependencies. So I need to do memory allocation for an element. Just like linked-lists I can say. </p>\n\n<p>How can I do that in integer arrays ? </p>\n"}, {"tags": ["php", "c"], "comments": [{"owner": {"reputation": 15039, "user_id": 4680018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/momag.jpg?s=128&g=1", "display_name": "iainn", "link": "https://stackoverflow.com/users/4680018/iainn"}, "edited": false, "score": 0, "creation_date": 1526460846, "post_id": 50366270, "comment_id": 87748914, "body": "Which headers are you including? You&#39;d normally pull in <code>php.h</code>, which in turn would grab <code>zend.h</code> and <code>zend_operators.h</code>, which is where this is declared"}, {"owner": {"reputation": 29, "user_id": 9477558, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kpXR4WGHf_8/AAAAAAAAAAI/AAAAAAAAAEM/vbHq7XgIZZ0/photo.jpg?sz=128", "display_name": "Anamul Hasan", "link": "https://stackoverflow.com/users/9477558/anamul-hasan"}, "reply_to_user": {"reputation": 15039, "user_id": 4680018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/momag.jpg?s=128&g=1", "display_name": "iainn", "link": "https://stackoverflow.com/users/4680018/iainn"}, "edited": false, "score": 0, "creation_date": 1526461293, "post_id": 50366270, "comment_id": 87749243, "body": "in a test.h file in wrote                                                                                                                                                                                    extern &quot;C&quot; { #include &quot;php.h&quot; }                                                                                                           in another .h file i included test.h file"}], "answers": [{"tags": [], "owner": {"reputation": 6188, "user_id": 7703564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2bc3387440ec2c075d16d2bb152a540?s=128&d=identicon&r=PG&f=1", "display_name": "Jodocus", "link": "https://stackoverflow.com/users/7703564/jodocus"}, "is_accepted": false, "score": 0, "last_activity_date": 1526460684, "creation_date": 1526460684, "answer_id": 50366342, "question_id": 50366270, "link": "https://stackoverflow.com/questions/50366270/extension-in-php-doesnt-work/50366342#50366342", "title": "Extension in php doesn&#39;t work", "body": "<p>According to the <a href=\"https://github.com/php/php-src/blob/master/Zend/zend_operators.h\" rel=\"nofollow noreferrer\">Git repository</a>, you may have to include <code>zend_operators.h</code>.</p>\n"}], "owner": {"reputation": 29, "user_id": 9477558, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kpXR4WGHf_8/AAAAAAAAAAI/AAAAAAAAAEM/vbHq7XgIZZ0/photo.jpg?sz=128", "display_name": "Anamul Hasan", "link": "https://stackoverflow.com/users/9477558/anamul-hasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526460713, "creation_date": 1526460491, "last_edit_date": 1526460713, "question_id": 50366270, "link": "https://stackoverflow.com/questions/50366270/extension-in-php-doesnt-work", "title": "Extension in php doesn&#39;t work", "body": "<p>For creating an extension in php 7.0 there is a line used zend_unwrap_reference</p>\n\n<pre><code>zend_unwrap_reference(&amp;retval);\n</code></pre>\n\n<p>when i am execution that file it gives an error like that:                </p>\n\n<blockquote>\n  <p>\u2018zend_unwrap_reference\u2019 was not declared in this scope</p>\n</blockquote>\n\n<p>. How can i solve this?</p>\n"}, {"tags": ["c", "point", "strcpy"], "comments": [{"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 1, "creation_date": 1526460092, "post_id": 50366120, "comment_id": 87748429, "body": "<code>return main();</code> This looks fishy. Your problem might be here: <code>char *name[NAME_LEN];</code>"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1526460328, "post_id": 50366120, "comment_id": 87748572, "body": "<code>char *name[NAME_LEN];</code> ==&gt; <code>char name[NAME_LEN];</code> perhaps"}, {"owner": {"reputation": 1, "user_id": 9798773, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rozwel Gustab", "link": "https://stackoverflow.com/users/9798773/rozwel-gustab"}, "edited": false, "score": 0, "creation_date": 1526460515, "post_id": 50366120, "comment_id": 87748684, "body": "Every body thank you so much. You saved my life and time. Really thank you so much."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1526460720, "post_id": 50366120, "comment_id": 87748831, "body": "Hint: indent your code and don&#39;t put a blank line between <i>every</i> line."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1526460800, "post_id": 50366120, "comment_id": 87748872, "body": "Also, next time you ask a question, please give some indication of the line on which the error occurred."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1526461111, "post_id": 50366120, "comment_id": 87749108, "body": "Welcome to SO. Hint for future questions: To get more readers interested in your question you should provide a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>. This means that you should remove all code that is not related to the problem."}], "answers": [{"tags": [], "owner": {"reputation": 609, "user_id": 7690030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11846ade17a8760f2501ab72fcc1f37?s=128&d=identicon&r=PG", "display_name": "Martin Chekurov", "link": "https://stackoverflow.com/users/7690030/martin-chekurov"}, "is_accepted": false, "score": 2, "last_activity_date": 1526460778, "creation_date": 1526460778, "answer_id": 50366379, "question_id": 50366120, "link": "https://stackoverflow.com/questions/50366120/what-is-this-error-cannot-convert-char-to-char-for-argument-1-to-char/50366379#50366379", "title": "What is this error? cannot convert &#39;char**&#39; to &#39;char*&#39; for argument &#39;1&#39; to &#39;char* strcpy(char*, const char*)", "body": "<pre><code>char * name[NAME_LEN];\n ^   ^  ^   ^\n |   |  |   |\n |   |  |  is an array of NAME_LEN\n |   | name\n |  pointers to\nchar\n</code></pre>\n\n<p>You have to change it to:</p>\n\n<pre><code>char name[NAME_LEN];\n ^    ^   ^\n |    |   |\n |    |  is an array of NAME_LEN\n |   name\nchar\n</code></pre>\n\n<p><code>char *name[NAME_LEN];</code> is an array of pointers, not array of characters.So when you call <code>strcpy(t-&gt;name, name);</code> <code>t-&gt;name</code> becomes of type <code>char**</code> instead of <code>char*</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9798773, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rozwel Gustab", "link": "https://stackoverflow.com/users/9798773/rozwel-gustab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2599, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1526460998, "creation_date": 1526459993, "last_edit_date": 1526460998, "question_id": 50366120, "link": "https://stackoverflow.com/questions/50366120/what-is-this-error-cannot-convert-char-to-char-for-argument-1-to-char", "title": "What is this error? cannot convert &#39;char**&#39; to &#39;char*&#39; for argument &#39;1&#39; to &#39;char* strcpy(char*, const char*)", "body": "<pre><code>#define NAME_LEN 20 \n#include \"stdio.h\"\n#include \"stdlib.h\"\n#include \"string.h\"\n#pragma warning(disable:4996)\n\ntypedef struct bank\n{ \n    char *name[NAME_LEN];\n    int id; \n    int money; \n    struct bank *next;\n} bank;\n\nbank *head, *tail; // \ub178\ub4dc\uc758 \ucc98\uc74c\uacfc \ub05d\n\nvoid Init_account(FILE *fp); // \ub178\ub4dc\uc758 \ucc98\uc74c\uacfc \ub05d\uc5d0 \uba54\ubaa8\ub9ac \ud560\ub2f9\ud558\uace0, \ud30c\uc77c\uc5d0\uc11c \uc785\ub825\uc744 \ubc1b\ub3c4\ub85d \ud558\ub294 \ud568\uc218\nvoid Make_account(FILE *fp); // \uacc4\uc88c\ub97c \uc0dd\uc131\ud558\ub294 \ud568\uc218\nvoid Deposit(FILE *fp); // \uc785\uae08 \ud568\uc218\nvoid WithDraw(FILE *fp); // \ucd9c\uae08 \ud568\uc218\nvoid WriteAccount(FILE *fp); // \uacc4\uc88c\uc758 \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\ub294 \ud568\uc218\nvoid Account_inquire(void); // \uacc4\uc88c\ub97c \uc870\ud68c\ud558\ub294 \ud568\uc218\nvoid ReadAccount(int id, char *name, int money); // \ud14d\uc2a4\ud2b8 \ud30c\uc77c\uc5d0\uc11c \uc785\ub825\uc744 \ubc1b\ub294 \ud568\uc218\n\nvoid Init_account(FILE *fp)\n{\n    int id;\n    char name[NAME_LEN];\n    int money;\n\n    head = (bank *)malloc(sizeof(bank));\n    tail = (bank *)malloc(sizeof(bank));\n    head-&gt;next = tail;\n    tail-&gt;next = tail;\n\n    while (fscanf(fp, \"%d %s %d\", &amp;id, name, &amp;money) == 3){ // \uc815\uc218\ud615, \ubb38\uc790\ud615, \uc815\uc218\ud615 3\uac1c\uc77c \ub54c\ub9cc \uc785\ub825\uc744 \ubc1b\uc74c\n        ReadAccount(id, name, money);\n    }\n}\n\nvoid ReadAccount(int id, char *name, int money)\n{\n    bank *t;\n    t = (bank *)malloc(sizeof(bank));\n    t-&gt;id = id;\n    strcpy(t-&gt;name, name);\n    t-&gt;money = money; // this code has problem //\n    t-&gt;next = head-&gt;next; // \ub2e4\uc74c \ub178\ub4dc\ub97c \uac00\ub9ac\ud0b4\n    head-&gt;next = t; // \ub178\ub4dc\uc758 \ucc98\uc74c\uc744 \uac00\ub9ac\ud0b4\n}\n\nvoid Make_account(FILE *fp)\n{\n    int id;\n    char name[NAME_LEN];\n    int money;\n    bank *t;\n    t = (bank *)malloc(sizeof(bank));\n    printf(\"\\n*********\uacc4\uc88c \uc0dd\uc131*********\\n\");\n    printf(\"\uacc4\uc88c\ubc88\ud638 : \"); scanf(\"%d\", &amp;id);\n    printf(\"\uc608 \uae08 \uc8fc : \"); scanf(\"%s\", name);\n    printf(\"\uc785 \uae08 \uc561 : \"); scanf(\"%d\", &amp;money);\n    t-&gt;id = id;\n    strcpy(t-&gt;name, name);\n    t-&gt;money = money;\n    t-&gt;next = head-&gt;next;\n    head-&gt;next = t;\n    WriteAccount(fp); // \uc800\uc7a5\ud558\ub294 \ud568\uc218\ub85c \ud30c\uc77c \ud3ec\uc778\ud130\ub97c \ub118\uaca8\uc90c\n}\n\nvoid Deposit(FILE *fp)\n{\n    int id;\n    int money;\n    bank *t;\n    printf(\"\uacc4\uc88c\ubc88\ud638 : \"); scanf(\"%d\", &amp;id);\n    printf(\"\uc785 \uae08 \uc561 : \"); scanf(\"%d\", &amp;money);\n\n    for (t = head-&gt;next; t != tail; t = t-&gt;next)\n    {\n        if (t-&gt;id == id)\n        {\n            t-&gt;money += money; // \uc794\uc561\uc5d0 \uc785\uae08\ud560 \uae08\uc561\uc744 \ub354\ud574\uc11c\n            WriteAccount(fp); // \uc800\uc7a5\n            return;\n        }\n    }\n    printf(\"\uc5c6\ub294 \uacc4\uc88c\ubc88\ud638\uc785\ub2c8\ub2e4.\\n\");\n}\n\nvoid WithDraw(FILE *fp)\n{\n    int id;\n    int money;\n    bank *t;\n    printf(\"\uacc4\uc88c\ubc88\ud638 : \"); scanf(\"%d\", &amp;id);\n    printf(\"\ucd9c \uae08 \uc561 : \"); scanf(\"%d\", &amp;money);\n\n    for (t = head-&gt;next; t != tail; t = t-&gt;next)\n    {\n        if (t-&gt;id == id)\n        {\n            if (t-&gt;money\n            {\n                printf(\"\ucd9c\uae08\uc561\uc774 \uc794\uc561\uc744 \ucd08\uacfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\\n\");\n                return;\n            }\n            else\n            {\n                t-&gt;money -= money; // \uc794\uc561\uc5d0\uc11c \ucd9c\uae08\uc561\uc744 \ube7c\uc11c\n            }\n\n            WriteAccount(fp); // \uc800\uc7a5\n            return;\n        }\n    }\n\n    printf(\"\uc5c6\ub294 \uacc4\uc88c\ubc88\ud638\uc785\ub2c8\ub2e4.\\n\");\n}\n\nvoid Account_inquire(void)\n{\n    bank *t;\n    for (t = head-&gt;next; t != tail; t = t-&gt;next)\n    {\n        printf(\"\\n*********\uc794\uc561 \uc870\ud68c*********\\n\");\n        printf(\"\uacc4\uc88c\ubc88\ud638 : %d\\n\", t-&gt;id);\n        printf(\"\uc608 \uae08 \uc8fc : %s\ub2d8\\n\", t-&gt;name);\n        printf(\"\uc794 \uc561 : %d\uc6d0\\n\\n\", t-&gt;money);\n    }\n}\n\nvoid WriteAccount(FILE *fp)\n{\n    bank *t;\n    rewind(fp); // \ud30c\uc77c \uc77d\ub294 \ud3ec\uc778\ud130 \uc9c0\uc810\uc744 \ub9e8 \ucca8\uc73c\ub85c \ub3cc\ub9ac\ub294 \ud568\uc218\n\n    for (t = head-&gt;next; t != tail; t = t-&gt;next)\n    {\n        fprintf(fp, \"%d %s %d\\n\", t-&gt;id, t-&gt;name, t-&gt;money);\n    }\n}\n\nint main()\n{\n    int input;\n    FILE *fp;\n    fp = fopen(\"data.txt\", \"r+\"); // \ud30c\uc77c\ubaa8\ub4dc\uac00 r+\uc77c \uacbd\uc6b0 \uc77d\uace0\uc4f0\uae30\ub97c \ub3d9\uc2dc\uc5d0 \uc218\ud589 \ud569\ub2c8\ub2e4.\n    Init_account(fp);\n\n    do\n    {\n        printf(\"\uacc4\uc88c \uc0dd\uc131&amp;\uad00\ub9ac \ud504\ub85c\uadf8\ub7a8\uc785\ub2c8\ub2e4. \uc6d0\ud558\uc2dc\ub294 \ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694.\\n\");\n        printf(\"*********************************************\\n\");\n        printf(\"1)\uacc4\uc88c \uc0dd\uc131 2)\uacc4\uc88c \uc870\ud68c 3)\uc785\uae08 4)\ucd9c\uae08 5)\uc885\ub8cc\\n\");\n        printf(\"*********************************************\\n\");\n        printf(\"\uc785\ub825 &gt;\");\n        scanf(\"%d\", &amp;input);\n\n        switch (input){\n            case 1:\n                Make_account(fp);\n                break;\n            case 2:\n                Account_inquire();\n                break;\n            case 3:\n                Deposit(fp);\n                break;\n            case 4:\n                WithDraw(fp);\n                break;\n            case 5:\n                input = 0;\n                free(head); // \uc885\ub8cc\ud558\uba74\uc11c \uba54\ubaa8\ub9ac \ubc18\ud658\n                free(tail);\n                break;\n            default:\n                printf(\"\uc798\ubabb \uc785\ub825\ud558\uc168\uc2b5\ub2c8\ub2e4. \\n\");\n                return main();\n        }\n    }\n    while (input != 0);\n}\n</code></pre>\n\n<p>I am korean.</p>\n\n<p>And i made \"bank manage program code\" for my homework.</p>\n\n<p>But thers is problem in my code.(please ignore korea)</p>\n\n<p>When i run my code, the error </p>\n\n<p>cannot convert 'char**' to 'char*' for argument '1' to 'char* strcpy(char*, const char*)'  happened.</p>\n\n<p>I don't know about this problem.</p>\n\n<p>So I add * to that part.</p>\n\n<p>But the problem doesn't solve.</p>\n\n<p>Is there any problem in my code?</p>\n\n<p>Please help me.</p>\n"}, {"tags": ["c", "algorithm", "linear-algebra", "matrix-inverse", "binary-matrix"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1526457259, "post_id": 50364927, "comment_id": 87746643, "body": "Why do you think you need unsigned ints for 1 and 0? They are perfectly representable in signed ints, too."}, {"owner": {"reputation": 23, "user_id": 9796344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Cherry", "link": "https://stackoverflow.com/users/9796344/cherry"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526457556, "post_id": 50364927, "comment_id": 87746815, "body": "That&#39;s fine. But my requirement is that I need the inverse matrix in 1&#39;s and 0&#39;s , not negative values."}, {"owner": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "edited": false, "score": 0, "creation_date": 1526457885, "post_id": 50364927, "comment_id": 87747038, "body": "What do you mean by &quot;inverse matrix&quot;? Is it the commonly known one (having A, find B to make AB=I)?"}, {"owner": {"reputation": 2875, "user_id": 3791827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JKSdx.jpg?s=128&g=1", "display_name": "ACascarino", "link": "https://stackoverflow.com/users/3791827/acascarino"}, "edited": false, "score": 3, "creation_date": 1526458135, "post_id": 50364927, "comment_id": 87747182, "body": "As a quick sanity check, are you certain that your Boolean matrix actually has an inverse? Your example does not - the only square Boolean matrices that have an inverse defined are permutation matrices, as per <a href=\"http://www.dtic.mil/dtic/tr/fulltext/u2/724782.pdf\" rel=\"nofollow noreferrer\">dtic.mil/dtic/tr/fulltext/u2/724782.pdf</a>. Could you also define what you mean by inverse in this context?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1526458354, "post_id": 50364927, "comment_id": 87747329, "body": "why do you think that for every matrix containing only 0s and 1s the inverse   matrix also contains only 0s and 1s?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1526458685, "post_id": 50364927, "comment_id": 87747554, "body": "Also the inverse matrix is unique. If you found one thats the only one. You cant just look for another one which contains no negative numbers since there is only one. But it depends what field you are using. Maybe you are using F2?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526458793, "post_id": 50364927, "comment_id": 87747617, "body": "A binary matrix would rather be one that stores values in bits, not in <code>int</code>. And why are you using array pointers as parameter, <code>int (*D)[3][3]</code> instead of an array (that will decay into an array pointer), <code>int D[3][3]</code>. It would make the code far less painful to read."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1526458969, "post_id": 50364927, "comment_id": 87747723, "body": "Perhaps there is some misunderstanding. If the underlying field is indeed <code>F2</code>, <code>-1</code> and <code>1</code> are the same."}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1526459054, "post_id": 50364927, "comment_id": 87747768, "body": "But if the field is F2 his calculations are wrong."}, {"owner": {"reputation": 23, "user_id": 9796344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Cherry", "link": "https://stackoverflow.com/users/9796344/cherry"}, "reply_to_user": {"reputation": 2875, "user_id": 3791827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JKSdx.jpg?s=128&g=1", "display_name": "ACascarino", "link": "https://stackoverflow.com/users/3791827/acascarino"}, "edited": false, "score": 1, "creation_date": 1526459986, "post_id": 50364927, "comment_id": 87748373, "body": "@ACascarino I had a quick look into the paper and that&#39;s what I require :) I am actually working with non-square matrices but since I couldn&#39;t find any solution to inverse a non-square matrix I tried to multiply my non-square matrix with it&#39;s transpose to convert it to square matrix and then work on it. I have a 84 x 104 binary matrix whose inverse exists. Could you please help me find a way to find the inverse of my non-square matrix (where no. of rows &lt; no. of cols) . By Inverse, I mean AB = I (where A:matrix, B:Inverse of A, I:Identity matrix)"}, {"owner": {"reputation": 23, "user_id": 9796344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Cherry", "link": "https://stackoverflow.com/users/9796344/cherry"}, "reply_to_user": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "edited": false, "score": 1, "creation_date": 1526460136, "post_id": 50364927, "comment_id": 87748455, "body": "@Stan Yes I mean AB = I, where B contains only binary values."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1526460336, "post_id": 50364927, "comment_id": 87748574, "body": "Beware, if you only want binary values, what are the rules for addition? Is is integer addition (1 + 1 = 2, 1 + (-1) = 0) or logical one ( 1 + 1 = 1 )?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1526485280, "post_id": 50364927, "comment_id": 87766312, "body": "BTW: <code>m &lt; rows;</code> is clearer, potentially faster, and more idiomatic than than <code>m &lt;= rows-1;</code> and better for the pathological case of <code>row == 0</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1526485719, "post_id": 50364927, "comment_id": 87766577, "body": "Using <code>printf(&quot; %d \\t&quot;, s[m][j]);</code> to print an <code>unsigned</code> outside the <code>int</code> range is UB.  Recommend to use <code>signed int D[3][3] ...</code>"}, {"owner": {"reputation": 23, "user_id": 9796344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Cherry", "link": "https://stackoverflow.com/users/9796344/cherry"}, "edited": false, "score": 0, "creation_date": 1527079178, "post_id": 50364927, "comment_id": 87990102, "body": "<b>Solved</b> : I was able to do binary inverse of my matrix using <i>Gaussian elimination method</i> where we perform modulo 2 addition of 2 rows and swap 2 rows based on the conditions given in the Gaussian elimination method. Thanks all for your support."}], "owner": {"reputation": 23, "user_id": 9796344, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Cherry", "link": "https://stackoverflow.com/users/9796344/cherry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 875, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1526463417, "creation_date": 1526456260, "last_edit_date": 1526463417, "question_id": 50364927, "link": "https://stackoverflow.com/questions/50364927/inverse-of-a-binary-matrix-in-c", "title": "Inverse of a binary matrix in C", "body": "<p>I have a binary matrix (zeros and ones) <code>D[][]</code> of dimension nxn where n is large (approximately around 1500 - 2000). I want to find the inverse of this matrix in C.</p>\n\n<p>Since I'm new to C, I started with a 3 x 3 matrix and working around to generalize it to N x N. This works for int values, however since I'm working with binary <code>1</code>'s and <code>0</code>'s. In this implementation, I need <code>unsigned int</code> values.</p>\n\n<p>I could find many solutions for <code>int</code> values but I didn't come across any solution for <code>unsigned int</code>. I'd like to find the inverse of a N x N binary matrix without using any external libraries like blas/lapack. It'd be great if anyone could provide a lead on M x N matrix.</p>\n\n<p>Please note that I need inverse of a matrix, not the pseudo-inverse.</p>\n\n<pre><code>/* To find the inverse of a matrix using LU decomposition */\n\n/* standard Headers */\n#include&lt;math.h&gt;\n#include&lt;stdio.h&gt;\nint main() {\n    /* Variable declarations */\n    int i,j;\n    unsigned int n,m;\n    unsigned int rows,cols;\n    unsigned int D[3][3], d[3], C[3][3];\n    unsigned int x, s[3][3];\n    unsigned int y[3];\n    void LU();    \n    n = 2;\n    rows=3;cols=3;\n\n    /* the matrix to be inverted */\n\n    D[0][0] = 1;\n    D[0][1] = 1;\n    D[0][2] = 0;\n    D[1][0] = 0;\n    D[1][1] = 1;\n    D[1][2] = 0;\n    D[2][0] = 1;\n    D[2][1] = 1;\n    D[2][2] = 1;\n\n    /* Store the matrix value for camparison later.\n     this is just to check the results, we don't need this\n     array for the program to work */\n    for (m = 0; m &lt;= rows-1; m++) {\n        for (j = 0; j &lt;= cols-1; j++) {\n            C[m][j] = D[m][j];\n        }\n    }\n\n    /* Call a sub-function to calculate the LU decomposed matrix. Note that\n     we pass the two dimensional array [D] to the function and get it back */\n    LU(D, n);\n\n    printf(\" \\n\");\n    printf(\"The matrix LU decomposed \\n\");\n    for (m = 0; m &lt;= rows-1; m++) {\n        for (j = 0; j &lt;= cols-1; j++){\n        printf(\" %d \\t\", D[m][j]);\n        }\n        printf(\"\\n\");\n    }\n\n    /*  TO FIND THE INVERSE */\n\n    /* to find the inverse we solve [D][y]=[d] with only one element in\n     the [d] array put equal to one at a time */\n\n    for (m = 0; m &lt;= rows-1; m++) {\n        d[0] = 0;\n        d[1] = 0;\n        d[2] = 0;\n        d[m] = 1;\n        for (i = 0; i &lt;= n; i++) {\n            x = 0;\n            for (j = 0; j &lt;= i - 1; j++){\n                x = x + D[i][j] * y[j];\n            }\n            y[i] = (d[i] - x);\n        }\n\n        for (i = n; i &gt;= 0; i--) {\n            x = 0;\n            for (j = i + 1; j &lt;= n; j++) {\n                x = x + D[i][j] * s[j][m];\n            }\n            s[i][m] = (y[i] - x) / D[i][i];\n        }\n    }\n\n    /* Print the inverse matrix */\n    printf(\"The Inverse Matrix\\n\");\n    for (m = 0; m &lt;= rows-1; m++) {\n        for (j = 0; j &lt;= cols-1; j++){\n            printf(\" %d \\t\", s[m][j]);\n        }\n        printf(\"\\n\");\n    }\n    /* check that  the product of the matrix with its iverse results\n     is  indeed a unit matrix  */\n    printf(\"The product\\n\");\n    for (m = 0; m &lt;= rows-1; m++) {\n        for (j = 0; j &lt;= cols-1; j++){\n            x = 0;\n            for (i = 0; i &lt;= 2; i++) {\n                x = x + C[m][i] * s[i][j];\n            }\n            //printf(\" %d    %d    %f \\n\", m, j, x);\n            printf(\"%d \\t\",x);\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n\n/* The function that calcualtes the LU deomposed matrix.\n Note that it receives the matrix as a two dimensional array\n of pointers. Any change made to [D] here will also change its\n value in the main function. So there is no need of an explicit\n \"return\" statement and the function is of type \"void\". */\n\nvoid LU(int (*D)[3][3], int n) {\n    int i, j, k;\n    int x;\n    printf(\"The matrix \\n\");\n    for (j = 0; j &lt;= 2; j++) {\n        printf(\" %d  %d  %d \\n\", (*D)[j][0], (*D)[j][1], (*D)[j][2]);\n    }\n    for (k = 0; k &lt;= n - 1; k++) {\n        for (j = k + 1; j &lt;= n; j++) {\n            x = (*D)[j][k] / (*D)[k][k];\n            for (i = k; i &lt;= n; i++) {\n                (*D)[j][i] = (*D)[j][i] - x * (*D)[k][i];\n            }\n            (*D)[j][k] = x;\n        }\n    }\n\n}\n</code></pre>\n\n<p>This is just a sample example that I tried and I have -1 values in the inverse matrix which is my main concern. I have 1000 x 1000 matrix of binary values and the inverse should also be in binary.</p>\n\n<p>The matrix:</p>\n\n<pre><code> 1  1  0 \n 0  1  0 \n 1  1  1\n</code></pre>\n\n<p>The matrix LU decomposed:</p>\n\n<pre><code> 1   1   0  \n 0   1   0  \n 1   0   1  \n</code></pre>\n\n<p>The Inverse Matrix:</p>\n\n<pre><code> 1  -1   0  \n 0   1   0  \n-1   0   1\n</code></pre>\n\n<p>The product:</p>\n\n<pre><code> 1   0   0  \n 0   1   0  \n 0   0   1 \n</code></pre>\n"}, {"tags": ["c", "debugging", "gdb", "kernel"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526454581, "post_id": 50364420, "comment_id": 87745062, "body": "You misunderstand how preemptive multitasking works. If a &quot;thread&quot; goes to sleep, the kernel doesn&#39;t do anything at all with that thread until it is woken up, it doesn&#39;t even run anything internally. Instead it will let other user-space threads and processes run."}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526454699, "post_id": 50364420, "comment_id": 87745132, "body": "@Someprogrammerdude, I&#39;m fully aware of that; that&#39;s why I said &quot;likely blocked&quot; in the kernel. But that is orthogonal to the question; for the purposes of the question, I consider a thread that is <i>blocked</i> (not executing) in the kernel to be in kernel space."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526454771, "post_id": 50364420, "comment_id": 87745173, "body": "And to answer what happens when you send the <code>SIGINT</code> signal, is that the OS wakes up the sleeping process to handle the signal, and if the process doesn&#39;t have a signal handler for <code>SIGINT</code> the OS terminates the process. The debugger installs special handlers to catch all signals, but it&#39;s handled in user-space."}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526454884, "post_id": 50364420, "comment_id": 87745232, "body": "@Someprogrammerdude, The <code>SIGINT</code> is only used to break into the debugger so we can examine state; I&#39;m hoping it&#39;s not relevant to the question or its answer, but please correct me if I&#39;m mistaken."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526455233, "post_id": 50364420, "comment_id": 87745429, "body": "But the process <i>isn&#39;t</i> in &quot;kernel space&quot;. When a process is put to sleep, the kernel puts it in a special queue for processes waiting for events, and then schedules another process to run. The sleeping process itself doesn&#39;t do anything, it&#39;s not running in user nor kernel space. This can easily be seen using the <a href=\"http://man7.org/linux/man-pages/man1/time.1.html\" rel=\"nofollow noreferrer\"><code>time</code></a> command, which will show the kernel-time (&quot;sys&quot; time) as very small."}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526455317, "post_id": 50364420, "comment_id": 87745480, "body": "@Someprogrammerdude, Would it be more clear if I said &quot;needs to cross a <code>syscall</code> boundary&quot; before executing user code again? I literally do not care if it&#39;s taking kernel time or not; I only care which side of the kernel crossing the thread is on."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526455536, "post_id": 50364420, "comment_id": 87745592, "body": "Try <code>layout asm</code>. If the PC points to an instruction just after a <code>syscall</code> instruction, the thread is in the kernel execution context. (<code>syscall</code> or a <code>int 0x80</code> for Linux)."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526455758, "post_id": 50364420, "comment_id": 87745731, "body": "I don&#39;t know what this will help achieve though. For gdb, a <code>syscall</code> is a single step execution and it can&#39;t &quot;debug &quot; kernel code."}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526455862, "post_id": 50364420, "comment_id": 87745803, "body": "@AjayBrahmakshatriya, I was trying to keep the example simple for the question; the ultimate goal is to make it easier to filter out threads which are blocked in the kernel when requesting backtraces in a large multithreaded application. That&#39;s why I wanted an expression in gdb."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1526456113, "post_id": 50364420, "comment_id": 87745952, "body": "<code>*(short*) ($pc - 2) == 0x50f</code> works, but it can also be a suffix for other instructions."}], "answers": [{"comments": [{"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1526585208, "post_id": 50388545, "comment_id": 87814058, "body": "does this work only for nanosleep, or generic syscalls?"}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "reply_to_user": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1526585894, "post_id": 50388545, "comment_id": 87814402, "body": "It works for any syscall by it&#39;s name or by it&#39;s number, see documentation link."}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1526589752, "post_id": 50388545, "comment_id": 87816259, "body": "It seems that I&#39;d have to enumerate all possible syscalls to use this, which is a little unfortunate, but good to know!"}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "reply_to_user": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1526590182, "post_id": 50388545, "comment_id": 87816472, "body": "You can <code>catch syscall</code> to set catchpoint on all syscalls at once. Though I don&#39;t know how it will be usable for your ultimate goal."}], "tags": [], "owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "is_accepted": false, "score": 1, "last_activity_date": 1526550940, "creation_date": 1526550940, "answer_id": 50388545, "question_id": 50364420, "link": "https://stackoverflow.com/questions/50364420/is-it-possible-to-determine-in-gdb-whether-a-thread-is-executing-or-blocked-in/50388545#50388545", "title": "Is it possible to determine in gdb whether a thread is executing (or blocked) in kernel or user space?", "body": "<blockquote>\n  <p>Is there is some expression in gdb that evaluates to true if the\n  thread must cross a syscall boundary before executing code in\n  userspace again?</p>\n</blockquote>\n\n<p>You can try to use <code>catch syscall nanosleep</code>, see <a href=\"https://sourceware.org/gdb/onlinedocs/gdb/Set-Catchpoints.html\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n\n<p><code>catch syscall nanosleep</code> stops on 2 events: the one on call to a system call and the one on return from a system call. You can use <code>info breakpoints</code> to see the number of hit times of this catchpoint. If it is even, then you should be in user space. If it is odd, then you you should be in kernel space:</p>\n\n<pre><code>$ gdb -q a.out \nReading symbols from a.out...done.\n(gdb) catch syscall nanosleep \nCatchpoint 1 (syscall 'nanosleep' [35])\n(gdb) i b\nNum     Type           Disp Enb Address            What\n1       catchpoint     keep y                      syscall \"nanosleep\" \n(gdb) r\nStarting program: /home/ks1322/a.out \nMissing separate debuginfos, use: dnf debuginfo-install glibc-2.27-8.fc28.x86_64\n\nCatchpoint 1 (call to syscall nanosleep), 0x00007ffff7adeb54 in nanosleep () from /lib64/libc.so.6\n(gdb) i b\nNum     Type           Disp Enb Address            What\n1       catchpoint     keep y                      syscall \"nanosleep\" \n    catchpoint already hit 1 time\n(gdb) c\nContinuing.\n\nCatchpoint 1 (returned from syscall nanosleep), 0x00007ffff7adeb54 in nanosleep () from /lib64/libc.so.6\n(gdb) i b\nNum     Type           Disp Enb Address            What\n1       catchpoint     keep y                      syscall \"nanosleep\" \n    catchpoint already hit 2 times\n(gdb) c\nContinuing.\n[Inferior 1 (process 19515) exited normally]\n</code></pre>\n"}], "owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1526550940, "creation_date": 1526454421, "last_edit_date": 1526456486, "question_id": 50364420, "link": "https://stackoverflow.com/questions/50364420/is-it-possible-to-determine-in-gdb-whether-a-thread-is-executing-or-blocked-in", "title": "Is it possible to determine in gdb whether a thread is executing (or blocked) in kernel or user space?", "body": "<p>Consider the following program.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n\nint main(){\n    sleep(1000);\n}\n</code></pre>\n\n<p>If we run <code>strace</code> on this program, the last line that appears before the long sleep is the following.</p>\n\n<pre><code>nanosleep({1000, 0}, \n</code></pre>\n\n<p>While the program is asleep, the code is executing (likely blocked) inside the OS kernel.</p>\n\n<p>When I run the program under <code>gdb</code>, if I send <code>SIGINT</code> in the middle of the sleep, I can collect various information about the main thread, such as its <code>backtrace</code> and various register values.</p>\n\n<p><strong>Is there is some expression in gdb that evaluates to <code>true</code> iff the thread must cross a <code>syscall</code> boundary before executing code in userspace again?</strong></p>\n\n<p>Ideally, there would be a cross-platform solution, but platform-specific solutions are also useful.</p>\n\n<p><strong>Clarification</strong>: I do not care whether the thread is <em>actually executing</em>; only whether its most recent program counter value was in kernel code or user code.</p>\n\n<p>Put another way, can <code>gdb</code> tell us whether a particular thread has entered the kernel but not yet exited the kernel?</p>\n"}, {"tags": ["java", "android", "c", "android-studio", "dji-sdk"], "answers": [{"tags": [], "owner": {"reputation": 636, "user_id": 2739201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZN5qE.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/2739201/michael"}, "is_accepted": false, "score": 0, "last_activity_date": 1526563296, "last_edit_date": 1526563296, "creation_date": 1526526752, "answer_id": 50382791, "question_id": 50364256, "link": "https://stackoverflow.com/questions/50364256/how-to-convert-byte-to-mat-in-java/50382791#50382791", "title": "How to convert byte [] to Mat in java", "body": "<p>videoBuffer may contains invalid bytes, so we need use 'size' to indicate the valid part, which means the valid bytes are starting from videoBuffer[0] and ending with last byte: videoBuffer[size-1]</p>\n"}], "owner": {"reputation": 11, "user_id": 9786785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/80XbZ.jpg?s=128&g=1", "display_name": "Jaguar", "link": "https://stackoverflow.com/users/9786785/jaguar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526563296, "creation_date": 1526453827, "last_edit_date": 1526463235, "question_id": 50364256, "link": "https://stackoverflow.com/questions/50364256/how-to-convert-byte-to-mat-in-java", "title": "How to convert byte [] to Mat in java", "body": "<p>I am working on DJI Mobile SDK in Android studio. I want to Apply Opencv filters on video live feed from the phantom drone camera. Video live feed is in byte [] videoBuffer as shown in the code.</p>\n\n<pre><code>mReceivedVideoDataCallBack = new VideoFeeder.VideoDataCallback() {\n        @Override\n        public void onReceive(byte[] videoBuffer, int size) {\n            if (mCodecManager != null) {\n                mCodecManager.sendDataToDecoder(videoBuffer, size);\n            }\n        }\n    }; \n</code></pre>\n\n<p>One way I think is to first convert byte[] videoBuffer to Mat in java and then pass Mat address to extern C class. </p>\n\n<p>Second is to pass byte[] videoBuffer to extern C as jbyteArray and then convert this jbyteArray to Mat in C.</p>\n\n<p>I don't know the role of int size in the code. </p>\n\n<p>I am facing problem in both. Any help will be appreciated. I am stuck on this shit for more than a month. :(  </p>\n"}, {"tags": ["c", "arrays", "struct", "byte"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1526453811, "post_id": 50364223, "comment_id": 87744627, "body": "You declare <code>arr</code> to be an array of 512 <i>pointers</i> to <code>BYTE</code>. On a 64-bit machine pointers are usually 64 bits, 8 bytes."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1526453980, "post_id": 50364223, "comment_id": 87744712, "body": "<code>BYTE *arr[512];</code> -&gt; <code>BYTE arr[512];</code>"}, {"owner": {"reputation": 113, "user_id": 7254027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df157841937467bfd8a52b13310c95e2?s=128&d=identicon&r=PG&f=1", "display_name": "Ahijit", "link": "https://stackoverflow.com/users/7254027/ahijit"}, "edited": false, "score": 0, "creation_date": 1526454529, "post_id": 50364223, "comment_id": 87745020, "body": "Thanks a million!!! It works!"}], "answers": [{"tags": [], "owner": {"reputation": 609, "user_id": 7690030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11846ade17a8760f2501ab72fcc1f37?s=128&d=identicon&r=PG", "display_name": "Martin Chekurov", "link": "https://stackoverflow.com/users/7690030/martin-chekurov"}, "is_accepted": false, "score": 1, "last_activity_date": 1526455156, "last_edit_date": 1526455156, "creation_date": 1526454674, "answer_id": 50364486, "question_id": 50364223, "link": "https://stackoverflow.com/questions/50364223/creating-byte-array-struct-in-c/50364486#50364486", "title": "Creating BYTE array struct in C", "body": "<pre><code>BYTE * arr[512];\n ^   ^  ^   ^\n |   |  |   |\n |   |  |  is an array of 512\n |   |  arr\n |  pointers to\nBYTE\n</code></pre>\n\n<p>You have to change it to:</p>\n\n<pre><code>BYTE arr[512];\n ^    ^   ^\n |    |   |\n |    |  is an array of 512 \n |   arr \nBYTE\n</code></pre>\n\n<p>Since you want an array of bytes there is no need to make the struct packet because no padding bytes will be added.</p>\n"}], "owner": {"reputation": 113, "user_id": 7254027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df157841937467bfd8a52b13310c95e2?s=128&d=identicon&r=PG&f=1", "display_name": "Ahijit", "link": "https://stackoverflow.com/users/7254027/ahijit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "closed_date": 1526458696, "answer_count": 1, "score": 0, "last_activity_date": 1526455156, "creation_date": 1526453699, "question_id": 50364223, "link": "https://stackoverflow.com/questions/50364223/creating-byte-array-struct-in-c", "closed_reason": "Not suitable for this site", "title": "Creating BYTE array struct in C", "body": "<p>I wanted to create an byte array in a struct in C of size 512, but the size of the structure is ending up being eight times that size. Could you please help as to how I'll make the required data structure.</p>\n\n<p>This is my current code </p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\ntypedef uint8_t BYTE;\n\ntypedef struct _ByteArray {\n\n    BYTE *arr[512];\n} __attribute__((__packed__))\nJPEG;\n</code></pre>\n"}, {"tags": ["c", "matrix", "diagonal"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1526450984, "post_id": 50363490, "comment_id": 87743261, "body": "This is probably a good time to <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">learn how to debug your programs</a>. For example, using a debugger you could step through the code line by line while monitoring variables and their values. That makes it easy to see if any calculation or expression is incorrect."}, {"owner": {"reputation": 561, "user_id": 8023137, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/NRwxo.jpg?s=128&g=1", "display_name": "Rocket Pingu", "link": "https://stackoverflow.com/users/8023137/rocket-pingu"}, "edited": false, "score": 0, "creation_date": 1526451135, "post_id": 50363490, "comment_id": 87743308, "body": "Care to provide an illustrative example?"}, {"owner": {"reputation": 77, "user_id": 9152512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f356bd00a4e88c9b8f876de8fe779b0e?s=128&d=identicon&r=PG&f=1", "display_name": "pollux552", "link": "https://stackoverflow.com/users/9152512/pollux552"}, "edited": false, "score": 1, "creation_date": 1526451573, "post_id": 50363490, "comment_id": 87743512, "body": "I&#39;ve update with an output if that helps."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1526451698, "post_id": 50363490, "comment_id": 87743543, "body": "AFAICS, <code>d == i</code> at all times in the main loop (not the printing loop), so you don&#39;t need both variables in the main loop.  However, that&#39;s tangential to the problem."}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 2, "last_activity_date": 1526451772, "creation_date": 1526451772, "answer_id": 50363721, "question_id": 50363490, "link": "https://stackoverflow.com/questions/50363490/minimum-element-in-diagonal-strips-of-square-matrix/50363721#50363721", "title": "Minimum element in diagonal strips of square matrix?", "body": "<p>I think you make it more complicated than needed and I find it hard to understand what your algorithm is.</p>\n\n<p>I'll suggest that you simply calculates the minimum in the loop where you do the printing.</p>\n\n<p>Something like:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(){\n    int min[10], x[3][3] = { {1, 2, 3},\n                             {4, 5, 6},\n                             {7, 8, 9}};\n    int n = 3, d, j, z, i;\n\n    for (d = 0, i = 0; d &lt; 2 * n - 1; d++, i++){\n        printf(\"D %d: \", d);\n        z = (d &lt; n) ? 0 : d - n + 1;\n        for (j = z; j &lt;= d - z; j++){\n            printf(\"%d \", x[j][d - j]);\n            if (j == z)\n            {\n              // First time for this strip\n              // So just initialize min to current element\n              min[d] = x[j][d - j];\n            }\n            else if (min[d] &gt; x[j][d - j])\n            {\n              // Current element is less than min\n              // So overwrite min with current element\n              min[d] = x[j][d - j];\n            }\n            if(d == 0 || d == 2 * n - 2){\n                break;\n            }\n        }\n        printf(\"\\n\");\n    }\n    printf(\"\\n\");\n    for (i = 0; i &lt; 2 * n - 1; i++)\n        printf(\"min = %d\\n\", min[i]);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 0, "last_activity_date": 1526453681, "creation_date": 1526453681, "answer_id": 50364218, "question_id": 50363490, "link": "https://stackoverflow.com/questions/50363490/minimum-element-in-diagonal-strips-of-square-matrix/50364218#50364218", "title": "Minimum element in diagonal strips of square matrix?", "body": "<p>I think you can control the loops with fewer special conditions.  The main trouble in the original loop was that you had triple nested loops where double nested loops are sufficient.  This meant you kept on setting the <code>min</code> to a new value too often.</p>\n\n<p>This code prints out the subscripts of the elements of the array as well as the value.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int min[10], x[3][3] =\n    {\n        { 1, 2, 3, },\n        { 4, 5, 6, },\n        { 7, 8, 9, },\n    };\n    int n = 3;\n\n    for (int d = 0; d &lt; 2 * n - 1; d++)\n    {\n        printf(\"D %d: \", d);\n        int z = (d &lt; n) ? 0 : d - n + 1;\n        printf(\"A[%d][%d] = %d: \", z, d - z, x[z][d - z]);\n        min[d] = x[z][d - z];\n        for (int j = z + 1; j &lt;= d - z; j++)\n        {\n            printf(\"A[%d][%d] = %d: \", j, d - j, x[j][d - j]);\n            if (x[j][d-j] &lt; min[d])\n                min[d] = x[j][d-j];\n        }\n        printf(\"min[%d] = %d\\n\", d, min[d]);\n    }\n\n    printf(\"\\n\");\n\n    for (int i = 0; i &lt; 2 * n - 1; i++)\n        printf(\"min = %d\\n\", min[i]);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>D 0: A[0][0] = 1: min[0] = 1\nD 1: A[0][1] = 2: A[1][0] = 4: min[1] = 2\nD 2: A[0][2] = 3: A[1][1] = 5: A[2][0] = 7: min[2] = 3\nD 3: A[1][2] = 6: A[2][1] = 8: min[3] = 6\nD 4: A[2][2] = 9: min[4] = 9\n\nmin = 1\nmin = 2\nmin = 3\nmin = 6\nmin = 9\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 9152512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f356bd00a4e88c9b8f876de8fe779b0e?s=128&d=identicon&r=PG&f=1", "display_name": "pollux552", "link": "https://stackoverflow.com/users/9152512/pollux552"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 50363721, "answer_count": 2, "score": 0, "last_activity_date": 1526453681, "creation_date": 1526450763, "last_edit_date": 1526451561, "question_id": 50363490, "link": "https://stackoverflow.com/questions/50363490/minimum-element-in-diagonal-strips-of-square-matrix", "title": "Minimum element in diagonal strips of square matrix?", "body": "<p>I need to find the minimum in each diagonal strip (perpendicular to main diagonal) for square matrix. The code I'm using, does in fact output each strip, but for some reason it doesn't find the min element.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(){\n    int min[10], x[3][3] = { 1, 2, 3,\n                             4, 5, 6,\n                             7, 8, 9};\n    int n = 3, d, j, z, i, k;\n\n    for (d = 0, i = 0; d &lt; 2 * n - 1; d++, i++){\n        printf(\"D %d: \", d);\n        z = (d &lt; n) ? 0 : d - n + 1;\n        for (j = z; j &lt;= d - z; j++){\n            printf(\"%d \", x[j][d - j]);\n            if(d == 0 || d == 2 * n - 2){\n                min[i] = x[j][d - j];\n                break;\n            }\n            min[i] = x[j][d - j];\n            for (k = j + 1; k &lt;= d - z; k++){\n                if (min[i] &gt; x[k][d - k])\n                    min[i] = x[k][d - k];\n            }\n        }\n        printf(\"\\n\");\n    }\n    printf(\"\\n\");\n    for (i = 0; i &lt; 2 * n - 1; i++)\n        printf(\"min = %d\\n\", min[i]);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>D 0: 1\nD 1: 2 4\nD 2: 3 5 7\nD 3: 6 8\nD 4: 9\nmin = 1\nmin = 4\nmin = 7\nmin = 8\nmin = 9\n</code></pre>\n\n<p>But in this case it should be</p>\n\n<pre><code>min = 1\nmin = 2\nmin = 3\nmin = 6\nmin = 9\n</code></pre>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 561, "user_id": 8023137, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/NRwxo.jpg?s=128&g=1", "display_name": "Rocket Pingu", "link": "https://stackoverflow.com/users/8023137/rocket-pingu"}, "edited": false, "score": 0, "creation_date": 1526452197, "post_id": 50363483, "comment_id": 87743772, "body": "Are you sure that isn&#39;t one of the cases where greedy algorithm fails? Also care to tell the number of coins of each denomination to be given to the user when the change is $4.2? <a href=\"https://stackoverflow.com/questions/13557979/why-does-the-greedy-coin-change-algorithm-not-work-for-some-coin-sets\" title=\"why does the greedy coin change algorithm not work for some coin sets\">stackoverflow.com/questions/13557979/&hellip;</a>"}, {"owner": {"reputation": 1451, "user_id": 7615877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AbOhS.jpg?s=128&g=1", "display_name": "akshayk07", "link": "https://stackoverflow.com/users/7615877/akshayk07"}, "edited": false, "score": 0, "creation_date": 1526585307, "post_id": 50363483, "comment_id": 87814109, "body": "Try using the debugger, and you can figure it out yourself."}, {"owner": {"reputation": 11, "user_id": 9270694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kd88Q.jpg?s=128&g=1", "display_name": "ironman19_", "link": "https://stackoverflow.com/users/9270694/ironman19"}, "edited": false, "score": 0, "creation_date": 1526620813, "post_id": 50363483, "comment_id": 87823853, "body": "i used debugger and turn out that the input value that i gave to the program that is 4.2 is  considered as 4.19999902 and the value of c_! becomes 419."}], "owner": {"reputation": 11, "user_id": 9270694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kd88Q.jpg?s=128&g=1", "display_name": "ironman19_", "link": "https://stackoverflow.com/users/9270694/ironman19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "closed_date": 1532675475, "answer_count": 0, "score": 0, "last_activity_date": 1532624935, "creation_date": 1526450722, "last_edit_date": 1532624935, "question_id": 50363483, "link": "https://stackoverflow.com/questions/50363483/cs50-pset1-cash-greedy-challenge", "closed_reason": "Duplicate", "title": "cs50 pset1 cash -greedy challenge", "body": "<p>This is a problem in cs50 which states</p>\n\n<blockquote>\n  <p>Implement a program that calculates the minimum number of coins required to give a user change.</p>\n</blockquote>\n\n<p>The output of the problem is the number of coins to be given to the user.I made the program and it is working almost perfectly but for 4.2 dollars the output is 22 but it should have been 18. Every other value the ouput is correct. \nCan anyone tell what is wrong with this code?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;cs50.h&gt;\n\nint main(void)\n{\n    float change_owed, change_owed_in_hundreds;\n    int number_of_coins_to_be_given = 0;\n    do\n    {\n        printf(\"enter the positve ammount of change owed in dollars\");\n        change_owed = get_float();\n    }while(c &lt; 0);\n\n    change_owed_in_hundreds = change_owed * 100;\n\n    while(change_owed_in_hundreds &gt;= 25){\n        change_owed_in_hundreds = change_owed_in_hundreds - 25;\n        number_of_coins_to_be_given++;\n    }\n    while(change_owed_in_hundreds &gt;= 10) {\n        change_owed_in_hundreds = change_owed_in_hundreds - 10;\n        number_of_coins_to_be_given++;\n    }\n    while(change_owed_in_hundreds &gt;= 5) {\n        change_owed_in_hundreds = change_owed_in_hundreds - 5;\n        number_of_coins_to_be_given++;\n    }\n    while(change_owed_in_hundreds &gt;= 1) {\n        change_owed_in_hundreds = change_owed_in_hundreds - 1;\n        number_of_coins_to_be_given++;\n    }\n\n    printf(\"%d\\n\", number_of_coins_to_be_given);\n}\n</code></pre>\n"}, {"tags": ["c", "string", "scanf", "fgets", "spaces"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1526449569, "post_id": 50363207, "comment_id": 87742703, "body": "You didn&#39;t check the return value from <code>scanf_s</code>. Also, <code>&quot;%[^\\n]s&quot;</code> is wrong (why is there an <code>s</code> in there?)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1526449661, "post_id": 50363207, "comment_id": 87742752, "body": "This is probably a duplicate of the other 100 &quot;scanf skips input&quot;, &quot;my program doesn&#39;t wait for fgets&quot;, etc questions. I can&#39;t say for certain because you didn&#39;t post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. The usual problem is using <code>scanf</code> for user input, though. If you do all input through <code>fgets</code>, the issue doesn&#39;t arise."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1526457113, "post_id": 50363207, "comment_id": 87746546, "body": "<b>&quot;as soon as I run the function (did not type anything).&quot;</b> means that you have left characters unread in <code>stdin</code> from previous inputs your program has taken. Remember it is your responsibility to account for any characters that remain unread in your input buffer <i>after every input</i>. Before your input with <code>scanf_s</code> above add <code>int c = getchar(); while (c != &#39;\\n&#39; &amp;&amp; c != EOF) c = getchar();</code> (and always, always check the return from <code>scanf</code> every time -- you must validate every user input, that starts by examining the <code>return</code> and then empty any chars that remain in <code>stdin</code>)"}], "owner": {"reputation": 1, "user_id": 5417868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31f09eaa6174c2dbc28e1b4058842260?s=128&d=identicon&r=PG&f=1", "display_name": "Jenna.P", "link": "https://stackoverflow.com/users/5417868/jenna-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526449468, "creation_date": 1526449468, "question_id": 50363207, "link": "https://stackoverflow.com/questions/50363207/scanf-s-string-with-spaces-in-between", "title": "scanf_s string with spaces in between", "body": "<pre><code>void del() {\nint temp = checker;\nchar search[30];\nprintf(\"Please enter the book name to be removed : \");\nscanf_s(\"%[^\\n]s\", search, 30);\n//fgets(search, 30, stdin);\nfor (int i = 0; i &lt; checker; i++) {\n    if (strcmp(search, bookshelf[i].name) == 0) {\n        for (int j = i+1; j &lt; checker; j++) {\n            strcpy_s(bookshelf[i].name, 31, bookshelf[j].name);\n            strcpy_s(bookshelf[i].semi_ISBN, 5, bookshelf[j].semi_ISBN);\n            bookshelf[i].page = bookshelf[j].page;\n            i++;\n        }\n        checker--;\n        printf(\"%s is removed from your bookshelf.\\n\\n\", search);\n    }\n}\nif(temp==checker)\n    printf(\"%s is not in your bookshelf.\\n\\n\", search);\n</code></pre>\n\n<p>}</p>\n\n<p>this is my code, and for some reason, when I try to use either the scanf_s or fgets, the result shown is:\n\"Please enter the book name to be removed : \u5106\u5106\u5106\u5106\u5106\u5106\u5106\u5106\u5106\u5106\u5106\u5106\u5106\u5106\u5106\u5106\u5106\u5106\u5106\u5106 is not in your bookshelf.\"\nas soon as I run the function (did not type anything).</p>\n\n<p>What could be wrong..?</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 3, "creation_date": 1526448332, "post_id": 50362968, "comment_id": 87742254, "body": "You need to put the tty in raw mode."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526449016, "post_id": 50362968, "comment_id": 87742494, "body": "If you are &quot;learning C&quot;, implementing tab completion yourself would be rather challenging. You may want to read about <a href=\"https://tiswww.case.edu/php/chet/readline/rltop.html\" rel=\"nofollow noreferrer\">the readline library</a> and perhaps use it in your project."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1526449199, "post_id": 50362968, "comment_id": 87742565, "body": "Search for <code>&quot;C keyboard non-canonical mode tcgetattr tcsetattr&quot;</code>"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1526449647, "post_id": 50362968, "comment_id": 87742744, "body": "Did you experiment with <a href=\"http://en.cppreference.com/w/c/io/fgetc\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/io/fgetc</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 1477329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadcb732a3b8def7fb934a62a13114e9?s=128&d=identicon&r=PG", "display_name": "mansoor67890", "link": "https://stackoverflow.com/users/1477329/mansoor67890"}, "edited": false, "score": 0, "creation_date": 1526448879, "post_id": 50363069, "comment_id": 87742435, "body": "Already tried this, I need to execute statement on tab press instead of enter key."}, {"owner": {"reputation": 121, "user_id": 1477329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadcb732a3b8def7fb934a62a13114e9?s=128&d=identicon&r=PG", "display_name": "mansoor67890", "link": "https://stackoverflow.com/users/1477329/mansoor67890"}, "edited": false, "score": 0, "creation_date": 1526449219, "post_id": 50363069, "comment_id": 87742571, "body": "The code you posted detects keys/take input upon enter key press, I want the same but with Tab Key."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1526449542, "post_id": 50363069, "comment_id": 87742693, "body": "conio.h s for DOS and Windows."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1526449576, "post_id": 50363069, "comment_id": 87742707, "body": "<code>getchar()</code> input is buffered. Unless you are on windoze using <code>getch</code> (not recommended), you must put the keyboard in non-canonical mode using <code>tcsetattr</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 121, "user_id": 1477329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadcb732a3b8def7fb934a62a13114e9?s=128&d=identicon&r=PG", "display_name": "mansoor67890", "link": "https://stackoverflow.com/users/1477329/mansoor67890"}, "edited": false, "score": 0, "creation_date": 1526449860, "post_id": 50363069, "comment_id": 87742830, "body": "@mansoor67890 yes that&#39;s why I said that conio.h is for Windows. How did you manage to try it on Linux?"}], "tags": [], "owner": {"reputation": 1, "user_id": 9718774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/958fae767b37b4edf93a0fd9d9197f34?s=128&d=identicon&r=PG", "display_name": "dmitrygrach", "link": "https://stackoverflow.com/users/9718774/dmitrygrach"}, "is_accepted": false, "score": 0, "last_activity_date": 1526448903, "last_edit_date": 1526448903, "creation_date": 1526448699, "answer_id": 50363069, "question_id": 50362968, "link": "https://stackoverflow.com/questions/50362968/get-input-using-tab-instead-of-enter-key-in-c-linux/50363069#50363069", "title": "Get input using tab instead of Enter key in C-Linux", "body": "<p>You want receive already entered chars for autocomplete?\nI suggest you to get each key press separately.\nThus, it will always be known that user have already entered.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\ngetchar()\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#include &lt;conio.h&gt;\n_getch()\n</code></pre>\n\n<p><a href=\"https://en.wikibooks.org/wiki/A_Little_C_Primer/C_Console_IO\" rel=\"nofollow noreferrer\">https://en.wikibooks.org/wiki/A_Little_C_Primer/C_Console_IO</a></p>\n\n<p><strong>Tab</strong> is '\\t' and <strong>Enter</strong> is '\\n'</p>\n\n<pre><code>while ((c = getchar()) != EOF)\n{\n    if (c == '\\n')\n        ++newlines;\n    else if (c == '\\t')\n        ++tabs;\n    else if (c == ' ')\n        ++blanks;\n\n    if (c == EOL) {\n    printf(\"Lines: %d\\nTabs: %d\\nBlanks: %d\\n\", newlines, tabs, blanks);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 1477329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadcb732a3b8def7fb934a62a13114e9?s=128&d=identicon&r=PG", "display_name": "mansoor67890", "link": "https://stackoverflow.com/users/1477329/mansoor67890"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1526448903, "creation_date": 1526448176, "last_edit_date": 1526448440, "question_id": 50362968, "link": "https://stackoverflow.com/questions/50362968/get-input-using-tab-instead-of-enter-key-in-c-linux", "title": "Get input using tab instead of Enter key in C-Linux", "body": "<p><strong>Background:</strong></p>\n\n<p>I am developing <strong>linux-like shell</strong> in <strong>C</strong>. The first and basic requirement is to get <strong>infinite input</strong> (probably commands like <strong>rm kill</strong> etc. , which will execute) from user &amp; upon <strong>Tab key</strong>, list of possible commands must be output to the screen.</p>\n\n<p><strong>Question:</strong></p>\n\n<p>My question is that how to get the input upon <strong>Tab Key press</strong> instead of <strong>Enter key</strong>? </p>\n\n<p>A quick example will be very helpful, since I'm a college student learning C as part of OS course.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1526448033, "post_id": 50362909, "comment_id": 87742168, "body": "Did you benchmark/profile it?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1526485011, "post_id": 50362909, "comment_id": 87766136, "body": "As you note, your loop on <code>j</code> that reads from <code>U(:, j)</code> and writes to <code>G(:, j)</code> could fall afoul of cache geometry. A common way to mitigate this is to process multiple columns simultaneously. E.g., if eight elements of <code>U</code> are the size of a cache line, then process eight columns simultaneously. (<code>++j</code> would then become <code>j += 8</code>.)"}], "owner": {"reputation": 583, "user_id": 1799323, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c38a588a5302353140c966dd67d761e?s=128&d=identicon&r=PG", "display_name": "user1799323", "link": "https://stackoverflow.com/users/1799323/user1799323"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526447825, "creation_date": 1526447825, "question_id": 50362909, "link": "https://stackoverflow.com/questions/50362909/efficiently-accessing-columns-of-a-matrix-in-c", "title": "Efficiently accessing columns of a matrix in C", "body": "<p>I have a <code>Nx x Ny</code> matrix <code>U</code> stored as a one-dimensional array of length <code>Nx*Ny</code>. In terms of application, each entry represents the solution value to some differential equation at the grid point <code>(x_i, y_j)</code>, although I don't think that's important.</p>\n\n<p>I am not very proficient in C, but I know that it is row-major, so to avoid too many cache misses, it is better to loop over the columns first:</p>\n\n<pre><code>#define U(i,j) U[j+Ny*i]\nfor (int i=0; i&lt;Nx; ++i)\n    for (int j=0; j&lt;Ny; ++j)\n        U(i,j) = i*j; // example operation\n</code></pre>\n\n<p>My algorithm requires me to do two different types of operations: </p>\n\n<ol>\n<li>For row <code>i</code> of <code>U</code>, do some computation that outputs row <code>i</code> of another array <code>F</code></li>\n<li>For column <code>j</code> of <code>U</code>, do some computation that outputs column <code>j</code> of another array <code>G</code></li>\n</ol>\n\n<p>where <code>F</code> and <code>G</code> have the same length and \"shape\" as <code>U</code>. The goal is a computational step like this:</p>\n\n<pre><code>#define U(i,j) U[j+Ny*i]\n#define F(i,j) F[j+Ny*i]\n#define G(i,j) G[j+Ny*i]\n\nfor (int i; i&lt;Nx; ++i)\n    /* use U(i,:) to compute F(i,:); the : is just pseudocode short-hand to indicate an entire column or row */\n\nfor (int j; j&lt;Ny; ++j)\n    /* use U(:,j) to compute G(:,j) */\n\nfor (int i=0; i&lt;Nx; ++i)\n    for (int j=0; j&lt;Ny; ++j)\n        U(i,j) += F(i,j) + G(i,j); // example computation\n</code></pre>\n\n<p>I am struggling a bit to see how to do this computation efficiently. The steps that operate on rows of <code>U</code> seem fine, but then the operations on the columns of <code>U</code> will be quite slow, and entering values into <code>G</code> in a column-wise fashion will also be slow.</p>\n\n<p>One method I thought of would involve storing both <code>U</code> and its transpose, that way operations on columns of <code>U</code> can be done on rows of <code>UT</code>. But I have to do the computational steps many thousands of times, and it seems like explicitly computing a transpose would be even slower. Likewise, I could assemble the transpose of <code>G</code> so that I'm only ever entering values in a row-major fashion, but then in the step <code>U(i,j) += F(i,j) + G(j,i)</code>, I am now having to get column-wise values of <code>G</code>.</p>\n\n<p>How should I deal with this situation in an efficient way?</p>\n"}, {"tags": ["c", "arrays", "parameters", "typedef", "sizeof"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1526446901, "post_id": 50362573, "comment_id": 87741805, "body": "What is <code>sizeof (WCHAR)</code>?? If <code>abuffer</code> is a pointer to <code>WCHAR</code>, then what is <code>*buffer</code>? You may want to review <a href=\"http://stackoverflow.com/questions/750178/is-it-a-good-idea-to-typedef-pointers\">Is it a good idea to <b>typedef</b> pointers?</a>."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 2, "creation_date": 1526447536, "post_id": 50362573, "comment_id": 87742013, "body": "Don\u2019t typedef arrays, it\u2019ll be really confusing."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1526479046, "post_id": 50362573, "comment_id": 87761701, "body": "At an abstract level, your question is really duplicate of <a href=\"https://stackoverflow.com/questions/492384/how-to-find-the-sizeof-a-pointer-pointing-to-an-array\">this one</a>, even if you believe it is not"}, {"owner": {"reputation": 469, "user_id": 9454839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d930a16411efa2512513c2480c41ed?s=128&d=identicon&r=PG&f=1", "display_name": "ScienceAmateur", "link": "https://stackoverflow.com/users/9454839/scienceamateur"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1526479608, "post_id": 50362573, "comment_id": 87762169, "body": "@basile: obviously you don&#39;t understand why the question is different."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1526479656, "post_id": 50362573, "comment_id": 87762216, "body": "Then you need to edit it even more, explaining what you really want to ask with some <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1526483066, "post_id": 50362573, "comment_id": 87764813, "body": "Put the buffer in a structure <code>typedef struct { WCHAR buf[HUNDRED]; }  BUFFER_SPACE;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1526483157, "post_id": 50362573, "comment_id": 87764875, "body": "This post would be worth re-opening if it clearly included the key ideas from OP&#39;s various comments."}, {"owner": {"reputation": 469, "user_id": 9454839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d930a16411efa2512513c2480c41ed?s=128&d=identicon&r=PG&f=1", "display_name": "ScienceAmateur", "link": "https://stackoverflow.com/users/9454839/scienceamateur"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1526483456, "post_id": 50362573, "comment_id": 87765082, "body": "@chux: your thought of using a struct is a good one.  I&#39;ll give that a try."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1526485892, "post_id": 50362573, "comment_id": 87766691, "body": "In what way is this <i>any</i> different to its duplicate?  AFAICS, it&#39;s exactly the same question, namely <i>&quot;Is there a way to determine an array&#39;s size in a function which has been passed the array as a pointer?&quot;</i> (and the answer is, &quot;No&quot;).  If there&#39;s some difference, you need to be explicit as to what the difference is, instead of merely asserting so as if it were fact!"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1526485982, "post_id": 50362573, "comment_id": 87766751, "body": "P.S. the correct header for <code>wprintf()</code> is <code>&lt;wchar.h&gt;</code> - using those non-standard headers severely limits your audience for no good reason."}, {"owner": {"reputation": 469, "user_id": 9454839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d930a16411efa2512513c2480c41ed?s=128&d=identicon&r=PG&f=1", "display_name": "ScienceAmateur", "link": "https://stackoverflow.com/users/9454839/scienceamateur"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1526530661, "post_id": 50362573, "comment_id": 87782080, "body": "@chux: I wish you had offered that comment as the solution.  I would have given you the checkmark as making a struct does allow getting the correct size.  I used a struct and passed the parameter by reference which eliminated the level of indirection involved with a pointer to the struct.  I also checked the code the compiler generates and it is beautiful. :-)  thank you.  And for those who think this question is a duplicate, a struct, unlike for this question, would not give the asker the answer he was looking for."}], "answers": [{"comments": [{"owner": {"reputation": 469, "user_id": 9454839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d930a16411efa2512513c2480c41ed?s=128&d=identicon&r=PG&f=1", "display_name": "ScienceAmateur", "link": "https://stackoverflow.com/users/9454839/scienceamateur"}, "edited": false, "score": 0, "creation_date": 1526451080, "post_id": 50362848, "comment_id": 87743289, "body": "thank you.  I didn&#39;t initially want to declare the parameter as a pointer but, declaring it as a pointer enables getting the size of the parameter using sizeof(*parameter) which meets the goal of using the variable to obtain the size."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 469, "user_id": 9454839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d930a16411efa2512513c2480c41ed?s=128&d=identicon&r=PG&f=1", "display_name": "ScienceAmateur", "link": "https://stackoverflow.com/users/9454839/scienceamateur"}, "edited": false, "score": 0, "creation_date": 1526452240, "post_id": 50362848, "comment_id": 87743789, "body": "@ScienceAmateur. that adds an extra level of indirection to your code everywhere (although most compilers should optimize that). There is no real reason to define it as a pointer. The size information is always going to be fixed. Why don&#39;t you just use the type to get the size?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 469, "user_id": 9454839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d930a16411efa2512513c2480c41ed?s=128&d=identicon&r=PG&f=1", "display_name": "ScienceAmateur", "link": "https://stackoverflow.com/users/9454839/scienceamateur"}, "edited": false, "score": 0, "creation_date": 1526452376, "post_id": 50362848, "comment_id": 87743853, "body": "@ScienceAmateur I say this because the fact is that the <code>sizeof</code> always comes from the type. It is always resolved during compile time (expect for some cases like VLAs). Meaning the compiler would only substitute <code>sizeof(*abuffer)</code> with <code>200</code>. It won&#39;t depend on what actually is being passed to the function."}, {"owner": {"reputation": 469, "user_id": 9454839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d930a16411efa2512513c2480c41ed?s=128&d=identicon&r=PG&f=1", "display_name": "ScienceAmateur", "link": "https://stackoverflow.com/users/9454839/scienceamateur"}, "edited": false, "score": 0, "creation_date": 1526479747, "post_id": 50362848, "comment_id": 87762293, "body": "I don&#39;t want to use the type because if the parameter type were to change, it would require the programmer to inspect the code to find every place where sizeof is used to get the size of the type and update the code to use the new type.  I&#39;ll take the level of indirection over code that is inherently fragile and prone to errors during maintenance."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": true, "score": 2, "last_activity_date": 1526447511, "creation_date": 1526447511, "answer_id": 50362848, "question_id": 50362573, "link": "https://stackoverflow.com/questions/50362573/how-to-get-the-real-size-of-an-array-parameter-in-c/50362848#50362848", "title": "How to get the real size of an array parameter in C?", "body": "<p>Let us start by looking at how arrays are passed to functions - </p>\n\n<p>Quoting <code>C11</code>, chapter <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.6.3p7\" rel=\"nofollow noreferrer\">\u00a76.7.6.3p7</a></p>\n\n<blockquote>\n  <p>A declaration of a parameter as \"array of type\" shall be adjusted to \"qualified pointer to type\", where the type qualifiers (if any) are those specified within the [ and ] of the array type derivation. <code>...</code></p>\n</blockquote>\n\n<p>This means the prototype of your function effectively becomes - </p>\n\n<pre><code>void Function(WCHAR *abuffer);\n</code></pre>\n\n<p>In the body of this function, the compiler doesn't have the type information any more. It could be <code>WCHAR[100]</code>, <code>WCHAR[200]</code> or even <code>WCHAR[]</code>. </p>\n\n<p>I think you already understand why <code>sizeof(abuffer)</code> is <code>8</code> -- because it is a pointer. </p>\n\n<p>Now coming to <code>sizeof(*abuffer)</code>. The type of <code>abuffer</code> is <code>WCHAR*</code>, so the type of <code>*abuffer</code> will be <code>WCHAR</code> and hence <code>sizeof(*abuffer) == sizeof(WCHAR) == 2</code>.</p>\n\n<p>To answer your main question, is there a way for the function to know the size of the buffer, there are 2 ways - </p>\n\n<ol>\n<li>You pass along the information as a second parameter. But this is not required, since the size will always be <code>sizeof(BUFFER_SPACE)</code>. </li>\n<li><p>You pass a pointer to <code>BUFFER_SPACE</code> instead of <code>BUFFER_SPACE</code>. You can change your prototype as - </p>\n\n<pre><code>void Function(BUFFER_SPACE *abuffer);\n</code></pre>\n\n<p>and use <code>*abuffer</code> instead of <code>abuffer</code> everywhere. <code>sizeof(*abuffer)</code> will now also return <code>200</code>, because the type information is rightly preserved. </p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1526479931, "last_edit_date": 1526479931, "creation_date": 1526447967, "answer_id": 50362929, "question_id": 50362573, "link": "https://stackoverflow.com/questions/50362573/how-to-get-the-real-size-of-an-array-parameter-in-c/50362929#50362929", "title": "How to get the real size of an array parameter in C?", "body": "<p>To complete the <a href=\"https://stackoverflow.com/a/50362848/841108\">answer by Ajay Brahmakshatriya</a>: in your particular case, you know the size (actually the dimension) of the array, and you could use the preprocessor constant <code>HUNDRED</code>.</p>\n\n<p>But in general (and notably for pointers to heap-allocated arrays) there is no automatic way to get their size, and <strong>you should <em>adopt some convention</em> regarding array sizes</strong>. A very usual one is to pass the dimension of the array as another parameter to functions. A typical example is the <a href=\"http://en.cppreference.com/w/c/io/fwrite\" rel=\"nofollow noreferrer\">fwrite</a> standard function, or the <a href=\"http://en.cppreference.com/w/c/algorithm/qsort\" rel=\"nofollow noreferrer\">qsort</a> one, or the <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\">snprintf</a>. </p>\n\n<p>You could also consider using structures with <a href=\"https://en.wikipedia.org/wiki/Flexible_array_member\" rel=\"nofollow noreferrer\">flexible array members</a>, with the convention that some fixed field gives the size of that flexible array member.</p>\n\n<p>Then you could think in terms of some <a href=\"https://en.wikipedia.org/wiki/Abstract_data_type\" rel=\"nofollow noreferrer\">abstract data type</a>. I gave a simple <code>Matrix</code> example <a href=\"https://stackoverflow.com/a/47235897/841108\">here</a>. But you still need conventions.</p>\n\n<p>Notice that C is such a low-level language that <a href=\"https://en.wikipedia.org/wiki/Coding_conventions\" rel=\"nofollow noreferrer\">coding conventions</a> are really important (in particular when you deal with pointers to heap allocated -<code>malloc</code>-ed or <code>calloc</code>-ed- data: you should define and document some convention explaining who and how these pointers should be <code>free</code>-d, and what is the size of the pointed data).</p>\n\n<p>Remember than in C arrays decay into pointers (e.g. when you pass them as parameters, like to your <code>Function</code>), and the <code>sizeof</code> some pointer is always fixed (on my x86-64 Linux system it is always 8) and does not depend of the pointed memory region (and of it allocated size, if any).</p>\n\n<blockquote>\n  <p>is there a way to get the value of 200 from the parameter</p>\n</blockquote>\n\n<p><strong>No</strong>, not in general. You need conventions to deal with that. Very often you pass the dimension as some additional parameter (even your <code>main</code> should have both an <code>argc</code> &amp; the <code>argv</code>, for example). Sometimes it is known differently (thru some field in some structure, some global variable, etc...).</p>\n"}], "owner": {"reputation": 469, "user_id": 9454839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d930a16411efa2512513c2480c41ed?s=128&d=identicon&r=PG&f=1", "display_name": "ScienceAmateur", "link": "https://stackoverflow.com/users/9454839/scienceamateur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "closed_date": 1526455709, "accepted_answer_id": 50362848, "answer_count": 2, "score": -1, "last_activity_date": 1526490797, "creation_date": 1526445633, "last_edit_date": 1526490797, "question_id": 50362573, "link": "https://stackoverflow.com/questions/50362573/how-to-get-the-real-size-of-an-array-parameter-in-c", "closed_reason": "Duplicate", "title": "How to get the real size of an array parameter in C?", "body": "<p><strong>EDIT:</strong> while someone thought this question is the same as the one they posted a link to.  It is a <em>very</em> different question.</p>\n\n<p>consider the following:</p>\n\n<pre><code>#define HUNDRED 100\ntypedef WCHAR BUFFER_SPACE[HUNDRED]; \n</code></pre>\n\n<p>the type BUFFER_SPACE is an array with a size of 200 bytes (assume UTF16)</p>\n\n<p>In most cases, declaring a variable such as:</p>\n\n<pre><code>BUFFER_SPACE abuffer         = { 0 };\n\nwprintf(L\"sizeof abuffer        : %zd\\n\", sizeof(abuffer));\n</code></pre>\n\n<p>will result in wprintf outputting 200 (as expected.)</p>\n\n<p>Now, consider the following simple sample program:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;Windows.h&gt;\n#include &lt;WinNt.h&gt;\n\n#define HUNDRED 100\ntypedef WCHAR BUFFER_SPACE[HUNDRED]; \n\nvoid Function(BUFFER_SPACE abuffer)\n{\n  BUFFER_SPACE anotherbuffer = { 0 };\n\n  wprintf(L\"sizeof  abuffer      : %zd\\n\", sizeof(abuffer));         // 8\n  wprintf(L\"sizeof *abuffer      : %zd\\n\", sizeof(*abuffer));        // 2\n  wprintf(L\"sizeof anotherbuffer : %zd\\n\", sizeof(anotherbuffer));   // 200\n\n  // a highly undesirable solution is to apply sizeof to the type but, if the\n  // type of the parameter changes, the programmer has to be aware that the\n  // original/old type is being used in sizeof() someplace else in the\n  // function/program\n\n  wprintf(L\"sizeof BUFFER_SPACE  : %zd\\n\", sizeof(BUFFER_SPACE));  // 200\n\n  getchar();\n}\n\nint main()\n{\n  BUFFER_SPACE abuffer         = { 0 };\n\n  WCHAR anotherbuffer[HUNDRED] = { 0 };\n\n  wprintf(L\"sizeof abuffer        : %zd\\n\", sizeof(abuffer));\n  wprintf(L\"sizeof anotherbuffer  : %zd\\n\", sizeof(anotherbuffer));\n  wprintf(L\"\\n\");\n\n  Function(abuffer);\n\n  return 0;\n}\n</code></pre>\n\n<p>I wanted to get the entire size of the buffer parameter in the function.  Using VC++ and compiling for 64 bit, </p>\n\n<p>sizeof(abuffer) is 8 which makes sense since it is a pointer to the array</p>\n\n<p>sizeof(*abuffer) is 2 which I consider rather questionable but, it is not something I want to debate.</p>\n\n<p>sizeof(BUFFER_SPACE) is 200 as it should be.</p>\n\n<p><strong>My question is:</strong> Is there a way to get the value of 200 from the parameter (abuffer in this case) or is using the type the only way to get it ?</p>\n"}, {"tags": ["c", "arrays", "sorting"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1526444990, "post_id": 50362446, "comment_id": 87741329, "body": "This is not possible unfortunately. You will have to copy the column contents to a temporary array, then sort that array. (Or , similarly, make a temporary array of refs to the original array and sort the refs)"}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1526445072, "post_id": 50362446, "comment_id": 87741348, "body": "Change the function to take the entire 2D array. Pass your function the column number also. Access your elements by both row number (your iteration values) and passed column number."}, {"owner": {"reputation": 393, "user_id": 6145833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de9ecbd610c03a6d78f960bcc933a313?s=128&d=identicon&r=PG&f=1", "display_name": "Amitoj Singh Ahuja", "link": "https://stackoverflow.com/users/6145833/amitoj-singh-ahuja"}, "edited": false, "score": 0, "creation_date": 1526445112, "post_id": 50362446, "comment_id": 87741359, "body": "This same function cant sort the columns of 2D array"}, {"owner": {"reputation": 77, "user_id": 9152512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f356bd00a4e88c9b8f876de8fe779b0e?s=128&d=identicon&r=PG&f=1", "display_name": "pollux552", "link": "https://stackoverflow.com/users/9152512/pollux552"}, "edited": false, "score": 0, "creation_date": 1526445178, "post_id": 50362446, "comment_id": 87741375, "body": "Yes I know I&#39;ll probably need to change the function itself so I can use it in both cases."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1526485169, "post_id": 50362446, "comment_id": 87766237, "body": "@M.M: Why is it not possible? It is commonly done by passing the address of the first element of the two-dimensional array and a stride that is a number of physical elements between subject elements. That does abuse C\u2019s pointer arithmetic, but that can be worked around by doing the address calculations in <code>char</code> units."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1526515073, "post_id": 50362446, "comment_id": 87779077, "body": "@EricPostpischil OP wanted to use the posted code to sort the column"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1526519841, "post_id": 50362446, "comment_id": 87779984, "body": "@M.M: I see no impediment to sorting a column given sufficient information to identify the locations of the elements of the column."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1526520291, "post_id": 50362446, "comment_id": 87780052, "body": "@EricPostpischil Can you post a MCVE showing that , with the <code>sort</code> function in the question unchanged?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1526551191, "post_id": 50362446, "comment_id": 87792736, "body": "@M.M: The question does not ask how to use the same source as shown in the question to sort columns. It asks how to use the same source to sort columns as to sort rows. In other words, to change the function in the question so it can be used to sort rows and can be used to sort columns."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1526590749, "post_id": 50362446, "comment_id": 87816733, "body": "@EricPostpischil the accepted answer doesn&#39;t fit that interpretation , maybe you could write an answer"}], "answers": [{"tags": [], "owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "is_accepted": false, "score": 0, "last_activity_date": 1526445362, "creation_date": 1526445362, "answer_id": 50362527, "question_id": 50362446, "link": "https://stackoverflow.com/questions/50362446/how-to-use-one-function-for-both-rows-and-columns-in-2d-array/50362527#50362527", "title": "How to use one function for both rows and columns in 2D array?", "body": "<p>You can <a href=\"https://en.wikipedia.org/wiki/Transpose#Special_transpose_matrices\" rel=\"nofollow noreferrer\">transpose</a> the incoming 2D array to exchange rows and columns and do the normal sorting.</p>\n\n<p>maybe add a flag to determine if you need to do <code>transpose</code> or not</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1526520332, "post_id": 50362636, "comment_id": 87780057, "body": "<code>int a[][],</code> is an error. Only the innermost brackets may be left empty."}], "tags": [], "owner": {"reputation": 109, "user_id": 7840442, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Rw62LxywxLg/AAAAAAAAAAI/AAAAAAAAD6w/RbEK9OFR0Bk/photo.jpg?sz=128", "display_name": "Raheeb Hassan", "link": "https://stackoverflow.com/users/7840442/raheeb-hassan"}, "is_accepted": true, "score": 1, "last_activity_date": 1557988248, "last_edit_date": 1557988248, "creation_date": 1526446132, "answer_id": 50362636, "question_id": 50362446, "link": "https://stackoverflow.com/questions/50362446/how-to-use-one-function-for-both-rows-and-columns-in-2d-array/50362636#50362636", "title": "How to use one function for both rows and columns in 2D array?", "body": "<p>You can modify the sort function to traverse through columns by passing an extra argument:</p>\n\n<pre><code>void sort(int a[n][m], int n, int col_index){\n    int temp;\n    for (int i = 0; i &lt; n; i++){\n       for (int j = i + 1; j &lt; n; j++){\n           if (a[i][col_index] &gt; a[j][col_index]){\n               temp = a[j][col_index];\n               a[j][col_index] = a[i][col_index];\n               a[i][col_index] = temp;\n           }\n       }\n   }\n}\n</code></pre>\n\n<p>And then implement as follows</p>\n\n<pre><code>for(int i=0;i&lt;m;i++){\n    sort(b,n,i);\n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 77, "user_id": 9152512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f356bd00a4e88c9b8f876de8fe779b0e?s=128&d=identicon&r=PG&f=1", "display_name": "pollux552", "link": "https://stackoverflow.com/users/9152512/pollux552"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 50362636, "answer_count": 2, "score": 0, "last_activity_date": 1557988248, "creation_date": 1526444702, "question_id": 50362446, "link": "https://stackoverflow.com/questions/50362446/how-to-use-one-function-for-both-rows-and-columns-in-2d-array", "title": "How to use one function for both rows and columns in 2D array?", "body": "<p>Let's say I have a sort function for 1D array </p>\n\n<pre><code>void sort(int a[], int n){\n    int temp;\n    for (int i = 0; i &lt; n; i++){\n       for (int j = i + 1; j &lt; n; j++){\n           if (a[i] &gt; a[j]){\n               temp = a[j];\n               a[j] = a[i];\n               a[i] = temp;\n           }\n       }\n   }\n}\n</code></pre>\n\n<p>I know how to make it sort all rows of 2D array: </p>\n\n<pre><code>for (i = 0; i &lt; n; i++)\n       sort(b[i], m); // b is 2d array n - rows m - columns\n</code></pre>\n\n<p>But I'm wondering what do I have to change, to be able to use the <strong>same</strong> function to sort columns instead?</p>\n"}, {"tags": ["c", "function", "inline", "undefined-reference", "inline-functions"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1526442488, "post_id": 50362196, "comment_id": 87740724, "body": "That code is undefined behaviour in ISO C. Remove <code>inline</code> to make it work"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1526442536, "post_id": 50362196, "comment_id": 87740745, "body": "On the other hand, perfectly valid in contemporary C standards. Turn up the compiler flags."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1526442699, "post_id": 50362196, "comment_id": 87740783, "body": "@M.M I misread as &quot;ansi C&quot;, apologies. What&#39;s wrong with <code>inline</code> in C then? It&#39;s been used since C99."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1526442727, "post_id": 50362196, "comment_id": 87740790, "body": "@DeiDei I&#39;ve linked another question. Nothing&#39;s wrong with <code>inline</code> per se, just this code uses it incorrectly"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1526442804, "post_id": 50362196, "comment_id": 87740805, "body": "Alternatively, add <code>static</code> to the function declaration to make it work."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1526443219, "post_id": 50362196, "comment_id": 87740915, "body": "@JohnBollinger <code>inline</code> affects the linkage as described in the linked question"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1526443489, "post_id": 50362196, "comment_id": 87740984, "body": "And note that although the <code>inline</code> specifier requests that calls to the so-marked function be as fast as possible, implementations are not required to honor such requests in any way, and those that do are not required to do so by actually inlining the called function body into its caller."}], "owner": {"reputation": 971, "user_id": 4909889, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0e55dadcd074d895900a408cba1b258b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Saechao", "link": "https://stackoverflow.com/users/4909889/tommy-saechao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "closed_date": 1526442696, "answer_count": 0, "score": 1, "last_activity_date": 1526442383, "creation_date": 1526442383, "question_id": 50362196, "link": "https://stackoverflow.com/questions/50362196/undefined-reference-when-using-inline-functions-in-c", "closed_reason": "Duplicate", "title": "Undefined Reference when using inline functions in C", "body": "<p>This is straight from the GeeksForGeeks' tutorial on C page: <a href=\"https://www.geeksforgeeks.org/interesting-facts-preprocessors-c/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/interesting-facts-preprocessors-c/</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\ninline int square(int x) { return x*x; }\nint main()\n{\nint x = 36/square(6);\nprintf(\"%d\", x);\nreturn 0;\n}\n// Output: 1\n</code></pre>\n\n<p>I get the error:\n/tmp/ccSHJFrH.o: In function <code>main':\na54a7786ee0a4f730407c05eb1147f5f.c:(.text+0xe): undefined reference to</code>square'\ncollect2: error: ld returned 1 exit status</p>\n\n<p>For some reason this compiles when compiling with C++, but with C, I get the error message above. I am running this on the IDE on the GeeksForGeeks website. </p>\n\n<p><a href=\"https://ide.geeksforgeeks.org/index.php\" rel=\"nofollow noreferrer\">https://ide.geeksforgeeks.org/index.php</a></p>\n"}, {"tags": ["c", "enums"], "comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1526441395, "post_id": 50361893, "comment_id": 87740492, "body": "The reason you are getting that error is because both cases B and D are the same enumerated value (1). Thus the case labels are not unique."}, {"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1526441554, "post_id": 50361893, "comment_id": 87740526, "body": "@MFisherKDX yea, thanks, I understood the error, I was just missing the obvious solution"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526463176, "post_id": 50361893, "comment_id": 87750613, "body": "How does that union even make any sense? Are you trying to code some icky &quot;variant&quot;?"}, {"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526469247, "post_id": 50361893, "comment_id": 87754677, "body": "@Lundin I don&#39;t understand your question, it was just a quick example. The actual code is a union of structs with data corresponding to enum values."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526470652, "post_id": 50361893, "comment_id": 87755587, "body": "Yes that&#39;s known as a &quot;variant&quot; and is usually frowned upon for many reasons. For the purpose of type-generic programming, it is more common, safe and memory-efficient to use the enum together with a <code>void*</code> to the data instead and keep it allocated outside the struct."}, {"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1526475649, "post_id": 50361893, "comment_id": 87759093, "body": "@Lundin Ah, didn&#39;t know it was called that. memory efficiency isn&#39;t a concern for me, and it&#39;s just simpler to not have to cast everything. Its local variable anyway in main"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1526463429, "post_id": 50361942, "comment_id": 87750795, "body": "Rather: <code>enum abc { A, B, C, n }; enum def { D=n, E, F };</code> so there&#39;s no tight coupling between the constant <code>C</code> and <code>def</code>. To keep the last item in an enum as a counter rather than a constant is common practice."}, {"owner": {"reputation": 1574, "user_id": 201453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8c2ad298690cba4be2af448954d9f1d2?s=128&d=identicon&r=PG", "display_name": "Patrick Allaert", "link": "https://stackoverflow.com/users/201453/patrick-allaert"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1595506504, "post_id": 50361942, "comment_id": 111502232, "body": "@Lundin&#39;s comment transform <code>enum abc</code> from a 3 possible values enum into a 4 one! Not sure it is good design to include a dummy <code>n</code> value that should not possibly be used in the context of <code>abc</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 1574, "user_id": 201453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8c2ad298690cba4be2af448954d9f1d2?s=128&d=identicon&r=PG", "display_name": "Patrick Allaert", "link": "https://stackoverflow.com/users/201453/patrick-allaert"}, "edited": false, "score": 0, "creation_date": 1595513959, "post_id": 50361942, "comment_id": 111506880, "body": "@PatrickAllaert It&#39;s very common; almost every enum has a counter variable at the end. Another massive benefit is that they can be used to ensure integrity between an enum and a look-up table with named indices. Suppose you have <code>const int TABLE [n] = ...</code> - now you can <code>_Static_assert(sizeof(TABLE) &#47; sizeof(*TABLE) = n, ...</code>. Rugged, readable, safe."}], "tags": [], "owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "is_accepted": true, "score": 5, "last_activity_date": 1526440341, "creation_date": 1526440341, "answer_id": 50361942, "question_id": 50361893, "link": "https://stackoverflow.com/questions/50361893/extend-enum-with-additional-values/50361942#50361942", "title": "Extend enum with additional values", "body": "<p>Your only concern is for the integral constants to be unique. Simply assign the first element of your second <code>enum</code> to the last element of your first <code>enum</code> plus one.</p>\n\n<pre><code>enum abc { A, B, C, };     \nenum def { D = C + 1, E, F }; \n</code></pre>\n"}], "owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1555, "favorite_count": 0, "accepted_answer_id": 50361942, "answer_count": 1, "score": 4, "last_activity_date": 1526440341, "creation_date": 1526439963, "last_edit_date": 1526440283, "question_id": 50361893, "link": "https://stackoverflow.com/questions/50361893/extend-enum-with-additional-values", "title": "Extend enum with additional values", "body": "<p>What is the common practice for extending an <code>enum</code> in C? I have <code>enum</code>s from other includes and would like to extend them with a few values. Hopefully, the following example provides the intuition for what I would like to achieve.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;assert.h&gt;\n\nenum abc { A, B, C, };     /* from some other include */\nenum def { abc, D, E, F }; /* extend enum from other include */\n\nstruct thing_s {\n    enum def kind;         /* use extended enum */\n    union {\n        unsigned n;\n        char c;\n        char *str;\n    } data;\n};\n\nvoid print_thing(struct thing_s *t) {\n    switch (t-&gt;kind) {\n        case A:\n            fprintf(stdout, \"%ul\\n\", t-&gt;data.n);\n            break;\n        case B:\n        case C:\n        case D:\n            fprintf(stdout, \"%s\\n\", t-&gt;data.str);\n            break;\n        case E:\n        case F:\n            fprintf(stdout, \"%c\\n\", t-&gt;data.c);\n            break;\n        default:\n            assert(0);\n    }\n}\n\nint main(int argc, char *argv[]) {\n\n    struct thing_s t;\n    t.kind = A;\n    t.data.n = 1;\n\n    print_thing(&amp;t);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>This doesn't compile with \"duplicate case value\" errors, which I understand because <code>abc</code> is being treated as the first value so it ends up with duplicate integer values for the different symbols.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 3, "creation_date": 1526438744, "post_id": 50361728, "comment_id": 87739885, "body": "Read in a string, try to convert to <code>float</code>, check what happens."}, {"owner": {"reputation": 1522, "user_id": 9760446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799ec2569f8425b7463cba54f91bf9bb?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Dent", "link": "https://stackoverflow.com/users/9760446/arthur-dent"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1526438819, "post_id": 50361728, "comment_id": 87739900, "body": "In addition to what @DeiDei said, you can check if it&#39;s a number, infinity, within a range, etc. as needed. See <a href=\"https://wiki.sei.cmu.edu/confluence/display/c/FLP04-C.+Check+floating-point+inputs+for+exceptional+values\" rel=\"nofollow noreferrer\">this article as an example of some different checks you can perform</a>."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1526441010, "post_id": 50361930, "comment_id": 87740389, "body": "But note that a successful conversion does not ensure that the whole input was consumed.  For example, scanning &quot;1.0XYZ&quot; as you describe will successfully scan the value <code>1.0</code> into variable <code>i</code>, returning 1, and leaving the &quot;XYZ&quot; waiting to be read."}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 1, "last_activity_date": 1526440247, "creation_date": 1526440247, "answer_id": 50361930, "question_id": 50361728, "link": "https://stackoverflow.com/questions/50361728/how-would-i-check-if-an-input-from-the-user-is-a-float/50361930#50361930", "title": "How would I check if an input from the user is a float?", "body": "<p>You check the return value of the <code>scanf</code> call -- it tells you how many conversions succeeded:</p>\n\n<pre><code>if (scanf(\"%f\", &amp;i) == 1) {\n    // the input is a float\n} else {\n    // all other cases -- print an error message\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1526442618, "post_id": 50362104, "comment_id": 87740763, "body": "<code>result == 0.0</code> not needed in <code>(result == 0.0 &amp;&amp; end == message)</code>.    <code>(result == HUGE_VAL || result == -HUGE_VAL)</code> is an incorrect test.  Test for <code>errno</code>"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1526485386, "post_id": 50362104, "comment_id": 87766380, "body": "This code accepts \u201c9z\u201d as a valid input, because <code>end == message</code> accepts any input for which a non-null prefix satisfy the <code>strtod</code> syntax. It is not clear OP wants that. To test whether the entire string constituted an acceptable <code>strtod</code> value, use <code>*end == &#39;\\0&#39; || *message == &#39;\\0&#39;</code> (the latter is needed to reject the case where the input string is empty)."}], "tags": [], "owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "is_accepted": false, "score": 1, "last_activity_date": 1526449334, "last_edit_date": 1526449334, "creation_date": 1526441687, "answer_id": 50362104, "question_id": 50361728, "link": "https://stackoverflow.com/questions/50361728/how-would-i-check-if-an-input-from-the-user-is-a-float/50362104#50362104", "title": "How would I check if an input from the user is a float?", "body": "<p>Read it as a string first:</p>\n\n<pre><code>char message[100+1];\nchar *end = NULL;\ndouble result = 0.0;\nscanf(\"%100s\", message);\n</code></pre>\n\n<p>Then try a safe conversion to double:</p>\n\n<pre><code>result = strtod(message, &amp;end);\nif ((end == message) || errno == ERANGE)) {\n\n    // not a floating point value\n\n}\nelse {\n    // is a floating point value - stored in result\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1526443508, "last_edit_date": 1526443508, "creation_date": 1526443149, "answer_id": 50362269, "question_id": 50361728, "link": "https://stackoverflow.com/questions/50361728/how-would-i-check-if-an-input-from-the-user-is-a-float/50362269#50362269", "title": "How would I check if an input from the user is a float?", "body": "<p>To test if user input is a <code>float</code></p>\n\n<p>Step 1: Read input as a string using <code>fgets()</code> <a href=\"https://stackoverflow.com/questions/50361728/how-would-i-check-if-an-input-from-the-user-is-a-float/50362269#comment87739885_50361728\">@DeiDei</a>.  Best to avoid <code>scanf()</code>.</p>\n\n<pre><code>char buf[1000];\nif (fgets(buf, sizeof buf, stdin) == NULL) {\n  puts(\"End-of-file or rare input error occurred\");\n  return;\n}\n</code></pre>\n\n<p>Could test (not shown) if buffer is such that use input was too large.  IMO, consider that a hostile attack.</p>\n\n<p>Now parse the string;</p>\n\n<pre><code>errno = 0;\nchar *endptr;\nfloat f = strtof(buf, &amp;endptr);\nif (buf == endptr) {\n  puts(\"No conversion\");\n  return;\n}\n\nwhile (isspace((unsigned char) *endptr) endptr++;\nif (*endptr) {\n  puts(\"trailing junk\");\n  return;\n}\n\nif (errno == ERANGE) {\n  puts(\"Out of `float` range.\");  // too big or maybe too small\n  // suggest continue on and use the +/- HUGE_VALF or wee number. \n} else if (errno) {\n  puts(\"Implementation additional error.\");\n  return; \n}\n\n// use `f`\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9797012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc295b83099955c6578b241a094fb5f6?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Sahota", "link": "https://stackoverflow.com/users/9797012/jason-sahota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1526449334, "creation_date": 1526438582, "last_edit_date": 1526439834, "question_id": 50361728, "link": "https://stackoverflow.com/questions/50361728/how-would-i-check-if-an-input-from-the-user-is-a-float", "title": "How would I check if an input from the user is a float?", "body": "<p>I want to write an if statement where if the user input is a float then X happens but I don't actually know how to translate this in to code. The code is below so if anyone could help me that would be great.</p>\n\n<pre><code>// declare a variable\nfloat i = 0;\n\n// ask for an input\nscanf( \"%f\", &amp;i );\n\n// if the input is a float\nif() &lt;--- DON'T KNOW WHAT TO PUT HERE\n{\n// print normally\nprintf();\n} \n\n// in all other cases\nelse \n{\n// print an error message\nprintf();\n}\n</code></pre>\n\n<p>Sorry if this is a really simple question but I'm very new to learning C.</p>\n"}, {"tags": ["c", "r", "numpy"], "comments": [{"owner": {"reputation": 49880, "user_id": 1222578, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daae63146dbed42f50cd56f7268c6260?s=128&d=identicon&r=PG", "display_name": "Marius", "link": "https://stackoverflow.com/users/1222578/marius"}, "edited": false, "score": 0, "creation_date": 1526435138, "post_id": 50361240, "comment_id": 87739180, "body": "I have limited experience with binary formats, but can you not use the <code>size</code> argument of <code>readBin</code> to specify the correct size?"}, {"owner": {"reputation": 13, "user_id": 9286061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CQaWBAoEd8A/AAAAAAAAAAI/AAAAAAAAGdo/YNUKMID92Cg/photo.jpg?sz=128", "display_name": "Lee Drake", "link": "https://stackoverflow.com/users/9286061/lee-drake"}, "reply_to_user": {"reputation": 49880, "user_id": 1222578, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daae63146dbed42f50cd56f7268c6260?s=128&d=identicon&r=PG", "display_name": "Marius", "link": "https://stackoverflow.com/users/1222578/marius"}, "edited": false, "score": 0, "creation_date": 1526436212, "post_id": 50361240, "comment_id": 87739394, "body": "Thank you for the suggestion - I left size blank since the default matched how long I knew the data had to be (~2,000 observations). If I manually set size to something larger (like 8), the problem remains but the data is then an incorrect length (~1,000 observations)"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9286061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CQaWBAoEd8A/AAAAAAAAAAI/AAAAAAAAGdo/YNUKMID92Cg/photo.jpg?sz=128", "display_name": "Lee Drake", "link": "https://stackoverflow.com/users/9286061/lee-drake"}, "edited": false, "score": 0, "creation_date": 1526501009, "post_id": 50362232, "comment_id": 87774328, "body": "Thank you! I&#39;ve been working on this all morning - lots to learn on the C++ front. If you have any example code it would be much appreciated. But I think you are right - Rcpp is the way to go to circumvent R&#39;s limitations."}, {"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "reply_to_user": {"reputation": 13, "user_id": 9286061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CQaWBAoEd8A/AAAAAAAAAAI/AAAAAAAAGdo/YNUKMID92Cg/photo.jpg?sz=128", "display_name": "Lee Drake", "link": "https://stackoverflow.com/users/9286061/lee-drake"}, "edited": false, "score": 0, "creation_date": 1526508136, "post_id": 50362232, "comment_id": 87777254, "body": "@LeeDrake see the updated answer. Probably not the best C++, but it works and shows how the interface with R might look like ..."}, {"owner": {"reputation": 13, "user_id": 9286061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CQaWBAoEd8A/AAAAAAAAAAI/AAAAAAAAGdo/YNUKMID92Cg/photo.jpg?sz=128", "display_name": "Lee Drake", "link": "https://stackoverflow.com/users/9286061/lee-drake"}, "edited": false, "score": 0, "creation_date": 1526510358, "post_id": 50362232, "comment_id": 87777924, "body": "Thank you so much! I see what you are saying now. I can process the binary file in C++ through Rcpp but... the same overflow issue exists (results are identical to numpy &amp; unsigned corrected data in R). I suspect a better solution is in C++, but the odd problem of reversed data continues. I&#39;m increasingly worried that the files produced by the x-ray instruments are fundamentally odd in how they handle large integers."}, {"owner": {"reputation": 13, "user_id": 9286061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CQaWBAoEd8A/AAAAAAAAAAI/AAAAAAAAGdo/YNUKMID92Cg/photo.jpg?sz=128", "display_name": "Lee Drake", "link": "https://stackoverflow.com/users/9286061/lee-drake"}, "edited": false, "score": 0, "creation_date": 1526511992, "post_id": 50362232, "comment_id": 87778385, "body": "As an addendum, the behavior remains the same in R, numpy, and c++, high values overflow to negative values, then continue to positive. Using unsigned definitions only correct overlows that finalized at negative. If they overflowed positive, then they are missed and remain erroneous."}, {"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "reply_to_user": {"reputation": 13, "user_id": 9286061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CQaWBAoEd8A/AAAAAAAAAAI/AAAAAAAAGdo/YNUKMID92Cg/photo.jpg?sz=128", "display_name": "Lee Drake", "link": "https://stackoverflow.com/users/9286061/lee-drake"}, "edited": false, "score": 0, "creation_date": 1526533302, "post_id": 50362232, "comment_id": 87782776, "body": "@LeeDrake Are these numbers greater than 2^32-1? Then they cannot be represented by a 32 bit integer. You will have to analyse the file with a hexeditor to find out what is in there."}, {"owner": {"reputation": 13, "user_id": 9286061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CQaWBAoEd8A/AAAAAAAAAAI/AAAAAAAAGdo/YNUKMID92Cg/photo.jpg?sz=128", "display_name": "Lee Drake", "link": "https://stackoverflow.com/users/9286061/lee-drake"}, "edited": false, "score": 0, "creation_date": 1526578905, "post_id": 50362232, "comment_id": 87810689, "body": "Yes, some values appear to be &gt; 2^32, though most are under that threshold. They might be unsigned long - but if I change &quot;int&quot; in the c++ code with &quot;unsigned long&quot;, the behavior persists.   There may be an alternate solution - I could generate a boolean vector that simply says if wrap around occurred, and then act appropriately. No idea how it is done, but it may be the only way to reconcile the data.   Sorry to occupy so much of your time with this issue - I greatly appreciate your help."}, {"owner": {"reputation": 13, "user_id": 9286061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CQaWBAoEd8A/AAAAAAAAAAI/AAAAAAAAGdo/YNUKMID92Cg/photo.jpg?sz=128", "display_name": "Lee Drake", "link": "https://stackoverflow.com/users/9286061/lee-drake"}, "edited": false, "score": 0, "creation_date": 1526585267, "post_id": 50362232, "comment_id": 87814082, "body": "Got it! The answer was to seek the correct file spot, for this particular problem it was file.seekg(513);"}, {"owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "reply_to_user": {"reputation": 13, "user_id": 9286061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CQaWBAoEd8A/AAAAAAAAAAI/AAAAAAAAGdo/YNUKMID92Cg/photo.jpg?sz=128", "display_name": "Lee Drake", "link": "https://stackoverflow.com/users/9286061/lee-drake"}, "edited": false, "score": 0, "creation_date": 1526621724, "post_id": 50362232, "comment_id": 87824145, "body": "@LeeDrake Good to hear that you found a solution. Care to add it as an answer? That would make the question more useful in the future."}, {"owner": {"reputation": 13, "user_id": 9286061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CQaWBAoEd8A/AAAAAAAAAAI/AAAAAAAAGdo/YNUKMID92Cg/photo.jpg?sz=128", "display_name": "Lee Drake", "link": "https://stackoverflow.com/users/9286061/lee-drake"}, "edited": false, "score": 0, "creation_date": 1526648849, "post_id": 50362232, "comment_id": 87839511, "body": "Just did! Thank you again for your help - I wouldn\u2019t have gotten there if it weren\u2019t for the code you posted."}], "tags": [], "owner": {"reputation": 24192, "user_id": 8416610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cmim3CrZ9Wo/AAAAAAAAAAI/AAAAAAAAAjs/hnKTOHALc6M/photo.jpg?sz=128", "display_name": "Ralf Stubner", "link": "https://stackoverflow.com/users/8416610/ralf-stubner"}, "is_accepted": false, "score": 0, "last_activity_date": 1526508082, "last_edit_date": 1526508082, "creation_date": 1526442814, "answer_id": 50362232, "question_id": 50361240, "link": "https://stackoverflow.com/questions/50361240/import-binary-file-in-r-using-either-typedef-struct-or-numpy/50362232#50362232", "title": "Import binary file in R using either typedef struct or numpy", "body": "<p>I do not find this question that untypical for R, since R has always been a language to interface with code written in other languages like Fortan or C. And while the C API is not exactly easy to use, it is almost trivial to extend R with C++ code using the Rcpp package.  General plan:</p>\n\n<ul>\n<li>Read the data as unsigned integers of suitable size, e.g. <code>uint32_t</code></li>\n<li>Convert to doubles</li>\n<li>Return as <code>Rcpp::NumericVector</code></li>\n<li>Use <code>Rcpp::sourceCpp</code> to make the function available in R</li>\n</ul>\n\n<p>See the <a href=\"http://dirk.eddelbuettel.com/code/rcpp/Rcpp-attributes.pdf\" rel=\"nofollow noreferrer\">Rcpp attributes vignette</a> for more details.</p>\n\n<p>Edit: Here some example code for the above idea:</p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\n#include &lt;fstream&gt;\nusing namespace Rcpp;\n\n// [[Rcpp::export]]\nvoid writeBinary(std::string fileName, NumericVector data) {\n  int size = data.size();\n  int32_t a[size];\n  for (int i = 0; i &lt; size; ++i)\n    a[i] = static_cast&lt;uint32_t&gt;(data(i));\n  std::ofstream file(fileName, std::ios::out | std::ios::binary);\n  if (file.is_open()) {\n    file.write ((char*)&amp;a, sizeof(a));\n    file.close();\n  }\n}\n\n\n// [[Rcpp::export]]\nNumericVector readBinary(std::string fileName, int size) {\n  uint32_t a[size];\n  std::ifstream file (fileName, std::ios::in | std::ios::binary);\n  if (file.is_open()) {\n    file.read ((char*)&amp;a, sizeof(a));\n    file.close();\n  }\n  NumericVector res(size);\n  for (int i = 0; i &lt; size; ++i)\n    res(i) = a[i];\n  return res;\n}\n\n\n/*** R\nfileName &lt;- tempfile()\nN &lt;- 10\ndata &lt;- sample(seq_len(2^32 - 1), N)\nwriteBinary(fileName, data)\nall.equal(data, readBinary(fileName, N))\n*/\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 9286061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CQaWBAoEd8A/AAAAAAAAAAI/AAAAAAAAGdo/YNUKMID92Cg/photo.jpg?sz=128", "display_name": "Lee Drake", "link": "https://stackoverflow.com/users/9286061/lee-drake"}, "is_accepted": true, "score": 0, "last_activity_date": 1526586436, "creation_date": 1526586436, "answer_id": 50399480, "question_id": 50361240, "link": "https://stackoverflow.com/questions/50361240/import-binary-file-in-r-using-either-typedef-struct-or-numpy/50399480#50399480", "title": "Import binary file in R using either typedef struct or numpy", "body": "<p>Ralf Stubner had the correct answer, but it was missing one element that could help, but was specific to the binary files I am working with (but general to those hoping to read binary files through C++ into R). </p>\n\n<p><a href=\"https://i.stack.imgur.com/Of5YO.png\" rel=\"nofollow noreferrer\">The problem was that integer values in the file that were too high were wrapping around.</a></p>\n\n<p>The solution was to implement the C++ code that Ralph offered, but critically, to add a line to search for the a starting position in the file that made sense for the data (file.seekg(number);):</p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\n#include &lt;fstream&gt;\nusing namespace Rcpp;\n\n// [[Rcpp::export]]\nNumericVector readBinary(std::string fileName, int size) {\n    const unsigned long long M = 4294967295LL;\n    uint32_t a[size];\n    std::ifstream file (fileName, std::ios::in | std::ios::binary);\n    if (file.is_open()) {\n        file.seekg(513);\n        file.read ((char*)&amp;a, sizeof(a));\n        file.close();\n    }\n    NumericVector res(size);\n    for (unsigned long long int i = 0; i &lt; size; ++i)\n    res(i) = (a[i]) ;\n    return res;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/uopFA.png\" rel=\"nofollow noreferrer\">By adding this line, the data is correctly displayed. \n</a></p>\n"}], "owner": {"reputation": 13, "user_id": 9286061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CQaWBAoEd8A/AAAAAAAAAAI/AAAAAAAAGdo/YNUKMID92Cg/photo.jpg?sz=128", "display_name": "Lee Drake", "link": "https://stackoverflow.com/users/9286061/lee-drake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 50399480, "answer_count": 2, "score": 0, "last_activity_date": 1526586436, "creation_date": 1526434403, "last_edit_date": 1526435567, "question_id": 50361240, "link": "https://stackoverflow.com/questions/50361240/import-binary-file-in-r-using-either-typedef-struct-or-numpy", "title": "Import binary file in R using either typedef struct or numpy", "body": "<p>I have a binary file that I am trying to import into R. The data I need to access in the file is unsigned long (though other types are in the file). Using readBin() gets close to what the data should look like, but it deviates from what the data should look like:</p>\n\n<pre><code>filepath &lt;- \"path/to/file.bin\"    \nintegers &lt;- readBin(con=filepath, what= \"int\", n=3000, endian=\"little\", signed=FALSE)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/xHSZx.png\" rel=\"nofollow noreferrer\">Blue is the correct data brought in as a csv, while red is the readBin() input in R.</a></p>\n\n<p>This appears to be an overflow due to unsigned integers, which fortunately can be fixed with the following function, but it only works on some values:</p>\n\n<pre><code>int_to_unit &lt;- function (x, adjustment=2^32) {\n  x &lt;- as.numeric(x)\n  signs &lt;- sign(x)\n  x[signs &lt; 0] &lt;- x[signs &lt; 0] + adjustment\n  x\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/myuox.png\" rel=\"nofollow noreferrer\">Correcting for unsigned integers almost works, but only if the data is negative.</a></p>\n\n<p>Basically, the problem is that the 2^32 adjustment only works on data that ends up as negative. If the data happens to overflow > 0, then I cannot recognize it to apply the correction. Worse still, some of it overflows twice, or possibly even more times. </p>\n\n<p>I do have a typedef struct function for C that I could in theory use to import the function, but I have no idea how to do so in R. </p>\n\n<pre><code>typedef struct {data definitions I want to use;} dataIwant;\n</code></pre>\n\n<p>I explored using python to solve this problem, but unfortunately it has the exact same problem</p>\n\n<pre><code>import numpy as np\nxbash = np.fromfile('/binaryfile.bin', dtype='&lt;I')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UW0Bn.png\" rel=\"nofollow noreferrer\">Numpy runs into the exact same problem that readBin() in R has.</a></p>\n\n<p>But it is unclear to me how to proceed. My forseeable options are:</p>\n\n<ol>\n<li>Write a complicated algorithm to post-process the data,</li>\n<li>Call out to C to import a unique filetype into R, or</li>\n<li>Use an intermediary function written in python via the reticulate package</li>\n</ol>\n\n<p>I know this is not a typical problem for the R language - thank you for your time for reading this far.</p>\n"}, {"tags": ["c", "decimal", "division"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 5, "creation_date": 1526433660, "post_id": 50361164, "comment_id": 87738907, "body": "A combination of the <code>&#47;</code> and <code>%</code> operators. Google it, it&#39;s a common beginner&#39;s exercise."}, {"owner": {"reputation": 251, "user_id": 6158118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a58eeafa3935706dedbb1f6d060b4de?s=128&d=identicon&r=PG&f=1", "display_name": "Reda Meskali", "link": "https://stackoverflow.com/users/6158118/reda-meskali"}, "edited": false, "score": 2, "creation_date": 1526433940, "post_id": 50361164, "comment_id": 87738966, "body": "<code>p3 = 152799920 % 1000</code> , <code>p2 = 152799920&#47;1000 % 1000</code> , <code>p1 = 152799920&#47;(1000*1000) % 1000</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1526444286, "post_id": 50361164, "comment_id": 87741177, "body": "If the number was <code>-152799920</code>, what would you expect for <code>p1,p2,p3</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1526454972, "post_id": 50361324, "comment_id": 87745280, "body": "I heavily advise against using double literals. Introducing unnecessary floating point conversions to integer calculations will cause trouble at some point. It may not be problem with these exact values and types in your example, but better not to teach bad habits."}], "tags": [], "owner": {"reputation": 2267, "user_id": 8242447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M6884.gif?s=128&g=1", "display_name": "\u1e42\u0173\u1efb\u1ecbg\u01fb\u0148\u1ea1c\u1ec3\u01a1\u1eed\u1e69", "link": "https://stackoverflow.com/users/8242447/%e1%b9%82%c5%b3%e1%bb%bb%e1%bb%8bg%c7%bb%c5%88%e1%ba%a1c%e1%bb%83%c6%a1%e1%bb%ad%e1%b9%a9"}, "is_accepted": true, "score": 2, "last_activity_date": 1526436162, "last_edit_date": 1526436162, "creation_date": 1526435080, "answer_id": 50361324, "question_id": 50361164, "link": "https://stackoverflow.com/questions/50361164/how-to-represent-one-decimal-number-separated-by-c/50361324#50361324", "title": "How to represent one decimal number separated by C", "body": "<p><strong>For your problem,</strong> simply use the integer division <code>/</code> and modulus <code>%</code> operator to get your desired digits. In this case, it would be</p>\n\n<pre><code>int main()\n{\n    int n = 152799920;\n    int p1 = n / 1000000; // Extract most significant three digits\n    int p2 = (n % 1000000)/1000; // Extract middle three digits\n    int p3 = n % 1000; // Extract least significant three digits\n    printf(\"%d/%d/%d\", p1, p2, p3);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>But what about extracting any range of digits?</strong> Suppose that you index your decimal digits. The smallest rightmost digit is referred as digit 0, whereas the largest (in this case) would be 8. Note that the index of the digits correspond to the base-10 scientific notation, meaning that digit 8 refers to the 10^8 place value.</p>\n\n<p>To extract a range of digits of an int from <code>LSD</code> to <code>MSD</code> in int form, the solution will be of this form (note you have to manually replace <code>[MSD]</code>, <code>[LSD]</code> them with numbers in the actual code):</p>\n\n<pre><code>int p = (n % (int) 1E[MSD + 1])/LSD\n</code></pre>\n\n<p>If you want to extract the digits more significant than a given <code>LSD</code>, it reduces to <code>int p = n / LSD</code>.</p>\n\n<p>Hence, your solution can also be expressed as here below using scientific E-notation. Please note you have to convert to <code>int</code> when calculating the remainder since remainder operators do not work on <code>double</code>s.</p>\n\n<pre><code>int main()\n{\n    int n = 152799920;\n    int p1 = n / 1E6; // Extract digits 6 and higher\n    int p2 = (n % (int) 1E6)/ 1E3; // Extract 3 to 5\n    int p3 = (n % (int) 1E3)/ 1E0; // Extract 0 to 2\n    printf(\"%d/%d/%d\", p1, p2, p3);\n\n    return 0;\n}\n</code></pre>\n\n<p>You can directly copy both of my answers as the main methods all compile. Your result should be <code>152/799/920</code> as expected.</p>\n"}, {"tags": [], "owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "is_accepted": false, "score": 1, "last_activity_date": 1526438113, "creation_date": 1526438113, "answer_id": 50361675, "question_id": 50361164, "link": "https://stackoverflow.com/questions/50361164/how-to-represent-one-decimal-number-separated-by-c/50361675#50361675", "title": "How to represent one decimal number separated by C", "body": "<p>Do you need the numbers as numbers, or as strings?</p>\n\n<p>If strings, use <code>snprintf</code> to get the digits, and then use <code>strncpy</code> to copy out runs of 3.</p>\n\n<p>If numbers, use modulus division to get the remainder after dividing by 1000, then shift the number by using integer division by 1000 and repeat 3 times.</p>\n"}], "owner": {"reputation": 33, "user_id": 9785619, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "KSung", "link": "https://stackoverflow.com/users/9785619/ksung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 50361324, "answer_count": 2, "score": 1, "last_activity_date": 1526454398, "creation_date": 1526433527, "last_edit_date": 1526454398, "question_id": 50361164, "link": "https://stackoverflow.com/questions/50361164/how-to-represent-one-decimal-number-separated-by-c", "title": "How to represent one decimal number separated by C", "body": "<p>I want to divide <code>152799920</code> expressed in decimal numbers into <code>152/799/920</code> expressions and store them separately in <code>p1</code>, <code>p2</code>, and <code>p3</code>, respectively.\nIn other words, when I output values \u200b\u200bfor <code>p1</code>, <code>p2</code>, and <code>p3</code> later, <code>p1 = 152</code>, <code>p2 = 799</code>, and <code>p3 = 920</code> are the result.</p>\n\n<p>How do I implement the above method in C code?</p>\n"}, {"tags": ["c", "file", "linked-list", "fread"], "answers": [{"tags": [], "owner": {"reputation": 3498, "user_id": 6801443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09cba631e2b30cf9b6b8fa433996ef1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sean F", "link": "https://stackoverflow.com/users/6801443/sean-f"}, "is_accepted": false, "score": 3, "last_activity_date": 1526433530, "creation_date": 1526433530, "answer_id": 50361166, "question_id": 50361133, "link": "https://stackoverflow.com/questions/50361133/and-operators-making-my-fread-succeed-in-c/50361166#50361166", "title": "&amp; and * operators making my fread() succeed in C", "body": "<pre><code>*list \n</code></pre>\n\n<p>is a struct pointer,</p>\n\n<pre><code>list \n</code></pre>\n\n<p>is a pointer to a struct pointer.</p>\n\n<p>So to access the books field you need: (*list) -> books</p>\n\n<p>You need to get your precedence straight: <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/c/language/operator_precedence</a></p>\n\n<pre><code>&amp;(*list) -&gt; books \n</code></pre>\n\n<p>is the same as </p>\n\n<pre><code>&amp;((*list) -&gt; books)\n</code></pre>\n\n<p>It is not the same as </p>\n\n<pre><code>list -&gt; books\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9631549, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dylan N.", "link": "https://stackoverflow.com/users/9631549/dylan-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526434766, "creation_date": 1526433207, "last_edit_date": 1526434766, "question_id": 50361133, "link": "https://stackoverflow.com/questions/50361133/and-operators-making-my-fread-succeed-in-c", "title": "&amp; and * operators making my fread() succeed in C", "body": "<p>Okay, so when I use this block of code</p>\n\n<pre><code>fread(&amp;(*list) -&gt; books, sizeof(struct NOVEL), 1, fpread);\n</code></pre>\n\n<p>Everything works fine.</p>\n\n<p>However, when I use this</p>\n\n<pre><code>fread (list -&gt; books, sizeof(struct NOVEL), 1, fpread);\n</code></pre>\n\n<p>I get this error: Member reference base type 'LISTNODEPTR' (aka 'struct listnode *') is not a structure or union.</p>\n\n<p>I thought that * and &amp; cancel each other out, so why is this happening?\nThanks in advance.</p>\n"}, {"tags": ["c", "macros"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1526432447, "post_id": 50360937, "comment_id": 87738663, "body": "<a href=\"https://softwareengineering.stackexchange.com/questions/91854/how-to-train-yourself-to-avoid-writing-clever-code\">&quot;Clever&quot; code is bad code.</a>.  Do not hide confusing code with another level of confusion.  <b>FIX</b> the fundamental problem."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 1, "creation_date": 1526432704, "post_id": 50360937, "comment_id": 87738726, "body": "If <code>var_name</code> is CUST1 only then you need to <code>#ifdef</code> all of it&#39;s use OR just use it in most places and just #ifdef the places where you don&#39;t want it visible."}, {"owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1526432924, "post_id": 50360937, "comment_id": 87738764, "body": "@AndrewHenle I agree with that, the fundamental problem is that it is assigned when the project is compiled for CUSTOMER2.  The &quot;fundamental FIX&quot; is to wrap the logic where it is used in #ifdef CUST1 macros but that doesnt scale very well.  There are more than two customers and now that var_name is externed it may be used elsewhere going forward.  I do agree with you that this over-complicates things but thats the way it goes.  The question is about a macro technique that hides the assignment for CUSTOMER2."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1526439026, "post_id": 50360937, "comment_id": 87739948, "body": "Please clarify whether you want the assignment transformed to (a) a no-op, (b) a compilation error, or (c) a runtime error"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1526439075, "post_id": 50360937, "comment_id": 87739956, "body": "Also if C89 is a requirement, mention that too"}, {"owner": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1526441088, "post_id": 50360937, "comment_id": 87740408, "body": "@M.M anyway I think it&#39;s a bad design. OP wants a flexible code, but tailor made functions for different customers should have been designed as different functional blocks but not only tricky variables (which would greatly increase the difficulty for maintenance)."}, {"owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1526444114, "post_id": 50360937, "comment_id": 87741135, "body": "@M.M I would prefer no-op but run time error would be ok since its unreachable.  caf&#39;s answer below is interesting.  It does have to work for C89.  I would prefer it work for both sides of an assignment, but lvalue is required."}, {"owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "reply_to_user": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "edited": false, "score": 0, "creation_date": 1526444118, "post_id": 50360937, "comment_id": 87741137, "body": "@stan  I agree its a bad design.  This is a giant code base with a lot of customers.  I didn&#39;t design it.  This variable being externed is for a state machine flag that some customers should not be using.  I dont want to #ifdef the assignments with macros i would rather have them converted to no-op when it doesnt apply."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1526444579, "post_id": 50360937, "comment_id": 87741234, "body": "In C99 you can do <code>#define var_name (int[]){0}[0]</code>"}, {"owner": {"reputation": 757, "user_id": 824501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQCRZ.png?s=128&g=1", "display_name": "Stan", "link": "https://stackoverflow.com/users/824501/stan"}, "edited": false, "score": 0, "creation_date": 1526450406, "post_id": 50360937, "comment_id": 87743043, "body": "@Bwebb then what should the no-op do when <code>var_name</code> works as an rvalue  (e.g. somewhere you have <code>x = 1 + var_name * 2</code>)?"}], "answers": [{"comments": [{"owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "edited": false, "score": 0, "creation_date": 1526433636, "post_id": 50361132, "comment_id": 87738904, "body": "Thanks for the response.  If i could &quot;#define var_name 1=&quot; then in main it would be 1==1; which would have no affect and &quot;absorb&quot; the assignment in the CUST2 case.  This doesnt seem to work for me yet though.  Both of your solutions work and if i cant think of anything better ill probably implement the first one and credit your response as the answer, but im still not convinced there isn&#39;t something clever to absorb the assignment."}, {"owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "edited": false, "score": 0, "creation_date": 1526441367, "post_id": 50361132, "comment_id": 87740482, "body": "<code>set_var_to()</code> could even be a <code>static inline</code> function in <code>source1.h</code> so the function call compiles away to nothing in the <code>!CUST1</code> case."}], "tags": [], "owner": {"reputation": 21, "user_id": 5920839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5becbdaa1e54d2d19b24239d4443193?s=128&d=identicon&r=PG&f=1", "display_name": "alinarezrangel", "link": "https://stackoverflow.com/users/5920839/alinarezrangel"}, "is_accepted": false, "score": 1, "last_activity_date": 1526433196, "creation_date": 1526433196, "answer_id": 50361132, "question_id": 50360937, "link": "https://stackoverflow.com/questions/50360937/c-macro-trick-to-hide-assignment/50361132#50361132", "title": "C Macro trick to hide assignment?", "body": "<p>There is no direct way of hiding an assignment as you propose, but there are some alternatives:</p>\n\n<ol>\n<li><p>You could use another macro:</p>\n\n<pre><code>#ifdef CUST1\nextern type var_name;\n/* Do the real assignment */\n#define SET_VAR_TO(val) do{ var_name = (val); } while(0)\n#else\n/* Just evaluate for the side-effects */\n#define SET_VAR_TO(val) do { val; } while(0)\n#endif\n</code></pre>\n\n<p>And then inside source2.c replace all assignments to <code>var_name</code> with <code>SET_VAR_TO(value)</code> like:</p>\n\n<pre><code>int foo(void) {\n    /* Replace\n    var_name = bar();\n    * With: */\n    SET_VAR_TO(bar());\n}\n</code></pre></li>\n<li><p>You could test if <code>CUST1</code> is defined also in source2.c:</p>\n\n<pre><code>/* in source2.c */\nint foo(void) {\n#ifdef CUST1\nvar_name = bar();\n#endif\n}\n</code></pre>\n\n<p>In this case you could even wrap the assignment to a real function only defined in the source file:</p>\n\n<pre><code>/* in source2.c */\nint set_var_to(type value) {\n#ifdef CUST1\nvar_name = value;\n#endif\n}\n\nint foo(void) {\n    /* Replace\n    var_name = bar();\n    * With: */\n    set_var_to(bar());\n}\n</code></pre></li>\n</ol>\n\n<p>As you prefer to not duplicate code by wrapping each assignment inside an <code>#ifdef CUST1 ... #endif</code> you could use the function or the macro. Remember that the option #1 will also expose the macro <code>SET_VAR_TO</code> to any file that <code>#include</code>s source1.h, not just source2.c.</p>\n"}, {"comments": [{"owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "edited": false, "score": 0, "creation_date": 1526434019, "post_id": 50361181, "comment_id": 87738980, "body": "Thanks for the response peter.  Would this still throw an compiler error for C89 if it was not at the top of a scope block?  It looks like its declaring it unused, but its still declaring it and declarations in the middle of a scope block fail compilation for some of my customers."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "edited": false, "score": 0, "creation_date": 1526434601, "post_id": 50361181, "comment_id": 87739092, "body": "Thee I&#39;d no other way in the assignment.  BTW  I do not understand what for"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 1, "last_activity_date": 1526433654, "creation_date": 1526433654, "answer_id": 50361181, "question_id": 50360937, "link": "https://stackoverflow.com/questions/50360937/c-macro-trick-to-hide-assignment/50361181#50361181", "title": "C Macro trick to hide assignment?", "body": "<pre><code>extern int varname;\n\n#define varname __attribute__((unused)) int varname\n\nint square(int num) {\n    varname = 1;\n    return num * num;\n}\n</code></pre>\n\n<p>It will work at any optimization level except the -O0</p>\n\n<p><a href=\"https://godbolt.org/g/phssNn\" rel=\"nofollow noreferrer\">https://godbolt.org/g/phssNn</a></p>\n"}, {"tags": [], "owner": {"reputation": 215710, "user_id": 134633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc6be45ddcfd038ba5e1e5fca319c7fa?s=128&d=identicon&r=PG", "display_name": "caf", "link": "https://stackoverflow.com/users/134633/caf"}, "is_accepted": true, "score": 1, "last_activity_date": 1526479887, "last_edit_date": 1526479887, "creation_date": 1526436383, "answer_id": 50361479, "question_id": 50360937, "link": "https://stackoverflow.com/questions/50360937/c-macro-trick-to-hide-assignment/50361479#50361479", "title": "C Macro trick to hide assignment?", "body": "<p>If the code accessing <code>var_name</code> in <code>source2.c</code> is unreachable when <code>CUST1</code> is not defined (as you seem to say), then you can define it like this:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\n#define var_name (*(abort(), (type *)0))\n</code></pre>\n\n<p>This will work syntactically as an lvalue (or rvalue) of the correct type, but will abort the program if it's actually ever executed.</p>\n"}], "owner": {"reputation": 656, "user_id": 9592917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe6504c31f4954495f952699592361a?s=128&d=identicon&r=PG&f=1", "display_name": "Bwebb", "link": "https://stackoverflow.com/users/9592917/bwebb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 1, "accepted_answer_id": 50361479, "answer_count": 3, "score": 2, "last_activity_date": 1526479887, "creation_date": 1526431163, "last_edit_date": 1526433760, "question_id": 50360937, "link": "https://stackoverflow.com/questions/50360937/c-macro-trick-to-hide-assignment", "title": "C Macro trick to hide assignment?", "body": "<p>I have a project with a handful of files: source1.c source2.c source1.h source2.h.  Now source1.c declares some variables and source1.h externs them (with a conditional build macro).  source2.c would then use the extern variables by <em>assigning</em> a value to them.</p>\n\n<p>The issue is that source1.h has something like the following:</p>\n\n<pre><code>#ifdef CUST1\nextern type var_name;\n#else\n// Need to extern something or use a clever macro here but i dont like these below\n//#define var_name int x (requires top of scope block usage)\n//#define var_name // (doesnt compile)\n//#define var_name -1 (simply doesnt compile)\n//#define var_name 1= (This seems like it would reduce to unused 1==1; but doesnt work)\n#endif\n</code></pre>\n\n<p>My build works for CUST1 but it will not work for CUST2 because var_name is never declared/outta scope when it is referenced in source2.c.</p>\n\n<p>I dont want to use var_name for CUST2 and it is unreachable code in source2.c.  Here is my question, <strong>how can i use a macro to #define var_name so that the assignment \"goes away\" or does nothing?</strong></p>\n\n<p>I could \"#define var_name int x\".  This would put int x on the stack in the source2.c functions and assign the values in source2.c, but if it is ever referenced anywhere besides the top of a scope block, my old (C89?) compiler will error.</p>\n\n<p>For example if source2.c ever had the following it would fail to compile:</p>\n\n<pre><code>unsigned short local_var = 0;\nlocal_var = 1; //or someother value\nvar_name = local_var * 2;\n</code></pre>\n\n<p>I could wrap the logic in source2.c with the same #ifdef CUST1 macros but that seems not so good either.</p>\n\n<p>If var_name was only being compared against it would not be so bad because i could just use #define var_name -1 or something that would fail all compares/switches.  The issues is -1 = temp_var; does not compile because -1 cant be an lvalue.</p>\n\n<p>Similiarly i cant \"#define var_name //\" because comments are removed before the marcos are replaced according to this:<a href=\"https://stackoverflow.com/questions/1785205/can-you-define-a-comment-in-c\">Can you #define a comment in C?</a></p>\n\n<p>Is there a clever macro trick that will hide/remove this assignment, that does not put a local_var on the stack?  I feel like there is something possible with a ternary but i cant think of it.</p>\n\n<p><em>EDIT</em>\nminimal example code:</p>\n\n<p>source1.c</p>\n\n<pre><code>int var_name = 0;\n</code></pre>\n\n<p>source1.h</p>\n\n<pre><code>#ifdef CUST1\nextern int var_name;\n#else\n// clever macro\n#endif\n</code></pre>\n\n<p>source2.c</p>\n\n<pre><code>#include \"source1.h\"\nint main(){\n  var_name = 1;\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1526431659, "post_id": 50360915, "comment_id": 87738481, "body": "<code>int (*p)[2] = matrix;</code>"}], "owner": {"reputation": 11, "user_id": 9796792, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ahmet Ufuk", "link": "https://stackoverflow.com/users/9796792/ahmet-ufuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "closed_date": 1526431639, "answer_count": 0, "score": 1, "last_activity_date": 1526452325, "creation_date": 1526431045, "last_edit_date": 1526452325, "question_id": 50360915, "link": "https://stackoverflow.com/questions/50360915/can-not-assign-matrix-to-pointer", "closed_reason": "Duplicate", "title": "Can not Assign Matrix to **Pointer", "body": "<p>I want to assign matris to pointer and print it. but i can't. Code doesn't work. Give this error \"Documents\\Untitled4.cpp   [Error] cannot convert 'int (*)[2][2]' to 'int**' in initialization\"   How can i print  like this **p[i][j]?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\n\nint main (int argc,const char * argv[]){\n    int matrix [2][2]={{1,2},{3,4}};\n    int **p=&amp;matrix;\n    int i,j;\n    for(i=0;i&lt;2;i++)\n    {\n        for(j=0;j&lt;2;j++)\n        {\n            printf(\"%d\",p[i][j]);\n        }\n    }\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "data-structures", "binary-search-tree"], "answers": [{"comments": [{"owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "reply_to_user": {"reputation": 1537, "user_id": 968000, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/tU8sw.jpg?s=128&g=1", "display_name": "user968000", "link": "https://stackoverflow.com/users/968000/user968000"}, "edited": false, "score": 0, "creation_date": 1526430235, "post_id": 50360812, "comment_id": 87738197, "body": "You&#39;re welcome.  You might also want to investigate the recursive BST insert node function that returns a node pointer, I think it looks much cleaner than this one that modifies the node * argument.  If you are interested, let me know and I will dig up my version and post it for you."}, {"owner": {"reputation": 1537, "user_id": 968000, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/tU8sw.jpg?s=128&g=1", "display_name": "user968000", "link": "https://stackoverflow.com/users/968000/user968000"}, "edited": false, "score": 1, "creation_date": 1526430498, "post_id": 50360812, "comment_id": 87738252, "body": "I did find solutions which return the node pointer on google. But I wanted to purposefully update the root pointer to better understand pointers. Although I do agree with you that solution which returns node pointer is much cleaner. Thanks!"}], "tags": [], "owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "is_accepted": true, "score": 1, "last_activity_date": 1526429920, "creation_date": 1526429920, "answer_id": 50360812, "question_id": 50360752, "link": "https://stackoverflow.com/questions/50360752/inserting-elements-in-a-bst/50360812#50360812", "title": "Inserting elements in a BST", "body": "<p>You almost had it, just a couple things in <code>insertNodeinBST()</code>:</p>\n\n<p>You should only create the new node when <code>root</code> is <code>NULL</code>, otherwise, you keep creating a new node every time you visit a new node, looking for the place to insert:</p>\n\n<pre><code>//check if root is null\nif (*root == NULL) {\n    node *new_n = (node*)malloc(sizeof(node));\n    new_n-&gt;leftChild = new_n-&gt;rightChild = NULL;\n    new_n-&gt;data = data;\n\n    *root = new_n;\n}\n</code></pre>\n\n<p>The code above takes care of inserting the new node, so you don't need the other assigns, change:</p>\n\n<pre><code>} else if (data &lt; (*root)-&gt;data) {\n    //if data is less than current root's data add it to left child\n    insertNodeinBST(data, &amp;(*root)-&gt;leftChild);\n    (*root)-&gt;leftChild = new_n;\n} else {\n    //if data is more than current root's data add it to right child\n    insertNodeinBST(data, &amp;(*root)-&gt;rightChild);\n    (*root)-&gt;rightChild = new_n;\n}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>} else if (data &lt; (*root)-&gt;data) {\n    //if data is less than current root's data add it to left child\n    insertNodeinBST(data, &amp;(*root)-&gt;leftChild);\n} else {\n    //if data is more than current root's data add it to right child\n    insertNodeinBST(data, &amp;(*root)-&gt;rightChild);\n}\n</code></pre>\n\n<p>the recursive call will set the pointer to the new node when it reaches the correct empty node.</p>\n"}], "owner": {"reputation": 1537, "user_id": 968000, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/tU8sw.jpg?s=128&g=1", "display_name": "user968000", "link": "https://stackoverflow.com/users/968000/user968000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 50360812, "answer_count": 1, "score": 1, "last_activity_date": 1526430463, "creation_date": 1526429361, "last_edit_date": 1526430463, "question_id": 50360752, "link": "https://stackoverflow.com/questions/50360752/inserting-elements-in-a-bst", "title": "Inserting elements in a BST", "body": "<p>I am trying to insert elements in a BST and not getting correct results.\nInstead of getting all the array elements printed out, I only get <code>1,11,14</code> elements printed instead of entire array elements.</p>\n\n<pre><code>int arr[10] = { 11, 2, 4, 23, 1, 98, 88, 65, 33, 14 };\nvoid insertNodeinBST(int data,node **root){\n\n    node *new_n = (node*)malloc(sizeof(node));\n    new_n-&gt;leftChild = new_n-&gt;rightChild = NULL;\n    new_n-&gt;data = data;\n      //check if root is null\n    if (*root == NULL) {\n        *root = new_n;   \n    }\n    else if (data &lt; (*root)-&gt;data){\n        //if data is less than current root's data add it to left child\n        insertNodeinBST(data, &amp;(*root)-&gt;leftChild);\n        (*root)-&gt;leftChild = new_n;\n    }\n    else {\n      //if data is more than current root's data add it to right child\n        insertNodeinBST(data, &amp;(*root)-&gt;rightChild);   \n        (*root)-&gt;rightChild = new_n;\n    }\n\n}\n\n//print BST \nvoid printInorder(node *root){\n\n        if (root == NULL)\n            return;\n\n        /* first recur on left child */\n        printInorder(root-&gt;leftChild);\n\n        /* then print the data of node */\n        printf(\"%d \", root-&gt;data);\n\n        /* now recur on right child */\n        printInorder(root-&gt;rightChild);\n\n}\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n\n    int i = 0;\n    node *root = NULL;\n    for (i = 0; i &lt; 10; i++){\n        //inserting nodes\n        insertNodeinBST(arr[i], &amp;root);\n    }\n    printInorder(root);\n    return 0;\n}\n</code></pre>\n\n<p>Please let me know what I am missing here. </p>\n"}, {"tags": ["python", "c", "gtk", "pygobject"], "owner": {"reputation": 674, "user_id": 4010066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fac3a8d1a7f936df8164c41bb9aebdd?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Solchenberger", "link": "https://stackoverflow.com/users/4010066/adam-solchenberger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1526427645, "creation_date": 1526427645, "question_id": 50360564, "link": "https://stackoverflow.com/questions/50360564/mixing-pygobject-python-wrapper-and-c-gtk", "title": "mixing pygobject (python wrapper) and C GTK+", "body": "<p>I'm interested in being able to mix python and C code with GTK+. I'm capable of creating shared object libs in C and accessing them from python. I'm wondering how to gain access to the GtkWidget pointer from a pygobject class and pass that into the C function. Another possibility is to create the GtkWidget in a C function, but I would still need a pointer to the parent widget I want to pack_start to etc. I would like to do openGl code in C for the GLArea widget and pack it into a pygobject Gtk.Box(). I know it's possible to use the python wrapper for openGl. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 2, "creation_date": 1526427860, "post_id": 50360550, "comment_id": 87737736, "body": "You need to copy the string into the memory you allocate. You&#39;re just assigning a pointer and leaking memory right now."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1526427884, "post_id": 50360550, "comment_id": 87737741, "body": "You are reading every input into array <code>str</code>, and then assigning a pointer to <code>str</code> to your list element.  All the elements point to the same place.  Learn to use <code>strcpy()</code> instead of <code>=</code> to copy strings."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1526428080, "post_id": 50360550, "comment_id": 87737776, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/27540759/why-the-output-is-last-string-from-user\">why the output is last string from user?</a>"}, {"owner": {"reputation": 1025, "user_id": 1683793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/384cc6ed9450635fc4189e1a5a840dd5?s=128&d=identicon&r=PG", "display_name": "user1683793", "link": "https://stackoverflow.com/users/1683793/user1683793"}, "edited": false, "score": 2, "creation_date": 1526428356, "post_id": 50360550, "comment_id": 87737823, "body": "If you change the lines: <code>list.words[list.length - 1] = (char*)malloc(sizeof(char) * 30); list.words[list.length - 1] = str;</code> into <code>list.words[list.length -1]=strdup(str);</code> you will be more pleased.  You are allocating memory and throwing it away with the assignment."}], "answers": [{"comments": [{"owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "reply_to_user": {"reputation": 67, "user_id": 9797007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fab3ec2e110e099adfd18fb569a703?s=128&d=identicon&r=PG&f=1", "display_name": "Omer", "link": "https://stackoverflow.com/users/9797007/omer"}, "edited": false, "score": 0, "creation_date": 1526428549, "post_id": 50360610, "comment_id": 87737863, "body": "What error?  Perhaps <code>strcpy undefined</code>?  If so then #include &lt;string.h&gt;"}, {"owner": {"reputation": 67, "user_id": 9797007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fab3ec2e110e099adfd18fb569a703?s=128&d=identicon&r=PG&f=1", "display_name": "Omer", "link": "https://stackoverflow.com/users/9797007/omer"}, "edited": false, "score": 1, "creation_date": 1526429066, "post_id": 50360610, "comment_id": 87737959, "body": "I know, still got error. I added the line list.words[list.length -1]=strdup(str); and now it works"}, {"owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "reply_to_user": {"reputation": 67, "user_id": 9797007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fab3ec2e110e099adfd18fb569a703?s=128&d=identicon&r=PG&f=1", "display_name": "Omer", "link": "https://stackoverflow.com/users/9797007/omer"}, "edited": false, "score": 0, "creation_date": 1526429113, "post_id": 50360610, "comment_id": 87737967, "body": "I can&#39;t help you if you don&#39;t tell me what the error is."}, {"owner": {"reputation": 67, "user_id": 9797007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fab3ec2e110e099adfd18fb569a703?s=128&d=identicon&r=PG&f=1", "display_name": "Omer", "link": "https://stackoverflow.com/users/9797007/omer"}, "edited": false, "score": 0, "creation_date": 1526429520, "post_id": 50360610, "comment_id": 87738050, "body": "Visual Studio doesn&#39;t give details (in c at least). &quot;The program stopped working&quot;"}], "tags": [], "owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "is_accepted": false, "score": 1, "last_activity_date": 1526428030, "creation_date": 1526428030, "answer_id": 50360610, "question_id": 50360550, "link": "https://stackoverflow.com/questions/50360550/all-the-values-are-the-same-when-i-use-dynamic-allocation/50360610#50360610", "title": "All the values are the same when I use dynamic allocation", "body": "<p>You are assigning the string incorrectly:</p>\n\n<pre><code>list.words[list.length - 1] = str;\n</code></pre>\n\n<p>this just assigns the <code>list.words</code> pointer to <code>str</code> and <code>str</code> gets overwritten by the latest word the user inputs.  You need to</p>\n\n<pre><code>strcpy(list.words[list.length - 1], str);\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 9797007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3fab3ec2e110e099adfd18fb569a703?s=128&d=identicon&r=PG&f=1", "display_name": "Omer", "link": "https://stackoverflow.com/users/9797007/omer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1526435225, "creation_date": 1526427503, "last_edit_date": 1526435225, "question_id": 50360550, "link": "https://stackoverflow.com/questions/50360550/all-the-values-are-the-same-when-i-use-dynamic-allocation", "title": "All the values are the same when I use dynamic allocation", "body": "<p>I try to get words from user until he enters <code>0</code> and then print it. I want to dynamically allocate a size for the list after every word (by using struct):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct my_struct\n{\n    char** words;\n    int length;\n} my_struct;\n\n\nint main(void)\n{\n    struct my_struct list = { 0,0 };\n    list.words = (char**)malloc(0);\n    int choice = 1, i = 0;\n    char str[30];\n    printf(\"Enter 0 to exit or any other number to continue: \");\n    scanf(\"%d\", &amp;choice);\n    while (choice)\n    {\n        list.length += 1;\n        list.words = (char**)realloc(list.words, sizeof(char*) * list.length);\n        printf(\"Enter a word: \");\n        getchar();\n        fgets(str, 30, stdin);\n        list.words[list.length - 1] = (char*)malloc(sizeof(char) * 30);\n        list.words[list.length - 1] = str;\n        printf(\"Enter 0 to exit or any other number to continue: \");\n        scanf(\"%d\", &amp;choice);\n    }\n    printf(\"Values:\\n\");\n    for (i = 0; i &lt; list.length; i++)\n    {\n        printf(\"%s\", list.words[i]);\n    }\n    free(list.words);\n    getchar();\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ycAqJ.png\" rel=\"nofollow noreferrer\">output</a>\nWhy does it happen?</p>\n"}, {"tags": ["c", "arrays", "string", "file", "sorting"], "comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 2, "creation_date": 1526425963, "post_id": 50360299, "comment_id": 87737293, "body": "If these are the complete requirements, you don&#39;t need to sort. Just keep track of the largest score seen so far while reading your input file. If you find a larger score, store it with the corresponding name."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1526426071, "post_id": 50360299, "comment_id": 87737327, "body": "Also, this is tagged as C but you mention references. Did you mean to tag as C++?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1526427385, "post_id": 50360299, "comment_id": 87737638, "body": "The answer is &quot;Pele&quot; with a score of &quot;12300&quot;. The code already reads the name and the corresponding score in one <code>fscanf</code>. All you need to do is compare the score with the best score seen so far. If the new score is better, then <code>strcpy</code> the <code>name</code> into another string, and update the best score."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526476744, "post_id": 50360875, "comment_id": 87759905, "body": "I have updated my code to reflect the changes you told me to make:        <code>input = fopen(&quot;scores.txt&quot;, &quot;r&quot;);  \tif (input == NULL) \t{ \t\tprintf(&quot;\\n Cannot open scores.txt for input\\n&quot;); \t} \tfor (a = 0; a &lt; 5; ++a) \t{ \t\tfscanf(input, &quot;%s%lf&quot;, name, score); \t\tif (highscore &lt; score[a]) \t\t{ \t\t\thighscore = score[a]; \t\t\tstrcpy(highscorename, name); \t\t} \t}  \tprintf(&quot; The highscore is %s with %f points.&quot;, highscorename, score); \tprintf(&quot;\\n\\n&quot;);  \tfclose(input);</code>  However now visual studio is telling me that fopen, fscanf and strncpy are unsafe. Do you know why this would be?"}, {"owner": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526477097, "post_id": 50360875, "comment_id": 87760189, "body": "Also I get the error &#39;printf&#39; : format string &#39;%f&#39; requires an argument of type &#39;double&#39;, but variadic argument 2 has type &#39;double*&#39; why would I be getting this error aswell??"}, {"owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "reply_to_user": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526490146, "post_id": 50360875, "comment_id": 87769005, "body": "The <code>unsafe</code> warning may be because visual studio sees that <code>input</code> can be <code>NULL</code> and fail to open, but you don&#39;t actually do anything about it except print a message. You should return 1 which exits the program before trying a operation on a potentially invalid file descriptor. as for <code>printf</code>, the warning is self explanatory... score is of type <code>double *</code> you want to be printing <code>highScore</code>."}, {"owner": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526491849, "post_id": 50360875, "comment_id": 87769899, "body": "Where should I put the &quot;return 1&quot; to? I placed it at the end of my coding where I previously had &quot;return 0&quot; but I still get the errors. Thanks"}, {"owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "reply_to_user": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526491923, "post_id": 50360875, "comment_id": 87769930, "body": "inside the <code>if (input == NULL){}</code> statement. That way the program exits if the file fails to open, and you don&#39;t try to call <code>fscanf</code>, etc on an invalid file pointer."}, {"owner": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526492259, "post_id": 50360875, "comment_id": 87770134, "body": "Thanks... although now I am only getting &quot;The highscore is Ronaldo with 10400 points&quot; It doesn&#39;t seem to be searching through the program to look for players with a higher score... Any thoughts on why this is?"}, {"owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "reply_to_user": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526493618, "post_id": 50360875, "comment_id": 87770810, "body": "Have you tried anything to debug? Perhaps add print statements or some sort of check?"}, {"owner": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526494310, "post_id": 50360875, "comment_id": 87771178, "body": "To me it looks like it is a looping issue with the if statement. it doesn&#39;t seem to be working properly. I previously had one that I wrote up and it was giving me a lot of errors so I am now using the one that you suggested. Was this working properly for you and giving pele as the highscore?"}, {"owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "reply_to_user": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "edited": false, "score": 0, "creation_date": 1526499625, "post_id": 50360875, "comment_id": 87773720, "body": "I&#39;m not actually running your code at all, I&#39;m just looking at it. Right now I don&#39;t see any glaring errors, try printing the values of your variables every iteration of the for loop to see what it&#39;s doing (or use a debugger...). That might give you (and someone helping you) a better idea."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1526512610, "post_id": 50360875, "comment_id": 87778548, "body": "That&#39;s not what I had in mind. It&#39;s always a good idea to try compiling the code."}], "tags": [], "owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "is_accepted": true, "score": 0, "last_activity_date": 1526504155, "last_edit_date": 1526504155, "creation_date": 1526430709, "answer_id": 50360875, "question_id": 50360299, "link": "https://stackoverflow.com/questions/50360299/sorting-words-and-numbers-from-a-file-in-c/50360875#50360875", "title": "Sorting Words and Numbers from a file in C", "body": "<p>You can just read the number and name in, and replace the value of the score and the name if its bigger.</p>\n\n<pre><code>char name[name_len];\ndouble score[score_len];\nchar highScoreName[name_len];\ndouble highScore = 0;\n...\nfor (int a = 0; a &lt; 5; ++a) \n   {\n   fscanf(input, \"%s %lf\", name, score[a]);\n   if (highScore &lt; score[a]) \n   {\n      highScore = score[a];\n      strcpy(highScoreName, name);\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9797022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10aec3b8e406e38ce1460c49e88c2ce1?s=128&d=identicon&r=PG&f=1", "display_name": "ayetman96", "link": "https://stackoverflow.com/users/9797022/ayetman96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 50360875, "answer_count": 1, "score": 1, "last_activity_date": 1526504155, "creation_date": 1526425441, "last_edit_date": 1526426150, "question_id": 50360299, "link": "https://stackoverflow.com/questions/50360299/sorting-words-and-numbers-from-a-file-in-c", "title": "Sorting Words and Numbers from a file in C", "body": "<p>I have been tasked with writing a function that takes a string reference and an integer reference parameter. The function must scan a .txt file and set the reference parameters to the name of the player with the highest score and the corresponding score.\nThis is written in the scores.txt file I must reference:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Ronaldo\n10400\nDidier\n9800\nPele\n12300\nkaka\n8400\nCristiano\n8000\n</code></pre>\n\n<p>I currently have this much coding wrote however I am stuck as to how I am suppose to match the names up with the score since they have to be in no particular order. Within my coding I sort the numbers from greatest to least but I am not sure if this is needed or not.</p>\n\n<pre><code>FILE *input;\nchar name[name_len];\ndouble score[score_len];\nint a;\nint b;\ndouble placeholder;\n\ninput = fopen(\"scores.txt\", \"r\");\n\nif (input == NULL)\n{\n    printf(\"\\n Cannot open scores.txt for input\\n\");\n}\nfor (a =0; a &lt; 5; ++a)\nfscanf(input, \"%s%lf\", name, score);\n\nfor (a = 0; a &lt; 5; ++a)                                     /* Repeats the step until three numbers are sorted*/\n{\n    for (b = a + 1; b &lt; 5; ++b)                             /* Repeats until the last two numbers are sorted*/\n    {\n        if (score[a] &lt; score[b])                                /* Sorts the 3 numbers using a placeholder to exchange the numbers in the array*/\n        {\n            placeholder = score[a];\n            score[a] = score[b];\n            score[b] = placeholder;\n        }\n\n    }\n}\n\n\nfclose(input);\nreturn 0;\n</code></pre>\n\n<p>Any help regarding the solution or how I can move forward is much appreciated.</p>\n"}, {"tags": ["c", "arrays", "reference"], "comments": [{"owner": {"reputation": 613, "user_id": 3112926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33809c5d0f78b110e8613c9e5972dd5?s=128&d=identicon&r=PG&f=1", "display_name": "JGroven", "link": "https://stackoverflow.com/users/3112926/jgroven"}, "edited": false, "score": 0, "creation_date": 1526425294, "post_id": 50360260, "comment_id": 87737141, "body": "c does not pass by reference.  You can pass by pointer, though."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "reply_to_user": {"reputation": 613, "user_id": 3112926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33809c5d0f78b110e8613c9e5972dd5?s=128&d=identicon&r=PG&f=1", "display_name": "JGroven", "link": "https://stackoverflow.com/users/3112926/jgroven"}, "edited": false, "score": 2, "creation_date": 1526425537, "post_id": 50360260, "comment_id": 87737206, "body": "@JGroven The term &quot;pass by reference&quot; is still valid though. It is just the implementation uses pointers."}, {"owner": {"reputation": 613, "user_id": 3112926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33809c5d0f78b110e8613c9e5972dd5?s=128&d=identicon&r=PG&f=1", "display_name": "JGroven", "link": "https://stackoverflow.com/users/3112926/jgroven"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1526425684, "post_id": 50360260, "comment_id": 87737238, "body": "@John3136 I agree, it&#39;s a minor linguistic nuance, but I think it&#39;s important just to note that C doesn&#39;t use references in the way C++ does."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1526426465, "post_id": 50360260, "comment_id": 87737411, "body": "it is actually explained in any elementary C book or online tutorial"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 1, "creation_date": 1526427983, "post_id": 50360260, "comment_id": 87737759, "body": "@John3136 &quot;pass by reference&quot; is a valid term, but it does not apply to C.  Passing pointers by value -- which is the closest thing C affords -- has slightly different semantics."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1526443876, "post_id": 50360260, "comment_id": 87741067, "body": "<code>printf(&quot; %d&quot;, &amp;num[i]);</code> causes undefined behaviour by using the wrong format specifier"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1526443942, "post_id": 50360260, "comment_id": 87741082, "body": "@JohnBollinger In C you can implement the programming concept &quot;pass by reference&quot; by passing pointers. IMO it is unhelpful to say that pass by reference is not possible in C."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1526444604, "post_id": 50360260, "comment_id": 87741237, "body": "@M.M, passing pointers by value is indeed similar to pass-by-reference, but it is <i>not</i> the same thing.  Notably, in pass-by-reference the called function can always expect to receive a valid reference to an object, but the analog is not guaranteed when passing pointers by value.  Perhaps it is a bit pedantic to point out the distinction, but it is relevant, and important to understand."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1526479857, "post_id": 50360260, "comment_id": 87762387, "body": "Arrays <b>cannot</b> be passed by value in C.  Only pointers to arrays can be used as function arguments.  Sometimes this is obscured (because you can write <code>foo(int a[])</code>), but there&#39;s no difference."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5534576, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ha_U7n9aZNo/AAAAAAAAAAI/AAAAAAAAATk/nGOXXmUql7w/photo.jpg?sz=128", "display_name": "Kamal Ahmad", "link": "https://stackoverflow.com/users/5534576/kamal-ahmad"}, "edited": false, "score": 0, "creation_date": 1526474760, "post_id": 50360686, "comment_id": 87758427, "body": "So there is no mechanism to pass values of an array to a function by copying method? The pointer(reference) of the array is passed onto the function and it using that memory address to go through the elements location?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 27, "user_id": 5534576, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ha_U7n9aZNo/AAAAAAAAAAI/AAAAAAAAATk/nGOXXmUql7w/photo.jpg?sz=128", "display_name": "Kamal Ahmad", "link": "https://stackoverflow.com/users/5534576/kamal-ahmad"}, "edited": false, "score": 0, "creation_date": 1526477066, "post_id": 50360686, "comment_id": 87760166, "body": "@KamalAhmad if what you want is to pass the array itself, then you have understood me correctly: there is no mechanism for passing a copy of the array elements.  Of course, the receiving function can explicitly make a copy itself.  However, an array can be a member of a structure, and structures (not just pointers to them) can be function arguments, and therefore passed by value, resulting in all members, including array members, being copied."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1526428731, "creation_date": 1526428731, "answer_id": 50360686, "question_id": 50360260, "link": "https://stackoverflow.com/questions/50360260/passing-array-to-function-by-value-or-reference-the-same/50360686#50360686", "title": "Passing array to function by value or reference the same?", "body": "<p>You cannot pass an array itself to a function <em>at all</em>, nor can you return one.  In particular, despite the appearance of its declaration, your function <code>display()</code> does not receive an array as a parameter.  It's declaration is 100% equivalent to this one:</p>\n\n<pre><code>void display(int *b, int size);\n</code></pre>\n\n<p>and this one:</p>\n\n<pre><code>void display(int b[], int size);\n</code></pre>\n\n<p>Expressions of array type are automatically converted to pointers in almost every context in which they can appear, so this function call:</p>\n\n<blockquote>\n<pre><code>display(num,5);\n</code></pre>\n</blockquote>\n\n<p>is equivalent to</p>\n\n<pre><code>display(&amp;num[0],5);\n</code></pre>\n\n<p>Nevertheless, there is a potential difference to call out in this area: the expression <code>&amp;num</code> is <em>not</em> equivalent to <code>&amp;num[0]</code>.  They refer to the same address, but the two expressions have different types.  Passing the former would be the analog of passing the array by reference, but that expression does not have the correct type for the first argument to your <code>display()</code> function.  A function that wants to receive &amp;num needs to be declared differently:</p>\n\n<pre><code>void display2(int (*b)[5]);\n</code></pre>\n\n<p>or </p>\n\n<pre><code>void display3(int n, int (*b)[n]);\n</code></pre>\n\n<p>The latter requires C99, or C2011 with VLA support (which is required in C99, but optional in C2011).</p>\n"}], "owner": {"reputation": 27, "user_id": 5534576, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ha_U7n9aZNo/AAAAAAAAAAI/AAAAAAAAATk/nGOXXmUql7w/photo.jpg?sz=128", "display_name": "Kamal Ahmad", "link": "https://stackoverflow.com/users/5534576/kamal-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 719, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526474128, "creation_date": 1526425211, "last_edit_date": 1526446322, "question_id": 50360260, "link": "https://stackoverflow.com/questions/50360260/passing-array-to-function-by-value-or-reference-the-same", "title": "Passing array to function by value or reference the same?", "body": "<p>I want to know if there is any real difference; I have written code that as it feel it a passing by copy not reference but it acts as reference.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\nusing namespace std;\nint pause = 0;\n\nvoid display(int b[5], int size){\n    for (int i = 0; i &lt; size; i++){\n        printf(\"\\n%d\",b[i],\" at:\");\n        printf(\" %d\", &amp;b[i]);\n    }\n}\n\nvoid main(){\n\n    int num[] = { 2, 4, 6, 8, 10 };\n    printf(\"\\nIn main function.\");\n    for (int i = 0; i &lt; 5; i++){\n        printf(\"\\n%d\", num[i], \" at:\");\n        printf(\" %d\", &amp;num[i]);\n    }\n    display(num,5);\n\n    scanf(\"%d\", pause);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1526427462, "post_id": 50360175, "comment_id": 87737656, "body": "Do you mean <code>%0.f</code> or <code>%.0f</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "edited": false, "score": 3, "creation_date": 1526425158, "post_id": 50360238, "comment_id": 87737111, "body": "I think you moved the zero to the other side of the decimal point, inadvertently answering a different question."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "edited": false, "score": 0, "creation_date": 1526427065, "post_id": 50360238, "comment_id": 87737573, "body": "@EdwinBuck: I half suspect OP accidentally moved the zero to the other side when typing the title and this answer moved it back, perhaps half accidentally."}, {"owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1526427887, "post_id": 50360238, "comment_id": 87737742, "body": "@EricPostpischil Well, that might be true; but, if I interpret his question to be other than what he asked, I might come up with even more answers :)  All which would be correct for my interpretation(s), but none of which would be correct for what he asked."}, {"owner": {"reputation": 84, "user_id": 9761489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bc55421a6e0da3625f5b8b80826acd2?s=128&d=identicon&r=PG&f=1", "display_name": "Russell Jurek", "link": "https://stackoverflow.com/users/9761489/russell-jurek"}, "edited": false, "score": 0, "creation_date": 1526476518, "post_id": 50360238, "comment_id": 87759741, "body": "The poster specified he wanted to print a float \u2018to no decimal places\u2019 i.e. without digits after the decimal. That made it obvious he made a typo. I answered what seemed to be his intended question to save time."}], "tags": [], "owner": {"reputation": 84, "user_id": 9761489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bc55421a6e0da3625f5b8b80826acd2?s=128&d=identicon&r=PG&f=1", "display_name": "Russell Jurek", "link": "https://stackoverflow.com/users/9761489/russell-jurek"}, "is_accepted": false, "score": 0, "last_activity_date": 1526425088, "creation_date": 1526425088, "answer_id": 50360238, "question_id": 50360175, "link": "https://stackoverflow.com/questions/50360175/is-there-a-difference-between-0-f-and-f-in-c/50360238#50360238", "title": "Is there a difference between %0.f and %.f in C", "body": "<p>No. They\u2019re not the same. The output will look the same though if the float doesn\u2019t have any digits after the decimal point. When there are digits after the decimal, depending upon the compiler %.0f will either truncate, round, floor or ceil to remove them. %.f displays whatever digits are provided up to a compiler specified maximum. Typically ~6 digits. It\u2019s usually set to something sensible based on the size of float and the corresponding number of digits. </p>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 8069867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9013cf43dabce90a950233904db935?s=128&d=identicon&r=PG&f=1", "display_name": "Falk", "link": "https://stackoverflow.com/users/8069867/falk"}, "is_accepted": false, "score": 0, "last_activity_date": 1526427644, "last_edit_date": 1526427644, "creation_date": 1526426171, "answer_id": 50360395, "question_id": 50360175, "link": "https://stackoverflow.com/questions/50360175/is-there-a-difference-between-0-f-and-f-in-c/50360395#50360395", "title": "Is there a difference between %0.f and %.f in C", "body": "<p>From the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf\" rel=\"nofollow noreferrer\">C99 Ansi Standard</a> section 7.19.6.10 regarding fprintf of floats:</p>\n\n<blockquote>\n  <p>In no case does a nonexistent or small field width cause truncation of a field; if the result of a conversion is wider than the field width, the field is expanded to contain the conversion result.</p>\n</blockquote>\n\n<p>So the result will probably be the same whether you write '%.f' or '%0.f' if your number needs a decimal, and it will not cut it off as might be expected.</p>\n"}, {"comments": [{"owner": {"reputation": 7534, "user_id": 1175714, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/91812afdd697c55f3c594208b18a9817?s=128&d=identicon&r=PG", "display_name": "Braden Best", "link": "https://stackoverflow.com/users/1175714/braden-best"}, "edited": false, "score": 1, "creation_date": 1526426617, "post_id": 50360405, "comment_id": 87737448, "body": "&quot;[...] which is only valid if the number to be printed is zero&quot; -- Might wanna fact check that, cause <code>printf(&quot;%0d&quot;, 1)</code> works fine for me."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1526445461, "post_id": 50360405, "comment_id": 87741450, "body": "Technically the <code>0</code> in <code>&quot;%0.f&quot;</code> is not the field width, it is a flag saying to pad with <code>&#39;0&#39;</code> characters instead of space characters. It still does nothing since there&#39;s no width specified and therefore no padding to be done."}, {"owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1526446642, "post_id": 50360405, "comment_id": 87741729, "body": "@aschepler Thank you.  You&#39;re right, it is a zero-pad flag, which (as you mentioned)  I updated the answer to include the padding directive, with an explanation why it will never be used."}], "tags": [], "owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "is_accepted": true, "score": 3, "last_activity_date": 1526446576, "last_edit_date": 1526446576, "creation_date": 1526426242, "answer_id": 50360405, "question_id": 50360175, "link": "https://stackoverflow.com/questions/50360175/is-there-a-difference-between-0-f-and-f-in-c/50360405#50360405", "title": "Is there a difference between %0.f and %.f in C", "body": "<p>Yes, they are the same.</p>\n\n<p>The number to the left of the decimal is the minimum number of digits to print before padding with white space.  </p>\n\n<p>If that number begins with a zero, it also indicates that the number should be padded with zeros instead of spaces.  For a length of zero, no padding will be applied.  It's impossible to print a number of length less than zero, so the additional padding indicator will never be used.</p>\n\n<p>In either case, one must print some number, which means that even though you indicated you want a minimally zero length float, it will print more than the minimum length to show the number's value.  For your test cases, the output of <code>printf(\"%0.f\", 0.0f)</code> will show <code>0</code>, having decided to print more than the minimum number of characters to show the number.</p>\n\n<p>For those confusing <code>%0.f</code> with <code>%.0f</code> note that one specifies minimum number of digits, and the other is a precision modifier.</p>\n\n<p>For floats, the presence of the <code>.</code> character indicates a specified precision, and the absence of a number to the right is interpreted as <code>0</code>.  So <code>%3.0f</code> and <code>%3.f</code> are equivalent.  In the event you do not supply a <code>.</code> in your float, then it is assumed that your float is effectively formatted with <code>.6</code></p>\n"}, {"tags": [], "owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "is_accepted": false, "score": 0, "last_activity_date": 1526426385, "creation_date": 1526426385, "answer_id": 50360420, "question_id": 50360175, "link": "https://stackoverflow.com/questions/50360175/is-there-a-difference-between-0-f-and-f-in-c/50360420#50360420", "title": "Is there a difference between %0.f and %.f in C", "body": "<p><code>printf</code> format codes of the form <code>%M.Nf</code>, where M and N are integers, mean to round the number to N decimal places, and left-pad it with spaces until it takes up at least M screen columns.</p>\n\n<pre><code>&gt;&gt;&gt; printf('%10.2f', 12345.6789);\n  12345.68\n^^ Note the 2 spaces here to produce 10 chars of output.\n</code></pre>\n\n<p>Key word here being \u201cat least\u201d.  If the number \u201cnaturally\u201d takes up more than M columns, then it won't be truncated.</p>\n\n<p><code>%0.f</code> (with the <code>0</code> on the <em>left</em> side of the <code>.</code>) literally means to pad the number with spaces until it's at least 0 columns wide.  But since there's no such thing as a negative-width numeric string, it could never actually write any space-padding, so it's equivalent to just <code>%.f</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 9797012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc295b83099955c6578b241a094fb5f6?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Sahota", "link": "https://stackoverflow.com/users/9797012/jason-sahota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1245, "favorite_count": 0, "accepted_answer_id": 50360405, "answer_count": 4, "score": 3, "last_activity_date": 1526446576, "creation_date": 1526424553, "last_edit_date": 1526438834, "question_id": 50360175, "link": "https://stackoverflow.com/questions/50360175/is-there-a-difference-between-0-f-and-f-in-c", "title": "Is there a difference between %0.f and %.f in C", "body": "<p>I am trying to print a float to no decimal places and I used %0.f and %.f and they gave me the same result. Is there a difference between them?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1526423496, "post_id": 50359894, "comment_id": 87736660, "body": "The alternative is <code>struct Node *insert_element(struct Node *head, int element)</code> which IMO is better. That way, you aren&#39;t messing around with pointers-to-pointers, but you do need to assign the return value <code>head = insert_element(head, x)</code>"}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1526423684, "post_id": 50359894, "comment_id": 87736714, "body": "Might want to use <code>const</code> too in <code>display_list</code> to signify the function won&#39;t change the <i>contents</i> of the list."}], "answers": [{"tags": [], "owner": {"reputation": 11455, "user_id": 10888, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/adbf81127c90a370ceab11b3087a8e4e?s=128&d=identicon&r=PG", "display_name": "Leonard", "link": "https://stackoverflow.com/users/10888/leonard"}, "is_accepted": false, "score": 7, "last_activity_date": 1526422700, "creation_date": 1526422700, "answer_id": 50359922, "question_id": 50359894, "link": "https://stackoverflow.com/questions/50359894/different-pointers-in-linked-list/50359922#50359922", "title": "Different pointers in linked list", "body": "<p>If the new element becomes the head, you have to modify the head.  Just displaying the list, there is no chance the head will change.</p>\n"}, {"tags": [], "owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "is_accepted": true, "score": 0, "last_activity_date": 1543426039, "last_edit_date": 1543426039, "creation_date": 1526426954, "answer_id": 50360491, "question_id": 50359894, "link": "https://stackoverflow.com/questions/50359894/different-pointers-in-linked-list/50360491#50360491", "title": "Different pointers in linked list", "body": "<p>So when you want to modify basic object, you pass its pointer. So if you want to modify <code>int</code> variable in another function you pass pointer to it. The same is true for pointers, to modify pointers you need pointer to it, otherwise your modifications would be local to the function you called. So in code perspective you have:</p>\n\n<pre><code>void insert_element(struct Node** head, int element) {\n    struct Node* newNode;\n    *head = newNode;\n}\n</code></pre>\n\n<p>if you have something like this:</p>\n\n<pre><code>void insert_element(struct Node* head, int element) {\n    struct Node* newNode;\n    head = newNode;\n} \n</code></pre>\n\n<p>The first would get the address of the head and modify it, the second one would modify <code>head</code> it self and would be local to the <code>insert_element()</code> function.</p>\n\n<p>On the other hand <code>display_element</code> function does not need to modify content of the address all it needs is well pointer to the start.</p>\n"}], "owner": {"reputation": 109, "user_id": 9687216, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-w_VaIzQScd4/AAAAAAAAAAI/AAAAAAAAAC8/OqXODTax_mQ/photo.jpg?sz=128", "display_name": "Saulius Meidus", "link": "https://stackoverflow.com/users/9687216/saulius-meidus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "closed_date": 1531663406, "accepted_answer_id": 50360491, "answer_count": 2, "score": 2, "last_activity_date": 1543426039, "creation_date": 1526422507, "question_id": 50359894, "link": "https://stackoverflow.com/questions/50359894/different-pointers-in-linked-list", "closed_reason": "Duplicate", "title": "Different pointers in linked list", "body": "<p>I was researching single linked lists in C and I want to ask why we give as a parameter, for example, in insert function <code>void insert_element(struct Node** head, int element)</code> double pointer, but in display function <code>void display_list(struct Node* head)</code> single pointer to head. They both give the same addresses (we call insert function with <code>&amp;</code>). We use double pointer becouse we modify the list inserting or deleting elements ? </p>\n"}, {"tags": ["c", "esp8266"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1526424043, "post_id": 50359875, "comment_id": 87736806, "body": "the docs <a href=\"https://www.arduino.cc/en/Reference/WiFiClientConnect\" rel=\"nofollow noreferrer\">arduino.cc/en/Reference/WiFiClientConnect</a> say server name not http url (even though its call url)"}, {"owner": {"reputation": 14671, "user_id": 2317490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ypoen.png?s=128&g=1", "display_name": "dandavis", "link": "https://stackoverflow.com/users/2317490/dandavis"}, "edited": false, "score": 0, "creation_date": 1526429818, "post_id": 50359875, "comment_id": 87738105, "body": "you use http in the browser, but https on the esp, and that&#39;s not how you do https on ESPs. use plain http and you&#39;re golden, or take the time to setup a cert fingerprint and jump through the other https hoops."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 8441531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1083d13b078f297b8d2faabff27a121?s=128&d=identicon&r=PG&f=1", "display_name": "azach", "link": "https://stackoverflow.com/users/8441531/azach"}, "edited": false, "score": 0, "creation_date": 1526453581, "post_id": 50360815, "comment_id": 87744497, "body": "Hi John!  Thanks your in detail response, I wasn&#39;t aware that the ESP has trouble to connect to https server. For simplicity I changed the server to http (since it&#39;s only for testing), now I get a connection to server, but still facing problems making the correct http request, which should be I have mentioned at the beginning of the orginal post. I added an updated code above"}, {"owner": {"reputation": 3224, "user_id": 2670348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff4b635f01c3129b3b3222a2930783f3?s=128&d=identicon&r=PG", "display_name": "romkey", "link": "https://stackoverflow.com/users/2670348/romkey"}, "reply_to_user": {"reputation": 99, "user_id": 8441531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1083d13b078f297b8d2faabff27a121?s=128&d=identicon&r=PG&f=1", "display_name": "azach", "link": "https://stackoverflow.com/users/8441531/azach"}, "edited": false, "score": 0, "creation_date": 1526875687, "post_id": 50360815, "comment_id": 87897820, "body": "@azach - not sure if Stack Overflow will notify you when I&#39;ve edited an answer, but I&#39;ve updated my answer with some fixes for your code."}, {"owner": {"reputation": 99, "user_id": 8441531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1083d13b078f297b8d2faabff27a121?s=128&d=identicon&r=PG&f=1", "display_name": "azach", "link": "https://stackoverflow.com/users/8441531/azach"}, "edited": false, "score": 0, "creation_date": 1527437147, "post_id": 50360815, "comment_id": 88118726, "body": "Thanks, but I&#39;m still facing the same problem. Any idea what else I could do?"}], "tags": [], "owner": {"reputation": 3224, "user_id": 2670348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff4b635f01c3129b3b3222a2930783f3?s=128&d=identicon&r=PG", "display_name": "romkey", "link": "https://stackoverflow.com/users/2670348/romkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1526527936, "last_edit_date": 1526527936, "creation_date": 1526429943, "answer_id": 50360815, "question_id": 50359875, "link": "https://stackoverflow.com/questions/50359875/esp8266-cant-to-connect-to-client/50360815#50360815", "title": "ESP8266 Cant to connect to client", "body": "<p>Documentation isn't clear on this, but <code>WiFiClient</code> only supports <code>http</code>, not <code>https</code>.</p>\n\n<p>It's great that you're using <code>https</code>! But you'll need to use <code>WiFiClientSecure</code> instead of <code>WifiClient</code>.</p>\n\n<p>You'll most likely want to verify the server's identity once you connect. You'll do that using the <code>verify</code> method on the <code>client</code> object. To do that you'll need to know the fingerprint of the certificate the web server uses.</p>\n\n<p>So your code would look something like this:</p>\n\n<pre><code>#include \"ESP8266WiFi.h\"\n//General Definition\n\n#define SERVER_FINGERPRINT \"C0 5D 08 5E E1 3E E0 66 F3 79 27 1A CA 1F FC 09 24 11 61 62\"\n\nconst char server[] = \"https://7751b6b1.ngrok.io\";\n //localhost into server via ngrok\nconst char* MY_SSID = \"Gastzugang\";\nconst char* MY_PWD =  \"12345678\";\nString mov; //create Text string\nWiFiClientSecure client; //Create Wifi client\n\n//Setup\nvoid setup()\n{\n Serial.begin(115200);\n Serial.println(\"Connecting to \"+*MY_SSID);\n WiFi.begin(MY_SSID, MY_PWD);\nSerial.println(\"going into wl connect\");\n int PIR_output=16; // output of pir sensor \n while (WiFi.status() != WL_CONNECTED) //not connected,  ...waiting to \n connect\n {\n  delay(1000);\n  Serial.print(\".\");\n }\n Serial.println(\"wl connected\");\n Serial.println(\"\");\n Serial.println(\"Credentials accepted! Connected to wifi\\n \");\n Serial.println(\"\");\n }\n\n void loop() {\n if(digitalRead(16) == HIGH) // reading the data from the pir sensor\n {\n mov = \"1\";\n Serial.println(\"1\");\n }\n else {\n mov = \"0\" ;\n Serial.println(\"0\");\n }\n\n if (client.connect(server, 8095)) { //Connecting at the IP address and port\n\n Serial.println(\"connected to server\");\n\n if (client.verify(SERVER_FINGERPRINT, host)) {\n   Serial.println(\"certificate matches\");\n  } else {\n   Serial.println(\"certificate doesn't match\");\n }\n\n WiFi.printDiag(Serial);\n client.println(\"Get /ethernet/data.php?\");\n //Connecting and Sending values to database\n client.print(\"movement=\");\n client.print(mov);\n client.stop();\n }\n else {\n // if you didn't get a connection to the server:\n Serial.println(\"connection failed\");\n }\n delay(50);\n }\n</code></pre>\n\n<p>The three important changes are:\n- defining <code>client</code> to be <code>WiFiClientSecure</code> rather than <code>WiFiClient</code>\n- adding a call to <code>client.verify</code> after the connection succeeds\n- providing a constant server finger print to compare with</p>\n\n<p>The fingerprint I provided won't work with your server. You'll need to find its fingerprint yourself. You can do this going to it with a web browser like Chrome and clicking on the \"Secure\" field in the address bar (in Chrome's case). Click on \"Certificate\", then expand \"Details\" in the view of the certificate. Scroll to the end and you'll see two fingerprints, SHA-256 and SHA-1. Copy the SHA-1 fingerprint and provide it as a string like the <code>SERVER_FINGERPRINT</code> I included.</p>\n\n<p>You can skip verifying the certificate if you want but then you won't be certain you're actually connecting to the real server instead of a server impersonating it.</p>\n\n<p>There's more info on <code>WiFiClientSecure</code> at <a href=\"https://github.com/esp8266/Arduino/blob/master/doc/esp8266wifi/client-secure-examples.rst\" rel=\"nofollow noreferrer\">Client Secure</a>, including another example of how to find a server's fingerprint under Windows.</p>\n\n<p>If you run into problems, I'd recommend stripping your program down to just the basics - <code>WiFi</code> connect and then <code>WiFiClientSecure</code>; don't worry about the PIR sensor or anything else. Once you get the stripped down version working with your server, transpose the changes you made back into the real program you're trying to get working.</p>\n\n<p><em>Update</em></p>\n\n<p>For your revised code, it's written right now as:</p>\n\n<pre><code>client.println(\"Get /ethernet/data.php?\"); //making a http request\nSerial.println(\"Get /ethernet/data.php?\");\n//Connecting and Sending values to database\nif(digitalRead(16) == HIGH) // reading the data from the pir sensor\n{\n mov = \"1\";\nclient.println(\"movement=1\");\nSerial.println(\"movement=1\");\n }\n else {\n  mov = \"0\" ;\n  client.println(\"movement=0\");\n  Serial.println(\"movement=0\");\n  }\n  delay(5000);\n  client.stop();\n}\n</code></pre>\n\n<p>Try:</p>\n\n<pre><code>client.print(\"Get /ethernet/data.php?\"); //making a http request\nSerial.println(\"Get /ethernet/data.php?\");\n//Connecting and Sending values to database\nif(digitalRead(16) == HIGH) // reading the data from the pir sensor\n{\n mov = \"1\";\nclient.print(\"movement=1\");\nSerial.println(\"movement=1\");\n }\n else {\n  mov = \"0\" ;\n  client.print(\"movement=0\");\n  Serial.println(\"movement=0\");\n  }\n\n  client.println(\" HTTP/1.1\");\n  client.println(\"Host: 7751b6b1.ngrok.io\");\n\n  delay(5000);\n  client.stop();\n}\n</code></pre>\n\n<p>The way it's written now it cuts off the parameters in the URL with a newline, omits the \"HTTP/1.1\" tag at the end of the line and doesn't specify the virtual host you're trying to contact (may or may not be an issue depending on your server). It needs to send two lines to the web server, looking like:</p>\n\n<pre><code>GET /ethernet/data.php?movement=1 HTTP/1.1\nHOST: 7751b6b1.ngrok.io\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 8441531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1083d13b078f297b8d2faabff27a121?s=128&d=identicon&r=PG&f=1", "display_name": "azach", "link": "https://stackoverflow.com/users/8441531/azach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 903, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526527936, "creation_date": 1526422409, "last_edit_date": 1526453730, "question_id": 50359875, "link": "https://stackoverflow.com/questions/50359875/esp8266-cant-to-connect-to-client", "title": "ESP8266 Cant to connect to client", "body": "<p>I have a very simple mysql database, which can receive new values via a simple command:</p>\n\n<pre><code> http://7751b6b1.ngrok.io/ethernet/data.php?movement=test\n</code></pre>\n\n<p>If I enter that in my browser \"test\" gets write to the databank. Now I want to write to that database via my ESP8266:</p>\n\n<pre><code> #include \"ESP8266WiFi.h\"\n//General Definition\n\nconst char server[] = \"https://7751b6b1.ngrok.io\";\n //localhost into server via ngrok\nconst char* MY_SSID = \"Gastzugang\";\nconst char* MY_PWD =  \"12345678\";\nString mov; //create Text string\nWiFiClient client; //Create Wifi client\n\n//Setup\nvoid setup()\n{\n Serial.begin(115200);\n Serial.println(\"Connecting to \"+*MY_SSID);\n WiFi.begin(MY_SSID, MY_PWD);\nSerial.println(\"going into wl connect\");\n int PIR_output=16; // output of pir sensor \n while (WiFi.status() != WL_CONNECTED) //not connected,  ...waiting to \n connect\n {\n  delay(1000);\n  Serial.print(\".\");\n }\n Serial.println(\"wl connected\");\n Serial.println(\"\");\n Serial.println(\"Credentials accepted! Connected to wifi\\n \");\n Serial.println(\"\");\n }\n\n void loop() {\n if(digitalRead(16) == HIGH) // reading the data from the pir sensor\n {\n mov = \"1\";\n Serial.println(\"1\");\n }\n else {\n mov = \"0\" ;\n Serial.println(\"0\");\n }\n\n if (client.connect(server, 8095)) { //Connecting at the IP address and port\n\n Serial.println(\"connected to server\");\n WiFi.printDiag(Serial);\n client.println(\"Get /ethernet/data.php?\");\n //Connecting and Sending values to database\n client.print(\"movement=\");\n client.print(mov);\n client.stop();\n }\n else {\n // if you didn't get a connection to the server:\n Serial.println(\"connection failed\");\n }\n delay(50);\n }\n</code></pre>\n\n<p>Sensor reading and Wifi connection works wells but I end up with \"connection failed\".</p>\n\n<p>Can anyone spot the error?</p>\n\n<p>Edit: Updated Code</p>\n\n<pre><code>#include \"ESP8266WiFi.h\"\n//General Definition\nconst char server[] = \"http://b90e9280.ngrok.io\"; //localhost?\nconst char* MY_SSID = \"Gastzugang\";\nconst char* MY_PWD =  \"12345678\";\nString mov; //create Text string\nWiFiClient client; //Create Wifi client\n//Setup\nvoid setup()\n{\nSerial.begin(115200);\nSerial.println(\"Connecting to \"+*MY_SSID);\nWiFi.begin(MY_SSID, MY_PWD);\nSerial.println(\"going into wl connect\");\nint PIR_output=16; // output of pir sensor \nwhile (WiFi.status() != WL_CONNECTED) //not connected,  ...waiting to \nconnect\n{\n   delay(1000);\n   Serial.print(\".\");\n }\nSerial.println(\"wl connected\");\nSerial.println(\"\");\nSerial.println(\"Credentials accepted! Connected to wifi\\n \");\nSerial.println(\"\");\n}\n\nvoid loop() {\n//here sensor reading einf\u00fcgen\n\nif (client.connect(server, 80)) { //Connecting at the IP address and port\nSerial.println(\"connected to server\");\nWiFi.printDiag(Serial);\nclient.println(\"Get /ethernet/data.php?\"); //making a http request\nSerial.println(\"Get /ethernet/data.php?\");\n//Connecting and Sending values to database\nif(digitalRead(16) == HIGH) // reading the data from the pir sensor\n{\n mov = \"1\";\nclient.println(\"movement=1\");\nSerial.println(\"movement=1\");\n }\n else {\n  mov = \"0\" ;\n  client.println(\"movement=0\");\n  Serial.println(\"movement=0\");\n  }\n  delay(5000);\n  client.stop();\n}\nelse {\n// if you didn't get a connection to the server:\nSerial.println(\"connection failed\");\n}\ndelay(50);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1526421780, "post_id": 50359757, "comment_id": 87736169, "body": "You seem to have forgotten that arguments in C are passed <i>by value</i>. Which means they are <i>copied</i>, and modifying a copy will not modify the original. Do some research about <i>emulating pass by reference in C</i>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1526421845, "post_id": 50359757, "comment_id": 87736194, "body": "And about your terminology, I think you mean to say that it <i>builds</i> successfully, because the crashes happens when you <i>run</i> your program."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1526422058, "post_id": 50359757, "comment_id": 87736248, "body": "Oh and a last thing, you allocate a matrix of <code>clmn X line</code>, not a matrix of <code>line X clmn</code> which you use in the <code>main</code> function. If <code>clmn != line</code> then you will still allocate the same amount of memory, but it will not be in the layout you expect, possibly leading to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a> if you happen to out of bounds."}, {"owner": {"reputation": 2054, "user_id": 284199, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8939f42cb6c31e31e570ea8f07fe9757?s=128&d=identicon&r=PG", "display_name": "sundowatch", "link": "https://stackoverflow.com/users/284199/sundowatch"}, "edited": false, "score": 0, "creation_date": 1526426311, "post_id": 50359757, "comment_id": 87737376, "body": "I think, he is a newbie on C. He may have some problems like this. But we can help him anyway. I understand that you are building your code, but can not run it or having some trouble when you run it."}], "owner": {"reputation": 11, "user_id": 9796792, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ahmet Ufuk", "link": "https://stackoverflow.com/users/9796792/ahmet-ufuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1526423079, "creation_date": 1526421682, "last_edit_date": 1526423079, "question_id": 50359757, "link": "https://stackoverflow.com/questions/50359757/code-builds-successfully-but-crashes-out", "title": "Code builds successfully but crashes out", "body": "<p>I can print <code>*p</code> with <code>printf(\"%d\",p[1])</code> but I can't print <code>**p</code> with  <code>printf(\"%d\",p[1][1]</code>.\nI tried to write a function that allocates memory and assign its adress to  the element(**members) of struct. But I still can't print it.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\ntypedef struct \n{\n    int **members;\n    int line; //number of lines\n    int clmn; //number of columns\n}matrix;\n\nvoid mamal(matrix matrix1) //function to allocate memory  \n{\n\n    int ** m; \n    m=(int**)calloc(matrix1.clmn,sizeof(int*));\n    int i;\n    for(i=0;i&lt;(matrix1.clmn);i++)\n    {\n        m[i]=(int*)calloc(matrix1.line,sizeof(int));\n    }\n    matrix1.members=m; // allocated memroy assigned to struct elemnt\n}\n\nint main (int argc,const char * argv[] ){\n\nmatrix matrx1;\n\nprintf(\"Enter Column:\");        //Reading struct elements\nscanf(\"%d\",&amp;matrx1.clmn);       //Reading struct elements\n\nprintf(\"Enter Line:\");          //Reading struct elements\nscanf(\"%d\",&amp;matrx1.line);       //Reading struct elements\n\nmamal(matrx1);  \nint i,j;\nfor(i=0;i&lt;matrx1.clnm;i++)\n{\n    for(j=0;j&lt;matrx1.line;j++)\n    {\n        printf(\"[%d][%d]:%d\",(i+1),(j+1),matrx1.members[i][j]); //This line causes crash I think. I can't print memory block that **pointer points.\n    }\n}\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6196, "user_id": 5822075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ba9afcd0c36d9685e3e1b5f2f82be2?s=128&d=identicon&r=PG&f=1", "display_name": "e0k", "link": "https://stackoverflow.com/users/5822075/e0k"}, "edited": false, "score": 0, "creation_date": 1526419537, "post_id": 50359183, "comment_id": 87735440, "body": "Why do you need the <code>top()</code> function at all? Why not just use <code>a.top</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 6196, "user_id": 5822075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1ba9afcd0c36d9685e3e1b5f2f82be2?s=128&d=identicon&r=PG&f=1", "display_name": "e0k", "link": "https://stackoverflow.com/users/5822075/e0k"}, "edited": false, "score": 2, "creation_date": 1526419837, "post_id": 50359183, "comment_id": 87735547, "body": "@e0k <code>top()</code> is a useful step toward <a href=\"https://en.wikipedia.org/wiki/Abstraction_(computer_science)#Data_abstraction\" rel=\"nofollow noreferrer\">data abstraction</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "is_accepted": false, "score": 1, "last_activity_date": 1526421441, "last_edit_date": 1526421441, "creation_date": 1526419973, "answer_id": 50359454, "question_id": 50359183, "link": "https://stackoverflow.com/questions/50359183/reversing-string-using-stack-error-incompatible-type-for-argument-1-of-top/50359454#50359454", "title": "Reversing string using stack error: incompatible type for argument 1 of &#39;top&#39;|", "body": "<p>You're going to end up with a problem in this particular case because</p>\n\n<ol>\n<li><p>you re-declare the variable a in the for loop with type <code>int</code> which over rules the previous definition of <code>a</code> and gives you the error of an invalid argument.</p></li>\n<li><p>you're passing the wrong argument type to strcat <code>top(a)-&gt;value</code> has type char, but <code>strcat</code> accepts <code>char *</code></p></li>\n<li><p>Even if you change it to type <code>char *</code> (by say doing <code>&amp;(top(a)-&gt;value)</code> ) you'll have a problem because <code>top(a)-&gt;value</code> is a single character that is not null terminated, and <code>strcat</code> will not know when to stop copying from the source</p></li>\n</ol>\n\n<p>What you probably should do is just access <code>st</code> via the array eg <code>st[i] = top(a)-&gt;value</code> and then null terminate it once you exit the for loop.</p>\n"}, {"tags": [], "owner": {"reputation": 827, "user_id": 7383242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65444c41048c45464ae10a9cafa0c41?s=128&d=identicon&r=PG&f=1", "display_name": "medalib", "link": "https://stackoverflow.com/users/7383242/medalib"}, "is_accepted": true, "score": 1, "last_activity_date": 1526420513, "creation_date": 1526420513, "answer_id": 50359547, "question_id": 50359183, "link": "https://stackoverflow.com/questions/50359183/reversing-string-using-stack-error-incompatible-type-for-argument-1-of-top/50359547#50359547", "title": "Reversing string using stack error: incompatible type for argument 1 of &#39;top&#39;|", "body": "<p>First off all in your <code>for</code> loop, you are redeclaring <code>a</code> as <code>int</code>, which will be shadowing variable <code>a</code> declared as <code>stack</code> in main. So change <code>a</code> to something else:</p>\n\n<pre><code>for(int j = 0; j &lt; i; j++)\n</code></pre>\n\n<p>As you are storing one character per node, <code>strcat</code> won't work for you as it expecting a <code>char *</code> as an argument:</p>\n\n<pre><code> strcat(st,top(a)-&gt;value);\n           ^\n           char * is expected but argument is of type char.     \n</code></pre>\n\n<p>As <code>top(a)-&gt;value</code> will be the stored character in the node, you can assign it directly to your string:</p>\n\n<pre><code>int j;\nfor(j = 0; j &lt; i; j++){\n     st[j] = top(a)-&gt;value;\n     pop(&amp;a);\n}\nst[j] = '\\0'; /* Don't forget to null-terminate your string. */\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 9081503, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TW7jlmhQmZA/AAAAAAAAAAI/AAAAAAAAAZM/T_QjlJY2Fkg/photo.jpg?sz=128", "display_name": "Haythem Tarchouna", "link": "https://stackoverflow.com/users/9081503/haythem-tarchouna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 50359547, "answer_count": 2, "score": 0, "last_activity_date": 1526421441, "creation_date": 1526418454, "last_edit_date": 1526421393, "question_id": 50359183, "link": "https://stackoverflow.com/questions/50359183/reversing-string-using-stack-error-incompatible-type-for-argument-1-of-top", "title": "Reversing string using stack error: incompatible type for argument 1 of &#39;top&#39;|", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\ntypedef struct item{\n    char value;\n    struct item* next;\n}item;\n\ntypedef struct{\n    item *top;\n}stack;\n\nitem* push_item(item* head,char val){\n    item *temp=(item*)malloc(sizeof(item));\n    temp-&gt;value=val;\n    temp-&gt;next=head;\n    head=temp;\n    return head;\n}\nvoid push(stack*a,char val){\n    a-&gt;top=push_item(a-&gt;top,val);\n}\nvoid print_stack(stack a){\n    while(a.top!=NULL){\n        printf(\"%c\",a.top-&gt;value);\n        a.top = a.top-&gt;next;\n    }\n}\nitem* top(stack a){\nreturn a.top;\n}\nitem* pop_item(item* head){\n    if( head==NULL){\n        printf(\"Stack is Empty\");\n        return head;\n    }\n    else{\n        item *toDel=head;\n        head=head-&gt;next;\n        free(toDel);\n\n    }\n    return head;\n}\nvoid pop(stack *a){\n    if (a!=NULL){\n        a-&gt;top=pop_item(a-&gt;top);\n    }\n}\n\n\nvoid main(){\n    stack a;\n    int i;\n    a.top=NULL;\n    char st[10];\n    printf(\"Dooner la chaine= \");\n    scanf(\"%s\",st);\n    for(i=0;i&lt;strlen(st);i++){\n        push(&amp;a,st[i]);\n    }\n    strcpy(st,\"\");\n    for(int a=0;a&lt;i;a++){\n    strcat(st,top(a)-&gt;value);\n         pop(&amp;a);\n    }\n}\n</code></pre>\n\n<p>I'm trying to reverse a string using a stack. The push function is working and I can even print the items in reverse order if I directly print the stack.</p>\n\n<p>When I try to change the initial string to the new string I get this error:</p>\n\n<pre><code>incompatible type for argument 1 of 'top'|\" at this instruction \" strcat(st,top(a)-&gt;value);\n</code></pre>\n"}]