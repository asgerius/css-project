[{"tags": ["c", "token", "fgets"], "comments": [{"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 1, "creation_date": 1522279087, "post_id": 49545652, "comment_id": 86098791, "body": "Use <code>&quot; \\n&quot;</code> ad delimiter, it will get rid of the newline as well."}, {"owner": {"reputation": 715, "user_id": 3610102, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/999d4ac2d47c4de912caa36f13f9eb38?s=128&d=identicon&r=PG&f=1", "display_name": "Chirality", "link": "https://stackoverflow.com/users/3610102/chirality"}, "reply_to_user": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 3, "creation_date": 1522279264, "post_id": 49545652, "comment_id": 86098843, "body": "@Pablo has a sufficient answer, but a nice piece of reusable code to trim newlines and more from buffers is <code>buffer[strcspn(buffer, &quot;\\r\\n&quot;)] = 0;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "edited": false, "score": 0, "creation_date": 1587221547, "post_id": 49545687, "comment_id": 108427578, "body": "Thinking Windows, It shall be better to use: <code>line[strcspn(line, &quot;\\r\\n&quot;)] = 0;</code>!"}], "tags": [], "owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "is_accepted": true, "score": 5, "last_activity_date": 1522279182, "creation_date": 1522279182, "answer_id": 49545687, "question_id": 49545652, "link": "https://stackoverflow.com/questions/49545652/remove-trailing-newline-character-using-fgets/49545687#49545687", "title": "Remove trailing newline character using fgets", "body": "<p>If you are using <code>strtok</code>, then you can use <code>\" \\n\"</code> as the delimiter and the newline will be taken care of.</p>\n\n<pre><code>int main() {\n\n  char line1[100];\n  fgets(line1, 100, stdin);\n  printf(\"%s\", line1);\n\n  const char *delim = \" \\n\";\n\n  char *token;\n  token = strtok(line1, delim);\n\n  while(token != NULL){\n    printf(\"%s\\n\", token);\n    palindrome(token);\n\n    token = strtok(NULL, delim);\n  }\n\n  ...\n\n}\n</code></pre>\n\n<p>Another great method to remove the newline is to use <code>strcspn</code> like this:</p>\n\n<pre><code>char line[1024];\nfgets(line, sizeof line, stdin);\n\nline[strcspn(line, \"\\n\")] = 0; // removing newline if one is found\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 612, "user_id": 5511137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52669f8524c53fd6a1451800dac0c45?s=128&d=identicon&r=PG&f=1", "display_name": "Roflcopter4", "link": "https://stackoverflow.com/users/5511137/roflcopter4"}, "is_accepted": false, "score": 0, "last_activity_date": 1522297354, "creation_date": 1522297354, "answer_id": 49548000, "question_id": 49545652, "link": "https://stackoverflow.com/questions/49545652/remove-trailing-newline-character-using-fgets/49548000#49548000", "title": "Remove trailing newline character using fgets", "body": "<p>Why not just use fgetc and stop at the newline? You could also even just find the newline character in the string and assign '\\0' to it, and it will be gone.</p>\n"}], "owner": {"reputation": 5, "user_id": 9447048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70283962708e55b5eeefb99fd6b1b13c?s=128&d=identicon&r=PG&f=1", "display_name": "afc corbin", "link": "https://stackoverflow.com/users/9447048/afc-corbin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1330, "favorite_count": 0, "accepted_answer_id": 49545687, "answer_count": 2, "score": 0, "last_activity_date": 1522297354, "creation_date": 1522278961, "question_id": 49545652, "link": "https://stackoverflow.com/questions/49545652/remove-trailing-newline-character-using-fgets", "title": "Remove trailing newline character using fgets", "body": "<p>I am making a program to read a file and determine if a word is a palindrome. I am running into an issue where the last token has a trailing newline and won't register as a palindrome.</p>\n\n<p>Here is the file input:</p>\n\n<pre><code>leVel CompUtER Science theORY radar\n</code></pre>\n\n<p>And this is my code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nvoid palindrome(char str[]){\n  int length = strlen(str);\n  int i = 0;\n  int j = length - 1;\n  for(i = 0; i &lt; length; i++){\n    if(str[i] != str[j]){\n      printf(\"String %s is not a palindrome.\\n\", str);\n      return;\n    }\n    j--;\n  }\n  printf(\"String %s is a palindrome.\\n\", str);\n  return;\n}\n\n\n\nint main() {\n\n  char line1[100];\n  fgets(line1, 100, stdin);\n  printf(\"%s\", line1);\n\n  char *token;\n  token = strtok(line1, \" \");\n\n  while(token != NULL){\n    printf(\"%s\\n\", token);\n    palindrome(token);\n\n    token = strtok(NULL, \" \");\n  }\n</code></pre>\n\n<p>Thanks for the help!</p>\n"}, {"tags": ["c", "audio", "loopback", "libalsa"], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 1797754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44180704b3105e62392544dd72d88b5?s=128&d=identicon&r=PG", "display_name": "user1797754", "link": "https://stackoverflow.com/users/1797754/user1797754"}, "is_accepted": false, "score": 1, "last_activity_date": 1529711030, "last_edit_date": 1529711030, "creation_date": 1529458229, "answer_id": 50938970, "question_id": 49545647, "link": "https://stackoverflow.com/questions/49545647/programmatic-alsa-loopback/50938970#50938970", "title": "Programmatic ALSA loopback", "body": "<p>You can use the pulseaudio for linux where you can very easily create a loopback device .There ia a pactl command -it will help you create a null sink and you can loopback from it .</p>\n\n<p>something like this \n//this would create a null sink with specified channel conf</p>\n\n<pre><code>pactl load-module module-null-sink sink_name=sink6ch format=s16le rate=48000 channels=6 channel_map=front-left,front-right,front-center,lfe,rear-left,rear-right\n</code></pre>\n\n<p>//make it default </p>\n\n<pre><code>pactl set-default-sink sink6ch\n</code></pre>\n\n<p>you can use its monitor device to read about the monitor devices of pulse audio</p>\n"}], "owner": {"reputation": 121, "user_id": 6650545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Kc4R1.jpg?s=128&g=1", "display_name": "kwasmich", "link": "https://stackoverflow.com/users/6650545/kwasmich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1529711030, "creation_date": 1522278903, "question_id": 49545647, "link": "https://stackoverflow.com/questions/49545647/programmatic-alsa-loopback", "title": "Programmatic ALSA loopback", "body": "<p>I need some pointers where to start with the following:</p>\n\n<p>From any application that plays audio using ALSA to the connected speaker I'd like to grab the samples and do some audio processing.\nI am not in control of the player and I'd like to be able to process the audio from any source. Basically it will be an UV-meter, perhaps later with FFT (all just on the command line). Additionally I'd like my app to be self-contained.</p>\n\n<p>In my research I've found:</p>\n\n<ul>\n<li>There is a loopback kernel module.</li>\n<li>You can do fancy stuff with the configuration file.</li>\n<li>There is the ability to create plugins.</li>\n</ul>\n\n<p>Using the kernel module and altering the configuration file introduces some dependencies of my application to the configuration of the system.<br>\nAnd creating a plugin I give up control over the app and cannot start/terminate it whenever I want.</p>\n\n<p>This is not satisfactory to me so I'd like to know if there is a way to either:</p>\n\n<ul>\n<li>create a loopback device programmatically</li>\n<li>or is there any other way to read from the pcm playback device other applications are writing to.</li>\n</ul>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1522278246, "post_id": 49545506, "comment_id": 86098585, "body": "What is the logic behind your <code>% 1000000007</code>? Where did that particular number come from? If <code>int</code> is 32 bits on your system, then it can&#39;t hold a vale of 2**40. Try adding a <code>printf</code> call or using a debugger to track the value of <code>rst</code> through and after the loop."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1522278319, "post_id": 49545506, "comment_id": 86098603, "body": "A quick Google search indicates that <code>% 1000000007</code> is common in programming contests: <a href=\"https://www.geeksforgeeks.org/modulo-1097-1000000007/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/modulo-1097-1000000007</a>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1522278443, "post_id": 49545506, "comment_id": 86098641, "body": "The problem is that after 32 times through the loop, the value in <code>rst</code> is 0. That&#39;s because 2^32 mod 2^32 = 0."}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1522282979, "post_id": 49545642, "comment_id": 86099788, "body": "It&#39;s probably not <code>1000000007</code> that&#39;s too big for <code>int</code> (it&#39;s less than 32 bits). It&#39;s <code>rst</code>."}, {"owner": {"reputation": 888, "user_id": 6087479, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-5I8NM_JIDkU/AAAAAAAAAAI/AAAAAAAAAAA/MAhvpTXecww/photo.jpg?sz=128", "display_name": "Eziz Durdyyev", "link": "https://stackoverflow.com/users/6087479/eziz-durdyyev"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1522283231, "post_id": 49545642, "comment_id": 86099835, "body": "@KeithThompson But sir, I think <code>rst</code> is not going to be bigger than <code>1000000007</code>. Or Am I missing something?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1522285784, "post_id": 49545642, "comment_id": 86100464, "body": "The loop computes <code>a**b</code> (a raised to the b&#39;th power). The example the OP used was 2**40. Your modified version avoids overflow by applying <code>% 1000000007</code> at each step."}, {"owner": {"reputation": 888, "user_id": 6087479, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-5I8NM_JIDkU/AAAAAAAAAAI/AAAAAAAAAAA/MAhvpTXecww/photo.jpg?sz=128", "display_name": "Eziz Durdyyev", "link": "https://stackoverflow.com/users/6087479/eziz-durdyyev"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1522287350, "post_id": 49545642, "comment_id": 86100810, "body": "@KeithThompson, So you are saying that my code prints wrong answer (which is 511620083)?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1522340815, "post_id": 49545642, "comment_id": 86129816, "body": "I wasn&#39;t talking about your code. I&#39;m saying that in the OP&#39;s code, it&#39;s not <code>1000000007 </code> that&#39;s too big for <code>int</code>, it&#39;s <code>rst</code> when <code>a</code> and <code>b</code> are <code>2</code> and <code>40</code>, respectively."}], "tags": [], "owner": {"reputation": 888, "user_id": 6087479, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-5I8NM_JIDkU/AAAAAAAAAAI/AAAAAAAAAAA/MAhvpTXecww/photo.jpg?sz=128", "display_name": "Eziz Durdyyev", "link": "https://stackoverflow.com/users/6087479/eziz-durdyyev"}, "is_accepted": true, "score": 1, "last_activity_date": 1522278832, "creation_date": 1522278832, "answer_id": 49545642, "question_id": 49545506, "link": "https://stackoverflow.com/questions/49545506/even-though-i-use-1000000007-it-still-results-on-0/49545642#49545642", "title": "Even though I use % 1000000007 it still results on 0", "body": "<p><strong>First</strong>, you don't need if statement in for loop.<br>\n<strong>Second</strong>, you are trying to stop integer overflow after it already happens. So you need to do it after every multiplication operation.<br>\n<strong>Third</strong>, you can use <code>unsigned long long int</code> instead of <code>int</code>, because <code>int</code> is machine dependent (may be 1000000007 is too big for int on your machine).</p>\n\n<p>I guess this should work:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    unsigned long long int i, a, b, rst;\n\n    scanf(\"%llu %llu\", &amp;a, &amp;b);\n\n    rst = 1;\n    for (i = 0; i &lt; b; i++){\n        rst = (rst * a) % 1000000007;\n    }\n    printf(\"%llu\\n\", rst);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9029690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10d36a1e543c8a72fdff035ac8234683?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeStudent", "link": "https://stackoverflow.com/users/9029690/coffeestudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1547653665, "accepted_answer_id": 49545642, "answer_count": 1, "score": 0, "last_activity_date": 1522278832, "creation_date": 1522277995, "question_id": 49545506, "link": "https://stackoverflow.com/questions/49545506/even-though-i-use-1000000007-it-still-results-on-0", "closed_reason": "Duplicate", "title": "Even though I use % 1000000007 it still results on 0", "body": "<p>my goal on this code is to make exponential operations without pow().\nIt works for evey value a^b which b &lt;= 30. I'm aware that I should be using  x % 1000000007 to prevent integers overflows. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n    int main(void) {\n        int i, a, b, rst;\n        rst = 1;\n        scanf(\"%d %d\", &amp;a, &amp;b);\n        for (i = 0; i &lt; b; i++){\n            rst = rst * a;\n            if( b == 0){\n                rst = 1;\n            }           \n        }\n        printf(\"%d\\n\", rst % 1000000007);\n        return 0;\n    }\n</code></pre>\n\n<p>Why does it returns a \"0\" for example on \"2^40 % 1000000007\" even though I'm using % 1000000007?</p>\n"}, {"tags": ["c", "hex", "byte"], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1522302032, "post_id": 49545415, "comment_id": 86104726, "body": "You can also use <code>%.2X</code> and the C99 Rationale recommends using that instead of <code>%02X</code>, but many people ignore what the Rationale says (so <code>%02X</code> is probably more common than <code>%.2X</code>)."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 4, "last_activity_date": 1522277475, "creation_date": 1522277475, "answer_id": 49545415, "question_id": 49545397, "link": "https://stackoverflow.com/questions/49545397/c-missing-0-in-hexadecimal-output/49545415#49545415", "title": "C - Missing 0 in hexadecimal output", "body": "<p><code>%X</code> does not output leading zeros.  Use <code>%02X</code> instead.  The <code>2</code> tells it to output at least 2 digits, and the <code>0</code> tells it to pad the output on the left side with a <code>'0'</code> character if the output is less than 2 digits.</p>\n"}], "owner": {"reputation": 13, "user_id": 9566724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "DenoDev", "link": "https://stackoverflow.com/users/9566724/denodev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 49545415, "answer_count": 1, "score": 1, "last_activity_date": 1522277475, "creation_date": 1522277375, "question_id": 49545397, "link": "https://stackoverflow.com/questions/49545397/c-missing-0-in-hexadecimal-output", "title": "C - Missing 0 in hexadecimal output", "body": "<p>I had to test if my machine is using the little or the big endian. For this reason i wrote this code. I can see that my machine is using the little endian. But i dont know why the output from my first byte is only D. Should it not be 0D?</p>\n\n<pre><code>union int2byte\n{\n    unsigned char bytes[4];\n    unsigned int hex;\n};\n\nint main(int argc, const char* argv[])\n{\n    union int2byte hexby;\n\n    hexby.hex = 0xBAADF00D;\n\n    printf(\"%u\\n\",hexby.hex);\n    int counter;\n    for(counter = 0; counter &lt; 4; counter = counter + 1)\n    {\n        printf(\"Hex for Byte %u is %X.\\n\",counter+1, hexby.bytes[counter]); \n    }\n\n}\n\nOutput:\n3131961357\nHex for Byte 1 is D.\nHex for Byte 2 is F0.\nHex for Byte 3 is AD.\nHex for Byte 4 is BA.\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "answers": [{"tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 1, "last_activity_date": 1522276484, "creation_date": 1522276484, "answer_id": 49545244, "question_id": 49545181, "link": "https://stackoverflow.com/questions/49545181/print-array-that-was-set-in-another-function-with-pointers/49545244#49545244", "title": "Print array that was set in another function with pointers", "body": "<p>Pay attention to this code:</p>\n\n<pre><code>int* creatingArray()\n{\n    // stuff\n    int array[LEN] = { 0 };\n    // more stuff\n    return array;\n}\n</code></pre>\n\n<p><code>array</code> is a local variable, so it gets destroyed when the function returns. You then have a pointer to a destroyed variable. The space where it was will (most likely) continue to hold the data you put there - until the memory gets reused for something else and overwritten.</p>\n\n<blockquote>\n  <p>and how to fix it if it eve/n possible?</p>\n</blockquote>\n\n<p>Several options:</p>\n\n<ol>\n<li><p>Make <code>array</code> a <code>static</code> variable. Then it will not be destroyed when the function returns. (This also means that every time you call <code>creatingArray</code> it will use the same <code>array</code>, instead of a new one)</p></li>\n<li><p>Make <code>array</code> global.</p></li>\n<li><p>Move <code>array</code> to <code>main</code>, and pass a pointer to it <em>into</em> <code>creatingArray</code>, instead of having <code>creatingArray</code> return one. Then, since it's a local variable in <code>main</code>, it will only be destroyed when <code>main</code> returns.</p></li>\n<li><p>Use <code>malloc</code> to allocate some space that will not be cleaned up automatically when the function returns.</p></li>\n</ol>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8720643"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 49545244, "answer_count": 1, "score": 0, "last_activity_date": 1522335927, "creation_date": 1522276064, "last_edit_date": 1522335927, "question_id": 49545181, "link": "https://stackoverflow.com/questions/49545181/print-array-that-was-set-in-another-function-with-pointers", "title": "Print array that was set in another function with pointers", "body": "<p>As you can see in the code below I tried to print an array that I created in a different function. The output was totally different numbers compares to what I  expected: numbers between 0 - 20 were set but I got some negative values.</p>\n\n<p>So my question is why is this happening? And how to fix it if it even possible?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#define LEN 10\nint* creatingArray();\nvoid printingArray(int* array);\nint main(void)\n{\n    int* pointer_array = creatingArray();\n    printingArray(pointer_array);\n    getchar();  \n    return 0;\n}\nint* creatingArray()\n{\n    srand(time(NULL));\n    int array[LEN] = { 0 };\n    int* i = 0;\n    for (i = array; i &lt; array + LEN; i++)\n    {\n        *i = rand() % 20;\n    }\n    return array;\n}\nvoid printingArray(int* array)\n{\n    int* i = 0;\n    for (i = array; i &lt; array + LEN; i++)\n    {\n        printf(\"\\n%d\\n\", *i);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "ffi"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1522275497, "post_id": 49545011, "comment_id": 86097807, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34885868/c-late-binding-with-unknown-arguments\">C late binding with unknown arguments</a>"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1522276931, "post_id": 49545011, "comment_id": 86098228, "body": "You need assembly code for this."}], "answers": [{"tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": false, "score": 0, "last_activity_date": 1522277110, "creation_date": 1522277110, "answer_id": 49545345, "question_id": 49545011, "link": "https://stackoverflow.com/questions/49545011/how-do-i-call-a-function-whose-declaration-is-unknown-at-compiletime/49545345#49545345", "title": "How do I call a function whose declaration is unknown at compiletime", "body": "<p>If you are only looking to solve the problem, then pick a library like <code>libffi</code> (see the question linked by @SteveSummit).</p>\n\n<p>If you want to learn how it is done, you will need to have a grasp on assembly. Start by simplifying the problem by picking a single architecture, single calling convention, no arguments, leave the parsing of the C function declaration for later, etc. As soon as you manage to make the simplest function call successfully, you can proceed to study the rest of details -- there are many!</p>\n"}], "owner": {"reputation": 7166, "user_id": 479905, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4f1b1eb37c5c280e2db98abbaace9f86?s=128&d=identicon&r=PG", "display_name": "Arne", "link": "https://stackoverflow.com/users/479905/arne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522277110, "creation_date": 1522275132, "question_id": 49545011, "link": "https://stackoverflow.com/questions/49545011/how-do-i-call-a-function-whose-declaration-is-unknown-at-compiletime", "title": "How do I call a function whose declaration is unknown at compiletime", "body": "<p>this is bascially the problem.</p>\n\n<pre><code>void call_function(void* func, const char* funcdecl, void* arguments) {\n\n  // how do I do this?\n\n  // some pseudo code\n  for(i = 0; i &lt; numargs; ++i) {\n    if(funcdecl.args[i].type == TYPE_DOUBLE) {\n      push funcdecl.args[i].doubleValue\n    }\n    ...\n  }\n  call func\n  reslut.type = funcdecl.result_type;\n  if(funcdecl.result_type == TYPE) {\n    result.value = read_doulbe_from_stack();\n  }\n}\n\n\n// nothing from here on is known before call_function.\n\ndouble foobar(int a, int b, int c) {\n  return a * 0.1 + b * 0.3 + c * 0.2;\n}\n\ntypedef struct MyArgumentsStruct {\n  int a;\n  int b;\n  int c;\n} MyArgumentsStruct;\n\nint main() {\n  MyArgumentsStruct arguments;\n  call_function( (void*)(foobar), \"double foobar(int a, int b, int c);\", &amp;arguments);\n}\n</code></pre>\n\n<p>so basically I cant cast the <code>void*</code> to a function type, because I don't know it.</p>\n\n<p>I have looked up what gcc does when compiling to asm. And when I understand it correctly, it generates a lot of <code>push</code> instructions to push all function arguments on the stack, and then it uses <code>call</code> to go to a function. The function then knows how to get the arguments from the stack and pushes the result back.</p>\n\n<p>So my question is, how do I push arguments from manually to the stack?\nHow would I read the return value from the stack?</p>\n"}, {"tags": ["c", "kernighan-and-ritchie"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1522275316, "post_id": 49544995, "comment_id": 86097747, "body": "The logic will be the same: 1) fetch a character 2) do I want this to be in the output? if so:output it.  3)goto1.   Concluding: you can do both, (you could even use macros for the get_chararacter and put_character parts)"}, {"owner": {"reputation": 869, "user_id": 8977557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9435a87062e0ef32514b0aafcfae5d20?s=128&d=identicon&r=PG&f=1", "display_name": "Agrudge Amicus", "link": "https://stackoverflow.com/users/8977557/agrudge-amicus"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1522275398, "post_id": 49544995, "comment_id": 86097772, "body": "@wildplasser I don&#39;t really care for the output or method - just the way to handle the input! :)"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1522276482, "post_id": 49544995, "comment_id": 86098102, "body": "It appears from your question, the author expects you to do a <i>line-oriented</i> read (with either <code>fgets</code> or POSIX <code>getline</code> and remove from <code>&#47;*....*&#47;</code> (which can span multiple lines) and <code>&#47;&#47;...</code> until the end of line. If nothing is left over after removing the comments, you can just not-output the line, otherwise you will output that part of the line not within the comment. (I could be wrong, but that&#39;s how I read it)"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1522277365, "post_id": 49544995, "comment_id": 86098347, "body": "The <i>problem</i> with fgets() or getline() is that you <i>still</i> have to scan the sting character by character (or: use strstr(), which effectively does the same)"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1522363670, "post_id": 49544995, "comment_id": 86140522, "body": "@DavidC.Rankin Of course there&#39;s also line-continuation using \\ at the end of the line..."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1522373440, "post_id": 49544995, "comment_id": 86142881, "body": "@Deduplicator -- ooh, good catch, that does throw another couple of <i>sticky-wickets</i> into the mix <code>:)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 869, "user_id": 8977557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9435a87062e0ef32514b0aafcfae5d20?s=128&d=identicon&r=PG&f=1", "display_name": "Agrudge Amicus", "link": "https://stackoverflow.com/users/8977557/agrudge-amicus"}, "edited": false, "score": 0, "creation_date": 1522276109, "post_id": 49545036, "comment_id": 86097986, "body": "Can you provide some links to learn how to push input using pipe? Till now I was feeding input by using getchar() even for WC/WL programs."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 869, "user_id": 8977557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9435a87062e0ef32514b0aafcfae5d20?s=128&d=identicon&r=PG&f=1", "display_name": "Agrudge Amicus", "link": "https://stackoverflow.com/users/8977557/agrudge-amicus"}, "edited": false, "score": 3, "creation_date": 1522276311, "post_id": 49545036, "comment_id": 86098047, "body": "@AgrudgeAmicus -- no, no, he is just saying you can provide input to your program on <code>stdin</code> by piping input to it, e.g. like <code>echo &quot;1, 2, 3&quot; | .&#47;your_program</code> or redirecting a file to it, e.g. <code>.&#47;your_program &lt;somefile</code>. That way, instead of having to open a <code>FILE *stream</code> with <code>fopen</code>, etc... you simply read from <code>stdin</code> which is available by default to your program."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1522277015, "post_id": 49545036, "comment_id": 86098255, "body": "BTW This is the kind of program that can use its own source as (test)input: <code>.&#47;your_program  &lt;.&#47;your_program.c</code> ;-)"}], "tags": [], "owner": {"reputation": 1095, "user_id": 3646273, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bc8576f5fc52a993defa41c91ed9cbc1?s=128&d=identicon&r=PG&f=1", "display_name": "hft", "link": "https://stackoverflow.com/users/3646273/hft"}, "is_accepted": true, "score": 2, "last_activity_date": 1522363504, "last_edit_date": 1522363504, "creation_date": 1522275261, "answer_id": 49545036, "question_id": 49544995, "link": "https://stackoverflow.com/questions/49544995/clarification-not-solution-regarding-kr-exercises/49545036#49545036", "title": "Clarification (not solution) regarding K&amp;R exercises", "body": "<p>You don't need file handling, you can use \"getline\" like in the later examples in chapter 1 to parse lines. Then if you want to use your code on a file you can pipe the file as input to the executable you have written.</p>\n\n<p>You could also use \"getchar\" as in the \"wc\" example (line, word, and character counting example) given in Section 1.5.4. In that example program there is no file handling, but you can pipe a file the executable just as you would for the usual linux \"wc\" utility.</p>\n"}], "owner": {"reputation": 869, "user_id": 8977557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9435a87062e0ef32514b0aafcfae5d20?s=128&d=identicon&r=PG&f=1", "display_name": "Agrudge Amicus", "link": "https://stackoverflow.com/users/8977557/agrudge-amicus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 49545036, "answer_count": 1, "score": 0, "last_activity_date": 1522363504, "creation_date": 1522275053, "last_edit_date": 1522275350, "question_id": 49544995, "link": "https://stackoverflow.com/questions/49544995/clarification-not-solution-regarding-kr-exercises", "title": "Clarification (not solution) regarding K&amp;R exercises", "body": "<p>while going through the first chapter I found a question *to remove all comments from a code\" - I really don't know what the author expects, whether I am supposed to use File handling (which in later chapters) or am I supposed to type in the entire file as an input?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1522271109, "post_id": 49544117, "comment_id": 86096016, "body": "This shouldn&#39;t even compile. <code>InventoryItemType *inventoryItems[MAX_INVENTORY_SIZE] ;</code> you have an array of pointers, but call <code>displayInventory(inventoryItems);</code> when <code>displayInventory</code> takes a <code>InventoryItemType *</code>."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1522271150, "post_id": 49544117, "comment_id": 86096042, "body": "you have an array of <code>InventoryItemType</code> pointers.. I suspect you want an array of <code>InventoryItemType</code> objects."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1522271493, "post_id": 49544117, "comment_id": 86096194, "body": "@yano Looks like OP is <code>malloc</code>ing the elements of <code>inventoryItems</code>, so I don&#39;t think that is the case.  I&#39;m more curious about what&#39;s happening in <code>addItem</code>."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1522271879, "post_id": 49544117, "comment_id": 86096355, "body": "@ChristianGibbons Oh you&#39;re right... Still with a (relatively small) array I&#39;d prefer to use objects in automatic storage here rather than <code>malloc</code>ing each one."}, {"owner": {"reputation": 61, "user_id": 9566460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f93b521018414609a951ef29d37ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Trial&#39;n&#39;Error", "link": "https://stackoverflow.com/users/9566460/trialnerror"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1522271884, "post_id": 49544117, "comment_id": 86096357, "body": "@ChristianGibbons addItem is supposed to add a new inventory item which should include the name of the item, item number(arbitrary but not repeatable), quantity (stock), and purchase price. Please have mercy I am very new to struct, arrays, and pointers."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1522272067, "post_id": 49544117, "comment_id": 86096462, "body": "<code>addItem</code> takes only 1 argument, you are passing 2."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1522272187, "post_id": 49544117, "comment_id": 86096521, "body": "What&#39;s the point of the <code>count</code> variable?"}, {"owner": {"reputation": 61, "user_id": 9566460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f93b521018414609a951ef29d37ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Trial&#39;n&#39;Error", "link": "https://stackoverflow.com/users/9566460/trialnerror"}, "reply_to_user": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1522272259, "post_id": 49544117, "comment_id": 86096550, "body": "@Pablo Yikes, that mistake came from trying to mess around with the code.. Please ignore the second variable. The Function call should be       addItem(*inventoryItems[count]);"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1522272366, "post_id": 49544117, "comment_id": 86096586, "body": "@Trial&#39;n&#39;Error Name checks out. Anyways, you are passing a copy of an <code>InventoryItemType</code> to <code>addItem</code>.  Any changes you make to <code>display</code> are done only to the local copy.  Also you use the address-of operator for half of the time and not the other half."}, {"owner": {"reputation": 61, "user_id": 9566460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f93b521018414609a951ef29d37ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Trial&#39;n&#39;Error", "link": "https://stackoverflow.com/users/9566460/trialnerror"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1522272427, "post_id": 49544117, "comment_id": 86096615, "body": "@ChristianGibbons, The local variable is not carried through to main function and therefore I get garbage values... got it. By that logic my function should be returning something then no?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1522272788, "post_id": 49544117, "comment_id": 86096759, "body": "@Trial&#39;n&#39;Error You could return an InventoryItemType in that function.  There is no need to pass in any arguments to that function as you can just create an <code>InventoryItemType</code> in the function and return it.  Otherwise, if you wish to pass it in as an argument, you should be passing in a pointer to it, that way you&#39;ll be able to make changes to the original."}], "answers": [{"tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 3, "last_activity_date": 1522272799, "creation_date": 1522272799, "answer_id": 49544536, "question_id": 49544117, "link": "https://stackoverflow.com/questions/49544117/my-pointers-and-struct-code-is-displaying-garbage-values/49544536#49544536", "title": "My pointers and struct code is displaying garbage values", "body": "<p>There are a number of bugs/conflicts. Too many to comment on individually. I've annotated and corrected the code, showing bugs and before/after. There is still more work to do, but this should get you closer.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define MAX_INVENTORY_SIZE 100\n\ntypedef struct {\n    char item_Number[3];\n    char item_Name[20];\n    float item_Profit;\n    float latest_Price;\n    unsigned int stock;\n    unsigned int total_Sold;\n    struct InventoryItemType *next;\n} InventoryItemType;\n\nvoid MainMenu();\n\n#if 0\nvoid displayInventory(InventoryItemType *(*));\n#else\nvoid displayInventory(InventoryItemType *,int);\n#endif\n\n#if 0\nvoid addItem(InventoryItemType, int i);\n#else\nvoid addItem(InventoryItemType *);\n#endif\n\nint main()\n{\n    int i=1;\n    char selection;\n\n    // NOTE/BUG: starting at 1 will leave item 0 undefined\n#if 0\n    int count=1;\n#else\n    int count=0;\n#endif\n\n    // better to do this with a stack array than pointers to malloc'ed items\n#if 0\n    InventoryItemType *inventoryItems[MAX_INVENTORY_SIZE] ;\n#else\n    InventoryItemType inventoryItems[MAX_INVENTORY_SIZE] ;\n#endif\n\n#if 0\n    // NOTE/BUG: this will segfault because inventoryItems is undefined here\n    inventoryItems[0]=NULL;\n#endif\n\n    while (1) {\n        MainMenu();\n        scanf(\" %c\", &amp;selection);\n        switch(selection) {\n        case 'A' :\n#if 0\n            displayInventory(inventoryItems);\n#else\n            displayInventory(inventoryItems,count);\n#endif\n            break;\n        case 'B' :\n        case 'C' :\n#if 0\n            inventoryItems[count]= (InventoryItemType*)malloc(sizeof(InventoryItemType));\n            addItem(*inventoryItems[count], count);\n#else\n            addItem(&amp;inventoryItems[count]);\n            count += 1;\n#endif\n            continue;\n        case 'D' :\n        case 'E' :\n        case 'F' :\n        case 'G' :\n        case 'H' :\n        default :\n            printf(\"Invalid\\n\" );\n        }\n        printf(\"Bottom of code\\n\");\n        system(\"pause\");\n    }\n}\n\nvoid MainMenu()\n{\n    printf(\"A. Display Inventory\\n\");\n    printf(\"B. Display Sales\\n\");\n    printf(\"C. Add Item\\n\");\n    printf(\"D. Remove Item\\n\");\n    printf(\"E. Enter Shipment\\n\");\n    printf(\"F. Update Sales\\n\");\n    printf(\"G. Sort\\n\");\n    printf(\"H. Exit\\n\");\n    printf(\"Make a selection\\n\");\n}\n\n#if 0\nvoid displayInventory(InventoryItemType display)\n{\n    int i;\n    for(i=0; i&lt;MAX_INVENTORY_SIZE; i++)\n    {\n        printf(\"Name:%s\\n\", display[i].item_Name);\n        printf(\"Stock:%d\\n\", display[i].stock);\n        printf(\"Price:%.2f\\n\", display[i].latest_Price);\n        printf(\"Total Value:%.2f\\n\", (display[i].stock)*(display[i].latest_Price));\n        printf(\"\\n\");\n    }\n}\n\nvoid addItem(InventoryItemType display)\n{\n\n    // NOTE/BUG: because this is passed by _value_ nothing will be retained\n    // after function return\n\n    printf(\"\\nEnter details of item \\n\\n\");\n    printf(\"Enter Item Name: \\n\");\n    scanf(\"%s\", display.item_Name);\n    printf(\"\\nEnter Item no: \\n\");\n    scanf(\"%s\", display.item_Number);\n\n    printf(\"\\nEnter Stock: \\n\");\n    scanf(\"%d\", &amp;display.stock);\n\n    printf(\"\\nPurchase Price: \\n\");\n    scanf(\"%f\", &amp;display.latest_Price);\n}\n#else\nvoid displayInventory(InventoryItemType *item,int count)\n{\n    int i;\n    for (i=0; i&lt;count; i++, item++) {\n        printf(\"Name:%s\\n\", item-&gt;item_Name);\n        printf(\"Stock:%d\\n\", item-&gt;stock);\n        printf(\"Price:%.2f\\n\", item-&gt;latest_Price);\n        printf(\"Total Value:%.2f\\n\", (item-&gt;stock)*(item-&gt;latest_Price));\n        printf(\"\\n\");\n    }\n}\n\nvoid addItem(InventoryItemType *item)\n{\n\n    printf(\"\\nEnter details of item \\n\\n\");\n\n    printf(\"Enter Item Name: \\n\");\n    scanf(\"%s\", item-&gt;item_Name);\n\n    printf(\"\\nEnter Item no: \\n\");\n    scanf(\"%s\", item-&gt;item_Number);\n\n    printf(\"\\nEnter Stock: \\n\");\n    scanf(\"%d\", &amp;item-&gt;stock);\n\n    printf(\"\\nPurchase Price: \\n\");\n    scanf(\"%f\", &amp;item-&gt;latest_Price);\n}\n#endif\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 9566460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f93b521018414609a951ef29d37ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Trial&#39;n&#39;Error", "link": "https://stackoverflow.com/users/9566460/trialnerror"}, "edited": false, "score": 0, "creation_date": 1522280150, "post_id": 49544615, "comment_id": 86099075, "body": "How would I work around not casting Malloc? My goal is to create the memory required for a new item before initializing its values."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 61, "user_id": 9566460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f93b521018414609a951ef29d37ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Trial&#39;n&#39;Error", "link": "https://stackoverflow.com/users/9566460/trialnerror"}, "edited": false, "score": 1, "creation_date": 1522282732, "post_id": 49544615, "comment_id": 86099719, "body": "@Trial&#39;n&#39;Error <i>How would I work around not casting Malloc?</i> by not casting it. <i>My goal is to create the memory required for a new item before initializing its values</i> I know that, but like I said in the answer, you are mixing concepts here. Do you want a linked list or an array. The correct way depends on what approach you want to take."}, {"owner": {"reputation": 61, "user_id": 9566460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f93b521018414609a951ef29d37ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Trial&#39;n&#39;Error", "link": "https://stackoverflow.com/users/9566460/trialnerror"}, "edited": false, "score": 0, "creation_date": 1522282862, "post_id": 49544615, "comment_id": 86099758, "body": "Array, i have taken out the linked list."}, {"owner": {"reputation": 61, "user_id": 9566460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f93b521018414609a951ef29d37ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Trial&#39;n&#39;Error", "link": "https://stackoverflow.com/users/9566460/trialnerror"}, "edited": false, "score": 0, "creation_date": 1522284937, "post_id": 49544615, "comment_id": 86100248, "body": "I currently get this error for calloc (and malloc) when attempting to create the memory for the item. &quot;\t                                                                                                                                                                 14\tIntelliSense: a value of type &quot;void *&quot; cannot be used to initialize an entity of type &quot;InventoryItemType *&quot; &quot;"}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 61, "user_id": 9566460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f93b521018414609a951ef29d37ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Trial&#39;n&#39;Error", "link": "https://stackoverflow.com/users/9566460/trialnerror"}, "edited": false, "score": 1, "creation_date": 1522285176, "post_id": 49544615, "comment_id": 86100313, "body": "@Trial&#39;n&#39;Error are you compiling you C code with a C++ compiler? This might explain the error?"}, {"owner": {"reputation": 61, "user_id": 9566460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f93b521018414609a951ef29d37ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Trial&#39;n&#39;Error", "link": "https://stackoverflow.com/users/9566460/trialnerror"}, "edited": false, "score": 0, "creation_date": 1522288636, "post_id": 49544615, "comment_id": 86101101, "body": "you pointed me to the right direction. In Visual studio apparently this syntax must be used: <b>&quot;InventoryItemType <i>current = (InventoryItemType</i>) calloc(1, sizeof *current);&quot;</b>. I no longer get errors, however I do have garbage values still for any other print out other than the first one...Here is an image of out with two items:<a href=\"https://ibb.co/kwWKAS\" rel=\"nofollow noreferrer\">image</a>"}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "reply_to_user": {"reputation": 61, "user_id": 9566460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f93b521018414609a951ef29d37ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Trial&#39;n&#39;Error", "link": "https://stackoverflow.com/users/9566460/trialnerror"}, "edited": false, "score": 1, "creation_date": 1522290056, "post_id": 49544615, "comment_id": 86101444, "body": "@Trial&#39;n&#39;Error as far as I know, VS C compiler is a C++ compiler in disguise and that&#39;s why you need the cast in VS. The error you see is because you are passing to <code>displayInventory</code> the incorrect type, it should be: <code>displayInventory(inventoryItems, item_count);</code> and <code>if(display[0].item_Name == NULL)</code> will never be true because <code>item_Name</code> is not a pointer, is a <code>char</code> array. You have to get the types right, read the warnings of the compiler."}, {"owner": {"reputation": 61, "user_id": 9566460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f93b521018414609a951ef29d37ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Trial&#39;n&#39;Error", "link": "https://stackoverflow.com/users/9566460/trialnerror"}, "edited": false, "score": 0, "creation_date": 1522416651, "post_id": 49544615, "comment_id": 86158132, "body": "Thank you for your help and patience. Everything works great and I learned a lot from your explanations."}], "tags": [], "owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "is_accepted": false, "score": 2, "last_activity_date": 1522283575, "last_edit_date": 1522283575, "creation_date": 1522273203, "answer_id": 49544615, "question_id": 49544117, "link": "https://stackoverflow.com/questions/49544117/my-pointers-and-struct-code-is-displaying-garbage-values/49544615#49544615", "title": "My pointers and struct code is displaying garbage values", "body": "<p>There are many problems with your code.</p>\n\n<pre><code>InventoryItemType *inventoryItems[MAX_INVENTORY_SIZE] ;\n</code></pre>\n\n<p>This declares an array of dimension <code>MAX_INVENTORY_SIZE</code> of <code>InventoryItemType</code>\npointers. These pointers are uninitialized, so you need to allocate memory for\nit. You do it here:</p>\n\n<pre><code>inventoryItems[count]= (InventoryItemType*)malloc(sizeof(InventoryItemType));\n</code></pre>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Don't cast <code>malloc</code></a></p></li>\n<li><p>The <code>count</code> variable is initialized to 1 and it is never changed. So every\ntime you are allocating new memory for <code>inventoryItems[1]</code> and you are losing\nthe pointer of the previous <code>malloc</code> call, thus it's leaking.</p></li>\n</ol>\n\n<p>When you print your data structure, you do:</p>\n\n<pre><code>for(i=0; i&lt;MAX_INVENTORY_SIZE; i++)\n    {\n        printf(\"Name:%s\\n\", display[i].item_Name);\n        ...\n</code></pre>\n\n<p>but <code>inventoryItems[i]</code> is for all <code>i != 1</code> uninitialized, this yield undefined\nbehaviour.</p>\n\n<p>What's the point of having an array of <code>InventoryItemType</code> pointers when the\nstructure itself has a pointer <code>next</code> pointer for the next item in the inventory. It seems you\nare mixing concepts here, linked lists vs arrays. I'd suggest you pick one and\nstick to it.</p>\n\n<p>Why did you</p>\n\n<pre><code>void addItem(InventoryItemType display);\n</code></pre>\n\n<p>declare <code>addItem</code> like this? <code>display</code> is only a copy of the orginal, so any\nchange of the values of <code>display</code> will only affect <code>display</code>, not the original.\nSo when you do</p>\n\n<pre><code>addItem(*inventoryItems[count], count);\n</code></pre>\n\n<p>you are passing a copy to <code>addItem</code> and you only change the copy,\n<code>inventoryItems[count]</code> remains unchanged. Also your function takes only one\nparameter, you are passing it two.</p>\n\n<p><code>addItem</code> should take a pointer, so that the changes are done through the\npointer into the original. The function should look like this:</p>\n\n<pre><code>int addItem(InventoryItemType *display);\n{\n\n    if(display == NULL)\n        return 0;\n\n    printf(\"\\nEnter details of item \\n\\n\");\n    printf(\"Enter Item Name: \\n\");\n    if(scanf(\"%19s\", display-&gt;item_Name) != 1)\n        return 0;\n\n    clear_stdin();\n\n    printf(\"\\nEnter Item no: \\n\");\n    if(scanf(\"%2s\", display-&gt;item_Number) != 1)\n        return 0;\n\n    clear_stdin();\n\n    printf(\"\\nEnter Stock: \\n\");\n    if(scanf(\"%d\", &amp;display-&gt;stock) != 1)\n        return 0;\n\n    printf(\"\\nPurchase Price: \\n\");\n    if(scanf(\"%f\", &amp;display-&gt;latest_Price) != 1)\n        return 0;\n\n\n    return 1;\n}\n</code></pre>\n\n<p>The function should return 1 on success, 0 otherwise. The caller of <code>addItem</code>\nwill know whether <code>addItem</code> failed or not. If you declare the function as\n<code>void</code>, then you will never know if the function failes or not.</p>\n\n<p>And <code>clear_stdin</code> could look like this:</p>\n\n<pre><code> void clear_stdin(void)\n {\n     int c;\n     while((c = getchar()) != '\\n' &amp;&amp; c != EOF);\n }\n</code></pre>\n\n<hr>\n\n<p><strong>edit</strong></p>\n\n<p>As you've made an update and you've decided to use the array, then I can give\nyou a few more pointers.</p>\n\n<p>You are declaring to much memory. Either you allocate memory before <code>addItem</code>\nand pass the newly allocated memory to <code>addItem</code>, or you allocate the memory in\n<code>addItem</code> itself and return it. Your <code>addItem</code> already does that, so the first\nline</p>\n\n<pre><code>inventoryItems[item_count]=(InventoryItemType*)malloc(sizeof(InventoryItemType));\n</code></pre>\n\n<p>is not necessary, because <code>addItem</code> does that for you.</p>\n\n<p>I'd change <code>addItem</code> to look like this:</p>\n\n<pre><code>InventoryItemType *addItem(void)\n{\n    InventoryItemType *current = calloc(1, sizeof *current);\n    if(current == NULL)\n        return NULL;\n\n    printf(\"\\nEnter details of item \\n\\n\");\n    printf(\"Enter Item no: \\n\");\n    scanf(\"%2s\", current-&gt;item_Number);\n\n    clear_stdin();\n\n    printf(\"Enter Item Name: \\n\");\n    scanf(\"%20s\", current-&gt;item_Name);\n\n    clear_stdin();\n\n    printf(\"Enter Stock: \\n\");\n    scanf(\"%d\", &amp;current-&gt;stock);\n    printf(\"Enter Purchase Price: \\n\");\n    scanf(\"%f\", &amp;current-&gt;latest_Price);\n    current-&gt;selling_Price=(current-&gt;latest_Price)*1.5;\n    current-&gt;total_Sold=0;\n    system(\"cls\");\n\n    return current;\n}\n</code></pre>\n\n<p>Because <code>addItem</code> allocates the memory for the new object, you don't need to\npass the array nor the index (or key) where you want to store it. Then in the\n<code>main</code> you can do this:</p>\n\n<pre><code>case 'C':\n    // checking that you don't step outside of bounds\n    if(item_count == MAX_INVENTORY_SIZE - 1)\n    {\n        fprintf(stderr, \"Array is full\\n\");\n        break;\n    }\n\n    inventoryItems[item_count] = addItem();\n    if(inventoryItems[item_count] == NULL)\n    {\n        fprintf(stderr, \"Not enough memory\\n\");\n        break;\n    }\n\n    item_count++;\n    continue;\n\ncase 'D':\n    ...\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9566460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f93b521018414609a951ef29d37ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Trial&#39;n&#39;Error", "link": "https://stackoverflow.com/users/9566460/trialnerror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1522329376, "creation_date": 1522270900, "last_edit_date": 1522329376, "question_id": 49544117, "link": "https://stackoverflow.com/questions/49544117/my-pointers-and-struct-code-is-displaying-garbage-values", "title": "My pointers and struct code is displaying garbage values", "body": "<p>Currently, I am trying to create a program that takes inventory of a stores products. I have been able to create a function that allows the user to input new items in a struct array but when I attempt to print the values I get garbage values. (Please ignore the switch statements as the code is work in progress).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define MAX_INVENTORY_SIZE 100\n\ntypedef struct {\n    char item_Number[3];\n    char item_Name[20];\n    float item_Profit;\n    float latest_Price;\n    unsigned int stock;\n    unsigned int total_Sold;\n    struct InventoryItemType *next;\n}InventoryItemType;\nvoid MainMenu();\nvoid displayInventory(InventoryItemType *(*));\nvoid addItem(InventoryItemType, int i);\n\nint main()\n{\n    int i=1;\n    char selection;\n    int count=1;\n    InventoryItemType *inventoryItems[MAX_INVENTORY_SIZE] ;\n\n    inventoryItems[0]=NULL;\n    while(1)\n    {\n        MainMenu();\n        scanf(\" %c\", &amp;selection);\n        switch(selection) \n        {\n        case 'A' :\n            displayInventory(inventoryItems);\n            break;\n        case 'B' :\n        case 'C' :\n            inventoryItems[count]= (InventoryItemType*)malloc(sizeof(InventoryItemType));\n            addItem(*inventoryItems[count], count);\n            continue;\n        case 'D' :\n        case 'E' :\n        case 'F' :\n        case 'G' :\n        case 'H' :\n        default :\n            printf(\"Invalid\\n\" );\n        }\n        printf(\"Bottom of code\\n\");\n        system(\"pause\");\n    }\n}\nvoid MainMenu()\n{\n    printf(\"A. Display Inventory\\n\");\n    printf(\"B. Display Sales\\n\");\n    printf(\"C. Add Item\\n\");\n    printf(\"D. Remove Item\\n\");\n    printf(\"E. Enter Shipment\\n\");\n    printf(\"F. Update Sales\\n\");\n    printf(\"G. Sort\\n\");\n    printf(\"H. Exit\\n\");\n    printf(\"Make a selection\\n\");\n}\nvoid displayInventory(InventoryItemType *display)\n{\n    int i;\n    for(i=0; i&lt;MAX_INVENTORY_SIZE; i++)\n    {\n        printf(\"Name:%s\\n\", display[i].item_Name);\n        printf(\"Stock:%d\\n\", display[i].stock);\n        printf(\"Price:%.2f\\n\", display[i].latest_Price);\n        printf(\"Total Value:%.2f\\n\", (display[i].stock)*(display[i].latest_Price));\n        printf(\"\\n\");\n    }\n}\nvoid addItem(InventoryItemType display)\n{\n\n    printf(\"\\nEnter details of item \\n\\n\");\n    printf(\"Enter Item Name: \\n\");\n    scanf(\"%s\", display.item_Name);\n    printf(\"\\nEnter Item no: \\n\");\n    scanf(\"%s\", display.item_Number);\n\n    printf(\"\\nEnter Stock: \\n\");\n    scanf(\"%d\", &amp;display.stock);\n\n    printf(\"\\nPurchase Price: \\n\");\n    scanf(\"%f\", &amp;display.latest_Price);\n}\n</code></pre>\n\n<h2>Update</h2>\n\n<p>I attempted to apply all answers (with a series of trial and error) and came up with this code. I currently have the code properly taking in a new item and displaying that item, but it breaks down after adding more items(if I continue through the errors I get garbage display values). I am pretty certain it has to do with the way in which I am allocating memory via malloc. My goal is to use malloc to create the space for the item before initializing values.</p>\n\n<p>Edited code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#define MAX_INVENTORY_SIZE 100\n\ntypedef struct {\n    char item_Number[4];\n    char item_Name[20];\n    float item_Profit;\n    float latest_Price;\n    float selling_Price;\n    unsigned int stock;\n    unsigned int total_Sold;\n}InventoryItemType;\nvoid MainMenu();\nvoid displayInventory(InventoryItemType *, int);\nvoid displaySales(InventoryItemType *, int);\nInventoryItemType *addItem(InventoryItemType *, int);\n\nint main()\n{\n    int i=0, item_count=0;\n    char selection;\n    InventoryItemType *inventoryItems[MAX_INVENTORY_SIZE];\n    while(1)\n    {\n        MainMenu();\n        scanf(\" %c\", &amp;selection);\n        switch(selection) \n        {\n        case 'A' :\n            displayInventory(*inventoryItems, item_count);\n            break;\n        case 'B' :\n            displaySales(*inventoryItems, item_count);\n            break;\n        case 'C' :\n            inventoryItems[item_count]=(InventoryItemType*)malloc(sizeof(InventoryItemType));\n            inventoryItems[item_count]=addItem(inventoryItems[item_count],item_count);\n            item_count++;\n            continue;\n        case 'D' :\n        case 'E' :\n        case 'F' :\n        case 'G' :\n        case 'H' :\n        default :\n            printf(\"Invalid Entry\\n\" );\n            system(\"pause\");\n        }\n        system(\"cls\");\n    }\n}\nvoid MainMenu()\n{\n    printf(\"A. Display Inventory\\n\");\n    printf(\"B. Display Sales\\n\");\n    printf(\"C. Add Item\\n\");\n    printf(\"D. Remove Item\\n\");\n    printf(\"E. Enter Shipment\\n\");\n    printf(\"F. Update Sales\\n\");\n    printf(\"G. Sort\\n\");\n    printf(\"H. Exit\\n\");\n    printf(\"Make a selection\\n\");\n}\nvoid displayInventory(InventoryItemType *display, int key)\n{\n    if(display[0].item_Name == NULL)\n    {\n        printf(\"No stock\");\n        system(\"pause\");\n    }\n    else\n    {\n        int i;\n        for(i=0; i&lt;key; i++)\n        {\n            printf(\"Item No.:%s\\n\", display[i].item_Number);\n            printf(\"Item Name:%s\\n\", display[i].item_Name);\n            printf(\"Item Stock:%d\\n\", display[i].stock);\n            printf(\"Item Purchased Price:%.2f\\n\", display[i].latest_Price);\n            printf(\"Total Value of Items:%.2f\\n\", (display[i].stock)*(display[i].latest_Price));\n            printf(\"\\n\");\n            system(\"pause\");\n        }\n    }\n}\nvoid displaySales(InventoryItemType *display, int key)\n{\n    int i;\n    float total_profit=0;\n    for(i=0; i&lt;key; i++)\n    {\n        printf(\"Item No.:%s\\n\", display[i].item_Number);\n        printf(\"Item Name:%s\\n\", display[i].item_Name);\n        printf(\"Number of Item Sold:%d\\n\", display[i].total_Sold);\n        printf(\"Item Selling Price:%.2f\\n\", display[i].selling_Price);\n        printf(\"Total Profit from Item:%.2f\\n\", (display[i].selling_Price-display[i].latest_Price)*display[i].total_Sold);\n        total_profit=total_profit+((display[i].selling_Price-display[i].latest_Price)*display[i].selling_Price);\n        if(i==key)\n        printf(\"Total Over-all Profit:%.2f\", total_profit);\n        system(\"pause\");\n    }\n}\nInventoryItemType *addItem(InventoryItemType *change, int key)\n{\n    InventoryItemType *current= (InventoryItemType*)malloc(sizeof(InventoryItemType));\n    printf(\"\\nEnter details of item \\n\\n\");\n    printf(\"Enter Item no: \\n\");\n    scanf(\"%s\", current[key].item_Number);\n    printf(\"Enter Item Name: \\n\");\n    scanf(\"%s\", current[key].item_Name);\n    printf(\"Enter Stock: \\n\");\n    scanf(\"%d\", &amp;current[key].stock);\n    printf(\"Enter Purchase Price: \\n\");\n    scanf(\"%f\", &amp;current[key].latest_Price);\n    current[key].selling_Price=(current[key].latest_Price)*1.5;\n    current[key].total_Sold=0;\n    change=current;\n    system(\"cls\");\n    return change;\n}\n</code></pre>\n"}, {"tags": ["c", "file-io", "binary-search-tree", "read-write"], "comments": [{"owner": {"reputation": 244, "user_id": 9177735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90311d812036b4debfcf7aa866dec22?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9177735/ben"}, "edited": false, "score": 1, "creation_date": 1522270578, "post_id": 49543925, "comment_id": 86095746, "body": "You probably want to use <a href=\"http://www.cplusplus.com/reference/cstring/strtok/\" rel=\"nofollow noreferrer\">strtok</a>. You can use it to convert the string read from the file to an array."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1522272237, "post_id": 49543925, "comment_id": 86096541, "body": "That is called a &quot;comma separated variable&quot; file, or CSV, and there are plenty of references both on google and stackoverflow."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1522272809, "post_id": 49543925, "comment_id": 86096769, "body": "The answer depends on whether you need to account for &quot;empty fields&quot; (e.g. <code>some,values,,can,be,empty</code>). If you do NOT need to handle empty fields, <code>strtok</code> is fine, if you do, then <code>strsep</code> is the function to use. In either case, you can always walk a pointer down the line an pick out fields as your go."}, {"owner": {"reputation": 244, "user_id": 9177735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90311d812036b4debfcf7aa866dec22?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9177735/ben"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1522272935, "post_id": 49543925, "comment_id": 86096817, "body": "@DavidC.Rankin, I was thinking the question was specifically about the <code>friendsID</code> field, but I could be wrong. Either way good info."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1522274553, "post_id": 49543925, "comment_id": 86097449, "body": "I think you are right, so you would need to nest <code>strtok</code> within calls to <code>strtok_r</code> to separate tokens, then friends."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7763642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e9c5c38fa437e5d9dd1c32595d762?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe123", "link": "https://stackoverflow.com/users/7763642/j-doe123"}, "edited": false, "score": 0, "creation_date": 1522292273, "post_id": 49545020, "comment_id": 86101979, "body": "I like your reply, thank you. I&#39;ve finished my code. If I have a question, i do."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 15, "user_id": 7763642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e9c5c38fa437e5d9dd1c32595d762?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe123", "link": "https://stackoverflow.com/users/7763642/j-doe123"}, "edited": false, "score": 0, "creation_date": 1522292342, "post_id": 49545020, "comment_id": 86101994, "body": "Sure, just post it as a comment below and I&#39;m happy to help you further."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 15, "user_id": 7763642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e9c5c38fa437e5d9dd1c32595d762?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe123", "link": "https://stackoverflow.com/users/7763642/j-doe123"}, "edited": false, "score": 0, "creation_date": 1522292824, "post_id": 49545020, "comment_id": 86102115, "body": "If your question is about your choice to dynamically allocate for your unknown number of friends -- that is the correct way to go. (if they don&#39;t exceed the range of <code>int</code> (or <code>long</code>), it may make sense to convert them to numbers with <code>strtol</code>, etc.."}, {"owner": {"reputation": 15, "user_id": 7763642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e9c5c38fa437e5d9dd1c32595d762?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe123", "link": "https://stackoverflow.com/users/7763642/j-doe123"}, "edited": false, "score": 0, "creation_date": 1522327367, "post_id": 49545020, "comment_id": 86120195, "body": "<code>do     {         token = strtok (NULL, &quot; ,.-&quot;);         newNodeTemp-&gt;friendsID[i]=atoll(token);         i++;     }while(token != NULL);</code> Thank you I used <code>atoll</code> @david"}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 1, "last_activity_date": 1522276023, "last_edit_date": 1522276023, "creation_date": 1522275206, "answer_id": 49545020, "question_id": 49543925, "link": "https://stackoverflow.com/questions/49543925/how-to-read-variable-separated-by-punctuations-in-a-text-file-in-c/49545020#49545020", "title": "How to read variable separated by punctuations in a text file in C", "body": "<p>If I understand your question, that you have a CSV with user info and the friends of that user, where the friends are encoded as a hyphen separated list of friend-IDs as the third field in the line, then you can use a combination of the re-entrant version of <code>strtok</code> (named <code>strtok_r</code>) to separate the comma separated fields, and than use calls to <code>strtok</code> within your outer loop to separate the hyphen separated values.</p>\n\n<p>Note, <code>strtok_r</code> requires an additional \"<em>save pointer</em>\" as its third argument so that you can resume calls to that instance of <code>strtok_r</code> after having made intermediate calls to a difference instance of <code>strtok</code> or <code>strtok_r</code> for alternative separation purposes.</p>\n\n<p>Given your line of:</p>\n\n<pre><code>\"123456789,Jonh Brown,123456434-4325234-235234-42345234\"\n</code></pre>\n\n<p>where <code>123456789</code> is the ID, <code>Jonh Brown</code> is the name, and <code>123456434-4325234-235234-42345234</code> is a list of friend IDs, you could parse the line and individual friends, just by keeping a field count and calling a separate instance of <code>strtok</code> within your tokinzation loop to separate friends on hyphens.</p>\n\n<p>A short example would be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define FRIENDS 3\n\nint main (void) {\n\n    char line[] = \"123456789,Jonh Brown,123456434-4325234-235234-42345234\",\n        *delims = \",\\n\",    /* strtok_r delimiters for tokens */\n        *p      = line,     /* pointer to line */\n        *sp     = p;        /* save pointer for reentrant strtok_r */\n    int count = 0;\n\n    /* must use reentrant version of strtok to nest strtok use for friends */\n    p = strtok_r (line, delims, &amp;sp);  /* 1st call uses name of buffer */\n    count++;\n\n    while (p) {             /* outputer tokenization loop */\n        printf (\"token: '%s'\\n\", p);\n        if (count == FRIENDS) {\n            char *pf = calloc (strlen (p) + 1, 1),  /* pointer to friends   */\n                *delim2 = \"-\\n\",                    /* delims for friends   */\n                *f;                                 /* pointer preserves pf */\n            if (!pf) {\n                perror (\"malloc-pf\");\n                exit (EXIT_FAILURE);\n            }\n            strcpy (pf, p);                 /* copy friends token to pf */\n            f = pf;                         /* set f, to pf, to preserve pf */\n            f = strtok (f, delim2);         /* regular strtok OK for friends */\n            if (f)\n                printf (\"friends:\\n\");\n            while (f) {     /* friends tokenization loop */\n                printf (\"    %s\\n\", f);\n                f = strtok (NULL, delim2);  /* subsequent calls use NULL */\n            }\n            free (pf);      /* free allocated memory at preserved address */\n            count = 0;      /* reset count */\n        }\n        p = strtok_r (NULL, delims, &amp;sp);  /* subsequent calls use NULL */\n        count++;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>(<strong>note:</strong> since <code>strtok</code> modifies the original string and advances the pointer it uses, you must make a copy of the friends token, and preserve a pointer to the starting address of the allocated token for friends (<code>pf</code>) so that it can be freed after you are done with separating friends)</p>\n\n<p>(<strong>also note:</strong> if your system provides <code>strdup</code>, you can replace the two <code>calloc (strlen (p) + 1, 1)</code> and <code>strcpy (pf, p);</code> calls with a simple call to <code>char *pf = strdup(p);</code>. But note, since <code>strdup</code> allocates dynamically, you should still validate <code>if (!pf)</code> after the call)</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/strtok_csv\ntoken: '123456789'\ntoken: 'Jonh Brown'\ntoken: '123456434-4325234-235234-42345234'\nfriends:\n    123456434\n    4325234\n    235234\n    42345234\n</code></pre>\n\n<p>Look things over and let me know if you have further questions.</p>\n"}], "owner": {"reputation": 15, "user_id": 7763642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/648e9c5c38fa437e5d9dd1c32595d762?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe123", "link": "https://stackoverflow.com/users/7763642/j-doe123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 49545020, "answer_count": 1, "score": 0, "last_activity_date": 1522276023, "creation_date": 1522270183, "last_edit_date": 1522272493, "question_id": 49543925, "link": "https://stackoverflow.com/questions/49543925/how-to-read-variable-separated-by-punctuations-in-a-text-file-in-c", "title": "How to read variable separated by punctuations in a text file in C", "body": "<p>I was wondering how to read data from a text file that has its data separated by a comma.</p>\n\n<p>For example line 1 of the text file says: <code>(Integer,Name Surname, IntegerArray)</code></p>\n\n<p>This is 1 line: <code>123456789,Jonh Brown,123456434-4325234-235234-42345234</code></p>\n\n<pre><code>typedef struct BST\n{\n    long long ID;\n    char *name;\n    char *surname;\n    long long *friendsID;\n    struct BST *left;\n    struct BST *right;\n}BST;\n</code></pre>\n\n<p>reading from file:</p>\n\n<pre><code>do\n{\n    c = fscanf(fp,\"%I64d%*c%s%s\",&amp;ID,name,surname);\n    if (c != EOF)\n        root=insertNewUser(root,ID,name,surname);\n} while (c != EOF);\n\nnewNodeTemp-&gt;ID = ID;\nnewNodeTemp-&gt;name = (char*)calloc(strlen(name),sizeof(char));\nnewNodeTemp-&gt;surname = (char*)calloc(strlen(surname),sizeof(char));\nstrcpy(newNodeTemp-&gt;name,name);\nstrcpy(newNodeTemp-&gt;surname,surname);\n</code></pre>\n\n<p>but I do not know how to get it as array into BST->friends without <code>'-'</code>(hyphen).</p>\n\n<p>this part: <code>123456434-4325234-235234-42345234</code></p>\n\n<p>I defined the friends of array as a pointer. Because we don't know its size. I will use dynamic memory allocation...</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "edited": false, "score": 0, "creation_date": 1522270300, "post_id": 49543876, "comment_id": 86095591, "body": "Please explain: <i>I want to get func_arguments_count values from list and pass them into func</i> But <code>func_arguments_count</code> is a parameter that <code>fold</code> has to pass <i>into</i> <code>func</code>, so your desire doesn&#39;t seem to make sense."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1522271338, "post_id": 49543876, "comment_id": 86096123, "body": "I marked this question as a duplicate before I noticed that this question is marked as C instead of as C++.  However, the concepts described in the duplicate can similarly be applied in C as well. The short answer is - what you are asking is <i>technically possible</i> but is dangerous and not portable, and <i>shouldn&#39;t</i> be done the way you are thinking."}], "owner": {"reputation": 161, "user_id": 9139429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mMOue.png?s=128&g=1", "display_name": "Sunny", "link": "https://stackoverflow.com/users/9139429/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "closed_date": 1522271262, "answer_count": 0, "score": 0, "last_activity_date": 1522270779, "creation_date": 1522269962, "last_edit_date": 1522270779, "question_id": 49543876, "link": "https://stackoverflow.com/questions/49543876/how-to-pass-function-with-different-number-of-arguments-as-argument-in-c", "closed_reason": "Duplicate", "title": "How to pass function with different number of arguments as argument in C?", "body": "<p>I have function like this <br><code>void fold(int arguments_count, void* (*func)(va_list args), struct List list)</code><br> and I want to get <code>func_arguments_count</code> values from <code>list</code> and pass them into <code>func</code> in <code>fold</code><br> I've read man about stdarg, but see only one decision how to pust args in va_list: make struct and transfer pointer, so it doesn't work with variable number of arguments </p>\n"}, {"tags": ["c", "vectorization", "hardware", "intel", "simd"], "comments": [{"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1522267789, "post_id": 49543255, "comment_id": 86094190, "body": "Why does every type have to be at least as big as a pointer?"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 4, "creation_date": 1522268595, "post_id": 49543255, "comment_id": 86094643, "body": "The width of the datatype in the SIMD vector has nothing to do with pointer size unless you&#39;re doing something involving gathers or scatters."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1522288374, "post_id": 49543255, "comment_id": 86101040, "body": "On x86, there are lots of SIMD instructions that operate on byte elements.  That&#39;s the minimum; there aren&#39;t any that operate on nibbles.  See all the <code>p...b</code> instructions in <a href=\"http://felixcloutier.com/x86/index.html\" rel=\"nofollow noreferrer\">felixcloutier.com/x86/index.html</a>.  Like <code>pshufb</code>: a byte-granularity shuffle that takes the shuffle-control from a register.  You can use it to do 16 lookups in parallel from a 16-element table, or to rearrange bytes in a vector any way you want.  Or <code>paddb</code>: add packed (integer) bytes, with no carry between bytes."}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1522288697, "post_id": 49544210, "comment_id": 86101121, "body": "There are no nibble-element instructions even in AVX512.  x86 has <a href=\"http://felixcloutier.com/x86/DAA.html\" rel=\"nofollow noreferrer\"><code>DAA</code> to adjust the result of a packed-BCD add</a>, but that uses a single-bit flag (<code>AF</code>), so it&#39;s not even really <a href=\"https://en.wikipedia.org/wiki/SWAR\" rel=\"nofollow noreferrer\">SWAR</a>.  It <i>only</i> works for 2 BCD digits in AL, not for 4 in AX.  AVX512 has lots of crazy stuff, like <a href=\"http://felixcloutier.com/x86/VPMULTISHIFTQB.html\" rel=\"nofollow noreferrer\"><code>VPMULTISHIFTQB</code></a>, but that&#39;s unaligned shifts within qword elements."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1522289251, "post_id": 49544210, "comment_id": 86101235, "body": "Why pick the AVX512BW-only <a href=\"https://github.com/HJLebbink/asm-dude/wiki/VDBPSADBW\" rel=\"nofollow noreferrer\"><code>VDBPSADBW</code></a> instead of the simpler <a href=\"https://github.com/HJLebbink/asm-dude/wiki/PSADBW\" rel=\"nofollow noreferrer\"><code>vpsadbw</code></a> which does a SAD of unsigned-byte differences within each 64-bit element.  Or something simple like <code>paddb</code>: add byte elements :P"}, {"owner": {"reputation": 1750, "user_id": 530714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c3fdabc5df1116d627e0f10474b01?s=128&d=identicon&r=PG", "display_name": "Grigory Rechistov", "link": "https://stackoverflow.com/users/530714/grigory-rechistov"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1522300565, "post_id": 49544210, "comment_id": 86104147, "body": "@PeterCordes Indeed, a strange choice of examples. I was, however, sleepy and by the end of writing the answer I needed to attend to other matters; and now I cannot explain that list (-%"}], "tags": [], "owner": {"reputation": 1750, "user_id": 530714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c3fdabc5df1116d627e0f10474b01?s=128&d=identicon&r=PG", "display_name": "Grigory Rechistov", "link": "https://stackoverflow.com/users/530714/grigory-rechistov"}, "is_accepted": false, "score": 3, "last_activity_date": 1522271289, "creation_date": 1522271289, "answer_id": 49544210, "question_id": 49543255, "link": "https://stackoverflow.com/questions/49543255/minimum-simd-vector-width-data-type/49544210#49544210", "title": "Minimum SIMD vector width data type", "body": "<blockquote>\n  <p>This seems to suggest to me that on a 64-bit machine the minimum partitioning I can have would be 64-bit data types. </p>\n</blockquote>\n\n<p>This assumption is wrong.</p>\n\n<p>To illustrate with an (awkward) analogy, the length of a postal address (in symbols) does not correlate with the size of a house. The width of a pointer does not correlate with size of data it references.</p>\n\n<p>There is a <em>lower</em> bound of how small piece of data can be addressed on a given type of hardware. It's called <em>byte</em> (8 bits a.k.a. <em>octet</em> on modern machines, but it can also be 10 or 6 bits like on ancient generations). There is typically no <em>higher</em> bound, however. In Intel 64, as one example, XSAVE family of instructions references a memory block that is nearly 4 kbyte long, with the same 32/64 bit pointers.</p>\n\n<blockquote>\n  <p>Taking for example an Intel AVX-512 capable piece of hardware I can fit either 8 doubles (64-bit) or 16 singles (32-bit) into my vector.</p>\n</blockquote>\n\n<p>Or you can fit 32 half-floats (16-bit) or 64 bytes. Not sure if there are AVX-512 instructions operating on nibbles (4 bit chunks).</p>\n\n<blockquote>\n  <p>Is there a way to query the granularity of the vector partitioning that the compiler has used? (Avoiding digging through the resulting assembly).</p>\n</blockquote>\n\n<p>Again, the lower bound for compiler's choice is dictated by width of chosen data types in your program. If you use <code>int</code>, the granularity will be at least <code>sizeof(int)</code> bytes, if <code>long</code> \u2014 <code>sizeof(long)</code> etc. It is unlikely that a type wider than necessary will be used, because it would cause semantical differences of machine instructions that should be accounted for. For example, if a compiler, for unknown reasons, chooses to use a SIMD vector partitioned into <code>uint64_t</code> chunks to operate on a vector of <code>uint32_t</code> chunks, then it would have to hide differences in overflow behavior, and that would incur performance penalty.</p>\n\n<p>I do not know if there are OMP pragmas to query for such information. It is unlikely, given that the same binary may have multiple code paths chosen dynamically at runtime (program's startup, so called dispatching used by Intel compiler at least), so the compile-time querying is out of the question, and I cannot see much use in runtime querying.</p>\n\n<blockquote>\n  <p>On a 64-bit machine, how is the vector partitioned into data types less than 64-bit if a 64-bit memory address is assumed?</p>\n</blockquote>\n\n<p>There are simply machine instructions that interpret the same SIMD registers differently. In Intel 64, as an example there are all sorts of them (examples taken from recent Intel Software Development Manual):</p>\n\n<ul>\n<li>VDBPSADBW\u2014Double Block Packed Sum-Absolute-Differences (SAD) on <strong>Unsigned Bytes</strong> (8-bit)</li>\n<li>VCVTPH2PS \u2014 Convert <strong>16-bit</strong> FP values to Single-Precision FP values</li>\n<li>VCVTPS2UDQ\u2014Convert Packed <strong>Single-Precision</strong> (32-bit) Floating-Point Values to Packed Unsigned Doubleword Integer Values</li>\n<li>VCVTQQ2PD\u2014Convert Packed <strong>Quadword</strong> (64-bit) Integers to Packed Double-Precision Floating-Point Values</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1522383735, "post_id": 49552496, "comment_id": 86144889, "body": "Are you talking about AVX-512 but using only YMM registers to avoid lowering the max turbo?  Some compilers don&#39;t automatically auto-vectorize with ZMM registers, preferring YMM even if ZMM is available, because it can slow the <i>rest</i> of the program down to use ZMM instructions for one loop that turns out not to be important overall.  Anyway, 8 <code>double</code>s fit in a ZMM 512-bit vector, or 4 <code>double</code>s in a YMM 256-bit vector."}, {"owner": {"reputation": 1579, "user_id": 2720901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2dc8cb39d5823e5b3dcec25a6ca29ea?s=128&d=identicon&r=PG&f=1", "display_name": "zam", "link": "https://stackoverflow.com/users/2720901/zam"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1522401846, "post_id": 49552496, "comment_id": 86150956, "body": "You are exactly right that on SKX compilers may prefer YMM code generation. Howevever it is not what I took in mind (and screen-shot is  taken on KNL). What I said instead is that, considering e.g.  AVX(1) Double Precision code, you could easily get Compiler_VL =2, Compiler_VL =8 and even Compiler_VL = 16. One example is a loop containing combination of Single Precision and Double Precision. Another example is register splitting for SNB. Third example is multi-pumping (kind of micro-unrolling). And of course non-default VL could be also requested by user explicitely via OMP4.x SIMD."}], "tags": [], "owner": {"reputation": 1579, "user_id": 2720901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2dc8cb39d5823e5b3dcec25a6ca29ea?s=128&d=identicon&r=PG&f=1", "display_name": "zam", "link": "https://stackoverflow.com/users/2720901/zam"}, "is_accepted": false, "score": 0, "last_activity_date": 1522315772, "creation_date": 1522315772, "answer_id": 49552496, "question_id": 49543255, "link": "https://stackoverflow.com/questions/49543255/minimum-simd-vector-width-data-type/49552496#49552496", "title": "Minimum SIMD vector width data type", "body": "<blockquote>\n  <p>Is there a way to query the granularity of the vector partitioning\n  that the compiler has used? (Avoiding digging through the resulting\n  assembly).</p>\n</blockquote>\n\n<p>I think the best answer to your question is: \"learn what is your Vector Length from opt-report or from the tool like Vectorization Advisor\".</p>\n\n<p>There are several kinds and several possible definitions for VL:</p>\n\n<ul>\n<li>When vectorizing, Compiler chooses optimal <strong>\"Vector Length\" (VL)</strong>. Let's call it \"compiler-defined loop VL\". <em>Loop's</em> VL can be defined as a number of scalar iterations \"packed into\" resultant vector operation. So in simple non-FMA DP AVX-512 case VL is frequently equal to 4.</li>\n<li><p>VL can be also defined not for the loop, but for instruction (or\nsomehow for instruction data operand), however \"optimal\" or \"current\"\n<em>per-instruction</em> VL may significantly differ from resultant loop's VL. </p></li>\n<li><p>You may also think of another metric, which is Hardware-defined loop\n(or instruction) VL.</p></li>\n</ul>\n\n<p>Number of data elements which could be put into the single vector register, having in mind target ISA, precision etc. - is pretty much equal to Hardware-defined per-instruction VL.\nCompiler-defined per-loop VL may frequently be higher or lower than \"dominating\" per-instruction hardware-defined VL. This is especially true for the loops with mixture of different data types or with loops additionally optimized for the micro-architecture, using techniques like register splitting (not spilling) or multi-pumping.</p>\n\n<p>To know VL of your loop use -qopt-report flag when re-compiling your code with Intel Compiler.</p>\n\n<p>To know compiler-defined and hardware-defined VL (not only for Intel Compiler) for your loops and instructions, along with time metrics, stride, binary ISA static anlysis (and even assembly if you'll need it eventually), FLOPS and AVX instruction mix data - use Intel Advisor (Survey analysis): <a href=\"https://i.stack.imgur.com/GwWGG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GwWGG.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1249, "user_id": 5134817, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SO4ce.jpg?s=128&g=1", "display_name": "oliversm", "link": "https://stackoverflow.com/users/5134817/oliversm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1522315772, "creation_date": 1522267529, "question_id": 49543255, "link": "https://stackoverflow.com/questions/49543255/minimum-simd-vector-width-data-type", "title": "Minimum SIMD vector width data type", "body": "<p><strong>I am trying to make sense of how much stuff I  can pack into vector hardware</strong>. Taking for example an Intel AVX-512 capable piece of hardware I can fit either 8 doubles (64-bit) or 16 singles (32-bit) into my vector. However, if I am running on a 64-bit machine, then it is likely my default pointer size is 64-bit. Hence, if I want to de-reference a pointer (or just access and array using the array syntax) then this would require a 64-bit integer operation. This seems to suggest to me that on a 64-bit machine the minimum partitioning I can have would be 64-bit data types. </p>\n\n<p>Consider then the MWE I have below, where I would hope the compiler would see I am only handling 32-bit objects (or smaller). Given I would anticipate the reduction/calculation (supposing I was doing something more computationally intensive and less bandwidth limited) to be done in half the time if I could partition the vector into 32-bit data types over using the 64-bit data types. </p>\n\n<ul>\n<li>Is there a way to query the granularity of the vector partitioning that the compiler has used? (Avoiding digging through the resulting assembly).</li>\n<li>On a 64-bit machine, how is the vector partitioned into data types less than 64-bit if a 64-bit memory address is assumed?</li>\n</ul>\n\n<blockquote>\n  <p>It seems to me that if I have vector registers and I want to do vector operations then if I require <code>n</code> vector registers, where each register is split into data types of <code>m</code>-bits, then any section of code I wish to vectorise cannot use data-types larger than <code>m</code>. (?)</p>\n</blockquote>\n\n<p><strong>MWE</strong> </p>\n\n<p>Compiled using <code>icc</code> 18.0.0 with <code>-mkl -O2 -qopenmp -qopt-report</code> where the optimisation report verifies the for loop vectorised.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\n#define N 1024\n\nint main(int argc, char **argv)\n{\n    unsigned int a[N];\n    for (unsigned int i = 0; i &lt; N; i++) a[i] = i;\n    unsigned int z[N];\n    unsigned int *b = a;\n    printf(\"Sizes (Bytes)\\n\");\n    printf(\"Pointer      = %d\\n\", sizeof(b));\n    printf(\"Unsigned int = %d\\n\", sizeof(*b));\n    printf(\"Array        = %d\\n\\n\", sizeof(a));\n\n    unsigned int sum = 0;\n    #pragma omp simd reduction(+:sum)\n    for (unsigned int i = 0; i &lt; N; i++)\n    {\n        z[i] = 4 * a[i];\n        unsigned int squares = a[i] * a[i]; // Possibly some more complex sequence of operations.\n        sum += squares;\n    }\n\n    for (unsigned int i = 0; i &lt; N; i += N/4) printf(\"z[%d] = %d\\n\", i, z[i]);\n    printf(\"\\nsum  = %d\\n\", sum);    \n}\n</code></pre>\n\n<p>Output on my machine being:</p>\n\n<pre><code>Sizes (Bytes)\nPointer      = 8\nUnsigned int = 4\nArray        = 4096\n\nz[0] = 0\nz[256] = 1024\nz[512] = 2048\nz[768] = 3072\n\nsum  = 357389824\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "multidimensional-array"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1522267365, "post_id": 49543167, "comment_id": 86093947, "body": "Yes, this is correct, you acces them using <code>key[row][col]</code> and there are 7 elems per row in all rows."}, {"owner": {"reputation": 13, "user_id": 5221989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d72fefe20366c1606cbc4b16656c17bf?s=128&d=identicon&r=PG&f=1", "display_name": "SMG", "link": "https://stackoverflow.com/users/5221989/smg"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1522267877, "post_id": 49543167, "comment_id": 86094257, "body": "How do I get the number of strings/elements in each row?"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1522267944, "post_id": 49543167, "comment_id": 86094298, "body": "Check if <code>key[row][col] == NULL</code> in a loop: <code>for (i = 0; i &lt; 7; i++)  if (key[row][il] == NULL) count++</code> ..."}, {"owner": {"reputation": 13, "user_id": 5221989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d72fefe20366c1606cbc4b16656c17bf?s=128&d=identicon&r=PG&f=1", "display_name": "SMG", "link": "https://stackoverflow.com/users/5221989/smg"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1522267984, "post_id": 49543167, "comment_id": 86094323, "body": "Is there a better way of doing it?"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1522271847, "post_id": 49543167, "comment_id": 86096340, "body": "Yes, use a more structured language :-) In C this is probably the simplest way, but it depends what you need the data for and how it might need to change.."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 9565604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a20162bb8fc22c58b40b4b2a8dafe0?s=128&d=identicon&r=PG&f=1", "display_name": "VH97", "link": "https://stackoverflow.com/users/9565604/vh97"}, "is_accepted": false, "score": 0, "last_activity_date": 1522272940, "creation_date": 1522272940, "answer_id": 49544562, "question_id": 49543167, "link": "https://stackoverflow.com/questions/49543167/2d-array-of-pointers-to-char/49544562#49544562", "title": "2D array of pointers to char", "body": "<p>Below code counts the number of elements in each row and displays it..</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    int main()\n    {\n     int count=0;const char* key[4][7] = \n     {{\"string1\",\"string2\",\"string3\",\"string4\",\"string5\",\"string6\"},\n     {\"string1\",\"string2\",\"string3\",\"string7\"}, \n     {\"string1\",\"string2\",\"string3\",\"string8\",\"string9\"},{\"string1\",\"string2\",\"string3\",\"string10\",\"string11\",\"string12\",\"string13\"}};\n     for(int i=0;i&lt;4;i++)\n     {\n          for(int j=0;j&lt;7;j++)\n          {\n               if(key[i][j]!=NULL)\n               count++;\n          }  \n        printf(\"count of element in row %d=%d\\n\",i+1,count);\n        count=0;\n     }return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5221989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d72fefe20366c1606cbc4b16656c17bf?s=128&d=identicon&r=PG&f=1", "display_name": "SMG", "link": "https://stackoverflow.com/users/5221989/smg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522272940, "creation_date": 1522267201, "question_id": 49543167, "link": "https://stackoverflow.com/questions/49543167/2d-array-of-pointers-to-char", "title": "2D array of pointers to char", "body": "<p>I need to declare an 2D array of pointers to chars -</p>\n\n<pre><code>const char* key[4][7] =\n{\n   {\"string1\",\"string2\",\"string3\",\"string4\",\"string5\",\"string6\"},\n   {\"string1\",\"string2\",\"string3\",\"string7\"},\n   {\"string1\",\"string2\",\"string3\",\"string8\",\"string9\"},\n   {\"string1\",\"string2\",\"string3\",\"string10\",\"string11\",\"string12\", \"string13\"}\n};\n//row is 4 and column is 7 - max number of strings in any array\n</code></pre>\n\n<p>Is this declaration correct? How do I get the number of strings in the each row? And how do I access each element in each row?</p>\n"}, {"tags": ["c", "linux", "windows", "assembly"], "comments": [{"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1522265556, "post_id": 49542648, "comment_id": 86092959, "body": "I&#39;m not sure what the fastest method is, but you may want to take a look at <a href=\"http://software.schmorp.de/pkg/libcoro.html\" rel=\"nofollow noreferrer\">libcoro</a>, which has a bunch of implementations. Also, I&#39;ve been told (by the author) <a href=\"https://github.com/Shelwien/stegdict/blob/master/Lib/coro2b.inc\" rel=\"nofollow noreferrer\">this</a> is pretty fast. On Windows there is a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686919(v=vs.85).aspx\" rel=\"nofollow noreferrer\">fibers API</a>, that&#39;s pretty minimal for your code\u2026"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1522267657, "post_id": 49542648, "comment_id": 86094111, "body": "You&#39;ll need <i>some</i> asm because you can&#39;t switch rsp without it. Also, depending on where you put your (e.g.) <code>coroutine_switchto()</code> calls, you&#39;ll need to save/restore a number of callee saved regs and [possibly] the flags register as well"}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1522292485, "post_id": 49542648, "comment_id": 86102032, "body": "The question is a little confusing. Do you want to know the <i>easiest</i> way to switch stacks or the <i>fastest</i> way or the <i>smallest-code-size</i> way? The title says fast but the body of the question says minimal code."}], "answers": [{"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1522276516, "post_id": 49545107, "comment_id": 86098113, "body": "In ISO C, longjmp is only valid when the <code>jmp_buf</code> was saved by a parent function, not a sibling.  i.e. you can go back up the same callstack, not switch a sibling stack.  Does MS&#39;s <code>setjmp3</code> do something different to allow for stack switching?"}, {"owner": {"reputation": 326, "user_id": 7137867, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FvVfZyScV4Q/AAAAAAAAAAI/AAAAAAAAADA/5-libN4cCck/photo.jpg?sz=128", "display_name": "Paul T", "link": "https://stackoverflow.com/users/7137867/paul-t"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1522277793, "post_id": 49545107, "comment_id": 86098462, "body": "I don&#39;t believe it does, it just allows additional parameters for context."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1522288066, "post_id": 49545107, "comment_id": 86100979, "body": "there&#39;s no need to escape <code>&#39;</code> inside <code>&quot;</code> and vice versa"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1522948438, "post_id": 49545107, "comment_id": 86367294, "body": "and instead of <code>printf(&quot;Hey, I&#39;m in \\&#39;hello()\\&#39;\\n&quot;);</code> just use <code>puts(&quot;Hey, I&#39;m in &#39;hello()&#39;&quot;);</code>"}], "tags": [], "owner": {"reputation": 326, "user_id": 7137867, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FvVfZyScV4Q/AAAAAAAAAAI/AAAAAAAAADA/5-libN4cCck/photo.jpg?sz=128", "display_name": "Paul T", "link": "https://stackoverflow.com/users/7137867/paul-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1522275647, "creation_date": 1522275647, "answer_id": 49545107, "question_id": 49542648, "link": "https://stackoverflow.com/questions/49542648/fast-stack-switching-under-x86-64/49545107#49545107", "title": "Fast stack switching under x86-64", "body": "<p>Microsoft does provide <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/setjmp\" rel=\"nofollow noreferrer\">setjmp</a>, <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/setjmp3\" rel=\"nofollow noreferrer\">setjmp3</a> and <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/longjmp\" rel=\"nofollow noreferrer\">longjmp</a>. They also provide <a href=\"https://docs.microsoft.com/en-us/cpp/cpp/using-setjmp-longjmp\" rel=\"nofollow noreferrer\">Using setjmp/longjmp</a>.</p>\n\n<p>code example below can be found at <a href=\"https://www.sanfoundry.com/c-questions-setjmp-longjmp-functions-standard-library-uses/\" rel=\"nofollow noreferrer\">Explain setjmp() and longjmp() Functions in Standard C Library with Examples</a></p>\n\n<pre><code>/* setjmp_longjmp.c -- program handles error through 'setjmp()' */\n/* and longjmp() */\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;setjmp.h&gt;\n\n/* declare variable of type jmp_buf */\njmp_buf resume_here;\n\nvoid hello(void);\n\nint main(void)\n{\n    int ret_val;\n\n    /* Initialize 'resume_here' by calling setjmp() */\n    if (setjmp(resume_here)) {\n\n\n    printf(\"After \\'longjump()\\', back in \\'main()\\'\\n\");\n        printf(\"\\'jump buffer variable \\'resume_here\\'\\' becomes \"\n                  \"INVALID!\\n\");\n    }\n    else {\n        printf(\"\\'setjmp()\\' returns first time\\n\");\n        hello();\n    }\n\n    return 0;\n}\n\nvoid hello(void)\n{\n    printf(\"Hey, I'm in \\'hello()\\'\\n\");\n    longjmp(resume_here, 1);\n\n    /* other code */\n    printf(\"can't be reached here because I did longjmp!\\n\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 2, "last_activity_date": 1522277045, "creation_date": 1522277045, "answer_id": 49545336, "question_id": 49542648, "link": "https://stackoverflow.com/questions/49542648/fast-stack-switching-under-x86-64/49545336#49545336", "title": "Fast stack switching under x86-64", "body": "<p>Changing RSP to point to a different stack has to be done as part of a context-switch that saves all the registers from the old thread/fiber and loads the saved architectural state from the new register.  Not just RBP, but all of RAX-RDI and R8-R15, and RIP (via <code>jmp</code> or <code>ret</code>).  And all the other call-preserved architectural state, which includes xmm6-15 on Windows x86-64, I think.  If your code ever changes MXCSR or the x87 control register, you need to save/restore those too.</p>\n\n<p>But if you <strong>put your context-switch in a <code>noinline</code> function</strong>, the compiler will make code for a regular function call (which effectively returns much later in time), and function calls already clobber all the call-clobbered registers.  You don't have to save the caller's zmm0-31, or MPX <code>bnd</code> registers, or RFLAGS.  So it's probably not worth using <code>xsaveopt</code> / <code>xrstor</code> to save FPU / SIMD state.</p>\n\n<p>If you leave other regs unmodified, you will have a Bad Time, because switching to a new stack and new code with old registers is basically the same thing as clobbering call-preserved registers out from under the compiler, i.e. violating the ABI.</p>\n\n<p>You don't need to save <code>RFLAGS</code> because the only things that can change in user-space are the condition codes, and those are call-clobbered.  The ABI / calling convention already requires that DF is clear on function call/return.</p>\n"}, {"tags": [], "owner": {"reputation": 1574, "user_id": 5515320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d29062b266eaaabb66a8febf8c6dc2c?s=128&d=identicon&r=PG&f=1", "display_name": "xlrg", "link": "https://stackoverflow.com/users/5515320/xlrg"}, "is_accepted": false, "score": 1, "last_activity_date": 1522825932, "creation_date": 1522825932, "answer_id": 49644903, "question_id": 49542648, "link": "https://stackoverflow.com/questions/49542648/fast-stack-switching-under-x86-64/49644903#49644903", "title": "Fast stack switching under x86-64", "body": "<p>The context switch is determined by the ABI (callee-saved registers must be preserved).\n<a href=\"https://www.boost.org/doc/libs/1_66_0/libs/context/doc/html/index.html\" rel=\"nofollow noreferrer\">boost.context</a> already provides a implementation for several architectures.\n<a href=\"https://www.boost.org/doc/libs/1_66_0/libs/fiber/doc/html/index.html\" rel=\"nofollow noreferrer\">boost.fiber</a> is an abstraction for fibers with an std::thread-like API based on boost.context.</p>\n"}], "owner": {"reputation": 189, "user_id": 8871583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91fa26ab86b989bdcc7fdc99420a670c?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Lactin", "link": "https://stackoverflow.com/users/8871583/jesse-lactin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 49545336, "answer_count": 3, "score": 3, "last_activity_date": 1522825932, "creation_date": 1522265213, "question_id": 49542648, "link": "https://stackoverflow.com/questions/49542648/fast-stack-switching-under-x86-64", "title": "Fast stack switching under x86-64", "body": "<p>What's the minimal code to switch stacks under x86-64? I'm trying to implement fibers under Windows and Linux, without getcontext or setjmp + inline assembly. Is it really as simple as swapping $rsp and $rbp? 'Cause I could do that easily. I'm just not sure how to go about it. I'm rusty on my x86-64 knowledge.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1522264174, "post_id": 49542343, "comment_id": 86092207, "body": "Welcome to stackoverflow.com. Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. Lastly please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1522264585, "post_id": 49542343, "comment_id": 86092413, "body": "<a href=\"//stackoverflow.com/q/1088622\">How do I create an array of strings in C?</a>"}, {"owner": {"reputation": 811, "user_id": 9493582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfI3b.jpg?s=128&g=1", "display_name": "Arndt Jonasson", "link": "https://stackoverflow.com/users/9493582/arndt-jonasson"}, "edited": false, "score": 1, "creation_date": 1522264590, "post_id": 49542343, "comment_id": 86092415, "body": "I think the compiler already helped you by emitting a warning. Didn&#39;t it?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1522264828, "post_id": 49542343, "comment_id": 86092535, "body": "What makes you think that you have a problem? Compiler error? Quote it. Misbehaviour? Describe it. Crash? Debug it."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1522265436, "post_id": 49542343, "comment_id": 86092884, "body": "There are some very relevant comments here so far, and you should heed them, but few address your immediate issue.  (which could have been satisfied by a little better search before asking here)  There are several viable answers addressing your question <i><a href=\"https://stackoverflow.com/questions/314401/how-to-read-a-line-from-the-console-in-c\">HERE</a></i>."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1522266636, "post_id": 49542343, "comment_id": 86093544, "body": "@Yunnosch So basically there&#39;s never a time when asking for help is the right choice? :)"}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1522267423, "post_id": 49542343, "comment_id": 86093976, "body": "n[i] is not a string, so reading with %s into n[i] is wrong."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1522270485, "post_id": 49542343, "comment_id": 86095693, "body": "@unwind It is not about the time. It is about how unnecessarily hard you make helping you. Yell &quot;Help!&quot; or explain what information you have on your problem. What do you think might be the quicker way?"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 9565604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a20162bb8fc22c58b40b4b2a8dafe0?s=128&d=identicon&r=PG&f=1", "display_name": "VH97", "link": "https://stackoverflow.com/users/9565604/vh97"}, "is_accepted": false, "score": 0, "last_activity_date": 1522296062, "last_edit_date": 1522296062, "creation_date": 1522268323, "answer_id": 49543467, "question_id": 49542343, "link": "https://stackoverflow.com/questions/49542343/how-to-read-multiple-strings-using-for-loop-in-c-with/49543467#49543467", "title": "how to read multiple strings using for loop in c with", "body": "<p>The value of 'a' must be (total length of string)+1 and always less than max size of array.\nIn first for loop:</p>\n\n<pre><code>     scanf(\"%s\",&amp;n[i]);\n</code></pre>\n\n<p>If you use scanf then while entering input you need to press [Enter] after each letter. \nUsing getchar() instead of that scanf will let you type the entire string at once.\nUse this instead of scanf: </p>\n\n<pre><code>    n[i]=getchar();\n</code></pre>\n\n<p>Lastly, that second for loop is not needed, </p>\n\n<pre><code>    printf(\"%s\\n\",n); \n</code></pre>\n\n<p>alone will print the entire string.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6398437"}, "is_accepted": false, "score": 0, "last_activity_date": 1522309741, "last_edit_date": 1522309741, "creation_date": 1522270510, "answer_id": 49544019, "question_id": 49542343, "link": "https://stackoverflow.com/questions/49542343/how-to-read-multiple-strings-using-for-loop-in-c-with/49544019#49544019", "title": "how to read multiple strings using for loop in c with", "body": "<p>You have to define 2-D array not just 1-D </p>\n\n<pre><code>char n[number_of_strings][each_string_length]\n</code></pre>\n\n<p>Be careful of your buffer overflow too. Using scanf() is not safe, you should limit your string length by not exceeding. </p>\n\n<pre><code>each_string_length-1\n</code></pre>\n\n<p>Strings in C have a '\\0' null terminator to let compiler recognize it as a string not just an array of characters. That is why you should substract one from string length which is reserved for nul terminator </p>\n"}], "owner": {"reputation": 11, "user_id": 9457944, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-doSXOtRm168/AAAAAAAAAAI/AAAAAAAAFM0/JS8AnhMqpCg/photo.jpg?sz=128", "display_name": "SAI KUMAR", "link": "https://stackoverflow.com/users/9457944/sai-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 982, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1522309741, "creation_date": 1522264057, "last_edit_date": 1522264748, "question_id": 49542343, "link": "https://stackoverflow.com/questions/49542343/how-to-read-multiple-strings-using-for-loop-in-c-with", "title": "how to read multiple strings using for loop in c with", "body": "<p>hi Iam new to programming i have a problem in reading a multiple strings can anyone help me.</p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n    #include&lt;string.h&gt;\n    int main()\n    {\n       int a;\n       char n[50];\n       scanf(\"%d\",&amp;a);\n       for(int i=0;i&lt;a;i++)\n       {\n          scanf(\"%s\",n[i]);\n       }\n\n       for(int i=0;i&lt;a;i++)\n       {        \n          printf(\"%s\\n\",n);\n       }\n\n       return 0;\n\n    }\n</code></pre>\n"}, {"tags": ["c++", "c", "semaphore", "vxworks"], "comments": [{"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1522263589, "post_id": 49542184, "comment_id": 86091901, "body": "Read this: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>,  and this: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1522263661, "post_id": 49542184, "comment_id": 86091940, "body": "A mutex is not a semaphore. It is possible to implement a semaphore using a mutex and a condition variable however."}, {"owner": {"reputation": 2532, "user_id": 2139094, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7b7f096622f36595ba50f9d65a39508a?s=128&d=identicon&r=PG", "display_name": "mjs", "link": "https://stackoverflow.com/users/2139094/mjs"}, "reply_to_user": {"reputation": 15096, "user_id": 445296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/E6JMR.jpg?s=128&g=1", "display_name": "Jive Dadson", "link": "https://stackoverflow.com/users/445296/jive-dadson"}, "edited": false, "score": 0, "creation_date": 1522761229, "post_id": 49542184, "comment_id": 86268963, "body": "@JiveDadson Mutex Semaphores are one of the 3 or 4 semaphore types provided by the VxWorks OS. These are designed to provide mutual exclusion around a shared resource, binary semaphores are better used for synchronization."}], "answers": [{"tags": [], "owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "is_accepted": false, "score": 0, "last_activity_date": 1522264563, "creation_date": 1522264563, "answer_id": 49542479, "question_id": 49542184, "link": "https://stackoverflow.com/questions/49542184/using-a-mutex-semaphore-between-two-tasks/49542479#49542479", "title": "Using a mutex semaphore between two tasks", "body": "<p>If you have to do your tasks in such a synchronous manner, it's easy enough.  </p>\n\n<p>The web task creates a semaphore at startup. The web task gets data, loads it into some request/response object instance, along with its semaphore reference/pointer.  It fires it off to the queue and waits on the semaphore.  The DB task gets the object, reads the request, processes it, loads the response field/s with results, (or error messages:), and signals the semaphore.  The web task then runs on, knowing that the response is available.</p>\n\n<p>That way, several web tasks can use the DB and it's input queue.</p>\n\n<p>Forget the mutex stuff, you don't need any mutex, (well, there may well be one protecting the DB input producer-consumer queue but, presumably, that is an internal matter).</p>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 9427905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0db23d582210b8f04dfbc5b552ff03f7?s=128&d=identicon&r=PG&f=1", "display_name": "Jianhui Wang", "link": "https://stackoverflow.com/users/9427905/jianhui-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1522828440, "creation_date": 1522828440, "answer_id": 49645620, "question_id": 49542184, "link": "https://stackoverflow.com/questions/49542184/using-a-mutex-semaphore-between-two-tasks/49645620#49645620", "title": "Using a mutex semaphore between two tasks", "body": "<p>In WebTask, after sending the msg to DBTask, it waits on a semephore (semTake) while in DBTask, after processing the Database request and data formating, it release a semephore(semGive). I think that should make your 2 tasks synchronized.</p>\n"}], "owner": {"reputation": 141, "user_id": 9469249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82094e2fe8358ae40c3c66cb25bc6d92?s=128&d=identicon&r=PG&f=1", "display_name": "ICU_", "link": "https://stackoverflow.com/users/9469249/icu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 465, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1522828440, "creation_date": 1522263407, "question_id": 49542184, "link": "https://stackoverflow.com/questions/49542184/using-a-mutex-semaphore-between-two-tasks", "title": "Using a mutex semaphore between two tasks", "body": "<p>I am trying to understand just how to use semaphores in general. I have chosen a mutex type semaphore instead of a binary in order to maintain task priorities. The synopsis is:</p>\n\n<p>I have two tasks, WebTask and DBTask.</p>\n\n<p>WebTask is a simple task that takes (can you guess) web requests and does something with them.</p>\n\n<p>DBTask is a (you got it) database task that runs on a messaging queue type system, so in order to work with it, you must send a message to its queue with n arguments.</p>\n\n<p>Here is how things need to go down</p>\n\n<ol>\n<li>WebTask receives an input and wants to get data from DBTask. </li>\n<li>WebTask constructs a message for DBTask and sends it along the main messaging system with DBTask's id and all arguments</li>\n<li><p>WebTask must wait for DBTask to </p>\n\n<ol>\n<li>Receive the message</li>\n<li>Talk to the database</li>\n<li>Format the result</li>\n</ol></li>\n</ol>\n\n<p>Without semaphores, here's what is happening</p>\n\n<ol>\n<li>WebTask constructs and sends msg</li>\n<li>WebTask continues on</li>\n<li>DBTask gets msg</li>\n<li>DBTask talks to database, gets data, etc</li>\n</ol>\n\n<p>So obviously they are out of sync (should be 1,3,4,2)</p>\n\n<p>This is just one thing I tried that I thought would work..</p>\n\n<ol>\n<li>WebTask create a new mutex semaphore</li>\n<li>WebTask constructs and sends a msg, while also telling DBTask about the semaphore ID</li>\n<li>WebTask takes the semaphore</li>\n<li>DBTask gets msg</li>\n<li>DBTask processes msg</li>\n<li>DBTasks gives back semaphore</li>\n</ol>\n\n<p>This changed nothing.</p>\n\n<p>What I don't understand at all (after many attempts).</p>\n\n<ol>\n<li>Who should be in charge of the semaphore? Who should create it?</li>\n<li>When is the semaphore taken?</li>\n<li>When is the semaphore given?</li>\n</ol>\n\n<p>(Notes: I am on VxWorks)</p>\n"}, {"tags": ["c", "ram", "osdev", "bare-metal"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1522263303, "post_id": 49542074, "comment_id": 86091727, "body": "So you have not properly defined and initialized your stack. You have to fix your linker script and perhaps the startup code. BTW, &quot;Bare metal OS&quot; is an oxymoron."}, {"owner": {"reputation": 141, "user_id": 4464627, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mp56iqAZaHY/AAAAAAAAAAI/AAAAAAAAAD4/mzqbOeNZpfI/photo.jpg?sz=128", "display_name": "NBWL", "link": "https://stackoverflow.com/users/4464627/nbwl"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1522265658, "post_id": 49542074, "comment_id": 86093019, "body": "it was indeed in the startup code thanks. Also I&#39;m currently setting up a stack for each cpu mode: is this required ? or let&#39;s say I won&#39;t use the FIQ mode, can I skip initialising the stack pointer ?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1522265691, "post_id": 49542074, "comment_id": 86093038, "body": "You can if you absolutely sure that it will never be in this mode"}], "owner": {"reputation": 141, "user_id": 4464627, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mp56iqAZaHY/AAAAAAAAAAI/AAAAAAAAAD4/mzqbOeNZpfI/photo.jpg?sz=128", "display_name": "NBWL", "link": "https://stackoverflow.com/users/4464627/nbwl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522263020, "creation_date": 1522263020, "question_id": 49542074, "link": "https://stackoverflow.com/questions/49542074/bare-metal-os-cant-use-locals", "title": "Bare metal OS can&#39;t use locals", "body": "<p>I just started to get into OS development, emulating a raspi2 (cortex a7) with qemu.\nRight now I'm stuck because I can't use local variables when the cpu is in user mode. </p>\n\n<p>here's what my main program looks like</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\nuint32_t function_with_locals() {\n    uint32_t l1 = 5;\n    uint32_t l2 = 3;\n\n    return l1 - l2;\n}\n\nvoid kmain() {\n    __asm(\"cps 0b10000\"); // cpu in user mode\n\n    uint64_t res = function_with_locals();\n\n}\n</code></pre>\n\n<p>if I set a breakpoint in <code>function_with_locals</code> this is the frame info from gdb</p>\n\n<pre><code>(gdb) i frame\nStack level 0, frame at 0x0:\npc = 0x9d4c in function_with_locals (kmain.c:10); saved pc = 0x9d84\ncalled by frame at 0x10\nsource language c.\nArglist at 0xfffffff8, args:\nLocals at 0xfffffff8, Previous frame's sp is 0x0\n</code></pre>\n\n<p>basically I can't use any locals because they are stored outside of the RAM I defined in the linker script when the cpu is in user mode.\nHowever if I change it to SVC mode <code>l1</code> and <code>l2</code>are well within the RAM.</p>\n\n<p>Any pointers on what might cause this ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "makefile", "compilation", "object-files"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522263133, "post_id": 49542064, "comment_id": 86091623, "body": "You don&#39;t need an <code>.o</code> file if you&#39;re just declaring structures, not functions."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1522263134, "post_id": 49542064, "comment_id": 86091624, "body": "Every .c file is compiled into a .o by the compiler. Whether or not .h files exist and what they do is up to the programmer. They are only dependencies, they do not create object files of their own."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522263183, "post_id": 49542064, "comment_id": 86091648, "body": "You can put the functions in the same <code>.c</code> file as the caller, while still having a separate <code>.h</code> file for the declarations, but that would be a perverse thing to do."}, {"owner": {"reputation": 298, "user_id": 9565234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7851056ad00a3e38bd61012a76ea6efb?s=128&d=identicon&r=PG&f=1", "display_name": "iaskdumbstuff", "link": "https://stackoverflow.com/users/9565234/iaskdumbstuff"}, "edited": false, "score": 0, "creation_date": 1522263315, "post_id": 49542064, "comment_id": 86091735, "body": "I see. Let&#39;s say I&#39;m trying to compile a program through a makefile, and that program depends on 2 .c files, both of which have no .h files that they depend on. When I compile the .o files, I&#39;ll only have to write down the corresponding .c files as the files that they depend on, right?"}, {"owner": {"reputation": 4952, "user_id": 5987698, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1b26d6435dcb8897d1a57fa24b462da0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodDeeds", "link": "https://stackoverflow.com/users/5987698/gooddeeds"}, "edited": false, "score": 0, "creation_date": 1522263577, "post_id": 49542064, "comment_id": 86091893, "body": "@user494405 Yes. And you might need to link the two <code>.o</code> files later."}, {"owner": {"reputation": 298, "user_id": 9565234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7851056ad00a3e38bd61012a76ea6efb?s=128&d=identicon&r=PG&f=1", "display_name": "iaskdumbstuff", "link": "https://stackoverflow.com/users/9565234/iaskdumbstuff"}, "edited": false, "score": 0, "creation_date": 1522264275, "post_id": 49542064, "comment_id": 86092257, "body": "Thanks. I&#39;m sorry but, I don&#39;t understand what you mean by &quot;link the two .o files&quot;. What does that mean?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1522265449, "post_id": 49542064, "comment_id": 86092891, "body": "Looks like you need to step back where the executable build process is explained. Without it you can&#39;t do anything meaningful with makefiles."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 0, "creation_date": 1522265489, "post_id": 49542064, "comment_id": 86092912, "body": "@user494405: If you are just starting, I suggest you ignore Makefiles altogether <i>for the moment</i> until you understand the language better. Compile your code passing all the source files (i.e. <code>.c</code>) to the compiler at once, so that the compiler performs both the compiling and the linking for you in one single step. This will also avoid having to deal with intermediate object files (i.e. <code>.o</code>)."}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1522267734, "post_id": 49542064, "comment_id": 86094159, "body": "If your program has two .c files, then at least one of them must have a corresponding .h file. For example, if file a.c contains a call to a function in b.c, then a,c must include a b.h file that specifies the prototypes of the functions in b.c"}, {"owner": {"reputation": 298, "user_id": 9565234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7851056ad00a3e38bd61012a76ea6efb?s=128&d=identicon&r=PG&f=1", "display_name": "iaskdumbstuff", "link": "https://stackoverflow.com/users/9565234/iaskdumbstuff"}, "edited": false, "score": 0, "creation_date": 1522268841, "post_id": 49542064, "comment_id": 86094790, "body": "Ohhh, of course, that makes sense, thank you. To the rest of you, I do agree that I need to get more comfortable before learning any more on makefiles. I just wanted to learn the very basic basics. Thank you!"}, {"owner": {"reputation": 4952, "user_id": 5987698, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1b26d6435dcb8897d1a57fa24b462da0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodDeeds", "link": "https://stackoverflow.com/users/5987698/gooddeeds"}, "edited": false, "score": 0, "creation_date": 1522270459, "post_id": 49542064, "comment_id": 86095674, "body": "Another thing that might be helpful to you in the future - when replying to comments made by anyone than the poster of the respective question/answer, using @&lt;username&gt; sends the user a notification. Else, they may not even know you responded."}, {"owner": {"reputation": 298, "user_id": 9565234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7851056ad00a3e38bd61012a76ea6efb?s=128&d=identicon&r=PG&f=1", "display_name": "iaskdumbstuff", "link": "https://stackoverflow.com/users/9565234/iaskdumbstuff"}, "reply_to_user": {"reputation": 4952, "user_id": 5987698, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1b26d6435dcb8897d1a57fa24b462da0?s=128&d=identicon&r=PG&f=1", "display_name": "GoodDeeds", "link": "https://stackoverflow.com/users/5987698/gooddeeds"}, "edited": false, "score": 1, "creation_date": 1522273033, "post_id": 49542064, "comment_id": 86096857, "body": "@GoodDeeds Ah, that would explain why sometimes the person wouldn&#39;t reply. Thank you very much!"}], "answers": [{"tags": [], "owner": {"reputation": 244, "user_id": 9177735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90311d812036b4debfcf7aa866dec22?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9177735/ben"}, "is_accepted": false, "score": 4, "last_activity_date": 1522265090, "creation_date": 1522265090, "answer_id": 49542618, "question_id": 49542064, "link": "https://stackoverflow.com/questions/49542064/does-every-h-file-have-a-corresponding-object-file/49542618#49542618", "title": "Does every .h file have a corresponding object file?", "body": "<p>Basically the header (.h) files tell the compiler that things exist when it's generating the object (.o) files. The compiler generates object files from source (.c/.cpp/etc.) files. If the compiler doesn't know specifically about something, it assumes the header was right and leaves a \"name\" behind for the linker.</p>\n\n<p>The linker will take the object files and generate an executable by replacing \"names\" in the object code with code from other object files.</p>\n\n<p>This is a <strong>very</strong> high level overview of what happens. There are many many pages on the specifics.</p>\n"}, {"tags": [], "owner": {"reputation": 212, "user_id": 9418834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8970882a6adb3bf98785773db9f554a5?s=128&d=identicon&r=PG&f=1", "display_name": "N. Paul", "link": "https://stackoverflow.com/users/9418834/n-paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1522277304, "creation_date": 1522277304, "answer_id": 49545383, "question_id": 49542064, "link": "https://stackoverflow.com/questions/49542064/does-every-h-file-have-a-corresponding-object-file/49545383#49545383", "title": "Does every .h file have a corresponding object file?", "body": "<p>A simple answer to illustrate the overall concept: </p>\n\n<p>Every .c file contains program code which is translated by the compiler into an .o file containing the machine code.</p>\n\n<p>Usually different .c files are combined to one software. But then they must \nsomehow be connected. Hence their .o files must be connected to an\nexecutable. This is what the linker does.</p>\n\n<p>The .h files describe connection points of .c files.</p>\n\n<p>The linker uses  the .c file connections to produce the software.</p>\n\n<p>This is a simplification, however: </p>\n\n<p>For example, the .h files are <em>not</em> consulted by the linker. They merely serve \nthe compiler to tell him that a certain symbol is a connection point the linker must resolve.</p>\n\n<p>The .h files are for conveniance of the software developper. When a .c file has \"connection points\" for the linker its peer .h file may list them all. \nIf another .c file wants to use them it may just include the corresponding .h file. But this is just a convention. Theoretically, only the .c files are essential. In theory every software project could be written with .c files only (however, mostly not in due time).</p>\n"}], "owner": {"reputation": 298, "user_id": 9565234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7851056ad00a3e38bd61012a76ea6efb?s=128&d=identicon&r=PG&f=1", "display_name": "iaskdumbstuff", "link": "https://stackoverflow.com/users/9565234/iaskdumbstuff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1522277304, "creation_date": 1522262995, "question_id": 49542064, "link": "https://stackoverflow.com/questions/49542064/does-every-h-file-have-a-corresponding-object-file", "title": "Does every .h file have a corresponding object file?", "body": "<p>I'm trying to write a makefile, but I don't really understand how object files work. There are no <code>.o</code> files in my folder, so how can I be compiling them? Does every <code>.h</code> file have a corresponding <code>.o</code>? If not, then how do we know if we have to compile an object file or not? Sorry if these are stupid questions, I'm new to programming. </p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "c", "subprocess", "call"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1522262256, "post_id": 49541728, "comment_id": 86091096, "body": "Firstly, does any other program work? I&#39;d suggest e.g. <code>ls</code> or something harmless. If yes, you can reduce your question. Then, please read about a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your code is neither C nor V, which makes it hard to reason about."}, {"owner": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 2, "creation_date": 1522262574, "post_id": 49541728, "comment_id": 86091260, "body": "You should send one arg to <code>call()</code>, and it should be a list: <code>call([&#39;.&#47;drule&#39;, &#39;D11&#39;])</code>"}, {"owner": {"reputation": 9, "user_id": 9285235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47d826cee3de1d1486d1e1d73a140cba?s=128&d=identicon&r=PG&f=1", "display_name": "george s", "link": "https://stackoverflow.com/users/9285235/george-s"}, "edited": false, "score": 0, "creation_date": 1522262940, "post_id": 49541728, "comment_id": 86091498, "body": "thanks  jordanm. I did what you suggested and now I do not get an error message but just a &quot;0&quot; as output"}, {"owner": {"reputation": 766, "user_id": 8746930, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-4vA616Iuc-I/AAAAAAAAAAI/AAAAAAAAAAc/5hrF-krxrXM/photo.jpg?sz=128", "display_name": "eagle", "link": "https://stackoverflow.com/users/8746930/eagle"}, "edited": false, "score": 1, "creation_date": 1522263806, "post_id": 49541728, "comment_id": 86092010, "body": "<code>0</code> means it worked but you need to use <code>check_output</code> to get the result since <code>call</code> just returns the exit code"}], "owner": {"reputation": 9, "user_id": 9285235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47d826cee3de1d1486d1e1d73a140cba?s=128&d=identicon&r=PG&f=1", "display_name": "george s", "link": "https://stackoverflow.com/users/9285235/george-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522426409, "creation_date": 1522261878, "last_edit_date": 1522262513, "question_id": 49541728, "link": "https://stackoverflow.com/questions/49541728/subprocess-invoke-c-program-from-within-python", "title": "subprocess, invoke C-program from within Python", "body": "<p>I am trying to invoke a C-program, named \u201cdrule.c\u201d, from within my Python-program \u201cdrulewrapper.py\u201d. I am trying to use \"subprocess\" but cannot get it to work. </p>\n\n<p>1)  I compile \u201cdrule.c\u201d on the Mac\u2019s terminal and all works okay:</p>\n\n<pre><code>$ gcc -o drule drule c\n$ ./drule D11\n&gt;P&gt;Q&gt;RQ\n</code></pre>\n\n<p>Fyi, the input -- \u201cD11\u201d -- are axioms in predicate logic; the output -- \u201c>P>Q>RQ\u201d -- is the theorem that is proven and which I then want to process further in my Python program.</p>\n\n<p>2)  I write a short Python program (drulewrapper.py) and compile it:</p>\n\n<pre><code>From subprocess import call\ndef CheckString():\n     call(\u201c./drule\u201d, \u201cD11\u201d)\n</code></pre>\n\n<p>3)  But when I run CheckString() I get errors: </p>\n\n<pre><code>    Traceback (most recent call last):\n  File \"&lt;pyshell#7&gt;\", line 1, in &lt;module&gt;\n    CheckString()\n  File \"/Users/georgeszpiro/Dropbox/metamath/GApl/drulewrapper.py\", line 3, in CheckString\n    call(\"./drule\",\"D11\")\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py\", line 267, in call\n    with Popen(*popenargs, **kwargs) as p:\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/subprocess.py\", line 609, in __init__\n    raise TypeError(\"bufsize must be an integer\")\nTypeError: bufsize must be an integerT\n</code></pre>\n\n<p>Can anybody help?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "edited": false, "score": 0, "creation_date": 1522261973, "post_id": 49541702, "comment_id": 86090930, "body": "I suggest that you use the Runge kutta from Boost, althogh you need to use C++."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1522262004, "post_id": 49541702, "comment_id": 86090951, "body": "Read about a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. That link provides excellent information how to reduce a problem to something that is small enough to understand or to ask a specific question. That said, if you ever post code asking people to read it, make sure it is well readable. In particular, make sure you have consistent formatting."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1522262130, "post_id": 49541702, "comment_id": 86091030, "body": "<code>1&#47;6</code> Integer division. This will always be <code>0</code>."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1522262448, "post_id": 49541702, "comment_id": 86091194, "body": "<code>for (i=1; i&lt;=n; i=i+1)</code> You copied this fragment from the <i>Numerical Recipes in C</i> book? And,even if so: are you sure that <code>vx[i+1]</code> does not address the array(s) out of bounds?"}, {"owner": {"reputation": 306, "user_id": 9464761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98021f004e15acd14387c43c77356d16?s=128&d=identicon&r=PG&f=1", "display_name": "NetJohn", "link": "https://stackoverflow.com/users/9464761/netjohn"}, "edited": false, "score": 0, "creation_date": 1522264638, "post_id": 49541702, "comment_id": 86092433, "body": "Please learn about <code>&#47;&#47;</code> and <code>&#47;* *&#47;</code> and use them.  Who ever has to look at this code later on will appreciate it."}, {"owner": {"reputation": 11, "user_id": 9565740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a2839766a7cf5a8cd78197f6e6d71a?s=128&d=identicon&r=PG&f=1", "display_name": "Topcatmki", "link": "https://stackoverflow.com/users/9565740/topcatmki"}, "reply_to_user": {"reputation": 5012, "user_id": 2416647, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f471b80868ae9c93d0903127ed27e2f9?s=128&d=identicon&r=PG", "display_name": "schorsch312", "link": "https://stackoverflow.com/users/2416647/schorsch312"}, "edited": false, "score": 0, "creation_date": 1522812608, "post_id": 49541702, "comment_id": 86292133, "body": "@schorsch312 it&#39;s not necessary to use C++, once you know the mathematical procedure behind the formulas, any language can be used. Anyways, thanks for your advice."}, {"owner": {"reputation": 11, "user_id": 9565740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a2839766a7cf5a8cd78197f6e6d71a?s=128&d=identicon&r=PG&f=1", "display_name": "Topcatmki", "link": "https://stackoverflow.com/users/9565740/topcatmki"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1522812861, "post_id": 49541702, "comment_id": 86292190, "body": "@wildplasser How can one say that the loop is copied? I guess that&#39;s the ubiquitous loop text one uses and nobody owns it&#39;s copyrights. To address your second question, yes I am sure."}], "answers": [{"tags": [], "owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "is_accepted": true, "score": 2, "last_activity_date": 1522262700, "creation_date": 1522262700, "answer_id": 49541974, "question_id": 49541702, "link": "https://stackoverflow.com/questions/49541702/recursive-values-in-4th-order-rk-method-for-projectile-quadratic-drag-in-c/49541974#49541974", "title": "Recursive values in 4th order RK method for projectile (quadratic drag) in C", "body": "<p>The problem is here:</p>\n\n<pre><code>vx[i+1]= vx[i]+((1/6)*(k1+2*k2+2*k3+k4)*delt);\nvy[i+1]= vy[i]+((1/6)*(m1+2*m2+2*m3+m4)*delt);\n</code></pre>\n\n<p><code>1/6</code> - both numbers are integers so this will result in <code>0</code> making your statements:</p>\n\n<pre><code>vx[i+1]= vx[i];\nvy[i+1]= vy[i];\n</code></pre>\n\n<p>Make them floating point. And since you calculate often, make it a constant.</p>\n\n<pre><code>const double one_sixth = 1.0 / 6.0;\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>vx[i+1]= vx[i]+(one_sixth * (k1+2*k2+2*k3+k4)*delt);\nvy[i+1]= vy[i]+(one_sixth * (m1+2*m2+2*m3+m4)*delt);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9565740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a2839766a7cf5a8cd78197f6e6d71a?s=128&d=identicon&r=PG&f=1", "display_name": "Topcatmki", "link": "https://stackoverflow.com/users/9565740/topcatmki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "closed_date": 1522268107, "accepted_answer_id": 49541974, "answer_count": 1, "score": 0, "last_activity_date": 1522304628, "creation_date": 1522261782, "last_edit_date": 1522304628, "question_id": 49541702, "link": "https://stackoverflow.com/questions/49541702/recursive-values-in-4th-order-rk-method-for-projectile-quadratic-drag-in-c", "closed_reason": "Not suitable for this site", "title": "Recursive values in 4th order RK method for projectile (quadratic drag) in C", "body": "<p>I am trying to code projectile motion of a shell using 4th order RK method. I am facing a problem in the following code.</p>\n\n<pre><code>for (i=1; i&lt;=n; i=i+1)\n{\n    ax[i]= (-kk[i]*v[i]*vx[i])/m;\n    ay[i]= ((-kk[i]*v[i]*vy[i])-(m*g))/m;\n    k1= ax[i];\n    m1= ay[i];\n    k2= (-kk[i]*v[i]*(vx[i]+(k1*delt/2)))/m;\n    m2=  (-kk[i]*v[i]*(vy[i]+(m1*delt/2)))/m;\n    k3= (-kk[i]*v[i]*(vx[i]+(k2*delt/2)))/m;\n    m3=  (-kk[i]*v[i]*(vy[i]+(m2*delt/2)))/m;\n    k4= (-kk[i]*v[i]*(vx[i]+(k3*delt)))/m;\n    m4=  (-kk[i]*v[i]*(vy[i]+(m3*delt)))/m;\n    vx[i+1]= vx[i]+((1/6)*(k1+2*k2+2*k3+k4)*delt);\n    vy[i+1]= vy[i]+((1/6)*(m1+2*m2+2*m3+m4)*delt);\n    x[i+1]= vx[i+1]*delt;\n    y[i+1]= vy[i+1]*delt;\n    xx[i+1]= x[i+1] + xx[i];\n    yy[i+1]= y[i+1] + yy[i];\n    t[i+1]= t[i]+delt;\n    v[i+1]= sqrt((vx[i+1]*vx[i+1])+(vy[i+1]*vy[i+1]));\n    if ((yy[i+1]&lt;0)&amp;&amp;(i!=1))\n        //if (i==100)\n    {\n        nn=i;\n        i=n;\n    }\n    printf (\"%f\\t%f\\t%f\\t%f\\t%f\\t%f\\t\\n\", t[i], vx[i], vy[i], v[i], xx[i], yy[i]);\n</code></pre>\n\n<p>In the above code <code>ax</code>, <code>ay</code>, <code>vx</code> and <code>vy</code> are accelerations and velocity in x and y directions, <code>delt</code> represents the time step. <code>xx</code> and <code>yy</code> are the position of the corresponding time steps. \nAfter using fourth order RK method I try to find the velocities in the next time step to obtain the corresponding values in the loop until the projectile hits the ground. But I am only getting the same values as of <code>vx[1]</code> and <code>vy[1]</code> for every corresponding iteration and repeats.I am a beginner in C programming and still at an initial stage of using loops.  </p>\n"}, {"tags": ["c", "pointers", "gcc"], "comments": [{"owner": {"reputation": 557, "user_id": 389832, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VQULB.jpg?s=128&g=1", "display_name": "Katianie", "link": "https://stackoverflow.com/users/389832/katianie"}, "edited": false, "score": 0, "creation_date": 1522260998, "post_id": 49541459, "comment_id": 86090365, "body": "Had to look it up myself: <a href=\"https://stackoverflow.com/questions/4141666/why-sizeof-is-equivalent-to-1-and-sizeofnull-is-equivalent-to-4-in-c-langu\" title=\"why sizeof is equivalent to 1 and sizeofnull is equivalent to 4 in c langu\">stackoverflow.com/questions/4141666/&hellip;</a>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 557, "user_id": 389832, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VQULB.jpg?s=128&g=1", "display_name": "Katianie", "link": "https://stackoverflow.com/users/389832/katianie"}, "edited": false, "score": 1, "creation_date": 1522261062, "post_id": 49541459, "comment_id": 86090404, "body": "@Katianie - <code>sizeof(NULL)</code> and <code>sizeof(*NULL)</code> are very different things."}, {"owner": {"reputation": 158, "user_id": 8214254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1837851636230765/picture?type=large", "display_name": "Utkarsh Agarwal", "link": "https://stackoverflow.com/users/8214254/utkarsh-agarwal"}, "reply_to_user": {"reputation": 557, "user_id": 389832, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VQULB.jpg?s=128&g=1", "display_name": "Katianie", "link": "https://stackoverflow.com/users/389832/katianie"}, "edited": false, "score": 0, "creation_date": 1522261142, "post_id": 49541459, "comment_id": 86090451, "body": "@Katianie Exactly, I have already read that post and couldn&#39;t find a reference for sizeof(*NULL)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1522261404, "post_id": 49541459, "comment_id": 86090590, "body": "I think <code>sizeof(void)</code> is a GNU - specific extension"}, {"owner": {"reputation": 557, "user_id": 389832, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VQULB.jpg?s=128&g=1", "display_name": "Katianie", "link": "https://stackoverflow.com/users/389832/katianie"}, "edited": false, "score": 0, "creation_date": 1522261463, "post_id": 49541459, "comment_id": 86090626, "body": "NULL is also different depending on platform, OS, and language (c vs c++)"}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1522261927, "post_id": 49541459, "comment_id": 86090908, "body": "Normally, pointer arithmetic on void-pointers are undefined behaviour. The reason sort of has to do with this quesion - the size of void is normally not defined (it is in GCC though, as nwellnhof mentions)"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1522263297, "post_id": 49541459, "comment_id": 86091724, "body": "<code>*NULL</code> is an error. It should produce at least a compiler warning, and there&#39;s no reason to think it has any meaning."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1522265827, "post_id": 49541459, "comment_id": 86093105, "body": "Are you asking out of idle curiosity?  The question, though nominally answerable, has zero practical application..."}, {"owner": {"reputation": 158, "user_id": 8214254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1837851636230765/picture?type=large", "display_name": "Utkarsh Agarwal", "link": "https://stackoverflow.com/users/8214254/utkarsh-agarwal"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1522267489, "post_id": 49541459, "comment_id": 86094029, "body": "@LeeDanielCrocker True, but I am talking about *NULL in the context of sizeof."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1522268652, "post_id": 49541459, "comment_id": 86094673, "body": "Size of an error is not an error? *NULL doesn&#39;t even have a type, how could it have a value or a size? It&#39;s meaningless, a non-entity. &quot;NULL&quot; specifically means &quot;I don&#39;t point to anything&quot;, then you&#39;re asking the size of the thing it points to. That the compiler produces anything is a surprise."}, {"owner": {"reputation": 158, "user_id": 8214254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1837851636230765/picture?type=large", "display_name": "Utkarsh Agarwal", "link": "https://stackoverflow.com/users/8214254/utkarsh-agarwal"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1522269253, "post_id": 49541459, "comment_id": 86095015, "body": "@LeeDanielCrocker And yet it produces output as 1!    <a href=\"https://ideone.com/9WPvRe\" rel=\"nofollow noreferrer\">ideone.com/9WPvRe</a>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1522269608, "post_id": 49541459, "comment_id": 86095202, "body": "@UtkarshAgarwal <i>And yet it produces output as 1</i> That&#39;s a GCCism that violates <b>6.2.5 Types</b>, paragraph 19 of <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">the C standard</a>:  &quot;The <code>void</code> type  comprises  an  empty  set  of  values;  <b>it  is  an  incomplete  object  type  that cannot be completed.</b>&quot;"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1522273185, "post_id": 49541459, "comment_id": 86096913, "body": "Welcome to &quot;undefined&quot;. Just because it&#39;s meaningless doesn&#39;t mean the compiler will necessarily fail, or generate an error. That would be too convenient."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1522261309, "post_id": 49541554, "comment_id": 86090539, "body": "Where did you see such a definition?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1522261321, "post_id": 49541554, "comment_id": 86090547, "body": "If it was defined like that, any simple assignment to another pointer type would be problematic."}, {"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 0, "creation_date": 1522261483, "post_id": 49541554, "comment_id": 86090640, "body": "Ok, this was the old C, now it is either  <code>((void *) 0)</code> or <code>0</code> (it is incredible how many includes has <code>NULL</code> defined on a normal system."}, {"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1522261938, "post_id": 49541554, "comment_id": 86090915, "body": "@StoryTeller: what? <code>char</code> was always special, and <code>void</code> is a relatively recent addition in C."}, {"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1522261999, "post_id": 49541554, "comment_id": 86090947, "body": "@EugeneSh. On Debian code, there are some references of such definition, and some definition are wrong, but anyway: <a href=\"https://sources.debian.org/src/bash/4.4.18-1.1/lib/termcap/tparam.c/?hl=60#L60\" rel=\"nofollow noreferrer\">sources.debian.org/src/bash/4.4.18-1.1/lib/termcap/tparam.c/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1522262118, "post_id": 49541554, "comment_id": 86091022, "body": "1989 (the first standard being published) is your definition of recent (in 2018)? Your assertions here, as far as the C languages specification goes, have been false longer than they have been true."}, {"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1522262413, "post_id": 49541554, "comment_id": 86091174, "body": "@StoryTeller: when I started to program free software, in late 90s, the C90 were not allowed (because not so portable on all systems). So I would say that half of C live were without void ;-)  But yeah. I should have verified better (I see that there were some cases still with char, and I didn&#39;t realized that <code>void*</code> is the correct way."}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "edited": false, "score": 0, "creation_date": 1522266111, "post_id": 49541554, "comment_id": 86093261, "body": "Maybe rephrase a bit: s/^Often/In some legacy software/ ?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1522267791, "post_id": 49541554, "comment_id": 86094195, "body": "That definition of <code>NULL</code> has been invalid (i.e., it would cause the implementation that provides it to be non-conforming) since the 1989 ANSI C standard."}], "tags": [], "owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "is_accepted": false, "score": 1, "last_activity_date": 1522266877, "last_edit_date": 1522266877, "creation_date": 1522261256, "answer_id": 49541554, "question_id": 49541459, "link": "https://stackoverflow.com/questions/49541459/how-is-sizeofnull-equal-to-1-on-32-bit-c-compiler/49541554#49541554", "title": "How is sizeof(*NULL) equal to 1 on 32-bit C compiler?", "body": "<p>On \"old time\" NULL was defined as:</p>\n\n<pre><code>#define NULL ((char *)0)\n</code></pre>\n\n<p>so with <code>*NULL</code> you get a char, which has size of 1. (You can still see such definition hidden in headers, as fall back case, now, starting with C90, the <code>char</code> is substituted with <code>void</code>).</p>\n\n<p>I do not think it is a valid code (indirection of NULL, also just to take the size).</p>\n\n<p>On some compilers null is <code>0l</code> or just <code>0</code>, which will give an error in your case.</p>\n"}, {"tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": true, "score": 10, "last_activity_date": 1522261469, "creation_date": 1522261469, "answer_id": 49541612, "question_id": 49541459, "link": "https://stackoverflow.com/questions/49541459/how-is-sizeofnull-equal-to-1-on-32-bit-c-compiler/49541612#49541612", "title": "How is sizeof(*NULL) equal to 1 on 32-bit C compiler?", "body": "<p>It depends on the compiler and standard library. With GCC and glibc, <code>NULL</code> is defined as <code>(void*)0</code> and GCC has <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Pointer-Arith.html\" rel=\"noreferrer\">an extension</a> that allows pointer arithmetic on <code>void</code> pointers using <code>sizeof(void) == 1</code>. Without this extension, the compiler would produce an error.</p>\n\n<p>A standard library could also define <code>NULL</code> as <code>0</code>. In this case <code>sizeof(*NULL)</code> would also be illegal.</p>\n"}, {"comments": [{"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 2, "creation_date": 1522261931, "post_id": 49541633, "comment_id": 86090911, "body": "The C standard doesn&#39;t mandate that <code>NULL</code> is of type <code>void *</code>. It can also be an integer constant expression with the value 0. For example <code>#define NULL (2*4-8)</code> would be legal."}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1522262712, "post_id": 49541633, "comment_id": 86091353, "body": "@EugeneSh. From the C spec: <i>An integer constant expression with the value 0, or such an expression cast to type void *, is called a null pointer constant.</i> If the integer 0 is converted to a pointer, it may not map to the address 0, though. Also see the <a href=\"http://c-faq.com/null/varieties.html\" rel=\"nofollow noreferrer\">C FAQ</a>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1522262799, "post_id": 49541633, "comment_id": 86091411, "body": "@nwellnhof I have happened to work with a system where the address <code>0</code> was a valid address. Still don&#39;t know how to handle that though :)"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1522268014, "post_id": 49541633, "comment_id": 86094337, "body": "@EugeneSh.: The definition of a null pointer constant is basically about its syntax, not about how it&#39;s represented. An implementation might use all-bits-one to represent a null pointer at run time, but converting the integer constant <code>0</code> to <code>void*</code> must still yield a null pointer value. On most implementations, a null pointer is represented as all-bits-zero, so the conversion is trivial (perhaps with a size adjustment). On other implementations, the conversion has to do some work to get the right result."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 2, "last_activity_date": 1522261549, "creation_date": 1522261549, "answer_id": 49541633, "question_id": 49541459, "link": "https://stackoverflow.com/questions/49541459/how-is-sizeofnull-equal-to-1-on-32-bit-c-compiler/49541633#49541633", "title": "How is sizeof(*NULL) equal to 1 on 32-bit C compiler?", "body": "<p>Since <code>NULL</code> has type <code>void *</code>, that would mean <code>*NULL</code> has type <code>void</code>.  Taking the size of <code>void</code> is not allowed by the C standard, although some compilers do as an extension.</p>\n\n<p>In <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Pointer-Arith.html\" rel=\"nofollow noreferrer\">GCC</a>, it treats the size of <code>void</code> as 1 to allow pointer arithmetic on <code>void *</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1522267909, "post_id": 49541751, "comment_id": 86094275, "body": "There is no valid definition of <code>NULL</code> for which <code>sizeof(*NULL)</code> is not a constraint violation. <code>NULL</code> can be an constant integer expression with the value zero (in which case dereferencing a non-pointer is invalid) <i>or</i> such an expression cast to <code>void*</code> (in which case <code>*NULL</code> is of type <code>void</code>, which has no size). If <code>sizeof(*NULL)</code> does not trigger at least a warning, then your compiler is non-conforming -- as gcc is by default."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 3, "last_activity_date": 1522261958, "last_edit_date": 1592644375, "creation_date": 1522261958, "answer_id": 49541751, "question_id": 49541459, "link": "https://stackoverflow.com/questions/49541459/how-is-sizeofnull-equal-to-1-on-32-bit-c-compiler/49541751#49541751", "title": "How is sizeof(*NULL) equal to 1 on 32-bit C compiler?", "body": "<p>Standard makes no guarantee as to the value returned by <code>sizeof(*NULL)</code>, which is enough to not use this construct in practice.</p>\n<p>Your code uses implementation-defined behavior.</p>\n<blockquote>\n<p>7.173 The macros are</p>\n<pre><code>NULL\n</code></pre>\n<p>which expands to an implementation-defined null pointer constant</p>\n</blockquote>\n<p>This means that the standard does not guarantee that your code is going to compile, let alone producing a certain value.</p>\n<p>On systems defining macro <code>NULL</code> as <code>((void*)0)</code> your code will trigger a warning that should be treated as an error:</p>\n<blockquote>\n<p>prog.c:4:28: error: invalid application of \u2018sizeof\u2019 to a void type [-Werror=pointer-arith]</p>\n</blockquote>\n<p><a href=\"https://ideone.com/J8ZzP1\" rel=\"nofollow noreferrer\">Demo.</a></p>\n"}], "owner": {"reputation": 158, "user_id": 8214254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1837851636230765/picture?type=large", "display_name": "Utkarsh Agarwal", "link": "https://stackoverflow.com/users/8214254/utkarsh-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 49541612, "answer_count": 4, "score": 5, "last_activity_date": 1522266877, "creation_date": 1522260864, "last_edit_date": 1522262849, "question_id": 49541459, "link": "https://stackoverflow.com/questions/49541459/how-is-sizeofnull-equal-to-1-on-32-bit-c-compiler", "title": "How is sizeof(*NULL) equal to 1 on 32-bit C compiler?", "body": "<p>I recently learned that <code>sizeof</code> is not a function and actually evaluates at compile time.</p>\n\n<p>But I still haven't been able to figure out how <code>sizeof(*NULL)</code> is equal to 1.</p>\n\n<p>EDIT: I'm talking about gcc here specifically.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1522260818, "post_id": 49541433, "comment_id": 86090259, "body": "You didn&#39;t specify what&#39;s &quot;bad&quot; about your code"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1522260825, "post_id": 49541433, "comment_id": 86090264, "body": "What is the input, the output, and the expected output?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522260897, "post_id": 49541433, "comment_id": 86090303, "body": "You want to know why your code checks if the input number is prime? Because that was the assignment?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1522260909, "post_id": 49541433, "comment_id": 86090313, "body": "<code>x = getchar();</code> - I think that&#39;s it."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1522260938, "post_id": 49541433, "comment_id": 86090332, "body": "Convert to decimal after <code>getchar()</code>: <code>x = x - &#39;\\0&#39;;</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522260961, "post_id": 49541433, "comment_id": 86090343, "body": "Use <code>scanf()</code> to read a number, not <code>getchar()</code>."}, {"owner": {"reputation": 1, "user_id": 9565721, "user_type": "registered", "profile_image": "https://graph.facebook.com/1639043672838051/picture?type=large", "display_name": "Bartek Wach", "link": "https://stackoverflow.com/users/9565721/bartek-wach"}, "edited": false, "score": 0, "creation_date": 1522260989, "post_id": 49541433, "comment_id": 86090357, "body": "oh, sory, for example it returns that 67 is not a prime number :/ i don&#39;t realy know why does that happen"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1522261204, "post_id": 49541433, "comment_id": 86090487, "body": "You can&#39;t read 67 with <code>getchar</code>, unless you are inputting the character <code>&#39;C&#39;</code>"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1522261205, "post_id": 49541433, "comment_id": 86090488, "body": "<code>x = getchar();</code> doesn&#39;t do what I think you think it does."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1522261385, "post_id": 49541433, "comment_id": 86090584, "body": "I&#39;ll also note that your <code>break;</code> is unnecessary and unreachable code, while your <code>return true;</code> will return too early."}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1522261824, "post_id": 49541433, "comment_id": 86090852, "body": "If you type in 67, then getchar() reads one character - the character &#39;6&#39;. The Ascii value of that is 54 in decimal, which is not prime.."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1522261825, "post_id": 49541433, "comment_id": 86090853, "body": "@Bartek - The <code>prime</code> function returns either true or false already at the first test. You have to check <i>all</i> values before returning true."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1522261844, "post_id": 49541433, "comment_id": 86090864, "body": "In <code>prime</code>, remove the <code>else</code>. (i.e. ensure the <code>return true</code> is <i>outside</i> the loop). It may not be a true problem, but it&#39;s messy and suspect"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1522262359, "post_id": 49541433, "comment_id": 86091142, "body": "@CraigEstey: It is a true problem. It reports any odd number as prime, even it it&#39;s not."}, {"owner": {"reputation": 1, "user_id": 9565721, "user_type": "registered", "profile_image": "https://graph.facebook.com/1639043672838051/picture?type=large", "display_name": "Bartek Wach", "link": "https://stackoverflow.com/users/9565721/bartek-wach"}, "edited": false, "score": 0, "creation_date": 1522262414, "post_id": 49541433, "comment_id": 86091175, "body": "ok, thank you guys, it was all about getchar to scanf shift :D"}], "answers": [{"tags": [], "owner": {"reputation": 2708, "user_id": 6355028, "user_type": "registered", "accept_rate": 53, "profile_image": "https://lh3.googleusercontent.com/-f4WLW09LwQQ/AAAAAAAAAAI/AAAAAAAAAAs/_Dr0m4f7_UU/photo.jpg?sz=128", "display_name": "yajiv", "link": "https://stackoverflow.com/users/6355028/yajiv"}, "is_accepted": false, "score": 1, "last_activity_date": 1522262617, "last_edit_date": 1522262617, "creation_date": 1522261872, "answer_id": 49541726, "question_id": 49541433, "link": "https://stackoverflow.com/questions/49541433/c-programming-prime-number-check/49541726#49541726", "title": "C Programming - Prime Number Check", "body": "<p>Your code doesn't work because <code>x=getchar()</code> will accept only one character and let's you type <code>2</code> then the value of <code>x</code> will be <code>50</code> and 50 is not prime number, so you will get result <code>not prime</code>(but you are expecting '<code>prime</code>) the reason is when you type <code>2</code> it will assign it's ascii value to x because x is <code>int</code> and you are giving <code>char</code>.(And for <code>bool</code> to run you have to include <code>stdbool.h</code> in your code)</p>\n\n<p>Right code for prime number checking is</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\nbool prime(int);\n\nint main()\n{\nint x;\nscanf(\"%d\",&amp;x);\nif (x &lt; 2)\n    printf(\"its not prime\\n\");\nelse\n{\n    if (prime(x))\n        printf(\"its prime\\n\");\n    else\n        printf(\"its not prime\\n\");\n}\nreturn 0;\n}\n\nbool prime(int x)\n{\n    int i;\n    for (i = 2; i*i &lt;= x; i++){\n        if (x%i == 0)\n            return false;\n    }\n    return true;\n }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9565721, "user_type": "registered", "profile_image": "https://graph.facebook.com/1639043672838051/picture?type=large", "display_name": "Bartek Wach", "link": "https://stackoverflow.com/users/9565721/bartek-wach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522263737, "creation_date": 1522260750, "last_edit_date": 1522260846, "question_id": 49541433, "link": "https://stackoverflow.com/questions/49541433/c-programming-prime-number-check", "title": "C Programming - Prime Number Check", "body": "<p>I'm new to C programming and i'm wondering, why my code which job is to chceck if input number is prime.\nHere's the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nbool prime(int);\n\nint main()\n{\n    int x;\n    x = getchar();\n    if (x &lt; 2)\n        printf(\"its not prime\\n\");\n    else\n    {\n        if (prime(x))\n            printf(\"its prime\\n\");\n        else\n            printf(\"its not prime\\n\");\n    }\n    return 0;\n}\n\nbool prime(int x)\n{\n    for (int i = 2; i*i &lt;= x; i++)\n        if (x%i == 0)\n        {\n            return false;\n            break;\n        }\n        else\n            return true;\n}\n</code></pre>\n\n<p>I don't know what i'm doing bad :/ Can you please help me? \nThanks in advance! :)</p>\n"}, {"tags": ["c", "struct"], "answers": [{"comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1522259830, "post_id": 49540944, "comment_id": 86089686, "body": "Or remove the <code>typedef</code> keyword."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1522258923, "creation_date": 1522258923, "answer_id": 49540944, "question_id": 49540904, "link": "https://stackoverflow.com/questions/49540904/error-when-attempting-to-place-string-into-nested-struct/49540944#49540944", "title": "Error when attempting to place string into nested struct", "body": "<p><code>game</code> is the name of a type, not a variable.  You need to declare a variable of that type:</p>\n\n<pre><code>game mygame;\n</code></pre>\n\n<p>Then populate <code>mygame</code>.</p>\n\n<p>Also, never user <code>gets</code>, as the function can overrun the buffer it's writing to.  Better to use <code>fgets</code> instead.</p>\n"}], "owner": {"reputation": 119, "user_id": 8662399, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a0fb144a0aabe92cbcb43b9958edeb83?s=128&d=identicon&r=PG&f=1", "display_name": "erykkk", "link": "https://stackoverflow.com/users/8662399/erykkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 49540944, "answer_count": 1, "score": 0, "last_activity_date": 1522259532, "creation_date": 1522258763, "last_edit_date": 1522259532, "question_id": 49540904, "link": "https://stackoverflow.com/questions/49540904/error-when-attempting-to-place-string-into-nested-struct", "title": "Error when attempting to place string into nested struct", "body": "<p>I have a nested struct, which I am attempting to fill with user data. The struct:</p>\n\n<pre><code>typedef struct gameInfo \n{\n    char title[MAX];\n    char platform[MAX];\n    char developer[MAX];\n    unsigned int year;\n\n    struct borrowerInfo\n        {\n            bool borrowed;\n            char nameOfBorrower[MAX];\n            char date[MAX];\n        } borrower;\n} game;\n</code></pre>\n\n<p>I am using <code>gets()</code> and <code>scanf()</code> to get the data from the user:</p>\n\n<pre><code>gets(game.title);\ngets(game.platform);\ngets(game.developer);\nscanf(\"%d\",&amp;game.year);\n</code></pre>\n\n<p>However, I get the error: </p>\n\n<pre><code>error: expected expression before 'game'\n   gets(game.title);\n        ^~~~\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c", "loops", "scanf"], "comments": [{"owner": {"reputation": 1108, "user_id": 9296230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/213kd.jpg?s=128&g=1", "display_name": "Eduardo Pascual Aseff", "link": "https://stackoverflow.com/users/9296230/eduardo-pascual-aseff"}, "edited": false, "score": 0, "creation_date": 1522258884, "post_id": 49540903, "comment_id": 86089148, "body": "You don&#39;t need the <code>&amp;</code> in <code>scanf (&quot;%[^\\n]&quot;, &amp;input);</code>"}, {"owner": {"reputation": 43, "user_id": 9565561, "user_type": "registered", "profile_image": "https://graph.facebook.com/1702977373093083/picture?type=large", "display_name": "Daniel Paw\u0142owski", "link": "https://stackoverflow.com/users/9565561/daniel-paw%c5%82owski"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1522259273, "post_id": 49540903, "comment_id": 86089353, "body": "@user3121023 thanks, it is working now ! :)"}, {"owner": {"reputation": 5339, "user_id": 1714692, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bd72cbc200eb7c9aa507624f154b21a7?s=128&d=identicon&r=PG", "display_name": "Francesco Boi", "link": "https://stackoverflow.com/users/1714692/francesco-boi"}, "edited": false, "score": 0, "creation_date": 1522747933, "post_id": 49540903, "comment_id": 86260237, "body": "Small advive generally infinite loop are written as <code>while(1)</code> or <code>for(;;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522260567, "post_id": 49541243, "comment_id": 86090106, "body": "The other simple way to fix it is to put a space at the beginning of the format string."}, {"owner": {"reputation": 1180, "user_id": 4766261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd4d03badb6ebc92b17af75766fdd57?s=128&d=identicon&r=PG", "display_name": "SiggiSv", "link": "https://stackoverflow.com/users/4766261/siggisv"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522260715, "post_id": 49541243, "comment_id": 86090194, "body": "@Barmar You&#39;re right. Only problem with that fix is that you would need to do more to also protect you from buffer overflow."}], "tags": [], "owner": {"reputation": 1180, "user_id": 4766261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dd4d03badb6ebc92b17af75766fdd57?s=128&d=identicon&r=PG", "display_name": "SiggiSv", "link": "https://stackoverflow.com/users/4766261/siggisv"}, "is_accepted": true, "score": 1, "last_activity_date": 1522260886, "last_edit_date": 1522260886, "creation_date": 1522260016, "answer_id": 49541243, "question_id": 49540903, "link": "https://stackoverflow.com/questions/49540903/c-infinite-loop-when-using-scanf/49541243#49541243", "title": "C : Infinite loop when using scanf", "body": "<p>Your main problem with this line:</p>\n\n<pre><code>scanf (\"%[^\\n]\", &amp;input);\n</code></pre>\n\n<p>was that it reads everything from the <code>stdin</code> buffer up to <code>'\\n'</code> <strong>and leaves <code>'\\n'</code> in the buffer</strong>. So the next time you get back to that line to read from the buffer, the first char in the buffer is still <code>'\\n'</code> resulting in nothing being read and the buffer not being changed.</p>\n\n<p>(Another problem with that line is that there is the risk of buffer overflow if the line being read is longer than the <code>input</code> array).</p>\n\n<p>There is more than one way to fix this but the simplest one (that also should protect you from buffer overflow) would be the one that has been mentioned in the comments, by using <code>fgets(input, sizeof input, stdin);</code>.</p>\n"}], "owner": {"reputation": 43, "user_id": 9565561, "user_type": "registered", "profile_image": "https://graph.facebook.com/1702977373093083/picture?type=large", "display_name": "Daniel Paw\u0142owski", "link": "https://stackoverflow.com/users/9565561/daniel-paw%c5%82owski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 49541243, "answer_count": 1, "score": 1, "last_activity_date": 1522260886, "creation_date": 1522258758, "last_edit_date": 1522260495, "question_id": 49540903, "link": "https://stackoverflow.com/questions/49540903/c-infinite-loop-when-using-scanf", "title": "C : Infinite loop when using scanf", "body": "<p>I am using following structure:</p>\n\n<pre><code>struct Transistor {\n   char  type_number[50];\n   char  supplier[50];\n   int   maxVce;\n   float   maxIc;\n   int   max_power;\n   int   max_freq;\n   int   max_gain;\n   float   price;\n};\n</code></pre>\n\n<p>Running code:</p>\n\n<pre><code>while(1==1){\n        printf(\"Insert parameters: \\n\");\n        char input[100];\n        scanf (\"%[^\\n]\", &amp;input);\n        char *token = strtok(input, \" \");\n        if(input[0]=='q'){\n            return 0;\n        }\n        parameters[0]=atoi(token);\n        token = strtok(NULL, \" \");\n        ic=atof(token);\n        token = strtok(NULL, \" \");\n        parameters[1]=atoi(token);\n        token = strtok(NULL, \" \");\n        parameters[2]=atoi (token);\n        token = strtok(NULL, \" \");\n        parameters[3]=atoi(token);\n\n\n        printf (\"\\n Parameters: \\nVCe:%d,\\nPow:%d,\\nFreq:%d,\\nGain:%d \\nIce:%.3f\\n\",parameters[0],parameters[1],parameters[2],parameters[3],ic);\n        printf(\"Transistor that matches your requirements: \\n\");\n        for(a=0; a&lt;15; a++){\n            i=0;\n            if(parameters[0]&lt;=all_Transistors[a].maxVce){\n                i++;\n            }\n            if(parameters[1]&lt;=all_Transistors[a].max_power){\n                i++;\n            }\n            if(parameters[2]&lt;=all_Transistors[a].max_freq){\n                i++;\n            }\n            if(parameters[3]&lt;=all_Transistors[a].max_gain){\n                i++;\n            }\n            if(ic&lt;=all_Transistors[a].maxIc) {\n                i++;\n            }\n            if(i==5){\n                printf(\"\\n\\nTransistor name: %s\\n\",all_Transistors[a].type_number);\n                printf(\"Supplier: %s\\n\",all_Transistors[a].supplier);\n                printf(\"Maximum Vce: %d\\n\",all_Transistors[a].maxVce);\n                printf(\"Maximum Ic: %.3f\\n\",all_Transistors[a].maxIc);\n                printf(\"Maximum power: %d\\n\",all_Transistors[a].max_power);\n                printf(\"Maximum freq: %d\\n\",all_Transistors[a].max_freq);\n                printf(\"Maximum gain: %d\\n\",all_Transistors[a].max_gain);\n                printf(\"Price: %.3f\\n\",all_Transistors[a].price);\n            }\n        }\n    }\n</code></pre>\n\n<p>Thing is:\nI am entering the first set of parameters like:</p>\n\n<pre><code>1 1.1 2 3 4\n</code></pre>\n\n<p>It works fine loop runs again but <code>scanf</code> is not, it should work as long as user enters <code>q</code> as a first character of input.</p>\n\n<p>Why is <code>scanf</code> not running every loop?</p>\n"}, {"tags": ["c", "string", "malloc", "free"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1522256274, "post_id": 49540186, "comment_id": 86087652, "body": "Looks like you didn&#39;t free all the members of <code>data</code> that you <code>malloc</code>ed.  You only freed <code>data</code> itself."}, {"owner": {"reputation": 19, "user_id": 8953619, "user_type": "registered", "profile_image": "https://graph.facebook.com/1962113987396280/picture?type=large", "display_name": "Andrew Sanders", "link": "https://stackoverflow.com/users/8953619/andrew-sanders"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1522256319, "post_id": 49540186, "comment_id": 86087685, "body": "But wouldn&#39;t that free everything in data too? Or do I just need to free everything inside data first then free data as a whole?"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 5, "creation_date": 1522256335, "post_id": 49540186, "comment_id": 86087699, "body": "right before <code>strcpy(stringlist[i], stringcpy);</code> you need to terminate the <code>stringcpy</code> variable, try <code>stringcpy[x]=&#39;\\0&#39;;</code>"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1522256344, "post_id": 49540186, "comment_id": 86087705, "body": "You need to explicitly free everything."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1522256494, "post_id": 49540186, "comment_id": 86087799, "body": "Do you expect free() to do anything to the content of the freed memory? E.g. do you expect the memory to be null-filled afterwards?"}, {"owner": {"reputation": 19, "user_id": 8953619, "user_type": "registered", "profile_image": "https://graph.facebook.com/1962113987396280/picture?type=large", "display_name": "Andrew Sanders", "link": "https://stackoverflow.com/users/8953619/andrew-sanders"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1522256665, "post_id": 49540186, "comment_id": 86087891, "body": "@ChristianGibbons and cleblanc, those worked, thanks!!"}], "owner": {"reputation": 19, "user_id": 8953619, "user_type": "registered", "profile_image": "https://graph.facebook.com/1962113987396280/picture?type=large", "display_name": "Andrew Sanders", "link": "https://stackoverflow.com/users/8953619/andrew-sanders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522256004, "creation_date": 1522256004, "question_id": 49540186, "link": "https://stackoverflow.com/questions/49540186/free-with-a-string-not-clearing-the-string-in-c", "title": "Free with a string not clearing the string in C?", "body": "<p>I'm trying to read lines from a file with words separated by commas and supposed to keep each section separated by those commas then print out certain ones. It works in a general sense, but I use a stringcpy variable that I malloc to put the comma-separated section into, and it's mallocing correctly and all, but it's not actually clearing when I free it. When I use the stringcpy again, it just rewrites the old one and keeps all the old characters I don't overwrite. Here's the bulk code, my output, and expected output. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\n\n\ntypedef struct airdata{\n    char *siteNum;\n    char *LocalID;\n    char *portName;\n    char *city;\n    char *state;\n    char *lat;\n    char *lon;\n    char *Tower;\n} airdata;\n\nvoid printData(airdata *);\n\nint main(int arga, char **argb){\n    char *filename = argb[1];\n\n    FILE *fin = fopen(filename, \"rw\");\n    if(fin == NULL){\n        fprintf(stderr, \"error opening file.\");\n        return -1;\n    }\n    //      else{\n    //      printf(\"found and opened file.\\n\");\n    //  }\n    char buff[10000];\n    int m = 0;\n    for(m = 0; m &lt; 10000; m++){\n        buff[m] = '$';\n    }\n    while(fgets(buff, sizeof buff, fin)){\n        char stringlist[19][100];\n        //fprintf(stdout, \"%s\", buff);\n        struct airdata * data = malloc(sizeof(airdata));\n        data-&gt;siteNum = malloc(sizeof(char)*100);\n        data-&gt;LocalID = malloc(sizeof(char)*100);\n        data-&gt;portName = malloc(sizeof(char)*100);\n        data-&gt;city = malloc(sizeof(char)*100);\n        data-&gt;state = malloc(sizeof(char)*100);\n        data-&gt;lat = malloc(sizeof(char)*70);\n        data-&gt;lon = malloc(sizeof(char)*70);\n        data-&gt;Tower = malloc(sizeof(char)*1);\n        int i = 0;\n        int x = 0;\n        int dot = 0;\n        for(i = 0; i &lt; 19; i++){\n            char * stringcpy = malloc(sizeof(char)*100);\n            x = 0;\n            while(buff[dot] != ','){\n                stringcpy[x] = buff[dot];\n//                printf(\"%c \", buff[dot]);\n//                printf(\"%c\\n\", stringcpy[x]);\n                //printf();\n                dot++;\n                x++;\n                if(buff[dot] == '$'){\n                    break;\n                }\n            }\n            //printf(\"%s\\n\", stringcpy);\n            strcpy(stringlist[i], stringcpy);\n            free(stringcpy);\n            //printf(\"%s\\n\", stringlist[2]);\n            //printf(\"\\n\");\n            //printf(\" %d\\n\", x);\n            dot++;\n            //printf(\"%s \", stringlist[i]);\n        }\n\n        strcpy(data-&gt;siteNum, stringlist[0]);\n        strcpy(data-&gt;LocalID, stringlist[1]);\n        strcpy(data-&gt;portName, stringlist[2]);\n        strcpy(data-&gt;city, stringlist[3]);\n        strcpy(data-&gt;state, stringlist[4]);\n        strcpy(data-&gt;lat, stringlist[8]);\n        strcpy(data-&gt;lon, stringlist[9]);\n        strcpy(data-&gt;Tower, stringlist[14]);\n        printData(data);\n        free(data);\n        for(m = 0; m &lt; 10000; m++){\n            buff[m] = '$';\n        }\n\n    }\n    fclose(fin);\n    return 0;\n\n}\n\nvoid printData(airdata * entry){\n    printf(\"%-12s %-11s %-42s %-34s %-3s %-15s %-16s %s\\n\",\n           entry-&gt;siteNum, entry-&gt;LocalID, entry-&gt;portName, entry-&gt;city, entry-&gt;state,\n           entry-&gt;lat, entry-&gt;lon, entry-&gt;Tower);\n}\n</code></pre>\n\n<p>Expected output: </p>\n\n<pre><code>FAA Site     Short Name  Airport Name                               City                               ST  Latitude        Longitude        Tower\n========     ==========  ============                               ====                               ==  ========        =========        =====\n03406.20*H   2FD7        AIR ORLANDO                                ORLANDO                            FL  28-26-08.0210N  081-28-23.2590W  N\n03406.36*H   2FL5        BROOKSVILLE INTL AIRWAYS- INC              ORLANDO                            FL  28-25-26.0000N  081-27-35.0000W  N\n03406.18*H   32FL        MEYER                                      ORLANDO                            FL  28-30-05.0120N  081-26-39.2560W  N\n03406.11*H   37FA        FLORIDA HOSPITAL                           ORLANDO                            FL  28-34-32.0020N  081-22-06.2490W  N\n03406.31*H   3FD5        ARNOLD PALMER HOSPITAL                     ORLANDO                            FL  28-31-21.0090N  081-22-49.2520W  N\n</code></pre>\n\n<p>My output:</p>\n\n<pre><code>03406.20*H   2FD76.20*H  AIR ORLANDO                                ORLANDOANDO                        FLLANDOANDO 28-26-08.0210N  081-28-23.2590W  NON-NPIAS.2590W\n03406.36*H   2FL56.36*H  BROOKSVILLE INTL AIRWAYS- INC              ORLANDOILLE INTL AIRWAYS- INC      FLLANDOILLE INTL AIRWAYS- INC 28-25-26.0000NTL AIRWAYS- INC 081-27-35.0000WL AIRWAYS- INC NON-NPIAS.0000WL AIRWAYS- INC\n03406.18*H   32FL6.18*H  MEYER.18*H                                 ORLANDO8*H                         FLLANDO8*H 28-30-05.0120N  081-26-39.2560W  NON-NPIAS.2560W\n03406.11*H   37FA6.11*H  FLORIDA HOSPITAL                           ORLANDO HOSPITAL                   FLLANDO HOSPITAL 28-34-32.0020NAL 081-22-06.2490WL NON-NPIAS.2490WL\n03406.31*H   3FD56.31*H  ARNOLD PALMER HOSPITAL                     ORLANDOPALMER HOSPITAL             FLLANDOPALMER HOSPITAL 28-31-21.0090NHOSPITAL 081-22-49.2520WOSPITAL NON-NPIAS.2520WOSPITAL\n</code></pre>\n\n<p>I know it's kind of hard to decipher, but you can see that my output has all the correct output in it, just if the section is smaller than the one previous, it just rewrites it and prints the old one. Shouldn't stringcpy be empty because I freed it within the loop?</p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["php", "c", "macros", "php-internals"], "answers": [{"comments": [{"owner": {"reputation": 156951, "user_id": 4668, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e5abe1d27b286199c319b0cbe75596c3?s=128&d=identicon&r=PG", "display_name": "Alan Storm", "link": "https://stackoverflow.com/users/4668/alan-storm"}, "edited": false, "score": 1, "creation_date": 1522256301, "post_id": 49540055, "comment_id": 86087676, "body": "Thank you for responding, and +1 for the useful general information about macro <code>#ifdef</code> handling.  I appreciate it.  However -- in both conditions the <code>TSRMLS_FETCH</code> macro resolves to empty text, so this doesn&#39;t directly answer my question."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 156951, "user_id": 4668, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e5abe1d27b286199c319b0cbe75596c3?s=128&d=identicon&r=PG", "display_name": "Alan Storm", "link": "https://stackoverflow.com/users/4668/alan-storm"}, "edited": false, "score": 0, "creation_date": 1522256782, "post_id": 49540055, "comment_id": 86087956, "body": "I see, maybe this macro is defined in another <code>include</code> or in an old version and this one prevents to use the code in ZEND_DEBUG mode."}, {"owner": {"reputation": 156951, "user_id": 4668, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e5abe1d27b286199c319b0cbe75596c3?s=128&d=identicon&r=PG", "display_name": "Alan Storm", "link": "https://stackoverflow.com/users/4668/alan-storm"}, "edited": false, "score": 1, "creation_date": 1522256919, "post_id": 49540055, "comment_id": 86088042, "body": "It was the second one -- older versions of PHP &lt;7.0 needed these macros, but &gt;=7.0 do not.  It looks like the internals folks left them defined so that they, and people with multi-version PHP extensions, wouldn&#39;t need to do a big refactoring."}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 1, "last_activity_date": 1522257335, "last_edit_date": 1522257335, "creation_date": 1522255569, "answer_id": 49540055, "question_id": 49539849, "link": "https://stackoverflow.com/questions/49539849/php-internals-how-does-tsrmls-fetch-work/49540055#49540055", "title": "PHP Internals: How does TSRMLS_FETCH Work?", "body": "<p>This piece of code</p>\n\n<pre><code>#if ZEND_DEBUG\n...\n#else\n#define TSRMLS_FETCH()\n...\n#endif\n</code></pre>\n\n<p>Is doing the following:</p>\n\n<p>If you are not in debug mode, change each call to the macro <code>TSRMLS_FETCH()</code> with nothing. </p>\n\n<p>In this example:</p>\n\n<pre><code>#if 0\n#define TSRMLS_FETCH() printf(\"Bla\");\n#else\n#define TSRMLS_FETCH()\n#endif\n\nint main(void) \n{\n    TSRMLS_FETCH()\n    return 0;\n}\n</code></pre>\n\n<p><code>cpp demo.c</code> (preprocessor output) returns:</p>\n\n<pre><code>int main(void) \n{\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 156951, "user_id": 4668, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e5abe1d27b286199c319b0cbe75596c3?s=128&d=identicon&r=PG", "display_name": "Alan Storm", "link": "https://stackoverflow.com/users/4668/alan-storm"}, "edited": false, "score": 2, "creation_date": 1522256697, "post_id": 49540127, "comment_id": 86087912, "body": "Ah ha!  It looks like the last version of PHP to use/need these macros was PHP 5.6 -- <a href=\"https://github.com/php/php-src/blob/PHP-5.6/TSRM/TSRM.h\" rel=\"nofollow noreferrer\">github.com/php/php-src/blob/PHP-5.6/TSRM/TSRM.h</a>.  Thank you, this was the answer I was looking for!"}], "tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": false, "score": 3, "last_activity_date": 1522255798, "creation_date": 1522255798, "answer_id": 49540127, "question_id": 49539849, "link": "https://stackoverflow.com/questions/49539849/php-internals-how-does-tsrmls-fetch-work/49540127#49540127", "title": "PHP Internals: How does TSRMLS_FETCH Work?", "body": "<p>Take a look at <a href=\"https://github.com/php/php-src/blob/PHP-4.0/TSRM/TSRM.h\" rel=\"nofollow noreferrer\">older versions of that file</a>:</p>\n\n<blockquote>\n<pre><code>#define TSRMLS_FETCH()            void ***tsrm_ls = (void ***) ts_resource_ex(0, NULL)\n#define TSRMG(id, type, element)  (((type) (*((void ***) tsrm_ls))[TSRM_UNSHUFFLE_RSRC_ID(id)])-&gt;element)\n#define TSRMLS_D  void ***tsrm_ls\n#define TSRMLS_DC , TSRMLS_D\n#define TSRMLS_C  tsrm_ls\n#define TSRMLS_CC , TSRMLS_C\n</code></pre>\n</blockquote>\n\n<p>It seems at some point PHP removed support for those macros but kept them empty in order to avoid having to split external code in two versions, one for the new PHP and one for the old PHP.</p>\n"}, {"comments": [{"owner": {"reputation": 156951, "user_id": 4668, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e5abe1d27b286199c319b0cbe75596c3?s=128&d=identicon&r=PG", "display_name": "Alan Storm", "link": "https://stackoverflow.com/users/4668/alan-storm"}, "edited": false, "score": 0, "creation_date": 1522595124, "post_id": 49587574, "comment_id": 86205941, "body": "Thank you @tpunt!  I stumbled across the PHPInternals.net earlier this year and it was a breath of fresh air.  I also wan&#39;t aware of Nikita or Julien&#39;s site, so they&#39;re going to the top of my reading list."}], "tags": [], "owner": {"reputation": 2532, "user_id": 4530326, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/65z58.png?s=128&g=1", "display_name": "tpunt", "link": "https://stackoverflow.com/users/4530326/tpunt"}, "is_accepted": true, "score": 3, "last_activity_date": 1522498219, "creation_date": 1522498219, "answer_id": 49587574, "question_id": 49539849, "link": "https://stackoverflow.com/questions/49539849/php-internals-how-does-tsrmls-fetch-work/49587574#49587574", "title": "PHP Internals: How does TSRMLS_FETCH Work?", "body": "<p>Firstly, I would not pay too much attention to what the manual says on PHP's internals. It is very outdated, and there's a good chance it is going to be removed from the manual in the near future. There are two websites currently dedicated to PHP's internals: <a href=\"http://www.phpinternalsbook.com\" rel=\"nofollow noreferrer\">PHPInternalsBook.com</a> and <a href=\"https://phpinternals.net\" rel=\"nofollow noreferrer\">PHPInternals.net</a> (I author content for the latter). There's also a couple of good blogs to follow, including <a href=\"http://nikic.github.io\" rel=\"nofollow noreferrer\">Nikita's</a> and <a href=\"http://blog.jpauli.tech\" rel=\"nofollow noreferrer\">Julien's</a>.</p>\n\n<p>The TSRM in PHP's 5.x series was quite invasive. When wanting to access any <a href=\"https://phpinternals.net/categories/extensions#zend-globals\" rel=\"nofollow noreferrer\">Zend globals</a> from within a function, the choice was between either fetching the TLS memory pointer from a function call (such as <code>pthread_getspecific</code>, which was relatively expensive) or propagating the TLS memory pointer through function parameters (a messy and error-prone affair, but the faster way). The <code>TSRMLS_FETCH</code> macro you mentioned was used for the former approach.</p>\n\n<p>In PHP 7.x, propagating the TLS memory pointer (via the <code>TSRMLS_[D|C]C?</code> macros) has been removed completely (though their macros are still defined for backwards compatibility - they just won't do anything). The preferred way to access the TSRM's TLS now is via its static cache. This is basically just a thread local global variable used to hold the current TLS memory pointer.</p>\n\n<p>Here are the relevant macros:</p>\n\n<pre><code>#define TSRMLS_CACHE _tsrm_ls_cache // the TLS global variable\n#define TSRMLS_CACHE_DEFINE() TSRM_TLS void *TSRMLS_CACHE = NULL; // define it\n#define TSRMLS_CACHE_UPDATE() TSRMLS_CACHE = tsrm_get_ls_cache() // update it - i.e. calls pthread_getspecific()\n#define TSRMLS_CACHE_RESET()  TSRMLS_CACHE = NULL // reset it\n</code></pre>\n\n<p>Using the above macros does require special care to update the static cache appropriately (usually during the <code>GINIT</code>, and sometimes <code>RINIT</code>, phases of an extension). However, it is a cleaner way to provide access to the TLS memory pointer without the mess of propagating it via function parameters or the performance hit of always fetching it (via <code>pthread_getspecific</code> and similar).</p>\n\n<p>Extra reading:</p>\n\n<ul>\n<li><a href=\"https://wiki.php.net/rfc/native-tls\" rel=\"nofollow noreferrer\">Native TLS</a> (the RFC that introduced this change in PHP 7.0)</li>\n<li><a href=\"http://blog.jpauli.tech/2017/01/12/threads-and-php.html\" rel=\"nofollow noreferrer\">Threads and PHP</a> (Julien's blog post on the TSRM)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 315, "user_id": 872051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b56356851a4f7ef96343b5e340a9931?s=128&d=identicon&r=PG", "display_name": "Jan Ehrhardt", "link": "https://stackoverflow.com/users/872051/jan-ehrhardt"}, "is_accepted": false, "score": 1, "last_activity_date": 1594168086, "creation_date": 1594168086, "answer_id": 62785767, "question_id": 49539849, "link": "https://stackoverflow.com/questions/49539849/php-internals-how-does-tsrmls-fetch-work/62785767#62785767", "title": "PHP Internals: How does TSRMLS_FETCH Work?", "body": "<p>In PHP 8 (in Alhpa fase at the moment I am writing this) a lot of these macro's have been removed. See <a href=\"https://github.com/php/php-src/blob/master/UPGRADING.INTERNALS\" rel=\"nofollow noreferrer\">https://github.com/php/php-src/blob/master/UPGRADING.INTERNALS</a></p>\n<pre><code>c. The following things have been removed from TSRM:\n    - TSRMLS_DC\n    - TSRMLS_D\n    - TSRMLS_CC\n    - TSRMLS_C\n    - TSRMLS_FETCH\n    - TSRMLS_FETCH_FROM_CTX\n    - TSRMLS_SET_CTX\n    - tsrm_new_interpreter_context\n    - tsrm_set_interpreter_context\n    - tsrm_free_interpreter_context\n    - support for GNUPTH, SGI ST, and BETHREADS\n</code></pre>\n"}], "owner": {"reputation": 156951, "user_id": 4668, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e5abe1d27b286199c319b0cbe75596c3?s=128&d=identicon&r=PG", "display_name": "Alan Storm", "link": "https://stackoverflow.com/users/4668/alan-storm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 556, "favorite_count": 0, "accepted_answer_id": 49587574, "answer_count": 4, "score": 5, "last_activity_date": 1594168086, "creation_date": 1522254896, "question_id": 49539849, "link": "https://stackoverflow.com/questions/49539849/php-internals-how-does-tsrmls-fetch-work", "title": "PHP Internals: How does TSRMLS_FETCH Work?", "body": "<p>How does the PHP Internals <code>TSRMLS_FETCH</code> macro do its job?</p>\n\n<p>Per the <a href=\"http://php.net/manual/en/internals2.memory.tsrm.php\" rel=\"noreferrer\">PHP Manual</a></p>\n\n<blockquote>\n  <p>While developing extensions, build errors that contain \"tsrm_ls is undefined\" or errors to that effect stem from the fact that TSRMLS is undefined in the current scope, to fix this, declare the function to accept TSRMLS with the appropriate macro, if the prototype of the function in question cannot be changed, you must call TSRMLS_FETCH within the function body.</p>\n</blockquote>\n\n<p>I understand that <em>declaring the function to accept TSRMLS with the appropriate macros</em> means using <a href=\"http://blog.golemon.com/2006/06/what-heck-is-tsrmlscc-anyway.html\" rel=\"noreferrer\">TSRMLS_C, TSRMLS_D, TSRMLS_CC, and TSRMLS_DC</a> to either define of call a function with extra parameters/arguments.  </p>\n\n<p>However, <em>if the prototype of the function in question cannot be changed, you must call TSRMLS_FETCH within the function body</em> confuses me a bit.  If I look at the php-src both <a href=\"https://github.com/php/php-src/blob/php-7.2.4/TSRM/TSRM.h#L196\" rel=\"noreferrer\">here</a> and <a href=\"https://github.com/php/php-src/blob/php-7.2.4/TSRM/TSRM.h#L204\" rel=\"noreferrer\">here</a> the <code>TSRMLS_FETCH</code> <strong>seems to be</strong> an empty macro.</p>\n\n<p>So that leaves me with the question -- how does <code>TSRMLS_FETCH</code> even work?  Is something else populating this macro at compile time?</p>\n"}, {"tags": ["c", "typedef"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1522254382, "post_id": 49539608, "comment_id": 86086529, "body": "<code>struct set_of_players  {....}</code> is defining a type <code>struct set_of_players</code>."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1522254385, "post_id": 49539608, "comment_id": 86086531, "body": "Using <code>typedef</code> with <code>struct</code>s allows you to define a variable avoiding the <code>struct</code> keyword, i.e.:  <code>set_of_players players = {&quot;abc&quot;, 10};</code> instead of <code>struct set_of_players players = {&quot;abc&quot;, 10};</code>"}, {"owner": {"reputation": 298, "user_id": 9565234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7851056ad00a3e38bd61012a76ea6efb?s=128&d=identicon&r=PG&f=1", "display_name": "iaskdumbstuff", "link": "https://stackoverflow.com/users/9565234/iaskdumbstuff"}, "edited": false, "score": 0, "creation_date": 1522254833, "post_id": 49539608, "comment_id": 86086816, "body": "Thanks for your responses. So, if I&#39;m understanding correctly, both <code>typedef struct </code> and <code>struct</code> by itself <b>create</b> a type. However, the former helps it helps in the way of legibility? So then, how do I create a variable of type <code>player</code>? Do I just declare it as I would any variable? Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 298, "user_id": 9565234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7851056ad00a3e38bd61012a76ea6efb?s=128&d=identicon&r=PG&f=1", "display_name": "iaskdumbstuff", "link": "https://stackoverflow.com/users/9565234/iaskdumbstuff"}, "edited": false, "score": 1, "creation_date": 1522255779, "post_id": 49539744, "comment_id": 86087365, "body": "Thank you very much for your answer, it&#39;s cleared things up."}], "tags": [], "owner": {"reputation": 7975, "user_id": 5660517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1iIxK.jpg?s=128&g=1", "display_name": "Ronan Boiteau", "link": "https://stackoverflow.com/users/5660517/ronan-boiteau"}, "is_accepted": false, "score": 2, "last_activity_date": 1522254908, "last_edit_date": 1522254908, "creation_date": 1522254586, "answer_id": 49539744, "question_id": 49539608, "link": "https://stackoverflow.com/questions/49539608/how-does-the-typedef-struct-work-syntactically/49539744#49539744", "title": "How does the typedef struct work syntactically?", "body": "<h2>First syntax</h2>\n\n<pre><code>typedef struct {\n    char pseudo[MAX_SIZE] ;\n    int nb_mar ;\n    } player ;\n</code></pre>\n\n<p><strong>This defines an unnamed <code>struct</code>. Then, with <code>typedef</code>, it creates an alias to this <code>struct</code>: <code>player</code>.</strong></p>\n\n<p>You can then declare your <code>struct</code> like this:</p>\n\n<pre><code>player my_player;\n</code></pre>\n\n<p>It is similar to this syntax:</p>\n\n<pre><code>typedef struct s_player {\n  char pseudo[MAX_SIZE];\n  int nb_mar;\n} player;\n</code></pre>\n\n<p>In this second case, since your <code>struct</code> has a name, you can declare a <code>player</code> like this:</p>\n\n<pre><code>player my_player;\nstruct s_player my_player;\n</code></pre>\n\n<hr>\n\n<h2>Second syntax</h2>\n\n<pre><code>struct set_of_players {\n  player T[NB_MAX_JOUEURS];\n  int nb;\n}; \n</code></pre>\n\n<p><strong>This defines a structure <code>struct set_of_players</code>.</strong> Since you don't have a <code>typedef</code>, you'll need to declare a variable of this type like this:</p>\n\n<pre><code>struct set_of_players my_set;\n</code></pre>\n\n<hr>\n\n<h2>Third syntax</h2>\n\n<pre><code>typedef struct set_of_players players;\n</code></pre>\n\n<p><strong>This defines a type <code>players</code> that is an alias to the type <code>struct set_of_players</code>.</strong></p>\n\n<p>Because this creates an alias to <code>struct set_of_players</code>, it goes with the second syntax:</p>\n\n<pre><code>struct set_of_players {\n  player T[NB_MAX_JOUEURS];\n  int nb;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 298, "user_id": 9565234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7851056ad00a3e38bd61012a76ea6efb?s=128&d=identicon&r=PG&f=1", "display_name": "iaskdumbstuff", "link": "https://stackoverflow.com/users/9565234/iaskdumbstuff"}, "edited": false, "score": 0, "creation_date": 1522255131, "post_id": 49539760, "comment_id": 86086991, "body": "Holy moly, thank you so much! Boy did I have a gross misunderstanding of pretty much everything. I have a followup question though: is there a way of making an alias with just <code>struct</code>? I&#39;m assuming not, otherwise there&#39;d be no use for <code>typedef</code>, no? Thank you."}, {"owner": {"reputation": 7975, "user_id": 5660517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1iIxK.jpg?s=128&g=1", "display_name": "Ronan Boiteau", "link": "https://stackoverflow.com/users/5660517/ronan-boiteau"}, "reply_to_user": {"reputation": 298, "user_id": 9565234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7851056ad00a3e38bd61012a76ea6efb?s=128&d=identicon&r=PG&f=1", "display_name": "iaskdumbstuff", "link": "https://stackoverflow.com/users/9565234/iaskdumbstuff"}, "edited": false, "score": 0, "creation_date": 1522255309, "post_id": 49539760, "comment_id": 86087092, "body": "@user494405 No, you can&#39;t. <code>struct</code> is used to create <a href=\"https://www.tutorialspoint.com/cprogramming/c_structures.htm\" rel=\"nofollow noreferrer\">C structures</a>. Whereas <code>typedef</code> is used to create type aliases."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 298, "user_id": 9565234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7851056ad00a3e38bd61012a76ea6efb?s=128&d=identicon&r=PG&f=1", "display_name": "iaskdumbstuff", "link": "https://stackoverflow.com/users/9565234/iaskdumbstuff"}, "edited": false, "score": 0, "creation_date": 1522255523, "post_id": 49539760, "comment_id": 86087218, "body": "@user494405 <code>typedef</code> is specifically for creating a type alias, while <code>struct</code> is used for making an aggregate type.  In C (but not C++), the <code>struct</code> keyword must be used when declaring a variable of that type, i.e. <code>struct set_of_players my_set</code>."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 298, "user_id": 9565234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7851056ad00a3e38bd61012a76ea6efb?s=128&d=identicon&r=PG&f=1", "display_name": "iaskdumbstuff", "link": "https://stackoverflow.com/users/9565234/iaskdumbstuff"}, "edited": false, "score": 0, "creation_date": 1522256338, "post_id": 49539760, "comment_id": 86087701, "body": "@user494405 ; If you mean can you typedef an anonymous struct - yes.  <code>typedef struct { &lt;member-list&gt;} &lt;type-alias&gt; ;</code> creates a struct that can only be instantiated via the alias as there is no tag.  But it is not clear that that is what you meant.  Best not to tag questions onto answers in comments - post a new question."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 5, "last_activity_date": 1522255084, "last_edit_date": 1522255084, "creation_date": 1522254631, "answer_id": 49539760, "question_id": 49539608, "link": "https://stackoverflow.com/questions/49539608/how-does-the-typedef-struct-work-syntactically/49539760#49539760", "title": "How does the typedef struct work syntactically?", "body": "<p>The <code>typedef</code> statement allows you to make an alias for the given type.  You can then use either the alias or the original type name to declare a variable of that type.</p>\n\n<pre><code>typedef int number;\n</code></pre>\n\n<p>This creates an alias for <code>int</code> called <code>number</code>.  So the following two statements declare variables of the same type:</p>\n\n<pre><code>int num1;\nnumber num2;\n</code></pre>\n\n<p>Now using your example:</p>\n\n<pre><code>typedef struct {\n    char pseudo[MAX_SIZE] ;\n    int nb_mar ;\n} player ;\n</code></pre>\n\n<p>This creates an anonymous struct and gives it the alias <code>player</code>.  Because the struct doesn't have name, you can only use the alias to create a variable of that type.</p>\n\n<pre><code>struct set_of_players {\n    player T[NB_MAX_JOUEURS] ;\n    int nb ;\n}; \n</code></pre>\n\n<p>This creates a struct named <code>struct set_of_players</code>, but does not declare a typedef nor does it declare a variable of that type.  Also notice that one of the fields is an array of type <code>player</code>, which we defined earlier.  You can later declare a variable of this type as follows:</p>\n\n<pre><code>struct set_of_players my_set_var;\n</code></pre>\n\n<p>This line:</p>\n\n<pre><code>typedef struct set_of_players players;\n</code></pre>\n\n<p>Creates an alias for <code>struct set_of_players</code> called <code>players</code>.  In this case the struct is not defined at the same time as the typedef but is defined elsewhere.  So now you can declare a variable of this type like this:</p>\n\n<pre><code>players my_set_var;\n</code></pre>\n\n<p>Which is the same as the version using the full struct name.</p>\n"}, {"tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1522255481, "last_edit_date": 1522255481, "creation_date": 1522255094, "answer_id": 49539914, "question_id": 49539608, "link": "https://stackoverflow.com/questions/49539608/how-does-the-typedef-struct-work-syntactically/49539914#49539914", "title": "How does the typedef struct work syntactically?", "body": "<p>I am answering you after you have declared this line of code <code>typedef struct set_of_players players;</code></p>\n\n<p>So your code will work like this:-</p>\n\n<p>suppose:-</p>\n\n<pre><code> #define MAX_SIZE 20\n #define NB_MAX_JOUEURS 2\n</code></pre>\n\n<p>Now you can use both the type name like below in our codes:-</p>\n\n<pre><code> typedef struct set_of_players players;\n players PLAYERS;\n strcpy(PLAYERS.T[0].pseudo, \"something\");\n PLAYERS.T[0].nb_mar = 1;\n\n struct set_of_players {\n      player T[NB_MAX_JOUEURS] ;// reffering to the above example you have created a array of struct `player` and its size is 2\n   int nb ;\n  };\n</code></pre>\n\n<p>Also you can use the above struct like below:-</p>\n\n<pre><code> struct set_of_players setplayers;\n strcpy(setplayers.T[0].pseudo, \"something\");\n setplayers.T[0].nb_mar = 1;\n</code></pre>\n\n<p>When you declare a type name to it you don't need to use <code>struct set_of_players</code> create a variable instead you will use the type name. That means you have given a specific name to your structure and in your case it was player and players respectively.    </p>\n"}, {"comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1522256041, "post_id": 49540070, "comment_id": 86087513, "body": "As a note should you encounter it, in C++ the <code>typedef struct</code> idiom is unnecessary, as the <code>&lt;tag&gt;</code> on its own is a type-name."}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 0, "last_activity_date": 1522256936, "last_edit_date": 1522256936, "creation_date": 1522255612, "answer_id": 49540070, "question_id": 49539608, "link": "https://stackoverflow.com/questions/49539608/how-does-the-typedef-struct-work-syntactically/49540070#49540070", "title": "How does the typedef struct work syntactically?", "body": "<p><code>typedef</code> is a very simple thing.  Despite its name it does not define new types, but rather defines aliases (names) for existing types.  Its syntax in all cases is:</p>\n\n<pre><code>typedef &lt;existing-type&gt; &lt;type-alias&gt;\n</code></pre>\n\n<p>In C a struct type is defined thus:</p>\n\n<pre><code>struct &lt;tag&gt; { &lt;member-list&gt; } ;\n</code></pre>\n\n<p>And its its <em>type</em> is <code>struct &lt;tag&gt;</code> which is more that you might want to type, and might regard as clutter.  So it is a common idiom to create a alias so you do not need preceded the tag with <code>struct</code> everywhere.  Hence:</p>\n\n<pre><code>typedef struct &lt;tag&gt; { &lt;member-list&gt; } &lt;type-alias&gt; ;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>typedef struct &lt;tag&gt; &lt;type-alias&gt; ;\n</code></pre>\n\n<p>Both create an alias for <code>struct &lt;tag&gt;</code>, but in the first both the alias and the structure are defined in the same statement, and in the second an existing struct definition is used.</p>\n\n<p>Given such a typedef, instead of declaring a structure variable thus...</p>\n\n<pre><code>struct &lt;tag&gt; structure_variable ;\n</code></pre>\n\n<p>... you can use:</p>\n\n<pre><code>&lt;type-alias&gt; structure_variable ;\n</code></pre>\n\n<p>which is just syntactic sugar - <code>typedef</code> does not affect the code behaviour or code generation.</p>\n\n<p>Note that it is possible to define a typedef using an <em>anonymous struct</em> (one with no tag name), so that the structure may only be instantiated using the alias:</p>\n\n<pre><code>typedef struct { &lt;member-list&gt; } &lt;type-alias&gt; ;\n</code></pre>\n\n<p>In fact you only ever need a tag name if the structure is <em>self referring</em> - i.e. it contains pointers to a struct of its own type (as in a linked list for example), then:</p>\n\n<pre><code>typedef struct &lt;tag&gt;\n{\n    struct &lt;tag&gt;* self ;  // Cannot use &lt;type-alias&gt; here;\n                          // it does not exist yet.\n    ...\n} &lt;type-alias&gt; ;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 0, "last_activity_date": 1522255766, "creation_date": 1522255766, "answer_id": 49540120, "question_id": 49539608, "link": "https://stackoverflow.com/questions/49539608/how-does-the-typedef-struct-work-syntactically/49540120#49540120", "title": "How does the typedef struct work syntactically?", "body": "<p><code>typedef</code> and <code>struct</code> are two different kinds of declarations. <code>struct</code> defines a structure type. <code>typedef</code> define an alias for an existing type (it doesn't create a new type). They can be combined into a single declaration. Neither creates an object (variable) of the specified type.</p>\n\n<pre><code>struct player {\n    char pseudo[MAX_SIZE];\n    int nb_mar;\n};\n</code></pre>\n\n<p>This is a structure definition. It creates a new type whose name is <code>struct player</code>.</p>\n\n<pre><code>typedef struct {\n    char pseudo[MAX_SIZE];\n    int nb_mar;\n} player;\n</code></pre>\n\n<p>The tag in a structure definition is optional. If you omit it, the structure type is anonymous. Here we combine an anonymous structure definition with a typedef, making <code>player</code> an alias for the anonymous structure type.</p>\n\n<pre><code>typedef struct player {\n    char pseudo[MAX_SIZE];\n    int nb_mar;\n} player;\n</code></pre>\n\n<p>Here we create a structure type named <code>struct player</code> and an alias for that type, <code>player</code>.  (The syntax of a structure definition puts the tag immediately after the <code>struct</code> keyword; the syntax of a typedef puts the name at the end.)</p>\n\n<p>We can now refer to the type either as <code>struct player</code> or as <code>player</code></p>\n\n<p>Here's another way to do the same thing:</p>\n\n<pre><code>struct player {\n    char pseudo[MAX_SIZE];\n    int nb_mar;\n};\ntypedef struct player player;\n</code></pre>\n\n<p>With two separate declarations, we create a new type called <code>struct player</code>, and then we use the typedef to define a new name for that type, <code>player</code>.</p>\n\n<p>In all these examples, I've used the same identifier for the structure tag and the typedef name. There's no requirement for them to be the same, and there are coding conventions where you might use <code>struct player_s</code> or <code>typedef ... player_t</code>. But since both names refer to the same type, there's no real reason to use different names. They should at least be related to each other in a simple and obvious way.</p>\n\n<p>Note that a typedef for a structure type is never really necessary. You could just define the struct type without using a typedef, and consistently refer to the type as <code>struct player</code>. All the typedef does is define a new name for a type that already has a perfectly good name. (The advantage is that the new name is a single identifier; I personally don't see that as much of an advantage.)</p>\n\n<p>Another point is that you need the structure tag if the structure contains a pointer to its own type:</p>\n\n<pre><code>typedef struct node {\n    int data;\n    struct node *next;\n} node;\n</code></pre>\n\n<p>You have to use <code>struct node</code> in the declaration of <code>next</code> because the typedef name isn't visible yet. (There are ways around that using forward declarations, but I won't get into that.)</p>\n"}], "owner": {"reputation": 298, "user_id": 9565234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7851056ad00a3e38bd61012a76ea6efb?s=128&d=identicon&r=PG&f=1", "display_name": "iaskdumbstuff", "link": "https://stackoverflow.com/users/9565234/iaskdumbstuff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 49539760, "answer_count": 5, "score": 3, "last_activity_date": 1522256936, "creation_date": 1522254091, "question_id": 49539608, "link": "https://stackoverflow.com/questions/49539608/how-does-the-typedef-struct-work-syntactically", "title": "How does the typedef struct work syntactically?", "body": "<p>I am new to this, so I apologize if I'm being dense. I'm having trouble understanding how to use <code>typedef</code>. Let's say I have the following command:</p>\n\n<pre><code>typedef struct {\n    char pseudo[MAX_SIZE] ;\n    int nb_mar ;\n    } player ;\n</code></pre>\n\n<p>This creates a type called <code>player</code> which comprises of a chain of characters, and an <code>int</code>, correct?</p>\n\n<p>Now, if we have this line of code:</p>\n\n<pre><code>struct set_of_players {\n    player T[NB_MAX_JOUEURS] ;\n    int nb ;\n    }; \n</code></pre>\n\n<p>I don't understand what this does? I would assume it creates a variable of type struct <code>set_of_players</code>, but what is it called? Usually when I see this kind of command, there's a word after the closed amplesand representing the variables name, but here it has nothing; I don't get it. Would this even work if I haven't done a <code>typedef struct</code> for <code>set_of_players</code>?</p>\n\n<p>Finally, I have this line of code that I don't understand:</p>\n\n<pre><code>typedef struct set_of_players players;\n</code></pre>\n\n<p>I quite honestly have no idea what this even means. I'm assuming this is the <code>typedef</code> that I need to make the previous command make sense, but I don't even know what it does.</p>\n\n<p>Again, I'm sorry if I'm looking at this the wrong way, and for the poor formatting. Any help would be greatly appreciated, thank you.</p>\n"}, {"tags": ["python", "c", "cython"], "answers": [{"tags": [], "owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "is_accepted": true, "score": 2, "last_activity_date": 1522260180, "creation_date": 1522260180, "answer_id": 49541290, "question_id": 49539070, "link": "https://stackoverflow.com/questions/49539070/return-2d-array-created-from-a-c-function-into-python-using-cython/49541290#49541290", "title": "return 2D array created from a C function into Python using Cython", "body": "<p>My issues with the <code>struct</code> approach is:</p>\n\n<ol>\n<li><p>It breaks as soon as you want anything but a fixed size of array, with no real way of fixing it.</p></li>\n<li><p>It relies on Cython's implicit conversion from structs to dicts. Cython copies the data to a Python list, which isn't terribly efficient. This isn't an issue with the small arrays you have here, but it's silly for larger arrays.</p></li>\n</ol>\n\n<hr>\n\n<p>I also don't really recommend 2D arrays as pointers-to-pointers. The way numpy (and most other sensible array libraries) implement 2D arrays is to store a 1D array and the shape of the 2D array, and just use the shape to work out what index to access. This tends to be more efficient (faster lookups, faster allocation) and also easier to use (less allocation/deallocation to keep track of).</p>\n\n<p>To do this change the C code to:</p>\n\n<pre><code>int32_t *make_array_ptr() {\n  int32_t *my_array = calloc(3 * 5, sizeof(int32_t));\n  int count = 0;\n  for (int i = 0; i &lt; 3; i++)\n    for (int j = 0; j &lt; 5; j++)\n      my_array[j+i*5] = ++count;\n  return my_array;\n}\n</code></pre>\n\n<p>I've deleted the first loop that you immediately overwrite. I've also changed the type of <code>int32_t</code> since you seem to rely on this in your Cython code later.</p>\n\n<p>The Cython code is then very close to what you were using:</p>\n\n<pre><code>def make_array():\n    cdef np.intp_t dims[2] \n    dims[0]=3; dims[1] = 5\n    cdef np.int32_t *data = make_array_ptr()\n    cdef np.ndarray[np.int32_t, ndim=2] my_array = np.PyArray_SimpleNewFromData(2, &amp;dims[0], np.NPY_INT32, data)\n    PyArray_ENABLEFLAGS(my_array, np.NPY_OWNDATA)\n    return my_array\n</code></pre>\n\n<p>The main changes are that I've removed some casts and also just allocated dims as a static array (which seemed simpler than memoryviews)</p>\n\n<hr>\n\n<p>I don't think it's particularly easy allow numpy to handle a pointer-to-pointer array. It might be possible by implementing the Python buffer interface but that that seems like a lot of work and may not be easy.</p>\n"}], "owner": {"reputation": 377, "user_id": 8140404, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f1c26015079511b622e275f01e7e105a?s=128&d=identicon&r=PG&f=1", "display_name": "plx", "link": "https://stackoverflow.com/users/8140404/plx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "accepted_answer_id": 49541290, "answer_count": 1, "score": 1, "last_activity_date": 1522260180, "creation_date": 1522252472, "question_id": 49539070, "link": "https://stackoverflow.com/questions/49539070/return-2d-array-created-from-a-c-function-into-python-using-cython", "title": "return 2D array created from a C function into Python using Cython", "body": "<p>I want to use a 2D array created by a <code>c</code> function in <code>python</code>. I asked how to do this before <a href=\"https://stackoverflow.com/questions/49531322/how-to-work-with-2d-array-returned-from-c-function-using-cython\">today</a> and one approach suggested by @Abhijit Pritam was to use structs. I implemented it and it does work. </p>\n\n<p>c code:</p>\n\n<pre><code>typedef struct {\n  int arr[3][5];\n} Array;\n\nArray make_array_struct() {\n  Array my_array;\n  int count = 0;\n  for (int i = 0; i &lt; 3; i++)\n    for (int j = 0; j  &lt; 5; j++)\n      my_array.arr[i][j] = ++count;\n  return my_array;\n}\n</code></pre>\n\n<p>in python I have this:</p>\n\n<pre><code>cdef extern from \"numpy_fun.h\":\n    ctypedef struct Array:\n        int[3][5] arr\n    cdef Array make_array_struct()\n\ndef make_array():\n    cdef Array arr = make_array_struct()\n    return arr\n\nmy_arr = make_array()\nmy_arr['arr']\n[[1, 2, 3, 4, 5], [6, 7, 8, 9, 10], [11, 12, 13, 14, 15]]\n</code></pre>\n\n<p>However it was suggested that this was not the best approach to the problem because it's possible to make python have control over the data. I'm trying to implement this but I haven't been able to that so far. This is what I have.</p>\n\n<p>c code:</p>\n\n<pre><code>int **make_array_ptr() {\n  int **my_array = (int **)malloc(3 * sizeof(int *));\n  my_array[0] = calloc(3 * 5, sizeof(int));\n  for (int i = 1; i &lt; 3; i++)\n    my_array[i] = my_array[0] + i * 5;\n  int count = 0;\n  for (int i = 0; i &lt; 3; i++)\n    for (int j = 0; j &lt; 5; j++)\n      my_array[i][j] = ++count;\n  return my_array;\n}\n</code></pre>\n\n<p>python:</p>\n\n<pre><code>import numpy as np\ncimport numpy as np\n\nnp.import_array()\n\nctypedef np.int32_t DTYPE_t\n\ncdef extern from \"numpy/arrayobject.h\":\n    void PyArray_ENABLEFLAGS(np.ndarray arr, int flags)\n\ncdef extern from \"numpy_fun.h\":\n    cdef int **make_array_ptr()\n\ndef make_array():\n    cdef int[::1] dims = np.array([3, 5], dtype=np.int32)\n    cdef DTYPE_t **data = &lt;DTYPE_t **&gt;make_array_ptr()\n    cdef np.ndarray[DTYPE_t, ndim=2] my_array = np.PyArray_SimpleNewFromData(2, &amp;dims[0], np.NPY_INT32, data)\n    PyArray_ENABLEFLAGS(my_array, np.NPY_OWNDATA)\n    return my_array\n</code></pre>\n\n<p>I was following <a href=\"https://stackoverflow.com/questions/23872946/force-numpy-ndarray-to-take-ownership-of-its-memory-in-cython\">Force NumPy ndarray to take ownership of its memory in Cython\n</a> which seems to be what I need to do. In my case is it's different because I need 2D array so I'll likely have to do things a bit differently because for example the function expects <code>data</code> to  be a pointer to int and I gave it a pointer to pointer to int.\nWhat do I have to do to use this approach?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1522252115, "post_id": 49538888, "comment_id": 86084913, "body": "Have you done % 8 and / 8? That&#39;s quite simple. A number that isn&#39;t a power of 2 is much harder (not sure it&#39;s possible with just those two operators - I think you need NAND)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1522252130, "post_id": 49538888, "comment_id": 86084924, "body": "Why would you want to?"}, {"owner": {"reputation": 15, "user_id": 7856675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9b4ad40a485d9115be192f5c10fa955?s=128&d=identicon&r=PG&f=1", "display_name": "Abc", "link": "https://stackoverflow.com/users/7856675/abc"}, "edited": false, "score": 0, "creation_date": 1522252524, "post_id": 49538888, "comment_id": 86085222, "body": "I have to translate my C-Programm into assembler language. And now i would change this, because it is simpler to translate this."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1522252628, "post_id": 49538888, "comment_id": 86085301, "body": "Why don&#39;t you compile a program that uses those operations and look at the assembly code produced to see how it is done?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1522252678, "post_id": 49538888, "comment_id": 86085342, "body": "Which assembler? Doesn&#39;t it have an integer division instruction?"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1522252971, "post_id": 49538888, "comment_id": 86085562, "body": "With some extra addition/subtraction it works quite well but only bitwise &quot;and&quot; and bit-shift? What about a &quot;not&quot;? Can we have one? Because a lot is possible with just a handful of &quot;nand&quot; gates!"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1522253005, "post_id": 49538888, "comment_id": 86085589, "body": "Related: <a href=\"https://stackoverflow.com/questions/5558492/divide-by-10-using-bit-shifts\" title=\"divide by 10 using bit shifts\">stackoverflow.com/questions/5558492/&hellip;</a>"}, {"owner": {"reputation": 15, "user_id": 7856675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9b4ad40a485d9115be192f5c10fa955?s=128&d=identicon&r=PG&f=1", "display_name": "Abc", "link": "https://stackoverflow.com/users/7856675/abc"}, "edited": false, "score": 0, "creation_date": 1522253007, "post_id": 49538888, "comment_id": 86085591, "body": "No. That is why i want to change this."}, {"owner": {"reputation": 15, "user_id": 7856675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9b4ad40a485d9115be192f5c10fa955?s=128&d=identicon&r=PG&f=1", "display_name": "Abc", "link": "https://stackoverflow.com/users/7856675/abc"}, "edited": false, "score": 0, "creation_date": 1522253087, "post_id": 49538888, "comment_id": 86085650, "body": "i have bitwise &quot;and&quot;,&quot;xor&quot;,&quot;left shift&quot; and &quot;right shift&quot;"}, {"owner": {"reputation": 15, "user_id": 7856675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9b4ad40a485d9115be192f5c10fa955?s=128&d=identicon&r=PG&f=1", "display_name": "Abc", "link": "https://stackoverflow.com/users/7856675/abc"}, "edited": false, "score": 0, "creation_date": 1522253099, "post_id": 49538888, "comment_id": 86085668, "body": "and i have ADD and SUB"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1522253187, "post_id": 49538888, "comment_id": 86085740, "body": "@KeineLust Looks like duplicate..."}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1522253246, "post_id": 49538888, "comment_id": 86085781, "body": "@Abc in that case let me point you to <a href=\"https://stackoverflow.com/questions/5558492/divide-by-10-using-bit-shifts\" title=\"divide by 10 using bit shifts\">stackoverflow.com/questions/5558492/&hellip;</a> where your question gets answered."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1522253256, "post_id": 49538888, "comment_id": 86085789, "body": "@EugeneSh. I don&#39;t want to close it as duplicate because OP is also asking for MOD 10 and the link is not answering this point."}, {"owner": {"reputation": 15, "user_id": 7856675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9b4ad40a485d9115be192f5c10fa955?s=128&d=identicon&r=PG&f=1", "display_name": "Abc", "link": "https://stackoverflow.com/users/7856675/abc"}, "edited": false, "score": 0, "creation_date": 1522253521, "post_id": 49538888, "comment_id": 86085984, "body": "does somebody has any ideas?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1522253541, "post_id": 49538888, "comment_id": 86085998, "body": "You&#39;ve got the link to the answer. Twice!"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1522253619, "post_id": 49538888, "comment_id": 86086061, "body": "@KeineLust I will then. <code>x % 10 = x - (x &#47; 10) * 10</code>."}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "edited": false, "score": 0, "creation_date": 1522253647, "post_id": 49538888, "comment_id": 86086074, "body": "But not <code>mod</code>, sorry! To get the remainder you do <code>mod = x - ((x &#47; z) * z)</code>. Multiplication with 10 can be done in that way:   <code>y = (x &lt;&lt; 3) + (x &lt;&lt; 1)</code>"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1522253698, "post_id": 49538888, "comment_id": 86086105, "body": "@EugeneSh. Sure! But I think OP wants to do this using bitwise ops."}], "owner": {"reputation": 15, "user_id": 7856675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9b4ad40a485d9115be192f5c10fa955?s=128&d=identicon&r=PG&f=1", "display_name": "Abc", "link": "https://stackoverflow.com/users/7856675/abc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "closed_date": 1522256373, "answer_count": 0, "score": 0, "last_activity_date": 1522252011, "creation_date": 1522252011, "last_edit_date": 1592644375, "question_id": 49538888, "link": "https://stackoverflow.com/questions/49538888/how-can-i-change-mod-with-bitwise-and", "closed_reason": "Duplicate", "title": "How can i change mod with bitwise AND", "body": "<blockquote>\n<p>How can i make:</p>\n<p><code>x % 10</code></p>\n<p><code>x / 10</code></p>\n<p>with bitwise &amp; and bitshifting?</p>\n<p>Thank you!</p>\n</blockquote>\n"}, {"tags": ["c", "gcc", "macros"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 3, "creation_date": 1522248927, "post_id": 49537776, "comment_id": 86082468, "body": "...and the definition of <code>SysTimerOnTime</code> could be relevant here..."}, {"owner": {"reputation": 1173, "user_id": 1734108, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bd845e394662aedc5beeefe13c3ccfcd?s=128&d=identicon&r=PG", "display_name": "orfruit", "link": "https://stackoverflow.com/users/1734108/orfruit"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1522249208, "post_id": 49537776, "comment_id": 86082707, "body": "It is not relevant, I just said that worked fine as it is. But here it is :) Must be a compiler problem or standard... I can&#39;t figure out."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 1, "creation_date": 1522249775, "post_id": 49537776, "comment_id": 86083177, "body": "See <a href=\"https://gcc.gnu.org/onlinedocs/cppinternals/Macro-Expansion.html\" rel=\"nofollow noreferrer\">Macro Expansion Algorithm</a>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1522250156, "post_id": 49537776, "comment_id": 86083471, "body": "The fact that <code>SysTimerOnTime</code> is a macro is 100% relevant to your problem.  What isn&#39;t clear is why the code used to work before."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1522250162, "post_id": 49537776, "comment_id": 86083478, "body": "You seem to have gotten a good answer, but in the future, when asking questions like this, please always include the <i>complete and unedited</i> text of the error messages."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1522250229, "post_id": 49537776, "comment_id": 86083546, "body": "@JonathanLeffler Only thing I can think is that &quot;old&quot; here means &quot;pre-ANSI&quot;.  I <i>think</i> the traditional preprocessor might have let you get away with this, at least some incarnations of it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1522250435, "post_id": 49537776, "comment_id": 86083711, "body": "@zwol; I agree \u2014 either pre-standard or &#39;non-standard&#39;.  I&#39;m not sure I can work up the energy to try and find a 30-year old compiler (so it is pre-C89); it wouldn&#39;t run directly on my Mac, anyway."}, {"owner": {"reputation": 1173, "user_id": 1734108, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bd845e394662aedc5beeefe13c3ccfcd?s=128&d=identicon&r=PG", "display_name": "orfruit", "link": "https://stackoverflow.com/users/1734108/orfruit"}, "edited": false, "score": 0, "creation_date": 1522251199, "post_id": 49537776, "comment_id": 86084237, "body": "guys, it&#39;s not ancient! It is offer now by NXP for their MCUs. I will install it tonight and post results here."}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 4, "last_activity_date": 1522250843, "last_edit_date": 1522250843, "creation_date": 1522249980, "answer_id": 49538191, "question_id": 49537776, "link": "https://stackoverflow.com/questions/49537776/c-macro-arguments-substitution-of-parameters/49538191#49538191", "title": "C, macro arguments, substitution of parameters", "body": "<p>When the invocation of <code>SysTimerOnTime()</code> is being assessed, the arguments are collected before any expansion of the arguments.  There are only two arguments \u2014 so the macro is invoked incorrectly.  You'd have to introduce a level of indirection to be able to use the <code>TIME_CONSTANT</code> macro.  For example:</p>\n\n<pre><code>#define SysTimerOnTimeC(tmr, con) SysTimerOnTimeX(SysTimerOnTime(tmr, con))\n#define SysTimerOnTimeX(x) x\n</code></pre>\n\n<p>And then you can invoke:</p>\n\n<pre><code>if (SysTimerOnTimeC(tmr, TIME_CONSTANT))\n{\n    \u2026\n}\n</code></pre>\n\n<p>The C is for 'constant'; the X is for 'expansion'.  You don't call the <code>SysTimerOnTimeX()</code> macro directly from code; it is just a helper macro.</p>\n\n<p>And I can't help but feel that you'd be better off with:</p>\n\n<pre><code>#define QUARTER_SECOND mSec(250)\n#define SysTimerOnTime(t, v)    ((t).Enable &amp;&amp; (Now()-(t).Value) &gt; (v))\n</code></pre>\n\n<p>and then invoking:</p>\n\n<pre><code>if (SysTimerOnTime(tmr, QUARTER_SECOND)) \n{\n    \u2026\n}\n</code></pre>\n\n<p>I also parenthesized both arguments in the expansion here.  It's the conventional and generally sensible advice (though definitely not what's wanted in the main part of the answer).  Without the parentheses, you'd get complaints from the compiler if you ever invoked:</p>\n\n<pre><code>if (SysTimerOnTime(*ptr, QUARTER_SECOND))\n</code></pre>\n\n<p>because the <code>*</code> has lower-priority than the <code>.</code>.  The extra parentheses should be applied to the base <code>SysTimerOnTime</code> macro.</p>\n"}], "owner": {"reputation": 1173, "user_id": 1734108, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/bd845e394662aedc5beeefe13c3ccfcd?s=128&d=identicon&r=PG", "display_name": "orfruit", "link": "https://stackoverflow.com/users/1734108/orfruit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 49538191, "answer_count": 1, "score": -1, "last_activity_date": 1522267213, "creation_date": 1522248753, "last_edit_date": 1522267213, "question_id": 49537776, "link": "https://stackoverflow.com/questions/49537776/c-macro-arguments-substitution-of-parameters", "title": "C, macro arguments, substitution of parameters", "body": "<p>I have a old code that compiles just fine (also gcc for NXP micro, can't remember which version)</p>\n\n<pre><code>#define TIME_CONSTANT     250,mSec\n\nif (SysTimerOnTime(tmr, TIME_CONSTANT)) \n{\n\n}\n</code></pre>\n\n<p>Now I tried to do the same thing for ESP8266, using gcc for Xtensa</p>\n\n<pre><code>xtensa-lx106-elf-gcc.exe (GCC) 5.2.0\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n</code></pre>\n\n<p>I am using -std=c99 (because some inline asm)</p>\n\n<p>The complaint is about passing 2 parameters in SysTimerOnTime macro which takes 3. So if I use:</p>\n\n<pre><code>if (SysTimerOnTime(tmr, 250, mSec)) \n</code></pre>\n\n<p>will work fine.</p>\n\n<p>What will be the problem? </p>\n\n<p>I am positive that in LpcXpresso worked perfect (also gcc) however, I can't test now since the toolchain is not installed anymore.</p>\n\n<p>The macro would be like this</p>\n\n<pre><code>#define SysTimerOnTime(t,v,unit)    (t.Enable &amp;&amp; (Now()-t.Value) &gt; unit(v))\n</code></pre>\n\n<p>Seems that double indirection did the trick. Perhaps LPCXpresso used older compiler. Doesn't matter, this works, thanks Jonathan Leffler</p>\n\n<pre><code>#define TIME_CONSTANT     250,mSec\n#define     SysTimerOnTime_(t,v,unit)   (t.Enable &amp;&amp; (Now()-t.Value) &gt; unit(v))\n#define     SysTimerOnTimeX(x) x\n#define     SysTimerOnTime(tmr, con)    SysTimerOnTimeX(SysTimerOnTime_(tmr, con))\n</code></pre>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 221, "user_id": 8266317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed3586c3db8e18069d276b00db25fdb7?s=128&d=identicon&r=PG&f=1", "display_name": "pro neon", "link": "https://stackoverflow.com/users/8266317/pro-neon"}, "edited": false, "score": 0, "creation_date": 1522248631, "post_id": 49537667, "comment_id": 86082210, "body": "**  printf(&quot;Total exponent sum is %d\\n&quot;,sum);  ^^ Why are there &quot; ** &quot; there??"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1522248758, "post_id": 49537667, "comment_id": 86082337, "body": "You&#39;re not checking for <i>any</i> errors.  What does <code>scanf()</code> return?  Did <code>malloc()</code> actually work?"}, {"owner": {"reputation": 1648, "user_id": 4620387, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e3a06c1e1f8e1b1b4e3c8a6651be2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam12", "link": "https://stackoverflow.com/users/4620387/sam12"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1522248794, "post_id": 49537667, "comment_id": 86082367, "body": "I checked them but removed them from this code @AndrewHenle"}, {"owner": {"reputation": 1648, "user_id": 4620387, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e3a06c1e1f8e1b1b4e3c8a6651be2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam12", "link": "https://stackoverflow.com/users/4620387/sam12"}, "reply_to_user": {"reputation": 221, "user_id": 8266317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed3586c3db8e18069d276b00db25fdb7?s=128&d=identicon&r=PG&f=1", "display_name": "pro neon", "link": "https://stackoverflow.com/users/8266317/pro-neon"}, "edited": false, "score": 0, "creation_date": 1522248814, "post_id": 49537667, "comment_id": 86082383, "body": "@proneon just to show you guys which lines didn&#39;t work"}, {"owner": {"reputation": 221, "user_id": 8266317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed3586c3db8e18069d276b00db25fdb7?s=128&d=identicon&r=PG&f=1", "display_name": "pro neon", "link": "https://stackoverflow.com/users/8266317/pro-neon"}, "edited": false, "score": 0, "creation_date": 1522248954, "post_id": 49537667, "comment_id": 86082491, "body": "what is the powerOfTwo(); function??I mean does it return the power of 2 to the given number??"}, {"owner": {"reputation": 1648, "user_id": 4620387, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e3a06c1e1f8e1b1b4e3c8a6651be2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam12", "link": "https://stackoverflow.com/users/4620387/sam12"}, "reply_to_user": {"reputation": 221, "user_id": 8266317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed3586c3db8e18069d276b00db25fdb7?s=128&d=identicon&r=PG&f=1", "display_name": "pro neon", "link": "https://stackoverflow.com/users/8266317/pro-neon"}, "edited": false, "score": 0, "creation_date": 1522248990, "post_id": 49537667, "comment_id": 86082525, "body": "@proneon yeah it works"}, {"owner": {"reputation": 244, "user_id": 9177735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c90311d812036b4debfcf7aa866dec22?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9177735/ben"}, "edited": false, "score": 1, "creation_date": 1522249075, "post_id": 49537667, "comment_id": 86082604, "body": "<a href=\"https://onlinegdb.com/HkOv6mt5f\" rel=\"nofollow noreferrer\">onlinegdb.com/HkOv6mt5f</a> I don&#39;t see the problem."}, {"owner": {"reputation": 221, "user_id": 8266317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed3586c3db8e18069d276b00db25fdb7?s=128&d=identicon&r=PG&f=1", "display_name": "pro neon", "link": "https://stackoverflow.com/users/8266317/pro-neon"}, "edited": false, "score": 1, "creation_date": 1522249108, "post_id": 49537667, "comment_id": 86082628, "body": "Ok. Hope you got what you want."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1522249117, "post_id": 49537667, "comment_id": 86082637, "body": "It would be more conventional to <code>return 1;</code> or <code>return EXIT_FAILURE;</code> (or use <code>exit()</code> with one of those values) to indicate that the program failed.  Using <code>return 0;</code> (or <code>EXIT_SUCCESS</code>) indicates that the program succeeded.  Error messages should be written to standard error, not standard output, too.  However, that&#39;s not a cause of your problem."}, {"owner": {"reputation": 414, "user_id": 4369740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465640e769a726efeeb7d16db1b01259?s=128&d=identicon&r=PG&f=1", "display_name": "tipaye", "link": "https://stackoverflow.com/users/4369740/tipaye"}, "edited": false, "score": 0, "creation_date": 1522257238, "post_id": 49537667, "comment_id": 86088219, "body": "I ran this (with my own powerOfTwo), and it worked fine.  In a situation like this, it helps if you post code that can be built and run as-is, including the #include statements. That way at least the problem can be verified, and a certain class of problem can be ruled out.  Also, you have the printf variables in the wrong logical order.  You want &lt;code&gt;printf(&quot;The number %d is a power of 2: %d = 2^%d\\n&quot;, arr[i], powerOfTwo(arr[i]), arr[i]);&lt;/code&gt;"}], "owner": {"reputation": 1648, "user_id": 4620387, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8e3a06c1e1f8e1b1b4e3c8a6651be2b4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam12", "link": "https://stackoverflow.com/users/4620387/sam12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522248943, "creation_date": 1522248477, "last_edit_date": 1522248943, "question_id": 49537667, "link": "https://stackoverflow.com/questions/49537667/the-programs-quits-before-printing-the-last-lines", "title": "The programs quits before printing the last lines", "body": "<p>The program finishes before printing the last lines before returning the value 0, it doesn't print the ones I marked with <code>/* ** */</code>:</p>\n\n<pre><code>int main()\n{\n        int num,sum=0,num1;\n        printf(\"Enter size of input:\\n\");\n        scanf(\"%d\",&amp;num);\n\n        int *arr=(int*)malloc(sizeof(int)*num);\n        printf(\"Enter numbers:\\n\");\n        for(int i=0;i&lt;num;i++)\n        {\n            if(scanf(\"%d\", &amp;num1))\n            {\n                arr[i]=num1;\n                sum+=powerOfTwo(num1);\n            }\n            else\n            {\n                printf(\"Invalid number\");  /* ** */\n                free(arr);\n                printf(\"\\n\");\n                return 0;\n            }\n        }\n\n        for(int i=0;i&lt;num;i++)\n        {\n            printf(\"The number %d is a power of 2: %d = 2^%d\\n\", arr[i], arr[i], powerOfTwo(arr[i]));\n        }\n        printf(\"Total exponent sum is %d\\n\",sum); /* ** */\n\n        free(arr);\n        return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "system-calls"], "comments": [{"owner": {"reputation": 274, "user_id": 8977486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7II8r.png?s=128&g=1", "display_name": "infinite", "link": "https://stackoverflow.com/users/8977486/infinite"}, "edited": false, "score": 0, "creation_date": 1522245567, "post_id": 49536494, "comment_id": 86079717, "body": "Did you try File I/O in C? Try that!"}, {"owner": {"reputation": 196, "user_id": 7439381, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nZkDJmzC57c/AAAAAAAAAAI/AAAAAAAAAcM/s_glMjx5_X0/photo.jpg?sz=128", "display_name": "Shihab Pullissery", "link": "https://stackoverflow.com/users/7439381/shihab-pullissery"}, "edited": false, "score": 0, "creation_date": 1522246154, "post_id": 49536494, "comment_id": 86080178, "body": "You are reading line using &quot; c = getchar();&quot; which of cause is from input not from file. and after finding largest writing to file using &quot;write(fout, buf, count);&quot;. Try to open the file from which you need to take the input and read from that. May be this can help <a href=\"https://www.tutorialspoint.com/cprogramming/c_file_io.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cprogramming/c_file_io.htm</a>"}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 1, "creation_date": 1522247257, "post_id": 49536494, "comment_id": 86081120, "body": "you have lots of issue in your code. one of them is flush(stdin) is UB. Check this question: <a href=\"https://stackoverflow.com/questions/43268733/longest-and-shortest-word-in-a-file-c-programming\" title=\"longest and shortest word in a file c programming\">stackoverflow.com/questions/43268733/&hellip;</a> this might give some idea."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1522247283, "post_id": 49536494, "comment_id": 86081150, "body": "Hasn&#39;t this been asked already a few hours ago?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1522247476, "post_id": 49536494, "comment_id": 86081310, "body": "What&#39;s the <code>Enter string</code> prompt for?  You&#39;re reading from a file and don&#39;t need input from the user."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1522247495, "post_id": 49536494, "comment_id": 86081326, "body": "Use a function able to read a full line, not a bunch of raw chars. fgets?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1522249430, "post_id": 49536494, "comment_id": 86082866, "body": "regardless of what some ancient compilers (like visual studio) will allow, there are only two valid signatures for the <code>main()</code> function.  Both of those signatures have a return type of <code>int</code>, not <code>void</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1522249614, "post_id": 49536494, "comment_id": 86083017, "body": "regardless of what <code>visual studio</code> will allow, this statement; <code>fflush( stdin );</code> is (in the C standard) specifically stated as &#39;undefined behavior&#39;.  The function <code>fflush()</code> is ONLY for output streams, not input streams"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1522249804, "post_id": 49536494, "comment_id": 86083196, "body": "the posted code is trying doing WHAT exactly?  The posted code has nothing to do with the text of the question."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9564075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44cca354948257fdb85bf3d5f4fb5bc5?s=128&d=identicon&r=PG&f=1", "display_name": "jessica", "link": "https://stackoverflow.com/users/9564075/jessica"}, "edited": false, "score": 0, "creation_date": 1522255862, "post_id": 49538080, "comment_id": 86087412, "body": "thank you very much"}], "tags": [], "owner": {"reputation": 414, "user_id": 4369740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465640e769a726efeeb7d16db1b01259?s=128&d=identicon&r=PG&f=1", "display_name": "tipaye", "link": "https://stackoverflow.com/users/4369740/tipaye"}, "is_accepted": true, "score": 1, "last_activity_date": 1522249624, "creation_date": 1522249624, "answer_id": 49538080, "question_id": 49536494, "link": "https://stackoverflow.com/questions/49536494/find-longest-string-in-a-file-with-linux-kernel-function-and-write-in-second-fil/49538080#49538080", "title": "find longest string in a file with linux kernel function and write in second file", "body": "<p>There are several issues here, but you're basically reading from standard input when you shouldn't be. In fact more than half of that code is unnecessary.</p>\n\n<p>I have a small example here, that sticks to the wording of your original question and at least shows what part of the code needs cutting:</p>\n\n<pre><code>/* Find the longest word in a text file (foo) and write that word out to another file (bar) */\n/* A word is a group of characters delimited by white space */\n/* A word is shorter than 16384 characters */\n/* We are trying to use low-level system functions (e.g. open, close, read, write) */\n/* instead of standard library functions (e.g. fopen, fclose, fread, fwrite) */\n\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n\n#include &lt;ctype.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\n#define BSIZE 16384\n\n/* read a single word from a file */\nstatic int read_word(int fd, char *buf)\n{\n    int i = 0;\n    char c = 0;\n    int bytes = read(fd, &amp;c, 1);        /* extract a single character */\n    while (isspace(c) &amp;&amp; bytes != 0)    /* skip whitespace */\n        bytes = read(fd, &amp;c, 1);\n    while (!isspace(c) &amp;&amp; bytes != 0) {\n        buf[i++] = c;            /* store character */\n        bytes = read(fd, &amp;c, 1);\n    }\n\n    return i;                /* return number of characters read */\n}\n\nint  main()\n{\n    int fin = open(\"foo\", O_RDONLY);\n    if (fin &lt; 0) {\n        perror(\"foo\");\n        exit(1);\n    }\n\n    int fout = open(\"bar\", O_WRONLY | O_CREAT, 0644);\n    if (fout &lt; 0) {\n        perror(\"bar\");\n        exit(2);\n    }\n\n    char buf[BSIZE] = {0};\n    char largest[BSIZE] = {0};\n\n    int bytes = 0;\n    int count = 0;\n    do {\n        bytes = read_word(fin, buf);            /* read next word */\n        if (bytes &gt; count) {\n            strncpy(largest, buf, BSIZE - 1);    /* preserve largest word seen so far */\n            count = bytes;\n        }\n\n        memset(buf, 0, BSIZE);\n    } while (bytes &gt; 0);\n\n    write(fout, largest, count);                /* write largest word to file */\n    close(fin);\n    close(fout);\n    printf (\"\\nLargest word found was %s @ %d characters length.\\n\", largest, count);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9564075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44cca354948257fdb85bf3d5f4fb5bc5?s=128&d=identicon&r=PG&f=1", "display_name": "jessica", "link": "https://stackoverflow.com/users/9564075/jessica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "closed_date": 1522274349, "accepted_answer_id": 49538080, "answer_count": 1, "score": 0, "last_activity_date": 1522249624, "creation_date": 1522245379, "last_edit_date": 1522245989, "question_id": 49536494, "link": "https://stackoverflow.com/questions/49536494/find-longest-string-in-a-file-with-linux-kernel-function-and-write-in-second-fil", "closed_reason": "Needs details or clarity", "title": "find longest string in a file with linux kernel function and write in second file", "body": "<p>hi i want to Write a command that reads a string from a file using the Linux kernel functions, and then writes the string with the largest length in the second file./ its in c /\nBut I have a problem with the fact that first, the program takes the string from the input, not from the file that is in the system, and the second is that it displays the output instead of the second file.\nI did a lot of work but I could not do it if you can correct the code for me</p>\n\n<pre><code>/* Trivial file copy program using low-level I/O */\n\n#include &lt;fcntl.h&gt;\n#include &lt;stdlib.h&gt;\n#define BSIZE 16384\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\n\nvoid main()\n{\n  int fin, fout; /* Input and output handles */\n  char buf[BSIZE];\n  int count;\n\n  if ((fin  = open(\"foo\", O_RDONLY)) &lt; 0) {\n    perror(\"foo\");\n    exit(1);\n  }\n  if ((fout = open(\"bar\", O_WRONLY | O_CREAT, 0644)) &lt; 0) {\n    perror(\"bar\");\n    exit(2);\n  }\n  while ((count = read(fin, buf, BSIZE)) &gt; 0)\n  {\n    char string[100], word[20], max[20], min[20], c;\n    int i = 0, j = 0, flag = 0;\n\n    printf(\"Enter string: \");\n    i = 0;\n    do\n    {\n        fflush(stdin);\n        c = getchar();\n        string[i++] = c;\n\n    } while (c != '\\n');\n    string[i - 1] = '\\0';\n    for (i = 0; i &lt; strlen(string); i++)\n    {\n        while (i &lt; strlen(string) &amp;&amp; !isspace(string[i]) &amp;&amp; isalnum(string[i]))\n        {\n            word[j++] = string[i++];\n        }\n        if (j != 0)\n        {\n            word[j] = '\\0';\n            if (!flag)\n            {\n                flag = !flag;\n                strcpy(max, word);\n                strcpy(min, word);\n            }\n            if (strlen(word) &gt; strlen(max))\n            {\n                strcpy(max, word);\n            }\n            if (strlen(word) &lt; strlen(min))\n            {\n                strcpy(min, word);\n            }\n            j = 0;\n        }\n    }\n    printf(\"The largest word is '%s' and smallest word is '%s' in '%s'.\\n\", max, min, string);\n\n    return 0;\n    }\n\n    write(fout, buf, count);\n\n  close(fin);\n  close(fout);\n}\n</code></pre>\n"}, {"tags": ["c", "binary"], "answers": [{"comments": [{"owner": {"reputation": 1697, "user_id": 865150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f4de71a5b13764353e5443b215bfe34?s=128&d=identicon&r=PG", "display_name": "S. N", "link": "https://stackoverflow.com/users/865150/s-n"}, "edited": false, "score": 1, "creation_date": 1522246537, "post_id": 49536153, "comment_id": 86080481, "body": "thank you, I made this with the help of Ajay Brahmakshatriya, which almost had the same answer as yours."}], "tags": [], "owner": {"reputation": 274, "user_id": 8977486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7II8r.png?s=128&g=1", "display_name": "infinite", "link": "https://stackoverflow.com/users/8977486/infinite"}, "is_accepted": false, "score": 1, "last_activity_date": 1522246277, "last_edit_date": 1522246277, "creation_date": 1522244509, "answer_id": 49536153, "question_id": 49535890, "link": "https://stackoverflow.com/questions/49535890/converting-integer-into-4-bit-binary/49536153#49536153", "title": "converting integer into 4 bit binary", "body": "<p>Initialize a character array of size 5, ex: <code>char arr[5]</code> and mark <code>arr[4] ='\\0'</code>, rest of the slots as <em>0</em> and then store the LSB into the <strong>4th</strong> array slot &amp; MSB near the <strong>1st</strong> array slot. Print it using <code>%s</code> format specifier.</p>\n\n<p>Initially the array will look like \n<code>|0|0|0|0|\\0|</code>. Let's say that your input is <strong>5</strong> and the output you receive is (in form of <strong>int</strong>) <strong>101</strong>, then after inserting the output into the array will look like <code>|0|1|0|1|\\0|</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1697, "user_id": 865150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f4de71a5b13764353e5443b215bfe34?s=128&d=identicon&r=PG", "display_name": "S. N", "link": "https://stackoverflow.com/users/865150/s-n"}, "edited": false, "score": 0, "creation_date": 1522246387, "post_id": 49536778, "comment_id": 86080353, "body": "thanks, this is exactly what I need, now when I have the number 1 it returns 0001 and so on. I don&#39;t know why U guys couldn&#39;t get this from my question I thought I was pretty clear about what I want to happen here. anyways thanks again now I can go further with my assignment. I accept your answer."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": true, "score": 2, "last_activity_date": 1522246115, "creation_date": 1522246115, "answer_id": 49536778, "question_id": 49535890, "link": "https://stackoverflow.com/questions/49535890/converting-integer-into-4-bit-binary/49536778#49536778", "title": "converting integer into 4 bit binary", "body": "<p>Your requirements are very unclear but from the comments I think I have gathered what you require. According to my suggestion, you need to change the function to return a string instead of an <code>int</code>. </p>\n\n<p>You need to pass an argument in which the string should be returned. So the function will be -</p>\n\n<pre><code>char * convert(int dec, char *output) {\n    output[4] = '\\0';\n    output[3] = (dec &amp; 1) + '0';\n    output[2] = ((dec &gt;&gt; 1) &amp; 1) + '0';\n    output[1] = ((dec &gt;&gt; 2) &amp; 1) + '0';\n    output[0] = ((dec &gt;&gt; 3) &amp; 1) + '0';\n    return output;\n}\n</code></pre>\n\n<p>This function can be used as </p>\n\n<pre><code> char binary[5];\n convert(15, binary);\n printf(\"%s\", binary);\n</code></pre>\n\n<p>Demo: <a href=\"https://ideone.com/nnzwFF\" rel=\"nofollow noreferrer\">Ideone</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8880839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c54c7e7af8dd58362da3b1757a03a4e7?s=128&d=identicon&r=PG&f=1", "display_name": "millimeter", "link": "https://stackoverflow.com/users/8880839/millimeter"}, "is_accepted": false, "score": 0, "last_activity_date": 1565575199, "last_edit_date": 1565575199, "creation_date": 1550843001, "answer_id": 54828435, "question_id": 49535890, "link": "https://stackoverflow.com/questions/49535890/converting-integer-into-4-bit-binary/54828435#54828435", "title": "converting integer into 4 bit binary", "body": "<p>My attempt</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\n\nint convert(int dec)\n{\n    if (dec == 0)\n    {\n        //printf(\"Base c\\n\");\n        return 0;\n    }\n    else\n    {\n        //printf(\"Rec call\\n\");\n        return (dec % 2) + 10 * convert(dec / 2);\n    }\n}\nint main()\n{\n int binary = 10;\n binary = convert(binary);\n printf(\"%d\", binary);\n return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1697, "user_id": 865150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f4de71a5b13764353e5443b215bfe34?s=128&d=identicon&r=PG", "display_name": "S. N", "link": "https://stackoverflow.com/users/865150/s-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1674, "favorite_count": 0, "accepted_answer_id": 49536778, "answer_count": 3, "score": 2, "last_activity_date": 1565575199, "creation_date": 1522243725, "last_edit_date": 1522245936, "question_id": 49535890, "link": "https://stackoverflow.com/questions/49535890/converting-integer-into-4-bit-binary", "title": "converting integer into 4 bit binary", "body": "<p>I have the following code to convert an integer into a binary representation for each integer from 0 to 15, thus I need 4-bit representation of an integer.</p>\n\n<p>the code it works fine but the problem is the length of the binary is not correct, so when given 1 as int it returns 1 as output instead of 0001.\nfor 2 it should return 0010 but instead, it returns 10.</p>\n\n<p>How can I change this code so it returns the correct representation? Using printf  <code>%04d</code> is oki when printing the results, but just for printing because the actual value is still different.</p>\n\n<p>I was trying to make another method that gets an integer convert it into a string and then depending on its length add 0 before it until the length is 4.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint convert(int dec)\n{\n    if (dec == 0)\n    {\n        //printf(\"Base c\\n\");\n        return 0;\n    }\n    else\n    {\n        //printf(\"Rec call\\n\");\n        return (dec % 2) + 10 * convert(dec / 2);\n    }\n}\n\nint main(int argc, char *argv[]) \n{\n    // argc is number of arguments given including a.out in command line\n    // argv is a list of string containing command line arguments\n\n    int v = atoi(argv[2]);\n    printf(\"the number is:%d \\n\", v);\n\n\n    int bin = 0;\n\n    if(v &gt;= 0 &amp;&amp; v &lt;= 15){\n        printf(\"Correct input \\n\");\n        bin = convert(v);\n        printf(\"Binary is: %04d \\n\", bin);\n        printf(\"Binary is: %d \\n\", bin);\n\n    }\n    else{\n        printf(\"Inorrect input, number cant be accepted\");\n    }\n</code></pre>\n\n<p>What I need this method to do:\n1. given an integer\n2. return 4-bit representation of this integer, not sure if it should be an int or string.\n3. for example convert(2) should return 0010, 6 returns 110, and I want this to be 0110 and so on.  the method convert was supposed to do that for me. I hope I am clear about what I what to happen.</p>\n\n<p>this should return for:</p>\n\n<pre><code>1 0001\n2 0010\n3 0011\n4 0100\n5 0101\n6 0110\nand so on\n15 1111\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1522243007, "post_id": 49535581, "comment_id": 86077649, "body": "You don&#39;t care about the end of file, you care when <code>fscanf</code> doesn&#39;t convert what you asked it to. Use that return value instead.  <code>while(fscanf(f,&quot;%lf%lf%lf%lf&quot;,&amp;x,&amp;y,&amp;z,&amp;t) == 4) { do stuff }</code>"}, {"owner": {"reputation": 113, "user_id": 9563285, "user_type": "registered", "profile_image": "https://graph.facebook.com/1139399676086564/picture?type=large", "display_name": "L&#234; D\u0169ng", "link": "https://stackoverflow.com/users/9563285/l%c3%aa-d%c5%a9ng"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1522243446, "post_id": 49535581, "comment_id": 86077984, "body": "Thank you so much. I got it."}], "owner": {"reputation": 113, "user_id": 9563285, "user_type": "registered", "profile_image": "https://graph.facebook.com/1139399676086564/picture?type=large", "display_name": "L&#234; D\u0169ng", "link": "https://stackoverflow.com/users/9563285/l%c3%aa-d%c5%a9ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "closed_date": 1522243034, "answer_count": 0, "score": 0, "last_activity_date": 1522242848, "creation_date": 1522242848, "question_id": 49535581, "link": "https://stackoverflow.com/questions/49535581/reading-data-from-datafile-in-c-with-feof", "closed_reason": "Duplicate", "title": "Reading data from datafile in C with feof()", "body": "<p>I have a following simple code:</p>\n\n<pre><code>f = fopen(\"tdat.dat\",\"r\");\n\nfor(int i=0;;i++)\n{\n    if(feof(f)) break;\n    fscanf(f,\"%lf%lf%lf%lf\",&amp;x,&amp;y,&amp;z,&amp;t);\n    printf(\"%lf\\t%lf\\t%lf\\t%lf\\n\",x,y,z,t);\n}\n</code></pre>\n\n<p>and my datafile tdat.dat is as follows:</p>\n\n<pre><code>1.2 0.8 2.1 30.0\n1.5 2.3 4.5 15.0\n0.3 1.6 1.5 21.0\n</code></pre>\n\n<p>When I run the program, the result is:</p>\n\n<pre><code>1.200000    0.800000    2.100000    30.000000\n1.500000    2.300000    4.500000    15.000000\n0.300000    1.600000    1.500000    21.000000\n0.300000    1.600000    1.500000    21.000000\n</code></pre>\n\n<p>My question is: why is there an additional line in the result that is same as the previous line? (This problem also appears when I use \"while()\" loop instead of for() loop)</p>\n\n<p>Also, how can I avoid this problem?</p>\n"}, {"tags": ["c", "algorithm", "list", "data-structures", "doubly-linked-list"], "answers": [{"comments": [{"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 39, "user_id": 6179120, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tsgz6.jpg?s=128&g=1", "display_name": "PrOoOg", "link": "https://stackoverflow.com/users/6179120/prooog"}, "edited": false, "score": 0, "creation_date": 1522243933, "post_id": 49535639, "comment_id": 86078347, "body": "@PrOoOg It is not a full answer. Your function has other problems. See my answer."}], "tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 0, "last_activity_date": 1522244819, "last_edit_date": 1522244819, "creation_date": 1522242999, "answer_id": 49535639, "question_id": 49535571, "link": "https://stackoverflow.com/questions/49535571/insert-node-into-dllist/49535639#49535639", "title": "Insert node into Dllist", "body": "<p><em>I'm getting this compiler error:</em>  ? Its because of operator precedence(as  <code>-&gt;</code> having higher priority than <code>*</code> so it performs first <code>head-&gt;</code> which you don't want, you want first <code>*head</code> to happen, so put <code>(*head)</code>. </p>\n\n<p><code>*head-&gt;prev</code> should be <code>(*head)-&gt;prev</code>.</p>\n\n<pre><code>(*head)-&gt;prev = new_node;\n</code></pre>\n\n<p>As pointed by others, do proper validation(check all test cases).</p>\n\n<pre><code>    if((*head) == NULL) { /* for first node */\n              new_node-&gt;prev = 0; /* for first node prev should 0 */\n              new_node-&gt;next = *head;\n              *head = new_node;\n              return 1;\n    }\n    else {\n             new_node-&gt;next = *head;\n             (*head)-&gt;prev = *head; /*otherwise head content */\n             *head = new_node;\n   }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 6179120, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tsgz6.jpg?s=128&g=1", "display_name": "PrOoOg", "link": "https://stackoverflow.com/users/6179120/prooog"}, "edited": false, "score": 0, "creation_date": 1522244611, "post_id": 49535904, "comment_id": 86078855, "body": "yeah I forgot the case where the list is empty and head is pointing to null, thanks!"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 39, "user_id": 6179120, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tsgz6.jpg?s=128&g=1", "display_name": "PrOoOg", "link": "https://stackoverflow.com/users/6179120/prooog"}, "edited": false, "score": 1, "creation_date": 1522244678, "post_id": 49535904, "comment_id": 86078912, "body": "@PrOoOg And you also forgot that the member prev_node of new_node also shall be set to NULL.:)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1522245495, "last_edit_date": 1522245495, "creation_date": 1522243777, "answer_id": 49535904, "question_id": 49535571, "link": "https://stackoverflow.com/questions/49535571/insert-node-into-dllist/49535904#49535904", "title": "Insert node into Dllist", "body": "<p>It seems you mean</p>\n\n<pre><code>( *head )-&gt;prev = new_node;\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>*head-&gt;prev = new_node;\n</code></pre>\n\n<p>because the postfix operator <code>-&gt;</code> has a higher precedence than the unary operator <code>*</code> and you need at first to dereference the pointer <code>head</code> before applying the operator ->.</p>\n\n<p>Nevertheless the function in any case is wrong. If you declared only a head of the list (though usually a head and a tail node are declared for doubly-linked lists) then the function should be implemented like</p>\n\n<pre><code>void insert( node** head, int val ) \n{\n    node *new_node = malloc( sizeof( node ) );\n\n    new_node-&gt;val = val;\n    new_node-&gt;next = *head;\n    new_node-&gt;prev = NULL;\n\n    if ( *head ) ( *head )-&gt;prev = new_node;\n\n    *head = new_node;\n}\n</code></pre>\n\n<p>Or it is better to define it such a way that it would return a signal whether the operation was successfull.</p>\n\n<p>For example</p>\n\n<pre><code>int insert( node** head, int val ) \n{\n    node *new_node = malloc( sizeof( node ) );\n    int success = new_node != NULL;\n\n    if ( success )\n    {\n        new_node-&gt;val = val;\n        new_node-&gt;next = *head;\n        new_node-&gt;prev = NULL;\n\n        if ( *head ) ( *head )-&gt;prev = new_node;\n\n        *head = new_node;\n    }\n\n    return success;\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 6179120, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tsgz6.jpg?s=128&g=1", "display_name": "PrOoOg", "link": "https://stackoverflow.com/users/6179120/prooog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 49535904, "answer_count": 2, "score": 1, "last_activity_date": 1522245495, "creation_date": 1522242806, "last_edit_date": 1522244588, "question_id": 49535571, "link": "https://stackoverflow.com/questions/49535571/insert-node-into-dllist", "title": "Insert node into Dllist", "body": "<p>I'm trying to insert a node into a doubly linked list using a procedure instead of a function that returns a pointer to the new head of the list.</p>\n\n<p>I'm getting this compiler error:</p>\n\n<pre><code>struct.c: In function 'insert':\nstruct.c:28:10: error: '*head' is a pointer; did you mean to use '-&gt;'?\n     *head-&gt;prev = new_node;\n          ^~\n          -&gt;\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>typedef struct node {\n    int val;\n    struct node* next;\n    struct node* prev;\n}node;\n\nvoid insert(node** head, int val) {\n    node* new_node = malloc(sizeof(node));\n    new_node-&gt;val = val;\n    new_node-&gt;next = *head;\n    *head-&gt;prev = new_node;\n    *head = new_node;\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "elf", "inline-assembly", "sparc"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522242691, "post_id": 49535410, "comment_id": 86077387, "body": "<code>ld  [%i1 + 0x28], %g1         [FFFFFFFF]</code>: looks like the result is <code>FFFFFFFF</code>, seems that you&#39;re trying to jump to FFFFFFFF (which is somehow confirmed by &quot;address is not aligned&quot; error (PC needs to be at an even address)"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 1, "creation_date": 1522242759, "post_id": 49535410, "comment_id": 86077451, "body": "By the way, if you don&#39;t require jump, you can use plain C with a function pointer."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522242856, "post_id": 49535410, "comment_id": 86077515, "body": "Jester is right. Using inline asm with parameters is not the simplest thing. If you can do it in pure C, do it."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1522247561, "post_id": 49535410, "comment_id": 86081372, "body": "The disassembly shown is not the disassembly of program A.  Also, GCC officially does not support <code>asm</code> transferring control to an arbitrary address.  I would recommend writing the first-stage bootstrap entirely in assembly."}, {"owner": {"reputation": 62, "user_id": 6844586, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ReGkj.jpg?s=128&g=1", "display_name": "Andak", "link": "https://stackoverflow.com/users/6844586/andak"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1522248103, "post_id": 49535410, "comment_id": 86081799, "body": "I&#39;ve discovered a bug at an &quot;higher&quot; level and I&#39;m trying to solve that. In particular the new bug (I don&#39;t know if it is better to open another question) is: If I load the program A first and sequentially the program B, then i run the program A that calls program B and works. If I load the program B first and sequentially the program A, then i run the program A that calls program B... it does not work. I&#39;m confused . .   @zwol, I&#39;m not sure that what I showed is the disassembly. It is simply the instruction trace buffer."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1522249441, "post_id": 49535410, "comment_id": 86082874, "body": "@Andak What I&#39;m trying to tell you is that the instruction trace says the crash happened in some other code entirely, not the part of program A that you showed us.  It does not end with a nop and then a jmp."}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1522268334, "post_id": 49535410, "comment_id": 86094492, "body": "@zwol The addresses hint that it is a trace of program B. Now the question is how program B is linked. In particular, what is called at address 60004824. The map file should help."}], "answers": [{"tags": [], "owner": {"reputation": 201, "user_id": 7483688, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PF2A24xvywA/AAAAAAAAAAI/AAAAAAAAB3g/qQj_Gxxppg0/photo.jpg?sz=128", "display_name": "Rob Gardner", "link": "https://stackoverflow.com/users/7483688/rob-gardner"}, "is_accepted": false, "score": 1, "last_activity_date": 1522332817, "creation_date": 1522332817, "answer_id": 49558371, "question_id": 49535410, "link": "https://stackoverflow.com/questions/49535410/sparc-assembly-jmp-boot/49558371#49558371", "title": "SPARC assembly jmp \\boot", "body": "<p>Looks to me like you did execute the jump, and it got to program B, as evidenced by the addresses of the instructions in the trace buffer. But where you crashed was in stdio trying to print stuff. Stdio makes extensive use of function pointers, and the sequence clearly shows a call instruction with the target address in a register, which indicates use of a function pointer.</p>\n\n<p>I suggest putting fflush(stdout) in program A just before the jump, and this will allow you to see the messages before doing the jump. Then, in program B, instead of using printf, just put some known value in memory that you can examine later via the monitor to verify that it got there. </p>\n\n<p>My guess is that the stdio library has some data or parameter that needs to be set up at the start of the program, and that's not being done or not done properly. Not sure about the platform you are running on, but do you have some sort of debugging or single stepping ability, like in a debugger? If so, just single step through the jump and follow where the program goes.</p>\n"}], "owner": {"reputation": 62, "user_id": 6844586, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ReGkj.jpg?s=128&g=1", "display_name": "Andak", "link": "https://stackoverflow.com/users/6844586/andak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522332817, "creation_date": 1522242323, "question_id": 49535410, "link": "https://stackoverflow.com/questions/49535410/sparc-assembly-jmp-boot", "title": "SPARC assembly jmp \\boot", "body": "<p>I'll explain the problem briefly. I have a Leon3 board (gr-ut-g99). Using GRMON2  I can load executables at the desired address in the board.</p>\n\n<p>I have two programs. Let's call them A and B. I tried to load both in memory and individually they work.</p>\n\n<p>What I would like to do now is to make the A program call the B program.</p>\n\n<p>Both programs are written in C using a variant of the gcc compiler (the Gaisler Sparc GCC).</p>\n\n<p>To do the jump I wrote a tiny inline assembler function in program A that jumps to a memory address where I loaded the program B.</p>\n\n<p>below a snippet of the program A</p>\n\n<pre><code> unsigned int return_address;\n unsigned int * const RAM_pointer = (unsigned int *) RAM_ADDRESS;\n printf(\"RAM pointer set to: 0x%08x \\n\",(unsigned int)RAM_pointer);\n printf(\"jumping...\\n\");\n\n __asm__(\" nop;\" //clean the pipeline\n         \"jmp %1;\" // jmp to programB\n       :\"=r\" (return_address)\n       :\"r\" (RAM_pointer)\n     );\n</code></pre>\n\n<p>RAM_ADDRESS is a #define</p>\n\n<pre><code>#define RAM_ADDRESS 0x60000000\n</code></pre>\n\n<p>The program B is a simple hello world. The program B is loaded at the 0x60000000 address. If I try to run it, it works!</p>\n\n<pre><code>int main()\n{\n  printf (\"HELLO! I'M BOOTED! \\n\");\n  fflush(stdout);\n\n  return 0;\n}\n</code></pre>\n\n<p>What I expect when I run the ProgramA, is to see the \"jumping...\" message on the console and then see the \"HELLO! I'M BOOTED!\" from the programB</p>\n\n<p>What happens instead an IU exception. \nBelow I posted the messages show by grmon2 monitor. I also reported the \"inst\" report which should show the last operations performed before the exception.</p>\n\n<pre><code>  grmon2&gt; run\n\n  IU exception (tt = 0x07, mem address not aligned)\n\n  0x60004824: 9fc04000  call  %g1\n\n\ngrmon2&gt; inst\n  TIME     ADDRESS   INSTRUCTION                   RESULT      SYMBOL\n\n   407085  600047FC  mov  %i3, %o2                 [600063B8]  -\n\n   407086  60004800  cmp  %i4                      [00000013]  -\n\n   407089  60004804  be  0x60004970                [00000000]  -\n\n   407090  60004808  mov  %i0, %o0                 [6000646C]  -\n\n   407091  6000480C  mov  %i4, %o3                 [00000013]  -\n\n   407092  60004810  cmp  %i4, %l0                 [80000413]  -\n\n   407108  60004814  bleu  0x60004820              [00000000]  -\n\n   407144  60004818  ld  [%i1 + 0x20], %o1         [FFFFFFFF]  -\n\n   407179  60004820  ld  [%i1 + 0x28], %g1         [FFFFFFFF]  -\n\n   407186  60004824  call  %g1                     [  TRAP  ]  -\n</code></pre>\n\n<p>I also tried to substitute the \"jmp\" with a \"jmpl\" or a \"call\" but it does not worked.\nI'm quite confused. \nI do not know how to cope well with the problem and therefore I do not know what other information it is necessary to provide.</p>\n\n<p>I can say that, the programB is loaded at 0x60000000 and the entry_point is, of course, 0x60000000. Running directly program B from that entry point it works good!</p>\n\n<p>Thanks in advance for your help!</p>\n"}, {"tags": ["c", "file-io"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522242216, "post_id": 49535324, "comment_id": 86077019, "body": "flush isn&#39;t done using <code>fseek</code> but <code>fflush</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522242261, "post_id": 49535324, "comment_id": 86077054, "body": "to skip bytes from standard input, you need to read them &amp; discard them. Seeking doesn&#39;t work, input streams (and output streams) aren&#39;t seekable."}, {"owner": {"reputation": 193, "user_id": 2544133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8044b5403b1476d59316cd98141259aa?s=128&d=identicon&r=PG", "display_name": "m0drzew", "link": "https://stackoverflow.com/users/2544133/m0drzew"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522242288, "post_id": 49535324, "comment_id": 86077070, "body": "But isn&#39;t that fseek needs to flush its cache before changing position?"}, {"owner": {"reputation": 193, "user_id": 2544133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8044b5403b1476d59316cd98141259aa?s=128&d=identicon&r=PG", "display_name": "m0drzew", "link": "https://stackoverflow.com/users/2544133/m0drzew"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522242385, "post_id": 49535324, "comment_id": 86077140, "body": "Maybe I misinterpreted something, I meant this one <a href=\"http://www.cplusplus.com/reference/cstdio/fseek/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdio/fseek</a>"}, {"owner": {"reputation": 193, "user_id": 2544133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8044b5403b1476d59316cd98141259aa?s=128&d=identicon&r=PG", "display_name": "m0drzew", "link": "https://stackoverflow.com/users/2544133/m0drzew"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522242513, "post_id": 49535324, "comment_id": 86077242, "body": "Maybe I didn&#39;t understand clearly, but after reading that you wrote I assume that file is something like special case of stream that allows to do <code>fseek</code>?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522243245, "post_id": 49535324, "comment_id": 86077830, "body": "@Jean-Fran&#231;oisFabre <code>fseek()</code> does imply an <code>fflush()</code>.  See <a href=\"https://stackoverflow.com/questions/7495891/will-fseek-function-flush-data-in-the-buffer-in-c\" title=\"will fseek function flush data in the buffer in c\">stackoverflow.com/questions/7495891/&hellip;</a>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522243332, "post_id": 49535324, "comment_id": 86077885, "body": "I must have misintepreted the first version of the question. I thought it was about stdin/stdout."}, {"owner": {"reputation": 193, "user_id": 2544133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8044b5403b1476d59316cd98141259aa?s=128&d=identicon&r=PG", "display_name": "m0drzew", "link": "https://stackoverflow.com/users/2544133/m0drzew"}, "edited": false, "score": 0, "creation_date": 1522243380, "post_id": 49535324, "comment_id": 86077925, "body": "Could you please reopen this question?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522243425, "post_id": 49535324, "comment_id": 86077969, "body": "I have changed the duplicate target. This is still a duplicate. If I&#39;m proven wrong, I&#39;ll reopen, no issue."}], "owner": {"reputation": 193, "user_id": 2544133, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8044b5403b1476d59316cd98141259aa?s=128&d=identicon&r=PG", "display_name": "m0drzew", "link": "https://stackoverflow.com/users/2544133/m0drzew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "closed_date": 1522242815, "answer_count": 0, "score": 0, "last_activity_date": 1522243372, "creation_date": 1522242082, "last_edit_date": 1522242657, "question_id": 49535324, "link": "https://stackoverflow.com/questions/49535324/skip-in-standard-input-output-stream", "closed_reason": "Duplicate", "title": "Skip in standard input/output stream", "body": "<p>Why operations connected with changing pointer position in file needs to do one of those:</p>\n\n<ul>\n<li>read value (i.e. <code>fread()</code>)</li>\n<li>flush stream (i.e. <code>fseek()</code>)</li>\n</ul>\n\n<p>For example: I know that next 10 bytes are unnecessary offset and I can simply skip them, so why I need to reset position indicator or read those 10 bytes and ignore them. I would want just move pointer those 10 bytes forward without any side effects. What is the reason behind it?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1522240872, "post_id": 49534679, "comment_id": 86075970, "body": "The function is changing the value of <code>px</code> from <code>&amp;x</code> to <code>&amp;y</code>, and <code>y</code> has the value <code>1000</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522241737, "post_id": 49534679, "comment_id": 86076675, "body": "That&#39;s not valid C. Any modern compiler will complian for a missing declaration. Also <code>main</code> has to be <code>int main(void)</code> at minimum"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1522241841, "post_id": 49534679, "comment_id": 86076752, "body": "@Yatendra Dubey Does the code compile?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1522242596, "post_id": 49534679, "comment_id": 86077308, "body": "Does the compiler not warn you when you try to pass <code>ppx</code> to <code>f3</code> where the forward declaration is missing?"}, {"owner": {"reputation": 39, "user_id": 7105840, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EMrNMoPGqeg/AAAAAAAAAAI/AAAAAAAAARU/fBRpZX_ocZ4/photo.jpg?sz=128", "display_name": "Yatendra Dubey", "link": "https://stackoverflow.com/users/7105840/yatendra-dubey"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1522318601, "post_id": 49534679, "comment_id": 86114094, "body": "@VladfromMoscow yes the code does compile"}], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 5, "last_activity_date": 1522245271, "last_edit_date": 1522245271, "creation_date": 1522240959, "answer_id": 49534883, "question_id": 49534679, "link": "https://stackoverflow.com/questions/49534679/why-the-answer-of-following-code-is-1000/49534883#49534883", "title": "Why the answer of following code is 1000?", "body": "<p>This statement:</p>\n\n<pre><code>px = &amp;x;\n</code></pre>\n\n<p>assigns the address of <code>x</code> to <code>px</code>. This statement:</p>\n\n<pre><code>ppx = &amp;px;\n</code></pre>\n\n<p>assigns the address of <code>px</code> to <code>ppx</code>. This statement:</p>\n\n<pre><code>f3(ppx);\n</code></pre>\n\n<p>passes the value of <code>ppx</code> to <code>f3</code>. In <code>f3</code>, this statement:</p>\n\n<pre><code>*pp = &amp;y;\n</code></pre>\n\n<p>assigns the address of <code>y</code> to the place that <code>pp</code> points. <code>pp</code> is the parameter of <code>f3</code>, which was given the value <code>ppx</code> in the call.</p>\n\n<p>That is, <code>pp</code> is <code>ppx</code>, which points to <code>px</code>. Since <code>pp</code> points to <code>px</code>, <code>*pp = &amp;y</code> puts the address of <code>y</code> in <code>px</code>.</p>\n\n<p>Now <code>px</code> points to <code>y</code>. Then this statement:</p>\n\n<pre><code>printf(\"%d\", *px);\n</code></pre>\n\n<p>prints the thing that <code>px</code> points to, which is <code>y</code>, which is 1000.</p>\n"}, {"tags": [], "owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "is_accepted": false, "score": 0, "last_activity_date": 1522242891, "last_edit_date": 1522242891, "creation_date": 1522241096, "answer_id": 49534932, "question_id": 49534679, "link": "https://stackoverflow.com/questions/49534679/why-the-answer-of-following-code-is-1000/49534932#49534932", "title": "Why the answer of following code is 1000?", "body": "<p>This statement <code>*pp = &amp;y;</code> causes to print <code>1000</code>. Before calling <code>f3()</code>  <code>px</code> points to address of <code>x</code> as <code>px=&amp;x;</code> but in <code>f3()</code>  <code>px</code> got modified as address of <code>y</code>.</p>\n\n<pre><code>int y;\nvoid f3(int **pp){ /*since you didn't declare functin,\n                   so either declare it or define before main() */\n        *pp = &amp;y;/* px contains now address of y */\n}\nint main(){ /* use int main() instead of void main() */\n        int x,*px,**ppx;\n        x=10;\n        y=1000;\n        px=&amp;x;/* px points to address of x*/\n        ppx=&amp;px; /* ppx points to address of px */\n        f3(ppx); /* passing ppx i.e address of px \n                 And in f3() *pp = &amp;y means px got replaced by \n                 address of y */\n        printf(\"%d\",*px); /* prints value at address of y, not address of x */\n        return 0;\n}\n</code></pre>\n\n<p>Compile your code always with <code>-Wall</code> flag, don't ignore warnings.         </p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1522243201, "creation_date": 1522243201, "answer_id": 49535701, "question_id": 49534679, "link": "https://stackoverflow.com/questions/49534679/why-the-answer-of-following-code-is-1000/49535701#49535701", "title": "Why the answer of following code is 1000?", "body": "<p>You can change an object in a function passing it by reference that is indirectly through a pointer.</p>\n\n<p>For example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid f( int *p, int value )\n{\n    *p = value;\n}\n\nint main(void) \n{\n    int x = 10;\n\n    printf( \"Before call f x = %d\\n\", x );\n\n    int *px = &amp;x;\n\n    f( px, 20 );\n\n    printf( \"After call f x = %d\\n\", x );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>Before call f x = 10\nAfter call f x = 20\n</code></pre>\n\n<p>In the program the function deals with a pointer to the variable <code>x</code> declared in main. That is the pointer points to the variable <code>x</code>. Dereferencing the pointer you get access to the variable and thus can change it.</p>\n\n<pre><code>*p = 20;\n</code></pre>\n\n<p>The same way you can change an object that has a pointer type. To do this you have to pass the object/pointer by reference as it was shown above.</p>\n\n<p>For example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef int * T;\n\nvoid f( T *pp, T p )\n{\n    *pp = p;\n}\n\nint main(void) \n{\n    int x = 10;\n\n    T px = NULL;\n\n    T *ppx = &amp;px;\n\n    f( ppx, &amp;x );\n\n    printf( \"After call f *px = %d\\n\", *px );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>After call f *px = 10\n</code></pre>\n\n<p>At the beginning of the program the pointer <code>px</code> that has the type <code>int *</code> (due to the typedef) is initialized by <code>NULL</code>. Then it is passed to the function <code>f</code> by reference</p>\n\n<pre><code>T *ppx = &amp;px;\n\nf( ppx, &amp;x );\n</code></pre>\n\n<p>that is indirrectly through a pointer to the pointer <code>px</code>. Within the function the pointer <code>px</code> is reassigned with the address of the variable <code>x</code>by dereferencing the pointer <code>pp</code> that points to the original pointer <code>px</code>.</p>\n"}], "owner": {"reputation": 39, "user_id": 7105840, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EMrNMoPGqeg/AAAAAAAAAAI/AAAAAAAAARU/fBRpZX_ocZ4/photo.jpg?sz=128", "display_name": "Yatendra Dubey", "link": "https://stackoverflow.com/users/7105840/yatendra-dubey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 1, "closed_date": 1522279039, "answer_count": 3, "score": -7, "last_activity_date": 1522323897, "creation_date": 1522240456, "last_edit_date": 1522323897, "question_id": 49534679, "link": "https://stackoverflow.com/questions/49534679/why-the-answer-of-following-code-is-1000", "closed_reason": "Not suitable for this site", "title": "Why the answer of following code is 1000?", "body": "<p>I came across a question on pointer which is given below. I am not able to understand why the output of the code below is 1000 and not 10. Can anyone help me how it is possible?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint y;\nvoid main()\n{\n    int x, *px, **ppx;\n    x = 10;\n    y = 1000;\n    px = &amp;x;\n    ppx = &amp;px;\n    f3(ppx);\n    printf(\"%d\", *px);\n}\nvoid f3(int **pp)\n{\n    *pp = &amp;y;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "arm", "32bit-64bit", "memory-address"], "comments": [{"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 0, "creation_date": 1522241317, "post_id": 49534672, "comment_id": 86076324, "body": "User space? physical and logical (virtual) addresses are unrelated. So you can have 32bit address, but maybe above 32bit. In any case, it is possible, but you must provide more information about size and use: you should tell the kernel to allocate and make such memory fixed, usually linked to some hardware."}, {"owner": {"reputation": 4625, "user_id": 1964969, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0879c1954a7ee8660f80eafdf9f66776?s=128&d=identicon&r=PG", "display_name": "Yury Schkatula", "link": "https://stackoverflow.com/users/1964969/yury-schkatula"}, "edited": false, "score": 1, "creation_date": 1522252615, "post_id": 49534672, "comment_id": 86085283, "body": "Seems like XY problem. Could you share your original intent? Why do you need to be allocated in lower 32 bits?"}], "answers": [{"tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": true, "score": 4, "last_activity_date": 1522242444, "last_edit_date": 1522242444, "creation_date": 1522242059, "answer_id": 49535313, "question_id": 49534672, "link": "https://stackoverflow.com/questions/49534672/how-to-allocate-buffer-within-32-bit-address-space/49535313#49535313", "title": "How to allocate buffer within 32-bit address space?", "body": "<p>There is no C standard function to do so. However, since you tagged the question as Linux, take a look at <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow noreferrer\"><code>mmap(2)</code></a> and the <code>MAP_ANONYMOUS</code> and <code>MAP_32BIT</code> flags, e.g.:</p>\n\n<pre><code>mmap(\n    0, 1,\n    PROT_READ | PROT_WRITE,\n    MAP_PRIVATE | MAP_ANONYMOUS | MAP_32BIT,\n    -1, 0\n);\n</code></pre>\n\n<p>Another option is passing an explicit address in the lower 32-bit address space using the <code>MAP_FIXED</code> flag:</p>\n\n<pre><code>mmap(\n    (void *)0x10000, 1,\n    PROT_READ | PROT_WRITE,\n    MAP_PRIVATE | MAP_ANONYMOUS | MAP_FIXED,\n    -1, 0\n);\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 9557222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6bfe4601f522a79a1ec5b8ea6b059d3?s=128&d=identicon&r=PG&f=1", "display_name": "lovehell", "link": "https://stackoverflow.com/users/9557222/lovehell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 49535313, "answer_count": 1, "score": 3, "last_activity_date": 1522250490, "creation_date": 1522240414, "last_edit_date": 1522250490, "question_id": 49534672, "link": "https://stackoverflow.com/questions/49534672/how-to-allocate-buffer-within-32-bit-address-space", "title": "How to allocate buffer within 32-bit address space?", "body": "<p>I would like to allocate a buffer within 32-bit address space on 64-bit ARM. In other words, I would like to ensure that my buffer is bound to the lower 32-bit address space. Do you know a nice C function which does that?</p>\n"}, {"tags": ["c", "flex-lexer"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1522239894, "post_id": 49534477, "comment_id": 86075196, "body": "Welcome to stackoverflow.com. Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. Lastly please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9338604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562a0eb93b3d7babade0564ed89171ca?s=128&d=identicon&r=PG", "display_name": "user9338604", "link": "https://stackoverflow.com/users/9338604/user9338604"}, "edited": false, "score": 0, "creation_date": 1522242416, "post_id": 49534530, "comment_id": 86077170, "body": "Nope even that&#39;s not working!it shows ^Z and after I press enter it goes to next line!"}], "tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": false, "score": 1, "last_activity_date": 1522239991, "creation_date": 1522239991, "answer_id": 49534530, "question_id": 49534477, "link": "https://stackoverflow.com/questions/49534477/lex-program-input-doesnt-terminate/49534530#49534530", "title": "Lex program input doesn&#39;t terminate", "body": "<p>Windows?</p>\n\n<p>You need Ctrl-Z then Enter instead of Ctrl-D, which is available in Unix &amp; Linux.</p>\n"}], "owner": {"reputation": 1, "user_id": 9338604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562a0eb93b3d7babade0564ed89171ca?s=128&d=identicon&r=PG", "display_name": "user9338604", "link": "https://stackoverflow.com/users/9338604/user9338604"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 793, "favorite_count": 0, "closed_date": 1522241592, "answer_count": 1, "score": -7, "last_activity_date": 1522255141, "creation_date": 1522239822, "last_edit_date": 1522255141, "question_id": 49534477, "link": "https://stackoverflow.com/questions/49534477/lex-program-input-doesnt-terminate", "closed_reason": "Not suitable for this site", "title": "Lex program input doesn&#39;t terminate", "body": "<p>I'm not able to terminate input for a <strong>lex program</strong> even after pressing <strong>ctrl D</strong> it just keeps going on! \nWhat might be wrong? I am using <strong>flex</strong> compiler for Windows.</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 4, "creation_date": 1522239949, "post_id": 49534422, "comment_id": 86075231, "body": "This shouldn&#39;t happen if the library is linked statically."}, {"owner": {"reputation": 5450, "user_id": 2758823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Nxaq.jpg?s=128&g=1", "display_name": "Giacomo Catenazzi", "link": "https://stackoverflow.com/users/2758823/giacomo-catenazzi"}, "edited": false, "score": 0, "creation_date": 1522240153, "post_id": 49534422, "comment_id": 86075407, "body": "It seems that your linked hardcoded library version (usually it hardcode also fallback versions, aka 1.0 and 1."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 1, "creation_date": 1522240293, "post_id": 49534422, "comment_id": 86075523, "body": "Please show us how you compiled and linked your program."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1522244491, "post_id": 49534422, "comment_id": 86078766, "body": "To resolve your question, we would need to know 1. What is the exact filename of your library, and in which exact folder is this library located. 2. The exact command you ran to create your executable (and link it to your library). 3. The output you get when you run <code>ldd .&#47;yourexecutable</code> both on the PC where it is working and the PC where it is not working. 4. The exact location of the your version 1.0.1 library on the PC where it is not woking, and the location of the version 1.0.0 library on that same PC. Note, what you describe should not happen when you link statically"}, {"owner": {"reputation": 414, "user_id": 4369740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465640e769a726efeeb7d16db1b01259?s=128&d=identicon&r=PG&f=1", "display_name": "tipaye", "link": "https://stackoverflow.com/users/4369740/tipaye"}, "edited": false, "score": 0, "creation_date": 1522249827, "post_id": 49534422, "comment_id": 86083223, "body": "Do you mean dynamically linked?"}, {"owner": {"reputation": 414, "user_id": 4369740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/465640e769a726efeeb7d16db1b01259?s=128&d=identicon&r=PG&f=1", "display_name": "tipaye", "link": "https://stackoverflow.com/users/4369740/tipaye"}, "edited": false, "score": 0, "creation_date": 1522250260, "post_id": 49534422, "comment_id": 86083575, "body": "Do you mean dynamically linked? If so, and you need to be &quot;absolutely certain&quot; of which library is being used, you may want to do the run-time linking yourself, and consider using the dlopen() family of functions."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 3249327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1d30d0b6bab2a62e7c57d6da86991f0?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/3249327/hans"}, "edited": false, "score": 0, "creation_date": 1522306699, "post_id": 49535972, "comment_id": 86106753, "body": "Thanks for valuable feedback and to let me know that it must work. With the example code I cannot reproduce it, too. So I&#180;m checking my compile and link settings to find the root cause."}], "tags": [], "owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "is_accepted": true, "score": 1, "last_activity_date": 1522243973, "last_edit_date": 1592644375, "creation_date": 1522243973, "answer_id": 49535972, "question_id": 49534422, "link": "https://stackoverflow.com/questions/49534422/use-specific-version-of-library/49535972#49535972", "title": "Use specific version of library", "body": "<p>I can't reproduce your problem. What I did is quite simple and done without any specials. To reproduce I put you all the details here below.</p>\n<p>If you need some basic information you should check out this page:\n<a href=\"http://www.kaizou.org/2015/01/linux-libraries/\" rel=\"nofollow noreferrer\">http://www.kaizou.org/2015/01/linux-libraries/</a></p>\n<p>Full example:</p>\n<p>Makefile:</p>\n<pre><code>all: go1 go2\n\nmylib.so.1: mylib.so.1.1.1\n    ln -s mylib.so.1.1.1 mylib.so.1\n\nmylib.so.2: mylib.so.2.2.2\n    ln -s mylib.so.2.2.2 mylib.so.2\n\ngo1: main.cpp mylib.so.1.1.1 mylib.so.1\n    $(CXX) -O3  mylib.so.1.1.1 -Wall -pedantic -Wextra main.cpp -g -o go1\n\ngo2: main.cpp mylib.so.2.2.2 mylib.so.2\n    $(CXX) -O3 mylib.so.2.2.2 -Wall -pedantic -Wextra main.cpp -g -o go2\n\nmylib.so.1.1.1: lib1.cpp\n    g++ -fPIC -Wl,-soname,mylib.so.1 -o mylib.so.1.1.1 -shared lib1.cpp\n\nmylib.so.2.2.2: lib2.cpp\n    g++ -fPIC -Wl,-soname,mylib.so.2 -o mylib.so.2.2.2 -shared lib2.cpp\n\nclean:\n    rm -f go*\n    rm -f main.o f1.o f2.o\n    rm -f mylib*.so.*\n</code></pre>\n<p>main.cpp:</p>\n<pre><code>#include &lt;unistd.h&gt;\nvoid f1();\n\nint main()\n{   \n    sleep(2);\n    f1();\n}   \n</code></pre>\n<p>lib1.cpp:</p>\n<pre><code>#include &lt;iostream&gt;\nvoid f1() { std::cout &lt;&lt; &quot;Version 1 &quot; &lt;&lt; std::endl; }\n</code></pre>\n<p>lib2.cpp:</p>\n<pre><code>#include &lt;iostream&gt;\nvoid f1() { std::cout &lt;&lt; &quot;Version 2 &quot; &lt;&lt; std::endl; }\n</code></pre>\n<p>You can call it by:</p>\n<blockquote>\n<p>export LD_LIBRARY_PATH=.</p>\n<p>go1 &amp; go2</p>\n</blockquote>\n<p>As you can see both versions run in parallel and using different versions of the shared library. So I simply can not reproduce your problem!</p>\n"}], "owner": {"reputation": 31, "user_id": 3249327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1d30d0b6bab2a62e7c57d6da86991f0?s=128&d=identicon&r=PG&f=1", "display_name": "Hans", "link": "https://stackoverflow.com/users/3249327/hans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 49535972, "answer_count": 1, "score": 2, "last_activity_date": 1522243973, "creation_date": 1522239688, "last_edit_date": 1522242197, "question_id": 49534422, "link": "https://stackoverflow.com/questions/49534422/use-specific-version-of-library", "title": "Use specific version of library", "body": "<p>I have a Linux program written in C with a statically linked library. The version of the library_x is e.g. 1.0.1.</p>\n\n<p>When just my program is called on a PC my library_x version 1.0.1 is loaded and it works like expected.</p>\n\n<p>But when on the PC the calling program has already \"loaded\" another version of library_x, e.g. 1.0.0, my library_x 1.0.1 is not loaded anymore. In the stack I can see that calls of my code are directed to library_x 1.0.0.</p>\n\n<p>Can this be avoided? How can force that my library_x 1.0.1 is used by my code?</p>\n"}, {"tags": ["c", "raspberry-pi"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1522238696, "post_id": 49534008, "comment_id": 86074317, "body": "I would guess <code>argv[2]</code> ==&gt; <code>argv[1]</code>"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1522238705, "post_id": 49534008, "comment_id": 86074327, "body": "well... 1. index in C start by 0 so use <code>argv[1]</code>, 2. what do you mean by convert to binary ???"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1522238794, "post_id": 49534008, "comment_id": 86074391, "body": "The <code>int</code> already is binary, so returning <code>int</code> from <code>convert</code> makes no sense. You mean convert to a string of one and zeros?"}, {"owner": {"reputation": 868, "user_id": 6022274, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06c83ad18e5255b126aca74fff0af330?s=128&d=identicon&r=PG&f=1", "display_name": "Bromind", "link": "https://stackoverflow.com/users/6022274/bromind"}, "edited": false, "score": 0, "creation_date": 1522238870, "post_id": 49534008, "comment_id": 86074441, "body": "He means a function <code>f: int -&gt; int</code> such that the decimal representation of <code>f(x)</code> is the same than the binary representation of <code>x</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 868, "user_id": 6022274, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06c83ad18e5255b126aca74fff0af330?s=128&d=identicon&r=PG&f=1", "display_name": "Bromind", "link": "https://stackoverflow.com/users/6022274/bromind"}, "edited": false, "score": 0, "creation_date": 1522238912, "post_id": 49534008, "comment_id": 86074477, "body": "@Bromind ah, I see it is recursive."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1522238930, "post_id": 49534008, "comment_id": 86074492, "body": "Please show an example of input and expected output."}, {"owner": {"reputation": 868, "user_id": 6022274, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06c83ad18e5255b126aca74fff0af330?s=128&d=identicon&r=PG&f=1", "display_name": "Bromind", "link": "https://stackoverflow.com/users/6022274/bromind"}, "edited": false, "score": 0, "creation_date": 1522238998, "post_id": 49534008, "comment_id": 86074550, "body": "input: <code>.&#47;a.out 12</code>, expected output: <code>the number is:12Correct inputBinary is: 1100</code> with a newline after &quot;<code>12</code>&quot;."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 868, "user_id": 6022274, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06c83ad18e5255b126aca74fff0af330?s=128&d=identicon&r=PG&f=1", "display_name": "Bromind", "link": "https://stackoverflow.com/users/6022274/bromind"}, "edited": false, "score": 0, "creation_date": 1522239049, "post_id": 49534008, "comment_id": 86074597, "body": "@Bromind please <a href=\"https://stackoverflow.com/posts/49534008/edit\">edit</a> your question and put all clarifications <i>there</i>"}, {"owner": {"reputation": 868, "user_id": 6022274, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06c83ad18e5255b126aca74fff0af330?s=128&d=identicon&r=PG&f=1", "display_name": "Bromind", "link": "https://stackoverflow.com/users/6022274/bromind"}, "edited": false, "score": 0, "creation_date": 1522239083, "post_id": 49534008, "comment_id": 86074622, "body": "its not <i>my</i> question, I don&#39;t think I can edit it :-) [addendum] my bad, its not my question, but I actually can edit it"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 868, "user_id": 6022274, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06c83ad18e5255b126aca74fff0af330?s=128&d=identicon&r=PG&f=1", "display_name": "Bromind", "link": "https://stackoverflow.com/users/6022274/bromind"}, "edited": false, "score": 1, "creation_date": 1522239209, "post_id": 49534008, "comment_id": 86074692, "body": "@Bromind oh sorry, I didn&#39;t notice."}, {"owner": {"reputation": 1253, "user_id": 4733879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5iiSX.png?s=128&g=1", "display_name": "Filnor", "link": "https://stackoverflow.com/users/4733879/filnor"}, "edited": false, "score": 0, "creation_date": 1522240681, "post_id": 49534008, "comment_id": 86075803, "body": "Rather than edit the question to add the solution, post it as answer! <a href=\"https://meta.stackoverflow.com/a/250208/4733879\">Answering your own question is not forbidden</a>, but <a href=\"https://stackoverflow.com/help/self-answer\">officially encouraged</a>. (there is even an option to answer the question directly at the <a href=\"https://stackoverflow.com/questions/ask\">Ask a Question</a> page)"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1522238994, "post_id": 49534089, "comment_id": 86074544, "body": "<code>convert</code> is recursive."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1522239175, "post_id": 49534089, "comment_id": 86074673, "body": "@WeatherVane yes, it is recursive, so what?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1522239280, "post_id": 49534089, "comment_id": 86074749, "body": "As commented by @Bromind, each power of 10 represents a binary digit <code>0</code> or <code>1</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1522239435, "post_id": 49534089, "comment_id": 86074868, "body": "Conclusion: the <code>convert</code> function is correct and the answer addresses all problems the OP experienced."}, {"owner": {"reputation": 1697, "user_id": 865150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f4de71a5b13764353e5443b215bfe34?s=128&d=identicon&r=PG", "display_name": "S. N", "link": "https://stackoverflow.com/users/865150/s-n"}, "edited": false, "score": 0, "creation_date": 1522240617, "post_id": 49534089, "comment_id": 86075748, "body": "thanks I made some improvements, however, the binary is not of the correct length."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1697, "user_id": 865150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f4de71a5b13764353e5443b215bfe34?s=128&d=identicon&r=PG", "display_name": "S. N", "link": "https://stackoverflow.com/users/865150/s-n"}, "edited": false, "score": 0, "creation_date": 1522240678, "post_id": 49534089, "comment_id": 86075797, "body": "@S.N what do you mean by &quot;not of the correct length? Can you show an example of what you get and what you expect?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1697, "user_id": 865150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f4de71a5b13764353e5443b215bfe34?s=128&d=identicon&r=PG", "display_name": "S. N", "link": "https://stackoverflow.com/users/865150/s-n"}, "edited": false, "score": 0, "creation_date": 1522241192, "post_id": 49534089, "comment_id": 86076236, "body": "@S.N as your numbers go from 0 to 15, you maybe you just need <code>%04d</code> instead of <code>%d</code>, this will display the number with 4 digits including leading zeros if necessary"}, {"owner": {"reputation": 1697, "user_id": 865150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f4de71a5b13764353e5443b215bfe34?s=128&d=identicon&r=PG", "display_name": "S. N", "link": "https://stackoverflow.com/users/865150/s-n"}, "edited": false, "score": 0, "creation_date": 1522241580, "post_id": 49534089, "comment_id": 86076533, "body": "@MichaelWalz I accepted your answer and thanks a lot again."}, {"owner": {"reputation": 1697, "user_id": 865150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f4de71a5b13764353e5443b215bfe34?s=128&d=identicon&r=PG", "display_name": "S. N", "link": "https://stackoverflow.com/users/865150/s-n"}, "edited": false, "score": 0, "creation_date": 1522241666, "post_id": 49534089, "comment_id": 86076618, "body": "@MichaelWalz only thiong I dont undertsnad is this, why has to be argv[2] but not argv[1], this part I really dont get and I dont know how to make that on rasbperrypi"}, {"owner": {"reputation": 1697, "user_id": 865150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f4de71a5b13764353e5443b215bfe34?s=128&d=identicon&r=PG", "display_name": "S. N", "link": "https://stackoverflow.com/users/865150/s-n"}, "edited": false, "score": 0, "creation_date": 1522242223, "post_id": 49534089, "comment_id": 86077031, "body": "@MichaelWalz so the vlue of bin for input 3 is 11 not 0011, but in the print section it makes it to 0011, but if I want to use that binary somewhere else its still 11. is there any otehr way that I fix this issue?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1697, "user_id": 865150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f4de71a5b13764353e5443b215bfe34?s=128&d=identicon&r=PG", "display_name": "S. N", "link": "https://stackoverflow.com/users/865150/s-n"}, "edited": false, "score": 0, "creation_date": 1522245141, "post_id": 49534089, "comment_id": 86079333, "body": "@S.N the number <code>11</code> is the number <code>11</code>. <code>0011</code> or <code>0000011</code> are just different representations of the same number. Maybe you want to work with strings instead of numbers? Concerning <code>argv[2]</code> look at the updated answer, it is of course <code>argv[1]</code> and not <code>argv[2]</code>, my bad."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 5, "last_activity_date": 1522245170, "last_edit_date": 1522245170, "creation_date": 1522238697, "answer_id": 49534089, "question_id": 49534008, "link": "https://stackoverflow.com/questions/49534008/c-int-to-binary/49534089#49534089", "title": "C int to binary", "body": "<p>You have the wrong format specifier here:</p>\n\n<pre><code>printf(\"Binary is: %s \\n\", convert(v));\n</code></pre>\n\n<p><code>convert</code> returns an <code>int</code> but <code>%s</code> requires a <code>char*</code>.</p>\n\n<p>You need:</p>\n\n<pre><code>printf(\"Binary is: %d \\n\", convert(v));\n                // ^----\n</code></pre>\n\n<p>And the first argument passed to the program is <code>argv[1]</code>, not <code>argv[2]</code></p>\n\n<p>Therefore:</p>\n\n<pre><code>printf(\"the number is:%s \\n\", argv[1]);\n                                // ^----\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int v = atoi(argv[1]);\n               // ^----\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1697, "user_id": 865150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f4de71a5b13764353e5443b215bfe34?s=128&d=identicon&r=PG", "display_name": "S. N", "link": "https://stackoverflow.com/users/865150/s-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1522241544, "creation_date": 1522241544, "answer_id": 49535098, "question_id": 49534008, "link": "https://stackoverflow.com/questions/49534008/c-int-to-binary/49535098#49535098", "title": "C int to binary", "body": "<p>here is the answer to my question:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint convert(int dec)\n{\n    if (dec == 0)\n    {\n        printf(\"Base c\\n\");\n        return 0;\n    }\n    else\n    {\n        printf(\"Rec call\\n\");\n        return ((dec % 2) + 10 * convert(dec / 2));\n    }\n}\n\nint main(int argc, char *argv[]) \n{\n    // argc is number of arguments given including a.out in command line\n    // argv is a list of string containing command line arguments\n\n    int v = atoi(argv[2]);\n    printf(\"the number is:%d \\n\", v);\n\n\n    int bin = 0;\n\n    if(v &gt;= 0 &amp;&amp; v &lt;= 15){\n        printf(\"Correct input \\n\");\n        bin = convert(v);\n        printf(\"Binary is: %04d \\n\", bin);\n    }\n    else{\n        printf(\"Inorrect input, number cant be accepted\");\n    }\n}                                                       \n</code></pre>\n\n<p>the input: <code>$./a.out 3</code>\nthe output:</p>\n\n<pre><code>the number is:3                                                                                                                    \nCorrect input                                                                                                                      \nRec call                                                                                                                           \nRec call                                                                                                                           \nBase c                                                                                                                             \nBinary is: 0011\n</code></pre>\n"}], "owner": {"reputation": 1697, "user_id": 865150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8f4de71a5b13764353e5443b215bfe34?s=128&d=identicon&r=PG", "display_name": "S. N", "link": "https://stackoverflow.com/users/865150/s-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 49534089, "answer_count": 2, "score": 1, "last_activity_date": 1522245170, "creation_date": 1522238469, "last_edit_date": 1522240591, "question_id": 49534008, "link": "https://stackoverflow.com/questions/49534008/c-int-to-binary", "title": "C int to binary", "body": "<p>I am making a c program, that has to later run on the raspberry pi, the program gets an argument from the command line, determines if its value is between 0 and 15. If so convert it to binary and return it.</p>\n\n<p>and if not, just printing an error message.</p>\n\n<p>this is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint convert(int dec)\n{\n    if (dec == 0)\n    {\n        return 0;\n    }\n    else\n    {\n        return (dec % 2 + 10 * convert(dec / 2));\n    }\n}\n\nint main(int argc, char *argv[]) \n{\n    // argc is number of arguments given including a.out in command line\n    // argv is a list of string containing command line arguments\n\n    printf(\"the number is:%s \\n\", argv[2]);\n\n    int v = atoi(argv[2]);\n    int bin = 0;\n\n    if(v &gt;= 0 &amp;&amp; v &lt;= 15){\n        printf(\"Correct input\");\n        bin = convert(v);\n        printf(\"Binary is: %s \\n\", convert(v));\n    }\n    else{\n        printf(\"Inorrect input, number cant be accepted\");\n    }\n}        \n</code></pre>\n\n<p>when I compile this online <a href=\"https://www.onlinegdb.com/online_c_compiler\" rel=\"nofollow noreferrer\">here</a>, with <code>$./a.out 1</code>, I get the following error:</p>\n\n<blockquote>\n  <p>the number is:1<br>\n  Segmentation fault</p>\n</blockquote>\n\n<p>input: </p>\n\n<pre><code>./a.out 12\n</code></pre>\n\n<p>expected output: </p>\n\n<pre><code>the number is:12\nCorrect inputBinary is: 1100\n</code></pre>\n\n<p>The convert method I found on stackoverflow. </p>\n\n<p>***edit my new answer:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint convert(int dec)\n{\n    if (dec == 0)\n    {\n        printf(\"Base c\\n\");\n        return 0;\n    }\n    else\n    {\n        printf(\"Rec call\\n\");\n        return ((dec % 2) + 10 * convert(dec / 2));\n    }\n}\n\nint main(int argc, char *argv[]) \n{\n    // argc is number of arguments given including a.out in command line\n    // argv is a list of string containing command line arguments\n\n    int v = atoi(argv[2]);\n    printf(\"the number is:%d \\n\", v);\n\n\n    int bin = 0;\n\n    if(v &gt;= 0 &amp;&amp; v &lt;= 15){\n        printf(\"Correct input \\n\");\n        bin = convert(v);\n        printf(\"Binary is: %d \\n\", bin);\n    }\n    else{\n        printf(\"Inorrect input, number cant be accepted\");\n    }\n}     \n</code></pre>\n\n<p>the out put:</p>\n\n<pre><code>the number is:3                                                                                                                    \nCorrect input                                                                                                                      \nRec call                                                                                                                           \nRec call                                                                                                                           \nBase c                                                                                                                             \nBinary is: 11   \n</code></pre>\n\n<p>how ever the binary has to be 0011 for 3. this part is what I am working on now.</p>\n"}, {"tags": ["c", "unions"], "comments": [{"owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "edited": false, "score": 4, "creation_date": 1522238107, "post_id": 49533740, "comment_id": 86073898, "body": "Looks like <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">XY</a> problem."}, {"owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "edited": false, "score": 1, "creation_date": 1522238213, "post_id": 49533740, "comment_id": 86073967, "body": "You can just get pointer to the <code>x</code> field."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "edited": false, "score": 0, "creation_date": 1522238503, "post_id": 49533740, "comment_id": 86074179, "body": "@freestyle A pointer to <code>x</code> is exactly what I want to avoid. Because as this is a simplification, I have quite more variables like <code>x</code>so then I would need a pointer to each element."}, {"owner": {"reputation": 3392, "user_id": 7175117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tfz44.png?s=128&g=1", "display_name": "freestyle", "link": "https://stackoverflow.com/users/7175117/freestyle"}, "edited": false, "score": 0, "creation_date": 1522238727, "post_id": 49533740, "comment_id": 86074342, "body": "Then, probably you will not get a good answer, since you did not accurately describe your problem."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522242448, "post_id": 49533740, "comment_id": 86077196, "body": "XY problem. Use an outer <code>struct</code> for the common filds and a <code>union</code>or the different ones."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522242834, "post_id": 49533740, "comment_id": 86077500, "body": "@Olaf sadly this is impossible as I have no influence on the definition of the structs and unions."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522243575, "post_id": 49533740, "comment_id": 86078092, "body": "@KamiKaze: Then you&#39;re lost. Either have that fixed or get rid of that software. Or you still could have an XY problem. State what you <b>want</b> to do, not <b>how</b>. Strangely you accepted the answer which exactly recomends to change the structures, which you now claim you can&#39;t."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522243982, "post_id": 49533740, "comment_id": 86078384, "body": "@Olaf I am not entirely lost :). this would just have been a more elegant solution to a problem that arrises in an&quot;IDE&quot; we use for programming special devices. It kinda supports c for the programmer (together with structered text and FBD). But limits the use of certain features natural to c and also has quite a lot of code generated in the background. So for you to understand the whole problem I would have to write multiple pages of explanation or you would have to know this (quite exotic) tool by yourself. The answers I got are sufficient to know that I have to do it the uglier way."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522244119, "post_id": 49533740, "comment_id": 86078478, "body": "Sidenote: any reason you use <code>static</code> pointers in your function? And why do you think getting a pointer to each <code>struct</code> is impossible? Sorry, but it looks like you are in urgent need of a good C book."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522244175, "post_id": 49533740, "comment_id": 86078521, "body": "If it is not C, don&#39;t use the C tag! Read the tag-wiki to see what the tag implies (and read the standard to see what the language is). I know such tools well enough to avoid them like hell. What you state is just the tip of the iceberg of the problems they cause. There never is a reason to use a tool which generates invalid/problematic code and imposes such restrictions."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522245132, "post_id": 49533740, "comment_id": 86079319, "body": "@Olaf as I wrote this is Pseudocode. it is not meant to be used this way. The static should just get the pointer out of the scope of the if/else. I did not state that a pointer to a struct is impossible. I stated that I assume it is impossible to get a variable with context dependent type in c. Before infering a lack of knowledge on my part, please read the (allready answered) question more thoroughly. Also this question is just about C. I was hoping for a way to handle unions I didn&#39;t know of.  That I have no influence on some parts of the code is not uncommon and doesn&#39;t make it non-C"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522245228, "post_id": 49533740, "comment_id": 86079404, "body": "&quot;The static should just get the pointer out of the scope of the if/else&quot; - <code>static</code> has nothing to do with scope. As I wrote: C book!"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522245421, "post_id": 49533740, "comment_id": 86079609, "body": "@Olaf Let us <a href=\"https://chat.stackoverflow.com/rooms/167737/discussion-between-kami-kaze-and-olaf\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1522238770, "post_id": 49533967, "comment_id": 86074375, "body": "Thanks for the confirmation of what I thought. I have no influence on the order in those struct as they get generated at (right before) compile time."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1522238359, "creation_date": 1522238359, "answer_id": 49533967, "question_id": 49533740, "link": "https://stackoverflow.com/questions/49533740/accessing-the-same-member-of-different-structs/49533967#49533967", "title": "accessing the same member of different structs", "body": "<p>You are correct, it is not possible. The type of <code>ptr_to_struct</code> is a secondary problem here. The primary problem is that the address of <code>x</code> inside <code>uni</code> changes based on which <code>struct</code> is \"active\" inside the <code>union</code>:</p>\n\n<ul>\n<li>If <code>a_</code> is \"active\", the offset of <code>x</code> from the top of the <code>union</code> is zero</li>\n<li>If <code>b_</code> is \"active\", the offset of <code>x</code> from the top of the <code>union</code> is <code>sizeof(float)</code> plus possible additional offset for field alignment</li>\n</ul>\n\n<p>One solution to this problem would be to put <code>x</code> on the same spot in the initial sequence of fields in both <code>struct</code>s:</p>\n\n<pre><code>typedef struct a_t {\n  int x;\n  int irrelevant;\n} a_;\n\ntypedef struct b_t {\n  int x; // Moved to the top\n  float also_irrelevant;\n} b_;\n</code></pre>\n\n<p>Now that <code>x</code> occupies the same position, <a href=\"https://stackoverflow.com/a/20752261/335858\">C makes a guarantee</a> that the address of <code>x</code> in the union is going to be the same if you access it through <code>a.x</code> or through <code>b.x</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1522238566, "post_id": 49533980, "comment_id": 86074225, "body": "Information about the type of the union is available, but not directly in the union."}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1522239366, "post_id": 49533980, "comment_id": 86074802, "body": "@KamiKaze: Then you can write a function which takes in the union and the type information and returns x.  But of course you&#39;ll need one such function for each variable you want to access."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1522239607, "post_id": 49533980, "comment_id": 86074994, "body": "That is basically what I have right now,but it seems clumsy, hence I asked for another solution. Thank you"}], "tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 1, "last_activity_date": 1522238390, "creation_date": 1522238390, "answer_id": 49533980, "question_id": 49533740, "link": "https://stackoverflow.com/questions/49533740/accessing-the-same-member-of-different-structs/49533980#49533980", "title": "accessing the same member of different structs", "body": "<p>It is impossible.  C does not have reflection, so the \"name\" x is not available at runtime.  Nor do you have any data within the structs that indicates which type a given instance is (i.e. it's not a <a href=\"https://en.wikipedia.org/wiki/Tagged_union\" rel=\"nofollow noreferrer\">\"tagged union\"</a>).</p>\n"}], "owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 49533967, "answer_count": 2, "score": 1, "last_activity_date": 1522246840, "creation_date": 1522237709, "last_edit_date": 1522246840, "question_id": 49533740, "link": "https://stackoverflow.com/questions/49533740/accessing-the-same-member-of-different-structs", "title": "accessing the same member of different structs", "body": "<p><strong>Disclaimer:</strong> The following is trying to simplify the problem as much as possible. Originally the variable <code>int x</code> is a struct but I would figure that this is not important here.</p>\n\n<p>Assume we have two structs in a union (I have no influence on this)</p>\n\n<pre><code>typedef struct a_t {\n  int x;\n  int irrelevant;\n} a_;\n\ntypedef struct b_ {\n  float also_irrelevant;\n  int x;\n} b_;\n\ntypedef union uni_t{\n  a_ a;\n  b_ b;\n} uni;\n</code></pre>\n\n<p>Is it possible to access <code>x</code> in both structures by the same statement like <code>ptr_to_struct-&gt;x</code>? But afaik the pointer needs the correct type at compile time. So a dependend declaration similar to this Pseudocode</p>\n\n<pre><code>if (union contains a_)\n{\n  a_ * ptr_to_struct; // but outside of this scope\n  ptr_to_struct = &amp;(uni.a);\n}\nelse \n{\n  b_ * ptr_to_struct; // but outside of this scope\n  ptr_to_struct = &amp;(uni.b);\n}\n</code></pre>\n\n<p>is impossible as far as I know.</p>\n\n<p>Are there possibilties to get a \"general\" access to the variable <code>x</code> independent of the current state of the union?</p>\n"}, {"tags": ["javascript", "c", "webassembly"], "comments": [{"owner": {"reputation": 1035, "user_id": 2854284, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a66cede09ad91417502051a3a146210a?s=128&d=identicon&r=PG", "display_name": "curiousdannii", "link": "https://stackoverflow.com/users/2854284/curiousdannii"}, "edited": false, "score": 0, "creation_date": 1522761969, "post_id": 49533435, "comment_id": 86269501, "body": "What&#39;s your setup code? Because that&#39;s not a complete example. Still looks like it should work though..."}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 5422315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fd10efd085490b96a265a27ba57100a?s=128&d=identicon&r=PG&f=1", "display_name": "user309043", "link": "https://stackoverflow.com/users/5422315/user309043"}, "is_accepted": true, "score": 0, "last_activity_date": 1523606682, "creation_date": 1523606682, "answer_id": 49812145, "question_id": 49533435, "link": "https://stackoverflow.com/questions/49533435/web-assembly-integer-values-wrong/49812145#49812145", "title": "Web assembly - integer values wrong", "body": "<p>It turns out that if you are assigning the variables to an integer array in C then you must pass them using HEAP32 or some other integer heap. So in this case the final line becomes:</p>\n\n<pre><code>var value = Module[\"HEAP32\"][pointer_return/Int32Array.BYTES_PER_ELEMENT];\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 5422315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fd10efd085490b96a265a27ba57100a?s=128&d=identicon&r=PG&f=1", "display_name": "user309043", "link": "https://stackoverflow.com/users/5422315/user309043"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 49812145, "answer_count": 1, "score": -1, "last_activity_date": 1523606682, "creation_date": 1522236852, "question_id": 49533435, "link": "https://stackoverflow.com/questions/49533435/web-assembly-integer-values-wrong", "title": "Web assembly - integer values wrong", "body": "<p>In my web assembly application I can not seem to get integers to pass between javascript and c correctly.</p>\n\n<pre><code>// C\nint *g_id; // Pointer to array of integers (IDs) {0,1,2,3,4,5,6...}\n\nint test(int id) {\n  for (int i = 0; i &lt; g_bufSize; i++) {\n    if (g_id[i] == id) {\n      return g_id[i];\n    }\n  }\n  return -1;\n}\n</code></pre>\n\n<p>Javascript call:</p>\n\n<pre><code>// JS\nccall(\"test\", \"number\", [\"number\"], [2]);\n</code></pre>\n\n<p>I would expect this to return the value at <code>g_id[2]</code> which is <code>2</code> but it always returns <code>-1</code>. </p>\n\n<p>If I always <code>return g_id[2]</code> then it returns a large integer like <code>184638192</code> except when <code>i</code> is <code>0</code> when it returns <code>0</code>.</p>\n\n<p>If I return a pointer to one of the array elements <code>return &amp;g_id[2]</code> then it correctly returns a pointer to the array element which I can dereference with this javascript:</p>\n\n<pre><code>// JS\nvar pointer_return = ccall(\"test\", \"number\", [\"number\"], [2]);\nvar value = Module[\"HEAPF32\"][pointer_return/Float32Array.BYTES_PER_ELEMENT];\n</code></pre>\n\n<p>This is an okay workaround. However the equality check in the C code still does not work.</p>\n\n<p>I feel like I am misunderstanding something fundamental about passing variables between the C code and JS. </p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["c", "linux", "signals"], "answers": [{"tags": [], "owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "is_accepted": true, "score": 4, "last_activity_date": 1522240178, "last_edit_date": 1522240178, "creation_date": 1522236198, "answer_id": 49533218, "question_id": 49532935, "link": "https://stackoverflow.com/questions/49532935/calling-signal-handler-again-in-itself/49533218#49533218", "title": "calling signal handler again in itself", "body": "<p>The problem is that the behaviour of <code>signal()</code> varies across UNIX versions, and has also varied historically across different versions of Linux (quoted from Linux man). Especially:</p>\n\n<blockquote>\n  <p>In the original UNIX systems, when a handler that was established using\n         signal()  was  invoked  by the delivery of a signal, the disposition of\n         the signal would be reset to SIG_DFL, and  the  system  did  not  block\n         delivery  of  further  instances  of the signal.  This is equivalent to\n         calling sigaction(2) with the following flags:</p>\n  \n  <p>sa.sa_flags = SA_RESETHAND | SA_NODEFER;</p>\n</blockquote>\n\n<p>So in such a system you have to call <code>signal()</code> again after a signal has been delivered. Because of these portability issues, the man page starts with:</p>\n\n<blockquote>\n  <p>The behavior of signal() varies across UNIX versions, and has also varied historically across different versions of Linux.   Avoid  its  use:\n        use sigaction(2) instead.  See Portability below.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 811, "user_id": 9493582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfI3b.jpg?s=128&g=1", "display_name": "Arndt Jonasson", "link": "https://stackoverflow.com/users/9493582/arndt-jonasson"}, "edited": false, "score": 1, "creation_date": 1522236539, "post_id": 49533250, "comment_id": 86072806, "body": "&quot;man 2 signal&quot; on my Ubuntu computer says &quot;SIG_IGN, SIG_DFL, or the address of a  programmer-defined  function (a &quot;signal handler&quot;)&quot;."}, {"owner": {"reputation": 811, "user_id": 9493582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfI3b.jpg?s=128&g=1", "display_name": "Arndt Jonasson", "link": "https://stackoverflow.com/users/9493582/arndt-jonasson"}, "edited": false, "score": 0, "creation_date": 1522236668, "post_id": 49533250, "comment_id": 86072893, "body": "In other words, this code is fully correct for Linux, but not necessarily on other systems."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1522237053, "post_id": 49533250, "comment_id": 86073136, "body": "&quot;Not portable&quot; isn&#39;t &quot;wrong&quot; as such. Obviously <code>sigaction</code> is preferable but glibc (Linux) has long been using BSD semantics for signals and using <code>signal</code> doesn&#39;t have any issues (other than providing lesser control compared to <code>sigaction</code>)."}, {"owner": {"reputation": 341, "user_id": 8295671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567e7c3cca19a2b988aaf7df7b0a70a9?s=128&d=identicon&r=PG&f=1", "display_name": "concurrencyboy", "link": "https://stackoverflow.com/users/8295671/concurrencyboy"}, "edited": false, "score": 0, "creation_date": 1522237616, "post_id": 49533250, "comment_id": 86073523, "body": "The code is taken from GNU. <a href=\"https://www.gnu.org/software/libc/manual/html_node/Handler-Returns.html#Handler-Returns\" rel=\"nofollow noreferrer\">gnu.org/software/libc/manual/html_node/&hellip;</a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 811, "user_id": 9493582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfI3b.jpg?s=128&g=1", "display_name": "Arndt Jonasson", "link": "https://stackoverflow.com/users/9493582/arndt-jonasson"}, "edited": false, "score": 0, "creation_date": 1522238469, "post_id": 49533250, "comment_id": 86074154, "body": "@ArndtJonasson whatever."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1522239529, "post_id": 49533250, "comment_id": 86074923, "body": "@P.P. No, <b>Linux</b> has always used and still uses <b>System V semantics</b>. Glibc uses BSD semantics with <code>_DEFAULT_SOURCE</code> - but not otherwise."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1522241588, "post_id": 49533250, "comment_id": 86076541, "body": "@AnttiHaapala Glibc provided BSD semantics even before <code>_DEFAULT_SOURCE</code> existed by default (<code>_GNU_SOURCE</code> is sufficient). At least since glibc 2.2.3 that&#39;s been the case."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1522245900, "post_id": 49533250, "comment_id": 86079968, "body": "@P.P. I read that too. The man pages say very clearly that <code>_DEFAULT_SOURCE</code> from now on, and whatever will <i>set that</i>, and you&#39;re missing my point completely. You said that It very specifically isn&#39;t the behaviour of <i>Linux</i> but of Glibc and only with flags. If compiled with any other libc implementation, all bets are off..."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1522246580, "post_id": 49533250, "comment_id": 86080514, "body": "glibc is the default libc on pretty much all Linux distros. If we are talking about a different libc, then all these macros are not quite relevant. And &quot;behaviour of Linux&quot; makes no sense without stating the libc we&#39;re talking about, either."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 2, "creation_date": 1522248193, "post_id": 49533250, "comment_id": 86081879, "body": "@P.P. of course it makes sense. Please recite your Stallman: <i>&quot;There is no system but GNU, and Linux is one of its kernels.&quot;</i>"}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 1, "last_activity_date": 1522239489, "last_edit_date": 1522239489, "creation_date": 1522236302, "answer_id": 49533250, "question_id": 49532935, "link": "https://stackoverflow.com/questions/49532935/calling-signal-handler-again-in-itself/49533250#49533250", "title": "calling signal handler again in itself", "body": "<p>To put it simply: <em>You're wrong and the code is wrong.</em> </p>\n\n<p>Or, you assume that the <code>signal</code> call is superfluous - it isn't, and exists there to make the code behave correctly on platforms that use THE other allowed <code>signal</code> semantics.</p>\n\n<p>Also, the excerpt is not about <strong>safe signal handling with <code>signal</code> function</strong>; \nit is about how to pass an event out from a signal handler - for which there is only <em>one</em> portable way - by changing a variable of type <code>volatile sig_atomic_t</code>. To write safe portable code now, you'd use the function <code>sigaction</code>.</p>\n\n<hr>\n\n<p>The Linux <a href=\"http://man7.org/linux/man-pages/man2/signal.2.html\" rel=\"nofollow noreferrer\"><code>signal(2)</code> manuals say</a>:</p>\n\n<blockquote>\n  <p>The behavior of <code>signal()</code> varies across UNIX versions, and has also\n         varied historically across different versions of Linux.  Avoid its\n         use: use <code>sigaction(2)</code> instead.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>The  only  portable  use of <code>signal()</code> is to set a signal's disposition to <code>SIG_DFL</code> or <code>SIG_IGN</code>.\n         The semantics when using <code>signal()</code> to establish a signal handler  vary  across  systems  (and\n         POSIX.1 explicitly permits this variation); <strong>do not use it for this purpose.</strong></p>\n  \n  <p><strong><em>POSIX.1 solved the portability mess by specifying <code>sigaction(2)</code>, which\n         provides explicit control of the semantics when a signal handler is\n         invoked; use that interface instead of <code>signal()</code>.</em></strong></p>\n</blockquote>\n\n<p>And</p>\n\n<blockquote>\n  <p>The situation on Linux is as follows:</p>\n  \n  <ul>\n  <li>The kernel's signal() system call provides System V semantics.</li>\n  <li>By default, in glibc 2 and later, the <code>signal()</code> wrapper function does not invoke the kernel\n       system call.  Instead, it calls <code>sigaction(2)</code> using flags that supply BSD semantics.   This\n       default  behavior  is  provided  as  long  as  a  suitable  feature test macro is defined:\n       <code>_BSD_SOURCE</code> on glibc 2.19 and earlier or <code>_DEFAULT_SOURCE</code> in glibc  2.19  and  later.   (By\n       default,  these  macros  are  defined; see feature_test_macros(7) for details.)  If such a\n       feature test macro is not defined, then <code>signal()</code> provides System V semantics.</li>\n  </ul>\n</blockquote>\n\n<p>Now the question is <em>which one is defined</em>. If you compile with <code>-std=c11</code> you will get the <em>resetting semantics</em>, because it doesn't set the <code>_DEFAULT_SOURCE</code>! And then you need to rearm the <code>SIG_ALARM</code> <em>every time</em>.</p>\n\n<p>The purpose of resetting the signal in the signal handler is that some Unixen clear the handler whenever the signal is triggered. There are also other interesting edge cases - the only reason to use this function is that it is in the <em>C standard</em>, but its behaviour isn't well-specified there either. <strong>Never use it to set a custom signal handler.</strong></p>\n\n<hr>\n\n<p>As the code says, <strong>both</strong> of these <code>signal</code> calls should be frowned upon. Good modern code <S>should</S>must use <code>sigaction</code> instead, for example</p>\n\n<pre><code>struct sigaction newsigfunc;\nnewsigfunc.sa_handler = catch_alarm;\nsigemptyset(&amp;newsigfunc.sa_mask);\nnewsigfunc.sa_flags = 0;\n\nsigaction(SIGALRM, &amp;newsigfunc, NULL);\n</code></pre>\n\n<p><code>sigaction</code>, unlike <code>signal</code>, will guarantee portability here; wherever it doesn't exist, <code>signal</code> is likely to misbehave too...</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 2489219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2d1c8573ad8f2d9206e555c8add7ca0?s=128&d=identicon&r=PG", "display_name": "jcb00s", "link": "https://stackoverflow.com/users/2489219/jcb00s"}, "is_accepted": false, "score": 0, "last_activity_date": 1522318973, "creation_date": 1522318973, "answer_id": 49553635, "question_id": 49532935, "link": "https://stackoverflow.com/questions/49532935/calling-signal-handler-again-in-itself/49553635#49553635", "title": "calling signal handler again in itself", "body": "<p>The short answer is the original Unix implementation would <strong>reset</strong> the signal handler to it's default value after signal is received. The code here simply  demonstrate this.</p>\n\n<pre><code>signal (sig, catch_alarm); \n</code></pre>\n"}], "owner": {"reputation": 341, "user_id": 8295671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567e7c3cca19a2b988aaf7df7b0a70a9?s=128&d=identicon&r=PG&f=1", "display_name": "concurrencyboy", "link": "https://stackoverflow.com/users/8295671/concurrencyboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1577, "favorite_count": 2, "accepted_answer_id": 49533218, "answer_count": 3, "score": 2, "last_activity_date": 1522318973, "creation_date": 1522235346, "question_id": 49532935, "link": "https://stackoverflow.com/questions/49532935/calling-signal-handler-again-in-itself", "title": "calling signal handler again in itself", "body": "<p>I see a code illustrating how to do safe signal handling. A point I don't understand that why the signal handler calls again <code>signal (sig, catch_alarm);</code>. What's the reason to do that? Without it, the code works too.</p>\n\n<pre><code>#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\n\n/* This flag controls termination of the main loop. */\nvolatile sig_atomic_t keep_going = 1;\n\n/* The signal handler just clears the flag and re-enables itself. */\nvoid\ncatch_alarm (int sig)\n{\n    keep_going = 0;\n    signal (sig, catch_alarm);   //  &lt;----- ???\n}\n\nvoid\ndo_stuff (void)\n{\n    puts (\"Doing stuff while waiting for alarm....\");\n}\n\nint\nmain (void)\n{\n    /* Establish a handler for SIGALRM signals. */\n    signal (SIGALRM, catch_alarm);\n\n    /* Set an alarm to go off in a little while. */\n    alarm (2);\n\n    /* Check the flag once in a while to see when to quit. */\n    while (keep_going)\n        do_stuff ();\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c", "terminal", "autocomplete"], "answers": [{"tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": true, "score": 1, "last_activity_date": 1522238010, "creation_date": 1522238010, "answer_id": 49533837, "question_id": 49532797, "link": "https://stackoverflow.com/questions/49532797/change-terminal-behavior-for-autocomplete/49533837#49533837", "title": "Change terminal behavior for autocomplete", "body": "<p>You need to use an OS-specific way to control the terminal, like the <a href=\"https://docs.microsoft.com/en-us/windows/console/\" rel=\"nofollow noreferrer\">Console API for Windows</a>.</p>\n\n<p>There are also cross-platform libraries that you can use as well, like the <a href=\"https://www.gnu.org/software/ncurses/ncurses.html\" rel=\"nofollow noreferrer\">ncurses library</a>.</p>\n\n<p>Read also about <a href=\"https://en.wikipedia.org/wiki/Terminal_capabilities\" rel=\"nofollow noreferrer\">Terminal capabilities</a> for more information.</p>\n"}], "owner": {"reputation": 23, "user_id": 9563570, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "xyz123", "link": "https://stackoverflow.com/users/9563570/xyz123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 49533837, "answer_count": 1, "score": 2, "last_activity_date": 1522238010, "creation_date": 1522234884, "question_id": 49532797, "link": "https://stackoverflow.com/questions/49532797/change-terminal-behavior-for-autocomplete", "title": "Change terminal behavior for autocomplete", "body": "<p>In the terminal for my autocomplete implementation, the commands are displaying after pressing the <code>ENTER</code>.But I want to change the terminal behavior such that the commands will be displayed without pressing enter.</p>\n\n<p>My question is how to change the terminal settings for displaying the commands when I press <code>TAB</code> without pressing <code>ENTER</code>?</p>\n"}, {"tags": ["c", "arrays", "if-statement", "random"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1522234633, "post_id": 49532670, "comment_id": 86071504, "body": "<code>srand((unsigned)time(NULL));</code> is in the wrong place :please read up on it!"}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 2, "creation_date": 1522234723, "post_id": 49532670, "comment_id": 86071581, "body": "If <code>o == &quot;Heads&quot;</code> doesn&#39;t make sense: <code>o</code> isn&#39;t a string (it is an array of strings) and, in any event, that isn&#39;t how you test strings for equality."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1522234808, "post_id": 49532670, "comment_id": 86071638, "body": "<a href=\"https://stackoverflow.com/questions/7343833/srand-why-call-it-only-once\">srand() \u2014 why call it only once?</a>."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1522234831, "post_id": 49532670, "comment_id": 86071650, "body": "You need to store the results of <code>cool()</code> somewhere and then <code>o == &quot;Heads&quot; becomes </code>cool_result = 0`  or something"}, {"owner": {"reputation": 45919, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1522235236, "post_id": 49532670, "comment_id": 86071920, "body": "In the internal logic of the program just use <code>0</code> and <code>1</code> for <code>&quot;Heads&quot;</code> and <code>&quot;Tails&quot;</code>, reserving strings for input/output. Don&#39;t convert input <code>&#39;h&#39;</code> to <code>&quot;Heads&quot;</code> -- convert it to either 0 or 1 (depending on which one you want to represent heads). Something like <code>guess = a == &#39;h&#39; ? 0 : 1</code>; will convert a 1-character input to either <code>0</code> or <code>1</code>."}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 0, "last_activity_date": 1522235237, "creation_date": 1522235237, "answer_id": 49532900, "question_id": 49532670, "link": "https://stackoverflow.com/questions/49532670/how-do-i-implement-my-randomly-generated-word-into-a-condition-c/49532900#49532900", "title": "How do I implement my randomly generated word into a condition? - C", "body": "<p>You must save the value returned by <code>cool()</code> in a variable, like:</p>\n\n<pre><code>int res = cool();\nprintf(\"%s\\n\",o[res]); //random heads or tails generated\n</code></pre>\n\n<p>then your if-statement can be something like:</p>\n\n<pre><code>if ((a == 'h' || a == 'H') &amp;&amp; res == 0)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>if (toupper(a) == 'H' &amp;&amp; res == 0)\n</code></pre>\n\n<p>If you prefer to compare with strings, you can do it using <code>strcmp</code> like:</p>\n\n<pre><code>if ((a == 'h' || a == 'H') &amp;&amp; (strcmp(o[res], \"Heads\") == 0))\n</code></pre>\n\n<p>Notice that strings can <strong>not</strong> be compared using <code>==</code></p>\n"}], "owner": {"reputation": 1, "user_id": 9559385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c16cf7681fab9eb606a017e630d73101?s=128&d=identicon&r=PG&f=1", "display_name": "bobby-hg", "link": "https://stackoverflow.com/users/9559385/bobby-hg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1522250553, "accepted_answer_id": 49532900, "answer_count": 1, "score": -1, "last_activity_date": 1522235237, "creation_date": 1522234533, "question_id": 49532670, "link": "https://stackoverflow.com/questions/49532670/how-do-i-implement-my-randomly-generated-word-into-a-condition-c", "closed_reason": "Duplicate", "title": "How do I implement my randomly generated word into a condition? - C", "body": "<p>I am creating simple heads or tails game, however, I am trying to come up with a condition where if you insert \"h\" and the randomly generated answer is heads, the code prints that you get the answer correct. The randomly generated heads or tails is working fine, however, I do not know how to refer to the result of the flip, in the if condition at the end of my code.</p>\n\n<p>Here's my code so far:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;unistd.h&gt; //for sleep function\n#include &lt;stdlib.h&gt; //for array\n#include &lt;time.h&gt; //for random array\n\n    //Array \n  int cool(void) {\n    int i;\n    int ht;\n\n    i = 2;\n    ht = 0;\n    srand((unsigned)time(NULL));\n    ht = rand() % i;\n    return ht;\n}\n\nint main(int argc, char **argv)\n</code></pre>\n\n<p>And the second part</p>\n\n<pre><code>const char* o[2] = { \n     \"Heads\", \"Tails\"       //Where the words heads and tails are stored \n     };\n\n//Coin Flip begins\n    printf(\"\\nType 'h' for heads &amp; 't' for tails\\n\");\n    printf(\"\\nHeads or Tails? \\n\");\n    scanf(\"%c\", &amp;a);\n    //sleep(3);\n    printf(\"%s\\n\",o[cool()]); //random heads or tails generated\n    //sleep(3);\n\n\n    if ( o == \"Heads\" &amp;&amp; a == 'h' || o== \"Heads\" a == 'H' )\n    {\n        printf(\"\\nCorrect!\\n\");\n\n    }\n\n    return 0;\n\n}\n</code></pre>\n\n<p>Apologies if this has been asked before or I have asked incorrectly. I am new to coding and stack so feedback would be helpful</p>\n"}, {"tags": ["c", "winapi", "file-copying"], "comments": [{"owner": {"reputation": 852, "user_id": 1917004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e12a0abb82fac3b2293597967a7ec90d?s=128&d=identicon&r=PG", "display_name": "ctrl-shift-esc", "link": "https://stackoverflow.com/users/1917004/ctrl-shift-esc"}, "edited": false, "score": 1, "creation_date": 1522231353, "post_id": 49531475, "comment_id": 86069084, "body": "Can you explain in more details what you are trying to achieve? Also can you add an <a href=\"https://stackoverflow.com/help/mcve\">MVCE</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1522231728, "post_id": 49531475, "comment_id": 86069385, "body": "Yes, you need to write a loop. Did you try that? If yes, please tell us what the exact problem is? Not sure if you need to use <code>malloc</code>. The question is quite unclear. We need more information. Please read this: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 1281, "user_id": 8557381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aoh1w.jpg?s=128&g=1", "display_name": "Novy", "link": "https://stackoverflow.com/users/8557381/novy"}, "edited": false, "score": 1, "creation_date": 1522232021, "post_id": 49531475, "comment_id": 86069600, "body": "If you put your loop it would be clearer  @Biswapriyo. For now we are trying to guess."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1522232088, "post_id": 49531475, "comment_id": 86069651, "body": "<code>wchar_t name[3]</code>: <code>name</code> is not an array of three file names but an array of three chars. It seems you should learn some basics of C before proceeding with your program"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1522232459, "post_id": 49531475, "comment_id": 86069935, "body": "If you want to copy multiple files, use the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb775771.aspx\" rel=\"nofollow noreferrer\">IFileOperation</a> interface. To use the interface successfully, you need to stop trying to learn programming by guessing at what your code does."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1522234113, "post_id": 49531475, "comment_id": 86071143, "body": "Your example invokes undefined behaviour. Your array only provide enough memory to hold the folder. Adding any further characters using <code>wscat_s</code> is accessing memory out of bounds. You should specify a length for your array definition."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1522234122, "post_id": 49531475, "comment_id": 86071151, "body": "You problem is not that you aren&#39;t able to copy multiple files, it&#39;s that you don&#39;t let know how to even represent multiple file names in a data structure."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1522234943, "post_id": 49531475, "comment_id": 86071725, "body": "Generally, VLA are faster than heap allocation. What&#39;s most suitable here is impossible to tell, there&#39;s not enough context."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1522235421, "post_id": 49531475, "comment_id": 86072059, "body": "@Biswapriyo - Stack or heap allocation takes zero time compared to copying a file on disk. So don&#39;t bother optimizing the fast part."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1522239506, "post_id": 49531475, "comment_id": 86074903, "body": "Great, even more undefined behavior! Now you are writing outside array bounds of read-only arrays. You really need to stop guessing. Get a few introductory books on C, and take it from there. Tutorials, or - worse - online video courses, won&#39;t help you in building a solid foundation. This is what you need."}], "answers": [{"tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 1, "last_activity_date": 1522467000, "creation_date": 1522467000, "answer_id": 49583943, "question_id": 49531475, "link": "https://stackoverflow.com/questions/49531475/how-to-copy-multiple-files-with-copyfile-function/49583943#49583943", "title": "How to copy multiple files with CopyFile function?", "body": "<p>After you fix the errors, your code is copying the file to itself. It boils down to this:</p>\n\n<pre><code>const wchar_t* file[3] = { L\"\\\\abc.txt\", L\"\\\\def.txt\", L\"\\\\ghi.txt\" };\nfor(int i = 0; i &lt; _countof(file); i++)\n    CopyFile(file[i], file[i], TRUE);\n</code></pre>\n\n<p>It's just copying <code>\"\\\\abc.txt\"</code> to <code>\"\\\\abc.txt\"</code>, and <code>\"\\\\def.txt\"</code> to <code>\"\\\\def.txt\"</code>, etc. </p>\n\n<p>Presumably your intention is to copy multiple files from one directory to another directory. For example copy <code>\"abc.txt\"</code> to <code>\"c:\\\\target\\\\abc.txt\"</code>, etc.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;windows.h&gt;\n\nint main(void)\n{\n    const wchar_t* files[3] = { L\"1.txt\", L\"2.txt\", L\"3.txt\" };\n\n    wchar_t *directory = L\"c:\\\\target\";\n    wchar_t dst[MAX_PATH] = { 0 };\n    for(int i = 0; i &lt; _countof(files); i++)\n    {\n        swprintf(dst, _countof(dst), L\"%ls\\\\%ls\", directory, files[i]);\n        CopyFileW(files[i], dst, TRUE);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Note that I changed the source to <code>\"abc.txt\"</code> and changed the format specifier in <code>swprintf</code></p>\n\n<p>In a practical application you may want to copy <code>\"c:\\\\src\\\\1.txt\"</code> to <code>\"c:\\\\dst\\\\1.txt\"</code>, like this code:</p>\n\n<pre><code>#define UNICODE\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;Shlwapi.h&gt;\n\n#pragma comment(lib, \"Shlwapi.lib\")//Add library (Visual Studio specific)\n\nint main(void)\n{\n    const wchar_t* files[3] =\n        { L\"c:\\\\src\\\\1.txt\", L\"c:\\\\src\\\\2.txt\", L\"c:\\\\src\\\\3.txt\" };\n\n    wchar_t *directory = L\"c:\\\\dst\";\n    wchar_t dst[MAX_PATH] = { 0 };\n\n    if(!PathFileExists(directory))\n    {\n        wprintf(L\"path error\\n\");\n        return 0;\n    }\n\n    for(int i = 0; i &lt; _countof(files); i++)\n    {\n        swprintf(dst, _countof(dst), L\"%ls\\\\%ls\", directory, PathFindFileName(files[i]));\n        //CopyFile(files[i], dst, TRUE);\n        wprintf(L\"copy %s to %s\\n\", files[i], dst);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1911, "user_id": 8928481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/orscP.png?s=128&g=1", "display_name": "Biswapriyo", "link": "https://stackoverflow.com/users/8928481/biswapriyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 49583943, "answer_count": 1, "score": -2, "last_activity_date": 1522467000, "creation_date": 1522231042, "last_edit_date": 1522238934, "question_id": 49531475, "link": "https://stackoverflow.com/questions/49531475/how-to-copy-multiple-files-with-copyfile-function", "title": "How to copy multiple files with CopyFile function?", "body": "<p>Here is an example my code to copy file from <code>src</code> to <code>dst</code>:</p>\n\n<pre><code>int main() {\n\n    const wchar_t* file[3] = { L\"\\\\abc.txt\", L\"\\\\def.txt\", L\"\\\\ghi.txt\" };\n\n    for (int i = 0; i &lt; 3; i++) {\n        wchar_t* src = funcA();\n        wchar_t* dst = funcB();\n        wcscat(dst, file[i]);\n        wcscat(src, file[i]);\n        CopyFileW(src, dst, TRUE);\n    }\n}\n</code></pre>\n\n<p>Is there a better way to do that? Can I optimize the code by not running the funcA and funcB many times?</p>\n"}, {"tags": ["c", "math", "gcc", "gpu", "openmp"], "comments": [{"owner": {"reputation": 2361, "user_id": 5809597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43b1c037d08a423aeb6ee10fc922437?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge Bellon", "link": "https://stackoverflow.com/users/5809597/jorge-bellon"}, "edited": false, "score": 0, "creation_date": 1522312114, "post_id": 49531448, "comment_id": 86109731, "body": "Have you tried to find if you got a GPU math library available? For example, <a href=\"http://docs.nvidia.com/cuda/cuda-math-api/group__CUDA__MATH__DOUBLE.html#group__CUDA__MATH__DOUBLE\" rel=\"nofollow noreferrer\">Nvidia provides these functions in their math library</a>. I would try to link to that library too, since libm is only for your host CPU architecture."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1559287113, "post_id": 49531448, "comment_id": 99379834, "body": "For this particular case, does <code>-ffast-math</code> help?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6500762, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GYJ5ySjAr_g/AAAAAAAAAAI/AAAAAAAANTI/8f5uIHoeeag/photo.jpg?sz=128", "display_name": "ponsheng Chen", "link": "https://stackoverflow.com/users/6500762/ponsheng-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1559108445, "creation_date": 1559108445, "answer_id": 56353785, "question_id": 49531448, "link": "https://stackoverflow.com/questions/49531448/openmp-gpu-offloading-math-library/56353785#56353785", "title": "OpenMP GPU offloading math library?", "body": "<p>clang 9.0 now has the feature that replace the standard math library function with equivelant version of ptx code (nvidia gpu ), which is not yet supported by gcc 9.0.</p>\n\n<p>Compile and run: <a href=\"https://www.hahnjo.de/blog/2018/10/08/clang-7.0-openmp-offloading-nvidia.html\" rel=\"nofollow noreferrer\">https://www.hahnjo.de/blog/2018/10/08/clang-7.0-openmp-offloading-nvidia.html</a></p>\n\n<p>commit of clang : <a href=\"https://reviews.llvm.org/D61399\" rel=\"nofollow noreferrer\">https://reviews.llvm.org/D61399</a></p>\n"}, {"tags": [], "owner": {"reputation": 154, "user_id": 2179570, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pebZ9.jpg?s=128&g=1", "display_name": "0xDBFB7", "link": "https://stackoverflow.com/users/2179570/0xdbfb7"}, "is_accepted": false, "score": 1, "last_activity_date": 1575405459, "creation_date": 1575405459, "answer_id": 59164967, "question_id": 49531448, "link": "https://stackoverflow.com/questions/49531448/openmp-gpu-offloading-math-library/59164967#59164967", "title": "OpenMP GPU offloading math library?", "body": "<p>I encountered a similar issue. <a href=\"https://github.com/bisqwit/cpp_parallelization_examples/blob/master/README.md\" rel=\"nofollow noreferrer\">https://github.com/bisqwit/cpp_parallelization_examples/blob/master/README.md</a> very helpfully describes the solution:</p>\n\n<blockquote>\n  <p>When offloading, you may get linker problems from math functions if\n  you do an optimized build. To resolve, add -foffload=-lm\n  -fno-fast-math -fno-associative-math</p>\n</blockquote>\n\n<p>For reference, the errors I got with sqrt:</p>\n\n<pre><code>libgomp: Link error log ptxas application ptx input, line 138; error   : Label expected for argument 0 of instruction 'call'\nptxas application ptx input, line 138; fatal   : Call target not recognized\nptxas &lt;macro util&gt;, line 9; error   : Illegal modifier '.div' for instruction 'mov'\nptxas fatal   : Ptx assembly aborted due to errors\n\n\nlibgomp: cuLinkAddData (ptx_code) error: a PTX JIT compilation failed\n\nlibgomp: Cannot map target functions or variables (expected 2, have 4294967295)\n</code></pre>\n\n<p>And with sqrtf:</p>\n\n<pre><code>unresolved symbol sqrtf\ncollect2: error: ld returned 1 exit status\nmkoffload: fatal error: x86_64-pc-linux-gnu-accel-nvptx-none-gcc returned 1 exit status\ncompilation terminated.\nlto-wrapper: fatal error: gcc/x86_64-pc-linux-gnu/7.3.0//accel/nvptx-none/mkoffload returned 1 exit status\ncompilation terminated.\n/usr/bin/ld: error: lto-wrapper failed\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9563056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdce672db894552009ea9e56795f23c4?s=128&d=identicon&r=PG&f=1", "display_name": "Yortox", "link": "https://stackoverflow.com/users/9563056/yortox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1592762091, "creation_date": 1522230972, "last_edit_date": 1522231210, "question_id": 49531448, "link": "https://stackoverflow.com/questions/49531448/openmp-gpu-offloading-math-library", "title": "OpenMP GPU offloading math library?", "body": "<p>I am trying to offload code the GPU using OpenMP 4+ directives.  I am using ubuntu 16.04 with GCC 7.2 and for general cases it is working fine.  My problem comes when I am trying to offload a code that has a call to the <em>sqrtf</em> function that is defined in \"math.h\". The troubeling code is this:</p>\n\n<pre><code>#pragma omp target teams distribute \\\nmap(to:posx[:n],posy[:n],posz[:n]) \\\nmap(from:frcx[:n],frcy[:n],frcz[:n])\nfor (int i = 0; i &lt; n; i++) {\n  frcx[i] = 0.0f;\n  frcy[i] = 0.0f;\n  frcz[i] = 0.0f;\n\n  for (int j = 0; j &lt; n; j++) {\n    float dx = posx[j] - posx[i];\n    float dy = posy[j] - posy[i];\n    float dz = posz[j] - posz[i];\n    float distSqr = dx*dx + dy*dy + dz*dz + SOFTENING;\n    float invDist = 1.0f / sqrtf(distSqr);\n    float invDist3 = invDist * invDist * invDist;\n\n    frcx[i] += dx * invDist3;\n    frcy[i] += dy * invDist3;\n    frcz[i] += dz * invDist3;\n  }\n}\n</code></pre>\n\n<p>When I try to compile it with:</p>\n\n<pre><code>$ gcc -Wall -O2 -march=native -mtune=native -fopenmp -o nbody_cpu_arrays_parallel_gpu common_funcs.c nbody_cpu_arrays_parallel_gpu.c -lm\nunresolved symbol sqrtf\ncollect2: error: ld returned 1 exit status\nmkoffload: fatal error: x86_64-linux-gnu-accel-nvptx-none-gcc-7 returned 1 exit status\ncompilation terminated.\nlto-wrapper: fatal error: /usr/lib/gcc/x86_64-linux-gnu/7//accel/nvptx-none/mkoffload returned 1 exit status\ncompilation terminated.\n/usr/bin/ld: error: lto-wrapper failed\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>How can I make use of square root operations (or other mathematical functions) when offloading OMP code to GPUs? </p>\n"}, {"tags": ["c", "dynamic", "allocation"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1522231239, "post_id": 49531441, "comment_id": 86068994, "body": "<code>c</code> doesn&#39;t exist without the structure that contains it. So what do you reckon happens?"}, {"owner": {"reputation": 14233, "user_id": 916000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/eumU0.png?s=128&g=1", "display_name": "Taha Paksu", "link": "https://stackoverflow.com/users/916000/taha-paksu"}, "edited": false, "score": 0, "creation_date": 1522231295, "post_id": 49531441, "comment_id": 86069028, "body": "you have allocated <code>sizeof(int) + struct padding</code> bytes and memory freed will be same."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1522232316, "post_id": 49531441, "comment_id": 86069818, "body": "&quot;What happens to the memory area occupied by C?&quot;, undefined behavior."}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1522232739, "post_id": 49531441, "comment_id": 86070136, "body": "@Stargateur: I don&#39;t see why it should be UB, as long as it is not <i>accessed</i>."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 0, "creation_date": 1522232937, "post_id": 49531441, "comment_id": 86070258, "body": "@WedaPashi You seem to miss understand undefined behavior, what happens to the memory area occupied by <code>c</code> is undefined behavior. I don&#39;t know how to say it otherwise. This doesn&#39;t mean that the program do something undefined behavior."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 2, "creation_date": 1522234225, "post_id": 49531441, "comment_id": 86071219, "body": "&quot;What happens to the memory area occupied by C?&quot; You are simply no longer allowed to touch it."}, {"owner": {"reputation": 8777, "user_id": 3102264, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G69VV.jpg?s=128&g=1", "display_name": "mpromonet", "link": "https://stackoverflow.com/users/3102264/mpromonet"}, "edited": false, "score": 0, "creation_date": 1522273592, "post_id": 49531441, "comment_id": 86097066, "body": "I guess you means <code>A * a = (A*) malloc(sizeof(A));</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 313, "user_id": 2362470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4f4263d20fd6567724d3dfef520329?s=128&d=identicon&r=PG", "display_name": "Taurre", "link": "https://stackoverflow.com/users/2362470/taurre"}, "is_accepted": false, "score": 2, "last_activity_date": 1522231883, "last_edit_date": 1522231883, "creation_date": 1522231267, "answer_id": 49531572, "question_id": 49531441, "link": "https://stackoverflow.com/questions/49531441/c-dynamic-allocation-of-a-struct-with-non-dynamics-elements/49531572#49531572", "title": "C - Dynamic allocation of a struct with non dynamics elements", "body": "<pre><code>A * a = (A)* malloc(sizeof(A));\n</code></pre>\n\n<p>This line is incorrect, if you want to make an explicit cast, the syntax is <code>(A*)</code>, not <code>(A)*</code>.</p>\n\n<p>Anyway, yes, <code>malloc</code> allocates memory on the heap (in general and on non exotic system). What happens after depends on the OS and the implementation of the libc you use. Most often however, the memory freed is kept in a list for future use by malloc.</p>\n"}, {"tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1522233001, "last_edit_date": 1522233001, "creation_date": 1522232601, "answer_id": 49532002, "question_id": 49531441, "link": "https://stackoverflow.com/questions/49531441/c-dynamic-allocation-of-a-struct-with-non-dynamics-elements/49532002#49532002", "title": "C - Dynamic allocation of a struct with non dynamics elements", "body": "<p>First of all you need to allocate the memory like <code>A * a = (A*) malloc(sizeof(A));</code>. In C when you allocate memory to a <code>struct</code> dynamically you need to provide total size of that struct and the return type conversion from void* to your data type. So your <code>malloc</code> call will allocate that much of memory and returns a void pointer to the first byte of that block of memory location. </p>\n\n<p>So do not confuse that declaring variable inside a <code>struct</code> will be allocated from stack. Please see below:-</p>\n\n<pre><code> int c;// c is a automatic variable and memory will be allocated from stack\n\n typedef struct {\n     int c;// c is not a automatic variable it is simply a data member of `struct A`\n }  A;\n</code></pre>\n\n<p>So in the second  case memory will be allocated to c only when <code>malloc</code> will be called at run time that is dynamically and from heap. So your <code>free</code> call will simply release that memory at run time.</p>\n\n<p>But</p>\n\n<pre><code>typedef struct {\n     int c;// c is not a automatic variable it is simply a data member of `struct A`\n }  A;\n\n  A a;// Here 'a' is a automatic variable so 'int c' is also become automatic here \n      //and memory for the entire struct A will be allocated from stack and \n      //you no need to use `free` here\n</code></pre>\n\n<p>Hope this is help.</p>\n"}, {"tags": [], "owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "is_accepted": false, "score": 0, "last_activity_date": 1522233156, "creation_date": 1522233156, "answer_id": 49532197, "question_id": 49531441, "link": "https://stackoverflow.com/questions/49531441/c-dynamic-allocation-of-a-struct-with-non-dynamics-elements/49532197#49532197", "title": "C - Dynamic allocation of a struct with non dynamics elements", "body": "<blockquote>\n  <p>A * a = (A)* malloc(sizeof(A));</p>\n  \n  <p>Where a struct would be allocated in memory?</p>\n</blockquote>\n\n<p>In <code>C</code>, the library function <code>malloc</code> allocate a block of memory on the <code>heap</code>. The program accesses this block of memory via a pointer that <code>malloc</code> returns. The memory is given by the operating system. If memory is not available <code>NULL</code> pointer is returned.</p>\n\n<p>There is no need for casting of <code>malloc</code> in C. Your code has a typo, if anything it should be <code>(A *)</code>. </p>\n\n<blockquote>\n  <p>What happens to the memory area occupied by C?</p>\n</blockquote>\n\n<p>When the memory is no longer needed, the pointer pointing to the allocated memory should be passed to <code>free</code> which deallocates the memory so that it can be used again. For <code>free(NULL);</code> the function does nothing.</p>\n\n<p><em>C11 standard (ISO/IEC 9899:2011):</em></p>\n\n<pre><code>7.22.3.3 The free function\n</code></pre>\n\n<p>Synopsis</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\nvoid free(void *ptr);\n</code></pre>\n\n<p>Description</p>\n\n<blockquote>\n  <p>The free function causes the space pointed to by ptr to be\n  deallocated, that is, made available for further allocation. If ptr is\n  a null pointer, no action occurs. Otherwise, if the argument does not\n  match a pointer earlier returned by a memory management function, or\n  if the space has been deallocated by a call to free or realloc, the\n  behavior is undefined.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "is_accepted": false, "score": 0, "last_activity_date": 1522234483, "creation_date": 1522234483, "answer_id": 49532648, "question_id": 49531441, "link": "https://stackoverflow.com/questions/49531441/c-dynamic-allocation-of-a-struct-with-non-dynamics-elements/49532648#49532648", "title": "C - Dynamic allocation of a struct with non dynamics elements", "body": "<p>Fistly, C is a case-sensitive language.</p>\n\n<p><code>int c</code> is not the same as <code>int C</code>, so you might want to edit that in your question.</p>\n\n<p>Now, lets answer your questions:</p>\n\n<blockquote>\n  <p>C would be allocated in the heap area, is that right?</p>\n</blockquote>\n\n<p>Yes it is allocated from heap, subject to availability.\nIf you forget to release memory that was allocated, you will exhaust it.</p>\n\n<p>Lets see what C11 standard says, <a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.22.3\" rel=\"nofollow noreferrer\">C11 - Section 7.22.3</a> states, </p>\n\n<blockquote>\n  <p>The pointer returned if the allocation succeeds is suitably aligned so that it may be assigned to a pointer to any type of object with a fundamental alignment requirement and then used to access such an object or an array of such objects in the space allocated (until the space is explicitly deallocated). The lifetime of an allocated object extends from the allocation until the deallocation. Each such allocation shall yield a pointer to an object disjoint from any other object. The pointer returned points to the start (lowest byte address) of the allocated space. If the space cannot be allocated, a null pointer is returned. If the size of the space requested is zero, the behavior is implementation-defined: either a null pointer is returned, or the behavior is as if the size were some nonzero value, except that the returned pointer shall not be used to access an object.</p>\n</blockquote>\n\n<p>Thats should suffice to justify why explicit typecasting in statement</p>\n\n<pre><code>A * a = (A)* malloc(sizeof(A));\n</code></pre>\n\n<p>is not required. So it should be </p>\n\n<pre><code>A * a = malloc(sizeof(A));\n</code></pre>\n\n<p>followed by test if <code>a</code> is NULL, if it is NULL, you shouldn't continue with further access.</p>\n\n<blockquote>\n  <p>What happens to the memory area occupied by C?</p>\n</blockquote>\n\n<p>Again, referring to C11 standard, <a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.22.3.3\" rel=\"nofollow noreferrer\">C11 - Section 7.22.3.3</a> which states,</p>\n\n<blockquote>\n  <p>The free function causes the space pointed to by ptr to be deallocated, that is, made available for further allocation. If ptr is a null pointer, no action occurs. Otherwise, if the argument does not match a pointer earlier returned by a memory management function, or if the space has been deallocated by a call to free or realloc, the behavior is undefined.</p>\n</blockquote>\n\n<p><code>a</code> in your code is equivalent to <code>ptr</code> above. Once <code>free</code>d, you can consider that the memory is returned to heap-pool for fresh allocations. There is no memory occupied by <code>c</code> now, and hence an access to <code>c</code> results in Undefined Behavior.</p>\n\n<p>Refer C11 Standard, section <a href=\"https://port70.net/~nsz/c/c11/n1570.html#J.2\" rel=\"nofollow noreferrer\">J.2 Undefined Behavior</a>:</p>\n\n<blockquote>\n  <ul>\n  <li>An object is referred to outside of its lifetime (6.2.4).  </li>\n  <li>The value of a pointer to an object whose lifetime has ended is used (6.2.4).</li>\n  </ul>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1522236762, "creation_date": 1522236762, "answer_id": 49533399, "question_id": 49531441, "link": "https://stackoverflow.com/questions/49531441/c-dynamic-allocation-of-a-struct-with-non-dynamics-elements/49533399#49533399", "title": "C - Dynamic allocation of a struct with non dynamics elements", "body": "<pre><code>A * a = (A)* malloc(sizeof(A));\n</code></pre>\n\n<p>The compiler must be giving an error on this statement and if I am guessing correctly you want to cast the <code>malloc</code> return with <code>(A *)</code> which you should not do <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">[<strong>check this</strong>]</a>.</p>\n\n<p>In C language, a structure is a user-defined datatype which allows us to combine data of different types together and size of a structure variable is </p>\n\n<pre><code>size of all member variables + size of structure padding\n</code></pre>\n\n<p>So, when you dynamically allocate memory of <code>sizeof(struct name)</code> size, a block of memory of requested size gets allocated in heap and when you pass this pointer to <code>free()</code>, it deallocates that whole memory block.</p>\n\n<blockquote>\n  <p><code>What happens to the memory area occupied by C?</code></p>\n</blockquote>\n\n<p>It is deallocated.<br>\nThe lifetime of a dynamically allocated object is over when it is deallocated. So, when you do <code>free(a)</code>, the life of <code>a</code> and all its data members is over and it is indeterminate now.</p>\n\n<hr>\n\n<p>Additional:</p>\n\n<p>A point to note here about <code>free()</code> is that it does not change the value of the pointer (passed to it) itself, hence it still points to the same (now invalid) location.</p>\n\n<p>So, when you free a dynamically allocated memory it still points to the same location which is no more valid and accessing such memory is undefined behavior. From C Standard#6.2.4p2</p>\n\n<blockquote>\n  <p>The lifetime of an object is the portion of program execution during which storage is guaranteed to be reserved for it. An object exists, has a constant address,33) and retains its last-stored value throughout its lifetime.34) If an object is referred to outside of its lifetime, the behavior is undefined. The value of a pointer becomes indeterminate when the object it points to (or just past) reaches the end of its lifetime.</p>\n</blockquote>\n"}], "owner": {"reputation": 33, "user_id": 8239502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/911ab434e915a9dd3f0949ca9c68ded1?s=128&d=identicon&r=PG&f=1", "display_name": "giudaballerino", "link": "https://stackoverflow.com/users/8239502/giudaballerino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1522236762, "creation_date": 1522230948, "last_edit_date": 1522231945, "question_id": 49531441, "link": "https://stackoverflow.com/questions/49531441/c-dynamic-allocation-of-a-struct-with-non-dynamics-elements", "title": "C - Dynamic allocation of a struct with non dynamics elements", "body": "<p>I was wondering where a struct would be allocated in memory if I have something like this.</p>\n\n<pre><code>typedef struct {\n    int c;\n}  A;\n\nA * a = (A)* malloc(sizeof(A));\na -&gt; c = 2;\n</code></pre>\n\n<p>C would be allocated in the heap area, is that right?\nMoreover, if I free the memory with</p>\n\n<pre><code>free(a);\n</code></pre>\n\n<p>What happens to the memory area occupied by C?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 0, "creation_date": 1522230594, "post_id": 49531219, "comment_id": 86068485, "body": "What string are you expecting as a result?"}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1522230680, "post_id": 49531219, "comment_id": 86068555, "body": "Try to run your program step-by-step through a debugger."}, {"owner": {"reputation": 2630, "user_id": 1983197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwjpR.png?s=128&g=1", "display_name": "LordWilmore", "link": "https://stackoverflow.com/users/1983197/lordwilmore"}, "reply_to_user": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 0, "creation_date": 1522230753, "post_id": 49531219, "comment_id": 86068615, "body": "@Acorn I think he&#39;s expecting <code>HELLO\\&#39;All</code>, i.e. insertion of a backslash before the single quote"}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 3, "last_activity_date": 1522231047, "last_edit_date": 1522231047, "creation_date": 1522230561, "answer_id": 49531312, "question_id": 49531219, "link": "https://stackoverflow.com/questions/49531219/c-replace-special-character/49531312#49531312", "title": "C replace special character", "body": "<p>It seems you miss an increment of <code>j</code></p>\n\n<p>Try like this</p>\n\n<pre><code>  pch[j++]='\\\\';\n  printf(\" pch[%d] = *%c* \\n\",j-1,  pch[j-1]);\n  pch[j++]=str[i];\n</code></pre>\n\n<p>or like this</p>\n\n<pre><code>  pch[j]='\\\\';\n  printf(\" pch[%d] = *%c* \\n\",j,  pch[j]);\n  ++j;\n  pch[j++]=str[i];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 8955142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67681c524e47251613fa12bb5570bfd5?s=128&d=identicon&r=PG&f=1", "display_name": "crazyhair3", "link": "https://stackoverflow.com/users/8955142/crazyhair3"}, "is_accepted": false, "score": 0, "last_activity_date": 1522231835, "last_edit_date": 1522231835, "creation_date": 1522231346, "answer_id": 49531595, "question_id": 49531219, "link": "https://stackoverflow.com/questions/49531219/c-replace-special-character/49531595#49531595", "title": "C replace special character", "body": "<p>If you wanted to replace the apostrophe (<code>'</code>) in the original string <code>str</code> simply put</p>\n\n<pre><code>str[i] = '\\\\';\n</code></pre>\n\n<p>in the <code>if</code> block starting with</p>\n\n<pre><code>if(str[i]=='\\'')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 282, "user_id": 4776236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ts4jK.jpg?s=128&g=1", "display_name": "Anto Livish A", "link": "https://stackoverflow.com/users/4776236/anto-livish-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1522231720, "creation_date": 1522231720, "answer_id": 49531709, "question_id": 49531219, "link": "https://stackoverflow.com/questions/49531219/c-replace-special-character/49531709#49531709", "title": "C replace special character", "body": "<p>This will work. Only small change is there. Since its a char array, u can't add string.</p>\n\n<pre><code>int main()\n{\n    int i,j=0;\n    char str[] = \"HELLO'All\";\n    char pch[128]={0};\n\n    for(i=0; i&lt; strlen(str); i++)\n    {\n      if(str[i]=='\\'')\n      {\n        pch[j]='\\\\';\n        j++;\n        pch[j]='\\'';\n        pch[++j]=str[i];\n        continue;          \n    }\n    pch[j++]=str[i];\n  }\n  printf(\"pch = *%s* \\n\", pch);\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1522243935, "last_edit_date": 1522243935, "creation_date": 1522232078, "answer_id": 49531825, "question_id": 49531219, "link": "https://stackoverflow.com/questions/49531219/c-replace-special-character/49531825#49531825", "title": "C replace special character", "body": "<p>You forget to increment <code>j</code> a second time when you insert the <code>\\</code>.</p>\n\n<p>Here is a corrected and simplified version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    int i, j;\n    char str[] = \"HELLO'All\";\n    char pch[128];\n\n    for (i = j = 0, str[i] != '\\0'; i++) {\n        if (str[i] == '\\'') {\n            pch[j++] = '\\\\';\n        }\n        pch[j++] = str[i];\n    }\n    pch[j] = '\\0';\n    printf(\"pch = *%s*\\n\", pch);\n    return 0;\n}\n</code></pre>\n\n<p>Note that you should also replace <code>\\</code> with <code>\\\\</code> and you should check if the destination array is large enough (not a problem with the posted code, but a more general routine would need to compare <code>j</code> to the size of <code>pch</code>.</p>\n"}], "owner": {"reputation": 2832, "user_id": 1410376, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/3aMQc.jpg?s=128&g=1", "display_name": "Anis_Stack", "link": "https://stackoverflow.com/users/1410376/anis-stack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 49531312, "answer_count": 4, "score": -3, "last_activity_date": 1522335527, "creation_date": 1522230294, "last_edit_date": 1522335527, "question_id": 49531219, "link": "https://stackoverflow.com/questions/49531219/c-replace-special-character", "title": "C replace special character", "body": "<p>I would like to replace the <code>'</code> character with <code>\\'</code> I use the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    int i, j = 0;\n    char str[] = \"HELLO'All\";\n    char pch[128] = { 0 };\n\n    for (i = 0; i &lt; strlen(str); i++) {\n        if (str[i] == '\\'') {\n            pch[j] = '\\\\';\n            printf(\" pch[%d] = *%c* \\n\", j, pch[j]);\n            pch[++j] = str[i];\n            continue;          \n        }\n        pch[j++] = str[i];\n    }\n    printf(\"pch = *%s* \\n\", pch);\n    return 0;\n} \n</code></pre>\n\n<p>I get the result: <code>pch = *HELLO\\All*</code><br>\nExpected result: <code>pch = *HELLO\\'All*</code><br>\nWhat is missing in my code?</p>\n"}, {"tags": ["c", "double", "scanf", "rounding", "precision"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 11, "creation_date": 1522229040, "post_id": 49530691, "comment_id": 86067266, "body": "You can try <code>%.15lf</code> in the <code>printf</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 5, "creation_date": 1522229211, "post_id": 49530691, "comment_id": 86067401, "body": "Unrelated to your question, but if your file contains less than 100 lines, you&#39;ll run into trouble."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1522229272, "post_id": 49530691, "comment_id": 86067448, "body": "So ... <code>while(fscanf(tf, &quot;%lf %d&quot;, &amp;t, &amp;st) == 2) { printf(&quot;%.15lf %d\\n&quot;, t, st); }</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1522332103, "post_id": 49530691, "comment_id": 86123848, "body": "never access beyond <code>argv[0]</code>  without first checking <code>argc</code> to assure the user actually entered the command line parameter"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1522332606, "post_id": 49530691, "comment_id": 86124212, "body": "when a system function returns an error indication, call <code>perror()</code> to output to <code>stderr</code> both the enclosed text and the text reason the system thinks the function failed"}], "answers": [{"comments": [{"owner": {"reputation": 500, "user_id": 9295187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c9c1f8f1aab959179d7a195bebbe4e?s=128&d=identicon&r=PG&f=1", "display_name": "Argon", "link": "https://stackoverflow.com/users/9295187/argon"}, "edited": false, "score": 0, "creation_date": 1522383411, "post_id": 49535048, "comment_id": 86144799, "body": "I know that I&#39;ve basically put the suggestions in the comments to the code, with a little explanation. But apart from that, may I know the reason for the down vote?"}], "tags": [], "owner": {"reputation": 500, "user_id": 9295187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c9c1f8f1aab959179d7a195bebbe4e?s=128&d=identicon&r=PG&f=1", "display_name": "Argon", "link": "https://stackoverflow.com/users/9295187/argon"}, "is_accepted": true, "score": -1, "last_activity_date": 1522241413, "creation_date": 1522241413, "answer_id": 49535048, "question_id": 49530691, "link": "https://stackoverflow.com/questions/49530691/fscanf-rounds-floating-point-in-c/49535048#49535048", "title": "fscanf() rounds floating point in C", "body": "<p>After the suggestions made by @Weather Vane &amp; @Michael Walz, I think your code should become like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char** argv)\n{\n  FILE* tf;\n  double t;\n  int st;\n\n  tf = fopen(argv[1], \"r\");\n  if(tf == NULL)\n    exit(EXIT_FAILURE);\n  /*The ==2  condition will allow reading of the 2 values \n  and at the same time can take care of exceptions if they occur.\n  Thus, it smoothly reads the file to it's end, \n  without any need for EOF match OR for looping to match the file size.*/ \n  while(fscanf(tf, \"%lf %d\", &amp;t, &amp;st)==2)\n  {\n    //This line will allow the stored number to be presented in a precise form\n    printf(\"%.15lf %d\\n\", t, st);\n  }\n\n  fclose(tf);\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1522333171, "creation_date": 1522333171, "answer_id": 49558502, "question_id": 49530691, "link": "https://stackoverflow.com/questions/49530691/fscanf-rounds-floating-point-in-c/49558502#49558502", "title": "fscanf() rounds floating point in C", "body": "<p>the statement: </p>\n\n<pre><code>fscanf(tf, \"%lf %d\", &amp;t, &amp;st);\n</code></pre>\n\n<p>actually reads in the full number.</p>\n\n<p>However, to have the call to <code>printf()</code> output the full number (rather than the default 'precision') the format specifier <code>%lf</code> needs to have the desired 'precision' listed.  I.E.</p>\n\n<pre><code>printf( \"%.16lf %d\\n\", t, st );\n</code></pre>\n\n<p>Please read the MAN page for <a href=\"https://linux.die.net/man/3/printf\" rel=\"nofollow noreferrer\">printf(3)</a>\n for the details</p>\n"}], "owner": {"reputation": 19, "user_id": 6853953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cb7444a20e45ecb997b94a1d05c9ec1?s=128&d=identicon&r=PG&f=1", "display_name": "DXR", "link": "https://stackoverflow.com/users/6853953/dxr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 49535048, "answer_count": 2, "score": 0, "last_activity_date": 1522333171, "creation_date": 1522228931, "question_id": 49530691, "link": "https://stackoverflow.com/questions/49530691/fscanf-rounds-floating-point-in-c", "title": "fscanf() rounds floating point in C", "body": "<p>I have a file with numbers like this:</p>\n\n<pre><code>0.000000000000000 1\n1.274472000000000 0\n1.274472708333333 1\n1.274472750000000 0\n1.274472791666667 1\n1.274472833333333 0\n1.274472875000000 1\n</code></pre>\n\n<p>I'm going to do some calculations on those numbers so I read them with fscanf(). The problem is that first number is read with very small precision. I wrote code like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char** argv)\n{\n  FILE* tf;\n  double t;\n  int st;\n\n\n  tf = fopen(argv[1], \"r\");\n  if(tf == NULL)\n    exit(EXIT_FAILURE);\n  for(int i=0; i&lt;100; i++)\n  {\n    fscanf(tf, \"%lf %d\", &amp;t, &amp;st);\n    printf(\"%lf %d\\n\", t, st);\n  }\n  fclose(tf);\n  return 0;\n}\n</code></pre>\n\n<p>The values read during execution are:</p>\n\n<pre><code>0.000000 1\n1.274472 0\n1.274473 1\n1.274473 0\n1.274473 1\n1.274473 0\n1.274473 1\n</code></pre>\n\n<p>This is obviously unacceptable... Any idea?</p>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1522234291, "post_id": 49530603, "comment_id": 86071272, "body": "You print the addresses of 2 variables. How should it be possible for 2 variables to share the same memory location?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1522246082, "post_id": 49530603, "comment_id": 86080121, "body": "Sidenote: the code invokes undefined behaviour. <code>%p</code> expects a <code>void *</code>. That&#39;s one of the very rare case you have to cast."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 8, "last_activity_date": 1522228788, "creation_date": 1522228788, "answer_id": 49530640, "question_id": 49530603, "link": "https://stackoverflow.com/questions/49530603/why-structure-address-not-equals-after-assignment-in-the-following-case/49530640#49530640", "title": "why structure address not equals after assignment in the following case", "body": "<p>With</p>\n\n<pre><code>printf(\"%p \", &amp;ptr);\n</code></pre>\n\n<p>you don't print where <code>ptr</code> is pointing, you print the location of the <code>ptr</code> variable.</p>\n\n<p>If you want both <code>printf</code> calls to print the same thing, you should not use the address-of operator:</p>\n\n<pre><code>printf(\"%p \", ptr);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1522233861, "last_edit_date": 1522233861, "creation_date": 1522233045, "answer_id": 49532156, "question_id": 49530603, "link": "https://stackoverflow.com/questions/49530603/why-structure-address-not-equals-after-assignment-in-the-following-case/49532156#49532156", "title": "why structure address not equals after assignment in the following case", "body": "<p>After this assignment</p>\n\n<pre><code>ptr = &amp;var;\n</code></pre>\n\n<p>the variable <code>ptr</code> stores the address of the variable <code>var</code>. So to output the address using the variable <code>ptr</code> you should output the value in <code>ptr</code>.</p>\n\n<p>Also take into account that the address of an object of a structure type is equal to the address of the first member of the object.</p>\n\n<p>And at last according to the C Standard the function <code>main</code> without parameters shall be declared like</p>\n\n<pre><code>int main( void )\n</code></pre>\n\n<p>Here is a demonstrative program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    struct my_structure\n    {\n        char name[20];\n        int number;\n        int rank;\n    };\n\n    struct my_structure var = {\"Stud\", 35, 1};\n    struct my_structure *ptr;\n    ptr = &amp;var;\n\n    printf(\"%p\\n\", ( void * )&amp;var);\n    printf(\"%p\\n\", ( void * )ptr);\n    printf( \"%p\\n\", ( void * )var.name );\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output might look like</p>\n\n<pre><code>0x7ffce8ed4f10\n0x7ffce8ed4f10\n0x7ffce8ed4f10\n</code></pre>\n\n<p>As you can see the three addresses are equal each other.</p>\n"}], "owner": {"reputation": 1033, "user_id": 6710360, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_kIB1Fmgq_c/AAAAAAAAAAI/AAAAAAAAABM/RhpxIymZN0Q/photo.jpg?sz=128", "display_name": "anonymous", "link": "https://stackoverflow.com/users/6710360/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1522274011, "accepted_answer_id": 49530640, "answer_count": 2, "score": -1, "last_activity_date": 1522233861, "creation_date": 1522228697, "question_id": 49530603, "link": "https://stackoverflow.com/questions/49530603/why-structure-address-not-equals-after-assignment-in-the-following-case", "closed_reason": "Not suitable for this site", "title": "why structure address not equals after assignment in the following case", "body": "<pre><code>#include &lt;stdio.h&gt;\n\n\nint main() {\n    struct my_structure {\n        char name[20];\n        int number;\n        int rank;\n    };\n\n    struct my_structure var = {\"Stud\", 35, 1};\n    struct my_structure *ptr;\n    ptr = &amp;var;\n\n    printf(\"%p \", &amp;var);\n    printf(\"\\n\");\n    printf(\"%p \", &amp;ptr);\n\n    return 0;\n}\n</code></pre>\n\n<p>The code is complied under c99. <strong>ptr</strong> are not equal to <strong>var</strong>. why? </p>\n\n<hr>\n\n<p>0x7ffeea577988 </p>\n\n<hr>\n\n<p>0x7ffeea577978 </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 0, "creation_date": 1522228702, "post_id": 49530526, "comment_id": 86067007, "body": "Please show the declarations of the variables and the definition of their types as well."}, {"owner": {"reputation": 64, "user_id": 9563008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URcpc.jpg?s=128&g=1", "display_name": "Bittervet", "link": "https://stackoverflow.com/users/9563008/bittervet"}, "reply_to_user": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "edited": false, "score": 0, "creation_date": 1522228946, "post_id": 49530526, "comment_id": 86067204, "body": "@Acorn: I&#39;ve gone ahead and added the variable declarations with their type definitions. Everything we are working with is unsigned and, for the most part, short."}, {"owner": {"reputation": 64, "user_id": 9563008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URcpc.jpg?s=128&g=1", "display_name": "Bittervet", "link": "https://stackoverflow.com/users/9563008/bittervet"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1522229054, "post_id": 49530526, "comment_id": 86067279, "body": "@rustyx: I do need to worry about carries during arithmetic with values that &quot;wrap-around&quot; if I&#39;m not mistaken. I definitely would likely some clarity as it&#39;s definitely not consistent."}, {"owner": {"reputation": 64, "user_id": 9563008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URcpc.jpg?s=128&g=1", "display_name": "Bittervet", "link": "https://stackoverflow.com/users/9563008/bittervet"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1522229635, "post_id": 49530526, "comment_id": 86067773, "body": "@rustyx: I declared pdiff as a signed short and removed the -1 and +1 if statements and my checksum values are still frequently incorrect by 1.  In this instance: <code>68 05 ca 57 94 05 60 73 5c d0 57 bf 08 00 45 00 00 2c 00 00 40 00 3f 06 bc a5 b9 aa 2a 6a 42 f9 58 19 00 50 ed 48 fc e4 57 e5 6e c0 f6 c8 60 12 72 10 fe f3 00 00 02 04 05 b4 00 00</code>   The resulting checksum is <code>fef3</code> when it should be <code>fef2</code>."}], "answers": [{"tags": [], "owner": {"reputation": 15037, "user_id": 1111371, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/85fbe34f335b26ff6f6c8ef921a682ae?s=128&d=identicon&r=PG", "display_name": "ugoren", "link": "https://stackoverflow.com/users/1111371/ugoren"}, "is_accepted": false, "score": 0, "last_activity_date": 1522262348, "creation_date": 1522262348, "answer_id": 49541866, "question_id": 49530526, "link": "https://stackoverflow.com/questions/49530526/recalculate-tcp-checksum/49541866#49541866", "title": "Recalculate TCP checksum", "body": "<p>TCP/IP checksums use 1's complement arithmetic, which is similar to 2's complement plus carry feedback. I.e. if you add two 16bit values, and get a carry, you need to add 1 to the sum.</p>\n\n<p>Your code uses unsigned 16bit integers (BTW, I recommend using <a href=\"http://en.cppreference.com/w/c/types/integer\" rel=\"nofollow noreferrer\">fixed width integer types</a>, instead of <code>int</code> and <code>short</code>, when the size matters, as in this case), so when adding them the carry is lost.</p>\n\n<p>A better way is to use 32bit variables for the intermediate result, then feeding back the carry. For example:</p>\n\n<p><code>\nuint16_t a, b;\n...\nuint32_t sum = (uint32_t)a + (uint32_t)b;\nif (sum &gt; 0x10000u) {\n    sum = (sum &gt;&gt; 16) + (sum &amp; 0xffff);\n}\n</code></p>\n"}, {"comments": [{"owner": {"reputation": 64, "user_id": 9563008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URcpc.jpg?s=128&g=1", "display_name": "Bittervet", "link": "https://stackoverflow.com/users/9563008/bittervet"}, "edited": false, "score": 0, "creation_date": 1522362737, "post_id": 49550799, "comment_id": 86140249, "body": "After some testing I believe this works very well :)"}, {"owner": {"reputation": 64, "user_id": 9563008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URcpc.jpg?s=128&g=1", "display_name": "Bittervet", "link": "https://stackoverflow.com/users/9563008/bittervet"}, "edited": false, "score": 0, "creation_date": 1522443442, "post_id": 49550799, "comment_id": 86170636, "body": "Upon further testing it seems like your fold does not take into account negative carries, only positive."}, {"owner": {"reputation": 64, "user_id": 9563008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URcpc.jpg?s=128&g=1", "display_name": "Bittervet", "link": "https://stackoverflow.com/users/9563008/bittervet"}, "edited": false, "score": 0, "creation_date": 1522457093, "post_id": 49550799, "comment_id": 86174458, "body": "I was able to use your code to make a working solution. The fold must be done after the two subtractions and after the two additions separately to account for the resulting positive and negative carries afterward."}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": false, "score": 1, "last_activity_date": 1523258620, "last_edit_date": 1523258620, "creation_date": 1522310210, "answer_id": 49550799, "question_id": 49530526, "link": "https://stackoverflow.com/questions/49530526/recalculate-tcp-checksum/49550799#49550799", "title": "Recalculate TCP checksum", "body": "<p>According to <a href=\"https://tools.ietf.org/html/rfc1071\" rel=\"nofollow noreferrer\">RFC 1071</a>, the checksum is calculated using a 16-bit 1's complement sum.</p>\n\n<blockquote>\n  <p>On a 2's complement machine, the 1's complement sum must be\n          computed by means of an \"end around carry\", i.e., any overflows\n          from the most significant bits are added into the least\n          significant bits.</p>\n</blockquote>\n\n<p>So you should \"reverse\" the \"end around carry\" when updating the checksum.</p>\n\n<p>I.e. subtract 1 for each negative carry and add 1 for each positive carry.</p>\n\n<p>Something like this:</p>\n\n<pre><code>int32_t sum; // or just int, but make sure it's 32-bit or more\nunsigned short pseq1, pseq2, pseq3, pseq4\nunsigned short prevcheck;\n\nu_char *pkt_data;\n\nprevcheck = (pkt_data[50] &lt;&lt; 8) | pkt_data[51];\n\npseq1 = (pkt_data[38] &lt;&lt; 8) | pkt_data[39]; \npseq2 = (pkt_data[40] &lt;&lt; 8) | pkt_data[41];\n\npkt_data[38] = ((seq_num - offsetResult) &gt;&gt; 24) &amp; 0xFF;\npkt_data[39] = ((seq_num - offsetResult) &gt;&gt; 16) &amp; 0xFF; \npkt_data[40] = ((seq_num - offsetResult) &gt;&gt; 8) &amp; 0xFF;\npkt_data[41] = (seq_num - offsetResult) &amp; 0xFF;\n\npseq3 = (pkt_data[38] &lt;&lt; 8) | pkt_data[39];\npseq4 = (pkt_data[40] &lt;&lt; 8) | pkt_data[41];\n\nsum = ~prevcheck - pseq1 - pseq2;\n\nwhile (sum &gt;&gt; 16)\n    sum = (sum &amp; 0xFFFF) + (sum &gt;&gt; 16); // \"end around carry\"\n\nsum += pseq3 + pseq4;\n\nwhile (sum &gt;&gt; 16)\n    sum = (sum &amp; 0xFFFF) + (sum &gt;&gt; 16); // \"end around carry\"\n\nsum3 = (short)~sum;\n\npkt_data[50] = (sum3 &gt;&gt; 8) &amp; 0xFF; \npkt_data[51] = sum3 &amp; 0xFF;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64, "user_id": 9563008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URcpc.jpg?s=128&g=1", "display_name": "Bittervet", "link": "https://stackoverflow.com/users/9563008/bittervet"}, "is_accepted": true, "score": 1, "last_activity_date": 1522457614, "last_edit_date": 1522457614, "creation_date": 1522456978, "answer_id": 49583134, "question_id": 49530526, "link": "https://stackoverflow.com/questions/49530526/recalculate-tcp-checksum/49583134#49583134", "title": "Recalculate TCP checksum", "body": "<pre><code>u_int32_t sum;\nu_int16_t oldSeq1, oldSeq2, newSeq1, newSeq2;\nu_int16_t oldChecksum;\n\nsum = ~oldChecksum - oldSeq1 - oldSeq2;\n\nsum = (sum &amp; 0xFFFF) + (sum &gt;&gt; 16);\n\nsum = sum + newSeq1 + newSeq2;\n\nsum = (sum &amp; 0xFFFF) + (sum &gt;&gt; 16);\n\nsum = (u_int16_t)~sum;\n</code></pre>\n\n<p>As my requirement was only to edit either sequence or acknowledge sequence numbers the above code was the solution for me using suggestions from all. This will account for all carries as the fold is done after each arithmetic operation instead of at the end where it could skew results.</p>\n\n<p>This will work equally for changes in the IP header or TCP header as long as you pad anything shorter than 16 bits to 16 bits.</p>\n"}], "owner": {"reputation": 64, "user_id": 9563008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/URcpc.jpg?s=128&g=1", "display_name": "Bittervet", "link": "https://stackoverflow.com/users/9563008/bittervet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 1, "accepted_answer_id": 49583134, "answer_count": 3, "score": 1, "last_activity_date": 1523258709, "creation_date": 1522228503, "last_edit_date": 1522230049, "question_id": 49530526, "link": "https://stackoverflow.com/questions/49530526/recalculate-tcp-checksum", "title": "Recalculate TCP checksum", "body": "<p>I'm writing a userspace application for DDoS mitigation and to implement certain mitigation policies I need to be able to change TCP options and things like sequence and acknowledgement numbers in packet headers on the fly.</p>\n\n<p>The usual way to calculate the checksum would be to recreate a new TCP pseudoheader and iterate over the entire data packet to calculate the checksum but there is another way which involves just calculating the differences between only the words changed and doing a ones-complement subtraction.</p>\n\n<p>My current code seems to be off frequently by 1 or 2. I suspect this is a problem because I'm not handling carries/borrows correctly. I have very little idea on how I would go about fixing this:</p>\n\n<pre><code>unsigned short pseq1, pseq2, pseq3, pseq4\nunsigned short sum1, sum2, sum3, prevcheck;\nshort pdiff1, pdiff2;\n\nu_char *pkt_data;\n\nprevcheck = (pkt_data[50] &lt;&lt; 8) | pkt_data[51];\n\npseq1 = (pkt_data[38] &lt;&lt; 8) | pkt_data[39]; \npseq2 = (pkt_data[40] &lt;&lt; 8) | pkt_data[41];\n\npkt_data[38] = ((seq_num - offsetResult) &gt;&gt; 24) &amp; 0xFF;\npkt_data[39] = ((seq_num - offsetResult) &gt;&gt; 16) &amp; 0xFF; \npkt_data[40] = ((seq_num - offsetResult) &gt;&gt; 8) &amp; 0xFF;\npkt_data[41] = (seq_num - offsetResult) &amp; 0xFF;\n\npseq3 = (pkt_data[38] &lt;&lt; 8) | pkt_data[39];\npseq4 = (pkt_data[40] &lt;&lt; 8) | pkt_data[41];\n\npdiff1 = pseq1 - pseq3;\n\npdiff2 = pseq2 - pseq4;\n\nsum1 = ~pdiff1 + ~pdiff2;\n\nsum2 = ~sum1;\n\nsum3 = sum2 + prevcheck; \n\npkt_data[50] = (sum3 &gt;&gt; 8) &amp; 0xFF; \npkt_data[51] = sum3 &amp; 0xFF;\n</code></pre>\n\n<p>In this instance: <code>68 05 ca 57 94 05 60 73 5c d0 57 bf 08 00 45 00 00 2c 00 00 40 00 3f 06 bc a5 b9 aa 2a 6a 42 f9 58 19 00 50 ed 48 fc e4 57 e5 6e c0 f6 c8 60 12 72 10 fe f3 00 00 02 04 05 b4 00 00</code></p>\n\n<p>The produced checksum is <code>fef3</code> when it should be <code>fef2</code>.</p>\n\n<p>Any suggestions would be amazing!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1522226882, "post_id": 49529929, "comment_id": 86065672, "body": "Move the call to <code>srand</code> inside the loop at the beginning."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1522227609, "post_id": 49529929, "comment_id": 86066197, "body": "@cswannabe: please edit your question with the text &quot;What if I want to generate the same sequence of numbers for the current run but when I restart my program, a new sequence is generated and preserved for that run&quot;. That makes any solution very different."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1522227989, "post_id": 49529929, "comment_id": 86066459, "body": "Please read the documentation for rand and srand."}], "answers": [{"comments": [{"owner": {"reputation": 603, "user_id": 8633966, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/494679358e68b624fbc62c01595566c7?s=128&d=identicon&r=PG&f=1", "display_name": "cswannabe", "link": "https://stackoverflow.com/users/8633966/cswannabe"}, "edited": false, "score": 0, "creation_date": 1522227097, "post_id": 49530002, "comment_id": 86065841, "body": "What if I want to generate the same sequence of numbers for the current run but when I restart my program, a new sequence is generated and preserved for that run?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 603, "user_id": 8633966, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/494679358e68b624fbc62c01595566c7?s=128&d=identicon&r=PG&f=1", "display_name": "cswannabe", "link": "https://stackoverflow.com/users/8633966/cswannabe"}, "edited": false, "score": 0, "creation_date": 1522227214, "post_id": 49530002, "comment_id": 86065927, "body": "@cswannabe ... then you need to seed with a different value at each run, for example like this: <code>srand(1)</code> -&gt; <code>srand((unsigned int)time(NULL));</code>"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1522227230, "post_id": 49530002, "comment_id": 86065936, "body": "Not clear, you want a new sequence on each run? Then use different seed. The common trick is to get the current time and use it to feed the generator, something like <code>srand(time())</code>, or use the pid : <code>srand(getpid())</code> (more probability to get the same sequence)."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1522227255, "post_id": 49530002, "comment_id": 86065961, "body": "Note that only the debug version of randomizers generally behave determinisitc (i.e. generate the same sequence with the same seed). Non-debug versions are often more truely random (i.e. non-deterministic)."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1522227315, "post_id": 49530002, "comment_id": 86066010, "body": "@PaulOgilvie are you sure ? I don&#39;t know what the standard says though..."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1522227404, "post_id": 49530002, "comment_id": 86066075, "body": "@PaulOgilvie Wrong! srand, srandom, etc are all designed to get the exact same sequence if the same seed is used. If not, how to reproduce tests? <code>Like rand(3), random() will by default produce a sequence of      numbers that can be duplicated by calling srandom() with the same seed</code>"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 603, "user_id": 8633966, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/494679358e68b624fbc62c01595566c7?s=128&d=identicon&r=PG&f=1", "display_name": "cswannabe", "link": "https://stackoverflow.com/users/8633966/cswannabe"}, "edited": false, "score": 0, "creation_date": 1522227547, "post_id": 49530002, "comment_id": 86066158, "body": "@cswannabe do you want this behavior, <a href=\"http://rextester.com/UVBOG29961\" rel=\"nofollow noreferrer\">rextester.com/UVBOG29961</a> ? your question need to be clarified"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1522227604, "post_id": 49530002, "comment_id": 86066193, "body": "POSIX says: <code>If srand() is then called with the same seed value, the sequence of pseudo-random numbers shall be repeated.</code>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1522228834, "post_id": 49530002, "comment_id": 86067103, "body": "@Jean-BaptisteYun&#232;s, I see...it means that <code>rand()</code> is vulnerable and cryptographically insecure: a hacker, knowing the random number generator (algorithm and tables) and the time when seeding, can devise the random number sequence generated by the random number generator. MS provides <code>rand_s()</code> which it claims is cryptographically secure."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1522229133, "post_id": 49530002, "comment_id": 86067346, "body": "@PaulOgilvie Yes rand/random, etc are not designed for cryptographic purposes. This is another much harder problem."}], "tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": true, "score": 3, "last_activity_date": 1522226940, "creation_date": 1522226940, "answer_id": 49530002, "question_id": 49529929, "link": "https://stackoverflow.com/questions/49529929/generating-the-same-sequence-of-random-number-in-a-loop/49530002#49530002", "title": "Generating the same sequence of random number in a loop", "body": "<p>You need to set the seed at the beginning of the loop if you want to have the same sequence in each iteration:</p>\n\n<pre><code>while(loop1!=1) {\n    srand(1);\n    a=rand()%10;\n    b=rand()%10;\n    c=rand()%10;\n    d=rand()%10;\n    printf(\"%d %d %d %d\\n\",a,b,c,d);\n    count+=1;\n    if (count&gt;3) {\n        break;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 603, "user_id": 8633966, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/494679358e68b624fbc62c01595566c7?s=128&d=identicon&r=PG&f=1", "display_name": "cswannabe", "link": "https://stackoverflow.com/users/8633966/cswannabe"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1522247924, "accepted_answer_id": 49530002, "answer_count": 1, "score": -3, "last_activity_date": 1522227106, "creation_date": 1522226706, "last_edit_date": 1522227106, "question_id": 49529929, "link": "https://stackoverflow.com/questions/49529929/generating-the-same-sequence-of-random-number-in-a-loop", "closed_reason": "Needs more focus", "title": "Generating the same sequence of random number in a loop", "body": "<p>A for loop to be exact. I've tried using srand() to seed the loop but it doesn't seem to be working. Could someone clarify the seeding part? Anyways, could someone point out my errors? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(){\n    int a,b,c,d,loop1=0,loop2=1,count=0;\n    srand(1);\n    while(loop1!=1)\n   {\n        a=rand()%10;\n        b=rand()%10;\n        c=rand()%10;\n        d=rand()%10;\n        printf(\"%d %d %d %d\\n\",a,b,c,d);\n        count+=1;\n        if (count&gt;3)\n        {\n            break;\n        }\n    }\n\nreturn 0;        \n}\n</code></pre>\n\n<p>The output should look like this:</p>\n\n<pre><code>1 2 3 4\n1 2 3 4\n1 2 3 4\n</code></pre>\n"}, {"tags": ["c", "memory-management", "memory-leaks"], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1522226230, "post_id": 49529712, "comment_id": 86065192, "body": "(Nitpick in Java, only <code>java.lang.Object</code> types and arrays of primitives or <code>java.lang.Object</code>s are schedulable for garbage collection: i.e. anything created with <code>new</code>. But +1 anyway.)"}, {"owner": {"reputation": 16371, "user_id": 479251, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9870fa7c3f578b33976c7a770cbff4b2?s=128&d=identicon&r=PG", "display_name": "Pac0", "link": "https://stackoverflow.com/users/479251/pac0"}, "edited": false, "score": 0, "creation_date": 1522272048, "post_id": 49529712, "comment_id": 86096449, "body": "I&#39;d rather say that &quot;Java is slower than C by design&quot; instead of the other way round, by looking at their relative age ;)"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 4, "last_activity_date": 1522226076, "creation_date": 1522226076, "answer_id": 49529712, "question_id": 49529567, "link": "https://stackoverflow.com/questions/49529567/can-assigning-many-basic-data-types-cause-memory-leakage-and-can-you-avoid-it/49529712#49529712", "title": "Can assigning many basic data types cause memory leakage, and can you avoid it?", "body": "<p>The local variable has <em>automatic storage duration</em>. Meaning that the compiler will automatically pick the best place to store it, and automatically clean up when the variable goes out of scope at <code>}</code>. In practice, the CPU will likely store the variable in a CPU register. So your code is fine.</p>\n\n<p>The only time you need to <code>free</code> is when you use allocated storage, by explicitly calling malloc/calloc/realloc. Languages like Java with garbage collection use implicit heap allocation everywhere, behind the lines. C does not do this, which is one of many reasons why C is so much faster than Java by design.</p>\n"}], "owner": {"reputation": 33, "user_id": 8989180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9dea1e52eb88179659ae919e3afb552?s=128&d=identicon&r=PG&f=1", "display_name": "amtize", "link": "https://stackoverflow.com/users/8989180/amtize"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 49529712, "answer_count": 1, "score": 0, "last_activity_date": 1522226076, "creation_date": 1522225623, "question_id": 49529567, "link": "https://stackoverflow.com/questions/49529567/can-assigning-many-basic-data-types-cause-memory-leakage-and-can-you-avoid-it", "title": "Can assigning many basic data types cause memory leakage, and can you avoid it?", "body": "<p>Say I have a program like this:</p>\n\n<pre><code>int main(void) {\n    while(1) {\n        int some_int = rand(); //Some randomly generated integer\n        printf(\"%d\\n\", some_int);\n    }\n    return 1;\n}\n</code></pre>\n\n<p>The program spins in an infinite loop, declaring <code>some_int</code> in every iteration. I am aware that if you allocate some memory you should free it at a later stage to avoid memory leakage in a program, and to my knowledge there is no garbage collector in C to free memory that unused variables. Does this mean that my current implementation causes memory leaking since I declare a new integer that I only use once? Is there any way to \"free\" the memory it uses?</p>\n\n<p>You could of course move the variable declaration outside of the infinite loop but this is only a theoretical case.</p>\n"}, {"tags": ["c", "gcc", "language-lawyer"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1522225264, "post_id": 49529130, "comment_id": 86064549, "body": "However, ordinary statements (like <code>x=y+2;</code> or <code>puts(&quot;aa&quot;);</code> or blocks) cannot appear inside a <code>struct</code> definition. Why can empty <i>statements</i> appear in it, but not other kind of statements?"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1522225914, "post_id": 49529130, "comment_id": 86064973, "body": "@P.P. Not a duplicate. This semicolon is inside <code>struct</code> declaration. <b>Not</b> a null-statement."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1522226062, "post_id": 49529130, "comment_id": 86065068, "body": "@P.P.  This isn&#39;t really a duplicate. <code>;</code> is not a statement inside the declaration. My answer is moot whatever the upvotes, I have deleted it."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522226137, "post_id": 49529130, "comment_id": 86065126, "body": "@Jean-Fran&#231;oisFabre I have already reopened it."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1522226198, "post_id": 49529130, "comment_id": 86065166, "body": "@P.P. I had my finger on the button :) thanks."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522226235, "post_id": 49529130, "comment_id": 86065195, "body": "My guess is that compilers tolerate it, since they are harmless. They expect one or more <code>;</code>."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522226429, "post_id": 49529130, "comment_id": 86065346, "body": "2 downvotes and no answers? come on!"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522226529, "post_id": 49529130, "comment_id": 86065431, "body": "@Jean-Fran&#231;oisFabre Not the downvoter, but I think the answer to this question will be a boring parsing check, not very interesting. This <a href=\"https://godbolt.org/g/JK1dyk\" rel=\"nofollow noreferrer\">pedantic link</a> already answers the question."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1522226619, "post_id": 49529130, "comment_id": 86065494, "body": "@liliscent you should make that an answer. As now we&#39;re suspecting that it&#39;s implementation defined."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1522226857, "post_id": 49529130, "comment_id": 86065652, "body": "Your actual code have 3 pedantics errors... <a href=\"http://rextester.com/XKKK47051\" rel=\"nofollow noreferrer\">rextester.com/XKKK47051</a>"}, {"owner": {"reputation": 212, "user_id": 9418834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8970882a6adb3bf98785773db9f554a5?s=128&d=identicon&r=PG&f=1", "display_name": "N. Paul", "link": "https://stackoverflow.com/users/9418834/n-paul"}, "edited": false, "score": 0, "creation_date": 1522227578, "post_id": 49529130, "comment_id": 86066175, "body": "Well, my actual initializer list (not the example here) is non-empty"}], "answers": [{"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1522225383, "post_id": 49529242, "comment_id": 86064613, "body": "What kind of statements can appear inside a <code>struct</code> declaration? (intuitively, I would believe that none)"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1522225765, "post_id": 49529242, "comment_id": 86064863, "body": "This is wrong. You&#39;re referring to the compound-statement section, which is irrelevant to the question. Instead, it&#39;s part of <a href=\"https://busybox.net/~landley/c99-draft.html#6.7.2.1\" rel=\"nofollow noreferrer\"><b>declaration</b></a>. And an extra semicolon is <a href=\"https://godbolt.org/g/c6vE8B\" rel=\"nofollow noreferrer\">pedantically wrong</a>."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522225993, "post_id": 49529242, "comment_id": 86065028, "body": "there&#39;s nothing specific in the norm about declarations and semicolons, you&#39;re right."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522248969, "post_id": 49529242, "comment_id": 86082506, "body": "@Jean-Fran&#231;oisFabre: Sidenote: ISO9899 is a <i>standard</i>, not just a <i>norm</i>. Maybe they are perfect false friends in your language (I know they are in English/German)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522249289, "post_id": 49529242, "comment_id": 86082754, "body": "first time I&#39;m quoting the norm (standard, sorry) in an answer :) Edited"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522249541, "post_id": 49529242, "comment_id": 86082955, "body": "Well, actually you didn&#39;t quote it. I corrected that, if you don&#39;t mind ;-) (bookmarking the document I linked might be helpful)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522249882, "post_id": 49529242, "comment_id": 86083263, "body": "I don&#39;t mind at all. thanks. BTW as you see there are still some interesting C questions."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 4, "last_activity_date": 1522249492, "last_edit_date": 1522249492, "creation_date": 1522224548, "answer_id": 49529242, "question_id": 49529130, "link": "https://stackoverflow.com/questions/49529130/are-extra-semicolons-allowed-inside-struct-declarations/49529242#49529242", "title": "Are extra semicolons allowed inside struct declarations?", "body": "<p>The standard doesn't talk about that, it's just a <code>gcc</code> tolerance. See <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.2.1\" rel=\"nofollow noreferrer\">6.7.2.1</a>:</p>\n\n<blockquote>\n<pre><code>struct-or-union-specifier:\n              struct-or-union identifieropt { struct-declaration-list }\n              struct-or-union identifier\nstruct-or-union:\n             struct\n             union\nstruct-declaration-list:\n             struct-declaration\n             struct-declaration-list struct-declaration\nstruct-declaration:\n             specifier-qualifier-list struct-declarator-listopt ;\n             static_assert-declaration\nspecifier-qualifier-list:\n            type-specifier specifier-qualifier-listopt\n            type-qualifier specifier-qualifier-listopt\n</code></pre>\n</blockquote>\n\n<p>(<code>type-specifier</code> and <code>type-qualifier</code> can't be empty, see the related sections in the standard for details.)</p>\n\n<hr>\n\n<p>Some compilers, like gcc, tolerate extra semi-colons, but <code>-Wpedantic</code> option reveals that it's only a tolerance:</p>\n\n<pre><code>struct foo {\n    int a;\n    ;;;\n};\n\nint main() {\n    ;;;\n}\n</code></pre>\n\n<p>With -pedantic option gcc complains, not on the main empty statements, but on the extra semicolons of the structure declaration.</p>\n\n<pre><code>&lt;source&gt;:3:5: warning: extra semicolon in struct or union specified [-Wpedantic]\n     ;;;\n     ^\n&lt;source&gt;:3:6: warning: extra semicolon in struct or union specified [-Wpedantic]\n     ;;;\n      ^\n&lt;source&gt;:3:7: warning: extra semicolon in struct or union specified [-Wpedantic]\n     ;;;\n</code></pre>\n\n<p>Other compilers may not be that friendly, so the typo must be fixed, since it doesn't bring anything useful.</p>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522226658, "post_id": 49529900, "comment_id": 86065518, "body": "however some compilers tolerate that (and issue a warning)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1522226773, "post_id": 49529900, "comment_id": 86065593, "body": "@Jean-Fran&#231;oisFabre I noticed gcc does, which is why compiling with <code>-pedantic-errors</code> is a good idea if strict C standard conformance is important. Adding extra semi-colons would make the code non-standard and non-portable."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522227650, "post_id": 49529900, "comment_id": 86066218, "body": "I have added the gcc missing bit. I hope you don&#39;t mind (I cannot undelete my wrongly upvoted answer for this, but I think lilliscent comment deserves to be officialized)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522227952, "post_id": 49529900, "comment_id": 86066434, "body": "@Jean-Fran&#231;oisFabre I do mind it, since I don&#39;t really care about what gcc does and does not in &quot;gnu poop mode&quot;. If gcc is to be used, always compile with <code>-std=c11 -pedantic-errors</code> or otherwise that compiler is kind of dangerous. No other C compiler accepts this, I just tried two different ones (IAR and Codewarrior) and they give compiler errors by default."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522228093, "post_id": 49529900, "comment_id": 86066543, "body": "no worries, I just made my answer CW (with all the wrong upvotes and all :)) and added my bit. Feel free to downvote :) (sorry about OP accepting my answer instead... that wasn&#39;t meant for this, since it&#39;s CW)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522228458, "post_id": 49529900, "comment_id": 86066844, "body": "@Jean-Fran&#231;oisFabre It&#39;s not incorrect, just irrelevant. In &quot;gnu poop mode&quot; you can write all manner of crazy non-C, such as zero-sized arrays."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 8, "last_activity_date": 1522227768, "last_edit_date": 1522227768, "creation_date": 1522226624, "answer_id": 49529900, "question_id": 49529130, "link": "https://stackoverflow.com/questions/49529130/are-extra-semicolons-allowed-inside-struct-declarations/49529900#49529900", "title": "Are extra semicolons allowed inside struct declarations?", "body": "<p>The syntax is specified in C11 6.7.2.1</p>\n\n<blockquote>\n  <p><em>struct-declaration:<br>\n    specifier-qualifier-list struct-declarator-listopt <strong>;</strong><br>\n    static_assert-declaration</em></p>\n</blockquote>\n\n<p>There is 1 semicolon at the end, so that's the only allowed syntax. You cannot skip the semicolon, you can't add extra ones. And that's that.</p>\n\n<p>(You can however have a static assert inside a struct declaration, from C11.)</p>\n"}], "owner": {"reputation": 212, "user_id": 9418834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8970882a6adb3bf98785773db9f554a5?s=128&d=identicon&r=PG&f=1", "display_name": "N. Paul", "link": "https://stackoverflow.com/users/9418834/n-paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 49529242, "answer_count": 2, "score": 6, "last_activity_date": 1522249492, "creation_date": 1522224143, "last_edit_date": 1522235498, "question_id": 49529130, "link": "https://stackoverflow.com/questions/49529130/are-extra-semicolons-allowed-inside-struct-declarations", "title": "Are extra semicolons allowed inside struct declarations?", "body": "<p>This question is by mere curiosity. It is <em>not</em> about the empty struct.</p>\n\n<p>I just stumbled over an interesting typo of the kind</p>\n\n<pre><code>struct {\n     int member1; /*comment*/ ; /* &lt;-- note the ';' */\n     int member2;\n} variable[] = { /* initializers */ };\n</code></pre>\n\n<p>which the compiler (xc32, derived from gcc) accepted without any\ncomplaints. Of course, I corrected this but the software was running \nsmoothly before and after the correction and the additional <code>;</code> seemingly \ncauses no problems. I then tried various lengthes of <code>;;;</code> in he struct definition an they seem to make no difference neither to functionality \nnor to <code>sizeof</code>. So in a <code>struct</code> any sequence of <code>;;;;</code> seems to be \nequivalent to a single <code>;</code>.</p>\n\n<p>I couldn't find anything about such \"empty members\" of a struct/union\nin the specification, neither that they are allowed nor that they are \ndisallowed. To me it seems as if the grammar rejected them. This contrasts \nto \"empty declarations\" <code>;</code> at the top level of a compilation unit, which the \nstandard clearly forbids and the \"null\" statement <code>;</code> in functions which is a \nclearly allowed language feature. </p>\n\n<p>Does anyone know about this behaviour? Is it compiler specific or does the \nC specification somehow tolerate such empty struct members? </p>\n"}, {"tags": ["c", "if-statement", "struct", "string-comparison"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1522223850, "post_id": 49528991, "comment_id": 86063719, "body": "With <code>less==record[i].lesson</code> you compare a single character (<code>less</code>) with a pointer (<code>record[i].lesson</code> decays to a pointer to its first element)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1522223888, "post_id": 49528991, "comment_id": 86063738, "body": "Oh, and <code>scanf(&quot;%s&quot;,less);</code> is <i>very</i> wrong. Perhaps you should go find a beginners book and start reading it from the start?"}, {"owner": {"reputation": 5535, "user_id": 1173638, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Mq0Io.gif?s=128&g=1", "display_name": "Adder", "link": "https://stackoverflow.com/users/1173638/adder"}, "edited": false, "score": 0, "creation_date": 1522223902, "post_id": 49528991, "comment_id": 86063747, "body": "You should use <code>strcmp</code>. <a href=\"https://stackoverflow.com/questions/19479232/comparing-two-strings-problems-with-strcmp\">SO on strcmp</a>"}, {"owner": {"reputation": 2104, "user_id": 4635537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad50ed18dff8aaff0ff427ea7b1067d?s=128&d=identicon&r=PG", "display_name": "sameerkn", "link": "https://stackoverflow.com/users/4635537/sameerkn"}, "edited": false, "score": 1, "creation_date": 1522224002, "post_id": 49528991, "comment_id": 86063800, "body": "<code>less</code> is incorrectly as <code>char</code>. It should be <code>char less[256] = {0};</code>   Also, use <code>strcmp</code> for string comparison."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1522224168, "post_id": 49528991, "comment_id": 86063902, "body": "<code>char less;</code>-&gt; <code>char less[10];</code> and <code>if(less==record[i].lesson)</code> -&gt; <code>if (strcmp(less, record[i].lesson) == 0)</code>. Read the chapter dealing with strings in your C text book. Also learn how code should be formatted. The samples in your C text book are formatted correctly."}, {"owner": {"reputation": 1, "user_id": 9562550, "user_type": "registered", "profile_image": "https://graph.facebook.com/587634244942972/picture?type=large", "display_name": "\u039c\u03b9\u03c7\u03ac\u03bb\u03b7\u03c2 \u039c\u03bf\u03bd\u03ad\u03c2", "link": "https://stackoverflow.com/users/9562550/%ce%9c%ce%b9%cf%87%ce%ac%ce%bb%ce%b7%cf%82-%ce%9c%ce%bf%ce%bd%ce%ad%cf%82"}, "edited": false, "score": 0, "creation_date": 1522224513, "post_id": 49528991, "comment_id": 86064096, "body": "Thank you very much !!! YOU SAVED ME!"}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1522227787, "post_id": 49529230, "comment_id": 86066308, "body": "Also, <code>scanf(&quot;%s&quot;, less);</code> should have width limit. Current version is as bad as <code>gets</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1522227849, "post_id": 49529230, "comment_id": 86066354, "body": "@user694733 sure, that&#39;s part of the things that can be improved."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1522224503, "creation_date": 1522224503, "answer_id": 49529230, "question_id": 49528991, "link": "https://stackoverflow.com/questions/49528991/compare-strings-with-if-statenent-in-c/49529230#49529230", "title": "Compare Strings with if statenent in C", "body": "<p>You want this:</p>\n\n<ul>\n<li>better formatting</li>\n<li><code>less</code> declared correctly as <code>char less[10];</code></li>\n<li>using <code>strcmp</code> for string comparision instead of <code>==</code></li>\n</ul>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct student{\n    char name[10];\n    char lesson[10];\n} students;\n\nint main()\n{\n    students record[10];\n    char less[10];\n    strcpy(record[0].name, \"James\");\n    strcpy(record[0].lesson, \"maths\");\n    strcpy(record[1].name, \"John\");\n    strcpy(record[1].lesson, \"maths\");\n    strcpy(record[2].name, \"Harry\");\n    strcpy(record[2].lesson, \"C/C++\");\n    printf(\"Give Lesson\\n\");\n    scanf(\"%s\", less);\n\n    for (int i = 0; i &lt; 3; i++) {\n      if (strcmp(less, record[i].lesson) == 0)\n      printf(\"%s\\n\",record[i].name);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>There is still much room for improvement.</p>\n"}], "owner": {"reputation": 1, "user_id": 9562550, "user_type": "registered", "profile_image": "https://graph.facebook.com/587634244942972/picture?type=large", "display_name": "\u039c\u03b9\u03c7\u03ac\u03bb\u03b7\u03c2 \u039c\u03bf\u03bd\u03ad\u03c2", "link": "https://stackoverflow.com/users/9562550/%ce%9c%ce%b9%cf%87%ce%ac%ce%bb%ce%b7%cf%82-%ce%9c%ce%bf%ce%bd%ce%ad%cf%82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1522250466, "answer_count": 1, "score": -1, "last_activity_date": 1522227450, "creation_date": 1522223723, "last_edit_date": 1522227450, "question_id": 49528991, "link": "https://stackoverflow.com/questions/49528991/compare-strings-with-if-statenent-in-c", "closed_reason": "Duplicate", "title": "Compare Strings with if statenent in C", "body": "<p>I'm a beginner in c programming and i'have come to a point (pretty ridiculous) that i'm stuck at an if statement between two strings.</p>\n\n<p>In this program, i want the user to input a lesson of a student saved in a structure, then it should search for students with the same lesson and print them on screen. </p>\n\n<p>My problem is at <code>if statement</code>, for some reason (memory address maybe?) when i type the same characters, it sees them for different strings.\nThe code just \"skips\" the if part. Although it works when i declare <code>if(record[0].lesson!=\"maths\")</code> for instance.</p>\n\n<p>i have tried lots of things such as <code>strcmp</code>, </p>\n\n<p><code>if (record[0].lesson==record[1].lesson)</code></p>\n\n<p><code>if(record[0].lesson==\"maths\")</code>... and other. </p>\n\n<p>I would highly appreciate it if you could help me. thank you very much.</p>\n\n<pre><code># include &lt;stdio.h&gt;\n# include &lt;string.h&gt;\ntypedef struct student{\n    char name[10];\n    char lesson[10];\n}students;\n\nint main()\n{\n    students record[10];\n    char less;\n    strcpy(record[0].name,\"James\");\n    strcpy(record[0].lesson,\"maths\");\n    strcpy(record[1].name,\"John\");\n    strcpy(record[1].lesson,\"maths\");\n    strcpy(record[2].name,\"Harry\");\n    strcpy(record[2].lesson,\"C/C++\");\n    printf(\"Give Lesson\\n\");\n    scanf(\"%s\",less);\n    for(int i=0;i&lt;3;i++){\n    if(less==record[i].lesson)\n    printf(\"%s\\n\",record[i].name);}\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1522222316, "post_id": 49528572, "comment_id": 86062720, "body": "<code>it should be fast</code>..compared to??"}, {"owner": {"reputation": 519, "user_id": 7429823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285fb82459c7dce4f022d1fde9cb036e?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh", "link": "https://stackoverflow.com/users/7429823/ashutosh"}, "edited": false, "score": 5, "creation_date": 1522222513, "post_id": 49528572, "comment_id": 86062850, "body": "Finding all the subsets will take 2^n iterations, whether you like it or not. That&#39;s how it is."}, {"owner": {"reputation": 40344, "user_id": 1796579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14d3685f0765c738fd90c7ec71fa9ba?s=128&d=identicon&r=PG", "display_name": "Henry", "link": "https://stackoverflow.com/users/1796579/henry"}, "edited": false, "score": 0, "creation_date": 1522222520, "post_id": 49528572, "comment_id": 86062854, "body": "Not sure what &quot;Print subsets N of given set K&quot; actually means. But in general there are a lot of subsets, so this isn&#39;t going to be fast for larger sets."}, {"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1522222622, "post_id": 49528572, "comment_id": 86062926, "body": "Maybe the sets are unordered, and you&#39;re only supposed to print unique combinations\u2026?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1522222845, "post_id": 49528572, "comment_id": 86063058, "body": "Well, you could remove the conditional from the loop, and simply print the newline after the loop!"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1522225180, "post_id": 49528572, "comment_id": 86064503, "body": "No, because how do you know if you have to printf a space or not ? It true that visually, &quot;1 2 3\\n&quot; and &quot;1 2 3 \\n&quot; is the same, but sometime you have to follow a hard format (because it will be used by other program) and the extra space can&#39;t be tolerated."}, {"owner": {"reputation": 9, "user_id": 9558359, "user_type": "registered", "profile_image": "https://graph.facebook.com/1148227828653038/picture?type=large", "display_name": "Roy Yoon", "link": "https://stackoverflow.com/users/9558359/roy-yoon"}, "edited": false, "score": 0, "creation_date": 1522227835, "post_id": 49528572, "comment_id": 86066340, "body": "And all have to be generated in 1 second. I will attach whole code"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1522228038, "post_id": 49528572, "comment_id": 86066497, "body": "Are you sure that 5 3 should give &quot;1 2&quot; as a solution ? What &quot;3&quot; stand for ? Because for me, it seem that the solution should have &quot;3&quot; element, not only 2 like in &quot;1 2&quot;."}, {"owner": {"reputation": 9, "user_id": 9558359, "user_type": "registered", "profile_image": "https://graph.facebook.com/1148227828653038/picture?type=large", "display_name": "Roy Yoon", "link": "https://stackoverflow.com/users/9558359/roy-yoon"}, "edited": false, "score": 0, "creation_date": 1522228285, "post_id": 49528572, "comment_id": 86066707, "body": "Maybe I should have written this N means 1~n so An={1, 2, 3, ... n} And K means the size of subset"}, {"owner": {"reputation": 9, "user_id": 9558359, "user_type": "registered", "profile_image": "https://graph.facebook.com/1148227828653038/picture?type=large", "display_name": "Roy Yoon", "link": "https://stackoverflow.com/users/9558359/roy-yoon"}, "edited": false, "score": 0, "creation_date": 1522228825, "post_id": 49528572, "comment_id": 86067092, "body": "So when you scan 5 3 It should be 1 2, 1 3, 1 4, 1 5, 2 3, 2 4, 2 5, 3 4, 3 5, 4 5"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1522238498, "post_id": 49528572, "comment_id": 86074174, "body": "If the order of the answer doesn&#39;t matter, you could use multi-threading, but be advised that multi-threading performance are hugely linked to the hardware where the program run. Your code could be simplified a little (var arr useless since it &quot;1 to n&quot;) but since the recursion is mandatory, I don&#39;t see any way of improving your algorithm itself. If the recursion was optionnal, then using array to &quot;simulate&quot; the recursion should be a little quicker (no function call, which come to a cost when used in recursion like that), but not something to pass under the 1 seconde threeshold."}, {"owner": {"reputation": 9, "user_id": 9558359, "user_type": "registered", "profile_image": "https://graph.facebook.com/1148227828653038/picture?type=large", "display_name": "Roy Yoon", "link": "https://stackoverflow.com/users/9558359/roy-yoon"}, "reply_to_user": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1522239811, "post_id": 49528572, "comment_id": 86075138, "body": "@Tom&#39;s Yeah I was thinking that too that simulating the recursive. But I could not find any answer. So if the recursion doesn&#39;t matter how should I solve this?  I don&#39;t really know about multi-threading but the order matters so I don&#39;t think that is the way."}, {"owner": {"reputation": 9, "user_id": 9558359, "user_type": "registered", "profile_image": "https://graph.facebook.com/1148227828653038/picture?type=large", "display_name": "Roy Yoon", "link": "https://stackoverflow.com/users/9558359/roy-yoon"}, "edited": false, "score": 0, "creation_date": 1522239910, "post_id": 49528572, "comment_id": 86075208, "body": "And to think of this, it is actually same as searching values of Combination method. Is there any good algorithm with it?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522248698, "post_id": 49528572, "comment_id": 86082272, "body": "&quot;All problem should be done within 1 second&quot; - Simple solution: get a faster computer."}, {"owner": {"reputation": 93252, "user_id": 861716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb1a28030a6da0e72693e36c77eb3cd6?s=128&d=identicon&r=PG", "display_name": "Gert Arnold", "link": "https://stackoverflow.com/users/861716/gert-arnold"}, "edited": false, "score": 0, "creation_date": 1522248992, "post_id": 49528572, "comment_id": 86082527, "body": "I&#39;m voting to close this question as off-topic because questions about improving <i>working code</i> belong on <a href=\"https://codereview.stackexchange.com/help/on-topic\">Code Review</a>."}, {"owner": {"reputation": 7441, "user_id": 1575353, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rvz3i.png?s=128&g=1", "display_name": "S\u1d00\u1d0d On\u1d07\u1d0c\u1d00", "link": "https://stackoverflow.com/users/1575353/s%e1%b4%80%e1%b4%8d-on%e1%b4%87%e1%b4%8c%e1%b4%80"}, "reply_to_user": {"reputation": 93252, "user_id": 861716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb1a28030a6da0e72693e36c77eb3cd6?s=128&d=identicon&r=PG", "display_name": "Gert Arnold", "link": "https://stackoverflow.com/users/861716/gert-arnold"}, "edited": false, "score": 1, "creation_date": 1522250950, "post_id": 49528572, "comment_id": 86084072, "body": "@GertArnold It is okay to recommend the OP post on CR but in the future, please don&#39;t use Code Review as a reason to close a question. Evaluate the request and use a reason like <i>too broad</i>, <i>primarily opinion-based</i>, etc. Then you can mention to the OP that it can be posted on Code Review if it is <a href=\"https://codereview.stackexchange.com/help/on-topic\">on-topic</a>. Please see the section <b>What you should not do</b> in <a href=\"https://codereview.meta.stackexchange.com/a/5778/120114\">this answer to <i>A guide to Code Review for Stack Overflow users</i></a>"}, {"owner": {"reputation": 93252, "user_id": 861716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb1a28030a6da0e72693e36c77eb3cd6?s=128&d=identicon&r=PG", "display_name": "Gert Arnold", "link": "https://stackoverflow.com/users/861716/gert-arnold"}, "reply_to_user": {"reputation": 7441, "user_id": 1575353, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rvz3i.png?s=128&g=1", "display_name": "S\u1d00\u1d0d On\u1d07\u1d0c\u1d00", "link": "https://stackoverflow.com/users/1575353/s%e1%b4%80%e1%b4%8d-on%e1%b4%87%e1%b4%8c%e1%b4%80"}, "edited": false, "score": 0, "creation_date": 1522251202, "post_id": 49528572, "comment_id": 86084240, "body": "@SamOnela I only do this when the question in its current form would fit on CR, not when it would be off-topic there to begin with, but OK, noted."}], "answers": [{"comments": [{"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1522244584, "post_id": 49529287, "comment_id": 86078830, "body": "I&#39;ve edited my answer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522248791, "post_id": 49529287, "comment_id": 86082363, "body": "Depending on the system, <code>printf</code> is already buffered."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522248879, "post_id": 49529287, "comment_id": 86082430, "body": "Yes, but &quot;\\n&quot; force flush the buffer. Did you read my answer ?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1522249696, "post_id": 49529287, "comment_id": 86083095, "body": "That&#39;s implementtion defined, too. Anyway, we don&#39;t do code reviews like the one requested. Please refrain from answering off-topic questions."}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522250008, "post_id": 49529287, "comment_id": 86083367, "body": "I was surprised by what you say, and I checked the manual of printf and indeed, there are not a word about the buffering or &quot;\\n&quot; behavior. So, yikes, my bad. And sorry for the &quot;off-topic&quot; answer, i&#39;m rather new and from my point of view, it&#39;s a question that can have an answer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1522250197, "post_id": 49529287, "comment_id": 86083507, "body": "&quot;How to grill a steak right to the point&quot; also has an answer. Yet it would be off-topic here, too and should be closed and deleted, not answered. (and &gt;2 years and 1k rep is definitively not &quot;rather new&quot;)"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522250955, "post_id": 49529287, "comment_id": 86084079, "body": "Well, I don&#39;t intend to pollute the comment section, but since you&#39;re putting your word this way, I answer : I think there are a rather huge difference between &quot;How to grill a steak to the point&quot; and &quot;How can I make this code faster&quot;. Excuse me if I don&#39;t see the similarity between them. And also, yes, I&#39;m rather new at answering SO question : you have checked the year of creation, but check when I earned the 1K rep, and you will see that 75% or more is the past month. I don&#39;t have a really good level in english, that&#39;s why I never really answered before this point. Because sometime, it&#39;s hard"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522251007, "post_id": 49529287, "comment_id": 86084108, "body": "for me to understand some subtility (&quot;should&quot; / &quot;must&quot;, for exemple) and sometime it&#39;s hard to explain with clarity what I mean."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522251275, "post_id": 49529287, "comment_id": 86084302, "body": "It&#39;s as simple as &quot;they are both <b>obviously</b> off-topic. And the rest is a non sequitur. If you join a community, you are expected to follow the rules. Try moving to a different country, violate a rule and state &quot;I&#39;m new here&quot;. Ignorantia legis non excusat. Anyway, I&#39;ll leave it here. (oh, and your English is well enough)"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1522251529, "post_id": 49529287, "comment_id": 86084504, "body": "Ever heard about the word &quot;tolerance&quot; ? It obvious for you, and I say it&#39;s not obvious for me. When I do something, I try to apply by the rules, but if the rules were binary, then we will have no use of judge, advocat and jurist. And I like to see YOU going somewhere and magically know all the rules and act accordingly to them. Especially a country, since you take that as exemple."}], "tags": [], "owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "is_accepted": false, "score": 1, "last_activity_date": 1522309767, "last_edit_date": 1522309767, "creation_date": 1522224693, "answer_id": 49529287, "question_id": 49528572, "link": "https://stackoverflow.com/questions/49528572/find-subsets-of-size-k-in-n-set/49529287#49529287", "title": "Find subsets of size K in N set", "body": "<p>The only way to increase your \"speed algorithm\" without touching it is to manually bufferise printf.</p>\n\n<p>printf is a function that will do a <a href=\"https://stackoverflow.com/questions/21084218/difference-between-write-and-printf?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">system call</a> at some time.\nEvery system call is costly, that's why each function that do some kind of system call usually do \"buffering\".</p>\n\n<p>For malloc, in reallity, you allocate much more that you think (malloc(1) will not end up by allocating 1 octet but much more under the hood) and when you free the memory, in reallity it's not really released (that way, if you do another malloc, you will not do a system call but reuse the memory freed). Of course, it's OS dependant AND inmplementation dependend (all is under the hood).\nYou can see some system call under linux by using \"strace\".</p>\n\n<p>The same thing apply to \"printf\" : since it will do a system call, there a buffer that retain what you want to print and do the print only time to time.</p>\n\n<p>So when the printf's buffer is really printed ?\nWe can't know, it's implementation defined (event the man page of printf doesn't say a word about the printf buffering), but usually, it can be at 3 occasion :</p>\n\n<ul>\n<li>when the buffer is full</li>\n<li>when you force the flush by using fflush</li>\n<li>when you have the '\\n' caracter in what you want to print.</li>\n</ul>\n\n<p>Since you do an \"\\n\" at each subnet, printf may have to do the system call every time : it's time consumming.</p>\n\n<p>By using a buffer and print in the buffer instead of stdout, you can speed up your code :</p>\n\n<pre><code>#define BUF_LEN 2048\n\ntypedef struct mybuf {\n    char   buffer[BUF_LEN];\n    size_t len;\n} mybuf;\n\n// For convenience, I use global varaible, but it's BAD\nmybuf buf = {.buffer = \"\", .len = 0};\n\nvoid MyBuf_PrintOnStdout(void)\n{\n    write(1, buf.buffer, buf.len);\n    buf.len = 0;\n}\n\nvoid MyBuf_Flush(void)\n{\n    MyBuf_PrintOnStdout();\n    fflush(stdout);\n}\n\nvoid MyBuf_PrintInteger(int integer)\n{\n    int printedLen;\n\n    // An 64bit integer take 20digit + 1 char for potential \"-\"\n    // So 21 is the max len for an integer.\n    // Of course, if your int is bigger than 64bit, this if is false.\n    if (buf.len + 21 &gt;= BUF_LEN) {\n        MyBuf_PrintOnStdout();\n    }\n    printedLen = sprintf(buf.buffer + buf.len, \"%d\", integer);\n    // Error check (printedLen &lt; 0 == error)\n    buf.len += printedLen;\n\n}\n\nvoid MyBuf_PrintCharacter(char character)\n{\n    if (buf.len + 1 &gt;= BUF_LEN) {\n        MyBuf_PrintOnStdout();\n    }\n    buf.buffer[buf.len] = character;\n    ++buf.len;\n}\n\nvoid subset(int n, int k, int arr[], int pos[], int index, int start)\n{   \n    if (index == k) {\n        for (int j = 0; j &lt; k; ++j) {\n            MyBuf_PrintInteger(pos[j]);\n            MyBuf_PrintCharacter(j == k-1 ? '\\n' : ' ');\n        }\n        return;\n    }\n\n    for(int i = start; i&lt;n; i++){\n        pos[index] = arr[i]; \n        subset(n, k, arr, pos, index+1, i+1);\n    }\n}\n</code></pre>\n\n<p>Don't forget to call \"MyBuf_Flush\" at the end, because without it you will probably missing some printing.</p>\n\n<p>Edit : With the complet code, I do some testing.\nWhile it's true there is improvement (N = 30, k = 20 with your code take ~88s and with the write take ~78s), it really too poor to make that work on less than 1s.\nIs it possible to resolve your problem without having a supercalculator ?</p>\n\n<hr>\n\n<p>Another edit : Okay, I have confused the meaning of \"should\" and \"must\", sorry. English is not my motherlanguage. (I thinked that you must use recursion).</p>\n\n<p>Since you are free to not use recursion, here something interesting :\nI've implemented recursion and not recursion of n=30, k=20.\nFor each implementation, I have enable and disabled the printing.</p>\n\n<p>The result are clear :</p>\n\n<ul>\n<li>recursion, printing with printf : ~88s</li>\n<li>recursion, printing buffered : ~78s</li>\n<li>recursion, no printing : ~7s</li>\n</ul>\n\n<p>--</p>\n\n<ul>\n<li>no recursion, printing with printf : ~80s</li>\n<li>no recursion, printing buffered : ~70s</li>\n<li>no recursion, no printing : ~0,47s</li>\n</ul>\n\n<p>So in conclusion, it's more the printing part that is really taking time than finding the solution itself.</p>\n\n<p>Here the no recursive implementation :</p>\n\n<pre><code>#define BUF_LEN 4096\n\ntypedef struct mybuf {\n    char   buffer[BUF_LEN];\n    size_t len;\n} mybuf;\n\n// For convenience, I use global varaible, but it's BAD\nmybuf buf = {.buffer = \"\", .len = 0};\n\nvoid MyBuf_PrintOnStdout(void)\n{\n    /*buf.buffer[buf.len] = '\\0';\n    printf(\"%s\", buf.buffer);*/\n    write(1, buf.buffer, buf.len);\n    buf.len = 0;\n\n\n}\n\nvoid MyBuf_Flush(void)\n{\n    MyBuf_PrintOnStdout();\n    fflush(stdout);\n}\n\nvoid MyBuf_PrintInteger(int integer)\n{\n    int printedLen;\n\n    if (buf.len + 21 &gt;= BUF_LEN) {\n        MyBuf_PrintOnStdout();\n    }\n    printedLen = sprintf(buf.buffer + buf.len, \"%d\", integer);\n    // Error check (printedLen &lt; 0 == error)\n    buf.len += printedLen;\n\n}\n\nvoid MyBuf_PrintCharacter(char character)\n{\n    if (buf.len + 1 &gt;= BUF_LEN) {\n        MyBuf_PrintOnStdout();\n    }\n    buf.buffer[buf.len] = character;\n    ++buf.len;\n}\n\n\nvoid subset_no_recursion(int n, int k)\n{\n    int pos[k];\n\n    for (int i = 0; i &lt; k; ++i) {\n        pos[i] = k - i;\n    }\n\n    for (;;) {\n        // Last digit incrementation\n        while (pos[0] &lt;= n) {\n            /* print\n            for (int i = k - 1; i &gt;= 0; --i) {\n                MyBuf_PrintInteger(pos[i]);\n                MyBuf_PrintCharacter(i == 0 ? '\\n' : ' ');\n            }*/\n\n            ++pos[0];\n        }\n\n        // We find where we can increment the digit without overflow N\n        int pivot = 1;\n        while (pos[pivot] == n - pivot) {\n            ++pivot;\n        }\n        if (pivot == k) {\n            return;\n        }\n        ++pos[pivot];\n        while (pivot) {\n            pos[pivot - 1] = pos[pivot] + 1;\n            --pivot;\n        }\n    }\n}\n\n\nvoid subset_recursion(int n, int k, int pos[], int index, int start)\n{\n    if (index == k) {\n        for (int i = 0; i &lt; k; ++i) {\n            MyBuf_PrintInteger(pos[i]);\n            MyBuf_PrintCharacter(i == k-1 ? '\\n' : ' ');\n        }\n        return;\n    }\n\n    for (int i = start; i &lt; n; i++) {\n        pos[index] = i + 1;\n        subset_recursion(n, k, pos, index + 1, i + 1);\n    }\n}\n\n\n\n#define N 30\n#define K 20\n\nint main(void)\n{\n    int pos[K];\n    time_t clockstart;\n    time_t clockend;\n\n    clockstart = clock();\n    subset3(N, K);\n    clockend = clock();\n\n\n    printf(\"%f\\n\", ((float)(clockend - clockstart)) / CLOCKS_PER_SEC);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9558359, "user_type": "registered", "profile_image": "https://graph.facebook.com/1148227828653038/picture?type=large", "display_name": "Roy Yoon", "link": "https://stackoverflow.com/users/9558359/roy-yoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 1, "closed_date": 1522248992, "answer_count": 1, "score": 0, "last_activity_date": 1522310866, "creation_date": 1522222294, "last_edit_date": 1522310866, "question_id": 49528572, "link": "https://stackoverflow.com/questions/49528572/find-subsets-of-size-k-in-n-set", "closed_reason": "Needs details or clarity", "title": "Find subsets of size K in N set", "body": "<p>The question is.\nThere is a set An, and it consists of integers from 1 to n.</p>\n\n<p>An={1, 2, 3, ..., n}</p>\n\n<p>Print all subsets of An with given size K. And it must be generated in order like the example below.</p>\n\n<p>So for example, n=5 k=3</p>\n\n<p>{1, 2, 3} {1, 2, 4} {1, 2, 5} {1, 3, 4} {1, 3, 5} {1, 4, 5} {2, 3, 4} ... {3, 4, 5}</p>\n\n<p>I am not sure about if there is other way not using recursion. I did this with recursion but the problem is all test cases should be done within 1 sec.\nWhen N and K are like 5, 3 and 12, 6 it is okay but\nWhen it comes to like 50, 48 or 100, 95, it takes too long.\nAll problem should be done within 1 second. \nI am having real struggle with this problem.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nvoid subset(int n, int k, int arr[], int pos[], int index, int start){\n    int i, j;\n\n    if(index == k){\n        for(j=0; j&lt;k; j++){\n            if(j==k-1)\n                printf(\"%d\\n\", pos[j]);\n            else{\n                printf(\"%d \", pos[j]);\n            }\n        }\n        return;\n    }\n\n    for(i=start; i&lt;n; i++){\n        pos[index] = arr[i]; \n        subset(n, k, arr, pos, index+1, i+1);\n    }\n}\n\nint main(){\n    int n, k, arr[100], index=0, start=0;\n\n    scanf(\"%d %d\", &amp;n, &amp;k);\n\n    // 1&lt;=n&lt;=100 ; 1&lt;=k&lt;=n\n    if(n&gt;100||n&lt;1 &amp;&amp; k&gt;n||k&lt;1)\n        return 0;\n\n    int i;\n    for(i=0; i&lt;n; i++)\n        arr[i]=i+1;\n\n    int *pos = (int*)malloc(sizeof(int)*k);\n\n    time_t clockstart=0, clockend=0;\n    float gap;\n    clockstart = clock();\n    subset(n, k, arr, pos, index, start);\n    clockend = clock();\n    gap = (float)(clockend-clockstart)/(CLOCKS_PER_SEC);\n\n    printf(\"%f\\n\", gap);\n\n    return 0;\n}\n</code></pre>\n\n<p>I think i should use something like tail recursion or vector in C++.\nBut I cant figure out with those.</p>\n"}, {"tags": ["c", "linux", "shell", "vector"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1522219234, "post_id": 49527677, "comment_id": 86060904, "body": "Is it possible that you save pointers to the same buffer all the time? Then even if it contains something new each time, dereferencing it will always end up with the same buffers content, which at the end is of course identical via all pointers..."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 1, "creation_date": 1522219280, "post_id": 49527677, "comment_id": 86060931, "body": "It would be easier to help you if you would use english names for your variables and functions. And would it be possible to slim down the code to just the problem you have? <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1522219636, "post_id": 49527677, "comment_id": 86061125, "body": "@Yunnosch hit the nail on the head. You are storing the value of <code>comando</code> in  <code>historial</code>. You need to make copy of  string held in <code>comando</code> when you store the copy in <code>historial</code>. Lookup <code>strdup</code> and use it to make a copy of <code>comando</code> and store the copy in <code>historial</code>."}], "answers": [{"tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 0, "last_activity_date": 1522219634, "creation_date": 1522219634, "answer_id": 49527836, "question_id": 49527677, "link": "https://stackoverflow.com/questions/49527677/my-char-vector-is-saving-the-same-value-in-every-position/49527836#49527836", "title": "My char vector is saving the same value in every position", "body": "<p>Modify your main function like below. Every location of your history array is pointing to same memory location hence you are getting the same information in every location. You have to allocate memory for each command like below:-</p>\n\n<pre><code>int main(){\n char* comando=(char*) malloc(1024);\n int x=1;\ndo{\n   printf(\"%s \",prompt);\n   fflush (stdout);\n   fgets(comando,sizeof(comando),stdin); \n   comando[strcspn(comando, \"\\n\")] = '\\0';\n   printf(\"%s\\n\",comando);\n   if(strcmp(comando,\"hist\")==0){\n     verHistorial();}\n   else{\n     x=ejecutarCom(comando);\n     guardarEnHistorial(comando);\n     comando=(char*) malloc(1024);// You need to allocate memory to store \n//each history records. Also consider whether you really need 1024 bytes of memory make it small\n    printf(\"%i\\n\",x);\n }}while(x!=-1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1522222342, "creation_date": 1522222342, "answer_id": 49528585, "question_id": 49527677, "link": "https://stackoverflow.com/questions/49527677/my-char-vector-is-saving-the-same-value-in-every-position/49528585#49528585", "title": "My char vector is saving the same value in every position", "body": "<p>You are storing a <em>pointer</em> to the command buffer, not the command itself. As the address of the command buffer doesn't change, but its contents does, every history entry will point to the same command buffer and thus will show the same command:</p>\n\n<pre><code>char* historial[10];          // history vector has only pointers\n//...\n    historial[cantidad] = c;  // stores a pointer\n</code></pre>\n\n<p>The following allocates and frees memory as appropriate:</p>\n\n<pre><code>void guardarEnHistorial(char* c)\n{ //saves every command\n    if (cantidad == tamano) cantidad = 0;\n    if (historial[cantidad]) free(historial[cantidad]);\n    historial[cantidad]= malloc(strlen(c)+1);\n    strcpy(historial[cantidad], c);\n    cantidad++;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1522223396, "last_edit_date": 1522223396, "creation_date": 1522223018, "answer_id": 49528765, "question_id": 49527677, "link": "https://stackoverflow.com/questions/49527677/my-char-vector-is-saving-the-same-value-in-every-position/49528765#49528765", "title": "My char vector is saving the same value in every position", "body": "<blockquote>\n  <p>I dont know what Im doing wrong.</p>\n</blockquote>\n\n<p>You are observing this behavior because the <code>char</code> pointers of <code>historial</code> array are pointing to same memory location <code>comando</code>. Check this statement of your program:</p>\n\n<pre><code>guardarEnHistorial(comando);\n</code></pre>\n\n<p>and in the <code>guardarEnHistorial ()</code> function, you are doing:</p>\n\n<pre><code>historial[cantidad] = c;\n</code></pre>\n\n<p>Any changes you make to <code>comando</code> will reflect to all the members of <code>historial</code> array in which you have <em>saved</em> the command.</p>\n\n<p>You can use <code>strdup()</code> to resolve this issue. Replace this:</p>\n\n<pre><code>guardarEnHistorial(comando);\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>guardarEnHistorial(strdup(comando));\n                    ^^^^\n</code></pre>\n\n<p>The <a href=\"http://man7.org/linux/man-pages/man3/strdup.3.html\" rel=\"nofollow noreferrer\">strdup()</a> function returns a pointer to a new string which is a       duplicate of the string passed to it. <code>strdup()</code> allocates a memory for the new string using <code>malloc</code> and returns its pointer. Make sure to free it using <code>free()</code> once you are done with it. Like when inserting into <code>historial</code> array, you are rotating the insertion if the condition <code>cantidad == tamano</code> meets. Here, you need to free the element first and then insert the new element into the array otherwise there is a memory leaks in your program.</p>\n"}], "owner": {"reputation": 3, "user_id": 9545625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/273750655b461bac7f88e0724749e108?s=128&d=identicon&r=PG&f=1", "display_name": "Estef", "link": "https://stackoverflow.com/users/9545625/estef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1522223396, "creation_date": 1522219031, "last_edit_date": 1522221955, "question_id": 49527677, "link": "https://stackoverflow.com/questions/49527677/my-char-vector-is-saving-the-same-value-in-every-position", "title": "My char vector is saving the same value in every position", "body": "<p>Im trying to make a shell in linux. I need to save every command the user typed and when the user wants to see the history Ill show him the last 10 commands. Im using a char* historial[10]; but when the user type the second command it is saving in historial[0] and historial[1] the same thing. So if I type 10 different commands, it will save the last command 10 times. I dont know what Im doing wrong.\nPS: my condition in the do while is not working neither.</p>\n\n<pre><code>int ejecutarCom(char* comando)\n{ //executes the command\n    pid_t pid;\n    pid = fork();\n    int aux = 0;\n    if (pid &lt; 0)\n    {\n        perror(\"Error\");\n        return -1;\n    }\n    else if (pid == 0)\n    {\n        aux = execlp(comando, comando, NULL);\n    }\n    else\n    {\n        wait(NULL);\n    }\n    return aux;\n}\n\nchar* historial[10]; //history vector\nint cantidad = 0, tamano = 10; //quantity &amp; size\nvoid guardarEnHistorial(char* c)\n{ //saves every command\n    if (cantidad &lt; tamano)\n    {\n        historial[cantidad] = c;\n    }\n    if (cantidad == tamano)\n    {\n        cantidad = 0;\n        historial[cantidad] = c;\n    }\n    cantidad++;\n}\n\nvoid verHistorial()\n{ //shows history\n    for (int i = 9; i &gt;= 0; i--)\n    {\n        if (historial[0] == NULL)\n            break;\n        else if (historial[i] == NULL)\n        {\n            printf(\" \");\n        }\n        else\n            printf(\"%i: %s\\n\", i, historial[i]);\n    }\n}\n\nint main()\n{\n    char* comando = (char*) malloc(1024);\n    int x = 1;\n    do\n    {\n        printf(\"%s \", prompt);\n        fflush(stdout);\n        fgets(comando, sizeof(comando), stdin);\n        comando[strcspn(comando, \"\\n\")] = '\\0';\n        printf(\"%s\\n\", comando);\n        if (strcmp(comando, \"hist\") == 0)\n        {\n            verHistorial();\n        }\n        else\n        {\n            x = ejecutarCom(comando);\n            guardarEnHistorial(comando);\n            printf(\"%i\\n\", x);\n        }\n    } while (x != -1);\n</code></pre>\n"}, {"tags": ["c", "delimiter", "strtok"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1522218406, "post_id": 49527459, "comment_id": 86060513, "body": "Perhaps you should read more about <a href=\"http://en.cppreference.com/w/c/string/byte/strtok\" rel=\"nofollow noreferrer\"><code>strtok</code></a> and what it returns? Perhaps you want <a href=\"http://en.cppreference.com/w/c/string/byte/strpbrk\" rel=\"nofollow noreferrer\"><code>strpbrk</code></a> instead?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1522218458, "post_id": 49527459, "comment_id": 86060537, "body": "... and what is does."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522218542, "post_id": 49527459, "comment_id": 86060573, "body": "Oh and never forget to <i>always</i> check for a <code>NULL</code> pointer return."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1522218648, "post_id": 49527459, "comment_id": 86060619, "body": "Use <code>strpbrk()</code> instead of <code>strtok()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 7, "user_id": 9562143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83e27e1805dc3f05ca0c374a600cc8e5?s=128&d=identicon&r=PG&f=1", "display_name": "K. Taylor", "link": "https://stackoverflow.com/users/9562143/k-taylor"}, "is_accepted": false, "score": -1, "last_activity_date": 1522219715, "creation_date": 1522219715, "answer_id": 49527860, "question_id": 49527459, "link": "https://stackoverflow.com/questions/49527459/very-basic-strtok-program-misusing-delimiters-c/49527860#49527860", "title": "Very basic strtok program misusing delimiters - C", "body": "<p>Someone just posted an answer. It worked for me and now I can't find it. Reposting as best I remember in case someone else has the same question.</p>\n\n<pre><code>char *token = strtok(string,\"!?.\");\ntoken = strtok(NULL, \"!?.\"); //&lt;--THIS\n</code></pre>\n\n<p>token points to the first letter after the first delimiter, which is at least something I can work with. Thank you stranger!</p>\n"}, {"tags": [], "owner": {"reputation": 973, "user_id": 2681245, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b94bf2509faa4d8e67e99fc550722f04?s=128&d=identicon&r=PG&f=1", "display_name": "Rocoder", "link": "https://stackoverflow.com/users/2681245/rocoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1522222630, "creation_date": 1522222630, "answer_id": 49528655, "question_id": 49527459, "link": "https://stackoverflow.com/questions/49527459/very-basic-strtok-program-misusing-delimiters-c/49528655#49528655", "title": "Very basic strtok program misusing delimiters - C", "body": "<p>As per <code>strtok</code> man page description</p>\n\n<blockquote>\n  <p>The strtok() function parses a string into a sequence of tokens. On\n  the first call to strtok() the string to be parsed should be specified\n  in str. In each subsequent call that should parse the same string, str\n  should be NULL.</p>\n</blockquote>\n\n<p>It parses the string based on delimiter and return you the string not the delimiter. </p>\n\n<p>In your case delimiters are <code>\"!?.\"</code></p>\n\n<pre><code>char string[] = \" hello!how are you? I am fine.\";\n</code></pre>\n\n<p>First occurrence of the delimiter <code>\"!\"</code> match after the string <code>\" hello\"</code>. So it will return <code>\" hello\"</code> as return of <code>strtok</code>. And your output is nothing but first character <code>' '</code> of the <code>\" hello\"</code> string.</p>\n"}], "owner": {"reputation": 7, "user_id": 9562143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83e27e1805dc3f05ca0c374a600cc8e5?s=128&d=identicon&r=PG&f=1", "display_name": "K. Taylor", "link": "https://stackoverflow.com/users/9562143/k-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1522222630, "creation_date": 1522218158, "question_id": 49527459, "link": "https://stackoverflow.com/questions/49527459/very-basic-strtok-program-misusing-delimiters-c", "title": "Very basic strtok program misusing delimiters - C", "body": "<p>Here is my program (written in C, compiled and run on Omega, if it makes any difference):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main (void)\n{\n    char string[] = \" hello!how are you? I am fine.\";\n    char *token = strtok(string,\"!?.\");\n\n    printf(\"Token points to '%c'.\\n\",*token);\n\n    return 0;\n}\n</code></pre>\n\n<p>This is the output I'm expecting:</p>\n\n<pre><code>\"Token points to '!'.\"\n</code></pre>\n\n<p>But the output I'm getting is:</p>\n\n<pre><code>\"Token points to ' '.\"\n</code></pre>\n\n<p>From trial and error, I know this is referring to the first character in the string: the space before \"hello!\". </p>\n\n<p>Why am I not getting the output I'm expecting, and how can I fix it? I do understand from what I've read on here already that strtok is better off buried in a ditch, but let's assume that (if it's possible) I have to use it here, and I have to make it work.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1522216334, "post_id": 49527002, "comment_id": 86059488, "body": "You only have on variable for price and one for item. That is wahat you print, repeatedly. Where do you expect the other info to survive between the two loops?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1522216364, "post_id": 49527002, "comment_id": 86059503, "body": "Have you already learned about arrays?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1522216506, "post_id": 49527002, "comment_id": 86059595, "body": "Can you define a maximuim number of items your billing should support? I.e. can we e.g. assume that only at most tem items will be sold? Consider allowing this for the time being, fixing your immediate problem and then, when it is fixed, extend your program to accept more items."}, {"owner": {"reputation": 974, "user_id": 7277468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6tMUS.jpg?s=128&g=1", "display_name": "Sandeep_black", "link": "https://stackoverflow.com/users/7277468/sandeep-black"}, "edited": false, "score": 0, "creation_date": 1522220165, "post_id": 49527002, "comment_id": 86061401, "body": "Use char array for the item and float array for price. i.e item[No_of_item][size_of_item] and price[No_of_item]."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1522248262, "post_id": 49527002, "comment_id": 86081927, "body": "Note that in C, idiomatic loops run <code>for (int a = 0; a &lt; item_amount; a++)</code>, starting at zero, counting up to but not including the maximum, and using an increment operator (<code>++a</code> is also OK; it&#39;s even preferred in C++).  This works well with array indexing \u2014 the lowest index in an array is <code>0</code>, and given <code>int array[item_amount];</code>, correctly accesses only elements with indexes from <code>0</code> to <code>item_amount - 1</code>.  It&#39;s perfectly OK to deviate from this when necessary, but you should only do so when it <i>is</i> necessary."}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 2, "last_activity_date": 1522248412, "last_edit_date": 1522248412, "creation_date": 1522216581, "answer_id": 49527102, "question_id": 49527002, "link": "https://stackoverflow.com/questions/49527002/how-to-print-all-of-the-results-from-scanf-data-in-loop/49527102#49527102", "title": "How to print all of the results from scanf data in loop", "body": "<p>You need to save the values in arrays so that you don't overwrite previous values in the next loop - something like:</p>\n\n<pre><code>int a, item_amount;\n\nfloat price[10];      // array - max 10 elements\nchar item[10][256];   // array - max 10 elements - max 255 chars in name\n\nprintf(\"How many item do you want: \");\nscanf(\"%i\", &amp;item_amount);\n\nfor (a = 0; a &lt; item_amount; a = a + 1)  // Start from zero\n{\n        printf(\"Item %i: \", a+1);\n        scanf(\"%s\", item[a]);        // Never use %s - see below\n        printf(\"Price: RM \");\n        scanf(\"%f\", &amp;price[a]);\n}\n\nfor (a = 0; a &lt; item_amount; a = a + 1)  // Start from zero\n{\n        printf(\"\\nItem: %s\",item[a]);\n        printf(\"\\nPrice: %f\", price[a]);\n}\n</code></pre>\n\n<p>Notice that the above code miss a lot of the checks that you should do. For instance:</p>\n\n<ol>\n<li><p>Always check the return value from <code>scanf</code></p></li>\n<li><p>Never do <code>scanf(\"%s\", ...)</code> it may cause overflow. Use <code>fgets</code> or at least do <code>scanf(\"%255s...</code> Also consider what happens if a user inputs a name longer than 255 chars...</p></li>\n<li><p>Check that the amount of items is less or equal to 10.</p></li>\n</ol>\n"}], "owner": {"reputation": 19, "user_id": 9562002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a5744a8b545112b56aa2f249672f1b3?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/9562002/sarah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 49527102, "answer_count": 1, "score": -1, "last_activity_date": 1522248412, "creation_date": 1522216154, "last_edit_date": 1522218892, "question_id": 49527002, "link": "https://stackoverflow.com/questions/49527002/how-to-print-all-of-the-results-from-scanf-data-in-loop", "title": "How to print all of the results from scanf data in loop", "body": "<p>I have this code snippet.</p>\n\n<pre><code>int a, item_amount;\nfloat price;\n\nprintf(\"How many item do you want: \");\nscanf(\"%i\", &amp;item_amount);\n\nfor(a=1; a&lt;= item_amount; a = a + 1)\n    {\n        printf(\"Item %i: \", a);\n        scanf(\"%s\", item);\n        printf(\"Price: RM \");\n        scanf(\"%f\", &amp;price);\n    }\n\nfor(a=1; a&lt;= item_amount; a = a + 1)\n    {\n        printf(\"\\nItem: %s\",item);\n        printf(\"\\nPrice: %f\", price);\n    }\n</code></pre>\n\n<p>The thing is, I'm trying to print out the items' name and their prices as a receipt, but it only print out the last item and price. The output will show like this:</p>\n\n<pre><code>How many item do you want: 2\nItem 1: Box\nPrice: 12.20\nItem 2: Book\nPrice: 2.30\n</code></pre>\n\n<p>(<em>The receipt will be shown as below</em>)</p>\n\n<pre><code>Item: Book\nPrice: 2.30\nItem: Book\nPrice: 2.30\n</code></pre>\n\n<p>How can I make it print all of the scanned item and not repeating the item like the one above?</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 1, "creation_date": 1522216145, "post_id": 49526976, "comment_id": 86059426, "body": "Right away, there is an edge case.  What happens if the HEAD of the list needs to be removed because it is less than the 2nd element?  But in any case, you should tell us the inputs for which your code is failing."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1522216290, "post_id": 49526976, "comment_id": 86059473, "body": "First of all, try to come up with an algorithm on <i>paper</i>. Draw out a simple list on paper, and try to come up with a solution there first. Then when you implement it as code and it doesn&#39;t work as expected, you need to <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">debug your program</a>."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1522217253, "post_id": 49526976, "comment_id": 86059944, "body": "Quote: <code>Is there any error in this code? I am getting segmentation fault in this</code> Well yes - if you get a seg fault, there is an error but not necessarily in this part of your program"}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 1, "last_activity_date": 1522217424, "creation_date": 1522217424, "answer_id": 49527295, "question_id": 49526976, "link": "https://stackoverflow.com/questions/49526976/removing-an-element-in-a-linked-list-whose-value-is-less-than-the-next-adjacent/49527295#49527295", "title": "Removing an element in a linked list whose value is less than the next adjacent element", "body": "<p>Here is one problem:</p>\n\n<pre><code>while(curr!=NULL)\n{\n    Next = curr-&gt;next;\n    if(curr-&gt;data &lt; Next-&gt;data)\n</code></pre>\n\n<p>When you reach the end of the list <code>curr-&gt;next</code> is NULL. So <code>Next</code> is NULL. Still you dereference it (i.e. <code>Next-&gt;data</code>), so your program will (likely) crash with a seg fault.</p>\n\n<p>You must check for <code>Next</code> being NULL before you access <code>Next-&gt;data</code></p>\n"}], "owner": {"reputation": 26, "user_id": 9562059, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYJGDTH8fIo/AAAAAAAAAAI/AAAAAAAAAAA/vC12jF5JGYs/photo.jpg?sz=128", "display_name": "Utkarsh Raj", "link": "https://stackoverflow.com/users/9562059/utkarsh-raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1522217424, "creation_date": 1522216036, "last_edit_date": 1522217018, "question_id": 49526976, "link": "https://stackoverflow.com/questions/49526976/removing-an-element-in-a-linked-list-whose-value-is-less-than-the-next-adjacent", "title": "Removing an element in a linked list whose value is less than the next adjacent element", "body": "<p>Is there any error in this code? I am getting segmentation fault in this.\nQuestion is about deleting elements whose value are less than the next element.</p>\n\n<pre><code>void Remove()\n{\n    struct Node* prev = NULL;\n    struct Node* curr = head;\n    struct Node* Next = NULL;\n    while(curr!=NULL)\n    {\n        Next = curr-&gt;next;\n        if(curr-&gt;data &lt; Next-&gt;data)\n        {\n            if(curr == head)\n            {\n                struct Node* temp2 = head;\n                head = head-&gt;next;\n                free(temp2);\n                curr = head;\n                //Next = curr-&gt;next;\n            }\n            else\n            {\n                struct Node* temp1 = curr;\n                prev-&gt;next = curr-&gt;next;\n                free(temp1);\n                curr = Next;\n                //Next = curr-&gt;next;\n            }\n        }\n        else\n        {\n            prev = curr;\n            curr = Next;\n            //Next = curr-&gt;next;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 2, "creation_date": 1522216161, "post_id": 49526916, "comment_id": 86059432, "body": "your code prints <code>0</code> and <code>1</code>, but no <code>*</code>. please clearly describe how you test your program and what is the difference between observed and expected output."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1522217120, "post_id": 49526916, "comment_id": 86059888, "body": "Could you convince us that the shown code is by you (some indicators exist that it is not at all understood by you)? Could you explain for each code line what you believe it does? That will help to put you on the right thinking track. Also please state whether the proposed compromise here is applicable: <a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\" title=\"how do i ask and answer homework questions\">meta.stackoverflow.com/questions/334822/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1522217234, "post_id": 49527174, "comment_id": 86059942, "body": "Be careful if you see signs that OP is not understanding the shown code at all. Are you aware of the discussion in the link I provided? You are entitled to your own opinion, but please read it."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1522217527, "post_id": 49527174, "comment_id": 86060067, "body": "@Yunnosch Will have a look at it. But as the problem with the code was quite general, the answer was general with some pseudo code to encourage to think about it more."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1522218304, "post_id": 49527174, "comment_id": 86060463, "body": "That is pretty much the proposed compromise and I approve of it. I made however good experience with referring to that description, in order to make OP also aware and to rope them into some own effort on finding out themselves and also on improving the question. My respect for being open towards a slightly nagging comment like mine."}], "tags": [], "owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "is_accepted": false, "score": 0, "last_activity_date": 1522218111, "last_edit_date": 1522218111, "creation_date": 1522216967, "answer_id": 49527174, "question_id": 49526916, "link": "https://stackoverflow.com/questions/49526916/how-to-make-chess-board-pattern-in-c/49527174#49527174", "title": "how to make chess board pattern in c?", "body": "<p>First you are writing <code>1</code> and <code>0</code> not <code>*****</code> and <code>\"     \"</code>.\nSo those should be changed.</p>\n\n<p>Then as soon as you do <code>\\n</code> it gets really tricky to write something in this line later on. So you should generate your field line by line not block by block.</p>\n\n<p>With this in mind. It should be possible for you to figure it out.</p>\n\n<p>Some pseudo code to guide you (not tested but the general direction should be okay):</p>\n\n<pre><code>for i &lt; rows:\n  for k &lt; rows:\n    for j &lt; cols:\n      if (i + j) % 2 \n        print(\"*****\")\n      else\n        print(\"     \")\n    print(\"\\n\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1522219002, "post_id": 49527592, "comment_id": 86060797, "body": "Would you like to improve your code-only answer by adding some explanation? Demonstrating some consistent coding style would also make it more appealing."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1522219033, "post_id": 49527592, "comment_id": 86060809, "body": "Be careful if you see signs that OP is not understanding the shown code at all. Are you aware of the discussion in the link I provided? You are entitled to your own opinion, but please read it."}], "tags": [], "owner": {"reputation": 124, "user_id": 7424978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59da83f7ac5883528e616922d9221787?s=128&d=identicon&r=PG&f=1", "display_name": "avinash dhoke", "link": "https://stackoverflow.com/users/7424978/avinash-dhoke"}, "is_accepted": true, "score": -1, "last_activity_date": 1522218697, "creation_date": 1522218697, "answer_id": 49527592, "question_id": 49526916, "link": "https://stackoverflow.com/questions/49526916/how-to-make-chess-board-pattern-in-c/49527592#49527592", "title": "how to make chess board pattern in c?", "body": "<pre><code>int main()\n{\n    int rows, cols, i, j, k,l;\n\n    /* Input rows and columns from user */\n    printf(\"Enter number of rows: \");\n    scanf(\"%d\", &amp;rows);\n    printf(\"Enter number of columns: \");\n    scanf(\"%d\", &amp;cols);\n\n    k = 1;\n\n    for(i=1; i&lt;=rows; i++)\n    {\n\n      for(l=1; l&lt;=3; l++)\n    {\n\n\n      for(j=1; j&lt;=cols; j++)\n    {\n       if(k==1){\n      if(j%2==1){\n           printf(\"***\");\n      }\n      else{\n          printf(\"   \");\n\n      }\n       }\n       else{\n      if(j%2==1){\n           printf(\"   \");\n      }\n      else{\n\n           printf(\"***\");\n      }\n       }\n\n\n    }\n\n\n      printf(\"\\n\");\n      if(l==3)\n     k=(-1)*k;\n    }\n\n\n\n\n\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9562004, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GU0Ler6Wl-c/AAAAAAAAAAI/AAAAAAAAACw/wR3m_RhLTjA/photo.jpg?sz=128", "display_name": "Kenny Doug", "link": "https://stackoverflow.com/users/9562004/kenny-doug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "closed_date": 1522260257, "accepted_answer_id": 49527592, "answer_count": 2, "score": -1, "last_activity_date": 1522223684, "creation_date": 1522215767, "last_edit_date": 1522223684, "question_id": 49526916, "link": "https://stackoverflow.com/questions/49526916/how-to-make-chess-board-pattern-in-c", "closed_reason": "Not suitable for this site", "title": "how to make chess board pattern in c?", "body": "<p>I am breaking my head to achieve something. \njust trying using printf(\"****\\n*****\\n*****\\n\"); and doesn't work.</p>\n\n<p>Could anyone help me with this?</p>\n\n<p>Apologies guys my question was badly written.\n<a href=\"https://i.stack.imgur.com/cpRET.png\" rel=\"nofollow noreferrer\">example for 1 input : 5</a>\nthe algorithm is similar to summing up all numbers of a int matrix. </p>\n\n<p>question:</p>\n\n<blockquote>\n<pre><code>     *****\n     *****\n     *****\n*****\n*****\n*****\nif input : 2\n     *****\n     *****\n     *****\n*****     *****\n*****     *****\n*****     *****\n     *****\n     *****\n     *****\nif input : 3\n</code></pre>\n</blockquote>\n\n<p>main code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int rows, cols, i, j, k;\n\n    /* Input rows and columns from user */\n    printf(\"Enter number of rows: \");\n    scanf(\"%d\", &amp;rows);\n    printf(\"Enter number of columns: \");\n    scanf(\"%d\", &amp;cols);\n\n    k = 1;\n\n    for(i=1; i&lt;=rows; i++)\n    {\n        for(j=1; j&lt;=cols; j++)\n        {\n            if(k == 1)\n            {\n                printf(\"111\\n111\\n111\");\n            }\n            else\n            {\n                printf(\"0\");\n            }\n\n            // If k = 1  then k *= -1 =&gt; -1\n            // If k = -1 then k *= -1 =&gt;  1\n            k *= -1;\n        }\n\n        if(cols % 2 == 0)\n        {\n            k *= -1;\n        }\n\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1522214604, "post_id": 49526642, "comment_id": 86058860, "body": "What&#39;s the type of <code>flag</code>?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1522215145, "post_id": 49526642, "comment_id": 86059025, "body": "Please improve your question: title spelling, and explain exactly the type of <code>flag</code>  and the value of <code>FLAG1</code>. Both are important. So <b>edit your question</b> to improve it. Without that, your question is unclear."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1522215299, "post_id": 49526642, "comment_id": 86059077, "body": "Please clarify by providing a piece of code utilizing this. Include the whole line, and maybe some surrounding lines."}], "answers": [{"comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 2, "creation_date": 1522214913, "post_id": 49526725, "comment_id": 86058955, "body": "You never explained the reason to use <code>!!</code>."}, {"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1522215047, "post_id": 49526725, "comment_id": 86058981, "body": "The value will be either 0 or 1, but the result of <code>!</code> is an <code>int</code>, not <code>_Bool</code>."}, {"owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1522215457, "post_id": 49526725, "comment_id": 86059134, "body": "@klutt he meant that fact that OP does not have <code>(</code> after if is illegal. It should be written as <code>if (!!(flag &amp; FLAG1))</code>"}, {"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1522215812, "post_id": 49526725, "comment_id": 86059272, "body": "<a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.5.3.3p5\" rel=\"nofollow noreferrer\">port70.net/~nsz/c/c11/n1570.html#6.5.3.3p5</a>"}, {"owner": {"reputation": 7821, "user_id": 954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed8998ef7c610932db0159960df1a24?s=128&d=identicon&r=PG", "display_name": "Ted Percival", "link": "https://stackoverflow.com/users/954/ted-percival"}, "edited": false, "score": 0, "creation_date": 1522215825, "post_id": 49526725, "comment_id": 86059278, "body": "More importantly, when assigned to an int, it will be either <code>0</code> or <code>1</code>, and no other value. This can be useful for a <code>main</code> function, where the exit code modulo 256 is the shell return value; returning <code>256</code> from main is the same as returning <code>0</code>, which would not be desired when non-zero indicates error."}], "tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 1, "last_activity_date": 1522215849, "last_edit_date": 1522215849, "creation_date": 1522214838, "answer_id": 49526725, "question_id": 49526642, "link": "https://stackoverflow.com/questions/49526642/usage-of-while-checking-flags/49526725#49526725", "title": "Usage of !! while checking flags", "body": "<p><code>!!</code> is convert to the opposite boolean value, and convert back. The first logical operator will convert whatever return value to the opposite boolean value, and then the second logical operator will convert the opposite value back.</p>\n\n<p>For example:</p>\n\n<pre><code>bool b = !!(flag &amp; FLAG1);\n</code></pre>\n\n<p>converting <code>flag &amp; FLAG1</code> return value to a boolean value.</p>\n\n<p>Unless you want to obfuscate your source code, you don\u2019t use this kind of statement. Instead, you can use normal casting to clearly express what you want to do</p>\n\n<pre><code>bool b = (bool)(flag &amp; FLAG1);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 2688178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e4a6048c761d04c00de2cf7f77bd4ae?s=128&d=identicon&r=PG&f=1", "display_name": "user2688178", "link": "https://stackoverflow.com/users/2688178/user2688178"}, "edited": false, "score": 0, "creation_date": 1522215576, "post_id": 49526857, "comment_id": 86059176, "body": "This makes sense. Thank you."}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 7, "last_activity_date": 1522215431, "creation_date": 1522215431, "answer_id": 49526857, "question_id": 49526642, "link": "https://stackoverflow.com/questions/49526642/usage-of-while-checking-flags/49526857#49526857", "title": "Usage of !! while checking flags", "body": "<p>It can be used this way:</p>\n\n<pre><code>int a=!!(flag &amp; FLAG1);\n</code></pre>\n\n<p>If <code>flag &amp; FLAG1</code> evaluates to 0, then <code>a</code> will be assigned 0. If <code>flag &amp; FLAG1</code> evaluates to another value, then <code>a</code> will be assigned to 1.</p>\n"}, {"tags": [], "owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "is_accepted": false, "score": 1, "last_activity_date": 1522215522, "creation_date": 1522215522, "answer_id": 49526867, "question_id": 49526642, "link": "https://stackoverflow.com/questions/49526642/usage-of-while-checking-flags/49526867#49526867", "title": "Usage of !! while checking flags", "body": "<p>Without a bit more context it's hard to know the author's reason for doing this, but the most common is that it converts the value to either 0 or 1. This is particularly interesting if you're using <code>__builtin_expect()</code>, in which case yes, it could result in better-optimized code.</p>\n\n<p>It's also used occasionally to make the code a bit more self-documenting\u2026 if you see it, you know that you're meant to be treating it as true/false. Usually, when used like this, it's part of a macro.</p>\n\n<p>It's also worth noting that the result is an <code>int</code>, regardless of the original type. This isn't <em>usually</em> consequential, but sometimes it's important.</p>\n"}], "owner": {"reputation": 45, "user_id": 2688178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e4a6048c761d04c00de2cf7f77bd4ae?s=128&d=identicon&r=PG&f=1", "display_name": "user2688178", "link": "https://stackoverflow.com/users/2688178/user2688178"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "closed_date": 1522222994, "answer_count": 3, "score": 0, "last_activity_date": 1522217847, "creation_date": 1522214457, "last_edit_date": 1522215737, "question_id": 49526642, "link": "https://stackoverflow.com/questions/49526642/usage-of-while-checking-flags", "closed_reason": "Duplicate", "title": "Usage of !! while checking flags", "body": "<p>I have seen some code in open source libraries. They check if a particular flag is set in a variable with the test if <code>!!(flag &amp; FLAG1)</code></p>\n\n<p>My question is why not simply write if <code>(flag &amp; FLAG1)</code> instead? Is the first version more optimized?</p>\n"}, {"tags": ["c", "epoll"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1522274454, "post_id": 49526478, "comment_id": 86097414, "body": "Are listening sockets writable?"}], "answers": [{"tags": [], "owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "is_accepted": false, "score": 0, "last_activity_date": 1522215109, "creation_date": 1522215109, "answer_id": 49526773, "question_id": 49526478, "link": "https://stackoverflow.com/questions/49526478/why-epollout-is-not-triggered/49526773#49526773", "title": "Why EPOLLOUT is not triggered?", "body": "<p>A passive listening socket should not be writable.</p>\n"}], "owner": {"reputation": 1438, "user_id": 5345612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/80f66466ea864a27bc88dd3bf614f8c4?s=128&d=identicon&r=PG&f=1", "display_name": "HuangJie", "link": "https://stackoverflow.com/users/5345612/huangjie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522215109, "creation_date": 1522213548, "question_id": 49526478, "link": "https://stackoverflow.com/questions/49526478/why-epollout-is-not-triggered", "title": "Why EPOLLOUT is not triggered?", "body": "<p>The code below uses level-triggered because I don't specify the <code>EPOLLET</code> flag in <code>epoll_ctl</code>. Based on my understanding, this code should print <code>we have polled something</code> repeatedly at start-up because the socket is writable and I set the default level-triggered mode. However, at start-up it just sleeps at <code>epoll_wait</code>. I'm curious what did I do wrong.</p>\n\n<pre><code>static int\nmake_socket_non_blocking (int sfd)\n{\n    int flags, s;\n\n    flags = fcntl (sfd, F_GETFL, 0);\n    if (flags == -1) {\n        perror (\"fcntl\");\n        return -1;\n    }\n\n    flags |= O_NONBLOCK;\n    s = fcntl (sfd, F_SETFL, flags);\n    if (s == -1) {\n        perror (\"fcntl\");\n        return -1;\n    }\n    return 0;\n}\n\n\nstatic int\ncreate_and_bind (char *port)\n{\n    struct sockaddr_in serv_addr;\n\n    int sfd =  socket(AF_INET, SOCK_STREAM, 0);\n\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_addr.s_addr = INADDR_ANY;\n    serv_addr.sin_port = htons(atoi(port));\n\n    int s = bind(sfd, (struct sockaddr *) &amp;serv_addr, sizeof(serv_addr));\n    if (s!=0)\n        printf(\"bind failed\\n\");\n\n    return sfd;\n}\n\n\nint main (int argc, char *argv[])\n{\n    int sfd, s;\n    int efd;\n    struct epoll_event event;\n    struct epoll_event *events;\n\n    if (argc != 2) {\n        fprintf(stderr, \"Usage: %s [port]\\n\", argv[0]);\n        exit(EXIT_FAILURE);\n    }\n\n    sfd = create_and_bind (argv[1]);\n    if (sfd == -1)\n        abort();\n\n    s = make_socket_non_blocking(sfd);\n    if (s == -1)\n        abort();\n\n    s = listen(sfd, SOMAXCONN);\n    if (s == -1) {\n        perror(\"listen\");\n        abort();\n    }\n\n    efd = epoll_create1(0);\n    if (efd == -1) {\n        perror(\"epoll_create\");\n        abort();\n    }\n\n    event.data.fd = sfd;\n    event.events = EPOLLIN | EPOLLOUT;\n    s = epoll_ctl(efd, EPOLL_CTL_ADD, sfd, &amp;event);\n    if (s == -1) {\n        perror(\"epoll_ctl\");\n        abort();\n    }\n    /* Buffer where events are returned */\n    events = calloc(MAXEVENTS, sizeof event);\n\n    /* The event loop */\n    while (1) {\n        int n, i;\n\n        n = epoll_wait(efd, events, MAXEVENTS, -1);\n\n        printf (\"we have polled something\\n\");\n\n        // ...\n    }\n\n    free(events);\n    close(sfd);\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "function", "linked-list"], "comments": [{"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 3, "creation_date": 1522213106, "post_id": 49526350, "comment_id": 86058387, "body": "<code>1</code> Conversion from <code>path*[]</code> to <code>path*</code> is dangerous. <code>2</code> Turn on your compiler warning will help you debug your program. <code>3</code> <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1522213252, "post_id": 49526350, "comment_id": 86058427, "body": "No calling context... How can we say something interesting? Aside, <code>resultPath</code> is an array of pointers to path and you return pointer to path. Please use a good compiler and read warning messages carefully. When someone say that crossing the road is dangerous, you need at least to look on every side."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1522213420, "post_id": 49526350, "comment_id": 86058480, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11656532/returning-an-array-using-c\">Returning an array using C</a>"}, {"owner": {"reputation": 611, "user_id": 4975410, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/CThkY.jpg?s=128&g=1", "display_name": "Saeed Rahmani", "link": "https://stackoverflow.com/users/4975410/saeed-rahmani"}, "reply_to_user": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1522220573, "post_id": 49526350, "comment_id": 86061634, "body": "@user202729 No it is not my answer. I searched on Google, SO and etc."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1522220732, "post_id": 49526350, "comment_id": 86061735, "body": "@SaeedRahmani You know, <a href=\"https://stackoverflow.com/posts/49526350/edit\">edit</a> your question to specify how it&#39;s different. You want to return an array from a function, why not?"}, {"owner": {"reputation": 611, "user_id": 4975410, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/CThkY.jpg?s=128&g=1", "display_name": "Saeed Rahmani", "link": "https://stackoverflow.com/users/4975410/saeed-rahmani"}, "reply_to_user": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1522220905, "post_id": 49526350, "comment_id": 86061825, "body": "@user202729 Because I can return an <code>int</code> array, it is different and also I want to know what is the best and efficient way."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1522221005, "post_id": 49526350, "comment_id": 86061895, "body": "It isn&#39;t different. Show your code to return an <code>int</code> array, and then modify it to return a <code>path*</code> array."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1522221036, "post_id": 49526350, "comment_id": 86061915, "body": "Also -- <code>1</code> don&#39;t worry too much about efficiency before measuring it, and <code>2</code> best -&gt; opinion-based."}, {"owner": {"reputation": 2287, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1522221229, "post_id": 49526350, "comment_id": 86062018, "body": "<a href=\"https://stackoverflow.com/questions/44444850/return-two-pointers-from-a-function-in-c\">Possible duplicate</a>. <a href=\"https://stackoverflow.com/questions/2620146/how-do-i-return-multiple-values-from-a-function-in-c\">Possible duplicate</a>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1522260406, "post_id": 49526350, "comment_id": 86090025, "body": "<code>struct path *resultPath[2];</code> is declared local to <code>copyPath</code>. When <code>copyPath</code> returns, all local variables are destroyed (function stack frame memory is released for reuse). In order to return <code>resultPath</code>, you need to allocate storage for it dynamically and return a pointer do it -- as is explained in all of the links that have already been provided above."}], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 4975410, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/CThkY.jpg?s=128&g=1", "display_name": "Saeed Rahmani", "link": "https://stackoverflow.com/users/4975410/saeed-rahmani"}, "edited": false, "score": 0, "creation_date": 1522220028, "post_id": 49526671, "comment_id": 86061320, "body": "It has an error: <code>error: assignment to expression with array type</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1522223430, "post_id": 49526671, "comment_id": 86063428, "body": "There is no need to cast the return of <code>malloc</code>, it is unnecessary. See: <a href=\"http://stackoverflow.com/q/605845/995714\">Do I cast the result of malloc?</a>"}, {"owner": {"reputation": 611, "user_id": 4975410, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/CThkY.jpg?s=128&g=1", "display_name": "Saeed Rahmani", "link": "https://stackoverflow.com/users/4975410/saeed-rahmani"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1522223815, "post_id": 49526671, "comment_id": 86063695, "body": "@DavidC.Rankin It does not have the problem, my question is how to return these two values to the main function?"}], "tags": [], "owner": {"reputation": 120, "user_id": 9332523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6f06fcfa6b8c41ba7c79d6263a76bdf?s=128&d=identicon&r=PG&f=1", "display_name": "ravikumar", "link": "https://stackoverflow.com/users/9332523/ravikumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1522214605, "creation_date": 1522214605, "answer_id": 49526671, "question_id": 49526350, "link": "https://stackoverflow.com/questions/49526350/how-to-return-a-pointer-struct-array-from-a-function-in-c/49526671#49526671", "title": "How to return a pointer struct array from a function in C", "body": "<p>Whenever you allocate a dynamic memory(using malloc, calloc, realloc), appropriately typecast the return address to the proper data type. Because these functions return void pointer. In the below line you are assigning the void pointer type address to the struct path type pointer.</p>\n\n<p>temp = malloc(sizeof (struct path));</p>\n\n<p>It can be written as:</p>\n\n<p>temp = (struct path *)malloc(sizeof (struct path));</p>\n\n<p>Second thing, you are returning a array of pointer of type \"struct path\", but you are collecting this return array of pointer value in a regular pointer of type \"struct path\" in main which is against the C standard. Correct this mistakes and try to run the code.</p>\n\n<p>In Main use array of pointer to collect the return value:</p>\n\n<p>struct path *newPath[2];</p>\n\n<p>newPath = copyPath(path_head, nextNode)</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 1, "last_activity_date": 1522272472, "last_edit_date": 1522272472, "creation_date": 1522268477, "answer_id": 49543501, "question_id": 49526350, "link": "https://stackoverflow.com/questions/49526350/how-to-return-a-pointer-struct-array-from-a-function-in-c/49543501#49543501", "title": "How to return a pointer struct array from a function in C", "body": "<p>In addition to the comments, your funciton has two primary problems, 1) you leak memory by overwriting the address of the first allocated block of memory; and 2) you attempt to return <code>returnPath</code> which has automatic storage duration declared local to <code>copyPath</code>.</p>\n\n<p><strong>Memory Leak</strong></p>\n\n<p>You leak memory in your function by overwriting the pointer <code>temp</code> before it has been assigned, e.g.</p>\n\n<pre><code>struct path *temp = malloc(sizeof (struct path));  \n...\nwhile (head != NULL) {\n    temp = malloc(sizeof (struct path));\n</code></pre>\n\n<p>By allocating a second time for <code>temp</code> before you have assigned the original pointer to another variable, you lose the original pointer in <code>temp</code> pointing to the first block of memory allocated. That memory can never be freed by your program from that point forward.</p>\n\n<p><strong>Returning Array with Automatic Storage Declared Local to Function</strong></p>\n\n<blockquote>\n  <p><em>When I run it, I do not have anything in newPath and it is empty.</em></p>\n</blockquote>\n\n<p><code>struct path *resultPath[2];</code> declares an <em>array-of-pointers to <code>struct path</code></em> (two of them). Automatic storage for <code>resultPath</code> is declared local to <code>copyPath</code> within it function stack frame. When <code>copyPath</code> returns, all local variables with automatic storage duration are destroyed (function stack frame memory is released for reuse). This is expressly explained by <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.4\" rel=\"nofollow noreferrer\">C11 Standard - \u00a76.2.4 Storage durations of objects</a></p>\n\n<p><strong>1)</strong> An object has a storage duration that determines its lifetime. There are four storage durations: static, thread, <em>automatic</em>, and allocated. Allocated storage is described in <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.22.3\" rel=\"nofollow noreferrer\">7.22.3</a>.</p>\n\n<p><strong>2)</strong> The lifetime of an object is the portion of program execution during which storage is guaranteed to be reserved for it. An object exists, has a constant address,33) and retains its last-stored value throughout its lifetime.34) <em>If an object is referred to outside of its lifetime, the behavior is undefined.</em> The value of a pointer becomes indeterminate when the object it points to (or just past) reaches the end of its lifetime. </p>\n\n<p><strong>6)</strong> For such an object that does not have a variable length array type, its lifetime extends from entry into the block with which it is associated <em>until execution of that block ends in any way</em>. </p>\n\n<p>(<em>emphasis ours</em>)</p>\n\n<blockquote>\n  <p><em>So, what is the best way to return these addresses and why I do not have it in newPath?</em></p>\n</blockquote>\n\n<p>In order to return resultPath, you need to allocate storage for it dynamically and return a pointer to it. Objects with <em>allocated storage duration</em> extend for the lifetime of the program or until they are freed.</p>\n\n<p>The easiest way to declare and allocate for an object capable of storing two pointers to <code>struct path</code> is to declare an <em>pointer-to-pointer to struct path</em>, (effectively a dynamic array of pointers), and allocate storage for two pointers, e.g.</p>\n\n<pre><code>/* allocate &amp; validate 2 pointers to struct path */\nstruct path **resultPath = malloc (sizeof *resultPath * 2);\nif (!resultPath) {        /* always validate all memory allocations */\n    perror (\"malloc resultPath failed.\");\n    return NULL;\n}\n...\nresultPath[0] = newHead;  /* newHead &amp; newTail must point to allocated memory */\nresultPath[1] = newTail;        \n\nreturn resultPath;\n</code></pre>\n\n<p>You can now safely <code>return resultPath</code> and storage for <code>resultPath</code> will survive the return eliminating your access of memory that is no longer available. You then access <code>newHead</code> and <code>newTail</code> through <code>newPath[0]</code> and <code>newPath[1]</code>, respectively, in the caller.</p>\n\n<p>You will also need to change the return type for <code>copyPath</code> to <code>stuct path **</code>, e.g.</p>\n\n<pre><code>struct path **copyPath(struct path *head)\n</code></pre>\n\n<p>and update the type in the caller.</p>\n"}], "owner": {"reputation": 611, "user_id": 4975410, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/CThkY.jpg?s=128&g=1", "display_name": "Saeed Rahmani", "link": "https://stackoverflow.com/users/4975410/saeed-rahmani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 49543501, "answer_count": 2, "score": 0, "last_activity_date": 1522272472, "creation_date": 1522212768, "last_edit_date": 1522223715, "question_id": 49526350, "link": "https://stackoverflow.com/questions/49526350/how-to-return-a-pointer-struct-array-from-a-function-in-c", "title": "How to return a pointer struct array from a function in C", "body": "<p>Consider you have a function and the function output will be the Head and Tail address of a Linked List (a function for copy a Linked List in another address):</p>\n\n<pre><code>struct path *copyPath(struct path *head) {\n\n  struct path *temp = malloc(sizeof (struct path));  \n\n  // array of newHead and newTail\n  struct path *resultPath[2];\n\n  struct path *newHead = NULL;\n  struct path *newTail = NULL;    \n\n  while (head != NULL) {\n      temp = malloc(sizeof (struct path));\n      if (newHead == NULL) {\n          // Add a new node to the first of list and save newHead as the beginning of the list\n      } else {            \n          // Add the other nodes and save the last node address as newTail\n      }\n      head = head -&gt; next;\n  }      \n\n  resultPath[0] = newHead;\n  resultPath[1] = newTail;        \n\n  return resultPath;\n}\n</code></pre>\n\n<p>I defined an array of <code>struct path</code> and I return it. In the main function an array has been defined:</p>\n\n<pre><code>struct path *newPath;\nnewPath = copyPath(path_head, nextNode);\n</code></pre>\n\n<p>When I run it, I do not have anything in newPath and it is empty.</p>\n\n<p>So, what is the best way to return these addresses and why I do not have it in <code>newPath</code>?</p>\n\n<p>Also, when I use:</p>\n\n<pre><code>struct path *newPath[2];\nnewPath = copyPath(path_head, nextNode);\n</code></pre>\n\n<p>I have an error: <code>error: assignment to expression with array type</code></p>\n\n<p><strong>How to can I pass these two values to the main function?</strong> </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1, "user_id": 9561832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fb3b5a5f9a61206abd91c048bd489a7?s=128&d=identicon&r=PG&f=1", "display_name": "rocking", "link": "https://stackoverflow.com/users/9561832/rocking"}, "edited": false, "score": 0, "creation_date": 1522212540, "post_id": 49526260, "comment_id": 86058204, "body": "*outputrational IS POINTER TO STRUCTURE RATIONAL WHICH STORE RATIONAL NUMBER IN LOWEST FORM"}, {"owner": {"reputation": 1, "user_id": 9561832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fb3b5a5f9a61206abd91c048bd489a7?s=128&d=identicon&r=PG&f=1", "display_name": "rocking", "link": "https://stackoverflow.com/users/9561832/rocking"}, "edited": false, "score": 0, "creation_date": 1522212667, "post_id": 49526260, "comment_id": 86058243, "body": "*inputrational IS POINTER TO STRUCTURE RATIONAL WHICH STORE RATIONAL NUMBER IN ORIGINAL FORM"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 1, "creation_date": 1522213351, "post_id": 49526260, "comment_id": 86058458, "body": "You should be explaining these things in the question and try to shorten the title and give more detailed explanation in the question"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1522216341, "post_id": 49526260, "comment_id": 86059494, "body": "This question does not meet quality requirements for this site: code only, no context, no clear question, no error message <i>in the question</i>... You really should read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and edit your question."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1522217808, "post_id": 49526260, "comment_id": 86060206, "body": "Hint: learn how to format C code properly"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1522223825, "post_id": 49526260, "comment_id": 86063706, "body": "Welcome to SO. Please DO NOT SHOUT in your comments. Also please put an actual question into your question. And please improve your code indentation and general formatting. It is hard to read."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1522223894, "post_id": 49526260, "comment_id": 86063741, "body": "In general this is a good time to start learning how to debug. With such a simple program you will be able to see the location of your crash very soon."}], "answers": [{"tags": [], "owner": {"reputation": 190, "user_id": 7176709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e179e3c0c654ceffd3b0224a22f7a83?s=128&d=identicon&r=PG&f=1", "display_name": "awakened", "link": "https://stackoverflow.com/users/7176709/awakened"}, "is_accepted": false, "score": 1, "last_activity_date": 1522215419, "creation_date": 1522215419, "answer_id": 49526853, "question_id": 49526260, "link": "https://stackoverflow.com/questions/49526260/segmentation-error-in-program-to-compare-two-rational-number-by-using-structures/49526853#49526853", "title": "segmentation error in program to compare two rational number by using structures and structure function", "body": "<p>You have declared pointers to the structure but you have not allocated memory to them.\n<code>struct rational *rationalnumber1,*rationalnumber2;</code>\n<code>rationalnumber1-&gt;denominator=p;</code></p>\n\n<p>You have to allocate memory as follows:\n<code>struct rational *rationalnumber1 = malloc(sizeof(*rationalnumber1));</code>\n before you write the following statement:\n<code>rationalnumber1-&gt;denominator=p;</code>\nYou have to do it for rationalnumber2 as well.</p>\n\n<p>While we are at it, you don't really need to declare pointers.\nYou can declare objects to the structure.\nYou can pass the address of the objects defined to the functions you have defined.</p>\n"}], "owner": {"reputation": 1, "user_id": 9561832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fb3b5a5f9a61206abd91c048bd489a7?s=128&d=identicon&r=PG&f=1", "display_name": "rocking", "link": "https://stackoverflow.com/users/9561832/rocking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1522228327, "answer_count": 1, "score": 0, "last_activity_date": 1522216227, "creation_date": 1522212315, "last_edit_date": 1522216227, "question_id": 49526260, "link": "https://stackoverflow.com/questions/49526260/segmentation-error-in-program-to-compare-two-rational-number-by-using-structures", "closed_reason": "Needs details or clarity", "title": "segmentation error in program to compare two rational number by using structures and structure function", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdbool.h&gt;\n\nstruct  rational{  \n  int numerator;\n  int denominator;\n};\n\n\nbool equal(struct rational *rational_number1,struct rational *rational_number2);\n\n void reduce(struct rational *inputrational,struct rational *outputrational);\n\n\nint main()\n\n{\n\nint p,q,r,s;\n\n\nprintf(\"details of number 1\\n\");\n\nprintf(\"numerator\\n\");\n\nscanf(\"%d\",&amp;q);\n\nprintf(\"denominator\\n\");\n\nscanf(\"%d\",&amp;p);\n\nprintf(\"details of number 2\\n\");\n\n\nprintf(\"numerator\\n\");\n\nscanf(\"%d\",&amp;s);\n\nprintf(\"denominator\\n\");\n\nscanf(\"%d\",&amp;r);\n\nstruct rational *rationalnumber1,*rationalnumber2;\n\nrationalnumber1-&gt;denominator=p;\n\nrationalnumber1-&gt;numerator=q;\n\nrationalnumber2-&gt;denominator=r;\n\nrationalnumber2-&gt;numerator=s;\n\n\nif(equal(rationalnumber1,rationalnumber2))\n\nprintf(\"both are equal\");\n\nelse \n\nprintf(\"both are unequal\");\n\n}\n\nbool equal(struct rational *rational_number1,struct rational *rational_number2)\n\n\n{\n\nstruct rational *inputrational1,*inputrational2;\n\ninputrational1=rational_number1;\n\ninputrational2=rational_number2;\n\nstruct rational *outputrational1;\n\nstruct rational *outputrational2;\n\noutputrational1-&gt;numerator=0;\n\noutputrational1-&gt;denominator=0;\n\noutputrational2-&gt;numerator=0;\noutputrational2-&gt;denominator=0;\n\nreduce(inputrational1,outputrational1);\nreduce(inputrational2,outputrational2);\nif(outputrational1==outputrational2)\nreturn true;\n\n}\n\n\nvoid reduce(struct rational *inputrational,struct rational *outputrational)\n\n\n{\n\n\nint i,f;\n\nfor(i=1;(i&lt;=inputrational-&gt;numerator)&amp;&amp;(i&lt;=inputrational-&gt;denominator);i++)\n{\n\n    if((inputrational-&gt;numerator%i==0)&amp;&amp;(inputrational-&gt;denominator%i==0))\n{\n\n    f=i;\n}\n\n\noutputrational-&gt;numerator=(inputrational-&gt;numerator)/f;\n\noutputrational-&gt;denominator=(inputrational-&gt;denominator)/f;\n\n\n}\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2955, "user_id": 3819007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hvpZ.png?s=128&g=1", "display_name": "visibleman", "link": "https://stackoverflow.com/users/3819007/visibleman"}, "edited": false, "score": 0, "creation_date": 1522210561, "post_id": 49525907, "comment_id": 86057710, "body": "So do I understand it correctly, that you are trying to convert a c_string (char[]) representing a binary number into a new string representing a decimal number?"}, {"owner": {"reputation": 23, "user_id": 9561742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db542bed3a015c1a5a47bfab1a60dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "B Robert", "link": "https://stackoverflow.com/users/9561742/b-robert"}, "reply_to_user": {"reputation": 2955, "user_id": 3819007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hvpZ.png?s=128&g=1", "display_name": "visibleman", "link": "https://stackoverflow.com/users/3819007/visibleman"}, "edited": false, "score": 0, "creation_date": 1522210852, "post_id": 49525907, "comment_id": 86057784, "body": "Yes, I want to convert the string into a new string representing the decimal value. E.g input: 10 (binary), output: 2 (decimal)"}, {"owner": {"reputation": 2955, "user_id": 3819007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hvpZ.png?s=128&g=1", "display_name": "visibleman", "link": "https://stackoverflow.com/users/3819007/visibleman"}, "edited": false, "score": 0, "creation_date": 1522211235, "post_id": 49525907, "comment_id": 86057886, "body": "Is there some specific reason you want to implement this yourself? Otherwise, I recommend using strol()  with base 2 [<a href=\"http://www.cplusplus.com/reference/cstdlib/strtol/]\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdlib/strtol/]</a> to turn the string to an integer, and then sprintf to turn the integer back to a string."}, {"owner": {"reputation": 23, "user_id": 9561742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db542bed3a015c1a5a47bfab1a60dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "B Robert", "link": "https://stackoverflow.com/users/9561742/b-robert"}, "reply_to_user": {"reputation": 2955, "user_id": 3819007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hvpZ.png?s=128&g=1", "display_name": "visibleman", "link": "https://stackoverflow.com/users/3819007/visibleman"}, "edited": false, "score": 0, "creation_date": 1522211468, "post_id": 49525907, "comment_id": 86057939, "body": "Part of an assignment, our teacher wants us to implement it ourselves."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1522211676, "post_id": 49525907, "comment_id": 86057979, "body": "You never convert <code>input[arrayCounter]</code> from ASCII to decimal, e.g. <code>input[arrayCounter] -= &#39;0&#39;</code>, you do for <code>remainder</code>, but not for the stored character. (you should use another variable also rather than changing the character value -- but that&#39;s up to you)"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9561742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db542bed3a015c1a5a47bfab1a60dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "B Robert", "link": "https://stackoverflow.com/users/9561742/b-robert"}, "edited": false, "score": 0, "creation_date": 1522214846, "post_id": 49526151, "comment_id": 86058924, "body": "I tried to implement this, but I am receiving a different output.      <code>for (i= stringLength- 1; i &gt;= 0; i--) {         decimalValue = decimalValue + (power(2, i)) * (input[arrayCounter] - &#39;0&#39;);         arrayCounter++;     }          printf(&quot;\\n%d&quot;, decimalValue);</code>    INPUT: 10  Output: 112"}, {"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "reply_to_user": {"reputation": 23, "user_id": 9561742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db542bed3a015c1a5a47bfab1a60dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "B Robert", "link": "https://stackoverflow.com/users/9561742/b-robert"}, "edited": false, "score": 0, "creation_date": 1522215109, "post_id": 49526151, "comment_id": 86059009, "body": "Are you sure decimalValue is initialized to 0"}, {"owner": {"reputation": 23, "user_id": 9561742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db542bed3a015c1a5a47bfab1a60dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "B Robert", "link": "https://stackoverflow.com/users/9561742/b-robert"}, "edited": false, "score": 0, "creation_date": 1522215347, "post_id": 49526151, "comment_id": 86059095, "body": "Just checked, I had it initialized as a Char, changed it to Int and it is initialized to 0. Output now returns -144 when input 10."}, {"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "reply_to_user": {"reputation": 23, "user_id": 9561742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db542bed3a015c1a5a47bfab1a60dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "B Robert", "link": "https://stackoverflow.com/users/9561742/b-robert"}, "edited": false, "score": 0, "creation_date": 1522215496, "post_id": 49526151, "comment_id": 86059155, "body": "arrayCounter is it initialized to zero? you would have to debug to see whats going wrong"}, {"owner": {"reputation": 23, "user_id": 9561742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db542bed3a015c1a5a47bfab1a60dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "B Robert", "link": "https://stackoverflow.com/users/9561742/b-robert"}, "edited": false, "score": 0, "creation_date": 1522216607, "post_id": 49526151, "comment_id": 86059650, "body": "Of course that was the problem! Thank you so much for your help!"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1522217036, "post_id": 49526151, "comment_id": 86059846, "body": "Note:  you can use <code>sum = sum + (1u &lt;&lt; i) * (bstr[j] - &#39;0&#39;);</code> to eliminate your dependency on <code>math.h</code> for computing a simple power of 2. I would also recommend using <code>unsigned</code> or <code>uint32_t</code> (from <code>stdint.h</code>) for your types as computing the result of negative input (full 32-bit values in twos-compliment format) would take a bit of additional work.  (other nit, is <code>strlen</code> returns <code>size_t</code>) and for short words you can eliminate <code>string.h</code> by initializing <code>size_t len = 0;</code> then <code>for (; bstr[len]; len++) {}</code>. Those are just optional tweaks for a further look at indexing <code>:)</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1522217171, "post_id": 49526151, "comment_id": 86059917, "body": "For style points you can just loop <code>while (len--) sum += (1u &lt;&lt; i) * (bstr[j++] - &#39;0&#39;);</code> as your complete loop construct <code>:)</code>"}], "tags": [], "owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "is_accepted": true, "score": 4, "last_activity_date": 1522212098, "last_edit_date": 1522212098, "creation_date": 1522211636, "answer_id": 49526151, "question_id": 49525907, "link": "https://stackoverflow.com/questions/49525907/converting-array-of-binary-numbers-to-decimal/49526151#49526151", "title": "Converting array of binary numbers to decimal", "body": "<p>There was similar question asked(Binary to Decimal and Hex (bit by bit)\n) where I had replied to use formula below to convert binary chars to decimal</p>\n\n<p>2^7 * (1 OR 0) + 2^6 * (1 OR 0) + 2^5 * (1 OR 0) + 2^4 * (1 OR 0) + 2^3 * (1 OR 0) + 2^2 * (1 OR 0) + 2^1 * (1 OR 0) + 2^0 * (1 OR 0)</p>\n\n<p>Below is the sample code you can refer that does it, you can take <code>bstr</code> in input instead of initializing at declaration</p>\n\n<pre><code>#include&lt;math.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nint main()\n{\nchar bstr[]=\"10011\";\nint i=0;\nint len  = strlen(bstr);\nint sum = 0;\nint j = 0;\n\nfor(i=(len-1);i&gt;=0;i--)\n{\n    sum = sum + (pow(2,i) * (bstr[j] - '0'));\n    j++;\n}\nprintf(\"decimal = %d\\n\",sum);\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9561742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db542bed3a015c1a5a47bfab1a60dcdc?s=128&d=identicon&r=PG&f=1", "display_name": "B Robert", "link": "https://stackoverflow.com/users/9561742/b-robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2392, "favorite_count": 0, "accepted_answer_id": 49526151, "answer_count": 1, "score": 1, "last_activity_date": 1522213368, "creation_date": 1522209916, "question_id": 49525907, "link": "https://stackoverflow.com/questions/49525907/converting-array-of-binary-numbers-to-decimal", "title": "Converting array of binary numbers to decimal", "body": "<p>I am trying to convert an array of binary characters to Decimal. My code looks something like this:</p>\n\n<pre><code>int main(int argc, char** argv) {\n   int STRING_SIZE = 32;\n   int stringLength = 0; \n   char input[STRING_SIZE];\n   int arrayCounter = 0; \n   int base = 0;\n   char decimalValue[stringLength];\n   int exponent = 0;\n   int remainder[stringLength];\n\nprintf(\"\\nPlease enter a Binary, Decimal or Hexadecimal value no longer than 32 characters. \");\nscanf(\"%s\", input);\nfgetc(stdin);\n\n//Count the length of the string.\nwhile (input[stringLength] != 0) { \n    printf(\"%c\", input[stringLength]);\n    stringLength++;\n }\n\nfor (arrayCounter = 0; arrayCounter != stringLength; arrayCounter++) {\n    remainder[arrayCounter] = input[arrayCounter] - '0' / 10;\n    decimalValue[arrayCounter] = decimalValue[arrayCounter] + remainder[arrayCounter] * base;\n    input[arrayCounter] = input[arrayCounter] / 10;\n    base = base * 2;\n    printf(\"%c\", decimalValue[arrayCounter]);\n }\n\nprintf(\"%s\", decimalValue);\n\n\n\nreturn (EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>I know how to convert between binary and Decimal, but I am extremely confused on how to convert binary to decimal when the input is an array of characters.</p>\n"}, {"tags": ["c", "search", "data-structures", "binary-tree"], "comments": [{"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "edited": false, "score": 1, "creation_date": 1522207905, "post_id": 49525562, "comment_id": 86057054, "body": "Replace two last lines with <code>return q;</code>"}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1522209792, "post_id": 49525562, "comment_id": 86057506, "body": "Take the <a href=\"https://stackoverflow.com/tour\">tour</a>, read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Without an MCVE, it&#39;s hard to say for sure what the problem is."}, {"owner": {"reputation": 3, "user_id": 5129545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c2656d8b03c67bc93b765b30261942?s=128&d=identicon&r=PG&f=1", "display_name": "nangunoori shivani", "link": "https://stackoverflow.com/users/5129545/nangunoori-shivani"}, "edited": false, "score": 0, "creation_date": 1522258110, "post_id": 49525562, "comment_id": 86088717, "body": "Yeah, that works but I want to know why the above code is working. Because, at a point of time there is no return value. when root becomes null it returns 0 to called function and is stored in either p or q but neither of them is returned again."}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1522277437, "post_id": 49525562, "comment_id": 86098369, "body": "Why even have such a function?  Normally, a tree search function returns the node or a pointer to it. Just knowing it&#39;s there, you still have to search for it to do anything with it. What you have, is a useless exercise."}], "answers": [{"comments": [{"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1522210149, "post_id": 49525936, "comment_id": 86057597, "body": "Since this is obviously a homework assignment, I am not going to fix your code for you."}, {"owner": {"reputation": 3, "user_id": 5129545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c2656d8b03c67bc93b765b30261942?s=128&d=identicon&r=PG&f=1", "display_name": "nangunoori shivani", "link": "https://stackoverflow.com/users/5129545/nangunoori-shivani"}, "edited": false, "score": 0, "creation_date": 1522258323, "post_id": 49525936, "comment_id": 86088854, "body": "Thanks for the info. I think I should check the warning level in the compiler.It works by using few return statements but I was wondering why the above code was not throwing an error that &#39;it has reached end of the function with no return value&#39;"}], "tags": [], "owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "is_accepted": true, "score": 0, "last_activity_date": 1522210494, "last_edit_date": 1522210494, "creation_date": 1522210061, "answer_id": 49525936, "question_id": 49525562, "link": "https://stackoverflow.com/questions/49525562/searching-an-element-in-binary-tree-using-in-order-traversal/49525936#49525936", "title": "searching an element in binary tree using in order traversal", "body": "<p>What you have there is an unstructured function. There are four return statements and five possible return paths. One of the returns explicitly returns zero, the others explicitly return 1, therefore either you are calling <code>search</code> with NULL for <code>root</code> or the fifth implicit return path just happens to return zero.</p>\n\n<p>Dial up the warning level on your compiler, it should have flagged the fact that not all execution paths return a value.</p>\n\n<p>I suggest you rearrange your logic such that there is a single return statement at the end of the function.</p>\n"}, {"tags": [], "owner": {"reputation": 327, "user_id": 6787839, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/439219a3eb995a08907ea742ed9e2fb7?s=128&d=identicon&r=PG&f=1", "display_name": "Zaid Khan", "link": "https://stackoverflow.com/users/6787839/zaid-khan"}, "is_accepted": false, "score": -1, "last_activity_date": 1522239937, "creation_date": 1522239937, "answer_id": 49534513, "question_id": 49525562, "link": "https://stackoverflow.com/questions/49525562/searching-an-element-in-binary-tree-using-in-order-traversal/49534513#49534513", "title": "searching an element in binary tree using in order traversal", "body": "<p>Here, I am using stack for the iterative inorder traversal of a tree.</p>\n\n<pre><code>int find_element(struct node *root,int val){\n\n     if(!root) return 0;\n     std::stack&lt;node*&gt; s;\n     while(!s.empty() || root){\n          if(root){\n              s.push(root);\n              root=root-&gt;left;\n          }\n          else\n          {\n              root=s.top();\n              s.pop();\n              if(root-&gt;val==val) return 1;\n              root=root-&gt;right;\n          }\n     }\n     return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5129545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c2656d8b03c67bc93b765b30261942?s=128&d=identicon&r=PG&f=1", "display_name": "nangunoori shivani", "link": "https://stackoverflow.com/users/5129545/nangunoori-shivani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 49525936, "answer_count": 2, "score": 0, "last_activity_date": 1522239937, "creation_date": 1522207356, "last_edit_date": 1522211371, "question_id": 49525562, "link": "https://stackoverflow.com/questions/49525562/searching-an-element-in-binary-tree-using-in-order-traversal", "title": "searching an element in binary tree using in order traversal", "body": "<pre><code>struct tnode\n{\n    int val;\n    struct tnode *left;\n    struct tnode *right;\n};\n\nint search(struct tnode *root, int val)\n{\n    int p = 0;\n    int q = 0;\n    if (!root) return 0;\n    p = search(root-&gt;left, val);\n    if (p == 1) return 1;\n    if (root-&gt;val == val) return 1;\n    q = search(root-&gt;right, val);\n    if (q == 1) return 1;\n}\n</code></pre>\n\n<p>I am not understanding how the above code is returning <code>0</code> when <code>val</code> is not found while searching the tree. </p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 2310, "user_id": 3656081, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/69071f1a4855e7a35b785ca46e150962?s=128&d=identicon&r=PG&f=1", "display_name": "tangy", "link": "https://stackoverflow.com/users/3656081/tangy"}, "edited": false, "score": 0, "creation_date": 1522205857, "post_id": 49525335, "comment_id": 86056506, "body": "Isnt it -lpthread?"}, {"owner": {"reputation": 84, "user_id": 6021543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/babbaf93806d14b81173786db96fbebc?s=128&d=identicon&r=PG&f=1", "display_name": "Anders", "link": "https://stackoverflow.com/users/6021543/anders"}, "edited": false, "score": 0, "creation_date": 1522205886, "post_id": 49525335, "comment_id": 86056510, "body": "It is, ya got me before I changed it :)"}], "answers": [{"comments": [{"owner": {"reputation": 358, "user_id": 9108200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9012e5c159538d7ed0efa10f195715?s=128&d=identicon&r=PG&f=1", "display_name": "forthe", "link": "https://stackoverflow.com/users/9108200/forthe"}, "edited": false, "score": 0, "creation_date": 1522205956, "post_id": 49525355, "comment_id": 86056531, "body": "Unfortunately, I can&#39;t try that out for myself, because I&#39;m using an online compiler that doesn&#39;t allow custom build options. But I&#39;ll give you a vote anyway, thanks!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1522206040, "post_id": 49525355, "comment_id": 86056552, "body": "See the suggested duplicate why this answer likely won&#39;t work."}], "tags": [], "owner": {"reputation": 45, "user_id": 9549046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98c6eb3c8d98dcb3f4abe9046303bef5?s=128&d=identicon&r=PG&f=1", "display_name": "jmpsabisb", "link": "https://stackoverflow.com/users/9549046/jmpsabisb"}, "is_accepted": false, "score": 0, "last_activity_date": 1522206168, "last_edit_date": 1522206168, "creation_date": 1522205861, "answer_id": 49525355, "question_id": 49525335, "link": "https://stackoverflow.com/questions/49525335/c-pthread-h-not-working/49525355#49525355", "title": "C pthread.h not working", "body": "<p>Compile and <strong>link</strong> with</p>\n\n<pre><code>gcc -pthread main.c\n</code></pre>\n"}], "owner": {"reputation": 358, "user_id": 9108200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9012e5c159538d7ed0efa10f195715?s=128&d=identicon&r=PG&f=1", "display_name": "forthe", "link": "https://stackoverflow.com/users/9108200/forthe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 685, "favorite_count": 0, "closed_date": 1522206072, "answer_count": 1, "score": 0, "last_activity_date": 1522206538, "creation_date": 1522205670, "last_edit_date": 1522206538, "question_id": 49525335, "link": "https://stackoverflow.com/questions/49525335/c-pthread-h-not-working", "closed_reason": "Duplicate", "title": "C pthread.h not working", "body": "<p>I am using gcc 4.6.3, and I am trying to write a program that uses asynchronous flow via threads. After some research, I decided that <code>threads.h</code> was best for windows and <code>pthread.h</code> was best for POSIX systems. So I used <code>pthread.h</code>.</p>\n\n<p>After a lot of debugging, I have my code.</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid *exe(){\n  char i;\n  for(i = 0; i &lt; 0; i++){\n    printf(\"%c\\n\", i);\n  }\n}\n\nint main(){\n  long unsigned int *id = (void *)1ul;\n  int d = pthread_create(id, NULL, exe, NULL);\n}\n</code></pre>\n\n<blockquote>\n  <p>This code is not intended to be of any use, it is for me to teach myself threading.</p>\n</blockquote>\n\n<p>The problem is that it throws the error</p>\n\n<pre><code>exit status 1\n/file/path.o: In function `main':\nmain.c:(.text+0x5d): undefined reference to `pthread_create'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>It seems that the <code>pthread_create</code> function is undefined, but I have included the library and it didn't give me any directory not found errors.</p>\n\n<p>Does anyone know why this is happening?</p>\n"}, {"tags": ["c", "multithreading", "fork", "public"], "comments": [{"owner": {"reputation": 1016, "user_id": 8456454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f627dc7d8a375702876cbfc2a22f168?s=128&d=identicon&r=PG&f=1", "display_name": "gsquaredxc", "link": "https://stackoverflow.com/users/8456454/gsquaredxc"}, "edited": false, "score": 3, "creation_date": 1522204797, "post_id": 49525205, "comment_id": 86056249, "body": "No no no. You <b><i>DO NOT</i></b> want to do this."}, {"owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "edited": false, "score": 3, "creation_date": 1522205110, "post_id": 49525205, "comment_id": 86056318, "body": "<code>fork</code> doesn&#39;t create a separate thread, it creates a separate process. The child process is modifying <i>its</i> copy of <code>foo</code> (linux implements copy-on-write memory when forking). If you really want to use multiple threads, look up pthreads."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 1, "creation_date": 1522205132, "post_id": 49525205, "comment_id": 86056323, "body": "Access away lol. Child and parent have their own copies. You get junk data because parent never bothered to write anything to it&#39;s array"}, {"owner": {"reputation": 1, "user_id": 9561402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3xW8.jpg?s=128&g=1", "display_name": "David S.", "link": "https://stackoverflow.com/users/9561402/david-s"}, "edited": false, "score": 0, "creation_date": 1522205194, "post_id": 49525205, "comment_id": 86056340, "body": "Yeah, I realized on my own that I said &quot;threads&quot; when I&#39;m actually forking processes here. What I had intended to ask was the same question but in regards to threads. Even so, why is this wrong to do?"}, {"owner": {"reputation": 6059, "user_id": 1230086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dd67f82db5bf5f26a1597400c6ffbf4?s=128&d=identicon&r=PG", "display_name": "tijko", "link": "https://stackoverflow.com/users/1230086/tijko"}, "edited": false, "score": 0, "creation_date": 1522330264, "post_id": 49525205, "comment_id": 86122296, "body": "Aside from it being fundamentally flawed (see Stephen Newell&#39;s comment) you usually want to coordinate a locking mechanism to avoid memory corruption."}], "answers": [{"tags": [], "owner": {"reputation": 6059, "user_id": 1230086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dd67f82db5bf5f26a1597400c6ffbf4?s=128&d=identicon&r=PG", "display_name": "tijko", "link": "https://stackoverflow.com/users/1230086/tijko"}, "is_accepted": false, "score": 0, "last_activity_date": 1522516984, "last_edit_date": 1522516984, "creation_date": 1522212360, "answer_id": 49526272, "question_id": 49525205, "link": "https://stackoverflow.com/questions/49525205/in-c-i-want-to-access-one-array-in-two-separate-processes/49526272#49526272", "title": "In C, I want to access one array in two separate processes", "body": "<p>Using <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow noreferrer\"><code>mmap</code></a> you can create a shared memory block in your parent process.  This is a basic example removing error checking for brevity.</p>\n\n<p>You want to sure the proper protections and flags are set for your needs.  Then hand off the address returned by <code>mmap</code> to your child process.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n\n#define LIMIT_MAP 5\n\nvoid child_worker(void *map)\n{\n    int map_value = -1;\n    int idx = 0;\n\n    while (map_value != LIMIT_MAP) {\n        map_value = *((int *) map + (idx * sizeof(int)));\n        printf(\"Map value: %d\\n\", map_value);\n        idx++;\n        sleep(2);\n    }\n}\n\nint main(int argc, char *argv[])\n{\n    printf(\"Starting Parent Process...\\n\");\n\n    long page_size = sysconf(_SC_PAGESIZE);\n\n    void *memory_map = mmap(0, page_size, PROT_WRITE | PROT_READ, \n                                          MAP_SHARED | MAP_ANONYMOUS, 0, 0);\n\n    printf(\"Memory map created: &lt;%p&gt;\\n\", memory_map);\n\n    pid_t pid = fork();\n\n    if (pid == 0) {\n        sleep(1);\n        printf(\"Starting child process\\n\");\n        child_worker(memory_map);\n        printf(\"Exiting child process...\\n\");\n        return 0;\n\n    } else {\n\n        printf(\"Continuing in parent process\\n\");\n\n        int set_values[5] = { 1, 2, 3, 4, 5 };\n\n        for (int i=0; i &lt; 5; i++) {\n            printf(\"Setting value: %d\\n\", set_values[i]);\n            *((int *) memory_map + (sizeof(int) * i)) = set_values[i];\n            sleep(1);\n        }\n\n        waitpid(pid, NULL, 0);\n\n        printf(\"Child process is finished!\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>If <code>fork</code> isn't a requirement and your platform allows for it, <code>pthread</code> is one option.  Depending on how your array is being operated on, create a thread pool passing each worker thread a copy of your array.  </p>\n\n<p>This is a contrived example but maybe you can pull something from it:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;pthread.h&gt;\n\n#define THREAD_COUNT 3\n#define ITER_LIMIT   7\n\nstruct worker_params {\n    int idx;\n    int max;\n    bool done;\n    double *data;\n    double condition;\n};\n\nvoid *worker(void *arg)\n{\n    struct worker_params *wp = (struct worker_params *) arg;\n\n    int count = 0;\n\n    while ( 1 ) {\n\n        wp-&gt;data[wp-&gt;idx] = drand48();\n        if (wp-&gt;max == count)\n            wp-&gt;done = true;\n        sleep(1);\n\n        count++;\n    } \n\n    return NULL;   \n}\n\nint main(int argc, char *argv[])\n{\n    double data[THREAD_COUNT] = { 0.0 };\n\n    pthread_t worker_1, worker_2, worker_3;\n    pthread_t worker_threads[] = { worker_1, worker_2, worker_3 };\n\n    struct worker_params wps[] = {\n        { .idx=0, .condition=0.1, .data=data, .done=0 },\n        { .idx=1, .condition=0.2, .data=data, .done=0 },\n        { .idx=2, .condition=0.3, .data=data, .done=0},\n    };\n\n    for (int i=0; i &lt; THREAD_COUNT; i++) {\n        wps[i].max = (rand() % ITER_LIMIT) + 2;\n        pthread_create(&amp;worker_threads[i], NULL, worker, (void *) &amp;wps[i]);\n    }\n\n    // Continue on main execution thread\n\n    int running = 1;\n\n    while ( running ) {\n        for (int i=0; i &lt; THREAD_COUNT; i++) {\n            if (wps[i].done) {\n                printf(\"Limit hit in worker &lt;%d&gt;\\n\", i + 1);\n                running = 0;\n                break;\n            }\n\n            printf(\"Data in worker &lt;%d&gt; :: %g\\n\", i + 1, wps[i].data[i]);\n        }\n\n        sleep(1);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9561402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3xW8.jpg?s=128&g=1", "display_name": "David S.", "link": "https://stackoverflow.com/users/9561402/david-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 0, "closed_date": 1522226312, "answer_count": 1, "score": -1, "last_activity_date": 1522516984, "creation_date": 1522204695, "last_edit_date": 1522205259, "question_id": 49525205, "link": "https://stackoverflow.com/questions/49525205/in-c-i-want-to-access-one-array-in-two-separate-processes", "closed_reason": "Duplicate", "title": "In C, I want to access one array in two separate processes", "body": "<p>This is essentially what I want to do, but the outputs are junk data. What are some of the different options I have for making the child's array visible from inside the parent process?</p>\n\n<pre><code>#include &lt;sys/wait.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n    int foo[3];                                     //initialize array\n\n    pid_t pid;\n    pid = fork();                                   //create child thread\n\n    if (pid == 0) {                                 //child:\n        foo[0] = 0; foo[1] = 1; foo[2] = 2;         //populate array\n    }\n\n    else {                                          //parent:\n        wait(NULL);                                 //wait for child to finish\n        printf(\"%d %d %d\", foo[0], foo[1], foo[2]); //print contents of array\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c", "algorithm", "mathematical-optimization", "max-flow"], "answers": [{"comments": [{"owner": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "edited": false, "score": 0, "creation_date": 1573331374, "post_id": 49552057, "comment_id": 103850018, "body": "NetworkX also has an implementation of Hopcroft--Karp in <a href=\"https://networkx.github.io/documentation/stable/reference/algorithms/generated/networkx.algorithms.bipartite.matching.hopcroft_karp_matching.html\" rel=\"nofollow noreferrer\"><code>networkx.algorithms.bipartite.matching.hopcroft_karp_matchin&zwnj;&#8203;g</code></a> (and has had that one since 2015)."}], "tags": [], "owner": {"reputation": 4154, "user_id": 3844480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ho59A.jpg?s=128&g=1", "display_name": "ilim", "link": "https://stackoverflow.com/users/3844480/ilim"}, "is_accepted": false, "score": 1, "last_activity_date": 1522403864, "last_edit_date": 1522403864, "creation_date": 1522314540, "answer_id": 49552057, "question_id": 49524937, "link": "https://stackoverflow.com/questions/49524937/fast-maximum-bipartite-matching-in-c-or-python/49552057#49552057", "title": "Fast maximum bipartite matching in C or Python", "body": "<p>Well, if you intend to use the network flow approach, all the algorithms available seem to have a factor of at least <code>O(|V||E|)</code> in their time complexity, or even more (e.g. <code>O(|V|^2|E|)</code> ) in most cases.</p>\n\n<p>If you have a graph with 2000 nodes, even if the number of edges <code>|E|</code> is linear to the number of vertices, <code>|V|</code>, an algorithm with the time complexity <code>O(|V|^2|E|)</code> would result in an execution time as long as a couple of minutes in an average everyday computer. If the graph is dense, and |E| is linear to <code>|V|^2</code>, then it would possibly take days to execute.</p>\n\n<p>An alternative algorithm to solve this bipartite maximal matching problem may be <a href=\"https://en.wikipedia.org/wiki/Hopcroft%E2%80%93Karp_algorithm\" rel=\"nofollow noreferrer\">Hopcroft-Karp algorithm</a>. It starts by having an empty set <code>M</code> for a bipartite matching, and tries expanding <code>M</code> by finding augmenting paths in the given graph. The algorithm has <code>O(|E|\u221a|V|)</code> complexity, which is better than the network-flow flavored algorithms like Push Relabel or Edmonds-Karp.</p>\n\n<p>Also, there already is <a href=\"https://pypi.python.org/pypi/hopcroftkarp/1.2.3\" rel=\"nofollow noreferrer\">a Python library</a> implementing Hopcroft-Karp algorithm, which I believe was another thing you were looking for.</p>\n"}, {"tags": [], "owner": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "is_accepted": false, "score": 2, "last_activity_date": 1594387978, "last_edit_date": 1594387978, "creation_date": 1573633647, "answer_id": 58833001, "question_id": 49524937, "link": "https://stackoverflow.com/questions/49524937/fast-maximum-bipartite-matching-in-c-or-python/58833001#58833001", "title": "Fast maximum bipartite matching in C or Python", "body": "<p><a href=\"https://www.scipy.org/\" rel=\"nofollow noreferrer\">SciPy</a>, as of version 1.4.0, contains an implementation of Hopcroft--Karp in <code>scipy.sparse.csgraph.maximum_bipartite_matching</code> that compares favorably to NetworkX, performance-wise. The function exists in previous versions as well but then assumes a perfect matching to; this assumption is lifted in 1.4.0.</p>\n<p>Exactly how well it does will depend on the structure of the bipartite graph, but just by taking random graphs (and ignoring the time it will take NetworkX to initialize the underlying data structures), I get around 200x performance improvements:</p>\n<pre><code>import networkx as nx\nfrom scipy.sparse import rand\nfrom scipy.sparse.csgraph import maximum_bipartite_matching\n\n\nn = 5000\ngraph = rand(n, n, density=.1, format='csr', random_state=42)\nG = nx.algorithms.bipartite.from_biadjacency_matrix(graph)\n</code></pre>\n<pre><code>&gt;&gt;&gt; %timeit maximum_bipartite_matching(graph, perm_type='column')\n8.95 ms \u00b1 183 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n&gt;&gt;&gt; %timeit nx.algorithms.bipartite.maximum_matching(G, top_nodes=range(n))\n2.01 s \u00b1 118 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 4752498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15f50cc41fe1cad71bb3fbd5cdff8e44?s=128&d=identicon&r=PG&f=1", "display_name": "ivan", "link": "https://stackoverflow.com/users/4752498/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2953, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1594387978, "creation_date": 1522202544, "last_edit_date": 1573633700, "question_id": 49524937, "link": "https://stackoverflow.com/questions/49524937/fast-maximum-bipartite-matching-in-c-or-python", "title": "Fast maximum bipartite matching in C or Python", "body": "<p>Is there a fast off the shelf implementation of maximum cardinality bipartite matching in C or Python?</p>\n\n<p>I tried <code>networkx</code>, but it is very slow. I have a two-layer graph with about 1000 nodes in each layer. The density varies. What is the time I can expect for this setting?</p>\n\n<p>I see this post <a href=\"https://stackoverflow.com/questions/4008997/fast-max-flow-min-cut-library-for-python\">Fast max-flow min-cut library for Python</a>, but is there anything faster?</p>\n"}, {"tags": ["c", "linux", "multithreading", "pthreads"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9549719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cb5b64c04b81753deca5d4d18b60f80?s=128&d=identicon&r=PG&f=1", "display_name": "N Sharrett", "link": "https://stackoverflow.com/users/9549719/n-sharrett"}, "edited": false, "score": 0, "creation_date": 1523479816, "post_id": 49524894, "comment_id": 86583908, "body": "Wasn&#39;t the only issue, but that fix set me down the right direction in getting the fault taken care of, thanks!"}], "tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": true, "score": 4, "last_activity_date": 1522202505, "last_edit_date": 1522202505, "creation_date": 1522202201, "answer_id": 49524894, "question_id": 49524870, "link": "https://stackoverflow.com/questions/49524870/segmentation-fault-on-pthread-create/49524894#49524894", "title": "Segmentation Fault on pthread_create", "body": "<p>Your problem is here:</p>\n\n<pre><code>int pNumber = *((int*) x);\n</code></pre>\n\n<p>You cast an integer to a pointer when you call <code>pthread_create()</code>, but then you cast it to a <em>pointer</em> in the thread function and proceed to dereference it.</p>\n\n<p>Instead, try</p>\n\n<pre><code>    int pNumber = (int) x;\n</code></pre>\n\n<p>Note that this may cause a compiler warning of <code>sizeof(int) != sizeof(void*)</code>. You may want to cast to <code>uintptr_t</code> first.</p>\n\n<p>Alternatively, you could store the <code>int</code> in a local variable and pass the address of this to <code>pthread_create</code>. Just be sure that all threads have stopped before the containing function returns.</p>\n\n<p>Or, you could <code>malloc</code> a structure with this <code>int</code> as a member, and pass a pointer to it.</p>\n"}], "owner": {"reputation": 11, "user_id": 9549719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cb5b64c04b81753deca5d4d18b60f80?s=128&d=identicon&r=PG&f=1", "display_name": "N Sharrett", "link": "https://stackoverflow.com/users/9549719/n-sharrett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 49524894, "answer_count": 1, "score": 0, "last_activity_date": 1522202505, "creation_date": 1522201992, "question_id": 49524870, "link": "https://stackoverflow.com/questions/49524870/segmentation-fault-on-pthread-create", "title": "Segmentation Fault on pthread_create", "body": "<p>I am having an issue with the following C code. The code itself is supposed to create 5 threads that simulate the Dining Philosophers problem in which threads are accessing shared data. The code follows: </p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n//creation of the mutex lock, condition variables, and state\npthread_mutex_t mutex;\npthread_cond_t cond_var[5];\nenum{THINKING, HUNGRY, EATING}state[5];\n\n//test if possible to get forks\nvoid test(int pNumber){\n\n    //start eating if the adjacent philosophers aren't eating\n    if((state[(pNumber + 1) % 5] != EATING) &amp;&amp; (state[(pNumber + 4) % 5] != EATING)){\n        state[pNumber] = EATING;\n\n        //signal self if test() called by another thread\n        pthread_cond_signal(&amp;cond_var[pNumber]);\n    }\n}\n\n//used to make the philosopher's forks unavailable\nvoid pickup_forks(int pNumber){\n\n    //get lock\n    pthread_mutex_lock(&amp;mutex);\n\n    //set state to hungry\n    state[pNumber] = HUNGRY;\n    printf(\"Philosopher %d is HUNGRY\\n\", pNumber);\n\n    //attempt to begin eating. if unable to, will wait\n    test(pNumber);\n    while(state[pNumber] != EATING){\n        pthread_cond_wait(&amp;cond_var[pNumber], &amp;mutex);\n        //switched the order of the arguments\n    }\n\n    //release lock\n    pthread_mutex_unlock(&amp;mutex);\n}\n\n//allow neighbors to use philosopher's forks\nvoid release_forks(int pNumber){\n\n    //get lock\n    pthread_mutex_lock(&amp;mutex);\n\n    //set own state to thinking\n    state[pNumber] = THINKING;\n\n    //tell adjacent philosophers to try to eat\n    test(((pNumber + 1) % 5)); \n    test(((pNumber + 4) % 5));\n\n    //release lock\n    pthread_mutex_unlock(&amp;mutex);\n}\n\n//used by the thread to run the philosophers\nvoid *runPhilosopher(void *x){\n\n    //which philosopher it is\n    int pNumber = *((int*) x);\n\n    //initially thinking\n    state[pNumber] = THINKING;\n    printf(\"Philosopher %d is THINKING\\n\", pNumber);\n\n    //\"think\" for a random amount of time between 1-3 seconds\n    int sleepTime = rand() % 3 + 1;\n    sleep(sleepTime);\n\n    //each philosopher eats a total of 5 times\n    int i = 0;\n    for(i = 0; i &lt; 5; i++){\n\n        //get the forks and begin eating\n        pickup_forks(pNumber);\n\n        //eating time\n        sleep(2);\n\n        //put down forks and resume thinking\n        release_forks(pNumber);\n        sleepTime = rand() % 3 + 1;\n        sleep(sleepTime);\n    }\n\n    printf(\"Philosopher %d has finished eating\\n\", pNumber);\n}\n\nint main(int argc, char *argv[])\n{\n\n    pthread_mutex_init(&amp;mutex, NULL);\n\n    int i = 0;\n    for(i = 0; i &lt; 5; i++){\n        pthread_cond_init(&amp;cond_var[i], NULL);\n    }\n\n\n    pthread_t tid[5];    //thread id\n    pthread_attr_t attr;     //set of thread attributes\n\n    pthread_create(&amp;tid[0], NULL, runPhilosopher, (void *) 0);\n    pthread_create(&amp;tid[1], NULL, runPhilosopher, (void *) 1);\n    pthread_create(&amp;tid[2], NULL, runPhilosopher, (void *) 2);\n    pthread_create(&amp;tid[3], NULL, runPhilosopher, (void *) 3);\n    pthread_create(&amp;tid[4], NULL, runPhilosopher, (void *) 4);\n\n    //wait for threads to finish\n    for(i = 0; i &lt; 5; i++){\n        pthread_join(tid[i], NULL);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I am on a Linux virtual machine, using gedit. The program compiles fine, but upon attempting to run it, I am getting a \"Segmentation Fault\" error, which is coming from the attempted thread creations, according to gdb. None of the related questions here that I found applied to my program.</p>\n\n<p>Things I have tried: </p>\n\n<ul>\n<li>Commenting out the vast majority of the code and attempting to create a single thread that simply runs runPhilosopher, which had been stripped to just a single printf statement. This resulted in the code seemingly not creating the thread, as there was no output.</li>\n<li>Replacing NULL in the thread creations with &amp;attr. This changed the error to Aborted, but did nothing else.</li>\n<li>Using a single thread id for all of them, as I have in a previous program. This made no difference.</li>\n<li>A few other odds and ends that I can't remember</li>\n</ul>\n\n<p>Does anybody see a simple solution that I've simply overlooked, or is there a serious flaw in my program? I can't understand what the issue could be, but I fully admit that I'm hardly well-versed in C. Any help would be greatly appreciated!</p>\n"}, {"tags": ["c", "microcontroller", "nrf51"], "owner": {"reputation": 11, "user_id": 2567995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8deb4fd1e968a29001e77fd39a37ab72?s=128&d=identicon&r=PG", "display_name": "MrEspin", "link": "https://stackoverflow.com/users/2567995/mrespin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522200992, "creation_date": 1522200992, "question_id": 49524772, "link": "https://stackoverflow.com/questions/49524772/change-pin-mapping-for-uart-in-the-code-for-nrf51", "title": "Change PIN mapping for UART in the code for nRF51", "body": "<p>While communicating with one serial device, I would like to send some information to another serial device (after finished with the first one). How can I change pin mapping (my own built boards) for UART while running the code for nRF51822 (g_ADigitalPinMap)?</p>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1522209101, "post_id": 49524764, "comment_id": 86057333, "body": "Here&#39;s a usual analogy for arrays vs pointers: What is the benefit of having a house address vs. a street? With a house address it is easier to distinguish &quot;no address provided&quot; and &quot;empty lot provided&quot;, also it occupies less space than a street. In both cases I can initialize it from a given street. On the other hand, I can&#39;t easily put people in my house address, it has to actually be the address of a valid house."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1522207801, "post_id": 49524862, "comment_id": 86057024, "body": "Somewhat a tight one here on occupying less space. <code>char *p</code> 8-bytes on x86_64, <code>char s[10];</code> is 10-bytes anywhere. If the string + <i>nul-char</i> was less than 8-bytes -- the pointer would actually require more memory than the array. But in the general sense, you are correct."}, {"owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1522228027, "post_id": 49524862, "comment_id": 86066484, "body": "@DavidC.Rankin: the <code>struct</code> itself, yes, of course; but assuming he still needs the same memory somewhere else (i.e. a string of 10 bytes), then it is always strictly more (this is what I meant by <code>sizeof(void *) + sizeof(char [10])</code>). Also, if he points to dynamically allocated memory, then we need to add <code>malloc</code>&#39;s overhead."}], "tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": false, "score": 1, "last_activity_date": 1522203955, "last_edit_date": 1522203955, "creation_date": 1522201899, "answer_id": 49524862, "question_id": 49524764, "link": "https://stackoverflow.com/questions/49524764/pointer-to-char-or-char-array/49524862#49524862", "title": "pointer to char or char array", "body": "<blockquote>\n  <p>also it occupies less space then an array.</p>\n</blockquote>\n\n<p>It doesn't, since you will have to point to some data anyway. Assuming you point to a buffer of the same size, you end up with <code>sizeof(void *) + sizeof(char [10])</code> in total.</p>\n\n<blockquote>\n  <p>Also, in both cases I can initialize:</p>\n\n<pre><code>struct my_struct p { .p = 10, .s = \"abcd\" };\n</code></pre>\n</blockquote>\n\n<p>Yes, because the compiler is setting up the literal string in memory and pointing the <code>s</code> member to it. In this case, you are using <code>sizeof(void *) + sizeof(char [5])</code> bytes in total.</p>\n\n<blockquote>\n  <p>I can't easily use strncpy() on char *, it has to be valid pointer on the allocated memory.</p>\n</blockquote>\n\n<p>No, you can use <code>strncpy()</code> in both cases.</p>\n\n<hr>\n\n<p>Regarding what you should use: the choice is not so much about advantages and disadvantages. Instead, you should use whatever you need. For instance, if you don't know in advance the maximum size of the array, you have no choice but to go for the pointer approach. If you do know, then you can use both approaches; but the array one will be simpler to maintain.</p>\n\n<p>Performance considerations can also influence your decisions. For instance, assuming you operate on many instances of the <code>struct</code>, it depends on how you are accessing the <code>struct</code> and the kind of data structure you are using to hold the instances, i.e. the access patterns to the data. Many times an embedded array is faster, but not always.</p>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1522208022, "post_id": 49524939, "comment_id": 86057092, "body": "Other Advantage with <code>char s[10];</code> structures of that type can be assigned, e.g. <code>struct my_struct p { .p = 10, .s = &quot;abcd&quot; }, pb; pb = p;</code>, with a pointer - a deep copy would be required to duplicate."}], "tags": [], "owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "is_accepted": true, "score": 3, "last_activity_date": 1522203184, "last_edit_date": 1522203184, "creation_date": 1522202548, "answer_id": 49524939, "question_id": 49524764, "link": "https://stackoverflow.com/questions/49524764/pointer-to-char-or-char-array/49524939#49524939", "title": "pointer to char or char array", "body": "<p>The advantages and disadvantages depend on the your algorithms and what you are\ntrying to achieve, there is no simple answer to that. What can be said is this:</p>\n\n<p>If the structure has a <code>char</code> array (this is only my opinion):</p>\n\n<p><strong>Advantages</strong></p>\n\n<ul>\n<li><p>You don't need to allocate memory for it, no need to check if <code>malloc</code> fails\nand no need to free the memory afterwards</p></li>\n<li><p>Easy to use <code>fwrite</code>/<code>fread</code> for an object of your structure, no need to take care of\nthe pointer case where you have to dereference it prior to the write operation /\nallocate memory prior to the read operation.</p></li>\n<li><p>You can use string literals to initialize it and you can change the contents\nafterwards.</p></li>\n</ul>\n\n<p><strong>Disadvantage</strong></p>\n\n<ul>\n<li>You have only a limited amount of space, if you need to store a string that is\nlonger than what the array can hold, then you are in trouble and might have to\nreconsider you design.</li>\n</ul>\n\n<hr>\n\n<p>If the structure has a <code>char</code> pointer:</p>\n\n<p><strong>Advantages</strong></p>\n\n<ul>\n<li><p>You have more freedom with your pointer, you can allocate and reallocate\nmemory depending on your needs.</p></li>\n<li><p>You can assign the pointer to point to other <code>char</code> arrays without the need of\nallocation</p></li>\n<li><p>You structures are smaller in size and would need less memory. Great when you\nare not dynamically allocating memory for your structs.</p></li>\n</ul>\n\n<p><strong>Disadvantage</strong></p>\n\n<ul>\n<li><p>You need to do memory management yourself, depending on your design, this can\nconsume a lot of your time until you get it right</p></li>\n<li><p>If you plan to send/write objects to the network or hard drive, you need to\ntake care of dereferencing the pointer, you cannot do <code>fwrite(obj, n, sizeof *obj, fp)</code>,\nyou have to do in many steps.</p></li>\n<li><p>If you assign a string literal, you have to be careful not to modify it later\non. Modifying a string literal is undefined behaviour and in most systems you'll\nget a segfault right away.</p></li>\n</ul>\n\n<p>In general think about the design of your own software and also on your needs,\nthen you can weight the pros and cons and use the one that fits best to your\nproject.</p>\n\n<hr>\n\n<blockquote>\n  <p>I can't easily use <code>strncpy()</code> on <code>char*</code>, it has to be valid pointer on the allocated memory.</p>\n</blockquote>\n\n<p>That's only partially right, once memory has been allocated, you <em>can</em> use\n<code>strncpy</code>.</p>\n\n<blockquote>\n  <p>Also, in both cases I can initialize:</p>\n\n<pre><code>struct my_struct p { .p = 10, .s = \"abcd\" };\n</code></pre>\n</blockquote>\n\n<p>Yes, but in the case of an array, the array is filled with the contents of the\nstring literal and can be modified later on. In case of the pointer, it will point to the string literal and\nlike I said before, if your algorithm needs to modify the contents, then you\ncannot use strings literals.</p>\n"}, {"tags": [], "owner": {"reputation": 3560, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "is_accepted": false, "score": 1, "last_activity_date": 1522207141, "last_edit_date": 1522207141, "creation_date": 1522206356, "answer_id": 49525410, "question_id": 49524764, "link": "https://stackoverflow.com/questions/49524764/pointer-to-char-or-char-array/49525410#49525410", "title": "pointer to char or char array", "body": "<p>Let me try to explain it simple:</p>\n\n<p>Arrays are simpler to use but harder to manipulate. </p>\n\n<p>Pointers you can easily free space you already have allocated for <code>char*</code> and allocate new space, thus having more flexibility. Lets look at one example:</p>\n\n<pre><code>int cnt = 0; // holds number of characters enterd\nchar c = 0;\nwhile (cnt != -1) {\n  printf(\"Enter number of characters in next word: \");\n  cnt = getint();\n  printf(\"Enter the word: \");\n  char *word = malloc((cnt + 1) * sizeof(char));\n  int i = 0;\n  char c = 0;\n  for (;i &lt; cnt; ++i) {\n     *(word + i) = c; // *(word + i) is technically the same as word[i]\n  }   \n  *(word + i) = '\\0';\n  free (word);\n} \n</code></pre>\n\n<p>You see in above example you can allocate as much space as you need at given time, which you cannot do with array.</p>\n\n<p>So if you are making English dictionary, with array you would need to allocate 45 character right away even though average word length is 5, 6 characters long.</p>\n\n<p>Applying it to your case</p>\n\n<pre><code>struct my_struct {\n  int p;\n  char s[10];\n};\n</code></pre>\n\n<p>would have to take at most 10 characters which is allocated at the start of the program. If you enter 2 characters you 8 are basically wasted. Where in </p>\n\n<pre><code>struct my_struct {\n  int p;\n  char *s;\n};\n</code></pre>\n\n<p>you can call <code>malloc()</code> you can allocate 1 character and it will hold 1 character no wasted space at all, and you can allocate 100 characters and it will hold 100. All of this would be on the fly.</p>\n"}], "owner": {"reputation": 4740, "user_id": 738154, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f2c009cb225b8ecee8de486630c37225?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/738154/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "closed_date": 1522217591, "accepted_answer_id": 49524939, "answer_count": 3, "score": 2, "last_activity_date": 1522207141, "creation_date": 1522200915, "last_edit_date": 1522206647, "question_id": 49524764, "link": "https://stackoverflow.com/questions/49524764/pointer-to-char-or-char-array", "closed_reason": "Duplicate", "title": "pointer to char or char array", "body": "<p>What is the benefit of having an array vs. pointer to char, as in the following structure:</p>\n\n<pre><code>struct my_struct {\n   int p;\n   char s[10];\n};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>struct my_struct {\n   int p;\n   const char *s;\n};\n</code></pre>\n\n<p>The one advantage that I'm seeing is that with <code>char *</code> it is easier to distinguish \"no string provided\" and \"empty string provided\", also it occupies less space then an array.</p>\n\n<p>Also, in both cases I can initialize:</p>\n\n<p><code>struct my_struct p { .p = 10, .s = \"abcd\" };</code></p>\n\n<p>On the other hand, I can't easily use <code>strncpy()</code> on <code>char *</code>, it has to be valid pointer on the allocated memory.</p>\n\n<p>So, what are the other advantages?</p>\n"}, {"tags": ["python", "c", "numpy", "swig"], "answers": [{"comments": [{"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1522601684, "post_id": 49525390, "comment_id": 86207837, "body": "The typemaps using <code>INPLACE_ARRAY</code> as well as <code>ARGOUTVIEW_ARRAY</code> are defined in the <code>numpy.i</code> header. They both work &quot;by reference&quot;."}, {"owner": {"reputation": 14111, "user_id": 217019, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ede807eedb7fe77242664741f91627f7?s=128&d=identicon&r=PG", "display_name": "Mateusz Dymczyk", "link": "https://stackoverflow.com/users/217019/mateusz-dymczyk"}, "reply_to_user": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1522607486, "post_id": 49525390, "comment_id": 86209837, "body": "@JensMunk but 1) they require the C method signature to accept <code>data_type* arg</code> and not <code>data_type** arg</code> 2) require the method signature to take the pointer and the length. Right? Or is there a different way to use them?"}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1522608799, "post_id": 49525390, "comment_id": 86210328, "body": "Single pointer is enough to modify the content of the array for input, <code>INPLACE_ARRAY</code>. For output, <code>ARGOUTVIEW_ARRAY</code> a double pointer is provided, the python array is referencing an array residing in the C code. If the array is updated in C, the numpy array residing in Python is also updated."}, {"owner": {"reputation": 14111, "user_id": 217019, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ede807eedb7fe77242664741f91627f7?s=128&d=identicon&r=PG", "display_name": "Mateusz Dymczyk", "link": "https://stackoverflow.com/users/217019/mateusz-dymczyk"}, "reply_to_user": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1522609541, "post_id": 49525390, "comment_id": 86210547, "body": "I see, ARGOUTVIEW_ARRAY is doing something very similar to what I wrote, but don&#39;t they still require the C method to be in a form <code>void method (int** array, int size)</code>? The methods I&#39;m using don&#39;t take <code>size</code> and I can&#39;t modify them. That was part of the reason why I wrote my own mapping without dimension parameter."}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1522616001, "post_id": 49525390, "comment_id": 86212203, "body": "Yes and no. If you create a <code>NumPy</code> array in Python, it will always have a size and without that, the C program cannot tell if it is going out of bounds. You could write a wrapper with an extra argument, which is hardcoded to the size and use SWIG for wrapping the wrapper. I usually prefer to use <code>ARGOUTVIEWM_ARRAY</code> and use <code>malloc</code> on the C side. This creates a managed array, which is properly cleaned, when the <code>NumPy</code> array is cleared in Python"}], "tags": [], "owner": {"reputation": 14111, "user_id": 217019, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ede807eedb7fe77242664741f91627f7?s=128&d=identicon&r=PG", "display_name": "Mateusz Dymczyk", "link": "https://stackoverflow.com/users/217019/mateusz-dymczyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1522341986, "last_edit_date": 1522341986, "creation_date": 1522206142, "answer_id": 49525390, "question_id": 49524445, "link": "https://stackoverflow.com/questions/49524445/manipulate-numpy-array-inside-c-with-swig/49525390#49525390", "title": "Manipulate Numpy array inside C with SWIG", "body": "<p>To answer my own question, one a bit hacky way would be to change the typemap to something like this:</p>\n\n<pre><code>%typemap(in,\n         fragment=\"NumPy_Fragments\")\n  (DATA_TYPE **ARGOUT_ARRAY1)\n  (PyArrayObject* array=NULL, int is_new_object=0, PyArrayObject_fields* temp=NULL)\n{\n    array = obj_to_array_contiguous_allow_conversion($input,\n                                                   DATA_TYPECODE,\n                                                   &amp;is_new_object);\n    if (!array) SWIG_fail;\n    temp = (PyArrayObject_fields*)array;\n    $1 = (DATA_TYPE**) &amp;temp-&gt;data;\n}\n%typemap(argout)\n  (DATA_TYPE** ARGOUT_ARRAY1)\n{\n    $result = SWIG_Python_AppendOutput($result,(PyObject*)array$argnum);\n}\n</code></pre>\n\n<p>@Edit: after a bit of testing the above would work but produce Segmentation Fault exception if we reuse the Python <code>input</code> array. The solution is to change the mapping type from <code>ARGOUT_ARRAY1</code> to <code>INPLACE_ARRAY1</code>.</p>\n"}], "owner": {"reputation": 14111, "user_id": 217019, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ede807eedb7fe77242664741f91627f7?s=128&d=identicon&r=PG", "display_name": "Mateusz Dymczyk", "link": "https://stackoverflow.com/users/217019/mateusz-dymczyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522341986, "creation_date": 1522198173, "last_edit_date": 1522198815, "question_id": 49524445, "link": "https://stackoverflow.com/questions/49524445/manipulate-numpy-array-inside-c-with-swig", "title": "Manipulate Numpy array inside C with SWIG", "body": "<p>Trying to pass a Numpy array to a C method and modify its content there, is it even possible? The idea is to do as little data copying (speed and memory reasons) as possible.</p>\n\n<p>Trying out something like this currently:</p>\n\n<p><strong>test.c</strong>:</p>\n\n<pre><code>void testMethod(int** values) {\n  // code\n  *values = other_pointer;\n}\n</code></pre>\n\n<p><strong>test.i</strong>:</p>\n\n<pre><code>/* File : test.i */\n%module test\n%{\n  #define SWIG_FILE_WITH_INIT\n%}\n%include \"numpy.i\"\n\n%init %{\n    import_array();\n%}\n\n%{\nextern void testMethod(int** values);\n%}\n\n%apply (int **ARGOUT_ARRAY1) {int **values};\nextern void testMethod(int** values);\n</code></pre>\n\n<p>I modified the <strong>numpy.i</strong> file adding:</p>\n\n<pre><code>%typemap(in,\n         fragment=\"NumPy_Fragments\")\n  (DATA_TYPE **ARGOUT_ARRAY1)\n  (PyArrayObject* array=NULL, int is_new_object=0, DATA_TYPE* temp=NULL)\n{\n    array = obj_to_array_contiguous_allow_conversion($input,\n                                                   DATA_TYPECODE,\n                                                   &amp;is_new_object);\n    temp = (DATA_TYPE*) array_data(array);\n    $1 = &amp;temp;\n}\n%typemap(argout)\n  (DATA_TYPE** ARGOUT_ARRAY1)\n{\n    $result = SWIG_Python_AppendOutput($result,(PyObject*)array$argnum);\n}\n</code></pre>\n\n<p>Running it:</p>\n\n<pre><code>input = numpy.array([1,2,3])\ntest.testMethod(input)\n</code></pre>\n\n<p>Works, i.e. it compiles and I can print the contents of the array in C but content of input stays the same. </p>\n"}, {"tags": ["c", "stack"], "comments": [{"owner": {"reputation": 279739, "user_id": 16076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D29fm.jpg?s=128&g=1", "display_name": "Mitch Wheat", "link": "https://stackoverflow.com/users/16076/mitch-wheat"}, "edited": false, "score": 2, "creation_date": 1522197244, "post_id": 49524327, "comment_id": 86054572, "body": "it&#39;s &quot;use your debugger time...&quot;"}, {"owner": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "reply_to_user": {"reputation": 279739, "user_id": 16076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D29fm.jpg?s=128&g=1", "display_name": "Mitch Wheat", "link": "https://stackoverflow.com/users/16076/mitch-wheat"}, "edited": false, "score": 0, "creation_date": 1522197370, "post_id": 49524327, "comment_id": 86054600, "body": "@Mitch Wheat i am still not finding the fault."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1522197507, "post_id": 49524327, "comment_id": 86054628, "body": "Then see <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\"><b>How to debug small programs</b></a> and talk to the duck... Really, it helps <code>:)</code>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1522202960, "post_id": 49524327, "comment_id": 86055777, "body": "if you are on linux try using valgrind"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1522205774, "post_id": 49524327, "comment_id": 86056490, "body": "<a href=\"http://stackoverflow.com/q/605845/995714\">Don&#39;t cast the result of <code>malloc</code> in C</a>"}, {"owner": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522365252, "post_id": 49524327, "comment_id": 86140975, "body": "Hey, what is off-topic about this? why was the question down voted? what is really wrong with you stackoverflow guys? why do are you so desperate to down vote questions unnecessarily?"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522197919, "post_id": 49524392, "comment_id": 86054725, "body": "Why should they be null?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1522198041, "post_id": 49524392, "comment_id": 86054748, "body": "What happens here: <code>temp-&gt;next = s-&gt;top;</code>? What is the value of <code>s-&gt;top;</code>?? (hint: <i>Undefined Behavior</i> invoked by attempting to access an indeterminate value)"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1522198061, "post_id": 49524392, "comment_id": 86054753, "body": "your count field needs to be zero, and the top pointer needs to be NULL to indicate the end of list. If it&#39;s not NULL it is just a random number and will cause problems when you de-reference it."}, {"owner": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1522201105, "post_id": 49524392, "comment_id": 86055363, "body": "@DavidC.Rankin s-&gt;top is the top of the stack;"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1522202849, "post_id": 49524392, "comment_id": 86055745, "body": "It&#39;s also an <i>Uninitialized Pointer</i> which invoked <i>Undefined Behavior</i> when you attempt to assign it to <code>temp-&gt;next</code> <code>:)</code>"}, {"owner": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522203956, "post_id": 49524392, "comment_id": 86056020, "body": "<a href=\"https://googleweblight.com/i?u=https://www.geeksforgeeks.org/design-a-stack-with-find-middle-operation/&amp;hl=en-IN\" rel=\"nofollow noreferrer\">googleweblight.com/i?u=https://www.geeksforgeeks.org/&hellip;</a>"}, {"owner": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522204042, "post_id": 49524392, "comment_id": 86056045, "body": "See the link. They have implemented stack similar to me. Thst code had no error. They have not done all that you told. So why is mine crashing?"}], "tags": [], "owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "is_accepted": false, "score": 0, "last_activity_date": 1522197679, "creation_date": 1522197679, "answer_id": 49524392, "question_id": 49524327, "link": "https://stackoverflow.com/questions/49524327/what-is-wrong-with-this-program-on-reversing-stack/49524392#49524392", "title": "What is wrong with this program on reversing stack?", "body": "<p>malloc doesn't initialize the struct members to zero and NULL.  You have to do that yourself or use calloc instead.  So change your malloc lines in your program to something like this:</p>\n\n<pre><code>Stack *s = calloc(1, sizeof(Stack));\nStack *rs = calloc(1, sizeof(Stack));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1522198166, "post_id": 49524402, "comment_id": 86054772, "body": "It begins earlier with the uninitialized <code>s-&gt;top</code> in <code>push()</code>."}, {"owner": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522201293, "post_id": 49524402, "comment_id": 86055404, "body": "i initialized s-&gt;top to NULL in main. still i am getting segmentation error"}], "tags": [], "owner": {"reputation": 39539, "user_id": 153430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a446e1fd338fb334fa68b3f7470cd65b?s=128&d=identicon&r=PG", "display_name": "Jim Lewis", "link": "https://stackoverflow.com/users/153430/jim-lewis"}, "is_accepted": false, "score": 0, "last_activity_date": 1522197784, "creation_date": 1522197784, "answer_id": 49524402, "question_id": 49524327, "link": "https://stackoverflow.com/questions/49524327/what-is-wrong-with-this-program-on-reversing-stack/49524402#49524402", "title": "What is wrong with this program on reversing stack?", "body": "<p>I see at least two problems.</p>\n\n<p>When you <code>malloc()</code> a new <code>Stack</code> structure, you don't initialize the <code>*top</code> and <code>count</code> fields, and their contents is likely to be garbage.</p>\n\n<p>In <code>pop()</code>:</p>\n\n<pre><code>SNode *temp = s-&gt;top;\ns-&gt;top = s-&gt;top-&gt;next;\ns-&gt;top-&gt;prev = NULL;\n</code></pre>\n\n<p>What happens if the initial value of <code>s-&gt;top-&gt;next</code> is NULL?</p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522204190, "post_id": 49524973, "comment_id": 86056079, "body": "<a href=\"https://googleweblight.com/i?u=https://www.geeksforgeeks.org/design-a-stack-with-find-middle-operation/&amp;hl=en-IN\" rel=\"nofollow noreferrer\">googleweblight.com/i?u=https://www.geeksforgeeks.org/&hellip;</a> see the link. They have done similar to mine. But that don&#39;t have error. They have not done any of what you told."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522206439, "post_id": 49524973, "comment_id": 86056646, "body": "Well, actually, it&#39;s virtually the same. The only differences are that code is interested in finding the middle of the stack - not so here Otherwise, the basic stack operations are identical. (there are only so many ways to do a stack based on a linked list). What part are you having trouble understanding? Be wary of &quot;code&quot; on the internet. That code fails to <code>free</code> its memory and see: <a href=\"http://stackoverflow.com/q/605845/995714\">Do I cast the result of malloc?</a>"}, {"owner": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522208412, "post_id": 49524973, "comment_id": 86057188, "body": "well what i realized that my code is working sometimes actually now that  i ran it several times. sometimes it works. other times it crashes. why is this hapenning?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522208695, "post_id": 49524973, "comment_id": 86057252, "body": "If it is your original code, it is because you try and use variables that have not been assigned an initial value -- and by default have an indeterminate value. Only global variables or variables with <i>static or thread storage duration</i> are initialized by the compiler -- all others are indeterminate (meaning until they are assigned a value, just have some stray garbage value) This is specified in the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.9p10\" rel=\"nofollow noreferrer\">C11 Standard - &#167; 6.7.9 Initialization (p10)</a>  In any pointer operation, you have to know what it is pointing to before using it."}, {"owner": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522363768, "post_id": 49524973, "comment_id": 86140538, "body": "i did change my code . i initialized count to zero. now my code works for 3 elements, then crashes. why  is it so?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522373526, "post_id": 49524973, "comment_id": 86142915, "body": "@Gameatro, If you posted your latest code, I&#39;ll take a look."}, {"owner": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522409110, "post_id": 49524973, "comment_id": 86154329, "body": "i just rewrote the code with singly linked list. now it is working fine. dont know why? can you take look at second code and tell what was wrong with first. it looks almost same except that first is dll and second is sll."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522435999, "post_id": 49524973, "comment_id": 86167411, "body": "Sure. I won&#39;t have a chance until later this evening, but I&#39;ll pick through it and see what I find."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522444703, "post_id": 49524973, "comment_id": 86171109, "body": "@Gameatro The difference is you now initialize <code>count</code> with <code>s-&gt;count = rs-&gt;count =0;</code> This sets both <code>s-&gt;count</code> and <code>rs-&gt;count</code> equal to zero and avoids the <i>Undefined Behavior</i> that occurred when you previously attempted <code>count++;</code> when <code>count</code> was not previously initialized. If my answer was helpful, don&#39;t forget to select the answer by checking the box at the top-left of the question. Otherwise this question will continue to float around in the unanswered-&gt;on-hold queues."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 0, "last_activity_date": 1522202789, "creation_date": 1522202789, "answer_id": 49524973, "question_id": 49524327, "link": "https://stackoverflow.com/questions/49524327/what-is-wrong-with-this-program-on-reversing-stack/49524973#49524973", "title": "What is wrong with this program on reversing stack?", "body": "<p>You have a number of problems in your implementation of your stack. The first of which is in <code>push()</code>, when you call:</p>\n\n<pre><code>temp-&gt;next = s-&gt;top;\n</code></pre>\n\n<p><code>s-&gt;top</code> is an uninitialized pointer whose value is indeterminate. That invokes <em>Undefined Behavior</em>. Since this occurs on your very first call to <code>push(s, pu)</code>, you can have zero confidence in the operation of the remainder of your code.</p>\n\n<p>Next, both your <code>push</code> and <code>pop</code> function fail to test and handle in an appropriate manner whether the node being pushed or popped is the first or last node in the stack. These must be handled differently as the handling of your <code>prev</code> and <code>next</code> pointers will depend on whether other nodes exist. (you can't assign a <code>next</code> or <code>prev</code> node if you are pushing the first node, and you can't assign a new <code>top</code> on <code>pop</code> if no more nodes exist.</p>\n\n<p>(<strong>note:</strong> you also seem to have used <code>prev</code> and <code>next</code> in a somewhat inconsistent manner. As long as you use them consistently, it doesn't matter whether you use <code>prev</code> for the existing <code>top</code> on <code>push</code> or <code>next</code>. I tend to have <code>prev</code> pointing down the stack and <code>next</code> pointing from the bottom up - but you are free to do it the other way)</p>\n\n<p>To properly handle the first and last node in your stack, you can do a simple check on <code>isempty()</code> or simply check <code>if (s-&gt;top == NULL)</code> or <code>if (s-&gt;count == 0)</code>.</p>\n\n<p>You also need to <em>initialize</em> all pointers and <code>count</code> when you allocate storage for your stack and nodes. Failure to initialize all values on allocation will likely lead to an inadvertent attempted read from an uninitialized value (invoking additional instances of <em>Undefined Behavior</em>). </p>\n\n<p>To eliminate that possibility, you can create simply helper functions, say <code>create_node</code> and <code>create_stack</code> to allocate, and validate the allocation, initialize the needed values, and then to provide a meaningful return indicating success or failure. You could do something simple like the following:</p>\n\n<pre><code>snode *create_node (int x)\n{\n    snode *tmp = malloc (sizeof *tmp);\n    if (!tmp) {\n        perror (\"create_node: memory exhausted.\");\n        return NULL;\n    }\n    tmp-&gt;data = x;\n    tmp-&gt;prev = tmp-&gt;next = NULL;\n\n    return tmp;\n}\n\nstack *create_stack (void)\n{\n    stack *tmp = malloc (sizeof *tmp);\n    if (!tmp) {\n        perror (\"create_stack: memory exhausted.\");\n        return NULL;\n    }\n    tmp-&gt;top = NULL;\n    tmp-&gt;count = 0;\n\n    return tmp;\n}\n</code></pre>\n\n<p>Now there are no possibilities of an uninitialized value. </p>\n\n<p>(Also note: while not an error, the standard coding style for C avoids the use of <code>camelCase</code> or <code>MixedCase</code> variable names in favor of all <em>lower-case</em> while reserving <em>upper-case</em> names for use with macros and constants. It is a matter of style -- so it is completely up to you, but failing to follow it can lead to the wrong first impression in some circles.)</p>\n\n<p>With the helper functions defined, allocating and initializing your forward and reverse stacks in <code>main()</code> becomes a simple matter of:</p>\n\n<pre><code>    int pu;\n    stack *s = create_stack();\n    stack *rs = create_stack();\n\n    if (!s || !rs)      /* validate the return from create_stack */\n        return 1;\n</code></pre>\n\n<p>Having created your forward and reverse stack, you can then handle the first and last node cases in <code>push()</code> and <code>pop()</code> with the addition of a simple conditional as described above:</p>\n\n<pre><code>void push (stack * s, int x)\n{\n    snode *temp = create_node (x);\n    if (!s-&gt;top)             /* is the stack empty? */\n        s-&gt;top = temp;\n    else {\n        s-&gt;top-&gt;next = temp;\n        temp-&gt;prev = s-&gt;top;\n        s-&gt;top = temp;\n    }\n    s-&gt;count++;\n}\n</code></pre>\n\n<p>and for <code>pop()</code>,</p>\n\n<pre><code>int pop (stack *s)\n{\n    int x;\n    snode *temp;\n    if (isempty (s)) {      /* checking empty as you did in original */\n        printf (\"underflow\");\n        return 0;\n    }\n    x = s-&gt;top-&gt;data;\n\n    temp = s-&gt;top;\n    if (s-&gt;top-&gt;prev)\n        s-&gt;top = s-&gt;top-&gt;prev;\n    s-&gt;top-&gt;next = NULL;\n    free (temp);\n\n    s-&gt;count--;\n    return x;\n}\n</code></pre>\n\n<p>Adding a short <code>prn_stack()</code> function to iterate over the stack without <code>pop</code>ing and freeing the nodes, you could put together a short example program to test the <code>push</code>, <code>pop</code> and <code>reverse</code> as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct node {\n    int data;\n    struct node *next, *prev;\n} snode;\n\ntypedef struct {\n    snode *top;\n    int count;\n} stack;\n\nsnode *create_node (int x)\n{\n    snode *tmp = malloc (sizeof *tmp);\n    if (!tmp) {\n        perror (\"create_node: memory exhausted.\");\n        return NULL;\n    }\n    tmp-&gt;data = x;\n    tmp-&gt;prev = tmp-&gt;next = NULL;\n\n    return tmp;\n}\n\nstack *create_stack (void)\n{\n    stack *tmp = malloc (sizeof *tmp);\n    if (!tmp) {\n        perror (\"create_stack: memory exhausted.\");\n        return NULL;\n    }\n    tmp-&gt;top = NULL;\n    tmp-&gt;count = 0;\n\n    return tmp;\n}\n\nint isempty (stack *s)\n{\n    return (s-&gt;count == 0);\n}\n\nvoid prn_stack (stack *s)\n{\n    snode *iter;\n    if (isempty(s)) {\n        puts (\"stack empty\");\n        return;\n    }\n    iter = s-&gt;top;\n    for (; iter; iter = iter-&gt;prev)\n        printf (\"  %d\\n\", iter-&gt;data);\n}\n\nvoid push (stack * s, int x)\n{\n    snode *temp = create_node (x);\n    if (!s-&gt;top)\n        s-&gt;top = temp;\n    else {\n        s-&gt;top-&gt;next = temp;\n        temp-&gt;prev = s-&gt;top;\n        s-&gt;top = temp;\n    }\n    s-&gt;count++;\n}\n\nint pop (stack *s)\n{\n    int x;\n    snode *temp;\n    if (isempty (s)) {\n        printf (\"underflow\");\n        return 0;\n    }\n    x = s-&gt;top-&gt;data;\n\n    temp = s-&gt;top;\n    if (s-&gt;top-&gt;prev)\n        s-&gt;top = s-&gt;top-&gt;prev;\n    s-&gt;top-&gt;next = NULL;\n    free (temp);\n\n    s-&gt;count--;\n    return x;\n}\n\nvoid reverse (stack * s, stack * rs)\n{\n    while (!isempty (s))\n        push (rs, pop (s));\n}\n\nint main ()\n{\n    int pu;\n    stack *s = create_stack();\n    stack *rs = create_stack();\n\n    if (!s || !rs)\n        return 1;\n\n    while (scanf (\" %d\", &amp;pu) == 1)\n        push (s, pu);\n\n    printf (\"stack:\\n\");\n    prn_stack (s);\n\n    reverse (s, rs);\n\n    printf (\"\\nreversed stack:\\n\");\n    while (!isempty (rs))\n        printf (\"  %d\\n\", pop (rs));\n\n    free (s);\n    free (rs);\n\n    return 0;\n}\n</code></pre>\n\n<p>(<strong>note:</strong> do not forget to <code>free</code> the memory you allocate for your forward and your reverse stacks after all the values have been popped, and always validate your memory use by using a memory-error checking program like <code>valgrind</code> on Linux. There are similar programs for all OS's)</p>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ echo \"10 9 8 7 6 5 4 3 2 1\" | ./bin/stack_rev\nstack:\n  1\n  2\n  3\n  4\n  5\n  6\n  7\n  8\n  9\n  10\n\nreversed stack:\n  10\n  9\n  8\n  7\n  6\n  5\n  4\n  3\n  2\n  1\n</code></pre>\n\n<p>To validate your memory use and that you have freed all memory you allocate and that there are no memory errors, just run your code through the memory checker, similar to the following using <code>valgrind</code>, e.g.</p>\n\n<p><strong>Memory Use/Error Check</strong></p>\n\n<pre><code>$ echo \"10 9 8 7 6 5 4 3 2 1\" | valgrind ./bin/stack_rev\n==18418== Memcheck, a memory error detector\n==18418== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==18418== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\n==18418== Command: ./bin/stack_rev\n==18418==\nstack:\n  1\n  2\n  3\n  4\n  5\n  6\n  7\n  8\n  9\n  10\n\nreversed stack:\n  10\n  9\n  8\n  7\n  6\n  5\n  4\n  3\n  2\n  1\n==18418==\n==18418== HEAP SUMMARY:\n==18418==     in use at exit: 0 bytes in 0 blocks\n==18418==   total heap usage: 22 allocs, 22 frees, 512 bytes allocated\n==18418==\n==18418== All heap blocks were freed -- no leaks are possible\n==18418==\n==18418== For counts of detected and suppressed errors, rerun with: -v\n==18418== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>Look things over and let me know if you have any further questions.</p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522243086, "post_id": 49526060, "comment_id": 86077699, "body": "I did that. Now my code works fine for 3 sized stack. But when the 4 the is being poped and pushed to reverse stack, code crashes"}, {"owner": {"reputation": 92, "user_id": 9505816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f418e4dd8af026e74ed5b49889d126e8?s=128&d=identicon&r=PG&f=1", "display_name": "tudatn", "link": "https://stackoverflow.com/users/9505816/tudatn"}, "reply_to_user": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "edited": false, "score": 0, "creation_date": 1522276006, "post_id": 49526060, "comment_id": 86097954, "body": "Because you don&#39;t initialize values of properties of either nodes or stacks, your program may behave unpredictably. It is a good habit to try to print out values of each steps in your functions. I can point out one of problem in your push: you initialize stack * s in main, let say if your s-&gt;top is null (randomly), so the line s-&gt;top-&gt;prev will cause segmentation fault. The similar problem can happen anywhere uninitialized value is used."}], "tags": [], "owner": {"reputation": 92, "user_id": 9505816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f418e4dd8af026e74ed5b49889d126e8?s=128&d=identicon&r=PG&f=1", "display_name": "tudatn", "link": "https://stackoverflow.com/users/9505816/tudatn"}, "is_accepted": false, "score": 0, "last_activity_date": 1522210894, "creation_date": 1522210894, "answer_id": 49526060, "question_id": 49524327, "link": "https://stackoverflow.com/questions/49524327/what-is-wrong-with-this-program-on-reversing-stack/49526060#49526060", "title": "What is wrong with this program on reversing stack?", "body": "<p>Your code crashes randomly because s->count is not 0 when you first declare it in main. If you're lucky, s->count is 0, then your reverse is fine because isEmpty() will work correctly. Otherwise, you will get segmentation fault.</p>\n"}], "owner": {"reputation": 83, "user_id": 9086365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd0e2d69d589efcc7f56d6e1d9fae279?s=128&d=identicon&r=PG&f=1", "display_name": "Gameatro", "link": "https://stackoverflow.com/users/9086365/gameatro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "closed_date": 1522239430, "accepted_answer_id": 49524973, "answer_count": 4, "score": -1, "last_activity_date": 1522365715, "creation_date": 1522197033, "last_edit_date": 1522365715, "question_id": 49524327, "link": "https://stackoverflow.com/questions/49524327/what-is-wrong-with-this-program-on-reversing-stack", "closed_reason": "Not suitable for this site", "title": "What is wrong with this program on reversing stack?", "body": "<p>I made this program in c to reverse stack. but it is crashing. please help me figure out what is wrong. the program is working fine till taking inputs. but when reverse is called it crashes. i am not able to find the fault. all the memory is being allocated properly. so i dont think there is segmentation fault. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\ntypedef struct Node{\n    int data;\n    struct Node *next, *prev;\n}SNode;\n\ntypedef struct{\n     SNode *top;\n     int count;\n }Stack;\n\n int isEmpty(Stack *s){\n     return (s-&gt;count==0);\n  }\n void push(Stack *s,int x){\n        SNode *temp = (SNode *)malloc(sizeof(SNode));\n        temp-&gt;next = s-&gt;top;\n        temp-&gt;prev = NULL;\n        s-&gt;top-&gt;prev = temp;\n        temp-&gt;data = x;\n        s-&gt;top = temp;\n        s-&gt;count++;\n   }\n\n   int pop(Stack *s){\n     if(isEmpty(s)){\n     printf(\"Underflow\");\n      return;\n    }\n   SNode *temp = s-&gt;top;\n   s-&gt;top = s-&gt;top-&gt;next;\n   s-&gt;top-&gt;prev = NULL;\n   int a = temp-&gt;data;\n   free(temp);\n   s-&gt;count--;\n   return a;\n   }\n\n   void reverse(Stack *s,Stack *rs){\n      while(!isEmpty(s)){\n      int p = pop(s);\n      push(rs,p);\n    }\n   }\n\n   int main(){\n       Stack *s = (Stack *)malloc(sizeof(Stack));\n       Stack *rs = (Stack *)malloc(sizeof(Stack));\n       char p='y';\n       while(p=='y'){\n           int pu;\n           printf(\"Enter data to be pushed: \");\n           scanf(\" %d\",&amp;pu);\n           push(s,pu);\n           printf(\"Do you want to push another number? y/n:\");\n           scanf(\" %c\",&amp;p);\n         }\n        reverse(s,rs);\n        printf(\"Top of reversed stack: %d\",rs-&gt;top-&gt;data);\n        return 0;\n        }\n</code></pre>\n\n<p>I dont know what i changed. i rewrote the code, this time using singly linked list, now it works really fine. dont know how !!??</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\ntypedef struct node{\n int data;\n struct node *next;\n}SNode;\n\ntypedef struct{\n int count;\n SNode *top;\n}stack;\n\nint isEmpty(stack *s){\n return (s-&gt;count==0);\n}\n\nvoid push(stack *s,int x){\n SNode *temp = (SNode *)malloc(sizeof(SNode));\n temp-&gt;data = x;\n temp-&gt;next = s-&gt;top;\n s-&gt;top=temp;\n s-&gt;count++;\n}\n\nint pop(stack *s){\n    if(isEmpty(s)){\n        printf(\"Underflow\");\n        return -1;\n    }\n SNode *temp = s-&gt;top;\n s-&gt;top = temp-&gt;next;\n int a = temp-&gt;data;\n free(temp);\n s-&gt;count--;\n return a;\n}\n\nvoid reverseStack(stack *s, stack *rs){\n while(!isEmpty(s)){\n    push(rs,pop(s));\n }\n}\n\nint main(){\n stack *s = (stack *)malloc(sizeof(stack));\n stack *rs = (stack *)malloc(sizeof(stack));\n s-&gt;count = rs-&gt;count =0;\n char p ='y';\n while(p=='y'){\n    int x;\n    printf(\"Enter data to push: \");\n    scanf(\"%d\",&amp;x);\n    push(s,x);\n    printf(\"Do you want to push more data? : y/n\");\n    scanf(\" %c\",&amp;p);\n }\n reverseStack(s,rs);\n printf(\"Top of reversed stack: %d\",rs-&gt;top-&gt;data);\n return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1522198685, "post_id": 49524320, "comment_id": 86054879, "body": "SO is not a tutorial site, your question is too broad, please read the manual of make before asking question. P.S: wildcard is a very bad practice."}, {"owner": {"reputation": 170, "user_id": 3024178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4d12980468135f1fd58982d326bdb2f?s=128&d=identicon&r=PG&f=1", "display_name": "MsTais", "link": "https://stackoverflow.com/users/3024178/mstais"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1522203171, "post_id": 49524320, "comment_id": 86055827, "body": "@Stargateur I can shrink the question to &quot;how to make it work without oversimplifying the template?&quot;, if it makes everyone feel better. I am asking this question namely because of the tutorials that answer only narrow questions. I don&#39;t expect short answers. If you can point to good references or answer it in part (that is why it is structured accordingly), I will be more than happy!"}, {"owner": {"reputation": 170, "user_id": 3024178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4d12980468135f1fd58982d326bdb2f?s=128&d=identicon&r=PG&f=1", "display_name": "MsTais", "link": "https://stackoverflow.com/users/3024178/mstais"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1522203301, "post_id": 49524320, "comment_id": 86055875, "body": "@Stargateur Also, for every question there is a manual, unless it is a bug... The same as for every course there is a book... haha... Why wildcard is a bad practice? Do you have a reference, or can explain it?"}, {"owner": {"reputation": 1613, "user_id": 6413048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05e41c326a8c8c6240e3a8b71e806d58?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6413048/tim"}, "edited": false, "score": 0, "creation_date": 1522219116, "post_id": 49524320, "comment_id": 86060858, "body": "You may want to look at <a href=\"https://stackoverflow.com/questions/39015453/building-c-program-out-of-source-tree-with-gnu-make/39033569#39033569\">one of my answers</a> to have a complete, detailed and commented example of a Makefile. It will however not explain how the other parts of the toolchain (compiler, linker) work."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1522222332, "post_id": 49524320, "comment_id": 86062731, "body": "@MsTais I said that because looking by your understanding of makefile you didn&#39;t read the manuel. A bad tutorial isn&#39;t enough, you should read the manuel and them try the tutorial. It&#39;s like &quot;how to you speak french ?&quot; &quot;did you read the manuel ?&quot; &quot;no, why, I follow a tutorial&quot;. Answer this question will resume to rewrite the <a href=\"https://www.gnu.org/software/make/manual/make.html\" rel=\"nofollow noreferrer\">manuel of make</a>."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1522244244, "post_id": 49524320, "comment_id": 86078573, "body": "1) That is a C question, not a Make question. 2) <code>make frprmn.o</code> 3) It doesn&#39;t; the compiler searches for <code>main</code>. 4) <code>program_OBJS</code> is empty, perhaps you meant <code>program_C_OBJS</code>. (&quot;...how to tell it to use gcc without forcing it explicitly?&quot; <i>What?</i>) 6) Those are tools you do not yet need; consult the manual if you want to learn them."}, {"owner": {"reputation": 170, "user_id": 3024178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4d12980468135f1fd58982d326bdb2f?s=128&d=identicon&r=PG&f=1", "display_name": "MsTais", "link": "https://stackoverflow.com/users/3024178/mstais"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1522250467, "post_id": 49524320, "comment_id": 86083738, "body": "@Beta 4) In the manual that I have referenced, the author says that it is a &quot;bad practice&quot; to forcefully say which compiler to use. It is better to let makefile find the default compiler using built-in functions. But when I do that, for some reason it uses c++, it seems like. I do not want to say gcc in makefile, but I want it to think that gcc is the default compiler. Thanks for your response!"}], "owner": {"reputation": 170, "user_id": 3024178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4d12980468135f1fd58982d326bdb2f?s=128&d=identicon&r=PG&f=1", "display_name": "MsTais", "link": "https://stackoverflow.com/users/3024178/mstais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1522203667, "creation_date": 1522196970, "last_edit_date": 1522203667, "question_id": 49524320, "link": "https://stackoverflow.com/questions/49524320/portable-c-makefile-for-extended-library", "title": "Portable C Makefile for extended library", "body": "<p>I am trying to understand how makefiles work for a long time (however, quite inhomogeneously). I think, even though there is a hole bunch of discussion about makefiles, this is the first template that kind of lays out the structure and seems general enough, so I hope, that moderators will not close the question.</p>\n\n<p>I have several parts of code in different c-files, but all in the same folder:</p>\n\n<p>1)frprmn.c </p>\n\n<p>2)mnbrak.c</p>\n\n<p>3)nrutil.c </p>\n\n<p>4)linmin.c </p>\n\n<p>5)f1dim.c</p>\n\n<p>6)dbrent.c</p>\n\n<p>These codes are from Numerical Recipes and can be found elsewhere.</p>\n\n<p>The main-function is in frprmn.c. The makefile is </p>\n\n<pre><code>program_NAME := MINIMIZE\nprogram_C_SRCS := $(wildcard frprmn.c mnbrak.c nrutil.c linmin.c f1dim.c dbrent.c)\n#program_CXX_SRCS := $(wildcard *.cpp)\nprogram_C_OBJS := ${program_C_SRCS:.c=.o}\n#program_CXX_OBJS := ${program_CXX_SRCS:.cpp=.o}\n#program_OBJS := $(program_C_OBJS) $(program_CXX_OBJS)\n#program_INCLUDE_DIRS :=\n#program_LIBRARY_DIRS :=\n#program_LIBRARIES :=\n\n#CPPFLAGS += $(foreach includedir,$(program_INCLUDE_DIRS),-I$(includedir))\n#LDFLAGS += $(foreach librarydir,$(program_LIBRARY_DIRS),-L$(librarydir))\n#LDFLAGS += $(foreach library,$(program_LIBRARIES),-l$(library))\n\n.PHONY: all clean distclean\n\nall: $(program_NAME)\n\n$(program_NAME): $(program_OBJS)\n    $(LINK.cc) $(program_OBJS) -o $(program_NAME)\n\nclean:\n@- $(RM) $(program_NAME)\n@- $(RM) $(program_OBJS)\n\ndistclean: clean\n</code></pre>\n\n<p>The \"template\" for the makefile is from <a href=\"https://sites.google.com/site/michaelsafyan/software-engineering/how-to-write-a-makefile\" rel=\"nofollow noreferrer\">this tutorial</a>. I was trying to follow the explanations when modifying it. By no means I have expected it to work as I don't get the following things:</p>\n\n<ol>\n<li><p>Why don't we need header-files to link the libraries. Or do we? Maybe the author of the tutorial relies on it as common knowledge...</p></li>\n<li><p>Why would I need an object file for each c-file? I need only one: frprmn.c. How do I do that?</p></li>\n<li><p>How does makefile know which file contains main-function?</p></li>\n<li><p>When I run it, I get the following error</p>\n\n<p>c++      -o MINIMIZE\nclang: error: no input files\nmake: *** [MINIMIZE] Error 1</p></li>\n</ol>\n\n<p>I have no idea how it comes that I got c++ there. According to the tutorial, I have commented out all the c++-related lines. My guess is that it used C++ compiler as the default one, in which case, how to tell it to use gcc without forcing it explicitly?</p>\n\n<ol start=\"6\">\n<li>All the placeholders, well, even thought I don't need them in this case, I still would like to be able to used them eventually. What do I do with </li>\n</ol>\n\n<blockquote>\n  <p>foreach includedir</p>\n</blockquote>\n\n<p>Do I just list them there?</p>\n\n<p>Can somebody give an example?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "function", "casting"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1522197060, "post_id": 49524235, "comment_id": 86054539, "body": "Type &quot;Bar&quot; is &quot;function that takes void*, int and returns int. Function foo takes a structure pointer and an int, returning an int. Those are close enough that casting foo into a Bar and calling it will probably do what you expect on most compilers, but no guarantees--casting function pointers is always implementation-dependent."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 2, "creation_date": 1522197374, "post_id": 49524235, "comment_id": 86054602, "body": "@LeeDanielCrocker: Converting a function pointer to another function pointer type is well defined. Calling the converted function, unless the expression has a type compatible with the function <i>definition</i> has undefined behavior."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1522197742, "post_id": 49524235, "comment_id": 86054682, "body": "@KeithThompson; Are <code>int (*)(Struct *s, int b)</code> and <code>int (*)(void *, int a)</code> compatible?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1522197900, "post_id": 49524235, "comment_id": 86054721, "body": "@haccks: Only if <code>Struct</code> is a typedef for <code>void</code>. (I really hope it isn&#39;t.)"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9560823, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5rFp5UUcyUs/AAAAAAAAAAI/AAAAAAAAABE/0edQ4ZTVvV0/photo.jpg?sz=128", "display_name": "fura95", "link": "https://stackoverflow.com/users/9560823/fura95"}, "edited": false, "score": 0, "creation_date": 1522200901, "post_id": 49524403, "comment_id": 86055329, "body": "Yes, it&#39;s an example, actually &quot;call&quot; return another struct. Sorry for confusing names, I hope I will learn to name functions clearly. Thank you for answer."}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": true, "score": 3, "last_activity_date": 1522197794, "creation_date": 1522197794, "answer_id": 49524403, "question_id": 49524235, "link": "https://stackoverflow.com/questions/49524235/casting-functions/49524403#49524403", "title": "Casting functions", "body": "<pre><code>typedef int (*Bar)(void *, int a);\n</code></pre>\n\n<p>This defines <code>Bar</code> an alias for a pointer-to-function type, specifically for a function that takes two arguments of type <code>void*</code> and <code>int</code> and returns a result of type <code>int</code>.</p>\n\n<pre><code>int foo (Struct *s, int b);\n</code></pre>\n\n<p>This declares (but does not define) a function named <code>foo</code> that takes two arguments as specified.</p>\n\n<p>I presume <code>Struct</code> is a typedef, but it's a poor name, easily confused with the <code>struct</code> keyword.</p>\n\n<pre><code>void *call(Bar c);\n</code></pre>\n\n<p>This declares a function <code>call</code> that takes an argument of type <code>Bar</code> and returns a <code>void*</code> result.</p>\n\n<pre><code>call( (Bar) foo);\n</code></pre>\n\n<p><code>foo</code> is the name of the function declared earlier.  In this context, it's treated as an expression of pointer-to-function type.  This pointer value is converted to type <code>Bar</code>. Since `Bar is a pointer-to-function type, the conversion is well defined.</p>\n\n<p>That converted pointer is then passed to a function named <code>call</code>. (<code>call</code> returns a <code>void*</code> result, but it's quietly ignored here; is that what you intended?)</p>\n\n<p>We don't know what the <code>call</code> function does with its argument, so we can't tell what the behavior of this statement might be.</p>\n\n<p>A conversion from one function pointer type to another, using a cast, is well defined, and converting <em>back</em> to the original type will yield the original value. Calling a function using a function pointer with the wrong type has undefined behavior. (You might be able to get away with it in some cases, but don't.)</p>\n\n<p>Your <code>call</code> function could try to make a call via its parameter, but that call would have undefined behavior unless that parameter is converted back to the correct type.</p>\n\n<p>There isn't enough information in your question to know what's going on, and the confusing names you've chosen don't help.</p>\n"}], "owner": {"reputation": 23, "user_id": 9560823, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5rFp5UUcyUs/AAAAAAAAAAI/AAAAAAAAABE/0edQ4ZTVvV0/photo.jpg?sz=128", "display_name": "fura95", "link": "https://stackoverflow.com/users/9560823/fura95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 49524403, "answer_count": 1, "score": 2, "last_activity_date": 1522198181, "creation_date": 1522196207, "last_edit_date": 1522198181, "question_id": 49524235, "link": "https://stackoverflow.com/questions/49524235/casting-functions", "title": "Casting functions", "body": "<p>I have the following functions:</p>\n\n<pre><code>typedef int (*Bar)(void *, int a);\nint foo (Struct *s, int b);\nvoid *call(Bar c);\n</code></pre>\n\n<p>What does it mean when I call the function:</p>\n\n<pre><code>call( (Bar) foo);\n</code></pre>\n"}, {"tags": ["c", "gcc", "biginteger", "bignum"], "comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1522194505, "post_id": 49524033, "comment_id": 86053983, "body": "How big do you need to go? The problem is likely that you&#39;re overflowing 32-bit ints for m, n and a. Would 64-bit values do (you have a long long already here!), or do you need arbitrarily large numbers?"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1522194548, "post_id": 49524033, "comment_id": 86053993, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3340511/what-is-the-simplest-way-of-implementing-bigint-in-c\">What is the simplest way of implementing bigint in C?</a>"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1522195058, "post_id": 49524033, "comment_id": 86054097, "body": "you might need to use <code>scanf(&quot;%lld%lld%lld&quot;,&amp;m,&amp;n,&amp;a);</code> when you change the definition of your variables to <code>long long int m, n, a;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 9427794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026747607244c91a3a33d093cad42dff?s=128&d=identicon&r=PG&f=1", "display_name": "oldMCdonald", "link": "https://stackoverflow.com/users/9427794/oldmcdonald"}, "edited": false, "score": 0, "creation_date": 1522195472, "post_id": 49524090, "comment_id": 86054178, "body": "the problem is if I define my count variable as long long int , the output for the small numbers will be wrong."}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1522233487, "post_id": 49524090, "comment_id": 86070667, "body": "It shouldn&#39;t be wrong? There&#39;s no reason a 64-bit variable can&#39;t work with smaller numbers."}], "tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": false, "score": 1, "last_activity_date": 1522240508, "last_edit_date": 1522240508, "creation_date": 1522194910, "answer_id": 49524090, "question_id": 49524033, "link": "https://stackoverflow.com/questions/49524033/handle-snippet-code-wrtten-in-c-for-large-numbers/49524090#49524090", "title": "handle snippet code wrtten in C for large numbers", "body": "<p>Assuming your compiler defines <code>int</code> as having 32-bit storage, then you can handle positive numbers up to <code>2^31-1</code>.</p>\n\n<p>If you need to go further, e.g. up to <code>2^64-1</code>, consider using a (possibly unsigned) type that can handle bigger integers -- see for instance the <a href=\"http://en.cppreference.com/w/c/types/integer\" rel=\"nofollow noreferrer\">Fixed width integer types</a> if you have C11.</p>\n\n<p>If you need unbounded integers, then the problem is much more complex. The easiest you can do in this case is use a library, e.g. like the <a href=\"https://gmplib.org/\" rel=\"nofollow noreferrer\">GNU multiple precision arithmetic library</a>:</p>\n\n<blockquote>\n  <p>GMP is a free library for arbitrary precision arithmetic, operating on signed integers, rational numbers, and floating-point numbers. There is no practical limit to the precision except the ones implied by the available memory in the machine GMP runs on. GMP has a rich set of functions, and the functions have a regular interface.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1101, "user_id": 7021836, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/299fc62810116e741333419b8e6cfd24?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Quilliam", "link": "https://stackoverflow.com/users/7021836/alex-quilliam"}, "is_accepted": false, "score": 2, "last_activity_date": 1522195806, "creation_date": 1522195806, "answer_id": 49524190, "question_id": 49524033, "link": "https://stackoverflow.com/questions/49524033/handle-snippet-code-wrtten-in-c-for-large-numbers/49524190#49524190", "title": "handle snippet code wrtten in C for large numbers", "body": "<p>If your numbers are bigger than 64 bits, you will have to use a bignum library like <a href=\"https://gmplib.org/\" rel=\"nofollow noreferrer\">GMP</a>. On Debian-based Linux systems, you can install with <code>sudo apt-get install libgmp3-dev</code>. Then, just include <code>gmp.h</code> and read up on <a href=\"https://gmplib.org/manual/Integer-Functions.html\" rel=\"nofollow noreferrer\">the docs</a>.</p>\n\n<p>The first portion of your code would look like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;gmp.h&gt;\n\nint main(void) {\n    mpz_t m, n, a;\n    mpz_init(m); //allocate memory for the mpz_t\n    mpz_init(n);\n    mpz_init(a);\n\n    mpz_inp_str(m, stdin, 10); //variable, input stream, base\n    mpz_inp_str(n, stdin, 10);\n    mpz_inp_str(a, stdin, 10);\n\n    mpz_t count;\n    mpz_init_set_ui(count, 1); //count = 1\n\n    mpz_t result;\n    mpz_init(result);\n\n    mpz_mod(result, m, a); //result = m % a\n    if(mpz_cmp(result, 0) != 0) { //result == 0\n        mpz_tdiv_q(result, m, a); //integer truncated division: result = m / a\n        mpz_add_ui(result, result, 1); // result += 1;\n        mpz_mul(count, count, result); // count *= result;\n    }\n\n    //the rest of the code \n\n    mpz_clear(m); //clean up\n    mpz_clear(n);\n    mpz_clear(a);\n    mpz_clear(count);\n    mpz_clear(result);\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1522254507, "post_id": 49533972, "comment_id": 86086615, "body": "32767 and 65535 are 16-bit not 32. His question says 10^9 which does fit into 2*31, it&#39;s just his example 10^10 doesn&#39;t."}], "tags": [], "owner": {"reputation": 3568, "user_id": 5811973, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/B4tie.jpg?s=128&g=1", "display_name": "Ishpreet", "link": "https://stackoverflow.com/users/5811973/ishpreet"}, "is_accepted": true, "score": -1, "last_activity_date": 1522239150, "last_edit_date": 1522239150, "creation_date": 1522238375, "answer_id": 49533972, "question_id": 49524033, "link": "https://stackoverflow.com/questions/49524033/handle-snippet-code-wrtten-in-c-for-large-numbers/49533972#49533972", "title": "handle snippet code wrtten in C for large numbers", "body": "<p>Use <code>long long</code> data type instead of <code>int</code>. Because a signed 32-bit integer can handle upto <code>2^31 - 1</code>(i.e <strong>32,767</strong>) and <code>unsigned int</code> can reach upto <strong>65,535</strong>. </p>\n\n<p>Also even if the integers are within <code>int</code> range you should use <code>long long</code> in contests on <strong>codeforces</strong> in case of multiplication. See example for better explanation.</p>\n\n<pre><code>Example:\n\nm: 100000\nn: 100000\na: 1\ncount = 1\n\nFrom your code,\ncount *= m/a; // count *= 100000/1 = 100000\nNow,\ncount *= n/a; // count *= 100000/1 = 10000000000(10^10);\n10^10 is beyond 32 bit int range so you will get a wrong answer -_-\nSo use long long to avoid such overflow errors\n</code></pre>\n\n<p>Read more about <a href=\"https://msdn.microsoft.com/en-us/library/s3f49ktz.aspx\" rel=\"nofollow noreferrer\">Data Type Ranges</a></p>\n\n<p>If you wish, you can reduce your code length, like:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    long long m, n, a, count1 = 1, count2 = 1;\n    scanf(\"%lld%lld%lld\",&amp;m,&amp;n,&amp;a);\n    count1 *= (m/a);\n    count2 *= (n/a);\n    if (m%a != 0) count1++;\n    if (n%a != 0) count2++;\n    printf(\"%lld\", count1*count2);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 9427794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/026747607244c91a3a33d093cad42dff?s=128&d=identicon&r=PG&f=1", "display_name": "oldMCdonald", "link": "https://stackoverflow.com/users/9427794/oldmcdonald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 1, "accepted_answer_id": 49533972, "answer_count": 3, "score": 1, "last_activity_date": 1522240508, "creation_date": 1522194339, "last_edit_date": 1522221532, "question_id": 49524033, "link": "https://stackoverflow.com/questions/49524033/handle-snippet-code-wrtten-in-c-for-large-numbers", "title": "handle snippet code wrtten in C for large numbers", "body": "<p>I wrote this snippet code as a solution for a problem but in a test case that tries big numbers as input(for example 10000000000 10000000000 1), a weird output comes out.it's work for integer range number but how can I handle code for big numbers? </p>\n\n<p>here's the  condition: (1\u2009\u2264\u2009\u2009n,\u2009m,\u2009a\u2009\u2264\u200910^9).</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    int m, n, a;\n    int count = 1;\n\n    scanf(\"%d%d%d\",&amp;m,&amp;n,&amp;a);\n\n    if (m%a != 0) {\n        count *= ((m/a)+1);\n    }\n    else {\n        count *= (m/a);\n    }\n\n    if (n%a != 0) {\n        count *= ((n/a)+1);\n    } else {\n        count *= (n/a);\n    }\n\n    printf(\"%d\",count);\n\n    return 0;\n}\n</code></pre>\n\n<p>you can see the problem <a href=\"http://codeforces.com/problemset/problem/1/A\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>ps 1: my compiler is GNU GCC 5.1.0.</p>\n\n<p>ps 2: I submit it to website compiler so can't install any foreign library.</p>\n"}, {"tags": ["c", "visual-studio"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 5, "creation_date": 1522191553, "post_id": 49523664, "comment_id": 86053246, "body": "Maybe your windows box uses ASLR. Does it matter? It shouldn&#39;t"}, {"owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "edited": false, "score": 2, "creation_date": 1522191574, "post_id": 49523664, "comment_id": 86053257, "body": "that&#39;s how that happens in real life. &amp;i is not guaranteed to be at the same memory location every time you run the program. The fact that it happened with code:blocks is probably a coincidence."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1522191622, "post_id": 49523664, "comment_id": 86053273, "body": "<a href=\"https://en.wikipedia.org/wiki/Address_space_layout_randomization#Microsoft_Windows\" rel=\"nofollow noreferrer\">ASLR (Address Space Layout Randomization) on Windows</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": false, "score": 2, "last_activity_date": 1522194153, "creation_date": 1522194153, "answer_id": 49524000, "question_id": 49523664, "link": "https://stackoverflow.com/questions/49523664/printing-memory-addresses-in-c-in-visual-studio/49524000#49524000", "title": "Printing memory addresses in c in visual studio", "body": "<p>Possibly Code::Blocks is not configured to emit position-independent code, while <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/dynamicbase-use-address-space-layout-randomization\" rel=\"nofollow noreferrer\">MSVC, by default, enables <code>/DYNAMICBASE</code></a>.</p>\n"}], "owner": {"reputation": 49, "user_id": 9302740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca809f77ad435024330172220f907472?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/9302740/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522194153, "creation_date": 1522191286, "question_id": 49523664, "link": "https://stackoverflow.com/questions/49523664/printing-memory-addresses-in-c-in-visual-studio", "title": "Printing memory addresses in c in visual studio", "body": "<p>I recently switched from code:blocks to Microsoft visual studio, and I noticed that unlike code:blocks, where every time I declare a pointer and print the memory address, it would save it? It was the same every time no matter how many times I \"Build &amp; Ran\". But in visual studio when I print, it gives me a new memory address for the same variable every time I compile and run. for ex. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main() {\n    int i;\n    int *x = &amp;i;\n    printf(\"%p\", x);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 3, "creation_date": 1522190073, "post_id": 49523444, "comment_id": 86052813, "body": "<code>size_chunk_memory</code> is part of <code>struct node</code>. It&#39;s complaining about the standalone <code>size_chunk_memory</code>. You need a <code>struct node</code> object to access it. How do we know if the standalone <code>size_chunk_memory</code> belongs to <code>prev_merge</code>, <code>curr_merge</code>, or some other object? The compiler doesn&#39;t know either."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 1, "creation_date": 1522190122, "post_id": 49523444, "comment_id": 86052829, "body": "<code>prev_merge-&gt;size_chunk_memory = size_chunk_memory + ...</code> here you are using <code>size_chunk_memory</code> which is not declared anywhere"}], "answers": [{"tags": [], "owner": {"reputation": 4598, "user_id": 9264702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mHczh.jpg?s=128&g=1", "display_name": "Stephen Docy", "link": "https://stackoverflow.com/users/9264702/stephen-docy"}, "is_accepted": true, "score": 2, "last_activity_date": 1522190054, "creation_date": 1522190054, "answer_id": 49523468, "question_id": 49523444, "link": "https://stackoverflow.com/questions/49523444/getting-variable-name-undeclared-error-in-only-one-function/49523468#49523468", "title": "Getting &quot;variable_name&quot; undeclared error in only one function", "body": "<p>prev_merge->size_chunk_memory = <code>size_chunk_memory</code> + curr_merge->size_chunk_memory + sizeof(struct node);</p>\n\n<p>curr_merge->size_chunk_memory = <code>size_chunk_memory</code> + next_merge->size_chunk_memory + sizeof(struct node);</p>\n\n<p>You access it here outside of a struct reference.  You need to access it the same way the other uses of <code>size_chunk_memory</code> do, via a <code>struct node</code> pointer and <code>-&gt;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2568, "user_id": 3232427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JC6m3.jpg?s=128&g=1", "display_name": "brickpop", "link": "https://stackoverflow.com/users/3232427/brickpop"}, "is_accepted": false, "score": 0, "last_activity_date": 1522190686, "creation_date": 1522190686, "answer_id": 49523564, "question_id": 49523444, "link": "https://stackoverflow.com/questions/49523444/getting-variable-name-undeclared-error-in-only-one-function/49523564#49523564", "title": "Getting &quot;variable_name&quot; undeclared error in only one function", "body": "<p>The issue seems to be on the expression that you are trying to assign: <code>size_chunk_memory + ...</code> Not with the structure itself. The struct is just a template to construct and manage sets of data. </p>\n\n<p><code>prev_merge-&gt;size_chunk_memory</code> is fine.</p>\n\n<p>It is <code>size_chunk_memory</code> which does not appear to be defined in the scope of <code>merge(void*)</code>, so the compiler doesn't know what to do with it.</p>\n"}], "owner": {"reputation": 17, "user_id": 9310997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31306dd03018e7e9b259bbcf3cbeb8e1?s=128&d=identicon&r=PG&f=1", "display_name": "J Han", "link": "https://stackoverflow.com/users/9310997/j-han"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 49523468, "answer_count": 2, "score": -4, "last_activity_date": 1522200363, "creation_date": 1522189964, "last_edit_date": 1522200363, "question_id": 49523444, "link": "https://stackoverflow.com/questions/49523444/getting-variable-name-undeclared-error-in-only-one-function", "title": "Getting &quot;variable_name&quot; undeclared error in only one function", "body": "<p>I'm having a little bit of trouble trying to diagnose the errors in my code. For some reason, the compiler thinks i have an undeclared variable where its is declared. I am unable to find a solution.</p>\n\n<pre><code>struct node {\n    int size_chunk_memory;\n    //1 = free, 0= used\n    int is_free; \n    struct node *next;\n    struct node *prev;\n};\n\nvoid merge(void* address) {\n    if (address == 0) {\n        return;\n    }\n    struct node* curr_merge = (struct node*)address;\n    struct node* prev_merge = curr_merge-&gt;prev;\n    struct node* next_merge = curr_merge-&gt;next;\n\n    if (curr_merge-&gt;is_free == 1 &amp;&amp;  prev_merge-&gt;is_free == 1) {\n        prev_merge-&gt;size_chunk_memory = size_chunk_memory + curr_merge-&gt;size_chunk_memory + sizeof(struct node);\n        prev_merge-&gt;next = curr_merge-&gt;next;\n        curr_merge = prev_merge;\n    }\n    if (curr_merge-&gt;is_free == 1 &amp;&amp; next_merge-&gt;is_free == 1) {\n        curr_merge-&gt;size_chunk_memory = size_chunk_memory + next_merge-&gt;size_chunk_memory + sizeof(struct node);\n        curr_merge-&gt;next = next_merge-&gt;next;\n    }\n}\n</code></pre>\n\n<p>Here is the error I am getting:</p>\n\n<pre><code> \u2018size_chunk_memory\u2019 undeclared (first use in this function)\n(Each undeclared identifier is reported only once\nfor each function it appears in.)\n</code></pre>\n\n<p>I have omitted a lot of my program for space reasons. Please let me know if you need more info.</p>\n\n<p>Thanks a lot.</p>\n"}, {"tags": ["c", "gcc", "stdio"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1522188850, "post_id": 49523242, "comment_id": 86052400, "body": "Why is <code>&lt;DESTINATION&gt;\\n&quot;);</code> on a separate line? You need to post code that compiles, and demonstrates the problem. See <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> in the <a href=\"https://stackoverflow.com/help\">help center</a>."}, {"owner": {"reputation": 140, "user_id": 8112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3183be56ff8f041f38e56e92ceb16f?s=128&d=identicon&r=PG&f=1", "display_name": "everybody0523", "link": "https://stackoverflow.com/users/8112627/everybody0523"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1522188991, "post_id": 49523242, "comment_id": 86052441, "body": "That was a typo from when I copied it over from my IDE to StackOverflow - its not that way in my code. I&#39;ll edit that."}, {"owner": {"reputation": 7674, "user_id": 74819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d7a3f99d0318b55b5be641d2d160ffa5?s=128&d=identicon&r=PG", "display_name": "Aric TenEyck", "link": "https://stackoverflow.com/users/74819/aric-teneyck"}, "edited": false, "score": 1, "creation_date": 1522188999, "post_id": 49523242, "comment_id": 86052445, "body": "In some older iterations of C, you had to have variable declarations before the code.  Are you compiling under those rules?"}, {"owner": {"reputation": 387, "user_id": 2961460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3Girm.jpg?s=128&g=1", "display_name": "ulmer-a", "link": "https://stackoverflow.com/users/2961460/ulmer-a"}, "edited": false, "score": 0, "creation_date": 1522189091, "post_id": 49523242, "comment_id": 86052483, "body": "Where is &#39;target&#39; used?"}, {"owner": {"reputation": 140, "user_id": 8112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3183be56ff8f041f38e56e92ceb16f?s=128&d=identicon&r=PG&f=1", "display_name": "everybody0523", "link": "https://stackoverflow.com/users/8112627/everybody0523"}, "edited": false, "score": 0, "creation_date": 1522189099, "post_id": 49523242, "comment_id": 86052486, "body": "No, I&#39;m compiling with C99. I&#39;ve tried doing the variable declarations at the top as well, to no effect."}, {"owner": {"reputation": 140, "user_id": 8112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3183be56ff8f041f38e56e92ceb16f?s=128&d=identicon&r=PG&f=1", "display_name": "everybody0523", "link": "https://stackoverflow.com/users/8112627/everybody0523"}, "edited": false, "score": 0, "creation_date": 1522189153, "post_id": 49523242, "comment_id": 86052507, "body": "I haven&#39;t used target in the code at all yet (I commented the rest of the program)."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1522189259, "post_id": 49523242, "comment_id": 86052542, "body": "This scenario typically means that there&#39;s a syntax error, e.g. a missing semicolon, in the <code>bunch of other stuff</code>. One approach is to comment out half of the other stuff, and see if the error goes away. Continue with the binary search until you find the line with the error."}, {"owner": {"reputation": 140, "user_id": 8112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3183be56ff8f041f38e56e92ceb16f?s=128&d=identicon&r=PG&f=1", "display_name": "everybody0523", "link": "https://stackoverflow.com/users/8112627/everybody0523"}, "edited": false, "score": 0, "creation_date": 1522189660, "post_id": 49523242, "comment_id": 86052673, "body": "I just tried deleting everything in helper.h (and deleting the contents of helper.c) except for the <code>#include </code> statements. It still fails to compile, with the same error.  I should also add that I have a second program that also uses helper.h, and the original program compiles and executes just fine, so I doubt its that."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1522189741, "post_id": 49523242, "comment_id": 86052698, "body": "You&#39;re not using C99--you have to add &quot;-std=c99&quot; to the gcc command to do that. Then it will accept the intermingled code and declarations."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1522189951, "post_id": 49523242, "comment_id": 86052777, "body": "I don&#39;t think it&#39;s a C90 vs. C99 issue. That would cause a different error message, something like &quot;warning: ISO C90 forbids mixed declarations and code&quot;. (Recent versions of gcc default to <code>-std=gnu11</code>.) We need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. I&#39;ll note that there is no line 19 in the code you&#39;ve shown us, so you&#39;re not showing us your actual code. We can&#39;t debug code we can&#39;t see."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1522190061, "post_id": 49523242, "comment_id": 86052807, "body": "What version of gcc are you using? Use <code>gcc -std=c99</code> to be sure you&#39;re using C99 mode (or <code>gcc -std=gnu99</code> if you&#39;re using gcc-specific extensions, or <code>c11</code> or <code>gnu11</code> if you want the latest C standard)."}], "answers": [{"comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1522190207, "post_id": 49523470, "comment_id": 86052850, "body": "Yes, that would definitely cause issues."}], "tags": [], "owner": {"reputation": 140, "user_id": 8112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3183be56ff8f041f38e56e92ceb16f?s=128&d=identicon&r=PG&f=1", "display_name": "everybody0523", "link": "https://stackoverflow.com/users/8112627/everybody0523"}, "is_accepted": false, "score": 1, "last_activity_date": 1522190063, "creation_date": 1522190063, "answer_id": 49523470, "question_id": 49523242, "link": "https://stackoverflow.com/questions/49523242/c-errors-with-file/49523470#49523470", "title": "C Errors with FILE*", "body": "<p>I resolved the issue. </p>\n\n<p>One of the constants in <code>helper.h</code> was called FILE, which was apparently causing issues. Thanks for the help, everyone!</p>\n"}], "owner": {"reputation": 140, "user_id": 8112627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a3183be56ff8f041f38e56e92ceb16f?s=128&d=identicon&r=PG&f=1", "display_name": "everybody0523", "link": "https://stackoverflow.com/users/8112627/everybody0523"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1522202555, "answer_count": 1, "score": -4, "last_activity_date": 1522190063, "creation_date": 1522188696, "last_edit_date": 1522189182, "question_id": 49523242, "link": "https://stackoverflow.com/questions/49523242/c-errors-with-file", "closed_reason": "Not suitable for this site", "title": "C Errors with FILE*", "body": "<p>I have the following C code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"helper.h\"\n\nint main(int argc, char ** argv){\n    if (argc &lt; 4){\n    fprintf(stderr, \"Usage: ./program_name &lt;DISK&gt; &lt;LOCAL_FILE&gt; &lt;DESTINATION&gt; \\n\");\n    exit(1);\n    }\n\n    FILE * target; \n}\n</code></pre>\n\n<p>helper.h is defined as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;string.h&gt;\n/*\nA bunch of function headers and global variables below, none of which \nare called target.\n*/\n</code></pre>\n\n<p>When I try to compile the above with the following command:</p>\n\n<pre><code>gcc -Wall -o program_name program_name.c\n</code></pre>\n\n<p>I get the following errors:</p>\n\n<pre><code>program_name.c:19:12: error: use of undeclared identifier 'target'\n    FILE * target;\n           ^\n1 error generated.\n</code></pre>\n\n<p>I've found that deleting the <code>#include \"helper.h\"</code> statement in the original program stops the compilation errors...but the problem is that I sort of need the methods defined in <code>helper.h</code> and <code>helper.c</code> to complete the program. Any idea what's wrong with it? I'm at my wit's end.</p>\n"}, {"tags": ["c", "perl"], "comments": [{"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1522187786, "post_id": 49522959, "comment_id": 86051990, "body": "If <code>execvp</code> fails, then <code>errno</code> is set. Add a <code>perror(&quot;execvp&quot;)</code> after <code>execvp</code> to see why it&#39;s failing."}, {"owner": {"reputation": 12179, "user_id": 1480131, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WZPm4.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1480131/pablo"}, "edited": false, "score": 0, "creation_date": 1522188071, "post_id": 49522959, "comment_id": 86052099, "body": "Also note that <code>sizeof(&quot;&#47;home&#47;me&#47;the.pl&quot;) == strlen(&quot;&#47;home&#47;me&#47;the.pl&quot;) + 1</code>, because <code>&quot;&#47;home&#47;me&#47;the.pl&quot;</code> is a string literal."}], "answers": [{"comments": [{"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 0, "creation_date": 1522246156, "post_id": 49523053, "comment_id": 86080181, "body": "I tried this. It works if the sticky-bit on the C binary isn&#39;t set, but fails if it does.  If it&#39;s set, then it runs in taint mode, and despite the documentation, running the perl executable with -I &lt;lib&gt; alone isn&#39;t good enough.  This may be another security roadblock.  Explicitly listing the libs in the perl source with &quot;use lib&quot; does work but defeats the dynamicity of PERL5LIB. At this point I feel like I&#39;m trying to hack around security roadblocks.  I think I&#39;m going to back off and seek a different angle.  Thanks for all the help !  Hope this helps others."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 0, "creation_date": 1522255695, "post_id": 49523053, "comment_id": 86087317, "body": "@daveg, As I previously pointed out, you are talking about the setuid bit, not the setuid bit."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1522259892, "post_id": 49523053, "comment_id": 86089715, "body": "I&#39;ve had to do this before (e.g. setuid launch of <code>perl</code> script). When you setup a setuid program (e.g. changing ownership to root and doing <code>chmod 6741 ...</code>), it will only set euid (effective user id) to 0/root and <i>not</i> uid (real user id). <code>perl</code> will see uid!=0 and euid==0 and set taint mode. Have the launcher program do <code>setuid(0)</code> and <code>setgid(0)</code> so that <code>perl</code> sees everything as root and it won&#39;t complain. Not sure, but the setuid program <i>may</i> wipe some of the environment, so you may need the launcher to set up the environment variables (e.g. <code>PERL5LIB</code>, etc.)"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1522272410, "post_id": 49523053, "comment_id": 86096606, "body": "(uh, my prev comment should be &quot;you are talking about the setuid bit, not the sticky bit&quot;)"}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1522272538, "post_id": 49523053, "comment_id": 86096665, "body": "@Craig Estey, Trying to fool Perl into using the caller&#39;s PERL5LIB is an awful idea. It <i>should</i> be ignored, as not ignoring it would allow the caller to run arbitrary code as root."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1522273515, "post_id": 49523053, "comment_id": 86097039, "body": "@ikegami I&#39;ve had to do this in production code. It&#39;s up to the [setuid] launcher to do restrictions. If you can establish a setuid program, you can do whatever you want because you&#39;re already root. This can be used for embedded systems that want to run [mostly] as non-root but still have to run some perl scripts [or apps] as root."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1522273991, "post_id": 49523053, "comment_id": 86097227, "body": "Ah, you didn&#39;t mean reusing the parent&#39;s PERL5LIB. Fine. Still crazy to use an insecure C wrapper instead of using <code>use lib</code>."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1522274802, "post_id": 49523053, "comment_id": 86097556, "body": "@ikegami Right, the setuid must prevent misuse but prevent <code>perl</code> from complaining. It&#39;s like <code>sudo</code> without the pw prompt, which is unsuitable if you have to do <code>sudo</code>-like things on an unattended/embedded system. I wrote my first setuid program circa 1993 [or earlier] and has a <code>&#47;etc&#47;*.conf</code> file that listed restrictions (i.e. <i>&quot;I was doing sudo before sudo was cool&quot;</i> ;-). The concept has been around since the 1970&#39;s: access by secure program and was available on an IBM/370 OS I used/programmed. Any file could designate a <i>program</i> that could access it with what permissions, like an ACL."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 5, "last_activity_date": 1522192733, "last_edit_date": 1522192733, "creation_date": 1522187755, "answer_id": 49523053, "question_id": 49522959, "link": "https://stackoverflow.com/questions/49522959/how-does-one-pass-includes-to-execvp-thats-running-a-perl-script/49523053#49523053", "title": "How does one pass includes to execvp that&#39;s running a perl script?", "body": "<p>You need each argument to be a separate entry in <code>args</code>. Try this:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint\nmain(int argc, char *argv[])\n{\n    char *args[4];       /* args will be passed to execvp.  prepend perl executable */\n\n    args[0] = \"/tools/bin/perl\";\n    args[1] = \"-I/proj/perlmods\";\n    args[2] = \"/home/me/the.pl\";\n    args[3] = NULL;\n\n    execvp(args[0], args);\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 0, "creation_date": 1522246363, "post_id": 49523875, "comment_id": 86080334, "body": "This works, but static defs of the libs in the perl source doesn&#39;t fit our model of using $PERL5LIB as a dynamic set of libs set up in the env.  Using the C wrapper which could echo the content of $PERL5LIB as includes would work (in theory), but it appears they threw up other security roadblocks to prevent that."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "edited": false, "score": 1, "creation_date": 1522258740, "post_id": 49523875, "comment_id": 86089052, "body": "@daveg, NO NO NO, don&#39;t use <code>PERL5LIB</code>. You&#39;ll let the initial user run any code as the setuid user! You should definitely be using <code>use lib</code> in a setuid situation. (And get rid of the C wrapper, as I previously mentioned.)"}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1522193334, "last_edit_date": 1522193334, "creation_date": 1522193007, "answer_id": 49523875, "question_id": 49522959, "link": "https://stackoverflow.com/questions/49522959/how-does-one-pass-includes-to-execvp-thats-running-a-perl-script/49523875#49523875", "title": "How does one pass includes to execvp that&#39;s running a perl script?", "body": "<p>You're doing something wrong if you're using <code>-I</code>. The script's executer shouldn't have to care about where the script's libraries are located.</p>\n\n<ul>\n<li><p>If <code>/proj/perlmods</code> is used by multiple applications, you should add the following to your login script:</p>\n\n<pre><code>export PERL5LIB=/proj/perlmods\n</code></pre></li>\n<li><p>If <code>/proj/perlmods</code> is only used by that one Perl program, add the following to the Perl program:</p>\n\n<pre><code>use lib qw( /proj/perlmods );\n</code></pre></li>\n</ul>\n\n<p>Then, the C program becomes</p>\n\n<pre><code>char *args[2];                  # Or char **args = malloc(2 * sizeof(char*));\nargs[0] = \"/home/me/the.pl\";    # No need to duplicate the string; just copy the ptr.\nargs[1] = NULL;\n\nexecvp(args[0], args);\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>char *args[4];                  # Or char **args = malloc(4 * sizeof(char*));\nargs[0] = \"/tools/bin/perl\";\nargs[1] = \"-I/proj/perlmods\";\nargs[2] = \"/home/me/the.pl\";\nargs[3] = NULL;\n\nexecvp(args[0], args);\n</code></pre>\n"}], "owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1522193334, "creation_date": 1522187325, "question_id": 49522959, "link": "https://stackoverflow.com/questions/49522959/how-does-one-pass-includes-to-execvp-thats-running-a-perl-script", "title": "How does one pass includes to execvp that&#39;s running a perl script?", "body": "<p>RHEL6                 </p>\n\n<p>In C, how does one pass includes to execvp which in turn runs a perl executable ? (this is a means to replace missing translation of PERL5LIB to @INC when taint mode is on)</p>\n\n<p>This question is looking for a working implementation of an answer provided by mob to...\n<a href=\"https://stackoverflow.com/questions/49516416/why-does-inc-change-when-setgid-bit-of-c-wrapper-around-perl-script-change\">Why does @INC change when setgid-bit of C wrapper around perl script change?</a>.</p>\n\n<p>I'm wrapping a perl script execution in a C program that uses execvp to call the perl.  Because taint mode is enabled, @INC will not be loaded with the content of $PERL5LIB, so I have pass the paths to the perl executable using \"-I\".  perlsec says this is possible (ref the answer provided by mob in the note sited above).  </p>\n\n<p>My attempts to do this have failed.  My C program attempted to run the perl executable as the first arg to execvp and then the perl script as part of the argument list.  The includes were made part of the perl script executable statement.  Here's the example...</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[])\n{\n  char **args;  /*args will be passed to execvp.  prepend perl executable*/\n\n  args=malloc(3*sizeof(char*));\n\n  args[0]=malloc(sizeof(\"/tools/bin/perl -I/proj/perlmods\")+1);\n  strcpy(args[0],\"/tools/bin/perl -I/proj/perlmods\");\n\n  args[1]=malloc(sizeof(\"/home/me/the.pl\")+1);\n  strcpy(args[1],\"/home/me/the.pl\");\n\n  args[2]=NULL;\n\n  execvp(\"/tools/bin/perl\",args);\n\n}\n</code></pre>\n\n<p>The perl script is simply...</p>\n\n<pre><code>use html_mail;\nprint \"In my.pl\\n\";\nexit;\n</code></pre>\n\n<p>/proj/perlmods has html_mail.pm</p>\n\n<p>A straight out perl execution at the linux prompt using -I works...</p>\n\n<pre><code>% /tools/bin/perl -I /proj/perlmods /home/me/my.pl\nIn my.pl\n</code></pre>\n\n<p>But running the C binary does not.  It complains that the perl module can't be found.  If, however, /proj/perlmods is put in PERL5LIB, then it does work.  So I think args is good as far as the perl script being in args[1].  </p>\n\n<p>I believe the include statement I threw into args is being ignored.  If I stick it as a suffix to the perl executable call in the execvp...</p>\n\n<pre><code>  execvp(\"/tools/bin/perl -I /proj/perlmods\",args);\n</code></pre>\n\n<p>...the C program fails, so I don't think it belongs there.  If I put the include as part of the perl script call....</p>\n\n<pre><code>  strcpy(args[1],\"/home/me/the.pl -I /proj/perlmods\");\n</code></pre>\n\n<p>... it fails.  If I add it as a new element of args (args[3]), it just gets passed as an arg to the perl script and has no affect.</p>\n\n<p>I looked at execvpe, but that just looks like a means to set env vars.</p>\n\n<p>Question is, how does one actually pass the include information to the execvp ?</p>\n"}, {"tags": ["c", "function"], "comments": [{"owner": {"reputation": 12794, "user_id": 865643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mG7s3.jpg?s=128&g=1", "display_name": "noelicus", "link": "https://stackoverflow.com/users/865643/noelicus"}, "edited": false, "score": 0, "creation_date": 1522186935, "post_id": 49522828, "comment_id": 86051647, "body": "Just pass it as <code>update_table(a)</code>"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1522186938, "post_id": 49522828, "comment_id": 86051650, "body": "<code>update_table(a[SIZE][SIZE], rw, cn, type);</code> =&gt; <code>update_table(a, rw, cn, type);</code>"}, {"owner": {"reputation": 57, "user_id": 9494001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d984ced04f1fa8648bd4c7c57910ef?s=128&d=identicon&r=PG&f=1", "display_name": "ClockwerkSC", "link": "https://stackoverflow.com/users/9494001/clockwerksc"}, "edited": false, "score": 0, "creation_date": 1522187071, "post_id": 49522828, "comment_id": 86051694, "body": "so you don&#39;t pass the size of an array in a function?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1522187299, "post_id": 49522828, "comment_id": 86051812, "body": "@ClockwerkSC the name of a variable is its name"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1522187324, "post_id": 49522828, "comment_id": 86051821, "body": "@ClockwerkSC no... <code>a[SIZE][SIZE]</code> doesn&#39;t pass the size. It passes the single element in the matrix at that location, which in your case is likely past the end of allocated space.  For example, if you declare an array like <code>int a[10][10];</code> then the elements are indexed from 0..9 in each dimension, so a[10][10] will be past the end of allocated space and give you an access violation."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 1, "creation_date": 1522187347, "post_id": 49522828, "comment_id": 86051830, "body": "What you pass [when you call a function] is different than the called function&#39;s declaration. When you do <code>update_table(a[SIZE][SIZE])</code> you are passing a <i>scalar</i> value [and <i>not</i> a <i>pointer</i> to the <code>a</code> array as you desire]. FYI, This scalar is actually out-of-bounds for the array anyway (the last value would be <code>a[SIZE - 1][SIZE - 1]</code>). To pass the array&#39;s address, do [as others have suggested], <code>update_table(a)</code> which is [more or less] the same as <code>update_table(&amp;a[0][0])</code>"}, {"owner": {"reputation": 57, "user_id": 9494001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d984ced04f1fa8648bd4c7c57910ef?s=128&d=identicon&r=PG&f=1", "display_name": "ClockwerkSC", "link": "https://stackoverflow.com/users/9494001/clockwerksc"}, "edited": false, "score": 1, "creation_date": 1522187561, "post_id": 49522828, "comment_id": 86051895, "body": "Oh wow this makes complete and total sense, thank you guys for the clear and detailed explanations."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 9494001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d984ced04f1fa8648bd4c7c57910ef?s=128&d=identicon&r=PG&f=1", "display_name": "ClockwerkSC", "link": "https://stackoverflow.com/users/9494001/clockwerksc"}, "edited": false, "score": 0, "creation_date": 1522187096, "post_id": 49522889, "comment_id": 86051704, "body": "So you don&#39;t pass the size of an array in a function?"}, {"owner": {"reputation": 2967, "user_id": 8616205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3o2ct.png?s=128&g=1", "display_name": "frslm", "link": "https://stackoverflow.com/users/8616205/frslm"}, "reply_to_user": {"reputation": 57, "user_id": 9494001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d984ced04f1fa8648bd4c7c57910ef?s=128&d=identicon&r=PG&f=1", "display_name": "ClockwerkSC", "link": "https://stackoverflow.com/users/9494001/clockwerksc"}, "edited": false, "score": 0, "creation_date": 1522187200, "post_id": 49522889, "comment_id": 86051755, "body": "No, you only pass in the array itself. If you need to pass in its size, you&#39;d have to do that as a separate parameter."}, {"owner": {"reputation": 57, "user_id": 9494001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d984ced04f1fa8648bd4c7c57910ef?s=128&d=identicon&r=PG&f=1", "display_name": "ClockwerkSC", "link": "https://stackoverflow.com/users/9494001/clockwerksc"}, "edited": false, "score": 1, "creation_date": 1522187593, "post_id": 49522889, "comment_id": 86051909, "body": "Thank you guys, this cleared up the confusion that I had"}], "tags": [], "owner": {"reputation": 2967, "user_id": 8616205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3o2ct.png?s=128&g=1", "display_name": "frslm", "link": "https://stackoverflow.com/users/8616205/frslm"}, "is_accepted": true, "score": 2, "last_activity_date": 1522187142, "last_edit_date": 1522187142, "creation_date": 1522186984, "answer_id": 49522889, "question_id": 49522828, "link": "https://stackoverflow.com/questions/49522828/repeated-errors-when-passing-arguments-in-functions/49522889#49522889", "title": "Repeated errors when passing arguments in functions", "body": "<p>You're passing in <code>a[SIZE][SIZE]</code> instead of just <code>a</code> when calling <code>check_legal_option()</code>, <code>update_table()</code>, and <code>display_table()</code>.</p>\n\n<p><code>a[SIZE][SIZE]</code> attempts to access <code>a</code>'s element in row <code>SIZE</code> and column <code>SIZE</code>, which would take you out of bounds; you only need to declare <code>SIZE</code> in any function declaration that accepts <code>a</code> as a parameter.</p>\n"}, {"tags": [], "owner": {"reputation": 251, "user_id": 9560177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65441b9967ced8dbbca756b768ba3c18?s=128&d=identicon&r=PG&f=1", "display_name": "D. Pante", "link": "https://stackoverflow.com/users/9560177/d-pante"}, "is_accepted": false, "score": 1, "last_activity_date": 1522189925, "creation_date": 1522189925, "answer_id": 49523437, "question_id": 49522828, "link": "https://stackoverflow.com/questions/49522828/repeated-errors-when-passing-arguments-in-functions/49523437#49523437", "title": "Repeated errors when passing arguments in functions", "body": "<p>The parameter to your generate_player2_move function is declared as char a[SIZE][SIZE].  Apparently you are trying to pass a 2 dimensional array of chars.  However, when you pass an array you are actually passing a pointer to the 1st element in the array.  You are not passing the array itself.  Therefore, because a 2 dimensional array is really an array of arrays, the declaration of the parameter should really be a pointer to an array an array of SIZE characters.  The parameter should be declared as follows: char (*a)[SIZE]</p>\n"}], "owner": {"reputation": 57, "user_id": 9494001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d984ced04f1fa8648bd4c7c57910ef?s=128&d=identicon&r=PG&f=1", "display_name": "ClockwerkSC", "link": "https://stackoverflow.com/users/9494001/clockwerksc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 49522889, "answer_count": 2, "score": 2, "last_activity_date": 1522189925, "creation_date": 1522186718, "last_edit_date": 1522187868, "question_id": 49522828, "link": "https://stackoverflow.com/questions/49522828/repeated-errors-when-passing-arguments-in-functions", "title": "Repeated errors when passing arguments in functions", "body": "<p>In my program I have encountered the same 2 errors countless times. Here's a sliver of the program to illustrate the problem:</p>\n\n<pre><code>void update_table(char ary[SIZE][SIZE], int row, int column, char token)\n{\n\nif(token == 'X')\n    ary[row][column] = 'X';\nelse if(token == 'O')\n    ary[row][column] = 'O';\n\n\n}\n</code></pre>\n\n<p>...</p>\n\n<pre><code>void generate_player2_move(char a[SIZE][SIZE], int rw, int cn)\n{\nchar type = 'X';\nsrand(time(NULL));\nrw = rand() % 3;\ncn = rand() % 3;\n\n\n    while(check_legal_option(a[SIZE][SIZE], rw, cn) == 1)\n    {\n\n    rw = rand() %3;\n    cn = rand() %3;\n\n    }\nprintf(\"Player 2 has entered [row, col]: %d,%d\", rw, cn);\nupdate_table(a[SIZE][SIZE], rw, cn, type);\ndisplay_table(a[SIZE][SIZE]);\n}\n</code></pre>\n\n<p>and these are the two types of errors I have been getting: </p>\n\n<pre><code>note: expected \u2018char (*)[3]\u2019 but argument is of type \u2018char\u2019\n void update_table(char ary[SIZE][SIZE], int row, int column, char token)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>  warning: passing argument 1 of \u2018update_table\u2019 makes pointer from integer without a cast [-Wint-conversion] update_table(a[SIZE][SIZE], rw, cn, type);\n</code></pre>\n\n<p>I am confused about the first error, because I thought the argument is <code>char * [3]</code>, and then I don't quite understand the second error.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1522187457, "post_id": 49522820, "comment_id": 86051862, "body": "In other words, <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\">read the documentation</a>, and follow it accordingly."}], "answers": [{"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 1, "last_activity_date": 1522188007, "last_edit_date": 1522188007, "creation_date": 1522187634, "answer_id": 49523026, "question_id": 49522820, "link": "https://stackoverflow.com/questions/49522820/sprintf-dynamic-decimals-memory-violation/49523026#49523026", "title": "sprintf dynamic decimals, memory violation", "body": "<p>The <a href=\"http://man7.org/linux/man-pages/man3/printf.3.html\" rel=\"nofollow noreferrer\">documentation for <code>sprintf</code></a> reads like:</p>\n\n<blockquote>\n  <p><code>int sprintf(char *str, const char *format, ...);</code></p>\n  \n  <p><code>sprintf()</code> [et al.] ... write to the character string\n         <em><code>str</code></em>.</p>\n</blockquote>\n\n<p>You suffered undefined behavior due to <code>sprintf</code> attempting to read uninitialized memory to use as the format string, and attempting to write to a string literal.</p>\n\n<p>However, you should prefer <code>snprintf</code> to <code>sprintf</code> to help you avoid buffer overflow issues.</p>\n\n<pre><code>int r = snprintf(graduationText, 1024, \"%.*f\", decimalsToShow, graduation);\n</code></pre>\n"}], "owner": {"reputation": 745, "user_id": 8588607, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4a6f92294ead1dc2f726601c3f13c0b9?s=128&d=identicon&r=PG&f=1", "display_name": "L&#233;o Coletta", "link": "https://stackoverflow.com/users/8588607/l%c3%a9o-coletta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 49523026, "answer_count": 1, "score": 1, "last_activity_date": 1522188007, "creation_date": 1522186679, "question_id": 49522820, "link": "https://stackoverflow.com/questions/49522820/sprintf-dynamic-decimals-memory-violation", "title": "sprintf dynamic decimals, memory violation", "body": "<p>I am trying to dynamically show a specific number of decimals. I use this :</p>\n\n<pre><code>    char graduationText[1024];\n    sprintf(\"%.*f\", graduationText, decimalsToShow, graduation);\n</code></pre>\n\n<p>However when the program run I get a memory violation error. So I was wondering if sprintf can manage the \"%.*f\" or if it an error of me. Thanks</p>\n"}, {"tags": ["c", "arrays", "performance", "sorting", "dynamic"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1522185188, "post_id": 49522444, "comment_id": 86050886, "body": "What&#39;s the point of the dynamic allocation here? Also providing at least the <i>name</i> of the algorithm (let alone the description) would be appropriate."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1522185207, "post_id": 49522444, "comment_id": 86050897, "body": "You never initialized any of the elements that the user didn&#39;t enter. Some of them might contain <code>1</code>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1522185348, "post_id": 49522444, "comment_id": 86050954, "body": "You need to <code>memcpy(..., sizeof(int) * size)</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1522185391, "post_id": 49522444, "comment_id": 86050969, "body": "<a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don&#39;t cast malloc</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1522185819, "post_id": 49522444, "comment_id": 86051177, "body": "You have not checked that the input value <code>index</code> is within the bounds of the array, and if it is, any other element not specifically set to <code>1</code> has an indeterminate value, since <code>malloc</code> does not initialise the memory allocated. You should also allocate the memory <i>after</i> you input the number of elements <code>size</code>, so <code>bigNum</code> is irrelevant. Moreover what is the magic number for in <code>i &lt; 99999</code>? Did you intend <code>i &lt; bigNum</code> (although not in scope)?"}], "answers": [{"tags": [], "owner": {"reputation": 1472, "user_id": 6942918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EzNAX.png?s=128&g=1", "display_name": "kyriakosSt", "link": "https://stackoverflow.com/users/6942918/kyriakosst"}, "is_accepted": false, "score": 2, "last_activity_date": 1522187175, "last_edit_date": 1522187175, "creation_date": 1522185438, "answer_id": 49522549, "question_id": 49522444, "link": "https://stackoverflow.com/questions/49522444/memory-copy-dynamically-allocated-array/49522549#49522549", "title": "memory copy dynamically allocated array", "body": "<p>Your problem is the <code>size</code> argument in <code>memcpy()</code> call inside <code>positiveIntSort</code>.<br>\nIt should be:</p>\n\n<pre><code>memcpy(array,sortedArray,size*sizeof(int));\n</code></pre>\n\n<p>As <code>memcpy()</code> needs as a third argument the number of bytes for copying (not the number of elements of the array).</p>\n\n<p>Also note that you have conflicting types of <code>positiveIntSort()</code> with one returning <code>void</code> and the other <code>int</code>, which is also ignored by the implementation.</p>\n\n<p>Now about making the algorithm better:</p>\n\n<ol>\n<li><p>There is no need for arbitrary size on your array. (or else: arbitrary max value). Store the user input in a temp array and find the maximum and minimum values . Then allocate space for (max-min+1) integers in <code>array</code>. And for each value <code>d</code>, insert it in the <code>d-min</code> position of the array. You will need an extra loop but the time complexity remains O(n) (*) and not only you don't have unnecessary constrains, but also you can decrease the memory overhead. </p></li>\n<li><p>What about duplicate input values? Right now your algorithm cannot handle duplicates. You could just <em>add</em> 1 to the corresponding cell of your initial array instead of <em>setting to</em> 1 for each number. This way, if you put some extra effort in your sorting function you can locate and sort correctly all duplicates.</p></li>\n<li><p>What about negative values? A way would be to perform two different sortings (one for negatives and one for positives) and concatenate them at the end (even better if you do it in place).</p></li>\n</ol>\n\n<p>Finally, as it is mentioned in the comments, you also need to initialize your values in the array, as some could be 1 (use <code>calloc()</code> to make your life easier). </p>\n\n<p>(*): To be exact your complexity is now \u0398(max{n, nmax-nmin}), where nmax and nmin are the largest and smallest values of your input. (or the size of your array, as you will loop through it)</p>\n"}, {"comments": [{"owner": {"reputation": 1472, "user_id": 6942918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EzNAX.png?s=128&g=1", "display_name": "kyriakosSt", "link": "https://stackoverflow.com/users/6942918/kyriakosst"}, "edited": false, "score": 0, "creation_date": 1522274044, "post_id": 49523189, "comment_id": 86097250, "body": "You do realize how that algorithm works, right? <code>array</code> is not supposed to store the input data in a sequential way. It&#39;s size is not <code>size</code>, it is supposed to be at least as big as the largest input value, as it uses values as array indices in order to sort. So, <code>int array[size];</code> is not correct."}, {"owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "reply_to_user": {"reputation": 1472, "user_id": 6942918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EzNAX.png?s=128&g=1", "display_name": "kyriakosSt", "link": "https://stackoverflow.com/users/6942918/kyriakosst"}, "edited": false, "score": 1, "creation_date": 1522280626, "post_id": 49523189, "comment_id": 86099199, "body": "@KyrSt  Thanks! You are right! I should say <code>int array[bigNum];</code> Correcting."}], "tags": [], "owner": {"reputation": 5295, "user_id": 717523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b436aae08258d0a6b3f515eb03d5f15?s=128&d=identicon&r=PG", "display_name": "sg7", "link": "https://stackoverflow.com/users/717523/sg7"}, "is_accepted": true, "score": 2, "last_activity_date": 1522281174, "last_edit_date": 1522281174, "creation_date": 1522188399, "answer_id": 49523189, "question_id": 49522444, "link": "https://stackoverflow.com/questions/49522444/memory-copy-dynamically-allocated-array/49523189#49523189", "title": "memory copy dynamically allocated array", "body": "<blockquote>\n  <p>However, I have some trouble with the dynamically allocated array.</p>\n</blockquote>\n\n<p>In your code you have allocated room for the array :</p>\n\n<pre><code>   int *array = (int *) malloc (bigNum*sizeof(int));\n</code></pre>\n\n<p>with  exactly this many bytes:  <code>bigNum * sizeof(int)</code>. </p>\n\n<p><em>(BTW: There is no need to cast result of <code>malloc</code> in C language. It is recommended to check if allocation was successful and non <code>NULL</code> result of <code>malloc</code> was returned.)</em></p>\n\n<p>Instead of dynamically allocating the <code>array</code> (you forgot to <code>free</code> the <code>array</code> memory) you could declare it after obtaining the size of the array:</p>\n\n<pre><code>   //int *array = (int *) malloc (bigNum*sizeof(int));\n   int i,index,size,bigNum;\n   printf(\"Enter the size of array: \");\n   scanf(\"%d\",&amp;bigNum );\n   int array[bigNum];\n   printf(\"Enter the number of elements: \");\n   scanf(\"%d\",&amp;size);\n</code></pre>\n\n<p>This also problem what to do with uninitialized array elements.</p>\n\n<p>Symmetrically in <code>int positiveIntSort(int *array,int size){</code></p>\n\n<p>you have to copy all the bytes belonging to the <code>array</code>. The number of bytes in this <code>array</code> is equal to number or array elements times the size of the element. In your case the size of the element if equal to <code>sizeof(int)</code>.</p>\n\n<p>Therefore the line </p>\n\n<pre><code>   memcpy(array,sortedArray,size); \n</code></pre>\n\n<p>should be replaced by: </p>\n\n<pre><code>   memcpy(array,sortedArray,size* sizeof(int)); \n</code></pre>\n\n<p>I will not comment on the logic of the your algorithm which does not seem to handle duplicates and negative values. </p>\n\n<p>Different sorting algorithms have different time complexities: </p>\n\n<ul>\n<li><p><a href=\"https://www.geeksforgeeks.org/time-complexities-of-all-sorting-algorithms/\" rel=\"nofollow noreferrer\">Time Complexities of all Sorting Algorithms</a>.</p></li>\n<li><p><a href=\"https://en.wikipedia.org/wiki/Best,_worst_and_average_case\" rel=\"nofollow noreferrer\">Best, worst and average case - Wikipedia</a></p></li>\n</ul>\n\n<p>If you need faster sorting time than yours you may consider other algorithms. </p>\n"}], "owner": {"reputation": 57, "user_id": 7603050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/332b94b983fdb20c23a20915ad4bd359?s=128&d=identicon&r=PG&f=1", "display_name": "Yizhi Hu", "link": "https://stackoverflow.com/users/7603050/yizhi-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 745, "favorite_count": 0, "accepted_answer_id": 49523189, "answer_count": 2, "score": 2, "last_activity_date": 1522281174, "creation_date": 1522184983, "last_edit_date": 1522188869, "question_id": 49522444, "link": "https://stackoverflow.com/questions/49522444/memory-copy-dynamically-allocated-array", "title": "memory copy dynamically allocated array", "body": "<p>I am currently found out a interesting and simple sorting algorithm, so I implemented it in with dynamically allocated array.\nHere is my code.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nvoid positiveIntSort(int *array,int size);\nvoid printArray(int array[],int size);\n\nint main() {\n    int bigNum = 99999;\n    int *array = (int *) malloc (bigNum*sizeof(int));\n    int i,index,size;\n    printf(\"Enter the size of array: \");\n    scanf(\"%d\",&amp;size);\n    printf(\"Enter each element for array: \");\n    for(i = 0; i &lt; size; i++) {\n        scanf(\"%d\",&amp;index);\n        array[index] = 1;\n    }\n    positiveIntSort(array,size);\n    printArray(array,size);\n}\n\nint positiveIntSort(int *array,int size) {\n    int i,j = 0;\n    int sortedArray[size];\n    for(i = 0; i &lt; 99999,j &lt; size; i++) {\n        if(array[i] == 1)\n            sortedArray[j++] = i;\n    }\n    memcpy(array,sortedArray,size);\n    printArray(sortedArray,size);\n}\n\nvoid printArray(int array[],int size) {\n    int i;\n    for(i = 0; i &lt; size; i++) {\n        printf(\"%d\\t\",array[i]);\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>So, basically what I am doing is if user input a number : a, I go to corresponding index, which is <code>a</code> in this case, and assign <code>1</code> to this <code>array[a]</code>.\nSo I traverse again and print all the index with value <code>1</code>. This way gives me a sorted array.</p>\n\n<p>However, I have some trouble with the dynamically allocated array.\nHere is a sample output I have:</p>\n\n<pre><code>Enter the size of array: 5\nEnter each element for array:23 12 45 63 38\n12       23      38      45     63\n12       1845015 0       0      0\n</code></pre>\n\n<p>So sorting is definitely working. However when I return the sorted array to the dynamically allocated array, the result messed up. I could not find the reason? Is the way I use memcpy incorrect? </p>\n\n<p>Besides, is the complexity of this algorithm O(n). Is there anyway to make this algorithm better?</p>\n"}, {"tags": ["c", "matrix", "struct"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1522184907, "post_id": 49522407, "comment_id": 86050759, "body": "Should use <code>.</code> instead of <code>-&gt;</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522184944, "post_id": 49522407, "comment_id": 86050778, "body": "<code>b</code> is an array of structs, not an array of pointers. Why are you calling <code>malloc()</code> inside the loop?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1522185000, "post_id": 49522407, "comment_id": 86050801, "body": "also, the inner malloc is wrong of course, you should read again how to allocate a 2d array."}, {"owner": {"reputation": 127, "user_id": 7960258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff1b37dd38f331b04d9898c789178e8?s=128&d=identicon&r=PG&f=1", "display_name": "bmw417", "link": "https://stackoverflow.com/users/7960258/bmw417"}, "edited": false, "score": 0, "creation_date": 1522185123, "post_id": 49522407, "comment_id": 86050856, "body": "Thanks for the help so far. I used dot notation and that took away those compiling errors. I&#39;ll try and re allocate memory for the matrix, I&#39;m getting a seg fault right now"}, {"owner": {"reputation": 127, "user_id": 7960258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff1b37dd38f331b04d9898c789178e8?s=128&d=identicon&r=PG&f=1", "display_name": "bmw417", "link": "https://stackoverflow.com/users/7960258/bmw417"}, "edited": false, "score": 0, "creation_date": 1522185284, "post_id": 49522407, "comment_id": 86050926, "body": "I redid the memory allocation with old code I used for a 2D matrix and that seemed to do the trick. Thanks Antii for pointing out how trash I am at remembering how to allocate memory for it lol"}], "owner": {"reputation": 127, "user_id": 7960258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff1b37dd38f331b04d9898c789178e8?s=128&d=identicon&r=PG&f=1", "display_name": "bmw417", "link": "https://stackoverflow.com/users/7960258/bmw417"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522184800, "creation_date": 1522184800, "question_id": 49522407, "link": "https://stackoverflow.com/questions/49522407/matrix-of-structs-initialization-and-filling-c", "title": "Matrix of Structs Initialization and Filling - C", "body": "<p>I need to make a matrix of structs that have a type</p>\n\n<pre><code>struct colorPixelData_t {\n    int red;\n    int green;\n    int blue;\n};\n</code></pre>\n\n<p>And I'm trying to initialize my values like this: </p>\n\n<pre><code>struct colorPixelData_t **initColorMatrix(struct colorPixelData_t **b, int height, int width)\n{\n        int i, j;\n        b = malloc(height * width * sizeof(struct colorPixelData_t));\n        assert(b);\n        for (i = 0; i &lt; height; i++) {\n                for (j = 0; j &lt; width; j++)\n                        b[i][j] = malloc(sizeof(struct colorPixelData_t));\n        }\n        return b;\n}\n</code></pre>\n\n<p>And I'm trying to manipulate the data below. Basically, I'm reading in a bmp file and part of the format is the pixel data, which I read into a void * array and then memcpy it into an unsigned char * array, then the unsigned char *array to the matrix of structs. Each 3 bytes holds one rgb value per pixel, ie bytes 0-2 might hold 200, 0, 0 to form an rgb of (200,0,0) for pixel [0,0] - hence the matrix of structs [pixel x, pixel y] -> red, green, blue. </p>\n\n<pre><code>struct colorPixelData_t **getColorPixelInfo(struct colorPixelData_t **colorPixelData, void *colorPixelDataArr, int imageSize, int height, int width)\n{\n        unsigned char *unsCharArr = malloc(imageSize);\n        assert(unsCharArr);\n        memcpy(unsCharArr, colorPixelDataArr, imageSize);\n\n        int counter = 0;\n        int iteratorByThree = 0;\n        for (int i = height - 1; i &gt;= 0; i--) {\n                for (int j = 0; j &lt; width; j++) {\n                        if (iteratorByThree == 0)\n                                colorPixelData[i][j] -&gt; red = (int) unsCharArr[counter];\n                        else if (iteratorByThree == 1)\n                                colorPixelData[i][j] -&gt; green = (int) unsCharArr[counter];\n                        else {\n                                colorPixelData[i][j] -&gt; blue = (int) unsCharArr[counter];\n                                iteratorByThree = 0;\n                        }\n                        counter++;\n                        iteratorByThree++;\n                }\n        }\n        return colorPixelData;\n}\n</code></pre>\n\n<p>When I compile this, it gives me these errors: </p>\n\n<pre><code>bmp.c: In function \u2018initColorMatrix\u2019:\nbmp.c:678:33: error: incompatible types when assigning to type \u2018struct colorPixelData_t\u2019 from type \u2018void *\u2019\n                         b[i][j] = malloc(sizeof(struct colorPixelData_t));\n                                 ^\nbmp.c: In function \u2018getColorPixelInfo\u2019:\nbmp.c:694:54: error: invalid type argument of \u2018-&gt;\u2019 (have \u2018struct colorPixelData_t\u2019)\n                                 colorPixelData[i][j] -&gt; red = (int) unsCharArr[counter];\n                                                      ^~\nbmp.c:696:54: error: invalid type argument of \u2018-&gt;\u2019 (have \u2018struct colorPixelData_t\u2019)\n                                 colorPixelData[i][j] -&gt; green = (int) unsCharArr[counter];\n                                                      ^~\nbmp.c:698:54: error: invalid type argument of \u2018-&gt;\u2019 (have \u2018struct colorPixelData_t\u2019)\n                                 colorPixelData[i][j] -&gt; blue = (int) unsCharArr[counter];\n</code></pre>\n\n<p>Can anyone tell me what I'm doing wrong?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1522182074, "post_id": 49521757, "comment_id": 86049364, "body": "Do you know the type of the return value of sqrt()?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1522182079, "post_id": 49521757, "comment_id": 86049367, "body": "<code>%d</code> is for integers. Look at the man page for <code>printf</code> to find out how to print a double."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1522182517, "post_id": 49521757, "comment_id": 86049600, "body": "If you compile using gcc and use the <code>-Wall</code> option to turn on all warnings, you would see something like this: ` warning: format \u2018%d\u2019 expects argument of type \u2018int\u2019, but argument 3 has type \u2018double\u2019 [-Wformat=]    printf(&quot;\\t %d \\t\\t\\t %d \\n&quot;,i, sqrt((double) i));`"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1522182595, "post_id": 49521757, "comment_id": 86049640, "body": "Is this really from the textbook?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1522182597, "post_id": 49521757, "comment_id": 86049642, "body": "Two errors in this program: <code>main()</code> is no longer standard and a format specifier error as addressed in answers below. My hint: throw away your C text book and get a decent one."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1522185679, "post_id": 49521757, "comment_id": 86051113, "body": "Which textbook is it?"}], "answers": [{"tags": [], "owner": {"reputation": 2967, "user_id": 8616205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3o2ct.png?s=128&g=1", "display_name": "frslm", "link": "https://stackoverflow.com/users/8616205/frslm"}, "is_accepted": false, "score": 2, "last_activity_date": 1522182117, "creation_date": 1522182117, "answer_id": 49521790, "question_id": 49521757, "link": "https://stackoverflow.com/questions/49521757/textbook-c-code-produces-incorrrect-output/49521790#49521790", "title": "Textbook C Code produces incorrrect output", "body": "<p>You're using the wrong <a href=\"http://www.cplusplus.com/reference/cstdio/printf/\" rel=\"nofollow noreferrer\">format specifier</a> here:</p>\n\n<pre><code>printf(\"\\t %d \\t\\t\\t %d \\n\",i, sqrt((double) i));\n</code></pre>\n\n<p>Make sure to use <code>%f</code> for variables of type <code>double</code> (what a function like <code>sqrt()</code> returns):</p>\n\n<pre><code>printf(\"\\t %d \\t\\t\\t %f \\n\",i, sqrt((double) i));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 6470246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4447d9925d5f58dc18ca111e72ecd48?s=128&d=identicon&r=PG&f=1", "display_name": "Fritz McNasty", "link": "https://stackoverflow.com/users/6470246/fritz-mcnasty"}, "edited": false, "score": 0, "creation_date": 1522182765, "post_id": 49521820, "comment_id": 86049740, "body": "Okay. I am unclear why such a &quot;simple&quot;mistake could be printed in a textbook though. Why does the %d produce such an output? I would think it would just not compile or something, but it produces numbers."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 35, "user_id": 6470246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4447d9925d5f58dc18ca111e72ecd48?s=128&d=identicon&r=PG&f=1", "display_name": "Fritz McNasty", "link": "https://stackoverflow.com/users/6470246/fritz-mcnasty"}, "edited": false, "score": 1, "creation_date": 1522183644, "post_id": 49521820, "comment_id": 86050168, "body": "@FritzMcNasty C does not hold your hand.  It trusts you know what you are doing."}, {"owner": {"reputation": 12794, "user_id": 865643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mG7s3.jpg?s=128&g=1", "display_name": "noelicus", "link": "https://stackoverflow.com/users/865643/noelicus"}, "edited": false, "score": 0, "creation_date": 1522183651, "post_id": 49521820, "comment_id": 86050172, "body": "Yep, that&#39;s a bad mistake to have in a textbook for beginners. Very unfair. You have definitely copied it exactly? ... it wasn&#39;t this was it: <code>(int)sqrt(i)</code>? Because that would then cast the sqrt return to an integer (and round it down), which would make the %d correct."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 35, "user_id": 6470246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4447d9925d5f58dc18ca111e72ecd48?s=128&d=identicon&r=PG&f=1", "display_name": "Fritz McNasty", "link": "https://stackoverflow.com/users/6470246/fritz-mcnasty"}, "edited": false, "score": 0, "creation_date": 1522184520, "post_id": 49521820, "comment_id": 86050579, "body": "@FritzMcNasty I will say that if you do want the compiler to catch some things that you probably shouldn&#39;t be doing, you should compile with all warnings and set warnings to errors. <code>-Wall -Wpedantic -Werror</code> will catch a lot.  It would, in fact, have prevented you from compiling that code."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1522184664, "post_id": 49521820, "comment_id": 86050649, "body": "@noelicus I was curious and found this code here: <a href=\"https://users.cs.cf.ac.uk/Dave.Marshall/C/node3.html\" rel=\"nofollow noreferrer\">users.cs.cf.ac.uk/Dave.Marshall/C/node3.html</a>"}, {"owner": {"reputation": 12794, "user_id": 865643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mG7s3.jpg?s=128&g=1", "display_name": "noelicus", "link": "https://stackoverflow.com/users/865643/noelicus"}, "edited": false, "score": 0, "creation_date": 1522186173, "post_id": 49521820, "comment_id": 86051338, "body": "That is a university exercise by the look of it - the error might be deliberate for you to find! If it was printed in a book I&#39;d be more concerned!!"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1522186377, "post_id": 49521820, "comment_id": 86051425, "body": "@noelicus looks like the exercise is mean to teach the use of libraries, not debug.  I&#39;d just chalk it up to a careless mistake in modifying the previous exercise."}], "tags": [], "owner": {"reputation": 12794, "user_id": 865643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mG7s3.jpg?s=128&g=1", "display_name": "noelicus", "link": "https://stackoverflow.com/users/865643/noelicus"}, "is_accepted": true, "score": 5, "last_activity_date": 1522182235, "creation_date": 1522182235, "answer_id": 49521820, "question_id": 49521757, "link": "https://stackoverflow.com/questions/49521757/textbook-c-code-produces-incorrrect-output/49521820#49521820", "title": "Textbook C Code produces incorrrect output", "body": "<p>Read up on this: <a href=\"http://www.cplusplus.com/reference/cstdio/printf/\" rel=\"noreferrer\">printf</a></p>\n\n<p>And use <code>%f</code> for <code>double</code> not <code>%d</code> which is for <code>int</code></p>\n"}, {"tags": [], "owner": {"reputation": 1245, "user_id": 9235482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4213027162e27fea3ece3ceeecd67762?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshitha Wisumperuma", "link": "https://stackoverflow.com/users/9235482/lakshitha-wisumperuma"}, "is_accepted": false, "score": 1, "last_activity_date": 1522183085, "last_edit_date": 1522183085, "creation_date": 1522182521, "answer_id": 49521883, "question_id": 49521757, "link": "https://stackoverflow.com/questions/49521757/textbook-c-code-produces-incorrrect-output/49521883#49521883", "title": "Textbook C Code produces incorrrect output", "body": "<p>You have used a wrong format specifier. \nTry, </p>\n\n<pre><code>printf(\"\\t %d \\t\\t\\t %f \\n\" ,i , sqrt((double) i));\n</code></pre>\n\n<p><code>%f</code> for <code>double</code>. Good luck. </p>\n"}], "owner": {"reputation": 35, "user_id": 6470246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4447d9925d5f58dc18ca111e72ecd48?s=128&d=identicon&r=PG&f=1", "display_name": "Fritz McNasty", "link": "https://stackoverflow.com/users/6470246/fritz-mcnasty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1522184377, "accepted_answer_id": 49521820, "answer_count": 3, "score": 0, "last_activity_date": 1522183085, "creation_date": 1522181934, "last_edit_date": 1522182007, "question_id": 49521757, "link": "https://stackoverflow.com/questions/49521757/textbook-c-code-produces-incorrrect-output", "closed_reason": "Duplicate", "title": "Textbook C Code produces incorrrect output", "body": "<p>I am learning C from a text. An example code provided by the author is:</p>\n\n<pre><code>#include &lt;math.h&gt;\n\nmain()\n\n{ int i;\n\n  printf(\"\\t Number \\t\\t Square Root of Number\\n\\n\");\n\n  for (i=0; i&lt;=360; ++i)\n           printf(\"\\t %d \\t\\t\\t %d \\n\",i, sqrt((double) i));\n\n}\n</code></pre>\n\n<p>which on my computer produces an incorrect output I don't understand:</p>\n\n<pre><code> Number          Square Root of Number \n\n 0           259 \n 1           515 \n 2           771 \n 3           1027 \n 4           1283 \n 5           1539 \n 6           1795 \n 7           2051 \n 8           2307 \n 9           2563 \n 10              2819 \n 11              3075 \n 12              3331 \n 13              3587 \n 14              3843 \n 15              4099 \n 16              4355 \n 17              4611 \n 18              4867 \n 19              5123 \n 20              5379 \n 21              5635 \n 22              5891 \n 23              6147 \n 24              6403 \n 25              6659 \n 26              6915 \n 27              7171 \n 28              7427 \n 29              7683 \n 30              7939 \n 31              8195 \n 32              8451 \n 33              8707 \n 34              8963 \n 35              9219 \n 36              9475 \n 37              9731 \n 38              9987 \n 39              10243 \n 40              10499 \n 41              10755 \n 42              11011 \n 43              11267 \n 44              11523 \n 45              11779 \n 46              12035 \n 47              12291 \n 48              12547 \n 49              12803 \n 50              13059 \n 51              13315 \n 52              13571 \n 53              13827 \n 54              14083 \n 55              14339 \n 56              14595 \n 57              14851 \n 58              15107 \n 59              15363 \n 60              15619 \n 61              15875 \n 62              16131 \n 63              16387 \n 64              16643 \n 65              16899 \n 66              17155 \n 67              17411 \n 68              17667 \n 69              17923 \n 70              18179 \n 71              18435 \n 72              18691 \n 73              18947 \n 74              19203 \n 75              19459 \n 76              19715 \n 77              19971 \n 78              20227 \n 79              20483 \n 80              20739 \n 81              20995 \n 82              21251 \n 83              21507 \n 84              21763 \n 85              22019 \n 86              22275 \n 87              22531 \n 88              22787 \n 89              23043 \n 90              23299 \n 91              23555 \n 92              23811 \n 93              24067 \n 94              24323 \n 95              24579 \n 96              24835 \n 97              25091 \n 98              25347 \n 99              25603 \n 100             25859 \n 101             26115 \n 102             26371 \n 103             26627 \n 104             26883 \n 105             27139 \n 106             27395 \n 107             27651 \n 108             27907 \n 109             28163 \n 110             28419 \n 111             28675 \n 112             28931 \n 113             29187 \n 114             29443 \n 115             29699 \n 116             29955 \n 117             30211 \n 118             30467 \n 119             30723 \n 120             30979 \n 121             31235 \n 122             31491 \n 123             31747 \n 124             32003 \n 125             32259 \n 126             32515 \n 127             32771 \n 128             33027 \n 129             33283 \n 130             33539 \n 131             33795 \n 132             34051 \n 133             34307 \n 134             34563 \n 135             34819 \n 136             35075 \n 137             35331 \n 138             35587 \n 139             35843 \n 140             36099 \n 141             36355 \n 142             36611 \n 143             36867 \n 144             37123 \n 145             37379 \n 146             37635 \n 147             37891 \n 148             38147 \n 149             38403 \n 150             38659 \n 151             38915 \n 152             39171 \n 153             39427 \n 154             39683 \n 155             39939 \n 156             40195 \n 157             40451 \n 158             40707 \n 159             40963 \n 160             41219 \n 161             41475 \n 162             41731 \n 163             41987 \n 164             42243 \n 165             42499 \n 166             42755 \n 167             43011 \n 168             43267 \n 169             43523 \n 170             43779 \n 171             44035 \n 172             44291 \n 173             44547 \n 174             44803 \n 175             45059 \n 176             45315 \n 177             45571 \n 178             45827 \n 179             46083 \n 180             46339 \n 181             46595 \n 182             46851 \n 183             47107 \n 184             47363 \n 185             47619 \n 186             47875 \n 187             48131 \n 188             48387 \n 189             48643 \n 190             48899 \n 191             49155 \n 192             49411 \n 193             49667 \n 194             49923 \n 195             50179 \n 196             50435 \n 197             50691 \n 198             50947 \n 199             51203 \n 200             51459 \n 201             51715 \n 202             51971 \n 203             52227 \n 204             52483 \n 205             52739 \n 206             52995 \n 207             53251 \n 208             53507 \n 209             53763 \n 210             54019 \n 211             54275 \n 212             54531 \n 213             54787 \n 214             55043 \n 215             55299 \n 216             55555 \n 217             55811 \n 218             56067 \n 219             56323 \n 220             56579 \n 221             56835 \n 222             57091 \n 223             57347 \n 224             57603 \n 225             57859 \n 226             58115 \n 227             58371 \n 228             58627 \n 229             58883 \n 230             59139 \n 231             59395 \n 232             59651 \n 233             59907 \n 234             60163 \n 235             60419 \n 236             60675 \n 237             60931 \n 238             61187 \n 239             61443 \n 240             61699 \n 241             61955 \n 242             62211 \n 243             62467 \n 244             62723 \n 245             62979 \n 246             63235 \n 247             63491 \n 248             63747 \n 249             64003 \n 250             64259 \n 251             64515 \n 252             64771 \n 253             65027 \n 254             65283 \n 255             65539 \n 256             65795 \n 257             66051 \n 258             66307 \n 259             66563 \n 260             66819 \n 261             67075 \n 262             67331 \n 263             67587 \n 264             67843 \n 265             68099 \n 266             68355 \n 267             68611 \n 268             68867 \n 269             69123 \n 270             69379 \n 271             69635 \n 272             69891 \n 273             70147 \n 274             70403 \n 275             70659 \n 276             70915 \n 277             71171 \n 278             71427 \n 279             71683 \n 280             71939 \n 281             72195 \n 282             72451 \n 283             72707 \n 284             72963 \n 285             73219 \n 286             73475 \n 287             73731 \n 288             73987 \n 289             74243 \n 290             74499 \n 291             74755 \n 292             75011 \n 293             75267 \n 294             75523 \n 295             75779 \n 296             76035 \n 297             76291 \n 298             76547 \n 299             76803 \n 300             77059 \n 301             77315 \n 302             77571 \n 303             77827 \n 304             78083 \n 305             78339 \n 306             78595 \n 307             78851 \n 308             79107 \n 309             79363 \n 310             79619 \n 311             79875 \n 312             80131 \n 313             80387 \n 314             80643 \n 315             80899 \n 316             81155 \n 317             81411 \n 318             81667 \n 319             81923 \n 320             82179 \n 321             82435 \n 322             82691 \n 323             82947 \n 324             83203 \n 325             83459 \n 326             83715 \n 327             83971 \n 328             84227 \n 329             84483 \n 330             84739 \n 331             84995 \n 332             85251 \n 333             85507 \n 334             85763 \n 335             86019 \n 336             86275 \n 337             86531 \n 338             86787 \n 339             87043 \n 340             87299 \n 341             87555 \n 342             87811 \n 343             88067 \n 344             88323 \n 345             88579 \n 346             88835 \n 347             89091 \n 348             89347 \n 349             89603 \n 350             89859 \n 351             90115 \n 352             90371 \n 353             90627 \n 354             90883 \n 355             91139 \n 356             91395 \n 357             91651 \n 358             91907 \n 359             92163 \n 360             92419 \n</code></pre>\n\n<p>Any idea or clue as to why? If its obvious maybe point to a reference that will point out some stupid mistake I have made?</p>\n"}, {"tags": ["c", "logic", "pre-increment"], "comments": [{"owner": {"reputation": 2343, "user_id": 4142873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YPz6m.jpg?s=128&g=1", "display_name": "Woodrow", "link": "https://stackoverflow.com/users/4142873/woodrow"}, "edited": false, "score": 2, "creation_date": 1522181837, "post_id": 49521711, "comment_id": 86049228, "body": "Your if statement is evaluating an OR statement, so ++i is read first on the left of the pipes || and increments. It ignores ++j, hence why it ends up being 6 and 10..."}, {"owner": {"reputation": 4029, "user_id": 1167608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/391e005fa17a443185c198417e0aff8a?s=128&d=identicon&r=PG", "display_name": "Eric Hodonsky", "link": "https://stackoverflow.com/users/1167608/eric-hodonsky"}, "edited": false, "score": 0, "creation_date": 1522182726, "post_id": 49521711, "comment_id": 86049720, "body": "I&#39;m not sure why you&#39;re doing this, but you probably shouldn&#39;t... What&#39;s the effect you&#39;re trying to achieve here?"}], "answers": [{"tags": [], "owner": {"reputation": 211, "user_id": 9553386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957d90ec6cc06412956543a4a88703b5?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas English", "link": "https://stackoverflow.com/users/9553386/thomas-english"}, "is_accepted": false, "score": 2, "last_activity_date": 1522182062, "last_edit_date": 1522182062, "creation_date": 1522181920, "answer_id": 49521750, "question_id": 49521711, "link": "https://stackoverflow.com/questions/49521711/why-isnt-j-incremented-in-i-j/49521750#49521750", "title": "Why isn&#39;t j incremented in (++i || ++j)", "body": "<p>Your if condition uses the short-circuited Logical OR operator <code>||</code>. As the left side of the operator (<code>++i</code>) evaluates to <code>true</code>, the right side (<code>++j</code>) does not get executed.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 8, "last_activity_date": 1522184236, "last_edit_date": 1522184236, "creation_date": 1522181983, "answer_id": 49521768, "question_id": 49521711, "link": "https://stackoverflow.com/questions/49521711/why-isnt-j-incremented-in-i-j/49521768#49521768", "title": "Why isn&#39;t j incremented in (++i || ++j)", "body": "<p>The logical OR operator <code>||</code> is a <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\"><em>short circut operator</em></a>.  That means that the right operand won't be evaluated if the result can be determined by looking only at the left operand.</p>\n\n<p>Section 6.5.14 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a> regarding the Logical OR operator states the following:</p>\n\n<blockquote>\n  <p><em>4</em> Unlike the bitwise <code>|</code> operator, the <code>||</code> operator guarantees\n  left-to-right evaluation; if the second operand is evaluated, there is\n  a sequence point between the evaluations of the first and second\n  operands.  <strong>If the first operand compares unequal to 0, the second\n  operand is not evaluated.</strong></p>\n</blockquote>\n\n<p>In this case, <code>++i</code> is evaluated and the result is 6 (with the side effect of incrementing <code>i</code>.  The logical OR operator evaluates to 1 (i.e. true) if either operand is non zero.  Since the left side is non-zero, the right side is not evaluated, and subsequently <code>j</code> is not incremented.</p>\n"}, {"tags": [], "owner": {"reputation": 134, "user_id": 9413399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dbe87e2ba97927b690eef4c04ff0c9?s=128&d=identicon&r=PG&f=1", "display_name": "Kay", "link": "https://stackoverflow.com/users/9413399/kay"}, "is_accepted": false, "score": 0, "last_activity_date": 1522182112, "creation_date": 1522182112, "answer_id": 49521789, "question_id": 49521711, "link": "https://stackoverflow.com/questions/49521711/why-isnt-j-incremented-in-i-j/49521789#49521789", "title": "Why isn&#39;t j incremented in (++i || ++j)", "body": "<p>Only <code>++i</code> was executed in <code>if</code> statement because <code>++i</code> is not zero and regarded already as <code>true</code>. Because of <code>||</code> OR operation, there's no need to execute <code>++j</code>.</p>\n"}], "owner": {"reputation": 49, "user_id": 8834479, "user_type": "registered", "profile_image": "https://graph.facebook.com/707683902761105/picture?type=large", "display_name": "Biljana Icovski", "link": "https://stackoverflow.com/users/8834479/biljana-icovski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 49521768, "answer_count": 3, "score": 2, "last_activity_date": 1522184236, "creation_date": 1522181726, "last_edit_date": 1522182560, "question_id": 49521711, "link": "https://stackoverflow.com/questions/49521711/why-isnt-j-incremented-in-i-j", "title": "Why isn&#39;t j incremented in (++i || ++j)", "body": "<p>I don't understand the output of this code:</p>\n\n<pre><code> long i=5, j=10;\n if (++i || ++j)  printf(\"%ld  %ld\\n\", i, j);\n else  printf(\"Prog1\\n\");\n</code></pre>\n\n<p>The output is 6 and 10.  I expected 6 and 11.  Why wasn't <code>j</code> incremented?</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522181659, "post_id": 49521617, "comment_id": 86049152, "body": "SO is for programming questions, not problems running a program you downloaded. You should report this as a bug to the developer."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 1, "creation_date": 1522182598, "post_id": 49521617, "comment_id": 86049643, "body": "Note that the message <code>..&#47;sysdeps&#47;x86_64&#47;strlen.S: No such file or directory.</code> is coming from gdb, and has nothing to do with the segfault."}, {"owner": {"reputation": 19, "user_id": 9560048, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JDHebBTPf1Q/AAAAAAAAAAI/AAAAAAAAAA8/GOhSPCkf7Fg/photo.jpg?sz=128", "display_name": "Alexander Wentz", "link": "https://stackoverflow.com/users/9560048/alexander-wentz"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522190323, "post_id": 49521617, "comment_id": 86052884, "body": "@Barmar you are right sorry."}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 9560048, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JDHebBTPf1Q/AAAAAAAAAAI/AAAAAAAAAA8/GOhSPCkf7Fg/photo.jpg?sz=128", "display_name": "Alexander Wentz", "link": "https://stackoverflow.com/users/9560048/alexander-wentz"}, "is_accepted": false, "score": 0, "last_activity_date": 1522244347, "creation_date": 1522244347, "answer_id": 49536094, "question_id": 49521617, "link": "https://stackoverflow.com/questions/49521617/segmentation-fault-when-running-sphinx-fe-strlen-s-no-such-file/49536094#49536094", "title": "Segmentation fault when running sphinx_fe -- strlen.S: No such file", "body": "<p>The Solution is kind of simple,</p>\n\n<p>the tutorial dont mention that the wav-files should be in 16-Bit format.\n(Since audacity by default use a 32-Bit format i had to change that for my wav-files)</p>\n"}], "owner": {"reputation": 19, "user_id": 9560048, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-JDHebBTPf1Q/AAAAAAAAAAI/AAAAAAAAAA8/GOhSPCkf7Fg/photo.jpg?sz=128", "display_name": "Alexander Wentz", "link": "https://stackoverflow.com/users/9560048/alexander-wentz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522244347, "creation_date": 1522181362, "last_edit_date": 1522181618, "question_id": 49521617, "link": "https://stackoverflow.com/questions/49521617/segmentation-fault-when-running-sphinx-fe-strlen-s-no-such-file", "title": "Segmentation fault when running sphinx_fe -- strlen.S: No such file", "body": "<p>I'm following the tutorial to adapt an acoustic model - <a href=\"https://cmusphinx.github.io/wiki/tutorialadapt/\" rel=\"nofollow noreferrer\">https://cmusphinx.github.io/wiki/tutorialadapt/</a></p>\n\n<p>When i ran the command:</p>\n\n<pre><code>sphinx_fe -argfile en-us/feat.params -samprate 16000 -c arctic20.fileids -di . -do . -ei wav -eo mfc -mswav yes\n</code></pre>\n\n<p>I get a Segmentation fault (core dumped) message and the program exits. My laptop runs on Ubuntu 16.04.</p>\n\n<p>gdb output:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\nstrlen () at ../sysdeps/x86_64/strlen.S:106\n106 ../sysdeps/x86_64/strlen.S: No such file or directory.\n</code></pre>\n\n<p>and backtrace:</p>\n\n<pre><code>#0 strlen () at ../sysdeps/x86_64/strlen.S:106\n\n#1 0x00007ffff7815980 in printf_positional (s=s@entry=0x7fffffffd0d0,\nformat=format@entry=0x403fb0 \"Sample rate %.1f does not match configured\nvalue in file '%s'\\n\", readonly_format=readonly_format@entry=0, \nap=ap@entry=0x7fffffffd248,\nap_savep=ap_savep@entry=0x7fffffffcc68, done=57, nspecs_done=1,\nlead_str_end=0x403fbc \"%.1f does not match configured value in file\n'%s'\\n\",work_buffer=0x7fffffffcca0 \"@\\315\\377\\377\\377\\177\", save_errno=17,\ngrouping=0x0,thousands_sep=0x7ffff7955b25 \"\") at vfprintf.c:2023\n\n#2 0x00007ffff78164a6 in _IO_vfprintf_internal (s=s@entry=0x7fffffffd0d0,\nformat=,format@entry=0x403fb0 \"Sample rate %.1f does not match configured\nvalue in file '%s'\\n\", ap=ap@entry=0x7fffffffd248) at vfprintf.c:1677\n\n#3 0x00007ffff78df896 in ___vsnprintf_chk ( s=s@entry=0x7fffffffd260\n\"Sample rate 0.0 does not match configured value in file '\\200\\272\\367\\377\n\\177\", maxlen=, maxlen@entry=1024, flags=flags@entry=1,\nslen=slen@entry=1024,\nformat=0x403fb0 \"Sample rate %.1f does not match configured value in file   \n'%s'\\n\",\nargs=args@entry=0x7fffffffd248) at vsnprintf_chk.c:63\n\n#4 0x00007ffff7ba80e8 in vsnprintf (__ap=0x7fffffffd248, __fmt=, \n__n=1024,\n__s=0x7fffffffd260 \"Sample rate 0.0 does not match configured value in\nfile '\\200\\272\\367\\377\\177\") at /usr/include/x86_64-linux-gnu/bits/stdio2.h:77\n\n#5 err_msg (lvl=lvl@entry=ERR_ERROR, path=path@entry=0x403a09\n\"sphinx_fe.c\", ln=137,\nfmt=) at err.c:96\n\n#6 0x00000000004023a7 in detect_riff (wtf=0x60a080) at sphinx_fe.c:137\n\n#7 0x00000000004035bc in detect_audio_type (wtf=0x60a080) at\nsphinx_fe.c:750\n\n#8 sphinx_wave2feat_convert_file (wtf=wtf@entry=0x60a080, infile=,\noutfile=0x61ecc0 \"./arctic_0001.mfc\") at sphinx_fe.c:792\n\n#9 0x0000000000401a14 in run_control_file (ctlfile=, wtf=0x60a080)\nat sphinx_fe.c:992\n\n#10 main (argc=, argv=) at sphinx_fe.c:1032\n</code></pre>\n\n<p>Anyone has a sugestion for me how to fix it?  </p>\n"}, {"tags": ["c", "c99"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1522181409, "post_id": 49521611, "comment_id": 86049038, "body": "No............."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 3, "creation_date": 1522181496, "post_id": 49521611, "comment_id": 86049073, "body": "Why would you need it? This is trivial to write."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1522181587, "post_id": 49521611, "comment_id": 86049122, "body": "@DeiDei perhaps not trivial to write optimally!  There are standard functions for <i>sort</i> and <i>binary search</i> so it seems like a reasonable question"}, {"owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "edited": false, "score": 1, "creation_date": 1522181607, "post_id": 49521611, "comment_id": 86049125, "body": "This is kinda the difference between Python and C philosophy. I understand where OP is coming from. Using a well-optimized and debugged library function or a home-crafted buggy sub-optimal algorithm? :)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1522181746, "post_id": 49521611, "comment_id": 86049184, "body": "You can sort the array using the comparison function, then get the first and last elements of the result."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1522181800, "post_id": 49521611, "comment_id": 86049209, "body": "@Barmar You could, but a linear search would be faster."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1522185121, "post_id": 49521611, "comment_id": 86050855, "body": "The answer is indeed &quot;no&quot;. What <i>you</i> could do is write one as an answer, then self-accept it and get lots of reputation :D"}, {"owner": {"reputation": 119, "user_id": 8658775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c232b0fe87361b4c32eb5c0dcc269e4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Meltzer", "link": "https://stackoverflow.com/users/8658775/daniel-meltzer"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522187663, "post_id": 49521611, "comment_id": 86051933, "body": "@Barmar,this is not very good because the complexity of sort is bounded by Omega(nlog(n)) where as you can very simply get minimum in O(n)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522187784, "post_id": 49521611, "comment_id": 86051988, "body": "@DanielMeltzer dbush already said that. But <a href=\"http://c2.com/cgi/wiki?PrematureOptimization\" rel=\"nofollow noreferrer\">Premature optimization is the root of all evil</a>"}, {"owner": {"reputation": 387, "user_id": 161934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d1aa6c3ac6d9c05b99eab0429fda4f?s=128&d=identicon&r=PG", "display_name": "undercat applauds Monica", "link": "https://stackoverflow.com/users/161934/undercat-applauds-monica"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1522235904, "post_id": 49521611, "comment_id": 86072370, "body": "@M.M The performance of the built-in quick sort function is <a href=\"http://theory.stanford.edu/~amitp/rants/c++-vs-c/\" rel=\"nofollow noreferrer\">far from optimal</a> since everything is passed by way of pointers and barely any inlining is possible. If computational efficiency is of any concern to you, you&#39;ll actually want to give the libc builtin a wide berth. (I want to make clear though that I agree with your main point that the question makes total sense. Just wanted to point out this little detail)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 387, "user_id": 161934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d1aa6c3ac6d9c05b99eab0429fda4f?s=128&d=identicon&r=PG", "display_name": "undercat applauds Monica", "link": "https://stackoverflow.com/users/161934/undercat-applauds-monica"}, "edited": false, "score": 0, "creation_date": 1522267789, "post_id": 49521611, "comment_id": 86094189, "body": "@undercat yeah that is the point I am making, the standard library doesn&#39;t have a bunch of algorithms  because it&#39;s nigh impossible to make versions that are both standard and optimal"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1523177922, "post_id": 49521611, "comment_id": 86445331, "body": "@DeiDei: <code>strlen()</code> and <code>strcpy()</code> are even more trivial, yet they exist in the standard library."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1523178727, "post_id": 49521611, "comment_id": 86445545, "body": "@MichaelBurr I&#39;d hardly call the highly optimized implementation by most standard library vendors to be trivial."}], "answers": [{"comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1523138776, "post_id": 49712381, "comment_id": 86438357, "body": "A copy/paste error in <code>get_max()</code>: change <code>compare(object,minObject)&gt;0</code> to <code>compare(object,maxObject)&gt;0</code>"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1523138949, "post_id": 49712381, "comment_id": 86438386, "body": "I believe that there is also a logic error in the <code>i&lt;size</code> test of the <code>for</code> loops."}, {"owner": {"reputation": 23625, "user_id": 2868801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ec5567811049b7ce8192be0bc0246d1?s=128&d=identicon&r=PG&f=1", "display_name": "dave_thompson_085", "link": "https://stackoverflow.com/users/2868801/dave-thompson-085"}, "edited": false, "score": 1, "creation_date": 1523143916, "post_id": 49712381, "comment_id": 86439374, "body": "You&#39;re using i as byte offset instead of subscript, so it should start at elementSize not 1."}], "tags": [], "owner": {"reputation": 119, "user_id": 8658775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c232b0fe87361b4c32eb5c0dcc269e4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Meltzer", "link": "https://stackoverflow.com/users/8658775/daniel-meltzer"}, "is_accepted": true, "score": 0, "last_activity_date": 1523186654, "last_edit_date": 1523186654, "creation_date": 1523138545, "answer_id": 49712381, "question_id": 49521611, "link": "https://stackoverflow.com/questions/49521611/c-minimum-maximum-function/49712381#49712381", "title": "C minimum/maximum function", "body": "<p>So it seems there is not such standard function, so here is my solution:<br><br><h3>\nFor minimum:\n</h3></p>\n\n<pre><code> void* get_min(void* start,size_t size,size_t elementSize,int (*compare)(const void *, const void*))\n    {\n        char* minObject = start;\n        for(int i = elementSize;i&lt;size*elementSize;i+=elementSize){\n            char* object = start+i;\n            if(compare(object,minObject)&lt;0){\n                minObject = object;\n            }\n        }\n        return minObject;\n    }\n</code></pre>\n\n<p><br></p>\n\n<h3>and for maximum:</h3>\n\n<pre><code>void* get_max(void* start,size_t size,size_t elementSize,int (*compare)(const void *, const void*))\n{\n    char* maxObject = start;\n    for(int i = elementSize;i&lt;elementSize*size;i+=elementSize){\n        char* object = start+i;\n        if(compare(object,maxObject)&gt;0){\n            maxObject = object;\n        }\n    }\n    return maxObject;\n}\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 8658775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c232b0fe87361b4c32eb5c0dcc269e4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Meltzer", "link": "https://stackoverflow.com/users/8658775/daniel-meltzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2460, "favorite_count": 0, "accepted_answer_id": 49712381, "answer_count": 1, "score": 0, "last_activity_date": 1523186654, "creation_date": 1522181343, "last_edit_date": 1522870308, "question_id": 49521611, "link": "https://stackoverflow.com/questions/49521611/c-minimum-maximum-function", "title": "C minimum/maximum function", "body": "<p>Is there a <strong>standard function</strong> in C99 to get <strong>minimum/maximum</strong> element in a given array using a given compare function. <strong>Similar to that:</strong><br></p>\n\n<pre><code>void* get_min(void* start,size_t size,size_t elementSize,int (*compare)(const void *, const void*))\n</code></pre>\n\n<p><br></p>\n"}, {"tags": ["c", "windows", "symlink", "mingw-w64"], "comments": [{"owner": {"reputation": 638, "user_id": 4262207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iHUQgHLj_t0/AAAAAAAAAAI/AAAAAAAAACM/nE_ak8mRoJE/photo.jpg?sz=128", "display_name": "lolololol ol", "link": "https://stackoverflow.com/users/4262207/lolololol-ol"}, "edited": false, "score": 0, "creation_date": 1522183058, "post_id": 49521606, "comment_id": 86049886, "body": "What is the return value of <code>rename</code> after you execute the above?"}, {"owner": {"reputation": 37, "user_id": 9519333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beb284e51e0dfe7c965651f4233e1f69?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/9519333/vishal"}, "reply_to_user": {"reputation": 638, "user_id": 4262207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iHUQgHLj_t0/AAAAAAAAAAI/AAAAAAAAACM/nE_ak8mRoJE/photo.jpg?sz=128", "display_name": "lolololol ol", "link": "https://stackoverflow.com/users/4262207/lolololol-ol"}, "edited": false, "score": 0, "creation_date": 1522184404, "post_id": 49521606, "comment_id": 86050529, "body": "return value of <code>rename</code> is 0"}, {"owner": {"reputation": 638, "user_id": 4262207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iHUQgHLj_t0/AAAAAAAAAAI/AAAAAAAAACM/nE_ak8mRoJE/photo.jpg?sz=128", "display_name": "lolololol ol", "link": "https://stackoverflow.com/users/4262207/lolololol-ol"}, "edited": false, "score": 0, "creation_date": 1522188226, "post_id": 49521606, "comment_id": 86052165, "body": "So the symlink <code>K:\\ab\\a.txt</code> still exists after you call <code>rename</code> and you expected <code>abc.txt</code> to be a <code>symlink</code> instead of a <code>file</code>?  You didn&#39;t have a file named <code>K:\\\\ab\\\\a.txt</code>, did you?"}, {"owner": {"reputation": 37, "user_id": 9519333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beb284e51e0dfe7c965651f4233e1f69?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/9519333/vishal"}, "reply_to_user": {"reputation": 638, "user_id": 4262207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iHUQgHLj_t0/AAAAAAAAAAI/AAAAAAAAACM/nE_ak8mRoJE/photo.jpg?sz=128", "display_name": "lolololol ol", "link": "https://stackoverflow.com/users/4262207/lolololol-ol"}, "edited": false, "score": 0, "creation_date": 1522239572, "post_id": 49521606, "comment_id": 86074963, "body": "Exactly. And no i don&#39;t have any file named  K:\\\\ab\\\\a.txt. There is only a symlink there"}], "owner": {"reputation": 37, "user_id": 9519333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beb284e51e0dfe7c965651f4233e1f69?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/9519333/vishal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522181319, "creation_date": 1522181319, "question_id": 49521606, "link": "https://stackoverflow.com/questions/49521606/why-cant-i-rename-a-symlink-using-rename-in-c", "title": "Why can&#39;t i rename a symlink using rename() in c?", "body": "<p>I have created a symlink using mklink command. I am linking a .txt file to a .exe file. But whenever i try to rename the symlink using rename() in c, the file is not renamed and also the .exe file it is linked to gets deleted. </p>\n\n<p>Here is the command i am using - </p>\n\n<pre><code>mklink K:\\ab\\a.txt C:\\call.exe\n</code></pre>\n\n<p>Here is the rename command i am using in my c program - </p>\n\n<pre><code>rename(\"K:\\\\ab\\\\a.txt\",\"K:\\\\ab\\\\abc.txt\");\n</code></pre>\n\n<p>Whenever the c program with rename command is executed, call.exe is deleted and also the symlink is not renamed instead a new file abc.txt is generated.</p>\n"}, {"tags": ["c", "pointers", "malloc"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522179933, "post_id": 49521188, "comment_id": 86048282, "body": "I get <code>1</code> and <code>2</code> that&#39;s expected. You may want to parenthesise here <code>ptr2 = &amp;(ptr[1]);</code> to avoid precedence issues. But it works. What&#39;s your output?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522179964, "post_id": 49521188, "comment_id": 86048306, "body": "oh: pointer arithmetic..."}, {"owner": {"reputation": 161, "user_id": 8683203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf12e82e1f116cd74d623155ff728eaa?s=128&d=identicon&r=PG&f=1", "display_name": "RagingStormlight", "link": "https://stackoverflow.com/users/8683203/ragingstormlight"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522179966, "post_id": 49521188, "comment_id": 86048308, "body": "I am also getting 1 and 2 but theoretically I think it should be 4 and 2 as explained above"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522179989, "post_id": 49521188, "comment_id": 86048319, "body": "this is a duplicate, there&#39;s no doubt"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1522180030, "post_id": 49521188, "comment_id": 86048347, "body": "Pointers have a type: subtracting pointers gives you the distance between them <i>in terms of that type</i>. Since these are int pointers, the &quot;1&quot; is telling you that those pointers are 1 int apart, which is probably 4 bytes on most platforms. Maybe 8."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522180038, "post_id": 49521188, "comment_id": 86048356, "body": "How does the result you <b>get</b> contradict what your C book states about pointer arithmetic?"}, {"owner": {"reputation": 161, "user_id": 8683203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf12e82e1f116cd74d623155ff728eaa?s=128&d=identicon&r=PG&f=1", "display_name": "RagingStormlight", "link": "https://stackoverflow.com/users/8683203/ragingstormlight"}, "reply_to_user": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1522180292, "post_id": 49521188, "comment_id": 86048473, "body": "@LeeDanielCrocker: Okay, I get it. But what if they have different datatypes?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522180356, "post_id": 49521188, "comment_id": 86048513, "body": "blaaaatant dupe ... of dupe of dupe of dupe..."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1522180386, "post_id": 49521188, "comment_id": 86048527, "body": "If they have different data types, the compiler won&#39;t let you subtract them."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 8683203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf12e82e1f116cd74d623155ff728eaa?s=128&d=identicon&r=PG&f=1", "display_name": "RagingStormlight", "link": "https://stackoverflow.com/users/8683203/ragingstormlight"}, "edited": false, "score": 0, "creation_date": 1522180114, "post_id": 49521251, "comment_id": 86048386, "body": "But I am allocating memory worth 8 bytes. ptr2 should point to index 4, right? There is a 4 byte difference between index 4 and index 0."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 161, "user_id": 8683203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf12e82e1f116cd74d623155ff728eaa?s=128&d=identicon&r=PG&f=1", "display_name": "RagingStormlight", "link": "https://stackoverflow.com/users/8683203/ragingstormlight"}, "edited": false, "score": 1, "creation_date": 1522180281, "post_id": 49521251, "comment_id": 86048466, "body": "@CodeChef123  The byte index is irrelevant.  Even though the pointers may in fact be 4 bytes apart, if an <code>int</code> is 4 bytes in size that means that the pointers are 1 <code>int</code> apart, which is what the result is.  If you had casted those pointers to <code>char *</code>, then you would see a different results because a <code>char</code> is a different size from an <code>int</code>."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1522180636, "last_edit_date": 1522180636, "creation_date": 1522179948, "answer_id": 49521251, "question_id": 49521188, "link": "https://stackoverflow.com/questions/49521188/output-after-subtracting-pointers/49521251#49521251", "title": "Output after subtracting pointers", "body": "<p>When you subtract two pointers, the result is not difference between the numerical values but the difference in the number of <em>elements</em>.</p>\n\n<p>Since <code>ptr</code> points to the first element of an array and <code>ptr2</code> points to the second element, there is a one element difference between the two, and that is the result.</p>\n\n<p>Section 6.5.6 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a> regarding Additive Operators states the following:</p>\n\n<blockquote>\n  <p><em>9</em> When two pointers are subtracted, both shall point to elements of the same array object, or one past the last element of the array\n  object; <strong>the result is the difference of the subscripts of the two\n  array elements.</strong> </p>\n</blockquote>\n\n<p>If you want to see the byte difference between the addresses, you can cast the pointers to <code>char *</code>:</p>\n\n<pre><code>char *p1 = (char *)ptr;\nchar *p2 = (char *)ptr2;\nprintf(\"%td\\n\", p2 - p1);\n</code></pre>\n"}], "owner": {"reputation": 161, "user_id": 8683203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf12e82e1f116cd74d623155ff728eaa?s=128&d=identicon&r=PG&f=1", "display_name": "RagingStormlight", "link": "https://stackoverflow.com/users/8683203/ragingstormlight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1522180049, "accepted_answer_id": 49521251, "answer_count": 1, "score": 1, "last_activity_date": 1522180636, "creation_date": 1522179689, "last_edit_date": 1522179882, "question_id": 49521188, "link": "https://stackoverflow.com/questions/49521188/output-after-subtracting-pointers", "closed_reason": "Duplicate", "title": "Output after subtracting pointers", "body": "<p>Basically when I run this as it is it prints 1 and 2.\nFirst of all, ptr2 - ptr should be 4 as I see the pointers pointing to something like this, where each | | represents one byte:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>|0|0|0|0| 0|0|1|0|\nptr..........ptr2\n</code></pre>\n\n<p>When we subtract pointers we subtract the addresses they point to, right? So I would expect 4 to be printed and then 2, since the memory has been allocated continuously.</p>\n\n<p>Of course this is not the actual output. So where is my thinking incorrect?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) \n{\n    int *ptr;\n    ptr = (int *)malloc(2*sizeof(int));\n\n    int *ptr2;\n\n    ptr2 = &amp;ptr[1];\n\n    printf(\"%d\\n\", ptr2 - ptr);\n\n    ptr[1] = 2;\n    printf(\"%d\", ptr2[0]);\n\n    free(ptr);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list", "xor"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522179268, "post_id": 49520948, "comment_id": 86047928, "body": "@Jean-Fran&#231;oisFabre <a href=\"https://stackoverflow.com/questions/16138998/how-exactly-does-a-xor-linked-list-work\" title=\"how exactly does a xor linked list work\">stackoverflow.com/questions/16138998/&hellip;</a>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522179566, "post_id": 49520948, "comment_id": 86048086, "body": "okay... learning something tonight. Well, it&#39;s still a very vague question."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1522181872, "post_id": 49520948, "comment_id": 86049239, "body": "Your compiler should be generating a ton of warnings when you compile this code. What do those warnings say?"}, {"owner": {"reputation": 19, "user_id": 7153674, "user_type": "registered", "profile_image": "https://graph.facebook.com/1072831586147917/picture?type=large", "display_name": "S&#238;rb Sebastian", "link": "https://stackoverflow.com/users/7153674/s%c3%aerb-sebastian"}, "edited": false, "score": 0, "creation_date": 1522182983, "post_id": 49520948, "comment_id": 86049854, "body": "The only warning is expected &#39;struct xlist &#39; but argument is of type &#39;struct xlist *&#39;"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1522183748, "post_id": 49520948, "comment_id": 86050222, "body": "Yup, and you need to fix that before your code even has a chance of working. The other place you should get a warning is the <code>XOR</code> function. There&#39;s no guarantee that <code>unsigned int</code> is the same size as a pointer, and the <code>XOR</code> function won&#39;t work correctly unless they are. You can use <code>uintptr_t</code> from <code>&lt;stdint.h&gt;</code>, or the code should verify that <code>sizeof(unsigned int) == sizeof(xlist *)</code> at the beginning. That&#39;s one of the reasons <b>not</b> to use xor lists. You&#39;re doing stuff with pointers that you really shouldn&#39;t."}, {"owner": {"reputation": 19, "user_id": 7153674, "user_type": "registered", "profile_image": "https://graph.facebook.com/1072831586147917/picture?type=large", "display_name": "S&#238;rb Sebastian", "link": "https://stackoverflow.com/users/7153674/s%c3%aerb-sebastian"}, "edited": false, "score": 0, "creation_date": 1522184289, "post_id": 49520948, "comment_id": 86050467, "body": "yes, i know, xor list is very complicated and others, but i have a project for school and i need to implements this,but other things like insert first and last work"}], "owner": {"reputation": 19, "user_id": 7153674, "user_type": "registered", "profile_image": "https://graph.facebook.com/1072831586147917/picture?type=large", "display_name": "S&#238;rb Sebastian", "link": "https://stackoverflow.com/users/7153674/s%c3%aerb-sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522178611, "creation_date": 1522178611, "question_id": 49520948, "link": "https://stackoverflow.com/questions/49520948/insert-after-key-xor-linked-list", "title": "Insert after key xor linked list", "body": "<p>i need to implement insert after key in a xor linked list but i have a problem and i can't find any solution the insert doesn't work well but insert first works fine.</p>\n\n<p>Example:</p>\n\n<p>list=1 2 3 4 5</p>\n\n<p>insertafk(list,2,99)</p>\n\n<p>result=1,2,99, and some random values not 3,4,5,the insert works but i dont have the proper elements after the new key, i have random elements</p>\n\n<p>xorlist.h</p>\n\n<pre><code>typedef struct nodetype4\n{\n    int key;\n    struct nodetype4* np;\n}XorNode;\n\ntypedef struct\n{\n    XorNode* first;\n    XorNode* last;\n}xlist;\n\nXorNode* XOR(XorNode* a, XorNode* b);\nvoid initXor(xlist* x);\nvoid insertf(xlist* x,int k);\nvoid afisxor(xlist* x);\nvoid insertafk(xlist* x,int akey,int k);\n</code></pre>\n\n<p>xorlist.c</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n #include &lt;stdlib.h&gt;\n #include \"xorlist.h\"\n\nXorNode* XOR(XorNode* a, XorNode* b)\n{\n    return (XorNode*)((unsigned int)a ^ (unsigned int)b);\n}\nvoid initXor(xlist* x)\n{\n    x-&gt;first=NULL;\n    x-&gt;last=NULL;\n}\nvoid insertf(xlist* x,int k)\n{\n    XorNode* p=malloc(sizeof(XorNode));\n    XorNode* fnext;\n    p-&gt;key=k;\n    if(x-&gt;first==NULL)\n    {\n        p-&gt;np=NULL;\n        x-&gt;first=p;\n        x-&gt;last=p;\n    }\n    else\n    {\n        p-&gt;np=XOR(x-&gt;first,NULL);\n        fnext=XOR(x-&gt;first-&gt;np,NULL);\n        (x-&gt;first)-&gt;np=XOR(p,fnext);\n        x-&gt;first=p;\n    }\n\n}\n\nvoid insertafk(xlist* x,int akey,int k)\n{\n    XorNode* p=malloc(sizeof(XorNode));\n    p-&gt;key=k;\n\n    XorNode* curr;\n    curr=x-&gt;first;\n    XorNode* prev=NULL;\n    XorNode* next=XOR(NULL,curr-&gt;np);\n\n    //Cautam nodul cu cheia akey\n    while(curr!=NULL)\n    {\n        if(curr-&gt;key==akey)\n            break;\n        prev=curr;\n        curr=next;\n        next=XOR(curr-&gt;np,prev);\n\n    }\n\n    //Inserare cheie dupa nodul gasit\n    if(curr==NULL)\n        printf(\"Nu s-a gasit cheia\");\n    else\n    {\n        p-&gt;np=XOR(curr,next);\n        curr-&gt;np=XOR(prev,p);\n        next-&gt;np=XOR(p,curr);\n\n    }\n}\n//print list\nvoid afisxor(xlist* x)\n{\n    XorNode* curr;\n    XorNode* prev;\n    XorNode* next;\n    curr=x-&gt;first;\n    prev=NULL;\n    while(curr!=NULL)\n    {\n        printf(\"%d \",curr-&gt;key);\n        next=XOR(curr-&gt;np,prev);\n        prev=curr;\n        curr=next;\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"xorlist.h\"\n\nint main()\n{\n\n    printf(\"For xor list:\\n\");\n    xlist* x;\n    initXor(&amp;x);\n    insertf(&amp;x,1);\n    insertf(&amp;x,2);\n    insertf(&amp;x,3);\n    insertl(&amp;x,10);\n    insertl(&amp;x,13);\n    afisxor(&amp;x);\n    insertafk(&amp;x,2,20);\n    afisxor(&amp;x);\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/FBEah.png\" rel=\"nofollow noreferrer\">the result after insert</a></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 2, "creation_date": 1522177451, "post_id": 49520567, "comment_id": 86046883, "body": "Create the pipe before you fork. Pipes are more logically thought of as unidirectional channels, so one side closes the read end of the pipe, the other side closes the write end. If you need a bidirectional channel, use a socket pair instead."}], "answers": [{"comments": [{"owner": {"reputation": 42, "user_id": 9560200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7623197e1a66834a080dbf08ab872117?s=128&d=identicon&r=PG&f=1", "display_name": "nanobot", "link": "https://stackoverflow.com/users/9560200/nanobot"}, "edited": false, "score": 0, "creation_date": 1522177550, "post_id": 49520618, "comment_id": 86046948, "body": "Pls correct me if Im wrong. If I create the pipe after the fork() I can&#39;t use the pipes to communicate between the two processes."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 42, "user_id": 9560200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7623197e1a66834a080dbf08ab872117?s=128&d=identicon&r=PG&f=1", "display_name": "nanobot", "link": "https://stackoverflow.com/users/9560200/nanobot"}, "edited": false, "score": 0, "creation_date": 1522177591, "post_id": 49520618, "comment_id": 86046967, "body": "@QickdmGdombu That&#39;s right, you can&#39;t. There are two pipes that are not shared between the processes in any way."}], "tags": [], "owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "is_accepted": true, "score": 6, "last_activity_date": 1522177929, "last_edit_date": 1522177929, "creation_date": 1522177447, "answer_id": 49520618, "question_id": 49520567, "link": "https://stackoverflow.com/questions/49520567/what-exactly-happens-when-you-create-a-pipe-after-a-fork-command/49520618#49520618", "title": "What exactly happens when you create a pipe after a fork() command?", "body": "<p>If you create a pipe after a <code>fork()</code>, in both the child and parent process, you have two pipes - one in the child and one in the parent. Each process owns both ends of its respective pipe. Neither pipe is attached to both the child and parent process, and neither process will be able to communicate with the other via the pipe that it owns.</p>\n\n<p>If you create a pipe before a <code>fork()</code>, there is one pipe, and each process (parent and child) will have a file descriptor referring to each end of the pipe (because the child naturally inherits the file descriptors of the parent). In this situation the processes can communicate by writing to / reading from alternate ends of the pipe.</p>\n\n<p>It is usual practice, if you want to create a pipe to communicate between a child and parent process, to create the pipe before the fork, and close one (different) end of the pipe in each process. Since pipes are generally unidirectional, this allows one-way communication between the processes. You can use a socket instead (via <code>socketpair</code>), or create two pipes (before forking), if you want bi-directional communication.</p>\n"}], "owner": {"reputation": 42, "user_id": 9560200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7623197e1a66834a080dbf08ab872117?s=128&d=identicon&r=PG&f=1", "display_name": "nanobot", "link": "https://stackoverflow.com/users/9560200/nanobot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1119, "favorite_count": 0, "accepted_answer_id": 49520618, "answer_count": 1, "score": 2, "last_activity_date": 1522177929, "creation_date": 1522177254, "question_id": 49520567, "link": "https://stackoverflow.com/questions/49520567/what-exactly-happens-when-you-create-a-pipe-after-a-fork-command", "title": "What exactly happens when you create a pipe after a fork() command?", "body": "<p>Do you have two pipes then? And when the parent process writes something into the pipe can the child process read it?</p>\n\n<p>What will be the difference if you create a pipe before the fork?</p>\n\n<p>When I tryed it out it just messed up with my data I wantet to transfer from child to parent and I got some crzy symbols instead of an integer.</p>\n"}, {"tags": ["java", "c", "algorithm", "hash", "key"], "comments": [{"owner": {"reputation": 4122, "user_id": 1696314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdda259dd2fae6f51e12d85da65e3b9f?s=128&d=identicon&r=PG", "display_name": "NickL", "link": "https://stackoverflow.com/users/1696314/nickl"}, "edited": false, "score": 0, "creation_date": 1522177204, "post_id": 49520469, "comment_id": 86046723, "body": "Have you tried to google &quot;sha1 Java&quot;?"}, {"owner": {"reputation": 2907, "user_id": 3019006, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/qodt7.jpg?s=128&g=1", "display_name": "Deb", "link": "https://stackoverflow.com/users/3019006/deb"}, "reply_to_user": {"reputation": 4122, "user_id": 1696314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdda259dd2fae6f51e12d85da65e3b9f?s=128&d=identicon&r=PG", "display_name": "NickL", "link": "https://stackoverflow.com/users/1696314/nickl"}, "edited": false, "score": 0, "creation_date": 1522187410, "post_id": 49520469, "comment_id": 86051847, "body": "Yes. And for java, there are different ways of doing it. Thats why I doubt whether the key will match with the key generated in C. Because it accepts prameter like length."}], "owner": {"reputation": 2907, "user_id": 3019006, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/qodt7.jpg?s=128&g=1", "display_name": "Deb", "link": "https://stackoverflow.com/users/3019006/deb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "closed_date": 1522177299, "answer_count": 0, "score": 0, "last_activity_date": 1522176878, "creation_date": 1522176878, "question_id": 49520469, "link": "https://stackoverflow.com/questions/49520469/how-to-create-sha1-key-in-java-to-match-sha1-key-generated-in-c", "closed_reason": "Duplicate", "title": "How to create SHA1 key in Java, to match SHA1 key generated in C", "body": "<p>For Generating SHA1 key in C, I can use :</p>\n\n<pre><code>// The data to be hashed\nchar data[] = \"Hello, world!\";\nsize_t length = sizeof(data);\n\nunsigned char hash[SHA_DIGEST_LENGTH];\nSHA1(data, length, hash);\n// hash now contains the 20-byte SHA-1 hash \n</code></pre>\n\n<p>As described here : <a href=\"https://stackoverflow.com/a/9284520/3019006\">https://stackoverflow.com/a/9284520/3019006</a></p>\n\n<p>I want to generate the same key in Java, so that the two keys match if same data is fed. What should I use?</p>\n"}, {"tags": ["c", "function", "linked-list", "segmentation-fault"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1522176752, "post_id": 49520389, "comment_id": 86046442, "body": "The bug is probably elsewhere in your code.  Try running it through <a href=\"http://valgrind.org\" rel=\"nofollow noreferrer\">valgrind</a>.  If you&#39;re stepping on memory you shouldn&#39;t be, it will tell you."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1522176821, "post_id": 49520389, "comment_id": 86046483, "body": "We need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 811, "user_id": 9493582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfI3b.jpg?s=128&g=1", "display_name": "Arndt Jonasson", "link": "https://stackoverflow.com/users/9493582/arndt-jonasson"}, "edited": false, "score": 0, "creation_date": 1522177398, "post_id": 49520389, "comment_id": 86046856, "body": "If you are in the debugger, then use it. Print the value of <code>first</code>, and of <code>V</code>."}, {"owner": {"reputation": 13, "user_id": 9560110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ce6189afba8fed224167ee03ce30e9f?s=128&d=identicon&r=PG&f=1", "display_name": "truenotwrong", "link": "https://stackoverflow.com/users/9560110/truenotwrong"}, "edited": false, "score": 0, "creation_date": 1522178397, "post_id": 49520389, "comment_id": 86047456, "body": "I have added the minimal."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1522178708, "post_id": 49520389, "comment_id": 86047627, "body": "You need to learn about objects and pointers. And format your code properly."}, {"owner": {"reputation": 723, "user_id": 856928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fcc54aefdeca3c2e05e0df815a6b392?s=128&d=identicon&r=PG", "display_name": "Jonathon", "link": "https://stackoverflow.com/users/856928/jonathon"}, "edited": false, "score": 0, "creation_date": 1522179010, "post_id": 49520389, "comment_id": 86047802, "body": "Your example doesn&#39;t show how you&#39;re calling <code>gen_list</code>"}, {"owner": {"reputation": 13, "user_id": 9560110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ce6189afba8fed224167ee03ce30e9f?s=128&d=identicon&r=PG&f=1", "display_name": "truenotwrong", "link": "https://stackoverflow.com/users/9560110/truenotwrong"}, "reply_to_user": {"reputation": 723, "user_id": 856928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fcc54aefdeca3c2e05e0df815a6b392?s=128&d=identicon&r=PG", "display_name": "Jonathon", "link": "https://stackoverflow.com/users/856928/jonathon"}, "edited": false, "score": 0, "creation_date": 1522182040, "post_id": 49520389, "comment_id": 86049337, "body": "@Jonathon i called it with first = gen_list(v, n, first); , but that is not the problem, as you can see i have reacreated the problem with simpler code."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9560110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ce6189afba8fed224167ee03ce30e9f?s=128&d=identicon&r=PG&f=1", "display_name": "truenotwrong", "link": "https://stackoverflow.com/users/9560110/truenotwrong"}, "edited": false, "score": 0, "creation_date": 1522182978, "post_id": 49521819, "comment_id": 86049848, "body": "Thank you, this was the problem, i have now allocated memory for the pointers and everything works fine !"}], "tags": [], "owner": {"reputation": 282, "user_id": 2682019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f203201a9a32157621a153359f29ffd5?s=128&d=identicon&r=PG&f=1", "display_name": "Jonnathan Q", "link": "https://stackoverflow.com/users/2682019/jonnathan-q"}, "is_accepted": true, "score": 1, "last_activity_date": 1522182234, "creation_date": 1522182234, "answer_id": 49521819, "question_id": 49520389, "link": "https://stackoverflow.com/questions/49520389/segmentation-fault-in-c-while-creating-linked-list-from-array/49521819#49521819", "title": "Segmentation fault in C while creating linked list from array", "body": "<p>Segmentation fault usually occurs when there is a bad pointer manipulation, for example in your sample code:</p>\n\n<pre><code>typedef struct Popis {\n  float x;\n  struct Popis *next;\n} P;\nP *first;\n\nint main(){\n  float v[10];\n  v[0] = 1;\n  first-&gt;x = v[0];\n}\n</code></pre>\n\n<p>Take a look at the variable <strong>*first</strong>, is a pointer to a Popis struct, now in <strong>main</strong> function your trying to use <strong>*first</strong> pointer, but you need to allocate a memory space in order to use it. If you allocate  memory before usage with the following code, segmentation fault error will not occur.</p>\n\n<pre><code>first = (P*)malloc(sizeof(P));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 8245017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUl9I.jpg?s=128&g=1", "display_name": "Iliya Iliev", "link": "https://stackoverflow.com/users/8245017/iliya-iliev"}, "is_accepted": false, "score": 0, "last_activity_date": 1522183836, "creation_date": 1522183836, "answer_id": 49522184, "question_id": 49520389, "link": "https://stackoverflow.com/questions/49520389/segmentation-fault-in-c-while-creating-linked-list-from-array/49522184#49522184", "title": "Segmentation fault in C while creating linked list from array", "body": "<p>The issue is most probably due to the lack of allocated memory. In the \" minimal amount of code needed \" code snippet there is no memory allocated for your structure and that is the reason why the process is killed. The kernel returns SIGSEGV signal since you attempt to write on memory which has not been allocated (requested) by your program. To solve that you can simply allocate memory by using <code>malloc();</code> I hope that the code below would help you to solve the issue:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct Popis {\n    float x;\n    struct Popis *next;\n}P;\n\nint main(){\n\n    P *first;\n    /*Here we actually create the structure in the memory - we allocate memory for it*/\n    first = (struct Popis*)malloc(sizeof(struct Popis));\n    /*This is a simple check if the memory allocation was sucessfull*/\n    if(!first) \n    {\n        fprintf(stderr, \"Error has occured during the memory allocation!\\n\");\n        exit(1);\n    }\n\n    float v[10];\n    v[0] = 1;\n    first-&gt;x = v[0];\n    printf(\"%f\", first-&gt;x);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9560110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ce6189afba8fed224167ee03ce30e9f?s=128&d=identicon&r=PG&f=1", "display_name": "truenotwrong", "link": "https://stackoverflow.com/users/9560110/truenotwrong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 49521819, "answer_count": 2, "score": 1, "last_activity_date": 1522183836, "creation_date": 1522176585, "last_edit_date": 1522178383, "question_id": 49520389, "link": "https://stackoverflow.com/questions/49520389/segmentation-fault-in-c-while-creating-linked-list-from-array", "title": "Segmentation fault in C while creating linked list from array", "body": "<p>Like I said in the title, I am trying to generate a <strong>linked list</strong> from an <strong>array</strong>. <strong>P</strong> is a <strong>structure</strong> containing <strong>float x</strong> and a <strong>pointer</strong> to the next element in the list. As soon as the <strong>gen_list</strong> function is called, the first line of code \"first->x = V[0]\" returns a segmentation fault, this is what I got from the debugger:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.                                                                 \n0x00000000004007f6 in gen_list (V=0x602010, n=10000, first=0x601068 &lt;first&gt;)                                          \n    at main.c:46                                                                                                     \n46              (*first)-&gt;x = V[0];                                                                                   \n(gdb)\n</code></pre>\n\n<p>I can't seem to find the problem, please help !!</p>\n\n<p>Here is minimal amount of code needed to recreate the error:</p>\n\n<pre><code>typedef struct Popis {\nfloat x;\nstruct Popis *next;}P;\nP *first;\n\nint main(){\nfloat v[10];\nv[0] = 1;\nfirst-&gt;x = v[0];\n}\n</code></pre>\n\n<p>My code : </p>\n\n<pre><code>P* gen_list(float V[], int n, P *first) {\nfirst-&gt;x = V[0];\nP *T = NULL;\nP *new = NULL;\nT = first;\n\nt1 = clock();\nfor (int i = 1; i &lt; n; i++) {\n    new-&gt;x = V[i];\n    T-&gt;next = new;\n    T = new;\n}\nT-&gt;next = NULL;\nt2 = clock();\nprintf(\"\\nTime for creation of linked list is: %dms\", t2 - t1);\nreturn first;}\n</code></pre>\n"}, {"tags": ["c", "pointers", "struct"], "comments": [{"owner": {"reputation": 41, "user_id": 8954265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc0204e0f7ec399e7a36d4bee9b6d8a5?s=128&d=identicon&r=PG&f=1", "display_name": "truvaking", "link": "https://stackoverflow.com/users/8954265/truvaking"}, "edited": false, "score": 0, "creation_date": 1522176591, "post_id": 49520351, "comment_id": 86046343, "body": "Solved by replacing <code>(*list).head = (*list).head.next</code> with <code>(*list).head = (*tmp).next</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1522176610, "post_id": 49520351, "comment_id": 86046357, "body": "Besides the build error (which is simple, what is the type of <code>(*list).head</code> (or <code>list-&gt;head</code>)?) you also have some possible undefined behaviors while dereferencing potential uninitialized or null pointers."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8954265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc0204e0f7ec399e7a36d4bee9b6d8a5?s=128&d=identicon&r=PG&f=1", "display_name": "truvaking", "link": "https://stackoverflow.com/users/8954265/truvaking"}, "edited": false, "score": 1, "creation_date": 1522176868, "post_id": 49520397, "comment_id": 86046517, "body": "Thanks I didn&#39;t know <code>-&gt;</code> was a thing in C"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 41, "user_id": 8954265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc0204e0f7ec399e7a36d4bee9b6d8a5?s=128&d=identicon&r=PG&f=1", "display_name": "truvaking", "link": "https://stackoverflow.com/users/8954265/truvaking"}, "edited": false, "score": 0, "creation_date": 1522176958, "post_id": 49520397, "comment_id": 86046566, "body": "@truvaking Glad I could help.  Feel free to <a href=\"https://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1522176599, "creation_date": 1522176599, "answer_id": 49520397, "question_id": 49520351, "link": "https://stackoverflow.com/questions/49520351/expression-must-have-struct-or-union-type/49520397#49520397", "title": "Expression must have struct or union type", "body": "<p>The <code>head</code> field is not a <code>struct cell_s</code>.  It is a <code>struct cell_s *</code>, i.e. a pointer to <code>struct cell_s</code>.  As such, you need to use the <code>-&gt;</code> operator to dereference and access the member.</p>\n\n<pre><code>list-&gt;head = list-&gt;head-&gt;next;\n</code></pre>\n\n<p>Note also that <code>ptr-&gt;field</code> is easier to read than <code>(*ptr).field</code>.</p>\n"}], "owner": {"reputation": 41, "user_id": 8954265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc0204e0f7ec399e7a36d4bee9b6d8a5?s=128&d=identicon&r=PG&f=1", "display_name": "truvaking", "link": "https://stackoverflow.com/users/8954265/truvaking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4060, "favorite_count": 0, "accepted_answer_id": 49520397, "answer_count": 1, "score": 0, "last_activity_date": 1522176998, "creation_date": 1522176445, "last_edit_date": 1522176998, "question_id": 49520351, "link": "https://stackoverflow.com/questions/49520351/expression-must-have-struct-or-union-type", "title": "Expression must have struct or union type", "body": "<p>I'm trying to make a stack / linkedlist implementation in C with. I'm struggling on the <code>pop</code> function of a stack.</p>\n\n<p>Here's what my stack/linkedlist implementation looks like :</p>\n\n<pre><code>// a cell\nstruct cell_s\n{\n  void *elem;\n  struct cell_s *next;\n};\ntypedef struct cell_s cell_t;\n\n// the list is a pointer to the first cell\nstruct linkedlist_s\n{\n  struct cell_s *head;\n  int len;\n};\ntypedef struct linkedlist_s linkedlist_t;\n</code></pre>\n\n<p>Here's the pop function :</p>\n\n<pre><code>/**\n * Pop remove and return the head\n */\ncell_t *pop(linkedlist_t *list)\n{\n    if ((*list).len == 0) {\n        // we cannot pop an empty list\n        return NULL;\n    }\n    else \n    {\n        cell_t* tmp = (*list).head;\n        (*list).head = (*list).head.next; // &lt;-- error occurs here\n        (*tmp).next = NULL;\n        return tmp;\n    }\n}\n</code></pre>\n\n<p>I don't understand what I did wrong. <code>(*list).head</code> is a <code>struct cell_s</code> so I should be able to access the attribute <code>next</code> ? But compiler won't let me do it.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1522174620, "post_id": 49519852, "comment_id": 86045195, "body": "You have undefined behavior. The <code>if</code> is testing a variable that hasn&#39;t been initialized."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1522174629, "post_id": 49519852, "comment_id": 86045199, "body": "but in this case <code>i</code> is uninitialized, so your program has undefined behavior."}, {"owner": {"reputation": 1, "user_id": 9559733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca5574c6f288c6deda0754fff6b5789?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Bhatt", "link": "https://stackoverflow.com/users/9559733/aditya-bhatt"}, "edited": false, "score": 0, "creation_date": 1522174678, "post_id": 49519852, "comment_id": 86045236, "body": "I m wrirting down my code here but it is not accepted by rhis website .Don&#39;t know why"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1522174718, "post_id": 49519852, "comment_id": 86045262, "body": "You need two loops: one loop to ask for the input and check if it&#39;s a valid number, then the second loop to print the numbers."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1522174875, "post_id": 49519852, "comment_id": 86045361, "body": "Write down the logic you want the program to perform before you write the code. Analyzing the logic of your code shows it cannot do what you intend it to do. Please expand your question with what the program is supposed to do, what it does instead, and what attempts you have made to correct the issue."}, {"owner": {"reputation": 1, "user_id": 9559733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca5574c6f288c6deda0754fff6b5789?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Bhatt", "link": "https://stackoverflow.com/users/9559733/aditya-bhatt"}, "edited": false, "score": 0, "creation_date": 1522175454, "post_id": 49519852, "comment_id": 86045677, "body": "In this program i want to ask the user a number if he entered number bw 1 to 10 then i had to print all the number between the number entered by the user to 10 and if he enter number more than 10 then a message should print that invalid number"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1522175938, "post_id": 49519852, "comment_id": 86045949, "body": "I&#39;m wondering if a <code>do-while</code> loop is what you really want here."}, {"owner": {"reputation": 1, "user_id": 9559733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca5574c6f288c6deda0754fff6b5789?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Bhatt", "link": "https://stackoverflow.com/users/9559733/aditya-bhatt"}, "edited": false, "score": 0, "creation_date": 1522176213, "post_id": 49519852, "comment_id": 86046129, "body": "but if i will apply do-while loop here then if user entered a invalid input then also printf() will do its task"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1522177539, "post_id": 49519852, "comment_id": 86046944, "body": "What does your (now edited) question mean? Can you give an example?"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1522174752, "post_id": 49519899, "comment_id": 86045285, "body": "If you look at the <code>else</code> statement, he actually wants to test the user input. The code is completely inside-out."}], "tags": [], "owner": {"reputation": 1129, "user_id": 9404438, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/zjofb.jpg?s=128&g=1", "display_name": "NIKHIL NEDIYODATH", "link": "https://stackoverflow.com/users/9404438/nikhil-nediyodath"}, "is_accepted": false, "score": 1, "last_activity_date": 1522174708, "creation_date": 1522174708, "answer_id": 49519899, "question_id": 49519852, "link": "https://stackoverflow.com/questions/49519852/can-i-run-a-for-loop-inside-a-if-statement/49519899#49519899", "title": "Can I run a for loop inside a if statement", "body": "<p>You are not initialized your variable named <code>i</code>. You must have to initialize it before using.</p>\n"}], "owner": {"reputation": 1, "user_id": 9559733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca5574c6f288c6deda0754fff6b5789?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Bhatt", "link": "https://stackoverflow.com/users/9559733/aditya-bhatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1722, "favorite_count": 0, "closed_date": 1522175370, "answer_count": 1, "score": -4, "last_activity_date": 1522179227, "creation_date": 1522174497, "last_edit_date": 1522179227, "question_id": 49519852, "link": "https://stackoverflow.com/questions/49519852/can-i-run-a-for-loop-inside-a-if-statement", "closed_reason": "Not suitable for this site", "title": "Can I run a for loop inside a if statement", "body": "<p>Code written in c language trying to get desired output but else condition is not running</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n  int i;\n  if (i &lt;= 10)\n  {\n    for (scanf(\"%d\", &amp;i);i&lt;=10;i++)\n    {\n      printf(\"%d\\n\",i);\n    }\n  }\n  else\n  {\n    printf(\"Please enter a valid number\");\n  }\n}\n</code></pre>\n"}]