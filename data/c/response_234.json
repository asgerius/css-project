[{"tags": ["c", "gcc", "compiler-optimization"], "answers": [{"comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1570621172, "post_id": 56879463, "comment_id": 102968865, "body": "Thanks, this is perfectly reasonable. The reason I asked the question is that in our company <code>-Og</code> is used for final, deployment builds. I don&#39;t find this to be a good practice, <code>Og</code> is considered a &quot;good enough&quot; optimization level for deployment (basically because <code>-O0</code> is a ridiculously slow reference level) and much easier to use for debugging compared to any higher levels. So I wanted to force optimization on all shared code which has been unit-tested and where I don&#39;t expect the need for debugging."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1562201550, "creation_date": 1562201550, "answer_id": 56879463, "question_id": 56879091, "link": "https://stackoverflow.com/questions/56879091/gcc-pragma-optimize-does-not-override-og-command-line-setting/56879463#56879463", "title": "GCC pragma optimize does not override `-Og` command line setting", "body": "<blockquote>\n  <p>Is it possible to override the -Og GCC optimization level with O2/O3 for a single function or compilation unit?</p>\n</blockquote>\n\n<p>Yes and no.  <a href=\"https://gcc.gnu.org/onlinedocs/gcc-9.1.0/gcc/Common-Function-Attributes.html#Common-Function-Attributes\" rel=\"nofollow noreferrer\">The documentation for the <code>optimize</code> attribute</a>, to which the pragma's docs refer, says:</p>\n\n<blockquote>\n  <p>The <code>optimize</code> attribute is used to specify that a function is to be compiled with different optimization options than specified on the command line.</p>\n</blockquote>\n\n<p>So the attribute or pragma does override the command line.  That applies at the per-function level, however, whereas <a href=\"https://gcc.gnu.org/onlinedocs/gcc-9.1.0/gcc/Optimize-Options.html#Optimize-Options\" rel=\"nofollow noreferrer\">the <code>-Og</code> option has both per-function and global effects</a>:</p>\n\n<blockquote>\n  <p>Like <code>-O0</code>, <code>-Og</code> completely disables a number of optimization passes so that individual options controlling them have no effect.</p>\n</blockquote>\n\n<p>Thus, although using the attribute or pragma to set optimization level <code>O2</code> or <code>O3</code> does turn on all the individual optimizations that are included in that level, doing so may not have the full effect that setting them on the command line would do.</p>\n\n<p>Note also the docs' caution that</p>\n\n<blockquote>\n  <p>The <code>optimize</code> attribute should be used for debugging purposes only. It is not suitable in production code.</p>\n</blockquote>\n\n<p>I take it that you <em>are</em> debugging, since that's the purpose of <code>-Og</code>, but among the things you should take from that comment is that you should not rely on that technique for forcing optimization options on or off.  As you have found, it might not do so effectively or fully.</p>\n\n<blockquote>\n  <p>Is this expected behavior?</p>\n</blockquote>\n\n<p>The behavior you describe seems consistent with the docs, though they do not specify the particulars.  The way you characterize it, however, as the pragma being ignored when <code>-Og</code> is set on the command line -- that is not expected, and I think not accurate.</p>\n"}], "owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 56879463, "answer_count": 1, "score": 0, "last_activity_date": 1562201550, "creation_date": 1562197162, "question_id": 56879091, "link": "https://stackoverflow.com/questions/56879091/gcc-pragma-optimize-does-not-override-og-command-line-setting", "title": "GCC pragma optimize does not override `-Og` command line setting", "body": "<p>Is it possible to override the <code>-Og</code> GCC optimization level with <code>O2</code>/<code>O3</code> for a single function or compilation unit?</p>\n\n<p>It seems that neither <code>#pragma GCC optimize(\"O2\")</code> nor <code>__attribute__((optimize(\"O2\"))</code> are obeyed by the compiler if <code>-Og</code> is used in the command line. </p>\n\n<p>For example, <a href=\"https://godbolt.org/z/Ngu5st\" rel=\"nofollow noreferrer\">this function doing saturating addition</a> on ARM Cortex-M4. It gets compiled to <code>ssat</code> only if I compile with <code>-O2</code>, but the rightmost compiler uses <code>-Og</code> and ignores the pragma.</p>\n\n<p>On the other hand, using a <em>lower</em> optimization level pragma works, i.e. specifying <code>O0</code> as pragma overrides <code>-Og</code> in command line.</p>\n\n<p>Is this expected behavior?</p>\n"}, {"tags": ["c", "linux", "assembly", "x86-64", "mmap"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562191044, "post_id": 56878133, "comment_id": 100305382, "body": "Who knows what the startup code that calls your <code>main()</code> had on its version of the stack that wasn&#39;t there after you memory mapped the stack elsewhere.  It seems like a pretty bad idea.  It could be worse because you returned rather than calling <code>exit()</code>.  With a call to <code>exit()</code>, you might get away with it, but \u2026"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 4, "creation_date": 1562191081, "post_id": 56878133, "comment_id": 100305391, "body": "Maybe I&#39;m missing something, but if you <code>mmap</code> space onto the address range used by the stack, then won&#39;t you thereby effectively clobber the stack?  A segfault on (attempted) return from the function seems a natural result."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1562191200, "post_id": 56878133, "comment_id": 100305424, "body": "@JohnBollinger: Yeah, seems really obvious to me, too.  Didn&#39;t take long to think of + write my answer.  I thought about closing or downvoting as too obvious, but apparently it wasn&#39;t obvious to everyone."}], "answers": [{"comments": [{"owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "edited": false, "score": 0, "creation_date": 1562230881, "post_id": 56878411, "comment_id": 100315972, "body": "Yes, it received segv in <code>mmap</code> while trying to return. The <code>strace</code> output was misleading."}, {"owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "edited": false, "score": 0, "creation_date": 1562231510, "post_id": 56878411, "comment_id": 100316318, "body": "Anyway, it is not specified in the <a href=\"https://raw.githubusercontent.com/wiki/hjl-tools/x86-psABI/x86-64-psABI-1.0.pdf\" rel=\"nofollow noreferrer\">ABI</a> how the memory for stack is mapped. All what was mentioned was the <code>exec</code> should take care of it."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "edited": false, "score": 0, "creation_date": 1562273150, "post_id": 56878411, "comment_id": 100334365, "body": "@St.Antario: misleading how?  <code>ret</code> succeeds (setting RIP=0), then code-fetch from address 0 segfaults.  Use GDB if <code>strace</code> doesn&#39;t make it obvious.  Plus, it doesn&#39;t matter <i>how</i> the stack got mapped, just that a local variable is typically in the same page as your return address."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 4, "last_activity_date": 1562287526, "last_edit_date": 1562287526, "creation_date": 1562191067, "answer_id": 56878411, "question_id": 56878133, "link": "https://stackoverflow.com/questions/56878133/remapping-stack-succeeds-but-later-segv-is-raised/56878411#56878411", "title": "Remapping stack succeeds, but later SEGV is raised", "body": "<p>Replacing the stack page containing your return address with a new anonymous page of zero bytes obvious leads to a segfault as soon as <code>main</code> returns, and pops <code>0</code> into RIP.</p>\n\n<p>Note the <code>si_addr=NULL</code>, IIRC that's the code address where the fault happened.  So RIP=0 after running a <code>ret</code> with RSP pointing at a <code>0</code>.  (<strong>The <code>ret</code> itself won't fault, but code-fetch from address <code>0</code> will.</strong>)</p>\n\n<p>Or actually the segfault will be inside the libc wrapper for <code>mmap</code>, which itself has to <code>ret</code>.</p>\n\n<p><strong>Use a debugger to single-step the asm the C compiler created for you.</strong></p>\n"}], "owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 56878411, "answer_count": 1, "score": -2, "last_activity_date": 1562287526, "creation_date": 1562189156, "last_edit_date": 1562190290, "question_id": 56878133, "link": "https://stackoverflow.com/questions/56878133/remapping-stack-succeeds-but-later-segv-is-raised", "title": "Remapping stack succeeds, but later SEGV is raised", "body": "<p>I ran a simple program written in assembly that under <code>strace</code> that simply executes <code>SYS_exit</code>.</p>\n\n<pre><code>_start:\n    mov rax, 0x3C\n    mov rdi, 0x0\n    syscall\n</code></pre>\n\n<p>And noticed that there were nothing like <code>mmap</code> memory for the stack:</p>\n\n<pre><code>alrorp@dmspc:~$ strace ./bin \nexecve(\"./bin\", [\"./bin\"], 0x7ffd591eda80 /* 65 vars */) = 0\nexit(0)                                 = ?\n+++ exited with 0 +++\n</code></pre>\n\n<p>So I tried to do <code>mmap</code> with <code>MAP_FIXED</code> to the stack page-aligned address as follows:</p>\n\n<pre><code>int main(void){\n    int a = 1;\n    void *ptr = &amp;a;\n    void *page_aligned_ptr = (void *)((intptr_t) ptr &amp; -4096);\n    mmap(page_aligned_ptr, 4096, PROT_READ | PROT_WRITE, MAP_FIXED | MAP_ANONYMOUS | MAP_PRIVATE, -1, 0);\n}\n</code></pre>\n\n<p>The thing is it segfaults after the call to <code>mmap</code> succeeds (i.e. it returns the requested address instead of <code>MAP_FAILED</code>).</p>\n\n<pre><code>mmap(0x7ffdf50db000, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7ffdf50db000\n--- SIGSEGV {si_signo=SIGSEGV, si_code=SEGV_MAPERR, si_addr=NULL} ---\n+++ killed by SIGSEGV (core dumped) +++\nSegmentation fault\n</code></pre>\n\n<p>Can you give any hint about this behavior? Core dump seems to be (almost) useless in that case with stack corrupted.</p>\n\n<p>Does something like create a custom mapping for stack even make sense? </p>\n"}, {"tags": ["c", "struct", "printf", "union"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1562189076, "post_id": 56878052, "comment_id": 100304805, "body": "Please look for compiler warnings - <code>while(tab[i] != &quot; &quot;)</code> should be <code>while(tab[i] != &#39; &#39;)</code> . Perhaps you get <code>&#39;A&#39;</code> and then it crashes."}], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 11731622, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MjD0MIY49Rw/AAAAAAAAAAI/AAAAAAAAABA/L1KB-3R83Zk/photo.jpg?sz=128", "display_name": "Alan Barrett II", "link": "https://stackoverflow.com/users/11731622/alan-barrett-ii"}, "is_accepted": false, "score": 3, "last_activity_date": 1562189336, "last_edit_date": 1562189336, "creation_date": 1562189253, "answer_id": 56878149, "question_id": 56878052, "link": "https://stackoverflow.com/questions/56878052/my-code-doesnt-work-i-have-a-problem-with-while-loop/56878149#56878149", "title": "My code doesn&#39;t work. I have a problem with while loop", "body": "<p>Try this:  <code>while(tab[i] != ' ' &amp;&amp; tab[i])</code></p>\n\n<p>Use <code>' '</code> instead of <code>\" \"</code></p>\n"}, {"tags": [], "owner": {"reputation": 867, "user_id": 11683772, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MXEsqjfnpdw/AAAAAAAAAAI/AAAAAAAAvyg/O9wElDD_VfY/photo.jpg?sz=128", "display_name": "Mark", "link": "https://stackoverflow.com/users/11683772/mark"}, "is_accepted": true, "score": 4, "last_activity_date": 1562189633, "last_edit_date": 1562189633, "creation_date": 1562189264, "answer_id": 56878150, "question_id": 56878052, "link": "https://stackoverflow.com/questions/56878052/my-code-doesnt-work-i-have-a-problem-with-while-loop/56878150#56878150", "title": "My code doesn&#39;t work. I have a problem with while loop", "body": "<p>char array and char types are different in c, the first uses <code>\"</code> as a delimiter while the second uses <code>'</code></p>\n\n<p>So try this:</p>\n\n<pre><code>    while(tab[i] != ' ') {\n</code></pre>\n\n<p>Which should work for your example.</p>\n\n<p>However, to make your code work more generally for different substrings (other than a space character) and for strings without a space in them, you need to use the size too, like this:</p>\n\n<pre><code>    while(i &lt; size &amp;&amp; tab[i] != ' ') {\n</code></pre>\n\n<p>to ensure that you don't attempt to read beyond the memory where your string resides.</p>\n"}], "owner": {"reputation": 25, "user_id": 11591744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f78b3d09dbb79bcde224033a908ad7?s=128&d=identicon&r=PG&f=1", "display_name": "kaluaaa", "link": "https://stackoverflow.com/users/11591744/kaluaaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 56878150, "answer_count": 2, "score": -1, "last_activity_date": 1562190592, "creation_date": 1562188701, "last_edit_date": 1562190592, "question_id": 56878052, "link": "https://stackoverflow.com/questions/56878052/my-code-doesnt-work-i-have-a-problem-with-while-loop", "title": "My code doesn&#39;t work. I have a problem with while loop", "body": "<p>I want to get <code>Ala</code>. I get <code>A</code>. How to fix these?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid zad(char tab[]) {\n    int i = 0;\n    int size = strlen(tab);\n    while(tab[i] != \" \") {\n        printf(\"%c\", tab[i]);\n        i++;\n    }\n}\n\nint main() {\n    char word[20] = \"Ala ma kota\";\n\n   zad(word);\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "return", "conditional-operator", "bitwise-not"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1562187972, "post_id": 56877854, "comment_id": 100304392, "body": "<code>return x &gt; base ? 3 * (x - base) : (base - x);</code> seems simpler (ans is shorter)."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 5, "creation_date": 1562187985, "post_id": 56877854, "comment_id": 100304397, "body": "When you have 50 such a returns in your program and something will not work and you will need to debug it - you will understand why it is better to write several lines more and not doing those pseudo &quot;smart&quot; things"}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 3, "creation_date": 1562188035, "post_id": 56877854, "comment_id": 100304420, "body": "I&#39;d complain if a co-worker showed this to me.  You understand it today, but a year from now it will be way harder to understand than it should be.  I don&#39;t consider it maintainable.  Let the compiler do the optimization.  That said, please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> to see what it says about questions asking for opinions."}, {"owner": {"reputation": 1802, "user_id": 3421618, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/TQAL7.jpg?s=128&g=1", "display_name": "ProXicT", "link": "https://stackoverflow.com/users/3421618/proxict"}, "edited": false, "score": 0, "creation_date": 1562188262, "post_id": 56877854, "comment_id": 100304476, "body": "Seems like you&#39;re trying to find the most complicated way to do the job. <code>&quot;I&#39;d like to use it&quot;</code> - Is there any real reason to why you want to use this construct?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1562188291, "post_id": 56877854, "comment_id": 100304483, "body": "Why obfuscate <code>-result</code> as <code>~result + 1</code> (which is only equivalent if the implementation uses two&#39;s complement)? A straightforward translation of your specification gives <code>return result &gt; 0 ? 3 * result : -result</code>."}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1562188399, "post_id": 56877854, "comment_id": 100304524, "body": "Oops, what to ask isn&#39;t linked from how to ask for some reason, see this - <a href=\"https://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a>"}, {"owner": {"reputation": 1, "user_id": 11638766, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lwx-aLobVMA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reINMSNIfAhL7f_wOOapIWFv7Qz2Q/mo/photo.jpg?sz=128", "display_name": "Alan Jurisich", "link": "https://stackoverflow.com/users/11638766/alan-jurisich"}, "edited": false, "score": 0, "creation_date": 1562188420, "post_id": 56877854, "comment_id": 100304535, "body": "Mostly just new to using the operator.  Like a person learning a new word, you want to use it.  But it got me to thinking.  Just because it works and I feel neat for implementing it, does that make it right?  Judging by the responses so far, I would say it&#39;s more than JUST opinion, it really would be a no no/dick move."}, {"owner": {"reputation": 1, "user_id": 11638766, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lwx-aLobVMA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reINMSNIfAhL7f_wOOapIWFv7Qz2Q/mo/photo.jpg?sz=128", "display_name": "Alan Jurisich", "link": "https://stackoverflow.com/users/11638766/alan-jurisich"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1562189821, "post_id": 56877854, "comment_id": 100305057, "body": "@molbdnilo, honestly? Because until this post is didn&#39;t know I could use the - operator that way."}], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 3, "last_activity_date": 1562188439, "creation_date": 1562188439, "answer_id": 56878014, "question_id": 56877854, "link": "https://stackoverflow.com/questions/56877854/nesting-conditional-operators-in-a-return-statement/56878014#56878014", "title": "Nesting conditional operators in a return statement", "body": "<ol>\n<li><p>There is nothing wrong about nesting conditionals in a <code>return</code> statement, <em>per se</em>.</p></li>\n<li><p><code>~result + 1</code> is bad. You are attempting to negate <code>result</code>. The proper way to do this is simply <code>-result</code>. <code>~result + 1</code> relies on two\u2019s complement representation, which is ubiquitous, but this expression is weirder and unnecessary.</p></li>\n<li><p>You do not need <code>(result &lt; 0 ? ~result + 1 : result)</code>. This expression is evaluated only if <code>x &gt; base</code> is false, in which case <code>result</code> must be less than or equal to zero, and you want to return <code>-result</code>, as that handles both the less than zero case (return <code>-result</code>) and the equal to zero case (return <code>0</code>, which is the same as <code>-result</code> when <code>result</code> is zero).</p></li>\n</ol>\n\n<p>So the <code>return</code> statement can be written:</p>\n\n<pre><code>return x &gt; base ? 3*result : -result;\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>return result &gt; 0 ? 3*result : -result;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11638766, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lwx-aLobVMA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reINMSNIfAhL7f_wOOapIWFv7Qz2Q/mo/photo.jpg?sz=128", "display_name": "Alan Jurisich", "link": "https://stackoverflow.com/users/11638766/alan-jurisich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 56878014, "answer_count": 1, "score": -3, "last_activity_date": 1562190983, "creation_date": 1562187623, "last_edit_date": 1562190983, "question_id": 56877854, "link": "https://stackoverflow.com/questions/56877854/nesting-conditional-operators-in-a-return-statement", "title": "Nesting conditional operators in a return statement", "body": "<p>So I setup a code that finds the magnitude (absolute value) of the difference between the user's input and 51.  If the user's input is greater than 51 the result is tripled.  Not complicated.  In an effort to minimize the code itself I came up with this.</p>\n\n<pre><code>// Compare and determine the correct output based on program's \n// paramters:\n//\n// - find absolute value of input - 51\n// - if input &gt; 51 then multiply result by 3\n//-----------------------------------------------------------\n\nint calcDiff(int x) {\n      const int base = 51;\n      int result     = x - base;    \n      return x &gt; base ? 3*result : (result &lt; 0 ? ~result + 1 : result);\n }\n</code></pre>\n\n<p>So the question is:</p>\n\n<p>Is this appropriate? I know it works but i'm more curious whether it's bad practice and can some how bite me in the rear in a big way some day.  Is this just opinion or is it a big no no like using <code>scanf</code> or <code>gets</code>?  Is there an emoji for beating a dead horse? Because i'd like to use it.</p>\n"}, {"tags": ["c++", "c", "windows", "winapi", "systems-programming"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1562188386, "post_id": 56877563, "comment_id": 100304515, "body": "<i>ObjectBasicInformation</i> - look in <code>PUBLIC_OBJECT_BASIC_INFORMATION.GrantedAccess</code>"}, {"owner": {"reputation": 134, "user_id": 4229811, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/231fd96d971fcd71c3ea3cd141070aef?s=128&d=identicon&r=PG&f=1", "display_name": "Melina Golez", "link": "https://stackoverflow.com/users/4229811/melina-golez"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1562191123, "post_id": 56877563, "comment_id": 100305403, "body": "I check this but the value of .GrantedAccess is different than what we see in Process Explorer or Process Hacker"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1562193474, "post_id": 56877563, "comment_id": 100305915, "body": "and so what ? what value view you and what Process Explorer ? faster of all you make mistake somewhere. really <i>PUBLIC_OBJECT_BASIC_INFORMATION.GrantedAccess</i> containing correct infformation always"}], "owner": {"reputation": 134, "user_id": 4229811, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/231fd96d971fcd71c3ea3cd141070aef?s=128&d=identicon&r=PG&f=1", "display_name": "Melina Golez", "link": "https://stackoverflow.com/users/4229811/melina-golez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1562189101, "answer_count": 0, "score": 0, "last_activity_date": 1562185983, "creation_date": 1562185983, "question_id": 56877563, "link": "https://stackoverflow.com/questions/56877563/getting-granted-access-to-a-handle", "closed_reason": "Duplicate", "title": "Getting granted access to a handle", "body": "<p>A client creates or opens a file, I'm injecting into the client and getting a handle of the file.\nFrom the handle can I get \"desired access\" the client provided to \"CreateFile\" function when calling CreateFile or OpenFile functions?</p>\n\n<p>I want to open another file with exactly same access?</p>\n\n<p>I tried <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/winternl/nf-winternl-ntqueryobject\" rel=\"nofollow noreferrer\">NtQueryObject</a> but could not find a class which returns handle access values</p>\n"}, {"tags": ["c", "memory", "struct", "memory-alignment"], "comments": [{"owner": {"reputation": 3021, "user_id": 11606193, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXr7w.jpg?s=128&g=1", "display_name": "Deepstop", "link": "https://stackoverflow.com/users/11606193/deepstop"}, "edited": false, "score": 1, "creation_date": 1562186282, "post_id": 56877547, "comment_id": 100303755, "body": "Are the alignment rules provided in the question?"}, {"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 3, "creation_date": 1562186318, "post_id": 56877547, "comment_id": 100303771, "body": "First, please don&#39;t tag C++ for a C question. Second, there is no standard rule for alignment. Any book indicating that there is a specific answer would have to refer to a specific piece of code compiled for a specific architecture with a specific version of a specific compiler with specific compiler options."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 3, "creation_date": 1562186369, "post_id": 56877547, "comment_id": 100303796, "body": "In fact, Apple LLVM 10.0.1 with Clang 1001.0.46.4 building for x86-64 lays the structure out as you show, not as the book shows. If the alignment rules are, as you say, that each object must be aligned to a multiple of its size, then the book is wrong."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1562186415, "post_id": 56877547, "comment_id": 100303810, "body": "@ThomasJager: The exercise in the book is clearly positing a specific situation with specific rules, not teaching what the C standard permits generally."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1562199785, "post_id": 56877547, "comment_id": 100307083, "body": "If sizeof(short) is 4 the book is right"}], "answers": [{"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1562188804, "post_id": 56877779, "comment_id": 100304707, "body": "or even 1 byte alignment (8 bit uCs)"}, {"owner": {"reputation": 43, "user_id": 11736327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/286505d364111e1e05108610af93d787?s=128&d=identicon&r=PG&f=1", "display_name": "Tetrau", "link": "https://stackoverflow.com/users/11736327/tetrau"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1562190458, "post_id": 56877779, "comment_id": 100305224, "body": "Well, the rule that I mentioned in the question is the shorted version of the original concept from the book (maybe too short). The padding do vary from different platforms, compilers as shown by @P__J__ and CS:APP supposes to use GCC on Linux, x86-64, still the answer given by the book is a strange one. I have also checked the errata of the book and nothing was found."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 3, "last_activity_date": 1562187515, "last_edit_date": 1562187515, "creation_date": 1562187166, "answer_id": 56877779, "question_id": 56877547, "link": "https://stackoverflow.com/questions/56877547/data-alignment-for-c-struct/56877779#56877779", "title": "Data Alignment for C struct", "body": "<p>Given the sizes of objects shown and alignment rules that say each of these objects must be aligned to a multiple of its size, then, when the structure is laid out with only the padding required for alignment, the offsets should be as shown in Tetrau\u2019s solution. The book solution is incorrect.</p>\n\n<p>The offsets shown in Tetrau\u2019s solution are in fact the offsets produced by Apple LLVM 10.0.1 with Clang 1001.0.46.4 compiling for x86-64; the output from the program below is:</p>\n\n<pre>\n0\n8\n12\n14\n16\n24\n32\n40\n48\n</pre>\n\n<pre><code>struct foo {\n  int    *a;\n  float  b;\n  char   c;\n  short  d;\n  long   e;\n  double f;\n  int    g;\n  char   *h;\n} rec;\n\n\n#include &lt;stddef.h&gt;\n#include &lt;stdio.h&gt;\n\n\nint main(void)\n{\n    printf(\"%zu\\n\", offsetof(struct foo, a));\n    printf(\"%zu\\n\", offsetof(struct foo, b));\n    printf(\"%zu\\n\", offsetof(struct foo, c));\n    printf(\"%zu\\n\", offsetof(struct foo, d));\n    printf(\"%zu\\n\", offsetof(struct foo, e));\n    printf(\"%zu\\n\", offsetof(struct foo, f));\n    printf(\"%zu\\n\", offsetof(struct foo, g));\n    printf(\"%zu\\n\", offsetof(struct foo, h));\n    printf(\"%zu\\n\", sizeof rec);\n}\n</code></pre>\n\n<h2>Note</h2>\n\n<p>The rule that an object requires alignment to a multiple of its size is fine for this exercise, but it should be noted it is not a general rule. A machine might have some eight-byte object but have only a bus and other memory access characteristics that are four bytes wide, so it would only care about four-byte alignment at most for any object. Or a structure member might be another structure that is, say, nine bytes in size (such as <code>struct bar { char x[9]; }</code>), but its alignment requirement would not be nine bytes.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 11736327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/286505d364111e1e05108610af93d787?s=128&d=identicon&r=PG&f=1", "display_name": "Tetrau", "link": "https://stackoverflow.com/users/11736327/tetrau"}, "edited": false, "score": 0, "creation_date": 1562190510, "post_id": 56878041, "comment_id": 100305242, "body": "Cool website! That&#39;s very helpful!"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": true, "score": 3, "last_activity_date": 1562189059, "last_edit_date": 1562189059, "creation_date": 1562188606, "answer_id": 56878041, "question_id": 56877547, "link": "https://stackoverflow.com/questions/56877547/data-alignment-for-c-struct/56878041#56878041", "title": "Data Alignment for C struct", "body": "<p>The answer depends on the compiler, platform and compile options. Some examples:\n<a href=\"https://i.stack.imgur.com/jM9GF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jM9GF.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://godbolt.org/z/4tAzB_\" rel=\"nofollow noreferrer\">https://godbolt.org/z/4tAzB_</a></p>\n\n<p>The author of the book does not understand the topic I afraid.</p>\n"}], "owner": {"reputation": 43, "user_id": 11736327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/286505d364111e1e05108610af93d787?s=128&d=identicon&r=PG&f=1", "display_name": "Tetrau", "link": "https://stackoverflow.com/users/11736327/tetrau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 1, "accepted_answer_id": 56878041, "answer_count": 2, "score": 3, "last_activity_date": 1562191295, "creation_date": 1562185841, "last_edit_date": 1562191295, "question_id": 56877547, "link": "https://stackoverflow.com/questions/56877547/data-alignment-for-c-struct", "title": "Data Alignment for C struct", "body": "<p>There is a problem (3.45) in CS:APP about the byte offsets of all fields in the following struct.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct {\n  int    *a;\n  float  b;\n  char   c;\n  short  d;\n  long   e;\n  double f;\n  int    g;\n  char   *h;\n} rec;\n</code></pre>\n\n<p>Here is the answer from the book, which gives <code>c</code> a three bytes padding, <code>d</code> a two bytes padding and <code>g</code> a four bytes padding.</p>\n\n<pre><code>field  size  offset\n-----  ----  ------\na      8     0\nb      4     8\nc      1     12\nd      2     16\ne      8     24\nf      8     32\ng      4     40\nh      8     48\n</code></pre>\n\n<p>And here is my solution, which only gives <code>c</code> a one byte padding and <code>g</code> a four bytes padding.</p>\n\n<pre><code>field  size  offset\n-----  ----  ------\na      8     0\nb      4     8\nc      1     12\nd      2     14\ne      8     16\nf      8     24\ng      4     32\nh      8     40\n</code></pre>\n\n<p>So, what's the problem with my solution? It seems to fit the alignment rule (edit* the \"rule\" here is just a simplified concept summaries by myself, It's not completed or general), all object's offset is a multiple of the size of object.</p>\n\n<p>Would be very thankful for any explanation. </p>\n"}, {"tags": ["python", "c", "i2c", "armbian"], "comments": [{"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "edited": false, "score": 0, "creation_date": 1562189406, "post_id": 56877275, "comment_id": 100304913, "body": "Do you have access to an oscilloscope, logic analyzer, or other device that allows you to see the waveforms on the bus? There might be some insight there."}, {"owner": {"reputation": 63, "user_id": 8478201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b95d2306048b28534ac0c2a0ee10af00?s=128&d=identicon&r=PG&f=1", "display_name": "fluffypuffy", "link": "https://stackoverflow.com/users/8478201/fluffypuffy"}, "reply_to_user": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "edited": false, "score": 0, "creation_date": 1562270393, "post_id": 56877275, "comment_id": 100333697, "body": "unfortunately I dont have osciloscope or logic analyzer ;/"}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 8478201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b95d2306048b28534ac0c2a0ee10af00?s=128&d=identicon&r=PG&f=1", "display_name": "fluffypuffy", "link": "https://stackoverflow.com/users/8478201/fluffypuffy"}, "is_accepted": false, "score": 0, "last_activity_date": 1562520344, "creation_date": 1562520344, "answer_id": 56924488, "question_id": 56877275, "link": "https://stackoverflow.com/questions/56877275/reading-bme680-from-i2c-2-on-armbian/56924488#56924488", "title": "Reading BME680 from i2c 2 on Armbian", "body": "<p>So, I've tried to change address from 0x77 to 0x76 and it works as expected. Don't know why, but it looks like there is an issue with SECONDARY which system-wise looks ok, but sensor is invisible. When sensor is physically connected to use 0x76 (SDO to GND) and code is changed accordingly, it works.</p>\n"}], "owner": {"reputation": 63, "user_id": 8478201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b95d2306048b28534ac0c2a0ee10af00?s=128&d=identicon&r=PG&f=1", "display_name": "fluffypuffy", "link": "https://stackoverflow.com/users/8478201/fluffypuffy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1562520344, "creation_date": 1562184551, "last_edit_date": 1562189244, "question_id": 56877275, "link": "https://stackoverflow.com/questions/56877275/reading-bme680-from-i2c-2-on-armbian", "title": "Reading BME680 from i2c 2 on Armbian", "body": "<p>I'm trying to use BME680 sensor on BananaPI + Armbian 5.65 together with TSL 2651 on same i2c but no luck.\n(for reference, very same configuration is not working on RPi either)</p>\n\n<p>Sensor when connected alone, works, but connected together with TSL its not, at same time TSL works just fine when connected behind BME.</p>\n\n<p>It's connected :: board -> BME680 -> TSL2561</p>\n\n<p>I can reach TSL, so BME is awake and reachable as TSL have to go thru BME.</p>\n\n<p>i2cdetect see both of them, so systemwise it looks ok to me</p>\n\n<pre><code>sudo i2cdetect -y 2\n     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f\n00:          -- -- -- -- -- -- -- -- -- -- -- -- --\n10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\n20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\n30: -- -- -- -- -- -- -- -- -- 39 -- -- -- -- -- --\n40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\n50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\n60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- --\n70: -- -- -- -- -- -- -- 77\n</code></pre>\n\n<p>I'm using Bosh Driver together with this .c <a href=\"https://github.com/twartzek/bme680-raspberry\" rel=\"nofollow noreferrer\">https://github.com/twartzek/bme680-raspberry</a> which is originally for RPI but as BananaPi M1 is exactly the same in terms of i2c/pinouts etc. I do think it should work. \nThis same code when BME is connected alone works.</p>\n\n<p>But connected together interface just returns </p>\n\n<pre><code>**** BME680 start measurements  ****\nuser_i2c_write: No such device or address\n</code></pre>\n\n<p>which I suspect simply means it can't see device on i2c-2 (0x77) but system does.</p>\n\n<p>I've edited bme680_main.c so it's using BME680_I2C_ADDR_SECONDARY and g_i2cFid = open(\"/dev/i2c-2\", O_RDWR);</p>\n\n<p>Not really sure how to proceed from here, if anyhow ;)\nAny help/hint would be appreciated.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "string", "encoding", "gtk", "cyrillic"], "comments": [{"owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "edited": false, "score": 1, "creation_date": 1562185335, "post_id": 56877221, "comment_id": 100303363, "body": "There&#39;s a misconception about UTF-8 here: it&#39;s a variable length encoding (1-4 bytes per character) and this is the reason for what you are seeing."}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "reply_to_user": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "edited": false, "score": 0, "creation_date": 1562185392, "post_id": 56877221, "comment_id": 100303391, "body": "@jku I see. My area of expertise is not encoding and I am indeed very confused. I thought as it is UTF-8 it is a byte-length encoding :) However if I don&#39;t solve this at the end I will have to create a cyrillic-to-latin character transliterator and replace cyrillic characters with their latin counterpart."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1562185741, "post_id": 56877221, "comment_id": 100303512, "body": "UTF-8 can use 1 to 4 bytes to encode a char. One option: you could convert the UTF-8 buffer to UTF-16 and use the indexes of the latter."}], "answers": [{"comments": [{"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1562187297, "post_id": 56877624, "comment_id": 100304149, "body": "In another words Imagine the string &quot;Hello World&quot; and it is set on the gtk text buffer. I want to get the character position of &quot;W&quot; in the text buffer out of the index 6. It is encoding problem."}, {"owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "reply_to_user": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1562227594, "post_id": 56877624, "comment_id": 100314213, "body": "Directly accessing character at index 6 is just not possible (except with code that goes through all the characters and stops at index 6).... but I think there may be other solutions if you explain what you really want to achieve: Why are you doing this? Where does the index 6 come from?"}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1562237217, "post_id": 56877624, "comment_id": 100319611, "body": "I already explained I am scanning the contents of the text buffer as a string. Say I want to match some word and select it in the text buffer."}, {"owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "reply_to_user": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1562237732, "post_id": 56877624, "comment_id": 100319859, "body": "I don&#39;t think you explained that you actually want to match a word and select it in the buffer :)"}, {"owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "reply_to_user": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1562238313, "post_id": 56877624, "comment_id": 100320165, "body": "I&#39;ve added a note about GtkTextIter API that is probably what you want in this case."}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1562242028, "post_id": 56877624, "comment_id": 100322138, "body": "So as I am scanning the UTF-8 string in a per-byte manner I need to keep track at which character offset (rather than byte index) I am at in the text buffer. Yes I did not initially mention exactly what I want to do. Just the problem. I know that API I will see if I can do it."}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 0, "creation_date": 1562242953, "post_id": 56877624, "comment_id": 100322659, "body": "It is actually a parser that extracts specific numbers onto a tree view and I want to keep their position and select their source location in the GtkTextView (when the tree view cursor changes) for which <code>gtk_text_iter_forward_search()</code> will not be very useful and also very performance-needy. I was thinking to scan it using <code>gtk_text_iter_forward_char()</code> though. In fact I tried, but since I don&#39;t know how to deal with gunichar, the result was messy."}, {"owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "edited": false, "score": 1, "creation_date": 1562244867, "post_id": 56877624, "comment_id": 100323785, "body": "Ok, with proper handling and the use of the <code>GtkTextIter</code> API, I did it. I hope it is not much slower."}], "tags": [], "owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "is_accepted": false, "score": 2, "last_activity_date": 1562238256, "last_edit_date": 1562238256, "creation_date": 1562186330, "answer_id": 56877624, "question_id": 56877221, "link": "https://stackoverflow.com/questions/56877221/gtk-character-count-vs-byte-index/56877624#56877624", "title": "GTK character count vs byte index", "body": "<p>It's not completely clear what you want to do but if you just need to process the whole UTF-8 string one Unicode character at a time, the <a href=\"https://developer.gnome.org/glib/stable/glib-Unicode-Manipulation.html\" rel=\"nofollow noreferrer\">GLib Unicode manipulation</a> functions might help, see e.g. g_utf_next_char() and g_utf_get_char(). </p>\n\n<p>This doesn't change the fact that the characters are Unicode so may be multi-byte characters.</p>\n\n<p>If your goal is to be able to modify the buffer based on e.g. matching words, you should look at the GtkTextIter API: As an example you can use <a href=\"https://developer.gnome.org/gtk3/stable/GtkTextIter.html#gtk-text-iter-forward-search\" rel=\"nofollow noreferrer\">gtk_text_iter_forward_search ()</a> to get start and end iters that you can use directly in the GtkTextBuffer API. This way you'll never need to deal with the actual character or byte indexes.</p>\n"}], "owner": {"reputation": 1931, "user_id": 3696914, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/oLaiN.png?s=128&g=1", "display_name": "Edenia", "link": "https://stackoverflow.com/users/3696914/edenia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1562238256, "creation_date": 1562184315, "last_edit_date": 1562184644, "question_id": 56877221, "link": "https://stackoverflow.com/questions/56877221/gtk-character-count-vs-byte-index", "title": "GTK character count vs byte index", "body": "<p>In a GtkTextBuffer,</p>\n\n<p>I can see that GTK+ stores cyrillic characters in two bytes (which confuses me a little, I thought it stores them UTF-8 encoded, hence every character has to be within a single byte?)</p>\n\n<p>This leads to a problem - I am scanning the text as a string in a loop and I need to refer to the appropriate character location based on the index in the loop, however they don't have corresponding indices anymore, because the text contains cyrillic. The character count is 8310 and the size of the string is around 11300.</p>\n\n<p>If I use <code>g_str_to_ascii()</code> on the string I am scanning, later on, when I display some of the content of the string on a tree view widget it displays cyrillic characters as <code>?</code>s.</p>\n\n<p>How do I get around this problem?</p>\n\n<hr>\n\n<pre><code>G_MODULE_EXPORT void on_textbuffer_changed (GtkTextBuffer* textbuffer, gpointer user_data)\n{\n    GtkTextIter start   = {0};\n    GtkTextIter end     = {0};\n    gchar*      text    = NULL;\n\n    gtk_text_buffer_get_bounds(textbuffer, &amp;start, &amp;end);\n\n    text = gtk_text_buffer_get_text(textbuffer, &amp;start, &amp;end, FALSE);\n\n    printf(\"[%i][%i]\\n\", gtk_text_buffer_get_char_count(textbuffer), strlen(text));\n\n    g_free(text);\n}\n</code></pre>\n\n<p>This will print out <code>[1][2]</code> if I place cyrillic character and <code>[2][4]</code> if I place two cyrillic characters respectively.</p>\n\n<p>Those are the bytes of the cyrillic \"\u0430\" (char/dec):</p>\n\n<p><a href=\"https://i.stack.imgur.com/8vwyc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8vwyc.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "multidimensional-array"], "comments": [{"owner": {"reputation": 2616, "user_id": 31319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49d6cfe3732f2849692684d3660548ec?s=128&d=identicon&r=PG", "display_name": "m0j0", "link": "https://stackoverflow.com/users/31319/m0j0"}, "edited": false, "score": 2, "creation_date": 1562184193, "post_id": 56877189, "comment_id": 100302962, "body": "I just see one case."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1562184203, "post_id": 56877189, "comment_id": 100302966, "body": "And what is the output in both cases?"}, {"owner": {"reputation": 3, "user_id": 10501730, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LogbAXoANB0/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU6vHC0naX368vfjLAo-zVNzb16UQ/mo/photo.jpg?sz=128", "display_name": "user10501730", "link": "https://stackoverflow.com/users/10501730/user10501730"}, "edited": false, "score": 0, "creation_date": 1562184678, "post_id": 56877189, "comment_id": 100303118, "body": "Sorry, please check again.. I am not able to indent the code properly on stackoverflow. that is why posted one case and wrote in brackets that the difference is only inside printf. I have posted both cases now . Thank you"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1562184845, "post_id": 56877189, "comment_id": 100303168, "body": "But you still haven&#39;t said what the output is. Why is this such a struggle?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1562185313, "post_id": 56877189, "comment_id": 100303348, "body": "This is not a properly terminated C string, so the output of that <code>printf</code> is undefined behaviour. This code doesn&#39;t make any sense at all. If you have a multi-dimensional array then you need to <i>iterate over it and display individual elements</i>."}, {"owner": {"reputation": 3, "user_id": 10501730, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LogbAXoANB0/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU6vHC0naX368vfjLAo-zVNzb16UQ/mo/photo.jpg?sz=128", "display_name": "user10501730", "link": "https://stackoverflow.com/users/10501730/user10501730"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1562185656, "post_id": 56877189, "comment_id": 100303481, "body": "@Bathsheba I added it . Sorry not everyone is an expert sir. I am new to this."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1562189017, "post_id": 56877189, "comment_id": 100304792, "body": "@tadman: There are fewer initializers than there are array elements, so the remaining elements are initialized to 0.  <code>a</code> does contain a properly terminated string.  Just maybe not intentionally."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1562192324, "post_id": 56877189, "comment_id": 100305677, "body": "@JohnBode I&#39;m not sure that&#39;s the case if this is anywhere but <code>main()</code>."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1562192757, "post_id": 56877189, "comment_id": 100305751, "body": "@tadman: 6.7.9/21 - &quot;If there are fewer initializers in a brace-enclosed list than there are elements or members of an aggregate, or fewer characters in a string literal used to initialize an array of known size than there are elements in the array, the remainder of the aggregate shall be initialized implicitly the same as objects that have static storage duration.&quot;"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1562195124, "post_id": 56877189, "comment_id": 100306267, "body": "@JohnBode Good clarification, thanks."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10501730, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LogbAXoANB0/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU6vHC0naX368vfjLAo-zVNzb16UQ/mo/photo.jpg?sz=128", "display_name": "user10501730", "link": "https://stackoverflow.com/users/10501730/user10501730"}, "edited": false, "score": 0, "creation_date": 1562224366, "post_id": 56878315, "comment_id": 100312553, "body": "This is so good.. thank you for taking the time to answer this in such detail... cheers."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1562257744, "last_edit_date": 1562257744, "creation_date": 1562190434, "answer_id": 56878315, "question_id": 56877189, "link": "https://stackoverflow.com/questions/56877189/difference-between-and-in-3d-array/56878315#56878315", "title": "Difference between ** and * in 3d array", "body": "<p>This is a fun one. </p>\n\n<p>Remember that array elements are laid out contiguously - <code>a</code> looks something like this in memory:</p>\n\n<pre><code>   +---+\na: |'a'| a[0][0][0]\n   +---+ \n   |'b'| a[0][0][1]\n   +---+\n   |'c'| a[0][0][2]\n   +---+\n   |'d'| a[0][1][0]\n   +---+\n   |'e'| a[0][1][1]\n   +---+\n   |'f'| a[0][1][2]\n   +---+\n   |'g'| a[0][2][0]\n   +---+\n   |'i'| a[0][2][1]\n   +---+\n   |'j'| a[0][2][2]\n   +---+\n   |'k'| a[1][0][0]\n   +---+\n   |'l'| a[1][0][1]\n   +---+\n   |'m'| a[1][0][2]\n   +---+\n   | 0 | a[1][1][0]\n   +---+\n   | 0 | a[1][1][1]\n   +---+\n    ...\n</code></pre>\n\n<p>Since you provided fewer initializers than the array was sized to hold (12 vs. 18), the remaining elements are initialized to 0 (this is important later on).</p>\n\n<p>First, some background on arrays:</p>\n\n<p>Unless it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, or is a string literal used to initialize a character array in a declaration, an <em>expression</em> of type \"N-element array of <code>T</code>\" will be converted (\"decay\") to an expression of type \"pointer to <code>T</code>\" and the value of the expression will be the address of the first element of the array.</p>\n\n<p>The array subscript operation <code>a[i]</code> is <em>defined</em> as <code>*(a + i)</code> - given a starting address <code>a</code>, offset <code>i</code> <em>elements</em> (not bytes!) from that address and dereference the result.  This means that <code>*a == *(a + 0) == a[0]</code>.</p>\n\n<p>So, how does that apply to your code?</p>\n\n<p>The <em>expression</em> <code>a</code> has type \"2-element array of 3-element array of 3-element array of <code>char</code>\".  If <code>a</code> is not the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, that expression \"decays\" to type \"pointer to 3-element array of 3-element array of <code>char</code>\", and the value of the expression is the address of the first element of the array - <code>&amp;a[0]</code>.  </p>\n\n<p>The expression <code>*a</code> dereferences that pointer, and the type of the expression is \"3-element array of 3-element array of <code>char</code>\".  Again, this expression is not the operand of the <code>sizeof</code> or unary <code>&amp;</code> operands, so it is converted to \"pointer to 3-element array of <code>char</code>\", and the value is the address of the first element of the array, or <code>&amp;(*a)</code>.  Since <code>*a == a[0]</code>, this can also be seen as <code>&amp;a[0][0]</code>.</p>\n\n<p>The expression <code>**a</code> dereferences the result of <code>*a</code> (which had type \"pointer to 3-element array of <code>char</code>\"), and the type of the expression is \"3-element array of <code>char</code>\".  Again, this expression is not the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, so it \"decays\" to type \"pointer to <code>char</code>\".  </p>\n\n<p>Which, coincidentally, is what <code>%s</code> expects.  The <code>%s</code> conversion specifier expects its argument to have type <code>char *</code> and to point to the first in a sequence of characters followed by a 0-valued terminator.  Remember earlier when I said the remaining 6 elements of the array would be initialized to 0?  Perhaps without meaning to, you've stored a <em>string</em> in <code>a</code>.  </p>\n\n<p>So, that's why you get the output you do with <code>**a</code>.  But why does <code>*a</code> work as well?</p>\n\n<p>The address of an array is the same as the address of the first element of the array - <code>&amp;a[0] == &amp;a[0][0] == &amp;a[0][0][0]</code> (which you can see from the ASCII art above).  The <em>type</em> of <code>*a</code> is wrong - <code>char (*)[3]</code> instead of <code>char *</code> - so strictly speaking the behavior is undefined, but its <em>value</em> (at least its logical value) is the same as <code>**a</code>.  Different pointer types may have different representations, so there may be a platform out there where the representation of a <code>char (*)[3]</code> may be different from a <code>char *</code> such that this code won't work.  However, on platforms like <code>x86</code>, all pointer types have the same representation, so the value of <code>*a</code> is interpreted the same way as the value of <code>**a</code>.  </p>\n"}], "owner": {"reputation": 3, "user_id": 10501730, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LogbAXoANB0/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU6vHC0naX368vfjLAo-zVNzb16UQ/mo/photo.jpg?sz=128", "display_name": "user10501730", "link": "https://stackoverflow.com/users/10501730/user10501730"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1562257744, "creation_date": 1562184108, "last_edit_date": 1562185563, "question_id": 56877189, "link": "https://stackoverflow.com/questions/56877189/difference-between-and-in-3d-array", "title": "Difference between ** and * in 3d array", "body": "<p>Both the codes shown below give the same output i.e for **a and *a (in <code>printf</code>). Why is that?</p>\n\n<p>I am not very good with multi dimensional arrays, I have tried various blogs to understand but still fail to. I dont get how is the output same for both the cases. Thank you in advance.</p>\n\n<p>THE OUTPUT FOR BOTH THE CASES IS \nabcdefghijklm</p>\n\n<pre><code>// CODE 1\nint main() \n{\n\n  char a[2][3][3] = {'a','b','c','d','e','f','g', \n                    'h','i','j','k','l','m'};\n  printf(\"%s \", **a); \n  return 0; \n} \n</code></pre>\n\n<p>///code 2</p>\n\n<p>int main() \n    {</p>\n\n<pre><code>  char a[2][3][3] = {'a','b','c','d','e','f','g', \n                    'h','i','j','k','l','m'};\n  printf(\"%s \", *a); \n  return 0; \n} \n</code></pre>\n"}, {"tags": ["c", "makefile", "webserver"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1562182828, "post_id": 56876883, "comment_id": 100302432, "body": "Compare the compiler commands make emits with the ones you are using manually. What is the difference?"}, {"owner": {"reputation": 3, "user_id": 11557178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EZmuhzT1fs8/AAAAAAAAAAI/AAAAAAAAADk/y9Vve6btHkk/photo.jpg?sz=128", "display_name": "amir eghbalian", "link": "https://stackoverflow.com/users/11557178/amir-eghbalian"}, "reply_to_user": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1562183000, "post_id": 56876883, "comment_id": 100302512, "body": "@mkrieger1 thanks for your advice....I compared my Makefile with manual command but I couldn&#39;t find any difference... I know the problem should be with my Makefile but I can&#39;t figure it out"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 3, "user_id": 11557178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EZmuhzT1fs8/AAAAAAAAAAI/AAAAAAAAADk/y9Vve6btHkk/photo.jpg?sz=128", "display_name": "amir eghbalian", "link": "https://stackoverflow.com/users/11557178/amir-eghbalian"}, "edited": false, "score": 0, "creation_date": 1562183947, "post_id": 56876994, "comment_id": 100302864, "body": "@amireghbalian: from my perspective, what&#39;s odd about <code>.&#47;include&#47;webserverinit.c</code> is that you don&#39;t normally put source files such as <code>webserverinit.c</code> in a directory <code>include</code> which sounds like it will contain headers.  I can&#39;t be sure that&#39;s what Basile was thinking of."}, {"owner": {"reputation": 3, "user_id": 11557178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EZmuhzT1fs8/AAAAAAAAAAI/AAAAAAAAADk/y9Vve6btHkk/photo.jpg?sz=128", "display_name": "amir eghbalian", "link": "https://stackoverflow.com/users/11557178/amir-eghbalian"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562184095, "post_id": 56876994, "comment_id": 100302935, "body": "@JonathanLeffler yes...you are right.... source files should be in source directory instead of include directory but I don&#39;t think it solves the problem"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 3, "user_id": 11557178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EZmuhzT1fs8/AAAAAAAAAAI/AAAAAAAAADk/y9Vve6btHkk/photo.jpg?sz=128", "display_name": "amir eghbalian", "link": "https://stackoverflow.com/users/11557178/amir-eghbalian"}, "edited": false, "score": 1, "creation_date": 1562184375, "post_id": 56876994, "comment_id": 100303026, "body": "@amireghbalian: When <code>webserver.c</code> includes <code>webserverinit.h</code>, what do you write as the <code>#include</code> line?  <code>#include &quot;webserverinit.h&quot;</code>?  Something else?  You might need <code>-I.&#47;include</code> on the compiler command lines \u2014 possibly as part of <code>CFLAGS</code>.   Your <code>CFLAGS</code> should include options such as <code>-O3 -std=c11 -Wall -Wextra -Werror</code>.  The <code>-c</code> and <code>-o</code> options would normally be written verbatim in the command line; they don&#39;t vary between compilers.  I use separate names such as <code>WFLAG1 = -Wall</code> \u2014 <code>WFLAG2 = -Wextra</code> \u2014 <code>WFLAG3 = -Werror</code> \u2014 <code>WFLAGS = ${WFLAG1} ${WFLAG2} ${WFLAG3}</code> <i>[\u2026continued\u2026]</i>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1562184500, "post_id": 56876994, "comment_id": 100303071, "body": "<i>[\u2026continuation\u2026]</i> and then <code>CFLAGS = \u2026 ${WFLAGS} \u2026</code>.  That way, I can turn any of the warnings on or off from the command line: <code>make WFLAG3=</code> disables <code>-Werror</code>, for example.  I don&#39;t often use that unless I&#39;m working on someone else&#39;s code that doesn&#39;t meet my coding standards."}, {"owner": {"reputation": 3, "user_id": 11557178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EZmuhzT1fs8/AAAAAAAAAAI/AAAAAAAAADk/y9Vve6btHkk/photo.jpg?sz=128", "display_name": "amir eghbalian", "link": "https://stackoverflow.com/users/11557178/amir-eghbalian"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562184764, "post_id": 56876994, "comment_id": 100303140, "body": "@JonathanLeffler webserver.c is the main file and first, it uses webserverinit header (#include &quot;../include/webserverinit.h&quot;). it has 3 functions and all of them works fine. another header is webserver_request_response which is responsible for getting a request from clients and sending a response to client. the function for getting request is working fine but the function for sending a response to the client doesn&#39;t work ok."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 3, "user_id": 11557178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EZmuhzT1fs8/AAAAAAAAAAI/AAAAAAAAADk/y9Vve6btHkk/photo.jpg?sz=128", "display_name": "amir eghbalian", "link": "https://stackoverflow.com/users/11557178/amir-eghbalian"}, "edited": false, "score": 1, "creation_date": 1562185043, "post_id": 56876994, "comment_id": 100303233, "body": "@amireghbalian: the working or not of the function in <code>webserver_request_response.c</code> is not related to the <code>makefile</code>; it is related to the code in the source file, and/or the headers it uses. At most, the differences in the build process mean a bug (with &#39;undefined behaviour&#39;) manifests itself differently.  If you create the executable, it probably isn&#39;t the <code>makefile</code> that&#39;s at fault. Note the question <a href=\"https://stackoverflow.com/questions/597318/\">What are the benefits of a relative path such as <code>&quot;..&#47;include&#47;header.h&quot;</code> for a header?</a>"}, {"owner": {"reputation": 3, "user_id": 11557178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EZmuhzT1fs8/AAAAAAAAAAI/AAAAAAAAADk/y9Vve6btHkk/photo.jpg?sz=128", "display_name": "amir eghbalian", "link": "https://stackoverflow.com/users/11557178/amir-eghbalian"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562185259, "post_id": 56876994, "comment_id": 100303325, "body": "@JonathanLeffler I&#39;ll check it out and test it...thanks"}, {"owner": {"reputation": 3, "user_id": 11557178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EZmuhzT1fs8/AAAAAAAAAAI/AAAAAAAAADk/y9Vve6btHkk/photo.jpg?sz=128", "display_name": "amir eghbalian", "link": "https://stackoverflow.com/users/11557178/amir-eghbalian"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562186549, "post_id": 56876994, "comment_id": 100303863, "body": "@JonathanLeffler Thank you so much...You were right... the problem is related to the path...I put all the files in a single directory and used the Makefile and now it works fine"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 1, "last_activity_date": 1562202281, "last_edit_date": 1562202281, "creation_date": 1562183082, "answer_id": 56876994, "question_id": 56876883, "link": "https://stackoverflow.com/questions/56876883/how-can-i-create-a-makefile-to-compile-my-c-code-correctly/56876994#56876994", "title": "How can I create a Makefile to compile my C code correctly?", "body": "<blockquote>\n  <p>How can I create a Makefile to compile my C code correctly?</p>\n</blockquote>\n\n<p>You need a <a href=\"https://en.wikipedia.org/wiki/Source_code_editor\" rel=\"nofollow noreferrer\">source code editor</a> (e.g. <a href=\"https://www.gnu.org/software/emacs/\" rel=\"nofollow noreferrer\"><code>emacs</code></a>) which knows the peculiarities of <a href=\"https://en.wikipedia.org/wiki/Makefile\" rel=\"nofollow noreferrer\"><code>Makefile</code>s</a> in particular the weird role of <kbd>tab</kbd> characters in them.</p>\n\n<blockquote>\n  <p><code>CFLAGS=-c -o</code></p>\n</blockquote>\n\n<p>That is probably wrong. You might want <code>CFLAGS= -g -Wall</code> instead. Hint: run <code>make -p</code> to understand the builtin rules of <code>make</code> and take advantage of them.</p>\n\n<blockquote>\n  <p><code>WEBSERVERINIT_SOURCE=./include/webserverinit.c</code></p>\n</blockquote>\n\n<p>And that looks strange (I guess that you should replace <code>include</code> with <code>src</code>).</p>\n\n<hr>\n\n<p>First, you need to <strong>read documentation</strong>. In particular, about <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html\" rel=\"nofollow noreferrer\">invoking GCC</a> on the command line, and later read the <a href=\"https://www.gnu.org/software/make/manual/html_node/index.html\" rel=\"nofollow noreferrer\">GNU <code>make</code> documentation</a>. <strong>Spend several hours to read</strong> each of them.</p>\n\n<p>Then, you might want to use the <code>-v</code> and <code>-H</code> flags to <code>gcc</code>. Both are helpful.</p>\n\n<p>At last, you should use <a href=\"http://bashdb.sourceforge.net/remake/\" rel=\"nofollow noreferrer\">remake</a> : it is an improved variant of <code>make</code> (designed to ease debugging of your <code>Makefile</code>). You'll use it with the <code>-x</code> flag.</p>\n"}], "owner": {"reputation": 3, "user_id": 11557178, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EZmuhzT1fs8/AAAAAAAAAAI/AAAAAAAAADk/y9Vve6btHkk/photo.jpg?sz=128", "display_name": "amir eghbalian", "link": "https://stackoverflow.com/users/11557178/amir-eghbalian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 1, "accepted_answer_id": 56876994, "answer_count": 1, "score": 0, "last_activity_date": 1562202281, "creation_date": 1562182482, "last_edit_date": 1562184897, "question_id": 56876883, "link": "https://stackoverflow.com/questions/56876883/how-can-i-create-a-makefile-to-compile-my-c-code-correctly", "title": "How can I create a Makefile to compile my C code correctly?", "body": "<p>The problem is that my webserver works fine when I compile my code in terminal using gcc directly:</p>\n\n<pre><code>gcc webserver.c ../include/webserverinit.c ../include/webserver_request_response.c -o webserver\n</code></pre>\n\n<p>but after using Makefile the code doesn't work fine. I don't get any error but one of the functions doesn't work correctly</p>\n\n<p>I don't understand what is happening here. I know my code is ok and to make sure the Makefile is working fine, I used some Makefile generator as well but it is still the same.</p>\n\n<p>I know my code is ok and to make sure the Makefile is working fine I used some Makefile generator as well but it is still the same</p>\n\n<p>Makefile that I'm using:</p>\n\n<pre><code>CC=gcc\nWEBSERVER_OBJECT=./objects/webserver.o\nWEBSERVER_SOURCE=./src/webserver.c\nWEBSERVERINIT_OBJECT=./objects/webserverinit.o #Library to start the webserver and listening on the port\nWEBSERVERINIT_SOURCE=./include/webserverinit.c\nWEBSERVERINIT_HEADER=./include/webserverinit.h\nWEBSERVER_REQUEST_RESPONSE_OBJECT=./objects/webserver_request_response.o #Library for receiving requests and sending respons\nWEBSERVER_REQUEST_RESPONSE_SOURCE=./include/webserver_request_response.c\nWEBSERVER_REQUEST_RESPONSE_HEADER=./include/webserver_request_response.h\nOBJECTS=./objects/webserver.o ./objects/webserverinit.o ./objects/webserver_request_response.o #objects folder\nHEADERS=./include/webserverinit.h ./include/webserver_request_response.h #headers\nOBJECTDIR=./objects\n\nwebserver: ${OBJECTS}\n    ${CC} ${OBJECTS} -o webserver\n\n${WEBSERVER_OBJECT}: ${WEBSERVER_SOURCE} ${HEADERS}\n    ${CC} -c  ${WEBSERVER_SOURCE} -o ${WEBSERVER_OBJECT}\n\n${WEBSERVERINIT_OBJECT}: ${WEBSERVERINIT_SOURCE} ${WEBSERVERINIT_HEADER}\n    ${CC} -c ${WEBSERVERINIT_SOURCE} -o ${WEBSERVERINIT_OBJECT}   \n\n${WEBSERVER_REQUEST_RESPONSE_OBJECT}: ${WEBSERVER_REQUEST_RESPONSE_SOURCE} ${WEBSERVER_REQUEST_RESPONSE_HEADER}\n    ${CC} -c ${WEBSERVER_REQUEST_RESPONSE_SOURCE} -o ${WEBSERVER_REQUEST_RESPONSE_OBJECT} \nclean:\n    rm -rf ${OBJECTDIR}/*.o webserver\n</code></pre>\n\n<p>I want my code works with Makefile as well but it is not working with Makefile. What should I do?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 133, "user_id": 10336980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd91b41ff2f48e50aaee97bbe37f5e13?s=128&d=identicon&r=PG&f=1", "display_name": "terrabyte", "link": "https://stackoverflow.com/users/10336980/terrabyte"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1562182912, "post_id": 56876880, "comment_id": 100302468, "body": "Thank you! CTRL-Z works fine. But may i just ask that i was using while with scanf before and it was working with CTRL-D. What&#39;s the difference between the two cases?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1562183399, "post_id": 56876880, "comment_id": 100302642, "body": "Note that you&#39;re not going to get 4 numbers in the input if your array <code>inputs</code> is of size 4.  The most you can get is 2 single-digit numbers, a blank between them, and a null byte after them.  When reading inputs, don&#39;t skimp.  Use <code>char inputs[4096];</code> as a starting point; you can go bigger if you prefer.  (Yes, that&#39;s partly for the shock value of <code>4096</code>; however, it&#39;s also sane advice for anything other than an embedded environment.) You should also be checking the return value from <code>sscanf()</code> so you know how may of your variables are valid."}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "edited": false, "score": 0, "creation_date": 1562183833, "post_id": 56876880, "comment_id": 100302816, "body": "@terrabyte: Need your scanf code to answer."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1562206000, "post_id": 56876880, "comment_id": 100308013, "body": "This code is complete nonsense"}], "owner": {"reputation": 133, "user_id": 10336980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd91b41ff2f48e50aaee97bbe37f5e13?s=128&d=identicon&r=PG&f=1", "display_name": "terrabyte", "link": "https://stackoverflow.com/users/10336980/terrabyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562182475, "creation_date": 1562182475, "question_id": 56876880, "link": "https://stackoverflow.com/questions/56876880/using-ctrl-d-to-exit-a-while-loop-with-fgets", "title": "Using CTRL-D to exit a while loop with fgets", "body": "<p>I have a while loop using fgets that I want to read inputs from until the user presses CTRL-D. Whenever i run this and press CTRL-D, the while loop never ends.</p>\n\n<pre><code>char inputs[4];\n\nwhile(fgets(inputs, sizeof(inputs), stdin) != NULL){\n    sscanf(inputs, \"%d %d %d %d %d\", &amp;command, &amp;start_row, &amp;start_col, &amp;end_row, &amp;end_col);\n//stuff\n}\nprintf(\"end\");\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1562180524, "post_id": 56876454, "comment_id": 100301533, "body": "The array <code>int counts[0]</code> has no size. You just need <code>int counts = 0;</code> and then use <code>counts</code> instead of <code>counts[0]</code> in the rest of it."}, {"owner": {"reputation": 575, "user_id": 11691682, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UVSuyLYceZE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd83aDbw8r3DEV88AThuN2Q-4oyNA/mo/photo.jpg?sz=128", "display_name": "DaCurse", "link": "https://stackoverflow.com/users/11691682/dacurse"}, "edited": false, "score": 0, "creation_date": 1562180534, "post_id": 56876454, "comment_id": 100301537, "body": "<code>counts[0]</code> should be intialized to some number"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1562180826, "post_id": 56876454, "comment_id": 100301650, "body": "Try <code>int counts[1] = {0};</code> instead of <code>int counts[0];</code> An array of size 0 is not useful."}, {"owner": {"reputation": 10367, "user_id": 380331, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ef911e1dffe26625ae43f8d1cd1ac70e?s=128&d=identicon&r=PG", "display_name": "Agnius Vasiliauskas", "link": "https://stackoverflow.com/users/380331/agnius-vasiliauskas"}, "edited": false, "score": 1, "creation_date": 1562180915, "post_id": 56876454, "comment_id": 100301693, "body": "<a href=\"http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1124.pdf\" rel=\"nofollow noreferrer\">ISO/IEC 9899:TC2:6.7.5.2</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 10367, "user_id": 380331, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ef911e1dffe26625ae43f8d1cd1ac70e?s=128&d=identicon&r=PG", "display_name": "Agnius Vasiliauskas", "link": "https://stackoverflow.com/users/380331/agnius-vasiliauskas"}, "edited": false, "score": 0, "creation_date": 1562181234, "post_id": 56876454, "comment_id": 100301831, "body": "@AgniusVasiliauskas the comments under that answer indicate that a compiler is allowed to build a zero-length array, as long as a diagnostic message is issued. But of course, a zero length array cannot be indexed by <code>[0]</code> as it has no elements."}, {"owner": {"reputation": 10367, "user_id": 380331, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ef911e1dffe26625ae43f8d1cd1ac70e?s=128&d=identicon&r=PG", "display_name": "Agnius Vasiliauskas", "link": "https://stackoverflow.com/users/380331/agnius-vasiliauskas"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1562183191, "post_id": 56876454, "comment_id": 100302573, "body": "@WeatherVane So what ? Many things are allowed for a compiler by a standard, because <b>they are not dis-allowed by it</b>. But this makes these &quot;allowed&quot; things undocumented by a standard, thus implying IDB (implementation-defined behavior) or UB (undefined-behavior). None of these behaviors are really useful for a developer."}, {"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "edited": false, "score": 0, "creation_date": 1562183389, "post_id": 56876454, "comment_id": 100302639, "body": "<a href=\"https://math.stackexchange.com/questions/2260/proof-for-formula-for-sum-of-sequence-123-ldotsn\" title=\"proof for formula for sum of sequence 123 ldotsn\">math.stackexchange.com/questions/2260/&hellip;</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 10367, "user_id": 380331, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ef911e1dffe26625ae43f8d1cd1ac70e?s=128&d=identicon&r=PG", "display_name": "Agnius Vasiliauskas", "link": "https://stackoverflow.com/users/380331/agnius-vasiliauskas"}, "edited": false, "score": 0, "creation_date": 1562183845, "post_id": 56876454, "comment_id": 100302824, "body": "@AgniusVasiliauskas you since changed the <a href=\"https://stackoverflow.com/questions/9722632/what-happens-if-i-define-a-0-size-array-in-c-c/9723093#9723093\">answer link</a> but I supposed you had posted it for a reason, and the comments under the answer said it was incorrect. It wasn&#39;t a useful discussion for a beginner, but I didn&#39;t notice when you edited the comment to a different link."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1562186518, "post_id": 56876454, "comment_id": 100303843, "body": "FWIW:  Zero-length arrays do have some great uses in C.  I use them a lot in binary packing and network communications (<a href=\"https://stackoverflow.com/questions/14643406/whats-the-need-of-array-with-zero-elements\" title=\"whats the need of array with zero elements\">stackoverflow.com/questions/14643406/&hellip;</a>)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 1, "creation_date": 1562208683, "post_id": 56876454, "comment_id": 100308421, "body": "@abelenky no they don&#39;t. All that garbage has undefined behaviour. That&#39;s why c99+ has the flexible array member"}], "answers": [{"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 2, "last_activity_date": 1562180588, "creation_date": 1562180588, "answer_id": 56876487, "question_id": 56876454, "link": "https://stackoverflow.com/questions/56876454/summing-up-integers-in-an-array-and-storing-the-result-in-an-array/56876487#56876487", "title": "Summing up integers in an array and storing the result in an array", "body": "<pre><code>int counts[0];   // This declares an array that holds ZERO elements!  No place to store a value.\nint numbers[] = {1,2,3,4,5,6,7,8,9,10};\nfor(int i = 0; i &lt; 10; i++)\n    counts[0] += numbers[i];\n\nprintf(\"%d \", counts[0]);\n</code></pre>\n\n<p>To fix it:</p>\n\n<pre><code>int counts = 0;   // Declare a variable, and start it at 0\nint numbers[] = {1,2,3,4,5,6,7,8,9,10};\nfor(int i = 0; i &lt; 10; i++)\n    counts += numbers[i];\n\nprintf(\"%d \", counts);\n</code></pre>\n"}], "owner": {"reputation": 609, "user_id": 11171682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b4b97bc5566dbe16f0e5f8eeaeb6d5?s=128&d=identicon&r=PG&f=1", "display_name": "hkj447", "link": "https://stackoverflow.com/users/11171682/hkj447"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1562180588, "creation_date": 1562180402, "question_id": 56876454, "link": "https://stackoverflow.com/questions/56876454/summing-up-integers-in-an-array-and-storing-the-result-in-an-array", "title": "Summing up integers in an array and storing the result in an array", "body": "<p>I am attempting to do this for a smaller example so that I can do it for a larger sample.</p>\n\n<p>Here is my attempted code:</p>\n\n<pre><code>int counts[0];\nint numbers[] = {1,2,3,4,5,6,7,8,9,10};\nfor(int i = 0; i &lt; 10; i++)\n    counts[0] += numbers[i];\n\nprintf(\"%d \", counts[0]);\n</code></pre>\n\n<p>This should yield 55, but my output is only 14. There is an issue with how I am setting up the <code>numbers</code> array, but I am not quite sure how to fix this. Any help is appreciated, thank you.</p>\n"}, {"tags": ["c", "linux-kernel", "linux-device-driver"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11407488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d36bec046049e606cdc628d89c2f518a?s=128&d=identicon&r=PG&f=1", "display_name": "perolator", "link": "https://stackoverflow.com/users/11407488/perolator"}, "is_accepted": false, "score": 0, "last_activity_date": 1562179627, "creation_date": 1562179627, "answer_id": 56876306, "question_id": 56875655, "link": "https://stackoverflow.com/questions/56875655/what-does-dev-net-set-do-in-linux/56876306#56876306", "title": "What does dev_net_set do in Linux?", "body": "<p>AFAIK, net is a structure that will allow the kernel to interact with the device. You need it to register the device and remove it in the module cleanup function. Please review the code under linux/net/8021q/ for examples.</p>\n"}, {"comments": [{"owner": {"reputation": 2726, "user_id": 5896591, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71a43ee15bbb5a512cf554b430416e33?s=128&d=identicon&r=PG&f=1", "display_name": "personal_cloud", "link": "https://stackoverflow.com/users/5896591/personal-cloud"}, "edited": false, "score": 0, "creation_date": 1562526502, "post_id": 56906842, "comment_id": 100392335, "body": "Yes, I am trying to understand the kernel and network subsystem, so that my driver behaves as expected, and I&#39;m writing a loopback-like driver, so I don&#39;t care about PCI etc. Good observations. However, I don&#39;t see how <code>for_each_net</code> can possibly pertain to L5+. It is calling <code>register_netdev</code> on multiple things, so it is managing multiple L2s, so if anything it must be something <i>below</i> L2."}, {"owner": {"reputation": 394, "user_id": 2277550, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f674a3b394b041e5f369ea5e1214b17f?s=128&d=identicon&r=PG", "display_name": "user2277550", "link": "https://stackoverflow.com/users/2277550/user2277550"}, "reply_to_user": {"reputation": 2726, "user_id": 5896591, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71a43ee15bbb5a512cf554b430416e33?s=128&d=identicon&r=PG&f=1", "display_name": "personal_cloud", "link": "https://stackoverflow.com/users/5896591/personal-cloud"}, "edited": false, "score": 0, "creation_date": 1562560259, "post_id": 56906842, "comment_id": 100397902, "body": "Yes, all the net_dev related stuff, are L2-L0. See, loop-back is the name for a functionality, where the packets simply bounce back to the host system, rather than be sent to another host. That functionality is most easily implemented at the level of sockets (L5+). However, it is just as possible to bypass that, make the data go through all the protocol (TCP/IP) (L5-L2), send it to a dummy device/driver (L2-L0), and make that driver, send back that packet to the host device in some appropriate manner. Of course, the tutorial is meant to teach students the (L2-L0) network stack details."}], "tags": [], "owner": {"reputation": 394, "user_id": 2277550, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f674a3b394b041e5f369ea5e1214b17f?s=128&d=identicon&r=PG", "display_name": "user2277550", "link": "https://stackoverflow.com/users/2277550/user2277550"}, "is_accepted": false, "score": 0, "last_activity_date": 1562347082, "last_edit_date": 1562347082, "creation_date": 1562345916, "answer_id": 56906842, "question_id": 56875655, "link": "https://stackoverflow.com/questions/56875655/what-does-dev-net-set-do-in-linux/56906842#56906842", "title": "What does dev_net_set do in Linux?", "body": "<p>AFAIK, looping happens at the level of sockets (layer 5-7), whereas net_dev is used as the kernel component that immediately interacts with the driver, when you actually want to use a say, ethernet card, or SLIP,PLIP for transmitting frames (layer 2-0). Loopback happens at the level of the network subsystem of the kernel, and lies way above the drivers which interact with the hardware. So I don't see why you would need a driver to use the loopback feature. However, there is also a provision for registering a dummy device with net_dev, though I don't know if that is what you are looking for.</p>\n\n<p>That said, if your intention is to simply use some driver that simulates an actual physical device without one and say, reflects the packets that it recieves, that is possible too. Basically till the net_dev layer, the kernel does all the protocol stuff (TCP/IP), and finally passes off the packet to some handle that the device driver registers with the net_dev or something similar. Similarly on receiving stuff, the device triggers an interrupt, the driver does a DMA operation, and the kernel takes over from there. Hence instead of the code for doing the DMA operation, you can make a module that simply pass over a static packet, that is compatible with ethernet/TCP/IP .  In a vast majority of cases, all these aspects (the network and other subsystems) are agnostic to the underlying bus details, i.e. it shouldn't matter whether the ethernet card is connected to PCI or ISA but there can be exceptions. Thus, IMHO, you are trying to do something that should only be attempted after having a thorough understanding of the network subsystem, and a good enough understanding of the kernel as a whole. Till then you will be shooting in the dark. Sometimes you may hit, but often-times you will miss. </p>\n"}, {"tags": [], "owner": {"reputation": 2726, "user_id": 5896591, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71a43ee15bbb5a512cf554b430416e33?s=128&d=identicon&r=PG&f=1", "display_name": "personal_cloud", "link": "https://stackoverflow.com/users/5896591/personal-cloud"}, "is_accepted": false, "score": 0, "last_activity_date": 1562644679, "creation_date": 1562644679, "answer_id": 56945133, "question_id": 56875655, "link": "https://stackoverflow.com/questions/56875655/what-does-dev-net-set-do-in-linux/56945133#56945133", "title": "What does dev_net_set do in Linux?", "body": "<p><a href=\"http://man7.org/linux/man-pages/man8/ip-netns.8.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man8/ip-netns.8.html</a></p>\n\n<blockquote>\n  <p>A network namespace is logically another copy of the network stack,\n  with its own routes, firewall rules, and network devices.</p>\n</blockquote>\n\n<p>So <code>for_each_net</code> is looping over these namespaces and creating a copy of all \"per net\" network devices in each one.</p>\n\n<p>Use <code>ip netns list</code> to determine whether you are using network namespaces. Often they are not used, so drivers do not necessarily need to use <code>dev_net_set</code>.</p>\n"}], "owner": {"reputation": 2726, "user_id": 5896591, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71a43ee15bbb5a512cf554b430416e33?s=128&d=identicon&r=PG&f=1", "display_name": "personal_cloud", "link": "https://stackoverflow.com/users/5896591/personal-cloud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1562644679, "creation_date": 1562176678, "last_edit_date": 1562177604, "question_id": 56875655, "link": "https://stackoverflow.com/questions/56875655/what-does-dev-net-set-do-in-linux", "title": "What does dev_net_set do in Linux?", "body": "<p>I am writing a simple net device driver based on the loopback driver and want to register my <code>net_device</code> structure. <a href=\"https://stackoverflow.com/questions/6726939/\">This</a> and <a href=\"http://gauss.ececs.uc.edu/Courses/e4022/code/drivers/Kernel/docs.html\" rel=\"nofollow noreferrer\">that</a> page on writing a net device say to just call <code>register_netdev</code>. But they're writing fancy drivers with PCI express and other complicated things.</p>\n\n<p>So, if I just want something like the loopback driver, I should presumably base my code on <code>loopback.c</code>. My question is, what does the first line of this code in <code>loopback_net_init</code> do:</p>\n\n<pre><code>dev_net_set(dev, net);\nerr = register_netdev(dev);\n</code></pre>\n\n<p>Apparently <code>net</code> is determined by this code in <code>net_namespace.c</code>:</p>\n\n<pre><code>register_pernet_device(ops) ...\n__register_pernet_operations(list, ops)\n   for_each_net(net) ...\n</code></pre>\n\n<p>What is this looping for? What might go wrong if I skip the <code>dev_net_set</code> call? Why are others not using it?</p>\n"}, {"tags": ["c", "assembly", "jit"], "comments": [{"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1562175219, "post_id": 56875298, "comment_id": 100299194, "body": "@RossRidge why not? Also, I don&#39;t need to jump back."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1562175423, "post_id": 56875298, "comment_id": 100299293, "body": "@RossRidge My <code>op_return</code> would copy the return instruction, but I suppose there&#39;s a problem with the full function epilogue?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1562175716, "post_id": 56875298, "comment_id": 100299405, "body": "You need <a href=\"https://en.wikipedia.org/wiki/Position-independent_code\" rel=\"nofollow noreferrer\">position independent code</a> that is complete and self-contained."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1562175805, "post_id": 56875298, "comment_id": 100299442, "body": "@user3386109 added that to the question."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1562176728, "post_id": 56875298, "comment_id": 100299842, "body": "@RossRidge all this happens in one stack frame. So returning from the function is exactly what I want to happen at the end of <code>jit_code</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1562177022, "post_id": 56875298, "comment_id": 100299983, "body": "Imagine you have three operations. OpX expects input in register B and puts output in register A, which we&#39;ll denote <code>OpX(B-&gt;A)</code>. The other operations are <code>OpY(B-&gt;A)</code> and <code>OpZ(B,C-&gt;A)</code>. So if you want the outputs of OpX and OpY to be the input to OpZ, you can&#39;t simply concatenate the three code blocks. You need glue logic to move the variables around."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1562177282, "post_id": 56875298, "comment_id": 100300092, "body": "@user3386109 My interpreter is already jumping around all over the function using computed goto, so there&#39;s no precondition for arriving at a label. It&#39;s effectively concatenating the code blocks for each instruction."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1562177643, "post_id": 56875298, "comment_id": 100300233, "body": "And that&#39;s where this discussion ends, because those of us reading your question can&#39;t see what you&#39;ve already implemented. And with a problem like this, it&#39;s all about the details."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1562177760, "post_id": 56875298, "comment_id": 100300279, "body": "@user3386109 Um, it&#39;s the standard computed goto interpreter like the various ones online. I guess I can add more if you really need it."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1562178174, "post_id": 56875298, "comment_id": 100300457, "body": "That comment actually does clear things up a little. One of the issues you&#39;ll face is PC relative addressing which is used, for example, to access string literals and <code>const</code> data."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 3, "creation_date": 1562178903, "post_id": 56875298, "comment_id": 100300775, "body": "@RossRidge: The <code>&amp;&amp;</code> feature they are using is a GCC feature, and GCC supports subtracting pointers to void."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1562193927, "post_id": 56875298, "comment_id": 100306019, "body": "Yes it could be clipped out because you compiled with no optimization.  But only if jumped to with the same stack layout as this function, which precludes calling it as a function.  Besides, that&#39;s hardly useful.  Anything you could do by copying around blocks of un-optimized code could be done more efficiently by writing an interpreter in portable C."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1562194228, "post_id": 56875298, "comment_id": 100306088, "body": "@PeterCordes sometimes interesting insights come out of doing things that aren&#39;t useful."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1562199946, "post_id": 56875298, "comment_id": 100307093, "body": "@Taylor: that&#39;s a good point; upvoted your question now that you added more detail.  I&#39;m not saying (here or in my answer) that it&#39;s a bad <i>question</i>, just that it&#39;s not something you&#39;d probably actually want to use directly, in this form.  And I don&#39;t see a reliable/safe way to extract useful snippets from functions in optimized compiler output.  It seems to me that this is probably not a useful avenue to investigate further, other than to learn more about how machine-code works."}], "answers": [{"comments": [{"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "edited": false, "score": 0, "creation_date": 1562175504, "post_id": 56875370, "comment_id": 100299321, "body": "Suppose I know it&#39;s not a Harvard architecture. What else?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 3, "creation_date": 1562177197, "post_id": 56875370, "comment_id": 100300054, "body": "Even if the code is not a Harvard architecture and is position-independent, it might rely on its relation to other code, such as the distance to <code>add_stuff</code>. It might rely on registers the compiler sets up prior to the <code>op_add</code> label. The code between <code>op_add</code> and <code>op_add_end</code> might include additional instructions not actually needed for the <code>add_stuff</code> call but that the compiler decided were useful for neighboring things, but which will screw up elsewhere."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1562177905, "post_id": 56875370, "comment_id": 100300352, "body": "@EricPostpischil that seems like a good answer. You could post it, maybe with some more specifics."}], "tags": [], "owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1562175240, "creation_date": 1562175240, "answer_id": 56875370, "question_id": 56875298, "link": "https://stackoverflow.com/questions/56875298/jittting-with-limited-knowledge-of-the-target-architecture/56875370#56875370", "title": "JITtting with limited knowledge of the target architecture", "body": "<p>No, this won't work in general. Here's just one of many reasons why:</p>\n\n<p>Consider the AVR architecture. It's a Harvard architecture, so code and data don't live in the same address space. On it, your code will make a copy of whatever data happens to live in the data memory with the same address as the code memory you meant to copy, but will then ignore that anyway, and run whatever code is in the code memory with the same address as the data memory's destination location.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1562182388, "post_id": 56876357, "comment_id": 100302281, "body": "Or across most ISAs, if the block you copy has any <code>call</code> instructions to other functions, you have the same problem.  Most ISAs encode function-call instructions (x86 <code>call</code>, ARM <code>bl</code>, etc.) with a PC-relative displacement.  Besides literal pools, any code that does PC-relative access to static constants/data will break if you move it relative to the rest of the program.  e.g. x86-64 RIP-relative addressing modes."}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 5, "last_activity_date": 1562179834, "creation_date": 1562179834, "answer_id": 56876357, "question_id": 56875298, "link": "https://stackoverflow.com/questions/56875298/jittting-with-limited-knowledge-of-the-target-architecture/56876357#56876357", "title": "JITtting with limited knowledge of the target architecture", "body": "<p>Here's another reason this won't work on one architecture:</p>\n\n<p>ARM Thumb code uses out-of-line immediate values with PC-relative addressing. An operation like</p>\n\n<pre><code>a += 12345;\n</code></pre>\n\n<p>could be compiled as:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ldr  r3, [pc, #&lt;offset to constant&gt;]\nadds r0, r4, r3\n\n\u2026 other unrelated code \u2026\n\nbx   lr      ; end of the function\n.word 12345  ; oh, and here's the constant\n</code></pre>\n\n<p>Copying a fragment of this function would leave the reference to the constant unresolved; it'd end up using an unexpected value from elsewhere in memory.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1562182170, "post_id": 56876700, "comment_id": 100302184, "body": "I could imagine it working sometimes in debug mode (<code>gcc -O0</code>), where every C statement <i>is</i> compiled to a separate block of asm.  (Especially if only called from inside the same function that the machine code was copied from, so the stack frame layout matches).  But yeah this is pretty much a non-starter; nobody wants debug-mode machine code.  Whatever you were hoping to gain by JITing, you could get better results with plain C and letting the optimizer do its thing."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "edited": false, "score": 0, "creation_date": 1562191251, "post_id": 56876700, "comment_id": 100305437, "body": "Can you give a precise example of such a transformation and how it would mess things up? Assume we aren&#39;t dealing with PC-relative addressing."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "edited": false, "score": 0, "creation_date": 1562191651, "post_id": 56876700, "comment_id": 100305548, "body": "@Taylor: For example, the code might contain a branch that the compiler deems unlikely or &quot;slow no matter what&quot;, and decide to move that out to the end of the function (or even to a separate section) and jump to it, then jump back at the end, so as to improve cache coherency for the &quot;hot paths&quot;."}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 3, "last_activity_date": 1562181505, "creation_date": 1562181505, "answer_id": 56876700, "question_id": 56875298, "link": "https://stackoverflow.com/questions/56875298/jittting-with-limited-knowledge-of-the-target-architecture/56876700#56876700", "title": "JITtting with limited knowledge of the target architecture", "body": "<p>Not only do underlying instruction set architectures not work that way (as other answers have noted); <strong>C doesn't work that way</strong>. There's nothing to constrain the compiler to placing source-level code paths contiguously in the same pattern as labels between them. It's free to make all sorts of transformations including common subexpression elimination across different paths, outlining, etc. And of course it can also use the assumption that the code is executing in the function it's written as part of, rather than in some other context, to derive invariants that take part in transformations.</p>\n\n<p>TL;DR: C is <strong>not</strong> \"high-level assembly\" and therefore you can't use it where an assembler is needed.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1562183016, "post_id": 56876860, "comment_id": 100302517, "body": "AVR does have special instructions to load/store to program memory; the point is that <code>memcpy</code> won&#39;t compile to use those instructions.  But yes that&#39;s a pretty niche objection; most true Harvard CPUs these days are lightweight microcontrollers that are normally hooked up to Flash, not DRAM, for code.  You would need GCC&#39;s <code>__builtin___clear_cache</code> on the range you copied."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1562183143, "post_id": 56876860, "comment_id": 100302555, "body": "Worth mentioning that &quot;normal&quot; code for x86-64 will violate your requirements: access to static data <i>does</i> use PC-relative addressing (aka RIP-relative).  So do calls to existing functions, using <code>call rel32</code>."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1562183271, "post_id": 56876860, "comment_id": 100302595, "body": "<code>asm volatile</code> with clobbers on all registers isn&#39;t 100% guaranteed to stop optimizations that break this.  e.g. GCC might CSE and hoist something expensive, and then (because of the clobbers) spill it to the stack ahead of the first asm statement, instead of just moving the computation to after.  Plus, that means you have to know the register names for the target architecture."}, {"owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1562183778, "post_id": 56876860, "comment_id": 100302793, "body": "@PeterCordes: You&#39;re over-thinking it. When all the code is trivial (no control flow, no loops, nothing that can be optimised - e.g. like <code>void increment(void) { ptr++; }</code>) these problems don&#39;t exist; and the restrictions (e.g. no args) mean that all code must be trivial (and therefore these problems can&#39;t exist)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1562184278, "post_id": 56876860, "comment_id": 100302994, "body": "The OP was talking about picking out code from the <i>middle</i> of a function, between two C labels.  It wasn&#39;t clear if you were still talking about that with calls <i>to</i> such a function, but now I guess you&#39;re just talking about putting labels at the start/end of that trivial <code>increment</code> function.  And putting the <code>memcpy</code> somewhere else in the function?  Or maybe you mean using the function name to get the start address, not depending on local labels.  Anyway, of course the RIP-relative addressing problem will still exist unless you work around it like you suggest."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "edited": false, "score": 0, "creation_date": 1562190366, "post_id": 56876860, "comment_id": 100305186, "body": "@Brendan what about the case of <code>val++</code> as above? (<code>val</code> being a local variable in the function) Why would that not work?"}, {"owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "reply_to_user": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "edited": false, "score": 0, "creation_date": 1562216936, "post_id": 56876860, "comment_id": 100309884, "body": "@Taylor: That won&#39;t work because it depends on either the compiler generated stack layout and function&#39;s epilogue (which isn&#39;t between the labels) or the register allocation strategy the compiler felt like using."}], "tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": false, "score": 1, "last_activity_date": 1562182388, "creation_date": 1562182388, "answer_id": 56876860, "question_id": 56875298, "link": "https://stackoverflow.com/questions/56875298/jittting-with-limited-knowledge-of-the-target-architecture/56876860#56876860", "title": "JITtting with limited knowledge of the target architecture", "body": "<blockquote>\n  <p><strong>Will this work?</strong></p>\n</blockquote>\n\n<p><strong>Yes</strong>; this can work.</p>\n\n<p>However, it can only work for very limited cases where:</p>\n\n<ul>\n<li><p>there's no arguments to your functions. For example, if you're JITting a language like brainfuck (see <a href=\"https://en.wikipedia.org/wiki/Brainfuck\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Brainfuck</a> ) then you might have functions like \"<code>void increment(void);</code> and <code>void putchar(void)</code> which modify global state (e.g. <code>struct machine_state { void * ptr; }</code>).</p></li>\n<li><p>There is either no position independence (the address of the global state is a fixed/constant address), or you can tell the compiler to reserve a register to use as \"pointer to global state\" (which is something that GCC supports).</p></li>\n<li><p>The target machine supports some way to treat data as code. Note: This is relatively irrelevant (if a machine can't do this somehow, then you wouldn't be able to execute files either).</p></li>\n<li><p>You use barriers to prevent the compiler from shifting code out of your labels. Note: This is also relatively irrelevant (e.g. if you use inline assembly to define the label and mark the inline assembly as volatile, and put everything in the clobber list, then..).</p></li>\n<li><p>You're not using \"pure portable C\". Note: You're already using compiler specific extensions (computed goto) so I assume this is also relatively irrelevant.</p></li>\n</ul>\n\n<p>For all of these limitations; the only one that's likely to matter in practice is the first one - anything worth JITting will be too complicated (e.g. you'll want functions like <code>void add(int register_number_1, int register_number_2);</code>), and as soon as you try to pass arguments to your functions you'll end up depending on target specific calling conventions.</p>\n"}, {"comments": [{"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "edited": false, "score": 0, "creation_date": 1562194257, "post_id": 56878794, "comment_id": 100306090, "body": "This is not a friendly answer. Notice the worlds of judgment: &quot;hardly useful&quot;, &quot;non-terrible&quot;. And the unnecessary bold-facing."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "edited": false, "score": 3, "creation_date": 1562199195, "post_id": 56878794, "comment_id": 100306981, "body": "@Taylor: I&#39;m not saying you&#39;re a bad person for having this idea.  I&#39;m trying to give an objective assessment of the viability of this <i>idea</i>.  i.e. I&#39;m trying to help you reject this idea as maybe possible in theory in super-controlled circumstances, but not useful for performance.  Similar to what Brendan&#39;s answer says: this can only work without optimization.  IDK what you&#39;re hoping to accomplish with this.  As just a &quot;playing with machine code&quot; / silly computer tricks learning exercise, sure."}, {"owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "edited": false, "score": 0, "creation_date": 1562203257, "post_id": 56878794, "comment_id": 100307582, "body": "I&#39;ve already accomplished a lot here! I&#39;ve learned about PC-relative addressing. I didn&#39;t know what a Harvard architecture was (I don&#39;t do embedded). I&#39;ve also taken a closer look at assembly, which I haven&#39;t really done since grad school. Pity I encountered the usual SO attitude, because all the subtle ways people tell you that you&#39;re stupid on this site can really add up."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 3, "last_activity_date": 1562199479, "last_edit_date": 1562199479, "creation_date": 1562194211, "answer_id": 56878794, "question_id": 56875298, "link": "https://stackoverflow.com/questions/56875298/jittting-with-limited-knowledge-of-the-target-architecture/56878794#56878794", "title": "JITtting with limited knowledge of the target architecture", "body": "<blockquote>\n  <p>Update ...  It looks like this little snippet could be clipped out.</p>\n</blockquote>\n\n<p>Yes it could be clipped out <strong>because you compiled with no optimization</strong>, and the code is only accessing a local on the stack.</p>\n\n<p>But only if jumped to with the same stack layout as this function, which precludes calling it as a function.  But yes with a computed goto I guess that works.</p>\n\n<p>If you were accessing anything in static storage (constants or global/static variables), x86-64 compilers would use RIP-relative addressing modes like <code>var(%rip)</code>, which would break if you changed the position of the code relative to the data.</p>\n\n<p>Calls to other functions will also break, because they'll compile to <code>call rel32</code> where the target address is encoded relative to the call site.</p>\n\n<hr>\n\n<p>Overall this is hardly useful.  Anything you could do by copying around blocks of un-optimized code could probably be done more efficiently by writing an interpreter in portable C.  Your idea will very easily break with optimization enabled.</p>\n\n<p>For example, if you wanted to increment <code>n</code> times, introducing a store/reload cycle adds about 5 cycles of store-forwarding latency into the critical path if you just copy this block <code>n</code> times.</p>\n\n<p>Also, <a href=\"https://stackoverflow.com/questions/35741814/how-does-builtin-clear-cache-work#comment85964322_35741869\">you need <code>__builtin___clear_cache</code></a> on the range you copied if you were to enable optimization.  And yes this applies even on x86, where it doesn't actually clear cache but does still stop dead-store elimination from removing the <code>memcpy</code>.</p>\n\n<hr>\n\n<p>If you want to spend more time up front to make non-terrible machine code, use a JIT engine like LLVM.</p>\n\n<p><strong>Your idea is viable as a toy / experiment in some limited cases, but I would highly recommend against using it for any real use, especially if performance is your goal.</strong></p>\n"}], "owner": {"reputation": 4581, "user_id": 682466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6f59c63feba66c8eae54b0edc2b01bd8?s=128&d=identicon&r=PG", "display_name": "Taylor", "link": "https://stackoverflow.com/users/682466/taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1562199479, "creation_date": 1562174878, "last_edit_date": 1562193144, "question_id": 56875298, "link": "https://stackoverflow.com/questions/56875298/jittting-with-limited-knowledge-of-the-target-architecture", "title": "JITtting with limited knowledge of the target architecture", "body": "<p>I've implemented a little bytecode interpreter using computed goto (<a href=\"https://eli.thegreenplace.net/2012/07/12/computed-goto-for-efficient-dispatch-tables/\" rel=\"nofollow noreferrer\">see here</a> if not familiar).</p>\n\n<p>It would seem that perhaps it's possible to do simple JITting by copying the memory between labels, thus optimizing out the jumps. For example, say I've got the following in my interpreter:</p>\n\n<pre><code>op_inc: val++; DISPATCH();\n</code></pre>\n\n<p>I would change this to:</p>\n\n<pre><code>op_inc: val++;\nop_inc_end:\n</code></pre>\n\n<p>When JITting, I would append memory between the labels to my output:</p>\n\n<p><code>memcpy(jit_code+offset, &amp;&amp;op_inc, &amp;&amp;op_inc_end - &amp;&amp;op_inc);</code></p>\n\n<p>(<code>jit_code</code> is marked executable using <code>mmap</code>)</p>\n\n<p>Finally, I would use computed <code>goto</code> to jump to the beginning of the copied machine code:</p>\n\n<p><code>goto *(void*)jit_code</code></p>\n\n<p><strong>Will this work?</strong> Is there something missing in my mental model of machine code that would thwart this idea?</p>\n\n<p>Let's assume that code and data share the same address space. Let's also assume PIC.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Looking at the example in <a href=\"https://eli.thegreenplace.net/2012/07/12/computed-goto-for-efficient-dispatch-tables/\" rel=\"nofollow noreferrer\">linked article</a>, after removing <code>DISPATCH</code>, we have:</p>\n\n<pre><code>        do_inc:\n            val++;\n        do_dec:\n            val--;\n        do_mul2:\n            val *= 2;\n        do_div2:\n            val /= 2;\n        do_add7:\n            val += 7;\n        do_neg:\n            val = -val;\n        do_halt:\n            return val;\n</code></pre>\n\n<p>The generated code for <code>do_inc</code> (no optimization) is simply:</p>\n\n<pre><code>Ltmp0:                                  ## Block address taken\n## %bb.1:\n    movl    -20(%rbp), %eax\n    addl    $1, %eax\n    movl    %eax, -20(%rbp)\n</code></pre>\n\n<p>(followed directly by <code>do_dec</code>). It looks like this little snippet could be clipped out.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1562173607, "post_id": 56875002, "comment_id": 100298489, "body": "So.. what this line is supposed to do: <code>scanf(&quot;%d&quot;, &amp;u);</code> ? Your comments are correct (but not complete..). Why are you showing us a broken code?"}, {"owner": {"reputation": 25, "user_id": 10760911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4IMLD.jpg?s=128&g=1", "display_name": "Tr\u01b0\u01a1ng Qu\u1ed1c Qu&#226;n", "link": "https://stackoverflow.com/users/10760911/tr%c6%b0%c6%a1ng-qu%e1%bb%91c-qu%c3%a2n"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1562173702, "post_id": 56875002, "comment_id": 100298520, "body": "Hi, scanf(&quot;%d&quot;, &amp;u) sends inputs from user into the variable u, but u is a pointer, so I can&#39;t understand what&#39;s going on."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1562173708, "post_id": 56875002, "comment_id": 100298523, "body": "The pointers <code>p</code>, <code>q</code> and <code>u</code> are uninitialized, they don&#39;t point to a valid memory address. That&#39;s why <code>scanf(&quot;%d&quot;, u)</code> would be undefined behavior. When you use <code>scanf(&quot;%d&quot;, &amp;u)</code> you misuse the pointer as an <code>int</code> variable; here it should be <code>int u;</code> instead of <code>int *u;</code>"}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1562173769, "post_id": 56875002, "comment_id": 100298547, "body": "@Tr\u01b0\u01a1ngQu\u1ed1cQu&#226;n Please <a href=\"https://stackoverflow.com/posts/56875002/edit\">edit</a> your question to add more information or clarification instead of writing comments."}, {"owner": {"reputation": 575, "user_id": 11691682, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UVSuyLYceZE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd83aDbw8r3DEV88AThuN2Q-4oyNA/mo/photo.jpg?sz=128", "display_name": "DaCurse", "link": "https://stackoverflow.com/users/11691682/dacurse"}, "edited": false, "score": 0, "creation_date": 1562173882, "post_id": 56875002, "comment_id": 100298605, "body": "An <code>int*</code> is a different type of variable, it contains the address of an <code>int</code>. By scanning into <code>&amp;u</code> you are scanning the address it will point to, which will probably be nothing."}, {"owner": {"reputation": 25, "user_id": 10760911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4IMLD.jpg?s=128&g=1", "display_name": "Tr\u01b0\u01a1ng Qu\u1ed1c Qu&#226;n", "link": "https://stackoverflow.com/users/10760911/tr%c6%b0%c6%a1ng-qu%e1%bb%91c-qu%c3%a2n"}, "reply_to_user": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1562174005, "post_id": 56875002, "comment_id": 100298649, "body": "Hi @Bodo, how could the computer recognize a pointer as a normal variable? I know pointers are variables but shouldn&#39;t &quot;int* p&quot; be enough for the machine to recognize p as a pointer and therefore should&#39;ve sent errors?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1562174596, "post_id": 56875002, "comment_id": 100298901, "body": "You need to learn what the pointer is. This is explain in any C book. This not the programming problem, you need to read a bit more"}], "answers": [{"comments": [{"owner": {"reputation": 575, "user_id": 11691682, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UVSuyLYceZE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd83aDbw8r3DEV88AThuN2Q-4oyNA/mo/photo.jpg?sz=128", "display_name": "DaCurse", "link": "https://stackoverflow.com/users/11691682/dacurse"}, "edited": false, "score": 0, "creation_date": 1562174090, "post_id": 56875108, "comment_id": 100298695, "body": "This would still do nothing and cause a crash/freeze if the pointer isn&#39;t initialized to a valid address."}, {"owner": {"reputation": 25, "user_id": 10760911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4IMLD.jpg?s=128&g=1", "display_name": "Tr\u01b0\u01a1ng Qu\u1ed1c Qu&#226;n", "link": "https://stackoverflow.com/users/10760911/tr%c6%b0%c6%a1ng-qu%e1%bb%91c-qu%c3%a2n"}, "edited": false, "score": 0, "creation_date": 1562174204, "post_id": 56875108, "comment_id": 100298737, "body": "I know :) that&#39;s why it&#39;s so weird :) but Bodo gave me suggestions that I should try now. I&#39;ll update if you want to chase this problem."}], "tags": [], "owner": {"reputation": 2531, "user_id": 6084317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4295c9b1ada748080d7a123f7263ae69?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Minnix", "link": "https://stackoverflow.com/users/6084317/edward-minnix"}, "is_accepted": false, "score": 0, "last_activity_date": 1562174231, "last_edit_date": 1562174231, "creation_date": 1562174011, "answer_id": 56875108, "question_id": 56875002, "link": "https://stackoverflow.com/questions/56875002/why-does-global-pointers-behave-erratically-in-this-function/56875108#56875108", "title": "Why does global pointers behave erratically in this function?", "body": "<p>Your global variables are the pointers to the ints, not the ints themselves. When you read in the values, you change where in memory <code>u</code> points to, not the value of <code>u</code>.</p>\n\n<p>You should replace it with either <code>scanf(\"%d\", u);</code> or change the declaration to <code>int u</code>.</p>\n\n<p>You need to be careful taking pointer values from the user. Otherwise, you could risk things like null pointer dereferencing. For instance, Entering <code>0</code> when you <code>scanf(\"%d\", &amp;u);</code>, it would then make the value of <code>u</code> be <code>NULL</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1562175194, "last_edit_date": 1562175194, "creation_date": 1562174284, "answer_id": 56875179, "question_id": 56875002, "link": "https://stackoverflow.com/questions/56875002/why-does-global-pointers-behave-erratically-in-this-function/56875179#56875179", "title": "Why does global pointers behave erratically in this function?", "body": "<p>Pointers need to point to something, such as another variable, or memory allocated dynamically with <code>malloc()</code>.</p>\n\n<p>You can't use <code>scanf()</code> to read directly into a pointer. You can use it to read into what the pointer points to.</p>\n\n<p>So you can write something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\nint q;\nint *qp = &amp;q;\nint *up;\nint p;\nint *pp = &amp;p;\nvoid test () {\n    printf(\"Insert #1?\\t\"); scanf(\"%d\", up); \n    printf(\"Insert #2?\\t\"); scanf(\"%d\", pp); \n}\nint main () {\n    up = malloc(sizeof(*up));\n    test ();\n    printf(\"%d\\n\", *up); \n    printf(\"%d\\n\", p);\n    printf(\"%d\\n\", q);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 575, "user_id": 11691682, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UVSuyLYceZE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd83aDbw8r3DEV88AThuN2Q-4oyNA/mo/photo.jpg?sz=128", "display_name": "DaCurse", "link": "https://stackoverflow.com/users/11691682/dacurse"}, "is_accepted": false, "score": 1, "last_activity_date": 1562174308, "creation_date": 1562174308, "answer_id": 56875183, "question_id": 56875002, "link": "https://stackoverflow.com/questions/56875002/why-does-global-pointers-behave-erratically-in-this-function/56875183#56875183", "title": "Why does global pointers behave erratically in this function?", "body": "<p>As I said in my comment to the question, a pointer is a type that holds the address to another variable of some type, so <code>int*</code> holds an address for a variable of type <code>int</code>. In your case, <code>&amp;u</code> is referring to the address of <code>u</code>, so you're trying to scan a number into a pointer which won't work. You should change it to only <code>u</code> so it will scan to the variable it points too, but it needs to point to a valid variable in the first place. Here is a valid example:</p>\n\n<pre><code>int someNumber = 5;\nint* u = &amp;someNumber; // u points to a valid address statically allocated\nscanf(\"%d\", u); // Scans the number inputed to someNumber because u points to it\ngetchar(); // Avoid buffer overflow\nprintf(\"%d\\n\", *u); // A * dereferences u - gets the value of the variable it's pointing to\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 10760911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4IMLD.jpg?s=128&g=1", "display_name": "Tr\u01b0\u01a1ng Qu\u1ed1c Qu&#226;n", "link": "https://stackoverflow.com/users/10760911/tr%c6%b0%c6%a1ng-qu%e1%bb%91c-qu%c3%a2n"}, "edited": false, "score": 0, "creation_date": 1562175150, "post_id": 56875223, "comment_id": 100299164, "body": "I know the basic syntaxes but I don&#39;t have a deep understanding... due to the nature of our syllabus (which is to give general understanding of the syntax, emphasizing on building algorithms and mathematics). That&#39;s why I know what to write (hence the comments), but not the underlying things that happen under the hood. Do you recommend any other books besides K&amp;R and C for Dummies?"}], "tags": [], "owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "is_accepted": false, "score": 3, "last_activity_date": 1562174506, "creation_date": 1562174506, "answer_id": 56875223, "question_id": 56875002, "link": "https://stackoverflow.com/questions/56875002/why-does-global-pointers-behave-erratically-in-this-function/56875223#56875223", "title": "Why does global pointers behave erratically in this function?", "body": "<p>This has nothing to do with global variables. There are multiple problems here but the most pressing error is that you are attempting to use uninitialised pointers. <strong>This never works</strong>. You need to understand pointers before you can use them properly.</p>\n\n<p>In particular, if you have a declaration like this:</p>\n\n<pre><code>int *x;\n</code></pre>\n\n<p>Then, <em>no matter what you do</em>, you first need to assign a valid pointer to <code>x</code><sup>1</sup>.</p>\n\n<p>In your case the error is compounded by the fact that you\u2019re using <code>scanf</code> wrong. Luckily the solution here is very easy: Don\u2019t declare pointers. Instead, declare <code>int</code> variables.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint q;\nint u;\nint p;\n\nvoid test () {\n    printf(\"Insert #1?\\t\"); scanf(\"%d\", &amp;u); \n    printf(\"Insert #2?\\t\"); scanf(\"%d\", &amp;p); \n}\n\nint main () {\n    test();\n    printf(\"%d\\n\", u); \n    printf(\"%d\\n\", p);\n    printf(\"%d\\n\", q);\n}\n</code></pre>\n\n<p>Ironically the comments in your original code already point out the issue, they just suggest a wrong solution. It\u2019s a bit of a mystery where these comments are from. ;-)</p>\n\n<hr>\n\n<p><sup>1</sup> Technically the only exception is for statically allocated pointers, which are correctly zero-initialised and can therefore be used in null pointer comparisons.</p>\n"}, {"tags": [], "owner": {"reputation": 65, "user_id": 11731622, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MjD0MIY49Rw/AAAAAAAAAAI/AAAAAAAAABA/L1KB-3R83Zk/photo.jpg?sz=128", "display_name": "Alan Barrett II", "link": "https://stackoverflow.com/users/11731622/alan-barrett-ii"}, "is_accepted": false, "score": 0, "last_activity_date": 1562179969, "creation_date": 1562179969, "answer_id": 56876377, "question_id": 56875002, "link": "https://stackoverflow.com/questions/56875002/why-does-global-pointers-behave-erratically-in-this-function/56876377#56876377", "title": "Why does global pointers behave erratically in this function?", "body": "<p>Your pointers have no value assigned to them.</p>\n"}], "owner": {"reputation": 25, "user_id": 10760911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4IMLD.jpg?s=128&g=1", "display_name": "Tr\u01b0\u01a1ng Qu\u1ed1c Qu&#226;n", "link": "https://stackoverflow.com/users/10760911/tr%c6%b0%c6%a1ng-qu%e1%bb%91c-qu%c3%a2n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 5, "score": -1, "last_activity_date": 1562179969, "creation_date": 1562173561, "last_edit_date": 1562176478, "question_id": 56875002, "link": "https://stackoverflow.com/questions/56875002/why-does-global-pointers-behave-erratically-in-this-function", "title": "Why does global pointers behave erratically in this function?", "body": "<p>I've tried to write a program that uses global pointers to track down local variables, but when I use the right syntaxes, it doesn't run.</p>\n\n<p>When I alter the syntaxes, the program yields correct results. I don't fully understand the mechanism behind it, and hoping that more experienced coders could explain it. Thank you.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\nint *q;\nint *u;\nint *p;\nvoid test () {\n    printf(\"Insert #1?\\t\"); scanf(\"%d\", &amp;u); \n/*should be scanf(\"%d\", u) for u is a pointer*/ \n    printf(\"Insert #2?\\t\"); scanf(\"%d\", &amp;p); \n/*should be scanf(\"%d\", p) for p is a pointer*/ \n}\nint main () {\n    test ();\n    printf(\"%d\\n\", u); \n/*should be printf(\"%d\\n\", *u) since I am trying to dereference the value of u*/\n    printf(\"%d\\n\", p);\n    printf(\"%d\\n\", q);\n}\n</code></pre>\n\n<p>The output should be 3 numbers, 2 first numbers are inputs from user, and the third one should be a nonsense number since the 3rd pointer is not pointing anywhere.</p>\n\n<p>Update: It works!!!!! Thank you so much for your help :). </p>\n"}, {"tags": ["c", "casting", "type-conversion"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1562173212, "post_id": 56874916, "comment_id": 100298310, "body": "<i>void pointer into a signed char....</i> - you mean to a <i>pointer</i> to these? Or to an actual numeric type? And your question is a mixture of subjects. Give us a single example code and ask a specific question."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 4, "creation_date": 1562173262, "post_id": 56874916, "comment_id": 100298333, "body": "Please show an example of what you&#39;re attempting to do."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1562174996, "post_id": 56874916, "comment_id": 100299087, "body": "What do you mean by &quot;converting the void pointer into: signed decimal, unsigned octal, unsigned decimal, unsigned hexadecimal ...&quot;? Those aren&#39;t C types."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1562175001, "post_id": 56874916, "comment_id": 100299093, "body": "A description is not enough, as those can be vauge.  Sample code with an attempt at solving the problem along with input and expected output will give us a better idea of what exactly you want to do."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1562177068, "post_id": 56874916, "comment_id": 100300004, "body": "You can only typecast <i>if and only if</i> the value is actually what you attest it to be. If you have <code>void*</code> but it&#39;s actually a <code>double</code> in memory then typecasting it to <code>int</code> will result in miserable failure, the binary representations are different. <code>atoi</code> is <i>only</i> for converting ASCII representations. If you don&#39;t know what your <code>void*</code> points to, figure it out."}, {"owner": {"reputation": 65, "user_id": 11731622, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MjD0MIY49Rw/AAAAAAAAAAI/AAAAAAAAABA/L1KB-3R83Zk/photo.jpg?sz=128", "display_name": "Alan Barrett II", "link": "https://stackoverflow.com/users/11731622/alan-barrett-ii"}, "edited": false, "score": 1, "creation_date": 1562179786, "post_id": 56874916, "comment_id": 100301179, "body": "I&#39;ll be using variadic arguments, and will know what the value is actually, but my plan is to typecast everything as a void pointer, and then convert them depending on the format.   The conversions are what I&#39;m unclear about. For clarity: I&#39;m casting the va_arg as a void pointer, and storing it in a struct. Then depending on the format I will be converting each void pointer to the correct data type. I&#39;m simply trying to figure out how to do each conversion to the data types listed above."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 11731622, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MjD0MIY49Rw/AAAAAAAAAAI/AAAAAAAAABA/L1KB-3R83Zk/photo.jpg?sz=128", "display_name": "Alan Barrett II", "link": "https://stackoverflow.com/users/11731622/alan-barrett-ii"}, "edited": false, "score": 0, "creation_date": 1562183691, "post_id": 56876672, "comment_id": 100302750, "body": "So, for my understanding.  The void pointer is just acting like a pointer, and not holding any true value when simply typecasted.  Is this why you don&#39;t have to malloc space for void pointers, because they are just pointing to an address?    I&#39;m not saying this is a rational way of doing it, but if the void pointer, pointed to the correct data type the output still would not be a &quot;value&quot; type correct?  So, this is why unions would be a better way to go?  Thank you for clearing stuff up!"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 65, "user_id": 11731622, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MjD0MIY49Rw/AAAAAAAAAAI/AAAAAAAAABA/L1KB-3R83Zk/photo.jpg?sz=128", "display_name": "Alan Barrett II", "link": "https://stackoverflow.com/users/11731622/alan-barrett-ii"}, "edited": false, "score": 1, "creation_date": 1562183972, "post_id": 56876672, "comment_id": 100302878, "body": "@AlanBarrettII The problem is that <code>va_arg</code> returns the given value, not a pointer to it, so you can&#39;t just point a <code>void *</code> to the return value.  It doesn&#39;t make sense to do something like <code>int x=4; void *p = x;</code>"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1562181354, "creation_date": 1562181354, "answer_id": 56876672, "question_id": 56874916, "link": "https://stackoverflow.com/questions/56874916/how-do-you-typecast-void-pointers/56876672#56876672", "title": "How do you typecast void pointers?", "body": "<p>If you're reading values from a variadic function where you know the type, <code>void *</code> is not what you want.  You can convert from a <code>void *</code> to another pointer type, but not to a \"value\" type.</p>\n\n<p>What you want instead is a union which can hold any of the types you expect, along with a struct containing that union and a type indicator.</p>\n\n<p>For example</p>\n\n<pre><code>enum value_type {\n    VAL_CHAR,\n    VAL_SHORT,\n    VAL_LONG,\n    VAL_LONGLONG,\n    VAL_FLOAT,\n    VAL_DOUBLE\n};\n\nunion val {\n   char c;\n   short s;\n   long l;\n   long long ll;\n   float f;\n   double d;\n};\n\nstruct value {\n    enum value_type type;\n    union val v;\n};\n\n\nvoid myfunc(const char *format, ...)\n{\n    va_list ap;\n\n    va_start(ap, format);\n    while (/* has more values */) {\n        struct value s;\n        if (/* is char */) {\n            s.type = VAL_CHAR;\n            s.v.c = va_arg(ap, char);\n        } else if (/* is short */) {\n            s.type = VAL_SHORT;\n            s.v.s = va_arg(ap, short);\n        } else if (/* is long */) {\n            s.type = VAL_LONG;\n            s.v.l = va_arg(ap, long);\n        } else if (/* is long long */) {\n            s.type = VAL_LONGLONG;\n            s.v.ll = va_arg(ap, long long);\n        } else if (/* is float */) {\n            s.type = VAL_FLOAT;\n            s.v.l = va_arg(ap, float);\n        } else if (/* is double */) {\n            s.type = VAL_DOUBLE;\n            s.v.l = va_arg(ap, double);\n        }\n        /* do something with s */\n    }\n    va_end(ap);\n}\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 11731622, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MjD0MIY49Rw/AAAAAAAAAAI/AAAAAAAAABA/L1KB-3R83Zk/photo.jpg?sz=128", "display_name": "Alan Barrett II", "link": "https://stackoverflow.com/users/11731622/alan-barrett-ii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "closed_date": 1562206362, "answer_count": 1, "score": 0, "last_activity_date": 1562181354, "creation_date": 1562173127, "last_edit_date": 1562181244, "question_id": 56874916, "link": "https://stackoverflow.com/questions/56874916/how-do-you-typecast-void-pointers", "closed_reason": "Needs details or clarity", "title": "How do you typecast void pointers?", "body": "<p>I'm currently working on a problem where I have to make a void pointer into a signed char, short, long, long long.\n(These seem simple I can just created a tmp, and cast the void.)</p>\n\n<p>What confuses me is:\nconverting the void pointer into:\nsigned decimal, unsigned octal, unsigned decimal, unsigned hexadecimal, %f conversion where, \"double arg is rounded and covered to decimal notation. </p>\n\n<p>With the majority of these conversions I would just use atoi with a base correct?</p>\n\n<p>I'll be using variadic arguments, and will know what the value is actually, but my plan is to typecast everything as a void pointer, and then convert them depending on the format. The conversions are what I'm unclear about. For clarity: I'm casting the va_arg as a void pointer, and storing it in a struct. Then depending on the format I will be converting each void pointer to the correct data type. I'm simply trying to figure out how to do each conversion to the data types listed above</p>\n\n<p>Thank you for any and all help.</p>\n\n<pre><code>void    ft_conversion_length_di(t_main *node)\n{\n    if (node-&gt;length == 'H')\n        node-&gt;arg = (signed char)node-&gt;arg;\n    if (node-&gt;length == 'h')\n        node-&gt;arg = (short)node-&gt;arg;\n    if (node-&gt;length == 'l')\n        node-&gt;arg = (long)node-&gt;arg;\n    if (node-&gt;length == 'E')\n        node-&gt;arg = (long long)node-&gt;arg;\n}\n</code></pre>\n"}, {"tags": ["c", "file-descriptor"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 3, "creation_date": 1562172263, "post_id": 56874671, "comment_id": 100297825, "body": "Even if it&#39;s non-blocking, failing to get data is an error, which is why you get the <code>EWOULDBLOCK</code> in <code>errno</code> and the <code>-1</code> returned."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1562172317, "creation_date": 1562172317, "answer_id": 56874741, "question_id": 56874671, "link": "https://stackoverflow.com/questions/56874671/why-does-reading-a-non-blocking-socket-return-an-error-status-code/56874741#56874741", "title": "Why does reading a non-blocking socket return an error status code", "body": "<p>When a socket is set up as non-blocking, if there is nothing to read the <code>read</code> function will return -1 and set <code>errno</code> to either <code>EAGAIN</code> or <code>EWOULDBLOCK</code>.  That's how you know there's there's nothing to read, at which point you can do other things before trying again.</p>\n\n<p>If <code>read</code> returns 0, that means end-of-file was hit, or for a socket that a shutdown happened.</p>\n"}, {"tags": [], "owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "is_accepted": true, "score": 2, "last_activity_date": 1562172691, "last_edit_date": 1562172691, "creation_date": 1562172328, "answer_id": 56874743, "question_id": 56874671, "link": "https://stackoverflow.com/questions/56874671/why-does-reading-a-non-blocking-socket-return-an-error-status-code/56874743#56874743", "title": "Why does reading a non-blocking socket return an error status code", "body": "<p>If there is no data available in a non-blocking file of a FIFO or socket type, a read will fail with -1 and set errno to <code>EWOULDBLOCK</code>. An alias to this <code>errno</code> code is <code>EAGAIN</code>, which signals you to try again (later, after more data has been entered).</p>\n\n<p>The <code>0</code> return value from a <code>read</code> on a socket indicated that an end-of-file condition was meant (which means, for a socket, that a shutdown occurred).</p>\n\n<p>From read(2):</p>\n\n<blockquote>\n  <p>(zero indicates end of file)</p>\n  \n  <p>...</p>\n  \n  <p>On error, -1 is returned, and errno is set appropriately.</p>\n</blockquote>\n"}], "owner": {"reputation": 682, "user_id": 5153899, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10206733961404743/picture?type=large", "display_name": "Alexander", "link": "https://stackoverflow.com/users/5153899/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 56874743, "answer_count": 2, "score": 0, "last_activity_date": 1562172691, "creation_date": 1562171954, "question_id": 56874671, "link": "https://stackoverflow.com/questions/56874671/why-does-reading-a-non-blocking-socket-return-an-error-status-code", "title": "Why does reading a non-blocking socket return an error status code", "body": "<p>After successfully reading a socket set up as non blocking, the socket becomes temporarily unavailable. All data is received already with the first <code>read</code> call, but the error return value persists for about 5 seconds. After that <code>read</code> returns 0 and the socket is once more available.</p>\n\n<p>Why does the socket return the error in the first place?</p>\n\n<p>Set up non blocking socket:</p>\n\n<pre><code>/* Non blocking */\nint flags = fcntl(sockfd, F_GETFL, 0);\nfcntl(sockfd, F_SETFL, flags | O_NONBLOCK);\n</code></pre>\n\n<p>Read socket and print:</p>\n\n<pre><code>result = read(sockfd, response + bytes_read, RESPONSE_SIZE - bytes_read);\nprintf(\"%d | %d | %s\\n\", (int)result, errno, strerror(errno));\nprintf(\"%d | %d | %d | %d | %d | %d | %d | %d \\n\",\n            EAGAIN, EWOULDBLOCK, EBADF, EFAULT, EINTR, EINVAL, EIO, EISDIR);\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>152 | 115 | Operation now in progress\n11 | 11 | 9 | 14 | 4 | 22 | 5 | 21 \n\n-1 | 11 | Resource temporarily unavailable\n11 | 11 | 9 | 14 | 4 | 22 | 5 | 21 \n</code></pre>\n"}, {"tags": ["c", "struct", "alignment"], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 9, "last_activity_date": 1562175570, "creation_date": 1562175570, "answer_id": 56875436, "question_id": 56873659, "link": "https://stackoverflow.com/questions/56873659/skip-avoid-alignment-padding-bytes-when-calculating-struct-checksum/56875436#56875436", "title": "Skip/avoid alignment padding bytes when calculating struct checksum", "body": "<blockquote>\n  <p>Is there a generic way to skip/avoid alignment padding bytes when calculating the checksum of a C struct?</p>\n</blockquote>\n\n<p>There is no such mechanism on which a strictly conforming program can rely.  This follows from </p>\n\n<ol>\n<li><p>the fact that C implementations are permitted to lay out structures with arbitrary padding following any member or members, for any reason or none, and</p></li>\n<li><p>the fact that</p>\n\n<blockquote>\n  <p>When a value is stored in an object of structure or union type,\n  including in a member object, the bytes of the object representation\n  that correspond to any padding bytes take unspecified values.</p>\n</blockquote>\n\n<p>(<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.6.1p6\" rel=\"noreferrer\">C2011, 6.2.6.1/6</a>)</p></li>\n</ol>\n\n<p>The former means that the standard provides no conforming way to guarantee that a structure layout contains no padding, and the latter means that in principle, there is nothing you can do to control the values of the padding bytes -- even if you initially zero-fill a structure instance, any padding takes indeterminate values as soon as you assign to that object or to any of its members.</p>\n\n<p><em>In practice</em>, it is likely that any of the approaches you mention in the question will do the job where the C implementation and the nature of the data permit.  But only (2), computing the checksum member by member, can be used by a strictly-conforming program, and that one is not \"generic\" as I take you to mean that term.  <strong>This is what I would choose</strong>.  If you have many distinct structures that require checksumming, then it might be worthwhile to deploy a code generator or macro magic to help you with maintaining things.</p>\n\n<p>On the other hand, your most reliable way to provide for generic checksumming is to exercise an implementation-specific extension that enables you to avoid structures containing any padding (your (1)).  Note that this will tie you to a specific C implementation or implementations that implement such an extension compatibly, that it may not work at all on some systems (such as those where misaligned access is a hard error), and that it may reduce performance on other systems.</p>\n\n<p>Your (4) is an alternative way to avoid padding, but it would be a portability and maintenance nightmare.  Nevertheless, it could provide for generic checksumming, in the sense that the checksum algorithm wouldn't need to pay attention to individual members.  But note also that this also places a requirement for initialization behavior analogous to (3).  That would come cheaper, but it would not be altogether automatic.</p>\n\n<p>In practice, C implementations do not wantonly modify padding bytes, but they don't necessarily go out of their way to preserve them, either.  In particular, even if you zero-filled rigorously, per your (3), padding is not guaranteed to be copied by whole-structure assignment or when you pass or return a structure by value.  If you want to do any of those things then you need to take measures on the receiving side to ensure zero-filling, and requires member-by-member attention.</p>\n"}, {"comments": [{"owner": {"reputation": 1243, "user_id": 679688, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/688b35f9becc72d8ca0d2fbc76749119?s=128&d=identicon&r=PG", "display_name": "Joshua Chia", "link": "https://stackoverflow.com/users/679688/joshua-chia"}, "edited": false, "score": 2, "creation_date": 1605169642, "post_id": 56875862, "comment_id": 114570319, "body": "It&#39;s not necessarily an XY problem. You can store expected checksum values instead of the whole expected struct values when writing tests. Expressing expected struct values for complicated structs in test code (along with code for equality comparison) can be verbose, impractical and hard-to-maintain but expressing expected checksum is much easier, so there can be good reasons to compute checksums. If I know my structs are effectively hierarchical collections of simple things like char arrays, ints and enums (e.g. no pointers), there are good reasons to expect the checksum to be meaningful."}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 6, "last_activity_date": 1562177622, "creation_date": 1562177622, "answer_id": 56875862, "question_id": 56873659, "link": "https://stackoverflow.com/questions/56873659/skip-avoid-alignment-padding-bytes-when-calculating-struct-checksum/56875862#56875862", "title": "Skip/avoid alignment padding bytes when calculating struct checksum", "body": "<p>This sounds like an XY problem. Computing a checksum for a C object in memory is not usually a meaningful operation; the result is dependent on the C implementation (arch/ABI if not even the specific compiler) and C does not admit a fault-tolerance programming model able to handle the possibility of object values changing out from under you due to hardware faults of memory-safety errors. Checksums make sense mainly for <em>serialized</em> data on disk or in transit over a network where you want to guard against data corruption in storage/transit. And C structs are not for serialization (although they're commonly abused for it). If you write proper serialization routines, you then can just do the checksum on the serialized byte stream.</p>\n"}], "owner": {"reputation": 3525, "user_id": 10927863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OYbxO.jpg?s=128&g=1", "display_name": "Eliahu Aaron", "link": "https://stackoverflow.com/users/10927863/eliahu-aaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 4, "accepted_answer_id": 56875436, "answer_count": 2, "score": 8, "last_activity_date": 1564496975, "creation_date": 1562168201, "last_edit_date": 1564496975, "question_id": 56873659, "link": "https://stackoverflow.com/questions/56873659/skip-avoid-alignment-padding-bytes-when-calculating-struct-checksum", "title": "Skip/avoid alignment padding bytes when calculating struct checksum", "body": "<p>Is there a generic way to skip/avoid alignment padding bytes when calculating the checksum of a C struct?</p>\n\n<p>I want to calculate the checksum of a struct by summing the bytes. The problem is, the struct has alignment padding bytes which can get random (unspecified) values and cause two structs with the identical data to get different checksum values. </p>\n\n<p>Note: I'm mainly concerned about maintainability (adding/removing/modifying fields without the need to update the code) and reusability, not about portability (the platform is very specific and unlikely to change).</p>\n\n<p>Currently, I found a few solutions, but they all have disadvantages:</p>\n\n<ol>\n<li><strong>Pack the struct (e.g. <code>#pragma pack (1)</code>).</strong>  Disadvantage: I prefer to avoid packing for better performance.</li>\n<li><strong>Calculate checksum field by field.</strong> Disadvantage: The code will need to be updated when modifying the struct and requires more code (depending on the number of fields).</li>\n<li><strong>Set to zero all struct bytes before setting values.</strong>  Disadvantage: I cannot fully guarantee that all structs were initially zeroed.</li>\n<li><strong>Arrange the struct fields to avoid padding and possibly add dummy fields to fill padding.</strong>  Disadvantage: Not generic, the struct will need to be carefully rearranged when modifying the struct.</li>\n</ol>\n\n<p>Is there a better generic way?</p>\n\n<p>Calculating checksum example:</p>\n\n<pre><code>unsigned int calcCheckSum(MyStruct* myStruct)\n{\n    unsigned int checkSum = 0; \n    unsigned char* bytes = (unsigned char*)myStruct;\n    unsigned int byteCount = sizeof(MyStruct);\n    for(int i = 0; i &lt; byteCount; i++)\n    {\n        checkSum += bytes[i];\n    }\n    return checkSum;\n}\n</code></pre>\n"}, {"tags": ["c", "loops", "for-loop", "while-loop", "do-while"], "comments": [{"owner": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "edited": false, "score": 2, "creation_date": 1562168445, "post_id": 56873459, "comment_id": 100295956, "body": "Is the last line really <code>4 8 16 32</code>? because if it were <code>4 8 12 16</code> a simple <code>printf(&quot;%d &quot;, i*j);</code> would do the trick ;^)"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1562168566, "post_id": 56873459, "comment_id": 100296025, "body": "@WhozCraig Only if prog-fh\u2019s comment is correct. Otherwise this won\u2019t match the desired output."}, {"owner": {"reputation": 23, "user_id": 11730854, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b8jRv49oZ7M/AAAAAAAAAAI/AAAAAAAAEVg/ISA37Esa5BU/photo.jpg?sz=128", "display_name": "Prachi Rajesh Jansari", "link": "https://stackoverflow.com/users/11730854/prachi-rajesh-jansari"}, "edited": false, "score": 0, "creation_date": 1562168983, "post_id": 56873459, "comment_id": 100296215, "body": "yes that was my actual problem , i figured that out. just tried to find a variation to see if i can work through it :)"}, {"owner": {"reputation": 23, "user_id": 11730854, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b8jRv49oZ7M/AAAAAAAAAAI/AAAAAAAAEVg/ISA37Esa5BU/photo.jpg?sz=128", "display_name": "Prachi Rajesh Jansari", "link": "https://stackoverflow.com/users/11730854/prachi-rajesh-jansari"}, "edited": false, "score": 0, "creation_date": 1562169264, "post_id": 56873459, "comment_id": 100296339, "body": "oh sorry i wrote the pattern wrong, just checked my book, going to try 3,6, 12&gt; 4,8,16,32."}, {"owner": {"reputation": 7495, "user_id": 11527076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xqgpS.png?s=128&g=1", "display_name": "prog-fh", "link": "https://stackoverflow.com/users/11527076/prog-fh"}, "edited": false, "score": 0, "creation_date": 1562169616, "post_id": 56873459, "comment_id": 100296535, "body": "Then if it&#39;s <code>3 6 12</code> the <code>printf(&quot;%d &quot;, i&lt;&lt;(j-1) );</code> should work"}], "answers": [{"tags": [], "owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "is_accepted": false, "score": 2, "last_activity_date": 1562168734, "creation_date": 1562168734, "answer_id": 56873806, "question_id": 56873459, "link": "https://stackoverflow.com/questions/56873459/write-a-basic-half-pyramid-pattern-program/56873806#56873806", "title": "Write a basic half pyramid pattern program", "body": "<p>The code you were given literally contains all the parts necessary. All that remains for you is to fill out this line inside the nested loop:</p>\n\n<pre><code>printf(\"%d \", <i>\u2039what goes here?\u203a</i>);</code></pre>\n\n<p>To find the answer you need to find how the value relates to the current row and column (give by <code>i</code> and <code>j</code>, respectively).</p>\n\n<p>You don\u2019t need an additional variable <code>num</code> (to be clear, you <em>can</em> create one, but it\u2019s not necessary to solve this problem).</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1562260153, "last_edit_date": 1562260153, "creation_date": 1562169199, "answer_id": 56873945, "question_id": 56873459, "link": "https://stackoverflow.com/questions/56873459/write-a-basic-half-pyramid-pattern-program/56873945#56873945", "title": "Write a basic half pyramid pattern program", "body": "<p>We, beginners, should help each other.:)</p>\n\n<p>Here you are.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) \n{\n    while ( 1 )\n    {\n        const unsigned int Base = 10;\n\n        printf( \"Enter the height of a pyramid (0 - exit): \" );\n\n        unsigned int n;\n\n        if ( ( scanf( \"%u\", &amp;n ) != 1 ) || ( n == 0 ) ) break;\n\n        int width = 0;\n        unsigned int tmp = n * n;\n\n        do { ++width; } while ( tmp /= Base );\n\n        putchar( '\\n' );\n\n        for ( unsigned int i = 0; i &lt; n; i++ )\n        {\n            unsigned int value = i + 1;\n            for ( unsigned int j = 0; j++ &lt;= i; )\n            {\n                printf( \"%*u \", width, value * j );\n            }\n            putchar( '\\n' );\n        }\n\n        putchar( '\\n' );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output might look like</p>\n\n<pre><code>Enter the height of a pyramid (0 - exit): 1\n\n1 \n\nEnter the height of a pyramid (0 - exit): 2\n\n1 \n2 4 \n\nEnter the height of a pyramid (0 - exit): 3\n\n1 \n2 4 \n3 6 9 \n\nEnter the height of a pyramid (0 - exit): 4\n\n 1 \n 2  4 \n 3  6  9 \n 4  8 12 16 \n\nEnter the height of a pyramid (0 - exit): 5\n\n 1 \n 2  4 \n 3  6  9 \n 4  8 12 16 \n 5 10 15 20 25 \n\nEnter the height of a pyramid (0 - exit): 6\n\n 1 \n 2  4 \n 3  6  9 \n 4  8 12 16 \n 5 10 15 20 25 \n 6 12 18 24 30 36 \n\nEnter the height of a pyramid (0 - exit): 7\n\n 1 \n 2  4 \n 3  6  9 \n 4  8 12 16 \n 5 10 15 20 25 \n 6 12 18 24 30 36 \n 7 14 21 28 35 42 49 \n\nEnter the height of a pyramid (0 - exit): 8\n\n 1 \n 2  4 \n 3  6  9 \n 4  8 12 16 \n 5 10 15 20 25 \n 6 12 18 24 30 36 \n 7 14 21 28 35 42 49 \n 8 16 24 32 40 48 56 64 \n\nEnter the height of a pyramid (0 - exit): 9\n\n 1 \n 2  4 \n 3  6  9 \n 4  8 12 16 \n 5 10 15 20 25 \n 6 12 18 24 30 36 \n 7 14 21 28 35 42 49 \n 8 16 24 32 40 48 56 64 \n 9 18 27 36 45 54 63 72 81 \n\nEnter the height of a pyramid (0 - exit): 0\n</code></pre>\n\n<p>The loops in the program can also look like</p>\n\n<pre><code>for ( unsigned int i = 0; i++ &lt; n;  )\n{\n    unsigned int value = i;\n    for ( unsigned int j = 0; j &lt; i; j++ )\n    {\n        printf( \"%*u \", width, value );\n        value += i;\n    }\n    putchar( '\\n' );\n}\n</code></pre>\n\n<p>or without introducing the intermediate variable <code>value</code> like</p>\n\n<pre><code>for ( unsigned int i = 0; i &lt; n; i++ )\n{\n    for ( unsigned int j = 0; j++ &lt;= i; )\n    {\n        printf( \"%*u \", width, j * ( i + 1 ) );\n    }\n    putchar( '\\n' );\n}\n</code></pre>\n\n<p>You yourself can add a check to the program that <code>n * n</code> is not greater than <code>UINT_MAX</code>.</p>\n\n<p><strong>Edit:</strong> As you changed the displayed values in the pattern then the program can look for example the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main(void) \n{\n    while ( 1 )\n    {\n        const unsigned int Base = 10;\n\n        printf( \"Enter the height of a pyramid (0 - exit): \" );\n\n        unsigned int n;\n\n        if ( ( scanf( \"%u\", &amp;n ) != 1 ) || ( n == 0 ) ) break;\n\n        int width = 0;\n        unsigned long long int tmp = n * ( long long unsigned )pow( 2, ( n - 1 ) );\n\n        do { ++width; } while ( tmp /= Base );\n\n        putchar( '\\n' );\n\n        for ( unsigned int i = 0; i++ &lt; n;  )\n        {\n            unsigned int value = i;\n            for ( unsigned int j = 0; j &lt; i; j++ )\n            {\n                printf( \"%*u \", width, value );\n                value *= 2;\n            }\n            putchar( '\\n' );\n        }\n\n        putchar( '\\n' );\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output might look like</p>\n\n<pre><code>Enter the height of a pyramid (0 - exit): 10\n\n   1 \n   2    4 \n   3    6   12 \n   4    8   16   32 \n   5   10   20   40   80 \n   6   12   24   48   96  192 \n   7   14   28   56  112  224  448 \n   8   16   32   64  128  256  512 1024 \n   9   18   36   72  144  288  576 1152 2304 \n  10   20   40   80  160  320  640 1280 2560 5120 \n\nEnter the height of a pyramid (0 - exit): 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 9728391, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5O6mb7uptPQ/AAAAAAAAAAI/AAAAAAAAAug/aHRH5jAn8mI/photo.jpg?sz=128", "display_name": "bvsh", "link": "https://stackoverflow.com/users/9728391/bvsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1562275154, "last_edit_date": 1562275154, "creation_date": 1562274734, "answer_id": 56894249, "question_id": 56873459, "link": "https://stackoverflow.com/questions/56873459/write-a-basic-half-pyramid-pattern-program/56894249#56894249", "title": "Write a basic half pyramid pattern program", "body": "<p>Tricky Pattern. Here, is a logic for that pattern with implementation.\n'n' is the number of rows.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void) {\nint n = 4;\n    for(int i=1; i&lt;=n; i++) {\n        int k=i;\n        printf(\"%d%s\",k,\" \");\n        for(int j=1; j&lt;i; j++) {\n            k = k*2;\n            printf(\"%d%s\",k,\" \");\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11730854, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b8jRv49oZ7M/AAAAAAAAAAI/AAAAAAAAEVg/ISA37Esa5BU/photo.jpg?sz=128", "display_name": "Prachi Rajesh Jansari", "link": "https://stackoverflow.com/users/11730854/prachi-rajesh-jansari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1562275154, "creation_date": 1562167577, "last_edit_date": 1562173457, "question_id": 56873459, "link": "https://stackoverflow.com/questions/56873459/write-a-basic-half-pyramid-pattern-program", "title": "Write a basic half pyramid pattern program", "body": "<p>Have tried few basic pattern </p>\n\n<p>trying to get pattern </p>\n\n<pre><code>1\n2 4\n3 6 12\n4 8 16 32\n</code></pre>\n\n<p>SO far trying to find the proper sequence, my idea is that need another variable lets say num, and need to create a sequence for num to print num eventually</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int rows = 0  , i, j , num,num2;\n\n\n   do{\n        printf(\"please enter the number of rows: \");\n       scanf(\"%d\",&amp;rows);\n    }while(rows &lt;=2 );\n    printf(\"printing a half pyramid of %d rows\", rows);\n    printf(\"\\n\");\n     for( i = 1; i &lt;=rows; ++i) {\n        for (j = 1; j &lt;= i; ++j ) {\n\n            printf(\"%d \",  );\n\n\n        }\n       printf(\"\\n\");\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Not being able to figure out a sequence</p>\n"}, {"tags": ["c", "memory"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1562166531, "post_id": 56873108, "comment_id": 100294913, "body": "First of all, for any pointer or array <code>a</code> and index <code>i</code>, the expression <code>*(a + i)</code> is <i>exactly</i> equal to <code>a[i]</code>. That means you could change <code>*(mem_start + j)</code> to <code>mem_start[j]</code> without any problems."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1562166579, "post_id": 56873108, "comment_id": 100294939, "body": "What do you mean \u201cbuffert buff will be stored in the same memory\u201d? When <code>buff</code> is defined with <code>unsigned char buff[size];</code>, the compiler will allocate memory for it, and it will not be the same memory as at <code>mem_start</code>. And what do you mean \u201crisk overwrite what I seek in memory\u201d? Modifying <code>buff</code> will not modify the memory at <code>mem_start</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1562166596, "post_id": 56873108, "comment_id": 100294945, "body": "Now for your problem of reading the memory, you&#39;re already are doing it. That&#39;s what happens when you put <code>*(mem_start + j)</code> (or <code>mem_start[j]</code>) on the right side of the assignment, The byte on that location is read and copied into <code>buff[i]</code>."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 1, "creation_date": 1562167631, "post_id": 56873108, "comment_id": 100295495, "body": "Probable typo: <code>buff[j]</code>."}, {"owner": {"reputation": 59, "user_id": 11670525, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uxp3o2YyaXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdR4nCLv2bMsZ_gjFa_jzoxJcZrIA/mo/photo.jpg?sz=128", "display_name": "Rbn", "link": "https://stackoverflow.com/users/11670525/rbn"}, "edited": false, "score": 0, "creation_date": 1562167659, "post_id": 56873108, "comment_id": 100295503, "body": "I want to read the RAM memory, and normally when I declare the buff the compiler it will allocate the memory in the memory RAM, so it can be risky of an overlap"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 1, "creation_date": 1562168354, "post_id": 56873108, "comment_id": 100295898, "body": "The phrase &quot;read the RAM memory&quot; needs a context and you need to specify what outcome do you expect of this &quot;read&quot;. Are you wanting to print the data at that location to a console so that it is displayed to a person or do you want to write a copy of the data to some kind of storage such as a disk or what? One further question is whether the IDE and toolset you are using have a debugger that allows you to display the data at a particular memory location."}, {"owner": {"reputation": 59, "user_id": 11670525, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uxp3o2YyaXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdR4nCLv2bMsZ_gjFa_jzoxJcZrIA/mo/photo.jpg?sz=128", "display_name": "Rbn", "link": "https://stackoverflow.com/users/11670525/rbn"}, "edited": false, "score": 0, "creation_date": 1562169561, "post_id": 56873108, "comment_id": 100296507, "body": "I want to execute a code on the microcontrolleur, after the execution of this code I want to see what it is written in the memory, because the code I will execute it I consider it like a black box; I want to copy the data to a CSV file I work on the Aurix microcontroller on IDE Hightec which is the basis of eclipce"}, {"owner": {"reputation": 868, "user_id": 1396410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2dcf867468889b06b5d39e2c16b0d23?s=128&d=identicon&r=PG", "display_name": "Veltas", "link": "https://stackoverflow.com/users/1396410/veltas"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1562179395, "post_id": 56873108, "comment_id": 100301002, "body": "@Aconcagua You can&#39;t use <code>memcpy()</code> here since the memory is volatile-qualified."}], "answers": [{"tags": [], "owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "is_accepted": false, "score": 2, "last_activity_date": 1562166879, "creation_date": 1562166879, "answer_id": 56873264, "question_id": 56873108, "link": "https://stackoverflow.com/questions/56873108/read-memory-in-c/56873264#56873264", "title": "Read memory in C", "body": "<p>You can allocate memory with <code>malloc()</code>, or as you have, on the stack.  There is no overlap between the two.  <code>memmove()</code> can be used if you do have overlap between source and destination;  otherwise, <code>memcpy()</code> will suffice.</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 11670525, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uxp3o2YyaXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdR4nCLv2bMsZ_gjFa_jzoxJcZrIA/mo/photo.jpg?sz=128", "display_name": "Rbn", "link": "https://stackoverflow.com/users/11670525/rbn"}, "edited": false, "score": 0, "creation_date": 1562167828, "post_id": 56873421, "comment_id": 100295602, "body": "I want to read the RAM memory, and normally when I declare the buff the compiler it will allocate the memory in the memory RAM, so it can be risky of an overlap."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 59, "user_id": 11670525, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uxp3o2YyaXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdR4nCLv2bMsZ_gjFa_jzoxJcZrIA/mo/photo.jpg?sz=128", "display_name": "Rbn", "link": "https://stackoverflow.com/users/11670525/rbn"}, "edited": false, "score": 2, "creation_date": 1562167910, "post_id": 56873421, "comment_id": 100295664, "body": "@Rbn: you keep repeating that you want to &quot;read&quot; and what you show is a copy. So what ? Also, I do think that you have a wrong understanding of memory mapping and variable allocation."}, {"owner": {"reputation": 59, "user_id": 11670525, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uxp3o2YyaXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdR4nCLv2bMsZ_gjFa_jzoxJcZrIA/mo/photo.jpg?sz=128", "display_name": "Rbn", "link": "https://stackoverflow.com/users/11670525/rbn"}, "edited": false, "score": 0, "creation_date": 1562167953, "post_id": 56873421, "comment_id": 100295691, "body": "I am looking for another method to read the memory without copying it in a buffert,"}, {"owner": {"reputation": 59, "user_id": 11670525, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uxp3o2YyaXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdR4nCLv2bMsZ_gjFa_jzoxJcZrIA/mo/photo.jpg?sz=128", "display_name": "Rbn", "link": "https://stackoverflow.com/users/11670525/rbn"}, "edited": false, "score": 0, "creation_date": 1562168423, "post_id": 56873421, "comment_id": 100295942, "body": "I want to execute a code on the microcontroller, after the execution of this code I want to see what is written in the memory, because the code I will execute it I consider it as a black box"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 59, "user_id": 11670525, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uxp3o2YyaXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdR4nCLv2bMsZ_gjFa_jzoxJcZrIA/mo/photo.jpg?sz=128", "display_name": "Rbn", "link": "https://stackoverflow.com/users/11670525/rbn"}, "edited": false, "score": 1, "creation_date": 1562168522, "post_id": 56873421, "comment_id": 100295995, "body": "@Rbn: see ? On a screen ? On some display ? In a remote debugger ?   By the way, how would a copy to a buffer help you see ?"}], "tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": false, "score": 4, "last_activity_date": 1562167474, "creation_date": 1562167474, "answer_id": 56873421, "question_id": 56873108, "link": "https://stackoverflow.com/questions/56873108/read-memory-in-c/56873421#56873421", "title": "Read memory in C", "body": "<p>In the statement</p>\n\n<pre><code>...= *(mem_start + j);\n</code></pre>\n\n<p>you <em>are</em> reading memory. So what more do you want ?</p>\n\n<hr>\n\n<p>By the way, why didn't you use</p>\n\n<pre><code>mem_start[j]; ??\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 11670525, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uxp3o2YyaXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdR4nCLv2bMsZ_gjFa_jzoxJcZrIA/mo/photo.jpg?sz=128", "display_name": "Rbn", "link": "https://stackoverflow.com/users/11670525/rbn"}, "edited": false, "score": 0, "creation_date": 1562235478, "post_id": 56875980, "comment_id": 100318695, "body": "thanks, can you tell me how I can display raw byte values please"}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "reply_to_user": {"reputation": 59, "user_id": 11670525, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uxp3o2YyaXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdR4nCLv2bMsZ_gjFa_jzoxJcZrIA/mo/photo.jpg?sz=128", "display_name": "Rbn", "link": "https://stackoverflow.com/users/11670525/rbn"}, "edited": false, "score": 0, "creation_date": 1562309520, "post_id": 56875980, "comment_id": 100341390, "body": "@Rbn : outputting raw bytes to the screen is rarely a suitable choice, depending on the nature of the source data; as you no doubt know, many bytes are non-printing characters; it&#39;s often better to display a text representation of the byte value, such as with <code>printf(&quot;%hhx&quot;, byte)</code>;  but you can use, say, <code>fputc(byte, stdout)</code>; &#39;stdout&#39; is of course a pre-defined <code>FILE *</code> that (usually) points to the screen; just be aware that outputting the raw bytes like this will often look like &quot;garbage&quot;, and can even affect display settings, since several bytes are control characters"}], "tags": [], "owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "is_accepted": false, "score": 0, "last_activity_date": 1562178129, "creation_date": 1562178129, "answer_id": 56875980, "question_id": 56873108, "link": "https://stackoverflow.com/questions/56873108/read-memory-in-c/56875980#56875980", "title": "Read memory in C", "body": "<p>The expression:</p>\n\n<pre><code>*(mem_start + j)\n</code></pre>\n\n<p>or the more conventional</p>\n\n<pre><code>mem_start[j]\n</code></pre>\n\n<p><em>is</em> a 'read' operation, when it is used, say, on the right-hand side of an assignment, or as a parameter in a function call.</p>\n\n<p>So, instead of your own code line:</p>\n\n<pre><code>buff[j] = *(mem_start + j);    // I'm assuming 'buff[i]' was a typo\n</code></pre>\n\n<p>which reads from one memory location into another, you could do something like:</p>\n\n<pre><code>printf(\"%hhx\", mem_start[j]);\n</code></pre>\n\n<p>which will read the byte from <code>mem_start</code> at offset <code>j</code> and output it to <code>stdout</code> as a hexadecimal representation of the byte value.  Put that in a loop (like you already have it) and you will effectively read from memory, <em>without</em> copying what you are reading into a 2nd buffer.</p>\n\n<p>Based on some of your comments, I'm assuming that having the memory contents displayed on screen will suit your needs.  And based on what you say the memory that you want to display will be, I'm assuming that hexadecimal output is suitable.  But there are other choices, like reading from the source memory buffer into a file, or outputting the raw byte values (instead of a representation of those values), etc.</p>\n\n<p>Note that not every combination of input and output is useful, though.  Outputting raw byte values to the terminal screen is likely to produce less-than-useful results, and depending on what you want to do with the data you read out, a file full of hexadecimal representation of the source bytes might not be useful either.  Pick the output destination and output format to suit your needs.</p>\n"}], "owner": {"reputation": 59, "user_id": 11670525, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uxp3o2YyaXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdR4nCLv2bMsZ_gjFa_jzoxJcZrIA/mo/photo.jpg?sz=128", "display_name": "Rbn", "link": "https://stackoverflow.com/users/11670525/rbn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1562178129, "creation_date": 1562166357, "last_edit_date": 1562167286, "question_id": 56873108, "link": "https://stackoverflow.com/questions/56873108/read-memory-in-c", "title": "Read memory in C", "body": "<p>I work on a microcontroller,\nand I want to read the contents of the memory after the execution of a code.\nI know the address of the memory to read and the size\nI tried this method:</p>\n\n<pre><code>    const volatile unsigned char *const mem_start = 0xd0000000;\n\n    #define size ((ptrdiff_t)0x1c000)\n\n    unsigned char buff[size];\n    ptrdiff_t j;\n\n    for(j =0 ; j&lt; sizeof(buff) ; j++)\n    buff[i]= *(mem_start + j);\n</code></pre>\n\n<p>I am looking for another method to read the memory without copying it in a buffert, in the same memory that I want to read it, risk crushing what I'm looking for. and that the buff may overlap for lack of space</p>\n"}, {"tags": ["c++", "c", "linux", "floating-point", "ieee-754"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1562179511, "post_id": 56872769, "comment_id": 100301055, "body": "Based on <i>&quot;... mantissa in 53 bits ...&quot;</i> and <i>&quot;... determine the size (at compile time)&quot;</i>, I believe OP is seeking a define or constant for the size of the mantissa in bits."}, {"owner": {"reputation": 5984, "user_id": 32836, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d3ecad86d72c5ca5e3ccbcc46a0ad66a?s=128&d=identicon&r=PG", "display_name": "Jamie", "link": "https://stackoverflow.com/users/32836/jamie"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1562270164, "post_id": 56872769, "comment_id": 100333634, "body": "@jww Yes, I <i>am</i> looking for a define or constance for the size of the signifcand (mantissa) in bits."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1562167031, "post_id": 56873123, "comment_id": 100295172, "body": "But note that knowing how many bits does not tell you which ones they are.  Also, the OP may need to account for the leading 1 bit that is implicit in normalized IEEE-754 representations."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 2, "last_activity_date": 1562166396, "creation_date": 1562166396, "answer_id": 56873123, "question_id": 56872769, "link": "https://stackoverflow.com/questions/56872769/how-can-the-significand-width-in-bits-of-float-double-be-determined-is-there-a/56873123#56873123", "title": "How can the significand width in bits of float, double be determined: Is there a standard definition?", "body": "<p>Use <code>FLT_MANT_DIG</code> and <code>DBL_MANT_DIG</code>, defined in <code>&lt;float.h&gt;</code>:</p>\n\n<pre><code>#include &lt;float.h&gt;\n#include &lt;stdio.h&gt;\n\n\n#if FLT_RADIX != 2\n    #error \"Floating-point base is not two.\"\n#endif\n\n\nint main(void)\n{\n    printf(\"There are %d bits in the significand of a float.\\n\",\n        FLT_MANT_DIG);\n    printf(\"There are %d bits in the significand of a double.\\n\",\n        DBL_MANT_DIG);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5984, "user_id": 32836, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d3ecad86d72c5ca5e3ccbcc46a0ad66a?s=128&d=identicon&r=PG", "display_name": "Jamie", "link": "https://stackoverflow.com/users/32836/jamie"}, "edited": false, "score": 0, "creation_date": 1562269686, "post_id": 56874107, "comment_id": 100333497, "body": "I apologise that you were forced to determine what I was asking for: I don&#39;t want to have to assume that the bit width of the mantissa is 53 bits.  I&#39;d rather have a macro that tells my code: &quot;<i>the bit width of the mantissa for a double is DBL_MANT_BIT_WIDTH</i>&quot; (say)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 5984, "user_id": 32836, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d3ecad86d72c5ca5e3ccbcc46a0ad66a?s=128&d=identicon&r=PG", "display_name": "Jamie", "link": "https://stackoverflow.com/users/32836/jamie"}, "edited": false, "score": 0, "creation_date": 1562298760, "post_id": 56874107, "comment_id": 100338442, "body": "Well that would be the <code>DBL_MANT_DIG</code> macro from <code>float.h</code> that both answers reference.  Do choose Eric&#39;s answer over mine, though, as he was first, guessed correctly what you wanted, and even provided a nice example demonstrating it."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1562170064, "last_edit_date": 1562170064, "creation_date": 1562169741, "answer_id": 56874107, "question_id": 56872769, "link": "https://stackoverflow.com/questions/56872769/how-can-the-significand-width-in-bits-of-float-double-be-determined-is-there-a/56874107#56874107", "title": "How can the significand width in bits of float, double be determined: Is there a standard definition?", "body": "<blockquote>\n  <p>Is there a standard manner to determine the mantissa of a double?</p>\n</blockquote>\n\n<p>You're willing to accept a Linux-specific solution, but you claim that glibc's <code>ieee754.h</code> header does not satisfy your needs, so I conclude that the problem you are trying to solve is not extracting or conveying the bits themselves, as that header's <code>union ieee_double</code> would provide a means for you to do that.</p>\n\n<p>I read \"the mantissa\" as a different thing from \"the number of bits of mantissa\", so I conclude that <code>DBL_MANT_DIG</code> of <code>float.h</code> is not what you're looking for, either.</p>\n\n<p>The only other thing I can think of that you might mean is the <em>value</em> of the significand (mantissa), according to the standard floating point model:</p>\n\n<p><em>v</em> = (<em>sign</em>) * <em>significand</em> * <em>radix</em><sup><em>exponent</em></sup></p>\n\n<p>The <a href=\"https://linux.die.net/man/3/frexp\" rel=\"nofollow noreferrer\"><code>frexp()</code></a> function, in the C language standard since C99, serves this purpose.<sup>1</sup>  It separates a <code>double</code> into an exponent (of 2) and a significand, represented as a <code>double</code>.  For a finite, nonzero input, the absolute value of the result is in the half-open interval [0.5, 1).</p>\n\n<p><strong>Example</strong>:</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid print_parts(double d) {\n    int exp;\n    double significand = frexp(d, &amp;exp);\n\n    printf(\"%e = %f * 2^%d\\n\", d, significand, exp);\n}\n</code></pre>\n\n<p><strong><em>Sample outputs</em></strong>:</p>\n\n<blockquote>\n  <p>7.256300e+16 = 0.503507 * 2^57<br/>\n  1.200000e-03 = 0.614400 * 2^-9<br/>\n  -0.000000e+00 = -0.000000 * 2^0</p>\n</blockquote>\n\n<p>Note that although the example function does not print sufficient decimal digits to convey the significands exactly, <code>frexp()</code> itself is exact, not subject to any rounding errors.</p>\n\n<hr>\n\n<p><sup>1</sup> Technically, <code>frexp()</code> serves the purpose <em>provided that</em> <code>FLT_RADIX</code> expands to 2.  It is well-defined in any case, but if your <code>double</code> representation uses a different radix then the result of <code>frexp()</code>, though well-defined, is probably not what you're looking for.</p>\n"}, {"tags": [], "owner": {"reputation": 2876, "user_id": 7958961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9fc6004eafe9f7b473927ecfd65646?s=128&d=identicon&r=PG&f=1", "display_name": "Rados\u0142aw Cybulski", "link": "https://stackoverflow.com/users/7958961/rados%c5%82aw-cybulski"}, "is_accepted": false, "score": 2, "last_activity_date": 1562337841, "creation_date": 1562337841, "answer_id": 56905198, "question_id": 56872769, "link": "https://stackoverflow.com/questions/56872769/how-can-the-significand-width-in-bits-of-float-double-be-determined-is-there-a/56905198#56905198", "title": "How can the significand width in bits of float, double be determined: Is there a standard definition?", "body": "<p>In C++ you might use <code>std::numeric_limits&lt;double&gt;::digits</code> and <code>std::numeric_limits&lt;float&gt;::digits</code>:</p>\n\n<pre><code>#include &lt;limits&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::cout &lt;&lt; std::numeric_limits&lt;float&gt;::digits &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; std::numeric_limits&lt;double&gt;::digits &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>24\n53\n</code></pre>\n\n<p>respectively.</p>\n"}], "owner": {"reputation": 5984, "user_id": 32836, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d3ecad86d72c5ca5e3ccbcc46a0ad66a?s=128&d=identicon&r=PG", "display_name": "Jamie", "link": "https://stackoverflow.com/users/32836/jamie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 56873123, "answer_count": 3, "score": 0, "last_activity_date": 1562337841, "creation_date": 1562165322, "last_edit_date": 1562337491, "question_id": 56872769, "link": "https://stackoverflow.com/questions/56872769/how-can-the-significand-width-in-bits-of-float-double-be-determined-is-there-a", "title": "How can the significand width in bits of float, double be determined: Is there a standard definition?", "body": "<p>Is there a standard manner to determine the width of the significand of a double, in C or C++?  I am aware that IEEE-754 format of a double stores the significand in 53 bits, but I would like to avoid using a \u201cmagic\u201d number in my code.</p>\n\n<p>On Linux, the file <code>usr/include/ieee754.h</code> exists, but it describes the format using bit fields in a structure, which I cannot determine the size of (at compile time).</p>\n\n<p>A Linux-only solution is acceptable.</p>\n"}, {"tags": ["c", "clang", "llvm-clang", "ebpf"], "comments": [{"owner": {"reputation": 4454, "user_id": 3716552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/078Ob.jpg?s=128&g=1", "display_name": "Qeole", "link": "https://stackoverflow.com/users/3716552/qeole"}, "edited": false, "score": 0, "creation_date": 1562166513, "post_id": 56872436, "comment_id": 100294904, "body": "Why \u201cunsurprisingly\u201d if you use the pragma? Why \u201cclearly\u201d if you&#39;re not 100% sure :) Some remarks: 1) Did you get a warning at compile time? I believe clang prints one when it cannot unroll a loop. 2) Did you have a look at the generated BPF instructions (<code>llvm-objdump -S objfile.o</code>) to make sure the back-edge comes from that specific loop? 3) If you are flexible on kernel versions, you may be interested to know that linux 5.3 (currently in development) has support for bounded loops."}, {"owner": {"reputation": 141, "user_id": 3222975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f7047767b90d5421ed78fce0b9e7bb?s=128&d=identicon&r=PG&f=1", "display_name": "pa5h1nh0", "link": "https://stackoverflow.com/users/3222975/pa5h1nh0"}, "reply_to_user": {"reputation": 4454, "user_id": 3716552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/078Ob.jpg?s=128&g=1", "display_name": "Qeole", "link": "https://stackoverflow.com/users/3716552/qeole"}, "edited": false, "score": 0, "creation_date": 1562168558, "post_id": 56872436, "comment_id": 100296015, "body": "Agree with &quot;unsurprisingly&quot; to &quot;surprisingly&quot;, also agree with &quot;clearly&quot; to &quot;maybe&quot;. I&#39;d edit that as a first thing. Answering your questions: 1) no warning at compile time; 2) pretty sure as it&#39;s the only &quot;loop&quot; defined in my code, also because the verification passes if commenting out this for-loop; 3) would that solve the problem?"}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1562171386, "post_id": 56872436, "comment_id": 100297407, "body": "Look in bpf_map_lookup_elem for EINVAL."}, {"owner": {"reputation": 4454, "user_id": 3716552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/078Ob.jpg?s=128&g=1", "display_name": "Qeole", "link": "https://stackoverflow.com/users/3716552/qeole"}, "edited": false, "score": 0, "creation_date": 1562172124, "post_id": 56872436, "comment_id": 100297756, "body": "3) provides support for this kind of loops in the BPF verifier, so a back-edge for this loop would not be rejected anymore. So yeah it should solve the problem. Sounds a bit like overkill though. In my experience I always got warnings (<a href=\"https://stackoverflow.com/questions/55908053/why-does-clang-is-unable-to-unroll-a-loop-that-gcc-unrolls\">like this one</a>) when clang failed to unroll :/. Can&#39;t really help more without the C or BPF code, sorry. (Also with Linux 4.19 you should not have to inline all functions, BPF functions calls are supported. But that&#39;s not related to the issue.)"}, {"owner": {"reputation": 141, "user_id": 3222975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f7047767b90d5421ed78fce0b9e7bb?s=128&d=identicon&r=PG&f=1", "display_name": "pa5h1nh0", "link": "https://stackoverflow.com/users/3222975/pa5h1nh0"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1562232865, "post_id": 56872436, "comment_id": 100317151, "body": "@JL2210 what does that even mean in this case?"}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1562252253, "post_id": 56872436, "comment_id": 100327769, "body": "@pa5h1nh0 Look at the source code for <code>bpf_map_lookup_elem</code> in the kernel source tree, and search for EINVAL."}, {"owner": {"reputation": 4454, "user_id": 3716552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/078Ob.jpg?s=128&g=1", "display_name": "Qeole", "link": "https://stackoverflow.com/users/3716552/qeole"}, "edited": false, "score": 0, "creation_date": 1562575217, "post_id": 56872436, "comment_id": 100403178, "body": "I don&#39;t think the <code>EINVAL</code> is returned by <code>bpf_map_lookup_elem</code>, it wouldn&#39;t be related to a back edge? @pa5h1nh0 I often see <code>#pragma clang loop unroll(full)</code> instead of <code>#pragma unroll</code>, I thought there was no difference but maybe try the other one just in case?"}, {"owner": {"reputation": 141, "user_id": 3222975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f7047767b90d5421ed78fce0b9e7bb?s=128&d=identicon&r=PG&f=1", "display_name": "pa5h1nh0", "link": "https://stackoverflow.com/users/3222975/pa5h1nh0"}, "reply_to_user": {"reputation": 4454, "user_id": 3716552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/078Ob.jpg?s=128&g=1", "display_name": "Qeole", "link": "https://stackoverflow.com/users/3716552/qeole"}, "edited": false, "score": 0, "creation_date": 1562576231, "post_id": 56872436, "comment_id": 100403688, "body": "@Qeole yep, indeed <code>bpf_map_lookup_elem</code> returns a pointer, that&#39;s why &quot;<i>looking for EINVAL</i>&quot; makes no sense to me. Already tried <code>#pragma clang loop unroll(full)</code> version, same outcome, in fact clang documentation states that these two are synonyms. Atm I&#39;m manually unrolling the loop, which is disgusting, oh well."}, {"owner": {"reputation": 4454, "user_id": 3716552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/078Ob.jpg?s=128&g=1", "display_name": "Qeole", "link": "https://stackoverflow.com/users/3716552/qeole"}, "edited": false, "score": 0, "creation_date": 1562747338, "post_id": 56872436, "comment_id": 100469941, "body": "Would you have a standalone reproducer available somewhere, ideally with a Makefile to be sure we run the same commands, so I could try to reproduce on my side?"}, {"owner": {"reputation": 4454, "user_id": 3716552, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/078Ob.jpg?s=128&g=1", "display_name": "Qeole", "link": "https://stackoverflow.com/users/3716552/qeole"}, "edited": false, "score": 0, "creation_date": 1562853901, "post_id": 56872436, "comment_id": 100516700, "body": "By the way your \u201cdummy-loop\u201d example unrolls just fine for me :/."}], "answers": [{"tags": [], "owner": {"reputation": 437, "user_id": 4661705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c19686ac23ff4b51cfa95899f3f3a9?s=128&d=identicon&r=PG&f=1", "display_name": "keniee van", "link": "https://stackoverflow.com/users/4661705/keniee-van"}, "is_accepted": false, "score": -1, "last_activity_date": 1564385033, "creation_date": 1564385033, "answer_id": 57248953, "question_id": 56872436, "link": "https://stackoverflow.com/questions/56872436/bpf-verifier-rejecting-xdp-program-due-to-back-edge-even-though-pragma-unroll-is/57248953#57248953", "title": "BPF verifier rejecting XDP program due to back-edge even though pragma unroll is used", "body": "<p>I write the following code, and it works.</p>\n\n<pre><code>#pragma clang loop unroll(full)\nfor (int i = 0; i &lt; 128; i++)\n{\n    if (bpf_map_lookup_elem(&amp;conntrack_hash_tab, &amp;reply_key) == NULL)\n    {\n        break;\n    }\n    reply_key.dport = reply_key.dport+1;\n}\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 3222975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f7047767b90d5421ed78fce0b9e7bb?s=128&d=identicon&r=PG&f=1", "display_name": "pa5h1nh0", "link": "https://stackoverflow.com/users/3222975/pa5h1nh0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564385033, "creation_date": 1562164375, "last_edit_date": 1562239785, "question_id": 56872436, "link": "https://stackoverflow.com/questions/56872436/bpf-verifier-rejecting-xdp-program-due-to-back-edge-even-though-pragma-unroll-is", "title": "BPF verifier rejecting XDP program due to back-edge even though pragma unroll is used", "body": "<p>So, as per title I'm trying to load an XDP program, when surprisingly the bpf verifier kicks in spitting in my face with the famous <strong><em>back-edge</em></strong> error:</p>\n\n<pre><code>libbpf: load bpf program failed: Invalid argument\nlibbpf: -- BEGIN DUMP LOG ---\nlibbpf: \nback-edge from insn 271 to 69\n\nlibbpf: -- END LOG --\nlibbpf: failed to load program 'xdp_prog'\n</code></pre>\n\n<p>Even though the only for-loop - with the number of iterations known at compile time - in my restricted ebpf C code is guarded by <code>pragma unroll</code>. Here's a code snippet showing the affected for-loop as defined inside an <code>__alwais_inline</code>d function:</p>\n\n<pre><code>#pragma unroll\nfor (i = 0; i &lt; 8; i++)\n{\n    int k = idx + i;\n    mask = bpf_map_lookup_elem(&amp;a_map, &amp;k);\n    if (!mask || (mask-&gt;an_idx == 0))\n        return -1;\n\n    *m_key = *key;\n    foo(m_key, mask);  // an __alwais_inline func\n\n    id = bpf_map_lookup_elem(&amp;b_map, m_key);\n    if (id)\n    {\n        *out_id = *id;\n        return 0;\n    }\n}\n</code></pre>\n\n<p>Maybe the problem is with clang failing to unroll the loop? If that's right, why does it fail, is there any workaround? It's unacceptable to manually unroll the loop as it results in a horrendous, unmaintainable, and unreadable code.</p>\n\n<p>Oh, I'm working with:</p>\n\n<ul>\n<li>kernel 4.19.3</li>\n<li>llvm-clang 8</li>\n</ul>\n\n<p>Any thoughts?</p>\n\n<p><strong>UPDATE</strong><br>\nJust noticed that even the following dummy for-loop seems not to be unrolled, with the bpf verifier complaining about back-edge:</p>\n\n<pre><code>#pragma unroll\nfor (i = 0; i &lt; 8; i++)\n{\n    int k = i;\n    mask = bpf_map_lookup_elem(&amp;a_map, &amp;k);\n}\n</code></pre>\n\n<p>Is it just me for this doesn't make any sense?</p>\n"}, {"tags": ["c", "function", "types"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1562164491, "post_id": 56872425, "comment_id": 100293614, "body": "If you don&#39;t want to expose the type, then you&#39;ll have to use a generic pointer type, or a typedef of it."}, {"owner": {"reputation": 13848, "user_id": 276193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3d9b60ead1b0c8420c03b203832e8d5f?s=128&d=identicon&r=PG", "display_name": "learnvst", "link": "https://stackoverflow.com/users/276193/learnvst"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1562164544, "post_id": 56872425, "comment_id": 100293651, "body": "So cast from void* in the function definition @ThomasJager?"}, {"owner": {"reputation": 13848, "user_id": 276193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3d9b60ead1b0c8420c03b203832e8d5f?s=128&d=identicon&r=PG", "display_name": "learnvst", "link": "https://stackoverflow.com/users/276193/learnvst"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1562164743, "post_id": 56872425, "comment_id": 100293779, "body": "What precisely do you mean by the typedef suggestion @ThomasJager?"}, {"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 1, "creation_date": 1562165153, "post_id": 56872425, "comment_id": 100294059, "body": "@leanvst I mean that you could create a typedef to <code>void</code> and use a pointer to that type, as the publicly-exposed type. It doesn&#39;t change anything other than just being a clue as to that the value is."}], "answers": [{"comments": [{"owner": {"reputation": 13848, "user_id": 276193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3d9b60ead1b0c8420c03b203832e8d5f?s=128&d=identicon&r=PG", "display_name": "learnvst", "link": "https://stackoverflow.com/users/276193/learnvst"}, "edited": false, "score": 0, "creation_date": 1562164669, "post_id": 56872509, "comment_id": 100293733, "body": "Cool - that was my suggestion to @ThomasJager in the thread under the original question"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 5, "last_activity_date": 1562164602, "creation_date": 1562164602, "answer_id": 56872509, "question_id": 56872425, "link": "https://stackoverflow.com/questions/56872425/conflicting-types-error-for-function-taking-void-in-public-api-and-typed-under/56872509#56872509", "title": "Conflicting types error for function taking void* in public API and typed* under the hood", "body": "<blockquote>\n  <p>What's the minimal modification I can make to get this to build under the constraint that I don't want to expose the <code>instance_type</code> through the public interface?</p>\n</blockquote>\n\n<p>It is necessary for the definition to agree with the declaration in the header.  If you don't want to expose <code>instance_type</code> in the public API, then that means modifying the definition to match the header:</p>\n\n<pre><code>void reset(void* _instance) {\n   instance_type* instance = _instance;\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 13848, "user_id": 276193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3d9b60ead1b0c8420c03b203832e8d5f?s=128&d=identicon&r=PG", "display_name": "learnvst", "link": "https://stackoverflow.com/users/276193/learnvst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 56872509, "answer_count": 1, "score": 1, "last_activity_date": 1562164602, "creation_date": 1562164339, "question_id": 56872425, "link": "https://stackoverflow.com/questions/56872425/conflicting-types-error-for-function-taking-void-in-public-api-and-typed-under", "title": "Conflicting types error for function taking void* in public API and typed* under the hood", "body": "<p>I'm trying to build a 3rd party library which has a function defined in the public header as such</p>\n\n<pre><code>void reset(void* instance);\n</code></pre>\n\n<p>And in the implementation </p>\n\n<pre><code>void reset(instance_type* instance) {\n   ...\n}\n</code></pre>\n\n<p>And I'm getting a conflicting types compiler error. Now this seems obvious why to me on the surface. The author was using MSVC and I'm using gcc set to C99 standard - maybe that's why it worked on the authors machine? What's the minimal modification I can make to get this to build under the constraint that I don't want to expose the <code>instance_type</code> through the public interface?</p>\n"}, {"tags": ["c", "segmentation-fault", "quicksort"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 5, "creation_date": 1562164171, "post_id": 56872320, "comment_id": 100293402, "body": "<code>quickSort</code> will always call <code>quickSort</code> which will always call <code>quickSort</code> which will always call <code>quickSort</code> which will always call <code>quickSort</code> which will always call <code>quickSort</code> which will always call <code>quickSort</code>, you have a recursion issue."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1562164198, "post_id": 56872320, "comment_id": 100293426, "body": "My compile even warns me: <code>&#39;quickSort&#39;: recursive on all control paths, function will cause runtime stack overflow</code>"}, {"owner": {"reputation": 75, "user_id": 9854022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/315ff086fb501cdf14bebd5a414d77fe?s=128&d=identicon&r=PG&f=1", "display_name": "Ayano", "link": "https://stackoverflow.com/users/9854022/ayano"}, "edited": false, "score": 0, "creation_date": 1562165044, "post_id": 56872320, "comment_id": 100293983, "body": "Yes,thank you, i fixed it by adding if(first&lt;last) inside the void quickSort()."}], "answers": [{"tags": [], "owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "is_accepted": true, "score": 3, "last_activity_date": 1562165403, "creation_date": 1562165403, "answer_id": 56872798, "question_id": 56872320, "link": "https://stackoverflow.com/questions/56872320/why-is-this-quicksort-algorithm-implementation-code-getting-segmentation-fault-e/56872798#56872798", "title": "Why is this quicksort algorithm implementation code getting Segmentation fault error?", "body": "<p>Inside <code>quickSort</code>, you need to check that <code>first</code> is less than <code>last</code>:</p>\n\n<pre><code>   void quickSort(int arr[],int first,int last)\n   {\n       if(first &lt; last)\n       {\n           int pivot=partition(arr,first,last);\n           quickSort(arr,first,pivot-1);\n           quickSort(arr,pivot+1,last);\n       }\n   }\n</code></pre>\n\n<p>You might also give attribution to GeeksForGeeks, as this code looks extremely similar to theirs.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9095849, "user_type": "registered", "profile_image": "https://graph.facebook.com/1436940826403131/picture?type=large", "display_name": "Paulo V&#237;tor", "link": "https://stackoverflow.com/users/9095849/paulo-v%c3%adtor"}, "is_accepted": false, "score": 0, "last_activity_date": 1562184453, "creation_date": 1562184453, "answer_id": 56877256, "question_id": 56872320, "link": "https://stackoverflow.com/questions/56872320/why-is-this-quicksort-algorithm-implementation-code-getting-segmentation-fault-e/56877256#56877256", "title": "Why is this quicksort algorithm implementation code getting Segmentation fault error?", "body": "<p>You need to add a base case on quicksort() call, because on the way it's written it will call infinitely and leads to a segmentation fault.</p>\n"}], "owner": {"reputation": 75, "user_id": 9854022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/315ff086fb501cdf14bebd5a414d77fe?s=128&d=identicon&r=PG&f=1", "display_name": "Ayano", "link": "https://stackoverflow.com/users/9854022/ayano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 56872798, "answer_count": 2, "score": 0, "last_activity_date": 1562261355, "creation_date": 1562164024, "last_edit_date": 1562261355, "question_id": 56872320, "link": "https://stackoverflow.com/questions/56872320/why-is-this-quicksort-algorithm-implementation-code-getting-segmentation-fault-e", "title": "Why is this quicksort algorithm implementation code getting Segmentation fault error?", "body": "<p>I am working on implementing the quicksort algorithm on c language.When i compile,it says segmentation fault and i cannot find the cause of it.I looked up GeeksForGeeks about quicksort and it is my attempt at it.</p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n\n    void swap(int *a,int *b){\n        int temp=*a;\n        *a=*b;\n        *b=temp;\n    }\n\n    int partition(int arr[],int first,int last){\n        int pivot=arr[last];\n        int i=first-1;\n        for(int j=first;j&lt;=last-1;j++){\n            if(arr[j]&lt;=pivot){\n            i++;\n            swap(&amp;arr[i],&amp;arr[j]);\n        }\n     }\n     swap(&amp;arr[i+1],&amp;arr[last]);\n     return (i+1);\n   }\n\n   void quickSort(int arr[],int first,int last){\n       int pivot=partition(arr,first,last);\n       quickSort(arr,first,pivot-1);\n       quickSort(arr,pivot+1,last);\n   }\n\n\n\n   int main() {\n      int arr[]={1,8,3,9,4,5,7};\n      int size=sizeof(arr)/sizeof(arr[0]);\n      quickSort(arr,0,size-1);\n      for(int i=0;i&lt;size;i++){\n          printf(\"%d \", arr[i]);\n      }\n   }\n</code></pre>\n\n<p>I was expecting to see\n        1 3 4 5 7 8 9\nbut i got Segmentation fault.</p>\n"}, {"tags": ["c", "io", "strtok"], "answers": [{"comments": [{"owner": {"reputation": 609, "user_id": 11171682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b4b97bc5566dbe16f0e5f8eeaeb6d5?s=128&d=identicon&r=PG&f=1", "display_name": "hkj447", "link": "https://stackoverflow.com/users/11171682/hkj447"}, "edited": false, "score": 0, "creation_date": 1562163858, "post_id": 56872228, "comment_id": 100293220, "body": "This fixed it, thank you. I was attempting to check to see if <code>tok</code> was at the end of the line, but I got a little crazy with using <code>strtotk</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 609, "user_id": 11171682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b4b97bc5566dbe16f0e5f8eeaeb6d5?s=128&d=identicon&r=PG&f=1", "display_name": "hkj447", "link": "https://stackoverflow.com/users/11171682/hkj447"}, "edited": false, "score": 1, "creation_date": 1562164279, "post_id": 56872228, "comment_id": 100293477, "body": "Note that if a line came in with a single number, you&#39;d get the newline included in the token from the <code>tok = strtok(buf, &quot;,&quot;)</code> call to <code>strtok()</code>.  Your call to <code>strtol()</code> would cheerfully ignore it, though, so there&#39;d be no harm done.  If you&#39;re not going to use the value that <code>strtol()</code> stores in <code>ptr</code>, you could pass <code>NULL</code> instead of <code>&amp;ptr</code> and then eliminate the unused variable.  Or you can validate that the number was really read \u2014 but doing that is surprisingly tricky (see <a href=\"https://stackoverflow.com/questions/14176123\">Correct usage of <code>strtol()</code></a> for most of the sordid details)."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1562163868, "last_edit_date": 1562163868, "creation_date": 1562163698, "answer_id": 56872228, "question_id": 56872166, "link": "https://stackoverflow.com/questions/56872166/reading-a-csv-file-in-c-using-fgets-and-strtok-only-reads-first-column/56872228#56872228", "title": "Reading a CSV file in C using fgets and strtok only reads first column", "body": "<p>Your loop is:</p>\n\n<pre><code> for (tok = strtok(buf, \",\"); tok &amp;&amp; *tok; tok = strtok(NULL, \",\\n\")) \n {\n     \u2026omitted\u2026\n     if (strtok(NULL, \"\\n\") &amp;&amp; read == 'N')\n         count++;\n }\n</code></pre>\n\n<p>You have three calls to <code>strtok()</code>, and the one in the <code>if</code> eats up everything to the newline.  I'm not sure what you were thinking there.  It looks like you should omit that <code>strtok()</code> \u2014 but I'm not sure what you need to replace it with.</p>\n\n<p>Because the second call in the loop control reads up to newline or comma (<code>strtok(NULL, \",\\n\")</code>), you can't tell when you reach the end of the line except that <code>tok</code> is set to <code>NULL</code> to indicate no more tokens.</p>\n"}], "owner": {"reputation": 609, "user_id": 11171682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b4b97bc5566dbe16f0e5f8eeaeb6d5?s=128&d=identicon&r=PG&f=1", "display_name": "hkj447", "link": "https://stackoverflow.com/users/11171682/hkj447"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 56872228, "answer_count": 1, "score": 1, "last_activity_date": 1562164470, "creation_date": 1562163515, "last_edit_date": 1562164470, "question_id": 56872166, "link": "https://stackoverflow.com/questions/56872166/reading-a-csv-file-in-c-using-fgets-and-strtok-only-reads-first-column", "title": "Reading a CSV file in C using fgets and strtok only reads first column", "body": "<p>I have a .csv file that looks like</p>\n\n<pre><code>Config,Prob,MAN,ATL,CVERT,TVERT,LVERT,PELV,SAC,RIB,SCAP,PHUM,DHUM,PRAD,DRAD,CARP,PMC,DMC,PHX,PFEM,DFEM,PTIB,DTIB,TARS,PMT,DMT\nLH,1,2,2,7,13,6,2,1,13,2,2,2,1,1,6,2,2,24,2,2,2,2,8,2,2\nLH,1,0,0,0,0,0,0,0,9,1,2,2,2,2,12,2,2,18,1,1,1,1,4,1,1\nLH,1,2,2,7,3,0,2,1,3,1,1,1,1,1,6,1,1,6,0,0,0,0,0,0,0\nLH,1,0,0,0,13,6,2,1,8,0,2,2,1,1,0,0,0,0,0,0,0,0,0,0,0\nLH,1,2,2,4,13,6,2,1,18,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0\nLH,1,0,0,0,13,6,2,1,18,2,2,2,0,0,0,0,0,0,2,2,0,0,0,0,0\nLH,3,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\nLH,1,0,0,0,13,6,2,1,24,2,2,2,2,2,12,2,2,24,2,2,2,2,8,2,2\nLH,1,0,0,1,13,3,2,1,15,2,0,0,2,2,0,0,0,6,2,2,2,2,0,0,0\nLH,1,0,0,0,0,0,0,0,10,0,1,1,0,0,0,0,0,18,0,0,0,0,0,0,0\nLH,1,0,2,7,3,0,0,0,7,2,2,2,2,2,12,2,2,24,2,2,2,2,8,2,2\nLH,1,0,0,2,0,0,0,0,14,1,2,2,2,2,0,0,0,18,2,2,2,2,0,0,0\nLK,1,0,0,0,0,0,0,0,13,0,0,0,1,1,6,0,0,0,0,0,0,0,0,0,0\nLK,1,2,2,7,13,6,2,1,17,1,0,0,0,0,0,0,0,6,1,1,1,1,4,1,1\nLK,1,0,0,0,10,6,0,0,23,1,1,1,1,1,6,1,1,18,2,2,2,2,8,2,2\nLK,1,2,2,7,0,0,0,0,18,2,0,0,1,1,12,2,2,24,2,2,2,2,8,2,2\nLK,1,0,0,3,0,0,0,0,8,0,0,0,2,2,12,2,2,24,2,2,2,2,8,2,2\nLK,1,2,2,7,0,0,0,0,8,0,0,0,2,2,12,2,2,24,0,0,2,2,8,2,2\nLK,3,2,2,7,13,6,2,1,22,2,2,2,2,2,12,2,2,24,2,2,2,2,8,2,2\nLK,1,2,2,7,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\nLK,1,2,2,6,0,3,0,0,11,0,2,2,0,0,12,2,2,18,0,0,0,0,8,2,2\nLK,1,2,2,7,13,6,2,1,16,2,1,1,2,2,12,2,2,6,2,2,2,2,8,2,2\nLK,1,2,0,0,10,6,2,1,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\nLK,1,2,2,5,13,6,2,1,12,1,0,0,0,0,12,2,2,6,0,0,0,0,8,2,2\n</code></pre>\n\n<p>I would like to ignore the text and just grab the numbers. Here is my code:</p>\n\n<pre><code>    int arr[rows][columns]; /* rows/columns of .csv file */\n    char buf[1000];\n    int r = 0;\n\n    while (fgets(buf,1000,ifp)) {\n        char read = 'N';\n        const char *tok;\n        int ret =0;\n        int c = 0;\n        int count = 0;\n        char *ptr;\n        printf(\"%s \\n\", buf);\n\n        for (tok = strtok(buf, \",\"); tok &amp;&amp; *tok; tok = strtok(NULL, \",\\n\")){\n                printf(\"%s \", buf); /* replace buf with tok */\n                if(isNumber(tok)==1){\n                    read = 'Y';\n                    ret = strtol(tok,&amp;ptr,10);\n                    arr[r][c] = ret;\n                    c++;\n                    printf(\"Entered \");\n                    //printf(\"%ld \", arr[r][c]);\n                }\n                if(strtok(NULL,\"\\n\") &amp;&amp; read == 'N')\n                    count++;\n        }\n        r++;\n        //r -= count;\n    }\n</code></pre>\n\n<p><code>isNumber</code> is essentially an extension of <code>isdigt</code> and works as intended. However, whenever printing out <code>tok</code> for each iteration, it stops after the first comma. Sample output: <code>Config LH LH LH LH LH LH LH LH LH LH LH LH LK LK LK LK LK LK LK LK LK LK LK LK</code>. It seems to be reading the input just fine using <code>fgets</code>, as it prints out each line of the .csv file. So it seems like the issue lies with my for loop. It seems that I am incrementing my token incorrectly.</p>\n\n<p>Attempting with another example:</p>\n\n<pre><code>    char alph[] = \"a-b-c-e\";\n    for (const char *tok = strtok(alph, \"-\"); tok &amp;&amp; *tok; tok = strtok(NULL, \"-\\0\")){\n        printf(\"%s \", tok);\n    }\n</code></pre>\n\n<p>yields:\n<code>a b c e</code>, which is the correct result.\nTherefore, I feel like I am missing something here with parsing my file. Any help is appreciated. Thank you.</p>\n"}, {"tags": ["c++", "c", "mongodb", "gmp", "bignum"], "answers": [{"tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 1, "last_activity_date": 1562164936, "creation_date": 1562164936, "answer_id": 56872606, "question_id": 56872108, "link": "https://stackoverflow.com/questions/56872108/how-to-store-mpz-t-from-gmlib-on-a-mongo-db/56872606#56872606", "title": "How to store mpz_t from gmlib on a mongo db?", "body": "<p>It depends, on what you are planning to do. MongoDB does not have an arbitrary precision number type, so you essentially have two options:</p>\n\n<p>If the number type fits in a <strong>64-bit integer</strong>, you can use the functions</p>\n\n<pre><code>unsigned long valint = mpz_get_ui(val);\n// or\nlong valint = mpz_get_si(val);\n</code></pre>\n\n<p>to convert the number to a 64-bit integer and store it in a <code>NumberLong</code> datatype.</p>\n\n<p>Otherwise, you can always convert the number <code>val</code> to a string with</p>\n\n<pre><code>char *valstr = mpz_get_str(NULL, 10, val);\n</code></pre>\n\n<p>and store it as text in the database. This might be the safest solution, if you only want to <em>store</em> the number and do not need to process it at <em>database level</em>.</p>\n"}], "owner": {"reputation": 1385, "user_id": 8202606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aP46CW5acPM/AAAAAAAAAAI/AAAAAAAAACY/J6U8GUmqfng/photo.jpg?sz=128", "display_name": "Federico Caccia", "link": "https://stackoverflow.com/users/8202606/federico-caccia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1562164936, "creation_date": 1562163297, "question_id": 56872108, "link": "https://stackoverflow.com/questions/56872108/how-to-store-mpz-t-from-gmlib-on-a-mongo-db", "title": "How to store mpz_t from gmlib on a mongo db?", "body": "<p>I'm using GMP library to manage big numbers in a c++ code. I'm also using mongocxx client to connect and make queries to a mongodb database. How can I store a mpz_t number in a mongo database? Or even better, how can I transform mpz_t into a NumeberLong in mongodb?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1562162382, "post_id": 56871827, "comment_id": 100292372, "body": "If the array is static/global - then it is zero initialized. If it is local/automatic - then it is not initialized. Because the standard says so."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1562162853, "post_id": 56871827, "comment_id": 100292630, "body": "&quot;Question: why this behaviour?&quot; The rationale for leaving local variables uninitialized is execution speed. Setting all variables to zero before using them creates execution overhead. It&#39;s the same rationale as why malloc doesn&#39;t zero-initialize memory."}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1562162869, "post_id": 56871827, "comment_id": 100292638, "body": "I don&#39;t think it&#39;s specified as a requirement but most compilers would put static data into the <code>.bss</code> data segment that will be initialized to zero when the application is loaded into memory."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1562162873, "post_id": 56871827, "comment_id": 100292641, "body": "The why is for speed. Static data is generally all clumped together and declared in one big .bss lump. Most object loaders have an efficient way to zero large chunks of memory at program start. On the other hand, zeroing every array allocation every time a function is entered would cost some processing time if you didn&#39;t need it."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1562163970, "post_id": 56871827, "comment_id": 100293283, "body": "@Leos313 No. The static data has to be initialized as well, but it is done by the run-time library/startup code happening before <code>main</code>. But it is happening only once as opposed to functions which can be executed numerous times per program run."}], "answers": [{"comments": [{"owner": {"reputation": 3669, "user_id": 5078576, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gwGt0.jpg?s=128&g=1", "display_name": "Leos313", "link": "https://stackoverflow.com/users/5078576/leos313"}, "edited": false, "score": 0, "creation_date": 1562162881, "post_id": 56871871, "comment_id": 100292646, "body": "thank you. So I can safely decide to omit the zero-initialization when the array is static: this behaviour will never change"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 3669, "user_id": 5078576, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gwGt0.jpg?s=128&g=1", "display_name": "Leos313", "link": "https://stackoverflow.com/users/5078576/leos313"}, "edited": false, "score": 1, "creation_date": 1562162914, "post_id": 56871871, "comment_id": 100292671, "body": "@Leos313 Correct."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 2, "creation_date": 1562163039, "post_id": 56871871, "comment_id": 100292740, "body": "Correct, though generally the compiler/linker will optimise a ={0} on a static array, so there is no harm in using that form."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1562174252, "post_id": 56871871, "comment_id": 100298756, "body": "Be careful in the free-standing environment though. Without runtime library (AKA crt.o) it is <i>your</i> responsibility to provide a startup code making sure that .bss is zeroed out before entering <code>main</code>."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 4, "last_activity_date": 1562163391, "last_edit_date": 1562163391, "creation_date": 1562162487, "answer_id": 56871871, "question_id": 56871827, "link": "https://stackoverflow.com/questions/56871827/initial-value-of-int-array-in-c-why/56871871#56871871", "title": "Initial value of int array in C - why?", "body": "<p>The values are not undefined but indeterminate, and it behaves this way because the standard says so.</p>\n\n<p>Section 6.7.9p10 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a> regarding initialization states:</p>\n\n<blockquote>\n  <p>If  an  object  that  has  automatic  storage  duration  is  not \n  initialized  explicitly,  its  value  is indeterminate.   If  an \n  object  that  has  static  or  thread  storage  duration  is  not \n  initialized explicitly, then:</p>\n  \n  <ul>\n  <li>if it has pointer type, it is initialized to a null pointer;</li>\n  <li>if it has arithmetic type, it is initialized to (positive or unsigned) zero;</li>\n  <li>if it is an aggregate, every member is initialized (recursively) according to these rules,and any padding is initialized to zero bits;</li>\n  <li>if it is a union, the first named member is initialized (recursively) according to theserules, and any padding is initialized\n  to zero bits;</li>\n  </ul>\n</blockquote>\n\n<p>So for any variable defined either at file scope or <code>static</code> you can safely assume the values are zero-initialized.  For variables declared inside of a function or scope, you cannot make any assumptions about uninitialized variables.</p>\n\n<p>As for why, global/static variables are initialized at program startup or even at compile time, while locals have to be initialized each time they come into scope and doing so would take time.</p>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 6, "last_activity_date": 1562164154, "last_edit_date": 1562164154, "creation_date": 1562163198, "answer_id": 56872064, "question_id": 56871827, "link": "https://stackoverflow.com/questions/56871827/initial-value-of-int-array-in-c-why/56872064#56872064", "title": "Initial value of int array in C - why?", "body": "<p>An automatic <code>int array[10];</code> isn't implicitly zeroed because the zeroing takes time and you might not need it zeroed. Additionally, you'd pay the cost not just once but each time control ran past the initialized variable.</p>\n\n<p>A static/global <code>int array[10];</code> <em>is</em> implicitly zeroed because statics/globals are allocated at load time. The memory will be fresh from the OS and if the OS is security conscious at all, the memory will have been zeroed already. Otherwise the loading code (the OS or a dynamic linker) will have to zero them (because the C standard requires it), but it should be able to do it in one call to <code>memset</code> for all globals/statics, which is considerably more efficient than zeroing each static/global variable at a time. </p>\n\n<p>This initialization is done once. Even <code>static</code>s inside of functions are initialized just once, even if they have nonzero initializers (e.g., <code>static int x = 42;</code>. This is why C requires that the initializer of a static be a constant expression).</p>\n\n<p>Since the loadtime zeroing of all globals/statics is either OS-guaranteed or efficiently implementable, it might as well be standard-guaranteed and thereby make programmers' lives easier.</p>\n"}, {"tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": false, "score": 3, "last_activity_date": 1562163807, "last_edit_date": 1562163807, "creation_date": 1562163382, "answer_id": 56872123, "question_id": 56871827, "link": "https://stackoverflow.com/questions/56871827/initial-value-of-int-array-in-c-why/56872123#56872123", "title": "Initial value of int array in C - why?", "body": "<p>The reason for not defining the initial value of the variables in stack-allocated/local variables is efficiency. The C Standard expects your program to allocate your array and later fill it:</p>\n\n<pre><code>int array[10];\nfor (i = 0; i &lt; 10; ++i)\n    array[i] = i * 42;\n</code></pre>\n\n<p>In this case, any initialization would be pointless, so the C Standard wants to avoid it.</p>\n\n<p>If your program needs these values initialized to zero, you can do it explicitly:</p>\n\n<pre><code>int array[10] = {0}; // initialize to zero so the accumulation below works\nwhile (condition)\n{\n    ... // some code\n    for (i = 0; i &lt; 10; ++i)\n        array[i] += other_array[i];\n}\n</code></pre>\n\n<p>It is your decision whether to initialize or not, because you are supposed to know how your program behaves. This decision will be different for different arrays.</p>\n\n<p>However, this decision will not depend on a compiler - they are all standard-compliant. One little detail regarding portability - if you don't initialize your array and still see all zeros in it when you use a particular compiler - don't be fooled; the values are still undefined; you cannot rely on them being 0.</p>\n\n<p>Some other languages decided that zero initialization is cheap enough to do even if it's superfluous, and its advantage (safety) outweighs its disadvantage (performance). In C, performance is more important, so it decided otherwise.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1562170863, "creation_date": 1562170863, "answer_id": 56874411, "question_id": 56871827, "link": "https://stackoverflow.com/questions/56871827/initial-value-of-int-array-in-c-why/56874411#56874411", "title": "Initial value of int array in C - why?", "body": "<p>The C philosophy is to a) always trust the programmer and b) prioritize execution speed over programmer convenience.  C assumes that the programmer is in the best position to know whether an array (or any other <code>auto</code> variable) <em>needs</em> to be initialized to a specific value, and if so, is smart enough to write the code to do it themselves.  Otherwise it won't waste the CPU cycles.</p>\n\n<p>Same thing for bounds checking on array accesses, same thing for <code>NULL</code> checks on pointer dereferences, etc.  </p>\n\n<p>This is simultaneously C's greatest strength (fast code with a small footprint) and greatest weakness (lots of manual labor to make code safe and secure).  </p>\n"}], "owner": {"reputation": 3669, "user_id": 5078576, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gwGt0.jpg?s=128&g=1", "display_name": "Leos313", "link": "https://stackoverflow.com/users/5078576/leos313"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 56872064, "answer_count": 4, "score": 3, "last_activity_date": 1562321145, "creation_date": 1562162333, "last_edit_date": 1562321145, "question_id": 56871827, "link": "https://stackoverflow.com/questions/56871827/initial-value-of-int-array-in-c-why", "title": "Initial value of int array in C - why?", "body": "<p>Why is the value of </p>\n\n<pre><code>int array[10];\n</code></pre>\n\n<p>undefined when declared in a function and is <code>0</code>-initialized when declared as <code>static</code>?</p>\n\n<p>I have been reading the answer of <a href=\"https://stackoverflow.com/questions/1414215/initial-value-of-int-array-in-c\">this question</a> and it is clear that </p>\n\n<blockquote>\n  <p>[the expression <code>int array[10];</code>] in a function means: take the ownership of 10-int-size area of memory without doing any initialization. If the array is declared as a global one or as static in a function, then all elements are initialized to zero if they aren't initialized already.</p>\n</blockquote>\n\n<p><strong>Question</strong>: why this behaviour? Do the compiler programmers decide that (for a particular reason)? Can a particular compiler used do the things differently?</p>\n\n<p><strong>Why I am asking this:</strong> I am asking this question because I would like to make my code portable among architectures/compilers. In order to ensure it, I know I can always initialize the declared array. But this means that I will lose precious time only for this operation. So, which is the right decision?</p>\n"}, {"tags": ["c", "linux", "raspberry-pi3", "cpu-usage"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1562162542, "post_id": 56871626, "comment_id": 100292466, "body": "Just curious.. what&#39;s 200% usage? Does it grab another RPI from the shelf?"}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 2, "creation_date": 1562162621, "post_id": 56871626, "comment_id": 100292503, "body": "Try searching for &quot;event-driven programming&quot;."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1562162656, "post_id": 56871626, "comment_id": 100292520, "body": "@EugeneSh. It&#39;s a dual-core processor. (Though I also don&#39;t understand how one busy loop pulls down two cores.)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1562162658, "post_id": 56871626, "comment_id": 100292522, "body": "As for the question... use interrupts instead of a busy loop to check your input. And go to a lower power state while waiting (<code>wfi</code>? not sure about your environment.)"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 2, "creation_date": 1562162801, "post_id": 56871626, "comment_id": 100292603, "body": "The problem is that you are <a href=\"https://en.wikipedia.org/wiki/Polling_(computer_science)\" rel=\"nofollow noreferrer\">polling</a>) without any delay between loops. You could start by adding some <code>nanosleep()</code> in the <code>while</code> loop. (see <a href=\"https://raspberrypi.stackexchange.com/questions/3898/nanosleep-wont-sleep-short-time\" title=\"nanosleep wont sleep short time\">raspberrypi.stackexchange.com/questions/3898/&hellip;</a>)"}, {"owner": {"reputation": 11, "user_id": 6591710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c249159b081df1bc5277a862f7343aa8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter von Frosta", "link": "https://stackoverflow.com/users/6591710/peter-von-frosta"}, "edited": false, "score": 1, "creation_date": 1562172294, "post_id": 56871626, "comment_id": 100297842, "body": "thx to all. i will use your key words (event-driven programming, interruption) for farther searching.. i will update when get a successfull solution"}, {"owner": {"reputation": 11, "user_id": 6591710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c249159b081df1bc5277a862f7343aa8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter von Frosta", "link": "https://stackoverflow.com/users/6591710/peter-von-frosta"}, "edited": false, "score": 0, "creation_date": 1562174030, "post_id": 56871626, "comment_id": 100298669, "body": "one thing i don&#39;t understand. if i use interrupts i still need a main loop. Why this will be less cpu intensive? Would be the programm set to sleep mode or where comes the postiv effect from?"}, {"owner": {"reputation": 4392, "user_id": 5215131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2C8rv6T-3m8/AAAAAAAAAAI/AAAAAAAAAP0/ALwPPtWwxac/photo.jpg?sz=128", "display_name": "Florian Zwoch", "link": "https://stackoverflow.com/users/5215131/florian-zwoch"}, "edited": false, "score": 1, "creation_date": 1562178077, "post_id": 56871626, "comment_id": 100300422, "body": "I assume there is more to your program than you wrote. The <code>usleep</code> should be one solution to your problem. But since you initially have 200% CPU and the fix lead you to 100% CPU I bet there is another thread with a loop having the same problem. Or else I can&#39;t explain why a single threaded application can use two cores at the same time."}, {"owner": {"reputation": 11, "user_id": 6591710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c249159b081df1bc5277a862f7343aa8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter von Frosta", "link": "https://stackoverflow.com/users/6591710/peter-von-frosta"}, "edited": false, "score": 0, "creation_date": 1562257229, "post_id": 56871626, "comment_id": 100329901, "body": "You are so right! i tried to simplify to keep it easy to explain. Yes, the Rpi3+ that shows 200% starts a thread with a busy wait too. The other Rpi3 (no plus) that shows 100% doesn&#39;t start threads. Pitty, i mixed it up. But you all firgued out the right diretion. Now i have to understand how to use events/interrupts and where the while(1) will be different."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1562165399, "post_id": 56871807, "comment_id": 100294231, "body": "@ThomasJager: OK \u2014 I didn&#39;t check for prior editions of the answer.  I&#39;ll remove my comment, I suppose, though there&#39;s some possibly useful information there.  \u2026Nah, it goes\u2026  Maybe your comment has been overtaken by changes too?"}], "tags": [], "owner": {"reputation": 171, "user_id": 11669560, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qEIbbXH3wXo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfbRdRV5shWAqUL8cr_Cl_9Arm7Zg/mo/photo.jpg?sz=128", "display_name": "Arnaud", "link": "https://stackoverflow.com/users/11669560/arnaud"}, "is_accepted": false, "score": 1, "last_activity_date": 1562165016, "last_edit_date": 1562165016, "creation_date": 1562162280, "answer_id": 56871807, "question_id": 56871626, "link": "https://stackoverflow.com/questions/56871626/how-to-reduce-cpu-usage-from-own-c-programms/56871807#56871807", "title": "How to reduce CPU usage from own C programms", "body": "<p>You may let the OS spare resources (compute other things) by telling your program to sleep.</p>\n\n<pre><code>usleep(int timeInMicroseconds);\n</code></pre>\n\n<p>this will make the program sleep for timeInMicroseconds.</p>\n\n<p>As your program take in account Button pushes sleeping for a even a few milliseconds shouldn't make your program less efficient in detecting pushes.</p>\n\n<p>The more your program will sleep the more it will release the CPU, but also be less reactive to detect your pushes (and even doesn't detect them if the sleep period is too long). It's a balance; some trial and error should give you a good value.  </p>\n\n<pre><code>#include &lt;unistd.h&gt;\n\nwhile(1)\n{\n   if (digitalRead(butPin)) // Button is released if this returns 1\n   {\n       digitalWrite(ledPin, LOW);     // Regular LED off\n   }\n   else \n   {\n\n   }\n   usleep(5000); //Sleep for 5ms\n}\n</code></pre>\n\n<p>Another option would be to use interruption: \n<a href=\"http://wiringpi.com/reference/priority-interrupts-and-threads/\" rel=\"nofollow noreferrer\">Interruption with wiringPi</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 6591710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c249159b081df1bc5277a862f7343aa8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter von Frosta", "link": "https://stackoverflow.com/users/6591710/peter-von-frosta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562172742, "creation_date": 1562161620, "last_edit_date": 1562172742, "question_id": 56871626, "link": "https://stackoverflow.com/questions/56871626/how-to-reduce-cpu-usage-from-own-c-programms", "title": "How to reduce CPU usage from own C programms", "body": "<p>User C programm do cpu usage of 200% on my RPi3+. I noticed it because I wondered about the hight temperature.</p>\n\n<p>I checked my other Pis with other own written C programms. Nearly the same: CPU usage 100% (Pi3 but no plus). When I kill/stop just this programm, the CPU usage and temperature drop down.</p>\n\n<p>In the while(1) loop i check the gpio state (connected to a button) . If it pressed i do things depending on duration that the button is pressed. For expample print over cups or delete/change mysql data.</p>\n\n<p>I read something about select() but i didnt understood the context or usage.\nBut I understood that slowering the loop with sleeps ist not the way of art.</p>\n\n<pre><code>...\nwhile(1)\n{\n   if (digitalRead(butPin)) // Button is released if this returns 1\n   {\n       digitalWrite(ledPin, LOW);     // Regular LED off\n   }\n   else \n   {\n      //evalute button press\n      ......\n   }\n...\n</code></pre>\n\n<p>All works fine and the pi response fast usally. But for this easy work the pi is too hot. So it also needs too much power.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<h1>First try: add usleep() to the end of while(1)</h1>\n\n<p>this reduce the CPU usage but not to low level.</p>\n\n<p><code>usleep(0)</code>     => 200%</p>\n\n<p><code>usleep(5)</code>     => 111%</p>\n\n<p><code>usleep(100)</code> => 105%</p>\n\n<p><code>usleep(5000)</code> => 100%</p>\n\n<p>(on Raspberry 3+)</p>\n\n<p><a href=\"https://i.stack.imgur.com/XEWc4.jpg\" rel=\"nofollow noreferrer\">Top RPI3+ CPU 200%</a></p>\n"}, {"tags": ["c", "arduino", "esp32"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1562161585, "post_id": 56871593, "comment_id": 100291944, "body": "How about a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 44, "user_id": 11734505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/608a70bb6c186128f3b7d52a688ff50e?s=128&d=identicon&r=PG&f=1", "display_name": "german_wings", "link": "https://stackoverflow.com/users/11734505/german-wings"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1562161902, "post_id": 56871593, "comment_id": 100292124, "body": "Hello , Thanks for your suggestion , I removed the unused variables and imports , I think this is the smallest I could make , also I thought in case if someone wants to run this code they can right away without making any changes to it , I have removed anything platform / library dependent to make it easy , its just plain C. Thanks"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1562163447, "post_id": 56871593, "comment_id": 100292949, "body": "Note that expressions of the form <code>&amp;pointer[0]</code> are 100% equivalent to the simpler form <code>pointer</code>.  The latter is more idiomatic."}, {"owner": {"reputation": 44, "user_id": 11734505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/608a70bb6c186128f3b7d52a688ff50e?s=128&d=identicon&r=PG&f=1", "display_name": "german_wings", "link": "https://stackoverflow.com/users/11734505/german-wings"}, "edited": false, "score": 0, "creation_date": 1562163934, "post_id": 56871593, "comment_id": 100293261, "body": "Thanks for mentioning , I might have made those changes in order to make it more verbose(or debugging) , I recently learned pointers and the concept of &quot;Pointer Decays&quot; , I will remember John&#39;s Comments and put it under &quot;Good Practices &quot; when I code."}], "answers": [{"comments": [{"owner": {"reputation": 44, "user_id": 11734505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/608a70bb6c186128f3b7d52a688ff50e?s=128&d=identicon&r=PG&f=1", "display_name": "german_wings", "link": "https://stackoverflow.com/users/11734505/german-wings"}, "edited": false, "score": 0, "creation_date": 1562165294, "post_id": 56872354, "comment_id": 100294160, "body": "It was indeed the undefined behavior , increasing the size to 4 for rand_session_channel_local did yield me the expected output. However It would be very interesting to understand why such a behavior was not observed on my computer ? and why on the esp32 ?"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1562164116, "creation_date": 1562164116, "answer_id": 56872354, "question_id": 56871593, "link": "https://stackoverflow.com/questions/56871593/is-there-a-better-way-of-modifying-arrays-from-within-a-function-in-c/56872354#56872354", "title": "Is there a better way of modifying arrays from within a function in C?", "body": "<p>This code ...</p>\n\n<blockquote>\n<pre><code>    sprintf(rand_session_channel_local, \"%03ld\", channel_value);\n</code></pre>\n</blockquote>\n\n<p>... requires <code>rand_session_channel_local</code> to point to an array of at least <em>four</em> characters, because at will print at least three digits plus a string terminator.  The array into which it points, <code>rand_session_channel</code>, is only three characters long.  The resulting behavior is undefined.</p>\n\n<p>The observed manifestation of the UB is consistent with the global arrays being laid out in memory such that <code>rand_session_key</code> immediately follows <code>rand_session_channel</code>, such that overflowing the latter means that the string terminator is written to position 0 of the former, making it an empty string.  Note, however, that you cannot rely on predicting manifestations of UB, nor is it generally of much use to analyze them.  Instead, avoid exercising UB.</p>\n\n<p>It's unclear what <code>random</code> function you are using, since the C standard library's does not take an argument, but if the argument to yours specifies an <em>exclusive</em> upper bound then you could just change the <code>sprintf</code> format to <code>\"%02ld\"</code>.  Alternatively, increase the size of <code>rand_session_channel</code> to at least 4.</p>\n"}], "owner": {"reputation": 44, "user_id": 11734505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/608a70bb6c186128f3b7d52a688ff50e?s=128&d=identicon&r=PG&f=1", "display_name": "german_wings", "link": "https://stackoverflow.com/users/11734505/german-wings"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 56872354, "answer_count": 1, "score": 0, "last_activity_date": 1562164116, "creation_date": 1562161520, "question_id": 56871593, "link": "https://stackoverflow.com/questions/56871593/is-there-a-better-way-of-modifying-arrays-from-within-a-function-in-c", "title": "Is there a better way of modifying arrays from within a function in C?", "body": "<p>I am trying to create a formatted string , however I do not know why I cannot print global array which I have modified inside the function.Also the strange behavior is that I cannot access only a specific global array (rand_session_key) rest of the other global arrays are behaving as normal(similar operations are being done on them except their size varies) and I can access their value properly. This code is run on an esp32 (DOIT Dev Kit V1) (with Arduino-Core) , when I run this program on my computer (modifying a few functions etc.) the result is what I expect , I think I am overlapping the characters in the memory or accessing it the wrong way , but had it been the case I would not have yielded the expected output on my computer.</p>\n\n<p>I tried to modify my program and made it more verbose. Also I ran the same code (with some obvious modifications to make it run on my computer) , and the result is good as expected.</p>\n\n<pre><code>char persistent_peripheral_id[] = \"FRUCTOSE96\";\nchar rand_session_iden[7] = {'\\0'};\nchar rand_session_key[17] = {'\\0'};\nchar rand_session_channel[3] = {'\\0'};\n\nchar *generate_random_session_identifier(char *rand_session_iden_local)\n{\n    srand(time(NULL));\n    int counter = 0;\n    for (counter = 0; counter &lt; 6; counter++)\n        *(rand_session_iden_local + counter) = (random(10) % ('~' - ' ')) + 'k';\n    rand_session_iden_local[counter] = '\\0';\n    printf(\"Identifier : %s\\n\", rand_session_iden); //acessing global defintion of array everything is good until here\n    return &amp;rand_session_iden_local[0];\n}\n\nchar *generate_random_session_key(char *rand_session_key_local)\n{\n    srand(time(NULL));\n    int counter = 0;\n    for (counter = 0; counter &lt; 16; counter++)\n        *(rand_session_key_local + counter) = (random(10) % ('~' - ' ')) + 'b';\n    rand_session_key_local[counter] = '\\0';\n    printf(\"Key : %s\\n\", rand_session_key);//acessing global defintion of array everything is good until here\n    return &amp;rand_session_key_local[0];\n}\n\nchar *generate_random_session_channel(char *rand_session_channel_local)\n{\n    srand(time(NULL));\n    int channel_value = random(100);\n    sprintf(rand_session_channel_local, \"%03ld\", channel_value);\n    printf(\"Channel : %s\\n\", rand_session_channel);//acessing global defintion of array everything is good until here\n    return &amp;rand_session_channel_local[0];\n}\n\nvoid begin_exchange_package()\n{\n    //If this does not works here (observe rand_session_key) , it will not work for sprintf also ??\n    printf(\"\\n %s-%s-%s-%s \\n\", (char *)persistent_peripheral_id,\n           generate_random_session_identifier(rand_session_iden),\n           generate_random_session_key(rand_session_key),\n           generate_random_session_channel(rand_session_channel));\n\n    //Notice it prints here ????\n    printf(\"\\n %s \\n\",generate_random_session_key(rand_session_key));\n    Serial.println(\"Done\");\n\n\n    //sprintf((char *)plain_text_package, \"{\\\"p\\\":\\\"%s\\\",\\\"r\\\":\\\"%s\\\",\\\"k\\\":\\\"%s\\\",\\\"c\\\":\\\"%s\\\"}\", (char *)persistent_peripheral_id,(char *)rand_session_iden, (char *)rand_session_key , (char *)rand_session_channel);\n\n}\n\nvoid setup()\n{\n    Serial.begin(115200);\n    begin_exchange_package();\n}\n\nvoid loop()\n{\n}\n</code></pre>\n\n<p>The Output is \nFRUCTOSE96-tnltkp--094\nWhere I expected all the 4 arrays to be printed ?? but it does print separately , is my array being terminated in the wrong way ?? also the logic to assign a random character will always yield a printable ASCII Character (I learned this from a forum on esp32's website)  </p>\n"}, {"tags": ["c", "winapi", "windows-runtime"], "comments": [{"owner": {"reputation": 1239, "user_id": 4452971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/og0oX.png?s=128&g=1", "display_name": "Castorix", "link": "https://stackoverflow.com/users/4452971/castorix"}, "edited": false, "score": 2, "creation_date": 1562172890, "post_id": 56871434, "comment_id": 100298131, "body": "In the .h, it is <i>{193696CD-A5C4-4ABE-852B-785BE4CB3E34}</i>"}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "edited": false, "score": 0, "creation_date": 1562197178, "post_id": 56871434, "comment_id": 100306674, "body": "Related: <a href=\"https://stackoverflow.com/questions/55573362/what-library-should-i-link-to-get-proper-definition-of-winrts-extern-c-const-I\" title=\"what library should i link to get proper definition of winrts extern c const I\">stackoverflow.com/questions/55573362/&hellip;</a> and <a href=\"https://stackoverflow.com/q/49002774/3501\">stackoverflow.com/q/49002774/3501</a>"}], "owner": {"reputation": 2917, "user_id": 4031604, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d800dd437bdbb2645b3c71236583fd?s=128&d=identicon&r=PG&f=1", "display_name": "AnArrayOfFunctions", "link": "https://stackoverflow.com/users/4031604/anarrayoffunctions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1562165582, "creation_date": 1562160979, "last_edit_date": 1562165582, "question_id": 56871434, "link": "https://stackoverflow.com/questions/56871434/where-is-the-iid-of-ivpnmanagementagent-defined", "title": "Where is the IID of IVpnManagementAgent defined", "body": "<p>I'm trying to create an object of <code>IVpnManagementAgent</code> but I can't seem to find where the IID (<code>IID___x_ABI_CWindows_CNetworking_CVpn_CIVpnManagementAgent</code>) of it is defined so I can instance <code>RoGetActivationFactory</code> as it seems it requires me a second parameter of <code>REFIID</code>.</p>\n\n<p>Also I saw this <a href=\"https://msdn.microsoft.com/en-us/magazine/dn342867.aspx\" rel=\"nofollow noreferrer\">example</a> but as I'm using C - I can't use <code>__uuidof</code>.</p>\n\n<p>Weirdly enough the <a href=\"https://docs.microsoft.com/en-us/cpp/cppcx/wrl/how-to-activate-and-use-a-windows-runtime-component-using-wrl?view=vs-2019\" rel=\"nofollow noreferrer\">msdn sample</a> seems to omit this parameter.</p>\n\n<p>The problem is if I compile this code:</p>\n\n<pre><code>#include &lt;roapi.h&gt;\n#define COBJMACROS\n#include &lt;windows.networking.vpn.h&gt;\n\n(main)()\n{__x_ABI_CWindows_CNetworking_CVpn_CIVpnManagementAgent *pVpnMan;\n    IClassFactory *pCF; RoInitialize(RO_INIT_MULTITHREADED),\n        RoGetActivationFactory(0,\n            &amp;IID___x_ABI_CWindows_CNetworking_CVpn_CIVpnManagementAgent, \n            &amp;pVpnMan);}\n</code></pre>\n\n<p>Like this: <code>cl rmousevpn.c /link RuntimeObject.lib windows.networking.lib</code></p>\n\n<p>It gives me unresolved:</p>\n\n<pre><code>rmousevpn.obj : error LNK2019: unresolved external symbol IID___x_ABI_CWindows_CNetworking_CVpn_CIVpnManagementAgent referenced in function main\nrmousevpn.exe : fatal error LNK1120: 1 unresolved externals\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 5, "creation_date": 1562160479, "post_id": 56871241, "comment_id": 100291240, "body": "<code>&#39;A&#39;</code> is a number, try <code>printf(&quot;%d\\n&quot;, &#39;A&#39;);</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1562160511, "post_id": 56871241, "comment_id": 100291258, "body": "Assuming <a href=\"https://en.wikipedia.org/wiki/ASCII\" rel=\"nofollow noreferrer\">ASCII encoding</a>, <code>&#39;A&#39;</code> is equal to the integer value <code>65</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 4, "creation_date": 1562161181, "post_id": 56871241, "comment_id": 100291705, "body": "Where have you read this apalling piece of code?"}, {"owner": {"reputation": 7193, "user_id": 765971, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f390fb2ccc9321e41ca5bcd09cb9a9a?s=128&d=identicon&r=PG", "display_name": "SKi", "link": "https://stackoverflow.com/users/765971/ski"}, "edited": false, "score": 0, "creation_date": 1562161786, "post_id": 56871241, "comment_id": 100292053, "body": "Variables looks like parameters of the main function. Is the code sample really from the main function?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1562164195, "post_id": 56871241, "comment_id": 100293425, "body": "If this is from <code>main</code> I would like to see how to provide those 2 parameters via command line..."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1562164872, "post_id": 56871241, "comment_id": 100293862, "body": "The actual encoding for string literals is the one you tell or let the compiler use. (/fexecution-charset or -fexec-charset) The users would also need to know what that is in many programs (where they are providing text input that has to match or have to understand text output)."}, {"owner": {"reputation": 313, "user_id": 4406749, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/707db4d06dad94edfaf32f7968332d5d?s=128&d=identicon&r=PG&f=1", "display_name": "Anas Tawtaw", "link": "https://stackoverflow.com/users/4406749/anas-tawtaw"}, "edited": false, "score": 0, "creation_date": 1613447270, "post_id": 56871241, "comment_id": 117071504, "body": "For any future people seeing this. This is a challenge from pwnable.kr called &#39;input&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1562160819, "post_id": 56871356, "comment_id": 100291476, "body": "<i>Technically</i>, it is implementation-dependent which <code>argv</code> element is accessed.  Implementations are not required to use ASCII to map characters to integers, and some don&#39;t."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1562163969, "post_id": 56871356, "comment_id": 100293282, "body": "&quot;all character literals can act as numeric literals&quot;. Character literals have type <code>int</code> anyway."}, {"owner": {"reputation": 2531, "user_id": 6084317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4295c9b1ada748080d7a123f7263ae69?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Minnix", "link": "https://stackoverflow.com/users/6084317/edward-minnix"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1562164054, "post_id": 56871356, "comment_id": 100293333, "body": "@Gerhardh. Yes, but a lot of people forget that chars are an integral numeric type. So I was just being explicit with that."}], "tags": [], "owner": {"reputation": 2531, "user_id": 6084317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4295c9b1ada748080d7a123f7263ae69?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Minnix", "link": "https://stackoverflow.com/users/6084317/edward-minnix"}, "is_accepted": true, "score": 4, "last_activity_date": 1562161273, "last_edit_date": 1562161273, "creation_date": 1562160720, "answer_id": 56871356, "question_id": 56871241, "link": "https://stackoverflow.com/questions/56871241/what-is-the-meaning-of-argva-in-c/56871356#56871356", "title": "What is the meaning of &quot;argv[&#39;A&#39;]&quot; in c?", "body": "<p>Technically, this is valid in C for accessing an element of the argv (<code>argv[65]</code>).</p>\n\n<p><strong>Edit</strong>: as John Ballinger noted in the comments, this is only if your C implementation maps character literals to their ASCII values, which is not required by the standard. However, most C implementations do, so I would assume the author of the code was using this assumption.</p>\n\n<p>This is because in C, all character literals can act as numeric literals.</p>\n\n<p>Granted, if you are expecting 65+ elements in your argv, something is probably wrong. And even so, using <code>'A'</code> and <code>'B'</code> for the indices 65 and 66 wouldn't make sense unless you had some specific association of your argv with letters.</p>\n\n<p><strong>TL;DR</strong> it is an index, but the code is incredibly abnormal and probably intentionally obfuscated</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1562161025, "creation_date": 1562161025, "answer_id": 56871450, "question_id": 56871241, "link": "https://stackoverflow.com/questions/56871241/what-is-the-meaning-of-argva-in-c/56871450#56871450", "title": "What is the meaning of &quot;argv[&#39;A&#39;]&quot; in c?", "body": "<p><code>'A'</code> is just a way of specifying a value with an <code>int</code> type (which, given that you've passed an alphanumeric character, must be capable of fitting into a <code>char</code> on your platform.) The value is implementation defined, although in ASCII, it's 65.</p>\n\n<p>So <code>argv['A']</code> is rather like <code>int n = 'A'; argv[n];</code></p>\n\n<p>Whether or not the program is equipped with that many command line arguments (<code>argc</code> will tell you that and <code>if(argc != 100)</code> is an insufficient check) is another matter.</p>\n\n<p>That all said, it's possible to call <code>main</code> from itself in C; perhaps the command line arguments are introduced then, as an exercise in obfuscation.</p>\n"}], "owner": {"reputation": 857, "user_id": 1208081, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ca2d4ef0024cd926cc7a6218f7a4aed8?s=128&d=identicon&r=PG", "display_name": "user1208081", "link": "https://stackoverflow.com/users/1208081/user1208081"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "accepted_answer_id": 56871356, "answer_count": 2, "score": 2, "last_activity_date": 1562161273, "creation_date": 1562160325, "last_edit_date": 1562161243, "question_id": 56871241, "link": "https://stackoverflow.com/questions/56871241/what-is-the-meaning-of-argva-in-c", "title": "What is the meaning of &quot;argv[&#39;A&#39;]&quot; in c?", "body": "<p>I have found the following code, and I do not understand what it is or how it works. I have only seen <code>argv[n]</code> (argv with an integer index) in C before, never with a character literal like <code>argv['A']</code>.</p>\n\n<pre><code>if(argc != 100) return 0;\nif(strcmp(argv['A'],\"\\x00\")) return 0;\nif(strcmp(argv['B'],\"\\x20\\x0a\\x0d\")) return 0;\nprintf(\"Stage 1 clear!\\n\");\n</code></pre>\n\n<p>What does this do? Could you explain why it works?</p>\n"}, {"tags": ["c", "c-preprocessor", "user-defined-functions"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 4, "creation_date": 1562158250, "post_id": 56870469, "comment_id": 100289747, "body": "<i>&quot;I have to deal with two header files declaring the same prototype with different type name (note that the 2 types are the same at the end)&quot;</i>: this is pretty bad design in the first place."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1562158330, "post_id": 56870469, "comment_id": 100289784, "body": "<code>#ifndef</code> is a preprocessor <i>directive</i>, not a pragma.  A pragma is a different, specific kind of preprocessor directive."}, {"owner": {"reputation": 65, "user_id": 3968281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c37335ff0b540be9a608c7bb0c6c8e2?s=128&d=identicon&r=PG&f=1", "display_name": "Marine Jouanneau", "link": "https://stackoverflow.com/users/3968281/marine-jouanneau"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1562158545, "post_id": 56870469, "comment_id": 100289924, "body": "@Jabberwocky agree..."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1562159171, "post_id": 56870469, "comment_id": 100290390, "body": "What limitations do you have in how much you can do to fix this?  The proper fix is to reconcile the two header files so it&#39;s only declared in one, but I&#39;m assuming you aren&#39;t able to do that for some reason like organizational structure, resource limitations, or time constraints."}, {"owner": {"reputation": 65, "user_id": 3968281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c37335ff0b540be9a608c7bb0c6c8e2?s=128&d=identicon&r=PG&f=1", "display_name": "Marine Jouanneau", "link": "https://stackoverflow.com/users/3968281/marine-jouanneau"}, "edited": false, "score": 0, "creation_date": 1562159616, "post_id": 56870469, "comment_id": 100290670, "body": "acg_header is from automatic code genertion =&gt; can&#39;t touch this file and manual header is modifiable but I can&#39;t delete it"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1562159693, "post_id": 56870469, "comment_id": 100290719, "body": "How can the two types be the same at the end if they are not the same at the declarations? In order for the compiler to process <code>extern T_Float_user ACos(T_Float_user X);</code>, <code>T_Float_user</code> must have been defined (with a <code>typedef</code>, which makes it an alias for some type). Similarly, in order for the compiler to process <code>extern t_float Acos(const t_float X);</code>, <code>t_float</code> must have been defined. If they are different names for the same type, there is no error; this should compile and run (in the absence of other issues). If they are different types, they are different and cannot be made the same."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1562159987, "post_id": 56870469, "comment_id": 100290927, "body": "A <code>typedef</code> does not create a new type. It only creates a synonym for a type. So if one header has <code>typedef struct foo T_Float_user</code> and another header has <code>typedef struct foo t_float</code>, then <code>T_Float_user</code> and <code>t_float</code> are the same type (provided <code>struct foo</code> is declared identically in both). Type names are not like structure names, where different structure tags create different types even if the structure contents are identical."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1562160081, "post_id": 56870469, "comment_id": 100290986, "body": "That said, there is probably no reason for manual_header.h to be redeclaring types or functions declared in acg_header.h. Likely it ought to simply include acg_header.h. Regarding \u201cI have to deal with two header files declaring the same prototype with different type name\u201d\u2014Why? What is making you deal with that? Why do two headers have to declare the same prototype with different type names?"}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1562159774, "creation_date": 1562159774, "answer_id": 56871065, "question_id": 56870469, "link": "https://stackoverflow.com/questions/56870469/usage-of-pre-processor-definition-with-function-prototype/56871065#56871065", "title": "usage of pre processor definition with function prototype", "body": "<p>You may have any number of <em>compatible</em> declarations of the same function or object.  It is not necessary or useful to play preprocessor games to avoid this situation.  This is why the standard approach is for each function or global variable to be declared in a (one) header file, and for each source that accesses or defines any function or object to include the appropriate header.  So, with respect to</p>\n\n<blockquote>\n  <p>I have to deal with two header files declaring the same prototype with different type name</p>\n</blockquote>\n\n<p>, no, you <em>shouldn't</em> have to deal with that.  There should be only one header declaring each function.  Nevertheless, if you do have two, and they declare the function compatibly, then you still have no problem, even if the declarations do not lexically match on account of the use of different -- but compatible -- type aliases.</p>\n\n<p>If the declarations in your two header files are not compatible with each other, on the other hand, then you have a deeper problem.  At most one of them can be compatible with the function definition, and you must not use any other.</p>\n\n<blockquote>\n  <p>I am considering adding a define to avoid the double declaration but have been told is not good practice to have the same name for a define definction and for a function name.</p>\n</blockquote>\n\n<p>Again, your best bet is to skip this whole exercise, but if you choose to go ahead, then you need to understand that appearances in your code of an in-scope macro identifier will be replaced with the macro definition.  Thus, the result of preprocessing this:</p>\n\n<blockquote>\n<pre><code>#define ACos // suggested modification\nextern t_float ACos(const t_float X);\n</code></pre>\n</blockquote>\n\n<p>would be</p>\n\n<pre><code>extern t_float (const t_float X);\n</code></pre>\n\n<p>, because you've defined <code>ACos</code> to expand to an empty sequence. The preprocessed result is invalid.  If you <em>must</em> follow this path, then define the macro to expand to its own name:</p>\n\n<pre><code>#define ACos ACos\n</code></pre>\n\n<p>You will then be able to test it via <code>#ifdef</code> directives, but you will avoid causing the preprocessor to mangle your program.  But again, really, don't do this at all.</p>\n"}], "owner": {"reputation": 65, "user_id": 3968281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c37335ff0b540be9a608c7bb0c6c8e2?s=128&d=identicon&r=PG&f=1", "display_name": "Marine Jouanneau", "link": "https://stackoverflow.com/users/3968281/marine-jouanneau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562159774, "creation_date": 1562157863, "last_edit_date": 1562158527, "question_id": 56870469, "link": "https://stackoverflow.com/questions/56870469/usage-of-pre-processor-definition-with-function-prototype", "title": "usage of pre processor definition with function prototype", "body": "<p>I have to deal with two header files declaring the same prototype with different type name (note that the 2 types are the same at the end)</p>\n\n<p>One of them is protected with #ifndef directive</p>\n\n<p>I am considering adding a define to avoid the double declaration but have been told is not good practice to have the same name for a define definction and for a function name.</p>\n\n<p>acg_header.h</p>\n\n<pre><code>    #ifndef ACos\n    /* MATH::ACos/ */\n    extern T_Float_user ACos(/* X/ */ T_Float_user X);\n    #endif /* ACos */\n</code></pre>\n\n<p>manual_header.h</p>\n\n<pre><code>    #define ACos // suggested modification\n    extern t_float ACos(const t_float X);\n</code></pre>\n\n<p>I would like to know if is is a correct solution regarding C implementation.</p>\n"}, {"tags": ["c", "pointers", "c-preprocessor", "lpc"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 4, "creation_date": 1562155445, "post_id": 56869716, "comment_id": 100287983, "body": "You need to show the code which doesn&#39;t compile in context.  A single line by itself doesn&#39;t tell us anything."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1562155456, "post_id": 56869716, "comment_id": 100287990, "body": "You can&#39;t have generic statements outside of functions. Any book, tutorial or class should have taught you that."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1562155748, "post_id": 56869716, "comment_id": 100288175, "body": "As far as the preprocessor is concerned, the <code>#define</code> means that <code>SYSCON</code> is now a constant that expands to <code>((SYSCON_Type *)0x40000000u)</code>, so writing <code>SYSCON-&gt;SDIOCLKSEL = some value;</code> is exactly equivalent to writing <code>((SYSCON_Type *)0x40000000u)-&gt;SDIOCLKSEL = some value;</code>. All the rest is just C syntax, unrelated to the preprocessor."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2201041"}, "edited": false, "score": 0, "creation_date": 1562156178, "post_id": 56869716, "comment_id": 100288465, "body": "Keep in mind you can also just have the compiler show you the output of the preprocessor to help understand what&#39;s going on. Check your compiler&#39;s documentation for how to do that."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 2, "creation_date": 1562156694, "post_id": 56869716, "comment_id": 100288780, "body": "Preprocessor does not know anything about pointers. Therefore there is no syntax for pointer definition in macros. It is the same syntax as without macros."}, {"owner": {"reputation": 25, "user_id": 11734106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5741747d1d1e89edc8ab09c99c42365e?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/11734106/vincent"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1562157930, "post_id": 56869716, "comment_id": 100289533, "body": "@All thanks for your comments guys, much appreciated! @Gerhardh I guess this is were I lack most understanding then. The syntax I have learned thus far for declaring pointers is the simple <code>int *foo_ptr = &amp;foo;</code>.  How <code>((SYSCON_Type *)0x40000000u)</code> translates into that still eludes me."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562163347, "post_id": 56869716, "comment_id": 100292894, "body": "Your compiler errors are simply for trying to write executable code outside any function (at file scope), which isn&#39;t valid C. You can have variable/function declarations/definitions there, but not code."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11734106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5741747d1d1e89edc8ab09c99c42365e?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/11734106/vincent"}, "edited": false, "score": 0, "creation_date": 1562158500, "post_id": 56869915, "comment_id": 100289895, "body": "I guess this is were I lack most understanding then. The syntax I have learned thus far for declaring pointers is the simple <code>int *foo_ptr = &amp;foo;</code>.  How   <code>((SYSCON_Type *)0x40000000u)</code> translates into that still eludes me"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 25, "user_id": 11734106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5741747d1d1e89edc8ab09c99c42365e?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/11734106/vincent"}, "edited": false, "score": 0, "creation_date": 1562160568, "post_id": 56869915, "comment_id": 100291296, "body": "@Vincent, there is no declaration of a pointer <i>variable</i> here.  There is only an integer constant converted to a pointer <i>value</i>, which is then dereferenced.  The success of this approach depends on knowledge of the target hardware (so that the right constant can be selected), and cooperation of the C implementation in use (since the effect is implementation-defined).  With that said, it is relatively common practice in programming for embedded devices."}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1562156000, "creation_date": 1562156000, "answer_id": 56869915, "question_id": 56869716, "link": "https://stackoverflow.com/questions/56869716/understanding-define-preprocessor-directive-macro-syntax/56869915#56869915", "title": "Understanding #define preprocessor directive macro syntax", "body": "<p>it is very easy.</p>\n\n<blockquote>\n  <p>that it creates a pointer named SYSCON that points to a variable of\n  type SYSCON_Type which is stored at the address 0x40000000u. Is this\n  really what happens?</p>\n</blockquote>\n\n<p>Yes and no. When you use the macro SYSCON </p>\n\n<pre><code>void foo(uint32_t value)\n{\n   SYSCON-&gt;SDIOCLKSEL = value;\n}\n</code></pre>\n\n<p>preprocessor converts into:</p>\n\n<pre><code>void foo(uint32_t value)\n{\n  ((SYSCON_Type *)0x40000000u)-&gt;SDIOCLKSEL = value;\n}\n</code></pre>\n\n<p>which writes the 32bit unsigned <code>value</code> to the memory location at the address 0x40000000u + the offset of the struct member.</p>\n\n<p>It is usually used to access the harware registers mapped in the memory address space.</p>\n\n<p>You need to do it inside the function (as all code in the C language)</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 0, "last_activity_date": 1562164531, "creation_date": 1562164531, "answer_id": 56872484, "question_id": 56869716, "link": "https://stackoverflow.com/questions/56869716/understanding-define-preprocessor-directive-macro-syntax/56872484#56872484", "title": "Understanding #define preprocessor directive macro syntax", "body": "<pre><code>#define SYSCON_BASE         (0x40000000u)\n</code></pre>\n\n<p>This simply lists that at the physical address <code>0x40000000</code>.</p>\n\n<pre><code>#define SYSCON ((SYSCON_Type *)SYSCON_BASE)\n</code></pre>\n\n<p>This converts the integer constant <code>0x40000000u</code> to a pointer to struct by means of a cast. It doesn't actually allocate anything - the actual registers are already allocated as memory-mapped hardware. </p>\n\n<p>Simply put, it says \"at address 0x40000000 there's a hardware peripheral <code>SYSCON</code>\" (whatever that is, some timer?). It's a common scenario that you have several hardware peripherals of the same type inside a MCU (many SPI, ADC etc), each with the same register layout, but found at different addresses. We can use the same struct type for each such peripheral, and also the same driver code.</p>\n\n<p>The struct itself will have a memory map which corresponds 100% to the register layout. Here it is important to ensure that padding/alignment doesn't screw things up, but hopefully the MCU manufacturer have thought of that (don't take it for granted though).</p>\n\n<p>Assuming <code>SDIOCLKSEL</code> has a register offset of <code>0x10</code>, then when you type <code>SYSCON-&gt;SDIOCLKSEL = some value;</code>, you get machine code like this (pseudo assembler code):</p>\n\n<pre><code>LOAD 0x40000000 into index register X  \nLOAD 0x10 into register A\nADD A to X\nMOVE some value into the address of X\n</code></pre>\n\n<p>(ARM got special instructions that can move etc based on an offset, so it may be fewer instructions in the actual machine code. Subsequent register accesses could keep \"X\" untouched and use that base address repeatedly, for effective code.)</p>\n\n<p>The <code>__IO</code> qualifier is just code bloat hiding <code>volatile</code>.</p>\n\n<p>The reason why you get an error when you try to \"write directly into the structure\" is simply that you can't execute code outside all functions, it has nothing to do with this struct.</p>\n"}], "owner": {"reputation": 25, "user_id": 11734106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5741747d1d1e89edc8ab09c99c42365e?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/11734106/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 56872484, "answer_count": 2, "score": 0, "last_activity_date": 1562164531, "creation_date": 1562155316, "question_id": 56869716, "link": "https://stackoverflow.com/questions/56869716/understanding-define-preprocessor-directive-macro-syntax", "title": "Understanding #define preprocessor directive macro syntax", "body": "<p>The following code is taken from the LPC54618.h header file:</p>\n\n<pre><code>typedef struct {\n     //...structure elements\n     __IO uint32_t SDIOCLKSEL;\n     //...more elements\n\n} SYSCON_Type;\n\n#define SYSCON_BASE         (0x40000000u)\n#define SYSCON              ((SYSCON_Type *)SYSCON_BASE)\n</code></pre>\n\n<ol>\n<li><p>As far as I can guess the meaning behind the line </p>\n\n<p><code>#define SYSCON              ((SYSCON_Type *)SYSCON_BASE)</code> </p></li>\n</ol>\n\n<p>I would assume that it creates a pointer named <code>SYSCON</code> that points to a variable of type <code>SYSCON_Type</code> which is stored at the address <code>0x40000000u</code>. Is this really what happens? And is there any ressource that explains the syntax that is being used here (i.e. defining pointers inside macros)?</p>\n\n<ol start=\"2\">\n<li><p>When I try to alter the value of SDIOCLKSEL directly, i.e.: </p>\n\n<p><code>SYSCON-&gt;SDIOCLKSEL = some value;</code></p>\n\n<p>I get an error:</p>\n\n<p><code>error: expected ')'\nerror: expected parameter declarator\nerror: expected ')'\nerror: expected function body after function declarator</code></p></li>\n</ol>\n\n<p>but if I use it inside a function, e.g.:</p>\n\n<pre><code>void foo(void)\n{\n   SYSCON-&gt;SDIOCLKSEL = some value;  \n}\n</code></pre>\n\n<p>there is no error. Why is that? Why can't I write directly to the structure?</p>\n\n<p>Any answer would be greatly appreciated!</p>\n"}, {"tags": ["c++", "c", "clion"], "comments": [{"owner": {"reputation": 8766, "user_id": 451321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7Sdao.jpg?s=128&g=1", "display_name": "Michael Chourdakis", "link": "https://stackoverflow.com/users/451321/michael-chourdakis"}, "edited": false, "score": 2, "creation_date": 1562153042, "post_id": 56869010, "comment_id": 100286568, "body": "C++ is not <i>that</i> automated like Java. You have to setup the includes/libraries etc manually."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1562154568, "post_id": 56869010, "comment_id": 100287460, "body": "It is not typical for standard library source code to be present on your system.  Also, there is a much greater diversity of C standard library implementations than there are of Java standard library implementations, and although glibc&#39;s source is available, most implementations&#39; is not.  Program to the interface, not to a particular implementation."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1562156543, "post_id": 56869010, "comment_id": 100288684, "body": "And if you could do that with glibc, you&#39;d probably wind up qualified to be a glibc maintainer.  Given the wide variety of platforms glibc supports, finding the actual implementation of a library call for your specific architecture can be challenging, and automating that even more so.  And that&#39;s just the C run-time library..."}, {"owner": {"reputation": 123, "user_id": 4853293, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QZ6DmZmt6FI/AAAAAAAAAAI/AAAAAAAAABc/Nwje4OvkAgo/photo.jpg?sz=128", "display_name": "RenYuZhuo", "link": "https://stackoverflow.com/users/4853293/renyuzhuo"}, "edited": false, "score": 1, "creation_date": 1588560574, "post_id": 56869010, "comment_id": 108936055, "body": "It is difficult to jump the standard library implication, but you can download the standard library implication if you want to look for some code.  <a href=\"https://www.gnu.org/software/libc/\" rel=\"nofollow noreferrer\">gnu.org/software/libc</a>"}], "owner": {"reputation": 935, "user_id": 9225379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b56343fbe3088bb85db6759811b36685?s=128&d=identicon&r=PG&f=1", "display_name": "EnDelt64", "link": "https://stackoverflow.com/users/9225379/endelt64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562152938, "creation_date": 1562152938, "question_id": 56869010, "link": "https://stackoverflow.com/questions/56869010/clion-way-to-go-to-c-c-standard-library-implementation", "title": "CLion - Way to go to C/C++ standard library implementation", "body": "<p>In Java project with IntelliJ IDEA, I can go to the definition of any declared functions by <code>Ctrl+click</code>. But in CLion, I can see only header files.</p>\n\n<p>Is there any way to connect <code>glibc</code> to CLion so I can see the implementation of the functions? I'm using gcc and g++ compiler.</p>\n"}, {"tags": ["c++", "c", "compiler-errors", "zip"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1562151625, "post_id": 56868323, "comment_id": 100285821, "body": "Can you shift the contents of <code>api.h</code> around? Move the definition of <code>CR</code> below the <code>winnt.h</code> include? Remove the CR definition altogether?"}, {"owner": {"reputation": 313, "user_id": 1487009, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/75e72edf3416f69d5da5569c8803adac?s=128&d=identicon&r=PG", "display_name": "Bart Vandewoestyne", "link": "https://stackoverflow.com/users/1487009/bart-vandewoestyne"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1562154335, "post_id": 56868323, "comment_id": 100287322, "body": "Note that I can solve the compiler error by renaming the <code>CR</code> macro (to for example <code>INFOZIP_CR</code>), but as I prefer to keep modifications to third party code as minimal as possible, I am wondering if there exists a solution for which I don&#39;t need to change Info-ZIP&#39;s code."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1562154594, "post_id": 56868323, "comment_id": 100287479, "body": "Will this work: <code>#include &quot;zip.h&quot;</code>, <code>#undef CR</code>, <code>#include &quot;api.h&quot;</code>?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1562155084, "post_id": 56868323, "comment_id": 100287749, "body": "You&#39;re in control of the source code, so you can just replace all occurences of <code>CR</code> with say <code>MYCR</code>. The impact is small."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1562163505, "post_id": 56868323, "comment_id": 100292979, "body": "@BartVandewoestyne Compile with <code>-UCR -DINFOZIP_CR=16 -DCR=INFOZIP_CR</code>"}], "answers": [{"tags": [], "owner": {"reputation": 313, "user_id": 1487009, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/75e72edf3416f69d5da5569c8803adac?s=128&d=identicon&r=PG", "display_name": "Bart Vandewoestyne", "link": "https://stackoverflow.com/users/1487009/bart-vandewoestyne"}, "is_accepted": false, "score": 1, "last_activity_date": 1562224148, "creation_date": 1562224148, "answer_id": 56882392, "question_id": 56868323, "link": "https://stackoverflow.com/questions/56868323/compiler-error-when-using-info-zip-3-0-source-code/56882392#56882392", "title": "Compiler error when using Info-ZIP 3.0 source code", "body": "<p>I finally decided to solve the problem by renaming the CR macro to INFOZIP_CR.  It turned out I had to do that only in four places, so the impact on the Info-ZIP source code is rather minimal.  Thanks for all the comments/suggestions.</p>\n"}, {"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1562243176, "creation_date": 1562243176, "answer_id": 56887941, "question_id": 56868323, "link": "https://stackoverflow.com/questions/56868323/compiler-error-when-using-info-zip-3-0-source-code/56887941#56887941", "title": "Compiler error when using Info-ZIP 3.0 source code", "body": "<blockquote>\n  <p>I am wondering if there exists a solution for which I don't need to change Info-ZIP's code.</p>\n</blockquote>\n\n<p>Provided that <code>windows.h</code> has an include guard, a solution could be to include it first:</p>\n\n<pre><code>#include &lt;windows.h&gt;\nextern \"C\"\n{\n  #include \"api.h\"\n}\n</code></pre>\n\n<p>This way, the <code>struct</code> definition is parsed before the <code>#define CR</code> gets in the way. Of course, this only works if the <code>CR</code> element of the <code>struct</code> is not used later in the compilation unit.</p>\n"}], "owner": {"reputation": 313, "user_id": 1487009, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/75e72edf3416f69d5da5569c8803adac?s=128&d=identicon&r=PG", "display_name": "Bart Vandewoestyne", "link": "https://stackoverflow.com/users/1487009/bart-vandewoestyne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1562243176, "creation_date": 1562150609, "question_id": 56868323, "link": "https://stackoverflow.com/questions/56868323/compiler-error-when-using-info-zip-3-0-source-code", "title": "Compiler error when using Info-ZIP 3.0 source code", "body": "<p>In our legacy C++ code base, we are using Info-ZIP 3.0 source code (written in C) available from <a href=\"https://sourceforge.net/projects/infozip/files/Zip%203.x%20%28latest%29/3.0/\" rel=\"nofollow noreferrer\">https://sourceforge.net/projects/infozip/files/Zip%203.x%20%28latest%29/3.0/</a> to create\nZIP-files.  Switching to another framework for ZIP-file creation is currently\nnot an option due to time constraints.  To use this code, we do something like</p>\n\n<pre><code>extern \"C\" {\n  #include \"api.h\"\n}\n...\nextern \"C\" int EXPENTRY ZpArchive(ZCL C, LPZPOPT Opts);\n</code></pre>\n\n<p>This has worked well with VS2015, but it no longer compiles when switching to\nVS2019.  The problem is that Info-ZIP's <code>api.h</code> includes Info-ZIP's <code>zip.h</code>, which has the following define:</p>\n\n<pre><code>  #define CR     13\n</code></pre>\n\n<p>later on, <code>api.h</code> also conditionally includes <code>windows.h</code>:</p>\n\n<pre><code>#if defined(WINDLL) || defined(API)\n#include &lt;windows.h&gt;\n...\n#endif /* WINDLL? || API? */\n</code></pre>\n\n<p>which eventually also includes <code>winnt.h</code> which has the following typedef:</p>\n\n<pre><code>typedef struct _IMAGE_ARM64_RUNTIME_FUNCTION_ENTRY {\n    DWORD BeginAddress;\n    union {\n        DWORD UnwindData;\n        struct {\n            DWORD Flag : 2;\n            DWORD FunctionLength : 11;\n            DWORD RegF : 3;\n            DWORD RegI : 4;\n            DWORD H : 1;\n            DWORD CR : 2;\n            DWORD FrameSize : 9;\n        } DUMMYSTRUCTNAME;\n    } DUMMYUNIONNAME;\n} IMAGE_ARM64_RUNTIME_FUNCTION_ENTRY, * PIMAGE_ARM64_RUNTIME_FUNCTION_ENTRY;\n</code></pre>\n\n<p>Note that the <code>CR</code> member in the inner struct from this typedef conflicts with\nthe previously defined CR macro, and this gives a compiler error.</p>\n\n<p>What would be a clean way to solve this, preferably without changing Info-ZIP's source code too much (or even nothing at all)?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1562148416, "post_id": 56867545, "comment_id": 100284129, "body": "You are aware that <b>total_outside = total_inside + (whatever time taken to call and return)</b>"}, {"owner": {"reputation": 41, "user_id": 5832938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a369ef5ad5bf8888acf67dd5c0c60327?s=128&d=identicon&r=PG&f=1", "display_name": "Khoa Tran", "link": "https://stackoverflow.com/users/5832938/khoa-tran"}, "reply_to_user": {"reputation": 11494, "user_id": 1795279, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4TEag.jpg?s=128&g=1", "display_name": "Haris", "link": "https://stackoverflow.com/users/1795279/haris"}, "edited": false, "score": 0, "creation_date": 1562148775, "post_id": 56867545, "comment_id": 100284340, "body": "Yes, the problem is <b>(whatever time taken to call and return)</b> seems unusually long (as large as total_inside), so I wonder what could be the reasons ?. For example, if <b>total_inside  = 127ms</b>, then <b>(whatever time taken to call and return) = 116ms</b>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562151986, "post_id": 56867545, "comment_id": 100286028, "body": "You don\u2019t show how you print the elapsed time inside the function. Nevertheless, it is unlikely that the formatting and printing takes 111 ms."}, {"owner": {"reputation": 15376, "user_id": 588916, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b9737fb0439f70903f8948ad3963d9cc?s=128&d=identicon&r=PG", "display_name": "collapsar", "link": "https://stackoverflow.com/users/588916/collapsar"}, "edited": false, "score": 1, "creation_date": 1562152536, "post_id": 56867545, "comment_id": 100286282, "body": "Check the start of the inside interval relative to the outside interval. Does the time discrepancy persist when executing encrypt multiple times in a row during a program run ?"}, {"owner": {"reputation": 62488, "user_id": 45249, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/81039d357ce18bee9dd8fac6c1c56290?s=128&d=identicon&r=PG", "display_name": "mouviciel", "link": "https://stackoverflow.com/users/45249/mouviciel"}, "edited": false, "score": 5, "creation_date": 1562152935, "post_id": 56867545, "comment_id": 100286511, "body": "Actually, this is not <b>(whatever time taken to call and return)</b> but <b>(whatever time taken to call and return)+(whatever time spent on system/runtime ancillary activities, possibly scheduling other processes)</b>."}, {"owner": {"reputation": 822, "user_id": 11333755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YIwIM.jpg?s=128&g=1", "display_name": "Gopika BG", "link": "https://stackoverflow.com/users/11333755/gopika-bg"}, "edited": false, "score": 0, "creation_date": 1562153161, "post_id": 56867545, "comment_id": 100286630, "body": "In my understanding total_outside time is the sum of total_inside time,time taken for computing start_inside time and whatever time taken to call and return encrypt function."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1562153196, "post_id": 56867545, "comment_id": 100286654, "body": "What is <code>get_current_time()</code>? and <code>time</code> type? How are you printing <code>time</code> type? Also the function name <code>encrypt</code> is already taken by <a href=\"https://pubs.opengroup.org/onlinepubs/9699919799/functions/encrypt.html\" rel=\"nofollow noreferrer\">POSIX</a>."}, {"owner": {"reputation": 314, "user_id": 3876609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55c8e25a139c537665bbe496b20feb0?s=128&d=identicon&r=PG&f=1", "display_name": "Dali", "link": "https://stackoverflow.com/users/3876609/dali"}, "edited": false, "score": 0, "creation_date": 1562236168, "post_id": 56867545, "comment_id": 100319061, "body": "A C function never takes 111ms to return unless you have a poor CPU that is saturated by other processes. My guess is that your problem is in the time calculation and printing, could you elaborate on this point ?"}, {"owner": {"reputation": 314, "user_id": 3876609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55c8e25a139c537665bbe496b20feb0?s=128&d=identicon&r=PG&f=1", "display_name": "Dali", "link": "https://stackoverflow.com/users/3876609/dali"}, "reply_to_user": {"reputation": 62488, "user_id": 45249, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/81039d357ce18bee9dd8fac6c1c56290?s=128&d=identicon&r=PG", "display_name": "mouviciel", "link": "https://stackoverflow.com/users/45249/mouviciel"}, "edited": false, "score": 0, "creation_date": 1562236687, "post_id": 56867545, "comment_id": 100319344, "body": "@mouviciel, it depends what kind of time measurement tool he took, by example the clock function works with the process time and does not count other processes CPU time. But it&#39;s still an approximation only."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1576797241, "post_id": 59417653, "comment_id": 105023377, "body": "another possible problem is optimization reordering the timing calls; timing is not observable behaviour"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1576802015, "post_id": 59417653, "comment_id": 105024358, "body": "@M.M, I assume you mean <i>within</i> the timing function, yes. From memory, a full expression (eg, each line in <code>main</code> since they&#39;re terminated with <code>;</code>) is a sequence point, so no re-oredering is possible at that level."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1576877552, "post_id": 59417653, "comment_id": 105048941, "body": "This is about the as-if rule, not sequence points. The compiler only has to produce the same observable behaviour as the abstract machine,and timing results are not observable behaviour"}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": false, "score": 0, "last_activity_date": 1576794463, "creation_date": 1576794463, "answer_id": 59417653, "question_id": 56867545, "link": "https://stackoverflow.com/questions/56867545/function-takes-unusually-long-time-to-return/59417653#59417653", "title": "Function takes unusually long time to return", "body": "<p>From a glance at the psudo-code, I see a number of things:</p>\n\n<ul>\n<li><p>the first is that it's pseudo-code, which rather hampers our ability to do a full analysis :-) So comments below are based on what I see as most likely options.</p></li>\n<li><p>you haven't actually posted the code for <code>get_current_time()</code>, the execution time of that may be irrelevant but that's not <em>necessarily</em> the case. Sometimes timing functions get in the way of accuarte timing.</p></li>\n<li><p>the reason I mention that last point is that the outer time calculation will consist of the function calculations itself, the stack setup and teardown, <em>and the inner time calculation.</em> You should probably just run with the outer time to see if the timings are reduced.</p></li>\n<li><p>because of the vagaries of code execution, it's often better to time something in a loop and average the time taken. For all we know, the first call may take 250ms and subsequent calls take 1ms.</p></li>\n</ul>\n\n<p>If you're really concerned about stack setup and teardown (it's usually not <em>too</em> bad but it's definitely not free and, for very short-lived functions, it can often swamp the execution time of the actual work being done), there are options.</p>\n\n<p>For example, you can choose higher optimisation levels, or force your function inline such as by making it a function macro, assuming you protect against all the usual macro-related issues, of course.</p>\n"}], "owner": {"reputation": 41, "user_id": 5832938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a369ef5ad5bf8888acf67dd5c0c60327?s=128&d=identicon&r=PG&f=1", "display_name": "Khoa Tran", "link": "https://stackoverflow.com/users/5832938/khoa-tran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1576794463, "creation_date": 1562148020, "last_edit_date": 1562151816, "question_id": 56867545, "link": "https://stackoverflow.com/questions/56867545/function-takes-unusually-long-time-to-return", "title": "Function takes unusually long time to return", "body": "<p>I am measuring how much time it takes to execute function compute_secret(). The pseudo code below is how I do my measurement.\nThe problem is that, there is a quite large different in between  <code>total_inside</code> (the time its take to execute the function body, measure inside the callee) vs.  <code>total_outside</code> (measure inside the caller). For example, <code>total_inside = 127ms</code>, <code>total_outside = 238ms</code>. </p>\n\n<p>I understand that it takes sometime to call and return from function call. But it should not takes \"that\" long. </p>\n\n<p><strong><em>So what are the common reasons when calling and returning from function cost too much time ?</em></strong></p>\n\n<pre><code>int encrypt(args){\n    time start_inside = get_current_time();\n    /**\n         actually compute stuff\n     **/\n    time end_inside = get_current_time();\n    time total_inside = end_inside - start_inside;\n}\n\nint main(){\n    time start_outside = get_current_time();\n\n    encrypt(args);\n\n    time end_outside = get_current_time();\n    time total_outside = end_outside - start_outside;\n}\n</code></pre>\n"}, {"tags": ["c", "dst", "crt"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1562148009, "post_id": 56867447, "comment_id": 100283856, "body": "Maybe <a href=\"https://en.wikipedia.org/wiki/Hanlon%27s_razor\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Hanlon%27s_razor</a> applies?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1562157708, "post_id": 56867447, "comment_id": 100289379, "body": "AIUI, Windows does support worldwide timezones reasonably well.  But it only attempts to handle (a) current zones and (b) current DST rules.  It does not attempt to know that location A moved from timezone B to timezone C in 1997.  It does not attempt to know that in 2005 timezone D changed its DST-start-date from the first Sunday in April to the last Sunday in March."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1562157927, "post_id": 56867447, "comment_id": 100289531, "body": "Now, of course, the tzdb project (used by most Unix, Linux, and Mac systems), <i>does</i> attempt to solve both of those problems.  But they&#39;re really hard problems, and the tzdb solution is pretty complicated.  I don&#39;t know for sure -- I&#39;m totally speculating -- but I suspect Microsoft declined to adopt the tzdb project for some combination of its being (a) overkill and (b) not necessary for Microsoft&#39;s requirements and (c) Unix-based and (d) open source and (e) &quot;Not Invented Here&quot;.  Microsoft has traditionally had a pretty strong affinity for stuff it invented, and an aversion to anything else."}, {"owner": {"reputation": 33, "user_id": 11567104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5ab42eeefc6b9aec5a53d395ea6e922?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/11567104/jim"}, "edited": false, "score": 0, "creation_date": 1562238651, "post_id": 56867447, "comment_id": 100320375, "body": "As far as I have read and tested myself, _tzset dosent support DST outside of the US - if you supply a TZ variable. It does support other countries daylight saving if you have not set the TZ environment variable and it can instead default back to the OS settings instead."}, {"owner": {"reputation": 33, "user_id": 11567104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5ab42eeefc6b9aec5a53d395ea6e922?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/11567104/jim"}, "edited": false, "score": 0, "creation_date": 1562238754, "post_id": 56867447, "comment_id": 100320435, "body": "It would be interesting to see what dates that Microsoft specific code was written. Since it is proprietary code, maybe it is impossible to get such information? But then again, it must have been introduced in some version of microsofts lib c and thus been mentioned in some kind of release note?"}], "owner": {"reputation": 33, "user_id": 11567104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5ab42eeefc6b9aec5a53d395ea6e922?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/11567104/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562147662, "creation_date": 1562147662, "question_id": 56867447, "link": "https://stackoverflow.com/questions/56867447/history-of-c-runtime-library-from-windows", "title": "History of C Runtime library from Windows", "body": "<p>Im curious - is there any known records of when specific parts of the c library where written for Windows?</p>\n\n<p>Im especially interested in the _tzset, and the reasoning to only support american daylight saving when specifying a TZ variable. It would be interesting to know who was running the department that wrote this code and why they decided to do it completely different from how linux handles TZ.</p>\n"}, {"tags": ["c", "linux", "gcc"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562151516, "post_id": 56867398, "comment_id": 100285755, "body": "Note that none of the function declarations or definitions shown in the question involves a prototype. You would need notations such as <code>int main(void)</code> to define a prototype for <code>main()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1562151253, "last_edit_date": 1562151253, "creation_date": 1562147606, "answer_id": 56867426, "question_id": 56867398, "link": "https://stackoverflow.com/questions/56867398/void-affecting-output-of-the-program/56867426#56867426", "title": "void affecting output of the program", "body": "<p>The statement <code>void func1();</code> within <code>main</code> is a <em>function declaration</em>. This is a no-op at runtime.</p>\n\n<p><code>func1();</code> actually calls the function.</p>\n\n<p>It's how the language grammar works, that's all. It's rather clever if you think about it.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1562148013, "post_id": 56867518, "comment_id": 100283858, "body": "&quot; it just means: somewhere there is a function with this signature&quot; There might not be. But there must be if the function is called."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562153652, "post_id": 56867518, "comment_id": 100286920, "body": "@JonathanLeffler, thanks for the edit, but are you sure that &quot;function declaration&quot; is a better name than &quot;function prototype&quot; in this case? Maybe a matter of scope? Global=Prototype and Local=Declaration?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562161993, "post_id": 56867518, "comment_id": 100292176, "body": "Prototype refers to when the types of the arguments are specified in the argument list to the function, or the keyword <code>void</code> explicitly appears to deny that there are arguments. Thus, <code>int main();</code> is a function declaration with no prototype, but <code>int main(void);</code> is a function declaration with a prototype.  As I commented below the question, there isn\u2019t a single prototype in the code in the question. There are function declarations and definitions, but no prototypes at all."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562162567, "post_id": 56867518, "comment_id": 100292476, "body": "Now, your link is to Wikipedia&#39;s article on function prototypes, so that gave me cause for thought. If you&#39;d said something like &quot;As Wikipedia&#39;s article on <a href=\"https://en.wikipedia.org/wiki/Function_prototype\" rel=\"nofollow noreferrer\">function prototypes</a> explains, these are <i>function declarations</i> (and function definitions); but without the type information in the parenthetical argument list, they are not function prototypes.&quot; or something similar, then you&#39;d be fine. The article actually tries to make the case that <code>int main(void) { \u2026 }</code> is not a prototype. That&#39;s not strictly accurate; it does provide a prototype."}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 2, "last_activity_date": 1562152106, "last_edit_date": 1562152106, "creation_date": 1562147934, "answer_id": 56867518, "question_id": 56867398, "link": "https://stackoverflow.com/questions/56867398/void-affecting-output-of-the-program/56867518#56867518", "title": "void affecting output of the program", "body": "<p>In this case, <code>void func1();</code> is not a call to the function, it just means: somewhere there may be a function with this signature, I want to use it even if it is not declared forward. Usually we call this a <a href=\"https://en.wikipedia.org/wiki/Function_prototype\" rel=\"nofollow noreferrer\">function declaration</a> and we don't use it inside <code>main</code> but at the beginning of the file.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562163026, "post_id": 56869694, "comment_id": 100292730, "body": "Note that <code>void func1();</code> is indeed a function declaration, but it says almost nothing about the types of the arguments.  The only thing that can be inferred is that the function is not variadic \u2014 it does not have an argument list that ends with ellipsis: <code>void func1(\u2026, ...)</code> where there must be one named argument with type information in place of the <code>\u2026</code> ellipsis, but the <code>...</code> triple-dot ellipsis indicates more arguments of unspecified type.   To give type information, it must be declared (in this context) as <code>void func(void);</code> \u2014 now there is type information that there are no arguments."}], "tags": [], "owner": {"reputation": 822, "user_id": 11333755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YIwIM.jpg?s=128&g=1", "display_name": "Gopika BG", "link": "https://stackoverflow.com/users/11333755/gopika-bg"}, "is_accepted": false, "score": 0, "last_activity_date": 1562155226, "creation_date": 1562155226, "answer_id": 56869694, "question_id": 56867398, "link": "https://stackoverflow.com/questions/56867398/void-affecting-output-of-the-program/56869694#56869694", "title": "void affecting output of the program", "body": "<p>A function declaration is the action to tells the compiler about a function's name, return type, and parameters.\neg:-<code>void func1();</code></p>\n\n<p>A function definition provides the actual body of the function.\neg:-</p>\n\n<pre><code>void func1() \n{ \n    printf(\"Inside func1()\\n\"); \n} \n</code></pre>\n\n<p>To call a function, you simply need to pass the required parameters along with the function name, and if the function returns a value, then you can store the returned value.</p>\n\n<p>eg:-<code>func1();</code> </p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1562227815, "creation_date": 1562227815, "answer_id": 56883418, "question_id": 56867398, "link": "https://stackoverflow.com/questions/56867398/void-affecting-output-of-the-program/56883418#56883418", "title": "void affecting output of the program", "body": "<p>A declaration <strong>always</strong> begins with a type name.  When you write</p>\n\n<pre><code>int func();\n</code></pre>\n\n<p>you are declaring to the compiler that you have a function that takes an unspecified number of parameters and returns <code>int</code> (so the compiler knows about it).</p>\n\n<p>When you write</p>\n\n<pre><code>func();\n</code></pre>\n\n<p>you are telling the compiler to execute function <code>func();</code> and discard its result, in a normal execution statement.</p>\n\n<p>Always you have a C statement <em><strong>beginning with a type identifier</strong></em>\n, that's not to be executed, but to inform the compiler of the existence of such thing (to declare it)</p>\n\n<p>In your example, you changed two declarations at the beginning of <code>main()</code> into to execution statements.  As such, the compiler generated code to execute those, resulting in the output you got on execution.</p>\n"}], "owner": {"reputation": 61, "user_id": 2381572, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4160b5999d01839f292f8d9f6e76ec7e?s=128&d=identicon&r=PG", "display_name": "shekhar singh", "link": "https://stackoverflow.com/users/2381572/shekhar-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1562227815, "creation_date": 1562147507, "last_edit_date": 1562163265, "question_id": 56867398, "link": "https://stackoverflow.com/questions/56867398/void-affecting-output-of-the-program", "title": "void affecting output of the program", "body": "<p>I am calling one function in which values are printed, but when <code>void</code> is added before the call, the function is not giving correct (or any) output.</p>\n\n<p>I tried various methods</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n\nvoid func1(); \nvoid func2(); \n\nvoid func1() \n{ \n    printf(\"Inside func1()\\n\"); \n} \n\nvoid func2() \n{ \n    printf(\"Inside func2()\\n\"); \n} \n\nint main() \n{ \n    void func1(); \n    void func2(); \n    printf(\"Inside main()\\n\"); \n\n    return 0; \n} \n</code></pre>\n\n<p>Output is :- </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Inside main \n</code></pre>\n\n<p>When <code>void</code> is removed before calling <code>func1</code> and <code>func2</code>, the output is changed.</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n\nvoid func1(); \nvoid func2(); \n\nvoid func1() \n{ \n    printf(\"Inside func1()\\n\"); \n} \n\nvoid func2() \n{ \n    printf(\"Inside func2()\\n\"); \n} \n\nint main() \n{ \n    func1(); \n    func2(); \n    printf(\"Inside main()\\n\"); \n\n    return 0; \n} \n</code></pre>\n\n<p>Output is :- </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Inside func1\nInside func2\nInside main \n</code></pre>\n\n<p>Can anyone explain how <code>void</code> is affecting desired output?</p>\n"}, {"tags": ["c", "list"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1562146014, "post_id": 56866930, "comment_id": 100282766, "body": "Please see <a href=\"https://stackoverflow.com/questions/5240789/scanf-leaves-the-new-line-char-in-the-buffer\">scanf() leaves the newline char in the buffer</a>. And note your check of <code>while(s != EOF)</code> is incorrect. Try <code>while(scanf(&quot; %c&quot;, &amp;s) == 1) { insert(&amp;startPtr, s); }</code> with a space added before <code>%c</code>."}, {"owner": {"reputation": 63, "user_id": 9648749, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fFSpfKm8Yho/AAAAAAAAAAI/AAAAAAAAGZc/TjWV01v_nSg/photo.jpg?sz=128", "display_name": "Impasse", "link": "https://stackoverflow.com/users/9648749/impasse"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1562146416, "post_id": 56866930, "comment_id": 100283001, "body": "Thank you, leaving a whitespace does it. What&#39;s the stop condition for that while cycle?"}], "owner": {"reputation": 63, "user_id": 9648749, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fFSpfKm8Yho/AAAAAAAAAAI/AAAAAAAAGZc/TjWV01v_nSg/photo.jpg?sz=128", "display_name": "Impasse", "link": "https://stackoverflow.com/users/9648749/impasse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 1, "closed_date": 1562146465, "answer_count": 0, "score": 0, "last_activity_date": 1562145849, "creation_date": 1562145849, "question_id": 56866930, "link": "https://stackoverflow.com/questions/56866930/blank-spaces-when-printing-a-list", "closed_reason": "Duplicate", "title": "Blank spaces when printing a list", "body": "<p>I can't understand why this happens. I've had this happen already a few times before, and I've never come to a solution.\nWhen first inputting \"a\" I get the following:</p>\n\n<p>a</p>\n\n<p>The list is:\na --> NULL\nThe list is:</p>\n\n<p>--> a --> NULL</p>\n\n<p>When inputting one more character I get:</p>\n\n<p>b</p>\n\n<p>The list is:</p>\n\n<p>--> a --> b --> NULL\nThe list is:</p>\n\n<p>-->\n--> a --> b --> NULL</p>\n\n<p>This is the source code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct listNode{\n  char data;\n  struct listNode *nextPtr;\n};\n\ntypedef struct listNode ListNode;\ntypedef ListNode *ListNodePtr;\n\nvoid insert(ListNodePtr *Node, char value);\nvoid printList(ListNodePtr Node);\n\nvoid main(){\n  ListNodePtr startPtr = NULL;\n  char s;\n\n  while(s != EOF){\n    scanf(\"%c\", &amp;s);\n    insert(&amp;startPtr, s);\n  }\n}\n\nvoid insert(ListNodePtr *Node, char value){\n  ListNodePtr newPtr = malloc(sizeof(ListNode));\n\n  if(newPtr != NULL){\n    newPtr-&gt;data = value;\n    newPtr-&gt;nextPtr = NULL;\n\n    ListNodePtr previousPtr = NULL;\n    ListNodePtr currentPtr = *Node;\n\n    while(currentPtr != NULL &amp;&amp; value &gt; currentPtr-&gt;data){\n      previousPtr = currentPtr;\n      currentPtr = currentPtr-&gt;nextPtr;\n    }\n\n    if(previousPtr == NULL){\n      newPtr-&gt;nextPtr = *Node;\n      *Node = newPtr;\n    }\n    else{\n      previousPtr-&gt;nextPtr = newPtr;\n      newPtr-&gt;nextPtr = currentPtr;\n    }\n    printList(*Node);\n  }\n  else{\n    printf(\"%c not inserted: no memory available.\");\n  }\n}\n\nvoid printList(ListNodePtr currentPtr){\n    puts(\"The list is: \");\n    while(currentPtr != NULL){\n      printf(\"%c --&gt; \", currentPtr-&gt;data);\n      currentPtr = currentPtr-&gt;nextPtr;\n    }\n    puts(\"NULL\");\n}\n</code></pre>\n\n<p>Any ideas? :/</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3680, "user_id": 4134099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yHvdj.png?s=128&g=1", "display_name": "BattleTested_\u0437\u0430\u043a\u0430\u043b\u0451\u043d\u043d\u044b\u0439 \u0432 \u0431\u043e\u044e", "link": "https://stackoverflow.com/users/4134099/battletested-%d0%b7%d0%b0%d0%ba%d0%b0%d0%bb%d1%91%d0%bd%d0%bd%d1%8b%d0%b9-%d0%b2-%d0%b1%d0%be%d1%8e"}, "edited": false, "score": 2, "creation_date": 1562145454, "post_id": 56866727, "comment_id": 100282440, "body": "What is your problem exactly??"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1562146626, "post_id": 56866727, "comment_id": 100283118, "body": "Aside: <code>pow(-1, count)</code> is inefficient, it would be better to use an alternating variable like <code>sign = -sign</code> in the loop."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11742292, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Rhs_8EFa1A0/AAAAAAAAAAI/AAAAAAAANUg/KEDPbgn5jY8/photo.jpg?sz=128", "display_name": "Tanya Sahdeo", "link": "https://stackoverflow.com/users/11742292/tanya-sahdeo"}, "is_accepted": false, "score": 0, "last_activity_date": 1562326083, "last_edit_date": 1562326083, "creation_date": 1562325762, "answer_id": 56902139, "question_id": 56866727, "link": "https://stackoverflow.com/questions/56866727/problem-calculating-the-inverse-of-a-matrix/56902139#56902139", "title": "problem calculating the inverse of a matrix", "body": "<p>Use some other variable in the loop after :</p>\n\n<pre><code>det + =pow(-1,count) * A-&gt;data[count] *determinant (n-1,&amp;C)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 11527052, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lS_-2UaV8G0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcje4dKnsWqzoTS4MSOeukJWFHTwA/mo/photo.jpg?sz=128", "display_name": "Michaelangelo Meucci", "link": "https://stackoverflow.com/users/11527052/michaelangelo-meucci"}, "edited": false, "score": 0, "creation_date": 1562404801, "post_id": 56902146, "comment_id": 100368860, "body": "I don&#39;t understand the use of the bitwise &#39;&amp;&#39; &#39;^&#39; operators here <code>pow(-1, row&amp;1 ^ col&amp;1)</code>"}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "reply_to_user": {"reputation": 141, "user_id": 11527052, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lS_-2UaV8G0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcje4dKnsWqzoTS4MSOeukJWFHTwA/mo/photo.jpg?sz=128", "display_name": "Michaelangelo Meucci", "link": "https://stackoverflow.com/users/11527052/michaelangelo-meucci"}, "edited": false, "score": 0, "creation_date": 1562567318, "post_id": 56902146, "comment_id": 100399709, "body": "If we look at the <a href=\"https://www.mathsisfun.com/algebra/images/matrix-checkerboard.svg\" rel=\"nofollow noreferrer\">&quot;checkerboard&quot;</a> on the cited page, we can see that the sign of the cells is <code>+</code> if the row and column indices are both even or both odd, and <code>-</code> if one index is even and the other one odd. <code>row&amp;1</code>, <code>col&amp;1</code> yield 0 if the index is even, and 1 if the index is odd; the exclusive-or <code>^</code> of them yields 1 for different, and 0 for same oddness, so we have a suitable exponent for <code>pow(-1, \u2026)</code> to generate the needed sign."}, {"owner": {"reputation": 141, "user_id": 11527052, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lS_-2UaV8G0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcje4dKnsWqzoTS4MSOeukJWFHTwA/mo/photo.jpg?sz=128", "display_name": "Michaelangelo Meucci", "link": "https://stackoverflow.com/users/11527052/michaelangelo-meucci"}, "edited": false, "score": 0, "creation_date": 1568116046, "post_id": 56902146, "comment_id": 102165105, "body": "it doesn&#39;t work in the case of a 2x2 matrix, look at this <a href=\"http://ideone.com/VMTSRX\" rel=\"nofollow noreferrer\">ideone.com/VMTSRX</a> only 2 out of 4 coefficients are displayed correctly"}, {"owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "reply_to_user": {"reputation": 141, "user_id": 11527052, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lS_-2UaV8G0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcje4dKnsWqzoTS4MSOeukJWFHTwA/mo/photo.jpg?sz=128", "display_name": "Michaelangelo Meucci", "link": "https://stackoverflow.com/users/11527052/michaelangelo-meucci"}, "edited": false, "score": 0, "creation_date": 1568185017, "post_id": 56902146, "comment_id": 102189861, "body": "@Michaelangelo Meucci - <i>it doesn&#39;t work</i> in your case because you didn&#39;t correct the wrong <i>formatting function <code>f()</code></i>."}], "tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1562326114, "last_edit_date": 1562326114, "creation_date": 1562325792, "answer_id": 56902146, "question_id": 56866727, "link": "https://stackoverflow.com/questions/56866727/problem-calculating-the-inverse-of-a-matrix/56902146#56902146", "title": "problem calculating the inverse of a matrix", "body": "<p>Your calculation of the inverse doesn't quite correspond to the algorithm described e. g. for <a href=\"https://www.mathsisfun.com/algebra/matrix-inverse-minors-cofactors-adjugate.html\" rel=\"nofollow noreferrer\">Inverse of a Matrix\nusing Minors, Cofactors and Adjugate</a>, even taken into account that you for now omitted the adjugate and division step. Compare your outermost <code>for</code> loop in <code>inverse()</code> to this working implementation:</p>\n\n<pre><code>double Rdata[(n-1)*(n-1)];              // remaining data values\nstruct m R = { n-1, n-1, Rdata };       // matrix structure for them\nfor (count = 0; count &lt; n*n; count++)   // Create n*n Matrix of Minors\n{\n    int row = count/n, col = count%n;\n    for (i_count = i = 0; i &lt; n; i++)\n        if (i != row)                   // don't copy the current row\n        {\n            for (j_count = j = 0; j &lt; n; j++)\n                if (j != col)           // don't copy the current column\n                    Rdata[i_count*R.col+j_count++] = A-&gt;data[i*A-&gt;col+j];\n            i_count++;\n        }\n    // transpose by swapping row and column\n    C.data[col*C.col+row] = pow(-1, row&amp;1 ^ col&amp;1) * determinant(n-1, &amp;R) / det;\n}\n</code></pre>\n\n<p>It yields for the given input data the correct inverse matrix</p>\n\n<pre><code>1  2 -4.5\n0 -1  1.5\n0  0  0.5\n</code></pre>\n\n<p>(already transposed and divided by the determinant of the original matrix).</p>\n\n<p>Minor notes:</p>\n\n<ul>\n<li>The <code>*A = C;</code> at the end of <code>inverse()</code> loses the original data pointer of <code>*A</code>.</li>\n<li>The formatting function <code>f()</code> is wrong for negative values, since the <em>fraction</em> is also negative in this case. You could write <code>if (fabs(f)&lt;.00001)</code>.</li>\n</ul>\n"}], "owner": {"reputation": 141, "user_id": 11527052, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lS_-2UaV8G0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcje4dKnsWqzoTS4MSOeukJWFHTwA/mo/photo.jpg?sz=128", "display_name": "Michaelangelo Meucci", "link": "https://stackoverflow.com/users/11527052/michaelangelo-meucci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1562326114, "creation_date": 1562145241, "last_edit_date": 1562325456, "question_id": 56866727, "link": "https://stackoverflow.com/questions/56866727/problem-calculating-the-inverse-of-a-matrix", "title": "problem calculating the inverse of a matrix", "body": "<p>I'm trying to calculate the inverse of a square matrix of any rank N x N. I'm using a struct to store the values of the matrix which I can to effectively and I am already able to calculate the determinant. But there must be some issue with the inverse function. This is the code</p>\n\n<pre><code>    struct m{\n        size_t row;\n        size_t col;\n        double *data;\n    };\n\n    void inverse(size_t n, struct m *A) /*Calculate the inverse of A */\n{\n    size_t i,j,i_count,j_count, count=0;\n    double det = determinant(n, A);\n    size_t id = 0;    \n    double *d;\n\n    struct m C; /*The Adjoint matrix */\n    C.data = malloc(sizeof(double) * n * n);\n\n    C.row = n;\n    C.col = n;    \n\n    struct m *minor; /*matrices obtained by removing the i row and j column*/\n\n    if (!(minor = malloc(n*n*(n+1)*sizeof *minor))) {\n        perror (\"malloc-minor\");\n        exit(-1);\n    }    \n\n    if (det == 0){\n        printf(\"The matrix is singular\\n\");\n        exit(1);\n    }    \n\n    for(id=0; id &lt; n*n; id++){\n        d = minor[id].data = malloc(sizeof(double) * (n-1) * (n-1));\n        for(count=0; count &lt; n; count++)\n        {\n            //Creating array of Minors\n            i_count = 0;\n            for(i = 0; i &lt; n; i++)\n            {\n                j_count=0;\n                for(j = 0; j &lt; n; j++)\n                {\n                    if(j == count)\n                        continue; // don't copy the minor column element\n                    *d = A-&gt;data[i * A-&gt;col + j];\n                    d++;\n                    j_count++;\n                }\n                i_count++;\n            }\n        }\n    }\n\n    for(id=0; id &lt; n*n; id++){\n        for(i=0; i &lt; n; i++){\n           for(j=0; j &lt; n; j++) \n            C.data[i * C.col + j] = determinant(n-1,&amp;minor[id]);//Recursive call\n        }\n    }\n\n    transpose(&amp;C);\n    scalar_product(1/det, &amp;C); \n    *A = C;    \n}\n</code></pre>\n\n<p>The determinant is calculated recursively with this algorithm:</p>\n\n<pre><code>double determinant(size_t n, struct m *A)\n    {                                    \n        size_t i,j,i_count,j_count, count=0;\n\n        double det = 0;\n\n        if(n &lt; 1)\n        {\n            printf(\"Error\\n\");\n            exit(1);\n        }\n\n        if(n==1) return A-&gt;data[0];\n\n        else if(n==2) return (A-&gt;data[0]* A-&gt;data[1 * A-&gt;col + 1] - A-&gt;data[0 + 1] * A-&gt;data[1*A-&gt;col + 0]);    \n\n        else{\n            struct m C;\n\n            C.row = A-&gt;row-1;\n            C.col = A-&gt;col-1;\n\n            C.data = malloc(sizeof(double) * (A-&gt;row-1) * (A-&gt;col-1));\n\n            for(count=0; count &lt; n; count++)\n            {\n                //Creating array of Minors\n                i_count = 0;\n                for(i = 1; i &lt; n; i++)\n                {\n                    j_count=0;\n                    for(j = 0; j &lt; n; j++)\n                    {\n                        if(j == count)\n                            continue; // don't copy the minor column element\n                        C.data[i_count * C.col + j_count] = A-&gt;data[i * A-&gt;col + j];\n                        j_count++;\n                    }\n                    i_count++;\n                }\n                det += pow(-1, count) * A-&gt;data[count] * determinant(n-1,&amp;C);//Recursive call\n            }\n            free(C.data);\n            return det;\n        }\n    }\n</code></pre>\n\n<p>You can find the complete code here: <a href=\"https://ideone.com/gQRwVu\" rel=\"nofollow noreferrer\">https://ideone.com/gQRwVu</a>. </p>\n"}, {"tags": ["c++", "c", "pointers", "struct", "jnienv"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1562144431, "post_id": 56866451, "comment_id": 100281826, "body": "C and C++ are two very different languages. They may have a common ancestor and sometimes similar syntax, but most of the time the semantics are very different. For example, C++ have much stricter type-checking than C. What is valid in C might not be valid in C++, or the other way around."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1562145425, "post_id": 56866451, "comment_id": 100282422, "body": "Does the definition of <code>JNIEnv</code> vary depending on language used?"}], "answers": [{"tags": [], "owner": {"reputation": 1073, "user_id": 921729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b630bd9941c4001f6c8aae48eaac45b8?s=128&d=identicon&r=PG", "display_name": "Khoyo", "link": "https://stackoverflow.com/users/921729/khoyo"}, "is_accepted": true, "score": 7, "last_activity_date": 1562145526, "creation_date": 1562145526, "answer_id": 56866824, "question_id": 56866451, "link": "https://stackoverflow.com/questions/56866451/accessing-struct-via-pointer-in-c-and-c/56866824#56866824", "title": "Accessing struct via pointer in C and C++", "body": "<p>That's because your library code is different.</p>\n\n<p>In C, <code>JNIEnv</code> is a pointer type:</p>\n\n<pre><code>typedef const struct JNINativeInterface *JNIEnv;\n</code></pre>\n\n<p>In C++, <code>JNIEnv</code> is a struct:</p>\n\n<pre><code>struct _JNIEnv;\ntypedef _JNIEnv JNIEnv;\n</code></pre>\n\n<p>So of course it will compile in one case and not in the other.</p>\n\n<p><a href=\"https://github.com/mapbox/jni.hpp/blob/8f55acd9017452f45a88ab3fb3aef89de995b723/test/android/jni.h#L139-L145\" rel=\"noreferrer\">Source</a></p>\n"}], "owner": {"reputation": 75, "user_id": 11264642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4113b472043c22ac7042512645ad1dab?s=128&d=identicon&r=PG&f=1", "display_name": "Paxi1337", "link": "https://stackoverflow.com/users/11264642/paxi1337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 56866824, "answer_count": 1, "score": 2, "last_activity_date": 1562146238, "creation_date": 1562144327, "question_id": 56866451, "link": "https://stackoverflow.com/questions/56866451/accessing-struct-via-pointer-in-c-and-c", "title": "Accessing struct via pointer in C and C++", "body": "<p>\"Simple\" question put short:</p>\n\n<p>Why exactly does</p>\n\n<pre><code>JNIEnv *g_env = NULL;\n(*g_env)-&gt;ExceptionDescribe(g_env);\n</code></pre>\n\n<p>compile in gcc (C)</p>\n\n<p>but not \nin g++ (C++)</p>\n\n<pre><code>error: base operand of \u2018-&gt;\u2019 has non-pointer type \u2018JNIEnv\u2019 {aka \u2018JNIEnv_\u2019}\n</code></pre>\n\n<p>As I am working mainly with C++ I don't see why it should compile. As stated by the error, dereferencing the pointer will yield a \"variable\" and not a pointer anymore. I.e.: in C++ it would be either</p>\n\n<pre><code>g_env-&gt;ExceptionDescribe\n</code></pre>\n\n<p>or</p>\n\n<pre><code>(*g_env).ExceptionDescribe\n</code></pre>\n\n<p>as its not <code>JNIEnv **</code></p>\n"}, {"tags": ["c", "xml", "type-conversion", "int", "libxml2"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1562143578, "post_id": 56866191, "comment_id": 100281354, "body": "What is the format of e.g. <code>&quot;20190219085500&quot;</code>? You can&#39;t solve your problem without being able to answer that."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1562143581, "post_id": 56866191, "comment_id": 100281355, "body": "And I doubt you store the whole string in a <i>single</i> <code>xmlChar</code> variable, but rather using arrays or pointers."}, {"owner": {"reputation": 53, "user_id": 11095648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f53238cd173b2ee315ab9e78fdd1ceb9?s=128&d=identicon&r=PG&f=1", "display_name": "Jam12345", "link": "https://stackoverflow.com/users/11095648/jam12345"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1562143723, "post_id": 56866191, "comment_id": 100281431, "body": "@Someprogrammerdude Yeah pointers mate, and 20190219085500 is in a date/time format -&gt; yyyy/mm/dd/hh/mm/ss"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 11095648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f53238cd173b2ee315ab9e78fdd1ceb9?s=128&d=identicon&r=PG&f=1", "display_name": "Jam12345", "link": "https://stackoverflow.com/users/11095648/jam12345"}, "edited": false, "score": 0, "creation_date": 1562149207, "post_id": 56866368, "comment_id": 100284563, "body": "Thanks this is making a bit more sense now, any chance of a code example?"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1562144044, "creation_date": 1562144044, "answer_id": 56866368, "question_id": 56866191, "link": "https://stackoverflow.com/questions/56866191/change-convert-type-of-xmlchar-in-c/56866368#56866368", "title": "Change/Convert type of xmlChar in C", "body": "<p>While there are no standard C functions to convert strings to a time-stamp directly, many implementations have a function called <code>strptime</code> that parses strings into a <a href=\"https://en.cppreference.com/w/c/chrono/tm\" rel=\"nofollow noreferrer\"><code>tm</code> structure</a> from which you can <a href=\"https://en.cppreference.com/w/c/chrono/mktime\" rel=\"nofollow noreferrer\">get a timestamp</a> which usually is in seconds since an epoch.</p>\n\n<p>Then <a href=\"https://en.cppreference.com/w/c/string/byte/strtol\" rel=\"nofollow noreferrer\">converting the \"duration\" to an integer</a> is easy, and adding it to the timestamp is even easier.</p>\n\n<p>Lastly you can use <a href=\"https://en.cppreference.com/w/c/chrono/localtime\" rel=\"nofollow noreferrer\"><code>localtime</code></a> to convert the new timestamp back into a <code>tm</code> structure, which you can pass to <a href=\"https://en.cppreference.com/w/c/chrono/strftime\" rel=\"nofollow noreferrer\"><code>strftime</code></a> to get a string-representation of the timestamp.</p>\n"}], "owner": {"reputation": 53, "user_id": 11095648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f53238cd173b2ee315ab9e78fdd1ceb9?s=128&d=identicon&r=PG&f=1", "display_name": "Jam12345", "link": "https://stackoverflow.com/users/11095648/jam12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562144044, "creation_date": 1562143412, "question_id": 56866191, "link": "https://stackoverflow.com/questions/56866191/change-convert-type-of-xmlchar-in-c", "title": "Change/Convert type of xmlChar in C", "body": "<p>I am currently reading in a 'starttime' atrribute from an xml file e.g \"20190219085500\" which I am storing in an xmlChar variable.</p>\n\n<p>I am also reading in a 'duration' attribute also as an xmlChar which is the amount of seconds the program is on for e.g. \"1500\" (25 mins)</p>\n\n<p>What I am trying to do is create another attribute 'finishtime' for when the program will finish which is essentially, 'starttime' + 'duration'</p>\n\n<p>I'm just unsure on how to go about this problem, weather it is converting the xmlChar's to int or if there another way.</p>\n\n<p>I am writting in C btw :) Thanks.  </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1562155875, "post_id": 56865630, "comment_id": 100288264, "body": "attacker nine, What should happen if a line of input is only <code>&quot;aman\\n&quot;</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1562155729, "post_id": 56865812, "comment_id": 100288161, "body": "No need for a space before 2nd &quot;%10s&quot; either."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1562156623, "post_id": 56865812, "comment_id": 100288732, "body": "@chux, right, but IMO this makes more clear that you are scanning two strings"}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 3, "last_activity_date": 1562143571, "last_edit_date": 1562143571, "creation_date": 1562142020, "answer_id": 56865812, "question_id": 56865630, "link": "https://stackoverflow.com/questions/56865630/how-to-limit-scanf-while-reading-input-from-file/56865812#56865812", "title": "How to limit scanf while reading input from file", "body": "<p>Even if you specify that you want only 2 strings in the <code>scanf</code> call, the other string remains in the buffer when you pass 3 strings, you need to flush/consume it:</p>\n\n<pre><code>while (scanf(\"%9s %9s\", r, y) == 2) { // No need to use a space before first %10s\n    int c;                            // and you need space for the NUL terminator\n    while ((c = fgetc(stdin)) != '\\n' &amp;&amp; c != EOF);\n    printf(\"%s and %s\\n\", r, y);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 5, "last_activity_date": 1562142091, "creation_date": 1562142091, "answer_id": 56865827, "question_id": 56865630, "link": "https://stackoverflow.com/questions/56865630/how-to-limit-scanf-while-reading-input-from-file/56865827#56865827", "title": "How to limit scanf while reading input from file", "body": "<p>You can read each line with <code>fgets</code>, and then apply <code>sscanf</code> to the string read, like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n\n    char r[10];\n    char y[10];\n    char input[100];\n    while(fgets(input, sizeof input, stdin) != NULL) {\n        if(sscanf(input, \"%9s%9s\", r, y) == 2) {\n            printf(\"%s %s\\n\", r, y);\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Program output:\n<PRE>\naman dhaker\nrudra pratap\nnitesh dhakar\n</PRE></p>\n\n<p>Note that I restricted the string length to <code>9</code> to allow for the <code>NUL</code> terminator.</p>\n\n<p>Using <code>fgets</code> then <code>sscanf</code> is often better than using <code>scanf</code>. It makes the flow control much easier, and avoids having to clean out the input buffer - if there was a bad input you can just forget the string and input another.</p>\n"}], "owner": {"reputation": 33, "user_id": 10637757, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "attacker nine", "link": "https://stackoverflow.com/users/10637757/attacker-nine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1562143571, "creation_date": 1562141294, "question_id": 56865630, "link": "https://stackoverflow.com/questions/56865630/how-to-limit-scanf-while-reading-input-from-file", "title": "How to limit scanf while reading input from file", "body": "<p>I'm a beginner with C and I have coded a program like :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main() {\n\n    char r[10];\n    char y[10];\n    puts(\"Printing Data \\n\");\n    while (scanf(\" %10s %s\",r,y) == 2) {\n        printf(\"%s and %s\\n\",r,y);\n}\n    return 0;\n}\n\n</code></pre>\n\n<p>CMD ./prog.c &lt; file.txt</p>\n\n<p>file.txt </p>\n\n<pre><code>aman dhaker\nrudra pratap hensome\nnitesh dhakar\n</code></pre>\n\n<p>While I wanted scanf to read just 2 strings but having 3 strings on line 2 of file.txt I wanted to skip the 3rd arg which was hensome as I only wish to print 2 strings but somehow I'm unable to skip particular string.</p>\n\n<p>My current output :</p>\n\n<pre><code>aman dhaker\nrudra pratap hensome\nnitesh dhakar\n</code></pre>\n\n<p>My desired output:</p>\n\n<pre><code>aman dhaker\nrudra pratap\nnitesh dhakar\n</code></pre>\n\n<p>Please help me out.</p>\n\n<p>I've tried including regex like [^ ] to exclude result including a whitespace but didn't work out.</p>\n"}, {"tags": ["c", "filenames", "kernel-module", "printk"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1562141723, "post_id": 56865569, "comment_id": 100280388, "body": "I guess you need to fetch the filename in the same manner as the <a href=\"https://github.com/torvalds/linux/blob/master/fs/namei.c#L4106\" rel=\"nofollow noreferrer\">original unlink system call</a>"}], "answers": [{"tags": [], "owner": {"reputation": 563, "user_id": 3618320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2005e31bff3e25f39dab185abffab571?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3618320/aleksey"}, "is_accepted": false, "score": 1, "last_activity_date": 1567680058, "creation_date": 1567680058, "answer_id": 57803658, "question_id": 56865569, "link": "https://stackoverflow.com/questions/56865569/how-to-get-the-real-file-name-in-kernel-module/57803658#57803658", "title": "How to get the real file name in kernel module", "body": "<p>The core reason of getting rubbish printed instead of a nice real file name is that first you need to copy the string from user space into kernel space. Usually <code>copy_from_user()</code> function is used for that. In this case you have a NULL-terminated string, and there's a variation of that function called <code>strncpy_from_user()</code> which can be used instead.</p>\n\n<p>To make things easier, it's best to follow what the original function does. It calls <code>getname()</code> function which eventually calls <code>strncpy_from_user</code> among lots of other things it does to get the name reliably. Call this function, and it will get you the file name that is passed in the system call.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1588068510, "post_id": 61477598, "comment_id": 108751176, "body": "&quot;This isn&#39;t even wrong&quot;, c.f. with Aleksey&#39;s answer."}], "tags": [], "owner": {"reputation": 29, "user_id": 11864194, "user_type": "registered", "profile_image": "https://graph.facebook.com/2281678808547690/picture?type=large", "display_name": "\u0418\u0433\u043e\u0440\u044c \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/11864194/%d0%98%d0%b3%d0%be%d1%80%d1%8c-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "is_accepted": false, "score": -1, "last_activity_date": 1588068319, "creation_date": 1588068319, "answer_id": 61477598, "question_id": 56865569, "link": "https://stackoverflow.com/questions/56865569/how-to-get-the-real-file-name-in-kernel-module/61477598#61477598", "title": "How to get the real file name in kernel module", "body": "<p>Your pointer here:</p>\n\n<pre><code>current_pt_regs()-&gt;di;\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>printk(\"%s\\n\", (char *)current_pt_regs()-&gt;di);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10952794, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ugJ2fBG7u2k/AAAAAAAAAAI/AAAAAAAAABE/HDkm3Jy4lSw/photo.jpg?sz=128", "display_name": "Alan Guzman", "link": "https://stackoverflow.com/users/10952794/alan-guzman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1619211364, "creation_date": 1562141050, "last_edit_date": 1619211364, "question_id": 56865569, "link": "https://stackoverflow.com/questions/56865569/how-to-get-the-real-file-name-in-kernel-module", "title": "How to get the real file name in kernel module", "body": "<p>I'm creating a kernel module that intercept the unlink command and make a copy of the file that want to be unlinked. For now, I intercept the unlink command and im trying to print the path of the file but it doesn't work right.</p>\n<p>I have a method that receive a <code>char *path</code> parameter and I use printk to show the path, but this print some rare strings like &quot;\\xe07l\\xd3\\xf&quot;</p>\n<pre><code>asmlinkage int hacked_sys_unlink(const char *pathname)\n{\n    printk(&quot;RM_CATCHED: unlink( \\&quot;%s\\&quot; )\\n&quot;, pathname);\n    return original_sys_unlink(pathname);\n}\n</code></pre>\n<p>When I unlink some file and use dmesg command i get this:</p>\n<pre><code>[ 1531.847856] RM_CATCHED: unlink( &quot;`g\\xcfYMV&quot; )\n[ 1531.848071] RM_CATCHED: unlink( &quot;\\xe07l\\xd3\\xf&quot; )\n[ 1534.851623] RM_CATCHED: unlink( &quot;\\xe07l\\xd3\\xf&quot; )\n[ 1534.852091] RM_CATCHED: unlink( &quot;&quot; )\n[ 1541.861962] RM_CATCHED: unlink( &quot;&quot; )\n</code></pre>\n<p>How can I get the real path of the file like <code>/path/to/file.txt</code>?</p>\n"}, {"tags": ["c#", "c++", "c"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 2, "creation_date": 1562140943, "post_id": 56865381, "comment_id": 100279965, "body": "I&#39;d concentrate on the part that says <i>Check that the calling convention</i> matches. You don&#39;t indicate what calling convention you are using in your posted code."}, {"owner": {"reputation": 8802, "user_id": 564226, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e8a2ee2c54e9853a2a4a391b77794d6?s=128&d=identicon&r=PG", "display_name": "JeffRSon", "link": "https://stackoverflow.com/users/564226/jeffrson"}, "edited": false, "score": 0, "creation_date": 1562141278, "post_id": 56865381, "comment_id": 100280155, "body": "where does parserObj come from?"}, {"owner": {"reputation": 305, "user_id": 1491485, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/284c10871052a77e8e2bb067da036607?s=128&d=identicon&r=PG", "display_name": "Timur Kukharskiy", "link": "https://stackoverflow.com/users/1491485/timur-kukharskiy"}, "edited": false, "score": 0, "creation_date": 1562141349, "post_id": 56865381, "comment_id": 100280195, "body": "Read the <a href=\"https://stackoverflow.com/questions/3506796/pinvokestackimbalance-how-can-i-fix-this-or-turn-it-off\" title=\"pinvokestackimbalance how can i fix this or turn it off\">stackoverflow.com/questions/3506796/&hellip;</a>"}, {"owner": {"reputation": 29, "user_id": 11732987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a956e3b530d3426d2e4fb3077eef5a2e?s=128&d=identicon&r=PG&f=1", "display_name": "maazasif1995", "link": "https://stackoverflow.com/users/11732987/maazasif1995"}, "reply_to_user": {"reputation": 8802, "user_id": 564226, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e8a2ee2c54e9853a2a4a391b77794d6?s=128&d=identicon&r=PG", "display_name": "JeffRSon", "link": "https://stackoverflow.com/users/564226/jeffrson"}, "edited": false, "score": 0, "creation_date": 1562142334, "post_id": 56865381, "comment_id": 100280706, "body": "i get the parserObj  from another function in the DLL. I am using IntPtr to store that object @JeffRSon"}, {"owner": {"reputation": 29, "user_id": 11732987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a956e3b530d3426d2e4fb3077eef5a2e?s=128&d=identicon&r=PG&f=1", "display_name": "maazasif1995", "link": "https://stackoverflow.com/users/11732987/maazasif1995"}, "reply_to_user": {"reputation": 305, "user_id": 1491485, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/284c10871052a77e8e2bb067da036607?s=128&d=identicon&r=PG", "display_name": "Timur Kukharskiy", "link": "https://stackoverflow.com/users/1491485/timur-kukharskiy"}, "edited": false, "score": 0, "creation_date": 1562142842, "post_id": 56865381, "comment_id": 100280955, "body": "I don&#39;t get why that worked but it did. @TimurKukharskiy"}], "answers": [{"tags": [], "owner": {"reputation": 370, "user_id": 2477299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39ee3d2b56132ffd4da113b4626a503c?s=128&d=identicon&r=PG", "display_name": "P. PICARD", "link": "https://stackoverflow.com/users/2477299/p-picard"}, "is_accepted": false, "score": 1, "last_activity_date": 1562144294, "last_edit_date": 1562144294, "creation_date": 1562143258, "answer_id": 56866144, "question_id": 56865381, "link": "https://stackoverflow.com/questions/56865381/passing-values-and-pointers-between-a-c-and-a-c-function/56866144#56866144", "title": "Passing values and pointers between a c# and a c function", "body": "<p>That's at least because of the type of your parameter <code>parser</code>, it should be declared as a <code>System.IntPtr</code> instead of <code>void*</code>.</p>\n\n<p>For more information about type mapping between C# and C++ have a look to: <a href=\"https://docs.microsoft.com/en-us/dotnet/framework/interop/marshaling-data-with-platform-invoke\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/dotnet/framework/interop/marshaling-data-with-platform-invoke</a></p>\n"}], "owner": {"reputation": 29, "user_id": 11732987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a956e3b530d3426d2e4fb3077eef5a2e?s=128&d=identicon&r=PG&f=1", "display_name": "maazasif1995", "link": "https://stackoverflow.com/users/11732987/maazasif1995"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1562144294, "creation_date": 1562140258, "last_edit_date": 1562142624, "question_id": 56865381, "link": "https://stackoverflow.com/questions/56865381/passing-values-and-pointers-between-a-c-and-a-c-function", "title": "Passing values and pointers between a c# and a c function", "body": "<p>I am trying to use an open-source DLL to convert SQL queries between different dialects in a C# university project. I have a function in the dll which requires a void type pointer to an object. I cannot find a suitable type in c#  to use for calling this function. </p>\n\n<p>I've tried using a IntPtr for the required pointer to the object but i am getting the following error </p>\n\n<blockquote>\n  <p>A call to PInvoke function 'WindowsFormsApp1!WindowsFormsApp1.Form1::SetParserTypes' has unbalanced the stack. This is likely because the managed PInvoke signature does not match the unmanaged target signature. Check that the calling convention and parameters of the PInvoke signature match the target unmanaged signature.</p>\n</blockquote>\n\n<p>the function in c/c++ :</p>\n\n<pre><code>void SetParserTypes(void *parser, short source, short target)\n{\n    if(parser == NULL)\n        return;\n\n    SqlParser *sql_parser = (SqlParser*)parser;\n\n    // Run conversion\n    sql_parser-&gt;SetTypes(source, target);\n}\n</code></pre>\n\n<p>the function im trying to use in c# :</p>\n\n<pre><code>[DllImport(dllName: \"DLL_LOCATION\", EntryPoint = \"SetParserTypes\")]\npublic unsafe static extern void SetParserTypes(void *parser , short source, short target);\n</code></pre>\n\n<p>i am calling this function like this :</p>\n\n<pre><code>SetParserTypes(&amp;parserObj, 1,2);\n</code></pre>\n\n<p>I am getting the following exception when calling the function in c#</p>\n\n<blockquote>\n  <p>Managed Debugging Assistant 'PInvokeStackImbalance' : 'A call to PInvoke function 'WindowsFormsApp1!WindowsFormsApp1.Form1::SetParserTypes' has unbalanced the stack. This is likely because the managed PInvoke signature does not match the unmanaged target signature. Check that the calling convention and parameters of the PInvoke signature match the target unmanaged signature.'</p>\n</blockquote>\n"}, {"tags": ["c", "openssl", "ecdsa"], "answers": [{"tags": [], "owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "is_accepted": false, "score": 1, "last_activity_date": 1562143817, "creation_date": 1562143817, "answer_id": 56866315, "question_id": 56865047, "link": "https://stackoverflow.com/questions/56865047/how-to-use-my-pkcs8-file-to-get-ecdsa-string/56866315#56866315", "title": "How to use my pkcs#8 file to get ecdsa string", "body": "<p>Read the key data from your PKCS#8 file using <code>PEM_read_PrivateKey()</code> (or <code>PEM_read_bio_PrivateKey()</code>. This will give you the key as an <code>EVP_PKEY</code> object. Documentation for those functions is here:</p>\n\n<p><a href=\"https://www.openssl.org/docs/man1.1.1/man3/PEM_read_PrivateKey.html\" rel=\"nofollow noreferrer\">https://www.openssl.org/docs/man1.1.1/man3/PEM_read_PrivateKey.html</a></p>\n\n<p>Typically when signing you normally want to digest the data to be signed first using some digest function (e.g. SHA256) followed by the signature operation (ECDSA in this case). Assuming that's what you want to do you should use the <code>EVP_DigestSign*</code> family of functions. Documentation for those functions is here:</p>\n\n<p><a href=\"https://www.openssl.org/docs/man1.1.1/man3/EVP_DigestSign.html\" rel=\"nofollow noreferrer\">https://www.openssl.org/docs/man1.1.1/man3/EVP_DigestSign.html</a></p>\n\n<p>The code might look something like this (untested):</p>\n\n<pre><code>EVP_PKEY *pkey = PEM_read_PrivateKey(myfile, NULL, NULL, NULL);\nEVP_MD_CTX *mdctx = EVP_MD_CTX_new();\nsize_t siglen = 0;\nunsigned char *sig;\n\nif (mdctx == NULL || pkey == NULL)\n    goto err;\n\nif (!EVP_DigestSignInit(mdctx, NULL, EVP_sha256(), NULL, pkey))\n    goto err;\n\n if(!EVP_DigestSignUpdate(mdctx, tobesigned, tobesignedlen))\n    goto err;\n\n /* Find out the signature length */\n if(!EVP_DigestSignFinal(mdctx, NULL, &amp;siglen))\n    goto err;\n\n /* Allocate memory for the signature length */\n sig = OPENSSL_malloc(siglen);\n if (sig == NULL)\n     goto err;\n\n /* Now get the signature */\n if(!EVP_DigestSignFinal(mdctx, sig, &amp;siglen))\n     goto err;\n\n EVP_MD_CTX_free(mdctx);\n EVP_PKEY_free(pkey);\n/* Free \"sig\" when you've finished with it */\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5159091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd101627d63a198769b666ed4a1b9130?s=128&d=identicon&r=PG&f=1", "display_name": "Jafar Mohammed", "link": "https://stackoverflow.com/users/5159091/jafar-mohammed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562143817, "creation_date": 1562138898, "question_id": 56865047, "link": "https://stackoverflow.com/questions/56865047/how-to-use-my-pkcs8-file-to-get-ecdsa-string", "title": "How to use my pkcs#8 file to get ecdsa string", "body": "<p>I am trying to get a signature string locally from the file PKCS#8 file which is in .p8 format. When I open it I can see a string between the statement</p>\n\n<pre><code> -----BEGIN PRIVATE KEY-----\n// strings line 64 characters\n// strings line 64 characters\n// strings line 64 characters\n// strings line 8 characters\n-----END PRIVATE KEY-----\n</code></pre>\n\n<p>I want to convert this file and sign in ecdsa to get the signature.</p>\n\n<p>How can I achieve this in c language using openssl</p>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1562133661, "post_id": 56863698, "comment_id": 100276541, "body": "Put <code>[]</code> immediately after the variable name to make an array of the same thing as the variable was... <code>char (*pt[])[7] = { names, othernames, morenames };</code>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1562134241, "post_id": 56863698, "comment_id": 100276753, "body": "Related if not a duplicate to: <a href=\"https://stackoverflow.com/q/56853409/694576\">stackoverflow.com/q/56853409/694576</a>"}, {"owner": {"reputation": 438, "user_id": 6024572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa06a94c677c04a72eceba9db3c10d0?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Singh", "link": "https://stackoverflow.com/users/6024572/gaurav-singh"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1562134608, "post_id": 56863698, "comment_id": 100276894, "body": "@alk It is also by the same person"}, {"owner": {"reputation": 1592, "user_id": 11016183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/usqVz.jpg?s=128&g=1", "display_name": "Seba Cherian", "link": "https://stackoverflow.com/users/11016183/seba-cherian"}, "edited": false, "score": 0, "creation_date": 1562135040, "post_id": 56863698, "comment_id": 100277063, "body": "refer <a href=\"https://overiq.com/c-programming-101/array-of-pointers-to-strings-in-c/\" rel=\"nofollow noreferrer\">overiq.com/c-programming-101/array-of-pointers-to-strings-in&zwnj;&#8203;-c</a>"}, {"owner": {"reputation": 11, "user_id": 11598742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c8264de0e833716fb80ae774ae35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/11598742/learner"}, "edited": false, "score": 0, "creation_date": 1562135492, "post_id": 56863698, "comment_id": 100277258, "body": "Yeah..got it ! Thanks"}], "owner": {"reputation": 11, "user_id": 11598742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c8264de0e833716fb80ae774ae35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/11598742/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562135170, "creation_date": 1562133212, "last_edit_date": 1562135170, "question_id": 56863698, "link": "https://stackoverflow.com/questions/56863698/array-of-pointers-pointing-to-strings", "title": "Array of pointers pointing to strings", "body": "<p>Can we make an array of pointers in which each pointer is pointing to the whole string? For ex.\n           `</p>\n\n<pre><code>char names[][7]={\"pankaj\",\"sourav\",\"rajesh\",\"sahil\"};\nchar (*pt)[7];\npt=names;`\n</code></pre>\n\n<p>How to make an array of such type of pointers? As I have many 2-d arrays and I want to make an array of pointers (with each pointer of the above type) and each pointer pointing to one 2-d array. </p>\n"}, {"tags": ["c", "runtime", "crt"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1562134099, "post_id": 56863640, "comment_id": 100276703, "body": "Some of the functionality of the &quot;standard library&quot; is usually split between the library itself and the compiler and its support object and library files. The <code>exit</code> and <code>atexit</code> functions is usually a thing that is handled by the compiler and its support files rather than the standard library."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1562134641, "post_id": 56863640, "comment_id": 100276910, "body": "This is simply because the run time is already linked against the original <code>exit</code> implementation. Most probably it is inlined into the <code>_start</code> function."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562135288, "post_id": 56863640, "comment_id": 100277168, "body": "How can you write your own version of <code>exit</code> and include stdlib.h at the same time? Is this your own version of it, that is stdlib.c or equivalent?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562135447, "post_id": 56863640, "comment_id": 100277241, "body": "@Lundin: Note the context given at the end. <a href=\"https://rootdirectory.ddns.net/websvn/filedetails.php?repname=PDCLib&amp;path=%2Ftrunk%2Ffunctions%2Fstdlib%2Fexit.c\" rel=\"nofollow noreferrer\">The real code</a> is my own <code>exit</code>, <i>and</i> my own <code>&lt;stdlib.h&gt;</code>. The code in the question was merely for demonstration purposes."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1562135540, "post_id": 56863640, "comment_id": 100277283, "body": "Yeah I read that but it isn&#39;t obvious if this .c file is your library implementation or some random test file. I wouldn&#39;t expect your std lib to contain main(), for example."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562135864, "post_id": 56863640, "comment_id": 100277415, "body": "@Lundin: My lib doesn&#39;t contain a <code>main</code>, but my test drivers (linking my lib) do, and that is when I realized my <code>exit</code> (where I do the calling of <code>atexit</code>-registered functions, which includes one for flushing / closing open streams) doesn&#39;t get called."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562135446, "post_id": 56864131, "comment_id": 100277240, "body": "Yep this must be it. OP probably has to start with writing their own crt before anything else. Looking at one random crt for ARM that I work with now, they actually wrote the exit function in inline asm as part of the crt."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562135765, "post_id": 56864131, "comment_id": 100277374, "body": "@Lundin: That is what I was hoping to avoid -- since the crt isn&#39;t part of what ISO C specifies, I was hoping I could &quot;plug in&quot; to the existing framework at the calling of <code>main</code>, without &quot;encroaching&quot; on the platform-specifics of crt0.c..."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1562135867, "post_id": 56864131, "comment_id": 100277418, "body": "@DevSolar you cannot just plug it in because it is statically linked with the rest of the ISO C part of the C runtime. After all that code expects to always run with the ISO C functions that came with it."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1562135975, "post_id": 56864131, "comment_id": 100277463, "body": "@DevSolar I think it is only the <code>exit</code> function that&#39;s a special snowflake, every other function including <code>atexit</code> should be separate from the crt. Though it is worth checking how <code>memcpy</code> and <code>memset</code> are implemented too - these will be needed by the crt for initialization of <code>.data</code> and <code>.bss</code>, so they are likely special cases as well."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562136343, "post_id": 56864131, "comment_id": 100277637, "body": "@Lundin: Well, to put it differently -- if my own <code>exit</code> doesn&#39;t get called, how to I plug in the unwinding of my <code>atexit</code> function stack into existing CRT&#39;s, without having to implement CRT&#39;s for every platform I&#39;d like to support? ;-) Apparently the issue is that crt0.c is <i>statically</i> linked with the libc (on the Linuxes I am testing on at least), so there&#39;s no &quot;complete&quot; replacing the system libc at that point and I have to rely on the people behind the respective CRTs to actually link to my library to get &quot;full support&quot; from the CRT. Bugger."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1562136473, "post_id": 56864131, "comment_id": 100277697, "body": "It <i>is</i> part of what ISO C specifies, not just the functions. BTW @DevSolar I suggest that you check the osdev.org articles on making a proper cross-compiler, you&#39;d really want to configure your own crt0 into it."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1562136854, "post_id": 56864131, "comment_id": 100277882, "body": "@AnttiHaapala: ISO C says nothing about <code>_start</code>. I have fully functional implementations of most of libc. I was looking for a way to plug in my post-<code>main</code> cleanup to the <i>existing</i> CRT, <i>without</i> reimplementing it. The valuable part of your answer, to that end, is the observation that <code>exit</code> is (probably) <i>statically</i> linked to crt0.o, so the answer is effectively &quot;cannot be done from userspace&quot;. Or perhaps I need to register <i>my</i> <code>exit</code> with the <i>system&#39;s</i> <code>atexit</code>, so that the <i>system</i> <code>exit</code> linked to crt0.o calls the <i>system</i> <code>atexit</code> processing calling <i>my</i> <code>exit</code>... messy."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1562136925, "post_id": 56864131, "comment_id": 100277918, "body": "@AnttiHaapala: The reference to OSDev&#39;s Cross Compiler article is funny, because I have <i>written</i> that article back in the day. :-D"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1562137450, "post_id": 56864131, "comment_id": 100278213, "body": "@DevSolar IIRC back in days I couldn&#39;t get my cross-compiler quite linking executables properly against my newlib port using that, so it might be that you too have missed something ;)"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1562137731, "post_id": 56864131, "comment_id": 100278388, "body": "@DevSolar btw what I mean with ISO C is that ISO C does not specify that there is a C library that exists in <i>isolation</i> from the compiler. They&#39;re all part of the same implementation. If you&#39;re doing a new C library to compile hosted programs then in fact you&#39;re providing a new C implementation that is the compiler with your CRT."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1562141778, "post_id": 56864131, "comment_id": 100280423, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/195910/discussion-between-devsolar-and-antti-haapala\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 5, "last_activity_date": 1562218539, "last_edit_date": 1592644375, "creation_date": 1562135265, "answer_id": 56864131, "question_id": 56863640, "link": "https://stackoverflow.com/questions/56863640/why-does-the-c-runtime-not-call-my-exit/56864131#56864131", "title": "Why does the C runtime not call my exit()?", "body": "<p>If I understand correctly, you are trying to implement the functions in the C standard library while trying to use some parts of the C runtime (namely what calls the main function and exit).</p>\n<p>The part of the code that usually does this is the <code>_start</code> function. This is typically the entry point for ELF binaries with the Linux loader.</p>\n<p>This <code>_start</code> function is defined in the C runtime that your compiler is using and the call to exit is already linked (the address patched into the callsite). It is likely that it is simply inlined into the <code>_start</code> function.</p>\n<p>To get the <code>_start</code> function to call your <code>exit</code>, what you have to do is to redefine the <code>_start</code> itself. Then you have to make sure that the C runtime's <code>_start</code> is not used.</p>\n<p>I would go with something like this -</p>\n<pre><code>// Assuming your have included files that declare the puts and fflush functions and the stdout macro. \nint main(int argc, char* argv[]); // This is here just so that there is a declaration before the call\nvoid _start(void) {\n    char *argv[] = {&quot;executable&quot;}; // There is a way to get the real arguments, but I think you will have to write some assembly for that. \n\n    int return_value = main(1, argv);\n    exit(return_value);\n    // Control should NEVER reach here, because you cannot return from the _start function\n}\n\nvoid exit(int ret) {\n    puts(&quot;ok&quot;); \n    fflush(stdout); // Assuming your runtime defines these functions and stdout somewhere. \n    // To simulate an exit, we will just spin infinitely - \n    while(1);\n}\n\nint main(int argc, char* argv[]) {\n    puts(&quot;hello world\\n&quot;);\n    return 0;\n}\n</code></pre>\n<p>Now you can compile and link the file as -</p>\n<pre><code>gcc test.c -o executable -nostdlib\n</code></pre>\n<p>The <code>-nostdlib</code> tells the linker to not link against the standard runtime which has the implementation of <code>_start</code>.</p>\n<p>Now you can execute your executable and it will call your &quot;exit&quot; as you expected and will then keep on looping forever. You can kill it by pressing ctrl+c or sending SIGKILL some other way.</p>\n<h2>Appendix</h2>\n<p>Just for completeness' sake, I also tried to write down the implementation for the rest of the functions.</p>\n<p>You can firstly add the following declarations and definitions at the top of your code.</p>\n<pre><code>#define stdout (1)\nint puts(char *s);\nlong unsigned int strlen(const char *s) {\n        int len = 0;\n        while (s[len])\n                len++;\n        return len;\n}\nint fflush(int s) {\n}\nvoid exit(int n);\n</code></pre>\n<p><code>strlen</code> is defined as expected and <code>fflush</code> is a no-op because we are not implementing buffering for our stdio functions.</p>\n<p>Now in a separate file puts.s write the following assembly (assuming x64 linux. Change the syscall numbers and arguments if your platform is different).</p>\n<pre><code>        .text\n        .globl puts\nputs:\n        movq    %rdi, %r12\n        callq    strlen\n        movq    $1, %rdi\n        movq    %r12, %rsi\n        movq    %rax, %rdx\n        movq    $1, %rax\n        syscall\n        retq\n</code></pre>\n<p>This is a simplest implementation of <code>puts</code> which calls the strlen function followed by the write syscall.</p>\n<p>You can now compile and link everything as -</p>\n<pre><code>gcc test.c put.s -o executable -nostdlib\n</code></pre>\n<p>When I run the produced <code>executable</code>, I get the following output -</p>\n<pre><code>hello world\nok\n</code></pre>\n<p>and then the process just hangs. I can kill it by pressing ctrl+c.</p>\n"}], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1562218539, "creation_date": 1562132847, "last_edit_date": 1562135962, "question_id": 56863640, "link": "https://stackoverflow.com/questions/56863640/why-does-the-c-runtime-not-call-my-exit", "title": "Why does the C runtime not call my exit()?", "body": "<p>The C standard states that...</p>\n\n<blockquote>\n  <p>...a return from the initial call to the <code>main</code> function is equivalent to calling the <code>exit</code> function with the value returned by the main function as its argument.</p>\n</blockquote>\n\n<p>From what I see, this is usually implemented by the C runtime support code (crt0.c) by doing exactly this -- calling <code>exit</code> with the return value from <code>main</code>.</p>\n\n<p><a href=\"https://sourceware.org/git/?p=glibc.git;a=blob;f=csu/libc-start.c;h=5d9c3675fa38fcd7ee4e034c103bea4b74606366;hb=HEAD#l339\" rel=\"nofollow noreferrer\">glibc</a>:</p>\n\n<pre><code>result = main (argc, argv, __environ MAIN_AUXVEC_PARAM);\nexit (result);\n</code></pre>\n\n<p><a href=\"https://github.com/evanphx/ulysses-libc/blob/master/src/env/__libc_start_main.c#L46\" rel=\"nofollow noreferrer\">Ulysses Libc</a>:</p>\n\n<pre><code>exit(main(argc, argv, envp));\n</code></pre>\n\n<p>However, when I write my own version of <code>exit</code>, it does <strong>not</strong> get called:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid exit( int rc )\n{\n    puts( \"ok\" );\n    fflush( stdout );\n}\n\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>This does not yield the \"ok\" output I expected. Apparently I am missing something here?</p>\n\n<hr>\n\n<p>Context: I am implementing a C standard library, just the ISO part, i.e. no crt0.c. I hoped that the existing system runtime would call <a href=\"https://rootdirectory.ddns.net/websvn/filedetails.php?repname=PDCLib&amp;path=%2Ftrunk%2Ffunctions%2Fstdlib%2Fexit.c\" rel=\"nofollow noreferrer\">my own <code>exit</code> implementation</a>, so \"my\" cleanup (like flushing and closing streams, handling functions registered with <code>atexit</code> etc.) would automatically run on return from a <code>main</code> linked to my library. Obviously this is not the case, I just do not understand why not.</p>\n"}, {"tags": ["c++", "c", "database", "odbc"], "comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1562132959, "post_id": 56862512, "comment_id": 100276280, "body": "Welcome to the magic world of the Undefined Behaviour where everything is possible."}], "owner": {"reputation": 11, "user_id": 11732116, "user_type": "registered", "profile_image": "https://graph.facebook.com/1790743335/picture?type=large", "display_name": "Sungjin Kim", "link": "https://stackoverflow.com/users/11732116/sungjin-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562128030, "creation_date": 1562124373, "last_edit_date": 1562128030, "question_id": 56862512, "link": "https://stackoverflow.com/questions/56862512/odbc-sqlbindcol-has-wrong-pointer-but-it-works-how-is-this-possible", "title": "ODBC SQLBindCol() has wrong pointer, but it works. How is this possible?", "body": "<p>When I execute a ODBC application, I was able to do it without any problem.\nBut, once I checked the tracelog, I found very weird values in pointer assignment.</p>\n\n<p>Here is some part of tracelog.</p>\n\n<pre><code>WCCOActrl.exe - 329c-2160   ENTER SQLGetStmtAttrW \n        SQLHSTMT            0x0000000000C57FD0\n        SQLINTEGER                  11 &lt;SQL_ATTR_RETRIEVE_DATA&gt;\n        SQLPOINTER          0x000000000A55EF90\n        SQLINTEGER                  -6 \n        SQLINTEGER *        0x0000000000000000\n\nWCCOActrl.exe - 329c-2160   EXIT  SQLGetStmtAttrW  with return code 0 (SQL_SUCCESS)\n        SQLHSTMT            0x0000000000C57FD0\n        SQLINTEGER                  11 &lt;SQL_ATTR_RETRIEVE_DATA&gt;\n        SQLPOINTER          0x000000000A55EF90 (1) &lt;SQL_RD_ON&gt;\n        SQLINTEGER                  -6 \n        SQLINTEGER *        0x0000000000000000\n\nWCCOActrl.exe - 329c-2160   ENTER SQLSetStmtAttrW \n        SQLHSTMT            0x0000000000C57FD0\n        SQLINTEGER                  11 &lt;SQL_ATTR_RETRIEVE_DATA&gt;\n        SQLPOINTER                 1 &lt;SQL_RD_ON&gt;\n        SQLINTEGER                  -6 \n\nWCCOActrl.exe - 329c-2160   EXIT  SQLSetStmtAttrW  with return code 0 (SQL_SUCCESS)\n        SQLHSTMT            0x0000000000C57FD0\n        SQLINTEGER                  11 &lt;SQL_ATTR_RETRIEVE_DATA&gt;\n        SQLPOINTER                 1 &lt;SQL_RD_ON&gt;\n        SQLINTEGER                  -6 \n\nWCCOActrl.exe - 329c-2160   ENTER SQLSetStmtAttrW \n        SQLHSTMT            0x0000000000C57FD0\n        SQLINTEGER                  23 &lt;SQL_ATTR_ROW_BIND_OFFSET_PTR&gt;\n        SQLPOINTER          0x00000000076FE5D0\n        SQLINTEGER                  -4 \n\nWCCOActrl.exe - 329c-2160   EXIT  SQLSetStmtAttrW  with return code 0 (SQL_SUCCESS)\n        SQLHSTMT            0x0000000000C57FD0\n        SQLINTEGER                  23 &lt;SQL_ATTR_ROW_BIND_OFFSET_PTR&gt;\n        SQLPOINTER          0x00000000076FE5D0\n        SQLINTEGER                  -4 \n\nWCCOActrl.exe - 329c-2160   ENTER SQLBindCol \n        HSTMT               0x0000000000C57FD0\n        UWORD                        1 \n        SWORD                        1 &lt;SQL_C_CHAR&gt;\n        PTR                0x0000000000000098\n        SQLLEN                   256\n        SQLLEN *            0x0000000000000090\n\nWCCOActrl.exe - 329c-2160   EXIT  SQLBindCol  with return code 0 (SQL_SUCCESS)\n        HSTMT               0x0000000000C57FD0\n        UWORD                        1 \n        SWORD                        1 &lt;SQL_C_CHAR&gt;\n        PTR                0x0000000000000098\n        SQLLEN                   256\n        SQLLEN *            0x0000000000000090 (BADMEM)\n\nWCCOActrl.exe - 329c-2160   ENTER SQLBindCol \n        HSTMT               0x0000000000C57FD0\n        UWORD                        2 \n        SWORD                        1 &lt;SQL_C_CHAR&gt;\n        PTR                0x00000000000001A8\n        SQLLEN                   201\n        SQLLEN *            0x00000000000001A0\n\nWCCOActrl.exe - 329c-2160   EXIT  SQLBindCol  with return code 0 (SQL_SUCCESS)\n        HSTMT               0x0000000000C57FD0\n        UWORD                        2 \n        SWORD                        1 &lt;SQL_C_CHAR&gt;\n        PTR                0x00000000000001A8\n        SQLLEN                   201\n        SQLLEN *            0x00000000000001A0 (BADMEM)\n\nWCCOActrl.exe - 329c-2160   ENTER SQLBindCol \n        HSTMT               0x0000000000C57FD0\n        UWORD                        3 \n        SWORD                      -25 &lt;SQL_C_SBIGINT&gt;\n        PTR                0x0000000000000288\n        SQLLEN                    20\n        SQLLEN *            0x0000000000000280\n\nWCCOActrl.exe - 329c-2160   EXIT  SQLBindCol  with return code 0 (SQL_SUCCESS)\n        HSTMT               0x0000000000C57FD0\n        UWORD                        3 \n        SWORD                      -25 &lt;SQL_C_SBIGINT&gt;\n        PTR                0x0000000000000288\n        SQLLEN                    20\n        SQLLEN *            0x0000000000000280 (BADMEM)\n\nWCCOActrl.exe - 329c-2160   ENTER SQLBindCol \n        HSTMT               0x0000000000C57FD0\n        UWORD                        4 \n        SWORD                        1 &lt;SQL_C_CHAR&gt;\n        PTR                0x00000000000002B0\n        SQLLEN                    11\n        SQLLEN *            0x00000000000002A8\n\nWCCOActrl.exe - 329c-2160   EXIT  SQLBindCol  with return code 0 (SQL_SUCCESS)\n        HSTMT               0x0000000000C57FD0\n        UWORD                        4 \n        SWORD                        1 &lt;SQL_C_CHAR&gt;\n        PTR                0x00000000000002B0\n        SQLLEN                    11\n        SQLLEN *            0x00000000000002A8 (BADMEM)\n\nWCCOActrl.exe - 329c-2160   ENTER SQLSetStmtAttrW \n        SQLHSTMT            0x0000000000C57FD0\n        SQLINTEGER                   9 &lt;SQL_ROWSET_SIZE&gt;\n        SQLPOINTER                 1\n        SQLINTEGER                  -6 \n\nWCCOActrl.exe - 329c-2160   EXIT  SQLSetStmtAttrW  with return code 0 (SQL_SUCCESS)\n        SQLHSTMT            0x0000000000C57FD0\n        SQLINTEGER                   9 &lt;SQL_ROWSET_SIZE&gt;\n        SQLPOINTER                 1\n        SQLINTEGER                  -6 \n\nWCCOActrl.exe - 329c-2160   ENTER SQLExtendedFetch \n        HSTMT               0x0000000000C57FD0\n        UWORD                        1 &lt;SQL_FETCH_NEXT&gt;\n        SQLLEN                     0\n        SQLULEN *           0x000000000A55F040\n        UWORD *             0x00000000076FC0B0\n</code></pre>\n\n<p>As you can see the PTR in SQLBindCol(), the PTR is wrong value. \n(it must have valid pointer...)</p>\n\n<p>Are there any people who can explain this for me?</p>\n\n<p>It works very well on \"mysql odbc driver\" but, not on my own driver.</p>\n\n<p>How is this possible?</p>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1562123032, "post_id": 56862312, "comment_id": 100273982, "body": "Possibly just a terminology thing, but that doesn&#39;t look like a left rotate. How does 40 ever end up immediately after 50 ?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1562123939, "post_id": 56862312, "comment_id": 100274146, "body": "Instead of using <code>sizeof( y ) &#47; sizeof( *y )</code> within the loop definition, it is a bit cleaner to do <code>size_t nelem = sizeof( y ) &#47; sizeof( *y );</code> after you define <code>y</code> and then use <code>for (size_t i = 0; i &lt; nelem; ....)</code>"}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1562124324, "post_id": 56862312, "comment_id": 100274204, "body": "This looks like reversal, not rotation."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1562124687, "post_id": 56862312, "comment_id": 100274263, "body": "I don&#39;t think it is either. It&#39;s a rotate-right (but not of the entire array, only of the first <code>n</code> elements)  An entry of <code>2</code> swaps the first two elements, <code>3</code> rotates the first 3, etc.."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1562125462, "post_id": 56862312, "comment_id": 100274441, "body": "@Obsidian, post exact inputs first used and output seen.  &quot;something like&quot; is insufficient."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1562132107, "post_id": 56862312, "comment_id": 100275994, "body": "The problem here is that the rotate left by one of <code>10 20 30 40 50</code> is supposed to be <code>20 30 40 50 10</code>!"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1562132159, "post_id": 56862312, "comment_id": 100276012, "body": "And that&#39;s what the code does. The code works as expected and neither valgrind nor <code>-fsanitize=undefined</code> see undefined behaviour, so IDK."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1562143852, "post_id": 56862312, "comment_id": 100281484, "body": "Maybe related to your input problem: <a href=\"https://stackoverflow.com/questions/36964949/visual-studio-code-take-input-from-user\" title=\"visual studio code take input from user\">stackoverflow.com/questions/36964949/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 11727197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c0d7b84c892f677f836a36238ba2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Obsidian", "link": "https://stackoverflow.com/users/11727197/obsidian"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1562170732, "post_id": 56862312, "comment_id": 100297088, "body": "Thank you guys for the comments, I&#39;m taking a look now. Again I&#39;m getting back into this and am very out of practice so my logic in this code may not make since, but this is all helpful.  @chux, thank you for the advice, I&#39;ll make sure to keep that in mind for future comments!"}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1562126425, "post_id": 56862646, "comment_id": 100274634, "body": "If you enter <code>3 10 20 30 40 50</code> and end up with <code>20 30 10 40 50</code> how is that a <code>rotateLeft</code>?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1562131982, "post_id": 56862646, "comment_id": 100275953, "body": "@DavidC.Rankin it rotated the 3 first numbers to the left!"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1562132040, "post_id": 56862646, "comment_id": 100275970, "body": "Indeed the problem description says that: &quot;rotates the first n integers in the array to the left.&quot; It is exactly what the code is doing!"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1562132893, "post_id": 56862646, "comment_id": 100276256, "body": "I see what you are saying now, rotate 3-numbers to the left (once)."}], "tags": [], "owner": {"reputation": 386, "user_id": 11425325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8WL1o.jpg?s=128&g=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/11425325/pete"}, "is_accepted": false, "score": 1, "last_activity_date": 1562125527, "creation_date": 1562125527, "answer_id": 56862646, "question_id": 56862312, "link": "https://stackoverflow.com/questions/56862312/rotate-function-using-recursion-in-c-that-takes-an-array-and-integer-as-input/56862646#56862646", "title": "Rotate function,using recursion in C, that takes an array and integer as input", "body": "<p>The code in the answer works fine when compiled with <code>gcc</code> (and entering <code>n</code> less or equal 5, otherwise the <code>rotateLeft</code> method will go beyond the array limit).</p>\n\n<p>Since standard input with <code>scanf</code> doesn't seem to be working, it could be a problem related to how the program is built (it should probably be a win32 or win64 subsystem:console application, link: <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/subsystem-specify-subsystem\" rel=\"nofollow noreferrer\">description of /SUBSYSTEM at Microsoft</a>).</p>\n"}, {"tags": [], "owner": {"reputation": 354, "user_id": 11727918, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bTaZpiC4KJ8/AAAAAAAAAAI/AAAAAAAAABQ/ycG-qmsyeCA/photo.jpg?sz=128", "display_name": "J CHEN", "link": "https://stackoverflow.com/users/11727918/j-chen"}, "is_accepted": true, "score": -1, "last_activity_date": 1562138945, "creation_date": 1562138945, "answer_id": 56865058, "question_id": 56862312, "link": "https://stackoverflow.com/questions/56862312/rotate-function-using-recursion-in-c-that-takes-an-array-and-integer-as-input/56865058#56865058", "title": "Rotate function,using recursion in C, that takes an array and integer as input", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n//recursion \n//a b c d e\n//round-1\n//e b c d a\n//round-2\n//e d c b a\nvoid Rec_ReverseAr(int y[], int n,int max_n){\n   int temp;\n   if (max_n &gt; n*2){\n      temp = y[max_n-n-1];\n      y[max_n-n-1] = y[n];\n      y[n] = temp;\n      Rec_ReverseAr(y, n+1,max_n);\n   }\n}\n//inplace\nvoid Better_ReverseAr(int y[],int max_n){\n    int Upper=max_n/2,i,temp;\n    for (i = 0; i &lt; Upper; i++){\n        temp = y[max_n-i-1];\n        y[max_n-i-1] = y[i];\n        y[i] = temp;\n    }\n}\n\n\nint main(){\n\n    int *y;\n    int n;\n    int i = 0;\n\n    //input number from user\n    printf(\"Enter 'Count' number and 'elements' into array: \");\n    scanf(\"%d\", &amp;n);\n    if(n&lt;1){//prevent nagtive int\n        printf(\"Hey You Enter Wrong Number!\\n\");\n        return 0;\n    }\n    y=(int*)malloc(sizeof(int)*n);//alloc amount n of int for y\n    for (i = 0; i &lt; n; i++){\n        scanf(\"%d\", &amp;y[i]);\n    }\n\n    Rec_ReverseAr(y,0,n);\n    //Better_ReverseAr(y,n);\n    for (i = 0; i &lt; n; i++ ){\n        printf( \"%d \", y[i] );\n    }\n\n\n\n    free(y);//release memory of y\n\n    return 0;\n}\n</code></pre>\n\n<p>Here you are</p>\n\n<pre><code>your function\nvoid rotateLeft(int y[], int n){\n\n   int temp;\n   if (n &gt; 1){\n      temp = y[0];\n      y[0] = y[1];\n      y[1] = temp;\n      rotateLeft(y + 1, n - 1);\n   }\n}\n\n0.a b c d e f\n1.*b a* c d e f\n2.b *c a* d e f\n3.b c *d a* e f\n...\nis wrong\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11727197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c0d7b84c892f677f836a36238ba2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Obsidian", "link": "https://stackoverflow.com/users/11727197/obsidian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 56865058, "answer_count": 2, "score": 0, "last_activity_date": 1565484150, "creation_date": 1562122394, "last_edit_date": 1565484150, "question_id": 56862312, "link": "https://stackoverflow.com/questions/56862312/rotate-function-using-recursion-in-c-that-takes-an-array-and-integer-as-input", "title": "Rotate function,using recursion in C, that takes an array and integer as input", "body": "<p>First time posting, I apologize if my question isn't following guidelines but any feedback on my question and posting questions is welcome :)!</p>\n\n<p>I'm working on a problem that requires writing a recursive void function with two parameters, an array and an integer count n, that rotates the first n integers in the array to the left.</p>\n\n<p>So the Input would look something like this: </p>\n\n<pre><code>5 10 20 30 40 50\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>50 40 30 20 10\n</code></pre>\n\n<p>I've written the rotate function using recursion and it seems to work as expected.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid rotateLeft(int y[], int n){\n\n   int temp;\n   if (n &gt; 1){\n      temp = y[0];\n      y[0] = y[1];\n      y[1] = temp;\n      rotateLeft(y + 1, n - 1);\n   }\n}\n\nint main(void){\n\n   int y[5];\n   int n;\n   int i = 0;\n\n   //input number from user\n   printf(\"Enter 'Count' number and 'elements' into array: \");\n   scanf(\"%d\", &amp;n);\n   for (i = 0; i &lt; 5; i++){\n      scanf(\"%d\", &amp;y[i]);\n   }\n\n   rotateLeft(y, n);\n\n   for ( size_t i = 0; i &lt; sizeof( y ) / sizeof( *y ); i++ ) printf( \"%d \", y[i] );\n    puts( \"\" );\n\n   return 0;\n}\n</code></pre>\n\n<p>I'm using Visual Code Studio and I encounter two issues when trying to run this code. The first being the it never asks for my input and it will just output random numbers at the specified array locations such as: \n3345345 345456 564565 56 4564</p>\n\n<p>The other times the code just runs and never stops and I have to force it to stop.</p>\n\n<p>I've hit a wall at this point and am positive the issue lies within my main function, but I've hit a wall in my head as where to go. I'm out of coding for the last 5 years so I'm very out of practice.</p>\n"}, {"tags": ["c", "parameter-passing", "whitespace"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1562122373, "post_id": 56862175, "comment_id": 100273858, "body": "Impossible to tell without seeing the definition of <code>ft_printf</code>. If you include <code>&#39; &#39;</code> within <code>&quot;...&#39; &#39;...&quot;</code> you are just including the three literal characters <code>&#39; &#39;</code> within the string itself. Please provide <a href=\"http://stackoverflow.com/help/mcve\">A Minimal, Complete, and Verifiable Example (MCVE)</a>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562126638, "post_id": 56862175, "comment_id": 100274676, "body": "In POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/printf.html\" rel=\"nofollow noreferrer\"><code>printf()</code></a>, the apostrophe <code>&#39;</code> is a valid format modifier, meaning use the thousands grouping character (the <code>thousands_sep</code> in <code>struct lconv</code> from <code>&lt;locale.h&gt;</code>).  Repeating it is unnecessary, but probably not harmful.  The numeric part of the format doesn&#39;t make as much sense; the <code>0</code> means leading zeros (but you also have <code>-</code> for left justified; the <code>400</code> minimum width is ridiculously wide; the <code>.500</code> minimum number of digits is normally is smaller than the <code>400</code>; <code>hhi</code> means (signed) character value.  Odd!"}, {"owner": {"reputation": 65, "user_id": 11731622, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MjD0MIY49Rw/AAAAAAAAAAI/AAAAAAAAABA/L1KB-3R83Zk/photo.jpg?sz=128", "display_name": "Alan Barrett II", "link": "https://stackoverflow.com/users/11731622/alan-barrett-ii"}, "edited": false, "score": 0, "creation_date": 1562172318, "post_id": 56862175, "comment_id": 100297851, "body": "Thank you for the feedback so far!  Let&#39;s ignore the fact I am recreating printf. I think this may be misleading my core question.  &quot;Is &#39; &#39; equivalent to just passing a space as a parameter to a function?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12051237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/402ba95a4a8780e342c5f739bcefad22?s=128&d=identicon&r=PG&f=1", "display_name": "littleAcorn", "link": "https://stackoverflow.com/users/12051237/littleacorn"}, "is_accepted": false, "score": 0, "last_activity_date": 1568182697, "creation_date": 1568182697, "answer_id": 57883161, "question_id": 56862175, "link": "https://stackoverflow.com/questions/56862175/passing-space-as-a-parameter/57883161#57883161", "title": "Passing space as a parameter", "body": "<p>No, it cannot. Printf parses the string by analyzing what is between the percent sign and the final and inevitable type conversion (i.e \"diouxXcspf\").</p>\n\n<p>I suppose you could always parse the string in a more efficient manner by having a list of symbols (generated using a rudimentary lexer) that represent the different flags and such and calling different functions depending on what they are, which would prevent having to \"pass spaces as arguments\".</p>\n"}], "owner": {"reputation": 65, "user_id": 11731622, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MjD0MIY49Rw/AAAAAAAAAAI/AAAAAAAAABA/L1KB-3R83Zk/photo.jpg?sz=128", "display_name": "Alan Barrett II", "link": "https://stackoverflow.com/users/11731622/alan-barrett-ii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568182697, "creation_date": 1562121268, "last_edit_date": 1562122450, "question_id": 56862175, "link": "https://stackoverflow.com/questions/56862175/passing-space-as-a-parameter", "title": "Passing space as a parameter", "body": "<p>When Passing space as a parameter can it be passed in using <code>' '</code>?\nI'm currently recreating <code>printf</code>. </p>\n\n<p>The code below is an example of what I am passing in.</p>\n\n<p>When it's passed in like this it works fine:</p>\n\n<pre><code>ft_printf(\"Start %-+# 0400.500hhiend\\n\");\n</code></pre>\n\n<p>This leads be to believe that space can not be passed in as a parameter like this <code>' '</code>, but I just want to double check.</p>\n\n<p>Passing it in:</p>\n\n<pre><code>ft_printf(\"Start %-+#' '0400.500hhiend\\n\");\n</code></pre>\n\n<p>Parsing code:</p>\n\n<pre><code>while (fmt[count] == '-' || fmt[count] == '+' || fmt[count] == ' ' ||\n       fmt[count] == '#' || fmt[count] == '0')\n</code></pre>\n"}, {"tags": ["c", "networking", "ip", "tcpdump"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1562114314, "post_id": 56861237, "comment_id": 100272663, "body": "Use <code>tcpdump -xx</code> to see the packet contents in hexadecimal, then see what is different between your packets and other packets."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1562121517, "post_id": 56861237, "comment_id": 100273717, "body": "Sounds like you put 0 for protocol."}], "owner": {"reputation": 81, "user_id": 9319459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/455cc688657637abd0ee875600cfef43?s=128&d=identicon&r=PG&f=1", "display_name": "NolanRudolph", "link": "https://stackoverflow.com/users/9319459/nolanrudolph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562110995, "creation_date": 1562110995, "question_id": 56861237, "link": "https://stackoverflow.com/questions/56861237/tcpdump-excluding-packet-attributes-with-ip0", "title": "Tcpdump Excluding Packet Attributes with &quot;IP0&quot;", "body": "<p>I'm currently working on a project that constructs raw packets out of network flow level data. Unfortunately, when I send my packets over the localhost networking interface, I receive something like the following:</p>\n\n<blockquote>\n  <p>16:31:03.000624 00:01:02:03:04:05 > 00:09:08:07:06:05, ethertype IPv4 (0x0800), length 54: IP0  </p>\n</blockquote>\n\n<p>Whereas a normal tcpdump recorded packet would look like:  </p>\n\n<blockquote>\n  <p>16:31:03.000624 00:01:02:03:04:05 > 00:09:08:07:06:05, ethertype IPv4 (0x0800), length 54: 172.217.14.238 > 10.0.0.204: ICMP echo reply, id 19577, seq 1, length 64</p>\n</blockquote>\n\n<p>My question is, what would cause the rest of the information tied to the packet to be replaced by this \"IP0\"? </p>\n\n<p>I've followed networking byte order to the best of my ability, using htons and htonl when required of me and inetaddr() as well.</p>\n"}, {"tags": ["c", "windows", "dirent.h", "dr-memory"], "comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 2, "creation_date": 1562113380, "post_id": 56861112, "comment_id": 100272540, "body": "How are you calling <code>printFolder</code>? Where&#39;s your main? You also have a void function returning 0."}, {"owner": {"reputation": 389, "user_id": 10504196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83dc1f452a433c607322dadfe6b7ab77?s=128&d=identicon&r=PG&f=1", "display_name": "ItayMiz", "link": "https://stackoverflow.com/users/10504196/itaymiz"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1562147585, "post_id": 56861112, "comment_id": 100283625, "body": "The only thing I do in main is call the function, and it does print the files in the folder. The return 0 is a bad thing but I don&#39;t think it is the cause for the error."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1562170637, "post_id": 56861112, "comment_id": 100297030, "body": "You need to show your main. That&#39;s probably the source of your issue"}, {"owner": {"reputation": 389, "user_id": 10504196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83dc1f452a433c607322dadfe6b7ab77?s=128&d=identicon&r=PG&f=1", "display_name": "ItayMiz", "link": "https://stackoverflow.com/users/10504196/itaymiz"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1562177227, "post_id": 56861112, "comment_id": 100300064, "body": "I added main()."}], "owner": {"reputation": 389, "user_id": 10504196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83dc1f452a433c607322dadfe6b7ab77?s=128&d=identicon&r=PG&f=1", "display_name": "ItayMiz", "link": "https://stackoverflow.com/users/10504196/itaymiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562176661, "creation_date": 1562109612, "last_edit_date": 1562176661, "question_id": 56861112, "link": "https://stackoverflow.com/questions/56861112/when-looping-through-a-folder-in-c-using-dirent-h-in-windows-and-checking-the", "title": "When looping through a folder in C using dirent.h (in windows) and checking the .exe file with dr.memory i get UNINITIALIZED READ error", "body": "<p>I wrote a program in C that prints all of the files in a folder using dirent.h (in windows) and it is working fine, but when I check the .exe file with dr.memory I get lots of UNINITIALIZED READ errors.\nAll dr.memory results: <a href=\"https://pastebin.com/kiiGeg3c\" rel=\"nofollow noreferrer\">https://pastebin.com/kiiGeg3c</a></p>\n\n<p>I checked the dr.memory page for Uninitialized Read (<a href=\"https://drmemory.org/docs/page_uninit.html\" rel=\"nofollow noreferrer\">https://drmemory.org/docs/page_uninit.html</a>) but I didn't understand why it happened in my code.</p>\n\n<pre><code>void printFolder(char* folderPath)\n{\n    DIR* d = 0;\n    struct dirent* file = 0;\n\n    d = opendir(folderPath);\n\n    if (!d)\n    {\n        printf(\"Folder not found!\\n\");\n\n        return;\n    }\n\n    while ((file = readdir(d)))\n    {\n        if (strcmp(file-&gt;d_name, \".\") &amp;&amp; strcmp(file-&gt;d_name, \"..\"))\n        {\n            printf(\"file: %s\\n\", file-&gt;d_name);\n        }\n    }\n\n    closedir(d);\n}\n\n\nint main(void)\n{\n    char folderPath[] = \"C:\\\\folder\";\n\n\n    printFolder(folderPath);\n\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "audio", "embedded", "stm32", "pcm"], "comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1562249469, "post_id": 56861017, "comment_id": 100326331, "body": "Those are multiples of 128 not 125 - i.e. the least significant 7 bits are always zero.  That may simply mean that they are low amplitude samples left-shifted into machine integer type, or it could be an error earlier in the system    PDM is converted to PCM by a low-pass filter digital.  That is presumably what the <code>HAL_DFSDM_Filter</code> is doing?  i.e. that are not PDM values.  Who knows what the FFT of for?  Is this not your code?"}, {"owner": {"reputation": 1, "user_id": 11731538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3a02949e675889747746646e85b329d?s=128&d=identicon&r=PG&f=1", "display_name": "HubbaBubba", "link": "https://stackoverflow.com/users/11731538/hubbabubba"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1562347959, "post_id": 56861017, "comment_id": 100359067, "body": "Yes, it&#39;s 128, typo on my part. No it&#39;s not my code and I&#39;m trying to convert the input into pcm data, ideally so that I can create wav files. This is the source code for the most part: <a href=\"https://github.com/y2kblog/NUCLEO-L476RG_DFSDM_PDM-Mic\" rel=\"nofollow noreferrer\">github.com/y2kblog/NUCLEO-L476RG_DFSDM_PDM-Mic</a>"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1562348537, "post_id": 56861017, "comment_id": 100359250, "body": "I see; in that case the FFT stuff is irrelevant.  The filter will output PCM.  It is not clear, whether that samples you have reported are input to (from the DMA buffer), or output from the filter."}], "owner": {"reputation": 1, "user_id": 11731538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3a02949e675889747746646e85b329d?s=128&d=identicon&r=PG&f=1", "display_name": "HubbaBubba", "link": "https://stackoverflow.com/users/11731538/hubbabubba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1341, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562347982, "creation_date": 1562108680, "last_edit_date": 1562347982, "question_id": 56861017, "link": "https://stackoverflow.com/questions/56861017/converting-pdm-data-into-pcm-or-other-audio-data-format", "title": "Converting pdm data into pcm or other audio data format", "body": "<p>I'm working on an embedded system (NUCLEO-L476RG) with a pdm (pulse-density modulation) MEMS microphone. Mind you that I'm not very familiar with audio processing. The program can currently convert pdm values into the frequency domain through fast fourier transform. However, I need the data in the time domain or convert it into PCM. Basically audio data that would enable me to create wav files. So I tried capturing the pdm data by itself but somehow when I print them out I get multiples of 125.\ni.e.\n0\n-1024\n-1792\n-256\n-256\n-1024\n-1280\n-768\n-768\n-1536\n-256</p>\n\n<p>What do these values represent? Shouldn't pdm values be single bits? What drivers/middleware would I need to convert pdm to pcm if at all possible? For reference I'm using arm_math.h from the CMSIS DSP Library if that's relevant. This is likely not enough info so feel free to ask me questions about things I missed, thanks.</p>\n\n<p>I have not tried too many things as its not my codebase so I don't fully understand it to begin with. </p>\n\n<pre><code>  // I think pdm data comes from this function\n  // and stored in 'Buff'\n   HAL_DFSDM_FilterRegularStart_DMA(&amp;hdfsdm1_filter0, Buff, \n                                    FFT_SampleNum)\n.\n.\n.\n.\n.\n\n\n  // This is where pdm values are plugged into fast fourier transform\n  // input data\n  for (uint32_t i = 0; i &lt; FFT_SampleNum; i++)\n    FFT_inp[i] = (float) FFT_inp_int32[i];\n\n  // Windowing\n    arm_mult_f32(FFT_inp, FFT_window, FFT_inp, FFT_SampleNum);\n\n  // Execute FFT\n        arm_rfft_fast_f32(&amp;S, FFT_inp, FFT_oup, 0);\n\n  // calculate magnitude\n        arm_cmplx_mag_f32(FFT_oup, FFT_mag, FFT_SampleNum / 2);\n\n  // Normalization (Unitary transformation) of magnitude\n        arm_scale_f32(FFT_mag, 1.0f / sqrtf((float) FFT_SampleNum), \n                      FFT_mag, FFT_SampleNum / 2);\n\n\n  // AC coupling\n  for (uint32_t i = 0; i &lt; FFT_SampleNum / 2; i++)\n  {\n    if (*(FFT_frq + i) &lt; FFT_AC_COUPLING_HZ)\n        FFT_mag[i] = 1.0f;\n    else\n        break;\n  }\n</code></pre>\n\n<p>Heres the base code: <a href=\"https://github.com/y2kblog/NUCLEO-L476RG_DFSDM_PDM-Mic\" rel=\"nofollow noreferrer\">https://github.com/y2kblog/NUCLEO-L476RG_DFSDM_PDM-Mic</a></p>\n"}, {"tags": ["c", "pthreads", "mqtt", "mosquitto", "paho"], "comments": [{"owner": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "edited": false, "score": 0, "creation_date": 1562158608, "post_id": 56860949, "comment_id": 100289965, "body": "Anything in the broker logs at the time?"}, {"owner": {"reputation": 110, "user_id": 9671542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7181b9d475284bd1c32ce4e38692ad49?s=128&d=identicon&r=PG&f=1", "display_name": "turtle", "link": "https://stackoverflow.com/users/9671542/turtle"}, "reply_to_user": {"reputation": 40434, "user_id": 504554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/006ffde9ed3fac6396222405fc5e9bf0?s=128&d=identicon&r=PG", "display_name": "hardillb", "link": "https://stackoverflow.com/users/504554/hardillb"}, "edited": false, "score": 0, "creation_date": 1562284660, "post_id": 56860949, "comment_id": 100336466, "body": "@hardillb the logs seem normal with just connection instantiation/close events"}], "owner": {"reputation": 110, "user_id": 9671542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7181b9d475284bd1c32ce4e38692ad49?s=128&d=identicon&r=PG&f=1", "display_name": "turtle", "link": "https://stackoverflow.com/users/9671542/turtle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1578000503, "creation_date": 1562108088, "last_edit_date": 1578000503, "question_id": 56860949, "link": "https://stackoverflow.com/questions/56860949/paho-mqtt-c-message-loss-in-a-request-reply-server", "title": "paho.mqtt.c message loss in a request/reply server", "body": "<p>I'm testing a simple MQTT client-server model where a client is repeatedly sending requests to a server and awaits replies to each request. The flow is like this:</p>\n\n<ul>\n<li>Client subscribes to topic 'server/client' with QoS 1</li>\n<li>Server subscribes to topic 'client/server' with Qos 1</li>\n<li>Client sends 1000 messages to server, on message delivery, client increments its messagesOut counter by 1.</li>\n<li>Server receives a new message and invoke a registered callback. In the callback, the server sends a simple message to 'server/client'. On message delivery, the server increments its messagesOut counter.</li>\n<li>On new messages to topic 'server/client', the client will increment its messagesIn counter by 1.</li>\n<li>Both server and client will stop when client's messagesIn and server's messagesOut are 1000.</li>\n</ul>\n\n<p>With QoS level 1, I expect the server to fully receives 1000 messages sent from the client, and sends 1000 replies back. However, my program is always stuck when the server has received and sent out about 200-300 messages. When I comment out the call to <code>MQTTAsync_sendMessage()</code>, the server can receive all 1000 messages. I suspect some kind of race condition or threads limit is causing this, but I'm not too sure.</p>\n\n<p>The callback for new messages in the server looks like this:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#define TOPIC_IN   \"client/server\"\n#define TOPIC_OUT  \"server/client\"\n#define PAYLOAD    \"hello client\\n\"\n\nunsigned long long messagesIn = 0, messagesOut = 0;\n\nint on_message_arrival (void *context, char *topic_name, \n                        int topic_length, MQTTAsync_message *message) {\n    if (!strcmp(topic_name, TOPIC_IN)) {\n        MQTTAsync_freeMessage(&amp;message);\n        MQTTAsync_free(topic_name);\n\n        messagesIn++;\n\n        MQTTAsync_message pub_message = MQTTAsync_message_initializer;\n        MQTTAsync_responseOptions opts = MQTTAsync_responseOptions_initializer;\n\n        pub_message.payload = PAYLOAD;\n        pub_message.payloadlen = strlen(PAYLOAD);\n        pub_message.qos = QOS1;\n        pub_message.retained = 0;\n        delivered_token = 0;\n\n        opts.context = &amp;message;\n\n        MQTTAsync_sendMessage((MQTTAsync)context, TOPIC_OUT, &amp;pub_message, &amp;opts);\n    } else {\n        MQTTAsync_freeMessage(&amp;message);\n        MQTTAsync_free(topic_name);\n    }\n    return 1;\n}\n</code></pre>\n\n<p>Any guide to help me debug this is appreciated.</p>\n"}, {"tags": ["python", "c"], "comments": [{"owner": {"reputation": 1160, "user_id": 11542188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6274585f76bff6b24e744a25dfa4f30?s=128&d=identicon&r=PG&f=1", "display_name": "Masoud", "link": "https://stackoverflow.com/users/11542188/masoud"}, "edited": false, "score": 0, "creation_date": 1562108042, "post_id": 56860851, "comment_id": 100271591, "body": "<code>for x in range(start, stop+1, 1): print(ids[x])</code>  this article may be helpful: <a href=\"https://www.w3schools.com/python/ref_func_range.asp\" rel=\"nofollow noreferrer\">w3schools.com/python/ref_func_range.asp</a>"}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 11584089, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u0pIx_zc2VY/AAAAAAAAAAI/AAAAAAAAADE/mqmE8KQOAR0/photo.jpg?sz=128", "display_name": "LordPotato", "link": "https://stackoverflow.com/users/11584089/lordpotato"}, "is_accepted": false, "score": 1, "last_activity_date": 1562107662, "creation_date": 1562107662, "answer_id": 56860896, "question_id": 56860851, "link": "https://stackoverflow.com/questions/56860851/how-to-loop-through-a-list-in-python-using-range/56860896#56860896", "title": "How to loop through a list in Python using range()", "body": "<pre class=\"lang-py prettyprint-override\"><code>for id in ids:\n    print(id)\n</code></pre>\n\n<p>will print all ids in the list, you can always set a break statement if you don't want all of them</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for id in ids:\n    if count &gt; start:\n        print(id)\n\n    count += 1\n\n    if count &gt;= end:\n        break\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1282, "user_id": 4621345, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BrAH_VoKIz4/AAAAAAAAAAI/AAAAAAAAAIM/FT9DTnHcXJ8/photo.jpg?sz=128", "display_name": "Kevin Welch", "link": "https://stackoverflow.com/users/4621345/kevin-welch"}, "is_accepted": false, "score": 0, "last_activity_date": 1562107688, "creation_date": 1562107688, "answer_id": 56860899, "question_id": 56860851, "link": "https://stackoverflow.com/questions/56860851/how-to-loop-through-a-list-in-python-using-range/56860899#56860899", "title": "How to loop through a list in Python using range()", "body": "<p>If you just want to print the strings</p>\n\n<pre><code>for id in ids:\n    print(id)\n</code></pre>\n\n<p>If you need access to the index</p>\n\n<pre><code>for i in range(len(ids)):\n    print(ids[i])\n</code></pre>\n\n<p>If you need access to the index and only want to loop until <code>end</code> (if 'end' is an integer)</p>\n\n<pre><code>for i in range(end):\n    print(ids[i])\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11693442, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fQ_Nq-JKLCY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfoWEW6vLRIKJqHOUmX1zM9gpYaMQ/mo/photo.jpg?sz=128", "display_name": "asor", "link": "https://stackoverflow.com/users/11693442/asor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "closed_date": 1562108764, "answer_count": 2, "score": -2, "last_activity_date": 1562112739, "creation_date": 1562107299, "last_edit_date": 1562112739, "question_id": 56860851, "link": "https://stackoverflow.com/questions/56860851/how-to-loop-through-a-list-in-python-using-range", "closed_reason": "Duplicate", "title": "How to loop through a list in Python using range()", "body": "<p>I don't know how to convert this loop in C to Python. Thanks in advance</p>\n\n<p>I tried to convert</p>\n\n<pre><code>for(i=start, i&lt;=end, i++)\n   printf(ids[i])\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>for x in range(start, end, ids):\n   print(x)\n</code></pre>\n\n<p>But range requires integer values and ids is a list of strings.</p>\n\n<p>I tried casting ids as integers but it says </p>\n\n<blockquote>\n  <p>\"ValueError: invalid literal for int()\"</p>\n</blockquote>\n\n<p>I need the values in ids to stay as characters because there are some letters in it.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 8, "creation_date": 1562102925, "post_id": 56860213, "comment_id": 100270375, "body": "<code>memset</code> fills the continuous region of memory. Since you allocate each 1D-array separately, they are not guaranteed to form the continuous region. You have to memset all 1D-arrays separately."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 3, "creation_date": 1562103035, "post_id": 56860213, "comment_id": 100270404, "body": "Your array is not a 2D array but a 1D array of pointers to 1D arrays. This is not the same."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1562103131, "post_id": 56860213, "comment_id": 100270447, "body": "<a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don&#39;t cast malloc</a>"}, {"owner": {"reputation": 15, "user_id": 11667829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dAMpy.jpg?s=128&g=1", "display_name": "sdfrn42", "link": "https://stackoverflow.com/users/11667829/sdfrn42"}, "edited": false, "score": 0, "creation_date": 1562103758, "post_id": 56860213, "comment_id": 100270608, "body": "I tried removing the casts from malloc as suggested by Barmar but I am still getting a segmentation fault"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1562104039, "post_id": 56860213, "comment_id": 100270681, "body": "This is relevant:  <a href=\"https://stackoverflow.com/questions/42094465/correctly-allocating-multi-dimensional-arrays\"><b>Correctly allocating multi-dimensional arrays</b></a>"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 11667829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dAMpy.jpg?s=128&g=1", "display_name": "sdfrn42", "link": "https://stackoverflow.com/users/11667829/sdfrn42"}, "edited": false, "score": 0, "creation_date": 1562103572, "post_id": 56860277, "comment_id": 100270565, "body": "Thank you for pointing out the problem, but how would I implement your solution?"}, {"owner": {"reputation": 47115, "user_id": 235354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097d761861529df52a6800744f1074d2?s=128&d=identicon&r=PG", "display_name": "jspcal", "link": "https://stackoverflow.com/users/235354/jspcal"}, "reply_to_user": {"reputation": 15, "user_id": 11667829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dAMpy.jpg?s=128&g=1", "display_name": "sdfrn42", "link": "https://stackoverflow.com/users/11667829/sdfrn42"}, "edited": false, "score": 1, "creation_date": 1562103760, "post_id": 56860277, "comment_id": 100270610, "body": "You can allocate the array with <code>char (*arr)[COLUMNS] = malloc(sizeof *arr * ROWS)</code>"}], "tags": [], "owner": {"reputation": 47115, "user_id": 235354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097d761861529df52a6800744f1074d2?s=128&d=identicon&r=PG", "display_name": "jspcal", "link": "https://stackoverflow.com/users/235354/jspcal"}, "is_accepted": false, "score": 2, "last_activity_date": 1562103745, "last_edit_date": 1562103745, "creation_date": 1562103141, "answer_id": 56860277, "question_id": 56860213, "link": "https://stackoverflow.com/questions/56860213/my-dynamically-allocated-2d-array-wont-print/56860277#56860277", "title": "My dynamically allocated 2D array won&#39;t print", "body": "<p>You can allocate the array as a contiguous block:</p>\n\n<pre><code>char (*arr)[COLUMNS] = malloc(sizeof *arr * ROWS);\nmemset(arr, 'x', sizeof *arr * ROWS);\n</code></pre>\n\n<p>The <code>memset</code> call is going beyond the bounds of the allocated array <code>a</code>:</p>\n\n<pre><code>memset(a, 'x', rows*columns*sizeof(a[0][0]));\n</code></pre>\n\n<p>The array is comprised of <code>char*</code> pointers and has <code>rows</code> elements. Since you're allocating the sub-arrays individually you'd need separate <code>memset</code> calls for each <code>malloc</code>'d pointer. Assuming the strings have a fixed length, it would be simpler to allocate the storage as one continuous block.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 11667829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dAMpy.jpg?s=128&g=1", "display_name": "sdfrn42", "link": "https://stackoverflow.com/users/11667829/sdfrn42"}, "edited": false, "score": 0, "creation_date": 1562103928, "post_id": 56860356, "comment_id": 100270656, "body": "Thank you so much, that fixed the segmentation fault!"}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "edited": false, "score": 3, "creation_date": 1562106961, "post_id": 56860356, "comment_id": 100271361, "body": "Correct answer, but I should point out that <code>sizeof(char)</code> is always 1 so you don&#39;t need to write it."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1562125707, "post_id": 56860356, "comment_id": 100274493, "body": "<code>columns * sizeof(a[0][0])</code> has the advantage of being correct, even when code later changes the <code>type</code> from <code>char</code> to say <code>wchar_t</code>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1562132599, "post_id": 56860356, "comment_id": 100276156, "body": "<code>sizeof (char)</code> is <i>always</i> by definition 1, period, because the very definition of <code>sizeof</code> is that it gives the size of the given object in <i>chars</i>. A char might have more than 8 bits though."}, {"owner": {"reputation": 367, "user_id": 10930163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a82a32b93373e472ee666e96b00d1b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonmess", "link": "https://stackoverflow.com/users/10930163/anonmess"}, "reply_to_user": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "edited": false, "score": 0, "creation_date": 1562161957, "post_id": 56860356, "comment_id": 100292156, "body": "@CoffeeTableEspresso I do understand that, I keep it there so that it clearly indicates what type I&#39;m allocating for. If I <code>malloc</code> right when I declare a variable, I might leave it off"}], "tags": [], "owner": {"reputation": 367, "user_id": 10930163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a82a32b93373e472ee666e96b00d1b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonmess", "link": "https://stackoverflow.com/users/10930163/anonmess"}, "is_accepted": true, "score": 2, "last_activity_date": 1562103712, "creation_date": 1562103712, "answer_id": 56860356, "question_id": 56860213, "link": "https://stackoverflow.com/questions/56860213/my-dynamically-allocated-2d-array-wont-print/56860356#56860356", "title": "My dynamically allocated 2D array won&#39;t print", "body": "<p>The easiest solution is to do the <code>memset</code> in the same loop you <code>malloc</code> the rows in:</p>\n\n<pre><code>for(temp = 0; temp &lt; rows; temp++) {\n    a[temp] = malloc(columns*sizeof(char));\n    memset(a[temp], 'x', columns);\n}\n</code></pre>\n\n<p>Notice that I do not multiply <code>columns * sizeof(a[0][0])</code>. <code>sizeof(a[0][0])</code> is the size of a <code>char</code> in bytes, so usually 1. If you were to do <code>columns * sizeof(a[0][0])</code> it would still work on most any system, but in practical use, you really do not need it since <code>sizeof(char)</code> is almost universally 1.</p>\n"}], "owner": {"reputation": 15, "user_id": 11667829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dAMpy.jpg?s=128&g=1", "display_name": "sdfrn42", "link": "https://stackoverflow.com/users/11667829/sdfrn42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 56860356, "answer_count": 2, "score": 0, "last_activity_date": 1562121028, "creation_date": 1562102683, "last_edit_date": 1562121028, "question_id": 56860213, "link": "https://stackoverflow.com/questions/56860213/my-dynamically-allocated-2d-array-wont-print", "title": "My dynamically allocated 2D array won&#39;t print", "body": "<p>I'm trying to use a function to create a 2d character array, set all characters to character x, and print the first 10 rows to test if it was done correctly.</p>\n\n<p>My code compiles using: gcc -std=c89 -pedantic code.c\nHowever, when I try to run the code using ./a.out, I get a segmentation fault.</p>\n\n<p>I have isolated the problem to when I try to print my array, as there is no segmentation fault when the line <code>printf(\"%c\", a[i][j]);</code> is commented out.</p>\n\n<pre><code>#define rows 100\n#define columns 3\n\nchar** makeArr(int rows, int columns)\n{\n    int temp,i,j;\n    char** a = (char**)malloc(rows*sizeof(char*));\n    for(temp = 0; temp &lt; rows; temp++)\n    {\n        a[temp]=(char*)malloc(columns*sizeof(char));\n    }\n\n    memset(a, 'x', rows*columns*sizeof(a[0][0]));\n\n    for(i = 0; i &lt; 10; i++)\n    {\n        for(j = 0; j &lt; columns; j++)\n        {\n            printf(\"%c\", a[i][j]);\n        }\n        printf(\"\\n\");\n    }\n\n    return a;\n}\n</code></pre>\n\n<p>Any help with this problem would be greatly appreciated, and if any more context is needed, just let me know.</p>\n"}, {"tags": ["c", "gcc", "x86-64", "inline-assembly"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1562100255, "post_id": 56859394, "comment_id": 100269577, "body": "There aren&#39;t specific-register constraints for any of r8..r15.  Use <code>register long var asm (&quot;r10&quot;);</code>.  Looking for a duplicate..."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1562134007, "post_id": 56859394, "comment_id": 100276679, "body": "If you really insist on using a macro (which you didn&#39;t mention in the original question), you can just declare a local inside a <code>{}</code> block.  Like <code>{register long r10__ asm(&quot;r10&quot;)=a4; asm volatile(&quot;syscall&quot; :  &quot;=a&quot; (res) : &quot;D&quot; (fd), &quot;S&quot; (buf), &quot;d&quot; (buf_size), &quot;a&quot; (__NR_write), &quot;r&quot;(r10__) : &quot;memory&quot;); }</code>.  (note volatile+mem). It would be much better to use a function wrapper to make sure inputs are sign or zero-extended to the correct width.  e.g. if you use your macro with <code>buf_size</code> being an <code>int</code> with garbage in the high half of RDX, the kernel will still interpret it as a 64-bit integer."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1562134119, "post_id": 56859394, "comment_id": 100276713, "body": "Anyway, your desire to put a multi-statement thing inside a macro is a separate question, unrelated to how to solve this problem.  The standard idiom is <code>do { foo; bar; }while(0)</code> so it&#39;s exactly 1 statement and doesn&#39;t break an <code>if() write(...); else bar;</code> statement like braces can."}], "owner": {"reputation": 75, "user_id": 11729009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aeaab067fd7d266f8e47764ee6e2ad9?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/11729009/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "closed_date": 1562100558, "answer_count": 0, "score": 0, "last_activity_date": 1562133532, "creation_date": 1562098062, "last_edit_date": 1562133532, "question_id": 56859394, "link": "https://stackoverflow.com/questions/56859394/c-assembly-insert-parameters-into-r10-r8-r9-registers", "closed_reason": "Duplicate", "title": "C assembly insert parameters into r10 r8 r9 registers", "body": "<p>i want to use assembly in C to use syscall for write and mmap functions. \nfor write function, it's clear that we can use somethings like this</p>\n\n<pre><code>asm (\"syscall\" : \"=a\" (res) : \"D\" (fd), \"S\" (buf), \"d\" (buf_size), \"a\" (1));\n\nD = edi | rdi\nS = esi | rsi\nd = edx | rdx\na = eax | rax\n</code></pre>\n\n<p>everything is cool here and there is no problem but some functions needs (r10, r8, r9) registers too !!!</p>\n\n<p><a href=\"https://blog.rchapman.org/posts/Linux_System_Call_Table_for_x86_64/\" rel=\"nofollow noreferrer\">list of syscalls with parameters and registers</a></p>\n\n<p>now i have problem for that functions (with r...) registers usage ...\nfor example, <strong>sys_mmap</strong> function takes all those 3 (r) registers too</p>\n\n<p>now for this functions, what should i do to pass the r10, r8, r9 ??? what is the keyword for r10, r8, r9 in extended assembly ?</p>\n\n<p><strong>why it's not duplicated:</strong>\nthis is not duplicated question .... because in other question, they used</p>\n\n<pre><code>register long r10 asm(\"r10\") = a4;\n</code></pre>\n\n<p>which here i used macro and no function ! so i don't want to define variable (r10) you could even say that it's possible to use that iniside asm like <code>(movl %5, %%r10)</code> !!!!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1562097272, "post_id": 56859177, "comment_id": 100268405, "body": "Try <code>char c;scanf(&quot; %c&quot;,&amp;c)</code> instead of <code>system(&quot;Pause&quot;);</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1562097345, "post_id": 56859177, "comment_id": 100268431, "body": "And add some newlines to your prints"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1562109036, "post_id": 56859177, "comment_id": 100271793, "body": "@StephanLechner Neither is good. The real solution is to configure the IDE/debugger such that it keeps the output window open after the application terminates."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 11731022, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NiEiC-Y3MMs/AAAAAAAAAAI/AAAAAAAAB5s/H2WWl2vRcMU/photo.jpg?sz=128", "display_name": "Posty Toasty", "link": "https://stackoverflow.com/users/11731022/posty-toasty"}, "edited": false, "score": 0, "creation_date": 1562102627, "post_id": 56859361, "comment_id": 100270305, "body": "Wow, I can&#39;t believe I overlooked that. I subconsciously was picking even numbers for my a value the whole time. That lead to a 0 in the denominator. Thanks"}, {"owner": {"reputation": 81300, "user_id": 296974, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0e26cfe3ac75cd582ca200fbc6fa0421?s=128&d=identicon&r=PG", "display_name": "glglgl", "link": "https://stackoverflow.com/users/296974/glglgl"}, "edited": false, "score": 1, "creation_date": 1562103341, "post_id": 56859361, "comment_id": 100270504, "body": "&quot;\u2026the program stops&quot; That is not guaranteed."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 33, "user_id": 11731022, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NiEiC-Y3MMs/AAAAAAAAAAI/AAAAAAAAB5s/H2WWl2vRcMU/photo.jpg?sz=128", "display_name": "Posty Toasty", "link": "https://stackoverflow.com/users/11731022/posty-toasty"}, "edited": false, "score": 1, "creation_date": 1562228402, "post_id": 56859361, "comment_id": 100314599, "body": "@PostyToasty, If you write <code>(2.0&#47;3.0)</code> you don&#39;t need to <code>((double)2&#47;(double)3)</code> making that way your code more readable.  The difference between floating point literals and integer is that they have a decimal dot somewhere in the number."}], "tags": [], "owner": {"reputation": 75, "user_id": 11720414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P3uoO.png?s=128&g=1", "display_name": "Humm", "link": "https://stackoverflow.com/users/11720414/humm"}, "is_accepted": true, "score": 0, "last_activity_date": 1562097881, "creation_date": 1562097881, "answer_id": 56859361, "question_id": 56859177, "link": "https://stackoverflow.com/questions/56859177/display-function-not-printing-any-results/56859361#56859361", "title": "Display function not printing any results", "body": "<pre><code>y = ((double)2 / (double)3) - y + z * x / (a % 2) + PI;\n</code></pre>\n\n<p>My first though is that a might be even, so that a%2 == 0, and you cannot divide by zero.\nAs soon as something/0 gets evaluated, the program stops.</p>\n\n<p>You can try to print something before and after this calculation to see if I'm right.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 11731022, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NiEiC-Y3MMs/AAAAAAAAAAI/AAAAAAAAB5s/H2WWl2vRcMU/photo.jpg?sz=128", "display_name": "Posty Toasty", "link": "https://stackoverflow.com/users/11731022/posty-toasty"}, "edited": false, "score": 0, "creation_date": 1562190375, "post_id": 56860993, "comment_id": 100305190, "body": "Thanks for the help. My only problem is the question specifically asked me to declare the r1, r2, r3 variables as integers. However, I suppose I could just typecast them as doubles, as they would still be declared as integers."}], "tags": [], "owner": {"reputation": 341, "user_id": 5644356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rAuEX.jpg?s=128&g=1", "display_name": "Brad Pitt", "link": "https://stackoverflow.com/users/5644356/brad-pitt"}, "is_accepted": false, "score": 0, "last_activity_date": 1562108472, "creation_date": 1562108472, "answer_id": 56860993, "question_id": 56859177, "link": "https://stackoverflow.com/questions/56859177/display-function-not-printing-any-results/56860993#56860993", "title": "Display function not printing any results", "body": "<p>This is a divide-by-zero issue introduced by the following function</p>\n\n<pre><code>double getResist(void)\n{\n    double resist = 0;\n    int r1 = 0, r2 = 0, r3 = 0;\n    printf(\"Enter three resistors:\\n\");\n    scanf(\"%d%d%d\", &amp;r1, &amp;r2, &amp;r3);\n\n    resist = 1 / (1 / r1 + 1 / r2 + 1 / r3);\n    return resist;\n}\n</code></pre>\n\n<p>I just debugged your program, you are inputing r1, r2 and r3 as integer. Thus, </p>\n\n<pre><code>1 / r1 + 1 / r2 + 1 / r3 = 0 !\n</code></pre>\n\n<p>There will be 'Floating point exception' here.</p>\n\n<p>The solution is to declare r1, r2 and r3 as double.</p>\n"}], "owner": {"reputation": 33, "user_id": 11731022, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NiEiC-Y3MMs/AAAAAAAAAAI/AAAAAAAAB5s/H2WWl2vRcMU/photo.jpg?sz=128", "display_name": "Posty Toasty", "link": "https://stackoverflow.com/users/11731022/posty-toasty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 56859361, "answer_count": 2, "score": 3, "last_activity_date": 1562108472, "creation_date": 1562097034, "last_edit_date": 1562103173, "question_id": 56859177, "link": "https://stackoverflow.com/questions/56859177/display-function-not-printing-any-results", "title": "Display function not printing any results", "body": "<p>I have written a <code>displayResults</code> function where I pass through all of my calculations into the arguments and print each line. \nThe console application stays open each time it is asking for data, but as soon as it gets to the <code>displayResults</code> function the window closes. </p>\n\n<p>I have already included the <code>system(\"Pause);</code> hoping it would keep the window open but it did not work.</p>\n\n<p>The function I am referring to:</p>\n\n<pre><code>void displayResults(double force, double volume, char encodeTxt, double distance,\ndouble tangent, double resist, double y)\n{\n    printf(\"The force = %lf\\n\", force);\n    printf(\"The volume = %lf\\n\", volume);\n    printf(\"The encoded character = %c\", encodeTxt);\n    printf(\"The distance = %lf\", distance);\n    printf(\"The tangent = %lf\", tangent);\n    printf(\"The resistance = %lf\", resist);\n    printf(\"The y value = %lf\", y);\n\n    system(\"Pause\");\n}    \n</code></pre>\n\n<p>Here is more of my code:</p>\n\n<pre><code>double getForce(void)\n{\n    double force = 0, mass = 0, accel = 0;\n    printf(\"Enter the mass:\\n\");\n    scanf(\"%lf\", &amp;mass);\n    printf(\"Enter the acceleration:\\n\");\n    scanf(\"%lf\", &amp;accel);\n\n    force = mass * accel;\n    return force;\n}\n\ndouble getVolume(void)\n{\n    double volume = 0, radius = 0, height = 0;\n    printf(\"Enter radius of cylinder:\\n\");\n    scanf(\"%lf\", &amp;radius);\n    printf(\"Enter height of cylinder:\\n\");\n    scanf(\"%lf\", &amp;height);\n\n    volume = PI * pow(radius, 2) * height;\n    return volume;\n}\n\nchar getEncode(void)\n{\n    char encodeTxt, plainTxt;\n    int shift = 0;\n    printf(\"Enter a character:\\n\");\n    scanf(\" %c\", &amp;plainTxt);\n    printf(\"Enter an integer\");\n    scanf(\"%d\", &amp;shift);\n\n    encodeTxt = (plainTxt - 'A') + 'a' - shift;\n    return encodeTxt;\n}\n\ndouble getDistance(void)\n{\n    double distance = 0, x1 = 0, x2 = 0, y1 = 0, y2 = 0;\n    printf(\"Enter first point:\\n\");\n    scanf(\"%lf%lf\", &amp;x1, &amp;y1);\n    printf(\"Enter second point:\\n\");\n    scanf(\"%lf%lf\", &amp;x2, &amp;y2);\n\n    distance = sqrt(pow(x1 - x2, 2) + pow(y1 - y2, 2));\n    return distance;\n}\n\ndouble getTangent(void)\n{\n    double tangent = 0, theta = 0;\n    printf(\"Enter the theta angle:\\n\");\n    scanf(\"%lf\", &amp;theta);\n\n    tangent = sin(theta) / cos(theta);\n    return tangent;\n}\n\ndouble getResist(void)\n{\n    double resist = 0;\n    int r1 = 0, r2 = 0, r3 = 0;\n    printf(\"Enter three resistors:\\n\");\n    scanf(\"%d%d%d\", &amp;r1, &amp;r2, &amp;r3);\n\n    resist = 1 / (1 / r1 + 1 / r2 + 1 / r3);\n    return resist;\n}\n\ndouble equation(void)\n{\n    double x = 0, y = 0, z = 0;\n    int a = 0;\n    printf(\"Enter the a value:\\n\");\n    scanf(\"%d\", &amp;a);\n    printf(\"Enter the x, y, z values:\\n\");\n    scanf(\"%lf%lf%lf\", &amp;x, &amp;y, &amp;z);\n\n    y = ((double)2 / (double)3) - y + z * x / (a % 2) + PI;\n    return y;\n}\n</code></pre>\n\n<p>And lastly my main function:</p>\n\n<pre><code>int main(void)\n{\n    double force = 0, volume = 0, distance = 0, \n    tangent = 0, resist = 0, y = 0;\n    char encodeTxt;\n\n    force = getForce();\n    volume = getVolume();\n    encodeTxt = getEncode();\n    distance = getDistance();\n    tangent = getTangent();\n    resist = getResist();\n    y = equation();\n    displayResults(force, volume, encodeTxt, distance, tangent, resist, y);\n    return 0;\n}\n</code></pre>\n\n<p>I expect the console to display my results but after asking for the last x, y z values from my equation function, it ceases to work.</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1562096977, "post_id": 56859134, "comment_id": 100268294, "body": "You&#39;re not doing anything with your array.  First thing you do in your function is reassign the pointer to it to somewhere else."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1562122163, "post_id": 56859134, "comment_id": 100273815, "body": "C is pass-by-value. When you pass a parameter to a function, the function receives a <i>copy-of</i> the variable. In the case of an array (which is converted to a pointer), the function receives a <i>copy-of</i> the pointer. (the copy contains the original memory address). However, you assign a new address to the <i>copy-of</i> the pointer and you return nothing (type <code>void</code>), so there is no way any changes made to the address of <code>arr</code> in <code>foo</code> will be seen back in <code>main()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 4, "last_activity_date": 1562096972, "creation_date": 1562096972, "answer_id": 56859169, "question_id": 56859134, "link": "https://stackoverflow.com/questions/56859134/can-anyone-say-why-the-array-is-not-changed-when-passed-to-a-function/56859169#56859169", "title": "Can anyone say why the array is not changed when passed to a function", "body": "<p>With <code>arr=&amp;i</code>, you change the local pointer to the array and let it point somewhere else; yet you do not change the original array's content.</p>\n\n<p>Write <code>arr[0]=10</code>, and it should give you the <code>1010</code> output.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10759752, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0U9R2JZQWz4/AAAAAAAAAAI/AAAAAAAAAII/nJcwpaAQU9c/photo.jpg?sz=128", "display_name": "Sriram Narayanan", "link": "https://stackoverflow.com/users/10759752/sriram-narayanan"}, "edited": false, "score": 0, "creation_date": 1562170131, "post_id": 56862203, "comment_id": 100296804, "body": "but i thought arrays are passed by reference by default"}, {"owner": {"reputation": 43, "user_id": 11091745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UB5G6.png?s=128&g=1", "display_name": "vandervinds", "link": "https://stackoverflow.com/users/11091745/vandervinds"}, "reply_to_user": {"reputation": 21, "user_id": 10759752, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0U9R2JZQWz4/AAAAAAAAAAI/AAAAAAAAAII/nJcwpaAQU9c/photo.jpg?sz=128", "display_name": "Sriram Narayanan", "link": "https://stackoverflow.com/users/10759752/sriram-narayanan"}, "edited": false, "score": 0, "creation_date": 1562178279, "post_id": 56862203, "comment_id": 100300511, "body": "@Sriram Narayanan see : <a href=\"https://stackoverflow.com/questions/2229498/passing-by-reference-in-c\" title=\"passing by reference in c\">stackoverflow.com/questions/2229498/passing-by-reference-in-&zwnj;&#8203;c</a>"}], "tags": [], "owner": {"reputation": 43, "user_id": 11091745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UB5G6.png?s=128&g=1", "display_name": "vandervinds", "link": "https://stackoverflow.com/users/11091745/vandervinds"}, "is_accepted": false, "score": 0, "last_activity_date": 1562179829, "last_edit_date": 1562179829, "creation_date": 1562121471, "answer_id": 56862203, "question_id": 56859134, "link": "https://stackoverflow.com/questions/56859134/can-anyone-say-why-the-array-is-not-changed-when-passed-to-a-function/56862203#56862203", "title": "Can anyone say why the array is not changed when passed to a function", "body": "<p>Basically what Stephan said.\nYou modified the arr[0]'s address to point to the address of i. When foo finished execution, it deleted the copy of arr. The original array was copied when you passed it to the function in the parameter (c is pass-by-value language)</p>\n"}], "owner": {"reputation": 21, "user_id": 10759752, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0U9R2JZQWz4/AAAAAAAAAAI/AAAAAAAAAII/nJcwpaAQU9c/photo.jpg?sz=128", "display_name": "Sriram Narayanan", "link": "https://stackoverflow.com/users/10759752/sriram-narayanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1562179829, "creation_date": 1562096835, "last_edit_date": 1562097038, "question_id": 56859134, "link": "https://stackoverflow.com/questions/56859134/can-anyone-say-why-the-array-is-not-changed-when-passed-to-a-function", "title": "Can anyone say why the array is not changed when passed to a function", "body": "<p>I think the output should be 10 10, but it is 10 1 and idk why.</p>\n\n<p>I tried assigning arr[0]=55 and it made i to be 55 idk why that either. Would  be glad to have an explanation</p>\n\n<pre><code>void foo(int arr[])\n{\n  int i=10;\n  arr=&amp;i;\n  printf(\"%d\",arr[0]);\n}\n\nint main() \n{\n  int a[4]={1,2,3,4};\n  foo(a);\n  printf(\"%d\",a[0]);\n  return 0;\n}\n</code></pre>\n\n<p>What i thought: 1010\nactual o/p= 101</p>\n"}, {"tags": ["c", "linux", "posix"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 6, "creation_date": 1562096113, "post_id": 56858983, "comment_id": 100267967, "body": "The <code>st_size</code> is the size of the file at that time, using the latest data in kernel buffer pool, or on disk if it is not currently in use."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1562096263, "post_id": 56858983, "comment_id": 100268020, "body": "Maybe open it exclusive then append to the end."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 5, "creation_date": 1562096476, "post_id": 56858983, "comment_id": 100268096, "body": "And the moment you return from your check, the result is useless.  If you want to ensure you atomically append to a file, use <code>O_APPEND</code> mode as designed."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1562096486, "post_id": 56858983, "comment_id": 100268100, "body": "Note that <code>lseek()</code> is a very lightweight system call; it does no I/O and simply changes a position in the in-memory control block for the file.  You&#39;re right that both outline solutions have a TOCTOU (time of check, time of use) problem because they&#39;re non-atomic.  I don&#39;t think there&#39;s an atomic call to do the job \u2014 positions of a file descriptor and size of a file are unrelated operations.  A major question is &quot;<b>why do you need to know this</b>&quot;?  If you use <code>O_APPEND</code>, all writes will be at the end.  If you use <code>pwrite()</code>, it will write where you specify."}, {"owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 4, "creation_date": 1562096545, "post_id": 56858983, "comment_id": 100268120, "body": "Out of curiosity, what would you do, not do, or do differently depending on whether the write position is or is not at the end? That might affect how we answer."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1562096681, "post_id": 56858983, "comment_id": 100268170, "body": "@JonathanLeffler <i>I don&#39;t think there&#39;s an atomic call to do the job</i> There isn&#39;t.  The POSIX way to be able to atomically append to a file while also being able to write to any location is to open it in append mode and use <code>pwrite()</code> to write to a desired offset. Unfortunately, that&#39;s broken on Linux, where <code>pwrite()</code> will append to a file in <code>O_APPEND</code> mode no matter what the offset passed to <code>pwrite()</code> is."}, {"owner": {"reputation": 906, "user_id": 247529, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ab9cfe155587e34ff18dd45f67e2bf0a?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/247529/nick"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1562096734, "post_id": 56858983, "comment_id": 100268196, "body": "@P__J__ , the whole point is to allow multi user access."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1562096745, "post_id": 56858983, "comment_id": 100268202, "body": "You&#39;re kidding, @AndrewHenle?  Linux is that broken?  That&#39;s ludicrous!  POSIX <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/pwrite.html\" rel=\"nofollow noreferrer\"><code>pwrite()</code></a>: <i>The <code>pwrite()</code> function shall be equivalent to <code>write()</code>, except that it writes into a given position and does not change the file offset (regardless of whether O_APPEND is set).</i>  So Linux is not implementing POSIX at this point.  That&#39;s a serious breakage, were I asked."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1562096858, "post_id": 56858983, "comment_id": 100268245, "body": "@JonathanLeffler Just in case you&#39;re serious:  <a href=\"http://man7.org/linux/man-pages/man2/pwrite.2.html#BUGS\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man2/pwrite.2.html#BUGS</a>  ;-)  &quot;However, on        Linux, if a file is opened with <code>O_APPEND</code>, <code>pwrite()</code> appends data to        the end of the file, regardless of the value of <code>offset</code>.&quot;"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1562096974, "post_id": 56858983, "comment_id": 100268292, "body": "Oh \u2026censored (throughly NSFW string of expletives omitted)\u2026 . That&#39;s a major screw-up.  I had been planning to use <code>pwrite()</code>.  I&#39;ve just stopped because it isn&#39;t portable.  Hell, that&#39;s a Microfaustian sort of stupid trick to implement.  (Yeah, it&#39;s only a problem if <code>O_APPEND</code> is used when opening the file, and likely that&#39;d not be a problem, but it is still a gratuitous breakage of the standard worthy of a vintage-2000 Microsoft implementation.)"}, {"owner": {"reputation": 906, "user_id": 247529, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ab9cfe155587e34ff18dd45f67e2bf0a?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/247529/nick"}, "reply_to_user": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 1, "creation_date": 1562097061, "post_id": 56858983, "comment_id": 100268326, "body": "@Ken Thomases ,  if not  at the end, then there should not be any write at all (another process appended to the file and the data should not be overwritten but read and hundled in differenent way). The append mode would silently append to the end, possible mixing data that comes from several processes. No, mutex is not suitable solution unfortunately."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562097148, "post_id": 56858983, "comment_id": 100268354, "body": "@JonathanLeffler I <i>think</i> you can open the file twice - one descriptor with <code>O_APPEND</code>, one without."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562097216, "post_id": 56858983, "comment_id": 100268376, "body": "Yeah, but I shouldn&#39;t have to worry about it.  POSIX says so.  Oh well.  Thanks a <i>lot</i> for the information; I would not have gone looking for that bug for a long, long time!"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1562097225, "post_id": 56858983, "comment_id": 100268380, "body": "@Nick <i>The append mode would silently append to the end, possible mixing data that comes from several processes.</i>  Append is atomic, so if you use <code>write()</code>, each full write is <b>supposed</b> to be atomic. That probably has an effective limit, see <a href=\"https://stackoverflow.com/questions/1154446/is-file-append-atomic-in-unix\" title=\"is file append atomic in unix\">stackoverflow.com/questions/1154446/&hellip;</a>  But note that calls such as <code>fwrite()</code> do not translate one-to-one to the actual system call that writes the data."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1562097251, "post_id": 56858983, "comment_id": 100268393, "body": "@Nick atomicity implies mutual exclusion. For the time you append to the end other processes cannot do the same. No miracles"}, {"owner": {"reputation": 906, "user_id": 247529, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ab9cfe155587e34ff18dd45f67e2bf0a?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/247529/nick"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1562097559, "post_id": 56858983, "comment_id": 100268515, "body": "@Andrew Henle, atomic for single write, but not several consequent write calls."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1562097608, "post_id": 56858983, "comment_id": 100268536, "body": "If you ensure that your <code>write</code> call writes all the data in one swell foop, there&#39;ll be no problem with <code>O_APPEND</code> mode and interleaved output. If you try to dribble your data out to a file descriptor with multiple write operations, you&#39;ll have problems.  You&#39;ll never be able to tell whether another thread or process has already broken the condition you require. You&#39;re best off trusting the <code>O_APPEND</code> mode operation. If you have multiple open file descriptions (roughly, multiple open file descriptors) for the same file, then you&#39;ll have problems too \u2014 it&#39;ll be safest if they&#39;re all <code>O_APPEND</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562098026, "post_id": 56858983, "comment_id": 100268701, "body": "I observe that POSIX is silent on how the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/dprintf.html\" rel=\"nofollow noreferrer\"><code>dprintf()</code></a> function writes to the file descriptor \u2014 whether it is analogous to <code>sprintf()</code> plus a single <code>write()</code> or whether it can write multiple bits and pieces to the file descriptor as it processes the formatting for a single call."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562099361, "post_id": 56858983, "comment_id": 100269243, "body": "@JonathanLeffler <i>I observe that POSIX is silent on how the <code>dprintf()</code> function writes to the file descriptor</i> The <a href=\"https://github.com/bminor/glibc/blob/7628a1b05adb1e4c6857b87c6f8b71a1d0b1d72c/stdio-common/dprintf.c\" rel=\"nofollow noreferrer\">GLIBC implementation</a> effectively does an <code>fdopen()</code> in the descriptor, so it&#39;s likely to do multiple underlying <code>write()</code> calls.  Writing a version that does expand via <code>vs[n]printf()</code> and call <code>write()</code> <b>once</b> shouldn&#39;t be too hard."}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "edited": false, "score": 1, "creation_date": 1562099710, "post_id": 56858983, "comment_id": 100269374, "body": "@Nick : <i>atomic for single write, but not several consequent write calls</i>  do you mean, for example, that several processes are reading a data source such that they might all read the same data and you want only one of them to write that data to the output file in question?  you want the other readers to say &quot;oh, someone else beat me to it&quot; and behave differently?"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1562110203, "post_id": 56858983, "comment_id": 100272013, "body": "Is using <a href=\"http://man7.org/linux/man-pages/man3/feof.3p.html\" rel=\"nofollow noreferrer\"><code>feof</code></a> (via <code>fdopen</code>) acceptable for your use-case? \u2014 I understand that this isn\u2019t a \u201clow-level\u201d POSIX function but it will effectively do under the hood what you\u2019re suggesting, and which you\u2019re not happy with. Otherwise the canonical way to test for EOF at the current pointer is to combine this test with a <code>read</code> operation."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1562245242, "post_id": 56884208, "comment_id": 100324006, "body": "<i>you will end with a <code>1000013</code> bytes file, but that uses only one or two blocks of disk space.</i>  Only if the underlying file system supports <a href=\"https://en.wikipedia.org/wiki/Sparse_file\" rel=\"nofollow noreferrer\">sparse files</a>.  Not all filesystems do."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1562245740, "post_id": 56884208, "comment_id": 100324314, "body": "UNIX, since almost its origins, does support it.  My BSD system tells me around 4Mb of disk usage (st_blocksz * st_blocks) but I&#39;m aware that it does support it.  The idea is to know that at least, the <code>st_size</code> is a good and reliable way to know."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1562249558, "post_id": 56884208, "comment_id": 100326387, "body": "@AndrewHenle, at&amp;t unix v7 supports sparse files, so I&#39;m afraid almost all unices do.  Of course, that&#39;s not true in non native filesystems (like iso cdrom images, or rare filesystems)"}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": -1, "last_activity_date": 1562236239, "last_edit_date": 1562236239, "creation_date": 1562230616, "answer_id": 56884208, "question_id": 56858983, "link": "https://stackoverflow.com/questions/56858983/is-there-a-fast-and-reliable-posix-way-to-check-if-current-file-offset-is-at-the/56884208#56884208", "title": "Is there a fast and reliable POSIX way to check if current file offset is at the end of file?", "body": "<blockquote>\n  <p>However does <code>st-&gt;st_size</code> reflect the actual size but not the disk file size, i.e. not including kernel buffered data?</p>\n</blockquote>\n\n<p>I don't understand what you mean with the <em>kernel buffered data</em>. The number in <code>st-&gt;st_size</code> reflects the size of the file in chars.  So, if the file has <code>1000000</code> chars, the number that <code>st-&gt;st_size</code> will be <code>1000000</code>, with character positions from <code>0</code> to <code>999999</code>.</p>\n\n<p>There are two ways to get the file size in POSIX systems:</p>\n\n<ul>\n<li>do an <code>off_t saved = lseek(fd, 0, SEEK_END);</code>, which returns the actual position (you must save it, to recover it later), and a second call <code>off_t file_size = lseek(fd, saved, SEEK_SET);</code> which returns to the position you were before, but returns as a number the position you were before (this is the last position of the file, after the last character)  If you check this, this will match with the value returned by <code>st-&gt;st_size</code>.</li>\n<li>do a <code>stat(2)</code> to the file descriptor to get the value you mentioned up.</li>\n</ul>\n\n<p>The first way has some drawbacks if you have multiple threads or processes sharing the file descriptor with you (by means of a <code>dup(2)</code> system call, or a <code>fork()</code>ed process)  if they do a <code>read(2)</code>, <code>write(2)</code>, or <code>lseek(2)</code> call between your two <code>lseek</code> calls, you'll lose the position you had on the file previously and will be unable to recover to the correct place.  That is weird, and makes the first approach non recommendable.</p>\n\n<p>Last, there's no relationship on the file buffering done at the kernel with the file size.  You always get the true file size on <code>stat(2)</code>.  The only thing that can be confusing you is the savings done at the kernel when you run the following snippet (but this is transparent to you and you don't have to account for it, except if you are going to copy the file to another place).  Just run this tiny program:</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\nint main()\n{\n    int fd = open(\"file\", O_WRONLY | O_CREAT | O_TRUNC, 0666);\n    lseek(fd, 1000000, SEEK_SET);\n    char string[] = \"Hello, world\";\n    write(fd, string, sizeof string);\n    close(fd);\n}\n</code></pre>\n\n<p>in which you will end with a <code>1000013</code> bytes file, but that uses only one or two blocks of disk space.  That's a <em>holed</em> file, in which there are <code>1000000</code> zero bytes before the string your wrote, and the system doesn't allocate blocks in the disk for it.  Only when you write on those blocks, the system will fill the parts you write with new blocks to save your data... but until then, the system will show you zero bytes, but they are not stored anywhere.</p>\n\n<pre><code>$ ll file\n-rw-r-----  1 lcu  lcu  1000013  4 jul.  11:52 file\n$ hd file\n[file]:\n00000000: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 :................\n*\n000f4240: 48 65 6c 6c 6f 2c 20 77 6f 72 6c 64 00          :Hello, world.\n000f424d\n$ _\n</code></pre>\n"}], "owner": {"reputation": 906, "user_id": 247529, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ab9cfe155587e34ff18dd45f67e2bf0a?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/247529/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 351, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1562236239, "creation_date": 1562096002, "last_edit_date": 1562096184, "question_id": 56858983, "link": "https://stackoverflow.com/questions/56858983/is-there-a-fast-and-reliable-posix-way-to-check-if-current-file-offset-is-at-the", "title": "Is there a fast and reliable POSIX way to check if current file offset is at the end of file?", "body": "<p>How to check if the current write position is at the end of file using low-level POSIX functions? The first idea is to use lseek and fstat:</p>\n\n<pre><code>off_t sk;\nstruct stat st;\nsk = lseek (f, 0, SEEK_CUR);\nfstat (f, &amp;st);\nreturn st-&gt;st_size == sk;\n</code></pre>\n\n<p>However does <code>st-&gt;st_size</code> reflect the actual size but not the disk file size, i.e. not including kernel buffered data?</p>\n\n<p>Another idea is to use</p>\n\n<pre><code>off_t scur, send;\nscur = lseek (f, 0, SEEK_CUR);\nsend = lseek (f, 0, SEEK_END);\nlseek (f, scur, SEEK_START);\nreturn scur == send;\n</code></pre>\n\n<p>but this doesn't seems to be fast and adequate way.    </p>\n\n<p>Also both ways seem to be non-atomic, so if there is another process appending to the file, the size could be changed after checking current offset.</p>\n"}, {"tags": ["c", "eclipse", "debugging", "gdb", "stm32f4"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1562095945, "post_id": 56858961, "comment_id": 100267911, "body": "Your <code>delay</code> is doing nothing meaningful from compiler&#39;s point of view and likely getting optimized."}, {"owner": {"reputation": 163, "user_id": 4989733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d07f009de255338372035a39eb4b42bd?s=128&d=identicon&r=PG&f=1", "display_name": "Shankar S", "link": "https://stackoverflow.com/users/4989733/shankar-s"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1562096094, "post_id": 56858961, "comment_id": 100267961, "body": "Thanks. do you think I should add some optimization flag when building it? or what would be the right approach."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1562096120, "post_id": 56858961, "comment_id": 100267972, "body": "The right approach is to use hardware timers."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1562096284, "post_id": 56858961, "comment_id": 100268031, "body": "Anyway in function <code>delay()</code> I suggest changing everything to <code>uint64_t</code>, and perform the multiplication <i>before</i> the division. A software loop is a crude solution."}], "answers": [{"tags": [], "owner": {"reputation": 6873, "user_id": 5131711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z5oP7.png?s=128&g=1", "display_name": "followed Monica to Codidact", "link": "https://stackoverflow.com/users/5131711/followed-monica-to-codidact"}, "is_accepted": false, "score": 0, "last_activity_date": 1562097089, "creation_date": 1562097089, "answer_id": 56859188, "question_id": 56858961, "link": "https://stackoverflow.com/questions/56858961/stm32-blink-code-only-works-when-stepping-on-debug-mode/56859188#56859188", "title": "STM32 blink code only works when stepping on debug mode", "body": "<p>You need a small delay after enabling the GPIO clock. Put a <code>__DSB()</code> call between enabling the clock and accessing the GPIO registers.</p>\n\n<p>See the product errata document for details.</p>\n"}, {"comments": [{"owner": {"reputation": 163, "user_id": 4989733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d07f009de255338372035a39eb4b42bd?s=128&d=identicon&r=PG&f=1", "display_name": "Shankar S", "link": "https://stackoverflow.com/users/4989733/shankar-s"}, "edited": false, "score": 0, "creation_date": 1562615832, "post_id": 56860971, "comment_id": 100423593, "body": "Thank you all for your answers. Learnt a lot. Implementing the delay() using SysTick() helped. Referred to this blog as well to get me started: <a href=\"https://patrickleyman.be/blog/stm32f407-delay-with-systick/\" rel=\"nofollow noreferrer\">patrickleyman.be/blog/stm32f407-delay-with-systick</a>"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": true, "score": 1, "last_activity_date": 1562108271, "creation_date": 1562108271, "answer_id": 56860971, "question_id": 56858961, "link": "https://stackoverflow.com/questions/56858961/stm32-blink-code-only-works-when-stepping-on-debug-mode/56860971#56860971", "title": "STM32 blink code only works when stepping on debug mode", "body": "<ol>\n<li><p>Be consistent. If you set the clock using directly registers, do not call HAL cube generated functions like <code>SystemCoreClockUpdate();</code> it is very likely the <code>SystemCoreClock</code> will not have the value you think it has</p></li>\n<li><p>When doing blocking delays I advice using volatile variables as they will not be removed by the compiler. There is no need of using the 64 bits variables unless you want many minutes delays. Try to do not block. use SysTick (or any other timer) interrupt to implement delays.</p></li>\n</ol>\n\n<p>example </p>\n\n<pre><code>void delay(volatile uint32_t delay)\n{\n    while(delay--);\n}\n</code></pre>\n\n<p>or for more precise control inline assembly:</p>\n\n<pre><code>void delay1(uint32_t delay)\n{\n    while(delay--)\n    {\n        asm volatile(\"\" : : \"r\"(delay) : \"memory\");\n    }\n}\n</code></pre>\n\n<p>which leads to the code: </p>\n\n<pre><code>delay:\n  sub sp, sp, #8\n  str r0, [sp, #4]\n.L2:\n  ldr r3, [sp, #4]\n  sub r2, r3, #1\n  cmp r3, #0\n  str r2, [sp, #4]\n  bne .L2\n  add sp, sp, #8\n  bx lr\ndelay1:\n.L6:\n  subs r0, r0, #1\n  bxcc lr\n  b .L6\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 4989733, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d07f009de255338372035a39eb4b42bd?s=128&d=identicon&r=PG&f=1", "display_name": "Shankar S", "link": "https://stackoverflow.com/users/4989733/shankar-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1775, "favorite_count": 0, "accepted_answer_id": 56860971, "answer_count": 2, "score": 1, "last_activity_date": 1562108271, "creation_date": 1562095865, "question_id": 56858961, "link": "https://stackoverflow.com/questions/56858961/stm32-blink-code-only-works-when-stepping-on-debug-mode", "title": "STM32 blink code only works when stepping on debug mode", "body": "<p>I am trying to run a simple blink program on a STM32 board based on STM32F413RG. The led lights up and only toggles when stepping through, not when continuing without breakpoint or running freely on Release mode.</p>\n\n<p>I have setup the eclipse(4.11) to debug the program using a J-link hardware debugger. The code uploads and the LED programmed lights up, but I can see it toggle only when manually stepping through. It does not run without breakpoints.</p>\n\n<p>Sharing my code below where I have setup the clock to be sourced from PLL running on 32 MHz and trying to blink the LED connected to Port B pin 1 every 0.5 second.</p>\n\n<p>One more interesting thing is, Even if I am able to set a breakpoint to see inside the delay() method, the debugger never stops at it / seems to jump across that line of code when single-stepping. Why does it so?</p>\n\n<pre><code>void setupClocks()\n{\n    // we want to use the 24000000 HSE clock (xtal) as the base\n     RCC-&gt;CR |= RCC_CR_HSEON;\n    // so wait for it to be ready\n    while ((RCC-&gt;CR &amp; RCC_CR_HSERDY) == 0) {}\n    enter code here\n\n\n    // now configure the PLL (HSE / 12 * 96 /6) gives 32 MHz\n    RCC-&gt;PLLCFGR |= RCC_PLLCFGR_PLLSRC_HSE;\n    RCC-&gt;PLLCFGR &amp;= ~RCC_PLLCFGR_PLLM_Msk;\n    RCC-&gt;PLLCFGR |= (12)&lt;&lt; RCC_PLLCFGR_PLLM_Pos;\n    RCC-&gt;PLLCFGR &amp;= ~RCC_PLLCFGR_PLLN_Msk;\n    RCC-&gt;PLLCFGR |= (96)&lt;&lt; RCC_PLLCFGR_PLLN_Pos; // 32 MHz\n\n    RCC-&gt;PLLCFGR &amp;= ~RCC_PLLCFGR_PLLP_Msk;\n\n    RCC-&gt;PLLCFGR |= RCC_PLLCFGR_PLLP_1; // 6\n\n    RCC-&gt;CR |= RCC_CR_PLLON;\n\n // wait for PLL to be ready\n    while ((RCC-&gt;CR &amp; RCC_CR_PLLRDY) == 0) {}\n\n    // now setup the AHB1\n    // 1/2 of system clock (48 MHz)\n    RCC-&gt;CFGR |= RCC_CFGR_PPRE1_2;\n\n    // select PLL (clocked from HSE)\n    RCC-&gt;CFGR |= RCC_CFGR_SW_1;\n\n    //reset the ones we use\n    RCC-&gt;AHB1RSTR = RCC_AHB1RSTR_GPIOARST;\n    RCC-&gt;AHB1RSTR = RCC_AHB1RSTR_GPIOBRST;\n    RCC-&gt;AHB1RSTR = RCC_AHB1RSTR_GPIOCRST;\n    RCC-&gt;AHB1RSTR = RCC_AHB1RSTR_GPIODRST;\n    RCC-&gt;AHB1RSTR = 0;\n\n    SystemCoreClockUpdate();\n}\n\nvoid initLED()\n{\n    // enable port B clock\n    RCC-&gt;AHB1ENR |= RCC_AHB1ENR_GPIOBEN;\n\n    // set as output for Port B pin 1\n    GPIOB-&gt;MODER |= GPIO_MODER_MODER1_0;\n\n   // start with MP10 LED on\n\n   GPIOB-&gt;ODR = GPIO_ODR_ODR_1;\n}\n\nvoid delay(uint32_t microsec)\n{\n    // wait a bit\n    uint32_t counter =  (microsec * (SystemCoreClock / 1000000U));\n    while(counter != 0U)\n    {\n      counter--;\n    }\n}\nvoid blinkCount(int count)\n{\n    for (int i = 0; i &lt; count; ++i)\n    {\n        GPIOB-&gt;ODR = ~GPIO_ODR_ODR_1 ;\n        delay(500000);\n        GPIOB-&gt;ODR = GPIO_ODR_ODR_1;\n        delay(500000);\n    }\n    delay(1000000);\n}\n\nint main()\n{\n     setupClocks();\n     initLED();\n\n     while(1)\n     {\n         blinkCount(1);\n         delay(1000000);\n     }\n\n    return 0;\n}\n</code></pre>\n\n<p>Expecting to blink the led as per desired frequency when the program is run without breakpoints or release mode, but the led activity is only visible when stepping through during debug mode.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "edited": false, "score": 9, "creation_date": 1562095565, "post_id": 56858877, "comment_id": 100267771, "body": "if (c != &#39; &#39; || c!= &#39;\\t&#39;)  Always evaluates to True"}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "edited": false, "score": 0, "creation_date": 1562100290, "post_id": 56858877, "comment_id": 100269586, "body": "as a side note, it looks to me like you probably want your <code>if (c == &#39;\\n&#39;)</code> line <i>inside</i> the <code>while {}</code> loop, but please note that as-written, it is <i>outside</i> the <code>while {}</code> loop, thus having no effect on the input / output"}], "answers": [{"tags": [], "owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "is_accepted": false, "score": 2, "last_activity_date": 1562096293, "creation_date": 1562096293, "answer_id": 56859026, "question_id": 56858877, "link": "https://stackoverflow.com/questions/56858877/how-to-create-a-program-to-replace-multiple-blanks-tabs-by-single-blanks-tabs/56859026#56859026", "title": "How to create a program to replace multiple blanks/tabs by single blanks/tabs?", "body": "<p>Since your first if statement will always evaluate to true putchar will be called the first time and p will be set to 0.  Since p is 0 the 2nd if statement will always be true.  This will call putchar a 2nd time.  You may want to use isspace().  It will check for white-space characters.</p>\n"}, {"tags": [], "owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "is_accepted": false, "score": 5, "last_activity_date": 1562096303, "creation_date": 1562096303, "answer_id": 56859030, "question_id": 56858877, "link": "https://stackoverflow.com/questions/56858877/how-to-create-a-program-to-replace-multiple-blanks-tabs-by-single-blanks-tabs/56859030#56859030", "title": "How to create a program to replace multiple blanks/tabs by single blanks/tabs?", "body": "<p>The problem is on this line here:</p>\n\n<pre><code>if (c != ' ' || c!= '\\t')\n</code></pre>\n\n<p>Let's look at three cases:</p>\n\n<ul>\n<li><code>c == ' '</code> is true. This means that <code>c != '\\t'</code> is also true, so the if statement executes. </li>\n<li><code>c == '\\t'</code> is true. This means that <code>c != ' '</code> is also true, so the if statement executes. </li>\n<li><code>c</code> is neither of those. This means that <code>c != ' '</code> is true, so the if statement executes. </li>\n</ul>\n\n<p>In every possible case, the if statement executes. </p>\n\n<p><strong>Proposed solution:</strong> Re-write it as</p>\n\n<pre><code>if (c != ' ' &amp;&amp; c != '\\t')\n</code></pre>\n\n<p>using '&amp;&amp;' instead of '||'. </p>\n"}], "owner": {"reputation": 1, "user_id": 11109519, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3rgph3zSQbM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reFsIoGjE1DeJx0S-GL2sXzsUCZ1A/mo/photo.jpg?sz=128", "display_name": "pptx", "link": "https://stackoverflow.com/users/11109519/pptx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1562103427, "creation_date": 1562095422, "last_edit_date": 1562103427, "question_id": 56858877, "link": "https://stackoverflow.com/questions/56858877/how-to-create-a-program-to-replace-multiple-blanks-tabs-by-single-blanks-tabs", "title": "How to create a program to replace multiple blanks/tabs by single blanks/tabs?", "body": "<p>I'm trying to recreate a program in my textbook, with the syntax shown below. However when I add in the line for detecting tabs  [if ((c=' ' || c='\\t'] (and the inverted version above , and printing only one tab at once, it shifts the entire text a few more'tabs' to the left. If I delete mentions of tabs, it works perfectly with blanks. Hope this helps.</p>\n\n<p>I tried to do this question before from my book, but ended up focusing on answers from this site (<a href=\"https://clc-wiki.net/wiki/K%26R2_solutions:Chapter_1:Exercise_9\" rel=\"nofollow noreferrer\">https://clc-wiki.net/wiki/K%26R2_solutions:Chapter_1:Exercise_9</a>) For being concise, I won't post the code that worked best, but it's the one at the very bottom of the page if you want to consult it. Afterwards I changed my sight towards a code (a part of it is listed below), which let be able to answer the Q with tabs also which which wasn't originally in the Q.</p>\n\n<pre><code>int main(void)\n{\n    int c, p;\n    p = 0;\n\n    while ((c = getchar()) != EOF)      \n\n    {\n        if (c != ' ' || c!= '\\t')\n        {\n            putchar(c);\n            p= 0;\n        }\n\n         if ((c == ' ' || c== '\\t') &amp;&amp; p&lt;1) \n        {\n                putchar(c);\n                p++;\n        }\n\n    }   if (c == '\\n')\n        p = 0;\n}\n</code></pre>\n\n<p>______________________________________________________________________________Another example from the site I listed, which I thought syntax was concise and interesting. </p>\n\n<pre><code>while ((c = getchar()) != EOF) \n{ if (c == ' ' || c == '\\t') \n{ while ((c = getchar()) == ' ' || c == '\\t')\n</code></pre>\n\n<hr>\n\n<p>No error messages come up, but in an instance like ' [tab][tab]hello   world\n, I expect' [tab]hello world'. But somehow I get '[tab][tab][tab][tab]hello    world. It seems to increase the output by 2x including both tabs and blanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1562093998, "post_id": 56858585, "comment_id": 100267209, "body": "yes, with a macro"}, {"owner": {"reputation": 1809, "user_id": 7339171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e618ef1f932f57ce1008799082f8db29?s=128&d=identicon&r=PG&f=1", "display_name": "CoffeeTableEspresso", "link": "https://stackoverflow.com/users/7339171/coffeetableespresso"}, "edited": false, "score": 0, "creation_date": 1562094961, "post_id": 56858585, "comment_id": 100267570, "body": "C doesn&#39;t support default parameters. Macros are the only way to do this"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1562108927, "post_id": 56858585, "comment_id": 100271767, "body": "In C++ that doesn&#39;t do what you want; it will always display the line where the declaration is."}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1562096204, "post_id": 56858644, "comment_id": 100268004, "body": "<i>You can even support variable argument functions in C99 with variadic macros as a frontend.</i> And if you&#39;re stuck with an ancient compiler, it&#39;s possible to support variable argument functions without C99&#39;s variadic macros if you have to - given the logging function <code>LOG( const char *fmt, ...)</code>, have the <code>LOG</code> macro expand to <code>log_step_one(__FILE__, __LINE__)</code> and have <code>log_step_one()</code> return a function pointer to <code>log_step_two( const char *fmt, ... )</code>.  <code>log_step_one()</code> saves the arguments, <code>log_step_two()</code> retrieves them."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 6, "last_activity_date": 1562094205, "creation_date": 1562094205, "answer_id": 56858644, "question_id": 56858585, "link": "https://stackoverflow.com/questions/56858585/implicitly-pass-arguments/56858644#56858644", "title": "Implicitly pass arguments", "body": "<p>use a macro in your code, to call an underlying function</p>\n\n<pre><code>#define func(arg) real_func(__FILE__,__LINE__,arg)\n</code></pre>\n\n<p>where <code>real_func</code> is</p>\n\n<pre><code>void real_func(const char *file, int line, int arg);\n</code></pre>\n\n<p>In your code, when you call <code>func(12)</code>, it expands to a call to <code>real_func</code>, with actual file path and line of the call. You can even support variable argument functions in C99 with variadic macros as a frontend.</p>\n"}], "owner": {"reputation": 61, "user_id": 9754170, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Z0RI_7o-GkQ/AAAAAAAAAAI/AAAAAAAAAO0/FrQS8o5PEgQ/photo.jpg?sz=128", "display_name": "William Walter", "link": "https://stackoverflow.com/users/9754170/william-walter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 56858644, "answer_count": 1, "score": 3, "last_activity_date": 1562094304, "creation_date": 1562093904, "last_edit_date": 1562094304, "question_id": 56858585, "link": "https://stackoverflow.com/questions/56858585/implicitly-pass-arguments", "title": "Implicitly pass arguments", "body": "<p>I'm working on a custom unit-testing framework that doesn't display the filename/line numbers of failed tests. I know I could require them as arguments for the <code>report_results</code> function but that seems like a lot of text. </p>\n\n<p>Is there a way to make it so that <code>__FILE__</code> and <code>__LINE__</code> are always passed with the function, even if I don't pass them when I call it? </p>\n\n<p>You can do something like this in C++:</p>\n\n<pre><code>void func(char *file=__FILE__, int line=__LINE__)(int more_args) {}\n</code></pre>\n"}, {"tags": ["c", "gbdk"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 5, "creation_date": 1562093955, "post_id": 56858549, "comment_id": 100267191, "body": "In early versions of C the compiler required variables to be defined at the start of a function, before any code statements."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 4, "creation_date": 1562094165, "post_id": 56858549, "comment_id": 100267277, "body": "Looks like lcc is a C89 compiler. Mixing declarations with code is a feature introduced with C99 (and a syntax error in C89)."}, {"owner": {"reputation": 283, "user_id": 6233034, "user_type": "registered", "profile_image": "https://graph.facebook.com/1565182523782524/picture?type=large", "display_name": "SooBaccaCole", "link": "https://stackoverflow.com/users/6233034/soobaccacole"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1562094625, "post_id": 56858549, "comment_id": 100267443, "body": "Thanks @WeatherVane and Jens! I&#39;ll have to do more research on C89 compilers then. Sucks that the most prominent tutorials are for the C99 compiler. :P  They really should let you @ more than one user in a comment so I can reference both of you two properly."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1562094705, "post_id": 56858549, "comment_id": 100267476, "body": "I guessed it was an old development tool."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1562095091, "post_id": 56858549, "comment_id": 100267613, "body": "You could have written another comment for @Jens."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1562136447, "post_id": 56858549, "comment_id": 100277679, "body": "Maybe lcc has an option for a c99 mode or at least to allow mixing declarations with code? Studying its options may prove helpful. Otherwise just move all declarations to the start of a block."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1586815584, "post_id": 56858549, "comment_id": 108262465, "body": "No tutorials for GBDK should be using C99. The SDCC compiler doesn&#39;t support anything but C89. (also, <code>lcc</code> is just the wrapper)"}], "owner": {"reputation": 283, "user_id": 6233034, "user_type": "registered", "profile_image": "https://graph.facebook.com/1565182523782524/picture?type=large", "display_name": "SooBaccaCole", "link": "https://stackoverflow.com/users/6233034/soobaccacole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1562094164, "creation_date": 1562093701, "last_edit_date": 1562094164, "question_id": 56858549, "link": "https://stackoverflow.com/questions/56858549/gbdk-c-compiler-parsing-errors-why-wont-it-let-me-declare-variables-at-such-sp", "title": "GBDK C-Compiler Parsing Errors: Why won&#39;t it let me declare variables at such specific places?", "body": "<p>I am currently learning C in order to program the original Game Boy using the GBDK library &amp; C Compiler. For whatever reason, the C Compiler continues to run into parser errors whenever I try to declare variables within certain parts of my main function and whenever I try to declare variables within other functions. This may be an issue with there not being enough memory space to store these variables in, so the parser creates a max number of variables..? I have no idea.</p>\n\n<p>I've attempted to utilize different data-types at the lines indicated by the error logs to be the issues, (see below). <strike>I also have attempted to move where these variables are being declared, to no avail.</strike> <strong>Edit: To be more specific, I altered the order that some of the variables were being declared, but it only swapped what the token the parse error said it had an issue with. The problem is definitely related to the order of declaration somehow, but only in that it occurs after a certain number of variables have been declared.</strong></p>\n\n<p>Here is my source code:</p>\n\n<p>'''</p>\n\n<pre><code>#include &lt;gb/gb.h&gt;\n#include &lt;stdio.h&gt;\n#include \"playerSprites.c\"\n#include \"levelTileset.c\"\n#include \"levelOne.c\"\n\n#define TRUE 1\n#define FALSE 0\n\n//Entity = x, y, sprID, direction, timer, frame, *sprites, state, type, speed, lspr, cspr, &amp; damage.\ntypedef struct Entity {\n    UBYTE x;\n    UBYTE y;\n    UBYTE sprID; //Sprite ID\n    BYTE direction;\n    UWORD timer;\n    UBYTE frame;\n    UBYTE state; //0x80, 0x40, &amp; 0x20 = HP/Pickup ID; 0x10, 0x08, 0x04, 0x02 = Score; 0x01 = State. --&gt; For Non-Player Entities\n    //0x80, 0x40, 0x20, &amp; 0x10 = HP; 0x08, 0x04, 0x02, &amp; 0x01 = AP. --&gt; For Player\n    UBYTE type; //0 = Player; 1 = Pushblock; 2 = Chasing Enemy; 3 = Turret Enemy; 4 = Fleeing Enemy; 5 = Pickup; 6 = Projectile; 7 = Explosive.\n    UWORD speed;\n    UBYTE lspr; //Last Sprite Index\n    UBYTE cspr; //Current Sprite Index\n    UBYTE damage;\n} Entity;\n\n//PlayerData = level, score, deaths, kills, secretsFound, overallTime[2], max_HP_AP, weapons, multipliers, cooldown, activeWeapon, powerupTimer, &amp; currentPowerup.\ntypedef struct SaveData {\n    UBYTE level; //Current level.\n    UWORD score; //Total score of player.\n    UWORD deaths; //Number of times player has died.\n    UWORD kills; //Number of enemies killed.\n    UBYTE secretsFound;\n    UWORD overallTimeH; //Overall time spent playing for this save file. (HIGH)\n    UWORD overallTimeL; //Overall time spent playing for this save file. (LOW)\n    UBYTE max_HP_AP; //0x80, 0x40, 0x20, &amp; 0x10 = Max HP; 0x08, 0x04, 0x02, &amp; 0x01 = Max AP.\n    UBYTE weapons; //0x80 &amp; 0x40 = Quake; 0x20 &amp; 0x10 = Beam; 0x08 &amp; 0x04 = Spreadshot; 0x02 &amp; 0x01 = Boomer.\n    UBYTE multipliers; //0x80 &amp; 0x40 = Damage Multiplier; 0x20 &amp; 0x10 = Speed Multiplier; 0x08 &amp; 0x04 = Point Collection Multiplier; 0x02 &amp; 0x01 = Weapon Cooldown Multiplier.\n    UBYTE cooldown; //Used during combat to determine whether or not the player is able to use the currently selected weapon. Each weapon has a different cooldown rate. This value gets reset to 0 every time the player switches to a different weapon and when the game is saved at the end of each level.\n    UBYTE activeWeapon;\n    UBYTE powerupTimer;\n    UBYTE currentPowerup; //0 = None, 1 = Double Damage, 2 = Half Cooldown Time, 3 = Invincibility, 4 = Double Points, 5 = Double Speed.\n} SaveData;\n\nvoid apply_input(Entity *player);\nvoid updatePlayerAnimation(Entity *player);\n\nvoid main()\n{\n    static Entity player;\n\n    player.x = 8U;\n    player.y = 16U;\n    player.sprID = 0U;\n    player.direction = 2;\n    player.timer = 0U;\n    player.frame = 0U;\n    player.lspr = 0U;\n    player.cspr = 0U;\n    player.state = 0x33U;\n    player.type = 0U;\n    player.speed = 4U;\n    player.lspr = 0U;\n    player.cspr = 0U;\n    player.damage = 1U;\n\n    SaveData player_data;\n\n    player_data.level = 0U;\n    player_data.score = 0U;\n    player_data.deaths = 0U;\n    player_data.kills = 0U;\n    player_data.secretsFound = 0U;\n    player_data.overallTimeH = 0U;\n    player_data.overallTimeL = 0U;\n    player_data.max_HP_AP = 0x33U;\n    player_data.weapons = 0x00U;\n    player_data.multipliers = 0x55U;\n    player_data.cooldown = 0U;\n    player_data.activeWeapon = 0U;\n    player_data.powerupTimer = 0U;\n    player_data.currentPowerup = 0U;\n\n    set_sprite_data(player.sprID, 8, PlayerSprites);\n    set_sprite_tile(player.sprID, player.cspr);\n    move_sprite(player.sprID, player.x, player.y);\n    set_bkg_data(0, 79, LevelTileset);\n    set_bkg_tiles(0, 0, 30, 43, LevelOne);\n\n    SHOW_SPRITES;\n    SHOW_BKG;\n    DISPLAY_ON;\n\n    while (TRUE)\n    {\n        apply_input(&amp;player);\n        updatePlayerAnimation(&amp;player);\n    }\n}\n\nvoid apply_input(Entity *player) {\n        UBYTE joypad_status = joypad();\n\n        if (joypad_status &amp;&amp; (player-&gt;timer == 325U || player-&gt;timer == 750U))\n        {\n            UWORD speed = player-&gt;speed;\n            UBYTE direction = player-&gt;direction;\n            UBYTE sprID = player-&gt;sprID;\n            switch (joypad_status)\n            {\n                case J_LEFT:\n                    if (direction == -1)\n                        scroll_sprite(sprID, -speed, 0);\n                    else\n                        direction = -1;\n                    break;\n                case J_RIGHT:\n                    if (direction == 1)\n                        scroll_sprite(sprID, speed, 0);\n                    else\n                        direction = 1;\n                    break;\n                case J_UP:\n                    if (direction == -2)\n                        scroll_sprite(sprID, 0, -speed);\n                    else\n                        direction = -2;\n                    break;\n                case J_DOWN:\n                    if (direction == 2)\n                        scroll_sprite(sprID, 0, speed);\n                    else\n                        direction = 2;\n                    break;\n                case J_LEFT | J_UP:\n                    if (direction == -2)\n                        scroll_sprite(sprID, -speed, -speed);\n                    else\n                        direction = -2;\n                    break;\n                case J_LEFT | J_DOWN:\n                    if (direction == 2)\n                        scroll_sprite(sprID, -speed, speed);\n                    else\n                        direction = 2;\n                    break;\n                case J_RIGHT | J_UP:\n                    if (direction == -2)\n                        scroll_sprite(sprID, speed, -speed);\n                    else\n                        direction = -2;\n                    break;\n                case J_RIGHT | J_DOWN:\n                    if (direction == 2)\n                        scroll_sprite(sprID, speed, speed);\n                    else\n                        direction = 2;\n                    break;\n                default:\n                    break;\n            }\n        }\n}\n\nvoid updatePlayerAnimation(Entity *player) {\n    UWORD timer = player-&gt;timer;\n\n    if (timer == 625U)\n            player-&gt;frame = player-&gt;frame ? 0U : 1U;\n\n        if (timer == 750U)\n            player-&gt;timer = 0U;\n        else\n            player-&gt;timer++;\n\n        UBYTE frame = player-&gt;frame;\n\n            switch (player-&gt;direction)\n            {\n                case -2: //UP\n                    player-&gt;cspr = frame + 2U;\n                    break;\n                case -1: //LEFT\n                    player-&gt;cspr = frame + 6U;\n                    break;\n                case 1: //RIGHT\n                    player-&gt;cspr = frame + 4U;\n                    break;\n                case 2: //DOWN\n                    player-&gt;cspr = frame;\n                    break;\n                default:\n                    break;\n            }\n\n        UBYTE cspr = player-&gt;cspr;\n\n        if (player-&gt;lspr != cspr)\n        {\n            set_sprite_tile(player-&gt;sprID, cspr);\n            player-&gt;lspr = cspr;\n        }\n}\n</code></pre>\n\n<p>'''</p>\n\n<p>And here is the error log I keep getting in the Windows command console whenever I attempt to compile:</p>\n\n<p>'''</p>\n\n<pre><code>c:\\gbdk\\bin\\lcc -Wa-l -Wl-m -Wl-j -DUSE_SFR_FOR_REG -c -o main.o main.c\n\nmain.c(67) parse error: token -&gt; 'SaveData' ; column 16\nmain.c(69):error *** Undefined identifier 'player_data'\nmain.c(69):error *** Structure/Union expected left of '.-&gt;'\nmain.c(70):error *** Undefined identifier 'player_data'\nmain.c(70):error *** Structure/Union expected left of '.-&gt;'\nmain.c(71):error *** Undefined identifier 'player_data'\nmain.c(71):error *** Structure/Union expected left of '.-&gt;'\nmain.c(72):error *** Undefined identifier 'player_data'\nmain.c(72):error *** Structure/Union expected left of '.-&gt;'\nmain.c(73):error *** Undefined identifier 'player_data'\nmain.c(73):error *** Structure/Union expected left of '.-&gt;'\nmain.c(74):error *** Undefined identifier 'player_data'\nmain.c(74):error *** Structure/Union expected left of '.-&gt;'\nmain.c(75):error *** Undefined identifier 'player_data'\nmain.c(75):error *** Structure/Union expected left of '.-&gt;'\nmain.c(76):error *** Undefined identifier 'player_data'\nmain.c(76):error *** Structure/Union expected left of '.-&gt;'\nmain.c(77):error *** Undefined identifier 'player_data'\nmain.c(77):error *** Structure/Union expected left of '.-&gt;'\nmain.c(78):error *** Undefined identifier 'player_data'\nmain.c(78):error *** Structure/Union expected left of '.-&gt;'\nmain.c(79):error *** Undefined identifier 'player_data'\nmain.c(79):error *** Structure/Union expected left of '.-&gt;'\nmain.c(80):error *** Undefined identifier 'player_data'\nmain.c(80):error *** Structure/Union expected left of '.-&gt;'\nmain.c(81):error *** Undefined identifier 'player_data'\nmain.c(81):error *** Structure/Union expected left of '.-&gt;'\nmain.c(82):error *** Undefined identifier 'player_data'\nmain.c(82):error *** Structure/Union expected left of '.-&gt;'\nerror *** code not generated for 'main' due to previous errors\nerror *** code not generated for 'apply_input' due to previous errors\n\nmain.c(176) parse error: token -&gt; 'UBYTE' ; column 21\n\nmain.c(196) parse error: token -&gt; 'UBYTE' ; column 21\nmain.c(181):error *** Undefined identifier 'frame'\nmain.c(184):error *** Undefined identifier 'frame'\nmain.c(187):error *** Undefined identifier 'frame'\nmain.c(190):error *** Undefined identifier 'frame'\nmain.c(198):error *** Undefined identifier 'cspr'\nmain.c(200):error *** Undefined identifier 'cspr'\nmain.c(201):error *** Undefined identifier 'cspr'\nerror *** code not generated for 'updatePlayerAnimation' due to previous errors\nc:\\gbdk\\bin\\lcc -Wa-l -Wl-m -Wl-j -DUSE_SFR_FOR_REG -o main.gb main.o\n</code></pre>\n\n<p>'''</p>\n\n<p>The current expectation for this code is just to put an animated sprite onto the screen that is moved by whatever keys are assigned to the Game Boy D-Pad by whatever emulator the game is being run on. However, I can't even tell if it will have the right output since it won't even parse correctly. Any help would be appreciated.</p>\n"}, {"tags": ["c", "arrays", "function", "pointers", "sizeof"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1562091500, "post_id": 56858106, "comment_id": 100266167, "body": "An array will decay to a pointer when passed into a function."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1562091582, "post_id": 56858106, "comment_id": 100266209, "body": "<code>char **array</code> declares a pointer, not an array. The variable is named <code>array,</code> but that doesn&#39;t matter."}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 1, "creation_date": 1562091635, "post_id": 56858106, "comment_id": 100266233, "body": "sizeof(array) is always the size of a pointer in your code, thus equal to sizeof(char*)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1562091650, "post_id": 56858106, "comment_id": 100266242, "body": "<a href=\"http://c-faq.com/aryptr/aryparmsize.html\" rel=\"nofollow noreferrer\">c-faq.com/aryptr/aryparmsize.html</a>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1562091706, "post_id": 56858106, "comment_id": 100266261, "body": "I&#39;m pretty sure this is a duplicate of <a href=\"https://stackoverflow.com/questions/37538/how-do-i-determine-the-size-of-my-array-in-c\" title=\"how do i determine the size of my array in c\">stackoverflow.com/questions/37538/&hellip;</a> I&#39;m not going to vote to close as a dupe <i>yet</i>, I&#39;ll let others decide what the best dupe actually is."}, {"owner": {"reputation": 125, "user_id": 7999619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a0100570a40a8542f24644d787b349?s=128&d=identicon&r=PG&f=1", "display_name": "A. Munir", "link": "https://stackoverflow.com/users/7999619/a-munir"}, "edited": false, "score": 0, "creation_date": 1562092066, "post_id": 56858106, "comment_id": 100266416, "body": "The referred duplicate talks about only one dimensional int array. My question is about understanding multidimensional string array"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1562092137, "post_id": 56858106, "comment_id": 100266466, "body": "All you have is a (one dimensional) array of pointers to chars. The same logic applies."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 7999619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a0100570a40a8542f24644d787b349?s=128&d=identicon&r=PG&f=1", "display_name": "A. Munir", "link": "https://stackoverflow.com/users/7999619/a-munir"}, "edited": false, "score": 0, "creation_date": 1562092834, "post_id": 56858277, "comment_id": 100266734, "body": "So there is no way in which you could pass an array to a function and calculate the size of the array inside that function?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 125, "user_id": 7999619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a0100570a40a8542f24644d787b349?s=128&d=identicon&r=PG&f=1", "display_name": "A. Munir", "link": "https://stackoverflow.com/users/7999619/a-munir"}, "edited": false, "score": 0, "creation_date": 1562093086, "post_id": 56858277, "comment_id": 100266838, "body": "@A.Munir See my updated post."}, {"owner": {"reputation": 125, "user_id": 7999619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a0100570a40a8542f24644d787b349?s=128&d=identicon&r=PG&f=1", "display_name": "A. Munir", "link": "https://stackoverflow.com/users/7999619/a-munir"}, "edited": false, "score": 0, "creation_date": 1562093613, "post_id": 56858277, "comment_id": 100267057, "body": "Why does while(*array) return true? If memory is not initiated is it populated with nulls?"}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "reply_to_user": {"reputation": 125, "user_id": 7999619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a0100570a40a8542f24644d787b349?s=128&d=identicon&r=PG&f=1", "display_name": "A. Munir", "link": "https://stackoverflow.com/users/7999619/a-munir"}, "edited": false, "score": 0, "creation_date": 1562101207, "post_id": 56858277, "comment_id": 100269891, "body": "@A.Munir <i>If memory is not initiated is it populated with nulls</i> : if memory is not initialized, what it is populated with is <i>undefined</i>; but if you pass a pointer to an initialized array, <code>while ( *array )</code> will be true, up to the point where <code>*array</code> evaluates to <code>null</code> -- that is, up to the point where the corresponding array element has been initialized to <code>null</code>"}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "reply_to_user": {"reputation": 125, "user_id": 7999619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a0100570a40a8542f24644d787b349?s=128&d=identicon&r=PG&f=1", "display_name": "A. Munir", "link": "https://stackoverflow.com/users/7999619/a-munir"}, "edited": false, "score": 0, "creation_date": 1562101295, "post_id": 56858277, "comment_id": 100269916, "body": "@A.Munir : ... also note that sometimes memory is <i>auto-initialized</i>, but my other comment still stands, no matter who/what is doing the initialization"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 3, "last_activity_date": 1562162269, "last_edit_date": 1562162269, "creation_date": 1562092134, "answer_id": 56858277, "question_id": 56858106, "link": "https://stackoverflow.com/questions/56858106/why-the-size-of-array-of-pointers-cannot-be-found-inside-function-call/56858277#56858277", "title": "Why the size of array of pointers cannot be found inside function call?", "body": "<p>In the first program the expression</p>\n\n<pre><code>sizeof(base_data)\n</code></pre>\n\n<p>gives the size of the array declared like</p>\n\n<pre><code>char *base_data[] = {\n    \"sample 1\",\n    \"sample 2\",\n    \"sample 3\"\n};\n</code></pre>\n\n<p>In the second program the expression </p>\n\n<pre><code>sizeof(array)\n</code></pre>\n\n<p>gives the size of a pointer because <code>array</code> is a pointer according to the function declaration</p>\n\n<pre><code>void print_array(char **array);\n</code></pre>\n\n<p>Even if you will declare the function like</p>\n\n<pre><code>void print_array(char *array[3]);\n</code></pre>\n\n<p>nevertheless the compiler adjusts the declaration to the declaration </p>\n\n<pre><code>void print_array(char **array);\n</code></pre>\n\n<p>So the above two declarations are equivalent and declare the same one function with one parameter of a pointer type. Within the function you are dealing with a pointer. </p>\n\n<p>On the other hand, an array passed to a function is implicitly converted to pointer to its first element. </p>\n\n<p>You could use for example a sentinel value equal to NULL as for example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid print_array(char **array)\n{\n    while ( *array ) puts( *array++ );\n}\n\nint main( void )\n{\n\n    char *base_data[] = {\n        \"sample 1\",\n        \"sample 2\",\n        \"sample 3\",\n        NULL\n    };\n\n\n    print_array(base_data);\n}\n</code></pre>\n\n<p>Or you need to pass explicitly the size of the array like</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid print_array( char **array, size_t n )\n{\n    for ( size_t i = 0; i &lt; n; i++ ) puts( array[i] );\n}\n\nint main( void )\n{\n\n    char *base_data[] = {\n        \"sample 1\",\n        \"sample 2\",\n        \"sample 3\",\n    };\n\n\n    print_array(base_data, sizeof( base_data ) / sizeof( *base_data ) );\n}\n</code></pre>\n\n<p>P.S. And the second program should not crash. It just outputs one element pointed to by the expression <code>array[i]</code>. Just check the value of the expression <code>sizeof(array)/sizeof(char*)</code> within the function like</p>\n\n<pre><code>printf( \"%zu\", sizeof(array)/sizeof(char*) );\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 7999619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a0100570a40a8542f24644d787b349?s=128&d=identicon&r=PG&f=1", "display_name": "A. Munir", "link": "https://stackoverflow.com/users/7999619/a-munir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1562098252, "accepted_answer_id": 56858277, "answer_count": 1, "score": 1, "last_activity_date": 1562162269, "creation_date": 1562091442, "last_edit_date": 1562093154, "question_id": 56858106, "link": "https://stackoverflow.com/questions/56858106/why-the-size-of-array-of-pointers-cannot-be-found-inside-function-call", "closed_reason": "Duplicate", "title": "Why the size of array of pointers cannot be found inside function call?", "body": "<p>Why this function works</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid print_array(char **array, size_t size)\n{\n    for (int i = 0; i &lt; size; i++) {\n        printf(\"%s\\n\",array[i]);\n    }\n}\n\nint main()\n{\n\n    char *base_data[] = {\n        \"sample 1\",\n        \"sample 2\",\n        \"sample 3\"\n    };\n\n\n    print_array(base_data,sizeof(base_data)/sizeof(char*));\n\n    return 0;\n}\n</code></pre>\n\n<p>But this code does not</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid print_array(char **array)\n{\n    for (int i = 0; i &lt; sizeof(array)/sizeof(char*); i++) {\n        printf(\"%s\\n\",array[i]);\n    }\n}\n\nint main()\n{\n\n    char *base_data[] = {\n        \"sample 1\",\n        \"sample 2\",\n        \"sample 3\"\n    };\n\n\n    print_array(base_data);\n\n    return 0;\n}\n</code></pre>\n\n<p>The program crashes after printing first value. No matter what I try, I am not able to find the size of the array of pointers to strings inside a function call. Most of the stackoverflow examples also pass the size of array to the functions. What happens to an array of pointers to strings when its passed to functions?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 995, "user_id": 1129926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5IB6W.jpg?s=128&g=1", "display_name": "Jeff Mergler", "link": "https://stackoverflow.com/users/1129926/jeff-mergler"}, "edited": false, "score": 0, "creation_date": 1562090613, "post_id": 56857856, "comment_id": 100265792, "body": "I would also add a little more explanation in the body of the post, such as where the error is raised, etc."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1562090794, "post_id": 56857856, "comment_id": 100265867, "body": "Cannot reproduce - and note the array is already sorted so <code>count</code> remains <code>0</code>. But I would change the inner loop to be <code>for(int j = i + 1; j &lt; num; j++)</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562090896, "post_id": 56857856, "comment_id": 100265912, "body": "Why do you declare the variables <code>i</code> and <code>j</code> in <code>main()</code>? They&#39;re not used."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1562091361, "post_id": 56857856, "comment_id": 100266104, "body": "\ud83d\udd0e\ud83d\udc1eDid run your code in a <b>debugger</b> to see where that error occurs, then run it again with a breakpoint near that failure so you can step carefully ahead and watch what happens leading up to that point?"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562090853, "post_id": 56857909, "comment_id": 100265895, "body": "All of them should be changed? Can you explain why?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1562091027, "post_id": 56857909, "comment_id": 100265972, "body": "That link, is not the same code. Here, <code>j</code> already starts at <code>i + 1</code>."}], "tags": [], "owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "is_accepted": false, "score": 0, "last_activity_date": 1562091038, "last_edit_date": 1562091038, "creation_date": 1562090598, "answer_id": 56857909, "question_id": 56857856, "link": "https://stackoverflow.com/questions/56857856/how-to-fix-the-sigsegv-error-in-c-code/56857909#56857909", "title": "How to fix the &quot;SIGSEGV&quot; error in C code?", "body": "<p>This looks to be a pretty standard implementation of bubble sort. However, there's one mistake.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>if(a[i]&gt;a[j]) {\n    temp=a[i];\n    a[i]=a[j];\n    a[j]=temp;\n    count++;\n}\n</code></pre>\n\n<p><code>i</code> should be <code>j+1</code>.</p>\n\n<p>Additionally, <code>j</code> should start at 0:</p>\n\n<p><code>for(int j = 0; j &lt; num - i - 1; j++) {</code></p>\n\n<p>For reference:</p>\n\n<p><a href=\"https://www.geeksforgeeks.org/bubble-sort/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/bubble-sort/</a></p>\n"}], "owner": {"reputation": 1, "user_id": 11668113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/589d6f862a18a58679fd9bdbf0d786c9?s=128&d=identicon&r=PG&f=1", "display_name": "Binu Judith J T", "link": "https://stackoverflow.com/users/11668113/binu-judith-j-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1562091038, "creation_date": 1562090356, "last_edit_date": 1562090495, "question_id": 56857856, "link": "https://stackoverflow.com/questions/56857856/how-to-fix-the-sigsegv-error-in-c-code", "title": "How to fix the &quot;SIGSEGV&quot; error in C code?", "body": "<pre><code>#include&lt;stdio.h&gt;\nvoid bubblesort(int a[],int num) {\n    int temp;\n    int count=0;\n\n    for(int i=0;i&lt;num-1;i++) {\n        for(int j=i+1;j&lt;num-i-1;j++) {\n            if(a[i]&gt;a[j]) {\n                temp=a[i];\n                a[i]=a[j];\n                a[j]=temp;\n                count++;\n            }\n         }\n    }\n    printf(\"%d\",count);\n}\nint main() {\n    int i,j,n=5;\n    int arr[]={1,2,3,4,5};\n\n    bubblesort(arr,n);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1562090294, "post_id": 56857812, "comment_id": 100265670, "body": "If this is just a sum of bytes, then if they&#39;re all zeroes, never, or if they&#39;re 255, then within 2^23 of them."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1562090304, "post_id": 56857812, "comment_id": 100265673, "body": "Note that signed integer overflow has an undefined behavior, so you should not &quot;expect&quot; anything specific."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1562090337, "post_id": 56857812, "comment_id": 100265691, "body": "This sort of &quot;digest&quot; is really useless since it doesn&#39;t verify much of anything. Consider a simple CRC or, ideally, something more robust like SHA2-256. At least use an unsigned value when negative values aren&#39;t meaningful."}, {"owner": {"reputation": 57, "user_id": 9561857, "user_type": "registered", "profile_image": "https://graph.facebook.com/1669956509758091/picture?type=large", "display_name": "Haider Bokhari", "link": "https://stackoverflow.com/users/9561857/haider-bokhari"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1562090623, "post_id": 56857812, "comment_id": 100265794, "body": "@tadman can you please elaborate why the number is 2^23. Thanks"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1562090717, "post_id": 56857812, "comment_id": 100265830, "body": "Hint: What if <code>(int)c</code> is never non-zero? This will never overflow. What if all bytes are  &gt;127? Then <code>c</code> is always negative so it could wrap positive. The smallest size is <i>one byte</i>. Read up on <a href=\"https://en.wikipedia.org/wiki/Two&#39;s_complement\" rel=\"nofollow noreferrer\">Two&#39;s Complement</a> to avoid confusion here."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 5, "creation_date": 1562090850, "post_id": 56857812, "comment_id": 100265894, "body": "Given <code>char c</code>, the code <code>c = fgetc(fp);</code> is wrong.  <code>fgetc()</code> returns <code>int</code>, not <code>char</code>.  <code>EOF</code> doesn&#39;t fit into a <code>char</code> value."}, {"owner": {"reputation": 1149, "user_id": 2472827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5rYY.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/2472827/neil"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1562092206, "post_id": 56857812, "comment_id": 100266496, "body": "If one wants to calculate a value, it should be a variable. However, @EugeneSh. makes a good point."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1562120727, "post_id": 56859028, "comment_id": 100273595, "body": "&quot;if &quot;sumdigsig&quot; crosses the &quot;(positive) maximum value&quot; then it will go back to the negative range.&quot; may be what you  have experienced, yet <code>int</code> overflow is not defined.  Other things may happen."}, {"owner": {"reputation": 327, "user_id": 5804038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4f4bb0dcddb973b64dae839f4562819?s=128&d=identicon&r=PG&f=1", "display_name": "Murali Krishna Bellamkonda", "link": "https://stackoverflow.com/users/5804038/murali-krishna-bellamkonda"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1562124360, "post_id": 56859028, "comment_id": 100274210, "body": "Can you please elaborate your Awnser with an example? I didn&#39;t understand what undefined means."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1562125085, "post_id": 56859028, "comment_id": 100274352, "body": "With <code>int a = 2,147,483,647;     a = a + 1;</code>, C does not specify &quot;go back to the negative range&quot;.  Instead it is <i>undefined behavior</i> meaning anything can happen, such as code crash."}, {"owner": {"reputation": 327, "user_id": 5804038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4f4bb0dcddb973b64dae839f4562819?s=128&d=identicon&r=PG&f=1", "display_name": "Murali Krishna Bellamkonda", "link": "https://stackoverflow.com/users/5804038/murali-krishna-bellamkonda"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1562128881, "post_id": 56859028, "comment_id": 100275157, "body": "Is it a compiler dependent? Because I ran the above code in the latest version of GCC compiler. it worked fine."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1562153788, "post_id": 56859028, "comment_id": 100287024, "body": "Even if it runs as hoped today, it might not run so tomorrow.  C spec says &quot;An example of undefined behavior is the behavior on integer overflow&quot;.  See <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">UB</a>."}], "tags": [], "owner": {"reputation": 327, "user_id": 5804038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4f4bb0dcddb973b64dae839f4562819?s=128&d=identicon&r=PG&f=1", "display_name": "Murali Krishna Bellamkonda", "link": "https://stackoverflow.com/users/5804038/murali-krishna-bellamkonda"}, "is_accepted": false, "score": 0, "last_activity_date": 1562096302, "creation_date": 1562096302, "answer_id": 56859028, "question_id": 56857812, "link": "https://stackoverflow.com/questions/56857812/integer-overflow-smallest-file-size-that-will-make-the-integer-in-program-becom/56859028#56859028", "title": "Integer overflow (Smallest file size that will make the integer in program become negative in bits)", "body": "<p>In both 64-bit &amp; 32-bit machine, the signed-integer value range is <code>-2,147,483,648 to  2,147,483,647</code></p>\n\n<p>So if \"<code>sumdigsig</code>\" crosses the \"(positive) maximum value\" then it will go back to the negative range.</p>\n\n<p><strong>Let us consider a small example:</strong>\nConsider if the range is -10 to +9 </p>\n\n<pre><code>   ---&gt;   -10 -9 -8 -7 -6 -5 -4 -3 -2 -1  ----\n  |                                           |\n   ---    +9 +8 +7 +6 +5 +4 +3 +2 +1  0   &lt;---\n</code></pre>\n\n<p>consider a = 4.\nSo if you do a = a + 6 i.e then will become -10 because it exceeds the range.</p>\n\n<p>In the same way for an integer, if the value crossed the maximum value, then it will go back to the negative range.</p>\n\n<p><strong>Proof:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    // a contains the maxium value\n    int a = 2,147,483,647;\n    a = a + 1; \n    printf(\"%d\", a);\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>-2,147,483,648\n</code></pre>\n\n<p><strong>Suggestion:</strong> Instead of using the <code>signed-integer</code> go with <code>unsigned Integer</code>. U can get a big range i.e <code>2,147,483,647 + 2,147,483,648</code></p>\n"}, {"tags": [], "owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "is_accepted": false, "score": 2, "last_activity_date": 1562104382, "last_edit_date": 1562104382, "creation_date": 1562102302, "answer_id": 56860153, "question_id": 56857812, "link": "https://stackoverflow.com/questions/56857812/integer-overflow-smallest-file-size-that-will-make-the-integer-in-program-becom/56860153#56860153", "title": "Integer overflow (Smallest file size that will make the integer in program become negative in bits)", "body": "<p><strong>I need to know what file size in bits will cause the integer to overflow and be negative.</strong></p>\n\n<p>(Do you mean \"file size in <strong>bytes</strong>\"?  Files are rarely measured in bits.)</p>\n\n<p>The way you are doing it, this all depends upon the bytes in the file.  As soon as the sum of the bytes that you are adding together exceeds <code>INT_MAX</code> (see <code>limits.h</code>), the value of the <code>int</code> cumulative sum will wrap to a negative value.</p>\n\n<p>Thus, the maximum number of bytes <em>for a particular file</em> would be one fewer than the number of bytes that caused the summation to exceed <code>INT_MAX</code>.  i.e., one less than the number of bytes you have read from the file at the point where the sum first exceeds <code>INT_MAX</code> -- or, in practical terms of detecting this in code, first becomes negative.</p>\n\n<p>And, as one of the comments points out, if all the bytes are <code>0x00</code>, then even an infinitely large file will never meet this criteria.</p>\n\n<p><strong>EDIT 1 :</strong> With respect to the comment about overflow behavior being undefined, instead of detecting if the sum has become negative, test instead whether or not <code>(INT_MAX - sum)</code> is less than the most recently read byte's value, <em>before</em> adding that byte's value to the sum.</p>\n\n<p><strong>EDIT 2 :</strong> Expressed in code:</p>\n\n<p><strong>the core loop as I would re-write it</strong></p>\n\n<pre><code>c = 0;\nbytes = 0;\nwhile (1) {\n    if ((c = fgetc(fp)) == EOF) break;\n\n    if ((INT_MAX - sumdigsig) &gt;= c) {\n        sumdigsig += c;\n        bytes++;\n    } else {\n        break;\n    }\n}\n</code></pre>\n\n<p><strong>sample runs</strong></p>\n\n<pre><code>head -c 1073741824 &lt; /dev/urandom &gt; large-file-of-random-bytes\n\n./sum-file-bytes\nPlease Enter name of the File : large-file-of-random-bytes\nsum is : 2147483572; read 16845621 bytes to reach that sum\n\nhead -c 1073741824 &lt; /dev/zero &gt; large-file-of-zeros\n\n./sum-file-bytes\nPlease Enter name of the File : large-file-of-zeros\nsum is : 0; read 1073741824 bytes to reach that sum\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 9561857, "user_type": "registered", "profile_image": "https://graph.facebook.com/1669956509758091/picture?type=large", "display_name": "Haider Bokhari", "link": "https://stackoverflow.com/users/9561857/haider-bokhari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1562104382, "creation_date": 1562090180, "question_id": 56857812, "link": "https://stackoverflow.com/questions/56857812/integer-overflow-smallest-file-size-that-will-make-the-integer-in-program-becom", "title": "Integer overflow (Smallest file size that will make the integer in program become negative in bits)", "body": "<p>I have a written a digital sign calculator in C. I need to know is the smallest size of the file (in bytes) which causes the signature to be negative</p>\n\n<p>The program reads in bytes from a file as char then store it in an integer and keeps adding use to the integer until EOF has reached. The program works fine. </p>\n\n<pre><code>FILE *fp;\nchar inpfile[20];\nchar c;\nint sumdigsig = 0;\n\n// reading in the name of the file using inpfile\nprintf(\"Please Enter name of the File:\\n\");\nscanf(\"%s\",inpfile);\n// checking if the file exisits\nif((fp = fopen(inpfile,\"r\")) == NULL){\n        fprintf(stderr,\"File does no Exsist\\n\");\n        exit(1);\n}\n// If the file exsists using fgetc to read in until endoffile is reached\n// and casting char to int and suming it \n  c = fgetc(fp);\nwhile(c != EOF){\n        sumdigsig += (int)c;\n        c = fgetc(fp);\n}\nprintf(\"%d\\n\",sumdigsig);\n\n}\n</code></pre>\n\n<p>The program works fine, it is just a reference so that you know what is happening. running really large file results in a negative number as expected but I need to know what file size in bits will cause the integer to overflow and be negative.</p>\n"}, {"tags": ["c", "genetic-algorithm", "evolutionary-algorithm"], "comments": [{"owner": {"reputation": 1502, "user_id": 5544970, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2AYud.jpg?s=128&g=1", "display_name": "Sebin Benjamin", "link": "https://stackoverflow.com/users/5544970/sebin-benjamin"}, "edited": false, "score": 0, "creation_date": 1562088963, "post_id": 56857459, "comment_id": 100265087, "body": "Always try to provide a minimal, reproducible code as an example. Writing a better question increases the likelihood of getting a solution. Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1562088995, "post_id": 56857459, "comment_id": 100265101, "body": "Similar to <a href=\"https://stackoverflow.com/questions/56855232/my-c-code-for-a-genetic-algortihtm-is-not-functioning-it-dosent-enter-into-the\">this recent question</a>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1562090400, "post_id": 56857459, "comment_id": 100265714, "body": "I see you have <code>else continue;</code> immediately before <code>} while(...);</code> so that <code>continue</code> is redundant. Did you intend the <code>continue</code> to apply to an outer loop?"}], "answers": [{"tags": [], "owner": {"reputation": 13767, "user_id": 2413201, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rxfuw.jpg?s=128&g=1", "display_name": "Armali", "link": "https://stackoverflow.com/users/2413201/armali"}, "is_accepted": false, "score": 0, "last_activity_date": 1562222821, "creation_date": 1562222821, "answer_id": 56882077, "question_id": 56857459, "link": "https://stackoverflow.com/questions/56857459/genetic-algorithm-population-initialisation/56882077#56882077", "title": "Genetic Algorithm, Population initialisation", "body": "<p>The primary error is that you overlooked that <code>struct</code> arguments to functions are passed by value, i.&nbsp;e.</p>\n\n<pre><code>     initialize_benchmark(benchmark);\n     initialize_days(old_pop[i]);\n</code></pre>\n\n<p>pass copies of <code>benchmark</code> and <code>old_pop[i]</code> to the <code>initialize_\u2026</code> functions, where only those copies are filled with the desired values (and discarded on function return), while the global <code>benchmark</code> and <code>old_pop[]</code> remain zeroed. We have to change those calls to</p>\n\n<pre><code>     initialize_benchmark(&amp;benchmark);\n     initialize_days(&amp;old_pop[i]);\n</code></pre>\n\n<p>as well as the function parameter type to a pointer</p>\n\n<pre><code>void initialize_days(struct pop *b)\nvoid initialize_benchmark(struct pop *b)\n</code></pre>\n\n<p>and every occurrence of <code>b.</code> in those functions to <code>b-&gt;</code>. After that, you can continue to debug the program.</p>\n"}], "owner": {"reputation": 1, "user_id": 11730207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-58lJ1ben5Wk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcLpb1wbwAALEbj-ssIY9XOXuG5sA/photo.jpg?sz=128", "display_name": "venkat esh", "link": "https://stackoverflow.com/users/11730207/venkat-esh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562222821, "creation_date": 1562088554, "last_edit_date": 1562094093, "question_id": 56857459, "link": "https://stackoverflow.com/questions/56857459/genetic-algorithm-population-initialisation", "title": "Genetic Algorithm, Population initialisation", "body": "<p>I'm trying to find a solution to this problem of initializing a timetable, the <code>days[][]</code> of each <code>oldpop</code> has to be printed for successfully generating new timetables. </p>\n\n<p>Each position in days must consist of a number in which the <strong>10's place</strong> shows the <strong>room number</strong>, and <strong>one's place</strong> shows the <strong>subject number</strong>. The room number array consists of each hour the room is available or free, any hour and day combination tells us if the room is <strong>free</strong> ie, =<strong>0</strong> or <strong>occupied</strong> =<strong>1</strong>. Similarly, the subjects array tells us how many times each subject must be taught per week. </p>\n\n<p>There are a lot of unused variables in this code, please ignore them as I will implement them later on. I also would like to apologize for the extremely wrong indentation. Time restricts me to rectify that as of now.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;ctype.h&gt;\n#include &lt;time.h&gt;\n\n\n#define MAXP 10 //population size (best if chosen between 10-15)\n\nstruct pop{\n    int days[5][9];\n    int faculty;\n    int students;\n    int subjects[6];\n    int labs[2];\n    int rooms[9][5][9];\n    int labaratory[9][2];\n    int obj;\n} old_pop[MAXP],benchmark;\n\nint random_number_creator(int upper, int lower)\n{\n    int n;\n    n = rand() % (upper-lower)+ lower;\n    return n;\n}\nvoid initialize_days(struct pop b)\n{\n    int i,j;\n    for(i=0;i&lt;5;i++)\n    {\n        for(j=0;j&lt;9;j++)\n         if(j!=5)\n          b.days[i][j]=0;\n         else\n          b.days[i][j]=11111;\n    }\n}\nvoid initialize_benchmark(struct pop b)\n{\n    int i,j,k;\n    for(i=0;i&lt;5;i++)\n    {\n        for(j=0;j&lt;9;j++)\n         if(j!=5)\n          b.days[i][j]=0;\n         else\n          b.days[i][j]=11111;\n    }\n    b.faculty=9;\n    b.students=100;\n    for(i=0;i&lt;6;i++)\n    {   \n       if(i&lt;4)\n        b.subjects[i]=3;\n       else \n        b.subjects[i]=2;\n    }    \n    for(i=0;i&lt;2;i++)\n    {\n        b.labs[i]=3;\n    }\n    for(i=0;i&lt;9;i++)\n    {   \n     for(j=0;j&lt;5;j++)\n        for(k=0;k&lt;9;k++)\n            if(i!=5)\n                 b.rooms[i][j][k]=0;\n\n    }\n    for(i=6;i&lt;9;i++)\n    {   \n      for(j=0;j&lt;8;j++)\n        b.labaratory[i][j]=0;\n    }\n}\nint check_avail_days(struct pop p, int b)\n{   \n    int j,count=0;\n    for(j=0;j&lt;9;j++)\n    {  \n       if(p.days[b][j]==0)\n         count+=1;\n\n    }\n    return (count);\n}\nint check_avail_hours(struct pop b,int d)\n{\n    int i,count=0;\n    for(i=0;i&lt;9;i++)\n    {\n        if(b.days[d][i]==0)\n          count+=1;\n    }\n    return count;\n\n}\n\nint hours_alloter(struct pop b,int d)\n{\n    int i,j=0;\n    int arr[9]={0,0,0,0,0,0,0,0,0};\n    for(i=0;i&lt;9;i++)\n    {\n        if(b.days[d][i]==0)\n        {   \n            arr[j]=i;\n            j++;\n        }\n\n    }\n    int n;\n    n=random_number_creator(j,0);\n    return arr[n];\n}\nint availble_room(struct pop b,int s, int r, int q)\n{   \n    if(b.rooms[s][r][q]==0)\n     return 1;\n    else\n     return 0;\n}\nvoid initpop()\n{\n  int i,j,count=0, a=0;\n\n  for(i=0;i&lt;MAXP;i++)\n    old_pop[i].obj=0;\n\n  for(i=0;i&lt;MAXP;i++)\n    {\n     initialize_benchmark(benchmark);\n     initialize_days(old_pop[i]);\n     do{\n        printf(\"\\nloop 1 entery\\n\");\n\n        int subject1,ss,fa=benchmark.faculty,h1;\n for(subject1=random_number_creator(6,0);benchmark.subjects[subject1]&gt;=0;benchmark.subjects[subject1]--)\n    {\n       printf(\"\\nloop 2 entery\\n\");\n       int cou=1,r;\n       ss=subject1*10;\n       while(cou!=0&amp;&amp;benchmark.subjects[subject1]!=0&amp;&amp;fa!=0)\n       {  \n          printf(\"\\nloop 3 entery\\n\");\n          int d=random_number_creator(6,0),hi;\n          cou=check_avail_hours(benchmark,d);\n          hi=hours_alloter(benchmark,d);\n          old_pop[i].days[d][h1]=ss;\n          do\n            {   \n                printf(\"\\nloop 4 entery\\n\");\n                r=random_number_creator(9,0);\n                if(availble_room(benchmark,r,d,hi)==1)\n                {\n                   benchmark.rooms[r][d][hi]=1;\n                   old_pop[i].days[d][hi]+=r;\n                   benchmark.faculty-=1;\n                   fa++;\n                   a++;\n                }\n                else\n                    continue;\n            }while(a==0);\n        }\n        old_pop[i].faculty=fa;  \n    }\n\n    for(i=0;i&lt;6;i++)\n    {\n        count+=benchmark.subjects[i];\n    }\n}while(count!=0);\n  }\n}\n\nint main()\n{\n    initpop();\n    int i,j,k;\n    for(i=0;i&lt;MAXP;i++)\n    {   \n       printf(\"\\nPop %d\\n\",i);\n       for(j=0;j&lt;5;j++)\n       {   printf(\"\\n\");\n           for(k=0;k&lt;9;k++)\n           printf(\"   %d\",old_pop[i].days[j][k]);\n       }\n     }\n   return 0;\n }\n</code></pre>\n\n<h2>Current Issue</h2>\n\n<p>The code gets stuck in an infinite loop, preventing me from understanding the logical error.</p>\n\n<h2>Expected Result</h2>\n\n<p>10 timetables each randomly generated, each position specifying the room number in the 10's place, and subject number in the 1's place. ie, 52 implies 5th room and 2nd subject</p>\n"}, {"tags": ["c", "list", "pointers", "struct", "sdl-2"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1562087134, "post_id": 56857113, "comment_id": 100264404, "body": "Apart from anything else, can you use <code>double</code> instead of <code>float</code>?"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1562087316, "post_id": 56857113, "comment_id": 100264467, "body": "out of your problem in <i>plotter</i> you create a memory leak doing <code>sprite_t *ptr = malloc(sizeof(sprite_t));</code> then <code>ptr = list_search(lista_sprites,name,strcmp);</code>, just do <code>sprite_t *ptr = list_search(lista_sprites,name,strcmp);</code> and perhaps check if you get or not NULL"}, {"owner": {"reputation": 99, "user_id": 7899374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed37c877025bc8a7d9573832ad8a276?s=128&d=identicon&r=PG&f=1", "display_name": "Renzo", "link": "https://stackoverflow.com/users/7899374/renzo"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 1, "creation_date": 1562090438, "post_id": 56857113, "comment_id": 100265730, "body": "@bruno Done!, thanks!"}, {"owner": {"reputation": 99, "user_id": 7899374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed37c877025bc8a7d9573832ad8a276?s=128&d=identicon&r=PG&f=1", "display_name": "Renzo", "link": "https://stackoverflow.com/users/7899374/renzo"}, "edited": false, "score": 0, "creation_date": 1562090471, "post_id": 56857113, "comment_id": 100265740, "body": "@WeatherVaneI could do it, but why would I be able to do it with double?"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1562093065, "post_id": 56857113, "comment_id": 100266834, "body": "@ArturoAguilarLopez the floats are on 32bits, the double are on 64bits offering a better pr&#233;cision"}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 1, "creation_date": 1562133550, "post_id": 56857113, "comment_id": 100276498, "body": "What &quot;they always rotate on their axis&quot; means? It looks like you&#39;re constantly adding rotation on each frame with overwriting your <code>coords</code>. If that is your problem, it could be solved by calculating new coordinates to temporary variables before drawing without overwriting initial non-rotated coordinates."}, {"owner": {"reputation": 99, "user_id": 7899374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed37c877025bc8a7d9573832ad8a276?s=128&d=identicon&r=PG&f=1", "display_name": "Renzo", "link": "https://stackoverflow.com/users/7899374/renzo"}, "reply_to_user": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1562295760, "post_id": 56857113, "comment_id": 100337989, "body": "@keltar I solved it with that idea, thank you very much."}], "owner": {"reputation": 99, "user_id": 7899374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed37c877025bc8a7d9573832ad8a276?s=128&d=identicon&r=PG&f=1", "display_name": "Renzo", "link": "https://stackoverflow.com/users/7899374/renzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562087930, "creation_date": 1562086788, "last_edit_date": 1562087930, "question_id": 56857113, "link": "https://stackoverflow.com/questions/56857113/problems-to-rotate-the-coordinates-of-my-ship", "title": "Problems to rotate the coordinates of my ship", "body": "<p>I am doing the asteroids of Atari in C. When I use <code>rotate_coordinates()</code> the coordinates of the ship with a certain angle, the ship starts to rotate on its own axis with a speed; if I increase the angle, it increases the speed of this rotation.\nI'm using the SDL2 libraries to make all the whole graphic part of the game.</p>\n\n<p>I have the structure type <code>ship_t</code> where it has all the parameters of my ship:</p>\n\n<pre><code>typedef struct{    \n    float x_pos;\n    float y_pos;\n    float vx;\n    float vy;\n    float angle;\n    float power;\n}ship_t;\n</code></pre>\n\n<p>Then, in the main I ask for memory for a pointer to ship_t, I create the ship with the initial coordinates.</p>\n\n<pre><code>ship_t *ship = malloc(sizeof(ship_t));\nship_new(ship);\n</code></pre>\n\n<p>Then the while begins, inside the cases of pressing the keys the functions receive a pointer to ship_t to be able to modify the angle and the power of the ship.</p>\n\n<pre><code> case SDLK_RIGHT:                   \n      ship_rotate_right(ship);\n    //This returns ship-&gt;angle += (PI/20)\n    break;\n case SDLK_LEFT:\n    ship_rotate_left(ship);\n    //This returns ship-&gt;angle -= (PI/20)\n    break;\n</code></pre>\n\n<p>Then, during the while I'm calling a function that graph the ship:</p>\n\n<pre><code>ship_draw(ship);\n</code></pre>\n\n<p>Where ship_draw() is:</p>\n\n<pre><code>ship_draw(const ship_t *ship){\n    plotter(\"SHIP\", scale, ship-&gt;x_pos, ship-&gt;y_pos, ship-&gt;angle);\n}\n</code></pre>\n\n<p>My function to plotter every sprite in the game is:</p>\n\n<pre><code>bool plotter(const *char name,float scale ,float x, float y, float angle){\n    sprite_t *ptr = malloc(sizeof(sprite_t));\n    if(ptr==NULL)\n        return false;\n    // I have all the sprites on a list that previously load in dynamic memory.\n    // I search the name of my sprite(in this case the SHIP) and then\n    // I get the coordinates with the pointer ptr.\n    ptr = list_search(lista_sprites,name,strcmp);\n    //ptr-&gt;n is the length of the rows of the matrix that contains the coordinates of the SHIP\n    rotate_coordinates(ptr-&gt;coords,ptr-&gt;n,angle);\n    for(int i=0 ; i &lt; ptr-&gt;n -1; i++)\n        SDL_RenderDrawLine(\n            renderer,\n            ptr-&gt;coords[i][0] * scale + x,\n            WINDOW_HIGH - (ptr-&gt;coords[i][1] * scale + y),\n            ptr-&gt;coords[i+1][0] * scale +x ,\n            WINDOW_HIGH - (ptr-&gt;coords[i+1][1] * scale + y)\n        );\n\n    return true;\n}\n</code></pre>\n\n<p>I have my function to <code>rotate_coordinates()</code> which is like this:</p>\n\n<pre><code>void rotate_coordinates(float p[][2],size_t len,float angle){\n    size_t i;\n    float x_new,y_new;\n    float calc_cos = cos(angle);\n    float calc_sin = sin(angle);\n    for(i=0;i&lt;len;i++){\n        x_new = p[i][0]*calc_cos - p[i][1]*calc_sin;\n        y_new = p[i][0]*calc_sin + p[i][1]*calc_cos;\n\n        p[i][0] = x_new;\n        p[i][1] = y_new;\n    }   \n}\n</code></pre>\n\n<p>The ship should rotate me only the step rotation that I give it that is PI / 20. But rotates on its axis. The same for the asteroids, they always rotate on their axis.</p>\n\n<p>On the other hand, I need if or if I call the function <code>rotate_coordinates</code> within the plotter, since it is in this function where I obtain the coordinates of my ship from the dynamic memory.</p>\n"}, {"tags": ["c", "python-3.x", "tensorflow", "tensorflow2.0"], "answers": [{"tags": [], "owner": {"reputation": 923, "user_id": 11878567, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HXkRUQ3t9Dw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7mIch94jBz7FfY03JE7nLxZosOw/photo.jpg?sz=128", "display_name": "Rishit Dagli", "link": "https://stackoverflow.com/users/11878567/rishit-dagli"}, "is_accepted": false, "score": 0, "last_activity_date": 1593084103, "creation_date": 1593084103, "answer_id": 62574155, "question_id": 56857043, "link": "https://stackoverflow.com/questions/56857043/why-is-convert-variables-to-constants-deprecated-in-tf2/62574155#62574155", "title": "Why is convert_variables_to_constants() deprecated in TF2?", "body": "<p>In TF 2.x there is no <code>tf.Session()</code>, which is a necessary component to build frozen models in TF 1.x, anymore in TF 2.0.</p>\n<p>According to <a href=\"https://github.com/tensorflow/tensorflow/releases/tag/v2.0.0\" rel=\"nofollow noreferrer\">TensorFlow 2.0.0 release description</a> &quot;Removed the freeze_graph command-line tool; SavedModel should be used in place of frozen graphs.&quot; So, you would be expected to use <code>SavedModel</code> only.</p>\n<p>However, if you still need frozen graphs you</p>\n<pre class=\"lang-py prettyprint-override\"><code># Save model to SavedModel format\ntf.saved_model.save(model, &quot;./models/simple_model&quot;)\n\n# Convert Keras model to ConcreteFunction\nfull_model = tf.function(lambda x: model(x))\nfull_model = full_model.get_concrete_function(\n    x=tf.TensorSpec(model.inputs[0].shape, model.inputs[0].dtype))\n\n# Get frozen ConcreteFunction\nfrozen_func = convert_variables_to_constants_v2(full_model)\nfrozen_func.graph.as_graph_def()\n\nlayers = [op.name for op in frozen_func.graph.get_operations()]\n</code></pre>\n<p>And then save it as a frozen graph.</p>\n<blockquote>\n<p>Note: You would now be expected to load this frozen graph with TF 1.x\nfunctions,</p>\n</blockquote>\n<pre class=\"lang-py prettyprint-override\"><code>tf.io.write_graph(graph_or_graph_def=frozen_func.graph,\n                  logdir=&quot;./frozen_models&quot;,\n                  name=&quot;simple_frozen_graph.pb&quot;,\n                  as_text=False)\n</code></pre>\n<p>Then to load this model (<strong>TF 1.x</strong> code) you would do-</p>\n<pre class=\"lang-py prettyprint-override\"><code>with tf.io.gfile.GFile(&quot;./frozen_models/simple_frozen_graph.pb&quot;, &quot;rb&quot;) as f:\n    graph_def = tf.compat.v1.GraphDef()\n    loaded = graph_def.ParseFromString(f.read())\n</code></pre>\n<p>The latency reduced by <code>freeze_graph</code> may be quite important for an application and full-precision weights being stored in <code>SavedModel</code> could be a problem. But there are simple ways to get past this too, which is outside the scope of this question.</p>\n"}], "owner": {"reputation": 111, "user_id": 2076669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe44b66ca21abf34ad49584a7f697387?s=128&d=identicon&r=PG", "display_name": "dajoke", "link": "https://stackoverflow.com/users/2076669/dajoke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 362, "favorite_count": 0, "answer_count": 1, "score": 10, "last_activity_date": 1593084103, "creation_date": 1562086437, "question_id": 56857043, "link": "https://stackoverflow.com/questions/56857043/why-is-convert-variables-to-constants-deprecated-in-tf2", "title": "Why is convert_variables_to_constants() deprecated in TF2?", "body": "<p>As the title says, why is convert_variables_to_constants() deprecated in tensorflow 2? What's the easy replacement to get a saveable model to load into a downstream stand-alone application for inference (in my case, using the C API).</p>\n"}, {"tags": ["c", "operator-keyword"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1562085021, "post_id": 56856616, "comment_id": 100263532, "body": "Huh. I would have edited the duplicate list to add <a href=\"https://stackoverflow.com/questions/48274742/what-does-in-c-mean\">stackoverflow.com/questions/48274742/what-does-in-c-mean</a>, but realized that I don&#39;t have a dupehammer in any of these tags."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1562085155, "post_id": 56856616, "comment_id": 100263588, "body": "What does your textbook say?"}, {"owner": {"reputation": 1101, "user_id": 3958521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GorZx.jpg?s=128&g=1", "display_name": "bigwillydos", "link": "https://stackoverflow.com/users/3958521/bigwillydos"}, "edited": false, "score": 0, "creation_date": 1562085558, "post_id": 56856616, "comment_id": 100263769, "body": "bitwise-xor, <code>adicionar ^= 1; &#47;&#47; same as adicionar = adicionar ^ 1;</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1562085593, "post_id": 56856616, "comment_id": 100263788, "body": "Do you know what <code>+=</code> means, for example <code>adicionar += 1</code>?"}], "owner": {"reputation": 23, "user_id": 8693229, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IuAjGxHkX3o/AAAAAAAAAAI/AAAAAAAAAtg/Rm5K0Wnuo8U/photo.jpg?sz=128", "display_name": "Jos&#233; Lopes", "link": "https://stackoverflow.com/users/8693229/jos%c3%a9-lopes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "closed_date": 1562084803, "answer_count": 0, "score": 0, "last_activity_date": 1562084811, "creation_date": 1562084598, "question_id": 56856616, "link": "https://stackoverflow.com/questions/56856616/what-does-the-operator-stands-for-in-c-language", "closed_reason": "Duplicate", "title": "What does the operator ^= stands for in C language?", "body": "<p>I'm studying some code for an application in PIC18f4550 and I've seen this operator and after looking for it on the google and surprisingly not finding anything about it, I would like to know if you guys have an idea what it stands for?</p>\n\n<p>this is part of the code I'm studying (interruptions in PIC)</p>\n\n<pre><code> void interrupt isr(){\n    if(INT0IF){\n        INT0IF = 0;    \n        iniciar ^= 1;             \n    }\n    if(INT1IF){\n        INT1IF = 0;\n        adicionar ^= 1;\n    }\n</code></pre>\n"}, {"tags": ["c", "fft", "stm32", "stm32f4discovery", "cmsis"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1562085688, "post_id": 56856469, "comment_id": 100263837, "body": "What is your sample rate ?"}, {"owner": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1562091840, "post_id": 56856469, "comment_id": 100266310, "body": "Try to send it to pc and display in plot. Much easier for debug."}, {"owner": {"reputation": 95, "user_id": 7431463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1cd892825c3217182bb0d59a64e6f58?s=128&d=identicon&r=PG", "display_name": "Nanne118", "link": "https://stackoverflow.com/users/7431463/nanne118"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1562101693, "post_id": 56856469, "comment_id": 100270041, "body": "@PaulR I have a sample rate of 102.4 kHz"}, {"owner": {"reputation": 95, "user_id": 7431463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1cd892825c3217182bb0d59a64e6f58?s=128&d=identicon&r=PG", "display_name": "Nanne118", "link": "https://stackoverflow.com/users/7431463/nanne118"}, "reply_to_user": {"reputation": 6676, "user_id": 3716664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fN14n.png?s=128&g=1", "display_name": "tilz0R", "link": "https://stackoverflow.com/users/3716664/tilz0r"}, "edited": false, "score": 0, "creation_date": 1562159761, "post_id": 56856469, "comment_id": 100290763, "body": "@tilz0R how would I go about exporting this data from inside my IDE? I use Atollic, which I do not believe offers any straightforward options of exporting it and displaying it in a plot"}], "owner": {"reputation": 95, "user_id": 7431463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1cd892825c3217182bb0d59a64e6f58?s=128&d=identicon&r=PG", "display_name": "Nanne118", "link": "https://stackoverflow.com/users/7431463/nanne118"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562320456, "creation_date": 1562084023, "last_edit_date": 1562320456, "question_id": 56856469, "link": "https://stackoverflow.com/questions/56856469/not-possible-to-do-cfft-frequency-binning-with-cmsis-on-stm32", "title": "Not possible to do CFFT Frequency binning with CMSIS on STM32?", "body": "<p>At the moment I am attempting to implement a program for finding 3 frequencies (xs = 30.1 kHz, ys = 28.3 kHz and zs = 25.9 kHz) through the use of the CMSIS pack on the STM32F411RE board. I cannot get the Complex FFT (CFFT) and complex magnitude working correctly.</p>\n\n<p>In accordance with the freqeuncy bins I generate an array containing these frequencies, so that I can manually lookup which index bins the signals xs, ys and zs are on. I then use this index to look at the 3 fft outcomes (Xfft, Yfft, Zfft) to find the outcomes for these signals, but they dont match up.</p>\n\n<p>I use the following order of functions:</p>\n\n<p>DMA ADC Buffer:  <code>HAL_ADC_ConvHalfCpltCallback(ADC_HandleTypeDef* hadc)</code> <br/>\nFreqeuncy bins in  <code>binfreqs</code> <br/>\nChange ADC input to float Xfft <br/>\nCFFT_F32: <code>arm_cfft_f32(&amp;arm_cfft_sR_f32_len1024, Xfft, 0, 0);</code> <br/>\nComplex Mag: <code>arm_cmplx_mag_f32(Xfft, Xdsp, fftLen);</code> <br/></p>\n\n<pre><code>// ADC Stuff done via DMA, working correctly\n\nint main(void)\n{\n\n    HAL_Init();\n    SystemClock_Config();\n    MX_GPIO_Init();\n    MX_DMA_Init();\n    MX_ADC1_Init();\n    MX_USART2_UART_Init();\n    HAL_ADC_Start_DMA(&amp;hadc1, adc_buffer, bufferLen); // adc_buffer needs to be an uint32_t\n\n   while (1)\n    {\n\n        /**\n         * Generate the frequencies\n         */\n        for (int binfreqs = 0; binfreqs &lt; fftLen; binfreqs++)   // Generates the frequency bins to relate the amplitude to an actual value, rather than a bin frequency value\n        {\n            fftFreq[binfreqs] = binfreqs * binSize;\n        }\n\n        /*\n         * Find the amplitudes associated with the 3 emitter frequencies and store in an array for each axis. By default these arrays are generated with signal strength 0\n         *  and with frequency index at 0: because of system limits these will indicate invalid values, as system range is from 10 - 60 kHz.\n         */\n        volatile int32_t X_mag[3][4] =  // x axis values: [index][frequency][signal_strength][phase]\n        {\n            {0, Xfreq, 0, 0},   // For x-freq index [0][0], frequency [0][1] associated with 1st biggest amplitude [0][2], phase [0][3]\n            {0, Yfreq, 0, 0},   // Ditto for y-freq\n            {0, Zfreq, 0, 0}    // Ditto for z-freq\n        };\n\n\n        /*\n         * Finds the index in fftFreq corresponding to respectively X, Y and Z emitter frequencies\n         */\n        for(int binSearch = 0; binSearch &lt; fftLen; binSearch++)\n        {\n            if(fftFreq[binSearch] == Xfreq) // Find index for X emitter frequency\n            {\n              X_mag[0][0] = binSearch;\n            }\n\n            if(fftFreq[binSearch] == Yfreq) // Find index for Y emitter frequency\n            {\n              X_mag[1][0] = binSearch;\n            }\n\n            if(fftFreq[binSearch] == Zfreq) // Find index for Z emitter frequency\n            {\n              X_mag[2][0] = binSearch;\n            }\n        }\n\n</code></pre>\n\n<p>Signal processing</p>\n\n<pre><code>\n        /* Signal processing algorithms --------------------------------------------------\n         *\n         * Only to be run once with fresh data from the buffer, [do not run continuous] or position / orientation data will be repeated.\n         * So only run once when conversionPaused\n         */\n        if(conversionPaused)\n        {\n\n            /*\n             * Convert signal to voltage (12-bit, 4096)\n             */\n            for (int floatVals = 0; floatVals &lt; fftLen; floatVals++)\n            {\n                Xfft[floatVals] = (float) Xin[floatVals]; * 3.6 / 4096\n            }\n\n            /*\n             * Fourier transform\n             */\n            arm_cfft_f32(&amp;arm_cfft_sR_f32_len1024, Xfft, 0, 0); // Calculate complex fourier transform of x time signal, processing occurs in place\n\n            for (int fix_fft = 0 ; fix_fft &lt; half_fftLen ; fix_fft++)\n            {\n                Xfft[fix_fft] = 2 * Xfft[fix_fft] / fftLen;\n                Xfft[fix_fft + half_fftLen] = 0;\n            }\n\n           /*\n            * Amplitude calculation\n            */\n            arm_cmplx_mag_f32(Xfft, Xdsp, fftLen);  // Calculate the magnitude of the fourier transform for x axis\n\n            /*\n             *  Finds all signal strengths for allocated frequency indexes\n             */\n            for(int strength_index = 0; strength_index &lt; 3; strength_index++) // Loops through xyz frequencies for all 3 magnetometer axis\n            {\n                int x_temp_index = X_mag[strength_index][0]; // temp int necessary to store the strength, otherwise infinite loop?\n                X_mag[strength_index][2] = Xfft[x_temp_index]; // = Xfft[2*x_temp_index];\n\n            }\n            conversionPaused = 0;\n          }\n      } // While() end\n} // Main() end\n</code></pre>\n\n<p>I do not know how I am to calculate the frequency bins for this combination of cfft and complex magnitude, as I would expect the even indexes of the array to hold the real values and the odd indexes of the array to hold the imaginary phase values. I reference some <a href=\"https://community.arm.com/developer/tools-software/tools/f/keil-forum/6212/cmsis-dsp-cfft-with-q15-wrong-output\" rel=\"nofollow noreferrer\">1</a> <a href=\"https://community.st.com/s/question/0D50X00009Xkg0WSAR/cmsis-dsp-lib-frequency-bin-example\" rel=\"nofollow noreferrer\">2</a> <a href=\"https://community.st.com/s/question/0D50X00009Xkg0WSAR/cmsis-dsp-lib-frequency-bin-example\" rel=\"nofollow noreferrer\">3</a> examples but could not make out what I am doing wrong with my code.</p>\n\n<p>However as per the images when applying an input signal of 30.1 kHz neither the 301 bin index or the 602 bin index holds the corresponding output expected?</p>\n\n<p><a href=\"https://imgur.com/z8hKySe.png\" rel=\"nofollow noreferrer\">301 bin index</a></p>\n\n<p><a href=\"https://imgur.com/IyHTbc3.png\" rel=\"nofollow noreferrer\">602 bin index</a></p>\n\n<hr>\n\n<p><strong>EDIT:</strong></p>\n\n<p><a href=\"https://raw.githubusercontent.com/ARM-software/CMSIS/master/CMSIS/DSP_Lib/Examples/arm_fft_bin_example/ARM/arm_fft_bin_example_f32.c\" rel=\"nofollow noreferrer\">I have since tried to implement the arm_cfft_f32 example given here</a>. This latter example is completely broken as the external 10 kHz dataset is no longer included by default and trying to include it is not possible, as the program behaves poorly and keeps erroring about a return data type that is not even present in the first place. Thus I cannot use the example program given for this: it also appears to be 4 years out of date, so that is not surprising.</p>\n\n<p>The arm_max_f32() function also proved not fruitful as it keeps homing in on the noise generated at bin 0 via using an analog generated signal. Manually setting this bin 0 to equal 0 then upsets the algorithm which starts pointing to random values that are not even the largest value present in the system. </p>\n\n<p>Even when going manually through the CFFT data and magnitude it appears as if they are not working correctly. There are random noise values all over the spectrum parts, whilst the oscilloscope confirms that large outcomes should only be present at 0 Hz and the selected signal generator frequency (thus corresponding to a frequency bin).</p>\n\n<p>Using CMSIS is extremely frustrating for me because of the little documentation and examples available, which is then further reduced by most of it simply not working (without major modification). </p>\n"}, {"tags": ["c", "linux", "process"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1562085540, "post_id": 56856275, "comment_id": 100263761, "body": "This is probably useful information:  <a href=\"https://unix.stackexchange.com/questions/250153/what-is-a-subreaper-process\" title=\"what is a subreaper process\">unix.stackexchange.com/questions/250153/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 15228010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a2e875b2c873605ebc361d5f766fdc?s=128&d=identicon&r=PG&f=1", "display_name": "Sunil Kumar", "link": "https://stackoverflow.com/users/15228010/sunil-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1617688623, "creation_date": 1617688623, "answer_id": 66963370, "question_id": 56856275, "link": "https://stackoverflow.com/questions/56856275/is-there-some-short-example-of-how-to-use-prctl-when-it-comes-to-setting-subre/66963370#66963370", "title": "Is there some short example of how to use prctl() when it comes to setting subreapers?", "body": "<p>Here is a small program of how PR_SET_CHILD_SUBREAPER works</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/prctl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    int *status;\n    int i=0;\n\n    prctl(PR_SET_CHILD_SUBREAPER, 1, 0, 0, 0);\n    perror(&quot;PARENT:Set&quot;);\n    printf(&quot;PARENT: %d :  my dad : %d\\n&quot;, getpid(), getppid());\n    if(fork() != 0)\n    {\n        while(1)\n        {\n            wait(status);\n            if(++i == 2)\n            {\n                break;\n            }\n        }\n        int p = 1;\n        prctl(PR_GET_CHILD_SUBREAPER, &amp;p);\n        printf(&quot;PARENT : %d\\n&quot;,p);\n        printf(&quot;PARENT Exiting\\n&quot;);\n    }\n    else\n    {\n        printf(&quot;Before CHILD: %d: my dad  %d\\n&quot;,getpid(), getppid());\n        if(fork() == 0)\n        {\n            int p = 1;\n            printf(&quot;Before grandchild: %d: my dad %d\\n&quot;,getpid(), getppid());\n            sleep(2);\n            printf(&quot;After grandchild: %d: my dad %d\\n&quot;,getpid(), getppid());\n            prctl(PR_GET_CHILD_SUBREAPER, &amp;p);\n            printf(&quot;After grandchild : %d\\n&quot;,p);\n            printf(&quot;Grandchild Exiting\\n&quot;);\n            exit(0);\n        }\n        else\n        {\n            int p = 1;\n            prctl(PR_GET_CHILD_SUBREAPER, &amp;p);\n            printf(&quot;After CHILD : %d\\n&quot;,p);\n            printf(&quot;After CHILD: %d: my dad  %d\\n&quot;,getpid(), getppid());\n            printf(&quot;CHILD Exiting\\n&quot;);\n            exit(1);\n        }\n    }   \n    return 0;\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>PARENT:Set: Success\nPARENT: 4002 :  my dad : 2222\nBefore CHILD: 4003: my dad  4002\nAfter CHILD : 0\nAfter CHILD: 4003: my dad  4002\nCHILD Exiting\nBefore grandchild: 4004: my dad 4003\nAfter grandchild: 4004: my dad 4002\nAfter grandchild : 0\nGrandchild Exiting\nPARENT : 1\nPARENT Exiting\n</code></pre>\n<p>Observation:</p>\n<p>The PARENT process(4002) has become the sub reaper by setting PR_SET_CHILD_SUBREAPER</p>\n<p>The PARENT process(4002) has forked and created CHILD process(4003)</p>\n<p>The CHILD process(4003) has forked and created Grandchild process(4004)</p>\n<p>The CHILD process(4003) tries to use PR_GET_CHILD_SUBREAPER and receives 0. Since, prctl() has only instance it will not retain in the forked processes. <a href=\"https://stackoverflow.com/questions/32004492/does-the-child-subreaper-bit-persist-across-fork\">Does the CHILD_SUBREAPER bit persist across fork()?</a></p>\n<p>The CHILD process(4003) terminates making Grandchild process(4004) orphan process</p>\n<p>Since, The PARENT process(4002) has been set as SUBREAPER Grandchild process(4004) becomes child of PARENT process(4002) and exit status of Grandchild process(4004) is received by PARENT process(4002) since, Child process has terminated</p>\n"}], "owner": {"reputation": 31, "user_id": 11511818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df94ed7171676e03584363771318c8c1?s=128&d=identicon&r=PG&f=1", "display_name": "Fly_37", "link": "https://stackoverflow.com/users/11511818/fly-37"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1617688623, "creation_date": 1562083254, "last_edit_date": 1562139309, "question_id": 56856275, "link": "https://stackoverflow.com/questions/56856275/is-there-some-short-example-of-how-to-use-prctl-when-it-comes-to-setting-subre", "title": "Is there some short example of how to use prctl() when it comes to setting subreapers?", "body": "<p>I am currently trying to learn how to use Linux <code>prctl(PR_SET_CHILD_SUBREAPER)</code>, and <code>prctl(PR_GET_CHILD_SUBREAPER)</code>. </p>\n\n<p>Unfortunately, I don't seem to understand what is going on when I use these functions. Can someone help me to spot a slip in my understanding?</p>\n\n<p>I've set the main process as subreaper. Then I tried to use <code>fork()</code> to create a child process and did it again to obtain a grandchild process. Then I killed child process, to see what happened with the grandchild, but I am unable to check it. </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int main(void) {\n    int p = fork();\n    prctl(PR_SET_CHILD_SUBREAPER, 1);\n    if(p &lt; 0)\n        return EXIT_FAILURE;\n    if(p &gt; 0){\n        //Main process\n        printf(\"I am the MainProcess, My PID: %d and PPID: %d\\n\", getpid(), getppid());\n    }\n    else{\n        printf(\"I am the Child, My PID: %d and PPID: %d\\n\", getpid(), getppid());\n\n        int p2 = fork();\n        if(p2 &lt; 0)\n            return EXIT_FAILURE;\n        if(p2 &gt; 0){\n            //still Child process\n        }\n        else{\n            int *reaper = NULL;\n            prctl(PR_GET_CHILD_SUBREAPER, reaper);\n            printf(\"I am the Grandchild, My PID: %d and PPID: %d\\n\", getpid(), getppid());\n            printf(\"Reaper ID: %d\\n\", *reaper);\n            kill(getppid(), SIGKILL);\n            printf(\"I am the Grandchild, My PID: %d and PPID: %d\\n\", getpid(), getppid());\n            prctl(PR_GET_CHILD_SUBREAPER, reaper);\n            printf(\"Reaper ID: %d\\n\", *reaper);\n        }\n        return EXIT_SUCCESS;\n    }\n  return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>I am the MainProcess, My PID: 9088 and PPID: 23010\nI am the Child, My PID: 9089 and PPID: 9088\nI am the Grandchild, My PID: 9090 and PPID: 9089\n</code></pre>\n\n<p>To my surprise some <code>printf()</code> occurrences (in granchild part of code) were not called on runtime. What is the cause?</p>\n"}, {"tags": ["c", "printf", "pointer-arithmetic", "post-increment"], "comments": [{"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 1, "creation_date": 1562082620, "post_id": 56856016, "comment_id": 100262387, "body": "No, before the <code>printf</code> statement <code>str</code> is pointing to the newline."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1562212167, "post_id": 56856016, "comment_id": 100308984, "body": "Im nor sure what you thing this statement is doing: <code>printf(str-2, 300);</code>  however, the first parameter is expected to be the format string.  the second and following parameters are the values to supply to the output format specifiers in the format string.  However, it is considered a security risk to reference some variable for the format string"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 5, "last_activity_date": 1562082529, "creation_date": 1562082529, "answer_id": 56856076, "question_id": 56856016, "link": "https://stackoverflow.com/questions/56856016/having-trouble-regarding-output-of-a-printf-statement/56856076#56856076", "title": "Having trouble regarding output of a printf statement", "body": "<p>Right before the <code>printf</code>, <code>str</code> is <strong>not</strong> pointing to the <code>%</code> but to the <code>\\n</code>.  </p>\n\n<p>The <code>++</code> operator increments the value of <code>str</code> to point to the next character in the array.  Since this is done twice, it points to the <code>\\n</code>.  When you then pass <code>str-2</code> to <code>printf</code>, it creates a pointer pointing back to the <code>%</code>.  So <code>printf</code> sees the string <code>\"%d\\n\"</code> which causes 300 to be printed as expected.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1562082998, "creation_date": 1562082998, "answer_id": 56856207, "question_id": 56856016, "link": "https://stackoverflow.com/questions/56856016/having-trouble-regarding-output-of-a-printf-statement/56856207#56856207", "title": "Having trouble regarding output of a printf statement", "body": "<p><code>2 - 2</code> is equal to <code>0</code>.:)</p>\n\n<p>In fact these two expression statements</p>\n\n<pre><code>str++;\nstr++;\n</code></pre>\n\n<p>that can be rewritten like</p>\n\n<pre><code>str = str + 1;\nstr = str + 1;\n</code></pre>\n\n<p>are equivalent to one statement</p>\n\n<pre><code>str = str + 2;\n</code></pre>\n\n<p>Then in the statement with printf</p>\n\n<pre><code>printf(str-2, 300);\n</code></pre>\n\n<p>you are using the expression <code>str-2</code> that points to the first character of the string literal <code>\"%d\\n\"</code> Or the value of the expression <code>str-2</code> is equal to the original value of <code>str</code>.</p>\n\n<p>(Do you remember that <code>2 - 2 == 0</code>?)</p>\n\n<p>So the statement above is equivalent to</p>\n\n<pre><code>printf(str, 300);\n</code></pre>\n\n<p>when <code>str</code> was initially initialized by the string literal <code>\"%d\\n\"</code></p>\n"}], "owner": {"reputation": 75, "user_id": 6396123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d0a093c91610c0cebb9babe9a49c2d?s=128&d=identicon&r=PG&f=1", "display_name": "SomeCoder", "link": "https://stackoverflow.com/users/6396123/somecoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 56856076, "answer_count": 2, "score": 1, "last_activity_date": 1562083215, "creation_date": 1562082294, "last_edit_date": 1562083215, "question_id": 56856016, "link": "https://stackoverflow.com/questions/56856016/having-trouble-regarding-output-of-a-printf-statement", "title": "Having trouble regarding output of a printf statement", "body": "<p>I am having some trouble understanding the output of the following code snippet.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    char *str;\n    str = \"%d\\n\";\n    str++;\n    str++;\n    printf(str-2, 300);\n    return 0;\n}\n</code></pre>\n\n<p>The output of the code is 300.</p>\n\n<p>I understand that Until the line before the <code>printf</code> statement, <code>str</code> is pointing to the character-<code>%</code>. What I need help with is understanding that why is the <code>printf</code> function printing 300.</p>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 11660, "user_id": 2055998, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/2Vx3A.jpg?s=128&g=1", "display_name": "PM 77-1", "link": "https://stackoverflow.com/users/2055998/pm-77-1"}, "edited": false, "score": 0, "creation_date": 1562082293, "post_id": 56855913, "comment_id": 100262205, "body": "Have a look:  <a href=\"https://stackoverflow.com/questions/3025050/error-initializer-element-is-not-constant-when-trying-to-initialize-variable-w/3025106\" title=\"error initializer element is not constant when trying to initialize variable w\">stackoverflow.com/questions/3025050/&hellip;</a>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 11660, "user_id": 2055998, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/2Vx3A.jpg?s=128&g=1", "display_name": "PM 77-1", "link": "https://stackoverflow.com/users/2055998/pm-77-1"}, "edited": false, "score": 2, "creation_date": 1562082399, "post_id": 56855913, "comment_id": 100262262, "body": "@PM77-1: That&#39;s not the issue. The question isn&#39;t whether the expression <code>constant</code> is a constant expression, it&#39;s whether its initializer is a constant expression."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1562082466, "post_id": 56855913, "comment_id": 100262296, "body": "Could it be that some subexpression overflows the range of <code>int</code>? (Note that clang doesn&#39;t complain.) Could be a gcc bug."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1562082491, "post_id": 56855913, "comment_id": 100262309, "body": "@vaigult I can&#39; not reproduce the error."}, {"owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "reply_to_user": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1562082609, "post_id": 56855913, "comment_id": 100262381, "body": "@VladfromMoscow it reproduces only on gcc-9.1, which I installed from <code>ppa:ubuntu-toolchain-r&#47;test</code>."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1562082874, "post_id": 56855913, "comment_id": 100262508, "body": "Out of curiosity... where did this constant expression come from?  Were you trying to break the compiler?"}, {"owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1562083020, "post_id": 56855913, "comment_id": 100262579, "body": "@ChristianGibbons the issue looked way more complicated initially. I extracted this expression out of a huge <code>#define</code> macro evaluation by using <code>gcc -E</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1562083491, "post_id": 56855913, "comment_id": 100262806, "body": "&quot;it reproduces only on gcc-9.1&quot;, if true, is a strong reason to suspect a compiler bug.  I can confirm that my GCC 4.8.5 accepts the initializer without any complaint, and as far as I can tell from personal examination, the troublesome initializer does have the form of an integer constant expression."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1562084295, "post_id": 56855913, "comment_id": 100263193, "body": "No problem with Visual C."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 4, "creation_date": 1562085658, "post_id": 56855913, "comment_id": 100263821, "body": "You have UB as a result of an overflowing left-shift, so this example does not demonstrate a compiler bug.  I&#39;m not sure whether that fully explains the issue, however.  Does GCC 9.1 still reject the code if you change the <code>(1 &lt;&lt; 6)</code> to <code>(1 &lt;&lt; 5)</code>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1562085802, "post_id": 56855913, "comment_id": 100263900, "body": "Using GCC 9.1.0 which I compiled on macOS 10.14.5 Mojave, I get no error report with GCC set fussy (<code>gcc -O3 -g -std=c11 -Wall -Wextra -Werror const23.c -o const23</code>), though I did replace <code>main</code> with <code>int main(void)</code> to avoid complaints about unused arguments.  I observe that <code>0</code> bitwise or&#39;d with anything is the same as &#39;anything&#39; \u2014 but that doesn&#39;t affect the discussion. \u2014\u2014 <b>BUT</b> if I add <code>-pedantic</code> to the options, then I get the error message.  I think it would probably be pedantically correct to assume this is erroneous."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1562086336, "post_id": 56855913, "comment_id": 100264126, "body": "@JohnBollinger: For me, if I change the first (only) <code>(1 &lt;&lt; 6)</code> to <code>(1 &lt;&lt; 5)</code>, the error message goes away.  The term becomes <code>((((1 &lt;&lt; 5) - 1) &lt;&lt; ((((0 + 8) + 8) + 3) + 7)) &amp; ((1) &lt;&lt; ((((0 + 8) + 8) + 3) + 7)))</code> which avoids shifting <code>1</code> left by 32 (the left shifting in total is 31) when you change 6 to 5.  That&#39;s probably a mix of &#39;good catch&#39; and &#39;poor message&#39; by the compiler."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1562086852, "post_id": 56855913, "comment_id": 100264323, "body": "Changing <code>(1 &lt;&lt; 6)</code> to <code>(1u &lt;&lt; 6)</code> also makes the error message go away."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1562091778, "post_id": 56855913, "comment_id": 100266289, "body": "I can reproduce the issue with all versions of gcc I have available, from 6.3.0 up to a pre-10.0.0 built from source."}], "answers": [{"comments": [{"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1562090814, "post_id": 56857403, "comment_id": 100265877, "body": "Tl;dr Why does an expression that would produce UB affect the compiler output? Is that a part of UB cases?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1562092257, "post_id": 56857403, "comment_id": 100266518, "body": "The error message is correct, but it could be improved by explaining <i>why</i> the expression is not a constant expression (in this case, that a subexpression overflows)."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1562092945, "post_id": 56857403, "comment_id": 100266784, "body": "@machine_1, in general, &quot;undefined behavior&quot; applies to the combination of program and C implementation.  It can manifest either at translation (compile) time or at run time.  Certain undefined behaviors make sense only at run time -- for instance, if they are contingent on externally-provided data -- but this is not such a case."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 14, "last_activity_date": 1562088630, "last_edit_date": 1562088630, "creation_date": 1562088299, "answer_id": 56857403, "question_id": 56855913, "link": "https://stackoverflow.com/questions/56855913/why-this-constant-expression-is-not-constant/56857403#56857403", "title": "Why this constant expression is not constant", "body": "<blockquote>\n  <p>I am getting this error:</p>\n\n<pre><code>main.c:1:29: error: initializer element is not a constant expression [-Werror=pedantic]\n</code></pre>\n  \n  <p>Why is that? Is this a compiler bug? Clearly, constant is initialized\n  with a constant expression.</p>\n</blockquote>\n\n<p>\"Constant expression\" is <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.6\" rel=\"noreferrer\">a defined term</a> in the language standard.  I suspect that GCC is using it that way, as the standard does require your initializer to be a constant expression in that sense.  Certainly the evaluation of your code needs to be performed in that light.</p>\n\n<p>There are two language constraints on constant expressions:</p>\n\n<blockquote>\n  <p>Constant expressions shall not contain assignment, increment,\n  decrement, function-call, or comma operators, except when they are\n  contained within a subexpression that is not evaluated.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>Each constant expression shall evaluate to a constant that is in the\n  range of representable values for its type.</p>\n</blockquote>\n\n<p>The former is not a problem for you.  The latter, however, <em>is</em> an issue on C implementations where type <code>int</code> has 31 or fewer value bits (including GCC on most platforms).  Consider in particular this sub-expression:</p>\n\n<pre><code>(((1 &lt;&lt; 6) - 1) &lt;&lt; ((((0 + 8) + 8) + 3) + 7))\n</code></pre>\n\n<p>... but for sanity, let's remove some unnecessary parentheses and simplify the right-hand side of the outer <code>&lt;&lt;</code> to get this, which preserves the relevant characteristics:</p>\n\n<pre><code>((1 &lt;&lt; 6) - 1) &lt;&lt; 26\n</code></pre>\n\n<p>All the individual numeric constants have type <code>int</code>, therefore so also do all the intermediate results (where the \"26\" in the simplified version corresponds to such an intermediate result in the original expression).  The arithmetically-correct result for that left shift requires at least 32 value bits, and because your <code>int</code> (probably) doesn't have that many, since one bit is reserved for the sign, the behavior is undefined.</p>\n\n<p>As such, there is no compiler bug here, though you might have a grounds for a quality of implementation complaint.  Likewise, no compiler that accepts the code without warning or error is for that reason buggy.  In a different sense, your code does violate a language constraint, and in that sense the compiler is obligated to emit a diagnostic, although the one it has chosen seems misleading.</p>\n\n<p>Furthermore, others' comments on the question seem to confirm that the overflow is correlated with the error, since changing the called-out expression from using <code>(1 &lt;&lt; 6)</code> to either <code>(1 &lt;&lt; 5)</code> or <code>(1u &lt;&lt; 6)</code> resolves the error for others who could reproduce it.  Both yield overall expression without any sub-expressions that have undefined behavior.</p>\n\n<p>Note well that it is almost always better to avoid signed integer types when you are doing bitwise manipulation.  As such, neglecting any impact on the larger program from which this was drawn, I would be inclined to rewrite your example program as</p>\n\n<pre><code>static const unsigned int constant = (0 \n    | ((((1u &lt;&lt; 6) - 1) &lt;&lt; ((((0 + 8) + 8) + 3) + 7)) &amp; ((1u) &lt;&lt; ((((0 + 8) + 8) + 3) + 7)))\n    | ((((1u &lt;&lt; 7) - 1) &lt;&lt; (((0 + 8) + 8) + 3))       &amp; ((0u) &lt;&lt; (((0 + 8) + 8) + 3)))\n    | ((((1u &lt;&lt; 3) - 1) &lt;&lt; ((0 + 8) + 8))             &amp; ((0u) &lt;&lt; ((0 + 8) + 8)))\n    | ((((1u &lt;&lt; 8) - 1) &lt;&lt; 0)                         &amp; ((1u) &lt;&lt; 0)));\n\nint main(void) {\n    // There's a potential issue with the conversion of the return value, too, but it\n    // does not affect the particular expression at issue here.\n    return constant;\n}\n</code></pre>\n\n<p>Note that the type of the result of a bitwise shift is determined by the type of its left-hand operand only.</p>\n"}], "owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 604, "favorite_count": 0, "accepted_answer_id": 56857403, "answer_count": 1, "score": 13, "last_activity_date": 1562088630, "creation_date": 1562081925, "question_id": 56855913, "link": "https://stackoverflow.com/questions/56855913/why-this-constant-expression-is-not-constant", "title": "Why this constant expression is not constant", "body": "<p>I have the following C listing:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>static const int constant = (0 | ((((1 &lt;&lt; 6) - 1) &lt;&lt; ((((0 + 8) + 8) + 3) + 7)) &amp; ((1) &lt;&lt; ((((0 + 8) + 8) + 3) + 7))) | ((((1 &lt;&lt; 7) - 1) &lt;&lt; (((0 + 8) + 8) + 3)) &amp; ((0) &lt;&lt; (((0 + 8) + 8) + 3))) | ((((1 &lt;&lt; 3) - 1) &lt;&lt; ((0 + 8) + 8)) &amp; ((0) &lt;&lt; ((0 + 8) + 8))) | ((((1 &lt;&lt; 8) - 1) &lt;&lt; 0) &amp; ((1) &lt;&lt; 0)));\n\nint main(int argc, char** argv)\n{\n    return constant;\n}\n\n</code></pre>\n\n<p>When I am trying to compile this with GCC-9.1 using this command line:</p>\n\n<pre><code>gcc-9 -Werror -Wpedantic main.c\n</code></pre>\n\n<p>I am getting this error:</p>\n\n<pre><code>main.c:1:29: error: initializer element is not a constant expression [-Werror=pedantic]\n</code></pre>\n\n<p>Why is that? Is this a compiler bug? Clearly, <code>constant</code> is initialized with a constant expression.</p>\n"}, {"tags": ["c", "pointers", "malloc"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1562081858, "post_id": 56855852, "comment_id": 100261957, "body": "Is there room in your <code>full_path</code> for the null-terminator?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1562082048, "post_id": 56855852, "comment_id": 100262066, "body": "Actually, it&#39;s worse than that since you also try to concatenate <code>s2</code> to the end of <code>full_path</code> and you definitely don&#39;t leave room for that."}, {"owner": {"reputation": 55, "user_id": 8488309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874bb8ef88b3fd1f3205a5d3d7f4f244?s=128&d=identicon&r=PG&f=1", "display_name": "OmerFY", "link": "https://stackoverflow.com/users/8488309/omerfy"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1562082320, "post_id": 56855852, "comment_id": 100262221, "body": "@Christian Gibbons I just tried allocating more space for it and it worked, but my question is still why does having a printf solve the problem, or at least hide it?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1562082488, "post_id": 56855852, "comment_id": 100262306, "body": "@OmerFY: Undefined behavior is undefined. We&#39;re not going to figure out the precise implementation of your allocator just to tell you <i>how</i> it broke after you misused it. The answer is &quot;Don&#39;t misuse it&quot;."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1562082588, "post_id": 56855852, "comment_id": 100262363, "body": "Undefined behavior is undefined.  It is a futile exercise to reason with it.  It&#39;s perfectly within specifications for undefined behavior to cause The Sun to go dark."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 8488309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874bb8ef88b3fd1f3205a5d3d7f4f244?s=128&d=identicon&r=PG&f=1", "display_name": "OmerFY", "link": "https://stackoverflow.com/users/8488309/omerfy"}, "edited": false, "score": 0, "creation_date": 1562082694, "post_id": 56855998, "comment_id": 100262418, "body": "Thank you so much!"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1562082238, "creation_date": 1562082238, "answer_id": 56855998, "question_id": 56855852, "link": "https://stackoverflow.com/questions/56855852/why-does-malloc-corrupted-top-size-error-get-fixed-when-i-have-printf-bef/56855998#56855998", "title": "Why does &quot;malloc(): corrupted top size&quot; error get fixed when I have printf() before/after it?", "body": "<p>You're not allocating enough space for <code>full_path</code>:</p>\n\n<pre><code>char* full_path = (char*)malloc(strlen(backup_path) * sizeof(char));\n</code></pre>\n\n<p>It needs to be at least as long as <code>backup_path</code> <strong>and</strong> <code>s2</code>, plus 1 for the terminating null byte, but you only have enough for <code>backup_path</code>.  This results in you writing past the end of allocated memory which invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.  </p>\n\n<p>With undefined behavior, you can't predict what your program will do.  It could crash, it could output strange results, or it can appear to work properly.  Also, making a seemingly unrelated code change can change how UB manifests itself.  This is exactly what you saw when you removed the <code>printf</code> call.  With the <code>printf</code> the program \"worked\" while without it the program crashed.</p>\n\n<p>To allocate the proper amount of space:</p>\n\n<pre><code>char* full_path = (char*)malloc(strlen(backup_path) + strlen(s2) + 1);\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 8488309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874bb8ef88b3fd1f3205a5d3d7f4f244?s=128&d=identicon&r=PG&f=1", "display_name": "OmerFY", "link": "https://stackoverflow.com/users/8488309/omerfy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6974, "favorite_count": 0, "accepted_answer_id": 56855998, "answer_count": 1, "score": 2, "last_activity_date": 1562085136, "creation_date": 1562081728, "last_edit_date": 1562085136, "question_id": 56855852, "link": "https://stackoverflow.com/questions/56855852/why-does-malloc-corrupted-top-size-error-get-fixed-when-i-have-printf-bef", "title": "Why does &quot;malloc(): corrupted top size&quot; error get fixed when I have printf() before/after it?", "body": "<p>Given an absolute path I am trying to get the part that comes after a certain directory. <code>getTargetPath</code> function does that and when I compile and run the code below, the code gives me the expected output. </p>\n\n<p>The problem is when I remove the <code>printf(\"\\n\")</code> before the line with <code>malloc</code> in main, I get:  </p>\n\n<p><em>malloc(): corrupted top size<br>\nAborted (core dumped)</em>  </p>\n\n<p>So when I put a <code>printf(\"\\n\")</code> before or after the line with <code>malloc</code> the code seems to work fine but when I remove it, I get the error above.</p>\n\n<p>My question is, why does this happen? I am not asking for a solution to my problem with the path string. I just want to learn what causes this behavior.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nconst char* getTargetPath(const char* source)\n{\n    int count = 0;\n    int i = 0;\n\n    while(*source)\n    {\n        if (*source == '/')\n        {\n            ++count;\n            if (count == 4)\n            {\n                break;\n            }\n        }\n        ++source;\n    }\n\n    return source;\n}\n\n\nint main()\n{\n    const char* backup_path = \"/home/ofy/real_2\";\n    char temp1[] = \"/home/dir1/dir2/dir3/dir4/dir5\";\n    const char* s1 = temp1;\n\n    const char* s2 = getTargetPath(s1);\n\n    printf(\"\\n\");\n    char* full_path = (char*)malloc(strlen(backup_path) * sizeof(char));\n\n    strcpy(full_path, backup_path);\n    strcat(full_path, s2);\n\n    printf(\"%s\\n\", full_path);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "csv", "uint64"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 2, "creation_date": 1562081546, "post_id": 56855767, "comment_id": 100261788, "body": "How does it fail? What does it do wrong?"}, {"owner": {"reputation": 1, "user_id": 11730089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/348be01ae00a9f1384090cfd71a8648a?s=128&d=identicon&r=PG&f=1", "display_name": "CSLearner", "link": "https://stackoverflow.com/users/11730089/cslearner"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1562081960, "post_id": 56855767, "comment_id": 100262015, "body": "It triggers one of the <code>if</code> conditions in that function, but I&#39;ve been removing the <code>%</code> in the commented lines and none of the messages appear. I know it has to enter in one of those conditions as the <code>error</code> variables turns from 0 to 1, causing the program to stop."}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 2, "creation_date": 1562082191, "post_id": 56855767, "comment_id": 100262155, "body": "Have you run it in a debugger? That would be the easiest way to know what\u2019s happening"}, {"owner": {"reputation": 1, "user_id": 11730089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/348be01ae00a9f1384090cfd71a8648a?s=128&d=identicon&r=PG&f=1", "display_name": "CSLearner", "link": "https://stackoverflow.com/users/11730089/cslearner"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1562082251, "post_id": 56855767, "comment_id": 100262187, "body": "No I haven&#39;t. I&#39;m programming in Geany and using the command line (this is one of my first C programs and haven&#39;t used a debugger ever)"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1562096111, "last_edit_date": 1562096111, "creation_date": 1562094622, "answer_id": 56858721, "question_id": 56855767, "link": "https://stackoverflow.com/questions/56855767/import-data-from-simple-csv-file-as-uint64-t-manually/56858721#56858721", "title": "Import data from simple .csv file as uint64_t manually", "body": "<p>the posted code, using gcc via geany results in: </p>\n\n<pre><code>gcc    -ggdb -Wall -Wextra -Wconversion -pedantic -std=gnu11  -c \"untitled.c\" \n\nuntitled.c: In function \u2018main\u2019:\n\nuntitled.c:114:39: warning: passing argument 4 of \u2018importMatrix\u2019 makes pointer from integer without a cast [-Wint-conversion]\n     importMatrix(argv[1], rows, cols, matrix[rows][cols]);\n                                       ^~~~~~\n\nuntitled.c:58:6: note: expected \u2018uint64_t (*)[(sizetype)(cols)]\u2019 but argument is of type \u2018uint64_t {aka long unsigned int}\u2019\n void importMatrix(char CSVFilePath[], size_t rows, size_t cols, uint64_t matrix[rows][cols])\n      ^~~~~~~~~~~~\n\nCompilation finished successfully\n</code></pre>\n\n<p>Both of the warnings are serious.  The result is the compiler generates the wrong code. please Fix those warnings and edit your question.</p>\n\n<p>This statement, in function: <code>main()</code>:</p>\n\n<pre><code>importMatrix(argv[1], rows, cols, matrix[rows][cols]);\n</code></pre>\n\n<p>results in passing (for the 4th parameter) the contents of memory, 1 past the end of the array: <code>matrix[][]</code>   The statement should be:</p>\n\n<pre><code>importMatrix( argv[1], rows, cols, matrix );\n</code></pre>\n\n<p>OT:  regarding this statement:</p>\n\n<pre><code>fprintf(stderr, \"Usage: ./&lt;program&gt; &lt;file.csv&gt;\\n\");\n</code></pre>\n\n<p>The program can be run under any name. Therefore suggest the statement be:</p>\n\n<pre><code>fprintf(stderr, \"Usage: %s &lt;file.csv&gt;\\n\", argv[0]);\n</code></pre>\n\n<p>Then the actual execution name will be displayed</p>\n\n<p>OT: regarding this statement:</p>\n\n<pre><code>return malloc (sizeof(uint64_t[rows][cols]));\n</code></pre>\n\n<p>strongly suggest using:</p>\n\n<pre><code>return malloc( sizeof( uint64_t ) * rows * cols );\n</code></pre>\n\n<p>Then in function: <code>importMatrix()</code> after calling: <code>newMatrix()</code></p>\n\n<p>this statement:</p>\n\n<pre><code>uint64_t (*matrix)[rows] = newMatrix(rows, cols);\n</code></pre>\n\n<p>is not correct, because the call to <code>newMatrix()</code> is NOT returning an array of pointers, so the statement should be similar to:</p>\n\n<pre><code>typedef matrixType uint64_t matrix[rows][cols]; \nmatrixType * matrix = newMatrix(rows, cols);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11730089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/348be01ae00a9f1384090cfd71a8648a?s=128&d=identicon&r=PG&f=1", "display_name": "CSLearner", "link": "https://stackoverflow.com/users/11730089/cslearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562096111, "creation_date": 1562081374, "last_edit_date": 1562081454, "question_id": 56855767, "link": "https://stackoverflow.com/questions/56855767/import-data-from-simple-csv-file-as-uint64-t-manually", "title": "Import data from simple .csv file as uint64_t manually", "body": "<p>I've been struggling with this program for a long time. The goal is to read a simple .csv file without using libcsv.\nAfter researching and programming I've come up with this implementation. It's almost there but it fails just at the end.</p>\n\n<p>I suspect the error is in the line with <code>str2uint64_t(ptr, &amp;int64_converted, &amp;error);</code> but I can't figure out why.</p>\n\n<p>In case it might help, I've adapted this implementation from the one I've found in this web page:\n<a href=\"https://cboard.cprogramming.com/c-programming/47105-how-read-csv-file.html\" rel=\"nofollow noreferrer\">https://cboard.cprogramming.com/c-programming/47105-how-read-csv-file.html</a></p>\n\n<p>By the way, the program can be compiled and called as:\n<code>gcc -o q q.c &amp;&amp; ./q file.csv</code></p>\n\n<p>Where <code>file.csv</code> might be something like:</p>\n\n<pre><code>0,10,20,300,905\n55,18,8,253,65\n0,18,265,293,98\n23,18,28,6675,86\n677,20,28,293,100\n</code></pre>\n\n<p>The implementation:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;inttypes.h&gt;\n#include &lt;errno.h&gt;\n\n\nvoid str2uint64_t(const char *str, uint64_t *intConverted, int *error) \n{\n    // Converts string to uint64_t    \n\n    *intConverted = 0;\n    *error = 0;\n\n    const char *s = str;\n\n    int sign = *s;\n\n    char *end;\n    errno = 0;\n    const uint64_t sl = strtoull(str, &amp;end, 10);\n\n    if (end == str) \n    {\n        //fprintf(stderr, \"%s: not a decimal number\\n\", str);\n        *error = 1;\n    } \n\n    else if ('\\0' != *end) \n    {\n        //fprintf(stderr, \"%s: extra characters at end of input: %s\\n\", str, end);\n        *error = 1;\n    } \n\n    else if (ERANGE == errno) \n    {\n        //fprintf(stderr, \"%s out of range of type uint64_t\\n\", str);\n        *error = 1;\n    } \n\n    else if (sign == '-') \n    {\n        //fprintf(stderr, \"%s negative\\n\", 0);\n        //errno = ERANGE;\n        *error = 1;\n    }\n\n    //return sl;\n    *intConverted = sl;\n}\n\n\nvoid *newMatrix(size_t rows, size_t cols)\n{ \n    return malloc (sizeof(uint64_t[rows][cols]));\n}\n\n\nvoid importMatrix(char CSVFilePath[], size_t rows, size_t cols, uint64_t matrix[rows][cols])\n{\n    size_t i, j;\n\n    uint64_t int64_converted;\n    int error = 0;\n\n\n    FILE *CSVfile = fopen(CSVFilePath, \"r\");\n\n    if (CSVfile == NULL)\n    {\n        perror(\"Error\");\n        exit(EXIT_FAILURE);\n    }   \n\n    char buffer[BUFSIZ], *ptr;\n\n    for (i = 0; fgets(buffer, sizeof buffer, CSVfile); ++i)\n    {\n       for (j = 0, ptr = buffer; j &lt; rows; ++j, ++ptr)\n       {\n            str2uint64_t(ptr, &amp;int64_converted, &amp;error);\n\n            if (error == 0)\n            {\n                // From https://cboard.cprogramming.com/c-programming/47105-how-read-csv-file.html &gt;&gt; array[i][j] = (int)strtol(ptr, &amp;ptr, 10);\n                matrix[i][j] = int64_converted;\n            }\n\n            else\n            {\n                printf(\"Failed to import matrix\\n\");\n                exit(0);\n            }\n         }\n      }\n      fclose(CSVfile);\n\n      putchar('\\n');\n}\n\n\nint main(int argc, char *argv[])\n{\n    if (argc &lt; 2)\n    {\n        fprintf(stderr, \"Usage: ./&lt;program&gt; &lt;file.csv&gt;\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    size_t rows = 5;\n    size_t cols = rows;\n\n    uint64_t (*matrix)[rows] = newMatrix(rows, cols);\n\n    importMatrix(argv[1], rows, cols, matrix[rows][cols]);\n\n    //////////////////////////////\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "random", "genetic-algorithm", "populate", "evolutionary-algorithm"], "comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1562080170, "post_id": 56855232, "comment_id": 100260943, "body": "What is your code supposed to do? (Note that it lakes a <code>}</code> to compile) Could you add some comments explaining your code? In my test, the <code>if</code> block is entered some times."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1562080193, "post_id": 56855232, "comment_id": 100260958, "body": "the posted code does not compile!  regarding: <code>if(bench.days[d][h]==0&amp;&amp;oldpop.subjects[s]!=0)             {                     printf(&quot;\\nif condition reached\\n&quot;);                  oldpop.days[d][h]=10+s;                  bench.days[d][h]=11111;                  stop=0;                  cou--;                  oldpop.subjects[s]--;             else               {</code>  This is missing the <code>}</code> before the <code>else</code> statement."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1562080684, "post_id": 56855232, "comment_id": 100261264, "body": "OT: for ease of readability and understanding: 1) place an appropriate space: inside parens, inside braces, inside brackets, after commas, after semicolons, around C operators.  2) follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>  3) variable and parameter names should indicate <code>content</code> or <code>usage</code> (or better, both)  names like <code>h</code> and <code>d</code> and <code>s</code> are meaningless, even in the current context"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1562081159, "post_id": 56855232, "comment_id": 100261542, "body": "OT: the posted code contains several &#39;magic&#39; numbers.  I.E. 5, 6, 9.  &#39;magic&#39; numbers make the code much more difficult to understand, debug, etc  Suggest using an <code>enum</code> statement or <code>#define</code> statements to give those &#39;magic&#39; numbers meaningful names, then use those meaningful names throughout the code."}, {"owner": {"reputation": 1, "user_id": 11729875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3u7S-5HhEio/AAAAAAAAAAI/AAAAAAAAWVs/I4c5gwa3MOM/photo.jpg?sz=128", "display_name": "Vinay Mathew", "link": "https://stackoverflow.com/users/11729875/vinay-mathew"}, "edited": false, "score": 0, "creation_date": 1562081334, "post_id": 56855232, "comment_id": 100261642, "body": "My code is supposed to initialise the variable oldpop i.e, to create a random timetable in the days variable. The structure contains the six subjects, each subject is given the number of hours it has to be taught per week. This oldpop.subjects file consists of number of hours each subjects index is supposed to be taught each week. So each time one subject is placed in the days, it is subtacted from the respective index value fro oldpop.subject[index] is decremented. Hereby all the subjects can be placed in this timetable randomly."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1562081422, "post_id": 56855232, "comment_id": 100261705, "body": "regarding: <code>main()</code>  This will cause the compiler to output a warning message, similar to: <i>untitled.c:18:1: warning: return type defaults to \u2018int\u2019 [-Wimplicit-int]</i>.   There are only two valid signatures for <code>main()</code> they are: <code>int main( void )</code> and <code>int main( int argc, char *argv[] )</code>  Old compilers (including visual studio)  fail to meet the requirements of the C standard"}, {"owner": {"reputation": 1, "user_id": 11729875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3u7S-5HhEio/AAAAAAAAAAI/AAAAAAAAWVs/I4c5gwa3MOM/photo.jpg?sz=128", "display_name": "Vinay Mathew", "link": "https://stackoverflow.com/users/11729875/vinay-mathew"}, "edited": false, "score": 0, "creation_date": 1562081456, "post_id": 56855232, "comment_id": 100261736, "body": "The objective is to initialise oldpop.days[][] randomly, given that the subjects are 6 and each subject has a minimum number of hours/ week. I tried changing the code several times, but sometimes I get one subject value coming up in the days array having more than the number of hours it should be taught"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1562081748, "post_id": 56855232, "comment_id": 100261908, "body": "regarding: <code>n = rand() % (upper-lower)+ lower;</code>   Before calling <code>rand()</code>, the function <code>srand()</code> must be called (only once) early in the <code>main()</code> function.  The function: <code>srand()</code> is usually called via: <code>srand( (unsigned)time( NULL ) );</code> to initialize the random number generator"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1562081925, "post_id": 56855232, "comment_id": 100261994, "body": "OT:  regarding: <code>#include&lt;stdio.h&gt; #include&lt;math.h&gt; #include&lt;stdlib.h&gt; #include&lt;ctype.h&gt; #include&lt;time.h&gt;</code>   it is a poor programming practice to include header files those contents are not used.  The header files: <code>time.h</code> and <code>ctype.h</code> and <code>math.h</code> are not used, so suggest removing them"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1562082277, "post_id": 56855232, "comment_id": 100262200, "body": "OT:  for ease of readability and understanding (by us humans, the compiler doesn&#39;t care)  Please consistently indent the code.  Indent after every opening brace &#39;{&#39;.  Unindent before every closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1562082890, "post_id": 56855232, "comment_id": 100262518, "body": "OT: regarding; <i>My code is supposed to initialise ...</i>  clarifying information should be in the question, itself, not scattered in the comments to the question"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11729875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3u7S-5HhEio/AAAAAAAAAAI/AAAAAAAAWVs/I4c5gwa3MOM/photo.jpg?sz=128", "display_name": "Vinay Mathew", "link": "https://stackoverflow.com/users/11729875/vinay-mathew"}, "edited": false, "score": 0, "creation_date": 1562081810, "post_id": 56855810, "comment_id": 100261936, "body": "Hello, thank you so much this worked. My objective is to create an array of oldpops which have random timetables created for each iteration. So the entire code must run say 5 times to create 5 different timetables. Can you suggest some efficient way to edit the code this way?"}, {"owner": {"reputation": 1, "user_id": 11729875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3u7S-5HhEio/AAAAAAAAAAI/AAAAAAAAWVs/I4c5gwa3MOM/photo.jpg?sz=128", "display_name": "Vinay Mathew", "link": "https://stackoverflow.com/users/11729875/vinay-mathew"}, "edited": false, "score": 0, "creation_date": 1562082209, "post_id": 56855810, "comment_id": 100262163, "body": "Yes that is a good adittion, i will surely implement it. However if I need to create say 5 random timetables of oldpop, thats is an array of oldpop can you recommend a better method. Thank you soo much. Youve genuinely saved my life,"}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 0, "last_activity_date": 1562082051, "last_edit_date": 1562082051, "creation_date": 1562081562, "answer_id": 56855810, "question_id": 56855232, "link": "https://stackoverflow.com/questions/56855232/my-c-code-for-a-genetic-algortihtm-is-not-functioning-it-dosent-enter-into-the/56855810#56855810", "title": "My C code for a genetic algortihtm is not functioning, it dosent enter into the if condition", "body": "<p>The problem in your program comes from the subject selection (after adding the missing <code>}</code>):</p>\n\n<pre><code>s=random_number_creator(5,0); \n</code></pre>\n\n<p>Will return a random number between 0 and 4 included.</p>\n\n<p>To correct this, just replace this line by </p>\n\n<pre><code>s=random_number_creator(7,0);\n</code></pre>\n\n<p>To pick a number between 0 and 6. So the <code>cou</code> variable will be able to reach <code>0</code></p>\n\n<hr>\n\n<p>Your code can be improved:</p>\n\n<p>Instead of this kind of block:</p>\n\n<pre><code>for(i=0;i&lt;5;i++)\n{\n    printf(\"final entery \\n\");\n    for(j=0;j&lt;9;j++)\n        printf(\"    %d\",oldpop.days[i][j]);\n\n}\n</code></pre>\n\n<p>Create a function, learn to use <code>printf</code>:</p>\n\n<pre><code>void print_table(struct pop pop, const char *label)\n{\n    int i, j;\n    printf(\"\\n%s\\n\", label);\n    for (i=0;i&lt;5;i++)\n    { \n        for (j=0;j&lt;9;j++)\n        {\n            printf(\" %5d\",pop.days[i][j]);\n        }\n    }\n}\n</code></pre>\n\n<p>And use it this way</p>\n\n<pre><code>print_table(oldpop, \"oldpop\");\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11729875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3u7S-5HhEio/AAAAAAAAAAI/AAAAAAAAWVs/I4c5gwa3MOM/photo.jpg?sz=128", "display_name": "Vinay Mathew", "link": "https://stackoverflow.com/users/11729875/vinay-mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 56855810, "answer_count": 1, "score": -2, "last_activity_date": 1562082051, "creation_date": 1562079519, "last_edit_date": 1562081103, "question_id": 56855232, "link": "https://stackoverflow.com/questions/56855232/my-c-code-for-a-genetic-algortihtm-is-not-functioning-it-dosent-enter-into-the", "title": "My C code for a genetic algortihtm is not functioning, it dosent enter into the if condition", "body": "<p>This is GA for a timetable problem. I'm trying to create an initial population, but it isn't working as it isn't entering the if condition. can someone point out the error?</p>\n\n<p>I tried inserting statements in each condition, but everything checks out. Still, I don't seem to find a solution.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;ctype.h&gt;\n#include&lt;time.h&gt;\nint random_number_creator(int upper, int lower)\n{\n    int n;\n    n = rand() % (upper-lower)+ lower;\n    return n;\n}\n\nstruct pop{\n    int subjects[6];\n    int days[5][9];\n}oldpop, bench;\n\nmain()\n{\n    int i,j,s=1,d,h,stop=1,cou=0;\n    for(i=0;i&lt;5;i++)\n    {\n         for(j=0;j&lt;9;j++)\n         if(j!=6)\n            bench.days[i][j]=0;\n         else\n            bench.days[i][j]=11111;\n    }\n\n    for(i=0;i&lt;6;i++)\n    {   \n       if(i&lt;4)\n           oldpop.subjects[i]=3;\n       else \n           oldpop.subjects[i]=2;\n    }\n    for(i=0;i&lt;5;i++)\n    {\n      printf(\"\\n\");\n      for(j=0;j&lt;9;j++)\n        printf(\"    %d\",bench.days[i][j]);  \n    }\n    for(i=0;i&lt;6;i++)\n    {   \n        printf(\" \\n %d\",oldpop.subjects[i]);\n    }\n    cou=0;\n    for(i=0;i&lt;6;i++)\n    { \n        cou=cou+ oldpop.subjects[i];\n    }\n    printf(\"\\n%d\\n\",cou);\n    do\n    {   \n        s=random_number_creator(5,0);\n        printf(\"\\nsubject number:%d\\n\",s);\n        printf(\"\\nloop 1 entery %d\",cou);\n        do\n        {   \n            printf(\"\\nloop 2 entry\\n\");\n            d=random_number_creator(5,0);h=random_number_creator(8,0);\n            printf(\"\\nDay Number:%d   \\nHour Number:%d\\n\",d,h);\n            if(bench.days[d][h]==0&amp;&amp;oldpop.subjects[s]!=0)\n            {   \n                 printf(\"\\nif condition reached\\n\");\n                 oldpop.days[d][h]=10+s;\n                 bench.days[d][h]=11111;\n                 stop=0;\n                 cou--;\n                 oldpop.subjects[s]--;\n            }\n\n            else  \n            {\n                printf(\"\\nIf condition not satisified.\\n\");\n                break; \n            }\n        }while(stop!=0);\n    }while(cou!=0);\n\n    for(i=0;i&lt;5;i++)\n    {\n        printf(\"final entery \\n\");\n        for(j=0;j&lt;9;j++)\n            printf(\"    %d\",oldpop.days[i][j]);\n\n    }\n}\n</code></pre>\n\n<p>I want the oldpop variable to be initialized for this timetable problem but the code does not enter the if condition in the do while loop.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 4, "creation_date": 1562079605, "post_id": 56855176, "comment_id": 100260621, "body": "Yes, ignoring when it&#39;s used for multiplication, it has two meanings. When used as part of a type it makes the type be a pointer to the base type. When used with a value, it dereferences a pointer."}, {"owner": {"reputation": 159, "user_id": 11681952, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KdE2mz_Fj8s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reKRPAkfyUAVWuB4IbJ2Tig12c6_Q/mo/photo.jpg?sz=128", "display_name": "jjkl", "link": "https://stackoverflow.com/users/11681952/jjkl"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1562080019, "post_id": 56855176, "comment_id": 100260845, "body": "@ThomasJager Thanks for your reply. How do the two meanings you mention apply to the example of *IP in the function? I&#39;m not seeing how it would be the definition of a type or dereferencing."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1562080115, "post_id": 56855176, "comment_id": 100260904, "body": "<code>IP</code> is a pointer to a pointer to an <code>int</code>.  Thus <code>*IP</code> is a pointer to an <code>int</code>, just like <code>anotherIP</code> is.  And <code>**IP</code> is the <code>int</code> that <code>*IP</code> points to.  So it is not correct to say that &quot; it&#39;s assigning a local pointer to the pointer that **IP points to.&quot;"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1562080248, "post_id": 56855176, "comment_id": 100260987, "body": "I find it useful to reconcile these &quot;two meanings&quot; by thinking of a declaration like <code>int **IP</code> as saying that <code>**IP</code> is being declared as an <code>int</code> (that is, if you deferenece <code>IP</code> twice, you get an <code>int</code>), which means that <code>*IP</code> points to an <code>int</code> and <code>IP</code> points to that pointer."}, {"owner": {"reputation": 159, "user_id": 11681952, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KdE2mz_Fj8s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reKRPAkfyUAVWuB4IbJ2Tig12c6_Q/mo/photo.jpg?sz=128", "display_name": "jjkl", "link": "https://stackoverflow.com/users/11681952/jjkl"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1562081060, "post_id": 56855176, "comment_id": 100261486, "body": "@ScottHunter Ah so I was thinking of <code>**IP</code> in the reverse. So the correct way to say it would be that it is assigning <code>anotherIP</code> to the pointer to IP, (i.e. <code>*IP</code>), where the int itself is passed in via <code>**IP</code>? In this case, as you mention above, we are dereferencing twice. I&#39;ll make edits to my question."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 1, "creation_date": 1562081774, "post_id": 56855176, "comment_id": 100261915, "body": "@ThomasJager: The use of <code>*</code> in a declaration is not different from its use in a dereference expression. In <code>int *x;</code>, <code>*x</code> refer a potential result of dereferencing <code>x</code>, and <code>int</code> tells us that that result is an <code>int</code>. Thus, because <code>*x</code> is an <code>int</code>, the declaration says that <code>x</code> must be a pointer to an <code>int</code>. The design of C declarations is that a \u201cpicture\u201d of how a thing will be used is presented, and the declaration says what type of the resulting expression is. So <code>int y()</code> says the result of calling <code>y</code> will be an <code>int</code>, meaning <code>y</code> is a a function returning <code>int</code>."}, {"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1562082889, "post_id": 56855176, "comment_id": 100262517, "body": "@EricPostpischil I didn&#39;t specify declaration, just types in general. When you explicitly cast a value the entire type is within the parentheses. <code>(int *)</code> doesn&#39;t have that same sense of dereferencing a variable yielding a type."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1562083013, "post_id": 56855176, "comment_id": 100262574, "body": "@jjkl: No, it is assigning <code>anotherIP</code> to the pointer that <code>IP</code> points to (where <i>that</i> pointer points to an <code>int</code>).  The thing that gets passed, <code>IP</code>, is the first pointer in the chain."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1562083385, "post_id": 56855176, "comment_id": 100262751, "body": "an easy way to read a variable (including pointers) declaration is from right to left, so: <code>int *anotherIP = NULL;</code> is &quot;anotherIP is a pointer to a int&quot;  And <code>*IP = anotherIP;</code> is assigning the data where <code>IP</code> points to the contents of the pointer <code>anotherIP</code>"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 0, "creation_date": 1562083859, "post_id": 56855176, "comment_id": 100263003, "body": "@ThomasJager: Grammatically, a declaration <code>int *x</code> is not grouped as <code>(int *)x</code>. It is grouped as <code>int (*x)</code>. If you do not have that \u201csense\u201d that it is like a dereference operator in this context, that is because you are not understanding the C grammar. See C 2018 6.7. The <i>declarator</i> part of a declaration, which is the <code>*x</code> in this case, is separate from the type and other specifiers. Declarators have an grammar like expressions (6.7.6).\u2026"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1562083918, "post_id": 56855176, "comment_id": 100263026, "body": "\u2026  E.g., <code>int (*x)[]()</code> declares a pointer to an array of functions. <code>*</code> expresses a dereference of that pointer, <code>[]</code> expresses a reference to an array element, and <code>()</code> expresses a function call. They have similar meanings as in expressions, so they form a picture saying that, when something like <code>(*x)[]()</code> is used in an expression, it will be an <code>int</code>. In a cast as in <code>(int *)</code>, there is a unique position where an identifier could be, and the <code>*</code> is effectively expressing a dereference of that identifier."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1562083997, "post_id": 56855176, "comment_id": 100263053, "body": "When you define <code>int* x, y;</code> only <code>x</code> is a pointer, <code>y</code> is not. It means the same as <code>int *x, y;</code> but the latter is more clear."}, {"owner": {"reputation": 159, "user_id": 11681952, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KdE2mz_Fj8s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reKRPAkfyUAVWuB4IbJ2Tig12c6_Q/mo/photo.jpg?sz=128", "display_name": "jjkl", "link": "https://stackoverflow.com/users/11681952/jjkl"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1562086715, "post_id": 56855176, "comment_id": 100264272, "body": "@ScottHunter I&#39;m with you on the first part. For the second part, should I think of it as <code>int (**IP)</code> (as per @EricPostpischil&#39;s comment)? With this in mind, IP has to resolve to an int and so, given the double asterisks, must be a pointer to a pointer. With regards to <code>*IP</code>, we are dereferencing a pointer to a pointer, which gives us the pointer to the int. Additionally, it seems there is an inconsistency; if we had <code>void someFunction(int *IP){ }</code>, we use <code>IP</code> when referencing the pointer to the int and not <code>*IP</code> (It just depends on whether what&#39;s passed in is <code>**IP</code> or <code>*IP</code>?)"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1562089157, "post_id": 56855176, "comment_id": 100265185, "body": "@jjkl: If the parameter is <code>int *IP</code>, then <code>IP</code> is a pointer to an <code>int</code> and you have to pass a pointer to an <code>int</code>."}, {"owner": {"reputation": 159, "user_id": 11681952, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KdE2mz_Fj8s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reKRPAkfyUAVWuB4IbJ2Tig12c6_Q/mo/photo.jpg?sz=128", "display_name": "jjkl", "link": "https://stackoverflow.com/users/11681952/jjkl"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1562115017, "post_id": 56855176, "comment_id": 100272760, "body": "@ScottHunter Sorry my question wasn&#39;t clear. To confirm my understanding, I was asking whether we are applying the same approach of dereferencing when we have <code>void someFunction(int **IP){ }</code> and when we have <code>void someFunction(int *IP){ }</code> where in the first, in the function body, we get the the pointer to the int by dereferencing <code>IP</code> using <code>*IP</code>. In the latter, in the body of the function, we simply use <code>IP</code> to get the pointer to the int but use <code>*IP</code> now to get the int value?"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1562156077, "post_id": 56855176, "comment_id": 100288394, "body": "@jjkl: That is correct."}], "answers": [{"tags": [], "owner": {"reputation": 560, "user_id": 5269022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cc6786ff468a2804e91173a78b622e2?s=128&d=identicon&r=PG&f=1", "display_name": "A.Franzen", "link": "https://stackoverflow.com/users/5269022/a-franzen"}, "is_accepted": false, "score": 1, "last_activity_date": 1562080443, "creation_date": 1562080443, "answer_id": 56855494, "question_id": 56855176, "link": "https://stackoverflow.com/questions/56855176/does-have-different-meanings-based-on-the-context-of-its-usage/56855494#56855494", "title": "Does * have different meanings based on the context of its usage?", "body": "<p>First, in C the declaration of a variable should look like its access.\nMeaning the real value of the pointer to a pointer to an int, ist the int value, hence you access it with <code>int value = **IP</code>.</p>\n\n<p>You see double pointers often in functions, because it allows you to allocate space for the values you return.</p>\n\n<p>A single pointer will be passed by value to the funktion, if you change it in the function the caller will not see the change. </p>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1562081610, "post_id": 56855510, "comment_id": 100261829, "body": "<code>int *pointer_to_result = &amp;result;</code> is not assignment. It is a definition with initialization. And the meaning of the <code>*</code> there is the same as in dereferencing. In that definition <code>*pointer_to_result</code> means \u201cthe result of dereferencing <code>pointer_to_result</code>\u201d, and the definition tell us that that is an <code>int</code>. In other words, because \u201cthe result of dereferencing <code>pointer_to_result</code>\u201d is an <code>int</code>, <code>pointer_to_result</code> is a pointer to an <code>int</code>."}, {"owner": {"reputation": 2209, "user_id": 88056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad4dc48a2044368d6b349c942ef2c4be?s=128&d=identicon&r=PG", "display_name": "Powertieke", "link": "https://stackoverflow.com/users/88056/powertieke"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1562098839, "post_id": 56855510, "comment_id": 100269031, "body": "Changed the wording. While i feel you are correct in in the strict sense (that it&#39;s both dereferencing), you are still defining a pointer to an int... For me it helps thinking about it as a &#39;one thing&#39;. :)"}], "tags": [], "owner": {"reputation": 2209, "user_id": 88056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad4dc48a2044368d6b349c942ef2c4be?s=128&d=identicon&r=PG", "display_name": "Powertieke", "link": "https://stackoverflow.com/users/88056/powertieke"}, "is_accepted": false, "score": 0, "last_activity_date": 1562098433, "last_edit_date": 1562098433, "creation_date": 1562080538, "answer_id": 56855510, "question_id": 56855176, "link": "https://stackoverflow.com/questions/56855176/does-have-different-meanings-based-on-the-context-of-its-usage/56855510#56855510", "title": "Does * have different meanings based on the context of its usage?", "body": "<p>As far as I'm aware of there are three 'uses' for the asterisk in the C language.</p>\n\n<p>There's multiplication:</p>\n\n<pre><code>int result = 3 * 3; /* result == 9 */\n</code></pre>\n\n<p>There's definition:</p>\n\n<pre><code>int *pointer_to_result = &amp;result; /* define a pointer to an int, and initialize it with the address of the result variable */\n</code></pre>\n\n<p>And finally for dereferencing:</p>\n\n<pre><code>int copy_of_result = *pointer_to_result /* copy_of_result == 9 */\n</code></pre>\n\n<p>What you are seeing with the double asterisk is <a href=\"https://www.tutorialspoint.com/cprogramming/c_pointer_to_pointer.htm\" rel=\"nofollow noreferrer\">a pointer to a pointer</a>. Read up on these. They are a lot of fun.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 1, "last_activity_date": 1562085810, "creation_date": 1562085810, "answer_id": 56856913, "question_id": 56855176, "link": "https://stackoverflow.com/questions/56855176/does-have-different-meanings-based-on-the-context-of-its-usage/56856913#56856913", "title": "Does * have different meanings based on the context of its usage?", "body": "<p>In a <em>declaration</em>, the unary <code>*</code> indicates that the thing being declared has pointer type:</p>\n\n<pre><code>T *p;       // p has type \"pointer to T\"\nT *p[N];    // p has type \"array of pointer to T\"\nT (*p)[N];  // p has type \"pointer to array of T\"\nT *p();     // p has type \"function returning pointer to T\"\nT (*p)();   // p has type \"pointer to function returning T\"\n</code></pre>\n\n<p>The subscript <code>[]</code> and function call <code>()</code> operators have higher precedence than unary <code>*</code>, so an expression like <code>*p[i]</code> will be parsed as <code>*(p[i])</code>; you're dereferencing the result of <code>p[i]</code>.  If <code>p</code> is a pointer to an array of something, then you have to write <code>(*p)[i]</code> - you need to dereference <code>p</code> and than subscript into the result.</p>\n\n<p>You can have multiple levels of indirection:</p>\n\n<pre><code>T **p;           // p has type \"pointer to pointer to T\"\nT ***p;          // p has type \"pointer to pointer to pointer to T\"\nT *(*p)[N];      // p has type \"pointer to array of pointer to T\"\nT *(*(*p)())[N]; // p is a pointer to a function returning a pointer\n                 // to an N-element array of pointer to T\n</code></pre>\n\n<p>In an <em>expression</em>, the unary <code>*</code> operator dereferences the pointer to access the pointed-to object, as in your example.  Again, you can have multiple levels of indirection:</p>\n\n<pre><code>int x = 10;    \nint *p = &amp;x;    // p stores the address of x\nint **pp = &amp;p;  // pp stores the address of p\n</code></pre>\n\n<p>After those declarations, the following are true:</p>\n\n<pre><code>**pp == *p ==  x == 10 // all of these expressions have type int\n *pp ==  p == &amp;x       // all of these expressions have type int *\n  pp == &amp;p             // all of these expressions have type int **\n &amp;pp                   // this expression has type int ***\n</code></pre>\n\n<p>C declaration syntax is built off the type of <em>expressions</em>.  Suppose you had a pointer to an <code>int</code> named <code>p</code> and you wanted to access that integer value.  You'd write an expression like</p>\n\n<pre><code>x = *p;\n</code></pre>\n\n<p>The type of the <em>expression</em> <code>*p</code> is <code>int</code>, so the <em>declaration</em> is written as</p>\n\n<pre><code>int *p;\n</code></pre>\n\n<p>If you had an array of pointers to <code>int</code> named <code>p</code> and you wanted to access the integer value pointed to by the <code>i</code>'th element, you'd write</p>\n\n<pre><code>x = *p[i];\n</code></pre>\n\n<p>Again, the type of the <em>expression</em> <code>*p[i]</code> is <code>int</code>, so the declaration is written as</p>\n\n<pre><code>int *p[N];\n</code></pre>\n\n<p>Multiple indirection shows up in two main places:</p>\n\n<p><strong>You want a function to write to a parameter of pointer type</strong></p>\n\n<p>Remember that C passes all function arguments by value, so if you want a function to write to a parameter, you must pass a pointer to that parameter:</p>\n\n<pre><code>void foo( T *ptr )\n{\n  *ptr = new_value();  // writes a new value to the thing ptr points to\n}\n\nvoid bar( void )\n{\n  T value;\n  foo ( &amp;value );     // writes a new value to value\n}\n</code></pre>\n\n<p>Let's replace <code>T</code> with a pointer type <code>P *</code>:</p>\n\n<pre><code>void foo( P **ptr )\n{\n  *ptr = new_value();  // writes a new value to the thing ptr points to\n}\n\nvoid bar( void )\n{\n  P *value;\n  foo ( &amp;value );     // writes a new value to value\n}\n</code></pre>\n\n<p>As you can see, it works the same way.  We want to update the contents of <code>value</code>, so we must pass a pointer to it.  Yes, <code>value</code> already has a pointer type, but we need a pointer to <code>value</code> <em>itself</em> in order to update it.  </p>\n\n<p>Remember, if an lvalue expression <code>x</code> has type <code>T</code>, then the expression <code>&amp;x</code> has type <code>T *</code>.  Again, replace <code>T</code> with a pointer type <code>P *</code>, and you'll see that the expression <code>&amp;x</code> has type <code>P **</code>.  </p>\n\n<p><strong>You want to allocate a jagged array</strong></p>\n\n<p>Sometimes you want a 2D (or 3D, or higher) array-like structure, but you don't want the rows to be the same size.  The usual way to do that is like so:</p>\n\n<pre><code>T **arr = malloc( N * sizeof *arr ); // allocate an array to hold N objects of type T *\n\nif ( arr )\n{\n  for ( size_t i = 0; i &lt; N; i++ )\n  {\n    arr[i] = malloc( M * sizeof *arr[i] ); // allocate an array to hold M objects of type T, where M can vary from row to row\n  }\n}\n</code></pre>\n\n<p><code>arr</code> points to the first in a sequence of pointers to <code>T</code>.  </p>\n"}], "owner": {"reputation": 159, "user_id": 11681952, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KdE2mz_Fj8s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reKRPAkfyUAVWuB4IbJ2Tig12c6_Q/mo/photo.jpg?sz=128", "display_name": "jjkl", "link": "https://stackoverflow.com/users/11681952/jjkl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1562098433, "creation_date": 1562079328, "last_edit_date": 1562081388, "question_id": 56855176, "link": "https://stackoverflow.com/questions/56855176/does-have-different-meanings-based-on-the-context-of-its-usage", "title": "Does * have different meanings based on the context of its usage?", "body": "<p>I'm new to C and confused about two different usages of *. I understand that usage of the * is called <em>dereferencing</em> and is used to retrieve the value that the pointer points to.</p>\n\n<pre><code>int num = 20;\nint *ip;\nip = &amp;num;\n\nprint(\"This is the pointer's address: %p\\n\", ip);     // bffd8b3c\nprint(\"This is the value of the pointer: %d\\n\", *ip); // 20\n</code></pre>\n\n<p>The way I'm thinking of it is that the * is like an operator where when it is applied to a pointer gives the value <em>in the context of a print statement</em>.</p>\n\n<p>Elsewhere, I've seen * used in the following way:</p>\n\n<pre><code>void someFunction(int **IP){\n\n    int *anotherIP = NULL;\n    *IP = anotherIP;\n\n}\n</code></pre>\n\n<p>If I use the same thinking here, *IP should be the value that IP points to. But it seems that that's not the usage. Rather, it's assigning a local pointer to the pointer that IP points to. </p>\n\n<p><strong>Correction:</strong> the function is assigning <code>anotherIP</code> to the pointer to IP, (i.e. <code>*IP</code>); IP (pointer to a pointer) is being dereferenced twice as it's passed into the function (<code>**IP</code>).</p>\n\n<p>My question is: Is the meaning of * context dependent? If yes, what contexts should I be aware of in common usage? If not, how am I to understand the examples above?</p>\n\n<p>Additionally, what's the rationale behind using the double asterisks in the function above? I see this used often in functions.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 0, "creation_date": 1562079223, "post_id": 56855001, "comment_id": 100260382, "body": "You don&#39;t need any of the <code>continue;</code>. Also why this <code>(i!=j)</code>  in <code>if</code> block ?"}, {"owner": {"reputation": 3545, "user_id": 2183547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd540edd4677da5281d4331bf835f51?s=128&d=identicon&r=PG", "display_name": "L. Scott Johnson", "link": "https://stackoverflow.com/users/2183547/l-scott-johnson"}, "edited": false, "score": 0, "creation_date": 1562079371, "post_id": 56855001, "comment_id": 100260484, "body": "You only break if i!=j and the loop only exits on its own when j&gt;i, so the test to print  never succeeds."}, {"owner": {"reputation": 314, "user_id": 3876609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55c8e25a139c537665bbe496b20feb0?s=128&d=identicon&r=PG&f=1", "display_name": "Dali", "link": "https://stackoverflow.com/users/3876609/dali"}, "edited": false, "score": 0, "creation_date": 1562080136, "post_id": 56855001, "comment_id": 100260918, "body": "Actually he breaks when (i%j==0) &amp;&amp; (i!=j), so until the last iteration there are no problems, and at the last this code is then executed : if(i==j)         {               printf(&quot;prime no are %d\\n&quot;,i);                continue;         }"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1562083870, "post_id": 56855001, "comment_id": 100263009, "body": "When asking a question about a run time problem, as this question is doing, post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can reproduce the problem and help you debug it.  This includes code that cleanly compiles, example of an input, the expected output, and the actual output.  To start, the posted code does not compile,  It is missing the needed <code>#include</code> statements.  Are you expecting us to guess as to which header files your actual code is including?"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1562228727, "post_id": 56855001, "comment_id": 100314762, "body": "What&#39;s your code doing?  think that when you say <i>my code is not working</i> you have to explain how is it not working?  We don&#39;t see your screen, and you don&#39;t post a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "is_accepted": false, "score": 0, "last_activity_date": 1562079389, "creation_date": 1562079389, "answer_id": 56855193, "question_id": 56855001, "link": "https://stackoverflow.com/questions/56855001/print-prime-no-from-1-to-n-while-n-is-entered-through-the-keyboard/56855193#56855193", "title": "print prime no from 1 to n while n is entered through the keyboard", "body": "<p>Your for loop is off by 1.  It should be:</p>\n\n<pre><code>for(j=2;j&lt;i;j++)\n</code></pre>\n\n<p>Currently j will be i+1 if the number is prime so you final check fails</p>\n"}, {"comments": [{"owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "edited": false, "score": 1, "creation_date": 1562080016, "post_id": 56855231, "comment_id": 100260843, "body": "Wouldn&#39;t prime_count be incremented only in cases where the number it not prime?"}, {"owner": {"reputation": 3, "user_id": 11729732, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2CZH1YocgRk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3revfPqdSGTufdPMYDWsL_me6IE0AA/photo.jpg?sz=128", "display_name": "chahat", "link": "https://stackoverflow.com/users/11729732/chahat"}, "edited": false, "score": 0, "creation_date": 1562090239, "post_id": 56855231, "comment_id": 100265641, "body": "well thanku abel , i understood the above code and finally my code worked but can you please elaborate your above comment i.e      Actually he breaks when (i%j==0) &amp;&amp; (i!=j), so until the last iteration there are no problems, and at the last this code is then executed : if(i==j) { printf(&quot;prime no are %d\\n&quot;,i); continue; }"}, {"owner": {"reputation": 314, "user_id": 3876609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55c8e25a139c537665bbe496b20feb0?s=128&d=identicon&r=PG&f=1", "display_name": "Dali", "link": "https://stackoverflow.com/users/3876609/dali"}, "edited": false, "score": 0, "creation_date": 1562094703, "post_id": 56855231, "comment_id": 100267472, "body": "I commented this because I guessed your intend with the conditions (i!=j) and (i!=j) was to dissociate the loop running and the end of loop. And even if this was not the problem in your implementation, this could look awkward for at least 3 reasons :"}, {"owner": {"reputation": 314, "user_id": 3876609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55c8e25a139c537665bbe496b20feb0?s=128&d=identicon&r=PG&f=1", "display_name": "Dali", "link": "https://stackoverflow.com/users/3876609/dali"}, "edited": false, "score": 0, "creation_date": 1562094728, "post_id": 56855231, "comment_id": 100267485, "body": "- in the nested for-loop you don&#39;t need to increment j until its value is the same as i, so you could write &#39;j &lt; i&#39; instead of &#39;j &lt;= i&#39; (and even j &lt; i/2 is sufficient to find prime factor), - the if(i==j) attempts to execute the code inside the condition at the end of the loop, but at each iteration the program will make the comparison and that is not efficient. In your case you can just move the code after the loop."}, {"owner": {"reputation": 314, "user_id": 3876609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55c8e25a139c537665bbe496b20feb0?s=128&d=identicon&r=PG&f=1", "display_name": "Dali", "link": "https://stackoverflow.com/users/3876609/dali"}, "edited": false, "score": 0, "creation_date": 1562094732, "post_id": 56855231, "comment_id": 100267487, "body": "- Finally you don&#39;t need the (i!=j) condition, i guess you put it to avoid breaking at the last iteration when i==j, thus allowing your &#39;continue&#39; instruction and printf  to be executed but since the last should be placed outside you do not need this condition.  Despite what I said above, the only thing that prevent your program from working was the fact that you did not make the count when detecting a prime. The rest was just a bit weird as you said :)"}], "tags": [], "owner": {"reputation": 314, "user_id": 3876609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c55c8e25a139c537665bbe496b20feb0?s=128&d=identicon&r=PG&f=1", "display_name": "Dali", "link": "https://stackoverflow.com/users/3876609/dali"}, "is_accepted": true, "score": 1, "last_activity_date": 1562080744, "last_edit_date": 1562080744, "creation_date": 1562079516, "answer_id": 56855231, "question_id": 56855001, "link": "https://stackoverflow.com/questions/56855001/print-prime-no-from-1-to-n-while-n-is-entered-through-the-keyboard/56855231#56855231", "title": "print prime no from 1 to n while n is entered through the keyboard", "body": "<p>The program does not record When a number is prime. Try :</p>\n\n<pre><code>    int n,i,j,prime_count;\n    bool is_prime;\n\n    printf(\"enter the value\\n\");\n    scanf(\"%d\",&amp;n);\n\n    prime_count = 0;\n\n    for(i=2;i&lt;=n;i++)\n    {\n       is_prime = true;\n\n       for(j=2;j&lt;i;j++)\n        {\n            if( (i%j) == 0 )\n              {\n                 is_prime = false;\n                 break;\n              }\n\n            // As said by Achal you may not need this condition, \n            // Your loop will continue by itself\n            // else if(i!=j)\n            //  {\n            //     continue;\n            //  }\n        }\n        if(is_prime)\n           {\n              prime_count++;\n            }\n   }\n\n   // Then you can do what you want with the number of primes found\n   // e.g. print it :\n   printf(\"Number of primes: %d\\n\", prime_count);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11729732, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2CZH1YocgRk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3revfPqdSGTufdPMYDWsL_me6IE0AA/photo.jpg?sz=128", "display_name": "chahat", "link": "https://stackoverflow.com/users/11729732/chahat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 56855231, "answer_count": 2, "score": 0, "last_activity_date": 1562080744, "creation_date": 1562078724, "last_edit_date": 1562079651, "question_id": 56855001, "link": "https://stackoverflow.com/questions/56855001/print-prime-no-from-1-to-n-while-n-is-entered-through-the-keyboard", "title": "print prime no from 1 to n while n is entered through the keyboard", "body": "<p>i know my code is little bit weird but i just started coding\ncan some one please help me figure out why my code is not working</p>\n\n<pre><code>    int n,i,j;\n    printf(\"enter the value\\n\");\n    scanf(\"%d\",&amp;n);\n    for(i=2;i&lt;=n;i++)\n    {\n       for(j=2;j&lt;=i;j++)\n        {\n            if( (i%j==0) &amp;&amp; (i!=j)  )\n            {\n                 break;\n            }\n            else if(i!=j)\n            {\n                 continue;\n            }\n        }\n        if(i==j)\n        {\n              printf(\"prime no are %d\\n\",i);\n               continue;\n        }\n   }\n</code></pre>\n"}, {"tags": ["c", "language-lawyer"], "comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 4, "creation_date": 1562077141, "post_id": 56854354, "comment_id": 100259125, "body": "Given your known limit, <code>(int32_t) (timestamp1 + 1048576 - timestamp2) - 1048576</code> is guaranteed to compute the difference without overflow, and Apple LLVM 10.0.1 with Clang 1001.0.46.4 compiles it to a single <code>subl</code> instruction for x86_64."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1562077324, "post_id": 56854354, "comment_id": 100259230, "body": "Related: <a href=\"https://stackoverflow.com/questions/31967370/is-detecting-unsigned-wraparound-via-cast-to-signed-undefined-behavior\" title=\"is detecting unsigned wraparound via cast to signed undefined behavior\">stackoverflow.com/questions/31967370/&hellip;</a>"}, {"owner": {"reputation": 2726, "user_id": 5896591, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71a43ee15bbb5a512cf554b430416e33?s=128&d=identicon&r=PG&f=1", "display_name": "personal_cloud", "link": "https://stackoverflow.com/users/5896591/personal-cloud"}, "edited": false, "score": 0, "creation_date": 1573000601, "post_id": 56854354, "comment_id": 103735562, "body": "More general question, with timestamps that are allowed to wrap around 0: [<a href=\"https://stackoverflow.com/questions/58720505/]\">stackoverflow.com/questions/58720505/]</a>"}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1562077607, "post_id": 56854468, "comment_id": 100259407, "body": "Use memcpy.  As you say, a good compiler will optimize it away and simply recognize the type pun.  Works in both C and C++."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1562078008, "post_id": 56854468, "comment_id": 100259623, "body": "@Bathsheba: I do not think there is an elegant solution in strictly conforming C. Reinterpreting via union or <code>memcpy</code> is likely about the best one can do."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1562078062, "post_id": 56854468, "comment_id": 100259658, "body": "@EricPostpischil: In this case, I believe that type punning via pointer is also legal (signed and unsigned variations on the same type are pointer-interconvertible)"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1562078267, "post_id": 56854468, "comment_id": 100259765, "body": "@BenVoigt: It is not the pointer interconvertibility that is important so much as that the aliasing rules in C 2018 6.5 7 explicitly allow aliasing corresponding signed and unsigned types. (By itself, the fact that converting pointers as in <code>unsigned int y; \u2026 int *x = (int *) &amp;y;</code> is legal does not mean <code>*x</code> would be legal.)"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1562079757, "post_id": 56854468, "comment_id": 100260688, "body": "The <code>timestamp1</code> and <code>timestamp2</code> variables could be left as <code>uint32_t</code> in your code. Only the <code>result</code> variable needs to be a union."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1562079820, "post_id": 56854468, "comment_id": 100260730, "body": "@IanAbbott: Thanks, yes that&#39;s rather obvious and reads much better."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1562081866, "post_id": 56854468, "comment_id": 100261962, "body": "Here&#39;s a macro definition along the same lines: <code>#define UTOS32(a) = ((union { uint32_t u; int32_t i; }){ .u = (a) }.i)</code>. <code>UTOS32(timestamp1 - timestamp2)</code> yields the result."}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1562091803, "post_id": 56854468, "comment_id": 100266295, "body": "all this solutions rely on the fact that the binary representation of the wrapped-around uint-subtraction is the same as the signed subtraction result would be. So is not the esentially the same as casting the difference of the uint-subtraction (my last piece of code)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1562092318, "post_id": 56854468, "comment_id": 100266543, "body": "@vlad_tepesch: Yes it is. My solution is centred around writing standard portable C. The compiler will exploit your arguments in its optimisations. This answer has survived inspection by Eric Postpischil: if they have not voiced reservations that&#39;s good enough for me!"}, {"owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "edited": false, "score": 0, "creation_date": 1562099732, "post_id": 56854468, "comment_id": 100269380, "body": "@Bathsheba but since the standard does not dictate the two&#39;s complement, I do not understand why this way should be more standard and portable than the cast. is not reading another union member than the last written one UB (except an unsigned char array)?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1562133635, "post_id": 56854468, "comment_id": 100276528, "body": "Because the fixed width types, if present, must behave in this manner. I don\u2019t see how I can make that clearer in the answer?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1562624867, "post_id": 56854468, "comment_id": 100426491, "body": "@Bathsheba: Quality implementations will allow code to access unions using member lvalues, but the way N1570 6.5p7 is written doesn&#39;t actually require that they do so for non-character types.  The authors of the Standard probably thought it obvious that quality compilers should make a reasonable effort to recognize cases where an lvalue of one type is used to derive an lvalue of another, and accommodate them in cases where their customers would require that, but the maintainers of clang and gcc are hostile to such notions."}, {"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1562780860, "post_id": 56854468, "comment_id": 100488382, "body": "Can someone explain why OP&#39;s suggestion: <code>int32_t difference = (int32_t)(timestamp1 - timestamp2);</code> won&#39;t do the job? <code>unsigned</code> overflow is well defined, than casting it to signed type will make sure conversion to proper negative binary representation of the machine. Is there something I&#39;m missing?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1562782019, "post_id": 56854468, "comment_id": 100488843, "body": "@user2162550 That\u2019s undefined behaviour due to signed type overflow, even for the 2\u2019s complement fixed width type."}, {"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1562782223, "post_id": 56854468, "comment_id": 100488950, "body": "@Bathsheba where is the signed type overflow? I see a potential unsigned overflow, then cast. Do you mean the cast can result in an overflow?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1562782303, "post_id": 56854468, "comment_id": 100488988, "body": "@user2162550 Exactly!"}, {"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1562782457, "post_id": 56854468, "comment_id": 100489059, "body": "How can casting uint32_t to int32_t cause overflow? It is news to me"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1562782544, "post_id": 56854468, "comment_id": 100489100, "body": "@user2162550 Well the unsigned type can store larger values than the signed one. Sorry to be the bearer of bad news. This is why this question is not trivial."}, {"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1562782651, "post_id": 56854468, "comment_id": 100489164, "body": "But is it not well defined that, for example, casting <code>0xffffffff</code> to int32_t will result in <code>-1</code> ?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1562782690, "post_id": 56854468, "comment_id": 100489189, "body": "@user2162550 absolutely not. Note this question is asked on the lawyer tag so you can\u2019t say \u2018well it will in practice\u2019 on all current desktop platforms."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1562782812, "post_id": 56854468, "comment_id": 100489254, "body": "I\u2019m on the choo choo so can\u2019t. Just google signed integral type overflow undefined behaviour."}, {"owner": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 1, "creation_date": 1562785643, "post_id": 56854468, "comment_id": 100490442, "body": "For anyone who struggled with this answer, like me, this is helpful: [7.20.1.1 Exact-width integer types] &quot;The typedef name intN_t designates a signed integer type with width N , no padding bits, and a two&#39;s complement representation&quot; so this explains the promised 2&#39;s complement representation. And regarding the OP&#39;s answer which contains UB, it is explained in section [6.3.1.3 Signed and unsigned integers] and in @dbush answer."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 3510, "user_id": 2162550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f74689baa9af8a44163fa395c457212f?s=128&d=identicon&r=PG", "display_name": "user2162550", "link": "https://stackoverflow.com/users/2162550/user2162550"}, "edited": false, "score": 0, "creation_date": 1562830766, "post_id": 56854468, "comment_id": 100503064, "body": "@user2162550: Feel free to answer on those terms - include any bits of my answer at your leisure. I&#39;d be sure to upvote - ping me."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1572999222, "post_id": 56854468, "comment_id": 103735287, "body": "<code>(int32_t)(timestamp1 - timestamp2)</code> is implementation-defined , not undefined .  There is no overflow since the subtraction occurs in an unsigned type which cannot overflow by definition."}, {"owner": {"reputation": 2726, "user_id": 5896591, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71a43ee15bbb5a512cf554b430416e33?s=128&d=identicon&r=PG&f=1", "display_name": "personal_cloud", "link": "https://stackoverflow.com/users/5896591/personal-cloud"}, "edited": false, "score": 0, "creation_date": 1573001151, "post_id": 56854468, "comment_id": 103735709, "body": "Can you provide a reference for &quot;2&#39;s complement is guaranteed for the signed member&quot;? I thought the C standard allowed 1&#39;s complement representation for <code>int</code>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 2726, "user_id": 5896591, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71a43ee15bbb5a512cf554b430416e33?s=128&d=identicon&r=PG&f=1", "display_name": "personal_cloud", "link": "https://stackoverflow.com/users/5896591/personal-cloud"}, "edited": false, "score": 0, "creation_date": 1573050986, "post_id": 56854468, "comment_id": 103755295, "body": "@personal_cloud: It does indeed. My answer is centered on the fact that a 2&#39;s complement arithmetic has the same operation at the bit level as unsigned arithmetic."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 8, "last_activity_date": 1562080122, "last_edit_date": 1562080122, "creation_date": 1562076836, "answer_id": 56854468, "question_id": 56854354, "link": "https://stackoverflow.com/questions/56854354/difference-of-unsigned-integer-standard-supported-way-to-get-signed-result/56854468#56854468", "title": "difference of unsigned integer - standard supported way to get signed result?", "body": "<p>You can use a <code>union</code> type pun based on</p>\n\n<pre><code>typedef union\n{\n    int32_t _signed;\n    uint32_t _unsigned;\n} u;\n</code></pre>\n\n<p>Perform the calculation in <code>unsigned</code> arithmetic, assign the result to the <code>_unsigned</code> member, then read the <code>_signed</code> member of the <code>union</code> as the result:</p>\n\n<pre><code>u result {._unsigned = timestamp1 - timestamp2};\nresult._signed; // yields the result\n</code></pre>\n\n<p>This is portable to any platform that implements the fixed width types upon which we are relying (they don't need to). 2's complement is guaranteed for the signed member and, at the \"machine\" level, 2's complement signed arithmetic is indistinguishable from unsigned arithmetic. There's no conversion or <code>memcpy</code>-type overhead here: a good compiler will compile out what's essentially standardese syntactic sugar.</p>\n\n<p>(Note that this is undefined behaviour in C++.)</p>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1562081258, "post_id": 56855691, "comment_id": 100261596, "body": "This question is tagged language-lawyer and explicitly asks for a standard conforming solution. (Not my down vote.)"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1562081154, "creation_date": 1562081154, "answer_id": 56855691, "question_id": 56854354, "link": "https://stackoverflow.com/questions/56854354/difference-of-unsigned-integer-standard-supported-way-to-get-signed-result/56855691#56855691", "title": "difference of unsigned integer - standard supported way to get signed result?", "body": "<p>The conversion of an unsigned integer value to a signed integer is <strong>implementation defined</strong>.  This is spelled out in section 6.3.1.3 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a> regarding integer conversions:</p>\n\n<blockquote>\n  <p><em>1</em> When a value with integer type is converted to another integer type other than\n  _Bool ,if the value can be represented by the new type, it is unchanged.</p>\n  \n  <p><em>2</em> Otherwise,  if  the  new  type  is  unsigned,  the  value  is  converted  by  repeatedly  adding  or subtracting  one  more  than \n  the  maximum  value  that  can  be  represented  in  the  new type\n  until the value is in the range of the new type. 60)</p>\n  \n  <p><em>3</em> <strong>Otherwise,  the  new  type  is  signed  and  the  value  cannot  be  represented  in  it;  either  the result is implementation-defined\n  or an implementation-defined signal is raised.</strong></p>\n</blockquote>\n\n<p>On implementations people are most likely to use, the conversion will occur the way you expect, i.e. the representation of the unsigned value will be reinterpreted as a signed value.</p>\n\n<p>Specifically <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Integers-implementation.html#Integers-implementation\" rel=\"nofollow noreferrer\">GCC</a> does the following:</p>\n\n<blockquote>\n  <ul>\n  <li>The result of, or the signal raised by, converting an integer to a signed integer type when the value cannot be represented in an object\n  of that type (C90 6.2.1.2, C99 and C11 6.3.1.3).</li>\n  </ul>\n  \n  <p>For conversion to a type of width N, the value is reduced modulo 2^N\n  to be within range of the type; no signal is raised.</p>\n</blockquote>\n\n<p><a href=\"https://docs.microsoft.com/en-us/cpp/c-language/demotion-of-integers?view=vs-2019\" rel=\"nofollow noreferrer\">MSVC</a>:</p>\n\n<blockquote>\n  <p>When a long integer is cast to a short, or a short is cast to a char,\n  the least-significant bytes are retained.</p>\n  \n  <p>For example, this line</p>\n\n<pre><code>short x = (short)0x12345678L;\n</code></pre>\n  \n  <p>assigns the value 0x5678 to x, and this line</p>\n\n<pre><code>char y = (char)0x1234;\n</code></pre>\n  \n  <p>assigns the value 0x34 to y.</p>\n  \n  <p>When signed variables are converted to unsigned and vice versa, the\n  bit patterns remain the same. For example, casting -2 (0xFE) to an\n  unsigned value yields 254 (also 0xFE).</p>\n</blockquote>\n\n<p>So for these implementations, what you proposed will work.</p>\n"}, {"comments": [{"owner": {"reputation": 2726, "user_id": 5896591, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71a43ee15bbb5a512cf554b430416e33?s=128&d=identicon&r=PG&f=1", "display_name": "personal_cloud", "link": "https://stackoverflow.com/users/5896591/personal-cloud"}, "edited": false, "score": 0, "creation_date": 1573005858, "post_id": 58721345, "comment_id": 103736626, "body": "As OP has commented on Bathsheba&#39;s answer, there is no documentation to support that <code>int32_t</code> has to be two&#39;s complement, nor that a type pun is any more portable than a regular typecast. So your comment &quot;technically is not guaranteed by the standard&quot; actually applies to all 3 solutions in this answer."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 2726, "user_id": 5896591, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71a43ee15bbb5a512cf554b430416e33?s=128&d=identicon&r=PG&f=1", "display_name": "personal_cloud", "link": "https://stackoverflow.com/users/5896591/personal-cloud"}, "edited": false, "score": 0, "creation_date": 1573014061, "post_id": 58721345, "comment_id": 103738232, "body": "@personal_cloud Huh? It&#39;s in the C Standard. See C11 7.20.1.1/1"}, {"owner": {"reputation": 2726, "user_id": 5896591, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71a43ee15bbb5a512cf554b430416e33?s=128&d=identicon&r=PG&f=1", "display_name": "personal_cloud", "link": "https://stackoverflow.com/users/5896591/personal-cloud"}, "edited": false, "score": 0, "creation_date": 1573084301, "post_id": 58721345, "comment_id": 103770006, "body": "Oh, I see. Looks like this goes back to at least C99 too. So the <i>representation</i> of <code>int32_t</code> is specified, but the cast from <code>uint32_t</code> is not. So yes, I would accept that in <a href=\"https://stackoverflow.com/questions/58720505/\">my more general question</a> as well."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1572999567, "creation_date": 1572999567, "answer_id": 58721345, "question_id": 56854354, "link": "https://stackoverflow.com/questions/56854354/difference-of-unsigned-integer-standard-supported-way-to-get-signed-result/58721345#58721345", "title": "difference of unsigned integer - standard supported way to get signed result?", "body": "<p>Bathsheba's answer is correct but for completeness here are two more ways (which happen to work in C++ as well):</p>\n\n<pre><code>uint32_t u_diff = timestamp1 - timestamp2;\nint32_t difference;\nmemcpy(&amp;difference, &amp;u_diff, sizeof difference);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>uint32_t u_diff = timestamp1 - timestamp2;\nint32_t difference = *(int32_t *)&amp;u_diff;\n</code></pre>\n\n<p>The latter is not a strict aliasing violation because that rule explicitly allows punning between signed and unsigned versions of an integer type.</p>\n\n<hr>\n\n<p>The suggestion:    </p>\n\n<pre><code>int32_t difference = (int32_t)(timestamp1 - timestamp2);\n</code></pre>\n\n<p>will work on any actual machine that exists and offers the <code>int32_t</code> type, but technically is not guaranteed by the standard (the result is implementation-defined). </p>\n"}, {"tags": [], "owner": {"reputation": 2726, "user_id": 5896591, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71a43ee15bbb5a512cf554b430416e33?s=128&d=identicon&r=PG&f=1", "display_name": "personal_cloud", "link": "https://stackoverflow.com/users/5896591/personal-cloud"}, "is_accepted": false, "score": 0, "last_activity_date": 1573158430, "last_edit_date": 1573158430, "creation_date": 1573156488, "answer_id": 58756056, "question_id": 56854354, "link": "https://stackoverflow.com/questions/56854354/difference-of-unsigned-integer-standard-supported-way-to-get-signed-result/58756056#58756056", "title": "difference of unsigned integer - standard supported way to get signed result?", "body": "<p>Rebranding Ian Abbott's macro-packaging of Bathseba's answer as an answer:</p>\n\n<pre><code>#define UTOS32(a) ((union { uint32_t u; int32_t i; }){ .u = (a) }.i)\n\nint32_t difference = UTOS32(timestamp1 - timestamp2);\n</code></pre>\n\n<p>Summarizing the discussions on why this is more portable than a simple typecast: The C standard (back to C99, at least) specifies the <em>representation</em> of <code>int32_t</code> (it must be two's complement), but not in all cases how it should be cast from <code>uint32_t</code>.</p>\n\n<p>Finally, note that Ian's macro, Bathseba's answer, and M.M's answers all also work in <a href=\"https://stackoverflow.com/questions/58720505/\">the more general case</a> where the counters are allowed to wrap around 0, as is the case, for example, with TCP sequence numbers.</p>\n"}], "owner": {"reputation": 6300, "user_id": 2331592, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/befb1bd6b66c01fed1d2384a405e6f7e?s=128&d=identicon&r=PG&f=1", "display_name": "vlad_tepesch", "link": "https://stackoverflow.com/users/2331592/vlad-tepesch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 1, "accepted_answer_id": 56854468, "answer_count": 4, "score": 13, "last_activity_date": 1573158430, "creation_date": 1562076464, "last_edit_date": 1562080610, "question_id": 56854354, "link": "https://stackoverflow.com/questions/56854354/difference-of-unsigned-integer-standard-supported-way-to-get-signed-result", "title": "difference of unsigned integer - standard supported way to get signed result?", "body": "<p>assuming two arbitrary timestamps:</p>\n\n<pre><code>uint32_t timestamp1;    \nuint32_t timestamp2;\n</code></pre>\n\n<p>Is there a standard conform way to get a signed difference of the two beside the obvious variants of converting into bigger signed type and the rather verbose if-else.</p>\n\n<p>Beforehand it is not known which one is larger, but its known that the difference is not greater than max 20bit, so it will fit into 32 bit signed.</p>\n\n<pre><code>int32_t difference = (int32_t)( (int64_t)timestamp1 - (int64_t)timestamp2 );\n</code></pre>\n\n<p>This variant has the disadvantage that using 64bit arithmetic may not be supported by hardware and is possible of course only if a larger type exists (what if the timestamp already is 64bit).</p>\n\n<p>The other version </p>\n\n<pre><code>int32_t difference;\nif (timestamp1 &gt; timestamp2) {\n  difference =    (int32_t)(timestamp1 - timestamp2);\n} else {\n  difference = - ((int32_t)(timestamp2 - timestamp1));\n}\n</code></pre>\n\n<p>is quite verbose and involves conditional jumps.</p>\n\n<p>That is with </p>\n\n<pre><code>int32_t difference = (int32_t)(timestamp1 - timestamp2);\n</code></pre>\n\n<p>Is this guaranteed to work from standards perspective?</p>\n"}, {"tags": ["c", "embedded-linux", "stm32", "qemu", "cortex-m"], "answers": [{"comments": [{"owner": {"reputation": 741, "user_id": 10376824, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QJhJZUD1UCw/AAAAAAAAAAI/AAAAAAAADbA/_BZuute3iuE/photo.jpg?sz=128", "display_name": "Chandrika Joshi", "link": "https://stackoverflow.com/users/10376824/chandrika-joshi"}, "edited": false, "score": 0, "creation_date": 1562143170, "post_id": 56854231, "comment_id": 100281119, "body": "I think the reference manual you are referring to is some other STM32 variant because for STM32407 this register does not exist. And my question was more related to how to connect this implementation with qemu"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 741, "user_id": 10376824, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QJhJZUD1UCw/AAAAAAAAAAI/AAAAAAAADbA/_BZuute3iuE/photo.jpg?sz=128", "display_name": "Chandrika Joshi", "link": "https://stackoverflow.com/users/10376824/chandrika-joshi"}, "edited": false, "score": 1, "creation_date": 1562147185, "post_id": 56854231, "comment_id": 100283407, "body": "@ChandrikaJoshi I think you quite novice ARM programmer. This register <b>exists in all</b> Cortex devices and it is the part of the <i>core</i>. But to read about it you need to read the Programming Manual, not the Reference Manual which describes the peripherals"}, {"owner": {"reputation": 741, "user_id": 10376824, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QJhJZUD1UCw/AAAAAAAAAAI/AAAAAAAADbA/_BZuute3iuE/photo.jpg?sz=128", "display_name": "Chandrika Joshi", "link": "https://stackoverflow.com/users/10376824/chandrika-joshi"}, "edited": false, "score": 0, "creation_date": 1562151431, "post_id": 56854231, "comment_id": 100285707, "body": "Yes this is my first project on hardware emulation and dealing with ARM processor. Could you please direct me to programming manual? Thanks."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 741, "user_id": 10376824, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QJhJZUD1UCw/AAAAAAAAAAI/AAAAAAAADbA/_BZuute3iuE/photo.jpg?sz=128", "display_name": "Chandrika Joshi", "link": "https://stackoverflow.com/users/10376824/chandrika-joshi"}, "edited": false, "score": 0, "creation_date": 1562154932, "post_id": 56854231, "comment_id": 100287671, "body": "@ChandrikaJoshi it is in the same place as RM. Go to STH STM webpage, find your micro. In the &quot;Resources&quot;you will have all the documents. BTW using emulators for the uCs is only waste of time. Buj the Nucleo board and use the real hardware"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 1, "last_activity_date": 1562076052, "creation_date": 1562076052, "answer_id": 56854231, "question_id": 56853507, "link": "https://stackoverflow.com/questions/56853507/timer-supply-to-cpu-in-qemu/56854231#56854231", "title": "Timer supply to CPU in QEMU", "body": "<p>Systick is supplied via multiplexer and you can choose the AHB bus clock or divided by 8  system timer clock</p>\n\n<p><a href=\"https://i.stack.imgur.com/ki23h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ki23h.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/hwNKo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hwNKo.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 741, "user_id": 10376824, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QJhJZUD1UCw/AAAAAAAAAAI/AAAAAAAADbA/_BZuute3iuE/photo.jpg?sz=128", "display_name": "Chandrika Joshi", "link": "https://stackoverflow.com/users/10376824/chandrika-joshi"}, "edited": false, "score": 0, "creation_date": 1562145290, "post_id": 56857722, "comment_id": 100282329, "body": "This is exactly what I wanted to know. Thank you so much @Peter.  I wanted to know is there any documentation available where I can get such information about the emulated platforms?"}, {"owner": {"reputation": 741, "user_id": 10376824, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QJhJZUD1UCw/AAAAAAAAAAI/AAAAAAAADbA/_BZuute3iuE/photo.jpg?sz=128", "display_name": "Chandrika Joshi", "link": "https://stackoverflow.com/users/10376824/chandrika-joshi"}, "edited": false, "score": 1, "creation_date": 1562146995, "post_id": 56857722, "comment_id": 100283305, "body": "Also if I want to compare the real time clock and cpu clock and host clock differences how can I do that? Is there any option in QEMU - monitor? or I will have to tap a variable and print it?"}], "tags": [], "owner": {"reputation": 5487, "user_id": 4499941, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Wb0uIu6LiPk/AAAAAAAAAAI/AAAAAAAAABI/HOVGfYywvPE/photo.jpg?sz=128", "display_name": "Peter Maydell", "link": "https://stackoverflow.com/users/4499941/peter-maydell"}, "is_accepted": true, "score": 4, "last_activity_date": 1592914849, "last_edit_date": 1592914849, "creation_date": 1562089743, "answer_id": 56857722, "question_id": 56853507, "link": "https://stackoverflow.com/questions/56853507/timer-supply-to-cpu-in-qemu/56857722#56857722", "title": "Timer supply to CPU in QEMU", "body": "<p>QEMU's emulation does not generally try to emulate actual clock lines which send pulses at megahertz rates (this would be incredibly inefficient). Instead when the guest programs a timer device the model of the timer device sets up an internal QEMU timer to fire after the appropriate duration (and the handler for that then raises the interrupt line or does whatever is necessary for emulating the hardware behaviour). The duration is calculated from the values the guest has written to the device registers together with a value for what the clock frequency should be.</p>\n<p>QEMU doesn't have any infrastructure for handling things like programmable clock dividers or a &quot;clock tree&quot; that routes clock signals around the SoC (one could be added, but nobody has got around to it yet). Instead timer devices are usually either written with a hard-coded frequency, or may be written to have a QOM property that allows the frequency to be set by the board or SoC model code that creates them.</p>\n<p>In particular for the SysTick device in the Cortex-M models the current implementation will program the QEMU timer it uses with durations corresponding to a frequency of:</p>\n<ul>\n<li>1MHz, if the guest has set the CLKSOURCE bit to 1 (processor clock)</li>\n<li>something which the board model has configured via the 'system_clock_scale' global variable (eg 25MHz for the mps2 boards), if the guest has set CLKSOURCE to 0 (external reference clock)</li>\n</ul>\n<p>(The system_clock_scale global should be set to NANOSECONDS_PER_SECOND / clk_frq_in_hz.)</p>\n<p>The 1MHz is just a silly hardcoded value that nobody has yet bothered to improve upon, because we haven't run into guest code that cares yet. The system_clock_scale global is clunky but works.</p>\n<p>None of this affects the speed of the emulated QEMU CPU (ie how many instructions it executes in a given time period). By default QEMU CPUs will run &quot;as fast as possible&quot;. You can use the -icount option to specify that you want the CPU to run at a particular rate relative to real time, which sort of implicitly sets the 'cpu frequency', but this will only sort of roughly set an average -- some instructions will run much faster than others, in a not very predictable way. In general QEMU's philosophy is &quot;run guest code as fast as we can&quot;, and we don't make any attempt at anything approaching cycle-accurate or otherwise tightly timed emulation.</p>\n<p>Update as of 2020: QEMU now has some API and infrastructure for modelling clock trees, which is documented in docs/devel/clocks.rst in the source tree. This is basically a formalized version of the concepts described above, to make it easier for one device to tell another &quot;my clock rate is 20MHz now&quot; without hacks like the &quot;system_clock_scale&quot; global variable or ad-hoc QOM properties.</p>\n"}, {"tags": [], "owner": {"reputation": 1961, "user_id": 5350914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d005b431eacb64304aeabdca0158a6d3?s=128&d=identicon&r=PG", "display_name": "uDude", "link": "https://stackoverflow.com/users/5350914/udude"}, "is_accepted": false, "score": 0, "last_activity_date": 1614651743, "creation_date": 1614651743, "answer_id": 66432394, "question_id": 56853507, "link": "https://stackoverflow.com/questions/56853507/timer-supply-to-cpu-in-qemu/66432394#66432394", "title": "Timer supply to CPU in QEMU", "body": "<p>An old thread and an oft asked question so this should help some of you trying to emulate cortex systems.</p>\n<p>If using a .dtb when booting then in your .dts one can add to the 'timers' block a line of <code>clock-frequency = &lt;value&gt;;</code> and recompile it.  This will indeed increase the speed of cortex processors.  Clearly, value is some large number.</p>\n"}], "owner": {"reputation": 741, "user_id": 10376824, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QJhJZUD1UCw/AAAAAAAAAAI/AAAAAAAADbA/_BZuute3iuE/photo.jpg?sz=128", "display_name": "Chandrika Joshi", "link": "https://stackoverflow.com/users/10376824/chandrika-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1130, "favorite_count": 1, "accepted_answer_id": 56857722, "answer_count": 3, "score": 2, "last_activity_date": 1614651743, "creation_date": 1562073787, "question_id": 56853507, "link": "https://stackoverflow.com/questions/56853507/timer-supply-to-cpu-in-qemu", "title": "Timer supply to CPU in QEMU", "body": "<p>I am trying to emulate the clock control for STM32 machine with CPU cortex m4. It is provided in the <a href=\"https://www.st.com/content/ccc/resource/technical/document/reference_manual/3d/6d/5a/66/b4/99/40/d4/DM00031020.pdf/files/DM00031020.pdf/jcr:content/translations/en.DM00031020.pdf\" rel=\"nofollow noreferrer\">STM32 reference manual</a> the clock supplied to the core is by the HCLK.</p>\n\n<blockquote>\n  <p>The RCC feeds the external clock of the Cortex System Timer (SysTick) with the AHB clock (HCLK) divided by 8. The SysTick can work either with this clock or with the Cortex clock (HCLK), configurable in the SysTick control and status register.</p>\n</blockquote>\n\n<p>Now Cortex m4 is already emulated by QEMU and I am using the same for STM32 emulation. My confusion is should i supply the clock frequency of \"HCLK\" I have developed for STM32 to send clock pulses to cortex m4 or cortex -m4 itself manages to have its own clock with HCLK clock frequency 168MHz? or the clock frequency is different ?</p>\n\n<p>If I have to pass this frequency to cortex m4, how do i do that?</p>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1562078685, "post_id": 56853409, "comment_id": 100260047, "body": "You need to understand several things: (1) C doesn&#39;t really have a &quot;string&quot; type; C simulates strings using arrays of <code>char</code>. (2) There is a <i>very</i> close relationship between arrays and pointers in C, such that whenever we work with arrays we very often use pointers to do so. (3) There&#39;s no such thing as &quot;pointer to string&quot;. (4) Even though strings are represented internally as arrays of <code>char</code>, due to the close relationship between arrays and pointers, we very often refer to strings using pointers to <code>char</code>, or <code>char *</code>."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1562157298, "post_id": 56853409, "comment_id": 100289131, "body": "So what is the question?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11598742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c8264de0e833716fb80ae774ae35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/11598742/learner"}, "edited": false, "score": 0, "creation_date": 1562086391, "post_id": 56853509, "comment_id": 100264154, "body": "Here names[2] =450 and names [3]=458. After swap names[2]=458 and names[3]=450.Therefore now d is moved to address 458(dheeraj is the name) and r (first char of rahul) is now moved to 450 address.But why char at 451 which should be h (dheeraj) is changed to a (2nd letter of rahul). If the pointers point to first char of the strings only, only those should be changed and rest chars of strings should stay at their original address even after the swap."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 11, "user_id": 11598742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c8264de0e833716fb80ae774ae35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/11598742/learner"}, "edited": false, "score": 0, "creation_date": 1562090136, "post_id": 56853509, "comment_id": 100265591, "body": "@VIbhor No no no, you only swap the <b><i>pointers</i></b> in the array itself. You don&#39;t copy or move the character inside the strings. See my updated answer, hope it makes you see things clearer."}, {"owner": {"reputation": 11, "user_id": 11598742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c8264de0e833716fb80ae774ae35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/11598742/learner"}, "edited": false, "score": 0, "creation_date": 1562131157, "post_id": 56853509, "comment_id": 100275763, "body": "oh yes..got it !"}, {"owner": {"reputation": 11, "user_id": 11598742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c8264de0e833716fb80ae774ae35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/11598742/learner"}, "edited": false, "score": 0, "creation_date": 1562131930, "post_id": 56853509, "comment_id": 100275945, "body": "But why strings have got memory in a contiguous fashion? They could have got memory allocated randomly with their base address being collected in the array of pointers."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 11, "user_id": 11598742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c8264de0e833716fb80ae774ae35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/11598742/learner"}, "edited": false, "score": 0, "creation_date": 1562133097, "post_id": 56853509, "comment_id": 100276321, "body": "@VIbhor That&#39;s an implementation detail. How and where the compiler stores literal strings are not specified."}, {"owner": {"reputation": 11, "user_id": 11598742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c8264de0e833716fb80ae774ae35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/11598742/learner"}, "edited": false, "score": 0, "creation_date": 1562133402, "post_id": 56853509, "comment_id": 100276442, "body": "Everytime they are stored continuously. It feels as if compiler treats it as a 2-d array but with no gaps in between the strings except \\0."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 11, "user_id": 11598742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c8264de0e833716fb80ae774ae35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/11598742/learner"}, "edited": false, "score": 0, "creation_date": 1562133499, "post_id": 56853509, "comment_id": 100276480, "body": "@VIbhor As I said, that&#39;s an implementation detail that you can&#39;t rely upon."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 4, "last_activity_date": 1562090119, "last_edit_date": 1562090119, "creation_date": 1562073802, "answer_id": 56853509, "question_id": 56853409, "link": "https://stackoverflow.com/questions/56853409/array-of-pointers-to-stringsbase-type-of-pointers/56853509#56853509", "title": "Array of pointers to strings(base type of pointers)", "body": "<p>A literal string is really an array of read-only characters (including the null-terminator). As other arrays they decay to pointers to their first elements. You array <code>names</code> is an array of pointers, each pointer initialized as a pointer to the first element (first character) of the literal strings.</p>\n\n<p>When you swap the elements of <code>names</code>, you only swap the pointers.</p>\n\n<p>You could easily check the pointers themselves by printing using the <code>\"%p\"</code> format specifier:</p>\n\n<pre><code>printf(\"names[2] = %p, names[3] = %p\\n\", (void *) names[2], (void *) names[3]);\n</code></pre>\n\n<p>If you do that before and after the swap, you will see that the pointers have been swapped in your array. The contents of the literal strings themselves will still be the same.</p>\n\n<p>The array look something like this before the pointer swap:</p>\n\n<pre>\n+----------+\n| names[0] | -----> \"pankaj\"\n+----------+\n| names[1] | -----> \"anshul\"\n+----------+\n| names[2] | -----> \"dheeraj\"\n+----------+\n| names[3] | -----> \"rahul\"\n+----------+\n</pre>\n\n<p>After the pointer swap the array looks like this:</p>\n\n<pre>\n+----------+\n| names[0] | -----> \"pankaj\"\n+----------+\n| names[1] | -----> \"anshul\"\n+----------+\n| names[2] | -\\ /-> \"dheeraj\"\n+----------+   x\n| names[3] | -/ \\-> \"rahul\"\n+----------+\n</pre>\n\n<p>The location of the strings themselves are still the same. It's only the contents of the array <code>names</code> that have changed.</p>\n\n<hr>\n\n<p>As a small side-note, since literal strings in C are read-only you should really consider them as constant and use <code>const char *</code> for pointers to them.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1562082640, "creation_date": 1562082640, "answer_id": 56856109, "question_id": 56853409, "link": "https://stackoverflow.com/questions/56853409/array-of-pointers-to-stringsbase-type-of-pointers/56856109#56856109", "title": "Array of pointers to strings(base type of pointers)", "body": "<p>C doesn't have a <code>string</code> data type as such - in C, a string is simply a sequence of character values including a zero-valued terminator.  Strings (including string literals) are stored as arrays of character type (<code>char</code> or <code>wchar_t</code> for \"wide\" strings).  </p>\n\n<p>Unless it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, or is a string literal used to initialize a character array in a declaration, an <em>expression</em> of type \"<code>N</code>-element array of <code>T</code>\" is converted (\"decays\") to an expression of type \"pointer to <code>T</code>\", and the value of the expression is the address of the first element of the array.</p>\n\n<p>So given your declaration:</p>\n\n<pre><code>char *names[]={\"pankaj\",\n               \"anshul\",\n               \"dheeraj\",\n               \"rahul\"\n               };\n</code></pre>\n\n<p>Each string literal (<code>\"pankaj\"</code>, <code>\"anshul\"</code>, etc.) has type \"<code>N</code>-element array of <code>char</code>\", where <code>N</code> is the length of each string plus 1 (need an extra element to account for the 0 terminator).  Each literal is stored as an array in memory such that it's available over the lifetime of the program. It's not surprising that they were allocated contiguously, but it's not something to count on.  String literals are <em>supposed</em> to be immutable, however the behavior on attempting to modify the contents of a string literal is <em>undefined</em> - it may work, it may not, you may get a runtime error, you may not, etc.  </p>\n\n<p>Because they are not the operands of the <code>sizeof</code> or unary <code>&amp;</code> operators, and since they are not being used to initialize a <em>character</em> array, each literal expression is converted (\"decays\") from type \"<code>N</code>-element array of <code>char</code>\" to \"pointer to <code>char</code>\" (<code>char *</code>), and the value of the each literal expression is the address of the first character in the string.  Those pointer values are what's actually stored in the array.  </p>\n\n<p>If you hear someone refer to a pointer to a string in C, what they really mean is a pointer to <code>char</code> that points to the first character of a string.</p>\n\n<p>So, to summarize:</p>\n\n<ul>\n<li><code>names</code> is an array of pointers to <code>char</code></li>\n<li>unless it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operator, the <em>expression</em> <code>names</code> will decay to a pointer to pointer to <code>char</code> (<code>char **</code>), and the value of the expression will be the address of the first element of the array</li>\n<li>each <code>names[i]</code> has type <code>char *</code> (pointer to <code>char</code>)</li>\n<li>each <code>names[i]</code> stores the <em>address</em> of the first character of each string in the initializer</li>\n<li>the contents of each string literal are stored \"somewhere\" such that they are available over the lifetime of the program</li>\n<li>attempting to modify the contents of a string literal will invoke undefined behavior - it may work as expected, it may not, you may get a runtime error, you may not, etc.  </li>\n</ul>\n\n<p>Your second code snippet only swaps around the pointers, not the string contents - the strings themselves are unmodified.  </p>\n"}], "owner": {"reputation": 11, "user_id": 11598742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c8264de0e833716fb80ae774ae35fe?s=128&d=identicon&r=PG&f=1", "display_name": "Learner", "link": "https://stackoverflow.com/users/11598742/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1562090119, "creation_date": 1562073468, "question_id": 56853409, "link": "https://stackoverflow.com/questions/56853409/array-of-pointers-to-stringsbase-type-of-pointers", "title": "Array of pointers to strings(base type of pointers)", "body": "<pre><code>int main(){\nint i;\nchar *names[]={\"pankaj\",\n               \"anshul\",\n               \"dheeraj\",\n               \"rahul\"\n               };\nfor(i=0;i&lt;4;i++)\n    printf(\"\\n%u\",names[i]);}\n</code></pre>\n\n<p>When I coded this I found that all the strings are arranged in a contiguous manner. For ex. If names[0]=436, then names[1]=443, names[2]=450, names[3]=458, thus all strings have been allocated memory in a continuous fashion with \\0 as a character in between.\n     But strings could be allocated memory anywhere and their base addresses be stored in the array of pointers to these strings. Shouldn't be it like  that?\n     Moreover What is <strong>base type of these pointers</strong> in the array declared? Are they <strong>pointers to char</strong> Or <strong>pointers to strings.**like are these array of **char(*p)[6]</strong> type of pointers Or array of <strong>char *p</strong> type of pointers.\nWe can handle the whole strings using this names array like:</p>\n\n<pre><code>int main()\n{\nchar *names[]={\"pankaj\",\n               \"anshul\",\n               \"dheeraj\",\n               \"rahul\"\n               };\nchar *temp;\nprintf(\"Original:%s%s\\n\",names[2]names[3]);\ntemp=names[2];\nnames[2]=names[3];\nnames[3]=temp;\nprintf(\"New:%s%s\",names[2],names[3]);\nreturn 0;\n}\n</code></pre>\n\n<p>In this I could able to reverse the positions of <em>dheeraj</em> and <em>rahul</em> (as a whole) string by just swapping the base addresses of the strings of the pointer array.\n    Through it it looks like that the pointers are <em>pointer to string</em> type that is the pointers are pointing to the whole string instead of pointing to the first char of the string only.\n   So if they aren't pointers to string and are pointers to char only;  pointing to the first char of their respective strings , how are we able to swap the whole string by swapping only the base addresses of <em>dheeraj</em> and <em>rahul</em> in the pointer array.</p>\n"}, {"tags": ["python", "c", "numpy", "python-c-api"], "comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1562072003, "post_id": 56852863, "comment_id": 100255902, "body": "I know nothing about the Python C API but I\u2019m suspicious about your <code>Py_INCREF</code> call: You\u2019re not sharing the reference with any other object here, you\u2019re <i>passing</i> it to the caller. So either don\u2019t increase the reference count at all, or decrease it once you\u2019re done working with it locally. You can check this in your calling code via <code>gc.get_referrers()</code>. If I\u2019m right, this will return 2 if you haven\u2019t made any other copies, and it <i>should</i> return 1 (you can also check it in your C code via <code>Py_REFCNT(output_array)</code>)."}, {"owner": {"reputation": 312, "user_id": 8190432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f667a51a6216b3a8416c190b349e68e?s=128&d=identicon&r=PG&f=1", "display_name": "Anger Density", "link": "https://stackoverflow.com/users/8190432/anger-density"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1562072295, "post_id": 56852863, "comment_id": 100256079, "body": "Indeed that fixes the problem! I didn&#39;t realize passing it doesn&#39;t require INCREF. I&#39;d be happy to accept this as the answer."}], "answers": [{"tags": [], "owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "is_accepted": true, "score": 1, "last_activity_date": 1562072395, "creation_date": 1562072395, "answer_id": 56853069, "question_id": 56852863, "link": "https://stackoverflow.com/questions/56852863/numpy-c-api-extension-causes-excessive-memory-usage/56853069#56853069", "title": "NumPy C API extension causes excessive memory usage", "body": "<p><code>PyArray_SimpleNew</code> calls (indirectly, probably) <code>_Py_NewReference</code> under the hood. This function sets the reference count on the newly created reference to 1.</p>\n\n<p>Your subsequent <code>Py_INCREF</code> increases the ref count to 2 and thus makes sure that Python will never free this object, even if all references to it cease to exist, because its reference count will never drop to 0.</p>\n\n<p>The <code>Py_INCREF</code> call is unnecessary because you\u2019re not <em>sharing</em> the reference with any other object here, you\u2019re just using it locally and then passing it to the caller.</p>\n"}], "owner": {"reputation": 312, "user_id": 8190432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f667a51a6216b3a8416c190b349e68e?s=128&d=identicon&r=PG&f=1", "display_name": "Anger Density", "link": "https://stackoverflow.com/users/8190432/anger-density"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 56853069, "answer_count": 1, "score": 2, "last_activity_date": 1562072395, "creation_date": 1562071680, "question_id": 56852863, "link": "https://stackoverflow.com/questions/56852863/numpy-c-api-extension-causes-excessive-memory-usage", "title": "NumPy C API extension causes excessive memory usage", "body": "<p>I have written a C extension to NumPy to speed up some of my calculations, but I am getting increasing memory usage as I call the function repeatedly. I have trimmed down the function into a minimum example:</p>\n\n<pre><code>PyObject* memory_test_function(PyObject* self, PyObject* args)\n{\n    PyArrayObject *ang;\n    int i;\n\n    if (!PyArg_ParseTuple(args, \"O\", &amp;ang)) return NULL;\n\n    int L0 = (int) PyArray_DIMS(ang)[0];\n\n    // ballooning memory usage \n    npy_intp final_out_dims[2] = {L0,1};\n    PyObject *output_array;\n    output_array = PyArray_SimpleNew(2, final_out_dims, NPY_FLOAT64);\n    Py_INCREF(output_array);\n\n    for (i=0;i&lt;L0;i++) \n    {\n        *(double *)PyArray_GETPTR2(output_array,i,0) = \n            tan(*(double *)PyArray_GETPTR2(ang,i,0));\n    }\n\n    return PyArray_Return(output_array);\n\n    /* constant memory usage\n    double sum=0.0;\n    for (i=0;i&lt;L0;i++) sum+=tan(*(double *)PyArray_GETPTR2(ang,i,0));\n    return PyFloat_FromDouble(sum); */\n}\n</code></pre>\n\n<p>The problem appears to be caused by creating the output array, as just returning a float without creating the array object is constant in memory. I suspect there is a problem with INCREF/DECREF, but I thought I was doing everything correctly. Calling this function repeatedly (a million or so times) makes memory usage increase linearly with time, which makes me think something is not being garbage collected correctly. Using <code>gc</code> manually doesn't help. Please let me know if there is anything obvious I'm missing!</p>\n"}, {"tags": ["c", "python-3.7"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2201041"}, "edited": false, "score": 2, "creation_date": 1562070966, "post_id": 56852558, "comment_id": 100255175, "body": "Hard to say without seeing the C program. Maybe you use the same seed each time?"}, {"owner": {"reputation": 21, "user_id": 11516345, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NvwSOUU2KEM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGkf_O5rlCnOWwKiyS_8HuHjecfw/mo/photo.jpg?sz=128", "display_name": "bruno stordeur", "link": "https://stackoverflow.com/users/11516345/bruno-stordeur"}, "edited": false, "score": 0, "creation_date": 1562071152, "post_id": 56852558, "comment_id": 100255311, "body": "I don&#39;t know C, someone gave me the program but each time I run the cmd line in the terminal I have different text files as output as predicted that&#39;s why i don&#39;t understand why it&#39;s not working here."}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1562071282, "post_id": 56852558, "comment_id": 100255394, "body": "@brunostordeur can you post the C code? Otherwise it&#39;s nearly impossible to guess the reason."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1562071340, "post_id": 56852558, "comment_id": 100255437, "body": "@brunostordeur: Likely the random seed is based on the current time, which has a granularity of 1 second.  If all the child processes are fired off within the same second, they\u2019ll all have the same seed.  Try adding a 1-second sleep in your loop and see if that makes a difference."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1562071418, "post_id": 56852558, "comment_id": 100255494, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3159644/using-rand-to-generate-a-random-numbers\">using rand to generate a random numbers</a>. Note in particular <a href=\"https://stackoverflow.com/a/3159655/4944425\">this</a> answer."}, {"owner": {"reputation": 21, "user_id": 11516345, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NvwSOUU2KEM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGkf_O5rlCnOWwKiyS_8HuHjecfw/mo/photo.jpg?sz=128", "display_name": "bruno stordeur", "link": "https://stackoverflow.com/users/11516345/bruno-stordeur"}, "edited": false, "score": 0, "creation_date": 1562071483, "post_id": 56852558, "comment_id": 100255548, "body": "It&#39;s really long and written in italian so I won&#39;t bother you with that. But yesterday It was working fine actually so was it just luck ?"}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1562071592, "post_id": 56852558, "comment_id": 100255612, "body": "@brunostordeur We&#180;re mostly interested in seeing if/how the <code>srand()</code>-function is called in C :D I don&#39;t think the italian naming hinders readability too much. If you can upload the code or post it here, that would greatly improve our ability to help you :)"}, {"owner": {"reputation": 21, "user_id": 11516345, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NvwSOUU2KEM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGkf_O5rlCnOWwKiyS_8HuHjecfw/mo/photo.jpg?sz=128", "display_name": "bruno stordeur", "link": "https://stackoverflow.com/users/11516345/bruno-stordeur"}, "edited": false, "score": 0, "creation_date": 1562071924, "post_id": 56852558, "comment_id": 100255852, "body": "the only place I found the srand() was within this line <code>srand48((long int) time(NULL));</code>"}, {"owner": {"reputation": 21, "user_id": 11516345, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NvwSOUU2KEM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGkf_O5rlCnOWwKiyS_8HuHjecfw/mo/photo.jpg?sz=128", "display_name": "bruno stordeur", "link": "https://stackoverflow.com/users/11516345/bruno-stordeur"}, "edited": false, "score": 0, "creation_date": 1562072105, "post_id": 56852558, "comment_id": 100255961, "body": "The 1-second sleep in the loop worked ! I will be long for a lot of iterations but it&#39;s perfect thank you !!"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1562072467, "post_id": 56852558, "comment_id": 100256189, "body": "Also note that you could add a little more entropy by adding as command line parameter the index used in the python program, read it in the C program and use it like <code>srand48((long int) time(NULL) + parameter * some_multiplier);</code>"}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 1, "creation_date": 1562072608, "post_id": 56852558, "comment_id": 100256279, "body": "@brunostordeur Congrats on getting the code to work :) You can replace <code>time(NULL)</code> with <code>clock()</code> or something similar, to get a better &quot;resolution&quot; than 1-second (and hence avoid or greatly reduce the sleep)"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1562076402, "post_id": 56852558, "comment_id": 100258650, "body": "Another possibility (on a Unix-based system, anyway) is <code>srand(time(NULL) ^ getpid())</code>."}, {"owner": {"reputation": 21, "user_id": 11516345, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NvwSOUU2KEM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGkf_O5rlCnOWwKiyS_8HuHjecfw/mo/photo.jpg?sz=128", "display_name": "bruno stordeur", "link": "https://stackoverflow.com/users/11516345/bruno-stordeur"}, "edited": false, "score": 0, "creation_date": 1562080590, "post_id": 56852558, "comment_id": 100261207, "body": "I just replace <code>srand48((long int) time(NULL))</code> by <code>srand(time(NULL) ^ getpid())</code>in the c program ? And then I can remove the time.sleep(1) in my python script ?"}], "answers": [{"tags": [], "owner": {"reputation": 9079, "user_id": 73299, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae887ea49a5c212e2ab407d90eba4c8c?s=128&d=identicon&r=PG", "display_name": "tstenner", "link": "https://stackoverflow.com/users/73299/tstenner"}, "is_accepted": false, "score": 1, "last_activity_date": 1562070991, "creation_date": 1562070991, "answer_id": 56852666, "question_id": 56852558, "link": "https://stackoverflow.com/questions/56852558/why-i-get-the-same-outputs-when-running-a-c-program-with-my-python-script/56852666#56852666", "title": "Why i get the same outputs when running a C program with my python script", "body": "<p>You probably initialize your random generator with a <a href=\"https://en.wikipedia.org/wiki/Random_seed\" rel=\"nofollow noreferrer\">seed</a> based on the time in seconds. So, if you start the program with the same seed you will get the same random values.</p>\n"}], "owner": {"reputation": 21, "user_id": 11516345, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NvwSOUU2KEM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGkf_O5rlCnOWwKiyS_8HuHjecfw/mo/photo.jpg?sz=128", "display_name": "bruno stordeur", "link": "https://stackoverflow.com/users/11516345/bruno-stordeur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1562070991, "creation_date": 1562070673, "question_id": 56852558, "link": "https://stackoverflow.com/questions/56852558/why-i-get-the-same-outputs-when-running-a-c-program-with-my-python-script", "title": "Why i get the same outputs when running a C program with my python script", "body": "<p>I have a C program that I run with a python script and the output is a text file containing random values (in a certain way). But when I run my program several times in a loop I got the same output text file each time (Or 2 different text files out of 100) </p>\n\n<pre><code>import subprocess\nimport time\n\nstart = time.time()\n\nntrial = input(\"How many trials? \")\nfor i in range(int(ntrial)):\n    cmd = [\"/Users/stordd/Desktop/StageI2M/C/forestenostre/grezza_foresta\", \"-w\",\n           \"/Users/stordd/Desktop/StageI2M/Leiden/text_file/USA.txt\", \"-m\", \"5\", \"-e\", \"-0\"]\n    # Open/Create the output file\n    outFile = open(\"/Users/stordd/Desktop/StageI2M/Leiden/k5/{}.txt\".format(i), 'ab')\n\n    result = subprocess.Popen(cmd, stdout=subprocess.PIPE)\n    out = result.stdout.read()\n\n    outFile.write(out)\n    outFile.close()\n\nend = time.time()\nprint(end - start)\n</code></pre>\n"}, {"tags": ["c", "sockets", "select"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 2, "creation_date": 1562070228, "post_id": 56852205, "comment_id": 100254735, "body": "You need to move the FD_SET calls inside the loop. Your test for end of stream is incorrect. You are ignoring both the result and the data returned by reading the standard input, and you certainly aren&#39;t sending any message at this point despite the comment."}, {"owner": {"reputation": 11, "user_id": 11633385, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g5nqemeQys0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rft72hGWhoNeQcz9f3NLK-HFqdLvg/mo/photo.jpg?sz=128", "display_name": "Lucas Rebello", "link": "https://stackoverflow.com/users/11633385/lucas-rebello"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1562071238, "post_id": 56852205, "comment_id": 100255363, "body": "okay i moved then inside the loop, but how exactly do i read from something else then the standard input?"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1562071652, "post_id": 56852205, "comment_id": 100255661, "body": "I hope you also moved the <code>FD_ZERO</code>. warning you can have data on several fd, replace <code>else if</code> by <code>if</code>"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1562073317, "post_id": 56852205, "comment_id": 100256702, "body": "&quot;the code should send it to my server (still not ok).&quot; Where is this sending part supposed to happen? You only read into a <code>msg</code> buffer but where do you send it?"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1562101476, "post_id": 56852205, "comment_id": 100269968, "body": "Side note:  select()-ing on stdin won\u2019t work under Windows."}], "owner": {"reputation": 11, "user_id": 11633385, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g5nqemeQys0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rft72hGWhoNeQcz9f3NLK-HFqdLvg/mo/photo.jpg?sz=128", "display_name": "Lucas Rebello", "link": "https://stackoverflow.com/users/11633385/lucas-rebello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562085629, "creation_date": 1562069563, "last_edit_date": 1562070134, "question_id": 56852205, "link": "https://stackoverflow.com/questions/56852205/how-to-use-a-select-between-stdin-and-a-socket", "title": "How to use a select between stdin and a socket?", "body": "<p>I'm trying to make a chat-like program in c, the main problem is that i do not want to use threads, so for that i need to use select to keep track of the incoming messages from the socket, and of my stdin.</p>\n\n<p>I've already done some search on how to make the select, the socket part seems to be alright, but i can't get the stdin correctly.</p>\n\n<pre><code>    fd_set read_fds;\n    FD_ZERO(&amp;read_fds);\n    FD_SET(STDIN_FILENO, &amp;read_fds);\n    FD_SET(sock_fd, &amp;read_fds);\n    while(1){\n        select(sock_fd+1, &amp;read_fds, NULL, NULL, NULL);\n\n        if(FD_ISSET(sock_fd, &amp;read_fds) != 0) {\n          printf(\"Entered case for receive message\\n\");\n          char buf[4096];\n          memset(buf, 0, sizeof(buf));\n          int lastBit;\n\n          lastBit = recv(sock_fd, buf, sizeof(buf), 0);\n          if (lastBit &gt; 0 &amp;&amp; lastBit &lt; 4096)\n          {\n            buf[lastBit] = '\\0';\n          }\n          else\n          {\n            close(sock_fd);\n            //break;\n          }\n          printf(\"%s\\n\", buf);\n        } else if (FD_ISSET(STDIN_FILENO, &amp;read_fds)) {\n          printf(\"Entered case for send message\\n\");\n          char msg[4096];\n          memset(msg, 0, sizeof(msg));\n          read(0, msg, sizeof(msg));\n        }\n    }\n</code></pre>\n\n<p>With this I would expect when i received a new message from the server the message is printed (that is ok), and when a input something, the code should send it to my server (still not ok).</p>\n"}, {"tags": ["c", "dma", "microchip", "mplab", "dspic"], "answers": [{"comments": [{"owner": {"reputation": 454, "user_id": 5719079, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/g0gYz.jpg?s=128&g=1", "display_name": "Mercury", "link": "https://stackoverflow.com/users/5719079/mercury"}, "edited": false, "score": 0, "creation_date": 1562070862, "post_id": 56852504, "comment_id": 100255106, "body": "I had to edit some minor aspects of your code but otherwise my compiler eats it now, Ill let you know if it works functional once I run it on my device. Thanks for the help XD"}, {"owner": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "reply_to_user": {"reputation": 454, "user_id": 5719079, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/g0gYz.jpg?s=128&g=1", "display_name": "Mercury", "link": "https://stackoverflow.com/users/5719079/mercury"}, "edited": false, "score": 1, "creation_date": 1562071309, "post_id": 56852504, "comment_id": 100255413, "body": "if problems try sizeof(pinpairs) instead of the &quot;uin16(...)&quot; part"}], "tags": [], "owner": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "is_accepted": true, "score": 1, "last_activity_date": 1562070514, "creation_date": 1562070514, "answer_id": 56852504, "question_id": 56852152, "link": "https://stackoverflow.com/questions/56852152/argument-to-builtin-dmaoffset-is-not-the-address-of-an-object-in-a-dma-secti/56852504#56852504", "title": "Argument to __builtin_dmaoffset() is not the address of an object in a dma section;", "body": "<p>I can imagine multiple possibilities</p>\n\n<ul>\n<li><p>The subentities of the array don't have the proper attributes set,\nand the compiler doesn't lift  pinpairs[pairCounter]  (a pinpair\nstruct)</p></li>\n<li><p>due to Paircounter being a variable, the compiler can't compute a compiletime address for value.  </p></li>\n</ul>\n\n<p>If the latter, a fixed value would work, if the former, then a compiler limitation that is pretty hard to workaround.</p>\n\n<p>I'd try something like </p>\n\n<pre><code>DMA0STA=__dmaoffset(pinpairs)+dmacounter*uint16(&amp;pinpairs[1]-&amp;pinpairs[0])\n</code></pre>\n\n<p>(plus maybe some typecasts to get it assigned)</p>\n"}], "owner": {"reputation": 454, "user_id": 5719079, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/g0gYz.jpg?s=128&g=1", "display_name": "Mercury", "link": "https://stackoverflow.com/users/5719079/mercury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 56852504, "answer_count": 1, "score": 0, "last_activity_date": 1562070514, "creation_date": 1562069367, "question_id": 56852152, "link": "https://stackoverflow.com/questions/56852152/argument-to-builtin-dmaoffset-is-not-the-address-of-an-object-in-a-dma-secti", "title": "Argument to __builtin_dmaoffset() is not the address of an object in a dma section;", "body": "<p>I have a dsPIC33 and programming it using MPLAB X.</p>\n\n<p>I have three files: <code>main.c</code>  <code>ADC.c</code>  <code>ADC.h</code></p>\n\n<p>In ADC.h I do a bunch of variable initialisation as follows:</p>\n\n<pre><code>typedef struct pinPair{\n    unsigned CH0:5,CH123:1,STAT:8,:2;\n    unsigned I:16;\n    unsigned V0:16;\n    unsigned V1:16;\n    unsigned V2:16;\n}pinPair;\n\ntypedef pinPair PINPAIRS [5];   \nextern PINPAIRS pinPairs __attribute__((space(dma)));\n</code></pre>\n\n<p>then in my main.c file I realise the pinPairs variable:</p>\n\n<pre><code>//Define pinPairs data buffers\nPINPAIRS pinPairs __attribute__((space(dma),aligned(256)));\n\nint main(void) {\n\n...\n\n}\n</code></pre>\n\n<p>Now in my ADC.c file comes the confusing part, The variable pinPair is clearly aligned somewhere in the dam memory because if I do this:</p>\n\n<pre><code>DMA0STA=__builtin_dmaoffset(pinPairs);\n</code></pre>\n\n<p>the compiler just does its thing but if I do it in the way I was intending:</p>\n\n<pre><code>DMA0STA=__builtin_dmaoffset(pinPairs[pairCounter]);\n</code></pre>\n\n<p>I get the error:</p>\n\n<pre><code>error: Argument to __builtin_dmaoffset()  is not the address of an object in a dma section;\n</code></pre>\n\n<p>But it is though !!!</p>\n\n<p>Does anyone know what it is that this error means and how I could use the variable in the way I want ?</p>\n"}, {"tags": ["c", "malloc", "matrix-multiplication", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1562068741, "post_id": 56851909, "comment_id": 100253930, "body": "Why do you say that a &quot;single call of malloc, calloc and realloc is limited to 80 bytes&quot;? Is it really a limitation of the assignment/exercise that you&#39;re not allowed that? In that case there&#39;s plenty of example how to make &quot;dynamic multi-dimensional arrays&quot; using pointer to pointers (e.g. <code>int **tab</code> in your case)."}, {"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 1, "creation_date": 1562068968, "post_id": 56851909, "comment_id": 100254061, "body": "On common systems there should not be a small limit (like 80 0r 400 bytes) for <code>malloc</code> etc. except if you are out of memory. What exactly happens when you try to allocate more memory? I suggest to replace <code>printf(&quot;Failed to allocate memory&quot;);</code> with <code>perror(&quot;malloc failed&quot;);</code> or similar to show the corresponding error information. Please show the values that lead to an error. On what system do you have the problem? Please <a href=\"https://stackoverflow.com/posts/56851909/edit\">edit</a> your question to add the missing information."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 1, "creation_date": 1562069962, "post_id": 56851909, "comment_id": 100254584, "body": "If you allocate 80 bytes, then you will not be able to fit 100 4-byte elements. You need to describe your problem better. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 5, "user_id": 11644402, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0BYyR8faAo/AAAAAAAAAAI/AAAAAAAAFOM/C51psh0rKME/photo.jpg?sz=128", "display_name": "KAER", "link": "https://stackoverflow.com/users/11644402/kaer"}, "edited": false, "score": 0, "creation_date": 1562070565, "post_id": 56851909, "comment_id": 100254928, "body": "Yea, I know it is confusing. I will try to explain it better. You can allocate up to 80 bytes with malloc, calloc or realloc in a single call, but the overall limit is 1000 bytes. You need to allocate 480 bytes with several malloc, calloc or realloc calls."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1562070733, "post_id": 56851909, "comment_id": 100255035, "body": "Then use realloc 5 times?"}, {"owner": {"reputation": 5, "user_id": 11644402, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0BYyR8faAo/AAAAAAAAAAI/AAAAAAAAFOM/C51psh0rKME/photo.jpg?sz=128", "display_name": "KAER", "link": "https://stackoverflow.com/users/11644402/kaer"}, "edited": false, "score": 0, "creation_date": 1562070991, "post_id": 56851909, "comment_id": 100255193, "body": "Yes that is a good call I thought of it aswell, but I have no idea how to implement that. Don&#39;t get me wrong, but I&#39;m a newbie in C. If you could show me how to cast realloc to allocate +80 bytes in every call, I would be grateful."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562072903, "post_id": 56851909, "comment_id": 100256456, "body": "Note that real-world systems with severely restricted RAM won&#39;t be using <code>malloc</code> in the first place - it would be banned entirely."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1562075509, "post_id": 56851909, "comment_id": 100258087, "body": "@ROKA Have you read the documentation for realloc? I don&#39;t see an attempt of that in your code."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562073068, "post_id": 56852628, "comment_id": 100256549, "body": "The sad thing is that it would actually be faster to call realloc on the same memory segment 10 times in a row, than to use this code. Simply <i>don&#39;t</i> invent senseless, artificial allocation schemes."}, {"owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562084058, "post_id": 56852628, "comment_id": 100263087, "body": "@Lundin This is a pretty standard implementation of a 2D array. It&#39;s not exactly senseless and artificial."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562135031, "post_id": 56852628, "comment_id": 100277059, "body": "The senseless scheme was invented by the OP. As for this code, it is not even a 2D array. See <a href=\"https://stackoverflow.com/questions/42094465/correctly-allocating-multi-dimensional-arrays\">Correctly allocating multi-dimensional arrays</a>."}], "tags": [], "owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "is_accepted": false, "score": 0, "last_activity_date": 1562070892, "creation_date": 1562070892, "answer_id": 56852628, "question_id": 56851909, "link": "https://stackoverflow.com/questions/56851909/problem-with-allocating-multiplication-table/56852628#56852628", "title": "Problem with allocating multiplication table", "body": "<p>Nested mallocs() are what you'll need to use. But, be careful, because you'll also need to use several frees()!</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>\n// 80 bytes\nint** table = malloc(row * sizeof(int*));\n\nfor (int i = 0; i &lt; row; i++) {\n    // 80 bytes\n    table[i] = malloc(col * sizeof(int));\n}\n\n// The 6th element in the first row is set to 5.\ntable[0][5] = 5;\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 11644402, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z0BYyR8faAo/AAAAAAAAAAI/AAAAAAAAFOM/C51psh0rKME/photo.jpg?sz=128", "display_name": "KAER", "link": "https://stackoverflow.com/users/11644402/kaer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1562070892, "creation_date": 1562068497, "question_id": 56851909, "link": "https://stackoverflow.com/questions/56851909/problem-with-allocating-multiplication-table", "title": "Problem with allocating multiplication table", "body": "<p>I need to write a program that will allocate the memory for multiplication table. The problem is that single call of malloc, calloc and realloc is limited to 80 bytes and I don't know how to allocate memory stage by stage.\nIf anyone could help me I would be grateful.</p>\n\n<p>Here is what I have tried already. It works if I allocate the memory for 400 bytes in one call.</p>\n\n<pre><code>int main()\n{\n    int row = 10;\n    int col = 10;\n\n    int w=0;\n    int k=0;\n\n    int *tab = (int *)malloc(row*col*sizeof(int));\n\n    if(tab == NULL)\n    {\n        printf(\"Failed to allocate memory\");\n        return 8;\n    }\n\n    int i=0;\n\n    for (w=0; w&lt;row; w++)\n    {\n        for(k=0; k&lt;col; k++)\n        {\n            *(tab+w*col+k) = ++i;\n        }\n     }       \n\n    for (w=0; w&lt;row; w++){\n            for(k=0; k&lt;col; k++){\n                printf(\"%3d \", *(tab+w*col+k) );\n         }\n         printf(\"\\n\");\n        }   \n\n    free(tab);\n\nreturn 0;\n}\n\n</code></pre>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 3, "creation_date": 1562068541, "post_id": 56851809, "comment_id": 100253819, "body": "OT: Seems strange to use a <code>double</code> for storing an integer count"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1562068724, "post_id": 56851809, "comment_id": 100253918, "body": "Counting number of words or characters?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1562070300, "post_id": 56851809, "comment_id": 100254771, "body": "@4386427 OT2: By using <code>double</code>, certainly no counting trouble until about 18*10^15 iterations - at least a year of run time."}, {"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1562070654, "post_id": 56851809, "comment_id": 100254981, "body": "@interjay characters"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1562098157, "post_id": 56851809, "comment_id": 100268759, "body": "@chux OT3: If <code>double</code> allows 1 year then <code>uint64_t</code> would allow like 10.000 years. Why limit your program to run just a single year. ;-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1562108404, "post_id": 56851809, "comment_id": 100271655, "body": "@4386427 I cant even see to next year - I do not have 2020 vision ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1562070080, "post_id": 56851979, "comment_id": 100254648, "body": "Using <code>isprint(c)</code> instead of <code>c &gt;= 32</code> is  more idiomatic, yet either works well enough for learner code here. UV"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1562070314, "post_id": 56851979, "comment_id": 100254778, "body": "@chux as it is not &quot;real&quot; program laziness won :)"}, {"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1562070622, "post_id": 56851979, "comment_id": 100254961, "body": "@P__J__ thanks for the solution, it solved my query. didn&#39;t get that I had a new line in ideone input box. my fault"}, {"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1562070723, "post_id": 56851979, "comment_id": 100255025, "body": "@P__J__  <code>c &gt;= 32 ? c : &#39;.&#39;</code> this part to check the ascii coding character value right ?"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": true, "score": 4, "last_activity_date": 1562070380, "last_edit_date": 1562070380, "creation_date": 1562068710, "answer_id": 56851979, "question_id": 56851809, "link": "https://stackoverflow.com/questions/56851809/unexpected-result-when-counting-word-length-in-c-using-for-loop/56851979#56851979", "title": "unexpected result when counting word length in c using for loop", "body": "<p>if you put a bit more effort in yor programming adding couple of lines of code everything would be clear:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    // your code goes here\n    int nc;\n    int c;\n    for (nc=0;(c = getchar()) != EOF;nc++)\n    {\n        printf(\"The char is '%c' code: 0x%02x\\n\", c &gt;= 32 ? c : '.', c);\n    }\n    printf(\"%d\\n\", nc);\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/jfGK7h\" rel=\"nofollow noreferrer\">https://ideone.com/jfGK7h</a></p>\n\n<p>And the mistery is solved. You have pressed the enter in the ideone input box and you have a new line there.</p>\n"}, {"comments": [{"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1562161075, "post_id": 56870926, "comment_id": 100291629, "body": "i run this code in online compiler www.ideone.com, where i have put the enter key in input and after running it was showing empty input , and result as 1. now why add end character as <code>\\t</code>, i am learning c language ( from c proramming language by kernigan and ritchie book) and want to test what a tab do in c that&#39;s all."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1562169590, "post_id": 56870926, "comment_id": 100296524, "body": "@prashantrana, and what about writing a <code>\\n</code> ???  anyway, K&amp;R is a very good book to learn C.  Clear, concise and very focused on the details.  All books from D. Ritchie hold perfectly to be used today without changing anything."}, {"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1562172435, "post_id": 56870926, "comment_id": 100297906, "body": "D. Ritche book is really good and holds concept and coding pratice today, i will update the  question to <code>\\n</code> instead of <code>\\t</code>"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 1, "creation_date": 1562173710, "post_id": 56870926, "comment_id": 100298525, "body": "That&#39;s not necessary.  The <code>\\t</code> confused me, because it allowed me to see the <code>D</code> part of the <code>^D</code> echoed character, and I was  wondering for a while, where did that <code>D</code> came.  The previous <code>^</code> was overwritten by the <code>1</code>, making it to appear as <code>1D</code> in the screen, which was nonsense. Not until I revised your code and saw the <code>\\t</code> was I aware of the actual output."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 1, "last_activity_date": 1562159423, "creation_date": 1562159423, "answer_id": 56870926, "question_id": 56851809, "link": "https://stackoverflow.com/questions/56851809/unexpected-result-when-counting-word-length-in-c-using-for-loop/56870926#56870926", "title": "unexpected result when counting word length in c using for loop", "body": "<p>How did you input that <strong>input</strong>?</p>\n\n<p>If you hit the <code>&lt;enter&gt;</code> key at the keyboard, then you got a single <code>\\n</code> char, leading to that response.</p>\n\n<p>Try this:</p>\n\n<pre><code>$ a.out\n&lt;Ctrl-D&gt;\n0\n$ _\n</code></pre>\n\n<p>(<code>$</code> is the prompt, and <code>&lt;Ctrl-D&gt;</code> is the way to produce no input from a unix terminal)  Of course, <code>a.out</code> is the name of your program (you didn't show how it is called)</p>\n\n<p>BTW, why do you end the output in a <code>\\t</code> in <code>printf()</code> ??? <code>\\t</code> is a tab character, not a new line.... <code>8-.</code></p>\n"}], "owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 56851979, "answer_count": 2, "score": 1, "last_activity_date": 1562172496, "creation_date": 1562068157, "last_edit_date": 1562172496, "question_id": 56851809, "link": "https://stackoverflow.com/questions/56851809/unexpected-result-when-counting-word-length-in-c-using-for-loop", "title": "unexpected result when counting word length in c using for loop", "body": "<p>i am learning c language, and the program is about counting no of characters.</p>\n\n<p>here is code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    // your code goes here\n    double nc;\n    for (nc=0;getchar() != EOF;nc++);\n    printf(\"%.0f\\n\", nc);\n\n    return 0;\n}\n</code></pre>\n\n<p>input</p>\n\n<pre><code>''\n</code></pre>\n\n<p>input in none.</p>\n\n<p>the output which I am getting is 1. </p>\n\n<p>online compiler <a href=\"https://ideone.com/lnB5G1\" rel=\"nofollow noreferrer\">result</a></p>\n\n<p>shouldn't be output equal to 0, not 1.unable to understand why is this coming. </p>\n\n<p>thanks </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 7, "creation_date": 1562067894, "post_id": 56851693, "comment_id": 100253471, "body": "Why the deuce can you not use an array?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1562067942, "post_id": 56851693, "comment_id": 100253493, "body": "Please learn how to format questions and read this: <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 2, "creation_date": 1562067968, "post_id": 56851693, "comment_id": 100253509, "body": "You are storing all 10 numbers in the same variable <code>n</code>"}, {"owner": {"reputation": 916, "user_id": 3853175, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BG7vO.png?s=128&g=1", "display_name": "JKRT", "link": "https://stackoverflow.com/users/3853175/jkrt"}, "edited": false, "score": 1, "creation_date": 1562068141, "post_id": 56851693, "comment_id": 100253592, "body": "It could be possible that your instructor might be wanting you to implement a linked list to illustrate that you can use different data structures then arrays. <a href=\"https://www.geeksforgeeks.org/data-structures/linked-list/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/data-structures/linked-list</a> has some nice information about it : )"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1562068153, "post_id": 56851693, "comment_id": 100253603, "body": "Did they tell you what data structure to use then? Probably, what data structure were you taught before getting this assignment. Start with a version which just stores the numbers user is entering. Once that works (or seems to work), then add code to print out all the numbers. Then as final step, instead of printing, do search."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1562068329, "post_id": 56851693, "comment_id": 100253714, "body": "You need to tell us everything. Did your instructor/teacher/tutor explicitely ask that no array should be used? Or do you simply think &quot;arrays is too complicated for me, I want to do it without arrays&quot;, or... ? Please <a href=\"https://stackoverflow.com/posts/56851693/edit\">edit</a>  your question for clarifications."}, {"owner": {"reputation": 13, "user_id": 11729000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3582fb73907d1db5715cd08b29284d1?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Abdeltwab ", "link": "https://stackoverflow.com/users/11729000/ahmed-abdeltwab"}, "edited": false, "score": 0, "creation_date": 1562068710, "post_id": 56851693, "comment_id": 100253904, "body": "I had just taught ( if statement and for loop ) and that is it"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 5, "creation_date": 1562069284, "post_id": 56851693, "comment_id": 100254215, "body": "The only way you can do this without an array is by using ten separate variables. (You can use a recursive function, but you haven&#39;t learned about those yet.) An array doesn&#39;t complicate it - if anything, it makes it easier."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1562069512, "post_id": 56851693, "comment_id": 100254335, "body": "The point of this exercise is that you get to practice the use of arrays. The point is not writing a program that produces a particular output. If you find arrays complicated, it is important for you to use one to solve this problem."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562075072, "post_id": 56851693, "comment_id": 100257817, "body": "Solution: learn how to use an array. It&#39;s much easier than learning how to write code that avoids arrays."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1562075856, "post_id": 56851693, "comment_id": 100258299, "body": "Here&#39;s what I think happened.  The instructor wanted to show how hard it is to solve this problem using 10 separate int variables, 10 separate input statements, and 10 explicit if statements to &quot;search&quot;.  The intent was to then <i>motivate</i> the use of arrays as a vastly superior alternative.  Such motivation is a fine, pedagogical technique -- <i>if</i> the instructor does it!  But expecting the student to come up with the &quot;bad&quot; solution which then motivates the better one is just bizarre.  Anyway, go easy on the OP -- this travesty isn&#39;t his fault."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1562077759, "post_id": 56851693, "comment_id": 100259509, "body": "If you want to do this without an array, it&#39;s actually easier if you also do it without any loops, either.  A loop is only good if you have an array to loop over.  If you have (say) ten individual variables, the easiest way to iterate over them is going to be with ten separate <code>if</code> statements."}], "answers": [{"tags": [], "owner": {"reputation": 354, "user_id": 11727918, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bTaZpiC4KJ8/AAAAAAAAAAI/AAAAAAAAABQ/ycG-qmsyeCA/photo.jpg?sz=128", "display_name": "J CHEN", "link": "https://stackoverflow.com/users/11727918/j-chen"}, "is_accepted": true, "score": 1, "last_activity_date": 1562138309, "last_edit_date": 1562138309, "creation_date": 1562072511, "answer_id": 56853110, "question_id": 56851693, "link": "https://stackoverflow.com/questions/56851693/how-can-i-solve-the-problem-without-using-array-as-array-is-complicated-to-me-fo/56853110#56853110", "title": "how can I solve the problem without using array as array is complicated to me for now?", "body": "<pre><code>#include &lt;stdio.h&gt;\n\n\nint main(){\n    //there are 10 int in n\n    int n[10], i, value;\n\n\n\n    for (i=0;i&lt;10;i=i+1)//array count from 0 ,i=i+1 same as i++ \n    {\n        printf(\"enter number %d : \",i);\n        scanf(\" %d\",&amp;(n[i]));//&amp; mean get address so you will push what you input to n[0]~n[9]\n        //little tip  before %d remain a space for some reason if you keep learn you will know\n\n\n    }\n    printf(\"Enter the value to search: \");\n    scanf(\" %d\",&amp;value);//&amp; mean get address so you push what you input to value here\n\n    for (i=0;i&lt;10;i=i+1)\n    { \n        if (value == n[i])\n        {\n            printf(\"value is exist is element number %d\\n\",n[i]);\n            break;//break mean out of for loop\n            //\n        }\n\n    }\n    if(i==10){//if search all not found then i will be 10 because after loop i will +1\n        //if break i will not +1\n        printf(\"value is not exist\\n\");\n    }\n        return 0;//remember \"int\" main() so you need return 0 \n}\n</code></pre>\n\n<p>Keep learning you will be stronger\nArray is simple</p>\n"}], "owner": {"reputation": 13, "user_id": 11729000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3582fb73907d1db5715cd08b29284d1?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Abdeltwab ", "link": "https://stackoverflow.com/users/11729000/ahmed-abdeltwab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "closed_date": 1562073897, "accepted_answer_id": 56853110, "answer_count": 1, "score": -3, "last_activity_date": 1562138309, "creation_date": 1562067817, "last_edit_date": 1562070017, "question_id": 56851693, "link": "https://stackoverflow.com/questions/56851693/how-can-i-solve-the-problem-without-using-array-as-array-is-complicated-to-me-fo", "closed_reason": "Needs more focus", "title": "how can I solve the problem without using array as array is complicated to me for now?", "body": "<p>Problem is :- Write a C code that ask the user to enter 10 numbers, then ask him to enter another number to search on it in the 10 numbers and print its location in case it is found. In case the number is not found, it will print number no exist.</p>\n\n<p>Code I write is :-</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid main(void)\n{\n    int n, i, value,j;\n\n    for (i=1;i&lt;=10;++i)\n    {\n        printf(\"enter number %d : \",i);\n        scanf(\"%d\",&amp;n);\n\n    }\n    printf(\"Enter the value to search: \");\n    scanf(\"%d\",&amp;value);\n     /*next part of code is not correct \n        that can not search to find the place of number */\n    for (j=1;j&lt;=10;++j)\n    { \n        if (value == n)\n        {\n            printf(\"value is exist at element number %d\",n);\n\n        }\n        else \n        {\n            printf(\"value is not exist\\n\");\n        }\n\n    }\n}\n</code></pre>\n\n<p>output will be:-\n(after enter the numbers).</p>\n\n<pre><code>Enter the value to search is 12.  \nvalue is exist at element 9\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1562068169, "post_id": 56851689, "comment_id": 100253611, "body": "Use your debugger. Debug it and you will see how it is implemented in your case."}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1562069129, "post_id": 56851787, "comment_id": 100254140, "body": "(Calling <code>exit</code> in an <code>at_exit</code> handler is definitely a second call to <code>exit</code> if the handler was called due to <code>exit</code> being called, but a handler may be called by the program normally, in which case it would be the first <code>exit</code> call. But then it would be called again, unless the handler took a different code path.)"}, {"owner": {"reputation": 1839, "user_id": 5723524, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Zhsp7.png?s=128&g=1", "display_name": "Taioli Francesco", "link": "https://stackoverflow.com/users/5723524/taioli-francesco"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1562074701, "post_id": 56851787, "comment_id": 100257586, "body": "@EricPostpischil ok, but why it doesn&#39;t create an infinite loop? The behavior is undefined, so it can create loop or, as in this case, not create it?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1562175486, "post_id": 56851787, "comment_id": 100299319, "body": "Undefined means undefined. It could do anything, and it is meaningless to ask <i>of the standard</i> why a particular thing did or did not happen. You can only ask why your implementation did a particular thing, and the answer is almost always &quot;because it did&quot;."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 6, "last_activity_date": 1562069235, "last_edit_date": 1562069235, "creation_date": 1562068103, "answer_id": 56851787, "question_id": 56851689, "link": "https://stackoverflow.com/questions/56851689/what-happen-if-an-exit-occur-inside-the-atexit-handler/56851787#56851787", "title": "What happen if an exit occur inside the atexit handler?", "body": "<p>The behavior is undefined.</p>\n\n<blockquote>\n  <p><strong>7.22.4.4 The exit function</strong></p>\n  \n  <p><a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.22.4.4p2\" rel=\"nofollow noreferrer\">2</a> The exit function causes normal program termination to occur. No\n  functions registered by the at_quick_exit function are called. If a\n  program calls the exit function more than once, or calls the\n  quick_exit function in addition to the exit function, the behavior is\n  undefined.</p>\n</blockquote>\n\n<p>Calling <code>exit</code> in an <code>at_exit</code> handler (that is being run during the normal processing of exit) is definitely a second call to exit.</p>\n\n<p>Exiting normally is a possible behavior, but seeing as anything can happen (the nature of the behavior being undefined), it could very well result in catastrophe. Best not to do it.</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 1, "last_activity_date": 1562169303, "last_edit_date": 1562169303, "creation_date": 1562168852, "answer_id": 56873842, "question_id": 56851689, "link": "https://stackoverflow.com/questions/56851689/what-happen-if-an-exit-occur-inside-the-atexit-handler/56873842#56873842", "title": "What happen if an exit occur inside the atexit handler?", "body": "<p>As you have been pointed to, the behaviour is undefined.... but despite of that, trying to justify your observed behaviour, the library writers normally tend to cope with strange programmer behaviours (like the <em>at least strange</em> of calling <code>exit()</code> while the program is in <code>exit()</code>)  I'll say:</p>\n\n<ul>\n<li><p>It is possible that the <code>exit(3)</code> function, before calling any of the exit handlers, just unregisters it from the list of signal handlers.  This would make the <code>exit(2)</code> function to call each exit handler <strong>only once</strong> and not to call the handler recursively.  Just try to register it again to see what happens would be a good exercise.</p></li>\n<li><p>It is possible that the exit function, marks itself as being run and if called inside a  handler, just return, as if nothing happens.</p></li>\n<li><p>It is possible your expected behaviour that could lead to a stak overflow (no pun here :))</p></li>\n<li><p>It is possible to ...</p></li>\n</ul>\n\n<p>Whatever happens is part of the U.B. commented in other answers, but for a library that tries to extend on the standard and behave normally, the probably best behaviour is to avoid recursive calls in exit handlers in some of the ways proposed.</p>\n\n<p>On the other side, you had better not to use this <em>feature</em> (let's call so) in your programs, because, as it is not endorsed by the standard, can lead you to trouble if you port your programs elsewhere in the future.</p>\n\n<p>You probably think on <code>exit(3)</code> as a function that is never to be called twice (apart from recursively, like you expose) but think you have several threads on your program and two of them call the <code>exit(3)</code> function at the same time.</p>\n\n<p>The probable best behaviour is to have some kind of semaphore that allows the handlers to be protected from mutual access... but the best way to have the list of handlers for short time compromised, is to unlink one handler from the list (let's consider the list a queue, where each thread comes and takes a handler)  they get the handler, unlock the queue and then execute it.  This can lead in each handler being executed by one thread of the ones that have called <code>exit()</code>.  The first thing an implementor faces it how to deal with several threads calling <code>exit()</code> at the same time.</p>\n"}, {"tags": [], "owner": {"reputation": 1839, "user_id": 5723524, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Zhsp7.png?s=128&g=1", "display_name": "Taioli Francesco", "link": "https://stackoverflow.com/users/5723524/taioli-francesco"}, "is_accepted": false, "score": 0, "last_activity_date": 1562175205, "creation_date": 1562175205, "answer_id": 56875361, "question_id": 56851689, "link": "https://stackoverflow.com/questions/56851689/what-happen-if-an-exit-occur-inside-the-atexit-handler/56875361#56875361", "title": "What happen if an exit occur inside the atexit handler?", "body": "<blockquote>\n  <p>POSIX.1 says that the result of calling exit(3) more than once (i.e., calling exit(3) within a function registered using atexit()) <strong>is undefined</strong>. <strong>On some systems (but not Linux), this can result in an infinite recursion; portable programs should not invoke exit(3) inside a function registered using atexit().</strong></p>\n</blockquote>\n\n<p><a href=\"https://www.systutorials.com/docs/linux/man/3-atexit/\" rel=\"nofollow noreferrer\">found here</a></p>\n"}], "owner": {"reputation": 105, "user_id": 6475274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d79bee8bbe8e163a65e1ea6b57fdaf?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia Corradi", "link": "https://stackoverflow.com/users/6475274/mattia-corradi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 56851787, "answer_count": 3, "score": 2, "last_activity_date": 1562175205, "creation_date": 1562067804, "question_id": 56851689, "link": "https://stackoverflow.com/questions/56851689/what-happen-if-an-exit-occur-inside-the-atexit-handler", "title": "What happen if an exit occur inside the atexit handler?", "body": "<p>I know that atexit is used to register a function handler. Then when an exit in the code occur that function is called. But what if an exit occur inside the function handler?</p>\n\n<p>I was expecting an infinite loop but in reality the program exit normally. Why?</p>\n\n<pre><code>void handler(){\n    printf(\"exit\\n\");\n    exit(1);\n}\n\nint maint(int argc, char *argv[]) {\n    atexit(handler);\n    exit(1);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "edited": false, "score": 3, "creation_date": 1562065484, "post_id": 56851037, "comment_id": 100252223, "body": "Maybe you should rethink your design if you have 9 dimensions in your array."}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1562065665, "post_id": 56851037, "comment_id": 100252301, "body": "You need to fix the indentation."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1562065770, "post_id": 56851037, "comment_id": 100252347, "body": "Do your system have over <b><i>forty</i></b> gigs of memory available as a contiguous chunk?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1562066118, "post_id": 56851037, "comment_id": 100252515, "body": "You furthermore need to go back to your books, tutorials or class-notes, because there&#39;s some misunderstanding in your knowledge about how <a href=\"https://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>fscanf</code> (and related functions)</a> works."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1562066425, "post_id": 56851037, "comment_id": 100252680, "body": "I don&#39;t mean to be rude, but the problem is that you simply don&#39;t know what you are doing. Assuming double is 8 bytes, your array takes up 43Gb of stack space. If you really have files that large, you have to read them in smaller chunks."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1562066950, "post_id": 56851037, "comment_id": 100252945, "body": "OT: Just out of curiosity, what are you storing in that 9-dimensional array? Quantum states?"}, {"owner": {"reputation": 1, "user_id": 11728774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3688d48cbbfbd4e2e56dfda371c4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ushak", "link": "https://stackoverflow.com/users/11728774/ushak"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1562072806, "post_id": 56851037, "comment_id": 100256402, "body": "@Bob__ I am storing some experimental event numbers as a function of different quantum mechanical parameters."}, {"owner": {"reputation": 1, "user_id": 11728774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3688d48cbbfbd4e2e56dfda371c4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ushak", "link": "https://stackoverflow.com/users/11728774/ushak"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562073035, "post_id": 56851037, "comment_id": 100256529, "body": "@Lundin... I think you don&#39;t understand the problems. I can&#39;t afford to read the files in small chunks. These numbers have some physical meaning and I need to use them later in the code and reading them in smaller chunks doesn&#39;t serve the purpose."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562073300, "post_id": 56851037, "comment_id": 100256691, "body": "@Ushak Oh? What kind of super computer are you using then, that has a stack size of 43 Gb? I don&#39;t think the gsl library has been ported to secret, exotic super computers, so you should perhaps aim to write code for a PC instead. In which case the linked duplicate answers the question."}, {"owner": {"reputation": 1, "user_id": 11728774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3688d48cbbfbd4e2e56dfda371c4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ushak", "link": "https://stackoverflow.com/users/11728774/ushak"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562073456, "post_id": 56851037, "comment_id": 100256779, "body": "@Lundin That&#39;s the problem.. I don&#39;t have a super computer. Probably, I have to find some server to run the code, because if I break the file in small chunks the data simply lose their physical implications."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562074505, "post_id": 56851037, "comment_id": 100257466, "body": "@Ushak You&#39;ll have to invent an OS with 43Gb stack space. The seg fault is caused by a stack overflow when you go beyond the stack space given to your process. Similarly, your average PC will refuse to allocate 43Gb heap because there isn&#39;t that much physical RAM to be had. So you have to rethink your whole program design and use some manner of random access file instead."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1562074544, "post_id": 56851037, "comment_id": 100257498, "body": "I&#39;m wondering if it would be possible for you to post a <i>small</i> sample of that input file (how big is it, BTW). The (very) little I was supposed to know about QM expired years ago, but that data structure still seems odd to me."}, {"owner": {"reputation": 1, "user_id": 11728774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3688d48cbbfbd4e2e56dfda371c4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ushak", "link": "https://stackoverflow.com/users/11728774/ushak"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1562075780, "post_id": 56851037, "comment_id": 100258256, "body": "@Bob__ a small sample of the file. The file is 35.1 GB.  -180 0.4 0.07812 0.00208 0.93 0 0.95 -180 4.78494 15.0508 10.4624 3.53272 1.96088 1.14648  -180 0.4 0.07812 0.00208 0.93 0 0.95 -160 4.78494 15.0508 10.4624 3.53272 1.96088 1.14648"}, {"owner": {"reputation": 1, "user_id": 11728774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3688d48cbbfbd4e2e56dfda371c4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ushak", "link": "https://stackoverflow.com/users/11728774/ushak"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562075890, "post_id": 56851037, "comment_id": 100258331, "body": "@Lundin Can you kindly help me with random accessing the file? I am not familiar with this kind of programming."}, {"owner": {"reputation": 1, "user_id": 11728774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3688d48cbbfbd4e2e56dfda371c4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ushak", "link": "https://stackoverflow.com/users/11728774/ushak"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562075964, "post_id": 56851037, "comment_id": 100258377, "body": "@Lundin: Also, can this be done in Python?"}], "answers": [{"comments": [{"owner": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "edited": false, "score": 0, "creation_date": 1562066480, "post_id": 56851307, "comment_id": 100252712, "body": "That still wouldn&#39;t explain the seg-fault. probably because of what @Someprogrammerdude said regarding the size required for that array."}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": -1, "last_activity_date": 1562066381, "creation_date": 1562066381, "answer_id": 56851307, "question_id": 56851037, "link": "https://stackoverflow.com/questions/56851037/problems-reading-a-file-and-passing-into-a-large-multi-dimensional-array/56851307#56851307", "title": "Problems reading a file and passing into a large multi dimensional array", "body": "<p>The break statement that you have written will only exit the innermost for loop. </p>\n\n<p>To exit the other loops, you need to write if conditions to check if the break has been triggered. But, since you have 9 nested for loops, you may be better off using a goto statement.</p>\n\n<pre><code>double ret2;\nint ret3;\nfor (k=0; k&lt;37; k++)\n{\n  for (l=0; l&lt;24; l++)\n  {\n    for (m=0;m&lt;5;m++)\n    { \n      for (n=0;n&lt;5;n++)\n      {\n        for (p=0; p&lt;8; p++)\n        {\n          for (q=0; q&lt;19; q++)\n          {\n            for (r=0; r&lt;6; r++)\n            {\n              for (s=0; s&lt;19; s++)\n              {\n                for (o=0;o&lt;14;o++)\n                {\n                   ret3 = fscanf(file2,\"%lf \",&amp;ret2);\n                   B[k][l][m][n][p][q][r][s][o]=ret2;\n                   if (ret3 != 1)\n                   {\n                      goto endloop;\n                   }\n                }\n              }\n            }\n          }\n        }\n      }\n    } \n  }\n}\n:endloop\n\nexit(0);\n</code></pre>\n\n<p>You should also look into your design as to WHY you need a 9 dimensional array and try to simplify this.</p>\n"}], "owner": {"reputation": 1, "user_id": 11728774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a3688d48cbbfbd4e2e56dfda371c4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Ushak", "link": "https://stackoverflow.com/users/11728774/ushak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "closed_date": 1562066527, "answer_count": 1, "score": -1, "last_activity_date": 1562066399, "creation_date": 1562065401, "last_edit_date": 1562066399, "question_id": 56851037, "link": "https://stackoverflow.com/questions/56851037/problems-reading-a-file-and-passing-into-a-large-multi-dimensional-array", "closed_reason": "Duplicate", "title": "Problems reading a file and passing into a large multi dimensional array", "body": "<p>I am trying to read a large data file and passing the data as a 9-dimensional <strong>array</strong> <code>B[37][24][5][5][8][19][6][19][14]</code>. I will have to use this array later in the code. But I am getting the <code>Segmentation fault error</code>. </p>\n\n<p>I have also tried to define B as a pointer, instead of an array and used  the command \"<code>B = (double *)malloc(5385542400 * sizeof(double));</code>\". But it didn't help.</p>\n\n<p>Here is the code where I defined B as an array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;gsl/gsl_rng.h&gt;\n#include &lt;gsl/gsl_randist.h&gt;\n#include &lt;math.h&gt;\n#include &lt;string.h&gt;\n\n\n\n/* If filename given, write to file; for empty filename write to \nscreen */\nchar MYFILE[]=\"chisq_NHtest_NOvA_nu_app_non-uni_alpha_phi10_10sys.dat\";\nint main()\n{\nFILE *outfile = NULL; \n\n  outfile = fopen(MYFILE, \"w\");\n  if (outfile == NULL)\n  {\nprintf(\"Error opening output file.\\n\");\nreturn -1;\n  }\n\nchar MYFILE1[]=\"nova_app_nu_data.dat\";\n\nFILE *file1 = NULL;\nfile1 = fopen(MYFILE1, \"r\");\n  if (file1 == NULL)\n  {\n    printf(\"Error reading input file1.\\n\");\n    return -1;\n  }\nint i;\nstatic double A[6];\ndouble ret1;\n for (i=0; i&lt;6; i++)\n            {\n\n             ret1= fscanf(file1,\"%lf \",&amp;A[i]);\n\n    if (ret1 == EOF)\n    {\n    break;\n    }\n}\n\n\nchar MYFILE2[]=\"events_vs_E+test_NH_NOvA_nu_app_non-uni_phi10_alpha00_alpha10_alpha11.dat\";\n\nFILE *file2 = NULL;\nfile2 = fopen(MYFILE2, \"r\");\n  if (file2 == NULL)\n  {\n    printf(\"Error reading input file2.\\n\");\n    return -1;\n  }\nint k,l,m,n,o,p,q,r,s;\ndouble C;\nstatic double B[37][24][5][5][8][19][6][19][14];\n\ndouble ret2;\n for (k=0; k&lt;37; k++)\n            {\n for (l=0; l&lt;24; l++)\n        {\nfor (m=0;m&lt;5;m++)\n         {\nfor (n=0;n&lt;5;n++)\n         {\nfor (p=0; p&lt;8; p++)\n        {\nfor (q=0; q&lt;19; q++)\n        {\nfor (r=0; r&lt;6; r++)\n        {\nfor (s=0; s&lt;19; s++)\n        {\nfor (o=0;o&lt;14;o++)\n{\n          fscanf(file2,\"%lf \",&amp;ret2);\nB[k][l][m][n][p][q][r][s][o]=ret2;\nif (ret2 == EOF)\n{\nbreak;\n}\n}\n}\n}\n}\n}\n}\n}\n}\n}\n\nexit(0);\n}    \n</code></pre>\n\n<p>If I change the end value of s loop from 19 to 5, the code is running properly.</p>\n"}, {"tags": ["c", "sockets", "networking", "tcp", "network-programming"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1562065402, "post_id": 56850692, "comment_id": 100252172, "body": "The sendind path isn&#39;t necessarily the same as the receiving path, and a study decades ago showed that in practice they are different something like 40% of the time."}, {"owner": {"reputation": 7193, "user_id": 765971, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2f390fb2ccc9321e41ca5bcd09cb9a9a?s=128&d=identicon&r=PG", "display_name": "SKi", "link": "https://stackoverflow.com/users/765971/ski"}, "edited": false, "score": 0, "creation_date": 1562066450, "post_id": 56850692, "comment_id": 100252694, "body": "According to rfc879: <i>The default TCP Maximum Segment Size is 536</i>. At least Linux seems to use that value sometimes for initial RCV_MSS value."}], "answers": [{"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1562089231, "creation_date": 1562089231, "answer_id": 56857612, "question_id": 56850692, "link": "https://stackoverflow.com/questions/56850692/what-does-tcpi-rcv-mss-mean/56857612#56857612", "title": "What does tcpi_rcv_mss mean?", "body": "<p>Receive MSS is the maximum segment size you announce to the other peer you can accept, and Transmit MSS is the value announced by your peer and marks the maximum segment size you can send to it.  Of course, there are two, yours doesn't have to be equal to your partner's.</p>\n"}], "owner": {"reputation": 395, "user_id": 11164833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee9cc8b40809cb899420831de0a8e25f?s=128&d=identicon&r=PG&f=1", "display_name": "wonter", "link": "https://stackoverflow.com/users/11164833/wonter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 350, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1562089231, "creation_date": 1562064222, "question_id": 56850692, "link": "https://stackoverflow.com/questions/56850692/what-does-tcpi-rcv-mss-mean", "title": "What does tcpi_rcv_mss mean?", "body": "<p>As we known, MSS is Maximum Segment Size of TCP data.</p>\n\n<p>In Ipv4, MSS is 1460 in general, and in Ipv6, MSS is 1440 in general.</p>\n\n<p>But the strange thing is: there are two types of MSS in struct tcp_info, which is <code>tcpi_snd_mss</code> and <code>tcpi_rcv_mss</code>.</p>\n\n<p>I did a simple experiment, connect <code>www.stackoverflow.com</code> and output these two values.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;netinet/in.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/tcp.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;assert.h&gt;\n\nint main() {\n    int fd = socket(AF_INET, SOCK_STREAM, 0);\n    assert(fd &gt;= 0);\n\n    struct sockaddr_in server;\n    server.sin_family = AF_INET;\n    server.sin_port = htons(80);\n    server.sin_addr.s_addr = inet_addr(\"151.101.193.69\");\n\n    int rc = connect(fd, (void*)&amp;server, sizeof(server));\n    assert(rc &gt;= 0);\n\n    struct tcp_info info;\n    socklen_t len = sizeof(info);\n    rc = getsockopt(fd, SOL_TCP, TCP_INFO, (void*)&amp;info, &amp;len);\n    assert(rc &gt;= 0);\n\n\n    printf(\"%u\\n\", info.tcpi_snd_mss);\n    printf(\"%u\\n\", info.tcpi_rcv_mss);\n    return 0;\n}\n</code></pre>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ ./a.out\n1440\n536\n</code></pre>\n\n<p>The <code>tcpi_rcv_mss</code> is 536!!</p>\n\n<p>But according to <code>tcpdump</code>, the MSS should be 1440(my MSS is 1460, stackoverflow'MSS is 1440).</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ sudo tcpdump -n host 151.101.193.69\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes\n18:39:52.690772 IP 10.101.25.77.14947 &gt; 151.101.193.69.80: Flags [S], seq 548910783, win 29200, options [mss 1460,sackOK,TS val 3459919655 ecr 0,nop,wscale 8], length 0\n18:39:52.797959 IP 151.101.193.69.80 &gt; 10.101.25.77.14947: Flags [S.], seq 577830562, ack 548910784, win 28800, options [mss 1440,nop,nop,sackOK,nop,wscale 9], length 0\n18:39:52.798000 IP 10.101.25.77.14947 &gt; 151.101.193.69.80: Flags [.], ack 1, win 115, length 0\n18:39:52.798333 IP 10.101.25.77.14947 &gt; 151.101.193.69.80: Flags [F.], seq 1, ack 1, win 115, length 0\n18:39:53.160527 IP 10.101.25.77.14947 &gt; 151.101.193.69.80: Flags [F.], seq 1, ack 1, win 115, length 0\n18:39:53.241597 IP 151.101.193.69.80 &gt; 10.101.25.77.14947: Flags [F.], seq 1, ack 2, win 57, length 0\n18:39:53.241657 IP 10.101.25.77.14947 &gt; 151.101.193.69.80: Flags [.], ack 2, win 115, length 0\n</code></pre>\n\n<p>So i have two questions:</p>\n\n<ol>\n<li>What does <code>tcpi_rcv_mss</code> mean?</li>\n<li>Why is <code>tcpi_rcv_mss</code> 536 in my experiment?</li>\n</ol>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1562063818, "post_id": 56850548, "comment_id": 100251315, "body": "C or C++? Take your pick."}, {"owner": {"reputation": 19, "user_id": 4644877, "user_type": "registered", "profile_image": "https://graph.facebook.com/947423041943747/picture?type=large", "display_name": "L&#237;sias de Castro", "link": "https://stackoverflow.com/users/4644877/l%c3%adsias-de-castro"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1562063864, "post_id": 56850548, "comment_id": 100251336, "body": "I am coding in c language."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1562066902, "post_id": 56850548, "comment_id": 100252910, "body": "So you basically want a line drawing algorithm? Google that, you&#39;ll get more good material than can fit in  SO answer. Or take a shortcut and go here: <a href=\"https://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Bresenham%27s_line_algorithm</a>"}, {"owner": {"reputation": 755, "user_id": 6139796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70e8ec623799f48125b0aa020475091d?s=128&d=identicon&r=PG", "display_name": "Holger", "link": "https://stackoverflow.com/users/6139796/holger"}, "edited": false, "score": 2, "creation_date": 1562067344, "post_id": 56850548, "comment_id": 100253168, "body": "If you replace <code>USER_C(user-&gt;it)-&gt;object</code> by a local variable U, your code would be half in size and double in readability."}, {"owner": {"reputation": 19, "user_id": 4644877, "user_type": "registered", "profile_image": "https://graph.facebook.com/947423041943747/picture?type=large", "display_name": "L&#237;sias de Castro", "link": "https://stackoverflow.com/users/4644877/l%c3%adsias-de-castro"}, "edited": false, "score": 0, "creation_date": 1562067349, "post_id": 56850548, "comment_id": 100253174, "body": "It is basically that. I saw bresenha once. But it requires a for or do loop in order to work. The engine has to update that in a different way as you can see through the code above. So I could not find a way to implement bresenha into my code. Do you know I way for me to do that?"}, {"owner": {"reputation": 19, "user_id": 4644877, "user_type": "registered", "profile_image": "https://graph.facebook.com/947423041943747/picture?type=large", "display_name": "L&#237;sias de Castro", "link": "https://stackoverflow.com/users/4644877/l%c3%adsias-de-castro"}, "edited": false, "score": 0, "creation_date": 1562068204, "post_id": 56850548, "comment_id": 100253637, "body": "I changed the variable in order to make it cleaner."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1562068352, "post_id": 56850548, "comment_id": 100253727, "body": "Put the insides of the loop in a function. Then call that function once per game frame, instead of from a separate loop. You need more state variables though."}, {"owner": {"reputation": 19, "user_id": 4644877, "user_type": "registered", "profile_image": "https://graph.facebook.com/947423041943747/picture?type=large", "display_name": "L&#237;sias de Castro", "link": "https://stackoverflow.com/users/4644877/l%c3%adsias-de-castro"}, "edited": false, "score": 0, "creation_date": 1562086131, "post_id": 56850548, "comment_id": 100264047, "body": "If I put a loop the process won&#39;t stop until the loop ends. I already tried this. Then, when the loop finishes the dot already did his movement"}], "owner": {"reputation": 19, "user_id": 4644877, "user_type": "registered", "profile_image": "https://graph.facebook.com/947423041943747/picture?type=large", "display_name": "L&#237;sias de Castro", "link": "https://stackoverflow.com/users/4644877/l%c3%adsias-de-castro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562144189, "creation_date": 1562063692, "last_edit_date": 1562144189, "question_id": 56850548, "link": "https://stackoverflow.com/questions/56850548/line-trajectory-in-c", "title": "line trajectory in c", "body": "<p>I am creating an engine.\nAlmost everything is working fine.\nI can even do games with that.</p>\n\n<p>I am doing a rpg game and decided to let\nthe dots to fire each other.\nI already have a function to move the dots.\nBut this function in not linear.</p>\n\n<p>So, that is the place I can't go on.\nI need to change that function to make\nthose tragectories linear. So I can fire\na bullet or an arrow in the dots and that will\ngo straight to them.</p>\n\n<p>This is the function I have now:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>PLACE_CALL STATUS PLACE_TYPE place_user_route(CHAINED * user, BP32 x, BP32 y) {\n    if (user &amp;&amp; USER_C(user-&gt;it)-&gt;object &amp;&amp; bit_is_on(USER_C(user-&gt;it)-&gt;object-&gt;status, OBJECT_VISIBLE)) {\n        OBJECT_SET * U = USER_C(user-&gt;it)-&gt;object;\n        if (U-&gt;x_route == x &amp;&amp; U-&gt;y_route == y) {\n            obj_where_stop_all(U);\n            return (On);\n        }\n        //printf(\"xs %f ys %f\\n\",object-&gt;x_speed,object-&gt;y_speed);\n        if (U-&gt;x_route == x) {\n            if (U-&gt;y_route &gt; y) {\n                U-&gt;y_route += -U-&gt;y_speed;\n                U-&gt;where_stop_but(U, NORTH);\n                if (U-&gt;y_route &lt; y) {\n                    U-&gt;y_route = y;\n                    U-&gt;where_stop(U);\n                    return (On);\n                }\n            }\n            if (U-&gt;y_route &lt; y) {\n                U-&gt;y_route += U-&gt;y_speed;\n                U-&gt;where_stop_but(U, SOUTH);\n                if (U-&gt;y_route &gt; y) {\n                    U-&gt;where_stop(U);\n                    U-&gt;y_route = y;\n                    return (On);\n                }\n            }\n            return (Off);\n        }\n        if (U-&gt;y_route == y) {\n            if (U-&gt;x_route &gt; x) {\n                U-&gt;x_route += -U-&gt;x_speed;\n                U-&gt;where_stop_but(U, WEST);\n                if (U-&gt;x_route &lt; x) {\n                    U-&gt;where_stop(U);\n                    U-&gt;x_route = x;\n                    return (On);\n                }\n            }\n            if (U-&gt;x_route &lt; x) {\n                U-&gt;x_route += U-&gt;x_speed;\n                U-&gt;where_stop_but(U, EAST);\n                if (U-&gt;x_route &gt; x) {\n                    U-&gt;where_stop(U);\n                    U-&gt;x_route = x;\n                    return (On);\n                }\n            }\n\n            return (Off);\n        }\n        if (U-&gt;x_route &gt; x) {\n            U-&gt;x_route += -U-&gt;x_speed;\n            if (U-&gt;x_route &lt; x)U-&gt;x_route = x;\n            if (U-&gt;y_route &gt; y) {\n                U-&gt;y_route += -U-&gt;y_speed;\n                U-&gt;where_stop_but_and(U, NORTH, WEST);\n                if (U-&gt;y_route &lt; y)U-&gt;y_route = y;\n            }\n            if (U-&gt;y_route &lt; y) {\n                U-&gt;where_stop_but_and(U, SOUTH, WEST);\n                U-&gt;y_route += U-&gt;y_speed;\n            }\n        }\n        if (U-&gt;x_route &lt; x) {\n            U-&gt;x_route += U-&gt;x_speed;\n            if (U-&gt;x_route &gt; x)U-&gt;x_route = x;\n            if (U-&gt;y_route &lt; y) {\n                U-&gt;y_route += U-&gt;y_speed;\n                U-&gt;where_stop_but_and(U, SOUTH, EAST);\n                if (U-&gt;y_route &gt; y)U-&gt;y_route = y;\n            }\n            if (U-&gt;y_route &gt; y) {\n                U-&gt;y_route += -U-&gt;y_speed;\n                U-&gt;where_stop_but_and(U, NORTH, EAST);\n                if (U-&gt;y_route &lt; y)U-&gt;y_route = y;\n            }\n        }\n    }\n    return (Off);\n}\n</code></pre>\n\n<p>what can I change for that code to behave like straight?</p>\n\n<p>Here is a part of the game working:</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=nuLi_lB6c4Y&amp;feature=youtu.be\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=nuLi_lB6c4Y&amp;feature=youtu.be</a></p>\n\n<p>Here is a function that I made, but it is not totally straight;</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>PLACE_CALL void straight_line(CHAINED * user, BP32 x, BP32 y) {\n    if (user) {\n        OBJECT_SET * U = USER_C(user-&gt;it)-&gt;object;\n        BP32 x_distancy = (x &gt; U-&gt;x_route) ? round(x - U-&gt;x_route) : round(U-&gt;x_route - x);\n        BP32 y_distancy = (y &gt; U-&gt;y_route) ? round(y - U-&gt;y_route) : round(U-&gt;y_route - y);\n        if (x_distancy &amp;&amp; y_distancy) {\n            if (x_distancy != y_distancy) {\n                //if (U-&gt;x_speed_old != U-&gt;x_speed)U-&gt;x_speed_old = U-&gt;x_speed;\n                //if (U-&gt;y_speed_old != U-&gt;y_speed)U-&gt;y_speed_old = U-&gt;y_speed;\n                U-&gt;x_speed = (x_distancy / y_distancy) * U-&gt;resistance;\n                U-&gt;y_speed = (y_distancy / x_distancy) * U-&gt;resistance;\n            } else {\n                if (U-&gt;x_speed != U-&gt;y_speed) {\n                    //if (U-&gt;x_speed_old != U-&gt;x_speed)U-&gt;x_speed_old = U-&gt;x_speed;\n                    //if (U-&gt;y_speed_old != U-&gt;y_speed)U-&gt;y_speed_old = U-&gt;y_speed;\n                    U-&gt;x_speed = (U-&gt;x_speed &gt; U-&gt;y_speed) ? U-&gt;x_speed : U-&gt;y_speed;\n                    U-&gt;y_speed = (U-&gt;y_speed &gt; U-&gt;x_speed) ? U-&gt;y_speed : U-&gt;x_speed;\n                }\n            }\n        } else {\n            if (!x_distancy &amp;&amp; !y_distancy) {\n                //U-&gt;x_speed = U-&gt;x_speed_old;\n                //U-&gt;y_speed = U-&gt;y_speed_old;\n                U-&gt;x_route = x;\n                U-&gt;y_route = y;\n            }\n            if (x_distancy &amp;&amp; !y_distancy) {\n                U-&gt;x_speed = (x_distancy / (x_distancy * U-&gt;resistance));\n                //U-&gt;y_speed = U-&gt;y_speed_old;\n                U-&gt;y_route = y;\n            }\n            if (y_distancy &amp;&amp; !x_distancy) {\n                U-&gt;y_speed = (y_distancy / (y_distancy * U-&gt;resistance));\n                //U-&gt;x_speed = U-&gt;x_speed_old;\n                U-&gt;x_route = x;\n            }\n            if (U-&gt;x_speed &lt; 1 &amp;&amp; U-&gt;y_speed &lt; 1) {\n                //U-&gt;x_speed = U-&gt;x_speed_old;\n                //U-&gt;y_speed = U-&gt;y_speed_old;\n                U-&gt;x_route = x;\n                U-&gt;y_route = y;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1562062241, "post_id": 56850055, "comment_id": 100250528, "body": "You can easily create a function to <i>clamp</i> the value within a range."}, {"owner": {"reputation": 103, "user_id": 10186492, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eT72SMO9iyA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7o5quNfHdH69a8CL0rEERWoptreYg/mo/photo.jpg?sz=128", "display_name": "towe", "link": "https://stackoverflow.com/users/10186492/towe"}, "edited": false, "score": 1, "creation_date": 1562062248, "post_id": 56850055, "comment_id": 100250530, "body": "Fan_Duty = Target_Fan_Speed * 256 / 100?"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1562062679, "post_id": 56850055, "comment_id": 100250724, "body": "If you increment the value after 99, what is the expected behaviour. Should the value stay at 99 or should it roll over to 0. Also if you decrement it below zero, do you want the new value to be 99?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1562063267, "post_id": 56850055, "comment_id": 100251029, "body": "Increment only <code>if(Fan_Duty &lt; 100)</code> and decrement only <code>if(Fan_Duty &gt; 0)</code>."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1562065263, "post_id": 56850055, "comment_id": 100252092, "body": "A <code>uint8_t</code> will have values from <code>0</code> to <code>255</code>, not <code>256</code>.    In any event, if you want to limit the values check the value before incrementing or decrementing it, and disallow unwanted changes.   Bear in mind that decrementing a <code>uint8_t</code>  variable with value <code>0</code> will give a result of <code>255</code>  and that incrementing one with value <code>255</code> will give a result of <code>0</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1562066941, "post_id": 56850055, "comment_id": 100252936, "body": "A PWM has a resolution of 8, 16 or 32 bits. In your case it is apparently 8 bits. Therefore the duty cycle can only be expressed as a raw value between 0 and 255. That&#39;s the only thing that makes sense if you program the PWM driver itself. Or is this some PC stuff with some sort of &quot;muddy logic&quot; API in between? What system is this? What generates the PWM?"}, {"owner": {"reputation": 423, "user_id": 6419060, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5c482c2cbff6d98ce430fe57133f587a?s=128&d=identicon&r=PG&f=1", "display_name": "G.ONE", "link": "https://stackoverflow.com/users/6419060/g-one"}, "reply_to_user": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1562125831, "post_id": 56850055, "comment_id": 100274513, "body": "@RishikeshRaje it should not rollover to 0 after 99 or 99 after 0"}, {"owner": {"reputation": 423, "user_id": 6419060, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5c482c2cbff6d98ce430fe57133f587a?s=128&d=identicon&r=PG&f=1", "display_name": "G.ONE", "link": "https://stackoverflow.com/users/6419060/g-one"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562126152, "post_id": 56850055, "comment_id": 100274584, "body": "@Lundin microcontroller is generating pwm using a timer, and i am providing 0 to 100 as percentage of PWM signal"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1562126196, "post_id": 56850055, "comment_id": 100274592, "body": "@G.ONE In this case, you have a good solution with Mike"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562134438, "post_id": 56850055, "comment_id": 100276823, "body": "@G.ONE So you have some manner of data protocol that you send to a microcontroller?"}], "answers": [{"tags": [], "owner": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "is_accepted": false, "score": 3, "last_activity_date": 1562074558, "last_edit_date": 1562074558, "creation_date": 1562062386, "answer_id": 56850138, "question_id": 56850055, "link": "https://stackoverflow.com/questions/56850055/is-there-any-way-to-limit-integer-datatype-value-range/56850138#56850138", "title": "Is there any way to limit integer datatype value range", "body": "<p>First check the value of <code>Fan_Duty</code> and then increment / decrement it.</p>\n\n<pre><code>if (Temp &gt; 40)\n{                        \n    if (Fan_Duty &lt; 100)\n    {\n        Fan_Duty ++;\n    }\n}\nelse if (Temp &lt; 40)\n{\n    if (Fan_Duty &gt; 0)\n    {\n        Fan_Duty --;\n    }\n}\nelse\n{\n      //do nothing\n}\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 6419060, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5c482c2cbff6d98ce430fe57133f587a?s=128&d=identicon&r=PG&f=1", "display_name": "G.ONE", "link": "https://stackoverflow.com/users/6419060/g-one"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1562074558, "creation_date": 1562062111, "question_id": 56850055, "link": "https://stackoverflow.com/questions/56850055/is-there-any-way-to-limit-integer-datatype-value-range", "title": "Is there any way to limit integer datatype value range", "body": "<p>I am trying to give PWM to a fan\nso i can give value (called fanduty in my case) from 0 to 100 only.\nbut uint8_t has values 0 to 256.</p>\n\n<pre><code>    if(Temp &gt; 40)                         \n                     Fan_Duty ++;\n    else if(Temp &lt; 40)                                           \n                     Fan_Duty --;\n    else\n                     //do nothing\n</code></pre>\n\n<p>so Fan_duty value go from 0 to 256 whereas while reducing it \nit starts from 256 and goes to 0,from 256 to 100 no use and hence it wastes precious time,\nso i want that value doesnot go above hundred .\nhow to limit an integer range ?</p>\n"}, {"tags": ["c", "winapi", "cmake", "dialog", "resources"], "comments": [{"owner": {"reputation": 1964, "user_id": 8666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e412c92534ae5c8ae3b0e9cb7b7360?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel S\u0119k", "link": "https://stackoverflow.com/users/8666197/daniel-s%c4%99k"}, "edited": false, "score": 1, "creation_date": 1562130446, "post_id": 56849962, "comment_id": 100275566, "body": "Try to remove <code>DISCARDABLE</code> and include at least <code>#include &lt;winresrc.h&gt;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "is_accepted": true, "score": 1, "last_activity_date": 1562134784, "creation_date": 1562134784, "answer_id": 56864037, "question_id": 56849962, "link": "https://stackoverflow.com/questions/56849962/dialogbox-resource-for-winapi-in-cmake-resource-file-returning-syntax-error/56864037#56864037", "title": "DialogBox Resource for WINAPI in CMAKE resource file returning syntax error", "body": "<p>Generally, <code>STYLE</code> parameters such as window style (<code>WS_</code>) and dialog style (<code>DS_</code>) are defined in the system header file.</p>\n\n<p>Therefore, to add <code>#&lt;windows.h&gt;</code> before using these values, you must <code>#include</code> to edit possible or similar header files.</p>\n"}], "owner": {"reputation": 51, "user_id": 7991628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9fe089a74e6c6bfee0e2fa19b9095b7f?s=128&d=identicon&r=PG&f=1", "display_name": "Urbs", "link": "https://stackoverflow.com/users/7991628/urbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 56864037, "answer_count": 1, "score": 0, "last_activity_date": 1562134784, "creation_date": 1562061796, "last_edit_date": 1562064679, "question_id": 56849962, "link": "https://stackoverflow.com/questions/56849962/dialogbox-resource-for-winapi-in-cmake-resource-file-returning-syntax-error", "title": "DialogBox Resource for WINAPI in CMAKE resource file returning syntax error", "body": "<p>I'm trying to load a DialogBox into my WIN32 Application via resource file but CMake is throwing a syntax error.</p>\n\n<p>The Code in my resource file:</p>\n\n<pre><code>#include \"resource.h\"\nIDD_ABOUTDIALOG DIALOG DISCARDABLE  0, 0, 239, 66\nSTYLE DS_MODALFRAME | WS_POPUP | WS_CAPTION | WS_SYSMENU\nCAPTION \"My About Box\"\nFONT 8, \"MS Sans Serif\"\nBEGIN\n    DEFPUSHBUTTON   \"&amp;OK\",IDOK,174,18,50,14\n    PUSHBUTTON      \"&amp;Cancel\",IDCANCEL,174,35,50,14\n    GROUPBOX        \"About this program...\",IDC_STATIC,7,7,225,52\n    CTEXT           \"An example program\",\n                    IDC_STATIC,16,18,144,33\nEND\n</code></pre>\n\n<p>The c code which would load the resource:</p>\n\n<pre><code>int ret = DialogBox(GetModuleHandle(NULL),\nMAKEINTRESOURCE(IDD_ABOUTDIALOG), hwnd, AboutDlgProc);\n</code></pre>\n\n<p>The resource header file:</p>\n\n<pre><code>#ifndef WIN32_RESOURCE_H\n#define WIN32_RESOURCE_H\n\n#define IDD_ABOUTDIALOG 101\n\n#endif //WIN32_RESOURCE_H\n</code></pre>\n\n<p>The error message printed by CMake:</p>\n\n<blockquote>\n  <p>Resource.rc:3: syntax error</p>\n</blockquote>\n\n<p>I'm using MinGW in CLION (C11 Standard)</p>\n"}, {"tags": ["c", "file", "printf"], "comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1562061780, "post_id": 56849883, "comment_id": 100250295, "body": "Why I run the program with input \u201cabc\u201d, \u201c3\u201d, and \u201c1\u201d, the result is a file named \u201cShopping list.txt\u201d is created with contents \u201cabc 3\u201d. You should show the exact input you are providing and the contents of \u201cShopping list.txt\u201d after the program runs."}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 3, "creation_date": 1562062023, "post_id": 56849883, "comment_id": 100250418, "body": "Two suggestions: 1) after calling <code>fopen</code> check if <code>fp == 0</code> meaning the file couldn&#39;t be opened for some reason. 2) Change the relative path &quot;Shopping list.txt&quot; to an absolute path, e.g. &quot;c:\\\\temp\\\\shopping list.txt&quot; or &quot;/tmp/shopping_list.txt&quot; etc., to avoid confusion of the code runs out of some temporary folder (I&#39;ve seen a lot of VS users getting tricked by this)"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 2, "creation_date": 1562062182, "post_id": 56849883, "comment_id": 100250498, "body": "The return value of <code>scanf</code> and friends should never be ignored."}, {"owner": {"reputation": 33, "user_id": 11728528, "user_type": "registered", "profile_image": "https://graph.facebook.com/3440723085954106/picture?type=large", "display_name": "Filippo Biancone", "link": "https://stackoverflow.com/users/11728528/filippo-biancone"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1562062242, "post_id": 56849883, "comment_id": 100250529, "body": "@EricPostpischil I&#39;ve tried with simpler programs but it still doesn&#39;t print out anything"}, {"owner": {"reputation": 33, "user_id": 11728528, "user_type": "registered", "profile_image": "https://graph.facebook.com/3440723085954106/picture?type=large", "display_name": "Filippo Biancone", "link": "https://stackoverflow.com/users/11728528/filippo-biancone"}, "reply_to_user": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1562062314, "post_id": 56849883, "comment_id": 100250555, "body": "@MortenJensen you&#39;re right, I&#39;ll check and verify"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1562062546, "post_id": 56849883, "comment_id": 100250666, "body": "I would bet a coin that you are using an IDE. If it is true, the file has probably be created and populated but not in the directory that your are looking. Try to search for it throughout all the disk, or add <code>printf(&quot;%s\\n&quot;, getcwd());</code> as first instruction in <code>main</code> to know where that *@!# file is."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1562062975, "post_id": 56849883, "comment_id": 100250888, "body": "@FilippoBiancone: I did not suggest a simpler program. I asked for the <b>exact input</b> you are supplying to the program."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 0, "creation_date": 1562063044, "post_id": 56849883, "comment_id": 100250925, "body": "@MortenJensen: The question reports the file is created but remains empty. That assertion is not consistent with the <code>fopen</code> failing, although it could be a mistaken report."}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1562063464, "post_id": 56849883, "comment_id": 100251139, "body": "@EricPostpischil good point, 1) was mostly just my paranoia. I think it&#39;s more likely case 2) that the file is created somewhere else. However that is also not consistent with an empty file(?), so maybe OP has lost track of events while debugging  - I know I do sometimes :)"}, {"owner": {"reputation": 33, "user_id": 11728528, "user_type": "registered", "profile_image": "https://graph.facebook.com/3440723085954106/picture?type=large", "display_name": "Filippo Biancone", "link": "https://stackoverflow.com/users/11728528/filippo-biancone"}, "edited": false, "score": 1, "creation_date": 1562063770, "post_id": 56849883, "comment_id": 100251287, "body": "I&#39;ve resolved the problem. It was simply that, during fopen, I had to specify the absolute path. It has filled the file. Thank you all"}, {"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 1, "creation_date": 1562069840, "post_id": 56849883, "comment_id": 100254504, "body": "@FilippoBiancone congrats :) If you post the solution as an answer, you can mark your own answer as the accepted solution and get a few points (you solved the problem, so that&#39;s totally okay)."}], "answers": [{"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1567807857, "post_id": 57828975, "comment_id": 102088087, "body": "You should add lots of error checking to this program. Every operation you call that can return success or failure should be checked. It will make debugging so much easier."}, {"owner": {"reputation": 33, "user_id": 11728528, "user_type": "registered", "profile_image": "https://graph.facebook.com/3440723085954106/picture?type=large", "display_name": "Filippo Biancone", "link": "https://stackoverflow.com/users/11728528/filippo-biancone"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1567808175, "post_id": 57828975, "comment_id": 102088159, "body": "It&#39;s a basic exam, we don&#39;t have to do that for now luckly xD"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1567809489, "post_id": 57828975, "comment_id": 102088424, "body": "If you&#39;d rather figure out the problem two months later, I guess."}], "tags": [], "owner": {"reputation": 33, "user_id": 11728528, "user_type": "registered", "profile_image": "https://graph.facebook.com/3440723085954106/picture?type=large", "display_name": "Filippo Biancone", "link": "https://stackoverflow.com/users/11728528/filippo-biancone"}, "is_accepted": true, "score": 1, "last_activity_date": 1567807303, "creation_date": 1567807303, "answer_id": 57828975, "question_id": 56849883, "link": "https://stackoverflow.com/questions/56849883/fprintf-not-printing/57828975#57828975", "title": "Fprintf not printing", "body": "<p>I've resolved the problem by simply specifying the absolute path in fopen</p>\n"}], "owner": {"reputation": 33, "user_id": 11728528, "user_type": "registered", "profile_image": "https://graph.facebook.com/3440723085954106/picture?type=large", "display_name": "Filippo Biancone", "link": "https://stackoverflow.com/users/11728528/filippo-biancone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 57828975, "answer_count": 1, "score": 1, "last_activity_date": 1567807303, "creation_date": 1562061485, "question_id": 56849883, "link": "https://stackoverflow.com/questions/56849883/fprintf-not-printing", "title": "Fprintf not printing", "body": "<p>I've been trying to do file excercises in C but when I run programs from the professor or tutorials (which should work), the file always comes out blank. Is there a solution to this?</p>\n\n<p>My computer is pretty old, but it can still run various programs, I don't undersand why it doesn't work with files</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n/*program that prints on a file your shopping list*/\nint main(int argc, char **argv)\n{\n    FILE *fp= fopen(\"Shopping list.txt\", \"w\");\n    int end= 0; //have you finished writing the articles\n    char article[80];   //the article you want to buy\n    int n;      //quantity\n\n    while(!end){\n        printf(\"What do you need to buy? \");\n        fgets(article, 80, stdin);\n        article[strlen(article)- 1]= '\\0';\n        fprintf(fp, \"%s \", article);\n\n        printf(\"How much of it? \");\n        scanf(\"%d\", &amp;n);\n        fprintf(fp, \"%d\\n\", n);\n\n        printf(\"Are you done? (1= Yes, 0= No) \");\n        scanf(\"%d%*c\", &amp;end);\n    }\n    fclose(fp);\n}\n</code></pre>\n\n<p>It should print out on the file (which is created and remains empty) your input. There is no error message</p>\n"}, {"tags": ["c", "binary", "int", "hex"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1562061361, "post_id": 56849561, "comment_id": 100250049, "body": "How would you do this by hand with a pencil and a piece of paper?"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1562157540, "post_id": 56849561, "comment_id": 100289276, "body": "<code>2147483647</code> <b>does</b> fit in an <code>int</code> (32bit) and has also 9 digits.  What are you asking about?"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1562067399, "post_id": 56849804, "comment_id": 100253201, "body": "There shouldn&#39;t be any signed types anywhere in your code. This is unstable and bug-prone, the code is shifting an <code>int</code> type which potentially has the sign bit set, but we don&#39;t want any signs. You must cast <code>colorcodes</code> to <code>unsigned int</code> before shifting. Also make a habit of using <code>u</code> suffix on all hex literals."}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": true, "score": 2, "last_activity_date": 1562067875, "last_edit_date": 1562067875, "creation_date": 1562061230, "answer_id": 56849804, "question_id": 56849561, "link": "https://stackoverflow.com/questions/56849561/split-int-on-hexadecimal-level-in-c/56849804#56849804", "title": "Split int on hexadecimal level in C?", "body": "<p>You need to use right shift to get the first color code. For the second color code, you need to either mask or typecast with <code>uint16_t</code></p>\n\n<pre><code>firstColorCode = (uint16_t) (colorcodes &gt;&gt; 16u);\nsecondColorCode = (uint16_t) colorcodes;\n</code></pre>\n\n<p>You can also use, </p>\n\n<pre><code>firstColorCode = (colorcodes &gt;&gt; 16u) &amp; 0xFFFFu;\nsecondColorCode = colorcodes &amp; 0xFFFFu;\n</code></pre>\n\n<p>You should use unsigned int values for the colorcodes to avoid undefined behavior in the right shifts. </p>\n\n<pre><code>uint16_t firstColorCode;\nuint16_t secondColorCode;\nuint32_t colorcodes; \n</code></pre>\n\n<p>Also, as suggested by @lundin i have added <code>u</code> to the constants to make them unsigned constants.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1562068103, "creation_date": 1562068103, "answer_id": 56851788, "question_id": 56849561, "link": "https://stackoverflow.com/questions/56849561/split-int-on-hexadecimal-level-in-c/56851788#56851788", "title": "Split int on hexadecimal level in C?", "body": "<p>There's some basic rules when walking the C type system mine field:</p>\n\n<ul>\n<li>Never use signed types when doing any form of bitwise manipulations.</li>\n<li>Never use signed types when you don't actually want negative numbers.</li>\n<li>Be careful when using small integer types such as <code>char</code>, <code>short</code>, <code>uint16_t</code> etc because they get implicitly promoted to signed <code>int</code> when used in expression.<br>\nMore info about implicit promotions:\n<a href=\"https://stackoverflow.com/questions/46073295/implicit-type-promotion-rules\">Implicit type promotion rules</a></li>\n<li>Be wary of hex literals because they have various subtle rules regarding which type they get. Always suffix them with <code>u</code> to prevent them from being a signed type.</li>\n<li>Never write leading zeroes in C code. If you write something like <code>0879</code> in C, it means octal format.</li>\n</ul>\n\n<p>By taking more care of types, we can split your 32 bit number in two like this:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\nuint16_t first;\nuint16_t second;\n\nuint32_t colorcodes = IORD_ALTERA_AVALON_PIO_DATA(0x8000000u + 123204u);\n\nfirst = (uint16_t) (colorcodes &gt;&gt; 16);\nsecond = (uint16_t) colorcodes;\n</code></pre>\n\n<p>Print <code>uint16_t</code> as hex by using <code>printf(\"%\"PRIx16, first)</code>, from <code>inttypes.h</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1562158005, "creation_date": 1562158005, "answer_id": 56870509, "question_id": 56849561, "link": "https://stackoverflow.com/questions/56849561/split-int-on-hexadecimal-level-in-c/56870509#56870509", "title": "Split int on hexadecimal level in C?", "body": "<p>Just divide the number by <code>65536</code>.  The remainder will be the lower part of your half, and the quotient the most significative part.</p>\n\n<p>BTW, the idea of some comments on working with unsigned values is good also, and consider that right shifting an <code>unsigned int</code> number by <code>16</code> is the equivalent to divide by <code>2^16 == 65536</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 11728289, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rtmufnndGNE/AAAAAAAAAAI/AAAAAAAAAAg/wfrmJNBdLok/photo.jpg?sz=128", "display_name": "Hampel", "link": "https://stackoverflow.com/users/11728289/hampel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 56849804, "answer_count": 3, "score": 1, "last_activity_date": 1562158005, "creation_date": 1562060517, "last_edit_date": 1562060539, "question_id": 56849561, "link": "https://stackoverflow.com/questions/56849561/split-int-on-hexadecimal-level-in-c", "title": "Split int on hexadecimal level in C?", "body": "<p>I'm trying to extract some color codes from an image buffer. When I read out a memory adres from the buffer it returns an int value that contains the color codes of two pixels. My goal is to get each color code as an separate int value.   </p>\n\n<p>For example when I read out a memory adres from the image buffer it returns the decimal value: 142149753.</p>\n\n<p>Because this decimal value it's 9 characters long I can't simply spit it into two int values. So I tried to convert the value to a hexadecimal with the printf function which gave me the value: 08790879\u202c.</p>\n\n<p>Now I can see de two 16-bit color codes I need: 0879 and 0879.</p>\n\n<pre><code>int firstColorCode;\nint secondColorCode;\n\nint colorcodes = IORD_ALTERA_AVALON_PIO_DATA(0x08000000 + 123204);\n\nprintf(\"%08x\\n\", colorcodes);\n</code></pre>\n\n<p>How can I get the two color codes into the corresponding int variables in code?</p>\n\n<p>Disclaimer: I'm new to C and it feels like I'm asking a stupid question :/</p>\n"}, {"tags": ["c", "loops", "hash", "hashmap", "boolean"], "comments": [{"owner": {"reputation": 1, "user_id": 11456112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J1x9xvhzEec/AAAAAAAAAAI/AAAAAAAAACU/DdKizs5NIKo/photo.jpg?sz=128", "display_name": "Kerelos Tawfik", "link": "https://stackoverflow.com/users/11456112/kerelos-tawfik"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1562061152, "post_id": 56849528, "comment_id": 100249945, "body": "So it&#39;s asking while values[index] != 0 ? and if value !=0?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1562061189, "post_id": 56849528, "comment_id": 100249966, "body": "Well the second one is an <code>if</code> but yes"}, {"owner": {"reputation": 1, "user_id": 11456112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J1x9xvhzEec/AAAAAAAAAAI/AAAAAAAAACU/DdKizs5NIKo/photo.jpg?sz=128", "display_name": "Kerelos Tawfik", "link": "https://stackoverflow.com/users/11456112/kerelos-tawfik"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1562061276, "post_id": 56849528, "comment_id": 100250006, "body": "My b cheers mate"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1562061599, "post_id": 56849528, "comment_id": 100250199, "body": "More specifically, the first one is checking if a position is occupied. If there is \u201csomething\u201d (a non-zero value) in it, the code proceeds to the next position. When it finds an \u201cempty\u201d (zero value) position, it fills it in with the data to be inserted. (This is not a good design\u2014when the array is full, the code will loop infinitely. And it inserts elements in unpredictable locations, causing any lookup code to be inefficient.)"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1562061616, "post_id": 56849528, "comment_id": 100250216, "body": "The second one is testing whether a search succeeded."}, {"owner": {"reputation": 1, "user_id": 11456112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J1x9xvhzEec/AAAAAAAAAAI/AAAAAAAAACU/DdKizs5NIKo/photo.jpg?sz=128", "display_name": "Kerelos Tawfik", "link": "https://stackoverflow.com/users/11456112/kerelos-tawfik"}, "edited": false, "score": 0, "creation_date": 1562066650, "post_id": 56849528, "comment_id": 100252795, "body": "Yeah I agree with you there I appreciate the detailed insight on this, I didn&#39;t even notice that fault in the design. I was confused as to why there was no break point, but blamed it on my lack of knowledge. Very good explanation."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1562067339, "post_id": 56849528, "comment_id": 100253165, "body": "By &quot;guard&quot; I presume you mean &quot;condition&quot;."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1562067352, "post_id": 56849528, "comment_id": 100253177, "body": "@EricPostpischil We do have an answer section if you want to do that."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1562068732, "post_id": 56849528, "comment_id": 100253924, "body": "@LightnessRacesinOrbit: Not for closed questions."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1562073866, "post_id": 56849528, "comment_id": 100257044, "body": "A question being closed doesn&#39;t mean you should answer it in the comments section. It means it&#39;s closed. Though this particular closure seems a little heavy-handed."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1562060772, "post_id": 56849602, "comment_id": 100249731, "body": "It drives me <i>crazy</i> how much undocumented code exists. It&#39;s really not hard to briefly annotate your functions."}, {"owner": {"reputation": 1, "user_id": 11456112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J1x9xvhzEec/AAAAAAAAAAI/AAAAAAAAACU/DdKizs5NIKo/photo.jpg?sz=128", "display_name": "Kerelos Tawfik", "link": "https://stackoverflow.com/users/11456112/kerelos-tawfik"}, "edited": false, "score": 0, "creation_date": 1562060834, "post_id": 56849602, "comment_id": 100249771, "body": "I&#39;m trying to ask more about the actual guard of the loop rather than the body."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1, "user_id": 11456112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J1x9xvhzEec/AAAAAAAAAAI/AAAAAAAAACU/DdKizs5NIKo/photo.jpg?sz=128", "display_name": "Kerelos Tawfik", "link": "https://stackoverflow.com/users/11456112/kerelos-tawfik"}, "edited": false, "score": 0, "creation_date": 1562067296, "post_id": 56849602, "comment_id": 100253136, "body": "@KerelosTawfik Yes, I answered your question. If <code>values[index]</code> is the value <code>0</code>, then the loop ends, no? Because it&#39;s <code>while(0)</code>?"}, {"owner": {"reputation": 1, "user_id": 11456112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J1x9xvhzEec/AAAAAAAAAAI/AAAAAAAAACU/DdKizs5NIKo/photo.jpg?sz=128", "display_name": "Kerelos Tawfik", "link": "https://stackoverflow.com/users/11456112/kerelos-tawfik"}, "edited": false, "score": 0, "creation_date": 1562075406, "post_id": 56849602, "comment_id": 100258026, "body": "Yeah thanks for the help, knowing this I&#39;ve realised it&#39;s terribly designed code. It&#39;s one of the commented C solutions for LeetCode Problem 1 (Two Sum)."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1562060643, "creation_date": 1562060643, "answer_id": 56849602, "question_id": 56849528, "link": "https://stackoverflow.com/questions/56849528/array-indices-for-guard-in-loop-what-is-it-actually-checking-for/56849602#56849602", "title": "Array indices for guard in loop? What is it actually checking for?", "body": "<p>We can only guess.</p>\n\n<p>It <em>looks like</em> <code>insert</code> expects pointers to arrays that always have a final element of value zero, that the designer of the function has chosen that convention to signify \"end of the array\".</p>\n\n<p>And it <em>looks like</em> <code>search</code> returns zero when the search failed.</p>\n\n<p>However, either could instead be a bug (I'm suspicious because this design prohibits zero ever being treated as a \"real\"/valid value), and both are arguably bad design &mdash; in the former case, why not pass the array size as an argument instead? In the latter case, why not return <code>bool</code> and give the result (if successful) as an \"out argument\", like other C APIs?</p>\n\n<p>Ultimately, we cannot magically know the preconditions of a function, so you will have to ask the person who wrote it.</p>\n\n<p><strong>This is why code should have explanatory comments.</strong></p>\n"}], "owner": {"reputation": 1, "user_id": 11456112, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J1x9xvhzEec/AAAAAAAAAAI/AAAAAAAAACU/DdKizs5NIKo/photo.jpg?sz=128", "display_name": "Kerelos Tawfik", "link": "https://stackoverflow.com/users/11456112/kerelos-tawfik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "closed_date": 1562061321, "answer_count": 1, "score": 0, "last_activity_date": 1562061061, "creation_date": 1562060432, "last_edit_date": 1562061061, "question_id": 56849528, "link": "https://stackoverflow.com/questions/56849528/array-indices-for-guard-in-loop-what-is-it-actually-checking-for", "closed_reason": "Duplicate", "title": "Array indices for guard in loop? What is it actually checking for?", "body": "<p>These are sections of C code used to implement a hashmap using open-addressing. I don't understand what the while loop in the insert function is checking and the if statement in the twoSum Function is checking for.</p>\n\n<p>Does the while loop condition check if the value is in the array or if the value isn't null. Does the if statement check if the value is not 0? I don't understand. </p>\n\n<p>I always thought something like this would work like a while(1) loop that needs to manually break.</p>\n\n<p><strong>I want to know what the conditions of the loops guard statement are I understand the body.</strong> </p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void insert(int *keys, int *values, int key, int value) {\n    int index = hash(key);\n    while (values[index]) { // What does this check for?\n        index = (index + 1) % SIZE;\n    }\n    keys[index] = key;\n    values[index] = value;\n}\n</code></pre>\n\n<pre class=\"lang-c prettyprint-override\"><code>int* twoSum(int* nums, int numsSize, int target) {\n    int keys[SIZE];\n    int values[SIZE] = {0};\n    for (int i = 0; i &lt; numsSize; i++) {\n        int complements = target - nums[i];\n        int value = search(keys, values, complements);\n        if (value) { // What does this line check for?\n            int *indices = (int *) malloc(sizeof(int) * 2);\n            indices[0] = value - 1;\n            indices[1] = i;\n            return indices;\n        }\n        insert(keys, values, nums[i], i + 1);\n    }\n    return NULL;\n}\n</code></pre>\n"}]