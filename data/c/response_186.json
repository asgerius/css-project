[{"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1533159614, "post_id": 51642579, "comment_id": 90249690, "body": "maybe you destroyed the nul termination char? start by creating a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1533160609, "post_id": 51642579, "comment_id": 90250004, "body": "@lola What value do you expect for <code>len</code> after this code: <code>char aux, str[100]; ...   len = strlen(str);</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533161434, "post_id": 51642805, "comment_id": 90250222, "body": "@chux I think all its doing is leaving the newline on the end of the string. That can be greatly simplified, I&#39;ve edited my answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533162145, "post_id": 51642805, "comment_id": 90250427, "body": "Corner case: <code>size_t back = strlen(str) - 1;  if( str[back] == &#39;\\n&#39; )</code> is a big problem (UB) should code first read a <i>null character</i> then <code>str[SIZE_MAX]</code> is attempted.  Although I doubt OP will be encountering such pathological files or hacker early in their studies - so no worries for now."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533163453, "post_id": 51642805, "comment_id": 90250794, "body": "@chux What&#39;s needed is a check if <code>strlen(str) == 0</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533163565, "post_id": 51642805, "comment_id": 90250832, "body": "Yes, of course that is simply <code>if (!*str )</code> .  I mention this primarily because there are many more hackers out there trying to break code.  Also text files in UTF-16 BE (which <i>shouldn&#39;t</i> be read here) readily start with a leading <i>null character</i>"}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 5, "last_activity_date": 1533164143, "last_edit_date": 1533164143, "creation_date": 1533160559, "answer_id": 51642805, "question_id": 51642579, "link": "https://stackoverflow.com/questions/51642579/reversing-words-in-a-file/51642805#51642805", "title": "Reversing words in a file", "body": "<p>Properly indenting the code, and turning on warnings, reveals the problem. You're using <code>for</code> and <code>if</code> without blocks. While this is legal, it is very easy to get wrong. In particular...</p>\n\n<pre><code>    for(j=0;j&lt;len;j++)\n        if ((isalpha(str[j])!=1) || (j==len-1))\n    if(j&lt;len-1)\n        k=j-1;\n    else\n        k=j;\n    i=0;\n</code></pre>\n\n<p>I'm honestly not sure what the proper bracing is here. My compiler has warned about a <a href=\"https://en.wikipedia.org/wiki/Dangling_else\" rel=\"nofollow noreferrer\">\"dangling else\"</a> so something isn't right.</p>\n\n<pre><code>test.c:21:9: warning: add explicit braces to avoid dangling else [-Wdangling-else]\n        else\n</code></pre>\n\n<p>I suspect you meant this.</p>\n\n<pre><code>    for(j=0;j&lt;len;j++) {\n        if((isalpha(str[j])!=1) || (j==len-1)) {\n            if(j&lt;len-1) {\n                k=j-1;\n            }\n            else {\n                k=j;\n            }\n        }\n    }\n</code></pre>\n\n<p>Either way, always use blocks. Always compile with warnings. I use <code>-Wall -Wshadow -Wwrite-strings -Wextra -Wconversion -std=c99 -pedantic</code>.</p>\n\n<hr>\n\n<p>Another issue is this:</p>\n\n<pre><code>len = strlen(str);\n</code></pre>\n\n<p>At this point <code>str</code> is uninitialized so it will contain garbage. <code>len</code> will be the length of that garbage.</p>\n\n<p><code>len</code> will also never change, yet the content of <code>str</code> changes with each line read. Instead you need to check the length of <code>str</code> inside the loop just after each <code>fgets</code> call.</p>\n\n<pre><code>while(fgets(str,80, f) != NULL) {\n    len = strlen(str);\n    ...\n}\n</code></pre>\n\n<hr>\n\n<p>Your <code>str</code> buffer is 100, but you're only allowing <code>fgets</code> 80 characters. To avoid this, use <code>sizeof(str)</code> instead of hard coding. Note: this only works with stack allocated memory.</p>\n\n<pre><code>while(fgets(str, sizeof(str), f) != NULL) {\n    len = strlen(str);\n</code></pre>\n\n<p>While you're at it, there's no reason to be stingy with a line buffer. It's only allocated once. 80 or 100 is very small for a line buffer. Give it 4096 bytes to allow for very long lines.</p>\n\n<hr>\n\n<p>With these fixes your code works, but we can improve on it. In particular that whole <code>for</code> loop seems unnecessary. I suspect all it's doing is trying to keep the newline on the end of the reversed string. There's no need to look through the whole string. <code>fgets</code> reads line by line, if there is a newline it will always be on the end.</p>\n\n<pre><code>// Convert the length to an index\nk = strlen(str) - 1;\n\n// Leave the trailing newline alone\nif( str[k] == '\\n' ) {\n    k--;\n}\n</code></pre>\n\n<p>With that, plus better variable names, only declaring variables as needed, and using the proper types, we get...</p>\n\n<pre><code>while(fgets(str, sizeof(str), f) != NULL) {\n    // Check if someone snuck a null byte into the file.\n    if( !*str ) {\n        continue;\n    }\n\n    // Convert the length to an index\n    size_t back = strlen(str) - 1;\n\n    // Leave the trailing newline alone\n    if( str[back] == '\\n' ) {\n        back--;\n    }\n\n    // Swap characters\n    size_t front = 0;\n    while(front &lt; back) {\n        char tmp   = str[front];\n        str[front] = str[back];\n        str[back]  = tmp;\n        front++;\n        back--;\n    }\n\n    printf(\"%s\",str);\n}\n</code></pre>\n\n<p>This can be simplified even further using pointers instead of indexes.</p>\n\n<pre><code>while(fgets(str, sizeof(str), f) != NULL) {\n    // A pointer to the last character of str\n    char *back = &amp;str[strlen(str) - 1];\n\n    // Leave the trailing newline alone\n    if( *back == '\\n' ) {\n        back--;\n    }\n\n    // Swap characters\n    for(\n        char *front = str;\n        front &lt; back;\n        front++, back--\n    ) {\n        char tmp = *front;\n        *front   = *back;\n        *back    = tmp;\n    }\n\n    printf(\"%s\",str);\n}\n</code></pre>\n"}], "owner": {"reputation": 208, "user_id": 9284983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14b35564e864e2163f03b8c70289ce27?s=128&d=identicon&r=PG&f=1", "display_name": "Lola", "link": "https://stackoverflow.com/users/9284983/lola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1533164143, "creation_date": 1533159329, "last_edit_date": 1533159628, "question_id": 51642579, "link": "https://stackoverflow.com/questions/51642579/reversing-words-in-a-file", "title": "Reversing words in a file", "body": "<p>Could someone hint to me what I'm doing wrong?I tried compiling it but im not sure what's wrong here:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint main()\n{\n  int k, i, j, len;\n  FILE *f;\n  char aux, str[100];\n\n  f = fopen(\"rev.txt\", \"r\");\n  len = strlen(str);\n  if (f == NULL) {\n    printf(\"File not found!\");\n    return 0;\n  }\n\n  while (fgets(str, 80, f) != NULL) {\n    for (j = 0; j &lt; len; j++)\n      if ((isalpha(str[j]) != 1) || (j == len - 1))\n        if (j &lt; len - 1)\n          k = j - 1;\n        else\n          k = j;\n    i = 0;\n    while (i &lt; k) {\n      aux = str[i];\n      str[i] = str[k];\n      str[k] = aux;\n      i++;\n      k--;\n    }\n\n    printf(\"%s\",str);\n  }\n}\n</code></pre>\n\n<p>So in the above code I tried reversing words from a file named rev but whenever I run it it will print weird characters. Any help?</p>\n"}, {"tags": ["c", "list", "linked-list"], "comments": [{"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 1, "creation_date": 1533158114, "post_id": 51642310, "comment_id": 90249187, "body": "Learning to use <a href=\"https://en.wikipedia.org/wiki/GNU_Debugger\" rel=\"nofollow noreferrer\">gdb</a> would be a great gift to yourself in terms of time saved finding where things crash."}], "answers": [{"comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1533168066, "post_id": 51642557, "comment_id": 90251790, "body": "Note that with gcc at least, you could  turn on <code>-Wshadow</code> to see the warning about shadows, and then you&#39;d get even more warnings than the ones you&#39;ve mentioned."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1533159539, "last_edit_date": 1533159539, "creation_date": 1533159230, "answer_id": 51642557, "question_id": 51642310, "link": "https://stackoverflow.com/questions/51642310/program-crashing-when-creating-linked-lists-in-c/51642557#51642557", "title": "Program crashing when creating linked lists in C", "body": "<p>maybe not the only issue but:</p>\n\n<pre><code>    struct trees *temp2;\n\n    if((data == '/') || (data == '*') || (data == '+') || (data == '-')) {\n        struct trees *temp2 = operador_uno;  // not the same \"temp2\" as above\n    }\n    else {\n        struct trees *temp2 = numero_uno;  // not the same \"temp2\" as above\n    }\n\n    for(i = 0; i &lt; place - 1; i++) {\n        temp2 = temp2-&gt;next; // [CRASH] because temp2 isn't initialized\n    }\n</code></pre>\n\n<p><code>struct trees *temp2 = operador_uno;</code> is <em>shadowing</em> <code>temp2</code> declared in the outer scope. So the outer <code>temp2</code> is never initialized, your initialization sets a value to a variable that goes out of scope.</p>\n\n<p>So remove <code>struct trees *</code> so the same <code>temp2</code> variable is used (and initialised), like this (I'd prefer a ternary expression, though):</p>\n\n<pre><code> if((data == '/') || (data == '*') || (data == '+') || (data == '-')) \n {\n    temp2 = operador_uno;\n }\nelse \n {\n    temp2 = numero_uno;\n }\n</code></pre>\n\n<p>And <em>turn on compiler warnings</em> which would have told you that:</p>\n\n<ul>\n<li>you're using the outer <code>temp2</code> uninitialized</li>\n<li>you're not using the inner <code>temp2</code> variables</li>\n</ul>\n"}], "owner": {"reputation": 87, "user_id": 9378268, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T8tef2nl83c/AAAAAAAAAAI/AAAAAAAAAC4/bp6SJbprC0A/photo.jpg?sz=128", "display_name": "Maisie Farro", "link": "https://stackoverflow.com/users/9378268/maisie-farro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 51642557, "answer_count": 1, "score": 2, "last_activity_date": 1533159539, "creation_date": 1533157855, "question_id": 51642310, "link": "https://stackoverflow.com/questions/51642310/program-crashing-when-creating-linked-lists-in-c", "title": "Program crashing when creating linked lists in C", "body": "<p>I'm having problems creating a function that creates two separate linked lists in C. </p>\n\n<p>In my program, the user enters an equation such as 7 + 9 * 8, character by character, the program then makes lists with them. </p>\n\n<p>The code is as follows: (Where place is where is should be in the list and data is the number/operator itself. Both come from another part of the program)</p>\n\n<pre><code>struct trees {\n\n    char data;\n    int posicion;\n    struct trees *next;\n    struct trees *childI;\n    struct trees *childD;\n\n};\n\n    struct trees *root;\n    struct trees *operador_uno;\n    struct trees *numero_uno;\n\n    char *numeros;\n    char *operadores;\n    int num, num_operadores;\n\n\nvoid crearLista(int place, char data) {\n\n    int i;\n\n    struct trees *temp1 = (struct trees *)calloc(1, sizeof(struct trees));\n\n    temp1-&gt;data = data;\n\n    if(place == 0) {\n        if((data == '/') || (data == '*') || (data == '+') || (data == '-')){\n            temp1-&gt;next = operador_uno;\n            operador_uno = temp1;\n        }\n        else {\n            temp1-&gt;next = numero_uno;\n            numero_uno = temp1;\n        }\n\n    }\n\n    else {\n\n        struct trees *temp2;\n\n        if((data == '/') || (data == '*') || (data == '+') || (data == '-')) {\n            struct trees *temp2 = operador_uno;\n        }\n        else {\n            struct trees *temp2 = numero_uno;\n        }\n\n        for(i = 0; i &lt; place - 1; i++) {\n            temp2 = temp2-&gt;next; // [CRASH]\n        }\n\n        temp1-&gt;next = temp2-&gt;next;\n        temp2-&gt;next = temp1; // [CRASH]\n\n    }\n\n\n    for(i = 0; i &lt; place &amp;&amp; place != 0; i++) {\n        struct trees *temp1 = operador_uno;\n        temp1 = temp1-&gt;next;\n    }\n\n    for(i = 0; i &lt; place + 1; i++) {\n        struct trees *temp2 = numero_uno;\n        temp2 = temp2-&gt;next;\n    }\n\n}\n</code></pre>\n\n<p>I identified through a tonne of printf statements that it will add the first <strong>number</strong> in the equation to the list successfully, how it does not add the first <strong>operator</strong> and with the second <strong>number</strong> the program crashes altogether. </p>\n\n<p>The crashing problem appears to occur in the places I have written [CRASH], when I put temp2->next = temp1. </p>\n\n<p>Any help greatly appreciated!</p>\n"}, {"tags": ["c", "gcc", "c-preprocessor"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1533155671, "post_id": 51641861, "comment_id": 90248122, "body": "Note that you should not create function or variable names that start with an underscore, in general. <a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.1.3\" rel=\"nofollow noreferrer\">C11 &#167;7.1.3 Reserved identifiers</a> says (in part): \u2014 <i>All identifiers that begin with an underscore and either an uppercase letter or another underscore are always reserved for any use.</i> \u2014 <i>All identifiers that begin with an underscore are always reserved for use as identifiers with file scope in both the ordinary and tag name spaces.</i> See also <a href=\"https://stackoverflow.com/a/1449301/15168\">What does double underscore (<code>__const</code>) mean in C?</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1533155728, "post_id": 51641861, "comment_id": 90248143, "body": "Why are you defining macros? Define functions and let the optimizing compiler take care of the rest. Unless you have concrete performance data proving this is necessary, it probably isn&#39;t."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1533155888, "post_id": 51641861, "comment_id": 90248219, "body": "I suggest using the <code>-H</code> option to GCC to report on which header files are included.  You may find that there is a different <code>tools.h</code> file that is being used.  Although I mentioned that <code>_TOOLS_H_</code> is not a good choice for a header guard macro (because it is reserved for the system to use), it probably isn&#39;t the immediate source of the trouble."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 7, "creation_date": 1533155948, "post_id": 51641861, "comment_id": 90248243, "body": "Put a <code>#error tools</code> on the first line of your header and make sure that you&#39;re actually including <i>that</i> tools.h and not some other tools.h."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1533155957, "post_id": 51641861, "comment_id": 90248246, "body": "try to replace your include protection by <code>#pragma once</code> in case some other header uses the same <code>_TOOLS_H_</code> identifier."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1533156567, "post_id": 51641861, "comment_id": 90248524, "body": "@user3386109 There&#39;s also the tried and true method of just mashing in sdhfusdfbgdrubguerwbtwebterte and expecting a compiler error!"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1533156741, "post_id": 51641861, "comment_id": 90248616, "body": "@tadman While an effective technique, I can never manage to get the spelling down without looking it up."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1533156864, "post_id": 51641861, "comment_id": 90248668, "body": "@ChristianGibbons: True, but I find <code>ZaphodBeeblebroxLovesPanGalacticGargleBlasters</code> quite effective too, and it&#39;s easier to remember the spelling of that!"}, {"owner": {"reputation": 1220, "user_id": 5878272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14e96159153b67fab5222b7c5fa18c71?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik", "link": "https://stackoverflow.com/users/5878272/fredrik"}, "edited": false, "score": 2, "creation_date": 1533157327, "post_id": 51641861, "comment_id": 90248863, "body": "Your is_in_range macro is wrong, you need paranethesis around the whole macro as well."}, {"owner": {"reputation": 197, "user_id": 5585075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9030bcefdc0b9355e4fca09647ecc4fb?s=128&d=identicon&r=PG&f=1", "display_name": "T. Tournesol", "link": "https://stackoverflow.com/users/5585075/t-tournesol"}, "edited": false, "score": 1, "creation_date": 1533157996, "post_id": 51641861, "comment_id": 90249144, "body": "user3386109 is right : there&#39;s indeed a tools.h in the library I&#39;m using !"}, {"owner": {"reputation": 197, "user_id": 5585075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9030bcefdc0b9355e4fca09647ecc4fb?s=128&d=identicon&r=PG&f=1", "display_name": "T. Tournesol", "link": "https://stackoverflow.com/users/5585075/t-tournesol"}, "edited": false, "score": 1, "creation_date": 1533158111, "post_id": 51641861, "comment_id": 90249186, "body": "And thanks Fredrik for pointing it, and others for valuable tips (-H, #pragma once and provoking an error)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1533158707, "post_id": 51641861, "comment_id": 90249388, "body": "&quot;What am I missing?&quot; --&gt; Post lacks the code for <code>src&#47;camera.c</code> to diagnose the issue.  Review <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 197, "user_id": 5585075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9030bcefdc0b9355e4fca09647ecc4fb?s=128&d=identicon&r=PG&f=1", "display_name": "T. Tournesol", "link": "https://stackoverflow.com/users/5585075/t-tournesol"}, "is_accepted": false, "score": 2, "last_activity_date": 1533161157, "creation_date": 1533161157, "answer_id": 51642884, "question_id": 51641861, "link": "https://stackoverflow.com/questions/51641861/include-file-seems-ignored/51642884#51642884", "title": "include file seems ignored", "body": "<p>The answer was given by user3386109 : there was a file named <code>tools.h</code> in the library I was using.</p>\n"}], "owner": {"reputation": 197, "user_id": 5585075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9030bcefdc0b9355e4fca09647ecc4fb?s=128&d=identicon&r=PG&f=1", "display_name": "T. Tournesol", "link": "https://stackoverflow.com/users/5585075/t-tournesol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "closed_date": 1533179390, "answer_count": 1, "score": 0, "last_activity_date": 1533161157, "creation_date": 1533155621, "last_edit_date": 1533155793, "question_id": 51641861, "link": "https://stackoverflow.com/questions/51641861/include-file-seems-ignored", "closed_reason": "Not suitable for this site", "title": "include file seems ignored", "body": "<p>I'm sure I don't see something obvious, but here it is :</p>\n\n<p>I've written a small tools.h file containing 2 macros I use in several files of my project :</p>\n\n<pre><code>#ifndef _TOOLS_H_\n#define _TOOLS_H_\n\n\n#define is_in_range(x, a, b) ((x) &gt;= (a)) &amp;&amp; ((x) &lt; (b))\n\n#define clamp(x, a, b)\\\n    (((x) &lt; (a)) ? (a) : (((x) &gt; (b)) ? (b) : (x)))\n\n#endif\n</code></pre>\n\n<p>I added a <code>#include \"tools.h\"</code> in every source file using <code>clamp</code> and <code>is_in_range</code>, but they seem ignored at compilation.</p>\n\n<p>For example,</p>\n\n<pre><code>C:/SGDK134/bin/gcc -m68000 -Wall -fno-builtin -Iinc -Isrc -Ires -IC:/SGDK134/inc -IC:/SGDK134/res -BC:/SGDK134/bin -O3 -fuse-linker-plugin -fno-web -fno-gcse -fno-unit-at-a-time -fomit-frame-pointer -flto -c src/camera.c -o out/src/camera.o\nsrc/camera.c: In function 'camera_set_focus':\nsrc/camera.c:130:6: warning: implicit declaration of function 'clamp' [-Wimplicit-function-declaration]\n x = clamp(fix32ToInt(obj-&gt;x) - 128, 0, current_stage.pwidth - 320);\n</code></pre>\n\n<p>I have several others, one for each source file referring to <code>tools.h</code>.</p>\n\n<p>And, of course, the compilation aborts:</p>\n\n<pre><code>C:/SGDK134/bin/gcc -BC:/SGDK134/bin -n -T C:/SGDK134/md.ld -nostdlib out/sega.o @out/cmd_ C:/SGDK134/lib/libmd.a C:/SGDK134/lib/libgcc.a -o out/rom.out\nC:\\Users\\xxxx\\AppData\\Local\\Temp\\cczl66At.ltrans0.ltrans.o: In function `main':\n.text.startup+0x3ec): undefined reference to `clamp'\n.text.startup+0x972): undefined reference to `clamp'\n.text.startup+0x9c8): undefined reference to `clamp'\n.text.startup+0xb5c): undefined reference to `is_in_range'\n.text.startup+0xce0): undefined reference to `clamp'\nmake.exe\": *** [out/rom.out] Error 1\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["c", "loops", "data-structures"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1533152266, "post_id": 51641069, "comment_id": 90246623, "body": "If <code>exp[i]</code> is true, that is, its value is not the <code>\\0</code> string terminator, the loop continues. The loop also has <code>return -1; &#47;&#47; invalid expression</code>. Also the function does not return a value at its end. Please look at compiler warnings."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1533152620, "post_id": 51641069, "comment_id": 90246788, "body": "At that <code>return -1;</code> in the loop you will get a memory leak, and maybe something wrong with your stack management. There are probably many problems in the code, after understanding the loop condition. Is this your own code?"}], "answers": [{"tags": [], "owner": {"reputation": 3879, "user_id": 7371784, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/78e670334411962158df4d1ac6803ac9?s=128&d=identicon&r=PG&f=1", "display_name": "Kristjan Kica", "link": "https://stackoverflow.com/users/7371784/kristjan-kica"}, "is_accepted": false, "score": 0, "last_activity_date": 1533152451, "creation_date": 1533152451, "answer_id": 51641147, "question_id": 51641069, "link": "https://stackoverflow.com/questions/51641069/what-is-the-exit-condition-of-for-loop/51641147#51641147", "title": "what is the exit condition of for loop?", "body": "<p>It is    <code>exp[i]</code></p>\n\n<p>If you have a string terminator (<code>\\0</code>), it evaluates to <code>false</code>. If it is another <code>char</code>, it evaluates to <code>true</code>, so we enter the loop.\nIf it is <code>\\0</code> the loop stops.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1533153320, "creation_date": 1533153320, "answer_id": 51641348, "question_id": 51641069, "link": "https://stackoverflow.com/questions/51641069/what-is-the-exit-condition-of-for-loop/51641348#51641348", "title": "what is the exit condition of for loop?", "body": "<p>The loop will continue as long as <code>exp[i]</code> evaluates to <code>true</code>.</p>\n\n<p><code>exp[i]</code>, without any other context, evaluates to <code>char</code>. A <code>char</code> can be used where a boolean value is expected. The boolean value will be <code>false</code> if the value of the <code>char</code> is <code>0</code> and  <code>true</code> otherwise.</p>\n\n<p>In your usage, the loop will continue for every character of <code>exp</code> except the terminating null character. When the terminating null character is encountered, the loop will stop.</p>\n\n<p>A more readable form would be to use <code>exp[i] != '\\0'</code>.</p>\n\n<pre><code>for (i = 0, k = -1; exp[i] != '\\0'; ++i) { ... }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 199, "user_id": 7043401, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a69ceceae43c69068f9a38c636c85419?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/7043401/nick"}, "is_accepted": false, "score": 0, "last_activity_date": 1533155117, "creation_date": 1533155117, "answer_id": 51641752, "question_id": 51641069, "link": "https://stackoverflow.com/questions/51641069/what-is-the-exit-condition-of-for-loop/51641752#51641752", "title": "what is the exit condition of for loop?", "body": "<p>As said above, exp[i] returns true until '\\0' (null character) is hit. If there isn't a null character it will continue and likely overflow.</p>\n"}, {"tags": [], "owner": {"reputation": 1260, "user_id": 4763182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf6929ba6d3abe683e0054f7dc8a8cb?s=128&d=identicon&r=PG", "display_name": "BishalG", "link": "https://stackoverflow.com/users/4763182/bishalg"}, "is_accepted": false, "score": 0, "last_activity_date": 1533192534, "creation_date": 1533192534, "answer_id": 51647177, "question_id": 51641069, "link": "https://stackoverflow.com/questions/51641069/what-is-the-exit-condition-of-for-loop/51647177#51647177", "title": "what is the exit condition of for loop?", "body": "<p>To add more clarity to the code, we can do following changes to the above for loop:</p>\n\n<pre><code>int exp_length = strlen(exp);\nfor(i = 0, k = -1; i&lt;exp_length; ++i) {\n\n}\n</code></pre>\n\n<p>Both do the same thing. <br>\nBasically, the middle expression in for loop is meant to evaluate the termination condition. The for loop continues as long as the middle expression is evaluated to be <code>true</code> and it breaks when middle expression is evaluated to be <code>false</code>.</p>\n\n<ul>\n<li>if <code>i = exp_length</code>, then condition <code>i&lt;exp_length</code> evaluate false and for loop breaks.</li>\n<li>Similarly, last character <code>(at i = exp_length)</code> in exp string contains <code>null</code>,so condition <code>exp[i]</code> evaluate false and for loop breaks.</li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9728599"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 911, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1534555958, "creation_date": 1533152115, "last_edit_date": 1533153740, "question_id": 51641069, "link": "https://stackoverflow.com/questions/51641069/what-is-the-exit-condition-of-for-loop", "title": "what is the exit condition of for loop?", "body": "<p>My below program works fine, but I don't understand the use of <code>exp[i]</code> as a loop termination condition at the marked location.  Why and under what circumstances does this make the loop exit?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n// Stack type\nstruct Stack\n{\n   int top;\n   unsigned capacity;\n   int* array;\n};\n\n// Stack Operations\nstruct Stack* createStack( unsigned capacity )\n{\n   struct Stack* stack = (struct Stack*) malloc(sizeof(struct Stack));\n\n   if (!stack) \n      return NULL;\n\n   stack-&gt;top = -1;\n   stack-&gt;capacity = capacity;\n\n   stack-&gt;array = (int*) malloc(stack-&gt;capacity * sizeof(int));\n\n   if (!stack-&gt;array)\n      return NULL;\n   return stack;\n}\n\nint isEmpty(struct Stack* stack)\n{\n   return stack-&gt;top == -1 ;\n}\n\nchar peek(struct Stack* stack)\n{\n   return stack-&gt;array[stack-&gt;top];\n}\n\nchar pop(struct Stack* stack)\n{\n   if (!isEmpty(stack))\n      return stack-&gt;array[stack-&gt;top--] ;\n   return '$';\n}\n\nvoid push(struct Stack* stack, char op)\n{\n   stack-&gt;array[++stack-&gt;top] = op;\n}\n\n\n// A utility function to check if the given character is operand\nint isOperand(char ch)\n{\n   return (ch &gt;= 'a' &amp;&amp; ch &lt;= 'z') || (ch &gt;= 'A' &amp;&amp; ch &lt;= 'Z');\n}\n\n// A utility function to return precedence of a given operator\n// Higher returned value means higher precedence\nint Prec(char ch)\n{\n   switch (ch)\n   {\n      case '+':\n      case '-':\n         return 1;\n\n      case '*':\n      case '/':\n         return 2;\n\n      case '^':\n         return 3;\n   }\nreturn -1;\n}\n\n\n// The main function that converts given infix expression\n// to postfix expression. \nint infixToPostfix(char* exp)\n{\n   int i, k;\n\n   // Create a stack of capacity equal to expression size \n   struct Stack* stack = createStack(strlen(exp));\n   if(!stack) // See if stack was created successfully \n      return -1 ;\n</code></pre>\n\n<p>what is the exit condition of this below for loop?</p>\n\n<pre><code>for (i = 0, k = -1; exp[i]; ++i) \n{\n    // If the scanned character is an operand, add it to output.\n    if (isOperand(exp[i]))\n        exp[++k] = exp[i];\n\n    // If the scanned character is an \u2018(\u2018, push it to the stack.\n    else if (exp[i] == '(')\n        push(stack, exp[i]);\n\n    // If the scanned character is an \u2018)\u2019, pop and output from the stack \n    // until an \u2018(\u2018 is encountered.\n    else if (exp[i] == ')')\n    {\n        while (!isEmpty(stack) &amp;&amp; peek(stack) != '(')\n            exp[++k] = pop(stack);\n        if (!isEmpty(stack) &amp;&amp; peek(stack) != '(')\n            return -1; // invalid expression             \n        else\n            pop(stack);\n    }\n    else // an operator is encountered\n    {\n        while (!isEmpty(stack) &amp;&amp; Prec(exp[i]) &lt;= Prec(peek(stack)))\n            exp[++k] = pop(stack);\n        push(stack, exp[i]);\n    }\n\n}\n\n// pop all the operators from the stack\nwhile (!isEmpty(stack))\n    exp[++k] = pop(stack );\n\nexp[++k] = '\\0';\nprintf( \"%sn\", exp );\n}\n\n// Driver program to test above functions\nint main()\n{\n   char exp[] = \"a+b*(c^d-e)^(f+g*h)-i\";\n   infixToPostfix(exp);\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "templates", "void-pointers"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1533151857, "post_id": 51640931, "comment_id": 90246402, "body": "This is more a C++ question than a C one.  Tags edited."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1533152221, "post_id": 51640931, "comment_id": 90246604, "body": "Just allocate it with a smart pointer (<code>shared_ptr</code>, <code>unique_ptr</code> etc.) and let it collect itself later. <code>void*</code> isn&#39;t used all that much in C++. Otherwise, you&#39;ll have to keep track of the type of the pointee and cast it before you delete."}], "answers": [{"comments": [{"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1533152398, "post_id": 51641116, "comment_id": 90246677, "body": "Will that call the correct destructor for derived types? (Not saying it won&#39;t - I&#39;m honestly not sure.)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1533152438, "post_id": 51641116, "comment_id": 90246698, "body": "@3Dave,  Yes, it will. That&#39;s what <code>virtual</code> destructors are for."}, {"owner": {"reputation": 301, "user_id": 5286435, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2c377241bb619c9254d07897baaa86a8?s=128&d=identicon&r=PG&f=1", "display_name": "Dnj Abc", "link": "https://stackoverflow.com/users/5286435/dnj-abc"}, "edited": false, "score": 1, "creation_date": 1533154693, "post_id": 51641116, "comment_id": 90247686, "body": "That&#39;s exactly what I was looking for. Thank you."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1533154734, "last_edit_date": 1533154734, "creation_date": 1533152290, "answer_id": 51641116, "question_id": 51640931, "link": "https://stackoverflow.com/questions/51640931/invoke-a-templated-member-from-a-c-function-using-void-pointer/51641116#51641116", "title": "Invoke a templated member from a c-function using void pointer", "body": "<p>Instead of using <code>Wrapper</code>, use a base class, if that's an option.</p>\n\n<pre><code>class MyBase\n{\n   public:\n      virtual ~MyBase() {};\n};\n\ntemplate &lt;typename T&gt;\nclass MyClass : public MyBase\n{\n   public:\n     explicit MyClass(int x) : mVar(x) {}\n\n   private:\n     int mVar;\n};\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>void c_delete_handler(void* data)\n{\n  Base* basePtr = reinterpret_cast&lt;Base*&gt;(data);\n  delete basePtr;\n}\n</code></pre>\n\n<p>This approach obviates the need for keeping track of whether <code>MyClass</code> was instantiated using <code>int</code>, <code>double</code>, <code>std::string</code>, or ....</p>\n"}], "owner": {"reputation": 301, "user_id": 5286435, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2c377241bb619c9254d07897baaa86a8?s=128&d=identicon&r=PG&f=1", "display_name": "Dnj Abc", "link": "https://stackoverflow.com/users/5286435/dnj-abc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 51641116, "answer_count": 1, "score": 0, "last_activity_date": 1533154734, "creation_date": 1533151568, "last_edit_date": 1533152611, "question_id": 51640931, "link": "https://stackoverflow.com/questions/51640931/invoke-a-templated-member-from-a-c-function-using-void-pointer", "title": "Invoke a templated member from a c-function using void pointer", "body": "<p>My c++ code has to work with an underlying c-library. I have a c++ object that looks somewhat like this:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass MyClass\n{\npublic:\n  explicit MyClass(int x)\n  : mVar(x)\n  {\n  }\n\nprivate:\n  int mVar;\n};\n</code></pre>\n\n<p>Later in my c++ code I do the following:</p>\n\n<pre><code>  auto p = new MyClass&lt;int&gt;(10);\n\n  call_c_lib_function((void*) p);\n</code></pre>\n\n<p>The c function saves the pointer 'p' in a larger c-structure. Later when the large\nc object is getting destroyed, it invokes the delete handler.</p>\n\n<pre><code>void\nc_delete_handler(void* data)\n{\n  // data is holding the pointer value 'p' from above.\n}\n</code></pre>\n\n<p>Since the object is getting destroyed, I need to free the object that allocated.\nPer the c++ spec, 'delete void_ptr' is undefined since it doesn't know how to\ninvoke the appropriate destructor. How do I invoke delete on the appropriate\ntemplate object?</p>\n\n<p>One solution I could think of was to create a wrapper structure around my MyClass pointer.</p>\n\n<pre><code>struct Wrapper {\n  enum template_type {\n    template_int,\n    template_double,\n    template_string,\n    ...\n  };\n\n  int template_type;\n  void* obj_ptr;\n};\n</code></pre>\n\n<p>before callign the call_c_lib_function, I'd do the following:</p>\n\n<pre><code>  auto p = new MyClass&lt;int&gt;(10);\n  auto w = new Wrapper()\n  w.template_type = Wrapper::template_int;\n  w.obj_ptr = (void*) p;\n\n  call_c_lib_function((void) w);\n</code></pre>\n\n<p>and now in the delete handler, I can do the following:</p>\n\n<pre><code>void\nc_delete_handler(void* data)\n{\n  Wrapper* w = (Wrapper*) data;\n\n  switch (w-&gt;template_type) {\n    case Wrapper::template_int:\n      delete (MyClass&lt;int&gt;*) w-&gt;obj_ptr;\n      break;\n\n    case Wrapper::template_double:\n      delete (MyClass&lt;double&gt;*) w-&gt;obj_ptr;\n      break;\n    ...\n  }\n}\n</code></pre>\n\n<p>Is this a correct approach? is there a better alternative?\nWould appreciate any inputs. Thanks.</p>\n"}, {"tags": ["c++", "c", "linux", "multiprocessing", "signals"], "comments": [{"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1533150980, "post_id": 51640723, "comment_id": 90245910, "body": "You can try some online compiler"}], "answers": [{"comments": [{"owner": {"reputation": 630, "user_id": 483281, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a010bdb2a778ab79b662843b0facf3cc?s=128&d=identicon&r=PG", "display_name": "basil", "link": "https://stackoverflow.com/users/483281/basil"}, "edited": false, "score": 0, "creation_date": 1533152281, "post_id": 51640844, "comment_id": 90246628, "body": "so the value for sig will be one of those three, else EINVAL?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 630, "user_id": 483281, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a010bdb2a778ab79b662843b0facf3cc?s=128&d=identicon&r=PG", "display_name": "basil", "link": "https://stackoverflow.com/users/483281/basil"}, "edited": false, "score": 0, "creation_date": 1533152845, "post_id": 51640844, "comment_id": 90246900, "body": "No, @basil.  On success, which is indicated to you by a <i>return value</i> of 0, the function will set the signal number to one of <code>SIGHUP</code>, <code>SIGINT</code>, <code>SIGTERM</code>.  On failure, it <i>returns</i> an error code, with <code>EINVAL</code> being the only one documented, but (probably) does not modify the signal number at all.  If this function fails, you should not rely on or make any assumption about the value recorded in the signal number variable.  Setting the value of the object pointed to by the second argument is an altogether different thing from returning a value."}, {"owner": {"reputation": 630, "user_id": 483281, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a010bdb2a778ab79b662843b0facf3cc?s=128&d=identicon&r=PG", "display_name": "basil", "link": "https://stackoverflow.com/users/483281/basil"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1533153495, "post_id": 51640844, "comment_id": 90247178, "body": "@JohnBollinger I included an edit example, would my understanding there be correct?"}, {"owner": {"reputation": 1036, "user_id": 10095817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd397fc62377f0e1f1e53c5b22f9b72a?s=128&d=identicon&r=PG&f=1", "display_name": "RalfFriedl", "link": "https://stackoverflow.com/users/10095817/ralffriedl"}, "edited": false, "score": 2, "creation_date": 1533153817, "post_id": 51640844, "comment_id": 90247321, "body": "I added to the answer. Regarding the examples you added, the first is correct, you send a signal from the set, the function returns. The second is not correct. You send a signal not from the set, the function will continue to wait."}, {"owner": {"reputation": 630, "user_id": 483281, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a010bdb2a778ab79b662843b0facf3cc?s=128&d=identicon&r=PG", "display_name": "basil", "link": "https://stackoverflow.com/users/483281/basil"}, "edited": false, "score": 0, "creation_date": 1533167703, "post_id": 51640844, "comment_id": 90251710, "body": "@RalfFriedl one thing I am noticing, now that I am at a linux machine, if i send it any signal, the process won&#39;t catch it and will die. I am doing this through <b>kill</b>. Am I missing something?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 630, "user_id": 483281, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a010bdb2a778ab79b662843b0facf3cc?s=128&d=identicon&r=PG", "display_name": "basil", "link": "https://stackoverflow.com/users/483281/basil"}, "edited": false, "score": 0, "creation_date": 1533168314, "post_id": 51640844, "comment_id": 90251847, "body": "@basil Yes, any signal not in the mask passed to <code>sigwait</code> will behave normally.  What did you want to happen instead?"}, {"owner": {"reputation": 630, "user_id": 483281, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a010bdb2a778ab79b662843b0facf3cc?s=128&d=identicon&r=PG", "display_name": "basil", "link": "https://stackoverflow.com/users/483281/basil"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1533171066, "post_id": 51640844, "comment_id": 90252337, "body": "@zwol the problem is that it is not handling the signals that have been passed either"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 630, "user_id": 483281, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a010bdb2a778ab79b662843b0facf3cc?s=128&d=identicon&r=PG", "display_name": "basil", "link": "https://stackoverflow.com/users/483281/basil"}, "edited": false, "score": 0, "creation_date": 1533172287, "post_id": 51640844, "comment_id": 90252549, "body": "@basil I don&#39;t understand what you mean by &quot;handling&quot;.  Please be more specific.  <i>Exactly</i> what does it do, and what did you want to happen instead?"}], "tags": [], "owner": {"reputation": 1036, "user_id": 10095817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd397fc62377f0e1f1e53c5b22f9b72a?s=128&d=identicon&r=PG&f=1", "display_name": "RalfFriedl", "link": "https://stackoverflow.com/users/10095817/ralffriedl"}, "is_accepted": false, "score": 1, "last_activity_date": 1533153637, "last_edit_date": 1533153637, "creation_date": 1533151259, "answer_id": 51640844, "question_id": 51640723, "link": "https://stackoverflow.com/questions/51640723/understanding-sigwait-and-how-it-sets-parameters/51640844#51640844", "title": "Understanding sigwait() and how it sets parameters", "body": "<p>As you say, in your example <code>sigwait</code> will wait for one of SIGHUP, SIGINT, SIGTERM.</p>\n\n<blockquote>\n  <p>Otherwise, it will set the signal number to 0.</p>\n</blockquote>\n\n<p>There is no otherwise. The only defined error is</p>\n\n<blockquote>\n  <p>EINVAL The set argument contains an invalid or unsupported signal number.</p>\n</blockquote>\n\n<p><strong>Edit</strong>\nTo state this explicitly, the only defined error for this function is an invalid input for the <code>set</code> argument. As the set you constructed in your example is not invalid, the function will not return an error, it will wait until one of the signals arrives.</p>\n"}], "owner": {"reputation": 630, "user_id": 483281, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a010bdb2a778ab79b662843b0facf3cc?s=128&d=identicon&r=PG", "display_name": "basil", "link": "https://stackoverflow.com/users/483281/basil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533153637, "creation_date": 1533150698, "last_edit_date": 1533153460, "question_id": 51640723, "link": "https://stackoverflow.com/questions/51640723/understanding-sigwait-and-how-it-sets-parameters", "title": "Understanding sigwait() and how it sets parameters", "body": "<p>The man page for sigwait() is a big confusing to me. The signature for sigwait is</p>\n\n<pre><code> int sigwait(const sigset_t *set, int *sig);\n</code></pre>\n\n<p>Say I have code similar to the following</p>\n\n<pre><code> sigset_t wset;\n sigemptyset(&amp;wset);\n sigaddset(&amp;wset,SIGHUP);\n sigaddset(&amp;wget,SIGINT);\n sigaddset(&amp;wget,SIGTERM);\n int sig;\n sigwait(&amp;wset,&amp;sig);\n</code></pre>\n\n<p>If I understand correctly, this will wait on a signal to be sent. If the signal is found in the signal set (i.e. <strong>sigset_t wset</strong>), it will set the signal number (i.e. <strong>int sig</strong>), as found in the set (i.e. <strong>SIGHUP, SIGINT, SIGTERM</strong> in this example). Otherwise, it will set the signal number to 0. Is my understanding correct?</p>\n\n<p>I would try this out, but I don't have access to a compiler at the moment.</p>\n\n<p>edit: for further clarification</p>\n\n<p>Ok so, I send one of the signals above:</p>\n\n<pre><code> int res = sigwait(&amp;wset,&amp;sig);\n // res = 0, sig = SIGHUP, SIGINT, or SIGTERM\n</code></pre>\n\n<p>And I send a signal not included in the set:</p>\n\n<pre><code>int res = sigwait(&amp;wset,&amp;sig);\n// res = EINVAL (i.e. non-zero) and don't worry about sig\n</code></pre>\n\n<p>Is this correct?</p>\n"}, {"tags": ["python", "c", "micropython"], "comments": [{"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1533158304, "post_id": 51640122, "comment_id": 90249245, "body": "Too broad???? <code>Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer. Avoid asking multiple distinct questions at once.</code>"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "edited": false, "score": 0, "creation_date": 1533158338, "post_id": 51640122, "comment_id": 90249257, "body": "What is not specific enough about this?"}, {"owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1534475627, "post_id": 51640122, "comment_id": 90726960, "body": "Just a thought, you can let C side handle the inheritance if your hierarchy is not very complicated, and take advantage of Python&#39;s duck typing. More specifically, maintain inheritance with a tree or lookup table in C, do type checking and cast in C and call methods if valid, everything will essentially be invisible to Python."}, {"owner": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "edited": false, "score": 0, "creation_date": 1534488801, "post_id": 51640122, "comment_id": 90730589, "body": "Not sure how can be done but what I once did, was to create structure <code>TypeB</code> with a member of type <code>TypeA</code>. Thus I could do something like <code>b.memberA.a1()</code>"}, {"owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "reply_to_user": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "edited": false, "score": 0, "creation_date": 1534494385, "post_id": 51640122, "comment_id": 90733487, "body": "@PhoenixBlue that\u2019s not acceptable because the syntax would be different from inheritance occurring solely within <code>.py</code>. There should be no difference between inheritance in C and inheritance in <code>.py</code> code."}], "answers": [{"tags": [], "owner": {"reputation": 5887, "user_id": 496009, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/132a61a5780a1a9ef3187a83e24ae363?s=128&d=identicon&r=PG", "display_name": "pfalcon", "link": "https://stackoverflow.com/users/496009/pfalcon"}, "is_accepted": false, "score": 1, "last_activity_date": 1539295549, "creation_date": 1539295549, "answer_id": 52769551, "question_id": 51640122, "link": "https://stackoverflow.com/questions/51640122/micropython-how-to-create-a-type-in-c-that-inherits-another-type-also-defined/52769551#52769551", "title": "Micropython - how to create a type in C that inherits another type also defined in C?", "body": "<p>As of MicroPython 1.9.4, inheritance on types defined in C is not supported for efficiency reasons. Aka, we were able to go a long way without it. Yes, recently, usecases for that appear more and more often, so it's going to be implemented eventually.</p>\n"}], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539295549, "creation_date": 1533148422, "last_edit_date": 1534475255, "question_id": 51640122, "link": "https://stackoverflow.com/questions/51640122/micropython-how-to-create-a-type-in-c-that-inherits-another-type-also-defined", "title": "Micropython - how to create a type in C that inherits another type also defined in C?", "body": "<p>How do I create a new Python type in C that inherits another Python type also defined in C?</p>\n\n<p>The behavior should be like this:</p>\n\n<pre><code># TypeA defined in C, has members called a1, a2, ...\na = TypeA()\n# TypeB defined in C, has members called b1, b2, ...\n# ... and inherits TypeA \nb = TypeB()\n\n# valid because TypeB inherits TypeA\nprint(b.a1())\n# invalid because TypeA does NOT inherit TypeB\nprint(a.b1())\n</code></pre>\n\n<p><strong>This is for <a href=\"https://github.com/micropython/micropython\" rel=\"nofollow noreferrer\">Micropython</a>. I will only accept a CPython answer if it helps answer the question for Micropython.</strong></p>\n"}, {"tags": ["c", "arrays", "structure"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1533148387, "post_id": 51640078, "comment_id": 90244649, "body": "Not directly. But you\u2019re returning a pointer that was passed in; can\u2019t you return nothing instead? The caller already decided where the data should go."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1533148421, "post_id": 51640078, "comment_id": 90244660, "body": "If asking about build errors, always include the actual errors you get. Please edit your question to show the errors. Copy-paste (as text) them in full and complete and without any editing."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1533148463, "post_id": 51640078, "comment_id": 90244678, "body": "And please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>, learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>, and also read <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}, {"owner": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "edited": false, "score": 0, "creation_date": 1533148593, "post_id": 51640078, "comment_id": 90244762, "body": "Yes, I know that I could use pointers, maybe for this example it looks pointless... But is it possible to do without pointers? just by return?"}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 1, "creation_date": 1533148940, "post_id": 51640078, "comment_id": 90244924, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16139101/c-returning-array-in-function\">C returning array in function</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1533149330, "post_id": 51640078, "comment_id": 90245100, "body": "The code has become a &quot;moving target&quot; after receiving an answer, please don&#39;t do that. Rolled back."}, {"owner": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "edited": false, "score": 0, "creation_date": 1533149395, "post_id": 51640078, "comment_id": 90245137, "body": "Thanks, it answered my question. Now I have another one, how to copy an array, in this case, a structure array?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1533149432, "post_id": 51640078, "comment_id": 90245152, "body": "If an answer allowed you to fix the code, please &quot;accept&quot; that answer, then ask a new question. Stackoverflow is not a dynamic code editing site."}, {"owner": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "edited": false, "score": 0, "creation_date": 1533149560, "post_id": 51640078, "comment_id": 90245210, "body": "ok, thank you, and sorry, its 1st time... I am a bit confused..."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "edited": false, "score": 0, "creation_date": 1533148807, "post_id": 51640204, "comment_id": 90244851, "body": "Hmmm, ok, so it is not possible to return any kind of arrays?!"}, {"owner": {"reputation": 441, "user_id": 5325067, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0de99c01c9c50323415b1498fb0e2ae?s=128&d=identicon&r=PG&f=1", "display_name": "ad3angel1s", "link": "https://stackoverflow.com/users/5325067/ad3angel1s"}, "reply_to_user": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "edited": false, "score": 0, "creation_date": 1533148961, "post_id": 51640204, "comment_id": 90244939, "body": "No, it&#39;s not possible to return arrays from functions in C: See here for example:  <a href=\"https://www.tutorialspoint.com/cprogramming/c_return_arrays_from_function.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cprogramming/&hellip;</a>"}, {"owner": {"reputation": 441, "user_id": 5325067, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0de99c01c9c50323415b1498fb0e2ae?s=128&d=identicon&r=PG&f=1", "display_name": "ad3angel1s", "link": "https://stackoverflow.com/users/5325067/ad3angel1s"}, "reply_to_user": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "edited": false, "score": 1, "creation_date": 1533149110, "post_id": 51640204, "comment_id": 90244994, "body": "When passing the parameters as well, what you&#39;re really passing is a struct SensorData *, as the array notation in the parameter list is just syntactic sugar for the pointer notation."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1533149599, "post_id": 51640204, "comment_id": 90245230, "body": "For a 1D array, yes, but for an array with more dimensions the compiler needs to know all but the outermost length."}], "tags": [], "owner": {"reputation": 441, "user_id": 5325067, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0de99c01c9c50323415b1498fb0e2ae?s=128&d=identicon&r=PG&f=1", "display_name": "ad3angel1s", "link": "https://stackoverflow.com/users/5325067/ad3angel1s"}, "is_accepted": true, "score": 3, "last_activity_date": 1533148747, "creation_date": 1533148747, "answer_id": 51640204, "question_id": 51640078, "link": "https://stackoverflow.com/questions/51640078/is-it-possible-to-return-an-structure-array-in-c-language/51640204#51640204", "title": "Is it possible to return an structure array in C language?", "body": "<p>It doesn't compile because C doesn't allow returning an array, but it will allow you returning a pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 2, "last_activity_date": 1533149660, "creation_date": 1533149660, "answer_id": 51640456, "question_id": 51640078, "link": "https://stackoverflow.com/questions/51640078/is-it-possible-to-return-an-structure-array-in-c-language/51640456#51640456", "title": "Is it possible to return an structure array in C language?", "body": "<p>If your dead set on copying your array to the stack so it can be copied back as a return value you can do something like this with a structure but it's terribly inefficient and seems quite pointless.</p>\n\n<pre><code>struct {\n    struct SensorData[100];\n} sensorArray;\n\nstruct SensorArray process_data(struct SensorData sensorData[]) {\n    sensorArray array;\n\n    array.sensorData[0].LED_1 = 1+1;\n    array.sensorData[0].LED_2 = 2+2;\n\n    return array; \n}\n\nmain() {\n    sensorArray copy;\n\n    copy = process_data(copy.sensorData);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 1, "last_activity_date": 1533281456, "creation_date": 1533281456, "answer_id": 51667439, "question_id": 51640078, "link": "https://stackoverflow.com/questions/51640078/is-it-possible-to-return-an-structure-array-in-c-language/51667439#51667439", "title": "Is it possible to return an structure array in C language?", "body": "<p>First, you have declared an unspecified array type (as no number of element is specified between the brackets) as the return value of the function.  This works with parameters  (because the compiler converts the array references to pointers, and the actual declaration is, indeed, <code>struct SensorData *</code>.  This can be done with parameters, but not with return values, that have to be completely specified.</p>\n\n<p>Second, you cannot return an array.  The array identifier, by itself, doesn't name the array in C, but is just a reference (a pointer) to the first element.  So there's no way to return an array as can be done with a <code>struct</code>, where when you use the variable name, you are referring to the whole variable.</p>\n\n<p>In this sense, you are allowed to do:</p>\n\n<pre><code>struct SensorData {\n    double values[100]; /* you have to be complete here */\n};\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>struct SensorData myFunction(struct SensorData data1) {\n    struct SensorData value_to_return;\n    ...\n    return value_to_return;\n}\n</code></pre>\n\n<p>but before doing that, you have to think carefully, as you are passing a whole structure <em>by value</em> in the parameter <code>data1</code>, so space must be allocated on each call to <code>myFunction</code> to store a copy of the variable you are going to pass (remember all variables are called by value), and space must be reserved (normally on thread stack) for return value, that will be filled by the function, and then copied back to the final destination.  You will get a severe efficiency penalty.</p>\n\n<p>When you make an assignment between two <code>struct</code> objects, you get both variables assigned, if you say</p>\n\n<pre><code>struct SensorData a, b;\n</code></pre>\n\n<p>and later</p>\n\n<pre><code>a = b;\n</code></pre>\n\n<p>that's correct... all fields of <code>a</code> variable are updated with the same ones from variable <code>b</code>.  But that's not the case with arrays.</p>\n\n<pre><code>struct SensorData a[100], b[100];\n</code></pre>\n\n<p>even both being the same type (as shown above)</p>\n\n<pre><code>a = b; /* this is incorrect */\n</code></pre>\n\n<p>because <code>a</code> is not an assignable object(an lvalue, in C nomenclature)... it's only the address of the array specified as a pointer to the first array element. </p>\n\n<p>The thing is that you have a way of doing what you want, just wrap your arrays inside structures, and then you'll manage variables as if they where units.</p>\n\n<pre><code>struct SensorDataWrapper {\n    struct SensorData array[100];\n} a, b;\n</code></pre>\n\n<p>then you can say</p>\n\n<pre><code>a = b; \n</code></pre>\n\n<p>and both structures will be copied from <code>b</code> to <code>a</code> without any problem.  You'll be able to pass them by value (not recommended) and to return them as return values from functions (also not recommended)</p>\n\n<p>Types in C are static, which mean that the compiler defines them strictly at compile time...  This makes impossible to develop a type that changes at runtime, you have to use dynamic structures for that.  Passing a pointer <em>and the compatibility between pointers and arrays</em> to a function is the only way to pass variable length arrays to a function, and when you declare a parameter as an array pointer with unspecified number of elements, you are declaring a different kind of object (indeed a pointer and not an array)</p>\n"}], "owner": {"reputation": 29, "user_id": 10058652, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_YI_HWI3taE/AAAAAAAAAAI/AAAAAAAADQI/TjcepQFWbpw/photo.jpg?sz=128", "display_name": "Mr Koval Koval", "link": "https://stackoverflow.com/users/10058652/mr-koval-koval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 1, "accepted_answer_id": 51640204, "answer_count": 3, "score": 0, "last_activity_date": 1533281456, "creation_date": 1533148275, "last_edit_date": 1533149337, "question_id": 51640078, "link": "https://stackoverflow.com/questions/51640078/is-it-possible-to-return-an-structure-array-in-c-language", "title": "Is it possible to return an structure array in C language?", "body": "<p>So for example I have the next code, and would like to return the sensorData structure array.</p>\n\n<pre><code>struct SensorData[] process_data(struct SensorData sensorData[]){\nsensorData[0].LED_1 = 1+1;\nsensorData[0].LED_2 = 2+2;\nreturn sensorData; }\n</code></pre>\n\n<p>For me it doesnt even compile.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 6, "creation_date": 1533146119, "post_id": 51639476, "comment_id": 90243395, "body": "This would fit better on <a href=\"http://codereview.stackexchange.com\">codereview.stackexchange.com</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8354599"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1533146428, "post_id": 51639476, "comment_id": 90243545, "body": "@HolyBlackCat Thank you! This code shows the sum of multiples 3 and 5 below inputted numbers."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 5, "creation_date": 1533146469, "post_id": 51639476, "comment_id": 90243568, "body": "Use math instead of loop."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1533146482, "post_id": 51639476, "comment_id": 90243574, "body": "Step through it with a debugger. If it takes too long you probably have an accidental infinite loop or an unexpectedly exponential algorithm. You don&#39;t show us what the input is here, so it&#39;s anyone&#39;s guess as to what&#39;s going wrong."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1533146542, "post_id": 51639476, "comment_id": 90243610, "body": "You also need to pay careful attention to indentation and keep your code uncluttered and clean. C is a very unforgiving language, a single missing character can wreck your day, so it&#39;s important to be able to see things at a glance and for mistakes to stand out. It also helps us considerably when reviewing your code."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1533147372, "post_id": 51639476, "comment_id": 90244056, "body": "As @Yunnosch says don&#39;t use a loop to calculate the sum. Use the math formula based on the famous Triangular number formula for summing the integers between 1 and n, i.e. n(n+1) / 2.  So, for n = 4, the sum is 4 * 5 / 2 = 10.  You need to figure out how to use this formula when you are adding up all the numbers that are divisible by 3 or 5."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1533148053, "post_id": 51639476, "comment_id": 90244464, "body": "I&#39;m voting to close this question as off-topic because this is not a question about C: challenge sites expect you to work out the answer for yourself."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1533148225, "post_id": 51639476, "comment_id": 90244556, "body": "That is the deal: not just solving the test cases, but finding an efficient way of beating the clock: <b><i>that</i></b> is the challenge."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533156058, "post_id": 51639476, "comment_id": 90248301, "body": "Nearly a duplicate of <a href=\"https://stackoverflow.com/q/51512180/298225\">Sum of all the multiples of 3 or 5 below 1000 gives a wrong answer in C</a> except this asks about time instead of correctness."}], "answers": [{"comments": [{"owner": {"reputation": 3469, "user_id": 2574612, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4b008a3d7ce933943329e84c1dbe6db7?s=128&d=identicon&r=PG", "display_name": "Nicholas Pipitone", "link": "https://stackoverflow.com/users/2574612/nicholas-pipitone"}, "edited": false, "score": 0, "creation_date": 1533147044, "post_id": 51639671, "comment_id": 90243881, "body": "A neat trick for estimating time, is that a standard processor can handle ~500M operations a second (more like 2B but every line of C translates to several lines of assembly). So if <code>t</code> is 50k, then your outer loop executes 50k times, and then your inner loop executes another 50k times every <i>single</i> time your outer loop iterates. That&#39;s (50k)^2 operations! Much larger than the 1B you have available in 2 seconds. Thus the strategy would be to shave one of the loops, usually the inner loop."}, {"owner": {"reputation": 3469, "user_id": 2574612, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4b008a3d7ce933943329e84c1dbe6db7?s=128&d=identicon&r=PG", "display_name": "Nicholas Pipitone", "link": "https://stackoverflow.com/users/2574612/nicholas-pipitone"}, "edited": false, "score": 0, "creation_date": 1533147872, "post_id": 51639671, "comment_id": 90244360, "body": "You can use that 500M technique to figure out that your method was incorrect, before having to actually write it and run it."}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "edited": false, "score": 0, "creation_date": 1533152799, "post_id": 51639671, "comment_id": 90246880, "body": "Option 1 eliminates the inner loop. For a clue on how to avoid the inner for loop, search for &quot;gauss sum integers&quot;.  That provides the formula for summing the integers from 1 to N, and the same method applies to multiples."}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "edited": false, "score": 0, "creation_date": 1533152971, "post_id": 51639671, "comment_id": 90246941, "body": "Option 2 optimizes the outer loop, by taking advantage of calculations already done.  For example, if the numbers were all 10000, would it make sense to calculate the result for 10000 every time, or remember it?  What if it asks for 10000 and then 10001, does it make sense to recalculate all initial 10000?  BTW, this outer-loop optimization is called &quot;Dynamic programming.&quot;"}], "tags": [], "owner": {"reputation": 3469, "user_id": 2574612, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4b008a3d7ce933943329e84c1dbe6db7?s=128&d=identicon&r=PG", "display_name": "Nicholas Pipitone", "link": "https://stackoverflow.com/users/2574612/nicholas-pipitone"}, "is_accepted": false, "score": 5, "last_activity_date": 1533147686, "last_edit_date": 1533147686, "creation_date": 1533146735, "answer_id": 51639671, "question_id": 51639476, "link": "https://stackoverflow.com/questions/51639476/efficiently-add-numbers-divisible-by-3-or-5/51639671#51639671", "title": "Efficiently add numbers divisible by 3 or 5", "body": "<h1>Option 1</h1>\n\n<p>You're trying to sum all multiples of 3 or 5 under a given number. Have you tried thinking about how you could do it without a for loop? Let's try. Hm, \"3 or 5\" is a lot to think about. Let's simplify it, and try to sum all multiples of 3 under 99:</p>\n\n<p><code>3+6+9+12+15+...+99</code></p>\n\n<p>How could you optimize this addition to avoid a for loop? (Do that before continuing to read)</p>\n\n<p>Now, if you know how to sum all multiples of 3 under a given n, does that give you a way to sum all multiples of 3 <em>or</em> 5 under a given n? Hm, what overlaps between the sequences 3,6,9,12,<strong>15</strong>,...,n and 5,10,<strong>15</strong>...,n? Maybe if you can sum multiples of 3 under n, and sum multiples of 5 under n, then you can get rid of that <a href=\"https://en.wikipedia.org/wiki/Inclusion%E2%80%93exclusion_principle\" rel=\"nofollow noreferrer\">overlap</a>?</p>\n\n<h1>Option 2</h1>\n\n<p>Okay, let's say I know the sum of multiples of 3 or 5 under the number n. Does that help me find the sum of multiples of 3 or 5 under the number n+1? Maybe I know what calc(n) is in terms of calc(n-1). If I could do that then that'll be great, because rather than recalculating calc(n-1), I could just <a href=\"https://www.geeksforgeeks.org/dynamic-programming-set-1/\" rel=\"nofollow noreferrer\">save</a> calc(n-1) instead. If only...</p>\n"}, {"comments": [{"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "edited": false, "score": 3, "creation_date": 1533151124, "post_id": 51640775, "comment_id": 90245992, "body": "Welcome to StackOverflow.  Please add explanatory text, rather than just code."}, {"owner": {"reputation": 36, "user_id": 10167526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HZqqZ.jpg?s=128&g=1", "display_name": "CaptainOfHacks", "link": "https://stackoverflow.com/users/10167526/captainofhacks"}, "edited": false, "score": 0, "creation_date": 1533152003, "post_id": 51640775, "comment_id": 90246475, "body": "i change algorithm"}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "edited": false, "score": 1, "creation_date": 1533152563, "post_id": 51640775, "comment_id": 90246754, "body": "<code>register</code> is a holdover from when compilers couldn&#39;t optimize very well.  These days it&#39;s rarely a good idea."}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "edited": false, "score": 0, "creation_date": 1533239225, "post_id": 51640775, "comment_id": 90285672, "body": "The <code>mid*(7*mid+15)&#47;30</code> term is clever, but not very helpful to most people, without an explanation."}], "tags": [], "owner": {"reputation": 36, "user_id": 10167526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HZqqZ.jpg?s=128&g=1", "display_name": "CaptainOfHacks", "link": "https://stackoverflow.com/users/10167526/captainofhacks"}, "is_accepted": false, "score": -3, "last_activity_date": 1533155775, "last_edit_date": 1533155775, "creation_date": 1533150923, "answer_id": 51640775, "question_id": 51639476, "link": "https://stackoverflow.com/questions/51639476/efficiently-add-numbers-divisible-by-3-or-5/51640775#51640775", "title": "Efficiently add numbers divisible by 3 or 5", "body": "<pre><code>#include &lt;stdio.h&gt;\nvoid calc_faster(int a)\n{\n    int mid=0,sum=0;\n    for(unsigned int i = a-1;i&gt;0;i--)\n    {if(i%3==0)\n      {\n          if(i%5==0)\n          {\n              mid=i;\n              break;\n          } else sum+=i;\n      } else if(i%5==0) sum+=i;\n    }\n    sum+=mid*(7*mid+15)/30;\n    printf(\"%d\\n\",sum);\n}\nint main()\n{\n       unsigned int t;\n       unsigned int temp;\n    scanf(\"%d\",&amp;t);\n    unsigned int arr[t];\n    for(register unsigned int a0 = 0; a0 &lt; t; a0++)\n    {\n        scanf(\"%d\",&amp;arr[a0]);\n    }\n    for(register unsigned int b=0; b&lt;t; b++)\n    {\n       calc_faster(arr[b]);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38158, "user_id": 2707792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hjDjB.png?s=128&g=1", "display_name": "Andrey Tyukin", "link": "https://stackoverflow.com/users/2707792/andrey-tyukin"}, "is_accepted": false, "score": 1, "last_activity_date": 1533210284, "last_edit_date": 1533210284, "creation_date": 1533209103, "answer_id": 51652443, "question_id": 51639476, "link": "https://stackoverflow.com/questions/51639476/efficiently-add-numbers-divisible-by-3-or-5/51652443#51652443", "title": "Efficiently add numbers divisible by 3 or 5", "body": "<p>Here are a few hints and links for everyone:</p>\n\n<ul>\n<li>There are <code>m = (a - 1) / k</code> numbers below <code>a</code> that are divisible by <code>k</code> (with integer division).</li>\n<li>Their sum is  <code>m * (m + 1) / 2 * k</code> (by <a href=\"https://de.wikipedia.org/wiki/Gau%C3%9Fsche_Summenformel\" rel=\"nofollow noreferrer\">Gaussian sum formula</a>, link to German wiki - they seem to like Gau\u00df more).</li>\n<li><p>The sum of all numbers smaller than <code>a</code> divisible by <code>3</code> or <code>5</code> is the same as </p>\n\n<pre><code>+ the sum of all numbers smaller than `a` divisible by `3` \n+ the sum of all numbers smaller than `a` divisible by `5` \n- the sum of all numbers smaller than `a` divisible by `15` \n</code></pre>\n\n<p>(by <a href=\"https://en.wikipedia.org/wiki/Inclusion%E2%80%93exclusion_principle\" rel=\"nofollow noreferrer\">inclusion-exclusion principle</a>)</p></li>\n</ul>\n\n<p>This gives you the constant-time algorithm:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n/* sums the numbers \n   smaller than `a` that \n   are divisible by `k`\n*/\nint s(int a, int k) {\n    int m = (a - 1) / k;\n    return m * (m + 1) / 2 * k;\n}\n\n/* sums the numbers smaller than\n   a that are divisible by both\n   3 and 5\n*/\nint calc(int a) {\n    return s(a, 3) + s(a, 5) - s(a, 15);\n}\n\nint main(){ \n    int t;\n    scanf(\"%d\", &amp;t);\n    int arr[t];\n    for(int a0 = 0; a0 &lt; t; a0++){\n        scanf(\"%d\", &amp;arr[a0]);\n    }\n    for(int b=0; b&lt;t; b++){\n        printf(\"input = %d\\n\", arr[b]);\n        printf(\"%d\\n\", calc(arr[b]));\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>$ ./sumFizzBuzz \n4\n10\n100 \n1000\n10000\n23\n2318\n233168\n23331668\n</code></pre>\n\n<p>Sorry, this had to be, there was just too much loops-&amp;-nonsense here and on the \"nearly duplicate\" question...</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8354599"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2738, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1533210284, "creation_date": 1533146025, "last_edit_date": 1533154534, "question_id": 51639476, "link": "https://stackoverflow.com/questions/51639476/efficiently-add-numbers-divisible-by-3-or-5", "title": "Efficiently add numbers divisible by 3 or 5", "body": "<p>List the sum of numbers that are multiples of either 3 or five, below a given number.</p>\n\n<p>Here's my code, couldn't find anything unnecessary. But hackerrank says it has terminated due to time out, time limit is 2 seconds to give the expected output.\nInput first line contains 't' that denotes the number of test cases. This is followed by lines, each containing an integer. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid calc(int a){\n    int sum = 0;\n    for(int a0=1; a0&lt;a; a0++){\n        if(a0%3==0 || a0%5==0){\n            sum+=a0;\n        }\n    }\n    printf(\"%d\", sum);\n}\nint main(){ \n    int t;\n    scanf(\"%d\",&amp;t);\n    int arr[t];\n    for(int a0 = 0; a0 &lt; t; a0++){\n        scanf(\"%d\",&amp;arr[a0]);\n    }\n    for(int b=0; b&lt;t; b++){\n        calc(arr[b]);\n           printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Input </p>\n\n<pre><code>2\n10\n100\n</code></pre>\n\n<p>Output must be</p>\n\n<pre><code>23\n2318\n</code></pre>\n\n<p>If we list all the natural numbers below 10 that are multiples of 3 or 5, then the sum of these multiples is 23.</p>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1533144055, "post_id": 51638928, "comment_id": 90242336, "body": "So the code gives the right answer, and you wonder where the <i>error</i> is? Why do you think there&#39;s any &quot;error&quot; in your code?"}, {"owner": {"reputation": 29, "user_id": 6942423, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6oOtpbbuGAc/AAAAAAAAAAI/AAAAAAAAUDE/raXXt2G1OLo/photo.jpg?sz=128", "display_name": "Voneone", "link": "https://stackoverflow.com/users/6942423/voneone"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533144128, "post_id": 51638928, "comment_id": 90242374, "body": "@Someprogrammerdude website is not accepting my solution."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533144177, "post_id": 51638928, "comment_id": 90242390, "body": "Because you ran out of time, right?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1533144212, "post_id": 51638928, "comment_id": 90242405, "body": "And please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>, and learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>. Also read <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>, and all of <a href=\"http://idownvotedbecau.se/\" rel=\"nofollow noreferrer\">idownvotedbecau.se</a> to learn some reasons your question might be down-voted. Finally, please <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">learn how to debug your programs</a>."}, {"owner": {"reputation": 29, "user_id": 6942423, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6oOtpbbuGAc/AAAAAAAAAAI/AAAAAAAAUDE/raXXt2G1OLo/photo.jpg?sz=128", "display_name": "Voneone", "link": "https://stackoverflow.com/users/6942423/voneone"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533144292, "post_id": 51638928, "comment_id": 90242453, "body": "@Yunnosch wrong answer."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533144349, "post_id": 51638928, "comment_id": 90242489, "body": "So you think the result is the correct answer but the judge disagrees?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1533144936, "post_id": 51638928, "comment_id": 90242762, "body": "Without knowing the exact input you get, it&#39;s hard to impossible to properly debug your program. That&#39;s why such sites and the questions they cause posted here are so despised. They also don&#39;t really teach you anything useful, only how to be good at such sites, which really doesn&#39;t translate well into real-life experience."}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 1, "creation_date": 1533145314, "post_id": 51638928, "comment_id": 90242957, "body": "Initializing <code>primary_sum</code> should help."}, {"owner": {"reputation": 3469, "user_id": 2574612, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4b008a3d7ce933943329e84c1dbe6db7?s=128&d=identicon&r=PG", "display_name": "Nicholas Pipitone", "link": "https://stackoverflow.com/users/2574612/nicholas-pipitone"}, "edited": false, "score": 2, "creation_date": 1533145676, "post_id": 51638928, "comment_id": 90243159, "body": "I&#39;m surprised it ran at all, without a memory error. Take a look at <code>int row,column = 0</code> in combination with the ggloren&#39;s answer. You got lucky (Or rather, for debugging, unlucky) that it worked on your own machine. May I also suggest, not having row/column as different variables (They are always equal anyway)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1533146209, "post_id": 51638928, "comment_id": 90243431, "body": "As mentioned by others, your local variable initializations doesn&#39;t work as you apparently seem to think. For example <code>int row, column = 0;</code> initializes <code>column</code> to zero, but doesn&#39;t initialize <code>row</code>. It is equal to <code>int row; int column = 0;</code>. Uninitialized local variables will haven an <i>indeterminate</i> value, that can seem almost random."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1533151395, "post_id": 51638928, "comment_id": 90246157, "body": "&quot; I am completely new to C language.&quot; - So if you don&#39;t know the language you instantly go to the parliament of a foreign country and hold a public speech? How about learning the lenguage before you join some programming contest?"}, {"owner": {"reputation": 29, "user_id": 6942423, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6oOtpbbuGAc/AAAAAAAAAAI/AAAAAAAAUDE/raXXt2G1OLo/photo.jpg?sz=128", "display_name": "Voneone", "link": "https://stackoverflow.com/users/6942423/voneone"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1533177839, "post_id": 51638928, "comment_id": 90253562, "body": "@toohonestforthissite I was just applying the knowledge I learned from random youtube videos. This was a beginners problem and not some competition. I only learned something new by asking the question. Please don&#39;t be rude next time."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1533204292, "post_id": 51638928, "comment_id": 90264954, "body": "&quot;I was just applying the knowledge I learned from random youtube videos&quot; - That&#39;s exactly the problem! You cannot learn C from obscure YT videos or online &quot;tutorials&quot; or trial&amp;error! Get a textbook!"}], "answers": [{"tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": true, "score": 2, "last_activity_date": 1533145504, "creation_date": 1533145504, "answer_id": 51639339, "question_id": 51638928, "link": "https://stackoverflow.com/questions/51638928/diagonal-difference-on-hackerrank/51639339#51639339", "title": "Diagonal difference on HackerRank", "body": "<p>Your logic seems correct. But have a look at this line:</p>\n\n<pre><code> int primary_sum, secondary_sum = 0;\n</code></pre>\n\n<p>What is <code>primary_sum</code> initialized to--<code>0</code> or a garbage value? HackerRank offers a box called \"your output\", which shows your sum as <code>18179734</code>. I'll let you debug from here.</p>\n"}], "owner": {"reputation": 29, "user_id": 6942423, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6oOtpbbuGAc/AAAAAAAAAAI/AAAAAAAAUDE/raXXt2G1OLo/photo.jpg?sz=128", "display_name": "Voneone", "link": "https://stackoverflow.com/users/6942423/voneone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1220, "favorite_count": 0, "accepted_answer_id": 51639339, "answer_count": 1, "score": -2, "last_activity_date": 1544314604, "creation_date": 1533143866, "last_edit_date": 1533145019, "question_id": 51638928, "link": "https://stackoverflow.com/questions/51638928/diagonal-difference-on-hackerrank", "title": "Diagonal difference on HackerRank", "body": "<p>I was trying to solve <a href=\"https://www.hackerrank.com/challenges/diagonal-difference/problem\" rel=\"nofollow noreferrer\">this</a>. My algorithm gives right answer in ofline compiler. I dont know where is the error. I am completely new to C language.</p>\n\n<p>The problem asked to create a function to find the absolute difference of right and left diagonals of a square matrix. </p>\n\n<p>This is my solution for the website. When I run the code online it gives the output 12.</p>\n\n<pre><code>int diagonalDifference(int arr_rows, int arr_columns, int** arr) {\n\n    int primary_sum, secondary_sum = 0;\n    for(int row,column = 0; row &lt; arr_rows &amp;&amp; column &lt; arr_columns; row++, column++){\n\n        primary_sum += arr[row][column];\n        secondary_sum += arr[row][arr_columns - column - 1];\n\n    }\n\n    return abs(primary_sum - secondary_sum);\n\n}\n</code></pre>\n\n<p>I wrote a similar program to test ofline. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid matrix_sum(int arr_rows, int arr_columns, int arr[3][3]);\nint main(void){\n\n    int arr[3][3] = {\n                    {11, 2, 4},\n                    {4, 5, 6},\n                    {10, 8, -12}\n                  };\n\n    matrix_sum(3, 3, arr);\n\n\n}\n\n\nvoid matrix_sum(int arr_rows, int arr_columns, int arr[3][3]){\n\n    int row,column = 0;\n    int primary_sum, secondary_sum = 0;\n    int digonals[3];\n    int s_digonals[3];\n\n    for(; row &lt; arr_rows &amp;&amp; column &lt; arr_columns; row++, column++){\n        primary_sum += arr[row][column];\n        secondary_sum += arr[row][arr_columns - column - 1];\n\n        digonals[row] = arr[row][column];\n        s_digonals[row] = arr[row][arr_columns - column - 1];\n\n    }\n\n    printf(\"primary_sum = %i\\n\", primary_sum);\n    printf(\"secondary_sum = %i\\n\", secondary_sum);\n\n    for(int i = 0; i &lt; row; i++){\n        printf(\"%i \",digonals[i]);\n    }\n    printf(\"\\n\");\n\n    for(int i = 0; i &lt; row; i++){\n        printf(\"%i \",s_digonals[i]);\n    }\n    printf(\"\\n%i\\n\", abs(primary_sum - secondary_sum) );\n\n\n\n}\n</code></pre>\n\n<p>second program gives correct result which is 15 and I don't know why online compiler gives output 12.</p>\n\n<p>Input was.</p>\n\n<p>3</p>\n\n<p>11 2 4</p>\n\n<p>4 5 6</p>\n\n<p>10 8 -12</p>\n"}, {"tags": ["c", "compiler-errors", "ternary-operator"], "comments": [{"owner": {"reputation": 1410, "user_id": 5753159, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6e31843ab95794be9deb8be27490a932?s=128&d=identicon&r=PG&f=1", "display_name": "Spinor8", "link": "https://stackoverflow.com/users/5753159/spinor8"}, "edited": false, "score": 1, "creation_date": 1533144174, "post_id": 51638911, "comment_id": 90242388, "body": "Welcome to stackoverflow. Can you format your code properly? Also please copy and paste the error rather than use a screenshot."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533144340, "post_id": 51638911, "comment_id": 90242485, "body": "Visual Studio and its compiler is happy to let you do many things that are technically not allowed."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1533144712, "post_id": 51638911, "comment_id": 90242653, "body": "As I found while formatting, g++ allows that as well. Shared compiler bugs or subtle difference between C  and C++, I don&#39;t know.. Did it work? I dunno. Didn&#39;t check. A bit more of a deep-dive might be required."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8816481, "user_type": "registered", "profile_image": "https://graph.facebook.com/1611005715627376/picture?type=large", "display_name": "Abdelrahman Ahmed", "link": "https://stackoverflow.com/users/8816481/abdelrahman-ahmed"}, "edited": false, "score": 0, "creation_date": 1533145185, "post_id": 51639128, "comment_id": 90242890, "body": "Thanks for your concern , knowing that&#39;s a very simple could and I&#39;ve already tried the if-else model, My Intention was to try to save a few lines by using the ternary operator. first I used the literal characters &#39;=&#39; and it gave me an error so i replaced it with the ASCI value and it turned out that wasn&#39;t the problem."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 1, "user_id": 8816481, "user_type": "registered", "profile_image": "https://graph.facebook.com/1611005715627376/picture?type=large", "display_name": "Abdelrahman Ahmed", "link": "https://stackoverflow.com/users/8816481/abdelrahman-ahmed"}, "edited": false, "score": 0, "creation_date": 1533145364, "post_id": 51639128, "comment_id": 90242977, "body": "@AbdelrahmanAhmed &quot;Saving lines&quot; is <i>bad</i> and lead to obfuscated code that is hard to read, understand and maintain. It won&#39;t save you anything in the generated code anyway, all it does is cause you (and other, inclusind yourself in some time) headaches."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1533144686, "creation_date": 1533144686, "answer_id": 51639128, "question_id": 51638911, "link": "https://stackoverflow.com/questions/51638911/eclipse-photon-ternary-operator-compiling-error/51639128#51639128", "title": "Eclipse-Photon Ternary Operator Compiling Error", "body": "<p>As for <em>why</em> you get an error, it's question about <a href=\"https://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\"><em>operator precedence</em></a>.</p>\n\n<p>The expression is really <code>((x == y) ? c = 61 : (x &gt; y) ? c = 62 : c) = 60</code>. That is, you try to assign the value <code>60</code> to the expression <code>(x == y) ? c = 61 : (x &gt; y) ? c = 62 : c</code> which isn't possible.</p>\n\n<p>You need to either add a few parentheses yourself, like</p>\n\n<pre><code>(x == y) ? c = 61 : (x &gt; y) ? c = 62 : (c = 60);  // Note parentheses around last assignment\n</code></pre>\n\n<p>Or rework it to e.g.</p>\n\n<pre><code>c = (x == y ? '=' : x &gt; y ? '&gt;' : '&lt;');\n</code></pre>\n\n<p>Or, which is what I recommend, stop using obfuscated code and use easy, readable code:</p>\n\n<pre><code>if (x == y)\n    c = '=';\nelse if (x &gt; y)\n    c = '&gt;';\nelse\n    c = '&lt;';\n</code></pre>\n\n<p><sub>Also note the use of the actual character values, instead of the <a href=\"https://en.wikipedia.org/wiki/Magic_number_(programming)\" rel=\"nofollow noreferrer\"><em>magic numbers</em></a>.</sub></p>\n"}], "owner": {"reputation": 1, "user_id": 8816481, "user_type": "registered", "profile_image": "https://graph.facebook.com/1611005715627376/picture?type=large", "display_name": "Abdelrahman Ahmed", "link": "https://stackoverflow.com/users/8816481/abdelrahman-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1533144820, "creation_date": 1533143762, "last_edit_date": 1533144820, "question_id": 51638911, "link": "https://stackoverflow.com/questions/51638911/eclipse-photon-ternary-operator-compiling-error", "title": "Eclipse-Photon Ternary Operator Compiling Error", "body": "<p>The function should compare two integers and print the relation on the screen\nalthogh,the <em>ternary operator</em> is right in syntax and already running on visual studio IDE it gives me an error in eclipse when compiled with gcc: </p>\n\n<pre><code>error: lvalue required as left operand of assignment\n     (x == y) ? c = 61 : (x &gt; y) ? c = 62 : c = 60;\n                                              ^\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid _1_6(const int x, const int y)\n{\n    char c = '\\0';\n    (x == y) ? c = 61 : (x &gt; y) ? c = 62 : c = 60;\n    printf(\"%d%c%d\", x, c, y);\n}\n\nint main(void)\n{\n    _1_6(1, 3);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1533143403, "post_id": 51638803, "comment_id": 90242025, "body": "<code>&amp;a&amp;b</code> -&gt; <code>&amp;a,&amp;b</code>"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1533143517, "post_id": 51638803, "comment_id": 90242087, "body": "You&#39;ll need at least one variable to <i>only</i> read the input, so you&#39;d need at least one more to hond the result."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533143624, "post_id": 51638803, "comment_id": 90242140, "body": "From where did you get this &quot;problem&quot;? Can you either link to it, or quote the text?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1533143641, "post_id": 51638803, "comment_id": 90242149, "body": "Proving that something is impossible is always hard. But I will pay you a nice dinner if anybody has a solution for this. (You need to come here. ;-) )"}, {"owner": {"reputation": 142, "user_id": 9422872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f736a48db418bac162a3bc95d9582f?s=128&d=identicon&r=PG", "display_name": "Uttam Manher", "link": "https://stackoverflow.com/users/9422872/uttam-manher"}, "edited": false, "score": 0, "creation_date": 1533143698, "post_id": 51638803, "comment_id": 90242170, "body": "I was just thinking that is it possible so I posted this. Like can overwriting will work?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533149143, "post_id": 51638803, "comment_id": 90245011, "body": "@Yunnosch Does <a href=\"https://stackoverflow.com/a/51639607/2410359\"><code>scan_int() + scan_int()</code></a> work for you?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533149850, "post_id": 51638803, "comment_id": 90245354, "body": "@chux Never heard of them. I might pay up if they are in a standard l&#237;b. Since cppreference.com does not know them either, I&#39;d take some convincing. But whatever. I&#39;d pay a dinner for any StackOverflow user who visits me. I might constrain the rate to one per week if I get rushed. :-)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533149938, "post_id": 51638803, "comment_id": 90245405, "body": "@Yunnosch <code>scan_int()</code> are in the <a href=\"https://stackoverflow.com/a/51639607/2410359\">linked code</a>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533150115, "post_id": 51638803, "comment_id": 90245505, "body": "@chux That is valid. I am willing to pay up. Come here."}], "answers": [{"comments": [{"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "edited": false, "score": 1, "creation_date": 1533144059, "post_id": 51638904, "comment_id": 90242341, "body": "<i>But no there isn&#39;t really an elegant way to use one variable for two inputs.</i> Can you prove it?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533144392, "post_id": 51638904, "comment_id": 90242511, "body": "they are two objects refenced by one pointer. This is not the solution - which actually does not exist"}, {"owner": {"reputation": 827, "user_id": 3261253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012303c103f5013add696fbd42b998d4?s=128&d=identicon&r=PG&f=1", "display_name": "agillgilla", "link": "https://stackoverflow.com/users/3261253/agillgilla"}, "reply_to_user": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "edited": false, "score": 0, "creation_date": 1533144567, "post_id": 51638904, "comment_id": 90242589, "body": "@Winter I don&#39;t know if it&#39;s provable...  It hinges on the definition of a variable and the entire underlying syntax of C, but I suppose you could do something where you load the first input into the upper 16 bits of the <code>int</code> and load the second into the lower 16 bits, so maybe I was wrong about there being an <i>elegant</i> way to use one variable for two inputs.  But do you want to take a stab at it?"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1533144672, "post_id": 51638904, "comment_id": 90242629, "body": "Look below at array example instead of bit-shifting to fake 2 16-bit variables into 1 32-bit area (which is basically an array of 16-bit values...)"}, {"owner": {"reputation": 827, "user_id": 3261253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012303c103f5013add696fbd42b998d4?s=128&d=identicon&r=PG&f=1", "display_name": "agillgilla", "link": "https://stackoverflow.com/users/3261253/agillgilla"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1533144764, "post_id": 51638904, "comment_id": 90242679, "body": "@P__J__ The question said one <i>variable</i>, not one <i>object/memory location</i>. :)"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1533145550, "post_id": 51638904, "comment_id": 90243093, "body": "Still, cf my answer: a single variable can be a struct with 2 int fields, surely... probably a cleaner way to achieve the same goal"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1533147851, "post_id": 51638904, "comment_id": 90244341, "body": "Code is broke.  Certinaly <code>scanf(&quot;%d%d&quot;,nums, (nums + sizeof(int)));</code> should be <code>scanf(&quot;%d%d&quot;,nums, nums + 1);</code>  (pointer math)"}], "tags": [], "owner": {"reputation": 827, "user_id": 3261253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012303c103f5013add696fbd42b998d4?s=128&d=identicon&r=PG&f=1", "display_name": "agillgilla", "link": "https://stackoverflow.com/users/3261253/agillgilla"}, "is_accepted": false, "score": 5, "last_activity_date": 1533143740, "creation_date": 1533143740, "answer_id": 51638904, "question_id": 51638803, "link": "https://stackoverflow.com/questions/51638803/adding-two-numbers-with-using-only-one-variable-in-c/51638904#51638904", "title": "Adding Two numbers with using only one variable in C", "body": "<p><strong><em>Technically</em></strong> one variable, a pointer:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main() {\n    int *nums = malloc(2 * sizeof(int));\n    scanf(\"%d%d\",nums, (nums + sizeof(int)));\n    printf(\"%d\",(*nums + *(nums + sizeof(int))));\n    return 0;\n}\n</code></pre>\n\n<p>But no there isn't really an <strong><em>elegant</em></strong> way to use <strong>one</strong> variable for <strong>two</strong> inputs.</p>\n"}, {"comments": [{"owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1533145073, "post_id": 51638994, "comment_id": 90242826, "body": "I was thinking of just defining <code>int a;</code> and then using <code>*(a+1)</code> after all no statement was made that good or correct coding practices must be used"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1533145121, "post_id": 51638994, "comment_id": 90242853, "body": "now to confuse some people, replace <code>&amp;a[0]</code> with <code>a</code>, and <code>&amp;a[1]</code> with <code>a+1</code>, and <code>*(a+2) = [0]a + [1]a;</code> just to mess with people some more"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1533145278, "post_id": 51638994, "comment_id": 90242937, "body": "@ron That is dereferencing the value stored in a as an address is completely different.    If we go there, why not use all of available RAM as a buffer and forego variables completely.  No, your answer is good as-is."}, {"owner": {"reputation": 142, "user_id": 9422872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f736a48db418bac162a3bc95d9582f?s=128&d=identicon&r=PG", "display_name": "Uttam Manher", "link": "https://stackoverflow.com/users/9422872/uttam-manher"}, "edited": false, "score": 0, "creation_date": 1533146868, "post_id": 51638994, "comment_id": 90243785, "body": "Yes. It works but I was thinking about overwrite can overwrite work?"}, {"owner": {"reputation": 142, "user_id": 9422872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f736a48db418bac162a3bc95d9582f?s=128&d=identicon&r=PG", "display_name": "Uttam Manher", "link": "https://stackoverflow.com/users/9422872/uttam-manher"}, "edited": false, "score": 0, "creation_date": 1533146908, "post_id": 51638994, "comment_id": 90243808, "body": "I mean int a = a + b kinda this?"}, {"owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "edited": false, "score": 1, "creation_date": 1533157001, "post_id": 51638994, "comment_id": 90248721, "body": "yes, in C there is <code>a += b</code> which is equivalent to <code>a = a + b</code> and that works fine and is perfectly acceptable.  Now if is this some kind of school assignment for learning then okay.  But trying to do this to save one variable for no other reason is bad programming... use as many variables as necessary for human readability and let the compiler do the work"}], "tags": [], "owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "is_accepted": false, "score": 11, "last_activity_date": 1533144157, "creation_date": 1533144157, "answer_id": 51638994, "question_id": 51638803, "link": "https://stackoverflow.com/questions/51638803/adding-two-numbers-with-using-only-one-variable-in-c/51638994#51638994", "title": "Adding Two numbers with using only one variable in C", "body": "<pre><code>#include &lt;stdio.h&gt;\nint main ( void )\n{\n   int a[3];\n\n   scanf(\"%d\", &amp;a[0]);   /* first number */\n   sscanf(\"%d\", &amp;a[1] );    /* second number */\n\n   a[2] = a[0] + a[1];\n\n   printf(\"sum is %d\\n\", a[0] + a[1] );\n\n   printf(\"sum stored in a[%d] is %d\\n\", 2, a[2] );\n\n   return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 827, "user_id": 3261253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012303c103f5013add696fbd42b998d4?s=128&d=identicon&r=PG&f=1", "display_name": "agillgilla", "link": "https://stackoverflow.com/users/3261253/agillgilla"}, "edited": false, "score": 0, "creation_date": 1533144710, "post_id": 51639073, "comment_id": 90242652, "body": "Hmmmm... Technically you used <i>three</i> variables, the one in the stack in the <code>main()</code> call and the two that are allocated on the stack for the two <code>same</code> calls.  Just because you named the variable <code>int a</code> in the <code>same()</code> function doesn&#39;t make it the same variable..."}, {"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 1, "creation_date": 1533144760, "post_id": 51639073, "comment_id": 90242677, "body": "the comma is pretty good here, I wonder if you can do it without <code>same</code>"}, {"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "reply_to_user": {"reputation": 827, "user_id": 3261253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012303c103f5013add696fbd42b998d4?s=128&d=identicon&r=PG&f=1", "display_name": "agillgilla", "link": "https://stackoverflow.com/users/3261253/agillgilla"}, "edited": false, "score": 0, "creation_date": 1533144771, "post_id": 51639073, "comment_id": 90242682, "body": "@agillgilla I&#39;m trying to find a function to replace my &quot;same&quot;. Floor doesn&#39;t seem to work. I&#39;m not responsible for the variables in the function I call right? Otherwise variables in printf and scanf would count"}, {"owner": {"reputation": 3350, "user_id": 7332147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4GFL.png?s=128&g=1", "display_name": "linuxfan says Reinstate Monica", "link": "https://stackoverflow.com/users/7332147/linuxfan-says-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1533144811, "post_id": 51639073, "comment_id": 90242706, "body": "I agree with Winter; he declared a single variable."}, {"owner": {"reputation": 827, "user_id": 3261253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012303c103f5013add696fbd42b998d4?s=128&d=identicon&r=PG&f=1", "display_name": "agillgilla", "link": "https://stackoverflow.com/users/3261253/agillgilla"}, "edited": false, "score": 0, "creation_date": 1533144858, "post_id": 51639073, "comment_id": 90242726, "body": "Honestly I think this is a wild goose chase.  Either way we&#39;re going to have to store two numbers in memory and add them together, so it is just if you want to <i>technically</i> call it one variable or not. <b>This is more a question of what the definition of a variable is.</b>"}, {"owner": {"reputation": 3350, "user_id": 7332147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4GFL.png?s=128&g=1", "display_name": "linuxfan says Reinstate Monica", "link": "https://stackoverflow.com/users/7332147/linuxfan-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533144936, "post_id": 51639073, "comment_id": 90242761, "body": "The definition of a variable declaration is like &quot;int a&quot;; then, every trick can be done I think."}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 1, "creation_date": 1533145227, "post_id": 51639073, "comment_id": 90242914, "body": "nice use of sequence points, although the code looks like it&#39;s capable of making people incredibly angry"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533146051, "post_id": 51639073, "comment_id": 90243353, "body": "what if we want 50 adds? Not very  and I am not sure if it is not an UB"}, {"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533146111, "post_id": 51639073, "comment_id": 90243385, "body": "@P__J__ I don&#39;t get what you mean by &quot;50 adds&quot;, OP is asking to sum 2 values from input with a single variable. There&#39;s no reason for UB to happen here, is it?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533146119, "post_id": 51639073, "comment_id": 90243396, "body": "and math to archive this - not elegant"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533146671, "post_id": 51639073, "comment_id": 90243690, "body": "Your sollution does not work with the negative numbers - so it just do not work"}, {"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "edited": false, "score": 0, "creation_date": 1533146707, "post_id": 51639073, "comment_id": 90243704, "body": "Indeed because of the square root, will try to find a better function."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533146836, "post_id": 51639073, "comment_id": 90243774, "body": "<code>sqrt(pow((scanf(&quot;%d&quot;, &amp;a), a), 2)</code> will have precision issues for large  values  like 2^27 or more."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533147026, "post_id": 51639073, "comment_id": 90243872, "body": "@Winter Why not use <code>printf(&quot;%d&quot;, (scanf(&quot;%d&quot;, &amp;a), a) + (scanf(&quot;%d&quot;, &amp;a), a);</code>?  If this does not work, then neither will <code>(int)(sqrt(pow((scanf(&quot;%d&quot;, &amp;a), a), 2)) + sqrt(pow((scanf(&quot;%d&quot;, &amp;a), a), 2)))</code>"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533147081, "post_id": 51639073, "comment_id": 90243892, "body": "The problem is if someone will ask I want to add 100 numbers using one variable."}, {"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533147163, "post_id": 51639073, "comment_id": 90243939, "body": "@chux I think the function call is prioritised over the rest making scanf&#39;s be called before the rest. At least that&#39;s what I understood by experimenting with it."}, {"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "edited": false, "score": 0, "creation_date": 1533147225, "post_id": 51639073, "comment_id": 90243976, "body": "I don&#39;t get why tan(atan(x)) doesn&#39;t work though. It might have something to do with constexpr functions"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533148046, "post_id": 51639073, "comment_id": 90244458, "body": "Hmm, looks like 2 variables to me. <code>main::a, same::a</code>."}, {"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533148225, "post_id": 51639073, "comment_id": 90244555, "body": "@chux How about now? Can you check what&#39;s the double floating point limitation with this?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533148530, "post_id": 51639073, "comment_id": 90244714, "body": "<code>fmin(x, NAN)</code> is not specified by C to return <code>x</code>.  It is specified by the IEEE though.  Perhaps <code>unsigned a; ....  fabs((scanf(&quot;%d&quot;, &amp;a), a))</code>?"}, {"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533148598, "post_id": 51639073, "comment_id": 90244765, "body": "@chux <a href=\"https://www.nongnu.org/avr-libc/user-manual/group__avr__math.html\" rel=\"nofollow noreferrer\">nongnu.org/avr-libc/user-manual/group__avr__math.html</a> Was this reference bad? Anything involding abs wouldn&#39;t work for negative values. I could input positive infinity too, that&#39;s not a problem."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533148861, "post_id": 51639073, "comment_id": 90244878, "body": "@Winter 1) <a href=\"https://www.nongnu.org/avr-libc/user-manual/group__avr__math.html#ga577eee92b9969942de4d8d134d37c7b8\" rel=\"nofollow noreferrer\">Standard C library for AVR-GCC</a> is not the  Standard C library specification with does not specify the result of  <code>fmin(x, NAN)</code>.  2) What negative values do you speak of with <code>unsigned a;</code>?  IAC, OP did not specify range numeric range of the one variable."}, {"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533149081, "post_id": 51639073, "comment_id": 90244979, "body": "@chux Changed it for infinity then. Oh I see what you meant. It&#39;s quite brillant to do the fabs() on the unsigned but then print the unsigned as signed. I&#39;m not the one who came with the idea though :)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "edited": false, "score": 0, "creation_date": 1533149199, "post_id": 51639073, "comment_id": 90245030, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/177220/discussion-between-chux-and-winter\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "is_accepted": false, "score": 5, "last_activity_date": 1533149471, "last_edit_date": 1533149471, "creation_date": 1533144455, "answer_id": 51639073, "question_id": 51638803, "link": "https://stackoverflow.com/questions/51638803/adding-two-numbers-with-using-only-one-variable-in-c/51639073#51639073", "title": "Adding Two numbers with using only one variable in C", "body": "<p>Note that I've considered the question like a challenge or a puzzle. Do not consider this answer good C practice. Obviously the cleanest way to make a sum of 2 values from input is to use 2 variables. I still find the challenge interesting though.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main()\n{\n    int a;\n    printf(\"%g\", fmin((scanf(\"%d\", &amp;a), a), 1.0/0.0 + rand()) + fmin((scanf(\"%d\", &amp;a), a), 1.0/0.0 + rand()));\n    return 0;\n}\n</code></pre>\n\n<p>Works with negative values.</p>\n\n<p>I'm using the <a href=\"https://stackoverflow.com/q/52550/5771029\">comma operator</a> which executes both expressions but only return the second one. So <code>(scanf(\"%d\", &amp;a), a)</code> is like calling <code>scanf(\"%d\", &amp;a)</code> and returns <code>a</code>. I pass this result through a function (any function) as I want to prevent updating the value (to sum it with the new a). I have no idea if your compiler will call the left or right part of the big expression first but it doesn't matter as both are doing the same thing. Whichever executes first will be the first value from input.</p>\n\n<p><code>fmin(x, 1.0/0.0 + rand())</code> makes sure nothing is inlined by the compiler. 1.0/0.0 is Infinity and would never be returned in <code>fmin()</code> in our case. Compiler would inline this to <code>x</code> normally but adding <code>+ rand()</code> to Infinity (which is still Infinity) seems to prevent it.</p>\n\n<p>You can even do it by declaring \"0\" variable by using argc:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nint main(int a)\n{\n    printf(\"%g\", fmin((scanf(\"%d\", &amp;a), a), 1.0/0.0 + rand()) + fmin((scanf(\"%d\", &amp;a), a), 1.0/0.0 + rand()));\n    return 0;\n}\n</code></pre>\n\n<p>I've used this to test: <a href=\"https://www.onlinegdb.com/online_c_compiler\" rel=\"nofollow noreferrer\">https://www.onlinegdb.com/online_c_compiler</a></p>\n"}, {"comments": [{"owner": {"reputation": 189, "user_id": 7593652, "user_type": "registered", "profile_image": "https://graph.facebook.com/1708118269478259/picture?type=large", "display_name": "Ankush Rawat", "link": "https://stackoverflow.com/users/7593652/ankush-rawat"}, "edited": false, "score": 0, "creation_date": 1533147101, "post_id": 51639156, "comment_id": 90243898, "body": "Another way to do it is just create x as global variable, now create funtion to input the value and return the assigned value, then make x= function + function  Will solve it"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1533147662, "post_id": 51639156, "comment_id": 90244227, "body": "As there is no sequence point between <code>x*(scanf(&quot;%d&quot;,&amp;x))</code> and <code>x</code> in the addition, code does not insure the <code>+ x</code> happens with the first or second value of <code>x</code>. Thus not certain to properly generate the sum."}, {"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "edited": false, "score": 2, "creation_date": 1533148504, "post_id": 51639156, "comment_id": 90244699, "body": "Doesn&#39;t work for me, it gives me the double of the second input using this online compiler <a href=\"https://www.onlinegdb.com/online_c_compiler\" rel=\"nofollow noreferrer\">onlinegdb.com/online_c_compiler</a>"}, {"owner": {"reputation": 189, "user_id": 7593652, "user_type": "registered", "profile_image": "https://graph.facebook.com/1708118269478259/picture?type=large", "display_name": "Ankush Rawat", "link": "https://stackoverflow.com/users/7593652/ankush-rawat"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533175040, "post_id": 51639156, "comment_id": 90253023, "body": "C compiler executes from  right to left so I think that already solved what you said @chux"}, {"owner": {"reputation": 189, "user_id": 7593652, "user_type": "registered", "profile_image": "https://graph.facebook.com/1708118269478259/picture?type=large", "display_name": "Ankush Rawat", "link": "https://stackoverflow.com/users/7593652/ankush-rawat"}, "reply_to_user": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "edited": false, "score": 0, "creation_date": 1533176844, "post_id": 51639156, "comment_id": 90253388, "body": "@winter that is the case if you change the order in which I wrote the code, I just tried it in the online compiler and again it&#39;s working fine, try to copy paste my code"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1533180604, "post_id": 51639156, "comment_id": 90254106, "body": "@AnkushRawat &quot;C compiler executes from right to left&quot; may be so with the compiler and options you use, yet that is not required by the C spec.  There are various things that determine what must evaluate first (sequence points) and what may evaluate first. With <code>x*(scanf(&quot;%d&quot;,&amp;x))+x</code>, a compliant C compilation may access the 3 <code>x</code>&#39;s in  an order that fails to provide the desired functionality."}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1533320036, "post_id": 51639156, "comment_id": 90319328, "body": "@chux is correct: the result of this code is undefined by the C standard.  Therefore, it could crash, print the complete works of Shakespeare, or fail to terminate, and be compliant with the standard.  Avoid code like this in real work.  Avoid it like the plague.  Google &quot;C sequence points&quot; and learn something very valuable!"}], "tags": [], "owner": {"reputation": 189, "user_id": 7593652, "user_type": "registered", "profile_image": "https://graph.facebook.com/1708118269478259/picture?type=large", "display_name": "Ankush Rawat", "link": "https://stackoverflow.com/users/7593652/ankush-rawat"}, "is_accepted": false, "score": 1, "last_activity_date": 1533561165, "last_edit_date": 1533561165, "creation_date": 1533144779, "answer_id": 51639156, "question_id": 51638803, "link": "https://stackoverflow.com/questions/51638803/adding-two-numbers-with-using-only-one-variable-in-c/51639156#51639156", "title": "Adding Two numbers with using only one variable in C", "body": "<p>One  way to do it is.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint x;\n\nint enter(){\nscanf(\"%d\",&amp;x);\nreturn x;\n}     \n\nint main()\n{\n    x=enter()+enter();\n    print(\"sum of two number is %d\",x);\n    return 0;\n}\n</code></pre>\n\n<p>Another way to do it..</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{ \nint x;\nscanf(\"%d\",&amp;x);\nprintf(\"next no. \");\n x= x*(scanf(\"%d\",&amp;x))+x;\nprintf(\"%d\",x);\nreturn 0;\n}\n</code></pre>\n\n<p>Although the second one is not consistent, in some compiler it works perfectly and in some, it doesn't</p>\n"}, {"comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1533145356, "post_id": 51639260, "comment_id": 90242972, "body": "nah - too late.  We already have an array answer that doesn&#39;t need to be dynamic :)"}], "tags": [], "owner": {"reputation": 140, "user_id": 7686412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f40f26fd471e5b444ee89c8af5a938b?s=128&d=identicon&r=PG&f=1", "display_name": "mary", "link": "https://stackoverflow.com/users/7686412/mary"}, "is_accepted": false, "score": 1, "last_activity_date": 1533145209, "creation_date": 1533145209, "answer_id": 51639260, "question_id": 51638803, "link": "https://stackoverflow.com/questions/51638803/adding-two-numbers-with-using-only-one-variable-in-c/51639260#51639260", "title": "Adding Two numbers with using only one variable in C", "body": "<pre><code>int main(void) {\n    int *num = malloc(sizeof(int)*2);\n    scanf(\"%d %d\", num, num+1);\n    printf(\"%d\\n\", num[0] + (num[1]));\n}\n</code></pre>\n\n<ul>\n<li><strong>int *num = malloc(sizeof(int)*2);</strong> //two int space</li>\n<li><strong>scanf(\"%d %d\", num, num+1);</strong> // num (pos 0), num+1 (pos1)</li>\n<li>printf(\"%d\\n\", <strong>num[0] + (num[1])</strong>); //the sum of the positions</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533151971, "post_id": 51639318, "comment_id": 90246457, "body": "I like the <code>struct</code> idea.  Standard C library does have a standard paired <code>int</code> structure: <code>div_t</code> from <code>#include &lt;stdlib.h&gt;</code>."}], "tags": [], "owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "is_accepted": false, "score": 2, "last_activity_date": 1533145421, "creation_date": 1533145421, "answer_id": 51639318, "question_id": 51638803, "link": "https://stackoverflow.com/questions/51638803/adding-two-numbers-with-using-only-one-variable-in-c/51639318#51639318", "title": "Adding Two numbers with using only one variable in C", "body": "<p>OK, there's been quite a few interesting answers, but weirdly nobody has thought of the obvious way to store 2 ints in a single variable - <strong>structs</strong>:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\ntypedef _in struct {\n    a int\n    b int\n} inp;\n\nint main(void)\n{\n    inp input;\n    scanf(\"%d%d\",&amp;input.a,&amp;input.b);\n    printf(\"%d\",input.a+input.b);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533146807, "post_id": 51639395, "comment_id": 90243759, "body": "why DV? Any explanation"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1533147213, "post_id": 51639395, "comment_id": 90243965, "body": "NMDV, yet this obliges special input passed the 2 numbers like <code>&quot;123 456 x&quot;</code> or <code>&quot;123 456&quot; Signal EOF</code>.  With input <code>&quot;123 456\\n&quot;</code>, code does not return."}, {"owner": {"reputation": 2446, "user_id": 1532454, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aNEeA.jpg?s=128&g=1", "display_name": "Jeff Learman", "link": "https://stackoverflow.com/users/1532454/jeff-learman"}, "edited": false, "score": 0, "creation_date": 1533319769, "post_id": 51639395, "comment_id": 90319221, "body": "Only one variable, but multiple instances of the variable!  Still, way more fun than an array."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533326019, "post_id": 51639395, "comment_id": 90321789, "body": "of course - but array is another abstraction of multiple instance or temp storage on the stack when calling multiple time the same functions insidde onathe one - no miracles, intermediate results have to be store somewhere"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 1, "last_activity_date": 1533146917, "last_edit_date": 1533146917, "creation_date": 1533145727, "answer_id": 51639395, "question_id": 51638803, "link": "https://stackoverflow.com/questions/51638803/adding-two-numbers-with-using-only-one-variable-in-c/51639395#51639395", "title": "Adding Two numbers with using only one variable in C", "body": "<p>Only one variable - no tricks. As many numbers can be added as you want :)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint ScanAndAdd(void)\n{\n    int a;\n    if(scanf(\"%d\", &amp;a) != 1) return 0;\n    return a + ScanAndAdd();\n}\n\nint main()\n{\n    printf(\"%d\\n\", ScanAndAdd());\n\n    return 0;  /**/\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 5, "last_activity_date": 1533150151, "last_edit_date": 1533150151, "creation_date": 1533146489, "answer_id": 51639607, "question_id": 51638803, "link": "https://stackoverflow.com/questions/51638803/adding-two-numbers-with-using-only-one-variable-in-c/51639607#51639607", "title": "Adding Two numbers with using only one variable in C", "body": "<blockquote>\n  <p>Adding Two numbers with using only one variable in C</p>\n</blockquote>\n\n<p>Create a helper function with the 1 variable.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint scan_int(void) {\n  int a;\n  if (scanf(\"%d\", &amp;a) == 1) {\n    return a;\n  }\n  return 0;\n}\n\nint main(void) {\n  printf(\"Sum %d\\n\", scan_int() + scan_int());\n  return 0;\n}\n</code></pre>\n\n<p>Note that <code>scan_int() + scan_int()</code>, code could call either the left or the right <code>scan_int()</code> first (or in parallel).  Fortunately <code>+</code> is commutative, so it makes no difference here.</p>\n\n<p>The \"trick\" here is that there exist in sequence or in parallel, a <code>1st_call_scan_int::a</code> and <code>2nd_call_scan_int::a</code>.  Still only one variable in code.</p>\n"}, {"comments": [{"owner": {"reputation": 337, "user_id": 5358265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIQwd.png?s=128&g=1", "display_name": "Grant Sanders", "link": "https://stackoverflow.com/users/5358265/grant-sanders"}, "edited": false, "score": 0, "creation_date": 1533178198, "post_id": 51640902, "comment_id": 90253615, "body": "According to the standard, <code>2 * sizeof (int)</code> could be greater than <code>sizeof (double)</code>. Never in practice though."}], "tags": [], "owner": {"reputation": 36, "user_id": 10167526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HZqqZ.jpg?s=128&g=1", "display_name": "CaptainOfHacks", "link": "https://stackoverflow.com/users/10167526/captainofhacks"}, "is_accepted": false, "score": 0, "last_activity_date": 1533193144, "last_edit_date": 1533193144, "creation_date": 1533151469, "answer_id": 51640902, "question_id": 51638803, "link": "https://stackoverflow.com/questions/51638803/adding-two-numbers-with-using-only-one-variable-in-c/51640902#51640902", "title": "Adding Two numbers with using only one variable in C", "body": "<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    long long int buffer=0;\n    scanf(\"%d\",(int*)&amp;buffer);\n    scanf(\"%d\",(int *)&amp;buffer+1);\n    printf(\"\\nsum is %d\\n\",*((int*)&amp;buffer)+*((int*)&amp;buffer+1));\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533269096, "post_id": 51644610, "comment_id": 90293448, "body": "The 4 <code>void*</code> casts are not necessary here.  <code>(uint32_t*)(void*)&amp;a</code> can use <code>(uint32_t*)&amp;a</code>."}, {"owner": {"reputation": 337, "user_id": 5358265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIQwd.png?s=128&g=1", "display_name": "Grant Sanders", "link": "https://stackoverflow.com/users/5358265/grant-sanders"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533313794, "post_id": 51644610, "comment_id": 90316720, "body": "The <code>void*</code> casts are not necessary, but it fixes a warning certain compilers and linters give when casting between different types of pointers. I don&#39;t like warnings. I will edit my answer to make my reasoning clear."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533313954, "post_id": 51644610, "comment_id": 90316798, "body": "Hmmm, Do you have an example of your code the causes that warning posted?  I would not expect a linter  to warn here with <code>uint64_t a; ... (uint32_t*)&amp;a</code>."}, {"owner": {"reputation": 337, "user_id": 5358265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIQwd.png?s=128&g=1", "display_name": "Grant Sanders", "link": "https://stackoverflow.com/users/5358265/grant-sanders"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533340778, "post_id": 51644610, "comment_id": 90325719, "body": "It seems I was mistaken. I couldn&#39;t find a compiler or linter which complained about <code>uint64_t a; ... (uint32_t*)&amp;a</code>. The reason I thought they were necessary to silence a warning is that GCC warns about possible alignment issues when <code>-Wcast-align</code> is enabled and the casted-to type has a larger memory alignment requirement than the casted-from type. For example, <code>uint32_t foo; ... (uint64_t*)&amp;foo</code> causes GCC to complain about alignment (if <code>-Wcast-align</code> is on), but <code>uint64_t foo; ... (uint32_t*)&amp;foo</code> does not. I have added to my answer the code with this and other minor adjustments."}], "tags": [], "owner": {"reputation": 337, "user_id": 5358265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIQwd.png?s=128&g=1", "display_name": "Grant Sanders", "link": "https://stackoverflow.com/users/5358265/grant-sanders"}, "is_accepted": false, "score": 0, "last_activity_date": 1533339261, "last_edit_date": 1533339261, "creation_date": 1533176235, "answer_id": 51644610, "question_id": 51638803, "link": "https://stackoverflow.com/questions/51638803/adding-two-numbers-with-using-only-one-variable-in-c/51644610#51644610", "title": "Adding Two numbers with using only one variable in C", "body": "<p>Try this on for size. It uses fixed width C99 types to guarantee that memory alignment works as intended. It even does the 32-bit arithmetic in a <code>uint64_t</code> type to prevent overflow issues. This will work with any of the other fixed-width integer types, signed or unsigned, with trivial modification.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;inttypes.h&gt;\n\nint main (void)\n{\n    uint64_t a;\n\n    scanf (\"%\" SCNu32 \"%\" SCNu32, (uint32_t*)&amp;a, (uint32_t*)&amp;a + 1);\n\n    printf (\"%\" PRIu64 \"\\n\", (uint64_t)((uint32_t*)&amp;a)[0] +\n        ((uint32_t*)&amp;a)[1]);\n}\n</code></pre>\n\n<p>The above code was modified from my original answer, seen below. I removed the <code>void*</code> cast in <code>(uint32_t*)(void*)&amp;a</code> because it was unnecessary. I also cleaned up the <code>scanf</code> arguments to increase readability, and added a new line to the end of the <code>printf</code> format argument.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;inttypes.h&gt;\n\nint main (void)\n{\n    uint64_t a;\n\n    scanf (\"%\" SCNu32 \"%\" SCNu32,\n        &amp;((uint32_t*)(void*)&amp;a)[0], &amp;((uint32_t*)(void*)&amp;a)[1]);\n\n    printf (\"%\" PRIu64, (uint64_t)((uint32_t*)(void*)&amp;a)[0] +\n        ((uint32_t*)(void*)&amp;a)[1]);\n}\n</code></pre>\n"}], "owner": {"reputation": 142, "user_id": 9422872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f736a48db418bac162a3bc95d9582f?s=128&d=identicon&r=PG", "display_name": "Uttam Manher", "link": "https://stackoverflow.com/users/9422872/uttam-manher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4781, "favorite_count": 1, "answer_count": 10, "score": 7, "last_activity_date": 1586344860, "creation_date": 1533143313, "last_edit_date": 1533143492, "question_id": 51638803, "link": "https://stackoverflow.com/questions/51638803/adding-two-numbers-with-using-only-one-variable-in-c", "title": "Adding Two numbers with using only one variable in C", "body": "<p>I was trying to create a program that inputs two number and outputs their sum. For this I must have to use two variables. I was just curious whether this can be done by using only one variable.<br>\nNote : user has to input two numbers.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\nint a, b;\nscanf(\"%d%d\",&amp;a,&amp;b);\nprintf(\"%d\",(a+b));\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "mmap"], "comments": [{"owner": {"reputation": 3469, "user_id": 2574612, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4b008a3d7ce933943329e84c1dbe6db7?s=128&d=identicon&r=PG", "display_name": "Nicholas Pipitone", "link": "https://stackoverflow.com/users/2574612/nicholas-pipitone"}, "edited": false, "score": 0, "creation_date": 1533144448, "post_id": 51638604, "comment_id": 90242534, "body": "Are you saying that you&#39;re reading a file, and then writing it to another 64MB file? Or just reading from a file, and allocating 64MB to it? If it&#39;s the latter, then I think you&#39;re handling the memory wrong from a higher level, you shouldn&#39;t need zeroes past the file size (Just have a variable for the size)."}, {"owner": {"reputation": 21, "user_id": 5003122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4c6bb099c1cd21aa7085da9b118f0c?s=128&d=identicon&r=PG&f=1", "display_name": "tomato", "link": "https://stackoverflow.com/users/5003122/tomato"}, "reply_to_user": {"reputation": 3469, "user_id": 2574612, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4b008a3d7ce933943329e84c1dbe6db7?s=128&d=identicon&r=PG", "display_name": "Nicholas Pipitone", "link": "https://stackoverflow.com/users/2574612/nicholas-pipitone"}, "edited": false, "score": 0, "creation_date": 1533175715, "post_id": 51638604, "comment_id": 90253154, "body": "@NicholasPipitone hi\uff0cactually I am using a group of 64MB blocks to generate erasure coding blocks"}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1533183951, "post_id": 51638604, "comment_id": 90254871, "body": "Is your question really relevant to both C and C++? Just because C++ is based on C doesn&#39;t make the C tag relevant in a C++ question or vice-versa."}], "answers": [{"comments": [{"owner": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 0, "creation_date": 1533177009, "post_id": 51644659, "comment_id": 90253412, "body": "I did not know you could do this.. I don&#39;t need it, I was just reading out of curiosity.. but this is kind of neat :)."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 1, "creation_date": 1533177718, "post_id": 51644659, "comment_id": 90253544, "body": "@Rob: I discovered it when I was trying to do something much more complicated; map in a few thousand files (all a multiple of the page size) as if they were a single contiguous block of data in memory. I could have just <code>malloc</code>ed and read in each file one by one, but the data sizes I was dealing with were huge, and reads were random, so spending a minute or more populating a buffer was a pain; mapping a single block equal to the combined file sizes, then performing a per-file remap using <code>MAP_FIXED</code> to map each file immediately after the last, saved over a minute of disk I/O at startup."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 0, "creation_date": 1533177853, "post_id": 51644659, "comment_id": 90253567, "body": "The other advantage to <code>mmap</code>ing in that case was when the system came under memory pressure; if I&#39;d <code>malloc</code>ed a buffer and populated it via <code>read</code>s, when the system was under RAM pressure and the OS needed to swap, it would have to write the <code>malloc</code>ed pages to the swap file (at a time when it&#39;s definitionally under load, and disk I/O is at a premium). With read-only shared maps of the original files, it can just drop the pages without writing anything, reloading from disk later if the data is needed."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 0, "creation_date": 1533178075, "post_id": 51644659, "comment_id": 90253598, "body": "I second the comment by @Rob."}, {"owner": {"reputation": 2432, "user_id": 793716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06452b91c9651f991d26d28ba873e760?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/793716/rob"}, "edited": false, "score": 0, "creation_date": 1533216973, "post_id": 51644659, "comment_id": 90273492, "body": "@ShadowRanger I have used mmap many times before :) just not the mapping of one file over another, and definitely never though of the /dev/zero trick with anonymous maps I never tried it I always had a HUGE file or another so it never occurred to me:) love it."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 4, "last_activity_date": 1533178390, "last_edit_date": 1533178390, "creation_date": 1533176881, "answer_id": 51644659, "question_id": 51638604, "link": "https://stackoverflow.com/questions/51638604/mmap-file-with-larger-fixed-length-with-zero-padding/51644659#51644659", "title": "mmap file with larger fixed length with zero padding?", "body": "<p>This is one of the few reasonable use cases for <code>MAP_FIXED</code>, to remap part of an existing mapping to use a new backing file.</p>\n\n<p>A simple solution here is to unconditionally <code>mmap</code> 64 MB of anonymous memory (or explicitly mmap <code>/dev/zero</code>),  <em>without</em> <code>MAP_FIXED</code> and store the resulting pointer.</p>\n\n<p>Next, <code>mmap</code> 64 MB or your actual file size (whichever is less) of your actual file, passing in the result of the anonymous/zero <code>mmap</code> and passing the <code>MAP_FIXED</code> flag. The pages corresponding to your file will no longer be anonymous/zero mapped, and instead will be backed by your file's data; the remaining pages will be backed by the anonymous/zero pages.</p>\n\n<p>When you're done, a single <code>munmap</code> call will unmap all 64 MB at once (you don't need to separately unmap the real file pages and the zero backed pages).</p>\n\n<p>Extremely simple example (no error checking, please add it yourself):</p>\n\n<pre><code>// Reserve 64 MB of contiguous addresses; anonymous mappings are always zero backed\nvoid *mapping = mmap(NULL, 64 * 1024 * 1024, PROT_READ, MAP_PRIVATE | MAP_ANONYMOUS, -1, 0);\n\n// Open file and check size\nstruct stat sb;\nint fd = open(myfilename, O_RDONLY);\nfstat(fd, &amp;sb);\n// Use smaller of file size or 64 MB\nsize_t filemapsize = sb.st_size &gt; 64 * 1024 * 1024 ? 64 * 1024 * 1024 : sb.st_size;\n// Remap up to 64 MB of pages, replacing some or all of original anonymous pages\nmapping = mmap(mapping, filemapsize, PROT_READ, MAP_SHARED | MAP_FIXED, fd, 0);\nclose(fd);\n\n// ... do stuff with mapping ...\nmunmap(mapping, 64 * 1024 * 1024);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5003122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4c6bb099c1cd21aa7085da9b118f0c?s=128&d=identicon&r=PG&f=1", "display_name": "tomato", "link": "https://stackoverflow.com/users/5003122/tomato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "accepted_answer_id": 51644659, "answer_count": 1, "score": 0, "last_activity_date": 1533184816, "creation_date": 1533142495, "last_edit_date": 1533184816, "question_id": 51638604, "link": "https://stackoverflow.com/questions/51638604/mmap-file-with-larger-fixed-length-with-zero-padding", "title": "mmap file with larger fixed length with zero padding?", "body": "<p>I want to use <code>mmap()</code> to read a file with fixed length (eg. 64MB), but there also some files &lt; 64MB.</p>\n\n<p>I mmap this files (&lt;64MB, eg.30MB) with length = 64MB, when read file data beyond file size(30MB - 64MB), the program got a <code>bus-error</code>.</p>\n\n<p>I want mmap these files with fixed length, and read 0x00 when pointer beyond file size. How to do that?</p>\n\n<p>One method I can think is <code>ftruncate</code> file first, and <code>ftruncate</code> back to ori size, but I don't think this method is perfect.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1533140648, "post_id": 51637941, "comment_id": 90240537, "body": "Close-voter: Why is it unclear? I think it lacks <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, as call to <code>free()</code>  is missing altogether."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1533140732, "post_id": 51637941, "comment_id": 90240595, "body": "Not my DV: but variables named <code>A</code>, <code>n1</code>, <code>B</code>, <code>J</code>, <code>t</code> with no calling context make it hard to follow the code. In a month&#39;s time you won&#39;t remember what they mean either, so please use meaningful names!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1533142430, "post_id": 51637941, "comment_id": 90241554, "body": "An array is not a matrix"}, {"owner": {"reputation": 1, "user_id": 9979810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8344b977533c229a4026b35ddc84af32?s=128&d=identicon&r=PG&f=1", "display_name": "renjith prasad k", "link": "https://stackoverflow.com/users/9979810/renjith-prasad-k"}, "edited": false, "score": 0, "creation_date": 1533315964, "post_id": 51637941, "comment_id": 90317625, "body": "thank you so much!"}, {"owner": {"reputation": 1, "user_id": 9979810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8344b977533c229a4026b35ddc84af32?s=128&d=identicon&r=PG&f=1", "display_name": "renjith prasad k", "link": "https://stackoverflow.com/users/9979810/renjith-prasad-k"}, "edited": false, "score": 0, "creation_date": 1533316982, "post_id": 51637941, "comment_id": 90318080, "body": "I am a complete beginner.Hence all these mistakes. Will remember all these next time when i code."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9979810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8344b977533c229a4026b35ddc84af32?s=128&d=identicon&r=PG&f=1", "display_name": "renjith prasad k", "link": "https://stackoverflow.com/users/9979810/renjith-prasad-k"}, "edited": false, "score": 0, "creation_date": 1533316940, "post_id": 51638242, "comment_id": 90318054, "body": "Thank you so much!"}], "tags": [], "owner": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "is_accepted": false, "score": 0, "last_activity_date": 1533141125, "creation_date": 1533141125, "answer_id": 51638242, "question_id": 51637941, "link": "https://stackoverflow.com/questions/51637941/run-time-error-for-rotation-of-array/51638242#51638242", "title": "run time error for rotation of array", "body": "<p>You are looping too much in your second for loop and writing past the end of your allocated output array (because you are always incrementing J). So change</p>\n\n<pre><code>   if((i+B)&gt;=n1)\n   {\n      for(i=t;i&lt;n1;i++)\n      {\n         ret[J]=A[i];\n         J++;\n\n      }\n      for(i=0;i&lt;n1;i++)\n      {\n         ret[J]=A[i];\n         J++;\n\n      }\n      return ret;\n   }\n</code></pre>\n\n<p>to be:</p>\n\n<pre><code>   if((i+B)&gt;=n1)\n   {\n      for(i=t;i&lt;n1;i++)\n      {\n         ret[J]=A[i];\n         J++;\n\n      }\n      for(i=0;i&lt;t;i++) // ichanged the stop condition here from i&lt;n1 to i&lt;t\n      {\n         ret[J]=A[i];\n         J++;\n\n      }\n      return ret;\n   }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 0, "last_activity_date": 1533143515, "creation_date": 1533143515, "answer_id": 51638840, "question_id": 51637941, "link": "https://stackoverflow.com/questions/51637941/run-time-error-for-rotation-of-array/51638840#51638840", "title": "run time error for rotation of array", "body": "<p>Your code seems longer than necessary. This should be enough:</p>\n\n<pre><code>int * rotate(const int * A, int steps, int len)\n{\n    int *ret = malloc(steps * sizeof *ret);\n    int i;\n    for(i=0; i&lt;len; i++) {\n        int pos = i-steps;\n        if(pos &lt; 0)\n            pos+=len;\n        ret[pos]=A[i];\n    }\n    return ret;\n}\n</code></pre>\n\n<p>I removed one parameter, since all you did with it was to assign it to the value of another parameter.</p>\n"}], "owner": {"reputation": 1, "user_id": 9979810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8344b977533c229a4026b35ddc84af32?s=128&d=identicon&r=PG&f=1", "display_name": "renjith prasad k", "link": "https://stackoverflow.com/users/9979810/renjith-prasad-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": -7, "last_activity_date": 1533143515, "creation_date": 1533140040, "last_edit_date": 1533142388, "question_id": 51637941, "link": "https://stackoverflow.com/questions/51637941/run-time-error-for-rotation-of-array", "title": "run time error for rotation of array", "body": "<p>The following code is supposed to rotate the array A by B positions.</p>\n\n<p>So, for example,</p>\n\n<p>A : [1 2 3 4 5 6]<br>\nB : 1</p>\n\n<p>The output :</p>\n\n<p>[2 3 4 5 6 1]</p>\n\n<p>my code is</p>\n\n<p>(im just a beginner hence such a complicated code)</p>\n\n<pre><code>int* rotateArray(int* A, int n1, int B, int *len)\n{\n   int *ret = (int *)malloc(n1 * sizeof(int));\n   *len = n1;\n   int i=0;\n   int J=0;\n   int t=0;\n   t=(i+B)%n1;\n   if((i+B)&gt;=n1)\n   {\n      for(i=t;i&lt;n1;i++)\n      {\n         ret[J]=A[i];\n         J++;\n\n      }\n      for(i=0;i&lt;n1;i++)\n      {\n         ret[J]=A[i];\n         J++;\n\n      }\n      return ret;\n   }\n   else\n   {\n      J=0;\n      for (i = 0; i &lt; n1; i++) \n      {\n         if((i+B)&lt;n1)\n         {\n            ret[i] = A[i + B];\n         }\n         else\n         {\n            ret[i]=A[J];\n            J++;\n         }\n      }\n      return ret;\n   }\n}\n</code></pre>\n\n<p>i am getting run time error\nRuntime Error. Your submission stopped because of a runtime error. ex: division by zero, array index out of bounds, uncaught exception You can try testing your code with custom input and try putting debug statements in your code.</p>\n\n<p><strong>* Error in `./solution': free(): invalid next size (fast): 0x00000000009640a0 *</strong></p>\n\n<p>Aborted</p>\n\n<p>Your submission encountered runtime error for the following input:</p>\n\n<p>A : [ 14, 5, 14, 34, 42, 63, 17, 25, 39, 61, 97, 55, 33, 96, 62, 32, 98, 77, 35 ]</p>\n\n<p>B : 56</p>\n\n<p>The expected output for this testcase is:</p>\n\n<p>35 14 5 14 34 42 63 17 25 39 61 97 55 33 96 62 32 98 77 </p>\n\n<p>i have no clue why !\nall my test cases are correct</p>\n"}, {"tags": ["c", "gtk", "glib"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1533139842, "post_id": 51637590, "comment_id": 90240062, "body": "Did you find <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html\" rel=\"nofollow noreferrer\">The Main Event Loop</a>? There are some <a href=\"http://devlib.symbian.slions.net/s3/GUID-7FD05006-09C1-4EF4-A2EB-AD98C2FA8866.html\" rel=\"nofollow noreferrer\">code examples here</a>."}, {"owner": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 0, "creation_date": 1533307938, "post_id": 51637590, "comment_id": 90313410, "body": "<a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY</a> are you sure you have to connect to glib main loop events?"}, {"owner": {"reputation": 11, "user_id": 10166773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66db2437f9075d02be3037a0bab36b63?s=128&d=identicon&r=PG&f=1", "display_name": "Wutus", "link": "https://stackoverflow.com/users/10166773/wutus"}, "edited": false, "score": 0, "creation_date": 1533553351, "post_id": 51637590, "comment_id": 90372895, "body": "Not necessarily to be frank. However it seemed the only way to handle incoming events in main loop."}, {"owner": {"reputation": 1896, "user_id": 4226702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-siukF5ObSUs/AAAAAAAAAAI/AAAAAAAAAEc/Qww5nEqBNDw/photo.jpg?sz=128", "display_name": "Alexander Dmitriev", "link": "https://stackoverflow.com/users/4226702/alexander-dmitriev"}, "edited": false, "score": 0, "creation_date": 1533558722, "post_id": 51637590, "comment_id": 90376187, "body": "What kind of events you want to handle?"}, {"owner": {"reputation": 11, "user_id": 10166773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66db2437f9075d02be3037a0bab36b63?s=128&d=identicon&r=PG&f=1", "display_name": "Wutus", "link": "https://stackoverflow.com/users/10166773/wutus"}, "edited": false, "score": 0, "creation_date": 1533565280, "post_id": 51637590, "comment_id": 90380662, "body": "I wondered about timer and listening on socket. In code I was provided with there is a mechanism based on conditional variable, though I don&#39;t understand how it works, like there are no event that application is listening to. However, I found one handler that is added through strange xml files and that was the handler that I was looking for (I asked the question because I couldn&#39;t find any connection between modules I got)."}], "answers": [{"tags": [], "owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "is_accepted": false, "score": 0, "last_activity_date": 1533832485, "creation_date": 1533832485, "answer_id": 51772048, "question_id": 51637590, "link": "https://stackoverflow.com/questions/51637590/glib-main-loop-events/51772048#51772048", "title": "Glib main loop events", "body": "<p>For timers use <a href=\"https://developer.gnome.org/glib/stable/glib-The-Main-Event-Loop.html#g-timeout-add\" rel=\"nofollow noreferrer\"><code>g_timeout_add</code></a> if you don't have hard synchronization requirements. To listen on sockets, give a look to <a href=\"https://developer.gnome.org/glib/stable/glib-IO-Channels.html\" rel=\"nofollow noreferrer\">GIOChannel</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 10166773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66db2437f9075d02be3037a0bab36b63?s=128&d=identicon&r=PG&f=1", "display_name": "Wutus", "link": "https://stackoverflow.com/users/10166773/wutus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 519, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533832485, "creation_date": 1533138812, "question_id": 51637590, "link": "https://stackoverflow.com/questions/51637590/glib-main-loop-events", "title": "Glib main loop events", "body": "<p>Could anyone provide me with way to connect to glib main loop events? I see no well-written tutorials about it nor description in documentation. I've never done it before and didn't use glib in any way. Is it even event-oriented or more like WinAPI?<br>\nWould be grateful for answers.</p>\n"}, {"tags": ["c", "dev-c++"], "comments": [{"owner": {"reputation": 710, "user_id": 5404647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-jjmTKjxjCFI/AAAAAAAAAAI/AAAAAAAAALY/4e9KpLVF_MQ/photo.jpg?sz=128", "display_name": "Norhther", "link": "https://stackoverflow.com/users/5404647/norhther"}, "edited": false, "score": 2, "creation_date": 1533137822, "post_id": 51637242, "comment_id": 90238909, "body": "See <a href=\"https://stackoverflow.com/questions/1726302/removing-spaces-from-a-string-in-c\" title=\"removing spaces from a string in c\">stackoverflow.com/questions/1726302/&hellip;</a>"}, {"owner": {"reputation": 1114, "user_id": 10111567, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Miguel", "link": "https://stackoverflow.com/users/10111567/miguel"}, "edited": false, "score": 2, "creation_date": 1533137876, "post_id": 51637242, "comment_id": 90238938, "body": "You can copy it to a new string and jump all the &#39; &#39; caracters"}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 0, "creation_date": 1533138118, "post_id": 51637242, "comment_id": 90239099, "body": "You can move all characters one or more indexes to the left and terminate the end of the String with <code>&#47;0</code>. Another possibility would be that you copy all the <code>chars</code> and the single blanks to another array (you don&#39;t copy the other unneccessary blanks)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1533138794, "post_id": 51637242, "comment_id": 90239494, "body": "If the output required is <code>Ahmed is not here</code> with &quot;only one blank&quot; the duplicate does not solve it, but gives clues as to how to go about it, which in your case means remembering the &quot;previous character&quot;. Then if the present character is a space, and the previous character is a space, you can ignore it."}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1533139397, "post_id": 51637668, "comment_id": 90239825, "body": "(1) <b>Never</b> use <code>gets</code>. It&#39;s so vile it has been removed from the standard library. The only place it remains is the nightmares of prior usage. (2) This is doable without a temporary buffer, and likely intended by whatever vague instructions the OP has received. The challenge is to make that reality."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1533141276, "post_id": 51637668, "comment_id": 90240916, "body": "<code>text[temp] == &#39; &#39; &amp;&amp; text[temp] != &#39;\\0&#39;</code> is curious.  Why not just <code>text[temp] == &#39; &#39;</code>?    I suspect a coding error here."}], "tags": [], "owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "is_accepted": false, "score": 0, "last_activity_date": 1533139086, "creation_date": 1533139086, "answer_id": 51637668, "question_id": 51637242, "link": "https://stackoverflow.com/questions/51637242/removing-all-the-blank-spaces-from-the-string-in-c-language/51637668#51637668", "title": "Removing all the blank spaces from the string in c language", "body": "<p>This is a possible solution which I have found, in this code snippet below <code>text</code>is your <code>s</code>and <code>blanks</code> is your <code>destination array</code> which will be filled with the entire String but without the multiple blanks.</p>\n\n<p><strong>Code snippet</strong>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n   char text[1000], blank[1000];\n   int c = 0, d = 0;\n\n   printf(\"Enter your text\"); //Ahmed     is   not   here\n   gets(text);\n\n   while (text[c] != '\\0') {\n      if (text[c] == ' ') {\n         int temp = c + 1;\n         if (text[temp] != '\\0') {\n            while (text[temp] == ' ' &amp;&amp; text[temp] != '\\0') {\n               if (text[temp] == ' ') {\n                  c++;\n               }  \n               temp++;\n            }\n         }\n      }\n      blank[d] = text[c];\n      c++;\n      d++;\n   }\n\n   blank[d] = '\\0';\n\n   printf(\"Text after removing blanks\\n%s\\n\", blank);\n\n   return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1533140360, "post_id": 51637837, "comment_id": 90240366, "body": "Note that this removes a single leading space from a string . . . if that was required! A single leading space would be unnecessary but wasn&#39;t mentioned."}, {"owner": {"reputation": 908, "user_id": 3292279, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VX393.jpg?s=128&g=1", "display_name": "Alex Johnson", "link": "https://stackoverflow.com/users/3292279/alex-johnson"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1533140426, "post_id": 51637837, "comment_id": 90240410, "body": "@WeatherVane Good catch. I can&#39;t think of when I&#39;d ever want to lead a string with a space, but maybe OP&#39;s requirements are different."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1533142054, "post_id": 51637837, "comment_id": 90241347, "body": "in case anyone wants it, same concept but using pointers and retaining a single leading space if presented with one or more <a href=\"https://ideone.com/g9Mdx6\" rel=\"nofollow noreferrer\">can be found here</a>."}], "tags": [], "owner": {"reputation": 908, "user_id": 3292279, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VX393.jpg?s=128&g=1", "display_name": "Alex Johnson", "link": "https://stackoverflow.com/users/3292279/alex-johnson"}, "is_accepted": false, "score": 1, "last_activity_date": 1533141423, "last_edit_date": 1533141423, "creation_date": 1533139684, "answer_id": 51637837, "question_id": 51637242, "link": "https://stackoverflow.com/questions/51637242/removing-all-the-blank-spaces-from-the-string-in-c-language/51637837#51637837", "title": "Removing all the blank spaces from the string in c language", "body": "<p>There's <a href=\"https://stackoverflow.com/questions/17770202/remove-extra-whitespace-from-a-string-in-c\">another answer</a> already on here that solves your problem. Here it is, co-opted into your application.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#include &lt;ctype.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid stripExtraSpaces(char* str) {\n  int i, x;\n  for (i=x=0; str[i]; ++i) {\n    if (!isspace(str[i]) || (i &gt; 0 &amp;&amp; !isspace(str[i-1]))) {\n      str[x++] = str[i];\n    }\n  }\n  str[x] = '\\0';\n}\n\nint main()\n{\n  char s[] =  \"Ahmed     is   not   here\";\n  stripExtraSpaces(s);\n  puts(s);\n}\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>The basic strategy is to iterate over each character in string, make sure it's not a space and that the character before it is not a space either, and then move to the next character. This skips duplicate spaces and only leaves single spaces in the string.</p>\n\n<p><strong>Note</strong></p>\n\n<p>As pointed out by WeatherVane below, this will also remove a single leading space. That may or may not be what you're looking for.</p>\n"}], "owner": {"reputation": 29, "user_id": 10114092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gDgVH.jpg?s=128&g=1", "display_name": "Muhammad Ahmed", "link": "https://stackoverflow.com/users/10114092/muhammad-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "closed_date": 1533140958, "answer_count": 2, "score": 1, "last_activity_date": 1533142337, "creation_date": 1533137620, "last_edit_date": 1533142337, "question_id": 51637242, "link": "https://stackoverflow.com/questions/51637242/removing-all-the-blank-spaces-from-the-string-in-c-language", "closed_reason": "Duplicate", "title": "Removing all the blank spaces from the string in c language", "body": "<p>I'm trying to remove all the spaces in the string. For example if the string has two spaces then it will reduce the two spaces to only one space.</p>\n\n<p>The code which I'm trying is given below:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nmain()\n{\n    char s[] =  \"Ahmed     is   not   here\";\n    int i,k,si = 0,n = 0,ln;\n    ln = strlen(s);\n    for(i=0;i&lt;ln;i++)\n    {\n        n = s[i];\n        if(n == 32)\n        {\n            si++;\n            if(si&gt;1)\n            {\n            s[i] = '-';\n            si = 0; \n            }\n\n        }\n\n    }\n\n    puts(s);\n}\n</code></pre>\n\n<p>The problem is: I don't know how to remove that empty space so i'm replacing it with \"-\". Also, the code will delete the single spaces too. Please somebody correct my code and tell me where I was wrong.</p>\n"}, {"tags": ["c", "bloomberg", "blpapi"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1533140668, "post_id": 51637232, "comment_id": 90240553, "body": "The <a href=\"http://bloomberg.github.io/blpapi-docs/cpp/3.9/files.html\" rel=\"nofollow noreferrer\">header files</a> declare a bunch of functions with C linkage alongside the various classes.  They appear to be intended for use from both C and C++, so I would expect that both languages would be supported by the same DLLs, or at least that those supporting C are a subset of those supporting C++.  By all appearances, however, Bloomberg&#39;s claim to support C is a bit vacuous, at the very least in the sense that support requires documentation, which does indeed seem to be lacking."}], "owner": {"reputation": 67, "user_id": 9890452, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aaLe1I_Esys/AAAAAAAAAAI/AAAAAAAACrE/w22lVql_Msw/photo.jpg?sz=128", "display_name": "Ben Yang", "link": "https://stackoverflow.com/users/9890452/ben-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1533137590, "creation_date": 1533137590, "question_id": 51637232, "link": "https://stackoverflow.com/questions/51637232/accessing-the-c-interface-from-the-c-c-blpapi-sdk", "title": "Accessing the C Interface from the C/C++ BLPAPI SDK", "body": "<p>I'm trying to use the Bloomberg API with C instead of C++. However, there doesn't seem to be any documentation online regarding this usage, aside from a sentence in the Developer's Guide on pg.78:</p>\n\n<p>\"... while the C interface provides a C-style version\nof the object model.\"</p>\n\n<p>I can't find any evidence of a C Interface in the C/C++ SDK download. There are some DLLs in the /lib folder though; are these DLL files the C Interface?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 406, "user_id": 10089715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2f9a04f650d5df482d9b231c4cbe8b8?s=128&d=identicon&r=PG&f=1", "display_name": "K. Dackow", "link": "https://stackoverflow.com/users/10089715/k-dackow"}, "edited": false, "score": 0, "creation_date": 1533136710, "post_id": 51636896, "comment_id": 90238152, "body": "<a href=\"https://stackoverflow.com/questions/4641476/using-dynamic-memory-allocation-for-arrays\" title=\"using dynamic memory allocation for arrays\">stackoverflow.com/questions/4641476/&hellip;</a>"}, {"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 1, "creation_date": 1533136718, "post_id": 51636896, "comment_id": 90238158, "body": "You just have to call free on the pointer you saved, i.e. <code>free(todos);</code>."}, {"owner": {"reputation": 406, "user_id": 10089715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2f9a04f650d5df482d9b231c4cbe8b8?s=128&d=identicon&r=PG&f=1", "display_name": "K. Dackow", "link": "https://stackoverflow.com/users/10089715/k-dackow"}, "edited": false, "score": 0, "creation_date": 1533136719, "post_id": 51636896, "comment_id": 90238159, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4641476/using-dynamic-memory-allocation-for-arrays\">Using Dynamic Memory allocation for arrays</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533141776, "post_id": 51636896, "comment_id": 90241188, "body": "Detail: &quot;free the <code>todos</code> array&quot; --&gt; <code>todos</code> is a pointer, not an <i>array</i>.  <code>free(todos);</code> frees the allocated memory pointer to by <code>todos</code>."}], "answers": [{"comments": [{"owner": {"reputation": 331, "user_id": 2403221, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70302cf1ca6bc3128bf823e5de3b8efc?s=128&d=identicon&r=PG", "display_name": "user2403221", "link": "https://stackoverflow.com/users/2403221/user2403221"}, "edited": false, "score": 0, "creation_date": 1533136906, "post_id": 51636944, "comment_id": 90238298, "body": "Thanks for your quick response. So if I call free like so: free(todos); it will free the whole block of memory for all my todo structs right?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 331, "user_id": 2403221, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70302cf1ca6bc3128bf823e5de3b8efc?s=128&d=identicon&r=PG", "display_name": "user2403221", "link": "https://stackoverflow.com/users/2403221/user2403221"}, "edited": false, "score": 2, "creation_date": 1533136962, "post_id": 51636944, "comment_id": 90238343, "body": "@user2403221 yes, that is an accurate."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 5, "last_activity_date": 1533136743, "creation_date": 1533136743, "answer_id": 51636944, "question_id": 51636896, "link": "https://stackoverflow.com/questions/51636896/allocating-array-on-heap-in-c/51636944#51636944", "title": "Allocating array on heap in C", "body": "<p>You have allocated <em>one single block</em> of memory for <em>all</em> your <code>Todo</code> structures. You can not free a single element. Just like you should not free elements of a non-heap allocated array.</p>\n\n<p>Each call to <code>malloc</code> (or <code>calloc</code>) should be matched by a <em>single</em> call to <code>free</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 2, "last_activity_date": 1533137549, "creation_date": 1533137549, "answer_id": 51637212, "question_id": 51636896, "link": "https://stackoverflow.com/questions/51636896/allocating-array-on-heap-in-c/51637212#51637212", "title": "Allocating array on heap in C", "body": "<p>A little bit of background to <a href=\"https://stackoverflow.com/users/440558/some-programmer-dude\">Some programmer dude</a>'s <a href=\"https://stackoverflow.com/a/51636944/1312382\">answer</a></p>\n\n<p>C11 standard, 7.22.3.3 \"The <code>free</code> function\", paragraph 2:</p>\n\n<blockquote>\n  <p>The <code>free</code> function causes the space pointed to by <code>ptr</code> to be deallocated, that is, made available for further allocation. If <code>ptr</code> is a null pointer, no action occurs. Otherwise, if the argument <strong>does not match a pointer earlier returned by a memory management function</strong>, or if the space has been deallocated by a call to free or realloc, <strong>the behavior is undefined</strong>.</p>\n</blockquote>\n\n<p>[emphasis by me]</p>\n\n<p>Background (second level...) is that typically, you did not only receive the memory starting at the pointer, but additionally there is some kind of (machine/OS specific) control block right before the pointer's address that is needed to free the memory again.</p>\n\n<p>You might try to peek at this control block by reading some bytes right before the pointer (just out of curiosity), but be aware that this actually is <em>undefined behaviour</em> as well (so don't <strong>ever</strong> do this in production code!) and might lead to your programme crashing.</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1533282097, "creation_date": 1533282097, "answer_id": 51667610, "question_id": 51636896, "link": "https://stackoverflow.com/questions/51636896/allocating-array-on-heap-in-c/51667610#51667610", "title": "Allocating array on heap in C", "body": "<p>As a reference, always that you do:</p>\n\n<pre><code>WhateverTypeInTheWorld *var1 = malloc(whateveryouwanttocompletearray);\n</code></pre>\n\n<p>then, you have to do</p>\n\n<pre><code>free(var1);  /* use the same value you received from malloc() */\n</code></pre>\n\n<p>to return the memory back... as you did only one <code>malloc()</code>, you can do only one <code>free()</code> and pass to it <em>the same pointer</em> you got from <code>malloc()</code>.</p>\n\n<p>When you write:</p>\n\n<pre><code>free(&amp;todos[i].i);\n</code></pre>\n\n<p>you are passing free the <code>i-</code>esim element field <code>i</code>'s address, and not the pointer you received from <code>malloc()</code>.  Probably you understood that you can free part of the memory you received... but it doesn't work that way... you get the memory in chunks, and you have to return it in those same chunks you received from malloc.</p>\n"}], "owner": {"reputation": 331, "user_id": 2403221, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/70302cf1ca6bc3128bf823e5de3b8efc?s=128&d=identicon&r=PG", "display_name": "user2403221", "link": "https://stackoverflow.com/users/2403221/user2403221"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 0, "accepted_answer_id": 51636944, "answer_count": 3, "score": 1, "last_activity_date": 1533282097, "creation_date": 1533136582, "question_id": 51636896, "link": "https://stackoverflow.com/questions/51636896/allocating-array-on-heap-in-c", "title": "Allocating array on heap in C", "body": "<p>I'm allocating an array of of \"Todo\" structs on the heap like so:</p>\n\n<pre><code>struct Todo *todos = malloc(n * sizeof(*todos));\n</code></pre>\n\n<p>My understanding is that I have now allocated memory for all of my n Todo structs. So if I want to save some values I can just do for example:</p>\n\n<pre><code>todos[i].id = 1;\n</code></pre>\n\n<p>The problem now is that if I try to free that memory using <code>free(&amp;todos[i]);</code> I get an error  telling me that I haven't allocated that pointer. </p>\n\n<p>My question is now, do I just need to free the <code>todos</code> array and not every element on its own?</p>\n"}, {"tags": ["c", "macos", "gcc"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1533135920, "post_id": 51636634, "comment_id": 90237633, "body": "What command does not run? Try <code>gcc</code> instead of <code>&#47;usr&#47;bin&#47;gcc</code> since on MacOSX the GCC compiler might be somewhere else"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1533136202, "post_id": 51636634, "comment_id": 90237828, "body": "Note that <code>gcc</code> resolves to <code>clang</code> on os x."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1533136405, "post_id": 51636634, "comment_id": 90237955, "body": "It is the <code>-static</code> causing the issue.  See <a href=\"https://stackoverflow.com/questions/844819/how-to-static-link-on-os-x\" title=\"how to static link on os x\">stackoverflow.com/questions/844819/how-to-static-link-on-os-&zwnj;&#8203;x</a>"}], "owner": {"reputation": 1, "user_id": 9657379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c33ec4969f47337e6acebd8dda6b9b34?s=128&d=identicon&r=PG&f=1", "display_name": "m.secomandi", "link": "https://stackoverflow.com/users/9657379/m-secomandi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533145500, "creation_date": 1533135783, "last_edit_date": 1533145500, "question_id": 51636634, "link": "https://stackoverflow.com/questions/51636634/error-linker-command-failed-with-exit-code-1-use-v-to-see-invocation-compile", "title": "error: linker command failed with exit code 1 (use -v to see invocation) Compile Failure. Quit", "body": "<p><code>/usr/bin/gcc -DEVAL -std=c11 -O2 -pipe -static -s -o Tutorial Tutorial.c -lm</code></p>\n\n<p>this command line (right on linux) don't run on macOS, \nHow can i change this command line?\nUPDATE: the command line that doesn't work is </p>\n\n<p><code>gcc -DEVAL -static -std=c11 -O2 -pipe -s -o main.out $1 -lm -g</code></p>\n"}, {"tags": ["c", "system-calls"], "comments": [{"owner": {"reputation": 577, "user_id": 4938460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/109ce42816d23c999e06490a700f4c63?s=128&d=identicon&r=PG&f=1", "display_name": "Qwertycrackers", "link": "https://stackoverflow.com/users/4938460/qwertycrackers"}, "edited": false, "score": 0, "creation_date": 1533134710, "post_id": 51636128, "comment_id": 90236790, "body": "<code>exec()</code> is actually used to start an <i>executable</i>. <code>square</code> itself is actually a function, so what you need to do is make it its own executable somehow."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1533135212, "post_id": 51636128, "comment_id": 90237142, "body": "Your question is like asking how to use a hammer to power a light bulb.  It really doesn&#39;t make any sense.  <i>Why</i> do you need to use <code>exec()</code>?"}, {"owner": {"reputation": 53, "user_id": 9263251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc55eff1c67f29f511338f8b3a15796?s=128&d=identicon&r=PG&f=1", "display_name": "kelp99", "link": "https://stackoverflow.com/users/9263251/kelp99"}, "edited": false, "score": 0, "creation_date": 1533135293, "post_id": 51636128, "comment_id": 90237205, "body": "I&#39;m sorry it&#39;s unclear, I was literally given two lines of instruction on the assignment. I can make a separate square.c, compile it and turn it into an executable, I just need an example of how exec() is used with this executable and then storing the output into a file."}, {"owner": {"reputation": 53, "user_id": 9263251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc55eff1c67f29f511338f8b3a15796?s=128&d=identicon&r=PG&f=1", "display_name": "kelp99", "link": "https://stackoverflow.com/users/9263251/kelp99"}, "edited": false, "score": 0, "creation_date": 1533135443, "post_id": 51636128, "comment_id": 90237323, "body": "I need to use exec() so I can understand it, just trying to learn."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1533136191, "post_id": 51636128, "comment_id": 90237824, "body": "Read <a href=\"http://man7.org/linux/man-pages/man2/execve.2.html\" rel=\"nofollow noreferrer\">execve(2)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man3/exec.3.html\" rel=\"nofollow noreferrer\">exec(3)</a> <code>man</code> pages"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 9263251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc55eff1c67f29f511338f8b3a15796?s=128&d=identicon&r=PG&f=1", "display_name": "kelp99", "link": "https://stackoverflow.com/users/9263251/kelp99"}, "edited": false, "score": 0, "creation_date": 1533135700, "post_id": 51636499, "comment_id": 90237489, "body": "Yeah, thanks for taking the time to look at it anyway"}], "tags": [], "owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "is_accepted": false, "score": 1, "last_activity_date": 1533135403, "creation_date": 1533135403, "answer_id": 51636499, "question_id": 51636128, "link": "https://stackoverflow.com/questions/51636128/how-to-use-exec-system-call-to-return-the-square-of-a-number-and-store-it-to-a/51636499#51636499", "title": "How to use exec() system call to return the square of a number and store it to a file?", "body": "<p>This is such a terrible idea for so many reasons....\nBut you can certainly do it:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n\nint square(const char *arg) {\n   int i;\n   i = strtoll(arg, NULL, 10);\n   return i*i;\n}\n\nint main(int argc, char *argv[]) {\n        FILE *f;\n        char cmd[128];\n        int rv;\n\n        if( argc &lt; 3 ) {\n                fputs( \"Please specify target file and integer to square\\n\", stderr);\n                exit(EXIT_FAILURE);\n        }\n\n        f = fopen(argv[1], \"w\");\n        if( f == NULL ) {\n                perror(argv[1]);\n                exit(EXIT_FAILURE);\n        }\n        rv = snprintf(cmd, sizeof cmd, \"echo %d &gt;&amp; %d\", square(argv[2]), fileno(f));\n        if( rv &gt;= sizeof cmd ) {\n                fputs( \"Choose a smaller int\\n\", stderr);\n                exit(EXIT_FAILURE);\n        }\n\n        execl(\"/bin/sh\", \"sh\", \"-c\", cmd, NULL);\n        perror(\"execl\");\n        return EXIT_FAILURE;\n}\n</code></pre>\n\n<p>But note that if this is for an assignment and you've been told to use <code>exec*</code>, then this solution would be an <code>F</code> grade.  This is not what you're supposed to do.  (At least I hope not.  If that is the goal, then this is a terrible assignment.)</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 10099595, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AEYwzagrNPc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rB-t06ERcoEIuk0WlQkHi_iGAIXA/mo/photo.jpg?sz=128", "display_name": "Dnii Volna", "link": "https://stackoverflow.com/users/10099595/dnii-volna"}, "is_accepted": false, "score": 0, "last_activity_date": 1533135763, "creation_date": 1533135763, "answer_id": 51636626, "question_id": 51636128, "link": "https://stackoverflow.com/questions/51636128/how-to-use-exec-system-call-to-return-the-square-of-a-number-and-store-it-to-a/51636626#51636626", "title": "How to use exec() system call to return the square of a number and store it to a file?", "body": "<p>If you want to make some calculation not in main thread, you can create thread and detach it.\nIf you use c11 compiler you can use threads.h.\n<code>thrd_create</code> wil create your thread, <code>thrd_detach</code> will detach it from main process.</p>\n\n<p>If your compiler doesn't support c11 you can use native multitreading options.</p>\n\n<p><code>#include &lt;pthread.h&gt;</code> for Unix systems</p>\n\n<p><code>#include &lt;windows.h</code> for Windows</p>\n"}], "owner": {"reputation": 53, "user_id": 9263251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc55eff1c67f29f511338f8b3a15796?s=128&d=identicon&r=PG&f=1", "display_name": "kelp99", "link": "https://stackoverflow.com/users/9263251/kelp99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1533135901, "creation_date": 1533134409, "last_edit_date": 1533135901, "question_id": 51636128, "link": "https://stackoverflow.com/questions/51636128/how-to-use-exec-system-call-to-return-the-square-of-a-number-and-store-it-to-a", "title": "How to use exec() system call to return the square of a number and store it to a file?", "body": "<p>Given a number in the command line by the user, I need to return the square of that number and store it into a file called <code>child.txt</code>, but I need to do this by creating a child process and using <code>exec()</code>. How exactly do I do that? Here's what I have so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char *argv[]) {\n   FILE *f;\n   f = fopen(\"child.txt\", \"w\");\n   int pid = fork();\n   square(argv);\n   exec(); // This is wrong, I need to fix this\n   return 0;\n}\n\nint square(char *argv[]) {\n   int i;\n   i = atoi(argv[1]);\n   return i*i;\n}\n</code></pre>\n\n<p>What parameters should I be passing into <code>exec()</code>? I've seen other examples where exec() has parameters such as <code>echo</code> or <code>-ls</code>, but is it possible to somehow pass in the <code>square()</code> function I've written?</p>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1533134144, "post_id": 51636014, "comment_id": 90236386, "body": "The problem is that ther is no space allocated for <code>myStringCopy</code>. Its just an unitnitzialized pointer which points to no valid memery location, therefore you can not write to it."}], "answers": [{"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 2, "last_activity_date": 1533134237, "creation_date": 1533134237, "answer_id": 51636069, "question_id": 51636014, "link": "https://stackoverflow.com/questions/51636014/why-should-i-declare-a-string-as-a-fixed-size-array/51636069#51636069", "title": "Why should I declare a String as a fixed-size array", "body": "<p>The problem is that you don't have room for <code>mystringCopy</code></p>\n\n<p>You need to reserve space first:</p>\n\n<pre><code>   char* myString = \"Hello there!\";\n   char* myStringCopy = malloc(strlen(myString) + 1);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 1, "creation_date": 1533136533, "post_id": 51636070, "comment_id": 90238041, "body": "<a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Dont cast malloc return</a>."}], "tags": [], "owner": {"reputation": 1114, "user_id": 10111567, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Miguel", "link": "https://stackoverflow.com/users/10111567/miguel"}, "is_accepted": false, "score": 4, "last_activity_date": 1533137453, "last_edit_date": 1533137453, "creation_date": 1533134239, "answer_id": 51636070, "question_id": 51636014, "link": "https://stackoverflow.com/questions/51636014/why-should-i-declare-a-string-as-a-fixed-size-array/51636070#51636070", "title": "Why should I declare a String as a fixed-size array", "body": "<p>It can work by doing <code>char* myStringCopy</code> as long as you allocate memory space for it.</p>\n\n<p>for example  </p>\n\n<pre><code>char* myStringCopy\nmyStringCopy = malloc(sizeof(char) * (strlen(myString)+1))\n</code></pre>\n\n<p>I might be mistaken about the +1 but I think it is like this.</p>\n"}, {"comments": [{"owner": {"reputation": 506, "user_id": 4126269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2ChD.jpg?s=128&g=1", "display_name": "CarlosMorente", "link": "https://stackoverflow.com/users/4126269/carlosmorente"}, "edited": false, "score": 0, "creation_date": 1533134625, "post_id": 51636109, "comment_id": 90236731, "body": "And how could I do it without knowing the string length?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 506, "user_id": 4126269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2ChD.jpg?s=128&g=1", "display_name": "CarlosMorente", "link": "https://stackoverflow.com/users/4126269/carlosmorente"}, "edited": false, "score": 1, "creation_date": 1533134696, "post_id": 51636109, "comment_id": 90236774, "body": "@CarlosMorente: You can find the string length by counting the characters in the source string, up to and including the terminating null character. Also, if you want <code>copy_string</code> to do the allocation, then it must return the newly allocated address to the caller."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 3, "last_activity_date": 1533134355, "creation_date": 1533134355, "answer_id": 51636109, "question_id": 51636014, "link": "https://stackoverflow.com/questions/51636014/why-should-i-declare-a-string-as-a-fixed-size-array/51636109#51636109", "title": "Why should I declare a String as a fixed-size array", "body": "<p><code>char myStringCopy[12];</code> tells the compiler to create an array of 12 <code>char</code>. When <code>myStringCopy</code> is passed to <code>copy_string</code>, this array is automatically converted to a pointer to its first element, so <code>copy_string</code> receives a pointer to the characters.</p>\n\n<p><code>char *myStringCopy;</code> tells the compiler to create a pointer to <code>char</code>. The compiler creates this pointer, including providing memory for it, but it does not set the value of the pointer. When this pointer is passed to <code>copy_string</code>, <code>copy_string</code> does not receive a valid value.</p>\n\n<p>To make <code>char *myStringCopy;</code> work, you must allocate memory (which you can do with <code>malloc</code>). For example, you could use:</p>\n\n<pre><code>char *myStringCopy;\nmyStringCopy = malloc(13 * sizeof *myStringCopy);\nif (myStringCopy == NULL)\n{\n    fprintf(stderr, \"Error, the malloc did not work.\\n\");\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>Also, note that 12 is not enough. The string \u201cHello there!\u201d contains 12 characters, but it also includes a terminating null character. You must provide space for the null character. <code>char myStringCopy[12];</code> appeared to work, but <code>copy_string</code> was actually writing a thirteenth character beyond the array, damaging something else in your program.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 10099595, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AEYwzagrNPc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rB-t06ERcoEIuk0WlQkHi_iGAIXA/mo/photo.jpg?sz=128", "display_name": "Dnii Volna", "link": "https://stackoverflow.com/users/10099595/dnii-volna"}, "reply_to_user": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "edited": false, "score": 0, "creation_date": 1533134621, "post_id": 51636133, "comment_id": 90236728, "body": "i know, i only answer to question. and copy statement from user code."}], "tags": [], "owner": {"reputation": 31, "user_id": 10099595, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AEYwzagrNPc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rB-t06ERcoEIuk0WlQkHi_iGAIXA/mo/photo.jpg?sz=128", "display_name": "Dnii Volna", "link": "https://stackoverflow.com/users/10099595/dnii-volna"}, "is_accepted": false, "score": 1, "last_activity_date": 1533134424, "creation_date": 1533134424, "answer_id": 51636133, "question_id": 51636014, "link": "https://stackoverflow.com/questions/51636014/why-should-i-declare-a-string-as-a-fixed-size-array/51636133#51636133", "title": "Why should I declare a String as a fixed-size array", "body": "<pre><code>char* myStringCopy;\n</code></pre>\n\n<p>This is only pointer to char*. You must first allocate memory for myStringCopy, before start copy. When you declare it like this:</p>\n\n<pre><code>char myStringCopy[12];\n</code></pre>\n\n<p>compiler allocate enough memory in stack.</p>\n"}], "owner": {"reputation": 506, "user_id": 4126269, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2ChD.jpg?s=128&g=1", "display_name": "CarlosMorente", "link": "https://stackoverflow.com/users/4126269/carlosmorente"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 51636109, "answer_count": 4, "score": -3, "last_activity_date": 1533137453, "creation_date": 1533134050, "question_id": 51636014, "link": "https://stackoverflow.com/questions/51636014/why-should-i-declare-a-string-as-a-fixed-size-array", "title": "Why should I declare a String as a fixed-size array", "body": "<p>I have this program:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid copy_string(char string1[], char string2[]){\n    int counter=0;\n    while(string1[counter]!='\\0'){\n        string2[counter] = string1[counter];\n        counter++;\n    }\n    string2[counter] = '\\0';\n}\n\nint main() {\n   char* myString = \"Hello there!\";\n   char* myStringCopy;\n   copy_string(myString, myStringCopy);\n   printf(\"%s\", myStringCopy);\n}\n</code></pre>\n\n<p>My question is, why isn't it working unless I declare myStringCopy as a fixed-size variable (<code>char myStringCopy[12];</code>)? Shouldn't it work if I add a <code>\\0</code> character after the copy as I'm doing?</p>\n"}, {"tags": ["c", "x86", "autotools", "autoconf"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1533143042, "post_id": 51635979, "comment_id": 90241877, "body": "GCC supports <code>immintrin.h</code>, at least in version 4.8.  But if you&#39;re supposing, reasonably, that the platform for which you are configuring might not support it, then it&#39;s a problem that your test program unconditionally includes that header."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1533143170, "post_id": 51635979, "comment_id": 90241925, "body": "@John - Thanks. GCC and Clang provide <code>&lt;immintrin.h&gt;</code>, but it is missing RDRAND and RDSEED declarations. Other compilers, like ICC, MSVC and SunCC provide the declarations in <code>&lt;immintrin.h&gt;</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1533144019, "post_id": 51635979, "comment_id": 90242317, "body": "My system has <code>x86intrin.h</code>, but <code>_rdseed32_step</code> is not in any library that GCC links by default, as judged by running a dummy <code>configure</code> script that looks for it via an <code>AC_CHECK_FUNC</code> macro.  You may be running into the same problem.  Do you happen to know what library is supposed to contain it?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1533144551, "post_id": 51635979, "comment_id": 90242580, "body": "@John - I think <code>_rdseed32_step</code> calls <code>__builtin_ia32_rdseed32</code> or similar. I&#39;m guessing it is not a library call; rather it is probably an inline ASM one-liner. I added some non-Autotools sample code that shows the issue and need for <code>&lt;x86intrin.h&gt;</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1533145565, "post_id": 51635979, "comment_id": 90243102, "body": "I could believe that <code>_rdseed32_step</code> is a macro, not a function.  That would explain why <code>AC_CHECK_FUNC</code> does not find it (since it does not include the needed header)."}], "answers": [{"comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1533147616, "post_id": 51639786, "comment_id": 90244201, "body": "Thanks, that was it. I needed to use <code>AC_CHECK_HEADERS</code>, not <code>AC_CHECK_HEADER</code>."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1533147178, "creation_date": 1533147178, "answer_id": 51639786, "question_id": 51635979, "link": "https://stackoverflow.com/questions/51635979/how-to-use-an-ac-check-header-header-in-an-ac-compile-ifelse-program/51639786#51639786", "title": "How to use an AC_CHECK_HEADER header in an AC_COMPILE_IFELSE program", "body": "<p>You have tripped over an Autoconf gotcha.  <a href=\"https://www.gnu.org/software/autoconf/manual/autoconf-2.69/html_node/Generic-Headers.html#index-AC_005fCHECK_005fHEADER-580\" rel=\"nofollow noreferrer\">The docs for <code>AC_CHECK_HEADER</code></a> say:</p>\n\n<blockquote>\n  <p>If the system header file header-file is compilable, execute shell\n  commands <code>action-if-found</code>, otherwise execute <code>action-if-not-found</code>.\n  <strong><em>If you just want to define a symbol if the header file is available,\n  consider using <code>AC_CHECK_HEADERS</code> instead.</em></strong></p>\n</blockquote>\n\n<p>(Emphasis added)</p>\n\n<p>Contrast that with the docs for <code>AC_CHECK_HEADERS</code>:</p>\n\n<blockquote>\n  <p>For each given system header file header-file in the blank-separated\n  argument list that exists, define <code>HAVE_*header-file*</code> (in all capitals).\n  If action-if-found is given, [...]</p>\n</blockquote>\n\n<p>Note that unlike those for <code>AC_CHECK_HEADERS</code>, the docs for <code>AC_CHECK_HEADER</code> do not claim that any symbol will be defined if the header is found.  In that case, the only thing done other than to report the result of the check is to run the commands in <code>action-if-found</code>.  You can certainly put an <code>AC_DEFINE</code> in there to define a symbol, but you don't get that for free the way you do from <code>AC_CHECK_HEADERS</code>.  If you want that, you can use <code>AC_CHECK_HEADERS</code> even for a single header.</p>\n\n<p>I'm sure original the reason for the difference revolves around the fact that <code>AC_CHECK_HEADERS</code> checks possibly many headers.  Additionally, sometimes you don't care about defining a symbol, or perhaps you expressly want to avoid doing so; for those cases you can use <code>AC_CHECK_HEADER</code>.</p>\n\n<p>Here's a complete Autoconf input file that demonstrates a working variation on your check:</p>\n\n<pre><code>AC_PREREQ([2.69])\nAC_INIT([test], [0.0.0])\n\n# Checks for programs.\nAC_PROG_CC\nAC_PROG_CXX\n\n# Ensure that tests are run with the C++ compiler\nAC_LANG([C++])\n\n# Checks for header files.\nAC_CHECK_HEADERS([x86intrin.h])\n\n# Check support for -mrdseed\nAS_IF([test \"$ac_cv_header_x86intrin_h\" = \"yes\"], [\n  CXXFLAGS_save=$CXXFLAGS\n  CXXFLAGS=\"$CXXFLAGS -mrdseed\"\n\n  XXX_PROGRAM=\"\n#include &lt;immintrin.h&gt;\n#ifdef HAVE_X86INTRIN_H\n#include &lt;x86intrin.h&gt;\n#endif\nint main(void) {\n    unsigned int x;\n    return _rdseed32_step(&amp;x);\n}\n\"\n  AC_MSG_CHECKING([whether $CXX supports -mrdseed])\n  AC_COMPILE_IFELSE(\n    [AC_LANG_SOURCE([$XXX_PROGRAM])],\n    [AC_MSG_RESULT([yes])],\n    [AC_MSG_RESULT([no])]\n  )\n\n  CXXFLAGS=$CXXFLAGS_save\n])\n\nAC_OUTPUT\n</code></pre>\n"}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 0, "accepted_answer_id": 51639786, "answer_count": 1, "score": 1, "last_activity_date": 1533147178, "creation_date": 1533133952, "last_edit_date": 1533144698, "question_id": 51635979, "link": "https://stackoverflow.com/questions/51635979/how-to-use-an-ac-check-header-header-in-an-ac-compile-ifelse-program", "title": "How to use an AC_CHECK_HEADER header in an AC_COMPILE_IFELSE program", "body": "<p>I'm performing a header check for a non-standard <code>&lt;x86intrin.h&gt;</code> header provided by Clang and GCC. Other compilers follow Intel and use <code>&lt;immintrin.h&gt;</code>:</p>\n\n<pre><code>AC_CHECK_HEADER([x86intrin.h])\n</code></pre>\n\n<p>Autotools finds it on the Linux test systems:</p>\n\n<pre><code>checking x86intrin.h usability... yes\nchecking x86intrin.h presence... yes\nchecking for x86intrin.h... yes\n</code></pre>\n\n<p>I then use it in a test:</p>\n\n<pre><code>CXXFLAGS=\"-mrdseed\"\nXXX_PROGRAM=\"#include &lt;immintrin.h&gt;\n   #ifdef HAVE_X86INTRIN_H\n   # include &lt;x86intrin.h&gt;\n   #endif\n   int main(int argc, char** argv) {\n      unsigned int x;\n      return _rdseed32_step(&amp;x);\n   }\"\n\nAC_MSG_CHECKING([if $CXXNAME supports $CXXFLAGS])\nAC_COMPILE_IFELSE(\n   [AC_LANG_SOURCE([$XXX_PROGRAM])],\n   [AC_MSG_RESULT([yes])],\n   [AC_MSG_RESULT([no])]\n)\n</code></pre>\n\n<p>The test fails:</p>\n\n<pre><code>checking if g++ supports -mrdseed... no\n</code></pre>\n\n<p>The machine has the feature and the compiler supports it. Looking at <code>condefs.h</code> from <code>config.log</code> shows <code>HAVE_X86INTRIN_H</code> is not being set as expected.</p>\n\n<p>The manual shows how to use a header resulting from a check at <a href=\"https://www.gnu.org/software/autoconf/manual/autoconf-2.62/html_node/Generic-Headers.html\" rel=\"nofollow noreferrer\">5.6.3 Generic Header Checks</a>. I think I am doing roughly the same thing:</p>\n\n<pre><code>AC_CHECK_HEADERS([foo.h])\nAC_CHECK_HEADERS([bar.h], [], [],\n[#ifdef HAVE_FOO_H\n # include &lt;foo.h&gt;\n # endif\n])\n</code></pre>\n\n<p>How do I use an <code>AC_CHECK_HEADER</code> header in an <code>AC_COMPILE_IFELSE</code> program?</p>\n\n<hr>\n\n<p>Here is my test driver:</p>\n\n<pre><code>$ cat test.cxx\n#include &lt;immintrin.h&gt;\n#ifdef HAVE_X86INTRIN_H\n# include &lt;x86intrin.h&gt;\n#endif\nint main(int argc, char** argv) {\n    unsigned int x;\n    return _rdseed32_step(&amp;x);\n}\n\n$ g++ -mrdseed test.cxx -o test.exe\ntest.cxx: In function \u2018int main(int, char**)\u2019:\ntest.cxx:7:12: error: \u2018_rdseed32_step\u2019 was not declared in this scope\n     return _rdseed32_step(&amp;x);\n            ^~~~~~~~~~~~~~\ntest.cxx:7:12: note: suggested alternative: \u2018_rdrand32_step\u2019\n     return _rdseed32_step(&amp;x);\n            ^~~~~~~~~~~~~~\n            _rdrand32_step\n\n$ g++ -DHAVE_X86INTRIN_H -mrdseed test.cxx -o test.exe\n$ ./test.exe\n$\n</code></pre>\n\n<hr>\n\n<p>Here is the distro and compiler:</p>\n\n<pre><code>$ lsb_release -a\nLSB Version:    :core-4.1-amd64:core-4.1-noarch\nDistributor ID: Fedora\nDescription:    Fedora release 28 (Twenty Eight)\nRelease:        28\n\n$ g++ --version\ng++ (GCC) 8.1.1 20180712 (Red Hat 8.1.1-5)\n</code></pre>\n\n<hr>\n\n<p>Here are the relevant parts from <code>config.log</code>:</p>\n\n<pre><code>configure:17624: checking if g++ supports -mrdseed\nconfigure:17631: g++ -o conftest -mrdseed   conftest.cpp  &gt;&amp;5\nconftest.cpp: In function 'int main(int, char**)':\nconftest.cpp:38:17: error: '_rdseed32_step' was not declared in this scope\n          return _rdseed32_step(&amp;x);\n                 ^~~~~~~~~~~~~~\nconftest.cpp:38:17: note: suggested alternative: '_rdrand32_step'\n          return _rdseed32_step(&amp;x);\n                 ^~~~~~~~~~~~~~\n                 _rdrand32_step\nconfigure:17631: $? = 1\nconfigure: failed program was:\n| /* confdefs.h */\n| #define PACKAGE_NAME \"Crypto++\"\n| ...\n| #define STDC_HEADERS 1\n| #define HAVE_SYS_TYPES_H 1\n| #define HAVE_SYS_STAT_H 1\n| #define HAVE_STDLIB_H 1\n| #define HAVE_STRING_H 1\n| #define HAVE_MEMORY_H 1\n| #define HAVE_STRINGS_H 1\n| #define HAVE_INTTYPES_H 1\n| #define HAVE_STDINT_H 1\n| #define HAVE_UNISTD_H 1\n| #define HAVE_DLFCN_H 1\n| #define LT_OBJDIR \".libs/\"\n| ...\n| /* end confdefs.h.  */\n| #include &lt;immintrin.h&gt;\n|       #ifdef HAVE_X86INTRIN_H\n|       # include &lt;x86intrin.h&gt;\n|       #endif\n|       int main(int argc, char** argv) {\n|          unsigned int x;\n|          return _rdseed32_step(&amp;x);\n|       }\nconfigure:17645: result: no\n</code></pre>\n"}, {"tags": ["c", "token", "lexer"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533134103, "post_id": 51635551, "comment_id": 90236354, "body": "Have you tried running it through a debugger and seeing what it is doing when you get the unexpected result?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533135401, "post_id": 51635551, "comment_id": 90237290, "body": "Yes, There are no errors, or anything unusual in the output."}, {"owner": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "edited": false, "score": 0, "creation_date": 1533135628, "post_id": 51635551, "comment_id": 90237445, "body": "Can you provide the code for isDelimiter, is Seperator and isOperator?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "edited": false, "score": 0, "creation_date": 1533135872, "post_id": 51635551, "comment_id": 90237608, "body": "Thought I would add the Identifier as well seeing as it had the delimiter in it."}, {"owner": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "edited": false, "score": 0, "creation_date": 1533135909, "post_id": 51635551, "comment_id": 90237626, "body": "Your 2nd and 3rd if statements in the while loop both have the same criteria. But the first one, will modify right before the next if statement is evaluated. Perhaps the first one is supposed to be isOperator and not isDelimiter? Also should the secnd, third and fourth statements not be in an if-else chain?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "edited": false, "score": 0, "creation_date": 1533136114, "post_id": 51635551, "comment_id": 90237768, "body": "Updated the code. The bools are at the bottom."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "reply_to_user": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "edited": false, "score": 0, "creation_date": 1533136883, "post_id": 51635551, "comment_id": 90238282, "body": "Tried using the else ifs @Spoonless  but it end up cutting the separators off. It showed both together instead of separately."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533137196, "post_id": 51635551, "comment_id": 90238481, "body": "You might find it a lot easier in the long run to change your code design to use a state machine instead of all those complicated mess of if statements. Or just use an existing lexer like &quot;lex&quot; or &quot;flex&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "edited": false, "score": 0, "creation_date": 1533137402, "post_id": 51635551, "comment_id": 90238601, "body": "I planned on it after awhile. Just trying to get the basic function of it down and learn some more on states."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533139311, "post_id": 51635551, "comment_id": 90239785, "body": "Rolled post back to where it was once answers started to arrive."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "edited": false, "score": 0, "creation_date": 1533139497, "post_id": 51635551, "comment_id": 90239883, "body": "Lol, thanks didnt think about people wanting to see the orig."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533139715, "post_id": 51635551, "comment_id": 90239988, "body": "1) The answer makes little sense with your later edit.  2) Posing text as text is more useful than only as a picture.  3) Posting a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is even better."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "edited": false, "score": 0, "creation_date": 1533139920, "post_id": 51635551, "comment_id": 90240116, "body": "So i should go ahead and repost the entire code so people can replicate the problem? There isn&#39;t much more code left except the reading part"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533140464, "post_id": 51635551, "comment_id": 90240439, "body": "Adding true code like the missing <code>#includes, main(), isKeyword(), isRealNumber()</code> would not contradict the answer(s) and would add clarity to the post.  Posting the file contents, as text, helps too.  Posting the warnings you received on compilation would help too - Take time to read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533141325, "post_id": 51635551, "comment_id": 90240943, "body": "And changing <code>isDelimiter</code> also invalidates my answer too :/"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "edited": false, "score": 0, "creation_date": 1533136598, "post_id": 51636772, "comment_id": 90238072, "body": "It cleaned up some but left out the a; b; c;. Would the delimiter in the valid Identifier be the cause?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533136913, "post_id": 51636772, "comment_id": 90238303, "body": "Yes. There&#39;s no reason why a delimiter as defined by your code would be in an identifier."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "edited": false, "score": 0, "creation_date": 1533137688, "post_id": 51636772, "comment_id": 90238811, "body": "Did as you said and changed to isspace, pulled the delimiter true statement from the valid  Identifier, and pulled the delim from the else if from the bottom of Valid Ident. The a; b; c; are there again along with the something.something so that&#39;s good.   The valid identifier is still reading = as Ident instead of operator, separator still connected with a;"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533138489, "post_id": 51636772, "comment_id": 90239315, "body": "That&#39;s because <code>isOperator()</code> is only called in an impossible situation. In the sense that it only happens if the current character is a delimiter as well as an operator..."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533139433, "post_id": 51636772, "comment_id": 90239851, "body": "<code>isspace(ch)</code> is not well defined for negative values of <code>ch</code> - although I doubt OP&#39;s current input stream has negative values and so is not noticeable. <code>isspace((unsigned char) ch)</code> avoids that problem."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "edited": false, "score": 0, "creation_date": 1533141944, "post_id": 51636772, "comment_id": 90241291, "body": "Defiantly works, the only issue left on it is that it doesn&#39;t pick up the semicolon or the period. And how would i cut all the extra white spaces? Would I put the real number and isIntegar in the outside?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "edited": false, "score": 0, "creation_date": 1533143424, "post_id": 51636772, "comment_id": 90242041, "body": "For the white spaces all I had to do was leave the delimiter strings empty."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533143446, "post_id": 51636772, "comment_id": 90242046, "body": "As I said, it&#39;s a very simple example of a state machine to give you an idea on how to go forward with this."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 0, "last_activity_date": 1533141254, "last_edit_date": 1533141254, "creation_date": 1533136183, "answer_id": 51636772, "question_id": 51635551, "link": "https://stackoverflow.com/questions/51635551/how-do-i-handle-the-newline-and-separator-spacing-in-c/51636772#51636772", "title": "How do I handle the newline, and separator spacing in c?", "body": "<p>Looks like the problem is your <code>isDelimiter</code> function isn't picking up all possible values. If you change it to use <code>isspace()</code> it will match on all forms of whitespace.</p>\n\n<pre><code>bool isDelimiter(char ch)\n{\n    if (isspace(ch))\n        return (true);\n    return (false);\n}\n</code></pre>\n\n<p>As an example, here is a very simple state machine to give you an idea of what sort of thing I meant. It can be in either of one of two states - INSIDE_IDENTIFIER or OUTSIDE_IDENTIFIER - and it switches between those two states depending on what kind of character it is looking at.</p>\n\n<pre><code>#define OUTSIDE_IDENTIFIER (0)\n#define INSIDE_IDENTIFIER (1)\n\nvoid parse(char *str)\n    {\n    char *ch;\n    int state=OUTSIDE_IDENTIFIER;\n    char buffer[1000];\n    char *pos=buffer;\n\n    for(ch=str;*ch!='\\0';ch++)\n        {\n        switch(state)\n            {\n        case INSIDE_IDENTIFIER:\n            if(isOperator(*ch))\n                {\n                *pos='\\0';\n                printf(\"Identifier[%s]\\n\",buffer);\n                printf(\"Operator[%c]\\n\",*ch);\n                state=OUTSIDE_IDENTIFIER;\n                }\n            else if(isDelimiter(*ch))\n                {\n                *pos='\\0';\n                printf(\"Identifier[%s]\\n\",buffer);\n                printf(\"Delimiter[%c]\\n\",*ch);\n                state=OUTSIDE_IDENTIFIER;\n                }\n            else if(isspace(*ch))\n                {\n                *pos='\\0';\n                printf(\"Identifier[%s]\\n\",buffer);\n                printf(\"Space[%d]\\n\",*ch);\n                state=OUTSIDE_IDENTIFIER;\n                }\n            else\n                {\n                *pos=*ch;\n                pos++;\n                }\n        break; \n        case OUTSIDE_IDENTIFIER:\n        default:\n            if(isOperator(*ch))\n                {\n                printf(\"Operator[%c]\\n\",*ch);\n                }\n            else if(isDelimiter(*ch))\n                {\n                printf(\"Delimiter[%c]\\n\",*ch);\n                }\n            else if(isSeperator(*ch))\n                {\n                printf(\"Seperator[%c]\\n\",*ch);\n                }\n            else\n                {\n                state = INSIDE_IDENTIFIER;\n                pos=buffer;\n                *pos=*ch;\n                pos++;\n                }\n        break;\n            }\n        }\n    }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9984206"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 51636772, "answer_count": 1, "score": 0, "last_activity_date": 1533141254, "creation_date": 1533132814, "last_edit_date": 1533140745, "question_id": 51635551, "link": "https://stackoverflow.com/questions/51635551/how-do-i-handle-the-newline-and-separator-spacing-in-c", "title": "How do I handle the newline, and separator spacing in c?", "body": "<p><a href=\"https://i.stack.imgur.com/xgEDI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xgEDI.png\" alt=\"enter image description here\"></a></p>\n\n<p>The actual text file is just random stuff to test the lex and parse. The pic above is the result, the console is giving me during runtime. In the green it is calling an Identifier when it should be a newline or delim, so nothing should be needed. In the red it is not recognizing the separator, and in the yellow its not reading the something.something at all. I'm assuming it has something to do with with the previous c; not being seperated right. </p>\n\n<p>So my question is how do I properly separate the tokens, and recognize the newline, or what am I doing wrong. Below is the code that I am using to do the separating and tokenizing.</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdbool.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define BUFFER_SIZE    1024\n\n// Returns 'true' if the character is a DELIMITER.\nbool isDelimiter(char ch)\n{\n    if (isspace (ch))\n        return (true);\n    return (false);\n}\n\n// Returns 'true' if the character is a SEPERATOR.\nbool isSeperator(char str)\n{\n    if (str == ',' || str == ';' || str == '&gt;' ||\n        str == '&lt;' || str == '(' || str == ')' || str == '[' || str == ']' || \n        str == '{' || str == '}' || str == '.' )\n        return (true);\n    return (false);\n}\n\n// Returns 'true' if the character is an OPERATOR.\nbool isOperator(char ch)\n{\n    if (ch == '+' || ch == '-' || ch == '*' ||\n        ch == '/' || ch == '&gt;' || ch == '&lt;' ||\n        ch == '=')\n        return (true);\n    return (false);\n}\n\n// Returns 'true' if the string is a VALID IDENTIFIER.\nbool validIdentifier(char* str)\n{\n    if (str[0] == '0' || str[0] == '1' || str[0] == '2' ||\n        str[0] == '3' || str[0] == '4' || str[0] == '5' ||\n        str[0] == '6' || str[0] == '7' || str[0] == '8' ||\n        str[0] == '9' )\n        return (false);\n    return (true);\n}\n\n// Returns 'true' if the string is a KEYWORD.\nbool isKeyword(char* str)\n{\n    if (!strcmp(str, \"if\") || !strcmp(str, \"else\") ||\n        !strcmp(str, \"while\") || !strcmp(str, \"do\") ||\n        !strcmp(str, \"break\") || !strcmp(str, \"elem\") ||\n        !strcmp(str, \"lout\") || !strcmp(str, \"file\") ||\n        !strcmp(str, \"console\") || !strcmp(str, \"read\") ||\n        !strcmp(str, \"write\") || !strcmp(str, \"mark\") ||\n        !strcmp(str, \"emblemnize\") || !strcmp(str, \"lin\") ||\n        !strcmp(str, \"send\") || !strcmp(str, \"dint\") ||\n        !strcmp(str, \"continue\") || !strcmp(str, \"int\")\n        || !strcmp(str, \"double\") || !strcmp(str, \"float\")\n        || !strcmp(str, \"return\") || !strcmp(str, \"char\")\n        || !strcmp(str, \"case\") || !strcmp(str, \"char\")\n        || !strcmp(str, \"sizeof\") || !strcmp(str, \"long\")\n        || !strcmp(str, \"short\") || !strcmp(str, \"typedef\")\n        || !strcmp(str, \"switch\") || !strcmp(str, \"unsigned\")\n        || !strcmp(str, \"void\") || !strcmp(str, \"static\")\n        || !strcmp(str, \"struct\") || !strcmp(str, \"goto\"))\n        return (true);\n    return (false);\n}\n\n// Returns 'true' if the string is an INTEGER.\nbool isInteger(char* str)\n{\n    int i, len = strlen(str);\n\n    if (len == 0)\n        return (false);\n    for (i = 0; i &lt; len; i++) {\n        if (str[i] != '0' &amp;&amp; str[i] != '1' &amp;&amp; str[i] != '2'\n            &amp;&amp; str[i] != '3' &amp;&amp; str[i] != '4' &amp;&amp; str[i] != '5'\n            &amp;&amp; str[i] != '6' &amp;&amp; str[i] != '7' &amp;&amp; str[i] != '8'\n            &amp;&amp; str[i] != '9' || (str[i] == '-' &amp;&amp; i &gt; 0))\n            return (false);\n    }\n    return (true);\n}\n\n// Returns 'true' if the string is a REAL NUMBER.\nbool isRealNumber(char* str)\n{\n    int i, len = strlen(str);\n    bool hasDecimal = false;\n\n    if (len == 0)\n        return (false);\n    for (i = 0; i &lt; len; i++) {\n        if (str[i] != '0' &amp;&amp; str[i] != '1' &amp;&amp; str[i] != '2'\n            &amp;&amp; str[i] != '3' &amp;&amp; str[i] != '4' &amp;&amp; str[i] != '5'\n            &amp;&amp; str[i] != '6' &amp;&amp; str[i] != '7' &amp;&amp; str[i] != '8'\n            &amp;&amp; str[i] != '9' &amp;&amp; str[i] != '.' ||\n            (str[i] == '-' &amp;&amp; i &gt; 0))\n            return (false);\n        if (str[i] == '.')\n            hasDecimal = true;\n    }\n    return (hasDecimal);\n}\n\n// Extracts the SUBSTRING.\nchar* subString(char* str, int left, int right)\n{\n    int i;\n    char* subStr = (char*)malloc(sizeof(char) * (right - left + 2));\n\n    for (i = left; i &lt;= right; i++)\n        subStr[i - left] = str[i];\n    subStr[right - left + 1] = '\\0';\n    return (subStr);\n}\n\n// Parsing the input STRING.\nvoid parse(char* str)\n{\n    int left = 0, right = 0;\n    int len = strlen(str);\n\n    while (right &lt;= len &amp;&amp; left &lt;= right)\n    {\n        if (isDelimiter(str[right]) == false)\n            right++;\n\n\n        if (isDelimiter(str[right]) == true &amp;&amp; left == right)\n        {\n            if (isOperator(str[right]) == true)\n                printf(\"'%c' IS A OPERATOR\\n\", str[right]);\n\n            right++;\n            left = right;\n        }\n\n        if (isDelimiter(str[right]) == true &amp;&amp; left == right)\n        {\n            if (isDelimiter(str[right]) == true)\n                printf(\"'%c' IS A DELIMITER\\n\", str[right]);\n\n            right++;\n            left = right;\n        }\n\n        if (isSeperator(str[right]) == true &amp;&amp; left == right)\n        {\n            //needed to recognize seperator to the right\n            if (isSeperator(str[right]) == true)\n                printf(\"'%c' IS A SEPERATOR\\n\", str[right]);\n\n            right++;\n            left = right;\n\n            //needed to recognize seperator to the left\n            if (isSeperator(str[right]) == true)\n                printf(\"'%c' IS A SEPERATOR\\n\", str[left]);\n\n            right++;\n            left = right;\n        }\n        else if (isDelimiter(str[right]) == true &amp;&amp; left != right\n            || (right == len &amp;&amp; left != right)) {\n            char* subStr = subString(str, left, right - 1);\n\n            if (isKeyword(subStr) == true)\n                printf(\"'%s' IS A KEYWORD\\n\", subStr);\n\n            else if (isInteger(subStr) == true)\n                printf(\"'%s' IS AN INTEGER\\n\", subStr);\n\n            else if (isRealNumber(subStr) == true)\n                printf(\"'%s' IS A REAL NUMBER\\n\", subStr);\n\n            else if (validIdentifier(subStr) == true\n                &amp;&amp; isDelimiter(str[right - 1]) == false\n                &amp;&amp; isSeperator(str[right - 1]) == false)\n                printf(\"'%s' IS A VALID IDENTIFIER\\n\", subStr);\n\n            left = right;\n        }\n    }\n    return;\n}\n\nint main(int argc, char *argv)\n{\n\n    /* declare a file pointer */\n    FILE    *file;\n    char    *buffer;\n    long    numbytes;\n\n    /* open an existing file for reading */\n    file = fopen(\"Text.txt\", \"r\");\n\n    /* quit if the file does not exist */\n    if (file == NULL)\n        return 1;\n\n    /* Get the number of bytes */\n    fseek(file, 0L, SEEK_END);\n    numbytes = ftell(file);\n\n    /* reset the file position indicator to\n    the beginning of the file */\n    fseek(file, 0L, SEEK_SET);\n\n    /* grab sufficient memory for the\n    buffer to hold the text */\n    buffer = (char*)calloc(numbytes, sizeof(char));\n\n    /* memory error */\n    if (buffer == NULL)\n        return 1;\n\n    /* copy all the text into the buffer */\n    fread(buffer, sizeof(char), numbytes, file);\n\n    /* confirm we have read the file by\n    outputing it to the console */\n    printf(\"  The file called Text.txt contains this text  \\n     \\n %s             \\n\\n\", buffer);\n\n    parse(buffer); // calling the parse function\n    fclose(file);\n\n    /* free the memory we used for the buffer */\n    free(buffer);\n\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1533132212, "post_id": 51635323, "comment_id": 90234956, "body": "I don&#39;t get it. 5th number from where?"}, {"owner": {"reputation": 3, "user_id": 10166120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35011d453dd0bd84d3e269ca1afd9a28?s=128&d=identicon&r=PG&f=1", "display_name": "HackerMan2000", "link": "https://stackoverflow.com/users/10166120/hackerman2000"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1533132346, "post_id": 51635323, "comment_id": 90235065, "body": "The factors of 190 are: 1, 2, 5, 10, 19, 38, 95 and 190. The sum of these factors is 360. I&#39;m trying to find which numbers (starting from 1) have a sum of its factors which add to 360."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1533132561, "post_id": 51635323, "comment_id": 90235200, "body": "So, may be, instead of user input, you could put your loop into another: <code>for (number = 1; number &lt;= 360; ++number) { }</code>. For every number &gt;= 360, you have at least factors 1 and number (and mostly a lot more) which add to number + 1. So, for me, 360 sounds like a reasonable upper border. It&#39;s a little bit brute force but IMHO it should work."}, {"owner": {"reputation": 1114, "user_id": 10111567, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Miguel", "link": "https://stackoverflow.com/users/10111567/miguel"}, "edited": false, "score": 0, "creation_date": 1533132699, "post_id": 51635323, "comment_id": 90235294, "body": "I reread what you wanted, and the program seems correct. What is wrong with it?"}, {"owner": {"reputation": 40344, "user_id": 1796579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14d3685f0765c738fd90c7ec71fa9ba?s=128&d=identicon&r=PG", "display_name": "Henry", "link": "https://stackoverflow.com/users/1796579/henry"}, "edited": false, "score": 0, "creation_date": 1533133132, "post_id": 51635323, "comment_id": 90235614, "body": "Instead of inputting <code>number</code> you can use another loop that varies <code>number</code>. Btw. you can make your program much faster by observing that factors occur in pairs: when <code>f</code> is a factor of <code>n</code>, so is <code>n&#47;f</code>. But be careful with the special case where <code>n</code> is a perfect square."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10166120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35011d453dd0bd84d3e269ca1afd9a28?s=128&d=identicon&r=PG&f=1", "display_name": "HackerMan2000", "link": "https://stackoverflow.com/users/10166120/hackerman2000"}, "edited": false, "score": 0, "creation_date": 1533134738, "post_id": 51635685, "comment_id": 90236808, "body": "Thank you for help! I liked seeing the numbers that added up 360."}], "tags": [], "owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "is_accepted": true, "score": 0, "last_activity_date": 1533133493, "last_edit_date": 1533133493, "creation_date": 1533133168, "answer_id": 51635685, "question_id": 51635323, "link": "https://stackoverflow.com/questions/51635323/program-for-sum-of-factors/51635685#51635685", "title": "Program for Sum of Factors", "body": "<p>Thinking a little bit about this, I came to the conclusion that 360 is a reasonable upper boundary for numbers which have to be tested.</p>\n\n<ul>\n<li>360 has for sure (at least) two factors 1 and 360 (and a lot more) which add to (more than) 361.</li>\n<li>Any number n &ge; 360 has at least a sum of factors &ge; n + 1.</li>\n</ul>\n\n<p>Funny, enough: 359 is a prime number and has only two factors (1, 359) which sum up to 360 (and seems to be the highest candidate).</p>\n\n<p>Hence, the OP's code can be wrapped into a loop from 1 ... 360 to solve this puzzle (finding the answer with brute force).</p>\n\n<p>My sample code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint getSumFactors(int n)\n{\n  int sum = 1 + n;\n  for (int i = 2; i &lt; n; ++i) if (n % i == 0) sum += i;\n  return sum;\n}\n\nint main()\n{\n  int nF = 0;\n  for (int n = 1; n &lt;= 360; ++n) {\n    if (getSumFactors(n) == 360) printf(\"%d.: %d\\n\", ++nF, n);\n  }\n  printf(\"%d numbers with factors which sum up to 360.\\n\", nF);\n  return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1.: 120\n2.: 174\n3.: 184\n4.: 190\n5.: 267\n6.: 295\n7.: 319\n8.: 323\n9.: 359\n9 numbers with factors which sum up to 360.\n</code></pre>\n\n<p><kbd><a href=\"https://wandbox.org/permlink/5mSeoIjXjWWG9yBk\" rel=\"nofollow noreferrer\"><strong>Live Demo on Wandbox</strong></a></kbd></p>\n\n<p>I'm a little bit surprised that there are only 9 candidates &ndash; had expected more. (So much about my \"mathematical feeling\"...)</p>\n"}, {"comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1533133666, "post_id": 51635856, "comment_id": 90236033, "body": "Aah. Now, I understand the part with &quot;the 5th&quot;. Good catch."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1533133799, "post_id": 51635856, "comment_id": 90236125, "body": "I&#39;m glad that I indexed my results. So, strictly speaking, the right solution can be found in my solution too. ;-)"}, {"owner": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1533133896, "post_id": 51635856, "comment_id": 90236202, "body": "@Scheff, Your program over delivers! ;)"}, {"owner": {"reputation": 3, "user_id": 10166120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35011d453dd0bd84d3e269ca1afd9a28?s=128&d=identicon&r=PG&f=1", "display_name": "HackerMan2000", "link": "https://stackoverflow.com/users/10166120/hackerman2000"}, "edited": false, "score": 0, "creation_date": 1533134652, "post_id": 51635856, "comment_id": 90236747, "body": "Thank you for help! The way you described your variables was perfect."}], "tags": [], "owner": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "is_accepted": false, "score": 1, "last_activity_date": 1533133609, "creation_date": 1533133609, "answer_id": 51635856, "question_id": 51635323, "link": "https://stackoverflow.com/questions/51635323/program-for-sum-of-factors/51635856#51635856", "title": "Program for Sum of Factors", "body": "<p>A configurable example with descriptive variables:</p>\n\n<pre><code>#include &lt;stdio.h&gt;     \n#include &lt;stdlib.h&gt;\n\n#define NUM_EMPLOYEES (1000)\n\nint main()\n{\n    int number_to_consider;\n    int potential_factor;\n    int factor_total = 0;\n    int num_suitable_numbers_found = 0;\n    int desired_factor_total = 360;\n    int number_of_numbers_to_Find = 5;\n\n    for(number_to_consider = 1; number_to_consider &lt; 10*desired_factor_total; number_to_consider++)\n    {\n        factor_total = 0;\n        for (potential_factor = 1; potential_factor &lt;= number_to_consider; potential_factor++)\n        {\n            if ((number_to_consider % potential_factor) == 0)\n            {\n                factor_total += potential_factor;\n            }\n        }\n\n        if (factor_total == desired_factor_total)\n        {\n            num_suitable_numbers_found++;\n            printf(\"Found candidate %i : %i\\n\", num_suitable_numbers_found, number_to_consider);\n        }\n\n        if(num_suitable_numbers_found &gt;= number_of_numbers_to_Find)\n        {\n            break;\n        }\n    }\n\n    return(0);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Found candidate 1 : 120\nFound candidate 2 : 174\nFound candidate 3 : 184\nFound candidate 4 : 190\nFound candidate 5 : 267\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10166120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35011d453dd0bd84d3e269ca1afd9a28?s=128&d=identicon&r=PG&f=1", "display_name": "HackerMan2000", "link": "https://stackoverflow.com/users/10166120/hackerman2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3890, "favorite_count": 0, "accepted_answer_id": 51635685, "answer_count": 2, "score": 0, "last_activity_date": 1533133609, "creation_date": 1533132109, "last_edit_date": 1533132243, "question_id": 51635323, "link": "https://stackoverflow.com/questions/51635323/program-for-sum-of-factors", "title": "Program for Sum of Factors", "body": "<p>I'm trying to write a program that checks for the 5th number that has 360 has the sum of its factors.</p>\n\n<p>I wrote a program that gets a users entered number and prints the factors and then the sum of all those factors. The part I'm having difficulty with is having two counting variables (the number that is being checked for factors and the number that is being divided by).</p>\n\n<p>Here is what I have:</p>\n\n<pre><code>    int number, i, total = 0;\n\n    printf(\"Enter a number: \");\n    scanf(\"%i\", &amp;number);\n\n    printf(\"The factors of %i are:\\n\", number);\n\n    for (i = 1; i &lt;= number; i++)\n    {\n        if (number % i == 0)\n        {\n            printf(\"%i\\n\", i);\n            total += i;\n        }\n\n    }\n    printf(\"The sum of all the factors of %i is %i\\n\", number, total);\n\nreturn(0);\n\n}\n</code></pre>\n"}, {"tags": ["c", "dev-c++"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1533131697, "post_id": 51635130, "comment_id": 90234540, "body": "I don&#39;t see any &quot;conversion&quot; or &quot;saving&quot; in this code. You just iterate and print ASCII values."}, {"owner": {"reputation": 29, "user_id": 10114092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gDgVH.jpg?s=128&g=1", "display_name": "Muhammad Ahmed", "link": "https://stackoverflow.com/users/10114092/muhammad-ahmed"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1533131814, "post_id": 51635130, "comment_id": 90234630, "body": "@EugeneSh. how can i convert ?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1533131816, "post_id": 51635130, "comment_id": 90234631, "body": "Please provide code that actually compiles. Please also provide a sample of the desired outout."}, {"owner": {"reputation": 1503, "user_id": 6901184, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZKRBgaWMhAY/AAAAAAAAAAI/AAAAAAAAC80/ry3so1Pwh-A/photo.jpg?sz=128", "display_name": "Mart&#237;n Zaragoza", "link": "https://stackoverflow.com/users/6901184/mart%c3%adn-zaragoza"}, "edited": false, "score": 0, "creation_date": 1533131851, "post_id": 51635130, "comment_id": 90234665, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/194465/how-to-parse-a-string-to-an-int-in-c\">How to parse a string to an int in C++?</a>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1533131862, "post_id": 51635130, "comment_id": 90234675, "body": "By using <code>strtol</code>."}, {"owner": {"reputation": 29, "user_id": 10114092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gDgVH.jpg?s=128&g=1", "display_name": "Muhammad Ahmed", "link": "https://stackoverflow.com/users/10114092/muhammad-ahmed"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1533131911, "post_id": 51635130, "comment_id": 90234723, "body": "@Gerhardh. suppose you save a string &quot;123&quot; and it converts it to an single integer which is declared by a, and a = 123 (after conversion)."}, {"owner": {"reputation": 1632, "user_id": 2429333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5eb897104dc190de7ea7da0ac29a59ae?s=128&d=identicon&r=PG", "display_name": "pbn", "link": "https://stackoverflow.com/users/2429333/pbn"}, "edited": false, "score": 0, "creation_date": 1533131935, "post_id": 51635130, "comment_id": 90234739, "body": "You are missing subtracting the offset <code>printf(&quot;%d\\n&quot;,n - &#39;0&#39;);</code>"}, {"owner": {"reputation": 1114, "user_id": 10111567, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Miguel", "link": "https://stackoverflow.com/users/10111567/miguel"}, "edited": false, "score": 2, "creation_date": 1533131990, "post_id": 51635130, "comment_id": 90234780, "body": "use either <code>strtol</code> or <code>atoi</code> to change from string to integer"}, {"owner": {"reputation": 29, "user_id": 10114092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gDgVH.jpg?s=128&g=1", "display_name": "Muhammad Ahmed", "link": "https://stackoverflow.com/users/10114092/muhammad-ahmed"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1533132016, "post_id": 51635130, "comment_id": 90234798, "body": "@EugeneSh. could you please answer it properly? as i&#39;m beginner, i can&#39;t solve whole problem by just knowing a single function"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1533132122, "post_id": 51635130, "comment_id": 90234881, "body": "As a beginner you should learn that each standard C function has a <b>man page</b>. You can search &quot;man strtol&quot; with your favorite search engine. The man page contains the signature, the description of all parameters and the return value of the function."}], "answers": [{"comments": [{"owner": {"reputation": 1362, "user_id": 6386250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/brwvr.jpg?s=128&g=1", "display_name": "Dr.Haimovitz", "link": "https://stackoverflow.com/users/6386250/dr-haimovitz"}, "reply_to_user": {"reputation": 29, "user_id": 10114092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gDgVH.jpg?s=128&g=1", "display_name": "Muhammad Ahmed", "link": "https://stackoverflow.com/users/10114092/muhammad-ahmed"}, "edited": false, "score": 0, "creation_date": 1533132613, "post_id": 51635313, "comment_id": 90235242, "body": "The key factor is that digit&#39;s ascii vals are corrusponding to the digits order so if the diff of two digit is x then the diff of the ascii values of those digits will be also x, &#39;0&#39; is the value that represent 0 , if you substract it from &#39;0&#39; you acctualy get zero value (&#39;0&#39;-&#39;0&#39;) if you substract &#39;x&#39; by &#39;0&#39; you will get &#39;x&#39;-&#39;0&#39; which is like x-0 -&gt;  exectly x"}], "tags": [], "owner": {"reputation": 1362, "user_id": 6386250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/brwvr.jpg?s=128&g=1", "display_name": "Dr.Haimovitz", "link": "https://stackoverflow.com/users/6386250/dr-haimovitz"}, "is_accepted": false, "score": 1, "last_activity_date": 1533132094, "creation_date": 1533132094, "answer_id": 51635313, "question_id": 51635130, "link": "https://stackoverflow.com/questions/51635130/convert-numeric-string-values-into-a-single-integer-not-ascii-values/51635313#51635313", "title": "convert numeric string values into a single integer (not ascii values)", "body": "<p>If by \"conversion\" you mean printing then you should substract the ascii value of zero from the character , then the ascii of zero wil print as zero , the ascii of one as one ans so on,</p>\n\n<pre><code>char lc[] = \"12345\";\nint i,n;\n\nfor(i=0;i&lt;5;i++)\n{\n    n = lc[i]-'0';\n    printf(\"%d\\n\",n); \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1533133468, "post_id": 51635319, "comment_id": 90235874, "body": "Note, that this will not work correctly with non-numerical strings, as <code>atoi</code> will return <code>0</code> and won&#39;t be able to distinguish between the string <code>&quot;0&quot;</code> and &quot;<code>sfsdsdf&quot;</code>."}], "tags": [], "owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "is_accepted": true, "score": 1, "last_activity_date": 1533132104, "creation_date": 1533132104, "answer_id": 51635319, "question_id": 51635130, "link": "https://stackoverflow.com/questions/51635130/convert-numeric-string-values-into-a-single-integer-not-ascii-values/51635319#51635319", "title": "convert numeric string values into a single integer (not ascii values)", "body": "<p>In your case you only assign in each iteration the current <code>ASCII</code> values to <code>n</code>, as you mentioned you want to convert the <code>String</code>into an <code>int</code>. </p>\n\n<p><strong>A simple and powerful function to achieve that is alternative to your way:</strong> <code>atoi(string)</code></p>\n\n<p><strong>In your case</strong>:</p>\n\n<pre><code> char lc[] = \"12345\";\n int n = atoi(lc);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1505, "user_id": 4344586, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zmULe.png?s=128&g=1", "display_name": "Frank AK", "link": "https://stackoverflow.com/users/4344586/frank-ak"}, "is_accepted": false, "score": 0, "last_activity_date": 1533132212, "creation_date": 1533132212, "answer_id": 51635355, "question_id": 51635130, "link": "https://stackoverflow.com/questions/51635130/convert-numeric-string-values-into-a-single-integer-not-ascii-values/51635355#51635355", "title": "convert numeric string values into a single integer (not ascii values)", "body": "<p>Because we use ascii <code>48</code> represent digit <code>0</code>, so a simply way to reach that is covert it by <code>mod</code> it, because the ascii define with increment, so <code>49</code> should be <code>1</code>, and so on.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nmain()\n{\n\n    char lc[] = \"12345\";\n    int i,n;\n    //p = &amp;lc;\n    int ascii_base=48;\n    for(i=0;i&lt;5;i++)\n    {\n        n = lc[i];\n        printf(\"%d\\n\",n - ascii_base);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>And if you want to save it back, and you can do it like:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nmain()\n{\n\n    char lc[] = \"12345\";\n    int ln = sizeof lc;\n    int i,n;\n    //p = &amp;lc;\n    int ascii_base=48;\n    for(i=0;i&lt;5;i++)\n    {\n        n = lc[i];\n        ln[i]=n - ascii_base;\n\n    }\n    printf(\"%s\\n\", ln);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "is_accepted": false, "score": 0, "last_activity_date": 1533132576, "creation_date": 1533132576, "answer_id": 51635464, "question_id": 51635130, "link": "https://stackoverflow.com/questions/51635130/convert-numeric-string-values-into-a-single-integer-not-ascii-values/51635464#51635464", "title": "convert numeric string values into a single integer (not ascii values)", "body": "<p>An alternative to <code>atoi</code> is to use <code>sscanf</code> which is useful if you want to convert multiple numbers that are in one string, especially if they are of different types such as a float and an integer. You will need to include stdio</p>\n\n<pre><code>char one_int[] = \"12345\";\nchar one_float = \"3.14\";\nchar a_float_and_an_int = \"1024  6.28\";\n\nint first_int;\nfloat first_float;\nint second_int;\nfloat second_float;\n\nsscanf(one_int,\"%d\", &amp;first_int);\nsscanf(one_float, \"%f\", &amp;first_float);\nsscanf(a_float_and_an_int, \"%d %f\", &amp;second_int, &amp;second_float\");\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 10114092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gDgVH.jpg?s=128&g=1", "display_name": "Muhammad Ahmed", "link": "https://stackoverflow.com/users/10114092/muhammad-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 51635319, "answer_count": 4, "score": 0, "last_activity_date": 1533132576, "creation_date": 1533131636, "question_id": 51635130, "link": "https://stackoverflow.com/questions/51635130/convert-numeric-string-values-into-a-single-integer-not-ascii-values", "title": "convert numeric string values into a single integer (not ascii values)", "body": "<p>I'm trying to convert string like \"1234\" into a single integer like, n = 1234;</p>\n\n<p>I'm using for loop for this but its saving the ASCII values instead of the actual values</p>\n\n<p>below is the code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nmain()\n{\n    char lc[] = \"12345\";\n    int i,n;\n    p = lc;\n\n    for(i=0;i&lt;5;i++)\n    {\n        n = lc[i];\n        printf(\"%d\\n\",n); \n    }\n}\n</code></pre>\n\n<p>what am I missing ??</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1533131004, "post_id": 51634864, "comment_id": 90234007, "body": "<code>name</code> has zero size, you can&#39;t copy anything there."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1533131118, "post_id": 51634864, "comment_id": 90234087, "body": "well, obviously you can, but the behavior when doing so <b>is undefined</b>. An array without a size in a <code>struct</code> is only allowed as the very last member, called a <i>flexible array member</i>, and only makes sense when dynamically allocating this <code>struct</code> with <code>malloc()</code>, adding the size for the array manually."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533131200, "post_id": 51634864, "comment_id": 90234159, "body": "also, unrelated, <i>stop using <code>conio.h</code> now!</i> -- it&#39;s a thing from the past. If you need &quot;console&quot; control, use <code>curses.h</code> for portable code (there are libraries providing it for many systems). If on the other hand, all you want is <code>clrscr()</code> -- think about just dropping it."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 2, "creation_date": 1533131201, "post_id": 51634864, "comment_id": 90234160, "body": "Post your output as text. There is no reason to go off site to help you"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1533131350, "post_id": 51634864, "comment_id": 90234293, "body": "This won&#39;t even compile."}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1533131595, "post_id": 51634864, "comment_id": 90234476, "body": "you need add #include&lt;string.h&gt; in order to use str functions."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1533131955, "post_id": 51634864, "comment_id": 90234754, "body": "@MadPhysicist This specific code maybe. But in general it can lead to nasty errors."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1533133557, "post_id": 51634864, "comment_id": 90235947, "body": "That&#39;s common, but not certain, @MadPhysicist.  Since C99, the expression that denotes the function being called needs to have an appropriate pointer-to-function type, and that is <i>not</i> established implicitly.  Even calls to functions that do have in-scope declarations can be erroneous if those declarations do not provide prototypes.  Thus, it is at best unhelpful to nitpick whether <code>#include</code>ing the appropriate library headers is strictly speaking <i>needed</i>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1533133846, "post_id": 51634864, "comment_id": 90236168, "body": "In fact, @EugeneSh., since <code>name</code> is a flexible array member, when it is accessed by <code>.</code> or <code>-&gt;</code>, it behaves as if it is as large as the size of the host struct minus its offset within the struct (given that the struct here is automatically allocated).  That could be zero, but it also could easily be large enough to accommodate the data being written into it.  The OP&#39;s code is quite possibly just fine in that regard, though that depends on how the implementation lays out the struct."}, {"owner": {"reputation": 111, "user_id": 7682313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5317000772f23bbb43cf860b69c69c?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Hazard", "link": "https://stackoverflow.com/users/7682313/kunal-hazard"}, "edited": false, "score": 0, "creation_date": 1533136412, "post_id": 51634864, "comment_id": 90237958, "body": "I have edited it  specifying the char array size but now the values are same for variables but the address of variables are different in main and display function...any help will be appreciated."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1533137982, "post_id": 51634864, "comment_id": 90239011, "body": "@JohnBollinger The same can be said about any underallocated array, that it might get somehow padded by the compiler and &quot;allow&quot; overflowing. When using flex member the programmer has to explicitly allocate the space required for it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1533139321, "post_id": 51634864, "comment_id": 90239793, "body": "No, @EugeneSh., flexible array members are subtly but importantly different in this regard.  The standard explicitly specifies that when one of them is accessed via a member-access operator, &quot;it behaves as if that member were replaced with the longest array (with the same element type) that would not make the structure larger than the object being accessed&quot; (C11 6.7.2.1/18).  The portable and safe way to ensure that there is enough space is to allocate the object dynamically, but if the struct is naturally large enough then accessing it is well-defined even for automatically allocated objects."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 7682313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5317000772f23bbb43cf860b69c69c?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Hazard", "link": "https://stackoverflow.com/users/7682313/kunal-hazard"}, "edited": false, "score": 0, "creation_date": 1533135341, "post_id": 51635212, "comment_id": 90237238, "body": "Thanks ...I forgot to add the size ....and yes its working as the contents displayed are same but the address aren&#39;t same for both the variables of structures"}, {"owner": {"reputation": 111, "user_id": 7682313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5317000772f23bbb43cf860b69c69c?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Hazard", "link": "https://stackoverflow.com/users/7682313/kunal-hazard"}, "edited": false, "score": 0, "creation_date": 1534487091, "post_id": 51635212, "comment_id": 90729868, "body": "Sorry i forgot to update ...the two variable address will be different as they are fomal and actual paramaters."}], "tags": [], "owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "is_accepted": false, "score": 0, "last_activity_date": 1533131874, "creation_date": 1533131874, "answer_id": 51635212, "question_id": 51634864, "link": "https://stackoverflow.com/questions/51634864/the-address-of-varible-of-same-structures-object-in-two-different-function-is-di/51635212#51635212", "title": "The address of varible of same structures object in two different function is different", "body": "<p>Just added the size for array in your code, it has fixed size during compile time.</p>\n\n<p>Don't use <code>conio.h</code> that is very old.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Conio.h\" rel=\"nofollow noreferrer\">conio.h</a></p>\n\n<blockquote>\n  <p>conio.h is a C header file used mostly by MS-DOS compilers to provide\n  console input/output. It is not part of the C standard library or ISO\n  C, nor is it defined by POSIX.</p>\n</blockquote>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nstruct student \n{\n    int id;\n    char name[20];\n};\n\nint main() \n{\n    struct student record = {0}; //Initializing to null\n\n    record.id=1;\n    strcpy(record.name, \"No one\");\n\n    printf(\" Id is: %d \\n\", record.id);\n    printf(\" Name is: %s \\n\", record.name);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1533132782, "creation_date": 1533132782, "answer_id": 51635539, "question_id": 51634864, "link": "https://stackoverflow.com/questions/51634864/the-address-of-varible-of-same-structures-object-in-two-different-function-is-di/51635539#51635539", "title": "The address of varible of same structures object in two different function is different", "body": "<p>In this structure declaration:</p>\n\n<blockquote>\n<pre><code>struct Person\n{\n  int id;\n  char name[];\n};\n</code></pre>\n</blockquote>\n\n<p>, the <code>name</code> member is a so-called \"flexible array member\".  This is not what you want for your purpose, especially because</p>\n\n<blockquote>\n  <p>In most situations, the flexible array member is ignored.</p>\n</blockquote>\n\n<p>(<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.2.1p18\" rel=\"nofollow noreferrer\">C2011 6.7.2.1/18</a>)</p>\n\n<p>The exceptions have to do with accessing the flexible array member via the <code>.</code> or <code>-&gt;</code> operator.  Passing a structure to a function by value, as you are doing, is <em>not</em> one of the exceptions.  So yes, the function does not receive the member.  Additionally, it is possible, but not certain, that your <code>main</code> invokes undefined behavior when it copies data into <code>name</code>, as a result of overrunning the bounds of the structure (the structure could be large enough to accommodate the data you're writing, but that's not guaranteed).</p>\n\n<p>You could make your code work with the structure declaration as it now stands by making sure to allocate the original structure (dynamically) with enough space for the intended contents of the <code>name</code> member, and by passing a pointer to it instead of passing it by value.  But that's surely a lot more trouble than it's worth, and it is somewhat specific to this case, as a structure can have at most one flexible array member.</p>\n\n<p>Surely what you really want to do instead is declare the <code>name</code> member with a size.  This is how C requires you to declare arrays, with flexible array members being the sole exception.  (Function parameters are <em>not</em> an exception, though they may seem to be.  That's a different story.)  If you declare <code>name</code> with a size, then your code should work fine:</p>\n\n<pre><code>struct Person {\n  int id;\n  char name[20];\n};\n</code></pre>\n\n<p>Of course, that limits you to the specified size.  If you want to be more adaptible then you can declare <code>name</code> as a <code>char *</code>, and then point it to large enough dynamically allocated space.  This is much more common and more broadly applicable than flexible array members, but it's probably overkill for your exercise.</p>\n"}], "owner": {"reputation": 111, "user_id": 7682313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a5317000772f23bbb43cf860b69c69c?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Hazard", "link": "https://stackoverflow.com/users/7682313/kunal-hazard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1533136220, "creation_date": 1533130926, "last_edit_date": 1533136220, "question_id": 51634864, "link": "https://stackoverflow.com/questions/51634864/the-address-of-varible-of-same-structures-object-in-two-different-function-is-di", "title": "The address of varible of same structures object in two different function is different", "body": "<p>i have two functions one is main and another one is display using structures I initialized the variable id and name and when i display the values . the values are different in main and display function.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\nstruct Person\n{\n  int id;\n  char name[];\n\n};\n\nvoid display(struct Person p)\n{\n  printf(\"\\n\\n value: \\n Id is : %d   And name is: %s  \\n \",p.id,p.name);\n   printf(\"Address: \\nThe addres in  function of id is %p and name  is %p \\n .........  \\n\",&amp;(p.id),&amp;(p.name));\n}\n\nvoid main()\n{\n  struct Person p;\n  clrscr();\n  p.id=2;\n  strcpy(p.name,\"kunal\");\n  printf(\"Values : \\n the id is %d and name is %s \\n\",p.id,p.name);\n  printf(\"Address: \\n The addres in main of id is %p and name is %p\",&amp;(p.id),&amp;(p.name));\n\n  display(p);\n  getch();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p>Values : </p>\n\n<p>the id is 2 and name is kunal</p>\n\n<p>Address: </p>\n\n<p>The addres in main of id is FFEA and name is FFEC</p>\n\n<p>value:</p>\n\n<p>Id is : 2   And name is: kunal</p>\n\n<p>Address: </p>\n\n<p>The addres in  function of id is FFDE and name  is FFE0</p>\n"}, {"tags": ["c", "microcontroller", "keypad", "xc8"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1533128955, "post_id": 51633868, "comment_id": 90232486, "body": "First it would be better to use loops for the row and col thing. You also do not count the edges of the buttons, which is maybe what you want. Do you have any interrupts? Maybe it would be helpful to post the complete code, especially the initialization of the registers."}, {"owner": {"reputation": 39, "user_id": 9653172, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "alc95", "link": "https://stackoverflow.com/users/9653172/alc95"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1533129856, "post_id": 51633868, "comment_id": 90233158, "body": "Here are the register initialisations:"}, {"owner": {"reputation": 39, "user_id": 9653172, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "alc95", "link": "https://stackoverflow.com/users/9653172/alc95"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1533129877, "post_id": 51633868, "comment_id": 90233180, "body": "<code>&#47;&#47;disable analog     ANSELA = 0x00;     ANSELB = 0x00;     ANSELC = 0x00;     ANSELD = 0x00;          &#47;&#47;set column pins as inputs     TRISBbits.TRISB3 = 1;     TRISBbits.TRISB1 = 1;     TRISBbits.TRISB5 = 1;          &#47;&#47;set row pins as outputs     TRISBbits.TRISB2 = 0;     TRISBbits.TRISB7 = 0;     TRISBbits.TRISB6 = 0;     TRISBbits.TRISB4 = 0;          &#47;&#47;set LED pins as outputs     TRISDbits.TRISD0 = 0;     TRISDbits.TRISD1 = 0;</code>"}, {"owner": {"reputation": 39, "user_id": 9653172, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "alc95", "link": "https://stackoverflow.com/users/9653172/alc95"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1533130577, "post_id": 51633868, "comment_id": 90233722, "body": "I haven&#39;t used interrupts for this. I see how using loops would make the key press decoding code more compact. Is the variable keyCount perhaps incrementing for as long as the key is pressed? I don&#39;t think that&#39;s how it works since it&#39;s just an if statement, but I really can&#39;t think of any explanation for why this is happening. If this is the case, then edge detection sounds like a reasonable solution. How would I go about detecting a positive edge, say?"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1533132047, "post_id": 51633868, "comment_id": 90234826, "body": "Yes it is how it works. You enter the if statement every time as long as the key is pressed. An example of edge detection would be to remember the old values of the keys and compare it with the new ones."}, {"owner": {"reputation": 39, "user_id": 9653172, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "alc95", "link": "https://stackoverflow.com/users/9653172/alc95"}, "reply_to_user": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 0, "creation_date": 1533132401, "post_id": 51633868, "comment_id": 90235102, "body": "Yes, that makes sense. The if statement will be entered as long as the key is pressed, I was just getting confused by the fact that it&#39;s an if statement, not a while statement. I will try the method you suggested, by looking for changes in the key state by comparing to previous values, rather than the looking for the &quot;high&quot; state."}], "answers": [{"tags": [], "owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "is_accepted": false, "score": 1, "last_activity_date": 1533132896, "creation_date": 1533132896, "answer_id": 51635590, "question_id": 51633868, "link": "https://stackoverflow.com/questions/51633868/pic16f1717-with-xc8-v1-43-variable-for-keypad-presses/51635590#51635590", "title": "PIC16F1717 with XC8 v1.43, variable for keypad presses", "body": "<p>The problem is that you have no edge detection on your keys. That means that as long as you press a key the if statement is entered every loop cycle. Here is a small example which may give you the basic idea how to implement a loop detection.</p>\n\n<pre><code>int key[12];\nint key_old[12];\n\nread_keys(key); //function that reads the keys in\n\nwhile(1)\n{\n    memcpy(key_old, key, 12*sizeof(key[0])); //copy key to key_old\n    read_keys(key); //function that reads the keys in\n\n    for(int i=0;i&lt;12;i++)\n    {\n        if(key[i] &amp;&amp; !key_old[i])\n        {\n            //positive edge on key i\n        }\n    }\n\n    __delay_ms(50); //Debouncing\n}\n</code></pre>\n\n<p>This code is not perfect but should give a basic idea as mentioned.</p>\n"}], "owner": {"reputation": 39, "user_id": 9653172, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "alc95", "link": "https://stackoverflow.com/users/9653172/alc95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533132896, "creation_date": 1533128159, "question_id": 51633868, "link": "https://stackoverflow.com/questions/51633868/pic16f1717-with-xc8-v1-43-variable-for-keypad-presses", "title": "PIC16F1717 with XC8 v1.43, variable for keypad presses", "body": "<p>I have a 4x3 matrix keypad connected to PORT B (RB1-RB7) of a PIC16F1717. I scan for keypad presses by setting each of the rows high in turn, and reading the column values. The key pressed can be decoded by matching the row and column. I am debouncing with a short delay:</p>\n\n<pre><code>while(1)\n{\n    //scan for key presses\n    __delay_ms(10);\n    ROW1 = 1;\n    ROW2 = 0;\n    ROW3 = 0;\n    ROW4 = 0;\n    if (COL1 == 1)\n    {\n        __delay_ms(100);\n        if (COL1 == 1)\n        {\n            key = 1;\n            keyCount = keyCount ++ 1;\n        }\n    }\n    else if (COL2 == 1)\n    {\n        __delay_ms(100);\n        if (COL2 == 1)\n        {\n            key = 2;\n            keyCount = keyCount + 1;\n\n        }\n    }\n    //and so on for the other rows and columns\n</code></pre>\n\n<p>The two variable key and keyCount keep track of which key has been pressed, and the number of keys pressed, respectively. When 4 keys have been pressed, I want to execute the following code:</p>\n\n<pre><code>    if (keyCount == 4)\n    {\n        LED = 1;\n        __delay_ms(500);\n        LED = 0;\n        __delay_ms(500);\n        LED = 1;\n        __delay_ms(500);\n        LED = 0;\n        __delay_ms(500);\n        LED = 1;\n        __delay_ms(500);\n        servoDemo();\n        __delay_ms(500);\n        LED = 0;\n        keyCount = 0;\n\n    }\n</code></pre>\n\n<p>This is also in the while(1) loop inside the main function. The problem I am having is that incrementing the keyCount does not work. Previously, I tried keyCount++ and it worked, but before that this wouldn't work either. I tried debugging by setting keyCount = 4 instead of incrementing it by one, and it worked.</p>\n\n<p>Both variables were declared (and initialised) inside the main function, but outside the while(1) loop. Also, I defined the following:</p>\n\n<pre><code>//pin definitions\n//////////////////////////\n#define ROW1 PORTBbits.RB2\n#define ROW2 PORTBbits.RB7\n#define ROW3 PORTBbits.RB6\n#define ROW4 PORTBbits.RB4\n\n#define COL1 PORTBbits.RB3\n#define COL2 PORTBbits.RB1\n#define COL3 PORTBbits.RB5\n\n#define SERVOSIG PORTDbits.RD0\n#define LED PORTDbits.RD1\n</code></pre>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1533126557, "post_id": 51633306, "comment_id": 90230729, "body": "What error exactly?  Is <code>lib_9_3.so</code> something you built and can modify?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1533126605, "post_id": 51633306, "comment_id": 90230767, "body": "<code>dlopen()</code> doesn&#39;t return a (pointer to a) function, so this code looks fishy..."}, {"owner": {"reputation": 165, "user_id": 5354674, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dHJgbdkBHc8/AAAAAAAAAAI/AAAAAAAAABQ/Ctl7q3eTOe8/photo.jpg?sz=128", "display_name": "Mayank Kataruka", "link": "https://stackoverflow.com/users/5354674/mayank-kataruka"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1533127895, "post_id": 51633306, "comment_id": 90231718, "body": "@JohnZwinck , Yea Its something I built and I can modify."}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1533131462, "post_id": 51633306, "comment_id": 90234386, "body": "I suggest you build your <code>lib_9_3.so</code> with <code>-Wl,--no-undefined</code> to prevent it building with unsatisfied dependencies.  See <a href=\"https://stackoverflow.com/questions/2356168/force-gcc-to-notify-about-undefined-references-in-shared-libraries\" title=\"force gcc to notify about undefined references in shared libraries\">stackoverflow.com/questions/2356168/&hellip;</a>"}], "owner": {"reputation": 165, "user_id": 5354674, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dHJgbdkBHc8/AAAAAAAAAAI/AAAAAAAAABQ/Ctl7q3eTOe8/photo.jpg?sz=128", "display_name": "Mayank Kataruka", "link": "https://stackoverflow.com/users/5354674/mayank-kataruka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "closed_date": 1533128009, "answer_count": 0, "score": 0, "last_activity_date": 1533127739, "creation_date": 1533126443, "last_edit_date": 1533127739, "question_id": 51633306, "link": "https://stackoverflow.com/questions/51633306/load-multiple-library-in-c-program", "closed_reason": "Duplicate", "title": "Load Multiple Library in C program", "body": "<p>I dont know if this is a bad question, but I am having some problem of an undefined symbol when my program is run.</p>\n\n<p>I have more than 20 dynamic libraries,</p>\n\n<p>When I run my program that loads my library </p>\n\n<pre><code> void *encode_func  = dlopen(\"lib_9_3.so\", RTLD_LAZY  );\n</code></pre>\n\n<p>It returns error as undefined symbol,</p>\n\n<p>All its symbol depends upon those 20 dynamic libraries\nCan I load all those dynamic libraries in my C program ??? </p>\n\n<p>EDIT::</p>\n\n<pre><code>if ( encode_func == NULL)\n    {\n            fprintf(stderr, \"dlopen failed: %s\\n\", dlerror());\n            return 1;\n    }\n</code></pre>\n\n<p>Code is fine,\ndlerror is returning</p>\n\n<pre><code> dlopen failed: ./lib_9_3.so: undefined symbol: sip_getExtensionParamCountFromFromHdr\n</code></pre>\n\n<p>These symbols are present in my 20 dynamic libraries,\nI found this out by doing  \"nm\"</p>\n\n<p>One more thing, these undefined symbols are not system specific.</p>\n\n<p>Can I load all those dynamic libraries in my C program ??? </p>\n"}, {"tags": ["c", "bitwise-operators"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1533126218, "post_id": 51632845, "comment_id": 90230506, "body": "there are no &quot;macro functions&quot;, only &quot;function-like macros&quot; -- you just found the difference. A macro is always just replacing text in your source code, even if it looks like a function."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533126314, "post_id": 51632845, "comment_id": 90230564, "body": "apart from the precedence issue you&#39;re getting here, things can get worse when parameters have <i>side-effects</i> when evaluated. Your macro will evaluate both <code>x</code> and <code>y</code> <b>twice</b> ... a function call wouldn&#39;t."}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1533129172, "post_id": 51632845, "comment_id": 90232668, "body": "Anyway, why are you calling it <code>SQUARE</code>?"}, {"owner": {"reputation": 23, "user_id": 7866172, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/t8mO7.jpg?s=128&g=1", "display_name": "Taufiq", "link": "https://stackoverflow.com/users/7866172/taufiq"}, "edited": false, "score": 0, "creation_date": 1533208105, "post_id": 51632845, "comment_id": 90267404, "body": "It is just a function name nothing else"}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 3, "creation_date": 1533126805, "post_id": 51632886, "comment_id": 90230912, "body": "Also warn the OP about multiple evaluation"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1533126897, "post_id": 51632886, "comment_id": 90230989, "body": "@chqrlie It is obvious, I think, if the text is just replaced :)"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 3, "creation_date": 1533126959, "post_id": 51632886, "comment_id": 90231033, "body": "If all obvious things were equally obvious for everyone, there wouldn&#39;t be questions..."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 1, "creation_date": 1533129392, "post_id": 51632886, "comment_id": 90232835, "body": "The macro <code>SQUARE</code> obviously computes the minimum value of its arguments, and the inline function does it using <code>unsigned</code> arithmetic, which is questionable given the type of <code>a</code>, <code>b</code>, <code>c</code> and <code>var</code> in the OP&#39;s code..."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1533131337, "post_id": 51632886, "comment_id": 90234276, "body": "Macros do replacement by preprocessor tokens, not text."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533135936, "post_id": 51632886, "comment_id": 90237650, "body": "@EricPostpischil in this case === text"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533136284, "post_id": 51632886, "comment_id": 90237875, "body": "@P__J__: Teaching people a false rule leads them to incorrect conclusions in the future. The fact that the rule\u2019s error is not apparent in the current instance is not redeeming and may even make it worse, as it leads people to believe the false rule is correct, which hinders their ability to discover errors in the future."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533137217, "post_id": 51632886, "comment_id": 90238494, "body": "@EricPostpischil preprocessor tokenisation is far beyond the scope of this question and is usually confusing for the beginners (and I think OP is one of). Most beginners books simplifies it to the textual replacement as well."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1533142052, "post_id": 51632886, "comment_id": 90241344, "body": "(a) Tokenization is not beyond the scope of the question; it is fundamental to macro expansion. (b) Confusion for beginners is grounds for explaining carefully and in appropriate steps. It is not grounds for making false statements. One could say the replacement is similar to replacing macro with the source code from the macro, or even say it is similar to text replacement but caution the reader that it is not exactly text replacement. (c) Why should anybody accept unnamed beginners books as a good example?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533142385, "post_id": 51632886, "comment_id": 90241529, "body": "So try to use this language teaching beginners :) The effect will right oppsite than expected. They just will not understand anything and will have total mess in their heads. That is the reason why people start learning in the primary school, not at the  uni"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 3, "last_activity_date": 1533127673, "last_edit_date": 1533127673, "creation_date": 1533125151, "answer_id": 51632886, "question_id": 51632845, "link": "https://stackoverflow.com/questions/51632845/does-macro-function-with-operator-precedence-show-unusual-result/51632886#51632886", "title": "Does macro function with operator precedence show unusual result?", "body": "<p>Macros require parentheses as they are not functions and just do the textual replacement</p>\n\n<pre><code>#define SQUARE(x,y) (((x)&lt;(y))?(x):(y))\n</code></pre>\n\n<p>The macro is extremely side effects error and UB prone:</p>\n\n<p>Example: <code>SQUATE(x++,y)</code></p>\n\n<p>in your example 5 &amp; 3 will be evaluated every time you have the <code>x</code> in your macro. It will be less effective than the inline function </p>\n\n<pre><code>inline unsigned SQUARE(unsigned x, unsigned y)\n{\n  return (x &lt; y) ? x : y;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 7866172, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/t8mO7.jpg?s=128&g=1", "display_name": "Taufiq", "link": "https://stackoverflow.com/users/7866172/taufiq"}, "edited": false, "score": 0, "creation_date": 1533208674, "post_id": 51632889, "comment_id": 90267788, "body": "Thanks, that is what I was missing, replacing the variable with the sent values. And if you give me any link or something to know more about Macros as their output is different to others with some explanation please."}, {"owner": {"reputation": 23, "user_id": 7866172, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/t8mO7.jpg?s=128&g=1", "display_name": "Taufiq", "link": "https://stackoverflow.com/users/7866172/taufiq"}, "edited": false, "score": 0, "creation_date": 1533209260, "post_id": 51632889, "comment_id": 90268164, "body": "&#39;#define foo(x, y) (x / y + x)     int i = -6, j = 3;     printf(&quot;%d\\n&quot;,foo(i + j, 3));&#39;   Can you please explain this, Output is &#39;-8&#39;"}, {"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "reply_to_user": {"reputation": 23, "user_id": 7866172, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/t8mO7.jpg?s=128&g=1", "display_name": "Taufiq", "link": "https://stackoverflow.com/users/7866172/taufiq"}, "edited": false, "score": 0, "creation_date": 1533209557, "post_id": 51632889, "comment_id": 90268360, "body": "@Taufiq The macro evaluates to <code>(-6+3 &#47; 3 + -6+3)</code>, which becomes <code>(-6+1-6+3)</code> which is <code>-8</code>. Note that <code>&#47;</code> binds stronger than <code>+</code>."}], "tags": [], "owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "is_accepted": true, "score": 6, "last_activity_date": 1533210484, "last_edit_date": 1533210484, "creation_date": 1533125167, "answer_id": 51632889, "question_id": 51632845, "link": "https://stackoverflow.com/questions/51632845/does-macro-function-with-operator-precedence-show-unusual-result/51632889#51632889", "title": "Does macro function with operator precedence show unusual result?", "body": "<p>Macros are just replaced by the preprocessor, so the arguments are not evaluated and then passed like in functions.</p>\n\n<p>In your example the expression <code>SQUARE(a &amp; c, b);</code> will become <code>(a &amp; c &lt; b ? a &amp; c : b);</code></p>\n\n<p>For <code>a=5, b=6, c=3</code> it evaluates to:</p>\n\n<pre><code>(5 &amp; 3&lt;6 ? 5&amp;3 : 6) //'&lt;' precede '&amp;' as you correctly mentioned\n(5&amp;1 ? 5&amp;3 : 6) // '3 &lt; 6' is a boolean expression which evaluates to 1. '&amp;' is bitwise AND.\n(1 ? 1 : 6)\n(1)\n</code></pre>\n\n<p>So <code>1</code> is the right output.</p>\n\n<p>EDIT:</p>\n\n<p>A good aproach is to always use parentheses around your arguments and the whole expression to eliminate the problem of operator precedence.</p>\n\n<p>As mention by others it can be dangerous to use macros due to multiple evaluation, which may not only effect performance.</p>\n\n<p>For example:</p>\n\n<pre><code>#define SQUARE(x) ((x)*(x))\n</code></pre>\n\n<p>seems to only square the argument, but if you call it like</p>\n\n<pre><code>f = SQUARE(x++);\n</code></pre>\n\n<p>you will get undefined behaviour. A better approach for small function would be to declare it as <code>inline</code>.</p>\n\n<pre><code>inline int square(int x)\n{\n    return x*x;\n}\n</code></pre>\n\n<p>Also as mentioned by @EricPostpischil macros are not a textual replacement as the preprocessor replaces by tokens.</p>\n\n<p>For example:</p>\n\n<pre><code>#define a 1\n#define b 2\n\nprintf(\"%d\\n\", ab);\n</code></pre>\n\n<p>here <code>ab</code> is not replaced with <code>12</code> as someone would expect for pure textual replacement.</p>\n"}, {"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1533131344, "post_id": 51633803, "comment_id": 90234287, "body": "Macros do replacement by preprocessor tokens, not text."}], "tags": [], "owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "is_accepted": false, "score": 1, "last_activity_date": 1533129768, "last_edit_date": 1533129768, "creation_date": 1533127945, "answer_id": 51633803, "question_id": 51632845, "link": "https://stackoverflow.com/questions/51632845/does-macro-function-with-operator-precedence-show-unusual-result/51633803#51633803", "title": "Does macro function with operator precedence show unusual result?", "body": "<p>In a bit more detail, as @P__J__ said, macros are just text replacement by the pre-processor, not functions. So this:</p>\n\n<pre><code>#define SQUARE(x,y) (x&lt;y?x:y)\nint a = 5, b = 6, c = 3;\nint var = SQUARE(a &amp; c,b);\n</code></pre>\n\n<p>is translated to:</p>\n\n<pre><code>int a = 5, b = 6, c = 3;\nint var = (a &amp; c&lt;b?a &amp; c:b);\n</code></pre>\n\n<p>Because every <code>x</code> is replaced with <code>a &amp; c</code> and every y is replaced with <code>b</code>.</p>\n\n<p>If you also apply the values as in @Osiris 's answer, you'll get:</p>\n\n<pre><code>int var = (5 &amp; 3 &lt; 6 ? 5 &amp; 3 : 6);\n</code></pre>\n\n<p>At this point, as you already said, <code>&lt;</code> takes precedence over <code>&amp;</code>.</p>\n\n<p>The result of <code>&lt;</code> is true or false, which means <code>1</code> or <code>0</code>, so <code>3 &lt; 6</code> becomes <code>1</code>.</p>\n\n<p>The result of <code>&amp;</code> is the bitwise <code>AND</code> between two numbers, which in this case is also <code>1</code> (because <code>5</code> is <code>101</code> and <code>3</code> is <code>011</code>).</p>\n\n<p>This is why it becomes</p>\n\n<p><code>(5 &amp; 1 ? 1 : 6)</code></p>\n\n<p>That next <code>5 &amp; 1</code> will also become <code>1</code> (because of the <code>AND</code> between <code>101</code> and <code>001</code>), so you'll get:</p>\n\n<p><code>(1 ? 1 : 6)</code></p>\n\n<p>And since <code>1</code> is true, you'll get the first value, which is also a <code>1</code>.</p>\n\n<p>Also, as already pointed out, be careful with evaluation in a macro.\nThese are just numbers and you're already seeing some not so obvious behaviour, but if had passed a function as one of the arguments, that function would've run multiple times.</p>\n\n<p>For example</p>\n\n<pre><code>#define SQUARE(x,y) (x&lt;y?x:y)\nint var = SQUARE(update_counter(a), 1);\n</code></pre>\n\n<p>would have been translated to </p>\n\n<pre><code>int var = (update_counter(a) &lt; 1 ? update_counter(a) : 1);\n</code></pre>\n\n<p>Thus potentially updating a hypothetical counter twice.</p>\n"}], "owner": {"reputation": 23, "user_id": 7866172, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/t8mO7.jpg?s=128&g=1", "display_name": "Taufiq", "link": "https://stackoverflow.com/users/7866172/taufiq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 51632889, "answer_count": 3, "score": 1, "last_activity_date": 1533210484, "creation_date": 1533125004, "question_id": 51632845, "link": "https://stackoverflow.com/questions/51632845/does-macro-function-with-operator-precedence-show-unusual-result", "title": "Does macro function with operator precedence show unusual result?", "body": "<pre><code>#define SQUARE(x,y) (x&lt;y?x:y)\n   int a = 5, b = 6, c = 3;\n    int var = SQUARE(a &amp; c,b);\n</code></pre>\n\n<p>I have searched and learnt that '&lt;' precede '&amp;'. As per rules it should give '5'. But it is giving output as '1'. But in some cases it is giving right output. Can you please explain macro rules of this and what am I missing here.</p>\n"}, {"tags": ["c", "endianness"], "comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 2, "creation_date": 1533124987, "post_id": 51632804, "comment_id": 90229671, "body": "No, type signess does not matter in this case BTW what is stopping you from checking."}, {"owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533125156, "post_id": 51632804, "comment_id": 90229788, "body": "I just wanted to know if at all unsigned int and char will induce any false results!"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1533125225, "post_id": 51632804, "comment_id": 90229836, "body": "If you&#39;re just after portability, wouldn&#39;t you just use functions like <code>ntohs</code> and <code>htons</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1533125880, "post_id": 51632804, "comment_id": 90230270, "body": "don&#39;t forget mixed/middle-endian ;)"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 4, "creation_date": 1533126001, "post_id": 51632804, "comment_id": 90230349, "body": "<code>sizeof(unsigned int)</code> ==&gt; <code>sizeof(uint32_t)</code> ?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533131313, "post_id": 51632804, "comment_id": 90234256, "body": "Detail, This code attempts to discern the endianness of <i>integers</i>, not the machine.  The endianness of floating point may uncommonly differ.  Compiler options can affect the result too as some machines allow either."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533131702, "post_id": 51632804, "comment_id": 90234547, "body": "&quot;wanted functionality to make the code portable&quot; --&gt; High portability considers that <code>uint8_t</code> is an <i>optional</i> type.  <code>uint8_t</code> is not available when <code>CHAR_BIT &gt; 8</code>."}, {"owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533537798, "post_id": 51632804, "comment_id": 90364823, "body": "@4386427, I have updated the question, I forgot to replace &quot;unsigned int&quot; with &quot;uint32_t&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 3, "creation_date": 1533127433, "post_id": 51632897, "comment_id": 90231373, "body": "if you can do, a bit explanation is better"}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1533383690, "post_id": 51632897, "comment_id": 90332667, "body": "Don&#39;t you think to explain its logic still? Middle-endian, little-endian, big-endian ??"}], "tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 0, "last_activity_date": 1533125202, "creation_date": 1533125202, "answer_id": 51632897, "question_id": 51632804, "link": "https://stackoverflow.com/questions/51632804/determining-endianness-of-machine-architecture-in-c-the-correct-way/51632897#51632897", "title": "Determining endianness of machine architecture in C the correct way", "body": "<p>You can simply <code>return ntohs(12345) != 12345</code>.  </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1533128351, "post_id": 51633795, "comment_id": 90232029, "body": "@snr that&#39;s not strictly necessary, it &quot;normalizes&quot; every nonzero value to <code>1</code>."}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 1, "creation_date": 1533128444, "post_id": 51633795, "comment_id": 90232097, "body": "humm, other than <code>0</code>, is every value <code>1</code> in C? I mean why not just <code>*r</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 1, "creation_date": 1533128596, "post_id": 51633795, "comment_id": 90232208, "body": "this function is expected to return a <i>truthy</i> or <i>falsey</i> value. Anything not <code>0</code> is <i>truthy</i> in C, but the canonic value for <i>true</i> is <code>1</code>. Now, I <i>think</i> I can&#39;t be sure the value bits in a <code>char</code> are arranged in the same way as in an <code>int</code>, therefore reading <code>*r</code> could give any nonzero value on a little-endian machine. It would be ok to return this directly, I just thought limiting the return values to <code>0</code> and <code>1</code> is nicer ;)"}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1533128661, "post_id": 51633795, "comment_id": 90232259, "body": "humm, it&#39;s the subtle nuance. Thank you so much!"}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1533380321, "post_id": 51633795, "comment_id": 90331869, "body": "I hope 6 days go fast. I&#39;d like to see you again here. You&#39;re valuable person for us. I reap the benefit of you too much. See you sir, Soner"}, {"owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 0, "creation_date": 1533538360, "post_id": 51633795, "comment_id": 90365091, "body": "is there a reason for returning !!*r instead of just *r?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 4, "last_activity_date": 1533127925, "creation_date": 1533127925, "answer_id": 51633795, "question_id": 51632804, "link": "https://stackoverflow.com/questions/51632804/determining-endianness-of-machine-architecture-in-c-the-correct-way/51633795#51633795", "title": "Determining endianness of machine architecture in C the correct way", "body": "<p>To answer your immediate question, <code>unsigned</code> and <code>char</code> will work just as well <strong>if</strong> <code>CHAR_BIT &lt; 16</code>. That's because the C standard requires an <code>unsigned</code> to have at least 16 value bits and every type must have a storage size that's a multiple of a <code>char</code> (a byte). So as long as your <code>char</code> has fewer than 16 bits, an <code>unsigned</code> must consist of at least 2 bytes and the endianness check will work this way.</p>\n\n<p>Using <code>char</code> actually has the benefit that it's allowed to alias any other type. So I'd suggest something like this:</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#if CHAR_BIT &gt; 15\n#error exotic platform\n#endif\n\nint is_little_endian(void)\n{\n    unsigned x = 1U;\n    unsigned char *r = (unsigned char *)&amp;x;\n    return !!*r;\n}\n</code></pre>\n\n<p>I used <code>unsigned char</code> here just to be sure.</p>\n\n<p>Be aware this assumes there's no <em>exotic</em> byte order (like \"middle-endian\"). Also, I personally think such code is a waste of space in the program, if you really need endianness information, it's probably better to have your build system determine it for your target and just <code>#define</code> it (e.g. in a <code>config.h</code> file).</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533128805, "post_id": 51633850, "comment_id": 90232364, "body": "And here ... while it&#39;s correct that using <code>unsigned</code> and <code>char</code> <b>could</b> go wrong, the chances for this are quite narrow ;) e.g. it <b>can&#39;t</b> go wrong on a platform that actually provides a <code>uint8_t</code> type (because this requires <code>char</code> to have 8 bits as well)."}, {"owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "edited": false, "score": 0, "creation_date": 1533129017, "post_id": 51633850, "comment_id": 90232533, "body": "Yes, your saying makes it clearer. C standard guarantees char is 8bit as well."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533129052, "post_id": 51633850, "comment_id": 90232569, "body": "no it doesn&#39;t (otherwise using <code>char</code> and <code>unsigned</code> could never go wrong). Your answer is correct."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533129085, "post_id": 51633850, "comment_id": 90232596, "body": "All I&#39;m saying is it&#39;s <b>very</b> unlikely to find a platform that has more than 8 bits for <code>char</code> -- and on such a platform, the <code>uint8_t</code> type cannot exist."}], "tags": [], "owner": {"reputation": 13191, "user_id": 4990642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/xY0PD.jpg?s=128&g=1", "display_name": "snr", "link": "https://stackoverflow.com/users/4990642/snr"}, "is_accepted": false, "score": 1, "last_activity_date": 1533129043, "last_edit_date": 1533129043, "creation_date": 1533128096, "answer_id": 51633850, "question_id": 51632804, "link": "https://stackoverflow.com/questions/51632804/determining-endianness-of-machine-architecture-in-c-the-correct-way/51633850#51633850", "title": "Determining endianness of machine architecture in C the correct way", "body": "<blockquote>\n  <p>I was just wanting to know if there will be false results if I use\n  <code>unsigned int</code> and <code>char</code> here instead of <code>uint32_t</code> and <code>uint8_t</code>? If\n  yes, why?</p>\n</blockquote>\n\n<p>Yes, it may.</p>\n\n<p>Types mentioned(<code>unsigned int</code> and <code>char</code>) are <em>implementation-defined</em>. It may depend on compiler, machine, compiler options etc. If you look at the types declared in <a href=\"http://en.wikibooks.org/wiki/C_Programming/C_Reference/stdint.h\" rel=\"nofollow noreferrer\">stdint.h</a>. This is part of the <a href=\"http://en.wikipedia.org/wiki/C_standard_library\" rel=\"nofollow noreferrer\">standard library</a>, so it is expected (though technically not guaranteed) to be available everywhere. Among the types declared here are <code>int8_t</code>, <code>uint8_t</code>, <code>int16_t</code>, <code>uint16_t</code>, <code>int32_t</code>, <code>uint32_t</code>, <code>int64_t</code>, and <code>uint64_t</code>.</p>\n"}], "owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 51633795, "answer_count": 3, "score": 2, "last_activity_date": 1533537693, "creation_date": 1533124906, "last_edit_date": 1533537693, "question_id": 51632804, "link": "https://stackoverflow.com/questions/51632804/determining-endianness-of-machine-architecture-in-c-the-correct-way", "title": "Determining endianness of machine architecture in C the correct way", "body": "<p>I just wrote the following function to determine the endianness of the machine architecture (writing for an ARM Cortex-M7 architecture based MCU though, but wanted functionality to make the code portable):</p>\n\n<pre><code>uint8_t is_little_endian()\n{\n   static const union test {\n      uint32_t num;\n      uint8_t  bytes[sizeof(uint32_t)];\n   } p = {.num =  1U };              \n\n   return (p.bytes[0] == 1U); \n}\n</code></pre>\n\n<p>I was just wanting to know if there will be any false results if I use <code>unsigned int</code> and <code>char</code> here instead of <code>uint32_t</code> and <code>uint8_t</code> in the above code? If yes, why?</p>\n"}, {"tags": ["c++", "c", "recursion", "subset"], "comments": [{"owner": {"reputation": 13642, "user_id": 4013258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d423395e1033fa23d80a5561ab170fa?s=128&d=identicon&r=PG&f=1", "display_name": "Surt", "link": "https://stackoverflow.com/users/4013258/surt"}, "edited": false, "score": 0, "creation_date": 1533129218, "post_id": 51632667, "comment_id": 90232706, "body": "And the subset must be contiguous in the original set?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9762426"}, "reply_to_user": {"reputation": 13642, "user_id": 4013258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d423395e1033fa23d80a5561ab170fa?s=128&d=identicon&r=PG&f=1", "display_name": "Surt", "link": "https://stackoverflow.com/users/4013258/surt"}, "edited": false, "score": 0, "creation_date": 1533129610, "post_id": 51632667, "comment_id": 90232983, "body": "@Surt yes, subset must be contiguous"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9762426"}, "edited": false, "score": 0, "creation_date": 1533126616, "post_id": 51632745, "comment_id": 90230776, "body": "yah i can do that. But what i want actually is to compare all the subset sum values in the recursive function and then return the maximum value in the main function so that I can use that value for another purpose"}, {"owner": {"reputation": 8852, "user_id": 1383240, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41093f55db0d5feaa0012ed6b5c3ca5c?s=128&d=identicon&r=PG&f=1", "display_name": "NiVeR", "link": "https://stackoverflow.com/users/1383240/niver"}, "edited": false, "score": 1, "creation_date": 1533126868, "post_id": 51632745, "comment_id": 90230963, "body": "Hmm, why can&#39;t you use the value in this way? It seems the same to me."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1533128082, "post_id": 51632745, "comment_id": 90231838, "body": "@MavishA it doesnt matter how you compute the value ;) NiVeRs approach is valid, so even if you also need the other subset sums, you can use this approach to calculate the maximum...."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1533128144, "post_id": 51632745, "comment_id": 90231878, "body": "@MavishA ... but if you already have all the subset sums, then finding the maximum value amongst them should actually be easier"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9762426"}, "reply_to_user": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1533129699, "post_id": 51632745, "comment_id": 90233050, "body": "@user463035818  yah, but I&#39;ve not found any good way to store the subset sum. If you look at my code, you can see i want to compare the &quot;sum&quot; values and then find the max from them"}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1533130214, "post_id": 51632745, "comment_id": 90233466, "body": "@MavishA remove the C tag and use a <code>std::vector</code> ;)"}], "tags": [], "owner": {"reputation": 8852, "user_id": 1383240, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41093f55db0d5feaa0012ed6b5c3ca5c?s=128&d=identicon&r=PG&f=1", "display_name": "NiVeR", "link": "https://stackoverflow.com/users/1383240/niver"}, "is_accepted": false, "score": 2, "last_activity_date": 1533124762, "creation_date": 1533124762, "answer_id": 51632745, "question_id": 51632667, "link": "https://stackoverflow.com/questions/51632667/finding-the-maximum-sum-from-the-subset-sum-using-recursion/51632745#51632745", "title": "Finding the maximum sum from the subset sum using recursion", "body": "<p>If you are interested in the <em>subset</em> of size <code>k</code> out of set with cardinality <code>n</code> then you don't need to do any of the combination generation stuff. You can just sort the array in <strong>decreasing order</strong> and pick the top <code>k</code> elements, as they are sorted in decreasing order they will give the maximum sum of subset of size <code>k</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 13642, "user_id": 4013258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d423395e1033fa23d80a5561ab170fa?s=128&d=identicon&r=PG&f=1", "display_name": "Surt", "link": "https://stackoverflow.com/users/4013258/surt"}, "is_accepted": false, "score": 0, "last_activity_date": 1533130675, "creation_date": 1533130675, "answer_id": 51634782, "question_id": 51632667, "link": "https://stackoverflow.com/questions/51632667/finding-the-maximum-sum-from-the-subset-sum-using-recursion/51634782#51634782", "title": "Finding the maximum sum from the subset sum using recursion", "body": "<p>Let see if we can do it using std::algorithms (untested code).</p>\n\n<pre><code>std::partial_sum(data.begin(), data.end(), std::plus&lt;int&gt;);\nstd::vector&lt;int&gt; subSetSum;\nsubSetSum.reserve(data.size()); // -3 but meh.\nstd::transform(data.begin(), data.begin()+subSetLength-1, std::back_inserter(subSetSum), std::minus&lt;int&gt;); // will be negative\nauto maxSum = -std::min_element(subSetSum.begin(), subSetSum.end());\n</code></pre>\n\n<p>But there is no recursion here ...</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9762426"}, "is_accepted": true, "score": 1, "last_activity_date": 1533203018, "creation_date": 1533203018, "answer_id": 51650385, "question_id": 51632667, "link": "https://stackoverflow.com/questions/51632667/finding-the-maximum-sum-from-the-subset-sum-using-recursion/51650385#51650385", "title": "Finding the maximum sum from the subset sum using recursion", "body": "<p>finally I've been able to solve this by setting max globally.\nthis's the modified version</p>\n\n<pre><code>int max1 = 0;\nint combinationRecursion(int start, int end, int index, int r, int *arr, int *data){\n\nif(r == index){\n        int sum = 0;\n    for(int i=0; i&lt;r; i++){\n        int val = data[i];\n        sum = sum + data[i];\n    }\n     if(max1&lt;sum){\n        max1 = sum;\n   }\n\n}\nfor(int i=start; i&lt;end; i++){\n    data[index] = arr[i];\n    combinationRecursion(i+1, end, index+1, r, arr, data);\n}\n return max1;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9762426"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 1, "accepted_answer_id": 51650385, "answer_count": 3, "score": 1, "last_activity_date": 1533203018, "creation_date": 1533124533, "last_edit_date": 1533126803, "question_id": 51632667, "link": "https://stackoverflow.com/questions/51632667/finding-the-maximum-sum-from-the-subset-sum-using-recursion", "title": "Finding the maximum sum from the subset sum using recursion", "body": "<p>I want to print only the maximum sum from the subset sum. What I want actually is to compare all the subset sum values in the function and then return only the maximum sum in the main function. </p>\n\n<p>What I tried to do was to save the subset sum values in a new array. Then compare the values in there. But I couldn't manage to do that as it returns nothing.\n I want suppose input <code>array</code> size is <code>n = 5</code>, <em>number of elements to sum</em> is <code>r = 3</code> And array is :</p>\n\n<pre><code>{1,2,3,4,5}\n</code></pre>\n\n<p>Then maximum sum should be <code>3 + 4 + 5 = 12</code>. But my code returns all the sum. </p>\n\n<p>I want to save the sum values in the newArray</p>\n\n<pre><code>newArray[] = sum;\n</code></pre>\n\n<p>then find the maximum values from the newArray.</p>\n\n<p>This is my <code>code</code> :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nvoid combinationRecursion(int start, int end, int index, int r, int *arr, int *data, int sum){\n\nif(r == index){\n    for(int i=0; i&lt;r; i++){\n        int val = data[i];\n        cout&lt;&lt;val&lt;&lt;' ';\n        sum = sum + data[i];\n\n    }\n    printf(\"sum %d\\n\",sum);\n    printf(\"\\n\");\n\n}\nfor(int i=start; i&lt;end; i++){\n    data[index] = arr[i];\n    combinationRecursion(i+1, end, index+1, r, arr, data, sum);\n   }\n }\n\n int main() {\n     int arr[100], n, data[100], r;\n     scanf(\"%d%d\",&amp;n,&amp;r);\n\nfor(int i=0; i&lt;n; i++) {\n    scanf(\"%d\",&amp;arr[i]);\n}\ncombinationRecursion(0, n, 0, r, arr, data, 0);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "for-loop", "doubly-linked-list"], "comments": [{"owner": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "edited": false, "score": 1, "creation_date": 1533126448, "post_id": 51632569, "comment_id": 90230647, "body": "@Ahmed Hesham: Is there a reason you want to copy the nodes? Why don&#39;t you go to the tail of l1, and make it point to the head of l2 (and add the two sizes together) and then be done?"}, {"owner": {"reputation": 33, "user_id": 10096427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oda2o.jpg?s=128&g=1", "display_name": "Ahmed Hesham", "link": "https://stackoverflow.com/users/10096427/ahmed-hesham"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1533127166, "post_id": 51632569, "comment_id": 90231174, "body": "@Gerhardh Finding the tail of l1 is obtained by a pointer &#39;current&#39; in it."}, {"owner": {"reputation": 33, "user_id": 10096427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oda2o.jpg?s=128&g=1", "display_name": "Ahmed Hesham", "link": "https://stackoverflow.com/users/10096427/ahmed-hesham"}, "reply_to_user": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "edited": false, "score": 0, "creation_date": 1533127527, "post_id": 51632569, "comment_id": 90231442, "body": "@Spoonless This means that l1 will be a part of l2, and the user will not notice that it is like a container that is inside another container, he will think that l1 and the extended l2 are separate lists. But will that be logical ?"}, {"owner": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "edited": false, "score": 0, "creation_date": 1533127844, "post_id": 51632569, "comment_id": 90231681, "body": "Perhaps you should make clear how you want the code to behave after the joining. If the l1 is added to the end of l2. (You should also add a comment that this is the desired behaviour) And then l1 gets changed, do you want the change to reflect in l2 as well?"}, {"owner": {"reputation": 33, "user_id": 10096427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oda2o.jpg?s=128&g=1", "display_name": "Ahmed Hesham", "link": "https://stackoverflow.com/users/10096427/ahmed-hesham"}, "reply_to_user": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "edited": false, "score": 0, "creation_date": 1533128218, "post_id": 51632569, "comment_id": 90231923, "body": "@Spoonless What do you mean by reflecting the change in l2 please? l2 has to be changed after appending  while l1 is the same as it was."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1533128632, "post_id": 51632569, "comment_id": 90232233, "body": "Forget my comments about <code>l1</code> and <code>l2</code>. I mixed them both. But for copying the members you still need to do more allocation than only for 1 node."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1533128700, "post_id": 51632569, "comment_id": 90232285, "body": "Could you please add sample input lists and desired output list(s)?"}, {"owner": {"reputation": 33, "user_id": 10096427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oda2o.jpg?s=128&g=1", "display_name": "Ahmed Hesham", "link": "https://stackoverflow.com/users/10096427/ahmed-hesham"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1533129115, "post_id": 51632569, "comment_id": 90232617, "body": "@Gerhardh I allocated a memory space for a node only once, and each time I take a node from l1 and store it into this allocated space. I can notice some error in allocating memory here, but tell me more about your thought about this please."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1533129221, "post_id": 51632569, "comment_id": 90232708, "body": "You are talking about copying the list. This means for each node you must allocate memory for a copy. Otherwise you only join the list. Or something totally different."}, {"owner": {"reputation": 33, "user_id": 10096427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oda2o.jpg?s=128&g=1", "display_name": "Ahmed Hesham", "link": "https://stackoverflow.com/users/10096427/ahmed-hesham"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1533129289, "post_id": 51632569, "comment_id": 90232754, "body": "@Gerhardh Yes, If l1 has 5, 9, 14 and l2 has 2, 7 then after calling the function on both lists l2 must has 2, 7, 5, 9, 14 while l1 still has 5, 9, 14."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1533129410, "post_id": 51632569, "comment_id": 90232850, "body": "Please provide some visual representation of your desired result. How would the <code>prev</code> pointer of entry 5 manage to fit for 2 lists at the same time? You could add an element to <code>l1</code> and also the links within <code>l2</code> gets updated (but not the <code>size</code>). This looks like a complete mess."}, {"owner": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "edited": false, "score": 2, "creation_date": 1533129414, "post_id": 51632569, "comment_id": 90232857, "body": "ok lets say l1 has nodes with elements of values 1,2, and 3. <i>I&#39;m making up notation here - bear with me</i> So L1==&gt;(1,2,3) and L2==&gt;(4,5,6) if we join them then L2==&gt;(4,5,6,1,2,3) right? If after joining we change L1 so L1==&gt;(1,2,834) what is the value of the elements in L2? Either L2 is unchanged (L2==&gt;4,5,6,1,2,3)) of L2 reflects the update to L1 (L2==&gt;(4,5,6,1,2,834)). Which one do you want?"}, {"owner": {"reputation": 33, "user_id": 10096427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oda2o.jpg?s=128&g=1", "display_name": "Ahmed Hesham", "link": "https://stackoverflow.com/users/10096427/ahmed-hesham"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1533130474, "post_id": 51632569, "comment_id": 90233652, "body": "@Gerhardh Every node in <code>l1</code> has a <code>next</code> and a <code>prev</code> pointers that are used to link the nodes of <code>l1</code> together, and every node in <code>l2</code> has a <code>next</code> and <code>prev</code> pointers that link its nodes. About updating <code>l1</code> during copying to <code>l2</code>, I want the function to take <code>l1</code> after it has completed and append it into <code>l2</code>, whenever an element is added to <code>l1</code>, you must call the function again to append the whole list not only the added node."}, {"owner": {"reputation": 33, "user_id": 10096427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oda2o.jpg?s=128&g=1", "display_name": "Ahmed Hesham", "link": "https://stackoverflow.com/users/10096427/ahmed-hesham"}, "reply_to_user": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "edited": false, "score": 0, "creation_date": 1533130679, "post_id": 51632569, "comment_id": 90233781, "body": "@Spoonless: Yes, I want the function to append the nodes of <code>l1</code> that are found currently, and if any change happens to <code>l1</code>, <code>l2</code> will not reflect that, it will be the same, like the way you copy a file on a PC."}, {"owner": {"reputation": 491, "user_id": 5772210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXwRX.jpg?s=128&g=1", "display_name": "Spoonless", "link": "https://stackoverflow.com/users/5772210/spoonless"}, "edited": false, "score": 1, "creation_date": 1533130973, "post_id": 51632569, "comment_id": 90233983, "body": "Then you need to make a new set of nodes. One for each node in List 1. These nodes will have the same data, as List 1, but becauase they are new nodes they will have different addresses. And they will each have their own address. So you cant just malloc one node and use it for all of them because you are overwriting it each time."}, {"owner": {"reputation": 33, "user_id": 10096427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oda2o.jpg?s=128&g=1", "display_name": "Ahmed Hesham", "link": "https://stackoverflow.com/users/10096427/ahmed-hesham"}, "edited": false, "score": 0, "creation_date": 1533131414, "post_id": 51632569, "comment_id": 90234355, "body": "Thank you all for your answers, creating a new node each time is logic that is sometimes forgotten."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10096427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oda2o.jpg?s=128&g=1", "display_name": "Ahmed Hesham", "link": "https://stackoverflow.com/users/10096427/ahmed-hesham"}, "edited": false, "score": 0, "creation_date": 1533131526, "post_id": 51634574, "comment_id": 90234431, "body": "Yes, that is the issue I forgot. Thank you for your effort."}, {"owner": {"reputation": 33, "user_id": 10096427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oda2o.jpg?s=128&g=1", "display_name": "Ahmed Hesham", "link": "https://stackoverflow.com/users/10096427/ahmed-hesham"}, "edited": false, "score": 0, "creation_date": 1533508222, "post_id": 51634574, "comment_id": 90358923, "body": "Your modification for my code is correct. But for anybody who pastes the code anywhere,  the <code>printf</code> statement   <code>printf(&quot;l2-&gt;current-&gt;next %lf\\n&quot;, l2-&gt;current-&gt;next-&gt;element.doubleElement);</code> creates an error because if <code>l2</code> is empty, l2-&gt;current = NULL, so <code>l2-&gt;current-&gt;next</code> produces and error."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 33, "user_id": 10096427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oda2o.jpg?s=128&g=1", "display_name": "Ahmed Hesham", "link": "https://stackoverflow.com/users/10096427/ahmed-hesham"}, "edited": false, "score": 0, "creation_date": 1533567370, "post_id": 51634574, "comment_id": 90382060, "body": "@AhmedHesham: I removed the debugging code that was indeed creating problems"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 1, "last_activity_date": 1533567346, "last_edit_date": 1533567346, "creation_date": 1533130117, "answer_id": 51634574, "question_id": 51632569, "link": "https://stackoverflow.com/questions/51632569/the-data-pointed-to-by-a-pointer-gets-corrupted-just-after-the-start-of-the-next/51634574#51634574", "title": "The data pointed to by a pointer gets corrupted just after the start of the next iteration of a for loop in copying a list at the end of another list", "body": "<p>You are re-using the same <code>listNode</code> structure for each element appended to the destination list. You must allocate a new element for each element you copy. Furthermore, there is no reason to special case <code>l2-&gt;size == 1</code>.</p>\n\n<pre><code>void joinList(List *l1, List *l2) {\n    listNode *nodePtr;\n    listNode *slider = l1-&gt;head;\n\n    for (int s = 0; s &lt; l1-&gt;size; s++) {\n        nodePtr = malloc(sizeof(listNode));\n        if (nodePtr == NULL) {\n            printf(\"memory allocation failure\\n\");\n            return;\n        }\n        *nodePtr = *slider;\n        nodePtr-&gt;next = NULL;\n        nodePtr-&gt;prev = NULL;\n\n        if (!l2-&gt;size) {\n            //for empty l2\n            l2-&gt;head = nodePtr;\n            l2-&gt;current = nodePtr;\n        } else {\n            //general case\n            nodePtr-&gt;prev = l2-&gt;current;\n            l2-&gt;current-&gt;next = nodePtr;\n            l2-&gt;current = nodePtr;\n        }\n        l2-&gt;size++;\n        slider = slider-&gt;next;\n    }       \n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10096427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oda2o.jpg?s=128&g=1", "display_name": "Ahmed Hesham", "link": "https://stackoverflow.com/users/10096427/ahmed-hesham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 51634574, "answer_count": 1, "score": 1, "last_activity_date": 1533567346, "creation_date": 1533124213, "last_edit_date": 1533131761, "question_id": 51632569, "link": "https://stackoverflow.com/questions/51632569/the-data-pointed-to-by-a-pointer-gets-corrupted-just-after-the-start-of-the-next", "title": "The data pointed to by a pointer gets corrupted just after the start of the next iteration of a for loop in copying a list at the end of another list", "body": "<p>I am writing a code of a function <code>void joinList(List *l1, List *l2)</code> that copies a doubly linked list pointed to by <code>l1</code> into the end of a doubly linked list pointed to by <code>l2</code>, changing the list pointed to by <code>l2</code>, and keeps the list pointed to by <code>l1</code> unchanged. If <code>l1</code> points to <code>5, 9, 14</code> and <code>l2</code> points to <code>2, 7</code>, then after calling the function on both lists <code>l2</code> must point to <code>2, 7, 5, 9, 14</code> while <code>l1</code> still points to <code>5, 9, 14</code>.</p>\n\n<p>Each node in either list is a structure that has 3 members: a union to represent different element data types, a <code>prev</code> and a <code>next</code> pointer.</p>\n\n<p>The list itself is a structure that has 4 members : a <code>head</code> pointer that points to the first node, a <code>current</code> pointer that points to the node preceding the last inserted or deleted node, a <code>curPos</code> to keep the index of the node pointed to by <code>current</code> and a <code>size</code> to store the size of the list.</p>\n\n<p>The implementation of the list works perfectly in insertion, deletion, traversal, destruction and the others.</p>\n\n<pre><code>typedef union type {\n    int intElement;\n    double doubleElement;\n    char charElement;\n} listEntry;\n\ntypedef struct node {\n    listEntry element;\n    struct node *next;\n    struct node *prev;\n} listNode;\n\ntypedef struct list {\n    listNode *head;\n    listNode *current;\n    int size;\n    int curPos;\n} List;\n\nvoid initializeList(List *);\nvoid joinList(List *, List *);\n</code></pre>\n\n<p>And about the definition of the function</p>\n\n<pre><code>void joinList(List *l1, List *l2) {\n    listNode *slider = l1-&gt;head;\n    listNode *nodePtr = malloc(sizeof(listNode));\n\n    for (int s = 0; s &lt; l1-&gt;size; s++) {\n        printf(\"l2-&gt;current-&gt;next %lf\\n\", l2-&gt;current-&gt;next-&gt;element.doubleElement);\n        *nodePtr = *(slider);\n\n        if (!l2-&gt;size) {\n            //for empty l2\n            nodePtr-&gt;next = l2-&gt;current;\n            l2-&gt;head = nodePtr;\n            nodePtr-&gt;prev = l2-&gt;current;\n            l2-&gt;current = nodePtr;\n        } else\n        if (l2-&gt;size == 1) {\n            //for one-node l2\n            nodePtr-&gt;next = NULL;\n            nodePtr-&gt;prev = l2-&gt;current;\n            l2-&gt;current-&gt;next = nodePtr;\n        } else {\n            //general case\n            nodePtr-&gt;next = NULL;\n            nodePtr-&gt;prev = l2-&gt;current-&gt;next;\n            l2-&gt;current-&gt;next-&gt;next = nodePtr;\n            l2-&gt;current = l2-&gt;current-&gt;next;\n        }\n\n        l2-&gt;size++;\n        slider = slider-&gt;next;\n        printf(\"l2-&gt;current-&gt;next %lf\\n\", l2-&gt;current-&gt;next-&gt;element.doubleElement);\n    }       \n}\n</code></pre>\n\n<p>In calling the function with 2 lists.\nThe last line in the loop prints that <code>l2-&gt;current-&gt;next</code> points to the proper data that I want, but just after starting the next iteration of the loop the data pointed to by this pointer gets corrupted as indicated by the <code>printf</code> statement in the start of the loop. Noting that the pointer still holds the same address in both cases. Is it possible that a loop changes data just by iteration?</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "system-calls"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533117964, "post_id": 51630536, "comment_id": 90225304, "body": "Please see: <a href=\"http://meta.stackoverflow.com/q/284236\">Why is \u201cCan someone help me?\u201d not an actual question?</a>"}, {"owner": {"reputation": 21, "user_id": 10049955, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lZmPVBbu3BQ/AAAAAAAAAAI/AAAAAAAAAA8/DqQ5tRy8MNY/photo.jpg?sz=128", "display_name": "phuti", "link": "https://stackoverflow.com/users/10049955/phuti"}, "edited": false, "score": 0, "creation_date": 1533118137, "post_id": 51630536, "comment_id": 90225413, "body": "Thanks for pointing it out will change it now"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1533118262, "post_id": 51630536, "comment_id": 90225481, "body": "Not the actual problem, but you seem to copy one byte too little ... <code>strlen()</code> <i>doesn&#39;t</i> count the terminating 0 byte."}, {"owner": {"reputation": 21, "user_id": 10049955, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lZmPVBbu3BQ/AAAAAAAAAAI/AAAAAAAAAA8/DqQ5tRy8MNY/photo.jpg?sz=128", "display_name": "phuti", "link": "https://stackoverflow.com/users/10049955/phuti"}, "edited": false, "score": 0, "creation_date": 1533118365, "post_id": 51630536, "comment_id": 90225557, "body": "@FelixPalmen thanks for pointing that out"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533120498, "post_id": 51630536, "comment_id": 90226885, "body": "Maybe try creating a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> here, so people can test themselves. If you create a simple syscall that just copies from a string constant to a user-supplied <code>char *</code> buffer, do you run into the same problem?"}, {"owner": {"reputation": 21, "user_id": 10049955, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lZmPVBbu3BQ/AAAAAAAAAAI/AAAAAAAAAA8/DqQ5tRy8MNY/photo.jpg?sz=128", "display_name": "phuti", "link": "https://stackoverflow.com/users/10049955/phuti"}, "edited": false, "score": 0, "creation_date": 1533120919, "post_id": 51630536, "comment_id": 90227143, "body": "when i pass a char pointer with dynamically allocated memory, the path is copied to user space but if i put the same char pointer in struct it does not copy it to user space"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533121081, "post_id": 51630536, "comment_id": 90227242, "body": "and when you do something as simple as <code>char buf[1024]; ret = syscall(355, &amp;buf);</code>?"}, {"owner": {"reputation": 21, "user_id": 10049955, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lZmPVBbu3BQ/AAAAAAAAAAI/AAAAAAAAAA8/DqQ5tRy8MNY/photo.jpg?sz=128", "display_name": "phuti", "link": "https://stackoverflow.com/users/10049955/phuti"}, "edited": false, "score": 0, "creation_date": 1533121380, "post_id": 51630536, "comment_id": 90227409, "body": "@FelixPalmen I tried that and the path is returned without any problems. But if i put the variable in a struct it does not return the path."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533121600, "post_id": 51630536, "comment_id": 90227560, "body": "Ok, without any own experience with Linux: I was instantly surprised by <code>pr_info(&quot;Root path (user) : %s\\n&quot;, info-&gt;root);</code> working if <code>info-&gt;root</code> is indeed a userspace pointer. My guess is the dereferencing of the userspace pointer <code>info</code> doesn&#39;t work as you expect. If that&#39;s really the reason, copying the struct to kernelspace first, filling it there and then copying it back should work."}, {"owner": {"reputation": 21, "user_id": 10049955, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lZmPVBbu3BQ/AAAAAAAAAAI/AAAAAAAAAA8/DqQ5tRy8MNY/photo.jpg?sz=128", "display_name": "phuti", "link": "https://stackoverflow.com/users/10049955/phuti"}, "edited": false, "score": 0, "creation_date": 1533122722, "post_id": 51630536, "comment_id": 90228260, "body": "@FelixPalmen I tried that just now and am still experiencing the same problem as before."}], "owner": {"reputation": 21, "user_id": 10049955, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lZmPVBbu3BQ/AAAAAAAAAAI/AAAAAAAAAA8/DqQ5tRy8MNY/photo.jpg?sz=128", "display_name": "phuti", "link": "https://stackoverflow.com/users/10049955/phuti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1533118314, "creation_date": 1533117832, "last_edit_date": 1533118314, "question_id": 51630536, "link": "https://stackoverflow.com/questions/51630536/difficulty-transferring-data-in-struct-from-kernel-space-to-user-space", "title": "Difficulty transferring data in struct from kernel space to user space", "body": "<p>I am trying to write a system call that can get information about a process in Linux:</p>\n\n<p>my system call prototype is : <code>long pid_info(struct info *info, int pid)</code></p>\n\n<p>I have the following struct :</p>\n\n<pre><code>struct info {\n        int pid;\n        char cwd[4096];\n        char root[4096];\n}\n</code></pre>\n\n<p>and in my system call, I have the following code :</p>\n\n<pre><code>SYSCALL_DEFINE2(pid_info, struct info *, info, int, pid)\n{\n        ...\n        int err;\n        char *path_root;\n\n        ...\n        // After getting the root path\n        err = copy_to_user(info-&gt;root, path_root, \n                    strlen(path_root) + 1);\n        if (err)\n                return -EFAULT;\n        // Just to check if it copied to info-&gt;root (and later when i run dmesg it prints the path).\n        pr_info(\"Root path (user) : %s\\n\", info-&gt;root);\n        ...\n\n        return (0);\n}\n</code></pre>\n\n<p>My main to test the system call :</p>\n\n<pre><code>int main(void)\n{\n        struct info info;\n        int ret;\n\n        ret = syscall(355, &amp;info, 190);\n        if (ret == -1)\n                return 0;\n        //This print nothing even though the dmesg log says it was copied.\n        printf(\"Path : %s\\n\", info-&gt;root);\n        return (0);\n}\n</code></pre>\n\n<p>Somehow the data that i copied across disappear and am struggling in finding out why, since copy_to_user should transfer the data from kernel space to user space.</p>\n"}, {"tags": ["c", "memory-address", "labview"], "answers": [{"comments": [{"owner": {"reputation": 457, "user_id": 6400277, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206759054794233/picture?type=large", "display_name": "Mathieu Gauquelin", "link": "https://stackoverflow.com/users/6400277/mathieu-gauquelin"}, "edited": false, "score": 0, "creation_date": 1533629193, "post_id": 51662325, "comment_id": 90404068, "body": "Is it working even with 2D array (image) or do I have to convert it into 1D array ?"}], "tags": [], "owner": {"reputation": 11, "user_id": 10124272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aea49d6f6b85a925d61b64e70c42e7f6?s=128&d=identicon&r=PG", "display_name": "raravy", "link": "https://stackoverflow.com/users/10124272/raravy"}, "is_accepted": false, "score": 0, "last_activity_date": 1533244823, "creation_date": 1533244823, "answer_id": 51662325, "question_id": 51629730, "link": "https://stackoverflow.com/questions/51629730/get-memory-address-from-labview-array/51662325#51662325", "title": "Get memory address from LabVIEW array", "body": "<p>If you need to pass in a pointer to a labview array you can configure the \"call library function\" node like this:</p>\n\n<ol>\n<li>On the Parameters tab select the parameter that you are interested\nin</li>\n<li>in the right side panel select \"Adapt to type\" in the \"Type\"\ndrop-down</li>\n<li>select \"Array Data Pointer\" in the \"Data Format\" drop-down</li>\n</ol>\n\n<p>this setup should pass in a pointer to the first element of your array.</p>\n\n<p>the call library function node's options are documented <a href=\"http://zone.ni.com/reference/en-XX/help/371361P-01/lvexcodeconcepts/configuring_the_clf_node/\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11197133, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/7733883616a66cc7864943a3337f9a61?s=128&d=identicon&r=PG", "display_name": "Sayli", "link": "https://stackoverflow.com/users/11197133/sayli"}, "is_accepted": false, "score": 0, "last_activity_date": 1552482200, "last_edit_date": 1552482200, "creation_date": 1552480521, "answer_id": 55142085, "question_id": 51629730, "link": "https://stackoverflow.com/questions/51629730/get-memory-address-from-labview-array/55142085#55142085", "title": "Get memory address from LabVIEW array", "body": "<p>You can use <code>MoveBlock</code> LabVIEW function. </p>\n\n<p>Here is <a href=\"https://forums.ni.com/t5/Developer-Center-Resources/Dereferencing-Pointers-from-C-C-DLLs-in-LabVIEW/ta-p/3522795\" rel=\"nofollow noreferrer\">link</a> from NI forum.</p>\n"}], "owner": {"reputation": 457, "user_id": 6400277, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10206759054794233/picture?type=large", "display_name": "Mathieu Gauquelin", "link": "https://stackoverflow.com/users/6400277/mathieu-gauquelin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1270, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1552482200, "creation_date": 1533115528, "question_id": 51629730, "link": "https://stackoverflow.com/questions/51629730/get-memory-address-from-labview-array", "title": "Get memory address from LabVIEW array", "body": "<p>I wrote a C++ DLL with Visual Studio and add a C wrapper to use it on several langages (C++, Python, LabVIEW, ...). In this one, I am dealing with images, so 2D array. I created a labview library using LabVIEW tools so I attached this library to my project.</p>\n\n<p>First, the function to allocate and free the handle for the DLL is working correctly so the communication seems okay.\nMoreover, my DLL function take as parameter a pointer on the first pixel of the image, so on the first value of the tab, in order to recreate a matrix (library OpenCV) to perform some operations.</p>\n\n<p>But I don't know how to get the memory address of the array on LabVIEW and the different posts on internet are not always clear.</p>\n\n<p>Here is the C function:</p>\n\n<pre><code>__declspec(dllimport) unsigned short* __stdcall imAdjustBrightness(void* handle, void * ptrImg, int width, int height, int inputType, int brightnessValue)\n{\n    if (handle)\n    {\n        EpsImageProcessing* data = (EpsImageProcessing*)handle;\n        return data-&gt;imAdjustBrightness(ptrImg, width, height, inputType, brightnessValue);\n    }\n    return NULL;\n}\n</code></pre>\n\n<p>And the screenshots for the VI : </p>\n\n<p><a href=\"https://i.stack.imgur.com/QDcXl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QDcXl.png\" alt=\"main VI\"></a>\n<a href=\"https://i.stack.imgur.com/jgwcQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jgwcQ.png\" alt=\"library function\"></a></p>\n\n<p>Thank you in advance for any advice/help.</p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 302, "user_id": 10114965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/86Uky.png?s=128&g=1", "display_name": "Inrin", "link": "https://stackoverflow.com/users/10114965/inrin"}, "edited": false, "score": 0, "creation_date": 1533115068, "post_id": 51629456, "comment_id": 90223328, "body": "your create is wrong: sizeof(linkedList) != sizeof(string) (aka char *)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1533115120, "post_id": 51629456, "comment_id": 90223368, "body": "<code>malloc(sizeof(newWord))</code> is not allocating enough memory for the <code>struct</code>. It should be <code>linkedList *new = malloc(sizeof(*new));</code>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 4, "creation_date": 1533115274, "post_id": 51629456, "comment_id": 90223472, "body": "Unrelated, it&#39;s been almost a week since I cursed the authors of <code>cs50</code> for type aliasing <code>char *</code> to <code>string</code>. Someday I&#39;m going to meet the neanderthal that thought that was a helpful idea. This code is an example of how hiding pointer types in aliases shrouds the fact that <code>sizeof</code> is actually delivering the size of a pointer (which is wrong even if corrected, as it should be <code>sizeof *new</code>, but that&#39;s another issue).Just... grrrr."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1533118690, "post_id": 51629456, "comment_id": 90225749, "body": "@WhozCraig <i>it&#39;s been almost a week since I cursed the authors of cs50 for type aliasing <code>char *</code> to <code>string</code>. Someday I&#39;m going to meet the neanderthal that thought that was a helpful idea.</i> What hideous evil did neanderthals do to you that you would insult their intelligence so viciously?  ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7469669, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7C6oVZuZEKY/AAAAAAAAAAI/AAAAAAAAIvk/vj5Wnf7x8ME/photo.jpg?sz=128", "display_name": "Krishaan Khubchand", "link": "https://stackoverflow.com/users/7469669/krishaan-khubchand"}, "edited": false, "score": 0, "creation_date": 1533115719, "post_id": 51629578, "comment_id": 90223776, "body": "It works! I&#39;ve been struggling with pointers, but...pointers to pointers? Never heard of those. Do you have any recommended tutorials/links so I can learn more? Very confused atm..."}, {"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "reply_to_user": {"reputation": 13, "user_id": 7469669, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7C6oVZuZEKY/AAAAAAAAAAI/AAAAAAAAIvk/vj5Wnf7x8ME/photo.jpg?sz=128", "display_name": "Krishaan Khubchand", "link": "https://stackoverflow.com/users/7469669/krishaan-khubchand"}, "edited": false, "score": 0, "creation_date": 1533115910, "post_id": 51629578, "comment_id": 90223902, "body": "I&#39;m not sure about tutorials, perhaps someone else can help you with that. But in general, think of a pointer as an integer with the address of whatever value you&#39;re looking for. So a pointer to a pointer is simply the address of a pointer that stores the address of a value, it&#39;s exactly the same as any other pointer. The point here is that you want to modify the value of your pointer, so you send the function the address to it, so that it can change the value, i.e. point it somewhere else."}], "tags": [], "owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "is_accepted": true, "score": 3, "last_activity_date": 1533115043, "creation_date": 1533115043, "answer_id": 51629578, "question_id": 51629456, "link": "https://stackoverflow.com/questions/51629456/why-does-my-c-code-for-inserting-an-element-into-a-hash-tree-work-in-main-but/51629578#51629578", "title": "Why does my C code for inserting an element into a hash tree work in Main() but not when I call it via function?", "body": "<p>Your <code>hashInsert</code> function creates a local copy of the pointer (<code>theList</code>), you modify said local copy, but the actual pointer in your <code>main</code> function is still set to <code>NULL</code>. Calling <code>printf</code> on that is the cause of your segmentation fault. </p>\n\n<p>You can resolve this issue by passing a pointer to the pointer to your function</p>\n\n<pre><code>void hashInsert(string list **theList, string newValue) {\n    *theList = create(newValue);\n}\n</code></pre>\n\n<p>and then call it</p>\n\n<pre><code>hashInsert(&amp;names[num], \"heey\");\n</code></pre>\n\n<p>This way, you modify the value of the pointer from <code>main</code>. </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Also, as the comments state, your <code>malloc</code> does indeed not allocate enough memory, you also need some memory to store the next list pointer. </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533117918, "post_id": 51629872, "comment_id": 90225267, "body": "unfortunately, some guys at harvard when designing a programming course."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1533118763, "post_id": 51629872, "comment_id": 90225787, "body": "@ShaheAnsar <i>Who the hell thought that was a good idea?</i>  <b>Thought</b> had nothing to do with it..."}], "tags": [], "owner": {"reputation": 127, "user_id": 9027398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bde73f1f1e48ea74bfa737636d72a62?s=128&d=identicon&r=PG&f=1", "display_name": "Shahe Ansar", "link": "https://stackoverflow.com/users/9027398/shahe-ansar"}, "is_accepted": false, "score": 2, "last_activity_date": 1533115950, "creation_date": 1533115950, "answer_id": 51629872, "question_id": 51629456, "link": "https://stackoverflow.com/questions/51629456/why-does-my-c-code-for-inserting-an-element-into-a-hash-tree-work-in-main-but/51629872#51629872", "title": "Why does my C code for inserting an element into a hash tree work in Main() but not when I call it via function?", "body": "<p>The problem is with you <code>hashInsert</code> function. It takes the pointer by value (so the original pointer you pass isn't modified). There's a much better way to go about this-</p>\n\n<pre><code>struct list* hashInsert(char* string){\n    return create(string);\n}\n</code></pre>\n\n<p>A few points aside from that, don't use <code>string</code>, always use <code>char*</code> since that what it really is. I see you're using some library, but you're better off simply including the proper headers yourself, in this case, you should include <code>stdlib.h</code> since it contains the definition of <code>malloc()</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 7469669, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7C6oVZuZEKY/AAAAAAAAAAI/AAAAAAAAIvk/vj5Wnf7x8ME/photo.jpg?sz=128", "display_name": "Krishaan Khubchand", "link": "https://stackoverflow.com/users/7469669/krishaan-khubchand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 51629578, "answer_count": 2, "score": -1, "last_activity_date": 1533495380, "creation_date": 1533114697, "last_edit_date": 1533495380, "question_id": 51629456, "link": "https://stackoverflow.com/questions/51629456/why-does-my-c-code-for-inserting-an-element-into-a-hash-tree-work-in-main-but", "title": "Why does my C code for inserting an element into a hash tree work in Main() but not when I call it via function?", "body": "<p>I'm fairly certain this has something to do with pointers and the function using copies instead, but I'm not sure how...because I've inserted the pointer as a parameter for create(); </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cs50.h&gt; \n#include &lt;string.h&gt;\n\ntypedef struct list {\n    string word;\n    struct list *next;\n}\nlinkedList; \n\nstruct list* create (string newWord) {\n    linkedList *new = malloc(sizeof(newWord));\n    new-&gt;word = newWord;\n    new-&gt;next = NULL;\n    return new;\n}\n\nstruct list* insert (struct list *theList, string newValue) {\n    linkedList *anotherOne = create(newValue);\n    anotherOne-&gt;next = theList;\n    return anotherOne;\n}\n\nint hash (string name) {\n    return strlen(name);\n}\n\nvoid hashInsert (struct list *theList, string newValue) {\n    theList = create(newValue);\n    }\n\nint main(void) {\n   linkedList *names[24] = {NULL};\n   int num = hash(\"heey\");\n //  names[num] = create(\"heey\"); // &lt;- this code works when I uncomment it\n   hashInsert(names[num], \"heey\"); // &lt;-- this causes a segfault.. idk why\n   printf(\"%s\", names[num]-&gt;word);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1533108915, "post_id": 51627735, "comment_id": 90219896, "body": "The error message if you fail to open <code>csis.txt</code> is quite misleading, as you don&#39;t open the file for input at all."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1533109021, "post_id": 51627735, "comment_id": 90219968, "body": "As for your problem, nothing a little <a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">rubber duck debugging</a> shouldn&#39;t help... Hint: How many times do you increase <code>i</code> with <code>i += 1</code>? How many times <i>should</i> you do it?"}, {"owner": {"reputation": 49, "user_id": 10063279, "user_type": "registered", "profile_image": "https://graph.facebook.com/603019173420440/picture?type=large", "display_name": "Shawn Michael Armstrong", "link": "https://stackoverflow.com/users/10063279/shawn-michael-armstrong"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1533109392, "post_id": 51627735, "comment_id": 90220181, "body": "Hint received, face-palm x20,  Still relatively new to this. Wasn&#39;t sure if there was some operator I needed to use or special syntax. Thank you."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1533110073, "post_id": 51627735, "comment_id": 90220517, "body": "BTW, <code>i += 1</code> is exactly equivalent to <code>++i</code>"}], "answers": [{"tags": [], "owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "is_accepted": false, "score": 0, "last_activity_date": 1533109099, "creation_date": 1533109099, "answer_id": 51627821, "question_id": 51627735, "link": "https://stackoverflow.com/questions/51627735/how-do-i-utilize-fprintf-within-an-array/51627821#51627821", "title": "How do I utilize fprintf within an array?", "body": "<blockquote>\n  <p>When added, it appears to continue increment the array? </p>\n</blockquote>\n\n<p>Yes, you increment your array index too often:</p>\n\n<pre><code>printf(\"%5d, \", testScores[i += 1]);\nfprintf(fpOut, \"%5d, \", testScores[i += 1]);\n</code></pre>\n\n<p>You increment your counter <code>i</code> once for <code>printf</code> and once again for <code>fprintf</code>.\nWhile you probably want to print the same element in both commands, you access two adjacent elements.</p>\n\n<p>To fix this only increment once.</p>\n"}, {"tags": [], "owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1533113889, "last_edit_date": 1533113889, "creation_date": 1533113094, "answer_id": 51628957, "question_id": 51627735, "link": "https://stackoverflow.com/questions/51627735/how-do-i-utilize-fprintf-within-an-array/51628957#51628957", "title": "How do I utilize fprintf within an array?", "body": "<p>As has been pointed out, with</p>\n\n<pre><code>printf(\"%5d, \", testScores[i += 1]);\nfprintf(fpOut, \"%5d, \", testScores[i += 1]);\n</code></pre>\n\n<p>you are printing one number to <code>stdout</code> and the next number to the file. So every alternate number will end up in the file and the other numbers will be printed out to <code>stdout</code>.</p>\n\n<p>You could modify this to</p>\n\n<pre><code>printf(\"%5d, \", testScores[i]);\nfprintf(fpOut, \"%5d, \", testScores[i]);\ni+=1;\n</code></pre>\n\n<p>ie, increment <code>i</code> only after printing to both <code>stdout</code> and the file.</p>\n\n<p>Or you could use the postfix increment operator like</p>\n\n<pre><code>printf(\"%5d, \", testScores[i]);\nfprintf(fpOut, \"%5d, \", testScores[i++]);\n</code></pre>\n\n<p>here in <code>i++</code>, the value of <code>i</code> will be incremented but the initial value of <code>i</code> will be used in the expression. Read <a href=\"https://stackoverflow.com/q/7031326/5375464\">What is the difference between prefix and postfix operators?</a> .</p>\n\n<p>And instead of repeating by yourself, you could make the computer do the repeating with something like</p>\n\n<pre><code>for (i = 0; i &lt; 30; i++) {\n    printf(\"%5d, \", testScores[i]);\n    fprintf(fpOut, \"%5d, \", testScores[i]);\n    if((i+1)%5==0)\n    { \n        printf(\"\\n\");\n        fprintf(fpOut, \"\\n\");\n        }\n\n}\n</code></pre>\n\n<p>and print the newline only if <code>i+1</code> is divisible by <code>5</code>.</p>\n\n<hr>\n\n<p>The use of <code>system()</code> is discouraged. See <a href=\"https://stackoverflow.com/q/19913446/5375464\">Why should the system() function be avoided in C and C++?</a> .</p>\n"}], "owner": {"reputation": 49, "user_id": 10063279, "user_type": "registered", "profile_image": "https://graph.facebook.com/603019173420440/picture?type=large", "display_name": "Shawn Michael Armstrong", "link": "https://stackoverflow.com/users/10063279/shawn-michael-armstrong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1533113889, "creation_date": 1533108815, "question_id": 51627735, "link": "https://stackoverflow.com/questions/51627735/how-do-i-utilize-fprintf-within-an-array", "title": "How do I utilize fprintf within an array?", "body": "<p>I need some assistance. I'm trying to write my code's output into a file. \nHowever, I'm encountering an issue whenever I attempt to use fprintf within an array. The code works as it should without the fprintf statements, printing 5 scores per line. When added, it appears to continue increment the array? </p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include&lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid displayScore(int testScores[]);\nFILE *fpOut;\n\nint main(void) {\n\nif (!(fpOut = fopen(\"csis.txt\", \"w\"))) {\n    printf(\"csis.txt could not be opened for input.\");\n    exit(1);\n}\n\nint testScores[] = { 90, 85, 100, 50, 50, 85, 60, 70, 55, 55, 80, 95, 70, 60, 95, 80, 100, 75, 70, 95, 90, 90, 70, 95, 50, 65, 85, 95, 100, 65 };\n\ndisplayScore(testScores);\n\nfclose(fpOut);\nsystem(\"pause\");\nreturn 0;\n}\n\nvoid displayScore(int testScores[]) {\nint i = 0;\n\n/*Prints 5 scores every line*/\nfor (i = 0; i &lt; 30; i++) {\n    printf(\"%d, \", testScores[i]);\n    fprintf(fpOut, \"%d, \", testScores[i]);\n    printf(\"%5d, \", testScores[i += 1]);\n    fprintf(fpOut, \"%5d, \", testScores[i += 1]);\n    printf(\"%5d, \", testScores[i += 1]);\n    fprintf(fpOut, \"%5d, \", testScores[i += 1]);\n    printf(\"%5d, \", testScores[i += 1]);\n    fprintf(fpOut, \"%5d, \", testScores[i += 1]);\n    printf(\"%5d, \\n\", testScores[i += 1]);\n    fprintf(fpOut, \"%5d, \\n\", testScores[i += 1]);\n}\nreturn;\n}\n</code></pre>\n"}, {"tags": ["c", "file-io"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533108798, "post_id": 51627719, "comment_id": 90219824, "body": "see <code>fseek()</code> and <code>fread()</code>, the manuals will help you."}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 0, "creation_date": 1533108983, "post_id": 51627719, "comment_id": 90219944, "body": "Another way to acomplish it, is to use a <code>for</code>loop and read each char with <code>fgetc</code> and after your <code>counter variable</code> is on your specific position fill a char array with your chars from the file until your end position (When i == 1 until i == 9)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533109132, "post_id": 51627719, "comment_id": 90220035, "body": "Read the whole line, change the end by putting the string terminator at the wanted position, and print from the second position."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1533109359, "post_id": 51627719, "comment_id": 90220163, "body": "Note that using e.g. <code>fseek</code> is problematic with text files where the lines are of varying length, and especially if you don&#39;t know the length of the line beforehand."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533109586, "post_id": 51627719, "comment_id": 90220279, "body": "@Someprogrammerdude good catch, took the liberty to add a little explanation on that issue to my answer."}], "answers": [{"tags": [], "owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "is_accepted": false, "score": 2, "last_activity_date": 1533109167, "creation_date": 1533109167, "answer_id": 51627845, "question_id": 51627719, "link": "https://stackoverflow.com/questions/51627719/how-do-i-read-a-file-to-and-from-a-specific-position/51627845#51627845", "title": "How do I read a file to and from a specific position?", "body": "<p>The most direct way is to use <code>fseek</code> and then <code>fread</code>. This code omits error checking for simplicity.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(){\n    FILE* f = fopen(\"File.txt\", \"r\");\n    fseek(f, 1, SEEK_SET);\n    char buf[10];\n    memset(buf, 0, 10);\n    fread(buf, 1, 9, f);\n    printf(\"%s\\n\", buf);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 1, "last_activity_date": 1533109980, "last_edit_date": 1533109980, "creation_date": 1533109174, "answer_id": 51627847, "question_id": 51627719, "link": "https://stackoverflow.com/questions/51627719/how-do-i-read-a-file-to-and-from-a-specific-position/51627847#51627847", "title": "How do I read a file to and from a specific position?", "body": "<p>This is simple enough to give some example code:</p>\n\n<pre><code>FILE *f = fopen(\"path/to/file\", \"r\");\nfseek(f, 1, SEEK_SET);  // set file pointer to 2nd position (0-indexed)\nchar part[10] = {0};    // array for 9 characters plus terminating 0\nfread(part, 1, 9, f);   // read 9 members of size 1 (characters) from f into part\nputs(part);             // or any other way to output part, like using in printf()\n</code></pre>\n\n<p>You need <code>#include &lt;stdio.h&gt;</code> for this and in real code, you have to <strong>check all return values for errors that might happen</strong>.</p>\n\n<p>For more info, see for example the man pages of <a href=\"https://linux.die.net/man/3/fseek\" rel=\"nofollow noreferrer\"><code>fseek()</code></a> and <a href=\"https://linux.die.net/man/3/fread\" rel=\"nofollow noreferrer\"><code>fread()</code></a>.</p>\n\n<p>Note there are many other possible approaches, e.g. instead of <em>seeking</em>, you can just <em>read and forget</em> the first character, e.g. with <code>fgetc()</code>. See also <a href=\"https://stackoverflow.com/questions/51627719/c-how-do-i-read-a-file-to-and-from-a-specific-position#comment90220163_51627719\">Some programmer dude's comment</a> -- with a text file, reading from it will always give you a single <code>\\n</code> for every line ending, no matter what your operating system uses, while <code>fseek()</code> operates on the real bytes on disk, where line endings could be encoded e.g. as <code>\\r\\n</code> (two bytes). So keep that in mind, it could introduce interesting bugs.</p>\n"}], "owner": {"reputation": 189, "user_id": 10116897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/710f5e1e43aa335fdb3bcdb432ef0f14?s=128&d=identicon&r=PG&f=1", "display_name": "Helosy", "link": "https://stackoverflow.com/users/10116897/helosy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2215, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1533109980, "creation_date": 1533108763, "last_edit_date": 1533109932, "question_id": 51627719, "link": "https://stackoverflow.com/questions/51627719/how-do-i-read-a-file-to-and-from-a-specific-position", "title": "How do I read a file to and from a specific position?", "body": "<p>Suppose I have a file like so:  </p>\n\n<pre><code>card the red \nparrots massive\nbelt earth\n</code></pre>\n\n<p>If I want to read it from the 2nd position up to the 10th position and print it:  </p>\n\n<pre><code>ard the r\n</code></pre>\n\n<p>How would I achieve this?</p>\n"}, {"tags": ["c", "matlab"], "answers": [{"tags": [], "owner": {"reputation": 1239, "user_id": 2118434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/MJFzU.jpg?s=128&g=1", "display_name": "Siva Srinivas Kolukula", "link": "https://stackoverflow.com/users/2118434/siva-srinivas-kolukula"}, "is_accepted": false, "score": 0, "last_activity_date": 1533106960, "creation_date": 1533106960, "answer_id": 51627220, "question_id": 51626470, "link": "https://stackoverflow.com/questions/51626470/how-do-you-import-data-from-the-text-file-to-matlab-to-make-cone/51627220#51627220", "title": "How do you import data from the text file to MATLAB to make cone?", "body": "<p>Why you want to generate data in c, save into text file and then read, plot in MATLAB? You can achieve the task straight away in MATLAB. Check the below code: </p>\n\n<pre><code>a=1 ;\nb=2 ;\nc=3 ;\nN = 100 ;\nx=linspace(-1,1, N) ; \ny=linspace(-1,1, N) ; \n[X,Y] = meshgrid(x,y) ;\nZ = c*sqrt(X.^2/a^2+Y.^2/b^2) ;\nsurf(X,Y,Z)\n</code></pre>\n\n<p>The above code generates the following plot: </p>\n\n<p><a href=\"https://i.stack.imgur.com/tfA1T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tfA1T.png\" alt=\"enter image description here\"></a></p>\n\n<p>YOu may have a look on the following link, it may help you futher: <a href=\"https://in.mathworks.com/matlabcentral/fileexchange/34143-meshing-thin-shells-using-four-noded-elements\" rel=\"nofollow noreferrer\">https://in.mathworks.com/matlabcentral/fileexchange/34143-meshing-thin-shells-using-four-noded-elements</a></p>\n"}], "owner": {"reputation": 21, "user_id": 8906073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8131f52774404221bd8580ee6900ea7c?s=128&d=identicon&r=PG&f=1", "display_name": "rasool sadat", "link": "https://stackoverflow.com/users/8906073/rasool-sadat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1533106960, "creation_date": 1533104059, "question_id": 51626470, "link": "https://stackoverflow.com/questions/51626470/how-do-you-import-data-from-the-text-file-to-matlab-to-make-cone", "title": "How do you import data from the text file to MATLAB to make cone?", "body": "<p>I have a function in c and this function write data in text file. I write this function to make a cone but when I import my data in MATLAB and create mesh of it ,it doesn't look like a cone  do you know what is the problem?\nwhich formula I use is : x^2/a^2 + y^2/b^2 = z^z/c^c        </p>\n\n<pre><code>int main()\n</code></pre>\n\n<p>{</p>\n\n<pre><code>float x,y,z,a,b,c,i,j,m,n;\nFILE file;\na=1,b=2,c=3,x=-1,y=-1,i=0,j=0,n=1,m=1;\nfile=fopen(\"C:/Users/user/Desktop/test5.txt\",\"w\");\nfor(i=0;i&lt;20;i++)\n{\n    for(j=0;j&lt;20;j++)\n    {\n        x=-1+(0.005)*n;\n        n++;\n        y=-1+(0.005)*m;\n        m++;\n       z= sqrt(9*x*x + (9*y*y)/4);\n       fprintf(file,\"%02.2f \",z);\n    }\n    fprintf(file,\"\\n\");\n}\nfclose(file);\nfile=fopen(\"C:/Users/user/Desktop/test5.txt\",\"a\");\na=1,b=2,c=3,x=-1,y=0,i=0,j=0,n=1,m=1;\nfor(i=0;i&lt;20;i++)\n{\n    for(j=0;j&lt;20;j++)\n    {\n        x=-1+(0.005)*n;\n        n++;\n        z=-1+(0.005)*m;\n        m++;\n       y= sqrt(abs((4*z*z)/9 - 4*x*x));\n       fprintf(file,\"%02.2f \",y);\n\n    }\n    fprintf(file,\"\\n\");\n}\nfclose(file);\nfile=fopen(\"C:/Users/user/Desktop/test5.txt\",\"a\");\nfor(i=0;i&lt;20;i++)\n{\n    for(j=0;j&lt;20;j++)\n    {\n        y=-1+(0.005)*n;\n        n++;\n        z=-1+(0.005)*m;\n        m++;\n       x= sqrt(abs((z*z)/9 - (y*y)/4));\n       fprintf(file,\"%02.2f \",x);\n\n    }\n    fprintf(file,\"\\n\");\n}\nfclose(file);\n</code></pre>\n\n<p>} </p>\n"}, {"tags": ["c", "variadic-functions", "dynamic-linking", "ld-preload", "dlsym"], "answers": [{"comments": [{"owner": {"reputation": 320, "user_id": 4988906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0949ddd9e80733041bce8de4ca30c313?s=128&d=identicon&r=PG&f=1", "display_name": "ankit jain", "link": "https://stackoverflow.com/users/4988906/ankit-jain"}, "edited": false, "score": 0, "creation_date": 1533110368, "post_id": 51627404, "comment_id": 90220686, "body": "I cannot ask the creator to create a vfoo() function... but what I am trying to do is take the values of va_list, store them to a string array and pass it forward... the approach does seem to work but gives errors due to improper number of arguments... Can you suggest if I can with this solution, have little experience this variadic functions."}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "reply_to_user": {"reputation": 320, "user_id": 4988906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0949ddd9e80733041bce8de4ca30c313?s=128&d=identicon&r=PG&f=1", "display_name": "ankit jain", "link": "https://stackoverflow.com/users/4988906/ankit-jain"}, "edited": false, "score": 0, "creation_date": 1533111466, "post_id": 51627404, "comment_id": 90221281, "body": "There might be some platform-/compiler-dependent &quot;solution&quot;, but you should describe the context first (OS, CPU, compiler, etc)"}, {"owner": {"reputation": 320, "user_id": 4988906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0949ddd9e80733041bce8de4ca30c313?s=128&d=identicon&r=PG&f=1", "display_name": "ankit jain", "link": "https://stackoverflow.com/users/4988906/ankit-jain"}, "edited": false, "score": 0, "creation_date": 1533113770, "post_id": 51627404, "comment_id": 90222534, "body": "I probably didn&#39;t get what you want to say... context should not matter in this case"}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "reply_to_user": {"reputation": 320, "user_id": 4988906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0949ddd9e80733041bce8de4ca30c313?s=128&d=identicon&r=PG&f=1", "display_name": "ankit jain", "link": "https://stackoverflow.com/users/4988906/ankit-jain"}, "edited": false, "score": 0, "creation_date": 1533113772, "post_id": 51627404, "comment_id": 90222536, "body": "This (very platform-dependent) library seems to do what you whish: <a href=\"http://www.dyncall.org/\" rel=\"nofollow noreferrer\">dyncall.org</a>"}, {"owner": {"reputation": 320, "user_id": 4988906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0949ddd9e80733041bce8de4ca30c313?s=128&d=identicon&r=PG&f=1", "display_name": "ankit jain", "link": "https://stackoverflow.com/users/4988906/ankit-jain"}, "edited": false, "score": 2, "creation_date": 1533119690, "post_id": 51627404, "comment_id": 90226366, "body": "Found the function vfoo() in the source which was just present there and using that, I was able to get my solution... Thanks a lot!"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1533130935, "post_id": 51627404, "comment_id": 90233953, "body": "libffi should be able to do this and is fairly widely distributed/installed."}], "tags": [], "owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "is_accepted": true, "score": 4, "last_activity_date": 1533107653, "creation_date": 1533107653, "answer_id": 51627404, "question_id": 51626390, "link": "https://stackoverflow.com/questions/51626390/how-to-wrap-variadic-functions-using-ld-preload/51627404#51627404", "title": "How to wrap variadic functions using LD_PRELOAD?", "body": "<p>I think your problem is not related to LD_PRELOAD or dlopen/dlsym: you simply want to call a variadic function from a variadic function, eg:</p>\n\n<pre><code>int printf (const char *fmt, ...) {\n    return fprintf (stdout, fmt, my_variadic_parameters);\n}\n</code></pre>\n\n<p>As far as I know, it is not possible, but in carefully designed libraries (which is obviously a minority of them), every variadic function has a counterpart that uses <code>va_list</code> parameter, like printf and vprintf, fprintf and vfprintf:</p>\n\n<pre><code>int printf (const char *fmt, ...) {\n    va_list ap;\n    int retval;\n\n    va_start (ap, fmt);\n    retval= vfprintf (stdout, fmt, ap);\n    va_end (ap);\n    return retval;\n}\n\nint vmyprintf (const char *fmt, va_list pap) {\n    va_list ap;\n    int retval;\n\n    va_copy (ap, pap);\n    retval= vfprintf (stdout, fmt, ap);\n    va_end (ap);\n    return retval;\n}\n</code></pre>\n\n<p>So you should ask the creator of 'foo' to create a 'vfoo':</p>\n\n<pre><code>int vfoo (char *args, const char *f, va_list v)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1533113480, "post_id": 51627440, "comment_id": 90222392, "body": "The <code>va_arg</code>  function expects that you <i>know</i> which types to pull from the <code>va_list</code>."}], "tags": [], "owner": {"reputation": 3698, "user_id": 1848585, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9JLaK.png?s=128&g=1", "display_name": "Brian Tiffin", "link": "https://stackoverflow.com/users/1848585/brian-tiffin"}, "is_accepted": false, "score": 1, "last_activity_date": 1533107781, "creation_date": 1533107781, "answer_id": 51627440, "question_id": 51626390, "link": "https://stackoverflow.com/questions/51626390/how-to-wrap-variadic-functions-using-ld-preload/51627440#51627440", "title": "How to wrap variadic functions using LD_PRELOAD?", "body": "<p>Have a look at <code>man va_start</code>, there is a nicely concise example in that man page.</p>\n\n<p>You can treat the dlsym symbol address just you would any other function pointer.</p>\n\n<p>The basic concept behind va_args, is using a control variable in a loop, usually a <code>printf</code> style format string that can be parsed to decide when to exit the call frame building loop.  In your case ankit, you need to have some form \"is there another argument to place in the call frame\" as you build up a <code>va_list</code>.  Basically va_start va_arg... va_end.</p>\n\n<p>Again, best explained in code, and the man page has a nice example.</p>\n"}, {"comments": [{"owner": {"reputation": 320, "user_id": 4988906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0949ddd9e80733041bce8de4ca30c313?s=128&d=identicon&r=PG&f=1", "display_name": "ankit jain", "link": "https://stackoverflow.com/users/4988906/ankit-jain"}, "edited": false, "score": 0, "creation_date": 1533113812, "post_id": 51628969, "comment_id": 90222555, "body": "Right, I do have the information for type of arguments from f... now how to proceed further?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 320, "user_id": 4988906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0949ddd9e80733041bce8de4ca30c313?s=128&d=identicon&r=PG&f=1", "display_name": "ankit jain", "link": "https://stackoverflow.com/users/4988906/ankit-jain"}, "edited": false, "score": 0, "creation_date": 1533113936, "post_id": 51628969, "comment_id": 90222639, "body": "Use successive calls to <code>va_arg</code> to pull the values from the <code>va_list</code> that an initial call to <code>va_start</code> gave you."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 0, "last_activity_date": 1533114354, "last_edit_date": 1533114354, "creation_date": 1533113140, "answer_id": 51628969, "question_id": 51626390, "link": "https://stackoverflow.com/questions/51626390/how-to-wrap-variadic-functions-using-ld-preload/51628969#51628969", "title": "How to wrap variadic functions using LD_PRELOAD?", "body": "<p>Given</p>\n\n<blockquote>\n<pre><code> int foo(char *args, const char *f, ...)\n</code></pre>\n</blockquote>\n\n<p>the information provided by either <code>args</code> or <code>f</code> ought to tell you how many parameters of which type had been passed by the caller as variadic arguments.</p>\n\n<p><em>How</em> this info is provided depends on <code>foo</code>'s implementation, so see <code>foo()</code> documentation.</p>\n\n<p><sup>\nA nice example to this is <code>printf(const char * format, ...);</code> All info of what is received as variadic arguments shall be parseable from the 1st parameter, the non-variadic format-\"string\".\n</sup></p>\n\n<p>If you fail to gain insight in this, you are lost. In C there is <em>no</em> generic, \"built-in\" way to gather the number and types of variadic arguments passed.</p>\n"}], "owner": {"reputation": 320, "user_id": 4988906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0949ddd9e80733041bce8de4ca30c313?s=128&d=identicon&r=PG&f=1", "display_name": "ankit jain", "link": "https://stackoverflow.com/users/4988906/ankit-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "accepted_answer_id": 51627404, "answer_count": 3, "score": 5, "last_activity_date": 1533130987, "creation_date": 1533103709, "last_edit_date": 1533130987, "question_id": 51626390, "link": "https://stackoverflow.com/questions/51626390/how-to-wrap-variadic-functions-using-ld-preload", "title": "How to wrap variadic functions using LD_PRELOAD?", "body": "<p>I have to perform dynamic linking on a variadic function of following format:</p>\n\n<pre><code>int foo(char *args, const char *f, ...)\n</code></pre>\n\n<p>Here the number of arguments are variable. \nWhat I want to achieve is that I want to pass the obtained arguments to the original function which I am resolving using dlsym.\nIf I do not pass all the arguments I keep getting segmentation fault.\nThanks in advance.</p>\n"}, {"tags": ["c", "linux", "makefile", "cross-compiling"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1533106650, "post_id": 51626387, "comment_id": 90218600, "body": "You don&#39;t <i>compile</i> a <code>Makefile</code>. You <i>use</i> it (thru <code>make</code>) to compile things. Use also <a href=\"http://bashdb.sourceforge.net/remake/\" rel=\"nofollow noreferrer\">remake</a> with <code>-x</code> to debug your <code>Makefile</code>."}, {"owner": {"reputation": 180, "user_id": 8385942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f635b936a791ee6b06b2bff8df8871?s=128&d=identicon&r=PG&f=1", "display_name": "satyaGolladi", "link": "https://stackoverflow.com/users/8385942/satyagolladi"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1533106773, "post_id": 51626387, "comment_id": 90218662, "body": "My mistake, I am trying to run make file with &quot;make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi-&quot; command"}, {"owner": {"reputation": 180, "user_id": 8385942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f635b936a791ee6b06b2bff8df8871?s=128&d=identicon&r=PG&f=1", "display_name": "satyaGolladi", "link": "https://stackoverflow.com/users/8385942/satyagolladi"}, "edited": false, "score": 0, "creation_date": 1533108196, "post_id": 51626387, "comment_id": 90219472, "body": "That is in comment section"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 1, "last_activity_date": 1533117849, "last_edit_date": 1592644375, "creation_date": 1533117849, "answer_id": 51630542, "question_id": 51626387, "link": "https://stackoverflow.com/questions/51626387/error-in-running-makefile-using-cross-compiler/51630542#51630542", "title": "Error in running Makefile using cross compiler", "body": "<blockquote>\n<p>When search in forum for it is mentioned that compiler is 32 bit, but my compiler is 64 bit.</p>\n<pre><code>satya@satya-dev:~/Test/kernal$ uname -m\nx86_64\n</code></pre>\n</blockquote>\n<p>The architecture of your running system doesn't have anything to do with your compiler. Adding to that, you're <em>cross compiling</em> (or, trying to), so your default compiler isn't relevant either.</p>\n<p>The error message is actually quite obvious:</p>\n<blockquote>\n<pre><code>/bin/sh: arm-none-linux-gnueabi-gcc: command not found\n</code></pre>\n</blockquote>\n<p>So, you just don't have a cross-compiler for <code>arm</code> installed, at least not in your search path.</p>\n"}], "owner": {"reputation": 180, "user_id": 8385942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f635b936a791ee6b06b2bff8df8871?s=128&d=identicon&r=PG&f=1", "display_name": "satyaGolladi", "link": "https://stackoverflow.com/users/8385942/satyagolladi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 1, "accepted_answer_id": 51630542, "answer_count": 1, "score": 0, "last_activity_date": 1533117849, "creation_date": 1533103690, "last_edit_date": 1533111584, "question_id": 51626387, "link": "https://stackoverflow.com/questions/51626387/error-in-running-makefile-using-cross-compiler", "title": "Error in running Makefile using cross compiler", "body": "<p>my Makefile is </p>\n\n<pre><code>obj-m := hello.o\nPWD := $(shell pwd)\nKERNELDIR := /lib/modules/4.4.0-130-generic/build#$(shell uname -r)/build/\ndefault:\n        make -C $(KERNELDIR) M=$(PWD) #ARCH=$(ARCH) CROSS_COMPILE=$(COMPILER) modules\nclean:\n        make -C $(KERNELDIR) M=$(PWD) #ARCH=$(ARCH) clean\n</code></pre>\n\n<p>I want to compile it using cross compiler. I am compiling it using </p>\n\n<pre><code> make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi-\n</code></pre>\n\n<p>It throws error:</p>\n\n<pre><code>satya@satya-dev:~/Test/kernal$ make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi-\nmake -C /lib/modules/4.4.0-130-generic/build M=/home/satya/Test/kernal #ARCH=arm CROSS_COMPILE= modules\nmake[1]: Entering directory '/usr/src/linux-headers-4.4.0-130-generic'\nMakefile:704: Cannot use CONFIG_CC_STACKPROTECTOR_STRONG: -fstack-protector-strong not supported by compiler\nmake[1]: arm-none-linux-gnueabi-gcc: Command not found\n  LD      /home/satya/Test/kernal/built-in.o\n/bin/sh: arm-none-linux-gnueabi-ar: command not found\nscripts/Makefile.build:418: recipe for target '/home/satya/Test/kernal/built-in.o' failed\nmake[2]: *** [/home/satya/Test/kernal/built-in.o] Error 127\nMakefile:1437: recipe for target '_module_/home/satya/Test/kernal' failed\nmake[1]: *** [_module_/home/satya/Test/kernal] Error 2\nmake[1]: Leaving directory '/usr/src/linux-headers-4.4.0-130-generic'\nMakefile:7: recipe for target 'default' failed\nmake: *** [default] Error 2\nsatya@satya-dev:~/Test/kernal$\n</code></pre>\n\n<p>When search in forum for it is mentioned that compiler is 32 bit, but my compiler is 64 bit.</p>\n\n<pre><code>satya@satya-dev:~/Test/kernal$ uname -m\nx86_64\n</code></pre>\n\n<p>Even gcc is updated one.</p>\n\n<pre><code>satya@satya-dev:~/Test/kernal$ gcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/5/lto-wrapper\nTarget: x86_64-linux-gnu\nConfigured with: ../src/configure -v --with-pkgversion='Ubuntu 5.4.0-6ubuntu1~16.04.10' --with-bugurl=file:///usr/share/doc/gcc-5/README.Bugs --enable-languages=c,ada,c++,java,go,d,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-5 --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --with-system-zlib --disable-browser-plugin --enable-java-awt=gtk --enable-gtk-cairo --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-5-amd64/jre --enable-java-home --with-jvm-root-dir=/usr/lib/jvm/java-1.5.0-gcj-5-amd64 --with-jvm-jar-dir=/usr/lib/jvm-exports/java-1.5.0-gcj-5-amd64 --with-arch-directory=amd64 --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --enable-objc-gc --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu\nThread model: posix\ngcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.10)\n</code></pre>\n\n<p>Any suggestions to compile this?</p>\n"}, {"tags": ["c", "hex", "ascii", "data-representation"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1533103417, "post_id": 51626264, "comment_id": 90217080, "body": "<code>uint8_t</code> can&#39;t contain hex values; and <code>&quot;ABCDE&quot;</code> is equivalent to <code>{0x41,0x42,0x43,0x44,0x45,0}</code>. Just cast. (Also as a sidenote, <code>&quot;ABCDE&quot;</code> doesn&#39;t fit into <code>array[5]</code>, as it has 6 elements, because strings are NUL-terminated, as shown in the equivalent byte array."}, {"owner": {"reputation": 21, "user_id": 4773017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62391a5b25fdeae6ef5cf9e8c2aeac84?s=128&d=identicon&r=PG&f=1", "display_name": "ADGAN", "link": "https://stackoverflow.com/users/4773017/adgan"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1533105092, "post_id": 51626264, "comment_id": 90217809, "body": "Yes. That&#39;s just an example. But thank you for pointing that out."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1533106160, "post_id": 51626264, "comment_id": 90218339, "body": "<code>&quot;ABCDE&quot;</code> is an array of <b>6</b> <code>char</code>s as there is added a 0 terminator. I&#39;m not sure whether the compiler complains or implicitly fixes <code>char array[5] = &quot;ABCDE&quot;;</code>. However, you may access the first 5 <code>char</code>s. The expected output are already the corresponding ASCII values (as already pointed out) and <code>sizeof (char) == sizeof (uint8_t)</code>. So, this can be reduced to a simple copy: <code>memcpy(output, array, 5);</code>. (But, if you can&#39;t use <code>memcpy()</code> for any reasons a simple <code>for</code> loop should do as well.)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1533106621, "post_id": 51626264, "comment_id": 90218583, "body": "Regarding <code>char array[5] = &quot;ABCDE&quot;;</code> - I checked this out: The compilers (gcc HEAD 9.0.0, clang HEAD 7.0.0, both with <code>-pedantic</code>) don&#39;t complain but fixes this implicitly: <a href=\"https://wandbox.org/permlink/WOJmW7rZbCQ1QQhQ\" rel=\"nofollow noreferrer\">Test on Wandbox</a>. (Early in the morning but already learned something...) ;-)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 2, "creation_date": 1533108890, "post_id": 51626264, "comment_id": 90219884, "body": "@Scheff: <code>array[5] = &quot;ABCDE&quot;</code> is special. It defines (and initialises) a <code>char</code>-array with <b><i>five</i></b> elements (only). No <code>0</code>-terminator here. This is in line with the C11 standard."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1533109271, "post_id": 51626264, "comment_id": 90220114, "body": "@Amadan I overlooked that you mentioned <code>char array[5]</code> vs. <code>&quot;ABCDE&quot;</code> already before. So, my other comment might be interesting as well as the note of alk concerning this."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1533109385, "post_id": 51626264, "comment_id": 90220172, "body": "Thanks alk. Still - you don&#39;t need even a memcpy, just a cast. <code>incoming_message</code> <i>is</i> <code>message</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1533111237, "post_id": 51626264, "comment_id": 90221157, "body": "You do not even need to cast. Please see my answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533138215, "post_id": 51626264, "comment_id": 90239160, "body": "&quot;Therefore, no use of printf&quot; and &quot;The output should be ...&quot; --&gt; What output function is acceptable as you dis-allow <code>printf()</code>?"}, {"owner": {"reputation": 21, "user_id": 4773017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62391a5b25fdeae6ef5cf9e8c2aeac84?s=128&d=identicon&r=PG&f=1", "display_name": "ADGAN", "link": "https://stackoverflow.com/users/4773017/adgan"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533180404, "post_id": 51626264, "comment_id": 90254063, "body": "@chux Let me explain. I&#39;m developing a software for a STM32L0 series microcontroller which contains a CortexM0+ processor. It does not contain a ITM trace so no use of printf as I cannot view the data. I&#39;m constructing a message using sprintf and sending it to hardware encryption block for encryption. I found out that I need to input this data as hex values. I&#39;m transmitting this using a LoRa radio and sniffing the incoming data packets using a receiver."}], "answers": [{"comments": [{"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 0, "creation_date": 1533103749, "post_id": 51626324, "comment_id": 90217218, "body": "I think the <code>OP</code>wants also to save the <code>hex</code>values in an <code>uint8_t</code> array as he mentioned."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 0, "creation_date": 1533103989, "post_id": 51626324, "comment_id": 90217325, "body": "@Alan Which is really impossible (added note about it)."}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 0, "creation_date": 1533104226, "post_id": 51626324, "comment_id": 90217438, "body": "programmer Saw it, didn&#39;t think about it! Cheers."}, {"owner": {"reputation": 21, "user_id": 4773017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62391a5b25fdeae6ef5cf9e8c2aeac84?s=128&d=identicon&r=PG&f=1", "display_name": "ADGAN", "link": "https://stackoverflow.com/users/4773017/adgan"}, "edited": false, "score": 0, "creation_date": 1533104712, "post_id": 51626324, "comment_id": 90217650, "body": "Thank you for the reply. Sorry forgot to mention, this is for an embedded system. printf is not available for me."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 21, "user_id": 4773017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62391a5b25fdeae6ef5cf9e8c2aeac84?s=128&d=identicon&r=PG&f=1", "display_name": "ADGAN", "link": "https://stackoverflow.com/users/4773017/adgan"}, "edited": false, "score": 0, "creation_date": 1533107013, "post_id": 51626324, "comment_id": 90218794, "body": "@ADGAN Then you probably use some other method of presenting the values? Because no matter what it&#39;s just a presentational issue."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 4, "last_activity_date": 1533103967, "last_edit_date": 1533103967, "creation_date": 1533103426, "answer_id": 51626324, "question_id": 51626264, "link": "https://stackoverflow.com/questions/51626264/convert-ascii-string-array-into-its-hex-value-array/51626324#51626324", "title": "Convert ASCII string array into its hex value array", "body": "<p>First of all, <a href=\"http://en.cppreference.com/w/c/string/byte/strtol\" rel=\"nofollow noreferrer\"><code>strtol</code></a> like all other string functions expects a <strong><em>null-terminated</strong> byte string</em>, not single characters.</p>\n\n<p>Secondly, the characters encoded value is the actual value of the elements in your string. If you print the decimal value <code>65</code> (for example) using the correct format specifier, then the character <code>A</code> will be printed:</p>\n\n<pre><code>printf(\"%c\\n\", 65);  // Will print an A\n</code></pre>\n\n<p>Similarly, printing the character <code>'A'</code> as a decimal integer will print the value <code>65</code>:</p>\n\n<pre><code>printf(\"%d\\n\", 'A');  // Will print the value 65\n</code></pre>\n\n<p>So all you need to do is to print the values in your array in the correct format.</p>\n\n<hr>\n\n<p><strong><em>Furthermore...</em></strong> All values on computers the last few decades are stored in <em>binary</em>. All of them.</p>\n\n<p>Decimal, octal or hexadecimal are just how you present the values. Storing <code>0x41</code>, <code>61</code>, <code>0101</code> or <code>0b01000001</code> (for compilers with binary notation extension) doesn't matter since in the end it will be the binary value that is stored. If you want to show a value as hexadecimal to a user through some output, you have to format the binary value as such when printing or writing it.</p>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 4, "last_activity_date": 1533573552, "last_edit_date": 1533573552, "creation_date": 1533111194, "answer_id": 51628411, "question_id": 51626264, "link": "https://stackoverflow.com/questions/51626264/convert-ascii-string-array-into-its-hex-value-array/51628411#51628411", "title": "Convert ASCII string array into its hex value array", "body": "<ol>\n<li>Talking C a <code>char</code> is the smallest integer value available.</li>\n<li>Talking C and ASCII a character literal (like <code>'A'</code>) is just another representation of an <strong><code>int</code></strong> value (<code>65</code> here).</li>\n<li>Talking Math there are other ways to <em>represent</em> the very same value, aside the decimal way (using base 10). One common is using the base of 16, the hexadecimal way.</li>\n</ol>\n\n<p>Putting the above together it proves that:</p>\n\n<pre><code>int i = 'A';\nchar c = i; \n</code></pre>\n\n<p>is the same as: </p>\n\n<pre><code>int i = 65; \nchar c = i; \n</code></pre>\n\n<p>and the same as: </p>\n\n<pre><code>int i = 0x41; \nchar c = i; \n</code></pre>\n\n<p>and the same as: </p>\n\n<pre><code>char c = 'A';\n</code></pre>\n\n<p>and the same as: </p>\n\n<pre><code>char c = 65;\n</code></pre>\n\n<p>and the same as: </p>\n\n<pre><code>char c = 0x41;\n</code></pre>\n\n<p>So </p>\n\n<pre><code>char a[5] = \"ABCDE\";\n</code></pre>\n\n<p>in fact already is an integer array of five (small) integers.</p>\n\n<p>If printed using the correct <em>conversion specifier</em> and <em>length modifier</em> you see what you are after.</p>\n\n<pre><code>for (size_t i = 0; i &lt; 5; ++i)\n{\n  printf(\"%hhx \", a[i]);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>41 42 43 44 45\n</code></pre>\n\n<p>To indicate to the reader this should be taken as hexadecimal values one could prefix the value using the common <code>0x</code> notation</p>\n\n<pre><code>  printf(\"0x%hhx \", a[i]);\n</code></pre>\n\n<p>which gave you</p>\n\n<pre><code>0x41 0x42 0x43 0x44 0x45\n</code></pre>\n\n<p>If you would show this to Pascal guys you perhaps would use</p>\n\n<pre><code>  printf(\"$%hhx \", a[i]);\n</code></pre>\n\n<p>which gave you</p>\n\n<pre><code>$41 $42 $43 $44 $45\n</code></pre>\n\n<p>To see the characters themselves just us:</p>\n\n<pre><code>  printf(\"%c \", a[i]);\n</code></pre>\n\n<p>and get</p>\n\n<pre><code>A B C D E\n</code></pre>\n\n<p>To see the decimal values use</p>\n\n<pre><code>  printf(\"%d \", a[i]);\n</code></pre>\n\n<p>and get</p>\n\n<pre><code>65 66 67 68 69\n</code></pre>\n\n<p>The conclusion is, that it's all just matter of how you represent (\"print\") the <strong><em>same values</em></strong> (the content of <code>a</code>'s elements) . The \"conversion\" happens when creating the <em>representation</em> of a very same value (via printing and passing the right \"instructions\"), that is during output only.</p>\n\n<hr>\n\n<p>As you refer to ASCII only, this implies all value are &lt;128, so you can just plain copy the array's values using either a loop </p>\n\n<pre><code>char src[5] = \"ABCDE\";\nuint8_t dst[5];\n\nfor (size_t i = 0 i &lt; 5; ++i)\n{\n  dst[i] = src[i];\n}\n</code></pre>\n\n<p>or by copying the related memory block at once</p>\n\n<pre><code>memcpy(dst, src, 5);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1533573798, "post_id": 51629993, "comment_id": 90385726, "body": "How does this answer the question in its whole?"}], "tags": [], "owner": {"reputation": 107, "user_id": 8136895, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H0dW16vb6oc/AAAAAAAAAAI/AAAAAAAAABc/7Ieee0VQ4C4/photo.jpg?sz=128", "display_name": "Vaibhav Verma", "link": "https://stackoverflow.com/users/8136895/vaibhav-verma"}, "is_accepted": false, "score": -1, "last_activity_date": 1533116252, "creation_date": 1533116252, "answer_id": 51629993, "question_id": 51626264, "link": "https://stackoverflow.com/questions/51626264/convert-ascii-string-array-into-its-hex-value-array/51629993#51629993", "title": "Convert ASCII string array into its hex value array", "body": "<p>you can convert the value to hexadecimal using the basic algorithm i.e division by 16.\nI have created the following function where you can pass the string to be converted and a an array of strings where you will get the response.</p>\n\n<pre><code>void hexCon(char str[],char result[][5]){\n    int i,check,rem = 0;\n    char res[20],res2[20];        \n    int len = 0;    \n    char temp;          \n\n    for(i=0; i &lt; strlen(str) ; i++){\n        len=0;\n        check = str[i];\n        while(check &gt; 0){\n        rem = check%16;\n        switch(rem){\n            case 10:temp='A';break;\n            case 11:temp='B';break;\n            case 12:temp='C';break;\n            case 13:temp='D';break;\n            case 14:temp='E';break;\n            case 15:temp='F';break;\n            default:temp=rem + '0';\n        }\n        res[len] = temp;       \n        check = check /16;\n        len++;    \n    }\n\n    reverse(res,len,res2);  //reversing the digits\n    res2[len] = '\\0';       //adding null character at the end of string\n    strcpy(result[i],res2); //copying all data to result array\n    }\n}\n</code></pre>\n\n<p>where reverse function is :</p>\n\n<pre><code>void reverse(char str[], int size, char rev[]) \n{       \n    int i=0,j=0;\n    for(i=size-1 , j=0 ; i &gt;= 0; i-- , j++ ){\n        rev[j] = str[i];\n    }    \n}\n</code></pre>\n\n<p>you can call it like :</p>\n\n<pre><code>void main(){    \n    char str[]=\"ABCDE\";\n    char result[strlen(str)][5];\n    int i;\n    hexCon(str,result);\n    for(i =0 ;i &lt; strlen(str); i++){\n        printf(\"%s\\n\",result[i]);\n    }\n}\n</code></pre>\n\n<p>the algorithm used is explained here :-\n<a href=\"https://www.permadi.com/tutorial/numDecToHex/\" rel=\"nofollow noreferrer\">https://www.permadi.com/tutorial/numDecToHex/</a></p>\n\n<p>Hope this helps :)</p>\n"}], "owner": {"reputation": 21, "user_id": 4773017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62391a5b25fdeae6ef5cf9e8c2aeac84?s=128&d=identicon&r=PG&f=1", "display_name": "ADGAN", "link": "https://stackoverflow.com/users/4773017/adgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1419, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1533659081, "creation_date": 1533103188, "last_edit_date": 1533659081, "question_id": 51626264, "link": "https://stackoverflow.com/questions/51626264/convert-ascii-string-array-into-its-hex-value-array", "title": "Convert ASCII string array into its hex value array", "body": "<p>I have a <code>char</code> array which contains ASCII characters. I need to know how to get the hex value of each character and save it in a <code>uint8_t</code> array.</p>\n\n<p>E.g. if I have </p>\n\n<pre><code>array[5] = \"ABCDE\"\n</code></pre>\n\n<p>The output should be</p>\n\n<pre><code>output[5] = {0x41, 0x42, 0x43, 0x44, 0x45}\n</code></pre>\n\n<p>I tried using <a href=\"https://en.cppreference.com/w/c/string/byte/strtol\" rel=\"nofollow noreferrer\"><code>strtol</code></a> but didn't work. </p>\n\n<pre><code>for(unsigned i = 0; i &lt; 32; i++) {\n    message[i] = (uint8_t)strtol(&amp;incoming_message[i], NULL, 16);\n}\n\nOutput:\nA 0 0 0 0 0 0 0 0 0 F 0 0 0 0 0\n0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\n</code></pre>\n\n<hr>\n\n<p><strong>Update:</strong> This is for a program I'm writing for a <a href=\"https://en.wikipedia.org/wiki/ARM_Cortex-M#Cortex-M0+\" rel=\"nofollow noreferrer\"><em>Cortex-M0+ processor</em></a>. I'm not just viewing incoming data, I'm processing this data in the next step. Therefore, no use of <code>printf</code></p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1533102645, "post_id": 51626075, "comment_id": 90216779, "body": "First of all, please pick <i>one</i> language, C and C++ are two very different languages, especially when it come to semantics like this. Other than that, welcome to the wonderful world of <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>. If you have UB (Undefined Behavior) then all discussion about behavior becomes moot."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1533102665, "post_id": 51626075, "comment_id": 90216787, "body": "dumb bad luck. <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined behaviour</a> has, well, behaviour that&#39;s undefined. It could do anything, and that includes look like it works."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1533102707, "post_id": 51626075, "comment_id": 90216797, "body": "&quot;Runs fine&quot; is a bit optimistic... You are probably overwriting unrelated portions of the stack. Still, it&#39;s interesting that in your implementation <code>p</code> decays to a pointer to some portion of memory that is decent enough to be overwritten (albeit illegally). Given that all this code falls straightly into undefined behavior and implementation-defined behavior territory, you should specify what compiler you are using."}, {"owner": {"reputation": 1844, "user_id": 8238512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ouYe.jpg?s=128&g=1", "display_name": "Rizwan", "link": "https://stackoverflow.com/users/8238512/rizwan"}, "edited": false, "score": 0, "creation_date": 1533102986, "post_id": 51626075, "comment_id": 90216895, "body": "A good behavior is also a sub-set of un-defined behavior. These kind of code is not recommended. you indeed know here the you are writing to an un-allocated memory. And also compiler is warning you, this is what we can call as assistance from compiler. Whenever you compile a code it should be 0-error and 0-warning, just follow this rule and you will witness very less un-defined behavior. :)"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533103309, "post_id": 51626075, "comment_id": 90217049, "body": "The dupe link is useful information, but it is not a duplicate, because it fails to clarify (or at least call) the misunderstanding of auto-allocation and the question why it &quot;works&quot; for second code."}, {"owner": {"reputation": 55, "user_id": 2450589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72d5ee67d38b0eb28c55c3c746e9241b?s=128&d=identicon&r=PG", "display_name": "Krishna", "link": "https://stackoverflow.com/users/2450589/krishna"}, "edited": false, "score": 0, "creation_date": 1533104404, "post_id": 51626075, "comment_id": 90217514, "body": "Thank you all. This issue came across when I was reviewing someone code. The problem is nowadays most of the C++ coding is written by C developers. This is first time I was seeing an array of zero size and want to know why the programmer meant by such a code."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 2450589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72d5ee67d38b0eb28c55c3c746e9241b?s=128&d=identicon&r=PG", "display_name": "Krishna", "link": "https://stackoverflow.com/users/2450589/krishna"}, "edited": false, "score": 0, "creation_date": 1533104119, "post_id": 51626142, "comment_id": 90217381, "body": "Not very sure it is because of adjacent memory location, as p is defined after sz and it works fine  everytime."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 55, "user_id": 2450589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72d5ee67d38b0eb28c55c3c746e9241b?s=128&d=identicon&r=PG", "display_name": "Krishna", "link": "https://stackoverflow.com/users/2450589/krishna"}, "edited": false, "score": 1, "creation_date": 1533104489, "post_id": 51626142, "comment_id": 90217543, "body": "@Krishna, unfortunately, even seemingly sane behavior is under undefined behavior. All I can say is don&#39;t rely on such code."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 5, "last_activity_date": 1533102735, "creation_date": 1533102735, "answer_id": 51626142, "question_id": 51626075, "link": "https://stackoverflow.com/questions/51626075/is-char-p0-represents-an-auto-allocated-buffer-or-a-safe-pointer/51626142#51626142", "title": "Is char p[0] represents an auto allocated buffer or a safe pointer?", "body": "<blockquote>\n  <p>Why it is so?</p>\n</blockquote>\n\n<p>It is still undefined behavior.</p>\n\n<p>It works in your setup because, by coincidence, the array that holds <code>\"Hello World\"</code> is adjacent to the variable <code>p</code> in the stack.</p>\n\n<p>Don't rely on such code and don't use them. The behavior of such code can change with compiler changes, using different compiler options, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 1, "last_activity_date": 1533103053, "last_edit_date": 1533103053, "creation_date": 1533102824, "answer_id": 51626168, "question_id": 51626075, "link": "https://stackoverflow.com/questions/51626075/is-char-p0-represents-an-auto-allocated-buffer-or-a-safe-pointer/51626168#51626168", "title": "Is char p[0] represents an auto allocated buffer or a safe pointer?", "body": "<p>This</p>\n\n<pre><code>char p[0];\n</code></pre>\n\n<p>is defining an array of chars of length 0, at a position decided by the linker.<br>\nThere is no space to print anything into it.</p>\n\n<p>The only difference/improvement compared to </p>\n\n<pre><code>char *p;\n</code></pre>\n\n<p>Is that the latter does not even have the linker decide on where to put the zero sized space.</p>\n\n<p>You need space to print into. Neither of the two methods provides/reserves any.</p>\n\n<p>Change to </p>\n\n<pre><code>char p[&lt;N&gt;];    \n</code></pre>\n\n<p>with <code>&lt;N&gt;</code> being a suitably high number to ensure sufficient space, if you can decide on one before compiling.</p>\n\n<p>Use</p>\n\n<pre><code>char* p;\n/* ... */\np = malloc(&lt;N&gt;);\n</code></pre>\n\n<p>if you do not know the suitable size before runtime.</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1533112160, "post_id": 51626524, "comment_id": 90221673, "body": "&quot;<i>Good</i>&quot;? Really? No. ;-)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1533112287, "post_id": 51626524, "comment_id": 90221742, "body": "@alk I meant good in context of &quot;as expected&quot; . :)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1533112364, "post_id": 51626524, "comment_id": 90221778, "body": "Just noticed this. Yes, I did it again. I did not completely read the question. Shame on me ..."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1533112850, "post_id": 51626524, "comment_id": 90222029, "body": "@alk :) I hope you get the meaning now. I&#39;m wondering in that case, whether my answer would be <i>unwelcoming</i>? :P"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1533113637, "post_id": 51626524, "comment_id": 90222468, "body": "Hu, yesnowell ... annotate it with a wink and your good."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1533104306, "creation_date": 1533104306, "answer_id": 51626524, "question_id": 51626075, "link": "https://stackoverflow.com/questions/51626075/is-char-p0-represents-an-auto-allocated-buffer-or-a-safe-pointer/51626524#51626524", "title": "Is char p[0] represents an auto allocated buffer or a safe pointer?", "body": "<p>The first snippet, as you expected, invokes undefined behavior by accessing uninitialized pointer (<em>invalid memoory</em>). Good.</p>\n\n<p>The second snippet, is a <strong>constraint violation</strong>. For an array declaration like <code>p[0]</code>, quoting <code>C11</code>, chapter \u00a76.7.6.2, (<em>emphasis mine</em>)</p>\n\n<blockquote>\n  <p>In addition to optional type qualifiers and the keyword <code>static</code>, the <code>[</code> and <code>]</code> may delimit\n  an expression or <code>*</code>. If they delimit an expression (which specifies the size of an array), the\n  expression shall have an integer type. <strong>If the expression is a constant expression, it shall\n  have a value greater than zero.</strong> [....]</p>\n</blockquote>\n\n<p>So, the code is not <em>valid</em>, your compiler should not have produced a binary out of that code. Pump up your compiler warnings.</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1533112275, "post_id": 51628073, "comment_id": 90221737, "body": "Your answer is not clear to me. I could guess, but I won&#39;t."}, {"owner": {"reputation": 40, "user_id": 8047803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5e3b5560d83bb6d5841f5dfac4abb1?s=128&d=identicon&r=PG", "display_name": "Subodh", "link": "https://stackoverflow.com/users/8047803/subodh"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1533117807, "post_id": 51628073, "comment_id": 90225203, "body": "@alk The above code works fine and will display &quot;Hello World&quot; without any errors. While compiling the above show a compiler warning it is illegal to use [0], but runs fine. Why it is so? that&#39;s what tring to explain some of the compiler will allocate memory as per required length to variable and store data/string into that, pop a warning message  :)"}], "tags": [], "owner": {"reputation": 40, "user_id": 8047803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d5e3b5560d83bb6d5841f5dfac4abb1?s=128&d=identicon&r=PG", "display_name": "Subodh", "link": "https://stackoverflow.com/users/8047803/subodh"}, "is_accepted": false, "score": 1, "last_activity_date": 1533110571, "last_edit_date": 1533110571, "creation_date": 1533109928, "answer_id": 51628073, "question_id": 51626075, "link": "https://stackoverflow.com/questions/51626075/is-char-p0-represents-an-auto-allocated-buffer-or-a-safe-pointer/51628073#51628073", "title": "Is char p[0] represents an auto allocated buffer or a safe pointer?", "body": "<pre><code>char sz[] = \"Hello World\";\nchar *p;\nsnprintf(p, 12, sz);\nprintf(\"%s\", p);\n</code></pre>\n\n<p>correct will get error memory not allocate </p>\n\n<pre><code>char sz[] = \"Hello World\";\nchar p[0];\nsnprintf(p, 12, sz);\nprintf(\"%s\", p);\n</code></pre>\n\n<p>some of the compiler allocate size as per string length but mostly we should avoid this and this is compiler dependent issue nothing related to <code>snprintf</code></p>\n"}], "owner": {"reputation": 55, "user_id": 2450589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72d5ee67d38b0eb28c55c3c746e9241b?s=128&d=identicon&r=PG", "display_name": "Krishna", "link": "https://stackoverflow.com/users/2450589/krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "closed_date": 1533118994, "answer_count": 4, "score": 0, "last_activity_date": 1533110571, "creation_date": 1533102393, "question_id": 51626075, "link": "https://stackoverflow.com/questions/51626075/is-char-p0-represents-an-auto-allocated-buffer-or-a-safe-pointer", "closed_reason": "Duplicate", "title": "Is char p[0] represents an auto allocated buffer or a safe pointer?", "body": "<p>This is C++ code which shows a compiler warning but runs fine. The expected behavior was as below, but:</p>\n\n<pre><code>char sz[] = \"Hello World\";\nchar *p;\nsnprintf(p, 12, sz);\nprintf(\"%s\", p);\n</code></pre>\n\n<p>The above code when ran, it crashes as the *p is not allocated. Good.</p>\n\n<pre><code>char sz[] = \"Hello World\";\nchar p[0];\nsnprintf(p, 12, sz);\nprintf(\"%s\", p);\n</code></pre>\n\n<p>The above code works fine and will display \"Hello World\" without any errors.\nWhile compiling the above show a compiler warning it is illegal to use [0], but runs fine.</p>\n\n<p>Why it is so?</p>\n"}, {"tags": ["c", "malloc", "sizeof", "memcpy", "const-char"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533090617, "post_id": 51624583, "comment_id": 90214056, "body": "<i>Why</i> do you need to &quot;convert&quot; the data? Do you need to modify it? While not in standard C (but in other standards) you probably have a <code>strdup</code> function which possibly might do what you want (if the contents is a string). Oh and don&#39;t forget to <code>free</code> the data sometime, or you&#39;ll have a memory leak."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1533097218, "post_id": 51624583, "comment_id": 90215310, "body": "Why do you need to convert the pointer? If you have to remove the <code>const</code> qualifier, your system design is most probably broken, as it is not <code>const</code>-correct."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1533090835, "creation_date": 1533090835, "answer_id": 51624619, "question_id": 51624583, "link": "https://stackoverflow.com/questions/51624583/how-to-convert-const-unsigned-char-payload-to-char-and-copy-it/51624619#51624619", "title": "How to convert const unsigned char* payLoad to char* and copy it?", "body": "<p>A large part of your problem is <code>sizeof(message)</code> which gives you the size of <em>the pointer</em>, not what it points to.</p>\n\n<p>Either pass the length to the function, or (if the data is a null-terminated string) use <a href=\"http://en.cppreference.com/w/c/string/byte/strlen\" rel=\"nofollow noreferrer\"><code>strlen</code></a> to get the length (but don't forget to add one for the terminator!) or the above mentioned <code>strdup</code> function (if available).</p>\n"}, {"comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1533091347, "post_id": 51624648, "comment_id": 90214235, "body": "@M.M Thanks, fixed that."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 1, "last_activity_date": 1533091233, "last_edit_date": 1533091233, "creation_date": 1533091120, "answer_id": 51624648, "question_id": 51624583, "link": "https://stackoverflow.com/questions/51624583/how-to-convert-const-unsigned-char-payload-to-char-and-copy-it/51624648#51624648", "title": "How to convert const unsigned char* payLoad to char* and copy it?", "body": "<p><code>malloc(sizeof(message))</code> only allocates space for a <code>char *</code> pointer, probably 8 bytes. You need to allocate space for the data which <code>message</code> points to.</p>\n\n<p>There's a bit of a problem: how much data is pointed at by <code>message</code>? Is it null terminated? Let's assume it is, then you can use <code>strlen</code>. Don't forget space for the null byte!</p>\n\n<pre><code>copiedValue = malloc(strlen((char*)message) + 1);\n</code></pre>\n\n<p>Similarly for <code>memcpy</code>.</p>\n\n<pre><code>memcpy(copiedValue, message, strlen((char*)message) + 1);\n</code></pre>\n\n<p>Note, there's no need to cast <code>memcpy</code>'s return value to <code>void</code>.</p>\n\n<hr>\n\n<p>Or use the POSIX <code>strdup</code> function.</p>\n\n<pre><code>copiedValue = strdup((char *)message);\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 8112008, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4e804d3fad42433141521bbb9a21362?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/8112008/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1533091233, "creation_date": 1533090496, "question_id": 51624583, "link": "https://stackoverflow.com/questions/51624583/how-to-convert-const-unsigned-char-payload-to-char-and-copy-it", "title": "How to convert const unsigned char* payLoad to char* and copy it?", "body": "<p>I'm trying to convert a <code>const unsigned char*</code> to <code>char*</code> as well as make a copy. I have tried several variations of the code below but I usually get a memory exception. This function resides in an application written in C. </p>\n\n<p>The below function is what I'm trying to create</p>\n\n<pre><code>//global variable\nchar* copiedValue;\n\nvoid convertUnsignedChar(const unsigned char* message){\n\n    copiedValue = malloc(sizeof(message));\n    (void)memcpy(copiedValue, message, sizeof(message));\n\n}\n</code></pre>\n"}, {"tags": ["c", "file-handling"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 3, "creation_date": 1533093025, "post_id": 51623952, "comment_id": 90214550, "body": "You must <b>validate the return</b> on every <code>scanf</code> , e.g. <code>scanf(&quot;%s&quot;,account[i].first);</code> (or any input function for that point) to insure you are actually processing valid data. Check the return."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1533097361, "post_id": 51623952, "comment_id": 90215339, "body": "That&#39;s far from a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1533086031, "post_id": 51624050, "comment_id": 90213178, "body": "Not just case 6. The <code>i &lt; count</code> test is used in 6 different locations, but <code>count</code> is never initialized in a single place throughout the code."}], "tags": [], "owner": {"reputation": 714, "user_id": 9036814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250742688f24344257034879f1fc76ea?s=128&d=identicon&r=PG&f=1", "display_name": "mckuok", "link": "https://stackoverflow.com/users/9036814/mckuok"}, "is_accepted": false, "score": 0, "last_activity_date": 1533085941, "creation_date": 1533085941, "answer_id": 51624050, "question_id": 51623952, "link": "https://stackoverflow.com/questions/51623952/unable-to-read-from-a-dat-file-in-c/51624050#51624050", "title": "Unable to read from a .dat file in C", "body": "<p>When you start the program with case 6, the <code>count</code> is not initialized, leading to unexpected behavior of the <code>for</code> loop. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10165708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eedb005b5c02d0164b731ecde65371ae?s=128&d=identicon&r=PG&f=1", "display_name": "crockford_q", "link": "https://stackoverflow.com/users/10165708/crockford-q"}, "is_accepted": false, "score": -1, "last_activity_date": 1533125773, "creation_date": 1533125773, "answer_id": 51633096, "question_id": 51623952, "link": "https://stackoverflow.com/questions/51623952/unable-to-read-from-a-dat-file-in-c/51633096#51633096", "title": "Unable to read from a .dat file in C", "body": "<p>As has been pointed out, count hasn't been initialised, but will typically start with a value of zero, when you exit the program and restart it later. While this isn't guaranteed, if it's zero you'll find the loops will terminate early.</p>\n\n<p>So on a restart what you need to do is read back the number of records in your dat file and initialise count to that number, then everything should work from there. You might want to create a new option \u201cread in existing file\u201d or similar to do the scan.</p>\n"}], "owner": {"reputation": 579, "user_id": 6169115, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5ad7944ff33c7114a8ddff00011cef96?s=128&d=identicon&r=PG&f=1", "display_name": "icestorm0806", "link": "https://stackoverflow.com/users/6169115/icestorm0806"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1533125773, "creation_date": 1533084984, "last_edit_date": 1533087137, "question_id": 51623952, "link": "https://stackoverflow.com/questions/51623952/unable-to-read-from-a-dat-file-in-c", "title": "Unable to read from a .dat file in C", "body": "<p>I have created a program which takes account information from the user and stores it into the file <em>accounts.dat</em>. As the program is right now, it appears everything works fine until I close it and reopen to test it out, it doesn't read off any of the information that I had already entered. Case 6 is where it is supposed to read from the <em>accounts.dat</em>. <em>accounts.dat</em> does seem to be filling up with information, each time I use it.</p>\n\n<pre><code>/* HEADER FILES */\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* STRUCT TO HOLD ACCOUNT INFO */\nstruct bank\n{\n    char first[25];\n    char middle[25];\n    char last[25];\n    long int aNumber;\n    float aBalance;\n};\n\n/* MAIN START*/\nint main()\n{\n    int choice; /* SWITCH-STATEMENT CASE */\n    int i; /* FOR-LOOP COUNTER */\n    int  count; /* KEEPS TRACK OF TOTAL # OF ACCOUNTS */\n    long int aNumber; /* TEMPORARILY HOLDS ACCOUNT # FOR SEARCH IN FILE */\n    float amount; /* TEMPORARILY HOLDS A DOLLAR AMOUNT FOR VARIOUS REASONS */\n    FILE *fp; /* SPECIFIC FILE DECLARATION FOR OUR BANK */\n    struct bank account[50]; /* ARRAY DECLARATION FOR STRUCT */\n\n    /* DO/WHILE START */\n    do\n    {\n        /* OPTION MENU */\n        printf(\"\\n\\nWelcome to yor bank access.\\n\"\n               \"Please follow the prompts below.\\n\\n\"\n               \"\\t0. Exit\\n\"\n               \"\\t1. Deposit\\n\"\n               \"\\t2. Withdrawal\\n\"\n               \"\\t3. Add account\\n\"\n               \"\\t4. Remove Account\\n\"\n               \"\\t5. Balance Inquiry\\n\"\n               \"\\t6. View Account\\n\"\n               \"\\nEnter your choice: \");\n        scanf(\"%d\",&amp;choice);\n        printf(\"\\n\");\n\n        /* SWITCH START */\n        switch(choice)\n        {\n\n        /* CASE 0: EXIT PROGRAM */\n        case 0:\n            exit(1);\n            break;\n\n        /* CASE 1: DEPOSIT */\n        case 1:\n            fopen(\"accounts.dat\", \"r+\");\n            fseek(fp,0,SEEK_SET);\n            printf(\"please enter account number: \");\n            scanf(\"%ld\",&amp;aNumber);\n            printf(\"Amount to be deposited: $\");\n            scanf(\"%f\", &amp;amount);\n            for(i=0; i&lt;count; i++)\n            {\n                if(account[i].aNumber == aNumber)\n                {\n                    account[i].aBalance = account[i].aBalance + amount;\n                    fseek(fp,i * sizeof(struct bank),SEEK_SET);\n                    fwrite(account+i,sizeof(struct bank),1, fp);\n                    break;\n                }\n            }\n            if(i==count)\n                printf(\"Account number does not exits\\n\");\n            break;\n\n        /* CASE:2 WITHDRAWAL */\n        case 2:\n            fopen(\"accounts.dat\", \"r+\");\n            fseek(fp,0,SEEK_SET);\n            printf(\"Please enter account number: \");\n            scanf(\"%ld\",&amp;aNumber);\n            printf(\"Enter the amount to be withdrawn: $\");\n            scanf(\"%f\",&amp;amount);\n            for(i=0; i&lt;count; i++)\n            {\n                if(account[i].aNumber==aNumber)\n                {\n                    if(account[i].aBalance&lt;amount)\n                    {\n                        printf(\"Insufficient balance\\n\");\n                        break;\n                    }\n                    account[i].aBalance=account[i].aBalance-amount;\n                    fseek(fp,i*sizeof(struct bank),SEEK_SET);\n                    fwrite(account+i,sizeof(struct bank),1, fp);\n                    break;\n                }\n            }\n            if(i==count)\n                printf(\"Account number does not exits\\n\");\n            break;\n\n        /* CASE 3: ADD ACCOUNT */\n        case 3:\n            fp = fopen(\"accounts.dat\",\"a+\");\n            printf(\"Enter a 6-digit account number: \");\n            scanf(\"%ld\",&amp;aNumber);\n            for(i=0; i&lt;count; i++)\n            {\n                if(account[i].aNumber==aNumber)\n                {\n                    printf(\"Account already exist\\n\");\n                    break;\n                }\n            }\n            if(i==count)\n            {\n                account[i].aNumber=aNumber;\n\n                printf(\"Enter the First Name: \");\n                scanf(\"%s\",account[i].first);\n\n                printf(\"Enter the Middle Initial: \");\n                scanf(\"%s\",account[i].middle);\n\n                printf(\"Enter the Last Name: \");\n                scanf(\"%s\",account[i].last);\n\n                printf(\"Enter the Amount: $\");\n                scanf(\"%f\",&amp;account[i].aBalance);\n                fseek(fp,0,SEEK_END);\n                fwrite(account+i,sizeof(struct bank),1, fp);\n                count++;\n            }\n            break;\n\n        /* CASE 4: DELETE ACCOUNT */\n        case 4:\n            fopen(\"accounts.dat\", \"a+\");\n            fseek(fp,0,SEEK_SET);\n            printf(\"Please enter account number: \");\n            scanf(\"%ld\",&amp;aNumber);\n            for(i=0; i&lt;count; i++)\n            {\n                if(account[i].aNumber==aNumber)\n                    break;\n            }\n            if(i==count)\n                printf(\"Account number does not exits\\n\");\n            else\n            {\n                while(i&lt;count)\n                {\n                    strcpy(account[i].first,account[i+1].first);\n                    strcpy(account[i].middle,account[i+1].middle);\n                    strcpy(account[i].last,account[i+1].last);\n                    account[i].aNumber=account[i+1].aNumber;\n                    account[i].aBalance=account[i+1].aBalance;\n                }\n                count--;\n                fp=fopen(\"accounts.dat\", \"wb\");\n                for(i=0; i&lt;count; i++)\n                    fwrite(account+i,sizeof(struct bank),1, fp);\n                fclose(fp);\n                /* REOPEN FILE */\n                fopen(\"accounts.dat\", \"r+\");\n            }\n            break;\n\n        /* CASE 5: BALANCE INQUIRY*/\n        case 5:\n            fopen(\"accounts.dat\", \"r\");\n            printf(\"Please enter account number: \");\n            scanf(\"%ld\",&amp;aNumber);\n            for(i=0; i&lt;count; i++)\n            {\n                if(account[i].aNumber==aNumber)\n                {\n                    printf(\"First Name: %s\\n\",account[i].first);\n                    printf(\"Middle Initial: %s\\n\",account[i].middle);\n                    printf(\"Last Name: %s\\n\",account[i].last);\n                    printf(\"Account Number: %ld\\n\",account[i].aNumber);\n                    printf(\"Balance Amount: $%.2f\\n\",account[i].aBalance);\n                    break;\n                }\n            }\n            if(i==count)\n                printf(\"Account number does not exits\\n\");\n            break;\n\n        /* CASE 6: VIEW ACCOUNTS*/\n        case 6:\n            fopen(\"accounts.dat\", \"r\");\n            for(i=0; i&lt;count; i++)\n            {\n                fread(&amp;account[i], sizeof(account), 1, fp);\n                printf(\"Entry %1d\\n\", i+1);\n                printf(\"First Name: %s\\n\",account[i].first);\n                printf(\"Middle Initial: %s\\n\",account[i].middle);\n                printf(\"Last Name: %s\\n\",account[i].last);\n                printf(\"Account Number: %ld\\n\",account[i].aNumber);\n                printf(\"Account Balance: $%.2f\\n\",account[i].aBalance);\n            }\n        } /* END SWITCH-STATEMENT */\n    } /* END 'DO' */\n    while(choice!=0);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "memory-management", "error-handling", "goto"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1533084420, "post_id": 51623858, "comment_id": 90212881, "body": "Couldn&#39;t you just check that each pointer isn&#39;t NULL before trying to free it?"}, {"owner": {"reputation": 908, "user_id": 3292279, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VX393.jpg?s=128&g=1", "display_name": "Alex Johnson", "link": "https://stackoverflow.com/users/3292279/alex-johnson"}, "edited": false, "score": 1, "creation_date": 1533085031, "post_id": 51623858, "comment_id": 90213003, "body": "You might also try <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1533108221, "post_id": 51623858, "comment_id": 90219488, "body": "&#39;I free every bit of allocated memory at the end of it&#39; well unless your OS is faulty, don&#39;t waste your time and effort doing that.  One good reason is that, unlike the OS when terminating a process, you cannot always guarantee that other threads are not using the memory you think you need to free.  The other is the reason you asked this question - the fatal error may have destroyed the C sub-allocator that supports malloc/calloc/free.  If you are running on a non-trivial OS, eg. Windows/linux, just don&#39;t bother with redundant memory deallocation, just get out."}, {"owner": {"reputation": 33, "user_id": 9604419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_s2i2un-J5g/AAAAAAAAAAI/AAAAAAAAACY/0Mh7SPRIwYM/photo.jpg?sz=128", "display_name": "PoriPiriPuri", "link": "https://stackoverflow.com/users/9604419/poripiripuri"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1533136446, "post_id": 51623858, "comment_id": 90237983, "body": "@MartinJames: That&#39;s more or less what I thought. The error is a fatal error, so why should I manage memory if the application is crashing? It feels like it could only worsen the recovery of the system, not to mention code readability. All this if the program is running on a non-trivial OS, like you said."}], "answers": [{"comments": [{"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1533086940, "post_id": 51623966, "comment_id": 90213326, "body": "You probably could.  Although in hindsight this is largely the result coding without a proper design, which is always a bad pattern.  I knew roughly where I was headed, so <code>calloc()</code> made sense at that moment.  However, when complete, as can be seen it&#39;s not necessary."}], "tags": [], "owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "is_accepted": false, "score": 1, "last_activity_date": 1533086960, "last_edit_date": 1592644375, "creation_date": 1533085147, "answer_id": 51623966, "question_id": 51623858, "link": "https://stackoverflow.com/questions/51623858/do-i-have-to-free-any-previously-allocated-memory-after-an-error-occurs/51623966#51623966", "title": "Do I have to free any previously allocated memory after an error occurs?", "body": "<p>One possible alternative.</p>\n<pre><code>mydata_t *mydata_init()\n{\n    mydata_t *mydata = malloc(sizeof(mydata_t));\n    if (mydata == NULL)\n    {\n        /* Handle error */\n        return NULL;\n    }\n\n    mydata-&gt;field1 = malloc(sizeof(mydata2_t));\n    mydata-&gt;field2 = malloc(sizeof(mydata3_t));\n    ...\n\n    if (mydata-&gt;field1 != NULL &amp;&amp; \n        mydata-&gt;field2 != NULL &amp;&amp;\n        ...)\n    {\n        /* success */\n        /*\n         * Initialize everything\n         */\n        return mydata;\n    }\n\n    free(mydata-&gt;field1);\n    free(mydata-&gt;field2);\n    ...\n    free(mydata);\n    return NULL;\n}\n</code></pre>\n<p>Note that you do not need to check for <code>NULL</code> before calling <code>free()</code> on the error path.  As noted in the first answer to <a href=\"https://stackoverflow.com/questions/6084218/is-it-good-practice-to-free-a-null-pointer-in-c\">this question</a></p>\n<blockquote>\n<p>Quoting the C standard, 7.20.3.2/2 from ISO-IEC 9899:</p>\n<p>If ptr is a null pointer, no action occurs.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1533108393, "post_id": 51624209, "comment_id": 90219592, "body": "&#39;No, but non-leaky (good) code does&#39; nope - disagree.  &#39;but the end goal is to do it, somehow&#39; - only the OS can do that reliably and safely, (assuming a non-trivial OS), especially with non-trivial multithreaded apps."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1533136788, "post_id": 51624209, "comment_id": 90238211, "body": "@MartinJames I often work with stand-alone (no OS) C embedded applications.  Reliable freeing of recourses is the obligation of the applications as there is no process to mange that."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1533087849, "last_edit_date": 1533087849, "creation_date": 1533087450, "answer_id": 51624209, "question_id": 51623858, "link": "https://stackoverflow.com/questions/51623858/do-i-have-to-free-any-previously-allocated-memory-after-an-error-occurs/51624209#51624209", "title": "Do I have to free any previously allocated memory after an error occurs?", "body": "<blockquote>\n  <p>Is it necessary to free all the previously allocated memory? </p>\n</blockquote>\n\n<p>No, but non-leaky (good) code does.  </p>\n\n<p>You will find various opinions on <em>how</em> to do this (free up things), but the end goal is to do it, <em>somehow</em>.  Free unused resources.</p>\n\n<p>Code for clarity.</p>\n\n<p>Note: <code>goto</code> form is an acceptable use of <code>goto</code>.</p>\n\n<hr>\n\n<p>I'll offer another approach and use a <code>mydata_uninit()</code> companion function as possible.  </p>\n\n<pre><code>mydata_t *mydata_uninit(mydata_t *mydata) {\n  if (mydata) {\n    free(mydate-&gt;field1); \n    mydate-&gt;field1 = NULL; // example discussed below **\n    free(mydate-&gt;field2); \n    // free other resources and perform other clean up/accounting.\n    free(mydate); \n  }\n  return NULL;\n}\n</code></pre>\n\n<p>I'd also allocate to the size of the de-referenced pointer, not the type.</p>\n\n<pre><code>mydata_t *mydata_init(void) {\n  mydata_t *mydata = calloc(1, sizeof *mydata);\n  if (mydata == NULL) {\n    return NULL;\n  }   \n  mydata-&gt;field1 = calloc(1, sizeof *(mydata-&gt;field1));\n  mydata-&gt;field2 = calloc(1, sizeof *(mydata-&gt;field2));\n  // Other 1st time assignments\n\n  // If any failed\n  if (mydata-&gt;field1 == NULL || mydata-&gt;field2 == NULL) {\n    mydata = mydata_uninit(mydata);\n  }\n\n  return mydata;\n}\n</code></pre>\n\n<p>** Setting pointer <code>struct</code> members to <code>NULL</code> (<code>mydata-&gt;field1</code>)  and then later freeing the <code>struct</code> pointer (<code>mydata</code>) I find aids in debug as errant code that de-references a <code>NULL</code> pointer  typically errors faster than a free'd pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533137438, "post_id": 51636779, "comment_id": 90238632, "body": "You raise a good point though about the fatal-ness of the allocation failure.  When such an allocation failure is a prelude to program termination, then not freeing and proceeding promptly to program termination is a better approach. OTOH, if an allocation failure is meant to be survivable - which is uncommon, then OP&#39;s approaches are reasonable."}], "tags": [], "owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "is_accepted": true, "score": 1, "last_activity_date": 1533136204, "creation_date": 1533136204, "answer_id": 51636779, "question_id": 51623858, "link": "https://stackoverflow.com/questions/51623858/do-i-have-to-free-any-previously-allocated-memory-after-an-error-occurs/51636779#51636779", "title": "Do I have to free any previously allocated memory after an error occurs?", "body": "<p>Assuming a non-trivial OS, that's one with 'kill-9' or a Task Manger with 'End Process' entry on a GUI context menu, please bear in mind the following points before embarking on a lenghty and expensive campaign to write specific user code to free all malloced/whatever memory upon a fatal error:</p>\n\n<p>1) Freeing all memory with user code requires more user code.  That extra code must be designed, coded tested and maintained, often repeatedly after changes and/or new versions. With a complex, multithreaded app, maybe with pools of objects that are shared and communicated between threads, it's not going to be a remotely trivial exercise to even try to shut it down with user code.</p>\n\n<p>2) Freeing all memory with user code after a fatal error can make things worse.  If the error is a result of a corrupted heap manager, then you will raise even more faults as you try to free it.  An app 'diasppearing' on a customer with an error log entry is bad enough, a screen full of AV error boxes and a stuck app is much worse.</p>\n\n<p>3) Safely freeing all memory with user code can only be done by a thread if all other threads have been stopped so that they cannot possibly access any of that memory. Reliably stopping all process threads can only be done by the OS at process termination.  User code cannot be guaranteed to do it - if a thread is stuck executing a lengthy operation in a library, you cannot reliably stop it. If you try, it may, for instance, leave the memory-manager locked.  Just unblocking threads stuck on an I/O operation is difficult enough, often requiring bodges like opening a connection on the local network stack to force an accept() call to return early.</p>\n\n<p>4) The OS 'terminate process' API, and all that is involved in it, has been tested a LOT. It works, and it comes free with your OS.  Your user code that tries to stop threads and free memory will never accumulate as much testing.</p>\n\n<p>5) User code that tries to stop threads and free memory is redundant - the OS does the same job, only better, quicker and more reliably.  You are trying to clean up memory from a sub-allocator that the OS is going to soon destroy and deallocate anyway.</p>\n\n<p>6) Many OS and other commercial libraries have already given way to the inevitable and accept that they cannot safely have all their memory freed at shutdown without causing problems, especially with multithreaded apps.  The library authors cannot do it reliably, neither can you.</p>\n\n<p>Sure, manage your memory during a run in a controlled and sensible manner, freeing what you malloc as required, so as not to leak memory during the lifetime of the process.</p>\n\n<p>If you encounter a fatal error, however, maybe try to write the details to a log file or make some other debugging/logging action, if you can, and then call your OS 'terminate process' API.</p>\n\n<p>There is nothing else you can safely do.</p>\n\n<p>Your app is near death, let the OS euthanize it.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 2113490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/338040648bd93fc27d50065aa95624a0?s=128&d=identicon&r=PG", "display_name": "notatallswedish", "link": "https://stackoverflow.com/users/2113490/notatallswedish"}, "is_accepted": false, "score": 1, "last_activity_date": 1588523871, "creation_date": 1588523871, "answer_id": 61578046, "question_id": 51623858, "link": "https://stackoverflow.com/questions/51623858/do-i-have-to-free-any-previously-allocated-memory-after-an-error-occurs/61578046#61578046", "title": "Do I have to free any previously allocated memory after an error occurs?", "body": "<p>The existing answers covers the various malloc/free scenarios, so I will not add to that.</p>\n\n<p>What I would like to point out is that if you fail a malloc, it is pretty much game-over for the program, and it is often better to just <code>exit()</code> than to try to recover the situation.</p>\n\n<p>Even if you manage to clean up partially allocated structs, other code, and libraries used by that code, will also fail to allocate memory and may (and often will) fail in mysterious ways.</p>\n\n<p><code>malloc()</code> usually only fails if you run in severely restricted environments, like embedded micro controllers), or if you are leaking memory like a sieve. </p>\n"}], "owner": {"reputation": 33, "user_id": 9604419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_s2i2un-J5g/AAAAAAAAAAI/AAAAAAAAACY/0Mh7SPRIwYM/photo.jpg?sz=128", "display_name": "PoriPiriPuri", "link": "https://stackoverflow.com/users/9604419/poripiripuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 51636779, "answer_count": 4, "score": 0, "last_activity_date": 1588523871, "creation_date": 1533084080, "question_id": 51623858, "link": "https://stackoverflow.com/questions/51623858/do-i-have-to-free-any-previously-allocated-memory-after-an-error-occurs", "title": "Do I have to free any previously allocated memory after an error occurs?", "body": "<p>I'm writing a multithreaded server in C for a uni project and I'm having a hard time figuring out how to do error handling in a nice, readable and standard way.</p>\n\n<p>Right now, if the program terminates successfully, I free every bit of allocated memory at the end of it. But what if a fatal error occurs during the execution (e.g. malloc returns <code>NULL</code>)?</p>\n\n<p>For example, let's say I have a custom data type <code>mydata_t</code> and a constructor function <code>mydata_t *mydata_init()</code> that is used by several modules of my program. After seeing some code on the internet, this is how I would have written it:</p>\n\n<pre><code>mydata_t *mydata_init() {\n\n    mydata_t *mydata = malloc(sizeof(mydata_t));\n    if (!mydata) return NULL;\n\n    mydata-&gt;field1 = malloc(sizeof(mydata2_t));\n    if (!mydata-&gt;field1) return NULL;\n\n    mydata-&gt;field2 = malloc(sizeof(mydata3_t));\n    if (!mydata-&gt;field2) return NULL;\n\n    /*\n    Initialization of other fields\n    */\n\n    return mydata;\n\n}\n</code></pre>\n\n<p>It does seem nice and clean, but is this the \"standard\" way to do it?</p>\n\n<p>In particular, what if one of the mallocs returns <code>NULL</code>? Is it necessary to free all the previously allocated memory? Is it reasonable to change the code to something like this?</p>\n\n<pre><code>mydata_t *mydata_init() {\n\n    mydata_t *mydata = malloc(sizeof(mydata_t));\n    if (!mydata) goto err_1;\n\n    mydata-&gt;field1 = malloc(sizeof(mydata2_t));\n    if (!mydata-&gt;field1) goto err_2;\n\n    mydata-&gt;field2 = malloc(sizeof(mydata3_t));\n    if (!mydata-&gt;field2) goto err_3;\n\n    /*\n    Initialization of other fields\n    */\n\n    return mydata;\n\n/*\nOther tags\n*/\n\nerr_3:\n    free(mydata-&gt;field1);\nerr_2:\n    free(mydata);\nerr_1:\n    return NULL;\n\n}\n</code></pre>\n"}, {"tags": ["c", "eof", "fread", "cs50"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1533081004, "post_id": 51623525, "comment_id": 90212243, "body": "Best to read .jpg files in binary mode <code>fopen(infile, &quot;r&quot;);</code> --&gt; <code>fopen(infile, &quot;rb&quot;);</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 4, "creation_date": 1533081091, "post_id": 51623525, "comment_id": 90212257, "body": "Drop the <code>feof()</code> and check the return value from <code>fread()</code> instead."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1533081251, "post_id": 51623525, "comment_id": 90212284, "body": "<a href=\"https://stackoverflow.com/questions/5431941\">while(!feof(fp)) is always wrong</a>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1533102881, "post_id": 51623525, "comment_id": 90216848, "body": "Binary files must be opened in binary mode (&quot;rb&quot;). I suppose you&#39;re using Windows, so it really matters. Reading or writing binary data in text mode will result in data corruption."}, {"owner": {"reputation": 373, "user_id": 5921021, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/419FT.png?s=128&g=1", "display_name": "PYB", "link": "https://stackoverflow.com/users/5921021/pyb"}, "edited": false, "score": 0, "creation_date": 1533142112, "post_id": 51623525, "comment_id": 90241378, "body": "Thank you chux and rici, I wasnt aware of this."}], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 5921021, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/419FT.png?s=128&g=1", "display_name": "PYB", "link": "https://stackoverflow.com/users/5921021/pyb"}, "edited": false, "score": 0, "creation_date": 1533083333, "post_id": 51623581, "comment_id": 90212675, "body": "Thanks for the input. I actually tried comparing the return value of fread with the value of sizeof(buffer), but they always were the same. I assumed they weren&#39;t different but you helped me understand how different they are. I still end up with corrupt files (jpeg outputs) when implementing this solution on if statements instead of looking for the EOF flag. The return value goes to 0, sometimes before the EOF flag. Anyway, time for something else."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 3, "last_activity_date": 1533081249, "creation_date": 1533081249, "answer_id": 51623581, "question_id": 51623525, "link": "https://stackoverflow.com/questions/51623525/fread-returns-same-number-as-nmemb-yet-end-of-file-is-reached/51623581#51623581", "title": "fread returns same number as nmemb yet end of file is reached", "body": "<p><code>sizeof(buffer)</code> tells you how big <code>buffer</code> is. It does not tell you anything about what was in it\u2014not how many bytes are currently valid, and not how many were read in the last <code>fread</code>.</p>\n\n<p>The proper way to know how many bytes <code>fread</code> read is to use its return value. You ought to use code such as:</p>\n\n<pre><code>size_t BytesRead = fread(buffer, 1, sizeof(buffer), inptr);\n</code></pre>\n\n<p>If, after this statement, <code>BytesRead</code> is less than <code>sizeof buffer</code>, then <code>fread</code> did not read all the bytes you asked for. That is an indication that something is wrong, and it is a better indication than whether the file EOF flag is set.</p>\n"}, {"tags": [], "owner": {"reputation": 7, "user_id": 7105905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/407ca8eea9b54b10425f1ea75a6c3fc1?s=128&d=identicon&r=PG&f=1", "display_name": "Gordan Lin", "link": "https://stackoverflow.com/users/7105905/gordan-lin"}, "is_accepted": false, "score": 0, "last_activity_date": 1533081616, "creation_date": 1533081616, "answer_id": 51623613, "question_id": 51623525, "link": "https://stackoverflow.com/questions/51623525/fread-returns-same-number-as-nmemb-yet-end-of-file-is-reached/51623613#51623613", "title": "fread returns same number as nmemb yet end of file is reached", "body": "<pre><code>(sizeof) returns size in bytes of the object representation of type\n</code></pre>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/language/sizeof\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/sizeof</a></p>\n\n<p>Since you allocated 512 bytes for <code>buffer</code>, <code>sizeof</code> will return 512. It doesn't matter what buffer is holding since its not a length check.</p>\n"}], "owner": {"reputation": 373, "user_id": 5921021, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/419FT.png?s=128&g=1", "display_name": "PYB", "link": "https://stackoverflow.com/users/5921021/pyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 856, "favorite_count": 0, "accepted_answer_id": 51623581, "answer_count": 2, "score": -1, "last_activity_date": 1533495391, "creation_date": 1533080665, "last_edit_date": 1533495391, "question_id": 51623525, "link": "https://stackoverflow.com/questions/51623525/fread-returns-same-number-as-nmemb-yet-end-of-file-is-reached", "title": "fread returns same number as nmemb yet end of file is reached", "body": "<p>I am completing a problem in CS50, and my code is successful although I don't understand the behavior of a test inside of it.\nLine 63 <code>if (feof(inptr))</code>checks if the end of file is reached, and then I ask to print the size of a buffer pointer which should be less than what it was initialized to (512).\nIt still returns a value of 512 although the EOF is reached, which doesn't make sense.</p>\n\n<p>Could someone tell me what is wrong?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\nint main(int argc, char *argv[])\n{\n    // ensure proper usage\n    if (argc != 2)\n    {\n        fprintf(stderr, \"Usage: copy infile outfile\\n\");\n        return 1;\n    }\n\n    // remember filenames\n    char *infile = argv[1];\n    char *outfile = \"000.jpg\";\n\n    // open input file\n    FILE *inptr = fopen(infile, \"r\");\n    if (inptr == NULL)\n    {\n        fprintf(stderr, \"Could not open %s.\\n\", infile);\n        return 2;\n    }\n\n    // open output file\n    FILE *outptr = fopen(outfile, \"w\");\n    if (outptr == NULL)\n    {\n        fclose(inptr);\n        fprintf(stderr, \"Could not create %s.\\n\", outfile);\n        return 3;\n    }\n\n    // declaring variable\n    unsigned char buffer[512];\n    int count = 0;\n    int test = 512;\n\n    // Execute until we find end of card\n    while (!feof(inptr))\n    {\n\n        // Read buffer in card\n        fread(buffer, 1, sizeof(buffer), inptr);\n\n        // Checks for jpeg signature\n        if (buffer[0] == 0xff &amp;&amp;\n            buffer[1] == 0xd8 &amp;&amp;\n            buffer[2] == 0xff &amp;&amp;\n            (buffer[3] &amp; 0xf0) == 0xe0)\n        {\n            fwrite(buffer, 1, sizeof(buffer), outptr);\n            fread(buffer, 1, sizeof(buffer), inptr);\n\n            // Checks if we are still in a jpeg, not the beginning of new one\n            while (buffer[0] != 0xff ||\n            buffer[1] != 0xd8 ||\n            buffer[2] != 0xff ||\n            (buffer[3] &amp; 0xf0) != 0xe0)\n            {\n                // Exits loop if end of file\n                if (feof(inptr))\n                {\n                    int size = sizeof(buffer);\n                    printf(\"%i\\n\", size);\n                    break;\n                }\n\n                fwrite(buffer, 1, sizeof(buffer), outptr);\n                fread(buffer, 1, sizeof(buffer), inptr);\n\n            }\n            if (feof(inptr))\n            {\n                break;\n            }\n\n            // Close jpeg\n            fclose(outptr);\n\n            // Change count to apply to next jpeg title\n            count++;\n\n            char img_num[4];\n            sprintf(img_num, \"%03i.jpg\", count);\n\n            // Assign new title to new jpeg\n            outfile = img_num;\n            printf(\"%s\\n\", outfile);\n            outptr = fopen(outfile, \"w\");\n\n            // We will have to read again in the main loop, so rewind\n            fseek(inptr, -512, SEEK_CUR);\n        }\n\n\n    }\n\n    printf(\"%i\\n\", test);\n\n    // close infile\n    fclose(inptr);\n\n    // close outfile\n    fclose(outptr);\n\n    // success\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1533080685, "post_id": 51623505, "comment_id": 90212188, "body": "It does not matter. When you work with binary data use fixed length types like uint8_t"}, {"owner": {"reputation": 159, "user_id": 9448914, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kyle Huff", "link": "https://stackoverflow.com/users/9448914/kyle-huff"}, "edited": false, "score": 1, "creation_date": 1533080887, "post_id": 51623505, "comment_id": 90212225, "body": "Whichever way allows you to do the least casting is superior.  Unless you are allowing these to be sign-extended to ints, it will make no difference."}, {"owner": {"reputation": 642, "user_id": 2635439, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rGm1P.png?s=128&g=1", "display_name": "Amirag", "link": "https://stackoverflow.com/users/2635439/amirag"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533080937, "post_id": 51623505, "comment_id": 90212234, "body": "@P__J__ well, the specific case that made me ask it was the UnpackWord function that gets a char* and returns <code>WORD</code>. The data is read off a file so it has to go through <i>some</i> processing as data before it is used."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533081091, "post_id": 51623505, "comment_id": 90212256, "body": "I do not know what &quot;magic&quot; <code>UnpackWord</code> function does :) C does not have the <code>WORD</code> type. Is it uint32_t?"}, {"owner": {"reputation": 642, "user_id": 2635439, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rGm1P.png?s=128&g=1", "display_name": "Amirag", "link": "https://stackoverflow.com/users/2635439/amirag"}, "edited": false, "score": 1, "creation_date": 1533081210, "post_id": 51623505, "comment_id": 90212280, "body": "@P__J__It&#39;s defined in the Windows.h header, it&#39;s defined as unsigned short. this function should be a minimal version of python&#39;s unpack. it&#39;s basically return an unsigned 2-byte value from a 2-char string"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533081418, "post_id": 51623505, "comment_id": 90212308, "body": "&quot;specificly a PE file&quot; is not specific enough.  Post a refence like <a href=\"https://en.wikipedia.org/wiki/DOS_MZ_executable\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/DOS_MZ_executable</a> or whatever it is."}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 2, "last_activity_date": 1533082971, "creation_date": 1533082971, "answer_id": 51623749, "question_id": 51623505, "link": "https://stackoverflow.com/questions/51623505/working-with-binary-data-and-unsigned-char/51623749#51623749", "title": "working with binary data and unsigned char", "body": "<p>I think I'd use <code>unsigned char</code>, but avoid casting, and instead define a little class named <code>ustring</code> (or something similar). You have a couple of choices with that. One would be to instantiate <code>std::basic_string</code> over <code>unsigned char</code>. This can be useful (it gives you all of <code>std::string</code>'s functionality, but with <code>unsigned char</code>s instead of <code>char</code>s. The obvious disadvantage is that it's probably overkill, and has essentially no compatibility with <code>std::string</code>, even though it's almost exactly the same thing.</p>\n\n<p>The other obvious possibility would be to define your own class. Since you apparently care mostly about string literals, I'd probably go this way. The class would be initalized with a string literal, and it would just hold a pointer to the string, but as <code>unsigned char *</code> instead of just <code>char *</code>.</p>\n\n<p>Then there's one more step to make life better: define a user defined literal operator named something like <code>_us</code>, so creating an object of your type from a string literal will look something like this: <code>auto DOS_sig = \"MZ\"_us;</code></p>\n\n<pre><code>class ustring {\n    unsigned char const *data;\n    unsigned long long len;\npublic:\n    ustring(unsigned char const *s, unsigned long long len) \n        : data(s)\n        , len(len)\n    {}\n\n    operator char const *() const { return data; }\n\n    bool operator==(ustring const &amp;other) const {\n        // note: memcmp treats what you pass it as unsigned chars.\n        return len == other.len &amp;&amp; 0 == memcmp(data, other.data, len);\n    }\n\n    // you probably want to add more stuff here.\n};\n\nustring operator\"\" _us(char const * const s, unsigned long long len) {\n    return ustring((unsigned char const *)s, len);\n}\n</code></pre>\n\n<p>If I'm not mistaken, this should be pretty easy to work with. For example, let's assume you've memory mapped what you think is a PE file, with its base address at <code>mapped_file</code>. To see if it has a DOS signature, you might do something like this:</p>\n\n<pre><code>if (ustring(&amp;mapped_file[0], 2) == \"MZ\"_us)\n    std::cerr &lt;&lt; \"File appears to be an executable.\\n\";\nelse\n    std::cerr &lt;&lt; \"file does not appear to be an executable.\\n\";\n</code></pre>\n\n<p>Caution: I haven't tested this, so fencepost errors and such are likely--for example, I don't remember whether the length passed to the user defined literal operator includes the NUL terminator or not. This isn't intended to represent finished code, just a sketch of a general direction that might be useful to explore.</p>\n"}], "owner": {"reputation": 642, "user_id": 2635439, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rGm1P.png?s=128&g=1", "display_name": "Amirag", "link": "https://stackoverflow.com/users/2635439/amirag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 51623749, "answer_count": 1, "score": -2, "last_activity_date": 1533082971, "creation_date": 1533080549, "last_edit_date": 1533081707, "question_id": 51623505, "link": "https://stackoverflow.com/questions/51623505/working-with-binary-data-and-unsigned-char", "title": "working with binary data and unsigned char", "body": "<p>I'm writing a program that reads a content of a binary file (specificly Windows PE file. <a href=\"https://en.wikipedia.org/wiki/Portable_Executable\" rel=\"nofollow noreferrer\">Wikipedia page</a> and <a href=\"https://raw.githubusercontent.com/corkami/pics/master/binary/pe101/pe101l.png\" rel=\"nofollow noreferrer\">detailed PE structure</a>).<br>\nBecause of the binary data in the file, the characters often \"fall out\" of the ascii range (0-127) and that result in negative values.</p>\n\n<p>To make sure I won't work with unwanted negative values, I can either pass <code>const unsigned char *</code> or convert the resulting char in the calculation to <code>unsigned char</code>.</p>\n\n<p>On one hand, passing <code>const unsigned char *</code> makes sense because the data is non-ascii that has a numaric value and thus should be treated as positive.<br>\nIn addition, it'll let me perform calculations without the need to cast the result to <code>unsigned char</code>.<br>\nOn the other hand, I can't pass constant strings (<code>const char *</code>, such as pre-defined strings \"MZ\", \"PE\\0\\0\" etc.) to functions without first casting them to <code>const unsigned char *</code>.</p>\n\n<p>What would be the better approach or best-practice in this scenario?</p>\n"}, {"tags": ["c", "image", "resize", "gtk3"], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 6004995, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8d08a30162348276e7ca3f7e6eaebb3b?s=128&d=identicon&r=PG&f=1", "display_name": "jackson80", "link": "https://stackoverflow.com/users/6004995/jackson80"}, "is_accepted": true, "score": 0, "last_activity_date": 1533232990, "creation_date": 1533232990, "answer_id": 51659739, "question_id": 51623462, "link": "https://stackoverflow.com/questions/51623462/gtk3-resize-attempt-grows-window-exponentially/51659739#51659739", "title": "GTK3 resize attempt grows window exponentially", "body": "<p>The window with the image was growing because I was applying the size of the <strong><em>window</em></strong> to the image. Hence the image got larger and thus made the window get larger. Which continued in an endless progression, the \"size-allocate\" signal was constantly being called.\nI fixed it by limiting the allocation height in the call back, by multiplying it by 0.75. \nNow I can expand and contract the window with ease and it does not grow out of control.\nThe image does get ugly quite quickly, but that is another problem.</p>\n"}], "owner": {"reputation": 53, "user_id": 6004995, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8d08a30162348276e7ca3f7e6eaebb3b?s=128&d=identicon&r=PG&f=1", "display_name": "jackson80", "link": "https://stackoverflow.com/users/6004995/jackson80"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 51659739, "answer_count": 1, "score": 1, "last_activity_date": 1533232990, "creation_date": 1533080073, "last_edit_date": 1533150904, "question_id": 51623462, "link": "https://stackoverflow.com/questions/51623462/gtk3-resize-attempt-grows-window-exponentially", "title": "GTK3 resize attempt grows window exponentially", "body": "<p>I have a C GTK3 program that has a notebook with two images. I want to be able to grab the corner of the window and adjust the size of the image currently displayed. What I currently have is a program that once started, the window keeps growing until I kill it from the terminal using ctrl-c. I put a sleep call in the callback to slow it down, but it still grows. How do I stop the window from growing unless I \"grab\" a corner of the window and adjust it myself?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;gtk/gtk.h&gt;\n#include &lt;gdk-pixbuf/gdk-pixbuf.h&gt;\n\nGtkWidget *notebook;\n\ngboolean resize_image(GtkWidget *widget, GdkRectangle *allocation,\n    gpointer user_data)\n{\n    int w,h, pagenum;\n    GdkPixbuf *pxbscaled;\n    GtkWidget *image;\n    GdkPixbuf *pixbuf;\n\n    pagenum = gtk_notebook_get_current_page (GTK_NOTEBOOK(notebook));\n    image = gtk_notebook_get_nth_page (GTK_NOTEBOOK(notebook), pagenum);\n//  GtkImageType image_type = gtk_image_get_storage_type\n//      (GTK_IMAGE(image));\n\n    pixbuf = gtk_image_get_pixbuf(GTK_IMAGE(image));\n\n    h = allocation-&gt;height;\n    w = (gdk_pixbuf_get_width(pixbuf) * h) / gdk_pixbuf_get_height(pixbuf);\n\n    pxbscaled = gdk_pixbuf_scale_simple(pixbuf, w, h, GDK_INTERP_BILINEAR);\n\n    printf(\"Allocation height %d width %d.\\n\", h, w);\n\n    gtk_image_set_from_pixbuf(GTK_IMAGE(image), pxbscaled);\n\n    g_object_unref (pxbscaled);\n\n    sleep(2);\n\n    return FALSE;\n}\n\nstatic gboolean delete( GtkWidget *widget,\n            GtkWidget *event,\n            gpointer   data )\n{\n    gtk_main_quit ();\n    return FALSE;\n}\n\nint main( int argc,\n      char *argv[] )\n{\n    GtkWidget *window;\n    GtkWidget *button;\n    GtkWidget *table;\n    GtkWidget *label;\n    GtkWidget *image;\n    int i;\n    char bufferl[32];\n\n    gtk_init (&amp;argc, &amp;argv);\n\n    window = gtk_window_new (GTK_WINDOW_TOPLEVEL);\n//  gtk_widget_set_size_request (GTK_WIDGET(window), 800, 480);\n\n    g_signal_connect (window, \"delete-event\",\n              G_CALLBACK (delete), NULL);\n\n    gtk_container_set_border_width (GTK_CONTAINER (window), 10);\n\n    table = gtk_grid_new ();\n    gtk_container_add (GTK_CONTAINER (window), table);\n\n    /* Create notebook, place position of tabs */\n    notebook = gtk_notebook_new ();\n    gtk_notebook_set_tab_pos (GTK_NOTEBOOK (notebook), GTK_POS_TOP);\n    gtk_grid_attach (GTK_GRID (table), notebook, 0, 6, 3, 3);\n    gtk_widget_show (notebook);\n\n    /* Append pages to the notebook */\n    for (i = 0; i &lt; 2; i++) {\n        sprintf(bufferl, \"Page %d\", i + 1);\n\n        if (i == 0) {\n            image = gtk_image_new_from_file(\"image1.jpg\");\n        } else {\n            image = gtk_image_new_from_file(\"image2.jpg\");\n        }\n\n        gtk_widget_set_halign(image, GTK_ALIGN_START);\n        gtk_widget_set_valign(image, GTK_ALIGN_START);\n\n        g_signal_connect(window, \"size-allocate\", \n            G_CALLBACK(resize_image), NULL);\n\n        label = gtk_label_new (bufferl);\n        gtk_notebook_append_page (GTK_NOTEBOOK(notebook), \n            image, label);\n    }\n\n    /* Create a close button */\n    button = gtk_button_new_with_label (\"close\");\n    g_signal_connect (button, \"clicked\",\n                  G_CALLBACK (delete), NULL);\n\n    gtk_grid_attach (GTK_GRID (table), button, 0, 10, 1, 1);\n\n    gtk_widget_show_all (window);\n\n    gtk_main ();\n\n    return 0;\n}\n</code></pre>\n\n<p>A user will need to provide image1.jpg and image2.jpg. Edit out the sleep call will result in the program filling the screen extremely quickly.</p>\n\n<p>EDIT: I have also asked this question on the gtk mailing list.</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 3, "creation_date": 1533077299, "post_id": 51623116, "comment_id": 90211454, "body": "<code>char *c[1];</code> and <code>scanf(&quot;%s&quot;,*c);</code> are not valid together read about how to handle string in C."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1533077299, "post_id": 51623116, "comment_id": 90211455, "body": "Compile the code with debugging symbols, and run the code inside a debugger. Optionally use <code>valgrind</code>. Treat compiler warnings as if they are errors."}, {"owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "edited": false, "score": 1, "creation_date": 1533077538, "post_id": 51623116, "comment_id": 90211513, "body": "Enable the warnings while compiling the code. For gcc, -Wall is for enabling all the warning."}, {"owner": {"reputation": 302, "user_id": 10114965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/86Uky.png?s=128&g=1", "display_name": "Inrin", "link": "https://stackoverflow.com/users/10114965/inrin"}, "edited": false, "score": 0, "creation_date": 1533078308, "post_id": 51623116, "comment_id": 90211683, "body": "<code>-Werror</code> to treat warnings as errors on gcc/clang. Why is <code>b</code> an <code>int</code>?"}, {"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 2, "creation_date": 1533078569, "post_id": 51623116, "comment_id": 90211735, "body": "Something else you probably want to do is take a basic course in C.  Your usage of pointers and arrays simply isn&#39;t correct for what you&#39;re trying to do - it&#39;s actually more complex than you need it to be.  Secondly, you need to understand the differences and similarities between arrays and pointers.  Use of them sometimes looks very similar, but in actuality they are quite different."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 302, "user_id": 10114965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/86Uky.png?s=128&g=1", "display_name": "Inrin", "link": "https://stackoverflow.com/users/10114965/inrin"}, "edited": false, "score": 0, "creation_date": 1533078601, "post_id": 51623116, "comment_id": 90211744, "body": "@Inrin <code>b</code> as an <code>int</code> likely makes for slightly more efficient code that <code>char b</code>.  Not a big issue, even is <code>char b</code> seems called for."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 0, "creation_date": 1533078734, "post_id": 51623116, "comment_id": 90211768, "body": "@dgnuff Comments that address issues of the code and post - not the poster are  more objective and usually better received."}, {"owner": {"reputation": 302, "user_id": 10114965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/86Uky.png?s=128&g=1", "display_name": "Inrin", "link": "https://stackoverflow.com/users/10114965/inrin"}, "edited": false, "score": 0, "creation_date": 1533078761, "post_id": 51623116, "comment_id": 90211774, "body": "sure, but as she/he is a beginner, I thought semantics over performance :)"}, {"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 0, "creation_date": 1533079088, "post_id": 51623116, "comment_id": 90211831, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/17294631/dereferencing-pointers-without-pointing-them-at-a-variable\">Dereferencing pointers without pointing them at a variable</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1533079122, "post_id": 51623308, "comment_id": 90211843, "body": "@chux very true. Should also check the return code to make sure you got something back."}], "tags": [], "owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "is_accepted": false, "score": 1, "last_activity_date": 1533079254, "last_edit_date": 1533079254, "creation_date": 1533078597, "answer_id": 51623308, "question_id": 51623116, "link": "https://stackoverflow.com/questions/51623116/segmentation-fault-core-dumped-in-c-in-linux/51623308#51623308", "title": "Segmentation fault (core dumped) in C in Linux", "body": "<p>You have a few problems in your code. First, as pointed out in the comments, your declaration of <code>c</code> as an array of <code>char *</code> length one is wrong.  Declare it as an array of char or some max length.  The will make the squeeze code simpler, with less dereferences.  Next your for loop inside of squeeze is wrong, you have an assignment statement there in the middle, when you really want to check for inequality.  Your second scanf needs a space in it to get rid of the white space character leftover in the input buffer.  So, making these changes, your code should look something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar *squeeze(char *a, int b){\n\n                int i,j;\n\n                for(i=j=0; *(a+i) != '\\0';i++){\n                    if(*(a+i)!=b)\n                        *(a+j++)=*(a+i);\n                }\n                *(a+j)='\\0';\n\n                return a;\n}\n\nint main() {\n\n                char c[100] = {0};\n                char d[2];\n                int e;\n\n                printf(\"Enter the string: \");\n                scanf(\"%99s\",c);\n                printf(\"Enter the character to delete: \");\n                scanf(\" %c\",d);\n                e=d[0];\n\n                printf(\"Resulting string is: %s.\\n\",squeeze(c,e));\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> Specify string length with scanf when reading in <code>c</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "is_accepted": false, "score": 0, "last_activity_date": 1533079723, "last_edit_date": 1533079723, "creation_date": 1533078779, "answer_id": 51623328, "question_id": 51623116, "link": "https://stackoverflow.com/questions/51623116/segmentation-fault-core-dumped-in-c-in-linux/51623328#51623328", "title": "Segmentation fault (core dumped) in C in Linux", "body": "<pre><code>// C program to remove the occurrences of a specific char from the given string.\n\n#include&lt;stdio.h&gt;\n\nchar * squeeze(char a[], char b){\n\nfor(i=0; a[i]!='\\0';i++){\n    if(a[i]==b){\n      a[i]=a[i+1];\n    while(a[i++]!='\\0'){\n      a[i]=a[i+1];\n    }\n    }\n}\n    return a;\n}\n\nint main(){\n\n    char c[50];\n    char d;\n\n    printf(\"Enter the string:\");\n\n    scanf(\"%s\",c);\n    printf(\"Enter the character to delete:\");//add \\n \n\n    scanf(\" %c\",&amp;d);\n\n\n    printf(\"Resulting string is:%s\\n\",squeeze(c,d));\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8575386, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gQyHQtIqV5c/AAAAAAAAAAI/AAAAAAAACB0/fNzd-x8uGBw/photo.jpg?sz=128", "display_name": "Devesh Singh", "link": "https://stackoverflow.com/users/8575386/devesh-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1866, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1533082580, "creation_date": 1533077085, "last_edit_date": 1533082580, "question_id": 51623116, "link": "https://stackoverflow.com/questions/51623116/segmentation-fault-core-dumped-in-c-in-linux", "title": "Segmentation fault (core dumped) in C in Linux", "body": "<p>I'm trying to run this program by taking input from the user and I'm getting a <strong><em>Segmentation fault (core dumped)</em></strong> error. Can anyone help me to find out why this error is occurring and how can I fix this error? My code is given below:</p>\n\n<pre><code>// C program to remove the occurrences of a specific char from the given string.\n\n#include &lt;stdio.h&gt;\n\nchar *squeeze(char *a[], int b){\n\n    int i,j;\n\n    for(i=j=0; *(*a+i)='\\0';i++){\n\n       if(*(*a+i)!=b)\n           *(*a+j++)=*(*a+i);\n    }\n    *(*a+j)='\\0';\n\n    return *a;\n}\n\nvoid main(){\n\n    char *c[1];\n    char d[2];\n    int e;\n\n    printf(\"Enter the string: \");\n    scanf(\"%s\",*c);\n    printf(\"Enter the character to delete: \");\n    scanf(\"%c\",d);\n    e=d[0];\n\n    printf(\"Resulting string is:%s.\\n\",squeeze(c,e));\n}\n</code></pre>\n"}, {"tags": ["c", "binaryfiles"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1533077431, "post_id": 51623114, "comment_id": 90211486, "body": "You forgot to post the rest of your code. Can you <a href=\"https://stackoverflow.com/posts/51623114/edit\">edit</a> your post to do so?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8414403"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1533077844, "post_id": 51623114, "comment_id": 90211580, "body": "@KenWhite it is upated"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1533078851, "post_id": 51623114, "comment_id": 90211789, "body": "The answer to <a href=\"https://stackoverflow.com/questions/51597686\">your other question</a> was correct: when you use <code>&quot;ab+&quot;</code>, any write to the file appends to the end, ignoring any intervening <code>fseek</code> (&#167;7.21.5.3/6). So you need to check if the file exists using <code>&quot;rb+&quot;</code>. If that fails, create the file with <code>&quot;wb+&quot;</code>."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1533081622, "post_id": 51623114, "comment_id": 90212346, "body": "If you truly were creating a <i>bank account for customers</i>, you would not being using <code>float balance</code> (or any floating point number for handling currency) Customers get quite irate when you begin losing money out of their accounts due to rounding errors. See <a href=\"http://stackoverflow.com/questions/33979478/how-to-read-and-store-currency-values-in-c\">How to Read and Store Currency Values in C</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1533138842, "post_id": 51623114, "comment_id": 90239529, "body": "@DavidC.Rankin There are <a href=\"https://stackoverflow.com/a/32214586/2410359\">many issues with money</a> and using an integer is OK for learner code.  The best type is application dependent.  Given that other languages readily support decimal FP, I&#39;d consider that over C."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1533153022, "post_id": 51623114, "comment_id": 90246966, "body": "@chux - A shameless plug... but I like it <code>:)</code>. The External Links in the Wikipedia page do a good job introducing Fixed Point and its myriad of incarnations. The lyrics link is almost as good as your wheels-flying-off picture."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1533080744, "last_edit_date": 1533080744, "creation_date": 1533079767, "answer_id": 51623430, "question_id": 51623114, "link": "https://stackoverflow.com/questions/51623114/binary-file-makes-duplicates-of-updated-accounts/51623430#51623430", "title": "Binary File makes duplicates of updated accounts", "body": "<p>Code lacks error checking and so failed to prevent buffer over-run.</p>\n\n<p><code>scanf(\"%s\", ...</code> is like the weak <code>gets()</code>.  Use width limits.</p>\n\n<pre><code>typedef struct {\n  char first[15];\n  char middle[2];\n  char last[15];\n  float balance;\n  long int acct;\n} data;\n\n//scanf(\"%s\", accounts[i].first);\nscanf(\"%14s\", accounts[i].first);// Max 14 characters to read and save a string in first[15]\n//scanf(\"%s\", accounts[i].middle);\nscanf(\"%1s\", accounts[i].middle);\n//scanf(\"%s\", accounts[i].first);\nscanf(\"%14s\", accounts[i].first);\n</code></pre>\n\n<p>Better code would check the return value to insure it is 1.</p>\n\n<pre><code>if (scanf(\"%14s\", accounts[i].first) != 1) {\n  printf(\"Bad input\\n\");\n  return EXIT_FAILURE;  // or other error handing.\n}\n</code></pre>\n\n<p>Even better code would scrap all <code>scanf()</code> calls and replace with <code>fgets()</code> and robust parsing - but leave that for another day.</p>\n\n<hr>\n\n<p>With input <code>\"m.\"</code> for <code>char middle[2];</code>, code experienced <em>undefined behavior</em> (UB). And the <a href=\"http://2.bp.blogspot.com/-onN1F3pE79k/TzK4KztjYbI/AAAAAAAAAgA/3LuV0Oa0x28/s1600/Wheels-Falling-Off-Hummer--57862.jpg\" rel=\"nofollow noreferrer\">wheels fell off the bus</a>.  Code likely needs bigger name character arrays.  Search <em>longest name</em> for some ideas.  </p>\n\n<hr>\n\n<p>Other  issues exist.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/51623114/binary-file-makes-duplicates-of-updated-accounts#comment90211789_51623114\">@user3386109 Open file mode</a></p>\n\n<p>\"Balanace\" --> \"Balance\"</p>\n\n<p>Avoid using <code>float</code> for money.  Recommend <code>double</code> or <code>long long</code> of smallest monetary unit.  This is a deep issue with various concerns, just at least, do not use <code>float</code>.</p>\n\n<p>Names may contain spaces.  <code>\"%s\"</code> will not work for that.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8414403"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1533080744, "creation_date": 1533077075, "last_edit_date": 1533078606, "question_id": 51623114, "link": "https://stackoverflow.com/questions/51623114/binary-file-makes-duplicates-of-updated-accounts", "title": "Binary File makes duplicates of updated accounts", "body": "<p>I have written a program involving creating a bank account for customers. However when I \"deposit\" money from the account, it will update, but it will add that updated account and keep the old one, when it should not be there as seen below: </p>\n\n<pre><code>First Name: her\nMiddle Name: m.\nLast Name: an\nAccount Number: 1\nBalance: $5600.00\n\n\nFirst Name: her\nMiddle Name: m.\nLast Name: an\nAccount Number: 1\nBalance: $11600.00\n</code></pre>\n\n<p>I believe it deals with my 'fopen' in the beginning of my code prior to my switch statement. If i change the \"ab+\" to anything besides that, my 'accounts' do not get saved. And are erased when I run the executable again.</p>\n\n<pre><code> FILE *aPtr;\n    aPtr = fopen( \"accounts.dat\", \"ab+\");\n    if ( aPtr == NULL ) {\n            printf ( \"File could not be opened\" );\n            exit(1);\n    }\n\n    fseek( aPtr, 0, SEEK_SET ); /* Moving pointer to start of file*/\n\n    while ( fread(accounts + i, sizeof(data), 1, aPtr) )\n            i++;\n\n            n = i; /* Num. of records in file */\n</code></pre>\n\n<p>The code for when I 'deposit' is provided below, I believe the reason for the copying of data may have something to do with how I am using 'fwrite' and where it is saving. But i can not seem to figure out what the issue would be.</p>\n\n<p>Any help in the right direction would be greatly appreciated.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct\n{\n    char first[15];\n    char middle[2];\n    char last[15];\n    float balance;\n    long int acct;\n }data;\n\nint main()\n{\n    int choice = -1, i = 0, n = 0;\n    long int number;\n    double amount;\n    data accounts[50];\n\n    FILE *aPtr;\n    aPtr = fopen( \"accounts.dat\", \"ab+\");\n    if ( aPtr == NULL ) {\n            printf ( \"File could not be opened\" );\n            exit(1);\n    }\n\n    fseek( aPtr, 0, SEEK_SET ); /* Moving pointer to start of file*/\n\n    while ( fread(accounts + i, sizeof(data), 1, aPtr) )\n            i++;\n\n            n = i; /* Num. of records in file */\n\n            do\n            {\n\n                    printf ( \"Select Option\\n\" );\n                    printf ( \"0: Exit\\n1: Deposit\\n2: Withdrawl\\n3: Add Account\\n4: Remove Account\\n5: Balance Inquiry\\n6: View Accounts\\n: \");\n                    scanf ( \"%d\", &amp;choice );\n                    printf(\"\\n\\n\");\n\n                    switch (choice)\n                    {\n                            case 0: /* Exit */\n                                    fclose ( aPtr );\n                                    break;\n\n                            case 1: /* Deposit*/\n                                    fseek( aPtr, 0, SEEK_SET );\n\n                                    printf ( \"Enter account number:\\n\" );\n                                    scanf ( \"%ld\", &amp;number );\n                                    printf ( \"Enter amount to be deposited:\\n\" );\n                                    scanf ( \"%lf\", &amp;amount );\n\n                                    for ( i = 0; i &lt; n; i++ ) {\n                                            if ( accounts[i].acct == number ) {\n\n                                                    accounts[i].balance = accounts[i].balance + amount;\n                                                    fseek( aPtr, i*sizeof(data), SEEK_SET ); /* Pointer goes to accountlocation in file*/\n                                                    fwrite( &amp;accounts[i], sizeof(data), 1, aPtr ); /* Write modified account into file */\n\n                                                    printf(\"New Balanace: $%.2f\\n\\n\", accounts[i].balance);\n                                                    break;\n                                            }\n                                    }\n\n                                    if ( i == n) {\n                                            printf(\"Account does not exist\\n\\n\");\n                                            break;\n                                    }\n                                    break;\n\n                            case 2: /* Withdrawal */\n                                    fseek( aPtr, 0, SEEK_SET);\n\n                                    printf(\"Enter the account to withdrawal:\\n\");\n                                    scanf(\"%ld\", &amp;number);\n                                    printf(\"Enter amount to withdrawal\\n\");\n                                    scanf(\"%lf\", &amp;amount);\n\n                                    for (i = 0; i &lt; n; i++) {\n                                            if (accounts[i].acct == number) {\n                                                    if (accounts[i].balance &lt; amount) { /* checks for required balance */\n                                                            printf (\"Not a sufficient balance\\n\\n\");\n                                                            break;\n                                                    }\n\n                                                    accounts[i].balance = accounts[i].balance - amount;\n                                                    fseek(aPtr, i * sizeof(data), SEEK_SET);\n                                                    fwrite(accounts+i, sizeof(data), 1, aPtr);\n                                                    printf(\"New Balance: $%.2f\\n\\n\", accounts[i].balance);\n                                                    break;\n                                            }\n                                    }\n\n                                    if(i == n )\n                                            printf(\"Account number does not exist\\n\\n\");\n\n                                    break;\n\n                            case 3: /* Add */\n                                    printf (\"Enter account number (1-99):\\n\");\n                                    scanf (\"%ld\", &amp;number);\n\n                                    for (i = 0; i &lt; n; i++) {\n                                            if (accounts[i].acct == number) {\n                                                    printf(\"Account already exist\\n\\n\");\n                                                    break;\n                                            }\n                                    }\n\n                                    if (i == n) {\n                                            printf(\"Enter First Name:\\n\");\n                                            scanf(\"%s\", accounts[i].first);\n                                            printf(\"Enter Middle Initial:\\n\");\n                                            scanf(\"%s\", accounts[i].middle);\n                                            printf(\"Enter Last Name:\\n\");\n                                            scanf(\"%s\", accounts[i].last);\n                                            accounts[i].acct = number;\n                                            printf(\"Enter Deposit Amount:\\n\");\n                                            scanf(\"%f\", &amp;accounts[i].balance);\n                                            printf(\"\\n\\n\");\n\n                                            fseek(aPtr, 0, SEEK_END);\n                                            fwrite(accounts+i, sizeof(data), 1, aPtr);\n\n                                            n++;\n                                    }\n\n                                    break;\n\n                            case 4: /* Delete */\n                                    fseek(aPtr, 0, SEEK_SET);\n                                    printf(\"Enter account wished to be deleted:\\n\");\n                                    scanf(\"%ld\", &amp;number);\n\n                                    for(i = 0; i &lt; n; i++) {\n                                            if(accounts[i].acct == number)\n                                                    break;\n                                            }\n\n                                            if( i == n ) {\n                                                    printf(\"Account number does not exist\\n\\n\");\n                                            }\n\n                                            else {\n                                                    while ( i &lt; n ) {\n                                                            strcpy(accounts[i].first, accounts[i+1].first);\n                                                            strcpy(accounts[i].middle, accounts[i+1].middle);\n                                                            strcpy(accounts[i].last, accounts[i+1].last);\n                                                            accounts[i].acct = accounts[i+1].acct;\n                                                            accounts[i].balance = accounts[i+1].balance;\n                                                            n--;\n                                                    }\n\n\n\n\n                                            aPtr = fopen(\"accounts.dat\", \"wb\");\n\n                                            for(i = 0; i &lt; n; i++)\n                                                    fwrite(accounts+i, sizeof(data), 1, aPtr); /* Writes records w/o deleted record */\n                                            fclose(aPtr);\n\n                                            fopen(\"accounts.dat\", \"ab+\");\n\n                                    }\n                                    break;\n\n                            case 5: /* Print Required Account */\n                                    printf(\"Enter Account Number:\\n\");\n                                    scanf(\"%ld\", &amp;number);\n\n                                    for(i = 0; i &lt; n; i++) {\n                                            if(accounts[i].acct == number) {\n                                                    printf(\"First Name: %s\\n\", accounts[i].first);\n                                                    printf(\"Middile Initial: %s.\\n\", accounts[i].middle);\n                                                    printf(\"Last Name: %s\\n\", accounts[i].last);\n                                                    printf(\"Account Number: %ld\\n\", accounts[i].acct);\n                                                    printf(\"Balance: $%.2f\\n\\n\", accounts[i].balance);\n                                                    printf(\"\\n\\n\");\n\n                                                    break;\n                                            }\n                                    }\n                                    if ( i == n ) {\n                                            printf(\"Account does not exist\\n\\n\");\n                                            break;\n                                    }\n                                    break;\n                            case 6: /* Print All */\n                                    for(i = 0; i &lt; n; i++) {\n                                            printf(\"First Name: %s\\n\", accounts[i].first);\n                                            printf(\"Middle Name: %s.\\n\",accounts[i].middle);\n                                            printf(\"Last Name: %s\\n\", accounts[i].last);\n                                            printf(\"Account Number: %ld\\n\", accounts[i].acct);\n                                            printf(\"Balance: $%.2f\\n\", accounts[i].balance);\n                                            printf(\"\\n\\n\");\n                                    }\n\n                    }\n\n            } while ( choice != 0 );\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "arm", "gdb"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1533082970, "post_id": 51623111, "comment_id": 90212593, "body": "Ouch... GDB on ARM is a quite painful experience at times. I cringe when I have to use it for ARM. Make sure the disto is completely up to date, including an <code>apt-get update &amp;&amp; apt-get dist-upgrade</code>."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1565197885, "post_id": 51623111, "comment_id": 101280242, "body": "I had a similar problem which looks like it might have been <a href=\"https://sourceware.org/bugzilla/show_bug.cgi?id=23127\" rel=\"nofollow noreferrer\">sourceware.org/bugzilla/show_bug.cgi?id=23127</a> , fixed in gdb 8.1.1.  Building gdb 8.3 from source worked for me."}], "answers": [{"comments": [{"owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "edited": false, "score": 0, "creation_date": 1533132520, "post_id": 51635328, "comment_id": 90235168, "body": "I wonder if this means that the linux gdb is miscommunicating with the remote somehow.  If you&#39;re using a relatively new gdb on linux, it might be worth looking through the remote protocol logs to see what&#39;s going wrong; that is, if this works automatically with your mac gdb."}, {"owner": {"reputation": 780, "user_id": 2102840, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/edcd82190beeef3cca4a8a0c6ced254f?s=128&d=identicon&r=PG", "display_name": "TrivialCase", "link": "https://stackoverflow.com/users/2102840/trivialcase"}, "reply_to_user": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "edited": false, "score": 0, "creation_date": 1533132674, "post_id": 51635328, "comment_id": 90235279, "body": "I&#39;ll look when I get a shot. Keep in mind that this is the GNU ARM Embedded Toolchain version of gdb that can be found here: <a href=\"https://developer.arm.com/open-source/gnu-toolchain/gnu-rm/downloads\" rel=\"nofollow noreferrer\">developer.arm.com/open-source/gnu-toolchain/gnu-rm/downloads</a> And it&#39;s a pretty new build (only a month or so) so maybe it&#39;s just an issue with their build options. I&#39;m just surprised that I haven&#39;t seen the issue anywhere else."}], "tags": [], "owner": {"reputation": 780, "user_id": 2102840, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/edcd82190beeef3cca4a8a0c6ced254f?s=128&d=identicon&r=PG", "display_name": "TrivialCase", "link": "https://stackoverflow.com/users/2102840/trivialcase"}, "is_accepted": true, "score": 1, "last_activity_date": 1533132127, "creation_date": 1533132127, "answer_id": 51635328, "question_id": 51623111, "link": "https://stackoverflow.com/questions/51623111/arm-gdb-cannot-access-memory-only-on-linux/51635328#51635328", "title": "ARM GDB cannot access memory only on Linux", "body": "<p>For anyone with this problem in the future (<em>sc.</em> myself), the issue was that gdb was not tracking the memory region that includes my SRAM (<em>viz.</em> 0x2000c000 to 0x40000000). The fix was to set up a memory region manually.</p>\n\n<p>Before:</p>\n\n<pre><code>(gdb) info mem\nUsing memory regions provided by the target.\nNum Enb Low Addr   High Addr  Attrs \n0   y   0x00000000 0x00040000 ro nocache \n1   y   0x08000000 0x08040000 flash blocksize 0x800 nocache \n2   y   0x1fff0000 0x1fff7000 ro nocache \n3   y   0x1ffff800 0x1ffff810 ro nocache \n4   y   0x20000000 0x2000c000 rw nocache \n5   y   0x40000000 0x5fffffff rw nocache \n6   y   0xe0000000 0xffffffff rw nocache\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>(gdb) mem 0x2000c000 0x40000000 32 rw\n(gdb) info mem\nUsing user-defined memory regions.\nNum Enb Low Addr   High Addr  Attrs \n0   y   0x00000000 0x00040000 ro nocache \n1   y   0x08000000 0x08040000 flash blocksize 0x800 nocache \n2   y   0x1fff0000 0x1fff7000 ro nocache \n3   y   0x1ffff800 0x1ffff810 ro nocache \n4   y   0x20000000 0x2000c000 rw nocache \n1   y   0x2000c000 0x40000000 rw 32 nocache \n5   y   0x40000000 0x5fffffff rw nocache \n6   y   0xe0000000 0xffffffff rw nocache\n\n(gdb) x/x cr1\n0x36c:  0x60f8af00\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3515, "user_id": 153133, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d8f80701bcde5be0eb38f59fd604818b?s=128&d=identicon&r=PG", "display_name": "Crend King", "link": "https://stackoverflow.com/users/153133/crend-king"}, "is_accepted": false, "score": 0, "last_activity_date": 1569318687, "creation_date": 1569318687, "answer_id": 58077588, "question_id": 51623111, "link": "https://stackoverflow.com/questions/51623111/arm-gdb-cannot-access-memory-only-on-linux/58077588#58077588", "title": "ARM GDB cannot access memory only on Linux", "body": "<p>I encountered the same problem when I used <a href=\"https://github.com/texane/stlink/releases/tag/1.3.0\" rel=\"nofollow noreferrer\">st-util 1.3.0</a> as the GDB server to debug on a STM32L432. It looks like this is a problem in that version, which was fixed in st-util 1.5.0. At the moment there is only source code for that version, so if you happen to be in the situation, try build 1.5.0 from code and try it.</p>\n"}], "owner": {"reputation": 780, "user_id": 2102840, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/edcd82190beeef3cca4a8a0c6ced254f?s=128&d=identicon&r=PG", "display_name": "TrivialCase", "link": "https://stackoverflow.com/users/2102840/trivialcase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1131, "favorite_count": 0, "accepted_answer_id": 51635328, "answer_count": 2, "score": 3, "last_activity_date": 1569318687, "creation_date": 1533077070, "last_edit_date": 1533132778, "question_id": 51623111, "link": "https://stackoverflow.com/questions/51623111/arm-gdb-cannot-access-memory-only-on-linux", "title": "ARM GDB cannot access memory only on Linux", "body": "<p>Trying to switch development to Linux, but running into a (probably simple newbie) problem. On my Mac, I can use ARM GDB (<code>arm-eabi-none-gdb</code> from the GNU ARM Embedded Toolchain) to load my <code>elf</code> to my STM32L432, then at my breakpoints a simple <code>i lo</code> (or examine, or whatever) gives me the local vars. On Linux, however, the exact same code gives me something like the following:</p>\n\n<pre><code>cr1 = &lt;error reading variable cr1 (Cannot access memory at address 0x2000fff4)&gt;\n</code></pre>\n\n<p>Is there something I should be doing different to map the memory correctly?</p>\n\n<p>Edit: Thought I'd start again today with a mem dump of the entire SRAM block (datasheet RM0394 page 63) to see if there's just some offset (maybe some sort of memory aliasing that I was unaware of), but even the <code>dump</code> command is stymied:</p>\n\n<pre><code>(gdb) dump ihex memory result.bin 0x20000000 0x40000000\nCannot access memory at address 0x2000c000\n</code></pre>\n\n<p>This isn't happening on my Mac, and I can see the data I'm looking for on my scope (nothing like debugging software with a scope), so the problem isn't with the SRAM, but with <code>gdb</code>.</p>\n\n<p>And to the person who voted to close, could you specify in what way this is off-topic? I'm stepping through code using <code>gdb</code> and there are tags for pretty much everything I mention, which leads me to believe that this is an appropriate place for the question. I'm not asking for \"debugging help\" as in \"help with debugging specific code\", I'm asking for help with a very widely used debugger on somewhat common equipment.</p>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 1, "creation_date": 1533075535, "post_id": 51622891, "comment_id": 90211026, "body": "Structs can have pointers or other structs as members. For example if you have a linked list the pointer just points to the next element."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1533097641, "post_id": 51622891, "comment_id": 90215401, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15151377/what-exactly-is-a-c-pointer-if-not-a-memory-address\">What exactly is a C pointer if not a memory address?</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1533097661, "post_id": 51622891, "comment_id": 90215407, "body": "There is no struture inside your structure. And this is all C basics as explained in every C textbook."}], "answers": [{"tags": [], "owner": {"reputation": 2107, "user_id": 7451787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lNcOE.jpg?s=128&g=1", "display_name": "bcperth", "link": "https://stackoverflow.com/users/7451787/bcperth"}, "is_accepted": false, "score": 0, "last_activity_date": 1533075777, "creation_date": 1533075777, "answer_id": 51622943, "question_id": 51622891, "link": "https://stackoverflow.com/questions/51622891/understanding-structure-inside-a-structure/51622943#51622943", "title": "Understanding structure inside a structure", "body": "<p>Its common that structures are combined to form linked lists and trees etc. This is achieved by including a pointer to the children or parent \"nodes. In your case is pointing to the next structure in the list.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10019115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b28722d9b980eed770945d23714cbca?s=128&d=identicon&r=PG&f=1", "display_name": "komoriuta", "link": "https://stackoverflow.com/users/10019115/komoriuta"}, "edited": false, "score": 0, "creation_date": 1533076297, "post_id": 51622952, "comment_id": 90211237, "body": "Thanks for the information. When you say it&#39;s a pointer to another node, does that mean we created a pointer to a node called &#39;next&#39; ?"}, {"owner": {"reputation": 908, "user_id": 3292279, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VX393.jpg?s=128&g=1", "display_name": "Alex Johnson", "link": "https://stackoverflow.com/users/3292279/alex-johnson"}, "reply_to_user": {"reputation": 21, "user_id": 10019115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b28722d9b980eed770945d23714cbca?s=128&d=identicon&r=PG&f=1", "display_name": "komoriuta", "link": "https://stackoverflow.com/users/10019115/komoriuta"}, "edited": false, "score": 0, "creation_date": 1533077064, "post_id": 51622952, "comment_id": 90211407, "body": "@JustinSong The next node isn&#39;t called <code>next</code>. Instead, the member variable inside <code>node</code> is called <code>next</code>, and it can be used to point to any other <code>node</code>. It&#39;s a subtle but important distinction. You might want to take a step back and study how pointers work before worrying about pointers inside structs."}], "tags": [], "owner": {"reputation": 908, "user_id": 3292279, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VX393.jpg?s=128&g=1", "display_name": "Alex Johnson", "link": "https://stackoverflow.com/users/3292279/alex-johnson"}, "is_accepted": true, "score": 1, "last_activity_date": 1533078702, "last_edit_date": 1533078702, "creation_date": 1533075852, "answer_id": 51622952, "question_id": 51622891, "link": "https://stackoverflow.com/questions/51622891/understanding-structure-inside-a-structure/51622952#51622952", "title": "Understanding structure inside a structure", "body": "<p>It's just a pointer to another <code>node</code>. The reason you need the <code>struct</code> in front is because the <code>typedef</code> isn't valid until after the struct has been declared. </p>\n\n<p>You might use that pointer to create a linked list, in which each <code>node</code> contains a pointer to the next <code>node</code> in the list.</p>\n\n<p><a href=\"https://stackoverflow.com/a/506378/3292279\">This answer</a> goes into more detail about how (and why) you might set things up like this. It also goes into more detail about why it's necessary (in your example) to use the <code>struct</code> identifier in front of the <code>node</code> pointer.</p>\n\n<p>You may also want to think about whether or not you want to typedef your struct. It saves keystrokes, but it also hides the fact that it's a user-defined type. <a href=\"https://stackoverflow.com/a/252810/3292279\">This answer</a> goes into more detail about that.</p>\n"}, {"tags": [], "owner": {"reputation": 7405, "user_id": 5735010, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/znAEN.jpg?s=128&g=1", "display_name": "abhiarora", "link": "https://stackoverflow.com/users/5735010/abhiarora"}, "is_accepted": false, "score": 0, "last_activity_date": 1533079595, "creation_date": 1533079595, "answer_id": 51623417, "question_id": 51622891, "link": "https://stackoverflow.com/questions/51622891/understanding-structure-inside-a-structure/51623417#51623417", "title": "Understanding structure inside a structure", "body": "<blockquote>\n  <p>how can there be another 'struct node* next' inside struct node?</p>\n</blockquote>\n\n<p><code>struct node *</code> is a pointer to <code>struct node</code> user-defined data type. You can call it <code>pointer to itself</code>. A struct can have pointers to itself or other structs as members.</p>\n\n<p>The <code>C for Programmers a Deitel book</code> says:</p>\n\n<blockquote>\n  <p>A structure cannot contain an instance of itself. For example, a\n  variable of type struct employee cannot be declared in the definition\n  for struct employee. A pointer to struct employee, however, may be\n  included.</p>\n</blockquote>\n\n<p>To read more on why a struct can't contain an instance of itself, you can go through this <a href=\"https://stackoverflow.com/questions/16741618/why-cant-a-struct-have-a-member-that-is-of-the-same-type-as-itself\">link</a>.</p>\n\n<blockquote>\n  <p>typedef is just a way to save characters instead of typing 'struct node' every time, which we can do by typing 'test' in this case. </p>\n</blockquote>\n\n<p>Without the forward declaration the struct name is still valid inside the struct definition (i.e. you can used struct A), but the typedef is not available until after the typedef definition is complete. You can read more over <a href=\"https://stackoverflow.com/questions/506366/c-pointer-to-struct-in-the-struct-definition#506378\">here</a>.</p>\n\n<blockquote>\n  <p>I thought structs had to have structure members, so what does 'struct node* next' accomplish in this code? 'struct node* next' has no structure members, so what is the point of writing struct?</p>\n</blockquote>\n\n<p>You can access the members of pointer to struct node by using <code>-&gt;</code> operator. Consider a small linked link program:</p>\n\n<pre><code>test a;\ntest b;\n\na.data = 5;\nb.data = 10;\nb.next = NULL;\n\na.next = &amp;b; // A linked list has been formed.\nprintf(\"Data of first node is %d and second node is %d\\r\\n\", a.data, a.next-&gt;data); // It will print \"Data of first node is 5 and second node is 10\"\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10019115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b28722d9b980eed770945d23714cbca?s=128&d=identicon&r=PG&f=1", "display_name": "komoriuta", "link": "https://stackoverflow.com/users/10019115/komoriuta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 51622952, "answer_count": 3, "score": 1, "last_activity_date": 1533079595, "creation_date": 1533075450, "last_edit_date": 1533075800, "question_id": 51622891, "link": "https://stackoverflow.com/questions/51622891/understanding-structure-inside-a-structure", "title": "Understanding structure inside a structure", "body": "<p>can anybody help me understand what this block of code means?</p>\n\n<pre><code>typedef struct node{\n   int data;\n   struct node* next;\n}test;\n</code></pre>\n\n<p>From my understanding, typedef is just a way to save characters instead of typing 'struct node' every time, which we can do by typing 'test' in this case. However, how can there be another 'struct node* next' inside struct node? I thought structs had to have structure members, so what does 'struct node* next' accomplish in this code? 'struct node* next' has no structure members, so what is the point of writing struct? </p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "filtering", "signal-processing", "fft", "octave"], "comments": [{"owner": {"reputation": 2313, "user_id": 901812, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/spPcK.jpg?s=128&g=1", "display_name": "Void Star", "link": "https://stackoverflow.com/users/901812/void-star"}, "edited": false, "score": 2, "creation_date": 1533075690, "post_id": 51622889, "comment_id": 90211074, "body": "I am going to direct you to a different stack exchange. <a href=\"https://dsp.stackexchange.com/\">dsp.stackexchange.com</a>"}, {"owner": {"reputation": 29791, "user_id": 120261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2f78d64b265cf0c1c5781c1ea7a39?s=128&d=identicon&r=PG", "display_name": "mtrw", "link": "https://stackoverflow.com/users/120261/mtrw"}, "edited": false, "score": 1, "creation_date": 1533076023, "post_id": 51622889, "comment_id": 90211159, "body": "Are you applying the filter to the frequency domain data? The filter is intended to be applied to the time domain data, isn&#39;t it?"}, {"owner": {"reputation": 109, "user_id": 9539122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3685b692e679d4d00947263cac9161a?s=128&d=identicon&r=PG&f=1", "display_name": "JayY", "link": "https://stackoverflow.com/users/9539122/jayy"}, "reply_to_user": {"reputation": 29791, "user_id": 120261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2f78d64b265cf0c1c5781c1ea7a39?s=128&d=identicon&r=PG", "display_name": "mtrw", "link": "https://stackoverflow.com/users/120261/mtrw"}, "edited": false, "score": 0, "creation_date": 1533108017, "post_id": 51622889, "comment_id": 90219370, "body": "@mtrw I am not sure. As I haven&#39;t seen any application of it made public, nor explicit notes on &quot;how&quot; to use it, then I had to try and see."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1533123700, "post_id": 51622889, "comment_id": 90228849, "body": "Your code is incomplete; in particular, it seems to be missing a <code>main()</code> function and at least one <code>#include</code>. Please <a href=\"https://stackoverflow.com/posts/51622889/edit\">edit</a> your code so it&#39;s a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of your problem (including any necessary inputs, but preferably not needing any), then we can try to reproduce and solve it. You should also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 109, "user_id": 9539122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3685b692e679d4d00947263cac9161a?s=128&d=identicon&r=PG&f=1", "display_name": "JayY", "link": "https://stackoverflow.com/users/9539122/jayy"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1533131334, "post_id": 51622889, "comment_id": 90234273, "body": "@TobySpeight Apologies if I didn&#39;t explain along the original post. What I included was just the filtering section. The rest of the program was omitted because it is in this part that things provide incorrect results. Either by incorrect implementation on my part or improper use, as Mtrw and User268396 suspect that this implementation is for time domain, not frequency (which is what I am using)."}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 9539122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3685b692e679d4d00947263cac9161a?s=128&d=identicon&r=PG&f=1", "display_name": "JayY", "link": "https://stackoverflow.com/users/9539122/jayy"}, "edited": false, "score": 0, "creation_date": 1533108529, "post_id": 51623053, "comment_id": 90219668, "body": "Just like mtrw, you suggest the filter was intended for time domain use. The way I understood was that the author (RIP) provided a tool to build a filter, and the user is responsible for adjusting it to a particular situation. Maybe I just picked the wrong tool for the problem. 2nd paragraph: <a href=\"http://www.aip.de/groups/soe/local/numres/bookfpdf/f13-5.pdf\" rel=\"nofollow noreferrer\">aip.de/groups/soe/local/numres/bookfpdf/f13-5.pdf</a>"}, {"owner": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "reply_to_user": {"reputation": 109, "user_id": 9539122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3685b692e679d4d00947263cac9161a?s=128&d=identicon&r=PG&f=1", "display_name": "JayY", "link": "https://stackoverflow.com/users/9539122/jayy"}, "edited": false, "score": 0, "creation_date": 1533141076, "post_id": 51623053, "comment_id": 90240798, "body": "You can certainly adjust it any way you like but those <code>adjustments</code> change the frequency response by definition. You should read the next section on the definition of the recurrence relation for an IIR filter. The example C code being generated is derived from that. Now when you feed that data broken down into separate real &amp; imaginary components (Q/I ?) you are taking numbers from one domain and pretending them to be valid/meaningful within another. In mathematics, that rarely works."}, {"owner": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "reply_to_user": {"reputation": 109, "user_id": 9539122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3685b692e679d4d00947263cac9161a?s=128&d=identicon&r=PG&f=1", "display_name": "JayY", "link": "https://stackoverflow.com/users/9539122/jayy"}, "edited": false, "score": 0, "creation_date": 1533141396, "post_id": 51623053, "comment_id": 90240983, "body": "When you do study the recurrence relation one important thing to realise is that it describes an IIR filter. You can certainly do your filtering in the z-domain by computing the <code>X(z)</code> from your input x then applying the transfer function <code>H(z)</code> and finally reconstructing the equivalent y signal in the time domain from <code>Y(z)</code>. But note: ultimately it must be equivalent to the IIR filter in the time domain anyway. So you can also skip the whole z-transforms and do the filtering in the time domain. IIR filters typically have few terms, so this is much more convenient and easy to implement."}, {"owner": {"reputation": 109, "user_id": 9539122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3685b692e679d4d00947263cac9161a?s=128&d=identicon&r=PG&f=1", "display_name": "JayY", "link": "https://stackoverflow.com/users/9539122/jayy"}, "edited": false, "score": 0, "creation_date": 1533153640, "post_id": 51623053, "comment_id": 90247249, "body": "I don&#39;t know why it won&#39;t let me refer to your name with @... but I certainly understand your consideration, as I wasn&#39;t really aware that filters coming from the referred tool were supposed to be used in time. Since I will be doing work with phase too, and the fwFFT is already there, then maybe it is better if I just use one of these C++ implementations already available instead of reinventing the wheel. I will accept your comment as answer, due to the considerations you made here in the comments."}], "tags": [], "owner": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "is_accepted": true, "score": 0, "last_activity_date": 1533076515, "creation_date": 1533076515, "answer_id": 51623053, "question_id": 51622889, "link": "https://stackoverflow.com/questions/51622889/butterworth-bp-filtering-in-c-c-strange-spectrum/51623053#51623053", "title": "Butterworth BP filtering in C/C++, strange spectrum", "body": "<p>The generated C code is the recurrence relation which describes the filter behaviour in the time domain. Each index refers to a sample of the filtered input signal (what you might get from an ADC).</p>\n\n<p>You 'broke' the code by:</p>\n\n<ol>\n<li>Adding a 9th sample, where there should be none.</li>\n<li>Somehow splitting the data in real/imaginary components (Q/I ?) which is not what the code is intended for.</li>\n</ol>\n"}], "owner": {"reputation": 109, "user_id": 9539122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3685b692e679d4d00947263cac9161a?s=128&d=identicon&r=PG&f=1", "display_name": "JayY", "link": "https://stackoverflow.com/users/9539122/jayy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 51623053, "answer_count": 1, "score": -1, "last_activity_date": 1533076515, "creation_date": 1533075434, "last_edit_date": 1533075589, "question_id": 51622889, "link": "https://stackoverflow.com/questions/51622889/butterworth-bp-filtering-in-c-c-strange-spectrum", "title": "Butterworth BP filtering in C/C++, strange spectrum", "body": "<p>I got a Bw BP C code from here, <a href=\"https://www-users.cs.york.ac.uk/~fisher/mkfilter\" rel=\"nofollow noreferrer\">https://www-users.cs.york.ac.uk/~fisher/mkfilter</a>, as commented in other OS topics, and made a 250Hz, 4th order, passing from 10 to 20Hz.</p>\n\n<p>Below is the code of this filter, adapted from the code provided at this site, and added the lines to multiply the real and imaginary parts of the input signal (coming from a fw FFT R2C):</p>\n\n<pre><code>const unsigned char NZEROS = 8,\n                    NPOLES = 8;\ndouble              GAIN = 1.121655430e+02,\n                    xv[NZEROS + 2] = {},        // NZEROS + 1 for real and + 1 for imag\n                    yv[NPOLES + 2] = {};        // NPOLES + 1 for real and + 1 for imag\n\nfor (size_t i = 0; i &lt; array_length_fft_1D; i++)\n    {\n    xv[0] = xv[1];  xv[1] = xv[2];\n    xv[2] = xv[3];  xv[3] = xv[4];\n    xv[4] = xv[5];  xv[5] = xv[6];\n    xv[6] = xv[7];  xv[7] = xv[8];\n    xv[8] = fft_complex_1D[0][i] / GAIN;        // Real part, input\n    xv[9] = fft_complex_1D[1][i] / GAIN;        // Imaginary part, input\n\n    yv[0] = yv[1];  yv[1] = yv[2];\n    yv[2] = yv[3];  yv[3] = yv[4];\n    yv[4] = yv[5];  yv[5] = yv[6];\n    yv[6] = yv[7];  yv[7] = yv[8];\n\n    // Multiplying the real part\n    yv[8] = (xv[0] + xv[8]) - 4 * (xv[2] + xv[6]) + 6 * xv[4]\n        + (-0.1316807150 * yv[0]) + (1.2338753102 * yv[1])\n        + (-5.2054087885 * yv[2]) + (12.8890751850 * yv[3])\n        + (-20.5097097890 * yv[4]) + (21.4961146820 * yv[5])\n        + (-14.4728919700 * yv[6]) + (5.7005626010 * yv[7]);\n\n    // Multiplying the imaginary part\n    yv[9] = (xv[0] + xv[9]) - 4 * (xv[2] + xv[6]) + 6 * xv[4]\n        + (-0.1316807150 * yv[0]) + (1.2338753102 * yv[1])\n        + (-5.2054087885 * yv[2]) + (12.8890751850 * yv[3])\n        + (-20.5097097890 * yv[4]) + (21.4961146820 * yv[5])\n        + (-14.4728919700 * yv[6]) + (5.7005626010 * yv[7]);\n\n    fft_complex_1D[0][i] = static_cast&lt;float&gt;(yv[8]);       // At this point the real part of the complex array is overwritten\n    fft_complex_1D[1][i] = static_cast&lt;float&gt;(yv[9]);       // At this point the imaginary part of the complex array is overwritten\n    }\n</code></pre>\n\n<p>fft_complex_1D is the input array coming from the fw FFT, which at the end of each iteration has the real and imaginary parts multiplied by the coefficients. It is later sent to the inverse FFT C2R and it outputs a float array.</p>\n\n<p>Then, when I go to Octave to plot the spectrum and see if things are really being filtered, frequencies just before 10Hz and just after 20Hz are attenuated, but then everything else seems untouched, where I expected attenuation. See the figure below which shows the 10-20Hz region marked green. Blue is input, unfiltered data (real numbers from -5 to +5). Red is the filtered data. No scaling was applied to any data.</p>\n\n<p><a href=\"https://i.stack.imgur.com/uLJF8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uLJF8.png\" alt=\"Frequency spectrum plot\"></a></p>\n\n<p>There is something wrong or missing in this filter code. Can you guys provide some feedback (no pun intended)?</p>\n"}, {"tags": ["c", "compilation", "cpu-architecture"], "comments": [{"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 2, "creation_date": 1533075179, "post_id": 51622751, "comment_id": 90210904, "body": "It is very possible that the arguments were passed via registers and the compiler was required to create temporary variables with automatic storage duration in order to satisfy the requirements of the address-of operator. In short, this has nothing to do with alighment."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1533075288, "post_id": 51622751, "comment_id": 90210937, "body": "Post the code that calls <code>check_alignment()</code>.  A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 0, "creation_date": 1533075507, "post_id": 51622751, "comment_id": 90211020, "body": "&quot;Since it&#39;s 64bit machine char c1 and char c2 should be stored on multiples of 8. Isn&#39;t that right? &quot;  No, it is not right.  The compiler is at liberty to do whatever it wants, as long as the resulting program produces results that are compliant what what the C standard dictates."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1533097809, "post_id": 51622751, "comment_id": 90215438, "body": "The code invokes undefined behaviour. You are not allowed to subtract two pointers which don&#39;t point into (or exactly past) the same scalar or array."}], "answers": [{"comments": [{"owner": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "edited": false, "score": 0, "creation_date": 1533075376, "post_id": 51622829, "comment_id": 90210962, "body": "I measured how far they are apart because they are passed as arguments of a function, so they will be placed immediately after each other in the function stack. That makes sure they are not located in random location in memory."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "edited": false, "score": 0, "creation_date": 1533075528, "post_id": 51622829, "comment_id": 90211025, "body": "@Learner: No, they won&#39;t be. Almost nobody uses &quot;stack&quot; to pass scalar arguments anymore. Most likely they would be passed in CPU registers, without involving any &quot;stack&quot; at all. The only reason your parameter got stored locally is that you applied <code>&amp;</code> operator to them. This forced the compiler to store them (on the &quot;stack&quot;). And it stored them 4 bytes apart. But even if &quot;stack&quot; was used to pass the arguments, there&#39;s still nothing to prevent the compiler from passing them 4 bytes apart. There&#39;s no requirement to pack them tightly."}, {"owner": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "edited": false, "score": 0, "creation_date": 1533075877, "post_id": 51622829, "comment_id": 90211112, "body": "What would be a correct way? I used <code>long</code>, and still <code>delta=4</code>. It must be at least 8."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "edited": false, "score": 0, "creation_date": 1533075940, "post_id": 51622829, "comment_id": 90211135, "body": "@Learner: Where did you get this? <code>long</code> is at least 4, not 8. <code>long long</code> is at least 8."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "edited": false, "score": 1, "creation_date": 1533077072, "post_id": 51622829, "comment_id": 90211408, "body": "@Learner: <code>(int)(&amp;c2 - &amp;c1)</code> would have been safer but still risky (e.g. after inlining, <code>c1</code> and <code>c2</code> might be far apart).  But <code>(unsigned)&amp;c2 - (unsigned)&amp;c1</code> would definitely avoid UB, because unsigned overflow is defined as wrapping around.  The low bytes of a subtraction result doesn&#39;t depend on the high bytes of the input, so it&#39;s ok to throw them away early if you want to assume that your objects are nearby."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1533077179, "post_id": 51622829, "comment_id": 90211433, "body": "@ant: on Windows x64, those two function args will be passed in RCX and RDX (so actually CL and DL for 1 byte integers).  The compiler has to spill them to give them an address.  (Or imagine spilling them, if the addresses are only subtracted.)  x86-64 System V would be similar, but in RDI and RSI (actually dil / sil)."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 6, "last_activity_date": 1533099270, "last_edit_date": 1533099270, "creation_date": 1533075088, "answer_id": 51622829, "question_id": 51622751, "link": "https://stackoverflow.com/questions/51622751/alignment-in-64bit-machine-is-not-8-bytes/51622829#51622829", "title": "Alignment in 64bit machine is not 8 Bytes", "body": "<p>Firstly, if your platform is 64-bit, then why are you casting your pointer values to <code>int</code>? Is <code>int</code> 64-bit wide on your platform? If not, your subtraction is likely to produce a meaningless result. Use <code>intptr_t</code> or <code>ptrdiff_t</code> for that purpose, not <code>int</code>.</p>\n\n<p>Secondly, in a typical implementation a 1-byte type will typically be aligned at 1-byte boundary, regardless of whether your platform is 64-bit or not. To see a 8-byte alignment you'd need a 8-byte type. And in order to see how it is aligned you have to inspect the physical value of the address (i.e. whether it is divisible by 1, 2, 4, 8 etc.), not analyze how far apart two variables are spaced. </p>\n\n<p>Thirdly, how far apart <code>c1</code> and <code>c2</code> are in memory has little to do with alignment requirements of <code>char</code> type. It is determined by how <code>char</code> values are passed (or stored locally) on your platform. In your case they are apparently allocated 4-byte storage cells each. That's perfectly fine. Nobody every promised you that two unrelated objects with 1-byte alignment will be packed next to each other as tightly as possible.</p>\n\n<p>If you want to determine alignment by measuring how far from each other two objects are stored, declare an array. Do not try to measure the distance between two independent objects - this is meaningless.</p>\n"}, {"comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1533100539, "post_id": 51623009, "comment_id": 90216136, "body": "The OP might be interested to know that if you pass so many args that the calling convention doesn&#39;t have registers for them, the Windows x64 calling convention (like x86-64 System V) will pass them in 8-byte stack slots. (4 byte minimum alignment for stack args would have been a valid choice, too.  <a href=\"https://stackoverflow.com/q/51564190\">Difference in data alignment in struct vs parameter?</a>).  <code>max_align_t</code> doesn&#39;t tell you anything about the calling convention, but it&#39;s normal for the minimum stack alignment to be large enough to get <code>max_align_t</code> alignment without an extra <code>and</code> instruction."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 5, "last_activity_date": 1533076180, "creation_date": 1533076180, "answer_id": 51623009, "question_id": 51622751, "link": "https://stackoverflow.com/questions/51622751/alignment-in-64bit-machine-is-not-8-bytes/51623009#51623009", "title": "Alignment in 64bit machine is not 8 Bytes", "body": "<p>To determine the greatest fundamental alignment in your C implementation, use:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stddef.h&gt;\n\nint main(void)\n{\n    printf(\"%zd bytes\\n\", _Alignof(max_align_t));\n}\n</code></pre>\n\n<p>To determine the alignment requirement of any particular type, replace <code>max_align_t</code> above with that type.</p>\n\n<p>Alignment is not purely a function of the processor or other hardware. Hardware might support aligned or unaligned accesses with different performance effects, and some instructions might support unaligned access while others do not. A particular C implementation might choose to require or not require certain alignment in combination with choosing to use or not use various instructions. Additionally, on some hardware, whether unaligned access is supported is configurable by the operating system.</p>\n"}], "owner": {"reputation": 795, "user_id": 3169603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/518919978cd17830cb8c105193a9615a?s=128&d=identicon&r=PG&f=1", "display_name": "doubleE", "link": "https://stackoverflow.com/users/3169603/doublee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "accepted_answer_id": 51623009, "answer_count": 2, "score": -2, "last_activity_date": 1533099270, "creation_date": 1533074674, "last_edit_date": 1533075550, "question_id": 51622751, "link": "https://stackoverflow.com/questions/51622751/alignment-in-64bit-machine-is-not-8-bytes", "title": "Alignment in 64bit machine is not 8 Bytes", "body": "<p>I am trying to find out alignment on my 64bit machine(Win10 on Intel iCore7). I thought of this experiment:</p>\n\n<pre><code>void check_alignment(char c1, char c2 )\n{\n   printf(\"delta=%d\\n\", (int)&amp;c2 - (int)&amp;c1); // prints 4 instead of 8\n}\n\nvoid main(){\n    check_alignment('a','b');\n}\n</code></pre>\n\n<p>I was expecting <strong><code>delta=8</code></strong>. Since it's 64bit machine <strong><code>char c1</code></strong> and <strong><code>char c2</code></strong> should be stored on multiples of 8. Isn't that right? </p>\n\n<p>Even if we assume compiler has done optimization to have them stored in less space, why not just store them back to back <strong><code>delta=1</code></strong>? Why 4 byte alignment?</p>\n\n<p>I repeated the above experiment with <strong><code>float</code></strong> types, and still gives <strong><code>delta=4</code></strong></p>\n\n<pre><code>void check_alignment(float f1, float f2 )\n{\n   printf(\"delta=%d\\n\", (int)&amp;c2 - (int)&amp;c1); // prints 4\n}\n\nvoid main(){\n    check_alignment(1.0,1.1);\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "networking"], "comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1533072434, "post_id": 51621953, "comment_id": 90209998, "body": "Are you running Linux on your Raspberry Pi?"}, {"owner": {"reputation": 302, "user_id": 10114965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/86Uky.png?s=128&g=1", "display_name": "Inrin", "link": "https://stackoverflow.com/users/10114965/inrin"}, "edited": false, "score": 0, "creation_date": 1533073046, "post_id": 51621953, "comment_id": 90210210, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15422041/how-to-get-the-tcp-header-of-a-received-packet-in-socket-programming\">how to get the tcp header of a received packet in socket programming?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 0, "last_activity_date": 1533073183, "last_edit_date": 1533073183, "creation_date": 1533072864, "answer_id": 51622428, "question_id": 51621953, "link": "https://stackoverflow.com/questions/51621953/how-to-receive-tcp-flags-in-a-socket-connection/51622428#51622428", "title": "How to receive tcp flags in a socket connection", "body": "<p>You don't need to observe TCP flags to detect FIN. <code>recv</code> will return 0. If you want to try to observe whether or not <code>recv</code> would return 0 without disturbing the buffered data on the socket, you can use <a href=\"https://stackoverflow.com/a/17705579/315052\"><code>MSG_PEEK</code></a>, and if you need it to be non-blocking, you can combine it with <a href=\"https://stackoverflow.com/a/24639654/315052\"><code>MSG_DONTWAIT</code></a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 10162662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186755ef2cf61869345a503dc22cf17f?s=128&d=identicon&r=PG&f=1", "display_name": "nkr", "link": "https://stackoverflow.com/users/10162662/nkr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "closed_date": 1533105586, "accepted_answer_id": 51622428, "answer_count": 1, "score": 0, "last_activity_date": 1533088868, "creation_date": 1533070642, "last_edit_date": 1533088868, "question_id": 51621953, "link": "https://stackoverflow.com/questions/51621953/how-to-receive-tcp-flags-in-a-socket-connection", "closed_reason": "Not suitable for this site", "title": "How to receive tcp flags in a socket connection", "body": "<p>I've created a socket connection in c between my Raspberry Pi and another device where the Pi is the client. </p>\n\n<p>Is there anyway to handle TCP flags in the packets received from the server? </p>\n\n<p>In particular, I want certain code to execute if the response has a FIN flag.</p>\n"}, {"tags": ["c", "switch-statement"], "comments": [{"owner": {"reputation": 3329, "user_id": 2070111, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/WG0vD.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/2070111/nick"}, "edited": false, "score": 2, "creation_date": 1533066484, "post_id": 51620995, "comment_id": 90207437, "body": "<code>case</code> values must be constants or literals."}, {"owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "edited": false, "score": 1, "creation_date": 1533066557, "post_id": 51620995, "comment_id": 90207478, "body": "try switch(isalnum(input)) - case 1: - case: 0"}, {"owner": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 1, "creation_date": 1533066584, "post_id": 51620995, "comment_id": 90207491, "body": "Why not <code>if(isalnum(input)) { ... }</code>?"}, {"owner": {"reputation": 2202, "user_id": 3357481, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100006348219116/picture?type=large", "display_name": "Mutating Algorithm", "link": "https://stackoverflow.com/users/3357481/mutating-algorithm"}, "reply_to_user": {"reputation": 4125, "user_id": 3426025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yxLev.png?s=128&g=1", "display_name": "BeyelerStudios", "link": "https://stackoverflow.com/users/3426025/beyelerstudios"}, "edited": false, "score": 0, "creation_date": 1533066619, "post_id": 51620995, "comment_id": 90207507, "body": "@BeyelerStudios The purpose of the exercise i&#39;m working on is to use switch statements."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "edited": false, "score": 1, "creation_date": 1533066744, "post_id": 51620995, "comment_id": 90207566, "body": "@emsimpson92, you mean <code>case 0:</code> and <code>default:</code>"}, {"owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "edited": false, "score": 0, "creation_date": 1533066800, "post_id": 51620995, "comment_id": 90207588, "body": "ah... I&#39;m used to C# where default: isn&#39;t required."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "edited": false, "score": 4, "creation_date": 1533066902, "post_id": 51620995, "comment_id": 90207631, "body": "@emsimpson92, in c <code>default</code> is also optional, but I mean <code>isalnum</code> return value is <i>A value <b>different from zero</b> (i.e., true) if indeed c is either a digit or a letter. Zero (i.e., false) otherwise.</i>"}, {"owner": {"reputation": 2649, "user_id": 4022617, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/nk22l.png?s=128&g=1", "display_name": "dgnuff", "link": "https://stackoverflow.com/users/4022617/dgnuff"}, "edited": false, "score": 0, "creation_date": 1533067414, "post_id": 51620995, "comment_id": 90207883, "body": "To the OP, there&#39;s probably some benefit in learning exactly how a <code>switch</code> operates in C.  Even if this were possible, it probably would not do what you want anyway.  At a wild guess you&#39;re trying to do what Scuzzy&#39;s answer to <a href=\"https://stackoverflow.com/questions/8829229/why-switchtrue-in-php-with-a-strange-logic\">this question</a> shows.  That&#39;s possible in PHP, but it is simply not possible in C."}], "answers": [{"tags": [], "owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "is_accepted": false, "score": 2, "last_activity_date": 1533066705, "creation_date": 1533066705, "answer_id": 51621058, "question_id": 51620995, "link": "https://stackoverflow.com/questions/51620995/evaluating-a-switch-expression-at-runtime-in-c/51621058#51621058", "title": "Evaluating a switch expression at runtime in C", "body": "<p>You can't call isalnum in your case statement. Try something like this:</p>\n\n<pre><code>switch(isalnum(input))\n{\n  case 0:\n    //do stuff\n    break;\n  default:\n    //do other stuff\n    break;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": true, "score": 4, "last_activity_date": 1533067464, "last_edit_date": 1533067464, "creation_date": 1533066721, "answer_id": 51621062, "question_id": 51620995, "link": "https://stackoverflow.com/questions/51620995/evaluating-a-switch-expression-at-runtime-in-c/51621062#51621062", "title": "Evaluating a switch expression at runtime in C", "body": "<p>See <a href=\"https://en.cppreference.com/w/c/language/switch\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/c/language/switch</a></p>\n\n<p>The syntax requires</p>\n\n<blockquote>\n  <p><strong>case</strong> <em>constant_expression</em> <strong>:</strong> <em>statement</em>  </p>\n</blockquote>\n\n<p>with</p>\n\n<blockquote>\n  <p><em>constant_expression</em> -   a constant expression of the same type as the type of condition after conversions and integral promotions</p>\n</blockquote>\n\n<p>I.e. syntax requires constant expression.<br>\nThe result of a function call is not a constant expression.<br>\nThat is why it is illegal.</p>\n"}, {"tags": [], "owner": {"reputation": 190, "user_id": 4937318, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EG4D1S86-BM/AAAAAAAAAAI/AAAAAAAAADo/jvGxwlDHmA4/photo.jpg?sz=128", "display_name": "jplc", "link": "https://stackoverflow.com/users/4937318/jplc"}, "is_accepted": false, "score": 1, "last_activity_date": 1533067031, "creation_date": 1533067031, "answer_id": 51621142, "question_id": 51620995, "link": "https://stackoverflow.com/questions/51620995/evaluating-a-switch-expression-at-runtime-in-c/51621142#51621142", "title": "Evaluating a switch expression at runtime in C", "body": "<p><strong>switch</strong> statement transfers the control flow of the program to one of the <strong>cases</strong> listed.  That's why you need to assigne constant values to <strong>case</strong>. They are evaluated at compiled time.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1533069407, "creation_date": 1533069407, "answer_id": 51621699, "question_id": 51620995, "link": "https://stackoverflow.com/questions/51620995/evaluating-a-switch-expression-at-runtime-in-c/51621699#51621699", "title": "Evaluating a switch expression at runtime in C", "body": "<p>Other answers have explained the requirements of C syntax, specifically that each <code>case</code> value needs to be a constant expression.  I just want to add that the example code you presented is <em>semantically</em> flawed, too.</p>\n\n<p>You wrote:</p>\n\n<blockquote>\n<pre><code>switch(input) {\n    case isalnum(input):\n        ...\n</code></pre>\n</blockquote>\n\n<p>A <code>switch</code> statement compares the switch expression -- <code>input</code>, in this case -- with each of the <code>case</code> expressions, in search of a match.  But <code>isalnum()</code> returns an <em>unspecified</em> non-zero number when its argument is alphanumeric, and zero otherwise.  There is no reason to expect that <code>input == isalnum(input)</code> will be true when <code>input</code> is in fact alphanumeric (though it nevertheless might be), whereas you can be certain that that relationship <em>does</em> hold for the argument <code>0</code>.</p>\n\n<p>Thus, this specific approach would be incorrect even if C permitted <code>case</code> expressions to be non-constant.</p>\n"}, {"tags": [], "owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "is_accepted": false, "score": 0, "last_activity_date": 1533069478, "creation_date": 1533069478, "answer_id": 51621711, "question_id": 51620995, "link": "https://stackoverflow.com/questions/51620995/evaluating-a-switch-expression-at-runtime-in-c/51621711#51621711", "title": "Evaluating a switch expression at runtime in C", "body": "<p>If the purpose is to use the switch-case statement, then maybe ditch <code>isalnum</code> and just have a bunch of cases for each alphanumeric character with fall-through and then a default case.  Something like:</p>\n\n<pre><code>switch(input)\n{\n    case '0':\n    case '1':\n    case '2':\n</code></pre>\n\n<p>[...]</p>\n\n<pre><code>    case 'z':\n        // do something here\n        break;\n    default:\n        // do something else here\n        break;\n}\n</code></pre>\n"}], "owner": {"reputation": 2202, "user_id": 3357481, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/100006348219116/picture?type=large", "display_name": "Mutating Algorithm", "link": "https://stackoverflow.com/users/3357481/mutating-algorithm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "closed_date": 1533069524, "accepted_answer_id": 51621062, "answer_count": 5, "score": 1, "last_activity_date": 1533069478, "creation_date": 1533066401, "question_id": 51620995, "link": "https://stackoverflow.com/questions/51620995/evaluating-a-switch-expression-at-runtime-in-c", "closed_reason": "Duplicate", "title": "Evaluating a switch expression at runtime in C", "body": "<p>I want to read characters from the console and check if it is alpha numeric. From my understanding, <code>isalnum</code> has the following function signature.</p>\n\n<p><code>int isalnum(int x);</code></p>\n\n<p>Why is it illegal to write</p>\n\n<p><code>switch(input) {\n    case isalnum(input):\n        ...\n</code></p>\n\n<p>if <code>isalnum</code> returns an integer value.</p>\n"}, {"tags": ["c", "pointers", "segmentation-fault"], "comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1533064773, "post_id": 51620529, "comment_id": 90206628, "body": "String literals like &quot;Hello World&quot; may be (and often are) allocated in read-only memory. If you want a modifiable string, declare an array, and use the string to initialize the array."}, {"owner": {"reputation": 5, "user_id": 9039098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z8cll.jpg?s=128&g=1", "display_name": "Ahmad Raza", "link": "https://stackoverflow.com/users/9039098/ahmad-raza"}, "edited": false, "score": 0, "creation_date": 1533064954, "post_id": 51620529, "comment_id": 90206699, "body": "Lee Daniel Crocker , you mean there is no way to have a writeable string like mine *string?"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1533069464, "post_id": 51620529, "comment_id": 90208869, "body": "You would allocate a writable buffer, like in your second code sample, or with <code>malloc()</code>."}, {"owner": {"reputation": 5, "user_id": 9039098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z8cll.jpg?s=128&g=1", "display_name": "Ahmad Raza", "link": "https://stackoverflow.com/users/9039098/ahmad-raza"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1533114876, "post_id": 51620529, "comment_id": 90223221, "body": "@Davislor Thanks, I picked great idea of malloc and strcpy to achieve results."}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1533144939, "post_id": 51620529, "comment_id": 90242763, "body": "That works. You might also look at <code>strdup()</code>."}, {"owner": {"reputation": 5, "user_id": 9039098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z8cll.jpg?s=128&g=1", "display_name": "Ahmad Raza", "link": "https://stackoverflow.com/users/9039098/ahmad-raza"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1533304070, "post_id": 51620529, "comment_id": 90311032, "body": "@Davislor yes, I read that too. Things were solved instantly after knowing that &quot;char * string&quot; is equal to &quot;const char * string&quot; and that we can only change address of pointer, not the content of pointer."}], "answers": [{"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": true, "score": 1, "last_activity_date": 1533064907, "creation_date": 1533064907, "answer_id": 51620616, "question_id": 51620529, "link": "https://stackoverflow.com/questions/51620529/segmentation-fault-after-manipulating-c-string-with-secondary-pointer/51620616#51620616", "title": "segmentation fault after manipulating c string with secondary pointer", "body": "<p>The first code sample initializes your pointers to the start of a string constant.  Modifying a string constant is <strong>undefined behavior</strong>.</p>\n\n<p>In fact, you should never, ever write <code>char *s = \"hello world\";</code>.  Always write <code>const char *s</code> or, better yet, <code>const char* const s</code> if it points to a string constant.  The only reason you\u2019re even allowed to have a pointer that isn\u2019t <code>const</code> alias a string constant is for backward-compatibility with code written before the <code>const</code> keyword existed.  There\u2019s never any good reason to do it in new code.</p>\n\n<p>The second code sample creates an array with static storage.  Modifying that array is fine.</p>\n"}], "owner": {"reputation": 5, "user_id": 9039098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z8cll.jpg?s=128&g=1", "display_name": "Ahmad Raza", "link": "https://stackoverflow.com/users/9039098/ahmad-raza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1533065023, "accepted_answer_id": 51620616, "answer_count": 1, "score": -1, "last_activity_date": 1533064907, "creation_date": 1533064528, "last_edit_date": 1533064697, "question_id": 51620529, "link": "https://stackoverflow.com/questions/51620529/segmentation-fault-after-manipulating-c-string-with-secondary-pointer", "closed_reason": "Duplicate", "title": "segmentation fault after manipulating c string with secondary pointer", "body": "<p>I'm having a problem with c string, I want to keep address of original string aside and manipulate string using another c pointer, but it will give an segmentation fault when try to print that string using original or secondary pointer, however declaring string as character array does not present such fault. I don't to use array as well as I don't want to lose original address. Please point the problem.</p>\n\n<pre><code>/* segmentation fault when run */\nchar *string = \"Hello World\";\nchar *nick = string;\nwhile(*nick)\n    *nick++ = '0';\nprintf(\"%s\\n\", string);\n\n/* display 000000000000 when run (wished result)*/\nchar array[] = \"Hello World\";\nchar *nick = array;\nwhile(*nick)\n    *nick++ = '0';\nprintf(\"%s\\n\", array);\n</code></pre>\n"}, {"tags": ["c", "memory"], "answers": [{"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533068198, "post_id": 51620886, "comment_id": 90208264, "body": "OP does not understand the difference between visibility of the variable name during the compilation and implementation"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533068417, "post_id": 51620886, "comment_id": 90208351, "body": "I read the OP a few times and I don&#39;t see any evidence that visibility of the variable name is confusing him."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1533098916, "post_id": 51620886, "comment_id": 90215694, "body": "None of the assumptions listed are necessarily true, nor mandator for an implementation. Not even for widely used platforms."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 3, "last_activity_date": 1533065951, "creation_date": 1533065951, "answer_id": 51620886, "question_id": 51620281, "link": "https://stackoverflow.com/questions/51620281/how-does-scanf-write-data-to-other-functions-stack-frames/51620886#51620886", "title": "How does scanf() write data to other functions&#39; stack frames?", "body": "<blockquote>\n  <p>In this program, main has its own stack frame where local variable x is initialized to 2. </p>\n</blockquote>\n\n<p>Correct.</p>\n\n<blockquote>\n  <p>My understanding is that scanf() also has its own stack frame.</p>\n</blockquote>\n\n<p>Correct.</p>\n\n<blockquote>\n  <p>Scanf() is given the address of x, but how is scanf() allowed to change data in main's stack frame?</p>\n</blockquote>\n\n<p>Allowed by who or what? There's nothing to prevent it from doing so. It has the address. It's in the same process. It can simply write to that address.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533067119, "post_id": 51621018, "comment_id": 90207741, "body": "&quot;But it requires that you pass a pointer to the variable.&quot; --&gt; Usually.  With <code>char s[9]; scanf(&quot;%8s&quot;, s);</code> In this case, the value of array <code>s</code> is affected by <code>scanf()</code>, even though the address of the array variable <code>s</code> was not given to <code>scanf()</code> for the usual conversion of an array to the address of its first element."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533067182, "post_id": 51621018, "comment_id": 90207766, "body": "@chux Isn&#39;t that just the usual decay thing?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533067385, "post_id": 51621018, "comment_id": 90207867, "body": "Yes. Yet from the caller&#39;s point-of-view, <code>scanf(&quot;%8s&quot;, s)</code> looks like it is changing the object <code>s</code> and appears contrary to &quot;requires that you pass a pointer to the variable&quot;."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533067568, "post_id": 51621018, "comment_id": 90207974, "body": "@chux well yes... you are correct that it can seem confusing but that&#39;s just C. Maybe I should address that &quot;special&quot; C feature. Hmm..."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 2, "last_activity_date": 1533068520, "last_edit_date": 1533068520, "creation_date": 1533066515, "answer_id": 51621018, "question_id": 51620281, "link": "https://stackoverflow.com/questions/51620281/how-does-scanf-write-data-to-other-functions-stack-frames/51621018#51621018", "title": "How does scanf() write data to other functions&#39; stack frames?", "body": "<p>I'll try to give an answer. But first... please notice that the C standard does <strong>not</strong> define a stack. That is an implementation detail whether a stack is used or not. That said - almost every modern implementation uses a stack for handling function calls and their local variables.</p>\n\n<p>Your are correct that each function (aka each stack frame) contains its own local variables that can't be directly changed by other functions.</p>\n\n<p>Lets take an example:</p>\n\n<pre><code>void foo(int x)\n{\n    x = 5;  // Change x to 5 but it does NOT change x in callee\n}\n\nint x = 42;\nfoo(x);\n\n// Here x is still 42 because foo can't change the value of x in the callee\n</code></pre>\n\n<p>But what if we use pointers?</p>\n\n<pre><code>void foo(int* x)\n{\n    int y = 8;\n    x = &amp;y;   // Change x to point to y\n}\n\nint x = 42;\nfoo(&amp;x);\n\n// Here x is still 42 because foo can't change the address of x in the callee\n</code></pre>\n\n<p>So the two examples above shows that <code>foo</code> can't alter variables in the callee.</p>\n\n<p>But... Now what can you do with a pointer?</p>\n\n<pre><code>void foo(int* x)\n{\n    *x = 8;   // Change x to be 8 (notice the * - it is the key)\n}\n\nint x = 42;\nfoo(&amp;x);\n\n// Here x is changed to 8 because foo can use the pointer to x to change its value\n</code></pre>\n\n<p>So yes: The called function can change the value of a variable in the callee (a variable in its stack frame). But it requires that you pass a pointer to the variable. And that is exactly what <code>scanf</code> expects - a pointer to an object so that it can change the value of that oject..</p>\n\n<p>In your specific case you pass a pointer to <code>x</code>:</p>\n\n<pre><code>scanf(\"%d\",&amp;x);\n           ^ address of x, i.e. a pointer to x\n</code></pre>\n\n<p>therefore <code>scanf</code> can change the value of <code>x</code> in the callee.</p>\n\n<p>In general you can say: <strong>If you pass a pointer to a local variable to a function, you also give that function the ability to change the value of that variable</strong></p>\n\n<p>That is a very important concept within C so it's something that you need to understand fully when doing C programs.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10155965, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Xisbk4gF6RI/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7q1ahtyWgCgkwJZqpDuIjGVjUr5vw/mo/photo.jpg?sz=128", "display_name": "Joshua W.", "link": "https://stackoverflow.com/users/10155965/joshua-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1533067452, "creation_date": 1533067452, "answer_id": 51621220, "question_id": 51620281, "link": "https://stackoverflow.com/questions/51620281/how-does-scanf-write-data-to-other-functions-stack-frames/51621220#51621220", "title": "How does scanf() write data to other functions&#39; stack frames?", "body": "<p>You're on the right track. Based on how you phrased your question, I think your understanding would be improved with some additional context on 1) how pointers work, and 2) how process memory is separated.</p>\n\n<p>I won't go into excessive detail, but hopefully this will clear things up for you.</p>\n\n<p>The variable <code>x</code> in your <code>main</code> function is stored in memory at some address. Then, you pass that address into <code>scanf</code> with <code>&amp;x</code>. <code>scanf</code> is allowed to make changes to that value at that address.</p>\n\n<p>It's possible you may also be wondering why this is allowed. Shouldn't memory be protected so that not anything can change it? This is true as well. However, in the example you provided, <code>main</code> and <code>scanf</code> are being called by the same process. Among processes, yes, there will be more protection around what memory can be touched. As you continue to work with C, you'll run into segmentation faults, which is when the program crashes because a disallowed memory access occurs.</p>\n\n<p>In your example above, you have one process running and so any lines of code that execute within that process will have access to that process's memory.</p>\n\n<p>This resource on pointers may help: <a href=\"https://users.cs.cf.ac.uk/Dave.Marshall/C/node10.html\" rel=\"nofollow noreferrer\">https://users.cs.cf.ac.uk/Dave.Marshall/C/node10.html</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10162211, "user_type": "registered", "profile_image": "https://graph.facebook.com/2025348340817665/picture?type=large", "display_name": "Derek Nobbe", "link": "https://stackoverflow.com/users/10162211/derek-nobbe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 51620886, "answer_count": 3, "score": -1, "last_activity_date": 1533071122, "creation_date": 1533063480, "last_edit_date": 1533071122, "question_id": 51620281, "link": "https://stackoverflow.com/questions/51620281/how-does-scanf-write-data-to-other-functions-stack-frames", "title": "How does scanf() write data to other functions&#39; stack frames?", "body": "<p>I understand how to use <code>scanf()</code>, but I'm having difficulty understanding how <code>scanf()</code> gains access to other functions and their stack frames. I know <code>scanf()</code> must be provided with an address to write data to, but I thought each function had its own private data located in its own stack frame.\nFor example, take the simple program segment</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n int x;\n x = 2;\n scanf(\"%d\",&amp;x);\n printf(\"%d\",x);\n}\n</code></pre>\n\n<p>In this program, <code>main</code> has its own stack frame where local variable <code>x</code> is initialized to 2. My understanding is that <code>scanf()</code> also has its own stack frame. I know <code>scanf()</code> is given the address of <code>x</code>, but how is <code>scanf()</code> allowed to change data in <code>main</code>'s stack frame?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1533063380, "post_id": 51620064, "comment_id": 90206012, "body": "Can&#39;t reproduce. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, please.."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1533063533, "post_id": 51620064, "comment_id": 90206082, "body": "This code compiles OK on any of the compilers I use. Does not matter if compiled as C or C++"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533063643, "post_id": 51620064, "comment_id": 90206129, "body": "if codewarrior does not compile - it means that is not 100% C or C++ or the error is in the code you do not show"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1533063777, "post_id": 51620064, "comment_id": 90206178, "body": "do not use this kind of bool definitions. Use standard bool header. It is extremely error prone."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1533065499, "post_id": 51620064, "comment_id": 90206966, "body": "@Bathsheba It&#39;s more like reserved. Making any thread with P__J__ undefined :)"}, {"owner": {"reputation": 715, "user_id": 4725969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0a88f1639e69ab574d2582412e853ab?s=128&d=identicon&r=PG&f=1", "display_name": "Jani", "link": "https://stackoverflow.com/users/4725969/jani"}, "edited": false, "score": 0, "creation_date": 1553009634, "post_id": 51620064, "comment_id": 97222353, "body": "Beware of using signed types for 1-bit bitfields. In two&#39;s complement it&#39;ll be able to hold values 0 and -1. It&#39;s implementation defined whether Bool_t in the example is signed or not, but if it it&#39;s signed, the 1-bit bitfield can&#39;t be BOOL__TRUE. Similarly, assigning basically any even value (like 2) to the field will lead to BOOL__FALSE, which is probably not what you&#39;d expect. You&#39;ll end up needing to manually clamp values to your boolean type using, say, !!val. Use stdbool and these problems will go away."}], "answers": [{"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 7, "creation_date": 1533558483, "post_id": 51625085, "comment_id": 90376066, "body": "<code>In general, bit-field structs are of little use in C</code> very interesting. Where did you get this from?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1533558705, "post_id": 51625085, "comment_id": 90376178, "body": "@P__J__ Over 30 years of practice in C, detailed knowledge about the C standard and compiler construction vor various languages, a plethora of C ABIs for multiple CPUs and well paid projects by customers who tend to come to me if someonme messed their code up - not only, but including missconceptions about bitmap <code>struct</code>s. I wouldn&#39;t call it &quot;intertesting&quot; anymore; it&#39;s just sad. But thanks for the revenge downvote! Playing kindergarten?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 9, "creation_date": 1533559112, "post_id": 51625085, "comment_id": 90376492, "body": "@toohonestforthissite so please write the leeter to the microchip or other uC companies as often they make it the most used way of the hardware register access (maybe they do no have 30years of experience ad they did not know that <code>bit-field structs are of little use in C</code>) Bitfields are in very common use. If you do not use them that is only your personal choice. Your nitpicking is a kindergarten play"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 2, "creation_date": 1533559375, "post_id": 51625085, "comment_id": 90376665, "body": "@P__J__: Interstingly, most MCU headers use normal <code>uintN_t</code> pointers and bitops. But I wouldn&#39;t use them as a strong referencee, as they are typically written by students the cheap way. I&#39;ve met quite some of them - nice people most of them, but rarely experts in the C language (interstingly two or three of the fix-it projects were exactly for such BSPs). But, hey, of course you know better! Just that: maybe you read about the difference of &quot;no use&quot; and &quot;little use&quot;. Now, you have the last word, I&#39;ve better to do, like jumping into the pool."}, {"owner": {"reputation": 233, "user_id": 1950725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rE1xn.jpg?s=128&g=1", "display_name": "Torsten Knodt", "link": "https://stackoverflow.com/users/1950725/torsten-knodt"}, "edited": false, "score": 0, "creation_date": 1540240805, "post_id": 51625085, "comment_id": 92784004, "body": "Sorry for not looking into it that long and many thanks for your explanation. I accept the answer, because it explains the error message, which is what the question was about. But I also asked myself why they introduced <code>Bool_t</code> instead of using <code>stdbool.h</code>. The answer is, that it is implemented using pre-processor <code>#define</code>, which is not type-safe. But ISO 26262-6:2011 (Road vehicles -- Functional safety -- Part 6: Product development at the software level) &quot;highly recommends&quot; &quot;enforcement of strong typing&quot;. So they replaced it with an own <code>enum</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 233, "user_id": 1950725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rE1xn.jpg?s=128&g=1", "display_name": "Torsten Knodt", "link": "https://stackoverflow.com/users/1950725/torsten-knodt"}, "edited": false, "score": 0, "creation_date": 1615049407, "post_id": 51625085, "comment_id": 117573945, "body": "@TorstenKnodt After doing a MISRA/AUTOSAR automotive project, I can assertain you that such homebrew macros are plain legacies and clearly not related to strong typing. On a sidenote: C is by standard not strongly typed and you definitively cannt do that using &#180;enum&#180;s. Opposite, this makes things even worse. Said that, many such coding styles are pre-C99 crap, and solely still maintained because of many legacies and devs who did not go forward the last 20+ years. Yes, that is a harsh judegement, but at least for Embedded - more particularily Automotive - this is unfortunately well justified."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": true, "score": -4, "last_activity_date": 1533095693, "last_edit_date": 1533095693, "creation_date": 1533095310, "answer_id": 51625085, "question_id": 51620064, "link": "https://stackoverflow.com/questions/51620064/why-does-an-enumeration-value-which-is-part-of-a-bit-field-require-an-implici/51625085#51625085", "title": "Why does an enumeration value, which is part of a bit-field, require an (implicit) type-cast from unsigned char to the enum type?", "body": "<p>Your compiler is correct:</p>\n\n<blockquote>\n  <p>C standard, 6.7.2.2p4: \"Each enumerated type shall be compatible with char, a signed integer type, or an unsigned integer type. The choice of type is implementation-defined,but shall be capable of representing the values of all the members of the enumeration.\"</p>\n</blockquote>\n\n<p>Your implementation seems to use some internal type to represent the enum type, which is valid.</p>\n\n<p>Also see</p>\n\n<blockquote>\n  <p>6.7.2.1p10: \"A bit-field is interpreted as having a signed or unsigned integer type consisting of the specified number of bits.\"</p>\n</blockquote>\n\n<p>Using an <code>unsigned char</code> for the bit field is valid.</p>\n\n<p>In general is it bad practice to use homebrew typedefs if standard types are available. C has a mandatory boolean type <code>_Bool</code> (resp. <code>bool</code> with supporting constant-macros using <code>stdbool.h</code>) which has the expected semantics (different from <code>enum</code>s). Using it would have avoided the problems and is also portable between implementations.</p>\n\n<p>In general, bit-field <code>struct</code>s are of little use in C. There is no defined layout, underlying or other guarantees which might be expected. Most times a fixed-width integer type and bit-ops is the better choice. Interestingly, <code>_Bool</code> bit-fields are the type with most guarantees. So using this standard type would have avoided the problem.</p>\n"}], "owner": {"reputation": 233, "user_id": 1950725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rE1xn.jpg?s=128&g=1", "display_name": "Torsten Knodt", "link": "https://stackoverflow.com/users/1950725/torsten-knodt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 51625085, "answer_count": 1, "score": 1, "last_activity_date": 1533095693, "creation_date": 1533062512, "last_edit_date": 1533094345, "question_id": 51620064, "link": "https://stackoverflow.com/questions/51620064/why-does-an-enumeration-value-which-is-part-of-a-bit-field-require-an-implici", "title": "Why does an enumeration value, which is part of a bit-field, require an (implicit) type-cast from unsigned char to the enum type?", "body": "<p>This question is for NXP/ FreeScale CodeWarrior MCU 10.5.\nWhy does the following code extract result in the warning <code>illegal implicit conversion from 'unsigned char' to &gt;'const @enum$1cb_c'</code> on the last line?</p>\n\n<pre><code>typedef enum { BOOL__FALSE, BOOL__TRUE } Bool_t;\n\ntypedef struct a { Bool_t b : 1; } a_t;\n\nvoid d (Bool_t e);\n\na_t c = { BOOL__FALSE };\n\nd ( c.b );\n</code></pre>\n"}, {"tags": ["c", "getaddrinfo"], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1533063106, "creation_date": 1533063106, "answer_id": 51620199, "question_id": 51619572, "link": "https://stackoverflow.com/questions/51619572/getaddrinfo-ignores-trailing-data/51620199#51620199", "title": "getaddrinfo ignores trailing data?", "body": "<p><code>getaddrinfo</code> is probably the best function to use for your purpose, but as far as I can tell, it does not guarantee to reject invalid node identifiers.  I am therefore uncertain whether it's a feature or a bug that it ignores the trailing garbage in your problem case.</p>\n\n<p>Nevertheless, you don't necessarily need to cobble together separate validations.  Consider instead making the one you've already found stronger.  For example, follow up the <code>getaddrinfo</code> by checking whether you can convert one of the <code>sockaddr</code> structures it returns back to the node identifier.  <code>getnameinfo</code> is the complement to <code>getaddrinfo</code>, and it can help for the node name case.  <code>inet_ntop</code> can help for the numerical address case (both IPv4 and IPv6, though there are additional complications in the IPv6 case).  Such a procedure might also help you choose which addrinfo to use when there is more than one.</p>\n"}], "owner": {"reputation": 197, "user_id": 1003231, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dfd95502fe9bbcf5f9fca380014372bb?s=128&d=identicon&r=PG", "display_name": "Underhill", "link": "https://stackoverflow.com/users/1003231/underhill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533063106, "creation_date": 1533060552, "question_id": 51619572, "link": "https://stackoverflow.com/questions/51619572/getaddrinfo-ignores-trailing-data", "title": "getaddrinfo ignores trailing data?", "body": "<p>Scenario: command line arguments need to be validated and converted to a socket/TCP addresses. The arguments can be any mix of IPv4 addresses, IPv6 addresses, and host-names.</p>\n\n<p>Currently we're using getaddrinfo. It picks up every error I can think of except one case : a valid IPv4 address followed by some trash.</p>\n\n<p>Example: \"127.0.0.1  abc\"\n(argument enclosed in quotes, so C sees a single string.).</p>\n\n<p>Any suggestions on how to get around this? Is there an alternative to getaddrinfo() that detects errors more consistently? Is there some standard validation routine that should be called prior to getaddrinfo?</p>\n\n<p>Or am I stuck cobbling together validations that may be incomplete?</p>\n"}, {"tags": ["c", "dwm"], "comments": [{"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1533062837, "post_id": 51619556, "comment_id": 90205789, "body": "Take a look at the <a href=\"http://man7.org/linux/man-pages/man2/fork.2.html\" rel=\"nofollow noreferrer\">man page for <code>fork()</code></a>. Your program is designed to run copies of itself asynchronously."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1533067555, "post_id": 51619556, "comment_id": 90207964, "body": "You are halfway there with <code>fork()</code>. Now read about <a href=\"http://man7.org/linux/man-pages/man2/waitpid.2.html\" rel=\"nofollow noreferrer\"><code>wait()</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 563, "user_id": 6834500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f79b0805a6a8a9045834e71a81f08539?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy", "link": "https://stackoverflow.com/users/6834500/evgeniy"}, "edited": false, "score": 0, "creation_date": 1533119150, "post_id": 51621313, "comment_id": 90226024, "body": "Thank you for clarification but when I try to add <code>wait</code>, the application becomes unresponsive. It seems like no state has been changed. When I tried to remove <code>fork</code> at all, dwm stopped working. dwm is not my application, it is a window manager. That is why I have no idea what to do, let alone, I am total noob in C."}, {"owner": {"reputation": 563, "user_id": 6834500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f79b0805a6a8a9045834e71a81f08539?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy", "link": "https://stackoverflow.com/users/6834500/evgeniy"}, "edited": false, "score": 0, "creation_date": 1533125165, "post_id": 51621313, "comment_id": 90229796, "body": "I did some investigation. It does not work because the child process do not reach the <code>exit</code> function when I am trying to call say &quot;chromium&quot; or &quot;thunar&quot;. When the command is &quot;ls&quot;, all works as expected. How can I catch &quot;open&quot; event, not &quot;termination&quot;?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 563, "user_id": 6834500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f79b0805a6a8a9045834e71a81f08539?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy", "link": "https://stackoverflow.com/users/6834500/evgeniy"}, "edited": false, "score": 0, "creation_date": 1533147472, "post_id": 51621313, "comment_id": 90244115, "body": "@Evgeniy the wait waits for the child process to exit. In your case since it is chrome browser, it doesn&#39;t exit till it is closed. But a process lile ls or cat exits immediately after printing and hence the parent continues. There is no &quot;open&quot;. The child process it created at the fork itself. If you just want to wait for the gui of the new process to be spawned, that depends on process to process. Really your dwm should not be synchronous. Once a new process is started jt should just continue with rest of it&#39;s work."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 563, "user_id": 6834500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f79b0805a6a8a9045834e71a81f08539?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy", "link": "https://stackoverflow.com/users/6834500/evgeniy"}, "edited": false, "score": 0, "creation_date": 1533147547, "post_id": 51621313, "comment_id": 90244161, "body": "Your solution could be a simple sleep for a few seconds but you can never actually know how much time it takes to spawn the window for a particular application."}, {"owner": {"reputation": 563, "user_id": 6834500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f79b0805a6a8a9045834e71a81f08539?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy", "link": "https://stackoverflow.com/users/6834500/evgeniy"}, "edited": false, "score": 0, "creation_date": 1533215470, "post_id": 51621313, "comment_id": 90272395, "body": "I got it. Yes, it is possible to use timer but I do not want to. Although you answer does not solve my problem, I think it solves the asked question."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": true, "score": 1, "last_activity_date": 1533067836, "creation_date": 1533067836, "answer_id": 51621313, "question_id": 51619556, "link": "https://stackoverflow.com/questions/51619556/how-to-call-shell-command-synchronously/51621313#51621313", "title": "How to call shell command synchronously?", "body": "<p>If you read the manual for <a href=\"http://man7.org/linux/man-pages/man2/fork.2.html\" rel=\"nofollow noreferrer\"><code>fork()</code></a>, you will realize the it creates a copy of the running process.</p>\n\n<p>After the fork both the processes are independent of each other and may get scheduled in any order. This is the asynchronous behaviour you are seeing.</p>\n\n<p>To get a synchronous behavior your parent process needs to wait till the forked process has completed (exits). This has be achieved using the <a href=\"http://man7.org/linux/man-pages/man2/waitpid.2.html\" rel=\"nofollow noreferrer\"><code>wait()</code></a> system call.</p>\n\n<p>You can modify your <code>spawn</code> function as - </p>\n\n<pre><code>void\nspawn(const Arg *arg) \n{\n    if (arg-&gt;v == dmenucmd)\n        dmenumon[0] = '0' + selmon-&gt;num;\n    if (fork() == 0) {\n        if (dpy)\n            close(ConnectionNumber(dpy));\n        setsid();\n        execvp(((char **)arg-&gt;v)[0], (char **)arg-&gt;v);\n        fprintf(stderr, \"dwm: execvp %s\", ((char **)arg-&gt;v)[0]);\n        perror(\" failed\");\n        exit(EXIT_SUCCESS);\n    } else { // fork returns a non zero pid in the parent process. So the else branch will be taken only in the parent. \n        wait(NULL); // Wait for the child process to change state. In this case exit\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 563, "user_id": 6834500, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f79b0805a6a8a9045834e71a81f08539?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeniy", "link": "https://stackoverflow.com/users/6834500/evgeniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 51621313, "answer_count": 1, "score": 0, "last_activity_date": 1533067836, "creation_date": 1533060490, "question_id": 51619556, "link": "https://stackoverflow.com/questions/51619556/how-to-call-shell-command-synchronously", "title": "How to call shell command synchronously?", "body": "<p>I am trying to teach dwm to open appropriate application in each tag (www, files, music...). In dwm.c there is a function called <code>view</code> that is responsible for tag switching.</p>\n\n<pre><code>void\nview(const Arg *arg)\n{\n    if ((arg-&gt;ui &amp; TAGMASK) == selmon-&gt;tagset[selmon-&gt;seltags])\n        return;\n    /* toggle sel tagset */\n    selmon-&gt;seltags ^= 1;\n    if (arg-&gt;ui &amp; TAGMASK)\n        selmon-&gt;tagset[selmon-&gt;seltags] = arg-&gt;ui &amp; TAGMASK;\n\n    // user specific edit\n    prepareTag(arg-&gt;ui);\n\n    focus(NULL);\n    arrange(selmon);\n}\n</code></pre>\n\n<p>I have added a line where <code>prepareTag</code> is called. This function has simple logic and do nothing else than a few verifications (is application already open?; what tag is it?) and the application spawn itself.</p>\n\n<pre><code>void\nspawn(const Arg *arg)\n{\n    if (arg-&gt;v == dmenucmd)\n        dmenumon[0] = '0' + selmon-&gt;num;\n    if (fork() == 0) {\n        if (dpy)\n            close(ConnectionNumber(dpy));\n        setsid();\n        execvp(((char **)arg-&gt;v)[0], (char **)arg-&gt;v);\n        fprintf(stderr, \"dwm: execvp %s\", ((char **)arg-&gt;v)[0]);\n        perror(\" failed\");\n        exit(EXIT_SUCCESS);\n    }\n}\n</code></pre>\n\n<p>It works but the code goes asynchronously. The tag is changed and I see my wallpaper, than after ~20-50ms the application is started. It causes notable flicker. The problem is I have never worked with C and do not know the reason why the code work asynchronously. I have tried <code>system</code> function instead of built-in <code>spawn</code> but dwm do not catch applications open this way. I could probably use key binder and some BASHing but the way is quite dirty. Not to mention, I would like to have an ability to use mouse buttons to change tag.</p>\n\n<p>In case someone need code base.</p>\n\n<pre><code>git clone https://git.suckless.org/dwm\n</code></pre>\n"}, {"tags": ["c", "multithreading"], "comments": [{"owner": {"reputation": 446, "user_id": 888624, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/392039c3c5ee1f883b68b52edf8413bf?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/888624/chris"}, "edited": false, "score": 0, "creation_date": 1533059460, "post_id": 51619253, "comment_id": 90204123, "body": "T2 requested the lock first and is blocking on it, why would you want T3 to get priority?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1533059507, "post_id": 51619253, "comment_id": 90204145, "body": "The specification says more than just that.  It also talks about the <code>Thread Execution Scheduling</code> which comes into play here."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 446, "user_id": 888624, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/392039c3c5ee1f883b68b52edf8413bf?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/888624/chris"}, "edited": false, "score": 0, "creation_date": 1533059733, "post_id": 51619253, "comment_id": 90204272, "body": "@Chris Multiple readers can hold a rw lock concurrently, so one possible scheduling methodology would allow a second reader to come in and acquire the lock while the first reader has the lock even if a writer is waiting to acquire the lock.  It is more efficient overall as you can avoid waiting time in the second reader, but can lead to writer-starvation if there&#39;s a continuous stream of readers coming in and acquiring the lock without any breaks."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1533060261, "post_id": 51619253, "comment_id": 90204518, "body": "T3 calls pthread_rwlock_rdlock() <b>and waits because T2 is blocked on the lock</b>. T1 calls pthread_rwlock_unlock() <b>and T2 acquires the lock</b>."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1533062356, "post_id": 51619253, "comment_id": 90205541, "body": "T3 could call <code>pthread_rwlock_tryrdlock</code> instead if it doesn&#39;t want to block in case the lock isn&#39;t acquired."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 2, "creation_date": 1533071947, "post_id": 51619253, "comment_id": 90209856, "body": "Re, &quot;...I hope yes.&quot; Most developers would hope &quot;no&quot; because an application that benefits from reader/writer locks could have so many readers that, for long intervals, there is never a moment when no readers want the lock. If it worked the way you hoped, then that would mean long intervals during which writers get no chance to write. That&#39;s the <i><a href=\"https://en.wikipedia.org/wiki/Starvation_(computer_science)\" rel=\"nofollow noreferrer\">starvation</a></i> that @ChristianGibbons mentioned. Most practical reader/writer lock implementations try to balance the needs of the many readers with the needs of the occasional writer."}], "answers": [{"tags": [], "owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "is_accepted": false, "score": 4, "last_activity_date": 1533062125, "last_edit_date": 1533062125, "creation_date": 1533060639, "answer_id": 51619598, "question_id": 51619253, "link": "https://stackoverflow.com/questions/51619253/pthread-rwlock-rdlock-and-pthread-rwlock-wrlock/51619598#51619598", "title": "pthread_rwlock_rdlock() and pthread_rwlock_wrlock()", "body": "<p>If Thread Execution Scheduling is supported, you should be able to choose how this works.  From the man page on <code>pthread_rwlock_rdlock</code>: </p>\n\n<blockquote>\n  <p>If  the Thread Execution Scheduling option is supported, and the threads involved in the lock are executing with the scheduling\n  policies SCHED_FIFO or SCHED_RR, the calling thread shall not acquire\n  the lock if a writer holds\n         the lock or if writers of higher or equal priority are blocked on the lock; otherwise, the calling thread shall acquire the lock.</p>\n  \n  <p>If the Threads Execution Scheduling option is supported, and the threads involved in the lock are executing with the SCHED_SPORADIC\n  scheduling policy, the calling thread shall not acquire the lock if a\n  writer holds the  lock\n         or if writers of higher or equal priority are blocked on the lock; otherwise, the calling thread shall acquire the lock.</p>\n</blockquote>\n\n<p>Otherwise it is implementation defined: </p>\n\n<blockquote>\n  <p>If  the  Thread  Execution  Scheduling  option  is not supported, <strong>it is implementation-defined whether the calling thread\n  acquires the lock when a writer does not hold the lock and there are\n  writers blocked on the lock.</strong> If a\n         writer holds the lock, the calling thread shall not acquire the read lock. If the read lock is not acquired, the calling thread shall\n  block until it can acquire the lock.  The calling thread may deadlock\n  if at the  time  the\n         call is made it holds a write lock.</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 5999109, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rx8mbOAkaD8/AAAAAAAAAAI/AAAAAAAAADg/kJKwQoWwceQ/photo.jpg?sz=128", "display_name": "Lorenzo Carfagna", "link": "https://stackoverflow.com/users/5999109/lorenzo-carfagna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 786, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1555402076, "creation_date": 1533059304, "last_edit_date": 1555402076, "question_id": 51619253, "link": "https://stackoverflow.com/questions/51619253/pthread-rwlock-rdlock-and-pthread-rwlock-wrlock", "title": "pthread_rwlock_rdlock() and pthread_rwlock_wrlock()", "body": "<p>I can't understand a thing in the specification of the behaviour of these functions.   </p>\n\n<p>Imagine this scenario:<br>\nT1,T2 and T3 are the names of the threads.<br>\nExecute operations in series.    </p>\n\n<pre><code>    T1 calls pthread_rwlock_rdlock().\n    T2 calls pthread_rwlock_wrlock() and wait because \n    rwlock is hold by T1.\n    T3 calls pthread_rwlock_rdlock().\n    T1 calls pthread_rwlock_unlock().\n</code></pre>\n\n<p>What's up next?</p>\n\n<p>The specification says this:<br>\n\"The calling thread acquires the read lock if a writer does not hold the lock and there are no writers blocked on the lock\"</p>\n\n<p>I can't undestand if T3 will take the rwlock before T2.<br>\nI hope yes.<br>\nCan you solve my problem?</p>\n"}, {"tags": ["c", "preprocessor"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1533058904, "post_id": 51619115, "comment_id": 90203854, "body": "Nope, not possible. Can be done with a good text editor."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1533058907, "post_id": 51619115, "comment_id": 90203855, "body": "Without copy and replace?  Yes, may be able to use string merging <code>##</code> to do this, but I get really jumpy when I see stuff like this."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 1, "creation_date": 1533059040, "post_id": 51619115, "comment_id": 90203912, "body": "To follow up, you don&#39;t include the &quot;void &quot; in your macro, but just ## an underscore to the beginning of the passed in value."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1533059533, "post_id": 51619115, "comment_id": 90204160, "body": "You can achieve something similar to what you want by writing a <code>TRANSFORM_FUNC</code> macro which is implemented using the <code>#</code> operator inside.  So, in your code you&#39;d write something like: <code>TRANSFORM_FUNC(func)</code> and the prepocessor could generate the <code>void _func</code> for you.  See this amazing answer for more details: <a href=\"https://stackoverflow.com/a/45376462/1212725\">stackoverflow.com/a/45376462/1212725</a>"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1533060470, "post_id": 51619115, "comment_id": 90204625, "body": "good luck when you start debugging it :)"}], "owner": {"reputation": 1075, "user_id": 3584262, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/136ced4c4b2bb8f35d2f7701a6d5fbe7?s=128&d=identicon&r=PG&f=1", "display_name": "hacksoi", "link": "https://stackoverflow.com/users/3584262/hacksoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "closed_date": 1533058965, "answer_count": 0, "score": 0, "last_activity_date": 1533058827, "creation_date": 1533058724, "last_edit_date": 1533058827, "question_id": 51619115, "link": "https://stackoverflow.com/questions/51619115/c-preprocessor-whitespace-in-define", "closed_reason": "Duplicate", "title": "C Preprocessor - whitespace in #define?", "body": "<p>I want to transform</p>\n\n<pre><code>void func(\n</code></pre>\n\n<p>into</p>\n\n<pre><code>void _func(\n</code></pre>\n\n<p>I tried this:</p>\n\n<pre><code>#define void\\ func( void _func(\n</code></pre>\n\n<p>but I get an error: </p>\n\n<pre><code>test.c(1): error C2008: '\\': unexpected in macro definition\n</code></pre>\n\n<p>Is this even possible?</p>\n"}, {"tags": ["python", "c", "segmentation-fault", "libc", "python-c-api"], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 4467301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/676945dd79fafb047bc5ce5dd7b8fa9d?s=128&d=identicon&r=PG&f=1", "display_name": "Tachikoma", "link": "https://stackoverflow.com/users/4467301/tachikoma"}, "edited": false, "score": 0, "creation_date": 1533405748, "post_id": 51645267, "comment_id": 90338431, "body": "Actually I thought about the <code>dlopen</code> issue and I had written a small test case (see edited question) and that one does not fail. But I guess I&#39;ll have to rename the <code>error</code> function somehow."}, {"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "reply_to_user": {"reputation": 139, "user_id": 4467301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/676945dd79fafb047bc5ce5dd7b8fa9d?s=128&d=identicon&r=PG&f=1", "display_name": "Tachikoma", "link": "https://stackoverflow.com/users/4467301/tachikoma"}, "edited": false, "score": 1, "creation_date": 1533411958, "post_id": 51645267, "comment_id": 90339878, "body": "@Tachikoma Answer updated: you likely made a mistake in <i>building</i> your test."}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 2, "last_activity_date": 1533411923, "last_edit_date": 1533411923, "creation_date": 1533182266, "answer_id": 51645267, "question_id": 51619095, "link": "https://stackoverflow.com/questions/51619095/python-c-api-call-to-error-binds-to-libc-implementation-instead-of-a-local-one/51645267#51645267", "title": "Python C API call to error() binds to libc implementation instead of a local one", "body": "<blockquote>\n  <p>this is an issue I have with some third-party software on which I have little control.</p>\n</blockquote>\n\n<p>If you have sources for this third_party software, you can edit them, or use macro tricks to rename the function, e.g. <code>-Derror=foo_error</code>.</p>\n\n<p>If you only have an archive library, use <code>objcopy --redefine-symbol ...</code>.</p>\n\n<p>If you only have a shared library, I don't know of a workable solution.</p>\n\n<blockquote>\n  <p>Does it have to do with the way Python loads shared libraries ?</p>\n</blockquote>\n\n<p>Kind of. What's happening is that the dynamic loader resolves a reference to <code>error</code>  to the earliest <em>exported</em> definition of that function.</p>\n\n<p>When you link <code>error</code> into your main <code>a.out</code>, that definition is the first in linker search order, so it \"wins\".</p>\n\n<p>When you use <code>dlopen</code> to load <code>libfoo.so</code> which contains <code>error</code> (which is what Python does for <code>import</code>), that library is loaded <em>after</em> <code>libc.so.6</code>, which means that <code>libc.so.6</code> appears earlier in the loader search order, and its definition \"wins\".</p>\n\n<p>You don't need Python to see this: write a trivial test that uses <code>dlopen</code>, and the same problem will show up in it.</p>\n\n<p><strong>Update:</strong></p>\n\n<blockquote>\n  <p>I had written a small test case</p>\n</blockquote>\n\n<p>Your test case <em>does</em> confirm my answer. You probably didn't build it correctly.</p>\n\n<pre><code>$ gcc -fPIC -shared -o libtest.so test.c\n$ gcc main.c -ldl \n</code></pre>\n\n<p>Here the \"wrong\" <code>error</code> is called because the order of library loading is: <code>a.out</code>, <code>libc.so.6</code>, <em>then</em> <code>libtest.so</code>:</p>\n\n<pre><code>$ ./a.out\n./a.out: UH\ufffd\ufffdH\ufffd=\ufffd: Unknown error 640192728\n</code></pre>\n\n<p>But what you probably did was this:</p>\n\n<pre><code>$ gcc main.c ./libtest.so -ldl\n</code></pre>\n\n<p>Here the order of library loading is <code>a.out</code>, <code>libtest.so</code> (because <code>a.out</code> <em>directly</em> depends on <code>libtest.so</code>), <em>then</em> <code>libc.so.6</code>, and the \"right\" <code>error</code> gets called:</p>\n\n<pre><code>$ ./a.out\nHi there\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 4467301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/676945dd79fafb047bc5ce5dd7b8fa9d?s=128&d=identicon&r=PG&f=1", "display_name": "Tachikoma", "link": "https://stackoverflow.com/users/4467301/tachikoma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 51645267, "answer_count": 1, "score": 2, "last_activity_date": 1533411923, "creation_date": 1533058621, "last_edit_date": 1592644375, "question_id": 51619095, "link": "https://stackoverflow.com/questions/51619095/python-c-api-call-to-error-binds-to-libc-implementation-instead-of-a-local-one", "title": "Python C API call to error() binds to libc implementation instead of a local one", "body": "<h1>EDITTED</h1>\n<p>See at end of post for edit in response to <a href=\"https://stackoverflow.com/a/51645267/4467301\">Employed Russian</a>'s comment</p>\n<h3>Disclaimer\u00a0</h3>\n<p>Before going forward, I know that naming a function <code>error</code> is generally bad practice since it may clash with a similar function in libc, but this is an issue I have with some third-party software on which I have little control.\nPlus I would really like to understand where this error comes from :-)</p>\n<h1>The issue</h1>\n<p>The problem I have is that the code below, when executed through the Python interpreter instead of calling my local implementation of the <code>error</code> function, is actually calling the libC's <code>error</code> function instead (as shown by GDB's stack trace below).</p>\n<p>When simply compiling the same code within another C program, I do not have such issues. Does someone knows where that comes from ? Does it have to do with the way Python loads shared libraries ?</p>\n<h1>MCVE</h1>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;Python.h&gt;\n\nstatic PyObject* call_error(PyObject *self, PyObject *args);\nstatic PyMethodDef module_methods[] = {\n     {&quot;error&quot;, call_error, METH_NOARGS, &quot;call error&quot;},\n     {NULL, NULL, 0, NULL}\n};\n\nstatic struct PyModuleDef module_defs = {\n     PyModuleDef_HEAD_INIT,\n     &quot;Test&quot;, &quot;Test&quot;, -1, module_methods, NULL, NULL, NULL, NULL};\n\nPyObject* PyInit_Test(void)\n{\n     PyObject *module = PyModule_Create(&amp;module_defs);\n     return module;\n}\n\nvoid error(const char* fmt, ...);\n\nPyObject* call_error(PyObject *self, PyObject *args)\n{\n     error(&quot;Error!&quot;);\n     Py_RETURN_NONE;\n}\n\nvoid error(const char* fmt, ...)\n{\n     va_list ap;\n     va_start(ap, fmt);\n     vprintf(fmt, ap);\n     va_end(ap);\n}\n</code></pre>\n<h1>GDB output</h1>\n<p>Here is the output of importing running the above code within GDB using <code>python3 -c &quot;import Test; Test.error()&quot;</code></p>\n<pre><code>GNU gdb (Ubuntu 8.1-0ubuntu3) 8.1.0.20180409-git\nCopyright (C) 2018 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;\nand &quot;show warranty&quot; for details.\nThis GDB was configured as &quot;x86_64-linux-gnu&quot;.\nType &quot;show configuration&quot; for configuration details.\nFor bug reporting instructions, please see:\n&lt;http://www.gnu.org/software/gdb/bugs/&gt;.\nFind the GDB manual and other documentation resources online at:\n&lt;http://www.gnu.org/software/gdb/documentation/&gt;.\nFor help, type &quot;help&quot;.\nType &quot;apropos word&quot; to search for commands related to &quot;word&quot;...\nReading symbols from python3...(no debugging symbols found)...done.\n(gdb) r -c 'import Test; Test.error()'\nStarting program: /usr/bin/python3 -c 'import Test; Test.error()'\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library &quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;.\n/usr/bin/python3:\nProgram received signal SIGSEGV, Segmentation fault.\n__strchrnul_sse2 () at ../sysdeps/x86_64/multiarch/../strchr.S:32\n32  ../sysdeps/x86_64/multiarch/../strchr.S: No such file or directory.\n(gdb) where\n#0  __strchrnul_sse2 () at ../sysdeps/x86_64/multiarch/../strchr.S:32\n#1  0x00007ffff6c2c432 in __find_specmb (format=0x4 &lt;error: Cannot access memory at\n#     address 0x4&gt;) at printf-parse.h:108\n#2  _IO_vfprintf_internal (s=0x7fffffffae60, format=0x4 &lt;error: Cannot access memory at \n#     address 0x4&gt;, ap=0x7fffffffd5b0) at vfprintf.c:1320\n#3  0x00007ffff6c2f680 in buffered_vfprintf (s=s@entry=0x7ffff6fbd680 &lt;_IO_2_1_stderr_&gt;,\n#     format=format@entry=0x4 &lt;error: Cannot access memory at address 0x4&gt;,\n#     args=args@entry=0x7fffffffd5b0) at vfprintf.c:2329\n#4  0x00007ffff6c2c726 in _IO_vfprintf_internal (s=0x7ffff6fbd680 &lt;_IO_2_1_stderr_&gt;,\n#     format=format@entry=0x4 &lt;error: Cannot access memory at address 0x4&gt;, \n#     ap=ap@entry=0x7fffffffd5b0) at vfprintf.c:1301\n#5  0x00007ffff6cef9bb in error_tail (status=status@entry=-161613509, \n#     errnum=errnum@entry=0, message=message@entry=0x4 &lt;error: Cannot access memory at \n#     address 0x4&gt;, args=args@entry=0x7fffffffd5b0) at error.c:271\n#6  0x00007ffff6cefb3d in __error (status=-161613509, errnum=0, message=0x4 \n#     &lt;error: Cannot access memory at address 0x4&gt;) at error.c:321\n#7  0x00007ffff65df82e in call_error (self=0x7ffff67f3548, args=0x0) at test.c:24\n#8  0x00000000004c5352 in _PyCFunction_FastCallKeywords ()\n#9  0x000000000054ffe4 in ?? ()\n#10 0x00000000005546cf in _PyEval_EvalFrameDefault ()\n#11 0x000000000054fbe1 in ?? ()\n#12 0x0000000000550b93 in PyEval_EvalCode ()\n#13 0x000000000042c4ca in PyRun_SimpleStringFlags ()\n#14 0x0000000000441918 in Py_Main ()\n#15 0x0000000000421ff4 in main ()\n</code></pre>\n<h1>EDIT</h1>\n<p>I did think about the <code>dlopen</code> issue with importing Python modules and actually the following code compiles and runs just fine and prints out:</p>\n<pre><code>&gt; ./main\nHi there\n</code></pre>\n<p><code>main.c</code></p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;dlfcn.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdarg.h&gt;\n\ntypedef void*(*arbitrary)();\n\nextern void error(const char* fmt, ...);\n\nint main(int argc, char **argv)\n{\n     void *handle;\n     arbitrary my_function;\n\n     handle = dlopen(&quot;./libtest.so&quot;, RTLD_LAZY | RTLD_GLOBAL);\n     if (!handle) {\n      fprintf(stderr, &quot;%s\\n&quot;, dlerror());\n      exit(EXIT_FAILURE);\n     }\n\n     dlerror();    /* Clear any existing error */\n\n     *(void**)(&amp;my_function) = dlsym(handle,&quot;foo&quot;);\n     (void) my_function();\n\n     // Note: binding using dlsym(handle, &quot;error&quot;) works too\n\n     dlclose(handle);\n     exit(EXIT_SUCCESS);\n}\n</code></pre>\n<p><code>test.c</code></p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdarg.h&gt;\n\nextern void error(const char* fmt, ...);\nextern void foo(void);\n\nvoid foo(void)\n{\n     error(&quot;Hi there\\n&quot;);\n}\n\nvoid error(const char* fmt, ...)\n{\n     va_list ap;\n     va_start(ap, fmt);\n     vprintf(fmt, ap);\n     va_end(ap);\n}\n</code></pre>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1533087533, "post_id": 51618801, "comment_id": 90213422, "body": "it&#39;s easy to guess since two of them are setting bit 31, and the ..READ is a value with bit 30 and 31 set"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10161807, "user_type": "registered", "profile_image": "https://graph.facebook.com/1859864724035836/picture?type=large", "display_name": "Uncle Fungus", "link": "https://stackoverflow.com/users/10161807/uncle-fungus"}, "edited": false, "score": 0, "creation_date": 1533199935, "post_id": 51618864, "comment_id": 90262204, "body": "Thanks Erlkoenig, perfect answer!"}], "tags": [], "owner": {"reputation": 2449, "user_id": 4730685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d2d8e67d9c0443c382d1dd80132063?s=128&d=identicon&r=PG&f=1", "display_name": "Erlkoenig", "link": "https://stackoverflow.com/users/4730685/erlkoenig"}, "is_accepted": true, "score": 1, "last_activity_date": 1533057620, "creation_date": 1533057620, "answer_id": 51618864, "question_id": 51618801, "link": "https://stackoverflow.com/questions/51618801/define-xxxxxx-bit0-linker-error/51618864#51618864", "title": "#define xxxxxx BIT(0) linker error", "body": "<p>Although the code should ship with a definition of BIT, I would guess that this is a suitable definition:</p>\n\n<pre><code>#define BIT(n) (1UL &lt;&lt; (n))\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10161807, "user_type": "registered", "profile_image": "https://graph.facebook.com/1859864724035836/picture?type=large", "display_name": "Uncle Fungus", "link": "https://stackoverflow.com/users/10161807/uncle-fungus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 51618864, "answer_count": 1, "score": 0, "last_activity_date": 1533078414, "creation_date": 1533057354, "last_edit_date": 1533078414, "question_id": 51618801, "link": "https://stackoverflow.com/questions/51618801/define-xxxxxx-bit0-linker-error", "title": "#define xxxxxx BIT(0) linker error", "body": "<p>I'm compiling someone else's code written in C using gcc ARM compiler for STM32F4 </p>\n\n<pre><code>#define ESC_CSR_CMD_BUSY         BIT(31)\n#define ESC_CSR_CMD_READ         (BIT(31) | BIT(30))\n#define ESC_CSR_CMD_WRITE        BIT(31)\n</code></pre>\n\n<p>and I get an error as it appears to not know what BIT(n) is.  </p>\n\n<blockquote>\n  <p>warning: implicit declaration of function 'BIT'; did you mean\n  '__RBIT'?</p>\n</blockquote>\n\n<p>is there a stdint file somewhere that defines what BIT is...? or an alternate way of writing this please.</p>\n"}, {"tags": ["c", "websocket", "libwebsockets"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1533265806, "post_id": 51618637, "comment_id": 90292798, "body": "I don&#39;t use <code>libwebsockets</code> myself, but I imagine the <code>6</code> might be related to the additional two byte header that&#39;s attached to small messages (less than 127 bytes long)... 2 byte header + 4 byte message =&gt; 6 bytes written."}], "answers": [{"tags": [], "owner": {"reputation": 2945, "user_id": 868247, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/PdJGv.jpg?s=128&g=1", "display_name": "Moop", "link": "https://stackoverflow.com/users/868247/moop"}, "is_accepted": false, "score": 0, "last_activity_date": 1535477880, "creation_date": 1535477880, "answer_id": 52063552, "question_id": 51618637, "link": "https://stackoverflow.com/questions/51618637/libwebsocket-how-to-sent-a-packet-on-client-connection/52063552#52063552", "title": "(libwebsocket) How to sent a packet on client connection", "body": "<p>According to the <a href=\"https://libwebsockets.org/lws-api-doc-master/html/group__sending-data.html#gafd5fdd285a0e25ba7e3e1051deec1001\" rel=\"nofollow noreferrer\">documents</a>, <code>lws_write()</code> requires that <code>LWS_PRE</code> bytes are available before the pointer you pass in to write. </p>\n\n<pre><code>char buf[LWS_PRE + 32];                           // buffer of any size plus the LWS_PRE\nlws_strncpy(&amp;buf[LWS_PRE], \"init\", 4);            // use their stncpy to null-terminate\nlws_write(wsi, &amp;buf[LWS_PRE], 4, LWS_WRITE_TEXT); // write from your buffer after LWS_PRE bytes.\n</code></pre>\n"}], "owner": {"reputation": 346, "user_id": 1252347, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0b9ee4c0b9cb40805c162a5804943815?s=128&d=identicon&r=PG", "display_name": "SteMMo", "link": "https://stackoverflow.com/users/1252347/stemmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 669, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535477880, "creation_date": 1533056659, "question_id": 51618637, "link": "https://stackoverflow.com/questions/51618637/libwebsocket-how-to-sent-a-packet-on-client-connection", "title": "(libwebsocket) How to sent a packet on client connection", "body": "<p>I'm developing a simple websocket server on Linux using libwebsocket lib.<br>\nI need to send an init packet on established event for every client connection.<br>\nIf I use </p>\n\n<pre><code>memcpy( p, \"init\", 4);\nlws_write(wsi, p, 4, LWS_WRITE_TEXT);\n</code></pre>\n\n<p>in </p>\n\n<pre><code>case LWS_CALLBACK_ESTABLISHED:\n</code></pre>\n\n<p>I receive the error</p>\n\n<pre><code>[2018/07/31 18:50:15:5451] ERR: \n[2018/07/31 18:50:15:5451] ERR: 0000: 81 04 69 6E 69 74         ..init\n[2018/07/31 18:50:15:5451] ERR: \n[2018/07/31 18:50:15:5451] ERR: ** 0x564b10ce5170: vh: default, prot: lws-minimal, role ws: Illegal back-to-back write of 6 detected...\n</code></pre>\n\n<p>From the documentation I read that I cannot recall <code>lws_write</code> in this phase but  don't understand how to prepare data for the <code>LWS_CALLBACK_SERVER_WRITEABLE</code> phase (and then call <code>lws_callback_on_writable(wsi);</code>..).</p>\n\n<p>Why the error reports 6 bytes when I lws-write 4 bytes?</p>\n"}, {"tags": ["c", "linux", "inotify"], "comments": [{"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 2, "creation_date": 1533055631, "post_id": 51618144, "comment_id": 90202254, "body": "According to the man page: &quot;The events returned by reading from an inotify file descriptor form an ordered queue. Thus, for example, it is guaranteed that when renaming from one directory to another, events will be produced in the correct order on the inotify file descriptor.&quot;"}, {"owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "reply_to_user": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 0, "creation_date": 1533058615, "post_id": 51618144, "comment_id": 90203698, "body": "@SirDarius Thanks, very useful. Maybe you know if it&#39;s guaranteed that for each, say, <code>read</code> syscall we receive only one <code>read</code> event?"}, {"owner": {"reputation": 36166, "user_id": 393701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/250889c646cd2a916920d9252f7c6f42?s=128&d=identicon&r=PG", "display_name": "SirDarius", "link": "https://stackoverflow.com/users/393701/sirdarius"}, "edited": false, "score": 1, "creation_date": 1533114969, "post_id": 51618144, "comment_id": 90223273, "body": "Again according to the man page, it seems like a single read can return several events, though I&#39;m not sure what you mean with a &quot;read event&quot;, maybe you&#39;re talking about IN_ACCESS?"}], "owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533054840, "creation_date": 1533054840, "question_id": 51618144, "link": "https://stackoverflow.com/questions/51618144/inotify-ordering-guarantee", "title": "Inotify ordering guarantee", "body": "<p>I have a directory I'm watching for changes with <code>inotify</code>. Here is how it looks like:</p>\n\n<pre><code>dir\n |\n |\n  ---file.log\n |\n |\n  ---file.log.moved (after moving `file.log`)\n</code></pre>\n\n<p>I have 3 processes. One moves <code>file.log</code> to <code>file.log.moved</code> another creates a new <code>file.log</code> instead of moved one and the third moves <code>file.log.moved</code> to another destination.</p>\n\n<p>The question is do I have any ordering guarantees with inotify? I mean can I receive events in the following sequence:</p>\n\n<pre><code>IN_MOVED_FROM(file.log)\nIN_CREATE(file.log)  //creating appears in between of moves\nIN_MOVED_TO(file.log.moved)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>IN_CREATE(file.log) //creating appears before moves\nIN_MOVED_FROM(file.log)\nIN_MOVED_TO(file.log.moved)\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1533054252, "post_id": 51617926, "comment_id": 90201538, "body": "Indent code with four spaces. Whatever&#39;s going on here has made it a mess."}, {"owner": {"reputation": 131, "user_id": 8178591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rBMKN.jpg?s=128&g=1", "display_name": "Deba ", "link": "https://stackoverflow.com/users/8178591/deba"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1533054307, "post_id": 51617926, "comment_id": 90201562, "body": "The concerned part is in blockquotes"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1533054343, "post_id": 51617926, "comment_id": 90201590, "body": "Don&#39;t use formatting to draw attention to code like that, it interrupts the proper code format. Instead use code comments. This code is also in dire need of consistent indentation."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1533055029, "post_id": 51617926, "comment_id": 90201956, "body": "&#39;prev` should really be initialised as <code>null</code> and it is being assigned here: ` prev = temp;`."}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1533055944, "post_id": 51618012, "comment_id": 90202402, "body": "Talking picky C: This pointers aren&#39;t just declared but even <i>defined</i>. You would not be able to initialise a pointer which had &quot;only&quot; been declared."}, {"owner": {"reputation": 1575, "user_id": 3056501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/215f27224256fccc7e3083d0d248cac6?s=128&d=identicon&r=PG&f=1", "display_name": "divinas", "link": "https://stackoverflow.com/users/3056501/divinas"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1533071345, "post_id": 51618012, "comment_id": 90209641, "body": "Yes, you are correct of course. This is a definition, not a declaration."}], "tags": [], "owner": {"reputation": 1575, "user_id": 3056501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/215f27224256fccc7e3083d0d248cac6?s=128&d=identicon&r=PG&f=1", "display_name": "divinas", "link": "https://stackoverflow.com/users/3056501/divinas"}, "is_accepted": false, "score": 1, "last_activity_date": 1533054370, "creation_date": 1533054370, "answer_id": 51618012, "question_id": 51617926, "link": "https://stackoverflow.com/questions/51617926/multiple-assignments-in-c/51618012#51618012", "title": "Multiple Assignments in C?", "body": "<p>This is delcaring a Node temp, and initializing it to head_ref. It is declaring a second Node, named prev, and not initializing it to anything</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1533055870, "post_id": 51618018, "comment_id": 90202362, "body": "Talking picky C: This pointers aren&#39;t just declared but even <i>defined</i>."}], "tags": [], "owner": {"reputation": 1362, "user_id": 6386250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/brwvr.jpg?s=128&g=1", "display_name": "Dr.Haimovitz", "link": "https://stackoverflow.com/users/6386250/dr-haimovitz"}, "is_accepted": false, "score": 1, "last_activity_date": 1533054379, "creation_date": 1533054379, "answer_id": 51618018, "question_id": 51617926, "link": "https://stackoverflow.com/questions/51617926/multiple-assignments-in-c/51618018#51618018", "title": "Multiple Assignments in C?", "body": "<p>struct Node* temp = *head_ref, *prev\nYou declare 2 pointers to Node one is temp and the second is prev, you assign a value to temp which is head_ref deref, perfectly legal.</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1533055798, "post_id": 51618037, "comment_id": 90202324, "body": "Talking picky C: This aren&#39;t declarations, but definitions."}, {"owner": {"reputation": 49, "user_id": 2465379, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d72e95dd213468c6b14b166de3f420c1?s=128&d=identicon&r=PG", "display_name": "FSB", "link": "https://stackoverflow.com/users/2465379/fsb"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1533067173, "post_id": 51618037, "comment_id": 90207763, "body": "@alk You are completely correct, I updated my answer. For anyone confused on declarations vs definitions, see <a href=\"https://stackoverflow.com/a/1410632/2465379\">stackoverflow.com/a/1410632/2465379</a>"}], "tags": [], "owner": {"reputation": 49, "user_id": 2465379, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d72e95dd213468c6b14b166de3f420c1?s=128&d=identicon&r=PG", "display_name": "FSB", "link": "https://stackoverflow.com/users/2465379/fsb"}, "is_accepted": false, "score": 1, "last_activity_date": 1533067119, "last_edit_date": 1533067119, "creation_date": 1533054419, "answer_id": 51618037, "question_id": 51617926, "link": "https://stackoverflow.com/questions/51617926/multiple-assignments-in-c/51618037#51618037", "title": "Multiple Assignments in C?", "body": "<p>The variable <code>*prev</code> isn't being assigned, it is being defined. You can have definitions like this in C:</p>\n\n<pre><code>int a, b; // two integers\n\nstruct Node *a, b; // a pointer to a struct and a struct itself\n</code></pre>\n\n<p>The only thing that definition is doing is assigning a value to the <code>*temp</code> variable.</p>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 4, "last_activity_date": 1533054467, "creation_date": 1533054467, "answer_id": 51618052, "question_id": 51617926, "link": "https://stackoverflow.com/questions/51617926/multiple-assignments-in-c/51618052#51618052", "title": "Multiple Assignments in C?", "body": "<p>The definition</p>\n\n<pre><code>struct Node* temp = *head_ref, *prev;\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>struct Node* temp = *head_ref;\nstruct Node *prev;\n</code></pre>\n\n<p>This is some very basic syntax, something that even a pretty bad tutorial or book should have shown.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1533060234, "creation_date": 1533060234, "answer_id": 51619489, "question_id": 51617926, "link": "https://stackoverflow.com/questions/51617926/multiple-assignments-in-c/51619489#51619489", "title": "Multiple Assignments in C?", "body": "<p>This is not a multiple assignment (which C does not support) - it's a <em>declaration</em> of two objects, one of which has an initializer.</p>\n\n<p>This is way more detail than you want, but I don't want to work on what I'm supposed to be working on and need a distraction.  </p>\n\n<p>The top-level syntax for a declaration of an object or function in C is as follows:</p>\n\n<pre><code><em>declaration</em>:\n    <em>declaration-specifiers</em> <em>init-declarator-list<sub>opt</sub></em> ;\n</code></pre>\n\n<p><code><em>declaration-specifiers</em></code> includes things like type specifiers (<code>int</code>, <code>float</code>, <code>double</code>, <code>struct xxx</code>, etc.), type qualifiers (<code>const</code>, <code>volatile</code>), and storage class specifiers (<code>static</code>, <code>register</code>, <code>auto</code>, <code>typedef</code>)</p>\n\n<p><code><em>init-declarator-list<sub>opt</sub></em></code> is an optional list of <em>declarators</em>, each of which may have an optional initializer.  A <em>declarator</em> introduces the name of the thing being declared, along with its array-ness, pointer-ness, and/or function-ness.  </p>\n\n<p>So when we look at the declaration:</p>\n\n<pre><code>struct Node* temp = *head_ref, *prev;\n</code></pre>\n\n<p><code>struct Node</code> is part of the <code><em>declaration-specifiers</em></code>, while <code>*temp = *head_ref</code> and <code>*prev</code> make up the <code><em>init-declarator-list</code></em> (In a declaration, the <code>*</code> operator always binds to the declarator, not the type specifier - the above is parsed as <code>struct Node (*temp) = (*head_ref), (*prev)</code>).  </p>\n"}], "owner": {"reputation": 131, "user_id": 8178591, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rBMKN.jpg?s=128&g=1", "display_name": "Deba ", "link": "https://stackoverflow.com/users/8178591/deba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 730, "favorite_count": 0, "answer_count": 5, "score": 4, "last_activity_date": 1533067119, "creation_date": 1533054084, "last_edit_date": 1533054932, "question_id": 51617926, "link": "https://stackoverflow.com/questions/51617926/multiple-assignments-in-c", "title": "Multiple Assignments in C?", "body": "<p>I have come across a code in C where there seemed to be a multiple assignment to a pointer(in blockquotes). How does this work? The 'prev' isnt even defined.</p>\n\n<p>Heres the code:</p>\n\n<pre><code>// A complete working C program to demonstrate deletion in singly\n// linked list\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n// A linked list node\nstruct Node\n{\n    int data;\n    struct Node *next;\n};\n\n/* Given a reference (pointer to pointer) to the head of a list\nand an int, inserts a new node on the front of the list. */\nvoid push(struct Node** head_ref, int new_data)\n{\n    struct Node* new_node = (struct Node*) malloc(sizeof(struct Node));\n    new_node-&gt;data = new_data;\n    new_node-&gt;next = (*head_ref);\n    (*head_ref)    = new_node;\n}\n\n/* Given a reference (pointer to pointer) to the head of a list\nand a key, deletes the first occurrence of key in linked list */\nvoid deleteNode(struct Node **head_ref, int key)\n{\n    // Store head node\n    struct Node* temp = *head_ref, *prev;\n\n    // If head node itself holds the key to be deleted\n    if (temp != NULL &amp;&amp; temp-&gt;data == key)\n    {\n        *head_ref = temp-&gt;next;   // Changed head\n        free(temp);               // free old head\n        return;\n    }\n\n    // Search for the key to be deleted, keep track of the\n    // previous node as we need to change 'prev-&gt;next'\n    while (temp != NULL &amp;&amp; temp-&gt;data != key)\n    {\n        prev = temp;\n        temp = temp-&gt;next;\n    }\n\n    // If key was not present in linked list\n    if (temp == NULL) return;\n\n    // Unlink the node from linked list\n    prev-&gt;next = temp-&gt;next;\n\n    free(temp);  // Free memory\n}\n\n// This function prints contents of linked list starting from \n// the given node\nvoid printList(struct Node *node)\n{\n    while (node != NULL)\n    {\n        printf(\" %d \", node-&gt;data);\n        node = node-&gt;next;\n    }\n}\n\n/* Drier program to test above functions*/\nint main()\n{\n    /* Start with the empty list */\n    struct Node* head = NULL;\n\n    push(&amp;head, 7);\n    push(&amp;head, 1);\n    push(&amp;head, 3);\n    push(&amp;head, 2);\n\n    puts(\"Created Linked List: \");\n    printList(head);\n    deleteNode(&amp;head, 1);\n    puts(\"\\nLinked List after Deletion of 1: \");\n    printList(head);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "embedded-linux"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1533053832, "post_id": 51617829, "comment_id": 90201331, "body": "Is this a 32-bit executable or not?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1533053910, "post_id": 51617829, "comment_id": 90201368, "body": "Are you sure the problem isn&#39;t exactly what what the error indicates?  That is, have you perhaps gotten the filename or path wrong?  If you are using a relative path, are you sure the working directory is correct for that path?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1533053959, "post_id": 51617829, "comment_id": 90201394, "body": "Try giving it a small file first and see that the code is working."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1533055963, "post_id": 51617829, "comment_id": 90202410, "body": "in your post, show what exactly is contained in the string <code>frb_man_r.frb_path</code>.  The path if absolute will be of the form: <code>&#47;dir1&#47;dir2&#47;...&#47;dir_n&#47;filname.ext</code> if file is downstream of calling executable.  A location relative to the executable will be preceded with: <code>.&#47;</code> (if local, or downstream) or <code>..&#47;</code> (if file is in an upstream directory."}], "answers": [{"comments": [{"owner": {"reputation": 140, "user_id": 7686412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f40f26fd471e5b444ee89c8af5a938b?s=128&d=identicon&r=PG&f=1", "display_name": "mary", "link": "https://stackoverflow.com/users/7686412/mary"}, "edited": false, "score": 0, "creation_date": 1533058390, "post_id": 51618947, "comment_id": 90203574, "body": "yes, thanks! Since I just ctrl c+v his code, I forgot to change. Thanks"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1533058479, "post_id": 51618947, "comment_id": 90203630, "body": "While suggesting using <code>FILE*</code> instead of <code>int</code> is perfectly right thing, the explanation provided and the assumption it is the root cause is most likely wrong."}], "tags": [], "owner": {"reputation": 140, "user_id": 7686412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f40f26fd471e5b444ee89c8af5a938b?s=128&d=identicon&r=PG&f=1", "display_name": "mary", "link": "https://stackoverflow.com/users/7686412/mary"}, "is_accepted": false, "score": 0, "last_activity_date": 1533058330, "last_edit_date": 1533058330, "creation_date": 1533057983, "answer_id": 51618947, "question_id": 51617829, "link": "https://stackoverflow.com/questions/51617829/opening-large-file/51618947#51618947", "title": "Opening large file", "body": "<p>When you declare file as int, you're asking the OS to give you a peace of static memory.\nTry use pointer, using FILE.</p>\n\n<p>It's how I use I/O in gcc, I used file >30GB with FILE, so i know it works fine</p>\n\n<p>the sintax:</p>\n\n<pre><code>FILE *file;\nfile = fopen(frb_man_r.frb_path,\"r\");\n     if(file == NULL)\n         printf(\"no memory or no file\");\n</code></pre>\n\n<p><em>file</em> have all the content of your file;</p>\n"}], "owner": {"reputation": 31, "user_id": 3801096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1HAJ.jpg?s=128&g=1", "display_name": "Samuele Stefanoni", "link": "https://stackoverflow.com/users/3801096/samuele-stefanoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533058330, "creation_date": 1533053663, "question_id": 51617829, "link": "https://stackoverflow.com/questions/51617829/opening-large-file", "title": "Opening large file", "body": "<p>I'm trying to open a large file (>5GB) on an embedded linux distribution. \nFrom the shell I find to have all permissions:</p>\n\n<p>-rwxrwxrwx    1 root     pi       5368709120 Mar 20 23:36 5GB.bin</p>\n\n<p>My code is very simple:</p>\n\n<pre><code>    int file;\n    file = open(frb_man_r.frb_path, O_LARGEFILE);\n    if(file == -1)\n      return errno;\n</code></pre>\n\n<p>I found several topics both on other stackoverflow posts and around the web explaining in details how to manage >32bit files, specifically related to LFS like the page <a href=\"http://users.suse.com/~aj/linux_lfs.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>So I put on my source code the definitions below:</p>\n\n<pre><code>#define _LARGEFILE_SOURCE\n#define _LARGEFILE64_SOURCE\n</code></pre>\n\n<p>Moreover, i added on my project (which is a library) and all the other related projects this macro:<code>_FILE_OFFSET_BITS=64</code></p>\n\n<p>Now, unfortunately the result of my open call is resulting in errno = 2, which means \"No such file or directory\"</p>\n\n<p>Somebody knows why?\nRegards</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1533053089, "post_id": 51617652, "comment_id": 90200924, "body": "Because first is assigning the value to pointers and the second one - to pointees."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533053142, "post_id": 51617652, "comment_id": 90200955, "body": "If you have a pointer <code>ptr</code>, and then <i>dereference</i> it with <code>*</code> (i.e <code>*ptr</code>) what do you get then? Not to be condescending but I recommend you go find a good text book or tutorial about pointers and read it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1533053411, "post_id": 51617652, "comment_id": 90201105, "body": "In the <i>declarations</i> of <code>ptr1</code> and <code>ptr2</code>, the <code>*</code> characters are part of the declared types of those identifiers.  In an executable statement they are the dereferencing operator."}], "answers": [{"tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 0, "last_activity_date": 1533053724, "last_edit_date": 1533053724, "creation_date": 1533053421, "answer_id": 51617758, "question_id": 51617652, "link": "https://stackoverflow.com/questions/51617652/pointer-referencing-whats-the-difference-between-pointer-referencing-in-number/51617758#51617758", "title": "Pointer referencing: What&#39;s the difference between pointer referencing in number 1 and 2.", "body": "<p>A declaration such as <code>char *ptr1;</code>, says <code>*ptr1</code> is a <code>char</code>, meaning <code>ptr1</code> is a pointer to a <code>char</code>.</p>\n\n<p>When the declaration includes initialization, as in <code>char *ptr1 = ara;</code>, it means <code>ptr1</code>, which is a pointer to <code>char</code>, is initialized with the value <code>ara</code>.</p>\n\n<p>In an assignment such as <code>*ptr1 = ara</code>, <code>*ptr1</code> means the thing that <code>ptr1</code> points to. So this assignment is attempting to assign the value <code>ara</code>, which is a pointer to <code>char</code>, to the <code>char</code> that <code>ptr1</code> points to. Your compiler complains about this because a <code>char</code> is not a suitable destination for a pointer to <code>char</code>.</p>\n\n<p>You should be clear about how names look in declarations and how they look in expressions. In a declaration, the name is used with operators to show an example of how it will be used. For example, <code>char foo()</code> says <code>foo</code> will be used as a function, so it is a function that returns a <code>char</code>, and <code>char foo[]</code> says <code>foo</code> will be used as an array, so it is an array of <code>char</code>.</p>\n\n<p>When you use an identifier the same way it appears in a declaration, it forms an expression with the declared type. So, after the declaration <code>char *ptr1</code>, the expression <code>*ptr1</code> is a <code>char</code>. The actual pointer to a <code>char</code> that was declared is <code>ptr1</code>, not <code>*ptr1</code>.</p>\n\n<p>When initialization appears in a declaration, it initializes the declared object (<code>ptr1</code>), not the example expression in the declaration (not <code>*ptr1</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1533053777, "creation_date": 1533053777, "answer_id": 51617852, "question_id": 51617652, "link": "https://stackoverflow.com/questions/51617652/pointer-referencing-whats-the-difference-between-pointer-referencing-in-number/51617852#51617852", "title": "Pointer referencing: What&#39;s the difference between pointer referencing in number 1 and 2.", "body": "<p>The first one is equivalent to:</p>\n\n<pre><code>char *ptr1;\nchar *ptr2;\nptr1 = ara; // ptr1 points to the same place as ara\nptr2 = ara; // ptr2 points to the same place as ara\n</code></pre>\n\n<p>while the second is equivalent to:</p>\n\n<pre><code>char *ptr1;\nchar *ptr2;\n*ptr1 = ara; // Problems\n*ptr2 = ara; // Problems\n</code></pre>\n\n<p>Problem 1:</p>\n\n<p>Those lines are compile time problems since <code>*ptr1</code> and <code>*ptr2</code> evaluate to <code>char</code> while the type they are being assigned to is <code>char*</code>.</p>\n\n<p>Problem 2:</p>\n\n<p>If the compiler were to ignore the error, you will run into run time error since neither <code>ptr1</code> nor <code>ptr2</code> point to anything valid and you are using <code>*ptr1</code> or <code>*ptr2</code> to assign values to. </p>\n"}], "owner": {"reputation": 55, "user_id": 8678396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67be647f915db9cfd54c6a6fdcaa4eea?s=128&d=identicon&r=PG&f=1", "display_name": "Shahriar Morshed", "link": "https://stackoverflow.com/users/8678396/shahriar-morshed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 51617852, "answer_count": 2, "score": 2, "last_activity_date": 1533053777, "creation_date": 1533053016, "question_id": 51617652, "link": "https://stackoverflow.com/questions/51617652/pointer-referencing-whats-the-difference-between-pointer-referencing-in-number", "title": "Pointer referencing: What&#39;s the difference between pointer referencing in number 1 and 2.", "body": "<p>why the first one works fine while second one shows error.\n1.</p>\n\n<pre><code>char *reverse(char *ara)\n{\n    char *ptr1=ara,*ptr2=ara;\n\n\n}\n</code></pre>\n\n<p>2.</p>\n\n<pre><code>char *reverse(char *ara)\n{\n    char *ptr1,*ptr2;\n    *ptr1=ara,*ptr2=ara;\n\n}\n</code></pre>\n\n<p>where main function looks like this</p>\n\n<pre><code>int main()\n{\n    char ara[100]=\"Programming\";\n    reverse(ara);\n}   \n</code></pre>\n"}, {"tags": ["c", "printf", "scanf"], "comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1533053059, "post_id": 51617556, "comment_id": 90200893, "body": "how did you declared <code>array</code>? if it has only 3 elements then it can&#39;t store a 3-character string and you&#39;re getting UB"}, {"owner": {"reputation": 1244, "user_id": 10002294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ARNs5.jpg?s=128&g=1", "display_name": "Uclydde", "link": "https://stackoverflow.com/users/10002294/uclydde"}, "edited": false, "score": 0, "creation_date": 1533053911, "post_id": 51617556, "comment_id": 90201369, "body": "Have you tried changing the <code>%3</code> to <code>%2</code> in your scanf() function?"}, {"owner": {"reputation": 425, "user_id": 10161504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43494ce2c398140ce5415200a3a36b6e?s=128&d=identicon&r=PG&f=1", "display_name": "wattbatt", "link": "https://stackoverflow.com/users/10161504/wattbatt"}, "reply_to_user": {"reputation": 1244, "user_id": 10002294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ARNs5.jpg?s=128&g=1", "display_name": "Uclydde", "link": "https://stackoverflow.com/users/10002294/uclydde"}, "edited": false, "score": 0, "creation_date": 1533057409, "post_id": 51617556, "comment_id": 90203128, "body": "@JBraha no I  didn&#39;t, doesn&#39;t <code>%2s</code> make it scan only 2 chars? Oh right no room for the terminator if I do <code>%3s</code>, correct?"}, {"owner": {"reputation": 1244, "user_id": 10002294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ARNs5.jpg?s=128&g=1", "display_name": "Uclydde", "link": "https://stackoverflow.com/users/10002294/uclydde"}, "edited": false, "score": 0, "creation_date": 1533057538, "post_id": 51617556, "comment_id": 90203187, "body": "@wattbatt Well if your code had <code>%3</code> and &#39;abcd&#39; (a 4-char string) worked properly, I thought that <code>%2</code> and &#39;abc&#39; (a 3-char string) might work properly."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533055254, "post_id": 51617764, "comment_id": 90202063, "body": "&quot;As soon as you enter any non-whitespace (e.g. &quot;d&quot;) it knows &quot;aha, all whitespace done&quot;. Then, and not before, it can complete.&quot; --&gt; Perhaps &quot;not a soon&quot; since <code>stdin</code> is commonly line buffered and so a following <i>line</i> of input is required before <code>scanf()</code> sees any more data."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533055318, "post_id": 51617764, "comment_id": 90202097, "body": "@chux Good point. I improved the phrasing. Thanks for the input."}, {"owner": {"reputation": 425, "user_id": 10161504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43494ce2c398140ce5415200a3a36b6e?s=128&d=identicon&r=PG&f=1", "display_name": "wattbatt", "link": "https://stackoverflow.com/users/10161504/wattbatt"}, "edited": false, "score": 0, "creation_date": 1533056239, "post_id": 51617764, "comment_id": 90202562, "body": "Until now i worked on strings as char arrays so I didn&#39;t know about the string terminator character..about this I have an additional question: my array is <code>char array[3];</code> so that means it has room for 3 chars, right? Why if I write &quot;abc&quot;, it gets printed regularly and it doesn&#39;t give any error, since there is no more room for the &#39;\\0&#39; char?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533056360, "post_id": 51617764, "comment_id": 90202629, "body": "See <a href=\"https://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/io/fscanf</a> quote &quot;Always stores a null character in addition to the characters matched (so the argument array must have room for at least width+1 characters)&quot; Note that scanf does not know about the size of what you refer to as destination."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 425, "user_id": 10161504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43494ce2c398140ce5415200a3a36b6e?s=128&d=identicon&r=PG&f=1", "display_name": "wattbatt", "link": "https://stackoverflow.com/users/10161504/wattbatt"}, "edited": false, "score": 1, "creation_date": 1533056730, "post_id": 51617764, "comment_id": 90202792, "body": "@federicomasseroni C is not specified to give an error when your code writes outside <code>array[3]</code>.  Code broke the rules - so rest of code moot.  &quot;since there is no more room for the &#39;\\0&#39; &quot; is not known to be true.  We know there is not <i>certainly</i> enough room - there might be - there might not be enough room - it is all <i>undefined behavior</i>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533056887, "post_id": 51617764, "comment_id": 90202872, "body": "I know I should not address voters. But however did that fourth upvote granted me the silver &quot;C&quot;. Thank you so very much. :-)"}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": true, "score": 4, "last_activity_date": 1533055568, "last_edit_date": 1533055568, "creation_date": 1533053452, "answer_id": 51617764, "question_id": 51617556, "link": "https://stackoverflow.com/questions/51617556/how-does-n-affect-string-scan-in-scanf/51617764#51617764", "title": "How does \\n affect string scan in scanf?", "body": "<p>It is not the printf (as the first version of your now edited title implied) which needs the additional input, it is the scanf.<br>\nYour format string contains a <code>\"\\n\"</code>.<br>\nThat happens to be a white space.<br>\nAny whitespace in that position will tell scanf to consume any number of whitespace following the three characters (e.g. \"abc\").<br>\nAs long as you continue adding whitespace (including returns), the scanf is not done consuming \"all following whitespace\".<br>\nAs soon as you enter any non-whitespace (e.g. \"d\") it knows \"aha, all whitespace done\". Then, and not before, it can complete. Leaves the non-whitespace in the input stream and returns.<br>\nNote (credits to chux) that with a (commonly, to the point of almost always if you did not intentionally change that) line buffered input, you need to enter such a non-whitespace with a return/newline following it somewhere. </p>\n\n<p>Note, as mentioned in comments, you need 4 characters of space in your target array, to also accomodate the always written \"\\0\" at the end of the string. If you only have three characters space, then the last 0 will be written beyond causing undefined behaviour.</p>\n\n<p>I am not sure how to solve your problem, because I cannot tell what the purpose of your \"\\n\" is. But I think you should try the behaviour if you move the \"\\n\" out of <code>scanf()</code> and maybe into the <code>printf()</code>. A following <code>scanf()</code> call starting with a conversion specifier (except \"[\", \"c\", and \"n\") consumes any leading whitespace anyway, including any remaining newlines/returns from this one.</p>\n"}], "owner": {"reputation": 425, "user_id": 10161504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43494ce2c398140ce5415200a3a36b6e?s=128&d=identicon&r=PG&f=1", "display_name": "wattbatt", "link": "https://stackoverflow.com/users/10161504/wattbatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "closed_date": 1533053708, "accepted_answer_id": 51617764, "answer_count": 1, "score": 1, "last_activity_date": 1533055568, "creation_date": 1533052678, "last_edit_date": 1533055392, "question_id": 51617556, "link": "https://stackoverflow.com/questions/51617556/how-does-n-affect-string-scan-in-scanf", "closed_reason": "Duplicate", "title": "How does \\n affect string scan in scanf?", "body": "<p>Here's a simple example: I have an array of 3 characters, I write an input on terminal and I want to check immediately what i scanned, like this:</p>\n\n<pre><code>scanf(\"%3s\\n\",array);\nprintf(\"%s\",array);\n</code></pre>\n\n<p>What i want to know is: why, after running the program, if I write on terminal \"abc\", to make it print out the array I have to put another input, like writing another letter or a number?</p>\n\n<p>If I write \"abcd\" and then press ENTER then it immediately prints, but if I just write \"abc\" and press ENTER many times it still doesn't go to the next instruction (which is printf).</p>\n\n<p>I know that it has to do with how \\n makes scanf read the string, but I cant quite get it.</p>\n"}, {"tags": ["c", "linux", "assembly"], "comments": [{"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1533059307, "post_id": 51617338, "comment_id": 90204042, "body": "You don&#39;t need separate i386 and x86_64 versions; both should be using <code>cmpxchgl</code> because <code>int</code> is 32 bit in both ISAs.  <a href=\"https://stackoverflow.com/questions/51598339/achieve-gcc-cas-function-for-version-4-1-2-and-earlier#51600261\">@Timothy&#39;s answer on your previous question</a> already pointed this out."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1533059412, "post_id": 51617338, "comment_id": 90204098, "body": "Also, that <code>sync_add_and_fetch</code> only makes one attempt to CAS, so the function name doesn&#39;t reflect what it does.  Use <code>lock xadd</code> so you never need to retry."}, {"owner": {"reputation": 169, "user_id": 3094117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e4d79349251b2d1de87a5739c16140?s=128&d=identicon&r=PG&f=1", "display_name": "52coder", "link": "https://stackoverflow.com/users/3094117/52coder"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1533089798, "post_id": 51617338, "comment_id": 90213912, "body": "@PeterCordes thanks for your advice,I try to use lock xadd to achieve the sync_add_and_fetch ,how to rewrite it ? when I simple replace it ,gcc tells :number of operands mismatch for xadd."}, {"owner": {"reputation": 169, "user_id": 3094117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e4d79349251b2d1de87a5739c16140?s=128&d=identicon&r=PG&f=1", "display_name": "52coder", "link": "https://stackoverflow.com/users/3094117/52coder"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1533090883, "post_id": 51617338, "comment_id": 90214119, "body": "@PeterCordes thanks ,I test for wrong machine,they both 32 bit centos, I am now install centosx64,and when I operate long or unsigned long,I have to write another function?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1533091378, "post_id": 51617338, "comment_id": 90214242, "body": "Yes, you need another function with another name with different types for the inputs and return value.  <code>l</code> and <code>ll</code> suffixes are probably good, or maybe <code>p</code> for <code>void *</code>.  That&#39;s probably easier than trying to use C11 generic overloads (<a href=\"https://en.cppreference.com/w/c/language/generic\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/generic</a>), and your ancient compiler probably doesn&#39;t support it anyway."}], "answers": [{"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 0, "last_activity_date": 1533061233, "creation_date": 1533061233, "answer_id": 51619763, "question_id": 51617338, "link": "https://stackoverflow.com/questions/51617338/achieve-window-function-interlockedexchange-in-linux/51619763#51619763", "title": "Achieve window function InterlockedExchange in Linux", "body": "<p>Exchange is easy; you don't have to return any status or anything.  It <a href=\"http://felixcloutier.com/x86/XCHG.html\" rel=\"nofollow noreferrer\"><code>xchg</code></a> always swaps, so you just have to return the old value and/or a status <a href=\"https://stackoverflow.com/questions/49822854/c-inline-assembly-getting-operand-size-mismatch-when-using-cmpxchg#49839296\">like for cmpxchg</a>.</p>\n\n<pre><code>static inline\nint sync_xchg(int *p, int newval)\n{\n    // xchg mem,reg has an implicit lock prefix\n    asm volatile(\"xchg %[newval], %[mem]\"\n        : [mem] \"+m\" (*p), [newval] \"+r\" (newval)  // read/write operands\n        :\n        : \"memory\" // compiler memory barrier, giving us seq-cst memory ordering\n    );\n    return newval;\n}\n</code></pre>\n\n<p>It might be better to use <code>int32_t</code>, but int is 32 bits in all relevant ABIs.\nAlso, this asm works for any size of integer.  GCC will pick a 16-bit, 32-bit, or 64-bit register, and that will imply that operand-size for xchg.  (You only need a suffix like <code>addl</code> when there's no register operand, e.g. <code>lock; addl $1, (%0)</code>)</p>\n\n<p>Anyway, I tested this and it compiles correctly with <a href=\"https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,lang:c%2B%2B,source:&#39;//+static+inline%0Aint+sync_xchg(int+*p,+int+newval)+%0A%7B%0A++++//+xchg+mem,reg+has+an+implicit+lock+prefix%0A++++asm+volatile(%22xchg+%25%5Bnewval%5D,+%25%5Bmem%5D%22%0A++++++++:+%5Bmem%5D+%22%2Bm%22+(*p),+%5Bnewval%5D+%22%2Br%22+(newval)%0A++++++++:%0A++++++++:+%22memory%22+//+compiler+memory+barrier,+giving+us+seq-cst+memory+ordering%0A++++)%3B%0A++++return+newval%3B%0A%7D%0A&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:33.333333333333336,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:g412,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;1&#39;,trim:&#39;1&#39;),lang:c%2B%2B,libs:!(),options:&#39;-O3+-Wall&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+gcc+4.1.2+(Editor+%231,+Compiler+%231)+C%2B%2B&#39;,t:&#39;0&#39;)),k:33.333333333333336,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:g412,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;1&#39;,trim:&#39;1&#39;),lang:c%2B%2B,libs:!(),options:&#39;-O3+-Wall+-m32+-fomit-frame-pointer&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+gcc+4.1.2+(Editor+%231,+Compiler+%232)+C%2B%2B&#39;,t:&#39;0&#39;)),k:33.33333333333333,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">gcc4.1.2 on the Godbolt compiler explorer</a>.  I don't have access to gcc4.1.1, but hopefully <code>\"+m\"</code> and <code>[named]</code> asm memory operands weren't new in that release.</p>\n\n<p><code>+m</code> makes it <em>much</em> easier to write a bulletproof swap function.  e.g. no risk of gcc choosing two different memory locations for the same variable as an input vs. as an output.</p>\n\n<p><code>gcc -O3</code> output from gcc4.1.2:</p>\n\n<pre><code># 32-bit: -m32 -fomit-frame-pointer\nsync_xchg(int*, int):\n    movl    4(%esp), %edx\n    movl    8(%esp), %eax\n    xchg %eax, (%edx)\n    ret                   # returns in EAX\n\n\n# 64-bit: just -O3\nsync_xchg(int*, int):\n    xchg %esi, (%rdi)\n    movl    %esi, %eax\n    ret                    # returns in EAX\n</code></pre>\n\n<p>I also checked that this asm actually assembles, using a newer gcc and clicking the <code>11010</code> binary button on Godbolt.  Fun fact: because GAS accepts xchg mem,reg or xchg reg,mem, you can compile this function with AT&amp;T or Intel syntax (<code>-masm=intel</code>).  Your other functions won't work, though.</p>\n"}], "owner": {"reputation": 169, "user_id": 3094117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e4d79349251b2d1de87a5739c16140?s=128&d=identicon&r=PG&f=1", "display_name": "52coder", "link": "https://stackoverflow.com/users/3094117/52coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1533083503, "creation_date": 1533051952, "last_edit_date": 1533083503, "question_id": 51617338, "link": "https://stackoverflow.com/questions/51617338/achieve-window-function-interlockedexchange-in-linux", "title": "Achieve window function InterlockedExchange in Linux", "body": "<p>In this link <a href=\"https://stackoverflow.com/questions/51598339/achieve-gcc-cas-function-for-version-4-1-2-and-earlier\">achieve GCC cas function for version 4.1.2 and earlier</a> I ask a question to use <code>compare_and_swap</code> function to achieve the Built-in function <code>__sync_fetch_and_add</code> here is my final code, run well in x86 and x64 (tested on <em>CentOS 5.0 32bit</em> and <em>CentOS 7 64bit</em> ).</p>\n\n<hr>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;pthread.h&gt;\n\nstatic unsigned long  count = 0;\n\nint sync_add_and_fetch(int* reg, int oldval, int incre) \n{\n    register char result;\n#ifdef __i386__\n    __asm__ volatile (\"lock; cmpxchgl %3, %0; setz %1\" \n                     : \"=m\"(*reg), \"=q\" (result) \n                     : \"m\" (*reg), \"r\" (oldval + incre), \"a\" (oldval) \n                     : \"memory\");\n    return result;\n#elif defined(__x86_64__)\n    __asm__ volatile (\"lock; cmpxchgq %3, %0; setz %1\" \n                     : \"=m\"(*reg), \"=q\" (result) \n                     : \"m\" (*reg), \"r\" (newval + incre), \"a\" (oldval) \n                     : \"memory\");\n    return result;\n#else\n    #error:architecture not supported and gcc too old\n#endif\n\n}\n\n\nvoid *test_func(void *arg)\n{\n    int i = 0;\n    int result = 0;\n    for(i = 0; i &lt; 2000; ++i)\n    {\n        result = 0;\n        while(0 == result)\n        {\n            result = sync_add_and_fetch((int *)&amp;count, count, 1);\n        }\n    }\n\n    return NULL;\n}\n\nint main(int argc, const char *argv[])\n{\n    pthread_t id[10];\n    int i = 0;\n\n    for(i = 0; i &lt; 10; ++i){\n        pthread_create(&amp;id[i], NULL, test_func, NULL);\n    }\n\n    for(i = 0; i &lt; 10; ++i){\n        pthread_join(id[i], NULL);\n    }\n    //10*2000=200000\n    printf(\"%u\\n\", count);\n\n    return 0;\n}\n</code></pre>\n\n<p>Now I have another question, how to implement function <code>InterlockedExchange</code> in Linux, <a href=\"https://docs.microsoft.com/en-us/windows-hardware/drivers/ddi/content/wdm/nf-wdm-interlockedexchangepointer\" rel=\"nofollow noreferrer\"><strong>InterlockedExchange</strong></a> just like the code above, have a <code>__i386__</code> and <code>__x86_64__</code> version. Just use the code above the parameter type not match, and maybe the assembly code will be rewritten.</p>\n"}, {"tags": ["c", "return"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1533050676, "post_id": 51616899, "comment_id": 90199292, "body": "If you want to return a value, yes, you must explicitly return it.  It&#39;s an accident if it seems to work without it."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1533050688, "post_id": 51616899, "comment_id": 90199307, "body": "<code>return</code> is not a <i>fonction</i>."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1533050700, "post_id": 51616899, "comment_id": 90199317, "body": "It is absolutely necessary."}, {"owner": {"reputation": 157, "user_id": 10031952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac6a7fc1e261c7bc54ef3c461e132ae8?s=128&d=identicon&r=PG&f=1", "display_name": "user12346352", "link": "https://stackoverflow.com/users/10031952/user12346352"}, "edited": false, "score": 0, "creation_date": 1533050806, "post_id": 51616899, "comment_id": 90199397, "body": "It depends where in the main it&#39;s necessary but if a function is declared as void you dont even Need a return but in every other function <code>int, double...</code> you Need the return value"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1533050862, "post_id": 51616899, "comment_id": 90199438, "body": "MSVC gives <b>two</b> warnings: &quot;&#39;-&#39;: operator has no effect; expected operator with side-effect&quot; and &quot;&#39;f&#39;: must return a value&quot;. So crank up your warning levels (or take them seriously if they were given)."}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1533050865, "post_id": 51616899, "comment_id": 90199442, "body": "@SouravGhosh return could be a fonction. You don&#39;t know."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 1, "creation_date": 1533050896, "post_id": 51616899, "comment_id": 90199464, "body": "@nicomp oh right, poor me (<i>goes and sulks in a corner...</i>)"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1533050921, "post_id": 51616899, "comment_id": 90199484, "body": "If you want to see how this is abused horribly, look into code golf where you will see the &quot;per compiler&quot; rules for how it treats a functions without a return.  If you do not use a return statement (outside of main) you are invoking undefined behaviour."}, {"owner": {"reputation": 57967, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1533050972, "post_id": 51616899, "comment_id": 90199529, "body": "@SouravGhosh actually, you cannot return a function type. You can return a pointer to a function, but not a function. So you were correct :) come back from the corner."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1533050977, "post_id": 51616899, "comment_id": 90199535, "body": "many c compilers dont warn about this on their default settings. It should really be an unconditional fatal"}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1533050977, "post_id": 51616899, "comment_id": 90199536, "body": "@MichaelDorgan Even a void function needs a return statement?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 0, "creation_date": 1533051051, "post_id": 51616899, "comment_id": 90199580, "body": "@nicomp nope, it does not."}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1533051135, "post_id": 51616899, "comment_id": 90199632, "body": "@SouravGhosh I didn&#39;t think so, but above is written &quot; If you do not use a return statement (outside of main) you are invoking undefined behaviour.&quot;"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 1, "creation_date": 1533051216, "post_id": 51616899, "comment_id": 90199680, "body": "@nicomp read it the other way, if you&#39;re trying to use the return value from a function which has a <code>void</code> return type, you&#39;re in trouble already. :) I guess that assumes a no-void returning function."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 1, "creation_date": 1533051345, "post_id": 51616899, "comment_id": 90199771, "body": "@nicomp <a href=\"https://stackoverflow.com/q/9003283/2173917\">see this also</a>."}, {"owner": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1533051359, "post_id": 51616899, "comment_id": 90199781, "body": "@SouravGhosh Makes sense. Now I will research &quot;fonction&quot; and write a scholarly paper on it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 157, "user_id": 10031952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac6a7fc1e261c7bc54ef3c461e132ae8?s=128&d=identicon&r=PG&f=1", "display_name": "user12346352", "link": "https://stackoverflow.com/users/10031952/user12346352"}, "edited": false, "score": 0, "creation_date": 1533051371, "post_id": 51616899, "comment_id": 90199790, "body": "@user12346352 <code>main</code> is the one function of non-<code>void</code> type that need not <code>return</code> anything: in this case the compiler will add <code>return 0;</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 3723, "user_id": 1169091, "user_type": "registered", "accept_rate": 9, "profile_image": "https://i.stack.imgur.com/5vE4L.jpg?s=128&g=1", "display_name": "nicomp", "link": "https://stackoverflow.com/users/1169091/nicomp"}, "edited": false, "score": 2, "creation_date": 1533051410, "post_id": 51616899, "comment_id": 90199815, "body": "@nicomp <a href=\"https://fr.wikipedia.org/wiki/Fonction_(math%C3%A9matiques)\" rel=\"nofollow noreferrer\">here&#39;s something to get you started with</a>."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 10141503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEv9V.png?s=128&g=1", "display_name": "naguam", "link": "https://stackoverflow.com/users/10141503/naguam"}, "edited": false, "score": 0, "creation_date": 1533052071, "post_id": 51616952, "comment_id": 90200263, "body": "I know if the compiler compile, it is not necessary right. But I had not explicit warning, that&#39;s why I asked the question. Thank you :) (last edit with clang there is a warning. I was using gcc and tcc (to test) with no warnings). I searched but I didn&#39;t really understand, know yes thank you."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 55, "user_id": 10141503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEv9V.png?s=128&g=1", "display_name": "naguam", "link": "https://stackoverflow.com/users/10141503/naguam"}, "edited": false, "score": 0, "creation_date": 1533052153, "post_id": 51616952, "comment_id": 90200309, "body": "- &gt; naguam when in doubt, use the highest level of strict checking. As mentioned in the comment by @weathervane, you should have seen the warnings already."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 55, "user_id": 10141503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEv9V.png?s=128&g=1", "display_name": "naguam", "link": "https://stackoverflow.com/users/10141503/naguam"}, "edited": false, "score": 0, "creation_date": 1533053008, "post_id": 51616952, "comment_id": 90200856, "body": "@naguam: Since the behavior is <i>undefined</i>, the compiler is not required to issue any sort of diagnostic if you forget the <code>return</code> statement.  Most will if you raise the warning level, though."}, {"owner": {"reputation": 576, "user_id": 8950361, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YC9cWF75tUo/AAAAAAAAAAI/AAAAAAAAA9k/O-CY3-1EdOo/photo.jpg?sz=128", "display_name": "Divakar Rajesh", "link": "https://stackoverflow.com/users/8950361/divakar-rajesh"}, "edited": false, "score": 0, "creation_date": 1533055521, "post_id": 51616952, "comment_id": 90202188, "body": "doesn&#39;t the result of the last line get sent as the return value when no explicit return statement is mentioned?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 576, "user_id": 8950361, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YC9cWF75tUo/AAAAAAAAAAI/AAAAAAAAA9k/O-CY3-1EdOo/photo.jpg?sz=128", "display_name": "Divakar Rajesh", "link": "https://stackoverflow.com/users/8950361/divakar-rajesh"}, "edited": false, "score": 1, "creation_date": 1533056356, "post_id": 51616952, "comment_id": 90202626, "body": "@DivakarRajesh nope, not according to the C standard.."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1583766326, "post_id": 51616952, "comment_id": 107217232, "body": "(Coming from a recent dup:) I would emphasize that it is perfectly OK for non-void functions <b>in C</b> to return without a <code>return</code>. The responsibility is strictly with the caller to not use that non-value, and it is a run-time problem: When a branch has been executed which <code>return</code>ed a value the caller can use it, if not, then not. That even makes sense: A caller may know when a value is impossible to compute and call a function only for the side effects."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 576, "user_id": 8950361, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YC9cWF75tUo/AAAAAAAAAAI/AAAAAAAAA9k/O-CY3-1EdOo/photo.jpg?sz=128", "display_name": "Divakar Rajesh", "link": "https://stackoverflow.com/users/8950361/divakar-rajesh"}, "edited": false, "score": 1, "creation_date": 1583767089, "post_id": 51616952, "comment_id": 107217648, "body": "@DivakarRajesh Some languages do that, e.g. Alogol68. The C comma operator has that semantic as well."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 8, "last_activity_date": 1533051625, "last_edit_date": 1533051625, "creation_date": 1533050744, "answer_id": 51616952, "question_id": 51616899, "link": "https://stackoverflow.com/questions/51616899/is-a-return-statement-always-necessary/51616952#51616952", "title": "Is a return statement always necessary?", "body": "<p>The second snippet invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>.</p>\n\n<p>A function, which reaches the ending <code>}</code> and the return value is used in the caller, invokes undefined behavior.</p>\n\n<p>Quoting <code>C11</code>, chapter \u00a76.9.1</p>\n\n<blockquote>\n  <p>If the <code>}</code> that terminates a function is reached, and the value of the function call is used by\n  the caller, the behavior is undefined.</p>\n</blockquote>\n\n<p>So, yes, for a function </p>\n\n<ul>\n<li>returning anything other than <code>void</code> (and whose value is going to be used in caller), must include a <code>return</code> statement with an expression, which has a\ntype same as the return type of the function.</li>\n<li>returning <code>void</code>, can have a <code>return</code> statement without any expression. However, <a href=\"https://stackoverflow.com/q/9003283/2173917\">this can be also be omitted</a> without any trouble.</li>\n</ul>\n\n<p><em>Note: Just because \"your\" compiler (settings) complies the code and produces a binary, does not mean the code is right. Use all the warning flags and strict checks, they will save you lots of trouble</em>.</p>\n"}], "owner": {"reputation": 55, "user_id": 10141503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEv9V.png?s=128&g=1", "display_name": "naguam", "link": "https://stackoverflow.com/users/10141503/naguam"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "closed_date": 1533050877, "answer_count": 1, "score": 2, "last_activity_date": 1533051625, "creation_date": 1533050573, "last_edit_date": 1533050858, "question_id": 51616899, "link": "https://stackoverflow.com/questions/51616899/is-a-return-statement-always-necessary", "closed_reason": "Duplicate", "title": "Is a return statement always necessary?", "body": "<p>What is the difference between:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint f(int x){\n    return x*x - 3;\n}\n\nint main(){\n    int x = 4;\n    printf(\"f(%d) = %d\\n\", x, f(x));\n    return 0;\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint f(int x){\n    x*x - 3;\n}\n\nint main(){\n    int x = 4;\n    printf(\"f(%d) = %d\\n\", x, f(x));\n    return 0;\n}\n</code></pre>\n\n<p>Because the two compile without error (using gcc) and the two are working.\nIs the first return really important?</p>\n"}, {"tags": ["c++", "c", "vulkan"], "comments": [{"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 0, "creation_date": 1533050948, "post_id": 51616471, "comment_id": 90199513, "body": "double check your initialization to ensure that your assumption about the queues is correct"}, {"owner": {"reputation": 2603, "user_id": 8306143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jpU8P.jpg?s=128&g=1", "display_name": "Ekzuzy", "link": "https://stackoverflow.com/users/8306143/ekzuzy"}, "edited": false, "score": 0, "creation_date": 1533054925, "post_id": 51616471, "comment_id": 90201895, "body": "As @NicolBolas noted, this is a problem with simultaneous access to a VkQueue object. Semaphores won&#39;t help You here - they are used to synchronize operations on the GPU. You need to use mutexes so the <code>vkQueueSubmit()</code> functions are not called from multiple threads at the same time."}], "answers": [{"comments": [{"owner": {"reputation": 26262, "user_id": 85306, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4283ac48d7f22118cc4e47a514b3269c?s=128&d=identicon&r=PG", "display_name": "Jherico", "link": "https://stackoverflow.com/users/85306/jherico"}, "edited": false, "score": 3, "creation_date": 1533063980, "post_id": 51617003, "comment_id": 90206266, "body": "Instructions unclear.  GPU and CPU are now both on fire."}], "tags": [], "owner": {"reputation": 374839, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 7, "last_activity_date": 1536980960, "last_edit_date": 1536980960, "creation_date": 1533050890, "answer_id": 51617003, "question_id": 51616471, "link": "https://stackoverflow.com/questions/51616471/vulkan-async-model-loading/51617003#51617003", "title": "Vulkan async model loading", "body": "<p>You're overthinking the problem.</p>\n\n<p>You have a function which manipulates an object. And you want to be able to call that function from multiple threads on the same object. But manipulating that object through that function <em>isn't</em> thread-safe. So the onus is up to you to make it thread safe.</p>\n\n<p>The solution is the same whether this is a Vulkan object or a regular C/C++ type: you use a mutex. If your two queues are the same queue, you have to lock a mutex around the site where each thread calls <code>vkQueueSubmit</code>.</p>\n\n<p>Don't let Vulkan's complexities distract you from the simple solution ;)</p>\n\n<p>All that being said however, if your graphics and transfer queues are the same, it would probably be better for you to find a way to restructure your code so that you're <em>not</em> trying to submit the different batches on different threads. That is, make your code more adaptive to the hardware.</p>\n\n<p>If the GPU offers a distinct transfer queue, then your transfer thread generates the transfer CBs and submits them (along with passing the appropriate semaphore to the graphics submission thread so that it can wait at the correct time). If the GPU has no distinct transfer queue, then you can still generate the transfer CBs on a different thread. But instead of passing a semaphore to the graphics thread, you pass the <em>command buffers</em>. And those get submitted along with the next graphics batch; the graphics submission thread can also insert appropriate synchronization between the transfer and graphics operations.</p>\n"}], "owner": {"reputation": 2394, "user_id": 4952137, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c40d9f94080a45d91ee151dfe960cee3?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Sparber", "link": "https://stackoverflow.com/users/4952137/thomas-sparber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 991, "favorite_count": 1, "accepted_answer_id": 51617003, "answer_count": 1, "score": 1, "last_activity_date": 1536980960, "creation_date": 1533049300, "question_id": 51616471, "link": "https://stackoverflow.com/questions/51616471/vulkan-async-model-loading", "title": "Vulkan async model loading", "body": "<p>I am not quite sure if it is actually correct what I'm trying to do but there is not so much documentation about Vulkan so this is what I came up with. If I'm totally wrong in the way how I designed it, please correct me as well!</p>\n\n<p>In my Vulkan application I have three different Queues</p>\n\n<ul>\n<li>graphicsQueue: Used to submit graphics command buffers</li>\n<li>presentQueue: Used to present finished images</li>\n<li>transferQueue: Used to copy buffers, textures etc.</li>\n</ul>\n\n<p>I am trying to implement async model loading, which means all vertices, textures etc are loaded in a separate thread. When the model is finished loading, the draw command buffers are updated by the main thread so the newly loaded object is rendered.</p>\n\n<p>Everything is working as it should expect that I get a warning from the Vulkan Validation layers:</p>\n\n<blockquote>\n  <p>THREADING ERROR : object of type VkQueue is simultaneously used in thread ...</p>\n</blockquote>\n\n<p>If I step through the the Debugger, I can see that the following lines are affected:</p>\n\n<pre><code>//main Loop\nvkQueueSubmit(graphicsQueue, ...) //draw command buffer\n</code></pre>\n\n<p>and</p>\n\n<pre><code>//Background loading thread\nvkQueueSubmit(transferQueue, ...)//copy vertex command buffer\n</code></pre>\n\n<p>I printed the address of <code>graphicsQueue</code> and <code>transferQueue</code> and found out that they are the same (same address), so it seems like my graphics Card only Supports a single Queue. So now I'm trying to synchronize the calls to <code>vkQueueSubmit</code> using a Semaphore:</p>\n\n<pre><code>submitInfo.signalSemaphoreCount = 1;\nsubmitInfo.pSignalSemaphores = &amp;queueSemaphore;\n</code></pre>\n\n<p>Unformtunately the error is still the same.</p>\n\n<p>So my question: How do I properly synchronize calls to <code>vkQueueSubmit</code>?</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1533048515, "post_id": 51616057, "comment_id": 90197810, "body": "How about using a plain <code>if</code> and seeing if the optimizer is clever enough to remove dead code? I&#39;d expect it to be."}, {"owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "edited": false, "score": 1, "creation_date": 1533048805, "post_id": 51616057, "comment_id": 90198013, "body": "<code>a-&gt;key = (uint32_t) result;</code> is likely not unique. Malloc could even return <code>(uint32_t) result == 0</code> every time and be perfectly standard conform."}, {"owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "edited": false, "score": 0, "creation_date": 1533048975, "post_id": 51616057, "comment_id": 90198115, "body": "Under Linux how about simply using 32bit addresses? mmap() has a flag <code>MAP_32BIT</code> to allocate memory in the first 2GB of address space. Or use <code>MAP_FIXED</code> with a low enough address. Both would ensure the upper 32bits of any pointer are 0 bits and you can use them without having to map them."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1533049430, "post_id": 51616057, "comment_id": 90198396, "body": "Aside: To avoid <code>int</code> overflow with <code>lm-&gt;key - lr-&gt;key;</code> and <i>undefined behavior</i>, use <code>(lm-&gt;key &gt; lr-&gt;key) - (lm-&gt;key &lt; lr-&gt;key);</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1533049612, "post_id": 51616057, "comment_id": 90198528, "body": "Instead of <code>#if &lt;64-bit&gt;</code>, perhaps <code>#if UINTPTR_MAX &gt; 0xFFFFFFFF</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533049750, "post_id": 51616057, "comment_id": 90198647, "body": "<code>intPtrMap a = malloc(sizeof(intStrMap));</code> is certainly invalid code.  What is code, @Lightning Creations,  trying to do here?"}, {"owner": {"reputation": 67, "user_id": 9407031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQwai.png?s=128&g=1", "display_name": "Lightning Creations", "link": "https://stackoverflow.com/users/9407031/lightning-creations"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1533049913, "post_id": 51616057, "comment_id": 90198751, "body": "@Quentin I came up with a solution. I prefer to use preprocessor in the case of newer compilers with worse optimizers, such as one that is being made for the SNES that is going to be able to run this."}, {"owner": {"reputation": 67, "user_id": 9407031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQwai.png?s=128&g=1", "display_name": "Lightning Creations", "link": "https://stackoverflow.com/users/9407031/lightning-creations"}, "reply_to_user": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "edited": false, "score": 0, "creation_date": 1533049967, "post_id": 51616057, "comment_id": 90198784, "body": "@GoswinvonBrederlow 1. There is under a 1/1000000 chance of collision for each new allocation. I worked it out."}, {"owner": {"reputation": 67, "user_id": 9407031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQwai.png?s=128&g=1", "display_name": "Lightning Creations", "link": "https://stackoverflow.com/users/9407031/lightning-creations"}, "reply_to_user": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "edited": false, "score": 0, "creation_date": 1533050000, "post_id": 51616057, "comment_id": 90198814, "body": "@GoswinvonBrederlow 2. This is made to be cross platform, not just Linux-based."}, {"owner": {"reputation": 67, "user_id": 9407031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQwai.png?s=128&g=1", "display_name": "Lightning Creations", "link": "https://stackoverflow.com/users/9407031/lightning-creations"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533050041, "post_id": 51616057, "comment_id": 90198834, "body": "@chux 1. I will do that! Thank you."}, {"owner": {"reputation": 67, "user_id": 9407031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQwai.png?s=128&g=1", "display_name": "Lightning Creations", "link": "https://stackoverflow.com/users/9407031/lightning-creations"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533050092, "post_id": 51616057, "comment_id": 90198872, "body": "@chux 2. I&#39;ll add that in on the next run!"}, {"owner": {"reputation": 67, "user_id": 9407031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQwai.png?s=128&g=1", "display_name": "Lightning Creations", "link": "https://stackoverflow.com/users/9407031/lightning-creations"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533050107, "post_id": 51616057, "comment_id": 90198886, "body": "@chux 3. Typo. Sorry. That should be a pointer."}, {"owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "edited": false, "score": 0, "creation_date": 1533050425, "post_id": 51616057, "comment_id": 90199118, "body": "The bad old days use configure scripts that compile code using <code>printf(&quot;%d\\n, sizeof(void*))</code> to define a <code>POINTER_SIZE</code> variable for the preprocessor. <i>shiver</i>."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1533050665, "post_id": 51616057, "comment_id": 90199283, "body": "Are you sure OpenGL uses 32-bit pointers and not 32-bit IDs? Have you seen <a href=\"https://stackoverflow.com/a/24694186/5264491\">this answer</a> to <a href=\"https://stackoverflow.com/q/24690014/5264491\">this question</a>?"}, {"owner": {"reputation": 67, "user_id": 9407031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQwai.png?s=128&g=1", "display_name": "Lightning Creations", "link": "https://stackoverflow.com/users/9407031/lightning-creations"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1533052150, "post_id": 51616057, "comment_id": 90200308, "body": "@IanAbbott I would use IDs, but just using memory addresses seems to be easier since I&#39;m not actually using the graphics card at all for this."}, {"owner": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "edited": false, "score": 0, "creation_date": 1533052976, "post_id": 51616057, "comment_id": 90200834, "body": "The code does not smell right. Are you sure this is needed? You do not have types for your parameters."}, {"owner": {"reputation": 67, "user_id": 9407031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQwai.png?s=128&g=1", "display_name": "Lightning Creations", "link": "https://stackoverflow.com/users/9407031/lightning-creations"}, "edited": false, "score": 0, "creation_date": 1533053032, "post_id": 51616057, "comment_id": 90200875, "body": "Also a typo that got fixed."}], "answers": [{"comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1533050044, "post_id": 51616627, "comment_id": 90198839, "body": "You can&#39;t use <code>sizeof</code> in a preprocessor expression."}, {"owner": {"reputation": 67, "user_id": 9407031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQwai.png?s=128&g=1", "display_name": "Lightning Creations", "link": "https://stackoverflow.com/users/9407031/lightning-creations"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1533050153, "post_id": 51616627, "comment_id": 90198915, "body": "It compiles fine, but since I have seen better things in other comments, I will replace it."}, {"owner": {"reputation": 67, "user_id": 9407031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQwai.png?s=128&g=1", "display_name": "Lightning Creations", "link": "https://stackoverflow.com/users/9407031/lightning-creations"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1533050250, "post_id": 51616627, "comment_id": 90198981, "body": "Good idea! Putting that in now."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1533050440, "post_id": 51616627, "comment_id": 90199126, "body": "Actually, your <code>UINTPTR_MAX &gt; 0xFFFFFFFF</code> was more explicit than my <code>UINTPTR_MAX &gt; UINT_MAX</code> suggestion. (Sorry I deleted my comment earlier.)"}, {"owner": {"reputation": 67, "user_id": 9407031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQwai.png?s=128&g=1", "display_name": "Lightning Creations", "link": "https://stackoverflow.com/users/9407031/lightning-creations"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1533052192, "post_id": 51616627, "comment_id": 90200338, "body": "But I&#39;m really comparing it to the UINT max for storage, so this is better."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533052545, "post_id": 51616627, "comment_id": 90200537, "body": "<code>UINTPTR_MAX &gt; UINT_MAX</code> --&gt; The goal is not then to determine if the pointer is 64-bit, but if it wider than <code>unsigned</code>."}, {"owner": {"reputation": 67, "user_id": 9407031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQwai.png?s=128&g=1", "display_name": "Lightning Creations", "link": "https://stackoverflow.com/users/9407031/lightning-creations"}, "edited": false, "score": 0, "creation_date": 1533052904, "post_id": 51616627, "comment_id": 90200779, "body": "And since uint32_t (uint) is 32-bit, bigger would be 64-bit."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1533053948, "post_id": 51616627, "comment_id": 90201391, "body": "This code is a whole lot of wishful thinking. The real world is not so kind."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533053950, "post_id": 51616627, "comment_id": 90201392, "body": "@LightningCreations <code>uint32_t (uint)</code> is unclear.  Also note that <code>UINT_MAX</code> may be as small as 0xFFFF as used in <code>UINTPTR_MAX &gt; UINT_MAX</code>."}, {"owner": {"reputation": 67, "user_id": 9407031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQwai.png?s=128&g=1", "display_name": "Lightning Creations", "link": "https://stackoverflow.com/users/9407031/lightning-creations"}, "edited": false, "score": 0, "creation_date": 1533054611, "post_id": 51616627, "comment_id": 90201709, "body": "In that case, I would need to act as if the pointer were 32-bit anyway, since truncation would kill my system."}], "tags": [], "owner": {"reputation": 67, "user_id": 9407031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQwai.png?s=128&g=1", "display_name": "Lightning Creations", "link": "https://stackoverflow.com/users/9407031/lightning-creations"}, "is_accepted": false, "score": 0, "last_activity_date": 1533050209, "last_edit_date": 1533050209, "creation_date": 1533049813, "answer_id": 51616627, "question_id": 51616057, "link": "https://stackoverflow.com/questions/51616057/how-to-determine-pointer-size-preprocessor-c/51616627#51616627", "title": "How to determine pointer size preprocessor C", "body": "<p>Using other questions on StackOverflow and also a solution from somebody on Discord, I have cobbled together this solution:</p>\n\n<pre><code>#if _WIN32 || _WIN64\n    #if _WIN64\n        #define PTR64\n    #else\n        #define PTR32\n    #endif\n#elif __GNUC__\n    #if __x86_64__ || __ppc64__\n        #define PTR64\n    #else\n        #define PTR32\n    #endif\n#elif UINTPTR_MAX &gt; UINT_MAX\n    #define PTR64\n#else\n    #define PTR32\n#endif\n</code></pre>\n\n<p>This should be able to reliably determine 64-bit or 32-bit pointer usage in preprocessor.</p>\n"}, {"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1533053209, "post_id": 51617465, "comment_id": 90200996, "body": "&quot;<code>It is not uncommon to have a pointer to a function wider than a pointer to an object or </code>void*<code>.</code>&quot; -- It&#39;s certainly permitted by the C standard, but in my experience it is quite uncommon."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1533054229, "post_id": 51617465, "comment_id": 90201529, "body": "<a href=\"https://stackoverflow.com/q/12358843/2410359\">Why are function pointers and data pointers incompatible in C/C++?</a> goes into issues including size."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1533069973, "post_id": 51617465, "comment_id": 90209093, "body": "Yes, I understand the issues. My point is merely that on most modern systems, all pointers are the same size."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 6, "last_activity_date": 1615645168, "last_edit_date": 1615645168, "creation_date": 1533052347, "answer_id": 51617465, "question_id": 51616057, "link": "https://stackoverflow.com/questions/51616057/how-to-determine-pointer-size-preprocessor-c/51617465#51617465", "title": "How to determine pointer size preprocessor C", "body": "<blockquote>\n<p>How to determine pointer size preprocessor C (?)</p>\n</blockquote>\n<p>To determine <em>pointer size</em> in a portable fashion is tricky.</p>\n<p><strong>Various pointers sizes</strong></p>\n<p>It is not uncommon to have a pointer to a function wider than a pointer to an object or <code>void*</code>.<br />\nPointers to <code>int</code> <code>char</code>, <code>struct</code> can be of different sizes, although that is rare.<br />\nSo let us reduce the task to determine <code>void *</code> pointer size.</p>\n<p><strong>Pre-processor math</strong></p>\n<p>PP math is limited, so code needs to be careful.  Let us stay with integer math.</p>\n<p><strong><code>(u)intptr_t</code></strong></p>\n<p>The optional types <a href=\"https://stackoverflow.com/q/1464174/2410359\"><code>(u)intptr_t</code></a>, which are very commonly available, are useful here.  They allow conversion of a <code>void *</code> to an integer and then to an equivalent <code>void*</code>.</p>\n<p>Although the integer type size may differ from the pointer type, that, I assert is rare and detectable with <a href=\"https://stackoverflow.com/q/3385515/2410359\"><code>_Static_assert</code></a> from C11.</p>\n<hr />\n<p>Following will handle many C11 platforms.  Useful ideas toward a general solution.</p>\n<pre><code>#include &lt;stdint.h&gt;\n\n// C11\n_Static_assert(sizeof (void*) == sizeof (uintptr_t), \n    &quot;TBD code needed to determine pointer size&quot;);\n\n// C99 or later\n#if UINTPTR_MAX == 0xFFFF\n  #define PTR16\n#elif UINTPTR_MAX == 0xFFFFFFFF\n  #define PTR32\n#elif UINTPTR_MAX == 0xFFFFFFFFFFFFFFFFu\n  #define PTR64\n#else\n  #error TBD pointer size\n#endif\n</code></pre>\n<hr />\n<p>[Edit 2021]</p>\n<p>With <a href=\"https://stackoverflow.com/a/4589384/2410359\">Is there any way to compute the width of an integer type at compile-time?</a>, code could use, at compile time, the below to find the width of <code>uintptr_t</code>.</p>\n<pre><code>/* Number of bits in inttype_MAX, or in any (1&lt;&lt;k)-1 where 0 &lt;= k &lt; 2040 */\n#define IMAX_BITS(m) ((m)/((m)%255+1) / 255%255*8 + 7-86/((m)%255+12))\n#define UINTPTR_MAX_BITWIDTH IMAX_BITS(UINTPTR_MAX)\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 9407031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zQwai.png?s=128&g=1", "display_name": "Lightning Creations", "link": "https://stackoverflow.com/users/9407031/lightning-creations"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1544, "favorite_count": 1, "accepted_answer_id": 51617465, "answer_count": 2, "score": 6, "last_activity_date": 1615645168, "creation_date": 1533048012, "last_edit_date": 1533050188, "question_id": 51616057, "link": "https://stackoverflow.com/questions/51616057/how-to-determine-pointer-size-preprocessor-c", "title": "How to determine pointer size preprocessor C", "body": "<p>I am working on a software implementation of OpenGL, and OpenGL seems to require that I return 32-bit pointers. To save time, I am putting this into a C equivalent of map with 64-bit systems in order to retrieve 64-bit pointers from 32-bit psuedo-addresses. However, on 32-bit systems, this would cause a hassle, and so I should just use the pointer verbatim.</p>\n\n<p>Here is basically what I want to do in my shared header:</p>\n\n<pre><code>#if &lt;64-bit&gt;\n    #include &lt;search.h&gt;\n    extern void * pointerTable;\n    typedef struct {\n          int key;\n          void* value;\n    } intPtrMap;\n\n    inline int compar(const void *l, const void *r) {\n        const intPtrMap *lm = l;\n        const intPtrMap *lr = r;\n        return lm-&gt;key - lr-&gt;key;\n    }\n\n    inline uint32_t allocate(size) {\n        void* result = malloc(size);\n        intPtrMap *a = malloc(sizeof(intStrMap));\n        a-&gt;key = (uint32_t) result;\n        a-&gt;value = result;\n        tsearch(a, &amp;pointerTable, compar);\n        return (uint32_t) result;\n    }\n\n    inline int getPtr(ptr) {\n        intPtrMap *find_a = malloc(sizeof(intPtrMap));\n        find_a-&gt;key = ptr;\n        void *r = tfind(find_a, &amp;root, compar);\n        return (*(intPtrMap**)r)-&gt;value;\n    }\n#else\n    inline uint32_t allocate(size) {\n        return (uint32_t) malloc(size);\n    }\n\n    inline uint32_t getPtr(ptr) {\n        return (uint32_t) ptr;\n    }\n#endif\n</code></pre>\n\n<p>Any suggestions on how to do the first if?</p>\n"}, {"tags": ["c", "mysql-connector-c"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1533045501, "post_id": 51615065, "comment_id": 90195579, "body": "Did you try simply <code>if (mysql_query(con, sqlbuff))</code>? Arrays in C readily decay into pointers with no effort at all. BTW, beware of <a href=\"https://xkcd.com/327/\" rel=\"nofollow noreferrer\">Bobby Tables</a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533045717, "post_id": 51615065, "comment_id": 90195731, "body": "Character arrays naturally decays to pointers to their first element. I.e. using plain <code>sqlbuff</code> is the same as <code>&amp;sqlbuff[0]</code>, and is of type <code>char *</code>. And a pointer to something can be implicitly used as a pointer to a <code>const</code> something. That is, a <code>char *</code> can be used when a <code>const char *</code> is expected. Lastly, the type of <code>&amp;sqlbuff</code> is <code>char (*)[4096]</code>, and pointers to arrays like that are almost never needed."}, {"owner": {"reputation": 211, "user_id": 3813942, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dc361363acfd950e758300e67bdb4448?s=128&d=identicon&r=PG&f=1", "display_name": "user3813942", "link": "https://stackoverflow.com/users/3813942/user3813942"}, "edited": false, "score": 0, "creation_date": 1533045761, "post_id": 51615065, "comment_id": 90195757, "body": "Yes, I tried that originally.  I get a &quot;Memory fault(coredump)&quot; when I do that.  I&#39;m running this on HP-UX which I&#39;ll add to the OP.  Idk if that is a factor."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533046701, "post_id": 51615065, "comment_id": 90196453, "body": "@user3813942 please don&#39;t change parts of your code you already got answers for, I rolled back that change, as it would invalidate the answers. And about your &quot;memory fault&quot;, it&#39;s most likely not a matter of the OS used and it isn&#39;t in the part of code you show. What is <code>idVar</code>? It might have the wrong type for <code>%s</code> or you might overflow your buffer .... impossible to tell from that code snippet"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1533047324, "post_id": 51615065, "comment_id": 90196871, "body": "BTW, you could have avoided this, being aware of the <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">&quot;XY problem&quot; issue</a>. Your real problem is that your program crashes. You <b>think</b> it has to do with <code>const char*</code> (it doesn&#39;t), but instead of asking about your actual problem, you asked about what you thought would be the solution. Well, if you don&#39;t find the issue, just ask a new question and include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> :)"}], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 3813942, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dc361363acfd950e758300e67bdb4448?s=128&d=identicon&r=PG&f=1", "display_name": "user3813942", "link": "https://stackoverflow.com/users/3813942/user3813942"}, "edited": false, "score": 0, "creation_date": 1533046427, "post_id": 51615345, "comment_id": 90196249, "body": "I don&#39;t know if it&#39;s HP-UX or the MySQL connector but I get an error when I try that.  &quot;Memory fault(coredump)&quot; is all it says.  Sounds like it&#39;s a unique problem though, as your answer explains the const char* should be satisfied with just passing my char[] variable."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 211, "user_id": 3813942, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dc361363acfd950e758300e67bdb4448?s=128&d=identicon&r=PG&f=1", "display_name": "user3813942", "link": "https://stackoverflow.com/users/3813942/user3813942"}, "edited": false, "score": 1, "creation_date": 1533046910, "post_id": 51615345, "comment_id": 90196579, "body": "@user3813942 it&#39;s a very bad idea to think the environment / OS is at fault when your program crashes. in 99.999% of all cases, it&#39;s your program&#39;s fault."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 211, "user_id": 3813942, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dc361363acfd950e758300e67bdb4448?s=128&d=identicon&r=PG&f=1", "display_name": "user3813942", "link": "https://stackoverflow.com/users/3813942/user3813942"}, "edited": false, "score": 2, "creation_date": 1533046988, "post_id": 51615345, "comment_id": 90196642, "body": "@user3813942, such an error as you describe arises from bad data or incorrect use of the data.  Overrunning the bounds of the array is one possibility.  Using your pointer after the end of the lifetime of the thing it points to is another.  But this would be the subject of a different question."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 211, "user_id": 3813942, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dc361363acfd950e758300e67bdb4448?s=128&d=identicon&r=PG&f=1", "display_name": "user3813942", "link": "https://stackoverflow.com/users/3813942/user3813942"}, "edited": false, "score": 1, "creation_date": 1533047756, "post_id": 51615345, "comment_id": 90197204, "body": "@user3813942: What is the type of <code>idVar</code>?  If it&#39;s an integer, then that would explain the crash - you would need to use <code>%d</code> instead of <code>%s</code>."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1533046054, "creation_date": 1533046054, "answer_id": 51615345, "question_id": 51615065, "link": "https://stackoverflow.com/questions/51615065/c-create-const-char-from-char/51615345#51615345", "title": "C - Create const char* from char[]", "body": "<blockquote>\n  <p>I need to make a <code>const char*</code> from that <code>char[]</code></p>\n</blockquote>\n\n<p>From your code sample, it seems that what you mean is that you want a <code>const char *</code> that points to the contents of your <code>char[]</code>.  That's devastatingly easy:</p>\n\n<pre><code>sqlquery = sqlbuff;\n</code></pre>\n\n<p>This is because values of array type are automatically converted to pointers in almost all expression contexts, and because it is allowed to assign a value of non-<code>const</code> type to a variable of the corresponding <code>const</code>-qualified type.</p>\n\n<p>Moreover, for what you show, you don't even need the variable.  You can just specify the identifier of the array as the argument to <code>mysql_query</code>.  The same automatic conversion from array to pointer applies here, and you can reasonably interpret the <code>const</code> qualifier in the type of its second argument as a promise that that function will not try to modify the pointed-to data.:</p>\n\n<pre><code>mysql_query(con, sqlbuf);\n</code></pre>\n\n<p>On the other hand, your attempt,</p>\n\n<pre><code>sqlquery = &amp;sqlbuff;  // wrong\n</code></pre>\n\n<p>, generates a pointer of the wrong type.  <code>&amp;sqlbuf</code> is a pointer <em>to an array</em>, whereas <code>sqlquery</code> is declared to be a pointer <em>to a char</em>.  A pointer to the first <code>char</code> of a <code>char[]</code> will point to the same place as a pointer to the whole array, but the two have different types.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 3, "last_activity_date": 1533046539, "last_edit_date": 1533046539, "creation_date": 1533046225, "answer_id": 51615409, "question_id": 51615065, "link": "https://stackoverflow.com/questions/51615065/c-create-const-char-from-char/51615409#51615409", "title": "C - Create const char* from char[]", "body": "<p>This line is wrong:</p>\n\n<pre><code>sqlquery = &amp;sqlbuff;\n</code></pre>\n\n<p><code>sqlbuff</code> has type <code>char []</code>, so taking its address gives you a <em>pointer to array</em>, type <code>char (*)[]</code>. You just want a pointer to the first <code>char</code> (type <code>char *</code>), and evaluating the identifier of an array results in such a pointer in most contexts (there are some exceptions like when used with <code>sizeof</code>). So, just write</p>\n\n<pre><code>sqlquery = sqlbuff;\n</code></pre>\n\n<p>That said, there's no need to have a separate pointer variable at all. <code>sqlbuff</code> evaluates to <code>char *</code>, and a pointer is convertable to its <code>const</code>-qualified  counterpart implicitly. Just pass <code>sqlbuff</code> directly where a <code>const char *</code> is expected and it will work.</p>\n\n<hr>\n\n<p>Another thing should be mentioned although not directly related to your question: You should <strong>never construct SQL queries from user input using string operations</strong>. Attackers can easily inject own SQL code this way. Read the documentation of your SQL client library and look for <em>prepared statements</em> and <em>parameter binding</em> and use this everywhere user input needs to be a parameter in a SQL query.</p>\n\n<hr>\n\n<p>And one more hint: If you find yourself writing code like</p>\n\n<pre><code>sprintf(\"%s\", \"foobar\");\n</code></pre>\n\n<p>e.g., you're giving a constant string for a <code>%s</code> conversion, you're doing it wrong. Just make your constant string part of your format-string.</p>\n"}], "owner": {"reputation": 211, "user_id": 3813942, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dc361363acfd950e758300e67bdb4448?s=128&d=identicon&r=PG&f=1", "display_name": "user3813942", "link": "https://stackoverflow.com/users/3813942/user3813942"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 0, "accepted_answer_id": 51615345, "answer_count": 2, "score": -1, "last_activity_date": 1533069027, "creation_date": 1533045306, "last_edit_date": 1533069027, "question_id": 51615065, "link": "https://stackoverflow.com/questions/51615065/c-create-const-char-from-char", "title": "C - Create const char* from char[]", "body": "<p>This seems simple but I'm new to C and can't find anyone asking this online. I have a <code>char[]</code> that I set with <code>sprintf</code>. Then I need to make a <code>const char*</code> from that <code>char[]</code>.  Is that possible or do I need to play around with my types?  I need a <code>const char*</code> to enter into a MySQL query, but I need the <code>char[]</code> because I need to use <code>sprintf</code> to insert variable values into the result.  Here is the code snippet:</p>\n\n<pre><code>char sqlbuff[4096];\nconst char* sqlquery;\nsprintf(sqlbuff, \" %s %s \",\n        \"SELECT idnum FROM idTbl WHERE idCol =\", idVar);\n\nsqlquery = &amp;sqlbuff;\n\nif ( mysql_query(con, sqlquery) ) \n{\n    finish_with_error(con);\n}\n</code></pre>\n\n<p>I've tried setting the <code>const char</code> variable in multiple ways, but I always get an error.  If I hardcode a value for <code>idVar</code> and simply run </p>\n\n<pre><code>mysql_query(con, \"SELECT idnum FROM idTbl WHERE idCol = 1300)\n</code></pre>\n\n<p>it works fine.  The problem is I need to use <code>sprintf</code> to utilize the variable.  All help is appreciated.</p>\n\n<p>Edit: Running on <em>HP-UX 11.11</em></p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 7, "creation_date": 1533042799, "post_id": 51614229, "comment_id": 90193787, "body": "Consider <code>switch(getmonth())</code> vs <code>switch(month)</code>"}, {"owner": {"reputation": 15, "user_id": 10160725, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WcoJjilmB2E/AAAAAAAAAAI/AAAAAAAAAA8/RcJWB1MTJtA/photo.jpg?sz=128", "display_name": "Aya Endo", "link": "https://stackoverflow.com/users/10160725/aya-endo"}, "reply_to_user": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 1, "creation_date": 1533043034, "post_id": 51614229, "comment_id": 90193922, "body": "ahh i see it now, thank you so much !!"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1533047613, "post_id": 51614229, "comment_id": 90197092, "body": "Note that it is generally best to end format strings with a newline, rather than start them newline and omit the newline at the end.  All else apart, it makes debugging easier \u2014 the output appears in a more timely manner when there&#39;s a newline at the end to encourage the system to show the data just printed."}], "answers": [{"tags": [], "owner": {"reputation": 60, "user_id": 9475447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db936717aca828c4c819c4edf95139e1?s=128&d=identicon&r=PG&f=1", "display_name": "Abdell00", "link": "https://stackoverflow.com/users/9475447/abdell00"}, "is_accepted": true, "score": 1, "last_activity_date": 1533047381, "last_edit_date": 1533047381, "creation_date": 1533044559, "answer_id": 51614843, "question_id": 51614229, "link": "https://stackoverflow.com/questions/51614229/multiple-scanfs/51614843#51614843", "title": "Multiple scanfs?", "body": "<p>The problem is in the <code>zodiacloop</code> function:\nin this line <code>months=getmonth();</code> you call <code>getmonth()</code> for the first time.\nAfter that you call <code>zodiacsign</code>, and in  <code>switch(getmonth())</code> you call <code>getmonth()</code> for the second time.</p>\n\n<p>So the solution is that you should replace <code>switch(getmonth())</code> by <code>switch(month)</code> in order to avoid calling <code>getmonth()</code> two times!</p>\n"}], "owner": {"reputation": 15, "user_id": 10160725, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WcoJjilmB2E/AAAAAAAAAAI/AAAAAAAAAA8/RcJWB1MTJtA/photo.jpg?sz=128", "display_name": "Aya Endo", "link": "https://stackoverflow.com/users/10160725/aya-endo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 51614843, "answer_count": 1, "score": -1, "last_activity_date": 1533047381, "creation_date": 1533042696, "last_edit_date": 1533044440, "question_id": 51614229, "link": "https://stackoverflow.com/questions/51614229/multiple-scanfs", "title": "Multiple scanfs?", "body": "<p>When l run the program, it asks to enter birth month then when l hit enter it asks to enter the day but when l click enter, it asks again to enter the birth month.\n<br>\nWhy does it has multiple scanfs on <code>getmonth</code> function? help</p>\n\n<pre><code>int getmonth();\nint getday();\nint zodiacsign(int month, int day);\nvoid zodiacloop();\n\nint main(){\n        zodiacloop();\n        return;\n}\n\nint getmonth(){\n    int month;\n    printf(\"\\nEnter birth month(1-12): \");\n    scanf(\"%d\",&amp;month);\n    return month;\n}\n\nint getday(){\n    int day;\n    printf(\"\\nEnter birth day(1-31): \");\n    scanf(\"%d\",&amp;day);\n    return day;\n}\n\nint zodiacsign(int month, int day){\n    switch(getmonth()){\n        case 1: \n        if(day&gt;=21)\n        printf(\"\\nAquarius\");\n        break;\n}\n}\n\nvoid zodiacloop(){\n    int months,day;\n    months=getmonth();\n    day=getday();\n    zodiacsign(months,day);\n}\n</code></pre>\n"}, {"tags": ["c", "time"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1533042166, "post_id": 51613967, "comment_id": 90193329, "body": "What is the input you&#39;re using? What do you expect the output to be?"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1533042287, "post_id": 51613967, "comment_id": 90193407, "body": "Hours and minutes are painful to deal with.  Convert your times to a reasonable format (eg, seconds from epoch), do calculations in that reasonable format, then convert back."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1533043704, "post_id": 51613967, "comment_id": 90194336, "body": "If normalising to <code>time_t</code> (seconds since <i>epoch</i>) then there is <code>difftime()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10160677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662ecbec5f78c9f8b2e1a24dcf5cca27?s=128&d=identicon&r=PG&f=1", "display_name": "elleiruj", "link": "https://stackoverflow.com/users/10160677/elleiruj"}, "edited": false, "score": 0, "creation_date": 1533046125, "post_id": 51614133, "comment_id": 90196032, "body": "thank you, also for the tips too, it worked. I&#39;ve been struggling with this. yeah i&#39;m a beginner in coding so sorry hehe."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533046541, "post_id": 51614133, "comment_id": 90196334, "body": "<code>tohours = totime &#47; 60;</code> is sufficient rather than <code>tohours = (totime - tominutes) &#47; 60;</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533046928, "post_id": 51614133, "comment_id": 90196599, "body": "Detail: Integer division in C, since C99, does not &quot;round down&quot; (toward -infinity), but round toward 0.  In effect the fractional part of the true quotient is discarded.  So -7/4 is -1, not a rounded down -2."}], "tags": [], "owner": {"reputation": 242, "user_id": 10135201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6yn9t.png?s=128&g=1", "display_name": "Holzchopf", "link": "https://stackoverflow.com/users/10135201/holzchopf"}, "is_accepted": true, "score": 1, "last_activity_date": 1533042802, "last_edit_date": 1533042802, "creation_date": 1533042402, "answer_id": 51614133, "question_id": 51613967, "link": "https://stackoverflow.com/questions/51613967/get-time-difference-without-if-else-statement/51614133#51614133", "title": "Get Time Difference without if else statement", "body": "<p>Use (some sort of) timestamps, by turning your hours and minutes variables into one, e.g:</p>\n\n<pre><code>stime = shours * 60 + sminutes;\netime = ehours * 60 + eminutes;\n</code></pre>\n\n<p>then calculate de difference of that</p>\n\n<pre><code>totime = etime - stime;\n</code></pre>\n\n<p>then convert that back into hours and minutes</p>\n\n<pre><code>tominutes = totime % 60;\ntohours = (totime - tominutes) / 60;\n</code></pre>\n\n<p>(integer division will take care of rounding down)</p>\n\n<p>Not the most elaborated solution, but I guess you're looking for an beginners-friendly solution</p>\n\n<p><strong>Edit</strong></p>\n\n<p>speaking of beginner-friendly: the % is the modulus operator that returns the remainder of a division. So when you divide 119 by 60 it returns 59. And yes, you could also just get the hours from dividing <em>totime</em> by 60 and let the integer division do the job, but it's nicer (read: clearer to read what's going on) when you divide <em>(totime - tominutes)</em> because it's like the missing part to the line with the modulus</p>\n"}], "owner": {"reputation": 1, "user_id": 10160677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/662ecbec5f78c9f8b2e1a24dcf5cca27?s=128&d=identicon&r=PG&f=1", "display_name": "elleiruj", "link": "https://stackoverflow.com/users/10160677/elleiruj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 51614133, "answer_count": 1, "score": -3, "last_activity_date": 1533042802, "creation_date": 1533041902, "question_id": 51613967, "link": "https://stackoverflow.com/questions/51613967/get-time-difference-without-if-else-statement", "title": "Get Time Difference without if else statement", "body": "<p><a href=\"https://i.stack.imgur.com/ACMSu.png\" rel=\"nofollow noreferrer\">C Time Difference</a></p>\n\n<pre><code>scanf (\"%2d %2d\", &amp;shours, &amp;sminutes); \nprintf (\"Enter End Time  : \");\nscanf (\"%2d %2d\", &amp;ehours, &amp;eminutes);\nprintf (\"\\nTIME DIFFERENCE\\n\");\ntohours = ehours - shours;\nprintf(\"Hour(s)  : %2d\", tohours);\ntominute = eminutes - sminutes;\nprintf(\"\\nMinute(s): %2d \", tominute);\n</code></pre>\n\n<p>How can I make my output like this? When I try to run my code the minutes output is -59 instead of 1 and my hours is the one who got the output \"1\"</p>\n\n<p>P.S. without using the if else statements</p>\n"}, {"tags": ["c", "multithreading"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533038795, "post_id": 51612987, "comment_id": 90190851, "body": "Buffering issues? Also note that output to <code>stdout</code> is by default <i>line-buffered</i>, meaning the output buffer will be flushed on a newline. That&#39;s why you should always put newlines <i>last</i> in your output."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1533038838, "post_id": 51612987, "comment_id": 90190885, "body": "Also note that your process might exit before all threads have started running, or before they are finished. That will kill all threads."}, {"owner": {"reputation": 61, "user_id": 9428187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a86b815b627032de0503f287ebe2d4cf?s=128&d=identicon&r=PG&f=1", "display_name": "loannnlo", "link": "https://stackoverflow.com/users/9428187/loannnlo"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533039120, "post_id": 51612987, "comment_id": 90191112, "body": "If I put sleep for one second, all 10 numbers are printed, but without sleep and newlines in the end, still some are printed twice"}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1533039367, "post_id": 51612987, "comment_id": 90191308, "body": "@Someprogrammerdude I think waiting on the child threads for their termination should work (<code>pthread_join</code>)?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533039385, "post_id": 51612987, "comment_id": 90191329, "body": "Then it&#39;s most likely a buffering issues when the process ends. Perhaps something like this: In your example the thread 8 have filled the buffer and it have been printed, but then the process ends before the buffer is cleared, and when the process ends the buffer is flushed (and printed!) so you see that line again."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 0, "creation_date": 1533039446, "post_id": 51612987, "comment_id": 90191374, "body": "@Alan Yes, waiting for the threads (in a second loop) is definitely the right thing to do. Always (unless detaching the threads of course, but then the process should still not plain end)."}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533039520, "post_id": 51612987, "comment_id": 90191425, "body": "@Someprogrammerdude so that should be the answer to the <code>OP&#39;s</code> question tho."}, {"owner": {"reputation": 61, "user_id": 9428187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a86b815b627032de0503f287ebe2d4cf?s=128&d=identicon&r=PG&f=1", "display_name": "loannnlo", "link": "https://stackoverflow.com/users/9428187/loannnlo"}, "edited": false, "score": 0, "creation_date": 1533039572, "post_id": 51612987, "comment_id": 90191468, "body": "@FelixPalmen creating array of pthread_t and passing a different one each time works! I definitely dont understand why"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533039658, "post_id": 51612987, "comment_id": 90191533, "body": "@loannnlo I didn&#39;t find any evidence so far, therefore deleted this comment. But I&#39;m not sure what a <code>pthreads</code> implementation is allowed to put inside a <code>pthread_t</code>. If the argument pointer might be stored there, that would be a simple explanation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533039805, "post_id": 51612987, "comment_id": 90191664, "body": "@loannnlo anyways, you&#39;ll need all those <code>pthread_t</code>s for properly joining the threads when they finished."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1533041722, "post_id": 51612987, "comment_id": 90193008, "body": "@loannnlo The &quot;duplicate output&quot; is a bug in glibc (see the linked duplicate). Simple fix is to call <code>pthread_exit(0);</code> at the end of main so that only main thread exits. This way you wouldn&#39;t need <code>pthread_join</code> or have to store pthread_t ids."}], "answers": [{"comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533040637, "post_id": 51613504, "comment_id": 90192253, "body": "Also it&#39;s worth to mention that each thread must have it own <code>pthread_t</code> variable."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533040745, "post_id": 51613504, "comment_id": 90192341, "body": "@4386427 that was my <b>guess</b> as well, but can you provide some evidence for that?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533040841, "post_id": 51613504, "comment_id": 90192417, "body": "@FelixPalmen Well evidence... hmmm, I don&#39;t know but the variable hold the information for identifying the individual thread. So overwriting the value when creating the next thread will make you loose the handle to the thread."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533040905, "post_id": 51613504, "comment_id": 90192459, "body": "@4386427 sure, but that alone isn&#39;t enough for a <b>must</b> -- or do you mean &quot;<i>in order to use <code>pthread_join()</code></i>&quot;?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533040910, "post_id": 51613504, "comment_id": 90192463, "body": "@FelixPalmen Not sure if this quote from a man page is sufficient as evidence: &quot;Before returning, a successful call to pthread_create() stores the ID        of the new thread in the buffer pointed to by thread; this identifier        is used to refer to the thread in subsequent calls to other pthreads        functions.&quot;"}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 0, "creation_date": 1533040911, "post_id": 51613504, "comment_id": 90192464, "body": "The simpliest solution would be to create a <code>pthread</code> array and wait for each thread in relation to the index."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533041145, "post_id": 51613504, "comment_id": 90192626, "body": "@FelixPalmen yes. <code>pthread_join</code> is one function that requires the variable but there are other pthread functions than join that requires it. To me overwriting the pthread_t variable for a running thread is similar to overwriting a pointer to dynamic allocated memory or a file pointer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533042075, "post_id": 51613504, "comment_id": 90193263, "body": "@4386427 I understand your point, but both of them aren&#39;t forbidden. OP said the duplicates went away by not reusing the <code>pthread_t</code>s. A simple explanation would be the threading library stores the argument pointer there, creating a race condition when the thread isn&#39;t scheduled immediately. This would be an error if it isn&#39;t explicitly forbidden to reuse a <code>pthread_t</code> of a running thread."}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 0, "creation_date": 1533042271, "post_id": 51613504, "comment_id": 90193394, "body": "@FelixPalmen my answer is right? should solve OP&#39;s question. Doesn&#39;t it?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1533042540, "post_id": 51613504, "comment_id": 90193610, "body": "@FelixPalmen The problem does <b>not</b> go away simply by not reusing <code>pthread_t</code>. The <code>pthread_join</code> is also required."}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533042803, "post_id": 51613504, "comment_id": 90193790, "body": "@4386427 yes so why doesn`t my answer get upvoted? Is there anything which is not correct?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533042933, "post_id": 51613504, "comment_id": 90193864, "body": "@alan I&#39;m not sure about the correctness of the explanation in the start of your answer. Therefore I can&#39;t vote. But the last part (i.e. under the edit) do seem correct to me."}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533043014, "post_id": 51613504, "comment_id": 90193913, "body": "@4386427 I think it should be upvoted tho. but yes no problem. :), I am here to help not for the rep."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533045572, "post_id": 51613504, "comment_id": 90195628, "body": "@4386427 see <a href=\"https://stackoverflow.com/questions/51612987/print-passed-argument-to-pthread-create?noredirect=1#comment90191468_51612987\">this comment</a>, it suggests otherwise."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533045771, "post_id": 51613504, "comment_id": 90195766, "body": "@FelixPalmen I did read that comment. Maybe the timing of OPs system made it work for OP but on my system it also fails with an array of pthread_t In other words the <code>join</code> is required."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1533046550, "post_id": 51613504, "comment_id": 90196340, "body": "It would be interesting to check the code to see if there is a null check on the threadId pointer.  It&#39;s not uncommon for pointer arguments to be ignored if set to null, eg. if a threadId is not required.  The available documentation does not say there is, nor that there is not, (so, of course, you have to assume there is not).  In many cases, there would be a big design problem if the lifetime of the the threadId store had to be the same as the thread, especially if detaching a new thread somewhere in a library/subsystem - it would be a really nasty contraint."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1533046843, "post_id": 51613504, "comment_id": 90196540, "body": "&#39;you have to waitfor your threads, or in other words you have to join your threads&#39; - or ensure that their work is complete in some other manner."}], "tags": [], "owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "is_accepted": true, "score": 1, "last_activity_date": 1533041515, "last_edit_date": 1533041515, "creation_date": 1533040412, "answer_id": 51613504, "question_id": 51612987, "link": "https://stackoverflow.com/questions/51612987/print-passed-argument-to-pthread-create/51613504#51613504", "title": "Print passed argument to pthread_create", "body": "<p>As @Some programmer dude mentioned, you should always wait for the termination of your single <code>child threads</code> in your <code>main</code> function (except you detach your threads). The reason <code>why</code> some of your <code>array</code>elements are printed twice or more often is because before your buffer is cleared the <code>thread</code> may gets killed. (In your case the <code>thread 8</code>). To avoid that the processes are shut-down before they have finished their work you have to <code>wait</code>for your threads, or in other words you have to join your threads.</p>\n\n<p><strong>That is done by adding the function</strong>:   <code>pthread_join(pthread_t thread, void **retvalue);</code></p>\n\n<blockquote>\n  <p>The pthread_join() function waits for the thread specified by thread to terminate. </p>\n</blockquote>\n\n<p>Just put it in a separate <code>loop</code>after your <code>pthread_create() function</code> and the parent <code>thread</code> (main) will wait for his childs.</p>\n\n<p><strong>Edit:</strong><br>\nTo wait for each <code>thread</code> you could change your <code>pthread_t</code>variable to an array of threads: <code>pthread_t thread[10]</code> so you could wait for each thread in relation to the index.</p>\n\n<pre><code>int arr[10]={0,1,2,3,4,5,6,7,8,9};\npthread_t thread[10];\n\nfor(int i=0;i&lt;10;i++){\n    pthread_create(&amp;thread[i], NULL, &amp;thr_func,&amp;arr[i]);\n}\n\nfor(int i=0;i&lt;10;i++){\n    pthread_join(thread[i],NULL);\n}\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9428187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a86b815b627032de0503f287ebe2d4cf?s=128&d=identicon&r=PG&f=1", "display_name": "loannnlo", "link": "https://stackoverflow.com/users/9428187/loannnlo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "closed_date": 1533041332, "accepted_answer_id": 51613504, "answer_count": 1, "score": 0, "last_activity_date": 1533041515, "creation_date": 1533038627, "question_id": 51612987, "link": "https://stackoverflow.com/questions/51612987/print-passed-argument-to-pthread-create", "closed_reason": "Duplicate", "title": "Print passed argument to pthread_create", "body": "<p>I want to print the passed to <code>create_thread</code> argument. I create an array with 10 <code>int</code>'s to simulate the number of each thread - </p>\n\n<pre><code>void* thr_func(void *arg){\n\nprintf(\"\\nTHREAD ID %d\", *(int*)arg);\nreturn 0;\n\n}\n\n\nint main(){\nint arr[10]={0,1,2,3,4,5,6,7,8,9};\n\npthread_t thread_id;\nfor(int i=0;i&lt;10;i++){\n\npthread_create(&amp;thread_id, NULL, &amp;thr_func,&amp;arr[i]);\n}\nreturn 0;\n\n}\n</code></pre>\n\n<p>Here is the output from two runs\n1: </p>\n\n<pre><code>THREAD ID 1\nTHREAD ID 5\nTHREAD ID 6\nTHREAD ID 2\nTHREAD ID 3\nTHREAD ID 4\nTTHREAD ID 0\nTHREAD ID 3\n</code></pre>\n\n<p>2:</p>\n\n<pre><code>THREAD ID 1\nTHREAD ID 2\nTHREAD ID 5\nTHREAD ID 6\nTHREAD ID 3\nTHREAD ID 7\nTHREAD ID 4\nTHREAD ID 8\nTHREAD ID 8\n</code></pre>\n\n<p>I know I can't rely on consecutive numbers, but why does it print some of them twice ? </p>\n"}, {"tags": ["c", "fixed-point"], "comments": [{"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1533038803, "post_id": 51612961, "comment_id": 90190857, "body": "You need to provide more info so that you can receive help."}, {"owner": {"reputation": 157, "user_id": 6229792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c72735911c8b38a35d895e4429d921d9?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian E", "link": "https://stackoverflow.com/users/6229792/sebastian-e"}, "reply_to_user": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "edited": false, "score": 0, "creation_date": 1533039052, "post_id": 51612961, "comment_id": 90191052, "body": "what do you need to know? I&#180;m sorry if the question is stupid, but I can&#180;t find any real documentation or tutorial for the lib."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533039787, "post_id": 51612961, "comment_id": 90191646, "body": "What is a special option in terms of gcc? Maybe what you consider special, others would consider a requirement for building your project - add the full command(s) you&#39;re using to compile your code"}], "answers": [{"tags": [], "owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "is_accepted": false, "score": 1, "last_activity_date": 1533045042, "creation_date": 1533045042, "answer_id": 51614992, "question_id": 51612961, "link": "https://stackoverflow.com/questions/51612961/libfixmath-undefined-reference/51614992#51614992", "title": "libfixmath undefined reference", "body": "<p>The <a href=\"http://www.nongnu.org/fixmath/doc/index.html\" rel=\"nofollow noreferrer\">documentation</a> says<br>\n<code>To use the fixmath library, include the header &lt;fixmath/fixmath.h&gt;, and link the application with -lfixmath, or use pkg-config to determine the compiler and linker flags.</code></p>\n\n<p>So change</p>\n\n<pre><code>gcc -o testfix testfix.c\n</code></pre>\n\n<p>to</p>\n\n<pre><code>gcc -o testfix testfix.c -lfixmath\n</code></pre>\n\n<p>and it should work.</p>\n"}], "owner": {"reputation": 157, "user_id": 6229792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c72735911c8b38a35d895e4429d921d9?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian E", "link": "https://stackoverflow.com/users/6229792/sebastian-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1533045042, "creation_date": 1533038553, "last_edit_date": 1533039966, "question_id": 51612961, "link": "https://stackoverflow.com/questions/51612961/libfixmath-undefined-reference", "title": "libfixmath undefined reference", "body": "<p>I\u00b4m trying to produce a little example code for the library libfixmath and I get the error \"undefined reference to `fix16_mul' \"</p>\n\n<p>The code is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"libfixmath/fixmath.h\"\n\nint main(){\n\n    fix16_t res = fix16_mul(fix16_from_int(1), fix16_from_int(2));\n\n    return 0;\n}\n</code></pre>\n\n<p>The library is at the specified path and I compile just with the command </p>\n\n<pre><code>gcc -o testfix testfix.c\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "global-variables", "header-files"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1533038382, "post_id": 51612866, "comment_id": 90190540, "body": "If you program in C++ then please only tag C++."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533038436, "post_id": 51612866, "comment_id": 90190576, "body": "As for your problem, have you considered the singleton pattern? It&#39;s very common for loggers, and can easily be adapted to hold &quot;global&quot; data for a header-only library."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4380604"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533038467, "post_id": 51612866, "comment_id": 90190605, "body": "@Someprogrammerdude i added special note to say that i&#39;m looking for both c/c++ solution"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533038489, "post_id": 51612866, "comment_id": 90190627, "body": "Lastly,, why are you making your own logging library? There are plenty out there already? What use-case will your library solve that can&#39;t be solved by others? Or is it just an exercise or learning experience?"}, {"owner": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "edited": false, "score": 0, "creation_date": 1533038494, "post_id": 51612866, "comment_id": 90190630, "body": "At some point I also used the <code>static</code> trick to set constant values visible from the header file. They are duplicated in each module which include the header file. This is quite convenient because you only need to define it once. And, as they are constant, you do not have any problem at duplicating it. But, I guess that you are speaking about real variables (meaning that you want to modify their values)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4380604"}, "reply_to_user": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "edited": false, "score": 0, "creation_date": 1533038543, "post_id": 51612866, "comment_id": 90190669, "body": "@perror I do want to modify them, yes"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1533038576, "post_id": 51612866, "comment_id": 90190692, "body": "You do know that C and C++ are two <i>very</i> different languages? Solutions using C++ might not be possible to use in C, and the opposite (though that&#39;s more unlikely)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4380604"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533038670, "post_id": 51612866, "comment_id": 90190773, "body": "@Someprogrammerdude Sure, as well as some C realizations may not be used in C++ due to broken backward compability at some place. That&#39;s why this note was required"}, {"owner": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "edited": false, "score": 0, "creation_date": 1533038723, "post_id": 51612866, "comment_id": 90190805, "body": "@Indev: So, the best way is to do as for the <code>errno</code> module, you will define a variable present in the implementation (<code>.c</code>) and flagged as <code>extern</code> in the header file."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4380604"}, "reply_to_user": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "edited": false, "score": 0, "creation_date": 1533038927, "post_id": 51612866, "comment_id": 90190951, "body": "@perror so there is no actual way to avoid implementation in source file?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4380604"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533039029, "post_id": 51612866, "comment_id": 90191041, "body": "@Someprogrammerdude i didn&#39;t hear about any singleton implementations in pure c, is it even possible? :)"}, {"owner": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "edited": false, "score": 0, "creation_date": 1533040296, "post_id": 51612866, "comment_id": 90192027, "body": "@Indev29: Well, the header files do not really exist in memory. They are just used to connect modules together. So, I do not exactly see how we could store a value in thin air... you obviously need to have it stored in a module of your program. Or, I might have misunderstood what you meant..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1533048211, "post_id": 51612866, "comment_id": 90197576, "body": "There is no &quot;broken backwrds compatibility. C and C++ are not intended to be compatible. Your question does not make sense, it&#39;s most likely an XY problem steming from missconceptions what headers are or some nonsense artificial constraint."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4380604"}, "edited": false, "score": 0, "creation_date": 1533038606, "post_id": 51612943, "comment_id": 90190721, "body": "I wrote about this approach in my question. I can&#39;t add code to translation units as i have header only library"}, {"owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "edited": false, "score": 0, "creation_date": 1533038761, "post_id": 51612943, "comment_id": 90190832, "body": "@Indev29 Only the first snippet is for the header file. The one-liner to demonstrate the usage in a translation unit is client code, not your library."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4380604"}, "edited": false, "score": 0, "creation_date": 1533038870, "post_id": 51612943, "comment_id": 90190904, "body": "i get it, this is Meyer&#39;s singleton which will work for c++ and what about c realization?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533039010, "post_id": 51612943, "comment_id": 90191027, "body": "@Indev29 Return a pointer, and use a macro that dereferences the value returned by the function? Like is usually done for <code>errno</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4380604"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1533039124, "post_id": 51612943, "comment_id": 90191114, "body": "@Someprogrammerdude i&#39;ll return pointer to a static variable, sure, but it (variable) will have different value for each translation unit"}, {"owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "edited": false, "score": 0, "creation_date": 1533039187, "post_id": 51612943, "comment_id": 90191158, "body": "@Indev29 No, it will have the same value (from my answer: &quot;it is guaranteed that the local static variables are unique across your program&quot;)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1533046885, "post_id": 51612943, "comment_id": 90196564, "body": "@lubgr: C++ makes that guarantee but C specifies the opposite: &quot;Since an inline definition is distinct from the corresponding external definition and from any other corresponding inline definitions in other translation units, all corresponding objects with static storage duration are also distinct in each of the definitions.&quot; (Footnote 140 in section 6.7.4). If you have been using this approach in C without problems, it might be because GCC by default implements non-standard semantics."}, {"owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "edited": false, "score": 0, "creation_date": 1533050289, "post_id": 51612943, "comment_id": 90199018, "body": "It can even simply fail to compile due to multiple definitions of <code>someOption()</code> when linking. To be compatible any <code>inline</code> needs to be <code>static</code> as well defeating the purpose."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "edited": false, "score": 0, "creation_date": 1533054670, "post_id": 51612943, "comment_id": 90201744, "body": "@goswin: That&#39;s not quite correct either. In standard C, <code>inline</code> with neither <code>static</code> nor <code>extern</code> does not define a function at all; it <i>declares</i> a function with external linkage and provides an optional inline substitution. Since there are no definitions at all, the link step could indeed fail. But it will not fail because it finds multiple definitions. It will fail if the compiler chooses not to do the inline substitution at some callsite, since the linker will then not find any definition of <code>someOption</code>. (GCC does not inline unless some optimisation level is set, so it&#39;s easy to test.)"}, {"owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1533060047, "post_id": 51612943, "comment_id": 90204411, "body": "@rici Thanks for the correction, I added this hint to the answer."}, {"owner": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1533559708, "post_id": 51612943, "comment_id": 90376909, "body": "@rici It might not be what the standard says but historically just specifying inline gets you all kinds of behavior depending on the compiler used. And failing with multiple definitions is a likely outcome. static inline on the other hand has a very strict definition in the standard and one compilers honor. It&#39;s more the static part, the inline still might get ignored or not. The static part makes it work either way."}], "tags": [], "owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "is_accepted": true, "score": 5, "last_activity_date": 1533060135, "last_edit_date": 1533060135, "creation_date": 1533038502, "answer_id": 51612943, "question_id": 51612866, "link": "https://stackoverflow.com/questions/51612866/global-variables-in-header-only-library/51612943#51612943", "title": "Global variables in header only library", "body": "<p>One approach is to hide options behind a function that returns a reference to a local static option. As long as the ODR is not violated (e.g. by some macro-dependent changes of the functions), it is guaranteed that the local static variables are unique across your program. As a simple example, this can be in the header file:</p>\n\n<pre><code>inline bool&amp; someOption()\n{\n   static bool opt = false;\n\n   return opt;\n}\n</code></pre>\n\n<p>and in a translation unit:</p>\n\n<pre><code>someOption() = true;\n</code></pre>\n\n<p>It would probably be useful to group your options into a struct and apply the above technique to an instance to this struct.</p>\n\n<p>Note that this approach is limited to C++ (thanks to @rici for the hint), and might only accidently work out in C using gcc.</p>\n"}, {"comments": [{"owner": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "reply_to_user": {"reputation": 4651, "user_id": 4262344, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/70dad663dd1685c6b4f9675d01253e78?s=128&d=identicon&r=PG&f=1", "display_name": "Goswin von Brederlow", "link": "https://stackoverflow.com/users/4262344/goswin-von-brederlow"}, "edited": false, "score": 1, "creation_date": 1533060116, "post_id": 51613009, "comment_id": 90204453, "body": "That&#39;s why you need to appropriate one of the end-user&#39;s header files for this purpose."}, {"owner": {"reputation": 14998, "user_id": 212378, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/185aae2d842026d2eefa7528b00b394b?s=128&d=identicon&r=PG", "display_name": "Alexis Wilke", "link": "https://stackoverflow.com/users/212378/alexis-wilke"}, "edited": false, "score": 0, "creation_date": 1559363248, "post_id": 51613009, "comment_id": 99405761, "body": "This works in C. It&#39;s a bit what Mircosoft uses to declare libraries (i.e. do you <code>import</code> or do you <code>export</code>?)"}], "tags": [], "owner": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "is_accepted": false, "score": 4, "last_activity_date": 1533038696, "creation_date": 1533038696, "answer_id": 51613009, "question_id": 51612866, "link": "https://stackoverflow.com/questions/51612866/global-variables-in-header-only-library/51613009#51613009", "title": "Global variables in header only library", "body": "<p>Structure your library like follows: </p>\n\n<p>MyLibrary.h: </p>\n\n<pre><code>extern int foo;\nextern int bar;\n...\n#ifdef MY_LIBRARY_IMPL\nint foo;\nint bar;\n...\n#endif\n</code></pre>\n\n<p>Then, in the library documentation, specify that in exactly one translation unit, the user of the library should <code>#define MY_LIBRARY_IMPL</code> before including the header file. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4380604"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1268, "favorite_count": 1, "accepted_answer_id": 51612943, "answer_count": 2, "score": 3, "last_activity_date": 1533060135, "creation_date": 1533038217, "question_id": 51612866, "link": "https://stackoverflow.com/questions/51612866/global-variables-in-header-only-library", "title": "Global variables in header only library", "body": "<p>I'm writing a header-only logger library and I need global variables to store current logger settings (output flags, log file descriptor etc.). My thoughts:</p>\n\n<ul>\n<li>I can't declare variables as extern, as i don't have access to the translation units to define them</li>\n<li>I can't just define global variables in header as it will lead to multiple definitions</li>\n<li>static variables in header's functions may seem good at the first glance, but the fact is that every translation unit will have it's own copy of 'global' variable, which is awkward and definitely wrong</li>\n<li>I don't also think it is possible to avoid global variables in my case (even though that's what i'd like to do) as i obviously have to store settings somehow between log function calls</li>\n</ul>\n\n<p>Is there any variants i didn't consider yet? Is there any other way to have global variables using <strong>headers only</strong>. </p>\n\n<p><strong>p.s.</strong> I'm looking for both c99/c++11 compatible solution with possible gcc hacks (gcc >= 4.8)</p>\n"}, {"tags": ["python", "c", "eclipse", "linker-errors"], "comments": [{"owner": {"reputation": 5623, "user_id": 1347519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e1eb6e25803528d25f57f3df79e115?s=128&d=identicon&r=PG", "display_name": "Attie", "link": "https://stackoverflow.com/users/1347519/attie"}, "edited": false, "score": 1, "creation_date": 1533037645, "post_id": 51612604, "comment_id": 90190034, "body": "Typically <code>-l</code> doesn&#39;t require the <code>lib</code> prefix or the <code>.so</code> suffix... Have you tried <code>-lpython2.7</code>? Have you found the library on your system (does it exist)?"}, {"owner": {"reputation": 11, "user_id": 4695657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vm0WT.jpg?s=128&g=1", "display_name": "Tux", "link": "https://stackoverflow.com/users/4695657/tux"}, "reply_to_user": {"reputation": 5623, "user_id": 1347519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e1eb6e25803528d25f57f3df79e115?s=128&d=identicon&r=PG", "display_name": "Attie", "link": "https://stackoverflow.com/users/1347519/attie"}, "edited": false, "score": 0, "creation_date": 1533046162, "post_id": 51612604, "comment_id": 90196058, "body": "I tried -lpython2.7 and it works now, thank you !!! :)"}, {"owner": {"reputation": 5623, "user_id": 1347519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e1eb6e25803528d25f57f3df79e115?s=128&d=identicon&r=PG", "display_name": "Attie", "link": "https://stackoverflow.com/users/1347519/attie"}, "edited": false, "score": 0, "creation_date": 1533047768, "post_id": 51612604, "comment_id": 90197208, "body": "... I&#39;m sure this is a duplicate, but please see my answer below."}], "answers": [{"tags": [], "owner": {"reputation": 5623, "user_id": 1347519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9e1eb6e25803528d25f57f3df79e115?s=128&d=identicon&r=PG", "display_name": "Attie", "link": "https://stackoverflow.com/users/1347519/attie"}, "is_accepted": true, "score": 1, "last_activity_date": 1533073781, "last_edit_date": 1533073781, "creation_date": 1533047683, "answer_id": 51615928, "question_id": 51612604, "link": "https://stackoverflow.com/questions/51612604/cant-link-python-libraries-inside-c-program/51615928#51615928", "title": "Can&#39;t link Python libraries inside C program", "body": "<p>Typically <code>-l</code> doesn't require the <code>lib</code> prefix or the <code>.so</code> suffix...</p>\n\n<p>Try using <code>-lpython2.7</code> instead of <code>-llibpython2.7</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 4695657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vm0WT.jpg?s=128&g=1", "display_name": "Tux", "link": "https://stackoverflow.com/users/4695657/tux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 51615928, "answer_count": 1, "score": 0, "last_activity_date": 1533073781, "creation_date": 1533037350, "last_edit_date": 1533037530, "question_id": 51612604, "link": "https://stackoverflow.com/questions/51612604/cant-link-python-libraries-inside-c-program", "title": "Can&#39;t link Python libraries inside C program", "body": "<p>I want to run a basic python script inside a C program using Eclipse. This is the code:</p>\n\n<pre><code>#include &lt;Python.h&gt;\n\nint main(int argc, char *argv[])\n{\n  Py_SetProgramName(argv[0]);  /* optional but recommended */\n  Py_Initialize();\n  PyRun_SimpleString(\"from time import time,ctime\\n\"\n                     \"print 'Today is',ctime(time())\\n\");\n  Py_Finalize();\n  return 0;\n}\n</code></pre>\n\n<p>I am trying to link to several shared libraries like libpython2.7.so in Eclipse linker settings but I always get this error:</p>\n\n<pre><code>Invoking: GCC C Linker\ngcc -L/usr/lib/x86_64-linux-gnu/ -o \"Test\"  ./src/Test.o   -llibpython2.7\n/usr/bin/x86_64-linux-gnu-ld: cannot find -llibpython2.7\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I can't find any tutorial with the name of the lib that should be linked.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1533036902, "post_id": 51612394, "comment_id": 90189545, "body": "If you by &quot;decimal value&quot; mean an &quot;integer value representing the address&quot;, then yes there are. And just about any book or tutorial (even pretty bad ones) should contain the information. As would probably a very quick search in your favorite search engine."}, {"owner": {"reputation": 2511, "user_id": 3936476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kjSSo.png?s=128&g=1", "display_name": "ventaquil", "link": "https://stackoverflow.com/users/3936476/ventaquil"}, "edited": false, "score": 0, "creation_date": 1533036945, "post_id": 51612394, "comment_id": 90189574, "body": "4 parts each for 8 bits (values from 0 to 255) - it&#39;s not really hard to write your own function to convert string <code>a.b.c.d</code> into number <code>(a &lt;&lt; 24) + (b &lt;&lt; 16) + (c &lt;&lt; 8) + d</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 2511, "user_id": 3936476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kjSSo.png?s=128&g=1", "display_name": "ventaquil", "link": "https://stackoverflow.com/users/3936476/ventaquil"}, "edited": false, "score": 0, "creation_date": 1533037111, "post_id": 51612394, "comment_id": 90189679, "body": "@ventaquil <code>a &lt;&lt; 24</code> can overflow, use <code>(uint32_t)a &lt;&lt; 24</code>. Cast the other parts as well if this must work on a platform with less than 32bit <code>int</code>."}, {"owner": {"reputation": 2511, "user_id": 3936476, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/kjSSo.png?s=128&g=1", "display_name": "ventaquil", "link": "https://stackoverflow.com/users/3936476/ventaquil"}, "edited": false, "score": 0, "creation_date": 1533037204, "post_id": 51612394, "comment_id": 90189738, "body": "@FelixPalmen good tip. I wanted to show an idea - not complete solution."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533037527, "post_id": 51612394, "comment_id": 90189955, "body": "&quot;<i>I&#39;m looking for an existing function in a standard library.</i>&quot; &lt;- in <b>a</b> standard library? There&#39;s only one C standard library specification, and it doesn&#39;t include such a function. But it&#39;s really not too complicated to write one"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 0, "last_activity_date": 1533038373, "creation_date": 1533038373, "answer_id": 51612907, "question_id": 51612394, "link": "https://stackoverflow.com/questions/51612394/how-to-convert-ipv4-address-to-decimal/51612907#51612907", "title": "How to convert IPv4 address to decimal", "body": "<p>The C standard library doesn't have such a function. It's simple enough that this shouldn't be a problem. Here's some example code using <code>strtoul()</code> for parsing:</p>\n\n<pre><code>int parseIpv4Address(uint32_t *addr, const char *addrStr)\n{\n    const char *p = addrStr;\n    char *endp;\n\n    unsigned long a = strtoul(p, &amp;endp, 10);\n    if (*endp != '.') return -1;\n    unsigned long b = strtoul(p = endp+1, &amp;endp, 10);\n    if (*endp != '.') return -1;\n    unsigned long c = strtoul(p = endp+1, &amp;endp, 10);\n    if (*endp != '.') return -1;\n    unsigned long d = strtoul(p = endp+1, &amp;endp, 10);\n    if (*endp) return -1;\n\n    *addr = (uint32_t) ((a &lt;&lt; 24) | (b &lt;&lt; 16) | (c &lt;&lt; 8) | d);\n    return 0;\n}\n</code></pre>\n\n<p>as <code>unsigned long</code> must have at least 32 value bits, there's no special care (casting) needed for the shifts here.</p>\n\n<p>It doesn't validate the range of the individual parts, if you need this, you should be able to add it without problems.</p>\n"}, {"comments": [{"owner": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "edited": false, "score": 0, "creation_date": 1533044238, "post_id": 51613774, "comment_id": 90194715, "body": "Thanks Chris.  There&#39;s an even simpler solution though with <code>inet_addr</code>."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "edited": false, "score": 0, "creation_date": 1533045739, "post_id": 51613774, "comment_id": 90195745, "body": "@Ian it is simpler, but doesn&#39;t provide a usable means of identifying errors"}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1533041271, "creation_date": 1533041271, "answer_id": 51613774, "question_id": 51612394, "link": "https://stackoverflow.com/questions/51612394/how-to-convert-ipv4-address-to-decimal/51613774#51613774", "title": "How to convert IPv4 address to decimal", "body": "<p>You could use something like <code>inet_pton</code> which is pretty straight forward to use as you can see from the example code below.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n\nint main(void)\n    {\n    struct in_addr result;\n\n    if(inet_pton(AF_INET,\"127.0.0.1\",&amp;result))\n        {\n        printf(\"%08x\\n\",result.s_addr);\n        }\n    else\n        {\n        printf(\"Failed\\n\");\n        }\n    return(0);\n    }\n</code></pre>\n\n<p>The number is in network byte order, but if you want it in host byte order, you can use <code>ntohl</code> to convert it.</p>\n"}, {"tags": [], "owner": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "is_accepted": true, "score": 0, "last_activity_date": 1533044376, "last_edit_date": 1533044376, "creation_date": 1533044109, "answer_id": 51614706, "question_id": 51612394, "link": "https://stackoverflow.com/questions/51612394/how-to-convert-ipv4-address-to-decimal/51614706#51614706", "title": "How to convert IPv4 address to decimal", "body": "<p>It turns out that Winsock 2 provides the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winsock2/nf-winsock2-inet_addr\" rel=\"nofollow noreferrer\"><code>inet_addr()</code></a> function, which simply returns the equivalent decimal value for the address.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;winsock2.h&gt;\n\nint main(void)\n{\n    char* pAddr = \"192.168.0.1\";\n\n    unsigned long value = inet_addr(pAddr);\n\n    if (value == INADDR_NONE)\n        printf(\"Invalid format of IP address\");\n    else\n        printf(\"Decimal representation of %s is: %lu\", pAddr, value);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2037, "favorite_count": 0, "accepted_answer_id": 51614706, "answer_count": 3, "score": -9, "last_activity_date": 1533044376, "creation_date": 1533036787, "last_edit_date": 1533037567, "question_id": 51612394, "link": "https://stackoverflow.com/questions/51612394/how-to-convert-ipv4-address-to-decimal", "title": "How to convert IPv4 address to decimal", "body": "<p>Is there a function to convert an IPv4 address in dotted decimal notation (e.g., \"192.168.0.1\") into a decimal value?</p>\n\n<p>There are several questions similar to this, but all are looking for or have answers that involve writing a function to solve the answer.  I'm looking for an existing function in a library.</p>\n"}, {"tags": ["c", "function", "linked-list"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1533035006, "post_id": 51611774, "comment_id": 90188394, "body": "I think you&#39;re getting ahead of yourself here. There are many problems with the code, for example your use of almost only global variables instead of passing arguments and using local variables, or your use of the address-of operator <code>&amp;</code> to get the address of arrays (which works but is semantically wrong), or you including obsolete and non-standard header files that aren&#39;t even used, or you allocating much to little memory for the structure. I suggest you find a new and modern C beginners book (or two), and start all over, carefully doing all exercises."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533035480, "post_id": 51611774, "comment_id": 90188692, "body": "<code>r=x;</code> ?  what is that ? Please make sure the posted code can compile"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533035762, "post_id": 51611774, "comment_id": 90188840, "body": "While at it, use some readable style when rewriting: <b>One</b> variable / struct member declaration per line, <b>meaningful</b> variable names (never just a single letter), same for functions (what&#39;s <code>disp()</code>? dispose? dispatch?)"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1533035764, "post_id": 51611774, "comment_id": 90188842, "body": "You ask about a function <code>addat</code>  but there is no such function in the posted code!"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533035825, "post_id": 51611774, "comment_id": 90188881, "body": "... and you call <code>disp()</code> but there is no code for <code>disp()</code>. Are you sure you posted the correct version?"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533036149, "post_id": 51611774, "comment_id": 90189082, "body": "To me it&#39;s unclear what you expect the <code>delat</code> function to do. Can you describe it further? Anyway, have you considered what will happen if <code>delat</code> is called with a value that doesn&#39;t have a match in the linked list?"}, {"owner": {"reputation": 1, "user_id": 10159210, "user_type": "registered", "profile_image": "https://graph.facebook.com/1082313471916314/picture?type=large", "display_name": "Farah Kareem", "link": "https://stackoverflow.com/users/10159210/farah-kareem"}, "edited": false, "score": 0, "creation_date": 1533057502, "post_id": 51611774, "comment_id": 90203168, "body": "delAt means delete, disp =display"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1533075722, "post_id": 51611774, "comment_id": 90211085, "body": "the header files: <code>conio.h</code> and <code>dos.h</code>  are not portable.  Strongly suggest not using them."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1533075849, "post_id": 51611774, "comment_id": 90211107, "body": "OT:  for ease of readability and understanding: 1) follow the axiom:  <i>only one statement per line and (at most) one variable declaration per statement.</i>   2) separate code blocks: <code>for</code> <code>if</code> <code>else</code> <code>while</code> <code>do...while</code> <code>switch</code> <code>case</code> <code>default</code> via a single blank line.  3)  use meaningful variable names.  variable names should indicate <code>content</code> or <code>usage</code>  (or better, both)  names like &#39;p&#39; &#39;h&#39; &#39;q&#39; are meaningless, even in the current context"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1533076173, "post_id": 51611774, "comment_id": 90211194, "body": "When calling any of the <code>scanf()</code> family of functions, 1) always check the returned value (not the parameter values) to assure the operation was successful. 2) when using the input format specifiers <code>%s</code> and/or <code>%[...]</code>  always include a MAX CHARACTERS modifier that is one less than the length of the input buffer to avoid any possible buffer overflow"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1533076240, "post_id": 51611774, "comment_id": 90211221, "body": "regardless of what visual studio will allow, the return type from <code>main()</code> is always <code>int</code>, not <code>void</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1533076405, "post_id": 51611774, "comment_id": 90211262, "body": "when compiling, always enable the warnings, then fix those warnings.  (for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -Wconversion -pedantic -std=gnu17</code> )  ( Note:  visual studio uses a different set of options to enable warnings )"}], "answers": [{"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1533076728, "creation_date": 1533076728, "answer_id": 51623071, "question_id": 51611774, "link": "https://stackoverflow.com/questions/51611774/add-and-delete-function-malfunctioning-in-linked-list/51623071#51623071", "title": "Add and delete function malfunctioning in Linked list", "body": "<p>the posted code does not cleanly compile!  Please correct and repost.</p>\n\n<p>Here is a list of the messages output by the C compiler:</p>\n\n<pre><code>gcc -ggdb -Wall -Wextra -Wconversion -pedantic -std=gnu11 -c \"untitled.c\" (in directory: /home/richard/Documents/forum)\n\nuntitled.c: In function \u2018add\u2019:\nuntitled.c:18:13: warning: format \u2018%s\u2019 expects argument of type \u2018char *\u2019, but argument 2 has type \u2018char (*)[5]\u2019 [-Wformat=]\n scanf(\"%s\", &amp;p-&gt;in);\n        ~^   ~~~~~~\n\nuntitled.c:20:13: warning: format \u2018%s\u2019 expects argument of type \u2018char *\u2019, but argument 2 has type \u2018char (*)[20]\u2019 [-Wformat=]\n scanf(\"%s\", &amp;p-&gt;na);\n        ~^   ~~~~~~\n\nuntitled.c:26:13: warning: format \u2018%d\u2019 expects argument of type \u2018int *\u2019, but argument 2 has type \u2018int (*)[15]\u2019 [-Wformat=]\n scanf(\"%d\", &amp;p-&gt;ph);\n        ~^   ~~~~~~\n\nuntitled.c:28:13: warning: format \u2018%s\u2019 expects argument of type \u2018char *\u2019, but argument 2 has type \u2018char (*)[30]\u2019 [-Wformat=]\n scanf(\"%s\", &amp;p-&gt;add);\n        ~^   ~~~~~~~\n\nuntitled.c:30:13: warning: format \u2018%s\u2019 expects argument of type \u2018char *\u2019, but argument 2 has type \u2018char (*)[15]\u2019 [-Wformat=]\n scanf(\"%s\", &amp;p-&gt;d);\n        ~^   ~~~~~\n\nuntitled.c: In function \u2018delAt\u2019:\nuntitled.c:53:7: error: \u2018x\u2019 undeclared (first use in this function)\n r=x;\n   ^\n\nuntitled.c:53:7: note: each undeclared identifier is reported only once for each function it appears in\n\nuntitled.c: At top level:\nuntitled.c:70:6: warning: return type of \u2018main\u2019 is not \u2018int\u2019 [-Wmain]\n void main()\n ^~~~\n\nuntitled.c: In function \u2018main\u2019:\nuntitled.c:94:17: warning: implicit declaration of function \u2018disp\u2019; did you mean \u2018div\u2019? [-Wimplicit-function-declaration]\n             disp();\n             ^~~~\n             div\n\nuntitled.c:73:10: warning: unused variable \u2018ni\u2019 [-Wunused-variable]\n char ni[5];\n      ^~\n</code></pre>\n\n<p>Compilation failed.</p>\n"}], "owner": {"reputation": 1, "user_id": 10159210, "user_type": "registered", "profile_image": "https://graph.facebook.com/1082313471916314/picture?type=large", "display_name": "Farah Kareem", "link": "https://stackoverflow.com/users/10159210/farah-kareem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533076728, "creation_date": 1533034646, "last_edit_date": 1533041428, "question_id": 51611774, "link": "https://stackoverflow.com/questions/51611774/add-and-delete-function-malfunctioning-in-linked-list", "title": "Add and delete function malfunctioning in Linked list", "body": "<p>I want to make a management system using linked list in C, where it stores student record, so that it could be searched and deleted. I am programming on devC editor.</p>\n\n<p>My all functions are working except the <code>delAt</code> function. Whenever I execute this function, my program hangs. Another problem is, if I want to execute the <code>addAt</code> function more than once, that means if I choose \"option 1\" more than one time, the program hangs. Although it doesn't hang when I select \"option 1\" only 1 time. </p>\n\n<p>Following is the code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n#include&lt;dos.h&gt;\n\nstruct stud\n{\n    int rn, id, ph[15];\n    char add[30], na[20], d[15], in[5];\n    struct stud *next;\n} *h = NULL, *p, *q, *t, *ts;\n\nvoid add()\n{\n    p =(struct stud*)malloc(sizeof(struct stud*));\n    printf(\"\\nEnter the Initials of Student : \");\n    scanf(\"%s\", &amp;p-&gt;in);\n    printf(\"\\nEnter the Last Name of Student : \");\n    scanf(\"%s\", &amp;p-&gt;na);\n    printf(\"\\nEnter the ID of Student : \");\n    scanf(\"%d\", &amp;p-&gt;id);\n    printf(\"\\nEnter the Roll No. of Student : \");\n    scanf(\"%d\", &amp;p-&gt;rn);\n    printf(\"\\nEnter the Ph No. of Student : \");\n    scanf(\"%d\", &amp;p-&gt;ph);\n    printf(\"\\nEnter the Address of Student : \");\n    scanf(\"%s\", &amp;p-&gt;add);\n    printf(\"\\nEnter the D.O.B. of Student(dd/mm/yyyy) : \");\n    scanf(\"%s\", &amp;p-&gt;d);\n\n    p-&gt;next = NULL;\n\n    if (h == NULL)\n    {\n        h=p;\n    }\n    else\n    {\n        q = h;\n        while (q-&gt;next != NULL)\n        {\n            q = q-&gt;next;\n        }\n        q-&gt;next = p;\n    }\n    ts++;\n}\n\nvoid delAt(int r)\n{\n    q=h;\n    r=x;\n    if (q == NULL)\n    {\n        printf(\"list is empty\");\n    }\n\n    while (q-&gt;rn != r - 1)\n    {\n        q = q-&gt;next;\n    }\n\n    p = q-&gt;next;\n    q-&gt;next = p-&gt;next;\n    free(p);\n    printf(\"\\n\\nRecord Deleted.\");\n}\n\nvoid main()\n{\n    int ch = 0, r;\n    char ni[5];\n    while(ch != 8)\n    {\n        printf(\"1.Add the Record.\\n\\n2.Add Record at Locn.\\n\\n3.Delete Record.\");\n        printf(\"\\n\\n4.Modify Record.\\n\\n5.Search Record.\\n\\n6.Sort Records.\");\n        printf(\"\\n\\n7.Display\\n\\n8.Exit\");\n        printf(\"\\n\\nEnter the Choice: \");\n        scanf(\"%d\",&amp;ch);\n        switch(ch)\n        {\n            case 1:\n                add();\n                break;\n\n            case 3:\n                printf(\"\\nEnter the Roll No. : \");\n                scanf(\"%d\",&amp;r);\n                delAt(r);\n                break;\n\n            case 7:\n                disp();\n                break;\n        }\n\n        ch++;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "fork"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1533035029, "post_id": 51611172, "comment_id": 90188406, "body": "It works for me on Linux kernel 4.17, glibc 2.27, amd64."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1533077242, "post_id": 51611172, "comment_id": 90211446, "body": "the posted code is missing the needed <code>#include</code> statements for the needed header files.  So it does not compile!   the function <code>main()</code> always has a return type of <code>int</code>, not a blank"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1533077519, "post_id": 51611172, "comment_id": 90211509, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so we can help you"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1533077801, "post_id": 51611172, "comment_id": 90211572, "body": "suggest replacing: <code>if(pid &lt; 0)                 exit(1);</code>  with <code>if(pid &lt; 0)  { perror( &quot;fork failed&quot; );                 exit(1); }</code>  So the user/you will know why the call to <code>fork()</code> failed"}, {"owner": {"reputation": 613, "user_id": 3837653, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9e4982ffdd9372f5fbab6b76b1f0803c?s=128&d=identicon&r=PG&f=1", "display_name": "samofoz", "link": "https://stackoverflow.com/users/3837653/samofoz"}, "edited": false, "score": 0, "creation_date": 1533102562, "post_id": 51611172, "comment_id": 90216749, "body": "The code is just pseudo code to give you an idea."}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1533077425, "post_id": 51613519, "comment_id": 90211484, "body": "this answer is misleading.  Because the function: <code>fork()</code> has three kinds of returns 1) &lt;0 means an error occurred.  2) == 0 means in the child process 3) &gt; 0 means in the parent process.  Code needs to check all three conditions as act accordingly"}, {"owner": {"reputation": 1780, "user_id": 9973881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f098a1718e634370611ccc2cbf5bde4?s=128&d=identicon&r=PG", "display_name": "Michael Powers", "link": "https://stackoverflow.com/users/9973881/michael-powers"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1533079976, "post_id": 51613519, "comment_id": 90212048, "body": "Agreed. Modified my answer accordingly."}, {"owner": {"reputation": 613, "user_id": 3837653, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9e4982ffdd9372f5fbab6b76b1f0803c?s=128&d=identicon&r=PG&f=1", "display_name": "samofoz", "link": "https://stackoverflow.com/users/3837653/samofoz"}, "edited": false, "score": 0, "creation_date": 1533102240, "post_id": 51613519, "comment_id": 90216643, "body": "assert(0) has been deliberately called to make the application dump core. The code is just for testing. The forking logic is fine - the parent process will continue inside the loop and the child will execute assert(0). Please note that the parent core dumps without a problem if i replace sleep(5) with assert(0)."}], "tags": [], "owner": {"reputation": 1780, "user_id": 9973881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f098a1718e634370611ccc2cbf5bde4?s=128&d=identicon&r=PG", "display_name": "Michael Powers", "link": "https://stackoverflow.com/users/9973881/michael-powers"}, "is_accepted": false, "score": 0, "last_activity_date": 1533079957, "last_edit_date": 1533079957, "creation_date": 1533040459, "answer_id": 51613519, "question_id": 51611172, "link": "https://stackoverflow.com/questions/51611172/fork-child-process-not-dumping-core-parent-process-does-fine/51613519#51613519", "title": "fork(), child process not dumping core, parent process does fine", "body": "<p>Calling assert(0) on a debug build of your application <a href=\"http://www.cplusplus.com/reference/cassert/assert/\" rel=\"nofollow noreferrer\">should cause an abort</a>:</p>\n\n<blockquote>\n  <p>If the argument expression of this macro with functional form compares equal to zero (i.e., the expression is false), a message is written to the standard error device and abort is called, terminating the program execution.</p>\n</blockquote>\n\n<p>What are you actually looking to do here? It looks like there may be a problem with your forking logic. Typically you test to see if pid == 0 to see if you're in the child process and pid > 0 to see if you're in the parent process, <a href=\"https://www.geeksforgeeks.org/fork-system-call/\" rel=\"nofollow noreferrer\">like this</a>:</p>\n\n<pre><code>pid_t pid = fork();\nif (pid == 0) {\n    // child process because return value zero\n    printf(\"Hello from Child!\\n\");\n} else if (pid &gt; 0) {\n    // parent process because return value non-zero.\n    printf(\"Hello from Parent!\\n\");\n} else {\n    printf(\"Error occurred.\\n\");\n}\n</code></pre>\n\n<p>In your question you're checking for > 0 and &lt; 0.</p>\n\n<p>Edit: Added error checking branch.</p>\n"}], "owner": {"reputation": 613, "user_id": 3837653, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9e4982ffdd9372f5fbab6b76b1f0803c?s=128&d=identicon&r=PG&f=1", "display_name": "samofoz", "link": "https://stackoverflow.com/users/3837653/samofoz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 311, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533079957, "creation_date": 1533032760, "last_edit_date": 1533032882, "question_id": 51611172, "link": "https://stackoverflow.com/questions/51611172/fork-child-process-not-dumping-core-parent-process-does-fine", "title": "fork(), child process not dumping core, parent process does fine", "body": "<p>\"ulimit -c unlimited\" has been done. Here is the code:</p>\n\n<pre><code>main()\n{\n        do\n        {\n            pid_t pid = fork();\n            int stat_loc;\n            if(pid &lt; 0)\n                exit(1);\n            else if(pid &gt; 0)\n            {\n                waitpid(pid, &amp;stat_loc, 0);\n                sleep(5);\n            }\n            else\n                break;\n        }\n        while(1);\n\n        assert(0);\n}\n</code></pre>\n\n<p>If I replace sleep(5) with assert(0) the parent process dumps core.</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "linux-device-driver"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1533038854, "post_id": 51610930, "comment_id": 90190894, "body": "The simplest option would be to use <code>proc_create_single_data</code> to create the file. One of the parameters is a pointer to a &quot;show&quot; function that produces the data when the file is read. The &quot;show&quot; function has a <code>struct seq_file *</code> and a context pointer passed by <code>proc_create_single_data</code>. You can use functions such as <code>seq_printf</code> to write formatted string data to the proc file."}, {"owner": {"reputation": 23, "user_id": 9854872, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-I1J4vioDDRc/AAAAAAAAAAI/AAAAAAAAAB4/vKSeNh15JKk/photo.jpg?sz=128", "display_name": "Tirtsah Dreyfus", "link": "https://stackoverflow.com/users/9854872/tirtsah-dreyfus"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1533040579, "post_id": 51610930, "comment_id": 90192209, "body": "is it more expensive? performance I mean.."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1533044619, "post_id": 51610930, "comment_id": 90194979, "body": "It depends if you want to show more than 4095 bytes of data. If you write more than that to the proc file, it will keep doubling its buffer size, discard the old &quot;show&quot; output, and call your &quot;show&quot; function again until it fits. (However, once it&#39;s increased the buffer size, it will keep that buffer size until the proc file is closed.)"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1533045792, "post_id": 51610930, "comment_id": 90195783, "body": "<code>asprintf</code> doesn&#39;t exist in the kernel. The nearest equivalent is <code>kasprintf</code>, which prints to a dynamically allocated buffer that you need to <code>kfree</code> afterwards. Efficiency wise, it always does the formatted output twice, first with a null buffer to determine the output length, and second with a dynamically allocated buffer of the correct length."}, {"owner": {"reputation": 23, "user_id": 9854872, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-I1J4vioDDRc/AAAAAAAAAAI/AAAAAAAAAB4/vKSeNh15JKk/photo.jpg?sz=128", "display_name": "Tirtsah Dreyfus", "link": "https://stackoverflow.com/users/9854872/tirtsah-dreyfus"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1535435670, "post_id": 51610930, "comment_id": 91052111, "body": "when using seq_printf - in which stage the data is copied to user? and also, if i want to read more than 4096 bytes, should I prefer to implement my own read with biggest local buffer - and copy just when this buffer is full?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1535984479, "post_id": 51610930, "comment_id": 91253390, "body": "You don&#39;t get to choose when the data is copied to the user. If using <code>proc_create_single_data</code>, it will be shortly after your <code>show</code> handler function is called, which will be due to the user either reading of lseeking the proc file. The <code>show</code> handler should generate the whole contents of the file. If the contents you generate is too big, it will be discarded and your <code>show</code> handler will be called again with a larger buffer, but it should still generate the whole contents of the file each time it is called."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1535985120, "post_id": 51610930, "comment_id": 91253757, "body": "If you have more complicated needs, such as data consisting of a large number of independent data &quot;records&quot;, the <code>proc_create_single_data</code> interface might not be the best to use, but you can still use the more complicated, general <code>seq_file</code> interface if you use <code>proc_create_seq_private</code>, <code>proc_create_seq_data</code> or <code>proc_create_seq</code> to create the file. See the <a href=\"https://www.kernel.org/doc/Documentation/filesystems/seq_file.txt\" rel=\"nofollow noreferrer\">documentation for the <code>seq_file</code> interface</a> for details. Or you can use the full-blown file operations if you use <code>proc_create_data</code> and really know what you are doing."}], "owner": {"reputation": 23, "user_id": 9854872, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-I1J4vioDDRc/AAAAAAAAAAI/AAAAAAAAAB4/vKSeNh15JKk/photo.jpg?sz=128", "display_name": "Tirtsah Dreyfus", "link": "https://stackoverflow.com/users/9854872/tirtsah-dreyfus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 281, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1533031982, "creation_date": 1533031982, "question_id": 51610930, "link": "https://stackoverflow.com/questions/51610930/use-asprintf-in-kernel-module", "title": "use asprintf in kernel module", "body": "<p>I have a kernel module, there I'm using procfs file with read permission,<br>\nwhen read from user-space, I need to create a formatted string locally, and copy to user.<br>\nthe size of data data that should be written in the buffer is unknown - that why I want to use something like asprintf in the kernel. is there anything like that? or another idea?  </p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "linux", "ubuntu", "gdb", "windows-subsystem-for-linux"], "comments": [{"owner": {"reputation": 477, "user_id": 1992276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e12b39d0c1175594dfb4b024458285c?s=128&d=identicon&r=PG&f=1", "display_name": "ganit44", "link": "https://stackoverflow.com/users/1992276/ganit44"}, "edited": false, "score": 0, "creation_date": 1533031145, "post_id": 51610452, "comment_id": 90185853, "body": "I am a bit confused here. Array size is 4. So last index is 3. Are you trying to change the value of data[3] ?"}, {"owner": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "edited": false, "score": 0, "creation_date": 1533031445, "post_id": 51610452, "comment_id": 90186073, "body": "Hmm, why did you set a watchpoint outside of the bounds of the array ? I am not sure of the behavior of <code>gdb</code> when you have this kind of request. And, memcheck (valgrind) would probably be more meaningful to track this kind of bug."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "reply_to_user": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "edited": false, "score": 0, "creation_date": 1533031551, "post_id": 51610452, "comment_id": 90186144, "body": "@perror This is the part where you get stack smashing."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1533031660, "post_id": 51610452, "comment_id": 90186213, "body": "You&#39;ve got undefined behaviour upon undefined. What makes you think this does do anything like that?"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1533031855, "post_id": 51610452, "comment_id": 90186342, "body": "@BullyWiiPlaza Check what <a href=\"https://pastebin.com/raw/3JdFxFQV\" rel=\"nofollow noreferrer\">Valgrind says about that</a>.  See - <a href=\"https://ideone.com/fmS4nH\" rel=\"nofollow noreferrer\">TESTED</a> Code."}, {"owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "edited": false, "score": 0, "creation_date": 1533032004, "post_id": 51610452, "comment_id": 90186419, "body": "Why are people downvoting if they can&#39;t understand a simple question? <code>valgrind</code> reports nothing though: <code>&#47;usr&#47;bin&#47;valgrind --tool=memcheck --xml=yes --xml-file=&#47;mnt&#47;c&#47;Users&#47;User&#47;AppData&#47;Local&#47;Temp&#47;valgrind --gen-suppressions=all --leak-check=full --leak-resolution=med --track-origins=yes --read-var-info=yes --read-inline-info=yes &#47;mnt&#47;d&#47;my-project&#47;cmake-build-debug&#47;my-project ==14911== error calling PR_SET_PTRACER, vgdb might block</code> (I&#39;m using the CLion IDE integration of <code>valgrind</code>)"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1533033681, "post_id": 51610452, "comment_id": 90187488, "body": "Since <code>data[4]</code> does not exist, you have undefined behavior in your program. Then it seems logical that gdb cannot debug undefined behavior, or here, handle a watch point of an undefined variable."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1533087562, "post_id": 51610452, "comment_id": 90213429, "body": "Try <code>set can-use-hw-watchpoints 0</code> before setting the watchpoint. Maybe WSL has problems with hardware watchpoints."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1533313055, "post_id": 51610452, "comment_id": 90316363, "body": "<a href=\"https://github.com/Microsoft/WSL/issues/2609\" rel=\"nofollow noreferrer\">gdb watch point doesn&#39;t work - WSL issue #2609</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1533032574, "post_id": 51611068, "comment_id": 90186763, "body": "This code  compiles with <code>*** stack smashing detected ***: &lt;unknown&gt; terminated</code>. Why <code>seems to work fine</code> ?"}, {"owner": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1533032642, "post_id": 51611068, "comment_id": 90186808, "body": "Use the option <code>-fno-stack-protector</code> to remove the stack-smashing protection (this is not the default on my system)."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1533032683, "post_id": 51611068, "comment_id": 90186827, "body": "Accessing memory which does not belongs to you or your program should be <code>valgrind</code>  job, isn&#39;t it?"}, {"owner": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1533032810, "post_id": 51611068, "comment_id": 90186909, "body": "All this memory belongs to your program anyway. It won&#39;t segfault."}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1533034420, "post_id": 51611068, "comment_id": 90187979, "body": "<code>UB</code> means that the program can behave as expected and also that is possible that your System give you rights to access/write that memory location."}], "tags": [], "owner": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "is_accepted": false, "score": 0, "last_activity_date": 1533033798, "last_edit_date": 1592644375, "creation_date": 1533032390, "answer_id": 51611068, "question_id": 51610452, "link": "https://stackoverflow.com/questions/51610452/gdb-watchpoint-not-triggering-on-memory-address/51611068#51611068", "title": "gdb watchpoint not triggering on memory address", "body": "<p>Strangely enough, this seems to be linked to the fact that your example lies in the <code>main()</code> function. I tried with the following example:</p>\n<pre><code>void foo() {\n    unsigned char data[] = {\n        0x12, 0x34, 0x56, 0x78\n    };\n    data[4] = 0x89;\n}\n\nvoid main() {\n  foo();\n}\n</code></pre>\n<p>I compiled it and ran <code>gdb</code> on it:</p>\n<pre><code>$&gt; gcc -g3 -fno-stack-protector -o sample sample.c\n$&gt; gdb -q ./sample\nReading symbols from ./sample...done.\n(gdb) b foo\nBreakpoint 1 at 0x1129: file sample.c, line 2.\n(gdb) r\nStarting program: /tmp/sample \n\nBreakpoint 1, foo () at sample.c:2\n2       unsigned char data[] = {\n(gdb) p /x &amp;data[4]\n$1 = 0x7fffffffe150\n(gdb) watch *0x7fffffffe150\nHardware watchpoint 2: *0x7fffffffe150\n(gdb) c\nContinuing.\n\nHardware watchpoint 2: *0x7fffffffe150\n\nOld value = -7840\nNew value = -7799\nfoo () at sample.c:7\n7   \n</code></pre>\n<p>So, it seems to work fine in <code>foo()</code> (but, I can also say it won't work in <code>main()</code>). I will take a look why...</p>\n<h2>EDIT</h2>\n<p>It seems I had a glitch (or I did something different but I cannot remember what). It works perfectly on my system (Debian unstable with gdb 8.1). Here is the code I used:</p>\n<pre><code>void main() {\n    unsigned char data[] = {\n        0x12, 0x34, 0x56, 0x78\n    };\n    data[4] = 0x89;\n}\n</code></pre>\n<p>Compiling and running <code>gdb</code> on it:</p>\n<pre><code>$&gt; gcc -Wall -Wextra -fno-stack-protector -g3 -o sample sample.c\n$&gt; gdb -q ./sample\nReading symbols from ./sample...done.\n(gdb) start\nTemporary breakpoint 1 at 0x1129: file sample.c, line 2.\nStarting program: /tmp/sample \n\nTemporary breakpoint 1, main () at sample.c:2\n2       unsigned char data[] = {\n(gdb) p /x &amp;data[4]\n$1 = 0x7fffffffe160\n(gdb) watch *0x7fffffffe160\nHardware watchpoint 2: *0x7fffffffe160\n(gdb) c\nContinuing.\n\nHardware watchpoint 2: *0x7fffffffe160\n\nOld value = 1431654720\nNew value = 1431654793\nmain () at sample.c:6\n6   }\n</code></pre>\n<p>Nothing strange... The watchpoint worked as expected. But, this is strange because it did not work at first... I might have done something slightly different... Maybe, I did put the watchpoint before starting the program. It might have some role in this.</p>\n"}], "owner": {"reputation": 12289, "user_id": 3764804, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fZQON.png?s=128&g=1", "display_name": "BullyWiiPlaza", "link": "https://stackoverflow.com/users/3764804/bullywiiplaza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1073, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1533033798, "creation_date": 1533030531, "question_id": 51610452, "link": "https://stackoverflow.com/questions/51610452/gdb-watchpoint-not-triggering-on-memory-address", "title": "gdb watchpoint not triggering on memory address", "body": "<p>Recently, I tried to debug a memory corruption bug using <code>gdb</code>'s <a href=\"https://sourceware.org/gdb/onlinedocs/gdb/Set-Watchpoints.html\" rel=\"nofollow noreferrer\"><code>watchpoint</code></a> feature on a memory address which falsely got overwritten by some piece of code.</p>\n\n<p>Surprisingly, this did not work. I ended up fixing my problem but without <code>gdb</code>'s help. Here is a small code example which demonstrates how the <code>watchpoint</code> does not trigger:</p>\n\n<pre><code>void main() {\n    unsigned char data[] = {\n        0x12, 0x34, 0x56, 0x78\n    };\n\n    data[4] = 0x89;\n}\n</code></pre>\n\n<p>This code declares an array with size 4 and writes to the 4th index. Oops, we corrupted a byte of memory.</p>\n\n<p>Using <code>gdb</code>, I acquired the address of <code>data[4]</code> before the assignment was executed and set a <code>watchpoint</code> on the address:</p>\n\n<pre><code>(gdb) p/x &amp;data[4]\n$1 = 0x7ffffffee950\n(gdb) watch *0x7ffffffee950\nHardware watchpoint 2: *0x7ffffffee950\n(gdb) continue\nContinuing.\n[Inferior 1 (process 14543) exited normally]\n</code></pre>\n\n<p>As you can see, the application continues as normal and exits. No reaction from <code>gdb</code>. Is this a bug or am I doing something wrong here? I would expect to get something from <code>gdb</code> if the address is modified but nothing happens.</p>\n\n<p>My version of gdb is:</p>\n\n<pre><code>GNU gdb (Ubuntu 8.1-0ubuntu3)\n</code></pre>\n"}, {"tags": ["c", "arm", "stm32f4discovery"], "comments": [{"owner": {"reputation": 421, "user_id": 3642304, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f79bdbc49e15165aba9b94addcab951e?s=128&d=identicon&r=PG&f=1", "display_name": "mban", "link": "https://stackoverflow.com/users/3642304/mban"}, "edited": false, "score": 0, "creation_date": 1536069659, "post_id": 51610327, "comment_id": 91286126, "body": "Can you post the DMA configuration code?"}], "owner": {"reputation": 692, "user_id": 1529308, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da97639e7a382f47c4356da9579ede7f?s=128&d=identicon&r=PG", "display_name": "hrust", "link": "https://stackoverflow.com/users/1529308/hrust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 724, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1533035183, "creation_date": 1533030171, "last_edit_date": 1533035183, "question_id": 51610327, "link": "https://stackoverflow.com/questions/51610327/stm32f4-pwm-input-mode-with-dma-cannot-measure-duty-cycle", "title": "STM32F4 PWM input mode with DMA. Cannot measure duty cycle", "body": "<p>I am trying to measure PWM signal duty cycle. I strive to make all configurations in STM32CubeMX and also I am using STM32F407G-Disc1 discovery board.</p>\n\n<p>I have configured one timer to generate PWM signal and another to capture it.</p>\n\n<p>TIM2 below is used to generate PWM signal with cycle time (T) of 20ms and Ton = 1ms.\n<a href=\"https://i.stack.imgur.com/QuPG4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QuPG4.png\" alt=\"TIM2 generating PWM signal\"></a></p>\n\n<p>TIM3 is configured in PWM input capture mode. Currently I doubt proper configuration. Can you please verify that first?</p>\n\n<p><a href=\"https://i.stack.imgur.com/Wx8fv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wx8fv.png\" alt=\"Pin configuration of the TIM3\"></a>\n<a href=\"https://i.stack.imgur.com/0YGEa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0YGEa.png\" alt=\"TIM3 PWM input capture mode\"></a></p>\n\n<p>Then I have wire connected from <code>PA0 (TIM2_CH1)</code> to <code>PA6 (TIM3_CH1)</code>, also there an LED connected to visually verify the signal. It was also checked with an oscilloscope - pwm is generated correctly.</p>\n\n<hr>\n\n<p>Next step was to capture measured values with DMA requests.</p>\n\n<p><strong>autogenerated main.c</strong></p>\n\n<pre><code>uint32_t pwm[1] = {0};\n// ...\nif(HAL_TIM_IC_Start_DMA(&amp;htim3, TIM_CHANNEL_1, pwm, 1) != HAL_OK)\n{\n    _Error_Handler(__FILE__, __LINE__);\n}\n</code></pre>\n\n<p>Debugging later shows contents of <code>pwm[0]</code> equal to <code>20000</code> which is correct.</p>\n\n<p>How would I measure Ton (when signal is logical 1) of the cycle?</p>\n\n<p>I have tried enabling DMA request for the channel 2 of TIM3 as well, but it ends up in <code>_Error_Handler()</code>.</p>\n\n<hr>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c", "raspberry-pi", "serial-communication"], "comments": [{"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1533028985, "post_id": 51609813, "comment_id": 90184435, "body": "Why is this question C++, if you ask specificly for C?"}, {"owner": {"reputation": 3116, "user_id": 2498790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/991601e5d41d9d84ab7e196382ea8108?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2498790/alex"}, "edited": false, "score": 0, "creation_date": 1533029294, "post_id": 51609813, "comment_id": 90184633, "body": "The <code>read()</code> in the mentioned thread is <i>blocking</i>, will put the process in sleep waiting for data, so yes, you can use it within a loop (careful with the <code>&amp;buffer</code>, it is the bug, look at the answer too). May I ask why if the python script is working do you need it in C?"}, {"owner": {"reputation": 107, "user_id": 5447760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ae40862604e4d25bb4d8339533af09?s=128&d=identicon&r=PG&f=1", "display_name": "Vinayaka S P", "link": "https://stackoverflow.com/users/5447760/vinayaka-s-p"}, "reply_to_user": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1533030008, "post_id": 51609813, "comment_id": 90185067, "body": "@hellow I prefer C, but solution is available in C++ the I&#39;m fine with it so."}, {"owner": {"reputation": 107, "user_id": 5447760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ae40862604e4d25bb4d8339533af09?s=128&d=identicon&r=PG&f=1", "display_name": "Vinayaka S P", "link": "https://stackoverflow.com/users/5447760/vinayaka-s-p"}, "reply_to_user": {"reputation": 3116, "user_id": 2498790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/991601e5d41d9d84ab7e196382ea8108?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2498790/alex"}, "edited": false, "score": 0, "creation_date": 1533030119, "post_id": 51609813, "comment_id": 90185142, "body": "@Alex Actually I don&#39;t want to use <code>read()</code> in a while loop since the code is just a part of other vast project. So I&#39;m asking how I can avoid while loop or any library available for C/C++.  As I said, its a part of a project, which should be in C/C++ I cant use python script in that."}, {"owner": {"reputation": 3116, "user_id": 2498790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/991601e5d41d9d84ab7e196382ea8108?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2498790/alex"}, "edited": false, "score": 0, "creation_date": 1533030252, "post_id": 51609813, "comment_id": 90185251, "body": "@VinayakaSP I see now, sorry, you can configure the serial as <i>non-blocking</i>, you can use <code>select()</code> to do some other stuff while waiting for data, but I don&#39;t see how you can get rid of a loop if you are expecting more data"}, {"owner": {"reputation": 107, "user_id": 5447760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ae40862604e4d25bb4d8339533af09?s=128&d=identicon&r=PG&f=1", "display_name": "Vinayaka S P", "link": "https://stackoverflow.com/users/5447760/vinayaka-s-p"}, "reply_to_user": {"reputation": 3116, "user_id": 2498790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/991601e5d41d9d84ab7e196382ea8108?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2498790/alex"}, "edited": false, "score": 0, "creation_date": 1533030368, "post_id": 51609813, "comment_id": 90185324, "body": "@Alex could you please elaborate on <code>select()</code> I&#39;m new to serial programming :("}, {"owner": {"reputation": 3116, "user_id": 2498790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/991601e5d41d9d84ab7e196382ea8108?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2498790/alex"}, "edited": false, "score": 0, "creation_date": 1533030521, "post_id": 51609813, "comment_id": 90185426, "body": "You can use <a href=\"http://man7.org/linux/man-pages/man2/select.2.html\" rel=\"nofollow noreferrer\">select()</a> to check if a number of file descriptors have received some data, read it only when you know there&#39;s data, but you still need a loop"}, {"owner": {"reputation": 107, "user_id": 5447760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ae40862604e4d25bb4d8339533af09?s=128&d=identicon&r=PG&f=1", "display_name": "Vinayaka S P", "link": "https://stackoverflow.com/users/5447760/vinayaka-s-p"}, "reply_to_user": {"reputation": 3116, "user_id": 2498790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/991601e5d41d9d84ab7e196382ea8108?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2498790/alex"}, "edited": false, "score": 0, "creation_date": 1533030596, "post_id": 51609813, "comment_id": 90185490, "body": "@Alex oh. So it doesn&#39;t actually solve my issue."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533031433, "post_id": 51609813, "comment_id": 90186064, "body": "How do you expect your program to continue to read from the serial connection without a loop of some kind?"}, {"owner": {"reputation": 3116, "user_id": 2498790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/991601e5d41d9d84ab7e196382ea8108?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2498790/alex"}, "edited": false, "score": 0, "creation_date": 1533031537, "post_id": 51609813, "comment_id": 90186136, "body": "@VinayakaSP, I don&#39;t see how you can get rid of a loop somewhere, but you can move the serial processing in another thread and let the main process continue its execution"}, {"owner": {"reputation": 107, "user_id": 5447760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ae40862604e4d25bb4d8339533af09?s=128&d=identicon&r=PG&f=1", "display_name": "Vinayaka S P", "link": "https://stackoverflow.com/users/5447760/vinayaka-s-p"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533094372, "post_id": 51609813, "comment_id": 90214760, "body": "@ChrisTurner @Alex I think I was not clear in question to explain my point. Suppose I have a receiver and sender, Sender might send data anytime, but receiver should listen to it always and grab the message whenever transmitted. Now refer to my python cod, There i used only one while loop, <code>incoming = ser.readline().strip()</code> this will halt program till it get message and after receiving message, it will process it and comes back to <code>incoming = ser.readline().strip()</code> for next message. To achieve this in C/C++ i have to use an extra while loop around <code>read()</code> function. i need to eliminate this"}, {"owner": {"reputation": 107, "user_id": 5447760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ae40862604e4d25bb4d8339533af09?s=128&d=identicon&r=PG&f=1", "display_name": "Vinayaka S P", "link": "https://stackoverflow.com/users/5447760/vinayaka-s-p"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533095265, "post_id": 51609813, "comment_id": 90214924, "body": "@ChrisTurner I have appended edit 1 to my question, I have tried hard to explain the problem. Please go through it and comment your suggestions"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 5447760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ae40862604e4d25bb4d8339533af09?s=128&d=identicon&r=PG&f=1", "display_name": "Vinayaka S P", "link": "https://stackoverflow.com/users/5447760/vinayaka-s-p"}, "edited": false, "score": 0, "creation_date": 1533095420, "post_id": 51611129, "comment_id": 90214959, "body": "Thank you for the suggestion, Definitely I&#39;ll go through it."}], "tags": [], "owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "is_accepted": false, "score": 0, "last_activity_date": 1533032610, "creation_date": 1533032610, "answer_id": 51611129, "question_id": 51609813, "link": "https://stackoverflow.com/questions/51609813/serial-communication-in-c-for-raspberry-pi/51611129#51611129", "title": "Serial Communication in C for Raspberry Pi", "body": "<p>Get some inspiration from this code. This is very generic canonical serial programming using C.</p>\n\n<p>NOTE: Canonical input processing can also handle the erase, delete word, and reprint characters, translate CR to NL, etc..</p>\n\n<hr>\n\n<p>I suggest you to read this article in order to know more about the serial programming settings, different mode. </p>\n\n<p><a href=\"http://www.tldp.org/HOWTO/Serial-Programming-HOWTO/x56.html\" rel=\"nofollow noreferrer\">HowTo serial programming.</a></p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;termios.h&gt;\n#include &lt;stdio.h&gt;\n\n/* baudrate settings are defined in &lt;asm/termbits.h&gt;, which is\nincluded by &lt;termios.h&gt; */\n#define BAUDRATE B38400            \n/* change this definition for the correct port */\n#define SERIAL_DEVICE \"/dev/ttyS1\"\n\n\n#define FALSE 0\n#define TRUE 1\n\nvolatile int STOP=FALSE; \n\nint main(void)\n{\n  int fd,c, res;\n  struct termios oldtio,newtio;\n  char buf[255];\n/* \n  Open modem device for reading and writing and not as controlling tty\n  because we don't want to get killed if linenoise sends CTRL-C.\n*/\n fd = open(SERIAL_DEVICE, O_RDWR | O_NOCTTY ); \n if (fd &lt;0) {perror(SERIAL_DEVICE); exit(-1); }\n\n tcgetattr(fd,&amp;oldtio); /* save current serial port settings */\n memset(&amp;newtio, sizeof(newtio)); /* clear struct for new port settings */\n\n/* \n  BAUDRATE: Set bps rate. You could also use cfsetispeed and cfsetospeed.\n  CRTSCTS : output hardware flow control (only used if the cable has\n            all necessary lines. See sect. 7 of Serial-HOWTO)\n  CS8     : 8n1 (8bit,no parity,1 stopbit)\n  CLOCAL  : local connection, no modem contol\n  CREAD   : enable receiving characters\n*/\n newtio.c_cflag = BAUDRATE | CRTSCTS | CS8 | CLOCAL | CREAD;\n\n/*\n  IGNPAR  : ignore bytes with parity errors\n  ICRNL   : map CR to NL (otherwise a CR input on the other computer\n            will not terminate input)\n  otherwise make device raw (no other input processing)\n*/\n newtio.c_iflag = IGNPAR | ICRNL;\n\n/*\n Raw output.\n*/\n newtio.c_oflag = 0;\n\n/*\n  ICANON  : enable canonical input\n  disable all echo functionality, and don't send signals to calling program\n*/\n newtio.c_lflag = ICANON;\n\n/* \n  initialize all control characters \n  default values can be found in /usr/include/termios.h, and are given\n  in the comments, but we don't need them here\n*/\n newtio.c_cc[VINTR]    = 0;     /* Ctrl-c */ \n newtio.c_cc[VQUIT]    = 0;     /* Ctrl-\\ */\n newtio.c_cc[VERASE]   = 0;     /* del */\n newtio.c_cc[VKILL]    = 0;     /* @ */\n newtio.c_cc[VEOF]     = 4;     /* Ctrl-d */\n newtio.c_cc[VTIME]    = 0;     /* inter-character timer unused */\n newtio.c_cc[VMIN]     = 1;     /* blocking read until 1 character arrives */\n newtio.c_cc[VSWTC]    = 0;     /* '\\0' */\n newtio.c_cc[VSTART]   = 0;     /* Ctrl-q */ \n newtio.c_cc[VSTOP]    = 0;     /* Ctrl-s */\n newtio.c_cc[VSUSP]    = 0;     /* Ctrl-z */\n newtio.c_cc[VEOL]     = 0;     /* '\\0' */\n newtio.c_cc[VREPRINT] = 0;     /* Ctrl-r */\n newtio.c_cc[VDISCARD] = 0;     /* Ctrl-u */\n newtio.c_cc[VWERASE]  = 0;     /* Ctrl-w */\n newtio.c_cc[VLNEXT]   = 0;     /* Ctrl-v */\n newtio.c_cc[VEOL2]    = 0;     /* '\\0' */\n\n/* \n  now clean the modem line and activate the settings for the port\n*/\n tcflush(fd, TCIFLUSH);\n tcsetattr(fd,TCSANOW,&amp;newtio);\n\n/*\n  terminal settings done, now handle input\n  In this example, inputting a 'z' at the beginning of a line will \n  exit the program.\n*/\n while (STOP==FALSE) {     /* loop until we have a terminating condition */\n /* read blocks program execution until a line terminating character is \n    input, even if more than 255 chars are input. If the number\n    of characters read is smaller than the number of chars available,\n    subsequent reads will return the remaining chars. res will be set\n    to the actual number of characters actually read */\n    res = read(fd,buf,255); \n    buf[res]=0;             /* set end of string, so we can printf */\n    printf(\":%s:%d\\n\", buf, res);\n    if (buf[0]=='z') STOP=TRUE;\n }\n /* restore the old port settings */\n tcsetattr(fd,TCSANOW,&amp;oldtio);\n return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 5447760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ae40862604e4d25bb4d8339533af09?s=128&d=identicon&r=PG&f=1", "display_name": "Vinayaka S P", "link": "https://stackoverflow.com/users/5447760/vinayaka-s-p"}, "edited": false, "score": 0, "creation_date": 1533119674, "post_id": 51629147, "comment_id": 90226354, "body": "Thank you ! seems this solution has solved my problem !"}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 0, "last_activity_date": 1533113685, "creation_date": 1533113685, "answer_id": 51629147, "question_id": 51609813, "link": "https://stackoverflow.com/questions/51609813/serial-communication-in-c-for-raspberry-pi/51629147#51629147", "title": "Serial Communication in C for Raspberry Pi", "body": "<p>If you don't want the connection to be non-blocking, you probably want to remove the O_NDELAY option you've added to your call to <code>open</code> that turns on non-blocking. Just like this...</p>\n\n<pre><code>uart0_filestream = open(\"/dev/ttyUSB0\", O_RDWR | O_NOCTTY);\n</code></pre>\n\n<p>Also, <code>read</code> doesn't return a string, it returns the number of bytes read in so your calls to <code>read</code> should look more like</p>\n\n<pre><code>bytecount = read(uart0_filestream, str, 20);\nif(bytecount&gt;0)\n   {\n   str[bytecount]='\\0';\n   }\nelse\n   {\n   // Something bad happened?\n   }\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 5447760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ae40862604e4d25bb4d8339533af09?s=128&d=identicon&r=PG&f=1", "display_name": "Vinayaka S P", "link": "https://stackoverflow.com/users/5447760/vinayaka-s-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3913, "favorite_count": 0, "accepted_answer_id": 51629147, "answer_count": 2, "score": 1, "last_activity_date": 1533113685, "creation_date": 1533028747, "last_edit_date": 1533095158, "question_id": 51609813, "link": "https://stackoverflow.com/questions/51609813/serial-communication-in-c-for-raspberry-pi", "title": "Serial Communication in C for Raspberry Pi", "body": "<p>I want to make two Raspberry Pi send message to each other using ZigBee protocol.\nI have connected XBee S2C (ZigBee) module to Raspberry Pi using USB Explorer (CH430g). \nI had written a python script which will do the desired work,</p>\n\n<pre><code>import serial\n\nser = serial.Serial('/dev/ttyUSB0', 9600)\n\nwhile True:\n    incoming = ser.readline().strip()\n    print ('%s' %incoming.decode())\n    string = input(\"\") + '\\n'\n    ser.write(string.encode())\n</code></pre>\n\n<p>But I need a C program to do the same,\nI looked into <a href=\"https://github.com/crayzeewulf/libserial\" rel=\"nofollow noreferrer\">libserial</a> library for C and C++, found that it's buggy and never compiled for me.</p>\n\n<p>I tried <a href=\"https://stackoverflow.com/questions/17254923/raspberry-pi-uart-program-in-c-using-termios-receives-garbage-rx-and-tx-are-con#51606702\">this thread</a> it works pretty well,  but at the receiver side I need to keep  <code>read(fd, &amp;buffer, sizeof(buffer));</code> in a <code>while</code> loop to continuously open for listening unlike a C socket program where <code>read()</code> function will halt till it receives the data just like my python script will wait in line <code>incoming = ser.readline().strip()</code> till it receives some message.</p>\n\n<p>Is there any solution for it without using <code>while</code> loop ?</p>\n\n<p><strong>Edit 1:</strong></p>\n\n<p>In aforementioned python code, while loop is used to receive multiple messages. The line <code>incoming = ser.readline().strip()</code> will catch the message, process it and waits for next message since its in a <code>while</code> loop.</p>\n\n<p>In C if my code is something like this:</p>\n\n<pre><code>while(1){\n    str = read();\n    //some processing\n    }\n</code></pre>\n\n<p>it throws error since <code>read</code> is not halting till it gets the data, it's just returning read fail. Since the read data is <code>NULL</code> the post processing of the data will throw an error. \nTo make it work I have introduce another <code>while</code> loop like this:</p>\n\n<pre><code> while(1){\n    while(1){\n        str = read();\n        if(str!=NULL)\n            break;\n        }\n    //some processing\n    }\n</code></pre>\n\n<p>I want to eliminate this extra loop and make <code>read()</code> to wait for the message. \nPS: I'm opening serial device like this: <code>uart0_filestream = open(\"/dev/ttyUSB0\", O_RDWR | O_NOCTTY | O_NDELAY);</code></p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 3, "creation_date": 1533025977, "post_id": 51608804, "comment_id": 90182632, "body": "and don&#39;t forget the buffer overflow with <code>%s</code> (or <code>%[</code>) when used without a field width ..."}, {"owner": {"reputation": 23, "user_id": 10044645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88185319cb85ef176fb2f398afc82214?s=128&d=identicon&r=PG&f=1", "display_name": "Eclz", "link": "https://stackoverflow.com/users/10044645/eclz"}, "edited": false, "score": 0, "creation_date": 1533026340, "post_id": 51608804, "comment_id": 90182835, "body": "@ Felix Palmen can u help me and re-write  the full code because am tired of stressing"}, {"owner": {"reputation": 23, "user_id": 10044645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88185319cb85ef176fb2f398afc82214?s=128&d=identicon&r=PG&f=1", "display_name": "Eclz", "link": "https://stackoverflow.com/users/10044645/eclz"}, "edited": false, "score": 0, "creation_date": 1533027594, "post_id": 51608804, "comment_id": 90183559, "body": "Thank you so much for your time lemmi try and i see if i can solve it according to your explanation..@ Felix Palmen"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1533025694, "creation_date": 1533025694, "answer_id": 51608804, "question_id": 51608655, "link": "https://stackoverflow.com/questions/51608655/how-do-i-read-data-from-a-file-from-each-line-and-store-it-into-a-structure-arra/51608804#51608804", "title": "How do I read data from a file from each line and store it into a structure array", "body": "<p>The <code>\"%s\"</code> format reads <strong><em>space-separated</em></strong> \"words\".</p>\n\n<p>If there isn't a space separating the \"words\" you have to use some other way to parse the input. For example by <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\">reading the whole line</a> and then use something like <a href=\"http://en.cppreference.com/w/c/string/byte/strtok\" rel=\"nofollow noreferrer\"><code>strtok</code></a> to \"tokenize\" the string.</p>\n\n<p><em>Or</em> make sure that the input format is space-separated.</p>\n"}], "owner": {"reputation": 23, "user_id": 10044645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88185319cb85ef176fb2f398afc82214?s=128&d=identicon&r=PG&f=1", "display_name": "Eclz", "link": "https://stackoverflow.com/users/10044645/eclz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 51608804, "answer_count": 1, "score": -2, "last_activity_date": 1533031718, "creation_date": 1533025207, "last_edit_date": 1533031718, "question_id": 51608655, "link": "https://stackoverflow.com/questions/51608655/how-do-i-read-data-from-a-file-from-each-line-and-store-it-into-a-structure-arra", "title": "How do I read data from a file from each line and store it into a structure array", "body": "<p>Below is my code, I have been working on this part for some structure am create a C socket server that can process data for clients, but I got a problem in file handling. I wanted to pick data from a file and store it into a structure at specific portions and then I erase the file according to data I have picked.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"struct.h\"\n\nstruct student {\n    char command[10];\n    char value[50];\n    char user[50];\n};\n\nint main() {\n    int size, i;\n    struct student s1[256];\n    FILE *file = fopen(\"file.txt\", \"r\");\n\n    if (file == NULL) {\n\n        printf(\"Error in reading student data\");\n        return 1;\n    }\n    size = 0;\n\n    while(fscanf(file,\"%s,%s,%s\",\n                 s1[size].command,\n                 s1[size].value,\n                 s1[size].user) != EOF) {\n\n        printf(\"%s%s%s\\n\",s1[size].command,s1[size].value,s1[size].user);\n        printf(\"%s\\n\",s1[size].command);\n        size++;\n    }\n\n    fclose(file);\n\n    return 0;\n}\n</code></pre>\n\n<p>I wanted to pick data from my file which contains the below information and I store it in specific portions of my structure array</p>\n\n<pre><code>a,w,a\nr,e,1\n</code></pre>\n\n<p>i.e. if I store  </p>\n\n<pre><code>a in s1[0].command\nw in s1[0].value\na in s1[0].user\n</code></pre>\n\n<p>and</p>\n\n<pre><code>r in s1[1].command\ne in s1[1].value\n1 in s1[1].user\n</code></pre>\n\n<p>But when I try running my code it prints </p>\n\n<pre><code>a, w, a in s1[0].command\n</code></pre>\n\n<p>and </p>\n\n<pre><code>r, e, 1 in s1[1].command\n</code></pre>\n\n<p>so I am kindly requesting for help because I have tried googling but I couldn't get a solution. </p>\n"}, {"tags": ["c++", "c", "logging", "macros", "runtime-error"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1533024497, "post_id": 51608396, "comment_id": 90181791, "body": "It is theoretically possible with <code>setjmp</code>/<code>longjmp</code>. Not so much different from using exceptions. I&#39;d recommend against it, <b>and</b> I wouldn&#39;t use this macro either. Better keep your functions small, and, if necessary, use a <code>goto</code> to one central error-handling per function."}, {"owner": {"reputation": 415, "user_id": 7305358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/909955eb7835150dae7bfbfa4e587e23?s=128&d=identicon&r=PG&f=1", "display_name": "Zinki", "link": "https://stackoverflow.com/users/7305358/zinki"}, "edited": false, "score": 4, "creation_date": 1533024562, "post_id": 51608396, "comment_id": 90181826, "body": "&quot;Is there a clean and elegant way to do this in C++ without using a macro?&quot; Yes, that way is called Exception Handling. If you don&#39;t want to use that for whatever reason, then there isn&#39;t really a better way."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1533024696, "post_id": 51608396, "comment_id": 90181898, "body": "It&#39;s possible with <code>co_await</code> and a user-defined result type if the coroutines TS is merged  closely enough to how it is now, but it&#39;s not exactly descriptive for that purpose or particularly cheap in its current state."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1533024704, "post_id": 51608396, "comment_id": 90181899, "body": "You <i>can</i> replace the macro with a variadic template, so you at least get the logging stuff moved out of the top function... but I would argue this wouldn&#39;t make things any less ugly. And as you mentioned &quot;this is legacy and hence no exceptions&quot;, I doubt you&#39;d get a pass on using variadic templates either."}, {"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 0, "creation_date": 1533024754, "post_id": 51608396, "comment_id": 90181918, "body": "using a macro to throw exception is good because it allows to gather information  (<code>__*__</code> macros) from the throw site without writing much code."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1533025222, "post_id": 51608396, "comment_id": 90182197, "body": "You have to use the macro if you want a control flow decision to be made by the &quot;call&quot;.  You could abstract the rest of the logic to a function although it doesn&#39;t really matter"}, {"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "edited": false, "score": 0, "creation_date": 1533026182, "post_id": 51608396, "comment_id": 90182746, "body": "To the people writing &quot;use exceptions&quot; - it is not my decision. I follow the rules, not make them. And even if I had the freedom, I am not sure how exception handling would keep the code clean and readable in this scenario. &lt;... thinking ...&gt; Would I put all the statements in the try block and upon anyone of the called function statements e.g. GetAxis(blabla) failing, an exception would be emitted terminating any further execution of the current function e.g. ConstructAxes()? If yes, ok, that would solve the first problem of exiting upon an error.But what about logging with file&amp;line macros?"}, {"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1533026242, "post_id": 51608396, "comment_id": 90182785, "body": "Using that kind of macro in C would be impossible because it will skip function cleanup prior to returning. I&#39;m not even talking about crippling debugging experience by putting return into macro and relying on verbose logging."}, {"owner": {"reputation": 2909, "user_id": 9691656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6944dacfe20c1ae8aa3cf5131b2cde3?s=128&d=identicon&r=PG&f=1", "display_name": "Tyker", "link": "https://stackoverflow.com/users/9691656/tyker"}, "edited": false, "score": 1, "creation_date": 1533026381, "post_id": 51608396, "comment_id": 90182857, "body": "@JoeyMallone to solve the second problem you can throw in a macro that does what you want, log, gather information ... and throws"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1533026588, "post_id": 51608396, "comment_id": 90182980, "body": "@JoeyMallone: IMHO, the macros does 2 different things: it logs and optionnaly exits the block. First part should go in a function, second part should use exception handling with a try block containing all of your calls and an empty catch."}, {"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "edited": false, "score": 0, "creation_date": 1533026722, "post_id": 51608396, "comment_id": 90183048, "body": "@FelixPalmen, yes, thank you for that idea. I have seen that <code>goto</code> way, used in the code for error-handling like you said it. But I was never sure, if this was a good idea. I mean, it&#39;s <code>goto</code> ... :D.  Another variant of this idea, using a <code>do {} while(0)</code> block, where a break statement is used to cause the same effect as a <code>goto</code> would."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1533026830, "post_id": 51608396, "comment_id": 90183113, "body": "@JoeyMallone &quot;hiding&quot; a <code>goto</code> behind something that does the same in less obvious code is IMHO a bad idea. Error handling with <code>goto</code> is perfectly fine <b>in C</b> when done correctly. This might be different in C++. Double-tagging a question is always a bit problematic."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1533036593, "post_id": 51608396, "comment_id": 90189336, "body": "Why the &quot;runtime error&quot; tag?"}, {"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1533036988, "post_id": 51608396, "comment_id": 90189595, "body": "@alk, Then would an error-handling tag do better?  I can change it or remove it if it causes confusion.  This question is mainly about how best to handle the part of the code that deals with the runtime-errors? Or do I misunderstand what runtime-errors are?"}], "answers": [{"comments": [{"owner": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1533026594, "post_id": 51609023, "comment_id": 90182986, "body": "While this will kind of work you should mention the drastic overhead of spawning function objects for every function call."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1533026983, "post_id": 51609023, "comment_id": 90183187, "body": "It would be enough to pass the result of the function call instead of a function object..."}, {"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "reply_to_user": {"reputation": 32078, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1533026997, "post_id": 51609023, "comment_id": 90183193, "body": "@VTT, ouch. Did I mention this goes into an embedded device. A soft-real time embedded device. Need to avoid overheads. Thank you for bringing that up."}, {"owner": {"reputation": 2107, "user_id": 7451787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lNcOE.jpg?s=128&g=1", "display_name": "bcperth", "link": "https://stackoverflow.com/users/7451787/bcperth"}, "edited": false, "score": 0, "creation_date": 1533027308, "post_id": 51609023, "comment_id": 90183376, "body": "what resource is limited in the embedded device? Memory or processing time? If memory then your macro will cause the macro code to be inserted every time you use it, which is wasteful, but its fastest."}, {"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "reply_to_user": {"reputation": 2107, "user_id": 7451787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lNcOE.jpg?s=128&g=1", "display_name": "bcperth", "link": "https://stackoverflow.com/users/7451787/bcperth"}, "edited": false, "score": 0, "creation_date": 1533027485, "post_id": 51609023, "comment_id": 90183491, "body": "@bcperth, processing time! We really can&#39;t afford to lose any cycles. 1ms delay is devastating. Memory, there is plenty (for the moment at least)."}, {"owner": {"reputation": 2107, "user_id": 7451787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lNcOE.jpg?s=128&g=1", "display_name": "bcperth", "link": "https://stackoverflow.com/users/7451787/bcperth"}, "edited": false, "score": 2, "creation_date": 1533027804, "post_id": 51609023, "comment_id": 90183677, "body": "Then be practical and stick with your original solution. No matter what other solution is found that may be more &quot;elegant&quot; or not, it will be slower. You could do things with C++, or like the solutions suggested, which may have less code, but will be slower I assure you!"}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "reply_to_user": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "edited": false, "score": 1, "creation_date": 1533027824, "post_id": 51609023, "comment_id": 90183688, "body": "@JoeyMallone : the overhead of the fixed code (after VTT and Serge Ballesta&#39;s suggestions) should be minimal compared to the original macro code (the only reall difference is that it now uses a lambda rather than a macro, and some additional <code>&amp;&amp;</code> operations). But it might be a good idea to measure it nevertheless."}, {"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "edited": false, "score": 0, "creation_date": 1533028159, "post_id": 51609023, "comment_id": 90183915, "body": "@SanderDeDycker, ok. Thank you very much. I will test it and get back here in a little while."}], "tags": [], "owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "is_accepted": false, "score": 0, "last_activity_date": 1533027229, "last_edit_date": 1533027229, "creation_date": 1533026364, "answer_id": 51609023, "question_id": 51608396, "link": "https://stackoverflow.com/questions/51608396/how-to-exit-current-function-if-error-on-current-statement-in-c/51609023#51609023", "title": "How to &quot;exit current function, if error on current statement&quot; in C++", "body": "<p>While you cannot directly do what you want, you can get close :</p>\n\n<pre><code>int ConstructAxes() {\n    int retCode = NO_ERROR;\n\n    auto fail_if_error = [&amp;retCode](int result) -&gt; bool {\n        retCode = result;\n        if (retCode != NO_ERROR) {\n            LOG(ERROR, \"[%d] line [%d] [%s]\", retCode, __LINE__, __FILE__);\n            return false;\n        }\n        LOG(VERBOSE, \"[%d] line [%d] [%s]\", retCode, __LINE__, __FILE__);\n        return true;\n    };\n\n    fail_if_error(GetAxis(\"alpha\"))\n      &amp;&amp; fail_if_error(GetAxis(\"beta\"))\n      &amp;&amp; fail_if_error(GetAxis(\"gamma\"))\n      &amp;&amp; fail_if_error(GetAxis(\"delta\"));\n\n    return retCode;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9367, "user_id": 4454124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c094d8979fb41b789a7c7f21d9329359?s=128&d=identicon&r=PG&f=1", "display_name": "mnistic", "link": "https://stackoverflow.com/users/4454124/mnistic"}, "is_accepted": false, "score": 0, "last_activity_date": 1533028609, "creation_date": 1533028609, "answer_id": 51609767, "question_id": 51608396, "link": "https://stackoverflow.com/questions/51608396/how-to-exit-current-function-if-error-on-current-statement-in-c/51609767#51609767", "title": "How to &quot;exit current function, if error on current statement&quot; in C++", "body": "<p>Since you seem to be looking for more of a C solution, the only improvement I would suggest over what you have right now would be to have one point of error handling in the function (suggested by Felix in the comments) that would then also perform cleanup if needed. </p>\n\n<pre><code>#define RETURN_IF_ERROR(function)                                       \\\n{                                                                       \\\n  RetCode = function;                                                   \\\n  if (RetCode != NO_ERROR)                                              \\\n  {                                                                     \\\n      goto return_with_error;                                                   \\\n  }                                                                     \\\n  else {                                                                \\\n      LOG(VERBOSE,\"[%d] line [%d] [%s]\", RetCode, __LINE__, __FILE__ ) );\\\n  }                                                                     \\\n}\n\nint ConstructAxes() {\n    int RetCode;\n    RETURN_IF_ERROR(GetAxis(\"alpha\"));\n    RETURN_IF_ERROR(GetAxis(\"beta\"));\n    RETURN_IF_ERROR(GetAxis(\"gamma\"));\n    RETURN_IF_ERROR(GetAxis(\"delta\"));\n    .\n    .\n    .\n    return RetCode;\nreturn_with_error:\n    cleanup();\n    LOG(ERROR,\"[%d] line [%d] [%s]\", RetCode, __LINE__, __FILE__ ) );\n    return RetCode;\n}\n</code></pre>\n\n<p>Using goto for error handling and cleanup <a href=\"https://stackoverflow.com/questions/788903/valid-use-of-goto-for-error-management-in-c\">in C is fine</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "edited": false, "score": 0, "creation_date": 1533029045, "post_id": 51609792, "comment_id": 90184467, "body": "&quot;But as you say that you do not want to use exceptions in your application it could be acceptable.&quot; ... :)  I am personally open to all solutions that lead to &quot;clean code&quot;, that is easy to read, understand and modify. But exceptions are not allowed/desired as per our team-lead.  Thank you for your answer. I find the first part suitable for my case already, where you talk about the &#39;C-approach&#39;. I will think over all the suggested solutions today and see which one fits best. Thank you for your time."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "edited": false, "score": 1, "creation_date": 1533029299, "post_id": 51609792, "comment_id": 90184637, "body": "@JoeyMallone The exception is thrown and catched in the same compilation unit, so it is not <i>far</i> exception handling, and has no impact at all on the other code. That is the reason why I have proposed it because I find it clean and neat. That being said, you (and you team leader) are on your own. I know that in a programming team <i>rules must be obeyed</i> ;-)"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 3, "creation_date": 1533035706, "post_id": 51609792, "comment_id": 90188809, "body": "I think you should log the file and line of the problematic call, not of the <code>test_and_log()</code> function."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 1, "creation_date": 1533036449, "post_id": 51609792, "comment_id": 90189247, "body": "@Walter: You are right of course. A macro should gather and pass them to the test_and_log function. But I&#39;m too lazy to change it now..."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 2, "last_activity_date": 1533029047, "last_edit_date": 1533029047, "creation_date": 1533028690, "answer_id": 51609792, "question_id": 51608396, "link": "https://stackoverflow.com/questions/51608396/how-to-exit-current-function-if-error-on-current-statement-in-c/51609792#51609792", "title": "How to &quot;exit current function, if error on current statement&quot; in C++", "body": "<p>Ok, for an embedded device you may need to avoid any complex C++ goodies that could require memory allocation. But I would split the logging part which must always occur and the block short exit.</p>\n\n<pre><code>  int test_and_log(int RetCode) {\n    if (RetCode != NO_ERROR)\n      {\n          LOG(ERROR,\"[%d] line [%d] [%s]\", RetCode, __LINE__, __FILE__ ) );\n      }\n      else {\n          LOG(VERBOSE,\"[%d] line [%d] [%s]\", RetCode, __LINE__, __FILE__ ) );\n      }\n    return RetCode;\n  }\n</code></pre>\n\n<p>Then a minimalist macro (the C way):</p>\n\n<pre><code>#define RETURN_IF_ERROR(x) { int cr; if ((cr = test_and_log(x)) != NO_ERROR) return cr; }\n\nint ConstructAxes() {\n    RETURN_IF_ERROR(GetAxis(\"beta\"));\n    RETURN_IF_ERROR(GetAxis(\"gamma\"));\n    RETURN_IF_ERROR(GetAxis(\"delta\"));\n    .\n    .\n    .\n    return 0;                            // ensure a return value if every line passes\n}\n</code></pre>\n\n<p>But for C++ I would still use minimalist exception handling by throwing a int value:</p>\n\n<pre><code>  void test_and_log(int RetCode) {\n    if (RetCode != NO_ERROR)\n      {\n          LOG(ERROR,\"[%d] line [%d] [%s]\", RetCode, __LINE__, __FILE__ ) );\n          throw RetCode;\n      }\n      else {\n          LOG(VERBOSE,\"[%d] line [%d] [%s]\", RetCode, __LINE__, __FILE__ ) );\n      }\n  }\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>int ConstructAxes() {\n  try {\n    test_and_log(GetAxis(\"beta\"));\n    test_and_log(GetAxis(\"gamma\"));\n    test_and_log(GetAxis(\"delta\"));\n    .\n    .\n    .\n  }\n  catch (int RetCode) {\n    return RetCode;\n  }\n  return 0;                            // ensure a return value if every line passes\n}\n</code></pre>\n\n<p>This is rather hacky, because best practices recommend to only throw subclasses of <code>std::exception</code> to have consistent exception handling. But as you say that you do not want to use exceptions in your application it could be acceptable. The nice point on an embedded system is that no plain exception object is ever constructed. But please never use it in <em>normal</em> code.</p>\n\n<hr>\n\n<p>And if you want to exchange memory for processing time, you can always declare <code>test_and_log</code> with an <code>inline</code> specifier...</p>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 0, "last_activity_date": 1533037286, "last_edit_date": 1533037286, "creation_date": 1533035056, "answer_id": 51611897, "question_id": 51608396, "link": "https://stackoverflow.com/questions/51608396/how-to-exit-current-function-if-error-on-current-statement-in-c/51611897#51611897", "title": "How to &quot;exit current function, if error on current statement&quot; in C++", "body": "<p>Talking C:</p>\n\n<p>Your approach is OK, and marcos are only an issue if not used correctly.</p>\n\n<p>So, I'd go for the well structured <code>do {... break on error ...} while(0)</code> approach. This also helps you sticking to the pattern, that a function shall have only one entry- and one exit-point.</p>\n\n<p>Also <em>for the sake of <strong>debugging</strong> and <strong>ease of reading</em></strong>, I'd move the \"jump\"-statement (<code>break</code> here) <strong>out of the macro</strong>.</p>\n\n<pre><code>#define NO_ERROR (0)\n\n// log level IDs\n#define LL_ERROR (0)\n// more log levels here\n#define LL_VERBOSE (10)\n// more log levels here\n#define LL_DEBUG (13)\n// more log levels here\n#define LL_MAXIMUM (16)\n\n// log level long names\nstatic const char * log_level_names[LL_MAXIMUM] = {\n  \"error\",\n  // more here\n  \"verbose\"\n  // more here\n  \"debug\"\n  // more here\n}\n\nint loglevel = LL_ERROR; // default logging-level to error; to be set to any LL_xxxx\n\n// return date-time-stamp string (can be any, and most likely should be ;-)\n#define DATETIMESTAMP_STR asctime(localtime(time(NULL)))\n\n// Generic logging\n#define LOG(ll, fmt, rc, ...) \\\n  while (ll &lt;= loglevel) { \\\n    fprintf(stderr, \"%s [%s]: \" fmt, DATETIMESTAMP_STR, log_level_name[loglevel], __VA_ARGS__); \\\n    break; \\\n  };\n\n// Specific logging\n#define LOG_ERROR_OR_VERBOSE(rc, line, fname) \\\n  do { \\\n    LOG(NO_ERROR != (rc) ?LL_ERROR :LL_VERBOSE, \"[%d] line [%d] [%s]\", rc, line, fname); \\\n  while (0)\n\n\nint foo(void)\n{\n  int result = NO_ERROR;\n\n  LOG(LL_DEBUG, \"entering '%s'\", __func__);\n\n  do {\n    result = bar1(...);\n    LOG_ERROR_OR_VERBOSE(result, __LINE__, __FILE__);\n    if (NO_ERROR &lt;&gt; result) \n      { break; }\n\n    result = bar2(...);\n    LOG_ERROR_OR_VERBOSE(result, __LINE__, __FILE__);\n    if (NO_ERROR &lt;&gt; result) \n      { break; }\n\n    ...\n  } while (0);\n\n  LOG(LL_DEBUG, \"leaving '%s' (rc = %d)\", __func__, result);\n\n  return result;\n}\n</code></pre>\n\n<p>This roughly gives you a 1:3 signal/noise ratio, which you could approve significantly by changing</p>\n\n<pre><code>if (NO_ERROR &lt;&gt; result) \n  { break; }\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if (NO_ERROR &lt;&gt; result) { break; }\n</code></pre>\n\n<p>Another possible improvement would be to change</p>\n\n<pre><code>result = bar1(...);\nLOG_ERROR_OR_VERBOSE(result, __LINE__, __FILE__);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>LOG_ERROR_OR_VERBOSE(result = bar1(...), __LINE__, __FILE__);\n</code></pre>\n\n<p>This leaves you with a SNR of 1, which is the optimum, I feel ... :-)</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 0, "last_activity_date": 1533038580, "last_edit_date": 1533038580, "creation_date": 1533037589, "answer_id": 51612685, "question_id": 51608396, "link": "https://stackoverflow.com/questions/51608396/how-to-exit-current-function-if-error-on-current-statement-in-c/51612685#51612685", "title": "How to &quot;exit current function, if error on current statement&quot; in C++", "body": "<p>You might write a loop, something like:</p>\n\n<pre><code>int RunFunctions(int line, // __LINE__\n                 const char* file, // __FILE__\n                 std::initializer_list&lt;std::function&lt;int()&gt;&gt; functions)\n{\n    int counter = 0;\n    for (auto f : functions) {\n        auto RetCode = f();\n\n        if (RetCode != NO_ERROR) {\n            LOG(ERROR,\"[%d] line [%d] [%s] [%d]\", RetCode, line, file, counter ));\n            return RetCode;\n        } else {\n            LOG(VERBOSE,\"[%d] line [%d] [%s] [%d]\", RetCode, line, file, counter ) );\n        }\n        ++counter;\n    }\n    return NO_ERROR;\n}\n\nint ConstructAxes() {\n    return RunFunctions(__LINE__, __FILE__, {\n        []() { return GetAxis(\"alpha\"); },\n        []() { return GetAxis(\"beta\"); },\n        []() { return GetAxis(\"gamma\"); },\n        []() { return GetAxis(\"delta\"); }\n    });\n}\n</code></pre>\n\n<p>Until we have <a href=\"https://en.cppreference.com/w/cpp/experimental/source_location\" rel=\"nofollow noreferrer\">std::source_location</a> or similar, <code>__LINE__</code>, <code>__FILE__</code> would be required.</p>\n\n<p>If you don't need capture, you may change <code>std::function</code> by function pointers.</p>\n"}], "owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 0, "accepted_answer_id": 51612685, "answer_count": 5, "score": 0, "last_activity_date": 1533038580, "creation_date": 1533024292, "question_id": 51608396, "link": "https://stackoverflow.com/questions/51608396/how-to-exit-current-function-if-error-on-current-statement-in-c", "title": "How to &quot;exit current function, if error on current statement&quot; in C++", "body": "<p>I start with an example to elaborate my problem. And conclude with the exact statement of the question at the end.</p>\n\n<p>So in C, we can write a macro like this,</p>\n\n<pre><code>#define NO_ERROR 0\n#define RETURN_IF_ERROR(function)                                       \\\n{                                                                       \\\n  RetCode = function;                                                   \\\n  if (RetCode != NO_ERROR)                                              \\\n  {                                                                     \\\n      LOG(ERROR,\"[%d] line [%d] [%s]\", RetCode, __LINE__, __FILE__ ) ); \\\n      return RetCode;                                                   \\\n  }                                                                     \\\n  else {                                                                \\\n      LOG(VERBOSE,\"[%d] line [%d] [%s]\", RetCode, __LINE__, __FILE__ ) );\\\n  }                                                                     \\\n}\n</code></pre>\n\n<p>Now this macro could be used in a function like this,</p>\n\n<pre><code>int ConstructAxes() {\n    RETURN_IF_ERROR(GetAxis(\"alpha\"));\n    RETURN_IF_ERROR(GetAxis(\"beta\"));\n    RETURN_IF_ERROR(GetAxis(\"gamma\"));\n    RETURN_IF_ERROR(GetAxis(\"delta\"));\n    .\n    .\n    .\n}\n</code></pre>\n\n<p>So, we exit the current function (e.g. ConstructAxes) immediately with an error code, if one of the functions called within, returns with an error. Without that macro, for each of those 4 statements, I would have to write an if...else block. I'd end up with 4 lines of code that shows the actual functionality or task and then another 16 lines of error-checking (and/or optional logging). (I have seen functions which are 700+ lines long with only 20~30 lines of functionality and 600+ lines of if...else error checking and logging. Not very easy to follow the main logic then.)</p>\n\n<p>(p.s. before anyone points out, I cannot use exceptions. This is a legacy project and exceptions are not used and not desired to be used, nor am I an expert at writing exception-safe code. Also before anyone points out, the returned error code is reinterpreted into some meaningful text, at a higher level. Where and how is not relevant to this question at hand.)</p>\n\n<p>The question is, macros can be problematic and I'd prefer a function. So is there some clean&amp;elegant way to do this in C++ without using a macro? I have a feeling it is NOT possible.</p>\n"}, {"tags": ["c", "floating-point", "byte", "ieee-754"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533022740, "post_id": 51607828, "comment_id": 90180808, "body": "Your second method violates the strict aliasing rule. You could us a char pointer instead."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 2, "creation_date": 1533022949, "post_id": 51607828, "comment_id": 90180924, "body": "You say that you want to extract 4 bytes so it&#39;s unclear to me why you operate at bit level. Please clarify."}, {"owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1533022985, "post_id": 51607828, "comment_id": 90180948, "body": "Actually, that I just put a generic function to extract any bit /word location from the float?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1533023041, "post_id": 51607828, "comment_id": 90180979, "body": "Beware of endianness. Your methods could not return bytes in the same order. Anyway the standard enforces the use of a character pointer to access the bytes of the representation of any type."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1533023146, "post_id": 51607828, "comment_id": 90181044, "body": "And using bit fields in an union only guarantees that you cannot know how an implementation will map the bits... Please don&#39;t."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 1, "creation_date": 1533025074, "post_id": 51607828, "comment_id": 90182102, "body": "If endianness is important for your use case, have a look at this question : <a href=\"https://stackoverflow.com/questions/10620601/portable-serialisation-of-ieee754-floating-point-values\" title=\"portable serialisation of ieee754 floating point values\">stackoverflow.com/questions/10620601/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1533024860, "last_edit_date": 1533024860, "creation_date": 1533023163, "answer_id": 51608046, "question_id": 51607828, "link": "https://stackoverflow.com/questions/51607828/correct-way-of-reading-bytes-from-ieee754-floating-point-format/51608046#51608046", "title": "Correct way of reading bytes from IEEE754 floating point format", "body": "<p>You can do:</p>\n\n<pre><code>unsigned char *p = (unsigned char *)&amp;the_float;\n</code></pre>\n\n<p>and then read 4 bytes from where <code>p</code> is pointing (e.g. <code>p[0]</code>, <code>p[1]</code>, etc.).  The exact best code to \"read 4 bytes\" depends on what form the serial port function accepts data in.</p>\n"}, {"comments": [{"owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 0, "creation_date": 1533026519, "post_id": 51608197, "comment_id": 90182934, "body": "is there a way to command the compiler to arrange the bits in a specific order? just curious!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 3, "creation_date": 1533026729, "post_id": 51608197, "comment_id": 90183051, "body": "No. Of course, a compiler could provide some extension, but that&#39;s not covered by the standard. The use-case for bitfields is to conserve space, so they are <i>mostly</i> useless nowadays."}, {"owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 0, "creation_date": 1533030572, "post_id": 51608197, "comment_id": 90185470, "body": "How do you suggest should I reframe the function extractBitsFloat() if I have to do bitmasking and extracting bit/bytes at certain locations in the 32-bit float type, without violating the strict aliasing rule? Because after creating the mask, I have to AND it with the 32-bit number itself, how can I do this when using char pointer for accessing the float representation?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "edited": false, "score": 2, "creation_date": 1533035140, "post_id": 51608197, "comment_id": 90188482, "body": "@Akay you can for example <code>memcpy()</code> to an <code>uint32_t</code>."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 3, "last_activity_date": 1533023677, "creation_date": 1533023677, "answer_id": 51608197, "question_id": 51607828, "link": "https://stackoverflow.com/questions/51607828/correct-way-of-reading-bytes-from-ieee754-floating-point-format/51608197#51608197", "title": "Correct way of reading bytes from IEEE754 floating point format", "body": "<p>First of all, I assume you're coding specifically for a platform where <code>float</code> actually <strong>is</strong> represented in a IEEE754 <em>single</em>. You can't take this for granted <em>in general</em>, so your code won't be portable to all platforms.</p>\n\n<p>Then, the <code>union</code> approach is the correct one. But don't add this bitfield member! There's no guarantee how the bits will be arranged, so you might access the wrong bits. Just do this:</p>\n\n<pre><code>typedef union {\n  float f;\n  uint8_t bytes[4];\n} FloatingPointIEEE754;\n</code></pre>\n\n<p>Also, don't add a <code>_t</code> suffix to your own types. On POSIX systems, this is reserved to the implementation, so it's best to always avoid it.</p>\n\n<p>Instead of using a <code>union</code>, accessing the bytes through a <code>char</code> pointer is fine as well:</p>\n\n<pre><code>unsigned char *rep = (unsigned char *)&amp;f;\n// access rep[0] to rep[3]\n</code></pre>\n\n<p>Note in both cases, you are accessing the representation in memory, this means you have to pay attention to the <a href=\"https://en.wikipedia.org/wiki/Endianness\" rel=\"nofollow noreferrer\">endianness</a> of your machine.</p>\n\n<hr>\n\n<p>Your second option isn't correct, it violates the <em>strict aliasing rule</em>. In short, you're not allowed to access an object through a pointer that doesn't have compatible type, a <code>char</code> pointer is an explicit exception for accessing the representation. The exact rules are written in <a href=\"https://port70.net/~nsz/c/c11/n1570.html#6.5p7\" rel=\"nofollow noreferrer\">6.5 p7 of N1570</a>, the latest draft to the C11 standard.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533041671, "post_id": 51608318, "comment_id": 90192969, "body": "The worth of the endian test is not definitive here. The endian that needs assessment is the endian of the <code>float</code>, not of an <code>int</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533041907, "post_id": 51608318, "comment_id": 90193142, "body": "Further, are you certain of the <code>int</code> endian test?   I&#39;d expect <code>if (end != 1)</code>,  With <code>*((char*) &amp;end) = 1;</code>, <code>(end != 0)</code> should be true regardless of endian."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1533043275, "post_id": 51608318, "comment_id": 90194061, "body": "@chux: Might I have forgotten a star? ;-). And you are right, I should test floating point endianness. Edited"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1533043272, "last_edit_date": 1533043272, "creation_date": 1533024083, "answer_id": 51608318, "question_id": 51607828, "link": "https://stackoverflow.com/questions/51607828/correct-way-of-reading-bytes-from-ieee754-floating-point-format/51608318#51608318", "title": "Correct way of reading bytes from IEEE754 floating point format", "body": "<p>If you do not care of endianness, just alias a character pointer to the address of a float. The standard explicitely allows to use a charater pointer to access the bytes of the representation of any type. If you need a specific endianness to send the bytes on the serial port, you can test for it before sending:</p>\n\n<ol>\n<li><p>Simple way, just use native endianness:</p>\n\n<pre><code>float f;\n...\nchar * bytes = &amp;f;       // bytes point the the beginning of a char array of size sizeof(f)\n</code></pre></li>\n<li><p>Automatically test for endianness and uses big endian (AKA network order). The <code>struct</code> is just a trick to return an array and have thread safe code.</p>\n\n<pre><code>struct float_bytes {\n    char bytes[sizeof(float)];\n};\nstruct float_bytes(float f) {\n    float end = 1.;\n    float_bytes resul;\n    char *src = (char *) &amp;f;\n    if (*end == 0) {                // end is 0 on a little endian platform, else 0x3f\n        int i = sizeof(f) {         // little endian: reverse the bytes\n        while (i &gt; 0) {\n            resul.bytes[--i] = src++;\n        }\n    }\n    else {                          // already in big endian order, just memcpy\n        memcpy(&amp;(resul.bytes), &amp;f, sizeof(f));\n    }\n    return resul;\n}\n</code></pre>\n\n<p>Beware: the test for endianness will only make sense if floating point is IEEE754 single.</p></li>\n</ol>\n"}], "owner": {"reputation": 946, "user_id": 5405191, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh5.googleusercontent.com/-4P9RvEs8-eM/AAAAAAAAAAI/AAAAAAAAAA4/sRL7T9ciO7U/photo.jpg?sz=128", "display_name": "Akay", "link": "https://stackoverflow.com/users/5405191/akay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 1, "accepted_answer_id": 51608197, "answer_count": 3, "score": 2, "last_activity_date": 1533043272, "creation_date": 1533022410, "last_edit_date": 1533023172, "question_id": 51607828, "link": "https://stackoverflow.com/questions/51607828/correct-way-of-reading-bytes-from-ieee754-floating-point-format", "title": "Correct way of reading bytes from IEEE754 floating point format", "body": "<p>I have a requirement where I need to read the 4 raw bytes of the <strong>single precision IEEE754 floating point</strong> representation as to send on the serial port as it is without any modification. I just wanted to ask what is the correct way of extracting the bytes among the following:</p>\n\n<p>1.) creating a union such as:</p>\n\n<pre><code>typedef union {\n  float f;\n  uint8_t bytes[4];\n  struct {\n    uint32_t mantissa : 23;\n    uint32_t exponent : 8;\n    uint32_t sign : 1;\n  };\n} FloatingPointIEEE754_t ;\n</code></pre>\n\n<p>and then just reading the <code>bytes[]</code> array after writing to the float variable <code>f</code>?</p>\n\n<p>2.) Or, extracting bytes by a function in which a <code>uint32_t</code> type pointer is made to point to the <code>float</code> variable and then the bytes are extracted via masking </p>\n\n<pre><code>uint32_t extractBitsFloat(float numToExtFrom, uint8_t numOfBits, uint8_t bitPosStartLSB){\n  uint32_t *p = &amp;numToExtFrom;\n  /* validate the inputs */\n  if ((numOfBits &gt; 32) || (bitPosStartLSB &gt; 31)) return NULL;\n  /* build the mask */\n  uint32_t mask = ((1 &lt;&lt; numOfBits) - 1) &lt;&lt; bitPosStartLSB;\n  return ((*p &amp; mask) &gt;&gt; bitPosStartLSB);\n}\n</code></pre>\n\n<p>where calling will be made like:</p>\n\n<pre><code>valF = -4.235;\nbyte0 = extractBitsFloat(valF, 8, 0);\nbyte1 = extractBitsFloat(valF, 8, 8);\nbyte2 = extractBitsFloat(valF, 8, 16);\nbyte3 = extractBitsFloat(valF, 8, 24);\n</code></pre>\n\n<p>Please suggest me the correct way if you think both the above-mentioned methods are wrong!</p>\n"}, {"tags": ["c", "opencv"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1533047960, "post_id": 51607454, "comment_id": 90197349, "body": "<code>cvConvertScale</code> for the conversion. (BTW, what exactly do you mean by &quot;convert them by hand&quot;?)"}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1533051556, "post_id": 51607454, "comment_id": 90199910, "body": "Iam sorry for this misleading phrase. I have meant that i tried to create my own <code>cvDiv</code> function. Thanks for the tip, i will try out tomorrow and let you know. The scale for conversion from <code>16U</code> to <code>32F</code> should be 2^16/(Max-Min) -- right ? According to <a href=\"https://stackoverflow.com/questions/14539498/change-type-of-mat-object-from-cv-32f-to-cv-8u\">this</a>."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1533052888, "post_id": 51607454, "comment_id": 90200770, "body": "The scaling is necessary only if you&#39;re going to use functions that expect floating point images to have values in range [0,1]. To map the full range of 16U to [0,1], you&#39;d use scaling factor (1.0/((2^16)-1))). However, if all you need to do is some arithmetics, just leave the scale at 1 (or use the <a href=\"http://opencv.jp/opencv-1.0.0_org/docs/ref/opencvref_cxcore.htm#decl_cvConvertScale\" rel=\"nofollow noreferrer\"><code>cvConvert</code></a> macro)."}, {"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1533105071, "post_id": 51607454, "comment_id": 90217801, "body": "@DanMa\u0161ek <code>cvConvert</code> works great and so <code>cvDiv</code> now. Thanks. It is not easy to search for such an old functions if everybody is using new <code>C++</code> versions these days. Could you, please, post it as answer, so iam able to mark this question as answered ? It may help somebody in the future."}], "owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1533105497, "creation_date": 1533021137, "last_edit_date": 1533105497, "question_id": 51607454, "link": "https://stackoverflow.com/questions/51607454/cvdiv-throw-an-exception", "title": "cvDiv throw an exception", "body": "<p>I'm using <a href=\"/questions/tagged/opencv\" class=\"post-tag\" title=\"show questions tagged &#39;opencv&#39;\" rel=\"tag\">opencv</a> version <code>1.0.0</code> (unfortunately can not use newer one) for basic image operations like addition, division etc.</p>\n\n<p>Data structures i'm using are defined like so:</p>\n\n<pre><code>CvMat m1 = cvCreateMat(w, h, CV_16U);\nCvMat m2 = cvCreateMat(w, h, CV_16U);\nCvMat m3 = cvCreateMat(w, h, CV_16U);\n</code></pre>\n\n<p>and contain 16bit unsigned grayscale raw images.</p>\n\n<p>Operations like addition, substraction are working just fine. On the other hand, operation <code>cvDiv(m1, m2, m3);</code> produces <code>Division by zero</code> exception.</p>\n\n<p>It seems like mats have to be converted to <code>CV_32F</code>, but i could not find a way how to properly convert them using <a href=\"/questions/tagged/opencv\" class=\"post-tag\" title=\"show questions tagged &#39;opencv&#39;\" rel=\"tag\">opencv</a>.</p>\n\n<p>If i convert them manually (by my own function) i'm getting <code>Violation reading location</code> exception.</p>\n\n<p><strong>My questions are following:</strong></p>\n\n<ol>\n<li><p>How to convert <code>CvMat</code> from <code>CV_16U</code> to <code>CV_32F</code></p></li>\n<li><p>How to correctly divide two images using <code>cvDiv</code> function</p></li>\n</ol>\n"}, {"tags": ["python", "c", "qemu"], "answers": [{"tags": [], "owner": {"reputation": 135, "user_id": 4394976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5376fcc363b17e38e5362a05835a8149?s=128&d=identicon&r=PG&f=1", "display_name": "yayaya", "link": "https://stackoverflow.com/users/4394976/yayaya"}, "is_accepted": false, "score": 1, "last_activity_date": 1534145477, "creation_date": 1534145477, "answer_id": 51817278, "question_id": 51606613, "link": "https://stackoverflow.com/questions/51606613/how-to-take-snapshot-in-qcow2-in-programming-way/51817278#51817278", "title": "How to take snapshot in qcow2 in programming way?", "body": "<p>Like this:</p>\n\n<pre><code>qemu-img snapshot [-l | -a snapshot | -c snapshot | -d snapshot] filename\n</code></pre>\n\n<p>If you want to take external snapshot, you can specific the path of backing-file.</p>\n\n<p>If you want A be the backing-file of B:</p>\n\n<pre><code>qemu-img create -b A B\n</code></pre>\n"}], "owner": {"reputation": 334, "user_id": 7670016, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e748c5f3047fd4ec76e56626d00c5017?s=128&d=identicon&r=PG&f=1", "display_name": "code_worker", "link": "https://stackoverflow.com/users/7670016/code-worker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1534145477, "creation_date": 1533018056, "question_id": 51606613, "link": "https://stackoverflow.com/questions/51606613/how-to-take-snapshot-in-qcow2-in-programming-way", "title": "How to take snapshot in qcow2 in programming way?", "body": "<p>I survey many websites and they always said taking snapshot in qcow2 by cmd.</p>\n\n<p>But I want to do it by programming way.</p>\n\n<p>I find nothing to tell the details how to take snapshot in qcow2.</p>\n\n<p>Is there any tutorial to do this in Python or in C ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1533017714, "post_id": 51606505, "comment_id": 90178254, "body": "and why would you write like a code like that? can you spell the logic in simple English? if no, then dont write the code like that."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1533017719, "post_id": 51606505, "comment_id": 90178256, "body": "You are putting yourself at risk of downvotes by people who fight for the recognition of C and C++ as separate languages. (I did not downvote.)"}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 1, "creation_date": 1533017804, "post_id": 51606505, "comment_id": 90178299, "body": "Although this is only another writing for the <code>if</code>query."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533017805, "post_id": 51606505, "comment_id": 90178301, "body": "Are you aware of how the two operators <code>?:</code> and <code>,</code>work and their precedence?"}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533017906, "post_id": 51606505, "comment_id": 90178356, "body": "@Yunnosch  basically, when <code>a</code> is greater than <code>b</code> <code>3</code>will be assigned to <code>c</code> else <code>6</code>. But why are those other integers ignored?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 0, "creation_date": 1533018033, "post_id": 51606505, "comment_id": 90178415, "body": "@Alan I know both. I try to gauge OPs level of knowledge, they seem to be unaware of how e.g. the <code>,</code> operator works."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533018089, "post_id": 51606505, "comment_id": 90178436, "body": "Close-voters for the reason of lack of MCVE, please elaborate."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1533018221, "post_id": 51606505, "comment_id": 90178508, "body": "This question gives the strong impression of being a homework assignment. Most users here do not take kindly to being asked to do other peoples (home)work. Please state whether this is homework and whether you would appreciate help according to the compromise described here: <a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\" title=\"how do i ask and answer homework questions\">meta.stackoverflow.com/questions/334822/&hellip;</a>"}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533018240, "post_id": 51606505, "comment_id": 90178516, "body": "@Yunnosch I know that you know how this logic works, that&#39;s why I am asking you, why <code>3</code>or<code>6</code>get assigned and the other integer get skipped."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 0, "creation_date": 1533018395, "post_id": 51606505, "comment_id": 90178588, "body": "@Alan Yes I know. But this is probably a homework question. In that case I insist on doing it the didactic way described in the link I provided. Please be patient. If it is not homework, then it is a question deserving downvotes for lack of own research effort. Also, I already practically gave the answer in my comments. Somewhat well hidden of course."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 1, "creation_date": 1533018449, "post_id": 51606505, "comment_id": 90178608, "body": "@Alan: Do you want to check what happens if you invert the condition?  When does <code>6</code> get assigned to <code>c</code>?"}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1533018550, "post_id": 51606505, "comment_id": 90178665, "body": "@JonathanLeffler when <code>a&lt;b</code> althought I am not the <code>OP</code>I am just curious why the other <code>int&#39;s</code>get skipped..."}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533018624, "post_id": 51606505, "comment_id": 90178701, "body": "@Yunnosch I think I got it from your hidden comment ;)"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 0, "creation_date": 1533018647, "post_id": 51606505, "comment_id": 90178715, "body": "@Alan Not yet. Mind the trap hinted at by Jonathan Leffler."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 0, "creation_date": 1533018668, "post_id": 51606505, "comment_id": 90178726, "body": "@Alan: &quot;precedence rules&quot;. Note that <code>,</code> has lower precedence than assignment; if the condition is inverted, the value assigned to <code>c</code> is <code>2</code>, not <code>6</code> \u2014 the values <code>5</code> and <code>6</code> are ignored.  So are the first <code>1</code> and <code>2</code>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1533018681, "post_id": 51606505, "comment_id": 90178734, "body": "@JonathanLeffler Thanks for the headsup, I missed that trap."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533018803, "post_id": 51606505, "comment_id": 90178790, "body": "OP seems to have abandoned the question. I will check later."}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1533018837, "post_id": 51606505, "comment_id": 90178800, "body": "@JonathanLeffler thanks, got it! Keep helping!"}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1533019591, "post_id": 51606505, "comment_id": 90179197, "body": "@JonathanLeffler only to ask If I understood right, the <code>:</code> operator has a higher precedence than the <code>,</code> that means if, in this case, the <code>then</code>assignment gets executed, the <code>3</code>will be assigned (as it is at the left of the <code>:</code> operator (from left to right) and with the inverted condition, the <code>2</code>is the nearest value on the right. Or?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 0, "creation_date": 1533019646, "post_id": 51606505, "comment_id": 90179222, "body": "@Alan To check whether you really got it, answer yourself the question &quot;Where does the 6 go?&quot; It is ignored, but in an intricate way and can be made &quot;visible&quot;."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 0, "creation_date": 1533019850, "post_id": 51606505, "comment_id": 90179323, "body": "@Alan: As I said, it&#39;s a bit intricate.  The <code>:</code> is only part of the operator, but it does have a grouping role for the comma expressions between the <code>?</code> and the <code>:</code>."}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1533020652, "post_id": 51606505, "comment_id": 90179751, "body": "Didn&#39;t get it @JonathanLeffler because in the ternary conditional (<code>?:</code>)the precendece is from <code>right to left</code> , so it is logical that <code>3</code>will be assigned as it is on the right side of the three integers but why doesn&#39;t <code>6</code>get assigned then as it is on the right hand side of the other <code>3 int&#39;s</code>. I searched for it but It seems I don&#39;t get it..."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "edited": false, "score": 0, "creation_date": 1533020933, "post_id": 51606505, "comment_id": 90179870, "body": "@Alan: See my <a href=\"https://stackoverflow.com/a/51607352/15168\">answer</a> \u2014 I hope that explains what goes on sufficiently."}, {"owner": {"reputation": 559, "user_id": 6865330, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/OGNmd.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6865330/alan"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1533021535, "post_id": 51606505, "comment_id": 90180203, "body": "@JonathanLeffler Yes, I think so. Because the compiler sees the <code>((1,2,3) :2),5,6</code> in brackets as you mentioned. That is why the precedence is from left to right the last integer gets assigned (<code>3</code>or <code>2</code>). (Because althought <code>?:</code>precedence is from right to left the paranthese have a higher precendence)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1533656044, "post_id": 51606505, "comment_id": 90421770, "body": "Welcome to Stack Overflow. Please note that the preferred way of saying &#39;thanks&#39; around here is by up-voting good questions and helpful answers (once you have enough reputation to do so), and by accepting the most helpful answer to any question you ask (which also gives you a small boost to your reputation). Please see the <a href=\"https://stackoverflow.com/tour\">About</a> page and also <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask questions here?</a> and <a href=\"http://stackoverflow.com/help/someone-answers\">What do I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2931, "user_id": 2148666, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uLn2O.jpg?s=128&g=1", "display_name": "Nicol&#225;s Carrasco", "link": "https://stackoverflow.com/users/2148666/nicol%c3%a1s-carrasco"}, "edited": false, "score": 0, "creation_date": 1533021133, "post_id": 51607250, "comment_id": 90179976, "body": "You may what to use code blocks or inline code format (back ticks ` ` around your code) to make the answer easier to read"}], "tags": [], "owner": {"reputation": 1, "user_id": 5479583, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CZ9KqEzYlqE/AAAAAAAAAAI/AAAAAAAADS0/k4CB2xqfP2k/photo.jpg?sz=128", "display_name": "Rohini Rajpal", "link": "https://stackoverflow.com/users/5479583/rohini-rajpal"}, "is_accepted": false, "score": 0, "last_activity_date": 1533022480, "last_edit_date": 1533022480, "creation_date": 1533020416, "answer_id": 51607250, "question_id": 51606505, "link": "https://stackoverflow.com/questions/51606505/ternary-operator-in-c/51607250#51607250", "title": "Ternary operator in C?", "body": "<p>if (a>b)</p>\n\n<p>value of c = expect integer expression before <code>:</code> token</p>\n\n<p>else </p>\n\n<p>value of c = expect integer expression after <code>:</code> token</p>\n\n<p>if c is integer type and we are using ternary operator ? then compiler expects integer data type before and after <code>:</code> token</p>\n\n<p>if we are using unsigned integer data type, it will convert it to signed integer data type</p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 7, "last_activity_date": 1533020824, "creation_date": 1533020824, "answer_id": 51607352, "question_id": 51606505, "link": "https://stackoverflow.com/questions/51606505/ternary-operator-in-c/51607352#51607352", "title": "Ternary operator in C?", "body": "<p>The line of code containing the ternary operator is intricate and intriguing.  It also has subtle but crucial asymmetries in the way it is interpreted that are far from obvious when it is written as shown in the question.  Let's consider a minor variant of the original code as follows, which exercises both the 'true' and 'false' parts of the ternary operator (in two separate statements \u2014 though I could have made a function and passed arguments to that instead):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    int a = 5, b = 4, c;\n    c = a &gt; b ? 1, 2, 3 : 2, 5, 6;\n    printf(\"a = %d, b = %d, c = %d\\n\", a, b, c);\n    a = b - 1;\n    c = a &gt; b ? 1, 2, 3 : 2, 5, 6;\n    printf(\"a = %d, b = %d, c = %d\\n\", a, b, c);\n    return 0;\n}\n</code></pre>\n\n<p>The output from this program is:</p>\n\n<pre><code>a = 5, b = 4, c = 3\na = 3, b = 4, c = 2\n</code></pre>\n\n<p>What's going on here?</p>\n\n<p>Remember, the comma operator has even lower precedence than the assignment operator, so that you can, if you wish, write code such as:</p>\n\n<pre><code>if (a &gt; b)\n    c = 2, d = 3, e = 6;\n</code></pre>\n\n<p>and there are three assignments in the body of the <code>if</code> statement.  That would not be regarded as good code for general use, but the technique can be useful in a macro \u2014 very occasionally it can be useful in a macro.</p>\n\n<p>Let's add some parentheses \u2014 the correct set of parentheses as the compiler interprets the code:</p>\n\n<pre><code> c =  a &gt; b  ?  1, 2, 3  : 2 , 5, 6;\n(c = (a &gt; b) ? (1, 2, 3) : 2), 5, 6;\n</code></pre>\n\n<p>The condition <code>a &gt; b</code> controls whether <code>1, 2, 3</code> or <code>2</code> is evaluated, and the result is assigned to <code>c</code>.  The result of <code>1, 2, 3</code> is <code>3</code>, so if <code>a &gt; b</code>, the value assigned is <code>3</code> (as in the question), and if <code>a &lt;= b</code>, the value assigned is <code>2</code>.  The <code>5</code> and the <code>6</code> are evaluated for side-effects \u2014 but there are no side-effects so they are effectively discarded.</p>\n\n<p>The <code>:</code> of the ternary operator has a grouping effect on the code between the <code>?</code> and the <code>:</code> which does not occur after the <code>:</code>.</p>\n\n<p>Note that to get this code to compile, I had to discard my default compiler options.  With the code in the question and my normal, default compiler options, I get (source code in <code>top67.c</code>):</p>\n\n<pre><code>$ gcc -O3 -g -std=c11 -Wall -Wextra -Werror -Wmissing-prototypes -Wstrict-prototypes \\\n&gt;     top67.c -o top67 \ntop67.c:3:5: error: function declaration isn\u2019t a prototype [-Werror=strict-prototypes]\n int main()\n     ^~~~\ntop67.c: In function \u2018main\u2019:\ntop67.c:6:18: error: left-hand operand of comma expression has no effect [-Werror=unused-value]\n     c = a &gt; b ? 1, 2, 3 : 2, 5, 6;\n                  ^\ntop67.c:6:21: error: left-hand operand of comma expression has no effect [-Werror=unused-value]\n     c = a &gt; b ? 1, 2, 3 : 2, 5, 6;\n                     ^\ntop67.c:6:28: error: right-hand operand of comma expression has no effect [-Werror=unused-value]\n     c = a &gt; b ? 1, 2, 3 : 2, 5, 6;\n                            ^\ntop67.c:6:31: error: right-hand operand of comma expression has no effect [-Werror=unused-value]\n     c = a &gt; b ? 1, 2, 3 : 2, 5, 6;\n                               ^\ncc1: all warnings being treated as errors\n$\n</code></pre>\n\n<p>I'd get more errors from the code shown in this answer.  You should be compiling with similar options to avoid problems in your own code.</p>\n"}, {"tags": [], "owner": {"reputation": 1575, "user_id": 5169186, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DvwLu.jpg?s=128&g=1", "display_name": "Oghli", "link": "https://stackoverflow.com/users/5169186/oghli"}, "is_accepted": false, "score": 1, "last_activity_date": 1533027328, "last_edit_date": 1533027328, "creation_date": 1533025641, "answer_id": 51608789, "question_id": 51606505, "link": "https://stackoverflow.com/questions/51606505/ternary-operator-in-c/51608789#51608789", "title": "Ternary operator in C?", "body": "<p>This code: </p>\n\n<pre><code>c = a &gt; b ? 1, 2, 3 : 2, 5, 6;\n</code></pre>\n\n<p>is understood by the compiler as:</p>\n\n<pre><code>(c = a &gt; b ? (1, 2, 3) : 2),\n5,\n6;\n</code></pre>\n\n<blockquote>\n  <p>In the C and C++ programming languages, the comma operator\n  (represented by the token ,) is a binary operator that evaluates its\n  first operand and discards the result, and then evaluates the second\n  operand and returns this value (and type).\n  If there are more than two operands, the last expression will be returned.</p>\n</blockquote>\n\n<p>At this condition <code>(c = a &gt; b ? (1, 2, 3) : 2)</code></p>\n\n<p><code>a &gt; b</code> will return true</p>\n\n<p>so it will evaluate first operand <code>1</code> and discards the result then evaluate the second operand <code>2</code> and discard the result then evaluate the third operand <code>3</code> and return its value which is <code>3</code></p>\n\n<p>and then <code>5, 6;</code> will be discarded after evaluating them because they don't produce any side effects.</p>\n\n<p>at the end the output of program will be <code>3</code>.</p>\n\n<p>but if we consider <code>a &lt; b</code> at condition <code>(c = a &lt; b ? (1, 2, 3) : 2)</code></p>\n\n<p>in this case it will evaluate else condition and return its value which is <code>2</code></p>\n\n<p>also <code>5, 6;</code> will be discarded after evaluating them because they don't produce any side effects.</p>\n\n<p>at the end the output of program will be <code>2</code>.</p>\n"}], "owner": {"reputation": 37, "user_id": 7502225, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-riuDXr-voDs/AAAAAAAAAAI/AAAAAAAAABc/FEOGa6DweN8/photo.jpg?sz=128", "display_name": "Utkarsh Verma", "link": "https://stackoverflow.com/users/7502225/utkarsh-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1533027328, "creation_date": 1533017571, "last_edit_date": 1533022187, "question_id": 51606505, "link": "https://stackoverflow.com/questions/51606505/ternary-operator-in-c", "title": "Ternary operator in C?", "body": "<p>Why is the output displayed as 3?  What is the concept behind this?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int a = 5, b = 4, c;\n    c = a &gt; b ? 1, 2, 3 : 2, 5, 6;\n    printf(\"%d\\n\", c);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "casting", "segmentation-fault"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1533017533, "post_id": 51606273, "comment_id": 90178185, "body": "I rolled back your changes. See the comments under @Yunnosch&#39;s answer. Changing code to such extent is bad <a href=\"https://stackoverflow.com\">Stack Overflow</a> netiquette."}, {"owner": {"reputation": 574, "user_id": 7213190, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2029b9001edffecba0fa621907d93734?s=128&d=identicon&r=PG&f=1", "display_name": "Kim", "link": "https://stackoverflow.com/users/7213190/kim"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1533017774, "post_id": 51606273, "comment_id": 90178287, "body": "The first one was a mistake .. should I have to let this question be though it wasn&#39;t my intention ?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1533018210, "post_id": 51606273, "comment_id": 90178502, "body": "With all due respect, no one was forcing you to post irrelevant code. You should prepare your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in advance. You are asking volunteers to help with your problem, and then shift the goal on them without warning. It&#39;s unfair, and I personally think is a bit rude. You can always <a href=\"https://stackoverflow.com/questions/ask\">ask a new question</a>."}, {"owner": {"reputation": 574, "user_id": 7213190, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2029b9001edffecba0fa621907d93734?s=128&d=identicon&r=PG&f=1", "display_name": "Kim", "link": "https://stackoverflow.com/users/7213190/kim"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1533018865, "post_id": 51606273, "comment_id": 90178832, "body": "Okay, but I want to say that ...I saw the Yunnosch&#39;s comments and decided to roll back my question before you did. Also I already felt sorry to Yunnosch unless you gave me some lesson. I could be aware of what you say and do it myself. The reason why I commented like above was just that I felt not so good on your speaking. Anyway, I&#39;m sorry If you felt I was rude ."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533020608, "post_id": 51606273, "comment_id": 90179726, "body": "I am fine. As long as you keep the question and don&#39;t change it, I will happily keep my little rep-present and not carry a grudge. Please do not carry a grudge against StoryTeller either. You are a rare case of insight, take that as a compliment. Experienced users often have to step in to make the less reflective askers stay fair. And the affected answerers are grateful if they do not have to do the rollback themselves, it &quot;looks&quot; better. Have fun."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533020932, "post_id": 51606273, "comment_id": 90179868, "body": "By the way, I notice that you have accepted no answer to any of your questions. I can understand if you do not accept an answer to this accidental question, but are you in fact aware of this: <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1533016843, "post_id": 51606328, "comment_id": 90177918, "body": "Maybe, better, <code>...asking for undefined behaviour</code>? segmentation fault is not guaranteed, you know."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1533016923, "post_id": 51606328, "comment_id": 90177953, "body": "@SouravGhosh While you are correct, it is not asking for UB, it <b>is</b>. Isn&#39;t it?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1533017066, "post_id": 51606328, "comment_id": 90177998, "body": "@SouravGhosh Not guaranteed, sometimes what you ask for you do not get. ;-)"}, {"owner": {"reputation": 574, "user_id": 7213190, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2029b9001edffecba0fa621907d93734?s=128&d=identicon&r=PG&f=1", "display_name": "Kim", "link": "https://stackoverflow.com/users/7213190/kim"}, "edited": false, "score": 0, "creation_date": 1533017299, "post_id": 51606328, "comment_id": 90178086, "body": "I edited the code in my question. Could you check the code again ?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 3, "creation_date": 1533017395, "post_id": 51606328, "comment_id": 90178123, "body": "Please undo your changes. It changes the question completly. That is considered a &quot;moving target&quot; question and considered unfair towards people who have answered the first version (which admittedly affects me in this case)."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1533017458, "post_id": 51606328, "comment_id": 90178144, "body": "Please ask a new question to get help with that different code."}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 3, "last_activity_date": 1533017011, "last_edit_date": 1533017011, "creation_date": 1533016790, "answer_id": 51606328, "question_id": 51606273, "link": "https://stackoverflow.com/questions/51606273/copying-char-arr64-to-char-arr-can-cause-a-segmentation-fault/51606328#51606328", "title": "Copying char arr[64] to char arr[] can cause a segmentation fault?", "body": "<p>This defines a pointer variable</p>\n\n<pre><code>A* a;\n</code></pre>\n\n<p>There is nothing it is cleanly pointing to, the pointer is non-initialised.</p>\n\n<p>This accesses whatever it is pointing to</p>\n\n<pre><code>a-&gt;num = 1;\nstrcpy(a-&gt;arr, \"Hi\");\n</code></pre>\n\n<p>Without allocating anything to the pointer beforehand (by e.g. using <code>malloc()</code>) this is asking for segfaults as one possible consequence of the undefined behaviour it invokes.</p>\n"}, {"comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533020970, "post_id": 51607374, "comment_id": 90179901, "body": "Nice salomonic solution (even more for the non-technical problem here than anything else; technically it is of course also nice). My respect."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1533021356, "post_id": 51607374, "comment_id": 90180102, "body": "@Yunnosch well thanks, I wasn&#39;t sure what&#39;s going on here, but assumed from the comments this first error wasn&#39;t (all) OP was confused with, therefore just added some more info :)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 1, "last_activity_date": 1533020972, "last_edit_date": 1533020972, "creation_date": 1533020889, "answer_id": 51607374, "question_id": 51606273, "link": "https://stackoverflow.com/questions/51606273/copying-char-arr64-to-char-arr-can-cause-a-segmentation-fault/51607374#51607374", "title": "Copying char arr[64] to char arr[] can cause a segmentation fault?", "body": "<p>This is an addendum to <a href=\"https://stackoverflow.com/a/51606328/2371524\">Yunnosch's answer</a>, which identifies the problem correctly. Let's assume you do it correctly and either write just</p>\n\n<pre><code>A a;\n</code></pre>\n\n<p>which gives you an object of automatic storage duration when declared inside a function, or you dynamically allocated an instance of <code>A</code> like this:</p>\n\n<pre><code>A *a = malloc(sizeof *a);\nif (!a) return -1; // or whatever else to do in case of allocation error\n</code></pre>\n\n<p>Then, the next thing is your cast:</p>\n\n<pre><code>B* b = (B*)a;\n</code></pre>\n\n<p>This is not correct, types <code>A</code> and <code>B</code> are not compatible. Here, it will probably work in practice because the <code>struct</code> members <strong>are</strong> compatible, but beware that strange things can happen because the compiler is allowed to assume <code>a</code> and <code>b</code> point to different objects because their types are not compatible. For more information, read on the topic of what's commonly called the <em>strict aliasing rule</em>.</p>\n\n<p>You should also know that an incomplete array type (without a size) is only allowed as the very last member of a <code>struct</code>. With a definition like yours:</p>\n\n<pre><code>typedef struct {\n    int num;\n    char arr[];\n} B;\n</code></pre>\n\n<p>the member <code>arr</code> is allowed to have any size, but it's <strong>your responsibility</strong> to allocate it correctly. The size of <code>B</code> (<code>sizeof(B)</code>) doesn't include this member. So if you just write</p>\n\n<pre><code>B b;\n</code></pre>\n\n<p>you can't store <em>anything</em> in <code>b.arr</code>, it has a size of <code>0</code>. This last member is called a <em>flexible array member</em> and can only be used correctly with dynamic allocation, adding the size manually, like this:</p>\n\n<pre><code>B *b = malloc(sizeof *b + 64);\n</code></pre>\n\n<p>This gives you an instance <code>*b</code> with an <code>arr</code> of size 64. If the array doesn't have the type <code>char</code>, you must multiply manually with the size of your member type -- it's not necessary for <code>char</code> because <code>sizeof(char)</code> is by definition <code>1</code>. So if you change the type of your array to something different, e.g. <code>int</code>, you'd write this to allocate it with 64 elements:</p>\n\n<pre><code>B *b = malloc(sizeof *b + 64 * sizeof *(b-&gt;arr));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1533021202, "creation_date": 1533021202, "answer_id": 51607473, "question_id": 51606273, "link": "https://stackoverflow.com/questions/51606273/copying-char-arr64-to-char-arr-can-cause-a-segmentation-fault/51607473#51607473", "title": "Copying char arr[64] to char arr[] can cause a segmentation fault?", "body": "<p>It appears that you are confusing two different topics. In C99/C11 <code>char arr[];</code> as the last member of a structure is a <em>Flexible Array Member</em> (FAM) and it allows you to allocate for the structure itself and <code>N</code> number of elements for the flexible array. However -- you must allocate storage for it. The FAM provides the benefit of allowing one-allocation and one-free where there would normally be two required. (In C89 a similar implementation went by the name <em>struct hack</em>, but it was slightly different).</p>\n\n<p>For example, <code>B *b = malloc (sizeof *b + 64 * sizeof *b-&gt;arr);</code> would allocate storage for <code>b</code> <em>plus</em> 64-characters of storage for <code>b-&gt;arr</code>. You could then copy the members of <code>a</code> to <code>b</code> using the proper <code>'.'</code> and <code>'-&gt;'</code> syntax.</p>\n\n<p>A short example can illustrate:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define NCHAR 64   /* if you need a constant, #define one (or more) */\n\ntypedef struct {\n    int num;\n    char arr[NCHAR];\n} A;\n\ntypedef struct {\n    int num;\n    char arr[];   /* flexible array member */\n} B;\n\nint main (void) {\n    A a = { 1, \"Hi\" };\n    B *b = malloc (sizeof *b + NCHAR * sizeof *b-&gt;arr);\n\n    if (!b) {\n        perror (\"malloc-b\");\n        return 1;\n    }\n\n    b-&gt;num = a.num;\n    strcpy (b-&gt;arr, a.arr);\n\n    printf (\"b-&gt;num: %d\\nb-&gt;arr: %s\\n\", b-&gt;num, b-&gt;arr);\n\n    free (b);\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/struct_fam\nb-&gt;num: 1\nb-&gt;arr: Hi\n</code></pre>\n\n<p>Look things over and let me know if that helps clear things up. Also let me know if you were asking something different. It is a little unclear exactly where you confusion lies.</p>\n"}], "owner": {"reputation": 574, "user_id": 7213190, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2029b9001edffecba0fa621907d93734?s=128&d=identicon&r=PG&f=1", "display_name": "Kim", "link": "https://stackoverflow.com/users/7213190/kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1533021202, "creation_date": 1533016588, "last_edit_date": 1533017489, "question_id": 51606273, "link": "https://stackoverflow.com/questions/51606273/copying-char-arr64-to-char-arr-can-cause-a-segmentation-fault", "title": "Copying char arr[64] to char arr[] can cause a segmentation fault?", "body": "<pre><code>typedef struct {\n    int num;\n    char arr[64];\n} A;\n\ntypedef struct {\n    int num;\n    char arr[];\n} B;\n</code></pre>\n\n<p>I declared <code>A* a;</code> and then put some data into it. Now I want to cast it to a <code>B*</code>.</p>\n\n<pre><code>A* a;\na-&gt;num = 1;\nstrcpy(a-&gt;arr, \"Hi\");\n\nB* b = (B*)a;\n</code></pre>\n\n<p>Is this right?<br>\nI get a segmentation fault sometimes (not always), and I wonder if this could be the cause of the problem.</p>\n\n<p>I got a segmentation fault even though I didn't try to access to <code>char arr[]</code> after casting.</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 6172, "user_id": 8254699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91384172702e29895e620c2b0924ef3?s=128&d=identicon&r=PG&f=1", "display_name": "kocica", "link": "https://stackoverflow.com/users/8254699/kocica"}, "edited": false, "score": 1, "creation_date": 1533014275, "post_id": 51605849, "comment_id": 90177019, "body": "It is not 1-dimensional array. Maybe in memory it is represented as 1d"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 2, "creation_date": 1533015706, "post_id": 51605849, "comment_id": 90177508, "body": "It is Undefined Behavior to print pointers using <code>%d</code>. Both <code>a+1</code> and <code>*(a+1)</code> are pointers and you should use <code>%p</code> after casting them to <code>void*</code> if you wish to print them. That being said, both <code>a+1</code> and <code>*(a+1)</code> will have the same <i>value</i> but different <i>types</i>."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1533092163, "post_id": 51605849, "comment_id": 90214377, "body": "Why wouldn&#39;t they be? Both pointers point to the same spot in memory. Why does it surprise you? Just stop trying to print pointer values with <code>%d</code>. <code>%d</code> cannot be used with pointers."}], "answers": [{"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 2, "last_activity_date": 1533061523, "last_edit_date": 1533061523, "creation_date": 1533015216, "answer_id": 51606040, "question_id": 51605849, "link": "https://stackoverflow.com/questions/51605849/about-pointers-and-value-of-operator/51606040#51606040", "title": "About Pointers and Value of operator", "body": "<p><code>a+1</code> is the address of an array.<br>\n(The array is <code>a[1]</code>\u2013 the address can also be written <code>&amp;a[1]</code>.)</p>\n\n<p><code>*(a+1)</code> is the array at that address (that is, the array <code>a[1]</code>). </p>\n\n<p>When you pass an array as an argument, the value is implicitly converted into the address of that array's first element.<br>\nIn your case, <code>*(a+1)</code> (i.e. <code>a[1]</code>) is converted into <code>&amp;a[1][0]</code>.</p>\n\n<p>The address of an array is the same as the address of that array's first element \u2013 <code>&amp;a[1]</code> denotes the same location as <code>&amp;a[1][0]</code>, but with a different type.</p>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1533022067, "post_id": 51607231, "comment_id": 90180454, "body": "Both answers provide useful pieces to the puzzle. Nicely done."}, {"owner": {"reputation": 69, "user_id": 7478809, "user_type": "registered", "profile_image": "https://graph.facebook.com/362796770730196/picture?type=large", "display_name": "Arijit Karali", "link": "https://stackoverflow.com/users/7478809/arijit-karali"}, "edited": false, "score": 0, "creation_date": 1533058602, "post_id": 51607231, "comment_id": 90203689, "body": "My question is whey they evaluate to same adress"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1533068052, "post_id": 51607231, "comment_id": 90208194, "body": "The difference in type may be illustrated by comparing the effect of <code>(a+1)+1</code> and <code>(*(a+1))+1</code>.  The former will point to <code>a[2][0]</code>, while the latter will point to <code>a[1][1]</code>."}, {"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "reply_to_user": {"reputation": 69, "user_id": 7478809, "user_type": "registered", "profile_image": "https://graph.facebook.com/362796770730196/picture?type=large", "display_name": "Arijit Karali", "link": "https://stackoverflow.com/users/7478809/arijit-karali"}, "edited": false, "score": 1, "creation_date": 1533091466, "post_id": 51607231, "comment_id": 90214264, "body": "@ArijitKarali I have edit my answer and given example to explain they are different but why they evaluate to same address."}], "tags": [], "owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "is_accepted": true, "score": 4, "last_activity_date": 1533092005, "last_edit_date": 1533092005, "creation_date": 1533020341, "answer_id": 51607231, "question_id": 51605849, "link": "https://stackoverflow.com/questions/51605849/about-pointers-and-value-of-operator/51607231#51607231", "title": "About Pointers and Value of operator", "body": "<p>Both <code>a+1</code> and <code>*(a+1)</code> evaluate to same address but their type is different.</p>\n\n<p><code>a+1</code> is of type <code>int (*)[3]</code> and <code>*(a+1)</code> is of type <code>int *</code>.</p>\n\n<p>Also, <code>%d</code> is not the correct format specifier for printing a pointer. Instead, you should use <code>%p</code></p>\n\n<pre><code>printf(\"a+1 = %p\\n\", (void*)(a+1));  // output 1\nprintf(\"*(a+1) = %p\\n\", (void*)(*(a+1)));  //output 2\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT</strong><br>\n[OP asked in comment - <em><code>My question is whey they evaluate to same adress</code></em><br>\nTo illustrate this by giving example, editing my answer]</p>\n\n<p>To understand this in a simple way, lets consider an example of 1D array:</p>\n\n<pre><code>int b[3] = {3,4,5};\n\n    b[0] b[1] b[2]\n    +-----------+\n b  | 3 | 4 | 5 |\n    +-----------+\n    ^\n    |\n  base address of array (which is also the address of first element)\n</code></pre>\n\n<p>Lets print the <code>&amp;b</code> and <code>b</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int b[3] = {3,4,5};\n    printf(\"&amp;b = %p\\n\", (void*)&amp;b);\n    printf(\"b  = %p\\n\", (void*)b);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&amp;b = 0x7ffee9f5fa2c\nb  = 0x7ffee9f5fa2c\n</code></pre>\n\n<p>both <code>&amp;b</code> and <code>b</code> referring to same address. <strong>The address of array and address of first element of array is numerically same but their type is <em>different</em>.</strong></p>\n\n<p><code>b</code> is <strong>pointer to first element of array</strong><sup>1)</sup> whereas <code>&amp;b</code> is <strong>pointer to an array of three <code>int</code></strong>.</p>\n\n<p>The type of <code>b</code> is <code>int *</code> whereas the type of <code>&amp;b</code> is <code>int (*)[3]</code>.</p>\n\n<p>We can see the difference by doing a simple pointer arithmetic -  add <code>1</code> to these pointers.<br>\nWhen you add <code>1</code> to these pointers, the result will be different because there <strong>type is different</strong>.<br>\n<code>b+1</code> will result in <code>address of first element of array b + 4 bytes</code> <em>[assuming the size of integer is <code>4</code> bytes]</em><br>\n<code>&amp;b+1</code> will result in <code>base address of b + (3*4) bytes</code></p>\n\n<pre><code>    +-----------+\n    | 3 | 4 | 5 |\n    +-----------+\n    ^   ^\n    b   |\n        |\n       b+1\n\n    +-----------+\n    | 3 | 4 | 5 |\n    +-----------+\n    ^           ^\n   &amp;b           |\n                |\n              &amp;b+1\n</code></pre>\n\n<p>Lets print the value of <code>&amp;b+1</code> and <code>b+1</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int b[3] = {3,4,5};\n    printf(\"&amp;b = %p\\n\", (void*)&amp;b);\n    printf(\"&amp;b+1 = %p\\n\", (void*)(&amp;b+1));\n    printf(\"b  = %p\\n\", (void*)b);\n    printf(\"b+1  = %p\\n\", (void*)(b+1));\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&amp;b = 0x7ffeee6e7a2c   \n&amp;b+1 = 0x7ffeee6e7a38\nb  = 0x7ffeee6e7a2c\nb+1  = 0x7ffeee6e7a30\n</code></pre>\n\n<p>Back to your scenario of 2D array:</p>\n\n<p><code>a</code> is array of <code>3</code> one dimensional array.\nThe in memory view of the 2D array would be like this </p>\n\n<pre><code>    +-----------+\n a+0| 0 | 1 | 2 |  &lt;--- first 1D array\n    +-----------+\n a+1| 3 | 4 | 5 |  &lt;--- second 1D array\n    +-----------+\n a+2| 6 | 7 | 8 |  &lt;--- third 1D array\n    +-----------+\n</code></pre>\n\n<p><code>a+1</code> is base address of second 1D array <em>[equivalent to <code>&amp;b</code> in above example]</em>  </p>\n\n<p><code>&amp;a[1] --&gt; &amp;(*(a+1)) --&gt; a+1</code><sup>1)</sup></p>\n\n<p>and <code>*(a+1)</code> is address of first element of second 1D array <em>[equivalent to <code>b</code> in above example]</em></p>\n\n<p><code>&amp;a[1][0] --&gt; &amp;(*(*(a+1)+0)) --&gt; &amp;(*(*(a+1))) ---&gt; *(a+1)</code><sup>1)</sup> </p>\n\n<p><code>a+1</code> is of type <code>int (*)[3]</code> and <code>*(a+1)</code> is of type <code>int *</code>.</p>\n\n<p>Lets add <code>1</code> to these pointer </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    int a[3][3]={0,1,2,3,4,5,6,7,8};\n    printf(\"a+1 = %p\\n\", (void*)(a+1));  \n    printf(\"(a+1)+1 = %p\\n\", (void*)((a+1)+1)); \n    printf(\"*(a+1) = %p\\n\", (void*)(*(a+1))); \n    printf(\"(*(a+1)+1) = %p\\n\", (void*)((*(a+1))+1));\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>a+1 = 0x7ffee167ea1c\n(a+1)+1 = 0x7ffee167ea28\n*(a+1) = 0x7ffee167ea1c\n(*(a+1)+1) = 0x7ffee167ea20\n</code></pre>\n\n<p>Hope this clarify all of your doubt.</p>\n\n<hr>\n\n<p>1)<br>\nFrom C Standards#6.5.2.1</p>\n\n<blockquote>\n  <p>The definition of the subscript operator [] is that E1[E2] is identical to (*((E1)+(E2))).</p>\n</blockquote>\n\n<p>In context of the above example of 1D array <code>b</code>:<br>\n<code>b[x]</code> is identical to <code>*(b+x)</code>.</p>\n\n<p>To access the first element of array <code>b</code>, you will write <code>b[0]</code> and to get the address of first element of array <code>b</code>, you will do <code>&amp;b[0]</code>.</p>\n\n<p><code>&amp;b[0] --&gt; &amp;(*(b+0)) --&gt; &amp;(*b) --&gt; b</code></p>\n\n<p>That means <code>b</code> will give address of first element of array <code>b</code>.</p>\n\n<p>The operator <code>&amp;</code> is used to get the address and the operator <code>*</code> is used for dereferencing. These operators cancel the effect of each other when used one after another. Hence, <code>&amp;(*(b+i))</code> is equivalent to <code>b+i</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 196, "user_id": 9832392, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Rc42MEOwdL0/AAAAAAAAAAI/AAAAAAAAAOQ/c4XMpY2_sMM/photo.jpg?sz=128", "display_name": "Umair", "link": "https://stackoverflow.com/users/9832392/umair"}, "is_accepted": false, "score": 0, "last_activity_date": 1533041867, "creation_date": 1533041867, "answer_id": 51613953, "question_id": 51605849, "link": "https://stackoverflow.com/questions/51605849/about-pointers-and-value-of-operator/51613953#51613953", "title": "About Pointers and Value of operator", "body": "<p>In memory, there is no 2D array because memory is 1D. So all 2D arrays are stored as a sequence of 1D arrays.</p>\n\n<p>Secondly, wherever you write only the name of an array, it means the address of the first element of that array.</p>\n\n<p>Now in your code <code>a+1</code> and <code>*(a+1)</code> evaluates to the same address, u can see this by replacing <code>a</code> with the address of <code>a[0][0]</code>.</p>\n"}], "owner": {"reputation": 69, "user_id": 7478809, "user_type": "registered", "profile_image": "https://graph.facebook.com/362796770730196/picture?type=large", "display_name": "Arijit Karali", "link": "https://stackoverflow.com/users/7478809/arijit-karali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 1, "accepted_answer_id": 51607231, "answer_count": 3, "score": 2, "last_activity_date": 1533092005, "creation_date": 1533014057, "last_edit_date": 1533017331, "question_id": 51605849, "link": "https://stackoverflow.com/questions/51605849/about-pointers-and-value-of-operator", "title": "About Pointers and Value of operator", "body": "<pre><code>....\nint a[3][3]={0,1,2,3,4,5,6,7,8}\nprintf(\"%d\",a+1);  // output 1\nprintf(\"%d\",*(a+1));  //output 2\n....\n</code></pre>\n\n<p>why output 1 and output 2 are same addresses? If it would have 1D array then applying 'value of' operator will give corresponding values in the array but here getting address, Confused!</p>\n"}, {"tags": ["c", "string", "segmentation-fault", "scanf", "strtok"], "comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 1, "creation_date": 1533014689, "post_id": 51605813, "comment_id": 90177153, "body": "What input do you feed the program? And on what line do you get a segfault? (use a debugger to find out)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1533014811, "post_id": 51605813, "comment_id": 90177205, "body": "Note that a scan set is complete at the <code>]</code> of the <code>%[\u2026]</code> format specification.  The <code>s</code> is a literal character in the format that will not normally match anything, but you won&#39;t know that (there&#39;s no way for <code>scanf()</code> to report that problem).  You&#39;re almost certainly getting a segmentation fault because <code>strtok()</code> is returning a null pointer when you aren&#39;t expecting it to.  You should check that the <code>scanf()</code> calls are successful, and you should check that the <code>strtok()</code> calls are successful too,"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1533015922, "post_id": 51605813, "comment_id": 90177583, "body": "<code>scanf(&quot;%[^\\n]s&quot;,c);</code> --&gt; <code>scanf(&quot; %[^\\n]&quot;, c);</code> should solve your issue. That being said, check the results of <code>scanf</code> and <code>strtok</code> as <a href=\"https://stackoverflow.com/questions/51605813/what-is-a-segmentation-fault-and-why-is-this-programme-showing-a-segmentation-fa#comment90177205_51605813\">Jonathan Leffler said</a>"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1533017606, "post_id": 51605813, "comment_id": 90178208, "body": "related: <a href=\"https://stackoverflow.com/questions/2346806/what-is-a-segmentation-fault\" title=\"what is a segmentation fault\">stackoverflow.com/questions/2346806/&hellip;</a>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1533020339, "post_id": 51605813, "comment_id": 90179593, "body": "<code>%[^\\n]s</code> requires an &#39;s&#39; at the end of the string being inputed? Is that intentional? Know that <code>%[]</code> and <code>%s</code> are different specifiers."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1533029363, "post_id": 51605813, "comment_id": 90184679, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2346806/what-is-a-segmentation-fault\">What is a segmentation fault?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4880307, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205230615512390/picture?type=large", "display_name": "Minhaz Minu", "link": "https://stackoverflow.com/users/4880307/minhaz-minu"}, "edited": false, "score": 0, "creation_date": 1533047440, "post_id": 51607039, "comment_id": 90196958, "body": "Thank you. now i understand fully. Thank you again."}], "tags": [], "owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1533020056, "last_edit_date": 1533020056, "creation_date": 1533019732, "answer_id": 51607039, "question_id": 51605813, "link": "https://stackoverflow.com/questions/51605813/what-is-a-segmentation-fault-and-why-is-this-program-showing-a-segmentation-faul/51607039#51607039", "title": "What is a segmentation fault and why is this program showing a segmentation fault?", "body": "<p>A segmentation fault is usually caused when the program tries to access memory which it is not allowed to use. Read <a href=\"https://stackoverflow.com/q/2346806/5375464\">What is a segmentation fault?</a>.</p>\n\n<p>In your case it might be caused because of the way you use the character array <code>c[]</code> and the <code>strtok()</code> function.</p>\n\n<p><a href=\"https://linux.die.net/man/3/strtok\" rel=\"nofollow noreferrer\"><code>strtok()</code></a> modifies its first argument based on the delimiters which are in the form of its second argument.</p>\n\n<p>For example, if you do</p>\n\n<pre><code>char s[]=\"hello world how are you?\";\nstrtok(s, \" \");\nprintf(\"\\n%s\", s);\n</code></pre>\n\n<p>the output would be just</p>\n\n<pre><code>hello\n</code></pre>\n\n<p>and not</p>\n\n<pre><code>hello world how are you?\n</code></pre>\n\n<p>because the position with the delimiter is overwritten.This is a reason why <code>strtok()</code> can't be used on string literals.</p>\n\n<p>The reason why you don't get error when you try without the <code>while</code> loop may be because <code>c[]</code> has a few spaces in the part of memory that the program is allowed to access. <code>strtok()</code> will go on looking for delimiters till the <code>\\0</code> denoting end of string is found which may be anywhere since <code>c[]</code> has garbage.</p>\n\n<hr>\n\n<p>You haven't initialised <code>c[]</code> and it just has some garbage value. And there may or may not be a <code></code> (space) which the <code>strtok()</code> is to consider as delimiter within the space for 1000 characters that you set aside in <code>c[]</code>. And if there is no <code></code> within this 1000 bytes, the <code>strtok()</code> would look beyond the bounds of the array <code>c[]</code> and may modify memory which the program is not allowed to access.</p>\n\n<p>Note that with</p>\n\n<pre><code>scanf(\"%[^\\n]s\",c);\n</code></pre>\n\n<p>you are asking the program to read everything till a <code>\\n</code> and then an 's'. The extra s is not necessary. Just '%[^\\n]` would've done.</p>\n\n<p>But <code>scanf()</code> is not suited for this as it could easily lead to overflow. Read <a href=\"https://stackoverflow.com/q/2430303/5375464\">Disadvantages of scanf</a>. You could try <code>fgets()</code> instead like</p>\n\n<pre><code>if( fgets(c, sizeof(c), stdin)==NULL )\n{\n    //something went wrong.\n}\n</code></pre>\n\n<p><code>fgets()</code> returns <code>NULL</code> upon error.</p>\n\n<p>but keep in mind that <code>fgets()</code> would read in the trailing <code>\\n</code> as well. Read <a href=\"https://stackoverflow.com/q/2693776/5375464\">Removing trailing newline character from <code>fgets</code> input</a>.</p>\n\n<p>So, as suggested in that post, do something like</p>\n\n<pre><code>char *pos;\nif( (pos=strchr(c, '\\n'))!=NULL )\n{\n    *pos='\\0';\n}\n</code></pre>\n\n<p>to replace the <code>\\n</code> with the nul character denoting the end of string.</p>\n\n<p>Had you done</p>\n\n<pre><code>scanf(\"%[^\\n]\", c);\n</code></pre>\n\n<p>instead, the <code>\\n</code> would've remained unconsumed in the input buffer which could cause trouble if not taken care of later.</p>\n\n<p>You may also want to check out <a href=\"https://stackoverflow.com/q/7021725/5375464\">How to convert a string to integer in C</a> as <code>atoi()</code> does not allow for proper error checking.</p>\n"}], "owner": {"reputation": 1, "user_id": 4880307, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205230615512390/picture?type=large", "display_name": "Minhaz Minu", "link": "https://stackoverflow.com/users/4880307/minhaz-minu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1533020056, "creation_date": 1533013841, "last_edit_date": 1533019848, "question_id": 51605813, "link": "https://stackoverflow.com/questions/51605813/what-is-a-segmentation-fault-and-why-is-this-program-showing-a-segmentation-faul", "title": "What is a segmentation fault and why is this program showing a segmentation fault?", "body": "<p>Here I try to get token from a string, separating by space. \nBut I'm getting the segmentation fault if I run this program without <code>while</code> loop. It is fine, but why?</p>\n\n<hr>\n\n<p><strong>My code:</strong> </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char c[1000];\n    int tnum, a, b, d;\n    char *n;\n    scanf(\"%d\", &amp;tnum);\n    while(tnum != 0)\n    {\n        scanf(\"%[^\\n]s\", c);\n\n        n = strtok(c, \" \");\n        a = atoi(n);\n\n        n = strtok(NULL, \" \");\n        b = atoi(n);\n\n        n = strtok(NULL, \" \");\n        d = atoi(n);\n\n        printf(\"%d\\n\", a * b * d);\n        tnum--;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "function-pointers", "free", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 2, "creation_date": 1533012006, "post_id": 51605527, "comment_id": 90176440, "body": "Do you understand the difference between <code>sign</code> and <code>sign[0], sign[1], etc.</code>?"}, {"owner": {"reputation": 952, "user_id": 2961927, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cb4e5fe0e05f0fb5914e5f1566c764af?s=128&d=identicon&r=PG&f=1", "display_name": "user2961927", "link": "https://stackoverflow.com/users/2961927/user2961927"}, "edited": false, "score": 0, "creation_date": 1533012579, "post_id": 51605527, "comment_id": 90176578, "body": "Aren\u2019t they nloc different pointers?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1533012700, "post_id": 51605527, "comment_id": 90176600, "body": "The code has a memory leak (which is to say that it calls <code>calloc</code> more times than it calls <code>free</code>). The compiler does not warn you about this because it&#39;s extremely difficult, if not impossible, for a compiler to detect such problems. However, there are tools (e.g. <a href=\"https://stackoverflow.com/tags/valgrind/info\">valgrind</a>) that <i>will</i> detect memory leaks at run time."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 2, "creation_date": 1533012710, "post_id": 51605527, "comment_id": 90176604, "body": "One reason:  sometimes you <i>want</i> to be able to allocate more memory without freeing the previous memory first (e.g. if you were constructing a linked list, you wouldn&#39;t want the compiler to force you to free the first node in the list, just because you&#39;ve now gone on to create the second node in the list)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1533078904, "post_id": 51605527, "comment_id": 90211798, "body": "when calling any of the heap allocation functions <code>malloc</code> <code>calloc</code> <code>realloc</code>,  1) always check (!=NULL) the returned value to assure the operation was successful. 2) the returned type is <code>void*</code> which can be assigned to any pointer.  Casting just clutters the code, making it more difficult to understand, debug, etc"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1533079107, "post_id": 51605527, "comment_id": 90211839, "body": "this: <code>for (isrc=0;isrc&lt;n;isrc++){         sign = fun(nloc);     }</code> overlays the pointer(s) on each iteration,  The result is the pointer to the prior allocated memory is lost (a unrecoverable memory leak)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1533079227, "post_id": 51605527, "comment_id": 90211863, "body": "when the parameters to <code>main()</code> are not going to be used, then use the signature: <code>int main( void )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1533079445, "post_id": 51605527, "comment_id": 90211920, "body": "regarding: <code>sign[k][it]=it*0.2;</code>  the literal: <code>0.2</code> is a <code>double</code>  strongly suggest using: <code>sign[k][it]=it*0.2f;</code>  Note the trailing <code>f</code> that makes the literal into a <code>float</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1533079555, "post_id": 51605527, "comment_id": 90211949, "body": "regarding: <code>This is a correct code snippet.</code>  No, it is not.  When compiling, always enable the warnings, then fix those warnings"}, {"owner": {"reputation": 73, "user_id": 10011302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a246b666580f8b15eed45b6354f3ecc4?s=128&d=identicon&r=PG&f=1", "display_name": "coco", "link": "https://stackoverflow.com/users/10011302/coco"}, "edited": false, "score": 0, "creation_date": 1533874421, "post_id": 51605527, "comment_id": 90515577, "body": "I found an exception. Could you please see my [Supplementary message] and make some comments about this? thanks."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 10011302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a246b666580f8b15eed45b6354f3ecc4?s=128&d=identicon&r=PG&f=1", "display_name": "coco", "link": "https://stackoverflow.com/users/10011302/coco"}, "edited": false, "score": 0, "creation_date": 1533874526, "post_id": 51605610, "comment_id": 90515594, "body": "I found an exception. Could you please see my [Supplementary message] and make some comments about this? thanks."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 73, "user_id": 10011302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a246b666580f8b15eed45b6354f3ecc4?s=128&d=identicon&r=PG&f=1", "display_name": "coco", "link": "https://stackoverflow.com/users/10011302/coco"}, "edited": false, "score": 0, "creation_date": 1533886364, "post_id": 51605610, "comment_id": 90520067, "body": "@coco You cannot free the same allocation twice."}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 2, "last_activity_date": 1533013856, "last_edit_date": 1533013856, "creation_date": 1533012383, "answer_id": 51605610, "question_id": 51605527, "link": "https://stackoverflow.com/questions/51605527/repeatedly-allocate-memory-without-freeing-it/51605610#51605610", "title": "Repeatedly allocate memory without freeing it", "body": "<blockquote>\n  <p>My question is: why is it legal that we can allocate memory for a pointer in each iteration without having to free it first?</p>\n</blockquote>\n\n<p><strong>Short answer</strong></p>\n\n<p>C trades away safety to gain simplicity and performance.</p>\n\n<p><strong>Longer answer</strong></p>\n\n<p>You don't free the <em>pointer</em>. You free the memory block the pointer is <em>pointing</em> at.</p>\n\n<p>Think about what <code>malloc</code> (and <code>calloc</code>) does. They both allocate a piece of memory, and if the allocation is successful they return a pointer to that memory block. The allocation functions (like all functions) has no insight, nor control whatsoever of what you do with the return value. The functions does not even see the pointer that you are assigning the return value to.</p>\n\n<p>It would be fairly complex (relatively speaking, C has a pretty simple structure) to implement a protection against it. First, consider this code:</p>\n\n<pre><code>int * a = malloc(1);\nint * b = a;\na = malloc(1);\nfree(b);\nfree(a);\n</code></pre>\n\n<p>This code has no memory leaks, even though we did the precise thing you asked about. We reassigned <code>a</code> before calling free upon the memory from the first malloc. It works fine, because we have saved the address in <code>b</code>.</p>\n\n<p>So in order to disallow reassigning pointers that points to a memory block <em>that no other pointer points at</em>, the runtime environment would need to keep track of this, and it is not entirely trivial. And it would also need to create extra code to handle all this. Since this check needs to be done at runtime, it may affect performance.</p>\n\n<p>Also, remember that even though C may seem very low level today, it was considered a high level language when it came.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 10011302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a246b666580f8b15eed45b6354f3ecc4?s=128&d=identicon&r=PG&f=1", "display_name": "coco", "link": "https://stackoverflow.com/users/10011302/coco"}, "edited": false, "score": 0, "creation_date": 1533874533, "post_id": 51605658, "comment_id": 90515596, "body": "I found an exception. Could you please see my [Supplementary message] and make some comments about this? thanks."}, {"owner": {"reputation": 671, "user_id": 9479013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQACf.png?s=128&g=1", "display_name": "BitShift", "link": "https://stackoverflow.com/users/9479013/bitshift"}, "reply_to_user": {"reputation": 73, "user_id": 10011302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a246b666580f8b15eed45b6354f3ecc4?s=128&d=identicon&r=PG&f=1", "display_name": "coco", "link": "https://stackoverflow.com/users/10011302/coco"}, "edited": false, "score": 0, "creation_date": 1535658014, "post_id": 51605658, "comment_id": 91159627, "body": "Hi @coco I can&#39;t seem to see your message. Happy to contribute some more information if you require assistance."}], "tags": [], "owner": {"reputation": 671, "user_id": 9479013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iQACf.png?s=128&g=1", "display_name": "BitShift", "link": "https://stackoverflow.com/users/9479013/bitshift"}, "is_accepted": false, "score": 3, "last_activity_date": 1533033564, "last_edit_date": 1533033564, "creation_date": 1533012833, "answer_id": 51605658, "question_id": 51605527, "link": "https://stackoverflow.com/questions/51605527/repeatedly-allocate-memory-without-freeing-it/51605658#51605658", "title": "Repeatedly allocate memory without freeing it", "body": "<p>It is legal because in C, you as the programmer are responsible for memory management. There is a very good reason for this. To quote <a href=\"https://softwareengineering.stackexchange.com/questions/113177/why-do-languages-such-as-c-and-c-not-have-garbage-collection-while-java-does\">another thread</a></p>\n\n<blockquote>\n  <p>Garbage collection requires data structures for tracking allocations\n  and/or reference counting. These create overhead in memory,\n  performance, and the complexity of the language. C++ is designed to be\n  \"close to the metal\", in other words, it takes the higher performance\n  side of the tradeoff vs convenience features. Other languages make\n  that tradeoff differently. This is one of the considerations in\n  choosing a language, which emphasis you prefer.</p>\n</blockquote>\n\n<p>Not only is performance and code size a consideration, but different systems have difference addressing schemes for memory. It is also for this reason that C is easy to port and maintain across platforms, given that there is no garbage collection to alter.</p>\n\n<p>EDIT: Some answers mention freeing memory space as opposed to the pointer itself, it is worth further specifying what that means: free() simply marks the allocated space as available, it is not 'freed' or erased, nor does any other operation occur on that memory space. It is then still incumbent on the programmer to delete the address that was assigned to the pointer variable.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 10011302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a246b666580f8b15eed45b6354f3ecc4?s=128&d=identicon&r=PG&f=1", "display_name": "coco", "link": "https://stackoverflow.com/users/10011302/coco"}, "edited": false, "score": 0, "creation_date": 1533874485, "post_id": 51605665, "comment_id": 90515583, "body": "Hi Sandy, I found an exception. Could you please see my [Supplementary message] and make some comments about this? thanks."}], "tags": [], "owner": {"reputation": 855, "user_id": 3659239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b6ed436c73d42ba39748209936b7e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/3659239/sandy"}, "is_accepted": false, "score": 4, "last_activity_date": 1533012867, "creation_date": 1533012867, "answer_id": 51605665, "question_id": 51605527, "link": "https://stackoverflow.com/questions/51605527/repeatedly-allocate-memory-without-freeing-it/51605665#51605665", "title": "Repeatedly allocate memory without freeing it", "body": "<blockquote>\n  <p>why is it legal that we can allocate memory for a pointer in each iteration without having to free it first?</p>\n</blockquote>\n\n<p>The responsibility of freeing dynamically allocated memory is left on the programmer. It is legal because the compiler does not enforce it, although there are code checking tools that can flag this problem.</p>\n\n<p>Freeing dynamically allocated memory should be done in the reverse order of allocation. For ex:</p>\n\n<pre><code>for (i=0;i&lt;nloc;i++)\n    free(sign[i]);\n\nfree(sign);\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 10011302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a246b666580f8b15eed45b6354f3ecc4?s=128&d=identicon&r=PG&f=1", "display_name": "coco", "link": "https://stackoverflow.com/users/10011302/coco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1533874335, "creation_date": 1533011828, "last_edit_date": 1533874335, "question_id": 51605527, "link": "https://stackoverflow.com/questions/51605527/repeatedly-allocate-memory-without-freeing-it", "title": "Repeatedly allocate memory without freeing it", "body": "<p>The following code shows an example that repeatedly allocates memory without first calling <code>free</code>. Instead, it frees <code>**sign</code> after the loop. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nfloat ** fun(int nloc)\n{\n    float **sign;\n    int i,nt=100,it,k;\n    sign=(float **)calloc(nloc,sizeof(float *));\n    for (i=0;i&lt;nloc;i++)\n        sign[i] = (float *)calloc(nt,sizeof(float *));\n\n    for (it=0;it&lt;nt;it++){\n        for (k=0;k&lt;nloc;k++){\n            sign[k][it]=it*0.2;\n        }\n    }\n    return sign;\n}\n\n\nint main(int argc, char *argv[])\n{\n    int i,isrc,n=3,nloc=1;\n    float **sign=NULL;\n    for (isrc=0;isrc&lt;n;isrc++){\n        sign = fun(nloc);\n    }\n    for (i=0;i&lt;nloc;i++){\n        free(sign[i]);\n    }\n    free(sign);\n    exit(0);\n}\n</code></pre>\n\n<p>This is a correct code snippet. My question is: why is it legal that we can allocate memory for a pointer in each iteration without having to free it first?</p>\n\n<p>[Supplementary message]:</p>\n\n<p>Hi all, I think there's one case we cannot <code>free</code> memory in the loop. If <code>buffer=p</code> and <code>p</code> is defined outside the loop, like:</p>\n\n<pre><code>float *buffer, *p;\n/* Elements of p calculated */\nfor (...){\n    /* allocate memory for **buffer */    \n    buffer = p;\n    free(buffer)\n    /* if free here will cause p lost */\n}\n</code></pre>\n\n<p>If free <code>buffer</code> at the end of each loop, it may cause <code>p</code> lost because <code>buffer</code> and <code>p</code> share the same memory address.</p>\n"}, {"tags": ["c", "loops", "numbers", "letter", "isalpha"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1532999311, "post_id": 51604130, "comment_id": 90174088, "body": "You should study <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\">the <code>scanf</code> function (and family)</a> more carefully. Like what it <i>returns</i>."}, {"owner": {"reputation": 1229, "user_id": 7151380, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CGs59.png?s=128&g=1", "display_name": "Alerra", "link": "https://stackoverflow.com/users/7151380/alerra"}, "edited": false, "score": 1, "creation_date": 1532999423, "post_id": 51604130, "comment_id": 90174119, "body": "Also, if I understand your problem correctly, perhaps something like this would help: <a href=\"https://stackoverflow.com/questions/1478932/check-if-user-inputs-a-letter-or-number-in-c\" title=\"check if user inputs a letter or number in c\">stackoverflow.com/questions/1478932/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10149464"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1532999518, "post_id": 51604130, "comment_id": 90174138, "body": "@Someprogrammerdude maybe I actually do ;D"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10149464"}, "edited": false, "score": 0, "creation_date": 1532999819, "post_id": 51604130, "comment_id": 90174203, "body": "Anyways it&#39;s 4am I should go to bed and try this tomorrow on a fresh head, because right now... I can&#39;t even read my own code well..."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1533000399, "post_id": 51604130, "comment_id": 90174282, "body": "Need to study or already check? In the code you show you do not check, and <code>num</code> will <i>never</i> be an alphabetic character (unless the input number actually matches the encoding of one (for example you input <code>97</code> which happens to match the <a href=\"http://en.cppreference.com/w/c/language/ascii\" rel=\"nofollow noreferrer\">ASCII</a> encoded character <code>&#39;a&#39;</code>), or you passed a character into the function, which reminds me: Why do you pass <code>num</code> as an argument? It could be just a local variable)."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 3, "creation_date": 1533001670, "post_id": 51604130, "comment_id": 90174509, "body": "Why do you specifically want to know if it is a letter? It seems like what you actually want to know if it is a number or not, and if it is not you don&#39;t care if it is a letter, special character or something else?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1533081810, "post_id": 51604130, "comment_id": 90212382, "body": "regarding: <code>scanf(&quot;%d&quot;,&amp;num);</code>  this will NEVER input anything but a leading <code>-</code> or <code>+</code> and some number of digits.  So you should:  check the returned value (not the parameter value) to assure the operation was successful   And if not successful, then call <code>getchar()</code> to consume the offending letter and repeat until successful"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10149464"}, "edited": false, "score": 0, "creation_date": 1533048076, "post_id": 51604486, "comment_id": 90197448, "body": "After implementing this code it gave me infinitive spam of <i>Read failed. Please input a number</i> when non number was inputted. I have no clue what to put in to the <code>while()</code>. I tried <code>while(scanf(&quot;%d&quot;,&amp;num) != 1);</code>, but that didn&#39;t work. There where other attempts for what to put into <code>while()</code>, but they all failed in the same way. Also I really must have it as a loop. Other thing is that I have no idea why that &#180;!= 1&#180; is there..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10149464"}, "edited": false, "score": 0, "creation_date": 1533052045, "post_id": 51604486, "comment_id": 90200242, "body": "I found that this works if it&#39;s not a loop, but if I try to make it a loop it fails and does infinitive spam. I tried different ways to make a loop out of it, <code>do...while</code>, <code>while</code> and <code>goto</code> and none of the succeeded. They either crash, loop until infinity"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1533098863, "post_id": 51604486, "comment_id": 90215685, "body": "@Potato Sorry to hear that. In that case, please post a new question about it, but make sure to make the question completely clear. Especially include the input that causes a fail."}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 2, "last_activity_date": 1533002547, "creation_date": 1533002547, "answer_id": 51604486, "question_id": 51604130, "link": "https://stackoverflow.com/questions/51604130/making-a-small-calculator-program-need-to-check-if-user-input-is-a-letter/51604486#51604486", "title": "Making a small calculator program, need to check if user input is a letter", "body": "<p>From the context it seems pretty obvious that you're not interested in whether it is a letter or not. You're only interested in knowing if it is a number or not. If it is not a number, you don't care if it is a letter, special character or something else.</p>\n\n<p>Assuming above, you are taking the wrong approach and you are also using <code>scanf</code> incorrectly. <code>scanf(\"%d\", &amp;num)</code> will always read a number into <code>num</code>, provided that the reading succeeded. What you need to do is check if the reading succeeded.</p>\n\n<pre><code>do{\n    printf(\"\\n:\");\n    if(scanf(\"%d\",&amp;num) != 1) { // If we did not perform a successful read\n        printf(\"\\nRead failed. Please input a number\\n\");\n        continue;\n    } else {\n...\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10149464"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533014398, "creation_date": 1532998940, "last_edit_date": 1533014398, "question_id": 51604130, "link": "https://stackoverflow.com/questions/51604130/making-a-small-calculator-program-need-to-check-if-user-input-is-a-letter", "title": "Making a small calculator program, need to check if user input is a letter", "body": "<p>I've been trying to make a small calculator program to test my own skills, due to me being pretty green when talking about coding. Anyways I'm trying to make a function with a loop that will ask for a number until a number is inputted and reject letters.</p>\n\n<p>This is what my limited understanding/googling produced:</p>\n\n<pre><code>int is_number(int num){\n    do {\n        printf(\"\\n:\");\n        scanf(\"%d\",&amp;num);\n        if( isalpha(num)){\n            printf(\"\\nYou entered a letter, please input a number\\n\");\n            continue;\n        } else {\n            printf(\"Number accepted...\\n\");\n            break;\n        }\n    } while(isalpha(num));\n    return num;\n}\n</code></pre>\n\n<p>The only problem is that it crashes if given a letter, but there is progress... no infinitive spam of same message.</p>\n\n<p>The next code is the whole code not just a snippet:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;windows.h&gt;\n#include&lt;ctype.h&gt;\n\n//Records the answer for Y/N question and checks if answer is Y or No\n\nchar check_yesno_question(char a){\n\n    do{\n        printf(\"\\n:\");\n        scanf(\" %c\",&amp;a);\n        if((a=='Y')||(a=='N')||(a=='y')||(a=='n')){\n            break;\n        }\n        else{\n            printf(\"\\nIncorrect answer, please input Y or N (Y = Yes, N = No)\\n\");\n            continue;\n        }\n    }while((a!='Y')&amp;&amp;(a!='N')&amp;&amp;(a!='y')&amp;&amp;(a!='n'));\n\n    return a;\n\n}\n//My sad attempt to test if number given is a letter\n\nint is_number(int num){\n\n    do{\n        printf(\"\\n:\");\n        scanf(\"%d\",&amp;num);\n        if( isalpha(num)){\n            printf(\"\\nYou entered a letter, please input a number\\n\");\n            continue;\n        }\n        else{\n            printf(\"Number accepted...\\n\");\n            break;\n        }\n    }while(isalpha(num));\n    return num;\n}\n\nint main(){\n\n    char YesNo1;\n    int start;\n    int StartWait=500;\n    //char Choice;\n    int number1;\n    int number2;\n    int number3;\n    int number4;\n\n    printf(\"Welcome to simple calculator 0.01\\n\");\n    printf(\"At this stage calculator supports only 4 numbers\\n\");\n    printf(\"Would you like to start simple calculator?\\n\");\n    printf(\"Y/N?\\n\");                                            \n\n    //Calls for check_yesno_question\n\n    YesNo1=check_yesno_question(YesNo1);\n\n    //Checks if answer is yes proceed, if answer is no, return 0;\n\n    if((YesNo1=='y')||(YesNo1=='Y')){\n        printf(\"Awnser = Yes\\n\");\n        printf(\"Starting up the calculator\");\n        for(start=0;start&lt;3;start++){\n            printf(\".\");\n            Sleep(StartWait);\n        }\n        printf(\"\\n\");\n    }\n    else{\n        printf(\"Awnser = No\\n\");\n        printf(\"Turning of the calculator\");\n        for(start=0;start&lt;3;start++){\n            printf(\".\");\n            Sleep(StartWait);\n        }\n        printf(\"\\n\");\n        return 0;\n    }\n    //Me wanting to make things look bit more clean\n\n    system(\"cls\");\n\n    printf(\"---------------CALCULATOR---------------\\n\");\n    //Calls for is_number\n    number1=is_number(number1);\n\n    return 0;\n}\n</code></pre>\n\n<p>As you seen it is unfinished.\nI'm basically done looking for answers myself. When this was posted my time was 4:04am</p>\n"}]